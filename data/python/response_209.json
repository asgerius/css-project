[{"tags": ["python", "pyqt", "pyqt4", "qmenu"], "answers": [{"comments": [{"owner": {"reputation": 375, "user_id": 10281572, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N0oYg7hgGGM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMlsLl0oVPj1OXarJx8eTDBbo40sg/mo/photo.jpg?sz=128", "display_name": "Teh Ki", "link": "https://stackoverflow.com/users/10281572/teh-ki"}, "edited": false, "score": 0, "creation_date": 1547497420, "post_id": 54120444, "comment_id": 95205407, "body": "@eyllanesec wondering if you could advise if multi qmenus can be cater to different tabs? Eg. If I added a new item in TabA, 2 new items in TabB, and as I do a right mouse click on either on there, the &#39;new&#39; items are shown differently?"}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1547082613, "last_edit_date": 1547082613, "creation_date": 1547080353, "answer_id": 54120444, "question_id": 54120195, "link": "https://stackoverflow.com/questions/54120195/slotting-in-new-items-at-specified-positions-in-qmenu/54120444#54120444", "title": "Slotting in new items at specified positions in QMenu", "body": "<p>How many times do you call <code>contextMenuEvent</code>? every time you click right so you are continually adding the Defaults items, do not you think it is better to add it only once so as not to add duplicates?, that is the right thing to do.</p>\n\n<p>On the other hand if you want to insert an item in the <code>QMenu</code> you must use <code>insertAction()</code>.</p>\n\n<p>And finally do not use <code>raw_input()</code> (or <code>input()</code> in python3) since they are blocking and freeze the GUI, it is best to use a dialog that asks you for the data.</p>\n\n<pre><code>class Example(QtGui.QMainWindow):\n    def __init__(self, parent=None):\n        super(Example, self).__init__(parent)\n        self.initUI()\n\n    def initUI(self):         \n        self.setGeometry(300, 300, 300, 200)\n        self.setWindowTitle('Context menu')    \n\n        self.qmenu = QtGui.QMenu()\n        add_item_action = QtGui.QAction('Add new item', self,\n            triggered=self.add_new_item)\n        self.qmenu.addAction(add_item_action)\n        self.qmenu.addSeparator()\n\n        self.separator =  self.qmenu.addSeparator()\n        # Default items\n        def_item_01 = self.qmenu.addAction(\"Default Item A\")\n        def_item_02 = self.qmenu.addAction(\"Default Item B\")\n\n    def contextMenuEvent(self, event):\n        action = self.qmenu.exec_(self.mapToGlobal(event.pos()))\n\n    @QtCore.pyqtSlot()\n    def add_new_item(self):\n        new_item_name, ok = QtGui.QInputDialog.getText(self, \"name of item\", \"Name of new item : \")\n        if ok:\n            new_action = QtGui.QAction(new_item_name, self.qmenu, checkable=True)\n            self.qmenu.insertAction(self.separator, new_action)\n\nif __name__ == '__main__':\n    import sys\n    app = QtGui.QApplication(sys.argv)\n    my_win = Example()\n    my_win.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 375, "user_id": 10281572, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N0oYg7hgGGM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMlsLl0oVPj1OXarJx8eTDBbo40sg/mo/photo.jpg?sz=128", "display_name": "Teh Ki", "link": "https://stackoverflow.com/users/10281572/teh-ki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 54120444, "answer_count": 1, "score": 1, "last_activity_date": 1547082613, "creation_date": 1547078323, "last_edit_date": 1547078620, "question_id": 54120195, "link": "https://stackoverflow.com/questions/54120195/slotting-in-new-items-at-specified-positions-in-qmenu", "title": "Slotting in new items at specified positions in QMenu", "body": "<p>I am trying to achieve the following design of a QMenu:</p>\n\n<pre><code>|  Add New Item  |\n------------------\n|   New Item 1   |\n|   New Item 2   |\n|   New Item 3   |\n------------------\n| Default Item 1 |\n| Default Item 2 |\n</code></pre>\n\n<p>Suppose if it is a new QMenu, the default design looks something lie:</p>\n\n<pre><code>|  Add New Item  |\n------------------\n| Default Item 1 |\n| Default Item 2 |\n</code></pre>\n\n<p>In my code, while I am able to create the new item, I am having 2 issues.</p>\n\n<ol>\n<li><p>For any of the new items that I have specified while using the option - <code>Add new item</code>, the default 3 options are re-added into the QMenu, which results in duplicated options... If I add in <code>self.qmenu.clear()</code>, while it resolves the duplicated default items, no new items will be populated...</p></li>\n<li><p>Is it possible to slot new items to be in-between of the <code>add new item</code> and <code>default items</code>? Or, combine 2 qmenus into one, something akin to how you add widgets in a QVBoxLayout where you can control the ordering?</p></li>\n</ol>\n\n<p>Appreciate in advance for any insights.</p>\n\n<pre><code>class Example(QtGui.QMainWindow):\n    def __init__(self, parent=None):\n        super(Example, self).__init__(parent)\n        self.initUI()\n\n\n    def initUI(self):         \n        self.setGeometry(300, 300, 300, 200)\n        self.setWindowTitle('Context menu')    \n        self.qmenu = QtGui.QMenu()\n\n    def contextMenuEvent(self, event):\n        # self.qmenu.clear()\n\n        # For adding in new item(s)\n        add_item_action = QtGui.QAction('Add new item', self)\n        slot = functools.partial(self.add_new_item)\n        add_item_action.triggered.connect(slot)\n        self.qmenu.addAction(add_item_action)\n        self.qmenu.addSeparator()\n\n        # Default items\n        def_item_01 = self.qmenu.addAction(\"Default Item A\")\n        def_item_02 = self.qmenu.addAction(\"Default Item B\")\n        action = self.qmenu.exec_(self.mapToGlobal(event.pos()))\n\n    def add_new_item(self):\n        new_item_name = raw_input('Name of new item : ')\n        if new_item_name:\n            self.qmenu.addSeparator()\n            # The new items should be checked upon created\n            new_action = QtGui.QAction(new_item_name, self.qmenu, checkable=True)\n            new_action.setChecked(True)\n            self.qmenu.addAction(new_action)\n\nmy_win = Example()\nmy_win.show()\n</code></pre>\n"}, {"tags": ["python", "numpy", "python-xarray"], "comments": [{"owner": {"reputation": 6394, "user_id": 3327666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/717bb7cd1896b19837f5ab1f4264bc9d?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre de Buyl", "link": "https://stackoverflow.com/users/3327666/pierre-de-buyl"}, "edited": false, "score": 0, "creation_date": 1547109789, "post_id": 54120129, "comment_id": 95080938, "body": "The computation of correlation work &quot;time series by time series&quot;, what part do you aim at vectorizing? And for what practical purpose (code readability or performance)?"}, {"owner": {"reputation": 1, "user_id": 6534730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hh1wH.jpg?s=128&g=1", "display_name": "Riley Brady", "link": "https://stackoverflow.com/users/6534730/riley-brady"}, "reply_to_user": {"reputation": 6394, "user_id": 3327666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/717bb7cd1896b19837f5ab1f4264bc9d?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre de Buyl", "link": "https://stackoverflow.com/users/3327666/pierre-de-buyl"}, "edited": false, "score": 0, "creation_date": 1547135490, "post_id": 54120129, "comment_id": 95095970, "body": "I essentially want to avoid looping through each time series to perform this -- I usually work with lat/lon data so that&#39;s O(N^2) with a double for-loop. If I can vectorize the cross-correlation, then this should achieve the overall goal. I&#39;m looking for performance over readability."}], "owner": {"reputation": 1, "user_id": 6534730, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hh1wH.jpg?s=128&g=1", "display_name": "Riley Brady", "link": "https://stackoverflow.com/users/6534730/riley-brady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547077901, "creation_date": 1547077901, "question_id": 54120129, "link": "https://stackoverflow.com/questions/54120129/compute-acf-for-a-grid-of-time-series-in-python", "title": "Compute ACF for a grid of time series in Python", "body": "<p>I am trying to compute the ACF for a grid of time series using python. <code>statsmodels.acf</code> only accepts 1D time series, so using <code>xr.apply_ufunc</code> for instance is not a viable solution. (Note that I am using <code>xarray</code> as my preferred package here, since I deal with large multi-dimensional labeled datasets)</p>\n\n<p>I figured it would be easiest to write the ACF from scratch and vectorize that. Trimming the <code>statsmodels.acf</code> down to just the skeleton I need to get going:</p>\n\n<pre><code>from numpy import correlate as npc\nfrom scipy.signal import correlate as spc\n\ndef acf(x, nlags=40):\n    \"\"\"\n    ds : xarray DataArray with gridded time series\n         e.g., dims ('time', 'lat', 'lon')\n    nlags : number of lags to compute ACF out to \n    \"\"\"\n    avf = acovf(x)\n    acf = avf[:nlags + 1] / avf[0]\n    return acf\n\ndef acovf(x):\n    xo = x - x.mean('time')\n    n = x['time'].size\n    lag_len = n - 1\n    d = n * np.ones(2 * n - 1)\n    acov = npc(xo, xo, 'full')[n - 1:] / d[n - 1:]\n    return acov\n</code></pre>\n\n<p>This is currently breaking at the <code>npc</code> line. <code>np.correlate</code> as well as <code>scipy.signal.correlate</code> break with anything larger than a 1D time series or give an undesired answer. </p>\n\n<p>Most directly: <strong>How can I vectorize a discrete linear cross-correlation of many time series on a grid?</strong></p>\n\n<p>Using the example:</p>\n\n<pre><code>x = xr.DataArray(np.random.rand(10,2,3), dims=['time', 'lat', 'lon'])\n</code></pre>\n\n<p>If I run <code>npc(x, x, 'full')</code> I get the error:</p>\n\n<pre><code>ValueError: object too deep for desired array\n</code></pre>\n\n<p>If I run <code>spc(x, x)</code> I get a (19, 3, 5) array that does not contain accurate output. My output should be (N*2-1, lat, lon) where N is the number of time samples. </p>\n\n<p>This issue seems to be the bottleneck in vectorizing the ACF -- if I can get the cross-correlation to work, the rest of the <code>acf</code> and <code>acovf</code> functions should be simple to vectorize.</p>\n"}, {"tags": ["python", "algorithm", "nlp"], "comments": [{"owner": {"reputation": 4118, "user_id": 10316640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989bf10b54e525330bc9631e0be9e620?s=128&d=identicon&r=PG&f=1", "display_name": "Strom", "link": "https://stackoverflow.com/users/10316640/strom"}, "edited": false, "score": 0, "creation_date": 1547080154, "post_id": 54120121, "comment_id": 95073068, "body": "This is a case of divide and conquer. Split the set into manageable chunks, run your algorithm over the chunks; and aggregate the data.  Repeat initial runs using the aggregated totals, if necessary."}, {"owner": {"reputation": 127, "user_id": 6929394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DP6QM9hvwrE/AAAAAAAAAAI/AAAAAAAACV4/PwuEahLXsrw/photo.jpg?sz=128", "display_name": "Cristian Desivo", "link": "https://stackoverflow.com/users/6929394/cristian-desivo"}, "reply_to_user": {"reputation": 4118, "user_id": 10316640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989bf10b54e525330bc9631e0be9e620?s=128&d=identicon&r=PG&f=1", "display_name": "Strom", "link": "https://stackoverflow.com/users/10316640/strom"}, "edited": false, "score": 0, "creation_date": 1547081642, "post_id": 54120121, "comment_id": 95073356, "body": "@Strom If you mean count ocurrences in every chunk and then aggregate them that doesn&#39;t solve the memory problem because the final result would be the same size. If you mean count ocurrences in every chunk and then iterate for each word over every chunk I tried that, but it&#39;s really slow too."}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 6929394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DP6QM9hvwrE/AAAAAAAAAAI/AAAAAAAACV4/PwuEahLXsrw/photo.jpg?sz=128", "display_name": "Cristian Desivo", "link": "https://stackoverflow.com/users/6929394/cristian-desivo"}, "edited": false, "score": 0, "creation_date": 1547153934, "post_id": 54121776, "comment_id": 95105149, "body": "I will have this in mind, but I would rather not introduce the extra bias if possible."}, {"owner": {"reputation": 4118, "user_id": 10316640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989bf10b54e525330bc9631e0be9e620?s=128&d=identicon&r=PG&f=1", "display_name": "Strom", "link": "https://stackoverflow.com/users/10316640/strom"}, "reply_to_user": {"reputation": 127, "user_id": 6929394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DP6QM9hvwrE/AAAAAAAAAAI/AAAAAAAACV4/PwuEahLXsrw/photo.jpg?sz=128", "display_name": "Cristian Desivo", "link": "https://stackoverflow.com/users/6929394/cristian-desivo"}, "edited": false, "score": 0, "creation_date": 1547325900, "post_id": 54121776, "comment_id": 95157193, "body": "The exponential solution introduces no bias other than that present within the data set. It just takes the same complexity as the original problem +  log n time for aggregation and storage."}], "tags": [], "owner": {"reputation": 4118, "user_id": 10316640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/989bf10b54e525330bc9631e0be9e620?s=128&d=identicon&r=PG&f=1", "display_name": "Strom", "link": "https://stackoverflow.com/users/10316640/strom"}, "is_accepted": false, "score": 0, "last_activity_date": 1547092730, "creation_date": 1547092730, "answer_id": 54121776, "question_id": 54120121, "link": "https://stackoverflow.com/questions/54120121/how-to-count-every-ocurrence-of-a-bigram-in-a-large-text-corpora/54121776#54121776", "title": "How to count every ocurrence of a bigram in a large text corpora", "body": "<p>Break your data into evenly sized 100 - 200 MiB chunks. Run your algorithm. Store the top 85% (most encountered combinations) bigram possibilities comma separated in a file (1.csv). Sort the file by first word.  </p>\n\n<p>Repeat unto different files(2,3,4...), until there is no more data.</p>\n\n<p>Correlate (combine the like value counts) for files 1 and 2 into a new CSV file 1a.\nCorrelate for files 3 and 4 into a new CSV file 2a. \nRepeat for the rest of the files.\nIf there are an odd number of files, Correlate the last file with a random file 1..n)\nThen correlate the 1a, 2a .. files.</p>\n\n<p>Continue until there is a single file with your results.</p>\n\n<p>This procedure represents a binary tree solution. It is the optimal solution in terms of run-time, but it introduces a spacial bias.  Pairs occurring more often closer together or evenly spaced throughout all samples, will have a higher weight on the final product.</p>\n\n<p>The most complete solution is to aggregate the expansion of all the levels fully. For example, (Collate 1 and 3 => 1b, 1 and 4 => 1c ... 2 and 1 =>2b, 2 and 3 => 2c, 2 and 4 => 2d...) ... and then  in the next step combine 1a and 1b..., 2a and 2b...  This is an exponential solution(slow).</p>\n\n<p>To balance performance <em>AND</em> reduce the complexity and decrease the bias, you can randomize the pairings at the lower levels: </p>\n\n<p>For example: Randomize the order of the chunks as they are analyzed at each level. Make sure the algorithm only outputs each pair a single time.</p>\n\n<p>If you the randomize the selections at the bottom of the tree multiple times (approx 1/2 of a the full expansion as described above), while eliminating duplicate pairs from all previous iterations, the resulting accuracy improves greatly in the above layers.</p>\n\n<p>If you repeat this randomization for the second and third levels, (If full analysis is still not possible) beyond the third level, significant performance gains are not likely possible, due to the law of diminishing returns.</p>\n\n<p>I would recommend using a pre-built bigram database, or at least restricting, at the top level, the bigram candidates to be (noun|adjective, noun). Otherwise, you may get the most used noun/verb combination(in most other modern American English data sets, would be \"I am\" or \"I have\").</p>\n"}, {"comments": [{"owner": {"reputation": 127, "user_id": 6929394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DP6QM9hvwrE/AAAAAAAAAAI/AAAAAAAACV4/PwuEahLXsrw/photo.jpg?sz=128", "display_name": "Cristian Desivo", "link": "https://stackoverflow.com/users/6929394/cristian-desivo"}, "edited": false, "score": 0, "creation_date": 1547153753, "post_id": 54135628, "comment_id": 95105064, "body": "This could work, but what do you mean by &quot;Now, using the sort utility provided by your operating system, sort each file.&quot;? Would this work in a reasonable time with the bigrams text file that would have a size of 14 gb? Do you know how to do that in linux?"}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "reply_to_user": {"reputation": 127, "user_id": 6929394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DP6QM9hvwrE/AAAAAAAAAAI/AAAAAAAACV4/PwuEahLXsrw/photo.jpg?sz=128", "display_name": "Cristian Desivo", "link": "https://stackoverflow.com/users/6929394/cristian-desivo"}, "edited": false, "score": 0, "creation_date": 1547157133, "post_id": 54135628, "comment_id": 95106375, "body": "The Linux command would be <code>sort &lt;inputfile.txt &gt;outputfile.txt</code>. You might want to look up options, but I think that&#39;ll work just fine. I don&#39;t know how long it would take. 14 GB isn&#39;t all that large. You could try it with some smaller files and extrapolate. From what I recall of the Linux sort, it&#39;s reasonably performant on simple string sorting."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "reply_to_user": {"reputation": 127, "user_id": 6929394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DP6QM9hvwrE/AAAAAAAAAAI/AAAAAAAACV4/PwuEahLXsrw/photo.jpg?sz=128", "display_name": "Cristian Desivo", "link": "https://stackoverflow.com/users/6929394/cristian-desivo"}, "edited": false, "score": 0, "creation_date": 1547157205, "post_id": 54135628, "comment_id": 95106409, "body": "@CristianDesivo You might be interested in <a href=\"https://stackoverflow.com/questions/7074430/how-do-we-sort-faster-using-unix-sort\" title=\"how do we sort faster using unix sort\">stackoverflow.com/questions/7074430/&hellip;</a>. Also, do a Google search for [linux sort performance]."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "reply_to_user": {"reputation": 127, "user_id": 6929394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DP6QM9hvwrE/AAAAAAAAAAI/AAAAAAAACV4/PwuEahLXsrw/photo.jpg?sz=128", "display_name": "Cristian Desivo", "link": "https://stackoverflow.com/users/6929394/cristian-desivo"}, "edited": false, "score": 0, "creation_date": 1547157577, "post_id": 54135628, "comment_id": 95106536, "body": "<code>sort -S 50% --parallel=4 file.txt &gt;output.txt</code> Change <code>4</code> to however many CPU cores you have."}, {"owner": {"reputation": 127, "user_id": 6929394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DP6QM9hvwrE/AAAAAAAAAAI/AAAAAAAACV4/PwuEahLXsrw/photo.jpg?sz=128", "display_name": "Cristian Desivo", "link": "https://stackoverflow.com/users/6929394/cristian-desivo"}, "edited": false, "score": 1, "creation_date": 1547262871, "post_id": 54135628, "comment_id": 95143612, "body": "Having tried this solution I have to say that it worked better than I could have expected, this is probably the best approach to do this."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "reply_to_user": {"reputation": 127, "user_id": 6929394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DP6QM9hvwrE/AAAAAAAAAAI/AAAAAAAACV4/PwuEahLXsrw/photo.jpg?sz=128", "display_name": "Cristian Desivo", "link": "https://stackoverflow.com/users/6929394/cristian-desivo"}, "edited": false, "score": 0, "creation_date": 1547263542, "post_id": 54135628, "comment_id": 95143692, "body": "@CristianDesivo I don&#39;t know if it&#39;s the <i>best</i>, but it&#39;s a good one. It&#39;s the same general technique pioneered 50+ years ago for batch processing of transactions, and extended and popularized by MapReduce and Hadoop. It&#39;s easy to understand, simple to implement, and scales really well."}], "tags": [], "owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "is_accepted": true, "score": 0, "last_activity_date": 1547220018, "last_edit_date": 1547220018, "creation_date": 1547148242, "answer_id": 54135628, "question_id": 54120121, "link": "https://stackoverflow.com/questions/54120121/how-to-count-every-ocurrence-of-a-bigram-in-a-large-text-corpora/54135628#54135628", "title": "How to count every ocurrence of a bigram in a large text corpora", "body": "<p>Rather than trying to keep it all in memory, do this in multiple passes.</p>\n\n<p>First, create two files, one for single words, and one for bigrams.</p>\n\n<p>Now, go through your text sequentially. As you read each word, output it to the single-words file. Combine it with the previous word and write the pair to the bigrams file. For example, given the sentence \"the point is that there is no point, making the entire conversation pointless,\" the single-word file would contain one word per line. The bigrams file would contain:</p>\n\n<pre><code>the point\npoint is\nis that\nthat there\nthere is\n...\n</code></pre>\n\n<p>Now, using the sort utility provided by your operating system, sort each file. That groups identical words together.</p>\n\n<p>Then, write a program that reads the file line-by-line, counting identical lines. As you get the total count of each word, write a corresponding file that contains <code>word,count</code>. So if you have:</p>\n\n<pre><code>apple\napple\nbanana\ncherry\ncherry\ncherry\n</code></pre>\n\n<p>Then your output would be:</p>\n\n<pre><code>apple,2\nbanana,1\ncherry,3\n</code></pre>\n\n<p>Do the same thing with the bigrams file.</p>\n\n<p>Finally, load your single-words file into a map or dictionary, indexed by word with the value being the count. Three million unique words should fit. If not, you could put them into a database. Something like <a href=\"https://www.sqlite.org/index.html\" rel=\"nofollow noreferrer\">SQLite</a> would work really well.</p>\n\n<p>Then start reading your bigrams file. Each line contains the bigram and its count. You can do the calculation and make the decision then whether you want to treat it as a single word, or you can output the bigram with its count and score to a separate file, and make the decision later.</p>\n\n<p>You can reduce the size of the intermediate files created in the first pass by keeping some stuff in memory. Rather than writing each word and bigram to the intermediate file immediately, keep two dictionaries in memory, and limit their size. When a dictionary fills up, write the words and counts to the disk, and clear the dictionary. That way, rather than having hundreds of thousands of individual \"the\" words in the file, you end up with just a handful of \"the,100000\" entries.</p>\n\n<p>Reducing the size of the intermediate files will increase sort speed. In the second step, when you're removing duplicates, you add the counts for each entry rather than just adding one for each entry.</p>\n\n<p>Doing this in multiple passes makes things easier because it reduces required memory, and each step is almost trivially simple. Sure, it's not as fast as a single-program solution. But if it's an infrequent thing then who cares if it takes a little extra time?</p>\n\n<p>Another benefit is that this this solution is quite scalable. I've done something very similar on my laptop (8 GB memory), doing word and bigram counts against a download of the entire English Wikipedia. Took a while (a few hours), but worked well.</p>\n"}], "owner": {"reputation": 127, "user_id": 6929394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DP6QM9hvwrE/AAAAAAAAAAI/AAAAAAAACV4/PwuEahLXsrw/photo.jpg?sz=128", "display_name": "Cristian Desivo", "link": "https://stackoverflow.com/users/6929394/cristian-desivo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 54135628, "answer_count": 2, "score": 0, "last_activity_date": 1547220018, "creation_date": 1547077874, "last_edit_date": 1547078205, "question_id": 54120121, "link": "https://stackoverflow.com/questions/54120121/how-to-count-every-ocurrence-of-a-bigram-in-a-large-text-corpora", "title": "How to count every ocurrence of a bigram in a large text corpora", "body": "<p>I have a large amount of text that includes wikipedia articles, news articles, etc. About 1.5 billion words total, and about 3 million unique words.</p>\n\n<p>What I want to do is decide when to count to consecutive words as a single word, for example \"orange juice\" should probably be treated as a single word. To decide if a pair of words should be treated as a single word, I need to know how many times the bigram occurs, and how many times each of the words in the bigram occurs.\n<code>bigramCount/(word1Count*word2Count) &gt; threshold</code>\nThe problem is that a variable containing all the bigram counts of my text would occupy more memory than my computer ram size.</p>\n\n<p>What I tried doing is:</p>\n\n<pre><code>1. Count single words\n2. For every single word:\n    1. Count every ocurrence of a bigram that starts with that word\n    2. Decide, applying the formula, which of those bigrams should be treated as a single word.\n</code></pre>\n\n<p>That way it's easier on the memory, but it takes too long to do that.\nI'm currently doing that but it has been running for at least a day now, so I'm trying to come up with a better way of doing this.</p>\n\n<p>Any idea?</p>\n"}, {"tags": ["python", "raspberry-pi", "kivy"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1547080789, "post_id": 54120097, "comment_id": 95073207, "body": "On your computer you normally run?"}, {"owner": {"reputation": 1, "user_id": 10892432, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DnwrQe1dVN4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYM3yIOCBwowXbGq_GV2dnZlnRWGg/mo/photo.jpg?sz=128", "display_name": "Mr. Su", "link": "https://stackoverflow.com/users/10892432/mr-su"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1547132555, "post_id": 54120097, "comment_id": 95094148, "body": "No, still got the same strange result..."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1547135734, "post_id": 54120097, "comment_id": 95096124, "body": "If the problem also plays on a normal PC then the problem has nothing to do with Raspberry but strictly with your code."}, {"owner": {"reputation": 1, "user_id": 10892432, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DnwrQe1dVN4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYM3yIOCBwowXbGq_GV2dnZlnRWGg/mo/photo.jpg?sz=128", "display_name": "Mr. Su", "link": "https://stackoverflow.com/users/10892432/mr-su"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1547566924, "post_id": 54120097, "comment_id": 95231249, "body": "Thanks, I finally find the problem...."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 10892432, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DnwrQe1dVN4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYM3yIOCBwowXbGq_GV2dnZlnRWGg/mo/photo.jpg?sz=128", "display_name": "Mr. Su", "link": "https://stackoverflow.com/users/10892432/mr-su"}, "is_accepted": false, "score": 0, "last_activity_date": 1547568177, "creation_date": 1547568177, "answer_id": 54202544, "question_id": 54120097, "link": "https://stackoverflow.com/questions/54120097/kivy-strange-displaying-view-on-raspberry-pi/54202544#54202544", "title": "Kivy strange displaying view on Raspberry PI", "body": "<p>Here is my workable version.</p>\n\n<p>test5.py</p>\n\n<pre><code>import os\nimport kivy\nfrom kivy.app import App\nfrom kivy.uix.boxlayout import BoxLayout\nfrom kivy.properties import ObjectProperty, StringProperty, ListProperty\nfrom kivy.uix.listview import ListItemButton\nfrom kivy.uix.behaviors import ButtonBehavior\nfrom kivy.uix.label import Label\nfrom kivy.uix.image import Image\nfrom kivy.uix.screenmanager import Screen, ScreenManager\nimport simplejson as json\nfrom kivy.uix.popup import Popup\n\nstrnow = lambda : str(datetime.now())\n# init\nbase_path = os.getcwd()\npic_path = base_path + '/pic/'\nconf_path = base_path + '/conf/'\nkivy.resources.resource_add_path(base_path + '/font')\n\n\nclass ScheduleListButton(ListItemButton):\n    def __init__(self,**kwargs):\n        super(ScheduleListButton, self).__init__(**kwargs)\n        self.font_name = 'DroidSansFallback'\n        self.height = 40\n        pass\n\n\nclass ImageButton(ButtonBehavior, Image):\n    pass\n\n\nclass ScheduleDB(BoxLayout):\n\n    # Connects the value in the TextInput widget to these\n    # fields\n    # first_name_text_input = ObjectProperty()\n    # last_name_text_input = ObjectProperty()\n    schedule_list = ObjectProperty()\n    week_day_text = StringProperty()\n    start_hour_text = StringProperty()\n    start_min_text = StringProperty()\n    end_hour_text = StringProperty()\n    end_min_text = StringProperty()\n    scheduleTexts = ListProperty()\n    week_day_num = 0\n    start_hour_num = 0\n    start_min_num = 0\n    end_hour_num = 0\n    end_min_num = 0\n\n    def __init__(self, **kwargs):\n        super(ScheduleDB, self).__init__(**kwargs)\n        self.week_days = [\"\u661f\u671f\u4e00 \", \"\u661f\u671f\u4e8c \", \"\u661f\u671f\u4e09 \", \"\u661f\u671f\u56db \", \"\u661f\u671f\u4e94 \", \"\u661f\u671f\u516d\", \"\u661f\u671f\u65e5 \" ]\n        self.init_value()\n        self.schedules = []\n        with open(conf_path + \"rule.json\", \"r\") as fp:\n            self.schedules = json.load(fp)\n        print(\"Load from config : %s \" % str(self.schedules))\n        self.scheduleTexts = []\n        for s in self.schedules:\n            self.scheduleTexts.append(\"%s%s\u81f3%s\" % (self.week_days[s[\"weekDay\"]], s[\"beginTime\"], s[\"endTime\"]))\n        #self.ids.schedule_list_view.adapter.data = self.scheduleTexts\n\n    # Initial all properties\n    def init_value(self):\n        self.week_day_text = \"\u661f\u671f\u4e00 \"\n        self.start_hour_text = \"00\"\n        self.start_min_text = \"00\"\n        self.end_hour_text = \"00\"\n        self.end_min_text = \"00\"\n        self.week_day_num = 0\n        self.start_hour_num = 0\n        self.start_min_num = 0\n        self.end_hour_num = 0\n        self.end_min_num = 0\n\n    def up_week_day(self):\n        # print(\"up_week_day, %d\" % self.week_day_num)\n        if self.week_day_num == 6:\n            self.week_day_num = 0\n        else:\n            self.week_day_num += 1\n        self.week_day_text = self.week_days[self.week_day_num]\n\n    def down_week_day(self):\n        # print(\"down_week_day, %d\" % self.week_day_num)\n        if self.week_day_num == 0:\n            self.week_day_num = 6\n        else:\n            self.week_day_num -= 1\n        self.week_day_text = self.week_days[self.week_day_num]\n\n    def up_start_hour(self):\n        # print(\"up_start_hour, %d\" % self.start_hour_num)\n        if self.start_hour_num &gt;= 23:\n            self.start_hour_num = 0\n        else:\n            self.start_hour_num += 1\n        self.start_hour_text = \"%02d\" % self.start_hour_num\n\n    def down_start_hour(self):\n        # print(\"down_start_hour, %d\" % self.start_hour_num)\n        if self.start_hour_num &lt;= 0:\n            self.start_hour_num = 23\n        else:\n            self.start_hour_num -= 1\n        self.start_hour_text = \"%02d\" % self.start_hour_num\n\n    def up_start_min(self):\n        # print(\"up_start_min, %d\" % self.start_min_num)\n        if self.start_min_num &gt;= 59:\n            self.start_min_num = 0\n        else:\n            self.start_min_num += 1\n        self.start_min_text = \"%02d\" % self.start_min_num\n\n    def down_start_min(self):\n        # print(\"down_start_min, %d\" % self.start_min_num)\n        if self.start_min_num &lt;= 0:\n            self.start_min_num = 59\n        else:\n            self.start_min_num -= 1\n        self.start_min_text = \"%02d\" % self.start_min_num\n\n    def up_end_hour(self):\n        # print(\"up_end_hour, %d\" % self.end_hour_num)\n        if self.end_hour_num &gt;= 23:\n            self.end_hour_num = 0\n        else:\n            self.end_hour_num += 1\n        self.end_hour_text = \"%02d\" % self.end_hour_num\n\n    def down_end_hour(self):\n        # print(\"down_end_hour, %d\" % self.end_hour_num)\n        if self.end_hour_num &lt;= 0:\n            self.end_hour_num = 23\n        else:\n            self.end_hour_num -= 1\n        self.end_hour_text = \"%02d\" % self.end_hour_num\n\n    def up_end_min(self):\n        # print(\"up_end_min, %d\" % self.end_min_num)\n        if self.end_min_num &gt;= 59:\n            self.end_min_num = 0\n        else:\n            self.end_min_num += 1\n        self.end_min_text = \"%02d\" % self.end_min_num\n\n    def down_end_min(self):\n        # print(\"down_end_min, %d\" % self.end_min_num)\n        if self.end_min_num &lt;= 0:\n            self.end_min_num = 59\n        else:\n            self.end_min_num -= 1\n        self.end_min_text = \"%02d\" % self.end_min_num\n\nclass ScheduleScreen(Screen):\n\n    def __init__(self, **kwargs):\n        super(ScheduleScreen, self).__init__(**kwargs)\n\n    def build(self):\n        pass\n\n\nclass test5App(App):\n\n    def build(self):\n        return ScheduleScreen()\n        #return ScheduleDB()\n\n\ndbApp = test5App()\ndbApp.run()\n</code></pre>\n\n<p>test5.kv</p>\n\n<pre><code># Reference test5.py\n#: import main test5\n#: import ListAdapter kivy.adapters.listadapter.ListAdapter\n#: import ListItemButton kivy.uix.listview.ListItemButton\n\nScheduleDB:\n\n&lt;ScheduleDB&gt;:\n    orientation: \"vertical\"\n    #first_name_text_input: first_name\n    #last_name_text_input: last_name\n    schedule_list: schedule_list_view\n    padding: 2\n    spacing: 2\n\n    BoxLayout:\n        orientation: \"horizontal\"\n        size_hint_y: None\n        height: \"64dp\"\n        BoxLayout:\n            orientation: \"horizontal\"\n            padding: 2\n            spacing: 2\n            size_hint_x: 0.4\n            canvas:\n                Color:\n                    rgba: 1, 1, 1, .5\n            BoxLayout:\n                orientation: \"vertical\"\n                ImageButton:\n                    id: UpWeekDay\n                    source: \"pic/up.png\"\n                    size_hint_y: None\n                    height: 30\n                    on_press: root.up_week_day()\n                ImageButton:\n                    id: DownWeekDay\n                    source: \"pic/down.png\"\n                    size_hint_y: None\n                    height: 30\n                    on_press: root.down_week_day()\n            Label:\n                id: week_day\n                font_name: 'DroidSansFallback'\n                font_size: 32\n                text: root.week_day_text\n        BoxLayout:\n            orientation: \"horizontal\"\n            padding: 2\n            spacing: 2\n            BoxLayout:\n                size_hint_x: 1.8\n                canvas:\n                    Color:\n                        rgba: 1, 1, 1, .5\n                Label:\n                    id: start_hour\n                    font_name: 'DroidSansFallback'\n                    font_size: 32\n                    text: root.start_hour_text\n                BoxLayout:\n                    orientation: \"vertical\"\n                    ImageButton:\n                        id: UpStartHour\n                        source: \"pic/up.png\"\n                        size_hint_y: None\n                        height: 30\n                        on_press: root.up_start_hour()\n                    ImageButton:\n                        id: DownStartHour\n                        source: \"pic/down.png\"\n                        size_hint_y: None\n                        height: 30\n                        on_press: root.down_start_hour()\n                Label:\n                    id: l1\n                    font_name: 'DroidSansFallback'\n                    font_size: 32\n                    text: \":\"\n                Label:\n                    id: start_min\n                    font_name: 'DroidSansFallback'\n                    font_size: 32\n                    text: root.start_min_text\n                BoxLayout:\n                    orientation: \"vertical\"\n                    ImageButton:\n                        id: UpStartMin\n                        source: \"pic/up.png\"\n                        size_hint_y: None\n                        height: 30\n                        on_press: root.up_start_min()\n                    ImageButton:\n                        id: DownStartMin\n                        source: \"pic/down.png\"\n                        size_hint_y: None\n                        height: 30\n                        on_press: root.down_start_min()\n            Label:\n                id: till\n                font_name: 'DroidSansFallback'\n                font_size: 32\n                size_hint_x: 0.6\n                text: \"\u81f3\"\n            BoxLayout:\n                size_hint_x: 1.8\n                canvas:\n                    Color:\n                        rgba: 1, 1, 1, .5\n                Label:\n                    id: end_hour\n                    font_name: 'DroidSansFallback'\n                    font_size: 32\n                    text: root.end_hour_text\n                BoxLayout:\n                    orientation: \"vertical\"\n                    ImageButton:\n                        id: UpEndHour\n                        source: \"pic/up.png\"\n                        size_hint_y: None\n                        height: 30\n                        on_press: root.up_end_hour()\n                    ImageButton:\n                        id: DownEndHour\n                        source: \"pic/down.png\"\n                        size_hint_y: None\n                        height: 30\n                        on_press: root.down_end_hour()\n                Label:\n                    id: l2\n                    font_name: 'DroidSansFallback'\n                    font_size: 32\n                    text: \":\"\n                Label:\n                    id: end_min\n                    font_name: 'DroidSansFallback'\n                    font_size: 32\n                    text: root.end_min_text\n                BoxLayout:\n                    orientation: \"vertical\"\n                    ImageButton:\n                        id: UpEndtMin\n                        source: \"pic/up.png\"\n                        size_hint_y: None\n                        height: 30\n                        on_press: root.up_end_min()\n                    ImageButton:\n                        id: DownEndMin\n                        source: \"pic/down.png\"\n                        size_hint_y: None\n                        height: 30\n                        on_press: root.down_end_min()\n\n    BoxLayout:\n        size_hint_y: None\n        height: \"48dp\"\n        Button:\n            font_name: 'DroidSansFallback'\n            font_size: 32\n            text: \"\u65b0\u589e\"\n            size_hint_x: 15\n            on_press: root.submit_schedule()\n        Button:\n            font_name: 'DroidSansFallback'\n            font_size: 32\n            text: \"\u522a\u9664\"\n            size_hint_x: 15\n            on_press: root.delete_schedule()\n        Button:\n            font_name: 'DroidSansFallback'\n            font_size: 32\n            text: \"\u66f4\u6539\"\n            size_hint_x: 15\n            on_press: root.replace_schedule()\n\n    # Define starting data and point to the ListItemButton\n    # in the Python code\n    ListView:\n        id: schedule_list_view\n        adapter:\n            ListAdapter(data=root.scheduleTexts, cls=main.ScheduleListButton)\n\n&lt;ScheduleScreen&gt;:\n    name: \"Schedule\"\n    ScheduleDB:\n    FloatLayout:\n        Button:\n            id: buttonQuit\n            size_hint: (0.2, 0.1)\n            pos_hint: {'right':1,'top':0.95}\n            font_name: 'DroidSansFallback'\n            text: \"\u96e2\u958b\"\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10892432, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DnwrQe1dVN4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYM3yIOCBwowXbGq_GV2dnZlnRWGg/mo/photo.jpg?sz=128", "display_name": "Mr. Su", "link": "https://stackoverflow.com/users/10892432/mr-su"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547568177, "creation_date": 1547077685, "last_edit_date": 1547090530, "question_id": 54120097, "link": "https://stackoverflow.com/questions/54120097/kivy-strange-displaying-view-on-raspberry-pi", "title": "Kivy strange displaying view on Raspberry PI", "body": "<p>I have a very strange result displaying in Kivy and running on a Raspberry PI.</p>\n\n<p>Every <code>BoxLayout</code>is displayed twice and when I change the text of the label,\nthe words seem to overlap. I am very confused with why these results are occuring.</p>\n\n<p>How can I fix this problem?</p>\n\n<p>BoxLayout displays twice</p>\n\n<p><img src=\"https://i.stack.imgur.com/R8sBd.png\" alt=\"\"></p>\n\n<p>The label's text overlapped when I change the text</p>\n\n<p><img src=\"https://i.stack.imgur.com/haduZ.png\" alt=\"\"></p>\n\n<p>And the upper and under text are changed at the same time</p>\n\n<p><img src=\"https://i.stack.imgur.com/HlKgN.png\" alt=\"\"></p>\n\n<p>Here is my Python Code:</p>\n\n<pre><code>class ScheduleScreen(Screen):\n\n    def __init__(self, **kwargs):\n        super(ScheduleScreen,self).__init__(**kwargs)\n\n    def build(self):\n        pass\n\n    def on_quit(self):\n        global sm, event_idle\n        sm.current = 'Normal'\n        event_idle = Clock.schedule_once(BackMain, 60)\n\n\nclass ScheduleListItemButton(ListItemButton):\n\n    def __init__(self, **kwargs):\n        super(ScheduleListItemButton, self).__init__(**kwargs)\n        self.height = \"64dp\"\n\nclass ScheduleMan(BoxLayout):\n    week_day = StringProperty()\n    week_day_up = Image()\n    week_day_down = Image()\n    start_hour = StringProperty()\n    start_hour_up = Image()\n    start_hour_down = Image()\n    start_min = StringProperty()\n    start_min_up = Image()\n    start_min_down = Image()\n    end_hour = StringProperty()\n    end_hour_up = Image()\n    end_hour_down = Image()\n    end_min = StringProperty()\n    end_min_up = Image()\n    end_min_down = Image()\n    week_day_num = 0\n    start_hour_num = 0\n    start_min_num = 0\n    end_hour_num = 0\n    end_min_num = 0\n    schedule_list = ObjectProperty()\n\n    def __init__(self,  **kwargs):\n        super(ScheduleMan, self).__init__(**kwargs)\n        self.week_days = [\"\u661f\u671f\u65e5\", \"\u661f\u671f\u4e00\", \"\u661f\u671f\u4e8c\", \"\u661f\u671f\u4e09\", \"\u661f\u671f\u56db\", \"\u661f\u671f\u4e94\", \"\u661f\u671f\u516d\"]\n        self.init_value()\n        self.schedules = []\n\n    # Initial all properties\n    def init_value(self):\n        self.week_day = \"\u661f\u671f\u65e5\"\n        self.start_hour = \"00\"\n        self.start_min = \"00\"\n        self.end_hour = \"00\"\n        self.end_min = \"00\"\n        self.week_day_num = 0\n        self.start_hour_num = 0\n        self.start_min_num = 0\n        self.end_hour_num = 0\n        self.end_min_num = 0\n\n    def up_week_day(self):\n        if self.week_day_num == 6:\n            self.week_day_num = 0\n        else:\n            self.week_day_num += 1\n        self.week_day = self.week_days[self.week_day_num]\n\n    def down_week_day(self):\n        if self.week_day_num == 0:\n            self.week_day_num = 6\n        else:\n            self.week_day_num -= 1\n        self.week_day = self.week_days[self.week_day_num]\n\n    def up_start_hour(self):\n        if self.start_hour_num &gt;= 23:\n            self.start_hour_num = 0\n        else:\n            self.start_hour_num += 1\n        self.start_hour = \"%02d\" % self.start_hour_num\n\n    def down_start_hour(self):\n        if self.end_hour_num &lt;= 0:\n            self.end_hour_num = 23\n        else:\n            self.start_hour_num -= 1\n        self.start_hour = \"%02d\" % self.start_hour_num\n\n    def up_end_hour(self):\n        if self.end_hour_num &gt;= 23:\n            self.end_hour_num = 0\n        else:\n            self.end_hour_num += 1\n        self.end_hour = \"%02d\" % self.end_hour_num\n\n    def down_end_hour(self):\n        if self.end_hour_num &lt;= 0:\n            self.end_hour_num = 23\n        else:\n            self.end_hour_num -= 1\n        self.end_hour = \"%02d\" % self.end_hour_num\n    def up_start_min(self):\n        if self.start_min_num &gt;= 59:\n            self.start_min_num = 0\n        else:\n            self.start_min_num += 1\n        self.start_min = \"%02d\" % self.start_min_num\n\n    def down_start_min(self):\n        if self.end_min_num &lt;= 0:\n            self.end_min_num = 59\n        else:\n            self.start_min_num -= 1\n        self.start_min = \"%02d\" % self.start_min_num\n\n    def up_end_min(self):\n        if self.end_min_num &gt;= 59:\n            self.end_min_num = 0\n        else:\n            self.end_min_num += 1\n        self.end_min = \"%02d\" % self.end_min_num\n\n    def down_end_min(self):\n        if self.end_min_num &lt;= 0:\n            self.end_min_num = 59\n        else:\n            self.end_min_num -= 1\n        self.end_min = \"%02d\" % self.end_min_num\n</code></pre>\n\n<p>and Here is my kv file:</p>\n\n<pre><code>&lt;ScheduleScreen&gt;:\n    name: \"Schedule\"    \n    ScheduleMan:\n    FloatLayout:\n        Button:\n            id: buttonQuit\n            size_hint: (0.2, 0.1)\n            pos_hint: {'right':1,'bottom':0.9}\n            font_name: 'DroidSansFallback'\n            text: \"\u96e2\u958b\"\n            on_press: root.on_quit()\n\n&lt;ScheduleListItemButton&gt;:\n    font_name: 'DroidSansFallback'\n    font_size: 32\n    size_hint_y: None\n    height: \"64dp\"\n\n&lt;ScheduleMan&gt;:\n    orientation: \"vertical\"\n    schedule_list: schedules_list_view\n    padding: 20\n    spacing: 20\n\n    BoxLayout:\n        orientation: \"horizontal\"\n        size_hint_y: None\n        height: \"64dp\"\n        spacing: 2\n\n        Label:\n            id: l_week_day\n            font_name: 'DroidSansFallback'\n            font_size: 32\n            text: root.week_day\n        BoxLayout:\n            orientation: \"vertical\"\n            size_hint_y: None\n            padding: 2\n            spacing: 15\n            ImageButton:\n                source: \"../pic/up.png\"\n                on_press: root.up_week_day()\n                size_hint_y: None\n                width: 24\n                height: 16\n            ImageButton:\n                source: \"../pic/down.png\"\n                on_press: root.down_week_day()\n                size_hint_y: None\n                width: 24\n                height: 16\n        Label:\n            id: l_start_hour\n            font_name: 'DroidSansFallback'\n            font_size: 32\n            text: root.start_hour\n        BoxLayout:\n            orientation: \"vertical\"\n            size_hint_y: None\n            padding: 2\n            spacing: 15\n            ImageButton:\n                source: \"../pic/up.png\"\n                on_press: root.up_start_hour()\n                size_hint_y: None\n                width: 24\n                height: 16\n            ImageButton:\n                source: \"../pic/down.png\"\n                on_press: root.down_start_hour()\n                size_hint_y: None\n                width: 24\n                height: 16\n        Label:\n            text: \":\"\n            font_name: 'DroidSansFallback'\n            font_size: 32\n        Label:\n            id: l_start_min\n            font_name: 'DroidSansFallback'\n            font_size: 32\n            text: root.start_min\n            spacing: 5\n        BoxLayout:\n            orientation: \"vertical\"\n            size_hint_y: None\n            padding: 2\n            spacing: 15\n            ImageButton:\n                source: \"../pic/up.png\"\n                on_press: root.up_start_min()\n                size_hint_y: None\n                width: 24\n                height: 16\n            ImageButton:\n                source: \"../pic/down.png\"\n                on_press: root.down_start_min()\n                size_hint_y: None\n                width: 24\n                height: 16\n        Label:\n            text: \" \u81f3 \"\n            font_name: 'DroidSansFallback'\n            font_size: 32\n        Label:\n            id: l_end_hour\n            font_name: 'DroidSansFallback'\n            font_size: 32\n            text: root.end_hour\n        BoxLayout:\n            orientation: \"vertical\"\n            size_hint_y: None\n            padding: 2\n            spacing: 15\n            ImageButton:\n                source: \"../pic/up.png\"\n                on_press: root.up_end_hour()\n                size_hint_y: None\n                width: 24\n                height: 16\n            ImageButton:\n                source: \"../pic/down.png\"\n                on_press: root.down_end_hour()\n                size_hint_y: None\n                width: 24\n                height: 16\n        Label:\n            text: \":\"\n            font_name: 'DroidSansFallback'\n            font_size: 32\n        Label:\n            id: l_end_min\n            font_name: 'DroidSansFallback'\n            font_size: 32\n            text: root.end_min\n        BoxLayout:\n            orientation: \"vertical\"\n            size_hint_y: None\n            padding: 2\n            spacing: 15\n            ImageButton:\n                source: \"../pic/up.png\"\n                on_press: root.up_end_min()\n                size_hint_y: None\n                width: 24\n                height: 16\n            ImageButton:\n                source: \"../pic/down.png\"\n                on_press: root.down_end_min()\n                size_hint_y: None\n                width: 24\n                height: 16\n    BoxLayout:\n        size_hint_y: None\n        height: \"64dp\"\n        spacing: 15\n        spacing: 5\n        Button:\n            text: \"\u5132\u5b58\u4fee\u6539\"\n            size_hint_x: 32\n            font_name: 'DroidSansFallback'\n            font_size: 32\n            on_press: root.submit_schedule()\n        Button:\n            text: \"\u525b\u9664\"\n            size_hint_x: 32\n            font_name: 'DroidSansFallback'\n            font_size: 32\n            on_press: root.delete_schedule()\n        Button:\n            text: \"\u4fee\u6539\"\n            size_hint_x: 32\n            font_name: 'DroidSansFallback'\n            font_size: 32\n            on_press: root.update_schedule()\n    ListView:\n        id: schedules_list_view\n        adapter:\n            ListAdapter(data=[], cls=main.ScheduleListItemButton)\n</code></pre>\n"}, {"tags": ["python", "json", "python-3.x", "tkinter"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1547077675, "post_id": 54120030, "comment_id": 95072446, "body": "<i>once a file is closed, it&#39;s impossible to open it again</i> No it isn&#39;t.  Why do you say that?  Are you getting an error when you try?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1547078328, "post_id": 54120030, "comment_id": 95072594, "body": "Are you aware that <code>after(1, ...)</code> runs after 1 millisecond, not one second? Since your clock only has one second resolution, you&#39;re making the CPU do a lot more work than is necessary."}], "answers": [{"tags": [], "owner": {"reputation": 160, "user_id": 10849989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0mxf.png?s=128&g=1", "display_name": "benas", "link": "https://stackoverflow.com/users/10849989/benas"}, "is_accepted": false, "score": 1, "last_activity_date": 1547078254, "creation_date": 1547078254, "answer_id": 54120187, "question_id": 54120030, "link": "https://stackoverflow.com/questions/54120030/how-can-i-constantly-check-if-a-json-file-is-updated-in-python/54120187#54120187", "title": "How can I constantly check if a JSON file is updated in Python?", "body": "<p>How serious is this code? You could just check for the file's last modified time at some interval with <code>os.stat(path_to_file).st_mtime</code> and refresh your interface if it's later than the last time you checked. Quick and dirty.</p>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1547079472, "post_id": 54120320, "comment_id": 95072883, "body": "My understanding is that <code>pyinotify</code> is not supported well (no changes in years). Most folks seem to recommend <a href=\"https://pypi.org/project/inotify/\" rel=\"nofollow noreferrer\"><code>inotify</code></a>."}], "tags": [], "owner": {"reputation": 749, "user_id": 904100, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5fca317f85d25696b865f97b4d883400?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/904100/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1547079285, "creation_date": 1547079285, "answer_id": 54120320, "question_id": 54120030, "link": "https://stackoverflow.com/questions/54120030/how-can-i-constantly-check-if-a-json-file-is-updated-in-python/54120320#54120320", "title": "How can I constantly check if a JSON file is updated in Python?", "body": "<p>You have a couple of options. 1 is the option benas has suggested. Every second or so check the last modified time of the json file to see if it has changed.</p>\n\n<p>Another option is to use a package such as <a href=\"https://github.com/seb-m/pyinotify/\" rel=\"nofollow noreferrer\">PyiNotify</a>. This package can identify events that occur on files and folders. 1 such event is the IN_MODIFY event which triggers when a file has been modified. A list of events can be found <a href=\"https://github.com/seb-m/pyinotify/wiki/Events-types\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Firstly you would need to install the package using pip:</p>\n\n<pre><code>pip install pyinotify\n</code></pre>\n\n<p>The following is example code (almost entirely from their documentation)</p>\n\n<pre><code>import pyinotify\n\n# The watch manager stores the watches and provides operations on watches\nwm = pyinotify.WatchManager()\nwm.add_watch('/path/to/file', mask, rec=True)\n\nmask = pyinotify.IN_MODIFY  # watched events\n\nclass EventHandler(pyinotify.ProcessEvent):\n    def process_IN_MODIFY(self, event):\n        print \"Modifying:\", event.pathname\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1547079653, "post_id": 54120326, "comment_id": 95072930, "body": "For the record, I agree that <code>inotify</code> interfaces would be an improvement here and should be considered, but they&#39;re (IMO) too advanced for your level of skill right now."}, {"owner": {"reputation": 187, "user_id": 10084824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrSxh.png?s=128&g=1", "display_name": "leecharles_", "link": "https://stackoverflow.com/users/10084824/leecharles"}, "edited": false, "score": 0, "creation_date": 1547080047, "post_id": 54120326, "comment_id": 95073028, "body": "This is an elegant approach to my problem! I appreciate the time you took to explain this to a novice programmer. Thanks!"}, {"owner": {"reputation": 187, "user_id": 10084824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrSxh.png?s=128&g=1", "display_name": "leecharles_", "link": "https://stackoverflow.com/users/10084824/leecharles"}, "edited": false, "score": 0, "creation_date": 1547081326, "post_id": 54120326, "comment_id": 95073295, "body": "To my basic understanding, this is what the modified settings.py file is doing: Upon creating a Settings() object, the _load_settings() method is called. Here, the last recorded time of modification of the JSON file is stored inside of _last_update."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 187, "user_id": 10084824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrSxh.png?s=128&g=1", "display_name": "leecharles_", "link": "https://stackoverflow.com/users/10084824/leecharles"}, "edited": false, "score": 0, "creation_date": 1547082235, "post_id": 54120326, "comment_id": 95073451, "body": "@leecharles_: Yup. Then each time you call <code>update_settings</code>, it checks if the JSON file has been modified since it was last loaded, and if so, reloads it and returns <code>True</code> (so you know to reconfigure with the new settings), otherwise it returns <code>False</code> (so you know you can just update the time, and leave the Tk configuration unchanged)."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 2, "last_activity_date": 1547079335, "creation_date": 1547079335, "answer_id": 54120326, "question_id": 54120030, "link": "https://stackoverflow.com/questions/54120030/how-can-i-constantly-check-if-a-json-file-is-updated-in-python/54120326#54120326", "title": "How can I constantly check if a JSON file is updated in Python?", "body": "<p>Your <code>settings</code> module is essentially a module of constants, which makes it quite hard to reuse. While you could do something hacky to force the <code>reload</code> like:</p>\n\n<pre><code>def tick():\n    import settings, importlib\n    importlib.reload(settings)\n    from settings import *\n    # ... rest of tick code ...\n</code></pre>\n\n<p>that's going to be both inefficient and a terrible misuse of the import mechanism (now instead of reading one file, you're reading two, the module and the JSON it depends on).</p>\n\n<p>Instead, I'd recommend making <code>settings</code>s a little more reusable with a function that can read the data and cache it, rather than a bunch of globals:</p>\n\n<pre><code>import os\nimport json\n\nclass Settings:\n    SETTINGS_FILE = 'settings.json'\n\n    def __init__(self):\n        self._load_settings()\n\n    def update_settings(self):\n        if self._last_update != os.stat(self.SETTINGS_FILE).st_mtime:\n            self._load_settings()\n            return True\n        return False\n\n    def _load_settings(self):\n        with open(self.SETTINGS_FILE) as json_settings:\n            settings = json.load(json_settings)\n            self._last_update = os.fstat(json_settings.fileno()).st_mtime\n\n            # Window\n            self.full_screen = settings['window']['full_screen']\n            self.window_title = settings['window']['window_title']\n\n            # Background\n            self.background_color = settings['background']['color']\n\n            # Time\n            self.time_font = settings['time']['font']\n            self.time_size = settings['time']['size']\n            self.time_weight = settings['time']['weight'] \n            self.time_slant = settings['time']['slant']\n            self.time_color = settings['time']['color']    \n            self.time_format = settings['time']['format']\n\n            # Date\n            self.date_font = settings['date']['font']\n            self.date_size = settings['date']['size']\n            self.date_weight = settings['date']['weight']\n            self.date_slant = settings['date']['slant']\n            self.date_color = settings['date']['color']\n            self.date_format = settings['date']['format']\n</code></pre>\n\n<p>Now your <code>clock</code> module can import <code>settings</code>, construct a <code>Settings</code> object up front, and at each <code>tick</code> call <code>update_settings()</code> on it. If <code>update_settings</code> returns <code>True</code>, it should also reapply the configuration. The code would need to qualify the various names, so instead of just saying <code>date_color</code>, you'd put:</p>\n\n<pre><code>mysettings = Settings()\n</code></pre>\n\n<p>at the top level, and refer to <code>date_color</code> with:</p>\n\n<pre><code>mysettings.date_color\n</code></pre>\n\n<p>but that's a small price to pay to improve the code.</p>\n"}], "owner": {"reputation": 187, "user_id": 10084824, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrSxh.png?s=128&g=1", "display_name": "leecharles_", "link": "https://stackoverflow.com/users/10084824/leecharles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1776, "favorite_count": 2, "accepted_answer_id": 54120326, "answer_count": 3, "score": 3, "last_activity_date": 1547079335, "creation_date": 1547077067, "last_edit_date": 1547077570, "question_id": 54120030, "link": "https://stackoverflow.com/questions/54120030/how-can-i-constantly-check-if-a-json-file-is-updated-in-python", "title": "How can I constantly check if a JSON file is updated in Python?", "body": "<p>I'm making a clock using Tkinter and Python. </p>\n\n<p>What I want to achieve is having the clock run and automatically check if the JSON file (which contains the clock's visual settings) has been updated. If the JSON file has been updated, then the clock will update live.</p>\n\n<p>However, this isn't the case. What I have to do is update the JSON file, close the clock program, then re-open the clock program. Only in this case will the changed JSON settings take place.</p>\n\n<p><strong>clock.py</strong></p>\n\n<pre><code>from tkinter import *\nfrom datetime import datetime\nfrom settings import *\n\n# Updates the program and clock settings\ndef tick():\n    time_string = datetime.now().strftime(time_format)\n    date_string = datetime.now().strftime(date_format)\n\n    root.config(bg=background_color)\n\n    container.configure(bg=background_color)\n\n    current_time.configure(text=time_string,\n                           font=(time_font, time_size, time_weight, time_slant),\n                           fg=time_color,\n                           bg=background_color)\n\n    current_date.configure(text=date_string,\n                           font=(date_font, date_size, date_weight, date_slant),\n                           fg=date_color,\n                           bg=background_color)\n\n    current_time.after(1, tick)\n\n\n# TKInterface\nroot = Tk()\nroot.title(window_title)\n\n# Binds 'Esc' key to exit program\nroot.bind('&lt;Escape&gt;', exit)\n\n# Runs program in full-screen\nif full_screen:\n    root.attributes('-fullscreen', True)\n    root.config(cursor='none')\n\n# Creates container to hold time and date\ncontainer = Frame(root)\ncurrent_time = Label(container)\ncurrent_date = Label(container)\n\ncontainer.pack(expand=True)\ncurrent_time.pack()\ncurrent_date.pack()\n\ntick()\nroot.mainloop()\n</code></pre>\n\n<p><strong>settings.py</strong></p>\n\n<pre><code>import os\nimport json\n\nwith open('settings.json') as json_settings:\n    settings = json.load(json_settings)\n\n    # Window\n    full_screen = settings['window']['full_screen']\n    window_title = settings['window']['window_title']\n\n    # Background\n    background_color = settings['background']['color']\n\n    # Time\n    time_font = settings['time']['font']\n    time_size = settings['time']['size']\n    time_weight = settings['time']['weight'] \n    time_slant = settings['time']['slant']\n    time_color = settings['time']['color']    \n    time_format = settings['time']['format']\n\n    # Date\n    date_font = settings['date']['font']\n    date_size = settings['date']['size']\n    date_weight = settings['date']['weight']\n    date_slant = settings['date']['slant']\n    date_color = settings['date']['color']\n    date_format = settings['date']['format']\n</code></pre>\n\n<p><strong>settings.json</strong></p>\n\n<pre><code>{\n    \"window\": {\n      \"full_screen\": false,\n      \"window_title\" : \"chronoberry\"\n    },\n    \"background\": {\n      \"color\": \"black\"\n    },\n    \"time\": {\n      \"font\": \"arial\",\n      \"size\": 70,\n      \"weight\": \"bold\",\n      \"slant\": \"roman\",\n      \"color\": \"white\",\n      \"format\": \"%-I:%M:%S %p\"\n    },\n    \"date\": {\n      \"font\": \"arial\",\n      \"size\": 20,\n      \"weight\": \"normal\",\n      \"slant\": \"roman\",\n      \"color\": \"white\",\n      \"format\": \"%A, %B %-d %Y\"\n    }\n  }\n</code></pre>\n\n<p><strong>Desired Effect:</strong></p>\n\n<p>If I change the background color in my JSON file and save it, my clock should be able to update its color during run-time.</p>\n\n<p>Before changing the background color</p>\n\n<p><img src=\"https://i.imgur.com/Z8EkR6K.png\" alt=\"\"></p>\n\n<p>After changing the background color</p>\n\n<p><img src=\"https://i.imgur.com/lDbVHBR.png\" alt=\"\"></p>\n\n<p><strong>What I've Tried:</strong></p>\n\n<ul>\n<li>Re-importing the settings.py module using importlib.reload(), but the settings.py module isn't a valid argument.</li>\n<li>Opening settings.json, reading from it, closing it, then opening it again. However, once a file is closed, it's impossible to open it again.</li>\n</ul>\n"}, {"tags": ["python", "swift", "compilation", "compiler-construction", "virtual-machine"], "answers": [{"comments": [{"owner": {"reputation": 427, "user_id": 10652070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98bc7f8db7fc59293eff044bbee30a2f?s=128&d=identicon&r=PG&f=1", "display_name": "Import Accelerate", "link": "https://stackoverflow.com/users/10652070/import-accelerate"}, "edited": false, "score": 0, "creation_date": 1547095229, "post_id": 54120968, "comment_id": 95075957, "body": "That is actually <a href=\"https://github.com/SafelySwift/BytecodeVM/blob/master/Source/VM.swift\" rel=\"nofollow noreferrer\">what I did</a>. I wanted a better Swifty way, but I guess this is my only option. &gt; NOTE: I did the same thing except used <code>([Any]) throws -&gt; Any</code>"}], "tags": [], "owner": {"reputation": 132414, "user_id": 1630618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/J2KK1.png?s=128&g=1", "display_name": "vacawama", "link": "https://stackoverflow.com/users/1630618/vacawama"}, "is_accepted": true, "score": 1, "last_activity_date": 1547086445, "last_edit_date": 1547086445, "creation_date": 1547085423, "answer_id": 54120968, "question_id": 54120020, "link": "https://stackoverflow.com/questions/54120020/how-to-call-swift-functions-of-type-any-with-args-of-type-any/54120968#54120968", "title": "How to call Swift functions of type Any with args of type [Any]", "body": "<p>One way to do it is to wrap your functions in a closure of type <code>([Any]) -&gt; Any</code>.  Then in the closure, unpack the arguments, downcast them to the right types and call the function.  Finally, cast the result as <code>Any</code>:</p>\n\n<pre><code>func add(a: Int, b: Int) -&gt; Int {\n    return a + b\n}\n\nfunc mult(a: Double, b: Double) -&gt; Double {\n    return a * b\n}\n\nvar functions = [Any]()\nvar inputs = [[Any]]()\n\nlet f: ([Any]) -&gt; Any = { arr in\n    return add(a: arr[0] as! Int, b: arr[1] as! Int) as Any\n}\n\nfunctions.append(f)\ninputs.append([3, 5])\n\nlet g: ([Any]) -&gt; Any = { arr in\n    return mult(a: arr[0] as! Double, b: arr[1] as! Double) as Any\n}\n\nfunctions.append(g)\ninputs.append([6.0, 7.0])\n\n// Each time through the loop, get one function stored as Any and\n// one array of inputs with type [Any]\nfor (function, input) in zip(functions, inputs) {\n    // Downcast function from Any to ([Any]) -&gt; Any\n    let f = function as! ([Any]) -&gt; Any\n\n    // Call the function\n    print(f(input))\n}\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<blockquote>\n<pre><code>8\n42.0\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 427, "user_id": 10652070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98bc7f8db7fc59293eff044bbee30a2f?s=128&d=identicon&r=PG&f=1", "display_name": "Import Accelerate", "link": "https://stackoverflow.com/users/10652070/import-accelerate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 54120968, "answer_count": 1, "score": 1, "last_activity_date": 1547086445, "creation_date": 1547076978, "last_edit_date": 1547077639, "question_id": 54120020, "link": "https://stackoverflow.com/questions/54120020/how-to-call-swift-functions-of-type-any-with-args-of-type-any", "title": "How to call Swift functions of type Any with args of type [Any]", "body": "<p>I am currently in the process of implementing <a href=\"https://bernsteinbear.com/blog/bytecode-interpreters/\" rel=\"nofollow noreferrer\">this blog post about vms and compilers in Python</a> in Swift. I have run into a problem here:</p>\n\n<p>I have a function in an <code>Any</code>. I have its arguments in <code>[Any]</code>. I want to call this function without knowing what arguments it is. In the Python post, since Python is dynamic it is simple but in Swift I assume this is not possible. Do you have any ways of implementing it?</p>\n\n<pre><code>let numberOfArgs: Int = try intify(instruction.arg)\nlet arguments: [Any] = (0 ..&lt; numberOfArgs).compactMap { _ in\n    return (stack.pop() as? Instruction)?.arg\n}\nlet function: Any = try popVal(&amp;stack)\n</code></pre>\n\n<p><code>function</code> is a Swift closure. eg <code>(Int, Int) -&gt; Int</code>, <code>(String, (Bool, Date) -&gt; Date) -&gt; Float</code></p>\n\n<p>In conclusion, I want to call <code>function</code> with <code>arguments</code></p>\n"}, {"tags": ["python", "beautifulsoup", "python-requests"], "answers": [{"tags": [], "owner": {"reputation": 6567, "user_id": 10825556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UWgVm.png?s=128&g=1", "display_name": "Bitto Bennichan", "link": "https://stackoverflow.com/users/10825556/bitto-bennichan"}, "is_accepted": true, "score": 0, "last_activity_date": 1547080288, "creation_date": 1547080288, "answer_id": 54120438, "question_id": 54119981, "link": "https://stackoverflow.com/questions/54119981/python-web-scraping-using-beautifulsoup-attributeerror-nonetype-object-has-no/54120438#54120438", "title": "Python Web Scraping using BeautifulSoup AttributeError: &#39;NoneType&#39; object has no attribute &#39;text&#39;", "body": "<p>You are getting that response b'coz there is no h1 tag eith the class \"name\" in the page. The only h1 tag i was able to find had a class of \"site-title\".</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\nimport csv\nsource = requests.get('http://coreyms.com').text\nsoup = BeautifulSoup(source, 'lxml')\nname_box = soup.find('h1', attrs = {'class': 'site-title'})\nname = name_box.text.strip()\nprint(name)\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>CoreyMS\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8903087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22be5e9f1205464a1cbac372814581fe?s=128&d=identicon&r=PG&f=1", "display_name": "RichV", "link": "https://stackoverflow.com/users/8903087/richv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 54120438, "answer_count": 1, "score": 2, "last_activity_date": 1547096977, "creation_date": 1547076691, "last_edit_date": 1547096977, "question_id": 54119981, "link": "https://stackoverflow.com/questions/54119981/python-web-scraping-using-beautifulsoup-attributeerror-nonetype-object-has-no", "title": "Python Web Scraping using BeautifulSoup AttributeError: &#39;NoneType&#39; object has no attribute &#39;text&#39;", "body": "<p>I am not sure why I am getting an error message AttributeError: 'NoneType' object has no attribute 'text' while running a code in Python 2 on WebScraping using BeautifulSoup?</p>\n\n<blockquote>\n  <p>Error message : </p>\n  \n  <p>AttributeError                            Traceback (most recent call\n  last)</p>\n  \n  <p> in ()</p>\n  \n  <p>----> 1 name = name_box.text.strip()</p>\n  \n  <p>AttributeError: 'NoneType' object has no attribute 'text'</p>\n</blockquote>\n\n<p>Following is my code:</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\nimport requests\n\nimport csv\n\nsource = requests.get('http://coreyms.com').text\n\nsoup = BeautifulSoup(source, 'lxml')\n\nname_box = soup.find('h1', attrs = {'class': 'name'})\n\nname = name_box.text.strip()\n</code></pre>\n\n<p>Could you please help. Thanks!</p>\n"}, {"tags": ["python", "html", "css", "templates", "bottle"], "comments": [{"owner": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1547114326, "post_id": 54119939, "comment_id": 95083447, "body": "Unfortunately, we can&#39;t write the missing information into your question. What templates? Where did you save them? How are you trying to read them?"}, {"owner": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1547114476, "post_id": 54119939, "comment_id": 95083542, "body": "The problem description sounds vaguely like your browser didn&#39;t actually download the correct files, and/or gave them the wrong names, and your OS doesn&#39;t show the full information to troubleshoot this either. Try to bring up a file listing from the command prompt."}, {"owner": {"reputation": 107, "user_id": 6192925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd114333c7931744fc33b33c2369785a?s=128&d=identicon&r=PG&f=1", "display_name": "mkropkowski", "link": "https://stackoverflow.com/users/6192925/mkropkowski"}, "reply_to_user": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1547117934, "post_id": 54119939, "comment_id": 95085640, "body": "I have improved on my question."}, {"owner": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1547118137, "post_id": 54119939, "comment_id": 95085749, "body": "There is still no trace of any actual troubleshooting attempt. In the Terminal, type <code>ls -l</code> and see what the actual file names are. In the question, show us what <code>tempate(&#39;base&#39;)</code> refers to and demonstrate that this is actually the directory which contains a file with that name."}, {"owner": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 1, "creation_date": 1547118203, "post_id": 54119939, "comment_id": 95085789, "body": "In so many words, if the computer says &quot;this file does not exist&quot; and you say &quot;but it does&quot;, which of the two do you think we will believe? Nothing personal, just that solid experience nudges us towards believing the computer. Show us how the computer is wrong and we have something to talk about at least."}, {"owner": {"reputation": 107, "user_id": 6192925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd114333c7931744fc33b33c2369785a?s=128&d=identicon&r=PG&f=1", "display_name": "mkropkowski", "link": "https://stackoverflow.com/users/6192925/mkropkowski"}, "reply_to_user": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1547118571, "post_id": 54119939, "comment_id": 95085997, "body": "I think I found a reason for this error - see my update."}], "answers": [{"tags": [], "owner": {"reputation": 107, "user_id": 6192925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd114333c7931744fc33b33c2369785a?s=128&d=identicon&r=PG&f=1", "display_name": "mkropkowski", "link": "https://stackoverflow.com/users/6192925/mkropkowski"}, "is_accepted": true, "score": 0, "last_activity_date": 1547138340, "creation_date": 1547138340, "answer_id": 54133211, "question_id": 54119939, "link": "https://stackoverflow.com/questions/54119939/base-tpl-is-not-properly-read-by-bottle/54133211#54133211", "title": "base.tpl is not properly read by bottle", "body": "<p>Problem was with how the TextEdit perceived .tpl files changing text editor has helped files created via any other editor than TextEdit were interpreted correctly.</p>\n"}], "owner": {"reputation": 107, "user_id": 6192925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd114333c7931744fc33b33c2369785a?s=128&d=identicon&r=PG&f=1", "display_name": "mkropkowski", "link": "https://stackoverflow.com/users/6192925/mkropkowski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1547145739, "accepted_answer_id": 54133211, "answer_count": 1, "score": -3, "last_activity_date": 1547138340, "creation_date": 1547076399, "last_edit_date": 1547118547, "question_id": 54119939, "link": "https://stackoverflow.com/questions/54119939/base-tpl-is-not-properly-read-by-bottle", "closed_reason": "Not suitable for this site", "title": "base.tpl is not properly read by bottle", "body": "<p>I have downloaded some sample tpl files from the internet, i wanted to customise menu on my site thus i was trying to create new base.tpl file. However when I have saved it bottle does not want to read it and and return that:</p>\n\n<pre><code>bottle.TemplateError: Template 'base.tpl' not found.\n</code></pre>\n\n<p>Strange thing is that one is percived as rtf file and the other one (base.tpl downloaded from the internet) as the exec file. Why is that and how to fix this? Screenshot bellow:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3TFVK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3TFVK.png\" alt=\"enter image description here\"></a></p>\n\n<p>I am referring to them with:\n<code>return template('base')</code>. My educated guess is that it is textedit problem (I am using macOS) as it is trying to interpret the file and does not show the real html/tpl content.</p>\n\n<p>Templates are regular bottle tpl files, nothing extraordinary they are saved in my project directory.</p>\n\n<p>As to the directory list</p>\n\n<p><a href=\"https://i.stack.imgur.com/QOAOw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QOAOw.png\" alt=\"enter image description here\"></a></p>\n\n<p>However what I did is downloaded a different text editor then TextEdit and opened it in both in TextEdit you have:</p>\n\n<p><a href=\"https://i.stack.imgur.com/GaJ0y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GaJ0y.png\" alt=\"enter image description here\"></a></p>\n\n<p>Whereas in Atom text editor it looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/rwStX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rwStX.png\" alt=\"enter image description here\"></a></p>\n\n<p>Nevertheless files that were not created in TextEdit work perfectly fine.</p>\n"}, {"tags": ["python", "python-3.x", "pyqt", "pyqt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1547076826, "post_id": 54119933, "comment_id": 95072279, "body": "All the items or just the ones added?"}, {"owner": {"reputation": 406, "user_id": 8181134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f39e7489d0885f185749a1874262b0a?s=128&d=identicon&r=PG", "display_name": "user8181134", "link": "https://stackoverflow.com/users/8181134/user8181134"}, "edited": false, "score": 0, "creation_date": 1547077271, "post_id": 54119933, "comment_id": 95072371, "body": "Would <a href=\"http://doc.qt.io/archives/qt-4.8/qlistwidget.html#item\" rel=\"nofollow noreferrer\">getting the list item</a> and then <a href=\"http://doc.qt.io/qt-5/qlistwidgetitem.html#setSelected\" rel=\"nofollow noreferrer\">making it selected</a> work (and doing that for each item you want to have selected)?"}, {"owner": {"reputation": 240, "user_id": 5708752, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f7d4437f3cd1d79670e401017aea3d9?s=128&d=identicon&r=PG&f=1", "display_name": "laserpython", "link": "https://stackoverflow.com/users/5708752/laserpython"}, "edited": false, "score": 0, "creation_date": 1547077426, "post_id": 54119933, "comment_id": 95072403, "body": "I need all items selected. That doesn&#39;t work because each item that gets selected causes previous item to be deselected."}, {"owner": {"reputation": 2138, "user_id": 9142590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrjJh.jpg?s=128&g=1", "display_name": "Josu&#233; Cortina", "link": "https://stackoverflow.com/users/9142590/josu%c3%a9-cortina"}, "edited": false, "score": 0, "creation_date": 1547080078, "post_id": 54119933, "comment_id": 95073041, "body": "So, do you have a QListWidget and want to add many QListWidgetItem that get selected after adding them? Is that what you want?"}, {"owner": {"reputation": 240, "user_id": 5708752, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f7d4437f3cd1d79670e401017aea3d9?s=128&d=identicon&r=PG&f=1", "display_name": "laserpython", "link": "https://stackoverflow.com/users/5708752/laserpython"}, "reply_to_user": {"reputation": 2138, "user_id": 9142590, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrjJh.jpg?s=128&g=1", "display_name": "Josu&#233; Cortina", "link": "https://stackoverflow.com/users/9142590/josu%c3%a9-cortina"}, "edited": false, "score": 0, "creation_date": 1547081058, "post_id": 54119933, "comment_id": 95073253, "body": "@Josu&#233;Cortina Yes, so the end result is that all items added are selected. And when I call selectedItems(), I get back a list of all items."}], "answers": [{"comments": [{"owner": {"reputation": 240, "user_id": 5708752, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f7d4437f3cd1d79670e401017aea3d9?s=128&d=identicon&r=PG&f=1", "display_name": "laserpython", "link": "https://stackoverflow.com/users/5708752/laserpython"}, "edited": false, "score": 0, "creation_date": 1547082880, "post_id": 54120588, "comment_id": 95073565, "body": "This worked, but I think it has more to do with &quot;it.setSelected(True)&quot; than it does with MultiSelection. It just cant be SingleSelection or NoSelection."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1547081569, "creation_date": 1547081569, "answer_id": 54120588, "question_id": 54119933, "link": "https://stackoverflow.com/questions/54119933/pyqt5-list-widget-programmatically-select-all-items/54120588#54120588", "title": "PyQt5 List Widget Programmatically select all items", "body": "<p>You have to set the selectionMode to <code>QAbstractItemView::MultiSelection</code>:</p>\n\n<pre><code>from PyQt5 import QtCore, QtGui, QtWidgets\n\nclass MainWindow(QtWidgets.QMainWindow):\n    def __init__(self, parent=None):\n        super(MainWindow, self).__init__(parent)\n\n        self.listwidget = QtWidgets.QListWidget()\n        self.listwidget.setSelectionMode(QtWidgets.QAbstractItemView.MultiSelection)\n\n        self.setCentralWidget(self.listwidget)\n        # add some items\n        for i in range(5):\n            self.listwidget.addItem(str(i))\n\n        # add items with selection\n        for i in range(5):\n            it = QtWidgets.QListWidgetItem(str(i))\n            self.listwidget.addItem(it)\n            it.setSelected(True)\n\n        # selected items\n        for item in self.listwidget.selectedItems():\n            print(item.text())\n\nif __name__ == '__main__':\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    w = MainWindow()\n    w.resize(640, 480)\n    w.show()\n    sys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 240, "user_id": 5708752, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f7d4437f3cd1d79670e401017aea3d9?s=128&d=identicon&r=PG&f=1", "display_name": "laserpython", "link": "https://stackoverflow.com/users/5708752/laserpython"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1703, "favorite_count": 0, "accepted_answer_id": 54120588, "answer_count": 1, "score": 1, "last_activity_date": 1547081569, "creation_date": 1547076381, "last_edit_date": 1547076559, "question_id": 54119933, "link": "https://stackoverflow.com/questions/54119933/pyqt5-list-widget-programmatically-select-all-items", "title": "PyQt5 List Widget Programmatically select all items", "body": "<p>I add multiple items to a list widget, then it sets the last item to the selected item. I would like add multiple items and have them all selected. How do I do this?</p>\n"}, {"tags": ["python", "excel", "xlwings"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10892424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhuCc_oXsDc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY4wbdNL1eQ_T_iFvssvveuPC0ozQ/mo/photo.jpg?sz=128", "display_name": "Hao Huang", "link": "https://stackoverflow.com/users/10892424/hao-huang"}, "edited": false, "score": 0, "creation_date": 1547246976, "post_id": 54139370, "comment_id": 95141057, "body": "Thanks Felix. my xlwings version is 14.0, which can be seen by xw.App().version. However, xw.apps.keys() gives me an error: like the following--AttributeError: &#39;Apps&#39; object has no attribute &#39;keys&#39;"}, {"owner": {"reputation": 1, "user_id": 10892424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhuCc_oXsDc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY4wbdNL1eQ_T_iFvssvveuPC0ozQ/mo/photo.jpg?sz=128", "display_name": "Hao Huang", "link": "https://stackoverflow.com/users/10892424/hao-huang"}, "edited": false, "score": 0, "creation_date": 1547248014, "post_id": 54139370, "comment_id": 95141361, "body": "this actually works for me:  xl_pid=xw.apps[-1].pid a=next(xl for xl in xw.apps if xl.pid==xl_pid) now a is the app specified by xl_pid."}], "tags": [], "owner": {"reputation": 5157, "user_id": 918626, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8c377a6e6f8a5a6910bb62f51c6f853?s=128&d=identicon&r=PG", "display_name": "Felix Zumstein", "link": "https://stackoverflow.com/users/918626/felix-zumstein"}, "is_accepted": false, "score": 0, "last_activity_date": 1547171767, "creation_date": 1547171767, "answer_id": 54139370, "question_id": 54119898, "link": "https://stackoverflow.com/questions/54119898/how-to-specify-a-particular-excel-session-or-xlwings-app-instance-among-many-app/54139370#54139370", "title": "How to specify a particular excel session or xlwings App instance among many apps?", "body": "<p>Since v0.13, you can use the proccess id (PID) as your keys:</p>\n\n<pre><code>&gt;&gt;&gt; import xlwings as xw\n&gt;&gt;&gt; xw.apps.keys()\n[11260, 3904]\n&gt;&gt;&gt; xw.apps[11260]\n&lt;Excel App 11260&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10892424, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bhuCc_oXsDc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY4wbdNL1eQ_T_iFvssvveuPC0ozQ/mo/photo.jpg?sz=128", "display_name": "Hao Huang", "link": "https://stackoverflow.com/users/10892424/hao-huang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 399, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547171767, "creation_date": 1547076217, "last_edit_date": 1547081215, "question_id": 54119898, "link": "https://stackoverflow.com/questions/54119898/how-to-specify-a-particular-excel-session-or-xlwings-app-instance-among-many-app", "title": "How to specify a particular excel session or xlwings App instance among many apps?", "body": "<p>I have a couple of excel sessions open. How can I specify a particular excel session to open a workbook. I can try <code>xw.apps[-1].books.open(filename)</code> to specify one and do some work on the workbook. However, when I rerun the code, a copy of the same workbook will be open in another excel session.</p>\n\n<p>If I have two sessions of excel right now and I run the following code:</p>\n\n<pre><code>import xlwings as xw\n\nxw.apps\n</code></pre>\n\n<p>I got the following:</p>\n\n<pre><code>Apps([&lt;Excel App 11260&gt;, &lt;Excel App 3904&gt;])\n</code></pre>\n\n<p>How can I pick say App 11260 specifically?</p>\n"}, {"tags": ["python", "python-import", "spyder"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1547076166, "post_id": 54119872, "comment_id": 95072123, "body": "The first step is to see what package it&#39;s actually importing.  <code>print(mp.__file__)</code> will show you this."}, {"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 2, "creation_date": 1547076209, "post_id": 54119872, "comment_id": 95072136, "body": "If in doubt, restart the interpreter. But <code>reload</code> should have worked."}, {"owner": {"reputation": 1427, "user_id": 5162520, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e1b32faa01a76ded6683fa2ec7215d53?s=128&d=identicon&r=PG&f=1", "display_name": "Forklift17", "link": "https://stackoverflow.com/users/5162520/forklift17"}, "edited": false, "score": 0, "creation_date": 1547076441, "post_id": 54119872, "comment_id": 95072200, "body": "I&#39;m running Python in Spyder, and simply closing and restarting Spyder fixed my issue. Should I post this as the solution?"}, {"owner": {"reputation": 3677, "user_id": 10553976, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-0OtkRHQ0PKw/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAFTLpkUFgg8Wso5q8W5jNUeEeS7Q/mo/photo.jpg?sz=128", "display_name": "Charles Landau", "link": "https://stackoverflow.com/users/10553976/charles-landau"}, "edited": false, "score": 0, "creation_date": 1547077056, "post_id": 54119872, "comment_id": 95072335, "body": "Possibly relevant: <a href=\"https://stackoverflow.com/a/17349834/10553976\">stackoverflow.com/a/17349834/10553976</a>"}], "owner": {"reputation": 1427, "user_id": 5162520, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e1b32faa01a76ded6683fa2ec7215d53?s=128&d=identicon&r=PG&f=1", "display_name": "Forklift17", "link": "https://stackoverflow.com/users/5162520/forklift17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "closed_date": 1547077197, "answer_count": 0, "score": 0, "last_activity_date": 1547077112, "creation_date": 1547076021, "last_edit_date": 1547077112, "question_id": 54119872, "link": "https://stackoverflow.com/questions/54119872/python-not-importing-the-updated-version-of-my-module", "closed_reason": "Duplicate", "title": "Python not importing the updated version of my module", "body": "<p><code>mypackage</code> includes these lines:</p>\n\n<pre><code>x = 1\ny = 2\n</code></pre>\n\n<p>Now I am trying to run <code>foo.py</code> that does something like the following:</p>\n\n<pre><code>import mypackage as mp\nx = mp.x #works\ny = mp.y #does not work\n</code></pre>\n\n<p>When I run <code>foo.py</code>, line 3 triggers the following error:</p>\n\n<blockquote>\n  <p>AttributeError: 'module' object has no attribute 'y'</p>\n</blockquote>\n\n<p>The old version of mypackage only had x and not y. So I've tried updating it. I've tried <a href=\"https://stackoverflow.com/questions/437589/how-do-i-unload-reload-a-python-module\">this</a> solution. I've tried actually running the package to regenerate the <code>.pyc</code> file, but no dice.</p>\n\n<p>How do I get my new version of <code>foo.py</code> to import the new version of <code>mypackage</code>?</p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 1, "last_activity_date": 1547077240, "creation_date": 1547077240, "answer_id": 54120046, "question_id": 54119867, "link": "https://stackoverflow.com/questions/54119867/matplotlib-interpolate-on-masked-series/54120046#54120046", "title": "Matplotlib interpolate on masked series", "body": "<p>You can limit the plotting to those values which are not masked. That is, instead of plotting</p>\n\n<pre><code>[-- -- 50 -- -- 52 49 51 -- 52 49 55 51]\n</code></pre>\n\n<p>you can plot</p>\n\n<pre><code>[50 52 49 51 52 49 55 51]\n</code></pre>\n\n<p>This would be done by filtering on the <code>mask</code> itself.</p>\n\n<pre><code>ax.plot(x_values[~y2_values.mask], y2_values[~y2_values.mask])\n</code></pre>\n\n<p>Complete example:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\ny_values = [92,94,100,97,98,102,99,101,97,102,99,105,101]\ny_values = np.ma.array(y_values)\nthreshold = 99\n\ny2_values = np.ma.masked_where(y_values &lt; threshold, [v-50 for v in y_values])\ny3_values = np.ma.masked_where(~(y_values &lt; threshold), [v-80 for v in y_values])\nx_values = np.array([0,1,2,3,4,5,6,7,8,9,10,11,12])\n\nfig, ax = plt.subplots(3, sharex=True, facecolor='w')\nfig.subplots_adjust(hspace=0.25)\n\nax[0].plot(x_values, y_values, marker=\"o\")\nax[0].set_title('All values')\n\nax[1].plot(x_values[~y2_values.mask], y2_values[~y2_values.mask], marker=\"o\")\nax[1].set_title('y2-values')\n\nax[2].plot(x_values[~y3_values.mask], y3_values[~y3_values.mask], marker=\"o\")\nax[2].set_title('y3-values')\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/OubSN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OubSN.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 991, "user_id": 2413548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96d6ec5ea2e353b5979f01f9f38f47fa?s=128&d=identicon&r=PG", "display_name": "hootnot", "link": "https://stackoverflow.com/users/2413548/hootnot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 54120046, "answer_count": 1, "score": 0, "last_activity_date": 1547077240, "creation_date": 1547076001, "question_id": 54119867, "link": "https://stackoverflow.com/questions/54119867/matplotlib-interpolate-on-masked-series", "title": "Matplotlib interpolate on masked series", "body": "<p>I have a set of data from which I generate 3 plots (see example). The top plot is created from a full set the other 2 from a subset.</p>\n\n<p>What I would like to see is that the line in the 2nd and 3rd plot are continuous. How to accomplish that ?\nBelow a modified example from <a href=\"https://scipy-cookbook.readthedocs.io/items/Matplotlib_Plotting_values_with_masked_arrays.html\" rel=\"nofollow noreferrer\">https://scipy-cookbook.readthedocs.io/items/Matplotlib_Plotting_values_with_masked_arrays.html</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/vcEmn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vcEmn.png\" alt=\"enter image description here\"></a>    </p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\n# suppose we have full serie of y values and 2 others that can have gaps\n# but always one is available like:\n# y:    10, 20, 30, 40 , 50\n# y2:    1,  4, -,  -  , 12\n# y3:    -,  -, 6,  8  ,  -\n\ny_values = [92,94,100,97,98,102,99,101,97,102,99,105,101]\n# prepare for masking arrays - 'conventional' arrays won't do it\ny_values = np.ma.array(y_values)\n\n# from y artifically create y2 and y2\n# give a threshold\nthreshold = 99\n\ny2_values = np.ma.masked_where(y_values &lt; threshold, [v-50 for v in y_values])\ny3_values = np.ma.masked_where(~(y_values &lt; threshold), [v-80 for v in y_values])\nx_values = [0,1,2,3,4,5,6,7,8,9,10,11,12]\n\nfig, ax = plt.subplots(3, sharex=True, facecolor='w')\nfig.subplots_adjust(hspace=0.25)\n\n#plot all data\nax[0].plot(x_values, y_values) #,'ko')\nax[0].set_title('All values')\n\nax[1].plot(x_values, y2_values) #,'ko')\nax[1].set_title('y2-values')\n#ax = plt.subplot(313)\n\nax[2].plot(x_values, y3_values) #,'ko')\nax[2].set_title('y3-values')\nfig.savefig(\"3sp.png\")\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "edited": false, "score": 3, "creation_date": 1547076159, "post_id": 54119858, "comment_id": 95072121, "body": "Hi, on all the pages in <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.poly.html\" rel=\"nofollow noreferrer\">the documentation</a>, there is a link to <a href=\"https://github.com/numpy/numpy/blob/v1.15.4/numpy/lib/polynomial.py#L32-L146\" rel=\"nofollow noreferrer\">the source</a> (see the upper right corner.)"}, {"owner": {"reputation": 37, "user_id": 9509497, "user_type": "registered", "profile_image": "https://graph.facebook.com/1622397341148841/picture?type=large", "display_name": "Bhushan Navgire", "link": "https://stackoverflow.com/users/9509497/bhushan-navgire"}, "reply_to_user": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "edited": false, "score": 0, "creation_date": 1547076432, "post_id": 54119858, "comment_id": 95072197, "body": "I was not able to understand examples over there, as there are direct solutions posted, no explanation is given"}, {"owner": {"reputation": 388, "user_id": 9170199, "user_type": "registered", "profile_image": "https://graph.facebook.com/1179686118828793/picture?type=large", "display_name": "Max Collier", "link": "https://stackoverflow.com/users/9170199/max-collier"}, "reply_to_user": {"reputation": 14609, "user_id": 667648, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mTpbt.jpg?s=128&g=1", "display_name": "Dair", "link": "https://stackoverflow.com/users/667648/dair"}, "edited": false, "score": 0, "creation_date": 1547077046, "post_id": 54119858, "comment_id": 95072333, "body": "On the documentation page (linked by @Dair&#39;s comment), make sure to read the &#39;Parameters&#39; and &#39;Returns&#39; descriptions for the function. It describes it very clearly if you have an understanding of how polynomials work."}, {"owner": {"reputation": 37, "user_id": 9509497, "user_type": "registered", "profile_image": "https://graph.facebook.com/1622397341148841/picture?type=large", "display_name": "Bhushan Navgire", "link": "https://stackoverflow.com/users/9509497/bhushan-navgire"}, "reply_to_user": {"reputation": 388, "user_id": 9170199, "user_type": "registered", "profile_image": "https://graph.facebook.com/1179686118828793/picture?type=large", "display_name": "Max Collier", "link": "https://stackoverflow.com/users/9170199/max-collier"}, "edited": false, "score": 0, "creation_date": 1547077860, "post_id": 54119858, "comment_id": 95072492, "body": "can you explain how we get output for array (0,0,0) as 1,0,0,0  @Max Collier"}, {"owner": {"reputation": 388, "user_id": 9170199, "user_type": "registered", "profile_image": "https://graph.facebook.com/1179686118828793/picture?type=large", "display_name": "Max Collier", "link": "https://stackoverflow.com/users/9170199/max-collier"}, "edited": false, "score": 0, "creation_date": 1547078258, "post_id": 54119858, "comment_id": 95072582, "body": "@BhushanNavgire just posted an answer"}, {"owner": {"reputation": 15894, "user_id": 984471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAexx.png?s=128&g=1", "display_name": "Manohar Reddy Poreddy", "link": "https://stackoverflow.com/users/984471/manohar-reddy-poreddy"}, "edited": false, "score": 0, "creation_date": 1609252238, "post_id": 54119858, "comment_id": 115790121, "body": "Jump to the correct answer by @jasonharper - <a href=\"https://stackoverflow.com/a/54120391/984471\">stackoverflow.com/a/54120391/984471</a>"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 9509497, "user_type": "registered", "profile_image": "https://graph.facebook.com/1622397341148841/picture?type=large", "display_name": "Bhushan Navgire", "link": "https://stackoverflow.com/users/9509497/bhushan-navgire"}, "edited": false, "score": 1, "creation_date": 1547080079, "post_id": 54120391, "comment_id": 95073044, "body": "Thankx a lot dude. you solution is the perfect answer to my question."}], "tags": [], "owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "is_accepted": false, "score": 6, "last_activity_date": 1547079870, "creation_date": 1547079870, "answer_id": 54120391, "question_id": 54119858, "link": "https://stackoverflow.com/questions/54119858/can-anyone-explain-how-we-get-output-for-numpy-poly-function/54120391#54120391", "title": "Can anyone explain how we get output for numpy.poly function", "body": "<p>A polynomial with roots at 'a', 'b', and 'c' can easily be created by writing <code>(x-a)(x-b)(x-c)</code>, which can be multiplied out to produce -abc + abx + acx + bcx - ax<sup>2</sup> - bx<sup>2</sup> - cx<sup>2</sup> + x<sup>3</sup>.  In your case, with a, b, c all zero, that simplifies to x<sup>3</sup>.  Your result of <code>[1, 0, 0, 0]</code> is a representation of that polynomial as an array of coefficients.</p>\n"}, {"comments": [{"owner": {"reputation": 15894, "user_id": 984471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAexx.png?s=128&g=1", "display_name": "Manohar Reddy Poreddy", "link": "https://stackoverflow.com/users/984471/manohar-reddy-poreddy"}, "edited": false, "score": 0, "creation_date": 1609251860, "post_id": 54121002, "comment_id": 115789952, "body": "The answer could have started from @jasonharper&#39;s answer, then it would all make sense easily. Also a link to jasonharper&#39;s answer at the begin will help."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1547086542, "last_edit_date": 1547086542, "creation_date": 1547085825, "answer_id": 54121002, "question_id": 54119858, "link": "https://stackoverflow.com/questions/54119858/can-anyone-explain-how-we-get-output-for-numpy-poly-function/54121002#54121002", "title": "Can anyone explain how we get output for numpy.poly function", "body": "<p>To build on @jason's answer:</p>\n\n<p>The <code>np.poly</code> code, for basic cases can be simplified to:</p>\n\n<pre><code>def foo(seq):\n    a = np.array([1.])\n    for s in seq:\n        a = np.convolve(a, [1,-s])\n    return a\n\nIn [39]: foo([0,0,0])\nOut[39]: array([1., 0., 0., 0.])\nIn [40]: np.poly([0,0,0])\nOut[40]: array([1., 0., 0., 0.])\nIn [41]: foo([2,0,-2])\nOut[41]: array([ 1.,  0., -4.,  0.])\nIn [42]: np.poly([2,0,-2])\nOut[42]: array([ 1.,  0., -4.,  0.])\nIn [43]: foo([.1,.2,.3])\nOut[43]: array([ 1.   , -0.6  ,  0.11 , -0.006])\nIn [44]: np.poly([.1,.2,.3])\nOut[44]: array([ 1.   , -0.6  ,  0.11 , -0.006])\n</code></pre>\n\n<p>What <code>np.convolve</code> does, and why it works for this task, is another question layer.</p>\n\n<p>Printing <code>a</code> after each iteration:</p>\n\n<pre><code>In [46]: foo([.1,.2,.3])\n[ 1.  -0.1]\n[ 1.   -0.3   0.02]\n[ 1.    -0.6    0.11  -0.006]\n</code></pre>\n\n<p>Grouping @jason's equation:</p>\n\n<pre><code>-abc + abx + acx + bcx - ax2 - bx2 - cx2 + x3\n-abc + (ab + ac + bc)*x + (- a - b - c)*x2 + x3\n\n-.1*.2*.3, (.1*.2 + .1*.3 + .2*.3), (-.1-.2-.3), 1\n-.006, .02+.03+.06, -.6, 1\n</code></pre>\n\n<p>or building incrementally</p>\n\n<pre><code>-a + x\n-ab + (-a-b)x + x2\n-abc + ...\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 9509497, "user_type": "registered", "profile_image": "https://graph.facebook.com/1622397341148841/picture?type=large", "display_name": "Bhushan Navgire", "link": "https://stackoverflow.com/users/9509497/bhushan-navgire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 608, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1547086542, "creation_date": 1547075957, "last_edit_date": 1547076326, "question_id": 54119858, "link": "https://stackoverflow.com/questions/54119858/can-anyone-explain-how-we-get-output-for-numpy-poly-function", "title": "Can anyone explain how we get output for numpy.poly function", "body": "<p>I want to know what happens behind the scene when we call <code>numpy.poly</code> function. An example demonstration will be appreciated.</p>\n\n<pre><code>&gt;&gt;&gt; numpy.poly((0, 0, 0)) # Multiple root example\narray([1, 0, 0, 0])\n</code></pre>\n"}, {"tags": ["python", "sequence", "pdb"], "comments": [{"owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1547079153, "post_id": 54119847, "comment_id": 95072796, "body": "Some suggestions: proofread your question. The indentation is messed up and that&#39;s very important in Python.  The phrase &quot;enter code here&quot; appears in the listing.  Keep in mind that the readers of this site are programming experts but they probably don&#39;t understand a protein sequence listing (I don&#39;t, and I took molecular biology in college).  You say: &quot;if the first entry in the PDB file is Alanine, I want to find the corresponding index of Alaline in the sequence list&quot;. I think you need to explain, step by step, with terminology from math and logic, what procedure will do that."}, {"owner": {"reputation": 1, "user_id": 10892398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1d08ebf460eeb8a004113311e357c92?s=128&d=identicon&r=PG", "display_name": "latnandiss", "link": "https://stackoverflow.com/users/10892398/latnandiss"}, "reply_to_user": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1547079866, "post_id": 54119847, "comment_id": 95072978, "body": "@Paul Cornelius: I apologize for the omission. I have edited my text and the indentation."}], "owner": {"reputation": 1, "user_id": 10892398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1d08ebf460eeb8a004113311e357c92?s=128&d=identicon&r=PG", "display_name": "latnandiss", "link": "https://stackoverflow.com/users/10892398/latnandiss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547079757, "creation_date": 1547075905, "last_edit_date": 1547079757, "question_id": 54119847, "link": "https://stackoverflow.com/questions/54119847/find-mapping-between-amino-acid-index-from-pdb-files-and-sequence", "title": "Find mapping between amino acid index from PDB files and sequence", "body": "<p>I am a beginner in python programming. What I am trying to do is the following:</p>\n\n<p>I have a sequence of amino acids (including gaps) and a corresponding PDB file. The numbering of amino acids in the PDB file does not match the numbering of the amino acids in the sequence list. I want to find the index of each amino acid entries in the PDB file and find the corresponding index in the sequence.</p>\n\n<p>Here is the sequence:<code>-LLPYFDF----DVPRNLTVTVGQT-GFLHCRVERLGDK-----DVSWIRKR----------DLHILTAGGTTYTSDQRFQVLRP---------------------------------------DGSANWTLQIKYPQPRDSGVYECQINTEP-KMSLSYTFNVVE-IVDPKFSSPIVNMTAPVGRDAFLTCVVQDLGPYKVAWLRVDTQTILTIQNHVITKNQRIGIANSEH---KTWTMRIKDIKESDKGWYMCQINTDPMKSQMGYLDVV----</code></p>\n\n<p>Here is what I have tried so far:</p>\n\n<pre><code>import pylab as pyl\nimport numpy as np\nimport sys\nimport os\nimport re\nimport argparse\nimport glob\n\ndef parseArgs():\n \"\"\"Parse command line arguments\"\"\"\n\n  try:\n      parser = argparse.ArgumentParser(\n       description = 'Read and extract items from input PDB file')\n\n      parser.add_argument('-i',\n                        '--input',\n                        action='store',\n                        required=True,\n                        help='input PDB file in standard format')\n\n   except:\n        print (\"An exception occurred with argument parsing. Check your provided options.\")\n        traceback.print_exc()\n\n\n   return parser.parse_args()\n\n# Reads a PDB file and returns the residue name and coordinates for \n# each C-alpha atom\n# (the input argument for this routine is the pdb file name.)\n\ndef get_coordinates_PDB(File_In):\n    try:\n        fl = open(File_In,'r')\n    except:\n        print('Could not open input file {0}'.format(File_In))\n        sys.exit()\n    Res = []\n    Points = []\n    #Getting from a PDB file\n\n    for line in fl:\n        if not(line.startswith('ATOM')):\n            continue\n        elif (line[13:15] != 'CA'):\n            continue\n        resname = line[17:20]\n        xyz = re.findall('[-+]?\\d+\\.\\d+', line)\n        tmp = np.zeros(3)\n        Res.append(resname)\n        tmp[0] = float(xyz[0])\n        tmp[1] = float(xyz[1])\n        tmp[2] = float(xyz[2])\n        Points.append(tmp)\n     fl.close()\n     return Points, Res\n\n\ndef main():\n  \"\"\"Read and parse a provided PDB file.\"\"\"\n\n\n  #Parse arguments\n  args = parseArgs()\n\n  File_In = args.input\n\n  print(get_coordinates_PDB(File_In))\n\nif __name__ == '__main__':\n   main()\n</code></pre>\n\n<p>This outputs the x,y,z coordinates and the amino acids in the PDB file. However, I am stalled at this point.</p>\n\n<p>I would much appreciate if someone could help me with implementing the rest.</p>\n"}, {"tags": ["python", "recursion", "transpose", "self-join"], "comments": [{"owner": {"reputation": 5380, "user_id": 10618540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Od4aq.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/10618540/paritosh-singh"}, "edited": false, "score": 0, "creation_date": 1547076062, "post_id": 54119841, "comment_id": 95072103, "body": "i like that you kept it generic, but your example might end up being too oversimplified and producing answers that may not exactly apply. Do you expect your data to be provided as column names in first index and just values in second? Do the values tend to be joined at the &quot;tail&quot; so to speak? This might be too vague as is."}, {"owner": {"reputation": 115, "user_id": 10696411, "user_type": "registered", "profile_image": "https://graph.facebook.com/1763008507326841/picture?type=large", "display_name": "Jundullah", "link": "https://stackoverflow.com/users/10696411/jundullah"}, "edited": false, "score": 1, "creation_date": 1547076135, "post_id": 54119841, "comment_id": 95072115, "body": "<code>col3</code> and <code>col4</code> ? where did they come from?"}, {"owner": {"reputation": 113, "user_id": 6382244, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-tpkEJpXeYZ8/AAAAAAAAAAI/AAAAAAAAABM/2eeFgKWMwxc/photo.jpg?sz=128", "display_name": "Stemming_from_jem", "link": "https://stackoverflow.com/users/6382244/stemming-from-jem"}, "reply_to_user": {"reputation": 5380, "user_id": 10618540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Od4aq.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/10618540/paritosh-singh"}, "edited": false, "score": 0, "creation_date": 1547078540, "post_id": 54119841, "comment_id": 95072639, "body": "@ParitoshSingh - good points. The index and column names are not important so much as the order of the columns.  Joining at the tail AND head should occur since the first item in the first column may not be the true head, but actually a &#39;local head&#39;. Instead I would need to move in both forward and reverse from some arbitrary value."}, {"owner": {"reputation": 13920, "user_id": 3404097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e38747633941acae3957fd99b5ebe20?s=128&d=identicon&r=PG&f=1", "display_name": "philipxy", "link": "https://stackoverflow.com/users/3404097/philipxy"}, "edited": false, "score": 0, "creation_date": 1547100016, "post_id": 54119841, "comment_id": 95077141, "body": "Please use words to explain exactly what you are doing. Please clarify via post edits, not comments."}], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 10696411, "user_type": "registered", "profile_image": "https://graph.facebook.com/1763008507326841/picture?type=large", "display_name": "Jundullah", "link": "https://stackoverflow.com/users/10696411/jundullah"}, "is_accepted": false, "score": 0, "last_activity_date": 1547078017, "creation_date": 1547078017, "answer_id": 54120152, "question_id": 54119841, "link": "https://stackoverflow.com/questions/54119841/recursive-self-join-and-transposition/54120152#54120152", "title": "Recursive self join and transposition", "body": "<p>gives you the result you want:</p>\n\n<pre><code>fam = [[\"Col1\",\"Col2\"],[\"A\",\"B\"],[\"B\",\"C\"],[\"C\",\"D\"]]\n\ncol, chi, res = [], [], []\n\nfor i in fam:\n    for ii in i:\n        if len(ii) == 1:\n            if ii in chi:\n                chi.remove(ii)\n            chi.append(ii)\n        else:\n            col.append(ii)\n\nres.append(col)\nres.append(chi)\n\n&gt;&gt;&gt;print(res)\n&gt;&gt;&gt;[['Col1', 'Col2'], ['A', 'B', 'C', 'D']]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 0, "last_activity_date": 1547101077, "creation_date": 1547101077, "answer_id": 54122885, "question_id": 54119841, "link": "https://stackoverflow.com/questions/54119841/recursive-self-join-and-transposition/54122885#54122885", "title": "Recursive self join and transposition", "body": "<p>You can build a dict of lists from the parent-child pairs that maps each parent to a list of children, find the top parents by using set difference between the dict keys and the set of children, make these top parents the children of <code>None</code>, so that you can recursively build the joined lists from the mapping dict starting with <code>None</code> as the top-most parent, but ignore <code>None</code> when outputting the joined lists:</p>\n\n<pre><code>def join(pairs):\n    def _join(parent=None):\n        if parent not in tree:\n            return [[parent]]\n        output = []\n        for child in tree[parent]:\n            for joined in _join(child):\n                output.append([*([parent] if parent else []), *joined])\n        return output\n    tree = {}\n    children = set()\n    for parent, child in pairs:\n        tree.setdefault(parent, []).append(child)\n        children.add(child)\n    for parent in tree.keys() - children:\n        tree.setdefault(None, []).append(parent)\n    return _join()\n</code></pre>\n\n<p>so that given:</p>\n\n<pre><code>pairs = [\n    [\"A\", \"B1\"],\n    [\"B1\", \"C1\"],\n    [\"B1\", \"C2\"],\n    [\"C2\", \"D\"],\n    [\"A\", \"B2\"]\n]\n</code></pre>\n\n<p><code>joined(pairs)</code> would return:</p>\n\n<pre><code>[['A', 'B1', 'C1'], ['A', 'B1', 'C2', 'D'], ['A', 'B2']]\n</code></pre>\n\n<p>Now if you want to fill the rows with less columns with empty strings, you can get the maximum number of columns first, and then iterate through the rows to extend them with enough empty strings to make them of equal number of columns:</p>\n\n<pre><code>joined = join(pairs)\nmax_columns = max(map(len, joined))\nfor path in joined:\n    path.extend([''] * (max_columns - len(path)))\n</code></pre>\n\n<p><code>joined</code> would become:</p>\n\n<pre><code>[['A', 'B1', 'C1', ''], ['A', 'B1', 'C2', 'D'], ['A', 'B2', '', '']]\n</code></pre>\n\n<p>Note that I'm ignoring the column headers such as <code>['Col1', 'Col2']</code> in your question because they are not relevant to the problem, and you did not provide an explanation as to where <code>'Col3'</code> and <code>'Col4'</code> come from.</p>\n"}], "owner": {"reputation": 113, "user_id": 6382244, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh4.googleusercontent.com/-tpkEJpXeYZ8/AAAAAAAAAAI/AAAAAAAAABM/2eeFgKWMwxc/photo.jpg?sz=128", "display_name": "Stemming_from_jem", "link": "https://stackoverflow.com/users/6382244/stemming-from-jem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1547101077, "creation_date": 1547075876, "last_edit_date": 1547079208, "question_id": 54119841, "link": "https://stackoverflow.com/questions/54119841/recursive-self-join-and-transposition", "title": "Recursive self join and transposition", "body": "<p>I have a data set that tracks parent/child relationships across multiple measurement cycles. This looks like</p>\n\n<pre><code>[[\"Col1\",\"Col2\"],\n [\"A\",\"B\"],\n [\"B\",\"C\"],\n [\"C\",\"D\"]]\n</code></pre>\n\n<p>I would like this to appear as </p>\n\n<pre><code>[[\"Col1\",\"Col2\",\"Col3\",\"Col4\"],\n [\"A\",\"B\",\"C\",\"D\"]]\n</code></pre>\n\n<p>I have seen other examples in SQL, but none of those seem to answer my question. I'm looking for a full columnar expansion of the data.</p>\n\n<p>I have investigated self-joins and transposition, but neither of those quite get me there.</p>\n\n<p>This should not require hyper-specialized python packages since I need to port this over to a few other coding languages.</p>\n\n<p>Update: second example:\nIf I had a data set such as</p>\n\n<pre><code>[[\"Col1\",\"Col2\"],\n [\"A\",\"B1\"],\n [\"B1\",\"C1\"],\n [\"B1,\"C2\"],\n [\"C2,\"D\"],\n [\"A,\"B2\"]]\n</code></pre>\n\n<p>I would expect:</p>\n\n<pre><code>[[\"Col1\",\"Col2\",\"Col3\",\"Col4\"],\n [\"A\",\"B1\",\"C1\",\"\"],\n [\"A\",\"B1\",\"C2\",\"D\"],\n [\"A\",\"B2\",\"\",\"\"]]\n</code></pre>\n"}, {"tags": ["python", "json", "python-2.7"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 6856433, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3afcf20c6c643637b597f9f1429b8335?s=128&d=identicon&r=PG&f=1", "display_name": "john samcock", "link": "https://stackoverflow.com/users/6856433/john-samcock"}, "edited": false, "score": 0, "creation_date": 1547095759, "post_id": 54120211, "comment_id": 95076052, "body": "Is there a method to doing this without using global variable? Can i just make it return an array?"}, {"owner": {"reputation": 85, "user_id": 6856433, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3afcf20c6c643637b597f9f1429b8335?s=128&d=identicon&r=PG&f=1", "display_name": "john samcock", "link": "https://stackoverflow.com/users/6856433/john-samcock"}, "edited": false, "score": 0, "creation_date": 1547096319, "post_id": 54120211, "comment_id": 95076182, "body": "Everytime i call this function it keeps the old data. How do i clear it?"}, {"owner": {"reputation": 164, "user_id": 5738989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df023457662773dae36007cbc1d996d0?s=128&d=identicon&r=PG&f=1", "display_name": "Guillermo Santamar&#237;a", "link": "https://stackoverflow.com/users/5738989/guillermo-santamar%c3%ada"}, "reply_to_user": {"reputation": 85, "user_id": 6856433, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3afcf20c6c643637b597f9f1429b8335?s=128&d=identicon&r=PG&f=1", "display_name": "john samcock", "link": "https://stackoverflow.com/users/6856433/john-samcock"}, "edited": false, "score": 0, "creation_date": 1547109993, "post_id": 54120211, "comment_id": 95081040, "body": "Sure, checkout my new response ;)"}], "tags": [], "owner": {"reputation": 164, "user_id": 5738989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df023457662773dae36007cbc1d996d0?s=128&d=identicon&r=PG&f=1", "display_name": "Guillermo Santamar&#237;a", "link": "https://stackoverflow.com/users/5738989/guillermo-santamar%c3%ada"}, "is_accepted": true, "score": 1, "last_activity_date": 1547109979, "last_edit_date": 1547109979, "creation_date": 1547078424, "answer_id": 54120211, "question_id": 54119766, "link": "https://stackoverflow.com/questions/54119766/how-to-get-values-of-keys-for-changing-json/54120211#54120211", "title": "How to get values of keys for changing Json", "body": "<p>I guess your only option is running through the entire dict and get the values of <code>Animal_Target_DisplayName</code> key, I propose the following recursive solution:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def run_json(dict_):\n    animal_target_sons = []\n    if type(dict_) is list:\n        for element in dict_:\n            animal_target_sons.append(run_json(element)) \n    elif type(dict_) is dict:\n        for key in dict_:\n            if key==\"Animal_Target_DisplayName\":\n                animal_target_sons.append([dict_[key]])\n            else:\n                animal_target_sons.append(run_json(dict_[key]))\n    return [x for sublist in animal_target_sons for x in sublist]\nrun_json(dict_)\n</code></pre>\n\n<p>Then calling <code>run_json</code> returns a list with what you want. By the way, I recommend you to rename your json from <code>dict</code> to, for example <code>dict_</code>, since <code>dict</code> is a reserved word of Python for the dictionary type.</p>\n"}, {"tags": [], "owner": {"reputation": 1463, "user_id": 2299087, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KWtlB.jpg?s=128&g=1", "display_name": "James McPherson", "link": "https://stackoverflow.com/users/2299087/james-mcpherson"}, "is_accepted": false, "score": -1, "last_activity_date": 1547080788, "creation_date": 1547080788, "answer_id": 54120494, "question_id": 54119766, "link": "https://stackoverflow.com/questions/54119766/how-to-get-values-of-keys-for-changing-json/54120494#54120494", "title": "How to get values of keys for changing Json", "body": "<p>Since you're getting JSON, why not make use of the json module? That will do the parsing for you and allow you to use dictionary functions+features to get the information you need.</p>\n\n<pre><code>#!/usr/bin/python2.7\nfrom __future__ import print_function\nimport json\n\n# _somehow_ get your JSON in as a string. I'm calling it \"jstr\" for this \n# example. \n# Use the module to parse it \njdict = json.loads(jstr)\n\n# our dict has keys...\n# view -&gt; Term0 -&gt; keys-we're-interested-in\n\ntemplist = jdict[\"view\"][\"Term0\"]\n\nresults = {}\n\nfor _el in range(len(templist)):\n    if templist[_el][\"FullName\"] == \"Animal Set\":\n        # this is the one we're interested in - and it's another list\n        moretemp = templist[_el][\"Relation6\"]\n        for _k in range(len(moretemp)):\n            term7 = moretemp[_k][\"Term7\"][0]\n            displayName = term7[\"Animal_Target_DisplayName\"]\n            fullName = term7[\"Animal_Target_FullName\"]\n            results[fullName] = displayName\nprint(\"{0}\".format(results))\n</code></pre>\n\n<p>Then you can dump the <code>results</code> dict plain, or with pretty-printing:</p>\n\n<pre><code>&gt;&gt;&gt; print(json.dumps(results, indent=4))\n{\n    \"Animaltitle2\": \"Animaltitle2\", \n    \"Animalcustomer3\": \"Animalcustomer3\", \n    \"Animalfact_transaction4\": \"Animalfact_transaction4\", \n    \"Animaltheater1\": \"Animaltheater1\"\n}\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 6856433, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/3afcf20c6c643637b597f9f1429b8335?s=128&d=identicon&r=PG&f=1", "display_name": "john samcock", "link": "https://stackoverflow.com/users/6856433/john-samcock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "accepted_answer_id": 54120211, "answer_count": 2, "score": 0, "last_activity_date": 1582617139, "creation_date": 1547075469, "last_edit_date": 1582617139, "question_id": 54119766, "link": "https://stackoverflow.com/questions/54119766/how-to-get-values-of-keys-for-changing-json", "title": "How to get values of keys for changing Json", "body": "<p>I am using python2.7</p>\n\n<p>I have a json i pull that is always changing when i request it.</p>\n\n<p>I need to pull out <code>Animal_Target_DisplayNam</code>e under Term7 Under Relation6 in my dict.</p>\n\n<p>The problem is sometimes the object Relation6 is in another part of the Json, it could be leveled deeper or in another order.</p>\n\n<p>I am trying to create code that can just export the values of the key <code>Animal_Target_DisplayName</code> but nothing is working. It wont even loop down the nested dict.</p>\n\n<p>Now this can work if i just pull it out using something like <code>['view']['Term0'][0]['Relation6']</code> but remember the JSON is never returned in the same structure.</p>\n\n<p>Code i am using to get the values of the key <code>Animal_Target_DisplayName</code> but it doesnt seem to loop through my dict and find all the values with that key.</p>\n\n<pre><code>array = []\nfor d in dict.values():\n    row = d['Animal_Target_DisplayName']\n    array.append(row)\n</code></pre>\n\n<p>JSON Below:</p>\n\n<pre><code>dict = {  \n   \"view\":{  \n      \"Term0\":[  \n         {  \n            \"Id\":\"b0987b91-af12-4fe3-a56f-152ac7a4d84d\",\n            \"DisplayName\":\"Dog\",\n            \"FullName\":\"Dog\",\n            \"AssetType1\":[  \n               {  \n                  \"AssetType_Id\":\"00000000-0000-0000-0000-000000031131\",\n               }\n            ]\n         },\n         {  \n            \"Id\":\"ee74a59d-fb74-4052-97ba-9752154f015d\",\n            \"DisplayName\":\"Dog2\",\n            \"FullName\":\"Dog\",\n            \"AssetType1\":[  \n               {  \n                  \"AssetType_Id\":\"00000000-0000-0000-0000-000000031131\",\n               }\n            ]\n         },\n         {  \n            \"Id\":\"eb548eae-da6f-41e8-80ea-7e9984f56af6\",\n            \"DisplayName\":\"Dog3\",\n            \"FullName\":\"Dog3\",\n            \"AssetType1\":[  \n               {  \n                  \"AssetType_Id\":\"00000000-0000-0000-0000-000000031131\",\n               }\n            ]\n         },\n         {  \n            \"Id\":\"cfac6dd4-0efa-4417-a2bf-0333204f8a42\",\n            \"DisplayName\":\"Animal Set\",\n            \"FullName\":\"Animal Set\",\n            \"AssetType1\":[  \n               {  \n                  \"AssetType_Id\":\"00000000-0000-0000-0001-000400000001\",\n               }\n            ],\n            \"StringAttribute2\":[  \n               {  \n                  \"StringAttribute_00000000-0000-0000-0000-000000003114_Id\":\"00a701a8-be4c-4b76-a6e5-3b0a4085bcc8\",\n                  \"StringAttribute_00000000-0000-0000-0000-000000003114_Value\":\"Desc\"\n               }\n            ],\n            \"StringAttribute3\":[  \n               {  \n                  \"StringAttribute_00000000-0000-0000-0000-000000000262_Id\":\"a81adfb4-7528-4673-8c95-953888f3b43a\",\n                  \"StringAttribute_00000000-0000-0000-0000-000000000262_Value\":\"meow\"\n               }\n            ],\n            \"BooleanAttribute4\":[  \n               {  \n                  \"BooleanAttribute_00000000-0000-0000-0001-000500000001_Id\":\"932c5f97-c03f-4a1a-a0c5-a518f5edef5e\",\n                  \"BooleanAttribute_00000000-0000-0000-0001-000500000001_Value\":\"true\"\n               }\n            ],\n            \"SingleValueListAttribute5\":[  \n               {  \n                  \"SingleValueListAttribute_00000000-0000-0000-0001-000500000031_Id\":\"ef51dedd-6f25-4408-99a6-5a6cfa13e198\",\n                  \"SingleValueListAttribute_00000000-0000-0000-0001-000500000031_Value\":\"Blah\"\n               }\n            ],\n            \"Relation6\":[  \n               {  \n                  \"Animal_Id\":\"2715ca09-3ced-4b74-a418-cef4a95dddf1\",\n                  \"Term7\":[  \n                     {  \n                        \"Animal_Target_Id\":\"88fd0090-4ea8-4ae6-b7f0-1b13e5cf3d74\",\n                        \"Animal_Target_DisplayName\":\"Animaltheater\",\n                        \"Animal_Target_FullName\":\"Animaltheater\"\n                     }\n                  ]\n               },\n               {  \n                  \"Animal_Id\":\"6068fe78-fc8e-4542-9aee-7b4b68760dcd\",\n                  \"Term7\":[  \n                     {  \n                        \"Animal_Target_Id\":\"4e87a614-2a8b-46c0-90f3-8a0cf9bda66c\",\n                        \"Animal_Target_DisplayName\":\"Animaltitle\",\n                        \"Animal_Target_FullName\":\"Animaltitle\"\n                     }\n                  ]\n               },\n               {  \n                  \"Animal_Id\":\"754ec0e6-19b6-4b6b-8ba1-573393268257\",\n                  \"Term7\":[  \n                     {  \n                        \"Animal_Target_Id\":\"a8986ed5-3ec8-44f3-954c-71cacb280ace\",\n                        \"Animal_Target_DisplayName\":\"Animalcustomer\",\n                        \"Animal_Target_FullName\":\"Animalcustomer\"\n                     }\n                  ]\n               },\n               {  \n                  \"Animal_Id\":\"86b3ffd1-4d54-4a98-b25b-369060651bd6\",\n                  \"Term7\":[  \n                     {  \n                        \"Animal_Target_Id\":\"89d02067-ebe8-4b87-9a1f-a6a0bdd40ec4\",\n                        \"Animal_Target_DisplayName\":\"Animalfact_transaction\",\n                        \"Animal_Target_FullName\":\"Animalfact_transaction\"\n                     }\n                  ]\n               },\n               {  \n                  \"Animal_Id\":\"ea2e1b76-f8bc-46d9-8ebc-44ffdd60f213\",\n                  \"Term7\":[  \n                     {  \n                        \"Animal_Target_Id\":\"e398cd32-1e73-46bd-8b8f-d039986d6de0\",\n                        \"Animal_Target_DisplayName\":\"Animalfact_transaction\",\n                        \"Animal_Target_FullName\":\"Animalfact_transaction\"\n                     }\n                  ]\n               }\n            ],\n            \"Relation10\":[  \n               {  \n                  \"TargetRelation_b8b178ff-e957-47db-a4e7-6e5b789d6f03_Id\":\"aff80bd0-a282-4cf5-bdcc-2bad35ddec1d\",\n                  \"Term11\":[  \n                     {  \n                        \"AnimalId\":\"3ac22167-eb91-469a-9d94-315aa301f55a\",\n                        \"AnimalDisplayName\":\"Animal\",\n                        \"AnimalFullName\":\"Animal\"\n                     }\n                  ]\n               }\n            ],\n            \"Tag12\":[  \n               {  \n                  \"Tag_Id\":\"75968ea6-4c9f-43c9-80f7-dfc41b24ec8f\",\n                  \"Tag_Name\":\"AnimalAnimaltitle\"\n               },\n               {  \n                  \"Tag_Id\":\"b1adbc00-aeef-415b-82b6-a3159145c60d\",\n                  \"Tag_Name\":\"Animal2\"\n               },\n               {  \n                  \"Tag_Id\":\"5f78e4dc-2b37-41e0-a0d3-cec773af2397\",\n                  \"Tag_Name\":\"AnimalDisplayName\"\n               }\n            ]\n         }\n      ]\n   }\n}\n</code></pre>\n\n<p>The output i am trying to get is a list of all the values from key <code>Animal_Target_DisplayName</code> like this <code>['Animaltheater','Animaltitle', 'Animalcustomer', 'Animalfact_transaction', 'Animalfact_transaction']</code> but we need to remember the nested structure of this json always changes but the keys for it are always the same.</p>\n"}, {"tags": ["python", "matlab", "pycharm"], "answers": [{"tags": [], "owner": {"reputation": 240, "user_id": 1284584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cinul.jpg?s=128&g=1", "display_name": "Farzad Amirjavid", "link": "https://stackoverflow.com/users/1284584/farzad-amirjavid"}, "is_accepted": false, "score": 1, "last_activity_date": 1547074875, "creation_date": 1547074875, "answer_id": 54119676, "question_id": 54119675, "link": "https://stackoverflow.com/questions/54119675/importerror-no-module-named-matlab-engine-how-to-import-matlab-engine-in-pycha/54119676#54119676", "title": "ImportError: No module named matlab.engine. How to import matlab.engine in Pycharm?", "body": "<p>This question is very useful for the MATLAB-Python beginners working in Pycharm. After you compile your MATLAB code into a Python package you require to introduce it to the Python. If you are coding in Pycharm (which is very popular) then it becomes to somehow tricky. I consider two types of MATLAB applications in this context. \nFirst are the applications that take no input from the master Python file. In this case, in Pycharm, go to File--> Settings --> Gear --> More --> Show all --> Show paths to the selected interpreter --> here insert the directory of the MATLAB-compiled package.\nBut using Matlab.engine is very essential and in most of the cases, you require exchange data between Python and MATLAB. There is no direct way to introduce Pycharm the Matlab.engine</p>\n\n<p>For this, go to \"edit environmental variables\" and insert such address at the <strong><em>top</em></strong>:</p>\n\n<blockquote>\n  <p>C:\\MyPythonApplication\\venv\\scrips</p>\n</blockquote>\n\n<p>See the following image:\n<a href=\"https://i.stack.imgur.com/enwPy.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/enwPy.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>By this action, we will tell the windows to consider the python.exe file inside the Python application folder to create and setup prerequisites of the MATLAB.engine</p>\n\n<p>Then open cmd running as administrator and go to your root MATLAB installation directory and find such directory:</p>\n\n<pre><code> cd C:\\Program Files\\MATLAB\\R2018a\\extern\\engines\\python\\build\\lib \n</code></pre>\n\n<p>Then type :</p>\n\n<pre><code>python setup.py install\n</code></pre>\n\n<p>Go back to  \"edit environmental variables\" and delete the address you had inserted address at the top.</p>\n\n<p>In Pycharm type:</p>\n\n<pre><code>import matlab.egine\n</code></pre>\n\n<p>Compile and it will exit the process with code 0</p>\n\n<p>Good luck</p>\n"}], "owner": {"reputation": 240, "user_id": 1284584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cinul.jpg?s=128&g=1", "display_name": "Farzad Amirjavid", "link": "https://stackoverflow.com/users/1284584/farzad-amirjavid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2929, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1569783470, "creation_date": 1547074875, "question_id": 54119675, "link": "https://stackoverflow.com/questions/54119675/importerror-no-module-named-matlab-engine-how-to-import-matlab-engine-in-pycha", "title": "ImportError: No module named matlab.engine. How to import matlab.engine in Pycharm?", "body": "<p>I want to use MATLAB in Python and I want to exchange data between Python and MATLAB. Since there is no \"matlab.engine\" in the repository search, then how do I install the matlab.engine in Pycharm? The other question how do I install a local package in Pycharm?</p>\n"}, {"tags": ["python", "selenium", "testing", "http-headers", "http-referer"], "comments": [{"owner": {"reputation": 36798, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "edited": false, "score": 3, "creation_date": 1559733244, "post_id": 54119674, "comment_id": 99510242, "body": "The issue here is a bug in the Firefox driver / Marionette. To get the <code>Referer</code>, run <code>driver.get(&quot;javascript: window.location.href = &#39;https:&#47;&#47;httpbin.org&#47;headers&#39; &quot;)</code>."}, {"owner": {"reputation": 36798, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "edited": false, "score": 2, "creation_date": 1559813094, "post_id": 54119674, "comment_id": 99539565, "body": "it&#39;s a bug since the default policy in place should not block it and mostly because it is present when the location is changed directly via the console or when the driver is switched to Chrome."}, {"owner": {"reputation": 36798, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "edited": false, "score": 0, "creation_date": 1559813667, "post_id": 54119674, "comment_id": 99539873, "body": "nope, if it was a policy defined by the gecko driver, then you wouldn&#39;t get the <code>Referer</code> when the location is changed manually in the console. My guess is that the JavaScript sandbox is somehow interfering."}], "answers": [{"comments": [{"owner": {"reputation": 4651, "user_id": 6845383, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4PKMR3Y4-Fg/AAAAAAAAAAI/AAAAAAAAAAk/GQn04TEMI4c/photo.jpg?sz=128", "display_name": "Moshe Slavin", "link": "https://stackoverflow.com/users/6845383/moshe-slavin"}, "edited": false, "score": 2, "creation_date": 1559668412, "post_id": 56447312, "comment_id": 99490468, "body": "As per your conclusion, the only way to <code>Referer</code> will be via <code>execute_script</code>?"}, {"owner": {"reputation": 1514, "user_id": 328421, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0fcceb8cbefc2b99369fe7ba676d4384?s=128&d=identicon&r=PG", "display_name": "ebeland", "link": "https://stackoverflow.com/users/328421/ebeland"}, "edited": false, "score": 2, "creation_date": 1559680972, "post_id": 56447312, "comment_id": 99495455, "body": "The BrowserMob proxy isn&#39;t actively maintained and hasn&#39;t had a release in 3 years. Might I suggest the BrowserUp Proxy <a href=\"http://browserup.com/blog/announcement-an-actively-maintained-fork-of-the-browsermob-proxy/\" rel=\"nofollow noreferrer\">browserup.com/blog/&hellip;</a>  It is a drop in replacement for the BrowserMob Proxy, but with added HTTP/2, Brotli support, Support up to Java 11 (BrowserMob only goes to 8), Modern Dependencies and active maintainers."}, {"owner": {"reputation": 36798, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "edited": false, "score": 4, "creation_date": 1559730145, "post_id": 56447312, "comment_id": 99508888, "body": "The current implementation of <code>execute_script</code> simply fails to add the <code>Referer</code> header. It has nothing to do with retrieving the headers from the conversion you are mentioning."}, {"owner": {"reputation": 7187, "user_id": 1621041, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eWGcV.png?s=128&g=1", "display_name": "finefoot", "link": "https://stackoverflow.com/users/1621041/finefoot"}, "edited": false, "score": 1, "creation_date": 1559856106, "post_id": 56447312, "comment_id": 99560583, "body": "@DebanjanB So now you changed your conclusion to &quot;It seems to be an issue with GeckoDriver/Firefox in handling the Referer header&quot;. I mean, yes, but what <i>is</i> the issue? How can I fix it? Is it desired behavior or a bug?"}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 6, "last_activity_date": 1560010656, "last_edit_date": 1560010656, "creation_date": 1559663363, "answer_id": 56447312, "question_id": 54119674, "link": "https://stackoverflow.com/questions/54119674/referer-missing-in-http-header-of-selenium-request/56447312#56447312", "title": "Referer missing in HTTP header of Selenium request", "body": "<h1><code>Referer</code> as per the MDN documentation</h1>\n\n<blockquote>\n  <p>The <code>Referer</code> request header contains the address of the previous web page from which a link to the currently requested page was followed. The <code>Referer</code> header allows servers to identify where people are visiting them from and may use that data for analytics, logging, or optimized caching, for example.</p>\n  \n  <blockquote>\n    <p>Important: Although this header has many innocent uses it can have undesirable consequences for user security and privacy.</p>\n  </blockquote>\n</blockquote>\n\n<p>Source: <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referer\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referer</a></p>\n\n<hr>\n\n<p>However:</p>\n\n<blockquote>\n  <p>A Referer header is not sent by browsers if:</p>\n  \n  <ul>\n  <li>The referring resource is a local \"file\" or \"data\" URI.</li>\n  <li>An unsecured HTTP request is used and the referring page was received with a secure protocol (HTTPS).</li>\n  </ul>\n</blockquote>\n\n<p>Source: <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referer\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referer</a></p>\n\n<hr>\n\n<h1>Privacy and security concerns</h1>\n\n<p>There are some privacy and security risks associated with the <code>Referer</code> HTTP header:</p>\n\n<blockquote>\n  <p>The <code>Referer</code> header contains the address of the previous web page from which a link to the currently requested page was followed, which can be further used for analytics, logging, or optimized caching. </p>\n</blockquote>\n\n<p>Source: <a href=\"https://developer.mozilla.org/en-US/docs/Web/Security/Referer_header:_privacy_and_security_concerns#The_referrer_problem\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/Security/Referer_header:_privacy_and_security_concerns#The_referrer_problem</a></p>\n\n<hr>\n\n<h1>Addressing the security concerns</h1>\n\n<p>From the <code>Referer</code> header perspective majority of security risks can be mitigated following the steps: </p>\n\n<blockquote>\n  <ul>\n  <li><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Referrer-Policy\" rel=\"nofollow noreferrer\"><code>Referrer-Policy</code></a>: Using the <code>Referrer-Policy</code> header on your server to control what information is sent through the Referer header. Again, a directive of no-referrer would omit the Referer header entirely.</li>\n  <li>The <code>referrerpolicy</code> attribute on HTML elements that are in danger of leaking such information (such as <code>&lt;img&gt;</code> and <code>&lt;a&gt;</code>). This can for example be set to <code>no-referrer</code> to stop the <code>Referer</code> header being sent altogether.</li>\n  <li>The <code>rel</code> attribute set to <code>noreferrer</code> on HTML elements that are in danger of leaking such information (such as <code>&lt;img&gt;</code> and <code>&lt;a&gt;</code>).</li>\n  <li>The <a href=\"https://geekthis.net/post/hide-http-referer-headers/#exit-page-redirect\" rel=\"nofollow noreferrer\">Exit Page Redirect</a> technique: This is the only method that should work at the moment without flaw is to have an exit page that you don\u2019t mind having inside of the <code>referer</code> header. Many websites implement this method, including Google and Facebook. Instead of having the referrer data show private information, it only shows the website that the user came from, if implemented correctly. Instead of the referrer data appearing as <code>http://example.com/user/foobar</code> the new referrer data will appear as <code>http://example.com/exit?url=http%3A%2F%2Fexample.com</code>. The way the method works is by having all external links on your website go to a intermediary page that then redirects to the final page. Below we have a link to the website <code>example.com</code> and we URL encode the full URL and add it to the <code>url</code> parameter of our exit page.</li>\n  </ul>\n</blockquote>\n\n<p>Sources:</p>\n\n<ul>\n<li><a href=\"https://developer.mozilla.org/en-US/docs/Web/Security/Referer_header:_privacy_and_security_concerns#How_can_we_fix_this\" rel=\"nofollow noreferrer\">https://developer.mozilla.org/en-US/docs/Web/Security/Referer_header:_privacy_and_security_concerns#How_can_we_fix_this</a></li>\n<li><a href=\"https://geekthis.net/post/hide-http-referer-headers/#exit-page-redirect\" rel=\"nofollow noreferrer\">https://geekthis.net/post/hide-http-referer-headers/#exit-page-redirect</a></li>\n</ul>\n\n<hr>\n\n<h1>This usecase</h1>\n\n<p>I have executed your code through both through GeckoDriver/Firefox and ChromeDriver/Chrome combination:</p>\n\n<h3>Code Block:</h3>\n\n<pre><code>driver.get('http://www.python.org')\nassert 'Python' in driver.title\n\nurl = 'https://httpbin.org/headers'\ndriver.execute_script('window.location.href = \"{}\";'.format(url))\nWebDriverWait(driver, 10).until(lambda driver: driver.current_url == url)\nprint(driver.page_source)\n</code></pre>\n\n<h3>Observation:</h3>\n\n<ul>\n<li><p>Using GeckoDriver/Firefox <code>Referer:  \"https://www.python.org/\"</code> header was <strong>missing</strong> as follows:</p>\n\n<pre><code>    {\n      \"headers\": {\n        \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\", \n        \"Accept-Encoding\": \"gzip, deflate, br\", \n        \"Accept-Language\": \"en-US,en;q=0.5\", \n        \"Host\": \"httpbin.org\", \n        \"Upgrade-Insecure-Requests\": \"1\", \n        \"User-Agent\": \"Mozilla/5.0 (Windows NT 6.2; Win64; x64; rv:67.0) Gecko/20100101 Firefox/67.0\"\n      }\n    }\n</code></pre></li>\n<li><p>Using ChromeDriver/Chrome <code>Referer:  \"https://www.python.org/\"</code> header was <strong>present</strong> as follows:</p>\n\n<pre><code>    {\n      \"headers\": {\n        \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3\", \n        \"Accept-Encoding\": \"gzip, deflate, br\", \n        \"Accept-Language\": \"en-US,en;q=0.9\", \n        \"Host\": \"httpbin.org\", \n        \"Referer\": \"https://www.python.org/\", \n        \"Upgrade-Insecure-Requests\": \"1\", \n        \"User-Agent\": \"Mozilla/5.0 (Windows NT 6.2; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.80 Safari/537.36\"\n      }\n    }\n</code></pre></li>\n</ul>\n\n<h3>Conclusion:</h3>\n\n<p>It seems to be an issue with GeckoDriver/Firefox in handling the <code>Referer</code> header.</p>\n\n<hr>\n\n<h1>Outro</h1>\n\n<p><a href=\"https://infosec.mozilla.org/guidelines/web_security.html#referrer-policy\" rel=\"nofollow noreferrer\">Referrer Policy</a></p>\n"}], "owner": {"reputation": 7187, "user_id": 1621041, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/eWGcV.png?s=128&g=1", "display_name": "finefoot", "link": "https://stackoverflow.com/users/1621041/finefoot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3329, "favorite_count": 0, "answer_count": 1, "score": 12, "last_activity_date": 1560010656, "creation_date": 1547074873, "last_edit_date": 1560009707, "question_id": 54119674, "link": "https://stackoverflow.com/questions/54119674/referer-missing-in-http-header-of-selenium-request", "title": "Referer missing in HTTP header of Selenium request", "body": "<p>I'm writing some tests with Selenium and noticed, that <code>Referer</code> is missing from the headers. I wrote the following minimal example to test this with <a href=\"https://httpbin.org/headers\" rel=\"nofollow noreferrer\">https://httpbin.org/headers</a>:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>import selenium.webdriver\n\noptions = selenium.webdriver.FirefoxOptions()\noptions.add_argument('--headless')\n\nprofile = selenium.webdriver.FirefoxProfile()\nprofile.set_preference('devtools.jsonview.enabled', False)\n\ndriver = selenium.webdriver.Firefox(firefox_options=options, firefox_profile=profile)\nwait = selenium.webdriver.support.ui.WebDriverWait(driver, 10)\n\ndriver.get('http://www.python.org')\nassert 'Python' in driver.title\n\nurl = 'https://httpbin.org/headers'\ndriver.execute_script('window.location.href = \"{}\";'.format(url))\nwait.until(lambda driver: driver.current_url == url)\nprint(driver.page_source)\n\ndriver.close()\n</code></pre>\n\n<p>Which prints:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;html&gt;&lt;head&gt;&lt;link rel=\"alternate stylesheet\" type=\"text/css\" href=\"resource://content-accessible/plaintext.css\" title=\"Wrap Long Lines\"&gt;&lt;/head&gt;&lt;body&gt;&lt;pre&gt;{\n  \"headers\": {\n    \"Accept\": \"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\", \n    \"Accept-Encoding\": \"gzip, deflate, br\", \n    \"Accept-Language\": \"en-US,en;q=0.5\", \n    \"Connection\": \"close\", \n    \"Host\": \"httpbin.org\", \n    \"Upgrade-Insecure-Requests\": \"1\", \n    \"User-Agent\": \"Mozilla/5.0 (X11; Ubuntu; Linux x86_64; rv:64.0) Gecko/20100101 Firefox/64.0\"\n  }\n}\n&lt;/pre&gt;&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>So there is no <code>Referer</code>. However, if I browse to any page and manually execute</p>\n\n<pre><code>window.location.href = \"https://httpbin.org/headers\"\n</code></pre>\n\n<p>in the Firefox console, <code>Referer</code> <em>does</em> appear as expected.</p>\n\n<hr>\n\n<p>As pointed out in the comments below, when using</p>\n\n<pre><code>driver.get(\"javascript: window.location.href = '{}'\".format(url))\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>driver.execute_script(\"window.location.href = '{}';\".format(url))\n</code></pre>\n\n<p>the request does include <code>Referer</code>. Also, when using Chrome instead of Firefox, both methods include <code>Referer</code>.</p>\n\n<p>So the main question still stands: Why is <code>Referer</code> missing in the request when sent with Firefox as described above?</p>\n"}, {"tags": ["python", "python-2.7", "matlab", "signal-processing", "bandpass-filter"], "comments": [{"owner": {"reputation": 106322, "user_id": 2586922, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/rFMSx.png?s=128&g=1", "display_name": "Luis Mendo", "link": "https://stackoverflow.com/users/2586922/luis-mendo"}, "edited": false, "score": 2, "creation_date": 1547077995, "post_id": 54119670, "comment_id": 95072526, "body": "In Matlab, I would try <code>butter</code> to design the filter. Use zero-pole-gain output (rather than numerator and denominator of transfer function, which cause numerical instability even for low filter orders). Then convert to SOS format. Then you can use <code>filtfilt</code>, which applies the filter twice: normally and time-reversed. That ensures linear phase; it also effectively doubles the filter order and squares the absolute value of the transfer function. See the examples <a href=\"https://www.mathworks.com/help/signal/ref/butter.html\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://www.mathworks.com/help/signal/ref/filtfilt.html\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 989, "user_id": 6534215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kSf1u.png?s=128&g=1", "display_name": "Mouse On Mars", "link": "https://stackoverflow.com/users/6534215/mouse-on-mars"}, "edited": false, "score": 1, "creation_date": 1547079803, "post_id": 54119670, "comment_id": 95072961, "body": "Designing and applying a filter is a good approach when you want to filter some signal in real-time. If you are just interested in manipulating a certain chunk of a signal, it might be worthwhile to apply a window before doing a FFT and then simply set the undesired frequency bins to zero and transform the manipulated spectrum back to the time domain via the IFFT. In a sense, this approach is like applying a perfect low-pass filter to your signal."}, {"owner": {"reputation": 890, "user_id": 1971254, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8dff409464c507258b4b89b22c6f8c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Rickson", "link": "https://stackoverflow.com/users/1971254/rickson"}, "reply_to_user": {"reputation": 106322, "user_id": 2586922, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/rFMSx.png?s=128&g=1", "display_name": "Luis Mendo", "link": "https://stackoverflow.com/users/2586922/luis-mendo"}, "edited": false, "score": 0, "creation_date": 1547098756, "post_id": 54119670, "comment_id": 95076807, "body": "These are very interesting approaches. However, I do need to filter in real-time since I need to have a new signal which only consists of the 40 Hz component of the original signal for further processing. Not only a chunk of the original signal. I will try to implement it as suggested by @LuisMendo for further discussion."}, {"owner": {"reputation": 106322, "user_id": 2586922, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/rFMSx.png?s=128&g=1", "display_name": "Luis Mendo", "link": "https://stackoverflow.com/users/2586922/luis-mendo"}, "edited": false, "score": 0, "creation_date": 1547111226, "post_id": 54119670, "comment_id": 95081692, "body": "The real-time requirement changes everything. It wasn\u2019t clear in the question that you needed real time. In that case I can\u2019t offer any help"}, {"owner": {"reputation": 890, "user_id": 1971254, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8dff409464c507258b4b89b22c6f8c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Rickson", "link": "https://stackoverflow.com/users/1971254/rickson"}, "edited": false, "score": 0, "creation_date": 1547111926, "post_id": 54119670, "comment_id": 95082075, "body": "Sorry, I think I got this wrong. What I mean is I have captured the signal and then want to post-process it such that the new signal will only have the 40 Hz component of the original signal but the same time base and linear phase. However, I need to process the whole signal and not only a chunk of it."}, {"owner": {"reputation": 989, "user_id": 6534215, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kSf1u.png?s=128&g=1", "display_name": "Mouse On Mars", "link": "https://stackoverflow.com/users/6534215/mouse-on-mars"}, "edited": false, "score": 0, "creation_date": 1547145110, "post_id": 54119670, "comment_id": 95101196, "body": "I think my comment mentioning a &quot;chunk&quot; was misleading. What I meant was that you can simply use a FFT/IFFT to postprocess the whole signal you recorded. In contrast if you want to build a system which continuously filters a signal that is sampled in real-time (like from a microphone or any data source/sensor) that you might want to design a filter and do your best to suppress the undesired frequencies in your signal."}, {"owner": {"reputation": 890, "user_id": 1971254, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8dff409464c507258b4b89b22c6f8c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Rickson", "link": "https://stackoverflow.com/users/1971254/rickson"}, "edited": false, "score": 0, "creation_date": 1547164685, "post_id": 54119670, "comment_id": 95108695, "body": "Thank you for the clarification. In that case I will try out both recommend approaches."}], "answers": [{"tags": [], "owner": {"reputation": 491, "user_id": 8443371, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2Uc40Hai2U0/AAAAAAAAAAI/AAAAAAAAAAA/zTkPRnZJTXs/photo.jpg?sz=128", "display_name": "Gideon Kogan", "link": "https://stackoverflow.com/users/8443371/gideon-kogan"}, "is_accepted": false, "score": 1, "last_activity_date": 1547553538, "creation_date": 1547553538, "answer_id": 54198392, "question_id": 54119670, "link": "https://stackoverflow.com/questions/54119670/bandpass-filtering-at-low-frequencies/54198392#54198392", "title": "Bandpass filtering at low frequencies", "body": "<p>Design a narrow band pass filter using: <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.iirpeak.html\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.iirpeak.html</a>\nand then implement it on the signal using the a forward-backward filter, filtfilt:\n<a href=\"https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.signal.filtfilt.html\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.signal.filtfilt.html</a>.</p>\n\n<p>The forward-backward filtering requires sectioning of the signal but you can always produce sections with a large overlap.</p>\n"}], "owner": {"reputation": 890, "user_id": 1971254, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8dff409464c507258b4b89b22c6f8c9a?s=128&d=identicon&r=PG&f=1", "display_name": "Rickson", "link": "https://stackoverflow.com/users/1971254/rickson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 280, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1547553538, "creation_date": 1547074855, "question_id": 54119670, "link": "https://stackoverflow.com/questions/54119670/bandpass-filtering-at-low-frequencies", "title": "Bandpass filtering at low frequencies", "body": "<p>I would like to know if there is any best practice to solve the following problem which I think may be of general interest.</p>\n\n<p>I have a signal sampled with 40 kHz for about 60s. That signal contains frequencies up to 5kHz but I am only interested in its 40 Hz component.</p>\n\n<p>How can I get a stable, narrow bandpass filtered (around 40 Hz) signal which also has the same time base as the original signal (zero lag). The filter should also have a linear phase.</p>\n\n<p>Computational efforts are not an issue.</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 3, "creation_date": 1547075509, "post_id": 54119634, "comment_id": 95071961, "body": "base on your description why last line is 1811 not 51811"}], "answers": [{"tags": [], "owner": {"reputation": 600, "user_id": 2406949, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/k7bdN.png?s=128&g=1", "display_name": "PookyFan", "link": "https://stackoverflow.com/users/2406949/pookyfan"}, "is_accepted": false, "score": -1, "last_activity_date": 1547075716, "creation_date": 1547075716, "answer_id": 54119815, "question_id": 54119634, "link": "https://stackoverflow.com/questions/54119634/slicing-strings-in-a-data-frame/54119815#54119815", "title": "Slicing strings in a data frame", "body": "<p>A simple regex seems to work well:</p>\n\n<pre><code>/[A-Z]\\d(\\d+)\\./\n</code></pre>\n\n<p>It will also take care of case where CAE51811 should output 1811 but not 51811.</p>\n"}, {"tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 1, "last_activity_date": 1547076220, "creation_date": 1547076220, "answer_id": 54119901, "question_id": 54119634, "link": "https://stackoverflow.com/questions/54119634/slicing-strings-in-a-data-frame/54119901#54119901", "title": "Slicing strings in a data frame", "body": "<p>You can use a regular expression to match the last continuous sequence of numbers between the last space of a string and the last period of a string.  Use:</p>\n\n<pre><code>\\s[^\\s]+?(\\d+)\\.[^\\.]+?$\n</code></pre>\n\n<hr>\n\n<h3><code>str.extract</code></h3>\n\n<pre><code>df['string'].str.extract(r'\\s[^\\s]+?(\\d+)\\.[^\\.]+?$')\n</code></pre>\n\n<p></p>\n\n<pre><code>        0\n0  181004\n1  181004\n2  181004\n3  181106\n4  181106\n5  190102\n6  190103\n7   51811\n</code></pre>\n\n<hr>\n\n<p>As has been noted in the comments your last line should be <code>51811</code>, or else you are not using a consistent rule throughout your DataFrame.</p>\n\n<hr>\n\n<p><strong><em>Regex Explanation</em></strong></p>\n\n<pre><code>\\s                    # match a whitespace character\n[^\\s]+?               # match a non whitespace character between 1 and unlimited times, lazy\n(                     # start of matching group 1\n  \\d+                 # match 1 or more digits          \n)         \n\\.                    # match a period character\n[^\\.]+?               # match a non period character one to unlimited times, lazy\n$                     # assert position at end of line\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 539, "user_id": 9962315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/009fb19742d5a04ab032b216da15ffac?s=128&d=identicon&r=PG", "display_name": "Michael Stachura", "link": "https://stackoverflow.com/users/9962315/michael-stachura"}, "is_accepted": false, "score": 0, "last_activity_date": 1547077711, "creation_date": 1547077711, "answer_id": 54120102, "question_id": 54119634, "link": "https://stackoverflow.com/questions/54119634/slicing-strings-in-a-data-frame/54120102#54120102", "title": "Slicing strings in a data frame", "body": "<p>You can use regular expression like this one: <a href=\"https://stackoverflow.com/a/54119901/9962315\">https://stackoverflow.com/a/54119901/9962315</a></p>\n\n<p>or use code below, it also works fine with your data.</p>\n\n<pre><code>strToCheck = '10 30067    10224     1613788 Nov 07 01:55 USE4D181106.XBET'\nthe_date = ''\n\n# step 1 - get the last substring with 'the_date' parameter\ntest = strToCheck.split(' ')[-1].split('.')[0]\n\n# step 2 - loop test string and build right 'the_date' parameter \nfor char in reversed(test):\n    try:\n        int(char)\n        the_date = char+the_date\n    except ValueError:\n        break\nprint(the_date)\n</code></pre>\n"}], "owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 54119901, "answer_count": 3, "score": 2, "last_activity_date": 1549403982, "creation_date": 1547074638, "last_edit_date": 1549403982, "question_id": 54119634, "link": "https://stackoverflow.com/questions/54119634/slicing-strings-in-a-data-frame", "title": "Slicing strings in a data frame", "body": "<p>I have a data frame that looks like this (before).  </p>\n\n<pre><code>BEFORE:\nstring\nOct 05 \n190103  \n</code></pre>\n\n<p>How can I make it look like this (after)?</p>\n\n<pre><code>AFTER:\nstring                                  the_date\nOct 05                                  181005\n190103                                  190103\n</code></pre>\n"}, {"tags": ["python", "opencv", "tesseract", "python-tesseract"], "comments": [{"owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 2, "creation_date": 1547100902, "post_id": 54119597, "comment_id": 95077375, "body": "Can you attach the sample <code>H.png</code> and the corresponding canny edge output ?"}], "answers": [{"comments": [{"owner": {"reputation": 1836, "user_id": 8368351, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/cA0x6.png?s=128&g=1", "display_name": "lucians", "link": "https://stackoverflow.com/users/8368351/lucians"}, "edited": false, "score": 0, "creation_date": 1547821982, "post_id": 54134751, "comment_id": 95335951, "body": "Hi.  Can you explain why this should work (I have not tested by myself)? Thanks"}, {"owner": {"reputation": 536, "user_id": 209306, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CrkB9.jpg?s=128&g=1", "display_name": "Neeraj Gulia", "link": "https://stackoverflow.com/users/209306/neeraj-gulia"}, "edited": false, "score": 0, "creation_date": 1549001511, "post_id": 54134751, "comment_id": 95755166, "body": "--psm 10 means: Treat the image as a single character. <a href=\"https://github.com/tesseract-ocr/tesseract/wiki/Command-Line-Usage\" rel=\"nofollow noreferrer\">github.com/tesseract-ocr/tesseract/wiki/Command-Line-Usage</a>"}], "tags": [], "owner": {"reputation": 123, "user_id": 8746142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eef4267dc7cc7c948eb685f664f05af6?s=128&d=identicon&r=PG&f=1", "display_name": "QuarKUS7", "link": "https://stackoverflow.com/users/8746142/quarkus7"}, "is_accepted": true, "score": 4, "last_activity_date": 1547144431, "creation_date": 1547144431, "answer_id": 54134751, "question_id": 54119597, "link": "https://stackoverflow.com/questions/54119597/pytesseract-does-not-recognize-when-its-just-a-letter/54134751#54134751", "title": "Pytesseract does not recognize when it&#39;s just a letter", "body": "<p>Try the following:</p>\n\n<pre><code>    text = pytesseract.image_to_string(img_new, lang='eng', config='--psm 10')\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 10788460, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-MBucFNggaZQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gpMDulK9MI8P6JR_2K8N4tWqKsVQ/mo/photo.jpg?sz=128", "display_name": "Bernardo Martins", "link": "https://stackoverflow.com/users/10788460/bernardo-martins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1441, "favorite_count": 0, "accepted_answer_id": 54134751, "answer_count": 1, "score": 3, "last_activity_date": 1547144431, "creation_date": 1547074450, "question_id": 54119597, "link": "https://stackoverflow.com/questions/54119597/pytesseract-does-not-recognize-when-its-just-a-letter", "title": "Pytesseract does not recognize when it&#39;s just a letter", "body": "<p>I need to recognize only one letter </p>\n\n<p>But OCR does not recognize when it's just a letter!</p>\n\n<p>in this case I am trying to recognize the letter H but nothing shows up !!\nWhat can I do to make him recognize?</p>\n\n<pre><code>from PIL import Image\nfrom pytesseract import *\nimport cv2\nimg = cv2.imread('H.png',0)\nedges = cv2.Canny(img,100,200)\nimg_new = Image.fromarray(edges)\ntext = pytesseract.image_to_string(img_new, lang='eng')\nprint (text)\n</code></pre>\n"}, {"tags": ["python", "bash", "sh"], "answers": [{"comments": [{"owner": {"reputation": 4351, "user_id": 1996639, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ZYXbh.jpg?s=128&g=1", "display_name": "zella", "link": "https://stackoverflow.com/users/1996639/zella"}, "edited": false, "score": 0, "creation_date": 1547075133, "post_id": 54119611, "comment_id": 95071869, "body": "Yes. But this solution force me to use double quotes."}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "reply_to_user": {"reputation": 4351, "user_id": 1996639, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ZYXbh.jpg?s=128&g=1", "display_name": "zella", "link": "https://stackoverflow.com/users/1996639/zella"}, "edited": false, "score": 1, "creation_date": 1547075179, "post_id": 54119611, "comment_id": 95071883, "body": "Why is that a problem?"}, {"owner": {"reputation": 4351, "user_id": 1996639, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ZYXbh.jpg?s=128&g=1", "display_name": "zella", "link": "https://stackoverflow.com/users/1996639/zella"}, "edited": false, "score": 0, "creation_date": 1547075384, "post_id": 54119611, "comment_id": 95071933, "body": "Because I already have some python code, and not able to edit it"}, {"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 1, "creation_date": 1547075922, "post_id": 54119611, "comment_id": 95072072, "body": "Please include these sorts of things into your future questions. Also this is only part of the answer we&#39;re looking for anyways. What exactly do you mean by &quot;some python code&quot; and the fact that you cannot edit it?"}], "tags": [], "owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "is_accepted": false, "score": 0, "last_activity_date": 1547074507, "creation_date": 1547074507, "answer_id": 54119611, "question_id": 54119573, "link": "https://stackoverflow.com/questions/54119573/how-to-escape-escaped-quote-in-bash/54119611#54119611", "title": "How to escape escaped quote in bash", "body": "<p>Using escaped double quotes in the <code>print</code> should work:</p>\n\n<pre><code>python3 -c $'import sys\\nfor r in range(10): print(\\\"I\\'m rob\\\")'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "is_accepted": true, "score": 2, "last_activity_date": 1547075578, "last_edit_date": 1547075578, "creation_date": 1547074923, "answer_id": 54119683, "question_id": 54119573, "link": "https://stackoverflow.com/questions/54119573/how-to-escape-escaped-quote-in-bash/54119683#54119683", "title": "How to escape escaped quote in bash", "body": "<p>How would you write that string in Python? If you wanted to keep it in single quotes, it would be something like:</p>\n\n<pre><code>print('I\\'m rob')\n</code></pre>\n\n<p>...so that would become, inside a <code>$''</code>-quoted string, something like:</p>\n\n<pre><code>print(\\'I\\\\\\'m rob\\')\n</code></pre>\n\n<p>...once you escape both the quotes <em>and the literal backslash</em> parsed by the Python interpreter as protection for the internal quote. Thus:</p>\n\n<pre><code>python3 -c $'import sys\\nfor r in range(10): print(\\'I\\\\\\'m rob\\')'\n</code></pre>\n\n<hr>\n\n<p>By the way -- there's no good reason to do this by hand when you can ask the shell to do it for you:</p>\n\n<pre><code>script=$(cat &lt;&lt;'EOF'\nimport sys\nfor r in range(10):\n  print('I\\'m rob')\nEOF\n)\n\nprintf '%q ' python3 -c \"$script\"; printf '\\n'\n</code></pre>\n\n<p>...emits:</p>\n\n<pre><code>python3 -c $'import sys\\nfor r in range(10):\\n  print(\\'I\\\\\\'m rob\\')'\n</code></pre>\n\n<p>...which you can actually run as code. (Or you could just run <code>python3 -c \"$script\"</code> after the above heredoc-based definition, which will invoke your script without ever needing to involve a hand-escaped copy of the code anywhere).</p>\n"}, {"comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1547075639, "post_id": 54119720, "comment_id": 95072000, "body": "Why escape the double quotes when they&#39;re inside ANSI-C-style quoting? <code>echo $&#39;&quot;&#39;</code> emits <code>&quot;</code> without needing to make it <code>$&#39;\\&quot;&#39;</code>."}], "tags": [], "owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "is_accepted": false, "score": 0, "last_activity_date": 1547075988, "last_edit_date": 1547075988, "creation_date": 1547075234, "answer_id": 54119720, "question_id": 54119573, "link": "https://stackoverflow.com/questions/54119573/how-to-escape-escaped-quote-in-bash/54119720#54119720", "title": "How to escape escaped quote in bash", "body": "<p>As per @pault said but with further  explanation.</p>\n\n<p>This isn't working because you're ending the string and starting over by putting the quotes in, that's because you used a single quote to denounce the string. This can be easily remedied by using double quotes to denounce the string.</p>\n\n<pre><code>python3 -c $'import sys\\nfor r in range(10): print(\"I\\'m rob\")'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1547142497, "creation_date": 1547142497, "answer_id": 54134290, "question_id": 54119573, "link": "https://stackoverflow.com/questions/54119573/how-to-escape-escaped-quote-in-bash/54134290#54134290", "title": "How to escape escaped quote in bash", "body": "<p>If you aren't using any other arguments for the Python script, pass the string as an argument to reduce the amount of nested quoting you need.</p>\n\n<pre><code>python3 -c $'import sys\\nfor r in range(1): print(sys.argv[1])' \"I'm a rob\"\n</code></pre>\n"}], "owner": {"reputation": 4351, "user_id": 1996639, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ZYXbh.jpg?s=128&g=1", "display_name": "zella", "link": "https://stackoverflow.com/users/1996639/zella"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 54119683, "answer_count": 4, "score": 0, "last_activity_date": 1547142497, "creation_date": 1547074342, "question_id": 54119573, "link": "https://stackoverflow.com/questions/54119573/how-to-escape-escaped-quote-in-bash", "title": "How to escape escaped quote in bash", "body": "<p>I try to run python code with \"c\" parameter:</p>\n\n<pre><code>python3 -c $'import sys\\nfor r in range(1): print(\\'rob\\')'\n</code></pre>\n\n<p>It's worked, prints </p>\n\n<pre><code>rob\n</code></pre>\n\n<p>But i want to print quote:</p>\n\n<pre><code>I'm a rob\n</code></pre>\n\n<p>This not worked of course:</p>\n\n<pre><code>python3 -c $'import sys\\nfor r in range(10): print(\\'I'm rob\\')'\n</code></pre>\n\n<p>How to achieve that?</p>\n"}, {"tags": ["python", "django", "pycharm", "migration", "database-migration"], "comments": [{"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 1, "creation_date": 1547074819, "post_id": 54119560, "comment_id": 95071785, "body": "<code>sqlmigrate</code> just prints out the SQL for the migration. Use <code>migrate</code> to actually run the migration."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "reply_to_user": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1547074963, "post_id": 54119560, "comment_id": 95071818, "body": "Doh!  Thanks, taht was it."}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 6, "favorite_count": 0, "closed_date": 1547074779, "answer_count": 0, "score": 0, "last_activity_date": 1547074304, "creation_date": 1547074304, "question_id": 54119560, "link": "https://stackoverflow.com/questions/54119560/why-isnt-my-migration-run-from-pycharm-affecting-my-local-db", "closed_reason": "Duplicate", "title": "Why isn&#39;t my migration run from PyCharm affecting my local db?", "body": "<p>I'm using PyCharm 2018.2 with Python 3.7.  I have defined my database in my settings.py file ...</p>\n\n<pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.postgresql',\n        'NAME': 'mainsite',\n        'USER': 'mainsite',\n        'PASSWORD': 'password',\n        'HOST': 'localhost',\n        'PORT': '5432'\n    }\n}\n</code></pre>\n\n<p>And using \"Option + R\" on my Mac, I can bring up the \"manage.py\" console, where I wish to run a migration.  I do so by running the following.  It appears to be successful ...</p>\n\n<pre><code>manage.py@mainsite_project &gt; sqlmigrate mainsite 0002\nbash -cl \"/Users/davea/Documents/workspace/mainsite_project/venv/bin/python /Applications/PyCharm.app/Contents/helpers/pycharm/django_manage.py sqlmigrate mainsite 0002 /Users/davea/Documents/workspace/mainsite_project\"\nTracking file by folder pattern:  migrations\n/Users/davea/Documents/workspace/mainsite_project/venv/lib/python3.7/site-packages/psycopg2/__init__.py:144: UserWarning: The psycopg2 wheel package will be renamed from release 2.8; in order to keep installing from binary please use \"pip install psycopg2-binary\" instead. For details see: &lt;http://initd.org/psycopg/docs/install.html#binary-install-from-pypi&gt;.\n  \"\"\")\nBEGIN;\n--\n-- Add field url to article\n--\nALTER TABLE \"mainsite_article\" ADD COLUMN \"url\" text DEFAULT '' NOT NULL;\nALTER TABLE \"mainsite_article\" ALTER COLUMN \"url\" DROP DEFAULT;\nCOMMIT;\nProcess finished with exit code 0\n</code></pre>\n\n<p>However, when I look at my database locally, I don't see the extra column added in there ...</p>\n\n<pre><code>mainsite=&gt; \\d mainsite_article;\n\n                                     Table \"public.mainsite_article\"\n    Column    |           Type           |                           Modifiers                            \n--------------+--------------------------+----------------------------------------------------------------\n id           | integer                  | not null default nextval('mainsite_article_id_seq'::regclass)\n path         | character varying(100)   | not null\n time         | timestamp with time zone | not null\n votes        | integer                  | not null\n comments     | integer                  | not null\n main_page    | boolean                  | not null\nIndexes:\n    \"mainsite_article_pkey\" PRIMARY KEY, btree (id)\nReferenced by:\n    TABLE \"mainsite_mainsitestat\" CONSTRAINT \n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 6107, "user_id": 7851470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d10f0dc1bc1f340708d6f6b4c8ec3866?s=128&d=identicon&r=PG&f=1", "display_name": "Georgy", "link": "https://stackoverflow.com/users/7851470/georgy"}, "edited": false, "score": 1, "creation_date": 1547074631, "post_id": 54119559, "comment_id": 95071729, "body": "You forgot the colon. It should be <code>def isUF2(buf):</code>"}], "answers": [{"tags": [], "owner": {"reputation": 115, "user_id": 10696411, "user_type": "registered", "profile_image": "https://graph.facebook.com/1763008507326841/picture?type=large", "display_name": "Jundullah", "link": "https://stackoverflow.com/users/10696411/jundullah"}, "is_accepted": false, "score": 0, "last_activity_date": 1547075323, "creation_date": 1547075323, "answer_id": 54119737, "question_id": 54119559, "link": "https://stackoverflow.com/questions/54119559/syntaxerror-invalid-syntax-def-isuf2buf/54119737#54119737", "title": "SyntaxError: invalid syntax. &gt; def isUF2(buf)", "body": "<p><strong>Correct syntax:</strong></p>\n\n<pre><code>appstartaddr = 0x2000\n\ndef isUF2(buf): # \":\" cause error!\n\n    w = struct.unpack(II, buf[08])\n\n    return w[0] == UF2_MAGIC_START0 and w[1] == UF2_MAGIC_START1\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10892283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6338063ae20d4ac61e73bed22db0879?s=128&d=identicon&r=PG&f=1", "display_name": "user10892283", "link": "https://stackoverflow.com/users/10892283/user10892283"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1547080898, "creation_date": 1547074301, "last_edit_date": 1547080898, "question_id": 54119559, "link": "https://stackoverflow.com/questions/54119559/syntaxerror-invalid-syntax-def-isuf2buf", "title": "SyntaxError: invalid syntax. &gt; def isUF2(buf)", "body": "<p>Problem with line of code, Syntax Error. Line |def isUF2(buf)|. </p>\n\n<p>Python file is to convert bin file to a uf2 file.</p>\n\n<p>cmd code done in file directory|python(2 and 3 were tested) pythonfile.py binfile.bin|</p>\n\n<p>error that pops up\n File \"pythonfile.py\", line 19\n    def isUF2(buf)\n                 ^\nSyntaxError: invalid syntax</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>appstartaddr = 0x2000\n\ndef isUF2(buf)\n\n    w = struct.unpack(II, buf[08])\n\n    return w[0] == UF2_MAGIC_START0 and w[1] == UF2_MAGIC_START1\n</code></pre>\n\n<p>I kept getting the error using python 2.7 and python 3.x. </p>\n\n<p>The result of this code (the hole file) is to convert a file (.bin to .uf2)</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10817, "user_id": 917548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bbc7f5755f5f6bacceedd955404214a?s=128&d=identicon&r=PG", "display_name": "Roger Lindsj&#246;", "link": "https://stackoverflow.com/users/917548/roger-lindsj%c3%b6"}, "edited": false, "score": 1, "creation_date": 1547074699, "post_id": 54119533, "comment_id": 95071746, "body": "What do you expect the program to do once currentpos reaches 11? Right now you just start over from 0. You probably want to break out of the inner loop also."}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 1, "creation_date": 1547075547, "post_id": 54119533, "comment_id": 95071971, "body": "Just a word of advice: Try to have meaningful variable names and if they are multiple words, separate them using <code>_</code>. Although <code>currentpos</code> isn&#39;t the worst, unenckey or enc are weird imo. Would help you when debugging / reading through code."}], "answers": [{"tags": [], "owner": {"reputation": 2380, "user_id": 8569209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NuCe6.png?s=128&g=1", "display_name": "Rob Kwasowski", "link": "https://stackoverflow.com/users/8569209/rob-kwasowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1547074720, "creation_date": 1547074720, "answer_id": 54119648, "question_id": 54119533, "link": "https://stackoverflow.com/questions/54119533/having-a-hard-time-with-for-loops/54119648#54119648", "title": "Having a hard time with &#39;For&#39; Loops", "body": "<p>You just have to remove the <code>while</code> loop. You've put <code>while True</code>, so that's what causes it to go on forever. Change it to this:</p>\n\n<pre><code>currentpos = 0\nunenckey = ['a', 'e', 'f', 'h', 'i', 'k', 'm', 'o', 'r', 's', 't', 'w']\nenc = \"ztxhcccczxbatnnsqhlllowqtdhdzxveqmvbanmfxzibbaqwojrdkls\"\nfor unenc in enc:\n    if unenc == unenckey[currentpos]:\n        currentpos = 0\n        print(unenc)\n        break\n    elif unenc == 'q':\n        print(' ')\n        break\n    else:\n        if currentpos == 11:\n            currentpos = 0\n        if currentpos != 11:\n            currentpos = currentpos + 1\n            continue\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 10891890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d490e4587a5897228a56ee2e402523?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro A", "link": "https://stackoverflow.com/users/10891890/alejandro-a"}, "edited": false, "score": 0, "creation_date": 1547075073, "post_id": 54119691, "comment_id": 95071853, "body": "I understand that you are trying to print the chars of enc that appears also on unenckey, is that correct?"}], "tags": [], "owner": {"reputation": 1, "user_id": 10891890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2d490e4587a5897228a56ee2e402523?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro A", "link": "https://stackoverflow.com/users/10891890/alejandro-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1547074974, "creation_date": 1547074974, "answer_id": 54119691, "question_id": 54119533, "link": "https://stackoverflow.com/questions/54119533/having-a-hard-time-with-for-loops/54119691#54119691", "title": "Having a hard time with &#39;For&#39; Loops", "body": "<pre><code>currentpos = 0\nunenckey = ['a', 'e', 'f', 'h', 'i', 'k', 'm', 'o', 'r', 's', 't', 'w']\nenc = \"ztxhcccczxbatnnsqhlllowqtdhdzxveqmvbanmfxzibbaqwojrdkls\"\n\nfor char in enc:\n    if char in unenckey:\n        print(char)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5380, "user_id": 10618540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Od4aq.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/10618540/paritosh-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1547075031, "creation_date": 1547075031, "answer_id": 54119697, "question_id": 54119533, "link": "https://stackoverflow.com/questions/54119533/having-a-hard-time-with-for-loops/54119697#54119697", "title": "Having a hard time with &#39;For&#39; Loops", "body": "<p>Your inner loop got stuck on characters which are not found because you never used a <code>break</code> on reaching currentpos ==11. You had most of the logic figured out spot on. Just fixing that ends up with the following:</p>\n\n<pre><code>currentpos = 0\nunenckey = ['a', 'e', 'f', 'h', 'i', 'k', 'm', 'o', 'r', 's', 't', 'w']\nenc = \"ztxhcccczxbatnnsqhlllowqtdhdzxveqmvbanmfxzibbaqwojrdkls\"\nfor unenc in enc: \n    while True:\n        if unenc == unenckey[currentpos]:\n            currentpos = 0\n            print(unenc)\n            break\n        elif unenc == 'q':\n            print(' ')\n            break\n        else:\n            if currentpos == 11:\n                currentpos = 0\n                break #modified\n            if currentpos != 11:\n                currentpos = currentpos + 1\n                continue\n</code></pre>\n\n<p>I'm afraid the \"mamfia\" doesn't quite work that way though. Alas. :)</p>\n\n<p>As you get more comfortable with the basic structure, you can use some of the power of python in the <code>in</code> operator to check if each letter exists in the unenckey directly.</p>\n\n<pre><code>unenckey = ['a', 'e', 'f', 'h', 'i', 'k', 'm', 'o', 'r', 's', 't', 'w']\nenc = \"ztxhcccczxbatnnsqhlllowqtdhdzxveqmvbanmfxzibbaqwojrdkls\"\nfor unenc in enc:\n    if unenc == 'q':\n        print(' ')\n    elif unenc in unenckey:\n        print(unenc)\n    else:\n        pass\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1807, "user_id": 6947349, "user_type": "registered", "profile_image": "https://graph.facebook.com/1682570098663073/picture?type=large", "display_name": "Samuel Nde", "link": "https://stackoverflow.com/users/6947349/samuel-nde"}, "is_accepted": false, "score": 0, "last_activity_date": 1547075278, "creation_date": 1547075278, "answer_id": 54119725, "question_id": 54119533, "link": "https://stackoverflow.com/questions/54119533/having-a-hard-time-with-for-loops/54119725#54119725", "title": "Having a hard time with &#39;For&#39; Loops", "body": "<p>Do you want to ensure that your <code>while loop</code> always <code>break</code>s by updating your code as follow?</p>\n\n<pre><code>currentpos = 0\nunenckey = ['a', 'e', 'f', 'h', 'i', 'k', 'm', 'o', 'r', 's', 't', 'w']\nenc = \"ztxhcccczxbatnnsqhlllowqtdhdzxveqmvbanmfxzibbaqwojrdkls\"\nfor unenc in enc: \n    #print(unenc)\n    while True:\n        if unenc == unenckey[currentpos]:\n            currentpos = 0\n            print(unenc)\n            break\n        elif unenc == 'q':\n            print(' ')\n            break\n        else:\n            if currentpos == 11:\n                currentpos = 0\n            if currentpos != 11:\n                currentpos = currentpos + 1\n                break #Make sure your while loop breaks!\n</code></pre>\n\n<p>The truth of the matter is <b> there is actually no need for the while loop`</b>  if we will always end it with a <b> break</b>. I am just leaving it there because you have indicated that this is for educational purpose.</p>\n"}], "owner": {"reputation": 13, "user_id": 10892388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3f8bf40eaf96f85439ea89439234eb9?s=128&d=identicon&r=PG", "display_name": "xXGokyXx", "link": "https://stackoverflow.com/users/10892388/xxgokyxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 54119697, "answer_count": 4, "score": 0, "last_activity_date": 1547075278, "creation_date": 1547074177, "question_id": 54119533, "link": "https://stackoverflow.com/questions/54119533/having-a-hard-time-with-for-loops", "title": "Having a hard time with &#39;For&#39; Loops", "body": "<p>I am new to Python and learning about 'For' loops. What I am trying to do is use a for loop to go through some letters I set in a variable then print specific letters to make a message.</p>\n\n<p>I have gotten multiple errors with basically everything I do and I am now just looking for an example of how to do it the right way.</p>\n\n<pre><code>currentpos = 0\nunenckey = ['a', 'e', 'f', 'h', 'i', 'k', 'm', 'o', 'r', 's', 't', 'w']\nenc = \"ztxhcccczxbatnnsqhlllowqtdhdzxveqmvbanmfxzibbaqwojrdkls\"\nfor unenc in enc: \n    while True:\n        if unenc == unenckey[currentpos]:\n            currentpos = 0\n            print(unenc)\n            break\n        elif unenc == 'q':\n            print(' ')\n            break\n        else:\n            if currentpos == 11:\n                currentpos = 0\n            if currentpos != 11:\n                currentpos = currentpos + 1\n                continue\n</code></pre>\n\n<p>It just goes on forever and I am not sure what to do. </p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1547074254, "post_id": 54119510, "comment_id": 95071615, "body": "<code>self.ents_room</code> and <code>room1</code> are two names for the same list-of-lists - assignment in Python <i>never</i> copies anything."}, {"owner": {"reputation": 13, "user_id": 10891829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P1vDwESZUYE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY2HNy7ZMw9DG5_16ckRZ90IvTazg/mo/photo.jpg?sz=128", "display_name": "John C. Jameson", "link": "https://stackoverflow.com/users/10891829/john-c-jameson"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1547074645, "post_id": 54119510, "comment_id": 95071733, "body": "I tried removing room1 and directly passing the list-of-lists to the class, but that did not change the behavior of the function."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1547075634, "post_id": 54119510, "comment_id": 95071998, "body": "all your lists are referring to the same list. You have comments which claim &quot;saves a new version of the room array for ...&quot; but the comments are false. Reread jasonharper&#39;s comment. A quick fix might be &quot;whatever = list(room)&quot; but I have not tested it."}, {"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1547076911, "post_id": 54119510, "comment_id": 95072307, "body": "ah, list of list. self.ents_room = [list(x) for x in room]"}, {"owner": {"reputation": 13, "user_id": 10891829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P1vDwESZUYE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY2HNy7ZMw9DG5_16ckRZ90IvTazg/mo/photo.jpg?sz=128", "display_name": "John C. Jameson", "link": "https://stackoverflow.com/users/10891829/john-c-jameson"}, "edited": false, "score": 0, "creation_date": 1547079028, "post_id": 54119510, "comment_id": 95072763, "body": "I fixed it by slicing the list to create a new list with a new id"}], "owner": {"reputation": 13, "user_id": 10891829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P1vDwESZUYE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY2HNy7ZMw9DG5_16ckRZ90IvTazg/mo/photo.jpg?sz=128", "display_name": "John C. Jameson", "link": "https://stackoverflow.com/users/10891829/john-c-jameson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1547074581, "answer_count": 0, "score": 1, "last_activity_date": 1547074616, "creation_date": 1547074042, "question_id": 54119510, "link": "https://stackoverflow.com/questions/54119510/variable-assignment-inside-a-four-loop-changing-other-variable-in-the-class", "closed_reason": "Duplicate", "title": "variable assignment inside a four loop changing other variable in the class", "body": "<p>I assigned two variables in the <strong>init</strong> function of my class. I then set the second variable, self.ents_room, equal to the first variable, self.room, at the beginning of a function inside the class.\nI then operate on the variable self.ents_room, which is an array of arrays of characters. I do this operation inside a for loop, which essentially takes the position of another object and sets one of the characters in the array of arrays to that object. Weirdly after the for loop is completed the variable self.room has been changed, when I only intend to change self.ents_room.</p>\n\n<p>I have already rewritten the function that is creating the issue as well as renaming variables and the class.</p>\n\n<pre><code>room1 = [['x','x','x','x','x'],\n        ['x','.','.','.','x'],\n        ['x','.','.','.','x'],\n        ['x','.','.','.','x'],\n        ['x','x','x','x','x']]\n\n#whenever you initialize an entity be sure to add it to the list\nentities = []\n\nclass Entity:\n    def __init__(self, x_pos, y_pos, char):\n        #used to store the position of the entity\n        self.x_pos = x_pos\n        self.y_pos = y_pos\n\n        #used to temporarily store the new position of the entity\n        #while it is checked for collisions\n        self.new_x_pos = x_pos\n        self.new_y_pos = y_pos\n\n        #character that represents the entity\n        self.char = char\n\n    #moves the entity based on ints passed to x_move and y_move\n    def move(self, x_move, y_move):\n        #add the movement amount to the position\n        self.new_y_pos = self.y_pos + y_move\n        self.new_x_pos = self.x_pos + x_move\n        #passes an entity too checkCollision as ToCheck and\n        #stops the movement if there is a collision\n        if self.checkCollision(self) is True:\n            print(\"collision\")\n            return\n        #if no collision is found then the movement is finalized\n        #by setting x_pos and y_pos as equal to new_x_pos and new_y_pos\n        self.x_pos = self.new_x_pos\n        self.y_pos = self.new_y_pos\n\n    #checks if the entity passed to ToCheck collides\n    #with any entities in the array entities\n    def checkCollision(self, ToCheck):\n        for entity in entities:\n            if ToCheck.new_y_pos == entity.y_pos:\n                if ToCheck.new_x_pos == entity.x_pos:\n                    #if ToCheck's position matches the position of\n                    #any entity in entities it returns true because\n                    #there was a collision\n                    return True\n        #called when x or y positions don't match for any entity\n        return False\n\nclass Level:\n    def __init__(self, room):\n        #saves room as an internal variable\n        self.room = room\n\n        #saves a new version of the room array for use with entities\n        self.ents_room = room\n\n        #saves a new version of the room array for concatination\n        self.conc_room = room  \n\n    def addEntities(self):\n        self.ents_room = self.room\n        for entity in entities:\n            self.ents_room[entity.y_pos][entity.x_pos] = entity.char\n        print(self.room)\n\n\nhouse = Level(room1)\ncalipso = Entity(1, 1, \"@\")\nentities.append(calipso)\njoseph = Entity(3,2, \"*\")\nentities.append(joseph)\n\nhouse.addEntities()\n#house.concatinateRoom()\n#house.printRoom()\n\ncalipso.move(2,1)\n</code></pre>\n\n<p>I expect self.room to stay the same after calling addEntities(), but it is currently changing along with self.ents_room. How can I prevent self.room from changing when I call the function addEntities()?</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1547074704, "post_id": 54119505, "comment_id": 95071751, "body": "<code>df1[&#39;Response&#39;] = df1.sum(1).gt(1).astype(int)</code>"}, {"owner": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "edited": false, "score": 0, "creation_date": 1547075618, "post_id": 54119505, "comment_id": 95071992, "body": "Will all of your numbers be positive?"}], "answers": [{"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1547075893, "creation_date": 1547075893, "answer_id": 54119843, "question_id": 54119505, "link": "https://stackoverflow.com/questions/54119505/sum-data-across-individual-rows-in-a-dataframe/54119843#54119843", "title": "Sum Data Across Individual Rows in a DataFrame", "body": "<p>Check with <code>clip_upper</code> : set a upper boundary . </p>\n\n<pre><code>df.sum(1).clip_upper(1)\nOut[153]: \n0    0\n1    1\n2    1\n3    0\n4    1\n5    1\n6    1\n7    1\n8    0\n9    1\ndtype: int64\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13049, "user_id": 10611983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/379cd29e7f3b043f4e563fed697dcf75?s=128&d=identicon&r=PG&f=1", "display_name": "iz_", "link": "https://stackoverflow.com/users/10611983/iz"}, "is_accepted": false, "score": 0, "last_activity_date": 1547076870, "creation_date": 1547076870, "answer_id": 54120006, "question_id": 54119505, "link": "https://stackoverflow.com/questions/54119505/sum-data-across-individual-rows-in-a-dataframe/54120006#54120006", "title": "Sum Data Across Individual Rows in a DataFrame", "body": "<p>Try this (it assumes all of the numbers are positive):</p>\n\n<pre><code>In [1]: import numpy as np\n   ...: import pandas as pd\n   ...: df1 = pd.read_clipboard()\n\nIn [2]: df1\nOut[2]:\n   A  B  C  D  Response\n0  0  0  0  0         0\n1  0  1  1  0         0\n2  1  1  1  1         0\n3  0  0  0  0         0\n4  0  1  1  1         0\n5  1  1  0  0         0\n6  1  1  0  0         0\n7  0  1  1  1         0\n8  0  0  0  0         0\n9  0  1  1  1         0\n\nIn [3]: df1['Response'] = df1.any(1).astype(int)\n\nIn [4]: df1\nOut[4]:\n   A  B  C  D  Response\n0  0  0  0  0         0\n1  0  1  1  0         1\n2  1  1  1  1         1\n3  0  0  0  0         0\n4  0  1  1  1         1\n5  1  1  0  0         1\n6  1  1  0  0         1\n7  0  1  1  1         1\n8  0  0  0  0         0\n9  0  1  1  1         1\n</code></pre>\n"}], "owner": {"reputation": 1073, "user_id": 4984061, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/Gm8it.jpg?s=128&g=1", "display_name": "Starbucks", "link": "https://stackoverflow.com/users/4984061/starbucks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 54119843, "answer_count": 2, "score": 2, "last_activity_date": 1547076870, "creation_date": 1547073988, "question_id": 54119505, "link": "https://stackoverflow.com/questions/54119505/sum-data-across-individual-rows-in-a-dataframe", "title": "Sum Data Across Individual Rows in a DataFrame", "body": "<p>I am trying to create a rule where as long as the sum of all data across each individual row in the dataframe is greater than one, the <code>response</code> will equal to one. Please see below.  </p>\n\n<pre><code>import numpy as np\nimport pandas as pd\ndf1 = pd.DataFrame(np.random.randint(0,2,size=(10, 4)), columns=list('ABCD'))\ndf1['Response'] = 0\n\ndf1\nOut[14]: \n   A  B  C  D  Response\n0  0  0  0  0         0\n1  0  1  1  0         0\n2  1  1  1  1         0\n3  0  0  0  0         0\n4  0  1  1  1         0\n5  1  1  0  0         0\n6  1  1  0  0         0\n7  0  1  1  1         0\n8  0  0  0  0         0\n9  0  1  1  1         0\n</code></pre>\n\n<p>My attempt: </p>\n\n<pre><code>df1['Response'] = 1 if [sum(df1[i,:]) for i in range(10)] &gt; 1 else 0\n</code></pre>\n\n<p>However I get this error, instead of having three rows equal to zero and the remaining equal to 1 in the <code>response</code> column:</p>\n\n<pre><code>TypeError: unhashable type: 'slice'\n</code></pre>\n\n<p>Any help would be appreciated. Thank you.</p>\n"}, {"tags": ["python", "opencv", "machine-learning", "image-processing", "computer-vision"], "comments": [{"owner": {"reputation": 3099, "user_id": 4524241, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5AbWJ.jpg?s=128&g=1", "display_name": "gameon67", "link": "https://stackoverflow.com/users/4524241/gameon67"}, "edited": false, "score": 0, "creation_date": 1547079084, "post_id": 54119500, "comment_id": 95072775, "body": "<a href=\"https://stackoverflow.com/questions/45322630/how-to-detect-lines-in-opencv\" title=\"how to detect lines in opencv\">stackoverflow.com/questions/45322630/&hellip;</a>"}, {"owner": {"reputation": 18948, "user_id": 3051961, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/b81cbd6deac24f756452266ff2e8d3ce?s=128&d=identicon&r=PG", "display_name": "ZdaR", "link": "https://stackoverflow.com/users/3051961/zdar"}, "edited": false, "score": 1, "creation_date": 1547101390, "post_id": 54119500, "comment_id": 95077547, "body": "As far as your yellow and purple output is concerned, you can refer to this <a href=\"https://stackoverflow.com/questions/3823752/display-image-as-grayscale-using-matplotlib\">answer</a>"}], "answers": [{"tags": [], "owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "is_accepted": false, "score": 0, "last_activity_date": 1564023061, "creation_date": 1564023061, "answer_id": 57193644, "question_id": 54119500, "link": "https://stackoverflow.com/questions/54119500/determine-division-line-in-text-using-opencv/57193644#57193644", "title": "Determine division line in text using openCV", "body": "<p>Here's a simple approach</p>\n\n<ul>\n<li>Convert image to grayscale and gaussian blur</li>\n<li>Threshold image</li>\n<li>Dilate to enhance contour</li>\n<li>Detect lines</li>\n</ul>\n\n<hr>\n\n<p>Threshold</p>\n\n<p><img src=\"https://i.stack.imgur.com/s0c6v.png\" width=\"400\"></p>\n\n<p>Next we dilate to enhance contours then use <a href=\"https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_houghlines/py_houghlines.html\" rel=\"nofollow noreferrer\"><code>cv2.HoughLinesP()</code></a> to detect lines. You mention</p>\n\n<blockquote>\n  <p>The lines don`t show as the set color</p>\n</blockquote>\n\n<p>This is because you tried to draw the line on a binary image (the thresholded image). Since it only has one channel, pixels are only white or black. Thus it will not display the color. You have to draw it on a colored image</p>\n\n<p><img src=\"https://i.stack.imgur.com/NsOVc.png\" width=\"400\"></p>\n\n<pre><code>import cv2\nimport numpy as np\n\nimage = cv2.imread('1.jpg')\ngray = cv2.cvtColor(image,cv2.COLOR_BGR2GRAY)\nblur = cv2.GaussianBlur(gray, (5,5), 0)\n\nthresh = cv2.threshold(blur,190, 255,cv2.THRESH_BINARY_INV)[1]\nkernel = cv2.getStructuringElement(cv2.MORPH_CROSS, (5,5))\ndilate = cv2.dilate(thresh, kernel, iterations=1)\n\nminLineLength = 10\nmaxLineGap = 200\nlines = cv2.HoughLinesP(dilate,1,np.pi/180,100,minLineLength,maxLineGap)\nfor line in lines:\n    for x1,y1,x2,y2 in line:\n        cv2.line(image,(x1,y1),(x2,y2),(0,0,255),3)\n\ncv2.imshow('image', image)\ncv2.imshow('thresh', thresh)\ncv2.waitKey()\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 10400141, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6L1KP.jpg?s=128&g=1", "display_name": "IsaKyodo", "link": "https://stackoverflow.com/users/10400141/isakyodo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1564023099, "creation_date": 1547073959, "last_edit_date": 1564023099, "question_id": 54119500, "link": "https://stackoverflow.com/questions/54119500/determine-division-line-in-text-using-opencv", "title": "Determine division line in text using openCV", "body": "<p>I want to detect the division line in the scanned document, and instead of using <code>cv2.Canny</code>, I used <code>cv2.threshold</code> to get a pretty clean pre-processed image. However my parameter for <code>cv2.HoughLines</code> may be improper and I got a chaos in the final output. And the lines didn`t present as the set color.</p>\n\n<p>My code is:</p>\n\n<pre><code>import cv2\nimport numpy as np\nfrom matplotlib import pyplot as plt\n\n## (1) read\nimg = cv2.imread(\"q11.png\")\ngray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\nplt.figure(figsize=(17,17))\nplt.imshow(gray,cmap='gray')\n\n## (2) threshold\nth, threshed = cv2.threshold(gray, 200, 20, cv2.THRESH_BINARY_INV|cv2.THRESH_OTSU)\nplt.figure(figsize=(15,15))\nplt.imshow(threshed,cmap='gray')\n\n## (3) HoughLines\nlines = cv2.HoughLines(threshed,rho=1,theta=np.pi/180,threshold = 800)\nfor i in range(len(lines)):\n    for rho,theta in lines[i]:\n        a = np.cos(theta)\n        b = np.sin(theta)\n        x0 = a*rho\n        y0 = b*rho\n        x1 = int(x0 + 1000*(-b))\n        y1 = int(y0 + 1000*(a))\n        x2 = int(x0 - 1000*(-b))\n        y2 = int(y0 - 1000*(a))\n    cv2.line(threshed,(x1,y1),(x2,y2),(0,0,255),2)\n\nplt.figure(figsize=(10, 10))\nplt.subplot(111),plt.imshow(threshed)\nplt.title('hough'), plt.xticks([]), plt.yticks([])\n</code></pre>\n\n<p>The original pic is:\n<a href=\"https://i.stack.imgur.com/qEdc3.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qEdc3.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>and after <code>cv2.threshold</code> with <code>cv2.THRESH_BINARY_INV|cv2.THRESH_OTSU</code> I got:\n<a href=\"https://i.stack.imgur.com/K0Avf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K0Avf.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want to have:\n<a href=\"https://i.stack.imgur.com/Kh91B.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Kh91B.png\" alt=\"enter image description here\"></a></p>\n\n<p>What I actually got:</p>\n\n<p><a href=\"https://i.stack.imgur.com/XjI2Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XjI2Q.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "command-line", "xlrd"], "comments": [{"owner": {"reputation": 2917, "user_id": 187519, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/nzv7O.jpg?s=128&g=1", "display_name": "Hassan Voyeau", "link": "https://stackoverflow.com/users/187519/hassan-voyeau"}, "edited": false, "score": 0, "creation_date": 1547073606, "post_id": 54119427, "comment_id": 95071435, "body": "Works for me, are you behind a proxy?"}, {"owner": {"reputation": 3027, "user_id": 3238611, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/270b9dbb510b505ef6ae1f8201c49582?s=128&d=identicon&r=PG&f=1", "display_name": "Everyone_Else", "link": "https://stackoverflow.com/users/3238611/everyone-else"}, "reply_to_user": {"reputation": 2917, "user_id": 187519, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/nzv7O.jpg?s=128&g=1", "display_name": "Hassan Voyeau", "link": "https://stackoverflow.com/users/187519/hassan-voyeau"}, "edited": false, "score": 1, "creation_date": 1547076193, "post_id": 54119427, "comment_id": 95072132, "body": "Yep, that was it"}, {"owner": {"reputation": 4230, "user_id": 1091386, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/bd5c864fec9209546b3da1cf717193b0?s=128&d=identicon&r=PG", "display_name": "icedwater", "link": "https://stackoverflow.com/users/1091386/icedwater"}, "edited": false, "score": 0, "creation_date": 1586321137, "post_id": 54119427, "comment_id": 108082279, "body": "I think it might be better to add an answer here so that people can see how it was solved, rather than just a comment, but that&#39;s just my guess."}], "owner": {"reputation": 3027, "user_id": 3238611, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/270b9dbb510b505ef6ae1f8201c49582?s=128&d=identicon&r=PG&f=1", "display_name": "Everyone_Else", "link": "https://stackoverflow.com/users/3238611/everyone-else"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1547073466, "creation_date": 1547073466, "question_id": 54119427, "link": "https://stackoverflow.com/questions/54119427/cant-pip-install-xlrd-connection-times-out", "title": "Can&#39;t pip install xlrd, connection times out", "body": "<p>When I try to install xlrd via</p>\n\n<pre><code>pip install xlrd\n</code></pre>\n\n<p>I get the error message that</p>\n\n<pre><code>Collecting xlrd\n  Retrying (Retry(total=4, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ConnectTimeoutError(&lt;pip._vendor.urllib3.connection.VerifiedHTTPSConnection object at 0x03593510&gt;, 'Connection to pypi.org timed out. (connect timeout=15)')': /simple/xlrd/\n</code></pre>\n\n<p>This error message repeats a few times and then I manually exit.  How can I install xlrd?</p>\n"}, {"tags": ["python", "bokeh"], "answers": [{"tags": [], "owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "is_accepted": false, "score": 0, "last_activity_date": 1547140077, "creation_date": 1547140077, "answer_id": 54133658, "question_id": 54119349, "link": "https://stackoverflow.com/questions/54119349/how-to-change-color-of-group-of-glyphs-by-hovering-on-a-different-glyph-in-bokeh/54133658#54133658", "title": "How to change color of group of glyphs by hovering on a different glyph in Bokeh? Or show lines depicting the relationship", "body": "<p>You can use <a href=\"https://bokeh.pydata.org/en/latest/docs/user_guide/interaction/callbacks.html#customjs-for-hover\" rel=\"nofollow noreferrer\">CustomJS for Hover</a> to update properties of other glyphs, such as color or visibility. </p>\n"}], "owner": {"reputation": 731, "user_id": 4670408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d1c16454540ac9d57ae95a6aab0e650?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/4670408/vinay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 375, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1547140077, "creation_date": 1547073001, "last_edit_date": 1547131768, "question_id": 54119349, "link": "https://stackoverflow.com/questions/54119349/how-to-change-color-of-group-of-glyphs-by-hovering-on-a-different-glyph-in-bokeh", "title": "How to change color of group of glyphs by hovering on a different glyph in Bokeh? Or show lines depicting the relationship", "body": "<p>I have the following plot </p>\n\n<p><a href=\"https://i.stack.imgur.com/bVCam.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bVCam.png\" alt=\"enter image description here\"></a></p>\n\n<p>using</p>\n\n<pre><code>from bokeh.layouts import gridplot\nfrom bokeh.models import ColumnDataSource, CDSView, IndexFilter\nfrom bokeh.plotting import figure, show\nfrom bokeh.io import curdoc, output_notebook, output_file, export_png\nfrom bokeh.models import (\n  ColumnDataSource, Circle, Square, HoverTool,Grid, TapTool,PanTool, WheelZoomTool, BoxSelectTool,ZoomInTool, ZoomOutTool, CDSView, GroupFilter)\n\ncurdoc().clear()\noutput_notebook()\n\nsource1 = ColumnDataSource(data=dict(x=[1, 2, 3, 4, 5], y=[1, 2, 3, 4, 5]))\nsource2 = ColumnDataSource(data=dict(x=[3, 4], y=[2, 3]))\n\np = figure(plot_height=300, plot_width=300, tools=\"pan,wheel_zoom,box_zoom,reset,zoom_in,zoom_out,save\")\ncircle = Circle(x=\"x\", y=\"y\", size=10)\n\nsquare = Square(x=\"x\", y=\"y\", size=10)\nhover_square = Square(x=\"x\", y=\"y\", size=10, fill_color=\"red\")\n\nc = p.add_glyph(source1, circle)\ns = p.add_glyph(source2, square, hover_glyph=hover_square)\n\nc_hover = HoverTool(renderers=[c,s], tooltips=[('x', '@x')])\np.add_tools(c_hover)\n\nshow(p)\n</code></pre>\n\n<p>I want to change the color of bottom three circles when I hover on the bottom square and top 2 circles when top square is hovered on? Let's say I have a dataframe which identifies this relationship. </p>\n\n<p>Is there a way to do this in Bokeh?</p>\n\n<p>It would be even better if I can also show lines from a square to circles depicting the relationship only when a I hover on a square.</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 10322766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cd4545948ced27a00cf05813ae9e65d?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle C", "link": "https://stackoverflow.com/users/10322766/kyle-c"}, "is_accepted": true, "score": 2, "last_activity_date": 1547081723, "last_edit_date": 1547081723, "creation_date": 1547073560, "answer_id": 54119439, "question_id": 54119348, "link": "https://stackoverflow.com/questions/54119348/plotting-2-data-sets-with-a-scatter-matrix/54119439#54119439", "title": "Plotting 2 data sets with a scatter matrix", "body": "<p>You need a reference to an Axes object to keep drawing on the same subplot.</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nx = range(100)\ny = range(100,200)\nfig = plt.figure()\nax1 = fig.add_subplot(111)\n\nax1.scatter(x[:4], y[:4], s=10, c='b', marker=\"s\", label='first')\nax1.scatter(x[40:],y[40:], s=10, c='r', marker=\"o\", label='second')\nplt.legend(loc='upper left');\nplt.show()][1]][1]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/zBVGj.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zBVGj.jpg\" alt=\"Plot\"></a></p>\n\n<p>Another option is:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nplt.scatter(x,y, c='b', marker='x', label='1')\nplt.scatter(x, y, c='r', marker='s', label='-1')\nplt.legend(loc='upper left')\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 7644267, "user_type": "registered", "profile_image": "https://graph.facebook.com/1419426528099359/picture?type=large", "display_name": "Edu Galindo", "link": "https://stackoverflow.com/users/7644267/edu-galindo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "accepted_answer_id": 54119439, "answer_count": 1, "score": 1, "last_activity_date": 1547081723, "creation_date": 1547072967, "question_id": 54119348, "link": "https://stackoverflow.com/questions/54119348/plotting-2-data-sets-with-a-scatter-matrix", "title": "Plotting 2 data sets with a scatter matrix", "body": "<p>I can already plot the data from one data frame using <code>pandas.plotting.scatter_matrix</code>, but can you plot 2 data sets that have the same units in the same scatter matrix? changing colors between them to differentiate which data belongs to which data frame?</p>\n"}, {"tags": ["python", "pyqt5", "pyinstaller"], "comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1547109470, "post_id": 54119311, "comment_id": 95080765, "body": "In what way doesn\u2019t it work - have you examined the directory where your onefile exe is extracted to and the image file isn\u2019t there?"}, {"owner": {"reputation": 401, "user_id": 9235106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23bca8cc0465ec0ee449ce605c48b702?s=128&d=identicon&r=PG&f=1", "display_name": "Jiawei Lu", "link": "https://stackoverflow.com/users/9235106/jiawei-lu"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1547414724, "post_id": 54119311, "comment_id": 95175609, "body": "@barny my understanding of line a.datas += .... is that PyInstaller will find the picture I stored in &#39;C:\\\\Jiawei\\\\Work\\\\python_simulation_V2\\\\images\\\\car.png&#39;, and save it as an object named &#39;car.png&#39; when it builds exe files. In this way, I can refer to the picture using &#39;car.png&#39; in my main script. But when I run the generated exe file, it doesn&#39;t show the picture in GUI. I&#39;m not sure where is wrong"}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1547415072, "post_id": 54119311, "comment_id": 95175707, "body": "If your code can\u2019t find at runtime that doesn\u2019t necessarily mean the file isn\u2019t there, it\u2019s just not where your code expects it to be. I repeat: have you checked the temporary directory where the onefile exe is extracted to, to find where the car.png is located? Also, when the exe is run, check the current working directory because that will most likely not be the same folder as the temporary directory."}, {"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1547415278, "post_id": 54119311, "comment_id": 95175757, "body": "Your <code>a.datas</code> specification puts the file in the <code>Data</code> folder - is that where your code is looking?"}], "owner": {"reputation": 401, "user_id": 9235106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23bca8cc0465ec0ee449ce605c48b702?s=128&d=identicon&r=PG&f=1", "display_name": "Jiawei Lu", "link": "https://stackoverflow.com/users/9235106/jiawei-lu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1252, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1547072801, "creation_date": 1547072801, "question_id": 54119311, "link": "https://stackoverflow.com/questions/54119311/how-to-include-images-into-exe-generated-by-pyinstaller-in-python", "title": "How to include images into exe generated by PyInstaller in Python", "body": "<p>I use PyQt5 to develop a GUI application in python, and that works. Now, I would like to generate exe file using PyInstaller, but I don't know how to include image files into exe file. I mean I wish the exe file doesn't rely on external image files any more.\nI have tried the method below, but it seems doesn't work for me.\n<a href=\"https://stackoverflow.com/questions/31836104/pyinstaller-and-onefile-how-to-include-an-image-in-the-exe-file\">Pyinstaller and --onefile: How to include an image in the exe file</a></p>\n\n<p>following is part of my code:</p>\n\n<p>my code:</p>\n\n<pre><code>class DASH(QMainWindow):\n    def __init__(self):\n        super().__init__()\n        self.initUI()\n\n    def initUI(self):\n        self.animation = Animation()\n        self.setCentralWidget(self.animation)\n        exitAct = QAction(QIcon(r'car.png'), 'Exit', self)\n        exitAct.setShortcut('Ctrl+Q')\n        exitAct.setStatusTip('Exit application')\n        exitAct.triggered.connect(self.close)\n</code></pre>\n\n<p>spec file:</p>\n\n<pre><code># -*- mode: python -*-\n\nblock_cipher = None\n\n\na = Analysis(['C:\\\\Jiawei\\\\Work\\\\python_simulation_V2\\\\python_visualization.py'],\n         pathex=['C:\\\\Users\\\\Lujia'],\n         binaries=[],\n         datas=[],\n         hiddenimports=[],\n         hookspath=[],\n         runtime_hooks=[],\n         excludes=[],\n         win_no_prefer_redirects=False,\n         win_private_assemblies=False,\n         cipher=block_cipher,\n         noarchive=False)\n\na.datas += [('car.png','C:\\\\Jiawei\\\\Work\\\\python_simulation_V2\\\\images\\\\car.png', 'Data')]\n\npyz = PYZ(a.pure, a.zipped_data,\n         cipher=block_cipher)\nexe = EXE(pyz,\n      a.scripts,\n      a.binaries,\n      a.zipfiles,\n      a.datas,\n      [],\n      name='python_visualization',\n      debug=False,\n      bootloader_ignore_signals=False,\n      strip=False,\n      upx=True,\n      runtime_tmpdir=None,\n      console=True )\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11142314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1ODVJ.jpg?s=128&g=1", "display_name": "Xiaomei", "link": "https://stackoverflow.com/users/11142314/xiaomei"}, "is_accepted": false, "score": 0, "last_activity_date": 1552562885, "last_edit_date": 1552562885, "creation_date": 1551586117, "answer_id": 54965486, "question_id": 54119305, "link": "https://stackoverflow.com/questions/54119305/attributeerror-float-object-has-no-attribute-replace-error-when-installin/54965486#54965486", "title": "&quot;AttributeError: &#39;float&#39; object has no attribute &#39;replace&#39;&quot; error when installing a python package", "body": "<p>I just go to install_egg_info.py and modify this line as:</p>\n\n<pre><code>version = str(version).replace(' ','.')\n</code></pre>\n\n<p>Then, rerun the install command again and it works.</p>\n"}], "owner": {"reputation": 171, "user_id": 7942194, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd0d84f71425a0a86a56d04dc9aa82a4?s=128&d=identicon&r=PG&f=1", "display_name": "Luqman Saleem", "link": "https://stackoverflow.com/users/7942194/luqman-saleem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 895, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1552562885, "creation_date": 1547072775, "question_id": 54119305, "link": "https://stackoverflow.com/questions/54119305/attributeerror-float-object-has-no-attribute-replace-error-when-installin", "title": "&quot;AttributeError: &#39;float&#39; object has no attribute &#39;replace&#39;&quot; error when installing a python package", "body": "<p>I am trying to install a python package DMRG101 on Linux Zorin. I get this package from GitHub <a href=\"https://github.com/iglpdc/dmrg101\" rel=\"nofollow noreferrer\">https://github.com/iglpdc/dmrg101</a>. I have python 2.7.12 and python 3.5.2 installed. I tried to install this package using </p>\n\n<p><code>python setup.py install</code></p>\n\n<p>but it is giving me the following error </p>\n\n<pre><code>\n    running install\n    running build\n    running build_py\n    running install_lib\n    running install_egg_info\n    Traceback (most recent call last):\n      File \"setup.py\", line 30, in &lt;module&gt;\n        requires = [],\n      File \"/usr/lib/python2.7/distutils/core.py\", line 151, in setup\n        dist.run_commands()\n      File \"/usr/lib/python2.7/distutils/dist.py\", line 953, in run_commands\n        self.run_command(cmd)\n      File \"/usr/lib/python2.7/distutils/dist.py\", line 972, in run_command\n        cmd_obj.run()\n      File \"/usr/lib/python2.7/distutils/command/install.py\", line 613, in run\n        self.run_command(cmd_name)\n      File \"/usr/lib/python2.7/distutils/cmd.py\", line 326, in run_command\n        self.distribution.run_command(command)\n      File \"/usr/lib/python2.7/distutils/dist.py\", line 971, in run_command\n        cmd_obj.ensure_finalized()\n      File \"/usr/lib/python2.7/distutils/cmd.py\", line 109, in ensure_finalized\n        self.finalize_options()\n      File \"/usr/lib/python2.7/distutils/command/install_egg_info.py\", line 46, in finalize_options\n        to_filename(safe_version(self.distribution.get_version()))\n      File \"/usr/lib/python2.7/distutils/command/install_egg_info.py\", line 88, in safe_version\n        version = version.replace(' ','.')\n    AttributeError: 'float' object has no attribute 'replace'\n\n</code></pre>\n\n<p>how can I eliminate this error?</p>\n"}, {"tags": ["python", "graph", "networkx", "gephi", "social-graph"], "answers": [{"tags": [], "owner": {"reputation": 6945, "user_id": 2912349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e334f9128613bb74632da336c63ef18f?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Brodersen", "link": "https://stackoverflow.com/users/2912349/paul-brodersen"}, "is_accepted": true, "score": 1, "last_activity_date": 1547116942, "creation_date": 1547116942, "answer_id": 54126899, "question_id": 54119289, "link": "https://stackoverflow.com/questions/54119289/visualization-of-social-network-with-assignment-of-colors-to-nodes/54126899#54126899", "title": "Visualization of social network with assignment of colors to nodes", "body": "<p><code>networkx.draw</code> accepts lists for <code>node_color</code> and <code>node_size</code> that need to be as long as the number of nodes. So you simply need to map your unique attributes to some colors, and create those lists. If you have many different attributes, you will want to do that mapping automatically. Below, I outline 2 options, one using the matplotlib color cycle, and another simply assigning random colors to unique attributes. </p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport networkx as nx\n\nNodes = np.array([[1,2,4],\n                  [1,3,1],\n                  [2,2,1],\n                  [1,1,2],\n                  [1,2,2],\n                  [2,1,4],\n                  [1,2,1],\n                  [2,0,1],\n                  [2,2,4],\n                  [1,0,4]])\nEdges = np.random.randint(2, size=(10,10))\nattribute_values = Nodes[:,1]\n\n# make a color mapping from node attribute to color\n\n# option 1: using the matplotlib color cycle;\n# however, you may run out of colors if there are many different unique attributes\ncolor_cycle = plt.rcParams['axes.prop_cycle'].by_key()['color']\nattribute_to_color = dict()\nfor ii, attribute in enumerate(np.unique(attribute_values)):\n    attribute_to_color[attribute] = color_cycle[ii]\n\n# option 2: assign random colors\nattribute_to_color = dict()\nfor ii, attribute in enumerate(np.unique(attribute_values)):\n    attribute_to_color[attribute] = np.random.rand(3)\n\nnode_color = [attribute_to_color[attribute] for attribute in attribute_values]\n\n# adjust node sizes according to some other attribute\nnode_size = Nodes[:, 2] * 100\n\nG = nx.from_numpy_matrix(Edges)\nnx.draw(G, node_color=node_color, node_size=node_size, with_labels=True)\nplt.show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1524, "user_id": 3782865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMiST.jpg?s=128&g=1", "display_name": "zohar.kom", "link": "https://stackoverflow.com/users/3782865/zohar-kom"}, "is_accepted": false, "score": 2, "last_activity_date": 1547186807, "last_edit_date": 1547186807, "creation_date": 1547117032, "answer_id": 54126925, "question_id": 54119289, "link": "https://stackoverflow.com/questions/54119289/visualization-of-social-network-with-assignment-of-colors-to-nodes/54126925#54126925", "title": "Visualization of social network with assignment of colors to nodes", "body": "<p>Networkx allows visualizing graphs and specifying nodes' sizes and colors.\nFor example:</p>\n\n<pre><code>import networkx as nx\nimport matplotlib.pyplot as plt\n\nG = nx.barabasi_albert_graph(20, 2)\nnode_colors = [x for x in range(20)]\nnode_sizes = [50 * x for x in range(20)]\ncmap = plt.cm.jet\nnx.draw_networkx(G,\n                 with_labels=True,\n                 labels={node : 'some text {}'.format(node) for node in G.nodes()},\n                 node_color=node_colors,\n                 node_size=node_sizes,\n                 cmap=cmap)\nplt.show()\n</code></pre>\n\n<ul>\n<li><strong>labels</strong> - is an array of labels (according to the order of G.nodes())</li>\n<li><strong>node_sizes</strong> - is an array of integers specifying the size of each node</li>\n<li><strong>node_colors</strong> - is an array of numbers specifying the color of each node</li>\n<li><strong>cmap</strong> - is mapping each number to a specific color</li>\n</ul>\n\n<p>This results with:\n<a href=\"https://i.stack.imgur.com/OKgAa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OKgAa.png\" alt=\"enter image description here\"></a></p>\n\n<p>To fully understand how Networkx drawing works I suggest reading the <a href=\"https://networkx.github.io/documentation/stable/reference/drawing.html\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n\n<p>Personally, for exploring and visualizing a <strong>specific</strong> graph instance I prefer to save the networkx graph to a file, and load it with <strong>gephi</strong>. If you want an automated process for many instances of graphs networkxs would probably be better.</p>\n\n<p>In case you choose gephi, just load a graph and play with the GUI, it's pretty self explanatory.</p>\n"}], "owner": {"reputation": 1777, "user_id": 10626090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAZwb.png?s=128&g=1", "display_name": "Siddharth Satpathy", "link": "https://stackoverflow.com/users/10626090/siddharth-satpathy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 0, "accepted_answer_id": 54126899, "answer_count": 2, "score": 1, "last_activity_date": 1547186807, "creation_date": 1547072686, "last_edit_date": 1547089951, "question_id": 54119289, "link": "https://stackoverflow.com/questions/54119289/visualization-of-social-network-with-assignment-of-colors-to-nodes", "title": "Visualization of social network with assignment of colors to nodes", "body": "<p>I want to <strong>visualize a social network</strong> with nodes and edges, with <strong>colors of nodes representing values of attributes</strong>. It will be nice if I can do it with tools in python (like <a href=\"http://networkx.github.io/\" rel=\"nofollow noreferrer\">networkx</a>), but I am also open to other tools (like <a href=\"https://gephi.org/\" rel=\"nofollow noreferrer\">Gephi</a> , <a href=\"https://graph-tool.skewed.de/\" rel=\"nofollow noreferrer\">graph-tools</a>) . The nodes and edges that I have in my social network are in the form of numpy arrays. I want nodes of this visualization to be colored according to values of attributes. </p>\n\n<p>Each row in the nodes array points to an user. Each column in the nodes array points to an attribute. The values in each column of the nodes array point to attribute values. Here is an example of a nodes array with 10 users and 3 attributes (with names [<code>Att1</code>, <code>Att2</code>, <code>Att3</code>].</p>\n\n<pre><code>Nodes = np.array([[1,2,4],[1,3,1],[2,2,1],[1,1,2],\n              [1,2,2],[2,1,4],[1,2,1],[2,0,1],\n              [2,2,4],[1,0,4]])\n</code></pre>\n\n<p>Similarly, the edges array (adjacency matrix) is a square array of size number of nodes <code>*</code> number of nodes. A value of 1 in the adjacency matrix points to a presence of an edge between two nodes, and a value of 0 points to absence of an edge. Here is an example of an edges array. </p>\n\n<pre><code>Edges = np.random.randint(2, size=(10,10))\n</code></pre>\n\n<p>Let's say I want the nodes to be colored according to attribute values given in the middle column of <code>Nodes</code> (i.e. <code>Attribute_Value = Nodes[:,1] = [2, 3, 2, 1, 2, 1, 2, 0, 2, 0])</code> There are four unique attribute values <code>[0,1,2,3]</code> so, I will like to have four different colors for the nodes. In my actual graph, I have many more unique values for attributes. Also, I have tens of thousands of nodes, so I will like to be able to adjust the sizes (radii) of nodes in my plot.</p>\n\n<p>Following a previous post of mine, I have tried this:</p>\n\n<pre><code>import networkx as nx\nG = nx.from_numpy_array(Edges)\nnx.draw(G, with_labels=True)\n</code></pre>\n\n<p>But, results from the above code snippet do not let me choose colors as per attribute values. Also, I will need to adjust sizes of nodes. How can I visualize social graphs in the described way?</p>\n"}, {"tags": ["python", "opencv"], "comments": [{"owner": {"reputation": 2089, "user_id": 4766168, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xrRVf1o5oQk/AAAAAAAAAAI/AAAAAAAAAEk/Uu9PgLhfHwA/photo.jpg?sz=128", "display_name": "Dmitrii Z.", "link": "https://stackoverflow.com/users/4766168/dmitrii-z"}, "edited": false, "score": 2, "creation_date": 1547073436, "post_id": 54119286, "comment_id": 95071380, "body": "<code>if len(contour) &lt; 100:return </code> line causes the crash. You would need to check what this function returns and ignore small contours"}], "answers": [{"tags": [], "owner": {"reputation": 313, "user_id": 10860988, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XZ-BU2SVZIU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca8QHjpsM-XftnocTv9G2tBaY95sQ/mo/photo.jpg?sz=128", "display_name": "Alexander Strakhov", "link": "https://stackoverflow.com/users/10860988/alexander-strakhov"}, "is_accepted": true, "score": 1, "last_activity_date": 1547075156, "last_edit_date": 1547075156, "creation_date": 1547074434, "answer_id": 54119591, "question_id": 54119286, "link": "https://stackoverflow.com/questions/54119286/trying-to-modify-opencv-contour-results-in-error/54119591#54119591", "title": "Trying to modify OpenCV contour results in error", "body": "<p>When you save the output like  <code>contour = StraightenContour(contour)</code>, you might be returning NULL if the contour is less than 100.</p>\n\n<p>The next operations on NULL yield that error you get. Try debugging by placing <code>print(len(contour))</code> in the beginning of the <code>StraightenContour(contour)</code> function, and most likely contour will be less than 100, making your function return NULL.</p>\n\n<p>When you do  not save the output of <code>StraightenContour(contour)</code> in a variable contour, then that case when len(contour) &lt; 100 would not save NULL anywhere upon return and the rest of the code will run fine.</p>\n\n<p>The solution would be to simply <code>return contour</code> when its length is less than 100. Maybe you would want to consider changing 100 to something else by running some experiments to find the optimal value.</p>\n"}], "owner": {"reputation": 5185, "user_id": 6202327, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AFtrB.png?s=128&g=1", "display_name": "Makogan", "link": "https://stackoverflow.com/users/6202327/makogan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 54119591, "answer_count": 1, "score": 1, "last_activity_date": 1547075156, "creation_date": 1547072674, "question_id": 54119286, "link": "https://stackoverflow.com/questions/54119286/trying-to-modify-opencv-contour-results-in-error", "title": "Trying to modify OpenCV contour results in error", "body": "<p>I am trying to make a custom algorithm to straighten contours, however the way I am currently doing things crashes my program.</p>\n\n<p>The program itself is:</p>\n\n<pre><code>import numpy as np\nimport cv2\nimport copy\nfrom matplotlib import pyplot as plt\n\n\ndef IsInLine(point, origin, dir):\n    if dir[0][0] == 0 or dir[0][1] == 0:\n        return False\n    t1 = (point[0][0] - origin[0][0]) / dir[0][0]\n    t2 = (point[0][1] - origin[0][1]) / dir[0][1]\n\n    if abs(t1 - t2) &lt; 10:\n        return True\n    else:\n        return False\n\ndef StraightenContour(contour):\n\n    new_contour = []\n    if len(contour) &lt; 100:\n        return\n\n    for i in range(0, len(contour)):\n        line1 = contour[i-1] - contour[i-2]\n        line2 = contour[(i+2)%len(contour)] - contour[(i+1)%len(contour)]\n\n        if IsInLine(contour[i], contour[i-1], line1) and IsInLine(contour[i], contour[(i+2)%len(contour)], line2):\n            new_contour.append([[0,0]])\n\n    print(contour)\n    return contour\n\n\nimg = cv2.imread('Kitchen.png')\nimgray = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\nedges = cv2.Canny(img, 100, 200)\n\nkernel = np.ones((5,5),np.uint8)\nedges = cv2.morphologyEx(\n    edges, cv2.MORPH_CLOSE, cv2.getStructuringElement(cv2.MORPH_ELLIPSE, (5,5)), iterations = 5)\n\nret, thresh = cv2.threshold(edges, 127, 255, 0)\nim2, contours, hierarchy = cv2.findContours(thresh, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)\n\nimg_area = im2.shape[0] * im2.shape[1]\nfor contour in contours:\n    contour = StraightenContour(contour)\n    if cv2.contourArea(contour) / img_area &gt; 0.22:\n        cv2.drawContours(img, [contour], 0, (0, 255, 0), 3)\n    else:\n        cv2.drawContours(img, [contour], 0, (0, 0, 255), 3)\n\ncv2.imshow('image', img)\ncv2.waitKey(0)\ncv2.destroyAllWindows()\n</code></pre>\n\n<p>The problem specifically occurs when I try to return the original contour at the end of <code>StraightenContour()</code></p>\n\n<p>My program crashes with message:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"cexp.py\", line 79, in &lt;module&gt;\n    if cv2.contourArea(contour) / img_area &gt; 0.22:\ncv2.error: OpenCV(3.4.5) /io/opencv/modules/imgproc/src/shapedescr.cpp:272: error: (-215:Assertion failed) npoints &gt;= 0 &amp;&amp; (depth == CV_32F || depth == CV_32S) in function 'contourArea'\n</code></pre>\n\n<p>if instead I modify the line such that: </p>\n\n<pre><code> contour = StraightenContour(contour)\n</code></pre>\n\n<p>Becomes:\n     StraightenContour(contour)</p>\n\n<p>No such problem occurs.</p>\n\n<p>I am very confused as I am not even touching the contour, just returning it.</p>\n\n<p>I need to either solve this issue, or find a way to delete points from a contour.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "mysql-python", "eof"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 10869970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a13abf243991088b6a251feab131ee88?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Alvarez", "link": "https://stackoverflow.com/users/10869970/miguel-alvarez"}, "edited": false, "score": 0, "creation_date": 1547072874, "post_id": 54119303, "comment_id": 95071209, "body": "I did add an except clause at the end. That&#39;s why I am confused @Prune"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 29, "user_id": 10869970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a13abf243991088b6a251feab131ee88?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Alvarez", "link": "https://stackoverflow.com/users/10869970/miguel-alvarez"}, "edited": false, "score": 0, "creation_date": 1547072956, "post_id": 54119303, "comment_id": 95071241, "body": "You have an <code>except</code> that&#39;s inside the <code>while</code> loop of <code>read_temp</code>.  You have no <code>except</code> for the <code>try</code> at line 11."}, {"owner": {"reputation": 29, "user_id": 10869970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a13abf243991088b6a251feab131ee88?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Alvarez", "link": "https://stackoverflow.com/users/10869970/miguel-alvarez"}, "edited": false, "score": 0, "creation_date": 1547073122, "post_id": 54119303, "comment_id": 95071290, "body": "ahhh thank you the error went away! I updated my code. But now it won&#39;t run the rest of the code after the except error that I have."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 29, "user_id": 10869970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a13abf243991088b6a251feab131ee88?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Alvarez", "link": "https://stackoverflow.com/users/10869970/miguel-alvarez"}, "edited": false, "score": 0, "creation_date": 1547073333, "post_id": 54119303, "comment_id": 95071346, "body": "(1) That&#39;s a separate problem, requiring a separate question; (2) You haven&#39;t posted the offending code, so there&#39;s no way we can diagnose the problem; (3) Just a wild shot: did you <i>handle</i> the exception?  If not ... well, read the documentation on the <code>try - except</code> construct."}, {"owner": {"reputation": 29, "user_id": 10869970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a13abf243991088b6a251feab131ee88?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Alvarez", "link": "https://stackoverflow.com/users/10869970/miguel-alvarez"}, "edited": false, "score": 0, "creation_date": 1547073572, "post_id": 54119303, "comment_id": 95071424, "body": "Alright well you answered my question! Lol but I now have a different problem. Thanks for your help tho! Any tips on how I could fix the problem of python not being able to run the rest of my code after I establish the connection to the database? @Prune"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 29, "user_id": 10869970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a13abf243991088b6a251feab131ee88?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Alvarez", "link": "https://stackoverflow.com/users/10869970/miguel-alvarez"}, "edited": false, "score": 0, "creation_date": 1547075012, "post_id": 54119303, "comment_id": 95071833, "body": "I gave you those tips in my previous comment."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1547072751, "creation_date": 1547072751, "answer_id": 54119303, "question_id": 54119278, "link": "https://stackoverflow.com/questions/54119278/error-unexpected-eof-while-parsing/54119303#54119303", "title": "Error ------ unexpected EOF while parsing", "body": "<p>Most of posted program is a huge <code>try</code> block with no <code>except</code> clause.  Thus, when the parser hits the bottom of the file, it has no way to finish off the open control block.</p>\n\n<p>The <code>try</code> is at line 11; we run out of input after line 74, without any <code>except</code> for that <code>try</code>.</p>\n\n<p>I suspect that your indentation is faulty (among other things), since this <code>try</code> includes two function definitions.  Still, you have two <code>try</code> statements, and only the one <code>except</code>.</p>\n"}], "owner": {"reputation": 29, "user_id": 10869970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a13abf243991088b6a251feab131ee88?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel Alvarez", "link": "https://stackoverflow.com/users/10869970/miguel-alvarez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 707, "favorite_count": 0, "accepted_answer_id": 54119303, "answer_count": 1, "score": 0, "last_activity_date": 1547077874, "creation_date": 1547072600, "last_edit_date": 1547077874, "question_id": 54119278, "link": "https://stackoverflow.com/questions/54119278/error-unexpected-eof-while-parsing", "title": "Error ------ unexpected EOF while parsing", "body": "<p>I am running this code on Python 3(IDLE) on my raspberry pi 3 whith the latest raspbian software. With this code I am trying to obtain temperature data through ds18b20 sensor and sending that same data towards the mysql database I created. </p>\n\n<p>From the try: to the end of the if connection.is_connected(), I am establishing the connection to the mysql database.</p>\n\n<p>From the if os.system('modprobe w1-gpio') to  return temp_c, I am obtaining the temperature data through the ds18b20 sensor. </p>\n\n<p>From the Whiletrue to the end of my code, I try to send the temperature data into a specific table intitled TAB_CLASSROOM.</p>\n\n<p>Help would be very much appreciated!</p>\n\n<p>HERE IS THE FULL ERROR!:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/pi/Desktop/mysqlfinal1test.py\", line 74\n    db.close()\n              ^\nSyntaxError: unexpected EOF while parsing\n</code></pre>\n\n<p>Here is the python including mysql code :</p>\n\n<pre><code>import os\nimport glob\nimport time\nimport MySQLdb\nimport datetime\nimport mysql.connector\nfrom mysql.connector import Error\n\ni = datetime.datetime.now()\n\ntry:\n    connection = mysql.connector.connect(host='127.0.0.1',\n                             database='temp_pi',\n                             user='root',\n                             password='test')\n\n    if connection.is_connected():\n       db_Info = connection.get_server_info()\n       print(\"Connected to MySQL database... MySQL Server version on \",db_Info)\n       cursor = connection.cursor()\n       cursor.execute(\"select database();\")\n       record = cursor.fetchone()\n       print (\"Your connected to - \", record)\n\n    os.system('modprobe w1-gpio')\n    os.system('modprobe w1-therm')\n\n    base_dir = '/sys/bus/w1/devices/'\n    device_folder = glob.glob(base_dir + '28*')[0]\n    device_file = device_folder + '/w1_slave'\n\n    def read_temp_raw():\n        f = open(device_file, 'r')\n        lines = f.readlines()\n        f.close()\n        return lines\n\n    def read_temp():\n        lines = read_temp_raw()\n        while lines[0].strip()[-3:] != 'YES':\n            time.sleep(0.2)\n            lines = read_temp_raw()\n        equals_pos = lines[1].find('t=')\n        if equals_pos != -1:\n            temp_string = lines[1][equals_pos+2:]\n            temp_c = float(temp_string) / 1000.0\n            temp_f = temp_c * 9.0 / 5.0 + 32.0\n            return temp_c  \n\n        while True:\n              print(\"recording data into database(period = 5s.)....press ctrl+Z to stop!\")\n\n              valT = str(read_temp())\n\n              year = str(i.year)\n              month = str(i.month)\n              day = str(i.day)\n              date = day + \"-\" + month + \"-\" + year\n\n              hour = str(i.hour)\n              minute = str(i.minute)\n              second = str(i.second)\n              timestr = hour + \":\" + minute + \":\" + second\n\n              try:\n                 cur.execute(\"\"\"INSERT INTO TAB_CLASSROOM(temp_c,T_Date,T_Time) VALUES(%s,%s,%s)\"\"\",(valT,date,time))\n                 db.commit()\n              except:\n                 db.rollback()\n\n              time.sleep(10)\n\n        cur.close()  \n        db.close()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "kivy", "jsonstore"], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 10744859, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y-R50GQu0rY/AAAAAAAAAAI/AAAAAAAAASE/WYUsyJQFaCE/photo.jpg?sz=128", "display_name": "Jarren Poulsen", "link": "https://stackoverflow.com/users/10744859/jarren-poulsen"}, "edited": false, "score": 0, "creation_date": 1547138901, "post_id": 54119644, "comment_id": 95098069, "body": "That works beautifully! Thank you!  Could you help me figure out how to append to the JSON file rather than write?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 121, "user_id": 10744859, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y-R50GQu0rY/AAAAAAAAAAI/AAAAAAAAASE/WYUsyJQFaCE/photo.jpg?sz=128", "display_name": "Jarren Poulsen", "link": "https://stackoverflow.com/users/10744859/jarren-poulsen"}, "edited": false, "score": 1, "creation_date": 1547139388, "post_id": 54119644, "comment_id": 95098366, "body": "@JarrenPoulsen The concept of append is to obtain what there is, add the new data and save it again, so with get and put you can get that behavior: <code>d = self.store.get(&#39;profile&#39;) if not d:     d = dict() d[&quot;first&quot;] = &quot;some value&quot; self.store.put(&#39;profile&#39;, **d)</code>"}, {"owner": {"reputation": 121, "user_id": 10744859, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y-R50GQu0rY/AAAAAAAAAAI/AAAAAAAAASE/WYUsyJQFaCE/photo.jpg?sz=128", "display_name": "Jarren Poulsen", "link": "https://stackoverflow.com/users/10744859/jarren-poulsen"}, "edited": false, "score": 0, "creation_date": 1547149341, "post_id": 54119644, "comment_id": 95103200, "body": "Excuse my ignorance...so the solution you gave me to append to a json file isn&#39;t working for me.  I&#39;ve spent the last few hours looking for a solution but your way seems to be unique.  It&#39;s probably because I don&#39;t understand what to put in for &quot;some value&quot;.  I&#39;ve tried hard coding it (that wrote to json, but didn&#39;t append). I&#39;ve tried &#39;self.first.text&#39; with no change."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1547074687, "creation_date": 1547074687, "answer_id": 54119644, "question_id": 54119276, "link": "https://stackoverflow.com/questions/54119276/using-jsonstore-in-kivy/54119644#54119644", "title": "Using jsonstore in Kivy", "body": "<p>Your code has several problems but the main one is that you do not understand how to expose any .kv widget to .py, one of the simplest ways is to use an ObjectProperty as you try to do but that property is not linked to the widget, I prefer to do the creation in the .kv for its simplicity.</p>\n\n<p>On the other hand I recommend you avoid the abuse of try-except since it hides errors, the best thing is to verify.</p>\n\n<p>Another error is that you are overwriting the value of profile in the .json, the idea is to save everything in one.</p>\n\n<p>Considering the above, the solution is:</p>\n\n<p><strong>*.py</strong></p>\n\n<pre><code>from kivy.app import App\nfrom kivy.storage.jsonstore import JsonStore\nfrom kivy.lang import Builder\nfrom kivy.uix.screenmanager import Screen, ScreenManager\nfrom kivy.core.window import Window\nfrom kivy.clock import Clock\n\n\nWindow.clearcolor = (0.02745098, 0.074509804, 0.121568627, 1)\nWindow.size = (2000, 900)\n\nclass TitleScreen(Screen):\n    pass\n\nclass MainScreen(Screen):\n    pass\n\nclass CreateProfile(Screen):\n    def __init__(self, **kwargs):\n        super(CreateProfile, self).__init__(**kwargs)\n        self.store = JsonStore(\"bco.json\")\n        Clock.schedule_once(lambda *args: self.load())\n\n    def save(self):\n        self.store.put('profile', \n            first = self.first.text,\n            middle = self.middle.text,\n            last = self.last.text)\n\n    def load(self):\n        if self.store.exists('profile'):\n            profile = self.store.get('profile')\n            v = [(\"first\", self.first), (\"middle\", self.middle), (\"last\", self.last)]\n            for key, ti in v:\n                val = profile.get(key)\n                if val:\n                    ti.text = val\n\nclass CreatePacket(Screen):\n    pass\n\nclass ScreenManagement(ScreenManager):\n    pass\n\npresentation = Builder.load_file(\"customwidget.kv\")\n\nclass CustomWidgetApp(App):\n    def build(self):\n        return presentation\n\nif __name__ == \"__main__\":\n    CustomWidgetApp().run()\n</code></pre>\n\n<p><strong>*.kv</strong></p>\n\n<pre><code>#: import FadeTransition kivy.uix.screenmanager.FadeTransition\n#: import hex kivy.utils.get_color_from_hex\n#: import FocusBehaviors kivy.uix.behaviors.focus\n\nScreenManagement:\n    transition: FadeTransition()\n    TitleScreen:\n    MainScreen:\n    CreateProfile:\n    CreatePacket:\n\n&lt;MainLabel@Label&gt;:\n    font_size:50\n    bold: True\n    size_hint_x: 1\n    size_hint_y: 1.85\n    color: 0.396078431, 0.803921569, 0.807843137, 1\n    font_name: '/home/jarren/PycharmProjects/BCO_Form_Filler/practice/pirulen rg.ttf'\n\n&lt;SubLabel@Label&gt;:\n    font_size: 35\n    bold: True\n    halign: \"center\"\n    size_hint_x: 1\n    size_hint_y: 1.5\n    color: 0.396078431, 0.803921569, 0.807843137, 1\n    font_name: '/home/jarren/PycharmProjects/BCO_Form_Filler/practice/pirulen rg.ttf'\n\n&lt;OtherLabel@Label&gt;:\n    font_size: 12\n    bold: True\n    color: 0.396078431, 0.803921569, 0.807843137, 1\n    font_name: '/home/jarren/PycharmProjects/BCO_Form_Filler/practice/pirulen rg.ttf'\n    text_size: self.size\n\n&lt;Button@Button&gt;:\n    font_size: 20\n    bold: True\n    color: 0.396078431, 0.803921569, 0.807843137, 1\n    font_name: '/home/jarren/PycharmProjects/BCO_Form_Filler/practice/pirulen rg.ttf'\n    background_color: 0.02745098, 0.074509804, 0.121568627, .01\n    canvas.before:\n        Color:\n            rgba: 0.396078431, 0.803921569, 0.807843137, 1\n        Line:\n            width: 2\n            rectangle: self.x, self.y, self.width, self.height\n    on_press: self.background_color = (0.396078431, 0.803921569, 0.807843137, 1)\n    on_release: self.background_color = (0.02745098, 0.074509804, 0.121568627, .01)\n\n# TODO: Create a focus behavior to \"Tab\" between widgets\n&lt;TextInput@TextInput&gt;:\n    font_size: 12\n    color: 0.396078431, 0.803921569, 0.807843137, 1\n    font_name: '/home/jarren/PycharmProjects/BCO_Form_Filler/practice/pirulen rg.ttf'\n    padding_x: 10\n    padding_y: 10\n    focus_next: None\n    focus_previous: None\n    unfocus_on_touch: True\n    background_color: 0.02745098, 0.074509804, 0.121568627, .01\n    canvas.before:\n        Color:\n            rgba: 0.396078431, 0.803921569, 0.807843137, 1\n        Line:\n            width: 1\n            rectangle: self.x, self.y, self.width, self.height\n\n&lt;TitleScreen&gt;:\n    id: \"title\"\n    FloatLayout:\n        MainLabel:\n            text: \"Easy Button\"\n            size_hint_x: 1\n            size_hint_y: 1.25\n\n        SubLabel:\n            text: 'Test'\n            size_hint_x: 1\n            size_hint_y: 1\n        Button:\n            text: \"Click Here To Continue\"\n            on_release: app.root.current = \"main\"\n            size_hint: (.75, .15)\n            pos_hint: {'x': .12, 'y': .2}\n\n&lt;MainScreen&gt;:\n    name: \"main\"\n    MainLabel:\n        text: \"Home Page\"\n    BoxLayout:\n        Button:\n            on_release: app.root.current = \"create_profile\"\n            text: \"Create Profile\"\n            size_hint: (.5, .15)\n        Button:\n            on_release: app.root.current = \"create_packet\"\n            text: \"Create Packet\"\n            size_hint: (.5, .15)\n\n&lt;CreateProfile&gt;:\n    name: \"create_profile\"\n\n    first: first\n    middle: middle\n    last: last\n\n    AnchorLayout:\n        anchor_x: 'center'\n        anchor_y: 'top'\n        MainLabel:\n            text: \"Create Profile\"\n            size_hint: (1, .15)\n\n    BoxLayout:\n        size_hint: (.95, .2)\n        pos_hint: {'x': 0, 'y': .85}\n        spacing: 10\n        padding: 10\n        halign: \"left\"\n\n        OtherLabel:\n            text: \"First\"\n\n        OtherLabel:\n            text: \"Middle\"\n\n        OtherLabel:\n            text: \"Last\"\n    BoxLayout:\n        size_hint: (.95, .07)\n        pos_hint: {'x': 0, 'y': .8}\n        spacing: 20\n        padding: 10\n        halign: \"right\"\n        text_size: self.size\n        TextInput:\n            id: first\n        TextInput:\n            id: middle\n        TextInput:\n            id: last    \n\n    BoxLayout:\n        Button:\n            on_release: app.root.current = \"main\"\n            text: \"back Home\"\n            size_hint: (.5, .15)\n        Button:\n            on_release: root.save()\n            text: \"Save Profile\"\n            size_hint: (.5, .15)\n\n&lt;CreatePacket&gt;:\n    name: \"create_packet\"\n    MainLabel:\n        text: \"Select Packet\"\n    FloatLayout:\n        Button:\n            on_release: app.root.current = \"main\"\n            text: \"back Home\"\n            size_hint: (1, .15)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 10744859, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y-R50GQu0rY/AAAAAAAAAAI/AAAAAAAAASE/WYUsyJQFaCE/photo.jpg?sz=128", "display_name": "Jarren Poulsen", "link": "https://stackoverflow.com/users/10744859/jarren-poulsen"}, "is_accepted": false, "score": 0, "last_activity_date": 1547574850, "last_edit_date": 1547574850, "creation_date": 1547562383, "answer_id": 54200839, "question_id": 54119276, "link": "https://stackoverflow.com/questions/54119276/using-jsonstore-in-kivy/54200839#54200839", "title": "Using jsonstore in Kivy", "body": "<p>I found a work around that still allows me to append information into a JSON by using TinyDB. Here is the updated code:</p>\n\n<pre><code>from kivy.app import App\nfrom kivy.storage.jsonstore import JsonStore\nfrom kivy.lang import Builder\nfrom kivy.uix.screenmanager import Screen, ScreenManager\nfrom kivy.core.window import Window\nfrom tinydb import TinyDB, Query\nfrom kivy.uix.listview import ListItemButton\n\n\nWindow.clearcolor = (0.02745098, 0.074509804, 0.121568627, 1)\nWindow.size = (2000, 900)\n\ndb = TinyDB('bcodb.json')\n\nclass ProfileListButton(ListItemButton):\n    pass\n\nclass TitleScreen(Screen):\n    pass\n\nclass MainScreen(Screen):\n    pass\n\nclass CreateProfile(Screen):\n    def __init__(self, **kwargs):\n        super(CreateProfile, self).__init__(**kwargs)\n        self.store = JsonStore(\"bcodb.json\")\n\n    def save(self):\n        db.insert({'first': self.first.text, 'middle': self.middle.text, 'last': self.last.text})\n\n    def update(self):\n        db.update({'first': self.first.text, 'middle': self.middle.text, 'last': self.last.text})\n\nclass CreatePacket(Screen):\n    pass\n\nclass ScreenManagement(ScreenManager):\n    pass\n\n\npresentation = Builder.load_file(\"customwidget2.kv\")\n\nclass CustomWidgetApp(App):\n    def build(self):\n        return presentation\n\nif __name__ == \"__main__\":\n    CustomWidgetApp().run()\n</code></pre>\n\n<p>It's pretty easy to figure out with a simple database-like program I'm trying to develop. The .kv file is the same.</p>\n"}], "owner": {"reputation": 121, "user_id": 10744859, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y-R50GQu0rY/AAAAAAAAAAI/AAAAAAAAASE/WYUsyJQFaCE/photo.jpg?sz=128", "display_name": "Jarren Poulsen", "link": "https://stackoverflow.com/users/10744859/jarren-poulsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1518, "favorite_count": 0, "accepted_answer_id": 54119644, "answer_count": 2, "score": 2, "last_activity_date": 1547574850, "creation_date": 1547072592, "last_edit_date": 1547074718, "question_id": 54119276, "link": "https://stackoverflow.com/questions/54119276/using-jsonstore-in-kivy", "title": "Using jsonstore in Kivy", "body": "<p>I created a GUI based off <a href=\"https://stackoverflow.com/questions/45266542/save-variables-in-kivy-android-with-jsonstore\">this question</a> while trying to teach myself how to use jsonstore.  I don't have the reputation points to add a comment so I'm asking my question here.  I think I have the basic idea down but for some reason I can't save the data to a json file. I get the following error: </p>\n\n<pre><code>AttributeError: 'NoneType' object has no attribute 'text'\n</code></pre>\n\n<p>I've tried following the documentation but I can't see anywhere where it would explain what I'm doing wrong.</p>\n\n<p><strong>main.py</strong></p>\n\n<pre><code>from kivy.storage.jsonstore import JsonStore\nfrom kivy.app import App\nfrom kivy.lang import Builder\nfrom kivy.uix.screenmanager import Screen, ScreenManager\nfrom kivy.core.window import Window\nfrom kivy.uix.boxlayout import BoxLayout\nfrom kivy.uix.widget import Widget\nfrom kivy.properties import BooleanProperty, ListProperty, StringProperty, ObjectProperty\n\n\nWindow.clearcolor = (0.02745098, 0.074509804, 0.121568627, 1)\nWindow.size = (2000, 900)\n\nclass TitleScreen(Screen):\n    pass\n\nclass MainScreen(Screen):\n    pass\n\nclass CreateProfile(Screen):\n    First = ObjectProperty()\n    Middle = ObjectProperty()\n    Last = ObjectProperty()\n\n    def __init__(self, **kwargs):\n        super(CreateProfile, self).__init__(**kwargs)\n        self.store = JsonStore(\"bco.json\")\n        self.load()\n\n    def save(self):\n        self.store.put('profile', first = self.label.text)\n        self.store.put('profile', middle = self.label.text)\n        self.store.put('profile', last = self.label.text)\n\n    def load(self):\n        try:\n            self.Last.text = self.store.get('profile')['score']\n        except KeyError:\n            pass\n\n\nclass CreatePacket(Screen):\n    pass\n\nclass ScreenManagement(ScreenManager):\n    pass\n\npresentation = Builder.load_file(\"customwidget.kv\")\n\nclass CustomWidgetApp(App):\n    def build(self):\n        return presentation\n\nif __name__ == \"__main__\":\n    CustomWidgetApp().run()\n</code></pre>\n\n<p><strong>customwidget.kv</strong></p>\n\n<pre><code>#: import FadeTransition kivy.uix.screenmanager.FadeTransition\n#: import hex kivy.utils.get_color_from_hex\n#: import FocusBehaviors kivy.uix.behaviors.focus\n\nScreenManagement:\n    transition: FadeTransition()\n    TitleScreen:\n    MainScreen:\n    CreateProfile:\n    CreatePacket:\n\n&lt;MainLabel@Label&gt;:\n    font_size:50\n    bold: True\n    size_hint_x: 1\n    size_hint_y: 1.85\n    color: 0.396078431, 0.803921569, 0.807843137, 1\n    font_name: '/home/jarren/PycharmProjects/BCO_Form_Filler/practice/pirulen rg.ttf'\n\n&lt;SubLabel@Label&gt;:\n    font_size: 35\n    bold: True\n    halign: \"center\"\n    size_hint_x: 1\n    size_hint_y: 1.5\n    color: 0.396078431, 0.803921569, 0.807843137, 1\n    font_name: '/home/jarren/PycharmProjects/BCO_Form_Filler/practice/pirulen rg.ttf'\n\n&lt;OtherLabel@Label&gt;:\n    font_size: 12\n    bold: True\n    color: 0.396078431, 0.803921569, 0.807843137, 1\n    font_name: '/home/jarren/PycharmProjects/BCO_Form_Filler/practice/pirulen rg.ttf'\n    text_size: self.size\n\n&lt;Button@Button&gt;:\n    font_size: 20\n    bold: True\n    color: 0.396078431, 0.803921569, 0.807843137, 1\n    font_name: '/home/jarren/PycharmProjects/BCO_Form_Filler/practice/pirulen rg.ttf'\n    background_color: 0.02745098, 0.074509804, 0.121568627, .01\n    canvas.before:\n        Color:\n            rgba: 0.396078431, 0.803921569, 0.807843137, 1\n        Line:\n            width: 2\n            rectangle: self.x, self.y, self.width, self.height\n    on_press: self.background_color = (0.396078431, 0.803921569, 0.807843137, 1)\n    on_release: self.background_color = (0.02745098, 0.074509804, 0.121568627, .01)\n\n# TODO: Create a focus behavior to \"Tab\" between widgets\n&lt;TextInput@TextInput&gt;:\n    font_size: 12\n    color: 0.396078431, 0.803921569, 0.807843137, 1\n    font_name: '/home/jarren/PycharmProjects/BCO_Form_Filler/practice/pirulen rg.ttf'\n    padding_x: 10\n    padding_y: 10\n    focus_next: None\n    focus_previous: None\n    unfocus_on_touch: True\n    background_color: 0.02745098, 0.074509804, 0.121568627, .01\n    canvas.before:\n        Color:\n            rgba: 0.396078431, 0.803921569, 0.807843137, 1\n        Line:\n            width: 1\n            rectangle: self.x, self.y, self.width, self.height\n\n&lt;TitleScreen&gt;:\n    id: \"title\"\n    FloatLayout:\n        MainLabel:\n            text: \"Easy Button\"\n            size_hint_x: 1\n            size_hint_y: 1.25\n\n        SubLabel:\n            text: 'Test'\n            size_hint_x: 1\n            size_hint_y: 1\n        Button:\n            text: \"Click Here To Continue\"\n            on_release: app.root.current = \"main\"\n            size_hint: (.75, .15)\n            pos_hint: {'x': .12, 'y': .2}\n\n&lt;MainScreen&gt;:\n    name: \"main\"\n    MainLabel:\n        text: \"Home Page\"\n    BoxLayout:\n        Button:\n            on_release: app.root.current = \"create_profile\"\n            text: \"Create Profile\"\n            size_hint: (.5, .15)\n        Button:\n            on_release: app.root.current = \"create_packet\"\n            text: \"Create Packet\"\n            size_hint: (.5, .15)\n\n&lt;CreateProfile&gt;:\n    name: \"create_profile\"\n\n    AnchorLayout:\n        anchor_x: 'center'\n        anchor_y: 'top'\n        MainLabel:\n            text: \"Create Profile\"\n            size_hint: (1, .15)\n\n    BoxLayout:\n        size_hint: (.95, .2)\n        pos_hint: {'x': 0, 'y': .85}\n        spacing: 10\n        padding: 10\n        halign: \"left\"\n\n        OtherLabel:\n            text: \"First\"\n\n        OtherLabel:\n            text: \"Middle\"\n\n        OtherLabel:\n            text: \"Last\"\n\n    BoxLayout:\n        size_hint: (.95, .07)\n        pos_hint: {'x': 0, 'y': .8}\n        spacing: 20\n        padding: 10\n        halign: \"right\"\n        text_size: self.size\n\n        TextInput:\n            id: 'First'\n\n\n        TextInput:\n            id: \"Middle\"\n\n\n        TextInput:\n            id: 'Last'    \n\n    BoxLayout:\n\n        Button:\n            on_release: app.root.current = \"main\"\n            text: \"back Home\"\n            size_hint: (.5, .15)\n        Button:\n            on_release: root.save()\n            text: \"Save Profile\"\n            size_hint: (.5, .15)\n\n&lt;CreatePacket&gt;:\n    name: \"create_packet\"\n    MainLabel:\n        text: \"Select Packet\"\n    FloatLayout:\n        Button:\n            on_release: app.root.current = \"main\"\n            text: \"back Home\"\n            size_hint: (1, .15)\n</code></pre>\n"}, {"tags": ["python", "flask"], "comments": [{"owner": {"reputation": 5684, "user_id": 10172408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BcxZ9.png?s=128&g=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/10172408/nathan"}, "edited": false, "score": 0, "creation_date": 1547072885, "post_id": 54119230, "comment_id": 95071216, "body": "Hi, what&#39;s the value of your environment variable: APP_SETTINGS? This is where your flask app is loading it&#39;s config setting from."}, {"owner": {"reputation": 1263, "user_id": 1105521, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/6846ab80fd11b3cf89bdc026ddf1a84f?s=128&d=identicon&r=PG", "display_name": "Apprentice Programmer", "link": "https://stackoverflow.com/users/1105521/apprentice-programmer"}, "reply_to_user": {"reputation": 5684, "user_id": 10172408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BcxZ9.png?s=128&g=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/10172408/nathan"}, "edited": false, "score": 0, "creation_date": 1547073179, "post_id": 54119230, "comment_id": 95071312, "body": "@NathanWright its &quot;config.DevelopmentConfig&quot;.  its actually just instantiating the object from the config file"}, {"owner": {"reputation": 5684, "user_id": 10172408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BcxZ9.png?s=128&g=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/10172408/nathan"}, "edited": false, "score": 0, "creation_date": 1547140932, "post_id": 54119230, "comment_id": 95099169, "body": "Thanks, I wanted to see what configuration your application was trying to instantiate based on that environment variable. Can you change the APP_SETTINGS variable to just: DevelopmentConfig? Your ProductionConfig, DevelopmentConfig, and TestingConfig are inheriting from your base Config so you shouldn&#39;t need to say &quot;config.DevelopmentConfig&quot;"}, {"owner": {"reputation": 1263, "user_id": 1105521, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/6846ab80fd11b3cf89bdc026ddf1a84f?s=128&d=identicon&r=PG", "display_name": "Apprentice Programmer", "link": "https://stackoverflow.com/users/1105521/apprentice-programmer"}, "reply_to_user": {"reputation": 5684, "user_id": 10172408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BcxZ9.png?s=128&g=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/10172408/nathan"}, "edited": false, "score": 0, "creation_date": 1547148257, "post_id": 54119230, "comment_id": 95102683, "body": "@NathanWright got it In my .env file, im doing <code>export APP_SETTINGS=&quot;config.DevelopmentConfig&quot;</code> then passing that to the from_object function. Ill give your suggestion a try and see where it goes"}, {"owner": {"reputation": 173, "user_id": 827454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b5aced1b2512d00fc44eb3a33b64043?s=128&d=identicon&r=PG", "display_name": "ryentzer", "link": "https://stackoverflow.com/users/827454/ryentzer"}, "edited": false, "score": 0, "creation_date": 1551061490, "post_id": 54119230, "comment_id": 96488592, "body": "Do you have a <code>.env</code> file that has <code>APP_SETTINGS=&quot;config.DevelopmentConfig&quot;</code> set? Also, you need to install python-dotenv for flask to look for the .env file."}], "owner": {"reputation": 1263, "user_id": 1105521, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/6846ab80fd11b3cf89bdc026ddf1a84f?s=128&d=identicon&r=PG", "display_name": "Apprentice Programmer", "link": "https://stackoverflow.com/users/1105521/apprentice-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 401, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547072353, "creation_date": 1547072353, "question_id": 54119230, "link": "https://stackoverflow.com/questions/54119230/flask-run-command-not-respecting-config-file-env-var", "title": "Flask run command not respecting config file env var", "body": "<p>When I call flask run, the app itself is not respecting my local env configuration. Im expecting the environment to be in debug mode and development, but the console output says otherwise </p>\n\n<pre><code>flask run\n* Serving Flask app \"flaskr/app.py\"\n* Environment: production\nWARNING: Do not use the development server in a production environment.\nUse a production WSGI server instead.\n* Debug mode: off\n&lt;Config {'ENV': 'development', 'DEBUG': True, 'TESTING': False, \n'PROPAGATE_EXCEPTIONS': None, 'PRESERVE_CONTEXT_ON_EXCEPTION': None, \n'SECRET_KEY': 'this-really-needs-to-be-changed', \n'PERMANENT_SESSION_LIFETIME': datetime.timedelta(days=31), \n'USE_X_SENDFILE': False, 'SERVER_NAME': None, 'APPLICATION_ROOT': '/', \n'SESSION_COOKIE_NAME': 'session', 'SESSION_COOKIE_DOMAIN': None, \n'SESSION_COOKIE_PATH': None, 'SESSION_COOKIE_HTTPONLY': True, \n'SESSION_COOKIE_SECURE': False, 'SESSION_COOKIE_SAMESITE': None, \n'SESSION_REFRESH_EACH_REQUEST': True, 'MAX_CONTENT_LENGTH': None, \n'SEND_FILE_MAX_AGE_DEFAULT': datetime.timedelta(seconds=43200), \n'TRAP_BAD_REQUEST_ERRORS': None, 'TRAP_HTTP_EXCEPTIONS': False, \n'EXPLAIN_TEMPLATE_LOADING': False, 'PREFERRED_URL_SCHEME': 'http', \n'JSON_AS_ASCII': True, 'JSON_SORT_KEYS': True, \n'JSONIFY_PRETTYPRINT_REGULAR': False, 'JSONIFY_MIMETYPE': \n'application/json', 'TEMPLATES_AUTO_RELOAD': None, 'MAX_COOKIE_SIZE': 4093, 'CSRF_ENABLED': True, 'DEVELOPMENT': True}&gt;\n</code></pre>\n\n<p>config.py file</p>\n\n<pre><code>import os\nbasedir = os.path.abspath(os.path.dirname(__file__))\n\n\nclass Config(object):\n    DEBUG = False\n    TESTING = False\n    CSRF_ENABLED = True\n    SECRET_KEY = 'this-really-needs-to-be-changed'\n\n\nclass ProductionConfig(Config):\n    DEBUG = False\n\n\nclass StagingConfig(Config):\n    DEVELOPMENT = True\n    DEBUG = True\n\n\nclass DevelopmentConfig(Config):\n    ENV = 'development'\n    DEVELOPMENT = True\n    DEBUG = True\n\n\nclass TestingConfig(Config):\n    TESTING = True\n</code></pre>\n\n<p>app.py file</p>\n\n<pre><code>app = Flask(__name__)\napp.config.from_object(os.environ['APP_SETTINGS'])\nlogger = app.logger\n\n\nprint(app.config)\n</code></pre>\n\n<p>Am i missing something or misunderstanding how the Flask CLI works?</p>\n"}, {"tags": ["python", "frequency-analysis"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1547072275, "post_id": 54119168, "comment_id": 95070998, "body": "As explained in the introductory tour, this site is a repository of useful questions and their answers, <i>not a help forum</i>. We are not going to do the detailed formatting work, or look up input validation for you: that&#39;s <i>your</i> job. Please take the tour, visit the help center and especially read <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a> and <a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\">&quot;Can Someone Help Me?&quot; is not a valid SO question</a> to learn how to use this site effectively."}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1547072279, "post_id": 54119168, "comment_id": 95070999, "body": "if <code>len(originalinput)==0:</code> throw error? What exactly you are counting is not clear though. Why word-frequency is tagged when you are actually counting letter frequency"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1547072302, "post_id": 54119168, "comment_id": 95071011, "body": "Please explain why no dictionaries."}, {"owner": {"reputation": 109227, "user_id": 1709587, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/cP8pZ.jpg?s=128&g=1", "display_name": "Mark Amery", "link": "https://stackoverflow.com/users/1709587/mark-amery"}, "edited": false, "score": 1, "creation_date": 1547081803, "post_id": 54119168, "comment_id": 95073385, "body": "-1 and voting to delete because the edit here has invalidated existing answers, I&#39;m not sure if it&#39;s appropriate for me to rollback such an edit if it happened post-closure, and I can&#39;t see this Q having lasting value anyway."}, {"owner": {"reputation": 7, "user_id": 10892285, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Tx43vhsHrbc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZPQVY4y1mNqLTKw3_0r6zbECH9kg/mo/photo.jpg?sz=128", "display_name": "Ethan K", "link": "https://stackoverflow.com/users/10892285/ethan-k"}, "edited": false, "score": 0, "creation_date": 1547085730, "post_id": 54119168, "comment_id": 95074156, "body": "I agree I wasnt rlly thinking when I posted this"}, {"owner": {"reputation": 7, "user_id": 10892285, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Tx43vhsHrbc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZPQVY4y1mNqLTKw3_0r6zbECH9kg/mo/photo.jpg?sz=128", "display_name": "Ethan K", "link": "https://stackoverflow.com/users/10892285/ethan-k"}, "edited": false, "score": 0, "creation_date": 1547085756, "post_id": 54119168, "comment_id": 95074163, "body": "feel free to delete whoever has the power to do that as I for some reason cant"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 10892285, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Tx43vhsHrbc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZPQVY4y1mNqLTKw3_0r6zbECH9kg/mo/photo.jpg?sz=128", "display_name": "Ethan K", "link": "https://stackoverflow.com/users/10892285/ethan-k"}, "edited": false, "score": 0, "creation_date": 1547072758, "post_id": 54119211, "comment_id": 95071172, "body": "Thanks this was really useful!"}], "tags": [], "owner": {"reputation": 4872, "user_id": 7276107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c326ce64e1224eac46efdf93afa03c9?s=128&d=identicon&r=PG&f=1", "display_name": "BlueSheepToken", "link": "https://stackoverflow.com/users/7276107/bluesheeptoken"}, "is_accepted": true, "score": 0, "last_activity_date": 1547136668, "last_edit_date": 1547136668, "creation_date": 1547072291, "answer_id": 54119211, "question_id": 54119168, "link": "https://stackoverflow.com/questions/54119168/counting-the-frequency-of-letters-in-a-string-python/54119211#54119211", "title": "Counting the Frequency of Letters in a string (Python)", "body": "<p>You could just check the input with <code>if else</code> and <code>raise</code> an Error if needed with a custom message</p>\n\n<pre><code>if original_input == \"\":\n    raise RuntimeError(\"Empty input\")\nelse:\n    # Your code goes there\n</code></pre>\n\n<p>As a side not, <code>input()</code> is enough, no need to add quotes <code>\"\"</code></p>\n\n<p>Edit: This question was edited, the original question was to check if an input is empty.</p>\n\n<p>Second edit:</p>\n\n<p>If you want your code to print letters as in your output, you should iterate over your word instead over your alphabet:</p>\n\n<pre><code>for c in word:\n     print(\"The letter\", c ,\"occured\", word.count(c), \"times\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "is_accepted": false, "score": -1, "last_activity_date": 1547073893, "last_edit_date": 1547073893, "creation_date": 1547072605, "answer_id": 54119279, "question_id": 54119168, "link": "https://stackoverflow.com/questions/54119168/counting-the-frequency-of-letters-in-a-string-python/54119279#54119279", "title": "Counting the Frequency of Letters in a string (Python)", "body": "<p>As @BlueSheepToken mentioned you can use simple <code>if</code> <code>else</code> statement. Here is your code below incorporating things that are mentioned.</p>\n\n<pre><code>from collections import defaultdict\n\noriginalinput = input()\n\nif originalinput == \"\":\n    raise RuntimeError(\"Empty input\")\nelse:\n\n    result = defaultdict(int)\n\n    for char in list(originalinput.lower()):\n        result[char] += 1\n\n    for letter, num in result.items():\n        print(f'The letter {letter} occurred {num} time(s)')  \n\n    #Hello\n    #The letter h occurred 1 time(s)\n    #The letter e occurred 1 time(s)\n    #The letter l occurred 2 time(s)\n    #The letter o occurred 1 time(s)\n</code></pre>\n\n<p>Using <code>defaultdict</code> will help you in this case as all the unused <code>key</code>s will be <code>0</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 361, "user_id": 6392884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62fd42d8d435ada806294ea47db9bfa5?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Navarrete", "link": "https://stackoverflow.com/users/6392884/juan-navarrete"}, "is_accepted": false, "score": -1, "last_activity_date": 1547073354, "creation_date": 1547073354, "answer_id": 54119406, "question_id": 54119168, "link": "https://stackoverflow.com/questions/54119168/counting-the-frequency-of-letters-in-a-string-python/54119406#54119406", "title": "Counting the Frequency of Letters in a string (Python)", "body": "<p>I would recommend using Counter from the collections library. </p>\n\n<pre><code>    from collections import Counter\n\n    print(Counter('sample text'))\n\n    #Output: Counter({'t': 2, 'e': 2, 'l': 1, 's': 1, 'a': 1, ' ': 1, 'p': 1, 'm': 1, 'x': 1})\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 10892285, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Tx43vhsHrbc/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZPQVY4y1mNqLTKw3_0r6zbECH9kg/mo/photo.jpg?sz=128", "display_name": "Ethan K", "link": "https://stackoverflow.com/users/10892285/ethan-k"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "closed_date": 1547073002, "accepted_answer_id": 54119211, "answer_count": 3, "score": -6, "last_activity_date": 1547136668, "creation_date": 1547072043, "last_edit_date": 1547073695, "question_id": 54119168, "link": "https://stackoverflow.com/questions/54119168/counting-the-frequency-of-letters-in-a-string-python", "closed_reason": "Needs more focus", "title": "Counting the Frequency of Letters in a string (Python)", "body": "<p>So I'm trying to count the frequency of letters in a user inputted string without using python dictionaries...\nI want the output to be as follows (using letter H as an example)</p>\n\n<pre><code>\"The letter H occurred 1 time(s).\" \n</code></pre>\n\n<p>The problem I have is that the program prints the letters in alphabetical order\nbut I want the program to print the frequency of the letters in the order that they were given in the input...</p>\n\n<p>an example of this would be if I entered \"Hello\"\nthe program would print</p>\n\n<pre><code>\"The letter e occurred 1 time(s)\"\n\"The letter h occurred 1 time(s)\"\n\"The letter l occurred 2 time(s)\"\n\"The letter o occurred 1 time(s)\"\n</code></pre>\n\n<p>but I want the output to be as follows</p>\n\n<pre><code>\"The letter h occurred 1 time(s)\"\n\"The letter e occurred 1 time(s)\"\n\"The letter l occurred 2 time(s)\"\n\"The letter o occurred 1 time(s)\"\n</code></pre>\n\n<p>This is the code that I have so far:</p>\n\n<pre><code>originalinput = input(\"\")\nif originalinput == \"\":\n    print(\"There are no letters.\")\nelse:\n  word = str.lower(originalinput)\n\n  Alphabet= ['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z']\n\n  for i in range(0,26): \n    if word.count(Alphabet[i]) &gt; 0:\n      print(\"The letter\", Alphabet[i] ,\"occured\", word.count(Alphabet[i]), \"times\")\n</code></pre>\n"}, {"tags": ["python", "r", "excel"], "answers": [{"tags": [], "owner": {"reputation": 83, "user_id": 9886775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b8feeebec3ab05010abbfa73c99516b?s=128&d=identicon&r=PG&f=1", "display_name": "Nick de Silva", "link": "https://stackoverflow.com/users/9886775/nick-de-silva"}, "is_accepted": true, "score": 1, "last_activity_date": 1547074054, "creation_date": 1547074054, "answer_id": 54119513, "question_id": 54119164, "link": "https://stackoverflow.com/questions/54119164/how-to-convert-a-nested-list-into-a-dataframe/54119513#54119513", "title": "How to convert a nested list into a dataframe?", "body": "<p>Assuming you can convert the bullet points into a Python dictionary (as this would probably be the best way to store everything if it's nested):</p>\n\n<pre><code>import pandas as pd\n\nparts = {  \n     'Fasteners':{  \n        'Screws':{  \n           'Machine':['Round Head','Pan Head','Flat Head'],\n           'Tapping':['Type AB','Type A']\n        }\n     }\n}\n\ndf_dict = {'Parent': [], 'Child': [], 'Type': [], 'Style': []}\nfor parent, v1 in parts.items():\n    for child, v2 in v1.items():\n        for child_type, v3 in v2.items():\n            for style in v3:\n                df_dict['Parent'].append(parent)\n                df_dict['Child'].append(child)\n                df_dict['Type'].append(child_type) # Not named type because type is a native Python function\n                df_dict['Style'].append(style)\n\ndf = pd.DataFrame(df_dict)\nprint(df)\n</code></pre>\n\n<p>Pandas works best when creating a dataframe if you have a dictionary where each key is the column and each value is a list of values (in order with each other). What I'm doing here is looping through every key and value in the nested dictionary so that I can generate the list, repeating where necessary (in a way that's easy to understand). The <code>parts.items()</code> creates an iterator for a dictionary where it will loop through every key and its corresponding value. Here's the output:</p>\n\n<pre><code>      Parent   Child     Type       Style\n0  Fasteners  Screws  Machine  Round Head\n1  Fasteners  Screws  Machine    Pan Head\n2  Fasteners  Screws  Machine   Flat Head\n3  Fasteners  Screws  Tapping     Type AB\n4  Fasteners  Screws  Tapping      Type A\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 4191672, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/GqfIf.jpg?s=128&g=1", "display_name": "eggwhites", "link": "https://stackoverflow.com/users/4191672/eggwhites"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 0, "closed_date": 1547075684, "accepted_answer_id": 54119513, "answer_count": 1, "score": -3, "last_activity_date": 1547074054, "creation_date": 1547072039, "last_edit_date": 1547072172, "question_id": 54119164, "link": "https://stackoverflow.com/questions/54119164/how-to-convert-a-nested-list-into-a-dataframe", "closed_reason": "Needs more focus", "title": "How to convert a nested list into a dataframe?", "body": "<p>I have a long list of parts that are bulleted in a word doc. I need to turn this into a data table. </p>\n\n<p>Example Input List:</p>\n\n<pre><code>= Fasteners\n\n    o Screws\n\n        - Machine\n\n            +Round Head\n\n            +Pan Head\n\n            +Flat Head\n\n       - Tapping\n\n            +Type AB\n\n            +Type A\n</code></pre>\n\n<p>Example Output Table: Thanks for looking!!</p>\n\n<pre><code>Parent   |Child |Type   |Style                               \nFasteners|Screws|Machine|Round Head    \nFasteners|Screws|Machine|Pan Head    \nFasteners|Screws|Machine|Flat Head    \nFasteners|Screws|Tapping|Type AB    \nFasteners|Screws|Tapping|Type A\n</code></pre>\n\n<p>etc etc</p>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "network-programming", "paramiko"], "owner": {"reputation": 87, "user_id": 10672320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2f62cac270f0a85c11483db375998d?s=128&d=identicon&r=PG&f=1", "display_name": "searching1", "link": "https://stackoverflow.com/users/10672320/searching1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 1, "closed_date": 1613381727, "answer_count": 0, "score": 1, "last_activity_date": 1547071606, "creation_date": 1547071606, "question_id": 54119091, "link": "https://stackoverflow.com/questions/54119091/telnet-to-switch-from-jump-start-serverlinux", "closed_reason": "Duplicate", "title": "Telnet to switch from jump start server(linux)", "body": "<p>I just want to ask if anyone here has script or idea what method, library etc should. My target is to SHH first from my workstation to Linux jumpstart server then from jumpstart server I'll access the network devices like switch and routers to execute some show commands.</p>\n\n<p>PYTHON SCRIPT ----SSH---> Jumpstart server(ubuntu) ----Telnet---> Network Devices (Cisco)</p>\n\n<pre><code>import base64, time, sys\nimport paramiko, getpass, telnetlib\n\n#ENTER Password\n##pword = getpass.getpass('Password: ')\n\nclient = paramiko.SSHClient()\nclient.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nclient.connect(hostname='xxxxx', username='xxxxx', password='xxxxx')\nstdin, stdout, stderr = client.exec_command('pwd')\n\nfor line in stdout:\n    print('Teton: ' + line.strip('\\n'))\n    client.close()\n</code></pre>\n\n<p>I'm now able to access the jumpstart server from my PC, the next thing is just to telnet from the jumpstart server? </p>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "django", "python-3.x"], "comments": [{"owner": {"reputation": 1034, "user_id": 7078425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m2HT-afuPlM/AAAAAAAAAAI/AAAAAAAAADs/5LsAwrzS704/photo.jpg?sz=128", "display_name": "Kevin He", "link": "https://stackoverflow.com/users/7078425/kevin-he"}, "edited": false, "score": 0, "creation_date": 1547075378, "post_id": 54119072, "comment_id": 95071931, "body": "check you Django version, on_delete in required after 2.0 but it seems moderation is not up to date with it"}, {"owner": {"reputation": 33, "user_id": 8213742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/410cc2cdcc774b24f959007dd35f8c88?s=128&d=identicon&r=PG", "display_name": "marc", "link": "https://stackoverflow.com/users/8213742/marc"}, "reply_to_user": {"reputation": 1034, "user_id": 7078425, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-m2HT-afuPlM/AAAAAAAAAAI/AAAAAAAAADs/5LsAwrzS704/photo.jpg?sz=128", "display_name": "Kevin He", "link": "https://stackoverflow.com/users/7078425/kevin-he"}, "edited": false, "score": 0, "creation_date": 1547149555, "post_id": 54119072, "comment_id": 95103299, "body": "thanks ,latest commit on the master branch helped fix it"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 8213742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/410cc2cdcc774b24f959007dd35f8c88?s=128&d=identicon&r=PG", "display_name": "marc", "link": "https://stackoverflow.com/users/8213742/marc"}, "edited": false, "score": 0, "creation_date": 1547075261, "post_id": 54119194, "comment_id": 95071906, "body": "thanks Borut,it&#39;s a package I have installed ,I didn&#39;t create any related model file yet afterwards."}], "tags": [], "owner": {"reputation": 2729, "user_id": 8827624, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19facdf8462cacf0efc8e56d9c2d82b6?s=128&d=identicon&r=PG&f=1", "display_name": "Borut", "link": "https://stackoverflow.com/users/8827624/borut"}, "is_accepted": false, "score": 0, "last_activity_date": 1547072232, "creation_date": 1547072232, "answer_id": 54119194, "question_id": 54119072, "link": "https://stackoverflow.com/questions/54119072/error-while-adding-moderation-in-installed-apps/54119194#54119194", "title": "Error while adding &quot;moderation&quot; in INSTALLED_APPS", "body": "<p>In your <code>ModeratedObject</code> model in <code>moderation/models.py</code> you have a model field ForeignKey with missing on_delete argument.</p>\n\n<p>See example from <a href=\"https://docs.djangoproject.com/en/2.1/ref/models/fields/#django.db.models.ForeignKey\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<pre><code>from django.db import models\n\nclass Car(models.Model):\n    manufacturer = models.ForeignKey(\n        'Manufacturer',\n        on_delete=models.CASCADE,\n    )\n</code></pre>\n\n<p>Additional documentation on on_delete argument is <a href=\"https://docs.djangoproject.com/en/2.1/ref/models/fields/#arguments\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 8213742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/410cc2cdcc774b24f959007dd35f8c88?s=128&d=identicon&r=PG", "display_name": "marc", "link": "https://stackoverflow.com/users/8213742/marc"}, "edited": false, "score": 0, "creation_date": 1547149431, "post_id": 54119802, "comment_id": 95103242, "body": "Thanks Alasdair for the help,your input help me fix the issue"}], "tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": false, "score": 1, "last_activity_date": 1547075644, "creation_date": 1547075644, "answer_id": 54119802, "question_id": 54119072, "link": "https://stackoverflow.com/questions/54119072/error-while-adding-moderation-in-installed-apps/54119802#54119802", "title": "Error while adding &quot;moderation&quot; in INSTALLED_APPS", "body": "<p>The latest release of <a href=\"https://pypi.org/project/django-moderation/\" rel=\"nofollow noreferrer\">Django-moderation</a> was in 2017, so it doesn't support Django 2.</p>\n\n<p>Pull request <a href=\"https://github.com/dominno/django-moderation/commit/565481f1832114da2d0c48b0c23977d4d3a9b914\" rel=\"nofollow noreferrer\">#169</a> for Django 2 has been merged, but there hasn't been a release since then. You could try installing the latest commit on the master branch, for example:</p>\n\n<pre><code>pip install git+git://github.com/dominno/django-moderation.git@565481f1832114da2d0c48b0c23977d4d3a9b914\n</code></pre>\n\n<p>(in your case, you would use <code>pip3</code> instead of <code>pip</code>, but it would be a good idea to start using virtual environments instead of the system Python. Once you have activated a Python 3 virtual environment, you use <code>python</code> and <code>pip</code> instead of <code>python3</code> and <code>pip3</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 8213742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/410cc2cdcc774b24f959007dd35f8c88?s=128&d=identicon&r=PG", "display_name": "marc", "link": "https://stackoverflow.com/users/8213742/marc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1547075704, "creation_date": 1547071483, "last_edit_date": 1547075704, "question_id": 54119072, "link": "https://stackoverflow.com/questions/54119072/error-while-adding-moderation-in-installed-apps", "title": "Error while adding &quot;moderation&quot; in INSTALLED_APPS", "body": "<p>I want to use django-moderation in my Django project. I have downloaded the app with pip3, the issue is when I added the app to <code>INSTALLED_APPS</code>, I have the following exception. Can you please advise how to get rid of this?</p>\n\n<pre><code>python3 manage.py runserver\nUnhandled exception in thread started by &lt;function check_errors.&lt;locals&gt;.wrapper at 0x1024977b8&gt;\nTraceback (most recent call last):\n  File \"/usr/local/lib/python3.7/site-packages/django/utils/autoreload.py\", line 225, in wrapper\n    fn(*args, **kwargs)\n  File \"/usr/local/lib/python3.7/site-packages/django/core/management/commands/runserver.py\", line 112, in inner_run\n    autoreload.raise_last_exception()\n  File \"/usr/local/lib/python3.7/site-packages/django/utils/autoreload.py\", line 248, in raise_last_exception\n    raise _exception[1]\n  File \"/usr/local/lib/python3.7/site-packages/django/core/management/__init__.py\", line 327, in execute\n    autoreload.check_errors(django.setup)()\n  File \"/usr/local/lib/python3.7/site-packages/django/utils/autoreload.py\", line 225, in wrapper\n    fn(*args, **kwargs)\n  File \"/usr/local/lib/python3.7/site-packages/django/__init__.py\", line 24, in setup\n    apps.populate(settings.INSTALLED_APPS)\n  File \"/usr/local/lib/python3.7/site-packages/django/apps/registry.py\", line 112, in populate\n    app_config.import_models()\n  File \"/usr/local/lib/python3.7/site-packages/django/apps/config.py\", line 198, in import_models\n    self.models_module = import_module(models_module_name)\n  File \"/usr/local/Cellar/python/3.7.1/Frameworks/Python.framework/Versions/3.7/lib/python3.7/importlib/__init__.py\", line 127, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 1006, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 983, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 967, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 677, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 728, in exec_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n  File \"/usr/local/lib/python3.7/site-packages/moderation/models.py\", line 41, in &lt;module&gt;\n    class ModeratedObject(models.Model):\n  File \"/usr/local/lib/python3.7/site-packages/moderation/models.py\", line 43, in ModeratedObject\n    editable=False)\nTypeError: __init__() missing 1 required positional argument: 'on_delete\n</code></pre>\n"}, {"tags": ["python", "generator", "audio-streaming"], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1547072005, "creation_date": 1547072005, "answer_id": 54119155, "question_id": 54119044, "link": "https://stackoverflow.com/questions/54119044/how-do-i-consume-messages-that-are-available-right-now-in-a-python-generator/54119155#54119155", "title": "How do I consume messages that are available right now in a python generator?", "body": "<p>You can generally handle this with a loop on the generator results:</p>\n\n<pre><code>for message in streaming_transcribe(stream):\n    # Process message\n    pass\n    if check_endpoint(): break\n</code></pre>\n"}], "owner": {"reputation": 2213, "user_id": 1119979, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/863badf665d0c783a35987a34b9a5050?s=128&d=identicon&r=PG", "display_name": "Chakradar Raju", "link": "https://stackoverflow.com/users/1119979/chakradar-raju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547072005, "creation_date": 1547071383, "question_id": 54119044, "link": "https://stackoverflow.com/questions/54119044/how-do-i-consume-messages-that-are-available-right-now-in-a-python-generator", "title": "How do I consume messages that are available right now in a python generator?", "body": "<p>I've a audio stream available as a python generator, and a external endpoint that tells if I've to run google speech streaming recognize on the input audio stream.</p>\n\n<p>Is it possible to consume/destroy all messages until now and proceed to transcribe from this point onwards? Something like this:</p>\n\n<pre><code>while disabled:\n    time.sleep(30)\n    for _ in stream:\n        pass\n    disabled = check_endpoint()\nstreaming_transcribe(stream)\n</code></pre>\n"}, {"tags": ["python", "cython"], "comments": [{"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1547071994, "post_id": 54119025, "comment_id": 95070894, "body": "Your screenshot does not show any compiled result. Did you install those properly?"}, {"owner": {"reputation": 981, "user_id": 2227222, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d80812002213736d9576158000e84d98?s=128&d=identicon&r=PG", "display_name": "Hans", "link": "https://stackoverflow.com/users/2227222/hans"}, "reply_to_user": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1547072367, "post_id": 54119025, "comment_id": 95071033, "body": "@Bakuriu: The C code is compiled using <code>setup.py</code>. I have added the details in the question above. Please review."}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1547072499, "post_id": 54119025, "comment_id": 95071087, "body": "Yes but compiling is not enough you have to <i>install</i> those in your virtualenv/interpreter."}, {"owner": {"reputation": 981, "user_id": 2227222, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d80812002213736d9576158000e84d98?s=128&d=identicon&r=PG", "display_name": "Hans", "link": "https://stackoverflow.com/users/2227222/hans"}, "reply_to_user": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1547073090, "post_id": 54119025, "comment_id": 95071282, "body": "@Bakuriu: How do I do that?"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 5034321, "user_type": "registered", "profile_image": "https://graph.facebook.com/950820358274863/picture?type=large", "display_name": "Alexander Ponamarev", "link": "https://stackoverflow.com/users/5034321/alexander-ponamarev"}, "is_accepted": true, "score": 1, "last_activity_date": 1547315489, "creation_date": 1547315489, "answer_id": 54162333, "question_id": 54119025, "link": "https://stackoverflow.com/questions/54119025/pycharm-does-not-recognize-a-pyx-cython-file/54162333#54162333", "title": "PyCharm does not recognize a .pyx Cython file", "body": "<p>When you compile your module with cythonize, the resulting module will be put into a subfolder. By default, this subfolder is not in the PATHS list. To fix this problem you can just move the resulting file .dll file into the folder where your hello.py and hello.pyx are located.</p>\n\n<p>An alternative approach is to add Extension like so:</p>\n\n<pre><code>from distutils.core import setup\nfrom Cython.Build import cythonize\n\nfrom distutils.extension import Extension\nexts = [Extension(name='hello',sources=['hello.pyx'])]\n\nsetup(name='Hello world app',\n      ext_modules=cythonize(exts)\n      )\n</code></pre>\n\n<p>And then compile with:</p>\n\n<pre><code>python setup.py build_ext --inplace\n</code></pre>\n\n<p>This code will put resulting .dll into the same folder as your source files.</p>\n"}], "owner": {"reputation": 981, "user_id": 2227222, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/d80812002213736d9576158000e84d98?s=128&d=identicon&r=PG", "display_name": "Hans", "link": "https://stackoverflow.com/users/2227222/hans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 997, "favorite_count": 0, "accepted_answer_id": 54162333, "answer_count": 1, "score": 0, "last_activity_date": 1547315489, "creation_date": 1547071305, "last_edit_date": 1547072314, "question_id": 54119025, "link": "https://stackoverflow.com/questions/54119025/pycharm-does-not-recognize-a-pyx-cython-file", "title": "PyCharm does not recognize a .pyx Cython file", "body": "<p>I am trying to invoke a Cython file in a Python script. I have read <a href=\"https://stackoverflow.com/a/36994290/2227222\">this answer</a> and followed the instruction. However, even though I have successfully compiled the C code, PyCharm does not recognize the Cython file 'hello.pyx' while executing the import command, as shown in the screenshot below. What is the remedy?</p>\n\n<p><a href=\"https://i.stack.imgur.com/y7N61.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y7N61.png\" alt=\"enter image description here\"></a></p>\n\n<p>The Cython file <code>hello.c</code> is generated by <code>setup.py</code> the content of which is shown below.</p>\n\n<pre><code>from distutils.core import setup\nfrom Cython.Build import cythonize\n\nsetup(name='Hello world app',\n      ext_modules=cythonize(\"hello.pyx\")\n      )\n</code></pre>\n"}, {"tags": ["python", "floating-point"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 2, "creation_date": 1547071260, "post_id": 54118957, "comment_id": 95070608, "body": "For the number <code>1</code>, would you want <code>0000001</code>?  Or <code>1.000000</code>"}, {"owner": {"reputation": 210, "user_id": 10500460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cae9c3fa1584c7d4b3d0646c88bed6b5?s=128&d=identicon&r=PG&f=1", "display_name": "J_Zoio", "link": "https://stackoverflow.com/users/10500460/j-zoio"}, "edited": false, "score": 0, "creation_date": 1547071361, "post_id": 54118957, "comment_id": 95070647, "body": "Yea exactly, hence the dependability on the program you&#39;re coding."}, {"owner": {"reputation": 210, "user_id": 10500460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cae9c3fa1584c7d4b3d0646c88bed6b5?s=128&d=identicon&r=PG&f=1", "display_name": "J_Zoio", "link": "https://stackoverflow.com/users/10500460/j-zoio"}, "edited": false, "score": 0, "creation_date": 1547071456, "post_id": 54118957, "comment_id": 95070694, "body": "But you are asking for a number to always have 7 digits? Unless I read that wrong..."}, {"owner": {"reputation": 115, "user_id": 10788236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96afe2f4d08f36cf1491dbce2588fdb9?s=128&d=identicon&r=PG&f=1", "display_name": "tejosa", "link": "https://stackoverflow.com/users/10788236/tejosa"}, "edited": false, "score": 0, "creation_date": 1547071542, "post_id": 54118957, "comment_id": 95070725, "body": "Right, sorry, then I would prefer 1.000000"}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 10788236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96afe2f4d08f36cf1491dbce2588fdb9?s=128&d=identicon&r=PG&f=1", "display_name": "tejosa", "link": "https://stackoverflow.com/users/10788236/tejosa"}, "edited": false, "score": 0, "creation_date": 1547072315, "post_id": 54119026, "comment_id": 95071017, "body": "Thanks, I&#39;ll check it out!"}], "tags": [], "owner": {"reputation": 210, "user_id": 10500460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cae9c3fa1584c7d4b3d0646c88bed6b5?s=128&d=identicon&r=PG&f=1", "display_name": "J_Zoio", "link": "https://stackoverflow.com/users/10500460/j-zoio"}, "is_accepted": false, "score": 1, "last_activity_date": 1547071810, "last_edit_date": 1547071810, "creation_date": 1547071309, "answer_id": 54119026, "question_id": 54118957, "link": "https://stackoverflow.com/questions/54118957/how-to-get-specific-number-of-digits-python/54119026#54119026", "title": "How to get specific number of digits? Python", "body": "<p>It depends on the context of the program, in my opinion... If you just want the numbers to the right to be 6 decimals, use:</p>\n\n<pre><code>\"{:.6f}\".format(whatevervar)\n</code></pre>\n\n<p>In other contexts maybe convert it to a string and use <code>len()</code> to evaluate the number of digits.</p>\n\n<p>Hope this helps!</p>\n\n<p><strong>EDIT:</strong> Seeing your comments, I would recommend using a conditional to define what you are trying to do. When the number has no decimals (check this thread for how to do it: <a href=\"https://stackoverflow.com/questions/21583758/how-to-check-if-a-float-value-is-a-whole-number\">How to check if a float value is a whole number</a> ) leave it as it is, when it has decimals, round it up with the code I posted above.</p>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 10788236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96afe2f4d08f36cf1491dbce2588fdb9?s=128&d=identicon&r=PG&f=1", "display_name": "tejosa", "link": "https://stackoverflow.com/users/10788236/tejosa"}, "edited": false, "score": 1, "creation_date": 1547071915, "post_id": 54119090, "comment_id": 95070860, "body": "That&#39;s okay if it rounds up. Thank you!"}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 4, "last_activity_date": 1547071605, "creation_date": 1547071605, "answer_id": 54119090, "question_id": 54118957, "link": "https://stackoverflow.com/questions/54118957/how-to-get-specific-number-of-digits-python/54119090#54119090", "title": "How to get specific number of digits? Python", "body": "<p>Try if this can work for you:</p>\n\n<pre><code>n = 123.456789\ndecimals = 7 - len(str(int(n)))\nprint('{:.{prec}f}'.format(n, prec=decimals))\n#=&gt; 123.4568\n</code></pre>\n\n<p>The drawback is that it rounds up.</p>\n"}], "owner": {"reputation": 115, "user_id": 10788236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96afe2f4d08f36cf1491dbce2588fdb9?s=128&d=identicon&r=PG&f=1", "display_name": "tejosa", "link": "https://stackoverflow.com/users/10788236/tejosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1270, "favorite_count": 0, "closed_date": 1547106839, "accepted_answer_id": 54119090, "answer_count": 2, "score": 0, "last_activity_date": 1547071810, "creation_date": 1547070994, "question_id": 54118957, "link": "https://stackoverflow.com/questions/54118957/how-to-get-specific-number-of-digits-python", "closed_reason": "Duplicate", "title": "How to get specific number of digits? Python", "body": "<p>How would I format my float digits so that there is always 7 digits no matter the direction?</p>\n\n<p>The value could be any of the following but I always want 7 like below</p>\n\n<pre><code>0.0054233\n1234567\n123.1224\n1.992923\n</code></pre>\n\n<p>The portion I have right now is</p>\n\n<pre><code>return \"%.7f\" % fd\n</code></pre>\n\n<p>How can I adjust that to get my desired output? or maybe link me to something similar I could try and read from..>? </p>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1547075044, "post_id": 54118885, "comment_id": 95071843, "body": "You haven&#39;t shown your URL pattern. For <code>self.kwargs[&#39;skill&#39;]</code> to work, you need to include the skill in the URL."}, {"owner": {"reputation": 51, "user_id": 6210879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5731a67240e5eaa64072d7217604f07f?s=128&d=identicon&r=PG&f=1", "display_name": "user6210879", "link": "https://stackoverflow.com/users/6210879/user6210879"}, "reply_to_user": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1547076857, "post_id": 54118885, "comment_id": 95072290, "body": "Do you mean include a pk for the customuser model so I can access the skill associated with it? My url is:  path(&#39;skills/&#39;, views.SkillView.as_view(), name=&#39;skills&#39;). I know how to do this for a model instance, but I&#39;m a bit confused now because this is not a model instance but a model field with many entries."}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1547079964, "post_id": 54118885, "comment_id": 95073009, "body": "You want a list of users with the skill, so you need to include the <i>skill</i> in the URL, not the user&#39;s PK. See my answer below."}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 6210879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5731a67240e5eaa64072d7217604f07f?s=128&d=identicon&r=PG&f=1", "display_name": "user6210879", "link": "https://stackoverflow.com/users/6210879/user6210879"}, "edited": false, "score": 0, "creation_date": 1547074613, "post_id": 54119516, "comment_id": 95071721, "body": "No, that template works fine when I change the queryset to something else. The problem is with getting the correct queryset. I think the issue is with this line: queryset = CustomUser.objects.filter(skills__name__in=      [self.kwargs[&#39;skill&#39;]])"}], "tags": [], "owner": {"reputation": 490, "user_id": 10410570, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HaJVMaXlYc/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU9xs2OCdBswsL1OVN9Cwe9FCxxuA/mo/photo.jpg?sz=128", "display_name": "NduJay", "link": "https://stackoverflow.com/users/10410570/ndujay"}, "is_accepted": false, "score": 0, "last_activity_date": 1547074067, "creation_date": 1547074067, "answer_id": 54119516, "question_id": 54118885, "link": "https://stackoverflow.com/questions/54118885/django-listview-returning-a-list-of-users-with-a-given-tag-in-a-tag-field/54119516#54119516", "title": "Django- ListView returning a list of users with a given tag in a tag field", "body": "<p>I think it should be :<code>request.user</code> instead of <code>user</code> in profile.html </p>\n"}, {"tags": [], "owner": {"reputation": 490, "user_id": 10410570, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5HaJVMaXlYc/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DU9xs2OCdBswsL1OVN9Cwe9FCxxuA/mo/photo.jpg?sz=128", "display_name": "NduJay", "link": "https://stackoverflow.com/users/10410570/ndujay"}, "is_accepted": false, "score": 0, "last_activity_date": 1547076009, "creation_date": 1547076009, "answer_id": 54119869, "question_id": 54118885, "link": "https://stackoverflow.com/questions/54118885/django-listview-returning-a-list-of-users-with-a-given-tag-in-a-tag-field/54119869#54119869", "title": "Django- ListView returning a list of users with a given tag in a tag field", "body": "<p>Then why dont you just use a 'Q' search query. Check it in the docs</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 6210879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5731a67240e5eaa64072d7217604f07f?s=128&d=identicon&r=PG&f=1", "display_name": "user6210879", "link": "https://stackoverflow.com/users/6210879/user6210879"}, "edited": false, "score": 0, "creation_date": 1547080848, "post_id": 54120381, "comment_id": 95073216, "body": "Thanks for your help! Now I&#39;m not getting an error but the list is empty. Do you know if I&#39;m supposed to reference the queryset in the skill_list.html template like so:        {% for user in object_list %} ?"}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "reply_to_user": {"reputation": 51, "user_id": 6210879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5731a67240e5eaa64072d7217604f07f?s=128&d=identicon&r=PG&f=1", "display_name": "user6210879", "link": "https://stackoverflow.com/users/6210879/user6210879"}, "edited": false, "score": 0, "creation_date": 1547081245, "post_id": 54120381, "comment_id": 95073286, "body": "<code>{% for user in object_list %}</code> <a href=\"https://docs.djangoproject.com/en/2.1/topics/class-based-views/generic-display/#making-friendly-template-contexts\" rel=\"nofollow noreferrer\">should work</a>. Try adding some printing/logging to your queryset to make sure that it is returning results"}, {"owner": {"reputation": 51, "user_id": 6210879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5731a67240e5eaa64072d7217604f07f?s=128&d=identicon&r=PG&f=1", "display_name": "user6210879", "link": "https://stackoverflow.com/users/6210879/user6210879"}, "edited": false, "score": 0, "creation_date": 1547136361, "post_id": 54120381, "comment_id": 95096525, "body": "So I&#39;ve determined that the problem is not with how I&#39;m calling the queryset in the template. The line: queryset = CustomUser.objects.filter(skills__name=self.kwargs[&#39;skill&#39;]) is not finding the name of the skills properly. Is this how I should reference the skill in the profile.html: &lt;a href=&quot;{% url &#39;skills&#39; skill.slug %}&quot;&gt;{{ skill.name }}&lt;/a&gt; ?"}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "reply_to_user": {"reputation": 51, "user_id": 6210879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5731a67240e5eaa64072d7217604f07f?s=128&d=identicon&r=PG&f=1", "display_name": "user6210879", "link": "https://stackoverflow.com/users/6210879/user6210879"}, "edited": false, "score": 0, "creation_date": 1547137261, "post_id": 54120381, "comment_id": 95097092, "body": "Yes, you need to include the skill in the <code>{% url %}</code> tag somehow, but I&#39;m not familiar with django taggit so I&#39;m not sure whether the correct usage is <code>{% url &#39;skills&#39; skill.name %}</code> or something slightly different."}, {"owner": {"reputation": 51, "user_id": 6210879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5731a67240e5eaa64072d7217604f07f?s=128&d=identicon&r=PG&f=1", "display_name": "user6210879", "link": "https://stackoverflow.com/users/6210879/user6210879"}, "edited": false, "score": 0, "creation_date": 1547138622, "post_id": 54120381, "comment_id": 95097896, "body": "That was it! Thanks sooo much"}], "tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": true, "score": 1, "last_activity_date": 1547137158, "last_edit_date": 1547137158, "creation_date": 1547079779, "answer_id": 54120381, "question_id": 54118885, "link": "https://stackoverflow.com/questions/54118885/django-listview-returning-a-list-of-users-with-a-given-tag-in-a-tag-field/54120381#54120381", "title": "Django- ListView returning a list of users with a given tag in a tag field", "body": "<blockquote>\n  <p>I want to be able to click on the skill listed on a user's profile (profile.html) and then have that return the skill list page</p>\n</blockquote>\n\n<p>In that case, the URLs need to include the skill in them, e.g. <code>/skills/python/</code> or <code>/skills/sql/</code>.</p>\n\n<p>You can do this by changing the URL to something like:</p>\n\n<pre><code>path('skills/&lt;slug:skill&gt;', views.SkillView.as_view(), name='skills')\n</code></pre>\n\n<p>Now <code>self.kwargs['skill']</code> will work in the <code>SkillView.get_queryset</code> method.</p>\n\n<p>You now need to include the skill in the URL tag, for example:</p>\n\n<pre><code>{% url 'skills' skill %}\n</code></pre>\n\n<p>Finally, since you are only using a single item in your list,</p>\n\n<pre><code>queryset = CustomUser.objects.filter(skills__name__in=[self.kwargs['skill']])\n</code></pre>\n\n<p>you can remove the <code>__in</code> and change the query to:</p>\n\n<pre><code>queryset = CustomUser.objects.filter(skills__name=self.kwargs['skill'])\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 6210879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5731a67240e5eaa64072d7217604f07f?s=128&d=identicon&r=PG&f=1", "display_name": "user6210879", "link": "https://stackoverflow.com/users/6210879/user6210879"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 54120381, "answer_count": 3, "score": 0, "last_activity_date": 1547137158, "creation_date": 1547070617, "question_id": 54118885, "link": "https://stackoverflow.com/questions/54118885/django-listview-returning-a-list-of-users-with-a-given-tag-in-a-tag-field", "title": "Django- ListView returning a list of users with a given tag in a tag field", "body": "<p>I'm trying to return a list of users with a particular skill and skills is a TagField (django taggit) in a CustomUser model. I'm struggling to get the queryset right in my ListView (skill_list.html). I want to be able to click on the skill listed on a user's profile (profile.html) and then have that return the skill list page with a list of all users that have that skill.</p>\n\n<p>models.py:</p>\n\n<pre><code>class CustomUser(AbstractUser):\n    objects = CustomUserManager()\n    position = models.CharField(max_length =200, null=True, default='', \n    blank=True)\n    bio = models.CharField(max_length=400, null=True, default='', \n    blank=True)\n    skills = TaggableManager(help_text=\"A comma-separated list of tags.\")\n</code></pre>\n\n<p>views.py:</p>\n\n<pre><code>class SkillView(ListView):\nmodel = CustomUser\ntemplate = 'skill_list.html'\nqueryset = CustomUser.objects.all()\n\ndef get_queryset(self):\n    queryset = CustomUser.objects.filter(skills__name__in= \n    [self.kwargs['skill']])\n    return queryset\n</code></pre>\n\n<p>profile.html:</p>\n\n<pre><code>&lt;div class=\"container-fluid\" id=\"profile_container\"&gt;\n\n            &lt;div class=\"container skills\"&gt;\n            {% for skill in user.skills.all %}\n                &lt;div class=\"skill_bubble\"&gt;&lt;p class=\"skill_bubble\"&gt;&lt;a href=\" \n{% url 'skills' %}\"&gt;{{ skill.name }}&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;\n            {% endfor %}\n            &lt;/div&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>skill_list.html:</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n\n    {% for user in object_list %}\n\n        &lt;div class=\"container user_name\"&gt;\n        &lt;p class=\"profile_name\"&gt;&lt;a href=\"{% url 'profile_with_pk' \npk=user.pk %}\"&gt;{{ user.first_name }}&amp;nbsp{{ user.last_name }}&lt;/a&gt;&lt;/p&gt;\n        &lt;p class=\"profile_text\"&gt;{{user.position}}&lt;/p&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I have the url set up on the profile page to return the 'skill_list.html', however I get an key error on the skill_list page: Exception value \"skill.\"</p>\n"}, {"tags": ["python", "jupyter-notebook", "jupyter"], "comments": [{"owner": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "edited": false, "score": 0, "creation_date": 1547073029, "post_id": 54118867, "comment_id": 95071264, "body": "As you may already know, you can directly launch jupyter by <code>python jupyter.py notebook</code>. Further you can use <code>pdb</code> to debug this process <code>python -m pdb jupyter.py notebook</code>. It may help."}, {"owner": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "edited": false, "score": 0, "creation_date": 1547073522, "post_id": 54118867, "comment_id": 95071407, "body": "If you think it is awful, you can use some ide to debug it such as <code>Pycharm</code>. Just setup up the running configuration to <code>jupyter notebook</code> and place breakpoint in corresponding file. It will work."}], "answers": [{"tags": [], "owner": {"reputation": 6468, "user_id": 3165737, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Y8F1n.gif?s=128&g=1", "display_name": "\u0198\u024c\u1ec8S\u01ac\u01a0\u0191", "link": "https://stackoverflow.com/users/3165737/%c6%98%c9%8c%e1%bb%88s%c6%ac%c6%a0%c6%91"}, "is_accepted": false, "score": 0, "last_activity_date": 1547127690, "creation_date": 1547127690, "answer_id": 54129998, "question_id": 54118867, "link": "https://stackoverflow.com/questions/54118867/jupyter-notebook-process-freezes-on-startup/54129998#54129998", "title": "Jupyter notebook process freezes on startup", "body": "<p>I compared the output to a working environment, and found that after the point where it freezes, jupyter normally loads the extensions. So I performed the following command:</p>\n\n<pre><code>jupyter nbextension list\n</code></pre>\n\n<p>which returns:</p>\n\n<pre><code>Known nbextensions:\n  config dir: c:\\dev\\venv\\jupyter\\etc\\jupyter\\nbconfig\n    notebook section\n      jupyter-js-widgets/extension enabled\n      - Validating: ok\n</code></pre>\n\n<p>I then tried to disable the extension using <code>jupyter nbextension disable jupyter-js-widgets</code>.</p>\n\n<p>Running <code>jupyter nbextension list</code> again now results in the following output:</p>\n\n<pre><code>Known nbextensions:\n  config dir: C:\\Users\\Admin\\.jupyter\\nbconfig\n    notebook section\n      jupyter-js-widgets disabled\n  config dir: c:\\dev\\venv\\jupyter\\etc\\jupyter\\nbconfig\n    notebook section\n      jupyter-js-widgets/extension enabled\n      - Validating: ok\n</code></pre>\n\n<p>Jupyter notebook now works again, but I don't know yet what the impact is of having to disable the extension or why it certainly became an issue.</p>\n"}], "owner": {"reputation": 6468, "user_id": 3165737, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Y8F1n.gif?s=128&g=1", "display_name": "\u0198\u024c\u1ec8S\u01ac\u01a0\u0191", "link": "https://stackoverflow.com/users/3165737/%c6%98%c9%8c%e1%bb%88s%c6%ac%c6%a0%c6%91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 842, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547127690, "creation_date": 1547070520, "last_edit_date": 1547126411, "question_id": 54118867, "link": "https://stackoverflow.com/questions/54118867/jupyter-notebook-process-freezes-on-startup", "title": "Jupyter notebook process freezes on startup", "body": "<p>I'm using Jupyter on several platforms, but for some reason, I can no longer get it to start on Windows 10.</p>\n\n<p>Starting jupyter notebook with the <code>--debug</code> flag, returns the following information:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vS6Yu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vS6Yu.png\" alt=\"jupyter notebook\"></a></p>\n\n<p>The output freezes at that point, no browser is started and tried to open <code>http://localhost:8888</code> returns no response. The process also does not react to <code>CTRL-C</code>, it has to be killed. </p>\n\n<p>I've tried the following:</p>\n\n<ul>\n<li>regenerated (overwritten) the config file with the default settings.</li>\n<li>completely re-installed Python and jupyter libraries.</li>\n<li>tried starting <code>jupyter notebook</code>, <code>jupyter lab</code> and <code>jupyter-notebook</code>.</li>\n</ul>\n\n<p>Looking at the process list, I can see <code>jupyter-notebook.exe</code> and associated process are started.</p>\n\n<p><a href=\"https://i.stack.imgur.com/S5nNU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/S5nNU.png\" alt=\"process list\"></a></p>\n\n<p>I can also see that the child <code>python.exe</code> process is listening on port <code>8888</code>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/I9K0d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I9K0d.png\" alt=\"process tcp/ip\"></a></p>\n\n<p>The output for <code>jupyter troubleshoot</code> is available <a href=\"https://pastebin.com/5d6xE75E\" rel=\"nofollow noreferrer\">here</a> (too exhaustive to paste).</p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 3, "last_activity_date": 1547071837, "creation_date": 1547071837, "answer_id": 54119120, "question_id": 54118853, "link": "https://stackoverflow.com/questions/54118853/setting-physically-square-subplots-in-matplotlib-3-with-shared-axes/54119120#54119120", "title": "Setting physically square subplots in Matplotlib 3 with shared axes", "body": "<p>If some axes become square by using <code>set_aspect(1.0)</code> (or the equivalent  <code>set_aspect(\"equal\")</code>) that's more or less coincidence and would only happen when the diffence of axis limits is actually equal; e.g. when the data ranges for x and y are the same.</p>\n\n<p>Of course you could share all axes, not just column- or row-wise. That would ensure all axes to be of equal shape - but not necessarily square. </p>\n\n<p>The requirement for square axes is that the aspect is the quotient of the x- and y range.</p>\n\n<pre><code>ax.set_aspect(np.diff(ax.get_xlim())/np.diff(ax.get_ylim()))\n</code></pre>\n\n<p>Also see: <a href=\"https://stackoverflow.com/questions/54081694/how-to-make-sure-that-both-x-and-y-axes-of-plot-are-of-equal-sizes/54082325#54082325\">How to make sure that both x and y axes of plot are of equal sizes?</a></p>\n\n<p>Another option is to restrict the space the subplots have via the subplot parameters as shown in <a href=\"https://stackoverflow.com/a/51483579/4124317\">this answer</a> to <a href=\"https://stackoverflow.com/questions/51474842/python-interplay-between-axissquare-and-set-xlim\">python interplay between axis(&#39;square&#39;) and set_xlim</a>.</p>\n"}], "owner": {"reputation": 113, "user_id": 7344150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73bcc0be68b925512e46d88063d86370?s=128&d=identicon&r=PG&f=1", "display_name": "Nebbles", "link": "https://stackoverflow.com/users/7344150/nebbles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1547071837, "creation_date": 1547070457, "question_id": 54118853, "link": "https://stackoverflow.com/questions/54118853/setting-physically-square-subplots-in-matplotlib-3-with-shared-axes", "title": "Setting physically square subplots in Matplotlib 3 with shared axes", "body": "<p>I am trying to create a similar plot to what is done by seaborn, but in native matplotlib.</p>\n\n<p>I am plotting every Series in a data frame against every other series in a matrix of plots.</p>\n\n<p>So far I've plotted it, marked the outer axes, and set the axes to be shared along columns and row (as this works with the data the best).</p>\n\n<p>The final step I am failing to manage is to make all the plots physically square in dimension. The following code:</p>\n\n<pre><code>#scatter matrix\n\ndef plot_scatter_matrix(data):\n    dim = len(data.columns.values)\n    fig, axs = newfigure(dim, dim, sharex='col', sharey='row', figsize=(10,10))\n    fig.tight_layout()\n    for row, iname in enumerate(data.columns.values):\n        for col, jname in enumerate(data.columns.values):\n            axs[row,col].scatter(data[jname], data[iname])\n            if col == 0:\n                axs[row,col].set_ylabel(iname)\n            if row == len(data.columns.values)-1:\n                axs[row,col].set_xlabel(jname)\n\n    return fig, axs\n\nfig, axs = plot_scatter_matrix(ndata)\nplt.show()\n</code></pre>\n\n<p>achieves this (only top half pictured):</p>\n\n<p><a href=\"https://i.stack.imgur.com/85jxS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/85jxS.png\" alt=\"im1\"></a></p>\n\n<p>I have attempted to use <code>axs[row,col].set_aspect(1.0, adjustable='box', share=True)</code> after the call to <code>scatter()</code> however it simply resulted in this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/tUGWs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tUGWs.png\" alt=\"im2\"></a></p>\n\n<p>As you can see, some managed to become physically square but they are all different sizes.</p>\n\n<p>Having looked extensively through documentation and other questions I am stumped. Doesn't make it easier when other methods for this sort of thing have been deprecated over past versions.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1547070787, "post_id": 54118839, "comment_id": 95070391, "body": "please describe the problem you&#39;re having. At a glance this code looks ok, except for <code>form = Messages(request.post)</code>, which with the way you&#39;ve imported things should be <code>form = forms.Messages(request.post)</code> (but this will throw an error as soon as you submit the form, so you&#39;d know about this if the code is really exactly as posted here). Incidentally I think it&#39;s bad style to use the name <code>Messages</code> for both the model and the form, <code>MessageForm</code> would be more usual for the form."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10699345"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1547071210, "post_id": 54118839, "comment_id": 95070588, "body": "@RobinZigmond When I enter the admin page in Django it appears Messages because of the model but when I submit something in the contact form the info inputted by the user doesn&#39;t appear in the message menu of the admin page!          <a href=\"https://imgur.com/a/RWH1PZF\" rel=\"nofollow noreferrer\">imgur.com/a/RWH1PZF</a>                                                                                        <a href=\"https://imgur.com/a/pKhx6o6\" rel=\"nofollow noreferrer\">imgur.com/a/pKhx6o6</a>"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1547071357, "post_id": 54118839, "comment_id": 95070645, "body": "so the messages submitted by the user aren&#39;t getting saved to the database then? Have you checked this directly (eg by running a query against the DB, either SQL or through Django&#39;s model query methods)? And assuming the data isn&#39;t saving, what happens when you submit the form? Any errors in the terminal? Do you get redirected to the thankyou page as intended?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10699345"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1547072833, "post_id": 54118839, "comment_id": 95071197, "body": "@RobinZigmond i dont get any errors but i dont get redirected either"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1547075168, "post_id": 54118839, "comment_id": 95071879, "body": "Ah, I&#39;ve just realised the problem! You have <code>if request.method == &#39;post&#39;</code> - but Django&#39;s capitalises the request method, so you should be checking against <code>&#39;POST&#39;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10699345"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1547103558, "post_id": 54118839, "comment_id": 95078240, "body": "@RobinZigmond Still doesn&#39;t work! Now it&#39;s saying that &#39;messages have no attribute messages&#39;"}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1547110337, "post_id": 54118839, "comment_id": 95081186, "body": "simple typo - <code>form.Messages</code> should be <code>forms.Messages</code>. (I find it hard to believe you couldn&#39;t have debugged this yourself.)"}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 1, "creation_date": 1547115690, "post_id": 54118839, "comment_id": 95084270, "body": "Note that the recommended name in Django is the singular <code>Message</code> instead of <code>Messages</code>. By using the same name for your form and model, you risk having bugs. The usual approach would be to name the form <code>MessageForm</code>, but you could also do <code>from . import models</code> then use <code>models.Message</code> everywhere to avoid the clash."}], "answers": [{"comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1547075270, "post_id": 54119716, "comment_id": 95071908, "body": "wow, over an hour since the question was asked and you posted this answer at the exact same moment I&#39;d just realised the issue myself (and posted as such in a comment). To be fair I only just came back to this after seeing the OP clarifying that they weren&#39;t getting redirected, which made me look a bit more closely at the possible outcomes from the view function."}, {"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 1, "creation_date": 1547076237, "post_id": 54119716, "comment_id": 95072141, "body": "thanks, but I&#39;m not &quot;possessive&quot; of my answers, you found it independently and I&#39;m happy with that. Helping the OP with their problem is the main thing."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10699345"}, "edited": false, "score": 0, "creation_date": 1547103784, "post_id": 54119716, "comment_id": 95078329, "body": "Thats the error that i&#180;m getting when i submit a new contact message in the website: <a href=\"https://imgur.com/a/XlrpTOe\" rel=\"nofollow noreferrer\">imgur.com/a/XlrpTOe</a>"}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "reply_to_user": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1547115895, "post_id": 54119716, "comment_id": 95084390, "body": "Please don&#39;t link to images of errors in future. Copy and paste the full traceback in your question. As pointed out by @RobinZigmond, it should be <code>forms.Messages(request.POST)</code>."}], "tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": true, "score": 1, "last_activity_date": 1547115814, "last_edit_date": 1547115814, "creation_date": 1547075178, "answer_id": 54119716, "question_id": 54118839, "link": "https://stackoverflow.com/questions/54118839/conecting-forms-to-admin-page-in-django/54119716#54119716", "title": "Conecting forms to admin page in django", "body": "<p>Python is case sensitive. The <code>request.method</code> will always be uppercase, and the post data is stored in <code>request.POST</code>. Change the code to:</p>\n\n<pre><code>if request.method == 'POST':\n\n    form = forms.Messages(request.POST)\n</code></pre>\n\n<p>You can debug problems like this by adding more <code>print()</code> lines. For example, you could have added <code>print(\"in the post\")</code> after <code>if request.method == 'post':</code>. Then when you saw that the line was never printed, you could have added <code>print(request.method)</code>. Hopefully you would then spot the mismatch between <code>'post'</code> and <code>'POST'</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10699345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 54119716, "answer_count": 1, "score": 0, "last_activity_date": 1547115931, "creation_date": 1547070393, "last_edit_date": 1547115931, "question_id": 54118839, "link": "https://stackoverflow.com/questions/54118839/conecting-forms-to-admin-page-in-django", "title": "Conecting forms to admin page in django", "body": "<p>I\u00b4m making my own portfolio and I wanna be able to see the messages that people sent me in the admin page but I don't seem to be able to make it so when someone submits the message it saves in the model and \"broadcasts\" in the admin page.</p>\n\n<p><strong>Models.py</strong></p>\n\n<pre><code>from django.db import models\n\n# Create your models here.\nclass Messages(models.Model):\n    name = models.CharField(max_length=100)\n    email = models.EmailField(max_length=50)\n    website = models.CharField(max_length=50)\n    text = models.CharField(max_length=500)\n</code></pre>\n\n<p><strong>Forms.py</strong></p>\n\n<pre><code>from django import forms\nfrom django.core import validators\nfrom django.forms import ModelForm\nfrom .models import Messages\n\nclass Messages(forms.ModelForm):\n    name = forms.CharField(widget=forms.TextInput(attrs={'class' : 'name'}), required=True, label='', max_length=100)\n    email = forms.EmailField(widget=forms.TextInput(attrs={'class' : 'email'}), required=True, label='', max_length=50)\n    website = forms.CharField(widget=forms.TextInput(attrs={'class' : 'website'}),required=False, label='', max_length=50)\n    text = forms.CharField(widget=forms.TextInput(attrs={'class' : 'text'}), required=True, label='', max_length=500)\n    bot = forms.CharField(required=False, widget=forms.HiddenInput, validators=[validators.MaxLengthValidator(0)])\n\n    class Meta():\n        model = Messages\n        fields = '__all__'\n</code></pre>\n\n<p><strong>Views.py</strong></p>\n\n<pre><code>from django.shortcuts import render\nfrom django.http import HttpResponse, HttpResponseNotFound\nfrom django.template import Template, Context\nfrom . import forms\n\n# Create your views here.\n\ndef index(request):\n    return render(request, 'index.html')\n\ndef portfolio(request):\n    return render(request, 'portfolio.html')\n\ndef certificate(request):\n    return render(request, 'certificate.html')\n\ndef contact(request):\n\n    form = forms.Messages()\n\n    if request.method == 'post':\n\n        form = form.Messages(request.post)\n\n        if form.is_valid():\n            form.save(commit=True)\n            return thankyou(request)\n\n        else:\n            print('CONTACT ERROR')\n\n    return render(request, 'contact.html', {'form':form})\n\ndef thankyou(request):\n    return render(request, 'thankyou.html')\n</code></pre>\n\n<p><strong>Admin.py</strong></p>\n\n<pre><code>from django.contrib import admin\nfrom toni.models import Messages\n\n# Register your models here.\n\nadmin.site.register(Messages)\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10875389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQS6T.jpg?s=128&g=1", "display_name": "Sakeiru", "link": "https://stackoverflow.com/users/10875389/sakeiru"}, "edited": false, "score": 0, "creation_date": 1547077216, "post_id": 54119600, "comment_id": 95072361, "body": "Thank you ! &quot;When you create a button with text but no image, the width is interpreted as a number of characters rather than pixels. &quot; I would have never found this by myself, what&#39;s the best way to size the button then ? Knowing font size and spacing then setting the size, or is there another way ?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "reply_to_user": {"reputation": 13, "user_id": 10875389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQS6T.jpg?s=128&g=1", "display_name": "Sakeiru", "link": "https://stackoverflow.com/users/10875389/sakeiru"}, "edited": false, "score": 0, "creation_date": 1547078167, "post_id": 54119600, "comment_id": 95072562, "body": "@Rikougo: there are several ways. The easiest is to give it a 1x1 pixel image along with the text (and remember to define the <code>compound</code> option). Personally, though, if they are text buttons you shouldn&#39;t be specifying an exact pixel size if you expect to be able to run the program on more than one machine. Let tkinter decide how wide it should be to fit the text."}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 0, "last_activity_date": 1547074456, "creation_date": 1547074456, "answer_id": 54119600, "question_id": 54118832, "link": "https://stackoverflow.com/questions/54118832/tkinter-grid-and-widget-size/54119600#54119600", "title": "Tkinter grid and widget size", "body": "<blockquote>\n  <p><code>print(playarea.grid_size())</code></p>\n  \n  <p>Return (0,0), as I configured columnspan and rowspan it should return me (10,20), no ?</p>\n</blockquote>\n\n<p>No. <code>grid_size</code> returns the size (number of rows and columns) of the grid. This is how the computation of the value is made, according to the official tcl/tk documentation:</p>\n\n<p><em>\"The size is determined either by the slave occupying the largest row or column, or the largest column or row with a minsize, weight, or pad that is non-zero.\"</em></p>\n\n<p>In your specific case you've only put widgets in row 0, column 0, so the reported size of <code>(0,0)</code> is correct.</p>\n\n<blockquote>\n  <p><code>print(newGameButton.winfo_width())</code></p>\n  \n  <p>Return me 617px and the button is huge, I don't understand why, can someone explain how grid works ? What's causing this.</p>\n</blockquote>\n\n<p>When you create a button with text but no image, the <code>width</code> is interpreted as a number of <em>characters</em> rather than <em>pixels</em>. </p>\n"}], "owner": {"reputation": 13, "user_id": 10875389, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQS6T.jpg?s=128&g=1", "display_name": "Sakeiru", "link": "https://stackoverflow.com/users/10875389/sakeiru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2719, "favorite_count": 0, "accepted_answer_id": 54119600, "answer_count": 1, "score": 1, "last_activity_date": 1547074456, "creation_date": 1547070356, "question_id": 54118832, "link": "https://stackoverflow.com/questions/54118832/tkinter-grid-and-widget-size", "title": "Tkinter grid and widget size", "body": "<p>I am actually learning Tkinter and I want to do a window looking like this (tetris GUI) : \n<a href=\"https://i.stack.imgur.com/VsqPG.jpg\" rel=\"nofollow noreferrer\">image</a>\nSo I want to do a 20x15 grid (h x w) with a tile size of 25px (so 500px x 375px playArea size) \nSo here is the code I made : </p>\n\n<pre><code>from tkinter import *\nfrom random import randint\n\nroot = Tk()\nroot.resizable(False, False)\n\n# PLAYAREA SIZE\nHEIGHT = 500\nWIDTH = HEIGHT // 2\nTILE_SIZE = 25\n\nplayarea = Canvas(root, width=WIDTH, height=HEIGHT, bg='yellow')\nplayarea.grid(column=6, row=0, columnspan=WIDTH // TILE_SIZE, rowspan=HEIGHT // TILE_SIZE)\n\n\nmenuFrame=Frame(root, width=(WIDTH // 2), height=HEIGHT).grid(column=0, row=0, columnspan= (WIDTH // 2) // TILE_SIZE , rowspan= int(HEIGHT / TILE_SIZE))\nnewGameButton = Button(menuFrame, text='Start', width= 75 , height = 1 * TILE_SIZE)\nnewGameButton.grid(column=1, row=1,columnspan=3, rowspan= 1)\nnewTestButton = Button(menuFrame, text='Test', width= 5 * TILE_SIZE, height = 1* TILE_SIZE)\nnewTestButton.grid(column=0, row=2, columnspan=5, rowspan=1)\nroot.update()\n\nprint(newGameButton.winfo_width())\nprint(playarea.grid_size())\n#print(playarea.grid_info())\n\nroot.mainloop()\n</code></pre>\n\n<p>I use HEIGHT and WIDTH variables to define the size of my canvas and my TILE_SIZE variable to define te amount of tile is needed (to configure <strong>columnspan</strong> and <strong>rowspan</strong>) my first problem is that my :</p>\n\n<pre><code>print(playarea.grid_size())\n</code></pre>\n\n<p>Return (0,0), as I configured columnspan and rowspan it should return me (10,20), no ?</p>\n\n<p>Then the other one issue is with my buttons, here I created two buttons (newGame and test), I want the newGame to be 75px wide (or 3 * TILE_SIZE) but when I run it (for both of width = 75 and width = 3 * TILE_SIZE) the </p>\n\n<pre><code>print(newGameButton.winfo_width())\n</code></pre>\n\n<p>Return me 617px and the button is huge, I don't understand why, can someone explain how grid works ? What's causing this.</p>\n"}, {"tags": ["python", "python-3.x", "kivy", "kivy-language"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 10304850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JnmEM.png?s=128&g=1", "display_name": "WutDuk", "link": "https://stackoverflow.com/users/10304850/wutduk"}, "edited": false, "score": 0, "creation_date": 1547684272, "post_id": 54155424, "comment_id": 95280566, "body": "This was another great example of the solution: <a href=\"https://stackoverflow.com/questions/42373746/kivy-i-want-to-change-an-attribute-of-a-widget-in-a-screen-out-of-a-popup\" title=\"kivy i want to change an attribute of a widget in a screen out of a popup\">stackoverflow.com/questions/42373746/&hellip;</a>"}], "tags": [], "owner": {"reputation": 51, "user_id": 10304850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JnmEM.png?s=128&g=1", "display_name": "WutDuk", "link": "https://stackoverflow.com/users/10304850/wutduk"}, "is_accepted": true, "score": 1, "last_activity_date": 1547295967, "last_edit_date": 1547295967, "creation_date": 1547249809, "answer_id": 54155424, "question_id": 54118823, "link": "https://stackoverflow.com/questions/54118823/why-cant-i-reference-self-text-1-in-the-constructor-from-my-kv-file/54155424#54155424", "title": "Why can&#39;t I reference self.text_1 in the constructor from my kv file?", "body": "<p>Through research and testing, I've found my answers.</p>\n\n<p>It turns out, firstly, that I wasn't calling 'self.title' like I thought I was. Therefore, I wasn't seeing different behavior for 'self.title' vs 'self.text_1'; I was seeing the same behavior. So, how then was I able to get my title to show, but not my content?</p>\n\n<p>The Popup widget has inherent attributes of 'title' and 'content'. When I defined 'self.title' in CustomPopup(), I just provided that attribute's value. Even after removing the corresponding kv code 'title: root.title', the same value defined for 'self.title' was still displayed. This was the crucial moment the clued me in that I was distracted by the red herring of 'self.title' vs 'self.text_1'.</p>\n\n<p>Once I ruled out the issue that I'm seeing different behavior for two otherwise identical lines of code, I looked deeper into how I was defining my CustomPopup class. That's when I came across this post that demonstrated how to handle this properly: <a href=\"https://stackoverflow.com/questions/49487672/kivy-how-to-get-class-variables-in-popup\">Kivy: How to get class Variables in Popup</a>.</p>\n\n<p>Long story... slightly less long... I updated my super method to inherit my 'text_1' StringProperty so that I could reference it from the CustomPopup object!</p>\n\n<p>Here's the updated working solution:</p>\n\n<p>Python:</p>\n\n<pre><code>import kivy\nfrom kivy import Config\nfrom kivy.app import App\nfrom kivy.uix.label import Label\nfrom kivy.uix.button import Button\nfrom kivy.uix.popup import Popup\nfrom kivy.properties import StringProperty\n\nkivy.require( '1.10.1' )\n\nConfig.set( 'graphics', 'fullscreen', 0 )\nConfig.set( 'graphics', 'height', 600 )\nConfig.set( 'graphics', 'width', 800 )\nConfig.set( 'graphics', 'resizable', 0 )\nConfig.set( 'kivy', 'exit_on_escape', 0 )\n\n\n\nclass CustomPopup( Popup ):\n\n    text_1 = StringProperty( '' )\n\n    def __init__( self, foo = 'bar' ):\n        super( CustomPopup, self ).__init__()\n\n        self.foo =  foo\n\n        self.text_1 =  'blah blah {foo}'.format( foo = self.foo )\n\n        self.title = 'Title {foo}!'.format( foo = self.foo )\n\n\nclass CustomPopupTestApp( App ):\n    def build( self ):\n        blarg = CustomPopup()\n        return blarg\n\n\n#Instantiate top-level/root widget and run it\nif __name__ == \"__main__\":\n    CustomPopupTestApp().run()\n</code></pre>\n\n<p>kv:</p>\n\n<pre><code>&lt;CustomPopup&gt;:\n    id: popup\n    # title: root.title\n    title_size: 30\n    title_align: 'center'\n    size_hint: 0.8, 0.8\n    auto_dismiss: False\n    pos_hint: { 'x' : 0.1 , 'y' : 0.1 }\n\n    GridLayout:\n        cols: 1\n        rows: 2\n        spacing: 15\n        padding: 15\n\n        Label:\n            id: content\n            text: root.text_1\n            font_size: 25\n            padding: 15, 25\n            size_hint_y: None\n            text_size: self.width, None\n            height: self.texture_size[ 1 ]\n            halign: 'center'\n\n        GridLayout:\n            cols: 2\n            rows: 1\n\n            AnchorLayout:\n                anchor_x : 'center'\n                anchor_y : 'bottom'\n                padding: 20\n\n                Button:\n                    id: yes\n                    text: 'Yes'\n                    font_size: 30\n                    size_hint: 0.8, 0.4\n\n            AnchorLayout:\n                anchor_x : 'center'\n                anchor_y : 'bottom'\n                padding: 20\n\n                Button:\n                    id: no\n                    text: 'No'\n                    font_size: 30\n                    size_hint: 0.8, 0.4\n</code></pre>\n\n<p>Notice that the kv file no longer refers to 'root.title', yet the title is still displayed properly.</p>\n\n<p>The final product pictured in the link below is a Kivy popup with the structure/formatting defined in the kv file with the functionality and variable text defined in Python. It looks much cleaner to me than doing it all on the Python side.</p>\n\n<p><a href=\"https://i.stack.imgur.com/bUQth.png\" rel=\"nofollow noreferrer\">CustomPopupTest Working Solution</a></p>\n\n<p>I hope this helps someone else like so many other posts have helped me.</p>\n"}], "owner": {"reputation": 51, "user_id": 10304850, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JnmEM.png?s=128&g=1", "display_name": "WutDuk", "link": "https://stackoverflow.com/users/10304850/wutduk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 54155424, "answer_count": 1, "score": 1, "last_activity_date": 1547295967, "creation_date": 1547070312, "last_edit_date": 1547125089, "question_id": 54118823, "link": "https://stackoverflow.com/questions/54118823/why-cant-i-reference-self-text-1-in-the-constructor-from-my-kv-file", "title": "Why can&#39;t I reference self.text_1 in the constructor from my kv file?", "body": "<p>I'm working on a simple Kivy Popup and I'm confused as to why I can't reference my class variable, 'self.text_1', from within the constructor of the Popup class, but I can do so with the variable 'self.title'.</p>\n\n<p>First, I'll start with the ubiquitous, \"I'm new to Python and Kivy, so perhaps I'm just missing something obvious, but I'm at a loss.\"</p>\n\n<p>I've tried to find answers, but nothing so far has seemed to cover this topic, at least in a way that I can understand and draw the connection. Below is my problem and some simplified code for demonstration.</p>\n\n<p>From within the kv file > Label widget > text, I can refer to 'text_1' from the CustomPopup class in my py file by using 'root.text_1' when the variable is placed outside of the constructor (either before or after), but I cannot do so when placed within. The 'self.title' variable is setup the exact same way as 'self.text_1', but I CAN get that value without issue.</p>\n\n<p>If I un-comment this line, using 'root.text_1' in the kv file returns the correct value.</p>\n\n<pre><code>class CustomPopup( Popup ):\n    # I can reference this text from the kv file using \"root.text_1\"\n    # text_1 = 'blah blah blah'\n</code></pre>\n\n<p>If instead I try to use 'self.text_1' from within the constructor, I get an Attribute error. However, I have no issues using the variable 'self.title' just below 'self.text_1'.</p>\n\n<p>AttributeError: 'CustomPopup' object has no attribute 'text_1'</p>\n\n<pre><code>def __init__( self, foo = 'bar' ):\n    super().__init__()\n    self.foo =  foo\n\n    # I can't reference this text from the kv file using \"root.text_1\". Why?\n    self.text_1 = 'blah blah {foo}'.format( foo = self.foo )\n\n    # I can reference this text from the kv file using \"root.title\"\n    self.title = 'Title {foo}!'.format( foo = self.foo )\n</code></pre>\n\n<p>What is the difference here as to why I can get the value from one constructor variable, but not another with ostensibly similar syntax?</p>\n\n<p>I'm using Python 3.7.1 (conda version : 4.5.12) and Kivy 1.10.1.</p>\n\n<p>Python:</p>\n\n<pre><code>import kivy\nfrom kivy import Config\nfrom kivy.app import App\nfrom kivy.uix.label import Label\nfrom kivy.uix.boxlayout import BoxLayout\nfrom kivy.uix.button import Button\nfrom kivy.uix.popup import Popup\n\n\nkivy.require( '1.10.1' )\n\n\nConfig.set( 'graphics', 'fullscreen', 0 )\nConfig.set( 'graphics', 'height', 600 )\nConfig.set( 'graphics', 'width', 800 )\nConfig.set( 'graphics', 'resizable', 0 )\nConfig.set( 'kivy', 'exit_on_escape', 0 )\n\n\nclass CustomPopup( Popup ):\n    # I can reference this text from the kv file using \"root.text_1\"\n    # text_1 = 'blah blah blah'\n\n    def __init__( self, foo = 'bar' ):\n        super().__init__()\n        self.foo =  foo\n\n        # I can't reference this text from the kv file using \"root.title\". Why?\n        self.text_1 = 'blah blah {foo}'.format( foo = self.foo )\n\n        # I can reference this text from the kv file using \"root.title\"\n        self.title = 'Title {foo}!'.format( foo = self.foo )\n\n\nclass CustomPopupTestApp( App ):\n    def build( self ):\n        return CustomPopup()\n\n\n#Instantiate top-level/root widget and run it\nif __name__ == \"__main__\":\n    CustomPopupTestApp().run()\n</code></pre>\n\n<p>kv:</p>\n\n<pre><code>&lt;CustomPopup&gt;:\n    id: popup\n    title: root.title\n    title_size: 30\n    title_align: 'center'\n    size_hint: 0.8, 0.8\n    auto_dismiss: False\n    pos_hint: { 'x' : 0.1 , 'y' : 0.1 }\n\n    GridLayout:\n        cols: 1\n        rows: 2\n        spacing: 15\n        padding: 15\n\n        Label:\n            id: content\n            text: root.text_1\n            font_size: 25\n            padding: 15, 25\n            size_hint_y: None\n            text_size: self.width, None\n            height: self.texture_size[ 1 ]\n            halign: 'center'\n\n        GridLayout:\n            cols: 2\n            rows: 1\n\n            AnchorLayout:\n                anchor_x : 'center'\n                anchor_y : 'bottom'\n                padding: 20\n\n                Button:\n                    id: yes\n                    text: 'Yes'\n                    font_size: 30\n                    size_hint: 0.8, 0.4\n\n            AnchorLayout:\n                anchor_x : 'center'\n                anchor_y : 'bottom'\n                padding: 20\n\n                Button:\n                    id: no\n                    text: 'No'\n                    font_size: 30\n                    size_hint: 0.8, 0.4\n</code></pre>\n\n<p>I would like to setup the text for my pop-up and use the str.format() method to insert a variable text element so that my message is tailored to the circumstances at hand, rather than generic or hard-coded with multiple options.</p>\n\n<p>In this case, I pass an argument of 'foo' to the constructor, set the variable 'self.foo' equal to 'foo', then refer to 'self.foo' within my 'self.title' string and 'self.text_1' string.</p>\n\n<p>If I place 'text_1' outside of the constructor, while I can retrieve the text value, since 'foo' hasn't been defined within that scope, I can't reference it to format my string.</p>\n\n<p>I am interested in other solutions and any opportunity to learn, but ultimately, if there's a way to make this work without a workaround, that would be ideal.</p>\n\n<p>Thanks in advance for any help. I've already learned a ton from everyone on this site.</p>\n\n<p>P.S. - If I've done something \"stupid\" or offended your sensibilities, please provide a suggestion or correction rather than just berate me. Sometimes people get negative and it's (usually) not necessary.</p>\n"}, {"tags": ["python", "webots"], "answers": [{"tags": [], "owner": {"reputation": 592, "user_id": 810268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82afcf4013e4439ab73e631a944ff970?s=128&d=identicon&r=PG", "display_name": "Olivier Michel", "link": "https://stackoverflow.com/users/810268/olivier-michel"}, "is_accepted": false, "score": 1, "last_activity_date": 1547193763, "creation_date": 1547193763, "answer_id": 54142508, "question_id": 54118812, "link": "https://stackoverflow.com/questions/54118812/interactive-terminal-for-python-on-webots/54142508#54142508", "title": "Interactive terminal for Python on Webots?", "body": "<p>No, there is no such a thing available out of the box in Webots. However, it shouldn't be difficult to implement a set of Python commands that could be called from an interactive Python shell. Such commands would communicate with a slave Webots controller via some IPC (Inter Process Communication) to send commands to a running simulation.</p>\n"}], "owner": {"reputation": 11, "user_id": 8434481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fda71aa55322aeba6bedc56e9be8b8de?s=128&d=identicon&r=PG&f=1", "display_name": "Ares Fisher", "link": "https://stackoverflow.com/users/8434481/ares-fisher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1550428778, "creation_date": 1547070244, "question_id": 54118812, "link": "https://stackoverflow.com/questions/54118812/interactive-terminal-for-python-on-webots", "title": "Interactive terminal for Python on Webots?", "body": "<p>Is there an interactive, imperative way to manipulate Webots simulations using Python, instead of using the contorller script? E.g. the way you can interact with OpenAI Gym. Thanks!</p>\n"}, {"tags": ["python", "python-2.7", "airflow", "directed-acyclic-graphs"], "comments": [{"owner": {"reputation": 989, "user_id": 1781608, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/899b35aaf405f2404cc2ae211916a360?s=128&d=identicon&r=PG", "display_name": "badger0053", "link": "https://stackoverflow.com/users/1781608/badger0053"}, "edited": false, "score": 1, "creation_date": 1547088334, "post_id": 54118732, "comment_id": 95074694, "body": "Can you post the python code? It looks like you may be catching the failure to log it . You may need to raise an exception so that it doesn&#39;t exits with a value of 1 rather than 0"}], "answers": [{"comments": [{"owner": {"reputation": 506, "user_id": 10190191, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NDP4DbhR_w4/AAAAAAAAAAI/AAAAAAAAAAw/D8QG7G8Qyow/photo.jpg?sz=128", "display_name": "saadi", "link": "https://stackoverflow.com/users/10190191/saadi"}, "edited": false, "score": 0, "creation_date": 1579005601, "post_id": 54146751, "comment_id": 105616641, "body": "I am facing the same problem as OP, your solution seemed to have worked for him but for me, it&#39;s not working. You can see my dag <a href=\"https://freetexthost.net/CkbUgAf\" rel=\"nofollow noreferrer\">here</a>. <code>python3</code> does not have the packages/modules script requires &amp; thus it gives error when ran on terminal but it gives <code>success</code> status on airflow. Can you please check what I am doing wrong?"}, {"owner": {"reputation": 12154, "user_id": 5691525, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/i3e64.jpg?s=128&g=1", "display_name": "kaxil", "link": "https://stackoverflow.com/users/5691525/kaxil"}, "reply_to_user": {"reputation": 506, "user_id": 10190191, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NDP4DbhR_w4/AAAAAAAAAAI/AAAAAAAAAAw/D8QG7G8Qyow/photo.jpg?sz=128", "display_name": "saadi", "link": "https://stackoverflow.com/users/10190191/saadi"}, "edited": false, "score": 0, "creation_date": 1579069450, "post_id": 54146751, "comment_id": 105639386, "body": "@saadi You need to have <code>set -e</code> in your <code>bash_command</code>, you have <code>set e</code> :)"}], "tags": [], "owner": {"reputation": 12154, "user_id": 5691525, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/i3e64.jpg?s=128&g=1", "display_name": "kaxil", "link": "https://stackoverflow.com/users/5691525/kaxil"}, "is_accepted": true, "score": 2, "last_activity_date": 1547210295, "creation_date": 1547210295, "answer_id": 54146751, "question_id": 54118732, "link": "https://stackoverflow.com/questions/54118732/airflow-dag-doesnot-fail-on-python-script-failure/54146751#54146751", "title": "Airflow Dag doesnot fail on python script failure", "body": "<p>Add <code>set -e;</code> to your <code>bash_command</code>. For example:</p>\n\n<pre><code>get_files = SSHExecuteOperator(\n    task_id='get_files',\n    bash_command='set -e; python example_script.py',\n    ssh_hook=sshHook,\n    dag=dag)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 158, "user_id": 10327306, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dXyzIPb2mJc/AAAAAAAAAAI/AAAAAAAAFZI/EEv6iy4P-vc/photo.jpg?sz=128", "display_name": "Fabio Schultz", "link": "https://stackoverflow.com/users/10327306/fabio-schultz"}, "is_accepted": false, "score": 0, "last_activity_date": 1547231651, "creation_date": 1547231651, "answer_id": 54152191, "question_id": 54118732, "link": "https://stackoverflow.com/questions/54118732/airflow-dag-doesnot-fail-on-python-script-failure/54152191#54152191", "title": "Airflow Dag doesnot fail on python script failure", "body": "<p>Why don't you use a PythonOperator? </p>\n\n<p>Example here : <a href=\"https://github.com/trbs/airflow-examples/blob/master/dags/example_python_operator.py\" rel=\"nofollow noreferrer\">https://github.com/trbs/airflow-examples/blob/master/dags/example_python_operator.py</a></p>\n\n<p>Doc here: <a href=\"https://airflow.apache.org/_modules/airflow/operators/python_operator.html\" rel=\"nofollow noreferrer\">https://airflow.apache.org/_modules/airflow/operators/python_operator.html</a></p>\n"}], "owner": {"reputation": 39, "user_id": 5655076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bee7afcc96f41d86338f3544ce50550b?s=128&d=identicon&r=PG&f=1", "display_name": "H P", "link": "https://stackoverflow.com/users/5655076/h-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 596, "favorite_count": 0, "accepted_answer_id": 54146751, "answer_count": 2, "score": 1, "last_activity_date": 1547231651, "creation_date": 1547069772, "question_id": 54118732, "link": "https://stackoverflow.com/questions/54118732/airflow-dag-doesnot-fail-on-python-script-failure", "title": "Airflow Dag doesnot fail on python script failure", "body": "<p>I am using some python scripts to download the files from the ftp server and I have created the DAG for this. Some times the python script while downloading the file from FTP server fails on \"Peer connection reset error\" but airflow DAG doesnot fail and it marks task as success instead of failing it.</p>\n\n<pre><code>Below are airflow logs for more information.\n\n\n[2019-01-03 19:04:40,085] {base_task_runner.py:98} INFO - Subtask: [2019-01-03 19:04:40,085] {ssh_execute_operator.py:146} INFO - [2019-01-03 19:09:14,276 - Download files from SFTP - ERROR] Total 1 file(s) ([u'R0000797-Manifest.xml']) are downloaded successfully. One error is found in downloading file xxxxxx.txt due to Server connection dropped:\n[2019-01-03 19:04:40,091] {base_task_runner.py:98} INFO - Subtask: [2019-01-03 19:04:40,090] {ssh_execute_operator.py:146} INFO - [2019-01-03 19:09:14,282 - Download files from SFTP - ERROR] The whole process failed due to Server connection dropped: .\n[2019-01-03 19:04:40,091] {base_task_runner.py:98} INFO - Subtask: [2019-01-03 19:04:40,091] {ssh_execute_operator.py:146} INFO - Total 1 file(s) ([u'R0000797-Manifest.xml']) are downloaded successfully.\n[2019-01-03 19:04:40,092] {base_task_runner.py:98} INFO - Subtask: [2019-01-03 19:04:40,091] {ssh_execute_operator.py:146} INFO - Traceback (most recent call last):\n[2019-01-03 19:04:40,092] {base_task_runner.py:98} INFO - Subtask: [2019-01-03 19:04:40,091] {ssh_execute_operator.py:146} INFO - main(args)\n[2019-01-03 19:04:40,092] {base_task_runner.py:98} INFO - Subtask: [2019-01-03 19:04:40,091] {ssh_execute_operator.py:146} INFO - File \"/TEST/GET_files.py\", line 381, in main\n[2019-01-03 19:04:40,093] {base_task_runner.py:98} INFO - Subtask: [2019-01-03 19:04:40,092] {ssh_execute_operator.py:146} INFO - sftp.get(source_file)\n\n\nAs you can see from above logs that python script gave a proper error message to airflow handler but airflow handler shows that message as INFO and it doesn't fail. So please can you suggest me or help me in this scenario? I want to fail the DAG task when any python error occurs. \n\n************************************\nhere is the dag code\n\nget_files = SSHExecuteOperator(\n    task_id='get_files',\n    bash_command=command to run the py script,\n    ssh_hook=sshHook,\n    dag=dag)\n\n************************************\n\nExpected results: The airflow DAG should fail when python script fails.\nThanks for your help in advance.\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "keras", "recurrent-neural-network"], "comments": [{"owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "edited": false, "score": 0, "creation_date": 1547070047, "post_id": 54118715, "comment_id": 95070064, "body": "an RNN takes 3-D input. The first is the batch size (number of examples = 165k), and second is the time-related axis (which looks like you are missing) and the third is the vector at each given time (=7). In case of sentences, time would be equivalent to number of words or number of letters in the sentence"}, {"owner": {"reputation": 123, "user_id": 6589409, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3de09edfbc0f0e4a21c09197db66919b?s=128&d=identicon&r=PG&f=1", "display_name": "HereItIs", "link": "https://stackoverflow.com/users/6589409/hereitis"}, "reply_to_user": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "edited": false, "score": 0, "creation_date": 1547071322, "post_id": 54118715, "comment_id": 95070633, "body": "thanks @GergesDib. Please see my edited post. I altered it so that input was 3D and get a similar, but not identical error."}, {"owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "edited": false, "score": 0, "creation_date": 1547071557, "post_id": 54118715, "comment_id": 95070728, "body": "make <code>input_shape = x_train.shape[1:]</code>"}, {"owner": {"reputation": 123, "user_id": 6589409, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3de09edfbc0f0e4a21c09197db66919b?s=128&d=identicon&r=PG&f=1", "display_name": "HereItIs", "link": "https://stackoverflow.com/users/6589409/hereitis"}, "reply_to_user": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "edited": false, "score": 0, "creation_date": 1547071894, "post_id": 54118715, "comment_id": 95070849, "body": "now i get <code>ValueError: Error when checking target: expected dense_8 to have 2 dimensions, but got array with shape (15000, 7, 7)</code> - - suddenly it expects 2d input? I tried adding a flatten layer which did nothing too"}, {"owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "edited": false, "score": 0, "creation_date": 1547072378, "post_id": 54118715, "comment_id": 95071039, "body": "weird. one thing to try is restart your python session. looks like you are working in a notebook or interactive session?"}, {"owner": {"reputation": 123, "user_id": 6589409, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3de09edfbc0f0e4a21c09197db66919b?s=128&d=identicon&r=PG&f=1", "display_name": "HereItIs", "link": "https://stackoverflow.com/users/6589409/hereitis"}, "reply_to_user": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "edited": false, "score": 0, "creation_date": 1547137750, "post_id": 54118715, "comment_id": 95097389, "body": "that didnt help unfortunatley..but yes running on notebook!"}], "answers": [{"comments": [{"owner": {"reputation": 1517, "user_id": 9277245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c0a3df687d7bef3e03872a9af9908cd?s=128&d=identicon&r=PG&f=1", "display_name": "Ankish Bansal", "link": "https://stackoverflow.com/users/9277245/ankish-bansal"}, "edited": false, "score": 0, "creation_date": 1547404952, "post_id": 54151303, "comment_id": 95172960, "body": "HereItIs, if this answer solve your problem, please upvote and accept it."}], "tags": [], "owner": {"reputation": 1517, "user_id": 9277245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c0a3df687d7bef3e03872a9af9908cd?s=128&d=identicon&r=PG&f=1", "display_name": "Ankish Bansal", "link": "https://stackoverflow.com/users/9277245/ankish-bansal"}, "is_accepted": true, "score": 1, "last_activity_date": 1547227454, "creation_date": 1547227454, "answer_id": 54151303, "question_id": 54118715, "link": "https://stackoverflow.com/questions/54118715/how-do-i-know-the-correct-format-for-my-input-data-into-my-keras-rnn/54151303#54151303", "title": "How do I know the correct format for my input data into my keras RNN?", "body": "<ol>\n<li>SimpleRNN layer expects the inputs of dimensions <code>(seq_length, input_dim)</code> that is (7,7) in your case.</li>\n<li>Also if you want output at each time-step, you need to use <code>return_sequence=True</code>, by default which is <code>false</code>. This way you can compare the output at time-step.</li>\n</ol>\n\n<p>So the model architecture will be something like this:</p>\n\n<pre><code>model.add(keras.layers.SimpleRNN(7, activation='tanh', \n                       return_sequences=True, \n                        input_shape=[7,7]))\nmodel.add(keras.layers.Dense(7))\nmodel.summary()\n\n_________________________________________________________________\nLayer (type)                 Output Shape              Param #   \n=================================================================\nsimple_rnn_12 (SimpleRNN)    (None, 7, 7)              105       \n_________________________________________________________________\ndense_2 (Dense)              (None, 7, 7)              56        \n=================================================================\nTotal params: 161\nTrainable params: 161\nNon-trainable params: 0\n_________________________________________________________________\n</code></pre>\n\n<p>Now at training time, it expects data <code>input and output</code> of dims <code>(num_samples, seq_length, input_dims)</code> i.e. <code>(15000, 7, 7)</code> for both.</p>\n\n<pre><code>model.compile(loss='categorical_crossentropy', optimizer='adam')# define any loss, you want\nmodel.fit(x_train, y_train, epochs=2)\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 6589409, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3de09edfbc0f0e4a21c09197db66919b?s=128&d=identicon&r=PG&f=1", "display_name": "HereItIs", "link": "https://stackoverflow.com/users/6589409/hereitis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "accepted_answer_id": 54151303, "answer_count": 1, "score": 1, "last_activity_date": 1547227454, "creation_date": 1547069698, "last_edit_date": 1547071257, "question_id": 54118715, "link": "https://stackoverflow.com/questions/54118715/how-do-i-know-the-correct-format-for-my-input-data-into-my-keras-rnn", "title": "How do I know the correct format for my input data into my keras RNN?", "body": "<p>I am trying to build an Elman simple RNN as described <a href=\"https://web.stanford.edu/group/pdplab/pdphandbook/handbookch8.html\" rel=\"nofollow noreferrer\">here</a>. </p>\n\n<p>I've built my model using Keras as follows:</p>\n\n<pre><code>model = keras.Sequential()\nmodel.add(keras.layers.SimpleRNN(7,activation =None,use_bias=True,input_shape=\n                             [x_train.shape[0],x_train.shape[1]]))\nmodel.add(keras.layers.Dense(7,activation = tf.nn.sigmoid))\n\nmodel.summary()\n_________________________________________________________________\nLayer (type)                 Output Shape              Param #   \n=================================================================\nsimple_rnn_2 (SimpleRNN)     (None, 7)                 105       \n_________________________________________________________________\ndense_2 (Dense)              (None, 7)                 56        \n=================================================================\nTotal params: 161\nTrainable params: 161\nNon-trainable params: 0\n_________________________________________________________________\n</code></pre>\n\n<p>My training data is currently of shape (15000, 7, 7). That is, 15000 instances of length 7 one hot encodings, coding for one of seven letters. E.g <code>[0,0,0,1,0,0,0],[0,0,0,0,1,0,0]</code> and so forth. </p>\n\n<p>The data's labels are the same format, since each letter predicts the next letter in the sequence, i.e <code>[0,1,0,0,0,0,0]</code> has the label <code>[0,0,1,0,0,0,0]</code>.</p>\n\n<p>So, training data <code>(x_train)</code> and training labels <code>(y_train)</code> are both shaped <code>(15000,7,7)</code>.</p>\n\n<p>My validation data x_val and y_val are shaped <code>(10000,7,7)</code>. I.e the same shape just with fewer instances.</p>\n\n<p>So when I run my model:</p>\n\n<pre><code>history = model.fit(x_train,\n         y_train,\n         epochs = 40,\n         batch_size=512,\n         validation_data = (x_val,y_val))\n</code></pre>\n\n<p>I get the error:</p>\n\n<pre><code>ValueError: Error when checking input: expected simple_rnn_7_input to have shape (15000, 7) but got array with shape (7, 7)\n</code></pre>\n\n<p>Clearly my input data is formatted incorrectly for input into the Keras RNN, but I can't think how to feed it the correct input.</p>\n\n<p>Could anyone advise me as to the solution?</p>\n"}, {"tags": ["python", "image-processing"], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 10178901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/836a6219de4dd3d010226aac7c874ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos", "link": "https://stackoverflow.com/users/10178901/carlos"}, "edited": false, "score": 0, "creation_date": 1547073610, "post_id": 54119204, "comment_id": 95071437, "body": "Thanks Mark. I realized I did not ask my question properly. The image will not always be a square. Sometimes it will also be am L-shape image. I edited the original post to show it."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 97, "user_id": 10178901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/836a6219de4dd3d010226aac7c874ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos", "link": "https://stackoverflow.com/users/10178901/carlos"}, "edited": false, "score": 0, "creation_date": 1547123106, "post_id": 54119204, "comment_id": 95088461, "body": "Actually, I think you have done me in again! The sample image you give in Google drive <b>already has</b> a grey border around the shapes - unlike the ones you show in the question which don&#39;t already have a border. The code is written assuming no initial grey border around the white shapes."}, {"owner": {"reputation": 97, "user_id": 10178901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/836a6219de4dd3d010226aac7c874ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos", "link": "https://stackoverflow.com/users/10178901/carlos"}, "edited": false, "score": 0, "creation_date": 1547178722, "post_id": 54119204, "comment_id": 95111677, "body": "Haha sorry. I did upload the wrong image. Thank you very much Mark, this was pretty much what I needed. I just had to change it a bit and add the code for batch process. I really appreciate your help."}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "reply_to_user": {"reputation": 97, "user_id": 10178901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/836a6219de4dd3d010226aac7c874ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos", "link": "https://stackoverflow.com/users/10178901/carlos"}, "edited": false, "score": 0, "creation_date": 1547192686, "post_id": 54119204, "comment_id": 95115587, "body": "Cool - glad we got there in the end. Good luck with your project!"}], "tags": [], "owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": true, "score": 0, "last_activity_date": 1547123483, "last_edit_date": 1547123483, "creation_date": 1547072276, "answer_id": 54119204, "question_id": 54118683, "link": "https://stackoverflow.com/questions/54118683/how-to-change-the-grey-scale-value-of-a-region-in-an-image/54119204#54119204", "title": "How to change the grey scale value of a region in an image?", "body": "<p>I think this is what you want. The comments should explain pretty well what I going on:</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport numpy as np\nfrom PIL import Image, ImageFilter\nfrom skimage.morphology import dilation, square\n\n# Open input image and ensure it is greyscale\nimage = Image.open('XYbase.png').convert('L')\n\n# Find the edges\nedges = image.filter(ImageFilter.FIND_EDGES)\n\n# Convert edges to Numpy array and dilate (fatten) with our square structuring element\nselem = square(6)\nfatedges = dilation(np.array(edges),selem)\n\n# Make Numpy version of our original image and set all fatedges to brightness 128\nimnp = np.array(image)\nimnp[np.nonzero(fatedges)] = 128\n\n# Convert Numpy image back to PIL image and save\nImage.fromarray(imnp).save('result.png')\n</code></pre>\n\n<p>So, if I start with this image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/oaVyf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oaVyf.png\" alt=\"enter image description here\"></a></p>\n\n<p>The (intermediate) edges look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/dqpXs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dqpXs.png\" alt=\"enter image description here\"></a></p>\n\n<p>And I get this as the result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/OtjbX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OtjbX.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>If you want the outlines fatter/thinner, increase/decrease the <code>6</code> in:</p>\n\n<pre><code>selem = square(6)\n</code></pre>\n\n<p>If you want the outlines lighter/darker, increase/decrease the <code>128</code> in:</p>\n\n<pre><code>imnp[np.nonzero(fatedges)] = 128\n</code></pre>\n\n<hr>\n\n<p><strong>Keywords</strong>: image, image processing, fatten, thicken, outline, trace, edge, highlight, Numpy, PIL, Pillow, edge, edges, morphology, structuring element, skimage, scikit-image, erode, erosion, dilate, dilation.</p>\n"}, {"tags": [], "owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": false, "score": 0, "last_activity_date": 1547124418, "creation_date": 1547124418, "answer_id": 54129068, "question_id": 54118683, "link": "https://stackoverflow.com/questions/54118683/how-to-change-the-grey-scale-value-of-a-region-in-an-image/54129068#54129068", "title": "How to change the grey scale value of a region in an image?", "body": "<p>I can interpret your question in a much simpler way, so I thought I'd answer that simpler question too. Maybe you already have a grey-ish edge around your shapes (like the Google drive files you shared) and just want to change all pixels that are neither black nor white into a different colour - and the fact that they are edges is irrelevant. That is much easier:</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport numpy as np\nfrom PIL import Image\n\n# Open input image and ensure it is greyscale\nimage = Image.open('XYBase.png').convert('L')\n\n# Make Numpy version\nimnp = np.array(image)\n\n# Set all pixels that are neither black nor white to 220\nimnp[(imnp&gt;0) &amp; (imnp&lt;255)] = 220\n\n# Convert Numpy image back to PIL image and save\nImage.fromarray(imnp).save('result.png')\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 10178901, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/836a6219de4dd3d010226aac7c874ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos", "link": "https://stackoverflow.com/users/10178901/carlos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 54119204, "answer_count": 2, "score": 2, "last_activity_date": 1547124418, "creation_date": 1547069511, "last_edit_date": 1547115682, "question_id": 54118683, "link": "https://stackoverflow.com/questions/54118683/how-to-change-the-grey-scale-value-of-a-region-in-an-image", "title": "How to change the grey scale value of a region in an image?", "body": "<p>I am new to Python and not really sure how to attack this problem.</p>\n\n<p>What I am trying to do is to take a black and white image and change the value of the edge (x pixels thick) from 255 to some other greyscale value.</p>\n\n<p>I need to do this to a set of png images inside of a folder. All images will be geometric (mostly a combination of straight lines) no crazy curves or patterns. Using Python 3.</p>\n\n<p>Please check the images.</p>\n\n<p><a href=\"https://i.stack.imgur.com/WwaIU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WwaIU.png\" alt=\"Original 1\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/3a9Mu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3a9Mu.png\" alt=\"Desired 1\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/976sH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/976sH.png\" alt=\"Original 2\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/aIEhl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aIEhl.png\" alt=\"Desired 2\"></a></p>\n\n<p>A typical file will look like this:\n<a href=\"https://drive.google.com/open?id=13ls1pikNsO7ZbsHatC6cOr4O6Fj0MPOZ\" rel=\"nofollow noreferrer\">https://drive.google.com/open?id=13ls1pikNsO7ZbsHatC6cOr4O6Fj0MPOZ</a></p>\n"}, {"tags": ["python", "beautifulsoup", "google-cloud-platform", "google-cloud-functions"], "comments": [{"owner": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "edited": false, "score": 0, "creation_date": 1547076465, "post_id": 54118677, "comment_id": 95072205, "body": "I wasn&#39;t able to reproduce the deployment issue with <code>beautifulsoup4==4.7.1</code>, is it possible you didn&#39;t have the file saved with the added dependency before you deployed?"}, {"owner": {"reputation": 9180, "user_id": 395255, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b877e7b6ce7a551ef103f03ea55b3bd2?s=128&d=identicon&r=PG", "display_name": "Asdfg", "link": "https://stackoverflow.com/users/395255/asdfg"}, "reply_to_user": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "edited": false, "score": 0, "creation_date": 1547076591, "post_id": 54118677, "comment_id": 95072229, "body": "No. I verified it and manually edited requirements.txt file multiple times. I am using python 3.7 environment. May be that\u2019s the issue?"}, {"owner": {"reputation": 15554, "user_id": 328036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8db101b3a812b0464c53e5409c12ea94?s=128&d=identicon&r=PG", "display_name": "Dustin Ingram", "link": "https://stackoverflow.com/users/328036/dustin-ingram"}, "edited": false, "score": 0, "creation_date": 1547223126, "post_id": 54118677, "comment_id": 95131447, "body": "Sorry, I can&#39;t reproduce it even with your exact <code>requirements.txt</code> file. I am using the Python 3.7 environment as well."}, {"owner": {"reputation": 2337, "user_id": 5017391, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-k0Dqe3gdBfA/AAAAAAAAAAI/AAAAAAAAAq0/u0tF8Hv2EnU/photo.jpg?sz=128", "display_name": "Boris Yakubchik", "link": "https://stackoverflow.com/users/5017391/boris-yakubchik"}, "edited": false, "score": 0, "creation_date": 1593611004, "post_id": 54118677, "comment_id": 110841629, "body": "I was using <code>lxml</code> (e.g. <code>BeautifulSoup(body, &quot;lxml&quot;)</code>) and my CF (cloud function) was failing silently. After I added <code>lxml</code> to <code>requirements.txt</code> the CF started working again."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 14042878, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhtQU7sYO4mKczbS4hmIhNZG0fvu3mYTQ8PDRKwqQ=k-s128", "display_name": "Davy van der Horst", "link": "https://stackoverflow.com/users/14042878/davy-van-der-horst"}, "is_accepted": false, "score": 1, "last_activity_date": 1597694805, "last_edit_date": 1597694805, "creation_date": 1597694647, "answer_id": 63457879, "question_id": 54118677, "link": "https://stackoverflow.com/questions/54118677/cloud-function-unable-to-find-module/63457879#63457879", "title": "cloud function - unable to find module", "body": "<p>In my case when I defined soup as:</p>\n<pre><code>soup = BeautifulSoup(response.content, features=&quot;xml&quot;)\n</code></pre>\n<p>It ran into an error when calling soup (saying soup was not defined). Adding lxml to my <code>requirements.txt</code> fixed the problem.</p>\n"}], "owner": {"reputation": 9180, "user_id": 395255, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b877e7b6ce7a551ef103f03ea55b3bd2?s=128&d=identicon&r=PG", "display_name": "Asdfg", "link": "https://stackoverflow.com/users/395255/asdfg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1118, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1597694805, "creation_date": 1547069489, "last_edit_date": 1547074091, "question_id": 54118677, "link": "https://stackoverflow.com/questions/54118677/cloud-function-unable-to-find-module", "title": "cloud function - unable to find module", "body": "<p>I am getting below error while deploying <code>Cloud Function</code>.</p>\n\n<pre><code>Deployment failure:\nFunction load error: Code in file main.py can't be loaded.\nDid you list all required modules in requirements.txt?\nDetailed stack trace: Traceback (most recent call last):\n  File \"/env/local/lib/python3.7/site-packages/google/cloud/functions/worker.py\", line 256, in check_or_load_user_function\n    _function_handler.load_user_function()\n  File \"/env/local/lib/python3.7/site-packages/google/cloud/functions/worker.py\", line 166, in load_user_function\n    spec.loader.exec_module(main)\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 728, in exec_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n  File \"/user_code/main.py\", line 2, in &lt;module&gt;\n    from bs4 import BeautifulSoup\nModuleNotFoundError: No module named 'bs4'\n</code></pre>\n\n<p>This is how my packaged zip structure looks like:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 main.py\n\u2514\u2500\u2500 requirements.txt\n</code></pre>\n\n<p>This is how my requirements.txt looks like:</p>\n\n<pre><code>beautifulsoup4==4.7.1\nboto3==1.9.75\nbotocore==1.12.75\ncachetools==3.0.0\ncertifi==2018.11.29\nchardet==3.0.4\ndocutils==0.14\ngoogle-api-core==1.7.0\ngoogle-auth==1.6.2\ngoogle-cloud-core==0.29.1\ngoogle-cloud-datastore==1.7.3\ngoogle-resumable-media==0.3.2\ngoogleapis-common-protos==1.5.5\ngrpcio==1.17.1\nidna==2.8\njmespath==0.9.3\nprotobuf==3.6.1\npyasn1==0.4.5\npyasn1-modules==0.2.3\npython-dateutil==2.7.5\npytz==2018.9\nrequests==2.21.0\nrsa==4.0\ns3transfer==0.1.13\nsix==1.12.0\nsoupsieve==1.6.2\nurllib3==1.24.1\n</code></pre>\n\n<p>This is how I am importing <code>bs4</code> module in <code>main.py</code>:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\nfrom datetime import datetime\nimport boto3\nimport re\n</code></pre>\n\n<p>According to <a href=\"https://cloud.google.com/functions/docs/concepts/python-runtime#source_code_structure\" rel=\"nofollow noreferrer\">documentation</a>, requirements.txt file must be in the same directory as the main.py file that contains your function code. which you can see that it is.</p>\n\n<p>Please note that this is working fine from my local system.</p>\n\n<p>Service account attached to the function has below roles:</p>\n\n<pre><code>Cloud Datastore User\nStorage Admin\n</code></pre>\n\n<p>When I go to Cloud Functions UI from the console. I can see main.py and requirements.txt both are showing up there with the right content in the <code>source</code> tab.</p>\n\n<p>What am I missing here?</p>\n\n<h2>Update</h2>\n\n<p>Figured out the problem. If I mention <code>beautifulsoup4==4.7.1</code> in requirements.txt file, it fails. But if I do not specify version number in there, it works. <code>beautifulsoup4</code></p>\n\n<p>Not sure why though. Any idea?</p>\n"}, {"tags": ["python", "python-3.x", "pycharm", "profiling", "cprofile"], "comments": [{"owner": {"reputation": 320, "user_id": 5367428, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bafaa8db343876214c9529ac2c69c450?s=128&d=identicon&r=PG&f=1", "display_name": "FlorianK", "link": "https://stackoverflow.com/users/5367428/floriank"}, "edited": false, "score": 0, "creation_date": 1596037014, "post_id": 54118630, "comment_id": 111682906, "body": "For the second part (breakdown of how the calls are spread across the various functions), I&#39;ve had good results with the <a href=\"https://github.com/joerick/pyinstrument\" rel=\"nofollow noreferrer\">pyinstrument</a> package, since it records the <a href=\"https://github.com/joerick/pyinstrument#full-stack-recording\" rel=\"nofollow noreferrer\">entire call stack</a> and shows the profiling output in an easy to use format."}], "answers": [{"comments": [{"owner": {"reputation": 102, "user_id": 609012, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/242d801a647adc99a84d6fe58f3c9624?s=128&d=identicon&r=PG", "display_name": "Alison", "link": "https://stackoverflow.com/users/609012/alison"}, "edited": false, "score": 0, "creation_date": 1603763403, "post_id": 63939151, "comment_id": 114133526, "body": "Thank you this was quite helpful, but just to clarify &quot;own time&quot; it simply means how much time was spent inside takes_one_second() vs. how much time takes_one_second() took calling takes_two_seconds()?"}], "tags": [], "owner": {"reputation": 710, "user_id": 8941926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b07c46af369523eb5b47706816e7231?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin S", "link": "https://stackoverflow.com/users/8941926/kevin-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1600349385, "creation_date": 1600349385, "answer_id": 63939151, "question_id": 54118630, "link": "https://stackoverflow.com/questions/54118630/understanding-pycharms-profilers-results-vs-cprofile-results-and-how-to-get-m/63939151#63939151", "title": "Understanding Pycharm&#39;s profiler&#39;s results vs. cProfile results and how to get more detail on standard library functions", "body": "<blockquote>\n<p>In particular, what do the Time and Own Time columns represent? I am guessing Own Time is the time consumed by the function, minus the time of any other calls made within that function, and time is the total time spent in each function (i.e. they just renamed tottime and cumtime, respectively), but I can't find anything that documents that clearly.</p>\n</blockquote>\n<p>You can see definitions of own time and time here: <a href=\"https://www.jetbrains.com/help/profiler/Reference__Dialog_Boxes__Properties.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/profiler/Reference__Dialog_Boxes__Properties.html</a></p>\n<p>Own time - Own execution time of the chosen function. The percentage of own time spent in this call related to overall time spent in this call in the parentheses.</p>\n<p>Time - Execution time of the chosen function plus all time taken by functions called by this function. The percentage of time spent in this call related to time spent in all calls in the parentheses.</p>\n<p>This is also confirmed by a small test:\n<a href=\"https://i.stack.imgur.com/EPTZq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EPTZq.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/P7YMF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/P7YMF.png\" alt=\"enter image description here\" /></a></p>\n<blockquote>\n<p>Also, what can I do to find more information about a particularly costly function using either PyCharm's profiler or vanilla cProfile?</p>\n</blockquote>\n<p>By default pycharm does use cProfile as a profiler.  Perhaps you're asking about using cProfile on the command line?  There are plenty of examples of doing so here: <a href=\"https://docs.python.org/3.6/library/profile.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3.6/library/profile.html</a></p>\n<p><a href=\"https://i.stack.imgur.com/t4UC2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t4UC2.png\" alt=\"enter image description here\" /></a></p>\n<blockquote>\n<p>For example, _strptime seems to be costing me a lot of time, but I know it is being used in four different functions in my code. I'd like to see a breakdown of how those 2 million calls are spread across my various functions.</p>\n</blockquote>\n<p>Note that the act of measuring something will have an impact on the measurement retrieved.  For a function or method that is called many times, especially 2 million, the profiler itself will have a significant impact on the measured value.</p>\n"}], "owner": {"reputation": 301, "user_id": 1889140, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2221dab1140d668e8afd4d0b77221064?s=128&d=identicon&r=PG", "display_name": "Troy D", "link": "https://stackoverflow.com/users/1889140/troy-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1260, "favorite_count": 3, "answer_count": 1, "score": 16, "last_activity_date": 1600349385, "creation_date": 1547069217, "question_id": 54118630, "link": "https://stackoverflow.com/questions/54118630/understanding-pycharms-profilers-results-vs-cprofile-results-and-how-to-get-m", "title": "Understanding Pycharm&#39;s profiler&#39;s results vs. cProfile results and how to get more detail on standard library functions", "body": "<p>I am working on driving down the execution time on a program I've refactored, and I'm having trouble understanding the profiler output in PyCharm and how it relates to the output I would get if I run cProfile directly.  (My output is shown below, with two lines of interest highlighted that I want to be sure I understand correctly before attempting to make fixes.)  In particular, what do the Time and Own Time columns represent?  I am guessing Own Time is the time consumed by the function, minus the time of any other calls made within that function, and time is the total time spent in each function (i.e. they just renamed tottime and cumtime, respectively), but I can't find anything that documents that clearly.</p>\n\n<p>Also, what can I do to find more information about a particularly costly function using either PyCharm's profiler or vanilla cProfile?  For example, _strptime seems to be costing me a lot of time, but I know it is being used in four different functions in my code.  I'd like to see a breakdown of how those 2 million calls are spread across my various functions.  I'm guessing there's a disproportionate number in the calc_near_geo_size_and_latency function, but I'd like more proof of that before I go rewriting code.  (I realize that I could just profile the functions individually and compare, but I'm hoping for something more concise.)</p>\n\n<p>I'm using Python 3.6 and PyCharm Professional 2018.3.</p>\n\n<p><a href=\"https://i.stack.imgur.com/NPeoP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/NPeoP.png\" alt=\"Part of the output of profiling the program\"></a></p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1547069092, "post_id": 54118597, "comment_id": 95069674, "body": "Take a moment to read through the <a href=\"//stackoverflow.com/editing-help\">editing help</a> in the help center. Formatting on Stack Overflow is different than other sites. The better your post looks, the easier it is for others to read and understand it."}, {"owner": {"reputation": 877, "user_id": 4974662, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FHAjX.jpg?s=128&g=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/4974662/pynoob"}, "edited": false, "score": 0, "creation_date": 1547069807, "post_id": 54118597, "comment_id": 95069978, "body": "@Mariano, is there any way you can provide a shorter example; it&#39;s hard to follow given the length"}], "answers": [{"tags": [], "owner": {"reputation": 877, "user_id": 4974662, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/FHAjX.jpg?s=128&g=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/4974662/pynoob"}, "is_accepted": false, "score": 0, "last_activity_date": 1547069454, "last_edit_date": 1547069454, "creation_date": 1547069258, "answer_id": 54118636, "question_id": 54118597, "link": "https://stackoverflow.com/questions/54118597/how-to-match-a-pattern-and-add-a-character-to-it/54118636#54118636", "title": "how to match a pattern and add a character to it", "body": "<p>Why not just do a replace? Shortening your example string to make it easier to read:</p>\n\n<pre><code>\"(((GCF_001297375:2.6671e-05,GCF_002904975:2.6672e-05)...\".replace(\":\",\"_S:\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5116, "user_id": 3254859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mGMef.jpg?s=128&g=1", "display_name": "Chris Mueller", "link": "https://stackoverflow.com/users/3254859/chris-mueller"}, "is_accepted": false, "score": 1, "last_activity_date": 1547070364, "creation_date": 1547070364, "answer_id": 54118834, "question_id": 54118597, "link": "https://stackoverflow.com/questions/54118597/how-to-match-a-pattern-and-add-a-character-to-it/54118834#54118834", "title": "how to match a pattern and add a character to it", "body": "<p>You can use regular expressions with a function substitution.  The solution below depends on the numbers always being 9 digits, but could be modified to work with other cases.</p>\n\n<pre><code>test_str = '(((GCF_001297375:2.6671e-05,GCF_002904975:2.6672e-05)0.924:0.060046136,GCF_000144955:0.036474926,((GCF_001681075:0.017937143,...'\nnew_str = re.sub(r\"GCF_\\d{9}\", lambda x: x.group(0) + \"_S\", test_str)\n\nprint(new_str)\n#(((GCF_001297375_S:2.6671e-05,GCF_002904975_S:2.6672e-05)0.924:0.060046136,GCF_000144955_S:0.036474926,((GCF_001681075_S:0.017937143,...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 225, "user_id": 6208997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2nKvd.jpg?s=128&g=1", "display_name": "jammartin", "link": "https://stackoverflow.com/users/6208997/jammartin"}, "is_accepted": true, "score": 2, "last_activity_date": 1547070377, "creation_date": 1547070377, "answer_id": 54118836, "question_id": 54118597, "link": "https://stackoverflow.com/questions/54118597/how-to-match-a-pattern-and-add-a-character-to-it/54118836#54118836", "title": "how to match a pattern and add a character to it", "body": "<p>This can be easily done with <code>re.sub</code> function. A working example would look like this:</p>\n\n<pre><code>import re\n\ninp_string='(((GCF_001297375:2.6671e-05,GCF_002904975:2.6672e-05)0.924:0.060046136,(GCF_000144955:0.036474926,((GCF_001681075:0.017937143,...'\n\nif __name__ == \"__main__\":\n    outp_string = re.sub(r'GCF_(?P&lt;gfc_number&gt;\\d+)\\:', r'GCF_\\g&lt;gfc_number&gt;_S:', inp_string)\n    print(outp_string)\n</code></pre>\n\n<p>This code gives the following result, which is hopefully what you need:</p>\n\n<p><code>(((GCF_001297375_S:2.6671e-05,GCF_002904975_S:2.6672e-05)0.924:0.060046136,(GCF_000144955_S:0.036474926,((GCF_001681075_S:0.017937143,...</code></p>\n\n<p>For more info take a look at the docs:\n<a href=\"https://docs.python.org/3/library/re.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/re.html</a></p>\n"}], "owner": {"reputation": 75, "user_id": 7963746, "user_type": "registered", "profile_image": "https://graph.facebook.com/10212908029442278/picture?type=large", "display_name": "Mariano Avino", "link": "https://stackoverflow.com/users/7963746/mariano-avino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 54118836, "answer_count": 3, "score": 1, "last_activity_date": 1547073419, "creation_date": 1547069043, "last_edit_date": 1547073419, "question_id": 54118597, "link": "https://stackoverflow.com/questions/54118597/how-to-match-a-pattern-and-add-a-character-to-it", "title": "how to match a pattern and add a character to it", "body": "<p>I have something like: </p>\n\n<pre><code>GCF_002904975:2.6672e-05):2.6672e-05.\n</code></pre>\nand I would like to add the word '_S' right after any GCF(any number) entry before the next colon.\n\n<p>In other words I would like my text becoming like:</p>\n\n<pre><code>GCF_002904975_S:2.6672e-05):2.6672e-05.\n</code></pre>\nI have repeated pattern like that all along my text.\n"}, {"tags": ["python", "python-3.x", "numpy", "matplotlib", "jupyter-notebook"], "comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1547069448, "post_id": 54118594, "comment_id": 95069816, "body": "Can you provide some sample X and y? Without looking into actual data, it&#39;s hard to say what exactly is the problem and where is the error coming from"}, {"owner": {"reputation": 2179, "user_id": 7644168, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Yo2Wp.jpg?s=128&g=1", "display_name": "samba", "link": "https://stackoverflow.com/users/7644168/samba"}, "reply_to_user": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1547069807, "post_id": 54118594, "comment_id": 95069977, "body": "@Bazingaa I&#39;m using this dataset <a href=\"https://www.kaggle.com/omnamahshivai/surgical-dataset-binary-classification\" rel=\"nofollow noreferrer\">kaggle.com/omnamahshivai/surgical-dataset-binary-classificat&zwnj;&#8203;ion</a>. My target is a &#39;complication&#39; column from the dataset"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1547070705, "post_id": 54118594, "comment_id": 95070360, "body": "You seem to have quite some experience with asking questions on SO. You have to make sure your code is complete and reproducible. Although people can download the csv file from this link, you should add all the command regarding the loading of the csv file"}, {"owner": {"reputation": 599, "user_id": 8212790, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oqKVv4fDBmo/AAAAAAAAAAI/AAAAAAAAA74/g60NhqcJ8tE/photo.jpg?sz=128", "display_name": "Ozkan Serttas", "link": "https://stackoverflow.com/users/8212790/ozkan-serttas"}, "edited": false, "score": 1, "creation_date": 1548993621, "post_id": 54118594, "comment_id": 95753086, "body": "This might help your case <a href=\"https://stackoverflow.com/questions/41050906/how-to-plot-the-decision-boundary-of-logistic-regression-in-scikit-learn\" title=\"how to plot the decision boundary of logistic regression in scikit learn\">stackoverflow.com/questions/41050906/&hellip;</a>"}], "owner": {"reputation": 2179, "user_id": 7644168, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Yo2Wp.jpg?s=128&g=1", "display_name": "samba", "link": "https://stackoverflow.com/users/7644168/samba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1547081023, "creation_date": 1547069039, "last_edit_date": 1547081023, "question_id": 54118594, "link": "https://stackoverflow.com/questions/54118594/python-how-to-visualise-a-decision-boundary-for-a-logisticregression", "title": "Python - how to visualise a decision boundary for a LogisticRegression?", "body": "<p>I'm trying to visualise a decision boundary for a LogisticRegression() classifier. </p>\n\n<p>But getting a <code>ValueError: X has 2 features per sample; expecting 24</code> when calling <code>plot_boundary(LogisticRegression(), X, y, \"Log Reg\")</code></p>\n\n<p>I've checked the <code>X.shape</code> and it is <code>(14635, 24)</code>\nWhat could be wrong with my function?</p>\n\n<pre><code>def plot_boundary(clf, X, y, plot_title): \n    xx, yy = np.meshgrid(np.linspace(-3, 3, 50), np.linspace(-3, 3, 50)) \n    clf.fit(X, y) \n    # plot the decision function for each datapoint on the grid \n    Z = clf.predict_proba(np.vstack((xx.ravel(), yy.ravel())).T)[:, 1] \n    Z = Z.reshape(xx.shape) \n\n    image = plt.imshow(Z, interpolation='nearest', extent=(xx.min(), xx.max(),\n                       yy.min(), yy.max()), aspect='auto', origin='lower', \n                       cmap=plt.cm.PuOr_r) \n    contours = plt.contour(xx, yy, Z, levels=[0], linewidths=2, linetypes='--') \n    plt.scatter(X[:, 0], X[:, 1], s=30, c=y, cmap=plt.cm.Paired) \n    plt.xticks(()) \n    plt.yticks(()) \n    plt.xlabel(r'$x_1$') \n    plt.ylabel(r'$x_2$') \n    plt.axis([-3, 3, -3, 3]) \n    plt.colorbar(image) \n    plt.title(plot_title, fontsize=12)\n</code></pre>\n"}, {"tags": ["python", "multithreading", "pyqt5"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1547070846, "post_id": 54118561, "comment_id": 95070421, "body": "change <code>temp_thread</code> to <code>self.temp_thread</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1547071047, "post_id": 54118561, "comment_id": 95070519, "body": "emp_thread is a local variable so it will be deleted when the btn_0_clicked function is finished, so the thread will be destroyed when it does not emit the signal causing an abrupt exit, so the solution is to extend the life cycle of the variable as per example to do it attribute of the class, another method is to pass it a parent: <code>temp_thread = StringThread(&quot;name&quot;, self)</code> ... <code>def __init__(self, name, parent=None):         super(StringThread, self).__init__(parent)</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1547071636, "post_id": 54118561, "comment_id": 95070753, "body": "There are several methodologies to use QThread: inherit from QThread (the method you tried to use), use QObjects as workers, workers + controllers, use lambda methods, etc. The use of one or another methodology in general is arbitrary but in some cases one method can be implemented and in others it can not. It is good that you review the docs: <a href=\"http://doc.qt.io/qt-5/qthread.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/qthread.html</a>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1547071730, "post_id": 54118561, "comment_id": 95070780, "body": "IMHO in python I prefer to use <code>threading.Thread()</code> since the use is simple."}, {"owner": {"reputation": 621, "user_id": 4408818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55e5f51aedefde420afa4a8f7f71a173?s=128&d=identicon&r=PG&f=1", "display_name": "Ozymandias", "link": "https://stackoverflow.com/users/4408818/ozymandias"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1547071956, "post_id": 54118561, "comment_id": 95070876, "body": "@eyllanesc I would like to keep everything in PyQt5. Also I need pyqtSignal for cross thread communication"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1547072113, "post_id": 54118561, "comment_id": 95070931, "body": "The need for signals always exists in PyQt5, and in the transmission of data from the threads to the GUI is mandatory; review the following example: <a href=\"https://stackoverflow.com/questions/54041323/how-i-can-make-thread-for-progress-bar-with-pafy\" title=\"how i can make thread for progress bar with pafy\">stackoverflow.com/questions/54041323/&hellip;</a> :-)"}], "answers": [{"tags": [], "owner": {"reputation": 10248, "user_id": 268396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4220afde4dd928ef33648797c7415ada?s=128&d=identicon&r=PG", "display_name": "user268396", "link": "https://stackoverflow.com/users/268396/user268396"}, "is_accepted": false, "score": 0, "last_activity_date": 1547070792, "creation_date": 1547070792, "answer_id": 54118932, "question_id": 54118561, "link": "https://stackoverflow.com/questions/54118561/starting-a-qthread-on-a-button-click-in-pyqt5/54118932#54118932", "title": "Starting a Qthread on a button click in PyQt5", "body": "<p>You should probably read up on the Qt C++ documentation to better understand what is happening:</p>\n\n<ol>\n<li><a href=\"http://doc.qt.io/qt-5/qobject.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qobject.html</a></li>\n<li><a href=\"http://doc.qt.io/qt-5/qthread.html\" rel=\"nofollow noreferrer\">http://doc.qt.io/qt-5/qthread.html</a></li>\n<li><a href=\"https://wiki.qt.io/QThreads_general_usage\" rel=\"nofollow noreferrer\">https://wiki.qt.io/QThreads_general_usage</a></li>\n</ol>\n\n<p>In general you have two problems (one of which is worth listing twice, to examine it from different angles):</p>\n\n<ol>\n<li>Your <code>QThread</code> is <em>owned/associated</em> by/with the thread that created it for the purpose of emitting events. So all code trying to emit events is actually trying to access the event loop of your main thread (UI). Read up on <code>QObject</code>'s <code>thread()</code> and <code>moveToThread()</code> methods to understand this more fully.</li>\n<li>You overrode the <code>run()</code> method of <code>QThread</code> which is what is invoked on the actual thread represented by <code>QThread</code> (i.e. the code that winds up getting called eventually once you call <code>start()</code> on the thread). So you are effectively trying to access the main event loop in an unsafe manner from <em>a different</em> thread.</li>\n<li>You overrode the <code>run()</code> method of <code>QThread</code>. The default implementation of <code>QThread</code> sets up a <code>QEventLoop</code>, runs it and that is what gives <code>QObject</code>'s associated/owned with/by that thread the ability to use signal/slots freely. You probably did not intend to lose that default implementation.</li>\n</ol>\n\n<p>Basically what you want to do instead is this:</p>\n\n<ol>\n<li>Do not subclass <code>QThread</code>. Instead write a custom <code>QObject</code> worker subclass with appropriate events</li>\n<li>Construct a <code>QThread</code> with an eventloop (the default IIRC, but check the docs)</li>\n<li>Construct an instance of your custom worker object.</li>\n<li>Move your worker object to the newly created <code>QThread</code> with <code>moveToThread()</code>.</li>\n<li>Wire up the signals and slots, make sure you are using the QueuedConnection type (the default is DirectConnection which is not suitable for communicating across thread boundaries).</li>\n<li>Start your thread which should just run its own <code>QEventLoop</code>.</li>\n<li>Emit the signal to kickstart your worker object logic.</li>\n<li>Receive notification of the results via signals on your main thread (eventloop), where it is safe to update the UI.</li>\n<li>Figure out how you want to terminate the <code>QThread</code> and clean up associated resources. Typically you would fire a custom event wired up to the <code>destroyLater()</code> slot to get rid of your worker object. You may want to cache/reuse the <code>QThread</code> for subsequent button clicks or you may want to tear it down as well once your worker object has been cleaned up.</li>\n</ol>\n"}], "owner": {"reputation": 621, "user_id": 4408818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55e5f51aedefde420afa4a8f7f71a173?s=128&d=identicon&r=PG&f=1", "display_name": "Ozymandias", "link": "https://stackoverflow.com/users/4408818/ozymandias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1869, "favorite_count": 1, "closed_date": 1547070806, "answer_count": 1, "score": 0, "last_activity_date": 1547071587, "creation_date": 1547068908, "last_edit_date": 1547071587, "question_id": 54118561, "link": "https://stackoverflow.com/questions/54118561/starting-a-qthread-on-a-button-click-in-pyqt5", "closed_reason": "Duplicate", "title": "Starting a Qthread on a button click in PyQt5", "body": "<p>I'm currently trying to make an API call when my button is clicked without pausing my GUI for the duration of the call. I was using threads to set the text of my Qlable to the response of the API call. This worked however it was unsafe as I was accessing GUI elements from a separate thread. </p>\n\n<p>Currently, I'm attempting to use QThreads to make the API call and then emit the response to the GUI thread however, when I create the Qthread object my program finishes with exit code 3. I've simplified the problem for more clarity.</p>\n\n<pre><code>class MainWindow(QtWidgets.QWidget):\n\n    def __init__(self):\n        super(MainWindow, self).__init__()\n        self.setWindowTitle(\"TestWindow\")\n        self.setFixedSize(300,75)\n\n        self.main_layout = QtWidgets.QGridLayout()\n        self.setLayout(self.main_layout)\n        self.txt_0 = QtWidgets.QLabel()\n        self.btn_0 = QtWidgets.QPushButton('Press Me')\n        self.btn_0.clicked.connect(self.btn_0_clicked)\n\n        self.main_layout.addWidget(self.txt_0, 0, 0)\n        self.main_layout.addWidget(self.btn_0, 1, 0)\n\n        self.show()\n\n    def btn_0_clicked(self):\n        temp_thread = StringThread(\"name\")\n        temp_thread.start()\n\n\nclass StringThread(QtCore.QThread):\n\n    str_signal = QtCore.pyqtSignal(str)\n    _name = ''\n\n    def __init__(self, name):\n        QtCore.QThread.__init__(self)\n        self._name = name\n        print(\"Thread Created\")\n\n    def run(self):\n        self.str_signal.emit('Emitted message from StringThread. Name = ' + self._name)\n        print(\"Done run\")\n</code></pre>\n\n<p>My intention is to set the text of my Qlable to the message emitted from the pyqtSignal in the StringThread class however, as soon as I click the button my program finishes with exit code 3.</p>\n\n<p><strong>edit:</strong></p>\n\n<p>I made the following changes to the btn_0_clicked method</p>\n\n<pre><code>def btn_0_clicked(self):\n        self.temp_thread = StringThread(\"hello\")\n        self.temp_thread.str_signal.connect(self.txt_0.setText)\n        self.temp_thread.start()\n</code></pre>\n\n<p>It's working now.</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "keras"], "comments": [{"owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "edited": false, "score": 0, "creation_date": 1547070278, "post_id": 54118546, "comment_id": 95070182, "body": "Have you tried different learning rates? <a href=\"https://keras.io/optimizers/\" rel=\"nofollow noreferrer\">keras.io/optimizers</a>"}, {"owner": {"reputation": 28720, "user_id": 4561314, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6ad3771ba6e8e823dbcae710c1cde4da?s=128&d=identicon&r=PG", "display_name": "stackoverflowuser2010", "link": "https://stackoverflow.com/users/4561314/stackoverflowuser2010"}, "reply_to_user": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "edited": false, "score": 0, "creation_date": 1547073643, "post_id": 54118546, "comment_id": 95071448, "body": "@GergesDib: Thanks. I posted an answer below. Does it follow your intuition?"}, {"owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "edited": false, "score": 0, "creation_date": 1547074051, "post_id": 54118546, "comment_id": 95071552, "body": "yes looks about right."}], "answers": [{"tags": [], "owner": {"reputation": 28720, "user_id": 4561314, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6ad3771ba6e8e823dbcae710c1cde4da?s=128&d=identicon&r=PG", "display_name": "stackoverflowuser2010", "link": "https://stackoverflow.com/users/4561314/stackoverflowuser2010"}, "is_accepted": false, "score": 1, "last_activity_date": 1547073607, "creation_date": 1547073607, "answer_id": 54119442, "question_id": 54118546, "link": "https://stackoverflow.com/questions/54118546/keras-rnn-gru-lstm-produces-plateau-and-then-improvement/54119442#54119442", "title": "Keras RNN (GRU, LSTM) produces plateau and then improvement", "body": "<p>Following the comment by @Gerges Dib, I tried out different learning rates in increasing order.</p>\n\n<p><code>lr = 0.0001</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/6mQkQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6mQkQ.png\" alt=\"enter image description here\"></a></p>\n\n<p><code>lr = 0.001</code> (the default learning rate for RMSprop)</p>\n\n<p><a href=\"https://i.stack.imgur.com/ANh14.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ANh14.png\" alt=\"enter image description here\"></a></p>\n\n<p><code>lr = 0.01</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/ZFcqU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZFcqU.png\" alt=\"enter image description here\"></a></p>\n\n<p><code>lr = 0.05</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/ueCTB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ueCTB.png\" alt=\"enter image description here\"></a></p>\n\n<p><code>lr = 0.1</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/A7NrV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A7NrV.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is very interesting. It looks like the plateau was caused by the optimizer's learning rate being too low. The parameters were stuck in a local optima until it could break out. I have not seen this pattern before.</p>\n"}], "owner": {"reputation": 28720, "user_id": 4561314, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6ad3771ba6e8e823dbcae710c1cde4da?s=128&d=identicon&r=PG", "display_name": "stackoverflowuser2010", "link": "https://stackoverflow.com/users/4561314/stackoverflowuser2010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 661, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547073607, "creation_date": 1547068848, "question_id": 54118546, "link": "https://stackoverflow.com/questions/54118546/keras-rnn-gru-lstm-produces-plateau-and-then-improvement", "title": "Keras RNN (GRU, LSTM) produces plateau and then improvement", "body": "<p>I'm new to Keras (with TensorFlow backend) and am using it to do some simple sentiment analysis on user reviews. For some reason, my recurrent neural network is producing some unusual results that I do not understand.</p>\n\n<p><strong>First</strong>, my data is a straight-forward sentiment analysis training and test set from the <a href=\"https://archive.ics.uci.edu/ml/datasets/Sentiment+Labelled+Sentences\" rel=\"nofollow noreferrer\">UCI ML archive</a>. There were 2061 training instances, which is small. The data looks like this:</p>\n\n<pre><code>                                                text  label\n0  So there is no way for me to plug it in here i...      0\n1                        Good case, Excellent value.      1\n2                             Great for the jawbone.      1\n3  Tied to charger for conversations lasting more...      0\n4                                  The mic is great.      1\n</code></pre>\n\n<p><strong>Second</strong>, here is a FFNN implementation that produces good results.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># FFNN model.\n\n# Build the model.\nmodel_ffnn = Sequential()\nmodel_ffnn.add(layers.Embedding(input_dim=V, output_dim=32))\nmodel_ffnn.add(layers.GlobalMaxPool1D())\nmodel_ffnn.add(layers.Dense(10, activation='relu'))\nmodel_ffnn.add(layers.Dense(1, activation='sigmoid'))\nmodel_ffnn.summary()\n\n# Compile and train.\nmodel_ffnn.compile(optimizer='rmsprop', loss='binary_crossentropy', metrics=['acc'])\nEPOCHS = 50\nhistory_ffnn = model_ffnn.fit(x_train, y_train, epochs=EPOCHS,\n                              batch_size=128, validation_split=0.2, verbose=3)\n</code></pre>\n\n<p>As you can see, the learning curves produce a smooth improvement as the number of epochs increases.</p>\n\n<p><a href=\"https://i.stack.imgur.com/9UXib.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9UXib.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Third</strong>, here is the problem. I trained a recurrent neural network with a GRU, as shown below. I also tried an LSTM and saw the same results.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># GRU model.\n\n# Build the model.\nmodel_gru = Sequential()\nmodel_gru.add(layers.Embedding(input_dim=V, output_dim=32))\nmodel_gru.add(layers.GRU(units=32))\nmodel_gru.add(layers.Dense(units=1, activation='sigmoid'))\nmodel_gru.summary()\n\n# Compile and train.\nmodel_gru.compile(optimizer='rmsprop', loss='binary_crossentropy', metrics=['acc'])\nEPOCHS = 50\nhistory_gru = model_gru.fit(x_train, y_train, epochs=EPOCHS,\n                            batch_size=128, validation_split=0.2, verbose=3)\n</code></pre>\n\n<p>However, the learning curves are quite unusual. You can see a plateau where neither the loss nor the accuracy improve up to about epoch 17, and then the model starts learning and improving. I have never seen this type of plateau at the start of training before.</p>\n\n<p><strong>Can anyone explain why this plateau is occurring, why it stops and gives way to gradual learning, and how I can avoid it?</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/sxVyf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sxVyf.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "pytest"], "comments": [{"owner": {"reputation": 1198, "user_id": 10643988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mg2mD.jpg?s=128&g=1", "display_name": "Bill M.", "link": "https://stackoverflow.com/users/10643988/bill-m"}, "edited": false, "score": 1, "creation_date": 1547069490, "post_id": 54118525, "comment_id": 95069834, "body": "You mean &quot;not being used&quot;?  What exactly does &quot;config.option.file_or_dir&quot; return?"}, {"owner": {"reputation": 1185, "user_id": 9726179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b633bf2b2e7a37ea947f8bb5205e9037?s=128&d=identicon&r=PG&f=1", "display_name": "Ivo Merchiers", "link": "https://stackoverflow.com/users/9726179/ivo-merchiers"}, "edited": false, "score": 1, "creation_date": 1547070522, "post_id": 54118525, "comment_id": 95070282, "body": "Welcome to Stackoverflow! There seems to be quite a lot of code in your example that is irrelevant for your specific problem, which makes it harder to pinpoint the exact problem. Try to create a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 1, "user_id": 7253599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/590bddd139d68fed07371fd0b0576020?s=128&d=identicon&r=PG&f=1", "display_name": "Anastasios", "link": "https://stackoverflow.com/users/7253599/anastasios"}, "reply_to_user": {"reputation": 1198, "user_id": 10643988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mg2mD.jpg?s=128&g=1", "display_name": "Bill M.", "link": "https://stackoverflow.com/users/10643988/bill-m"}, "edited": false, "score": 0, "creation_date": 1547127408, "post_id": 54118525, "comment_id": 95090869, "body": "@BillM. The &quot;config.option.file_or_dir returns a list that contains filename or directories. Yes you are correct not being used."}], "owner": {"reputation": 1, "user_id": 7253599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/590bddd139d68fed07371fd0b0576020?s=128&d=identicon&r=PG&f=1", "display_name": "Anastasios", "link": "https://stackoverflow.com/users/7253599/anastasios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547127276, "creation_date": 1547068761, "last_edit_date": 1547127276, "question_id": 54118525, "link": "https://stackoverflow.com/questions/54118525/when-i-set-config-option-file-or-dir-in-the-conftest-py-file-value-is-not-b", "title": "When i set &quot;config.option.file_or_dir&quot; in the &quot;conftest.py&quot; file, value is not been used", "body": "<p>When I set the parameter <strong>\"config.option.file_or_dir\"</strong> in the <strong>\"conftest.py\"</strong> file, the value set is not been used. It runs all the tests.\nWhen I read the parameter <strong>\"config.option.file_or_dir\"</strong> it's display my value i had set.  </p>\n\n<h2>conftest.py</h2>\n\n<pre><code>def pytest_configure(config):\n\n    if len(config.option.file_or_dir) == 0 and ini_paser.get('TestRun', 'value') is not \"\":\n        config.option.file_or_dir.append(ini_paser.get('TestRun', 'value'))\n        print(\"file_or_dir - after =\" + str(config.option.file_or_dir))\n</code></pre>\n\n<h2>test.ini</h2>\n\n<pre><code>   [Suites]\n   value=Smoke\n\n   [Browser]\n   env_title=Browser\n   value=chrome\n\n   [DPR_ENV]\n   env_title=DRP Environment\n   value=SQA\n\n   [Customer]\n   env_title=Customer\n   value=mstqa\n\n   [User]\n   env_title=User\n   value=mstqa_d_admin,mstqa_c_admin\n\n   [TestRun]\n   value=Software_Update/\n</code></pre>\n\n<h2>command line</h2>\n\n<pre><code>xxx/scr/proj/DRP/tests/pytest --ini test.ini\n</code></pre>\n\n<p>I do not put any parameter in the command line. I will set which to tests to be executed from the ini file via the section <strong>\"TestRun\"</strong>.</p>\n"}, {"tags": ["python", "heroku"], "comments": [{"owner": {"reputation": 4159, "user_id": 8212173, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ApXfoDEeNA/AAAAAAAAAAI/AAAAAAAAADc/9wpTVfHMarU/photo.jpg?sz=128", "display_name": "amanb", "link": "https://stackoverflow.com/users/8212173/amanb"}, "edited": false, "score": 0, "creation_date": 1547070327, "post_id": 54118413, "comment_id": 95070198, "body": "Is the Python version on your local machine different from the one on Heroku(Python 3.6)?"}, {"owner": {"reputation": 31, "user_id": 10869032, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2R2IdmiJWVU/AAAAAAAAAAI/AAAAAAAAACE/mligHoOdYSY/photo.jpg?sz=128", "display_name": "patrol71", "link": "https://stackoverflow.com/users/10869032/patrol71"}, "reply_to_user": {"reputation": 4159, "user_id": 8212173, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ApXfoDEeNA/AAAAAAAAAAI/AAAAAAAAADc/9wpTVfHMarU/photo.jpg?sz=128", "display_name": "amanb", "link": "https://stackoverflow.com/users/8212173/amanb"}, "edited": false, "score": 0, "creation_date": 1547071253, "post_id": 54118413, "comment_id": 95070602, "body": "No difference..my local machine is running Python 3.6.5"}, {"owner": {"reputation": 5684, "user_id": 10172408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BcxZ9.png?s=128&g=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/10172408/nathan"}, "edited": false, "score": 0, "creation_date": 1547072295, "post_id": 54118413, "comment_id": 95071006, "body": "Can you post your main entry point? Also, your routes?"}, {"owner": {"reputation": 31, "user_id": 10869032, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2R2IdmiJWVU/AAAAAAAAAAI/AAAAAAAAACE/mligHoOdYSY/photo.jpg?sz=128", "display_name": "patrol71", "link": "https://stackoverflow.com/users/10869032/patrol71"}, "edited": false, "score": 0, "creation_date": 1547089146, "post_id": 54118413, "comment_id": 95074846, "body": "Sorry, but unsure what is meant by main entry point.   I&#39;ll try to add my route code above"}], "owner": {"reputation": 31, "user_id": 10869032, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2R2IdmiJWVU/AAAAAAAAAAI/AAAAAAAAACE/mligHoOdYSY/photo.jpg?sz=128", "display_name": "patrol71", "link": "https://stackoverflow.com/users/10869032/patrol71"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547093607, "creation_date": 1547068216, "last_edit_date": 1547093607, "question_id": 54118413, "link": "https://stackoverflow.com/questions/54118413/heroku-internal-server-error-valueerror-invalid-header-value-b", "title": "Heroku internal server error - ValueError: Invalid header value b", "body": "<p>I am new to using Heroku and totally stumped with this error.  My flask app runs perfectly on my local machine and I can make API calls with the AerisWeather Python SDK just fine locally.  However, I can't get past this \"internal server error\" that I see after deploying it to Heroku.  Below is a part of the error log that I believe indicates a problem with the header, but I just don't know how to solve it since I don't have any code explicitly defining a header.  Does Heroku set a header that I can view?  Any help will be appreciated and thanks in advance.</p>\n\n<pre><code>2019-01-09T21:25:02.611924+00:00 heroku[router]: at=info method=GET path=\"/\" host=mlcc-dashboard.herokuapp.com request_id=06d623f5-cf8e-4d5f-a7d5-8af44cd27805 fwd=\"64.134.157.188\" dyno=web.1 connect=0ms service=7ms status=500 bytes=456 protocol=https\n2019-01-09T21:25:02.610887+00:00 app[web.1]: [2019-01-09 21:25:02,609] ERROR in app: Exception on / [GET]\n2019-01-09T21:25:02.610917+00:00 app[web.1]: Traceback (most recent call last):\n2019-01-09T21:25:02.610921+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 2292, in wsgi_app\n2019-01-09T21:25:02.610923+00:00 app[web.1]:     response = self.full_dispatch_request()\n2019-01-09T21:25:02.610925+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 1815, in full_dispatch_request\n2019-01-09T21:25:02.610927+00:00 app[web.1]:     rv = self.handle_user_exception(e)\n2019-01-09T21:25:02.610928+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 1718, in handle_user_exception\n2019-01-09T21:25:02.610930+00:00 app[web.1]:     reraise(exc_type, exc_value, tb)\n2019-01-09T21:25:02.610932+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/_compat.py\", line 35, in reraise\n2019-01-09T21:25:02.610935+00:00 app[web.1]:     raise value\n2019-01-09T21:25:02.610937+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 1813, in full_dispatch_request\n2019-01-09T21:25:02.610938+00:00 app[web.1]:     rv = self.dispatch_request()\n2019-01-09T21:25:02.610940+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/flask/app.py\", line 1799, in dispatch_request\n2019-01-09T21:25:02.610941+00:00 app[web.1]:     return self.view_functions[rule.endpoint](**req.view_args)\n2019-01-09T21:25:02.610943+00:00 app[web.1]:   File \"/app/mlcc_dashboard/app.py\", line 105, in index\n2019-01-09T21:25:02.610945+00:00 app[web.1]:     response_list = aeris.batch_request(endpoints=endpoints, global_location=loc)\n2019-01-09T21:25:02.610947+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/aerisweather/aerisweather.py\", line 178, in batch_request\n2019-01-09T21:25:02.610949+00:00 app[web.1]:     json_obj = network.get_json(url, self.app_id)\n2019-01-09T21:25:02.610950+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/site-packages/aerisweather/utils/AerisNetwork.py\", line 27, in get_json\n2019-01-09T21:25:02.610953+00:00 app[web.1]:     resp = request.urlopen(req)\n2019-01-09T21:25:02.610954+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/urllib/request.py\", line 223, in urlopen\n2019-01-09T21:25:02.610956+00:00 app[web.1]:     return opener.open(url, data, timeout)\n2019-01-09T21:25:02.610959+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/urllib/request.py\", line 526, in open\n2019-01-09T21:25:02.610960+00:00 app[web.1]:     response = self._open(req, data)\n2019-01-09T21:25:02.610962+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/urllib/request.py\", line 544, in _open\n2019-01-09T21:25:02.610963+00:00 app[web.1]:     '_open', req)\n2019-01-09T21:25:02.610965+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/urllib/request.py\", line 504, in _call_chain\n2019-01-09T21:25:02.610966+00:00 app[web.1]:     result = func(*args)\n2019-01-09T21:25:02.610968+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/urllib/request.py\", line 1361, in https_open\n2019-01-09T21:25:02.610970+00:00 app[web.1]:     context=self._context, check_hostname=self._check_hostname)\n2019-01-09T21:25:02.610971+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/urllib/request.py\", line 1318, in do_open\n2019-01-09T21:25:02.610973+00:00 app[web.1]:     encode_chunked=req.has_header('Transfer-encoding'))\n2019-01-09T21:25:02.610974+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/http/client.py\", line 1239, in request\n2019-01-09T21:25:02.610976+00:00 app[web.1]:     self._send_request(method, url, body, headers, encode_chunked)\n2019-01-09T21:25:02.610977+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/http/client.py\", line 1280, in _send_request\n2019-01-09T21:25:02.610979+00:00 app[web.1]:     self.putheader(hdr, value)\n2019-01-09T21:25:02.610980+00:00 app[web.1]:   File \"/app/.heroku/python/lib/python3.6/http/client.py\", line 1217, in putheader\n2019-01-09T21:25:02.610982+00:00 app[web.1]:     raise ValueError('Invalid header value %r' % (values[i],))\n2019-01-09T21:25:02.610990+00:00 app[web.1]: ValueError: Invalid header value b'AerisPythonSDK/0.3.0/Python/3.6.2 (default, May 22 2018, 20:38:47) \\n[GCC 7.3.0]'\n2019-01-09T21:25:02.612416+00:00 app[web.1]: 10.95.237.176 - - [09/Jan/2019:21:25:02 +0000] \"GET / HTTP/1.1\" 500 291 \"https://dashboard.heroku.com/\" \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36\"\n</code></pre>\n\n<p>Code for the flask route:</p>\n\n<pre><code>@app.route(\"/\")\ndef index():\n    \"\"\"Render Home Page\"\"\"\n    aeris = AerisWeather(client_id, client_secret, app_id)\n    loc = RequestLocation(city=\"boston\", state=\"ma\")\n    obs_dict = {}   \n    global aerisTemp\n    endpoint1 = Endpoint(endpoint_type=EndpointType.OBSERVATIONS, action=RequestAction.OBSERVATIONS.CLOSEST, params={ParameterType.OBSERVATIONS.P: \"02101\"})\n    endpoint2 = Endpoint(endpoint_type=EndpointType.OBSERVATIONS_SUMMARY)\n    endpoints = [endpoint1, endpoint2]  \n    response_list = aeris.batch_request(endpoints=endpoints, global_location=loc)   \n    for resp in response_list:  \n        if type(resp) is ObservationsResponse:\n            obs = resp\n            ob = obs.ob\n            obs_dict.update(timestamp = str(ob.timestamp))\n            obs_dict.update(humidity = str(ob.humidity))\n            obs_dict.update(isDay = str(ob.isDay))\n            obs_dict.update(tempF = str(ob.tempF))\n            obs_dict.update(weatherPrimaryCoded = str(ob.weatherPrimaryCoded))\n            obs_dict.update(weatherShort = str(ob.weatherShort))\n        elif type(resp) is ObservationsSummaryResponse:\n            ob_sum = resp\n            periods = ob_sum.periods\n            temp = periods[0].temp\n            aerisTemp = temp.avgF\n            obs_dict.update(avgTempF = str(temp.avgF))\n            obs_dict.update(precipMM = str(periods[0].precip.totalMM))\n\n    return render_template(\"index.html\", data=obs_dict)\n</code></pre>\n"}, {"tags": ["python", "docker", "amazon-ec2", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 940, "user_id": 2090761, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tAg2C.jpg?s=128&g=1", "display_name": "vvchik", "link": "https://stackoverflow.com/users/2090761/vvchik"}, "edited": false, "score": 0, "creation_date": 1547089050, "post_id": 54121366, "comment_id": 95074827, "body": "I have no your <code>requirements.txt</code> so it is failing on <code>RUN pip3 install -r &#47;app&#47;requirements.txt</code> step for me. but your issue is passed."}], "tags": [], "owner": {"reputation": 940, "user_id": 2090761, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tAg2C.jpg?s=128&g=1", "display_name": "vvchik", "link": "https://stackoverflow.com/users/2090761/vvchik"}, "is_accepted": true, "score": 1, "last_activity_date": 1547088981, "creation_date": 1547088981, "answer_id": 54121366, "question_id": 54118398, "link": "https://stackoverflow.com/questions/54118398/how-to-install-scrapy-docker-container-on-amazon-linux-2-ami-ec2/54121366#54121366", "title": "How to install Scrapy Docker Container on Amazon Linux 2 AMI EC2", "body": "<p>Actually, it is not docker, it is python error.\nyou installing <code>python-devel</code> but using python3\nso you need to replace string with <code>python devel</code>\nto <code>RUN yum install python3-devel -y</code></p>\n"}], "owner": {"reputation": 25, "user_id": 5658024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60e66d6274ab4deeead16301ac4e3e4f?s=128&d=identicon&r=PG&f=1", "display_name": "buklaou", "link": "https://stackoverflow.com/users/5658024/buklaou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 54121366, "answer_count": 1, "score": 0, "last_activity_date": 1547088981, "creation_date": 1547068188, "last_edit_date": 1547068476, "question_id": 54118398, "link": "https://stackoverflow.com/questions/54118398/how-to-install-scrapy-docker-container-on-amazon-linux-2-ami-ec2", "title": "How to install Scrapy Docker Container on Amazon Linux 2 AMI EC2", "body": "<p>Trying to create a docker container which would run scrapy spiders. I haven't seen any clear examples of how it is done.</p>\n\n<p>I've tried multiple changes in the Dockerfile, yet I'm still doing something wrong. Can anyone assist?</p>\n\n<p>Dockerfile:</p>\n\n<pre><code>FROM amazonlinux\nCOPY . /app\nRUN yum -y update\nRUN yum -y install python3\nRUN yum -y install python3-pip\nRUN yum install python-devel -y\nRUN yum install gcc gcc-devel -y\nRUN yum install libxml2 libxml2-devel -y\nRUN yum install libxslt libxslt-devel -y\nRUN yum install openssl openssl-devel -y\nRUN yum install libffi libffi-devel -y\nRUN pip3 install lxml\nRUN pip3 install scrapy\nRUN pip3 install -r /app/requirements.txt\nWORKDIR /app\nENTRYPOINT [\"python3\", \"/app/spiders/start.py\"]\n</code></pre>\n\n<p>This is what the terminal gives as error:</p>\n\n<p><a href=\"https://imgur.com/a/OQfYBnb\" rel=\"nofollow noreferrer\">https://imgur.com/a/OQfYBnb</a></p>\n"}, {"tags": ["python", "odoo", "xml-rpc", "xmlrpclib"], "answers": [{"tags": [], "owner": {"reputation": 1275, "user_id": 2740928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lRjN4.jpg?s=128&g=1", "display_name": "ex4", "link": "https://stackoverflow.com/users/2740928/ex4"}, "is_accepted": false, "score": 0, "last_activity_date": 1587720902, "creation_date": 1587720902, "answer_id": 61405291, "question_id": 54118364, "link": "https://stackoverflow.com/questions/54118364/how-to-provide-a-lot-serial-number-for-the-product-through-xmlrpc-in-odoo/61405291#61405291", "title": "how to provide a Lot/Serial number for the product through xmlrpc in odoo", "body": "<p>Replying to old thread, but in case someone else is looking for solution for the same problem.</p>\n\n<p>You have <code>stock.move</code> (Picking order lines) objects related to your <code>stock.picking</code>. If product in a <code>stock.move</code> is tracked by serial number each <code>stock.move</code> should have as many <code>stock.move.line</code> objects related to it as it has quantity. You write serial numbers to <code>stock.move.line</code>.</p>\n\n<p>Your <code>stock.picking</code> is related to <code>stock.picking.type</code>. Scenario of writing serials depends on <code>stock.picking.type</code> parameter <code>use_create_lots</code>.</p>\n\n<p>If <code>use_create_lots == True</code> you can simply write your serial number to field <code>lot_name</code> field and Odoo creates <code>stock_production_lot</code> -objects (serial number object) for you.</p>\n\n<p>If <code>user_create_lots == False</code> Odoo excepts that <code>stock_production_lot</code>objects already exists in system and refuses create new serial numbers. In that case you have to search <code>stock.production.lot</code>objects and link them to <code>stock_move_line</code> object by writing it's id to <code>stock.move.line.lot_id</code> -field.</p>\n"}], "owner": {"reputation": 51, "user_id": 9599223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a7bac4f4207e2220c1e2424f4806855?s=128&d=identicon&r=PG", "display_name": "Yan Chirino", "link": "https://stackoverflow.com/users/9599223/yan-chirino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1587720902, "creation_date": 1547067984, "question_id": 54118364, "link": "https://stackoverflow.com/questions/54118364/how-to-provide-a-lot-serial-number-for-the-product-through-xmlrpc-in-odoo", "title": "how to provide a Lot/Serial number for the product through xmlrpc in odoo", "body": "<p>I have in my code via xmlrpc a function to validate the picking but it asks me to place the batch number of the product. How can I validate that lot?</p>\n\n<pre><code>pick_assign = models.execute_kw(db, uid, password, 'stock.picking', 'force_assign',[pick_id[0]])\n\npick_transfer_create = models.execute_kw(db, uid, password, 'stock.immediate.transfer', 'create',[{'pick_id': pick_id[0]}])\n\npick_done = models.execute_kw(db, uid, password, 'stock.immediate.transfer', 'process', [pick_transfer_create],{})\n</code></pre>\n\n<p>this is the error in the output:</p>\n\n<pre><code>Fault: &lt;Fault 2: 'You need to provide a Lot/Serial Number for product xxxxxxxxx (WH/PICK/06113)'&gt;\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1547068119, "post_id": 54118347, "comment_id": 95069258, "body": "The error is clear. If you have a nested list for <code>user_id</code> then your indexing also produces a list that you then try to concatenate with a string. <code>list + str</code> is not possible."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1547068218, "post_id": 54118347, "comment_id": 95069302, "body": "If <code>user_id = [[&#39;e11111&#39;], [&#39;e11234&#39;]]</code>, then <code>user_id[0:6]</code> gives <code>[[&#39;e11111&#39;], [&#39;e11234&#39;]]</code>. What do you <i>expect</i> it to give?"}], "answers": [{"comments": [{"owner": {"reputation": 467, "user_id": 3508766, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd818021719367fa079f80794c7a6a10?s=128&d=identicon&r=PG&f=1", "display_name": "user3508766", "link": "https://stackoverflow.com/users/3508766/user3508766"}, "edited": false, "score": 0, "creation_date": 1547069402, "post_id": 54118405, "comment_id": 95069799, "body": "This only sends email to one of the user_id&#39;s in [[&#39;e11111&#39;], [&#39;e11234&#39;]]"}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 0, "last_activity_date": 1547068202, "creation_date": 1547068202, "answer_id": 54118405, "question_id": 54118347, "link": "https://stackoverflow.com/questions/54118347/typeerror-can-only-concatenate-list-not-str-to-list-when-sending-email/54118405#54118405", "title": "TypeError: can only concatenate list (not &quot;str&quot;) to list when sending email", "body": "<p>As said, <code>user_id</code> here is a list of lists, not list of strings. So you can try</p>\n\n<pre><code>Receiver = (user_id[0][0] + '@sender', 'john.smith@co.com')\n</code></pre>\n\n<p>Note: <code>user_id[0] = ['e11111']</code> is still a list.</p>\n"}, {"comments": [{"owner": {"reputation": 467, "user_id": 3508766, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd818021719367fa079f80794c7a6a10?s=128&d=identicon&r=PG&f=1", "display_name": "user3508766", "link": "https://stackoverflow.com/users/3508766/user3508766"}, "edited": false, "score": 0, "creation_date": 1547069718, "post_id": 54118658, "comment_id": 95069936, "body": "This worked! One thing, sometimes user_id has extra characters like e11111@usa.net. I used to trim @usa.net with user_id[0:6]. How can i do the same in this situation"}], "tags": [], "owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "is_accepted": true, "score": 1, "last_activity_date": 1547070206, "last_edit_date": 1547070206, "creation_date": 1547069401, "answer_id": 54118658, "question_id": 54118347, "link": "https://stackoverflow.com/questions/54118347/typeerror-can-only-concatenate-list-not-str-to-list-when-sending-email/54118658#54118658", "title": "TypeError: can only concatenate list (not &quot;str&quot;) to list when sending email", "body": "<p>If <code>user_id</code> is a list of lists of the form of <code>[['e11111'], ['e11234']]</code>, you can do:</p>\n\n<pre><code> Receiver = tuple([i[0][0:6] + '@co.com' for i in user_id] + ['john.smith@co.com'])\n</code></pre>\n\n<p>This will extract the string from the 1-length lists inside <code>user_id</code> and append the <code>'@co.com'</code> string to them. john smith is concatenated to the resulting list and the final list is transformed into a tuple (I guess Receiver should be a tuple, if it is fine with a list you can omit the <code>tuple()</code>)</p>\n\n<p><strong>EDIT after comment</strong></p>\n\n<p>With <code>i[0][0:6]</code> only the first 6 characters of the strings are used.</p>\n"}], "owner": {"reputation": 467, "user_id": 3508766, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cd818021719367fa079f80794c7a6a10?s=128&d=identicon&r=PG&f=1", "display_name": "user3508766", "link": "https://stackoverflow.com/users/3508766/user3508766"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1695, "favorite_count": 0, "accepted_answer_id": 54118658, "answer_count": 2, "score": -1, "last_activity_date": 1547070371, "creation_date": 1547067913, "last_edit_date": 1547070371, "question_id": 54118347, "link": "https://stackoverflow.com/questions/54118347/typeerror-can-only-concatenate-list-not-str-to-list-when-sending-email", "title": "TypeError: can only concatenate list (not &quot;str&quot;) to list when sending email", "body": "<p>I am getting this error when trying to send an email with user_id in a Receiver. Please someone advise how to get around it. Sample of my code:</p>\n\n<pre><code>if #something == True:\n    user_id = q[\"user\"]\n    print user_id ####produces [['e11111'], ['e11234']]\n\n    Sender = \"Sender@sender.com\"\n    Receiver = (user_id[0:6] + '@co.com', 'john.smith@co.com')\n    msg = MIMEMultipart('alternative')\n    msg['Subject'] = \"Subject\"\n    msg['From'] = Sender\n    msg['To'] = ', '.join(Receiver)\n    html = \"text here\"\n\n    part = MIMEText(html, 'html')\n    msg.attach(part)\n</code></pre>\n\n<p>This works fine with </p>\n\n<pre><code>Receiver = ('Joshua@co.com', 'john.smith@co.com')\n</code></pre>\n\n<p>Or if the print user_id produces only one result - e11111.\nWhat I need is to send that email to e11111@co.com, e11234@co.com and john.smith@co.com</p>\n"}, {"tags": ["python", "catboost"], "answers": [{"tags": [], "owner": {"reputation": 1403, "user_id": 2981639, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d45a19d42e0043b4ee22e480f1847699?s=128&d=identicon&r=PG&f=1", "display_name": "David Waterworth", "link": "https://stackoverflow.com/users/2981639/david-waterworth"}, "is_accepted": false, "score": 0, "last_activity_date": 1570509250, "creation_date": 1570509250, "answer_id": 58280233, "question_id": 54118318, "link": "https://stackoverflow.com/questions/54118318/catboost-evaluation-test-set-with-weights-for-observations/58280233#58280233", "title": "catboost: evaluation/test set with weights for observations", "body": "<p>My understanding is this is a case where you need to use a Pool, i.e. </p>\n\n<pre><code>model.fit(Pool(X_train,y_train,weight=train_weight)\n      eval_set=Pool(X_test,y_test,weight=test_weight),\n      cat_features=categorical_features_indices,\n      use_best_model=True,\n      verbose=True)\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10891790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e905da2038ff5eb7c414e760975427e?s=128&d=identicon&r=PG&f=1", "display_name": "LUm-1", "link": "https://stackoverflow.com/users/10891790/lum-1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 981, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1570509250, "creation_date": 1547067782, "last_edit_date": 1592644375, "question_id": 54118318, "link": "https://stackoverflow.com/questions/54118318/catboost-evaluation-test-set-with-weights-for-observations", "title": "catboost: evaluation/test set with weights for observations", "body": "<p>I'm working on a dataset containing a list of people (indexed by the fiscal code). The target variable is binary (1: buy a book, 0: otherwise).\nAll the predictors are categorical (ex: nationality, city, road, bin of the income and so on).\nA fiscal-code could be repeated twice and each instance/observation have a weight (1 if not repeated, a value between 0 and 1 if repeated).</p>\n<p>For example, the dataset looks like</p>\n<p>fiscal_code       |  weight      | target       | categorical info</p>\n<p>AAAAA1            |   0.98       | 0            |......</p>\n<p>AAAAA1            |   0.02       | 1            |........</p>\n<p>I have two dataset (with the same variables), one for <strong>train</strong> (X_train=matrix of categorical variables , y_train that is the target variable, train_weight that is weight for every observation in the train set) and one for <strong>test</strong> (with the same variables and meaning: X_test, y_test and test_weight).</p>\n<p>I try a Catboost model- CatBoostClassifier.</p>\n<h1>Inizialize booster and hyperparameters</h1>\n<p>categorical_features_indices = np.where(X.dtypes == np.category)[0]</p>\n<p>model = CatBoostClassifier(iterations=5000, learning_rate=0.1, depth=7, loss_function='Logloss',eval_metric='AUC')</p>\n<h1>Fit model</h1>\n<p>model.fit(X_train,</p>\n<pre><code>        y_train,\n         eval_set=(X_test,y_test),\n         cat_features=categorical_features_indices,\n         use_best_model=True,\n         verbose=True,\n         sample_weight=train_weight)\n</code></pre>\n<p>The question is: how can I take into account that the observations in the TEST set have weights too (test_weight) ? Do you have any idea?</p>\n<p>I read the documentation on <a href=\"https://tech.yandex.com/catboost/doc/dg/concepts/python-reference_catboostregressor_fit-docpage/\" rel=\"nofollow noreferrer\">https://tech.yandex.com/catboost/doc/dg/concepts/python-reference_catboostregressor_fit-docpage/</a> but I did not find anything useful, instead of lightgbm documentation (if considering another boosting model).</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "edited": false, "score": 1, "creation_date": 1547068953, "post_id": 54118295, "comment_id": 95069628, "body": "<code>Point</code> and <code>Polygon</code> are not part of <code>numpy</code>.  They come from somewhere else (<code>matplotlib.patches</code>?  <code>shapely</code>? Find out where.)  That&#39;s why you can&#39;t expect a <code>numpy</code> array of such objects to inherit the behavior of the objects themselves."}], "answers": [{"tags": [], "owner": {"reputation": 5586, "user_id": 5763590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AUdju.png?s=128&g=1", "display_name": "mrk", "link": "https://stackoverflow.com/users/5763590/mrk"}, "is_accepted": false, "score": 0, "last_activity_date": 1547068728, "creation_date": 1547068728, "answer_id": 54118518, "question_id": 54118295, "link": "https://stackoverflow.com/questions/54118295/how-do-i-create-a-numpy-array-that-corresponds-to-whether-a-point-is-inside-a-nu/54118518#54118518", "title": "How do I create a numpy array that corresponds to whether a point is inside a numpy array of polygons?", "body": "<p>First the error message is actually what keeps you from succeeding. <code>.ndarray object</code> just do not have that attribute <code>contains</code></p>\n\n<p>Which renders your question to one of those <a href=\"https://stackoverflow.com/questions/7088625/what-is-the-most-efficient-way-to-check-if-a-value-exists-in-a-numpy-array\">solutions</a>, discussing on how to check whether an element is within a numpy Array.</p>\n\n<p>One Thing that could work instead of contains is something following that line, if I understood correctly:</p>\n\n<pre><code>y = np.zeros(len(p))\nfor counter in range (0, len(p)):\n    if point in p[counter]:\n        y[counter] = 1 \n</code></pre>\n\n<p><strong>Note:</strong> It would help if you would add exemplary values for your variables and the then expected output.</p>\n"}, {"tags": [], "owner": {"reputation": 21140, "user_id": 3821154, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/RYr9X.jpg?s=128&g=1", "display_name": "mdurant", "link": "https://stackoverflow.com/users/3821154/mdurant"}, "is_accepted": false, "score": 1, "last_activity_date": 1547068794, "creation_date": 1547068794, "answer_id": 54118532, "question_id": 54118295, "link": "https://stackoverflow.com/questions/54118295/how-do-i-create-a-numpy-array-that-corresponds-to-whether-a-point-is-inside-a-nu/54118532#54118532", "title": "How do I create a numpy array that corresponds to whether a point is inside a numpy array of polygons?", "body": "<p>A numpy object array is not particularly useful to you here, you may as well do the process with a list comprehension</p>\n\n<pre><code>y = [p.contains(point) for p in polygonss]\n</code></pre>\n\n<p>However, if you are doing this for a large number of points, then I encourage you to read up on <a href=\"http://geopandas.org/\" rel=\"nofollow noreferrer\">geopandas</a> which enables you to do vectorised computations on geometries and apply them to tabular data.</p>\n"}], "owner": {"reputation": 121, "user_id": 7356253, "user_type": "registered", "profile_image": "https://graph.facebook.com/10100548751868826/picture?type=large", "display_name": "Laura Holewa", "link": "https://stackoverflow.com/users/7356253/laura-holewa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1547069553, "creation_date": 1547067650, "last_edit_date": 1547069553, "question_id": 54118295, "link": "https://stackoverflow.com/questions/54118295/how-do-i-create-a-numpy-array-that-corresponds-to-whether-a-point-is-inside-a-nu", "title": "How do I create a numpy array that corresponds to whether a point is inside a numpy array of polygons?", "body": "<p>Here is my attempt, but I get the error \n<code>\"AttributeError: 'numpy.ndarray' object has no attribute 'contains'\"</code> . </p>\n\n<p>If any of you can help me to understand how to define <code>'y'</code> in this code such that it is a numpy array with 1s corresponding to the index of polygons that contain the specified point and 0s corresponding to the index of polygons that do not contain the specified point I  would appreciate it.</p>\n\n<pre><code>polygonss=[]\nfor i in range(0, len(verts)):\n    polygonc = Polygon(verts[i])\n    print (polygonc)\n    polygonss.append(polygonc)\nprint (polygonss)\np=np.array(polygonss)\nprint (p)\nvertsf=meshinformation_fine.celltoverticesandcentroid(0)[0]\npoint = Point(vertsf[0])\ny=np.where(p.contains(point), 0, 1)\nprint (y)\n</code></pre>\n"}, {"tags": ["python", "ssh", "paramiko"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1547068352, "post_id": 54118291, "comment_id": 95069371, "body": "Please fix your indentation on the anonymized code. Note that the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> definition requires that code given to demonstrate a problem actually be runnable to see the problem being asked about (incorporated in both &quot;complete&quot; and &quot;verifiable&quot; requirements)."}, {"owner": {"reputation": 35, "user_id": 10892047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d74ab5a61c85fd487ebc1b60898b9629?s=128&d=identicon&r=PG&f=1", "display_name": "Galgu", "link": "https://stackoverflow.com/users/10892047/galgu"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1547070266, "post_id": 54118291, "comment_id": 95070177, "body": "sorry, first post, tried to read all rules. Thanks Jundullah for proper  indentation"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1547071607, "post_id": 54118291, "comment_id": 95070744, "body": "Ahh, this is much more readable now. So, this code is trying to connect to a separate local agent on the host where you&#39;re invoking it. Is there one running?"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1547071712, "post_id": 54118291, "comment_id": 95070773, "body": "Paramiko will forward to a local agent, or it&#39;ll act as a client to an agent. I don&#39;t know that it has any support for acting as an agent itself, but if you expect the private key file that you&#39;re loading to be used to answer remote requests without having a separate agent process running, that&#39;s what you need."}, {"owner": {"reputation": 35, "user_id": 10892047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d74ab5a61c85fd487ebc1b60898b9629?s=128&d=identicon&r=PG&f=1", "display_name": "Galgu", "link": "https://stackoverflow.com/users/10892047/galgu"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1547074989, "post_id": 54118291, "comment_id": 95071824, "body": "ssh-agent is running on all servers indeed.       eval &#39;ssh-agent&#39;  So would this solution work ? Do you have any advice on how to do what I try to do any other way ? thanks for the quick answer by the way"}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1547075255, "post_id": 54118291, "comment_id": 95071902, "body": "&quot;All servers&quot; meaning the <i>local</i> system you&#39;re running the <code>paramiko</code>-based client on, or are you referring only to the systems you&#39;re logging into? (Just commenting for the moment, not answering, since I haven&#39;t taken the time to actually run a reproducer yet; TBD whether/when that opportunity will present itself)."}, {"owner": {"reputation": 35, "user_id": 10892047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d74ab5a61c85fd487ebc1b60898b9629?s=128&d=identicon&r=PG&f=1", "display_name": "Galgu", "link": "https://stackoverflow.com/users/10892047/galgu"}, "reply_to_user": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1547126643, "post_id": 54118291, "comment_id": 95090414, "body": "Yes, All servers in the chain currently run ssh-agent."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1547130736, "post_id": 54118291, "comment_id": 95092902, "body": "The servers don&#39;t need to run it. Only the client needs to run it."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1547131497, "post_id": 54118291, "comment_id": 95093423, "body": "...that&#39;s the <i>whole point</i> of agent forwarding, that the systems you log into get access to the agent running on your client system."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 10892047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d74ab5a61c85fd487ebc1b60898b9629?s=128&d=identicon&r=PG&f=1", "display_name": "Galgu", "link": "https://stackoverflow.com/users/10892047/galgu"}, "edited": false, "score": 0, "creation_date": 1547127452, "post_id": 54124235, "comment_id": 95090890, "body": "Great ! it works as expected. Thanks a lot, so simple."}], "tags": [], "owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "is_accepted": true, "score": 0, "last_activity_date": 1547107524, "creation_date": 1547107524, "answer_id": 54124235, "question_id": 54118291, "link": "https://stackoverflow.com/questions/54118291/python-paramiko-and-forward-agent-ssh/54124235#54124235", "title": "Python, paramiko and forward agent ssh", "body": "<p>Why do you run command-line <code>ssh</code> for the second step?</p>\n\n<p>Use port forwarding instead.</p>\n\n<p>See <a href=\"https://stackoverflow.com/q/35304525/850848\">Nested SSH using Python Paramiko</a>.</p>\n"}], "owner": {"reputation": 35, "user_id": 10892047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d74ab5a61c85fd487ebc1b60898b9629?s=128&d=identicon&r=PG&f=1", "display_name": "Galgu", "link": "https://stackoverflow.com/users/10892047/galgu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1097, "favorite_count": 1, "accepted_answer_id": 54124235, "answer_count": 1, "score": 1, "last_activity_date": 1547107524, "creation_date": 1547067637, "last_edit_date": 1547070030, "question_id": 54118291, "link": "https://stackoverflow.com/questions/54118291/python-paramiko-and-forward-agent-ssh", "title": "Python, paramiko and forward agent ssh", "body": "<p>I am learning python. I am at a step where I must connect with SSH and retrieve information. Direct connection to server A is OK. Direct connection to server B is OK. Now I'd like to make it work to connect to SSH to A and via A connect to SSH to B (because outside of my lab, there are security features that make me do that).</p>\n\n<p>I went far, looked everything on the internet, but Paramiko and SSH agent don't seem to work for me. I use public key authentication on my linux servers (all linux servers btw).</p>\n\n<p>I enabled detailed logs, and Here is the full error message anonymized:</p>\n\n<pre><code>INFO:paramiko.transport:Authentication (publickey) successful!\nDEBUG:paramiko.transport:[chan 0] Max packet in: 32768 bytes\nDEBUG:paramiko.transport:[chan 0] Max packet out: 32768 bytes\nDEBUG:paramiko.transport:Secsh channel 0 opened.\nDEBUG:paramiko.transport:[chan 1] Max packet in: 32768 bytes\nDEBUG:paramiko.transport:[chan 1] Max packet out: 32768 bytes\nDEBUG:paramiko.transport:Secsh channel 1 opened.\nDEBUG:paramiko.transport:[chan 1] Sesch channel 1 request ok\nDEBUG:paramiko.transport:[chan 1] Sesch channel 1 request ok\n('[SEND ] &gt;&gt;', 'hostname')\n('[RECEIVE] &lt;&lt;', u'Last login: Wed Jan 9 19:51:01 2019 from myserver')\n('[RECEIVE] &lt;&lt;', u'hostname ; echo CLIENT_EXPECT_CMD_OK')\n('[RECEIVE] &lt;&lt;', u'/----- Welcome to proxy jump server ----------')\n('[RECEIVE] &lt;&lt;', u'| CentOS release 6.6 (Final)')\n('[RECEIVE] &lt;&lt;', u'[mylogin@proxy_jump_server ~]$ hostname ; echo \nCLIENT_EXPECT_CMD_OK')\n('[RECEIVE] &lt;&lt;', u'proxy_jump_server')\n('[SEND ] &gt;&gt;', 'ssh mylogin@final_server hostname')\n('[RECEIVE] &lt;&lt;', u'[mylogin@proxy_jump_server ~]$ ssh mylogin@final_server \nhostname ; echo CLIENT_EXPECT_CMD_OK')\nDEBUG:paramiko.transport:Incoming forward agent connection\nDEBUG:paramiko.transport:[chan 2] Max packet in: 32768 bytes\nDEBUG:paramiko.transport:[chan 2] Max packet out: 16384 bytes\nDEBUG:paramiko.transport:Secsh channel 2 (auth-agent@openssh.com) opened.\nException in thread Thread-3:\nTraceback (most recent call last):\nFile \"/usr/lib64/python2.7/threading.py\", line 812, in __bootstrap_inner\nself.run()\nFile \"/usr/lib/python2.7/site-packages/paramiko/agent.py\", line 122, in run\nraise AuthenticationException(\"Unable to connect to SSH agent\")\nAuthenticationException: Unable to connect to SSH agent\n</code></pre>\n\n<p>On final_server login log (looks fine =/ !):</p>\n\n<pre><code>2019-01-09T19:50:12.417066+00:00 final_server sshd[7968]: Accepted \npublickey for mylogin from IP port 42360 ssh2\n2019-01-09T19:50:12.428465+00:00 final_server sshd[7968]: \npam_unix(sshd:session): session opened for user mylogin by (uid=0)\n2019-01-09T19:50:12.521360+00:00 final_server sshd[7968]: \npam_unix(sshd:session): session closed for user mylogin\n</code></pre>\n\n<p>Full code anonymized ( adapted from <a href=\"https://stackoverflow.com/questions/23007143/dsa-key-forwarding-using-paramiko\">DSA key forwarding using Paramiko?</a>):</p>\n\n<pre><code>#!/usr/bin/python2.7\n# -*- coding: utf-8 -*-\nimport paramiko\nclass SSHSession:\n\n\n    def __init__(self, server_address, user='mylogin', port=22):\n        self.connected = False\n        self.server_address = server_address\n        self.user = user\n        self.port = port\n\n\n    def connect(self):\n\n        try:\n            k = paramiko.RSAKey.from_private_key_file(\"/mypath/mykey.ppk\",password='blabla')\n            self.ssh_client = paramiko.SSHClient()\n            paramiko.common.logging.basicConfig(level=paramiko.common.DEBUG) \n            self.ssh_client.set_missing_host_key_policy(paramiko.AutoAddPolicy())\n            self.ssh_client.connect(self.server_address, username=self.user, pkey=k)\n            self.transport = self.ssh_client.get_transport()\n            self.agent_channel = self.transport.open_session()\n            self.agent_handler = paramiko.agent.AgentRequestHandler(self.agent_channel)\n            self.channel= self.ssh_client.invoke_shell()\n\n        except:\n            self.connected = False\n\n        else:\n            self.connected = True\n            return self.connected\n\n    def exec_command(self, command, newline='\\r'):\n        if not self.connected:\n            raise Exception('Not connected')\n\n        else:\n            timeout = 31536000 # 365 days in seconds\n            self.channel.settimeout(timeout)\n            line_buffer = ''\n            channel_buffer = ''\n            end_string = 'CLIENT_EXPECT_CMD_OK'\n            print('[SEND ] &gt;&gt;', command)\n            self.channel.send(command + ' ; echo ' + end_string + newline)\n\n            while True:\n                channel_buffer = self.channel.recv(1).decode('UTF-8')\n                if len(channel_buffer) == 0:\n                    raise Exception('connection lost with server: ' + self.server_address)\n                    break\n                channel_buffer = channel_buffer.replace('\\r', '')\n                if channel_buffer != '\\n':\n                    line_buffer += channel_buffer\n                else:\n                    if line_buffer == end_string:\n                        break\n                    print('[RECEIVE] &lt;&lt;', line_buffer)\n                    line_buffer = ''\n\n\n    def disconnect(self):\n        self.ssh_client.close()\n\n    def __enter__(self):\n        self.connect()\n        return self\n\n\n\n    def __exit__(self, _type, value, traceback):\n        self.disconnect()\n\n\n\n    if __name__ == \"__main__\":\n        server_address = 'proxy_jump_server'\n        ssh_user = 'mylogin'\n        with SSHSession(server_address) as ssh_session:\n            ssh_session.exec_command('hostname')\n            ssh_session.exec_command('ssh mylogin@final_server hostname' )\n</code></pre>\n\n<p>Any feedback is welcome ! Been stuck for the whole day on that point.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 402, "user_id": 1717699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8780bc1c7fe9e9a460a3ea4eb5ea2c0?s=128&d=identicon&r=PG&f=1", "display_name": "cors", "link": "https://stackoverflow.com/users/1717699/cors"}, "is_accepted": true, "score": 0, "last_activity_date": 1547068155, "creation_date": 1547068155, "answer_id": 54118390, "question_id": 54118288, "link": "https://stackoverflow.com/questions/54118288/python-pandas-trasnpose-dataframe-and-rename-columns/54118390#54118390", "title": "Python Pandas trasnpose DataFrame and rename columns", "body": "<p>Try this:</p>\n\n<pre><code>df = df.T\ndf.columns = ['numbers', 'letters', 'words']\ndf = df.reset_index(drop = True)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1547081669, "post_id": 54118466, "comment_id": 95073362, "body": "I just borrow your Q&amp;A as reference , hope it is ok .<a href=\"https://stackoverflow.com/a/54119293/7964527\">stackoverflow.com/a/54119293/7964527</a>"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1547081703, "post_id": 54118466, "comment_id": 95073368, "body": "@W-B Please be free to do so :)"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 3, "last_activity_date": 1547068517, "creation_date": 1547068517, "answer_id": 54118466, "question_id": 54118288, "link": "https://stackoverflow.com/questions/54118288/python-pandas-trasnpose-dataframe-and-rename-columns/54118466#54118466", "title": "Python Pandas trasnpose DataFrame and rename columns", "body": "<p>A better option would be <code>pd.DataFrame.from_dict</code> with the <code>index</code> orient:</p>\n\n<pre><code>pd.DataFrame.from_dict(d, orient='index', columns=['numbers', 'letters', 'words'])\n\n         numbers letters words\ncolumn1        1       a   foo\ncolumn2        2       b   bar\ncolumn3        3       c   baz\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10891938, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c7a4fea88f7c1672f5c11bc1b81acf?s=128&d=identicon&r=PG&f=1", "display_name": "kino", "link": "https://stackoverflow.com/users/10891938/kino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 54118390, "answer_count": 2, "score": 0, "last_activity_date": 1547240300, "creation_date": 1547067625, "last_edit_date": 1547240300, "question_id": 54118288, "link": "https://stackoverflow.com/questions/54118288/python-pandas-trasnpose-dataframe-and-rename-columns", "title": "Python Pandas trasnpose DataFrame and rename columns", "body": "<p>Here's a simple DataFrame example:</p>\n\n<pre><code>import pandas as pd\n\nd = dict(\n    column1 = [1, 'a', 'foo'],\n    column2 = [2, 'b', 'bar'],\n    column3 = [3, 'c', 'baz'],\n)\ndf = pd.DataFrame(data=d)\nprint(df)\n</code></pre>\n\n<p>with the output</p>\n\n<pre><code>  column1 column2 column3\n0     1     2     3\n1     a     b     c\n2   foo   bar   baz\n</code></pre>\n\n<p>I want to transpose it and rename the columns:</p>\n\n<pre><code>df.do_some_manipulation('numbers', 'letters', 'words')\n</code></pre>\n\n<p>so the output would be</p>\n\n<pre><code>   numbers letters words\n0        1       a   foo\n1        2       b   bar\n2        3       c   baz\n</code></pre>\n\n<p>Transpose method is not quite the thing, what should I do then?</p>\n"}, {"tags": ["python", "fibonacci", "memoization"], "comments": [{"owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "edited": false, "score": 4, "creation_date": 1547067431, "post_id": 54118210, "comment_id": 95068954, "body": "You&#39;re not actually returning anything from your function."}, {"owner": {"reputation": 3919, "user_id": 3132718, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Dv45L.png?s=128&g=1", "display_name": "Al.G.", "link": "https://stackoverflow.com/users/3132718/al-g"}, "edited": false, "score": 0, "creation_date": 1547067465, "post_id": 54118210, "comment_id": 95068970, "body": "Your function does not <code>return</code> anything. So <code>fib3(n-1) + fib3(n-2)</code> makes no sense, because you&#39;re summing 2 void values."}, {"owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "edited": false, "score": 0, "creation_date": 1547067465, "post_id": 54118210, "comment_id": 95068971, "body": "aka <code>table[n] = None + None</code>"}, {"owner": {"reputation": 461, "user_id": 4356506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8368ff96dbdb44928059bc3ce89b0c55?s=128&d=identicon&r=PG", "display_name": "0e1val", "link": "https://stackoverflow.com/users/4356506/0e1val"}, "edited": false, "score": 0, "creation_date": 1547067678, "post_id": 54118210, "comment_id": 95069061, "body": "you need to return table[n]"}, {"owner": {"reputation": 1912, "user_id": 3107858, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sehuC.jpg?s=128&g=1", "display_name": "DanGoodrick", "link": "https://stackoverflow.com/users/3107858/dangoodrick"}, "edited": false, "score": 0, "creation_date": 1547109087, "post_id": 54118210, "comment_id": 95080584, "body": "Thanks for the help.  I thought table was a global since it is declared outside the function"}], "answers": [{"comments": [{"owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "edited": false, "score": 1, "creation_date": 1547067571, "post_id": 54118270, "comment_id": 95069006, "body": "<code>None</code> is a singleton, no plural."}, {"owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "reply_to_user": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "edited": false, "score": 1, "creation_date": 1547067628, "post_id": 54118270, "comment_id": 95069039, "body": "@TheIncorrigible1 technically correct, which is the best kind of correct! Will update. Also voted to close because it&#39;s essentially a typo."}, {"owner": {"reputation": 1912, "user_id": 3107858, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sehuC.jpg?s=128&g=1", "display_name": "DanGoodrick", "link": "https://stackoverflow.com/users/3107858/dangoodrick"}, "edited": false, "score": 0, "creation_date": 1547111706, "post_id": 54118270, "comment_id": 95081952, "body": "This is the comment that most helped me understand the issue. Thanks."}], "tags": [], "owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "is_accepted": false, "score": 1, "last_activity_date": 1547067661, "last_edit_date": 1547067661, "creation_date": 1547067545, "answer_id": 54118270, "question_id": 54118210, "link": "https://stackoverflow.com/questions/54118210/fibonacci-memoization-in-python/54118270#54118270", "title": "Fibonacci Memoization in Python", "body": "<p>You aren't explicitly returning anything, and so your <code>fib3</code> function automatically returns <code>None</code>. Thus your line <code>table[n] = fib3(n-1) + fib3(n-2)</code> evaluates to <code>table[n] = None + None</code> and there is no <code>+</code> operator defined for <code>None</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 122, "user_id": 5728516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff9468569deef006e5423a42d4c31859?s=128&d=identicon&r=PG&f=1", "display_name": "Chandra Sekhar", "link": "https://stackoverflow.com/users/5728516/chandra-sekhar"}, "is_accepted": true, "score": 0, "last_activity_date": 1547138278, "last_edit_date": 1547138278, "creation_date": 1547067667, "answer_id": 54118301, "question_id": 54118210, "link": "https://stackoverflow.com/questions/54118210/fibonacci-memoization-in-python/54118301#54118301", "title": "Fibonacci Memoization in Python", "body": "<p>You have missed returning the value for fib3 function</p>\n\n<pre><code>import numpy as np\n\n# memoization\nn = 12\ntable = np.ones(n+1)*-1\ndef fib3(n):\n    if table[n]==-1:\n        if n&lt;=2: \n            table[n] = 1\n        else:\n            table[n] = fib3(n-1)+fib3(n-2)\n    return table[n]\nfib3(12)\n\n144\n</code></pre>\n"}], "owner": {"reputation": 1912, "user_id": 3107858, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/sehuC.jpg?s=128&g=1", "display_name": "DanGoodrick", "link": "https://stackoverflow.com/users/3107858/dangoodrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 54118301, "answer_count": 2, "score": 0, "last_activity_date": 1547138278, "creation_date": 1547067285, "last_edit_date": 1547111481, "question_id": 54118210, "link": "https://stackoverflow.com/questions/54118210/fibonacci-memoization-in-python", "title": "Fibonacci Memoization in Python", "body": "<p>I wrote this code to calculate the nth Fibonacci number and it works (calculates the right number) but fails because the table doesn't get updated.  Anybody know why?</p>\n\n<pre><code># memoization\nn = 12\ntable = np.ones(n+1)*-1\ndef fib3(n):\n    if table[n]==-1:\n        if n&lt;=2:\n            table[n] = 1\n        else:\n            table[n] = fib3(n-1)+fib3(n-2)\n    #return table ##This was part of my original solution but I removed it because it wasn't working\nfib3(12)\n</code></pre>\n\n<p>This is the error I get that I think is caused by a non-updating table (since table[n] always = -1):</p>\n\n<pre><code>TypeError: unsupported operand type(s) for +: 'NoneType' and 'NoneType'\n</code></pre>\n"}, {"tags": ["python", "qml", "pyside2", "qquickwidget"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1547067464, "post_id": 54118206, "comment_id": 95068969, "body": "show your main.qml. I think the cause of the problem is in the .qml"}, {"owner": {"reputation": 25, "user_id": 7562352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n0lwu.png?s=128&g=1", "display_name": "Skyfox", "link": "https://stackoverflow.com/users/7562352/skyfox"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1547069658, "post_id": 54118206, "comment_id": 95069918, "body": "<code>import QtQuick 2.0 import QtQuick.Window 2.0 import QtLocation 5.6 import QtPositioning 5.6  Window {     width: 300     height: 300     visible: true      Plugin {         id: mapPlugin         name: &quot;esri&quot;     }      Map {         anchors.fill: parent         plugin: mapPlugin         center: QtPositioning.coordinate(39.2160, 9.1344)         zoomLevel: 16     } }</code>"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1547069689, "post_id": 54118206, "comment_id": 95069929, "body": "please edit your question and add it there"}, {"owner": {"reputation": 25, "user_id": 7562352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n0lwu.png?s=128&g=1", "display_name": "Skyfox", "link": "https://stackoverflow.com/users/7562352/skyfox"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1547069983, "post_id": 54118206, "comment_id": 95070035, "body": "I have add it in main question"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7562352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n0lwu.png?s=128&g=1", "display_name": "Skyfox", "link": "https://stackoverflow.com/users/7562352/skyfox"}, "edited": false, "score": 0, "creation_date": 1547070334, "post_id": 54118782, "comment_id": 95070204, "body": "Great ! Now work. I feel so stupid. Thank you very much."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 2, "last_activity_date": 1547070067, "creation_date": 1547070067, "answer_id": 54118782, "question_id": 54118206, "link": "https://stackoverflow.com/questions/54118206/embedding-a-qquickwidget-in-a-layout-or-in-a-qwidget-in-python/54118782#54118782", "title": "Embedding a QQuickWidget in a Layout (or in a QWidget) in Python", "body": "<p>The problem is that the root element is a Window that will create a window, the solution is to use an Item:</p>\n\n<pre><code>import QtQuick 2.0\nimport QtLocation 5.6\nimport QtPositioning 5.6\n\nItem {\n    width: 300\n    height: 300\n\n    Plugin {\n        id: mapPlugin\n        name: \"esri\"\n    }\n\n    Map {\n        anchors.fill: parent\n        plugin: mapPlugin\n        center: QtPositioning.coordinate(39.2160, 9.1344)\n        zoomLevel: 16\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 7562352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n0lwu.png?s=128&g=1", "display_name": "Skyfox", "link": "https://stackoverflow.com/users/7562352/skyfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "accepted_answer_id": 54118782, "answer_count": 1, "score": 1, "last_activity_date": 1547070376, "creation_date": 1547067276, "last_edit_date": 1547070376, "question_id": 54118206, "link": "https://stackoverflow.com/questions/54118206/embedding-a-qquickwidget-in-a-layout-or-in-a-qwidget-in-python", "title": "Embedding a QQuickWidget in a Layout (or in a QWidget) in Python", "body": "<p>I use Python and Pyside2, I try to insert a QQuickWidget inside a Qwidget or inside a Layout but I haven't find a solution.\nI try with this code:</p>\n\n<pre><code>view = QQuickWidget()\nview.setSource(QUrl.fromLocalFile(\"main.qml\"))\n</code></pre>\n\n<p>but QQuickWidget start in another windows.\nI try use:</p>\n\n<pre><code>Layout.addWidget(view)\n</code></pre>\n\n<p>but it required a QWidget and don't work with QQuickWidget.\nI found this similar question (in C) but it don't work in Python:\n<a href=\"https://stackoverflow.com/questions/38178712/adding-qquickwidget-in-qstackedwidget\">Adding QQuickWidget in QStackedWidget</a></p>\n\n<p>I have try QQmlApplicationEngine and QQuickView, but problem is the some.</p>\n\n<p>Can you help me ?</p>\n\n<p>Edit:\nmain.qml file is:</p>\n\n<pre><code>import QtQuick 2.0\nimport QtQuick.Window 2.0\nimport QtLocation 5.6\nimport QtPositioning 5.6\n\nWindow {\n    width: 300\n    height: 300\n    visible: true\n\n    Plugin {\n        id: mapPlugin\n        name: \"esri\"\n    }\n\n    Map {\n        anchors.fill: parent\n        plugin: mapPlugin\n        center: QtPositioning.coordinate(39.2160, 9.1344)\n        zoomLevel: 16\n    }\n}\n</code></pre>\n"}, {"tags": ["python", "pandas", "dictionary", "tree"], "comments": [{"owner": {"reputation": 622, "user_id": 6679549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a794b7ee7d3bfd4bc99924eba7a60?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/6679549/david"}, "edited": false, "score": 0, "creation_date": 1547067515, "post_id": 54118187, "comment_id": 95068986, "body": "Your example code breaks here for me:       leaf = result"}, {"owner": {"reputation": 31, "user_id": 9310195, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ecf567ff754a285e50d701958f318c0b?s=128&d=identicon&r=PG&f=1", "display_name": "AmiB", "link": "https://stackoverflow.com/users/9310195/amib"}, "reply_to_user": {"reputation": 622, "user_id": 6679549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a794b7ee7d3bfd4bc99924eba7a60?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/6679549/david"}, "edited": false, "score": 0, "creation_date": 1547067887, "post_id": 54118187, "comment_id": 95069155, "body": "sorry @David its fixed, my mistake it should be leaf = mydict  not result"}, {"owner": {"reputation": 837, "user_id": 5107872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e125b4c3710fb30e0372c64daacd6268?s=128&d=identicon&r=PG&f=1", "display_name": "ahed87", "link": "https://stackoverflow.com/users/5107872/ahed87"}, "edited": false, "score": 0, "creation_date": 1547072389, "post_id": 54118187, "comment_id": 95071044, "body": "4 observations: a) what is the actual format of your original data? b) the output you ask for is a bit peculiar, to me it looks like you have a double key in the root, that won&#39;t work. c) have you looked into using a library for trees, there are plenty of them out there (networkX is one). d) why the structure of the output, i.e. what is the &quot;consumer&quot;? json to browser and js for charting?"}], "owner": {"reputation": 31, "user_id": 9310195, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ecf567ff754a285e50d701958f318c0b?s=128&d=identicon&r=PG&f=1", "display_name": "AmiB", "link": "https://stackoverflow.com/users/9310195/amib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 448, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547070339, "creation_date": 1547067181, "last_edit_date": 1547070339, "question_id": 54118187, "link": "https://stackoverflow.com/questions/54118187/python-nested-dictionary-to-tree-structure-dictionary-json", "title": "Python nested dictionary to tree structure dictionary (json)", "body": "<p>I am trying to structure my data from a df to nested dict and to a tree structure.\nI want to have keys and children for each node and I am trying to have it for three levels, 1, 1.1 and 1.1.1 to display in one Flask app.</p>\n\n<p>(I already did some research and tried to use defaultdict from collections, I am trying this approach once its what took me almost there. If theres a better approach I will be happy to accept it. thanks in advance for your help)</p>\n\n<pre><code>df =pd.DataFrame({\n'Country': ['Germany', 'Germany', 'Canada', 'Canada'], \n'PopulationEst': [8, 4, 35, 50], \n'Continent': ['Europe', 'Europe', 'North America', 'North America']},\ncolumns=['Continent','Country','PopulationEst'])\n</code></pre>\n\n<p>then I generate my nested dict:</p>\n\n<pre><code>mydict = {}\nfor lst in df.values:\n    leaf = mydict \n    for path in lst[:-2]:\n       leaf = leaf.setdefault(path, {})\n    leaf.setdefault(lst[-2], list()).append(lst[-1])  \n\nmydict= {'Europe': {'Germany': [8L, 4L]}, 'North America': {'Canada': [35L, 50L]}}\n</code></pre>\n\n<p>I am trying to achieve the following output:</p>\n\n<pre><code>{'key':'Europe', \"children\":[\n      {'key': 'Germany', \"children\":[8L, 4L]}\n             ]},\n'key':'North America', \"children\":[\n      {'key': 'Canada', \"children\": [35L, 50L]}}}\n</code></pre>\n\n<p>Using dict comprehension:</p>\n\n<pre><code>final_dict = {outer_k: {inner_k: {'key':inner_k, 'value':inner_v} for inner_k, inner_v in outer_v.items()} for outer_k, outer_v in mydict.items()}\n</code></pre>\n\n<p>I am getting the following output:</p>\n\n<pre><code>Out[2]: \n{'Europe': {'Germany': {'key': 'Germany', 'value': [8L, 4L]}},\n'North America': {'Canada': {'key': 'Canada', 'value': [35L, 50L]}}}\n</code></pre>\n"}, {"tags": ["python", "sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 6911, "user_id": 6560549, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8OQgD.jpg?s=128&g=1", "display_name": "SuperShoot", "link": "https://stackoverflow.com/users/6560549/supershoot"}, "is_accepted": true, "score": 6, "last_activity_date": 1547074777, "creation_date": 1547074777, "answer_id": 54119660, "question_id": 54118182, "link": "https://stackoverflow.com/questions/54118182/sqlalchemy-not-creating-tables/54119660#54119660", "title": "SQLAlchemy not creating tables", "body": "<p>The <code>Base</code> in <code>database.py</code> isn't the same <code>Base</code> that is imported into <code>models.py</code>.</p>\n\n<p>A simple test is to put a <code>print('creating Base')</code> function call just above the <code>Base = declarative_base()</code> statement, and you'll see it is being created twice.</p>\n\n<p>Python calls the module that is being executed <code>'__main__'</code>, which you know as you have the <code>if __name__ == '__main__'</code> conditional at the bottom of your module. So the first <code>Base</code> that is created is <code>__main__.Base</code>. Then, in <code>models.py</code>, <code>from database import Base</code> causes the <code>database</code> module to be parsed again, creating <code>database.Base</code> in the namespace, and that is the <code>Base</code> from which <code>User</code> inherits. Then back in <code>database.py</code>, the <code>Base.metadata.create_all(bind=engine)</code> call is using the metadata from <code>__main__.Base</code> which has no tables in it, and as such creates nothing.</p>\n\n<p>Don't execute out of the module that creates the <code>Base</code> instance. Create another module called <code>main.py</code> (or whatever), and move your <code>init_db()</code> function there and import <code>Base</code>, <code>db_session</code> and <code>engine</code> from <code>database.py</code> into <code>main.py</code>. That way, you are always using the same <code>Base</code> instance. This is example of <code>main.py</code>:</p>\n\n<pre><code>from database import Base, db_session, engine\nfrom models import User\n\n\ndef init_db():\n\n    Base.metadata.create_all(bind=engine)\n\n    db_session.add(\n        User(username=\"testuser\", password_hash=b\"\", password_salt=b\"\", balance=1)\n    )\n    db_session.commit()\n\n    print(\"Initialized the db\")\n\n\nif __name__ == \"__main__\":\n    init_db()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 3480418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55388518f37b5e31115de21c3743187a?s=128&d=identicon&r=PG&f=1", "display_name": "Upendra", "link": "https://stackoverflow.com/users/3480418/upendra"}, "is_accepted": false, "score": 1, "last_activity_date": 1564488216, "creation_date": 1564488216, "answer_id": 57271213, "question_id": 54118182, "link": "https://stackoverflow.com/questions/54118182/sqlalchemy-not-creating-tables/57271213#57271213", "title": "SQLAlchemy not creating tables", "body": "<ul>\n<li>Declare Base class once(for each database) &amp; import it to all modules which define table classes (inherited from Base)</li>\n<li>For Base (a metaclass) to scan &amp; find out all classes which are inherited from it, we need to import all the modules where such table classes (inherited from Base) are defined to module where we call Metadata.create_all(engine).</li>\n</ul>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7973034"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3715, "favorite_count": 2, "accepted_answer_id": 54119660, "answer_count": 2, "score": 3, "last_activity_date": 1564488216, "creation_date": 1547067148, "last_edit_date": 1547067820, "question_id": 54118182, "link": "https://stackoverflow.com/questions/54118182/sqlalchemy-not-creating-tables", "title": "SQLAlchemy not creating tables", "body": "<p>I am trying to setup a database just like in a tutorial but I am getting a programming error that a table doesn't exist when I'm trying to add a <code>User</code></p>\n\n<p>This is the file that errors (<code>database.py</code>):</p>\n\n<pre><code>from sqlalchemy import create_engine, MetaData\nfrom sqlalchemy.orm import scoped_session, sessionmaker\nfrom sqlalchemy.ext.declarative import declarative_base\n\n\nengine = create_engine(\n    \"mysql+pymysql://testuser:testpassword@localhost/test?charset=utf8\",\n    connect_args = {\n        \"port\": 3306\n    },\n    echo=\"debug\",\n    echo_pool=True\n)\n\ndb_session = scoped_session(\n    sessionmaker(\n        bind=engine,\n        autocommit=False,\n        autoflush=False\n    )\n)\n\nBase = declarative_base()\n\ndef init_db():\n    import models\n    Base.metadata.create_all(bind=engine)\n\n    from models import User\n    db_session.add(\n        User(username=\"testuser\", password_hash=b\"\", password_salt=b\"\", balance=1)\n    )\n    db_session.commit()\n\n    print(\"Initialized the db\")\n\n\nif __name__ == \"__main__\":\n    init_db()\n</code></pre>\n\n<p>To init the database (create the tables) I just run the file.\nIt errors when it creates the test user.</p>\n\n<p>Here is <code>models.py</code>:</p>\n\n<pre><code>from sqlalchemy import Column, Integer, Numeric, Binary, String\nfrom sqlalchemy.orm import relationship\n\nfrom database import Base\n\n\nclass User(Base):\n    __tablename__ = \"users\"\n\n    id = Column(Integer, primary_key=True)\n\n    username = Column(String(16), unique=True)\n    password_hash = Column(Binary(32))\n    password_salt = Column(Binary(32))\n\n    balance = Column(Numeric(precision=65, scale=8))\n\n    def __repr__(self):\n        return \"&lt;User(balance={})&gt;\".format(balance)\n</code></pre>\n\n<p>I tried:</p>\n\n<ul>\n<li>Committing before adding users (after <code>create_all</code>)</li>\n<li>Drop existing tables from the database (although it seems like the table never gets committed)</li>\n<li><code>from models import User</code> instead of <code>import models</code> (before <code>create_all</code>)</li>\n</ul>\n\n<p>Sorry if there are so many simillar questions, I promise I scavenged for answers, but it's always silly mistakes I made sure I didn't make (or atleast the ones I saw).</p>\n\n<p>I am using MariaDB.</p>\n\n<p>Sorry for long post, many thanks in advance.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 3, "creation_date": 1547067453, "post_id": 54118181, "comment_id": 95068964, "body": "Doesn&#39;t <code>x[...] = [1, 5]</code> do what you want?"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 3, "creation_date": 1547067454, "post_id": 54118181, "comment_id": 95068965, "body": "Is the very large array still a 2-d array, and you want to fill each row with the same 1-d array?  If so, you can do, for example, <code>x[:] = [2, 6]</code>.  That will copy <code>[2, 6]</code> to each row."}], "answers": [{"tags": [], "owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "is_accepted": true, "score": 5, "last_activity_date": 1547070241, "last_edit_date": 1547070241, "creation_date": 1547069034, "answer_id": 54118591, "question_id": 54118181, "link": "https://stackoverflow.com/questions/54118181/is-there-an-np-repeat-which-acts-on-an-existing-array/54118591#54118591", "title": "Is there an `np.repeat` which acts on an existing array?", "body": "<p>As we noted in comments, you can use a broadcasting assignment to fill your 2d array with a 1d array-like of the appropriate size:</p>\n\n<pre><code>x[...] = [1, 5]\n</code></pre>\n\n<p>If by any chance your large array always contains the same items in each row (i.e. you won't change these preset values later), you can almost certainly use broadcasting in later parts of your code and just work with an initial <code>x</code> such as</p>\n\n<pre><code>x = np.array([[1, 5]])\n</code></pre>\n\n<p>This array has shape <code>(1, 2)</code> which is broadcast-compatible with other arrays of shape <code>(4, 2)</code> you might have in the above example.</p>\n\n<p>If you always need the same values in each row <em>and</em> for some reason you can't use broadcasting (both cases are highly unlikely), you can use <code>broadcast_to</code> to create an array with an explicit 2d shape without copying memory:</p>\n\n<pre><code>x_bc = np.broadcast_to([1, 5], (4, 2)) # broadcast 1d [1, 5] to shape (4, 2)\n</code></pre>\n\n<p>This might work because it has the right shape with only 2 unique elements in memory:</p>\n\n<pre><code>&gt;&gt;&gt; x_bc\narray([[1, 5],\n       [1, 5],\n       [1, 5],\n       [1, 5]])\n\n&gt;&gt;&gt; x_bc.strides\n(0, 8)\n</code></pre>\n\n<p>However you can't mutate it, because it's a read-only view:</p>\n\n<pre><code>&gt;&gt;&gt; x_bc[0, :] = [2, 4]\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-35-ae12ecfe3c5e&gt; in &lt;module&gt;\n----&gt; 1 x_bc[0, :] = [2, 4]\n\nValueError: assignment destination is read-only\n</code></pre>\n\n<p>So, if you only need the same values in each row <em>and</em> you can't use broadcasting <em>and</em> you want to mutate those same rows later, you can use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.lib.stride_tricks.as_strided.html\" rel=\"nofollow noreferrer\">stride tricks</a> to map the same 1d data to a 2d array:</p>\n\n<pre><code>&gt;&gt;&gt; x_in = np.array([1, 5])\n... x_strided = np.lib.stride_tricks.as_strided(x_in, shape=(4,) + x_in.shape,\n...                                             strides=(0,) + x_in.strides[-1:])\n\n&gt;&gt;&gt; x_strided\narray([[1, 5],\n       [1, 5],\n       [1, 5],\n       [1, 5]])\n\n&gt;&gt;&gt; x_strided[0, :] = [2, 4]\n\n&gt;&gt;&gt; x_strided\narray([[2, 4],\n       [2, 4],\n       [2, 4],\n       [2, 4]])\n</code></pre>\n\n<p>Which gives you a 2d array of fixed shape that always contains one unique row, and mutating any of the rows mutates the rest (since the underlying data corresponds to only a single row). Handle with care, because if you ever want to have two different rows you'll have to do something else.</p>\n"}], "owner": {"reputation": 18045, "user_id": 3320135, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a5b91a6e8e17f4a5da0c1aecb6135a91?s=128&d=identicon&r=PG&f=1", "display_name": "Karnivaurus", "link": "https://stackoverflow.com/users/3320135/karnivaurus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 54118591, "answer_count": 1, "score": 2, "last_activity_date": 1547070241, "creation_date": 1547067146, "question_id": 54118181, "link": "https://stackoverflow.com/questions/54118181/is-there-an-np-repeat-which-acts-on-an-existing-array", "title": "Is there an `np.repeat` which acts on an existing array?", "body": "<p>I have a large NumPy array which I want to fill with new data on each iteration of a loop. The array is filled with data repeated along axis 0, for example:</p>\n\n<pre><code>[[1, 5],\n [1, 5],\n [1, 5],\n [1, 5]]\n</code></pre>\n\n<p>I know how to create this array from scratch in each iteration:</p>\n\n<pre><code>x = np.repeat([[1, 5]], 4, axis=0)\n</code></pre>\n\n<p>However, I don't want to create a new array every time, because it's a very large array (much larger than 4x2). Instead, I want to create the array in advance using the above code, and then just fill the array with new data on each iteration.</p>\n\n<p>But <code>np.repeat()</code> returns a new array, rather than acting on an existing array. Is there an equivalent of <code>np.repeat()</code> for filling an existing array?</p>\n"}, {"tags": ["python", "bokeh"], "answers": [{"tags": [], "owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "is_accepted": true, "score": 2, "last_activity_date": 1574489712, "last_edit_date": 1574489712, "creation_date": 1547067459, "answer_id": 54118242, "question_id": 54118160, "link": "https://stackoverflow.com/questions/54118160/how-to-set-hover-color-for-glyphs-in-bokeh/54118242#54118242", "title": "How to set Hover color for glyphs in Bokeh?", "body": "<p>In the same way as selected/nonselected can be added at the low level, as described in the documentation:</p>\n\n<p><a href=\"https://docs.bokeh.org/en/latest/docs/user_guide/styling.html#selected-and-unselected-glyphs\" rel=\"nofollow noreferrer\">https://docs.bokeh.org/en/latest/docs/user_guide/styling.html#selected-and-unselected-glyphs</a></p>\n\n<pre><code>circle = Circle(x=\"x\", y=\"y\", size=10)\nhover_circle = Circle(x=\"x\", y=\"y\", size=10, fill_color=\"red\")\nc = p_glypg.add_glyph(source, circle, hover_glyph=hover_circle)\n</code></pre>\n"}], "owner": {"reputation": 731, "user_id": 4670408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d1c16454540ac9d57ae95a6aab0e650?s=128&d=identicon&r=PG&f=1", "display_name": "Vinay", "link": "https://stackoverflow.com/users/4670408/vinay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 712, "favorite_count": 0, "accepted_answer_id": 54118242, "answer_count": 1, "score": 0, "last_activity_date": 1574489712, "creation_date": 1547067026, "question_id": 54118160, "link": "https://stackoverflow.com/questions/54118160/how-to-set-hover-color-for-glyphs-in-bokeh", "title": "How to set Hover color for glyphs in Bokeh?", "body": "<p>There are two ways to add glyphs in Bokeh. I prefer the second way as it gives more flexibility with Hovers and legends. I cannot find the option to set hover color in the second method. Is there a way to do that?</p>\n\n<pre><code>from bokeh.layouts import gridplot\nfrom bokeh.models import ColumnDataSource, CDSView, IndexFilter\nfrom bokeh.plotting import figure, show\nfrom bokeh.io import curdoc, output_notebook, output_file, export_png    \nfrom bokeh.models import (\n  ColumnDataSource, Circle, HoverTool,Grid, TapTool,PanTool, WheelZoomTool, BoxSelectTool,ZoomInTool, ZoomOutTool, CDSView, GroupFilter)\n\ncurdoc().clear()\noutput_notebook()\n\nsource = ColumnDataSource(data=dict(x=[1, 2, 3, 4, 5], y=[1, 2, 3, 4, 5]))\nview = CDSView(source=source, filters=[IndexFilter([0, 2, 4])])\n\n#---------------------Method1-----------------------------\ntools = [\"box_select\", \"hover\", \"reset\"]\np = figure(plot_height=300, plot_width=300, tools=tools)\np.circle(x=\"x\", y=\"y\", size=10, hover_color=\"red\", source=source)\n\n#---------------------Method2-----------------------------\np_glypg = figure(plot_height=300, plot_width=300, tools=\"pan,wheel_zoom,box_zoom,reset,zoom_in,zoom_out,save\")\ncircle = Circle(x=\"x\", y=\"y\", size=10)\nc = p_glypg.add_glyph(source, circle)\nc_hover = HoverTool(renderers=[c], tooltips=[('x', '@x')])\np_glypg.add_tools(c_hover) \n\nshow(gridplot([[p,p_glypg]]))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/JB3kZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JB3kZ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "html", "web-scraping", "beautifulsoup", "html-parsing"], "comments": [{"owner": {"reputation": 6567, "user_id": 10825556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UWgVm.png?s=128&g=1", "display_name": "Bitto Bennichan", "link": "https://stackoverflow.com/users/10825556/bitto-bennichan"}, "edited": false, "score": 0, "creation_date": 1547067129, "post_id": 54118124, "comment_id": 95068838, "body": "can you also paste the html you are working on and the expected results. The ones you give have no relation to your sample code"}, {"owner": {"reputation": 165, "user_id": 6301348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99190d6e797169e02540f40e05da721?s=128&d=identicon&r=PG&f=1", "display_name": "Goosal Tapal", "link": "https://stackoverflow.com/users/6301348/goosal-tapal"}, "reply_to_user": {"reputation": 6567, "user_id": 10825556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UWgVm.png?s=128&g=1", "display_name": "Bitto Bennichan", "link": "https://stackoverflow.com/users/10825556/bitto-bennichan"}, "edited": false, "score": 0, "creation_date": 1547068500, "post_id": 54118124, "comment_id": 95069438, "body": "@BittoBennichan Updated my question."}], "answers": [{"tags": [], "owner": {"reputation": 17276, "user_id": 7752296, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7033ea69df1e9dddbee828dc92ac967a?s=128&d=identicon&r=PG&f=1", "display_name": "chitown88", "link": "https://stackoverflow.com/users/7752296/chitown88"}, "is_accepted": false, "score": 0, "last_activity_date": 1547116868, "creation_date": 1547116868, "answer_id": 54126882, "question_id": 54118124, "link": "https://stackoverflow.com/questions/54118124/getting-the-text-value-from-cells-of-a-table-when-scraping-recursive-structure/54126882#54126882", "title": "Getting the text value from cells of a table when scraping recursive structure", "body": "<p>Here's an example of using <code>.findChildren</code>. It's not the full solution, but you can possibly use this to add on to @Bitto Bennichan solution</p>\n\n<pre><code>import bs4\n\nhtml = '''&lt;tr&gt;&lt;th scope=\"row\" style=\"padding-right:0.5em;\"&gt;Founders&lt;/th&gt;&lt;td \nclass=\"agent\" style=\"line-height:1.35em;\"&gt;&lt;a \nhref=\"/wiki/Marcus_Goldman\" title=\"Marcus Goldman\"&gt;Marcus Goldman&lt;/a&gt; . \n&lt;br /&gt;&lt;a href=\"/wiki/Samuel_Sachs\" title=\"Samuel Sachs\"&gt;Samuel \nSachs&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;'''\n\nsoup = bs4.BeautifulSoup(html,'html.parser')\n\nrows = soup.find_all('tr')\n\nfounders = []\nfor row in rows:\n    children = row.findChildren(\"a\" , recursive=True, text=True)\n    for child in children:\n        child_text = child.text.split('\\n')\n        child_text = [ x.strip() for x in child_text ]\n        child_text = ' '.join(child_text)\n        founders.append(child_text)\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 6301348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c99190d6e797169e02540f40e05da721?s=128&d=identicon&r=PG&f=1", "display_name": "Goosal Tapal", "link": "https://stackoverflow.com/users/6301348/goosal-tapal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547116868, "creation_date": 1547066895, "last_edit_date": 1547068489, "question_id": 54118124, "link": "https://stackoverflow.com/questions/54118124/getting-the-text-value-from-cells-of-a-table-when-scraping-recursive-structure", "title": "Getting the text value from cells of a table when scraping recursive structure", "body": "<p>I'm looking for a function that given a pair os HTML tags, returns the text inside them. Ideally I would like it to be recursive:</p>\n\n<p>Examples:</p>\n\n<p>Given</p>\n\n<pre><code>&lt;a href=\"/wiki/Asset_management\" title=\"It's Asset management\"&gt;Asset management&lt;/a&gt;\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>Asset management\n</code></pre>\n\n<p>Given</p>\n\n<pre><code>&lt;a href=\"/wiki/Asset_management\" title=\"Same Asset management\"&gt;&lt;p&gt;Recursive Asset management&lt;/p&gt;&lt;/a&gt;\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>Recursive Asset management\n</code></pre>\n\n<p>Given</p>\n\n<pre><code>&lt;p&gt;&lt;a href=\"/wiki/Asset_management\" title=\"Same Asset management\"&gt;Again Asset management&lt;/a&gt;&lt;/p&gt;\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>Again Asset management\n</code></pre>\nHere is the code I have:\n\n<pre><code>    list_of_table_rows = tbl.findAll('tr')\n\n    for tr in list_of_table_rows[1:]:\n\n        th_list = tr.find(\"th\")\n        td_list = tr.find(\"td\")\n\n        if th_list is None or td_list is None:\n            continue\n\n\n\n        th_str = th.text\n        td_str = td.contents\n\n        # NOW THE PROBLEM IS td_str IS A LIST OF A BUNCH OF THINGS.\n\n        #PLAIN TEXT, BR TAG, LINKS, PARAGRAPHS, ETC.\n\n        #I WANT TO BE ABLE TO GET THAT PLAIN TEXT FOR LINKS AND PARAGRAPHS\n\n\n        for element in td_str:\n           if element == \"&lt;br/\":\n              continue\n           # here...\n</code></pre>\n\n<p>The input should be a String, not a Tag or any other object. My trouble is the recursion.</p>\n\n<hr>\n\n<p><strong>UPDATE:</strong> This is an example of the data I am actually working with. The goal is to pull information from Wikipedia Infoboxes. The problem is some of the information in the Infobox are links or paragraphs. For example, in this page: <a href=\"https://en.wikipedia.org/wiki/Goldman_Sachs\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Goldman_Sachs</a></p>\n\n<pre><code>&lt;tr&gt;&lt;th scope=\"row\" style=\"padding-right:0.5em;\"&gt;Founders&lt;/th&gt;&lt;td \nclass=\"agent\" style=\"line-height:1.35em;\"&gt;&lt;a \nhref=\"/wiki/Marcus_Goldman\" title=\"Marcus Goldman\"&gt;Marcus Goldman&lt;/a&gt; . \n&lt;br /&gt;&lt;a href=\"/wiki/Samuel_Sachs\" title=\"Samuel Sachs\"&gt;Samuel \nSachs&lt;/a&gt;&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;\n</code></pre>\n\n<p>Let's say we want to find who the Founders are. I only want the text in the elements. In this case a list containing Marcus Goldman and Samuel Sachs. I have also tried <code>read_html</code> from Pandas, but that concatenates the strings together and I don't want that to happen (its output is \"Marcus GoldmanSamuel Sachs\")</p>\n"}, {"tags": ["python", "turtle-graphics"], "comments": [{"owner": {"reputation": 3047, "user_id": 10388629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/My8T3.png?s=128&g=1", "display_name": "Pika the Master of the Whales", "link": "https://stackoverflow.com/users/10388629/pika-the-master-of-the-whales"}, "edited": false, "score": 0, "creation_date": 1547066947, "post_id": 54118120, "comment_id": 95068757, "body": "What precisely doesn&#39;t work correctly?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1547067012, "post_id": 54118120, "comment_id": 95068793, "body": "Your code will throw a name error on <code>chose</code>. If that is a simple typo, it still won&#39;t do what you want because it doesn&#39;t reduce the sample in place. <code>choose =random.choice(choose)</code> will reduce it to a single value"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1547067038, "post_id": 54118120, "comment_id": 95068803, "body": "It looks like you&#39;re not doing anything with the one you select randomly.  Also, in <code>(up_right(), down_right)</code>, you&#39;re calling <code>up_right</code>, which will execute that function immediately, without waiting for the random selection."}], "answers": [{"tags": [], "owner": {"reputation": 1167, "user_id": 9462009, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Endyd", "link": "https://stackoverflow.com/users/9462009/endyd"}, "is_accepted": false, "score": 2, "last_activity_date": 1547067370, "creation_date": 1547067370, "answer_id": 54118226, "question_id": 54118120, "link": "https://stackoverflow.com/questions/54118120/randomly-chose-an-action-definition-with-random-choice/54118226#54118226", "title": "Randomly chose an action (definition) with random.choice()", "body": "<p>Besides the typo of <code>choose</code>... My suggestion is that after you create a tuple of functions and choose the function using <code>random.choice()</code>, you should make a call to the function chosen by the <code>random.choice()</code>. </p>\n\n<pre><code># Notice I removed the () after up_right so it doesn't make the function call on this line\nchoose = (up_right, down_right) \n# random.choice will return one of the two, and then the () will call whatever function was chosen\nrandom.choice(choose)() \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1547087476, "creation_date": 1547087476, "answer_id": 54121195, "question_id": 54118120, "link": "https://stackoverflow.com/questions/54118120/randomly-chose-an-action-definition-with-random-choice/54121195#54121195", "title": "Randomly chose an action (definition) with random.choice()", "body": "<p>I see three issues with your code.  The first two folks have pointed out already, the <code>choose</code> vs <code>chose</code> typo and leaving the parens () on <code>upright</code> when refering to it as a function <code>(up_right(), down_right)</code>.</p>\n\n<p>The third is that <code>up_right</code> and <code>down_right</code> both implement the same motion, so even if the rest of your code worked, you wouldn't see any difference!  Below's a rewrite that fixes this issue:</p>\n\n<pre><code>from turtle import Screen, Turtle\nfrom random import choice\n\ndef up_right(turtle):\n    turtle.setheading(90)\n    turtle.forward(100)\n\ndef down_right(turtle):\n    turtle.setheading(270)\n    turtle.forward(100)\n\nchoices = [up_right, down_right]\n\nscreen = Screen()\n\nme = Turtle('turtle')\n\nchoice(choices)(me)\n\nscreen.mainloop()\n</code></pre>\n\n<p>Run it several times and you'll see sometimes the turtle heads up the screen, sometimes it heads down.</p>\n"}], "owner": {"reputation": 1, "user_id": 10891953, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X7kIM3D_fp8/AAAAAAAAAAI/AAAAAAAAAH8/FR_JcASeppE/photo.jpg?sz=128", "display_name": "KINGMORRIS321", "link": "https://stackoverflow.com/users/10891953/kingmorris321"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1547087831, "creation_date": 1547066884, "last_edit_date": 1547087831, "question_id": 54118120, "link": "https://stackoverflow.com/questions/54118120/randomly-chose-an-action-definition-with-random-choice", "title": "Randomly chose an action (definition) with random.choice()", "body": "<p>Code doesn't work like it should.  It is just a small thing i would like to learn as a new coder:</p>\n\n<pre><code>import turtle\nimport random\nme=turtle.Turtle()\ndef up_right(): \n   me.right(90)\n   me.forward(100)\n\ndef down_right():\nme.right(90)\nme.forward(100)\nchoose = (up_right(), down_right)\nrandom.choice(chose)\n</code></pre>\n\n<p>It should pick one and do it but it picks them both.\nI've tried <code>random.sample</code> and <code>random.choice</code> but cant get them to work.</p>\n"}, {"tags": ["python", "tensorflow", "neural-network", "gpu", "amd-rocm"], "comments": [{"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1547105519, "post_id": 54118102, "comment_id": 95078986, "body": "A BUG message in the kernel involving the GPU driver is always a bug, you should report it."}, {"owner": {"reputation": 3570, "user_id": 1050382, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd59c025c68ece3e784402a0853ec49c?s=128&d=identicon&r=PG&f=1", "display_name": "Matmarbon", "link": "https://stackoverflow.com/users/1050382/matmarbon"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1547110429, "post_id": 54118102, "comment_id": 95081230, "body": "@MatiasValdenegro I think you are probably right. The problem could still be my hardware though."}], "owner": {"reputation": 3570, "user_id": 1050382, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/fd59c025c68ece3e784402a0853ec49c?s=128&d=identicon&r=PG&f=1", "display_name": "Matmarbon", "link": "https://stackoverflow.com/users/1050382/matmarbon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1557300530, "creation_date": 1547066820, "question_id": 54118102, "link": "https://stackoverflow.com/questions/54118102/bug-in-tensorflow-gpu-or-code-unable-to-handle-kernel-paging-request", "title": "Bug in TensorFlow, GPU, or Code? &#39;unable to handle kernel paging request&#39;", "body": "<h1>What I do</h1>\n\n<p>Executing basically this TF graph (via <code>sess.run(self.minimizer, feed_dict=...)</code>):</p>\n\n<pre><code>#\n# Create the dataset and iterator\n#\ntrain_data_shape = (\n    (None, data.get_feature_amount()),\n    (None, data.get_target_amount()),\n)\ntrain_data = tf.data.Dataset.from_generator(\n    data.generate_train_data,\n    output_types=(config.get_dtype(), config.get_dtype()),\n    output_shapes=train_data_shape,\n)\ntrain_data = train_data.repeat()\ntrain_data = train_data.prefetch(1)\ntrain_data = train_data.apply(tf.data.experimental.unbatch())\ntrain_data = train_data.shuffle(self.config.get_batch_size())\ntrain_data = train_data.batch(self.config.get_batch_size(), drop_remainder=False)\ntest_data_shape = (\n    (data.get_test_data_amount(), data.get_feature_amount()),\n    (data.get_test_data_amount(), data.get_target_amount()),\n)\ntest_data = tf.data.Dataset.from_generator(\n    data.generate_test_data,\n    output_types=(config.get_dtype(), config.get_dtype()),\n    output_shapes=test_data_shape,\n)\ntest_data = test_data.repeat()\nself.train_iterator = train_data.make_initializable_iterator()\nself.test_iterator = test_data.make_initializable_iterator()\nself.iterator_handle = tf.placeholder(tf.string, shape=[])\ndata_iterator = tf.data.Iterator.from_string_handle(self.iterator_handle, train_data.output_types, train_data.output_shapes)\n\n#\n# Create the structure of the DNN (hidden layers and stuff)\n#\nprevious_layer_size = data.get_feature_amount()\ntarget_amount = data.get_target_amount()\n(self.features, self.targets) = data_iterator.get_next(name=\"layer_in\")\nx = tf.cast(tf.transpose(self.features), config.get_dtype())\nx_is_sparse = True\ny = self.targets\nself.layers = [(None, None, self.features)]\nfor i, l in enumerate(config.get_hidden_layer_structure()):\n    w = tf.Variable(\n        tf.random_normal((previous_layer_size, l), 0, 0.05, dtype=config.get_dtype(), seed=config.get_seed()),\n        name=\"weights_\" + str(i))\n    b = tf.Variable(tf.random_normal((l, 1), 0, 0.05, dtype=config.get_dtype(), seed=config.get_seed()),\n                    name=\"bias_\" + str(i))\n    sum_w = tf.matmul(w, x, True, b_is_sparse=x_is_sparse)\n    x_is_sparse = False\n    x = tf.nn.relu(tf.add(sum_w, b), \"layer_\" + str(i))\n    self.layers.append((w, b, x))\n    previous_layer_size = l\nw = tf.Variable(\n    tf.random_normal((previous_layer_size, target_amount), 0, 0.05, dtype=config.get_dtype(), seed=config.get_seed()),\n    name=\"weights_end\")\nb = tf.Variable(tf.random_normal((target_amount, 1), 0, 0.05, dtype=config.get_dtype(), seed=config.get_seed()),\n                name=\"bias_end\")\nlogit = tf.add(tf.matmul(w, x, True), b, \"logit\")\npredictions = tf.transpose(tf.concat((tf.nn.sigmoid(logit[:1, :]), logit[1:, :]), axis=0), name=\"predictions\")\nself.layers.append((w, b, predictions))\n\n#\n# Create the evaluation of the DNN (loss/error and stuff)\n#\nerror = tf.subtract(predictions, y, \"error\")\nself.mae = tf.reduce_mean(tf.abs(error), axis=0, name=\"MAE\")\n\n#\n# Create the optimization of the DNN (gradient and stuff)\n#\nregularization = tf.constant(0, dtype=config.get_dtype())\nfor w, _, _ in self.layers:\n    if w is not None:\n        regularization += tf.nn.l2_loss(w)\nregularization *= config.get_lambda()\nloss = tf.losses.sigmoid_cross_entropy(y[:, 0], logit[0, :]) * 500 + tf.reduce_sum(self.mae[1:]) + regularization\n\n# grads_and_vars is a list of tuples (gradient, variable)\nparameters = [w for w, _, _ in self.layers if w is not None] + [b for _, b, _ in self.layers if b is not None]\ngrads_and_vars = config.get_optimizer().compute_gradients(loss, var_list=parameters)\ncapped_grads_and_vars = [(tf.clip_by_value(gv[0], -5., 5.), gv[1]) for gv in grads_and_vars]\n# apply the capped gradients.\nself.minimizer = config.get_optimizer().apply_gradients(capped_grads_and_vars)\n</code></pre>\n\n<h1>What happens</h1>\n\n<p>Sometimes (about 1 in 200000 calls) the <code>sess.run</code> does not return \u2013 it's stuck \u2013 like... frozen. My python program then of course does not exit on its own. And the strangest thing is: It suddenly takes a freaking lot of RAM (like 10 GB) that I can by no means release again, unless I restart my computer.</p>\n\n<p>Take a look at this, which is rediculous:</p>\n\n<pre class=\"lang-none prettyprint-override\">\n# ps --sort -%mem aux\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nme       13671 37.1 11.2 19321984 2764652 pts/2 Sl+ 13:02 186:10 python3 ./main.py -sp 32ki auto\nme        7204  5.1  4.0 6869916 1005076 ?     Sl   12:07  28:36 /snap/pycharm-professional/109/jre64/bin/java -classp\n[...]\n\n# free\n              total        used        free      shared  buff/cache   available\nMem:       24636156    16067024     6846816      313488     1722316     7896620\nSwap:       8368124      442624     7925500\n\n# kill -15 13671\n\n# ps --sort -%mem aux\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nme        7204  5.1  4.0 6869916 1005076 ?     Sl   12:07  28:39 /snap/pycharm-professional/109/jre64/bin/java -classpath /snap/pycharm-professional/109/lib/bootstrap.jar:/snap/pycharm-professional/109/lib/extensions.jar:/snap/pycharm-pro\n[...]\n\n# free\n              total        used        free      shared  buff/cache   available\nMem:       24636156    16034456     6849972      336212     1751728     7906252\nSwap:       8368124      437760     7930364\n</pre>\n\n<p>The <code>/var/log/syslog</code> sais about this time frame:</p>\n\n<pre>\nJan  9 15:05:38 MPC-6 kernel: [10906.994646] BUG: unable to handle kernel paging request at ffffdd4803208b60\nJan  9 15:05:38 MPC-6 kernel: [10906.994656] IP: kfree+0x53/0x180\nJan  9 15:05:38 MPC-6 kernel: [10906.994657] PGD 0 P4D 0 \nJan  9 15:05:38 MPC-6 kernel: [10906.994661] Oops: 0000 [#1] SMP NOPTI\nJan  9 15:05:38 MPC-6 kernel: [10906.994663] Modules linked in: ipt_MASQUERADE nf_nat_masquerade_ipv4 nf_conntrack_netlink nfnetlink xfrm_user xfrm_algo iptable_nat nf_conntrack_ipv4 nf_defrag_ipv4 nf_nat_ipv4 xt_addrtype xt_conntrack nf_nat nf_conntrack libcrc32c br_netfilter bridge stp llc aufs ip6table_filter ip6_tables iptable_filter pci_stub vboxpci(OE) vboxnetadp(OE) vboxnetflt(OE) vboxdrv(OE) cmac rfcomm bnep binfmt_misc edac_mce_amd kvm_amd kvm irqbypass btusb btrtl crct10dif_pclmul snd_usb_audio btbcm crc32_pclmul btintel ghash_clmulni_intel snd_usbmidi_lib pcbc snd_seq_midi bluetooth snd_seq_midi_event snd_hda_codec_realtek snd_hda_codec_generic snd_hda_codec_hdmi joydev aesni_intel aes_x86_64 input_leds crypto_simd snd_hda_intel glue_helper cryptd ecdh_generic snd_rawmidi snd_hda_codec snd_hda_core snd_seq snd_hwdep snd_pcm\nJan  9 15:05:38 MPC-6 kernel: [10906.994697]  snd_seq_device k10temp fam15h_power snd_timer shpchp snd soundcore mac_hid sch_fq_codel cuse lm92 nct6775 hwmon_vid parport_pc ppdev lp parport ip_tables x_tables autofs4 uas usb_storage amdgpu(OE) amdchash(OE) amdttm(OE) amd_sched(OE) hid_generic mxm_wmi amdkcl(OE) i2c_algo_bit amd_iommu_v2 drm_kms_helper pata_acpi syscopyarea sysfillrect r8169 sysimgblt fb_sys_fops mii usbhid nvme i2c_piix4 drm hid ahci pata_atiixp libahci nvme_core wmi\nJan  9 15:05:38 MPC-6 kernel: [10906.994721] CPU: 7 PID: 23629 Comm: kworker/u16:2 Tainted: G           OE    4.15.0-43-generic #46-Ubuntu\nJan  9 15:05:38 MPC-6 kernel: [10906.994723] Hardware name: To Be Filled By O.E.M. To Be Filled By O.E.M./970A-G/3.1, BIOS P1.20 01/12/2016\nJan  9 15:05:38 MPC-6 kernel: [10906.994812] Workqueue: kfd_restore_wq restore_process_worker [amdgpu]\nJan  9 15:05:38 MPC-6 kernel: [10906.994815] RIP: 0010:kfree+0x53/0x180\nJan  9 15:05:38 MPC-6 kernel: [10906.994816] RSP: 0018:ffffb837083c3a70 EFLAGS: 00010282\nJan  9 15:05:38 MPC-6 kernel: [10906.994818] RAX: ffff89dbe11420d0 RBX: ffffb8370822d000 RCX: 0000000000008600\nJan  9 15:05:38 MPC-6 kernel: [10906.994819] RDX: 00000000ffffffe4 RSI: ffff89dc56a78fd0 RDI: 0000762940000000\nJan  9 15:05:38 MPC-6 kernel: [10906.994821] RBP: ffffb837083c3a88 R08: 000000000000ec00 R09: ffff89d928a2ec70\nJan  9 15:05:38 MPC-6 kernel: [10906.994822] R10: ffffdd4803208b40 R11: 0000000000000d00 R12: ffffb8370822cf60\nJan  9 15:05:38 MPC-6 kernel: [10906.994823] R13: ffffffffc03cece4 R14: 0000000000000083 R15: 0000000000000200\nJan  9 15:05:38 MPC-6 kernel: [10906.994825] FS:  0000000000000000(0000) GS:ffff89dc7edc0000(0000) knlGS:0000000000000000\nJan  9 15:05:38 MPC-6 kernel: [10906.994826] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033\nJan  9 15:05:38 MPC-6 kernel: [10906.994828] CR2: ffffdd4803208b60 CR3: 00000004ec276000 CR4: 00000000000406e0\nJan  9 15:05:38 MPC-6 kernel: [10906.994829] Call Trace:\nJan  9 15:05:38 MPC-6 kernel: [10906.994875]  amdgpu_vram_mgr_new+0x314/0x370 [amdgpu]\nJan  9 15:05:38 MPC-6 kernel: [10906.994882]  amdttm_bo_mem_space+0x2ea/0x470 [amdttm]\nJan  9 15:05:38 MPC-6 kernel: [10906.994887]  amdttm_bo_validate+0xbf/0x140 [amdttm]\nJan  9 15:05:38 MPC-6 kernel: [10906.994931]  ? amdgpu_vm_bo_update+0x3fc/0x7e0 [amdgpu]\nJan  9 15:05:38 MPC-6 kernel: [10906.994982]  amdgpu_amdkfd_bo_validate+0x82/0x160 [amdgpu]\nJan  9 15:05:38 MPC-6 kernel: [10906.995034]  amdgpu_amdkfd_gpuvm_restore_process_bos+0x273/0x4c0 [amdgpu]\nJan  9 15:05:38 MPC-6 kernel: [10906.995038]  ? irq_work_queue+0x99/0xa0\nJan  9 15:05:38 MPC-6 kernel: [10906.995040]  ? console_unlock+0x2e5/0x4e0\nJan  9 15:05:38 MPC-6 kernel: [10906.995090]  restore_process_worker+0x52/0x1f0 [amdgpu]\nJan  9 15:05:38 MPC-6 kernel: [10906.995092]  process_one_work+0x1de/0x410\nJan  9 15:05:38 MPC-6 kernel: [10906.995094]  worker_thread+0x32/0x410\nJan  9 15:05:38 MPC-6 kernel: [10906.995097]  kthread+0x121/0x140\nJan  9 15:05:38 MPC-6 kernel: [10906.995098]  ? process_one_work+0x410/0x410\nJan  9 15:05:38 MPC-6 kernel: [10906.995100]  ? kthread_create_worker_on_cpu+0x70/0x70\nJan  9 15:05:38 MPC-6 kernel: [10906.995103]  ? do_syscall_64+0x73/0x130\nJan  9 15:05:38 MPC-6 kernel: [10906.995105]  ? SyS_exit+0x17/0x20\nJan  9 15:05:38 MPC-6 kernel: [10906.995108]  ret_from_fork+0x22/0x40\nJan  9 15:05:38 MPC-6 kernel: [10906.995109] Code: 00 80 49 01 da 0f 82 39 01 00 00 48 c7 c7 00 00 00 80 48 2b 3d 37 46 20 01 49 01 fa 49 c1 ea 0c 49 c1 e2 06 4c 03 15 15 46 20 01  8b 42 20 48 8d 50 ff a8 01 4c 0f 45 d2 49 8b 52 20 48 8d 42 \nJan  9 15:05:38 MPC-6 kernel: [10906.995133] RIP: kfree+0x53/0x180 RSP: ffffb837083c3a70\nJan  9 15:05:38 MPC-6 kernel: [10906.995134] CR2: ffffdd4803208b60\nJan  9 15:05:38 MPC-6 kernel: [10906.995136] ---[ end trace 49a520b043b99039 ]---\n</pre>\n\n<h1>My specs</h1>\n\n<ul>\n<li>OS is <em>linux</em></li>\n<li>GPU is <em>AMD Radeon RX Vega 64</em></li>\n<li>CPU is <em>AMD FX-8320</em></li>\n<li>RAM is <em>2 times 4GB and 2 times 8GB of 1333 DDR-3</em></li>\n<li>Mainboard is <em>ASRock 970A-G 3.1</em></li>\n<li>Tensorflow is the one I get, when installing via <code>pip3 install tensorflow-rocm</code> (version 1.12.0)</li>\n</ul>\n\n<hr>\n\n<p>I don't want to report a bug at <a href=\"https://github.com/ROCmSoftwarePlatform/tensorflow-upstream/issues/\" rel=\"nofollow noreferrer\">GitHub</a> before I'm 100% certain that this is a bug of TF and not me doing something wrong.</p>\n"}, {"tags": ["python", "type-hinting", "mypy", "higher-kinded-types", "python-typing"], "answers": [{"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 2, "last_activity_date": 1547078325, "creation_date": 1547078325, "answer_id": 54120196, "question_id": 54118095, "link": "https://stackoverflow.com/questions/54118095/how-to-use-generic-higher-kinded-type-variables-in-pythons-type-hinting-syste/54120196#54120196", "title": "How to use Generic (higher-kinded) type variables in python&#39;s type hinting system?", "body": "<p>Currently, as of writing, the <code>mypy</code> project does not support higher-kinded types. See the following github issue:</p>\n\n<p><a href=\"https://github.com/python/typing/issues/548\" rel=\"nofollow noreferrer\">https://github.com/python/typing/issues/548</a></p>\n"}, {"tags": [], "owner": {"reputation": 3201, "user_id": 5986907, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0521ce05a7fcb2580e4f513990a5a8c8?s=128&d=identicon&r=PG&f=1", "display_name": "joel", "link": "https://stackoverflow.com/users/5986907/joel"}, "is_accepted": false, "score": 1, "last_activity_date": 1605459356, "creation_date": 1605459356, "answer_id": 64847198, "question_id": 54118095, "link": "https://stackoverflow.com/questions/54118095/how-to-use-generic-higher-kinded-type-variables-in-pythons-type-hinting-syste/64847198#64847198", "title": "How to use Generic (higher-kinded) type variables in python&#39;s type hinting system?", "body": "<p>The <a href=\"https://returns.readthedocs.io/en/latest/pages/hkt.html\" rel=\"nofollow noreferrer\"><code>returns</code> package</a> <a href=\"https://sobolevn.me/2020/10/higher-kinded-types-in-python\" rel=\"nofollow noreferrer\">now provides</a> some support third party for HKTs.</p>\n<p>To copy a snippet from their docs</p>\n<pre><code>&gt;&gt;&gt; from returns.primitives.hkt import Kind1\n&gt;&gt;&gt; from returns.interfaces.container import Container1\n&gt;&gt;&gt; from typing import TypeVar\n\n&gt;&gt;&gt; T = TypeVar('T', bound=Container1)\n\n&gt;&gt;&gt; def to_str(arg: Kind1[T, int]) -&gt; Kind1[T, str]:\n...   ...\n</code></pre>\n<p>Your <code>Functor</code> would be sth like</p>\n<pre><code>from typing import TypeVar, Generic, Callable\n\nA = TypeVar(&quot;A&quot;)\nB = TypeVar(&quot;B&quot;)\nT = TypeVar(&quot;T&quot;)\n\n\nclass FunctorInstance(Generic[T]):\n    def __init__(\n        self, map: Callable[[Callable[[A], B], Kind1[T, A]], Kind1[T, B]]\n    ):\n        self._map = map\n\n    def map(self, x: Kind1[T, A], f: Callable[[A], B]) -&gt; Kind1[T, B]:\n        return self._map(f, x)\n</code></pre>\n"}], "owner": {"reputation": 12292, "user_id": 114388, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9ed01afca2cc6c4d7d0c4d134fe5bde4?s=128&d=identicon&r=PG", "display_name": "Rafael S. Calsaverini", "link": "https://stackoverflow.com/users/114388/rafael-s-calsaverini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 690, "favorite_count": 0, "accepted_answer_id": 54120196, "answer_count": 2, "score": 7, "last_activity_date": 1605459356, "creation_date": 1547066796, "last_edit_date": 1547071414, "question_id": 54118095, "link": "https://stackoverflow.com/questions/54118095/how-to-use-generic-higher-kinded-type-variables-in-pythons-type-hinting-syste", "title": "How to use Generic (higher-kinded) type variables in python&#39;s type hinting system?", "body": "<p>Suppose I want to write a generic class using mypy, but the type argument for the class is itself a generic type. For example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from typing import TypeVar, Generic, Callable\n\nA = TypeVar(\"A\")\nB = TypeVar(\"B\")\nT = TypeVar(\"T\")\n\n\nclass FunctorInstance(Generic[T]):\n    def __init__(self, map: Callable[[Callable[[A], B], T[A]], T[B]]):\n        self._map = map\n\n    def map(self, x: T[A], f: Callable[[A], B]) -&gt; T[B]:\n        return self._map(f, x)\n</code></pre>\n\n<p>When I try to call mypy in the definition above I get an error:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>$ mypy typeclasses.py \ntypeclasses.py:9: error: Type variable \"T\" used with arguments\ntypeclasses.py:12: error: Type variable \"T\" used with arguments \n</code></pre>\n\n<p>I tried adding constraints to the <code>T</code> <code>TypeVar</code>'s definition but failed to make this work. Is it possible to do this?</p>\n"}, {"tags": ["python", "pandas", "datetime"], "comments": [{"owner": {"reputation": 816, "user_id": 1256113, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4b782b07789f803c8c5a76d40f099a7a?s=128&d=identicon&r=PG", "display_name": "TheNavigat", "link": "https://stackoverflow.com/users/1256113/thenavigat"}, "edited": false, "score": 0, "creation_date": 1547067213, "post_id": 54118078, "comment_id": 95068876, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/39662149/pandas-extract-date-and-time-from-timestamp\">pandas: extract date and time from timestamp</a>"}, {"owner": {"reputation": 402, "user_id": 1717699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8780bc1c7fe9e9a460a3ea4eb5ea2c0?s=128&d=identicon&r=PG&f=1", "display_name": "cors", "link": "https://stackoverflow.com/users/1717699/cors"}, "edited": false, "score": 0, "creation_date": 1547067600, "post_id": 54118078, "comment_id": 95069023, "body": "<code>df[&#39;new column&#39;].compontents</code> may help you"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1547069008, "post_id": 54118078, "comment_id": 95069646, "body": "I think you want <code>pd.to_timedelta</code>"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1547069767, "post_id": 54118078, "comment_id": 95069962, "body": "Actually, the above wont really matter, but still should be used as you don&#39;t have a date part. The display you are seeing is consistent with how <code>datetimes</code> display negative values, so you just aren&#39;t going to get the format you want. I mean you <i>can</i> if you convert it to a string column, but you lose all <code>datetime</code> functionality which seems stupid. Perhaps consider converting it to total seconds, which is a signed integer."}], "answers": [{"tags": [], "owner": {"reputation": 12973, "user_id": 5061557, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7df554b2e75e1a1581ed3757ca4d0c82?s=128&d=identicon&r=PG&f=1", "display_name": "Grr", "link": "https://stackoverflow.com/users/5061557/grr"}, "is_accepted": true, "score": 2, "last_activity_date": 1547069783, "creation_date": 1547069783, "answer_id": 54118735, "question_id": 54118078, "link": "https://stackoverflow.com/questions/54118078/convert-strings-to-time-hms-so-i-can-subtract-them/54118735#54118735", "title": "Convert strings to time (H:M:S) so I can subtract them", "body": "<p>You could convert the output to a difference in seconds.</p>\n\n<pre><code>df = pd.DataFrame({'t1': ['1:13:14', '2:34:56', '2:44:32'], 't2': ['1:15:00', '2:37:00', '3:00:00']})\ndf.t1 = pd.to_timedelta(df.t1)\ndf.t2 = pd.to_timedelta(df.t2)\ndf\n        t1       t2\n0  1:13:14  1:15:00\n1  2:34:56  2:37:00\n2  2:44:32  3:00:00\n\ndf['t_diff'] = (df.t1 - df.t2).dt.total_seconds()\n\n        t1       t2  t_diff\n0 01:13:14 01:15:00  -106.0\n1 02:34:56 02:37:00  -124.0\n2 02:44:32 03:00:00  -928.0\n</code></pre>\n"}], "owner": {"reputation": 70, "user_id": 9339430, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WHn3z.jpg?s=128&g=1", "display_name": "Fabiano Battaglin", "link": "https://stackoverflow.com/users/9339430/fabiano-battaglin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 54118735, "answer_count": 1, "score": 1, "last_activity_date": 1547069783, "creation_date": 1547066711, "last_edit_date": 1547067276, "question_id": 54118078, "link": "https://stackoverflow.com/questions/54118078/convert-strings-to-time-hms-so-i-can-subtract-them", "title": "Convert strings to time (H:M:S) so I can subtract them", "body": "<p>I have some data imported from an XLS file that has 2 columns containing time information in the format of strings. Example: 04:15:45 (which means 4 hours, 15 minutes, and 45 seconds).</p>\n\n<p>Next I convert it to datatime</p>\n\n<pre><code>df['column'] = pd.to_datetime(df['column'], errors='coerce')\n</code></pre>\n\n<p>I get something like this <code>2019-01-09 04:15:45</code> which is not exactly what I want, but that's okay ( I rather have it in the format %H%M%S). I do the same thing with another column with the same characteristics. \nNext I create a new column with the difference between them:</p>\n\n<pre><code>df['new column'] =  df['column1'] - df['column2']\n</code></pre>\n\n<p>However when I try to subtract both I get results like this: <code>-1 days +23:00:00</code> when all I really want is something like <code>00:16:12</code>, containing just the difference in %H%M%S.</p>\n\n<p>The desired result, algorithmically speaking, would be something like:</p>\n\n<pre><code>(time planned) - (time it actually took) = (difference format 00:18:12)\n</code></pre>\n"}, {"tags": ["python", "pipeline", "text-classification", "resampling", "oversampling"], "answers": [{"tags": [], "owner": {"reputation": 3015, "user_id": 1859772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05bbd1d0875731297408557a7f7d4061?s=128&d=identicon&r=PG", "display_name": "vpekar", "link": "https://stackoverflow.com/users/1859772/vpekar"}, "is_accepted": true, "score": 6, "last_activity_date": 1547134457, "creation_date": 1547134457, "answer_id": 54132017, "question_id": 54118076, "link": "https://stackoverflow.com/questions/54118076/how-to-resample-text-imbalanced-groups-in-a-pipeline/54132017#54132017", "title": "How to resample text (imbalanced groups) in a pipeline?", "body": "<p>You should use the Pipeline implemented in the <code>imblearn</code> package, not the one from <code>sklearn</code>. E.g., this code runs fine:</p>\n\n<pre><code>import pandas as pd\n\nfrom sklearn.model_selection import train_test_split\nfrom sklearn.feature_extraction.text import CountVectorizer\nfrom sklearn.feature_extraction.text import TfidfTransformer\nfrom sklearn.naive_bayes import MultinomialNB\n\nfrom imblearn.over_sampling import RandomOverSampler\nfrom imblearn.pipeline import Pipeline\n\n\ndata = [['round red fruit that is sweet','apple'],['long yellow fruit with a peel','banana'],\n    ['round green fruit that is soft and sweet','pear'], ['red fruit that is common', 'apple'],\n    ['tiny fruits that grow in bunches','grapes'],['purple fruits', 'grapes'], ['yellow and long', 'banana'],\n    ['round, small, green', 'grapes'], ['can be red, green, or purple', 'grapes'], ['tiny fruits', 'grapes'],\n    ['small fruits', 'grapes']]\n\ndf = pd.DataFrame(data, columns=['Description','Type'])\n\nX_train, X_test, y_train, y_test = train_test_split(df['Description'],\n    df['Type'], random_state=0)\n\ntext_clf = Pipeline([('vect', CountVectorizer()),\n                    ('tfidf', TfidfTransformer()),\n                    ('RUS', RandomOverSampler()),\n                    ('clf', MultinomialNB())])\ntext_clf = text_clf.fit(X_train, y_train)\ny_pred = text_clf.predict(X_test)\n\nprint('Score:',text_clf.score(X_test, y_test))\n</code></pre>\n"}], "owner": {"reputation": 351, "user_id": 10791600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7fa43ae97ba0cc237a6cda68228d3fa?s=128&d=identicon&r=PG&f=1", "display_name": "Kelsey", "link": "https://stackoverflow.com/users/10791600/kelsey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1538, "favorite_count": 2, "accepted_answer_id": 54132017, "answer_count": 1, "score": 5, "last_activity_date": 1547134457, "creation_date": 1547066708, "last_edit_date": 1547128867, "question_id": 54118076, "link": "https://stackoverflow.com/questions/54118076/how-to-resample-text-imbalanced-groups-in-a-pipeline", "title": "How to resample text (imbalanced groups) in a pipeline?", "body": "<p>I'm trying to do some text classification using MultinomialNB, but I'm running into problems because my data is unbalanced. (Below is some sample data for simplicity. In actuality, mine is much larger.) I'm trying to resample my data using over-sampling, and I would ideally like to build it into this pipeline. </p>\n\n<p>The pipeline below works fine without over-sampling, but again, in real life my data requires it. It's very imbalanced. </p>\n\n<p>With this current code, I keep getting the error: \"TypeError: All intermediate steps should be transformers and implement fit and transform.\"</p>\n\n<p>How do I build RandomOverSampler into this pipeline? </p>\n\n<pre><code>data = [['round red fruit that is sweet','apple'],['long yellow fruit with a peel','banana'],\n    ['round green fruit that is soft and sweet','pear'], ['red fruit that is common', 'apple'],\n    ['tiny fruits that grow in bunches','grapes'],['purple fruits', 'grapes'], ['yellow and long', 'banana'],\n    ['round, small, green', 'grapes'], ['can be red, green, or purple', 'grapes'], ['tiny fruits', 'grapes'], \n    ['small fruits', 'grapes']]\n\ndf = pd.DataFrame(data,columns=['Description','Type'])  \n\nX_train, X_test, y_train, y_test = train_test_split(X, y, random_state = 0)\ntext_clf = Pipeline([('vect', CountVectorizer()),\n                    ('tfidf', TfidfTransformer()), \n                    ('RUS', RandomOverSampler()),\n                    ('clf', MultinomialNB())])\ntext_clf = text_clf.fit(X_train, y_train)\ny_pred = text_clf.predict(X_test)\n\nprint('Score:',text_clf.score(X_test, y_test))\n</code></pre>\n"}, {"tags": ["python", "class", "oop"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 3, "creation_date": 1547066697, "post_id": 54118044, "comment_id": 95068663, "body": "You&#39;re adding properties to the class, not the instances. <code>book.title</code> etc. Should be <code>self.title</code>"}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 3, "creation_date": 1547066698, "post_id": 54118044, "comment_id": 95068664, "body": "You need to use <code>self</code> which refers to the instance of <code>book</code>. Change your code to <code>self.title = title</code>, <code>self.author = author</code>, etc."}, {"owner": {"reputation": 1, "user_id": 10891955, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-83Ic3jP8oWo/AAAAAAAAAAI/AAAAAAAAPTs/k5ocgpO86Bc/photo.jpg?sz=128", "display_name": "Shubh", "link": "https://stackoverflow.com/users/10891955/shubh"}, "edited": false, "score": 0, "creation_date": 1547066968, "post_id": 54118044, "comment_id": 95068770, "body": "Thank you so much, totally understood, I believe this is a dumb mistake on my side. bsize is a class variable which I used to learn how it works. thanks, everyone, again!"}], "answers": [{"tags": [], "owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "is_accepted": false, "score": 1, "last_activity_date": 1547066902, "creation_date": 1547066902, "answer_id": 54118128, "question_id": 54118044, "link": "https://stackoverflow.com/questions/54118044/same-object-giving-different-value-depending-on-another-object-is-commented-out/54118128#54118128", "title": "same object giving different value, depending on another object is commented out or not", "body": "<p>Corrected code:</p>\n\n<pre><code>class book:\n    def __init__(self,title,author,page):\n        self.title = title\n        self.author = author\n        self.page = page\n\n    bsize = 5\n    bsize += 1\n\n    def bookname(self):\n        return(self.title + ' - by ' + self.author)\n\n\nbook_1 = book('pather daabi', 'bankim', 350)\n\n# if I comment out the below line for book_2, book_1 is printing correctly\n\nbook_2 = book('sei samoi', 'sunil', 145)\n\nprint(book_1.page)\nprint(book_1.bookname())\n\n350\npather daabi - by bankim\n\n# if I comment out the below line for book_2, book_1 is printing correctly\n\nprint(book.bookname(book_2))\nprint(book.bsize)\n\n\nsei samoi - by sunil\n6\n</code></pre>\n\n<p>You need to use <code>self</code> which refers to an instance of whatever class you're working with which is <code>book</code> in this case. I think this is normal practice or convention but try to have your class names be capitalized -- would be <code>Book</code> in this case. Nothing serious but just to follow convention. On another note: Not sure what <code>bsize</code> is for or what it's doing.</p>\n"}], "owner": {"reputation": 1, "user_id": 10891955, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-83Ic3jP8oWo/AAAAAAAAAAI/AAAAAAAAPTs/k5ocgpO86Bc/photo.jpg?sz=128", "display_name": "Shubh", "link": "https://stackoverflow.com/users/10891955/shubh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547066902, "creation_date": 1547066575, "last_edit_date": 1547066624, "question_id": 54118044, "link": "https://stackoverflow.com/questions/54118044/same-object-giving-different-value-depending-on-another-object-is-commented-out", "title": "same object giving different value, depending on another object is commented out or not", "body": "<p>I am a total beginner at OOP in Python. I am creating a simple class as a book and creating 2 instances as book_1 and book_2 of that. While I am printing values of them, printing page or name of book_1 is printing values from book_2, which is weird, when I am commenting out the book_2 part, then book_1 is returning the right value associated with book_1. </p>\n\n<p>I have tried this code in 'Spyder' and 'Idle', both are giving the same result.\nPlease forgive my naiveness putting such a question, I am asking a question in this site for the first time. Thanks, everyone in advance for the help.</p>\n\n<pre><code>class book:\n    def __init__(self,title,author,page):\n        book.title = title\n        book.author = author\n        book.page = page\n\n    bsize = 5\n    bsize += 1\n\n    def bookname(self):\n        return(book.title + ' - by ' + book.author)\n\n\nbook_1 = book('pather daabi', 'bankim', 350)\n\n# if I comment out the below line for book_2, book_1 is printing correctly\n\nbook_2 = book('sei samoi', 'sunil', 145)\n\nprint(book_1.page)\nprint(book_1.bookname())\n\n# if I comment out the below line for book_2, book_1 is printing correctly\n\nprint(book.bookname(book_2))\nprint(book.bsize)\n</code></pre>\n"}, {"tags": ["python", "google-cloud-functions"], "answers": [{"comments": [{"owner": {"reputation": 9180, "user_id": 395255, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b877e7b6ce7a551ef103f03ea55b3bd2?s=128&d=identicon&r=PG", "display_name": "Asdfg", "link": "https://stackoverflow.com/users/395255/asdfg"}, "edited": false, "score": 0, "creation_date": 1547067126, "post_id": 54118107, "comment_id": 95068837, "body": "I see that now. Thank you."}, {"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "reply_to_user": {"reputation": 9180, "user_id": 395255, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b877e7b6ce7a551ef103f03ea55b3bd2?s=128&d=identicon&r=PG", "display_name": "Asdfg", "link": "https://stackoverflow.com/users/395255/asdfg"}, "edited": false, "score": 2, "creation_date": 1547067286, "post_id": 54118107, "comment_id": 95068901, "body": "I will point out that there&#39;s nothing stopping you from having other files that contain the code for your functions.  You just have to import and call them from main.py."}], "tags": [], "owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "is_accepted": true, "score": 3, "last_activity_date": 1547066847, "creation_date": 1547066847, "answer_id": 54118107, "question_id": 54118015, "link": "https://stackoverflow.com/questions/54118015/cloud-function-file-name/54118107#54118107", "title": "cloud function file name", "body": "<p>Yes, you must name your file main.py.  According to the <a href=\"https://cloud.google.com/functions/docs/concepts/python-runtime#source_code_structure\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p><strong>Source code structure</strong></p>\n  \n  <p>Your function's entrypoint must be defined in a Python source file\n  named main.py.</p>\n</blockquote>\n"}], "owner": {"reputation": 9180, "user_id": 395255, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/b877e7b6ce7a551ef103f03ea55b3bd2?s=128&d=identicon&r=PG", "display_name": "Asdfg", "link": "https://stackoverflow.com/users/395255/asdfg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "accepted_answer_id": 54118107, "answer_count": 1, "score": 1, "last_activity_date": 1547066847, "creation_date": 1547066439, "last_edit_date": 1547066797, "question_id": 54118015, "link": "https://stackoverflow.com/questions/54118015/cloud-function-file-name", "title": "cloud function file name", "body": "<p>I am trying to deploy <code>Cloud Function</code>. I have written the function in file called <code>gcpapp.py</code>.</p>\n\n<p>When I try to deploy this function, it gives me an error saying <code>Deployment failure:\nFunction load error: File main.py that is expected to define function doesn't exist</code>.</p>\n\n<p>I entered <code>appgcp.main</code> as <code>Function to execute</code> where <code>appgcp</code> is the file name and <code>main</code> is the function name.</p>\n\n<p>Do I must name the file where the function resides as <code>main.py</code>?</p>\n"}, {"tags": ["python", "excel", "xlsxwriter"], "answers": [{"tags": [], "owner": {"reputation": 97, "user_id": 10107004, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AB0xlx_EY5M/AAAAAAAAAAI/AAAAAAAARHE/lxpdwQfS9js/photo.jpg?sz=128", "display_name": "NikoTumi", "link": "https://stackoverflow.com/users/10107004/nikotumi"}, "is_accepted": false, "score": 0, "last_activity_date": 1547067149, "creation_date": 1547067149, "answer_id": 54118183, "question_id": 54118011, "link": "https://stackoverflow.com/questions/54118011/pass-variable-in-add-series-in-xlsxwriter/54118183#54118183", "title": "Pass variable in add_series in xlsxwriter", "body": "<p>I found the answer at <a href=\"https://riptutorial.com/python/example/17392/create-excel-charts-with-xlsxwriter\" rel=\"nofollow noreferrer\">https://riptutorial.com/python/example/17392/create-excel-charts-with-xlsxwriter</a></p>\n\n<p>Code should look like this:</p>\n\n<pre><code>C1 = 'D'\nC2 = 'F'\nfor Vg in Vglist:\n    # Get min and max row excel index for current Vg\n    indexList = list(pivDF.loc[(pivDF.Vg == Vglist[0])].index.values) # gets list of index at Vg value\n    r1 = min(indexList) + 2\n    r2 = max(indexList) + 2\n    chart.add_series({\n        'name':       'Vg %sV' % Vg,\n        'categories': '=Sheet1!$%s$%s:$%s$%s' % (C1, r1, C1, r2), # Vd data\n        'values':     '=Sheet1!$%s$%s:$%s$%s' % (C2, r1, C2, r2), # Id normalized data\n    })\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "is_accepted": false, "score": 1, "last_activity_date": 1547126244, "last_edit_date": 1547126244, "creation_date": 1547123635, "answer_id": 54128840, "question_id": 54118011, "link": "https://stackoverflow.com/questions/54118011/pass-variable-in-add-series-in-xlsxwriter/54128840#54128840", "title": "Pass variable in add_series in xlsxwriter", "body": "<p>The best way to set the XlsxWriter chart range programmatically is to avoid the <code>Sheet1!D1:D12</code> style range syntax and use the alternative <code>list</code> syntax shown in the <a href=\"https://xlsxwriter.readthedocs.io/chart.html#chart-add-series\" rel=\"nofollow noreferrer\">docs</a>. </p>\n\n<p>Something like:</p>\n\n<pre><code>C1 = 3\nC2 = 5\nfor Vg in Vglist:\n    indexList = list(pivDF.loc[(pivDF.Vg == Vglist[0])].index.values)\n    r1 = min(indexList) + 1\n    r2 = max(indexList) + 1\n    chart.add_series({\n        'name':       'Vg %sV' % Vg,\n        'categories': ['Sheet1', r1, C1, r2, C1],\n        'values':     ['Sheet1', r1, C2, r2, C2],\n    })\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 10107004, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AB0xlx_EY5M/AAAAAAAAAAI/AAAAAAAARHE/lxpdwQfS9js/photo.jpg?sz=128", "display_name": "NikoTumi", "link": "https://stackoverflow.com/users/10107004/nikotumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 888, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1577559659, "creation_date": 1547066414, "question_id": 54118011, "link": "https://stackoverflow.com/questions/54118011/pass-variable-in-add-series-in-xlsxwriter", "title": "Pass variable in add_series in xlsxwriter", "body": "<p>I am trying to use a for loop to add series for a chart in a xlsx file but I am getting a strange error.</p>\n\n<p>Here's is my code.</p>\n\n<p>This portion shows that I have sorted my DF and reindexed it for ease of interpreting the DF index to excel index for excel cell reference.</p>\n\n<pre><code># Sort dataframe and reindex\npivDF = pivDF.sort_values(by=['Vg'])\npivDF = pivDF.reset_index(drop=True) # reindex dropping previous index instead of adding it as a new column\n\n# Add the following as a sheet in a excel file:\n# data, chart\n## Create workbook\nworkbook = xlsxwriter.Workbook(dirPath + file_name + '.xlsx') # Creates workbook object\n## Add a worksheet to hold the data.\nwriter = pd.ExcelWriter(dirPath+\"//\"+file_name+\".xlsx\", engine = 'xlsxwriter')\npivDF.to_excel(writer,sheet_name = 'Data')\nwriter.save()\n## Add plot \n### Create a new line chart.\nchartsheet = workbook.add_chartsheet() # creates chartsheet objec\nchart = workbook.add_chart({'type': 'line'}) # creates chart object\n</code></pre>\n\n<p>The following adds the series and is where I am encountering the issue.</p>\n\n<pre><code>### Configure the chart\n#### Configure series.\n##### Get unique Vg\nVglist = pivDF.Vg.unique()\nC1 = 'D'\nC2 = 'F'\nfor Vg in Vglist:\n    # Get min and max row excel index for current Vg\n    indexList = list(pivDF.loc[(pivDF.Vg == Vglist[0])].index.values) # gets list of index at Vg value\n    r1 = min(indexList) + 2\n    r2 = max(indexList) + 2\n    chart.add_series({\n        'name':       'Vg ' + Vg + 'V',\n        'categories': '=Sheet1!$'+ C1 +'$'+ r1 +':$'+ C1 +'$'+ r2, # Vd data\n        'values':     '=Sheet1!$'+ C2 +'$'+ r1 +':$'+ C2 +'$'+ r2, # Id normalized data\n    })\n</code></pre>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 534, "user_id": 10226761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HN6j6.jpg?s=128&g=1", "display_name": "Luke DeLuccia", "link": "https://stackoverflow.com/users/10226761/luke-deluccia"}, "edited": false, "score": 2, "creation_date": 1547066363, "post_id": 54117933, "comment_id": 95068536, "body": "There is an answer in this question related to checking imports of a module from outside of that module: <a href=\"https://stackoverflow.com/questions/4858100/how-to-list-imported-modules\" title=\"how to list imported modules\">stackoverflow.com/questions/4858100/&hellip;</a>"}, {"owner": {"reputation": 771, "user_id": 2184122, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/012fd79085d24c78bb4ff12577ed1376?s=128&d=identicon&r=PG", "display_name": "Robert Lugg", "link": "https://stackoverflow.com/users/2184122/robert-lugg"}, "reply_to_user": {"reputation": 534, "user_id": 10226761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HN6j6.jpg?s=128&g=1", "display_name": "Luke DeLuccia", "link": "https://stackoverflow.com/users/10226761/luke-deluccia"}, "edited": false, "score": 0, "creation_date": 1547069023, "post_id": 54117933, "comment_id": 95069650, "body": "Perfect.  I&#39;ll write it out as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 771, "user_id": 2184122, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/012fd79085d24c78bb4ff12577ed1376?s=128&d=identicon&r=PG", "display_name": "Robert Lugg", "link": "https://stackoverflow.com/users/2184122/robert-lugg"}, "is_accepted": false, "score": 2, "last_activity_date": 1547069161, "creation_date": 1547069161, "answer_id": 54118620, "question_id": 54117933, "link": "https://stackoverflow.com/questions/54117933/python-check-if-module-is-in-use-in-another-file/54118620#54118620", "title": "Python check if module is in use in another file", "body": "<p>@Luke DeLuccia pointed me in the correct direction.  For future readers, The code might look something like this:</p>\n\n<pre><code>import sys\ndef set_pseudoseeds(seed):\n    # random\n    try:\n        module = sys.modules['random']\n    except KeyError:\n        pass\n    else:\n        module.seed(seed)\n    ...\n</code></pre>\n\n<p>Thanks Luke!</p>\n"}], "owner": {"reputation": 771, "user_id": 2184122, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/012fd79085d24c78bb4ff12577ed1376?s=128&d=identicon&r=PG", "display_name": "Robert Lugg", "link": "https://stackoverflow.com/users/2184122/robert-lugg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 180, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547069161, "creation_date": 1547066123, "question_id": 54117933, "link": "https://stackoverflow.com/questions/54117933/python-check-if-module-is-in-use-in-another-file", "title": "Python check if module is in use in another file", "body": "<p>I want a function to set the random seeds for several known packages.I'd like to create a library function which calls:</p>\n\n<pre><code>tf.set_random_seed(seed)\nnp.random.seed(seed)\nrandom.seed(seed)\n</code></pre>\n\n<p>, but only if actually needed.  In some cases the caller will be part of a program that uses numpy and in others it won't.</p>\n\n<p>I want a single function, in its own importable file, which will set the random seed of various packages, but not to import the package unless used by the caller.</p>\n\n<p>I can easily work-around this by inserting the method in each caller's file.  But, I'm curious if there is a way to do what I want to do.</p>\n\n<p>Can I somehow query the calling function and determine \"In your scope, has numpy been imported\"?  If so, this function would call np.random.seed.</p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn"], "answers": [{"comments": [{"owner": {"reputation": 9808, "user_id": 671013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2d735ca95ae6d53fa8fd9fa79814e514?s=128&d=identicon&r=PG", "display_name": "Dror", "link": "https://stackoverflow.com/users/671013/dror"}, "edited": false, "score": 0, "creation_date": 1547105186, "post_id": 54118066, "comment_id": 95078845, "body": "In particular, if I get it right, it happen during <a href=\"https://github.com/scikit-learn/scikit-learn/blob/354c8c3bc3e36c69021713da66e7fa2f6cb07756/sklearn/svm/classes.py#L231\" rel=\"nofollow noreferrer\">fitting</a>. Is that correct? Is it appearing somewhere in the docs? Can you include some references in your answer?"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "reply_to_user": {"reputation": 9808, "user_id": 671013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2d735ca95ae6d53fa8fd9fa79814e514?s=128&d=identicon&r=PG", "display_name": "Dror", "link": "https://stackoverflow.com/users/671013/dror"}, "edited": false, "score": 0, "creation_date": 1547107273, "post_id": 54118066, "comment_id": 95079793, "body": "@Dror Yes you are correct. During <code>fit()</code>, all the unique classes are extracted and based on the number of classes, the other parts are handled, like binary vs multiclass classification, the shape of <code>coef_</code> , <code>intercept_</code>, <code>decision_function()</code> etc."}, {"owner": {"reputation": 9808, "user_id": 671013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2d735ca95ae6d53fa8fd9fa79814e514?s=128&d=identicon&r=PG", "display_name": "Dror", "link": "https://stackoverflow.com/users/671013/dror"}, "edited": false, "score": 0, "creation_date": 1547107886, "post_id": 54118066, "comment_id": 95080033, "body": "Is it a known fact well presented in the docs which I missed?"}], "tags": [], "owner": {"reputation": 12973, "user_id": 5061557, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/7df554b2e75e1a1581ed3757ca4d0c82?s=128&d=identicon&r=PG&f=1", "display_name": "Grr", "link": "https://stackoverflow.com/users/5061557/grr"}, "is_accepted": false, "score": 2, "last_activity_date": 1547067312, "last_edit_date": 1547067312, "creation_date": 1547066669, "answer_id": 54118066, "question_id": 54117876, "link": "https://stackoverflow.com/questions/54117876/what-is-the-order-of-classes-when-using-decision-function/54118066#54118066", "title": "What is the order of classes when using decision_function", "body": "<p>The order is the same as that provided by the <code>classes_</code> attribute.</p>\n\n<p>Behind the scenes, <code>classes_</code> is the output of <code>np.unique(y)</code> which \"Returns the sorted unique elements of an array\". In your case <code>iris_y</code> is the numerical encoding of <code>array(['setosa', 'versicolor', 'virginica'], dtype='&lt;U10')</code> as provided by the iris dataset. </p>\n"}], "owner": {"reputation": 9808, "user_id": 671013, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2d735ca95ae6d53fa8fd9fa79814e514?s=128&d=identicon&r=PG", "display_name": "Dror", "link": "https://stackoverflow.com/users/671013/dror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547067312, "creation_date": 1547065852, "question_id": 54117876, "link": "https://stackoverflow.com/questions/54117876/what-is-the-order-of-classes-when-using-decision-function", "title": "What is the order of classes when using decision_function", "body": "<p>Assume the targets of a multi-class classification problem are <code>T1, T2, T3</code>, then the result of <code>clf.decision_function(X)</code> given a trained classifier, would be a matrix where the rows are the observations and the columns are the scores for each class. </p>\n\n<p>It is not clear from the documentation (e.g. <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.svm.LinearSVC.html#sklearn.svm.LinearSVC.decision_function\" rel=\"nofollow noreferrer\">for LinearSVC</a>) what is the order of the columns. Some experiments suggest that they are lexicographically ordered. Is that correct?</p>\n\n<p>I created a <a href=\"https://colab.research.google.com/drive/1U4v2wr9TM55ltu2QEHna1iLpH2xmpHJl\" rel=\"nofollow noreferrer\">minimal example</a> where it is demonstrated.</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 2354, "user_id": 262432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HkuON.jpg?s=128&g=1", "display_name": "Sergei Lebedev", "link": "https://stackoverflow.com/users/262432/sergei-lebedev"}, "edited": false, "score": 0, "creation_date": 1547067717, "post_id": 54117863, "comment_id": 95069082, "body": "Shouldn&#39;t the shape of y_oh_true be 2-D?"}, {"owner": {"reputation": 772, "user_id": 4541944, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b6943a865abdbc2ddd9a28f7ca2e632e?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/4541944/isaac"}, "reply_to_user": {"reputation": 2354, "user_id": 262432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HkuON.jpg?s=128&g=1", "display_name": "Sergei Lebedev", "link": "https://stackoverflow.com/users/262432/sergei-lebedev"}, "edited": false, "score": 0, "creation_date": 1547069187, "post_id": 54117863, "comment_id": 95069716, "body": "Yes, it&#39;s 2d but I thought that would be too long and hard to visualize, that&#39;s why I put it that way"}, {"owner": {"reputation": 772, "user_id": 4541944, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b6943a865abdbc2ddd9a28f7ca2e632e?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/4541944/isaac"}, "reply_to_user": {"reputation": 2354, "user_id": 262432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HkuON.jpg?s=128&g=1", "display_name": "Sergei Lebedev", "link": "https://stackoverflow.com/users/262432/sergei-lebedev"}, "edited": false, "score": 0, "creation_date": 1547069572, "post_id": 54117863, "comment_id": 95069871, "body": "@SergeiLebedev I edited to make it more clear"}, {"owner": {"reputation": 2354, "user_id": 262432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HkuON.jpg?s=128&g=1", "display_name": "Sergei Lebedev", "link": "https://stackoverflow.com/users/262432/sergei-lebedev"}, "edited": false, "score": 0, "creation_date": 1547071240, "post_id": 54117863, "comment_id": 95070597, "body": "Could you also explain why you expect TF <i>not</i> to take 9 from the first sequence?"}, {"owner": {"reputation": 772, "user_id": 4541944, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b6943a865abdbc2ddd9a28f7ca2e632e?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/4541944/isaac"}, "reply_to_user": {"reputation": 2354, "user_id": 262432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HkuON.jpg?s=128&g=1", "display_name": "Sergei Lebedev", "link": "https://stackoverflow.com/users/262432/sergei-lebedev"}, "edited": false, "score": 0, "creation_date": 1547071958, "post_id": 54117863, "comment_id": 95070877, "body": "Because the first row of mask_y has 9 &quot;Trues&quot;, so I expect tf to take the first 9 elements-&gt;from 0 to 8"}, {"owner": {"reputation": 2354, "user_id": 262432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HkuON.jpg?s=128&g=1", "display_name": "Sergei Lebedev", "link": "https://stackoverflow.com/users/262432/sergei-lebedev"}, "edited": false, "score": 0, "creation_date": 1547074109, "post_id": 54117863, "comment_id": 95071566, "body": "I&#39;m actually surprised this does fail because the last dimension of y should exactly match that of mask. Whereas in your example y is 2x10 whereas the mask 2x9."}], "answers": [{"comments": [{"owner": {"reputation": 2354, "user_id": 262432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HkuON.jpg?s=128&g=1", "display_name": "Sergei Lebedev", "link": "https://stackoverflow.com/users/262432/sergei-lebedev"}, "edited": false, "score": 0, "creation_date": 1547074123, "post_id": 54119509, "comment_id": 95071573, "body": "Which version of TF are you using? 1.12 does complain."}, {"owner": {"reputation": 772, "user_id": 4541944, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b6943a865abdbc2ddd9a28f7ca2e632e?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/4541944/isaac"}, "reply_to_user": {"reputation": 2354, "user_id": 262432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HkuON.jpg?s=128&g=1", "display_name": "Sergei Lebedev", "link": "https://stackoverflow.com/users/262432/sergei-lebedev"}, "edited": false, "score": 0, "creation_date": 1547122541, "post_id": 54119509, "comment_id": 95088150, "body": "I&#39;m using tf 1.11"}], "tags": [], "owner": {"reputation": 772, "user_id": 4541944, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b6943a865abdbc2ddd9a28f7ca2e632e?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/4541944/isaac"}, "is_accepted": false, "score": 0, "last_activity_date": 1547074034, "creation_date": 1547074034, "answer_id": 54119509, "question_id": 54117863, "link": "https://stackoverflow.com/questions/54117863/how-to-apply-boolean-mask-to-a-onehot-vector-in-tensorflow/54119509#54119509", "title": "How to apply boolean_mask to a onehot vector in tensorflow?", "body": "<p>Ok solved, I had to specify maxlen when doing <code>tf.sequence_mask</code> </p>\n\n<p>In my case, to fix it it's just:\n <code>mask_y = tf.sequence_mask(self.len_y, maxlen=tf.shape(self.y)[1])</code>.</p>\n\n<p>What it is not clear to me is why <code>tf.boolean_mask</code> doesn't complain if shapes don't fit instead of doing this weird thing.</p>\n"}], "owner": {"reputation": 772, "user_id": 4541944, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b6943a865abdbc2ddd9a28f7ca2e632e?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/4541944/isaac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547074034, "creation_date": 1547065809, "last_edit_date": 1547069547, "question_id": 54117863, "link": "https://stackoverflow.com/questions/54117863/how-to-apply-boolean-mask-to-a-onehot-vector-in-tensorflow", "title": "How to apply boolean_mask to a onehot vector in tensorflow?", "body": "<p>I have my vector <code>y</code>, and I also know the useful lengths of y, <code>len_y</code>. I also have <code>onehot_y = tf.one_hot(y, n_classes)</code> which is the onehot representation of <code>y</code>.</p>\n\n<p>I have already created a mask of len_y. </p>\n\n<p>This is an example with batchsize = 2</p>\n\n<pre><code>mask_y = tf.sequence_mask(len_y)\nmask_y = [[True True    True    True    True    True    True    True    True],\n          [True True    True    True    True    False   False   False   False]]\n</code></pre>\n\n<p>So, from my first element, only the 9th first values are useful, and from the second one only the 5th first values are usefull.</p>\n\n<p>If apply this mask to <code>y</code> like <code>tf.boolean_mask(y,mask_y)</code> I get the results as expected, but I don't know how to apply this to <code>onehot_y</code>, it doesn't complain but gives me extrange results.</p>\n\n<p>This is what I'm getting (converted to numerical representation instead on onehot for simplicity):</p>\n\n<pre><code>y = [[0,1,2,3,4,5,6,7,8,9],\n     [1,11,21,31,41,51,61,71,81,91]]\n\ny_oh_true = tf.boolean_mask(onehot_y, mask_y)\n\ny_oh_true = onehot_of -&gt;[0,1,2,3,4,5,6,7,8,9,1,11,21,31]\n</code></pre>\n\n<p>Where I would expect:</p>\n\n<pre><code>y_oh_true = onehot_of -&gt;[0,1,2,3,4,5,6,7,8,1,11,21,31,41]\n</code></pre>\n\n<p>Does anyone know how to fix this?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1547070629, "post_id": 54117828, "comment_id": 95070324, "body": "should 201902 be 2019-04-01?"}], "answers": [{"tags": [], "owner": {"reputation": 525, "user_id": 5588091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TFNE9.jpg?s=128&g=1", "display_name": "Emma Jean", "link": "https://stackoverflow.com/users/5588091/emma-jean"}, "is_accepted": false, "score": 0, "last_activity_date": 1547066117, "creation_date": 1547066117, "answer_id": 54117931, "question_id": 54117828, "link": "https://stackoverflow.com/questions/54117828/pandas-new-column-based-on-old-column-with-conditional-to-handle-none-value/54117931#54117931", "title": "Pandas new column based on old column with conditional to handle None value", "body": "<p>Could you just do something like...        </p>\n\n<pre><code>df['stamp'] = df['quarter'].replace('', np.nan, inplace=True)\n</code></pre>\n\n<p>and then do your other calculations?</p>\n"}, {"tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": true, "score": 1, "last_activity_date": 1547071495, "last_edit_date": 1547071495, "creation_date": 1547071182, "answer_id": 54118995, "question_id": 54117828, "link": "https://stackoverflow.com/questions/54117828/pandas-new-column-based-on-old-column-with-conditional-to-handle-none-value/54118995#54118995", "title": "Pandas new column based on old column with conditional to handle None value", "body": "<p><code>pandas.to_datetime</code> will parse quarters automatically, but it needs to be in the format <code>2019Q3</code>, year followed by Q and the Quarter. </p>\n\n<p>Since you have a column of integers with a <code>None</code> it's difficult to know if the underlying values are truly integers, or if they are cast to <code>float</code>, which could mess up the string slicing without first replacing.</p>\n\n<pre><code>import pandas as pd\n\ns = df.stamp.astype(str).replace('\\.0', '', regex=True) # Remove .replace if truly integer\npd.to_datetime(s.str[0:4] + 'Q' + s.str[-1], errors='coerce')\n\n#0   2019-01-01\n#1   2019-04-01\n#2          NaT\n#3   2019-01-01\n#Name: stamp, dtype: datetime64[ns]\n</code></pre>\n\n<p>You get some garbage <code>'nanQn'</code> or <code>'NoneQe'</code> for the missing rows, but since it's going to become <code>NaT</code> anyway probably not a big deal.</p>\n"}], "owner": {"reputation": 29, "user_id": 2379549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c80bb55086d94da7048a66057b3d7f7a?s=128&d=identicon&r=PG", "display_name": "r b", "link": "https://stackoverflow.com/users/2379549/r-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 54118995, "answer_count": 2, "score": 0, "last_activity_date": 1547071495, "creation_date": 1547065691, "question_id": 54117828, "link": "https://stackoverflow.com/questions/54117828/pandas-new-column-based-on-old-column-with-conditional-to-handle-none-value", "title": "Pandas new column based on old column with conditional to handle None value", "body": "<p>I am trying to create a new column based on existing column in pandas. The existing column either contains a year and quarter. IE: \"201901\" or is blank. The new column should contain a complete timestamp if the original column has a valid entry or otherwise be blank.</p>\n\n<p>IE: </p>\n\n<blockquote>\n  <p><strong>Input</strong>: <br>\n  201901 <br>\n  201902 <br>\n  None <br>\n  201901</p>\n  \n  <p><strong>Desired output</strong>: <br>\n  datetime(2019,01,01)<br>\n  datetime(2019,03,01) <br>\n  None<br>\n  datetime(2019,01,01)</p>\n</blockquote>\n\n<p>My attempt:</p>\n\n<pre><code>\n    df['stamp'] = np.where(df['quarter'].astype(str).str.len() == 8,\\\n       datetime( df['quarter'].astype(str).str[0:4].astype(int), \\\n                 df['quarter'].astype(str).str[4:6].astype(int)*3,1), \\\n    None)\n</code></pre>\n\n<p>Result:</p>\n\n<p><code>ValueError: invalid literal for int() with base 10: ''</code></p>\n\n<p>It seems to me that the code for the the True branch of the conditional is evaluating for all the rows. Note: the conditional is correct, it correctly identifies the valid entries.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 534, "user_id": 10226761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HN6j6.jpg?s=128&g=1", "display_name": "Luke DeLuccia", "link": "https://stackoverflow.com/users/10226761/luke-deluccia"}, "edited": false, "score": 2, "creation_date": 1547065950, "post_id": 54117827, "comment_id": 95068359, "body": "The error message indicates that <code>match = re.search(crumble_regex, text)</code> was unsuccessful in finding the regex pattern. You should check that <code>match</code> is not <code>None</code> before moving on in your code and make sure that <code>text</code> is what you expect."}], "answers": [{"tags": [], "owner": {"reputation": 1198, "user_id": 10643988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mg2mD.jpg?s=128&g=1", "display_name": "Bill M.", "link": "https://stackoverflow.com/users/10643988/bill-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1547066952, "last_edit_date": 1547066952, "creation_date": 1547066543, "answer_id": 54118039, "question_id": 54117827, "link": "https://stackoverflow.com/questions/54117827/cookie-str-match-group1-attributeerror-nonetype-object-has-no-attribute/54118039#54118039", "title": "cookie_str = match.group(1).AttributeError: &#39;NoneType&#39; object has no attribute &#39;group&#39;", "body": "<p>Look at these two commands:</p>\n\n<pre><code>match = re.search(cookie_regex, str(response.info()))\ncookie_str = match.group(1)\n</code></pre>\n\n<p>The first one takes the string <code>response.info()</code> does a regular expression search to match <code>cookie_regex</code>.  Then <code>match.group(1)</code> is supposed to take the match from it.  The problem however is that if you do a <code>print match</code> in between these commands, you'll see that the <code>re.search()</code> returned nothing.  This means match.group() has nothing to \"group\", which is why it errors out.</p>\n\n<p>If you take a closer look at <code>response.info()</code> (you could just add a <code>print response.info()</code> command in your script to see it), you'll see that there's a line in  response code that starts with \"set-cookie:\", the code after which you're trying to capture.  However, you have your <code>cookie_regex</code> string set to look for a line with \"<strong>S</strong>et-<strong>C</strong>ookie:\".  Note the capital letters. When I change that string to all lower-case, the error goes away:</p>\n\n<pre><code>cookie_regex = r'set-cookie: (.*?); '\n</code></pre>\n\n<p>I did run into another error after that, where <code>print \"downloading {}\".format(symbol_val)</code> stops because <code>symbol_val</code> hasn't been defined.  It seems that this variable is only declared and assigned when <code>opt[2:] == symbol_arg:</code>.  So you may want to rewrite that part to cover all cases.</p>\n"}], "owner": {"reputation": 33, "user_id": 8460814, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-EoAOVakb10o/AAAAAAAAAAI/AAAAAAAADUY/KQLYnxaPKYY/photo.jpg?sz=128", "display_name": "Muralidharan sekar", "link": "https://stackoverflow.com/users/8460814/muralidharan-sekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 313, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547066952, "creation_date": 1547065684, "question_id": 54117827, "link": "https://stackoverflow.com/questions/54117827/cookie-str-match-group1-attributeerror-nonetype-object-has-no-attribute", "title": "cookie_str = match.group(1).AttributeError: &#39;NoneType&#39; object has no attribute &#39;group&#39;", "body": "<p>I am working on Stock predicting project.I want to download historical data from yahoo finance and save them in CSV format.</p>\n\n<p>Since I am beginner in Python I am unable to correct the error.</p>\n\n<p>My code is as follows:</p>\n\n<pre><code>    import re\nimport urllib2\nimport calendar\nimport datetime\nimport getopt\nimport sys\nimport time\n\ncrumble_link = 'https://finance.yahoo.com/quote/{0}/history?p={0}'\ncrumble_regex = r'CrumbStore\":{\"crumb\":\"(.*?)\"}'\ncookie_regex = r'Set-Cookie: (.*?); '\nquote_link = 'https://query1.finance.yahoo.com/v7/finance/download/{}?period1={}&amp;period2={}&amp;interval=1d&amp;events=history&amp;crumb={}'\n\n\ndef get_crumble_and_cookie(symbol):\n    link = crumble_link.format(symbol)\n    response = urllib2.urlopen(link)\n    match = re.search(cookie_regex, str(response.info()))\n    cookie_str = match.group(1)\n    text = response.read()\n    match = re.search(crumble_regex, text)\n    crumble_str = match.group(1)\n    return crumble_str, cookie_str\n\n\ndef download_quote(symbol, date_from, date_to):\n    time_stamp_from = calendar.timegm(datetime.datetime.strptime(date_from, \"%Y-%m-%d\").timetuple())\n    time_stamp_to = calendar.timegm(datetime.datetime.strptime(date_to, \"%Y-%m-%d\").timetuple())\n\n    attempts = 0\n    while attempts &lt; 5:\n        crumble_str, cookie_str = get_crumble_and_cookie(symbol)\n        link = quote_link.format(symbol, time_stamp_from, time_stamp_to, crumble_str)\n        #print link\n        r = urllib2.Request(link, headers={'Cookie': cookie_str})\n\n        try:\n            response = urllib2.urlopen(r)\n            text = response.read()\n            print \"{} downloaded\".format(symbol)\n            return text\n        except urllib2.URLError:\n            print \"{} failed at attempt # {}\".format(symbol, attempts)\n            attempts += 1\n            time.sleep(2*attempts)\n    return \"\"\n\nif __name__ == '__main__':\n    print get_crumble_and_cookie('KO')\n    from_arg = \"from\"\n    to_arg = \"to\"\n    symbol_arg = \"symbol\"\n    output_arg = \"o\"\n    opt_list = (from_arg+\"=\", to_arg+\"=\", symbol_arg+\"=\")\n    try:\n        options, args = getopt.getopt(sys.argv[1:],output_arg+\":\",opt_list)\n    except getopt.GetoptError as err:\n        print err\n\n    for opt, value in options:\n        if opt[2:] == from_arg:\n            from_val = value\n        elif opt[2:] == to_arg:\n            to_val = value\n        elif opt[2:] == symbol_arg:\n            symbol_val = value\n        elif opt[1:] == output_arg:\n            output_val = value\n\n    print \"downloading {}\".format(symbol_val)\n    text = download_quote(symbol_val, from_val, to_val)\n\n    with open(output_val, 'wb') as f:\n        f.write(text)\n    print \"{} written to {}\".format(symbol_val, output_val)\n</code></pre>\n\n<p>And the Error message that I am getting is :</p>\n\n<pre><code>File \"C:/Users/Murali/PycharmProjects/generate/venv/tcl/generate2.py\", line \n49, in &lt;module&gt;\nprint get_crumble_and_cookie('KO')\nFile \"C:/Users/Murali/PycharmProjects/generate/venv/tcl/generate2.py\", line \n19, in get_crumble_and_cookie\ncookie_str = match.group(1)\nAttributeError: 'NoneType' object has no attribute 'group'\n</code></pre>\n\n<p>So how can we resolve this problem that has popped up?</p>\n"}, {"tags": ["python", "dictionary", "for-loop", "return"], "comments": [{"owner": {"reputation": 547, "user_id": 8485506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hKJIC87AYRI/AAAAAAAAAAI/AAAAAAAAABs/rR6DiY2FIOQ/photo.jpg?sz=128", "display_name": "Jordan Singer", "link": "https://stackoverflow.com/users/8485506/jordan-singer"}, "edited": false, "score": 2, "creation_date": 1547065765, "post_id": 54117820, "comment_id": 95068279, "body": "The syntax of your expected answer is odd. Do you want <code>log</code> to be a list type, and not a dict? So that <code>log = [{&#39;abc&#39;:2, &#39;xyz&#39;:11},{&#39;abc&#39;:3, &#39;xyz&#39;:12}]</code>?"}, {"owner": {"reputation": 109, "user_id": 7103445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7a02cf8a6042285e10c6d17ae04d560?s=128&d=identicon&r=PG&f=1", "display_name": "nlp", "link": "https://stackoverflow.com/users/7103445/nlp"}, "reply_to_user": {"reputation": 547, "user_id": 8485506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hKJIC87AYRI/AAAAAAAAAAI/AAAAAAAAABs/rR6DiY2FIOQ/photo.jpg?sz=128", "display_name": "Jordan Singer", "link": "https://stackoverflow.com/users/8485506/jordan-singer"}, "edited": false, "score": 0, "creation_date": 1547066143, "post_id": 54117820, "comment_id": 95068440, "body": "It can be a dict, I just want to append all the results of the for loop into it."}, {"owner": {"reputation": 547, "user_id": 8485506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hKJIC87AYRI/AAAAAAAAAAI/AAAAAAAAABs/rR6DiY2FIOQ/photo.jpg?sz=128", "display_name": "Jordan Singer", "link": "https://stackoverflow.com/users/8485506/jordan-singer"}, "edited": false, "score": 0, "creation_date": 1547066230, "post_id": 54117820, "comment_id": 95068483, "body": "The thing is, dictionaries don&#39;t work like that in Python. You can set the value of a key of a dictionary, but &quot;appending&quot; isn&#39;t a feature of dicts."}, {"owner": {"reputation": 824, "user_id": 4545530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b31967fe4702f501fc7ef3df61d408e?s=128&d=identicon&r=PG&f=1", "display_name": "mkiever", "link": "https://stackoverflow.com/users/4545530/mkiever"}, "edited": false, "score": 0, "creation_date": 1547066400, "post_id": 54117820, "comment_id": 95068549, "body": "To get a clearer idea what you want to have in the function result, maybe explain what you want to do later with it. Then someone could provide an answer with a fitting data structure for the result."}, {"owner": {"reputation": 109, "user_id": 7103445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7a02cf8a6042285e10c6d17ae04d560?s=128&d=identicon&r=PG&f=1", "display_name": "nlp", "link": "https://stackoverflow.com/users/7103445/nlp"}, "edited": false, "score": 0, "creation_date": 1547066519, "post_id": 54117820, "comment_id": 95068592, "body": "I will be storing these in a sqlite db. The &#39;abc&#39; and &#39;xyz&#39; are actually information pertaining to a running instance of a server so they can be for different servers or just at different time periods."}, {"owner": {"reputation": 3437, "user_id": 313145, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c631212bfc0d30a62d7269dd04237c1b?s=128&d=identicon&r=PG", "display_name": "J&#246;rg Beyer", "link": "https://stackoverflow.com/users/313145/j%c3%b6rg-beyer"}, "edited": false, "score": 0, "creation_date": 1547067555, "post_id": 54117820, "comment_id": 95069000, "body": "the &quot;len&quot; in the range parameter to the for loop is an undefined variable"}, {"owner": {"reputation": 109, "user_id": 7103445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7a02cf8a6042285e10c6d17ae04d560?s=128&d=identicon&r=PG&f=1", "display_name": "nlp", "link": "https://stackoverflow.com/users/7103445/nlp"}, "edited": false, "score": 0, "creation_date": 1547071000, "post_id": 54117820, "comment_id": 95070498, "body": "yeah this was a sample code - I should pass it in my function call. thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 547, "user_id": 8485506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hKJIC87AYRI/AAAAAAAAAAI/AAAAAAAAABs/rR6DiY2FIOQ/photo.jpg?sz=128", "display_name": "Jordan Singer", "link": "https://stackoverflow.com/users/8485506/jordan-singer"}, "edited": false, "score": 0, "creation_date": 1547065900, "post_id": 54117873, "comment_id": 95068338, "body": "I&#39;m not sure this answers his question."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1547066089, "post_id": 54117873, "comment_id": 95068419, "body": "Ok, so it does avoid resetting the dict on each call actually, but it&#39;s still not the structure they are asking for"}, {"owner": {"reputation": 3437, "user_id": 313145, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c631212bfc0d30a62d7269dd04237c1b?s=128&d=identicon&r=PG", "display_name": "J&#246;rg Beyer", "link": "https://stackoverflow.com/users/313145/j%c3%b6rg-beyer"}, "edited": false, "score": 0, "creation_date": 1547067191, "post_id": 54117873, "comment_id": 95068870, "body": "yes, you would be working with the existing dict, not a new one, every time."}, {"owner": {"reputation": 109, "user_id": 7103445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7a02cf8a6042285e10c6d17ae04d560?s=128&d=identicon&r=PG&f=1", "display_name": "nlp", "link": "https://stackoverflow.com/users/7103445/nlp"}, "edited": false, "score": 0, "creation_date": 1547067574, "post_id": 54117873, "comment_id": 95069010, "body": "thanks for responding I was looking for something a little different - to add the values to the same dictionary each time and then return them all."}], "tags": [], "owner": {"reputation": 3437, "user_id": 313145, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c631212bfc0d30a62d7269dd04237c1b?s=128&d=identicon&r=PG", "display_name": "J&#246;rg Beyer", "link": "https://stackoverflow.com/users/313145/j%c3%b6rg-beyer"}, "is_accepted": false, "score": -1, "last_activity_date": 1547067341, "last_edit_date": 1547067341, "creation_date": 1547065848, "answer_id": 54117873, "question_id": 54117820, "link": "https://stackoverflow.com/questions/54117820/how-to-append-values-to-a-python-dictionary-and-return-it-in-a-function-call/54117873#54117873", "title": "How to append values to a python dictionary and return it in a function call", "body": "<p>you can give the dictionary as a parameter to your function.</p>\n\n<p>please not that your code is not working for me (original indention of the for loop - it's corrected now) and the len parameter). I needed to guess a little bit what you are actually doing. Could you take a look at your example code in the question or comment here?</p>\n\n<pre><code>def parser_code(result, length):\n   for i in range(length):\n       result['abc'] = 2*i\n       result['xyz'] = 10+i\n   return result\n\nd = {}\nparser_code(d, 3)\nprint(d)\nparser_code(d, 3)\nprint(d)\n</code></pre>\n\n<p>will give this output:</p>\n\n<pre><code>python3 ./main.py \n{'abc': 4, 'xyz': 12}\n{'abc': 4, 'xyz': 12}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 353, "user_id": 6061322, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c7794e286d79b07bd081e37e844e302?s=128&d=identicon&r=PG&f=1", "display_name": "NemoMeMeliorEst", "link": "https://stackoverflow.com/users/6061322/nemomemeliorest"}, "edited": false, "score": 0, "creation_date": 1547066729, "post_id": 54117942, "comment_id": 95068676, "body": "This is exactly what he wants yes instead of building his own custom dictionary"}, {"owner": {"reputation": 109, "user_id": 7103445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7a02cf8a6042285e10c6d17ae04d560?s=128&d=identicon&r=PG&f=1", "display_name": "nlp", "link": "https://stackoverflow.com/users/7103445/nlp"}, "edited": false, "score": 0, "creation_date": 1547067445, "post_id": 54117942, "comment_id": 95068962, "body": "Wow thanks. I did not know about <code>defaultdict</code>, this is helpful too for my usecase!"}], "tags": [], "owner": {"reputation": 837, "user_id": 5107872, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e125b4c3710fb30e0372c64daacd6268?s=128&d=identicon&r=PG&f=1", "display_name": "ahed87", "link": "https://stackoverflow.com/users/5107872/ahed87"}, "is_accepted": false, "score": 2, "last_activity_date": 1547067467, "last_edit_date": 1547067467, "creation_date": 1547066177, "answer_id": 54117942, "question_id": 54117820, "link": "https://stackoverflow.com/questions/54117820/how-to-append-values-to-a-python-dictionary-and-return-it-in-a-function-call/54117942#54117942", "title": "How to append values to a python dictionary and return it in a function call", "body": "<p>I think you are looking for <code>defaultdict</code> part of std-libs.</p>\n\n<pre><code>from collections import defaultdict\nglog = defaultdict(list)\ndef parser_code(dd):\n    for i in range(length):\n        dd['abc'].append(2*i)\n    return dd\n\nglog = parser_code(glog)\n</code></pre>\n\n<p>if you actually want to use your result you have to have make sure that the dict is not created new for every call to your function.</p>\n\n<p>still a bit unclear if you need a dict or not, you will only need that if you want the ability for key-lookup. If you are happy with just making a list (array) of numbers, then go ahead and use a list.</p>\n\n<pre><code>glog = list()\ndef parser_code(lst):\n    return lst + [2*i for i in range(length)]\nglog = parser_code(glog)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 109, "user_id": 7103445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7a02cf8a6042285e10c6d17ae04d560?s=128&d=identicon&r=PG&f=1", "display_name": "nlp", "link": "https://stackoverflow.com/users/7103445/nlp"}, "edited": false, "score": 0, "creation_date": 1547067411, "post_id": 54117997, "comment_id": 95068948, "body": "yes this worked, thanks a lot! I guess I was referring to something like this!"}], "tags": [], "owner": {"reputation": 547, "user_id": 8485506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hKJIC87AYRI/AAAAAAAAAAI/AAAAAAAAABs/rR6DiY2FIOQ/photo.jpg?sz=128", "display_name": "Jordan Singer", "link": "https://stackoverflow.com/users/8485506/jordan-singer"}, "is_accepted": true, "score": 2, "last_activity_date": 1547066362, "creation_date": 1547066362, "answer_id": 54117997, "question_id": 54117820, "link": "https://stackoverflow.com/questions/54117820/how-to-append-values-to-a-python-dictionary-and-return-it-in-a-function-call/54117997#54117997", "title": "How to append values to a python dictionary and return it in a function call", "body": "<p>I'm not 100% sure what behavior you're expecting, but I think this code should suffice:</p>\n\n<pre><code>def parser_code(length):\n  log = list()\n  for i in range(length):\n    this_dict = dict()\n    this_dict['abc'] = 2*i\n    this_dict['xyz'] = 10+i\n    log.append(this_dict)\n  return log\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 7103445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7a02cf8a6042285e10c6d17ae04d560?s=128&d=identicon&r=PG&f=1", "display_name": "nlp", "link": "https://stackoverflow.com/users/7103445/nlp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 0, "accepted_answer_id": 54117997, "answer_count": 3, "score": 0, "last_activity_date": 1547067467, "creation_date": 1547065650, "last_edit_date": 1547066977, "question_id": 54117820, "link": "https://stackoverflow.com/questions/54117820/how-to-append-values-to-a-python-dictionary-and-return-it-in-a-function-call", "title": "How to append values to a python dictionary and return it in a function call", "body": "<p>I have a for loop within a python function call that executes a number of times. I need to return the values in a dictionary to dump them into a db. </p>\n\n<p>Here is a piece of sample code, how can I append values to a dictionary and ensure I have all of them for further use.</p>\n\n<pre><code>def parser_code():\n    log = dict()\n    for i in range(len):\n        log['abc'] = 2*i\n        log['xyz'] = 10+i\n    return log\n</code></pre>\n\n<p>This will execute atleast twice so I want a dictionary to be log = <code>{['abc':2, 'xyz':11],['abc':3, 'xyz':12]}</code></p>\n\n<p>How can I append to the result each time?  Or is there a smarter way to do this? </p>\n"}, {"tags": ["python", "opencv"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 12264588, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mB4plA1TinDJeo3rydww1GmHT_kOVu15qkarpdyQA=k-s128", "display_name": "Hellblazer ", "link": "https://stackoverflow.com/users/12264588/hellblazer"}, "is_accepted": false, "score": -2, "last_activity_date": 1589549201, "creation_date": 1589549201, "answer_id": 61820416, "question_id": 54117819, "link": "https://stackoverflow.com/questions/54117819/opencv-imshow-function-opens-a-lot-of-windows-instead-of-replacing-the-frames/61820416#61820416", "title": "OpenCV &quot;imshow&quot; function opens a lot of windows instead of replacing the frames on one window - Python", "body": "<p>It opens only one window but seems as if its more than one because its capturing your own screen and displaying over that. Hence as soon as one window opens, your program captures the screen and displays a new frame on the stream and this process continues on which creates an effect of opening multiple windows. It might help if you capture one screen and display on another</p>\n"}, {"tags": [], "owner": {"reputation": 3597, "user_id": 4291264, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/cgB82.jpg?s=128&g=1", "display_name": "Manuel Schmitzberger", "link": "https://stackoverflow.com/users/4291264/manuel-schmitzberger"}, "is_accepted": false, "score": 0, "last_activity_date": 1607035362, "creation_date": 1607035362, "answer_id": 65135295, "question_id": 54117819, "link": "https://stackoverflow.com/questions/54117819/opencv-imshow-function-opens-a-lot-of-windows-instead-of-replacing-the-frames/65135295#65135295", "title": "OpenCV &quot;imshow&quot; function opens a lot of windows instead of replacing the frames on one window - Python", "body": "<p>For me this problem occurs, when I do not use the same name for the window.</p>\n<p><strong>A new window opens with each iteration (<code>i</code> is an iteration):</strong></p>\n<pre><code>cv2.imshow(i, image)\n</code></pre>\n<p><strong>A single window is used:</strong></p>\n<pre><code>cv2.imshow(&quot;Main&quot;, image)\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 10891904, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-SocZ3a0wzf0/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca9szJfDLLYQq_E3v98ni87WiaIyQ/mo/photo.jpg?sz=128", "display_name": "Adi Koch", "link": "https://stackoverflow.com/users/10891904/adi-koch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 334, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1607035362, "creation_date": 1547065645, "question_id": 54117819, "link": "https://stackoverflow.com/questions/54117819/opencv-imshow-function-opens-a-lot-of-windows-instead-of-replacing-the-frames", "title": "OpenCV &quot;imshow&quot; function opens a lot of windows instead of replacing the frames on one window - Python", "body": "<p>I have tried to capure my screen in real time (video) and show it with OpenCV in Python.</p>\n\n<p>When I run my code, it opens a lot of windows instead of replacing the frames on one window only.</p>\n\n<p>Please help :)</p>\n\n<p>Here is the code:</p>\n\n<pre><code>import numpy as np\nimport cv2\nfrom mss import mss\n\nsct = mss()\nmonitor = {'top': 0, 'left': 0, 'width': 1920, 'height': 1080}\n\nwhile True:\n    img = sct.grab(monitor)\n    cv2.imshow(\"Netstream\", np.array(img))\n    if cv2.waitKey(1) &amp; 0xFF == ord('q'):\n        break\ncv2.destroyAllWindows()\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 547, "user_id": 8485506, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hKJIC87AYRI/AAAAAAAAAAI/AAAAAAAAABs/rR6DiY2FIOQ/photo.jpg?sz=128", "display_name": "Jordan Singer", "link": "https://stackoverflow.com/users/8485506/jordan-singer"}, "edited": false, "score": 1, "creation_date": 1547065275, "post_id": 54117680, "comment_id": 95068054, "body": "Did you look at the output of <code>np.min(d.keys())</code>? It doesn&#39;t return a scalar."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 10469236, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6lFVolVV7S0/AAAAAAAAAAI/AAAAAAAAABw/31T69qw5w04/photo.jpg?sz=128", "display_name": "Migdalin HasNoLastName", "link": "https://stackoverflow.com/users/10469236/migdalin-hasnolastname"}, "edited": false, "score": 0, "creation_date": 1547124332, "post_id": 54117725, "comment_id": 95089126, "body": "I would only be calling pop inside a loop.  But using standard min will fix it.  I saw the min(a,b) variant in the docs, but somehow missed the min(iterable)."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 3, "last_activity_date": 1547065249, "creation_date": 1547065249, "answer_id": 54117725, "question_id": 54117680, "link": "https://stackoverflow.com/questions/54117680/how-to-convert-dict-keys-to-an-integer/54117725#54117725", "title": "How to convert dict_keys to an integer", "body": "<p>You don't need to convert <code>dict_keys</code> to <code>int</code>. That's not a thing that makes sense, anyway. Your problem is that <code>np.min</code> needs a sequence, and the return value of <code>d.keys()</code> is not a sequence.</p>\n\n<p>For taking the minimum of an iterable, use the regular Python <a href=\"https://docs.python.org/3/library/functions.html#min\" rel=\"nofollow noreferrer\"><code>min</code></a>, not <code>np.min</code>. However, calling <code>min</code> in a loop is an inefficient way to do things. <a href=\"https://docs.python.org/3/library/heapq.html#heapq.nsmallest\" rel=\"nofollow noreferrer\"><code>heapq.nsmallest</code></a> could help, or you could find a better data structure than a dict.</p>\n"}, {"tags": [], "owner": {"reputation": 21140, "user_id": 3821154, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/RYr9X.jpg?s=128&g=1", "display_name": "mdurant", "link": "https://stackoverflow.com/users/3821154/mdurant"}, "is_accepted": false, "score": 0, "last_activity_date": 1547065337, "creation_date": 1547065337, "answer_id": 54117751, "question_id": 54117680, "link": "https://stackoverflow.com/questions/54117680/how-to-convert-dict-keys-to-an-integer/54117751#54117751", "title": "How to convert dict_keys to an integer", "body": "<p>You want a list is you want to use numpy:</p>\n\n<pre><code>minId = np.min(list(d))\n</code></pre>\n\n<p>but actually you can use the builtin <code>min</code> here, which nows how to iterate, and for a dict, the iteration happens over keys anyway</p>\n\n<pre><code>minId = min(d)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 10469236, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6lFVolVV7S0/AAAAAAAAAAI/AAAAAAAAABw/31T69qw5w04/photo.jpg?sz=128", "display_name": "Migdalin HasNoLastName", "link": "https://stackoverflow.com/users/10469236/migdalin-hasnolastname"}, "edited": false, "score": 0, "creation_date": 1547124460, "post_id": 54117817, "comment_id": 95089191, "body": "I don&#39;t have enough reputation to up-vote.  It&#39;s good to know about the OrderedDict, though for my situation, I think python min() on a regular dictionary will suffice."}], "tags": [], "owner": {"reputation": 4159, "user_id": 8212173, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5ApXfoDEeNA/AAAAAAAAAAI/AAAAAAAAADc/9wpTVfHMarU/photo.jpg?sz=128", "display_name": "amanb", "link": "https://stackoverflow.com/users/8212173/amanb"}, "is_accepted": false, "score": 0, "last_activity_date": 1547068699, "last_edit_date": 1547068699, "creation_date": 1547065610, "answer_id": 54117817, "question_id": 54117680, "link": "https://stackoverflow.com/questions/54117680/how-to-convert-dict-keys-to-an-integer/54117817#54117817", "title": "How to convert dict_keys to an integer", "body": "<p>You could use an <a href=\"https://docs.python.org/3/library/collections.html#ordereddict-objects\" rel=\"nofollow noreferrer\">OrderedDict</a> and <code>pop</code> the oldest key-value pair. An advantage to use an <code>OrderedDict</code> is that it remembers the order that keys were first inserted. In this code, the first key will always be the minimum in the <code>OrderedDict</code> d. When you use <code>popitem(last=False)</code>, it simply removes the oldest or first key-value pair.</p>\n\n<pre><code>from collections import OrderedDict\n\nd = OrderedDict()\nfor i in range(100):\n    d[i] = i+10\nd.popitem(last=False) #removes the earliest key-value pair from the dict\nprint(d) \n</code></pre>\n\n<p>If you'd like to remove the oldest 5 key-value pairs, extract these key-value pairs into a list of tuples and then use <code>popitem(last=False)</code> again to remove them from the top(heap analogy):</p>\n\n<pre><code>a = list(d.items())[:5] #get the first 5 key-value pairs in a list of tuples\nfor i in a:\n    if i in d.items():        \n        print(\"Item {} popped from dictionary.\".format(i))\n        d.popitem(last=False)\n\n#Output:\nItem (0, 10) popped from dictionary.\nItem (1, 11) popped from dictionary.\nItem (2, 12) popped from dictionary.\nItem (3, 13) popped from dictionary.\nItem (4, 14) popped from dictionary.\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 10469236, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6lFVolVV7S0/AAAAAAAAAAI/AAAAAAAAABw/31T69qw5w04/photo.jpg?sz=128", "display_name": "Migdalin HasNoLastName", "link": "https://stackoverflow.com/users/10469236/migdalin-hasnolastname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1369, "favorite_count": 0, "accepted_answer_id": 54117725, "answer_count": 3, "score": 0, "last_activity_date": 1547068699, "creation_date": 1547065072, "question_id": 54117680, "link": "https://stackoverflow.com/questions/54117680/how-to-convert-dict-keys-to-an-integer", "title": "How to convert dict_keys to an integer", "body": "<p>I have a dictionary where the keys are integers, and are in sequence.  From time to time, I need to remove older entries from the dictionary.  However, when I try to do this, I run into a \"dict_keys\" error.  </p>\n\n<pre><code>    '&lt;=' not supported between instances of 'dict_keys' and 'int'\n</code></pre>\n\n<p>When I try to cast the value to an int, I'm told that's not supported.</p>\n\n<pre><code>    int() argument must be a string, a bytes-like object or a number, not 'dict_keys'\n</code></pre>\n\n<p>I see answers here saying to use a list comprehension.  However, as there may be a million entries in this dictionary, I'm hoping there is some way to perform the cast without having to perform it on the entire list of keys.</p>\n\n<pre><code>\n    import numpy as np\n\n    d = dict()\n    for i in range(100):\n        d[i] = i+10\n\n    minId = int(np.min(d.keys()))\n    while(minId &lt;= 5):\n        d.pop(minId)\n        minId += 1\n\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "jupyter-notebook"], "comments": [{"owner": {"reputation": 166, "user_id": 10868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1076208012561920/picture?type=large", "display_name": "Andrew Ray", "link": "https://stackoverflow.com/users/10868875/andrew-ray"}, "edited": false, "score": 0, "creation_date": 1547065186, "post_id": 54117673, "comment_id": 95068017, "body": "not sure how this works, but you are just returning stuff currently, never actually calling print() on one of the functions that returns. That&#39;s why. print(f(x)) will give you that value."}, {"owner": {"reputation": 21140, "user_id": 3821154, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/RYr9X.jpg?s=128&g=1", "display_name": "mdurant", "link": "https://stackoverflow.com/users/3821154/mdurant"}, "edited": false, "score": 0, "creation_date": 1547065959, "post_id": 54117673, "comment_id": 95068363, "body": "You appear to want to call <code>plot()</code> 1000 times identically"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10891878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba7bce9e15b1ee571e6b677c1627657b?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Z", "link": "https://stackoverflow.com/users/10891878/steve-z"}, "edited": false, "score": 0, "creation_date": 1547065804, "post_id": 54117808, "comment_id": 95068296, "body": "Thanks for the quick reply! Already changed that but still no error/plot/print tho"}, {"owner": {"reputation": 21140, "user_id": 3821154, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/RYr9X.jpg?s=128&g=1", "display_name": "mdurant", "link": "https://stackoverflow.com/users/3821154/mdurant"}, "reply_to_user": {"reputation": 11, "user_id": 10891878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba7bce9e15b1ee571e6b677c1627657b?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Z", "link": "https://stackoverflow.com/users/10891878/steve-z"}, "edited": false, "score": 0, "creation_date": 1547065921, "post_id": 54117808, "comment_id": 95068347, "body": "Is it running??"}, {"owner": {"reputation": 11, "user_id": 10891878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba7bce9e15b1ee571e6b677c1627657b?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Z", "link": "https://stackoverflow.com/users/10891878/steve-z"}, "edited": false, "score": 0, "creation_date": 1547066457, "post_id": 54117808, "comment_id": 95068570, "body": "Used both jupyter notebook and spider, both ran and showed nothing"}, {"owner": {"reputation": 21140, "user_id": 3821154, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/RYr9X.jpg?s=128&g=1", "display_name": "mdurant", "link": "https://stackoverflow.com/users/3821154/mdurant"}, "reply_to_user": {"reputation": 11, "user_id": 10891878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba7bce9e15b1ee571e6b677c1627657b?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Z", "link": "https://stackoverflow.com/users/10891878/steve-z"}, "edited": false, "score": 0, "creation_date": 1547067443, "post_id": 54117808, "comment_id": 95068959, "body": "OK, but did it finish? The print statement only executes under a given condition, maybe that condition isn&#39;t reached. The plot won&#39;t happen with the range you give for the same reason as the text of this answer."}], "tags": [], "owner": {"reputation": 21140, "user_id": 3821154, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/RYr9X.jpg?s=128&g=1", "display_name": "mdurant", "link": "https://stackoverflow.com/users/3821154/mdurant"}, "is_accepted": false, "score": 2, "last_activity_date": 1547065552, "creation_date": 1547065552, "answer_id": 54117808, "question_id": 54117673, "link": "https://stackoverflow.com/questions/54117673/using-newtons-method-in-python-no-error-messages-but-does-not-print-plot/54117808#54117808", "title": "Using Newton&#39;s Method in Python, no error messages but does not print/plot", "body": "<p>The most obvious problem:</p>\n\n<pre><code>range (10^4,10^7, 10000)\n</code></pre>\n\n<p>gives no output. You should look up the definition of <code>range</code>: the third input is the step size, not the number of steps; and I suppose you wanted to use \"power\", <code>10**4</code>, <code>10**7</code>. The <code>^</code> symbol is bitwise XOR.</p>\n"}, {"tags": [], "owner": {"reputation": 1198, "user_id": 10643988, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mg2mD.jpg?s=128&g=1", "display_name": "Bill M.", "link": "https://stackoverflow.com/users/10643988/bill-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1547067920, "creation_date": 1547067920, "answer_id": 54118351, "question_id": 54117673, "link": "https://stackoverflow.com/questions/54117673/using-newtons-method-in-python-no-error-messages-but-does-not-print-plot/54118351#54118351", "title": "Using Newton&#39;s Method in Python, no error messages but does not print/plot", "body": "<p>I see several issues:</p>\n\n<ul>\n<li>As mdurant pointed out, your range needs some proper rewriting.</li>\n<li>Your first loop calls a <code>g(x)</code> function you don't have defined anywhere.</li>\n<li>Even after that though, your second loop is saying \"Let x be xnew, then add f(x) to the plot, and repeat that many times (without ever changing the value of x)\". </li>\n<li>Also, I think plt.plot() just adds data to the plot.  You need plt.show() to see the graph.  You may also want to define your plots axes, colors, etc.  Some sample scripts using matplotlib can show you the syntax.</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 10891878, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba7bce9e15b1ee571e6b677c1627657b?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Z", "link": "https://stackoverflow.com/users/10891878/steve-z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1547067920, "creation_date": 1547065056, "question_id": 54117673, "link": "https://stackoverflow.com/questions/54117673/using-newtons-method-in-python-no-error-messages-but-does-not-print-plot", "title": "Using Newton&#39;s Method in Python, no error messages but does not print/plot", "body": "<p>I'm trying to use Newton's method to approximate the root for the Colebrook equation with Python. Currently the code gives no error but also does not print/plot. I understand this could be an individual case and thanks for all the help in advance!\n<a href=\"https://i.stack.imgur.com/1xdZQ.jpg\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n\n<pre><code>numpy as np\nimport random\nimport matplotlib.pyplot as plt\n\n#Define Variables, k=e/D, E+04&lt;=x=Re&lt;=E+07\nk=0.0001\n\n#Define Colebrook function, f=x=independent variable\ndef f(x):\n    return -0.86*(np.log(( 2.51/(Re*np.sqrt(x))) + ( k/3.7))) - (1/np.sqrt(x))\n\n#Define derivative function by definition &amp; approximation\ndef derivative(f,x,h):\n    return (f(x + h) - f(x))/h\n\n#Newton's method approximation with initial gussed x value\nx=0.01\nfor Re in range (10^4,10^7, 10000):\n    m=derivative(f,x,h=0.01)\n    b=f(x)-m*x #y=mx+b\n    newx=-b/m #new x value determined by the tangent line\n    if abs(g(newx))&lt;= (1/10000000000):\n        print ('root =' + newx)\n    else:\n        x=newx\n\n#plot\nfor Re in range (10^4, 10^7,10000):\n    x=newx\n    plt.plot (f(x))   \n</code></pre>\n\n<p>I already know the root I'm looking for is approx. 0.03. </p>\n"}, {"tags": ["python", "python-3.x", "matlab"], "comments": [{"owner": {"reputation": 1185, "user_id": 9726179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b633bf2b2e7a37ea947f8bb5205e9037?s=128&d=identicon&r=PG&f=1", "display_name": "Ivo Merchiers", "link": "https://stackoverflow.com/users/9726179/ivo-merchiers"}, "edited": false, "score": 1, "creation_date": 1547068610, "post_id": 54117585, "comment_id": 95069492, "body": "For the people not as accustomed to matlab or misunderstanding what you are trying to achieve, maybe consider expanding on what you expect the code to achieve."}], "answers": [{"tags": [], "owner": {"reputation": 1185, "user_id": 9726179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b633bf2b2e7a37ea947f8bb5205e9037?s=128&d=identicon&r=PG&f=1", "display_name": "Ivo Merchiers", "link": "https://stackoverflow.com/users/9726179/ivo-merchiers"}, "is_accepted": false, "score": 0, "last_activity_date": 1547068869, "last_edit_date": 1547068869, "creation_date": 1547068261, "answer_id": 54118425, "question_id": 54117585, "link": "https://stackoverflow.com/questions/54117585/how-can-i-implement-structure-array-like-matlab-in-python/54118425#54118425", "title": "How can i implement structure array like matlab in python?", "body": "<p>Although you can do this in Python (as I explain below), it might not be the best or most pythonic approach. For other users that have to look at your code (including yourself in 3 months) this syntax is extremely confusing. Think for example about how this deals with name conflicts, undefined values and iterating over properties.</p>\n\n<p>Instead consider storing the data in a data structure that is better suited for this such as a <a href=\"https://www.tutorialspoint.com/python/python_dictionary.htm\" rel=\"nofollow noreferrer\">dictionary</a>. Then you can just store everything in</p>\n\n<pre><code>cluster = {'c':[],'indiv':[]}\n</code></pre>\n\n<hr>\n\n<p><strong>Imitating Matlab in a bad way</strong>:</p>\n\n<p>You can assign properties to any mutable objects in python.\nIf you need an object just for data storage, then you can define a custom class without any functionality in the following way:</p>\n\n<pre><code>class CustomStruct():\n    pass\n</code></pre>\n\n<p>Then you can have</p>\n\n<pre><code>struct=CustomStruct()\nstruct.c=[]\n</code></pre>\n\n<p>and change or request properties of the class in this way.</p>\n\n<p><strong>Better approach:</strong></p>\n\n<p>If you really want to store these things as properties of an object, then it might be best to define the variables in the init of that class.</p>\n\n<pre><code>class BetterStruct():\n    def __init__(self):\n        self.c=[]\n        self.indiv=[]\n</code></pre>\n\n<p>In this way, users looking at your code can immediately understand the expected values, and you can guarantee that they are initalised in a proper fashion.</p>\n\n<p><strong>Allowing data control</strong></p>\n\n<p>If you want to verify the data when it is stored, or if it has to be calculated once the user requests it (instead of storing it constantly), then consider using <a href=\"https://www.programiz.com/python-programming/property\" rel=\"nofollow noreferrer\">Python property decorators</a></p>\n"}], "owner": {"reputation": 9, "user_id": 10891838, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MZdt5.jpg?s=128&g=1", "display_name": "alireza", "link": "https://stackoverflow.com/users/10891838/alireza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1549635598, "creation_date": 1547064673, "last_edit_date": 1549635598, "question_id": 54117585, "link": "https://stackoverflow.com/questions/54117585/how-can-i-implement-structure-array-like-matlab-in-python", "title": "How can i implement structure array like matlab in python?", "body": "<p>How can i implement  structure array like matlab in python ?</p>\n\n<p>matlab code :</p>\n\n<pre><code>cluster.c=[]\ncluster.indiv=[]\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 166, "user_id": 10868875, "user_type": "registered", "profile_image": "https://graph.facebook.com/1076208012561920/picture?type=large", "display_name": "Andrew Ray", "link": "https://stackoverflow.com/users/10868875/andrew-ray"}, "edited": false, "score": 1, "creation_date": 1547064897, "post_id": 54117563, "comment_id": 95067914, "body": "is the dictionary&#39;s purpose to display all (x, y) of a particular legend status (active)?"}], "answers": [{"tags": [], "owner": {"reputation": 11589, "user_id": 1128047, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/23e6238b3a165e043c3d25d40b7cceda?s=128&d=identicon&r=PG", "display_name": "Jonah Bishop", "link": "https://stackoverflow.com/users/1128047/jonah-bishop"}, "is_accepted": true, "score": 2, "last_activity_date": 1547065086, "creation_date": 1547065086, "answer_id": 54117684, "question_id": 54117563, "link": "https://stackoverflow.com/questions/54117563/split-dictionary-into-multiple-dictionaries-by-indices-of-one-of-dictionarys-va/54117684#54117684", "title": "Split dictionary into multiple dictionaries by indices of one of dictionary&#39;s value", "body": "<p>Here's one way I might approach it:</p>\n\n<pre><code>result = {}\nfor x in zip(data['x'], data['y'], data['legend']):\n    result.setdefault(x[2], []).append(x[:2])\n\n# result will look like the following:\n# {\n#    'active': [(1, 10), (4, 40), (8, 80), ...],\n#    ...\n# }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": false, "score": 0, "last_activity_date": 1547065104, "creation_date": 1547065104, "answer_id": 54117688, "question_id": 54117563, "link": "https://stackoverflow.com/questions/54117563/split-dictionary-into-multiple-dictionaries-by-indices-of-one-of-dictionarys-va/54117688#54117688", "title": "Split dictionary into multiple dictionaries by indices of one of dictionary&#39;s value", "body": "<p>If I'm understanding correctly, it looks like you are trying to get <code>list</code>s of <code>x</code> and <code>y</code> corresponding to a <code>legend</code> entry. You can do that using <code>zip</code> to collect everything together. Note, this will require <code>len(x)==len(y)==len(legend)</code>:</p>\n\n<pre><code>from collections import defaultdict\n\ntriples = zip(data['legend'], data['x'], data['y'])\ntrace = defaultdict(list)\n\nfor legend, x, y in triples:\n    trace[legend].append((x,y))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16399, "user_id": 4016285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SvSVV.png?s=128&g=1", "display_name": "B. M.", "link": "https://stackoverflow.com/users/4016285/b-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1547068423, "last_edit_date": 1547068423, "creation_date": 1547066801, "answer_id": 54118098, "question_id": 54117563, "link": "https://stackoverflow.com/questions/54117563/split-dictionary-into-multiple-dictionaries-by-indices-of-one-of-dictionarys-va/54118098#54118098", "title": "Split dictionary into multiple dictionaries by indices of one of dictionary&#39;s value", "body": "<p>I invite you to meet <code>pandas</code>, which simplify such frequent needs :</p>\n\n<pre><code>import pandas as pd\ndf=pd.DataFrame(data).set_index(\"legend\").sort_index()\nprint(df)\n            x    y\nlegend            \nactive      1   10\nactive      4   40\nactive      8   80\nactive     10  100\ncompleted   5   50\ncompleted   9   90\npending     2   20\npending     3   30\npending     6   60\npending     7   70\n</code></pre>\n\n<p>Then it's easy to access all sub parts :</p>\n\n<pre><code>&gt;&gt;&gt; df.loc['active','x']\n\nlegend\nactive     1\nactive     4\nactive     8\nactive    10\nName: x, dtype: int64  \n</code></pre>\n\n<p>You can come back to a more familiar form :</p>\n\n<pre><code>&gt;&gt;&gt; { leg:{ key:list(df.loc[leg,key]) for key in df.columns} for leg in df.index.unique()}  \n\n{'active': {'x': [1, 4, 8, 10], 'y': [10, 40, 80, 100]},\n 'completed': {'x': [5, 9], 'y': [50, 90]},\n 'pending': {'x': [2, 3, 6, 7], 'y': [20, 30, 60, 70]}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 461, "user_id": 4356506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8368ff96dbdb44928059bc3ce89b0c55?s=128&d=identicon&r=PG", "display_name": "0e1val", "link": "https://stackoverflow.com/users/4356506/0e1val"}, "is_accepted": false, "score": 0, "last_activity_date": 1547067214, "last_edit_date": 1547067214, "creation_date": 1547066867, "answer_id": 54118116, "question_id": 54117563, "link": "https://stackoverflow.com/questions/54117563/split-dictionary-into-multiple-dictionaries-by-indices-of-one-of-dictionarys-va/54118116#54118116", "title": "Split dictionary into multiple dictionaries by indices of one of dictionary&#39;s value", "body": "<p>Here's what I got:</p>\n\n<pre><code>from itertools import groupby\nfrom collections import namedtuple\n\ndtype = namedtuple('dtype', ['legend', 'x', 'y'])\nsorted_legends = sorted((dtype(*l) for l in zip(data['legend'], data['x'], \n    data['y'])))\n\nfor k,v in groupby(sorted_legends, key=lambda x:x.legend):\n    x, y = [], []\n    for i in v:\n        x.append(i[1])\n        y.append(i[2])\n    print({'x': x, 'y': y})\n</code></pre>\n\n<p>I've used a <a href=\"https://docs.python.org/2/library/collections.html#collections.namedtuple\" rel=\"nofollow noreferrer\">namedtuple</a> which is really great fro maintainable code(might be a bit of and overkill for your request).</p>\n"}], "owner": {"reputation": 2344, "user_id": 8461786, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/55878061e134ad81c5d169881b3c6d2e?s=128&d=identicon&r=PG&f=1", "display_name": "barciewicz", "link": "https://stackoverflow.com/users/8461786/barciewicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 54117684, "answer_count": 4, "score": 3, "last_activity_date": 1547068423, "creation_date": 1547064567, "question_id": 54117563, "link": "https://stackoverflow.com/questions/54117563/split-dictionary-into-multiple-dictionaries-by-indices-of-one-of-dictionarys-va", "title": "Split dictionary into multiple dictionaries by indices of one of dictionary&#39;s value", "body": "<p>What would be an elegant and efficient way to split the <code>data</code> dictionary into as many dictionaries as there are unique values in <code>data['legend']</code>, each dictionary representing a legend entry? All lists will always be in proper order.</p>\n\n<p>I am currentling using the below, but am interested if there is a shorter solution:</p>\n\n<pre><code>data = {\n    'x':  [1, 2, 3, 4, 5, 6, 7, 8, 9, 10],\n    'y': [10, 20, 30, 40, 50, 60, 70, 80, 90, 100],\n    'legend': [\"active\", \"pending\", \"pending\", \"active\", \"completed\", \"pending\", \"pending\",\"active\", \"completed\", \"active\"],\n    };\n\ntraces = [] \nunique_legend = list(set(data['legend']))\nfor item in unique_legend:\n    trace = {}\n    item_indices = [k for k,v in enumerate(data['legend']) if v == item]\n    trace['x'] = [data['x'][indice] for indice in item_indices]\n    trace['y'] = [data['y'][indice] for indice in item_indices]\n    traces.append(trace)\n\nfor trace in traces:\n    print(trace)\n</code></pre>\n"}, {"tags": ["python", "image", "scipy", "shift"], "comments": [{"owner": {"reputation": 1145, "user_id": 10322652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ea8a8d2082f7abea596dfd001b31b9?s=128&d=identicon&r=PG&f=1", "display_name": "Cheche", "link": "https://stackoverflow.com/users/10322652/cheche"}, "edited": false, "score": 0, "creation_date": 1547064673, "post_id": 54117549, "comment_id": 95067821, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/930397/getting-the-last-element-of-a-list-in-python\">Getting the last element of a list in Python</a>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1547064677, "post_id": 54117549, "comment_id": 95067823, "body": "It&#39;s <a href=\"https://www.numpy.org/devdocs/reference/generated/numpy.reshape.html#numpy.reshape\" rel=\"nofollow noreferrer\">explicitly documented</a>...."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1547064678, "post_id": 54117549, "comment_id": 95067824, "body": "<code>[12]</code> is a list containing one element: <code>12</code>. Same for your minus one value (cannot type it, SO prevents it)"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1547064703, "post_id": 54117549, "comment_id": 95067841, "body": "Both of those dupes are very wrong"}, {"owner": {"reputation": 214708, "user_id": 201359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7odj.jpg?s=128&g=1", "display_name": "&#211;scar L&#243;pez", "link": "https://stackoverflow.com/users/201359/%c3%93scar-l%c3%b3pez"}, "edited": false, "score": 1, "creation_date": 1547064710, "post_id": 54117549, "comment_id": 95067846, "body": "@JETM that&#39;s wrong..."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1547064785, "post_id": 54117549, "comment_id": 95067875, "body": "&quot;The new shape should be compatible with the original shape. If an integer, then the result will be a 1-D array of that length. One shape dimension can be -1. In this case, the value is inferred from the length of the array and remaining dimensions.&quot;"}, {"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1547064898, "post_id": 54117549, "comment_id": 95067915, "body": "From the docs &quot;One shape dimension can be -1. In this case, the value is inferred from the length of the array and remaining dimensions.&quot; In general <code>-1</code> can have different special meanings: the last item as an index, no value as seen above, negative result in <code>string.find()</code>..."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1547066589, "post_id": 54117549, "comment_id": 95068621, "body": "To be more specific: <code>shifted_image.reshape([-1])</code> flattens the 2-d image into a 1-d array.  A more &quot;numpythonic&quot; way to do that is <code>shifted_image.ravel()</code>."}], "answers": [{"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1547064952, "post_id": 54117620, "comment_id": 95067940, "body": "This doesn&#39;t explain at all what it <i>does</i>, though"}], "tags": [], "owner": {"reputation": 214708, "user_id": 201359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7odj.jpg?s=128&g=1", "display_name": "&#211;scar L&#243;pez", "link": "https://stackoverflow.com/users/201359/%c3%93scar-l%c3%b3pez"}, "is_accepted": false, "score": 1, "last_activity_date": 1547065337, "last_edit_date": 1547065337, "creation_date": 1547064789, "answer_id": 54117620, "question_id": 54117549, "link": "https://stackoverflow.com/questions/54117549/general-question-about-the-significance-of-1/54117620#54117620", "title": "General question about the significance of -1", "body": "<p>This line:</p>\n\n<pre><code>shifted_image.reshape([-1])\n</code></pre>\n\n<p>Is simply calling the <a href=\"https://www.numpy.org/devdocs/reference/generated/numpy.reshape.html#numpy.reshape\" rel=\"nofollow noreferrer\"><code>reshape</code></a> method with a list as parameter, and the list happens to contain a single element, the number <code>-1</code>. This has the effect of reshaping the numpy array. From the docs:</p>\n\n<blockquote>\n  <p>One shape dimension can be -1. In this case, the value is inferred from the length of the array and remaining dimensions</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1547065191, "post_id": 54117669, "comment_id": 95068018, "body": "My goodness, the number of incorrect dupes and answers thrown about on this question! I&#39;m on my phone so couldn&#39;t answer, thankfully we got there :)"}, {"owner": {"reputation": 5380, "user_id": 10618540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Od4aq.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/10618540/paritosh-singh"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1547065306, "post_id": 54117669, "comment_id": 95068067, "body": "Haha, well, better late than never eh? I&#39;m a slow typer i&#39;m afraid. Oh well!"}, {"owner": {"reputation": 7, "user_id": 10478511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc9152f62c7fd23070b56f3b1e781e91?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/10478511/rob"}, "edited": false, "score": 1, "creation_date": 1547066500, "post_id": 54117669, "comment_id": 95068584, "body": "Aha! Pretty new to programming so I&#39;m still learning the ropes when it comes to reading through the documentation. Thanks for the help!"}], "tags": [], "owner": {"reputation": 5380, "user_id": 10618540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Od4aq.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/10618540/paritosh-singh"}, "is_accepted": true, "score": 2, "last_activity_date": 1547065030, "creation_date": 1547065030, "answer_id": 54117669, "question_id": 54117549, "link": "https://stackoverflow.com/questions/54117549/general-question-about-the-significance-of-1/54117669#54117669", "title": "General question about the significance of -1", "body": "<p>In numpy arrays, <a href=\"https://www.numpy.org/devdocs/reference/generated/numpy.reshape.html#numpy.reshape\" rel=\"nofollow noreferrer\"><code>reshape</code></a> Allows you to \"infer\" one of the dimensions when trying to reshape an array. </p>\n\n<pre><code>import numpy as np\na = np.arange(4).reshape(2,2)\n#Output:\narray([[0, 1],\n       [2, 3]])\na.reshape([-1])\n#Output:\narray([0, 1, 2, 3])\n</code></pre>\n\n<p>If you notice, you can also rewrite the first reshape using inference as follows:</p>\n\n<pre><code>b =np.arange(4).reshape(2,-1)\n#Output:\narray([[0, 1],\n       [2, 3]])\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 10478511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc9152f62c7fd23070b56f3b1e781e91?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/10478511/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 54117669, "answer_count": 2, "score": 0, "last_activity_date": 1547065337, "creation_date": 1547064487, "question_id": 54117549, "link": "https://stackoverflow.com/questions/54117549/general-question-about-the-significance-of-1", "title": "General question about the significance of -1", "body": "<p>I'm working on a problem in a machine learning and I see [-1] popping up somewhat frequently in difference places of the code but I can't seem to understand the significance of it.</p>\n\n<p>In this particular example, the goal is to slightly shift all images in the training set.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>from scipy.ndimage.interpolation import shift\n\ndef shift_image(image, dx, dy):\n    image = image.reshape((28, 28))\n    shifted_image = shift(image, [dy, dx], cval=0, mode=\"constant\")\n    return shifted_image.reshape([-1])\n</code></pre>\n\n<p>What is the significance of the -1 in the last line?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "edited": false, "score": 2, "creation_date": 1547064776, "post_id": 54117545, "comment_id": 95067872, "body": "If you&#39;re using python3 that should be <code>from . import _library as library</code>"}, {"owner": {"reputation": 1843, "user_id": 1436508, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh3.googleusercontent.com/-p4GumfwGZus/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i9vW1oPm_00XtAVO06i_X9sWp2sA/mo/photo.jpg?sz=128", "display_name": "raaj", "link": "https://stackoverflow.com/users/1436508/raaj"}, "reply_to_user": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "edited": false, "score": 0, "creation_date": 1547064924, "post_id": 54117545, "comment_id": 95067928, "body": "where do i actually do this line?"}, {"owner": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "edited": false, "score": 0, "creation_date": 1547065076, "post_id": 54117545, "comment_id": 95067985, "body": "In your <code>__init__.py</code>?"}, {"owner": {"reputation": 1843, "user_id": 1436508, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh3.googleusercontent.com/-p4GumfwGZus/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i9vW1oPm_00XtAVO06i_X9sWp2sA/mo/photo.jpg?sz=128", "display_name": "raaj", "link": "https://stackoverflow.com/users/1436508/raaj"}, "reply_to_user": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "edited": false, "score": 0, "creation_date": 1547065099, "post_id": 54117545, "comment_id": 95067990, "body": "Okay, but now when I try to use library from an external file it doesn&#39;t find it. I want to be able to use library in another file that isn&#39;t in the library folder"}, {"owner": {"reputation": 1843, "user_id": 1436508, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh3.googleusercontent.com/-p4GumfwGZus/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i9vW1oPm_00XtAVO06i_X9sWp2sA/mo/photo.jpg?sz=128", "display_name": "raaj", "link": "https://stackoverflow.com/users/1436508/raaj"}, "reply_to_user": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "edited": false, "score": 0, "creation_date": 1547065471, "post_id": 54117545, "comment_id": 95068146, "body": "Okay, so within the <b>init</b>.py I am able to import library, But after that I cannot access the variable outside of that"}], "owner": {"reputation": 1843, "user_id": 1436508, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh3.googleusercontent.com/-p4GumfwGZus/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-i9vW1oPm_00XtAVO06i_X9sWp2sA/mo/photo.jpg?sz=128", "display_name": "raaj", "link": "https://stackoverflow.com/users/1436508/raaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547064474, "creation_date": 1547064474, "question_id": 54117545, "link": "https://stackoverflow.com/questions/54117545/python-library-init-py-not-importing-so-file", "title": "Python Library - __init__.py not importing .so file", "body": "<p>I have a python library generated as a .so file</p>\n\n<p>My directory structure looks like this:</p>\n\n<pre><code>myfolder\n    library\n        __init__.py\n        _library.so\n</code></pre>\n\n<p>My <strong>init</strong>.py contains:</p>\n\n<pre><code>import _library as library\n</code></pre>\n\n<p>Now, when I am in myfolder and I do</p>\n\n<pre><code>import library\n</code></pre>\n\n<p>it says _library is not found. Why is this the case? How do i do this correctly?</p>\n\n<p>If I navigate directly into library and i import _library it works</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 2, "creation_date": 1547064844, "post_id": 54117532, "comment_id": 95067894, "body": "Please edit your question to include the code <i>as text</i>. A picture of code doesn&#39;t help anyone. (The result table is still helpful and fine to leave as a picture, however.)"}], "answers": [{"tags": [], "owner": {"reputation": 1220, "user_id": 5374924, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aa54cc104058240bb4359adf36d1830?s=128&d=identicon&r=PG&f=1", "display_name": "Ananay Mital", "link": "https://stackoverflow.com/users/5374924/ananay-mital"}, "is_accepted": false, "score": 0, "last_activity_date": 1547071557, "last_edit_date": 1547071557, "creation_date": 1547065191, "answer_id": 54117706, "question_id": 54117532, "link": "https://stackoverflow.com/questions/54117532/how-to-remove-lines-which-start-with-something-in-python/54117706#54117706", "title": "How to remove lines which start with something in Python?", "body": "<pre><code>dataset[dataset[\"InvoiceNo\"].str[0] != \"C\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "is_accepted": true, "score": 1, "last_activity_date": 1547065292, "creation_date": 1547065292, "answer_id": 54117739, "question_id": 54117532, "link": "https://stackoverflow.com/questions/54117532/how-to-remove-lines-which-start-with-something-in-python/54117739#54117739", "title": "How to remove lines which start with something in Python?", "body": "<p>If you could provide some sample data in plain text, it would help me test this, but I believe this should do the trick.</p>\n\n<pre><code>dataset = dataset.loc[dataset.InvoiceNo.str[0] != 'C'].copy()\n</code></pre>\n\n<p>Basically select those rows where <code>dataset.InvoiceNo</code> does <em>not</em> start with the letter C, and then reassign your dataset to a copy of just those rows (throw everything else out).</p>\n"}, {"tags": [], "owner": {"reputation": 4815, "user_id": 704028, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/64accf9ad1449326ae9f62e0f9e387c5?s=128&d=identicon&r=PG&f=1", "display_name": "tmaric", "link": "https://stackoverflow.com/users/704028/tmaric"}, "is_accepted": false, "score": 1, "last_activity_date": 1547065805, "creation_date": 1547065805, "answer_id": 54117862, "question_id": 54117532, "link": "https://stackoverflow.com/questions/54117532/how-to-remove-lines-which-start-with-something-in-python/54117862#54117862", "title": "How to remove lines which start with something in Python?", "body": "<p>You can exclude any line starting with a comment when reading a file in pandas. For excel: </p>\n\n<pre><code>dataset = pd.read_excel('OnlineRetail2.xlsx', comment=\"C\")\n</code></pre>\n\n<p>Search for 'comment' <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_excel.html\" rel=\"nofollow noreferrer\">in the 'read_excel' documentation</a>.</p>\n"}], "owner": {"reputation": 902, "user_id": 6742913, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4e2172309ade0356eaf5672821b1ec40?s=128&d=identicon&r=PG&f=1", "display_name": "Dakata", "link": "https://stackoverflow.com/users/6742913/dakata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 54117739, "answer_count": 3, "score": -1, "last_activity_date": 1547071557, "creation_date": 1547064424, "last_edit_date": 1547065102, "question_id": 54117532, "link": "https://stackoverflow.com/questions/54117532/how-to-remove-lines-which-start-with-something-in-python", "title": "How to remove lines which start with something in Python?", "body": "<p>I need to remove all lines, which start with the letter \"C\" in the column\"InvoiceNo\".cI couldn't find an answer here that is why  I would appreciate any help. \n<a href=\"https://i.stack.imgur.com/hLVOr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hLVOr.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nimport csv\nfrom matplotlib import pyplot as plt\nimport xlsxwriter\nimport re\n\n\ndataset = pd.read_excel('OnlineRetail2.xlsx')\ndataset.head()\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 280, "user_id": 10817377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879d8990cccfc2856cf1ca6279a7afda?s=128&d=identicon&r=PG&f=1", "display_name": "I Funball", "link": "https://stackoverflow.com/users/10817377/i-funball"}, "edited": false, "score": 0, "creation_date": 1547064644, "post_id": 54117513, "comment_id": 95067806, "body": "Are you sure it&#39;s running twice?"}, {"owner": {"reputation": 5380, "user_id": 10618540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Od4aq.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/10618540/paritosh-singh"}, "edited": false, "score": 0, "creation_date": 1547064645, "post_id": 54117513, "comment_id": 95067807, "body": "why do you think it runs twice? ranges are right exclusive. <code>range(1)</code> will only produce <code>i=0</code> and stop afterwards. remove the <code>-1</code> from <code>len(entities)-1</code>."}, {"owner": {"reputation": 1167, "user_id": 9462009, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Endyd", "link": "https://stackoverflow.com/users/9462009/endyd"}, "edited": false, "score": 0, "creation_date": 1547064681, "post_id": 54117513, "comment_id": 95067826, "body": "The loop itself is only running once, but you are calling <code>CheckCollision()</code> twice because within the method <code>Move()</code>, you call <code>CheckCollision()</code> twice (the two <code>if</code> statements)."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10891829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P1vDwESZUYE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY2HNy7ZMw9DG5_16ckRZ90IvTazg/mo/photo.jpg?sz=128", "display_name": "John C. Jameson", "link": "https://stackoverflow.com/users/10891829/john-c-jameson"}, "edited": false, "score": 1, "creation_date": 1547065294, "post_id": 54117617, "comment_id": 95068061, "body": "thank you so much. I fixed the code as you suggested."}, {"owner": {"reputation": 1167, "user_id": 9462009, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Endyd", "link": "https://stackoverflow.com/users/9462009/endyd"}, "edited": false, "score": 0, "creation_date": 1547065468, "post_id": 54117617, "comment_id": 95068143, "body": "Be aware, the code change suggestions in this answer will check for collision with itself, which will always be true. You need to make sure within checkCollision() that you iterate through every entity but skip the <code>self</code> entity."}, {"owner": {"reputation": 1886, "user_id": 7619260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39d95b317e58de03fe052a9fca2355b7?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Godfrey", "link": "https://stackoverflow.com/users/7619260/calvin-godfrey"}, "reply_to_user": {"reputation": 1167, "user_id": 9462009, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Endyd", "link": "https://stackoverflow.com/users/9462009/endyd"}, "edited": false, "score": 0, "creation_date": 1547065604, "post_id": 54117617, "comment_id": 95068208, "body": "@Endyd I actually believe it already takes measures to prevent that. in <code>Move</code>, it updates <code>new_x_pos</code> and <code>new_y_pos</code>, and doesn&#39;t set <code>y_pos</code> and <code>x_pos</code>  until AFTER it checks collision. Because it calls <code>CheckCollision</code> with <code>self</code>, <code>entity1</code> is actually <code>self</code> the whole time, and so no collisoin will occur."}, {"owner": {"reputation": 1886, "user_id": 7619260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39d95b317e58de03fe052a9fca2355b7?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Godfrey", "link": "https://stackoverflow.com/users/7619260/calvin-godfrey"}, "reply_to_user": {"reputation": 13, "user_id": 10891829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P1vDwESZUYE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY2HNy7ZMw9DG5_16ckRZ90IvTazg/mo/photo.jpg?sz=128", "display_name": "John C. Jameson", "link": "https://stackoverflow.com/users/10891829/john-c-jameson"}, "edited": false, "score": 0, "creation_date": 1547065656, "post_id": 54117617, "comment_id": 95068229, "body": "@JohnC.Jameson I&#39;m glad that my suggestions helped you, but Endyd&#39;s answer is DEFINITELY better and more idiomatic code. I would definitely take their changes into account."}, {"owner": {"reputation": 1167, "user_id": 9462009, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Endyd", "link": "https://stackoverflow.com/users/9462009/endyd"}, "edited": false, "score": 0, "creation_date": 1547066075, "post_id": 54117617, "comment_id": 95068411, "body": "@CalvinGodfrey, yes <code>entity1</code> will always be <code>self</code>, but <code>entity</code> within the for loop can also be <code>self</code> if OP fixes the <code>range()</code> issue. And then if <code>Move(0,0)</code> is called on an entity, its <code>x_pos</code> will equal <code>new_x_pos</code> and <code>y_pos</code> will also equal its own <code>new_y_pos</code> and cause a collision even though a 0,0 move should not cause any collisions. Also, the method should do what it is meant to do, which, I assume, is to check for collisions against other entities."}, {"owner": {"reputation": 1886, "user_id": 7619260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39d95b317e58de03fe052a9fca2355b7?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Godfrey", "link": "https://stackoverflow.com/users/7619260/calvin-godfrey"}, "reply_to_user": {"reputation": 1167, "user_id": 9462009, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Endyd", "link": "https://stackoverflow.com/users/9462009/endyd"}, "edited": false, "score": 1, "creation_date": 1547066175, "post_id": 54117617, "comment_id": 95068453, "body": "@Endyd Ah true, I didn&#39;t consider the case of <code>Move(0,0)</code>. I&#39;ll add that to my answer."}], "tags": [], "owner": {"reputation": 1886, "user_id": 7619260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39d95b317e58de03fe052a9fca2355b7?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Godfrey", "link": "https://stackoverflow.com/users/7619260/calvin-godfrey"}, "is_accepted": true, "score": 1, "last_activity_date": 1547066279, "last_edit_date": 1547066279, "creation_date": 1547064776, "answer_id": 54117617, "question_id": 54117513, "link": "https://stackoverflow.com/questions/54117513/index-of-for-loop-not-iterating-correctly/54117617#54117617", "title": "Index of for loop not iterating correctly", "body": "<p>There's a couple things wrong with your <code>for</code> loop. First of all, if the <code>y</code> positions match but the <code>x</code> values don't, nothing will happen. Barring this case, however, the <code>for</code> loop will always exit after the first iteration because if the positions coincide, <code>return True</code> is called (and by the way, because of the <code>return True</code>, you don't need <code>break</code> after it). And otherwise, it returns <code>False</code>.</p>\n\n<p>So inside <code>Move</code>, <code>CheckCollision</code> is called twice, once for each <code>if</code> statement, which is why <code>i</code> is printed twice, <code>0</code> both times.</p>\n\n<p>To fix it, you would have to have <code>CheckCollision</code> return <code>False</code> <strong>outside</strong> the <code>for</code> loop, so that it checks ALL the entities to make sure it doesn't collide with anything.</p>\n\n<p>The last thing to consider is that you never check that <code>entity1</code> and <code>entity</code> don't refer to the same object. There are some cases that would result in an entity colliding with itself! Without completely revising the method itself to be like the other answer, the only option to fix that would be some sort of unique <code>id</code> attached to each <code>entity</code>, but revising the method (as in the other answer) is DEFINITELY the better option.</p>\n\n<p>Also, stylistically, method names for classes should always start with a lower case letter (so your methods should be <code>move</code>, <code>checkCollision</code>, etc.).</p>\n\n<p><strong>EDIT:</strong> In this specific case, <code>i</code> will never go to <code>1</code> anyway. This is because <code>len(entities)</code> is <code>2</code>, so the <code>for</code> loop will go from <code>0</code> to <code>1</code>, NOT including the end, so no matter what it will stop after the first iteration. But if you had more entities, you would run into the problem described above.</p>\n"}, {"tags": [], "owner": {"reputation": 1167, "user_id": 9462009, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Endyd", "link": "https://stackoverflow.com/users/9462009/endyd"}, "is_accepted": false, "score": 1, "last_activity_date": 1547065262, "creation_date": 1547065262, "answer_id": 54117730, "question_id": 54117513, "link": "https://stackoverflow.com/questions/54117513/index-of-for-loop-not-iterating-correctly/54117730#54117730", "title": "Index of for loop not iterating correctly", "body": "<p>I've refactored your code so that the checkCollision method works the way I think you meant it. See comments within the code. I changed the name of the methods to start with lower case. </p>\n\n<pre><code>class Entity:\n    def __init__(self, x_pos, y_pos):\n        self.x_pos = x_pos\n        self.y_pos = y_pos\n        self.new_x_pos = x_pos\n        self.new_y_pos = y_pos\n\n    def move(self, x_move, y_move):\n        self.new_x_pos = self.x_pos + x_move\n        self.new_y_pos = self.y_pos + y_move\n        if self.checkCollision() is True:\n            # We don't update x_pos and y_pos here since collision means entity shouldn't move\n            print(\"collision\")\n            return False\n        else: # You need to use ELSE here so that you don't end up calling checkCollision twice\n            # if checkCollision returned a False, then we can update the position of entity\n            self.x_pos = self.new_x_pos\n            self.y_pos = self.new_y_pos\n            return True\n\n    def checkCollision(self):\n        for entity in entities:\n            # Iterate through every entity other than self and see if their position is the same as self's possible new position\n            if entity != self and entity.x_pos == self.new_x_pos and entity.y_pos == self.new_y_pos:\n                return True\n        # Return false if no collision occurs after checking through every entity     \n        return False\n\ncalipso = Entity(1, 1)\nentities.append(calipso)\njoseph = Entity(3,2)\nentities.append(joseph)\n\ncalipso.move(1,1) # successful move\nprint(calipso.x_pos, calipso.y_pos, sep=' ') # prints 2 2 after succesful move\ncalipso.move(1,0) # collision with joseph, fails\nprint(calipso.x_pos, calipso.y_pos, sep=' ') # prints 2 2, calipso did not move\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10891829, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P1vDwESZUYE/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcY2HNy7ZMw9DG5_16ckRZ90IvTazg/mo/photo.jpg?sz=128", "display_name": "John C. Jameson", "link": "https://stackoverflow.com/users/10891829/john-c-jameson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 54117617, "answer_count": 2, "score": 0, "last_activity_date": 1547066279, "creation_date": 1547064323, "question_id": 54117513, "link": "https://stackoverflow.com/questions/54117513/index-of-for-loop-not-iterating-correctly", "title": "Index of for loop not iterating correctly", "body": "<p>I have a for loop that is supposed to iterate a number of times equal to the length of an array. The loop runs the correct number of times, but the index does not properly increment.</p>\n\n<p>I tried manually incrementing i with i = i + 1, but that did not seem to change anything.</p>\n\n<pre><code>room = [['x','x','x','x','x'],['x','.','.','.','x'],['x','.','.','.','x'],['x','.','.','.','x'],['x','x','x','x','x']]\nentities = []\n\nclass Entity:\n    def __init__(self, x_pos, y_pos):\n        self.x_pos = x_pos\n        self.y_pos = y_pos\n\n        self.new_x_pos = x_pos\n        self.new_y_pos = y_pos\n    def Move(self, x_move, y_move):\n        self.new_y_pos = self.y_pos + y_move\n        self.new_x_pos = self.x_pos + x_move\n        if self.CheckCollision(self) is True:\n            print(\"collision\")\n        if self.CheckCollision(self) is False:\n            self.new_x_pos = self.x_pos\n            self.new_y_pos = self.y_pos\n    def CheckCollision(self, entity1):\n        for i in range(len(entities)-1):\n            #this loop here. It runs twice, but the value of i is zero for both iterations\n            entity = entities[i]\n            print(i)\n            if entity1.new_y_pos == entity.y_pos:\n                if entity1.new_x_pos == entity.x_pos:\n                    return True\n                    break\n            else:\n                return False\ncalipso = Entity(1, 1)\nentities.append(calipso)\njoseph = Entity(3,2)\nentities.append(joseph)\nprint(entities)\ncalipso.Move(1,1)\n\nprint(calipso.x_pos, calipso.y_pos, sep=' ')\n</code></pre>\n\n<p>I want i to increment each iteration of the for loop, thus i === 0 for the first iteration and i === 1 for the second iteration. Currently, i === 0 for both iterations and I don't know why.</p>\n"}]