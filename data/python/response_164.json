[{"tags": ["python", "while-loop"], "comments": [{"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 1, "creation_date": 1519862697, "post_id": 49040575, "comment_id": 85086657, "body": "Welcome to SO! Please share your existing code so we can assist you better. In addition, please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 30101, "user_id": 783412, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/895a112c66d93cefcd06d2cf371219e6?s=128&d=identicon&r=PG", "display_name": "hd1", "link": "https://stackoverflow.com/users/783412/hd1"}, "edited": false, "score": 0, "creation_date": 1519863245, "post_id": 49040575, "comment_id": 85086791, "body": "What, if anything, have you tried?"}, {"owner": {"reputation": 11, "user_id": 9426327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f5a749f4adc0e786297d7c66c6a925?s=128&d=identicon&r=PG&f=1", "display_name": "adrian", "link": "https://stackoverflow.com/users/9426327/adrian"}, "edited": false, "score": 0, "creation_date": 1519870024, "post_id": 49040575, "comment_id": 85088373, "body": "how do you do that ?"}], "owner": {"reputation": 11, "user_id": 9426327, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68f5a749f4adc0e786297d7c66c6a925?s=128&d=identicon&r=PG&f=1", "display_name": "adrian", "link": "https://stackoverflow.com/users/9426327/adrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519862166, "creation_date": 1519862166, "question_id": 49040575, "link": "https://stackoverflow.com/questions/49040575/python-program-with-menu-option-and-restricted-input-accepted", "title": "Python program with menu option and restricted input accepted", "body": "<p>I am trying to make a program like that but I am stuck at one point.Any help is welcome.Thanks</p>\n\n<p>MENU OPTION\n1-  Calculate bat average\n2-  Exit program</p>\n\n<p>Menu option : (input user)\nCalculate batting average\u2026\nNumber at bats: (int input)\nNumber hits: (int input)\nBatting average: (average at bats,hits)</p>\n\n<p>Menu option: 1\nCalculate batting average\u2026\nNumber at bats: 20000000\n=>invalid number. Must be from 0 to 1000\nNumber at bats: 14\nNumber hits: 15\n=>error, hits cannot be greater than at bats</p>\n\n<p>Menu option:3\n=> Invalid entry</p>\n"}, {"tags": ["python", "class"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1519862141, "post_id": 49040518, "comment_id": 85086483, "body": "Because all your objects are sharing <code>items</code>... that is a <i>class variable</i>, i.e. &quot;static&quot;"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1519862193, "post_id": 49040518, "comment_id": 85086504, "body": "Elements outside of <code>__init__</code> are static elements belonging to the class, elements inside of <code>__init__</code> are members of the object, they do not belong to the class.  Which means that every time you call <code>print2()</code>, regardless of the object, <code>self.items</code> contains 2 Composites."}], "answers": [{"tags": [], "owner": {"reputation": 8027, "user_id": 3282436, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e17caa3e07899b69539433130de1d420?s=128&d=identicon&r=PG&f=1", "display_name": "0x5453", "link": "https://stackoverflow.com/users/3282436/0x5453"}, "is_accepted": true, "score": 6, "last_activity_date": 1519862282, "creation_date": 1519862282, "answer_id": 49040587, "question_id": 49040518, "link": "https://stackoverflow.com/questions/49040518/pythons-initialization-a-list-in-a-class/49040587#49040587", "title": "Python&#39;s initialization a list in a class", "body": "<p><code>items</code> is a class variable, so it is shared by every instance of <code>Composite</code>.  When you <code>append</code> into <code>items</code>, all instances get that item.  So after adding the <code>leaf</code>s, you have:</p>\n\n<pre><code>   Type                    Composite.items\n------------------------------------------\n Composite    category1    [leaf1, leaf2]\n                  |\n Composite      leaf1      [leaf1, leaf2]\n                  |\n      Leaf      leaf2\n</code></pre>\n\n<p>If <code>print2</code> is called on <code>leaf1</code>, it will try to call <code>print2</code> on each of the <code>items</code> in the class, which includes <code>leaf1</code> again, and again, in an infinite recursion.</p>\n\n<p>If you instead initialize <code>self.items = []</code> inside <code>__init__</code>, it will be an instance variable instead of a class variable, so each <code>Composite</code> will have its own list of <code>items</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": false, "score": 5, "last_activity_date": 1519863252, "last_edit_date": 1519863252, "creation_date": 1519862292, "answer_id": 49040591, "question_id": 49040518, "link": "https://stackoverflow.com/questions/49040518/pythons-initialization-a-list-in-a-class/49040591#49040591", "title": "Python&#39;s initialization a list in a class", "body": "<p>Because all your objects are sharing items... that is a class variable, i.e. \"static\" </p>\n\n<pre><code>class Foo:\n    # &lt;anything assigned here is static&gt;\n    static_var1 = 'foo'\n    def some_method(self, bar):\n        self.x = bar # this is an *instance* variable\n</code></pre>\n\n<p>so in:</p>\n\n<pre><code>def print2(self):\n    if self.items:\n        for item in self.items:\n            item.print2()\n</code></pre>\n\n<p>It iterates over the static <code>items</code>. Note:</p>\n\n<pre><code>In [11]: category.items\nOut[11]: [&lt;__main__.Composite at 0x103078978&gt;, &lt;__main__.Leaf at 0x103078ac8&gt;]\n\nIn [12]: category.items[0].name\nOut[12]: 'leaf1'\n</code></pre>\n\n<p>When you hit that first item, it calls <code>item.print2()</code>, which then starts iterating over <code>items</code>, and it hits <code>'leaf1'</code> again, which <em>again</em> calls <code>item.print2()</code>...</p>\n\n<p>Note, Python's object model is pretty simple, <code>instance.method()</code> is equivalent to <code>InstanceClass.method(instance)</code>, i.e., the only \"magic\" that happens in methods is that if a method is accessed through an instance, what is actually returned is a <em>bound method</em>, which has bound the instance as the first argument to the function. So note:</p>\n\n<pre><code>In [15]: class Foo:\n    ...:     def mutate(self, x):\n    ...:         self.foo = x\n    ...:\n\nIn [16]: f = Foo()\n\nIn [17]: f.mutate(42)\n\nIn [18]: f.foo\nOut[18]: 42\n\nIn [19]: Foo.mutate(f, 99)\n\nIn [20]: f.foo\nOut[20]: 99\n</code></pre>\n\n<p>Note, <code>Foo.mutate</code> is <em>just a function</em>. It doesn't care about what <code>self</code> actually is:</p>\n\n<pre><code>In [21]: class Bar:\n    ...:     pass\n    ...:\n\nIn [22]: b = Bar()\n\nIn [23]: Foo.mutate(b, 'foooooo')\n\nIn [24]: b.foo\nOut[24]: 'foooooo'\n</code></pre>\n\n<p>Little bit of arcana, every single time a method is accessed, an <em>entirely new</em> bound-method object is created:</p>\n\n<pre><code>In [34]: f.mutate\nOut[34]: &lt;bound method Foo.mutate of &lt;__main__.Foo object at 0x1030641d0&gt;&gt;\n\nIn [35]: methods = f.mutate, f.mutate, f.mutate\n\nIn [36]: [hex(id(m)) for m in methods]\nOut[36]: ['0x10581de08', '0x10581d208', '0x105abc988']\n</code></pre>\n\n<p>Which leads to the seemingly weird:</p>\n\n<pre><code>In [37]: f.mutate is f.mutate\nOut[37]: False\n</code></pre>\n\n<p>However, that wraps the same underlying function, <code>Foo.mutate</code>, which doesn't change, and is simply an attribute like any other on a class:</p>\n\n<pre><code>In [38]: Foo.mutate is Foo.mutate\nOut[38]: True\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2787, "user_id": 2507197, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/2ltLG.jpg?s=128&g=1", "display_name": "Alter", "link": "https://stackoverflow.com/users/2507197/alter"}, "is_accepted": false, "score": 2, "last_activity_date": 1519862455, "creation_date": 1519862455, "answer_id": 49040616, "question_id": 49040518, "link": "https://stackoverflow.com/questions/49040518/pythons-initialization-a-list-in-a-class/49040616#49040616", "title": "Python&#39;s initialization a list in a class", "body": "<p>What's happening here is two things<br>\n1. items was created as a class variable<br>\n2. leaf1 was added as a Component: <code>Composite('leaf1')</code> and therefore possesses the class variable <code>items</code>   </p>\n\n<p>These two together mean that leaf1.print2() will recursively call itself forever </p>\n"}], "owner": {"reputation": 930, "user_id": 9210255, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/00KKR.png?s=128&g=1", "display_name": "TigerTV.ru", "link": "https://stackoverflow.com/users/9210255/tigertv-ru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7186, "favorite_count": 1, "accepted_answer_id": 49040587, "answer_count": 3, "score": 2, "last_activity_date": 1567112953, "creation_date": 1519861737, "last_edit_date": 1567112953, "question_id": 49040518, "link": "https://stackoverflow.com/questions/49040518/pythons-initialization-a-list-in-a-class", "title": "Python&#39;s initialization a list in a class", "body": "<p>I don't understand python's behavior, I've got many the same errors:</p>\n\n<blockquote>\n  <p>File \"./start.py\", line 20, in print2<br>\n     item.print2()<br>\n  RuntimeError: maximum recursion depth exceeded</p>\n</blockquote>\n\n<p>My code is the following:</p>\n\n<pre><code>#!/usr/bin/python\n\nclass Component:\n    def print2(self):\n        pass\n\nclass Composite(Component):\n    items = []\n    name = 'composite'\n\n    def __init__(self, name):\n        self.name = name\n\n    def add(self, item):\n        self.items.append(item)\n\n    def print2(self):\n        if self.items:\n            for item in self.items:\n                item.print2()\n        else:\n            print self.name\n\nclass Leaf(Component):\n    name = 'leaf'\n\n    def __init__(self, name):\n        self.name = name\n\n    def print2(self):\n        print self.name\n\ncategory = Composite('category1')\nleaf = Composite('leaf1')\ncategory.add(leaf)\nleaf = Leaf('leaf2')\ncategory.add(leaf)\n\ncategory.print2()\n</code></pre>\n\n<p>When I add <code>self.items = []</code> in the constructor ( <code>__init__</code> ), it works fine. Could you explain the behavior?</p>\n"}, {"tags": ["python", "list", "numbers", "int"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1519861805, "post_id": 49040487, "comment_id": 85086374, "body": "If you use Python 3, then <code>float(s&#47;y)</code> is unnecessary, because the result of the division is already a floating-point number. If you use Python 2, then <code>float(s&#47;y)</code> must be <code>float(s)&#47;y</code>, because <code>s&#47;y</code> is an incorrect integer number."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1519867729, "post_id": 49040487, "comment_id": 85087805, "body": "What do you mean by &quot;when I input 4 integers&quot;? Do you pass four parameters? Python will not allow you to do that."}], "answers": [{"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1519862086, "last_edit_date": 1519862086, "creation_date": 1519861695, "answer_id": 49040511, "question_id": 49040487, "link": "https://stackoverflow.com/questions/49040487/python-function-not-recognizing-integers/49040511#49040511", "title": "Python function not recognizing integers", "body": "<p>Here is one way:</p>\n\n<pre><code>def list3(a,b,c):\n    \"\"\"if all inputs are int/float return average\"\"\"\n    l = [a, b, c]\n\n    return sum(l)/len(l) if all(isinstance(t, (int, float)) for t in l) else l\n\nlist3(1, 2, 6)    # 3.0\nlist3('a', 1, 2)  # ['a', 1, 2]\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<ul>\n<li><code>all(criteria for t in l)</code> applies a lazy function <code>all</code> on a generator expression, which checks if all items in <code>l</code> are integers or floats.</li>\n<li><code>isinstance</code> is generally preferred to checking <code>type</code>.</li>\n<li>The <code>if</code> / <code>else</code> clause can be replaced by a <a href=\"https://docs.python.org/3/reference/expressions.html#conditional-expressions\" rel=\"nofollow noreferrer\">ternary statement</a>.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1519938361, "last_edit_date": 1519938361, "creation_date": 1519862007, "answer_id": 49040554, "question_id": 49040487, "link": "https://stackoverflow.com/questions/49040487/python-function-not-recognizing-integers/49040554#49040554", "title": "Python function not recognizing integers", "body": "<p>You can use exception handling. A <code>TypeError</code> exception is raised if not all elements of <code>l</code> are numeric:</p>\n\n<pre><code>try:\n    return float(sum(l)) / len(l) # Just in case it's Python 2.7\nexcept TypeError:\n    return l\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 7970934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93c6b47dcc600e6442b1cca3d4afa577?s=128&d=identicon&r=PG&f=1", "display_name": "Pmason", "link": "https://stackoverflow.com/users/7970934/pmason"}, "is_accepted": false, "score": 1, "last_activity_date": 1553701555, "last_edit_date": 1553701555, "creation_date": 1553633215, "answer_id": 55365929, "question_id": 49040487, "link": "https://stackoverflow.com/questions/49040487/python-function-not-recognizing-integers/55365929#55365929", "title": "Python function not recognizing integers", "body": "<p>Minimal changes to get the code to work in Python 2 or 3:</p>\n\n<pre><code>def list3(a, b, c):\n    \"\"\"if all inputs are int/float return average\"\"\"\n    l = [a, b, c]\n    s = 0\n    for t in l:\n        if type(t) is int or type(t) is float:\n            s += t\n        else:\n            return l\n    y = len(l)\n    x = float(s) / y\n    return x\n\n</code></pre>\n\n<p>You just needed to compare type(t) to int or float, and convert s to float before the division.  You also have to complete testing of all list members before the return, otherwise s = sum(l)will bomb for a case like [1, 'str', 6]</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9329726"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1553701555, "creation_date": 1519861501, "last_edit_date": 1519933796, "question_id": 49040487, "link": "https://stackoverflow.com/questions/49040487/python-function-not-recognizing-integers", "title": "Python function not recognizing integers", "body": "<p>I am writing a function that takes 3 inputs, if all 3 inputs are floats and/or integers it returns the average of the 3, otherwise it returns them as a list. </p>\n\n<p>This is what I have:</p>\n\n<pre><code>def list3(a,b,c):\n    \"\"\"if all inputs are int/float return average\"\"\"\n    l = [a, b, c]\n    for t in l:\n        if t is int or t is float:\n            s = sum(l)\n            y = len(l)\n            x = float(s/y)\n            return x\n        else:\n            return(l)\n</code></pre>\n\n<p>when I input 3 integers it returns the list, how can I get it to recognize the input as integers? Thanks</p>\n"}, {"tags": ["python", "tkinter", "label", "justify"], "comments": [{"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 2, "creation_date": 1519861374, "post_id": 49040437, "comment_id": 85086257, "body": "As with the other places where you added <code>tk.</code>, you need <code>tk.CENTER</code>."}, {"owner": {"reputation": 9, "user_id": 9394122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32480b2047fc3d09a30530eda5d2e44e?s=128&d=identicon&r=PG&f=1", "display_name": "Max1999", "link": "https://stackoverflow.com/users/9394122/max1999"}, "reply_to_user": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1519863270, "post_id": 49040437, "comment_id": 85086801, "body": "Brilliant, thanks so much for such a quick response. That solved the issue. I should have thought that not just functions/classes etc would need the extension."}], "answers": [{"tags": [], "owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1519861548, "creation_date": 1519861548, "answer_id": 49040492, "question_id": 49040437, "link": "https://stackoverflow.com/questions/49040437/using-tkinter-in-python-label-does-not-recognize-anchor-center/49040492#49040492", "title": "Using Tkinter in Python Label does not recognize anchor=CENTER", "body": "<p><code>*</code> gets all the sub packages.  Using <code>import tkinter as tk</code> just changes the name of the package from tkinter to tk.</p>\n\n<p>You have not told your script <code>CENTER</code> is part of tkinter.  (you did this automatically when you used <code>*</code>) but now you must do by explicitly telling <code>CENTER</code> is part of tkinter:</p>\n\n<pre><code>tk.CENTER\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10223, "user_id": 7032856, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh6.googleusercontent.com/-v2P-pqI1pww/AAAAAAAAAAI/AAAAAAAAABg/BHOFSOpQ0BM/photo.jpg?sz=128", "display_name": "Nae", "link": "https://stackoverflow.com/users/7032856/nae"}, "is_accepted": false, "score": 0, "last_activity_date": 1519933917, "creation_date": 1519933917, "answer_id": 49057634, "question_id": 49040437, "link": "https://stackoverflow.com/questions/49040437/using-tkinter-in-python-label-does-not-recognize-anchor-center/49057634#49057634", "title": "Using Tkinter in Python Label does not recognize anchor=CENTER", "body": "<p><code>CENTER</code> is a variable(actually they usually are referred to as constants) of <a href=\"/questions/tagged/tkinter\" class=\"post-tag\" title=\"show questions tagged &#39;tkinter&#39;\" rel=\"tag\">tkinter</a> module which equals to <code>'center'</code>. So simply replace the line with:</p>\n\n<pre><code>label.place(..., anchor='center')\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 9394122, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32480b2047fc3d09a30530eda5d2e44e?s=128&d=identicon&r=PG&f=1", "display_name": "Max1999", "link": "https://stackoverflow.com/users/9394122/max1999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2288, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1519933917, "creation_date": 1519861173, "last_edit_date": 1519861756, "question_id": 49040437, "link": "https://stackoverflow.com/questions/49040437/using-tkinter-in-python-label-does-not-recognize-anchor-center", "title": "Using Tkinter in Python Label does not recognize anchor=CENTER", "body": "<p>I am new to tkinter and have been using:</p>\n\n<pre><code>from tkinter import * \n</code></pre>\n\n<p>but have read this is bad practice. \nI rewrote a very small bit of code to start using the following:</p>\n\n<pre><code>import tkinter as tk\n</code></pre>\n\n<p>However when I run the rest of the code. I get the error:\n<code>label.place(relx=0.4, rely=0.35, anchor=CENTER)\nNameError: name 'CENTER' is not defined</code></p>\n\n<pre><code>root = tk.Tk()\nlabel = tk.Label(root, text=\"I am a label widget\")\nlabel.place(relx=0.4, rely=0.35, anchor=CENTER)    \nbutton = tk.Button(root, text=\"I am a button\")\nlabel.pack()\nbutton.pack()\nroot.mainloop()\n</code></pre>\n\n<p>Is this a namespace issue? How can I solve the problem?</p>\n"}, {"tags": ["python", "textview", "gtk", "gtk3"], "comments": [{"owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "edited": false, "score": 0, "creation_date": 1519935185, "post_id": 49040404, "comment_id": 85120584, "body": "If my answer worked, mark it as accepted, so people know that it worked."}, {"owner": {"reputation": 513, "user_id": 2362556, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/388a4784e0c5b9f79314177a97a12ec9?s=128&d=identicon&r=PG", "display_name": "ilias iliadis", "link": "https://stackoverflow.com/users/2362556/ilias-iliadis"}, "edited": false, "score": 0, "creation_date": 1565742796, "post_id": 49040404, "comment_id": 101444478, "body": "Title states &#171;g&#187;et text but question is: how can i &#171;s&#187;et text. I think it must be changed."}], "answers": [{"comments": [{"owner": {"reputation": 78, "user_id": 8206667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcff95dfc3b81edbeb4a4384d2b95d20?s=128&d=identicon&r=PG&f=1", "display_name": "Averner", "link": "https://stackoverflow.com/users/8206667/averner"}, "edited": false, "score": 0, "creation_date": 1520023452, "post_id": 49041758, "comment_id": 85159975, "body": "although technically correct, it&#39;s not what i asked for. in Gtk the <code>set_text(text, length=-1)</code> only supports UTF-8 encoding."}], "tags": [], "owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "is_accepted": false, "score": 0, "last_activity_date": 1519871707, "creation_date": 1519871707, "answer_id": 49041758, "question_id": 49040404, "link": "https://stackoverflow.com/questions/49040404/python-gtk3-set-text-in-textview/49041758#49041758", "title": "Python Gtk3 set text in textview", "body": "<p>It's pretty simple:</p>\n\n<pre><code>s = \"string\"\nl = len(s)\nself.textbuffer.set_text(s, l) \n</code></pre>\n\n<p>The <a href=\"http://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.set_text\" rel=\"nofollow noreferrer\">docs</a> .</p>\n"}, {"tags": [], "owner": {"reputation": 78, "user_id": 8206667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcff95dfc3b81edbeb4a4384d2b95d20?s=128&d=identicon&r=PG&f=1", "display_name": "Averner", "link": "https://stackoverflow.com/users/8206667/averner"}, "is_accepted": true, "score": 1, "last_activity_date": 1520023881, "last_edit_date": 1592644375, "creation_date": 1520023881, "answer_id": 49077204, "question_id": 49040404, "link": "https://stackoverflow.com/questions/49040404/python-gtk3-set-text-in-textview/49077204#49077204", "title": "Python Gtk3 set text in textview", "body": "<p>i somehow completly missed this in The docs .</p>\n<p><a href=\"http://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.deserialize\" rel=\"nofollow noreferrer\">http://lazka.github.io/pgi-docs/Gtk-3.0/classes/TextBuffer.html#Gtk.TextBuffer.deserialize</a></p>\n<blockquote>\n<p><code>deserialize (content_buffer, format, iter, data)</code></p>\n<p>This function deserializes rich text in format format and inserts it at iter.  formats to be used must be registered using <code>Gtk.TextBuffer.register_deserialize_format()</code> or <code>Gtk.TextBuffer.register_deserialize_tagset()</code> beforehand.</p>\n</blockquote>\n<p>Which is the answer i was looking for</p>\n"}], "owner": {"reputation": 78, "user_id": 8206667, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcff95dfc3b81edbeb4a4384d2b95d20?s=128&d=identicon&r=PG&f=1", "display_name": "Averner", "link": "https://stackoverflow.com/users/8206667/averner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 580, "favorite_count": 0, "accepted_answer_id": 49077204, "answer_count": 2, "score": 2, "last_activity_date": 1568888621, "creation_date": 1519860898, "last_edit_date": 1568888621, "question_id": 49040404, "link": "https://stackoverflow.com/questions/49040404/python-gtk3-set-text-in-textview", "title": "Python Gtk3 set text in textview", "body": "<p>i can get richtext from textbuffer with this:</p>\n\n<pre><code>exported = self.textbuffer.serialize(\n                         self.textbuffer,\n                         self.textbuffer.register_serialize_tagset(),\n                         start_iter,\n                         end_iter\n                         )\n</code></pre>\n\n<p>how can i set text into textBuffer?</p>\n"}, {"tags": ["python", "python-2.7", "utf-8"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6142029"}, "reply_to_user": {"reputation": 5216, "user_id": 4878850, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-Km3lO2wPvWM/AAAAAAAAAAI/AAAAAAAAA5c/fO0oHsS1SXA/photo.jpg?sz=128", "display_name": "Jim Wright", "link": "https://stackoverflow.com/users/4878850/jim-wright"}, "edited": false, "score": 0, "creation_date": 1519861041, "post_id": 49040401, "comment_id": 85086155, "body": "The output from the website I had in the link is the correct output and for someone reason I get the other resulet(I will edit my question to make it clearer)."}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1519861507, "post_id": 49040401, "comment_id": 85086305, "body": "<code>print my_string.decode(&#39;utf8&#39;)</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6142029"}, "edited": false, "score": 0, "creation_date": 1519861611, "post_id": 49040401, "comment_id": 85086327, "body": "Yep, I you are right kindda my bad I didnt get the whole conept of encoding right and thought that I need to encode into utf8 or something like this."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1519861645, "post_id": 49040401, "comment_id": 85086338, "body": "I can&#39;t reproduce in python 2.7: <a href=\"https://repl.it/repls/CompetitiveVictoriousDiskdrive\" rel=\"nofollow noreferrer\">repl.it/repls/CompetitiveVictoriousDiskdrive</a>"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1519861841, "post_id": 49040401, "comment_id": 85086383, "body": "@chrisz he is running it in his terminal I think which is not decoding it with utf8 but with something else(latin1 i think) ... (repl.it is probably doing some encoding mojo behind the scenes)"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1519890287, "post_id": 49040401, "comment_id": 85094296, "body": "So what are you printing <b>to</b>? This isn&#39;t a Python problem, you have valid UTF-8. But your <i>terminal</i> or <i>console</i> must be configured to expect UTF-8 for this to work."}], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": true, "score": 0, "last_activity_date": 1519861966, "last_edit_date": 1519861966, "creation_date": 1519861635, "answer_id": 49040505, "question_id": 49040401, "link": "https://stackoverflow.com/questions/49040401/printing-hebrew-utf-8-produces-giberish/49040505#49040505", "title": "Printing Hebrew UTF-8 produces giberish", "body": "<p>you just need to decode the bytes back into unicode with utf8 encoding ... by default its using whatever your terminal is using(probably latin1) ... your terminal <strong>may not support all of the characters *</strong>  (see <a href=\"https://repl.it/repls/OnlyRewardingKeyboardmacro\" rel=\"nofollow noreferrer\">https://repl.it/repls/OnlyRewardingKeyboardmacro</a>)</p>\n\n<p><code>print '\\xd7\\xaa\\xd7\\x99\\xd7\\x9b\\xd7\\x95\\xd7\\x9f \\xd7\\x93\\xd7\\x94 \\xd7\\xa9\\xd7\\x9c\\xd7\\x99\\xd7\\x98'.decode('utf8')</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6142029"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 49040505, "answer_count": 1, "score": 0, "last_activity_date": 1519890246, "creation_date": 1519860887, "last_edit_date": 1519890246, "question_id": 49040401, "link": "https://stackoverflow.com/questions/49040401/printing-hebrew-utf-8-produces-giberish", "title": "Printing Hebrew UTF-8 produces giberish", "body": "<p>I try to print a stirng and for some reason it's turn into gibrish. But if I put it in an online utf 8 convertr it works (<a href=\"https://www.browserling.com/tools/utf8-decode\" rel=\"nofollow noreferrer\">https://www.browserling.com/tools/utf8-decode</a>). \nAnd the output i get is: \"\u00d7\u00aa\u00d7\u2122\u00d7\u203a\u00d7\u2022\u00d7\u0178 \u00d7\u201c\u00d7\u201d \u00d7\u00a9\u00d7\u0153\u00d7\u2122\u00d7\u02dc\" \ninstead of: \"\u05ea\u05d9\u05db\u05d5\u05df\u05d3\u05d4\u05e9\u05dc\u05d9\u05d8\" that I get in the website and is the orignal stirg.</p>\n\n<pre><code>#!/usr/bin/env python\n# -*- coding: utf-8 -*-\nprint '\\xd7\\xaa\\xd7\\x99\\xd7\\x9b\\xd7\\x95\\xd7\\x9f \\xd7\\x93\\xd7\\x94 \\xd7\\xa9\\xd7\\x9c\\xd7\\x99\\xd7\\x98'\n</code></pre>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 15340, "user_id": 1560035, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fe3aa4a1766a44d8f27db8a95cb573ed?s=128&d=identicon&r=PG", "display_name": "TheoretiCAL", "link": "https://stackoverflow.com/users/1560035/theoretical"}, "edited": false, "score": 0, "creation_date": 1519861823, "post_id": 49040386, "comment_id": 85086379, "body": "Can you post all the code? you must have accidentally redefined the <code>browser</code> variable somewhere, likely to the result of some function call."}, {"owner": {"reputation": 970, "user_id": 8210371, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f58eb55b40f46d8638a9c7429289b240?s=128&d=identicon&r=PG&f=1", "display_name": "Hannan", "link": "https://stackoverflow.com/users/8210371/hannan"}, "reply_to_user": {"reputation": 15340, "user_id": 1560035, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fe3aa4a1766a44d8f27db8a95cb573ed?s=128&d=identicon&r=PG", "display_name": "TheoretiCAL", "link": "https://stackoverflow.com/users/1560035/theoretical"}, "edited": false, "score": 0, "creation_date": 1519862292, "post_id": 49040386, "comment_id": 85086533, "body": "Hi this is complete code. I just do not how to switch selenium to grab new page so that I can select elements from it."}, {"owner": {"reputation": 15340, "user_id": 1560035, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fe3aa4a1766a44d8f27db8a95cb573ed?s=128&d=identicon&r=PG", "display_name": "TheoretiCAL", "link": "https://stackoverflow.com/users/1560035/theoretical"}, "edited": false, "score": 0, "creation_date": 1519862875, "post_id": 49040386, "comment_id": 85086709, "body": "you don&#39;t need to manually reload a page in selenium, the driver (<code>browser</code>) in your case will always reflect the current page. The <code>browser.page_source</code> would have the new page source after you <code>send_keys</code>."}, {"owner": {"reputation": 15340, "user_id": 1560035, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fe3aa4a1766a44d8f27db8a95cb573ed?s=128&d=identicon&r=PG", "display_name": "TheoretiCAL", "link": "https://stackoverflow.com/users/1560035/theoretical"}, "edited": false, "score": 0, "creation_date": 1519863003, "post_id": 49040386, "comment_id": 85086741, "body": "if you <code>print(type(browser))</code> after your <code>elem.send_keys</code>, what do you see?"}, {"owner": {"reputation": 970, "user_id": 8210371, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f58eb55b40f46d8638a9c7429289b240?s=128&d=identicon&r=PG&f=1", "display_name": "Hannan", "link": "https://stackoverflow.com/users/8210371/hannan"}, "reply_to_user": {"reputation": 15340, "user_id": 1560035, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fe3aa4a1766a44d8f27db8a95cb573ed?s=128&d=identicon&r=PG", "display_name": "TheoretiCAL", "link": "https://stackoverflow.com/users/1560035/theoretical"}, "edited": false, "score": 0, "creation_date": 1519863545, "post_id": 49040386, "comment_id": 85086858, "body": "Brilliant, you are right. Browser always tracks the current page."}], "owner": {"reputation": 970, "user_id": 8210371, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f58eb55b40f46d8638a9c7429289b240?s=128&d=identicon&r=PG&f=1", "display_name": "Hannan", "link": "https://stackoverflow.com/users/8210371/hannan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 358, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519860778, "creation_date": 1519860778, "question_id": 49040386, "link": "https://stackoverflow.com/questions/49040386/selenium-python-how-to-switch-browser-session-to-new-page-and-select-new-page", "title": "Selenium / Python How to switch browser session to new page and select new page elements", "body": "<p>I'm trying to make a web scraper using Selenium and Python. Here is an example where I'm using for google search. Once I programmatically enter the search text and click enter, browser correctly goes to the second page. How can I grab different elements on this new page? I believe I have to switch to a new session but I'm not sure how to.</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\n\nbrowser = webdriver.Chrome(\"/Users/Desktop/projects/chromedriver\")\nbrowser.get('https://www.google.com')\nelem = browser.find_element_by_id('lst-ib')\n\nelem.send_keys('stackoverflow' + Keys.RETURN)\n</code></pre>\n\n<p>Now I am on the next page showing result for the search I made. I want to select the element from this page:</p>\n\n<pre><code>new_page = browser.get_attribute('innerHTML')\nprint(new_page)\n</code></pre>\n\n<p>I get error:</p>\n\n<pre><code>AttributeError: 'NoneType' object has no attribute 'get_attribute'\n</code></pre>\n\n<p>How can I switch to new page to grab its elements?</p>\n"}, {"tags": ["python", "postgresql", "sqlalchemy", "upsert"], "answers": [{"tags": [], "owner": {"reputation": 14205, "user_id": 968244, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/I9DXX.jpg?s=128&g=1", "display_name": "isapir", "link": "https://stackoverflow.com/users/968244/isapir"}, "is_accepted": false, "score": 0, "last_activity_date": 1519881206, "creation_date": 1519881206, "answer_id": 49043016, "question_id": 49040371, "link": "https://stackoverflow.com/questions/49040371/sqlalchemy-upsert-unable-to-find-table-excluded/49043016#49043016", "title": "SQLAlchemy Upsert unable to find table &quot;excluded&quot;", "body": "<p><code>EXCLUDED</code> is available in the <code>UPDATE</code> section, but not in the <code>VALUES</code> section.</p>\n\n<p>This is <a href=\"https://www.depesz.com/2015/05/10/waiting-for-9-5-add-support-for-insert-on-conflict-do-nothingupdate/\" rel=\"nofollow noreferrer\">a good tutorial about UPSERT</a></p>\n\n<p>And there's always the official docs for <a href=\"https://www.postgresql.org/docs/current/static/sql-insert.html#SQL-ON-CONFLICT\" rel=\"nofollow noreferrer\">INSERT ON CONFLICT</a></p>\n"}], "owner": {"reputation": 498, "user_id": 945615, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/TOK9L.png?s=128&g=1", "display_name": "Ryan - Llaver", "link": "https://stackoverflow.com/users/945615/ryan-llaver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519881241, "creation_date": 1519860661, "last_edit_date": 1519881241, "question_id": 49040371, "link": "https://stackoverflow.com/questions/49040371/sqlalchemy-upsert-unable-to-find-table-excluded", "title": "SQLAlchemy Upsert unable to find table &quot;excluded&quot;", "body": "<p>Disclaimer: I recently took over someone else's codebase so some of the code you see here was already premade. I've also changed certain variable names to more generic code names that probably wouldn't actually work.</p>\n\n<p>I am trying to bulk upsert on a postgres DB using SQLAlchemy but am having trouble. It seems that when SQLAlchemy goes to access the data it needs to update the table (excluded.columnName) It is unable to be found. </p>\n\n<p>First here is the error I'm getting:</p>\n\n<pre><code>    Missing FROM-clause entry for table \"excluded\"\n    LINE 1: ...tablename) VALUES (excluded.tablename...\n</code></pre>\n\n<p>And my code:</p>\n\n<pre><code>    index_fields = list(billocity_db.get_indexes(self.table_name))\n    for row in self.data:\n        if 'id' in self.column_info.keys():\n            del row['id']\n        data = row.to_dict()\n        insert_stmt = insert(self.table).values(data)\n        for i in index_fields:\n            if i in data:\n                del data[i]\n        for key in data.keys():\n            data[key] = insert_stmt.excluded[key]\n            print(data[key])\n        print(data)\n        insert_stmt = insert_stmt.on_conflict_do_update(\n            #Tried both constraint and index_elements with same result\n            #constraint=self.table_name,\n            #None of my columns are 'id'. Could that be an issue?\n            index_elements=['id'],\n            set_=data\n        )\n        try:\n            print(insert_stmt)\n            self.session.execute(insert_stmt)\n        except Exception as e:\n            self.session.rollback()\n            self.log.exception(str(e))\n        finally:\n            self.session.commit()\n</code></pre>\n\n<p>The error comes immediately after calling </p>\n\n<pre><code>self.session.execute(insert_stmt)\n</code></pre>\n\n<p>And this is what insert_stmt prints as right before execute, obviously column_name and table_name is just place holder.</p>\n\n<pre><code> INSERT INTO\n table_name (column_name, column_name, column_name, \n column_name, column_name, column_name, column_name, \n column_name, column_name, column_name, column_name, \n column_name, column_name, column_name, column_name, \n column_name) \n VALUES\n    (\n excluded.column_name, excluded.column_name, excluded.column_name, \n excluded.column_name, excluded.column_name, excluded.column_name, \n excluded.column_name, excluded.column_name, excluded.column_name, \n excluded.column_name, excluded.column_name, excluded.column_name, \n excluded.column_name, excluded.column_name, excluded.column_name, \n excluded.column_name\n )\n ON CONFLICT (id) DO \n UPDATE SET\n column_name= excluded.column_name, column_name= excluded.column_name, \n column_name= excluded.column_name, column_name= excluded.column_name, \n column_name= excluded.column_name, column_name= excluded.column_name, \n column_name= excluded.column_name, column_name= excluded.column_name, \n column_name= excluded.column_name, column_name= excluded.column_name, \n column_name= excluded.column_name, column_name= excluded.column_name, \n column_name= excluded.column_name, column_name= excluded.column_name, \n column_name= excluded.column_name, column_name= excluded.column_name \n RETURNING \n table_name.id\n</code></pre>\n\n<p>I can't find many extra resources online about this issue and I have no idea what else to try. Any help would be appreciated.</p>\n"}, {"tags": ["python", "string", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 5, "last_activity_date": 1519862326, "last_edit_date": 1519862326, "creation_date": 1519860800, "answer_id": 49040388, "question_id": 49040364, "link": "https://stackoverflow.com/questions/49040364/string-contains-across-two-pandas-series/49040388#49040388", "title": "String contains across two pandas series", "body": "<pre><code>In [75]: df['choice_match'] = (df['fruit']\n                                 .str.split(',\\s*', expand=True)\n                                 .eq(df['choice'], axis=0)\n                                 .any(1).astype(np.int8))\n\nIn [76]: df\nOut[76]:\n   ID     choice             fruit  choice_match\n0   1     orange     apple, banana             0\n1   2     orange             apple             0\n2   3      apple             apple             1\n3   4  pineapple         pineapple             1\n4   5      apple  apple, pineapple             1\n5   6     orange            orange             1\n6   7     orange     apple, orange             1\n7   8     orange            orange             1\n8   9     banana            banana             1\n9  10     banana      apple, peach             0\n</code></pre>\n\n<p>Step by step:</p>\n\n<pre><code>In [78]: df['fruit'].str.split(',\\s*', expand=True)\nOut[78]:\n           0          1\n0      apple     banana\n1      apple       None\n2      apple       None\n3  pineapple       None\n4      apple  pineapple\n5     orange       None\n6      apple     orange\n7     orange       None\n8     banana       None\n9      apple      peach\n\nIn [79]: df['fruit'].str.split(',\\s*', expand=True).eq(df['choice'], axis=0)\nOut[79]:\n       0      1\n0  False  False\n1  False  False\n2   True  False\n3   True  False\n4   True  False\n5   True  False\n6  False   True\n7   True  False\n8   True  False\n9  False  False\n\nIn [80]: df['fruit'].str.split(',\\s*', expand=True).eq(df['choice'], axis=0).any(1)\nOut[80]:\n0    False\n1    False\n2     True\n3     True\n4     True\n5     True\n6     True\n7     True\n8     True\n9    False\ndtype: bool\n\nIn [81]: df['fruit'].str.split(',\\s*', expand=True).eq(df['choice'], axis=0).any(1).astype(np.int8)\nOut[81]:\n0    0\n1    0\n2    1\n3    1\n4    1\n5    1\n6    1\n7    1\n8    1\n9    0\ndtype: int8\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1569, "user_id": 8784015, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2733173f5b643bbf93278b76f39747f5?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/8784015/james"}, "edited": false, "score": 0, "creation_date": 1519861251, "post_id": 49040419, "comment_id": 85086213, "body": "Thank you and for the explanation, very helpful :)"}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 5, "last_activity_date": 1519860982, "creation_date": 1519860982, "answer_id": 49040419, "question_id": 49040364, "link": "https://stackoverflow.com/questions/49040364/string-contains-across-two-pandas-series/49040419#49040419", "title": "String contains across two pandas series", "body": "<p>Here is one way:</p>\n\n<pre><code>df['choice_match'] = df.apply(lambda row: row['choice'] in row['fruit'].split(','),\\\n                              axis=1).astype(int)\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<ul>\n<li><code>df.apply</code> with <code>axis=1</code> cycles through each row and applies logic; it accepts anonymous <code>lambda</code> functions.</li>\n<li><code>row['fruit'].split(',')</code> creates a list from the <code>fruit</code> column. This is necessary so, for example, <code>apple</code> is not considered in <code>pineapple</code>.</li>\n<li><code>astype(int)</code> is necessary to convert Boolean values to integers for display purposes.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 4, "last_activity_date": 1519865197, "last_edit_date": 1519865197, "creation_date": 1519861690, "answer_id": 49040507, "question_id": 49040364, "link": "https://stackoverflow.com/questions/49040364/string-contains-across-two-pandas-series/49040507#49040507", "title": "String contains across two pandas series", "body": "<p><strong>Option 1</strong><br>\nUse Numpy's <code>find</code><br>\nWhen <code>find</code> doesn't find the value, it returns <code>-1</code>  </p>\n\n<pre><code>from numpy.core.defchararray import find\n\nchoice = df.choice.values.astype(str)\nfruit = df.fruit.values.astype(str)\n\ndf.assign(choice_match=(find(fruit, choice) &gt; -1).astype(np.uint))\n\n   ID     choice             fruit  choice_match\n0   1     orange     apple, banana             0\n1   2     orange             apple             0\n2   3      apple             apple             1\n3   4  pineapple         pineapple             1\n4   5      apple  apple, pineapple             1\n5   6     orange            orange             1\n6   7     orange     apple, orange             1\n7   8     orange            orange             1\n8   9     banana            banana             1\n9  10     banana      apple, peach             0\n</code></pre>\n\n<hr>\n\n<p><strong>Option 2</strong><br>\nSet logic<br>\nWith <code>set</code>s <code>&lt;</code> is strict subset and <code>&lt;=</code> is subset.  Make yourself some <code>pd.Series</code> of <code>set</code>s and use <code>&lt;=</code> to find out if one column's sets are subsets of the other column's sets.</p>\n\n<pre><code>choice = df.choice.apply(lambda x: set([x]))\nfruit = df.fruit.str.split(', ').apply(set)\n\ndf.assign(choice_match=(choice &lt;= fruit).astype(np.uint))\n\n   ID     choice             fruit  choice_match\n0   1     orange     apple, banana             0\n1   2     orange             apple             0\n2   3      apple             apple             1\n3   4  pineapple         pineapple             1\n4   5      apple  apple, pineapple             1\n5   6     orange            orange             1\n6   7     orange     apple, orange             1\n7   8     orange            orange             1\n8   9     banana            banana             1\n9  10     banana      apple, peach             0\n</code></pre>\n\n<hr>\n\n<p><strong>Option 3</strong><br>\nInspired by <a href=\"https://stackoverflow.com/a/49040672/2336654\">@Wen's answer</a><br>\nUsing <code>get_dummies</code> and <code>max</code>  </p>\n\n<pre><code>c = pd.get_dummies(df.choice)\nf = df.fruit.str.get_dummies(', ')\ndf.assign(choice_match=pd.DataFrame.mul(*c.align(f, 'inner')).max(1))\n\n   ID     choice             fruit  choice_match\n0   1     orange     apple, banana             0\n1   2     orange             apple             0\n2   3      apple             apple             1\n3   4  pineapple         pineapple             1\n4   5      apple  apple, pineapple             1\n5   6     orange            orange             1\n6   7     orange     apple, orange             1\n7   8     orange            orange             1\n8   9     banana            banana             1\n9  10     banana      apple, peach             0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1519865287, "post_id": 49040672, "comment_id": 85087265, "body": "I decided to add an option to my answer that was inspired this.  Great answer!"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 3, "last_activity_date": 1519862803, "creation_date": 1519862803, "answer_id": 49040672, "question_id": 49040364, "link": "https://stackoverflow.com/questions/49040364/string-contains-across-two-pandas-series/49040672#49040672", "title": "String contains across two pandas series", "body": "<p>Ummm find a interesting way <code>get_dummies</code></p>\n\n<pre><code>(df.fruit.str.replace(' ','').str.get_dummies(',')+df.choice.str.get_dummies()).gt(1).any(1)\nOut[726]: \n0    False\n1    False\n2     True\n3     True\n4     True\n5     True\n6     True\n7     True\n8     True\n9    False\ndtype: bool\n</code></pre>\n\n<p>After assign it back </p>\n\n<pre><code>df['New']=(df.fruit.str.replace(' ','').str.get_dummies(',')+df.choice.str.get_dummies()).gt(1).any(1).astype(int)\ndf\nOut[728]: \n   ID     choice             fruit  New\n0   1     orange     apple, banana    0\n1   2     orange             apple    0\n2   3      apple             apple    1\n3   4  pineapple         pineapple    1\n4   5      apple  apple, pineapple    1\n5   6     orange            orange    1\n6   7     orange     apple, orange    1\n7   8     orange            orange    1\n8   9     banana            banana    1\n9  10     banana      apple, peach    0\n</code></pre>\n"}], "owner": {"reputation": 1569, "user_id": 8784015, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/2733173f5b643bbf93278b76f39747f5?s=128&d=identicon&r=PG&f=1", "display_name": "James", "link": "https://stackoverflow.com/users/8784015/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 49040419, "answer_count": 4, "score": 4, "last_activity_date": 1524169267, "creation_date": 1519860647, "last_edit_date": 1524169267, "question_id": 49040364, "link": "https://stackoverflow.com/questions/49040364/string-contains-across-two-pandas-series", "title": "String contains across two pandas series", "body": "<p>I have a series with some strings in a pandas dataframe. I would like to search for the existence of that string within an adjacent column.</p>\n\n<p>In the below example I would like to search for if the string in 'choice' series is contained within the 'fruit' series, returning either true (1) or false (0) in a new column 'choice_match'.</p>\n\n<p>Example DataFrame:</p>\n\n<pre><code>import pandas as pd\nd = {'ID': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10], 'fruit': [\n'apple, banana', 'apple', 'apple', 'pineapple', 'apple, pineapple',            'orange', 'apple, orange', 'orange', 'banana', 'apple, peach'],\n'choice': ['orange', 'orange', 'apple', 'pineapple', 'apple', 'orange',  'orange', 'orange', 'banana', 'banana']}\ndf = pd.DataFrame(data=d)\n</code></pre>\n\n<p>Desired DataFrame:</p>\n\n<pre><code>import pandas as pd\nd = {'ID': [1, 2, 3, 4, 5, 6, 7, 8, 9, 10], 'fruit': [\n'apple, banana', 'apple', 'apple', 'pineapple', 'apple, pineapple',   'orange', 'apple, orange', 'orange', 'banana', 'apple, peach'],\n'choice': ['orange', 'orange', 'apple', 'pineapple', 'apple', 'orange',      'orange', 'orange', 'banana', 'banana'],\n'choice_match': [0, 0, 1, 1, 1, 1, 1, 1, 1, 0]}\ndf = pd.DataFrame(data=d)\n</code></pre>\n"}, {"tags": ["python", "numpy", "machine-learning"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 2, "creation_date": 1519860708, "post_id": 49040352, "comment_id": 85086071, "body": "We need more info, mostly <code>shape</code>s. Target a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1519861315, "post_id": 49040352, "comment_id": 85086227, "body": "What&#39;s the shape of <code>ymx</code>?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 1, "creation_date": 1519862129, "post_id": 49040352, "comment_id": 85086479, "body": "Also why does <code>mask</code> have to be (100, 785)?  What are you trying to do with it?"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "edited": false, "score": 0, "creation_date": 1519886875, "post_id": 49040352, "comment_id": 85092890, "body": "<code>mask.repeat(785, 1)</code>"}, {"owner": {"reputation": 3102, "user_id": 5212031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbccafc3ff04779a5e90bac1c4d29ea9?s=128&d=identicon&r=PG", "display_name": "Uvar", "link": "https://stackoverflow.com/users/5212031/uvar"}, "edited": false, "score": 0, "creation_date": 1519908935, "post_id": 49040352, "comment_id": 85104576, "body": "so <code>ywx</code> has shape (100,). For any <code>numpy</code> array of size (100, X) you can now directly apply the mask to this array without this expansion. As it stands, we have no way of knowing what you want to do and as such no way to help you."}], "owner": {"reputation": 21, "user_id": 8475169, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tlPKsW32wYY/AAAAAAAAAAI/AAAAAAAASnE/lmsnR_fCac0/photo.jpg?sz=128", "display_name": "Jerry Tsui", "link": "https://stackoverflow.com/users/8475169/jerry-tsui"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519860565, "creation_date": 1519860565, "question_id": 49040352, "link": "https://stackoverflow.com/questions/49040352/numpy-2-d-boolean-mask", "title": "Numpy 2-D boolean mask", "body": "<p>I am trying to create a boolean mask for a 2-D numpy array of shape (100, 785), but I my mask comes out as (100, 1). </p>\n\n<pre><code>ywx = np.multiply(y_t, x_t @ w)\nmask = ywx &lt; 1 \n</code></pre>\n\n<p>where mask is my (100, 1) boolean mask.\nI am currently doing the following to expand it:</p>\n\n<pre><code>expanded_mask = np.array([np.repeat(boolean[0], 785) for boolean in mask])\n</code></pre>\n\n<p>Is there a better way to do this?</p>\n"}, {"tags": ["python", "python-3.x", "python-requests", "python-responses"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 9426195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9b3b4807f3edcfdacc1d7bdcb130f7?s=128&d=identicon&r=PG&f=1", "display_name": "akkaria", "link": "https://stackoverflow.com/users/9426195/akkaria"}, "edited": false, "score": 0, "creation_date": 1519863770, "post_id": 49040490, "comment_id": 85086912, "body": "Thanks for your reply. Unforunatley your first line of code defines the tempTarget as 24 however, what i am trying to do is rather than specify the tempTarget, it will get specified by using the request.get to get the current tempTarget and then adding 1 to that."}], "tags": [], "owner": {"reputation": 1, "user_id": 9426287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec320a806c533fe363e820c59944d52c?s=128&d=identicon&r=PG&f=1", "display_name": "mrokita", "link": "https://stackoverflow.com/users/9426287/mrokita"}, "is_accepted": false, "score": 0, "last_activity_date": 1519861534, "creation_date": 1519861534, "answer_id": 49040490, "question_id": 49040347, "link": "https://stackoverflow.com/questions/49040347/python-request-get-and-put-data-in-increments/49040490#49040490", "title": "Python request get and put data in increments", "body": "<p>Use json.dumps()  </p>\n\n<pre><code>&gt;&gt;&gt; data = json.loads('{\"DA\":{\"tempTarget\":24}}')\n&gt;&gt;&gt; data['DA']['tempTarget'] += 1\n&gt;&gt;&gt; json.dumps(data)\n'{\"DA\": {\"tempTarget\": 25}}'\n&gt;&gt;&gt; \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 9426195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd9b3b4807f3edcfdacc1d7bdcb130f7?s=128&d=identicon&r=PG&f=1", "display_name": "akkaria", "link": "https://stackoverflow.com/users/9426195/akkaria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1519861534, "creation_date": 1519860536, "question_id": 49040347, "link": "https://stackoverflow.com/questions/49040347/python-request-get-and-put-data-in-increments", "title": "Python request get and put data in increments", "body": "<p>first time post, long time reader. I am very new to coding and just trying to teach myself using the net.</p>\n\n<p>I have some code in python im having trouble with and would love some help. I have 2 python scripts that basically read data from my AC unit and the second sends data to it.</p>\n\n<p>Here is the code to get data...(the results are just a long line of text hence the formatted data to extract particular info)</p>\n\n<pre><code>#!/usr/bin/python\n\nimport requests\nimport json\n\nlink = \"https://actron.ninja.is/rest/v0/device/ACONNECT001EC015ABFE_0_2_4?&lt;user_access_token&gt;\"\nf = requests.get(link)\n\nraw_data = f.text\n\nformatted_data = json.loads(raw_data)\n\namOn = formatted_data['data']['last_data']['DA']['amOn']\ntempTarget = formatted_data['data']['last_data']['DA']['tempTarget']\n\nprint (tempTarget)\n</code></pre>\n\n<p>and the code to send data...</p>\n\n<pre><code>#!/usr/bin/python\n\nimport requests\n\nheaders = {\n    'Origin': 'https://actronair.com.au',\n    'Accept-Encoding': 'gzip, deflate, br',\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n    'Referer': 'https://actronair.com.au/aconnect/',\n    'Connection': 'keep-alive',\n}\n\nparams = (\n    ('user_access_token', '&lt;user access token&gt;'),\n)\n\ndata = '{\"DA\":{\"tempTarget\":24}}'\n\nresponse = requests.put('https://actron.ninja.is/rest/v0/device/ACONNECT001EC015ABFE_0_2_4', headers=headers, params=params, data=data)\n</code></pre>\n\n<p>My question and what my goal is, i'd like to merge this into one python file and basically have the program read the current 'tempTarget' and then increase it by an increment of 1 in which this script will be eventually attached to a button.</p>\n\n<p>I am struggling with this as the data sent is a string so i'm imaging i need to convert it to say a dict and +1 the received tempTarget and then back to a string, i just cant seem to get the converting and sequencing right. Or maybe this isnt the way to do it.</p>\n\n<p>Your help is much appreciated.</p>\n"}, {"tags": ["python", "gmm"], "comments": [{"owner": {"reputation": 1341, "user_id": 6388994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d56f9550cf209ae3c4620eb1a31109?s=128&d=identicon&r=PG&f=1", "display_name": "Usernamenotfound", "link": "https://stackoverflow.com/users/6388994/usernamenotfound"}, "edited": false, "score": 0, "creation_date": 1519861346, "post_id": 49040208, "comment_id": 85086242, "body": "What does the data look like?"}, {"owner": {"reputation": 89, "user_id": 9330348, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/eb05160d0b29d013174c14f7bcbc1338?s=128&d=identicon&r=PG&f=1", "display_name": "user42967", "link": "https://stackoverflow.com/users/9330348/user42967"}, "reply_to_user": {"reputation": 1341, "user_id": 6388994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d56f9550cf209ae3c4620eb1a31109?s=128&d=identicon&r=PG&f=1", "display_name": "Usernamenotfound", "link": "https://stackoverflow.com/users/6388994/usernamenotfound"}, "edited": false, "score": 0, "creation_date": 1519861531, "post_id": 49040208, "comment_id": 85086310, "body": "what do you mean by that? plotted?"}, {"owner": {"reputation": 9344, "user_id": 5781745, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lStUs.jpg?s=128&g=1", "display_name": "K.D\u1d00\u1d20\u026as", "link": "https://stackoverflow.com/users/5781745/k-d%e1%b4%80%e1%b4%a0%c9%aas"}, "edited": false, "score": 0, "creation_date": 1519866652, "post_id": 49040208, "comment_id": 85087592, "body": "Grammar. // <a href=\"https://stackoverflow.com/review/helper/18967362\">stackoverflow.com/review/helper/18967362</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2568, "user_id": 6939324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1Tjoe.jpg?s=128&g=1", "display_name": "SuperKogito", "link": "https://stackoverflow.com/users/6939324/superkogito"}, "is_accepted": false, "score": 1, "last_activity_date": 1533737173, "last_edit_date": 1533737173, "creation_date": 1533736568, "answer_id": 51748554, "question_id": 49040208, "link": "https://stackoverflow.com/questions/49040208/gaussian-mixture-model-gives-negative-value-scores/51748554#51748554", "title": "Gaussian Mixture Model gives negative value scores", "body": "<p>The code works as expected. The function <code>gmm.score(testingFeat)</code> returns the computed log probabilities of each point in the input data. Here is <a href=\"http://scikit-learn.org/0.15/modules/generated/sklearn.mixture.GMM.html#sklearn.mixture.GMM.score\" rel=\"nofollow noreferrer\">the documentation of score()</a></p>\n\n<p>Log probabilities are simply the logarithm of the probabilities -which belong to the interval (0,1)- and so they are negative. To reverse this you can apply the exponential function as in this <a href=\"https://stackoverflow.com/questions/48465737/how-to-convert-log-probability-into-simple-probability-between-0-and-1-values-us\">post</a>.</p>\n\n<p>However this won't result in percentage/probabilities like scores because your data might not be uniformly distributed. This is explained in more details <a href=\"https://stackoverflow.com/questions/36962585/convert-gmm-ubm-scores-to-equicalent-accuracy-percent\">here</a>. </p>\n"}], "owner": {"reputation": 89, "user_id": 9330348, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/eb05160d0b29d013174c14f7bcbc1338?s=128&d=identicon&r=PG&f=1", "display_name": "user42967", "link": "https://stackoverflow.com/users/9330348/user42967"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2188, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1533737173, "creation_date": 1519859465, "last_edit_date": 1519866652, "question_id": 49040208, "link": "https://stackoverflow.com/questions/49040208/gaussian-mixture-model-gives-negative-value-scores", "title": "Gaussian Mixture Model gives negative value scores", "body": "<p>I am trying to train multiple GMM model with different training words. Then I am trying to test my models with an unseen testing word, I am getting negative values. Any idea what I am doing wrong?</p>\n\n<pre><code>from python_speech_features import mfcc\nfrom python_speech_features import delta\nfrom sklearn.mixture import GaussianMixture \nimport pandas as pd\nimport scipy.io.wavfile as wav\nimport os, glob\nimport numpy as np\n</code></pre>\n\n<p>Reading all training files</p>\n\n<pre><code>rate = []#reading rates and signals of all Training wav files\nsig = []\nfor filename in glob.glob('Data\\Training\\*.wav'):\n    sr_value, x_value = wav.read(filename)\n    rate.append(sr_value)\n    sig.append(x_value)\n</code></pre>\n\n<p>Calculating mfcc for each signal</p>\n\n<pre><code>all_mfcc_feat = []\nfor audio in sig:\n    #defaults\n    all_mfcc_feat.append(mfcc(signal = audio, samplerate = 16000, winlen = 0.025, winstep = 0.01, nfilt=26, nfft = 512, numcep = 13, preemph = 0.97, ceplifter=22, appendEnergy =False))\n</code></pre>\n\n<p>Calculating deltas for each signal</p>\n\n<pre><code>delta_oneT = []\ndouble_deltaT = []\nfor mfcc in all_mfcc_feat:\n    delta1 = (delta(mfcc, 2))\n    delta_oneT.append(delta1) #calculating delta\n    double_deltaT.append(delta(delta1, 2)) #calculating double delta from previous delta\n\ntraining_feat = []\nfor i in range (0, len(all_mfcc_feat)): #iterate through signals\n    df = pd.DataFrame(data = None, )\n\n    for j in range (0, len(all_mfcc_feat[i])): #iterate through list of mfcc's\n        combined = np.concatenate([all_mfcc_feat[i][j],delta_oneT[i][j], double_deltaT[i][j] ])\n        df = df.append(pd.Series(combined), ignore_index = True)\n    dfnew = df.values\n    training_feat.append(dfnew)\n\n\n(sr_valueX, x_valueX) = wav.read('Data\\Testing\\wiehedT.wav')\n\nmfcc_test = mfcc(x_valueX, sr_valueX)\n\ndelta_oneTest = []\ndouble_deltaTest = []\ndelta1T = delta(mfcc_test, 2)\ndelta_oneTest.append(delta1T) #calculating delta\ndouble_deltaTest.append(delta(delta1, 2)) #calculating double delta from previous delta\n\n\ndf = pd.DataFrame(data = None, )\nfor i in range (0, len(mfcc_test)):  \n    combined = np.concatenate([mfcc_test[i],delta_oneTest[0][i],double_deltaTest[0][i]])\n    df = df.append(pd.Series(combined), ignore_index = True) \ntestingFeat = df.values\n\nallmodels = []\nfor feat in training_feat:\n    gmm = GaussianMixture() #default weights and means\n    gmm.fit(feat)\n    allmodels.append(gmm)\n\ni = 1\nfor gmm in allmodels:\n    print 'Model ',i\n    scores = gmm.score(testingFeat)\n    print scores\n    i = i+1\n</code></pre>\n"}, {"tags": ["python", "visual-studio", "svn", "virtual-environment"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1519859590, "post_id": 49040191, "comment_id": 85085727, "body": "its not typically considered too burdensom to expect others to <code>pip install -r requirements.txt</code> and let them manage their own virtual environments ... if you really really need to share your venv folder just share it .... if you really wanted to ensure a perfect environment you could just give them a dockerfile ..."}], "answers": [{"tags": [], "owner": {"reputation": 701, "user_id": 1020762, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1083d52c128e2202a395248b17de703e?s=128&d=identicon&r=PG", "display_name": "DingLi", "link": "https://stackoverflow.com/users/1020762/dingli"}, "is_accepted": false, "score": 2, "last_activity_date": 1520240240, "creation_date": 1520240240, "answer_id": 49106627, "question_id": 49040191, "link": "https://stackoverflow.com/questions/49040191/visual-studio-python-virtual-environments-in-source-control/49106627#49106627", "title": "Visual studio: Python virtual environments in source control", "body": "<p>IMHO: the best way to do is to have a requirements.txt, and write how to install python env. in readme.txt.</p>\n\n<p>What you will check-in is requirements.txt and the readme. </p>\n"}, {"tags": [], "owner": {"reputation": 1124, "user_id": 2149093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb03f51fd573efda46453d9b928de5e2?s=128&d=identicon&r=PG", "display_name": "Stanislas", "link": "https://stackoverflow.com/users/2149093/stanislas"}, "is_accepted": true, "score": 6, "last_activity_date": 1520338899, "creation_date": 1520338899, "answer_id": 49130744, "question_id": 49040191, "link": "https://stackoverflow.com/questions/49040191/visual-studio-python-virtual-environments-in-source-control/49130744#49130744", "title": "Visual studio: Python virtual environments in source control", "body": "<p>After posting an <a href=\"https://github.com/MicrosoftDocs/visualstudio-docs/issues/644#issuecomment-370613022\" rel=\"noreferrer\">issue on the MicrosoftDocs GitHub</a>, I received the following reply from <a href=\"https://github.com/zooba\" rel=\"noreferrer\">zooba</a>:</p>\n\n<blockquote>\n  <p>There's certainly some work in progress around this area. We're looking at different designs here and ways to better align VS and VS Code.</p>\n  \n  <p>For Visual Studio: the intent for virtual environments in a Python project file is that you have the environment within your project directory, so it is only referenced by a relative path. If you also keep a requirements.txt file in your project, it should only be a couple of clicks to recreate it on a new machine (we had considered automatic prompts to help out here, but most user feedback indicated we had other stuff to fix first).</p>\n  \n  <p>So our broad recommendations would be:</p>\n  \n  <ul>\n  <li>have the \"main\" virtual environment be at the default location (env in the project folder)</li>\n  <li>exclude the entire environment itself from version control</li>\n  <li>keep development requirements in a requirements.txt file</li>\n  <li>recreate the virtual environment on new machines with the normal Add Virtual Environment command (having the default location and requirements file will make this smoothest - we'll change it from \"missing\" to found as soon as it's created) </li>\n  </ul>\n  \n  <p>Obviously feel free to vary these as they make sense. You can also have a different task create the virtual environment (e.g. a batch file that runs <code>python -m venv path\\to\\env</code>) and we'll still pick it up just fine without having to modify the project file.</p>\n  \n  <p>And as we work on improvements here for the overall process, it should get easier to just have an environment \"somewhere\" and use it, rather than having to make specific configuration settings in your project.</p>\n</blockquote>\n"}], "owner": {"reputation": 1124, "user_id": 2149093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb03f51fd573efda46453d9b928de5e2?s=128&d=identicon&r=PG", "display_name": "Stanislas", "link": "https://stackoverflow.com/users/2149093/stanislas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1227, "favorite_count": 0, "accepted_answer_id": 49130744, "answer_count": 2, "score": 6, "last_activity_date": 1520338899, "creation_date": 1519859371, "question_id": 49040191, "link": "https://stackoverflow.com/questions/49040191/visual-studio-python-virtual-environments-in-source-control", "title": "Visual studio: Python virtual environments in source control", "body": "<p>I've managed to succesfully setup a Visual Studio Python project. I now want to share this project with other developers through source control (the company I work at uses <a href=\"https://subversion.apache.org/\" rel=\"noreferrer\">SVN</a>).</p>\n\n<p>As I want to avoid each of my colleagues having to manually setup the same Python environment, I looked into using a <a href=\"https://docs.microsoft.com/nl-nl/visualstudio/python/managing-python-environments-in-visual-studio\" rel=\"noreferrer\">Virtual Environment</a>. In my head, this seems very similar as to how NPM modules are stored locally.</p>\n\n<p>Without too much hassle, I managed to setup a Virtual Environment, which works brilliantly.</p>\n\n<p>However, I was ready to exclude my \"Virtual Environment\"-folder from being checked into SVN, when I noticed that the \"pyproj\"-file contains a reference to my local virtual environment:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;ItemGroup&gt;\n  &lt;Interpreter Include=\"VirtualEnvironment\\\"&gt;\n  &lt;Id&gt;VirtualEnvironment&lt;/Id&gt;\n  &lt;Version&gt;3.6&lt;/Version&gt;\n  &lt;Description&gt;VirtualEnvironment (Python 3.6 (64-bit))&lt;/Description&gt;\n  &lt;InterpreterPath&gt;Scripts\\python.exe&lt;/InterpreterPath&gt;\n  &lt;WindowsInterpreterPath&gt;Scripts\\pythonw.exe&lt;/WindowsInterpreterPath&gt;\n  &lt;PathEnvironmentVariable&gt;PYTHONPATH&lt;/PathEnvironmentVariable&gt;\n  &lt;Architecture&gt;X64&lt;/Architecture&gt;\n&lt;/Interpreter&gt;\n</code></pre>\n\n<p></p>\n\n<p>If I remove the \"Virtual Environment\"-folder and open the Visual Studio solution, I don't have any option to restore the environment based on the generated \"requirements.txt\"-file (as I expected). Unless I remove the non-working \"Virtual Environment\" and add a completely new one.</p>\n\n<p>This leads me to believe that there is something wrong in my work-flow or assumptions.</p>\n\n<ul>\n<li>Should I not exclude the virtual environment from being checked-in?</li>\n<li>Should I only exclude parts of the virtual environment and if so, which parts?</li>\n</ul>\n\n<p><em>Side notes:</em> </p>\n\n<ul>\n<li><em>As you can probably tell, I'm still fairly new to using Python, so any advice is very welcome.</em></li>\n<li><em>The reason I want to use Visual Studio is because the company is primarily .NET focused, which makes it a very farmiliar environment for most developers.</em></li>\n<li><em>I did read <a href=\"https://docs.microsoft.com/nl-nl/visualstudio/python/tutorial-working-with-python-in-visual-studio-step-06-working-with-git\" rel=\"noreferrer\">Working with python in Visual Studio - Step 06 Working with Git</a>, but it doesn't mention Virtual Environments at all.</em></li>\n</ul>\n"}, {"tags": ["python", "fabric"], "comments": [{"owner": {"reputation": 1341, "user_id": 6388994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d56f9550cf209ae3c4620eb1a31109?s=128&d=identicon&r=PG&f=1", "display_name": "Usernamenotfound", "link": "https://stackoverflow.com/users/6388994/usernamenotfound"}, "edited": false, "score": 0, "creation_date": 1519861825, "post_id": 49040154, "comment_id": 85086380, "body": "Yes. It can, but it doesn&#39;t make sense. Just add another exception for the error type"}, {"owner": {"reputation": 1341, "user_id": 6388994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d56f9550cf209ae3c4620eb1a31109?s=128&d=identicon&r=PG&f=1", "display_name": "Usernamenotfound", "link": "https://stackoverflow.com/users/6388994/usernamenotfound"}, "edited": false, "score": 1, "creation_date": 1519861934, "post_id": 49040154, "comment_id": 85086408, "body": "Or put it all in a loop where a successful run breaks the loop and unsuccessful run continues the loop"}], "owner": {"reputation": 87, "user_id": 1264698, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/932eb121878062246bed2c3b454ac385?s=128&d=identicon&r=PG", "display_name": "Arin Ekandem", "link": "https://stackoverflow.com/users/1264698/arin-ekandem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 20, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519863187, "creation_date": 1519859207, "last_edit_date": 1519863187, "question_id": 49040154, "link": "https://stackoverflow.com/questions/49040154/fabric-handle-error-when-mirror-not-available", "title": "Fabric - Handle error when mirror not available", "body": "<p>My fabric script installs AWS Systems Manager from a mirror. Right now it fails if the mirror is not available.\nIs there a way to handle this situation? I would love to supply additional mirrors and have it try each until successful. How can I add that?</p>\n\n<pre><code>def ssm_install():\ntry:\n    is_running = sudo('status amazon-ssm-agent', warn_only=True)\n    if \"start/running\" in is_running:\n        sys.exit()\n    else:\n        run('mkdir -p /tmp/ssm')\n        run('cd /tmp/ssm')\n        sudo('yum install -y https://s3.amazonaws.com/ec2-downloads-windows/SSMAgent/latest/linux_amd64/amazon-ssm-agent.rpm')\n        sys.exit()\nexcept NetworkError:\n    print \"Can't connect to this host\"\n    sys.exit()\n</code></pre>\n"}, {"tags": ["python", "expect", "pexpect"], "comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1519873086, "post_id": 49040123, "comment_id": 85089082, "body": "You might want to show some of your python code, so people can help you fix it."}, {"owner": {"reputation": 14947, "user_id": 900078, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/83stK.jpg?s=128&g=1", "display_name": "pynexj", "link": "https://stackoverflow.com/users/900078/pynexj"}, "edited": false, "score": 0, "creation_date": 1519999472, "post_id": 49040123, "comment_id": 85146572, "body": "in case u also need to use <i>output_filter</i> some day, see <a href=\"https://stackoverflow.com/questions/43371249/\">using-expect-and-interact-simultaneously-in-pexpect</a> :)"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 1622949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUZAj.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1622949/chris"}, "edited": false, "score": 0, "creation_date": 1519923134, "post_id": 49042132, "comment_id": 85114116, "body": "Here&#39;s the result when I use this:"}, {"owner": {"reputation": 119, "user_id": 1622949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUZAj.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1622949/chris"}, "edited": false, "score": 0, "creation_date": 1519993220, "post_id": 49042132, "comment_id": 85142852, "body": "Thanks, this does work now in Python 3, though the colon operator is a shell specific thing.  If I try to print something within that, it doesn&#39;t appear until after the EOF occurs.  Is there no equivalent to send_user for pexpect?"}, {"owner": {"reputation": 119, "user_id": 1622949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUZAj.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1622949/chris"}, "edited": false, "score": 0, "creation_date": 1519995639, "post_id": 49042132, "comment_id": 85144233, "body": "the print statements are only appearing AFTER EOF, not during the interactive session.  If per my original question, I wanted to display a menu of ctrl+modifier commands to my user, print would not suffice, and returning a string would merely send that string into the spawned child."}, {"owner": {"reputation": 119, "user_id": 1622949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUZAj.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1622949/chris"}, "reply_to_user": {"reputation": 14947, "user_id": 900078, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/83stK.jpg?s=128&g=1", "display_name": "pynexj", "link": "https://stackoverflow.com/users/900078/pynexj"}, "edited": false, "score": 0, "creation_date": 1519995922, "post_id": 49042132, "comment_id": 85144393, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/166102/discussion-between-chris-and-pynexj\">continue this discussion in chat</a>."}, {"owner": {"reputation": 119, "user_id": 1622949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUZAj.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1622949/chris"}, "edited": false, "score": 0, "creation_date": 1519996582, "post_id": 49042132, "comment_id": 85144806, "body": "No problem.  Here is a <a href=\"https://stackoverflow.com/questions/49069887/pexpect-equivalent-of-send-user\">new question</a> posed with the example."}], "tags": [], "owner": {"reputation": 14947, "user_id": 900078, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/83stK.jpg?s=128&g=1", "display_name": "pynexj", "link": "https://stackoverflow.com/users/900078/pynexj"}, "is_accepted": true, "score": 2, "last_activity_date": 1519979575, "last_edit_date": 1519979575, "creation_date": 1519874662, "answer_id": 49042132, "question_id": 49040123, "link": "https://stackoverflow.com/questions/49040123/creating-interactive-options-in-pexpect/49042132#49042132", "title": "Creating interactive options in pexpect", "body": "<p>See following example (works for both <strong>Python2</strong> and <strong>Python3</strong>):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[STEP 114] # cat foo.py\nimport pexpect\n\ndef input_filter(s):\n    if s == b'\\x03':\n        return b'\\r: r u going to kill me? press ctrl-d to exit!\\r'\n    elif s == b'\\x04':\n        return b'\\r: ok, bye; exit\\r'\n    else:\n        return s\n\nproc = pexpect.spawn('bash --norc')\nproc.interact(input_filter=input_filter)\nproc.expect(pexpect.EOF)\n[STEP 115] # python foo.py\nbash-4.4# ps                      &lt;-- user input\n   PID TTY          TIME CMD\n 77616 pts/56   00:00:00 bash\n 77617 pts/56   00:00:00 ps\nbash-4.4#                         &lt;-- press CTRL-C\nbash-4.4# : r u going to kill me? press ctrl-d to exit!\nbash-4.4#                         &lt;-- press CTRL-D\nbash-4.4# : ok, bye; exit\nexit\n[STEP 116] #\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 1622949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUZAj.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/1622949/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 1, "accepted_answer_id": 49042132, "answer_count": 1, "score": 1, "last_activity_date": 1520017329, "creation_date": 1519859031, "last_edit_date": 1520017329, "question_id": 49040123, "link": "https://stackoverflow.com/questions/49040123/creating-interactive-options-in-pexpect", "title": "Creating interactive options in pexpect", "body": "<p>This is sort of a clunky question as I can't figure out a good way to describe it, but in expect you can do something like this:</p>\n\n<pre><code>interact {\n    \\001 {do_something}\n    \\003 {do_something_else}\n    \"?\" {\n      set timeout 1\n      expect_user {\n                   \"?\" {send \"?\"}\n                   timeout {send_user \"show a menu of the things you can do\"}\n      }\n      stty raw -echo\n      set timeout 60\n    }\n    \\035 {send \"^]\"\n      send \"quit\\r\"\n      send_user \"\\n\"\n      exit\n    }\n  }\n</code></pre>\n\n<p>which would create an interactive session where the user could go about business as usual, but upon pressing keyboard combos (<kbd>ctrl</kbd>+<kbd>a</kbd>, <kbd>ctrl</kbd>+<kbd>c</kbd>, <kbd>ctrl</kbd>+<kbd>e</kbd>, ?, etc) execute actions or display text describing the possible shortcuts.</p>\n\n<p>I'm trying to update a number of scripts to python &amp; pexpect but haven't been able to figure out if this is possible in pexpect.  I tried putzing around with an input filter but it seems this isn't really the 'right' place to do it, or maybe I just can't seem to find any good examples of it in action.</p>\n\n<p>@pynexj: tried your script, though I'm not getting anything on stdout from the ctrl commands.</p>\n\n<pre><code>16:51:16 ~/scripts $ p3 testInputFilter.py | tee testInput.txt\n16:51:19 ~/scripts $ ps u\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nusr 45721  0.0  0.0 109620  1876 pts/1    Ss   16:49   0:00 -ksh\nusr 46622  0.0  0.0 108436  1776 pts/1    S    16:51   0:00 bash\nusr 46734  5.5  0.0 135728  7688 pts/1    S+   16:51   0:00 python3.6 testI\nusr 46735  0.0  0.0 100912   632 pts/1    S+   16:51   0:00 tee testInput.t\nusr 46736  0.0  0.0 108336  1692 pts/5    Ss   16:51   0:00 /bin/bash --nor\nusr 46759  0.0  0.0 110236  1132 pts/5    R+   16:51   0:00 ps u\n16:51:21 ~/scripts $ ^C\n16:51:42 ~/scripts $ exit\n16:51:43 ~/scripts $ cat testInput.txt\n16:51:19 ~/scripts $ ps u\nUSER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND\nusr 45721  0.0  0.0 109620  1876 pts/1    Ss   16:49   0:00 -ksh\nusr 46622  0.0  0.0 108436  1776 pts/1    S    16:51   0:00 bash\nusr 46734  5.5  0.0 135728  7688 pts/1    S+   16:51   0:00 python3.6 testI\nusr 46735  0.0  0.0 100912   632 pts/1    S+   16:51   0:00 tee testInput.t\nusr 46736  0.0  0.0 108336  1692 pts/5    Ss   16:51   0:00 /bin/bash --nor\nusr 46759  0.0  0.0 110236  1132 pts/5    R+   16:51   0:00 ps u\n16:51:21 ~/scripts $ ^C\n16:51:42 ~/scripts $ exit\n16:51:57 ~/scripts $\n</code></pre>\n"}, {"tags": ["python", "grep", "bioinformatics", "fasta", "fastq"], "comments": [{"owner": {"reputation": 855, "user_id": 8207355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b97cf1b0439fe13dd27c8f4c3ee0f9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Craig", "link": "https://stackoverflow.com/users/8207355/sam-craig"}, "edited": false, "score": 0, "creation_date": 1519859518, "post_id": 49040100, "comment_id": 85085704, "body": "So you have the genetic sequence and you want to know the 2 lines following the sequence in the fastq file are?"}, {"owner": {"reputation": 530, "user_id": 6749238, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/35c5ac4bc731e72395a7754775a04530?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/6749238/paul"}, "reply_to_user": {"reputation": 855, "user_id": 8207355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4b97cf1b0439fe13dd27c8f4c3ee0f9?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Craig", "link": "https://stackoverflow.com/users/8207355/sam-craig"}, "edited": false, "score": 0, "creation_date": 1519861362, "post_id": 49040100, "comment_id": 85086248, "body": "Hey Sam yes that is correct."}], "answers": [{"tags": [], "owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "is_accepted": true, "score": 3, "last_activity_date": 1519859989, "last_edit_date": 1519859989, "creation_date": 1519859597, "answer_id": 49040228, "question_id": 49040100, "link": "https://stackoverflow.com/questions/49040100/python-print-lines-after-context/49040228#49040228", "title": "Python print lines after context", "body": "<p>You can use <a href=\"https://docs.python.org/2/library/functions.html#next\" rel=\"nofollow noreferrer\"><code>next()</code></a> to advance an iterator (including files):</p>\n\n<pre><code>print(next(fq))\nprint(next(fq))\n</code></pre>\n\n<p>This consumes those lines, so the <code>for</code> loop will continue with <code>@read2</code>.</p>\n\n<p>if you don't want the <code>AAA...</code> line, you can also just consume it with <code>next(fq)</code>. In full:</p>\n\n<pre><code>fastq = open(Example.fastq, \"r\")\n\nIDs = [read1]\n\nwith fastq as fq:\n    for line in fq:\n        if any(string in line for string in IDs):\n            next(fq)  # skip AAA line\n            print(next(fq).strip())  # strip off the extra newlines\n            print(next(fq).strip())\n</code></pre>\n\n<p>which gives</p>\n\n<pre><code>+\n'(''%$'))%**)2+'.(&amp;&amp;'/5-\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18644, "user_id": 50065, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f8b1ed37a47da3547e6f0b6f60a916a3?s=128&d=identicon&r=PG", "display_name": "BioGeek", "link": "https://stackoverflow.com/users/50065/biogeek"}, "is_accepted": false, "score": 1, "last_activity_date": 1519990610, "last_edit_date": 1519990610, "creation_date": 1519989843, "answer_id": 49068138, "question_id": 49040100, "link": "https://stackoverflow.com/questions/49040100/python-print-lines-after-context/49068138#49068138", "title": "Python print lines after context", "body": "<p>If you're handling FASTQ files, you're better off using a bioinformatics library like <a href=\"http://biopython.org/\" rel=\"nofollow noreferrer\">BioPython</a> instead of rolling your own parser.</p>\n\n<p>To get the exact result you requested, you can do:</p>\n\n<pre><code>from Bio.SeqIO.QualityIO import FastqGeneralIterator\n\nIDs = ['read1']\n\nwith open('Example.fastq') as in_handle:\n    for title, seq, qual in FastqGeneralIterator(in_handle):\n        # The ID is the first word in the title line (after the @ sign):\n        if title.split(None, 1)[0] in IDs:\n            # Line 3 is always a '+', optionally followed by the same sequence identifier again.\n            print('+') \n            print(qual)\n</code></pre>\n\n<p>But you can't do much with the line of quality values on its own. Your next step will be almost certainly be to convert it to <a href=\"https://en.wikipedia.org/wiki/Phred_quality_score\" rel=\"nofollow noreferrer\">Phred quality scores</a>. But this is notoriously complicated <a href=\"https://github.com/biopython/biopython/blob/0008a0dd3b9f482de15704001bb79623c5baed0a/Bio/SeqIO/QualityIO.py#L69\" rel=\"nofollow noreferrer\">because there are at least <em>three</em> different and <em>incompatible</em> variants of the FASTQ file format</a>. BioPython takes care of all the edge cases for you, so that you can just do:</p>\n\n<pre><code>from Bio.SeqIO import parse\n\nIDs = ['read1']\n\nwith open('Example.fastq') as in_handle:\n    for record in parse(in_handle, 'fastq'):\n        if record.id in IDs:\n            print(record.letter_annotations[\"phred_quality\"])\n</code></pre>\n"}], "owner": {"reputation": 530, "user_id": 6749238, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/35c5ac4bc731e72395a7754775a04530?s=128&d=identicon&r=PG&f=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/6749238/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 49040228, "answer_count": 2, "score": 1, "last_activity_date": 1519990610, "creation_date": 1519858889, "question_id": 49040100, "link": "https://stackoverflow.com/questions/49040100/python-print-lines-after-context", "title": "Python print lines after context", "body": "<p>How can I print two lines after the context i am interest in using python.</p>\n\n<p>Example.fastq</p>\n\n<pre><code>@read1\nAAAGGCTGTACTTCGTTCCAGTTG\n+\n'(''%$'))%**)2+'.(&amp;&amp;'/5-\n@read2\nCTGAGTTGAGTTAGTGTTGACTC\n+\n)(+-0-2145=588..,(1-,12\n</code></pre>\n\n<p>I can find the context of interest using...</p>\n\n<pre><code>fastq = open(Example.fastq, \"r\")\n\nIDs = [read1]\n\nwith fastq as fq:\n    for line in fq:\n        if any(string in line for string in IDs):\n</code></pre>\n\n<p>Now that I have found read1 I want to print out the the following lines for read1.  In bash i might use something like grep -A to do this. The desired output lines look like the following.</p>\n\n<pre><code>+\n'(''%$'))%**)2+'.(&amp;&amp;'/5-\n</code></pre>\n\n<p>But in python i cant seem to find an equivalent tool.  Perhaps \"islice\" might work but I don't see how I can get islice to start at the position of the match.</p>\n\n<pre><code>with fastq as fq:\n    for line in fq:\n        if any(string in line for string in IDs):\n            print(list(islice(fq,3,4)))\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "types", "casting"], "comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1519859219, "post_id": 49040084, "comment_id": 85085614, "body": "When you loop over a dictionary, by default, you are looping over its keys."}], "answers": [{"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 3, "last_activity_date": 1519859081, "creation_date": 1519859081, "answer_id": 49040133, "question_id": 49040084, "link": "https://stackoverflow.com/questions/49040084/why-does-casting-a-python-dict-to-a-tuple-return-a-tuple-of-keys/49040133#49040133", "title": "Why does casting a Python dict to a tuple return a tuple of keys?", "body": "<p>Dictionary objects are clearly documented <a href=\"https://docs.python.org/3/library/stdtypes.html#mapping-types-dict\" rel=\"nofollow noreferrer\">here</a>:</p>\n\n<blockquote>\n  <p>iter(d)</p>\n  \n  <p>Return an iterator over the keys of the dictionary.</p>\n</blockquote>\n\n<p>Note, this is why I don't like using the term \"cast\" when you use <code>list</code> or <code>tuple</code> to convert <em>an iterable</em> into a list or tuple. And from the tuple <a href=\"https://docs.python.org/3/library/stdtypes.html#tuple\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p>class tuple([iterable]):</p>\n  \n  <p>...</p>\n  \n  <p>The constructor builds a <code>tuple</code> whose items are the same and in the\n  same order as <em>iterable</em>\u2019s items. <em>iterable</em> may be either a sequence,\n  a container that supports iteration, or an iterator object. If\n  <em>iterable</em> is already a tuple, it is returned unchanged. For example, <code>tuple('abc')</code> returns <code>('a', 'b', 'c')</code> and <code>tuple( [1, 2, 3] )</code>\n  returns <code>(1, 2, 3)</code>. If no argument is given, the constructor creates\n  a new empty tuple, <code>()</code>.</p>\n</blockquote>\n"}], "owner": {"reputation": 60, "user_id": 2457426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ff13116dcb950baa38942b6bde47931?s=128&d=identicon&r=PG", "display_name": "Davis Allen", "link": "https://stackoverflow.com/users/2457426/davis-allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 49040133, "answer_count": 1, "score": 1, "last_activity_date": 1519859081, "creation_date": 1519858815, "question_id": 49040084, "link": "https://stackoverflow.com/questions/49040084/why-does-casting-a-python-dict-to-a-tuple-return-a-tuple-of-keys", "title": "Why does casting a Python dict to a tuple return a tuple of keys?", "body": "<p>I came across some Python code that had me very confused.</p>\n\n<pre><code>my_dict = {'a': 'b'}\na, = my_dict            # a = 'a'\na, b = my_dict          # ValueError: Too many values to unpack\n</code></pre>\n\n<p>Basically, I found that casting a dictionary as a tuple returns a tuple of the dictionary's keys.</p>\n\n<pre><code>my_dict = {'a': 'b', 'c': 'd'}\na = tuple(my_dict)      # a = ('a', 'c')\n</code></pre>\n\n<p>Why does a tuple(dict) return a tuple of keys? I can make sense of it, but wasn't able to find any documentation or explanation around why. Can anyone explain this?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 8890, "user_id": 4349415, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ta4zl.png?s=128&g=1", "display_name": "Mike Scotty", "link": "https://stackoverflow.com/users/4349415/mike-scotty"}, "edited": false, "score": 6, "creation_date": 1519858935, "post_id": 49040074, "comment_id": 85085512, "body": "You don&#39;t go back in the loop, instead you put a while-loop around the user input and keep asking the user until the input satisfies the requirements (you may want to give the user a chance to exit the process, though)."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1519864476, "post_id": 49040074, "comment_id": 85087066, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/23294658/asking-the-user-for-input-until-they-give-a-valid-response\">Asking the user for input until they give a valid response</a>"}], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 2, "last_activity_date": 1519859949, "creation_date": 1519859949, "answer_id": 49040280, "question_id": 49040074, "link": "https://stackoverflow.com/questions/49040074/going-back-one-iteration-in-a-for-loop/49040280#49040280", "title": "Going back one iteration in a for loop?", "body": "<pre><code>def get_integer(prompt):\n    while True:\n       try:\n          return int(input(prompt))\n       except (ValueError,TypeError):\n          print(\"Expecting an integer\")\n</code></pre>\n\n<p>then you just call </p>\n\n<pre><code>my_int = get_integer(\"Enter score:\")\n</code></pre>\n\n<p>it will guarantee that you get an integer back</p>\n\n<p>you can also make other input helper functions, for example</p>\n\n<pre><code>def get_choice(prompt,i_expect_one_of_these_things):\n    while 1:\n        result = raw_input(prompt)\n        if result in i_expect_one_of_these_things:\n           return result\n        print(\"Invalid input!\")\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 9044510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/78865.jpg?s=128&g=1", "display_name": "Duane", "link": "https://stackoverflow.com/users/9044510/duane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1519861957, "creation_date": 1519858770, "last_edit_date": 1519861957, "question_id": 49040074, "link": "https://stackoverflow.com/questions/49040074/going-back-one-iteration-in-a-for-loop", "title": "Going back one iteration in a for loop?", "body": "<p>I was wondering if, while in a for loop and using a dictionary, you could go back an iteration if someone does not put in an appropriate value. If what I'm saying doesn't make much sense, maybe my code can give you a better idea of what I'm trying to do. </p>\n\n<pre><code>attributesD = {\"Charisma\": 0, \"Intelligence\" : 0 ,\"strength\" : 0 , \"agility\" : 0 , \"constitution\" : 0}\ntotalPoints = 15\n\ndef listing():\n\u00a0print(\" Attributes \".center(108,\"*\"))\n\u00a0abilitiesSteady_Print(\"\\n\\nPoints left: \" + str(totalPoints) + \"\\n\\n\")\n\u00a0for index in attributesD:\n\u00a0\u00a0\u00a0abilitiesSteady_Print(index + \": \" + str(attributesD[index]) + \"\\n\\n\")\n\nfor key in attributesD:\n\u00a0if totalPoints &gt; 0:\n\u00a0\u00a0\u00a0listing()\n\u00a0\u00a0\u00a0try:\n\u00a0\u00a0\u00a0\u00a0\u00a0attributesD[key] = int(input(\"\\n\\nHow many points would you like to put in \" + key + \"?\\n&gt;\"))\n\u00a0\u00a0\u00a0\u00a0\u00a0totalPoints -= attributesD[key]\n\u00a0\u00a0\u00a0\u00a0\u00a0replit.clear()\n\u00a0\u00a0\u00a0except:\n\u00a0\u00a0\u00a0\u00a0\u00a0steady_print(\"Not possible, try again\")\n\n\u00a0else:\n\u00a0\u00a0\u00a0continue\n</code></pre>\n\n<p>If the user doesn't put in an appropriate answer, it willl skip that attribute, and 0 will remain as the value. How to I prevent that from happening?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 902, "user_id": 3351984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ff8d1e84f332bc841f3b115b8162d2?s=128&d=identicon&r=PG&f=1", "display_name": "ddg", "link": "https://stackoverflow.com/users/3351984/ddg"}, "edited": false, "score": 1, "creation_date": 1519859361, "post_id": 49040059, "comment_id": 85085653, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/10377998/how-can-i-iterate-over-files-in-a-given-directory\">How can I iterate over files in a given directory?</a>"}, {"owner": {"reputation": 668, "user_id": 8451342, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6NaXd.png?s=128&g=1", "display_name": "Cleve Green", "link": "https://stackoverflow.com/users/8451342/cleve-green"}, "edited": false, "score": 0, "creation_date": 1519921351, "post_id": 49040059, "comment_id": 85112932, "body": "using shutil.move would move the image to whatever directory if that&#39;s what you&#39;re trying to figure out."}, {"owner": {"reputation": 1469, "user_id": 4663377, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bd20d0f6d0dc5f26cce14ea1287164d7?s=128&d=identicon&r=PG&f=1", "display_name": "Ajinkya", "link": "https://stackoverflow.com/users/4663377/ajinkya"}, "edited": false, "score": 0, "creation_date": 1519921624, "post_id": 49040059, "comment_id": 85113126, "body": "I tried PATH_TO_TEST_IMAGES_DIR = &#39;test_images&#39;    TEST_IMAGE_PATHS = os.listdir(PATH_TO_TEST_IMAGES_DIR) . this lists all the images in the path but this is not what I want I want all the images to join to the current path as shown in the original script in the question"}], "answers": [{"tags": [], "owner": {"reputation": 1469, "user_id": 4663377, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bd20d0f6d0dc5f26cce14ea1287164d7?s=128&d=identicon&r=PG&f=1", "display_name": "Ajinkya", "link": "https://stackoverflow.com/users/4663377/ajinkya"}, "is_accepted": true, "score": 0, "last_activity_date": 1519924962, "creation_date": 1519924962, "answer_id": 49055370, "question_id": 49040059, "link": "https://stackoverflow.com/questions/49040059/python-script-to-add-path-to-the-images/49055370#49055370", "title": "Python script to add path to the images", "body": "<pre><code>PATH_TO_TEST_IMAGES_DIR = 'test_images'\nTEST_IMAGE_PATHS = []\nfor ext in ('*.png', '*.jpeg'):\n    TEST_IMAGE_PATHS.extend(glob(join(PATH_TO_TEST_IMAGES_DIR, ext)))\n</code></pre>\n\n<p>solves the issue</p>\n"}], "owner": {"reputation": 1469, "user_id": 4663377, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/bd20d0f6d0dc5f26cce14ea1287164d7?s=128&d=identicon&r=PG&f=1", "display_name": "Ajinkya", "link": "https://stackoverflow.com/users/4663377/ajinkya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 0, "accepted_answer_id": 49055370, "answer_count": 1, "score": 1, "last_activity_date": 1519924962, "creation_date": 1519858688, "last_edit_date": 1519922452, "question_id": 49040059, "link": "https://stackoverflow.com/questions/49040059/python-script-to-add-path-to-the-images", "title": "Python script to add path to the images", "body": "<p>I have the following script wherein I add the path to the images in TEST_IMAGE_PATHS. My input is \"test_images\" folder. In \"test_images\" folder images are named as image0, image1, image2 etc.</p>\n\n<p>Script to add images in test_images to the path is:</p>\n\n<pre><code>PATH_TO_TEST_IMAGES_DIR = 'test_images'\nTEST_IMAGE_PATHS = [ os.path.join(PATH_TO_TEST_IMAGES_DIR, 'image{}.jpeg'.format(i)) for i in range(5, 7) ]\n</code></pre>\n\n<p>This script outputs:\n<a href=\"https://i.stack.imgur.com/jjms4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jjms4.png\" alt=\"enter image description here\"></a></p>\n\n<p>How do I modify this script such that: </p>\n\n<ol>\n<li><p>I can input any type of images(not just limited to jpeg) as mentioned above. Type of image include JPG, png, jpg, etc</p></li>\n<li><p>Images should not be named as image0, image1, image2, image3, image4, image5, image6 etc. It should not be restricted to this naming convention and should pick up all the images in the 'test_images' folder</p></li>\n</ol>\n\n<p>I referred <a href=\"https://stackoverflow.com/questions/10377998/how-can-i-iterate-over-files-in-a-given-directory\">How can I iterate over files in a given directory?</a>. as suggested, however this link explains how to reference files in the folder and add them to the path. My question has to do with modifications to do to the file after being added to the path. I am able to add files to the path using above script. I need to attach multiple extensions of images. to the existing path</p>\n"}, {"tags": ["python", "shapefile", "geopandas"], "comments": [{"owner": {"reputation": 2393, "user_id": 3494669, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/eHaR3.png?s=128&g=1", "display_name": "pe-perry", "link": "https://stackoverflow.com/users/3494669/pe-perry"}, "edited": false, "score": 0, "creation_date": 1519868516, "post_id": 49040025, "comment_id": 85087993, "body": "How does your .shp look like? Do you got the same problem when reading other .shp? And what do you really want?"}, {"owner": {"reputation": 31, "user_id": 7238415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7128e397fc9f212f150a57bf76453ff2?s=128&d=identicon&r=PG&f=1", "display_name": "Audrina", "link": "https://stackoverflow.com/users/7238415/audrina"}, "reply_to_user": {"reputation": 2393, "user_id": 3494669, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/eHaR3.png?s=128&g=1", "display_name": "pe-perry", "link": "https://stackoverflow.com/users/3494669/pe-perry"}, "edited": false, "score": 0, "creation_date": 1519916820, "post_id": 49040025, "comment_id": 85109695, "body": "@kitman0804 My shapefile is a list of multistrings and linestrings. I have the same problem reading other .shp. What I want is read in the shapefile, select by attributes, create buffer, and then join. I have the following code ready, just stucked with the first step: read files."}, {"owner": {"reputation": 104532, "user_id": 653364, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7a7a675bc479a30c1389d4c64f612a95?s=128&d=identicon&r=PG", "display_name": "joris", "link": "https://stackoverflow.com/users/653364/joris"}, "edited": false, "score": 0, "creation_date": 1520009822, "post_id": 49040025, "comment_id": 85153325, "body": "But the file was read in correctly? (you say &quot;GeoDataframe &#39;line&#39; exist&quot;) If so, I don&#39;t think you need to worry about this logging output. However, geopandas should not show it, but I thought this was fixed for geopandas 0.3.0 (see <a href=\"https://github.com/Toblerity/Fiona/issues/468\" rel=\"nofollow noreferrer\">github.com/Toblerity/Fiona/issues/468</a> and <a href=\"https://github.com/geopandas/geopandas/pull/496\" rel=\"nofollow noreferrer\">github.com/geopandas/geopandas/pull/496</a>)"}, {"owner": {"reputation": 104532, "user_id": 653364, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7a7a675bc479a30c1389d4c64f612a95?s=128&d=identicon&r=PG", "display_name": "joris", "link": "https://stackoverflow.com/users/653364/joris"}, "edited": false, "score": 0, "creation_date": 1520009976, "post_id": 49040025, "comment_id": 85153435, "body": "In any case, GDAL certainly works in python 3.6 as well. How did you install geopandas, fiona, gdal?"}, {"owner": {"reputation": 31, "user_id": 7238415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7128e397fc9f212f150a57bf76453ff2?s=128&d=identicon&r=PG&f=1", "display_name": "Audrina", "link": "https://stackoverflow.com/users/7238415/audrina"}, "reply_to_user": {"reputation": 104532, "user_id": 653364, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7a7a675bc479a30c1389d4c64f612a95?s=128&d=identicon&r=PG", "display_name": "joris", "link": "https://stackoverflow.com/users/653364/joris"}, "edited": false, "score": 0, "creation_date": 1520024168, "post_id": 49040025, "comment_id": 85160328, "body": "@joris Yes, file read in correctly, just with the logging warnings. Not sure if it will affect my later on calculations. I installed geopandas with severl different ways: conda install, conda-forge and pip. All three have the same warnings. I searched online and looks like it was a bug in geopandas and was fixed last year. Not sure why I encounter this."}], "owner": {"reputation": 31, "user_id": 7238415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7128e397fc9f212f150a57bf76453ff2?s=128&d=identicon&r=PG&f=1", "display_name": "Audrina", "link": "https://stackoverflow.com/users/7238415/audrina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 856, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1519927939, "creation_date": 1519858528, "last_edit_date": 1519927939, "question_id": 49040025, "link": "https://stackoverflow.com/questions/49040025/error-reading-shapefiles-using-geopandas-in-python", "title": "Error reading shapefiles using geopandas in Python", "body": "<p>I have a line shapefile file and I'm using the following code to read in it. </p>\n\n<pre><code>import geopandas as gpd\nline = gpd.read_file(r\"./line_UTM16.shp\")\n</code></pre>\n\n<p>GeoDataframe 'line' exist though with the following errors: </p>\n\n<pre><code>INFO     model.py:56  Reading line shapefile.\nWARNING  collection.py:145 GDAL data files not located, GDAL_DATA not set\nWARNING  collection.py:145 PROJ data files not located, PROJ_LIB not set\nDEBUG    collection.py:203 Got coordinate system\nDEBUG    collection.py:247 Index: 0\nDEBUG    collection.py:210 Got coordinate system\nDEBUG    collection.py:404 Flushed buffer\nDEBUG    collection.py:406 Stopped session\n</code></pre>\n\n<p>I'm using Python 3.6, I checked my package version:</p>\n\n<pre><code>geopandas    0.3.0   \nfiona        1.7.10  \ngdal         2.2.3   \nproj4        4.9.3   \n</code></pre>\n\n<p>How can I solve it, I think it is a data installation problem? The code runs fine for many days, and suddenly it is reporting the errors. \nThanks!</p>\n\n<p><strong>UPDATE:</strong> \nI did some research and it says that gdal only works with Python3.5, so I created a separate environment with Python3.5 and all the packages. The problem still exists!  GDAL_DATA not set and PROJ_LIB not set. Not sure if this is a software bug?</p>\n"}, {"tags": ["python", "subprocess", "virtualenv"], "answers": [{"tags": [], "owner": {"reputation": 3728, "user_id": 152043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d7fe904771aa932cb3ab37553916c45?s=128&d=identicon&r=PG", "display_name": "Michael Speer", "link": "https://stackoverflow.com/users/152043/michael-speer"}, "is_accepted": false, "score": 1, "last_activity_date": 1519860281, "creation_date": 1519860281, "answer_id": 49040317, "question_id": 49040017, "link": "https://stackoverflow.com/questions/49040017/can-i-use-a-single-python-script-to-create-a-virtualenv-and-install-requirements/49040317#49040317", "title": "Can I use a single python script to create a virtualenv and install requirements.txt?", "body": "<p>The <code>source</code> or <code>.</code> command causes the current shell to execute the given source file in it's environment. You'll need a shell in order to use it. This probably isn't as clean as you'd like it, since it uses a string instead of a list to represent the command, but it should work.</p>\n\n<pre><code>import subprocess\n\nsubprocess.check_call( [ 'virtualenv', 'env-dir' ] )\n\nsubprocess.check_call(\n    ' . env-dir/bin/activate &amp;&amp; pip install python-dateutil ',\n    shell = True\n)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "is_accepted": true, "score": 3, "last_activity_date": 1525877222, "last_edit_date": 1525877222, "creation_date": 1519862341, "answer_id": 49040596, "question_id": 49040017, "link": "https://stackoverflow.com/questions/49040017/can-i-use-a-single-python-script-to-create-a-virtualenv-and-install-requirements/49040596#49040596", "title": "Can I use a single python script to create a virtualenv and install requirements.txt?", "body": "<p><code>source</code> is a shell builtin command, not a program. It cannot and shouldn't be executed with <code>subprocess</code>. You can activate your fresh virtual env by executing <code>activate_this.py</code> in the current process:</p>\n\n<pre><code>if not os.path.exists(env_path):\n    call(['virtualenv', env_path])\n    activate_this = os.path.join(env_path, 'bin', 'activate_this.py')\n    execfile(activate_this, dict(__file__=activate_this))\n\nelse:\n    print \"INFO: %s exists.\" %(env_path)\n</code></pre>\n"}], "owner": {"reputation": 809, "user_id": 5414307, "user_type": "registered", "accept_rate": 11, "profile_image": "https://i.stack.imgur.com/VUwJR.jpg?s=128&g=1", "display_name": "trouselife", "link": "https://stackoverflow.com/users/5414307/trouselife"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1447, "favorite_count": 2, "accepted_answer_id": 49040596, "answer_count": 2, "score": 3, "last_activity_date": 1599297262, "creation_date": 1519858485, "last_edit_date": 1599297262, "question_id": 49040017, "link": "https://stackoverflow.com/questions/49040017/can-i-use-a-single-python-script-to-create-a-virtualenv-and-install-requirements", "title": "Can I use a single python script to create a virtualenv and install requirements.txt?", "body": "<p>I am trying to create a script where i create a virtualenv if it has not been made, and then install requirements.txt in it.</p>\n\n<p>I can't call the normal source /env/bin/activate and activate it, then use pip to install requirements.txt. Is there a way to activate the virtualenv and then install my requirements from a single python script?</p>\n\n<p>my code at the moment:</p>\n\n<pre><code>    if not os.path.exists(env_path):\n        call(['virtualenv', env_path])\n\n    else:\n        print \"INFO: %s exists.\" %(env_path)\n\n\n\n    try:\n        call(['source', os.path.join(env_path, 'bin', 'activate')])\n\n    except Exception as e:\n        print e\n</code></pre>\n\n<p>the error is \"No such file directory\" </p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "list"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 5, "creation_date": 1519858382, "post_id": 49039985, "comment_id": 85085302, "body": "<code>random.shuffle</code> is <b>in place</b>. You&#39;re filling <code>k</code> with references to the same list, so all ten lists in the result will be in the same random order. Maybe try a shallow copy, <code>k.append(x[:])</code>?"}, {"owner": {"reputation": 1387, "user_id": 4616611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90099c6ce97d206fcac50806bf8c74da?s=128&d=identicon&r=PG&f=1", "display_name": "Teodorico Levoff", "link": "https://stackoverflow.com/users/4616611/teodorico-levoff"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1519858469, "post_id": 49039985, "comment_id": 85085341, "body": "@jonrsharpe But In the python shell, I am able to continually execute random.shuffle(x) and checking x after each call, x does get shuffled."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1519858509, "post_id": 49039985, "comment_id": 85085363, "body": "Yes, of course it does, I&#39;m not saying otherwise. <code>k</code> actually contains the same sequence of <code>x</code> <i>shuffled</i>, but there are only so many unique orders so sometimes it <i>will</i> be the same as your starting position."}, {"owner": {"reputation": 1387, "user_id": 4616611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90099c6ce97d206fcac50806bf8c74da?s=128&d=identicon&r=PG&f=1", "display_name": "Teodorico Levoff", "link": "https://stackoverflow.com/users/4616611/teodorico-levoff"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1519858866, "post_id": 49039985, "comment_id": 85085493, "body": "@jonrsharpe I see! Now I&#39;m understanding."}], "answers": [{"tags": [], "owner": {"reputation": 4242, "user_id": 4339781, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fbffd4d2b6499b934ba13c3be551d509?s=128&d=identicon&r=PG&f=1", "display_name": "Windmill", "link": "https://stackoverflow.com/users/4339781/windmill"}, "is_accepted": true, "score": 2, "last_activity_date": 1519859117, "last_edit_date": 1519859117, "creation_date": 1519858615, "answer_id": 49040041, "question_id": 49039985, "link": "https://stackoverflow.com/questions/49039985/how-to-loop-though-range-and-randomly-shuffle-a-list-in-python/49040041#49040041", "title": "How to loop though range and randomly shuffle a list in Python?", "body": "<p>As mentioned by @jonrsharpe, <code>random.shuffle</code> acts on the list in place. When you append <code>x</code>, you are appending the reference to that specific object. As such, at the end of the loop, <code>k</code> contains ten pointers to the same object! </p>\n\n<p>To correct this, simply create a new copy of the list each iteration, as follows. This is done by calling <code>list()</code> when appending. </p>\n\n<pre><code>import random\nx = [1,0,0,1,1]\nk = []\nfor i in range(10):\n     random.shuffle(x)\n     k.append(list(x))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1519858760, "post_id": 49040046, "comment_id": 85085461, "body": "It would be helpful to explain what you&#39;ve changed and why."}], "tags": [], "owner": {"reputation": 1103, "user_id": 2773308, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/f4d06785903d1602d83a040fcfcb9377?s=128&d=identicon&r=PG&f=1", "display_name": "Miguel", "link": "https://stackoverflow.com/users/2773308/miguel"}, "is_accepted": false, "score": 0, "last_activity_date": 1519859064, "last_edit_date": 1519859064, "creation_date": 1519858635, "answer_id": 49040046, "question_id": 49039985, "link": "https://stackoverflow.com/questions/49039985/how-to-loop-though-range-and-randomly-shuffle-a-list-in-python/49040046#49040046", "title": "How to loop though range and randomly shuffle a list in Python?", "body": "<p>Try this:</p>\n\n<pre><code>x = [1,0,0,1,1]\nk = []\nfor i in range(10):\n     random.shuffle(x)\n     k.append(x.copy())\nreturn x\n</code></pre>\n\n<p>By replacing <code>x</code> with <code>x.copy()</code> you append to <code>k</code> a new list that looks like <code>x</code> at that moment instead of <code>x</code> itself.</p>\n"}, {"tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 2, "last_activity_date": 1519860668, "last_edit_date": 1519860668, "creation_date": 1519859846, "answer_id": 49040263, "question_id": 49039985, "link": "https://stackoverflow.com/questions/49039985/how-to-loop-though-range-and-randomly-shuffle-a-list-in-python/49040263#49040263", "title": "How to loop though range and randomly shuffle a list in Python?", "body": "<p>One pythonic way to create new random-orderings of a list is not to shuffle in place at all. Here is one implementation:</p>\n\n<pre><code>[random.sample(x, len(x)) for _ in range(10)]\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<ul>\n<li><code>random.sample</code> creates a new list, rather than shuffling in place.</li>\n<li><code>len(x)</code> is the size of the sample. In this case, we wish to output lists of the same length as the original list.</li>\n<li>List comprehensions are often considered pythonic versus explicit for loops.</li>\n</ul>\n"}], "owner": {"reputation": 1387, "user_id": 4616611, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/90099c6ce97d206fcac50806bf8c74da?s=128&d=identicon&r=PG&f=1", "display_name": "Teodorico Levoff", "link": "https://stackoverflow.com/users/4616611/teodorico-levoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2161, "favorite_count": 1, "accepted_answer_id": 49040041, "answer_count": 3, "score": 4, "last_activity_date": 1519860668, "creation_date": 1519858287, "question_id": 49039985, "link": "https://stackoverflow.com/questions/49039985/how-to-loop-though-range-and-randomly-shuffle-a-list-in-python", "title": "How to loop though range and randomly shuffle a list in Python?", "body": "<p>Given a list <code>x = [1,0,0,1,1]</code>I can use <code>random.shuffle(x)</code> repeatedly to shuffle this list, but if I try to do this a for loop the list doesn't shuffle. </p>\n\n<p>For example:</p>\n\n<pre><code>x = [1,0,0,1,1]\nk = []\nfor i in range(10):\n     random.shuffle(x)\n     k.append(x)\nreturn x\n</code></pre>\n\n<p>Basically, <code>k</code>contains the same sequence of x unshuffled? Any work around?</p>\n"}, {"tags": ["python", "kivy", "self"], "answers": [{"tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1519858663, "creation_date": 1519858663, "answer_id": 49040052, "question_id": 49039974, "link": "https://stackoverflow.com/questions/49039974/how-to-write-conditional-statement-based-on-parent/49040052#49040052", "title": "How to Write Conditional Statement Based on Parent", "body": "<p>print use <code>__str__</code> to get the text you are going to print, so it is not correct to compare with that string, you have to compare the names:</p>\n\n<pre><code>print(self.parent)\nif self.parent.name == 'notags':\n    button_share.bind(on_press=self.update_buttons_assignoverride)\nself.box_share.add_widget(button_share)\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 9362780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Hp3nBNqiJPY/AAAAAAAAAAI/AAAAAAAAAiQ/_VB9X-YyOdU/photo.jpg?sz=128", "display_name": "Filip Phigari", "link": "https://stackoverflow.com/users/9362780/filip-phigari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 49040052, "answer_count": 1, "score": 1, "last_activity_date": 1618442515, "creation_date": 1519858229, "last_edit_date": 1618442515, "question_id": 49039974, "link": "https://stackoverflow.com/questions/49039974/how-to-write-conditional-statement-based-on-parent", "title": "How to Write Conditional Statement Based on Parent", "body": "<p>Goal: Write conditional statement based on the parent.</p>\n\n<p>My approach: I executed <code>print(self.parent)</code>to see what the parent is called. In my case, <code>&lt;Screen name='notags'&gt;</code>was printed. I then tried to write a conditional statement based on that output (shown below).</p>\n\n<p>Python Code:</p>\n\n<pre><code>        print(self.parent)\n        if self.parent == &lt;Screen name='notags'&gt;:\n            button_share.bind(on_press=self.update_buttons_assignoverride)\n        self.box_share.add_widget(button_share)\n</code></pre>\n\n<p>I didn't really expect that to work, but am not sure how to approach this.</p>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "comments": [{"owner": {"reputation": 2957, "user_id": 3780372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4103437e167592cdd8294cbac89c53ab?s=128&d=identicon&r=PG", "display_name": "E. Ducateme", "link": "https://stackoverflow.com/users/3780372/e-ducateme"}, "edited": false, "score": 0, "creation_date": 1519859224, "post_id": 49039956, "comment_id": 85085617, "body": "Want to make sure I am not misunderstanding something: is your average vector sum for testDoc1 correct? Should it be... <code>(&#39;testDoc1&#39;:[0.25, 0.25, 0.25])</code>  i.e. <code>0.1 + 0.2 + 0.3 + 0.4 &#47; 4</code> = <code>0.25</code>"}, {"owner": {"reputation": 128, "user_id": 5811270, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/125b9a336e8e7ba36575d552e84a8270?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Chen", "link": "https://stackoverflow.com/users/5811270/bill-chen"}, "reply_to_user": {"reputation": 2957, "user_id": 3780372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4103437e167592cdd8294cbac89c53ab?s=128&d=identicon&r=PG", "display_name": "E. Ducateme", "link": "https://stackoverflow.com/users/3780372/e-ducateme"}, "edited": false, "score": 0, "creation_date": 1519859465, "post_id": 49039956, "comment_id": 85085688, "body": "That is correct"}], "answers": [{"tags": [], "owner": {"reputation": 1692, "user_id": 424173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d59473b5b6f993d420a9d99ddddefdc?s=128&d=identicon&r=PG", "display_name": "hoyland", "link": "https://stackoverflow.com/users/424173/hoyland"}, "is_accepted": true, "score": 3, "last_activity_date": 1519862993, "creation_date": 1519862993, "answer_id": 49040693, "question_id": 49039956, "link": "https://stackoverflow.com/questions/49039956/averaging-vectors-in-pyspark-with-lookup-table/49040693#49040693", "title": "Averaging vectors in Pyspark with lookup table", "body": "<p>Suppose you have a function <code>tokenize</code> that transforms the strings to a list of words. Then you can <code>flatMap</code> <code>documents</code> to get an <code>RDD</code> of tuples <code>(word, document id)</code>:</p>\n\n<pre><code>flattened_docs = documents.flatMap(lambda x: [(word, x[0]) for word in tokenize(x[1])])\n</code></pre>\n\n<p>Then joining with <code>words</code> will give you <code>(word, (document id, vector))</code> tuples, and you can drop the words at this point:</p>\n\n<pre><code>doc_vectors = flattened_docs.join(words).values\n</code></pre>\n\n<p>Note that this is an inner join, so you're throwing away an words that do not have embeddings. Since you presumably want to count those words in your average, a left join is likely more appropriate and you'll then have to replace any resulting <code>None</code>s with the zero vector (or whatever vector of your choice).</p>\n\n<p>We can group by document id to get an rdd of <code>(document id, [list of vectors])</code> and then average (I'll assume you have a function called <code>average</code>).</p>\n\n<pre><code>final_vectors = doc_vectors.groupByKey().mapValues(average)\n</code></pre>\n\n<p>(Please excuse my Scala-influenced Python. It's been a while since I've used pyspark and I haven't checked if it's <code>flatMap</code> or <code>flat_map</code> and so on.)</p>\n"}], "owner": {"reputation": 128, "user_id": 5811270, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/125b9a336e8e7ba36575d552e84a8270?s=128&d=identicon&r=PG&f=1", "display_name": "Bill Chen", "link": "https://stackoverflow.com/users/5811270/bill-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 1, "accepted_answer_id": 49040693, "answer_count": 1, "score": 3, "last_activity_date": 1519862993, "creation_date": 1519858142, "last_edit_date": 1519859476, "question_id": 49039956, "link": "https://stackoverflow.com/questions/49039956/averaging-vectors-in-pyspark-with-lookup-table", "title": "Averaging vectors in Pyspark with lookup table", "body": "<p>I'm trying to implement a simple Doc2Vec algorithm in PySpark using a pre-trained GloVe model from <a href=\"https://nlp.stanford.edu/projects/glove/\" rel=\"nofollow noreferrer\">https://nlp.stanford.edu/projects/glove/</a>.</p>\n\n<p>I have two RDDs: </p>\n\n<ul>\n<li><p>A pair RDD called <code>documents</code> in the form (K:[V]) where K is the document ID, and [V] is a list of all the words in that document, for example \n<code>\n('testDoc1':'i am using spark')\n('testDoc2':'testing spark')\n</code></p></li>\n<li><p>A pair RDD called <code>words</code> representing the word embeddings in the form K:V where K is a word and V is the vector that represents the word, for example \n<code>\n('i',       [0.1, 0.1, 0.1])\n('spark':   [0.2, 0.2, 0.2]) \n('am',      [0.3, 0.3, 0.3])\n('testing', [0.5, 0.5, 0.5])\n('using',   [0.4, 0.4, 0.4])\n</code></p></li>\n</ul>\n\n<p>What is the correct way to iterate through the words in <code>documents</code> to get an average vector sum for all of the words? In the above example, the end result would look like:\n<code>\n('testDoc1':[0.25, 0.25, 0.25])\n('testDoc2':[0.35, 0.35, 0.35])\n</code></p>\n"}, {"tags": ["python", "string"], "comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1519858478, "post_id": 49039920, "comment_id": 85085350, "body": "It&#39;s blowing my mind I can&#39;t find a dupe target for this. This is a really common logic issue."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 6, "last_activity_date": 1519858056, "creation_date": 1519858056, "answer_id": 49039941, "question_id": 49039920, "link": "https://stackoverflow.com/questions/49039920/words-in-a-string-return-unexpected-value/49039941#49039941", "title": "Words in a string return unexpected value", "body": "<p>Yes, because you did <em>not</em> check to see whether \"WARNING\" is in the string; all you checked was the truth value of the string.  You need</p>\n\n<pre><code>\"WARNING\" in a and \"ERROR\" in a\n</code></pre>\n\n<p>Logical operators do <em>not</em> distribute over their objects the way they can in English.</p>\n"}, {"tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": false, "score": 0, "last_activity_date": 1519858794, "last_edit_date": 1519858794, "creation_date": 1519858450, "answer_id": 49040010, "question_id": 49039920, "link": "https://stackoverflow.com/questions/49039920/words-in-a-string-return-unexpected-value/49040010#49040010", "title": "Words in a string return unexpected value", "body": "<p>If you want to get fancy, you could do:</p>\n\n<pre><code>a = \"This is a demo text\"\n\nif any( x in a for x in [\"This\", \"rocks\", \"scissors\"] ):\n    print(\"Text contains any of This, rocks, scissors\")\nelse:\n    print(\"Text has neither of This, rocks, scissors\")\n\n\nif all( x in a for x in [\"This\", \"rocks\", \"scissors\"] ):\n    print(\"Text contains all of This, rocks, scissors\")\nelse:\n    print(\"Not all in!\")\n</code></pre>\n\n<p><code>any</code> and <code>all</code> are built-ins: </p>\n\n<ul>\n<li><p><a href=\"https://docs.python.org/3.2/library/functions.html#any\" rel=\"nofollow noreferrer\">https://docs.python.org/3.2/library/functions.html#any</a></p></li>\n<li><p><a href=\"https://docs.python.org/3.2/library/functions.html#all\" rel=\"nofollow noreferrer\">https://docs.python.org/3.2/library/functions.html#all</a></p></li>\n</ul>\n\n<p>that operate on iterables and check if any/all in the iterable are <code>True</code></p>\n\n<p>For only 2 values simply chaining <code>if \"this\" in a and \"that\" in a:</code> is ok though</p>\n"}], "owner": {"reputation": 3, "user_id": 9426080, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "avidPythonLearner", "link": "https://stackoverflow.com/users/9426080/avidpythonlearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 49039941, "answer_count": 2, "score": -1, "last_activity_date": 1519858794, "creation_date": 1519857931, "last_edit_date": 1519858196, "question_id": 49039920, "link": "https://stackoverflow.com/questions/49039920/words-in-a-string-return-unexpected-value", "title": "Words in a string return unexpected value", "body": "<p>Why does my boolean return <code>True</code> when I expect <code>False</code>?</p>\n\n<p>String <code>a</code> is \"7582 +   group by 1,2; ERROR: File ACT2EST.SUMMARY_CFS.DATA does not exist.\"</p>\n\n<p>My code expression is <code>\"WARNING\" and \"ERROR\" in a</code>; this evaluates to <code>True</code>. </p>\n\n<p>I apply the same code, <code>\"WARNING\" and \"ERROR\" in b</code>, to another string <code>b = \"if abc ; WARNING: message. ERROR Message.\"</code>, and my output is <code>True</code> as expected. </p>\n\n<p>Can someone let me know what is wrong with my code and why when running it with string a my output is True instead of False? Btw, I use python 2.7</p>\n"}, {"tags": ["python", "python-3.x", "pip"], "comments": [{"owner": {"reputation": 5997, "user_id": 866333, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4b2cf4a4b91ef887b17691a87d4bc0e1?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/866333/john"}, "edited": false, "score": 2, "creation_date": 1519857969, "post_id": 49039882, "comment_id": 85085121, "body": "As the error states <code>-3.6</code> does not belong on the command line. Have you tried <code>pip install numpy</code>?"}, {"owner": {"reputation": 4557, "user_id": 2829961, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/688139e74e7082499022c09f1e9aee4e?s=128&d=identicon&r=PG&f=1", "display_name": "umair durrani", "link": "https://stackoverflow.com/users/2829961/umair-durrani"}, "reply_to_user": {"reputation": 5997, "user_id": 866333, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4b2cf4a4b91ef887b17691a87d4bc0e1?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/866333/john"}, "edited": false, "score": 0, "creation_date": 1519858319, "post_id": 49039882, "comment_id": 85085269, "body": "<code>pip install numpy</code> gives this error: <code>Fatal error in launcher: Unable to create process using &#39;&quot;&#39;</code> . But when I open the cmd in the location of pip3.6.exe  (<code>C:\\Users\\durraniu\\AppData\\Local\\Programs\\Python\\Python36-32&zwnj;&#8203;\\Scripts</code>) and then type <code>pip install numpy</code> then it works. So, I added this location to System PATH as well. But outside this folder, <code>pip install</code> does not work. It throws the same error."}], "owner": {"reputation": 4557, "user_id": 2829961, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/688139e74e7082499022c09f1e9aee4e?s=128&d=identicon&r=PG&f=1", "display_name": "umair durrani", "link": "https://stackoverflow.com/users/2829961/umair-durrani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 413, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1519859590, "creation_date": 1519857779, "last_edit_date": 1519859590, "question_id": 49039882, "link": "https://stackoverflow.com/questions/49039882/error-when-installing-package-using-pip-in-python-3-6", "title": "Error when installing package using pip in Python 3.6", "body": "<p>I'm on Windows with Python 3.6.4 installed. Following the Python documentation I typed following on cmd but got error:  </p>\n\n<pre><code>&gt;py -3.6 -m pip install numpy\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 6, in &lt;module&gt;\n  File \"__main__.py\", line 126, in &lt;module&gt;\n  File \"__main__py__.py\", line 60, in &lt;module&gt;\nIOError: [Errno 2] No such file or directory: '-3.6'\n</code></pre>\n\n<p><code>Python 3.6.exe</code> is in my system PATH. What am I missing here?</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 176, "user_id": 2714050, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002597880957/picture?type=large", "display_name": "Daniel O&#39;Brien", "link": "https://stackoverflow.com/users/2714050/daniel-obrien"}, "is_accepted": false, "score": 1, "last_activity_date": 1519858777, "creation_date": 1519858777, "answer_id": 49040076, "question_id": 49039873, "link": "https://stackoverflow.com/questions/49039873/how-to-keep-rest-of-string-using-word2number-library-in-python/49040076#49040076", "title": "How to keep rest of string using word2number library in Python", "body": "<p>It appears that the word2number module returns an integer, this means that the house part cannot be retained as it is a string. If you know that the number is always going to be the first word, you could try:</p>\n\n<pre><code>a = \"one house\"\na_list = a.split(' ')\na_list[0] = str(w2n.word_to_num(a_list[0]))\nprint(' '.join(a_list))\n</code></pre>\n\n<p>Whereby you split the string into multiple strings in a list, run the <code>word_to_num</code> function on the first string and then recreate the string using <code>.join()</code></p>\n"}, {"tags": [], "owner": {"reputation": 2192, "user_id": 3106565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59de4b3d6299b5b375e072efd690870d?s=128&d=identicon&r=PG&f=1", "display_name": "Osman Mamun", "link": "https://stackoverflow.com/users/3106565/osman-mamun"}, "is_accepted": false, "score": 2, "last_activity_date": 1519859478, "creation_date": 1519859478, "answer_id": 49040210, "question_id": 49039873, "link": "https://stackoverflow.com/questions/49039873/how-to-keep-rest-of-string-using-word2number-library-in-python/49040210#49040210", "title": "How to keep rest of string using word2number library in Python", "body": "<p>With no prior information about the position of the number:</p>\n\n<pre><code>a = 'One house in the middle of three woods'\ns = a.split()\no = []\nfor word in s:\n    try:\n        o += [str(w2n.word_to_number(word))]\n    except ValueError:\n        o += [word] \n\n\nprint(' '.join(o))\n\noutput:: '1 house in the middle of 3 woods'\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9423960, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c1a8da8e13a5da2d59f144c3d682009?s=128&d=identicon&r=PG&f=1", "display_name": "Tigran ", "link": "https://stackoverflow.com/users/9423960/tigran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 831, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1519859478, "creation_date": 1519857739, "question_id": 49039873, "link": "https://stackoverflow.com/questions/49039873/how-to-keep-rest-of-string-using-word2number-library-in-python", "title": "How to keep rest of string using word2number library in Python", "body": "<p>I have a string in Python like this:</p>\n\n<pre><code>a = \"one house\"\n</code></pre>\n\n<p>For my program I need to convert that one into a literal 1, which I use the <strong>word2number</strong> library for in Python.</p>\n\n<p>Except, when I convert it, I get this.</p>\n\n<pre><code>a = \"one house\"\na = w2n.word_to_num(a)\nprint(a)\n&gt;&gt; 1\n</code></pre>\n\n<p>I want to retain the \"house\" and make the string like this:</p>\n\n<pre><code>&gt;&gt; \"1 house\"\n</code></pre>\n"}, {"tags": ["python", "class", "object"], "answers": [{"tags": [], "owner": {"reputation": 248, "user_id": 4904809, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-wxwvpGNoiqI/AAAAAAAAAAI/AAAAAAAAA00/b_ISxE8TDR0/photo.jpg?sz=128", "display_name": "amith murakonda", "link": "https://stackoverflow.com/users/4904809/amith-murakonda"}, "is_accepted": true, "score": 0, "last_activity_date": 1520135182, "last_edit_date": 1520135182, "creation_date": 1519981070, "answer_id": 49065718, "question_id": 49039778, "link": "https://stackoverflow.com/questions/49039778/orthogonal-decompositions-using-the-modred-module-in-python/49065718#49065718", "title": "Orthogonal decompositions using the modred module in python", "body": "<p>try this.. </p>\n\n<pre><code>vec_handles = [CustomVecHandle(os.path.join(data_root, d, \"{}_0.vtk\".format(d)))for d in dirs]\n\nIP_Burn = []\nfor i in range(len(test_vec):\n    for j in range(i+1 , len(test_vec)):\n        IP_Burn.append(test_vec[i]._get().inner_product(test_vec[j]._get()))\n</code></pre>\n\n<p><strong>Note</strong>:</p>\n\n<p>1) You dont need a private get method use get() instead of _get()</p>\n\n<p>2) you can construct a list of customVec objects rather than customVecHandle objects</p>\n\n<pre><code>vec_handles = [CustomVecHandle(os.path.join(data_root, d, \"{}_0.vtk\".format(d))).get() for d in dirs]\n\nIP_Burn = []\nfor i in range(len(test_vec):\n    for j in range(i+1 , len(test_vec)):\n        IP_Burn.append(test_vec[i].inner_product(test_vec[j]))\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9426041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fce5ec87621c00cd4a16308347035989?s=128&d=identicon&r=PG&f=1", "display_name": "sin123", "link": "https://stackoverflow.com/users/9426041/sin123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 49065718, "answer_count": 1, "score": 2, "last_activity_date": 1520135182, "creation_date": 1519857348, "last_edit_date": 1519857460, "question_id": 49039778, "link": "https://stackoverflow.com/questions/49039778/orthogonal-decompositions-using-the-modred-module-in-python", "title": "Orthogonal decompositions using the modred module in python", "body": "<p>I am trying to write a code for orthogonal decompositions using the modred module in python. My custom vector class is defined as:</p>\n\n<pre><code>class CustomVector(mr.Vector):\n\n    def __init__(self, data_array):\n        self.data_array = data_array\n    def inner_product(self, other):\n        return np.dot(self.data_array, other.data_array)\n</code></pre>\n\n<p>Another class definition is given as:</p>\n\n<pre><code>class CustomVecHandle(mr.VecHandle):\n\n    def __init__(self, vec_path, base_handle=None, scale=None):\n        mr.VecHandle.__init__(self, base_handle, scale)\n        self.vec_path = vec_path\n        self.res_path = result_root\n    def _get(self):\n        # read in the values\n        print (\"reading data from {}\".format(self.vec_path))\n        reader = vtk.vtkPolyDataReader()\n        reader.SetFileName(self.vec_path)\n        reader.Update()\n        data = dsa.WrapDataObject(reader.GetOutput()).PointData['U']\n        return CustomVector(data)\n</code></pre>\n\n<p>And another function is defined outside all classes as:</p>\n\n<pre><code> def inner_product(v1, v2):\n     return v1.inner_product(v2)\n</code></pre>\n\n<p>I have created a list object as:</p>\n\n<pre><code>vec_handles = [CustomVecHandle(os.path.join(data_root, d, \"{}_0.vtk\".format(d)))for d in dirs]\n</code></pre>\n\n<p>This vec_handles is given as the input for a function in the modred module, and the following operations are done in the main modred code:</p>\n\n<pre><code>test_vec = vec_handles\n\nIP_burn = self.inner_product(test_vec, test_vec)\n</code></pre>\n\n<p>But when I run the following code I am getting the error that:</p>\n\n<pre><code>  File \"/home/sindhuja/.local/lib/python2.7/site-packages/modred/vectorspace.py\", line 495, in compute_symmetric_inner_product_mat\n    IP_burn = self.inner_product(test_vec, test_vec)    \n  File \"podd.py\", line 58, in inner_product\n    return v1.inner_product(v2)    \nAttributeError: 'list' object has no attribute 'inner_product'\n</code></pre>\n\n<p>I understand that the created vec_handles is a list of objects for the class CustomVecHandle. And trying to get the method using .innerproduct(test_vec) is not possible but since it's the code of the modred module, I don't think that's wrong. So how do I solve this error? </p>\n"}, {"tags": ["python", "pandas", "sqlite", "pandas-to-sql"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1519858601, "post_id": 49039734, "comment_id": 85085409, "body": "Do you simply want to rename a column(s) in an SQLite table?"}, {"owner": {"reputation": 81, "user_id": 4611713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ff88375ae2cb36a0e1638dcdbb5361?s=128&d=identicon&r=PG&f=1", "display_name": "data-cruncher524", "link": "https://stackoverflow.com/users/4611713/data-cruncher524"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1519859125, "post_id": 49039734, "comment_id": 85085591, "body": "@MaxU No, the rename function is simply an example modification. I am wanting to do a number of complex operations across multiple columns that would be easier to do in Pandas than SQL."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1519859391, "post_id": 49039734, "comment_id": 85085666, "body": "Try this: <code>db = sqlite3.connect(&quot;test.db&quot;, isolation_level=None)</code>"}, {"owner": {"reputation": 81, "user_id": 4611713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ff88375ae2cb36a0e1638dcdbb5361?s=128&d=identicon&r=PG&f=1", "display_name": "data-cruncher524", "link": "https://stackoverflow.com/users/4611713/data-cruncher524"}, "reply_to_user": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1519859880, "post_id": 49039734, "comment_id": 85085815, "body": "@MaxU, excellent, that works the first time and produces the expected result! I do notice that whereas the initial (failing code) would run almost instantaneously the 2nd attempt, with your solution, the code has a lag  almost as if there as a <code>time.sleep(8)</code> for every chunk. Was there a way to speed this up, or should I just increase the chunk size as memory on my machine allows?"}], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 1, "last_activity_date": 1519860096, "creation_date": 1519860096, "answer_id": 49040292, "question_id": 49039734, "link": "https://stackoverflow.com/questions/49039734/pandas-errors-in-writing-chunks-to-database-with-df-to-sql/49040292#49040292", "title": "Pandas errors in writing chunks to database with df.to_sql()", "body": "<p>You may try to specify:</p>\n\n<pre><code>db = sqlite3.connect(\"test.db\", isolation_level=None)\n#  ----&gt;                        ^^^^^^^^^^^^^^^^^^^^\n</code></pre>\n\n<p>Beside that you may try to increase your chunksize, because otherwise the time between commits is way to short for SQLite DB - that is causing this error, i guess... I would also recommend to use PostgreSQL, MySQL/MariaDB or something similar - they are much more reliable and appropriate for such DB size...</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 4611713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ff88375ae2cb36a0e1638dcdbb5361?s=128&d=identicon&r=PG&f=1", "display_name": "data-cruncher524", "link": "https://stackoverflow.com/users/4611713/data-cruncher524"}, "edited": false, "score": 0, "creation_date": 1520013102, "post_id": 49057486, "comment_id": 85155235, "body": "A caveat to the above is that the phenomenon of extra inserts from the chunking is not actually resolved, but the total number of rows in the final table is the same, <i>if</i> the create sql script executed has a statement to create a unique index. If there is not a unique index, the code is problematic."}], "tags": [], "owner": {"reputation": 81, "user_id": 4611713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ff88375ae2cb36a0e1638dcdbb5361?s=128&d=identicon&r=PG&f=1", "display_name": "data-cruncher524", "link": "https://stackoverflow.com/users/4611713/data-cruncher524"}, "is_accepted": false, "score": 1, "last_activity_date": 1519933271, "creation_date": 1519933271, "answer_id": 49057486, "question_id": 49039734, "link": "https://stackoverflow.com/questions/49039734/pandas-errors-in-writing-chunks-to-database-with-df-to-sql/49057486#49057486", "title": "Pandas errors in writing chunks to database with df.to_sql()", "body": "<p><strong>Time Delay in Above Solution</strong></p>\n\n<p>@MaxU's solution adding <code>isolation_level=None</code> to the database connection is short and sweet. For whichever reason, however, it slowed writing/committing each chunk to the database dramatically. For example, when I tested the solution on a table of 12 million rows, the code took over 6 hours to complete. Conversely, building the original table from several text files took a few minutes.</p>\n\n<blockquote>\n  <p>This insight led to a faster but less elegant solution, which <em>took less than 7 minutes</em> to complete on a table of 12 million rows versus over 6 hours. The output rows matched the input rows, solving the problem in my original question. </p>\n</blockquote>\n\n<p><strong>Faster but less Elegant Solution</strong></p>\n\n<p>Since constructing the original table from text files/csv files and using SQL scripts to load the data, I combined that approach with Panda's chunk capabilities. The essential basic steps are as follows:</p>\n\n<ol>\n<li>Connect to the db</li>\n<li>Use a SQL script to create a new table (columns and order should match whatever you do to the pandas df)</li>\n<li>Read the massive table in chunks</li>\n<li>For each chunk, modify the df as desired, write to csv, load csv using sql, and commit the change. </li>\n</ol>\n\n<p><strong>Main code of solution:</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nimport sqlite3\n\n#Note I Used Functions I Wrote in build_db.py\n#(shown below after example solution)\nfrom build_db import *\n\n\n#Helper Functions Used in Example\ndef lower_var(var, df):\n    s = df[var].str.lower()\n    df = df.drop(var, axis=1)\n    df = pd.concat([df, s], axis=1)\n    return(df)\n\n\n#Connect to Data\ndb = sqlite3.connect(\"test.db\")\nc = db.cursor()\n\n#create statement\ncreate_table(c, \"create_test.sql\", path='sql_clean/')\n\n#Load Data in Chunks\ndf_generator = pd.read_sql_query(\"select * from example_table;\", con=db, chunksize = 100000)\n\nfor df in df_generator:\n    #functions to modify data, example\n    df = lower_var(\"name\", df) #changes column order\n\n    #restore df to column order in sql table\n    db_order = [\"cmte_id\", \"amndt_ind\", \"rpt_tp\", \"transaction_pgi\", \"image_num\", \"transaction_tp\", \\\n        \"entity_tp\", \"name\", \"city\", \"state\", \"zip_code\", \"employer\", \"occupation\", \"transaction_dt\", \\\n        \"transaction_amt\", \"other_id\", \"tran_id\", \"file_num\", \"memo_cd\", \"memo_text\", \"sub_id\"]\n    df = df[db_order]\n\n    #write chunk to csv\n    file = \"df_chunk.csv\"\n    df.to_csv(file, sep='|', header=None, index=False)\n\n    #insert chunk csv to db\n    insert_file_into_table(c, \"insert_test.sql\", file, '|', path='sql_clean/')\n    db.commit()\n\n\n#Count results\ncount_result(c, \"test_indiv\")\n</code></pre>\n\n<p><strong>Imported User Functions for Above Code</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#Relavant Functions in build_db.py\n\ndef count_result(c, table):\n    ([print(\"[*] total: {:,} rows in {} table\"\n        .format(r[0], table)) \n        for r in c.execute(\"SELECT COUNT(*) FROM {};\".format(table))])\n\ndef create_table(cursor, sql_script, path='sql/'):\n    print(\"[*] create table with {}{}\".format(path, sql_script))\n    qry = open(\"{}{}\".format(path, sql_script), 'rU').read()\n    cursor.executescript(qry)\n\n\ndef insert_file_into_table(cursor, sql_script, file, sep=',', path='sql/'):\n    print(\"[*] inserting {} into table with {}{}\".format(file, path, sql_script))\n    qry = open(\"{}{}\".format(path, sql_script), 'rU').read()\n    fileObj = open(file, 'rU', encoding='latin-1')\n    csvReader = csv.reader(fileObj, delimiter=sep, quotechar='\"')\n\n    try:\n        for row in csvReader:\n            try:\n                cursor.execute(qry, row)\n            except sqlite3.IntegrityError as e:\n                pass\n\n    except Exception as e:\n        print(\"[*] error while processing file: {}, error code: {}\".format(file, e))\n        print(\"[*] sed replacing null bytes in file: {}\".format(file))\n        sed_replace_null(file, \"clean_null.sh\")\n        subprocess.call(\"bash clean_null.sh\", shell=True)\n\n        try:\n            print(\"[*] inserting {} into table with {}{}\".format(file, path, sql_script))\n            fileObj = open(file, 'rU', encoding='latin-1')\n            csvReader = csv.reader(fileObj, delimiter=sep, quotechar='\"')\n            for row in csvReader:\n                try:\n                    cursor.execute(qry, row)\n                except sqlite3.IntegrityError as e:\n                    pass\n                    print(e)    \n\n        except Exception as e:\n            print(\"[*] error while processing file: {}, error code: {}\".format(file, e))\n</code></pre>\n\n<p><strong>SQL User Scripts</strong></p>\n\n<pre class=\"lang-sql prettyprint-override\"><code>--create_test.sql\n\nDROP TABLE if exists test_indiv;\n\nCREATE TABLE test_indiv (\n    cmte_id TEXT NOT NULL,\n    amndt_ind TEXT,\n    rpt_tp TEXT,\n    transaction_pgi TEXT,\n    image_num TEXT,\n    transaction_tp TEXT,\n    entity_tp TEXT,\n    name TEXT,\n    city TEXT,\n    state TEXT,\n    zip_code TEXT,\n    employer TEXT,\n    occupation TEXT,\n    transaction_dt TEXT,\n    transaction_amt TEXT,\n    other_id TEXT,\n    tran_id TEXT,\n    file_num NUMERIC,\n    memo_cd TEXT,\n    memo_text TEXT,\n    sub_id NUMERIC NOT NULL\n);\n\nCREATE UNIQUE INDEX idx_test_indiv ON test_indiv (sub_id);\n</code></pre>\n\n<pre class=\"lang-sql prettyprint-override\"><code>--insert_test.sql\n\nINSERT INTO test_indiv (\n    cmte_id,\n    amndt_ind,\n    rpt_tp,\n    transaction_pgi,\n    image_num,\n    transaction_tp,\n    entity_tp,\n    name,\n    city,\n    state,\n    zip_code,\n    employer,\n    occupation,\n    transaction_dt,\n    transaction_amt,\n    other_id,\n    tran_id,\n    file_num,\n    memo_cd,\n    memo_text,\n    sub_id\n    ) \nVALUES (\n    ?,\n    ?,\n    ?,\n    ?,\n    ?,\n    ?,\n    ?,\n    ?,\n    ?,\n    ?,\n    ?,\n    ?,\n    ?,\n    ?,\n    ?,\n    ?,\n    ?,\n    ?,\n    ?,\n    ?,\n    ?\n);\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 9232453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97489b7296c5dac482206387a70e9f16?s=128&d=identicon&r=PG&f=1", "display_name": "Greg", "link": "https://stackoverflow.com/users/9232453/greg"}, "is_accepted": false, "score": 0, "last_activity_date": 1534521884, "last_edit_date": 1534521884, "creation_date": 1533940839, "answer_id": 51794836, "question_id": 49039734, "link": "https://stackoverflow.com/questions/49039734/pandas-errors-in-writing-chunks-to-database-with-df-to-sql/51794836#51794836", "title": "Pandas errors in writing chunks to database with df.to_sql()", "body": "<p>Experienced the exact same problem (dealing with > 30 GB data). Here is how I tackled the problem:\nInstead of using the Chunk feature of read_sql. I decided to create a manual chunk looper like so:</p>\n\n<pre><code>chunksize=chunk_size\noffset=0\nfor _ in range(0, a_big_number):\n    query = \"SELECT * FROM the_table %s offset %s\" %(chunksize, offset)\n    df = pd.read_sql(query, conn)\n    if len(df)!=0:\n        ....\n    else:\n        break\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 4611713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46ff88375ae2cb36a0e1638dcdbb5361?s=128&d=identicon&r=PG&f=1", "display_name": "data-cruncher524", "link": "https://stackoverflow.com/users/4611713/data-cruncher524"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1917, "favorite_count": 0, "accepted_answer_id": 49040292, "answer_count": 3, "score": 1, "last_activity_date": 1534521884, "creation_date": 1519857156, "question_id": 49039734, "link": "https://stackoverflow.com/questions/49039734/pandas-errors-in-writing-chunks-to-database-with-df-to-sql", "title": "Pandas errors in writing chunks to database with df.to_sql()", "body": "<p><strong>Existing Database and Desired Outcome:</strong></p>\n\n<p>I have a larger SQLite database (12gb, tables with 44 million+ rows) that I would like to modify using Pandas in Python3.</p>\n\n<blockquote>\n  <p><em>Example Objective</em>: I hope to read one of these large tables (44 million rows) into a DF in chunks, manipulate the DF chunk, and write the result to a new table. If possible, I would like to replace the new table if it exists, and append each chunk to it. </p>\n  \n  <p>Because my manipulations only add or modify columns, <strong>the new table should have the same number of rows as the original table.</strong></p>\n</blockquote>\n\n<p><strong>Issues:</strong></p>\n\n<p>The primary issue seems to stem from the following line in the below code:</p>\n\n<p><code>df.to_sql(new_table, con=db, if_exists = \"append\", index=False)</code></p>\n\n<ol>\n<li>When this line is run in the below code, I seem to consistently get an additional chunk of size=N, plus one observation than I expected.</li>\n<li>The first time this code runs with a new table name, I get an error:</li>\n</ol>\n\n\n\n<pre class=\"lang-py prettyprint-override\"><code> Traceback (most recent call last):\n  File \"example.py\", line 23, in &lt;module&gt;\n    for df in df_generator:\n  File \"/usr/local/lib/python3.5/site-packages/pandas/io/sql.py\", line 1420, in _query_iterator\n    data = cursor.fetchmany(chunksize)\nsqlite3.OperationalError: SQL logic error or missing database\n</code></pre>\n\n<ol start=\"3\">\n<li><p>If I then rerun the script, with the same new table name, it runs for each chunk, and an extra chunk, +1 row.</p></li>\n<li><p>When the <code>df.to_sql()</code> line is commented out, the loop runs for the expected number of chunks.</p></li>\n</ol>\n\n<p><strong>Test Example of Issue with Complete Code:</strong></p>\n\n<p><strong>Complete Code: <em>example.py</em></strong>\n</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nimport sqlite3\n\n#Helper Functions Used in Example\ndef ren(invar, outvar, df):\n    df.rename(columns={invar:outvar}, inplace=True)\n    return(df)\n\ndef count_result(c, table):\n    ([print(\"[*] total: {:,} rows in {} table\"\n        .format(r[0], table)) \n        for r in c.execute(\"SELECT COUNT(*) FROM {};\".format(table))])\n\n\n#Connect to Data\ndb = sqlite3.connect(\"test.db\")\nc = db.cursor()\nnew_table = \"new_table\"\n\n#Load Data in Chunks\ndf_generator = pd.read_sql_query(\"select * from test_table limit 10000;\", con=db, chunksize = 5000)\n\nfor df in df_generator:\n    #Functions to modify data, example\n    df = ren(\"name\", \"renamed_name\", df)\n    print(df.shape)\n    df.to_sql(new_table, con=db, if_exists = \"append\", index=False)\n\n\n#Count if new table is created\ntry:\n    count_result(c, new_table)\nexcept:\n    pass\n</code></pre>\n\n<blockquote>\n  <p><strong>1. Result when</strong>\n   <code>#df.to_sql(new_table, con=db, if_exists = \"append\", index=False)</code> </p>\n  \n  <p>(the problem line is commented out):</p>\n</blockquote>\n\n<pre class=\"lang-py prettyprint-override\"><code>$ python3 example.py \n(5000, 22)\n(5000, 22)\n</code></pre>\n\n<p>Which I expect since the example code limits my large table to 10k rows. </p>\n\n<blockquote>\n  <p><strong>2. Result when</strong>\n   <code>df.to_sql(new_table, con=db, if_exists = \"append\", index=False)</code> </p>\n  \n  <p>a. the problem line is not commented out</p>\n  \n  <p>b. this is the <strong>first time</strong> the code is run with a new_table:</p>\n</blockquote>\n\n<pre class=\"lang-py prettyprint-override\"><code>$ python3 example.py \n(5000, 22)\nTraceback (most recent call last):\n  File \"example.py\", line 23, in &lt;module&gt;\n    for df in df_generator:\n  File \"/usr/local/lib/python3.5/site-packages/pandas/io/sql.py\", line 1420, in _query_iterator\n    data = cursor.fetchmany(chunksize)\nsqlite3.OperationalError: SQL logic error or missing database\n</code></pre>\n\n<blockquote>\n  <p><strong>3. Result when</strong>\n   <code>df.to_sql(new_table, con=db, if_exists = \"append\", index=False)</code> </p>\n  \n  <p>a. the problem line is not commented out</p>\n  \n  <p>b. the above code is run a <strong>second time</strong> with the new_table:</p>\n</blockquote>\n\n<pre class=\"lang-py prettyprint-override\"><code>$ python3 example.py \n(5000, 22)\n(5000, 22)\n(5000, 22)\n(1, 22)\n[*] total: 20,001 rows in new_table table\n</code></pre>\n\n<p>Thus, I have the issue of first the code breaking when run the first time (Result 2) and second, the total number of rows when run the second time (Result 3) is more than double what I expected.</p>\n\n<p><em>Any suggestions on how I can solve this issue would be greatly appreciated.</em></p>\n"}, {"tags": ["python", "printing", "interface", "command-line-interface"], "comments": [{"owner": {"reputation": 2223, "user_id": 325181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26de4aa17ab84757b1233714af5fec84?s=128&d=identicon&r=PG", "display_name": "Clarus", "link": "https://stackoverflow.com/users/325181/clarus"}, "edited": false, "score": 0, "creation_date": 1519857626, "post_id": 49039677, "comment_id": 85084978, "body": "Typically your loop would look something like: while 1 { cls; print foo; flush output; sleep 1}. That should be enough to fix the issue you are seeing."}, {"owner": {"reputation": 265, "user_id": 9319953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f908a1b767eb8e117c54d894876350c5?s=128&d=identicon&r=PG&f=1", "display_name": "Leo Whitehead", "link": "https://stackoverflow.com/users/9319953/leo-whitehead"}, "reply_to_user": {"reputation": 2223, "user_id": 325181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26de4aa17ab84757b1233714af5fec84?s=128&d=identicon&r=PG", "display_name": "Clarus", "link": "https://stackoverflow.com/users/325181/clarus"}, "edited": false, "score": 0, "creation_date": 1519857804, "post_id": 49039677, "comment_id": 85085061, "body": "@Claris i&#39;m not sure what you mean"}, {"owner": {"reputation": 2223, "user_id": 325181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26de4aa17ab84757b1233714af5fec84?s=128&d=identicon&r=PG", "display_name": "Clarus", "link": "https://stackoverflow.com/users/325181/clarus"}, "edited": false, "score": 0, "creation_date": 1519857843, "post_id": 49039677, "comment_id": 85085075, "body": "You need a sleep statement. Also as an alternative to cls you can do something like: print &quot;\\rfoo&quot;,"}, {"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "reply_to_user": {"reputation": 2223, "user_id": 325181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26de4aa17ab84757b1233714af5fec84?s=128&d=identicon&r=PG", "display_name": "Clarus", "link": "https://stackoverflow.com/users/325181/clarus"}, "edited": false, "score": 1, "creation_date": 1519858011, "post_id": 49039677, "comment_id": 85085142, "body": "@Claris You need <code>from __future__ import braces</code> for that."}], "answers": [{"tags": [], "owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "is_accepted": false, "score": 1, "last_activity_date": 1519857792, "creation_date": 1519857792, "answer_id": 49039884, "question_id": 49039677, "link": "https://stackoverflow.com/questions/49039677/python-printing-only-when-variable-changes/49039884#49039884", "title": "Python printing only when variable changes", "body": "<p>Just check whether the width has changed.</p>\n\n<pre><code>while True:\n    os.system('cls')\n    if width!=last_width:\n        print block*width\n        last_width = width\n</code></pre>\n"}], "owner": {"reputation": 265, "user_id": 9319953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f908a1b767eb8e117c54d894876350c5?s=128&d=identicon&r=PG&f=1", "display_name": "Leo Whitehead", "link": "https://stackoverflow.com/users/9319953/leo-whitehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519857792, "creation_date": 1519856835, "question_id": 49039677, "link": "https://stackoverflow.com/questions/49039677/python-printing-only-when-variable-changes", "title": "Python printing only when variable changes", "body": "<p>I'm working on a small project that involves a command line interface. I'd like to be able to print a row of characters as long as the command line. I'm able get the dimensions with</p>\n\n<pre><code>width, height = get_terminal_size()\n</code></pre>\n\n<p>If i'm trying to print a block character as long as the width of the terminal, I can do this with the following:</p>\n\n<pre><code>import os\nblock = unichr(0x2588)\nwhile True:\n    os.system('cls')\n    print block*width\n</code></pre>\n\n<p>however, this looks choppy, as it is drawing and redrawing the row each time. I'm trying to find a way to only draw it when the width changes, but i'm struggling to do so. Any help would be appreciated.</p>\n"}, {"tags": ["python", "python-3.x", "dictionary", "queue"], "owner": {"reputation": 918, "user_id": 7238958, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10213863953341976/picture?type=large", "display_name": "Rafael Marques", "link": "https://stackoverflow.com/users/7238958/rafael-marques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519857558, "creation_date": 1519856827, "last_edit_date": 1519857558, "question_id": 49039676, "link": "https://stackoverflow.com/questions/49039676/py-queue-library-mapping-array-to-queue-py3-issues", "title": "Py Queue library - mapping array to queue - py3 issues", "body": "<p>I previously posted a question regarding a script which performed \nconccurent requests. This script was failing, because of an empty queue.</p>\n\n<p>I further investigated the problem and came with this simple problem.\nWe have a function which creates a queue based on an array.\nWe then iterate over the queue, printing the value, until the queue is empty.\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>try:\r\n  from queue import Queue\r\nexcept:\r\n  pass\r\ntry: \r\n  from Queue import Queue\r\nexcept:\r\n  pass\r\n\r\ndef test():\r\n  q = Queue()\r\n  a = [1,2,3]\r\n  map(q.put, a)\r\n  print(\"queue size after insertion: \", str(q.qsize()))\r\n  while not q.empty():\r\n    item = q.get()   \r\n    print(item)\r\n     \r\n\r\nif __name__ == \"__main__\":\r\n  print(\"Starting test.\")\r\n  test()\r\n  print(\"Test finished.\")</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>In python2, everything works fine. The queue size after insertion is 3</p>\n\n<p>In python3, after insertion, the queue size is 0, and thus the iteration over the queue is not being executed. </p>\n\n<p>SOLUTION:\nchanging the insertion method fixed the problem.\nreplace:</p>\n\n<pre><code>map(q.put, a)\n</code></pre>\n\n<p>for:</p>\n\n<pre><code> for item in a:\n     q.put(item)\n</code></pre>\n\n<p>I wonder what causes this problem with the map function in python3.</p>\n"}, {"tags": ["python", "tcp", "tcp-ip", "tcpdump", "dpkt"], "comments": [{"owner": {"reputation": 606, "user_id": 539491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259659f03362b961bd63b048b84c5ac3?s=128&d=identicon&r=PG", "display_name": "Kiran Bandla", "link": "https://stackoverflow.com/users/539491/kiran-bandla"}, "edited": false, "score": 0, "creation_date": 1519867484, "post_id": 49039653, "comment_id": 85087766, "body": "Yes. Its <code>16|2</code>, which is <code>18</code>.  Can you share the pcap file that you are using? Or can you post the results for the pcap at <a href=\"https://github.com/kbandla/dpkt/blob/master/examples/data/http.pcap?raw=true\" rel=\"nofollow noreferrer\">github.com/kbandla/dpkt/blob/master/examples/data/&hellip;</a>"}, {"owner": {"reputation": 146, "user_id": 9425966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee83381d9354300cf01ee69d5b27a5ff?s=128&d=identicon&r=PG&f=1", "display_name": "nara", "link": "https://stackoverflow.com/users/9425966/nara"}, "reply_to_user": {"reputation": 606, "user_id": 539491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259659f03362b961bd63b048b84c5ac3?s=128&d=identicon&r=PG", "display_name": "Kiran Bandla", "link": "https://stackoverflow.com/users/539491/kiran-bandla"}, "edited": false, "score": 0, "creation_date": 1519873464, "post_id": 49039653, "comment_id": 85089171, "body": "@KiranBandla Sorry, I can&#39;t share the pcap file, but your answer did solve my question. Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 606, "user_id": 539491, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/259659f03362b961bd63b048b84c5ac3?s=128&d=identicon&r=PG", "display_name": "Kiran Bandla", "link": "https://stackoverflow.com/users/539491/kiran-bandla"}, "is_accepted": true, "score": 1, "last_activity_date": 1519867826, "creation_date": 1519867826, "answer_id": 49041285, "question_id": 49039653, "link": "https://stackoverflow.com/questions/49039653/what-does-the-value-of-flags-attribute-of-tcp-packet-in-pcap-represent-when-re/49041285#49041285", "title": "What does the value of &#39;flags&#39; attribute of tcp packet in pcap represent when read by dpkt in python?", "body": "<p>This is probably happening because you assume that <em>all</em> the packets in the pcap are TCP. You need to make sure that a packet is infact TCP before you parse its headers for <code>flags</code>. This can be done by checking for the <code>p</code> field in the <code>ip</code> header to be <code>6</code> (<code>dpkt.ip.IP_PROTO_TCP</code>):</p>\n\n<pre><code>import dpkt\n\ndef parse_pcap(filepath):\n    f = open(filepath)\n    pcap = dpkt.pcap.Reader(f)\n    for num, (ts, buff) in  enumerate(pcap):\n        eth = dpkt.ethernet.Ethernet(buff)\n        if eth.type != dpkt.ethernet.ETH_TYPE_IP:\n            # We are only interested in IP packets\n            continue\n        ip = eth.data\n        if ip.p != dpkt.ip.IP_PROTO_TCP:\n            # We are only interested in TCP\n            continue\n        tcp = ip.data\n        if ((tcp.flags &amp; dpkt.tcp.TH_SYN) and (tcp.flags &amp; dpkt.tcp.TH_ACK)):\n            # TCP SYN and ACK\n            print('Found TCP SYN &amp; ACK in Packet #%d'%num)\n        print('Packet #{1:d} : {0:b} = 0x{0:x}'.format(tcp.flags, num))\n</code></pre>\n\n<p>I just tried this on the <code>http.pcap</code> file available <a href=\"https://github.com/kbandla/dpkt/tree/master/examples/data\" rel=\"nofollow noreferrer\">here</a> and here is the result:</p>\n\n<pre><code>Packet #0 : 10 = 0x2\nFound TCP SYN &amp; ACK in Packet #1\nPacket #1 : 10010 = 0x12\nPacket #2 : 10000 = 0x10\nPacket #3 : 11000 = 0x18\n</code></pre>\n"}], "owner": {"reputation": 146, "user_id": 9425966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee83381d9354300cf01ee69d5b27a5ff?s=128&d=identicon&r=PG&f=1", "display_name": "nara", "link": "https://stackoverflow.com/users/9425966/nara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3751, "favorite_count": 0, "accepted_answer_id": 49041285, "answer_count": 1, "score": 0, "last_activity_date": 1519867826, "creation_date": 1519856722, "question_id": 49039653, "link": "https://stackoverflow.com/questions/49039653/what-does-the-value-of-flags-attribute-of-tcp-packet-in-pcap-represent-when-re", "title": "What does the value of &#39;flags&#39; attribute of tcp packet in pcap represent when read by dpkt in python?", "body": "<p>I used the dpkt python package to parse a pcap file, and did the following to get the tcp packets:</p>\n\n<pre><code>f = open(fname)\npcap = dpkt.pcap.Reader(f)\ntcps = []\nfor ts, buff in pcap_in:\n    eth = dpkt.ethernet.Ethernet(buff)\n    ip = eth.data\n    tcp = ip.data\n</code></pre>\n\n<p>Now I want to see which ones had both SYN and ACK flags. I tried to put those with both of those flags in a list as follows:</p>\n\n<pre><code>syn_plus_ack = []\nfor tcp in tcps:\n    if ((tcp.flags &amp; dpkt.tcp.TH_SYN) and (tcp.flags &amp; dpkt.tcp.TH_ACK)):\n        syn_plus_ack.append(tcp)\n</code></pre>\n\n<p>I am not sure if this is doing what I want it to do, because I tried it on a sample pcap file and there were so many packets with a high number of SYNs but no ACK+SYNs. </p>\n\n<p>I noticed the value of tcp.flags in those in syn_plus_ack is 18, dpkt.tcp.TH_SYN is 2, and dpkt.tcp.TH_ACK is 16. Is the tcp.flags value the sum of the value of all flags in the packet? Is there something I am doing wrong?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1519856768, "post_id": 49039631, "comment_id": 85084599, "body": "Your question is not clear to me. What do you mean that it is &quot;the result I want&quot;? Do you want a printout, just replacing the character <code>x</code> with the return of your method? Or do you mean a returned data structure, such as a matrix? I see no matrix in what you show."}, {"owner": {"reputation": 3, "user_id": 9426038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDGsi.jpg?s=128&g=1", "display_name": "7GS", "link": "https://stackoverflow.com/users/9426038/7gs"}, "reply_to_user": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1519856886, "post_id": 49039631, "comment_id": 85084656, "body": "Sorry, first time user. I would like a printout replacing x with the return of my method, in the format of a two dimensional matrix using the lists as lables/headers along x and y axis..."}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 1, "creation_date": 1519857036, "post_id": 49039631, "comment_id": 85084729, "body": "I still do not understand. Please give a minimal and <i>complete</i> example showing what you want. Also show the work you have done so far, your attempted code, and a statement of what is not working. See <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1519857575, "post_id": 49039631, "comment_id": 85084946, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/on-topic\">on topic</a> and <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask</a> apply here."}], "answers": [{"tags": [], "owner": {"reputation": 34, "user_id": 9426112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d8c3d84ad3b2ecb0bc364c01475e8cc?s=128&d=identicon&r=PG&f=1", "display_name": "Benedikt H", "link": "https://stackoverflow.com/users/9426112/benedikt-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1519857373, "creation_date": 1519857373, "answer_id": 49039784, "question_id": 49039631, "link": "https://stackoverflow.com/questions/49039631/create-matrix-out-of-two-lists-while-populating-body-of-matrix-using-custom-meth/49039784#49039784", "title": "Create matrix out of two lists while populating body of matrix using custom method in Python", "body": "<p>Try this:</p>\n\n<pre><code>list1 = ['A', 'B', 'C']\nlist2 = [1, 2, 3]\n\nmatrix = []\nfor item1 in list1:\n   row = []\n   for item2 in list2:\n       row.append(my_method(item1, item2))\n   matrix.append(row)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 9426038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDGsi.jpg?s=128&g=1", "display_name": "7GS", "link": "https://stackoverflow.com/users/9426038/7gs"}, "edited": false, "score": 0, "creation_date": 1519949621, "post_id": 49040207, "comment_id": 85126562, "body": "jferard - thank you! this worked. I&#39;ll need to study up on zip() .... seems very useful."}], "tags": [], "owner": {"reputation": 6367, "user_id": 6914441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbc12c764b93fa915b8e5384f521fe12?s=128&d=identicon&r=PG&f=1", "display_name": "jferard", "link": "https://stackoverflow.com/users/6914441/jferard"}, "is_accepted": true, "score": 0, "last_activity_date": 1519859463, "creation_date": 1519859463, "answer_id": 49040207, "question_id": 49039631, "link": "https://stackoverflow.com/questions/49039631/create-matrix-out-of-two-lists-while-populating-body-of-matrix-using-custom-meth/49040207#49040207", "title": "Create matrix out of two lists while populating body of matrix using custom method in Python", "body": "<p>We have:</p>\n\n<pre><code>xs = [\"A\", \"B\", \"C\"]\nys = [1, 2, 3]\n</code></pre>\n\n<p>Let's take a simple example: <code>f</code> repeats <code>y</code> times the char <code>x</code>  </p>\n\n<pre><code>f=lambda x,y:x*y\n</code></pre>\n\n<p>The computation of the matrix is obvious: for each <code>y</code>, we compute a row of <code>f(x,y)</code> with all <code>x</code> in <code>xs</code>.</p>\n\n<pre><code>matrix = [[f(x,y) for x in xs] for y in ys]\nprint (\"matrix\", matrix)\n</code></pre>\n\n<p>The display of the matrix is more interesting. First, we need to compute the width of each column. \nThe width of a column is the width of its widest element. If <code>col</code> is the column, the width is <code>max(len(str(z)) for z in col)</code>.\nThe first column is the <code>ys</code>. To get the columns of the matrix, we just zip every row: <code>zip(*matrix)</code> is the same as <code>zip(row[0], row[1], ...)</code> </p>\n\n<pre><code>ws = [max(len(str(y)) for y in ys)] + [max(len(str(y)) for y in col) for col in zip(*matrix)]\nprint (\"ws\", ws)\n</code></pre>\n\n<p>Now, we can print the matrix. The first row is <code>[\" \"]+xs</code>, the following rows are <code>[y]+row</code> where <code>y</code> is the label of the row. We get the labels and the rows with a new <code>zip</code>: <code>zip(ys, matrix)</code>.\nWe have our rows, and we zip the values with the width of the columns (another <code>zip</code>! <code>zip(zs, ws)</code>) to adjust (<code>ljust</code>) the columns. The tab separates the columns:</p>\n\n<pre><code>for zs in ([\" \"]+xs, *[[y]+row for y, row in zip(ys, matrix)]): \n    print (\"\\t\".join([str(z).ljust(w) for z,w in zip(zs, ws)]))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>    A   B   C  \n1   A   B   C  \n2   AA  BB  CC \n3   AAA BBB CCC\n</code></pre>\n\n<p><a href=\"https://tio.run/##fY7NbsMgEITvPMWKE9goUpNbpByaPAbl4Ka1SmSDxRLx8/IumDTtqRzQzmp2vlmS/7LmsK4R4QSSvlIB9Fy/C1UkbcsXAXsBB0XG0zTM7x8DRJGOsUtkHrzTsXrkyMqSw2gdRNAGIqpNpCoSKrI4bTww2m4KoQ2ckLBR5iGy6dMw9I4lzv8ecwX9P4arnZoqQ9VZL6x7pP9yAxZmwMKr1ozVySSlqo8ooJMyqd7Z0GIF1PGRlfBZVvEjECjvJ/XN093NasNkrZX5brrd0bPQCmXxDMm40RXn6/oN\" rel=\"nofollow noreferrer\" title=\"Python 3 \u2013 Try It Online\">Try it online!</a></p>\n"}], "owner": {"reputation": 3, "user_id": 9426038, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZDGsi.jpg?s=128&g=1", "display_name": "7GS", "link": "https://stackoverflow.com/users/9426038/7gs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "closed_date": 1519860202, "accepted_answer_id": 49040207, "answer_count": 2, "score": -6, "last_activity_date": 1519859463, "creation_date": 1519856603, "question_id": 49039631, "link": "https://stackoverflow.com/questions/49039631/create-matrix-out-of-two-lists-while-populating-body-of-matrix-using-custom-meth", "closed_reason": "Needs details or clarity", "title": "Create matrix out of two lists while populating body of matrix using custom method in Python", "body": "<p>I have two lists that I would like to use to make a 2D matrix. I would like to call a custom method based on the combination of the two lists to populate the body of the matrix.</p>\n\n<p>How would I do this?</p>\n\n<p>Say I have a list of [A, B, C] and [1, 2, 3]. The result I want would be:</p>\n\n<pre><code>  A B C\n1 x\n2\n3\n</code></pre>\n\n<p>where x is the return of my_method(A,1).</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "python-3.x", "namespaces", "python-module"], "answers": [{"comments": [{"owner": {"reputation": 57126, "user_id": 1214800, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Z6dxp.jpg?s=128&g=1", "display_name": "brandonscript", "link": "https://stackoverflow.com/users/1214800/brandonscript"}, "edited": false, "score": 0, "creation_date": 1519859525, "post_id": 49039868, "comment_id": 85085708, "body": "Ahh, importing it <i>after</i> I overwrite the module works!"}], "tags": [], "owner": {"reputation": 2932, "user_id": 5770658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e3e0c78a33e4620eb8436e182535e2?s=128&d=identicon&r=PG&f=1", "display_name": "internet_user", "link": "https://stackoverflow.com/users/5770658/internet-user"}, "is_accepted": true, "score": 2, "last_activity_date": 1519857726, "creation_date": 1519857726, "answer_id": 49039868, "question_id": 49039628, "link": "https://stackoverflow.com/questions/49039628/load-once-config-by-merging-updating-properties-onto-modules-namespace/49039868#49039868", "title": "Load-once config by merging/updating properties onto module&#39;s namespace", "body": "<p>The reason it doesn't work when you <code>reload</code> is because after assigning to <code>sys.modules[__name__]</code>, the module, along with its builtins, get garbage collected and replaced with <code>None</code>. I'm assuming you know this, since you <code>from builtins import *</code>. However, the imported builtins will also be garbage collected.</p>\n\n<p>To fix this, you can import builtins inside <code>reload</code>, so that you are using versions that don't get garbage collected.</p>\n\n<p>Side note: This is untested, since I cannot reproduce your problem <a href=\"https://repl.it/@pyelias/Test\" rel=\"nofollow noreferrer\">here</a>, but I trust that it happens since that site can be wonky when it comes to imports.</p>\n"}], "owner": {"reputation": 57126, "user_id": 1214800, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/Z6dxp.jpg?s=128&g=1", "display_name": "brandonscript", "link": "https://stackoverflow.com/users/1214800/brandonscript"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 49039868, "answer_count": 1, "score": 2, "last_activity_date": 1519858986, "creation_date": 1519856596, "last_edit_date": 1519858986, "question_id": 49039628, "link": "https://stackoverflow.com/questions/49039628/load-once-config-by-merging-updating-properties-onto-modules-namespace", "title": "Load-once config by merging/updating properties onto module&#39;s namespace", "body": "<p>Take the following config singleton class in Python:</p>\n\n<pre><code># -*- coding: utf-8 -*-\nfrom __future__ import unicode_literals, print_function\nfrom builtins import *\nimport sys\n\nclass Config(object):\n\n    __instance = None\n\n    def __new__(cls):\n        if cls.__instance is None:\n            cls.__instance = super(Config, cls).__new__(cls)\n            cls.__instance.__initialized = False\n        return cls.__instance\n\n    def __init__(self):\n        print('INIT')\n        if self.__initialized: \n            return\n        self.__initialized = True\n\n        self._defaults = {\"foo\": True, \"bar\": False}\n\n        for k, v in self._defaults.items():\n            setattr(self, k, v)\n\n    def reload(self):\n        print(self)\n        if not self._defaults:\n            return\n        for k, v in self._defaults.items():\n            setattr(self, k, v)\n</code></pre>\n\n<p>I can write a test that validates that properties set and update properly:</p>\n\n<pre><code>import config; config = config.Config()\n\nprint(config)\nprint(config.foo)\nassert(config.foo is True)\nconfig.foo = False\nprint(config.foo)\nassert(config.foo is False)\n\nconfig.reload()\nprint(config.foo)\nassert(config.foo is True)\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>INIT\n&lt;config.Config object at 0x10bbf73d0&gt;\nTrue\nFalse\n&lt;config.Config object at 0x10bbf73d0&gt;\nTrue\n</code></pre>\n\n<p>This works OK, but my OCD can't handle that I have to import config and execute its main class.</p>\n\n<p>I tried adding <code>sys.modules[__name__] = Config()</code> to the bottom of <code>config.py</code>, so that I can do just <code>import config</code>, but it balks on <code>reload()</code> with:</p>\n\n<pre><code>TypeError: 'NoneType' object is not callable\n</code></pre>\n\n<p>Oddly I'd only expected it to complain that the values aren't being updated on the modules namespace, but it appears to be breaking beforehand - just trying to execute <code>reload()</code>.</p>\n\n<p>Am I out of luck here? Or is there some magical way I can this to work both with <code>reload()</code> and a one-liner <code>import config</code>?</p>\n"}, {"tags": ["python", "sockets", "ctypes", "cpython"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1519899727, "post_id": 49039607, "comment_id": 85099294, "body": "You should define <code>accept</code>&#39;s <code>argtypes</code> and <code>restype</code>."}], "answers": [{"tags": [], "owner": {"reputation": 10901, "user_id": 1076479, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/eLQUX.jpg?s=128&g=1", "display_name": "Gil Hamilton", "link": "https://stackoverflow.com/users/1076479/gil-hamilton"}, "is_accepted": false, "score": 0, "last_activity_date": 1519865731, "last_edit_date": 1592644375, "creation_date": 1519865731, "answer_id": 49041045, "question_id": 49039607, "link": "https://stackoverflow.com/questions/49039607/efault-when-using-ctypes-with-python-and-calling-libc-accept/49041045#49041045", "title": "EFAULT when using ctypes with python and calling libc accept", "body": "<p>I see one obvious problem. I've used <code>ctypes</code> successfully but cannot claim to be an expert so it's possible there is some other problem as well.</p>\n<p>I think you must be defining the argument prototype for <code>libc.accept</code> some place, but that's not in your posted source code so I will assume it's correct. Assuming the prototype is consistent with the libc binding: <code>accept's</code> third argument (<code>addrlen</code>) is a <em>pointer</em> to <code>socklen_t</code>, but you're just passing a length (<em>not a pointer to a length</em>).</p>\n<p>The usual way this is done is that you create a <code>socklen_t</code> variable and fill it in with the size of your <code>addr</code> buffer, then <code>accept</code> (as it's completing) copies the peer's address into your <code>addr</code> buffer, truncating if it's too large, but <em>updating</em> the passed <code>addrlen</code> with the actual size. From (linux version of) <code>accept(2)</code>:</p>\n<blockquote>\n<p>The  <code>addrlen</code> argument is a value-result argument: the caller must initialize it to contain the size (in bytes) of the structure pointed to by <code>addr</code>; on return it will contain the actual size of the peer address.</p>\n<p>The returned address is truncated if the buffer provided is too small; in this case, <code>addrlen</code> will return a value greater than was supplied to the call.</p>\n</blockquote>\n<p>So, in summary, it is likely the <em>third</em> argument which is causing your <code>EFAULT</code> - not the second. This is supported by your <code>truss</code> output which shows <code>addrlen</code> being passed to the kernel as <code>0x10</code>: that is usually not a valid memory address.</p>\n"}], "owner": {"reputation": 1, "user_id": 8457310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ODsKK.jpg?s=128&g=1", "display_name": "Patrick Sullivan", "link": "https://stackoverflow.com/users/8457310/patrick-sullivan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519865731, "creation_date": 1519856528, "question_id": 49039607, "link": "https://stackoverflow.com/questions/49039607/efault-when-using-ctypes-with-python-and-calling-libc-accept", "title": "EFAULT when using ctypes with python and calling libc accept", "body": "<p>The normal python socket module does not support protocols besides AF_INET when creating sockets:</p>\n\n<p><em>From cpython socketmodule.c</em>:</p>\n\n<ul>\n<li>Only AF_INET, AF_INET6 and AF_UNIX address families are supported in a<br>\nportable manner, though AF_PACKET, AF_NETLINK and AF_TIPC are supported<br>\nunder Linux. </li>\n</ul>\n\n<p>So I have gone about manually calling the normal BSD socket library's socket, bind, listen, and accept calls directly from libc using ctypes.\nI can create the socket, bind the socket to an address, and put the socket in listen mode which require casting references to the Structure inherited SockAddr_In class that I have made:</p>\n\n<pre><code>CharArr14 = c_char * 14                                                                                                       \nIn_Addr = c_uint32                                                                                                            \nCharArr8 = c_char * 8                                                                                                         \n\n\nclass SockAddr(Structure):                                                                                                    \n    _fields_ = [                                                                                                              \n        ('sa_len', c_uint8),                                                                                                  \n        ('sa_family', c_uint8),                                                                                               \n        ('sa_data', CharArr14)                                                                                                \n    ]                                                                                                                         \n\n\nclass SockAddr_In(Structure):                                                                                                 \n    _fields_ = [                                                                                                              \n        ('sa_len', c_uint8),                                                                                                  \n        ('sa_family', c_uint8),                                                                                               \n        ('sin_port', c_uint16),                                                                                               \n        ('sin_addr', In_Addr),                                                                                                \n        ('sin_zero', CharArr8)                                                                                                \n    ]  \n</code></pre>\n\n<p>But when I attempt to call accept, which has an address passed that the kernel will write the connecting socket's SockAddr_In structure information, I am receiving EFAULT (errno 14) which corresponds to bad memory address.</p>\n\n<pre><code>def accept_sdp_sock(self):                                                                                                \n    accept = libc.accept                                                                                                  \n    logger.debug(\"Accepting socket on: {}\".format(self.ip_addr))                                                          \n    # int accept(int sockfd, struct sockaddr *addr, socklen_t *addrlen);                                                  \n    # Why is this a bad address? Is it being deallocated?                                                                 \n    # Maybe it isn't allocating until we fill it with data?                                                               \n\n    addr = SockAddr_In()                                                                                                  \n    logger.debug(\"Memory address of addr struct: {}\".format(addr))                                                        \n    afd = accept(self.fd,                                                                                                 \n                 cast(byref(addr), POINTER(SockAddr)),                                                                    \n                 sizeof(SockAddr_In))                                                                                     \n    # Check accept fd for errors                                                                                          \n    if afd == -1:                                                                                                         \n        self.errno = get_errno()                                                                                          \n        logger.debug(\"Accept call failed: {} \".format(self.errno))                                                        \n\n    return afd\n</code></pre>\n\n<p>So that we are seeing this output with the memory addresses outlined by the program</p>\n\n<pre><code>#truss -fead -s65535 -o truss_out python sdp_sock_cmd.py -l --address 192.168.66.140 --debug\n2018-02-28 13:59:40,008 - DEBUG - This is a debug message\n2018-02-28 13:59:40,009 - INFO - And an info\n2018-02-28 13:59:40,009 - DEBUG - Creating SDP socket \n2018-02-28 13:59:40,010 - DEBUG - Binding SDP socket to : 192.168.66.140\n2018-02-28 13:59:40,011 - DEBUG - Memory address of addr struct: &lt;ib_socks.SockAddr_In object at 0x80385d9e0&gt;\n2018-02-28 13:59:40,012 - DEBUG - Socket listening on: 192.168.66.140\n2018-02-28 13:59:40,013 - DEBUG - Accepting socket on: 192.168.66.140\n2018-02-28 13:59:40,014 - DEBUG - Memory address of addr struct: &lt;ib_socks.SockAddr_In object at 0x80385d9e0&gt;\n2018-02-28 13:59:40,015 - DEBUG - Accept call failed: 14\n</code></pre>\n\n<p>In the truss output we see this:</p>\n\n<pre><code>18105: 0.288079361 accept(3,0x80385da30,0x10)    ERR#14 'Bad address'\n</code></pre>\n\n<p>I've tried allocating using malloc from libc making a string buffer using create_string_buffer() from ctypes but I am seeing the EFAULT in both of those cases. Why am I seeing a EFAULT in this case? How can I allocate a data structure with python using ctypes to allow the kernel to move data to userspace? </p>\n"}, {"tags": ["python", "nlp", "regex-negation", "data-extraction"], "answers": [{"comments": [{"owner": {"reputation": 2386, "user_id": 5550203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2588a3f1b1a7705f3d3a4312823c22a?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold Klein", "link": "https://stackoverflow.com/users/5550203/arnold-klein"}, "edited": false, "score": 0, "creation_date": 1519858757, "post_id": 49039900, "comment_id": 85085460, "body": "NIce point, thanks! However, the problem is that the word &#39;prescribed&#39; or &#39;not tolerated&#39; could be written in many different ways. These are really medical notes and doctors may write/mention tolerance or prescription in many ways, so building another list of precursor words could be a real challenge. I am wondering, whether there are ways to learn from the text the meaning of prescribed and all other mentions of the drugs."}, {"owner": {"reputation": 224, "user_id": 9425961, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J51_IGSn-fg/AAAAAAAAAAI/AAAAAAAAACc/EluH5_qoPUI/photo.jpg?sz=128", "display_name": "Jordan Mattiuzzo", "link": "https://stackoverflow.com/users/9425961/jordan-mattiuzzo"}, "reply_to_user": {"reputation": 2386, "user_id": 5550203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2588a3f1b1a7705f3d3a4312823c22a?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold Klein", "link": "https://stackoverflow.com/users/5550203/arnold-klein"}, "edited": false, "score": 0, "creation_date": 1519860100, "post_id": 49039900, "comment_id": 85085894, "body": "Another way that you could do it would be to create a list of synonyms, and replace <code>&quot;prescribed&quot;</code> with the list. A way to get around the formatting of the sentences would be to either provide templates in the code, which will be very much hardcoding, or you could count the how far the word is from the name of the medicine. But if it really becomes a problem, you might want to consider to create a default medical note format for the doctors to follow."}], "tags": [], "owner": {"reputation": 224, "user_id": 9425961, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J51_IGSn-fg/AAAAAAAAAAI/AAAAAAAAACc/EluH5_qoPUI/photo.jpg?sz=128", "display_name": "Jordan Mattiuzzo", "link": "https://stackoverflow.com/users/9425961/jordan-mattiuzzo"}, "is_accepted": false, "score": 2, "last_activity_date": 1519857856, "creation_date": 1519857856, "answer_id": 49039900, "question_id": 49039586, "link": "https://stackoverflow.com/questions/49039586/find-negation-of-particular-keywords-in-text/49039900#49039900", "title": "Find negation of particular keywords in text", "body": "<p>A way to overcome this would be predefining what word comes before the medicine name. So in your case, this would mean checking to see if either \"prescribed\" or \"not tolerate\" comes before the medicine name.</p>\n\n<p>This is what I have come up with. Just replace the variable <code>text = first</code> with <code>text = second</code> if you want to try the second piece of text.</p>\n\n<pre><code>import string\n\nlist_of_meds = ['aspirin', 'ibuprofen', 'paracetamol']\nfirst = \"John was prescribed aspirin due to high temperature\"\nsecond = \"John was prescribed ibuprofen, because he could not tolerate \nparacetamol\"\n\ntext = first\n\nfor c in string.punctuation:                                                                                                     \n    text = text.replace(c, \"\")\ntext = text.split(' ')\nfor i in text:\n    if i in list_of_meds:\n        index = text.index(i) - 1\n        if text[index] == \"prescribed\":\n            medicine = i\n            break\n</code></pre>\n\n<p>Good luck!</p>\n\n<p>Jordan.</p>\n\n<p>----- EDIT -----</p>\n\n<p>Use the variable <code>medicine</code> as the output, and you can use that variable from there.</p>\n"}, {"tags": [], "owner": {"reputation": 1676, "user_id": 5597065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04673e3ff2449ba441922e0fc6dab62b?s=128&d=identicon&r=PG&f=1", "display_name": "Adnan S", "link": "https://stackoverflow.com/users/5597065/adnan-s"}, "is_accepted": true, "score": 3, "last_activity_date": 1519871461, "creation_date": 1519871461, "answer_id": 49041736, "question_id": 49039586, "link": "https://stackoverflow.com/questions/49039586/find-negation-of-particular-keywords-in-text/49041736#49041736", "title": "Find negation of particular keywords in text", "body": "<p>This is a complex problem. To capture the nuances around negation, you need to step into the world of <strong>dependency parsing</strong> and <strong>relationship extraction</strong>. Couple of paths you can take to add sophistication to your current approach and the add-on by @Jordan are:</p>\n\n<ol>\n<li>Using a relationship extraction NLP library (e.g. Watson, Core-NLP, Spacy) that you train with example sentences like the one you gave to extract triplet relations like (John, prescribed, ibuprofen) and (John, not tolerate, paracetamol). This will require investment in annotating sample data.</li>\n<li>Rolling your own relationship extractor by starting with the dependency parse that shows how different parts of the sentence are related. This will require both programming time as well as training.</li>\n</ol>\n\n<p>Handling negation in relations is not a solved problem. The state of the art around this is usually associated with sentiment analysis. An introduction on using dependency parsing to identify and handle negation is available at this <a href=\"http://nlp.stanford.edu:8080/sentiment/rntnDemo.html\" rel=\"nofollow noreferrer\">Stanford NLP Sentiment Analysis using RNN page</a></p>\n"}], "owner": {"reputation": 2386, "user_id": 5550203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b2588a3f1b1a7705f3d3a4312823c22a?s=128&d=identicon&r=PG&f=1", "display_name": "Arnold Klein", "link": "https://stackoverflow.com/users/5550203/arnold-klein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1946, "favorite_count": 1, "accepted_answer_id": 49041736, "answer_count": 2, "score": 0, "last_activity_date": 1519871461, "creation_date": 1519856427, "last_edit_date": 1519858550, "question_id": 49039586, "link": "https://stackoverflow.com/questions/49039586/find-negation-of-particular-keywords-in-text", "title": "Find negation of particular keywords in text", "body": "<p>I am working on information extraction from medical texts (very new to NLP!). At the moment I am interested to find and extract the medications which are mentioned in a predefined list of drugs. For example, consider the text:</p>\n\n<blockquote>\n  <p>\"John was prescribed aspirin due to hight temperature\"</p>\n</blockquote>\n\n<p>Thus, given the list of medications (in Python language): </p>\n\n<pre><code>list_of_meds = ['aspirin', 'ibuprofen', 'paracetamol']\n</code></pre>\n\n<p>The extracted drug is <code>aspirin</code>. That's fine. </p>\n\n<p>Now consider another case:</p>\n\n<blockquote>\n  <p>\"John was prescribed ibuprofen, because he could not tolerate paracetamol\"</p>\n</blockquote>\n\n<p>Now, if I extract the drugs using the list (for example with regular expression), then the extracted drugs are <code>ibuprofen</code> and <code>paracetamol</code>.</p>\n\n<p><strong>QUESTION</strong> How to separate actually prescribed and untolerated drugs? Is there a way to label prescribed (used) and other mentioned drugs?</p>\n"}, {"tags": ["python", "matplotlib", "permissions", "windows-10", "figure"], "answers": [{"comments": [{"owner": {"reputation": 845, "user_id": 6710738, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b67ccb7730afd3d569c307f241faa768?s=128&d=identicon&r=PG&f=1", "display_name": "EHB", "link": "https://stackoverflow.com/users/6710738/ehb"}, "edited": false, "score": 0, "creation_date": 1519860039, "post_id": 49039809, "comment_id": 85085875, "body": "This is useful - I&#39;ll accept in a few days if no one has a Windows-based explanation for what has changed, and how to fix. A great work-around."}, {"owner": {"reputation": 143, "user_id": 6526995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6q71x.png?s=128&g=1", "display_name": "Radovan Garab&#237;k", "link": "https://stackoverflow.com/users/6526995/radovan-garab%c3%adk"}, "edited": false, "score": 2, "creation_date": 1529924410, "post_id": 49039809, "comment_id": 89036174, "body": "uhm, don&#39;t use <code>os.system(rm...</code> (potential for shell expansion), when there is a perfectly good python function <code>os.remove</code>"}, {"owner": {"reputation": 1051, "user_id": 3482528, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/709a60163924c0998bcd1329abd58664?s=128&d=identicon&r=PG&f=1", "display_name": "iblasi", "link": "https://stackoverflow.com/users/3482528/iblasi"}, "edited": false, "score": 1, "creation_date": 1529936420, "post_id": 49039809, "comment_id": 89043798, "body": "I agree. I update the code with original <code>system</code> call as optional"}, {"owner": {"reputation": 477, "user_id": 4071801, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49081b9a3eb74b6049eb8abd250a2c91?s=128&d=identicon&r=PG&f=1", "display_name": "Elias Hasle", "link": "https://stackoverflow.com/users/4071801/elias-hasle"}, "edited": false, "score": 0, "creation_date": 1561098755, "post_id": 49039809, "comment_id": 99960258, "body": "Decent solution, except it doesn&#39;t work for me. Even when removing the files (with os.remove) before saving new versions, Windows will still keep the old date, at least some times. bbade&#39;s answer explains the problem, though. So I guess one can just try to stop worrying about whether the files are updated or not."}], "tags": [], "owner": {"reputation": 1051, "user_id": 3482528, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/709a60163924c0998bcd1329abd58664?s=128&d=identicon&r=PG&f=1", "display_name": "iblasi", "link": "https://stackoverflow.com/users/3482528/iblasi"}, "is_accepted": false, "score": 8, "last_activity_date": 1529936456, "last_edit_date": 1529936456, "creation_date": 1519857497, "answer_id": 49039809, "question_id": 49039581, "link": "https://stackoverflow.com/questions/49039581/matplotlib-savefig-will-not-overwrite-old-files/49039809#49039809", "title": "Matplotlib Savefig will NOT overwrite old files", "body": "<p>It may be simple and stupid, but I will just do the following:</p>\n\n<pre><code>import os\nimport matplotlib.pyplot as plt\n#make figure\nplt.plot([1,2,3,4])\nplt.ylabel('some numbers')\n\n#save\nstrFile = \"./figs/my_plot.jpg\"\nif os.path.isfile(strFile):\n   os.remove(strFile)   # Opt.: os.system(\"rm \"+strFile)\nplt.savefig(strFile)\n</code></pre>\n\n<p>It may be quite hard to use directly \"rm\" as system command line, but you can use any other option similar to that one.</p>\n\n<p>But being honest it's strange that matplotlib does not overwrite the file.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I see that you are using windows, so you may use \"del\" as delete command line instead of \"rm\" for unix.</p>\n"}, {"comments": [{"owner": {"reputation": 384, "user_id": 10226602, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jbnB37tmksg/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7rmKIINTOMXT09FCg1c6hmNk-SB1Q/mo/photo.jpg?sz=128", "display_name": "Jairo Alves", "link": "https://stackoverflow.com/users/10226602/jairo-alves"}, "edited": false, "score": 2, "creation_date": 1571348914, "post_id": 51197294, "comment_id": 103221924, "body": "That is, It is updating, but it looks as it&#39;s not, because the date modified is not being shown as usual (regular folders). This was my case, thanks for sharing the information."}, {"owner": {"reputation": 91, "user_id": 2560414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f50d94d93071e7c93b3b108ad71442c?s=128&d=identicon&r=PG", "display_name": "csar", "link": "https://stackoverflow.com/users/2560414/csar"}, "edited": false, "score": 0, "creation_date": 1588070783, "post_id": 51197294, "comment_id": 108752393, "body": "In case the code is to be shared with others, it is safer to remove the file as @iblasi suggested. You cannot be sure that the person you share your code with has customized their folder accordingly."}, {"owner": {"reputation": 34332, "user_id": 2300597, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/OBo7Q.png?s=128&g=1", "display_name": "peter.petrov", "link": "https://stackoverflow.com/users/2300597/peter-petrov"}, "edited": false, "score": 0, "creation_date": 1610152235, "post_id": 51197294, "comment_id": 116051156, "body": "For some files DateCreated stays the same even if I delete the files (from Python or from Windows itself) prior to saving new files with the same name. This is just weird. Seems like a bug in Windows, I don&#39;t know. So... no matter what you optimize your folder for, this is just unreliable. DateCreated cannot be trusted, it seems."}], "tags": [], "owner": {"reputation": 194, "user_id": 9504241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78e722cb85fcfd3b3602227fc9bd5f90?s=128&d=identicon&r=PG&f=1", "display_name": "bbade", "link": "https://stackoverflow.com/users/9504241/bbade"}, "is_accepted": true, "score": 17, "last_activity_date": 1598558204, "last_edit_date": 1598558204, "creation_date": 1530813019, "answer_id": 51197294, "question_id": 49039581, "link": "https://stackoverflow.com/questions/49039581/matplotlib-savefig-will-not-overwrite-old-files/51197294#51197294", "title": "Matplotlib Savefig will NOT overwrite old files", "body": "<p><strong>TLDR: The photos WERE being overwritten, but the date was kept the same as the original file, due to a quirk of windows when a folder has lots of photos.</strong></p>\n<p>Jon's answer from 10/2/2015 did the trick for me.\n<a href=\"https://superuser.com/questions/147525/what-is-the-date-column-in-windows-7-explorer-it-matches-no-date-column-from/335901#335901\">https://superuser.com/questions/147525/what-is-the-date-column-in-windows-7-explorer-it-matches-no-date-column-from/335901#335901</a></p>\n<p>Basically windows detects lots of pictures in a folder and &quot;optimizes&quot; said folder for pictures. This means the column displayed is Date rather than Date Modified as it would be for a folder &quot;optimized&quot; for documents. Date takes the earlier of Date Created and Date Modified. As Date Created doesn't change when matplotlib .savefig overwrites a file the Date column never changes.</p>\n<p>To resolve this issue I customized the folder for documents. To do this select the folder and open the properties window. Navigate to the customize tab then select documents under &quot;optimize this folder for.&quot;</p>\n"}, {"tags": [], "owner": {"reputation": 39, "user_id": 5390558, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FyaWm7A1e8Q/AAAAAAAAAAI/AAAAAAAAAG0/6z5ooTSQUog/photo.jpg?sz=128", "display_name": "Maestre Sanmiguel Colombia", "link": "https://stackoverflow.com/users/5390558/maestre-sanmiguel-colombia"}, "is_accepted": false, "score": 3, "last_activity_date": 1574114879, "creation_date": 1574114879, "answer_id": 58923632, "question_id": 49039581, "link": "https://stackoverflow.com/questions/49039581/matplotlib-savefig-will-not-overwrite-old-files/58923632#58923632", "title": "Matplotlib Savefig will NOT overwrite old files", "body": "<p>Just add \"plt.close()\"</p>\n\n<pre><code>plt.savefig(\"./figs/my_plot.jpg\")\nplt.close()\n</code></pre>\n"}], "owner": {"reputation": 845, "user_id": 6710738, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b67ccb7730afd3d569c307f241faa768?s=128&d=identicon&r=PG&f=1", "display_name": "EHB", "link": "https://stackoverflow.com/users/6710738/ehb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12912, "favorite_count": 4, "accepted_answer_id": 51197294, "answer_count": 3, "score": 17, "last_activity_date": 1598558204, "creation_date": 1519856413, "last_edit_date": 1519857232, "question_id": 49039581, "link": "https://stackoverflow.com/questions/49039581/matplotlib-savefig-will-not-overwrite-old-files", "title": "Matplotlib Savefig will NOT overwrite old files", "body": "<p>This seems like it must be a permissions issue on my machine. After a systems update on Windows 10, when I run:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n#make figure\nplt.plot([1,2,3,4])\nplt.ylabel('some numbers')\n\n#save\nplt.savefig(\"./figs/my_plot.jpg\")\n</code></pre>\n\n<p>It will create the figure the first time the code is run. If I make a change to the code (e.g. change label) and then re-run, the plot shown in a Jupyter Notebook is updated, but the file saved on  my machine is not! This is a new issues as of today, after a systems update was pushed out, so this seems like a likely culprit. Any insight for me to fix this issue, besides creating a new file name every time a change is made? </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 13883, "user_id": 2883245, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/NPpPG.jpg?s=128&g=1", "display_name": "erip", "link": "https://stackoverflow.com/users/2883245/erip"}, "edited": false, "score": 0, "creation_date": 1519856431, "post_id": 49039561, "comment_id": 85084476, "body": "This Python isn&#39;t very idiomatic. You might want to look at context managers as a starting point for file I/O. Also, you didn&#39;t ask a question."}, {"owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "edited": false, "score": 0, "creation_date": 1519856495, "post_id": 49039561, "comment_id": 85084499, "body": "you already computed the number,  just write it out <code>sum(monthLines)</code>"}, {"owner": {"reputation": 15, "user_id": 9361750, "user_type": "registered", "profile_image": "https://graph.facebook.com/168256053897600/picture?type=large", "display_name": "Bryant Housemyer", "link": "https://stackoverflow.com/users/9361750/bryant-housemyer"}, "edited": false, "score": 0, "creation_date": 1519859585, "post_id": 49039561, "comment_id": 85085726, "body": "When I added sum(monthLines) it said that monthLines was not defined"}], "answers": [{"tags": [], "owner": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "is_accepted": false, "score": 0, "last_activity_date": 1519856551, "creation_date": 1519856551, "answer_id": 49039613, "question_id": 49039561, "link": "https://stackoverflow.com/questions/49039561/average-steps-taken/49039613#49039613", "title": "Average Steps Taken", "body": "<p>You're not <code>print</code>ing the number.</p>\n\n<p>Also, use <code>outputFile = open(r'C\\Users\\UserName\\Downloads\\stepsbymonth.txt', 'a'</code> as you don't want to overwrite the file.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9980353, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d0a97aa18a2cb3433eb766c90295196?s=128&d=identicon&r=PG&f=1", "display_name": "Angel", "link": "https://stackoverflow.com/users/9980353/angel"}, "is_accepted": false, "score": 0, "last_activity_date": 1529821193, "last_edit_date": 1529821193, "creation_date": 1529703329, "answer_id": 50995873, "question_id": 49039561, "link": "https://stackoverflow.com/questions/49039561/average-steps-taken/50995873#50995873", "title": "Average Steps Taken", "body": "<h2>I don't know if this would be considered an improvement. I've only been doing python in school for three weeks now but this is how I approached the assignment</h2>\n\n<pre><code># Global Variables/Constants\nmonth = ('January', 'February', 'March', 'April', 'May', 'June', 'July',\n         'August', 'September', 'October', 'November', 'December')\ndays = (31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31)\n# Main Module\ndef main():\n    # This calls the welcome module\n    welcome()\n    # This calls the Step Tracker module\n    stepTracker()\n# Welcome Module\ndef welcome():\n    print ('Here is your workout information for the year:')\n    print ('__________________________________________________________________')\n    print ('')\n# Counter Module\ndef stepTracker():\n    # This opens the steps.txt file\n    stepCounter = open('steps.txt', 'r')\n    # This sets the month count to zero which begins the tuple.\n    monthCount = 0\n    # This loops through the months until the 12th month is reached\n    for num in range(1, 13):\n        # This resets the base values for the counters on each months iteration\n        totalSteps = 0\n        count = 0\n        average = 0\n        # This iterates until the end of the month is reached\n        for count in range(1, days[monthCount] + 1):\n            # This reads the lines until the end of the month is reached\n            steps = int(stepCounter.readline())\n            # This sums the months\n            totalSteps = totalSteps + steps\n        # This averages the steps for the month\n        average = totalSteps / days[monthCount]\n        # This prints the average for the month\n        print ('The average steps taken for the month of ' + month[monthCount] +\n               ' is: ' + format(average, ',.1f') + ' steps.')\n        # This increments the months count\n        monthCount = monthCount + 1\n# This calls the main module\nmain()\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 9361750, "user_type": "registered", "profile_image": "https://graph.facebook.com/168256053897600/picture?type=large", "display_name": "Bryant Housemyer", "link": "https://stackoverflow.com/users/9361750/bryant-housemyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3022, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1529821193, "creation_date": 1519856331, "question_id": 49039561, "link": "https://stackoverflow.com/questions/49039561/average-steps-taken", "title": "Average Steps Taken", "body": "<p>My program runs but it only outputs \"MONTH | AVERAGE\". I need it to post how many steps are taken in each month.</p>\n\n<pre><code>days = [31,28,31,30,31,30,31,31,30,31,30,31]\nmonths = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December']\nfirstIndex = 0\nlastIndex = 0\n\ninputFile = open(r'C\\Users\\UserName\\Downloads\\steps.txt', 'r')\noutputFile = open(r'C\\Users\\UserName\\Downloads\\stepsbymonth.txt', 'w')\n\noutputFile.write('MONTH | AVERAGE\\n')\nprint('MONTH | AVERAGE\\n')\nlines = inputFile.readlines()\nlines = list(map(int,lines))\n\nfor x in range(0, 12):\n    lastIndex = firstIndex + days[x]\n    monthLines = lines[firstIndex:lastIndex]\n    average = float(sum(monthLines)) / max(len(monthLines),1)\n    outputFile.write(months[x] + '|' + '{0:.1f}'.format(average)+ '\\n')\n    firstIndex = lastIndex\n\ninputFile.close()\noutputFile.close()\n</code></pre>\n"}, {"tags": ["python", "vector", "angle"], "comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1519856221, "post_id": 49039518, "comment_id": 85084397, "body": "Definition of <code>v0L, v1L</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": false, "score": 0, "last_activity_date": 1519856548, "creation_date": 1519856548, "answer_id": 49039611, "question_id": 49039518, "link": "https://stackoverflow.com/questions/49039518/angle-between-vectors-only-length-1-arrays-can-be-converted-to-python-scalars/49039611#49039611", "title": "angle between vectors - only length-1 arrays can be converted to Python scalars", "body": "<p>Change <code>acos</code> to <code>np.arccos</code>. You can get that error if <code>acos</code> refers to <code>math.acos</code>:</p>\n\n<pre><code>In [9]: math.acos(np.ones(2))\nTypeError: only length-1 arrays can be converted to Python scalars\n\nIn [11]: np.arccos(np.ones(2))\nOut[11]: array([ 0.,  0.])\n</code></pre>\n\n<p><code>math.acos</code> expects a scalar (or length-1 array) as input. <code>np.arccos</code> can accept a NumPy array (or a scalar).</p>\n"}], "owner": {"reputation": 1, "user_id": 9382577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c4aa9de726b939ef495c8dbb32790e?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon P", "link": "https://stackoverflow.com/users/9382577/brandon-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 200, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1519856548, "creation_date": 1519856123, "question_id": 49039518, "link": "https://stackoverflow.com/questions/49039518/angle-between-vectors-only-length-1-arrays-can-be-converted-to-python-scalars", "title": "angle between vectors - only length-1 arrays can be converted to Python scalars", "body": "<p>I have two 2D vectors v0L and v1L.</p>\n\n<pre><code>def magnitude(v1):\n    return(np.sqrt(v1[0]**2 +v1[1]**2))\n\ndef angle(v1, v2):\n    return acos(np.dot(v1, v2) / (magnitude(v1) * magnitude(v2)))\n\nangle(v0L,v1L)\n</code></pre>\n\n<p>Why is this giving me a \" only length-1 arrays can be converted to Python scalars\" error?</p>\n\n<p>Thank you so much in advance!</p>\n"}, {"tags": ["python", "function", "time-series", "call"], "comments": [{"owner": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "edited": false, "score": 0, "creation_date": 1519856296, "post_id": 49039491, "comment_id": 85084428, "body": "Don&#39;t name variables the same as functions."}, {"owner": {"reputation": 85, "user_id": 9408531, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/992302dd3c709c3d86115f3e81e43845?s=128&d=identicon&r=PG&f=1", "display_name": "econstud12345", "link": "https://stackoverflow.com/users/9408531/econstud12345"}, "reply_to_user": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "edited": false, "score": 0, "creation_date": 1519856391, "post_id": 49039491, "comment_id": 85084458, "body": "Do you have  a example in my code?"}, {"owner": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "edited": false, "score": 0, "creation_date": 1519856432, "post_id": 49039491, "comment_id": 85084477, "body": "<code>s_t</code> and <code>v_t</code>"}, {"owner": {"reputation": 85, "user_id": 9408531, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/992302dd3c709c3d86115f3e81e43845?s=128&d=identicon&r=PG&f=1", "display_name": "econstud12345", "link": "https://stackoverflow.com/users/9408531/econstud12345"}, "reply_to_user": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "edited": false, "score": 0, "creation_date": 1519856442, "post_id": 49039491, "comment_id": 85084479, "body": "maybe s_t_ =  = np.zeros([T,1]) instead of s_t ?"}, {"owner": {"reputation": 85, "user_id": 9408531, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/992302dd3c709c3d86115f3e81e43845?s=128&d=identicon&r=PG&f=1", "display_name": "econstud12345", "link": "https://stackoverflow.com/users/9408531/econstud12345"}, "reply_to_user": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "edited": false, "score": 0, "creation_date": 1519856457, "post_id": 49039491, "comment_id": 85084487, "body": "okay I try it out, thank you!"}, {"owner": {"reputation": 85, "user_id": 9408531, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/992302dd3c709c3d86115f3e81e43845?s=128&d=identicon&r=PG&f=1", "display_name": "econstud12345", "link": "https://stackoverflow.com/users/9408531/econstud12345"}, "reply_to_user": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "edited": false, "score": 0, "creation_date": 1519857000, "post_id": 49039491, "comment_id": 85084712, "body": "I got     <code>def v_t(var_v, T):     # Getting draws of the shock realizations     v_t_ = np.zeros([T,1])     # Specification for stochastic realizations:     v_t_[1:T] = (var_v ** 0.5) * np.random.randn(len(v_t_) - 1, 1)     return v_t_  def s_t(rho, T):     # Generating the sequence of autocorrelated productivity states     v_t_2 = v_t(var_v, T)     s_t_ = np.zeros([T,1])     s_t_[0] = 0     for t in range(1,T):         s_t_[t] = rho *s_t_[t-1] + v_t_2[t]     return s_t_ </code> But it does not work either...."}, {"owner": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "edited": false, "score": 0, "creation_date": 1519857076, "post_id": 49039491, "comment_id": 85084746, "body": "Just to clarify, I was stating a general programming rule i.e it isn&#39;t the solution but it&#39;s a clean-up."}, {"owner": {"reputation": 85, "user_id": 9408531, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/992302dd3c709c3d86115f3e81e43845?s=128&d=identicon&r=PG&f=1", "display_name": "econstud12345", "link": "https://stackoverflow.com/users/9408531/econstud12345"}, "reply_to_user": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "edited": false, "score": 0, "creation_date": 1519857228, "post_id": 49039491, "comment_id": 85084807, "body": "Okay, I misunderstood that. Nonetheless, thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 85, "user_id": 9408531, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/992302dd3c709c3d86115f3e81e43845?s=128&d=identicon&r=PG&f=1", "display_name": "econstud12345", "link": "https://stackoverflow.com/users/9408531/econstud12345"}, "is_accepted": false, "score": 0, "last_activity_date": 1519858180, "creation_date": 1519858180, "answer_id": 49039966, "question_id": 49039491, "link": "https://stackoverflow.com/questions/49039491/python-how-can-i-stop-my-function-values-from-changing-after-my-first-call-tim/49039966#49039966", "title": "Python: How can I stop my function values from changing after my first call (time series)", "body": "<p>I think the problem concerns with the np.random.randn(len(v_t_) - 1, 1)...</p>\n"}], "owner": {"reputation": 85, "user_id": 9408531, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/992302dd3c709c3d86115f3e81e43845?s=128&d=identicon&r=PG&f=1", "display_name": "econstud12345", "link": "https://stackoverflow.com/users/9408531/econstud12345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519858180, "creation_date": 1519856017, "last_edit_date": 1519857197, "question_id": 49039491, "link": "https://stackoverflow.com/questions/49039491/python-how-can-i-stop-my-function-values-from-changing-after-my-first-call-tim", "title": "Python: How can I stop my function values from changing after my first call (time series)", "body": "<p>I have:</p>\n\n<pre><code>np.random.seed(123)\ndef v_t(var_v, T):\n    v_t_ = np.zeros([T,1])\n    v_t_[1:T] = (var_v ** 0.5) * np.random.randn(len(v_t_) - 1, 1)\n    return v_t_\n\ndef s_t(rho, T):\n    v_t_ = v_t(var_v, T)\n    s_t_ = np.zeros([T,1])\n    s_t_[0] = 0\n    for t in range(1,T):\n        s_t_[t] = rho *s_t_[t-1] + v_t_[t]\n    return s_t_\n</code></pre>\n\n<p>However every time I call one of the values, i.e. </p>\n\n<pre><code>s_t(rho, T)       \"or\"         v_t(var_v, T)\n</code></pre>\n\n<p>the right value is shown. But directly afterwards, when I call the other value, the value is wrong. (Probably due to some time series effect.) After I clear my namespace, when I call the functions in the mirrored sequence, the same holds true. How do I get the right values displayed for every call without resetting the namespace???</p>\n\n<p>Would be great to hear from you! Cheers, Tobias</p>\n"}, {"tags": ["python", "flask", "jwt", "flask-restful", "flask-jwt-extended"], "answers": [{"comments": [{"owner": {"reputation": 3965, "user_id": 755934, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/78206ae90608eeec3892338bc3f1d1b4?s=128&d=identicon&r=PG", "display_name": "Daniel Kats", "link": "https://stackoverflow.com/users/755934/daniel-kats"}, "edited": false, "score": 0, "creation_date": 1520021830, "post_id": 49042165, "comment_id": 85159226, "body": "If you add a code snippet to the answer I&#39;ll accept. I&#39;m not sure how jwt=... is initialized in the extensions file though"}, {"owner": {"reputation": 2956, "user_id": 272689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d765f09f68f08a92a904571e7244fa87?s=128&d=identicon&r=PG", "display_name": "vimalloc", "link": "https://stackoverflow.com/users/272689/vimalloc"}, "reply_to_user": {"reputation": 3965, "user_id": 755934, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/78206ae90608eeec3892338bc3f1d1b4?s=128&d=identicon&r=PG", "display_name": "Daniel Kats", "link": "https://stackoverflow.com/users/755934/daniel-kats"}, "edited": false, "score": 0, "creation_date": 1520022175, "post_id": 49042165, "comment_id": 85159381, "body": "Those links are part of a full working code sample which you can see how this works. You can also check out this link <a href=\"http://flask.pocoo.org/docs/0.12/patterns/appfactories/\" rel=\"nofollow noreferrer\">flask.pocoo.org/docs/0.12/patterns/appfactories</a> for more documentation on how this concept works."}, {"owner": {"reputation": 2956, "user_id": 272689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d765f09f68f08a92a904571e7244fa87?s=128&d=identicon&r=PG", "display_name": "vimalloc", "link": "https://stackoverflow.com/users/272689/vimalloc"}, "reply_to_user": {"reputation": 3965, "user_id": 755934, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/78206ae90608eeec3892338bc3f1d1b4?s=128&d=identicon&r=PG", "display_name": "Daniel Kats", "link": "https://stackoverflow.com/users/755934/daniel-kats"}, "edited": false, "score": 0, "creation_date": 1520022243, "post_id": 49042165, "comment_id": 85159407, "body": "And to clarify, it is not initialized in the extensions file, it is initialized in the create_app() function."}], "tags": [], "owner": {"reputation": 2956, "user_id": 272689, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d765f09f68f08a92a904571e7244fa87?s=128&d=identicon&r=PG", "display_name": "vimalloc", "link": "https://stackoverflow.com/users/272689/vimalloc"}, "is_accepted": false, "score": 2, "last_activity_date": 1519874874, "creation_date": 1519874874, "answer_id": 49042165, "question_id": 49039479, "link": "https://stackoverflow.com/questions/49039479/using-flask-jwt-extended-callbacks-with-flask-restful-and-create-app/49042165#49042165", "title": "Using flask-jwt-extended callbacks with flask-restful and create_app", "body": "<p>Put the <code>JWTManager</code> in a different file, and initialize it with the <code>jwt.init_app</code> function</p>\n\n<p>As an example, see:</p>\n\n<p><a href=\"https://github.com/vimalloc/flask-jwt-extended/blob/master/examples/database_blacklist/extensions.py\" rel=\"nofollow noreferrer\">https://github.com/vimalloc/flask-jwt-extended/blob/master/examples/database_blacklist/extensions.py</a></p>\n\n<p>and</p>\n\n<p><a href=\"https://github.com/vimalloc/flask-jwt-extended/blob/master/examples/database_blacklist/app.py\" rel=\"nofollow noreferrer\">https://github.com/vimalloc/flask-jwt-extended/blob/master/examples/database_blacklist/app.py</a></p>\n"}, {"tags": [], "owner": {"reputation": 3965, "user_id": 755934, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/78206ae90608eeec3892338bc3f1d1b4?s=128&d=identicon&r=PG", "display_name": "Daniel Kats", "link": "https://stackoverflow.com/users/755934/daniel-kats"}, "is_accepted": true, "score": 2, "last_activity_date": 1520021790, "creation_date": 1520021790, "answer_id": 49076689, "question_id": 49039479, "link": "https://stackoverflow.com/questions/49039479/using-flask-jwt-extended-callbacks-with-flask-restful-and-create-app/49076689#49076689", "title": "Using flask-jwt-extended callbacks with flask-restful and create_app", "body": "<p>What I ended up doing was putting the handler inside of <code>create_app</code> like so:</p>\n\n<pre><code>def create_app(name: str, settings_override: dict = {}):\n    app = Flask(name, ...)\n    ...\n    jwt = JWTManager(app)\n    @jwt.token_in_blacklist_loader\n    def check_token_in_blacklist(token_dict: dict) -&gt; bool:\n        ...\n</code></pre>\n"}], "owner": {"reputation": 3965, "user_id": 755934, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/78206ae90608eeec3892338bc3f1d1b4?s=128&d=identicon&r=PG", "display_name": "Daniel Kats", "link": "https://stackoverflow.com/users/755934/daniel-kats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1850, "favorite_count": 1, "accepted_answer_id": 49076689, "answer_count": 2, "score": 4, "last_activity_date": 1520022058, "creation_date": 1519855965, "question_id": 49039479, "link": "https://stackoverflow.com/questions/49039479/using-flask-jwt-extended-callbacks-with-flask-restful-and-create-app", "title": "Using flask-jwt-extended callbacks with flask-restful and create_app", "body": "<p>I'm trying to create API tokens for my flask API with flask-jwt-extended. I'm trying to initialize the <a href=\"http://flask-jwt-extended.readthedocs.io/en/latest/api.html#flask_jwt_extended.JWTManager.token_in_blacklist_loader\" rel=\"nofollow noreferrer\">token_in_blacklist_loader</a> but can't figure out the right way to do that.</p>\n\n<p>The problem is that <code>token_in_blacklist_loader</code> is implemented as a decorator. It is supposed to be used in the following way:</p>\n\n<pre><code>@jwt.token_in_blacklist_loader\ndef check_if_token_in_blacklist(decrypted_token):\n    jti = decrypted_token['jti']\n    return jti in blacklist\n</code></pre>\n\n<p>^ <a href=\"http://flask-jwt-extended.readthedocs.io/en/latest/blacklist_and_token_revoking.html\" rel=\"nofollow noreferrer\">from the docs here</a></p>\n\n<p>Where <code>jwt</code> is defined as:</p>\n\n<pre><code>jwt = JWTManager(app)\n</code></pre>\n\n<p>But if using the <code>create_app</code> pattern, then <code>jwt</code> variable is hidden inside a function, and cannot be used in the global scope for decorators.</p>\n\n<p>What is the right way to fix this / work around this?</p>\n"}, {"tags": ["python", "class", "types", "fractions"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1519856002, "post_id": 49039473, "comment_id": 85084309, "body": "The arbitrary requirements suggest homework - SO isn&#39;t here to do it for you."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 2458, "user_id": 6445069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tmqHA.jpg?s=128&g=1", "display_name": "Phydeaux", "link": "https://stackoverflow.com/users/6445069/phydeaux"}, "edited": false, "score": 1, "creation_date": 1519856069, "post_id": 49039473, "comment_id": 85084337, "body": "@Phydeaux: You can&#39;t, either on <code>object</code> itself or <code>object()</code> instances."}, {"owner": {"reputation": 4102, "user_id": 7908770, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/01c6edec3c808659a8e8f42d4259a4b3?s=128&d=identicon&r=PG&f=1", "display_name": "Adi219", "link": "https://stackoverflow.com/users/7908770/adi219"}, "edited": false, "score": 0, "creation_date": 1519856149, "post_id": 49039473, "comment_id": 85084365, "body": "Why use <code>tuple</code>s instead of <code>list</code>s??"}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1519856918, "post_id": 49039473, "comment_id": 85084675, "body": "What exactly do you mean by &quot;data type&quot; without any classes? That seems like a contradiction in Python and many other languages."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1519857989, "post_id": 49039473, "comment_id": 85085131, "body": "You cannot, strictly speaking, since in Python, the <i>type</i> of an object is its class. But that is a bit of a pedantic point."}], "answers": [{"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 2, "last_activity_date": 1519857091, "creation_date": 1519857091, "answer_id": 49039719, "question_id": 49039473, "link": "https://stackoverflow.com/questions/49039473/implementing-new-data-type-in-python-without-classes/49039719#49039719", "title": "Implementing new data type in Python - without classes", "body": "<p>You have two problems. 1) How to encapsulate the data, and 2) How to operate on the data.</p>\n\n<p>First, let's solve encapsulation. Just put everything you need in a tuple:</p>\n\n<pre><code>half = (1,2)\nwhole = (1,1)\nanswer = (42,1)\n</code></pre>\n\n<p>See? The first item is the numerator, the second is the denominator.</p>\n\n<p>Now you need a way to operate on the data. Since we can't use methods, we'll just use regular functions:</p>\n\n<pre><code>def mul(a,b):\n    'Multiply two fractions'\n    return (a[0]*b[0], a[1]*b[1])\n</code></pre>\n\n<p>Similarly, implement <code>add(a,b)</code>, <code>negate(a)</code>, <code>sub(a,b)</code>, etc. You might need a <code>simplify()</code>, so you don't end up with <code>10240000/20480000</code> after a while.</p>\n\n<p>To make our object-oriented-without-classes suite complete, we need a constructor:</p>\n\n<pre><code>def make_frac(num, denom):\n    'Create a fraction with the indicated numerate and denominator'\n    return (num, denom)\n</code></pre>\n\n<p>Finally, place all of these functions in a module, and your task is complete. The user of your library will write something like this:</p>\n\n<pre><code>import your_fraction_lib\n\nhalf = your_fraction_lib.make_frac(1,2)\nquarter = your_fraction_lib.mul(half, half)\nthree_quaters = your_fraction_lib.add(half, quarter)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "is_accepted": false, "score": 0, "last_activity_date": 1519859897, "creation_date": 1519859897, "answer_id": 49040272, "question_id": 49039473, "link": "https://stackoverflow.com/questions/49039473/implementing-new-data-type-in-python-without-classes/49040272#49040272", "title": "Implementing new data type in Python - without classes", "body": "<p>If you want to troll your teacher, you could do something along the lines of:</p>\n\n<pre><code>def construct(values):\n    def mul(other_fraction):\n        new_numerator = values['numerator']*other_fraction['values']['numerator']\n        new_denominator = values['denominator']*other_fraction['values']['denominator']\n        new_values = {'numerator':new_numerator,'denominator':new_denominator}\n        return(construct(new_values))\n    return({'values':{'numerator':values['numerator'],'denominator':values['denominator']},'mul':mul})\n</code></pre>\n\n<p>This allows you to construct objects that contain a <code>mul</code> function that acts much like a class method:</p>\n\n<pre><code>x = construct({'numerator':1,'denominator':2})\ny = construct({'numerator':3,'denominator':5})   \nproduct = x['mul'](y)\nprint(product['values']['numerator'],product['values']['denominator'])\n&gt;&gt;3 10\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 6899325, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a44dda00ee9413a3d305436b9fe3b26c?s=128&d=identicon&r=PG&f=1", "display_name": "Pawe\u0142", "link": "https://stackoverflow.com/users/6899325/pawe%c5%82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1519859897, "creation_date": 1519855944, "question_id": 49039473, "link": "https://stackoverflow.com/questions/49039473/implementing-new-data-type-in-python-without-classes", "title": "Implementing new data type in Python - without classes", "body": "<p>I'm trying to implement new data type \"Fractions\" in Python to represents fractions, where numenator and denominator are both integers. Moreover, I have to implement four basic arithmetic operations. The trick is, I can't use classes in this task.\nI thoght maybe tuples can be a good idea but I really don't know how to approach this.\nIs there an easy way to solve such a problem? Any hint would really help me. </p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 9425974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/975b35e59ee71b4e163d31b390c1b3c5?s=128&d=identicon&r=PG&f=1", "display_name": "Dave M", "link": "https://stackoverflow.com/users/9425974/dave-m"}, "edited": false, "score": 0, "creation_date": 1519866382, "post_id": 49040082, "comment_id": 85087532, "body": "Thanks so much, you are heading me in the right direction! I am reading more about attributes, and how they relate to variables.  What I would like to do is set both the method name and the state it returns dynamically at run time, and make this change to the class rather than the instance as you have done. I will work on this and get back with any code that works or more questions if I fail."}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": false, "score": 0, "last_activity_date": 1519858814, "creation_date": 1519858814, "answer_id": 49040082, "question_id": 49039469, "link": "https://stackoverflow.com/questions/49039469/dynamically-adding-method-state-to-a-class-instance-with-name-value-determined-a/49040082#49040082", "title": "Dynamically adding method/state to a class/instance with name/value determined at runtime", "body": "<p>You are confusing the <em>local variable</em> <code>state</code> inside <code>h</code>, which has nothing to do with the attribute on the function object, <code>h.state</code>. They are not related... Note, <code>f.bar.state</code> will give you <code>'something'</code>.</p>\n\n<p>You could could do something like this:</p>\n\n<pre><code>In [6]: class Foo: pass\n\nIn [7]: def h(self):\n   ...:     return self.state\n   ...:\n\nIn [8]: Foo.bar = h\n\nIn [9]: f = Foo()\n\nIn [10]: f.state = 'something'\n\nIn [11]: f.bar()\nOut[11]: 'something'\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 9425974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/975b35e59ee71b4e163d31b390c1b3c5?s=128&d=identicon&r=PG&f=1", "display_name": "Dave M", "link": "https://stackoverflow.com/users/9425974/dave-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1519858814, "creation_date": 1519855924, "last_edit_date": 1519856502, "question_id": 49039469, "link": "https://stackoverflow.com/questions/49039469/dynamically-adding-method-state-to-a-class-instance-with-name-value-determined-a", "title": "Dynamically adding method/state to a class/instance with name/value determined at runtime", "body": "<p>I need to dynamically add a class method with a name determined at runtime, and also an internal state that is determined at runtime. Here is the simplest example I can cook up:</p>\n\n<pre><code>class foo():\n    pass\n\ndef h(self):   # h() is just a placeholder until we can do setattr()\n    state = 'none'\n    return state\n\nsetattr(h,'state','something')\nsetattr(foo,'bar',h)\ndel(h)\n\nprint(dir(foo))         # includes 'bar'\nprint(dir(foo.bar))     # includes 'state'\nprint(getattr(foo.bar,'state')) # 'something'\n\nf = foo()\nprint(getattr(f.bar,'state'))    # 'something'\n\n# all is well up to here, but now we go awry\nprint(f.bar())   # 'none'\n</code></pre>\n\n<p>In the last line, the bar() return statement seems to be bound to the original definition in h() rather than its new context in foo. I have tried numerous things, and looked at introspection and other topics in stack overflow, but come up empty. How can I modify this code so that the last line yields 'something'?</p>\n"}, {"tags": ["python", "django", "python-3.x", "listview", "django-views"], "comments": [{"owner": {"reputation": 54482, "user_id": 8283848, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/YiHgN.jpg?s=128&g=1", "display_name": "JPG", "link": "https://stackoverflow.com/users/8283848/jpg"}, "edited": false, "score": 0, "creation_date": 1519877715, "post_id": 49039468, "comment_id": 85090140, "body": "I think this would help you <a href=\"https://stackoverflow.com/questions/18664182/is-it-possible-to-have-a-form-in-a-listview-template\" title=\"is it possible to have a form in a listview template\">stackoverflow.com/questions/18664182/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 688, "user_id": 1193487, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d5de3e47ec1a1d37eed65be9d8c352ad?s=128&d=identicon&r=PG", "display_name": "Ewanw", "link": "https://stackoverflow.com/users/1193487/ewanw"}, "is_accepted": true, "score": 1, "last_activity_date": 1519959394, "creation_date": 1519959394, "answer_id": 49062124, "question_id": 49039468, "link": "https://stackoverflow.com/questions/49039468/django-get-custom-queryset-into-listview/49062124#49062124", "title": "Django get custom queryset into ListView", "body": "<p>I found what I feel is more elegant than the comment on the question:</p>\n\n<p>My form valid now points to the list object's as_view method and passes the request and the queryset I want</p>\n\n<pre><code>def form_valid(self, form):\n    #build a queryset based on form\n    searchval=form.cleaned_data['search']\n    list = MetaObject.objects.filter(val=search)\n    return MetaObjectList.as_view()(self.request,list)\n</code></pre>\n\n<p>This hits the ListView as a post which I use to alter the queryset</p>\n\n<pre><code>class MetaObjectList(ListView):\n    model = MetaObject\n\n    queryset = MetaObject.objects.prefetch_related('object_type','domain')\n\n    def post(self, request, *args, **kwargs):\n        self.queryset = args[0]\n        return self.get(request, *args, **kwargs)\n</code></pre>\n\n<p>The only obvious change is using kwargs to make it a bit clearer. Otherwise this seems to work well.</p>\n"}], "owner": {"reputation": 688, "user_id": 1193487, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d5de3e47ec1a1d37eed65be9d8c352ad?s=128&d=identicon&r=PG", "display_name": "Ewanw", "link": "https://stackoverflow.com/users/1193487/ewanw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1627, "favorite_count": 0, "accepted_answer_id": 49062124, "answer_count": 1, "score": 1, "last_activity_date": 1519959394, "creation_date": 1519855918, "last_edit_date": 1519859394, "question_id": 49039468, "link": "https://stackoverflow.com/questions/49039468/django-get-custom-queryset-into-listview", "title": "Django get custom queryset into ListView", "body": "<p>I have a listview that I access in a pretty bog standard way to return all metaobjects.</p>\n\n<pre><code>#url \nurl(r'^metaobject/$', MetaObjectList.as_view(),name='metaobject_list'),\n\n#ListView\nclass MetaObjectList(ListView):\n    model = MetaObject\n</code></pre>\n\n<p>I've recently added a search form that I want to scan my objects (I've got about 5 fields but I've simplified the example). What I'd like to do is re-use my MetaObjectList class view with my specific subset. I am guessing I need to override the get_queryset method but I'm not clear in how I get the queryset from my FormView into the listview. I mucked around a bit with calling the as_view() in the formveiw's form_valid function with additional parameters but couldn't get it to work and it seemed hacky anyway.</p>\n\n<pre><code>class SearchView(FormView):\n    template_name = 'heavy/search.html'\n    form_class = SearchForm\n\n    #success_url = '/thanks/'\n\n    def form_valid(self, form):\n        #build a queryset based on form\n        searchval=form.cleaned_data['search']\n        list = MetaObject.objects.filter(val=search)\n        #where to from here?\n</code></pre>\n\n<p>I also looked at trying to post the data from the form view over to the listview but that seemed like I'd need to re-write the form logic into the listview.</p>\n\n<p>I'm on python 3.x and django 1.11.</p>\n"}, {"tags": ["python", "numpy", "scipy", "curve-fitting"], "comments": [{"owner": {"reputation": 1798, "user_id": 2280890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e409f9d13ce2d82edcb84b3f9cfb879?s=128&d=identicon&r=PG", "display_name": "import random", "link": "https://stackoverflow.com/users/2280890/import-random"}, "edited": false, "score": 1, "creation_date": 1519857095, "post_id": 49039465, "comment_id": 85084754, "body": "Welcome to Stack Overflow. Please take the <a href=\"https://stackoverflow.com/tour\">tour</a> and read about <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. Thanks for the code snippet, but a more <a href=\"https://stackoverflow.com/help/mcve\">fleshed out example</a> will make it easier for people to help you."}, {"owner": {"reputation": 636, "user_id": 3255247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/727fe5d4e747f49280bab38c29c69234?s=128&d=identicon&r=PG&f=1", "display_name": "Jon Custer", "link": "https://stackoverflow.com/users/3255247/jon-custer"}, "edited": false, "score": 0, "creation_date": 1519867423, "post_id": 49039465, "comment_id": 85087753, "body": "You could use Savitzky-Golay and get the 2nd derivative from that easily."}, {"owner": {"reputation": 6899, "user_id": 6510497, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/3go0E.png?s=128&g=1", "display_name": "Aguy", "link": "https://stackoverflow.com/users/6510497/aguy"}, "edited": false, "score": 2, "creation_date": 1519875272, "post_id": 49039465, "comment_id": 85089560, "body": "What do you mean by &quot;way too off&quot;?"}, {"owner": {"reputation": 19758, "user_id": 1534017, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/aa667d0e455aa30f3410756d719de795?s=128&d=identicon&r=PG", "display_name": "Cleb", "link": "https://stackoverflow.com/users/1534017/cleb"}, "edited": false, "score": 1, "creation_date": 1519907820, "post_id": 49039465, "comment_id": 85103852, "body": "If you provided data along with your output, it would be much easier to help."}], "owner": {"reputation": 31, "user_id": 9426019, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "DeepLearning", "link": "https://stackoverflow.com/users/9426019/deeplearning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1519857337, "creation_date": 1519855907, "last_edit_date": 1519857337, "question_id": 49039465, "link": "https://stackoverflow.com/questions/49039465/what-are-other-methods-to-find-curvature-of-a-polynomial-apart-from-np-polyfit", "title": "What are other methods to find curvature of a polynomial apart from np.polyfit()", "body": "<p>I am trying to find the curvature of a polynomial. X and Y are python lists of X and Y coordinates respectively. I use <code>scipy.interpolate</code> because I am able to see better curves in my image. But once I find the coefficients of a 2D polynomial and re-plot them back into the image, the replotted curve looks way too off. </p>\n\n<ul>\n<li><p>How do I find accurate coefficients of a polynomial curve</p>\n\n<pre><code>interpolate = interpolate.interp1d(X, Y)\nz = np.polyfit(X, interpolate(X),2)  #coefficients\npoly_y = [z[0]*x*x + z[1]*x + z[2] for x in X] #Recompute Y coordinates\nplt.plot(X, poly_y)\n</code></pre></li>\n</ul>\n"}, {"tags": ["python", "python-3.x", "python-packaging"], "answers": [{"comments": [{"owner": {"reputation": 2458, "user_id": 6445069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tmqHA.jpg?s=128&g=1", "display_name": "Phydeaux", "link": "https://stackoverflow.com/users/6445069/phydeaux"}, "edited": false, "score": 1, "creation_date": 1519856425, "post_id": 49039535, "comment_id": 85084471, "body": "This will work, but you should also be able to do a relative import from within the <code>myproject</code> package, which OP has tried. What would cause that not to work?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "reply_to_user": {"reputation": 2458, "user_id": 6445069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tmqHA.jpg?s=128&g=1", "display_name": "Phydeaux", "link": "https://stackoverflow.com/users/6445069/phydeaux"}, "edited": false, "score": 2, "creation_date": 1519857185, "post_id": 49039535, "comment_id": 85084784, "body": "That has been covered a billion times over at <a href=\"https://stackoverflow.com/q/14132789/674039\">Relative imports for the billionth time</a>, so I won&#39;t go into it again."}, {"owner": {"reputation": 2458, "user_id": 6445069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tmqHA.jpg?s=128&g=1", "display_name": "Phydeaux", "link": "https://stackoverflow.com/users/6445069/phydeaux"}, "edited": false, "score": 0, "creation_date": 1519857464, "post_id": 49039535, "comment_id": 85084894, "body": "you think OP is running <code>api.py</code> as a script? that would explain it, yes"}, {"owner": {"reputation": 679, "user_id": 4437417, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc5f78c0c8a5b3fc8edcae80ccf4e4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Gasp0de", "link": "https://stackoverflow.com/users/4437417/gasp0de"}, "edited": false, "score": 0, "creation_date": 1519860843, "post_id": 49039535, "comment_id": 85086109, "body": "I guess I&#39;ll dive into the PyPA packaging guide then =)"}, {"owner": {"reputation": 679, "user_id": 4437417, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc5f78c0c8a5b3fc8edcae80ccf4e4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Gasp0de", "link": "https://stackoverflow.com/users/4437417/gasp0de"}, "edited": false, "score": 2, "creation_date": 1520272002, "post_id": 49039535, "comment_id": 85238174, "body": "I created a package and installed it using pip install --editable as suggested. Works like a charm, thank you!"}, {"owner": {"reputation": 89, "user_id": 4229188, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/edf0f6037376dcc2177215e477e47fec?s=128&d=identicon&r=PG&f=1", "display_name": "claudio", "link": "https://stackoverflow.com/users/4229188/claudio"}, "edited": false, "score": 0, "creation_date": 1607850441, "post_id": 49039535, "comment_id": 115397602, "body": "This answer really helped me. Although I\u2019ve seen similar answers on many other similar questions, I couldn\u2019t believe you have to install the package <i>you want to develop</i> itself. That is \u2013 at least for me \u2013 <i>highly</i> contra intuitive. Your answer clarified it."}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 24, "last_activity_date": 1574067293, "last_edit_date": 1574067293, "creation_date": 1519856211, "answer_id": 49039535, "question_id": 49039436, "link": "https://stackoverflow.com/questions/49039436/how-to-import-a-module-from-a-different-folder/49039535#49039535", "title": "How to import a module from a different folder?", "body": "<p>Firstly, this import statement:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from models import some_model\n</code></pre>\n\n<p>should be namespaced:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># in myproject/backend/backend.py or myproject/api/api.py\nfrom myproject.models import some_model\n</code></pre>\n\n<p>Then you will need to get the directory which contains <code>myproject</code>, let's call this <code>/path/to/parent</code>, into the <code>sys.path</code> list.  You can do this temporarily by setting an environment variable:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>export PYTHONPATH=/path/to/parent\n</code></pre>\n\n<p>Or, preferably, you can do it by writing a <code>setup.py</code> file and installing your package.  Follow the <a href=\"https://packaging.python.org/\" rel=\"noreferrer\">PyPA</a> packaging guide.  After you have written your <code>setup.py</code> file, from within the same directory, execute this to setup the correct entries in <code>sys.path</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>pip install --editable .\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 5, "creation_date": 1519856875, "post_id": 49039555, "comment_id": 85084645, "body": "Changing the path from within code, though possible, is messy and bad - it makes the test setup more difficult and makes the import ordering become significant."}], "tags": [], "owner": {"reputation": 224, "user_id": 9425961, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J51_IGSn-fg/AAAAAAAAAAI/AAAAAAAAACc/EluH5_qoPUI/photo.jpg?sz=128", "display_name": "Jordan Mattiuzzo", "link": "https://stackoverflow.com/users/9425961/jordan-mattiuzzo"}, "is_accepted": false, "score": 16, "last_activity_date": 1519856305, "creation_date": 1519856305, "answer_id": 49039555, "question_id": 49039436, "link": "https://stackoverflow.com/questions/49039436/how-to-import-a-module-from-a-different-folder/49039555#49039555", "title": "How to import a module from a different folder?", "body": "<p>Unfortunately, Python will only find your file if your file is in the systems path. But fear not! There is a way around this!</p>\n\n<p>Using python's <code>sys</code> module, we can add a directory to the path just while Python is running, and once Python stops running, it will remove it from the path.</p>\n\n<p>You can do this by:</p>\n\n<pre><code>import sys\nsys.path.insert(0, '/path/to/application/app/folder')\nimport [file]\n</code></pre>\n\n<p>It is important to import sys and set the directory path before you import the file however.</p>\n\n<p>Good luck!</p>\n\n<p>Jordan.</p>\n"}], "owner": {"reputation": 679, "user_id": 4437417, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/bc5f78c0c8a5b3fc8edcae80ccf4e4f2?s=128&d=identicon&r=PG&f=1", "display_name": "Gasp0de", "link": "https://stackoverflow.com/users/4437417/gasp0de"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61006, "favorite_count": 7, "accepted_answer_id": 49039535, "answer_count": 2, "score": 32, "last_activity_date": 1602718015, "creation_date": 1519855760, "last_edit_date": 1580059392, "question_id": 49039436, "link": "https://stackoverflow.com/questions/49039436/how-to-import-a-module-from-a-different-folder", "title": "How to import a module from a different folder?", "body": "<p>I have a project which I want to structure like this:</p>\n\n<pre><code>myproject\n  __init__.py\n  api\n    __init__.py\n    api.py\n  backend\n    __init__.py\n    backend.py\n  models\n    __init__.py\n    some_model.py\n</code></pre>\n\n<p>Now, I want to import the module <code>some_model.py</code> in both <code>api.py</code> and <code>backend.py</code>. How do I properly do this?</p>\n\n<p>I tried:</p>\n\n<pre><code>from models import some_model\n</code></pre>\n\n<p>but that fails with <code>ModuleNotFoundError: No module named 'models'</code>.</p>\n\n<p>I also tried:</p>\n\n<pre><code>from ..models import some_model\n</code></pre>\n\n<p>which gave me <code>ValueError: attempted relative import beyond top-level package</code>. </p>\n\n<p>What am I doing wrong here? How can I import a file from a different directory, which is not a subdirectory?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 6511, "user_id": 3216980, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WKADu.jpg?s=128&g=1", "display_name": "TYZ", "link": "https://stackoverflow.com/users/3216980/tyz"}, "is_accepted": false, "score": 4, "last_activity_date": 1519855907, "creation_date": 1519855907, "answer_id": 49039464, "question_id": 49039402, "link": "https://stackoverflow.com/questions/49039402/pandas-dataframe-add-ignore-missing-columns/49039464#49039464", "title": "Pandas DataFrame.add() -- ignore missing columns", "body": "<p>You can first specify a list of columns you need in your final output:</p>\n\n<pre><code>cols_to_return = [\"above\", \"below\"]\nhistory = history[cols_to_return].add(current[cols_to_return], fill_value=0)\n</code></pre>\n\n<p>By specifying columns beforehand really helps you track what you are doing and debugging future issues.</p>\n"}, {"comments": [{"owner": {"reputation": 12931, "user_id": 436976, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ca5523dd495f8c0a6a6b20db65db2ef4?s=128&d=identicon&r=PG", "display_name": "stevendesu", "link": "https://stackoverflow.com/users/436976/stevendesu"}, "edited": false, "score": 1, "creation_date": 1519856356, "post_id": 49039490, "comment_id": 85084447, "body": "I&#39;ll be accepting this answer as I prefer the one-liner solution in this particular instance, although both answers provided so far were good and either could be preferable depending on the specific use case."}, {"owner": {"reputation": 521, "user_id": 8624538, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ed12631d92aa6e386fd69811b7c99b8a?s=128&d=identicon&r=PG&f=1", "display_name": "Humi", "link": "https://stackoverflow.com/users/8624538/humi"}, "reply_to_user": {"reputation": 12931, "user_id": 436976, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ca5523dd495f8c0a6a6b20db65db2ef4?s=128&d=identicon&r=PG", "display_name": "stevendesu", "link": "https://stackoverflow.com/users/436976/stevendesu"}, "edited": false, "score": 0, "creation_date": 1519877320, "post_id": 49039490, "comment_id": 85090047, "body": "@stevendesu: could you please accept the answer if it solved your problem. its makes us easier for us to know that the question doesn&#39;t need help anymore. Thanks !"}, {"owner": {"reputation": 12931, "user_id": 436976, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ca5523dd495f8c0a6a6b20db65db2ef4?s=128&d=identicon&r=PG", "display_name": "stevendesu", "link": "https://stackoverflow.com/users/436976/stevendesu"}, "edited": false, "score": 0, "creation_date": 1519881046, "post_id": 49039490, "comment_id": 85091024, "body": "Wasn&#39;t able to accept for 10 minutes, then in those 10 minutes had a minor emergency come up :) Sorry about that"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 7, "last_activity_date": 1519856016, "creation_date": 1519856016, "answer_id": 49039490, "question_id": 49039402, "link": "https://stackoverflow.com/questions/49039402/pandas-dataframe-add-ignore-missing-columns/49039490#49039490", "title": "Pandas DataFrame.add() -- ignore missing columns", "body": "<pre><code>In [27]: history.add(current, fill_value=0)[history.columns]\nOut[27]:\n               above  below\nasn   country\n12345 MX         7.0    3.0\n      US         5.0    4.0\n54321 MX         4.0    6.0\n      US         1.0    0.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 7, "last_activity_date": 1519856400, "creation_date": 1519856400, "answer_id": 49039578, "question_id": 49039402, "link": "https://stackoverflow.com/questions/49039402/pandas-dataframe-add-ignore-missing-columns/49039578#49039578", "title": "Pandas DataFrame.add() -- ignore missing columns", "body": "<p>Ummm a new way </p>\n\n<pre><code>pd.concat([df1,df2],join ='inner',axis=0).sum(level=[0,1])\n</code></pre>\n"}], "owner": {"reputation": 12931, "user_id": 436976, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ca5523dd495f8c0a6a6b20db65db2ef4?s=128&d=identicon&r=PG", "display_name": "stevendesu", "link": "https://stackoverflow.com/users/436976/stevendesu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 904, "favorite_count": 0, "accepted_answer_id": 49039490, "answer_count": 3, "score": 6, "last_activity_date": 1519856400, "creation_date": 1519855580, "question_id": 49039402, "link": "https://stackoverflow.com/questions/49039402/pandas-dataframe-add-ignore-missing-columns", "title": "Pandas DataFrame.add() -- ignore missing columns", "body": "<p>I have the following two DataFrames:</p>\n\n<pre><code>&gt;&gt;&gt; history\n              above below\nasn   country\n12345 US          5     4\n      MX          6     3\n54321 MX          4     5\n&gt;&gt;&gt; current\n              above below\nasn   country\n12345 MX          1     0\n54321 MX          0     1\n      US          1     0\n</code></pre>\n\n<p>I keep a running count of the \"above\" and \"below\" values in the <code>history</code> DataFrame like so:</p>\n\n<pre><code>&gt;&gt;&gt; history = history.add(current, fill_value=0)\n&gt;&gt;&gt; history\n               above  below\nasn   country              \n12345 MX         7.0    3.0\n      US         5.0    4.0\n54321 MX         4.0    6.0\n      US         1.0    0.0\n</code></pre>\n\n<p>This works so long as there are no extra columns in the <code>current</code> DataFrame. However when I add an extra column:</p>\n\n<pre><code>&gt;&gt;&gt; current\n              above below cruft\nasn   country\n12345 MX          1     0   999\n54321 MX          0     1   999\n      US          1     0   999\n</code></pre>\n\n<p>I get the following:</p>\n\n<pre><code>&gt;&gt;&gt; history = history.add(current, fill_value=0)\n&gt;&gt;&gt; history\n               above  below cruft\nasn   country              \n12345 MX         7.0    3.0 999.0\n      US         5.0    4.0   NaN\n54321 MX         4.0    6.0 999.0\n      US         1.0    0.0 999.0\n</code></pre>\n\n<p>I want this extra column to be ignored, since it's not present in both DataFrames. The desired output is just:</p>\n\n<pre><code>&gt;&gt;&gt; history\n               above  below\nasn   country              \n12345 MX         7.0    3.0\n      US         5.0    4.0\n54321 MX         4.0    6.0\n      US         1.0    0.0\n</code></pre>\n"}, {"tags": ["python", "shapely"], "owner": {"reputation": 49, "user_id": 2276720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/177275e19c720a03e8ceedc440d33f75?s=128&d=identicon&r=PG", "display_name": "Karthik", "link": "https://stackoverflow.com/users/2276720/karthik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1519855566, "creation_date": 1519855566, "question_id": 49039400, "link": "https://stackoverflow.com/questions/49039400/how-to-save-a-shapely-object-as-an-image", "title": "How to save a shapely object as an image", "body": "<p>I have a shapely object in python. It is the outline of the map of the US.\nHow do I save it as an EPS or PDF?</p>\n"}, {"tags": ["python", "python-3.x", "list", "for-loop", "whitespace"], "answers": [{"comments": [{"owner": {"reputation": 435, "user_id": 7892695, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/10211022544973172/picture?type=large", "display_name": "Keenan Burke-Pitts", "link": "https://stackoverflow.com/users/7892695/keenan-burke-pitts"}, "edited": false, "score": 0, "creation_date": 1519857097, "post_id": 49039407, "comment_id": 85084756, "body": "Thanks.  Do you know why my code still isn&#39;t working properly?  <code>for item in cl_used_items_raw[:2]:     for k in wanted_keys:         lines = str(item[k]).split()         split_lines = [line.replace(&#39;\\n&#39;, &#39;&#39;).strip() for line in lines]         print(&quot;{}&quot;.format(&#39; &#39;.join(split_lines) + &#39;\\t&#39;))     print(&#39;\\n&#39;)</code>"}, {"owner": {"reputation": 5381, "user_id": 9203110, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PQESrk-PCHA/AAAAAAAAAAI/AAAAAAAAAJk/6bqvsnrh4Dg/photo.jpg?sz=128", "display_name": "match", "link": "https://stackoverflow.com/users/9203110/match"}, "reply_to_user": {"reputation": 435, "user_id": 7892695, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/10211022544973172/picture?type=large", "display_name": "Keenan Burke-Pitts", "link": "https://stackoverflow.com/users/7892695/keenan-burke-pitts"}, "edited": false, "score": 0, "creation_date": 1519857428, "post_id": 49039407, "comment_id": 85084889, "body": "Please make an edit to the original question - code in comments is unreadable."}], "tags": [], "owner": {"reputation": 5381, "user_id": 9203110, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PQESrk-PCHA/AAAAAAAAAAI/AAAAAAAAAJk/6bqvsnrh4Dg/photo.jpg?sz=128", "display_name": "match", "link": "https://stackoverflow.com/users/9203110/match"}, "is_accepted": false, "score": 1, "last_activity_date": 1519855634, "creation_date": 1519855634, "answer_id": 49039407, "question_id": 49039340, "link": "https://stackoverflow.com/questions/49039340/removing-unwanted-characters-from-list/49039407#49039407", "title": "Removing Unwanted Characters From List", "body": "<p><code>line.strip()</code> doesn't modify <code>line</code> in-place - it returns the modified value, so the way you are using it won't affect <code>line</code> in any way.</p>\n\n<p>You probably mean:</p>\n\n<pre><code>split_lines = [line.strip() for line in lines]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 435, "user_id": 7892695, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/10211022544973172/picture?type=large", "display_name": "Keenan Burke-Pitts", "link": "https://stackoverflow.com/users/7892695/keenan-burke-pitts"}, "edited": false, "score": 0, "creation_date": 1519856601, "post_id": 49039410, "comment_id": 85084544, "body": "Thanks.  When I use your code for that specific example I get what I need but when I plug that line back into my for-loop <code>split_lines = [line.replace(&#39;\\n&#39;, &#39;&#39;).strip() for line in lines]</code> it outputs the same output I had before?"}], "tags": [], "owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "is_accepted": false, "score": 1, "last_activity_date": 1519855645, "creation_date": 1519855645, "answer_id": 49039410, "question_id": 49039340, "link": "https://stackoverflow.com/questions/49039340/removing-unwanted-characters-from-list/49039410#49039410", "title": "Removing Unwanted Characters From List", "body": "<pre><code>&gt;&gt;&gt; desc = ['\\n        ',\n...   '\\n2013 Yamaha FJR 1300 Sport Touring, 4 cylinder, 12.120 miles, silver, cruise control, traction control, ABS brakes, heated hand grips, Two Brothers exhaust, handle bar risers, 6.5 gal. gas tank, adjustable windshield, saddlebags, excellent condition, very clean.',\n...   '\\n$ 7.500 (828) 250-0373 WWW.GREENVALLEYCARS.COM',\n...   '\\n',\n...   '\\n    ']\n</code></pre>\n\n<p><strong>Before:</strong></p>\n\n<pre><code>&gt;&gt;&gt; desc\n['\\n        ', '\\n2013 Yamaha FJR 1300 Sport Touring, 4 cylinder, 12.120 miles, silver, cruise control, traction control, ABS brakes, heated hand grips, Two Brothers exhaust, handle bar risers, 6.5 gal. gas tank, adjustable windshield, saddlebags, excellent condition, very clean.', '\\n$ 7.500 (828) 250-0373 WWW.GREENVALLEYCARS.COM', '\\n', '\\n    ']\n</code></pre>\n\n<p>Apply replace() and strip()</p>\n\n<pre><code>[x.replace('\\n', '').strip() for x in desc ]\n</code></pre>\n\n<p><strong>After:</strong></p>\n\n<pre><code>['', '2013 Yamaha FJR 1300 Sport Touring, 4 cylinder, 12.120 miles, silver, cruise control, traction control, ABS brakes, heated hand grips, Two Brothers exhaust, handle bar risers, 6.5 gal. gas tank, adjustable windshield, saddlebags, excellent condition, very clean.', '$ 7.500 (828) 250-0373 WWW.GREENVALLEYCARS.COM', '', '']\n</code></pre>\n\n<p>If I understand you correctly, you can replace the newline character with empty string and then remove around whitespaces</p>\n\n<pre><code> [x.replace('\\n', '').strip() for x in desc ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 435, "user_id": 7892695, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/10211022544973172/picture?type=large", "display_name": "Keenan Burke-Pitts", "link": "https://stackoverflow.com/users/7892695/keenan-burke-pitts"}, "is_accepted": false, "score": 0, "last_activity_date": 1519907756, "creation_date": 1519907756, "answer_id": 49049870, "question_id": 49039340, "link": "https://stackoverflow.com/questions/49039340/removing-unwanted-characters-from-list/49049870#49049870", "title": "Removing Unwanted Characters From List", "body": "<p>This gave me the correct output:</p>\n\n<pre><code>for item in cl_used_items_raw[:2]:\n    for k in wanted_keys:\n        if k == 'Description':\n            lines = str(''.join(item[k])).split()\n            split_lines = [line.replace('\\n', '').strip() for line in lines]\n            split_lines = ' '.join(split_lines)\n            print(split_lines)\n        else:\n            lines = str(item[k]).split()\n            split_lines = [line.replace('\\n', '').strip() for line in lines]\n            print(\"{}\".format(' '.join(split_lines) + '\\t'))       \n    print('\\n')\n</code></pre>\n"}], "owner": {"reputation": 435, "user_id": 7892695, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/10211022544973172/picture?type=large", "display_name": "Keenan Burke-Pitts", "link": "https://stackoverflow.com/users/7892695/keenan-burke-pitts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1519907756, "creation_date": 1519855338, "last_edit_date": 1519861030, "question_id": 49039340, "link": "https://stackoverflow.com/questions/49039340/removing-unwanted-characters-from-list", "title": "Removing Unwanted Characters From List", "body": "<p>I have a list of items that are structured similarly to this:</p>\n\n<pre><code>[{'Condition': '2013 Yamaha FJR 1300',\n 'Date': '2018-02-28 11:30',\n 'Description': ['\\n        ',\n  '\\n2013 Yamaha FJR 1300 Sport Touring, 4 cylinder, 12.120 miles, silver, cruise control, traction control, ABS brakes, heated hand grips, Two Brothers exhaust, handle bar risers, 6.5 gal. gas tank, adjustable windshield, saddlebags, excellent condition, very clean.',\n  '\\n$ 7.500 (828) 250-0373 WWW.GREENVALLEYCARS.COM',\n  '\\n',\n  '\\n    '],\n 'Images': [],\n 'Latitude': '35.599694',\n 'Location': ' (Asheville)',\n 'Longitude': '-82.628866',\n 'Price': '$7500',\n 'Title': '2013 Yamaha FJR 1300',\n 'Url': 'https://asheville.craigslist.org/mcd/d/2013-yamaha-fjr-1300/6513320993.html',\n '_id': {'$oid': '5a96dbee6f9ca5410cc9ed98'}},\n\n{'Condition': '2014 Honda Accord Sedan',\n 'Date': '2018-02-28 11:24',\n 'Description': ['\\n        ',\n  '\\n2014 Honda Accord  Automatic, White , On Tan, It has Only 41,980 Miles It Has Spoiler, Power Windows, and Mirrors, Tan Cloth Seats, Power Seats, 4 Cylinder, 4 Door, Radio, 6 CD Changer, FM,AM,CD, XM Radio, Bluetooth, Back up Camera, Side and Curtain Air Bag, 16 Inch Factory Wheels with Firestone  Great Tires, Tinted Glass, And Much More, Clean On inside, Runs and Drives Like New, Call Me for more info, 864-266-6936 Willing to Negotiate if offer is fair.....',\n  '\\n',\n  '\\n',\n  '\\n',\n  '\\n',\n  '\\n',\n  '\\n',\n  '\\nhonda, bmw, crv, mercedes, ford, mazda, lx, rx, ls, is, gs, 470 honda, lexus, toyota, ford, accord, civic, coupe, Mercedes,Honda Pilot, Lexus gx470 &amp; 460, Chevrolet Tahoe, suburban, Tahoe, land rover, Nissan armada, GMC Yukon, Terrian, CX7, BMW x5, GMC Terrian, B 2011, 2010, 2009, 2008, 2007, 2012, 2013, 2014, 2016, 2006, 2005, 2017, 2018, ',\n  '\\n',\n  '\\n',\n  '\\n',\n  '\\n',\n  '\\n',\n  '\\n',\n  '\\n',\n  '\\n',\n  '\\n',\n  '\\n',\n  '\\n',\n  '\\n',\n  '\\n',\n  '\\n',\n  '\\n    '],\n 'Images': ['https://images.craigslist.org/00b0b_gNOi9VtqAy3_600x450.jpg',\n  'https://images.craigslist.org/00a0a_gs2eKxUlQho_600x450.jpg',\n  'https://images.craigslist.org/00l0l_lPmE8ML0zcb_600x450.jpg',\n  'https://images.craigslist.org/00x0x_bS9gCuxM7ID_600x450.jpg',\n  'https://images.craigslist.org/01010_dTS4DnHjVWW_600x450.jpg',\n  'https://images.craigslist.org/00w0w_70D0xeDKa7d_600x450.jpg',\n  'https://images.craigslist.org/00606_4SUFT4ZCbmO_600x450.jpg',\n  'https://images.craigslist.org/00k0k_1AQ7kVbviPN_600x450.jpg',\n  'https://images.craigslist.org/00d0d_3STBecGHaXD_600x450.jpg',\n  'https://images.craigslist.org/01717_guG6n90XfQt_600x450.jpg',\n  'https://images.craigslist.org/00h0h_8be8866trLr_600x450.jpg',\n  'https://images.craigslist.org/00B0B_gaQQvQHlARl_600x450.jpg',\n  'https://images.craigslist.org/00b0b_ih84Nskx5xj_600x450.jpg',\n  'https://images.craigslist.org/01616_aveWbY1HQvr_600x450.jpg',\n  'https://images.craigslist.org/00x0x_Fflsg0wwsK_600x450.jpg',\n  'https://images.craigslist.org/00b0b_6FBg7KV8HYv_600x450.jpg',\n  'https://images.craigslist.org/00J0J_3vd5Ip3mQ5S_600x450.jpg',\n  'https://images.craigslist.org/00L0L_loNV2CrnnLn_600x450.jpg',\n  'https://images.craigslist.org/00K0K_fh8oSEa9fKn_600x450.jpg',\n  'https://images.craigslist.org/00r0r_8P0SjsOgNd5_600x450.jpg',\n  'https://images.craigslist.org/00k0k_ZY0ywNmKkr_600x450.jpg',\n  'https://images.craigslist.org/00y0y_7Gie7XD8uuH_600x450.jpg',\n  'https://images.craigslist.org/00c0c_2nVDzLJhnYi_600x450.jpg',\n  'https://images.craigslist.org/00202_7k10eK3bxMn_600x450.jpg'],\n 'Latitude': '35.039000',\n 'Location': ' (Cowpens)',\n 'Longitude': '-81.822000',\n 'Price': '$10995',\n 'Title': '2014 Honda Accord  White  41k',\n 'Url': 'https://asheville.craigslist.org/ctd/d/2014-honda-accord-white-41k/6513312696.html',\n '_id': {'$oid': '5a96dbf16f9ca5410cc9ed99'}}]\n</code></pre>\n\n<p>When I run the following code:</p>\n\n<pre><code>wanted_keys = ['Title', 'Location', 'Price', 'Description', 'Url', 'Latitude', 'Longitude'] \nfor item in cl_used_items_raw[:2]:\n    for k in wanted_keys:\n        lines = str(item[k]).split()\n        split_lines = [line.replace('\\n', '').strip() for line in lines]\n        print(\"{}\".format(' '.join(split_lines) + '\\t'))\n    print('\\n')\n</code></pre>\n\n<p>I get an ouput of:</p>\n\n<pre><code>2013 Yamaha FJR 1300    \n(Asheville) \n$7500   \n['\\n ', '\\n2013 Yamaha FJR 1300 Sport Touring, 4 cylinder, 12.120 miles, silver, cruise control, traction control, ABS brakes, heated hand grips, Two Brothers exhaust, handle bar risers, 6.5 gal. gas tank, adjustable windshield, saddlebags, excellent condition, very clean.', '\\n$ 7.500 (828) 250-0373 WWW.GREENVALLEYCARS.COM', '\\n', '\\n ']    \nhttps://asheville.craigslist.org/mcd/d/2013-yamaha-fjr-1300/6513320993.html \n35.599694   \n-82.628866  \n\n\n2014 Honda Accord White 41k \n(Cowpens)   \n$10995  \n['\\n ', '\\n2014 Honda Accord Automatic, White , On Tan, It has Only 41,980 Miles It Has Spoiler, Power Windows, and Mirrors, Tan Cloth Seats, Power Seats, 4 Cylinder, 4 Door, Radio, 6 CD Changer, FM,AM,CD, XM Radio, Bluetooth, Back up Camera, Side and Curtain Air Bag, 16 Inch Factory Wheels with Firestone Great Tires, Tinted Glass, And Much More, Clean On inside, Runs and Drives Like New, Call Me for more info, 864-266-6936 Willing to Negotiate if offer is fair.....', '\\n', '\\n', '\\n', '\\n', '\\n', '\\n', '\\nhonda, bmw, crv, mercedes, ford, mazda, lx, rx, ls, is, gs, 470 honda, lexus, toyota, ford, accord, civic, coupe, Mercedes,Honda Pilot, Lexus gx470 &amp; 460, Chevrolet Tahoe, suburban, Tahoe, land rover, Nissan armada, GMC Yukon, Terrian, CX7, BMW x5, GMC Terrian, B 2011, 2010, 2009, 2008, 2007, 2012, 2013, 2014, 2016, 2006, 2005, 2017, 2018, ', '\\n', '\\n', '\\n', '\\n', '\\n', '\\n', '\\n', '\\n', '\\n', '\\n', '\\n', '\\n', '\\n', '\\n', '\\n '] \nhttps://asheville.craigslist.org/ctd/d/2014-honda-accord-white-41k/6513312696.html  \n35.039000   \n-81.822000\n</code></pre>\n\n<p>I know I'm close but I'm struggling to determine how to write my for-loop to remove the additional whitespace characters in Description values while still maintaining the structure of the output I already have?</p>\n"}, {"tags": ["python", "sockets", "multiprocessing", "imaplib"], "answers": [{"comments": [{"owner": {"reputation": 2604, "user_id": 6627564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6d7f42ac112ccbf36953d08948b994?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandr Tatarinov", "link": "https://stackoverflow.com/users/6627564/alexandr-tatarinov"}, "edited": false, "score": 0, "creation_date": 1519860299, "post_id": 49039934, "comment_id": 85085961, "body": "Okay, I still need to use Lock, but now threading.Lock, either I get corrupted data in socket."}], "tags": [], "owner": {"reputation": 2604, "user_id": 6627564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6d7f42ac112ccbf36953d08948b994?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandr Tatarinov", "link": "https://stackoverflow.com/users/6627564/alexandr-tatarinov"}, "is_accepted": false, "score": 0, "last_activity_date": 1519858012, "creation_date": 1519858012, "answer_id": 49039934, "question_id": 49039332, "link": "https://stackoverflow.com/questions/49039332/using-imaplib-imap4-ssl-in-multiple-processes/49039934#49039934", "title": "using imaplib.IMAP4_SSL in multiple processes", "body": "<p>Seems like is a problem with SSL. SSL-wrapped socket cannot be reused over multiple processes. I am using threads now and everything is okay without Lock.</p>\n"}, {"tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 4, "last_activity_date": 1519863378, "creation_date": 1519863378, "answer_id": 49040747, "question_id": 49039332, "link": "https://stackoverflow.com/questions/49039332/using-imaplib-imap4-ssl-in-multiple-processes/49040747#49040747", "title": "using imaplib.IMAP4_SSL in multiple processes", "body": "<p>You can't. The SSL context isn't shared between processes; without it, the encryption state gets out of sync.</p>\n\n<p>If you need to perform multiple concurrent operations on the same IMAP inbox, you will need to make multiple connections to the server.</p>\n"}], "owner": {"reputation": 2604, "user_id": 6627564, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6d7f42ac112ccbf36953d08948b994?s=128&d=identicon&r=PG&f=1", "display_name": "Alexandr Tatarinov", "link": "https://stackoverflow.com/users/6627564/alexandr-tatarinov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 1, "accepted_answer_id": 49040747, "answer_count": 2, "score": 1, "last_activity_date": 1519863378, "creation_date": 1519855297, "last_edit_date": 1519857005, "question_id": 49039332, "link": "https://stackoverflow.com/questions/49039332/using-imaplib-imap4-ssl-in-multiple-processes", "title": "using imaplib.IMAP4_SSL in multiple processes", "body": "<p>I want to reuse imaplib.IMAP4_SSL instance over many processes so I don't have to login multiple times.\nHere is some code:</p>\n\n<pre><code>import imaplib\nfrom multiprocessing import Process\n\ndef fetch(mail_client):\n    mail_client.uid('fetch', b'1', 'BODY[TEXT]')\n\ndef main():\n    c = imaplib.IMAP4_SSL('imap.gmail.com')\n    c.login(user='**', password='***')\n    c.select('inbox')\n\n    procs = [Process(target=fetch, args=(c,)) for _ in range(100)]\n    for p in procs:\n        p.start()\n\n    for p in procs:\n        p.join()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>But I get the errors that are related to socket:</p>\n\n<blockquote>\n  <p>imaplib.IMAP4.abort: socket error: [Errno 32] Broken pipe</p>\n</blockquote>\n\n<p>I thought that this is because processes is writing to the same socket, that imaplib.IMAP4_SSL has, so i tried to add multiprocessing.Lock to prevent simultaneous access:</p>\n\n<pre><code>import imaplib\nfrom multiprocessing import Process, Lock\n\n\ndef fetch(mail_client, lock):\n    with lock:\n        mail_client.uid('fetch', b'1', 'BODY[TEXT]')\n\n\ndef main():\n    c = imaplib.IMAP4_SSL('imap.gmail.com')\n    c.login(user='engineering@epallet.com', password='Qwe=1dSAzxc+%')\n    c.select('inbox')\n    lock = Lock()\n\n    procs = [Process(target=fetch, args=(c, lock)) for _ in range(100)]\n    for p in procs:\n        p.start()\n\n    for p in procs:\n        p.join()\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>But the error persists.\nSome further investigation has shown that the first process calls mail.uid successfully, but second process gets <code>imaplib.IMAP4.abort: command: UID =&gt; socket error: EOF</code> anyway.</p>\n\n<p>I am using Ubuntu 16.04.\nAny suggestions are highly appreciated.</p>\n\n<p>Update: found another exception in stacktrace, maybe it causes all other exceptions:</p>\n\n<blockquote>\n  <p>ssl.SSLError: [SSL: DECRYPTION_FAILED_OR_BAD_RECORD_MAC] decryption failed or bad record mac (_ssl.c:2217)`</p>\n</blockquote>\n\n<p>Seems like this issue is related \n<a href=\"https://stackoverflow.com/questions/3724900/python-ssl-problem-with-multiprocessing\">Python ssl problem with multiprocessing</a></p>\n"}, {"tags": ["python", "datetime"], "comments": [{"owner": {"reputation": 3933, "user_id": 1821750, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NEYw6.png?s=128&g=1", "display_name": "Charles Addis", "link": "https://stackoverflow.com/users/1821750/charles-addis"}, "edited": false, "score": 0, "creation_date": 1519857510, "post_id": 49039328, "comment_id": 85084913, "body": "You can get the system timezone from <code>time.timezone</code> or <code>time.tzname</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1304, "user_id": 4288666, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh3.googleusercontent.com/-kpDFIvSZPBE/AAAAAAAAAAI/AAAAAAAAAIs/zu9ta7D-g1Y/photo.jpg?sz=128", "display_name": "Robert Sim", "link": "https://stackoverflow.com/users/4288666/robert-sim"}, "is_accepted": false, "score": 0, "last_activity_date": 1519857172, "creation_date": 1519857172, "answer_id": 49039742, "question_id": 49039328, "link": "https://stackoverflow.com/questions/49039328/promote-a-naive-datetime-to-system-timezone/49039742#49039742", "title": "Promote a naive datetime to system timezone", "body": "<p>Here is as close as I've managed to get:</p>\n\n<pre><code>local_tz = dateutil.tz.tzlocal()\ntimestamp = timestamp.replace(tzinfo=local_tz)\n</code></pre>\n\n<p>Unfortunately local_tz doesn't have a localize() method so I resorted to using replace().</p>\n"}, {"comments": [{"owner": {"reputation": 1304, "user_id": 4288666, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh3.googleusercontent.com/-kpDFIvSZPBE/AAAAAAAAAAI/AAAAAAAAAIs/zu9ta7D-g1Y/photo.jpg?sz=128", "display_name": "Robert Sim", "link": "https://stackoverflow.com/users/4288666/robert-sim"}, "edited": false, "score": 0, "creation_date": 1519858237, "post_id": 49039780, "comment_id": 85085237, "body": "This seems to be on the right track, but pytz couldn&#39;t create a timezone from that string:  pytz.exceptions.UnknownTimeZoneError: &#39;Pacific Standard Time&#39;"}], "tags": [], "owner": {"reputation": 5381, "user_id": 9203110, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PQESrk-PCHA/AAAAAAAAAAI/AAAAAAAAAJk/6bqvsnrh4Dg/photo.jpg?sz=128", "display_name": "match", "link": "https://stackoverflow.com/users/9203110/match"}, "is_accepted": true, "score": 1, "last_activity_date": 1519916912, "last_edit_date": 1519916912, "creation_date": 1519857361, "answer_id": 49039780, "question_id": 49039328, "link": "https://stackoverflow.com/questions/49039328/promote-a-naive-datetime-to-system-timezone/49039780#49039780", "title": "Promote a naive datetime to system timezone", "body": "<p>You can get the appropriate <code>local_tz</code> by doing:</p>\n\n<pre><code>import time\nimport pytz\n\nlocal_tz = pytz.timezone(time.tzname[0])\n</code></pre>\n\n<p>EDIT: It appears that <code>time.tzname[0]</code> isn't always a name that corresponds to those found in <code>pytz.all_timezones</code></p>\n\n<p>The simplest solution is to use the <code>tzlocal</code> package, which uses a number of tricks to find the local timezone from the system, and can also localize for you in place of pytz:</p>\n\n<pre><code>import tzlocal\n\nlocal_tz = tzlocal.get_localzone()\nlocal_tz.localize(naive_time)\n</code></pre>\n"}], "owner": {"reputation": 1304, "user_id": 4288666, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh3.googleusercontent.com/-kpDFIvSZPBE/AAAAAAAAAAI/AAAAAAAAAIs/zu9ta7D-g1Y/photo.jpg?sz=128", "display_name": "Robert Sim", "link": "https://stackoverflow.com/users/4288666/robert-sim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 49039780, "answer_count": 2, "score": 1, "last_activity_date": 1519916912, "creation_date": 1519855279, "question_id": 49039328, "link": "https://stackoverflow.com/questions/49039328/promote-a-naive-datetime-to-system-timezone", "title": "Promote a naive datetime to system timezone", "body": "<p>I have a na\u00efve datetime in hand and I want to promote it to include the system timezone.  I see lots of examples where the timezone is known a priori and the datetime is localized against it.  How do I obtain the local timezone if I don't know it in advance?</p>\n\n<pre><code>local_tz = ???\ndt = local_tz.localize(naive_time)\n</code></pre>\n"}, {"tags": ["python", "windows", "python-3.x", "shell", "shutil"], "comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 2, "creation_date": 1519857907, "post_id": 49039323, "comment_id": 85085100, "body": "wsl.exe is only 64-bit, and you&#39;re looking in SysWOW64 instead of the real System32 because you&#39;re using 32-bit Python."}, {"owner": {"reputation": 1594, "user_id": 2512078, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NDKib.png?s=128&g=1", "display_name": "spikespaz", "link": "https://stackoverflow.com/users/2512078/spikespaz"}, "reply_to_user": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1519859364, "post_id": 49039323, "comment_id": 85085656, "body": "@eryksun Ahhh that does explain it. Do you have a way around that? You should post an answer and I&#39;ll accept it."}, {"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 1, "creation_date": 1519860000, "post_id": 49039323, "comment_id": 85085865, "body": "In Windows 7+, the real System32 directory is accessible in a 32-bit process as &quot;SysNative&quot;. Unfortunately this virtual directory isn&#39;t available in a native 64-bit process, so you need to first check whether it exists. For example: <code>sysnative = os.path.join(os.environ[&#39;SystemRoot&#39;], &#39;SysNative&#39;);</code> <code>if os.path.exists(sysnative): ...</code>."}], "answers": [{"tags": [], "owner": {"reputation": 1594, "user_id": 2512078, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NDKib.png?s=128&g=1", "display_name": "spikespaz", "link": "https://stackoverflow.com/users/2512078/spikespaz"}, "is_accepted": true, "score": 2, "last_activity_date": 1519945966, "creation_date": 1519945966, "answer_id": 49060220, "question_id": 49039323, "link": "https://stackoverflow.com/questions/49039323/python-shutil-which-not-working-with-wsl-exe/49060220#49060220", "title": "Python shutil.which not working with wsl.exe", "body": "<p>Credit to @eryksun, who helped solve this in the comments.</p>\n\n<p>The issue is that I am using 32 bit Python, and <code>wsl.exe</code> is only in <code>C:/Windows/System32</code>. The problem with this is that Python is looking in <code>C:/Windows/SysWOW64</code> for the executable instead.</p>\n\n<blockquote>\n  <p><code>wsl.exe</code> is only 64-bit, and you're looking in <code>SysWOW64</code> instead of the real <code>System32</code> because you're using 32-bit Python. \u2013 eryksun</p>\n</blockquote>\n\n<p>Because WSL only supports 64-bit systems, I ended up just running my code with 64-bit Python. However, and alternate solution if you only use Py32 would be to access <code>SysWOW64</code> directly, using the system root environment variable and <code>os.path.join</code>.</p>\n\n<blockquote>\n  <p>In Windows 7+, the real <code>System32</code> directory is accessible in a 32-bit process as \"SysNative\". Unfortunately this virtual directory isn't available in a native 64-bit process, so you need to first check whether it exists. For example: <code>sysnative = os.path.join(os.environ['SystemRoot'], 'SysNative'); if os.path.exists(sysnative): ...</code>. \u2013 eryksun </p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 9047883, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lqpZ7Z8mUHU/AAAAAAAAAAI/AAAAAAAADPY/A2RVqtLf0Hg/photo.jpg?sz=128", "display_name": "Ianau Andrei", "link": "https://stackoverflow.com/users/9047883/ianau-andrei"}, "is_accepted": false, "score": -1, "last_activity_date": 1570083102, "creation_date": 1570083102, "answer_id": 58213227, "question_id": 49039323, "link": "https://stackoverflow.com/questions/49039323/python-shutil-which-not-working-with-wsl-exe/58213227#58213227", "title": "Python shutil.which not working with wsl.exe", "body": "<p>Now you can install python in 64 bit and everything will work just fine. (Be careful that when the python installer runs, there should be written 64 bit packages and other things as 64 bits [right where the loading bar is])</p>\n"}], "owner": {"reputation": 1594, "user_id": 2512078, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NDKib.png?s=128&g=1", "display_name": "spikespaz", "link": "https://stackoverflow.com/users/2512078/spikespaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 613, "favorite_count": 0, "accepted_answer_id": 49060220, "answer_count": 2, "score": 2, "last_activity_date": 1570083102, "creation_date": 1519855252, "question_id": 49039323, "link": "https://stackoverflow.com/questions/49039323/python-shutil-which-not-working-with-wsl-exe", "title": "Python shutil.which not working with wsl.exe", "body": "<p>I am trying to use <code>shutil.which</code> to check if the Linux Subsystem is installed on Windows 10.</p>\n\n<p>Using the Windows <code>where</code> command in Command Prompt, I can see the location of the <code>wsl.exe</code> executable.</p>\n\n<pre><code>C:\\Users\\spike&gt;where wsl\nC:\\Windows\\System32\\wsl.exe\n</code></pre>\n\n<p>The above shows that WSL does exist, and is in my system <code>PATH</code>.\nWhen I use the <code>which</code> function in Python, it says that the executable was not found.</p>\n\n<pre><code>print(which(\"wsl\"))  # Returns None\n</code></pre>\n\n<p>Just to make sure that <code>which</code> works, I test it on <code>cmd.exe</code>.</p>\n\n<pre><code>print(which(\"cmd\"))  # Returns \"C:\\Windows\\System32\\cmd.exe\"\n</code></pre>\n\n<p>That works. Well, what if I make a system shell call with the command that <em>did</em> work?</p>\n\n<pre><code>print(system(\"where wsl\"))  # Returns 1\n</code></pre>\n\n<p>Exit code 1, the command <code>wsl</code> was not found.\nSo I test it on <code>cmd.exe</code> again.</p>\n\n<pre><code>print(system(\"where cmd\"))  # Returns 0\n</code></pre>\n\n<p>Okay, so that <em>does</em> work. What is the problem?</p>\n\n<p>For each Python 3 example assume these imports.</p>\n\n<pre><code>from shutil import which\nfrom os import system\n</code></pre>\n\n<p>Why can Python not find <code>wsl.exe</code> even though it is proven to exist?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1519855334, "post_id": 49039322, "comment_id": 85083995, "body": "Currently, <code>MinT</code> is a <i>set</i> not a dictionary. A dictionary can be initialised, empty, as <code>MinT = {}</code> but after that, you need to have key-value pairs, which <code>{1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12}</code> is not"}, {"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1519857382, "post_id": 49039322, "comment_id": 85084869, "body": "It really helps to know what form the input is."}], "answers": [{"comments": [{"owner": {"reputation": 2763, "user_id": 3491991, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/pmHXU.png?s=128&g=1", "display_name": "zelusp", "link": "https://stackoverflow.com/users/3491991/zelusp"}, "edited": false, "score": 2, "creation_date": 1519856309, "post_id": 49039395, "comment_id": 85084433, "body": "Don&#39;t forget dictionary comprehensions :) <code>MinT = {month_num + 1: [] for month_num in range(12)}</code>"}], "tags": [], "owner": {"reputation": 15340, "user_id": 1560035, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fe3aa4a1766a44d8f27db8a95cb573ed?s=128&d=identicon&r=PG", "display_name": "TheoretiCAL", "link": "https://stackoverflow.com/users/1560035/theoretical"}, "is_accepted": true, "score": 1, "last_activity_date": 1519856716, "last_edit_date": 1519856716, "creation_date": 1519855552, "answer_id": 49039395, "question_id": 49039322, "link": "https://stackoverflow.com/questions/49039322/how-to-aggregate-daily-temperature-data-to-use-the-months-as-keys-in-a-dictionar/49039395#49039395", "title": "How to aggregate daily temperature data to use the months as keys in a dictionary for python?", "body": "<p>To create a dictionary where they keys are the numeric months and the values will be lists, you want:</p>\n\n<pre><code>MinT = {1:[], 2:[], 3:[], 4:[], 5:[], 6:[], 7:[], 8:[], 9:[], 10:[], 11:[], 12:[]}\n</code></pre>\n\n<p>However this is easier to initialize with a loop:</p>\n\n<pre><code>MinT = {}\nfor x in range(12):\n MinT[x+1] = []\n</code></pre>\n\n<p>Or dictionary comprehension:</p>\n\n<pre><code>MinT = {month_num + 1: [] for month_num in range(12)}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2763, "user_id": 3491991, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/pmHXU.png?s=128&g=1", "display_name": "zelusp", "link": "https://stackoverflow.com/users/3491991/zelusp"}, "is_accepted": false, "score": 0, "last_activity_date": 1519858030, "creation_date": 1519858030, "answer_id": 49039937, "question_id": 49039322, "link": "https://stackoverflow.com/questions/49039322/how-to-aggregate-daily-temperature-data-to-use-the-months-as-keys-in-a-dictionar/49039937#49039937", "title": "How to aggregate daily temperature data to use the months as keys in a dictionary for python?", "body": "<p>Here's a self contained example using <a href=\"http://treyhunner.com/2015/12/python-list-comprehensions-now-in-color/\" rel=\"nofollow noreferrer\">comprehensions</a>:</p>\n\n<pre><code>from random import randint\n\ndef generate_temperatures():\n    return [randint(60, 92) for day in range(randint(28, 31))]\n\n# This simulates loading your data\nannual_temperatures = {month_num + 1: generate_temperatures() for month_num in range(12)}\n\n# This calculates the goods :)\navg_monthly_temperature = {month: sum(temp)/len(temp) for (month, temp) in annual_temperatures.items()}\nmin_monthly_temperature = {month: min(temp) for (month, temp) in annual_temperatures.items()}\nmax_monthly_temperature = {month: max(temp) for (month, temp) in annual_temperatures.items()}\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 9396878, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Breegan Andersen", "link": "https://stackoverflow.com/users/9396878/breegan-andersen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 49039395, "answer_count": 2, "score": 2, "last_activity_date": 1519858030, "creation_date": 1519855247, "question_id": 49039322, "link": "https://stackoverflow.com/questions/49039322/how-to-aggregate-daily-temperature-data-to-use-the-months-as-keys-in-a-dictionar", "title": "How to aggregate daily temperature data to use the months as keys in a dictionary for python?", "body": "<p>I am a novice with python so forgive me if this seems simple and I can't figure it out...</p>\n\n<p>For a homework assignment we are asked to \"Write python code to read the daily temperature data for each month of the year. Make three dictionaries, <code>MinT</code>, <code>AvgT</code>, and <code>MaxT</code> each with the month number (1..12) as the key and a list of values for the minimum, maximum and average daily temperatures for each day in the corresponding month.\" I need to do this without using pandas and numpy, as those are the next questions for the assignment.</p>\n\n<p>I am struggling to get started. I am trying to start with <code>MinT</code> to see if I could get the code to work, but have failed multiple times. So far I have...</p>\n\n<pre><code>import csv\n\nweather = csv.DictReader(open(...))\nMinT = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12}\nmin_t = []\nfor r in weather:\n    min_t.append(float(r['LowT']))\n</code></pre>\n\n<p>The output is all of the minimum values for the year, but I'm unsure how to aggregate the daily data to where I can use the month as the key.</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "bigdl"], "answers": [{"comments": [{"owner": {"reputation": 2672, "user_id": 1226649, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/09120bf46a24bc6a335921ed2e0776a3?s=128&d=identicon&r=PG", "display_name": "dokondr", "link": "https://stackoverflow.com/users/1226649/dokondr"}, "edited": false, "score": 0, "creation_date": 1520017870, "post_id": 49052755, "comment_id": 85157496, "body": "Thanks, but this doesn&#39;t answer my question: Why example from BigDL site that I post here fails?"}], "tags": [], "owner": {"reputation": 3196, "user_id": 4117331, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/6a080cbcbdd0f2c8e2126a2650f4705a?s=128&d=identicon&r=PG&f=1", "display_name": "pauli", "link": "https://stackoverflow.com/users/4117331/pauli"}, "is_accepted": false, "score": 0, "last_activity_date": 1519917204, "creation_date": 1519917204, "answer_id": 49052755, "question_id": 49039294, "link": "https://stackoverflow.com/questions/49039294/simple-pyspark-bigdl-test-optimizer-fails/49052755#49052755", "title": "Simple PySpark BigDL test: Optimizer fails", "body": "<p>Yes <code>BIGDL</code> is actively maintained. The proper way to define a bigdl model is by using <code>sequential API</code> or <code>functional API</code>.<br>\nSequential API</p>\n\n<pre><code>model = Sequential()\nmodel.add(Linear(...))\nmodel.add(Sigmoid())\nmodel.add(Softmax())  \n</code></pre>\n\n<p>Functional API</p>\n\n<pre><code>linear = Linear(...)()\nsigmoid = Sigmoid()(linear)\nsoftmax = Softmax()(sigmoid)\nmodel = Model([linear], [softmax])\n</code></pre>\n\n<p>see <a href=\"https://bigdl-project.github.io/0.4.0/#ProgrammingGuide/Model/Sequential/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1865, "user_id": 487554, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/78d8d471d06ef3af31cc954b51319f3d?s=128&d=identicon&r=PG&f=1", "display_name": "CodingInCircles", "link": "https://stackoverflow.com/users/487554/codingincircles"}, "is_accepted": false, "score": 0, "last_activity_date": 1587571411, "creation_date": 1587571411, "answer_id": 61369678, "question_id": 49039294, "link": "https://stackoverflow.com/questions/49039294/simple-pyspark-bigdl-test-optimizer-fails/61369678#61369678", "title": "Simple PySpark BigDL test: Optimizer fails", "body": "<p>I just started using BigDL myself. I use PySpark and noticed that even the default function calls fail. I literally dug into the source code, read the documentation there, and then changed the way I call it based on what I read. </p>\n\n<p>It may help for you to do the same. From the error you've posted, it looks like it doesn't like some argument being passed to it. This is less a \"you\" problem and more a \"code-not-being-in-line-with-documentation\" problem.</p>\n"}], "owner": {"reputation": 2672, "user_id": 1226649, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/09120bf46a24bc6a335921ed2e0776a3?s=128&d=identicon&r=PG", "display_name": "dokondr", "link": "https://stackoverflow.com/users/1226649/dokondr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1587571411, "creation_date": 1519855137, "last_edit_date": 1554641342, "question_id": 49039294, "link": "https://stackoverflow.com/questions/49039294/simple-pyspark-bigdl-test-optimizer-fails", "title": "Simple PySpark BigDL test: Optimizer fails", "body": "<p>Running BigDL example at: <a href=\"https://bigdl-project.github.io/0.4.0/#ProgrammingGuide/optimization/\" rel=\"nofollow noreferrer\">https://bigdl-project.github.io/0.4.0/#ProgrammingGuide/optimization/</a> in PySpark local node: </p>\n\n<pre><code>from bigdl.nn.layer import Linear\nfrom bigdl.util.common import *\nfrom bigdl.nn.criterion import MSECriterion\nfrom bigdl.optim.optimizer import Optimizer, MaxIteration\nimport numpy as np\n\nsc = SparkContext(appName=\"simple\",conf=create_spark_conf())\ninit_engine()\n\nmodel = Linear(2, 1)\nsamples = [\n  Sample.from_ndarray(np.array([5, 5]), np.array([2.0])),\n  Sample.from_ndarray(np.array([-5, -5]), np.array([-2.0])),\n  Sample.from_ndarray(np.array([-2, 5]), np.array([1.3])),\n  Sample.from_ndarray(np.array([-5, 2]), np.array([0.1])),\n  Sample.from_ndarray(np.array([5, -2]), np.array([-0.1])),\n  Sample.from_ndarray(np.array([2, -5]), np.array([-1.3]))\n]\n\ntrain_data = sc.parallelize(samples, 1)\noptimizer = Optimizer(model, train_data, MSECriterion(), MaxIteration(100), 4)\noptimizer.optimize()\nmodel.get_weights()[0]\n</code></pre>\n\n<p>Results in the following exception. Other then BigDL tests work in PySpark. Environment: openjdk version \"1.8.0_141, Python 3.5.3 (default, Jan 19 2017, 14:11:04) \n[GCC 6.3.0 20170118] on linux </p>\n\n<p>Any ideas? Is BigDL a live project, actively maintained?  </p>\n\n<pre><code>Setting default log level to \"WARN\".\nTo adjust logging level use sc.setLogLevel(newLevel). For SparkR, use setLogLevel(newLevel).\n    2018-02-28 22:40:20 WARN  NativeCodeLoader:62 - Unable to load native-hadoop library for your platform... using builtin-java classes where applicable\n2018-02-28 22:40:20 WARN  Utils:66 - Your hostname, dk resolves to a loopback address: 127.0.1.1; using 10.0.2.15 instead (on interface enp0s3)\n2018-02-28 22:40:20 WARN  Utils:66 - Set SPARK_LOCAL_IP if you need to bind to another address\n2018-02-28 22:40:24 WARN  SparkContext:66 - Using an existing SparkContext; some configuration may not take effect.\ncls.getname: com.intel.analytics.bigdl.python.api.Sample\nBigDLBasePickler registering: bigdl.util.common  Sample\ncls.getname: com.intel.analytics.bigdl.python.api.EvaluatedResult\nBigDLBasePickler registering: bigdl.util.common  EvaluatedResult\ncls.getname: com.intel.analytics.bigdl.python.api.JTensor\nBigDLBasePickler registering: bigdl.util.common  JTensor\ncls.getname: com.intel.analytics.bigdl.python.api.JActivity\nBigDLBasePickler registering: bigdl.util.common  JActivity\ndisableCheckSingleton is deprecated. Please use bigdl.check.singleton instead\n                                                                                                                                                                                                                                                                                                                                                                        /usr/local/lib/python3.5/dist-packages/bigdl/util/engine.py:41: UserWarning: Find both SPARK_HOME and pyspark. You may need to check whether they match with each other. SPARK_HOME environment variable is set to: /opt/spark, and pyspark is found in: /usr/local/lib/python3.5/dist-packages/pyspark/__init__.py. If they are unmatched, please use one source only to avoid conflict. For example, you can unset SPARK_HOME and use pyspark only.\nwarnings.warn(warning_msg)\nPrepending /usr/local/lib/python3.5/dist-packages/bigdl/share/conf/spark-bigdl.conf to sys.path\ncreating: createLinear\ncreating: createMSECriterion\ncreating: createMaxIteration\ncreating: createDefault\ncreating: createSGD\ncreating: createDistriOptimizer\nTraceback (most recent call last):\n  File \"simple.py\", line 22, in &lt;module&gt;\n    optimizer.optimize()\n  File \"/usr/local/lib/python3.5/dist-packages/bigdl/optim/optimizer.py\", line 591, in optimize\n    jmodel = callJavaFunc(get_spark_context(), self.value.optimize)\n  File \"/usr/local/lib/python3.5/dist-packages/bigdl/util/common.py\", line 590, in callJavaFunc\n    result = func(*args)\n  File \"/usr/local/lib/python3.5/dist-packages/py4j/java_gateway.py\", line 1133, in __call__\n    answer, self.gateway_client, self.target_id, self.name)\n  File \"/usr/local/lib/python3.5/dist-packages/py4j/protocol.py\", line 319, in get_return_value\n    format(target_id, \".\", name), value)\npy4j.protocol.Py4JJavaError: An error occurred while calling o48.optimize.\n: java.lang.ExceptionInInitializerError\n    at com.intel.analytics.bigdl.optim.DistriOptimizer.optimize(DistriOptimizer.scala:860)\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke(Method.java:498)\n    at py4j.reflection.MethodInvoker.invoke(MethodInvoker.java:244)\n    at py4j.reflection.ReflectionEngine.invoke(ReflectionEngine.java:357)\n    at py4j.Gateway.invoke(Gateway.java:280)\n    at py4j.commands.AbstractCommand.invokeMethod(AbstractCommand.java:132)\n    at py4j.commands.CallCommand.execute(CallCommand.java:79)\n    at py4j.GatewayConnection.run(GatewayConnection.java:214)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.lang.IllegalArgumentException\n    at java.util.concurrent.ThreadPoolExecutor.&lt;init&gt;(ThreadPoolExecutor.java:1314)\n    at java.util.concurrent.ThreadPoolExecutor.&lt;init&gt;(ThreadPoolExecutor.java:1237)\n    at java.util.concurrent.Executors.newFixedThreadPool(Executors.java:151)\n    at com.intel.analytics.bigdl.parameters.AllReduceParameter$.&lt;init&gt;(AllReduceParameter.scala:47)\n    at com.intel.analytics.bigdl.parameters.AllReduceParameter$.&lt;clinit&gt;(AllReduceParameter.scala)\n    ... 12 more\n</code></pre>\n"}, {"tags": ["python", "http", "python-requests"], "comments": [{"owner": {"reputation": 5997, "user_id": 866333, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4b2cf4a4b91ef887b17691a87d4bc0e1?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/866333/john"}, "edited": false, "score": 0, "creation_date": 1519855690, "post_id": 49039241, "comment_id": 85084155, "body": "Have you tried setting the &quot;User-Agent&quot; field as the json you can supply to the header formal parameter?"}, {"owner": {"reputation": 3, "user_id": 9425903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64ad2ad2f52a5ca51f0f842a808bb9a9?s=128&d=identicon&r=PG&f=1", "display_name": "Plesbien", "link": "https://stackoverflow.com/users/9425903/plesbien"}, "reply_to_user": {"reputation": 5997, "user_id": 866333, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4b2cf4a4b91ef887b17691a87d4bc0e1?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/866333/john"}, "edited": false, "score": 0, "creation_date": 1519856024, "post_id": 49039241, "comment_id": 85084319, "body": "I&#39;ve tried setting the User-Agent to Mozilla/5.0 to make sure the request wasn&#39;t being blocked because of that, if that&#39;s what you mean."}, {"owner": {"reputation": 5997, "user_id": 866333, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4b2cf4a4b91ef887b17691a87d4bc0e1?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/866333/john"}, "edited": false, "score": 0, "creation_date": 1519856500, "post_id": 49039241, "comment_id": 85084503, "body": "Then I don&#39;t know. Their robots.txt looks pretty restrictive, is it possible they are blocking that user-agent / IP by now?"}, {"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1519857603, "post_id": 49039241, "comment_id": 85084963, "body": "Is once a minute really necessary? If the company notices that you&#39;re pinging their website hundreds of times a day, they might not like that."}, {"owner": {"reputation": 3, "user_id": 9425903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64ad2ad2f52a5ca51f0f842a808bb9a9?s=128&d=identicon&r=PG&f=1", "display_name": "Plesbien", "link": "https://stackoverflow.com/users/9425903/plesbien"}, "edited": false, "score": 0, "creation_date": 1519858080, "post_id": 49039241, "comment_id": 85085172, "body": "Working in freelance, jobs are offered up to like 50 appropriate editors at once and it&#39;s fastest finger first. Once a minute seems perfectly reasonable to me."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9425903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64ad2ad2f52a5ca51f0f842a808bb9a9?s=128&d=identicon&r=PG&f=1", "display_name": "Plesbien", "link": "https://stackoverflow.com/users/9425903/plesbien"}, "edited": false, "score": 0, "creation_date": 1519860459, "post_id": 49039670, "comment_id": 85086010, "body": "Thank you very much! I tried Selenium and it&#39;s really simple and intuitive. Great solution!"}], "tags": [], "owner": {"reputation": 1540, "user_id": 5187177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00d61ebd66fc4d0f0f2d3415416b489f?s=128&d=identicon&r=PG&f=1", "display_name": "Jacquot", "link": "https://stackoverflow.com/users/5187177/jacquot"}, "is_accepted": true, "score": 0, "last_activity_date": 1519856814, "creation_date": 1519856814, "answer_id": 49039670, "question_id": 49039241, "link": "https://stackoverflow.com/questions/49039241/getting-data-from-password-protected-website-via-requests/49039670#49039670", "title": "Getting data from password protected website via requests", "body": "<p>For me it has nothing to do with <code>python</code> or HTTP requests.\nThe site <code>whiteboard.cactusglobal</code> is not an API, it is a website.\nIt is not meant to able you to access its page only programatically. It expects a real user that interacts with it thanks to its browser.</p>\n\n<p>So for me, the tool that you need is <a href=\"http://selenium-python.readthedocs.io/\" rel=\"nofollow noreferrer\">Selenium</a>. Or any User Testing Automation tool, really. That kind of tools will let you emulate a browser that goes to the website, is redirected to the log page, and enter the authentification information in the relevant fields, all within Python.</p>\n\n<p>As your use-case is basic, if you understand the basic tutorials, in particular how to fill forms, you will easily find your way :)</p>\n"}], "owner": {"reputation": 3, "user_id": 9425903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64ad2ad2f52a5ca51f0f842a808bb9a9?s=128&d=identicon&r=PG&f=1", "display_name": "Plesbien", "link": "https://stackoverflow.com/users/9425903/plesbien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 49039670, "answer_count": 1, "score": 0, "last_activity_date": 1519856814, "creation_date": 1519854861, "question_id": 49039241, "link": "https://stackoverflow.com/questions/49039241/getting-data-from-password-protected-website-via-requests", "title": "Getting data from password protected website via requests", "body": "<p>I'm a freelance editor in my spare time, but recently the company I work for made their notification system MUCH worse, causing me to miss out on a lot of opportunities. I decided I'd try to create a simple python script to pull the website every minute or so, check for changes in a specific field, and send an email to a dedicated account to notify me. I've never used python, but I got stuck in and found that the best option is probably the <code>requests</code> library. I'm having difficulty getting the right page with authentication, though, as all my requests just lead to the log in page.</p>\n\n<p>The site works like this (I'm missing the TLD in case it gets flagged as spam):</p>\n\n<ol>\n<li>The employee heads to whiteboard.cactusglobal</li>\n<li>They log in and are sent to whiteboard.cactusglobal/dashboard, which has the field I want to read.</li>\n</ol>\n\n<p>I've tried the following: </p>\n\n<pre><code>requests.get('https://whiteboard.cactusglobal.com/dashboard', auth=('user','pass'))\n</code></pre>\n\n<p>where <i>user</i> and <i>pass</i> are replaced with the appropriate values, but no dice. I've also tried</p>\n\n<pre><code>requests.get('https://whiteboard.cactusglobal.com/dashboard', auth=HTTPDigestAuth('user','pass'))\n</code></pre>\n\n<p>which didn't help, and </p>\n\n<pre><code>payload = {'user':'XXXXXXXX', 'pass':'XXXXXXX'}\nrequests.post('https://whiteboard.cactusglobal.com/dashboard', data=payload})\n</code></pre>\n\n<p>which still didn't work. As mentioned, all requests give a 403 and return the login page. </p>\n\n<p>I've used Burp to capture the <code>POST</code> request with my login details from my browser, in hopes it might shed some light on the problem, but I don't know enough about how <code>requests</code> works to do anything. Here's the request (with cookies removed):</p>\n\n<pre><code>POST /dashboard?destination=dashboard HTTP/1.1\nHost: whiteboard.cactusglobal.com\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:60.0) Gecko/20100101 Firefox/60.0\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8\nAccept-Language: en-US,en;q=0.5\nAccept-Encoding: gzip, deflate\nReferer: http://whiteboard.cactusglobal.com/\nContent-Type: application/x-www-form-urlencoded\nContent-Length: 125\nConnection: close\nUpgrade-Insecure-Requests: 1\nname=XXXXXXXX&amp;pass=XXXXXXXXXX&amp;form_build_id=XXXXXXXXXX&amp;form_id=XXXXXXXXXXXXX\n</code></pre>\n\n<p>I'm sorry to ask for help with something that could be easily Googled if I understood it better, but with my lack of knowledge of python and minimal knowledge of HTTP requests there's too many unknowns for me to be able to grasp the problem effectively. Thank you for your help. </p>\n"}, {"tags": ["python", "random", "statistics", "generator", "simulator"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1519854781, "post_id": 49039201, "comment_id": 85083757, "body": "Please add the relevant language tag."}, {"owner": {"reputation": 979, "user_id": 1801968, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/551ec32188e0b94733e031a7ea68f37c?s=128&d=identicon&r=PG", "display_name": "P Moran", "link": "https://stackoverflow.com/users/1801968/p-moran"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1519930204, "post_id": 49039201, "comment_id": 85117948, "body": "Preferred language is Python"}], "owner": {"reputation": 979, "user_id": 1801968, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/551ec32188e0b94733e031a7ea68f37c?s=128&d=identicon&r=PG", "display_name": "P Moran", "link": "https://stackoverflow.com/users/1801968/p-moran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1519930236, "creation_date": 1519854703, "last_edit_date": 1519930236, "question_id": 49039201, "link": "https://stackoverflow.com/questions/49039201/how-do-i-generate-a-random-process-value-given-a-set-of-moments-or-cumulants", "title": "How do I generate a random process value given a set of moments or cumulants?", "body": "<p>How would a create a data set from a <strong>known</strong> set of data moments or cumulants.</p>\n\n<p>Its fairly easy to generate a random number with a known variance and mean.\nI would like to get something that lets me submit an array of cumulants (or moments) </p>\n\n<pre><code>Example: (ci = cumulent, mi = momemts)\n  c1 = m1 or \u2018mean\u2019\n  c2 = m2 \u2212 m1 = \u03c32 or \u2018variance\u2019 (\u03c3 = standard deviation)\n  c3 = m3 \u2212 3*m1*m2 + 2*m3 or \u2018skewness\u2019\n  c4 = m4 \u2212 3*m2 \u2212 4*m1*m3 + 12*m1*m2 \u2212 6*m1 or \u2018kurtosis' \n</code></pre>\n\n<p>So I would like a function, f, that takes a bunch of ci values and produces a single data point whose array of historical values maintains the specified cumulants. </p>\n\n<pre><code> y(i) = f(c1,c2,c3,..., and optionally [y(i-1), y(i-2), ...])\n</code></pre>\n\n<p>See <a href=\"https://ocw.mit.edu/courses/mathematics/18-366-random-walks-and-diffusion-fall-2006/lecture-notes/lec02.pdf\" rel=\"nofollow noreferrer\">Moments, Cumulants and Scaling</a></p>\n"}, {"tags": ["python", "pygame"], "answers": [{"comments": [{"owner": {"reputation": 596, "user_id": 7788270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/41b5ab5a15e38032a9fdf3ee0cf44897?s=128&d=identicon&r=PG&f=1", "display_name": "CSch of x", "link": "https://stackoverflow.com/users/7788270/csch-of-x"}, "edited": false, "score": 0, "creation_date": 1519857195, "post_id": 49039612, "comment_id": 85084792, "body": "Thank you!! but where do I paste the code? I mean, do I need to delete the while? or the if or keep both"}, {"owner": {"reputation": 1798, "user_id": 2280890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e409f9d13ce2d82edcb84b3f9cfb879?s=128&d=identicon&r=PG", "display_name": "import random", "link": "https://stackoverflow.com/users/2280890/import-random"}, "reply_to_user": {"reputation": 596, "user_id": 7788270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/41b5ab5a15e38032a9fdf3ee0cf44897?s=128&d=identicon&r=PG&f=1", "display_name": "CSch of x", "link": "https://stackoverflow.com/users/7788270/csch-of-x"}, "edited": false, "score": 1, "creation_date": 1519857507, "post_id": 49039612, "comment_id": 85084911, "body": "<code>pg.key.set_repeat</code> should be called after <code>pygame.init()</code>. Remove your while loop, and just truncate the <code>text</code> variable."}, {"owner": {"reputation": 1798, "user_id": 2280890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e409f9d13ce2d82edcb84b3f9cfb879?s=128&d=identicon&r=PG", "display_name": "import random", "link": "https://stackoverflow.com/users/2280890/import-random"}, "reply_to_user": {"reputation": 596, "user_id": 7788270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/41b5ab5a15e38032a9fdf3ee0cf44897?s=128&d=identicon&r=PG&f=1", "display_name": "CSch of x", "link": "https://stackoverflow.com/users/7788270/csch-of-x"}, "edited": false, "score": 0, "creation_date": 1519857598, "post_id": 49039612, "comment_id": 85084958, "body": "No worries, glad to be able to help."}], "tags": [], "owner": {"reputation": 1798, "user_id": 2280890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e409f9d13ce2d82edcb84b3f9cfb879?s=128&d=identicon&r=PG", "display_name": "import random", "link": "https://stackoverflow.com/users/2280890/import-random"}, "is_accepted": true, "score": 2, "last_activity_date": 1519857563, "last_edit_date": 1519857563, "creation_date": 1519856550, "answer_id": 49039612, "question_id": 49039191, "link": "https://stackoverflow.com/questions/49039191/delete-multiple-characters-while-holding-backspace-in-python/49039612#49039612", "title": "Delete multiple characters while holding backspace in Python", "body": "<p>You can enable <a href=\"https://www.pygame.org/docs/ref/key.html#pygame.key.set_repeat\" rel=\"nofollow noreferrer\">keyboard repeat</a>, so holding down a key will generate multiple key down events.</p>\n\n<p>So call <code>pg.key.set_repeat(500, 200)</code>, after <code>pg.init()</code>, to generate a backspace key down event every 200 milliseconds after an initial delay of half a second.</p>\n"}], "owner": {"reputation": 596, "user_id": 7788270, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/41b5ab5a15e38032a9fdf3ee0cf44897?s=128&d=identicon&r=PG&f=1", "display_name": "CSch of x", "link": "https://stackoverflow.com/users/7788270/csch-of-x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 49039612, "answer_count": 1, "score": 3, "last_activity_date": 1519857763, "creation_date": 1519854665, "last_edit_date": 1519857763, "question_id": 49039191, "link": "https://stackoverflow.com/questions/49039191/delete-multiple-characters-while-holding-backspace-in-python", "title": "Delete multiple characters while holding backspace in Python", "body": "<p>I'm working on a project and I found this code for a text box in Python:\n<a href=\"https://stackoverflow.com/questions/46390231/how-to-create-a-text-input-box-with-pygame\">How to create a text input box with pygame?</a></p>\n\n<p>Now, I want to change the code so that <strong>while</strong> the user holds backspace the text box will delete characters.</p>\n\n<p>I tried to change the code to this:</p>\n\n<pre><code>if event.type == pg.KEYDOWN:\n    if self.active:\n        if event.key == pg.K_RETURN:\n            self.text = ''\n        if event.key == pg.K_BACKSPACE:\n            while pg.KEYDOWN is pg.K_BACKSPACE:\n                print \"shock\"\n                self.text = self.text[:-1]\n        else:\n            self.text += event.unicode\n        # Re-render the text.\n        self.txt_surface = FONT.render(self.text, True, self.color)\n</code></pre>\n\n<p>but it does not work and I can't find any solutions online.</p>\n"}, {"tags": ["python", "html", "search", "urllib"], "comments": [{"owner": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 3, "creation_date": 1519854588, "post_id": 49039161, "comment_id": 85083668, "body": "Check out <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/\" rel=\"nofollow noreferrer\">BeautifulSoup</a>."}, {"owner": {"reputation": 866, "user_id": 819696, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/84d3bad1d420b82dc1c6cb8449602e16?s=128&d=identicon&r=PG", "display_name": "SimaPro", "link": "https://stackoverflow.com/users/819696/simapro"}, "edited": false, "score": 0, "creation_date": 1519854625, "post_id": 49039161, "comment_id": 85083688, "body": "It might be helpful if you can provide an example of the data that comes back, so we can help you figure out how to parse out the email addresses"}, {"owner": {"reputation": 9258, "user_id": 5665870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQBw0.png?s=128&g=1", "display_name": "Sphinx", "link": "https://stackoverflow.com/users/5665870/sphinx"}, "edited": false, "score": 0, "creation_date": 1519854739, "post_id": 49039161, "comment_id": 85083741, "body": "what about <a href=\"https://pythonhosted.org/pyquery/\" rel=\"nofollow noreferrer\">pyquery: a jquery-like library for python</a>?"}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1519854852, "post_id": 49039161, "comment_id": 85083788, "body": "just do not think, mention, suggest or use regex or <a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\">H\u0368\u034a\u033d\u0305\u033e\u030e\u0321\u0338\u032a\u032fE\u033e\u035b\u036a\u0344\u0300\u0301\u0327\u0358\u032c\u0329 \u0367\u033e\u036c\u0327\u0336\u0328\u0331\u0339\u032d\u032fC\u036d\u030f\u0365\u036e\u035f\u0337\u0319\u0332\u031d\u0356O\u036e\u034f\u032e\u032a\u031d\u034dM\u034a\u0312\u031a\u036a\u0369\u036c\u031a\u035c\u0332\u0316E\u0311\u0369\u034c\u035d\u0334\u031f\u031f\u0359\u031eS\u036f\u033f\u0314\u0328\u0340\u0325\u0345\u032b\u034e\u032d</a>"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1519855342, "post_id": 49039161, "comment_id": 85083999, "body": "man i havent seen zalgo in a while ;P"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 8565479, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab3c070ea26e3223c608e300ea0701f1?s=128&d=identicon&r=PG&f=1", "display_name": "zorange", "link": "https://stackoverflow.com/users/8565479/zorange"}, "edited": false, "score": 0, "creation_date": 1519855941, "post_id": 49039336, "comment_id": 85084283, "body": "You responded so fast! And great answers. They work and I understand how! Just need to figure out some terms you used but thats what duckduckgo is for. Thanks for your effort all"}], "tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": false, "score": 1, "last_activity_date": 1519855313, "creation_date": 1519855313, "answer_id": 49039336, "question_id": 49039161, "link": "https://stackoverflow.com/questions/49039161/searching-through-html-with-python/49039336#49039336", "title": "searching through html with python", "body": "<p>Remember that you should not use regex for actual HTML parsing (Thanks @Patrick Artner), but you can use beautiful soup to extract all visible text or comments on a web page.  Then you can use this text (which is just a string) to look for email addresses.  Here is how you can do it:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nfrom bs4.element import Comment\nimport urllib\nimport re\n\ndef tag_visible(element):\n    if element.parent.name in ['style', 'script', 'head', 'title', 'meta', '[document]']:\n        return False\n    if isinstance(element, Comment):\n        return False\n    return True\n\n\ndef text_from_html(body):\n    soup = BeautifulSoup(body, 'html.parser')\n    texts = soup.findAll(text=True)\n    visible_texts = filter(tag_visible, texts)\n    return u\" \".join(t.strip() for t in visible_texts)\n\nwith urllib.request.urlopen(\"https://en.wikipedia.org/wiki/Email_address\") as url:\n    data = url.read().decode()\n    text = text_from_html(data)\n    print(re.findall(r\"[a-zA-Z0-9.!#$%&amp;'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*\", text))\n</code></pre>\n\n<p>The two helper functions just grab all text that can be seen on the page, and then the ridiculously long regex just pulls all email addresses from that text.  I used wikipedia.com's article on emails as an example, and here is the output:</p>\n\n<pre><code>['John.Smith@example.com', 'local-part@domain', 'jsmith@example.com', 'john.smith@example.org', 'local-part@domain', 'John..Doe@example.com', 'fred+bah@domain', 'fred+foo@domain', 'fred@domain', 'john.smith@example.com', 'john.smith@example.com', 'jsmith@example.com', 'JSmith@example.com', 'john.smith@example.com', 'john.smith@example.com', 'prettyandsimple@example.com', 'very.common@example.com', 'disposable.style.email.with+symbol@example.com', 'other.email-with-dash@example.com', 'fully-qualified-domain@example.com', 'user.name+tag+sorting@example.com', 'user.name@example.com', 'x@example.com', 'example-indeed@strange-example.com', 'admin@mailserver1', \"#!$%&amp;'*+-/=?^_`{}|~@example.org\", 'example@s.solutions', 'user@localserver', 'A@b', 'c@example.com', 'l@example.com', 'right@example.com', 'allowed@example.com', 'allowed@example.com', '1234567890123456789012345678901234567890123456789012345678901234+x@example.com', 'john..doe@example.com', 'example@localhost', 'john.doe@example', 'joeuser+tag@example.com', 'joeuser@example.com', 'foo+bar@example.com', 'foobar@example.com']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105, "user_id": 4358085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HXSYN.jpg?s=128&g=1", "display_name": "Nash", "link": "https://stackoverflow.com/users/4358085/nash"}, "is_accepted": true, "score": 1, "last_activity_date": 1519855350, "creation_date": 1519855350, "answer_id": 49039342, "question_id": 49039161, "link": "https://stackoverflow.com/questions/49039161/searching-through-html-with-python/49039342#49039342", "title": "searching through html with python", "body": "<p>Using beautifulsoup <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/\" rel=\"nofollow noreferrer\">BeautifulSoup</a> And <a href=\"http://docs.python-requests.org/en/master/\" rel=\"nofollow noreferrer\">Requests</a> you could do this:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nimport re\n\nresponse = requests.get(\"your_url\")\nresponse_text = response.text\nbeautiful_response = BeautifulSoup(response_text, 'html.parser')\n\nemail_regex = r'[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\\.[a-zA-Z0-9-.]+'\n\nlist_of_emails = re.findall(email_regex, beautiful_response .text)\nlist_of_emails_decoded = []\nfor every_email in list_of_emails:\n    list_of_emails_decoded.append(every_email.encode('utf-8'))\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 8565479, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ab3c070ea26e3223c608e300ea0701f1?s=128&d=identicon&r=PG&f=1", "display_name": "zorange", "link": "https://stackoverflow.com/users/8565479/zorange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "closed_date": 1519892973, "accepted_answer_id": 49039342, "answer_count": 2, "score": 0, "last_activity_date": 1519855350, "creation_date": 1519854538, "last_edit_date": 1519854889, "question_id": 49039161, "link": "https://stackoverflow.com/questions/49039161/searching-through-html-with-python", "closed_reason": "Needs more focus", "title": "searching through html with python", "body": "<p>My question is about searching through html format with Python.\nI am using this code:</p>\n\n<pre><code>with urllib.request.urlopen(\"http://\") as url:\n    data = url.read().decode()\n</code></pre>\n\n<p>now this returns the whole HTML code from the page and I want to extract all email-addresses.</p>\n\n<p>Can somebody lend me a hand here?\nThanks in advance</p>\n"}, {"tags": ["python", "pandas", "merge"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 3, "creation_date": 1519855478, "post_id": 49039153, "comment_id": 85084067, "body": "<code>pd.merge_asof(FDMA,ZC[[&#39;DMA&#39;,&#39;Distance (Miles)&#39;]].sort_values(&#39;DMA&#39;),on=&#39;DMA&#39;)</code>"}, {"owner": {"reputation": 497, "user_id": 9198908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42df716bb2fbb8a177e6c92fdfd2557b?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Janjua", "link": "https://stackoverflow.com/users/9198908/josh-janjua"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1519913545, "post_id": 49039153, "comment_id": 85107454, "body": "Thank you very much Scott! That worked. Can you please tell me how that is different than sorting each data frame before trying merge_asof?"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1519913666, "post_id": 49039153, "comment_id": 85107539, "body": "Well, it shouldn&#39;t be different, I just wanted to be clear that you were sorted on your join keys an not the indexes."}], "answers": [{"comments": [{"owner": {"reputation": 497, "user_id": 9198908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42df716bb2fbb8a177e6c92fdfd2557b?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Janjua", "link": "https://stackoverflow.com/users/9198908/josh-janjua"}, "edited": false, "score": 0, "creation_date": 1519915764, "post_id": 49051591, "comment_id": 85108941, "body": "Sorry for the immediate follow up, but I noticed some values are not correct. Anytime the merged value has an extra digit, it doesn&#39;t work. Ex. 130506 will merge the value associated to 130510 vs 1305060. Is there an easy way around this or should this be another question?"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 497, "user_id": 9198908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42df716bb2fbb8a177e6c92fdfd2557b?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Janjua", "link": "https://stackoverflow.com/users/9198908/josh-janjua"}, "edited": false, "score": 0, "creation_date": 1519916426, "post_id": 49051591, "comment_id": 85109404, "body": "Hrm... not sure i competely understand, but merge_asof joins on intergers, floats or datetime, therefore an extra digit is very far away on the number line.  Can you trim the extra digit?"}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 14, "last_activity_date": 1519913737, "creation_date": 1519913737, "answer_id": 49051591, "question_id": 49039153, "link": "https://stackoverflow.com/questions/49039153/pandas-merge-asof-keys-must-be-sorted-error-after-sorting/49051591#49051591", "title": "pandas merge_asof keys must be sorted error after sorting", "body": "<p>With the error code \"ValueError: right keys must be sorted\", the most effective solution is to add <code>sort_values</code> in the merge on the keys column:</p>\n\n<pre><code>pd.merge_asof(FDMA,ZC[['DMA','Distance (Miles)']].sort_values('DMA'),on='DMA')\n</code></pre>\n\n<p>This ensures that the dataframe is sorted on the join keys as required by <code>pd.merge_asof</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 538, "user_id": 8076879, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--wVvc3qlrPQ/AAAAAAAAAAI/AAAAAAAACfA/KO8ddOKKAFE/photo.jpg?sz=128", "display_name": "DaveR", "link": "https://stackoverflow.com/users/8076879/daver"}, "is_accepted": false, "score": 2, "last_activity_date": 1561280531, "creation_date": 1561280531, "answer_id": 56722438, "question_id": 49039153, "link": "https://stackoverflow.com/questions/49039153/pandas-merge-asof-keys-must-be-sorted-error-after-sorting/56722438#56722438", "title": "pandas merge_asof keys must be sorted error after sorting", "body": "<p>Also, when you have NA in your <code>on</code> column, pandas will trow the same error, so before merging you should use <code>df.dropna()</code> to solve that.</p>\n"}], "owner": {"reputation": 497, "user_id": 9198908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42df716bb2fbb8a177e6c92fdfd2557b?s=128&d=identicon&r=PG&f=1", "display_name": "Josh Janjua", "link": "https://stackoverflow.com/users/9198908/josh-janjua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8293, "favorite_count": 0, "accepted_answer_id": 49051591, "answer_count": 2, "score": 4, "last_activity_date": 1561280531, "creation_date": 1519854509, "last_edit_date": 1519913769, "question_id": 49039153, "link": "https://stackoverflow.com/questions/49039153/pandas-merge-asof-keys-must-be-sorted-error-after-sorting", "title": "pandas merge_asof keys must be sorted error after sorting", "body": "<p>I would like to merge a target column from one data frame to another. The merged data frame has many more keys and they are are close, but do not exactly match the original data frame. See an example below:</p>\n\n<p>Original data frame (FDMA)</p>\n\n<pre><code>DMA \n130506  \n130510  \n130512  \n130555  \n130556  \n</code></pre>\n\n<p>Merged data frame (ZC)</p>\n\n<pre><code>DMA        Distance (Miles)\n1305060    303.87\n1305061    305.35\n1305062    278.80\n1305065    299.94\n1305067    291.83\n\npd.merge_asof(FDMA,ZC[['DMA','Distance (Miles)']],on='DMA')\n</code></pre>\n\n<p>This is what I am expecting</p>\n\n<pre><code>DMA     Distance (Miles)\n130506  303.87\n130510  291.83\n130512  XXX\n130555  XXX\n130556  XXX\n</code></pre>\n\n<p>I have tried the above code and get a ValueError: right keys must be sorted error. I have sorted the values and reset the indexes, but still get the error. Any help is appreciated!</p>\n"}, {"tags": ["python", "arrays", "python-3.x", "numpy"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 3, "creation_date": 1519854351, "post_id": 49039113, "comment_id": 85083573, "body": "Fire up your python interpreter and try it out."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1519855365, "post_id": 49039113, "comment_id": 85084010, "body": "There is an <code>object</code> <code>dtype</code> that allows arrays to contain &#39;anything&#39;, much as lists do.  But creating such an array can be tricky.  <code>np.array</code> tries, if possible, to create a multidimensional array of numbers.  If falls back on the object dtype if it can&#39;t - or it raises an error.  We get lots of SO questions from people who don&#39;t understand these complexities, e.g. <a href=\"https://stackoverflow.com/questions/49032948/flatten-numpy-array-with-sub-arrays-of-different-dimensions\" title=\"flatten numpy array with sub arrays of different dimensions\">stackoverflow.com/questions/49032948/&hellip;</a>"}, {"owner": {"reputation": 323, "user_id": 1505108, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6ff3df05c0318f3461d3c511c4999b93?s=128&d=identicon&r=PG", "display_name": "ZhijieWang", "link": "https://stackoverflow.com/users/1505108/zhijiewang"}, "edited": false, "score": 0, "creation_date": 1519858116, "post_id": 49039113, "comment_id": 85085179, "body": "read numpy tutorials. nd array refers to n-dimensional arrays. 3D array could include multiple 2D arrays etc."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1519862370, "post_id": 49039113, "comment_id": 85086561, "body": "Do you really need arrays within an array?  How about a 2d array instead?  <code>np.array([[1,2,3],[4,5,6]])</code>. Or just adding 2 arrays together?  np.array([1,2,3])+np.array([4,5,6])`."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 9425862, "user_type": "registered", "profile_image": "https://graph.facebook.com/1866237156782500/picture?type=large", "display_name": "Jordan Vance", "link": "https://stackoverflow.com/users/9425862/jordan-vance"}, "edited": false, "score": 0, "creation_date": 1519859772, "post_id": 49040128, "comment_id": 85085790, "body": "Ah that makes complete sense! Life saver, thank you very much! :-)"}], "tags": [], "owner": {"reputation": 390, "user_id": 6509168, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s0qZa.jpg?s=128&g=1", "display_name": "Jello", "link": "https://stackoverflow.com/users/6509168/jello"}, "is_accepted": false, "score": 0, "last_activity_date": 1519859043, "creation_date": 1519859043, "answer_id": 49040128, "question_id": 49039113, "link": "https://stackoverflow.com/questions/49039113/can-a-numpy-array-have-elements-that-are-numpy-arrays-themselves/49040128#49040128", "title": "Can a numpy array have elements that are numpy arrays themselves?", "body": "<p>Arrays of arrays are essentially what matrices are, so I'd just make an n-dimensional numpy array. That way you can sum element-wise in a given direction.</p>\n\n<pre><code>import numpy as np\nx = np.array([[1, 2, 3], [4, 5, 6]], np.int32) # 2x3 matrix\n</code></pre>\n\n<p>Normally you would want to loop through indices but for your example it makes more sense to do the summations individually :)</p>\n\n<pre><code>a_plus_d = sum(x[:,0]) # sum first column\nb_plus_e = sum(x[:,1]) # sum second column\nc_plus_f = sum(x[:,2]) # sum third column\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 0, "last_activity_date": 1519868364, "creation_date": 1519868364, "answer_id": 49041355, "question_id": 49039113, "link": "https://stackoverflow.com/questions/49039113/can-a-numpy-array-have-elements-that-are-numpy-arrays-themselves/49041355#49041355", "title": "Can a numpy array have elements that are numpy arrays themselves?", "body": "<p>2 1d arrays:</p>\n\n<pre><code>In [79]: x1=np.array([1,2,3])\nIn [80]: x2=np.array([4,5,6])\n</code></pre>\n\n<p>Make new array - 2d, with 2 rows</p>\n\n<pre><code>In [81]: x12 = np.array((x1,x2))\nIn [82]: x12\nOut[82]: \narray([[1, 2, 3],\n       [4, 5, 6]])\n</code></pre>\n\n<p><code>np.array([[1,2,3],[4,5,6]])</code> does the same thing.</p>\n\n<p>The arrays can be summed, element by element:</p>\n\n<pre><code>In [83]: x1 + x2\nOut[83]: array([5, 7, 9])\n</code></pre>\n\n<p>rows of the 2d array can also be summed:</p>\n\n<pre><code>In [84]: x12.sum(axis=0)\nOut[84]: array([5, 7, 9])\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 9425862, "user_type": "registered", "profile_image": "https://graph.facebook.com/1866237156782500/picture?type=large", "display_name": "Jordan Vance", "link": "https://stackoverflow.com/users/9425862/jordan-vance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 49041355, "answer_count": 2, "score": 0, "last_activity_date": 1519868364, "creation_date": 1519854317, "last_edit_date": 1519857796, "question_id": 49039113, "link": "https://stackoverflow.com/questions/49039113/can-a-numpy-array-have-elements-that-are-numpy-arrays-themselves", "title": "Can a numpy array have elements that are numpy arrays themselves?", "body": "<p>I am not very familiar with python so I apologise in advance. Is it at all possible to have a numpy array such as <code>numpy.array([a, b, c])</code> and add that array to an empty numpy array as an element?</p>\n\n<p>Assuming this is possible, is it possible to then sum the first value of each element of multiple arrays within the main numpy array. For instance, </p>\n\n<p><code>numpy.array([numpy.array([a,b,c]), numpy.array([d,e,f])])</code></p>\n\n<p>to then become </p>\n\n<p><code>numpy.array([a + d, b + e, c + f])</code></p>\n\n<p>I hope I have managed to explain clearly if unsure please feel free to ask me to expand.</p>\n\n<p>Many Thanks :-)</p>\n"}, {"tags": ["python", "list", "sorting", "nested"], "comments": [{"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1519854448, "post_id": 49039093, "comment_id": 85083618, "body": "any tries yet ?"}, {"owner": {"reputation": 39, "user_id": 9425880, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209017928685215/picture?type=large", "display_name": "Benjamin Pichl", "link": "https://stackoverflow.com/users/9425880/benjamin-pichl"}, "reply_to_user": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1519897789, "post_id": 49039093, "comment_id": 85098252, "body": "Edited my question slightly. Answers do not yield desired output now."}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 1, "creation_date": 1519902692, "post_id": 49039093, "comment_id": 85101039, "body": "Do not respec questions after they got answers. You got several solutions for your first problem, now figure out how to adapt the answers to your new problem. If you can&#39;t, do reasearch and maybe create a new question. SO is no rapid code prototyping service that delivers solutions to your problem, <code>problem1</code>, <code>problem2</code>, <code>problem3</code>, <code>problem4</code> - for that, hire an agile team of coders."}], "answers": [{"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1519854452, "creation_date": 1519854452, "answer_id": 49039143, "question_id": 49039093, "link": "https://stackoverflow.com/questions/49039093/sort-nested-list-based-on-element-positions-defined-in-another-list/49039143#49039143", "title": "Sort nested list based on element positions defined in another list", "body": "<p>To sort based off of <code>ordering</code>, you can try this:</p>\n\n<pre><code>l = [[1, 1, \"c1\"], [1, 2, \"c1\"], [5, 1, \"c2\"], [5, 2, \"c2\"], [6, 1, \"c3\"], [6, 2, \"c3\"], [2, 1, \"c4\"], [2, 2, \"c4\"], [3, 1, \"c5\"], [3, 2, \"c5\"], [4, 1, \"c6\"], [4, 2, \"c6\"]]\nordering = [2, 1]\nnew_l = sorted(l, key=lambda x:[x[ordering[0]-1], x[ordering[1]-1]])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[[1, 1, 'c1'], [2, 1, 'c4'], [3, 1, 'c5'], [4, 1, 'c6'], [5, 1, 'c2'], [6, 1, 'c3'], [1, 2, 'c1'], [2, 2, 'c4'], [3, 2, 'c5'], [4, 2, 'c6'], [5, 2, 'c2'], [6, 2, 'c3']]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39529, "user_id": 2063361, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/jB77z.jpg?s=128&g=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/2063361/anonymous"}, "is_accepted": false, "score": 1, "last_activity_date": 1519855436, "last_edit_date": 1519855436, "creation_date": 1519854629, "answer_id": 49039184, "question_id": 49039093, "link": "https://stackoverflow.com/questions/49039093/sort-nested-list-based-on-element-positions-defined-in-another-list/49039184#49039184", "title": "Sort nested list based on element positions defined in another list", "body": "<p><strong>Using Lambda Expression</strong></p>\n\n<p>You may use <a href=\"https://docs.python.org/3/library/functions.html#sorted\" rel=\"nofollow noreferrer\"><code>sorted()</code></a> function with the below lambda expression as <code>key</code> to achieve it:</p>\n\n<pre><code>#             v  'i-1' since your `ordering` list is holding\n#             v   position instead of `index`\nlambda x: [x[i-1] for i in ordering]\n</code></pre>\n\n<p>This lambda expression will return list of values for each element in the <code>my_list</code> list based on the indexes present in the <code>ordering</code> list. Based on the returned list, sorting will be performed. </p>\n\n<p>Sample Run:</p>\n\n<pre><code>&gt;&gt;&gt; my_list = [[1, 1, \"c1\"], [1, 2, \"c1\"], [5, 1, \"c2\"], [5, 2, \"c2\"], [6, 1, \"c3\"], [6, 2, \"c3\"], [2, 1, \"c4\"], [2, 2, \"c4\"], [3, 1, \"c5\"], [3, 2, \"c5\"], [4, 1, \"c6\"], [4, 2, \"c6\"]]\n&gt;&gt;&gt; ordering = [2, 1]\n\n&gt;&gt;&gt; sorted(my_list, key=lambda x: [x[i-1] for i in ordering])\n[[1, 1, 'c1'], [2, 1, 'c4'], [3, 1, 'c5'], [4, 1, 'c6'], [5, 1, 'c2'], [6, 1, 'c3'], [1, 2, 'c1'], [2, 2, 'c4'], [3, 2, 'c5'], [4, 2, 'c6'], [5, 2, 'c2'], [6, 2, 'c3']]\n</code></pre>\n\n<p><strong>Using <a href=\"https://docs.python.org/3/library/operator.html#operator.itemgetter\" rel=\"nofollow noreferrer\"><code>operator.itemgetter</code></a></strong></p>\n\n<p>Even better to do it using <a href=\"https://docs.python.org/3/library/operator.html#operator.itemgetter\" rel=\"nofollow noreferrer\"><code>operator.itemgetter()</code></a> as:</p>\n\n<pre><code>&gt;&gt;&gt; from operator import itemgetter\n\n&gt;&gt;&gt; sorted(my_list, key=itemgetter(*[i-1 for i in ordering]))\n[[1, 1, 'c1'], [2, 1, 'c4'], [3, 1, 'c5'], [4, 1, 'c6'], [5, 1, 'c2'], [6, 1, 'c3'], [1, 2, 'c1'], [2, 2, 'c4'], [3, 2, 'c5'], [4, 2, 'c6'], [5, 2, 'c2'], [6, 2, 'c3']]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 696, "user_id": 5078698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50587652c9e763535266945ef6ef9ac0?s=128&d=identicon&r=PG&f=1", "display_name": "alexdor", "link": "https://stackoverflow.com/users/5078698/alexdor"}, "is_accepted": false, "score": 0, "last_activity_date": 1519855168, "creation_date": 1519855168, "answer_id": 49039305, "question_id": 49039093, "link": "https://stackoverflow.com/questions/49039093/sort-nested-list-based-on-element-positions-defined-in-another-list/49039305#49039305", "title": "Sort nested list based on element positions defined in another list", "body": "<p>You can use itemgetter from the operator module to construct the key for sorted.</p>\n\n<pre><code>from operator import itemgetter\nl =  [[1, 1, \"c1\"], [1, 2, \"c1\"], [5, 1, \"c2\"], [5, 2, \"c2\"], [6, 1, \"c3\"], [6, 2, \"c3\"], [2, 1, \"c4\"], [2, 2, \"c4\"], [3, 1, \"c5\"], [3, 2, \"c5\"], [4, 1, \"c6\"], [4, 2, \"c6\"]]\nordering = [1, 0]\nnew_l = sorted(l, key=itemgetter(*order))\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 9425880, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209017928685215/picture?type=large", "display_name": "Benjamin Pichl", "link": "https://stackoverflow.com/users/9425880/benjamin-pichl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "closed_date": 1519903017, "answer_count": 3, "score": -2, "last_activity_date": 1519897586, "creation_date": 1519854208, "last_edit_date": 1519897586, "question_id": 49039093, "link": "https://stackoverflow.com/questions/49039093/sort-nested-list-based-on-element-positions-defined-in-another-list", "closed_reason": "Needs more focus", "title": "Sort nested list based on element positions defined in another list", "body": "<p>Let's say I have a nested list like:</p>\n\n<pre><code>my_list = [[1, 1, \"c1\"], [1, 2, \"c1\"], [5, 1, \"c2\"], [5, 2, \"c2\"], [6, 1, \"c3\"], [6, 2, \"c3\"], [2, 1, \"c4\"], [2, 2, \"c4\"], [3, 1, \"c5\"], [3, 2, \"c5\"], [4, 1, \"c6\"], [4, 2, \"c6\"]]\n</code></pre>\n\n<p>I also have another list holding the position based on which sorting is needed to be performed on each element of <code>my_list</code> list. Let's say it is defined as:</p>\n\n<pre><code>ordering = [2, 1]\n</code></pre>\n\n<p>Now I want to sort list by multiple arguments. First, I want to sort by the list <code>ordering</code>, which should order the items in <code>ma_list</code> at index [1], and after that I want to sort by the items in list at index [0]. Summing up, what I want to have in the end is:</p>\n\n<pre><code>list = [[1, 2, \"c1\"], [2, 2, \"c4\"], [3, 2, \"c5\"], [4, 2, \"c6\"], [5, 2, \"c2\"], [6, 2, \"c3\"], [[1, 1, \"c1\"], [2, 1, \"c4\"], [3, 1, \"c5\"], [4, 1, \"c6\"], [5, 1, \"c2\"], [6, 1, \"c3\"]\n</code></pre>\n\n<p>Is there any (preferable Pythonic) way to do this? Suggestions welcome!</p>\n"}, {"tags": ["python", "pandas", "csv", "xlsx"], "comments": [{"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1519864539, "post_id": 49039057, "comment_id": 85087082, "body": "I don&#39;t understand your question. CSV files do not have &quot;cells&quot; - would you like to explicitly store <code>\\n</code> within strings? In that case, you can just escape your escape character, e.g. <code>\\\\n</code>."}, {"owner": {"reputation": 439, "user_id": 5406956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a59980002e90d49fd371fe68f7b08cc?s=128&d=identicon&r=PG&f=1", "display_name": "ConanG", "link": "https://stackoverflow.com/users/5406956/conang"}, "reply_to_user": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "edited": false, "score": 0, "creation_date": 1519865462, "post_id": 49039057, "comment_id": 85087314, "body": "@jpp I guess that was the problem. I mistook CSV for excel document. But the desired results is still the same. \\n to indicate line breaks within the cells."}], "answers": [{"tags": [], "owner": {"reputation": 2393, "user_id": 3494669, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/eHaR3.png?s=128&g=1", "display_name": "pe-perry", "link": "https://stackoverflow.com/users/3494669/pe-perry"}, "is_accepted": true, "score": 0, "last_activity_date": 1519868978, "creation_date": 1519868978, "answer_id": 49041414, "question_id": 49039057, "link": "https://stackoverflow.com/questions/49039057/pandas-write-dataframe-containing-strings-to-xlsx-with-multiline-format/49041414#49041414", "title": "Pandas: Write dataframe containing strings to xlsx with multiline format", "body": "<p>You can use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_excel.html\" rel=\"nofollow noreferrer\"><code>.to_excel</code></a> with <code>index=False</code> and <code>header=False</code>.</p>\n\n<pre><code>df.to_excel('test.xlsx', index=False, header=False)\n</code></pre>\n\n<p>But you may need to turn on 'Wrap Text' by yourself.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 11779221, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b9633222283d918fd8228912f507e8ef?s=128&d=identicon&r=PG&f=1", "display_name": "abdullah", "link": "https://stackoverflow.com/users/11779221/abdullah"}, "is_accepted": false, "score": 0, "last_activity_date": 1617290949, "creation_date": 1617290949, "answer_id": 66907415, "question_id": 49039057, "link": "https://stackoverflow.com/questions/49039057/pandas-write-dataframe-containing-strings-to-xlsx-with-multiline-format/66907415#66907415", "title": "Pandas: Write dataframe containing strings to xlsx with multiline format", "body": "<p>why not use openpyxl for that it will work</p>\n<pre><code>from openpyxl import Workbook\n\nworkbook = Workbook()\nworksheet = workbook.worksheets[0]\nworksheet.title = &quot;Sheet1&quot;\nworksheet.cell('A1').style.alignment.wrap_text = True\nworksheet.cell('A1').value = &quot;abc\\n123\\n232&quot;\nworksheet.cell('B1').value = &quot;1\\n2\\n3\\n4\\n5\\n6&quot;\nworkbook.save('test.xlsx')\n</code></pre>\n"}], "owner": {"reputation": 439, "user_id": 5406956, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5a59980002e90d49fd371fe68f7b08cc?s=128&d=identicon&r=PG&f=1", "display_name": "ConanG", "link": "https://stackoverflow.com/users/5406956/conang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 698, "favorite_count": 0, "accepted_answer_id": 49041414, "answer_count": 2, "score": 3, "last_activity_date": 1617290949, "creation_date": 1519854068, "last_edit_date": 1519865664, "question_id": 49039057, "link": "https://stackoverflow.com/questions/49039057/pandas-write-dataframe-containing-strings-to-xlsx-with-multiline-format", "title": "Pandas: Write dataframe containing strings to xlsx with multiline format", "body": "<pre><code>df=pd.DataFrame(['abc\\n123\\n232','1\\n2\\n3\\n4\\n5\\n6'])\ndf.to_csv('text.csv')\n</code></pre>\n\n<p>I would like to have in a single cell in the xlsx (Edited: not csv):</p>\n\n<pre><code>abc\n123\n232\n</code></pre>\n\n<p>The desired output is A1 cell <strong>only</strong> being filled.</p>\n\n<p>The dataframe has only 1 cell.\nBut the above code would result in the xlsx (Edited: not csv) printing that 1 cell into multiple cells.\nIs there a way to format and write the xlsx (Edited: not csv) into <strong>multilines</strong> <em>within</em> <strong><em>each</em> cell</strong>?</p>\n\n<p>Edit:\nI shall clarify my problem. There is nothing wrong with my dataframe definition. I would like the \"\\n\" within the strings in each cell of the dataframe to become a line break within the xlsx (Edited: not csv) cell. this is another example.</p>\n\n<pre><code>df=pd.DataFrame(['abc\\n123\\n232','1\\n2\\n3\\n4\\n5\\n6'])\ndf.to_csv('text.csv')\n</code></pre>\n\n<p>The desired output is A1 and A2 cells <strong>only</strong> being filled.</p>\n\n<p>Edit 2:\nNot in csv but <strong>xlsx</strong>.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 5, "creation_date": 1519854078, "post_id": 49039050, "comment_id": 85083426, "body": "<code>disposableList = list</code> <b>does not create a copy</b>. Also <code>list</code> is a bad name for a list. <a href=\"https://stackoverflow.com/q/2612802/3001761\">stackoverflow.com/q/2612802/3001761</a>"}, {"owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "edited": false, "score": 0, "creation_date": 1519854223, "post_id": 49039050, "comment_id": 85083502, "body": "Do you just want to check the list for duplicates?  This sounds like an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">xy problem</a>"}, {"owner": {"reputation": 31, "user_id": 9352391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94262be2aba6f31f54d5a2f1f5b3e850?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/9352391/adam"}, "edited": false, "score": 0, "creation_date": 1519854223, "post_id": 49039050, "comment_id": 85083503, "body": "How would I create a copy?"}], "answers": [{"tags": [], "owner": {"reputation": 224, "user_id": 9425961, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-J51_IGSn-fg/AAAAAAAAAAI/AAAAAAAAACc/EluH5_qoPUI/photo.jpg?sz=128", "display_name": "Jordan Mattiuzzo", "link": "https://stackoverflow.com/users/9425961/jordan-mattiuzzo"}, "is_accepted": false, "score": 0, "last_activity_date": 1519855893, "creation_date": 1519855893, "answer_id": 49039461, "question_id": 49039050, "link": "https://stackoverflow.com/questions/49039050/changing-a-disposable-list-without-affecting-the-original-python/49039461#49039461", "title": "Changing a disposable list without affecting the original Python", "body": "<p>The first thing I would like to point out is your use of the variable name <code>list</code>. This is a dangerous variable name to use because <code>list</code> is actually a function within python, and if you type it in on python, you will notice it will turn purple. Once you have assigned the name <code>list</code> to a variable, you can no longer use that function's features. For the purposes of my explanation, I will be using the name <code>my_list</code>.</p>\n\n<p>Also, the <code>disposableList = my_list</code> does not create a copy of the list that you are using. It just stores the original list under a new variable name.</p>\n\n<p>You will find that the use of a for loop to replace the <code>disposableList = my_list</code> will work much better in that it will loop through the original list and place each item in a new list.</p>\n\n<p>I also recommend the use of the <code>break</code> function as you can exit out of the loop and continue the code once certain requirements have been found.</p>\n\n<p>Here is a code I have worked on for you:</p>\n\n<pre><code>my_list = [1,2,3,4,5,5]\ndisposableList = []\nfor i in my_list:\n    disposableList.append(i)\nfor i in my_list:\n    disposableList.remove(i)\n    if i in disposableList:\n        break\n</code></pre>\n\n<p>Good luck! </p>\n\n<p>Jordan.</p>\n"}, {"tags": [], "owner": {"reputation": 1619, "user_id": 1564947, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/71ba3964ea0f6279b1f7416d0b91fb72?s=128&d=identicon&r=PG", "display_name": "daviewales", "link": "https://stackoverflow.com/users/1564947/daviewales"}, "is_accepted": false, "score": 1, "last_activity_date": 1519856146, "creation_date": 1519856146, "answer_id": 49039521, "question_id": 49039050, "link": "https://stackoverflow.com/questions/49039050/changing-a-disposable-list-without-affecting-the-original-python/49039521#49039521", "title": "Changing a disposable list without affecting the original Python", "body": "<p>Is there a reason why you don't want to use the built-in list function <code>list.count(item)</code>? Imagine you have the following setup:</p>\n\n<pre><code>a = [1,2,3,4,4,5,5,5]\nfor i in a:\n    if a.count(i) &gt; 1:\n        print(\"The list contains a duplicate:\", i)\n</code></pre>\n\n<p>Or even better, if you are trying to create a list with no duplicates, use the built-in set type:</p>\n\n<pre><code>a = [1,2,3,4,4,5,5,5]\nb = set(a)\nprint(b)\n</code></pre>\n\n<p>This will output <code>\"{1, 2, 3, 4, 5}\"</code></p>\n\n<p>As noted in the comments, if you still really really want to copy a list for some reason, use <code>b=a.copy()</code> (<code>b=a</code> is just a reference from <code>b</code> to <code>a</code>, if both are lists. This is why changing something in one changes it in the other.)</p>\n"}], "owner": {"reputation": 31, "user_id": 9352391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94262be2aba6f31f54d5a2f1f5b3e850?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/9352391/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1519856958, "answer_count": 2, "score": 1, "last_activity_date": 1519856146, "creation_date": 1519854017, "last_edit_date": 1519854099, "question_id": 49039050, "link": "https://stackoverflow.com/questions/49039050/changing-a-disposable-list-without-affecting-the-original-python", "closed_reason": "Duplicate", "title": "Changing a disposable list without affecting the original Python", "body": "<p>I'm trying to check the contents of a list for duplicates by storing the list in a second variable and removing one item from the list and then checking if there is still a copy of that item in the list. Here's what I've got:</p>\n\n<pre><code>disposableList = list\nfor i in disposableList:\n    disposableList.remove(i)\n    if i in disposableList:\n        end = True\n</code></pre>\n\n<p>The problem is when it removes i from disposableList it also removes it from List. Is there a way to do this without effecting the original list?</p>\n"}, {"tags": ["python", "scikit-learn", "sparse-matrix"], "comments": [{"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1520132913, "post_id": 49039015, "comment_id": 85188417, "body": "Yes you are right. Its showing the number of occurences of each bigram."}], "answers": [{"comments": [{"owner": {"reputation": 365, "user_id": 7490953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4eb8ec56060dd1061f237b813d433a24?s=128&d=identicon&r=PG&f=1", "display_name": "quanty", "link": "https://stackoverflow.com/users/7490953/quanty"}, "edited": false, "score": 0, "creation_date": 1519891547, "post_id": 49043122, "comment_id": 85094841, "body": "OK, so it seems like X.T*X is the format I am looking for. But it&#39;s just telling me how many times each word appears (e.g. 2 in dont,dont; 1 in to,to). So your answer does actually answer my question. Do you know how I can get it into the format I want? Where it shows how many times one word follows another in the bigrams?"}, {"owner": {"reputation": 365, "user_id": 7490953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4eb8ec56060dd1061f237b813d433a24?s=128&d=identicon&r=PG&f=1", "display_name": "quanty", "link": "https://stackoverflow.com/users/7490953/quanty"}, "edited": false, "score": 0, "creation_date": 1519892290, "post_id": 49043122, "comment_id": 85095221, "body": "I also added another example with a slightly different ngram_range argument"}], "tags": [], "owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "is_accepted": true, "score": 0, "last_activity_date": 1519881817, "creation_date": 1519881817, "answer_id": 49043122, "question_id": 49039015, "link": "https://stackoverflow.com/questions/49039015/how-does-one-interpret-sklearn-sparse-matrix-outputs/49043122#49043122", "title": "How does one interpret sklearn sparse matrix outputs?", "body": "<p>First you need to check out the feature names which the CountVectorizer is using.</p>\n\n<p>Do this:</p>\n\n<pre><code>bigram_vec.get_feature_names()\n# Out:  [u'am', u'dont', u'hello', u'to', u'want']\n</code></pre>\n\n<p>You see that the word <code>\"i\"</code> is not present. That's because the default tokenizer uses a pattern:</p>\n\n<blockquote>\n  <p>token_pattern : string</p>\n\n<pre><code>Regular expression denoting what constitutes a \u201ctoken\u201d, only used if \nanalyzer == 'word'. The default regexp select tokens of 2 or more\nalphanumeric characters (punctuation is completely ignored and always\ntreated as a token separator).\n</code></pre>\n</blockquote>\n\n<p>And the actual output of the X should be interpreted as:</p>\n\n<pre><code>            [u'am', u'dont', u'hello', u'to', u'want']\n'hello'    [[ 0        0        1        0       0]\n'i'         [ 0        0        0        0       0]\n'am'        [ 1        0        0        0       0]\n'hello'     [ 0        0        1        0       0]\n'i'         [ 0        0        0        0       0]\n'dont'      [ 0        1        0        0       0]\n'want'      [ 0        0        0        0       1]\n'to'        [ 0        0        0        1       0]\n'i'         [ 0        0        0        0       0]\n'dont'      [ 0        1        0        0       0]]\n</code></pre>\n\n<p>Now when you do <code>X.T * X</code> this should be interpreted as:</p>\n\n<pre><code>           u'am'  u'dont'  u'hello'  u'to'  u'want'\nu'am'      [[1      0         0        0       0]\nu'dont'     [0      2         0        0       0]\nu'hello'    [0      0         2        0       0]\nu'to'       [0      0         0        1       0]\nu'want'     [0      0         0        0       1]]\n</code></pre>\n\n<p>If you are expecting anything else, then you should add the details in the question.</p>\n"}], "owner": {"reputation": 365, "user_id": 7490953, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4eb8ec56060dd1061f237b813d433a24?s=128&d=identicon&r=PG&f=1", "display_name": "quanty", "link": "https://stackoverflow.com/users/7490953/quanty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 49043122, "answer_count": 1, "score": 0, "last_activity_date": 1519892252, "creation_date": 1519853870, "last_edit_date": 1519892252, "question_id": 49039015, "link": "https://stackoverflow.com/questions/49039015/how-does-one-interpret-sklearn-sparse-matrix-outputs", "title": "How does one interpret sklearn sparse matrix outputs?", "body": "<p>I am trying to produce a bigram word co-occurrence matrix, indicating how many times one word follows another in a corpus.</p>\n\n<p>As a test, I wrote the following (which I gathered from other SE questions):</p>\n\n<pre><code>from sklearn.feature_extraction.text import CountVectorizer\n\ntest_sent = ['hello', 'i', 'am', 'hello', 'i', 'dont', 'want', 'to', 'i', 'dont']\nbigram_vec = CountVectorizer(ngram_range=(1,2)) \nX = bigram_vec.fit_transform(test_sent)\nXc = (X.T * X)\nprint Xc\n</code></pre>\n\n<p>This should give the correct output. The matrix <code>Xc</code> is output like so:</p>\n\n<pre><code>(0, 0)  1\n(1, 1)  2\n(2, 2)  2\n(3, 3)  1\n(4, 4)  1\n</code></pre>\n\n<p>I have no idea how to interpret this. I attempted to make it dense to help with my interpretation using <code>Xc.todense()</code>, which got this:</p>\n\n<pre><code>[[1 0 0 0 0]\n [0 2 0 0 0]\n [0 0 2 0 0]\n [0 0 0 1 0]\n [0 0 0 0 1]]\n</code></pre>\n\n<p>Neither of these give the correct word co-occurrence matrix showing one how many times row follows column.</p>\n\n<p>Could someone please explain how I can interpret/use the output? Why is it like that?</p>\n\n<p><strong>Addition to question</strong></p>\n\n<p>Here is another possible output with a different example using <code>ngram_range=(2,2)</code>:</p>\n\n<pre><code>from sklearn.feature_extraction.text import CountVectorizer\n\ntest_sent = ['hello biggest awesome biggest biggest awesome today lively splendid awesome today']\n\nbigram_vec = CountVectorizer(ngram_range=(2,2)) \n\nX = bigram_vec.fit_transform(test_sent)\nprint bigram_vec.get_feature_names()\n\nXc = (X.T * X)\n\nprint Xc\nprint ' '\nprint Xc.todense()\n\n(4, 0)  1\n(2, 0)  2\n(0, 0)  1\n(3, 0)  1\n(1, 0)  2\n(7, 0)  1\n(5, 0)  1\n(6, 0)  1\n(4, 1)  2\n(2, 1)  4\n(0, 1)  2\n(3, 1)  2\n(1, 1)  4\n(7, 1)  2\n(5, 1)  2\n(6, 1)  2\n(4, 2)  2\n(2, 2)  4\n(0, 2)  2\n(3, 2)  2\n(1, 2)  4\n(7, 2)  2\n(5, 2)  2\n(6, 2)  2\n(4, 3)  1\n:   :\n(6, 4)  1\n(4, 5)  1\n(2, 5)  2\n(0, 5)  1\n(3, 5)  1\n(1, 5)  2\n(7, 5)  1\n(5, 5)  1\n(6, 5)  1\n(4, 6)  1\n(2, 6)  2\n(0, 6)  1\n(3, 6)  1\n(1, 6)  2\n(7, 6)  1\n(5, 6)  1\n(6, 6)  1\n(4, 7)  1\n(2, 7)  2\n(0, 7)  1\n(3, 7)  1\n(1, 7)  2\n(7, 7)  1\n(5, 7)  1\n(6, 7)  1\n\n[[1 2 2 1 1 1 1 1]\n [2 4 4 2 2 2 2 2]\n [2 4 4 2 2 2 2 2]\n [1 2 2 1 1 1 1 1]\n [1 2 2 1 1 1 1 1]\n [1 2 2 1 1 1 1 1]\n [1 2 2 1 1 1 1 1]\n [1 2 2 1 1 1 1 1]]\n</code></pre>\n\n<p>This one seems to tokenize by bigrams, since calling <code>bigram_vec.get_feature_names()</code> gives </p>\n\n<pre><code>[u'awesome biggest', u'awesome today', u'biggest awesome', u'biggest biggest', u'hello biggest', u'lively splendid', u'splendid awesome', u'today lively']\n</code></pre>\n\n<p>Some help interpretting this would be great. It's a symmetric matrix so I'm thinking it might just be number of occurrences?</p>\n"}, {"tags": ["python", "python-3.x", "function", "parameter-passing"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1519853852, "post_id": 49038977, "comment_id": 85083309, "body": "<code>y</code> <i>isn&#39;t</i> optional within the function; it will always be defined, and will contain zero or more positional arguments. <code>y in locals()</code> is therefore totally pointless. Why don&#39;t you just call <code>f(*a)</code> to unpack the elements to arguments?"}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1519853990, "post_id": 49038977, "comment_id": 85083388, "body": "An optional argument is one with a default value like <code>def f(x, y=None):</code>"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1519854249, "post_id": 49038977, "comment_id": 85083519, "body": "<code>y in locals()</code> doesn&#39;t check what you expect it to check. It looks to see if the <i>value</i> of <code>y</code> exists in the dictionary returned by <code>locals()</code>. It never will because <code>y</code> will be a tuple (possibly empty), and the keys of the dictionary will all be identifiers (strings). You probably meant <code>if &quot;y&quot; in locals()</code>, which will always be true (since <code>y</code> is always defined, even if its value is an empty tuple)."}], "answers": [{"tags": [], "owner": {"reputation": 381, "user_id": 7465457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c898a836db96cbe0f9a9be62d40ff421?s=128&d=identicon&r=PG&f=1", "display_name": "Gasvom", "link": "https://stackoverflow.com/users/7465457/gasvom"}, "is_accepted": false, "score": 1, "last_activity_date": 1519854560, "creation_date": 1519854560, "answer_id": 49039166, "question_id": 49038977, "link": "https://stackoverflow.com/questions/49038977/running-a-function-with-a-non-existing-optional-argument/49039166#49039166", "title": "Running a function with a non-existing optional argument", "body": "<p>The output of locals is a dictionary - in your function if you were to do:</p>\n\n<pre><code>def f(x, *y):\n    print(locals())\n\nf('string', 'other string')\n</code></pre>\n\n<p>The output would be </p>\n\n<pre><code>{'y': ('other string',), 'x': 'string'}\n</code></pre>\n\n<p>So to access the values within y, you would call it like so:</p>\n\n<pre><code>def f(x, *y):\n    print(x)\n    if 'y' in locals():\n        print(y)\nf('string', 'other string')\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>string\nother string\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4194, "user_id": 1177025, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2KV2D.png?s=128&g=1", "display_name": "Reinstate Monica", "link": "https://stackoverflow.com/users/1177025/reinstate-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1519854592, "creation_date": 1519854592, "answer_id": 49039174, "question_id": 49038977, "link": "https://stackoverflow.com/questions/49038977/running-a-function-with-a-non-existing-optional-argument/49039174#49039174", "title": "Running a function with a non-existing optional argument", "body": "<p>The correct way to check if y is a local name would be <code>if 'y' in locals():</code>. </p>\n\n<p>However, that would always be true, because <code>y</code> is always a local name, even if <code>f</code> is called with only one argument. In which case we have <code>y == ()</code>, i.e. <code>y</code> is an empty tuple.</p>\n\n<p>You can simply write <code>if y:</code> if you want to know if there was more than one argument.</p>\n\n<pre><code>def f(x, *y):\n    print(x)\n    if y:\n        print(y)\n</code></pre>\n\n<p>I can't confirm your second problem. While it doesn't do what you probably want, there is no NameError. (You probably want to drop the asterisk.)</p>\n\n<p>Oh, and if you want optional arguments, use optional arguments. Not variable length arguments.</p>\n"}], "owner": {"reputation": 101, "user_id": 7787682, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89dd679a20b1231dd34343574685ef32?s=128&d=identicon&r=PG&f=1", "display_name": "Jackpy", "link": "https://stackoverflow.com/users/7787682/jackpy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 49039174, "answer_count": 2, "score": 1, "last_activity_date": 1519858272, "creation_date": 1519853713, "last_edit_date": 1519858272, "question_id": 49038977, "link": "https://stackoverflow.com/questions/49038977/running-a-function-with-a-non-existing-optional-argument", "title": "Running a function with a non-existing optional argument", "body": "<p>I have create a function which has an optional argument <code>y</code> on it:</p>\n\n<pre><code>def f(x, *y):\n    print(x)\n    if y in locals():\n    print(y)\n</code></pre>\n\n<p>When passing these <code>x</code> and <code>y</code>arguments to the function it only ouputs <code>x</code> even though <code>y</code> is in the local variables:</p>\n\n<pre><code>a = ['String', 'Optional String']\nx = a[0]\nif len(a) == 2:\n    y = a[1]\n\nf(x, *y) #Output: String\n</code></pre>\n\n<p>I have a second issue that when giving only the <code>x</code> argument and not the <code>y</code> it ouputs a NameError:</p>\n\n<pre><code>a = ['String', 'Optional String']\nx = a[0]\nif len(a) == 2:\n    y = a[1]\n\nf(x, *y) #Output: NameError: name 'y' is not defined\n</code></pre>\n\n<p>How can I get this working? Thanks in advance.</p>\n\n<h3>EDIT:</h3>\n\n<p>Looks like I misunderstood what an optional argument was. Ended up changing the whole code and its Fixed. These answers helped me anyways, Thank you.</p>\n"}, {"tags": ["python", "file-io", "intermittent"], "answers": [{"comments": [{"owner": {"reputation": 233, "user_id": 9020922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b331cd8df3f5fc9c3a2e26fa13eaf3?s=128&d=identicon&r=PG&f=1", "display_name": "jayce", "link": "https://stackoverflow.com/users/9020922/jayce"}, "edited": false, "score": 0, "creation_date": 1520524898, "post_id": 49039746, "comment_id": 85360079, "body": "How is it an example of a race condition?  Nothing is competing to access or create this directory tree.  By the time the program executes, the directory has already been removed."}, {"owner": {"reputation": 105, "user_id": 4358085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HXSYN.jpg?s=128&g=1", "display_name": "Nash", "link": "https://stackoverflow.com/users/4358085/nash"}, "reply_to_user": {"reputation": 233, "user_id": 9020922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b331cd8df3f5fc9c3a2e26fa13eaf3?s=128&d=identicon&r=PG&f=1", "display_name": "jayce", "link": "https://stackoverflow.com/users/9020922/jayce"}, "edited": false, "score": 0, "creation_date": 1520972752, "post_id": 49039746, "comment_id": 85533915, "body": "Read these two answer maybe it&#39;ll clear things up for you. <a href=\"https://stackoverflow.com/questions/29347790/difference-between-ioerror-and-oserror\" title=\"difference between ioerror and oserror\">stackoverflow.com/questions/29347790/&hellip;</a>  <a href=\"https://stackoverflow.com/questions/18973418/os-mkdirpath-returns-oserror-when-directory-does-not-exist\" title=\"os mkdirpath returns oserror when directory does not exist\">stackoverflow.com/questions/18973418/&hellip;</a>"}], "tags": [], "owner": {"reputation": 105, "user_id": 4358085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HXSYN.jpg?s=128&g=1", "display_name": "Nash", "link": "https://stackoverflow.com/users/4358085/nash"}, "is_accepted": false, "score": 0, "last_activity_date": 1519857183, "creation_date": 1519857183, "answer_id": 49039746, "question_id": 49038974, "link": "https://stackoverflow.com/questions/49038974/os-makedirs-occasionally-fails/49039746#49039746", "title": "os.makedirs() Occasionally Fails", "body": "<p>I guess this is an issue of a <strong>Race Condition</strong> take a look at this answer <a href=\"https://stackoverflow.com/questions/14574518/how-does-using-the-try-statement-avoid-a-race-condition\">Race Condition</a>, Hope it helps.</p>\n"}], "owner": {"reputation": 233, "user_id": 9020922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32b331cd8df3f5fc9c3a2e26fa13eaf3?s=128&d=identicon&r=PG&f=1", "display_name": "jayce", "link": "https://stackoverflow.com/users/9020922/jayce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 713, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1605546459, "creation_date": 1519853709, "last_edit_date": 1605546459, "question_id": 49038974, "link": "https://stackoverflow.com/questions/49038974/os-makedirs-occasionally-fails", "title": "os.makedirs() Occasionally Fails", "body": "<p>I have a program that - on startup - checks to see if the user-supplied output directory exists.  If the directory can not be found the program attempts to create it:</p>\n<pre><code>if not os.path.exists(path):\n  os.makedirs(path)\n</code></pre>\n<p>Path is a standard absolute path to a directory such as '/mnt/share/path/to/output'</p>\n<p>It works about 75% of the time.  The rest of the time I get either &quot;exception.OSError,&quot; or &quot;exception.IOError: [Errno 2] No such file or directory.&quot;  Both exceptions have the same error number and text.</p>\n<p>Why is this happening?  I don't see how it would be permissions related or anything like that - I am writing as myself to directories I own and control - and again it works the other 3 out of 4 times.  I am writing the same directory to the same place every time and deleting it recursively between program invocations for testing.  It is writing to a remote share (NFS) if that matters at all.</p>\n"}, {"tags": ["python", "ocr"], "comments": [{"owner": {"reputation": 687, "user_id": 3935323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glmTt.png?s=128&g=1", "display_name": "RaceYouAnytime", "link": "https://stackoverflow.com/users/3935323/raceyouanytime"}, "edited": false, "score": 0, "creation_date": 1519857561, "post_id": 49038958, "comment_id": 85084937, "body": "What exactly is the challenge you&#39;re trying to overcome?  Accessing the argument that is passed into the python script?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9411140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d88865a60491b2ba3e9b5187906d817d?s=128&d=identicon&r=PG&f=1", "display_name": "Hunter Rios", "link": "https://stackoverflow.com/users/9411140/hunter-rios"}, "edited": false, "score": 0, "creation_date": 1519867868, "post_id": 49039915, "comment_id": 85087842, "body": "Thanks so much! That definitely fixed my problem. However, it appears that only the first word of the extracted text ends up being searched in google. For example, if the phrase thats captured is &quot;What size pizza do you want?&quot;, it will only search for &quot;What&quot;. Any idea how to fix this? It doesn&#39;t appear to be tesseract because I can see the .txt files and they look fine."}, {"owner": {"reputation": 687, "user_id": 3935323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glmTt.png?s=128&g=1", "display_name": "RaceYouAnytime", "link": "https://stackoverflow.com/users/3935323/raceyouanytime"}, "reply_to_user": {"reputation": 1, "user_id": 9411140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d88865a60491b2ba3e9b5187906d817d?s=128&d=identicon&r=PG&f=1", "display_name": "Hunter Rios", "link": "https://stackoverflow.com/users/9411140/hunter-rios"}, "edited": false, "score": 0, "creation_date": 1519920891, "post_id": 49039915, "comment_id": 85112613, "body": "@HunterRios In your shell script, try putting $OCR in quotation marks when you launch the python script.  See if this works: python3 launch1.py &quot;$OCR&quot;"}], "tags": [], "owner": {"reputation": 687, "user_id": 3935323, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/glmTt.png?s=128&g=1", "display_name": "RaceYouAnytime", "link": "https://stackoverflow.com/users/3935323/raceyouanytime"}, "is_accepted": false, "score": 0, "last_activity_date": 1519857914, "creation_date": 1519857914, "answer_id": 49039915, "question_id": 49038958, "link": "https://stackoverflow.com/questions/49038958/trying-to-pass-extracted-text-from-tesseract-ocr-to-custom-google-search/49039915#49039915", "title": "Trying to pass extracted text from Tesseract OCR to custom google search", "body": "<p>It appears to me that the only step you're missing is grabbing the text in your Python code and passing it into the search query.  You can do this using <code>sys.</code>  In this example we replace the user-inputted text with retrieving the argument from the command line, assuming that this is what you're trying to do.</p>\n\n<pre><code>import urllib.parse\nimport sys\nsearch_query = sys.argv[1]\nquery_encoded = urllib.parse.quote_plus(search_query)\ngoogle_search_url = \"http://www.google.com/search?q=\" + \nformat(query_encoded)\nimport webbrowser \nwebbrowser.open(google_search_url)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9411140, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d88865a60491b2ba3e9b5187906d817d?s=128&d=identicon&r=PG&f=1", "display_name": "Hunter Rios", "link": "https://stackoverflow.com/users/9411140/hunter-rios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 262, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525113510, "creation_date": 1519853617, "last_edit_date": 1525113510, "question_id": 49038958, "link": "https://stackoverflow.com/questions/49038958/trying-to-pass-extracted-text-from-tesseract-ocr-to-custom-google-search", "title": "Trying to pass extracted text from Tesseract OCR to custom google search", "body": "<p>Having some trouble with a project and hopefully someone can help! I'm trying to take extracted text from tesseract OCR and use that text as the search query of Google Chrome searches. My shell script can extract the text and launch Chrome, but I cant figure out how to send the text to the searchbar of chrome. Below are some pictures of my script. I'm extremely new to coding, so any help is appreciated. </p>\n\n<p>Shell script</p>\n\n<pre><code>echo \"Realtime Screen OCR\"\nwhile true \ndo\necho \"Waiting for trigger\"\nread\nscreencapture -R31,205,420,420 screens.png\ntesseract screens.png ocr\nOCR=`cat ocr.txt`\npython3 launch1.py $OCR\n##/Applications/Google\\ Chrome.app/Contents/MacOS/Google\\ Chrome $OCR\necho \"Opened Chrome...waiting for next question\"\ndone\n</code></pre>\n\n<p>Python Script</p>\n\n<pre><code>import urllib.parse\nsearch_query = input(\"enter search query\")\nquery_encoded = urllib.parse.quote_plus(search_query)\ngoogle_search_url = \"http://www.google.com/search?q=\" + \nformat(query_encoded)\nimport webbrowser \nwebbrowser.open(google_search_url)\n</code></pre>\n"}, {"tags": ["python", "mysql", "sql", "string", "python-3.x"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 1, "creation_date": 1519853728, "post_id": 49038928, "comment_id": 85083247, "body": "A column name is not a parameter. Put the column name <code>maxPrice</code> directly into your query."}, {"owner": {"reputation": 124, "user_id": 8722564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Y_MeMj2lt-g/AAAAAAAAAAI/AAAAAAAAACE/OSSBObnQvqY/photo.jpg?sz=128", "display_name": "Joost Luijben", "link": "https://stackoverflow.com/users/8722564/joost-luijben"}, "reply_to_user": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1519853806, "post_id": 49038928, "comment_id": 85083285, "body": "I want to make the column a parameter. Is this possible? Or is there a workaround?"}], "answers": [{"tags": [], "owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "is_accepted": false, "score": 1, "last_activity_date": 1519853887, "creation_date": 1519853887, "answer_id": 49039019, "question_id": 49038928, "link": "https://stackoverflow.com/questions/49038928/use-row-as-variable-with-python-and-sql/49039019#49039019", "title": "use row as variable with python and sql", "body": "<p>A column name is not a parameter. Put the column name <code>maxPrice</code> directly into your SQL. </p>\n\n<pre><code>cursor.execute(\"\"\"UPDATE Search SET maxPrice = %s WHERE searchID = %s\"\"\", (300, 10))\n</code></pre>\n\n<p>If you want to use the same code with different column names, you would have to modify the string itself. </p>\n\n<pre><code>sql = \"UPDATE Search SET {} = %s WHERE searchID = %s\".format('maxPrice')\ncursor.execute(sql, (300,10))\n</code></pre>\n\n<p>But bear in mind that this is not safe from injection the way parameters are, so make sure your column name is not a user-input string or anything like that. </p>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 780108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08bbdb4705bfab08daa3a7d607573490?s=128&d=identicon&r=PG", "display_name": "Tim Shaffer", "link": "https://stackoverflow.com/users/780108/tim-shaffer"}, "is_accepted": false, "score": 1, "last_activity_date": 1519853893, "creation_date": 1519853893, "answer_id": 49039022, "question_id": 49038928, "link": "https://stackoverflow.com/questions/49038928/use-row-as-variable-with-python-and-sql/49039022#49039022", "title": "use row as variable with python and sql", "body": "<p>You cannot do it like that. You need to place the column name in the string before you call <code>cursor.execute</code>. Column names cannot be used when transforming variables in <code>cursor.execute</code>.</p>\n\n<p>Something like this would work:</p>\n\n<pre><code>sql = \"UPDATE Search SET {} = %s WHERE searchID = %s\".format('maxPrice')\n\ncursor.execute(sql, (300, 10,))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 124, "user_id": 8722564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Y_MeMj2lt-g/AAAAAAAAAAI/AAAAAAAAACE/OSSBObnQvqY/photo.jpg?sz=128", "display_name": "Joost Luijben", "link": "https://stackoverflow.com/users/8722564/joost-luijben"}, "edited": false, "score": 0, "creation_date": 1519854242, "post_id": 49039035, "comment_id": 85083513, "body": "Yes, this works! I am indeed worried about the SQL-injection, but I guess I have no other choice..."}, {"owner": {"reputation": 4657, "user_id": 263671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a5ff04171bb92c8fc2208d0a1b8afc46?s=128&d=identicon&r=PG", "display_name": "Cez", "link": "https://stackoverflow.com/users/263671/cez"}, "reply_to_user": {"reputation": 124, "user_id": 8722564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Y_MeMj2lt-g/AAAAAAAAAAI/AAAAAAAAACE/OSSBObnQvqY/photo.jpg?sz=128", "display_name": "Joost Luijben", "link": "https://stackoverflow.com/users/8722564/joost-luijben"}, "edited": false, "score": 0, "creation_date": 1519855736, "post_id": 49039035, "comment_id": 85084181, "body": "@JoostLuijben see my answer to allow only valid fields   <a href=\"https://stackoverflow.com/a/49039356/263671\">stackoverflow.com/a/49039356/263671</a>"}], "tags": [], "owner": {"reputation": 249903, "user_id": 2422776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2353050223ebecb113741c29458de4b2?s=128&d=identicon&r=PG", "display_name": "Mureinik", "link": "https://stackoverflow.com/users/2422776/mureinik"}, "is_accepted": false, "score": 1, "last_activity_date": 1519853928, "creation_date": 1519853928, "answer_id": 49039035, "question_id": 49038928, "link": "https://stackoverflow.com/questions/49038928/use-row-as-variable-with-python-and-sql/49039035#49039035", "title": "use row as variable with python and sql", "body": "<p>You cannot dynamically bind object (e.g., column) names, only values. If that's the logic you're trying to achieve, you'd have to resort to string manipulation/formatting (with all the risks of SQL-injection attacks that come with it). E.g.:</p>\n\n<pre><code>sql = \"\"\"UPDATE Search SET {} = %s WHERE searchID = %s\"\"\".format('maxPrice')\ncursor.execute(sql, (300, 10,))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4657, "user_id": 263671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a5ff04171bb92c8fc2208d0a1b8afc46?s=128&d=identicon&r=PG", "display_name": "Cez", "link": "https://stackoverflow.com/users/263671/cez"}, "is_accepted": true, "score": 1, "last_activity_date": 1519855413, "creation_date": 1519855413, "answer_id": 49039356, "question_id": 49038928, "link": "https://stackoverflow.com/questions/49038928/use-row-as-variable-with-python-and-sql/49039356#49039356", "title": "use row as variable with python and sql", "body": "<p>As noted, you can't prepare it using a field.</p>\n\n<p>Perhaps the safest way is to allow only those fields that are expected, e.g.</p>\n\n<pre><code>#!/usr/bin/python\n\nimport os\n\nimport mysql.connector\n\nconn = mysql.connector.connect(user=os.environ.get('USER'),\n                               host='localhost',\n                               database='sandbox',\n                               unix_socket='/var/run/mysqld/mysqld.sock')\n\ncur = conn.cursor(dictionary=True)\nquery = \"\"\"SELECT column_name\n           FROM information_schema.columns\n           WHERE table_schema = DATABASE()\n           AND table_name = 'Search'\n        \"\"\"\n\ncur.execute(query)\nfields = [x['column_name'] for x in cur.fetchall()]\n\nuser_input = ['maxPrice', 300, 10]\n\nif user_input[0] in fields:\n    cur.execute(\"\"\"UPDATE Search SET {0} = {1} WHERE id = {1}\"\"\".format(user_input[0], '%s'),\n                tuple(user_input[1:]))\n\nprint cur.statement\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>UPDATE Search SET maxPrice = 300 WHERE id = 10\n</code></pre>\n\n<p>Where:</p>\n\n<pre><code>mysql&gt; show create table Search\\G\n*************************** 1. row ***************************\nSearch\nCREATE TABLE `Search` (\n  `id` int(11) DEFAULT NULL,\n  `maxPrice` float DEFAULT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=latin1\n</code></pre>\n"}], "owner": {"reputation": 124, "user_id": 8722564, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-Y_MeMj2lt-g/AAAAAAAAAAI/AAAAAAAAACE/OSSBObnQvqY/photo.jpg?sz=128", "display_name": "Joost Luijben", "link": "https://stackoverflow.com/users/8722564/joost-luijben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1086, "favorite_count": 0, "accepted_answer_id": 49039356, "answer_count": 4, "score": 2, "last_activity_date": 1519855413, "creation_date": 1519853500, "last_edit_date": 1519854334, "question_id": 49038928, "link": "https://stackoverflow.com/questions/49038928/use-row-as-variable-with-python-and-sql", "title": "use row as variable with python and sql", "body": "<p>I am trying to update some values into a database. The user can give the row that should be changed. The input from the user, however is a string. When I try to parse this into the MySQL connector with python it gives an error because of the apostrophes. The code I have so far is:</p>\n\n<pre><code>import mysql.connector\n\nconn = mysql.connector\nconn = connector.connect(user=dbUser, password=dbPasswd, host=dbHost, database=dbName)\n    cursor = conn.cursor()\ncursor.execute(\"\"\"UPDATE Search SET %s = %s WHERE searchID = %s\"\"\", ('maxPrice', 300, 10,))\n</code></pre>\n\n<p>I get this error </p>\n\n<pre><code>mysql.connector.errors.ProgrammingError: 1064 (42000): You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''maxPrice' = 300 WHERE searchID = 10' at line 1\n</code></pre>\n\n<p>How do I get rid of the apostrophes? Because I think they are causing problems.</p>\n"}, {"tags": ["python", "python-3.x", "numpy", "kdb", "pyq"], "answers": [{"tags": [], "owner": {"reputation": 2369, "user_id": 8694303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c71327764ba90205e3a65e229e76863?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon McMurray", "link": "https://stackoverflow.com/users/8694303/jonathon-mcmurray"}, "is_accepted": false, "score": 2, "last_activity_date": 1519854329, "creation_date": 1519854329, "answer_id": 49039115, "question_id": 49038899, "link": "https://stackoverflow.com/questions/49038899/kdb-database-to-numpy-array-in-pyq/49039115#49039115", "title": "Kdb database to NumPy array in PyQ", "body": "<p>I don't think <code>.q.load</code> does what you're expecting - the return of this function is simply a null symbol. I think instead you need to use <code>.q.get</code> e.g.</p>\n\n<pre><code>jmcmurray@host ~/hdb $ pyq\nPython 3.5.2 (default, Nov 23 2017, 16:37:01)\n[GCC 5.4.0 20160609] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; q.load(\"sym\")\nk('`sym')\n&gt;&gt;&gt; np.array(q.get(\":2014.04.21/trades\").select())\narray([('AAPL', '2014-04-21T08:00:37.853000000', 'O',  25.33, 5048),\n       ('AAPL', '2014-04-21T08:00:58.840000000', 'O',  25.35, 4580),\n       ('AAPL', '2014-04-21T08:01:40.150000000', 'O',  25.35, 5432), ...,\n       ('YHOO', '2014-04-21T16:29:06.868000000', 'L',  35.32, 4825),\n       ('YHOO', '2014-04-21T16:29:43.655000000', 'L',  35.32, 6125),\n       ('YHOO', '2014-04-21T16:29:57.229000000', 'L',  35.36,   41)],\n      dtype=[('sym', 'O'), ('time', '&lt;M8[ns]'), ('src', 'O'), ('price', '&lt;f8'), ('size', '&lt;i4')])\n&gt;&gt;&gt;\n</code></pre>\n\n<p>Note here I first use <code>.q.load</code> to load the <code>sym</code> file, as the symbol columns are enumerated. Then I load one splayed table from my HDB, which should be equivalent to your splayed table.</p>\n\n<p>I also use <code>.select()</code> on the table as <code>.q.get()</code> simply maps the table into memory (same as <code>get</code> in KDB), it's necessary to use <code>select</code> to pull the actual data into memory.</p>\n"}, {"comments": [{"owner": {"reputation": 343, "user_id": 8833237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee44e4b4cba01d79c209afd7d98933ff?s=128&d=identicon&r=PG&f=1", "display_name": "marrowgari", "link": "https://stackoverflow.com/users/8833237/marrowgari"}, "edited": false, "score": 0, "creation_date": 1519860446, "post_id": 49039223, "comment_id": 85086003, "body": "Solved it. Thanks, Alexander. Curious to know, what is the reasoning behind loading using <code>\\l</code> and not the load function?"}, {"owner": {"reputation": 2369, "user_id": 8694303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c71327764ba90205e3a65e229e76863?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathon McMurray", "link": "https://stackoverflow.com/users/8694303/jonathon-mcmurray"}, "edited": false, "score": 2, "creation_date": 1519899728, "post_id": 49039223, "comment_id": 85099295, "body": "<code>.q.load</code> is equivalent to KDB <code>load</code>, which is different to <code>\\l</code> -  see here: <a href=\"http://code.kx.com/q/ref/filewords/#load\" rel=\"nofollow noreferrer\">code.kx.com/q/ref/filewords/#load</a>"}], "tags": [], "owner": {"reputation": 2053, "user_id": 5403209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66af486aba77af58bb156dfe132186f9?s=128&d=identicon&r=PG", "display_name": "Alexander Belopolsky", "link": "https://stackoverflow.com/users/5403209/alexander-belopolsky"}, "is_accepted": true, "score": 3, "last_activity_date": 1519854769, "creation_date": 1519854769, "answer_id": 49039223, "question_id": 49038899, "link": "https://stackoverflow.com/questions/49038899/kdb-database-to-numpy-array-in-pyq/49039223#49039223", "title": "Kdb database to NumPy array in PyQ", "body": "<p>Suppose your HDB was created as follows:</p>\n\n<pre><code>q)(` sv db,`t`)set .Q.en[db:`:alpha/HDB]([]sym:`A`B`C;a:1 2 3)\n`:alpha/HDB/t/\nq)\\l alpha/HDB\nq)t\nsym a\n-----\nA   1\nB   2\nC   3\n</code></pre>\n\n<p>Then, first of all you should load it using <code>\\l</code> command, not the load function:</p>\n\n<pre><code>&gt;&gt;&gt; q('\\\\l alpha/HDB')\nk('::')\n</code></pre>\n\n<p>This will load all your tables and enumeration domains.</p>\n\n<p>Now you should be able to convert the sym column of your table to a numpy array of strings</p>\n\n<pre><code>&gt;&gt;&gt; np.array(q.t.sym)\narray(['A', 'B', 'C'], dtype=object)\n</code></pre>\n\n<p>or to a numpy array of integers:</p>\n\n<pre><code>&gt;&gt;&gt; np.array(q.t.sym.data)\narray([0, 1, 2])\n</code></pre>\n\n<p>You can also convert the entire table to a numpy record array in one go, but you will have to \"map\" it into the memory first:</p>\n\n<pre><code>&gt;&gt;&gt; np.array(q.t.select())\narray([('A', 1), ('B', 2), ('C', 3)], dtype=[('sym', 'O'), ('a', '&lt;i8')])\n</code></pre>\n"}], "owner": {"reputation": 343, "user_id": 8833237, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee44e4b4cba01d79c209afd7d98933ff?s=128&d=identicon&r=PG&f=1", "display_name": "marrowgari", "link": "https://stackoverflow.com/users/8833237/marrowgari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 604, "favorite_count": 0, "accepted_answer_id": 49039223, "answer_count": 2, "score": 2, "last_activity_date": 1559738699, "creation_date": 1519853372, "last_edit_date": 1559738699, "question_id": 49038899, "link": "https://stackoverflow.com/questions/49038899/kdb-database-to-numpy-array-in-pyq", "title": "Kdb database to NumPy array in PyQ", "body": "<p>I have a splayed Kdb database of symbols, floats, and timestamps. I'd like to convert this to NumPy arrays. However using the following code...</p>\n\n<pre><code>&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; from pyq import q\n&gt;&gt;&gt; d = q.load(':alpha/HDB/')\n&gt;&gt;&gt; a = np.array(d)\n</code></pre>\n\n<p>Returns this error...</p>\n\n<pre><code>Traceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nFile \"/Users/marrowgari/py3/lib/python3.6/site-packages/pyq/_n.py\", line 158, in array\nreturn numpy.array(list(self), dtype)\nTypeError: iteration over a K scalar, t=-11\n</code></pre>\n\n<p>Is this because Kdb symbol types do not have a direct analogue in NumPy? If so, how do I correct this?</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 597, "user_id": 7818309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a15edab5b0ad1062ff983efb0a53b2?s=128&d=identicon&r=PG", "display_name": "Richard_wth", "link": "https://stackoverflow.com/users/7818309/richard-wth"}, "edited": false, "score": 0, "creation_date": 1519877300, "post_id": 49038854, "comment_id": 85090042, "body": "Would you please further explain how come sometimes shape of x_array is unknown?"}, {"owner": {"reputation": 241, "user_id": 4440436, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/19e9d4695b43021f499942387ecc0d2e?s=128&d=identicon&r=PG&f=1", "display_name": "tcquinn", "link": "https://stackoverflow.com/users/4440436/tcquinn"}, "reply_to_user": {"reputation": 597, "user_id": 7818309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a15edab5b0ad1062ff983efb0a53b2?s=128&d=identicon&r=PG", "display_name": "Richard_wth", "link": "https://stackoverflow.com/users/7818309/richard-wth"}, "edited": false, "score": 0, "creation_date": 1519877755, "post_id": 49038854, "comment_id": 85090154, "body": "Well, this isn&#39;t my real code. This is supposed to be a minimum example. But the analog in my real code is a block of reusable code that gets inserted in different computational graphs for different purposes. The analog of x_array typically comes from a placeholder. In some graphs, the placeholder has a specified shape. In other graphs, the placeholder does not (so it can accept different shapes at runtime). Does that help?"}, {"owner": {"reputation": 597, "user_id": 7818309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a15edab5b0ad1062ff983efb0a53b2?s=128&d=identicon&r=PG", "display_name": "Richard_wth", "link": "https://stackoverflow.com/users/7818309/richard-wth"}, "edited": false, "score": 2, "creation_date": 1519878919, "post_id": 49038854, "comment_id": 85090438, "body": "This <a href=\"https://blog.metaflow.fr/shapes-and-dynamic-dimensions-in-tensorflow-7b1fe79be363\" rel=\"nofollow noreferrer\">tutorial</a> says that <code>x_array_shape = tf.shape(x_array)</code> is the correct way to pass dynamic shape. It showed <code>(?, 4)</code> in your case because x_array_shape is a tensor that needs to be evaluated (e.g. via session.run)."}, {"owner": {"reputation": 241, "user_id": 4440436, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/19e9d4695b43021f499942387ecc0d2e?s=128&d=identicon&r=PG&f=1", "display_name": "tcquinn", "link": "https://stackoverflow.com/users/4440436/tcquinn"}, "reply_to_user": {"reputation": 597, "user_id": 7818309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a15edab5b0ad1062ff983efb0a53b2?s=128&d=identicon&r=PG", "display_name": "Richard_wth", "link": "https://stackoverflow.com/users/7818309/richard-wth"}, "edited": false, "score": 0, "creation_date": 1519879165, "post_id": 49038854, "comment_id": 85090511, "body": "Right. But note that, in the first three examples, TensorFlow is able to determine the static shape of the output object at graph creation time (without a session run), which is the behavior that I want. Only in the last case does this fail, even though the last output object is very similar to the others."}, {"owner": {"reputation": 597, "user_id": 7818309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a15edab5b0ad1062ff983efb0a53b2?s=128&d=identicon&r=PG", "display_name": "Richard_wth", "link": "https://stackoverflow.com/users/7818309/richard-wth"}, "edited": false, "score": 0, "creation_date": 1519879772, "post_id": 49038854, "comment_id": 85090684, "body": "Might be a silly question. Did the code fail at graph creation time when using <code>tf.shape</code>?"}, {"owner": {"reputation": 241, "user_id": 4440436, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/19e9d4695b43021f499942387ecc0d2e?s=128&d=identicon&r=PG&f=1", "display_name": "tcquinn", "link": "https://stackoverflow.com/users/4440436/tcquinn"}, "reply_to_user": {"reputation": 597, "user_id": 7818309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a15edab5b0ad1062ff983efb0a53b2?s=128&d=identicon&r=PG", "display_name": "Richard_wth", "link": "https://stackoverflow.com/users/7818309/richard-wth"}, "edited": false, "score": 0, "creation_date": 1519880670, "post_id": 49038854, "comment_id": 85090929, "body": "No. As in the minimum example above, the tensor produced by tf.shape() can be consumed by other tensors even if its value is not known at graph creation time. I may not understand your question. I will come back to this tomorrow."}, {"owner": {"reputation": 597, "user_id": 7818309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a15edab5b0ad1062ff983efb0a53b2?s=128&d=identicon&r=PG", "display_name": "Richard_wth", "link": "https://stackoverflow.com/users/7818309/richard-wth"}, "reply_to_user": {"reputation": 241, "user_id": 4440436, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/19e9d4695b43021f499942387ecc0d2e?s=128&d=identicon&r=PG&f=1", "display_name": "tcquinn", "link": "https://stackoverflow.com/users/4440436/tcquinn"}, "edited": false, "score": 0, "creation_date": 1519880824, "post_id": 49038854, "comment_id": 85090972, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/166011/discussion-between-richard-wth-and-tcquinn\">continue this discussion in chat</a>."}, {"owner": {"reputation": 489, "user_id": 2082009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69f1e19921ba3ecdcd40bf55a6196aca?s=128&d=identicon&r=PG", "display_name": "Saurabh Saxena", "link": "https://stackoverflow.com/users/2082009/saurabh-saxena"}, "reply_to_user": {"reputation": 597, "user_id": 7818309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03a15edab5b0ad1062ff983efb0a53b2?s=128&d=identicon&r=PG", "display_name": "Richard_wth", "link": "https://stackoverflow.com/users/7818309/richard-wth"}, "edited": false, "score": 0, "creation_date": 1519893475, "post_id": 49038854, "comment_id": 85095797, "body": "+1 to what @Richard_wth has already said. Replacing <code>tf.shape(x_array)</code> with <code>x_array.shape</code> is probably what you need."}, {"owner": {"reputation": 241, "user_id": 4440436, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/19e9d4695b43021f499942387ecc0d2e?s=128&d=identicon&r=PG&f=1", "display_name": "tcquinn", "link": "https://stackoverflow.com/users/4440436/tcquinn"}, "edited": false, "score": 0, "creation_date": 1519919983, "post_id": 49038854, "comment_id": 85112002, "body": "OK. Your comments indicate that I wasn&#39;t clear enough about the different strategies I&#39;ve tried and how they failed. I edited the question accordingly."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 4440436, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/19e9d4695b43021f499942387ecc0d2e?s=128&d=identicon&r=PG&f=1", "display_name": "tcquinn", "link": "https://stackoverflow.com/users/4440436/tcquinn"}, "edited": false, "score": 0, "creation_date": 1519921548, "post_id": 49054121, "comment_id": 85113077, "body": "Yes. This is the best I could come up with, too. I was/am holding out hope for a simpler solution, since strategy 1 gets so close to the behavior that I want. Do you know how/why TensorFlow is able to inspect the values of tensors to infer the shapes of downstream tensors most of the time, but not all of the time?"}, {"owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "reply_to_user": {"reputation": 241, "user_id": 4440436, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/19e9d4695b43021f499942387ecc0d2e?s=128&d=identicon&r=PG&f=1", "display_name": "tcquinn", "link": "https://stackoverflow.com/users/4440436/tcquinn"}, "edited": false, "score": 0, "creation_date": 1519927148, "post_id": 49054121, "comment_id": 85116338, "body": "@tcquinn That&#39;s an interesting question, I&#39;ve edited the answer. It seems there are mechanisms in place to guess tensor output shapes that work well for most common cases, and <code>tf.shape</code> should work always fine for your case."}, {"owner": {"reputation": 241, "user_id": 4440436, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/19e9d4695b43021f499942387ecc0d2e?s=128&d=identicon&r=PG&f=1", "display_name": "tcquinn", "link": "https://stackoverflow.com/users/4440436/tcquinn"}, "edited": false, "score": 1, "creation_date": 1519927782, "post_id": 49054121, "comment_id": 85116664, "body": "Thanks for the follow-up. Very interesting. My colleague also discovered that <code>tf.reshape()</code> is happy to infer output shape from input shape if only one new dimension is unknown (but not if multiple new dimensions are unknown). Seems like the conclusion is that TensorFlow is surprisingly good at inferring shape at graph creation time for many common operations, but not for all operations, and therefore this mechanism can&#39;t be counted on."}], "tags": [], "owner": {"reputation": 52185, "user_id": 1782792, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7e8dde1ee800b9687983617bbea3cb9b?s=128&d=identicon&r=PG&f=1", "display_name": "jdehesa", "link": "https://stackoverflow.com/users/1782792/jdehesa"}, "is_accepted": true, "score": 2, "last_activity_date": 1519927013, "last_edit_date": 1519927013, "creation_date": 1519921122, "answer_id": 49054121, "question_id": 49038854, "link": "https://stackoverflow.com/questions/49038854/determining-tensor-shapes-at-time-of-graph-creation-in-tensorflow/49054121#49054121", "title": "Determining tensor shapes at time of graph creation in TensorFlow", "body": "<p>You can carefully pick the elements of the shape that you know to have a \"best of both worlds\" result:</p>\n\n<pre><code>def my_get_shape(tensor):\n    if tensor.shape.ndims is None:\n        # Fully dynamic\n        return tf.shape(tensor)\n    if tensor.shape.is_fully_defined():\n        # Fully static\n        return tensor.shape\n    # Partially static\n    dyn_shape = tf.shape(tensor)\n    shape = []\n    for i, d in enumerate(tensor.shape):\n        shape.append(d.value if d.value is not None else dyn_shape[i])\n    return shape\n\ndef my_function(x, y):\n    x_shape = my_get_shape(x)  # Or just tf.shape(x)! - see edit\n    a = tf.reshape(y, x_shape)\n    b = tf.zeros(x_shape)\n    num_x_values = x_shape[0]\n    c = tf.reshape(y, [num_x_values, 4])\n    d = tf.zeros([num_x_values, 4])\n    return a, b, c, d\n\n# Fully static\nwith tf.Graph().as_default():\n    x = tf.placeholder(tf.float32, [2, 4])\n    y = tf.placeholder(tf.float32, [8])\n    a, b, c, d = my_function(x, y)\nprint('a:', a.shape, ', b:', b.shape, ', c:', c.shape, ', d:', d.shape)\n# a: (2, 4) , b: (2, 4) , c: (2, 4) , d: (2, 4)\n\n# Fully dynamic\nwith tf.Graph().as_default():\n    x = tf.placeholder(tf.float32)\n    y = tf.placeholder(tf.float32)\n    a, b, c, d = my_function(x, y)\nprint('a:', a.shape, ', b:', b.shape, ', c:', c.shape, ', d:', d.shape)\n# a: &lt;unknown&gt; , b: &lt;unknown&gt; , c: (?, 4) , d: (?, 4)\n\n# Partially static\nwith tf.Graph().as_default():\n    x = tf.placeholder(tf.float32, [None, 4])\n    y = tf.placeholder(tf.float32)\n    a, b, c, d = my_function(x, y)\nprint('a:', a.shape, ', b:', b.shape, ', c:', c.shape, ', d:', d.shape)\n# a: (?, 4) , b: (?, 4) , c: (?, 4) , d: (?, 4)\n</code></pre>\n\n<p><em>EDIT:</em></p>\n\n<p>Actually, replacing <code>my_get_shape</code> with <code>tf.shape</code> in the previous snippet works exacly the same. It seems that <code>tf.shape</code> should be the default (being careful not to cram the graph with it) unless you explicitly want to keep dimensions undefined.</p>\n\n<p>I have investigated a bit, and I couldn't work the whole thing out completely. I don't know if this is useful, but here are some things I found out. Apparently TensorFlow has, at C++ level (it seems it used to be in Python before, but not anymore), a \"shape inference\" mechanism. If you look, for example, in <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/ops/array_ops.cc\" rel=\"nofollow noreferrer\"><code>tensorflow/core/ops/array_ops.cc</code></a>) you will see that every operation declaration includes a <code>.SetShapeFn</code> at the end, which is a function that uses <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/core/framework/shape_inference.h\" rel=\"nofollow noreferrer\"><code>InferenceContext</code></a> to try to guess the output shape of the operation. This class can, among other things , check whether values in a tensor are already known, which is true for example for <code>tf.shape</code> when the given tensor is static or for <code>tf.fill</code> (and related like <code>tf.ones</code>) with known values. The resolution of the shape inference algorithm is what is set as tensor shape in Python, and it can be called directly (although I don't see how it can be useful) through <a href=\"https://github.com/tensorflow/tensorflow/blob/master/tensorflow/python/framework/common_shapes.py\" rel=\"nofollow noreferrer\"><code>call_cpp_shape_fn</code></a>:</p>\n\n<pre><code>from tensorflow.python.framework.common_shapes import call_cpp_shape_fn\nwith tf.Graph().as_default():\n    print(call_cpp_shape_fn(tf.reshape(tf.placeholder(tf.float32), tf.fill([2], 3)).op))\n    # Shows this:\n    # {\n    #   'shapes': [dim { size: 3 } dim { size: 3 }],\n    #   'handle_data': [None],\n    #   'inputs_needed': b'\\x12\\x01\\x01'\n    # }\n    print(call_cpp_shape_fn(tf.reshape(tf.placeholder(tf.float32), (2 * tf.fill([2], 3))).op))\n    # Shows this:\n    # {\n    #   'shapes': [dim { size: -1 } dim { size: -1 }],\n    #   'handle_data': [None],\n    #   'inputs_needed': b'\\x12\\x01\\x01'\n    # }\n</code></pre>\n\n<p>You can see that, while <code>tf.fill([2], 3)</code> was correctly inspected, TensorFlow didn't work out that <code>2 * tf.fill([2], 3)</code> is <code>[6, 6]</code>, presumably because statically keeping track of operations like multiplication, even if operands are known constants, was deemed too expensive.</p>\n\n<p>What I haven't found out is where do ops declare that their values can be statically known, or where/how these values are retrieved exactly. It seems that, for example, for <code>tf.shape</code>, it is able to specifically pick known values and leave the rest as undefined.</p>\n"}], "owner": {"reputation": 241, "user_id": 4440436, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/19e9d4695b43021f499942387ecc0d2e?s=128&d=identicon&r=PG&f=1", "display_name": "tcquinn", "link": "https://stackoverflow.com/users/4440436/tcquinn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1419, "favorite_count": 0, "accepted_answer_id": 49054121, "answer_count": 1, "score": 2, "last_activity_date": 1519927013, "creation_date": 1519853238, "last_edit_date": 1519919914, "question_id": 49038854, "link": "https://stackoverflow.com/questions/49038854/determining-tensor-shapes-at-time-of-graph-creation-in-tensorflow", "title": "Determining tensor shapes at time of graph creation in TensorFlow", "body": "<p>I'm trying to write a chunk of reusable code that reads the shape of one tensor and then uses the resulting object to define the shape of other tensors. I have a choice of reading the dynamic shape of the tensor with <code>tf.shape(tensor)</code> or the static shape of the tensor with <code>tensor.get_shape()</code>. The toy example looks like this (with the two different strategies):</p>\n\n<pre><code>def my_function_strategy_1(x, y):\n    x_shape = tf.shape(x)\n    a = tf.reshape(y, x_shape)\n    b = tf.zeros(x_shape)\n    num_x_values = x_shape[0]\n    c = tf.reshape(y, [num_x_values, 4])\n    d = tf.zeros([num_x_values, 4])\n    return a, b, c, d\n\ndef my_function_strategy_2(x, y):\n    x_shape = x.get_shape()\n    a = tf.reshape(y, x_shape)\n    b = tf.zeros(x_shape)\n    num_x_values = x_shape[0]\n    c = tf.reshape(y, [num_x_values, 4])\n    d = tf.zeros([num_x_values, 4])\n    return a, b, c, d\n</code></pre>\n\n<p>I want to use this chunk of code in different graphs. Sometimes the shape of the input tensors will be known and sometimes they will be unknown:</p>\n\n<pre><code>graph_A = tf.Graph()\nwith graph_A.as_default():\n    x = tf.placeholder(tf.float32, [2, 4])\n    y = tf.placeholder(tf.float32, [8])\n    a, b, c, d = my_function(x, y)\n\nwith graph_B.as_default():\n    x = tf.placeholder(tf.float32)\n    y = tf.placeholder(tf.float32)\n    a, b, c, d = my_function(x, y)\n</code></pre>\n\n<p>The behavior I want is: (A) When the shapes of the input tensors are known (as in <code>graph_A</code>), I want TensorFlow to calculate all of the shapes in the graph at graph creation time (so it can efficiently allocate resources, etc.), and (B) When the shapes of the input tensors are unknown (as in <code>graph_B</code>), I want the TensorFlow to wait until runtime to calculate all of the shapes in the graph.</p>\n\n<p>The <code>strategy_1</code> version of the function <em>almost</em> does this. It achieves (B), but it doesn't quite achieve (A) because TensorFlow leaves the shape of some tensors unknown. For example, in the toy example above, the shapes of <code>a</code>, <code>b</code>, and <code>c</code> are calculated at graph creation time, but the shape of <code>d</code> is left unknown (even though <code>d</code> uses very similar operations). You can check this by printing <code>a.get_shape()</code>, <code>b.get_shape()</code>, etc.</p>\n\n<p>Conversely, the <code>strategy_2</code> version of the function achieves (A) for all tensors in the graph, but doesn't achieve (B) because TensorFlow (understandably) throws an exception when it tries to use the (unknown) static shape of the input tensor to shape other tensors.</p>\n\n<p>Is there a way to achieve both (A) and (B) in a single function? How/why does the <code>strategy_1</code> version work for most tensors in the graph, but not all?</p>\n"}, {"tags": ["python", "python-3.x", "tkinter", "turtle-graphics", "python-turtle"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1519853126, "post_id": 49038809, "comment_id": 85082935, "body": "Do you have a <i>question</i>? So far you&#39;ve just given us your homework assignment and some code without explaining what the problem is."}, {"owner": {"reputation": 43, "user_id": 8277566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad04a51fbd4a535c53e4ec069910faa?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisCrad", "link": "https://stackoverflow.com/users/8277566/chriscrad"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1519855352, "post_id": 49038809, "comment_id": 85084003, "body": "question is how to get it to increase the size while keeping the squares on the same line.  Every thing i have tried sofar either builds one square on top of the other or they just go all over the place."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1519855762, "post_id": 49038809, "comment_id": 85084191, "body": "You seem to be drawing the squares all the same size - maybe that&#39;s not a good idea? But SO isn&#39;t here to complete your homework for you, please review the material in the <a href=\"https://stackoverflow.com/help\">help center</a>."}, {"owner": {"reputation": 43, "user_id": 8277566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad04a51fbd4a535c53e4ec069910faa?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisCrad", "link": "https://stackoverflow.com/users/8277566/chriscrad"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1519855989, "post_id": 49038809, "comment_id": 85084302, "body": "not asking anyone to complete my homework, its an exercise that I am trying to complete in the book, along with the rest of them, however when I go stuck on this one I figured maybe someone could help.  If you aren&#39;t sure how to do it then that is fine, maybe someone else has encountered this issue before."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 8277566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad04a51fbd4a535c53e4ec069910faa?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisCrad", "link": "https://stackoverflow.com/users/8277566/chriscrad"}, "edited": false, "score": 0, "creation_date": 1519867849, "post_id": 49041042, "comment_id": 85087836, "body": "Ahhh, thats what was boggling my mind. I was either drawing squares straight up on each other or slicing through the previous square  when trying to return back to the start.  Couldn&#39;t figure out how increase the size, thank you soooo much."}], "tags": [], "owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "is_accepted": true, "score": 1, "last_activity_date": 1519865699, "creation_date": 1519865699, "answer_id": 49041042, "question_id": 49038809, "link": "https://stackoverflow.com/questions/49038809/turtle-graphics-repeating-squares/49041042#49041042", "title": "Turtle Graphics: Repeating Squares", "body": "<p>The input request and the drawing logic ought to be separated.<br>\nHere is one approach that returns the turtle at the start at each turn, after increasing the side length.</p>\n\n<pre><code>import turtle\n\nnum_squares = 3\nt = turtle.Turtle()\nt.pendown()\nside = side_unit = 30\n\nwhile True:\n    try:\n        num_squares = int(input('input the number of squares'))\n    except ValueError:\n        print(\"please enter an integer\")\n    if num_squares &gt; 3:\n        break\n\nfor sq in range(1, num_squares + 1):\n    t.left(90)\n    t.forward(side)\n    t.left(90)\n    t.forward(side)\n    t.left(90)\n    t.forward(side)\n    t.left(90)\n    side = side_unit + 3 * sq  # increase the size of the side\n\n    t.goto(0,0)                # return to base\n\nturtle.done()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 30484, "user_id": 2875563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/umbJB.jpg?s=128&g=1", "display_name": "Reblochon Masque", "link": "https://stackoverflow.com/users/2875563/reblochon-masque"}, "edited": false, "score": 0, "creation_date": 1605959086, "post_id": 49042603, "comment_id": 114816155, "body": "Nice moir&#233; effect @cdlane"}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 1, "last_activity_date": 1519878251, "creation_date": 1519878251, "answer_id": 49042603, "question_id": 49038809, "link": "https://stackoverflow.com/questions/49038809/turtle-graphics-repeating-squares/49042603#49042603", "title": "Turtle Graphics: Repeating Squares", "body": "<p>While waiting for @ReblochonMasque's solution to finish <strong><em>drawing</em></strong> 100 squares, there's plenty of time to implement an alternate, faster solution based on <strong><em>stamping</em></strong>.</p>\n\n<p>The first thing to note is in the provided instructions it says to draw 100 squares to create the design in the figure, but that figure consists of just under 50 squares.  It's also been scaled in some non integral fashion which makes it appear to have different line thicknesses.</p>\n\n<p>Let's focus on the spirt of the problem rather than the example.  The OP had a 1 square minimum so I've preserved that.  This solution also naturally tends to center the square on the window:</p>\n\n<pre><code>from turtle import Turtle, Screen\n\nDELTA = 3\nMINIMUM = DELTA * 2\nCURSOR_SIZE = 20\n\nnum_squares = -1\n\nwhile num_squares &lt; 1:\n    try:\n        num_squares = int(input('Input the number of squares: '))\n    except ValueError:\n        print(\"please enter an integer.\")\n\n    if num_squares &lt; 1:\n        print(\"You must have at least 1 square.\")\n\nscreen = Screen()\nturtle = Turtle(\"square\", visible=False)\nturtle.fillcolor(\"white\")\n\nfor size in range(((num_squares - 1) * DELTA) + MINIMUM, MINIMUM - 1, -DELTA):\n    turtle.goto(turtle.xcor() + DELTA/2, turtle.ycor() - DELTA/2)\n    turtle.shapesize(size / CURSOR_SIZE)\n    turtle.stamp()\n\nscreen.exitonclick()\n</code></pre>\n\n<p>This is clearly not the kind of solution the OP was looking for, but maybe next time a problem like this comes up, it might be one the OP will at least consider.</p>\n\n<p><a href=\"https://i.stack.imgur.com/hBcKY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hBcKY.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 43, "user_id": 8277566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cad04a51fbd4a535c53e4ec069910faa?s=128&d=identicon&r=PG&f=1", "display_name": "ChrisCrad", "link": "https://stackoverflow.com/users/8277566/chriscrad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4070, "favorite_count": 1, "accepted_answer_id": 49041042, "answer_count": 2, "score": 1, "last_activity_date": 1605959105, "creation_date": 1519853029, "last_edit_date": 1605959105, "question_id": 49038809, "link": "https://stackoverflow.com/questions/49038809/turtle-graphics-repeating-squares", "title": "Turtle Graphics: Repeating Squares", "body": "<p>I am trying to create a loop that takes an input by a user and draws however many squares but it increases the size of the squares with each loop, however 2 sides are stay connected.  I'll include the graphic to better explain.</p>\n\n<p><a href=\"https://i.stack.imgur.com/zgv0m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zgv0m.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>    import turtle\n\nsquares = 1\nwhile squares &gt;= 1:\n    squares = int(input('How many squares would you like drawn?:'))\n    if squares == 0:\n        print(\"You must have at-least 1 square.\")\n        squares = int(input('How many squares would you like drawn?:'))\n    else:\n        for count in range(squares):\n            turtle.forward(30)\n            turtle.left(90)\n            turtle.forward(30)\n            turtle.left(90)\n            turtle.forward(30)\n            turtle.left(90)\n            turtle.forward(30)\n            turtle.left(90)\n\n\nturtle.done()\n</code></pre>\n"}, {"tags": ["python", "neo4j"], "comments": [{"owner": {"reputation": 57206, "user_id": 974731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG", "display_name": "cybersam", "link": "https://stackoverflow.com/users/974731/cybersam"}, "edited": false, "score": 0, "creation_date": 1519853759, "post_id": 49038781, "comment_id": 85083259, "body": "There is a <a href=\"https://stackoverflow.com/questions/47133423/service-unavailable-error-using-neo4j-driver-for-python\">similar question</a>, which does not have an accepted answer."}, {"owner": {"reputation": 1011, "user_id": 3727550, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rTGjg.jpg?s=128&g=1", "display_name": "sjc", "link": "https://stackoverflow.com/users/3727550/sjc"}, "reply_to_user": {"reputation": 57206, "user_id": 974731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG", "display_name": "cybersam", "link": "https://stackoverflow.com/users/974731/cybersam"}, "edited": false, "score": 0, "creation_date": 1519853922, "post_id": 49038781, "comment_id": 85083351, "body": "@cybersam The issue with that one appears to be the specifying the port number, which is present here"}, {"owner": {"reputation": 1011, "user_id": 3727550, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rTGjg.jpg?s=128&g=1", "display_name": "sjc", "link": "https://stackoverflow.com/users/3727550/sjc"}, "reply_to_user": {"reputation": 57206, "user_id": 974731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f54ba41697411b238379022f9a6df56?s=128&d=identicon&r=PG", "display_name": "cybersam", "link": "https://stackoverflow.com/users/974731/cybersam"}, "edited": false, "score": 0, "creation_date": 1519862426, "post_id": 49038781, "comment_id": 85086579, "body": "I found if I downgraded from neo4j-driver v1.5.3 to v1.1.0b1 that the above script worked.  I will not add this as an answer to accept it yet, because I&#39;d love an answer for the most up-to-date version"}], "answers": [{"comments": [{"owner": {"reputation": 1011, "user_id": 3727550, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rTGjg.jpg?s=128&g=1", "display_name": "sjc", "link": "https://stackoverflow.com/users/3727550/sjc"}, "edited": false, "score": 0, "creation_date": 1520012713, "post_id": 49048342, "comment_id": 85155004, "body": "I have the <code>dbms.connectors.default_listen_address</code> line commented, but <code>dbms.connector.bolt.listen_address=0.0.0.0:7687</code> and <code>dbms.connector.http.listen_address=0.0.0.0:7474</code>  Doesn&#39;t this do the same thing?"}, {"owner": {"reputation": 27, "user_id": 9233431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7b22b2cb443d287a3a36cc98b1ef022?s=128&d=identicon&r=PG&f=1", "display_name": "Miosotaa", "link": "https://stackoverflow.com/users/9233431/miosotaa"}, "reply_to_user": {"reputation": 1011, "user_id": 3727550, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rTGjg.jpg?s=128&g=1", "display_name": "sjc", "link": "https://stackoverflow.com/users/3727550/sjc"}, "edited": false, "score": 0, "creation_date": 1520427927, "post_id": 49048342, "comment_id": 85309613, "body": "Yes, the same. What do you have in log files?"}, {"owner": {"reputation": 1011, "user_id": 3727550, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rTGjg.jpg?s=128&g=1", "display_name": "sjc", "link": "https://stackoverflow.com/users/3727550/sjc"}, "edited": false, "score": 0, "creation_date": 1520613946, "post_id": 49048342, "comment_id": 85401713, "body": "Nothing about the attempted connection was in the log files"}], "tags": [], "owner": {"reputation": 27, "user_id": 9233431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7b22b2cb443d287a3a36cc98b1ef022?s=128&d=identicon&r=PG&f=1", "display_name": "Miosotaa", "link": "https://stackoverflow.com/users/9233431/miosotaa"}, "is_accepted": false, "score": 0, "last_activity_date": 1519902439, "creation_date": 1519902439, "answer_id": 49048342, "question_id": 49038781, "link": "https://stackoverflow.com/questions/49038781/cannot-acquire-connection-to-neo4j-database/49048342#49048342", "title": "Cannot acquire connection to Neo4j database", "body": "<p>Try uncomment <code>dbms.connectors.default_listen_address=0.0.0.0</code> And check this </p>\n\n<pre><code># Bolt connector\ndbms.connector.bolt.enabled=true\ndbms.connector.bolt.tls_level=OPTIONAL\ndbms.connector.bolt.listen_address=:7687\n# HTTP Connector. There must be exactly one HTTP connector.\ndbms.connector.http.enabled=true\ndbms.connector.http.listen_address=:7474    \n# HTTPS Connector. There can be zero or one HTTPS connectors.\ndbms.connector.https.enabled=true\ndbms.connector.https.listen_address=:7473\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86, "user_id": 6758457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08522be4dabfe89b641628d415a8688b?s=128&d=identicon&r=PG&f=1", "display_name": "wobbyluck", "link": "https://stackoverflow.com/users/6758457/wobbyluck"}, "is_accepted": true, "score": 3, "last_activity_date": 1520544768, "creation_date": 1520544768, "answer_id": 49182824, "question_id": 49038781, "link": "https://stackoverflow.com/questions/49038781/cannot-acquire-connection-to-neo4j-database/49182824#49182824", "title": "Cannot acquire connection to Neo4j database", "body": "<p>I too had the same issue and turns out the driver was the issue.</p>\n\n<p>I did some experiments and found out that the last driver that it works for is <code>neo4j-driver==v1.1.0</code> but the next version <code>neo4j-driver==v1.2.0</code> it stops working for some reason. </p>\n"}], "owner": {"reputation": 1011, "user_id": 3727550, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rTGjg.jpg?s=128&g=1", "display_name": "sjc", "link": "https://stackoverflow.com/users/3727550/sjc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1368, "favorite_count": 0, "accepted_answer_id": 49182824, "answer_count": 2, "score": 2, "last_activity_date": 1520544768, "creation_date": 1519852944, "last_edit_date": 1519853257, "question_id": 49038781, "link": "https://stackoverflow.com/questions/49038781/cannot-acquire-connection-to-neo4j-database", "title": "Cannot acquire connection to Neo4j database", "body": "<p>I am trying to connect to my Neo4j graph database server from a new machine.  I can successfully connect from an older machine but do not wish to use the older one anymore. </p>\n\n<p>I have reduced the problem to a simple script that returns an exception:</p>\n\n<pre><code>from neo4j.v1 import GraphDatabase, basic_auth\n\nauth = basic_auth(\"username\",\"password\")\nsession = GraphDatabase.driver(\"bolt://remote.server:7687\",auth=auth).session()\n\nstatement = \"\"\"MATCH (a:Protein)\nWHERE a.name={name}\nRETURN a.Accession\"\"\"\n\ntx = session.begin_transaction()\nrecord = tx.run(statement,{'name':\"ARCH_HUMAN\"}).single()\nprint record['a.Accession']\n\nsession.close()\n</code></pre>\n\n<p>And the error message is:</p>\n\n<pre><code>File \"Test.py\", line 10, in &lt;module&gt;\n    tx = session.begin_transaction()\nFile \"/home/username/anaconda2/lib/python2.7/site-packages/neo4j/v1/api.py\", line 432, in begin_transaction\n    self._connect()\n  File \"/home/username/anaconda2/lib/python2.7/site-packages/neo4j/v1/api.py\", line 269, in _connect\nself._connection = self._acquirer(access_mode)\n  File \"/home/username/anaconda2/lib/python2.7/site-packages/neo4j/v1/direct.py\", line 52, in acquire\nraise ServiceUnavailable(\"Cannot acquire connection to {!r}\".format(self.address))\nneo4j.exceptions.ServiceUnavailable: Cannot acquire connection to Address(host='remote.server', port=7687)\n</code></pre>\n\n<p>Port 7687 is open (confirmed via <code>netstat -tulpn</code> and <code>iptables -L</code>), and neo4j is configured to listen to 0.0.0.0:7687. In addition, <code>.neo4j/known_hosts</code> contains an entry for host 0.0.0.0</p>\n\n<p>What's strange is that I get a different error message (neo4j.exceptions.AuthError) if I break the authentication by using an incorrect password. So the connection <em>is</em> being made to check the password, but still I cannot connect with the correct auth.  </p>\n\n<p>What's going on?</p>\n"}, {"tags": ["python", "numpy", "matrix"], "answers": [{"tags": [], "owner": {"reputation": 696, "user_id": 5078698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50587652c9e763535266945ef6ef9ac0?s=128&d=identicon&r=PG&f=1", "display_name": "alexdor", "link": "https://stackoverflow.com/users/5078698/alexdor"}, "is_accepted": false, "score": 4, "last_activity_date": 1519859350, "creation_date": 1519859350, "answer_id": 49040187, "question_id": 49038780, "link": "https://stackoverflow.com/questions/49038780/python-build-numpy-matrix/49040187#49040187", "title": "Python build numpy matrix", "body": "<p>To answer your first question, the matrix has to have a width of <code>n</code> in order for the matrix-vector product to be compatible.</p>\n\n<p>The picture of the matrix is ambiguous on where the switch from -2 to -(1-a) to -2a occurs. In your code, you check if <code>x==n/2</code> to set the switch. This is fine in python2 but will cause problems in python3 since x/2 returns 2.5. Using safer <code>x==n//2</code> since n//2 return an integer in python2 as well as python3.</p>\n\n<p>For generality, I'm going to assume that the switch happens at row m. The matrix can be built easier using slicing and the np.diag command. </p>\n\n<pre><code>def buildmat(n, m, a):\n    diag = np.zeros(n)\n    offdiag = np.zeros(n-1)\n\n    offdiag[0:m] = 1\n    offdiag[m:n-1] = a\n\n    diag[0:m] = -2\n    diag[m] = -(1+a)\n    diag[m+1:n] = -2*a\n\n    matrix =  np.diag(diag) + np.diag(offdiag, 1) + np.diag(offdiag, -1)\n    return matrix\n</code></pre>\n\n<p>Running</p>\n\n<pre><code>buildmat(5, 2, 3)\n</code></pre>\n\n<p>produces</p>\n\n<pre><code>[[-2.  1.  0.  0.  0.]\n [ 1. -2.  1.  0.  0.]\n [ 0.  1. -3.  2.  0.]\n [ 0.  0.  2. -4.  2.]\n [ 0.  0.  0.  2. -4.]]\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 7710773, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/fd394105f5102e84139ad2157c8b0600?s=128&d=identicon&r=PG&f=1", "display_name": "user3440639", "link": "https://stackoverflow.com/users/7710773/user3440639"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1519859350, "creation_date": 1519852935, "question_id": 49038780, "link": "https://stackoverflow.com/questions/49038780/python-build-numpy-matrix", "title": "Python build numpy matrix", "body": "<p>I am given this matrix and am trying to write a function to build this matrix for any size of n. I am told the height of the matrix is <code>n</code>, but not sure the width.</p>\n\n<p><a href=\"https://i.stack.imgur.com/8iZd4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8iZd4.png\" alt=\"enter image description here\"></a></p>\n\n<p>Below is my code and output, is this correct? I am slightly confused by the notation of the matrix itself.</p>\n\n<pre><code>def buildMatrix(n, a):\n    matrix = np.zeros([n, n], dtype=float)\n    x_diag, y_diag = np.diag_indices_from(matrix)\n    for (x,y) in zip(x_diag, y_diag):\n        if x &gt; (n / 2):\n            matrix[x][y] = -2*a\n        elif x == (n / 2):\n            matrix[x][y] = -(1 + a)\n        else:\n            matrix[x][y] = -2\n\n        if x != n - 1:\n            matrix[x + 1][y] = a if x &gt;= (n / 2) else 1\n            matrix[x][y + 1] = a if x &gt;= (n / 2) else 1\n\n    return matrix\n</code></pre>\n\n<p>Output with <code>buildMatrix(5, 2)</code></p>\n\n<pre><code>[[-2.  1.  0.  0.  0.]\n [ 1. -2.  1.  0.  0.]\n [ 0.  1. -3.  2.  0.]\n [ 0.  0.  2. -4.  2.]\n [ 0.  0.  0.  2. -4.]]\n</code></pre>\n\n<p>Can anyone help me out?</p>\n"}, {"tags": ["python", "list", "sorting", "lambda"], "answers": [{"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 1, "last_activity_date": 1519853179, "creation_date": 1519853179, "answer_id": 49038838, "question_id": 49038740, "link": "https://stackoverflow.com/questions/49038740/sort-list-with-numbers-and-letters/49038838#49038838", "title": "Sort list with numbers and letters", "body": "<p>You can you try this:</p>\n\n<p>After scrambling your desired output:</p>\n\n<pre><code>import re\ns = ['5aR', '7aR', '10aR', '10cG', '9bG', '8aR', '8bG', '6bR', '5aG', '9aG', 'J1', '6aR', '6aG', '5bR', '7aG', '7bG', '9aR', '5bG', 'J2', '6bG', '10bG', '8aG', '10aG', '6cG']\nc, d, *h = sorted(s, key=lambda x:[False if not x[0].isdigit() else int(re.findall('^\\d+', x)[0]), x[-1], x[-2]])\nsorted_result = [*h, c, d]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['5aG', '5bG', '5aR', '5bR', '6aG', '6bG', '6cG', '6aR', '6bR', '7aG', '7bG', '7aR', '8aG', '8bG', '8aR', '9aG', '9bG', '9aR', '10aG', '10bG', '10cG', '10aR', 'J1', 'J2']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1208, "user_id": 5364318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77cb664c91d85e9dcf786d3ac163d8d?s=128&d=identicon&r=PG&f=1", "display_name": "Reck", "link": "https://stackoverflow.com/users/5364318/reck"}, "edited": false, "score": 2, "creation_date": 1519853536, "post_id": 49038850, "comment_id": 85083139, "body": "May be your one way is wrong. Please check your result."}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1519853829, "last_edit_date": 1519853829, "creation_date": 1519853219, "answer_id": 49038850, "question_id": 49038740, "link": "https://stackoverflow.com/questions/49038740/sort-list-with-numbers-and-letters/49038850#49038850", "title": "Sort list with numbers and letters", "body": "<p>Here is one way.</p>\n\n<pre><code>lst = ['7aR', '9aG', '7bG', '10cG', '5bG', '6aG', '6bG', '10bG', 'J2', '5aR', '10aG', '9bG', '6aR', '7aG', '10aR', '9aR', '8aR', 'J1', '5bR', '6bR', '5aG', '8bG', '6cG', '8aG']\n\nsorted([i for i in lst if i[0]!='J'], key=lambda x: [int(x[:-2]), x[-1], x[-2]]) + \\\nsorted(i for i in lst if i[0]=='J')\n\n# ['5aG', '5bG', '5aR', '5bR', '6aG', '6bG', '6cG', '6aR', '6bR', '7aG', '7bG', '7aR', '8aG', '8bG', '8aR', '9aG', '9bG', '9aR', '10aG', '10bG', '10cG', '10aR', 'J1', 'J2']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23864, "user_id": 146073, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2c69ccb9eb83c7ef2ba155a850df68a9?s=128&d=identicon&r=PG", "display_name": "holdenweb", "link": "https://stackoverflow.com/users/146073/holdenweb"}, "edited": false, "score": 0, "creation_date": 1519855351, "post_id": 49039168, "comment_id": 85084002, "body": "While the use of <code>float(num or &#39;inf&#39;)</code> is cute it isn&#39;t particularly readable, or it wouldn&#39;t require a note. A usable <code>N</code> could probably be found to allow the use of <code>int(num) or N</code> instead. The use of <code>re</code> is overkill given that the elements can be determined solely by position."}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "reply_to_user": {"reputation": 23864, "user_id": 146073, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2c69ccb9eb83c7ef2ba155a850df68a9?s=128&d=identicon&r=PG", "display_name": "holdenweb", "link": "https://stackoverflow.com/users/146073/holdenweb"}, "edited": false, "score": 1, "creation_date": 1519855697, "post_id": 49039168, "comment_id": 85084158, "body": "The problem here is that <code>int(&#39;&#39;)</code> raises an error. To the contrary I believe that using <code>float(&#39;inf&#39;)</code> is natural in sorting pairs. Using an arbitrary <code>N</code> simply lacks of generality and impeds scalability in my opinion."}, {"owner": {"reputation": 23864, "user_id": 146073, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2c69ccb9eb83c7ef2ba155a850df68a9?s=128&d=identicon&r=PG", "display_name": "holdenweb", "link": "https://stackoverflow.com/users/146073/holdenweb"}, "edited": false, "score": 0, "creation_date": 1519896223, "post_id": 49039168, "comment_id": 85097295, "body": "I&#39;d probably have been happy with your technique if the numbers were actually floats. The issue with <code>int(&#39;&#39;)</code> is why I chose to handle &quot;J&quot; values separately in my own attempt."}, {"owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "reply_to_user": {"reputation": 23864, "user_id": 146073, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2c69ccb9eb83c7ef2ba155a850df68a9?s=128&d=identicon&r=PG", "display_name": "holdenweb", "link": "https://stackoverflow.com/users/146073/holdenweb"}, "edited": false, "score": 1, "creation_date": 1519911674, "post_id": 49039168, "comment_id": 85106259, "body": "Sure, I understand you point. I like my code to be general and scalable, which might be overpowered here since there are only two possible values that do not start with an int. At that point it really is a personal choice I believe though."}, {"owner": {"reputation": 23864, "user_id": 146073, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2c69ccb9eb83c7ef2ba155a850df68a9?s=128&d=identicon&r=PG", "display_name": "holdenweb", "link": "https://stackoverflow.com/users/146073/holdenweb"}, "edited": false, "score": 0, "creation_date": 1519912398, "post_id": 49039168, "comment_id": 85106748, "body": "Sure, mostly a matter of taste. Naturally, mine&#39;s better than yours :P"}, {"owner": {"reputation": 71, "user_id": 8896374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6273c359a333d29b49f5d8e396a811f3?s=128&d=identicon&r=PG&f=1", "display_name": "husby036", "link": "https://stackoverflow.com/users/8896374/husby036"}, "edited": false, "score": 0, "creation_date": 1600034356, "post_id": 49039168, "comment_id": 112953493, "body": "+1 for a beautiful generic and scalable solution, which is exactly what makes this solution applicable to my own coding project. Thank you, @OlivierMelan&#231;on!"}], "tags": [], "owner": {"reputation": 19004, "user_id": 5079316, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f5e325c060deb5b55ee6ac0941af4dbe?s=128&d=identicon&r=PG&f=1", "display_name": "Olivier Melan&#231;on", "link": "https://stackoverflow.com/users/5079316/olivier-melan%c3%a7on"}, "is_accepted": true, "score": 2, "last_activity_date": 1519856803, "last_edit_date": 1519856803, "creation_date": 1519854566, "answer_id": 49039168, "question_id": 49038740, "link": "https://stackoverflow.com/questions/49038740/sort-list-with-numbers-and-letters/49039168#49039168", "title": "Sort list with numbers and letters", "body": "<p>You can use <code>re</code> to extract the front integer, then rely on <code>tuple</code> comparison.</p>\n\n<pre><code>import re\n\ndef key(s):\n    num, letters = re.match(r'(\\d*)(.*)', s).groups()\n    return float(num or 'inf'), letters\n\nsorted_names = sorted(names, key=key)\n</code></pre>\n\n<p>Note how you can rely on <code>float('inf')</code> to have your tokens without prefix digits pushed to the end.</p>\n"}, {"tags": [], "owner": {"reputation": 23864, "user_id": 146073, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2c69ccb9eb83c7ef2ba155a850df68a9?s=128&d=identicon&r=PG", "display_name": "holdenweb", "link": "https://stackoverflow.com/users/146073/holdenweb"}, "is_accepted": false, "score": 0, "last_activity_date": 1519855124, "creation_date": 1519855124, "answer_id": 49039291, "question_id": 49038740, "link": "https://stackoverflow.com/questions/49038740/sort-list-with-numbers-and-letters/49039291#49039291", "title": "Sort list with numbers and letters", "body": "<p>The easiest way to do this is to use Python's built-in sorting functions. By providing a suitable function as the <code>key</code> argument you can sort things in just about any order you choose.</p>\n\n<p>Internally, when you provide a key function the sort generates a list of two-element tuples. The first element of the tuple is a sort key, the result of applying the key function to the second element, the value from the list. It then sorts those tuples, and returns a list of the second elements. This is known as decorate-sort-undecorate.</p>\n\n<p>Most of your strings are an integer followed by two letters. The remainder, which you wish to appear last, are either <code>\"J1\"</code> or <code>\"J2\"</code>. The following should be a suitable key function. I take the precaution of applying the <code>int</code> function to the numbers, to ensure that they sort numerically rather than lexicographically (because <code>'2' &gt; '10'</code>).</p>\n\n<pre><code>def key_func(s):\n    # Ensure J-strings are at the end\n    if s.startswith('J'):\n        return (1000000, 'J', int(s[1:]))\n    else:\n        # The rest, split into digits and two characters\n        return (int(s[:-2]), s[-2], s[-1])\n</code></pre>\n\n<p>When tested with a randomised copy of your data the result of</p>\n\n<pre><code>data = ['8aG', '5aR', '6aG', '10aG', '6cG', '8bG', '9aG',\n        '5aG', '6bG', '7aR', 'J1', '10cG', '10bG', '10aR',\n        '6bR', 'J2', '6aR', '8aR', '7aG', '9aR', '5bR',\n        '9bG', '7bG', '5bG']\nprint(sorted(data, key=key_func))\n</code></pre>\n\n<p>appears to be correct (line breaks inserted for readability):</p>\n\n<pre><code>['5aG', '5aR', '5bG', '5bR', '6aG', '6aR', '6bG', '6bR',\n '6cG', '7aG', '7aR', '7bG', '8aG', '8aR', '8bG', '9aG',\n '9aR', '9bG', '10aG', '10aR', '10bG', '10cG', 'J1', 'J2']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "is_accepted": false, "score": 0, "last_activity_date": 1519855450, "creation_date": 1519855450, "answer_id": 49039367, "question_id": 49038740, "link": "https://stackoverflow.com/questions/49038740/sort-list-with-numbers-and-letters/49039367#49039367", "title": "Sort list with numbers and letters", "body": "<p>With custom <code>compound_sort()</code> function:</p>\n\n<pre><code>import re\n\nlst = ['9bG', '9aR', 'J2', '7bG', '7aG', '6bR', 'J1', '6cG', '6aG', '6bG', '5bG', '5aG', '8bG', '5bR', '8aR', '5aR', '10aR', '6aR', '10bG', '10aG', '9aG', '10cG', '7aR', '8aG']\npat = re.compile(r'(\\d+)(.*)|(J)(\\d+)')\n\ndef compound_sort(t):\n  t = tuple(filter(None, t))    # filter empty(None) matches\n  return (int(t[0]),) + t[1:] if t[0] != 'J' else (float('inf'), t[1])\n\nresult = sorted(lst, key=lambda x: compound_sort(pat.search(x).groups()))\nprint(result)\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>['5aG', '5aR', '5bG', '5bR', '6aG', '6aR', '6bG', '6bR', '6cG', '7aG', '7aR', '7bG', '8aG', '8aR', '8bG', '9aG', '9aR', '9bG', '10aG', '10aR', '10bG', '10cG', 'J1', 'J2']\n</code></pre>\n"}], "owner": {"reputation": 1163, "user_id": 7378726, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6534ea274bb332ea1c8c90cf395ea667?s=128&d=identicon&r=PG&f=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/7378726/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1633, "favorite_count": 0, "accepted_answer_id": 49039168, "answer_count": 5, "score": 3, "last_activity_date": 1519856803, "creation_date": 1519852801, "question_id": 49038740, "link": "https://stackoverflow.com/questions/49038740/sort-list-with-numbers-and-letters", "title": "Sort list with numbers and letters", "body": "<p>I am trying to sort an list which contains numbers and letters:</p>\n\n<pre><code>names = [\"5aG\", \"6bG\", \"10cG\", \"J1\", ...]\n</code></pre>\n\n<p>The output should look like this:</p>\n\n<pre><code>['5aG', '5bG', '5aR', '5bR', '6aG', '6bG', '6cG', '6aR', '6bR', '7aG', '7bG', '7aR', '8aG', '8bG', '8aR', '9aG', '9bG', '9aR','10aG', '10bG', '10cG', '10aR', 'J1', 'J2']\n</code></pre>\n\n<p>The first element of the string is always a number from 5 - 10, then there is a letter from a - c and in the end there is another letter (\"G\" or \"R\").</p>\n\n<p>Moreover there are the strings \"J1\" and \"J2\". They should be always the last ones (\"J1\" before \"J2\").</p>\n\n<p>How can I achieve something like that? I thought about using a lambda function.</p>\n\n<p>So far I hard coded it, but I think there should be a better solution.<br>\nThis is my hard coded version:</p>\n\n<pre><code>classes = ['5aG', '5bG', '5aR', '5bR', '6aG', '6bG', '6cG', '6aR', '6bR', '7aG', '7bG', '7aR', '8aG', '8bG', '8aR', '9aG', '9bG', '9aR','10aG', '10bG', '10cG', '10aR', 'J1', 'J2']\n\ndef s(v):\n  \"\"\"Get index of element in list\"\"\"\n  try:\n    return classes.index(v)\n  except ValueError:\nreturn 500\n\nl = ['5bG', '6aG', '6bG', '8aR', '9aG', '9bG', '9aR', '10cG', '10aR', 'J1', 'J2', '5aG', '']\nw = sorted( l, key=s)\nprint(w)\n</code></pre>\n"}, {"tags": ["python", "python-packaging"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1519852746, "post_id": 49038714, "comment_id": 85082725, "body": "<code>mypackage.moduledir</code> doesn&#39;t contain an <code>__init__.py</code>, so it&#39;s <i>not</i> a module."}, {"owner": {"reputation": 947, "user_id": 3088559, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b918ad95c7d6485814ceda30d279604b?s=128&d=identicon&r=PG&f=1", "display_name": "ericksonla", "link": "https://stackoverflow.com/users/3088559/ericksonla"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1519853530, "post_id": 49038714, "comment_id": 85083135, "body": "Oops, just forgot to include it. It is in my actual package, just failed to type it in here. I updated the question."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1519854438, "post_id": 49038714, "comment_id": 85083616, "body": "We&#39;ll need to see contents of your <code>setup.py</code> file.  Is the distribution on PyPI?"}, {"owner": {"reputation": 947, "user_id": 3088559, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b918ad95c7d6485814ceda30d279604b?s=128&d=identicon&r=PG&f=1", "display_name": "ericksonla", "link": "https://stackoverflow.com/users/3088559/ericksonla"}, "edited": false, "score": 0, "creation_date": 1519854638, "post_id": 49038714, "comment_id": 85083693, "body": "I added the setup.py to the question. Its more or less just the example version. The distribution is proprietary so its not on PyPI."}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1519854822, "post_id": 49038714, "comment_id": 85083772, "body": "When you install the package, is it installing the top level <code>mypackage</code> folder, or the inner one (that contains <code>moduledir</code>)? The nested folders with the same name might be confusing things if the wrong one is getting installed in the wrong place."}, {"owner": {"reputation": 947, "user_id": 3088559, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b918ad95c7d6485814ceda30d279604b?s=128&d=identicon&r=PG&f=1", "display_name": "ericksonla", "link": "https://stackoverflow.com/users/3088559/ericksonla"}, "edited": false, "score": 0, "creation_date": 1519855361, "post_id": 49038714, "comment_id": 85084008, "body": "The process I&#39;m using is navigating to the top level mypackage directory and then <code>pip install .</code>. I tried installing from the nested mypackage but it says &#39;setup.py not found&#39;."}], "answers": [{"tags": [], "owner": {"reputation": 947, "user_id": 3088559, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b918ad95c7d6485814ceda30d279604b?s=128&d=identicon&r=PG&f=1", "display_name": "ericksonla", "link": "https://stackoverflow.com/users/3088559/ericksonla"}, "is_accepted": false, "score": 1, "last_activity_date": 1519856826, "creation_date": 1519856826, "answer_id": 49039674, "question_id": 49038714, "link": "https://stackoverflow.com/questions/49038714/cant-import-submodules-in-python-package/49039674#49039674", "title": "Cant import submodules in python package", "body": "<p>I needed to add the submodules to the packages list in setup.py:</p>\n\n<pre><code># setup.py\nfrom setuptools import setup\n\nsetup(name='mypackage',\n      version='0.1',\n      description='mypackage',\n      url='https://gitlab.com/ericksonla/mypackage',\n      author='ericksonla',\n      author_email='ericksonla@ericksonla.com',\n      license='',\n      packages=['mypackage, 'mypackage.moduledir'],\n      install_requires=[],\n      zip_safe=False)\n</code></pre>\n\n<p>I'm still not quite sure why I need to import one level down, but not any further.</p>\n"}], "owner": {"reputation": 947, "user_id": 3088559, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b918ad95c7d6485814ceda30d279604b?s=128&d=identicon&r=PG&f=1", "display_name": "ericksonla", "link": "https://stackoverflow.com/users/3088559/ericksonla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519856826, "creation_date": 1519852672, "last_edit_date": 1519854581, "question_id": 49038714, "link": "https://stackoverflow.com/questions/49038714/cant-import-submodules-in-python-package", "title": "Cant import submodules in python package", "body": "<p>I have a python package that I can use standalone just fine. When I install it to site-packages with pip, though, I lose the ability to import submodules.</p>\n\n<p>My package looks like this:</p>\n\n<pre><code>mypackage\n    mypackage\n        __init__.py\n        mymodule.py\n        moduledir\n            __init__.py\n            mysubmodule.py\n    setup.py\n</code></pre>\n\n<p>If I have the package on my pythonpath, I can use it just fine. But then when I use pip to install it to site-packages, I can't import submodules.</p>\n\n<pre><code>from mypackage import mymodule              # works fine\nfrom mypackage.moduledir import mysubmodule # ModuleNotFoundError: No module named when installed to site-packages, works fine when on pythonpath\n</code></pre>\n\n<p>What's going on here? How do I change it so that I can import submodules?</p>\n\n<p>Also, I'm sure this is answered somewhere, but I can't find it for the life of me on google or SO. I apologize if its trivial and I'm just googling the wrong terms.</p>\n\n<p>Edit: Here is my setup.py as requested.</p>\n\n<pre><code>from setuptools import setup\n\nsetup(name='mypackage',\n      version='0.1',\n      description='mypackage',\n      url='https://gitlab.com/ericksonla/mypackage',\n      author='ericksonla',\n      author_email='ericksonla@ericksonla.com',\n      license='',\n      packages=['mypackage'],\n      install_requires=[],\n      zip_safe=False)\n</code></pre>\n"}, {"tags": ["python", "networkx"], "answers": [{"tags": [], "owner": {"reputation": 724, "user_id": 5321744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9XfXF.png?s=128&g=1", "display_name": "michaelg", "link": "https://stackoverflow.com/users/5321744/michaelg"}, "is_accepted": false, "score": 0, "last_activity_date": 1519965589, "creation_date": 1519965589, "answer_id": 49062919, "question_id": 49038711, "link": "https://stackoverflow.com/questions/49038711/draw-parallel-edges-using-networkx/49062919#49062919", "title": "draw parallel edges using networkx", "body": "<p>Here is a method to add weight labels to the edges:</p>\n\n<pre><code>pos=nx.spring_layout(g)\nnx.draw_networkx_nodes(g, pos)\nnx.draw_networkx_labels(g, pos)\nnx.draw_networkx_edges(g,pos)\nnx.draw_networkx_edge_labels(g,pos,edge_labels={x:g[x[0]][x[1]]['weight'] for x in g.edges})\nplt.axis('off')\nplt.show()\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/qIlli.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qIlli.png\" alt=\"graph\"></a></p>\n\n<p>Unfortunately, I don't think that networkx (or more precisely: matplotlib) is able to handle parallel edges drawing.</p>\n"}], "owner": {"reputation": 768, "user_id": 2661763, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/d8e00378243dc557318243d0dc5a14ca?s=128&d=identicon&r=PG", "display_name": "qfd", "link": "https://stackoverflow.com/users/2661763/qfd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 473, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525376717, "creation_date": 1519852658, "last_edit_date": 1525376717, "question_id": 49038711, "link": "https://stackoverflow.com/questions/49038711/draw-parallel-edges-using-networkx", "title": "draw parallel edges using networkx", "body": "<p>Below is a very simple example</p>\n\n<pre><code>import networkx as nx\nimport matplotlib.pyplot as plt\n\ng = nx.DiGraph()\ng.add_nodes_from([1,2,3])\ng.add_edge(1,2, weight = 1)\ng.add_edge(1,3, weight = 1)\ng.add_edge(2,1, weight = 2)\nnx.draw(g,with_labels=True)\nplt.draw()\nplt.show()\n</code></pre>\n\n<p>I would like to add the weight label to the edge and show parallel edges for 1,2 and 2,1  how do I do this. I am using jupyter notebook.</p>\n\n<p>many thanks!</p>\n"}, {"tags": ["python", "python-3.x", "list"], "comments": [{"owner": {"reputation": 2932, "user_id": 5770658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e3e0c78a33e4620eb8436e182535e2?s=128&d=identicon&r=PG&f=1", "display_name": "internet_user", "link": "https://stackoverflow.com/users/5770658/internet-user"}, "edited": false, "score": 0, "creation_date": 1519852626, "post_id": 49038697, "comment_id": 85082663, "body": "Use a list of layers."}, {"owner": {"reputation": 2932, "user_id": 5770658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e3e0c78a33e4620eb8436e182535e2?s=128&d=identicon&r=PG&f=1", "display_name": "internet_user", "link": "https://stackoverflow.com/users/5770658/internet-user"}, "edited": false, "score": 4, "creation_date": 1519852664, "post_id": 49038697, "comment_id": 85082685, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1373164/how-do-i-create-a-variable-number-of-variables\">How do I create a variable number of variables?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1208, "user_id": 5364318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f77cb664c91d85e9dcf786d3ac163d8d?s=128&d=identicon&r=PG&f=1", "display_name": "Reck", "link": "https://stackoverflow.com/users/5364318/reck"}, "is_accepted": false, "score": 0, "last_activity_date": 1519853019, "creation_date": 1519853019, "answer_id": 49038806, "question_id": 49038697, "link": "https://stackoverflow.com/questions/49038697/python-list-with-variable-in-reference/49038806#49038806", "title": "Python list with variable in reference", "body": "<p>This is what you should do.</p>\n\n<pre><code>layers = [[\".\", \".\", \".\", \".\", \".\"],\n          [\".\", \".\", \".\", \".\", \".\"],\n          [\".\", \".\", \"\u25a0\", \".\", \".\"],\n          [\".\", \".\", \".\", \".\", \".\"],\n          [\".\", \".\", \".\", \".\", \".\"]]\n\n&gt;&gt; playerx = 3\n&gt;&gt; playery = 4\n&gt;&gt; layers[playery - 1][playerx - 1]= \".\"\n&gt;&gt; layers[playery][playerx - 1]= \".\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8896785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b163a75364612e09e406d10f9f0d83b3?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/8896785/henry"}, "is_accepted": false, "score": 0, "last_activity_date": 1519854242, "creation_date": 1519854242, "answer_id": 49039101, "question_id": 49038697, "link": "https://stackoverflow.com/questions/49038697/python-list-with-variable-in-reference/49039101#49039101", "title": "Python list with variable in reference", "body": "<p>Create 2D array like this:</p>\n\n<pre><code>layers= [layer1, layer2, layer3, layer4, layer5]\n</code></pre>\n\n<p>and if you want to get \"\u25a0\" you should type:</p>\n\n<pre><code>layers[2][2]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8652159, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Hsy-xFzamEs/AAAAAAAAAAI/AAAAAAAAHBw/aHvZfgV5Fts/photo.jpg?sz=128", "display_name": "Reocha Kelly", "link": "https://stackoverflow.com/users/8652159/reocha-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1519854242, "creation_date": 1519852588, "last_edit_date": 1519852701, "question_id": 49038697, "link": "https://stackoverflow.com/questions/49038697/python-list-with-variable-in-reference", "title": "Python list with variable in reference", "body": "<p>I have numbered my lists layer1, layer2 ...\nI want to use a variable (playery) as the number in the lists name when calling it, so if playery was equal to 4, the list addressed would be layer4</p>\n\n<pre><code>layer1 = [\".\", \".\", \".\", \".\", \".\"]\nlayer2 = [\".\", \".\", \".\", \".\", \".\"]\nlayer3 = [\".\", \".\", \"\u25a0\", \".\", \".\"]\nlayer4 = [\".\", \".\", \".\", \".\", \".\"]\nlayer5 = [\".\", \".\", \".\", \".\", \".\"]\nplayerx = (3)\nplayery = (4)\n(layer(playery - 1))[playerx-1]= (\".\")\n\n(layer(playery))[playerx-1]= (\"\u25a0\")\n</code></pre>\n\n<p>This is what I have so far, but it doesn't work</p>\n"}, {"tags": ["python", "cntk"], "answers": [{"tags": [], "owner": {"reputation": 374, "user_id": 6373131, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-p33FmUdtm4s/AAAAAAAAAAI/AAAAAAAAAI0/vePB24y7BFY/photo.jpg?sz=128", "display_name": "Arko Chakraborti", "link": "https://stackoverflow.com/users/6373131/arko-chakraborti"}, "is_accepted": false, "score": 6, "last_activity_date": 1520017399, "creation_date": 1520017399, "answer_id": 49075733, "question_id": 49038692, "link": "https://stackoverflow.com/questions/49038692/how-to-train-a-network-with-multiple-output-layers-in-cntk/49075733#49075733", "title": "How to train a network with multiple output layers in CNTK?", "body": "<p>I was able to figure it out myself. For such a scenario, we have to define separate <code>output variables</code> for each of the branches and then feed the data to them separately.</p>\n\n<p>Consider that <code>y</code> is a list of 4 elements that are supposed to be the output of the neural network. We would define our data dictionary as shown</p>\n\n<p><code>\ntrainer.train_minibatch(\n    {\n        input_placeholder: x,\n        output_placeholder0: y[0],\n        output_placeholder1: y[1],\n        output_placeholder2: y[2],\n        output_placeholder3: y[3]\n    }\n)\n</code></p>\n\n<p>Other variables like loss, classification error can be a simple sum over the individual losses (This will depend on the specific use case)</p>\n\n<p>For more details have a look at this <a href=\"https://github.com/Arkoprabho/BSCaptcha/blob/master/CNTKModel.ipynb\" rel=\"noreferrer\">notebook</a> where I have created the above network, fed the data and trained the model.</p>\n"}], "owner": {"reputation": 374, "user_id": 6373131, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-p33FmUdtm4s/AAAAAAAAAAI/AAAAAAAAAI0/vePB24y7BFY/photo.jpg?sz=128", "display_name": "Arko Chakraborti", "link": "https://stackoverflow.com/users/6373131/arko-chakraborti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1520017399, "creation_date": 1519852579, "question_id": 49038692, "link": "https://stackoverflow.com/questions/49038692/how-to-train-a-network-with-multiple-output-layers-in-cntk", "title": "How to train a network with multiple output layers in CNTK?", "body": "<p>Objective: To train a neural network as shown in the image below, for an image classification task. (Input dimension can be seen in the image.)</p>\n\n<p><a href=\"https://i.stack.imgur.com/KdaZ2.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/KdaZ2.png\" alt=\"\"></a></p>\n\n<p>I have been able to create the network, but am facing problems below:</p>\n\n<ol>\n<li>Specifying the loss and classification error functions.</li>\n<li>Specifying the output variable to be fed to <code>train_minibatch</code> dictionary.</li>\n</ol>\n\n<p>I am using a generator to feed the data to the network, and thus using <code>train_minibatch</code> to feed the data. The output of this generator are the input images, and a list of 4 items containing the 1 hot encoded labels.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 0, "creation_date": 1519852838, "post_id": 49038678, "comment_id": 85082777, "body": "<code>grep</code> should work just fine with normal python console output :) but that&#39;s unrelated to your main question, which is to stop said logs in the first place."}, {"owner": {"reputation": 111, "user_id": 9425774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6bcacdc8d37e7659b389254c7960c0c?s=128&d=identicon&r=PG&f=1", "display_name": "G. Ballegeer", "link": "https://stackoverflow.com/users/9425774/g-ballegeer"}, "reply_to_user": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 0, "creation_date": 1519852962, "post_id": 49038678, "comment_id": 85082856, "body": "I&#39;ve tried to use python3 app.py | grep -v -i &quot;post&quot; and it still gave me those messages."}, {"owner": {"reputation": 1726, "user_id": 1429658, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/fecbd8a5bea71e1103c82bcc4eb16237?s=128&d=identicon&r=PG", "display_name": "Litty", "link": "https://stackoverflow.com/users/1429658/litty"}, "edited": false, "score": 0, "creation_date": 1519853357, "post_id": 49038678, "comment_id": 85083061, "body": "I don&#39;t know much about werkzeug, is this logger supposed to be writing to a file or stdout / stderr? grep will only operate on the latter."}, {"owner": {"reputation": 171, "user_id": 7373458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df09efb5b716481645dbd73b5695e0da?s=128&d=identicon&r=PG&f=1", "display_name": "brc", "link": "https://stackoverflow.com/users/7373458/brc"}, "edited": false, "score": 0, "creation_date": 1519993016, "post_id": 49038678, "comment_id": 85142737, "body": "try to place this line before &#39;werkzeug&#39; logger initiation -  logging.basicConfig(level=logging.DEBUG)"}, {"owner": {"reputation": 2180, "user_id": 3855999, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/26af4b33a36bd35eea4fed5672fe4778?s=128&d=identicon&r=PG&f=1", "display_name": "el323", "link": "https://stackoverflow.com/users/3855999/el323"}, "edited": false, "score": 0, "creation_date": 1557304529, "post_id": 49038678, "comment_id": 98715608, "body": "@G.Ballegeer Did you get it fixed? I am facing the same issue."}], "answers": [{"tags": [], "owner": {"reputation": 13910, "user_id": 98057, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f3ba85799ed78f87eaf29dea4667f6d4?s=128&d=identicon&r=PG", "display_name": "Andr&#233; Laszlo", "link": "https://stackoverflow.com/users/98057/andr%c3%a9-laszlo"}, "is_accepted": false, "score": 1, "last_activity_date": 1569245202, "last_edit_date": 1569245202, "creation_date": 1569240241, "answer_id": 58062042, "question_id": 49038678, "link": "https://stackoverflow.com/questions/49038678/cant-disable-flask-werkzeug-logging/58062042#58062042", "title": "Can&#39;t disable flask/werkzeug logging", "body": "<p>The quick answer is to pass <code>log=None</code> when you create your <code>WSGIServer</code>:</p>\n\n<pre><code>pywsgi.WSGIServer(('', 5000), app, log=None).serve_forever()\n</code></pre>\n\n<p>The gevent WSGI server logging is apparently a bit special <a href=\"http://www.gevent.org/api/gevent.pywsgi.html#gevent.pywsgi.LoggingLogAdapter\" rel=\"nofollow noreferrer\">according to the documentation</a>:</p>\n\n<blockquote>\n  <p>[...] loggers are likely to not be gevent-cooperative. For example, the socket and syslog handlers use the socket module in a way that can block, and most handlers acquire threading locks.</p>\n</blockquote>\n\n<p>If you want to have more control over the gevent WSGI server logging, you can pass in your own logger (and <code>error_log</code>). Just make sure to wrap it in a <code>LoggingLogAdapter</code> first:</p>\n\n<pre><code>from gevent.pywsgi import LoggingLogAdapter\nserver_log = LoggingLogAdapter(logging.getLogger(__file__))\n# server_log.disabled = True  # Now you can disable it like a normal log\n...\npywsgi.WSGIServer(('', 5000), app, log=server_log).serve_forever()\n</code></pre>\n\n<hr>\n\n<p>As a side note, I checked which loggers were instantiated with this little patch to <code>logging.getLogger</code>. Maybe it will be helpful for others trying to understand where log output comes from:</p>\n\n<pre><code>import logging\n\nold_getLogger = logging.getLogger\n\ndef getLogger(*args, **kwargs):\n    print('Getting logger', args, kwargs)\n    return old_getLogger(*args, **kwargs)\n\nlogging.getLogger = getLogger\n</code></pre>\n\n<p>The output was something like:</p>\n\n<pre><code>Getting logger ('concurrent.futures',) {}\nGetting logger ('asyncio',) {}\nGetting logger ('engineio.client',) {}\nGetting logger ('engineio.server',) {}\nGetting logger ('socketio.client',) {}\nGetting logger ('socketio',) {}\nGetting logger ('socketio',) {}\nGetting logger ('socketio',) {}\nGetting logger ('socketio.server',) {}\nGetting logger ('socketio.client',) {}\nGetting logger () {}\nGetting logger ('main',) {}\nGetting logger ('flask.app',) {}\nGetting logger ('flask',) {}\nGetting logger ('werkzeug',) {}\nGetting logger ('wsgi',) {}\n</code></pre>\n\n<p>But of course disabling any of these loggers doesn't work since <a href=\"https://github.com/gevent/gevent/blob/v1.2a2/src/gevent/pywsgi.py#L1416\" rel=\"nofollow noreferrer\">the default gevent WSGI logger is just printing directly to <code>stderr</code></a>.</p>\n"}], "owner": {"reputation": 111, "user_id": 9425774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6bcacdc8d37e7659b389254c7960c0c?s=128&d=identicon&r=PG&f=1", "display_name": "G. Ballegeer", "link": "https://stackoverflow.com/users/9425774/g-ballegeer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3488, "favorite_count": 1, "answer_count": 1, "score": 10, "last_activity_date": 1569245202, "creation_date": 1519852483, "last_edit_date": 1519987015, "question_id": 49038678, "link": "https://stackoverflow.com/questions/49038678/cant-disable-flask-werkzeug-logging", "title": "Can&#39;t disable flask/werkzeug logging", "body": "<p>I have been trying for way to long to disable the logger of werkzeug. I'm trying to create a socketio server in python but werkzeug keeps logging all POST and GET requests. It's really annoying because my logging get's flooded. </p>\n\n<pre><code>async_mode = 'gevent'\nimport logging\n\nfrom flask import Flask, render_template\nimport socketio\n\n\nsio = socketio.Server(logger=False, async_mode=async_mode)\napp = Flask(__name__)\n\n\napp.wsgi_app = socketio.Middleware(sio, app.wsgi_app)\napp.config['SECRET_KEY'] = 'secret!'\nthread = None\n\napp.logger.disabled = True\nlog = logging.getLogger('werkzeug')\nlog.disabled = True\n\n\n@app.route('/')\ndef index():\n    #global thread\n    #if thread is None:\n    #    thread = sio.start_background_task(background_thread)\n    return render_template('index.html')\n\n\n\n@sio.on('answer', namespace='/test')\ndef test_answer(sid, message):\n    print(message)\n\n\nif __name__ == '__main__':\n    if sio.async_mode == 'threading':\n        # deploy with Werkzeug\n        app.run(threaded=True)\n    elif sio.async_mode == 'eventlet':\n        # deploy with eventlet\n        import eventlet\n        import eventlet.wsgi\n        eventlet.wsgi.server(eventlet.listen(('', 5000)), app)\n    elif sio.async_mode == 'gevent':\n        # deploy with gevent\n        from gevent import pywsgi\n        try:\n            from geventwebsocket.handler import WebSocketHandler\n            websocket = True\n        except ImportError:\n            websocket = False\n        if websocket:\n            pywsgi.WSGIServer(('', 5000), app,\n                              handler_class=WebSocketHandler).serve_forever()\n        else:\n            pywsgi.WSGIServer(('', 5000), app).serve_forever()\n    elif sio.async_mode == 'gevent_uwsgi':\n        print('Start the application through the uwsgi server. Example:')\n        #print('uwsgi --http :5000 --gevent 1000 --http-websockets --master '\n        #      '--wsgi-file app.py --callable app')\n    else:\n        print('Unknown async_mode: ' + sio.async_mode)\n</code></pre>\n\n<p>Everywhere is see this as the solution but it doesn't stop werkzeug from logging.</p>\n\n<pre><code>app.logger.disabled = True\nlog = logging.getLogger('werkzeug')\nlog.disabled = True\n</code></pre>\n\n<p>These are the kind of messages:</p>\n\n<pre><code>::1 - - [2018-02-28 22:09:03] \"GET /socket.io/?EIO=3&amp;transport=polling&amp;t=M7UFq6u HTTP/1.1\" 200 345 0.000344\n::1 - - [2018-02-28 22:09:03] \"POST /socket.io/?EIO=3&amp;transport=polling&amp;t=M7UFq7A&amp;sid=daaf8a43faf848a7b2ae185802e7f164 HTTP/1.1\" 200 195 0.000284\n::1 - - [2018-02-28 22:09:03] \"GET /socket.io/?EIO=3&amp;transport=polling&amp;t=M7UFq7B&amp;sid=daaf8a43faf848a7b2ae185802e7f164 HTTP/1.1\" 200 198 0.000153\n::1 - - [2018-02-28 22:10:03] \"GET /socket.io/?EIO=3&amp;transport=polling&amp;t=M7UFq7N&amp;sid=daaf8a43faf848a7b2ae185802e7f164 HTTP/1.1\" 400 183 60.058020\n</code></pre>\n\n<p>I've tried to set the level to only critical, but that didn't help either. I've also tried to use grep to suppress the messages but it seems that grep doesn't work with python console output.</p>\n\n<p>Edit: I'm using python 3.5.2 on linux but had the same problem on 3.6 on windows. werkzeug is 0.14.1, flaks is 0.12.2 and python-socketio is 1.8.4</p>\n\n<p>Edit2: I was able to fix the problem by using grep, the problem was that werkzeug send everything to stderr which should be handled differently in the command line.</p>\n\n<p><code>python app.py 2&gt;&amp;1 | grep -v 'GET\\|POST</code>'</p>\n\n<p>This gives the result I wanted.</p>\n"}, {"tags": ["python", "xml-rpc", "odoo"], "answers": [{"comments": [{"owner": {"reputation": 3880, "user_id": 5328289, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0e0e88b500a567f9572d0f8fe4e99405?s=128&d=identicon&r=PG&f=1", "display_name": "M.E.", "link": "https://stackoverflow.com/users/5328289/m-e"}, "edited": false, "score": 0, "creation_date": 1519895462, "post_id": 49044171, "comment_id": 85096862, "body": "Whit above code I get base64 with CR+LF characters (\\n), and that it is not accepted as src. I had to remove those CR+LF (\\n) before using data as src."}, {"owner": {"reputation": 3880, "user_id": 5328289, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0e0e88b500a567f9572d0f8fe4e99405?s=128&d=identicon&r=PG&f=1", "display_name": "M.E.", "link": "https://stackoverflow.com/users/5328289/m-e"}, "edited": false, "score": 0, "creation_date": 1519895574, "post_id": 49044171, "comment_id": 85096940, "body": "I saw the jsfiddle, I will try not to remove the CR+LF characters returned by Odoo and see what happens."}], "tags": [], "owner": {"reputation": 884, "user_id": 5063736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3184d795f53ea05e5075e50bfd6fcf16?s=128&d=identicon&r=PG&f=1", "display_name": "PyMaster", "link": "https://stackoverflow.com/users/5063736/pymaster"}, "is_accepted": true, "score": 2, "last_activity_date": 1519887398, "creation_date": 1519887398, "answer_id": 49044171, "question_id": 49038670, "link": "https://stackoverflow.com/questions/49038670/odoo-10-xmlrpc-retrieve-image/49044171#49044171", "title": "Odoo 10 XMLRPC - Retrieve Image", "body": "<p>Basically you get the base64 string from the odoo. You don't need to modify it just add the <code>data:image/jpeg;base64,</code> content before the base64 string. Now you have to add whole updated string in image tag as below.</p>\n\n<pre><code>&lt;img src=\"data:image/jpeg;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA\nAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO\n    9TXL0Y4OHwAAAABJRU5ErkJggg==\" alt=\"Red dot\" /&gt;\n</code></pre>\n\n<p>Also Check this <a href=\"https://jsfiddle.net/Xadvz/7883/\" rel=\"nofollow noreferrer\">https://jsfiddle.net/Xadvz/7883/</a> example in which I have created image from the base64 string of demo product \"Ink Cartridge\" for further reference.</p>\n\n<p>I hope this will help you!</p>\n"}, {"comments": [{"owner": {"reputation": 3880, "user_id": 5328289, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0e0e88b500a567f9572d0f8fe4e99405?s=128&d=identicon&r=PG&f=1", "display_name": "M.E.", "link": "https://stackoverflow.com/users/5328289/m-e"}, "edited": false, "score": 0, "creation_date": 1519895509, "post_id": 49044172, "comment_id": 85096892, "body": "Need was to use in html tag, not store to file."}], "tags": [], "owner": {"reputation": 13580, "user_id": 1312904, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/oAq52.png?s=128&g=1", "display_name": "Atul Arvind", "link": "https://stackoverflow.com/users/1312904/atul-arvind"}, "is_accepted": false, "score": 0, "last_activity_date": 1519887400, "creation_date": 1519887400, "answer_id": 49044172, "question_id": 49038670, "link": "https://stackoverflow.com/questions/49038670/odoo-10-xmlrpc-retrieve-image/49044172#49044172", "title": "Odoo 10 XMLRPC - Retrieve Image", "body": "<p>you can save the <strong>base64</strong> data into image using code.</p>\n\n<pre><code>rec = models.execute_kw(db, uid, password, 'product.template', 'read', [[id]], {'fields': ['id', 'name', 'image']})\nimg_data = rec[0]['image']\ndata_id = rec[0]['id']\nfh = open(\"/tmp/product_image-%d.png\" %(data_id), \"wb\") #you can use imghdr to identify the image type\ndecoded = img_data.decode('base64')\nfh.write(decoded)\nfh.close()\n</code></pre>\n\n<p>and after that you can write yout code to use the file path in <strong></strong> tag.</p>\n"}], "owner": {"reputation": 3880, "user_id": 5328289, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0e0e88b500a567f9572d0f8fe4e99405?s=128&d=identicon&r=PG&f=1", "display_name": "M.E.", "link": "https://stackoverflow.com/users/5328289/m-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1017, "favorite_count": 0, "accepted_answer_id": 49044171, "answer_count": 2, "score": 0, "last_activity_date": 1519887400, "creation_date": 1519852437, "question_id": 49038670, "link": "https://stackoverflow.com/questions/49038670/odoo-10-xmlrpc-retrieve-image", "title": "Odoo 10 XMLRPC - Retrieve Image", "body": "<p>I am trying to retrieve image from XMLRPC.</p>\n\n<p>I do:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>record = api.execute_kw(db, uid, pwd, 'product.template', 'read', [[id]], {'fields': ['id', 'name', 'image']})\nsub_record = dict((k, record[0][k]) for k in ('id', 'name', 'image'))\nprint sub_record['image']\n</code></pre>\n\n<p>If I print the image using <code>print sub_record['image']</code> then I get:</p>\n\n<pre><code>[...]\neSYH+sOdc3UW9XB1SzWvVCtcI0PfKdoYe9Suf/3116+mMGyhLTg/yedEprt6nOI3eNOxT9t6SzMN\nCj8tT5Lp9eqmsvmu1reytnROwdFvdWvkwsLihqqJ0+49ZW8nu9tzDb+RkT2f5tWpjpf8yZaJzyYW\nSPN8f22Vnp9pr+mA7KzqwltQk8QGT02ViY6bpvBdTZqJH5uafxJcHFzPp8nB6KTYUlMq4jS3mAkm\n[...]\n</code></pre>\n\n<p>So basically several carriage returns are inserted in the middle of the image base64 string.</p>\n\n<p>How can I use that string to display it in an <code>&lt;img&gt;</code> html tag?</p>\n\n<p>Do I have to remove these carriage returns first? </p>\n"}, {"tags": ["python", "python-3.x", "numpy"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1519852487, "post_id": 49038659, "comment_id": 85082584, "body": "Can you assume that fill is the correct length?"}, {"owner": {"reputation": 297, "user_id": 5140281, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9907fe35abb44649b6c6293b0dde0659?s=128&d=identicon&r=PG&f=1", "display_name": "james42", "link": "https://stackoverflow.com/users/5140281/james42"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1519852642, "post_id": 49038659, "comment_id": 85082671, "body": "Yes, indeed :) I have created the <code>fill</code> array beforehand."}], "answers": [{"tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 3, "last_activity_date": 1519852706, "creation_date": 1519852706, "answer_id": 49038721, "question_id": 49038659, "link": "https://stackoverflow.com/questions/49038659/how-to-substitute-nans-in-a-numpy-array-with-elements-in-another-list/49038721#49038721", "title": "How to substitute NaNs in a numpy array with elements in another list", "body": "<p>Does this work for you?</p>\n\n<pre><code>train = np.array([2, 4, 4, 8, 32, np.NaN, 12, np.NaN])\nfill = [1,3]\ntrain[np.isnan(train)] = fill\nprint(train)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[  2.   4.   4.   8.  32.   1.  12.   3.]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 1, "last_activity_date": 1519852958, "creation_date": 1519852958, "answer_id": 49038786, "question_id": 49038659, "link": "https://stackoverflow.com/questions/49038659/how-to-substitute-nans-in-a-numpy-array-with-elements-in-another-list/49038786#49038786", "title": "How to substitute NaNs in a numpy array with elements in another list", "body": "<p>The following should work even if the size of <code>fill</code> doesn't match the number of <code>nan</code>s</p>\n\n<pre><code>&gt;&gt;&gt; x1 = np.random.randint(0, 4, (10,))\n&gt;&gt;&gt; x1 = x1/x1 + x1\n&gt;&gt;&gt; \n&gt;&gt;&gt; x1\narray([ 4., nan, nan,  4., nan,  3., nan,  2.,  3.,  4.])\n&gt;&gt;&gt; \n&gt;&gt;&gt; fill = np.arange(3)\n&gt;&gt;&gt; \n&gt;&gt;&gt; loc, = np.where(np.isnan(x1))\n&gt;&gt;&gt; \n&gt;&gt;&gt; x1[loc[:len(fill)]] = fill[:len(loc)]\n&gt;&gt;&gt; \n&gt;&gt;&gt; x1\narray([ 4.,  0.,  1.,  4.,  2.,  3., nan,  2.,  3.,  4.])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "is_accepted": false, "score": 1, "last_activity_date": 1519853125, "creation_date": 1519853125, "answer_id": 49038825, "question_id": 49038659, "link": "https://stackoverflow.com/questions/49038659/how-to-substitute-nans-in-a-numpy-array-with-elements-in-another-list/49038825#49038825", "title": "How to substitute NaNs in a numpy array with elements in another list", "body": "<p>The answer from @chrisz is the correct one, because you have the power of numpy, so use it :-)</p>\n\n<p>But if you still want to do it the way that you started, you can fix the code like this:</p>\n\n<pre><code>import numpy as np\n\nx1 = [np.NaN, 2, 3, 4, 5, np.NaN, 7, 8, np.NaN, 10] \nfill = [1, 6, 9]\ni = 0\n\nfor j in range(0, len(x1)):\n    if np.isnan(x1[j]).any():\n        x1[j] = fill[i]\n        i += 1\n\nprint x1\n</code></pre>\n\n<p>You were almost there, you just needed to count correctly the index of the fill (maybe adding some check for an out of bounds index).</p>\n\n<p>But, as I said, definitely go the numpy way, it's faster and cleaner.</p>\n"}], "owner": {"reputation": 297, "user_id": 5140281, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9907fe35abb44649b6c6293b0dde0659?s=128&d=identicon&r=PG&f=1", "display_name": "james42", "link": "https://stackoverflow.com/users/5140281/james42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 743, "favorite_count": 1, "accepted_answer_id": 49038721, "answer_count": 3, "score": -2, "last_activity_date": 1519853125, "creation_date": 1519852408, "question_id": 49038659, "link": "https://stackoverflow.com/questions/49038659/how-to-substitute-nans-in-a-numpy-array-with-elements-in-another-list", "title": "How to substitute NaNs in a numpy array with elements in another list", "body": "<p>I'm facing an issue with a basic substitution. I have two arrays, one of them contains numbers and NaN, and the other one numbers that are supposed to replace the NaN, obviously ordered as I wish. As an example:\n<code>x1 = [NaN, 2, 3, 4, 5, NaN, 7, 8, NaN, 10]</code> and\n<code>fill = [1, 6, 9]</code> and I want to obtain by index-wise replacement an array like:\n<code>x1_final = [1, 2, 3, 4, 5, NaN, 7, 8, NaN, 10]</code></p>\n\n<p>I have written this idiotic line of code, which substitutes all the NaN with the first element of the <code>fill</code> array:</p>\n\n<pre><code>for j in range(0,len(x1)):\n    if np.isnan(x1[j]).any():\n        for i in range(0,len(fill)):\n            x1[j] = fill[i]\n</code></pre>\n\n<p>How do I manage to achieve my result? </p>\n"}, {"tags": ["python", "sumo"], "answers": [{"comments": [{"owner": {"reputation": 4557, "user_id": 2829961, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/688139e74e7082499022c09f1e9aee4e?s=128&d=identicon&r=PG&f=1", "display_name": "umair durrani", "link": "https://stackoverflow.com/users/2829961/umair-durrani"}, "edited": false, "score": 0, "creation_date": 1519911581, "post_id": 49046986, "comment_id": 85106198, "body": "Thanks for your answer. I tried <code>adoID[0]</code> after removing the data for <code>car2</code>. It worked. However, if I keep the data for both vehicles along with <code>adoID[0]</code>, I get the error <code>required argument is not a float</code>."}, {"owner": {"reputation": 2470, "user_id": 5731587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/450b8f80ec583561be1877a34a448350?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5731587/michael"}, "reply_to_user": {"reputation": 4557, "user_id": 2829961, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/688139e74e7082499022c09f1e9aee4e?s=128&d=identicon&r=PG&f=1", "display_name": "umair durrani", "link": "https://stackoverflow.com/users/2829961/umair-durrani"}, "edited": false, "score": 1, "creation_date": 1519916078, "post_id": 49046986, "comment_id": 85109158, "body": "I am not sure what your code is trying to achieve. Do you want to feed the data for both cars into traci or only for one or first one and then the other? If you want to do both simultaneously, my approach would be to simply sort the data by time and then apply each entry. There is no groupBy needed."}, {"owner": {"reputation": 4557, "user_id": 2829961, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/688139e74e7082499022c09f1e9aee4e?s=128&d=identicon&r=PG&f=1", "display_name": "umair durrani", "link": "https://stackoverflow.com/users/2829961/umair-durrani"}, "edited": false, "score": 0, "creation_date": 1519919486, "post_id": 49046986, "comment_id": 85111664, "body": "Thanks. I wanted to feed speeds of both cars simultaneously. As you suggested, I simply used <code>for loop</code> without <code>groupby</code> and it is running without any problem. Just curious, is there a more elegant way to feed speeds of multiple vehicles? I have 13 in total."}, {"owner": {"reputation": 2470, "user_id": 5731587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/450b8f80ec583561be1877a34a448350?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5731587/michael"}, "reply_to_user": {"reputation": 4557, "user_id": 2829961, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/688139e74e7082499022c09f1e9aee4e?s=128&d=identicon&r=PG&f=1", "display_name": "umair durrani", "link": "https://stackoverflow.com/users/2829961/umair-durrani"}, "edited": false, "score": 1, "creation_date": 1519935855, "post_id": 49046986, "comment_id": 85120920, "body": "I am afraid no. There is no such thing as setMultipleSpeeds and while it would be certainly not hard to implement it is a little against the usual TraCI philosophy of addressing each object and its properties individually."}], "tags": [], "owner": {"reputation": 2470, "user_id": 5731587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/450b8f80ec583561be1877a34a448350?s=128&d=identicon&r=PG&f=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/5731587/michael"}, "is_accepted": true, "score": 1, "last_activity_date": 1519898101, "creation_date": 1519898101, "answer_id": 49046986, "question_id": 49038658, "link": "https://stackoverflow.com/questions/49038658/how-to-set-speeds-using-a-pandas-dataframe-in-sumo-with-traci/49046986#49046986", "title": "How to set speeds using a pandas dataframe in SUMO with TraCI?", "body": "<p>The problem is not in the traci part but in your adoID which is an array but should be a single id (a string) so you should probably just take the first element of that array.</p>\n"}], "owner": {"reputation": 4557, "user_id": 2829961, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/688139e74e7082499022c09f1e9aee4e?s=128&d=identicon&r=PG&f=1", "display_name": "umair durrani", "link": "https://stackoverflow.com/users/2829961/umair-durrani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 49046986, "answer_count": 1, "score": 0, "last_activity_date": 1563528380, "creation_date": 1519852407, "question_id": 49038658, "link": "https://stackoverflow.com/questions/49038658/how-to-set-speeds-using-a-pandas-dataframe-in-sumo-with-traci", "title": "How to set speeds using a pandas dataframe in SUMO with TraCI?", "body": "<h1>Objective</h1>\n\n<p>I want to use predefined speed vectors for individual vehicles to move them in SUMO simulation.  </p>\n\n<h1>Data and files</h1>\n\n<p>There are 3 vehicles in the simulation. For 2 of those vehicles, I want to specify the speeds. The speed data is created in <code>Python</code> as follows:  </p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nfrom pandas import Series, DataFrame\n\ndata = {'ADO_name':['car1','car1','car1','car2','car2','car2'],\n        'Time_sec':[0,1,2,0,1,2],\n        'Speed.kph':[50,51,52,0,0,52]}\ndframe = DataFrame(data)  \n</code></pre>\n\n<p>The route, network and configuration files for this simulation are available in a folder here:  <a href=\"https://1drv.ms/f/s!AsMFpkDhWcnw61EI5wR6hPaaRBJI\" rel=\"nofollow noreferrer\">https://1drv.ms/f/s!AsMFpkDhWcnw61EI5wR6hPaaRBJI</a><br>\nI have also put the code in a <code>Script.py</code> file in the same folder.  </p>\n\n<h1>What I tried</h1>\n\n<p>Following is the code that I've been trying to use, along with the error:  </p>\n\n<pre><code>#start sumo\nsumoBinary = \"C:/Users/Quinton/Desktop/Documents/Sumo/bin/sumo-gui\"\nsumoCmd = [sumoBinary, \"-c\", \"C:/Users/Quinton/Desktop/Example2/example2.sumocfg\"]\n\n\n#importing libraries\nimport traci\nimport traci.constants as tc\ntraci.start(sumoCmd)\n\n#subscribing to variables that we want to be printed once the copy has run\ntraci.vehicle.subscribe(\"car1\", (tc.VAR_SPEED, tc.VAR_ROAD_ID, tc.VAR_LANE_ID, tc.VAR_LANEPOSITION))\ntraci.vehicle.subscribe(\"car2\", (tc.VAR_SPEED, tc.VAR_ROAD_ID, tc.VAR_LANE_ID, tc.VAR_LANEPOSITION))\ntraci.vehicle.subscribe(\"car3\", (tc.VAR_SPEED, tc.VAR_ROAD_ID, tc.VAR_LANE_ID, tc.VAR_LANEPOSITION))\n\n#using traci.movetoXY to position car1 and car2 on network\ntraci.vehicle.moveToXY(vehID=\"car1\", edgeID=\"highway1.1\", lane=0, x=1000, y=-3.3, keepRoute=0)\ntraci.vehicle.moveToXY(vehID=\"car2\", edgeID=\"highway1.1\", lane=1, x=700, y=3.3, keepRoute=0)\n\n#disallows car1 and car2 from changing lanes during simulation\ntraci.vehicle.setLaneChangeMode(vehID=\"car1\", lcm=512)\ntraci.vehicle.setLaneChangeMode(vehID=\"car2\", lcm=512)\n\n\n#importing python modules\nimport numpy as np\nimport pandas as pd\nfrom pandas import Series, DataFrame\n\n#creating speed data\ndata = {'ADO_name':['car1','car1','car1','car2','car2','car2'],\n        'Time_sec':[0,1,2,0,1,2],\n        'Speed.kph':[50,51,52,0,0,52]}\ndframe = DataFrame(data)\n#print(dframe)\n\nstep = 0\n\n#running traci\nfor ado in dframe.groupby('ADO_name'):\n  ado_name = ado[1][\"ADO_name\"]\n  adoID = ado_name.unique()\n\n  while step &lt;= 2:\n    traci.simulationStep()\n    traci.vehicle.setSpeed(adoID, ado[1][ado[1].Time_sec == step]['Speed.kph'])\n    print (traci.vehicle.getSubscriptionResults(\"car1\"), traci.vehicle.getSubscriptionResults(\"car2\"))\n\n  step += 1  \n</code></pre>\n\n<h1>Error:</h1>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\Quinton\\AppData\\Local\\Temp\\Rtmp6jCqR4\\chunk-code-16888822790.txt\", line 41, in &lt;module&gt;\n    traci.vehicle.setSpeed(adoID, ado[1][ado[1].Time_sec == step]['Speed.kph'])\n  File \"C:\\Program Files (x86)\\DLR\\Sumo\\tools\\traci\\_vehicle.py\", line 927, in setSpeed\n    tc.CMD_SET_VEHICLE_VARIABLE, tc.VAR_SPEED, vehID, speed)\n  File \"C:\\Program Files (x86)\\DLR\\Sumo\\tools\\traci\\connection.py\", line 139, in _sendDoubleCmd\n    self._beginMessage(cmdID, varID, objID, 1 + 8)\n  File \"C:\\Program Files (x86)\\DLR\\Sumo\\tools\\traci\\connection.py\", line 127, in _beginMessage\n    self._packString(objID, varID)\n  File \"C:\\Program Files (x86)\\DLR\\Sumo\\tools\\traci\\connection.py\", line 66, in _packString\n    self._string += struct.pack(\"!Bi\", pre, len(s)) + s.encode(\"latin1\")\nAttributeError: 'numpy.ndarray' object has no attribute 'encode'  \n</code></pre>\n\n<h1>Notes</h1>\n\n<p>From my understanding, the problem is somewhere in <code>#running traci</code> section of the code. I tested this code without invoking <code>TraCI</code> and using <code>print()</code> instead of  <code>traci.vehicle.setSpeed()</code> and got no error. So, it seems that <code>Python</code> side of things are fine. Could you please help me fixing this problem</p>\n"}, {"tags": ["python", "postgresql", "bigdata", "psycopg2"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 1, "creation_date": 1519853607, "post_id": 49038635, "comment_id": 85083169, "body": "Really, just using <code>format</code> is <i>not</i> the way to create SQL queries. Use parameterization; <code>cursor.execute(&quot;SELECT user_id, created_at FROM cookies WHERE cookie_id = %s ORDER BY created_at DESC;&quot;, (cookie,))</code>. I don&#39;t know if that fixes the error but you&#39;re open to SQL injection and using string formatting is causing you hassle in trying to escape things."}, {"owner": {"reputation": 473, "user_id": 5606344, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/mC21D.png?s=128&g=1", "display_name": "Michal Fa\u0161&#225;nek", "link": "https://stackoverflow.com/users/5606344/michal-fa%c5%a1%c3%a1nek"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1519856212, "post_id": 49038635, "comment_id": 85084393, "body": "Thank you @roganjosh , even though I am working on my thesis on localhost(therefore no injections), it is a valuable input for future, I have rewritten the code as you suggested in all queries.  Hilariously enough, I am at 600 000 objects and still running. You can post this as an answer and once it finishes properly, you will be accepted as a correct solution."}, {"owner": {"reputation": 473, "user_id": 5606344, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/mC21D.png?s=128&g=1", "display_name": "Michal Fa\u0161&#225;nek", "link": "https://stackoverflow.com/users/5606344/michal-fa%c5%a1%c3%a1nek"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1519856934, "post_id": 49038635, "comment_id": 85084684, "body": "Okay, my RAM gave up at 900k, I have to start pickling. Thank you for help."}], "answers": [{"comments": [{"owner": {"reputation": 473, "user_id": 5606344, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/mC21D.png?s=128&g=1", "display_name": "Michal Fa\u0161&#225;nek", "link": "https://stackoverflow.com/users/5606344/michal-fa%c5%a1%c3%a1nek"}, "edited": false, "score": 0, "creation_date": 1519858187, "post_id": 49039725, "comment_id": 85085215, "body": "Now it seems like a very newbie mistake, but it is my first time using Python with an SQL database, I mostly used it with NoSQL databases where this is not that common. Again, thank you for sparing me a lot of headaches with a strange error message."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 473, "user_id": 5606344, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/mC21D.png?s=128&g=1", "display_name": "Michal Fa\u0161&#225;nek", "link": "https://stackoverflow.com/users/5606344/michal-fa%c5%a1%c3%a1nek"}, "edited": false, "score": 1, "creation_date": 1519858574, "post_id": 49039725, "comment_id": 85085391, "body": "@MichalFa\u0161&#225;nek I&#39;d rather present it as a bit of a wrist-slap so you don&#39;t default back to <code>format</code>.... but there are <i>loads</i> of people doing it on here so don&#39;t feel bad :) I&#39;ll preempt an issue... if you use parameterized queries and only pass one parameter, as we did here, make sure you still pass it as a tuple (note, I used <code>(cookie,)</code> with the comma). If you tried <code>(cookie)</code> it will try unpacking each individual character of <code>cookie</code>into the string and complain there aren&#39;t enough binding parameters (<code>%s</code>) to accommodate each individual character."}, {"owner": {"reputation": 473, "user_id": 5606344, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/mC21D.png?s=128&g=1", "display_name": "Michal Fa\u0161&#225;nek", "link": "https://stackoverflow.com/users/5606344/michal-fa%c5%a1%c3%a1nek"}, "edited": false, "score": 0, "creation_date": 1519859372, "post_id": 49039725, "comment_id": 85085659, "body": "that is a nice detail, thank you. I will keep it in mind :) I am still wondering where that funny error line came from, other time when I ran it, it claimed I have error on some html/css line."}], "tags": [], "owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "is_accepted": true, "score": 2, "last_activity_date": 1519857109, "creation_date": 1519857109, "answer_id": 49039725, "question_id": 49038635, "link": "https://stackoverflow.com/questions/49038635/postgres-fails-fetching-data-in-python/49039725#49039725", "title": "Postgres fails fetching data in Python", "body": "<p>It's interesting how often the \"It's a local server so I'm not open to SQL injection\" stance leads to people thinking that string interpolation is somehow easier than a parameterized query. In your case it's ended up with:</p>\n\n<pre><code>'... cookie_id = \\'{}\\''.format(cookie)\n</code></pre>\n\n<p>So you've ended up with something that's less legible and also fails (though from the specific error I don't know exactly how). Use parameterization:</p>\n\n<pre><code>cursor.execute(\"SELECT user_id, created_at FROM cookies WHERE cookie_id = %s ORDER BY created_at DESC;\", (cookie,))\n</code></pre>\n\n<p>Bottom line, <em>do it the correct way all the time</em>. Note, there are cases where you must use string interpolation, e.g. for table names:</p>\n\n<pre><code>cursor.execute(\"SELECT * FROM %s\", (table_name,)) # Not valid\ncursor.execute(\"SELECT * FROM {}\".format(table_name)) # Valid\n</code></pre>\n\n<p>And in those cases, you need to take other precautions if someone else can interact with the code.</p>\n"}], "owner": {"reputation": 473, "user_id": 5606344, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/mC21D.png?s=128&g=1", "display_name": "Michal Fa\u0161&#225;nek", "link": "https://stackoverflow.com/users/5606344/michal-fa%c5%a1%c3%a1nek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 49039725, "answer_count": 1, "score": 1, "last_activity_date": 1519857109, "creation_date": 1519852320, "question_id": 49038635, "link": "https://stackoverflow.com/questions/49038635/postgres-fails-fetching-data-in-python", "title": "Postgres fails fetching data in Python", "body": "<p>I am using Python with <em>psycopg2</em> module to get data from Postgres database.</p>\n\n<p>The database is quite large (tens of GB).</p>\n\n<p>Everything appears to be working, I am creating objects from the fetched data. \nHowever, after ~160000 of created objects I get the following error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/fAeRQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fAeRQ.png\" alt=\"Error\"></a></p>\n\n<p>I suppose the reason is the amount of data, but I could not get anywhere searching for a solution online. I am not aware of using any proxy and have never used any on this machine before, the database is on <em>localhost</em>.</p>\n"}, {"tags": ["python", "matrix", "keras", "matrix-multiplication"], "owner": {"reputation": 1512, "user_id": 1581390, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/075f8e33addc4f7aa47494e8121c8879?s=128&d=identicon&r=PG", "display_name": "user1581390", "link": "https://stackoverflow.com/users/1581390/user1581390"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1519852278, "creation_date": 1519852278, "question_id": 49038622, "link": "https://stackoverflow.com/questions/49038622/how-to-build-a-2d-weights-matrix-in-keras", "title": "How to Build a 2D Weights Matrix in Keras?", "body": "<p>I am trying to solve the problem of:</p>\n\n<pre><code>X*transpose(X) == const matrix\n</code></pre>\n\n<p>Where I need to find X (which is an N by N matrix).</p>\n\n<p>I cannot figure out a way to represent X as the weights in keras. The dense layer forces a 1D shape. If I use Lambda with Embedding it won't accept the Embedding layer.</p>\n"}, {"tags": ["python", "argparse"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1519853527, "post_id": 49038616, "comment_id": 85083133, "body": "Look at the <b>full</b> <code>subparsers</code> <code>set_defaults</code> example in the docs."}], "answers": [{"comments": [{"owner": {"reputation": 1266, "user_id": 1850917, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/40014cc01655cf124a00fb1189671606?s=128&d=identicon&r=PG", "display_name": "Filip S.", "link": "https://stackoverflow.com/users/1850917/filip-s"}, "edited": false, "score": 2, "creation_date": 1573032704, "post_id": 49038764, "comment_id": 103745145, "body": "This throws the error <code>AttributeError: &#39;Namespace&#39; object has no attribute &#39;func&#39;</code> at the line <code>args.func(args)</code> if the program is run without any arguments."}, {"owner": {"reputation": 6120, "user_id": 9214517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uHHGLaUqJK4/AAAAAAAAAAI/AAAAAAAAAAA/EMWzo-f2N9c/photo.jpg?sz=128", "display_name": "adrtam", "link": "https://stackoverflow.com/users/9214517/adrtam"}, "reply_to_user": {"reputation": 1266, "user_id": 1850917, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/40014cc01655cf124a00fb1189671606?s=128&d=identicon&r=PG", "display_name": "Filip S.", "link": "https://stackoverflow.com/users/1850917/filip-s"}, "edited": false, "score": 0, "creation_date": 1573094913, "post_id": 49038764, "comment_id": 103772225, "body": "@FilipS. right. This is just the minimal change to make the OP&#39;s code to work. Whoever use this code should add relevant sanitation checks."}], "tags": [], "owner": {"reputation": 6120, "user_id": 9214517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uHHGLaUqJK4/AAAAAAAAAAI/AAAAAAAAAAA/EMWzo-f2N9c/photo.jpg?sz=128", "display_name": "adrtam", "link": "https://stackoverflow.com/users/9214517/adrtam"}, "is_accepted": true, "score": 9, "last_activity_date": 1519852865, "creation_date": 1519852865, "answer_id": 49038764, "question_id": 49038616, "link": "https://stackoverflow.com/questions/49038616/argparse-subparsers-with-functions/49038764#49038764", "title": "argparse subparsers with functions", "body": "<p>Because you need to invoke the function manually by <code>args.func(args)</code>:</p>\n\n<pre><code>import argparse\n\ndef main():\n    parser = argparse.ArgumentParser()\n    subparsers = parser.add_subparsers()\n\n    command1_parser = subparsers.add_parser('command1')\n    command1_parser.set_defaults(func=command1)\n    command1_parser.add_argument('--name', dest='name')\n\n    command2_parser = subparsers.add_parser('command2')\n    command2_parser.set_defaults(func=command2)\n    command2_parser.add_argument('--frequency', dest='frequency')\n\n    args = parser.parse_args()\n    args.func(args)\n\ndef command1(args):\n    print(\"command1: %s\" % args.name)\n\ndef command2(args):\n    print(\"comamnd2: %s\" % args.frequency)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 8858315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ecbdde7ee9de8f5455001351b194e38?s=128&d=identicon&r=PG&f=1", "display_name": "erup", "link": "https://stackoverflow.com/users/8858315/erup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3429, "favorite_count": 1, "accepted_answer_id": 49038764, "answer_count": 1, "score": 3, "last_activity_date": 1519852865, "creation_date": 1519852243, "question_id": 49038616, "link": "https://stackoverflow.com/questions/49038616/argparse-subparsers-with-functions", "title": "argparse subparsers with functions", "body": "<p>Hello I am starting with <code>argparse</code>. My goal is to build a CLI with main commands that accept arguments and redirect to the corresponding commands functions. Here is what I did so far:</p>\n\n<pre><code>def main():\n\n    parser = argparse.ArgumentParser()\n    subparsers = parser.add_subparsers()\n\n    command1_parser = subparsers.add_parser('command1')\n    command1_parser.set_defaults(func=command1)\n    command1_parser.add_argument('--name', dest='name')\n\n    command2_parser = subparsers.add_parser('command2')\n    command2_parser.set_defaults(func=command2)\n    command2_parser.add_argument('--frequency', dest='frequency')\n\n    args = parser.parse_args()\n\ndef command1():\n\n    # do something with args.name\n\ndef command2():\n\n    # do something with args.frequency\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>When I do:</p>\n\n<pre><code>entrypoint command1 --name Hello\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>entrypoint command2 --frequency 10\n</code></pre>\n\n<p>It fails to catch the corresponding <code>args</code>. What I am doing wrong? Thanks!</p>\n"}, {"tags": ["python", "python-3.x", "python-2.7"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1519852116, "post_id": 49038559, "comment_id": 85082361, "body": "How is it used? Does it actually still need to subclass anything?"}, {"owner": {"reputation": 5056, "user_id": 8472976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/808aa1971d8e50ab541e1f54a705afad?s=128&d=identicon&r=PG&f=1", "display_name": "MegaIng", "link": "https://stackoverflow.com/users/8472976/megaing"}, "edited": false, "score": 2, "creation_date": 1519852120, "post_id": 49038559, "comment_id": 85082366, "body": "Maybe UserString from the collections module?"}, {"owner": {"reputation": 16775, "user_id": 442945, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TovHM.png?s=128&g=1", "display_name": "Nathaniel Ford", "link": "https://stackoverflow.com/users/442945/nathaniel-ford"}, "edited": false, "score": 0, "creation_date": 1519852392, "post_id": 49038559, "comment_id": 85082543, "body": "@megalng I&#39;ll check that out! Thanks for pointing me to it."}, {"owner": {"reputation": 16775, "user_id": 442945, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TovHM.png?s=128&g=1", "display_name": "Nathaniel Ford", "link": "https://stackoverflow.com/users/442945/nathaniel-ford"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1519852439, "post_id": 49038559, "comment_id": 85082566, "body": "@jonrsharpe That had occurred to me, but it&#39;s a little hard to tell given all the places it&#39;s used in the codebase. I was going to go down that route next, but was hoping for a cleaner option."}, {"owner": {"reputation": 2507, "user_id": 478521, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1162c46f0bf896fed04fb1562208883b?s=128&d=identicon&r=PG", "display_name": "Mikhail Edoshin", "link": "https://stackoverflow.com/users/478521/mikhail-edoshin"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1553777716, "post_id": 49038559, "comment_id": 97516483, "body": "@jonrsharpe Subclassing a string or anything else is very convenient when you later need to pass the instance to something that expect a string. From the code same this could be exactly the case."}], "answers": [{"tags": [], "owner": {"reputation": 2507, "user_id": 478521, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1162c46f0bf896fed04fb1562208883b?s=128&d=identicon&r=PG", "display_name": "Mikhail Edoshin", "link": "https://stackoverflow.com/users/478521/mikhail-edoshin"}, "is_accepted": false, "score": 0, "last_activity_date": 1553777484, "creation_date": 1553777484, "answer_id": 55398128, "question_id": 49038559, "link": "https://stackoverflow.com/questions/49038559/porting-subclass-of-unicode-to-python-3/55398128#55398128", "title": "Porting Subclass of Unicode to Python 3", "body": "<p>The right way to subclass a string or another immutable class in Python 3 is same as in Python 2:</p>\n\n<pre><code>class MyString(str):\n  def __new__(cls, initial_arguments): # no staticmethod\n     desired_string_value = get_desired_string_value(initial_arguments)\n     return super(MyString, cls).__new__(cls, desired_string_value)\n     # can be shortened to super().__new__(...)\n  def __init__(self, initial_arguments): # arguments are unused\n     self.whatever = whatever(self)\n     # no need to call super().__init__(), but if you must, do not pass arguments \n</code></pre>\n\n<p>There are several issues with your sample. First, why <code>__new__</code> is <code>@staticmethod</code>? It's <code>@classmethod</code>, although you don't need to specify this. Second, the code seems to operate under the assumption that when you call <code>__new__</code> of the superclass, it somehow calls your <code>__init__</code> as well. I'm deriving this from looking at how <code>self._clean</code> is supposed to be set. This is not the case. When you call <code>MyString(arguments)</code>, the following happens:</p>\n\n<ul>\n<li>First Python calls <code>__new__</code> with the class parameter (usually called <code>cls</code>) and <code>arguments</code>. <code>__new__</code> must return the class instance. To do this it can create it, as we do, or do something else; e.g. it may return an existing one or, in fact, anything.</li>\n<li>Then Python calls <code>__init__</code> with the instance it received from <code>__new__</code> (this parameter is usually called <code>self</code>) and the same <code>arguments</code>.</li>\n<li>(There's a special case: Python won't call <code>__init__</code> if <code>__new__</code> returned something that is not a subclass of the passed class.)</li>\n</ul>\n\n<p>Python uses class hierarchy to see which <code>__new__</code> and <code>__init__</code> to call. It's up to you to correctly sort out the arguments and use proper superclass calls in these two methods.</p>\n"}], "owner": {"reputation": 16775, "user_id": 442945, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TovHM.png?s=128&g=1", "display_name": "Nathaniel Ford", "link": "https://stackoverflow.com/users/442945/nathaniel-ford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553777484, "creation_date": 1519851967, "question_id": 49038559, "link": "https://stackoverflow.com/questions/49038559/porting-subclass-of-unicode-to-python-3", "title": "Porting Subclass of Unicode to Python 3", "body": "<p>I'm porting a legacy codebase from Python 2.7 to Python 3.6. In that codebase I have a number of instances of things like:</p>\n\n<pre><code>class EntityName(unicode):\n\n    @staticmethod\n    def __new__(cls, s):\n        clean = cls.strip_junk(s)\n        return super(EntityName, cls).__new__(cls, clean)\n\n    def __init__(self, s):\n        self._clean = s\n        self._normalized = normalized_name(self._clean)\n        self._simplified = simplified_name(self._clean)\n        self._is_all_caps = None\n        self._is_all_lower = None\n        super(EntityName, self).__init__(self._clean)\n</code></pre>\n\n<p>It might be called like this:</p>\n\n<pre><code>EntityName(\"Guy DeFalt\")\n</code></pre>\n\n<p>When porting this to Python 3 the above code fails because <code>unicode</code> is no longer a class you can extend (at least, if there is an equivalent class I cannot find it). Given that <code>str</code> is unicode now, I tried to just swap <code>str</code> in, but the parent init doesn't take a the string value I'm trying to pass:</p>\n\n<pre><code>TypeError: object.__init__() takes no parameters\n</code></pre>\n\n<p>This makes sense because <code>str</code> does not have an <code>__init__</code> method - this does not seem to be an idiomatic way of using this class. So my question has two major branches:</p>\n\n<ul>\n<li>Is there a better way to be porting classes that sub-classed the old unicode class?</li>\n<li>If subclassing <code>str</code> is appropriate, how should I modify the <code>__init__</code> function for idiomatic behavior?</li>\n</ul>\n"}, {"tags": ["python", "fortran", "f2py"], "comments": [{"owner": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1519852744, "post_id": 49038545, "comment_id": 85082723, "body": "What do you want to do with the doc? Why do you think there should be any doc present? Were you able to run the test subroutine?"}, {"owner": {"reputation": 548, "user_id": 9407445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67c8d55ec00252e32c05c58800419def?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Heeley", "link": "https://stackoverflow.com/users/9407445/tom-heeley"}, "reply_to_user": {"reputation": 49888, "user_id": 721644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/KSRQT.jpg?s=128&g=1", "display_name": "Vladimir F", "link": "https://stackoverflow.com/users/721644/vladimir-f"}, "edited": false, "score": 0, "creation_date": 1519855832, "post_id": 49038545, "comment_id": 85084228, "body": "You have to use the doc to find out how the functions are stored"}], "answers": [{"tags": [], "owner": {"reputation": 2147, "user_id": 2136640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b9d392b830abbaf0d8af1124c1dd371?s=128&d=identicon&r=PG", "display_name": "Timothy Brown", "link": "https://stackoverflow.com/users/2136640/timothy-brown"}, "is_accepted": true, "score": 1, "last_activity_date": 1519857053, "creation_date": 1519857053, "answer_id": 49039708, "question_id": 49038545, "link": "https://stackoverflow.com/questions/49038545/how-to-use-f2py-module-in-python/49039708#49039708", "title": "How to Use f2py module in python", "body": "<p>According to their <a href=\"https://docs.scipy.org/doc/numpy-dev/f2py/getting-started.html\" rel=\"nofollow noreferrer\">example</a>, it looks like you need to call the print on <code>module.subroutine.__doc__</code>.</p>\n\n<p>If I save your file to <code>test1.f90</code>, then compile it</p>\n\n<pre><code>f2py -c test1.f90 -m test1\n</code></pre>\n\n<p>And then query the doc string.</p>\n\n<pre><code>~$ python\nPython 3.6.4 (default, Jan  5 2018, 02:35:40) \n[GCC 7.2.1 20171224] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import numpy\n&gt;&gt;&gt; import test1\n&gt;&gt;&gt; print(test1.test.__doc__)\ntest()\n\nWrapper for ``test``.\n\n\n&gt;&gt;&gt;\n</code></pre>\n\n<p>Which looks fine to me since you have no arguments going to <code>Test</code>.</p>\n"}], "owner": {"reputation": 548, "user_id": 9407445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67c8d55ec00252e32c05c58800419def?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Heeley", "link": "https://stackoverflow.com/users/9407445/tom-heeley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 0, "accepted_answer_id": 49039708, "answer_count": 1, "score": 1, "last_activity_date": 1519857053, "creation_date": 1519851926, "question_id": 49038545, "link": "https://stackoverflow.com/questions/49038545/how-to-use-f2py-module-in-python", "title": "How to Use f2py module in python", "body": "<p>Just having a bit of trouble with using f2py. I have compiled to following code into a .so file just fine, and it imports into my python code just fine, but I am just wondering how do I then use it. I know there is a command <em>doc</em> but it jus says that this module has no attribute called \"<em>doc</em>\"</p>\n\n<p>Fortran Code:</p>\n\n<pre><code>subroutine Test\nimplicit none\nreal, dimension(3600000) :: Alpha,Sigma\nopen(10, file='Alpha.txt')\nread(10, *) Alpha\nSigma = (87.6*2)/((87.6*(sin(Alpha))**2)+(2*cos(Alpha)**2))\nend subroutine\n</code></pre>\n\n<p>Python Code:</p>\n\n<pre><code>import matplotlib.pyplot as plt \nimport numpy as np \nimport Sigma\n\nprint(Sigma._doc_)\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>File \"/home/tom/Desktop/f2py/Plot.py\", line 5, in &lt;module&gt;\n    print(Sigma._doc_)\nAttributeError: 'module' object has no attribute '_doc_'\n</code></pre>\n\n<p>Do I have to somehow enter the doc attribute into the original fortran code? If so how would I go about that?</p>\n"}, {"tags": ["python", "opencv"], "answers": [{"comments": [{"owner": {"reputation": 321, "user_id": 2779432, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/100001968023526/picture?type=large", "display_name": "Francesco", "link": "https://stackoverflow.com/users/2779432/francesco"}, "edited": false, "score": 0, "creation_date": 1522864763, "post_id": 49449108, "comment_id": 86324089, "body": "That&#39;s great, thank you! Were you able to preserve all the pixels outside the crop area by any chance?"}, {"owner": {"reputation": 1684, "user_id": 4669135, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d9d4ff76c8827f4adfc6218ba952aefc?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Devillers", "link": "https://stackoverflow.com/users/4669135/gabriel-devillers"}, "reply_to_user": {"reputation": 321, "user_id": 2779432, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/100001968023526/picture?type=large", "display_name": "Francesco", "link": "https://stackoverflow.com/users/2779432/francesco"}, "edited": false, "score": 0, "creation_date": 1523000781, "post_id": 49449108, "comment_id": 86386818, "body": "Yes you can do that by chosing the appropriate parameters <code>P</code> and <code>size</code> in function <a href=\"https://docs.opencv.org/3.4.1/db/d58/group__calib3d__fisheye.html#ga0d37b45f780b32f63ed19c21aa9fd333\" rel=\"nofollow noreferrer\">fisheye::initUndistortRectify</a>. You should be able to compute them with function <a href=\"https://docs.opencv.org/3.4.1/d9/d0c/group__calib3d.html#ga7a6c4e032c97f03ba747966e6ad862b1\" rel=\"nofollow noreferrer\">getOptimalNewCameraMatrix</a>. See <a href=\"https://stackoverflow.com/questions/34316306/opencv-fisheye-calibration-cuts-too-much-of-the-resulting-image\">this QA</a>. But as user  alexisrozhkov said it might not be possible to keep all pixels."}, {"owner": {"reputation": 1053, "user_id": 555263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96dee5642428a2855b30efa6264729c5?s=128&d=identicon&r=PG", "display_name": "huisinro", "link": "https://stackoverflow.com/users/555263/huisinro"}, "edited": false, "score": 0, "creation_date": 1565649889, "post_id": 49449108, "comment_id": 101411246, "body": "I followed the same instructions and removed the CALIB_CHECK_COND flag as Gabriel suggested. I used the same images as Francesco provided to get K and D. But I still see some distortion using K and D. I don&#39;t see such distortion on the undistorted images provided by Gabriel. So I am wondering whether you are using the same code, or you made some modification.  Here is an example:  Distorted image: <a href=\"https://i.stack.imgur.com/DNBuD.jpg\" rel=\"nofollow noreferrer\">i.stack.imgur.com/DNBuD.jpg</a> My undistorted image: <a href=\"https://i.stack.imgur.com/GTAE0.jpg\" rel=\"nofollow noreferrer\">i.stack.imgur.com/GTAE0.jpg</a> Gabriel&#39;s undistorted image: <a href=\"https://i.stack.imgur.com/rmJ5Q.jpg\" rel=\"nofollow noreferrer\">i.stack.imgur.com/rmJ5Q.jpg</a>"}, {"owner": {"reputation": 1684, "user_id": 4669135, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d9d4ff76c8827f4adfc6218ba952aefc?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Devillers", "link": "https://stackoverflow.com/users/4669135/gabriel-devillers"}, "reply_to_user": {"reputation": 1053, "user_id": 555263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96dee5642428a2855b30efa6264729c5?s=128&d=identicon&r=PG", "display_name": "huisinro", "link": "https://stackoverflow.com/users/555263/huisinro"}, "edited": false, "score": 0, "creation_date": 1565684849, "post_id": 49449108, "comment_id": 101419863, "body": "@huisinro I am afraid I cannot find the code I used to produce these images, sorry. But I suspect it was close to the example found online."}, {"owner": {"reputation": 1053, "user_id": 555263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96dee5642428a2855b30efa6264729c5?s=128&d=identicon&r=PG", "display_name": "huisinro", "link": "https://stackoverflow.com/users/555263/huisinro"}, "edited": false, "score": 0, "creation_date": 1565718688, "post_id": 49449108, "comment_id": 101437228, "body": "Gabriel, thanks for the update. We actually figured it out now."}], "tags": [], "owner": {"reputation": 1684, "user_id": 4669135, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d9d4ff76c8827f4adfc6218ba952aefc?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Devillers", "link": "https://stackoverflow.com/users/4669135/gabriel-devillers"}, "is_accepted": true, "score": 9, "last_activity_date": 1586101621, "last_edit_date": 1586101621, "creation_date": 1521806008, "answer_id": 49449108, "question_id": 49038464, "link": "https://stackoverflow.com/questions/49038464/opencv-calibrate-fisheye-lens-error-ill-conditioned-matrix/49449108#49449108", "title": "OpenCV - Calibrate fisheye lens error (Ill-conditioned matrix)", "body": "<p>I think it is because your variable calibration_flags has CALIB_CHECK_COND set.\nTry disabling this flag. Without it I was able to undistort your images (see links below).</p>\n\n<p>I am not sure what this check is for (the <a href=\"https://docs.opencv.org/3.4.1/db/d58/group__calib3d__fisheye.html\" rel=\"nofollow noreferrer\">documentation</a> is not very explicit). This flag reject some images\u00b9 of my gopro hero 3 even when the chessboard is visible and detected. In my case one image among 20 is not passing this test. This image has the chessboard close to the left border.</p>\n\n<ul>\n<li><a href=\"https://i.stack.imgur.com/m2WF6.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/m2WF6.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/KiTRz.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/KiTRz.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/MhHyN.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/MhHyN.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/pSiyG.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/pSiyG.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/drXSL.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/drXSL.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/DDze1.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/DDze1.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/b6l8f.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/b6l8f.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/9MrAk.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/9MrAk.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/WYmg5.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/WYmg5.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/rmJ5Q.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/rmJ5Q.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/K8k8Y.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/K8k8Y.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/MiBER.jpg\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/MiBER.jpg</a></li>\n</ul>\n\n<p>\u00b9 in OpenCV versions >= 3.4.1 the <a href=\"https://github.com/opencv/opencv/commit/5ca7dcc6e74b9c6068b8de1f49f289d6bc6b5a0b\" rel=\"nofollow noreferrer\">error message</a> tells you which image is not passing the test</p>\n"}, {"tags": [], "owner": {"reputation": 358, "user_id": 8210855, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a086cc057be90a025a9474017dfaab6a?s=128&d=identicon&r=PG&f=1", "display_name": "Ahmadiah", "link": "https://stackoverflow.com/users/8210855/ahmadiah"}, "is_accepted": false, "score": 1, "last_activity_date": 1573500377, "creation_date": 1573500377, "answer_id": 58807474, "question_id": 49038464, "link": "https://stackoverflow.com/questions/49038464/opencv-calibrate-fisheye-lens-error-ill-conditioned-matrix/58807474#58807474", "title": "OpenCV - Calibrate fisheye lens error (Ill-conditioned matrix)", "body": "<p>I did not find the code in python so I manually check the images with chessboard on the edge and delete them one by one until the error is gone.  </p>\n"}, {"tags": [], "owner": {"reputation": 8590, "user_id": 851699, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/jDiPy.png?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/851699/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1576708691, "creation_date": 1576708691, "answer_id": 59400942, "question_id": 49038464, "link": "https://stackoverflow.com/questions/49038464/opencv-calibrate-fisheye-lens-error-ill-conditioned-matrix/59400942#59400942", "title": "OpenCV - Calibrate fisheye lens error (Ill-conditioned matrix)", "body": "<p>As @Ahmadiah mentioned, the \"ill conditioned\" thing can happen when the checkerboard falls near the edge of the image.  One way to handle this is to remove images one by one and try again when they cause calibration to fail.  Here is an example where we do that: </p>\n\n<pre><code>def calibrate_fisheye(all_image_points, all_true_points, image_size):\n    \"\"\" Calibrate a fisheye camera from matching points.\n    :param all_image_points: Sequence[Array(N, 2)[float32]] of (x, y) image coordinates of the points.  (see  cv2.findChessboardCorners)\n    :param all_true_points: Sequence[Array(N, 3)[float32]] of (x,y,z) points.  (If from a grid, just put (x,y) on a regular grid and z=0)\n        Note that each of these sets of points can be in its own reference frame,\n    :param image_size: The (size_y, size_x) of the image.\n    :return: (rms, mtx, dist, rvecs, tvecs) where\n        rms: float - The root-mean-squared error\n        mtx: array[3x3] A 3x3 camera intrinsics matrix\n        dst: array[4x1] A (4x1) array of distortion coefficients\n        rvecs: Sequence[array[N,3,1]] of estimated rotation vectors for each set of true points\n        tvecs: Sequence[array[N,3,1]] of estimated translation vectors for each set of true points\n    \"\"\"\n    assert len(all_true_points) == len(all_image_points)\n    all_true_points = list(all_true_points)  # Because we'll modify it in place\n    all_image_points = list(all_image_points)\n    while True:\n        assert len(all_true_points) &gt; 0, \"There are no valid images from which to calibrate.\"\n        try:\n            rms, mtx, dist, rvecs, tvecs = cv2.fisheye.calibrate(\n                objectPoints=[p[None, :, :] for p in all_true_points],\n                imagePoints=[p[:, None, :] for p in all_image_points],\n                image_size=image_size,\n                K=np.zeros((3, 3)),\n                D=np.zeros((4, 1)),\n                flags=cv2.fisheye.CALIB_RECOMPUTE_EXTRINSIC + cv2.fisheye.CALIB_CHECK_COND + cv2.fisheye.CALIB_FIX_SKEW,\n                criteria=(cv2.TERM_CRITERIA_EPS + cv2.TERM_CRITERIA_MAX_ITER, 30, 1e-6),\n            )\n            print('Found a calibration based on {} well-conditioned images.'.format(len(all_true_points)))\n            return rms, mtx, dist, rvecs, tvecs\n        except cv2.error as err:\n            try:\n                idx = int(err.message.split('array ')[1][0])  # Parse index of invalid image from error message\n                all_true_points.pop(idx)\n                all_image_points.pop(idx)\n                print(\"Removed ill-conditioned image {} from the data.  Trying again...\".format(idx))\n            except IndexError:\n                raise err\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10237971, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-JOeKgZqbvB4/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMifWP1lGUVxGwpZjvKjeiiBXtNNw/mo/photo.jpg?sz=128", "display_name": "ngxin", "link": "https://stackoverflow.com/users/10237971/ngxin"}, "is_accepted": false, "score": -1, "last_activity_date": 1610681992, "creation_date": 1610681992, "answer_id": 65730192, "question_id": 49038464, "link": "https://stackoverflow.com/questions/49038464/opencv-calibrate-fisheye-lens-error-ill-conditioned-matrix/65730192#65730192", "title": "OpenCV - Calibrate fisheye lens error (Ill-conditioned matrix)", "body": "<p>my opencv version is 4.0+, I sloved it by this method</p>\n<pre><code>rms, _, _, _, _ = \\\ncv2.fisheye.calibrate(\n    objpoints,\n    imgpoints,\n    #gray.shape[::-1],\n    gray.shape,\n    K,\n    D,\n    rvecs,\n    tvecs,\n    calibration_flags,\n    (cv2.TERM_CRITERIA_EPS+cv2.TERM_CRITERIA_MAX_ITER, 30, 1e-3)\n)\n</code></pre>\n"}], "owner": {"reputation": 321, "user_id": 2779432, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/100001968023526/picture?type=large", "display_name": "Francesco", "link": "https://stackoverflow.com/users/2779432/francesco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4418, "favorite_count": 0, "accepted_answer_id": 49449108, "answer_count": 4, "score": 12, "last_activity_date": 1610681992, "creation_date": 1519851634, "last_edit_date": 1521812389, "question_id": 49038464, "link": "https://stackoverflow.com/questions/49038464/opencv-calibrate-fisheye-lens-error-ill-conditioned-matrix", "title": "OpenCV - Calibrate fisheye lens error (Ill-conditioned matrix)", "body": "<p>I am trying to calibrate a fisheye lens following these instructions \n<a href=\"https://medium.com/@kennethjiang/calibrate-fisheye-lens-using-opencv-333b05afa0b0\" rel=\"noreferrer\">https://medium.com/@kennethjiang/calibrate-fisheye-lens-using-opencv-333b05afa0b0</a> \nwhere you can find the full code I'm using for the calibration part.</p>\n\n<p>I arrive at this point where:</p>\n\n<pre><code>N_OK = len(objpoints)\nK = np.zeros((3, 3))\nD = np.zeros((4, 1))\nrvecs = [np.zeros((1, 1, 3), dtype=np.float64) for i in range(N_OK)]\ntvecs = [np.zeros((1, 1, 3), dtype=np.float64) for i in range(N_OK)]  \nrms, _, _, _, _ = \\\n    cv2.fisheye.calibrate(\n        objpoints,\n        imgpoints,\n        gray.shape[::-1],\n        K,\n        D,\n        rvecs,\n        tvecs,\n        calibration_flags,\n        (cv2.TERM_CRITERIA_EPS+cv2.TERM_CRITERIA_MAX_ITER, 30, 1e-3)\n    )\nprint(\"Found \" + str(N_OK) + \" valid images for calibration\")\nprint(\"DIM=\" + str(_img_shape[::-1]))\nprint(\"K=np.array(\" + str(K.tolist()) + \")\")\nprint(\"D=np.array(\" + str(D.tolist()) + \")\")\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>Traceback (most recent call last)\n&lt;ipython-input-10-deaca9981fe4&gt; in &lt;module&gt;()\n     13         tvecs,\n     14         calibration_flags,\n---&gt; 15         (cv2.TERM_CRITERIA_EPS+cv2.TERM_CRITERIA_MAX_ITER, 30, 1e-3)\n     16     )\n     17 print(\"Found \" + str(N_OK) + \" valid images for calibration\")\n\nerror: C:\\ci\\opencv_1512688052760\\work\\modules\\calib3d\\src\\fisheye.cpp:1414: \nerror: (-3) CALIB_CHECK_COND - Ill-conditioned matrix for input array 0 in \nfunction cv::internal::CalibrateExtrinsics\n</code></pre>\n\n<p>I don't understand what's going on and I could only find so little information around the internet, does anyone have experienced something similar and know how to solve this?</p>\n\n<p>Thanks</p>\n\n<p>These are the images of the checkerboard I'm using:</p>\n\n<ul>\n<li><a href=\"https://i.stack.imgur.com/goHIg.jpg\" rel=\"noreferrer\">https://i.stack.imgur.com/goHIg.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/kja3O.jpg\" rel=\"noreferrer\">https://i.stack.imgur.com/kja3O.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/XbIzh.jpg\" rel=\"noreferrer\">https://i.stack.imgur.com/XbIzh.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/uQ9Gr.jpg\" rel=\"noreferrer\">https://i.stack.imgur.com/uQ9Gr.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/N8aLJ.jpg\" rel=\"noreferrer\">https://i.stack.imgur.com/N8aLJ.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/JMmmZ.jpg\" rel=\"noreferrer\">https://i.stack.imgur.com/JMmmZ.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/QJ8wn.jpg\" rel=\"noreferrer\">https://i.stack.imgur.com/QJ8wn.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/NmiFQ.jpg\" rel=\"noreferrer\">https://i.stack.imgur.com/NmiFQ.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/sQHdd.jpg\" rel=\"noreferrer\">https://i.stack.imgur.com/sQHdd.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/DNBuD.jpg\" rel=\"noreferrer\">https://i.stack.imgur.com/DNBuD.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/vFtOo.jpg\" rel=\"noreferrer\">https://i.stack.imgur.com/vFtOo.jpg</a></li>\n<li><a href=\"https://i.stack.imgur.com/lhkF5.jpg\" rel=\"noreferrer\">https://i.stack.imgur.com/lhkF5.jpg</a></li>\n</ul>\n"}, {"tags": ["python", "beautifulsoup", "html-parsing"], "answers": [{"tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 0, "last_activity_date": 1519852352, "creation_date": 1519852352, "answer_id": 49038647, "question_id": 49038444, "link": "https://stackoverflow.com/questions/49038444/find-first-specific-html-tag-above-the-found-selection-python-beautifulsoup/49038647#49038647", "title": "Find first specific HTML tag above the found selection - Python / BeautifulSoup", "body": "<p>A possibility is to scrape all the desired text, and then group under the appropriate event date:</p>\n\n<pre><code>from bs4 import BeautifulSoup as soup\nimport itertools, re\ndef beautify(f):\n   def wrapper():\n      return [\"Name: {name}, Date: {date}, Time: {time}\".format(**dict(zip(['date', 'time', 'name'], i))) for i in f()]\n   return wrapper\n\n@beautify\ndef raw_data():\n   s = soup(data, 'lxml')\n   final_data = [i.text for i in s.find_all('td')]\n   final_results = [list(b) for a, b in itertools.groupby(final_data, key=lambda x:bool(re.findall('\\d+\\.\\d+\\.\\d+$', x)))]\n   new_final_data = [[a+b[i:i+2] for i in range(0, len(b), 2)] for a, b in [final_results[i:i+2] for i in range(0, len(final_results), 2)]]\n   return [i for b in new_final_data for i in b]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['Name: Event_1, Date: 28.02.2018, Time: 18:00', 'Name: Event_2, Date: 28.02.2018, Time: 19:00', 'Name: Event_3, Date: 01.03.2018, Time: 18:00', 'Name: Event_4, Date: 01.03.2018, Time: 19:00', 'Name: Event_5, Date: 01.03.2018, Time: 20:00']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 9425707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e7b8db4f7393909c9471684f4cdd81b?s=128&d=identicon&r=PG&f=1", "display_name": "fibrix", "link": "https://stackoverflow.com/users/9425707/fibrix"}, "edited": false, "score": 0, "creation_date": 1519928668, "post_id": 49042432, "comment_id": 85117127, "body": "Thank you - this was the solution I was looking for! Just couldn&#39;t figure out the for loop on my own."}], "tags": [], "owner": {"reputation": 6659, "user_id": 7832176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5923d496015d26974109a16c7af1b4b?s=128&d=identicon&r=PG&f=1", "display_name": "Keyur Potdar", "link": "https://stackoverflow.com/users/7832176/keyur-potdar"}, "is_accepted": true, "score": 0, "last_activity_date": 1519877018, "creation_date": 1519877018, "answer_id": 49042432, "question_id": 49038444, "link": "https://stackoverflow.com/questions/49038444/find-first-specific-html-tag-above-the-found-selection-python-beautifulsoup/49042432#49042432", "title": "Find first specific HTML tag above the found selection - Python / BeautifulSoup", "body": "<p>One thing you could do is that iterate over all the <code>&lt;tr&gt;</code> tags and check if it has a <code>&lt;span&gt;</code> tag with the date or not. If it has the date, update the date else get name and time.</p>\n\n<p>But in Python, it is <a href=\"https://docs.quantifiedcode.com/python-anti-patterns/readability/asking_for_permission_instead_of_forgiveness_when_working_with_files.html\" rel=\"nofollow noreferrer\">EAFP</a> (easier to ask for forgiveness than permission). So, you could simply use this:</p>\n\n<pre><code>table = soup.find('table', class_='events')\nevent_date = ''\nfor row in table.find_all('tr'):\n    try:\n        event_date = row.td.span.text\n        continue\n    except AttributeError:\n        pass\n    event_name = row.find('td', class_='event_name').text\n    event_time = row.find('td', class_='event_time').text\n    print('Name: {}, Date: {}, Time: {}'.format(event_name, event_date, event_time))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Name: Event_1, Date: 28.02.2018, Time: 18:00\nName: Event_2, Date: 28.02.2018, Time: 19:00\nName: Event_3, Date: 01.03.2018, Time: 18:00\nName: Event_4, Date: 01.03.2018, Time: 19:00\nName: Event_5, Date: 01.03.2018, Time: 20:00\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9425707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e7b8db4f7393909c9471684f4cdd81b?s=128&d=identicon&r=PG&f=1", "display_name": "fibrix", "link": "https://stackoverflow.com/users/9425707/fibrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 49042432, "answer_count": 2, "score": 0, "last_activity_date": 1519877018, "creation_date": 1519851580, "question_id": 49038444, "link": "https://stackoverflow.com/questions/49038444/find-first-specific-html-tag-above-the-found-selection-python-beautifulsoup", "title": "Find first specific HTML tag above the found selection - Python / BeautifulSoup", "body": "<p>I have an events table in the following format</p>\n\n<pre><code>&lt;table class=\"events\"&gt;\n&lt;tbody&gt;\n    &lt;tr&gt;\n        &lt;td\"&gt;&lt;span class=\"event_date\"&gt;28.02.2018&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr class=\"event\"&gt;\n        &lt;td class=\"event_time\"&gt;18:00&lt;/td&gt;\n        &lt;td class=\"event_name\"&gt;Event_1&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr class=\"event\"&gt;\n        &lt;td class=\"event_time\"&gt;19:00&lt;/td&gt;\n        &lt;td class=\"event_name\"&gt;Event_2&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td\"&gt;&lt;span class=\"event_date\"&gt;01.03.2018&lt;/span&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr class=\"event\"&gt;\n        &lt;td class=\"event_time\"&gt;18:00&lt;/td&gt;\n        &lt;td class=\"event_name\"&gt;Event_3&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr class=\"event\"&gt;\n        &lt;td class=\"event_time\"&gt;19:00&lt;/td&gt;\n        &lt;td class=\"event_name\"&gt;Event_4&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr class=\"event\"&gt;\n        &lt;td class=\"event_time\"&gt;20:00&lt;/td&gt;\n        &lt;td class=\"event_name\"&gt;Event_5&lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<p>\nI am able to extract the time and the name easily for each event with following commands</p>\n\n<pre><code>event_container = page_soup.findAll(\"tr\", {\"class\":\"event\"})\n\nfor event in event_container:\n    event_name = event.find(\"td\", {\"class\":\"event_name\"})\n    event_time = event.find(\"td\", {\"class\":\"event_time\"})\n</code></pre>\n\n<p>However I'm just not able to assign the event_date correctly to those events</p>\n\n<p>Wanted output</p>\n\n<blockquote>\n  <p>Name: Event_1, Date: 28.02.2018, Time: 18:00</p>\n  \n  <p>Name: Event_2, Date: 28.02.2018, Time: 19:00</p>\n  \n  <p>Name: Event_3, Date: 01.03.2018, Time: 18:00</p>\n  \n  <p>Name: Event_4, Date: 01.03.2018, Time: 19:00</p>\n  \n  <p>Name: Event_5, Date: 01.03.2018, Time: 20:00</p>\n</blockquote>\n\n<p>Thank you for your help</p>\n"}, {"tags": ["python", "tensorflow", "neural-network"], "comments": [{"owner": {"reputation": 2338, "user_id": 3080953, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe6bc2a51d294b0d1d65fa203e496c7a?s=128&d=identicon&r=PG&f=1", "display_name": "c2huc2hu", "link": "https://stackoverflow.com/users/3080953/c2huc2hu"}, "edited": false, "score": 0, "creation_date": 1519861044, "post_id": 49038440, "comment_id": 85086157, "body": "is this the loss on the train or validation set?"}, {"owner": {"reputation": 1918, "user_id": 7886651, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/zfb59.jpg?s=128&g=1", "display_name": "I. A", "link": "https://stackoverflow.com/users/7886651/i-a"}, "reply_to_user": {"reputation": 2338, "user_id": 3080953, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe6bc2a51d294b0d1d65fa203e496c7a?s=128&d=identicon&r=PG&f=1", "display_name": "c2huc2hu", "link": "https://stackoverflow.com/users/3080953/c2huc2hu"}, "edited": false, "score": 0, "creation_date": 1519862118, "post_id": 49038440, "comment_id": 85086475, "body": "This is on the train set"}], "owner": {"reputation": 1918, "user_id": 7886651, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/zfb59.jpg?s=128&g=1", "display_name": "I. A", "link": "https://stackoverflow.com/users/7886651/i-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1519866121, "creation_date": 1519851552, "last_edit_date": 1519866121, "question_id": 49038440, "link": "https://stackoverflow.com/questions/49038440/weird-behavior-for-the-loss-function-while-training-a-neural-networks", "title": "Weird behavior for the loss function while training a neural networks", "body": "<p>I am working on constructing a model to do some regression at the end. Therefore, I trained a convolutional neural network at the beginning. The conv net was the encoder in a variational autoencoder. after training the VAE, I removed the decoder and used it with GRU. Then I trained a gated recurrent network on top of the convolutional neural network, that is, the encoder. Hence, the features of the images after the conv net were fed into the recurrent neural network. After training the recurrent neural network alone \"<em>On top of the conv net</em>\", I did a fine tuning to train the whole network combined.</p>\n\n<p>Here is the loss function that I have achieved so far.</p>\n\n<p><a href=\"https://i.stack.imgur.com/A2mxr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/A2mxr.png\" alt=\"enter image description here\"></a></p>\n\n<p>As we can see from the above graph, the loss was decreasing and about to converge, but then has some weird behavior at the end. </p>\n\n<p>I would like to know the reasons for this behavior.</p>\n\n<p>Any help would be much appreciated!!</p>\n"}, {"tags": ["python", "algorithm", "simulation", "physics"], "comments": [{"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1519851687, "post_id": 49038432, "comment_id": 85082134, "body": "You should do some debugging.  Step through the code for a very simple example (e.g. two bodies) to see where the behaviour diverges from expectations."}, {"owner": {"reputation": 4919, "user_id": 1627234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7221be6ffff63be791929d2ffc624071?s=128&d=identicon&r=PG", "display_name": "Pavlin", "link": "https://stackoverflow.com/users/1627234/pavlin"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1519851854, "post_id": 49038432, "comment_id": 85082222, "body": "I&#39;ve done a fair bit of debugging, in fact this is my debugging code. It diverges for the simplest case of 2 bodies, where they are apparently repelled (for either direction of the force vector). My guess is that I must be missing some key part of the update rules, but I can&#39;t seem to find what I&#39;m missing or have written incorrectly."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 1, "creation_date": 1519852896, "post_id": 49038432, "comment_id": 85082813, "body": "What I&#39;m suggesting is that for two bodies, you ought to be able to reason about the behaviour on a frame-by-frame basis (you could even compute it by hand) - does everything move in the correct direction in, say, the first frame?"}, {"owner": {"reputation": 4919, "user_id": 1627234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7221be6ffff63be791929d2ffc624071?s=128&d=identicon&r=PG", "display_name": "Pavlin", "link": "https://stackoverflow.com/users/1627234/pavlin"}, "reply_to_user": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 0, "creation_date": 1519853982, "post_id": 49038432, "comment_id": 85083382, "body": "I&#39;ve gone through a couple of steps by hand now and it seems that for the simplest case [-1, 1], [1, 1], the forces on p1 = [0.25, 0.7, 81, 0, 0]. So this is actually expected behaviour? However the velocity is still really high so it keeps moving away. The other particle does the opposite, so they move away from each other. This begs the question, how come the other implementations that we can find online don&#39;t have this issue? I see no principled way to get around this, yet others seem to have done it easily."}, {"owner": {"reputation": 251753, "user_id": 129570, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/aa98a2c5baceef5ffcaf95fdde12b8fb?s=128&d=identicon&r=PG", "display_name": "Oliver Charlesworth", "link": "https://stackoverflow.com/users/129570/oliver-charlesworth"}, "edited": false, "score": 3, "creation_date": 1519854349, "post_id": 49038432, "comment_id": 85083571, "body": "Perhaps your timestep is too large?  With two bodies starting with zero initial conditions, I believe the expected behaviour is for them to oscillate indefinitely (basically a pendulum).  If your timestep is greater than the oscillation period, things are going to go awry."}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 0, "creation_date": 1520128975, "post_id": 49038432, "comment_id": 85187890, "body": "In fact to <a href=\"https://en.wikipedia.org/wiki/Numerical_methods_for_ordinary_differential_equations\" rel=\"nofollow noreferrer\">solve differential equations accurately with Euler integration</a> (which is what you&#39;re doing) requires the time step to be small compared to changes occurring in the solution. The time step must be much less than the period of oscillation."}], "answers": [{"comments": [{"owner": {"reputation": 2932, "user_id": 5770658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/23e3e0c78a33e4620eb8436e182535e2?s=128&d=identicon&r=PG&f=1", "display_name": "internet_user", "link": "https://stackoverflow.com/users/5770658/internet-user"}, "edited": false, "score": 4, "creation_date": 1519856700, "post_id": 49039451, "comment_id": 85084576, "body": "I&#39;d also recommend using RK4 instead of the Euler method."}], "tags": [], "owner": {"reputation": 4919, "user_id": 1627234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7221be6ffff63be791929d2ffc624071?s=128&d=identicon&r=PG", "display_name": "Pavlin", "link": "https://stackoverflow.com/users/1627234/pavlin"}, "is_accepted": true, "score": 1, "last_activity_date": 1519855847, "creation_date": 1519855847, "answer_id": 49039451, "question_id": 49038432, "link": "https://stackoverflow.com/questions/49038432/2d-n-body-simulation/49039451#49039451", "title": "2D N body simulation", "body": "<p>My dt was too large. Setting the dt to a smaller value e.g. 0.05 did it.</p>\n"}], "owner": {"reputation": 4919, "user_id": 1627234, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7221be6ffff63be791929d2ffc624071?s=128&d=identicon&r=PG", "display_name": "Pavlin", "link": "https://stackoverflow.com/users/1627234/pavlin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 907, "favorite_count": 1, "accepted_answer_id": 49039451, "answer_count": 1, "score": 2, "last_activity_date": 1519856486, "creation_date": 1519851524, "last_edit_date": 1519854180, "question_id": 49038432, "link": "https://stackoverflow.com/questions/49038432/2d-n-body-simulation", "title": "2D N body simulation", "body": "<p>I've followed the equations from the n-body problem found on Wikipedia and implemented a simple O(n\u00b2) n-body simulation. However, once I visualize the simulation, things don't behave as expected, namely, all the particles move away from the center as though they have high repulsive force. I thought at first I may have mistaken the direction of the force vectors, but I tried flipping it and it did pretty much the same thing.</p>\n\n<pre><code>data = np.random.rand(100, 2)\n\nvelocities = np.zeros_like(data)\nmasses = np.ones_like(data)\ndt = 60 * 60 * 24\n\n\nfor _ in range(10000):\n    forces = np.zeros_like(data)\n\n    for i, node1 in enumerate(data):\n        for j, node2 in enumerate(data):\n            d = node2 - node1\n            # First term is gravitational constant, 1e-8 is a softening factor\n            forces[i] += 6.67384e-11 * d / (np.sqrt(d.dot(d) + 1e-8) ** 3)\n\n    velocities += forces * dt / masses\n    data += velocities * dt\n\n    yield data  # for visualization\n</code></pre>\n\n<p>I also considered that it may just not work in 2D (although there is no reason it shouldn't at all, so I tried it in 3D as well by setting rand dimensions to (100, 3), but the behaviour was the same.</p>\n\n<p>I've looked over other code available online, but I can't seem to find what I've done wrong (or differently from others), so any help would be appreciated.</p>\n\n<hr>\n\n<p><strong>EDIT 1</strong>\nThis actually appears to be consistent with the equations. I've worked out the first couple steps by hand for [-1, 1] and [1, 1] (ignoring G) and for p1, the forces are [0.25, 0.7, 81, 0, 0] respectively. However, since the velocity is so high from the third step, and that particle p2 does the opposite of p1, they move away really fast. However, other implementations easily found online don't face this issue. I can't seem to figure out why. I thought it may have been the initialization, but other implementations don't seem to suffer from this.</p>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1519852473, "post_id": 49038429, "comment_id": 85082577, "body": "One of the main mission of <i>Automation Testing</i> is to reduce the time lost in between performing steps through  <i>Manual Testing</i>. Why would you <code>want to wait for 5 seconds</code>? What is your exact <i>usecase</i>?"}, {"owner": {"reputation": 970, "user_id": 8210371, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f58eb55b40f46d8638a9c7429289b240?s=128&d=identicon&r=PG&f=1", "display_name": "Hannan", "link": "https://stackoverflow.com/users/8210371/hannan"}, "reply_to_user": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1519852672, "post_id": 49038429, "comment_id": 85082690, "body": "I&#39;m not actually testing but trying to make a web scraper where I want to wait for all the data to get loaded including any JS / Ajax before pressing enter. I hope it clarifies."}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "edited": false, "score": 0, "creation_date": 1519852968, "post_id": 49038429, "comment_id": 85082860, "body": "Then you should have been waited for the webelement <code>elem = browser.find_element_by_id(&#39;lst-ib&#39;)</code> to receive  text but not to wait before <code>elem.send_keys(&#39;stackoverflow&#39; + Keys.RETURN)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 970, "user_id": 8210371, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f58eb55b40f46d8638a9c7429289b240?s=128&d=identicon&r=PG&f=1", "display_name": "Hannan", "link": "https://stackoverflow.com/users/8210371/hannan"}, "edited": false, "score": 0, "creation_date": 1519859036, "post_id": 49039990, "comment_id": 85085555, "body": "Yes thats what I ended up doing myself. Thx"}], "tags": [], "owner": {"reputation": 151, "user_id": 9132236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/289903b49e61d56accc8d6b335fdff9b?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Brocious", "link": "https://stackoverflow.com/users/9132236/chris-brocious"}, "is_accepted": true, "score": 0, "last_activity_date": 1519858321, "creation_date": 1519858321, "answer_id": 49039990, "question_id": 49038429, "link": "https://stackoverflow.com/questions/49038429/selenium-python-wait-beforer-entering-keys-return/49039990#49039990", "title": "Selenium / Python wait beforer entering Keys.RETURN", "body": "<p>If you want a specific wait time, you could use time.sleep() </p>\n\n<pre><code>elem = browser.find_element_by_id('lst-ib')\n\ntime.sleep(5)\n\nelem.send_keys('stackoverflow' + Keys.RETURN)\n</code></pre>\n\n<p>Make sure to import time with all your other import packages.</p>\n"}], "owner": {"reputation": 970, "user_id": 8210371, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f58eb55b40f46d8638a9c7429289b240?s=128&d=identicon&r=PG&f=1", "display_name": "Hannan", "link": "https://stackoverflow.com/users/8210371/hannan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 49039990, "answer_count": 1, "score": 0, "last_activity_date": 1519858321, "creation_date": 1519851517, "question_id": 49038429, "link": "https://stackoverflow.com/questions/49038429/selenium-python-wait-beforer-entering-keys-return", "title": "Selenium / Python wait beforer entering Keys.RETURN", "body": "<p>In selenium, I want to wait for 5 seconds before code to press the enter. I understand I have to use WebDriverWait and here is my attempt on it.</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.support.ui import WebDriverWait\n\nbrowser = webdriver.Chrome(\"/Users/Desktop/projects/chromedriver\")\nbrowser.get('https://www.google.com')\nelem = browser.find_element_by_id('lst-ib')\n\nWebDriverWait(elem, 5)\n\nelem.send_keys('stackoverflow' + Keys.RETURN) # How to force selenium for 5 seconds before pressing enter\n</code></pre>\n"}, {"tags": ["python", "django", "django-cms"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 7258312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09825ada68d409a81208903c4f74b250?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis Gathagu", "link": "https://stackoverflow.com/users/7258312/dennis-gathagu"}, "edited": false, "score": 0, "creation_date": 1519853732, "post_id": 49038783, "comment_id": 85083249, "body": "I have tried that but still placeholders do not appear"}, {"owner": {"reputation": 21, "user_id": 2728066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d8b69bc8d9a97e8de701641dde7dc97?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolay B.", "link": "https://stackoverflow.com/users/2728066/nikolay-b"}, "reply_to_user": {"reputation": 85, "user_id": 7258312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09825ada68d409a81208903c4f74b250?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis Gathagu", "link": "https://stackoverflow.com/users/7258312/dennis-gathagu"}, "edited": false, "score": 0, "creation_date": 1519854475, "post_id": 49038783, "comment_id": 85083633, "body": "@DennisGathagu Did CMS_TEMPLATES point to the correct child template? Can you show your templates and CMS_TEMPLATES setting?"}, {"owner": {"reputation": 21, "user_id": 2728066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d8b69bc8d9a97e8de701641dde7dc97?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolay B.", "link": "https://stackoverflow.com/users/2728066/nikolay-b"}, "reply_to_user": {"reputation": 85, "user_id": 7258312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09825ada68d409a81208903c4f74b250?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis Gathagu", "link": "https://stackoverflow.com/users/7258312/dennis-gathagu"}, "edited": false, "score": 0, "creation_date": 1519858277, "post_id": 49038783, "comment_id": 85085250, "body": "@DennisGathagu i&#39;ve tried your example and it works for me. Be sure that you are using correct child template <a href=\"https://www.dropbox.com/s/7jnya5f5cy4ap21/Screenshot%202018-02-28%2014.49.36.png?dl=0\" rel=\"nofollow noreferrer\">dropbox.com/s/7jnya5f5cy4ap21/&hellip;</a>"}, {"owner": {"reputation": 85, "user_id": 7258312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09825ada68d409a81208903c4f74b250?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis Gathagu", "link": "https://stackoverflow.com/users/7258312/dennis-gathagu"}, "edited": false, "score": 0, "creation_date": 1519858723, "post_id": 49038783, "comment_id": 85085451, "body": "i have managed to show the placeholders like you have above but as soon as i add content to the text plugins i can see the page populated with my content as normal but once i publish and exit the edit view or navigate to another page the content doesnt show up on the placeholders in my template, i just get blank fields"}], "tags": [], "owner": {"reputation": 21, "user_id": 2728066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d8b69bc8d9a97e8de701641dde7dc97?s=128&d=identicon&r=PG&f=1", "display_name": "Nikolay B.", "link": "https://stackoverflow.com/users/2728066/nikolay-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1519852947, "creation_date": 1519852947, "answer_id": 49038783, "question_id": 49038422, "link": "https://stackoverflow.com/questions/49038422/djangocms-placeholders-in-templates-do-not-show-up-in-django-cms-structure-vie/49038783#49038783", "title": "DjangoCMS - Placeholders in templates do not show up in django cms structure view", "body": "<p>Inside your child template (which extends base template) there is should be something like this:</p>\n\n<pre><code>{% extends \"base.html\" %}\n{% load cms_tags %}\n\n{% block title %}{% page_attribute \"page_title\" %}{% endblock title %}\n\n{% block content %}\n    &lt;div&gt;\n        {% placeholder \"feature\" %}\n    &lt;/div&gt;\n    &lt;div&gt;\n        {% placeholder \"content\" %}\n    &lt;/div&gt;\n    &lt;div&gt;\n        {% placeholder \"splashbox\" %}\n    &lt;/div&gt;\n{% endblock content %}\n</code></pre>\n\n<p>And base template should looks like this:</p>\n\n<pre><code>{% load cms_tags menu_tags sekizai_tags %}\n&lt;!doctype html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;title&gt;{% block title %}This is my new project home page{% endblock title %}&lt;/title&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n        {% cms_toolbar %}\n        &lt;div class=\"container\"&gt;\n            &lt;ul class=\"nav\"&gt;\n                {% show_menu 0 100 100 100 %}\n            &lt;/ul&gt;\n            {% block content %}{% endblock content %}\n        &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 7258312, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09825ada68d409a81208903c4f74b250?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis Gathagu", "link": "https://stackoverflow.com/users/7258312/dennis-gathagu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 936, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519855838, "creation_date": 1519851497, "last_edit_date": 1519855838, "question_id": 49038422, "link": "https://stackoverflow.com/questions/49038422/djangocms-placeholders-in-templates-do-not-show-up-in-django-cms-structure-vie", "title": "DjangoCMS - Placeholders in templates do not show up in django cms structure view", "body": "<p>I'm using djangoCMS to add CMS functionality in my website templates but the placeholders i have placed on the placed are not showing up, i have defined my <code>CMS_TEMPLATES</code> IN MY <code>settings.py</code> and put the <code>{% load cms_tags sekizai_tags sorl_thumbnail %}</code> on my <code>base.html</code> and also added <code>{% load cms_tags sekizai_tags  %}</code> on my other templates that expand the <code>base.html</code>, but when i log into djangoCMS admin and visit my pages i find no placeholders in my <code>structure view</code>. what could be the problem here?</p>\n\n<p>settings.py</p>\n\n<pre><code>CMS_TEMPLATES = [\n      ('index.html','Home'),\n      ('solutions.html','solutions'),\n      ('commercial.html','Commercial Solar Solution'),\n      ('residential.html','Residential Solar Solution'),\n      ('on-grid.html','On grid solutions'),\n      ('off-grid.html','Off Grid solutions'),\n      ('water-heating.html','Solar Water Heating'),\n      ('solar-water-pumping.html','Solar water pumping'),\n      ('hybrid-grid.html','Hybrid Solutions'),\n      ('outdoor-lighting.html','Outdoor Lighting'),\n      ('contacts.html','Contacts'),\n      ('terms-of-use.html','Terms of use'),\n</code></pre>\n\n<p>]</p>\n\n<p>base.html</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n {% load static %}\n\n {% load cms_tags menu_tags sekizai_tags  %}\n &lt;html lang=\"en\"&gt;\n\n\n\n&lt;head&gt;\n &lt;meta charset=\"utf-8\"&gt;\n &lt;meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\"&gt;\n &lt;title&gt;{% block title %}{% endblock %}&lt;/title&gt;\n {% render_block \"css\" %}\n\n&lt;/head&gt;\n\n&lt;body&gt;{% cms_toolbar %}\n &lt;ul&gt; {% show_menu 0 0 100 100 %} &lt;/ul&gt;\n&lt;div id=\"mySidenav\" class=\"sidenav\"&gt;\n    &lt;div class=\"div\"&gt;\n        &lt;img src=\"{% static 'administration/css/images/icons/logo.png' %}\" alt=\"\" class=\"img-responsive\"&gt;\n    &lt;/div&gt;\n    &lt;ul class=\"navlist\"&gt;\n        &lt;a href=\"javascript:void(0)\" class=\"closebtn\" onclick=\"closeNav()\"&gt;&amp;times;&lt;/a&gt;\n        &lt;li&gt;&lt;a href=\"\"&gt;Home&lt;/a&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;a href=\"{% url 'administration:about' %}\"&gt;About us&lt;/a&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;a href=\"{% url 'administration:blog' %}\"&gt;Blog&lt;/a&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;a href=\"#\"&gt;Projects&lt;/a&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;a href=\"\"&gt;Downloads&lt;/a&gt;&lt;/li&gt;\n    &lt;/ul&gt;\n&lt;/div&gt;\n\n&lt;nav class=\"navbar navbar-default\" role=\"navigation\"&gt;\n    &lt;div class=\"container\"&gt;\n        &lt;div class=\"navbar-header\"&gt;\n            &lt;button type=\"button\" class=\"navbar-toggle\" data-toggle=\"collapse\" data-target=\"#example-navbar-collapse\"&gt;\n                &lt;span class=\"sr-only\"&gt;Toggle navigation&lt;/span&gt;\n                &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n                &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n                &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n            &lt;/button&gt;\n            &lt;a class=\"navbar-brand\" href=\"#\"&gt;\n                &lt;img src=\"{% static 'administration/css/images/icons/logo.png' %}\" alt=\"\" class=\"img-responsive\"&gt;\n            &lt;/a&gt;\n        &lt;/div&gt;\n\n\n&lt;/nav&gt;\n\n{% block content %}\n\n{% endblock %}\n\n{% render_block \"js\" %}\n\n&lt;/body&gt;\n</code></pre>\n\n<p></p>\n\n<p>solutions.html</p>\n\n<pre><code>{% extends 'base.html' %}\n\n{% block title %} Commercial pv solar heating solutions {% \n endblock %}\n\n {% load static  %}\n\n {% load cms_tags %}\n  {% block content %}\n\n     &lt;div class=\"water__heating--section\"&gt;\n\n        &lt;div class=\"row\"&gt;\n\n           &lt;div class=\"col-lg-6 solutions__content--image\" id=\"commercial__banner--image\"&gt;\n\n                    &lt;h4 class=\"small__title\"&gt;support and Evaluation&lt;/h4&gt;\n                    &lt;div class=\"small__content small__content--default\"&gt;\n                        Lorem ipsum dolor sit amet, consectetur adipisicing elit. Minima soluta nesciunt consequuntur esse consectetur\n                    &lt;/div&gt;\n\n            &lt;/div&gt;\n            &lt;div class=\"col-lg-6 solutions__content--box\"&gt;\n\n                &lt;h1 class=\"heavy__title\"&gt; We Can Help your business &lt;span class=\"emphasis\"&gt;go solar&lt;/span&gt; &lt;/h1&gt;\n                &lt;div class=\"small__content ribbon__content--default\"&gt;\n                        {% placeholder \"commercial section one\" %}\n                    &lt;/div&gt;\n            &lt;/div&gt;  \n        &lt;/div&gt;\n&lt;/div&gt;\n{% endblock %}\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy", "shape", "broadcast"], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1519865483, "creation_date": 1519865483, "answer_id": 49041010, "question_id": 49038401, "link": "https://stackoverflow.com/questions/49038401/unable-to-broadcast-numpy-array-but-shape-says-they-have-the-same-shape/49041010#49041010", "title": "Unable to broadcast numpy array, but .shape says they have the same shape", "body": "<pre><code>X = np.zeros((1, length, EMBED_DIM))\n</code></pre>\n\n<p><code>X</code> is 3d.</p>\n\n<pre><code>X[0, i]\n</code></pre>\n\n<p>selects on first 2 dir, so it is (EMBED_DIM,), which according to the error is (50,).</p>\n\n<p>The error thinks <code>y_embed</code> is (2,50), 2 columns of 50.  Apparently it was created by the last iteration.</p>\n\n<pre><code>my_model.predict(X[:, :i+1, :])[0] \n</code></pre>\n\n<p>With <code>i==1</code>, it is giving <code>predict</code> <code>X[:,:2,:]</code>, a (2,50) array.  I don't know what <code>predict</code> does, but I don't think it's a coincidence that the output has the same shape as the input.</p>\n"}], "owner": {"reputation": 55, "user_id": 9425747, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Sean Paulsen", "link": "https://stackoverflow.com/users/9425747/sean-paulsen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1272, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1519865483, "creation_date": 1519851384, "last_edit_date": 1519865329, "question_id": 49038401, "link": "https://stackoverflow.com/questions/49038401/unable-to-broadcast-numpy-array-but-shape-says-they-have-the-same-shape", "title": "Unable to broadcast numpy array, but .shape says they have the same shape", "body": "<p>Here's the first part of my function that wants to generate text from a trained LSTM and a word embedding of dim 50. The problem comes when I try to set row i of X equal to the embedding vector y_embed. However, that problem only comes up on the third iteration of the for loop. That's strange to me, because I'd expect every row of X to have the same shape.</p>\n\n<pre><code>def generate_text(my_model, length):\n    ix = np.random.randint(VOCAB_SIZE) #start generating by some \n         random index\n    y_word = [reverse_dictionary[ix]] #get the word with that index\n    y_embed = w2vec[ix] #get the embedding vector\n    print(y_embed.shape)\n\n    X = np.zeros((1, length, EMBED_DIM)) #make our numpy array\n    print(X[0,2].shape)\n    for i in range(length): #however many words we want\n        print(\"i is \"+str(i))\n        X[0, i] = y_embed #current row of X is current word embedding\n        y_embed = my_model.predict(X[:, :i+1, :])[0] \n        #input what we've generated so far, model.predict gives us a list, take the first one\n        #we'll add it to our input on the next loop iteration\n\n        y_word.append(vec2w(y_embed)) #lookup the word by its embedding\n</code></pre>\n\n<p>The for loop works for its first two iterations, and then throws this error when i=2:  </p>\n\n<pre><code> X[0, i] = y_embed #current row of X is current word embedding  \n ValueError: could not broadcast input array from shape (2,50) into shape (50)\n</code></pre>\n\n<p>So that's why I have it print the shape of y_embed and X[0,2] beforehand, and the console prints:</p>\n\n<pre><code>(50,)\n\n(50,)\n</code></pre>\n\n<p>So as far as I can tell, they DO have the same shape. I'm still pretty new to numpy, so maybe it's something obvious, but I can't figure this one out. I should add that I'm using Keras, and model.predict expects a 3D tensor, which is why X is defined the way it is. I also tried setting X[0,i,:] = y_embed but that produced the same error at the same time.</p>\n"}, {"tags": ["python", "python-3.x", "concurrency", "request"], "answers": [{"comments": [{"owner": {"reputation": 918, "user_id": 7238958, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10213863953341976/picture?type=large", "display_name": "Rafael Marques", "link": "https://stackoverflow.com/users/7238958/rafael-marques"}, "edited": false, "score": 0, "creation_date": 1519951276, "post_id": 49059734, "comment_id": 85127055, "body": "yeah, that was the problem. I created a new post related to the map function, after i discovered that problem. What do you mean by the map is lazy? related post: <a href=\"https://stackoverflow.com/questions/49039676/py-queue-library-mapping-array-to-queue-py3-issues\" title=\"py queue library mapping array to queue py3 issues\">stackoverflow.com/questions/49039676/&hellip;</a>"}, {"owner": {"reputation": 322, "user_id": 1766739, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3867e8d6439aaeb6adefde82812755b5?s=128&d=identicon&r=PG", "display_name": "Boyd Johnson", "link": "https://stackoverflow.com/users/1766739/boyd-johnson"}, "reply_to_user": {"reputation": 918, "user_id": 7238958, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10213863953341976/picture?type=large", "display_name": "Rafael Marques", "link": "https://stackoverflow.com/users/7238958/rafael-marques"}, "edited": false, "score": 0, "creation_date": 1519952344, "post_id": 49059734, "comment_id": 85127372, "body": "<a href=\"https://stackoverflow.com/questions/40015439/why-does-map-return-a-map-object-instead-of-a-list-in-python-3\" title=\"why does map return a map object instead of a list in python 3\">stackoverflow.com/questions/40015439/&hellip;</a> This post has some good thoughts on how maps are lazy. What I mean is they don&#39;t execute right away but they do later when they are accessed."}], "tags": [], "owner": {"reputation": 322, "user_id": 1766739, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3867e8d6439aaeb6adefde82812755b5?s=128&d=identicon&r=PG", "display_name": "Boyd Johnson", "link": "https://stackoverflow.com/users/1766739/boyd-johnson"}, "is_accepted": true, "score": 2, "last_activity_date": 1519943423, "creation_date": 1519943423, "answer_id": 49059734, "question_id": 49038347, "link": "https://stackoverflow.com/questions/49038347/concurrent-requests-with-queue-and-thread/49059734#49059734", "title": "concurrent requests with queue and thread", "body": "<p>I would guess that the flights are not being put on the queue. <code>map(q.put, flights)</code> is lazy, and is never accessed so it is as if it didn't happen. I would just iterate.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>def main_scraper(flights):\r\n  print(\"main scraper was called, got: \")\r\n  print(flights)\r\n  data = []\r\n  q = Queue()\r\n  for flight in flights:\r\n      q.put(flight)\r\n  for i in range(0,  5):\r\n      t = Thread(target = scraper_worker, args = (q, data))\r\n      t.daemon = True\r\n      t.start()\r\n  q.join()\r\n  return data</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 918, "user_id": 7238958, "user_type": "registered", "accept_rate": 0, "profile_image": "https://graph.facebook.com/10213863953341976/picture?type=large", "display_name": "Rafael Marques", "link": "https://stackoverflow.com/users/7238958/rafael-marques"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3170, "favorite_count": 1, "accepted_answer_id": 49059734, "answer_count": 1, "score": 0, "last_activity_date": 1519943423, "creation_date": 1519851203, "question_id": 49038347, "link": "https://stackoverflow.com/questions/49038347/concurrent-requests-with-queue-and-thread", "title": "concurrent requests with queue and thread", "body": "<p>I am trying to make concurrent API calls with python.\nI based my code on the solution (first answer) presented in this thread: <a href=\"https://stackoverflow.com/questions/2632520/what-is-the-fastest-way-to-send-100-000-http-requests-in-python\">What is the fastest way to send 100,000 HTTP requests in Python?</a></p>\n\n<p>Currently, my code is broken.\nI have a main function which creates the queue, populates it, initiates the threads, starts them, and joins the queue.\nI also have a target function which should make the get requests to the API.</p>\n\n<p>The difficulties I am experiencing right now is that \nthe target function does not execute the necessary work.\n<strong>The target is called, but it acts as the queue is empty.</strong>\nThe first print is executed (\"inside scraper worker\"), while the second (\"inside scraper worker - queue NOT empty\") is not.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>def main_scraper(flights):\r\n  print(\"main scraper was called, got: \")\r\n  print(flights)\r\n  data = []\r\n  q = Queue()\r\n  map(q.put, flights)\r\n  for i in range(0,  5):\r\n      t = Thread(target = scraper_worker, args = (q, data))\r\n      t.daemon = True\r\n      t.start()\r\n  q.join()\r\n  return data</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>def scraper_worker(q, data):\r\n  print(\"inside scraper worker\")\r\n  while not q.empty():\r\n    print(\"inside scraper worker, queue not empty\")\r\n    f = q.get()\r\n    url = kiwi_url(f)\r\n    response = requests.get(url)\r\n    response_data = response.json()\r\n    results = parseResults(response_data)\r\n    q.task_done()\r\n    print(\"task done. results:\")\r\n    print(results)\r\n    #f._price = results[0][\"price\"]\r\n    #f._url = results[0][\"deep_link\"]\r\n    data.append(results)\r\n  return data</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>I hope this is enough information for you to help me out. \nOtherwise, I will rewrite the code in order to create a code that can be run by anyone.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2202, "user_id": 3179169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ff0167d99069678064f633be190b386?s=128&d=identicon&r=PG&f=1", "display_name": "clinomaniac", "link": "https://stackoverflow.com/users/3179169/clinomaniac"}, "edited": false, "score": 0, "creation_date": 1519851588, "post_id": 49038240, "comment_id": 85082083, "body": "What conditions do you want to use for the loop? What kind of loop do you have in mind? What would cause the loop to end? What have you tried to do?"}], "answers": [{"tags": [], "owner": {"reputation": 70, "user_id": 3430996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d07c471df87c4eb0f21e60597207269a?s=128&d=identicon&r=PG&f=1", "display_name": "mrfred489", "link": "https://stackoverflow.com/users/3430996/mrfred489"}, "is_accepted": false, "score": 1, "last_activity_date": 1519851011, "creation_date": 1519851011, "answer_id": 49038303, "question_id": 49038240, "link": "https://stackoverflow.com/questions/49038240/adding-a-loop-for-my-school-work/49038303#49038303", "title": "Adding a loop for my school work", "body": "<p>You can put all of the code above in a <code>while True</code> loop, and in the very last line inside the else after printing, write <code>break</code> </p>\n\n<p>So the start is </p>\n\n<pre><code>while True:\n    if rank == \"expert\":\n</code></pre>\n\n<p>and the end code is </p>\n\n<pre><code>    if answer == \"yes\": #Starts an 'if' statemant\n        print(\"OK\") #Displays 'OK' which tells the user the programme will continue.\n    else:\n        print(\"Goodbye\")\n        break\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 6570788, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-BxozKBIl850/AAAAAAAAAAI/AAAAAAAAABw/-vA0F9FEUMc/photo.jpg?sz=128", "display_name": "A.N. O&#39;Nyme", "link": "https://stackoverflow.com/users/6570788/a-n-onyme"}, "is_accepted": false, "score": 1, "last_activity_date": 1519851449, "creation_date": 1519851449, "answer_id": 49038412, "question_id": 49038240, "link": "https://stackoverflow.com/questions/49038240/adding-a-loop-for-my-school-work/49038412#49038412", "title": "Adding a loop for my school work", "body": "<p>@mrfred489 's answer is good, but if your facing such problems it may help you a lot to learn a bit more of Python and programming languages in general ; google for Python beginner course :)</p>\n"}], "owner": {"reputation": 1, "user_id": 9425712, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ps4tIR6Eyrs/AAAAAAAAAAI/AAAAAAAAAGI/NKsx_0XYOvA/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/9425712/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": -5, "last_activity_date": 1519851449, "creation_date": 1519850759, "question_id": 49038240, "link": "https://stackoverflow.com/questions/49038240/adding-a-loop-for-my-school-work", "title": "Adding a loop for my school work", "body": "<p>i currently need help with adding a loop that restarts the programme right after it asks the user if they would like to add another team instead of having the programme just end.</p>\n\n<pre><code>if rank == \"expert\": #If the user's rank is expert the programme will add an additional cost of 25 to the fee.\n    if country == \"EU\": \n        print(\"Your fee is\" + str(1.25*25*4)+\"EUR\")\n    elif country == \"US\": \n        print(\"Your fee is\" + str(1.50*25*4)+\"USD\")\n    elif country == \"AU\":\n        print(\"Your fee is\" + str(2.00*25*4)+\"AUD\")\n    else:\n        print(\"Your fee is \" + str(25*4)+\"GBP\")\nelse: #If the user's rank is anything other than expert such as beginner, the programme will charge the normal amount for the fee.\n    if country == \"EU\":\n        print(\"Your fee is\" + str(1.25*10*4)+\"EUR\")\n    elif country == \"US\": \n        print(\"Your fee is \" + str(1.50*10*4)+\"USD\")\n    elif country == \"AU\":\n        print(\"Your fee is \" + str(2.00*10*4)+\"AUD\")\n    else:\n        print(\"Your fee is \" + str(10*4)+\"GBP\")\n\nprint(\"The names of your players are \" +player1,player2,player3,player4)\n\nprint(\"Would you like to enter another team?\") #Asks user if they would like to input another team.\nanswer = input() #Leaves a gap for the user to input.\nanswer = answer.lower() #Converts 'answer' into all lower case.\nif answer == \"yes\": #Starts an 'if' statemant\n    print(\"OK\") #Displays 'OK' which tells the user the programme will continue.\nelse:\n    print(\"Goodbye\")\n</code></pre>\n"}, {"tags": ["python", "performance", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "reply_to_user": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "edited": false, "score": 0, "creation_date": 1519851906, "post_id": 49038327, "comment_id": 85082260, "body": "@Gabriel Yes, broadcasting is almost always faster than functions."}], "tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": true, "score": 2, "last_activity_date": 1519851119, "creation_date": 1519851119, "answer_id": 49038327, "question_id": 49038238, "link": "https://stackoverflow.com/questions/49038238/efficiently-replace-vstack-concatenate-applied-to-numpy-arrays/49038327#49038327", "title": "Efficiently replace vstack + concatenate applied to numpy arrays", "body": "<p>You could use <code>np.concatenate()</code> and a simple <em>broadcasting</em>:</p>\n\n<pre><code>In [18]: np.concatenate((a1, a2, a1, a2))[:,None]\n</code></pre>\n"}], "owner": {"reputation": 32256, "user_id": 1391441, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/FP3Un.jpg?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/1391441/gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 49038327, "answer_count": 1, "score": 2, "last_activity_date": 1519851119, "creation_date": 1519850742, "question_id": 49038238, "link": "https://stackoverflow.com/questions/49038238/efficiently-replace-vstack-concatenate-applied-to-numpy-arrays", "title": "Efficiently replace vstack + concatenate applied to numpy arrays", "body": "<p>The last two lines in the block below are repeated millions of times in my actual code:</p>\n\n<pre><code>import numpy as np\n\n# Data with proper shape\nN1, N2 = 3, 5\naa = np.random.uniform(0., 1., (23, 2000))\na1 = np.random.uniform(0., 1., N1)\na2 = np.random.uniform(0., 1., N2)\n\n# Replace these two lines as efficiently as possible\na3 = np.vstack(np.concatenate((a1, a2, a1, a2)))\naa[:(N1 + N2 + N1 + N2)] = aa[:(N1 + N2 + N1 + N2)] + a3\n</code></pre>\n\n<p>Combining <code>np.vstack()</code> with <code>np.concatenate()</code> to then add the result to a section of the array seems less than optimal.</p>\n\n<p>Is there a better, ie: <em>more efficient</em>, way to do this?</p>\n"}, {"tags": ["python", "excel", "xlrd"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9425676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f382b52666eb68d50b89e054fd7e5c?s=128&d=identicon&r=PG&f=1", "display_name": "mls_wnc", "link": "https://stackoverflow.com/users/9425676/mls-wnc"}, "is_accepted": false, "score": 0, "last_activity_date": 1520945133, "creation_date": 1520945133, "answer_id": 49256584, "question_id": 49038190, "link": "https://stackoverflow.com/questions/49038190/read-an-excel-sheet-with-xlrd-and-find-a-cell-value-below-the-string-you-search/49256584#49256584", "title": "read an excel sheet with xlrd and find a cell value below the string you search for", "body": "<p>This is the code that worked for me. It is not perfect, but it worked really well. Hopefully, it might help someone else in the future. Thanks.</p>\n\n<p>Code:</p>\n\n<pre><code>import os\nimport re\nimport xlrd\ndef rename_excel_files():\n    my_list = [list] # list is your list of locations\n    for path in my_list:\n        for filename in os.listdir(path):   \n            try:    \n                book = xlrd.open_workbook(path + filename)\n            except:\n                pass\n            try:\n                sheet = book.sheet_by_index(0) #sheet number 0 based\n                for rowidx in range(0,50): #row range\n                    row = sheet.row(rowidx)\n                    for colidx, cell in enumerate(row):\n                        m = re.search(research string, str(cell.value)) #research string is you regex that you are looking for, re paramaters will change for need below\n                        q = re.search(research string, str(cell.value)) #research string is you regex that you are looking for\n                        if m:\n                            celllocation = sheet.cell(rowidx + 1 , colidx)\n                            p = (str(celllocation).split('.')[0])\n                            n = re.search('\\d+', p)                        \n#  test                         print (path + filename + '----------&gt;', path + filename[0:3] + '_' + n.group() + \".xls\")\n                            if os.path.isfile(path + filename[0:3] + '_' + n.group() + \".xls\"):\n                                print (\"File Exists Already \" + path + filename)\n                            else:\n                                print (path + filename + '----------&gt;', path + filename[0:3] + '_' + n.group() + \".xls\")\n                                os.rename (path + filename, path + filename[0:3] + '_' + n.group() + \".xls\")\n                        elif q:\n                            celllocation = sheet.cell(rowidx + 1 , colidx)\n                            p = (str(celllocation).split('.')[0])\n                            n = re.search('\\d+', p)\n#    test                       print (path + filename + '----------&gt;', path + filename[0:3] + '_' + n.group() + \".xls\")\n                            if os.path.isfile(path + filename[0:3] + '_' + n.group() + \".xls\"):\n                                print (\"File Exists Already \" + path + filename)\n                            else:\n                                print (path + filename + '----------&gt;', path + filename[0:3] + '_' + n.group() + \".xls\")\n                                os.rename (path + filename, path + filename[0:3] + '_' + n.group() + \".xls\")\n                sheet.unload () #speeds the whole thing up because you are closing the sheet and moving on to the next one\n            except:\n                pass                   \nrename_excel_files()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9425676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f382b52666eb68d50b89e054fd7e5c?s=128&d=identicon&r=PG&f=1", "display_name": "mls_wnc", "link": "https://stackoverflow.com/users/9425676/mls-wnc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 713, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1520945133, "creation_date": 1519850542, "last_edit_date": 1519939218, "question_id": 49038190, "link": "https://stackoverflow.com/questions/49038190/read-an-excel-sheet-with-xlrd-and-find-a-cell-value-below-the-string-you-search", "title": "read an excel sheet with xlrd and find a cell value below the string you search for", "body": "<p>I am new, so excuse my ignorance if I ask something wrong please. I need to search a workbook to find a string, then I need to get my cell value from the cell directly below that string. When I have found the value, I want to take it and change the filename of the .xls to retain the first three letters of the filename and append the found value on to it. It could be anywhere in the sheet, there are no headers, it is more like a form. Any help is appreciated, I can't seem to find an answer to this. What I have tried is below for finding the cell value of the string I searched for. I just can't pull the data in the cell below. I have thousands of these files to look through and 2 possible strings, although I have not gotten that far along in my python code yet:</p>\n\n<pre><code>import os\nfrom xlrd import open_workbook\npath = \"a_path\"\n\nfor filename in os.listdir(path):\n\n\n    book = open_workbook(\"some_workbook\")\n\n\nfor sheet in book.sheets():\nfor rowidx in range(sheet.nrows):\n    row = sheet.row(rowidx)\n    for colidx, cell in enumerate(row):\n\n        if cell.value == \"String\" :\n                 print (sheet.name)\n                 print (colidx)\n                 print (rowidx)\n                 print (cell.value)\n</code></pre>\n\n<p>New code. I am further along, but I cannot find a way to limit the columns now that I have gotten to the next row.</p>\n\n<pre><code>import os\nimport re\nimport xlrd\ndef rename_excel_files():\npath = filename\n\nfor filename in os.listdir(path):   \n    try:    \n        book = xlrd.open_workbook(path + filename)\n    except:\n        pass\n    try:\n        sheet = book.sheet_by_index(0)\n        for rowidx in range(sheet.nrows):\n            row = sheet.row(rowidx)\n            for colidx, cell in enumerate(row):\n                m = re.search(r' string ', str(cell.value))\n                if m: \n                    nextrow = sheet.row(rowidx + 1)\n                    for i, cell2 in enumerate(nextrow):\n                        newfileERnbr = (str(cell2.value).split('.')[0])\n                        print (filename + newfileERnbr)\n    except:\n        pass                   \nrename_excel_files()            \n</code></pre>\n"}, {"tags": ["python", "sqlite", "sql-update", "sql-insert"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 2396871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eee8b585fa605a4c9c205803ccb7c6b?s=128&d=identicon&r=PG", "display_name": "ShaunBach", "link": "https://stackoverflow.com/users/2396871/shaunbach"}, "edited": false, "score": 0, "creation_date": 1519851371, "post_id": 49038279, "comment_id": 85081971, "body": "Thank you so much, this makes a lot of sense."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 2, "last_activity_date": 1519851335, "last_edit_date": 1519851335, "creation_date": 1519850910, "answer_id": 49038279, "question_id": 49038171, "link": "https://stackoverflow.com/questions/49038171/how-to-edit-the-contents-of-a-specific-row-in-python-sqlite3-using-rowid/49038279#49038279", "title": "How to edit the contents of a specific row in Python SQLite3 using ROWID", "body": "<p><code>INSERT</code> always adds a <em>new</em> row, you can't use a <code>WHERE</code> clause when using <code>INSERT</code>. So yes, you have to use <code>UPDATE</code> here. Your <code>UPDATE</code> syntax is wrong however.</p>\n\n<p><code>UPDATE</code> uses <code>columname=value</code> pairs, see the <a href=\"https://sqlite.org/lang_update.html\" rel=\"nofollow noreferrer\">official documentation for <code>UPDATE</code></a>:</p>\n\n<pre><code>c.execute(\n    \"\"\"UPDATE {} SET unix=?, datestamp=?, keyword=?, value=?\n       WHERE ROWID = ?\"\"\".format(tableToEdit),\n    (unixVar, dateStampVar, keywordVar, valueVar, int(rowToEdit)))\n</code></pre>\n\n<p>I switched from using concatenation to <code>str.format()</code>, but only to put the table name in. The <code>ROWID</code> value can be passed in as a query parameter, so do so.</p>\n\n<p>Demo:</p>\n\n<pre><code>&gt;&gt;&gt; import sqlite3\n&gt;&gt;&gt; conn = sqlite3.connect(':memory:')\n&gt;&gt;&gt; conn.execute('''\n... CREATE TABLE stuffToPlot (unix REAL, datestamp TEXT, keyword TEXT, value INTEGER)\n... ''')\n&lt;sqlite3.Cursor object at 0x10f049ce0&gt;\n&gt;&gt;&gt; with conn:\n...     for _ in range(10):\n...         c = conn.execute('''\n...             INSERT INTO stuffToPlot VALUES (42.0, \"mar-2010\", \"The quick brown fox\", 81)\n...         ''')\n...\n&gt;&gt;&gt; tableToEdit = 'stuffToPlot'\n&gt;&gt;&gt; rowToEdit = '5'\n&gt;&gt;&gt; unixVar = 5.5\n&gt;&gt;&gt; dateStampVar ='feb-2018'\n&gt;&gt;&gt; keywordVar = 'Hello World'\n&gt;&gt;&gt; valueVar = 25\n&gt;&gt;&gt; with conn:\n...     conn.execute(\n...         \"\"\"UPDATE {} SET unix=?, datestamp=?, keyword=?, value=?\n...            WHERE ROWID = ?\"\"\".format(tableToEdit),\n...         (unixVar, dateStampVar, keywordVar, valueVar, int(rowToEdit)))\n...\n&lt;sqlite3.Cursor object at 0x10f049ce0&gt;\n&gt;&gt;&gt; print(*conn.execute('SELECT * FROM stuffToPlot WHERE ROWID=5'))\n(5.5, 'feb-2018', 'Hello World', 25)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 2396871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eee8b585fa605a4c9c205803ccb7c6b?s=128&d=identicon&r=PG", "display_name": "ShaunBach", "link": "https://stackoverflow.com/users/2396871/shaunbach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1239, "favorite_count": 0, "accepted_answer_id": 49038279, "answer_count": 1, "score": 0, "last_activity_date": 1519851563, "creation_date": 1519850462, "last_edit_date": 1519851563, "question_id": 49038171, "link": "https://stackoverflow.com/questions/49038171/how-to-edit-the-contents-of-a-specific-row-in-python-sqlite3-using-rowid", "title": "How to edit the contents of a specific row in Python SQLite3 using ROWID", "body": "<p>I have the following database (test.db):\n<a href=\"https://i.stack.imgur.com/yN8dw.jpg\" rel=\"nofollow noreferrer\">Test Database</a></p>\n\n<p>As seen in the picture,I created and populated a table (\"stuffToPlot\"). </p>\n\n<p>I want to edit a specific row (the 5th row for example), and change all the values therein.\nI tried the following code to do this:</p>\n\n<pre><code>import sqlite3\n\nconn = sqlite3.connect('test.db')\nc = conn.cursor()\n\ntableToEdit = 'stuffToPlot'\nrowToEdit = '5'\nunixVar = 5.5\ndateStampVar ='feb-2018'\nkeywordVar = 'Hello World'\nvalueVar = 25\n\nc.execute(\"\"\"INSERT INTO \"\"\"+tableToEdit+\"\"\" (unix, datestamp, keyword, value)\nVALUES (?,?,?,?) WHERE ROWID =\"\"\" +rowToEdit),(unixVar, dateStampVar, keywordVar, valueVar) \n\n\nconn.commit()\n\nc.close()\nconn.close()\n</code></pre>\n\n<p>I get the following error when trying to run the code:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):\n    File \"C:\\Users\\Bob\\Documents\\Eclipse Workspace\\Python Test\\SQLite3\\SQLite3-3.py\", line 19, in \n      VALUES (?,?,?,?) WHERE ROWID =\"\"\" +rowToEdit),(unixVar, dateStampVar, keywordVar, valueVar)\n  sqlite3.OperationalError: near \"WHERE\": syntax error</p>\n</blockquote>\n\n<p>I have also tried using the UPDATE/SET method, but get a different error:</p>\n\n<pre><code>c.execute(\"\"\"UPDATE \"\"\"+tableToEdit+\"\"\" (unix, datestamp, keyword, value)\nSET (?,?,?,?) WHERE ROWID =\"\"\" +rowToEdit),(unixVar, dateStampVar, keywordVar, valueVar)\n</code></pre>\n\n<blockquote>\n  <p>File \"C:\\Users\\Shaun\\Documents\\Eclipse Workspace\\Python Test\\SQLite3\\SQLite3-3.py\", line 24, in \n      SET (?,?,?,?) WHERE ROWID =\"\"\" +rowToEdit),(unixVar, dateStampVar, keywordVar, valueVar)\n  sqlite3.OperationalError: near \"(\": syntax error</p>\n</blockquote>\n\n<p>I just want to edit a specific row (using ROWID) ,any help would be greatly appreciated.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9425727"}, "is_accepted": true, "score": 2, "last_activity_date": 1519850739, "creation_date": 1519850739, "answer_id": 49038234, "question_id": 49038164, "link": "https://stackoverflow.com/questions/49038164/repeating-counts-in-pandas-data-frame/49038234#49038234", "title": "Repeating Counts in Pandas Data Frame", "body": "<p>You can do: </p>\n\n<pre><code>df[\"counter_gen\"] = df.index % 3 + 1\n</code></pre>\n\n<p><code>+1</code> will get rid of the zero since mod starts from zero, and the <code>3</code> is determined by you.</p>\n"}, {"tags": [], "owner": {"reputation": 14311, "user_id": 5085211, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eEZjd.png?s=128&g=1", "display_name": "fuglede", "link": "https://stackoverflow.com/users/5085211/fuglede"}, "is_accepted": false, "score": 0, "last_activity_date": 1519851661, "last_edit_date": 1519851661, "creation_date": 1519851183, "answer_id": 49038342, "question_id": 49038164, "link": "https://stackoverflow.com/questions/49038164/repeating-counts-in-pandas-data-frame/49038342#49038342", "title": "Repeating Counts in Pandas Data Frame", "body": "<p>If performance is crucial, you may be able to make use of something like</p>\n\n<pre><code>np.repeat([[1, 2, 3]], len(df)/3 + 1, 0).ravel()\n</code></pre>\n\n<p>For a length 10^6 data frame, this is roughly 8 times faster to generate than the (much more elegant) <code>df.index % 3</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 11923, "user_id": 1577947, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f343750acd1f96953260b47c705582d9?s=128&d=identicon&r=PG", "display_name": "Jarad", "link": "https://stackoverflow.com/users/1577947/jarad"}, "edited": false, "score": 0, "creation_date": 1519851795, "post_id": 49038413, "comment_id": 85082193, "body": "put&#39;s an inplace operation? If you don&#39;t make a copy of the index, does this also replace the index of the dataframe inplace as seen above?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 11923, "user_id": 1577947, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f343750acd1f96953260b47c705582d9?s=128&d=identicon&r=PG", "display_name": "Jarad", "link": "https://stackoverflow.com/users/1577947/jarad"}, "edited": false, "score": 0, "creation_date": 1519851830, "post_id": 49038413, "comment_id": 85082208, "body": "@Jarad yep you are right , I even did not notice that , cool ~"}, {"owner": {"reputation": 11923, "user_id": 1577947, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f343750acd1f96953260b47c705582d9?s=128&d=identicon&r=PG", "display_name": "Jarad", "link": "https://stackoverflow.com/users/1577947/jarad"}, "edited": false, "score": 0, "creation_date": 1519851902, "post_id": 49038413, "comment_id": 85082258, "body": "Thanks for sharing put, I wasn&#39;t familiar! Much appreciated."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 11923, "user_id": 1577947, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f343750acd1f96953260b47c705582d9?s=128&d=identicon&r=PG", "display_name": "Jarad", "link": "https://stackoverflow.com/users/1577947/jarad"}, "edited": false, "score": 0, "creation_date": 1519852118, "post_id": 49038413, "comment_id": 85082365, "body": "@Jarad nope , you are better than me , without your input I even did not notice that is inplace operation cheers"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 2, "last_activity_date": 1519851452, "creation_date": 1519851452, "answer_id": 49038413, "question_id": 49038164, "link": "https://stackoverflow.com/questions/49038164/repeating-counts-in-pandas-data-frame/49038413#49038413", "title": "Repeating Counts in Pandas Data Frame", "body": "<p>By using <code>np.put</code> </p>\n\n<pre><code>a=df.index.values\na\nOut[637]: array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9], dtype=int64)\nnp.put(a,a,np.array([1,2,3]))\na\nOut[639]: array([1, 2, 3, 1, 2, 3, 1, 2, 3, 1], dtype=int64)\ndf['New']=a\ndf\nOut[641]: \n   counter item  New\n1        1    a    1\n2        2    b    2\n3        3    c    3\n1        1    d    1\n2        2    e    2\n3        3    f    3\n1        1    g    1\n2        2    h    2\n3        3    i    3\n1        1    k    1\n</code></pre>\n"}], "owner": {"reputation": 776, "user_id": 5724749, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4822160a11083922051f5c79103a475a?s=128&d=identicon&r=PG&f=1", "display_name": "93i7hdjb", "link": "https://stackoverflow.com/users/5724749/93i7hdjb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 49038234, "answer_count": 3, "score": 0, "last_activity_date": 1519851661, "creation_date": 1519850448, "question_id": 49038164, "link": "https://stackoverflow.com/questions/49038164/repeating-counts-in-pandas-data-frame", "title": "Repeating Counts in Pandas Data Frame", "body": "<pre><code>import pandas as pd\ndf = pd.DataFrame({\n      'item':['a','b','c','d','e','f','g','h','i','k'],\n      'counter':[1,2,3,1,2,3,1,2,3,1]\n      })\n</code></pre>\n\n<p>Given this structure, what is the best way to auto-generate <code>df['counter']</code> as a repeating range of integers, cycling through 1, 2, and 3 until it comes to the last row?</p>\n"}]