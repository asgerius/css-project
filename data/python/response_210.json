[{"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1407, "user_id": 5919154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca0f83c18e982b8675e9ba617307194e?s=128&d=identicon&r=PG&f=1", "display_name": "nathan.medz", "link": "https://stackoverflow.com/users/5919154/nathan-medz"}, "edited": false, "score": 2, "creation_date": 1547683092, "post_id": 54227149, "comment_id": 95280324, "body": "try casting your var2 to an int. Also your converter code is never run so you need to call my_converter()"}, {"owner": {"reputation": 8584, "user_id": 890242, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a002dc8cd51a7d25e31e1bf4662b1b85?s=128&d=identicon&r=PG", "display_name": "miraculixx", "link": "https://stackoverflow.com/users/890242/miraculixx"}, "edited": false, "score": 2, "creation_date": 1547683247, "post_id": 54227149, "comment_id": 95280362, "body": "This program does not do any conversions. You need to call <code>my_converter()</code> somewhere. I strongly suggest to follow a tutorial for programming with Python."}, {"owner": {"reputation": 551, "user_id": 10554768, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0874152f77551e2be38904d25e5822e?s=128&d=identicon&r=PG&f=1", "display_name": "robert", "link": "https://stackoverflow.com/users/10554768/robert"}, "edited": false, "score": 1, "creation_date": 1547683273, "post_id": 54227149, "comment_id": 95280367, "body": "First, look at what nathan said above. However, you are defining a method, then not calling it. It is also not proper to use global variables like this, and you should pass them to the my_converter function. (Also, since you print the same thing at the end, you can put it outside of any elif block)"}, {"owner": {"reputation": 113, "user_id": 10746130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d1d94c4b2758e8b29fce61893b7427?s=128&d=identicon&r=PG&f=1", "display_name": "Dev-MDW2", "link": "https://stackoverflow.com/users/10746130/dev-mdw2"}, "edited": false, "score": 0, "creation_date": 1547684071, "post_id": 54227149, "comment_id": 95280523, "body": "Thank for the info, I wasn&#39;t aware that I have to cast an input as an int when the input is going to be an integer, though looking at that statement now, that does  make logical sense. I am used to the Linux bash shell and VBA, where I don&#39;t necessarily have to do so."}], "answers": [{"tags": [], "owner": {"reputation": 400, "user_id": 2635857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e8b461864b2182a540de76eb72e58eb?s=128&d=identicon&r=PG", "display_name": "Erfan Alimohammadi", "link": "https://stackoverflow.com/users/2635857/erfan-alimohammadi"}, "is_accepted": false, "score": 1, "last_activity_date": 1547683370, "creation_date": 1547683370, "answer_id": 54227200, "question_id": 54227149, "link": "https://stackoverflow.com/questions/54227149/python-interpreter-ignoring-if-elif-statement/54227200#54227200", "title": "Python Interpreter Ignoring IF - ELIF Statement", "body": "<p><code>var2</code> type is string, convert it to int.</p>\n\n<pre><code>var2 = int(var2)\n</code></pre>\n\n<p>As you know, <code>'1' == 1</code> is False.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user10881661"}, "is_accepted": false, "score": 1, "last_activity_date": 1547683397, "creation_date": 1547683397, "answer_id": 54227204, "question_id": 54227149, "link": "https://stackoverflow.com/questions/54227149/python-interpreter-ignoring-if-elif-statement/54227204#54227204", "title": "Python Interpreter Ignoring IF - ELIF Statement", "body": "<p>You did not call the function my_converter().  To call a function essentially means to run it.  To call the function, just type <code>my_converter()</code> on a line that's not indented, at the end of the program.</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 10746130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d1d94c4b2758e8b29fce61893b7427?s=128&d=identicon&r=PG&f=1", "display_name": "Dev-MDW2", "link": "https://stackoverflow.com/users/10746130/dev-mdw2"}, "edited": false, "score": 1, "creation_date": 1547683903, "post_id": 54227209, "comment_id": 95280493, "body": "This solved it. I forgot to call it, and I was unaware that I have to use an &quot;int(&quot; to get an integer input. Thank you very much @tmcnicol"}], "tags": [], "owner": {"reputation": 497, "user_id": 3246419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99017ab0cf42916f3ececbf0f9c7ee46?s=128&d=identicon&r=PG&f=1", "display_name": "tmcnicol", "link": "https://stackoverflow.com/users/3246419/tmcnicol"}, "is_accepted": true, "score": 1, "last_activity_date": 1547683414, "creation_date": 1547683414, "answer_id": 54227209, "question_id": 54227149, "link": "https://stackoverflow.com/questions/54227149/python-interpreter-ignoring-if-elif-statement/54227209#54227209", "title": "Python Interpreter Ignoring IF - ELIF Statement", "body": "<p>Two small issues, you are not calling the function and you are trying to compare a string, from the input, and an int, in your logical test.</p>\n\n<pre><code>...\nvar2 = int(input(\"What Currency Do You Want To Convert To?: \"))\n\ndef my_converter():\n    if var2 == 1:\n        var3 = var1 * float(114.62)\n        var4 = \"Yen\"\n        print(USD, \"U.S. Dollars equals\", var3, var4)\n    elif var2 == 2:\n        var3 = var1 * float(1.14)\n        var4 = \"Euro\"\n        print(USD, \"U.S. Dollars equals\", var3, var4)\n    ...\n\n\nmy_converter()\n</code></pre>\n\n<p>This now works as expected</p>\n"}], "owner": {"reputation": 113, "user_id": 10746130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d1d94c4b2758e8b29fce61893b7427?s=128&d=identicon&r=PG&f=1", "display_name": "Dev-MDW2", "link": "https://stackoverflow.com/users/10746130/dev-mdw2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "closed_date": 1547684638, "accepted_answer_id": 54227209, "answer_count": 3, "score": 0, "last_activity_date": 1547683414, "creation_date": 1547682958, "question_id": 54227149, "link": "https://stackoverflow.com/questions/54227149/python-interpreter-ignoring-if-elif-statement", "closed_reason": "Duplicate", "title": "Python Interpreter Ignoring IF - ELIF Statement", "body": "<p>I'm trying to make a very simple Python program that will convert USD to several different currencies. I am having trouble with an IF/ELIF statement. Whenever I run the code in my interpreter, in this case Pycharm, the interpreter will prompt me to input the value I want to convert, followed by the currency I want to convert to, and then finish without printing anything that I have set up in the IF/ELIF statement.</p>\n\n<p>Code:</p>\n\n<pre><code>import os\n\nos.system('cls')\n\n# This code starts the program and explains\n# the purpose of the program to the user.\nprint()\nprint(\"Hello User\")\nprint(\"This program will convert dollars to yen.\")\nprint()\n\n# This code prompts the user to enter a dollar amount.\nUSD = input(\"Amount of dollars: \")\n\n# This code converts the user entered amount as a floating\n# point integer for ease of calculation and error correcting.\nvar1 = float(USD)\n\nprint(\"YEN: 1\")\nprint(\"EUR: 2\")\nprint(\"RUB: 3\")\nprint(\"Yuan: 4\")\nvar2 = input(\"What Currency Do You Want To Convert To?: \")\n\n\ndef my_converter():\n    if var2 == 1:\n        var3 = var1 * float(114.62)\n        var4 = \"Yen\"\n        print(USD, \"U.S. Dollars equals\", var3, var4)\n    elif var2 == 2:\n        var3 = var1 * float(1.14)\n        var4 = \"Euro\"\n        print(USD, \"U.S. Dollars equals\", var3, var4)\n    elif var2 == 3:\n        var3 = var1 * float(0.015)\n        var4 = \"Rubles\"\n        print(USD, \"U.S. Dollars equals\", var3, var4)\n    elif var2 == 4:\n        var3 = var1 * float(0.15)\n        var4 = \"Yuan\"\n        print(USD, \"U.S. Dollars equals\", var3, var4)\n</code></pre>\n\n<p>I am just getting into Python so I'm probably just missing something really obvious, but any help would be greatly appreciated. Apologies if this is a duplicate or dumb question.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 3, "creation_date": 1547682742, "post_id": 54227082, "comment_id": 95280238, "body": "Run the program twice without changing anything?"}], "answers": [{"tags": [], "owner": {"reputation": 3047, "user_id": 10388629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/My8T3.png?s=128&g=1", "display_name": "Pika the Master of the Whales", "link": "https://stackoverflow.com/users/10388629/pika-the-master-of-the-whales"}, "is_accepted": false, "score": 1, "last_activity_date": 1547682695, "creation_date": 1547682695, "answer_id": 54227110, "question_id": 54227082, "link": "https://stackoverflow.com/questions/54227082/best-way-to-run-a-program-on-2-different-files-at-once/54227110#54227110", "title": "Best Way to run a program on 2 different files at once", "body": "<p>First thing first, <em>never</em> write duplicate code if you can accomplish it with a function. Always write \"dry\" code.</p>\n\n<p>The best way to do this would be to define a function that runs whatever needs to be run, and just call that function twice.</p>\n"}], "owner": {"reputation": 27, "user_id": 10780686, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2f1caf720dc6281f2717ee9872c750d?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Wilkinson", "link": "https://stackoverflow.com/users/10780686/ryan-wilkinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1547682695, "creation_date": 1547682507, "question_id": 54227082, "link": "https://stackoverflow.com/questions/54227082/best-way-to-run-a-program-on-2-different-files-at-once", "title": "Best Way to run a program on 2 different files at once", "body": "<p>I have built a python script that consumes a file and does various things with it. </p>\n\n<p>On a daily basis I need this run on 2 separate files. What is the best way to do this?</p>\n\n<p>Is it best to duplicate the code in the program or to put it into a function and run that twice in the script?</p>\n"}, {"tags": ["python", "json", "api", "python-requests"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1547683058, "post_id": 54227072, "comment_id": 95280314, "body": "Take that URL and repeat what you did for the original URL?"}, {"owner": {"reputation": 113, "user_id": 10692834, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J1cLFxM7ecQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jizSsq2XRsUHnxeMy2baaX_4Wfeg/mo/photo.jpg?sz=128", "display_name": "Kendall Kelly", "link": "https://stackoverflow.com/users/10692834/kendall-kelly"}, "reply_to_user": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1547683564, "post_id": 54227072, "comment_id": 95280421, "body": "yea, but im trying to figure out how to do it all at once, meaning looping through the first page and print the name, then loop on the 2nd and so on"}], "answers": [{"tags": [], "owner": {"reputation": 407, "user_id": 3352383, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000913691661/picture?type=large", "display_name": "Bogdan Condurache", "link": "https://stackoverflow.com/users/3352383/bogdan-condurache"}, "is_accepted": true, "score": 1, "last_activity_date": 1566561688, "last_edit_date": 1566561688, "creation_date": 1547683395, "answer_id": 54227203, "question_id": 54227072, "link": "https://stackoverflow.com/questions/54227072/python-looping-through-multiple-pages-on-a-api-and-printing-the-content-i-want/54227203#54227203", "title": "Python looping through multiple pages on a api, and printing the content i want", "body": "<p>Ok, I will first start with the code and then explain it.</p>\n\n<pre><code>import requests\nimport json\n</code></pre>\n\n<pre><code>def get_and_print_data(url):\n        r = requests.get(url)\n        info = r.json()\n        for i in info['results']:\n                print(i['name'])\n        if info.get('next'):\n                get_and_print_data(info['next'])\n\nget_and_print_data(\"https://swapi.co/api/people/\")\n</code></pre>\n\n<p>The code here is pretty bad, as that method is doing way too much (getting the data, processing it, determining if there are next pages and printing the data. That's way too much logic for just one function, but for our example is ok.</p>\n\n<p>So, first things first, why a function?\nBecause we need to execute the same actions (get, process and print data) multiple times, one per page. What changes? The url, as there is a different URL for each page. So, we will have the URL as parameter of that function.</p>\n\n<p>The next few lines are from your code so I assume you are familiar to them.\nThen we have that important line: <code>if info.get('next'):</code></p>\n\n<p>In dictionaries you usually retrieve data with <code>dictionary[key]</code> and that triggers and exception if the key does not exist, called <strong>KeyError</strong>. In that case we should have used a try/except to check if the key <em>next</em> is present. Even if this is considered the more \"pythonic\" way, this one with the \"if\" might be easier to understand.</p>\n\n<p>What does the <code>.get('next')</code> do then? Well, almost the same thing, but instead of throwing and exception, it will simply return <code>None</code> if the key is not present and remember that in Python <code>None</code> is evaluated as false.</p>\n\n<p>Long story short, this will check if the key <strong>next</strong> is present in your answer (you can see that the API returns null for missing data). If the key is present, we will call that same function with the URL for the next page and repeat until the <strong>next</strong> key is missing (or null) in the returned JSON.</p>\n\n<p>Of course, we will have to call our function with the initial URL and let it go on from there :)</p>\n\n<p>Hope this helps and everything is easy to understand!</p>\n"}, {"tags": [], "owner": {"reputation": 5026, "user_id": 2052575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef811d74c86084dcaf8a9aa5b57b1dc0?s=128&d=identicon&r=PG", "display_name": "v25", "link": "https://stackoverflow.com/users/2052575/v25"}, "is_accepted": false, "score": -1, "last_activity_date": 1547683483, "creation_date": 1547683483, "answer_id": 54227216, "question_id": 54227072, "link": "https://stackoverflow.com/questions/54227072/python-looping-through-multiple-pages-on-a-api-and-printing-the-content-i-want/54227216#54227216", "title": "Python looping through multiple pages on a api, and printing the content i want", "body": "<p>My solution:</p>\n\n<pre><code>import requests\nimport json\n\ndef query_api(url):\n    r = requests.get(url)\n    info = r.json()\n    return info['next'], info['results']\n\nn, r = query_api(\"https://swapi.co/api/people/\")\n\nwhile n:\n    for i in r:\n        print(i['name'])\n    n, r = query_api(n)\n</code></pre>\n\n<p>Also, if you're playing around with APIs like this, you may wish to take a look at <a href=\"https://pypi.org/project/requests-cache/\" rel=\"nofollow noreferrer\">requests-cahce</a> which you can include in your code to cache API results locally so you can run repeat queries without hitting a rate limits.  (And of course to be considerate to the API's owner).</p>\n"}], "owner": {"reputation": 113, "user_id": 10692834, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-J1cLFxM7ecQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jizSsq2XRsUHnxeMy2baaX_4Wfeg/mo/photo.jpg?sz=128", "display_name": "Kendall Kelly", "link": "https://stackoverflow.com/users/10692834/kendall-kelly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3460, "favorite_count": 0, "accepted_answer_id": 54227203, "answer_count": 2, "score": 0, "last_activity_date": 1566561688, "creation_date": 1547682393, "question_id": 54227072, "link": "https://stackoverflow.com/questions/54227072/python-looping-through-multiple-pages-on-a-api-and-printing-the-content-i-want", "title": "Python looping through multiple pages on a api, and printing the content i want", "body": "<p>Hello im practicing my skills, (im very new to programming) and trying to go to this api <a href=\"https://swapi.co/api/people/\" rel=\"nofollow noreferrer\">https://swapi.co/api/people/</a> which is a api that has data of all the star wars characters, films, planets etc, im trying to loop through all the pages, and print out all the characters\nthis is my code currently</p>\n\n<pre><code>import requests\nimport json\n\n\nr = requests.get(\"https://swapi.co/api/people/\")\ninfo = r.json()\nfor i in info['results']:\n    print(i['name'])\n</code></pre>\n\n<p>which prints out all of the characters on that page,\nif you look at the link, the 'next' key holds the link to the 2 page, and so on, im trying to figure out a way to open that value and print out the characters on that page, then on that page open up the value on that one and so on and so forth, till i print out all the characters.</p>\n"}, {"tags": ["python", "tensorflow", "visualization"], "owner": {"reputation": 55, "user_id": 8834241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c77f752d79b7783c0e4382fdec408a5?s=128&d=identicon&r=PG&f=1", "display_name": "davidshm", "link": "https://stackoverflow.com/users/8834241/davidshm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547682139, "creation_date": 1547682139, "question_id": 54227046, "link": "https://stackoverflow.com/questions/54227046/how-to-visualize-learned-kernel-filters-of-mobilenet-layers-in-tensorflow", "title": "How to visualize learned kernel filters of Mobilenet layers in Tensorflow?", "body": "<p>I have trained the slim version of MobilenetV1 and now I want to visualize the learned filters of all the layers during the evaluation step. The Mobilenet I have taken is from :</p>\n\n<p><a href=\"https://github.com/tensorflow/models/blob/master/research/slim/nets/mobilenet_v1.py\" rel=\"nofollow noreferrer\">https://github.com/tensorflow/models/blob/master/research/slim/nets/mobilenet_v1.py</a></p>\n\n<p>I have already tried tensorflow debugger tool and other techniques which are only related to simple CNNs. I could not find anything helpful for my current scenario. </p>\n\n<p>Here is my eval code:</p>\n\n<pre><code>with tf.Graph().as_default() as graph:\n    tf.logging.set_verbosity(tf.logging.INFO)\n\n    dataset = get_split('validation', dataset_dir)\n    images, raw_images, labels = load_batch(dataset, batch_size=batch_size, is_training=False)\n\n    num_batches_per_epoch = dataset.num_samples / batch_size\n    num_steps_per_epoch = num_batches_per_epoch\n\n\n    with slim.arg_scope(mobilenet_arg_scope()):\n        logits, end_points = mobilenet(images, num_classes=dataset.num_classes, is_training=False)\n\n\n    variables_to_restore = slim.get_variables_to_restore()\n    saver = tf.train.Saver(variables_to_restore)\n\n    def restore_fn(sess):\n        return saver.restore(sess, checkpoint_file)\n\n\n    probabilities = end_points['Predictions']\n    predictions = tf.argmax(probabilities, 1)\n\n\n    accuracy, accuracy_update = tf.contrib.metrics.streaming_accuracy(predictions, labels)\n\n\n    metrics_op = tf.group(accuracy_update)\n\n\n\n    global_step = get_or_create_global_step()\n    global_step_op = tf.assign(global_step,\n                               global_step + 1) \n\n    def eval_step(sess, metrics_op, global_step):\n\n        start_time = time.time()\n        _, global_step_count, accuracy_value = sess.run([metrics_op, global_step_op, accuracy])\n        time_elapsed = time.time() - start_time\n\n\n        logging.info('Global Step %s: Streaming Accuracy: %.4f (%.2f sec/step)', global_step_count, accuracy_value,\n                     time_elapsed)\n\n        return accuracy_value\n\n\n    tf.summary.scalar('Validation_Accuracy', accuracy)\n    matrix = tf.confusion_matrix(labels, predictions, num_classes=3)\n    image_tensor = draw_confusion_matrix(matrix)\n    image_summary = tf.summary.image('confusion_matrix', image_tensor)\n\n    my_summary_op = tf.summary.merge_all()\n\n    sv = tf.train.Supervisor(logdir=log_eval, summary_op=None, init_fn=restore_fn)\n\n\n    with sv.managed_session() as sess:\n        for step in xrange(int(num_batches_per_epoch * num_epochs)):\n\n            if step % num_batches_per_epoch == 0:\n                logging.info('Epoch: %s/%s', step / num_batches_per_epoch + 1, num_epochs)\n                logging.info('Current Streaming Accuracy: %.4f', sess.run(accuracy))\n\n            evaluating\n            if step % 10 == 0:\n                eval_step(sess, metrics_op=metrics_op, global_step=sv.global_step)\n                summaries = sess.run(my_summary_op)\n                sv.summary_computed(sess, summaries)\n\n\n            else:\n                eval_step(sess, metrics_op=metrics_op, global_step=sv.global_step)\n\n\n        logging.info('Final eval Accuracy: %.4f', sess.run(accuracy))\n</code></pre>\n\n<p>I would love to see and save the output similar to how keras does it so easily:</p>\n\n<p><a href=\"https://blog.keras.io/how-convolutional-neural-networks-see-the-world.html\" rel=\"nofollow noreferrer\">https://blog.keras.io/how-convolutional-neural-networks-see-the-world.html</a></p>\n"}, {"tags": ["python", "beautifulsoup"], "comments": [{"owner": {"reputation": 1, "user_id": 9752377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "itsalexlol", "link": "https://stackoverflow.com/users/9752377/itsalexlol"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 1, "creation_date": 1547682169, "post_id": 54227004, "comment_id": 95280126, "body": "I used an example image URL @davedwards"}, {"owner": {"reputation": 1, "user_id": 9752377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "itsalexlol", "link": "https://stackoverflow.com/users/9752377/itsalexlol"}, "reply_to_user": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "edited": false, "score": 0, "creation_date": 1547682322, "post_id": 54227004, "comment_id": 95280158, "body": "Thanks for pointing it out!. I&#39;ve updated the main post with the working URL. Still returns the same results, though."}, {"owner": {"reputation": 367, "user_id": 8062091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ATANf.png?s=128&g=1", "display_name": "Mr.Zeus", "link": "https://stackoverflow.com/users/8062091/mr-zeus"}, "edited": false, "score": 0, "creation_date": 1547682395, "post_id": 54227004, "comment_id": 95280170, "body": "You might want to change your title; you are not receiving an error, your code is simply outputting what might be called &quot;unexpected&quot; results."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1547682462, "post_id": 54227004, "comment_id": 95280181, "body": "It should be <code>findAll(&#39;meta&#39;, ...)</code> not <code>findAll(&#39;content&#39;, ...)</code>"}, {"owner": {"reputation": 1, "user_id": 9752377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "itsalexlol", "link": "https://stackoverflow.com/users/9752377/itsalexlol"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1547682700, "post_id": 54227004, "comment_id": 95280235, "body": "@Barmar That worked. However, it printed the entire page source, rather than the specified <code>&lt;meta content=&quot; % Likes, % Comments - @% on Instagram: \u201cpost description []\u201d&quot; name=&quot;description&quot; &#47;&gt;</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1547683647, "post_id": 54227004, "comment_id": 95280438, "body": "I think BS is having trouble parsing that page, it thinks all the <code>&lt;link&gt;</code> and <code>&lt;script&gt;</code> tags are inside the <code>&lt;meta&gt;</code> tags."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9752377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "itsalexlol", "link": "https://stackoverflow.com/users/9752377/itsalexlol"}, "edited": false, "score": 0, "creation_date": 1547685332, "post_id": 54227250, "comment_id": 95280774, "body": "This also works, thanks. Is there anyway I can print it more &quot;prettier&quot;? Like for example, <code>% Likes | % Comments % | % Views | %Description</code> ?"}, {"owner": {"reputation": 5290, "user_id": 927172, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/89020759331a1b1235448e45200857ea?s=128&d=identicon&r=PG", "display_name": "JoshG", "link": "https://stackoverflow.com/users/927172/joshg"}, "reply_to_user": {"reputation": 1, "user_id": 9752377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "itsalexlol", "link": "https://stackoverflow.com/users/9752377/itsalexlol"}, "edited": false, "score": 0, "creation_date": 1547687466, "post_id": 54227250, "comment_id": 95281148, "body": "Also, if this helps, feel free to upvote the answer and/or accept it. :-)"}, {"owner": {"reputation": 1, "user_id": 9752377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "itsalexlol", "link": "https://stackoverflow.com/users/9752377/itsalexlol"}, "edited": false, "score": 0, "creation_date": 1547688829, "post_id": 54227250, "comment_id": 95281423, "body": "Thanks. I get this error, though. <code>Exception has occurred: NameError name &#39;string&#39; is not defined</code> I&#39;ve tried using <code>str</code> as well. @AndroidNoobie"}, {"owner": {"reputation": 5290, "user_id": 927172, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/89020759331a1b1235448e45200857ea?s=128&d=identicon&r=PG", "display_name": "JoshG", "link": "https://stackoverflow.com/users/927172/joshg"}, "reply_to_user": {"reputation": 1, "user_id": 9752377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "itsalexlol", "link": "https://stackoverflow.com/users/9752377/itsalexlol"}, "edited": false, "score": 0, "creation_date": 1547690418, "post_id": 54227250, "comment_id": 95281689, "body": "Yes, you have to define the string. In this case, it&#39;d be something like <code>string = tag.get(&quot;content&quot;, None)</code> (e.g., what you&#39;re currently printing to the console)."}, {"owner": {"reputation": 5290, "user_id": 927172, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/89020759331a1b1235448e45200857ea?s=128&d=identicon&r=PG", "display_name": "JoshG", "link": "https://stackoverflow.com/users/927172/joshg"}, "reply_to_user": {"reputation": 1, "user_id": 9752377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "itsalexlol", "link": "https://stackoverflow.com/users/9752377/itsalexlol"}, "edited": false, "score": 0, "creation_date": 1547690463, "post_id": 54227250, "comment_id": 95281697, "body": "In other words, where you currently have <code>print(tag.get(&quot;content&quot;, None)</code>, try replacing that with <code>string = tag.get(&quot;content&quot;, None)</code>."}, {"owner": {"reputation": 1, "user_id": 9752377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "itsalexlol", "link": "https://stackoverflow.com/users/9752377/itsalexlol"}, "edited": false, "score": 0, "creation_date": 1547730642, "post_id": 54227250, "comment_id": 95297851, "body": "Hey, I&#39;ve tried that. However, it doesn&#39;t work for me. What&#39;s wrong with this code?  <a href=\"https://pastebin.com/rtjTeQd3\" rel=\"nofollow noreferrer\">https://pastebin.com/rtjTeQd3</a>"}, {"owner": {"reputation": 5290, "user_id": 927172, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/89020759331a1b1235448e45200857ea?s=128&d=identicon&r=PG", "display_name": "JoshG", "link": "https://stackoverflow.com/users/927172/joshg"}, "reply_to_user": {"reputation": 1, "user_id": 9752377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "itsalexlol", "link": "https://stackoverflow.com/users/9752377/itsalexlol"}, "edited": false, "score": 0, "creation_date": 1547736799, "post_id": 54227250, "comment_id": 95301514, "body": "You&#39;re referencing <code>string</code> before it&#39;s defined. You need to move <code>likes</code>, <code>comments</code>, and <code>description</code> into the <code>for</code> loop <b>after</b> <code>string</code> is defined."}], "tags": [], "owner": {"reputation": 5290, "user_id": 927172, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/89020759331a1b1235448e45200857ea?s=128&d=identicon&r=PG", "display_name": "JoshG", "link": "https://stackoverflow.com/users/927172/joshg"}, "is_accepted": false, "score": 0, "last_activity_date": 1547687018, "last_edit_date": 1547687018, "creation_date": 1547683756, "answer_id": 54227250, "question_id": 54227004, "link": "https://stackoverflow.com/questions/54227004/unexpected-results-when-trying-to-get-meta-data-with-beautifulsoup/54227250#54227250", "title": "Unexpected results when trying to get meta data with BeautifulSoup", "body": "<p>This seems to work:</p>\n\n<pre><code>for tag in soup2.findAll(\"meta\"):\n    if tag.get(\"property\", None) == \"og:description\":\n        print(tag.get(\"content\", None))\n</code></pre>\n\n<p>Basically, you're looping over all of the tags in the page and looking for ones where the property is \"og:description\", which seems to be the Open Graph property you want.</p>\n\n<p>Does that help?</p>\n\n<p>The complete version:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\n\nurl = \"https://www.instagram.com/p/BsOGulcndj-/\"\npage2 = requests.get(url)\nsoup2 = BeautifulSoup(page2.content, 'html.parser')\nresult = soup2.findAll('meta', attrs={'content': 'description'})\n\nfor tag in soup2.findAll(\"meta\"):\n    if tag.get(\"property\", None) == \"og:description\":\n        print(tag.get(\"content\", None))\n</code></pre>\n\n<p><strong>Update</strong>: Regarding your question about pretty printing this, there are several ways that can be accomplished. One of those ways involves regular expressions and string interpolation. For example:</p>\n\n<pre><code>likes = re.search('(.*)Likes', string).group(1)\ncomments = re.search(',(.*)Comments', string).group(1)\ndescription = re.search('-(.*)', string).group(1)\n\nprint(f\"{likes} Likes | {comments} Comments | {description}\")\n</code></pre>\n\n<p>But if you have another question regarding this, it should probably be made in a new post.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9752377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "itsalexlol", "link": "https://stackoverflow.com/users/9752377/itsalexlol"}, "edited": false, "score": 0, "creation_date": 1547685273, "post_id": 54227277, "comment_id": 95280762, "body": "Awesome, thanks. Is there anyway I can print it more &quot;prettier&quot;? Like for example, <code>% Likes | % Comments % | % Views | %Description</code> ?"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1547683980, "creation_date": 1547683980, "answer_id": 54227277, "question_id": 54227004, "link": "https://stackoverflow.com/questions/54227004/unexpected-results-when-trying-to-get-meta-data-with-beautifulsoup/54227277#54227277", "title": "Unexpected results when trying to get meta data with BeautifulSoup", "body": "<p>The correct way to match those tags is with:</p>\n\n<pre><code>result = soup2.findAll('meta', content=True, attrs={\"name\": \"description\"})\n</code></pre>\n\n<p>However, <code>html.parser</code> doesn't parse <code>&lt;meta&gt;</code> tags properly. It doesn't realize they're self-closing, so it's including much of the rest of the <code>&lt;head&gt;</code> in the result. I changed to</p>\n\n<pre><code>soup2 = BeautifulSoup(page2.content, 'html5lib')\n</code></pre>\n\n<p>and then the result of the above search was:</p>\n\n<pre><code>[&lt;meta content=\"46.3m Likes, 2.6m Comments - EGG GANG \ud83c\udf0d (@world_record_egg) on Instagram: \u201cLet\u2019s set a world record together and get the most liked post on Instagram. Beating the current\u2026\u201d\" name=\"description\"/&gt;]\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9752377, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "itsalexlol", "link": "https://stackoverflow.com/users/9752377/itsalexlol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1547695736, "creation_date": 1547681864, "last_edit_date": 1547695736, "question_id": 54227004, "link": "https://stackoverflow.com/questions/54227004/unexpected-results-when-trying-to-get-meta-data-with-beautifulsoup", "title": "Unexpected results when trying to get meta data with BeautifulSoup", "body": "<p>Alright, here's what I'm trying to do. I'm fairly new at Python and I'm only just getting to grips with it. Anyway, with this small tool, I'm trying to extract data from a page. In this instance, I want the user to enter a URL and for it to return</p>\n\n<pre><code>&lt;meta content=\" % Likes, % Comments - @% on Instagram: \u201cpost description []\u201d\" name=\"description\" /&gt; \n</code></pre>\n\n<p>However, replace <code>%</code> with the amount of likes/comments etc that post has.</p>\n\n<p>Here's my full code:</p>\n\n<pre><code>from urllib.request import urlopen\nfrom bs4 import BeautifulSoup\nimport requests\nimport re\n\nurl = \"https://www.instagram.com/p/BsOGulcndj-/\"\npage2 = requests.get(url)\nsoup2 = BeautifulSoup(page2.content, 'html.parser')\nresult = soup2.findAll('content', attrs={'content': 'description'})\nprint (result)\n</code></pre>\n\n<p>But whenever I run it, I'm given <code>[]</code>. What am I doing wrong?</p>\n"}, {"tags": ["python", "io", "codec"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1547682523, "post_id": 54226982, "comment_id": 95280197, "body": "Why would you create a bytes-like object/stream and then feed it to <code>TextIOWrapper</code>?"}, {"owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1547682650, "post_id": 54226982, "comment_id": 95280225, "body": "@wwii This is just an example. But to answer your question, when someone else gives you a bytes-like stream."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1547684025, "post_id": 54226982, "comment_id": 95280514, "body": "codecs works in Python 2 and 3? ... <a href=\"https://stackoverflow.com/a/34511829/2823755\">stackoverflow.com/a/34511829/2823755</a>"}, {"owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1547684152, "post_id": 54226982, "comment_id": 95280547, "body": "@wwii Python 2 no longer exists."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1547684289, "post_id": 54226982, "comment_id": 95280571, "body": "No legacy code for you then."}, {"owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1547684352, "post_id": 54226982, "comment_id": 95280586, "body": "@wwii Yeah. I have already upgraded."}], "owner": {"reputation": 7256, "user_id": 418966, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/81cf776adb922e444a0a771a8a4724e5?s=128&d=identicon&r=PG", "display_name": "Cyker", "link": "https://stackoverflow.com/users/418966/cyker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547681736, "creation_date": 1547681736, "question_id": 54226982, "link": "https://stackoverflow.com/questions/54226982/difference-between-codecs-streamreader-and-io-textiowrapper", "title": "Difference between `codecs.StreamReader` and `io.TextIOWrapper`", "body": "<p>What is the difference between using <code>codecs.StreamReader</code> and <code>io.TextIOWrapper</code> on a binary stream?</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport codecs\nimport io\n\nstream = io.BytesIO(b'abc')\n#reader = codecs.getreader('utf-8')(stream)\nreader = io.TextIOWrapper(stream)\nprint(reader, reader.read())\n</code></pre>\n"}, {"tags": ["python", "unit-testing", "mocking", "python-unittest"], "comments": [{"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 0, "creation_date": 1547682101, "post_id": 54226961, "comment_id": 95280104, "body": "the code says <code>provision</code> but you label the file <code>my_func.py</code> which one is it?"}], "answers": [{"comments": [{"owner": {"reputation": 1740, "user_id": 1611045, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/5Jlql.jpg?s=128&g=1", "display_name": "Anish", "link": "https://stackoverflow.com/users/1611045/anish"}, "edited": false, "score": 0, "creation_date": 1547685180, "post_id": 54227054, "comment_id": 95280743, "body": "now getting AttributeError: host, I can see the &quot;0.0.0.0&quot; in mock_host object&#39;s return_value but it is not being assigned to config[&quot;addr2&quot;]"}, {"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "reply_to_user": {"reputation": 1740, "user_id": 1611045, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/5Jlql.jpg?s=128&g=1", "display_name": "Anish", "link": "https://stackoverflow.com/users/1611045/anish"}, "edited": false, "score": 0, "creation_date": 1547685793, "post_id": 54227054, "comment_id": 95280873, "body": "@Anish, actually looking back, <code>@mock.patch(&#39;my_func.env&#39;)</code> make more sense than mock env.host"}, {"owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "reply_to_user": {"reputation": 1740, "user_id": 1611045, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/5Jlql.jpg?s=128&g=1", "display_name": "Anish", "link": "https://stackoverflow.com/users/1611045/anish"}, "edited": false, "score": 0, "creation_date": 1547690974, "post_id": 54227054, "comment_id": 95281781, "body": "@Anish, the host is a instance variable, which ends up with different patching technique"}], "tags": [], "owner": {"reputation": 2230, "user_id": 5574689, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/2883b3fdb7276b30d733cfc0241bc689?s=128&d=identicon&r=PG&f=1", "display_name": "Gang", "link": "https://stackoverflow.com/users/5574689/gang"}, "is_accepted": true, "score": 1, "last_activity_date": 1547690892, "last_edit_date": 1547690892, "creation_date": 1547682195, "answer_id": 54227054, "question_id": 54226961, "link": "https://stackoverflow.com/questions/54226961/patching-variable-in-a-python-function-with-unittest-and-mock/54227054#54227054", "title": "Patching variable in a python function with unittest and mock", "body": "<blockquote>\n  <p>mock variable <code>env.host</code>?</p>\n</blockquote>\n\n<p>get the type of <code>env</code> first</p>\n\n<pre><code>In [6]: from fabric.state import env\n\nIn [7]: type(env)\nOut[7]: fabric.utils._AttributeDict\n</code></pre>\n\n<p><code>env.host</code> is instance variable of a class, the mock is a little different, mock_env is object(AttributeDict), the assignment of instance_variable host is direct assignment, not with a return_value</p>\n\n<pre><code>@mock.patch('my_func.env')\ndef test_create_consul_config(self, mock_env):\n    mock_env.host = 'xxx'\n    result = my_func.create_config('master')\n\n    self.assertDictEqual(self.master_config, result)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "is_accepted": false, "score": 0, "last_activity_date": 1547682228, "creation_date": 1547682228, "answer_id": 54227059, "question_id": 54226961, "link": "https://stackoverflow.com/questions/54226961/patching-variable-in-a-python-function-with-unittest-and-mock/54227059#54227059", "title": "Patching variable in a python function with unittest and mock", "body": "<p>From the <a href=\"https://docs.python.org/3/library/unittest.mock.html#unittest.mock.patch\" rel=\"nofollow noreferrer\">unittest.mock documentation on patch</a> (note <code>target</code> is the first argument of <code>patch</code>):</p>\n\n<blockquote>\n  <p>target should be a string in the form 'package.module.ClassName'. The\n  target is imported and the specified object replaced with the new\n  object, so the target must be importable from the environment you are\n  calling patch() from. The target is imported when the decorated\n  function is executed, not at decoration time.</p>\n</blockquote>\n\n<p>So you need to include the full path to the function you are patching. Note also in <a href=\"https://docs.python.org/3/library/unittest.mock.html#id5\" rel=\"nofollow noreferrer\">where to patch</a> that the target should be the path to where the function/object is used, not where it is defined.</p>\n\n<p>So changing your <code>patch</code> call to:</p>\n\n<pre><code>@mock.patch(\"my_func.env.host\")\n</code></pre>\n\n<p>should fix the <code>ImportError</code>.</p>\n"}], "owner": {"reputation": 1740, "user_id": 1611045, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/5Jlql.jpg?s=128&g=1", "display_name": "Anish", "link": "https://stackoverflow.com/users/1611045/anish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7150, "favorite_count": 0, "accepted_answer_id": 54227054, "answer_count": 2, "score": 1, "last_activity_date": 1547690892, "creation_date": 1547681589, "last_edit_date": 1547683443, "question_id": 54226961, "link": "https://stackoverflow.com/questions/54226961/patching-variable-in-a-python-function-with-unittest-and-mock", "title": "Patching variable in a python function with unittest and mock", "body": "<p>I have the following my_func.py with create_config function.</p>\n\n<p>*my_func.py</p>\n\n<pre><code>from fabric.state import env\n\ndef create_config(node_name):\n    config = {\n    \"log_level\": \"INFO\",\n    \"addr1\": \"127.0.0.1\",\n    }\n    config[\"addr2\"] = env.host\n    return config\n</code></pre>\n\n<p>I tried the following approach to mock env.host variable where env is an import from fabric.state.</p>\n\n<p>*test.py</p>\n\n<pre><code>import unittest\nimport my_func\nimport mock\n\n\nclass MyTestCase(unittest.TestCase):\n    def setUp(self):\n        self.master_config = {\n              \"log_level\": \"INFO\",\n              \"addr2\": \"0.0.0.0\",\n              \"addr1\": \"127.0.0.1\",\n        }\n\n    @mock.patch('env.host')\n    def test_create_consul_config(self, mock_host):\n        mock_host.return_value = \"0.0.0.0\"\n        result = my_func.create_config('master')\n        self.assertDictEqual(self.master_config, result)\n\n\nif __name__ == '__main__':\n    unittest.main()\n</code></pre>\n\n<p>I am getting import error with 'env'. What is the best way to mock variable within a function with python mock.</p>\n\n<pre><code>ImportError: No module named env\n</code></pre>\n"}, {"tags": ["python", "gurobi", "pulp", "mixed-integer-programming", "or-tools"], "answers": [{"tags": [], "owner": {"reputation": 4694, "user_id": 9971759, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cuwDdwdKn_k/AAAAAAAAAAI/AAAAAAAAAjU/GxD2ND_J16g/photo.jpg?sz=128", "display_name": "Laurent Perron", "link": "https://stackoverflow.com/users/9971759/laurent-perron"}, "is_accepted": false, "score": 2, "last_activity_date": 1547711108, "creation_date": 1547711108, "answer_id": 54231178, "question_id": 54226937, "link": "https://stackoverflow.com/questions/54226937/pulp-and-or-tools-alternatives/54231178#54231178", "title": "PuLP and OR-Tools Alternatives", "body": "<p>For or-tools, we only provide the minimal API for the linear solver.\nIf your problem is more structured (scheduling, routing, CP-like constraints), you can have a look at the CP-SAT interface:</p>\n\n<ul>\n<li><a href=\"https://developers.google.com/optimization/\" rel=\"nofollow noreferrer\">https://developers.google.com/optimization/</a></li>\n<li><a href=\"https://github.com/google/or-tools/blob/master/ortools/sat/doc/index.md\" rel=\"nofollow noreferrer\">https://github.com/google/or-tools/blob/master/ortools/sat/doc/index.md</a></li>\n</ul>\n\n<p>Python examples are here:</p>\n\n<ul>\n<li><a href=\"https://github.com/google/or-tools/tree/master/examples/python\" rel=\"nofollow noreferrer\">https://github.com/google/or-tools/tree/master/examples/python</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 4387, "user_id": 673271, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/8skfj.png?s=128&g=1", "display_name": "mattmilten", "link": "https://stackoverflow.com/users/673271/mattmilten"}, "is_accepted": false, "score": 1, "last_activity_date": 1547805802, "creation_date": 1547805802, "answer_id": 54251597, "question_id": 54226937, "link": "https://stackoverflow.com/questions/54226937/pulp-and-or-tools-alternatives/54251597#54251597", "title": "PuLP and OR-Tools Alternatives", "body": "<p>You might also want to have a look at <a href=\"http://www.pyomo.org/\" rel=\"nofollow noreferrer\">Pyomo</a>. It supports a variety of modeling tools and can call different solvers.</p>\n"}], "owner": {"reputation": 147, "user_id": 2537379, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QYQZC.jpg?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/2537379/jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2974, "favorite_count": 1, "closed_date": 1547822661, "answer_count": 2, "score": 3, "last_activity_date": 1547805802, "creation_date": 1547681445, "question_id": 54226937, "link": "https://stackoverflow.com/questions/54226937/pulp-and-or-tools-alternatives", "closed_reason": "Not suitable for this site", "title": "PuLP and OR-Tools Alternatives", "body": "<p>I currently have a MIP model formulated in Gurobi's python API, but recently I've been looking into tools such as PuLP and OR-Tools that allow me to build a model and feed it to multiple different optimizers. One feature of Gurobi used extensively in my model is the ability to have constraints that use functions such as and, or, min, max, and abs. However it seems as if PuLP and OR-Tools do not support these. Are there any alternatives that do support these? Or would I have to reformulate my model if I want to use something like this?</p>\n"}, {"tags": ["python", "plotly", "plotly-dash"], "comments": [{"owner": {"reputation": 2237, "user_id": 8347081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-C2gg5Z3zU2w/AAAAAAAAAAI/AAAAAAAABXE/M2GK2Eixhms/photo.jpg?sz=128", "display_name": "mypetlion", "link": "https://stackoverflow.com/users/8347081/mypetlion"}, "edited": false, "score": 1, "creation_date": 1547681733, "post_id": 54226896, "comment_id": 95280008, "body": "Did you have a question?"}], "answers": [{"tags": [], "owner": {"reputation": 2024, "user_id": 9461974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb35846c1f8d76ead6415a2a5db58d76?s=128&d=identicon&r=PG&f=1", "display_name": "Oysiyl", "link": "https://stackoverflow.com/users/9461974/oysiyl"}, "is_accepted": false, "score": 0, "last_activity_date": 1547716430, "creation_date": 1547716430, "answer_id": 54232476, "question_id": 54226896, "link": "https://stackoverflow.com/questions/54226896/creating-a-graph-with-multiple-titles-and-subtitle-axis-in-plotly/54232476#54232476", "title": "Creating a graph with multiple titles and subtitle axis in Plotly", "body": "<p>Yep, you can do that. Check <a href=\"https://plot.ly/python/axes/#subcategory-axes\" rel=\"nofollow noreferrer\">this</a> link from plotly docs</p>\n"}], "owner": {"reputation": 1, "user_id": 10925037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64f380cf0964d7a58a683accd3b11288?s=128&d=identicon&r=PG&f=1", "display_name": "Xman", "link": "https://stackoverflow.com/users/10925037/xman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 819, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1552909779, "creation_date": 1547681129, "last_edit_date": 1552909779, "question_id": 54226896, "link": "https://stackoverflow.com/questions/54226896/creating-a-graph-with-multiple-titles-and-subtitle-axis-in-plotly", "title": "Creating a graph with multiple titles and subtitle axis in Plotly", "body": "<p>I would like to customize my plotly graph to have the yaxis displaying multiple statuses(titles) with their multiple priorities(subtitles). </p>\n\n<p>Below is an example of the outcome.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Z2UeE.png\" rel=\"nofollow noreferrer\">Graph</a></p>\n"}, {"tags": ["python", "windows", "ctypes"], "comments": [{"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1547682761, "post_id": 54226889, "comment_id": 95280244, "body": "<a href=\"https://stackoverflow.com/questions/53182796/python-ctypes-issue-on-different-oses/53185316#53185316\" title=\"python ctypes issue on different oses\">stackoverflow.com/questions/53182796/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/52268294/python-ctypes-cdll-loadlibrary-instantiate-an-object-execute-its-method-priva/52272969#52272969\" title=\"python ctypes cdll loadlibrary instantiate an object execute its method priva\">stackoverflow.com/questions/52268294/&hellip;</a>. <b>Define <i>argtypes</i> and <i>restype</i> for the 2 functions</b>."}], "answers": [{"tags": [], "owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "is_accepted": false, "score": 2, "last_activity_date": 1547695677, "creation_date": 1547695677, "answer_id": 54228590, "question_id": 54226889, "link": "https://stackoverflow.com/questions/54226889/getting-python-console-to-flash-in-windows-taskbar/54228590#54228590", "title": "Getting python console to flash in Windows taskbar", "body": "<p>Use <a href=\"https://docs.microsoft.com/en-us/windows/desktop/api/Winuser/nf-winuser-flashwindowex\" rel=\"nofollow noreferrer\"><code>FlashWindowEx</code></a> to specifically flash just the taskbar icon. For a regular console window, get the window handle via <code>GetConsoleWindow</code>. This may not work for alternative consoles such as ConEmu, unless it's one of the API functions that they hack. </p>\n\n<p>For example:</p>\n\n<pre><code>import ctypes\nfrom ctypes import wintypes\n\nkernel32 = ctypes.WinDLL('kernel32', use_last_error=True)\nuser32 = ctypes.WinDLL('user32', use_last_error=True)\n\nFLASHW_STOP = 0\nFLASHW_CAPTION = 0x00000001\nFLASHW_TRAY = 0x00000002\nFLASHW_ALL = 0x00000003\nFLASHW_TIMER = 0x00000004\nFLASHW_TIMERNOFG = 0x0000000C\n\nclass FLASHWINFO(ctypes.Structure):\n    _fields_ = (('cbSize', wintypes.UINT),\n                ('hwnd', wintypes.HWND),\n                ('dwFlags', wintypes.DWORD),\n                ('uCount', wintypes.UINT),\n                ('dwTimeout', wintypes.DWORD))\n    def __init__(self, hwnd, flags=FLASHW_TRAY, count=5, timeout_ms=0):\n        self.cbSize = ctypes.sizeof(self)\n        self.hwnd = hwnd\n        self.dwFlags = flags\n        self.uCount = count\n        self.dwTimeout = timeout_ms\n\nkernel32.GetConsoleWindow.restype = wintypes.HWND\nuser32.FlashWindowEx.argtypes = (ctypes.POINTER(FLASHWINFO),)\n\ndef flash_console_icon(count=5):\n    hwnd = kernel32.GetConsoleWindow()\n    if not hwnd:\n        raise ctypes.WinError(ctypes.get_last_error())\n    winfo = FLASHWINFO(hwnd, count=count)\n    previous_state = user32.FlashWindowEx(ctypes.byref(winfo))\n    return previous_state\n</code></pre>\n"}], "owner": {"reputation": 2724, "user_id": 4268602, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/730410991/picture?type=large", "display_name": "Daniel Paczuski Bak", "link": "https://stackoverflow.com/users/4268602/daniel-paczuski-bak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1547695677, "creation_date": 1547681104, "question_id": 54226889, "link": "https://stackoverflow.com/questions/54226889/getting-python-console-to-flash-in-windows-taskbar", "title": "Getting python console to flash in Windows taskbar", "body": "<p>I am attempting to cause my python application to flash its parent console's icon in the taskbar. I have tried the following:</p>\n\n<pre><code>ctypes.windll.user32.FlashWindow(\nctypes.windll.kernel32.GetConsoleWindow(), True)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>ctypes.windll.user32.FlashWindow(\nctypes.windll.user32.GetParent(ctypes.windll.kernel32.GetConsoleWindow()), True)\n</code></pre>\n\n<p>But neither of these cause the desired effect.</p>\n\n<p>I am using python 3.5.4, on Windows 10. I am using cmder as my console.</p>\n"}, {"tags": ["python", "automation"], "comments": [{"owner": {"reputation": 898, "user_id": 545237, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/tyoag.jpg?s=128&g=1", "display_name": "BrokenRobot", "link": "https://stackoverflow.com/users/545237/brokenrobot"}, "edited": false, "score": 0, "creation_date": 1547681383, "post_id": 54226864, "comment_id": 95279917, "body": "As much as I would like to help answer your question, I would first have to ask &quot;But why?&quot;"}, {"owner": {"reputation": 898, "user_id": 545237, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/tyoag.jpg?s=128&g=1", "display_name": "BrokenRobot", "link": "https://stackoverflow.com/users/545237/brokenrobot"}, "edited": false, "score": 0, "creation_date": 1547681793, "post_id": 54226864, "comment_id": 95280026, "body": "Why doesnt his or her code just run on the timer? Why is it time sensitive for that matter?"}, {"owner": {"reputation": 898, "user_id": 545237, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/tyoag.jpg?s=128&g=1", "display_name": "BrokenRobot", "link": "https://stackoverflow.com/users/545237/brokenrobot"}, "edited": false, "score": 0, "creation_date": 1547682200, "post_id": 54226864, "comment_id": 95280130, "body": "There&#39;s probably something fundamental to the process you&#39;ve imagined that would not need this sort of &quot;workflow&quot;. Perhaps simplify what changes every day into a set of parameters that need to be entered every night or morning. My spidey senses are telling me that the solution you have arrived at is more complex than it needs to be."}, {"owner": {"reputation": 89, "user_id": 10161096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b231be785bec2d6114cb0721c68ed5d4?s=128&d=identicon&r=PG&f=1", "display_name": "codingsnake99", "link": "https://stackoverflow.com/users/10161096/codingsnake99"}, "reply_to_user": {"reputation": 898, "user_id": 545237, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/tyoag.jpg?s=128&g=1", "display_name": "BrokenRobot", "link": "https://stackoverflow.com/users/545237/brokenrobot"}, "edited": false, "score": 0, "creation_date": 1547713229, "post_id": 54226864, "comment_id": 95288111, "body": "Hi BrokenRobot, The reason we need this code is: At 8 am, we are not yet in the office. But if the computer can start to run the code my colleague designed to deal with some data, it will be very helpful when we arrived at 9 am"}, {"owner": {"reputation": 898, "user_id": 545237, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/tyoag.jpg?s=128&g=1", "display_name": "BrokenRobot", "link": "https://stackoverflow.com/users/545237/brokenrobot"}, "edited": false, "score": 0, "creation_date": 1547745761, "post_id": 54226864, "comment_id": 95306794, "body": "You can design a script that can run indefinitely in the background and fire on a specific function every morning. You just provide it with a place to accept a different set of parameters every day. Also, your question should focus on one specific question with achievable answer per the Stack Overflow guidelines. You might need to review the question and break it up into pieces."}], "owner": {"reputation": 89, "user_id": 10161096, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b231be785bec2d6114cb0721c68ed5d4?s=128&d=identicon&r=PG&f=1", "display_name": "codingsnake99", "link": "https://stackoverflow.com/users/10161096/codingsnake99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547682863, "creation_date": 1547680941, "last_edit_date": 1547682863, "question_id": 54226864, "link": "https://stackoverflow.com/questions/54226864/questions-about-the-practical-steps-of-automating-the-computer-to-run-some-scrip", "title": "Questions about the practical steps of automating the computer to run some scripts in particular time", "body": "<p>The task I need to do is to write some python codes to make computer can execute another python code which is provided by my colleague at 8 am every day. (The codes he provide me could be used to automatically download something from the internet or processing some excel sheets)</p>\n\n<p>Actually, I have already found a previous post in StackOverflow which could very match what I want:\n<a href=\"https://stackoverflow.com/questions/15088037/python-script-to-do-something-at-the-same-time-every-day\">Python script to do something at the same time every day</a></p>\n\n<p>However, I am a python beginner, so I don't know what is the \"exact / practical\" way to execute these codes. My questions could stupid but hope someone still can help me.  </p>\n\n<p>Let me describe my problems below...</p>\n\n<p>Scenario Background:</p>\n\n<p>Each day, My colleague will push ctrl+L to lock his computer (not log off or shut down) before leaving the office and the computer will go into sleep mode in the final.\nHe will come to the office at around 9 am, but he hopes my python code can automatically execute some of his python codes at 8 am each day.</p>\n\n<p>The final result should be like this:</p>\n\n<ol>\n<li>Automatically wake up the computer (I think this step can be done by windows setting, instead of using python. Would it be easier?)</li>\n<li>Even the computer is still locked, my python code should still automatically execute another python code at 8 am. </li>\n</ol>\n\n<p>So my codes are as follow (Based on that previous post in StackOverflow):</p>\n\n<pre><code>from datetime import datetime\nfrom threading import Timer\n\nx=datetime.today()\ny=x.replace(day=x.day+1, hour=8, minute=0, second=0)\n\ndelta_t=y-x\nsecs=delta_t.seconds+1\n\ndef daily_task():\n    # Put my Colleague's codes here\n\nt = Timer(secs, daily_task)\n\nt.start()\n</code></pre>\n\n<hr>\n\n<p>My real question is:</p>\n\n<ol>\n<li><p>I write these codes in Spyder (This is the only environment I know how to use...) Should I just press F5 and execute all my codes and then it's done?</p></li>\n<li><p>Or should I run these codes on cmd or something like that?</p></li>\n<li><p>Will my codes still work after I close down my Spyder?</p></li>\n<li><p>If my code will still work after I close Spyder, then what is the exact way to stop my code?</p></li>\n</ol>\n\n<hr>\n\n<p>Sorry, I know my question could be very stupid or even ask the wrong questions. </p>\n\n<p>But I usually only use python to do some very simple data processing and analysis, and never use it to do such a practical thing. So I totally have no idea how to do it even though I have already googled it.</p>\n"}, {"tags": ["python", "python-3.x", "python-requests"], "comments": [{"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 1, "creation_date": 1547680741, "post_id": 54226817, "comment_id": 95279734, "body": "<code>data[v] = True</code> instead of <code>data[v] = &#39;True&#39;</code>?"}, {"owner": {"reputation": 11899, "user_id": 7216865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X90W9.png?s=128&g=1", "display_name": "Maurice Meyer", "link": "https://stackoverflow.com/users/7216865/maurice-meyer"}, "edited": false, "score": 0, "creation_date": 1547680851, "post_id": 54226817, "comment_id": 95279772, "body": "You need to <code>return data</code> in function updatedata."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1547683234, "post_id": 54226817, "comment_id": 95280357, "body": "What&#39;s the &quot;JSON library&quot; and what do you mean by &quot;update the JSON library&quot;?"}, {"owner": {"reputation": 119, "user_id": 2241296, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4d8e6e9a6dfc5d060a2f576915dfb6c5?s=128&d=identicon&r=PG", "display_name": "RaptorPete", "link": "https://stackoverflow.com/users/2241296/raptorpete"}, "reply_to_user": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1547760814, "post_id": 54226817, "comment_id": 95313721, "body": "@martineau The JSON library is what is returned with &quot;requests.get&quot; API call. I think a more accurate name for it would be json dictionary object.  I need to take a key/value pair from that object and replace it with a new key/value pair."}, {"owner": {"reputation": 119, "user_id": 2241296, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4d8e6e9a6dfc5d060a2f576915dfb6c5?s=128&d=identicon&r=PG", "display_name": "RaptorPete", "link": "https://stackoverflow.com/users/2241296/raptorpete"}, "reply_to_user": {"reputation": 11899, "user_id": 7216865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X90W9.png?s=128&g=1", "display_name": "Maurice Meyer", "link": "https://stackoverflow.com/users/7216865/maurice-meyer"}, "edited": false, "score": 0, "creation_date": 1547760856, "post_id": 54226817, "comment_id": 95313746, "body": "@MauriceMeyer please see my responses to the other 2 answers.  Same question applies to you."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1547761292, "post_id": 54226817, "comment_id": 95313921, "body": "RaptorPete: <code>json.loads()</code> returns a Python object according the <a href=\"https://docs.python.org/3/library/json.html#encoders-and-decoders\" rel=\"nofollow noreferrer\">this</a> table in the documentation\u2014which typically aren&#39;t &quot;called&quot;\u2014so you would update it like you would the corresponding Python data-structure."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 2241296, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4d8e6e9a6dfc5d060a2f576915dfb6c5?s=128&d=identicon&r=PG", "display_name": "RaptorPete", "link": "https://stackoverflow.com/users/2241296/raptorpete"}, "edited": false, "score": 0, "creation_date": 1547760674, "post_id": 54226908, "comment_id": 95313660, "body": "Okay so this is not working for me and I have a follow up question.  In the function at the end <code>return data</code> does that not just call response.json() again, which means it is calling the original non-updated requests.get API call?"}, {"owner": {"reputation": 1612, "user_id": 7526786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8aa3d350ed791dd6de95b0ebe3fe06?s=128&d=identicon&r=PG&f=1", "display_name": "nicholishen", "link": "https://stackoverflow.com/users/7526786/nicholishen"}, "reply_to_user": {"reputation": 119, "user_id": 2241296, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4d8e6e9a6dfc5d060a2f576915dfb6c5?s=128&d=identicon&r=PG", "display_name": "RaptorPete", "link": "https://stackoverflow.com/users/2241296/raptorpete"}, "edited": false, "score": 0, "creation_date": 1547761766, "post_id": 54226908, "comment_id": 95314082, "body": "No. <code>data = r.json()</code> is a python <code>dict</code> and you are passing the dict to <code>updatedata</code> and returning a dict which is then passed to the <code>json</code> arg in the <code>post</code> function. <code>requests</code> is handling all the dict &lt;-&gt; json conversion for you."}], "tags": [], "owner": {"reputation": 1612, "user_id": 7526786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8aa3d350ed791dd6de95b0ebe3fe06?s=128&d=identicon&r=PG&f=1", "display_name": "nicholishen", "link": "https://stackoverflow.com/users/7526786/nicholishen"}, "is_accepted": false, "score": 2, "last_activity_date": 1547681225, "creation_date": 1547681225, "answer_id": 54226908, "question_id": 54226817, "link": "https://stackoverflow.com/questions/54226817/how-do-i-replace-a-value-of-a-key-from-a-returned-json-object-after-calling-an-a/54226908#54226908", "title": "How do I replace a value of a key from a returned JSON object after calling an API using requests.get?", "body": "<p>Your example doesn't replace the key, rather it creates a new entry with the value from the original key. If you need to simply update it then check if the key is in the dict, change it if it is, then return the new result. Also, you don't need the json lib with requests. </p>\n\n<pre><code>import requests\n\ndef updatedata(data, key, new_value):\n    if key in data:\n        data[key] = new_value\n    return data\n\nresponse = requests.get(my_URL, headers=my_headers)\ndata = response.json()\nresponse = requests.post(myUrl, json=updatedata(data, 'my_key', True))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 119, "user_id": 2241296, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4d8e6e9a6dfc5d060a2f576915dfb6c5?s=128&d=identicon&r=PG", "display_name": "RaptorPete", "link": "https://stackoverflow.com/users/2241296/raptorpete"}, "edited": false, "score": 0, "creation_date": 1547760728, "post_id": 54226978, "comment_id": 95313683, "body": "This is not working for me either.  When you <code>return data</code> at the end there, does that not just call the original requests.get API call? The one that has not yet been updated?"}, {"owner": {"reputation": 61, "user_id": 9899856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vdGoB.jpg?s=128&g=1", "display_name": "RedKoder", "link": "https://stackoverflow.com/users/9899856/redkoder"}, "reply_to_user": {"reputation": 119, "user_id": 2241296, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4d8e6e9a6dfc5d060a2f576915dfb6c5?s=128&d=identicon&r=PG", "display_name": "RaptorPete", "link": "https://stackoverflow.com/users/2241296/raptorpete"}, "edited": false, "score": 0, "creation_date": 1547824436, "post_id": 54226978, "comment_id": 95337453, "body": "Yes and no. Yes, in that with this function you are modifying the original variable from before the function call. However, any changes you make will persist after the function call. You really don&#39;t need the return unless you want to save it into a new variable, which is probably a better practice anyway."}, {"owner": {"reputation": 61, "user_id": 9899856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vdGoB.jpg?s=128&g=1", "display_name": "RedKoder", "link": "https://stackoverflow.com/users/9899856/redkoder"}, "reply_to_user": {"reputation": 119, "user_id": 2241296, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4d8e6e9a6dfc5d060a2f576915dfb6c5?s=128&d=identicon&r=PG", "display_name": "RaptorPete", "link": "https://stackoverflow.com/users/2241296/raptorpete"}, "edited": false, "score": 0, "creation_date": 1547824631, "post_id": 54226978, "comment_id": 95337565, "body": "Another way to be sure of what you&#39;re doing is to assign the passed in arg in to a new local variable inside the function and return that instead."}, {"owner": {"reputation": 119, "user_id": 2241296, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4d8e6e9a6dfc5d060a2f576915dfb6c5?s=128&d=identicon&r=PG", "display_name": "RaptorPete", "link": "https://stackoverflow.com/users/2241296/raptorpete"}, "edited": false, "score": 0, "creation_date": 1547843010, "post_id": 54226978, "comment_id": 95346029, "body": "This works how I need it to, thank you! I do have a question though.  For this line <code>data[key] = &#39;True&#39;  # specify the key, not the value</code> how is specifying &#39;True&#39; not specifying the value there?"}, {"owner": {"reputation": 61, "user_id": 9899856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vdGoB.jpg?s=128&g=1", "display_name": "RedKoder", "link": "https://stackoverflow.com/users/9899856/redkoder"}, "reply_to_user": {"reputation": 119, "user_id": 2241296, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4d8e6e9a6dfc5d060a2f576915dfb6c5?s=128&d=identicon&r=PG", "display_name": "RaptorPete", "link": "https://stackoverflow.com/users/2241296/raptorpete"}, "edited": false, "score": 0, "creation_date": 1548183524, "post_id": 54226978, "comment_id": 95449482, "body": "Ok, probably bad wording on my part... What I meant was that in order to change a value in a dictionary, you have to tell the program where to look by referencing the key, otherwise you end up adding another entry into it. Check out this link for a better explanation of how dictionaries work: <a href=\"https://www.tutorialspoint.com/python3/python_dictionary.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/python3/python_dictionary.htm</a>"}], "tags": [], "owner": {"reputation": 61, "user_id": 9899856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vdGoB.jpg?s=128&g=1", "display_name": "RedKoder", "link": "https://stackoverflow.com/users/9899856/redkoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1547825253, "last_edit_date": 1547825253, "creation_date": 1547681691, "answer_id": 54226978, "question_id": 54226817, "link": "https://stackoverflow.com/questions/54226817/how-do-i-replace-a-value-of-a-key-from-a-returned-json-object-after-calling-an-a/54226978#54226978", "title": "How do I replace a value of a key from a returned JSON object after calling an API using requests.get?", "body": "<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; myDict = {\"testing\": 1, \"testing2\": 2, \"my_key\": 3}\n&gt;&gt;&gt;\n&gt;&gt;&gt;\n&gt;&gt;&gt; def updatedata(data):\n...     k = 'my_key'\n...     for key, val in data.items():  # use a different variable to reduce confusion\n...         if key == 'my_key':\n...             data[key] = 'True'  # specify the key, not the value\n...     return data  # optional, unless you want to save into a new variable\n...\n&gt;&gt;&gt;\n&gt;&gt;&gt; updatedata(myDict)\n&gt;&gt;&gt; myDict\n{'testing': 1, 'testing2': 2, 'my_key': 'True'}\n&gt;&gt;&gt;\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 2241296, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4d8e6e9a6dfc5d060a2f576915dfb6c5?s=128&d=identicon&r=PG", "display_name": "RaptorPete", "link": "https://stackoverflow.com/users/2241296/raptorpete"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 641, "favorite_count": 0, "accepted_answer_id": 54226978, "answer_count": 2, "score": 1, "last_activity_date": 1547825253, "creation_date": 1547680590, "last_edit_date": 1547683053, "question_id": 54226817, "link": "https://stackoverflow.com/questions/54226817/how-do-i-replace-a-value-of-a-key-from-a-returned-json-object-after-calling-an-a", "title": "How do I replace a value of a key from a returned JSON object after calling an API using requests.get?", "body": "<p>Problem Summary:</p>\n\n<p>I am calling an API with requests.get.  The returned JSON object is being saved to a variable as a JSON dictionary:</p>\n\n<p><code>data = json.loads(response.text)</code></p>\n\n<p>I need to access that dictionary, then replace one of its keys' values, then I need to POST the new dictionary back to the API.  I tried this by creating a function.  The value is originally 'False' and I need to change it to be 'True':</p>\n\n<pre><code>def updatedata(data):\n    k = 'my_key'\n    for k, v in data.items():\n        if k == 'my_key':\n            data[v] = 'True'\n\nresponse = requests.get(my_URL, headers=my_headers)\ndata = json.loads(response.text)\nupdatedata(data)\n\nnewlibary = updatedata()\nprint(newlibrary)\n</code></pre>\n\n<p>The problem that arises is that I can't figure out how to update the JSON library without calling the original JSON library again.  How do I do the usual request.get, then use my function to change the value I need to change, then POST it again to a new API call like requests.post?</p>\n"}, {"tags": ["python", "anaconda", "jupyter-notebook"], "answers": [{"tags": [], "owner": {"reputation": 1173, "user_id": 7613995, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BYBfk.jpg?s=128&g=1", "display_name": "Ramesh Kumar", "link": "https://stackoverflow.com/users/7613995/ramesh-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1547681771, "last_edit_date": 1547681771, "creation_date": 1547681330, "answer_id": 54226919, "question_id": 54226763, "link": "https://stackoverflow.com/questions/54226763/installing-anaconda-on-server/54226919#54226919", "title": "Installing Anaconda on Server", "body": "<p>you can download anaconda using:<code>wget https://repo.continuum.io/archive/Anaconda3-5.1.0-Linux-x86_64.sh</code> \nand install using: <code>bash Anaconda3-5.1.0-Linux-x86_64.sh</code></p>\n\n<p>After that just source the path of Anaconda in <code>.bashrc</code> file, it should work.</p>\n\n<p>To access jupyter notebook, you can use ssh and run notebook in your browser on your host. Steps are mentioned in this <a href=\"https://coderwall.com/p/ohk6cg/remote-access-to-ipython-notebooks-via-ssh\" rel=\"nofollow noreferrer\">link</a></p>\n"}, {"comments": [{"owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1548182137, "post_id": 54227015, "comment_id": 95448910, "body": "did this  wget <a href=\"https://repo.continuum.io/archive/Anaconda2-2018.12-Linux-x86.sh\" rel=\"nofollow noreferrer\">repo.continuum.io/archive/Anaconda2-2018.12-Linux-x86.sh</a>   Gave this error   Proxy request sent, awaiting response... 200 OK Length: 543837797 (519M) [application/x-sh] Anaconda2-2018.12-Linux-x86.sh: Permission denied"}, {"owner": {"reputation": 327, "user_id": 2367094, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/63d4cf54f6d4b0b23f48a3877f37d309?s=128&d=identicon&r=PG", "display_name": "Jens Mander", "link": "https://stackoverflow.com/users/2367094/jens-mander"}, "edited": false, "score": 0, "creation_date": 1603024098, "post_id": 54227015, "comment_id": 113899397, "body": "Strange you have to use ssh to connect to the http server jupyter is. Seems to be overkill and unnecessarily complicates things to a point where half of interested people give up. Doesn&#39;t seem to be very intelligent to create something and then make it as impractical to use as possible."}], "tags": [], "owner": {"reputation": 3792, "user_id": 7259671, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/COi5o.jpg?s=128&g=1", "display_name": "webDev", "link": "https://stackoverflow.com/users/7259671/webdev"}, "is_accepted": false, "score": 0, "last_activity_date": 1547681917, "creation_date": 1547681917, "answer_id": 54227015, "question_id": 54226763, "link": "https://stackoverflow.com/questions/54226763/installing-anaconda-on-server/54227015#54227015", "title": "Installing Anaconda on Server", "body": "<p>Yes you can install anaconda on your linux machine (Server) and manage the python environment. But if just need Jupyter hosted in a server, just install Jupyter only and start the service which will server Jupyter Notebook. Access Jupyter notebook using your browser on any other PC.</p>\n\n<p>Make a google search that how to install anaconda on Linux machine (Centos/Ubuntu etc)\nAfter installation run following command</p>\n\n<pre><code>conda info\n</code></pre>\n\n<p>and then configure the Jupyter and run.</p>\n\n<p>Simple way (Install Jupyter on a server): <a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-run-connect-to-jupyter-notebook-on-remote-server\" rel=\"nofollow noreferrer\">Install, Run, and Connect to Jupyter Notebook on a Remote Server</a></p>\n"}, {"comments": [{"owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1547849457, "post_id": 54227081, "comment_id": 95348253, "body": "Getting this error when running on server terminal  ERROR: cannot verify repo.anaconda.com&#39;s certificate, issued by \u2018CN=COMODO ECC Domain Validation Secure Server CA 2,O=COMODO CA Limited,L=Salford,ST=Greater Manchester,C=GB\u2019:   Issued certificate not yet valid. To connect to repo.anaconda.com insecurely, use `--no-check-certificate&#39;."}, {"owner": {"reputation": 834, "user_id": 10865669, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r9C-rnUSavA/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbwtKadtyKPvdX8PTksV8ILx64Q-g/mo/photo.jpg?sz=128", "display_name": "Bruno Carballo", "link": "https://stackoverflow.com/users/10865669/bruno-carballo"}, "reply_to_user": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1547869842, "post_id": 54227081, "comment_id": 95351792, "body": "Go to <a href=\"https://www.anaconda.com/download\" rel=\"nofollow noreferrer\">anaconda.com/download</a> and copy the link to download the appropriate anaconda version, use that instead of repo.anaconda...."}, {"owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1548182494, "post_id": 54227081, "comment_id": 95449052, "body": "Problem is there is no link as such on the downloads page. If i choose Linux download and right click copy link doesn&#39;t copy the link. It starts downloading it"}, {"owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1548182596, "post_id": 54227081, "comment_id": 95449086, "body": "Ok I did copy the address of Linux download and then ran wget on terminal.   It gives me this error :   Proxy request sent, awaiting response... 200 OK Length: 584008163 (557M) [application/x-sh] Anaconda3-2018.12-MacOSX-x86_64.sh: Permission denied"}, {"owner": {"reputation": 834, "user_id": 10865669, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r9C-rnUSavA/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbwtKadtyKPvdX8PTksV8ILx64Q-g/mo/photo.jpg?sz=128", "display_name": "Bruno Carballo", "link": "https://stackoverflow.com/users/10865669/bruno-carballo"}, "reply_to_user": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1548189824, "post_id": 54227081, "comment_id": 95452185, "body": "that you may fix by using sudo (as in sudo wget ...), or moving to a directory where you have permission to write files"}, {"owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "edited": false, "score": 0, "creation_date": 1548347382, "post_id": 54227081, "comment_id": 95517912, "body": "I was able to download to local, scp to server and get it installed. But quick question. This anaconda is only available for me on server. I have colleagues who also have server access but they can&#39;t access it. Do they need to install their own Anaconda or is it possible we can get anaconda installed on server which is available for every user having account there? I asked admin to install using root permission, he did but it&#39;s not available to us. He installed under /opt directory. Do we all need to do some pathing or something? Sorry for noob questions"}], "tags": [], "owner": {"reputation": 834, "user_id": 10865669, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-r9C-rnUSavA/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbwtKadtyKPvdX8PTksV8ILx64Q-g/mo/photo.jpg?sz=128", "display_name": "Bruno Carballo", "link": "https://stackoverflow.com/users/10865669/bruno-carballo"}, "is_accepted": false, "score": 9, "last_activity_date": 1548189884, "last_edit_date": 1548189884, "creation_date": 1547682489, "answer_id": 54227081, "question_id": 54226763, "link": "https://stackoverflow.com/questions/54226763/installing-anaconda-on-server/54227081#54227081", "title": "Installing Anaconda on Server", "body": "<p>in a terminal on your remote server:</p>\n\n<pre><code>#download anaconda (change version if you want)\nwget https://repo.continuum.io/archive/Anaconda3-2018.12-Linux-x86_64.sh\n\n# run the installer\nbash Anaconda3-5.1.0-Linux-x86-64.sh\n\n# so changes in your path take place in you current session:\nsource ~/.bashrc\n\n#To run a remote notebook, replace XXXX with your choice of four numbers like 9191\njupyter notebook --no-browser --port=XXXX\n#copy the url that you get as a result\n</code></pre>\n\n<p>Then in your local machine, open up a terminal and write:</p>\n\n<pre><code>#XXXX is the port you specified in the previous step, YYYY is a local port, for example 9999 to keep it simple\nssh -f [USER]@[SERVER] -L YYYY:localhost:XXXX -N\n</code></pre>\n\n<p>Then copy the url from the previous step, paste it in a browser, since you used the same port, you don't have to change anything on the url</p>\n"}], "owner": {"reputation": 5616, "user_id": 2769240, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1501f510275875ae7ac437f758de28e8?s=128&d=identicon&r=PG", "display_name": "Baktaawar", "link": "https://stackoverflow.com/users/2769240/baktaawar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14898, "favorite_count": 2, "answer_count": 3, "score": 1, "last_activity_date": 1548189884, "creation_date": 1547680237, "question_id": 54226763, "link": "https://stackoverflow.com/questions/54226763/installing-anaconda-on-server", "title": "Installing Anaconda on Server", "body": "<p>I have a Unix server where I have Python3 installed. I ssh to the server from my mac. </p>\n\n<p>I was wondering if it possible to install Anaconda and Jupyter (will come with Anaconda) on the server so that I can just pull up Jupyter on the server terminal and run codes on jupyter running on the server. </p>\n\n<p>Is it possible? And if yes, could someone guide me to the right link?</p>\n"}, {"tags": ["python", "geopandas"], "answers": [{"tags": [], "owner": {"reputation": 3413, "user_id": 9978945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4931863323a8c30fa086d61604053db8?s=128&d=identicon&r=PG&f=1", "display_name": "martinfleis", "link": "https://stackoverflow.com/users/9978945/martinfleis"}, "is_accepted": false, "score": 0, "last_activity_date": 1547720573, "creation_date": 1547720573, "answer_id": 54233750, "question_id": 54226748, "link": "https://stackoverflow.com/questions/54226748/geopandas-installation-error-distutils-errors-compileerror/54233750#54233750", "title": "Geopandas installation error distutils.errors.CompileError", "body": "<p>Pyproj PyPI is outdated. You can either install GeoPandas via Conda or follow steps described in this GH issue <a href=\"https://github.com/geopandas/geopandas/issues/793\" rel=\"nofollow noreferrer\">https://github.com/geopandas/geopandas/issues/793</a> and install pyproj beforehand from Github via </p>\n\n<pre><code>pip install git+https://github.com/jswhit/pyproj.git#egg=pyproj\n</code></pre>\n\n<p>and then go for <code>pip install geopandas</code>. </p>\n"}], "owner": {"reputation": 421, "user_id": 1319910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42655d36cd097ad1e65ce01ce8ef04ae?s=128&d=identicon&r=PG&f=1", "display_name": "Geekster", "link": "https://stackoverflow.com/users/1319910/geekster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547720573, "creation_date": 1547680179, "question_id": 54226748, "link": "https://stackoverflow.com/questions/54226748/geopandas-installation-error-distutils-errors-compileerror", "title": "Geopandas installation error distutils.errors.CompileError", "body": "<p>I have been using <code>pip install geopandas</code> for installing the library on my Mac (OS: Mojave v10.14). However, I have been unsuccessful to install so far.</p>\n\n<p>Here is the error I get:</p>\n\n<pre><code>Collecting pyproj (from geopandas)\nDownloading https://files.pythonhosted.org/packages/26/8c/1da0580f334718e04f8bbf74f0515a7fb8185ff96b2560ce080c11aa145b/pyproj-1.9.6.tar.gz (2.8MB)\n100% |\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 2.8MB 9.0MB/s \nComplete output from command python setup.py egg_info:\nusing bundled proj4..\nxcrun: error: invalid active developer path (/Library/Developer/CommandLineTools), missing xcrun at: /Library/Developer/CommandLineTools/usr/bin/xcrun\nTraceback (most recent call last):\n  File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n  File \"/private/tmp/pip-install-C35peF/pyproj/setup.py\", line 86, in &lt;module&gt;\n    objects = cc.compile(['nad2bin.c', 'src/pj_malloc.c'])\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/ccompiler.py\", line 574, in compile\n    self._compile(obj, src, ext, cc_args, extra_postargs, pp_opts)\n  File \"/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/unixccompiler.py\", line 125, in _compile\n    raise CompileError, msg\ndistutils.errors.CompileError: command 'cc' failed with exit status 1\n\n----------------------------------------\nCommand \"python setup.py egg_info\" failed with error code 1 in /private/tmp/pip-install-C35peF/pyproj/\n</code></pre>\n\n<p>Any ideas why this might be happening and how can I fix this?</p>\n"}, {"tags": ["python", "regex", "variables"], "comments": [{"owner": {"reputation": 955, "user_id": 6194143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc1cd7ace9bb0ff64c8d1d0fccd7818a?s=128&d=identicon&r=PG&f=1", "display_name": "Tacratis", "link": "https://stackoverflow.com/users/6194143/tacratis"}, "edited": false, "score": 0, "creation_date": 1547680406, "post_id": 54226713, "comment_id": 95279632, "body": "is there any chance that the symbol <code>:</code> will occur somewhere else in the text other than just before <code>NET_NAME</code>?   And is the space between the <code>:</code> and <code>NET_NAME</code> always there?"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1547681891, "post_id": 54226713, "comment_id": 95280050, "body": "related: <a href=\"https://stackoverflow.com/q/1373164/2823755\">stackoverflow.com/q/1373164/2823755</a>"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1547682051, "post_id": 54226713, "comment_id": 95280083, "body": "Welcome to SO. Please take the time to read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and the other links found on that page."}, {"owner": {"reputation": 15, "user_id": 10820088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a580a91f8dc53252f1e58e67b0a4a1?s=128&d=identicon&r=PG&f=1", "display_name": "K.Meleo", "link": "https://stackoverflow.com/users/10820088/k-meleo"}, "edited": false, "score": 0, "creation_date": 1547711938, "post_id": 54226713, "comment_id": 95287497, "body": "@ Tacratis no the log file will just have that one line in the example with one instance of : and the space after :"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 10820088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a580a91f8dc53252f1e58e67b0a4a1?s=128&d=identicon&r=PG&f=1", "display_name": "K.Meleo", "link": "https://stackoverflow.com/users/10820088/k-meleo"}, "edited": false, "score": 0, "creation_date": 1547712790, "post_id": 54226786, "comment_id": 95287925, "body": "@Taras that works and extracts NET_NAME and prints the output.  Is there anyway to write that to the file with out the other text? i try adding f.write(name) f.close. but i get error &quot;line 18, in &lt;module&gt;     f.write(name) io.UnsupportedOperation: write&quot;"}, {"owner": {"reputation": 647, "user_id": 1548477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e043e85528adf57609c0a1d7430ff4?s=128&d=identicon&r=PG", "display_name": "Taras Tsugrii", "link": "https://stackoverflow.com/users/1548477/taras-tsugrii"}, "reply_to_user": {"reputation": 15, "user_id": 10820088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a580a91f8dc53252f1e58e67b0a4a1?s=128&d=identicon&r=PG&f=1", "display_name": "K.Meleo", "link": "https://stackoverflow.com/users/10820088/k-meleo"}, "edited": false, "score": 0, "creation_date": 1547769854, "post_id": 54226786, "comment_id": 95316594, "body": "@K.Meleo, you cannot and should not write into the file that is open as read-only (<code>r</code>). You should open a file for writing <code>open(&quot;output.txt&quot;, &quot;w&quot;)</code> and use it instead of <code>f</code>."}, {"owner": {"reputation": 647, "user_id": 1548477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e043e85528adf57609c0a1d7430ff4?s=128&d=identicon&r=PG", "display_name": "Taras Tsugrii", "link": "https://stackoverflow.com/users/1548477/taras-tsugrii"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1547769893, "post_id": 54226786, "comment_id": 95316607, "body": "@wwii, I prefer to be explicit about the encodings I expect to find in files :)"}], "tags": [], "owner": {"reputation": 647, "user_id": 1548477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e043e85528adf57609c0a1d7430ff4?s=128&d=identicon&r=PG", "display_name": "Taras Tsugrii", "link": "https://stackoverflow.com/users/1548477/taras-tsugrii"}, "is_accepted": false, "score": 0, "last_activity_date": 1547680324, "creation_date": 1547680324, "answer_id": 54226786, "question_id": 54226713, "link": "https://stackoverflow.com/questions/54226713/how-to-extract-word-from-text-file-to-use-as-a-variable/54226786#54226786", "title": "How to extract word from text file to use as a variable?", "body": "<p><code>split</code> can indeed be used to achieve this. In case you're using Python3 and the content is in <code>text.txt</code> file, the snippet below should be able to do the trick:</p>\n\n<pre><code>with open(\"text.txt\", \"rb\") as f:\n  content = f.read().decode(\"utf-8\")\n  name = content.split(\":\")[1].strip()\n\nprint(name)\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 10820088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a580a91f8dc53252f1e58e67b0a4a1?s=128&d=identicon&r=PG&f=1", "display_name": "K.Meleo", "link": "https://stackoverflow.com/users/10820088/k-meleo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 287, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547683734, "creation_date": 1547679904, "last_edit_date": 1547683734, "question_id": 54226713, "link": "https://stackoverflow.com/questions/54226713/how-to-extract-word-from-text-file-to-use-as-a-variable", "title": "How to extract word from text file to use as a variable?", "body": "<p>I have a simple script that writes the network name to a log file. It displays the following.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>All User Profile     : NET_NAME\n</code></pre>\n\n<p>what I would like to do is open that text file and extract just the <code>NET_NAME</code> part and then be able to use that as a variable and also save the text file with the changes.</p>\n\n<p>I have tried using <code>split</code> function, it kind of works when using the text, but when trying to read from the file it doesn't work.  I have searched regex but do not know the syntax to achieve what I want.</p>\n"}, {"tags": ["python", "python-3.x", "loops", "while-loop"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1547680246, "post_id": 54226698, "comment_id": 95279576, "body": "<code>True</code> and <code>False</code> are getting evaluated as themselves. <code>while False:</code> never enters the loop... <code>while True</code> never terminates unless you break or return from inside the loop (return only in a function, fo course)"}], "answers": [{"tags": [], "owner": {"reputation": 647, "user_id": 1548477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24e043e85528adf57609c0a1d7430ff4?s=128&d=identicon&r=PG", "display_name": "Taras Tsugrii", "link": "https://stackoverflow.com/users/1548477/taras-tsugrii"}, "is_accepted": false, "score": 0, "last_activity_date": 1547680046, "creation_date": 1547680046, "answer_id": 54226725, "question_id": 54226698, "link": "https://stackoverflow.com/questions/54226698/while-loops-in-python-3-and-true-false-conditions/54226725#54226725", "title": "While loops in Python 3 and True/False conditions", "body": "<p>The reason why the answer is <code>0</code> is because <code>while False</code> means that the body of the loop is not going to be executed even a single time, and since <code>total3</code> is only incremented in the body loop, its value is going to stay the same as before the loop, which is <code>0</code> because of <code>total3=0</code> line above it.</p>\n\n<p>In order for the loop body to execute the value of the expression after <code>while</code> should be <a href=\"https://docs.python.org/2.4/lib/truth.html\" rel=\"nofollow noreferrer\">truthy</a>. The most common truthy value is <code>True</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1612, "user_id": 7526786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af8aa3d350ed791dd6de95b0ebe3fe06?s=128&d=identicon&r=PG&f=1", "display_name": "nicholishen", "link": "https://stackoverflow.com/users/7526786/nicholishen"}, "is_accepted": false, "score": -1, "last_activity_date": 1547680308, "creation_date": 1547680308, "answer_id": 54226780, "question_id": 54226698, "link": "https://stackoverflow.com/questions/54226698/while-loops-in-python-3-and-true-false-conditions/54226780#54226780", "title": "While loops in Python 3 and True/False conditions", "body": "<p>A while loop evaluates a condition and executes the code in its block when the condition evaluates to <code>True</code>, otherwise it exits the loop. The condition <code>True</code> causes the loop to continue infinitely since it can only ever evaluate to True, while <code>False</code> causes the loop to immediately exit without running the code in its block. </p>\n\n<p>I know this is only an example of how to use a while loop, however, had this been an actual use case you'd want to use a for loop instead. </p>\n\n<pre><code>given_list2 = [5, 4, 4, 3, 1, -2, -3, -5]\ntotal3 = 0\n\nfor n in given_list2:\n    if n &gt; 0:\n        total3 += n\n    else:\n        break\n\nprint(total3)\n</code></pre>\n\n<p>or even</p>\n\n<pre><code>total3 = sum(n for n in given_list2 if n &gt; 0)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 270, "user_id": 9518258, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "0xdd", "link": "https://stackoverflow.com/users/9518258/0xdd"}, "edited": false, "score": 1, "creation_date": 1547736668, "post_id": 54226782, "comment_id": 95301426, "body": "Please don&#39;t encourage low-quality questions by answering them -- if you see something that has duplicates, shows little research effort, or both, just link to the duplicate."}], "tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": true, "score": -1, "last_activity_date": 1547680316, "creation_date": 1547680316, "answer_id": 54226782, "question_id": 54226698, "link": "https://stackoverflow.com/questions/54226698/while-loops-in-python-3-and-true-false-conditions/54226782#54226782", "title": "While loops in Python 3 and True/False conditions", "body": "<p>True and False are boolean literal values. That is, their values are known and set by the language. Imagine if you had something like:</p>\n\n<pre><code>while 1 &lt; 2:\n</code></pre>\n\n<p>The \"1\" and the \"2\" are integer literal values. The expression is never changing, the results will always be the same. In this case, the result is a boolean value equal to <code>True</code>.</p>\n\n<p>So a while loop that has \"True\" or any unchanging true expression, like <code>1 &lt; 2</code>, as the condition, is going to want to run \"forever\" because it will never fail that test. The only way to stop such a loop is to generate a keyboard exception (usually by pressing \"Ctrl-C\"), or to have an uncaught exception occur inside the code somewhere, or to have some piece of code execute a <code>break</code> statement.</p>\n\n<p>In your example, you are adding up the numbers in the <code>given_list2</code> and stop (by executing a <code>break</code>) when you encounter a negative number. So the positive numbers are summed, which is 17.</p>\n\n<p>Similarly, a <code>while</code> loop that has \"False\" or any unchanging false expression as the condition is <em>never</em> going to run, because the very first test of <code>while 1 &gt; 2</code> will fail and the loop will abort. This results in none of the inside code being executed.</p>\n\n<p>In your example, you start with <code>total3 = 0</code> and never run any code, so it stays 0.</p>\n"}], "owner": {"reputation": 1, "user_id": 10925021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29769e37cad5456d13e3caa94c511fef?s=128&d=identicon&r=PG&f=1", "display_name": "AnFa", "link": "https://stackoverflow.com/users/10925021/anfa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1483, "favorite_count": 0, "closed_date": 1547680979, "accepted_answer_id": 54226782, "answer_count": 3, "score": -2, "last_activity_date": 1547680316, "creation_date": 1547679804, "question_id": 54226698, "link": "https://stackoverflow.com/questions/54226698/while-loops-in-python-3-and-true-false-conditions", "closed_reason": "Duplicate", "title": "While loops in Python 3 and True/False conditions", "body": "<p>So, I'm learning Python through a series of videos on YT and this time, while loops are being covered. The exemple code is thus:</p>\n\n<pre><code>given_list2=[5,4,4,3,1,-2,-3,-5]\ntotal3=0\ni=0\nwhile True:\n    total3+=given_list2[i]\n    i+=1\n    if given_list2[i]&lt;=0:\n        break\nprint(total3)\n</code></pre>\n\n<p>Running the script, I get 17 as a result. Then, experimenting with the code, I exchanged <code>True</code> for <code>False</code> as thus:</p>\n\n<pre><code>given_list2=[5,4,4,3,1,-2,-3,-5]\ntotal3=0\ni=0\nwhile False:\n    total3+=given_list2[i]\n    i+=1\n    if given_list2[i]&lt;=0:\n        break\nprint(total3)\n</code></pre>\n\n<p>And it gives me 0 as a result. I'm trying to understand why that's the case. Like, what is it being considered <code>True</code> that keeps running the code, and what is being considered <code>False</code> that it fails to even initialize the code?</p>\n"}, {"tags": ["python", "python-3.x", "io", "buffer"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "reply_to_user": {"reputation": 313, "user_id": 10860988, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XZ-BU2SVZIU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca8QHjpsM-XftnocTv9G2tBaY95sQ/mo/photo.jpg?sz=128", "display_name": "Alexander Strakhov", "link": "https://stackoverflow.com/users/10860988/alexander-strakhov"}, "edited": false, "score": 1, "creation_date": 1547681805, "post_id": 54226665, "comment_id": 95280029, "body": "@AlexanderStrakhov That link is to python 2.7, but this question is tagged python 3."}, {"owner": {"reputation": 2224, "user_id": 3464933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac317b53df702d2a94d20ecd676e301?s=128&d=identicon&r=PG&f=1", "display_name": "Sim&#243;n Ram&#237;rez Amaya", "link": "https://stackoverflow.com/users/3464933/sim%c3%b3n-ram%c3%adrez-amaya"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1547682020, "post_id": 54226665, "comment_id": 95280073, "body": "@JohnGordon What is it supposed to mean? From the docs: &quot;buffering is an optional integer used to set the buffering policy. Pass 0 to switch buffering off (only allowed in binary mode), 1 to select line buffering (only usable in text mode), and an integer &gt; 1 to indicate the size in bytes of a fixed-size chunk buffer.&quot;"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1547682192, "post_id": 54226665, "comment_id": 95280128, "body": "@Sim&#243;nRam&#237;rezAmaya The answer that was linked to in the earlier comment quotes 2.7 documentation, which says that it&#39;s an approximate size. The 3.6 documentation is different, it doesn&#39;t say approximate."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1547686694, "post_id": 54226665, "comment_id": 95281018, "body": "My apologies; I misread the documentation.  I will remove my earlier comment."}], "answers": [{"comments": [{"owner": {"reputation": 313, "user_id": 10860988, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XZ-BU2SVZIU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca8QHjpsM-XftnocTv9G2tBaY95sQ/mo/photo.jpg?sz=128", "display_name": "Alexander Strakhov", "link": "https://stackoverflow.com/users/10860988/alexander-strakhov"}, "edited": false, "score": 0, "creation_date": 1547686181, "post_id": 54227339, "comment_id": 95280935, "body": "Thank you for your research. So does the fact that we have to explicitly state for the TextIOWrapper to pass down writes to BufferedWriter mean that original open(..., buffering = 2) parameter does not affect the size of the TextIOWrapper buffer?"}, {"owner": {"reputation": 7205, "user_id": 9288200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1c4dc5d3f7433e18f4aa04319ebaec?s=128&d=identicon&r=PG&f=1", "display_name": "Ondrej K.", "link": "https://stackoverflow.com/users/9288200/ondrej-k"}, "reply_to_user": {"reputation": 313, "user_id": 10860988, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XZ-BU2SVZIU/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwca8QHjpsM-XftnocTv9G2tBaY95sQ/mo/photo.jpg?sz=128", "display_name": "Alexander Strakhov", "link": "https://stackoverflow.com/users/10860988/alexander-strakhov"}, "edited": false, "score": 2, "creation_date": 1547687016, "post_id": 54227339, "comment_id": 95281076, "body": "Indeed buffer of <code>_io.TextIOWrapper</code> itself is hard coded in the guts at the moment to 8kB."}], "tags": [], "owner": {"reputation": 7205, "user_id": 9288200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1c4dc5d3f7433e18f4aa04319ebaec?s=128&d=identicon&r=PG&f=1", "display_name": "Ondrej K.", "link": "https://stackoverflow.com/users/9288200/ondrej-k"}, "is_accepted": true, "score": 3, "last_activity_date": 1547687514, "last_edit_date": 1547687514, "creation_date": 1547684465, "answer_id": 54227339, "question_id": 54226665, "link": "https://stackoverflow.com/questions/54226665/buffering-argument-of-open-seemingly-ignored-when-working-with-text-i-o/54227339#54227339", "title": "buffering argument of open() seemingly ignored when working with text I/O", "body": "<p>I've poked around the a bit. Indeed the documentation states:</p>\n\n<blockquote>\n  <p><em>buffering</em> is an optional integer used to set the buffering policy. Pass 0 to switch buffering off (only allowed in binary mode), 1 to select line buffering (only usable in text mode), and an integer > 1 to indicate the size in bytes of a fixed-size chunk buffer...</p>\n</blockquote>\n\n<p>Hence it would be reasonable to expect that specifying <code>buffering=2</code> would cause buffer of size <code>2B</code> to be used (and see files flushed when using that buffer up). However in the text mode it seem to (and the documentation doesn't really clearly indicate that in this place) affect the underlining <code>BufferedWriter</code>, but <code>TextIOWrapper</code> whose <code>write()</code> you end up calling does still \"its own thing\"... Starting with Python 3.7 you tell it not to and have it pass the writes immediately to the underlying object by calling <a href=\"https://docs.python.org/3/library/io.html?#io.TextIOWrapper.reconfigure\" rel=\"nofollow noreferrer\"><code>f.reconfigure(write_through=True)</code></a> on the file you have opened.</p>\n\n<hr>\n\n<p>Actually all the code and checks for value of <code>write_through</code> are already in Python 3.6 (I've checked 3.6.8) (as a matter of fact <code>_io_TextIOWrapper_write_impl</code>, i.e. <code>_io.TextIOWrapper.write</code>, are identical in both versions), but the <code>write_through</code> attribute is not exposed (yet).</p>\n"}], "owner": {"reputation": 2224, "user_id": 3464933, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac317b53df702d2a94d20ecd676e301?s=128&d=identicon&r=PG&f=1", "display_name": "Sim&#243;n Ram&#237;rez Amaya", "link": "https://stackoverflow.com/users/3464933/sim%c3%b3n-ram%c3%adrez-amaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 2, "accepted_answer_id": 54227339, "answer_count": 1, "score": 1, "last_activity_date": 1547743076, "creation_date": 1547679556, "last_edit_date": 1547743076, "question_id": 54226665, "link": "https://stackoverflow.com/questions/54226665/buffering-argument-of-open-seemingly-ignored-when-working-with-text-i-o", "title": "buffering argument of open() seemingly ignored when working with text I/O", "body": "<p>The buffering argument of the built-in open() function seems to be ignored when working with text I/O:</p>\n\n<p><strong>Text I/O</strong>:</p>\n\n<pre><code>&gt;&gt;&gt; f = open(\"myfile_text.txt\", \"w\",buffering=2)\n&gt;&gt;&gt; f.write('1')\n1\n&gt;&gt;&gt; f.write('1')\n1\n&gt;&gt;&gt; f.write('1')\n1\n\nmymachine:~ myuser$ cat myfile.txt ; echo\nmymachine:~ myuser$\n</code></pre>\n\n<p><strong>Binary I/O</strong>:</p>\n\n<pre><code>&gt;&gt;&gt; f = open(\"myfile_binary.txt\", \"wb\",buffering=2)\n&gt;&gt;&gt; f.write('1'.encode())\n1\n&gt;&gt;&gt; f.write('1'.encode())\n1\n&gt;&gt;&gt; f.write('1'.encode())\n1\n\nmymachine:~ myuser$ cat myfile.txt ; echo\n11\nmymachine:~ myuser$\n</code></pre>\n\n<p>Why? Is this intended behavior?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "fillna"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 4263268, "user_type": "registered", "profile_image": "https://graph.facebook.com/824427387/picture?type=large", "display_name": "Emmett Ogiony", "link": "https://stackoverflow.com/users/4263268/emmett-ogiony"}, "edited": false, "score": 0, "creation_date": 1547736116, "post_id": 54226996, "comment_id": 95301103, "body": "Thank you @jpp for the quick response. This is returning the following error:  <code>A value is trying to be set on a copy of a slice from a DataFrame. Try using .loc[row_indexer,col_indexer] = value instead  See the caveats in the documentation: http:&#47;&#47;pandas.pydata.org&#47;pandas-docs&#47;stable&#47;indexing.html#in&zwnj;&#8203;dexing-view-versus-c&zwnj;&#8203;opy   self.obj[item] = s</code>"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 83, "user_id": 4263268, "user_type": "registered", "profile_image": "https://graph.facebook.com/824427387/picture?type=large", "display_name": "Emmett Ogiony", "link": "https://stackoverflow.com/users/4263268/emmett-ogiony"}, "edited": false, "score": 1, "creation_date": 1547736212, "post_id": 54226996, "comment_id": 95301153, "body": "That&#39;s a <i>warning</i>, not an <i>error</i>: check your result, it should still work. There are some cases where you can simply ignore the warning."}, {"owner": {"reputation": 83, "user_id": 4263268, "user_type": "registered", "profile_image": "https://graph.facebook.com/824427387/picture?type=large", "display_name": "Emmett Ogiony", "link": "https://stackoverflow.com/users/4263268/emmett-ogiony"}, "edited": false, "score": 0, "creation_date": 1547736484, "post_id": 54226996, "comment_id": 95301312, "body": "Okay ran it, checked the output, and it outputs the below:    +--------------+---------+---------------+--------+ |  Department  |  Range  |    Rating     | Number | +--------------+---------+---------------+--------+ | Admin        | 04 to 6 |  2. On Target |      2 | | Distribution | 04 to 6 |  2. On Target |      2 | +--------------+---------+---------------+--------+"}, {"owner": {"reputation": 83, "user_id": 4263268, "user_type": "registered", "profile_image": "https://graph.facebook.com/824427387/picture?type=large", "display_name": "Emmett Ogiony", "link": "https://stackoverflow.com/users/4263268/emmett-ogiony"}, "edited": false, "score": 0, "creation_date": 1547736585, "post_id": 54226996, "comment_id": 95301370, "body": "Apologies, not sure out to format tables in comments @jpp"}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 83, "user_id": 4263268, "user_type": "registered", "profile_image": "https://graph.facebook.com/824427387/picture?type=large", "display_name": "Emmett Ogiony", "link": "https://stackoverflow.com/users/4263268/emmett-ogiony"}, "edited": false, "score": 1, "creation_date": 1547736662, "post_id": 54226996, "comment_id": 95301421, "body": "@EmnutOggionni, OK, I can&#39;t replicate with the data you&#39;ve provided."}, {"owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "reply_to_user": {"reputation": 83, "user_id": 4263268, "user_type": "registered", "profile_image": "https://graph.facebook.com/824427387/picture?type=large", "display_name": "Emmett Ogiony", "link": "https://stackoverflow.com/users/4263268/emmett-ogiony"}, "edited": false, "score": 0, "creation_date": 1547743994, "post_id": 54226996, "comment_id": 95305858, "body": "@EmnutOggionni, Out of interest, what was the issue?"}, {"owner": {"reputation": 83, "user_id": 4263268, "user_type": "registered", "profile_image": "https://graph.facebook.com/824427387/picture?type=large", "display_name": "Emmett Ogiony", "link": "https://stackoverflow.com/users/4263268/emmett-ogiony"}, "edited": false, "score": 0, "creation_date": 1551804217, "post_id": 54226996, "comment_id": 96770376, "body": "Of course I had a variable in the wrong place. Sorry for the delay in reply!"}], "tags": [], "owner": {"reputation": 133282, "user_id": 9209546, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qk9vC.jpg?s=128&g=1", "display_name": "jpp", "link": "https://stackoverflow.com/users/9209546/jpp"}, "is_accepted": true, "score": 1, "last_activity_date": 1547681807, "creation_date": 1547681807, "answer_id": 54226996, "question_id": 54226658, "link": "https://stackoverflow.com/questions/54226658/how-do-i-fill-blank-space-before-and-after-filled-cells/54226996#54226996", "title": "How Do I Fill Blank Space Before and After Filled Cells?", "body": "<p>You can use <code>pd.concat</code> with <code>groupby</code> and utilise a custom function for filling logic:</p>\n\n<pre><code># convert to numeric\ndf['Number'] = pd.to_numeric(df['Number'])\n\n# assign values by index\ndef filler(x):\n    idx = np.where(x['Number'].notnull())[0]\n    x.iloc[:idx[0], -2:] = ['1. Too Low', 1]\n    x.iloc[idx[-1]+1:, -2:] = ['3. Too High', 3]\n    return x\n\n# concatenate transformed dataframe slices\nres = pd.concat(df_slice.pipe(filler) for _, df_slice in df.groupby('Department'))\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>print(res)\n\n      Department     Range        Rating  Number\n0          Admin  0 (None)    1. Too Low     1.0\n1          Admin   01 to 3    1. Too Low     1.0\n2          Admin   01 to 3    1. Too Low     1.0\n3          Admin   01 to 3    1. Too Low     1.0\n4          Admin   04 to 6  2. On Target     2.0\n5          Admin   04 to 6  2. On Target     2.0\n6          Admin   04 to 6  2. On Target     2.0\n7          Admin  07 to 10   3. Too High     3.0\n8          Admin  07 to 10   3. Too High     3.0\n9          Admin  07 to 10   3. Too High     3.0\n10         Admin  07 to 10   3. Too High     3.0\n11  Distribution  0 (None)    1. Too Low     1.0\n12  Distribution   01 to 3    1. Too Low     1.0\n13  Distribution   01 to 3    1. Too Low     1.0\n14  Distribution   01 to 3    1. Too Low     1.0\n15  Distribution   04 to 6  2. On Target     2.0\n16  Distribution   04 to 6  2. On Target     2.0\n17  Distribution   04 to 6  2. On Target     2.0\n18  Distribution  07 to 10   3. Too High     3.0\n19  Distribution  07 to 10   3. Too High     3.0\n20  Distribution  07 to 10   3. Too High     3.0\n21  Distribution  07 to 10   3. Too High     3.0\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4263268, "user_type": "registered", "profile_image": "https://graph.facebook.com/824427387/picture?type=large", "display_name": "Emmett Ogiony", "link": "https://stackoverflow.com/users/4263268/emmett-ogiony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 54226996, "answer_count": 1, "score": 3, "last_activity_date": 1547681807, "creation_date": 1547679530, "question_id": 54226658, "link": "https://stackoverflow.com/questions/54226658/how-do-i-fill-blank-space-before-and-after-filled-cells", "title": "How Do I Fill Blank Space Before and After Filled Cells?", "body": "<p>I am working to try to group my data by a Department property and then once I have it grouped fill in the space above and below two fields that are filled in at the middle of the dataset (Rating and Number). </p>\n\n<p>I have tried getting the groupby to work but to no avail. My plan is to get the groupby working then apply the following code to see if I can get the fill to work correctly.</p>\n\n<pre><code># This won't work on its own because I need to group the data first.    \ndf = df.mask(df == 0).ffill()\n</code></pre>\n\n<p>This is what I am starting with:</p>\n\n<pre>\n| Department   | Range    | Rating       | Number |\n|--------------|----------|--------------|--------|\n| Admin        | 0 (None) |              |        |\n| Admin        | 01 to 3  |              |        |\n| Admin        | 01 to 3  |              |        |\n| Admin        | 01 to 3  |              |        |\n| Admin        | 04 to 6  | 2. On Target | 2      |\n| Admin        | 04 to 6  | 2. On Target | 2      |\n| Admin        | 04 to 6  | 2. On Target | 2      |\n| Admin        | 07 to 10 |              |        |\n| Admin        | 07 to 10 |              |        |\n| Admin        | 07 to 10 |              |        |\n| Admin        | 07 to 10 |              |        |\n| Distribution | 0 (None) |              |        |\n| Distribution | 01 to 3  |              |        |\n| Distribution | 01 to 3  |              |        |\n| Distribution | 01 to 3  |              |        |\n| Distribution | 04 to 6  | 2. On Target | 2      |\n| Distribution | 04 to 6  | 2. On Target | 2      |\n| Distribution | 04 to 6  | 2. On Target | 2      |\n| Distribution | 07 to 10 |              |        |\n| Distribution | 07 to 10 |              |        |\n| Distribution | 07 to 10 |              |        |\n| Distribution | 07 to 10 |              |        |\n</pre>\n\n<p>This is what I want</p>\n\n<pre>\n| Department   | Range    | Rating       | Number |\n|--------------|----------|--------------|--------|\n| Admin        | 0 (None) | 1. Too Low   | 1      |\n| Admin        | 01 to 3  | 1. Too Low   | 1      |\n| Admin        | 01 to 3  | 1. Too Low   | 1      |\n| Admin        | 01 to 3  | 1. Too Low   | 1      |\n| Admin        | 04 to 6  | 2. On Target | 2      |\n| Admin        | 04 to 6  | 2. On Target | 2      |\n| Admin        | 04 to 6  | 2. On Target | 2      |\n| Admin        | 07 to 10 | 3. Too High  | 3      |\n| Admin        | 07 to 10 | 3. Too High  | 3      |\n| Admin        | 07 to 10 | 3. Too High  | 3      |\n| Admin        | 07 to 10 | 3. Too High  | 3      |\n| Distribution | 0 (None) | 1. Too Low   | 1      |\n| Distribution | 01 to 3  | 1. Too Low   | 1      |\n| Distribution | 01 to 3  | 1. Too Low   | 1      |\n| Distribution | 01 to 3  | 1. Too Low   | 1      |\n| Distribution | 04 to 6  | 2. On Target | 2      |\n| Distribution | 04 to 6  | 2. On Target | 2      |\n| Distribution | 04 to 6  | 2. On Target | 2      |\n| Distribution | 07 to 10 | 3. Too High  | 3      |\n| Distribution | 07 to 10 | 3. Too High  | 3      |\n| Distribution | 07 to 10 | 3. Too High  | 3      |\n| Distribution | 07 to 10 | 3. Too High  | 3      |\n</pre>\n\n<p>Is there any dynamic way to do this? </p>\n"}, {"tags": ["python", "python-2.7", "unicode", "glob", "python-os"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1547688615, "post_id": 54226625, "comment_id": 95281367, "body": "One likely problem is in the renaming loop at the end, you need to do something like <code>file = os.path.join(root, file)</code> to get the complete path to the file being renamed by the <code>os.rename()</code> call. In addition it&#39;s also possible your OS doesn&#39;t allow that Unicode character in file names."}], "answers": [{"comments": [{"owner": {"reputation": 4769, "user_id": 4576447, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/515479fe6cfdf7adc9cc3d4e1dec6720?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Kurushingal", "link": "https://stackoverflow.com/users/4576447/tom-kurushingal"}, "edited": false, "score": 0, "creation_date": 1547704782, "post_id": 54228759, "comment_id": 95284744, "body": "This does not rename the folder, if you could edit the code to rename the folders, I could accept the answer."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "reply_to_user": {"reputation": 4769, "user_id": 4576447, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/515479fe6cfdf7adc9cc3d4e1dec6720?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Kurushingal", "link": "https://stackoverflow.com/users/4576447/tom-kurushingal"}, "edited": false, "score": 0, "creation_date": 1547707934, "post_id": 54228759, "comment_id": 95285836, "body": "@Tom Updated.  As written it works in Python 2 and 3 as well."}], "tags": [], "owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "is_accepted": true, "score": 1, "last_activity_date": 1547707847, "last_edit_date": 1547707847, "creation_date": 1547697072, "answer_id": 54228759, "question_id": 54226625, "link": "https://stackoverflow.com/questions/54226625/how-to-rename-replace-a-particular-keyword-with-unicode-character-for-all-files/54228759#54228759", "title": "How to rename/replace a particular keyword with unicode character for all files and the associated folders?", "body": "<p>There are at least five issues:</p>\n\n<ol>\n<li>When dealing with Unicode, use it everywhere.  <code>os.walk</code> will return Unicode filenames if passed a Unicode path.  <code>from __future__ import unicode_literals</code> will default strings to Unicode.</li>\n<li>When opening files, close them.  You'll run into problems later when renaming.  <code>result</code> still exists and has a reference to the last file opened.</li>\n<li>As mentioned in a comment, use <code>os.path.join</code> on the <code>root</code> and the <code>file</code> for both the before and after name.</li>\n<li>Use <code>os.walk</code> with <code>topdown=False</code>.  This will process the leaf nodes first, so the directory tree isn't corrupted (and keeping <code>root</code> and <code>dirs</code> valid) while traversing it.</li>\n<li>Rename the files first, then the directories, again to not corrupt the directory tree while traversing it.</li>\n</ol>\n\n<p>Result:</p>\n\n<pre><code>from __future__ import unicode_literals\n\n# Skipping unchanged code...\n\nfor root, dirs, files in os.walk('./input_folder'):\n    for dir in dirs:\n        # One way to ensure the file is closed.\n        with open(os.path.join(root,dir) + '/ABC ' + str(random.randint(100,999)) + '.dat','w'):\n            pass\n        with open(os.path.join(root,dir) + '/XYZ-ABC ' + str(random.randint(100,999)) + '.dat','w'):\n            pass\n\n#--------------------------------------\n# Main rename code\n\nfor root, dirs, files in os.walk('./input_folder',topdown=False):\n    for file in files:  \n        if file.endswith((\".dat\")):\n            # Generate the full file path names.\n            filename1 = os.path.join(root,file)\n            filename2 = os.path.join(root,file.replace('ABC', '\\u2714'))\n            os.rename(filename1,filename2)\n    for d in dirs:  \n        # Generate the full directory path names.\n        dirname1 = os.path.join(root,d)\n        dirname2 = os.path.join(root,d.replace('ABC', '\\u2714'))\n        os.rename(dirname1,dirname2)\n</code></pre>\n"}], "owner": {"reputation": 4769, "user_id": 4576447, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/515479fe6cfdf7adc9cc3d4e1dec6720?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Kurushingal", "link": "https://stackoverflow.com/users/4576447/tom-kurushingal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 54228759, "answer_count": 1, "score": 1, "last_activity_date": 1547707847, "creation_date": 1547679342, "last_edit_date": 1547684075, "question_id": 54226625, "link": "https://stackoverflow.com/questions/54226625/how-to-rename-replace-a-particular-keyword-with-unicode-character-for-all-files", "title": "How to rename/replace a particular keyword with unicode character for all files and the associated folders?", "body": "<p>I have the following files and subdirectories in a directory (<code>'input_folder'</code>) and I would like to change the name of all the files with <code>'.dat'</code> extension and all the folders that have a particular keyword (e.g., <code>ABC</code>) with a Unicode character. A MWE is given below:</p>\n\n<pre><code>import os\nimport random\nimport errno    \n#--------------------------------------\n# Create random folders and files\n\n# tzot's forced directory create hack https://stackoverflow.com/a/600612/4576447\ndef mkdir_p(path):\n    try:\n        os.makedirs(path)\n    except OSError as exc:  # Python &gt;2.5\n        if exc.errno == errno.EEXIST and os.path.isdir(path):\n            pass\n        else:\n            raise\n\n\nif not os.path.isdir('./input_folder'):\n    os.makedirs('input_folder')\nfor i in range(10):\n    mkdir_p('./input_folder/folder_ABC_' + str(random.randint(100,999)))\n\n\nfor root, dirs, files in os.walk('./input_folder'):\n    for dir in dirs:\n        result = open(os.path.join(root,dir) + '/ABC ' + str(random.randint(100,999)) + '.dat','w')\n        result = open(os.path.join(root,dir) + '/XYZ-ABC ' + str(random.randint(100,999)) + '.dat','w')\n\n#--------------------------------------\n# Main rename code\n\nfor root, dirs, files in os.walk('./input_folder'):\n    for file in files:  \n        if file.endswith((\".dat\")):\n            os.rename(file, file.replace('ABC', u'\\u2714'.encode('utf-8')))\n</code></pre>\n\n<p>This MWE gives the following error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>os.rename(file, file.replace('ABC', u'\\u2714'.encode('utf-8')))\nWindowsError: [Error 2] The system cannot find the file specified\n</code></pre>\n\n<p>How to correctly rename all the files and folders that has ABC with a unioode character in Python 2.7?</p>\n"}, {"tags": ["python", "image-processing", "hough-transform", "houghlines"], "comments": [{"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1547680894, "post_id": 54226611, "comment_id": 95279792, "body": "Python code will always be significantly slower than native code. One option is <a href=\"http://numba.pydata.org\" rel=\"nofollow noreferrer\">Numba</a>. Also, you should index as <code>countMatrix[closestRhoIndex, thetaIndex]</code>."}, {"owner": {"reputation": 127, "user_id": 6929394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DP6QM9hvwrE/AAAAAAAAAAI/AAAAAAAACV4/PwuEahLXsrw/photo.jpg?sz=128", "display_name": "Cristian Desivo", "link": "https://stackoverflow.com/users/6929394/cristian-desivo"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1547681289, "post_id": 54226611, "comment_id": 95279894, "body": "@CrisLuengo but that much slower really? I will try numba, and why the index thing? Is it faster that way or just nicer?"}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1547683038, "post_id": 54226611, "comment_id": 95280305, "body": "I think the indexing should be faster, but probably not significantly. <code>countMatrix[closestRhoIndex][thetaIndex]</code> first does <code>countMatrix[closestRhoIndex]</code>, creating a new, intermediate matrix, then indexes into that. Python being 100 times slower is totally expected, yes. This is the difference between an interpreted language and a compiled language."}, {"owner": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1547683313, "post_id": 54226611, "comment_id": 95280375, "body": "A very recent related question: <a href=\"https://stackoverflow.com/q/54224976/7328782\">stackoverflow.com/q/54224976/7328782</a>"}, {"owner": {"reputation": 127, "user_id": 6929394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DP6QM9hvwrE/AAAAAAAAAAI/AAAAAAAACV4/PwuEahLXsrw/photo.jpg?sz=128", "display_name": "Cristian Desivo", "link": "https://stackoverflow.com/users/6929394/cristian-desivo"}, "reply_to_user": {"reputation": 42647, "user_id": 7328782, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/treJu.png?s=128&g=1", "display_name": "Cris Luengo", "link": "https://stackoverflow.com/users/7328782/cris-luengo"}, "edited": false, "score": 0, "creation_date": 1547686013, "post_id": 54226611, "comment_id": 95280910, "body": "Thank you, now I feel less dumb. I&#39;m having trouble with numba but I&#39;ll figure it out."}], "answers": [{"tags": [], "owner": {"reputation": 127, "user_id": 6929394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DP6QM9hvwrE/AAAAAAAAAAI/AAAAAAAACV4/PwuEahLXsrw/photo.jpg?sz=128", "display_name": "Cristian Desivo", "link": "https://stackoverflow.com/users/6929394/cristian-desivo"}, "is_accepted": true, "score": 0, "last_activity_date": 1547688416, "creation_date": 1547688416, "answer_id": 54227743, "question_id": 54226611, "link": "https://stackoverflow.com/questions/54226611/python-hough-lines-implementation-making-it-time-efficient/54227743#54227743", "title": "Python Hough Lines implementation, making it time efficient", "body": "<p>The answer was to use numba. This is what the code looks like now:</p>\n\n<pre><code>import numpy as np\nfrom numba import jit\n@jit(nopython=True)\ndef houghLines(edges, dTheta, threshold):\n    imageShape = edges.shape\n    imageDiameter = (imageShape[0]**2 + imageShape[1]**2)**0.5\n    rhoRange = [i for i in range(int(imageDiameter)+1)]\n    thetaRange = [dTheta*i for i in range(int(-np.pi/(2*dTheta)), int(np.pi/dTheta))]\n    cosTheta = []\n    sinTheta = []\n    for theta in thetaRange:\n        cosTheta.append(np.cos(theta))\n        sinTheta.append(np.sin(theta))\n    countMatrixSize = (len(rhoRange), len(thetaRange))\n    countMatrix = np.zeros(countMatrixSize)\n\n    eds = []\n    for (x,y), value in np.ndenumerate(edges):\n        if value &gt; 0:\n            eds.append((x,y))\n\n    for thetaIndex in range(len(thetaRange)):\n        theta = thetaRange[thetaIndex]\n        cos = cosTheta[thetaIndex]\n        sin = sinTheta[thetaIndex]\n        for x, y in eds:\n            targetRho = x*cos + y*sin\n            closestRhoIndex = int(round(targetRho))\n            countMatrix[closestRhoIndex, thetaIndex] += 1\n    lines = []\n    for (p,t), value in np.ndenumerate(countMatrix):\n        if value &gt; threshold:\n            lines.append((p,thetaRange[t]))\n    return lines\n</code></pre>\n\n<p>This made it at least 50 times faster.</p>\n"}], "owner": {"reputation": 127, "user_id": 6929394, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-DP6QM9hvwrE/AAAAAAAAAAI/AAAAAAAACV4/PwuEahLXsrw/photo.jpg?sz=128", "display_name": "Cristian Desivo", "link": "https://stackoverflow.com/users/6929394/cristian-desivo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 441, "favorite_count": 0, "accepted_answer_id": 54227743, "answer_count": 1, "score": 0, "last_activity_date": 1547688416, "creation_date": 1547679270, "last_edit_date": 1547682582, "question_id": 54226611, "link": "https://stackoverflow.com/questions/54226611/python-hough-lines-implementation-making-it-time-efficient", "title": "Python Hough Lines implementation, making it time efficient", "body": "<p>So I'm trying to implement the hough transform lines algorithm in python, and I'm finding it hard to make it time efficient.</p>\n\n<p>This is my implementation:</p>\n\n<pre><code>import numpy as np\ndef houghLines(edges, dTheta, threshold):\n    imageShape = edges.shape\n    imageDiameter = (imageShape[0]**2 + imageShape[1]**2)**0.5\n    rhoRange = [i for i in range(int(imageDiameter)+1)]\n    thetaRange = [dTheta*i for i in range(int(-np.pi/(2*dTheta)), int(np.pi/dTheta))]\n    cosTheta = [np.cos(theta) for theta in thetaRange]\n    sinTheta = [np.sin(theta) for theta in thetaRange]\n    countMatrix = np.zeros([len(rhoRange), len(thetaRange)])\n    eds = [(x,y) for (x,y), value in np.ndenumerate(edges) if value &gt; 0]\n    for thetaIndex in range(len(thetaRange)):\n        theta = thetaRange[thetaIndex]\n        cos = cosTheta[thetaIndex]\n        sin = sinTheta[thetaIndex]\n        for x, y in eds:\n            targetRho = x*cos + y*sin\n            closestRhoIndex = int(round(targetRho))\n            countMatrix[closestRhoIndex, thetaIndex] += 1\n    lines = [(p,thetaRange[t]) for (p,t), value in np.ndenumerate(countMatrix) if value &gt; threshold]\n    return lines\n</code></pre>\n\n<p>It works but it is very slow, 100 times slower than the opencv implementation.</p>\n\n<p>How can I improve it?</p>\n"}, {"tags": ["python", "git"], "comments": [{"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 0, "creation_date": 1547679920, "post_id": 54226605, "comment_id": 95279466, "body": "you need a <a href=\"https://docs.python.org/3.7/distutils/setupscript.html\" rel=\"nofollow noreferrer\">setup.py</a> file"}, {"owner": {"reputation": 620, "user_id": 2021144, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fea1bfc894af2b78c51e0d2a604b178a?s=128&d=identicon&r=PG", "display_name": "Mahdi", "link": "https://stackoverflow.com/users/2021144/mahdi"}, "reply_to_user": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 0, "creation_date": 1547703033, "post_id": 54226605, "comment_id": 95284209, "body": "Can you give me an answer or more detailed explanations? I want to import them from a git repo.."}, {"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 0, "creation_date": 1547729721, "post_id": 54226605, "comment_id": 95297356, "body": "the link i provided shows you how to create the file that you need in order to distribute your product on github so others can easily install it in their environment"}, {"owner": {"reputation": 1660, "user_id": 3043331, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/AEYqB.png?s=128&g=1", "display_name": "Ali Hallaji", "link": "https://stackoverflow.com/users/3043331/ali-hallaji"}, "edited": false, "score": 1, "creation_date": 1547740157, "post_id": 54226605, "comment_id": 95303726, "body": "It was answered in <a href=\"https://stackoverflow.com/questions/31446542/importing-python-libraries-from-github\">31446542</a>"}], "answers": [{"tags": [], "owner": {"reputation": 199, "user_id": 7903865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e554a117a18166072b1b67b40f337469?s=128&d=identicon&r=PG", "display_name": "DeeBee", "link": "https://stackoverflow.com/users/7903865/deebee"}, "is_accepted": false, "score": -1, "last_activity_date": 1547741588, "last_edit_date": 1547741588, "creation_date": 1547713097, "answer_id": 54231607, "question_id": 54226605, "link": "https://stackoverflow.com/questions/54226605/reading-python-packages-from-an-external-git-repository/54231607#54231607", "title": "Reading python packages from an external git repository", "body": "<p>I believe @aws_apprentice's comment was suggesting that you could build module1 as a proper python package by writing a <a href=\"https://docs.python.org/3/distutils/setupscript.html\" rel=\"nofollow noreferrer\">setup.py</a> for it, then install that as a dependency of Mypkg.  But during early development you can just put one git repo in another and .gitignore it.</p>\n\n<pre><code>cd mypkg\ngit clone &lt;https or ssh git thing&gt;/module1\necho 'module1' &gt;&gt; .gitignore\ngit commit -am 'add module1 to gitignore'\n</code></pre>\n\n<p>then to update module1 from changes the other person pushed to git,</p>\n\n<pre><code>cd mypkg/module1\ngit pull\n</code></pre>\n"}], "owner": {"reputation": 620, "user_id": 2021144, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fea1bfc894af2b78c51e0d2a604b178a?s=128&d=identicon&r=PG", "display_name": "Mahdi", "link": "https://stackoverflow.com/users/2021144/mahdi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547741588, "creation_date": 1547679243, "question_id": 54226605, "link": "https://stackoverflow.com/questions/54226605/reading-python-packages-from-an-external-git-repository", "title": "Reading python packages from an external git repository", "body": "<p>I have a project in Pythonlike with a structure like belwo:</p>\n\n<pre><code>Mypkg\n|___init__.py\n|__module1\n|  |__init__.py\n|  |__module1.py\n|__main.py\n</code></pre>\n\n<p>Actualy, I would like to dispatch the development of module1 to a seprate person and he can work it on Git repo, Can I use the module1 each time from a git repo, Shoud I write a requirements.txt in my project?</p>\n"}, {"tags": ["python", "tkinter", "lambda", "right-click"], "answers": [{"tags": [], "owner": {"reputation": 1322, "user_id": 3225832, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/645598558/picture?type=large", "display_name": "Reid Ballard", "link": "https://stackoverflow.com/users/3225832/reid-ballard"}, "is_accepted": true, "score": 1, "last_activity_date": 1547818452, "last_edit_date": 1547818452, "creation_date": 1547817479, "answer_id": 54254848, "question_id": 54226579, "link": "https://stackoverflow.com/questions/54226579/assignment-problems-in-tkinter-right-click-with-lambda-function/54254848#54254848", "title": "Assignment problems in Tkinter Right Click with lambda function", "body": "<p>Scoping issue: when the <code>lambda</code> fires it checks the scope for the <code>cmd</code> variable. During each iteration of <code>for cmd in commands:</code>, the <code>cmd</code> variable is set to a new value. At the end of the iteration, the <code>cmd</code> variable in the still equals the final iteration of <code>for cmd in commands:</code> (i.e.- <code>{'label': 'retrieve', 'reqId': 2}</code>).</p>\n\n<p>The solution is to specify a \"new\" variable in the signature of the <code>lambda</code>, which it will then use because of how scoping works in python (quotes on \"new\" because it can be a variable with the same name). Specifically, you could change your code to something like:</p>\n\n<pre><code>for cmd in commands:\n    self.rightMouse[treeName].add_command(label= cmd['label'],\n                                          command= lambda reqid = cmd['reqId']: self.execCommand(reqid))\n</code></pre>\n\n<p>Below is a script to demonstrate what I'm talking about here by example:</p>\n\n<pre><code>lambdas = []\nwords = [\"Hello\",\"World\"]\nprint(\"Creating Lambds\")\nfor word in words:\n    my_lambda = lambda: word\n    print('&gt;&gt;&gt; Result for \"{}\" lambda: \"{}\"'.format(word,my_lambda()))\n    lambdas.append(my_lambda)\n\nprint(\"Post Loop Lambda Results\")\nfor w,_lambda in zip(words,lambdas):\n    print('&gt;&gt;&gt; Result for \"{}\" lambda: \"{}\"'.format(w,_lambda()))\n\nword = \"Foobar\"\nprint('Setting word variable to \"{}\"'.format(word))\nprint(\"New Results for lambdas:\")\nfor w,_lambda in zip(words,lambdas):\n    print('&gt;&gt;&gt; Result for \"{}\" lambda: \"{}\"'.format(w,_lambda()))\n\nprint(\"----------------\\nSolution:\\n\")\nlambdas = []\nwords = [\"Hello\",\"World\"]\nprint(\"Creating Lambds\")\nfor word in words:\n    my_lambda = lambda myword = word: myword\n    print('&gt;&gt;&gt; Result for \"{}\" lambda: \"{}\"'.format(word,my_lambda()))\n    lambdas.append(my_lambda)\n\nprint(\"Post Loop Lambda Results\")\nfor w,_lambda in zip(words,lambdas):\n    print('&gt;&gt;&gt; Result for \"{}\" lambda: \"{}\"'.format(w,_lambda()))\n\nword = \"Foobar\"\nprint('Setting word variable to \"{}\"'.format(word))\nprint(\"New Results for lambdas:\")\nfor w,_lambda in zip(words,lambdas):\n    print('&gt;&gt;&gt; Result for \"{}\" lambda: \"{}\"'.format(w,_lambda()))\n</code></pre>\n\n<p>Heres some links:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/292502/3225832\">Description of Python scoping on SO</a></li>\n<li><a href=\"https://docs.python.org/3.7/reference/executionmodel.html#resolution-of-names\" rel=\"nofollow noreferrer\">Python Docs for name resolution</a></li>\n<li><a href=\"https://docs.python.org/3.7/tutorial/classes.html\" rel=\"nofollow noreferrer\">A description of scopes in the Class Definition\nDocs</a></li>\n</ul>\n"}], "owner": {"reputation": 229, "user_id": 4798335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e08c46f86f065862e1ece9b8f8f0b040?s=128&d=identicon&r=PG&f=1", "display_name": "VengaVenga", "link": "https://stackoverflow.com/users/4798335/vengavenga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 54254848, "answer_count": 1, "score": -1, "last_activity_date": 1547818452, "creation_date": 1547679090, "question_id": 54226579, "link": "https://stackoverflow.com/questions/54226579/assignment-problems-in-tkinter-right-click-with-lambda-function", "title": "Assignment problems in Tkinter Right Click with lambda function", "body": "<p>I have a pretty complex Tkinter GUI so it's worth while to avoid repeating work assigning controls by using lambda functions. Here the code extract:</p>\n\n<pre><code>    def createRightMenu(self, treeName, commands: []):\n       for cmd in commands:\n          self.rightMouse[treeName].add_command(label= cmd['label'], command= lambda: self.execCommand(cmd['reqId']))\n       self.tree[treeName].bind(\"&lt;Button-3&gt;\", lambda event: \n       self.rightMouse_click(event.x_root, event.y_root, treeName))\n\n    def execCommand(self, reqId):\n       print(\"execCommand\", reqId)\n\n    self.tree = {}\n    treeName = 'a'\n    self.createTree(root, treeName)\n    self.createRightMenu(treeName , [\n        {'label': 'copy', 'reqId': 1},\n        {'label': 'retrieve', 'reqId': 2},\n        ])\n</code></pre>\n\n<p>What does work?\nIn my right click menu I get the entries 'copy' and 'retrieve' and execCommand is called.</p>\n\n<p>What does NOT work?\nexecCommand gets ALWAYS the last list element, i.e. 'retrieve', 2 as parameter even if I right click on 'copy'. If I manually add the two .add_command's all is fine. Only using a for loop doesn't work. Any idea why?</p>\n"}, {"tags": ["python", "colors", "range"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 5541475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e95d1aa1b66e54dc2cf1ec7d6ed76aa?s=128&d=identicon&r=PG&f=1", "display_name": "ehsan ", "link": "https://stackoverflow.com/users/5541475/ehsan"}, "edited": false, "score": 0, "creation_date": 1547680082, "post_id": 54226650, "comment_id": 95279520, "body": "that way I get &quot;list index out of range&quot; cuz for last loop in &quot;paletteList[0][x+1]&quot; I ask for 5 index with doesn&#39;t exist ."}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "reply_to_user": {"reputation": 5, "user_id": 5541475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e95d1aa1b66e54dc2cf1ec7d6ed76aa?s=128&d=identicon&r=PG&f=1", "display_name": "ehsan ", "link": "https://stackoverflow.com/users/5541475/ehsan"}, "edited": false, "score": 0, "creation_date": 1547680167, "post_id": 54226650, "comment_id": 95279545, "body": "but then how do you expect 40? can you show me the math?"}, {"owner": {"reputation": 5, "user_id": 5541475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e95d1aa1b66e54dc2cf1ec7d6ed76aa?s=128&d=identicon&r=PG&f=1", "display_name": "ehsan ", "link": "https://stackoverflow.com/users/5541475/ehsan"}, "edited": false, "score": 0, "creation_date": 1547680287, "post_id": 54226650, "comment_id": 95279591, "body": "what way do you suggest to create 40 colors between 5 colors without repetition?"}, {"owner": {"reputation": 5, "user_id": 5541475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e95d1aa1b66e54dc2cf1ec7d6ed76aa?s=128&d=identicon&r=PG&f=1", "display_name": "ehsan ", "link": "https://stackoverflow.com/users/5541475/ehsan"}, "edited": false, "score": 0, "creation_date": 1547681599, "post_id": 54226650, "comment_id": 95279962, "body": "it gives me 42. but still way better than my code. do you know why it gives two  extra colors?"}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "reply_to_user": {"reputation": 5, "user_id": 5541475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e95d1aa1b66e54dc2cf1ec7d6ed76aa?s=128&d=identicon&r=PG&f=1", "display_name": "ehsan ", "link": "https://stackoverflow.com/users/5541475/ehsan"}, "edited": false, "score": 0, "creation_date": 1547681945, "post_id": 54226650, "comment_id": 95280056, "body": "did you remove the duplicates? how do you import Color"}], "tags": [], "owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "is_accepted": true, "score": 0, "last_activity_date": 1547680556, "last_edit_date": 1547680556, "creation_date": 1547679496, "answer_id": 54226650, "question_id": 54226562, "link": "https://stackoverflow.com/questions/54226562/list-of-colors-between-mulitiple-colors-in-python/54226650#54226650", "title": "list of colors between mulitiple colors in python", "body": "<p>The problem is that you are using <code>sizeOfBucket+1</code> which is 8+1 = 9 and you are running your <code>range()</code> from 0 to 5-1 which means range(0, 4) which will run 4 times so you have 9*4 = 36 points.</p>\n\n<p>Instead what you should do is the following to get 40 colors: Run the <code>range</code> as <code>range(0, len(paletteList[0]))</code> which means <code>range(0, 5)</code> (0, 1, 2, 3, 4 so in total 5 times) and the <code>range_to</code> should use <code>sizeOfBucket</code> which is 8. So now you will have 8*5=40 colors.</p>\n\n<pre><code>numberOfLevels = 40\nsizeOfBucket = int(numberOfLevels / 4)\n\nfor x in range(0, len(paletteList[0])-1 ):\n    templist = list(paletteList[0][x].range_to(paletteList[0][x+1],sizeOfBucket))\n    for m in templist:\n        res.append(m)\n</code></pre>\n\n<p><strong>Edit 2</strong></p>\n\n<pre><code>numberOfLevels = 40\nsizeOfBucket = int(numberOfLevels / 4)\n\nfor x in range(0, len(paletteList[0])-1):\n    if 0&lt;x&lt;len(paletteList[0])-2:\n        templist = list(paletteList[0][x].range_to(paletteList[0][x+1],sizeOfBucket+1))\n    else:\n        templist = list(paletteList[0][x].range_to(paletteList[0][x+1],sizeOfBucket))\n    for m in templist:\n        res.append(m)\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 5541475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e95d1aa1b66e54dc2cf1ec7d6ed76aa?s=128&d=identicon&r=PG&f=1", "display_name": "ehsan ", "link": "https://stackoverflow.com/users/5541475/ehsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 54226650, "answer_count": 1, "score": 0, "last_activity_date": 1547680556, "creation_date": 1547678995, "last_edit_date": 1547680135, "question_id": 54226562, "link": "https://stackoverflow.com/questions/54226562/list-of-colors-between-mulitiple-colors-in-python", "title": "list of colors between mulitiple colors in python", "body": "<p>For my project, I need to show the value of a variable from min to max using a user-defined number of colors. this user-defined variable(numberOfLevels) is a multiplication of 5 (5,10,15,20,25,...). though, it is not that easy because the final color palette is a range of colors between multiple colors. So I have a palette of 5 initial colors and I want to convert it to a palette with 40 colors, where colors are equally divided across 5 initial colors. </p>\n\n<p>here's an example of the initial color palette</p>\n\n<pre><code>paletteList = [\n[Color(\"#ff0000\"),\nColor(\"#ff8000\"),\nColor(\"#ffff00\"),\nColor(\"#00ffff\"),\nColor(\"#0000ff\")],\n]\n</code></pre>\n\n<p>and here's the formula I have crafted to make the final color palette</p>\n\n<pre><code>numberOfLevels = 40\nsizeOfBucket = int(numberOfLevels / 5)\n\nfor x in range(0, len(paletteList[0])-1 ):\n    templist = list(paletteList[0][x].range_to(paletteList[0][x+1],sizeOfBucket+1))\n    for m in templist:\n    res.append(m)\n</code></pre>\n\n<p>to remove repeated colors</p>\n\n<pre><code>for m in res:\n    if m not in templist:\n           templist.append(m)\n</code></pre>\n\n<p>the problem with this code is that it shows 36 colors while I asked of 40</p>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 21, "user_id": 10924955, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OwMaSstLkw4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZjePiMCIymk-HLl9Pjrz6Ecx5GLA/mo/photo.jpg?sz=128", "display_name": "Jarod Jacobs", "link": "https://stackoverflow.com/users/10924955/jarod-jacobs"}, "edited": false, "score": 0, "creation_date": 1547679049, "post_id": 54226552, "comment_id": 95279165, "body": "I forgot to mention that the page I&#39;m trying to interact with has an exit intent pop-up that appears if the mouse moves off the screen, but when Selenium opens the FireFox window I do not see that pop-up so am assuming (maybe incorrectly) that that is not impacting anything."}, {"owner": {"reputation": 21, "user_id": 10924955, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OwMaSstLkw4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZjePiMCIymk-HLl9Pjrz6Ecx5GLA/mo/photo.jpg?sz=128", "display_name": "Jarod Jacobs", "link": "https://stackoverflow.com/users/10924955/jarod-jacobs"}, "edited": false, "score": 0, "creation_date": 1547679176, "post_id": 54226552, "comment_id": 95279200, "body": "Also, I&#39;ve tried finding the element by Xpath, partial Xpath, id, and class, with the same result."}, {"owner": {"reputation": 762, "user_id": 9559884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/joDJA.png?s=128&g=1", "display_name": "StyleZ", "link": "https://stackoverflow.com/users/9559884/stylez"}, "edited": false, "score": 1, "creation_date": 1547680184, "post_id": 54226552, "comment_id": 95279556, "body": "The reason why, is that you are sending 2 keys at once ... sendkeys() can take just one parameter ... so try instead ( &#39;test&#39; + Keys.Enter ) and if it doesnt help, try to send Only the &#39;test&#39; and then send to the same an enter key"}, {"owner": {"reputation": 21, "user_id": 10924955, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OwMaSstLkw4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZjePiMCIymk-HLl9Pjrz6Ecx5GLA/mo/photo.jpg?sz=128", "display_name": "Jarod Jacobs", "link": "https://stackoverflow.com/users/10924955/jarod-jacobs"}, "reply_to_user": {"reputation": 762, "user_id": 9559884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/joDJA.png?s=128&g=1", "display_name": "StyleZ", "link": "https://stackoverflow.com/users/9559884/stylez"}, "edited": false, "score": 0, "creation_date": 1547680513, "post_id": 54226552, "comment_id": 95279670, "body": "StyleZ, Thank you for you suggestion! I deleted the second parameter - Keys.Enter - but got the same error. I believe send_keys() can take two parameters as it works with both when I use it for the search box at the top of the page. Either way, deleting the second parameter didn&#39;t do the trick. Thanks though!"}], "answers": [{"tags": [], "owner": {"reputation": 1885, "user_id": 5319738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f84315d92eb583e0744ab6990ca65b?s=128&d=identicon&r=PG&f=1", "display_name": "Kamal", "link": "https://stackoverflow.com/users/5319738/kamal"}, "is_accepted": true, "score": 0, "last_activity_date": 1547688680, "creation_date": 1547688680, "answer_id": 54227767, "question_id": 54226552, "link": "https://stackoverflow.com/questions/54226552/python-selenium-elementnotinteractableexception-message-element-is-not-reachabl/54227767#54227767", "title": "Python Selenium ElementNotInteractableException Message: Element is not reachable by keyboard", "body": "<p>If you look at the html of the webpage, there are two elements with name field value of \"FirstName\". (You can search for the string '//*[@name=\"FirstName\"]' in developer options to check.)</p>\n\n<p>So you can use something like this to get the element which you are looking for:</p>\n\n<pre><code>driver.find_elements_by_name('FirstName')[1].send_keys('test', Keys.ENTER)\n</code></pre>\n\n<p>Here, the <code>find_elements..</code> method returns list of all the elements which have same locator instead of the first from top like <code>find_element..</code> method, and the element which you are searching for comes second from top so we index the result of <code>find_elements..</code> with index '1'.</p>\n\n<p>BTW, I tried this in Chrome, but it should work on Firefox as well.</p>\n"}], "owner": {"reputation": 21, "user_id": 10924955, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OwMaSstLkw4/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZjePiMCIymk-HLl9Pjrz6Ecx5GLA/mo/photo.jpg?sz=128", "display_name": "Jarod Jacobs", "link": "https://stackoverflow.com/users/10924955/jarod-jacobs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4787, "favorite_count": 0, "closed_date": 1547690021, "accepted_answer_id": 54227767, "answer_count": 1, "score": 0, "last_activity_date": 1547688680, "creation_date": 1547678928, "question_id": 54226552, "link": "https://stackoverflow.com/questions/54226552/python-selenium-elementnotinteractableexception-message-element-is-not-reachabl", "closed_reason": "Duplicate", "title": "Python Selenium ElementNotInteractableException Message: Element is not reachable by keyboard", "body": "<p>I'm new to Python and Selenium and am struggling with testing a form for my company website.</p>\n\n<p>I'm trying to enter text into a field. Here is the html:</p>\n\n<pre><code>&lt;input class=\"form-control\" data-val=\"true\" data-val-length=\"Must be between 2 and 35 characters\" data-val-length-max=\"35\" data-val-length-min=\"2\" data-val-requiredif=\"*First Name is required\" data-val-requiredif-dependentproperty=\"IsMobile\" data-val-requiredif-desiredvalue=\"False\" id=\"FirstName-guide-request-ed9e64ebe3b245a28c9caaabbcd47b95\" maxlength=\"35\" name=\"FirstName\" type=\"text\" value=\"\"&gt;\n</code></pre>\n\n<p>Here is the code I use to try to enter the text:</p>\n\n<pre><code>driver = webdriver.Firefox(executable_path = r'C:\\Users\\jajacobs\\Downloads\\geckodriver.exe')\n\ndriver.get(\"https://www.graphicproducts.com/guides/5s-system/\")\ndriver.execute_script(\"window.scrollTo(0, 1000);\")\n\ndriver.find_element_by_name('FirstName').send_keys('test', Keys.ENTER)\n\ndriver.close()\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>---------------------------------------------------------------------------\nElementNotInteractableException           Traceback (most recent call last)\n&lt;ipython-input-58-6b71ac82d9ce&gt; in &lt;module&gt;\n     10 \n     11 timeout = 20\n---&gt; 12 driver.find_element_by_name('FirstName').send_keys('test', Keys.ENTER)\n     13 \n     14 driver.close()\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\selenium\\webdriver\\remote\\webelement.py in send_keys(self, *value)\n    477         self._execute(Command.SEND_KEYS_TO_ELEMENT,\n    478                       {'text': \"\".join(keys_to_typing(value)),\n--&gt; 479                        'value': keys_to_typing(value)})\n    480 \n    481     # RenderedWebElement Items\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\selenium\\webdriver\\remote\\webelement.py in _execute(self, command, params)\n    631             params = {}\n    632         params['id'] = self._id\n--&gt; 633         return self._parent.execute(command, params)\n    634 \n    635     def find_element(self, by=By.ID, value=None):\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\selenium\\webdriver\\remote\\webdriver.py in execute(self, driver_command, params)\n    319         response = self.command_executor.execute(driver_command, params)\n    320         if response:\n--&gt; 321             self.error_handler.check_response(response)\n    322             response['value'] = self._unwrap_value(\n    323                 response.get('value', None))\n\n~\\AppData\\Local\\Continuum\\anaconda3\\lib\\site-packages\\selenium\\webdriver\\remote\\errorhandler.py in check_response(self, response)\n    240                 alert_text = value['alert'].get('text')\n    241             raise exception_class(message, screen, stacktrace, alert_text)\n--&gt; 242         raise exception_class(message, screen, stacktrace)\n    243 \n    244     def _value_or_default(self, obj, key, default):\n\nElementNotInteractableException: Message: Element &lt;input id=\"FirstName-guide-request-d277b94a662f45e686bf443012505716\" class=\"form-control\" name=\"FirstName\" type=\"text\"&gt; is not reachable by keyboard\n</code></pre>\n\n<p>There is a search box at the top of the page that I can enter text into just fine with the same code, but modified with a different Name. Here is the html:</p>\n\n<pre><code>&lt;input id=\"GlobalSearchMobile\" name=\"q\" class=\"srch-term form-control\" type=\"text\" autocomplete=\"off\" placeholder=\"Search by Keyword or SKU\"&gt;\n</code></pre>\n\n<p>And here is the code I use to enter text into that search box:</p>\n\n<pre><code>driver = webdriver.Firefox(executable_path = r'C:\\Users\\jajacobs\\Downloads\\geckodriver.exe')\n\ndriver.get(\"https://www.graphicproducts.com/guides/5s-system/\")\ndriver.execute_script(\"window.scrollTo(0, 1000);\")\n\ndriver.find_element_by_name('q').send_keys('test', Keys.ENTER)\n\ndriver.close()\n</code></pre>\n\n<p>So, basically I cannot figure out why the second set of code works for the search box at the top of the page, while the first set of code does not work for the form in the middle of the page.</p>\n\n<p>I'm happy to supply more html if that is help.</p>\n\n<p>I'm using Python 3.7 in a Jupyter Notebook launch with Anaconda on a Windows 10 machine.</p>\n\n<p>Thank you in advance!</p>\n"}, {"tags": ["python", "keras", "librosa"], "answers": [{"tags": [], "owner": {"reputation": 1517, "user_id": 9277245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c0a3df687d7bef3e03872a9af9908cd?s=128&d=identicon&r=PG&f=1", "display_name": "Ankish Bansal", "link": "https://stackoverflow.com/users/9277245/ankish-bansal"}, "is_accepted": false, "score": 0, "last_activity_date": 1547695350, "creation_date": 1547695350, "answer_id": 54228551, "question_id": 54226539, "link": "https://stackoverflow.com/questions/54226539/error-in-running-python-neural-network-for-music-recognition-with-keras-and-libr/54228551#54228551", "title": "Error in Running Python Neural Network for Music Recognition with Keras and Librosa", "body": "<p>You have done a mistake while splitting data at this point:</p>\n\n<pre><code>train_input = test[:,:-10] &lt;&lt;======\ntrain_labels = train[:,-10] &lt;&lt;=====\n\ntest_input = test[:,:-10]\ntest_labels = test[:,-10]\n</code></pre>\n\n<p>Try this:</p>\n\n<pre><code>train_input = train[:,:-10] &lt;&lt;======\ntrain_labels = train[:,-10:] &lt;&lt;=====\n\ntest_input = test[:,:-10]\ntest_labels = test[:,-10:]\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 7966026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f08ee5ad435df6d3044fd64e464b87f?s=128&d=identicon&r=PG&f=1", "display_name": "Suren Grigorian", "link": "https://stackoverflow.com/users/7966026/suren-grigorian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1547695350, "creation_date": 1547678819, "question_id": 54226539, "link": "https://stackoverflow.com/questions/54226539/error-in-running-python-neural-network-for-music-recognition-with-keras-and-libr", "title": "Error in Running Python Neural Network for Music Recognition with Keras and Librosa", "body": "<p>Recently, I have attempted to complete an experiment where a neural network algorithm identifies the composer of a piece of classical music. I am. however, basing this experiment on a previous project, whereby a neural network is created using the Keras system and analyses the respective pieces of music. My source is this article:</p>\n\n<p><a href=\"https://medium.com/@navdeepsingh_2336/identifying-the-genre-of-a-song-with-neural-networks-851db89c42f0\" rel=\"nofollow noreferrer\">https://medium.com/@navdeepsingh_2336/identifying-the-genre-of-a-song-with-neural-networks-851db89c42f0</a></p>\n\n<p>After conducting various tests where the program performed as expected, I have recently encountered another error. When I attempted to run the program provided in the article:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom keras.models import Sequential\nfrom keras.layers import Dense, Activation\nfrom keras.utils.np_utils import to_categorical\n\ndef display_mfcc(song):\n    y, _ = librosa.load(song)\n    mfcc = librosa.feature.mfcc(y)\n\n    plt.figure(figsize=(10, 4))\n    librosa.display.specshow(mfcc, x_axis='time', y_axis='mel')\n    plt.colorbar()\n    plt.title(song)\n    plt.tight_layout()\n    plt.show()\n\n\ndef extract_features_song(f):\n    y, _ = librosa.load(f)\n\n    mfcc = librosa.feature.mfcc(y)\n    mfcc /= np.amax(np.absolute(mfcc))\n\n    return np.ndarray.flatten(mfcc)[:25000]\n\ndef generate_features_and_labels():\n    all_features = []\n    all_labels = []\n     genres = ['blues', 'classical', 'country', 'disco', 'hiphop', \n     'jazz', 'metal', 'pop', 'reggae', 'rock']\n\n    for genre in genres:\n        sound_files = glob.glob('genres/'+genre+'/*.au')\n    print('Processing %d songs in %s genre...' %   \n    (len(sound_files), genre))\n        for f in sound_files:\n            features = extract_features_song(f)\n            all_features.append(features)\n            all_labels.append(genre)\n\n    label_uniq_ids, label_row_ids = np.unique(all_labels, \n    return_inverse=True)\n    label_row_ids = label_row_ids.astype(np.int32, copy=False)\n    onehot_labels = to_categorical(label_row_ids,\n    len(label_uniq_ids)) \n    return np.stack(all_features), onehot_labels\n\n\n\nfeatures, labels = generate_features_and_labels()\n\nprint(np.shape(features))\nprint(np.shape(labels))\n\ntraining_split = 0.8\n\nalldata = np.column_stack((features, labels))\n\nnp.random.shuffle(alldata)\nsplitidx = int(len(alldata) * training_split)\ntrain, test = alldata[:splitidx,:], alldata[splitidx:,:]\n\nprint(np.shape(train))\nprint(np.shape(test))\n\ntrain_input = test[:,:-10]\ntrain_labels = train[:,-10]\n\ntest_input = test[:,:-10]\ntest_labels = test[:,-10]\n\nprint(np.shape(train_input))\nprint(np.shape(train_labels))\n\nmodel = Sequential([\n    Dense(100, input_dim=np.shape(train_input)[1]),\n    Activation('relu'),\n    Dense(10),\n    Activation('softmax'),\n    ])\n\n\nmodel.compile(optimizer='adam',\n              loss='categorical_crossentropy',\n              metrics=['accuracy'])\nprint(model.summary())\n\nmodel.fit(train_input, train_labels, epochs=10, batch_size=32,\n          validation_split=0.2)\n\nloss, acc = model.evaluate(test_input, test_labels, batch_size=32)\n\nprint('Done!')\nprint('Loss: %.4f, accuracy: %.4f' % (loss, acc))\n</code></pre>\n\n<p>Python, along with these expected results:</p>\n\n<pre><code>Processing 100 songs in blues genre...\nProcessing 100 songs in classical genre...\nProcessing 100 songs in country genre...\nProcessing 100 songs in disco genre...\nProcessing 100 songs in hiphop genre...\nProcessing 100 songs in jazz genre...\nProcessing 100 songs in metal genre...\nProcessing 100 songs in pop genre...\nProcessing 100 songs in reggae genre...\nProcessing 100 songs in rock genre...\n(1000, 25000)\n(1000, 10)\n(800, 25010)\n(200, 25010)\n(200, 25000)\n(800,)\n_________________________________________________________________\nLayer (type)                 Output Shape              Param #   \n=================================================================\ndense_1 (Dense)              (None, 100)               2500100   \n_________________________________________________________________\nactivation_1 (Activation)    (None, 100)               0         \n_________________________________________________________________\ndense_2 (Dense)              (None, 10)                1010      \n_________________________________________________________________\nactivation_2 (Activation)    (None, 10)                0         \n=================================================================\nTotal params: 2,501,110\nTrainable params: 2,501,110\nNon-trainable params: 0\n_________________________________________________________________\n</code></pre>\n\n<p>Gave an error message:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/Users/surengrigorian/Documents/Stage1.py\", line 88, in \n  &lt;module&gt;\n    validation_split=0.2)\n  File     \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/keras/engine/training.py\", line 952, in fit\n    batch_size=batch_size)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/keras/engine/training.py\", line 789, in _standardize_user_data\n    exception_prefix='target')\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/keras/engine/training_utils.py\", line 138, in standardize_input_data\n    str(data_shape))\nValueError: Error when checking target: expected activation_2 to have shape (10,) but got array with shape (1,)\n</code></pre>\n"}, {"tags": ["python", "numpy", "scipy", "curve-fitting"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10924934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bd5bdc3fa6082bf138f822a4a938176?s=128&d=identicon&r=PG&f=1", "display_name": "iclickbuttons", "link": "https://stackoverflow.com/users/10924934/iclickbuttons"}, "edited": false, "score": 1, "creation_date": 1547712894, "post_id": 54227252, "comment_id": 95287976, "body": "Thank you so much for you answer, but sadly x and y data are switched up! My bad for that unclear code input, sorry! If i change x and y, i happen to get the same error as with curve_fit.  However your explanation made it really clear for me how to get correct boundaries - thank you!"}], "tags": [], "owner": {"reputation": 3988, "user_id": 2436862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4P7Vh.jpg?s=128&g=1", "display_name": "James Phillips", "link": "https://stackoverflow.com/users/2436862/james-phillips"}, "is_accepted": false, "score": 1, "last_activity_date": 1547683771, "creation_date": 1547683771, "answer_id": 54227252, "question_id": 54226525, "link": "https://stackoverflow.com/questions/54226525/scipy-optimize-curvefit-gives-bad-results/54227252#54227252", "title": "scipy.optimize_curvefit gives bad results", "body": "<p>Here is a graphical fitter using your data and equation. This example code uses scipy's Differential Evolution genetic algorithm to determine initial parameter estimates for curve_fit(). This scipy module uses the  Latin Hypercube algorithm to ensure a thorough search of parameter space, which requires bounds within which to search. It is much easier to find ranges for the parameters than individual values, and here I experimented with different bounds until the fit visually looked OK to me. You should check the bounds I used and see if they appear reasonable.</p>\n\n<p><a href=\"https://i.stack.imgur.com/JTzPQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JTzPQ.png\" alt=\"plot\"></a></p>\n\n<pre><code>import numpy, scipy, matplotlib\nimport matplotlib.pyplot as plt\nfrom scipy.optimize import curve_fit\nfrom scipy.optimize import differential_evolution\nimport warnings\n\nxData = numpy.array([7128.67, 6814, 6490, 6135.67, 5951.67,\n        5753.67, 5350, 4929.33, 4499.33,4068.67, 3641.33,\n        3225.33, 2827.33, 2451, 2104.67, 1788, 1503, 1251.33,\n        1032.33, 434.199, 271.707, 134.532, 75.7034, 40.9144, 21.7112, 14.9206, 9.29772])\n\nyData = numpy.array([0.1, 0.1426, 0.2034, 0.29, 0.4135, 0.5897, 0.8409, 1.199,\n         1.71, 2.438, 3.477, 4.959, 7.071, 10.08, 14.38, 20.5,\n         29.24, 41.7, 59.46, 135.438, 279.707, 772.93,\n         1709.91, 3734.32, 8082.32, 12665.8, 22353.3])\n\ndef carreaulaw(x, eta_0, lam, n, a):\n    return eta_0 * (1.0+(lam*x)**a)**((n-1.0)/a)\n\n\n# function for genetic algorithm to minimize (sum of squared error)\ndef sumOfSquaredError(parameterTuple):\n    warnings.filterwarnings(\"ignore\") # do not print warnings by genetic algorithm\n    val = carreaulaw(xData, *parameterTuple)\n    return numpy.sum((yData - val) ** 2.0)\n\n\ndef generate_Initial_Parameters():\n\n    parameterBounds = []\n    parameterBounds.append([0.0, 50.0]) # search bounds for eta_0\n    parameterBounds.append([0.0, 1.0]) # search bounds for lam\n    parameterBounds.append([-1.0, 0.0]) # search bounds for n\n    parameterBounds.append([-200.0, 0.0]) # search bounds for a\n\n    # \"seed\" the numpy random number generator for repeatable results\n    result = differential_evolution(sumOfSquaredError, parameterBounds, seed=3)\n    return result.x\n\n# by default, differential_evolution completes by calling curve_fit() using parameter bounds\ngeneticParameters = generate_Initial_Parameters()\n\n# now call curve_fit without passing bounds from the genetic algorithm,\n# just in case the best fit parameters are aoutside those bounds\nfittedParameters, pcov = curve_fit(carreaulaw, xData, yData, geneticParameters)\nprint('Fitted parameters:', fittedParameters)\nprint()\n\nmodelPredictions = carreaulaw(xData, *fittedParameters) \n\nabsError = modelPredictions - yData\n\nSE = numpy.square(absError) # squared errors\nMSE = numpy.mean(SE) # mean squared errors\nRMSE = numpy.sqrt(MSE) # Root Mean Squared Error, RMSE\nRsquared = 1.0 - (numpy.var(absError) / numpy.var(yData))\n\nprint()\nprint('RMSE:', RMSE)\nprint('R-squared:', Rsquared)\n\nprint()\n\n\n##########################################################\n# graphics output section\ndef ModelAndScatterPlot(graphWidth, graphHeight):\n    f = plt.figure(figsize=(graphWidth/100.0, graphHeight/100.0), dpi=100)\n    axes = f.add_subplot(111)\n\n    # first the raw data as a scatter plot\n    axes.plot(xData, yData,  'D')\n\n    # create data for the fitted equation plot\n    xModel = numpy.linspace(min(xData), max(xData))\n    yModel = carreaulaw(xModel, *fittedParameters)\n\n    # now the model as a line plot\n    axes.plot(xModel, yModel)\n\n    axes.set_xlabel('X Data') # X axis data label\n    axes.set_ylabel('Y Data') # Y axis data label\n\n    plt.show()\n    plt.close('all') # clean up after using pyplot\n\ngraphWidth = 800\ngraphHeight = 600\nModelAndScatterPlot(graphWidth, graphHeight)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 10924934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bd5bdc3fa6082bf138f822a4a938176?s=128&d=identicon&r=PG&f=1", "display_name": "iclickbuttons", "link": "https://stackoverflow.com/users/10924934/iclickbuttons"}, "edited": false, "score": 0, "creation_date": 1547743724, "post_id": 54238872, "comment_id": 95305720, "body": "Thanks for your help! But even with the boundaries, the fit just becomes a horizontal line for me, which is really weird, since the starting parameters should be kind of close to good values."}, {"owner": {"reputation": 3541, "user_id": 5625497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f200aaa56fa9cba9baa9170c514fb125?s=128&d=identicon&r=PG&f=1", "display_name": "Mstaino", "link": "https://stackoverflow.com/users/5625497/mstaino"}, "reply_to_user": {"reputation": 11, "user_id": 10924934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bd5bdc3fa6082bf138f822a4a938176?s=128&d=identicon&r=PG&f=1", "display_name": "iclickbuttons", "link": "https://stackoverflow.com/users/10924934/iclickbuttons"}, "edited": false, "score": 0, "creation_date": 1547745660, "post_id": 54238872, "comment_id": 95306741, "body": "Strange, I get a reasonable match (see edit - I plotted using <code>diagram.loglog(...)</code> instead of <code>diagram.plot</code>)"}, {"owner": {"reputation": 11, "user_id": 10924934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bd5bdc3fa6082bf138f822a4a938176?s=128&d=identicon&r=PG&f=1", "display_name": "iclickbuttons", "link": "https://stackoverflow.com/users/10924934/iclickbuttons"}, "edited": false, "score": 0, "creation_date": 1547751182, "post_id": 54238872, "comment_id": 95309334, "body": "thank you and I&#39;m sorry, IDK why I made a mistake there, the correct formula for the Carruealaw is: <code>eta_0 &#47; (1 + (lam * x)**a)**((n-1)&#47;a)</code> with that i get a straight line, usually the fit should look like <a href=\"https://www.researchgate.net/figure/Carreau-Yasuda-fitting-of-the-viscosity-of-LDPE3-at-150C_fig6_264688194\" rel=\"nofollow noreferrer\">this</a>"}, {"owner": {"reputation": 3541, "user_id": 5625497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f200aaa56fa9cba9baa9170c514fb125?s=128&d=identicon&r=PG&f=1", "display_name": "Mstaino", "link": "https://stackoverflow.com/users/5625497/mstaino"}, "reply_to_user": {"reputation": 11, "user_id": 10924934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bd5bdc3fa6082bf138f822a4a938176?s=128&d=identicon&r=PG&f=1", "display_name": "iclickbuttons", "link": "https://stackoverflow.com/users/10924934/iclickbuttons"}, "edited": false, "score": 0, "creation_date": 1547756726, "post_id": 54238872, "comment_id": 95311977, "body": "NP, glad you fixed it! Please mark as solved when you are satisfied with the answer"}, {"owner": {"reputation": 11, "user_id": 10924934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bd5bdc3fa6082bf138f822a4a938176?s=128&d=identicon&r=PG&f=1", "display_name": "iclickbuttons", "link": "https://stackoverflow.com/users/10924934/iclickbuttons"}, "edited": false, "score": 0, "creation_date": 1547806246, "post_id": 54238872, "comment_id": 95327523, "body": "I sadly still didn&#39;t fix my issue, as the fit is a <a href=\"http://oi66.tinypic.com/1zodjew.jpg\" rel=\"nofollow noreferrer\">straight line</a> with the &quot;new&quot; form of the Carreaulaw, I really start feeling kind of stupid . Thanks a lot for taking time @Mstaino"}], "tags": [], "owner": {"reputation": 3541, "user_id": 5625497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f200aaa56fa9cba9baa9170c514fb125?s=128&d=identicon&r=PG&f=1", "display_name": "Mstaino", "link": "https://stackoverflow.com/users/5625497/mstaino"}, "is_accepted": false, "score": 0, "last_activity_date": 1547745643, "last_edit_date": 1547745643, "creation_date": 1547737964, "answer_id": 54238872, "question_id": 54226525, "link": "https://stackoverflow.com/questions/54226525/scipy-optimize-curvefit-gives-bad-results/54238872#54238872", "title": "scipy.optimize_curvefit gives bad results", "body": "<p>All you need to do is pass the bounds in <code>curve_fit</code>. When no bounds are defined, you can have non-real operations, like (in your case), a float exponentiation of a negative number.</p>\n\n<p>Bounds are simply defined as a lists of two lists/tuples with lower and upper bounds:</p>\n\n<pre><code>bounds = [(-np.inf, 0, 0, 0), [np.inf, np.inf, 1, 1]]   #upper np.inf or lower -np.inf means no bound\npopt, pcov = curve_fit(carreaulaw, gamma, eta, p0=[8000, 3000, 0.8, 0.1], bounds=bounds)\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZIMUa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZIMUa.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 11, "user_id": 10924934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bd5bdc3fa6082bf138f822a4a938176?s=128&d=identicon&r=PG&f=1", "display_name": "iclickbuttons", "link": "https://stackoverflow.com/users/10924934/iclickbuttons"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1547750953, "creation_date": 1547678734, "last_edit_date": 1547750953, "question_id": 54226525, "link": "https://stackoverflow.com/questions/54226525/scipy-optimize-curvefit-gives-bad-results", "title": "scipy.optimize_curvefit gives bad results", "body": "<p>I'm trying to fit a material model (Carreau-Law). Generally the data looks very good, but it's impossible (for me at least) to get the right model-data and parameters with <code>curve_fit</code>. I tried setting reasonable starting values etc. </p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\n## Y-DATA\neta = np.array([7128.67, 6814, 6490, 6135.67, 5951.67,\n        5753.67, 5350, 4929.33, 4499.33,4068.67, 3641.33,\n        3225.33, 2827.33, 2451, 2104.67, 1788, 1503, 1251.33,\n        1032.33, 434.199, 271.707, 134.532, 75.7034, 40.9144, 21.7112, 14.9206, 9.29772])\n\n\n##X-DATA\ngamma = np.array([0.1, 0.1426, 0.2034, 0.29, 0.4135, 0.5897, 0.8409, 1.199,\n         1.71, 2.438, 3.477, 4.959, 7.071, 10.08, 14.38, 20.5,\n         29.24, 41.7, 59.46, 135.438, 279.707, 772.93,\n         1709.91, 3734.32, 8082.32, 12665.8, 22353.3])\n\n\ncarreaulaw = lambda x, eta_0, lam, a, n: eta_0 / (1 + (lam * x)**a)**((n-1)/a)\n\npopt, pcov = sp.optimize.curve_fit(carreaulaw, gamma, eta, p0=[8000, 3000, 0.8, 0.1])\n\nprint(popt)\n\nx = np.linspace(gamma.min(), gamma.max(), 500)\nfig = plt.figure()\ndiagram = fig.add_axes([0.1, 0.1, 0.8, 0.8])\ndiagram.set_xlabel(r\"$log\\ \\. \\gamma_{true}\\ (s^{-1})$\", fontsize = 12)\ndiagram.set_ylabel(r\"$log\\ \\eta_{true}\\ (Pa*s)$\",fontsize = 12)\n#diagram.set_xscale(\"log\")\n#diagram.set_yscale(\"log\")\ndiagram.plot(gamma, eta, \"r*\")\ndiagram.plot(x, carreaulaw(x, popt[0], popt[1], popt[2], popt[3]), \"g-\")\n</code></pre>\n\n<p>I constantly keep getting the error: <code>RuntimeWarning: invalid value encountered in power</code>. I tried a lot of variations already and am pretty stuck right now.</p>\n\n<p>If I don't give any starting values, I get:</p>\n\n<pre><code>RuntimeError: Optimal parameters not found: Number of calls to function has reached maxfev = 1000.\n</code></pre>\n\n<p>Here is the image of the data on a log-log scale:</p>\n\n<p><a href=\"https://i.stack.imgur.com/HyYgz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HyYgz.png\" alt=\"Original data on log-log scale\"></a></p>\n\n<p>I really don't know where I go wrong! The data looks pretty good, that's why I never should run out of <code>maxfev</code>.</p>\n"}, {"tags": ["python", "flask", "flask-restful"], "answers": [{"tags": [], "owner": {"reputation": 1407, "user_id": 5919154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca0f83c18e982b8675e9ba617307194e?s=128&d=identicon&r=PG&f=1", "display_name": "nathan.medz", "link": "https://stackoverflow.com/users/5919154/nathan-medz"}, "is_accepted": true, "score": 1, "last_activity_date": 1547679138, "creation_date": 1547679138, "answer_id": 54226589, "question_id": 54226477, "link": "https://stackoverflow.com/questions/54226477/execute-python-script-everytime-the-api-gets-request/54226589#54226589", "title": "execute python script everytime the API gets request", "body": "<p>Imports should be done at the top of your file for several reasons that I wont get into here, but I think you would do well to do a bit of research into how imports in python work. </p>\n\n<p>From what I understand of your code, it could be reformatted as follows. Note that this assumes you have a file named get_jira.py which contains a function named generate_jira that returns a new jira name each time its run.</p>\n\n<pre><code>from flask_restful import Resource, Api, request\nfrom get_jira import generate_jira\nimport fileinput\n\napp = Flask(__name__)\napi = Api(app)\n\nclass Get(Resource):\n    def get(self):\n\n            ### ACCEPTED PARAMETERS\n            source = request.get_json(force=True)['source']\n            desc = request.get_json(force=True)['desc']\n            jira = generate_jira()\n\n            return jsonify({\"desc\":desc},{\"source\": source},{\"jira\": jira})\n\napi.add_resource(Get, '/api/v1.0')\n\nif __name__ == '__main__':\n    app.run(port=5000,debug=True,use_reloader=True)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10912782, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94fb2bba4d72992b404395ba7467157a?s=128&d=identicon&r=PG&f=1", "display_name": "honest", "link": "https://stackoverflow.com/users/10912782/honest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 540, "favorite_count": 0, "accepted_answer_id": 54226589, "answer_count": 1, "score": 0, "last_activity_date": 1547679138, "creation_date": 1547678408, "question_id": 54226477, "link": "https://stackoverflow.com/questions/54226477/execute-python-script-everytime-the-api-gets-request", "title": "execute python script everytime the API gets request", "body": "<p>This is my simple rest api</p>\n\n<p>I'm getting the <code>jira</code> variable from the <code>get_jira</code> script</p>\n\n<p>This is another python script which sends POST request to jira rest api to get a new jira ID</p>\n\n<p>And it works fine but only once. When I start my application and send GET request to it, it gives me new jira ID, let's say <code>ABC-01</code>. The problem is when I send another GET request to get next jira ID, it gives me <code>ABC-01</code> again</p>\n\n<p>Looks like the <code>get_jira</code> is executed only once, no matter how many GET request I'll send. The only way is to restart the app </p>\n\n<p>Is there any way to get new jira ID (<code>jira</code>) everytime I send GET request to my api? </p>\n\n<pre><code>from flask_restful import Resource, Api, request\nimport fileinput\n\napp = Flask(__name__)\napi = Api(app)\n\nclass Get(Resource):\n        def get(self):\n\n                ### ACCEPTED PARAMETERS\n                source = request.get_json(force=True)['source']\n                desc = request.get_json(force=True)['desc']\n\n                ###\n                .\n                .\n                ###\n\n           ---&gt; from get_jira import jira\n\n                return jsonify({\"desc\":desc},{\"source\": source},{\"jira\": jira})\n\napi.add_resource(Get, '/api/v1.0')\n\nif __name__ == '__main__':\n        app.run(port=5000,debug=True,use_reloader=True)\n</code></pre>\n"}, {"tags": ["python", "plotly"], "answers": [{"comments": [{"owner": {"reputation": 553, "user_id": 3232179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f2cceeb15edacac6824114997219ee?s=128&d=identicon&r=PG&f=1", "display_name": "Sahar", "link": "https://stackoverflow.com/users/3232179/sahar"}, "edited": false, "score": 2, "creation_date": 1547768494, "post_id": 54238606, "comment_id": 95316257, "body": "Excellent! Inspired by the link you shared, I kept scope=&#39;north america&#39;, then the US, Canada border shows up, which makes the map more clear. Many thanks for your help!"}], "tags": [], "owner": {"reputation": 2024, "user_id": 9461974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb35846c1f8d76ead6415a2a5db58d76?s=128&d=identicon&r=PG&f=1", "display_name": "Oysiyl", "link": "https://stackoverflow.com/users/9461974/oysiyl"}, "is_accepted": true, "score": 4, "last_activity_date": 1547737097, "creation_date": 1547737097, "answer_id": 54238606, "question_id": 54226468, "link": "https://stackoverflow.com/questions/54226468/scattergeo-of-canada-using-plotly-in-python/54238606#54238606", "title": "Scattergeo of Canada using plotly in python", "body": "<p>You need to specify to additional parameters <code>lataxis</code> and <code>lonaxis</code> in <code>geo</code> dictionary in <code>layout</code> (based on <a href=\"https://plot.ly/~BlytheErin/32/canadian-cities/#/code\" rel=\"nofollow noreferrer\">this</a>). Such parameters such <code>locationmode</code> and <code>scope</code> not helped for me in that case.</p>\n\n<p>Code:</p>\n\n<pre><code># import all the necessaries libraries\nfrom plotly import tools\nimport plotly.offline as py\nimport plotly.graph_objs as go\nimport pandas as pd\n# your df\nstores_info_df = pd.DataFrame({'LONGITUDE':[-60,-80,-100,-120],\n                              'LATITUDE':[50,51,53,54],\n                              'STRATEGY':['One','Two','Three','Four']})\n# your function\ndef visualize_geo_store_canada(stores_info_df,\n                               fig_name='store_strategy_Canada_map', title = 'Stores Strategy'):\n    data = [ dict(\n        type = 'scattergeo',\n        ##### WHAT TO REPLACE? ########\n        #locationmode = 'Canada',\n        ###############################\n        lon = stores_info_df['LONGITUDE'],\n        lat = stores_info_df['LATITUDE'],\n        text = stores_info_df['STRATEGY'],\n        mode = 'markers',\n        marker = dict(\n            colorscale= 'Jet',  \n            color = stores_info_df['STRATEGY'],\n            colorbar = dict(\n                title = 'Strategy',\n                titleside = 'top',\n                tickmode = 'array',\n            )\n    ))]\n    layout = dict(\n        title = title,\n        geo = dict(\n            ##### WHAT TO REPLACE? ########\n            #scope='north-america',\n            ###############################\n            showland = True,\n            # Add coordinates limits on a map\n            lataxis = dict(range=[40,70]),\n            lonaxis = dict(range=[-130,-55]),\n            landcolor = \"rgb(250, 250, 250)\",\n            subunitcolor = \"rgb(217, 217, 217)\",\n            countrycolor = \"rgb(217, 217, 217)\",\n            countrywidth = 0.5,\n            subunitwidth = 0.5\n        ),\n    )\n    fig = dict(data=data, layout=layout)\n    py.plot(fig, validate=False)\n# plot a plot\nvisualize_geo_store_canada(stores_info_df)\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/cJs4d.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cJs4d.png\" alt=\"Plot for Canada\"></a></p>\n"}], "owner": {"reputation": 553, "user_id": 3232179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4f2cceeb15edacac6824114997219ee?s=128&d=identicon&r=PG&f=1", "display_name": "Sahar", "link": "https://stackoverflow.com/users/3232179/sahar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1978, "favorite_count": 0, "accepted_answer_id": 54238606, "answer_count": 1, "score": 6, "last_activity_date": 1547737097, "creation_date": 1547678361, "question_id": 54226468, "link": "https://stackoverflow.com/questions/54226468/scattergeo-of-canada-using-plotly-in-python", "title": "Scattergeo of Canada using plotly in python", "body": "<p>I would like to visualize the strategy of Canadian stores on plotly map. I have done this for American stores. I just want to replicate it for Canada. I think <code>location mode</code>, <code>scope</code> and <code>projection</code> should change, but I do not know with which value. I would appreciate any help.</p>\n\n<pre><code>def visualize_geo_store_canada(stores_info_df,\n                               fig_name='store_strategy_Canada_map', title = 'Stores Strategy'):\n    data = [ dict(\n        type = 'scattergeo',\n        ##### WHAT TO REPLACE? ########\n        #locationmode = 'USA-states',\n        ###############################\n        lon = stores_info_df['LONGITUDE'],\n        lat = stores_info_df['LATITUDE'],\n        text = stores_info_df['STRATEGY'],\n        mode = 'markers',\n        marker = dict(\n            colorscale= 'Jet',  \n            color = stores_info_df['STRATEGY'],\n            colorbar = dict(\n                title = 'Strategy',\n                titleside = 'top',\n                tickmode = 'array',\n            )\n\n    ))]\n\n    layout = dict(\n        title = title,\n        geo = dict(\n            ##### WHAT TO REPLACE? ########\n            #scope='usa',\n            #projection=dict( type='albers usa' ),\n            ###############################\n            showland = True,\n            landcolor = \"rgb(250, 250, 250)\",\n            subunitcolor = \"rgb(217, 217, 217)\",\n            countrycolor = \"rgb(217, 217, 217)\",\n            countrywidth = 0.5,\n            subunitwidth = 0.5\n        ),\n    )\n\n   fig = dict(data=data, layout=layout)\n   plotly.offline.iplot(fig, validate=False)\n</code></pre>\n"}, {"tags": ["python", "inheritance"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1531591"}, "edited": false, "score": 1, "creation_date": 1547678839, "post_id": 54226402, "comment_id": 95279088, "body": "It is way better to have the required_takeoff_distance only in the airplane class since as you point it, this method only make sense for airplane. Adding the method to the base class would break the SOLID principles."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4396006"}, "edited": false, "score": 0, "creation_date": 1547679125, "post_id": 54226484, "comment_id": 95279186, "body": "I agree with <i>&quot;if you&#39;re not sure what it means you can safely forget about it.&quot;</i>, but I dont with <i>&quot;This is almost never needed in Python&quot;</i>. That radically depends on what you use Python for. I have been recently dedicating a lot of time to building some frameworks and I use it a lot."}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": true, "score": 7, "last_activity_date": 1547678440, "creation_date": 1547678440, "answer_id": 54226484, "question_id": 54226402, "link": "https://stackoverflow.com/questions/54226402/python-child-class-with-more-methods/54226484#54226484", "title": "Python child class with more methods", "body": "<p>It's perfectly OK for a child class to define more methods than are available on the parent class. Indeed, this is the usual reason for creating a child class in the first place.</p>\n\n<p>Do not add a method with <code>raise NotImplementedError</code> onto the parent class unless you're trying to define an interface / <a href=\"https://docs.python.org/3/glossary.html#term-abstract-base-class\" rel=\"noreferrer\">abstract base class</a>. This is almost never needed in Python, so if you're not sure what it means you can safely forget about it.</p>\n"}], "owner": {"reputation": 1115, "user_id": 7692855, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/69900162929289ad3ce2360bcf9af08a?s=128&d=identicon&r=PG&f=1", "display_name": "user7692855", "link": "https://stackoverflow.com/users/7692855/user7692855"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 54226484, "answer_count": 1, "score": 2, "last_activity_date": 1547678440, "creation_date": 1547677994, "question_id": 54226402, "link": "https://stackoverflow.com/questions/54226402/python-child-class-with-more-methods", "title": "Python child class with more methods", "body": "<p>I have a quick question about how to deal with an inheritance problem.</p>\n\n<p>Let's say we have a vehicle object</p>\n\n<pre><code>class vehicle(object):\n\n    __init__(registration):\n         registration = self.registration\n\n    get_details():\n         return \"This is a vehicle\"\n</code></pre>\n\n<p>And then a truck that inherits from vehicle</p>\n\n<pre><code>class truck(vehicle):\n\n      get_details():\n         return \"This is a truck\"\n</code></pre>\n\n<p>We have lots of classes all with the same methods and properties e.g. bus, car, train. However, we also have an airplane which inherits from vehicle but only airplane has a new method called  <code>required_takeoff_distance()</code></p>\n\n<p>Is it OK to only have it in the airplane class or should you also add it to the vehicle class with a default of <code>raise NotImplementedError()</code>?</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 1, "creation_date": 1547678852, "post_id": 54226394, "comment_id": 95279093, "body": "I know this isn&#39;t really what you&#39;re asking about, but there&#39;s not actually any need for a special case using <code>min</code> (or equivalent) when the second argument isn&#39;t passed. Just use <code>1</code> as the default <code>n</code> value, and the rest of the code should just work."}, {"owner": {"reputation": 1984, "user_id": 4439019, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ef8889f7e466495157e2527a85930a9c?s=128&d=identicon&r=PG&f=1", "display_name": "JD2775", "link": "https://stackoverflow.com/users/4439019/jd2775"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1547679221, "post_id": 54226394, "comment_id": 95279211, "body": "I am curious how that would work, if I use 1 as the default.  What if the list itself didn&#39;t have a 1 in it?  What if the min value of the list was 35 or something like that? Wouldn&#39;t I still need to figure out the min() of what&#39;s in the list?"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1547679661, "post_id": 54226394, "comment_id": 95279348, "body": "But <code>n</code> isn&#39;t supposed to be a number <i>in</i> the list, it&#39;s the ordinal of the minimum you&#39;re supposed to get, isn&#39;t it? You might want a sanity check, as there&#39;s no sense in trying to find the <code>-2</code>&#39;th smallest number, nor the 3000th number in a list with only 10 values. But you probably want those checks <i>anyway</i> for the case you&#39;re solving by sorting and indexing. No need for the default to be a special case."}, {"owner": {"reputation": 1984, "user_id": 4439019, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ef8889f7e466495157e2527a85930a9c?s=128&d=identicon&r=PG&f=1", "display_name": "JD2775", "link": "https://stackoverflow.com/users/4439019/jd2775"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1547679859, "post_id": 54226394, "comment_id": 95279432, "body": "I see what you are saying now, makes sense.  Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 1984, "user_id": 4439019, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ef8889f7e466495157e2527a85930a9c?s=128&d=identicon&r=PG&f=1", "display_name": "JD2775", "link": "https://stackoverflow.com/users/4439019/jd2775"}, "edited": false, "score": 0, "creation_date": 1547678533, "post_id": 54226461, "comment_id": 95278999, "body": "thank you, that solved it.  Obvious miss on my part and makes perfect sense.  I will accept this answer when it lets me (5 mins or so).  thanks!"}, {"owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 2, "creation_date": 1547678765, "post_id": 54226461, "comment_id": 95279066, "body": "Note that <code>b[:]</code>, <code>list(b)</code> or <code>b.copy()</code> are probably more natural ways of shallow copying a list, rather than using a list comprehension."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "reply_to_user": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "edited": false, "score": 0, "creation_date": 1547708757, "post_id": 54226461, "comment_id": 95286155, "body": "@Blckknght You&#39;re right and in any case they are more performant."}], "tags": [], "owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "is_accepted": true, "score": 1, "last_activity_date": 1547678320, "creation_date": 1547678320, "answer_id": 54226461, "question_id": 54226394, "link": "https://stackoverflow.com/questions/54226394/returning-nth-lowest-number-without-using-built-in-functions-python/54226461#54226461", "title": "Returning nth lowest number without using built-in functions - Python", "body": "<p>The problem is that you modify your input list during the algorithm: <code>b.remove(minimum)</code>. Then, when you use <code>numbers</code> for the second time, it is actually empty and so is <code>nums</code>. You can add the following to the top of the function to create a copy of the input:</p>\n\n<pre><code>b = [x for x in b]\n</code></pre>\n"}], "owner": {"reputation": 1984, "user_id": 4439019, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ef8889f7e466495157e2527a85930a9c?s=128&d=identicon&r=PG&f=1", "display_name": "JD2775", "link": "https://stackoverflow.com/users/4439019/jd2775"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 54226461, "answer_count": 1, "score": 0, "last_activity_date": 1547679012, "creation_date": 1547677940, "question_id": 54226394, "link": "https://stackoverflow.com/questions/54226394/returning-nth-lowest-number-without-using-built-in-functions-python", "title": "Returning nth lowest number without using built-in functions - Python", "body": "<p>I am working on the following:\n<strong>Write a function that returns nth lowest number of a list (or iterable in general). Return the lowest if second argument not specified\nNote that if a list contains duplicates, they should be handled before determining nth lowest</strong></p>\n\n<p>I got the following to work fine:</p>\n\n<pre><code>numbers = [8,9, 1,300,5, 54, 54]\ndef nth_lowest(b, n='N/A'):\n    nums = set(b)\n    if n == 'N/A':\n        return min(b)\n    else:\n        nums = sorted(nums)\n        return nums[n-1]\n\nprint(nth_lowest(numbers))\nprint(nth_lowest('ananasgnasgzynrmas', 6))\nprint(nth_lowest(numbers, 4))\n</code></pre>\n\n<p>But I wanted to try to write it without using those built-in SET or MIN functions.  Here is what I have:</p>\n\n<pre><code>numbers = [8,9, 1,300,5, 54, 54]\ndef nth_lowest(b, n='N/A'):\n    nums = []\n    new_list = []\n    for i in b:  # instead of using set()\n        if i not in nums:\n            nums.append(i)\n    nums = sorted(nums)\n    if n == 'N/A':\n        while b: # instead of using min()\n            minimum = b[0]\n            for x in b:\n                if x &lt; minimum:\n                    minimum = x\n            new_list.append(minimum)\n            b.remove(minimum)\n        return new_list\n    else:\n        return nums[n-1]\n\nprint(nth_lowest(numbers))\nprint(nth_lowest('ananasgnasgzynrmas', 6))\nprint(nth_lowest(numbers, 4))\n</code></pre>\n\n<p>but it is error'ing out on the following:</p>\n\n<pre><code>return nums[n-1]\nIndexError: list index out of range\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "parsing", "specifications", "text-parsing"], "answers": [{"comments": [{"owner": {"reputation": 2353, "user_id": 130715, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/df20369f504f5babf1451ac210076746?s=128&d=identicon&r=PG", "display_name": "dlrust", "link": "https://stackoverflow.com/users/130715/dlrust"}, "edited": false, "score": 1, "creation_date": 1547740367, "post_id": 54231749, "comment_id": 95303857, "body": "Thanks! I&#39;ll def check that out"}], "tags": [], "owner": {"reputation": 666, "user_id": 2024430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b84068ad3d5c7e394ccd23afe00d6d2b?s=128&d=identicon&r=PG", "display_name": "Igor Dejanovi\u0107", "link": "https://stackoverflow.com/users/2024430/igor-dejanovi%c4%87"}, "is_accepted": false, "score": 2, "last_activity_date": 1547713718, "creation_date": 1547713718, "answer_id": 54231749, "question_id": 54226384, "link": "https://stackoverflow.com/questions/54226384/is-there-a-library-or-spec-for-parsing-complex-string-based-queries/54231749#54231749", "title": "Is there a library or spec for parsing complex string-based queries", "body": "<p>With any decent general parsing library you can build a parser that parse languages like this. Since it is an expression language I would suggest using some bottom-up algorithm with declarative associativity and priority spec.</p>\n\n<p>For example, in <a href=\"https://github.com/igordejanovic/parglare/\" rel=\"nofollow noreferrer\">parglare</a> (disclosure: I'm the author) it would be something like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from parglare import Grammar, Parser\n\ngrammar = r'''\nS: E EOF;\nE: Term | And | Not | Or | To | Parent;\nAnd: left=E 'AND' right=E;\nOr: left=E 'OR' right=E;\nNot: 'NOT' val=E;\nTo: from=E 'TO' to=BASETYPE;\nParent: '(' E ')' {9};\nTerm: name=ID TermOp value=BASETYPE {10};\nTermOp: ':' | '=' | '&gt;' | '&lt;' | '&lt;=' | '&gt;=';\nBASETYPE: NUM | STRING | ID;\n\nterminals\nNUM: /\\d+(\\.\\d+)?/;\nID: /[a-zA-Z_][_a-zA-Z0-9]*/;\nSTRING: /(\"(\\\\\"|[^\"])*\")|(\\'(\\\\\\'|[^\\'])*\\')/;\n'''\n\ng = Grammar.from_string(grammar)\nparser = Parser(g)\n\nout = parser.parse(r'''\navailable = 1 AND (category:Book OR NOT category:Ebook)\n     AND _tags:published\n     AND publication_date:1441745506 TO 1441755506\n     AND inStock &gt; 0 AND author:\"John Doe\"\n''')\n\n</code></pre>\n\n<p><code>out</code> reference at the end will be a nice object model deduced from the grammar above. You can investigate it in the debugger to get the feel. I haven't covered the whole language as I don't know it but you get the idea. </p>\n\n<p>It would be now relatively easy to extend this example to support the full language, and to make a mapper of the given structure to the query. </p>\n\n<p>It would be even simpler if you use parglare actions to directly transform parsed input to the desired output. You can read more about it in <a href=\"http://www.igordejanovic.net/parglare/latest/\" rel=\"nofollow noreferrer\">the docs</a>.</p>\n"}], "owner": {"reputation": 2353, "user_id": 130715, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/df20369f504f5babf1451ac210076746?s=128&d=identicon&r=PG", "display_name": "dlrust", "link": "https://stackoverflow.com/users/130715/dlrust"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547713718, "creation_date": 1547677854, "question_id": 54226384, "link": "https://stackoverflow.com/questions/54226384/is-there-a-library-or-spec-for-parsing-complex-string-based-queries", "title": "Is there a library or spec for parsing complex string-based queries", "body": "<p>Have seen a pretty common pattern with some REST APIs for handling filtering by passing a composed string</p>\n\n<p>One such example: <a href=\"https://www.algolia.com/doc/api-reference/api-parameters/filters/?language=python#examples\" rel=\"nofollow noreferrer\">https://www.algolia.com/doc/api-reference/api-parameters/filters/?language=python#examples</a></p>\n\n<p>Example <code>available = 1 AND (category:Book OR NOT category:Ebook) AND _tags:published AND publication_date:1441745506 TO 1441755506 AND inStock &gt; 0 AND author:\"John Doe\"</code></p>\n\n<p>Is there a good spec or parsing library for stuff like this that can take a string like this and parse it into a structure that could be then mapped to a query?</p>\n"}, {"tags": ["python", "iterable"], "comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 1, "creation_date": 1547677833, "post_id": 54226370, "comment_id": 95278763, "body": "Why can&#39;t  you split the string on <code>&#47;</code> and take slices?"}, {"owner": {"reputation": 1269, "user_id": 2962917, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e32619641709b586f036f5606eb1496c?s=128&d=identicon&r=PG", "display_name": "Bobby", "link": "https://stackoverflow.com/users/2962917/bobby"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1547678104, "post_id": 54226370, "comment_id": 95278862, "body": "I can. I&#39;m looking for the best (pythonic) way to do it.  My first thought is to split/join in a recursive function, <code>yield</code>ing the result, but there&#39;s got to be a better way."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1547701847, "post_id": 54226370, "comment_id": 95283920, "body": "I&#39;ve updated my answer to emphasize the non-file nature of pure posix paths"}], "answers": [{"comments": [{"owner": {"reputation": 156, "user_id": 4578715, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-91zP8LJ8tME/AAAAAAAAAAI/AAAAAAAACqE/yFjf_IUBLSg/photo.jpg?sz=128", "display_name": "hlobit", "link": "https://stackoverflow.com/users/4578715/hlobit"}, "edited": false, "score": 0, "creation_date": 1606249187, "post_id": 54226406, "comment_id": 114905730, "body": "<code>pathlib</code> also provides <code>path.parents</code> property on <code>Path</code> objects. Definition from docs: an immutable sequence providing access to the logical ancestors of the path."}], "tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": true, "score": 5, "last_activity_date": 1547701796, "last_edit_date": 1547701796, "creation_date": 1547678008, "answer_id": 54226406, "question_id": 54226370, "link": "https://stackoverflow.com/questions/54226370/python-elegent-way-to-get-an-iterable-of-all-parents-in-a-path/54226406#54226406", "title": "Python: Elegent way to get an iterable of all parents in a path", "body": "<p>Use <a href=\"https://docs.python.org/3/library/pathlib.html\" rel=\"nofollow noreferrer\"><code>pathlib</code></a>. <a href=\"https://docs.python.org/3/library/pathlib.html#pure-paths\" rel=\"nofollow noreferrer\"><code>PurePath</code></a>s offer an abstract interface to path-like objects that have no relationship to the file system. In particular, <a href=\"https://docs.python.org/3/library/pathlib.html#pathlib.PurePosixPath\" rel=\"nofollow noreferrer\"><code>PurePosixPath</code></a> is the kind that uses forward slashes (<code>/</code>) as separators:</p>\n\n<pre><code>&gt;&gt;&gt; from pathlib import PurePosixPath\n&gt;&gt;&gt; p = PurePosixPath('/house/dogs/ralph/bone')\n&gt;&gt;&gt; str(p.parent)\n/house/dogs/ralph\n&gt;&gt;&gt; str(p.parent.parent)\n/house/dogs\n</code></pre>\n\n<p>You can loop this easily:</p>\n\n<pre><code>p = PurePosixPath(...)\nwhile p != p.root:\n    # Do stuff to p\n    p = p.parent\n</code></pre>\n\n<p>A fairly pythonic finishing touch would be to make it a generator:</p>\n\n<pre><code>def receding_path(p):\n    p = PurePosixPath(p)\n    while p != p.root:\n        yield str(p)\n        p = p.parent\n\nfor item in receding_path('/house/dogs/ralph/bone'):\n    # do stuff to each item\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1269, "user_id": 2962917, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e32619641709b586f036f5606eb1496c?s=128&d=identicon&r=PG", "display_name": "Bobby", "link": "https://stackoverflow.com/users/2962917/bobby"}, "edited": false, "score": 0, "creation_date": 1547680156, "post_id": 54226456, "comment_id": 95279542, "body": "Curious: is there a reason that you are filtering instead of just referencing <code>[:-1]</code> since only the last element is empty?"}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "reply_to_user": {"reputation": 1269, "user_id": 2962917, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e32619641709b586f036f5606eb1496c?s=128&d=identicon&r=PG", "display_name": "Bobby", "link": "https://stackoverflow.com/users/2962917/bobby"}, "edited": false, "score": 1, "creation_date": 1547686536, "post_id": 54226456, "comment_id": 95280997, "body": "@Bobby the delimiter can appear at the start or end of the string in a path. After the <code>split</code>, this causes empty strings. Using the <code>filter</code> I don&#39;t have to figure out which index to exclude, and it maintains the generator (which can&#39;t be indexed)."}], "tags": [], "owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "is_accepted": false, "score": 1, "last_activity_date": 1547679021, "last_edit_date": 1547679021, "creation_date": 1547678287, "answer_id": 54226456, "question_id": 54226370, "link": "https://stackoverflow.com/questions/54226370/python-elegent-way-to-get-an-iterable-of-all-parents-in-a-path/54226456#54226456", "title": "Python: Elegent way to get an iterable of all parents in a path", "body": "<p>One way would be to split the string on <code>\"/\"</code> and take successive slices.</p>\n\n<pre><code>in_string = \"/house/dogs/ralph/bone\"\ns = in_string.split(\"/\")\nout_strings = list(filter(None, (\"/\".join(s[:i+1]) for i in range(len(s)))))\nprint(out_strings)\n#['/house', '/house/dogs', '/house/dogs/ralph', '/house/dogs/ralph/bone']\n</code></pre>\n\n<p>The <code>filter(None, ...)</code> is used to remove empty strings.</p>\n\n<p>Or reverse the range if you want the output in the order you specified in your post:</p>\n\n<pre><code>out_strings = list(filter(None, (\"/\".join(s[:i]) for i in range(len(s), 0, -1))))\nprint(out_strings)\n#['/house/dogs/ralph/bone',\n# '/house/dogs/ralph',\n# '/house/dogs',\n# '/house']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 1, "creation_date": 1547709938, "post_id": 54226719, "comment_id": 95286633, "body": "You might want to use <code>&#39;&#47;&#39;.join</code> instead of <code>os.path.join</code> to make it OS independent. Then maybe strip off the first element?"}, {"owner": {"reputation": 4733, "user_id": 2117572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Wh7A.jpg?s=128&g=1", "display_name": "Jeffrey Froman", "link": "https://stackoverflow.com/users/2117572/jeffrey-froman"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1547743172, "post_id": 54226719, "comment_id": 95305421, "body": "I&#39;m under the impression that os.path.join is OS independent, and that using &#39;/&#39; would make it OS-dependent (works in Unix based systems only). os.path.join also does the right thing with the top level element automatically."}, {"owner": {"reputation": 1269, "user_id": 2962917, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e32619641709b586f036f5606eb1496c?s=128&d=identicon&r=PG", "display_name": "Bobby", "link": "https://stackoverflow.com/users/2962917/bobby"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1547744386, "post_id": 54226719, "comment_id": 95306061, "body": "@JeffreyFroman, I believe what @MadPhysicist is saying is that if you use <code>os.path.join</code>, the outcome will be different if you aren&#39;t on a *nix system.  It&#39;s OS independence will make your solution not run on Linux."}, {"owner": {"reputation": 4733, "user_id": 2117572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Wh7A.jpg?s=128&g=1", "display_name": "Jeffrey Froman", "link": "https://stackoverflow.com/users/2117572/jeffrey-froman"}, "reply_to_user": {"reputation": 1269, "user_id": 2962917, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e32619641709b586f036f5606eb1496c?s=128&d=identicon&r=PG", "display_name": "Bobby", "link": "https://stackoverflow.com/users/2962917/bobby"}, "edited": false, "score": 0, "creation_date": 1547745294, "post_id": 54226719, "comment_id": 95306541, "body": "Right, I undertsand that @Bobby:  <code>os.path.join</code> will use the OS. path separator for that OS. If we ARE dealing with strings that are filesystem paths, then presumably those strings will include the separator appropriate to that OS. If the strings are not filesystem paths for the OS we&#39;ll be running on, then pathlib won&#39;t work at all, and we have to operate on raw strings and characters as such. We agree how os.path.join works -- if we&#39;re going to be using pathlib, we are already making the assumption that we&#39;re using a <i>path</i> appropriate to the OS we&#39;re running on."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 1269, "user_id": 2962917, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e32619641709b586f036f5606eb1496c?s=128&d=identicon&r=PG", "display_name": "Bobby", "link": "https://stackoverflow.com/users/2962917/bobby"}, "edited": false, "score": 0, "creation_date": 1547745380, "post_id": 54226719, "comment_id": 95306590, "body": "@Bobby. The opposite. It will run as desired on Linux, but not on Windows. OP is looking for a forward slash separated path, on all systems."}, {"owner": {"reputation": 4733, "user_id": 2117572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Wh7A.jpg?s=128&g=1", "display_name": "Jeffrey Froman", "link": "https://stackoverflow.com/users/2117572/jeffrey-froman"}, "edited": false, "score": 0, "creation_date": 1547745539, "post_id": 54226719, "comment_id": 95306686, "body": "Looking at the new answers involving PurePosixPath -- and the edits to the OP regarding these NOT being filesystem paths --  makes it look like that will use &#39;/&#39; on windows as well, so I guess that would work ... but as mentioned I don&#39;t have a Windows machine to test on."}], "tags": [], "owner": {"reputation": 4733, "user_id": 2117572, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Wh7A.jpg?s=128&g=1", "display_name": "Jeffrey Froman", "link": "https://stackoverflow.com/users/2117572/jeffrey-froman"}, "is_accepted": false, "score": 1, "last_activity_date": 1547743201, "last_edit_date": 1547743201, "creation_date": 1547679970, "answer_id": 54226719, "question_id": 54226370, "link": "https://stackoverflow.com/questions/54226370/python-elegent-way-to-get-an-iterable-of-all-parents-in-a-path/54226719#54226719", "title": "Python: Elegent way to get an iterable of all parents in a path", "body": "<p>Something of a combination of the previous two answers:</p>\n\n<pre><code>import pathlib\nimport os\ndef resources(path):\n  parts = pathlib.Path(path).parts\n  for n in range(len(parts), 1, -1):\n    yield os.path.join(*parts[:n])\n</code></pre>\n"}], "owner": {"reputation": 1269, "user_id": 2962917, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e32619641709b586f036f5606eb1496c?s=128&d=identicon&r=PG", "display_name": "Bobby", "link": "https://stackoverflow.com/users/2962917/bobby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "accepted_answer_id": 54226406, "answer_count": 3, "score": 1, "last_activity_date": 1547744536, "creation_date": 1547677742, "last_edit_date": 1547744536, "question_id": 54226370, "link": "https://stackoverflow.com/questions/54226370/python-elegent-way-to-get-an-iterable-of-all-parents-in-a-path", "title": "Python: Elegent way to get an iterable of all parents in a path", "body": "<p>Working with a path-based resource system, the application needs to find the first working resource that manages a given resource based on paths. I need a succinct, pythonic way to generate the following:</p>\n\n<p><strong>Input:</strong></p>\n\n<pre><code>/house/dogs/ralph/bone\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>/house/dogs/ralph/bone\n/house/dogs/ralph\n/house/dogs\n/house\n</code></pre>\n\n<p>Note: It's okay to use <code>os.path</code> or similar built-ins, but these are not filesystem resources. Output can be anything iterable (list, set, generator, etc.).</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 3, "creation_date": 1547677803, "post_id": 54226349, "comment_id": 95278751, "body": "That&#39;s not how you use pandas. The two outer loops are unnecessary. The rest of the program depends on &quot;<i>do something</i>&quot;. It will help if you tell what &quot;<i>do something</i>&quot; is."}, {"owner": {"reputation": 12465, "user_id": 7028459, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9L9TKwhq-xo/AAAAAAAAAAI/AAAAAAAAB1E/Sne3mYXRw9w/photo.jpg?sz=128", "display_name": "Calum You", "link": "https://stackoverflow.com/users/7028459/calum-you"}, "edited": false, "score": 1, "creation_date": 1547677963, "post_id": 54226349, "comment_id": 95278802, "body": "pandas, being based on numpy, has implicit vectorisation in most of its functions so you should rarely if ever iterate over a dataframe."}, {"owner": {"reputation": 11, "user_id": 10338052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8259480e2a99af7e0bc3a3324149e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Dale2016", "link": "https://stackoverflow.com/users/10338052/dale2016"}, "edited": false, "score": 0, "creation_date": 1547678259, "post_id": 54226349, "comment_id": 95278914, "body": "The &#39;do something&#39; does float math using the value of the cell, along with another, so it cannot be NaN. It then stores the value in a two dimensional list (i.e., Y columns x number of rows) that are later added to the dataframe as a Y new columns. I do not iterate over the entire dataframe but instead just a range of columns, i.e., columns 5-10."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10338052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8259480e2a99af7e0bc3a3324149e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Dale2016", "link": "https://stackoverflow.com/users/10338052/dale2016"}, "edited": false, "score": 0, "creation_date": 1547681723, "post_id": 54226496, "comment_id": 95280004, "body": "Thank you for your reply. What I am trying to do is for each row divide the value in some column X by the value in some column Y then add these values as a new column named Q. I am doing this across a range of columns, i.e., X to Z, and adding a new column for each, hence the loops. My columns are multi-indexed, such as (&#39;a&#39;,&#39;two&#39;) (&#39;a&#39;,&#39;one&#39;) and I could not figure out how to get .apply() to work in such a case so I went back to how I would have done it in Java years ago. Thank you for your time."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 11, "user_id": 10338052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8259480e2a99af7e0bc3a3324149e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Dale2016", "link": "https://stackoverflow.com/users/10338052/dale2016"}, "edited": false, "score": 0, "creation_date": 1547681830, "post_id": 54226496, "comment_id": 95280034, "body": "So, please update your question. Add an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> to it that reflects your comment. The example that you currently have is neither complete nor verifiable."}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 1, "last_activity_date": 1547679995, "last_edit_date": 1547679995, "creation_date": 1547678518, "answer_id": 54226496, "question_id": 54226349, "link": "https://stackoverflow.com/questions/54226349/faster-way-to-check-a-range-of-cells-in-a-pandas-dataframe-for-being-nan-than-us/54226496#54226496", "title": "Faster way to check a range of cells in a pandas dataframe for being NaN than using for loops, math.isnan(), and df.iloc()?", "body": "<p>Since we do not know what exactly is done to the non-NaN elements, here's an illustration of how they can be inverted:</p>\n\n<pre><code>dataframe[dataframe.notna()] = 1 / dataframe\n</code></pre>\n\n<p>As you can see, there are no loops involved. If you need a more specific answer, please ask a more specific question.</p>\n"}], "owner": {"reputation": 11, "user_id": 10338052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8259480e2a99af7e0bc3a3324149e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Dale2016", "link": "https://stackoverflow.com/users/10338052/dale2016"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547686083, "creation_date": 1547677629, "last_edit_date": 1547686083, "question_id": 54226349, "link": "https://stackoverflow.com/questions/54226349/faster-way-to-check-a-range-of-cells-in-a-pandas-dataframe-for-being-nan-than-us", "title": "Faster way to check a range of cells in a pandas dataframe for being NaN than using for loops, math.isnan(), and df.iloc()?", "body": "<p>I am new to python and I am trying to quickly check each cell in a range of columns across all rows in a dataframe (in the code example all cells) to see if they are NaN before performing some operations using the value of the cell.</p>\n\n<p>Currently I am using a combination of for loops, <code>math.isnan()</code>, and <code>df.iloc()</code> and it is prohibitively slow when the dataframe is large.</p>\n\n<pre><code>for y in range(dataframe.shape[1]):\n    for x in range(dataframe.shape[0]):\n        if not math.isnan(dataframe.iloc[x][y]): \n            #do something using the value dataframe.iloc[x][y]\n</code></pre>\n\n<p>The code works, just slowly. In larger dataframes, thousands by thousands, it takes hours. Is there a faster/more efficient way to do this?</p>\n"}, {"tags": ["python", "time", "while-loop"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 1, "creation_date": 1547677461, "post_id": 54226299, "comment_id": 95278609, "body": "For recursion, the program will run eventually out of stack depth and/or accidentally keep objects alive if not somehow \u201cspringboarding\u201d - which is exactly what timing libraries take care of."}, {"owner": {"reputation": 24576, "user_id": 3767239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f7cdefb47f96069d7add1222c70f3f70?s=128&d=identicon&r=PG&f=1", "display_name": "a_guest", "link": "https://stackoverflow.com/users/3767239/a-guest"}, "edited": false, "score": 4, "creation_date": 1547677642, "post_id": 54226299, "comment_id": 95278693, "body": "What&#39;s the recursive part of your code? All you posted is sequential."}, {"owner": {"reputation": 6783, "user_id": 3064538, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b644a108ae9ae0ec2f7402dd235d155c?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/3064538/boris"}, "edited": false, "score": 0, "creation_date": 1547678645, "post_id": 54226299, "comment_id": 95279028, "body": "You have to <a href=\"https://stackoverflow.com/questions/47103712/python-3-try-except-all-with-error\">catch all exceptions</a>, otherwise your script will die on the first error until you restart it. Using a <a href=\"https://en.wikipedia.org/wiki/Cron\" rel=\"nofollow noreferrer\">cron</a> job would probably be easier."}, {"owner": {"reputation": 3691, "user_id": 1808989, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3884a2f2ee43a4681967493905dcc20c?s=128&d=identicon&r=PG", "display_name": "Andrew Sun", "link": "https://stackoverflow.com/users/1808989/andrew-sun"}, "edited": false, "score": 1, "creation_date": 1547685367, "post_id": 54226299, "comment_id": 95280781, "body": "I think OP means <i>recurring</i>, not recursive."}, {"owner": {"reputation": 51, "user_id": 10593238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38c366d4aa249d363b1bbe6db1db332?s=128&d=identicon&r=PG&f=1", "display_name": "UBHDNNX", "link": "https://stackoverflow.com/users/10593238/ubhdnnx"}, "edited": false, "score": 0, "creation_date": 1547692551, "post_id": 54226299, "comment_id": 95282062, "body": "You&#39;re right-- I meant recurring. I also have an if statement before the loop starts that should catch all exceptions."}], "answers": [{"tags": [], "owner": {"reputation": 679, "user_id": 8165283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d81daac9c269c34b6fc40b66d278236a?s=128&d=identicon&r=PG&f=1", "display_name": "polymath", "link": "https://stackoverflow.com/users/8165283/polymath"}, "is_accepted": true, "score": 0, "last_activity_date": 1547684912, "creation_date": 1547684912, "answer_id": 54227386, "question_id": 54226299, "link": "https://stackoverflow.com/questions/54226299/is-there-anything-fundamentally-wrong-with-scheduling-recurring-tasks-with-indef/54227386#54227386", "title": "Is there anything fundamentally wrong with scheduling recurring tasks with indefinite while loop?", "body": "<p>When in doubt, refer to the <a href=\"https://www.python.org/dev/peps/pep-0020/\" rel=\"nofollow noreferrer\">zen of python</a>. If it is readable, easy to understand and does the job <em>correctly</em> then you\u2019re good.</p>\n\n<p>Having said that have a look <a href=\"https://stackoverflow.com/questions/29491442/python-sleep-for-memory-consumption-measurement-not-accurate\">here</a> and <a href=\"https://stackoverflow.com/questions/34874118/python-why-does-time-sleep-cause-memory-leak\">here</a> to see similar questions on how time.sleep works. You may change your mind depending on how accurate you need the sleep cycle to be</p>\n"}], "owner": {"reputation": 51, "user_id": 10593238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38c366d4aa249d363b1bbe6db1db332?s=128&d=identicon&r=PG&f=1", "display_name": "UBHDNNX", "link": "https://stackoverflow.com/users/10593238/ubhdnnx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 54227386, "answer_count": 1, "score": 1, "last_activity_date": 1547692461, "creation_date": 1547677342, "last_edit_date": 1547692461, "question_id": 54226299, "link": "https://stackoverflow.com/questions/54226299/is-there-anything-fundamentally-wrong-with-scheduling-recurring-tasks-with-indef", "title": "Is there anything fundamentally wrong with scheduling recurring tasks with indefinite while loop?", "body": "<p>I have an application I want to run on a virtual machine to update a database with data returned from an API every 15 minutes.</p>\n\n<p>In researching the issue, it seems that the traditional approach is to use a scheduling library, etc (i.e. run task x every hour).</p>\n\n<p>Is there anything inherently wrong with just using a recurring while loop and a time.sleep(900) delay? In other words, will it crash/ eat up too much ram/etc.. This program would run basically indefinitely on a virtual machine.</p>\n\n<pre><code>while True:\n    print('hello world')\n    time.sleep(900)\n</code></pre>\n"}, {"tags": ["python", "pandas", "data-science"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1547677433, "post_id": 54226295, "comment_id": 95278594, "body": "This is a very basic refactor - look for the things you repeat but with different values (the years spring to mind, and they&#39;re already in a list...) then wrap them in a function and/or for loop."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1547677623, "post_id": 54226295, "comment_id": 95278687, "body": "Use your browser to find tutorials on looping and lists.  You should be able to iterate over <code>my_names</code> and put the repetitive code inside your loop."}, {"owner": {"reputation": 1604, "user_id": 7158458, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209106524837718/picture?type=large", "display_name": "Emm", "link": "https://stackoverflow.com/users/7158458/emm"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1547678449, "post_id": 54226295, "comment_id": 95278971, "body": "@Prune Got it thanks"}], "answers": [{"tags": [], "owner": {"reputation": 1604, "user_id": 7158458, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209106524837718/picture?type=large", "display_name": "Emm", "link": "https://stackoverflow.com/users/7158458/emm"}, "is_accepted": false, "score": 0, "last_activity_date": 1547678616, "creation_date": 1547678616, "answer_id": 54226513, "question_id": 54226295, "link": "https://stackoverflow.com/questions/54226295/trying-to-find-a-way-to-simplify-my-block-of-code/54226513#54226513", "title": "Trying to find a way to simplify my block of code", "body": "<p>So I simplified this code by running a for loop through a list of the years 2009-2018 and applying a function to divide each item in each list by the total count in each list and multiplying it by 100 and then using pd.DataFrame to create a dataframe and specifying the index names I would be using</p>\n\n<pre><code>a = [x/sum(x)*100 for x in [nine,ten,eleven,twelve,thirteen,fourteen,fifteen,sixteen,seventeen,eighteen]]\npd.DataFrame(a, index= my_names)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 0, "last_activity_date": 1547678633, "creation_date": 1547678633, "answer_id": 54226516, "question_id": 54226295, "link": "https://stackoverflow.com/questions/54226295/trying-to-find-a-way-to-simplify-my-block-of-code/54226516#54226516", "title": "Trying to find a way to simplify my block of code", "body": "<p>The general form will be</p>\n\n<pre><code>ser = []\nfor year in my_names:\n    ser.append(\n        x/sum(fb_posts2[fb_posts2['year']==year].groupby('title').size()) * 100\n</code></pre>\n\n<p>Or, as a list comprehension:</p>\n\n<pre><code>ser = [x/sum(fb_posts2[fb_posts2['year']==year].groupby('title').size()) * 100\n    for year in my_names]\n</code></pre>\n\n<p>That should be able to replace your 3 sets of 10 repetitive lines.</p>\n"}], "owner": {"reputation": 1604, "user_id": 7158458, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209106524837718/picture?type=large", "display_name": "Emm", "link": "https://stackoverflow.com/users/7158458/emm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 54226516, "answer_count": 2, "score": -3, "last_activity_date": 1547678633, "creation_date": 1547677323, "question_id": 54226295, "link": "https://stackoverflow.com/questions/54226295/trying-to-find-a-way-to-simplify-my-block-of-code", "title": "Trying to find a way to simplify my block of code", "body": "<p>I understand that this is not the most concise block of code and looking for ways to simplify it</p>\n\n<pre><code>nine = fb_posts2[fb_posts2['year']==2009].groupby('title').size()\nten = fb_posts2[fb_posts2['year']==2010].groupby('title').size()\neleven = fb_posts2[fb_posts2['year']==2011].groupby('title').size()\ntwelve = fb_posts2[fb_posts2['year']==2012].groupby('title').size()\nthirteen = fb_posts2[fb_posts2['year']==2013].groupby('title').size()\nfourteen = fb_posts2[fb_posts2['year']==2014].groupby('title').size()\nfifteen = fb_posts2[fb_posts2['year']==2015].groupby('title').size()\nsixteen = fb_posts2[fb_posts2['year']==2016].groupby('title').size()\nseventeen = fb_posts2[fb_posts2['year']==2017].groupby('title').size()\neighteen = fb_posts2[fb_posts2['year']==2018].groupby('title').size()\na1 = lambda x: x/sum(nine)*100\na2 = lambda x: x/sum(ten)*100\na3 = lambda x: x/sum(eleven)*100\na4 = lambda x: x/sum(twelve)*100\na5 = lambda x: x/sum(thirteen)*100\na6 = lambda x: x/sum(fourteen)*100\na7 = lambda x: x/sum(fifteen)*100\na8 = lambda x: x/sum(sixteen)*100\na9 = lambda x: x/sum(seventeen)*100\na10 = lambda x: x/sum(eighteen)*100\nnine = a1(nine)\nten = a2(ten)\neleven = a3(eleven) \ntwelve = a4(twelve)\nthirteen = a5(thirteen)\nfourteen = a6(fourteen)\nfifteen = a7(fifteen)\nsixteen = a8(sixteen)\nseventeen = a9(seventeen)\neighteen = a10(eighteen)\nmy_names = [2009,2010,2011,2012,2013,2014,2015,2016,2017,2018]\ncols = ['link', 'post','shared','timeline','status']\nser = [nine, ten, eleven, twelve, thirteen, fourteen, fifteen, sixteen, seventeen, eighteen]\ndf = pd.concat(ser, axis=1, keys=my_names)\ndf[2009].fillna(0, inplace=True)\ndf[2011].fillna(0, inplace=True)\ndf[2012].fillna(0, inplace=True)\ndf = df.transpose()\n</code></pre>\n\n<p>The intention of this is to return a dataframe that shows how many times each 'title' occurred in a given year as a percentage.</p>\n\n<p>This is the sample input\n<a href=\"https://i.stack.imgur.com/xuY30.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xuY30.png\" alt=\"Input\"></a></p>\n\n<p>This is the sample output<a href=\"https://i.stack.imgur.com/iK8B2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iK8B2.png\" alt=\"Sample Output\"></a></p>\n"}, {"tags": ["python", "python-2.7", "file", "math"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1547677463, "post_id": 54226284, "comment_id": 95278611, "body": "If you search on the phrase &quot;Python read file&quot;, you\u2019ll find resources that can explain it much better than we can in an answer here."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1547677486, "post_id": 54226284, "comment_id": 95278618, "body": "You&#39;ll need tutorials on reading from a file in general, and in splitting lines into their fields."}, {"owner": {"reputation": 1666, "user_id": 4900574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e889e234c602cf27c433d382dfb8d70?s=128&d=identicon&r=PG&f=1", "display_name": "amarynets", "link": "https://stackoverflow.com/users/4900574/amarynets"}, "edited": false, "score": 0, "creation_date": 1547678047, "post_id": 54226284, "comment_id": 95278847, "body": "Can you explain bit more about: <code>We can&#39;t know how many exerxises or digits in evert number.</code>"}], "answers": [{"comments": [{"owner": {"reputation": 10359, "user_id": 1216776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/504692de390dabd9ca22fd716e178993?s=128&d=identicon&r=PG", "display_name": "stark", "link": "https://stackoverflow.com/users/1216776/stark"}, "edited": false, "score": 0, "creation_date": 1547678949, "post_id": 54226510, "comment_id": 95279126, "body": "Please fix indent"}], "tags": [], "owner": {"reputation": 1666, "user_id": 4900574, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1e889e234c602cf27c433d382dfb8d70?s=128&d=identicon&r=PG&f=1", "display_name": "amarynets", "link": "https://stackoverflow.com/users/4900574/amarynets"}, "is_accepted": true, "score": 0, "last_activity_date": 1547678614, "creation_date": 1547678614, "answer_id": 54226510, "question_id": 54226284, "link": "https://stackoverflow.com/questions/54226284/python-files-who-to-open-corectly/54226510#54226510", "title": "python files - who to open corectly", "body": "<p>Maybe you are want to get this(python3):</p>\n\n<pre><code>test.txt:\n10 + 15\n22 - 71\n33 + 64\n</code></pre>\n\n<p>code:</p>\n\n<pre><code>import operator\nop = {'+': operator.add, '-': operator.sub}\n\nwith open('test.txt', 'r') as f:\n    lines = f.readlines()\n\nfor i in lines:\n    args = i.split()\n    val = op[args[1]](int(args[0]), int(args[-1]))\n    r = f'{i.strip()} = {val}'\n    print(r)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10924854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6fc1aa7dae32f47b0733c4a3c3b6dd5?s=128&d=identicon&r=PG&f=1", "display_name": "didi", "link": "https://stackoverflow.com/users/10924854/didi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 54226510, "answer_count": 1, "score": -2, "last_activity_date": 1547718986, "creation_date": 1547677281, "last_edit_date": 1547718986, "question_id": 54226284, "link": "https://stackoverflow.com/questions/54226284/python-files-who-to-open-corectly", "title": "python files - who to open corectly", "body": "<p>We have file with some math problems like: 46 + 19 (only + or - and it built up this way: number, space, sign, space, number) and we need to transform it into a new file and solve them (46 + 19 = 65). We don't know how many exercises there will be or the number of digits in every number. Here is my code:</p>\n\n<pre><code>enter code here\ninput_file = open(r'C:\\try\\bla.txt', 'r')\nnums = input_file.read()\n\ny = 0\ndig1 = ''\ndig2 = ''\nsign = ''\nx1 = nums.find(' ')\nx2 = x1 + 1\n\ndef one(dig1, dig2, y):\n    for i in xrange(x1):\n        dig1 += nums[y]\n        y += 1\n\n    for m in xrange(abs(-x2)):\n        dig2 += nums[y + 1]\n    y += 1\n\nsign = nums[x2]\n\nif sign == '+':\n    sum = int(dig1) + int(dig2)\n\nif sign == '-':\n    sum = int(dig1) - int(dig2)\n\nprint dig1, dig2, '=', sum\n\n\nfor a in xrange(0):\n    one(dig1, dig2, y)\n\none(dig1, dig2, y)\nprint 'f', nums[21]\n#print dig1, dig2, '=', sum\n</code></pre>\n"}, {"tags": ["python", "sqlite"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1547677369, "post_id": 54226267, "comment_id": 95278562, "body": "The Python command is <code>strip</code>; <code>trim</code> is Java."}], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 9899856, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vdGoB.jpg?s=128&g=1", "display_name": "RedKoder", "link": "https://stackoverflow.com/users/9899856/redkoder"}, "is_accepted": true, "score": 0, "last_activity_date": 1547740616, "last_edit_date": 1547740616, "creation_date": 1547680989, "answer_id": 54226869, "question_id": 54226267, "link": "https://stackoverflow.com/questions/54226267/i-cant-remove-whistespace/54226869#54226869", "title": "I can&#39;t remove whistespace", "body": "<p>First off, I would suggest that you ensure that you're using double quotes throughout your JSON files. This is the standard for JSON syntax and moreover, not having things consistent will cause more of a headache later on. </p>\n\n<p>With that out of the way, here's my solution:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>with open(jsonFile, \"r\") as file:\n    jsonLines = file.readlines()\n\ncleanJsonLines = []\nfor jsonDict in jsonLines:\n    for key in jsonDict:\n        almostCleanJson = jsonDict[key].replace(\"\\u00a0\", \"\")\n        cleanJson = almostCleanJson.replace(\"\\u20ac\", \"\")\n\n        cleanJsonLines.append({key: cleanJson})\n\nprint(cleanJsonLines)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[{'john': '6500'}, {'dams': '7500'}]\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 10592705, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ro1YUdrpUEk/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbAZrt_yN8vEhgY7L5D3S5GAfDC5_w/mo/photo.jpg?sz=128", "display_name": "houssem gharsalli", "link": "https://stackoverflow.com/users/10592705/houssem-gharsalli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 54226869, "answer_count": 1, "score": -1, "last_activity_date": 1547740616, "creation_date": 1547677210, "last_edit_date": 1547686061, "question_id": 54226267, "link": "https://stackoverflow.com/questions/54226267/i-cant-remove-whistespace", "title": "I can&#39;t remove whistespace", "body": "<p>I have json file which is inserted in a sqlite database. </p>\n\n<p>After inserting, all non breaking space are automatically converted to whitespace, which is good!</p>\n\n<p><strong>json file looks like</strong> : <code>[{'john' : \"6\\u00a0500\\u00a0\\u20ac\" , 'dams' : \"7\\u00a0500\\u00a0\\u20ac\"}, {'john' : \"10\\u00a0900\\u00a0\\u20ac\" , 'dams' : \"13\\u00a0980\\u00a0\\u20ac\"}] ##style it in code block</code></p>\n\n<p><strong>sqlite file looks like</strong>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/VR38P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VR38P.png\" alt=\"enter image description here\"></a></p>\n\n<p>My goal is to remove whitespace, '\u20ac' and cast the value to integer. \nI used <code>trim</code>, <code>ltrim</code>, <code>rtrim</code>, <code>replace</code> and combinations of <code>trim</code> and <code>replace</code> to remove whitespace, but it doesn't work.</p>\n"}, {"tags": ["python", "web-scraping", "web-crawler"], "comments": [{"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1547677175, "post_id": 54226255, "comment_id": 95278461, "body": "Don&#39;t you mean <code>import requests</code>"}, {"owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 1, "creation_date": 1547677254, "post_id": 54226255, "comment_id": 95278507, "body": "it depends entirely on the site. check yelp&#39;s terms and conditions and see if they forbid scraping. spoiler alert: <a href=\"https://www.yelp-support.com/article/Can-I-copy-or-scrape-data-from-the-Yelp-site?l=en_US\" rel=\"nofollow noreferrer\">they do</a>"}, {"owner": {"reputation": 1235, "user_id": 736694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a653dd4c531fe67209cee664848722b?s=128&d=identicon&r=PG", "display_name": "Yserbius", "link": "https://stackoverflow.com/users/736694/yserbius"}, "edited": false, "score": 0, "creation_date": 1547677349, "post_id": 54226255, "comment_id": 95278555, "body": "The only illegality that comes to mind would be if you used that data in an app or your own website."}, {"owner": {"reputation": 73, "user_id": 10787835, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkRei68SzgU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gF0Xo4KwatLiDNDogctO8ykG78dg/mo/photo.jpg?sz=128", "display_name": "Santosh Santu", "link": "https://stackoverflow.com/users/10787835/santosh-santu"}, "edited": false, "score": 0, "creation_date": 1547677359, "post_id": 54226255, "comment_id": 95278559, "body": "yea sorry, Import requests"}, {"owner": {"reputation": 73, "user_id": 10787835, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkRei68SzgU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gF0Xo4KwatLiDNDogctO8ykG78dg/mo/photo.jpg?sz=128", "display_name": "Santosh Santu", "link": "https://stackoverflow.com/users/10787835/santosh-santu"}, "reply_to_user": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 0, "creation_date": 1547677452, "post_id": 54226255, "comment_id": 95278605, "body": "@wpercy, thanks for your response, my doubt here is that I am not using any scrapper or crawler bots and, nothing is mentioned in their website about response.get"}, {"owner": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 1, "creation_date": 1547677522, "post_id": 54226255, "comment_id": 95278634, "body": "@SantoshSantu what you&#39;re doing can still be described as &quot;scraping&quot;. You take the data from a third-party page, and store it locally. using <code>requests</code> for scraping is still scraping..."}, {"owner": {"reputation": 73, "user_id": 10787835, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkRei68SzgU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gF0Xo4KwatLiDNDogctO8ykG78dg/mo/photo.jpg?sz=128", "display_name": "Santosh Santu", "link": "https://stackoverflow.com/users/10787835/santosh-santu"}, "reply_to_user": {"reputation": 8411, "user_id": 2399775, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29a2523b23d09e0bfc15d3a77e505271?s=128&d=identicon&r=PG", "display_name": "wpercy", "link": "https://stackoverflow.com/users/2399775/wpercy"}, "edited": false, "score": 0, "creation_date": 1547677589, "post_id": 54226255, "comment_id": 95278674, "body": "@wpercy thank you."}, {"owner": {"reputation": 1819, "user_id": 7296909, "user_type": "registered", "accept_rate": 73, "profile_image": "https://graph.facebook.com/10211595109812125/picture?type=large", "display_name": "Jesper", "link": "https://stackoverflow.com/users/7296909/jesper"}, "edited": false, "score": 0, "creation_date": 1547677660, "post_id": 54226255, "comment_id": 95278708, "body": "I&#39;d recommend contacting Yelp and ask them for consent"}], "owner": {"reputation": 73, "user_id": 10787835, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-dkRei68SzgU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gF0Xo4KwatLiDNDogctO8ykG78dg/mo/photo.jpg?sz=128", "display_name": "Santosh Santu", "link": "https://stackoverflow.com/users/10787835/santosh-santu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1547677632, "answer_count": 0, "score": 0, "last_activity_date": 1547677372, "creation_date": 1547677123, "last_edit_date": 1547677372, "question_id": 54226255, "link": "https://stackoverflow.com/questions/54226255/is-it-legal-to-use-request-get-to-retrieve-data-from-a-website", "closed_reason": "Duplicate", "title": "Is it legal to use request.get() to retrieve data from a website", "body": "<p>I am trying to get a list of all reviews from a yelp.com, I tried yelp API but it returns only 3 reviews. \nSo, I came across request.get() in python to downloads the entire webpage content including the reviews, the code is working perfectly. But I wanted to know if it LEGAL to do this?</p>\n\n<p>I tried scrapping and web-crawlers, but I found it simpler to just download the webpage and extract data locally</p>\n\n<pre><code>import requests\nresponse = requests.get(input_url)\n</code></pre>\n\n<p>I am writing the response content into a file to extract data locally</p>\n"}, {"tags": ["python", "regex"], "answers": [{"comments": [{"owner": {"reputation": 580, "user_id": 10583056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/619ba4fa36b561fe9084bfe4fc6581b2?s=128&d=identicon&r=PG&f=1", "display_name": "TH14", "link": "https://stackoverflow.com/users/10583056/th14"}, "edited": false, "score": 0, "creation_date": 1547707542, "post_id": 54226483, "comment_id": 95285668, "body": "thank you! what if I only wanted only alphanumeric characters after the last &quot;/&quot; in the url?"}, {"owner": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "reply_to_user": {"reputation": 580, "user_id": 10583056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/619ba4fa36b561fe9084bfe4fc6581b2?s=128&d=identicon&r=PG&f=1", "display_name": "TH14", "link": "https://stackoverflow.com/users/10583056/th14"}, "edited": false, "score": 0, "creation_date": 1547709158, "post_id": 54226483, "comment_id": 95286332, "body": "If I understand you correctly, that would be <code>https:&#47;&#47;unify.my.salesforce.com&#47;([a-zA-Z0-9]*)</code>"}], "tags": [], "owner": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "is_accepted": true, "score": 0, "last_activity_date": 1547678792, "last_edit_date": 1547678792, "creation_date": 1547678438, "answer_id": 54226483, "question_id": 54226253, "link": "https://stackoverflow.com/questions/54226253/use-re-findall-to-extract-id-at-the-end-of-a-url/54226483#54226483", "title": "Use re.findall to extract id at the end of a URL", "body": "<p>Given your url, the correct regex to work with would be:</p>\n\n<pre><code>sfdc_url= 'https://unify.my.salesforce.com/a0n82000006VlNaPPP'\nsfdc_partnerid = re.findall(r'https://unify.my.salesforce.com/(.*)', sfdc_url)\nprint sfdc_partnerid\n</code></pre>\n\n<p>Check it also on <a href=\"https://eval.in/1078060\" rel=\"nofollow noreferrer\">https://eval.in/1078060</a></p>\n\n<p>It's about quantifiers:\n<code>*?</code> is a lazy quantifier, and matches as few characters as possible</p>\n\n<p><code>(.*?)</code> effectively means \"match anything between zero and unlimited as few times as possible\", which is empty.</p>\n\n<p>Adding a <code>?</code> after that, means \"zero or one of the previous match\", so that:\n<code>(.*?)?</code> effectively means \"zero or one of nothing\"</p>\n\n<p>I'm not sure about the remaining <code>sr</code> in your original regex</p>\n"}, {"tags": [], "owner": {"reputation": 18, "user_id": 10925442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29043707ed1f83fd1899e199f7ee27ab?s=128&d=identicon&r=PG&f=1", "display_name": "thebard", "link": "https://stackoverflow.com/users/10925442/thebard"}, "is_accepted": false, "score": 0, "last_activity_date": 1547691367, "creation_date": 1547691367, "answer_id": 54228072, "question_id": 54226253, "link": "https://stackoverflow.com/questions/54226253/use-re-findall-to-extract-id-at-the-end-of-a-url/54228072#54228072", "title": "Use re.findall to extract id at the end of a URL", "body": "<p>You could also look at <a href=\"https://docs.python.org/3/library/urllib.parse.html\" rel=\"nofollow noreferrer\">urllib.parse</a> if you're on python3</p>\n\n<p>e.g.</p>\n\n<pre><code>from urllib import urlparse\nresult = urlparse(\"https://unify.my.salesforce.com/a0n82000006VlNaPPP\")\nresult.path\n</code></pre>\n"}], "owner": {"reputation": 580, "user_id": 10583056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/619ba4fa36b561fe9084bfe4fc6581b2?s=128&d=identicon&r=PG&f=1", "display_name": "TH14", "link": "https://stackoverflow.com/users/10583056/th14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 54226483, "answer_count": 2, "score": -1, "last_activity_date": 1547691367, "creation_date": 1547677121, "last_edit_date": 1547677270, "question_id": 54226253, "link": "https://stackoverflow.com/questions/54226253/use-re-findall-to-extract-id-at-the-end-of-a-url", "title": "Use re.findall to extract id at the end of a URL", "body": "<pre><code>sfdc_url= 'https://unify.my.salesforce.com/a0n82000006VlNaPPP'\n\nsfdc_partnerid= re.findall(r'https://unify.my.salesforce.com/(.*?)?sr',sfdc_url)\n</code></pre>\n\n<p>I want sfdc_partnerid to return \"a0n82000006VlNaPPP\"</p>\n\n<p>I keep getting an empty [] result.</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 10230, "user_id": 1150718, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ptFDl.jpg?s=128&g=1", "display_name": "Sethen", "link": "https://stackoverflow.com/users/1150718/sethen"}, "edited": false, "score": 0, "creation_date": 1547694116, "post_id": 54227400, "comment_id": 95282352, "body": "I see... Is there no DRF fancy way to do this?"}, {"owner": {"reputation": 10230, "user_id": 1150718, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ptFDl.jpg?s=128&g=1", "display_name": "Sethen", "link": "https://stackoverflow.com/users/1150718/sethen"}, "edited": false, "score": 0, "creation_date": 1547745893, "post_id": 54227400, "comment_id": 95306862, "body": "No, nothing like that.  You can forget the <code>recently published</code> bit, that was just an example.  What I am trying to do is understand more of the basics and nested relationships with DRF.  This example may be overly simple."}], "tags": [], "owner": {"reputation": 621, "user_id": 1001646, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1320f54d6ef1678d9661c3fddaf5317?s=128&d=identicon&r=PG", "display_name": "Alex K", "link": "https://stackoverflow.com/users/1001646/alex-k"}, "is_accepted": true, "score": 2, "last_activity_date": 1547685028, "creation_date": 1547685028, "answer_id": 54227400, "question_id": 54226230, "link": "https://stackoverflow.com/questions/54226230/django-rest-framework-retrieving-lists-in-serializers/54227400#54227400", "title": "Django rest framework retrieving lists in serializers", "body": "<pre><code>class ArticleWithoutAuthorSerializer(ArticleSerializer):\n    # Prevent author field serialization and endless nesting\n    author = None\n\nclass AuthorSerializer(ModelSerializer):\n    articles = SerializerMethodField()\n\n    def get_articles(self, author):\n        # Five recently posted articles\n        articles = author.article_set.order_by('-published')[:5]\n        return ArticleWithoutAuthorSerializer(articles, many=True).data\n\n    class Meta:\n        model = Author\n</code></pre>\n"}], "owner": {"reputation": 10230, "user_id": 1150718, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ptFDl.jpg?s=128&g=1", "display_name": "Sethen", "link": "https://stackoverflow.com/users/1150718/sethen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 54227400, "answer_count": 1, "score": 0, "last_activity_date": 1547685028, "creation_date": 1547676994, "question_id": 54226230, "link": "https://stackoverflow.com/questions/54226230/django-rest-framework-retrieving-lists-in-serializers", "title": "Django rest framework retrieving lists in serializers", "body": "<p>Take the following example into account.  I have two models, one <code>Author</code> and one <code>Article</code>.  They look like so:</p>\n\n<pre><code># author.py\n\nfrom django.db import models\n\n\nclass Author(models.Model):\n    first_name = models.CharField(max_length=50)\n    last_name = models.CharField(max_length=50)\n\n    def __str__(self):\n        return self.first_name\n</code></pre>\n\n<pre><code># article.py\n\nfrom django.db import models\nfrom authors.models import Author\n\n\nclass Article(models.Model):\n    author = models.ForeignKey(Author, on_delete=models.CASCADE)\n    text = models.TextField()\n\n    def __str__(self):\n        return self.text\n</code></pre>\n\n<p>My serializers look like so:</p>\n\n<pre><code>from rest_framework import serializers\nfrom .models import Article\nfrom authors.serializers import AuthorSerializer\n\n\nclass ArticleSerializer(serializers.ModelSerializer):\n    author = AuthorSerializer()\n\n    class Meta:\n        model = Article\n        fields = '__all__'\n</code></pre>\n\n<pre><code>from rest_framework import serializers\nfrom .models import Author\n\nclass AuthorSerializer(serializers.ModelSerializer):\n    class Meta:\n        model = Author\n        fields = '__all__'\n</code></pre>\n\n<p>Now, if I wish to get articles from my API, that's simple.  Getting articles attaches the author and that's all well and good -- but how do I get the inverse?  For instance, if I want to get authors with the latest 5 articles that they have written?  So the intended output would be something like:</p>\n\n<pre><code>{\n    \"first_name\": \"Sethen\",\n    \"last_name\": \"Maleno\",\n    \"articles\": [\n      {\n          \"text\": \"some article\"\n      },\n      {\n          \"text\": \"another article\"\n      }\n    ]\n}\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "keras", "recurrent-neural-network"], "answers": [{"tags": [], "owner": {"reputation": 767, "user_id": 4332742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MkdSw.jpg?s=128&g=1", "display_name": "Anshul Rai", "link": "https://stackoverflow.com/users/4332742/anshul-rai"}, "is_accepted": true, "score": 1, "last_activity_date": 1547694412, "last_edit_date": 1547694412, "creation_date": 1547693973, "answer_id": 54228366, "question_id": 54226203, "link": "https://stackoverflow.com/questions/54226203/why-is-my-layer-output-not-the-same-dimensions-as-shown-in-my-model-summary/54228366#54228366", "title": "Why is my layer output not the same dimensions as shown in my model summary?", "body": "<p>In your error statement you can see that the error is caused when checking the <strong>target</strong> dimensions. Your model output without the flatten layer is of the shape <code>(None, 7, 7)</code> which is correctly shown in your model summary. The issue here is that your labels are of the shape <code>(None, 7)</code>, so Keras throws a <code>ValueError</code> (probably during backpropogation) as your labels have one less dimension than the output of your network. Keras was expecting a <code>(None, 7, 7)</code> from labels to match the dimensions of your activation layer, but received a <code>(None, 7)</code> instead. </p>\n\n<p>That is why using <code>model.add(Flatten())</code> before adding the dense layer works fine, as the target dimensions and outputs dimensions are both <code>(None, 7)</code>.</p>\n"}], "owner": {"reputation": 123, "user_id": 6589409, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3de09edfbc0f0e4a21c09197db66919b?s=128&d=identicon&r=PG&f=1", "display_name": "HereItIs", "link": "https://stackoverflow.com/users/6589409/hereitis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 54228366, "answer_count": 1, "score": 0, "last_activity_date": 1547694412, "creation_date": 1547676853, "question_id": 54226203, "link": "https://stackoverflow.com/questions/54226203/why-is-my-layer-output-not-the-same-dimensions-as-shown-in-my-model-summary", "title": "Why is my layer output not the same dimensions as shown in my model summary?", "body": "<p>I have managed to create a successful RNN that can predict the next letter in a sequence of letters. However, I can't work out why a solution to a problem I was having is working.</p>\n\n<p>My training data is of dimensions <code>(39000,7,7)</code></p>\n\n<p>My Model is as follows: </p>\n\n<pre><code>    model = Sequential()\n    model.add(SimpleRNN(7, input_shape = [7,7], return_sequences = True))\n    model.add(Flatten())\n    model.add(Dense(7)) \n    model.add(Activation('softmax'))\n    adam = optimizers.Adam(lr = 0.001)\n    model.compile(loss='categorical_crossentropy',optimizer=adam, metrics=['accuracy'])\n    model.summary()\n    return model\n\n\nLayer (type)                 Output Shape              Param #   \n=================================================================\nsimple_rnn_49 (SimpleRNN)    (None, 7, 7)              105       \n_________________________________________________________________\nflatten_14 (Flatten)         (None, 49)                0         \n_________________________________________________________________\ndense_49 (Dense)             (None, 7)                 350       \n_________________________________________________________________\nactivation_40 (Activation)   (None, 7)                 0         \n=================================================================\nTotal params: 455\nTrainable params: 455\nNon-trainable params: 0\n_________________________________________________________________\n</code></pre>\n\n<p>This works perfectly. My question is, why do I need the flatten layer? When I don't include it I get this model summary:</p>\n\n<pre><code>_________________________________________________________________\nLayer (type)                 Output Shape              Param #   \n=================================================================\nsimple_rnn_50 (SimpleRNN)    (None, 7, 7)              105       \n_________________________________________________________________\ndense_50 (Dense)             (None, 7, 7)              56        \n_________________________________________________________________\nactivation_41 (Activation)   (None, 7, 7)              0         \n=================================================================\nTotal params: 161\nTrainable params: 161\nNon-trainable params: 0\n_________________________________________________________________\n</code></pre>\n\n<p>followed by this error</p>\n\n<p><code>ValueError: Error when checking target: expected activation_41 to have 3 dimensions, but got array with shape (39000, 7)</code></p>\n\n<p>My Question is: when the model summary says the output of the dense layer should be (None, 7 , 7) in the second example, and the error message says activation level is expecting exactly such a 3D input, why is the dense layer actually outputting a tensor of shape <code>(39000,7)</code> as according to the error message? I realise the flatten() layer solves this by putting everything in 2D, but im confused as to why it doesn't work without it.</p>\n"}, {"tags": ["python", "tkinter", "tkinter-canvas"], "answers": [{"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 1, "last_activity_date": 1547677796, "creation_date": 1547677796, "answer_id": 54226377, "question_id": 54226164, "link": "https://stackoverflow.com/questions/54226164/how-do-i-move-multiple-objects-at-once-on-a-tkinter-canvas/54226377#54226377", "title": "How do I move multiple objects at once on a Tkinter canvas?", "body": "<p>This sounds like a job for <a href=\"http://effbot.org/tkinterbook/canvas.htm#item-specifiers\" rel=\"nofollow noreferrer\"><em>tags</em></a>.  You can tag your two objects similarly and then ask the canvas to move all objects tagged that way:</p>\n\n<pre><code>import tkinter as tk\nimport time\n\nroot = tk.Tk()\n\ncanvas = tk.Canvas(root)\ncanvas.pack()\n\ncanvas.create_oval(100, 105, 150, 150, tags=\"Bob\", fill='light blue', outline='green')\ncanvas.create_oval(200, 205, 150, 150, tags=\"Bob\", fill='light blue', outline='green')\n\nfor _ in range(50):\n    canvas.move(\"Bob\", 5, 0)\n    canvas.update()\n    time.sleep(0.05)\n\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10773645, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9jbY3820h-M/AAAAAAAAAAI/AAAAAAAAABI/6e4EM8TnhRM/photo.jpg?sz=128", "display_name": "Daniel Domingos", "link": "https://stackoverflow.com/users/10773645/daniel-domingos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1252, "favorite_count": 1, "accepted_answer_id": 54226377, "answer_count": 1, "score": -1, "last_activity_date": 1547677796, "creation_date": 1547676651, "question_id": 54226164, "link": "https://stackoverflow.com/questions/54226164/how-do-i-move-multiple-objects-at-once-on-a-tkinter-canvas", "title": "How do I move multiple objects at once on a Tkinter canvas?", "body": "<p>I have this code, which moves one of the two Tkinter canvas objects. How do I make it move both at the same time using canvas.move()?</p>\n\n<pre><code>canvas.create_oval(100, 105, 150, 150, fill = 'light blue', \\\n                    outline = 'green')\n\ncanvas.create_oval(200, 205, 150, 150, fill= 'light blue', \\\n                    outline = 'green')\n\ntkinter.update()\n\nfor x in range (1, 100):\n    canvas.move(1, 5, 0)\n    tkinter.update()\n    time.sleep(0.05)\n</code></pre>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1547681701, "post_id": 54226139, "comment_id": 95279996, "body": "Sometimes (many times) printing <i>stuff</i> can help diagnose a problem - see my edit."}], "answers": [{"comments": [{"owner": {"reputation": 99, "user_id": 9678850, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jane P", "link": "https://stackoverflow.com/users/9678850/jane-p"}, "edited": false, "score": 0, "creation_date": 1547677215, "post_id": 54226204, "comment_id": 95278482, "body": "Thank you. How do I iterate over each element in the nested list? This is I think where my struggle is."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 99, "user_id": 9678850, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jane P", "link": "https://stackoverflow.com/users/9678850/jane-p"}, "edited": false, "score": 0, "creation_date": 1547677305, "post_id": 54226204, "comment_id": 95278531, "body": "That&#39;s another loop, something like <code>for score in names[1:]</code>"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 0, "last_activity_date": 1547676855, "creation_date": 1547676855, "answer_id": 54226204, "question_id": 54226139, "link": "https://stackoverflow.com/questions/54226139/getting-a-student-name-from-the-matrix/54226204#54226204", "title": "getting a student name from the matrix", "body": "<pre><code>student_list.append[names[0]]\n</code></pre>\n\n<p>The problem is that you're currently grabbing exactly the same list element on each iteration, without regard to the iteration.</p>\n\n<p>Also, there's no real reason to force the column headers into your grade book -- let that be a <code>print</code> add-on detail when you print your data in that particular format.</p>\n\n<pre><code>student_grades = [\n    ['Jane', '100', '90', '80'],\n    ['Susan', '88', '99', '111'],\n    ['Dick', '45', '56', '67']\n]\nstudent_list = []\nfor names in student_grades:\n    student_list.append(names[0])\n\nprint(student_list)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['Jane', 'Susan', 'Dick']\n</code></pre>\n\n<p>Finally, I expect that you'll want to keep the scores as integers, rather than strings.</p>\n"}, {"tags": [], "owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "is_accepted": false, "score": 0, "last_activity_date": 1547676988, "creation_date": 1547676988, "answer_id": 54226227, "question_id": 54226139, "link": "https://stackoverflow.com/questions/54226139/getting-a-student-name-from-the-matrix/54226227#54226227", "title": "getting a student name from the matrix", "body": "<p>You need to get index</p>\n\n<pre><code>student_list = []\nfor idx in range(len(student_grades)):\n    student_list.append(student_grades[idx][0])\n\nprint(student_list)#['Student', 'Jane', 'Susan', 'Dick']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 10827484, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DN47zslsbS0/AAAAAAAAAAI/AAAAAAAAAfs/dN0-P3yYMmg/photo.jpg?sz=128", "display_name": "Mason Hawver", "link": "https://stackoverflow.com/users/10827484/mason-hawver"}, "is_accepted": false, "score": 0, "last_activity_date": 1547677389, "creation_date": 1547677389, "answer_id": 54226304, "question_id": 54226139, "link": "https://stackoverflow.com/questions/54226139/getting-a-student-name-from-the-matrix/54226304#54226304", "title": "getting a student name from the matrix", "body": "<p>Do you know what nested loops are?</p>\n\n<p>if not continue -></p>\n\n<p>first a nested loop is a loop inside a loop so the first loop would iterate through the each list in the List of lists, then the second loop inside the first loop would iterate through every object in that list (exam score).</p>\n\n<p>ex:</p>\n\n<pre><code>lst = [['Jane', 100, 90, 80], ['Susan', '88', '99', '111'], ['Dick', 46, 56, 67]]\nstd_lst = []\nfor i in lst:\n   # i is the list now like (['Jane', 100, 90, 80])\n   std_lst.append(i[0])\n\n# std_lst = ['Jane', 'Susan', 'Dick']\n</code></pre>\n"}], "owner": {"reputation": 99, "user_id": 9678850, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jane P", "link": "https://stackoverflow.com/users/9678850/jane-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 54226204, "answer_count": 3, "score": 0, "last_activity_date": 1547681644, "creation_date": 1547676571, "last_edit_date": 1547681644, "question_id": 54226139, "link": "https://stackoverflow.com/questions/54226139/getting-a-student-name-from-the-matrix", "title": "getting a student name from the matrix", "body": "<p>I am learning python and working on assignment to get a new_list of student names from a student_grades list, which is in the form of matrix.</p>\n\n<p>I was able to get it to the point where I got the first name from the list but can't figure out how to complete the loop so it iterates over every name on the matrix. Thank you.</p>\n\n<pre><code>student_grades = [\n    ['Student', 'Exam 1', 'Exam 2', 'Exam 3'],\n    ['Jane', '100', '90', '80'],\n    ['Susan', '88', '99', '111'],\n    ['Dick', '45', '56', '67']\n]\nstudent_list = []\nfor names in student_grades:\n    #print(names)\n    student_list.append(student_grades[1][0])\n\nprint(student_list)\n\n['Jane', 'Jane', 'Jane', 'Jane']\n</code></pre>\n"}, {"tags": ["python", "numpy", "scipy", "sparse-matrix"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1547678658, "post_id": 54226138, "comment_id": 95279035, "body": "If the input arrays have the correct shape and dtype, it will use them directly without making copies. I haven&#39;t studied the <code>csr_matrix</code> code enough to help with the details. Conversion from <code>coo</code> requires a lexsort, which may be costly. If you can read the python code you probably are already ahead of most us."}], "answers": [{"tags": [], "owner": {"reputation": 687, "user_id": 3901216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6133069a70b73d84f51e886a6139e898?s=128&d=identicon&r=PG&f=1", "display_name": "tch", "link": "https://stackoverflow.com/users/3901216/tch"}, "is_accepted": false, "score": 0, "last_activity_date": 1547680283, "last_edit_date": 1547680283, "creation_date": 1547679765, "answer_id": 54226695, "question_id": 54226138, "link": "https://stackoverflow.com/questions/54226138/constructing-sparse-csr-matrix-directly-vs-using-coo-tocsr-scipy/54226695#54226695", "title": "Constructing Sparse CSR Matrix Directly vs Using COO tocsr() - Scipy", "body": "<p>It looks like your output has only the first <code>W-1</code> rows of test data. I'm not sure if this is intentional or not. My solutions assumes you want to use all of <code>testdata</code>.</p>\n\n<p>When you construct the COO matrix are you also constructing the indices and data in a similar way?</p>\n\n<p>One thing which might speed up constructing the <code>csr_matrix</code> is to use built in numpy functions to generate the data for the <code>csr_matrix</code> rather than python loops and arrays. I would expect this to improve the speed of generating the indices significantly. You can adjust the dtype to different type of int depending on the size of your matrix.</p>\n\n<pre><code>N = 4\nW = 8\ntestdata = np.random.randn(N,W)\n\nptrs = N*np.arange(W*N+1,dtype='int')\nindices =  np.tile(np.arange(N*N,dtype='int'),W)\ndata = np.tile(testdata,N).flatten()\n\nHshape = ((N*W, N**2))\nH = csr_matrix((data, indices, ptrs), shape=Hshape)\n</code></pre>\n\n<p>Another possibility is to first construct the large array, and then define each of the <code>N</code> vertical column blocks at once. This means that you don't need to make a ton of copies of the original data before you put it into the sparse matrix. However, it may be slow to convert the matrix type.</p>\n\n<pre><code>N = 4\nW = 8\ntestdata = np.random.randn(N,W)\n\nHshape = ((N*W, N**2))\nH = sp.sparse.lol_matrix(Hshape)\n\nfor j in range(N): \n    H[N*np.arange(W)+j,N*j:N*(j+1)] = testdata.T\n\nH = H.tocsc()\n</code></pre>\n"}], "owner": {"reputation": 889, "user_id": 3654588, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2985e0dc64656761448aa31fee11c97d?s=128&d=identicon&r=PG&f=1", "display_name": "ajl123", "link": "https://stackoverflow.com/users/3654588/ajl123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1359, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547680283, "creation_date": 1547676571, "question_id": 54226138, "link": "https://stackoverflow.com/questions/54226138/constructing-sparse-csr-matrix-directly-vs-using-coo-tocsr-scipy", "title": "Constructing Sparse CSR Matrix Directly vs Using COO tocsr() - Scipy", "body": "<p>My goal here is to build the sparse CSR matrix very fast. It is currently the main bottleneck in my process, and I've already optimized it by constructing the coo matrix relatively fast, and then using tocsr().</p>\n\n<p>However, I would imagine that constructing the csr matrix directly must be faster?</p>\n\n<p>I have a very specific format of a sparse matrix that is also large (i.e. on orders of 100000x50000). I've looked online at these other answers, but most are not addressing the question I have.</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/42349191/efficiently-construct-fem-fvm-matrix\">Efficiently construct FEM/FVM matrix</a>\nLooks at constructing a very specific formatted sparse matrix vs using coo, which led to a scipy merge improvement on the speed of tocsr().</li>\n</ul>\n\n<p><strong>Sparse Matrix Structure:</strong></p>\n\n<p>The sparse matrix, H,  is comprised of W lists of size N, or built from an initial array of size NxW, lets call it A. Along the diagonal are repeating lists of size N for N times. So for the first N rows of H, is A[:,0] repeated, but sliding along N steps for each row.</p>\n\n<p><strong>Comparison to COO.tocsr()</strong></p>\n\n<p>When I scale up N and W, and build up the COO matrix first, then running tocsr(), it is actually faster then just building the CSR matrix directly. I'm not sure why this would be the case? I am wondering if perhaps I can take advantage of the structure of my sparse matrix H in some way? Since there are many repeating elements in there.</p>\n\n<p><strong>Code Sample</strong></p>\n\n<p>Here is a code sample to visualize what is going on for a small sample size:</p>\n\n<pre><code>from scipy.sparse import linalg, dok_matrix, coo_matrix, csr_matrix\nimport numpy as np\nimport matplotlib.pyplot as plt\n\ndef test_csr(testdata):\n    indices = [x for _ in range(W-1) for x in range(N**2)]\n    ptrs = [N*(i) for i in range(N*(W-1))]\n    ptrs.append(len(indices))\n\n    data = []\n    # loop along the first axis\n    for i in range(W-1):\n        vec = testdata[:,i].squeeze()\n\n        # repeat vector N times\n        for i in range(N):\n            data.extend(vec)\n\n    Hshape = ((N*(W-1), N**2))\n    H = csr_matrix((data, indices, ptrs), shape=Hshape)\n    return H\n\nN = 4\nW = 8\n\ntestdata = np.random.randn(N,W)\nprint(testdata.shape)\nH = test_csr(testdata)\nplt.imshow(H.toarray(), cmap='jet')\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ZFwFL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZFwFL.png\" alt=\"Figure that shows the repeating structure of the sparse matrix\"></a></p>\n"}, {"tags": ["python", "pandas", "dataframe", "indexing", "interpolation"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 2, "creation_date": 1547676634, "post_id": 54226124, "comment_id": 95278257, "body": "I think you just want <code>df.pivot(&#39;Time&#39;, &#39;Data_Name&#39;, &#39;Values&#39;).fillna(0)</code>, but I think your desired output is off."}, {"owner": {"reputation": 594, "user_id": 10719369, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mari", "link": "https://stackoverflow.com/users/10719369/mari"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1547716699, "post_id": 54226124, "comment_id": 95289949, "body": "Yes I got the usage of pivot. Thank you so much ...."}], "owner": {"reputation": 594, "user_id": 10719369, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Mari", "link": "https://stackoverflow.com/users/10719369/mari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "closed_date": 1547676849, "answer_count": 0, "score": 0, "last_activity_date": 1547676501, "creation_date": 1547676501, "question_id": 54226124, "link": "https://stackoverflow.com/questions/54226124/how-to-extract-the-values-from-a-pandas-data-frame-column-to-new-data-frame-with", "closed_reason": "Duplicate", "title": "How to extract the values from a pandas data frame column to new data frame with the help of Indexing?", "body": "<p>I am a learner in using pandas in python.</p>\n\n<p>I have a millions of driving data signals received from Vehicle in csv format.\nExample : Vehicle Speed, Brake pressure etc. at different Time intervals</p>\n\n<p>Sample Data : (For reference, I used only 2 Data_Names &amp; sample Values )</p>\n\n<pre><code>Time      Data_Name         Values\n0.5       Vehicle_Speed     10\n1         Brake_Pressure    12\n2         Vehicle_Speed     30  \n3         Vehicle_Speed     40\n4         Vehicle_Speed     50\n5         Brake_Pressure    10\n6         Brake_Pressure    15\n7         Vehicle_Speed     30\n8         Brake_Pressure    15     \n9         Brake_Pressure    20\n10        Vehicle_Speed     25\n</code></pre>\n\n<p>Requirements :</p>\n\n<p>1st Requirement is : I want the above data to be in the below form. </p>\n\n<pre><code> Time      Vehicle_Speed_Values       Brake_pressure_Value          \n    0.5       50                      0\n    1         0                       12\n    2         30                      0  \n    3         40                      0\n    4         50                      0\n    5         0                       10\n    6         0                       15\n    7         30                      0\n    8         0                       15     \n    9         0                       20\n    10        25                      0\n</code></pre>\n\n<p>2nd Requirement : interpolate it there by filling the zero values corresponds to time.\n3rd : plotting  Vehicle_Speed (Vs) Brake Pressure graph for comparison </p>\n\n<p>My code :</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\n\n# Time Data\nb1 = pd.Dataframe([0.5,2,3,4,7,25])\n\n# Vehicle_Speed_Values       \nb2 = pd.Dataframe([50,30,40,50,30,25])\n\n# Combine two data frames\nd1 = pd.concat([b1,b2], axis=1)\n# Name the columns\nd1.columns = [\"Time\",\"Speed\"]\n\n# Create a new data frame with column Names as Vehicle_Speed_Values&amp; Brake_pressure_Value filled with zeros\na = pd.Dataframe([0.5,1,2,3,4,5,6,7,8,9,10])\na.columns = [\"Time\"]\nalength = len(a[\"Time\"])\na[\"Vehicle_Speed_Values\"] = pd.Series(np.zeros(alength), index =a.index)\na[\"Brake_pressure_Value\"] = pd.Series(np.zeros(alength), index =a.index)\n\n# using for loop and index functions copy the value from d1 (data frame)to a (dataframe)\n\nfor i in range(len(d1.index)):\n    if d1.Time[i] in a[\"Time\"]:\n        j = d1.Time[i]\n        find_index = a.loc[a[\"Time\"] == j].index[0]\n        a.Vehicle_Speed_Values[find_index] = d1.Speed[i]\n</code></pre>\n\n<p>Problem facing :\nOn execution Warning message displayed.(SettingWithCopyWarnings)\nEven though i get the result as expected but for large data set of 10 million values, Warning messages displayed and I cannot able to proceed further.</p>\n\n<p>Requests : </p>\n\n<p>I am not a good coder, any way i am sure that there will be some easy way to do the above process..\nKindly shed some light to avoid this problem or a new way to approach...</p>\n"}, {"tags": ["python", "anaconda"], "owner": {"reputation": 11, "user_id": 241094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cecbdba5e9edda47d16259dbbcc80d5?s=128&d=identicon&r=PG", "display_name": "Glenn", "link": "https://stackoverflow.com/users/241094/glenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547676407, "creation_date": 1547676407, "question_id": 54226117, "link": "https://stackoverflow.com/questions/54226117/anaconda3-install-hanging-on-install-py", "title": "Anaconda3 install hanging on install.py", "body": "<p>I've tried everything I know to install Anaconda3 64 bit on a Windows 10 system that takes automatic updates. It is hanging at this line:</p>\n\n<p>\"Execute: \"d:\\Anaconda3\\tFF16.tmp.dir\\pythonw.exe\" -E -s \"d:\\Anaconda3\\pkgs.install.py\"\"</p>\n\n<p>I've removed all path entries for python. Disabled my anti-virus (ESET). Tried the 32 bit version. </p>\n\n<p>As part of my own attempt to find the problem, I deleted the directory without ending the install program and the following file was locked:</p>\n\n<p>conda-build-3.17.6.py37_0</p>\n\n<p>When I looked with the task manager, it said Python.exe was in a suspended state. </p>\n\n<p>Any advice at all? I've been at this for two days, off and on.</p>\n"}, {"tags": ["python", "pandas", "datediff", "nearest-neighbor", "date-difference"], "comments": [{"owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "edited": false, "score": 0, "creation_date": 1547676742, "post_id": 54226075, "comment_id": 95278293, "body": "mmm why is the second A3 not 163? What criteria do you use for that?"}], "answers": [{"comments": [{"owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "edited": false, "score": 0, "creation_date": 1547676965, "post_id": 54226216, "comment_id": 95278374, "body": "Why is the second A3 26 instead of 163? I mean its the same as OPs ouput, just dont get why it is so"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "edited": false, "score": 1, "creation_date": 1547677030, "post_id": 54226216, "comment_id": 95278396, "body": "@yatu min of diff among all the Dates different"}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "reply_to_user": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "edited": false, "score": 0, "creation_date": 1547677139, "post_id": 54226216, "comment_id": 95278443, "body": "@yatu, its not as straight-forward as groupby and diff. The OP wants the nearest point from each point in a group"}, {"owner": {"reputation": 74809, "user_id": 9698684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Hj2XY.jpg?s=128&g=1", "display_name": "yatu", "link": "https://stackoverflow.com/users/9698684/yatu"}, "edited": false, "score": 0, "creation_date": 1547677145, "post_id": 54226216, "comment_id": 95278445, "body": "Ah, get now the idea of <code>nearest</code>, got it. Thanks"}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 0, "creation_date": 1547677267, "post_id": 54226216, "comment_id": 95278514, "body": "@W-B, Great use of array reshaping"}, {"owner": {"reputation": 1168, "user_id": 8593338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d52b142a7c677195e5f55a06afbe4fd6?s=128&d=identicon&r=PG&f=1", "display_name": "abcdaire", "link": "https://stackoverflow.com/users/8593338/abcdaire"}, "edited": false, "score": 0, "creation_date": 1547684358, "post_id": 54226216, "comment_id": 95280588, "body": "Just a small warning concerning this code, take the first row of A3 and move it to the end of the DataFrame, then run the method , you&#39;ll see that the result is wrong. In order to don&#39;t have any surprise by using this code you have to sort by A_key first and don&#39;t care about your current index (because the resulting ordering will be based depending on which group the groupby method takes)"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 1168, "user_id": 8593338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d52b142a7c677195e5f55a06afbe4fd6?s=128&d=identicon&r=PG&f=1", "display_name": "abcdaire", "link": "https://stackoverflow.com/users/8593338/abcdaire"}, "edited": false, "score": 0, "creation_date": 1547684439, "post_id": 54226216, "comment_id": 95280598, "body": "@abcdaire sort it before doing my method"}, {"owner": {"reputation": 1168, "user_id": 8593338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d52b142a7c677195e5f55a06afbe4fd6?s=128&d=identicon&r=PG&f=1", "display_name": "abcdaire", "link": "https://stackoverflow.com/users/8593338/abcdaire"}, "edited": false, "score": 0, "creation_date": 1547684692, "post_id": 54226216, "comment_id": 95280648, "body": "Yes, but even if you sort , if your original index is meaningful for you, it will be lost, I just want to warn about that :) But nice method !"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 1168, "user_id": 8593338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d52b142a7c677195e5f55a06afbe4fd6?s=128&d=identicon&r=PG&f=1", "display_name": "abcdaire", "link": "https://stackoverflow.com/users/8593338/abcdaire"}, "edited": false, "score": 1, "creation_date": 1547685892, "post_id": 54226216, "comment_id": 95280890, "body": "@abcdaire this can be solved, save original index as  idx, then sort_values with A_Key, then doing what I doing above , then reindex with idx for the output dataframe"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 3, "last_activity_date": 1547676932, "creation_date": 1547676932, "answer_id": 54226216, "question_id": 54226075, "link": "https://stackoverflow.com/questions/54226075/nearest-neighbor-distance-for-k-1-in-units-of-time/54226216#54226216", "title": "Nearest neighbor distance for k=1 in units of time", "body": "<p>This base up on the <code>groupby</code> to split your original df into small unique key dataframe , then we using <code>numpy</code> broadcast to speed up the whole calculation </p>\n\n<pre><code>df.Date=pd.to_datetime(df.Date)\nl=[]\nfor _, x in df.groupby('A_key'):\n    s=np.abs((x['Date'].values - x['Date'].values[:,None])).astype('timedelta64[D]').astype(int)\n    s[[np.arange(len(s))] * 2]=9999\n    l.append(np.min(s,1))\n\ndf['New']=np.concatenate(l)\ndf\nOut[501]: \n  A_key       Date  New\n0    A1 2016-05-03  145\n1    A1 2016-09-25  145\n2    A2 2015-02-25    0\n3    A2 2015-02-25    0\n4    A3 2015-10-04  163\n5    A3 2016-03-15   26\n6    A3 2016-04-10   26\n7    A4 2015-09-26    0\n8    A4 2015-09-26    0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 8396429, "user_type": "registered", "profile_image": "https://graph.facebook.com/1978842225736094/picture?type=large", "display_name": "Jim Mirzakhalov", "link": "https://stackoverflow.com/users/8396429/jim-mirzakhalov"}, "is_accepted": false, "score": 0, "last_activity_date": 1547677011, "creation_date": 1547677011, "answer_id": 54226234, "question_id": 54226075, "link": "https://stackoverflow.com/questions/54226075/nearest-neighbor-distance-for-k-1-in-units-of-time/54226234#54226234", "title": "Nearest neighbor distance for k=1 in units of time", "body": "<p>You could convert the dates to Epoch using this code:</p>\n\n<pre><code>import time\ndate_time = '2016-05-03 00:00:00'\npattern = '%Y-%m-`enter code here`%d %H:%M:%S'\nepoch = int(time.mktime(time.strptime(date_time, pattern)))\n</code></pre>\n\n<p>Then, simply subtract the value from its neighbor value. Note, the result is going to be in milliseconds, so you will have to divide by (1000*60*60*24) to convert it to days.</p>\n"}, {"comments": [{"owner": {"reputation": 531, "user_id": 7933418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec40b228d90adc86ec949347733d2e1?s=128&d=identicon&r=PG&f=1", "display_name": "iprof0214", "link": "https://stackoverflow.com/users/7933418/iprof0214"}, "edited": false, "score": 0, "creation_date": 1547677996, "post_id": 54226368, "comment_id": 95278823, "body": "Thanks, but its not just distance between consecutive dates, for a given A_key if there are three records, for each record compute its distance in time with the other two and pick the minimum which represents the nearest neighbor distance"}, {"owner": {"reputation": 730, "user_id": 8870514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420af7caaee71119a67f7296a7fd3ed?s=128&d=identicon&r=PG", "display_name": "claude31", "link": "https://stackoverflow.com/users/8870514/claude31"}, "reply_to_user": {"reputation": 531, "user_id": 7933418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec40b228d90adc86ec949347733d2e1?s=128&d=identicon&r=PG&f=1", "display_name": "iprof0214", "link": "https://stackoverflow.com/users/7933418/iprof0214"}, "edited": false, "score": 0, "creation_date": 1547750747, "post_id": 54226368, "comment_id": 95309129, "body": "Right, unless the array is already ordered ; then need to compare with previous and next dates (if exist) only ; all others will be further than this one ; and as abcdaire is looking for the closest\u2026"}], "tags": [], "owner": {"reputation": 730, "user_id": 8870514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e420af7caaee71119a67f7296a7fd3ed?s=128&d=identicon&r=PG", "display_name": "claude31", "link": "https://stackoverflow.com/users/8870514/claude31"}, "is_accepted": false, "score": 0, "last_activity_date": 1547677739, "creation_date": 1547677739, "answer_id": 54226368, "question_id": 54226075, "link": "https://stackoverflow.com/questions/54226075/nearest-neighbor-distance-for-k-1-in-units-of-time/54226368#54226368", "title": "Nearest neighbor distance for k=1 in units of time", "body": "<p>You have already sorted by date in each key.\nSo all you need is compute the distance to the next and previous date in the same key.\nI tried this (in Swift) to compute distance between 2 dates as formatted as 2015-05-22</p>\n\n<pre><code>func dist(_ d1: String, _ d2: String) -&gt; Int {\n    let dateFormatter = DateFormatter()\n    dateFormatter.dateFormat = \"YYYY-MM-DD\"\n\n    if let date1 = dateFormatter.date(from: d1), let date2 = dateFormatter.date(from: d2) {\n        let distance = date1.timeIntervalSince(date2) / 86400\n        return abs(Int(distance))\n    } else { return 0 }\n}\n\nprint(dist(\"2015-05-25\", \"2015-05-22\"))\n</code></pre>\n\n<p>You can now loop through the values in one key to compute the minimum distance for a given key (except itself of course)</p>\n"}, {"tags": [], "owner": {"reputation": 1168, "user_id": 8593338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d52b142a7c677195e5f55a06afbe4fd6?s=128&d=identicon&r=PG&f=1", "display_name": "abcdaire", "link": "https://stackoverflow.com/users/8593338/abcdaire"}, "is_accepted": false, "score": 0, "last_activity_date": 1547682543, "last_edit_date": 1547682543, "creation_date": 1547681905, "answer_id": 54227013, "question_id": 54226075, "link": "https://stackoverflow.com/questions/54226075/nearest-neighbor-distance-for-k-1-in-units-of-time/54227013#54227013", "title": "Nearest neighbor distance for k=1 in units of time", "body": "<p>Hi here is a possible solution using only Pandas </p>\n\n<p>Let's give the current index a name (for convenience and be sure that we recover everything well)</p>\n\n<pre><code>df['Date'] = df['Date'].astype('datetime64[ns]')\ndf.index.name = 'id'\n</code></pre>\n\n<p>We are first going to sort by date and apply a function to each group,\nit is important to note that we are going to rely on the fact that pandas preserve the row order inside a group (see documentation)</p>\n\n<pre><code>sorted_df = sorted_df = df.sort_values('Date')\nresult_df = sorted_df.groupby('A_key').apply(nearest_date_distance)\n</code></pre>\n\n<p>So now let see what we have inside the <code>nearest_date_distance</code> function\nThe function relies on the fact that the Date will be sorted , therefore we compute the time to the date before and the time to the date after, the difference between the current day and the next day is negative that's why we add the <code>.abs()</code>.Finally we take the minimum between these two distances (btw the min operator won't take the missing value (NaT) that you have for the first row of time_to_before and last row of time to after)</p>\n\n<pre><code>def nearest_date_distance(sub):\n    time_to_before = sub['Date'].diff()\n    time_to_after = sub['Date'].diff(-1).abs()\n    nearest_date_distance = pd.concat([time_to_before, time_to_after],axis=1).min(axis=1)\n    nearest_date_distance.name = 'Distance'\n    return nearest_date_distance\n</code></pre>\n\n<p>Finally I lied a bit <code>result_df</code> will be a MultiIndex Serie (not a dataframe) of this form:</p>\n\n<pre><code>A_key  id\nA1     0    145 days\n       1    145 days\nA2     2      0 days\n       3      0 days\nA3     4    163 days\n       5     26 days\n       6     26 days\nA4     7      0 days\n       8      0 days\n</code></pre>\n\n<p>We can easily convert it to a DataFrame and having a proper naming for our original index helps to see that everything is indexed the same as in the original df.</p>\n\n<pre><code>result_df =sorted_df.groupby('A_key').apply(nearest_date_distance).reset_index(level=0)\n\n    A_key   Distance\nid      \n0   A1  145 days\n1   A1  145 days\n2   A2  0 days\n3   A2  0 days\n4   A3  163 days\n5   A3  26 days\n6   A3  26 days\n7   A4  0 days\n8   A4  0 days\n</code></pre>\n\n<p>and if you need the Date on the resulting Dataframe <code>result_df['Date'] = df['Date']</code>should do the trick :)</p>\n"}], "owner": {"reputation": 531, "user_id": 7933418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec40b228d90adc86ec949347733d2e1?s=128&d=identicon&r=PG&f=1", "display_name": "iprof0214", "link": "https://stackoverflow.com/users/7933418/iprof0214"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 54226216, "answer_count": 4, "score": 2, "last_activity_date": 1547682543, "creation_date": 1547676157, "question_id": 54226075, "link": "https://stackoverflow.com/questions/54226075/nearest-neighbor-distance-for-k-1-in-units-of-time", "title": "Nearest neighbor distance for k=1 in units of time", "body": "<p>I have the following dataframe</p>\n\n<pre><code>A_key      Date\n      A1      2016-05-03\n      A1      2016-09-25\n      A2      2015-02-25\n      A2      2015-02-25\n      A3      2015-10-04\n      A3      2016-03-15\n      A3      2016-04-10\n      A4      2015-09-26\n      A4      2015-09-26\n</code></pre>\n\n<p>I want to obtain the nearest neighbor distance for each distinct A_key in units of days for n_neighbor(k) = 1 such that the output looks like the following</p>\n\n<pre><code>      A_key      Date       Distance\n      A1      2016-05-03     145\n      A1      2016-09-25     145\n      A2      2015-02-25     0\n      A2      2015-02-25     0\n      A3      2015-10-04     163\n      A3      2016-03-15     26\n      A3      2016-04-10     26\n      A4      2015-09-26     0\n      A4      2015-09-26     0\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "dictionary"], "comments": [{"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 1, "creation_date": 1547676237, "post_id": 54226054, "comment_id": 95278071, "body": "Just to confirm all the times are on the hour? Won&#39;t see any <code>09:30</code>?"}, {"owner": {"reputation": 87, "user_id": 8560410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/onbO7.jpg?s=128&g=1", "display_name": "CodeRedacted", "link": "https://stackoverflow.com/users/8560410/coderedacted"}, "reply_to_user": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1547676927, "post_id": 54226054, "comment_id": 95278362, "body": "@hqkhan correct"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 8560410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/onbO7.jpg?s=128&g=1", "display_name": "CodeRedacted", "link": "https://stackoverflow.com/users/8560410/coderedacted"}, "edited": false, "score": 0, "creation_date": 1547828178, "post_id": 54226152, "comment_id": 95339572, "body": "Slightly confused by the remark &quot;use them to initialize a defaultdict that will return zeros for the missing times:&quot; as in the example output, the &#39;missing hours&#39; aren&#39;t shown; But I may have misunderstood the intent."}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "reply_to_user": {"reputation": 87, "user_id": 8560410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/onbO7.jpg?s=128&g=1", "display_name": "CodeRedacted", "link": "https://stackoverflow.com/users/8560410/coderedacted"}, "edited": false, "score": 1, "creation_date": 1547828585, "post_id": 54226152, "comment_id": 95339768, "body": "@CodeRedacted So this has to do with the way <code>defaultdict</code> works. It will initialize your value to something if the <code>key</code> you tried wasn&#39;t in fact inside the <code>dict</code>. For instance if <code>test = {1: 20, 2: 25}</code>. Assuming <code>test</code> is a <code>defaultdict</code>, you tried issuing <code>test[15]</code>, even though <code>15</code> doesn&#39;t exist inside <code>test</code>, you will get back <code>0</code> and not a <code>KeyError</code>. The same behavior can be done using <code>.get(key, default_value)</code> I believe but <code>defaultdict</code> makes things look neat."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 1, "creation_date": 1547831096, "post_id": 54226152, "comment_id": 95341015, "body": "@hqkhan. The advantage of <code>defaultdict</code> over <code>get</code> or <code>setdefault</code> is that <code>defaultdict</code> only calls the constructor you pass in when the key is missing. With the <code>dict</code> methods, you call the constructor every time, before calling the method, resulting in usually harmless but unnecessary overhead."}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1547831228, "post_id": 54226152, "comment_id": 95341077, "body": "@MadPhysicist Nice. Good to know."}, {"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "reply_to_user": {"reputation": 87, "user_id": 8560410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/onbO7.jpg?s=128&g=1", "display_name": "CodeRedacted", "link": "https://stackoverflow.com/users/8560410/coderedacted"}, "edited": false, "score": 1, "creation_date": 1547832095, "post_id": 54226152, "comment_id": 95341495, "body": "@CodeRedacted. A defaultdict only shows the keys you set, but it allows you to query any key at all. <code>dtd[&#39;blah&#39;]</code> will return <code>[]</code>, while <code>dtd[03&#47;01&#47;19][&#39;blah&#39;]</code> will return 0. Since it makes sense that you wouldn&#39;t want to have this happen for arbitrary times and dates, I&#39;ve added a snippet to quickly convert to a normal nested dictionary to my answer."}], "tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": false, "score": 2, "last_activity_date": 1547831948, "last_edit_date": 1547831948, "creation_date": 1547676618, "answer_id": 54226152, "question_id": 54226054, "link": "https://stackoverflow.com/questions/54226054/create-dictionary-of-dicts-from-a-single-list-python3/54226152#54226152", "title": "Create dictionary of dicts from a single list - Python3", "body": "<p>You could combine a <a href=\"https://docs.python.org/3/library/collections.html#collections.Counter\" rel=\"nofollow noreferrer\"><code>Counter</code></a> with a <a href=\"https://docs.python.org/3/library/collections.html#collections.defaultdict\" rel=\"nofollow noreferrer\"><code>defaultdict</code></a> to do this pretty effectively once you have split into a dictionary by date. So first split by date:</p>\n\n<pre><code>from collections import Counter, defaultdict\n\ndtd = defaultdict(list)\nfor date, time in (item.split() for item in dtl):\n    dtd[date].append(time[:2])\n</code></pre>\n\n<p>Now you can easily count the existing items, and use them to initialize a <code>defaultdict</code> that will return zeros for the missing times:</p>\n\n<pre><code>for key in dtd:\n    dtd[key] = defaultdict(int, Counter(dtd[key]))\n</code></pre>\n\n<p>The result is:</p>\n\n<pre><code>defaultdict(list, {\n    '03/01/19': defaultdict(int, {\n        '09': 3,\n        '10': 2,\n        '11': 1,\n        '12': 5,\n        '17': 1,\n        '21': 1\n    }),\n    '05/01/19': defaultdict(int, {'14': 1, '17': 2, '21': 1}),\n    '06/01/19': defaultdict(int, {'11': 1, '12': 2})\n})\n</code></pre>\n\n<p>Since the objects here are <code>defaultdict</code>s, you will be able to query dates and times that were not in the original dataset. You can avoid this by converting the result to a regular <code>dict</code> containing only the keys you want after you finish:</p>\n\n<pre><code>hours = ['%02d' % h for h in range(24)]\ndtd = {date: {h: d[h] for h in hours} for date, d in dtd}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 8560410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/onbO7.jpg?s=128&g=1", "display_name": "CodeRedacted", "link": "https://stackoverflow.com/users/8560410/coderedacted"}, "edited": false, "score": 0, "creation_date": 1547828030, "post_id": 54226183, "comment_id": 95339493, "body": "Both this answer and that by @mad-physicist are to the point and extremely helpful, but this one has the edge for me as it provides for filling the &#39;empty&#39; values in the final dict."}], "tags": [], "owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "is_accepted": true, "score": 2, "last_activity_date": 1547678586, "last_edit_date": 1547678586, "creation_date": 1547676746, "answer_id": 54226183, "question_id": 54226054, "link": "https://stackoverflow.com/questions/54226054/create-dictionary-of-dicts-from-a-single-list-python3/54226183#54226183", "title": "Create dictionary of dicts from a single list - Python3", "body": "<p>I'd suggest the use of <code>collections.defaultdict</code> since some of your counts can be 0.</p>\n\n<p>Here's an option:</p>\n\n<pre><code>from collections import defaultdict\n\ndtl = ['06/01/19 12:00', '06/01/19 12:00', '06/01/19 11:00', \n       '05/01/19 21:00', '05/01/19 17:00', '05/01/19 17:00', \n       '05/01/19 14:00', '03/01/19 21:00', '03/01/19 17:00',\n       '03/01/19 12:00', '03/01/19 12:00', '03/01/19 12:00', \n       '03/01/19 12:00', '03/01/19 12:00', '03/01/19 11:00', \n       '03/01/19 10:00', '03/01/19 10:00', '03/01/19 09:00',\n       '03/01/19 09:00','03/01/19 09:00',]\n\n# Nested defaultdict\nresult = defaultdict(lambda: defaultdict(int))\n\nfor date_time in dtl:\n    date, time = date_time.split()\n    result[date][time.split(':')[0]] += 1\n</code></pre>\n\n<p>Output (using <code>pprint</code>):</p>\n\n<pre><code>defaultdict(&lt;function &lt;lambda&gt; at 0x7f20d5c37c80&gt;,\n            {'03/01/19': defaultdict(&lt;class 'int'&gt;,\n                                     {'09': 3,\n                                      '10': 2,\n                                      '11': 1,\n                                      '12': 5,\n                                      '17': 1,\n                                      '21': 1}),\n             '05/01/19': defaultdict(&lt;class 'int'&gt;,\n                                     {'14': 1,\n                                      '17': 2,\n                                      '21': 1}),\n             '06/01/19': defaultdict(&lt;class 'int'&gt;, {'12': 2, '11': 1})})\n</code></pre>\n\n<p>If you really want to show the <code>0</code> for printing then I don't really see a way around keeping an array of <code>times</code> as I've done here and initializing your <code>dict</code> that way. </p>\n\n<pre><code>times = ['00', '01', '02', '03', '04', '05', '06', '07', '08', '09', '10',\n         '11', '12', '13', '14', '15', '16', '17', '18', '19', '20', '21',\n         '22', '23']\n\ndtl = ['06/01/19 12:00', '06/01/19 12:00', '06/01/19 11:00', \n       '05/01/19 21:00', '05/01/19 17:00', '05/01/19 17:00', \n       '05/01/19 14:00', '03/01/19 21:00', '03/01/19 17:00',\n       '03/01/19 12:00', '03/01/19 12:00', '03/01/19 12:00', \n       '03/01/19 12:00', '03/01/19 12:00', '03/01/19 11:00', \n       '03/01/19 10:00', '03/01/19 10:00', '03/01/19 09:00',\n       '03/01/19 09:00','03/01/19 09:00']\n\nresult = {date_time.split()[0] : {time : 0 for time in times} for date_time in dtl}\n\nfor date_time in dtl:\n    date, time = date_time.split()\n    result[date][time.split(':')[0]] += 1\n</code></pre>\n\n<p>Output below:</p>\n\n<pre><code>{'06/01/19': {'00': 0, '01': 0, '02': 0, '03': 0, '04': 0, '05': 0, '06': 0, '07': 0, '08': 0, '09': 0, '10': 0, '11': 1, '12': 2, '13': 0, '14': 0, '15': 0, '16': 0, '17': 0, '18': 0, '19': 0, '20': 0, '21': 0, '22': 0, '23': 0}, '05/01/19': {'00': 0, '01': 0, '02': 0, '03': 0, '04': 0, '05': 0, '06': 0, '07': 0, '08': 0, '09': 0, '10': 0, '11': 0, '12': 0, '13': 0, '14': 1, '15': 0, '16': 0, '17': 2, '18': 0, '19': 0, '20': 0, '21': 1, '22': 0, '23': 0}, '03/01/19': {'00': 0, '01': 0, '02': 0, '03': 0, '04': 0, '05': 0, '06': 0, '07': 0, '08': 0, '09': 3, '10': 2, '11': 1, '12': 5, '13': 0, '14': 0, '15': 0, '16': 0, '17': 1, '18': 0, '19': 0, '20': 0, '21': 1, '22': 0, '23': 0}}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1547677339, "post_id": 54226197, "comment_id": 95278551, "body": "<code>ret[d] = {}</code>. Did you forget to insert the first time and add 1? Similarly, in the <code>if</code> portion, you should be starting with 1, not 0."}, {"owner": {"reputation": 142, "user_id": 10923857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c34d0bbd201d9b8aa373fb7209aa646?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas B.", "link": "https://stackoverflow.com/users/10923857/jonas-b"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1547678142, "post_id": 54226197, "comment_id": 95278881, "body": "yup you are right, was not in the right format, too."}], "tags": [], "owner": {"reputation": 142, "user_id": 10923857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c34d0bbd201d9b8aa373fb7209aa646?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas B.", "link": "https://stackoverflow.com/users/10923857/jonas-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1547678124, "last_edit_date": 1547678124, "creation_date": 1547676825, "answer_id": 54226197, "question_id": 54226054, "link": "https://stackoverflow.com/questions/54226054/create-dictionary-of-dicts-from-a-single-list-python3/54226197#54226197", "title": "Create dictionary of dicts from a single list - Python3", "body": "<p>One quick and dirty way is this:</p>\n\n<pre><code>#!/usr/bin/env python3\n\ndef convert(dt):\n    ret = {}\n    for elem in dt:\n        d,t = elem.split()\n        t = t.split(\":\")[0]\n        # not a valid value\n        if not d: pass\n\n        # we inserted d already\n        if d in ret:\n            if t in ret[d]:\n                ret[d][t] += 1\n        else:\n            ret[d] = {'00': 0, '01': 0, '02': 0, '03': 0, '04': 0, '05': 0,\n                    '06': 0, '07': 0, '08': 0, '09': 0, '10': 0, '11': 0, \n                    '12': 0, '13': 0, '14': 0, '15': 0, '16': 0, '17': 0, \n                    '18': 0, '19': 0, '20': 0, '21': 0, '22': 0, '23': 0 }\n    return ret\n\ndtl = ['06/01/19 12:00', '06/01/19 12:00', '06/01/19 11:00', '05/01/19 21:00', '05/01/19 17:00', '05/01/19 17:00', '05/01/19 14:00', '03/01/19 21:00', '03/01/19 17:00','03/01/19 12:00', '03/01/19 12:00', '03/01/19 12:00', '03/01/19 12:00', '03/01/19 12:00', '03/01/19 11:00', '03/01/19 10:00', '03/01/19 10:00', '03/01/19 09:00','03/01/19 09:00','03/01/19 09:00']\n\nprint(convert(dtl))\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 8560410, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/onbO7.jpg?s=128&g=1", "display_name": "CodeRedacted", "link": "https://stackoverflow.com/users/8560410/coderedacted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 54226183, "answer_count": 3, "score": 1, "last_activity_date": 1547831948, "creation_date": 1547676029, "last_edit_date": 1547692788, "question_id": 54226054, "link": "https://stackoverflow.com/questions/54226054/create-dictionary-of-dicts-from-a-single-list-python3", "title": "Create dictionary of dicts from a single list - Python3", "body": "<p>Python 3.6.5/3.7.1 on Linux</p>\n\n<p>Struggling to create a dictionary with dictionaries as values.</p>\n\n<p>I want to create a dictionary from a list date &amp; time data (ultimately to create charts with bokeh).</p>\n\n<p>This must have been asked before, but I can't find a set of search terms that returns a result that clarifies matters for me.</p>\n\n<p>nb I'm essentially a hobby coder, &amp; I don't easily think algorithmically like a real programmer. </p>\n\n<p>The data is in a list (max 3200 items):\nEach item is a record of the occurrence of an event on a date in a clock period of one hour.</p>\n\n<p>Thus; <code>['03/01/19 09:00', '03/01/19 09:00', '03/01/19 09:00',]</code> indicates 3 events between 0900-1000 on 03/01/2019.</p>\n\n<p>Only clock periods with events are recorded, so if no event, no timestamp.</p>\n\n<p>nb date format is <code>ddmmyy</code></p>\n\n<p>Example data:</p>\n\n<pre><code>dtl = [\n    '06/01/19 12:00', '06/01/19 12:00', '06/01/19 11:00', '05/01/19 21:00',\n    '05/01/19 17:00', '05/01/19 17:00', '05/01/19 14:00', '03/01/19 21:00',\n    '03/01/19 17:00', '03/01/19 12:00', '03/01/19 12:00', '03/01/19 12:00',\n    '03/01/19 12:00', '03/01/19 12:00', '03/01/19 11:00', '03/01/19 10:00',\n    '03/01/19 10:00', '03/01/19 09:00','03/01/19 09:00','03/01/19 09:00',\n]\n</code></pre>\n\n<p>The desired dictionary would look like this:</p>\n\n<pre><code>dtd = {\n    '03/01/19': {\n         '00': 0, '01': 0, '02': 0, '03': 0, '04': 0, '05': 0,\n         '06': 0, '07': 0, '08': 0, '09': 3, '10': 2, '11': 1,\n         '12': 5, '13': 0, '14': 0, '15': 0, '16': 0, '17': 1,\n         '18': 0, '19': 0, '20': 0, '21': 1, '22': 0, '23': 0,\n     },\n     '04/01/19': {\n         '00': 0, ... '23': 0\n     },\n     '05/01/19': {\n         '00': 0, ... \n     } ... etc\n}\n</code></pre>\n\n<p>Clearly I can initialise a dictionary with at least the keys:</p>\n\n<pre><code>{i.split()[0]:{} for i in dtl}\n</code></pre>\n\n<p>But then I can't get my head round what I need to do to update the subdicts with the counts, &amp; so can't see a way to get from the original list to the desired dictionary. I'm going round in circles!</p>\n"}, {"tags": ["python", "django", "django-models", "django-rest-framework", "django-orm"], "answers": [{"tags": [], "owner": {"reputation": 11805, "user_id": 1637351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CptWd.jpg?s=128&g=1", "display_name": "schillingt", "link": "https://stackoverflow.com/users/1637351/schillingt"}, "is_accepted": false, "score": 1, "last_activity_date": 1547847787, "creation_date": 1547847787, "answer_id": 54261808, "question_id": 54226040, "link": "https://stackoverflow.com/questions/54226040/django-double-left-join-django-rest-framework-serializers/54261808#54261808", "title": "django double left join + django rest framework serializers", "body": "<p>1) What you want to do is counter to how Django works and will result in more pain than it's worth. I'd recommend doing the <code>prefetch_related</code> as suggested. You may also want to explore the following. Here are the docs on <a href=\"https://docs.djangoproject.com/en/2.1/topics/db/models/#many-to-many-relationships\" rel=\"nofollow noreferrer\">ManyToManyField</a>.</p>\n\n<pre><code>class Item(models.Model):\n    name = models.CharField(max_length=100)\n\nclass Group(models.Model):\n   name = models.CharField(max_length=100)\n   items = models.ManyToManyField(Group, through='ItemGroup')\n\nclass ItemGroup(models.Model):\n   item = models.ForeignKey(Item, on_delete=models.CASCADE)\n   group = models.ForeignKey(Group, on_delete=models.CASCADE)\n</code></pre>\n\n<p>2) Take a look into <a href=\"https://www.django-rest-framework.org/api-guide/fields/#listfield\" rel=\"nofollow noreferrer\"><code>ListField</code></a>. I think it should help you accomplish what you want there.</p>\n"}], "owner": {"reputation": 4581, "user_id": 3599803, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/7c976bab406c2a31849cfb1a017ee616?s=128&d=identicon&r=PG&f=1", "display_name": "user3599803", "link": "https://stackoverflow.com/users/3599803/user3599803"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547847787, "creation_date": 1547675962, "question_id": 54226040, "link": "https://stackoverflow.com/questions/54226040/django-double-left-join-django-rest-framework-serializers", "title": "django double left join + django rest framework serializers", "body": "<p>I have these models:</p>\n\n<pre><code>class Item(models.Model):\n   name = models.CharField(max_length=100)\n\nclass Group(models.Model):\n   name = models.CharField(max_length=100)\n\nclass ItemGroup(models.Model):\n   item = models.ForeignKey(Item, on_delete=models.CASCADE)\n   group = models.ForeignKey(Group, on_delete=models.CASCADE)\n</code></pre>\n\n<p>Means an item can be in multiple groups.</p>\n\n<p>I want to query <strong>all</strong> items, and for each item return his groups as a nested list (or an empty list if the item does not appear in a group).  </p>\n\n<p>This is what I would do with sql:</p>\n\n<pre><code>SELECT item.id, item.name, group.name\nFROM items\nLEFT JOIN item_group ON item.id = item_group.id\nLEFT JOIN group ON group.id = item_group.group_id\n</code></pre>\n\n<p>(I might add an <code>ORDER BY</code> too, for paging, but nevermind for now).  </p>\n\n<p>This query would give me every item X number of groups the item is connected too, and at least one row for an item that does not appear in any group (with group set to null).<br>\nThen, I'll need to convert it to a nested list manually.  </p>\n\n<p>The question:<br>\n1. How to do the same joins with django ORM?  This is the closest question I've found:  <a href=\"https://stackoverflow.com/questions/769769/django-left-join\">django left join</a><br>\nBut the answer isn't actually a left join, but a <code>prefetch_related</code>, which I want to avoid.<br>\n2. If I would create a nested <code>dict</code> of models like this:<br>\n <code>{item: [list of groups for the item]}</code> . Is there a way to feed that to django rest framework serializers?   cause it seems that ModelSerializer can only work with querysets.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1547676014, "post_id": 54226034, "comment_id": 95277993, "body": "You have spaces in your <code>PRIME</code> string.  <code>isin</code> is looking for an exact match and not finding one."}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 5, "creation_date": 1547676049, "post_id": 54226034, "comment_id": 95278006, "body": "Try df[&#39;Technology&#39;] = df[&#39;Technology&#39;].str.strip() and then run your code again"}, {"owner": {"reputation": 134, "user_id": 10474024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XkmSm8phXlA/AAAAAAAAAAI/AAAAAAAAAAc/Nr8e7Y7s05U/photo.jpg?sz=128", "display_name": "ProsperousHeart", "link": "https://stackoverflow.com/users/10474024/prosperousheart"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1547676323, "post_id": 54226034, "comment_id": 95278114, "body": "@user3483203 - there are 2 different Prime items. &quot;PRIME&quot; and &quot;Prime Infrastructure&quot;"}, {"owner": {"reputation": 134, "user_id": 10474024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XkmSm8phXlA/AAAAAAAAAAI/AAAAAAAAAAc/Nr8e7Y7s05U/photo.jpg?sz=128", "display_name": "ProsperousHeart", "link": "https://stackoverflow.com/users/10474024/prosperousheart"}, "reply_to_user": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 0, "creation_date": 1547676359, "post_id": 54226034, "comment_id": 95278131, "body": "@Vaishali that fixed it! :-O Are you able to create an answer so I can mark it for you?"}, {"owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "edited": false, "score": 1, "creation_date": 1547676518, "post_id": 54226034, "comment_id": 95278205, "body": "Technically it&#39;s just a dupe plus you had a working code. May be you can delete the question"}, {"owner": {"reputation": 134, "user_id": 10474024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XkmSm8phXlA/AAAAAAAAAAI/AAAAAAAAAAc/Nr8e7Y7s05U/photo.jpg?sz=128", "display_name": "ProsperousHeart", "link": "https://stackoverflow.com/users/10474024/prosperousheart"}, "edited": false, "score": 0, "creation_date": 1547676970, "post_id": 54226034, "comment_id": 95278377, "body": "I looked - the only ones I saw were not relevant to my issue."}], "answers": [{"comments": [{"owner": {"reputation": 134, "user_id": 10474024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XkmSm8phXlA/AAAAAAAAAAI/AAAAAAAAAAc/Nr8e7Y7s05U/photo.jpg?sz=128", "display_name": "ProsperousHeart", "link": "https://stackoverflow.com/users/10474024/prosperousheart"}, "edited": false, "score": 0, "creation_date": 1547678746, "post_id": 54226435, "comment_id": 95279063, "body": "Yes, you are correct. @Vaishali was able to provide the same solution but you beat them to posting a response instead of a comment. Thank you!"}], "tags": [], "owner": {"reputation": 378, "user_id": 10807997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aa3424ab14ec4c9104c6920e7cd93d67?s=128&d=identicon&r=PG&f=1", "display_name": "CAppajigowda", "link": "https://stackoverflow.com/users/10807997/cappajigowda"}, "is_accepted": true, "score": 1, "last_activity_date": 1547678150, "creation_date": 1547678150, "answer_id": 54226435, "question_id": 54226034, "link": "https://stackoverflow.com/questions/54226034/pandas-isin-broken-for-all-caps/54226435#54226435", "title": "pandas.isin broken for all caps?", "body": "<p>This might be due to spaces. The <a href=\"https://www.programiz.com/python-programming/methods/string/strip\" rel=\"nofollow noreferrer\">strip()</a> removes characters from both left and right based on the argument (a string specifying the set of characters to be removed). </p>\n\n<pre><code>import pandas as pd\ndf = pd.read_json('{\"Technology Group\": {\"0\":\"Cloud\",\"1\":\"Cloud\", \n\"2\":\"Cloud\",\"3\":\"Collaboration\", \"4\":\"Collaboration\" ,\":\"Collaboration\", \n\"6\":\"Collaboration\", \"7\":\"Collaboration\",\"8\":\"Collaboration\",\"9\":\"Core\", \n\"10\": \"Software\"},\"Technology\":{\"0\":\"AMP\",\"1\":\"EWS\",\"2\":\"Webex\",\"3\":\"Telepresence\",\n\"4\":\"Call Manager\",\"5\":\"Contact Center\",\"6\":\"MS Voice\",\"7\":\"Apps\",\"8\":\"PRIME  \n\",\"9\":\"Wirelees\", \"10\": \"Prime Infrastructure\"}}')\n\ndf['Technology'] = df['Technology'].str.strip()\ntech_input2 = ['AMP', 'Call Manager', 'PRIME']\ndf = df[df['Technology'].isin(tech_input2)]\n</code></pre>\n"}], "owner": {"reputation": 134, "user_id": 10474024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XkmSm8phXlA/AAAAAAAAAAI/AAAAAAAAAAc/Nr8e7Y7s05U/photo.jpg?sz=128", "display_name": "ProsperousHeart", "link": "https://stackoverflow.com/users/10474024/prosperousheart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 54226435, "answer_count": 1, "score": 0, "last_activity_date": 1547678150, "creation_date": 1547675943, "question_id": 54226034, "link": "https://stackoverflow.com/questions/54226034/pandas-isin-broken-for-all-caps", "title": "pandas.isin broken for all caps?", "body": "<p>I found the <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.isin.html\" rel=\"nofollow noreferrer\">isin</a> function for pandas, but it looks like all caps doesn't show?</p>\n\n<pre><code>import pandas as pd\ndf = pd.read_json('{\"Technology Group\":{\"0\":\"Cloud\",\"1\":\"Cloud\",\"2\":\"Cloud\",\"3\":\"Collaboration\",\"4\":\"Collaboration\",\"5\":\"Collaboration\",\"6\":\"Collaboration\",\"7\":\"Collaboration\",\"8\":\"Collaboration\",\"9\":\"Core\", \"10\": \"Software\"},\"Technology\":{\"0\":\"AMP\",\"1\":\"EWS\",\"2\":\"Webex\",\"3\":\"Telepresence\",\"4\":\"Call Manager\",\"5\":\"Contact Center\",\"6\":\"MS Voice\",\"7\":\"Apps\",\"8\":\"PRIME  \",\"9\":\"Wirelees\", \"10\": \"Prime Infrastructure\"}}')\n\n+------------------+----------------------+\n| Technology Group | Technology           |\n+------------------+----------------------+\n| Cloud            | AMP                  |\n+------------------+----------------------+\n| Cloud            | EWS                  |\n+------------------+----------------------+\n| Cloud            | Webex                |\n+------------------+----------------------+\n| Collaboration    | Telepresence         |\n+------------------+----------------------+\n| Collaboration    | Call Manager         |\n+------------------+----------------------+\n| Collaboration    | Contact Center       |\n+------------------+----------------------+\n| Collaboration    | MS Voice             |\n+------------------+----------------------+\n| Collaboration    | Apps                 |\n+------------------+----------------------+\n| Collaboration    | PRIME                |\n+------------------+----------------------+\n| Core             | Wirelees             |\n+------------------+----------------------+\n| Software         | Prime Infrastructure |\n+------------------+----------------------+\n\ntech_input2 = ['AMP', 'Call Manager', 'PRIME']\ndf = df[df['Technology'].isin(tech_input2)]\n</code></pre>\n\n<p>It will show the following table:</p>\n\n<pre><code>+------------------+--------------+\n| Technology Group | Technology   |\n+------------------+--------------+\n| Cloud            | AMP          |\n+------------------+--------------+\n| Collaboration    | Call Manager |\n+------------------+--------------+\n</code></pre>\n\n<p>... instead of:</p>\n\n<pre><code>+------------------+--------------+\n| Technology Group | Technology   |\n+------------------+--------------+\n| Cloud            | AMP          |\n+------------------+--------------+\n| Collaboration    | Call Manager |\n+------------------+--------------+\n| Collaboration    | PRIME        |\n+------------------+--------------+\n</code></pre>\n\n<p>Is this a bug? Or did I do something wrong? It's not technically a duplicate of the original last line in the table, but not sure how to decipher it. It seems to act more like <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.str.contains.html\" rel=\"nofollow noreferrer\">contains</a> than <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.isin.html\" rel=\"nofollow noreferrer\">isin</a> ...</p>\n"}, {"tags": ["python", "naming", "conventions"], "comments": [{"owner": {"reputation": 134, "user_id": 6519570, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-erHnpnxBOj0/AAAAAAAAAAI/AAAAAAAAAHo/Foijjq4FXMg/photo.jpg?sz=128", "display_name": "Brad Fallon", "link": "https://stackoverflow.com/users/6519570/brad-fallon"}, "edited": false, "score": 0, "creation_date": 1547675988, "post_id": 54226031, "comment_id": 95277979, "body": "Meta Question: Is there a better place to ask these conventions questions? I&#39;m worried about being downvoted for opinion questions. The answer to this question could be &quot;There is no convention&quot;, but that isn&#39;t really an opinion."}, {"owner": {"reputation": 8205, "user_id": 1397946, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/G8wB1.png?s=128&g=1", "display_name": "Lukasz Tracewski", "link": "https://stackoverflow.com/users/1397946/lukasz-tracewski"}, "edited": false, "score": 1, "creation_date": 1547676540, "post_id": 54226031, "comment_id": 95278219, "body": "For me at least such cases indicate a potential <a href=\"https://en.wikipedia.org/wiki/Code_smell\" rel=\"nofollow noreferrer\">code smell</a>. Why <code>set_log_paths</code> isn&#39;t executed in the constructor? If that&#39;s because some values are set later, perhaps this should be a part of some other function? As a client of your class I&#39;d probably have problems with guessing that I need to call this method. Just trying to get to the bottom of it."}, {"owner": {"reputation": 1752, "user_id": 4802259, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DCcqxDw18ME/AAAAAAAAAAI/AAAAAAAAACs/_m_Fktc7QTA/photo.jpg?sz=128", "display_name": "David Culbreth", "link": "https://stackoverflow.com/users/4802259/david-culbreth"}, "edited": false, "score": 1, "creation_date": 1547676698, "post_id": 54226031, "comment_id": 95278277, "body": "@BradFallon, Meta-Meta-Question have you asked that question on Meta?"}, {"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "edited": false, "score": 0, "creation_date": 1547677487, "post_id": 54226031, "comment_id": 95278619, "body": "Suppose he is doing several steps  in the <code>__init__</code>, and then groups the steps in function calls from there to improve readability (with good readable function names of course). I don&#39;t see a problem then. As for the <code>set</code> word there are alternatives like <code>setup</code> or <code>configure</code>. Besides, If it  is what the method does...and setters and getters are not that common (by that name) in Python because of properties, so even a client code user should suspect it is not a traditional setter but a more sophisticated action. And the plural also helps that hint. This is debatable of course..."}], "answers": [{"tags": [], "owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "is_accepted": true, "score": 1, "last_activity_date": 1574440771, "last_edit_date": 1574440771, "creation_date": 1547691959, "answer_id": 54228121, "question_id": 54226031, "link": "https://stackoverflow.com/questions/54226031/python-naming-convention-for-setter-method-name-without-args/54228121#54228121", "title": "Python naming convention for setter method name without args", "body": "<p>f you don't pass any values, and instead, compute the value at the moment the method is called, based on current values, it is reasonable that the verb describing the action be \"update\" - therefore <code>update_log_paths()</code>.</p>\n\n<p>Just double check you really need this design, and what are the chances of you/other users of your class forgetting calling these \"update\" methods.</p>\n\n<p>Python's introspection easily allows adopting some elements from \"<a href=\"https://en.wikipedia.org/wiki/Reactive_programming\" rel=\"nofollow noreferrer\">reactive programing</a>\", which could be used to trigger these updater methods when the values they depend upon are changed. </p>\n\n<p>One optimal choice for such an architecture would be a descriptor for your properties that upon having <code>__set__</code> called would check a class-level registry to \"see\" if events should be triggered, and then one decorator that would enable you to list the attributes that would trigger it. A base class with a proper <code>__init_subclass__</code> method could set everything up. </p>\n\n<p>Let's suppose you will have the \"base properties\" on your class as annotated attributes in the class body - the descritptor, decorator and base-class code for this to work could be something along:</p>\n\n<pre><code>from functools import wraps\nfrom collections import ChainMap\n\nclass EventDescriptor:\n    def __init__(self, name, default):\n        self.name = name\n        self.default = default\n    def __get__(self, instance, owner):\n        if not instance:\n            return self\n        return instance.__dict__[self.name] if self.name in instance.__dict__ else self.default\n    def __set__(self, instance, value):\n        instance.__dict__[self.name] = value\n        triggers = instance._post_change_registry.get(self.name, [])\n        for trigger in triggers:\n            getattr(instance, trigger)()\n\n\ndef triggered_by(*args):\n    def decorator(func):\n        func._triggered_by = args\n        return func\n    return decorator\n\n\nclass EventPropertyMixin:\n    def __init_subclass__(cls, **kw):\n        super.__init_subclass__(**kw)\n        for property_name, type_ in cls.__annotations__.items():\n            if not hasattr(cls, property_name):\n                raise TypeError(\"Properties without default values not supported in this example code\")\n            # It would also be trivial to implement runtime type-checking in this point (and on the descriptor code)\n            setattr(cls, property_name, EventDescriptor(property_name, getattr(cls, property_name)))\n        # collects all registries in ancestor-classes, preserving order:\n        post_change_registry = ChainMap()\n        for ancestor in cls.__mro__[:0:-1]:\n            if hasattr(ancestor, \"_post_change_registry\"):\n                post_change_registry = post_change_registy.new_child(ancestor._post_change_registry)\n        post_change_registry = post_change_registry.new_child({})\n        for method_name, method in cls.__dict__.items():\n            if callable(method) and hasattr(method, \"_triggered_by\"):\n                for property_name in method._triggered_by:\n                    triggers = post_change_registry.setdefault(property_name, [])\n                    if method_name not in triggers:\n                        triggers.append(method_name)\n        cls._post_change_registry = post_change_registry\n\n\nclass Test(EventPropertyMixin):\n    path1: str = \"\"\n    path2: str = \"\"\n\n    @triggered_by(\"path1\", \"path2\")\n    def update_log_paths(self):\n        self.log_paths = self.path1 + self.path2\n</code></pre>\n\n<p>And let's this working:</p>\n\n<pre><code>In [2]: t = Test()                                                                                       \n\nIn [3]: t.path1 = \"/tmp\"                                                                                 \n\nIn [4]: t.path2 = \"/inner\"                                                                               \n\nIn [5]: t.log_paths                                                                                      \nOut[5]: '/tmp/inner'\n</code></pre>\n\n<p>So, this is complicated code, but code that usually would lie inside a framework, or in base utility libraries - with these 50 lines of code, you could be using Python to work <em>for</em> you, and have it call the updating methods, so their name won't matter at all! :-)\n(ok, this code is way overkill for the question asked - but I was in a mood to produce something like this before sleeping tonight - disclaimer: I had not tested the inheritance-related corner cases covered in here)</p>\n"}], "owner": {"reputation": 134, "user_id": 6519570, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-erHnpnxBOj0/AAAAAAAAAAI/AAAAAAAAAHo/Foijjq4FXMg/photo.jpg?sz=128", "display_name": "Brad Fallon", "link": "https://stackoverflow.com/users/6519570/brad-fallon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 2, "accepted_answer_id": 54228121, "answer_count": 1, "score": 1, "last_activity_date": 1574440771, "creation_date": 1547675932, "question_id": 54226031, "link": "https://stackoverflow.com/questions/54226031/python-naming-convention-for-setter-method-name-without-args", "title": "Python naming convention for setter method name without args", "body": "<p>I have been writing python code with classes that will have a method called something like:</p>\n\n<pre><code>def set_log_paths(self):\n</code></pre>\n\n<p>The thing is, this method doesn't take an argument, it determines what some values should be based on other values of self. Is it inappropriate to use the word \"set\" in this case? I ask because it isn't a direct getter or a setter as one would use in a language with private members.</p>\n\n<p>Is there a common conventional word to use in my method name?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 1752, "user_id": 4802259, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DCcqxDw18ME/AAAAAAAAAAI/AAAAAAAAACs/_m_Fktc7QTA/photo.jpg?sz=128", "display_name": "David Culbreth", "link": "https://stackoverflow.com/users/4802259/david-culbreth"}, "edited": false, "score": 0, "creation_date": 1547676116, "post_id": 54225978, "comment_id": 95278023, "body": "In terms of readability, I don&#39;t see the problem here. it seems fairly clear what you&#39;re trying to accomplish, though I would add some documentation notes at the top of the file, class, or function; indicating the desired function in readable human language. As for efficiency, I&#39;m not sure there is a better approach: I haven&#39;t done that research. However, I have been told by professors and more experienced programmers <b>DON&#39;T PRE-OPTIMIZE</b> Or, <a href=\"https://stackoverflow.com/questions/385506/when-is-optimisation-premature\">Optimization is the root of <i>almost</i> all evil.</a>"}, {"owner": {"reputation": 1752, "user_id": 4802259, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DCcqxDw18ME/AAAAAAAAAAI/AAAAAAAAACs/_m_Fktc7QTA/photo.jpg?sz=128", "display_name": "David Culbreth", "link": "https://stackoverflow.com/users/4802259/david-culbreth"}, "edited": false, "score": 0, "creation_date": 1547676352, "post_id": 54225978, "comment_id": 95278129, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/385506/when-is-optimisation-premature\">When is optimisation premature?</a>"}, {"owner": {"reputation": 3032, "user_id": 1486196, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/208f40e089107b8150bc72cad744ce7c?s=128&d=identicon&r=PG", "display_name": "chase", "link": "https://stackoverflow.com/users/1486196/chase"}, "reply_to_user": {"reputation": 1752, "user_id": 4802259, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DCcqxDw18ME/AAAAAAAAAAI/AAAAAAAAACs/_m_Fktc7QTA/photo.jpg?sz=128", "display_name": "David Culbreth", "link": "https://stackoverflow.com/users/4802259/david-culbreth"}, "edited": false, "score": 0, "creation_date": 1547676950, "post_id": 54225978, "comment_id": 95278367, "body": "@DavidCulbreth I was mainly seeing if there is something remarkably simple (as there usually is for python) like <code>{file:file.readstr() for file in filelist}</code>"}, {"owner": {"reputation": 1752, "user_id": 4802259, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DCcqxDw18ME/AAAAAAAAAAI/AAAAAAAAACs/_m_Fktc7QTA/photo.jpg?sz=128", "display_name": "David Culbreth", "link": "https://stackoverflow.com/users/4802259/david-culbreth"}, "edited": false, "score": 0, "creation_date": 1547677420, "post_id": 54225978, "comment_id": 95278587, "body": "Ah. That makes sense. Given that you have to <code>open(...)</code>, <code>glob(...)</code>, and <code>DataFrame()</code> in use I don&#39;t think that a one-liner would be attainable while still readable. If one does exist, this deliberate notation is very likely more readable. Since you&#39;re going through 4? different kinds of structures, I think the naive approach that you&#39;ve already presented is very likely the most readable, and probably not any faster/slower than your initial algorithm."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1547679262, "post_id": 54225978, "comment_id": 95279227, "body": "This is perfectly Pythonic. What isn&#39;t Pythonic about it? Seems very readable to me, using common python idioms. You should always use a <code>with</code> statement to handle files. That is very Pythonic."}], "answers": [{"comments": [{"owner": {"reputation": 2010, "user_id": 6625815, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XUtQf.jpg?s=128&g=1", "display_name": "Andrew F", "link": "https://stackoverflow.com/users/6625815/andrew-f"}, "edited": false, "score": 0, "creation_date": 1547732732, "post_id": 54226666, "comment_id": 95299008, "body": "Note, there is a <a href=\"https://pypi.org/project/pathlib2/\" rel=\"nofollow noreferrer\">pathlib2</a> package that is a backport for Python2."}], "tags": [], "owner": {"reputation": 10318, "user_id": 271641, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a098ae2f1198ec5f649080470b136cc?s=128&d=identicon&r=PG", "display_name": "Marat", "link": "https://stackoverflow.com/users/271641/marat"}, "is_accepted": true, "score": 2, "last_activity_date": 1547679557, "creation_date": 1547679557, "answer_id": 54226666, "question_id": 54225978, "link": "https://stackoverflow.com/questions/54225978/with-open-inside-loop-comprehension-getting-a-list-of-text-contents-of-a-all/54226666#54226666", "title": "with open() inside loop comprehension - getting a list of text contents of a all files in directory", "body": "<p>Your code looks perfectly readable. \nPerhaps you were looking for something like this (Python3 only):</p>\n\n<pre><code>import pathlib\n\ndocuments = pd.DataFrame(glob.glob('*.txt'), columns = ['files'])\ndocuments['text'] = documents['files'].map(\n    lambda fname: fname.startswith('GSE') and pathlib.Path(fname).read_text())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1547683475, "post_id": 54227127, "comment_id": 95280408, "body": "This doesn&#39;t use a context-manager. Also, this goes against PEP8 style guidelines by assigning a lambda to a name. Just use a full function definition."}, {"owner": {"reputation": 1699, "user_id": 3108946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4EWWD.jpg?s=128&g=1", "display_name": "aerijman", "link": "https://stackoverflow.com/users/3108946/aerijman"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1547732665, "post_id": 54227127, "comment_id": 95298961, "body": "Thank you @juanpa.arrivillaga. What happens if you assign a lambda to a name? You also made me understand better the question and I changed my suggestion accordingly."}], "tags": [], "owner": {"reputation": 1699, "user_id": 3108946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4EWWD.jpg?s=128&g=1", "display_name": "aerijman", "link": "https://stackoverflow.com/users/3108946/aerijman"}, "is_accepted": false, "score": 0, "last_activity_date": 1547732608, "last_edit_date": 1547732608, "creation_date": 1547682801, "answer_id": 54227127, "question_id": 54225978, "link": "https://stackoverflow.com/questions/54225978/with-open-inside-loop-comprehension-getting-a-list-of-text-contents-of-a-all/54227127#54227127", "title": "with open() inside loop comprehension - getting a list of text contents of a all files in directory", "body": "<p>You can do:</p>\n\n<pre><code># import libraries\nimport os,pandas\n\n# list filenames, assuming your path is './'\nfiles = [i for i in os.listdir('./') if i[:3]=='GSE' and i[-3:]=='txt']\n\n# get contents of files\ncontents = []\nfor i in files:\n    with open(i) as f: contents.append(f.read().strip())\n\n# into a nice table \ntable = pandas.DataFrame(contents, index=files, columns=['text'])\n</code></pre>\n"}], "owner": {"reputation": 3032, "user_id": 1486196, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/208f40e089107b8150bc72cad744ce7c?s=128&d=identicon&r=PG", "display_name": "chase", "link": "https://stackoverflow.com/users/1486196/chase"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 54226666, "answer_count": 2, "score": 1, "last_activity_date": 1547732608, "creation_date": 1547675668, "question_id": 54225978, "link": "https://stackoverflow.com/questions/54225978/with-open-inside-loop-comprehension-getting-a-list-of-text-contents-of-a-all", "title": "with open() inside loop comprehension - getting a list of text contents of a all files in directory", "body": "<p>Is there a better manner to use the <code>with open(file) as f: f.read()</code> mechanism inside a for loop - i.e. a loop comprehension that operates on many files?</p>\n\n<p>I am attempting to place this into a dataframe such that there is a mapping from file to file contents.</p>\n\n<p>Here is what I have - but it seems to be inefficient and not pythonic/readable:</p>\n\n<pre><code>documents = pd.DataFrame(glob.glob('*.txt'), columns = ['files'])\ndocuments['text'] = [np.nan]*len(documents)\nfor txtfile in documents['files'].tolist():\n    if txtfile.startswith('GSE'):\n        with open(txtfile) as f:\n            documents['text'][documents['files']==txtfile] = f.read()\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>    files   text\n0   GSE2640_GSM50721.txt    | RNA was extracted from lung tissue using a T...\n1   GSE7002_GSM159771.txt   Array Type : Rat230_2 ; Amount to Core : 15 ; ...\n2   GSE1560_GSM26799.txt    | C3H denotes C3H / HeJ mice whereas C57 denot...\n3   GSE2171_GSM39147.txt    | HIV seropositive , samples used to test HIV ...\n</code></pre>\n"}, {"tags": ["python", "pandas", "time-series"], "answers": [{"comments": [{"owner": {"reputation": 6104, "user_id": 6163621, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yyhNK.jpg?s=128&g=1", "display_name": "elPastor", "link": "https://stackoverflow.com/users/6163621/elpastor"}, "edited": false, "score": 0, "creation_date": 1547676367, "post_id": 54226073, "comment_id": 95278138, "body": "What are you merging on?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 6104, "user_id": 6163621, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yyhNK.jpg?s=128&g=1", "display_name": "elPastor", "link": "https://stackoverflow.com/users/6163621/elpastor"}, "edited": false, "score": 0, "creation_date": 1547676439, "post_id": 54226073, "comment_id": 95278175, "body": "@elPastor id , key can search by default (intersection columns)"}, {"owner": {"reputation": 6104, "user_id": 6163621, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yyhNK.jpg?s=128&g=1", "display_name": "elPastor", "link": "https://stackoverflow.com/users/6163621/elpastor"}, "edited": false, "score": 0, "creation_date": 1547676652, "post_id": 54226073, "comment_id": 95278262, "body": "As far as I can tell, that does the trick.  I like to be a little more explicit in regards to which keys are being merged, but this is great.  Knew there was a more elegant solution.  Thanks!"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 1, "last_activity_date": 1547676143, "creation_date": 1547676143, "answer_id": 54226073, "question_id": 54225952, "link": "https://stackoverflow.com/questions/54225952/pandas-filter-by-date-range-exact-id/54226073#54226073", "title": "Pandas: Filter by date range / exact id", "body": "<p>Why not <code>merge</code> before filter. notice this will eating up your memory when the data set are way to big . </p>\n\n<pre><code>newdf=df.merge(df_filter)\nnewdf=newdf.loc[newdf.time.between(newdf.start,newdf.end),df.columns.tolist()]\nnewdf\nOut[480]: \n                  time id  num\n1  2018-01-01 01:00:00  A    2\n2  2018-01-01 02:00:00  A    3\n9  2018-01-03 09:00:00  B   12\n10 2018-01-03 10:00:00  B   13\n11 2018-01-03 11:00:00  B   14\n12 2018-01-03 12:00:00  B   15\n15 2018-05-30 00:00:00  C  122\n16 2018-05-30 01:00:00  C  133\n17 2018-05-30 02:00:00  C  144\n18 2018-05-30 03:00:00  C  155\n</code></pre>\n"}], "owner": {"reputation": 6104, "user_id": 6163621, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yyhNK.jpg?s=128&g=1", "display_name": "elPastor", "link": "https://stackoverflow.com/users/6163621/elpastor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 54226073, "answer_count": 1, "score": 0, "last_activity_date": 1547676143, "creation_date": 1547675534, "question_id": 54225952, "link": "https://stackoverflow.com/questions/54225952/pandas-filter-by-date-range-exact-id", "title": "Pandas: Filter by date range / exact id", "body": "<p>I'm looking to filter a large dataframe (millions of rows) based on another much smaller dataframe that has only three columns: ID, Start, End.  </p>\n\n<p>The following is what I put together (which works), but it seems like a <code>groupby()</code> or <code>np.where</code> might be faster.</p>\n\n<p><strong>SETUP:</strong></p>\n\n<pre><code>import pandas as pd\nimport io\n\ncsv = io.StringIO(u'''\ntime    id  num\n2018-01-01 00:00:00 A   1\n2018-01-01 01:00:00 A   2\n2018-01-01 02:00:00 A   3\n2018-01-01 03:00:00 A   4\n2018-01-01 04:00:00 A   5\n2018-01-01 05:00:00 A   6\n2018-01-01 06:00:00 A   6\n2018-01-03 07:00:00 B   10\n2018-01-03 08:00:00 B   11\n2018-01-03 09:00:00 B   12\n2018-01-03 10:00:00 B   13\n2018-01-03 11:00:00 B   14\n2018-01-03 12:00:00 B   15\n2018-01-03 13:00:00 B   16\n2018-05-29 23:00:00 C   111\n2018-05-30 00:00:00 C   122\n2018-05-30 01:00:00 C   133\n2018-05-30 02:00:00 C   144\n2018-05-30 03:00:00 C   155\n''')\n\ndf = pd.read_csv(csv, sep = '\\t')\ndf['time'] = pd.to_datetime(df['time'])\n\ncsv_filter = io.StringIO(u'''\nid  start   end\nA   2018-01-01 01:00:00 2018-01-01 02:00:00\nB   2018-01-03 09:00:00 2018-01-03 12:00:00\nC   2018-05-30 00:00:00 2018-05-30 08:00:00\n''')\n\ndf_filter = pd.read_csv(csv_filter, sep = '\\t')\ndf_filter['start'] = pd.to_datetime(df_filter['start'])\ndf_filter['end'] = pd.to_datetime(df_filter['end'])\n</code></pre>\n\n<p><strong>WORKING CODE</strong></p>\n\n<pre><code>df = pd.merge_asof(df, df_filter, left_on = 'time', right_on = 'start', by = 'id').dropna(subset = ['start']).drop(['start','end'], axis = 1)\ndf = pd.merge_asof(df, df_filter, left_on = 'time', right_on = 'end', by = 'id', direction = 'forward').dropna(subset = ['end']).drop(['start','end'], axis = 1)\n</code></pre>\n\n<p><strong>OUTPUT</strong></p>\n\n<pre><code>                  time id  num\n0  2018-01-01 01:00:00  A    2\n1  2018-01-01 02:00:00  A    3\n6  2018-01-03 09:00:00  B   12\n7  2018-01-03 10:00:00  B   13\n8  2018-01-03 11:00:00  B   14\n9  2018-01-03 12:00:00  B   15\n11 2018-05-30 00:00:00  C  122\n12 2018-05-30 01:00:00  C  133\n13 2018-05-30 02:00:00  C  144\n14 2018-05-30 03:00:00  C  155\n</code></pre>\n\n<p>Any thoughts on a more elegant / faster solution?</p>\n"}, {"tags": ["python", "linked-list", "doubly-linked-list"], "answers": [{"comments": [{"owner": {"reputation": 1606, "user_id": 7944978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VLMC.jpg?s=128&g=1", "display_name": "LuminousNutria", "link": "https://stackoverflow.com/users/7944978/luminousnutria"}, "edited": false, "score": 0, "creation_date": 1547676254, "post_id": 54226038, "comment_id": 95278078, "body": "Thank you! I agree the way they are defined is strange. The Python implementation itself is taken from a C++ implementation <a href=\"http://www.cs.hmc.edu/~mbrubeck/voronoi.html\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 7205, "user_id": 9288200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1c4dc5d3f7433e18f4aa04319ebaec?s=128&d=identicon&r=PG&f=1", "display_name": "Ondrej K.", "link": "https://stackoverflow.com/users/9288200/ondrej-k"}, "reply_to_user": {"reputation": 1606, "user_id": 7944978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VLMC.jpg?s=128&g=1", "display_name": "LuminousNutria", "link": "https://stackoverflow.com/users/7944978/luminousnutria"}, "edited": false, "score": 1, "creation_date": 1547676395, "post_id": 54226038, "comment_id": 95278158, "body": "I admit to not have any context for the code itself, but usually when I see something like that, I tend to suspect other language influences/habits to be involved. :)"}], "tags": [], "owner": {"reputation": 7205, "user_id": 9288200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1c4dc5d3f7433e18f4aa04319ebaec?s=128&d=identicon&r=PG&f=1", "display_name": "Ondrej K.", "link": "https://stackoverflow.com/users/9288200/ondrej-k"}, "is_accepted": true, "score": 1, "last_activity_date": 1547675950, "creation_date": 1547675950, "answer_id": 54226038, "question_id": 54225927, "link": "https://stackoverflow.com/questions/54225927/do-python-custom-linked-lists-carry-all-their-attributes-in-each-node/54226038#54226038", "title": "do python custom linked-lists carry all their attributes in each node?", "body": "<p>There could be a mild nomenclature confusion in your question, but as long as I understand it correctly and for given example, the short answer is: yes.</p>\n\n<p>Assuming by node you mean each instance of <code>Arc</code> type object, as constructed in the first snippet, all attributes are bound to an instance (and for that matter at least from this code) defining them also as class attributes above does not seem to serve any particular purpose or make a lot of sense.</p>\n"}], "owner": {"reputation": 1606, "user_id": 7944978, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VLMC.jpg?s=128&g=1", "display_name": "LuminousNutria", "link": "https://stackoverflow.com/users/7944978/luminousnutria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 54226038, "answer_count": 1, "score": 0, "last_activity_date": 1547676117, "creation_date": 1547675417, "last_edit_date": 1547676117, "question_id": 54225927, "link": "https://stackoverflow.com/questions/54225927/do-python-custom-linked-lists-carry-all-their-attributes-in-each-node", "title": "do python custom linked-lists carry all their attributes in each node?", "body": "<p>I am trying to translate a <a href=\"https://github.com/jansonh/Voronoi/blob/master/DataType.py\" rel=\"nofollow noreferrer\">Python voronoi diagram generator</a> into Java. However, I'm having trouble figuring out how the Arc class works.</p>\n\n<p>I've implemented linked lists in Java before, but the implementation here seems very different from what I'm used to. I'm not completely sure it is a linked list, it just seems like it because of the way the class is used later on.</p>\n\n<p><em>Does the Arc class here carry all it's attributes in each node?</em></p>\n\n<p><strong>The Arc class:</strong></p>\n\n<pre><code>class Arc:\n    p = None     \n    pprev = None \n    pnext = None \n    e = None\n    s0 = None\n    s1 = None\n\n    def __init__(self, p, a=None, b=None):\n        self.p = p\n        self.pprev = a\n        self.pnext = b\n        self.e = None\n        self.s0 = None\n        self.s1 = None\n</code></pre>\n\n<p><strong>Example of Arc class in use:</strong></p>\n\n<pre><code>def process_event(self):\n    # get next event from circle pq\n    e = self.event.pop()\n\n    if e.valid:\n        # start new edge\n        s = Segment(e.p)\n        self.output.append(s)\n\n        # remove associated arc (parabola)\n        a = e.a  # &lt;-- a is an \"Arc\" type\n        if a.pprev is not None:\n            a.pprev.pnext = a.pnext\n            a.pprev.s1 = s\n        if a.pnext is not None:\n            a.pnext.pprev = a.pprev\n            a.pnext.s0 = s\n\n        # finish the edges before and after a\n        if a.s0 is not None: a.s0.finish(e.p)\n        if a.s1 is not None: a.s1.finish(e.p)\n\n        # recheck circle events on either side of p\n        if a.pprev is not None: self.check_circle_event(a.pprev, e.x)\n        if a.pnext is not None: self.check_circle_event(a.pnext, e.x)\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "deep-learning", "classification"], "answers": [{"comments": [{"owner": {"reputation": 1698, "user_id": 5150335, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/3EwsD.png?s=128&g=1", "display_name": "mlz7", "link": "https://stackoverflow.com/users/5150335/mlz7"}, "edited": false, "score": 0, "creation_date": 1547677106, "post_id": 54226187, "comment_id": 95278430, "body": "I tried this in the first situation described above and my outputs were all negative and do not resemble my one hot output classes (which are just 0 or 1) which doesn&#39;t make sense to me. Furthermore, why would applying <code>softmax</code> first and then some other loss function after (rather than both at once) cause the entire model to not work?"}, {"owner": {"reputation": 1698, "user_id": 5150335, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/3EwsD.png?s=128&g=1", "display_name": "mlz7", "link": "https://stackoverflow.com/users/5150335/mlz7"}, "edited": false, "score": 0, "creation_date": 1547677182, "post_id": 54226187, "comment_id": 95278463, "body": "I rephrased my &quot;short summary&quot; above to improve clarity -- it was badly worded before"}, {"owner": {"reputation": 769, "user_id": 1650630, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/kjCDJ.jpg?s=128&g=1", "display_name": "Adria Ciurana", "link": "https://stackoverflow.com/users/1650630/adria-ciurana"}, "reply_to_user": {"reputation": 1698, "user_id": 5150335, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/3EwsD.png?s=128&g=1", "display_name": "mlz7", "link": "https://stackoverflow.com/users/5150335/mlz7"}, "edited": false, "score": 0, "creation_date": 1547677964, "post_id": 54226187, "comment_id": 95278803, "body": "I have updated the answer. In your case you are doing the following: Cross_entropy(softmax(softmax(x)))"}, {"owner": {"reputation": 1698, "user_id": 5150335, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/3EwsD.png?s=128&g=1", "display_name": "mlz7", "link": "https://stackoverflow.com/users/5150335/mlz7"}, "edited": false, "score": 0, "creation_date": 1547678156, "post_id": 54226187, "comment_id": 95278892, "body": "That makes sense. I am still confused as to why my network outputs are all very small negative numbers very close to each other and do not resemble my one hot output classes. Also, wouldn&#39;t it make more sense to have the network itself output probabilities summing to 1? How can I achieve this without using softmax as my output layer&#39;s activation function?"}, {"owner": {"reputation": 769, "user_id": 1650630, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/kjCDJ.jpg?s=128&g=1", "display_name": "Adria Ciurana", "link": "https://stackoverflow.com/users/1650630/adria-ciurana"}, "reply_to_user": {"reputation": 1698, "user_id": 5150335, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/3EwsD.png?s=128&g=1", "display_name": "mlz7", "link": "https://stackoverflow.com/users/5150335/mlz7"}, "edited": false, "score": 0, "creation_date": 1547678649, "post_id": 54226187, "comment_id": 95279029, "body": "Normally, what is done is to send the last layer without activation to cross_entropy_with_logits_v2 and parallel to softmax. To learn you use the first and to predict the second."}, {"owner": {"reputation": 769, "user_id": 1650630, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/kjCDJ.jpg?s=128&g=1", "display_name": "Adria Ciurana", "link": "https://stackoverflow.com/users/1650630/adria-ciurana"}, "reply_to_user": {"reputation": 1698, "user_id": 5150335, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/3EwsD.png?s=128&g=1", "display_name": "mlz7", "link": "https://stackoverflow.com/users/5150335/mlz7"}, "edited": false, "score": 0, "creation_date": 1547679758, "post_id": 54226187, "comment_id": 95279383, "body": "I think that youre problem is the weight initialization that produces overflow in last layer. Try to use xavier initzalization this reduce the range that any weight can have: <a href=\"https://stackoverflow.com/questions/33640581/how-to-do-xavier-initialization-on-tensorflow\" title=\"how to do xavier initialization on tensorflow\">stackoverflow.com/questions/33640581/&hellip;</a>"}], "tags": [], "owner": {"reputation": 769, "user_id": 1650630, "user_type": "registered", "accept_rate": 22, "profile_image": "https://i.stack.imgur.com/kjCDJ.jpg?s=128&g=1", "display_name": "Adria Ciurana", "link": "https://stackoverflow.com/users/1650630/adria-ciurana"}, "is_accepted": false, "score": 0, "last_activity_date": 1547677887, "last_edit_date": 1547677887, "creation_date": 1547676764, "answer_id": 54226187, "question_id": 54225908, "link": "https://stackoverflow.com/questions/54225908/binary-classification-nn-with-softmax-output-layer-predicting-incorrectly/54226187#54226187", "title": "Binary Classification NN with Softmax Output Layer Predicting Incorrectly", "body": "<p>When you use cross_entropy_with_logits_v2 it is important that you pass the logit. It is called logit to previous value before applying the softmax.\nIt should be like that:</p>\n\n<pre><code>cost = tf.reduce_mean(tf.nn.softmax_cross_entropy_with_logits_v2(logits=regular_prediction, labels=y))\n</code></pre>\n\n<p>That function performs the softmax and then the cross_entropy. That is so because if they are applied separately in the backpropagation you could have numerical instability. But when applied at the same time, it is simplified in backpropagation and becomes 100% stable.</p>\n\n<p><strong>EDIT:</strong>\ncross_entropy_with_logits_v2 is a layer that does the following cross_entropy (softmax (x), y).\nThe problem is that in the backward this combination of cross_entropy and then softmax is not numerically stable. That's why you get nans. When both are combined, a simplification is made in the following way: <a href=\"https://deepnotes.io/softmax-crossentropy\" rel=\"nofollow noreferrer\">https://deepnotes.io/softmax-crossentropy</a></p>\n\n<p>If you apply one and then the other, tensorflow would not have the ability to simplify.</p>\n"}], "owner": {"reputation": 1698, "user_id": 5150335, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/3EwsD.png?s=128&g=1", "display_name": "mlz7", "link": "https://stackoverflow.com/users/5150335/mlz7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1547679158, "creation_date": 1547675322, "last_edit_date": 1592644375, "question_id": 54225908, "link": "https://stackoverflow.com/questions/54225908/binary-classification-nn-with-softmax-output-layer-predicting-incorrectly", "title": "Binary Classification NN with Softmax Output Layer Predicting Incorrectly", "body": "<blockquote>\n<p><strong>Quick Summary:</strong></p>\n<ol>\n<li>When I run my network with no activation function on its output layer and with the <code>softmax_cross_entropy_with_logits_v2</code> loss function its predicted values are all negative and do not resemble my one hot output classes (which are just 0 or 1) which doesn't make sense to me. It seems to me that it would make sense to have the network itself output probabilities summing to 1 but I am unsure as to how to achieve this without using softmax as my output layer's activation function.</li>\n</ol>\n</blockquote>\n<p>Already answered:</p>\n<ol start=\"2\">\n<li>When I use softmax as my output class and <code>cost = tf.reduce_mean(-tf.reduce_sum(y * tf.cast(tf.log(prediction), tf.float32), [1]))</code> as my loss function (as referenced in the attached question), my network outputs all [nan, nan] predictions</li>\n<li>When I tried softmax on the output layer and the <code>softmax_cross_entropy_with_logits_v2</code> loss function together, all of my predictions were the same [0, 1] or [1, 0].</li>\n</ol>\n<blockquote>\n<p>Longer Version:</p>\n</blockquote>\n<p>My data is of the form:</p>\n<p><a href=\"https://i.stack.imgur.com/IAnz6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IAnz6.png\" alt=\"enter image description here\" /></a>\nI have the following model which attempts to perform a binary classification using an output node of dimension 2.</p>\n<pre><code>def neural_network_model(data):\n\nhidden_1_layer = {'weights': tf.Variable(tf.random_normal([n_features, n_nodes_hl1])),\n                'biases': tf.Variable(tf.random_normal([n_nodes_hl1]))}\nhidden_2_layer = {'weights': tf.Variable(tf.random_normal([n_nodes_hl1, n_nodes_hl2])),\n                'biases': tf.Variable(tf.random_normal([n_nodes_hl2]))}\nhidden_3_layer = {'weights': tf.Variable(tf.random_normal([n_nodes_hl2, n_nodes_hl3])),\n                'biases': tf.Variable(tf.random_normal([n_nodes_hl3]))}\noutput_layer = {'weights':tf.Variable(tf.random_normal([n_nodes_hl3, n_classes])),\n                'biases':tf.Variable(tf.random_normal([n_classes]))}\n\nl1 = tf.add(tf.matmul(data, hidden_1_layer['weights']), hidden_1_layer['biases'])\nl1 = tf.nn.relu(l1)\n\nl2 = tf.add(tf.matmul(l1, hidden_2_layer['weights']), hidden_2_layer['biases'])\nl2 = tf.nn.relu(l2)\n\nl3 = tf.add(tf.matmul(l2, hidden_3_layer['weights']), hidden_3_layer['biases'])\nl3 = tf.nn.relu(l3)\n# output shape -- [batch_size, 2]\n# example output = [[0.63, 0.37], \n#                   [0.43, 0.57]]\noutput = tf.add(tf.matmul(l3, output_layer['weights']), output_layer['biases'])\nsoftmax_output = tf.nn.softmax(output)\n\nreturn softmax_output, output\n</code></pre>\n<p>and I train it using the function below:</p>\n<pre><code>def train_neural_network(x):\n\nsoftmax_prediction, regular_prediction = neural_network_model(x)\n\ncost = tf.reduce_mean(tf.nn.softmax_cross_entropy_with_logits_v2(logits=softmax_prediction, labels=y))\n# cost = tf.reduce_mean(-tf.reduce_sum(y * tf.cast(tf.log(prediction), tf.float32), [1]))\noptimizer = tf.train.AdamOptimizer(learning_rate=0.001).minimize(cost)\n\nper_epoch_correct = tf.equal(tf.argmax(softmax_prediction, 1), tf.argmax(y, 1))\naccuracy = tf.reduce_mean(tf.cast(per_epoch_correct, tf.float32))\n\nhm_epochs = 5000\nwith tf.Session() as sess:\n    sess.run(tf.global_variables_initializer())\n    pred = []\n    for epoch in range(hm_epochs):\n        acc = 0\n        epoch_loss = 0\n        i = 0\n        while i &lt; len(X_train)-9:\n            start_index = i\n            end_index = i + batch_size\n\n            batch_x = np.array(X_train[start_index:end_index])\n            batch_y = np.array(y_train[start_index:end_index])\n\n            _ , c, acc, pred = sess.run([optimizer, cost, accuracy, softmax_prediction], feed_dict={x: batch_x, y:batch_y})\n            epoch_loss += c\n            i += batch_size\n        print(pred[0])\n        print('Epoch {} completed out of {} loss: {:.9f} accuracy: {:.9f}'.format(epoch+1, hm_epochs, epoch_loss, acc))\n\n    # get accuracy\n\n    correct = tf.equal(tf.argmax(softmax_prediction, 1), tf.argmax(y, 1))\n    final_accuracy = tf.reduce_mean(tf.cast(correct, tf.float32))\n    print('Accuracy:', final_accuracy.eval({x:X_test, y:y_test})) \n</code></pre>\n<p>So basically, my network &quot;works&quot; (I think?) when I run it with no activation function on its output layer and with the <code>softmax_cross_entropy_with_logits_v2</code> loss function. However, when I look at its predicted values, they are all negative and do not resemble my one hot output classes (which are just 0 or 1) which doesn't make sense to me.\n<a href=\"https://i.stack.imgur.com/Yrhhm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yrhhm.png\" alt=\"enter image description here\" /></a></p>\n<p>Furthermore, I was looking through this <a href=\"https://stackoverflow.com/questions/34240703/what-is-logits-softmax-and-softmax-cross-entropy-with-logits\">question</a> regarding the proper way to use the softmax function and it seems to make sense for me to use softmax as my output layer's activation function. This is because I have 2 output classes and thus my network could output the probability of each class summing up to 1. However, when I use softmax as my output class and <code>cost = tf.reduce_mean(-tf.reduce_sum(y * tf.cast(tf.log(prediction), tf.float32), [1]))</code> as my loss function (as referenced in the attached question), my network outputs all [nan, nan] predictions. When I tried softmax on the output layer and the <code>softmax_cross_entropy_with_logits_v2</code> loss function together, all of my predictions were the same [0, 1] or [1, 0]. I tried following the suggestions in <a href=\"https://stackoverflow.com/questions/49320188/neural-network-using-softmax-with-strange-outputs\">this question</a> but my network with softmax output still only outputs predictions of either all [0, 1] or [1, 0].</p>\n<p>Overall, I am unsure as to how to procede and I believe that I must be misunderstanding how this network should be structured. Any help would be appreciated.</p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "edited": false, "score": 0, "creation_date": 1547675069, "post_id": 54225820, "comment_id": 95277592, "body": "<code>savedUsers</code> here is a *file object&quot;, not the text content of the file. Do some research about the basics of file handling in Python and come back if you are still having problems."}, {"owner": {"reputation": 14946, "user_id": 8188846, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/85a7614508b329eb4a495c59ccf64ac7?s=128&d=identicon&r=PG", "display_name": "Maximilian Burszley", "link": "https://stackoverflow.com/users/8188846/maximilian-burszley"}, "edited": false, "score": 0, "creation_date": 1547675074, "post_id": 54225820, "comment_id": 95277594, "body": "Why are you importing <code>csv</code> and then never using it?"}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 2, "creation_date": 1547675291, "post_id": 54225820, "comment_id": 95277691, "body": "Would you really want to authentication someone just for giving any known username and any used password?"}], "answers": [{"tags": [], "owner": {"reputation": 18, "user_id": 10925442, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29043707ed1f83fd1899e199f7ee27ab?s=128&d=identicon&r=PG&f=1", "display_name": "thebard", "link": "https://stackoverflow.com/users/10925442/thebard"}, "is_accepted": true, "score": 0, "last_activity_date": 1547690688, "creation_date": 1547690688, "answer_id": 54227993, "question_id": 54225820, "link": "https://stackoverflow.com/questions/54225820/unable-to-find-my-saved-usernames-and-passwords/54227993#54227993", "title": "Unable to find my saved usernames and passwords", "body": "<p>To answer your question: You've opened the file but not the text contents as Robin suggested. Try looking at savedPass.read() or savedPass.readlines() to assist.</p>\n\n<p>Good practices:\nYou should use getpass so the password isn't listed in the console.</p>\n\n<p>Additionally, try checking out libraries like <a href=\"https://pypi.org/project/bcrypt/\" rel=\"nofollow noreferrer\">bcrypt</a> for handling hashing passwords (a very good thing to do!)</p>\n"}], "owner": {"reputation": 3, "user_id": 10924742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27fb08675bd717286b7cad4974a53ff6?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan_Brown_94", "link": "https://stackoverflow.com/users/10924742/ryan-brown-94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 54227993, "answer_count": 1, "score": -5, "last_activity_date": 1547690688, "creation_date": 1547674858, "last_edit_date": 1547675158, "question_id": 54225820, "link": "https://stackoverflow.com/questions/54225820/unable-to-find-my-saved-usernames-and-passwords", "title": "Unable to find my saved usernames and passwords", "body": "<p>I am creating a user login system in which you can create and save your own logon, however when I try to get python to check if the username entered is a saved logon, it always returns a negative result, even when the username is in the file.</p>\n\n<p>I've tried changing file types and rearranging code, but nothing seems to work. Is this just me being stupid?</p>\n\n<pre><code>import csv\n\ninputUser=input(\"Enter your username\")\nwith open('Usernames.csv', 'r+') as savedUsers:\n    if inputUser in savedUsers:\n        with open('Passwords.csv', 'r+') as savedPass:\n            inputPass=input(\"Enter your password\")\n            if inputPass in savedPass:\n                print(\"Welcome back,\", inputUser)\n            else:\n                print(\"Incorrect Password\")\n                raise SystemExit()\n</code></pre>\n\n<p>I expect that when I enter a username saved in the <code>Usernames.csv</code> file it will move on to \"Enter you password\" but in fact it always moves on to do you want to create a logon, the output for if your username is not found.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1547675629, "post_id": 54225794, "comment_id": 95277829, "body": "mode still need slice protection , since sometime it will return two value with same freq"}, {"owner": {"reputation": 2576, "user_id": 9585135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/984d3d5cc5e70d696f0396485f8586db?s=128&d=identicon&r=PG&f=1", "display_name": "ScalaBoy", "link": "https://stackoverflow.com/users/9585135/scalaboy"}, "edited": false, "score": 0, "creation_date": 1547675738, "post_id": 54225794, "comment_id": 95277871, "body": "I get error <code>ValueError: function does not reduce</code> in my real data set."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1547675864, "post_id": 54225794, "comment_id": 95277918, "body": "I think @W-B just pointed out, that we still might need to slice using pd.Series.mode, try the lambda version."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1547675908, "post_id": 54225794, "comment_id": 95277934, "body": "<code>lambda x: pd.Series.mode(x)[0]</code>"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 2576, "user_id": 9585135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/984d3d5cc5e70d696f0396485f8586db?s=128&d=identicon&r=PG&f=1", "display_name": "ScalaBoy", "link": "https://stackoverflow.com/users/9585135/scalaboy"}, "edited": false, "score": 0, "creation_date": 1547675944, "post_id": 54225794, "comment_id": 95277950, "body": "@scala or try the second statement below the or."}, {"owner": {"reputation": 2576, "user_id": 9585135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/984d3d5cc5e70d696f0396485f8586db?s=128&d=identicon&r=PG&f=1", "display_name": "ScalaBoy", "link": "https://stackoverflow.com/users/9585135/scalaboy"}, "edited": false, "score": 0, "creation_date": 1547675949, "post_id": 54225794, "comment_id": 95277952, "body": "But how do I put it into <code>agg</code>?"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1547675984, "post_id": 54225794, "comment_id": 95277976, "body": "replace <code>pd.Series.mode</code> with <code>lambda x: pd.Series.mode(x)[0]</code>"}, {"owner": {"reputation": 2576, "user_id": 9585135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/984d3d5cc5e70d696f0396485f8586db?s=128&d=identicon&r=PG&f=1", "display_name": "ScalaBoy", "link": "https://stackoverflow.com/users/9585135/scalaboy"}, "edited": false, "score": 1, "creation_date": 1547676538, "post_id": 54225794, "comment_id": 95278218, "body": "It worked. Please update your answer accordingly, Thanks."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 2, "last_activity_date": 1547676626, "last_edit_date": 1547676626, "creation_date": 1547674743, "answer_id": 54225794, "question_id": 54225761, "link": "https://stackoverflow.com/questions/54225761/how-to-calculate-average-and-most-frequent-values-per-group/54225794#54225794", "title": "How to calculate average and most frequent values per group?", "body": "<p>Use <code>agg</code> with a dictionary to define how to aggregate each column.</p>\n\n<pre><code>df.groupby('year', as_index=False)[['category', 'intensity']]\\\n  .agg({'category': lambda x: pd.Series.mode(x)[0], 'intensity':'mean'})\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   year  category  intensity\n0  2015         1  22.000000\n1  2016         2  25.000000\n2  2017         1  20.333333\n</code></pre>\n\n<p>Or you can still use lambda funcion</p>\n\n<pre><code>df.groupby('year', as_index=False)[['category','intensity']]\\\n  .agg({'category': lambda x: x.value_counts().index[0],'intensity':'mean'})\n</code></pre>\n"}], "owner": {"reputation": 2576, "user_id": 9585135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/984d3d5cc5e70d696f0396485f8586db?s=128&d=identicon&r=PG&f=1", "display_name": "ScalaBoy", "link": "https://stackoverflow.com/users/9585135/scalaboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 54225794, "answer_count": 1, "score": 0, "last_activity_date": 1547676626, "creation_date": 1547674563, "question_id": 54225761, "link": "https://stackoverflow.com/questions/54225761/how-to-calculate-average-and-most-frequent-values-per-group", "title": "How to calculate average and most frequent values per group?", "body": "<p>I have the following <code>df</code>:</p>\n\n<pre><code>df =\n   year  intensity  category\n   2015  22         1\n   2015  21         1\n   2015  23         2\n   2016  25         2\n   2017  20         1\n   2017  21         1\n   2017  20         3\n</code></pre>\n\n<p>I need to group by <code>year</code> and calculate an average <code>intensity</code> and a most frequent <code>category</code>(per year).</p>\n\n<p>I know that it's possible to calculate most frequent category as follows:</p>\n\n<pre><code>df.groupby('year')['category'].agg(lambda x: x.value_counts().index[0])\n</code></pre>\n\n<p>I also know how to calculate average <code>intensity</code>:</p>\n\n<pre><code>df = df.groupby([\"year\"]).agg({'intensity':'mean'}).reset_index()\n</code></pre>\n\n<p>But I don't know how to put everything together without <code>join</code> operation.</p>\n"}, {"tags": ["python", "linux", "subprocess", "splunk"], "comments": [{"owner": {"reputation": 100768, "user_id": 1899640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47374ccb28e4b0d2454b64f7b975bc66?s=128&d=identicon&r=PG", "display_name": "that other guy", "link": "https://stackoverflow.com/users/1899640/that-other-guy"}, "edited": false, "score": 2, "creation_date": 1547675172, "post_id": 54225740, "comment_id": 95277636, "body": "See <a href=\"https://stackoverflow.com/questions/37586811/pass-commands-as-input-to-another-command-su-ssh-sh-etc\">this question</a> for the fundamental reason why this can&#39;t work as posted"}], "answers": [{"tags": [], "owner": {"reputation": 7205, "user_id": 9288200, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f1c4dc5d3f7433e18f4aa04319ebaec?s=128&d=identicon&r=PG&f=1", "display_name": "Ondrej K.", "link": "https://stackoverflow.com/users/9288200/ondrej-k"}, "is_accepted": false, "score": 4, "last_activity_date": 1547674693, "creation_date": 1547674693, "answer_id": 54225784, "question_id": 54225740, "link": "https://stackoverflow.com/questions/54225740/how-to-run-command-line-in-linux-from-another-user/54225784#54225784", "title": "how to run command line in linux from another user", "body": "<p><code>cmd1</code> and <code>cmd2</code> are two different processes and have no effect on each other. If you wanted to go the <code>su</code> route, you'd need to call you shell script through that:</p>\n\n<pre><code>...[\"su\",\"-\",\"splunk\", \"-c\", \"./path/myBashFile.sh\"]...\n</code></pre>\n"}], "owner": {"reputation": 148, "user_id": 3885771, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QlgSD.png?s=128&g=1", "display_name": "Field.D", "link": "https://stackoverflow.com/users/3885771/field-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547674693, "creation_date": 1547674411, "question_id": 54225740, "link": "https://stackoverflow.com/questions/54225740/how-to-run-command-line-in-linux-from-another-user", "title": "how to run command line in linux from another user", "body": "<p>I need to execute a bash script from a python program (python2.7) in red hat, while this bash script has to run from another user account as splunk user.</p>\n\n<p>In the Linux, I will switch to splunk user <code>su - splunk</code> first, then type the command <code>./mybashFile</code> under as a splunk user</p>\n\n<p>Here is what I tried: </p>\n\n<pre><code>import  subprocess\ncmd1=subprocess.Popen([\"su\",\"-\",\"splunk\"],shell=True,stdout=subprocess.PIPE)\ncmd2=subprocess.Popen([\"./path/myBashFile.sh\"],shell=True,stdin=cmd1.stdout,stdout=subprocess.PIPE)\ncmd2.stdout\n</code></pre>\n\n<p>I still cannot run this bash file from as a splunk user. This command cannot pass to another account.</p>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1531971"}, "edited": false, "score": 0, "creation_date": 1547677030, "post_id": 54225685, "comment_id": 95278397, "body": "&quot;Is not working&quot;. Make sutre you explain as clearly as you can what isn&#39;t working. <a href=\"https://stackoverflow.com/posts/54225685/edit\">Edit</a> the question and tell us what you want to do, and what you tried."}, {"owner": {"reputation": 762, "user_id": 9559884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/joDJA.png?s=128&g=1", "display_name": "StyleZ", "link": "https://stackoverflow.com/users/9559884/stylez"}, "edited": false, "score": 0, "creation_date": 1547680492, "post_id": 54225685, "comment_id": 95279664, "body": "Why did you inport robot and then overrided it by creating a new class that is completly out of syntax ?? ( It looks like you dont know how classes works in pythong and what object is good for ... ) I am sorry if I am wrong .. Anyways Delete that class robot if you are importing it from somewhere .. and test it out"}, {"owner": {"reputation": 1, "user_id": 9737270, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "sumit kumar", "link": "https://stackoverflow.com/users/9737270/sumit-kumar"}, "edited": false, "score": 0, "creation_date": 1547707687, "post_id": 54225685, "comment_id": 95285735, "body": "Sorry my bad i am newbie in this..... i removed robot class just want to press enter in second container. I tried enter() key also but its not working"}], "owner": {"reputation": 1, "user_id": 9737270, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "sumit kumar", "link": "https://stackoverflow.com/users/9737270/sumit-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 482, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547741160, "creation_date": 1547674176, "last_edit_date": 1547741160, "question_id": 54225685, "link": "https://stackoverflow.com/questions/54225685/use-enter-key-in-selenium-through-robot-class-in-python", "title": "Use enter key in selenium through robot class in python", "body": "<pre><code>from selenium import webdriver\nimport time\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.chrome.options import Options\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import Select\n\n\ndriver = webdriver.Chrome(r\"C:\\Users\\Sumit.Kumar\\Desktop\\chromedriver_win32\\sumit\\chromedriver.exe\")\n#driver.set_page_load_timeout(10)\ndriver.get(\"https://trends.google.com/trends/?geo=DE\")\ndriver.maximize_window()\n\n\nval = \"Football\"\n\ndriver.find_element_by_id(\"input-254\").send_keys(val)\n\ntime.sleep(1)\nval1 = \"Cricket\"\n\ndriver.find_element_by_xpath(\"\"\"//*[@id=\"explorepage-content-header\"]/explore-pills/div/button\"\"\").send_keys(val1)\n</code></pre>\n\n<p>**<br>\n    In second container i want to press the down key and then enter . I want to press the down key and enter key. Please help me out.Thanks in advance.**</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 280, "user_id": 10817377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879d8990cccfc2856cf1ca6279a7afda?s=128&d=identicon&r=PG&f=1", "display_name": "I Funball", "link": "https://stackoverflow.com/users/10817377/i-funball"}, "edited": false, "score": 2, "creation_date": 1547674667, "post_id": 54225680, "comment_id": 95277423, "body": "Why can&#39;t you define two scores? Something like <code>p1_score</code> and <code>p2_score</code>?"}, {"owner": {"reputation": 2301, "user_id": 1168212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oayHK.jpg?s=128&g=1", "display_name": "Alex Yu", "link": "https://stackoverflow.com/users/1168212/alex-yu"}, "edited": false, "score": 0, "creation_date": 1547674819, "post_id": 54225680, "comment_id": 95277486, "body": "Welcome to stackoverflow! Let&#39;s clarify some points: a) <code>def bothDice():</code> - there is something obviously wrong with indentation, can you correct subbmitted code ? b) what have you done so far?"}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "edited": false, "score": 0, "creation_date": 1547674858, "post_id": 54225680, "comment_id": 95277505, "body": "What&#39;s not working though? Is the score not being displayed as you wanted?"}, {"owner": {"reputation": 1, "user_id": 10924728, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wH0h4sPECCQ/AAAAAAAAAAI/AAAAAAAAA-I/9UNuWAOBRqw/photo.jpg?sz=128", "display_name": "hussain ahmed", "link": "https://stackoverflow.com/users/10924728/hussain-ahmed"}, "edited": false, "score": 0, "creation_date": 1547675546, "post_id": 54225680, "comment_id": 95277794, "body": "the code works perfectly fine on python. i just want to know how to make each players&#39; score at the end of each round add to make a total score"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10924728, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wH0h4sPECCQ/AAAAAAAAAAI/AAAAAAAAA-I/9UNuWAOBRqw/photo.jpg?sz=128", "display_name": "hussain ahmed", "link": "https://stackoverflow.com/users/10924728/hussain-ahmed"}, "edited": false, "score": 0, "creation_date": 1547677591, "post_id": 54225970, "comment_id": 95278675, "body": "if a player scores an even number its supposed to add 10 points- it doesnt do this. also how would you make sure the points dont go below 0"}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "reply_to_user": {"reputation": 1, "user_id": 10924728, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wH0h4sPECCQ/AAAAAAAAAAI/AAAAAAAAA-I/9UNuWAOBRqw/photo.jpg?sz=128", "display_name": "hussain ahmed", "link": "https://stackoverflow.com/users/10924728/hussain-ahmed"}, "edited": false, "score": 0, "creation_date": 1547677764, "post_id": 54225970, "comment_id": 95278742, "body": "<code>Round 1 Player One rolls first dice you rolled a  2 Player One rolls second dice you rolled a  2 You rolled a double- You get an extra roll You rolled a: 2 ====== Your combined score is  16 ======</code> This was one of my runs. It seems to be doing it just fine. For your second question. It depends on what you&#39;re looking for. What&#39;s the logic if you do get a <code>negative</code> score?"}, {"owner": {"reputation": 1, "user_id": 10924728, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wH0h4sPECCQ/AAAAAAAAAAI/AAAAAAAAA-I/9UNuWAOBRqw/photo.jpg?sz=128", "display_name": "hussain ahmed", "link": "https://stackoverflow.com/users/10924728/hussain-ahmed"}, "edited": false, "score": 0, "creation_date": 1547677851, "post_id": 54225970, "comment_id": 95278771, "body": "the scores are not supposed to go below 0"}, {"owner": {"reputation": 1, "user_id": 10924728, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wH0h4sPECCQ/AAAAAAAAAAI/AAAAAAAAA-I/9UNuWAOBRqw/photo.jpg?sz=128", "display_name": "hussain ahmed", "link": "https://stackoverflow.com/users/10924728/hussain-ahmed"}, "edited": false, "score": 0, "creation_date": 1547677985, "post_id": 54225970, "comment_id": 95278817, "body": "when i ran the code i got this:   Player Two rolls first dice you rolled a  2 Player Two rolls second dice you rolled a  4 ====== Your combined score is  11 ======                                                          i think it only works for doubles"}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "reply_to_user": {"reputation": 1, "user_id": 10924728, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wH0h4sPECCQ/AAAAAAAAAAI/AAAAAAAAA-I/9UNuWAOBRqw/photo.jpg?sz=128", "display_name": "hussain ahmed", "link": "https://stackoverflow.com/users/10924728/hussain-ahmed"}, "edited": false, "score": 0, "creation_date": 1547678031, "post_id": 54225970, "comment_id": 95278841, "body": "Right it makes sense not to have scores go negative. But if the score IS negative, are you looking to basically turn it into 0? Or does the player get to go again somehow?"}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "reply_to_user": {"reputation": 1, "user_id": 10924728, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wH0h4sPECCQ/AAAAAAAAAAI/AAAAAAAAA-I/9UNuWAOBRqw/photo.jpg?sz=128", "display_name": "hussain ahmed", "link": "https://stackoverflow.com/users/10924728/hussain-ahmed"}, "edited": false, "score": 0, "creation_date": 1547678200, "post_id": 54225970, "comment_id": 95278899, "body": "That&#39;s because the rules you created. You said that &quot;If <code>dice1</code> and <code>dice2</code> are equal, give the player an extra roll OTHERWISE subtract 5 points from the score. Unless this is not what you wanted, the logic is wrong in your code. So <code>dice1 = 2</code>, <code>dice2 = 4</code> -- even number therefore <code>+ 10</code> -- <code>score = 16</code> but since <code>dice1 != dice2</code> SUBTRACT 5 which gives you <code>11</code> score for the round. These are rules you wrote for your game."}, {"owner": {"reputation": 1, "user_id": 10924728, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wH0h4sPECCQ/AAAAAAAAAAI/AAAAAAAAA-I/9UNuWAOBRqw/photo.jpg?sz=128", "display_name": "hussain ahmed", "link": "https://stackoverflow.com/users/10924728/hussain-ahmed"}, "edited": false, "score": 0, "creation_date": 1547678223, "post_id": 54225970, "comment_id": 95278906, "body": "the score turns into 0"}, {"owner": {"reputation": 1, "user_id": 10924728, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wH0h4sPECCQ/AAAAAAAAAAI/AAAAAAAAA-I/9UNuWAOBRqw/photo.jpg?sz=128", "display_name": "hussain ahmed", "link": "https://stackoverflow.com/users/10924728/hussain-ahmed"}, "edited": false, "score": 0, "creation_date": 1547678286, "post_id": 54225970, "comment_id": 95278925, "body": "an even number gets 10 points   odd gets -5 points     double gets extra go"}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "reply_to_user": {"reputation": 1, "user_id": 10924728, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wH0h4sPECCQ/AAAAAAAAAAI/AAAAAAAAA-I/9UNuWAOBRqw/photo.jpg?sz=128", "display_name": "hussain ahmed", "link": "https://stackoverflow.com/users/10924728/hussain-ahmed"}, "edited": false, "score": 0, "creation_date": 1547678422, "post_id": 54225970, "comment_id": 95278964, "body": "Your code is incorrect then since the <code>else</code> statement for subtracting 5 is all the way down there instead of being right after checking for <code>even</code> numbers."}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "reply_to_user": {"reputation": 1, "user_id": 10924728, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wH0h4sPECCQ/AAAAAAAAAAI/AAAAAAAAA-I/9UNuWAOBRqw/photo.jpg?sz=128", "display_name": "hussain ahmed", "link": "https://stackoverflow.com/users/10924728/hussain-ahmed"}, "edited": false, "score": 0, "creation_date": 1547678529, "post_id": 54225970, "comment_id": 95278997, "body": "@hussainahmed Check edit now. I have added the changes you requested."}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "reply_to_user": {"reputation": 1, "user_id": 10924728, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wH0h4sPECCQ/AAAAAAAAAAI/AAAAAAAAA-I/9UNuWAOBRqw/photo.jpg?sz=128", "display_name": "hussain ahmed", "link": "https://stackoverflow.com/users/10924728/hussain-ahmed"}, "edited": false, "score": 0, "creation_date": 1547678771, "post_id": 54225970, "comment_id": 95279069, "body": "I don&#39;t see why you need <code>elif</code> for those conditions. I have a feeling that you mis-wrote the rules of the game because some of the things you mentioned don&#39;t match with the code you wrote. Please take some time and edit your question to exactly what you&#39;re looking for and this attempt."}, {"owner": {"reputation": 1, "user_id": 10924728, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wH0h4sPECCQ/AAAAAAAAAAI/AAAAAAAAA-I/9UNuWAOBRqw/photo.jpg?sz=128", "display_name": "hussain ahmed", "link": "https://stackoverflow.com/users/10924728/hussain-ahmed"}, "edited": false, "score": 0, "creation_date": 1547679035, "post_id": 54225970, "comment_id": 95279159, "body": "how would i make sure that if both players have the same score at the end, they each roll 1 die and whoever gets the highest score wins (this repeats until someone wins). after that how would show who has won at the end and store the winner\u2019s score in a txt file and display the score from the txt file. thanks"}, {"owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "reply_to_user": {"reputation": 1, "user_id": 10924728, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wH0h4sPECCQ/AAAAAAAAAAI/AAAAAAAAA-I/9UNuWAOBRqw/photo.jpg?sz=128", "display_name": "hussain ahmed", "link": "https://stackoverflow.com/users/10924728/hussain-ahmed"}, "edited": false, "score": 0, "creation_date": 1547679350, "post_id": 54225970, "comment_id": 95279256, "body": "I&#39;d suggest that you take some time and go over a <code>python</code> tutorial."}], "tags": [], "owner": {"reputation": 443, "user_id": 10708112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2659fbf480bf93d4a53c1fac76280b9f?s=128&d=identicon&r=PG&f=1", "display_name": "hqkhan", "link": "https://stackoverflow.com/users/10708112/hqkhan"}, "is_accepted": false, "score": 0, "last_activity_date": 1547678659, "last_edit_date": 1547678659, "creation_date": 1547675606, "answer_id": 54225970, "question_id": 54225680, "link": "https://stackoverflow.com/questions/54225680/how-do-i-add-up-the-total-scores-of-each-round/54225970#54225970", "title": "how do i add up the total scores of each round", "body": "<p>I'd suggest you to re-write your code -- For instance, you can use a <code>for</code> loop instead of a <code>while</code> loop to keep track of rounds. I think use of <code>dict</code> or <code>list</code> is useful. I added two dictionaries for both players, <code>result_p1</code> and <code>result_p2</code> that store scores per round. The score can be negative (not sure if intended). </p>\n\n<p>Here is the code below:</p>\n\n<pre><code>import random\nimport time\n\ndef bothDice():\n    count=0\n\n    # New dicts that store counts\n    result_p1 = {}\n    result_p2 = {}\n\n    while count&lt;5:\n        count=count+1\n        score=0\n        print(\"Round\",count)\n        print(\"Player One rolls first dice\")\n        time.sleep(1)\n        dice1=(random.randint(1,6))\n        print(\"you rolled a \",dice1)\n        print(\"Player One rolls second dice\")\n        time.sleep(1)\n        dice2=(random.randint(1,6))\n        print(\"you rolled a \",dice2)\n\n        score=dice1+dice2\n        if score%2==0:\n            score=score+10\n        else:\n            score=score-5\n\n        if dice1==dice2:\n            print(\"You rolled a double- You get an extra roll\")\n            for x in range (1):\n                print(\"You rolled a:\")\n                extraDice=(random.randint(1,6))\n                print(extraDice)\n                extraScore = score+extraDice\n                score = extraScore\n\n\n\n        print(\"======\",\"Your combined score is \", score,\"======\")\n\n        # Store result of this round for player 1\n        if score != 0:\n            result_p1[count] = score\n        else:\n            result_p1[count] = 0\n\n        score=0\n        print(\"Player Two rolls first dice\")\n        time.sleep(1)\n        dice1=(random.randint(1,6))\n        print(\"you rolled a \",dice1)\n        print(\"Player Two rolls second dice\")\n        time.sleep(1)\n        dice2=(random.randint(1,6))\n        print(\"you rolled a \",dice2)\n\n        score=dice1+dice2\n        if score%2==0:\n            score=score+10\n        else:\n            score=score-5\n        if dice1==dice2:\n            print(\"You rolled a double- You get an extra roll\")\n            for x in range (1):\n                print(\"You rolled a:\")\n                extraDice=(random.randint(1,6))\n                print(extraDice)\n                extraScore = score+extraDice\n                score = extraScore\n\n        print(\"======\",\"Your combined score is \", score,\"======\")\n\n        # Store result of this round for player 2\n        if score != 0:\n            result_p2[count] = score\n        else:\n            result_p2[count] = 0\n\n    # Print sum of results using f-string in python 3.\n    print(f\"Player 1 scores: {result_p1}\")\n    print(f\"Player 2 scores: {result_p2}\")\n    print(f\"Sum of player 1 score: {sum(result_p1.values())}\")\n    print(f\"Sum of player 2 score: {sum(result_p2.values())}\")\n\ndef main():\n   bothDice()\n\n\nmain()\n</code></pre>\n\n<p><a href=\"https://docs.python.org/3/reference/lexical_analysis.html#f-strings\" rel=\"nofollow noreferrer\">This</a> might be useful if my print statement didn't make sense. </p>\n\n<p>Here is an output of the new print statements.</p>\n\n<pre><code>Player 1 scores: {1: 9, 2: 13, 3: 17, 4: 0, 5: 19}\nPlayer 2 scores: {1: 17, 2: 13, 3: 13, 4: -2, 5: -2}\nSum of player 1 score: 58\nSum of player 2 score: 39\n</code></pre>\n\n<p>Edit: Added <code>if</code> statements before adding score to player <code>dict</code> to check if <code>score</code> is negative. If negative -> add <code>0</code> instead.</p>\n"}], "owner": {"reputation": 1, "user_id": 10924728, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wH0h4sPECCQ/AAAAAAAAAAI/AAAAAAAAA-I/9UNuWAOBRqw/photo.jpg?sz=128", "display_name": "hussain ahmed", "link": "https://stackoverflow.com/users/10924728/hussain-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1547678659, "creation_date": 1547674156, "last_edit_date": 1547676554, "question_id": 54225680, "link": "https://stackoverflow.com/questions/54225680/how-do-i-add-up-the-total-scores-of-each-round", "title": "how do i add up the total scores of each round", "body": "<p>I have created a dice game which displays the scores at the end of each round. I would like to know how to separately add up the scores of both players so it displays the total score of 5 rounds.</p>\n\n<p>This is the code below:</p>\n\n<pre><code>import random\nimport time\n\ndef bothDice():\n    count=0  \n    while count&lt;5:\n        count=count+1\n        score=0\n        print(\"Round\",count)\n        print(\"Player One rolls first dice\")\n        time.sleep(1)\n        dice1=(random.randint(1,6))\n        print(\"you rolled a \",dice1)\n        print(\"Player One rolls second dice\")\n        time.sleep(1)\n        dice2=(random.randint(1,6))\n        print(\"you rolled a \",dice2)\n\n        score=dice1+dice2\n        if score%2==0:\n            score=score+10\n\n        if dice1==dice2:\n            print(\"You rolled a double- You get an extra roll\")\n            for x in range (1):\n                print(\"You rolled a:\")\n                extraDice=(random.randint(1,6))\n                print(extraDice)\n                extraScore = score+extraDice\n                score = extraScore\n\n        else:\n            score=score-5\n\n        print(\"======\",\"Your combined score is \", score,\"======\")\n\n        score=0\n        print(\"Player Two rolls first dice\")\n        time.sleep(1)\n        dice1=(random.randint(1,6))\n        print(\"you rolled a \",dice1)\n        print(\"Player Two rolls second dice\")\n        time.sleep(1)\n        dice2=(random.randint(1,6))\n        print(\"you rolled a \",dice2)\n\n        score=dice1+dice2\n        if score%2==0:\n            score=score+10\n        if dice1==dice2:\n            print(\"You rolled a double- You get an extra roll\")\n            for x in range (1):\n                print(\"You rolled a:\")\n                extraDice=(random.randint(1,6))\n                print(extraDice)\n                extraScore = score+extraDice\n                score = extraScore\n\n        else:\n            score=score-5\n        print(\"======\",\"Your combined score is \", score,\"======\")\n\n\ndef main():\n   bothDice()\n\n\nmain()\n</code></pre>\n\n<p>How would I make the scores of each round add together?\nThanks</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "is_accepted": true, "score": 2, "last_activity_date": 1547676942, "creation_date": 1547676942, "answer_id": 54226217, "question_id": 54225667, "link": "https://stackoverflow.com/questions/54225667/join-data-frames-using-closest-hour-and-fill-in-missing-time-stamps-for-particul/54226217#54226217", "title": "Join Data Frames Using Closest Hour and Fill in Missing Time Stamps for Particular Objects", "body": "<p>In general Pandas makes \"equi-joins\" easy, but other sorts are kind of difficult.  In this case you're lucky, as there's a nice method called <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.merge_asof.html\" rel=\"nofollow noreferrer\"><code>merge_asof</code></a> that should do what you need.</p>\n\n<p>It's a bit pedantic about how your data is set up, but a MWE is:</p>\n\n<pre><code>from io import StringIO\nimport pandas as pd\n\ndf1 = pd.read_table(StringIO(\"\"\"1    object_name     time_epoch_ms      source      data\n2    a               1538518822490      source_1     some_data_1\n3    b               1538528822490      source_2     some_data_2\n4    b               1538538822490      source_2     some_data_3\n5    b               1538548822490      source_3     some_data_4\n6    b               1538558822490      source_1     some_data_5\n7    c               1538568822490      source_2     some_data_6\n8    c               1538578822490      source_2     some_data_7\n9    c               1538588822490      source_2     some_data_8\n\"\"\"), sep=r\"\\s+\", index_col=0)\n\ndf2 = pd.read_table(StringIO(\"\"\"1    object_name     time_epoch_ms      new_data\n2    a               1538518722490      x\n3    b               1538528822490      y\n4    b               1538518922490      z\n5    b               1538519922490      a\n6    b               1538598822490      b\n7    c               1538548822490      c\n8    c               1538538822490      c\n9    c               1538528822490      d\n\"\"\"), sep=r\"\\s+\", index_col=0)\n\npd.merge_asof(\n    df2.sort_values(['time_epoch_ms', 'object_name']),\n    df1.sort_values(['time_epoch_ms', 'object_name']),\n    by=\"object_name\", on=\"time_epoch_ms\",\n    direction='forward',\n).sort_values(['object_name', 'time_epoch_ms'])\n</code></pre>\n\n<p>which gives back:</p>\n\n<pre><code>  object_name  time_epoch_ms new_data    source         data\n0           a  1538518722490        x  source_1  some_data_1\n1           b  1538518922490        z  source_2  some_data_2\n2           b  1538519922490        a  source_2  some_data_2\n3           b  1538528822490        y  source_2  some_data_2\n7           b  1538598822490        b       NaN          NaN\n4           c  1538528822490        d  source_2  some_data_6\n5           c  1538538822490        c  source_2  some_data_6\n6           c  1538548822490        c  source_2  some_data_6\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/q/50573457/1358308\">Pandas equivalent of SQL non-equi JOIN</a> for another example.  There's also <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.merge_ordered.html\" rel=\"nofollow noreferrer\"><code>merge_ordered</code></a> but I don't think that helps your case.</p>\n"}], "owner": {"reputation": 801, "user_id": 2707197, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/b9639bc11c8cd31c5dcbd3d20db4d347?s=128&d=identicon&r=PG&f=1", "display_name": "RebeccaK375", "link": "https://stackoverflow.com/users/2707197/rebeccak375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 54226217, "answer_count": 1, "score": 1, "last_activity_date": 1547676942, "creation_date": 1547674108, "question_id": 54225667, "link": "https://stackoverflow.com/questions/54225667/join-data-frames-using-closest-hour-and-fill-in-missing-time-stamps-for-particul", "title": "Join Data Frames Using Closest Hour and Fill in Missing Time Stamps for Particular Objects", "body": "<p>I have two data frames. </p>\n\n<p>Data Frame #1 (df1):</p>\n\n<pre><code>1    object_name     time_epoch_ms      source      data\n2    a               1538518822490      source_1     some_data\n3    b               1538528822490      source_2     some_data\n4    b               1538538822490      source_2     some_data\n5    b               1538548822490      source_3     some_data\n6    b               1538558822490      source_1     some_data\n7    c               1538568822490      source_2     some_data\n8    c               1538578822490      source_2     some_data\n9    c               1538588822490      source_2     some_data\n... etc etc\n</code></pre>\n\n<p>Data Frame #2(df2):</p>\n\n<pre><code>1    object_name     time_epoch_ms      new_data\n2    a               1538518722490      x\n3    b               1538528822490      y\n4    b               1538518922490      z\n5    b               1538519922490      a\n6    b               1538598822490      b\n7    c               1538548822490      c\n8    c               1538538822490      c\n9    c               1538528822490      d\n... etc etc\n</code></pre>\n\n<p>Entries in these two tables give information about objects with object_names for different points in time.</p>\n\n<p>I would like to combine these two tables such that Data Frame #2 is augmented with the source the object_name was using at a particular time specified in Data Frame #1. </p>\n\n<p>Problem: Timestamps in the two tables do not exactly match. Some timestamps that exist in table 2 do not exist in table 1. However, they should roughly correspond to the hour. Some timestamps in Table 1 are missing, so the \"last available data\" is best.</p>\n\n<p>Is there a way to execute the following steps using pandas' merge ability?</p>\n\n<ol>\n<li>Match data from dataframes such that df2 gets \"source\" data from\ndf1 based on object_name and time_stamp such that time_stamp matches\nto the closest hour.</li>\n<li>If data for a particular hour is in df2, but\n    not df1, then source is retried from the last available hour of\n    data, so it is \"filled\" based on whatever data exists for that\n    object.</li>\n<li>If object in df2 is not in df1, then it gets a \"null\"</li>\n</ol>\n\n<p>My approach:</p>\n\n<p>I currently do .apply to get each row from df2 and find all the timestamps for that object in df1, if they exist. Then, I return the closest match or null.</p>\n\n<p>I am wondering if there is a more elegant way to do this using pandas' merge or concat functionality, but I am having trouble understanding how to use them in this case and how to handle filling data in and matching based to the hour (without doing separate pre-processing to get an hour column in there).</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1547674477, "post_id": 54225643, "comment_id": 95277331, "body": "What &quot;custom behavior&quot; are you trying to add?"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 2, "creation_date": 1547674523, "post_id": 54225643, "comment_id": 95277344, "body": "Well, the type returned by <code>open</code> depends on how you called it..."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1547675110, "post_id": 54225643, "comment_id": 95277607, "body": "Is there a reason you <i>need</i> a base class? Thanks to the magic of duck typing, it shouldn&#39;t need to matter (particularly if you just wrap the underlying object and pass through any calls you don&#39;t recognize). I can think of several other approaches to building type-agnostic wrappers as well."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1547678074, "post_id": 54225643, "comment_id": 95278855, "body": "Ideally I want to know a base class from which I can derive a subclass, so I can avoid playing tricks like overriding base classes etc. So it&#39;s more about the creation type... duck typing is for the consumer. With this question I&#39;m asking for information about the situation with file objects. Maybe the answer is still &quot;open file objects come in varieties that have nothing in common&quot;, maybe it&#39;s not."}], "owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1547674004, "creation_date": 1547674004, "question_id": 54225643, "link": "https://stackoverflow.com/questions/54225643/base-class-for-open-file-objects", "title": "Base class for open file objects?", "body": "<p>Suppose I want to add some custom behavior to a file object, such as returned by <code>open()</code>. According <a href=\"https://stackoverflow.com/a/23796737/699305\">this answer</a>, there is (or was) no single base type for all file-like objects. Is this really still true? How about <code>io.IOBase</code>, or one of <em>its</em> subclasses, as suggested <a href=\"https://stackoverflow.com/a/24812058/699305\">here</a>? Or perhaps by now there is an <a href=\"https://docs.python.org/3/library/abc.html\" rel=\"nofollow noreferrer\">abstract base class</a> that I could use? </p>\n\n<p>I have already looked at <a href=\"https://stackoverflow.com/questions/16085292/subclassing-file-objects-to-extend-open-and-close-operations-in-python-3\">this question</a>, but (besides being quite old) the issues there are about customizing the <code>close()</code> method (best done with a context manager). So this does not answer my question (and please don't mark this question as a duplicate of it!). </p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 1, "creation_date": 1547673881, "post_id": 54225595, "comment_id": 95277082, "body": "<code>index</code> is a named argument to the <code>drop</code> function. You can use <code>arg = some_value</code> to specify named arguments. The not equals here doesn&#39;t make sense. The interpreter is looking for a variable named <code>index</code> to compare against the list but as the error indicates, this variable is not defined."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8207612"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1547674807, "post_id": 54225595, "comment_id": 95277479, "body": "Understood the mistake I was doing. Thanks for the explanation!"}], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 4, "last_activity_date": 1547698266, "last_edit_date": 1547698266, "creation_date": 1547673944, "answer_id": 54225623, "question_id": 54225595, "link": "https://stackoverflow.com/questions/54225595/how-to-keep-only-specific-rows-from-a-dataframe-in-python/54225623#54225623", "title": "How to keep only specific rows from a dataframe in Python?", "body": "<p>To explain the reason for your exception, the expression</p>\n\n<pre><code>index != [128, 133, 140, 143, 199]\n</code></pre>\n\n<p>Is evaluated as a conditional expression, rather than treating <code>index</code> as a keyword argument. Python searches for the variable <code>index</code> to compare against the list. Since <code>index</code> is not defined, you see a <code>NameError</code>.</p>\n\n<hr>\n\n<p>Use <code>Index.difference</code> to fix your <code>drop</code> solution:</p>\n\n<pre><code>dataset.drop(index=df.index.difference([128, 133, 140, 143, 199]))\n</code></pre>\n\n<p>Or, even more idiomatically, you should use <code>loc</code> to <em>select</em> if you have positive labels.</p>\n\n<pre><code>dataset.loc[[128, 133, 140, 143, 199]]\n# If they are indexes,\n# dataset.iloc[[128, 133, 140, 143, 199]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 134, "user_id": 10405959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/879a3af22a7c0aac4cd7906ef211df3e?s=128&d=identicon&r=PG&f=1", "display_name": "Schematic", "link": "https://stackoverflow.com/users/10405959/schematic"}, "is_accepted": false, "score": 0, "last_activity_date": 1547674417, "creation_date": 1547674417, "answer_id": 54225742, "question_id": 54225595, "link": "https://stackoverflow.com/questions/54225595/how-to-keep-only-specific-rows-from-a-dataframe-in-python/54225742#54225742", "title": "How to keep only specific rows from a dataframe in Python?", "body": "<p>As @pault said, you can't use a comparison (!=) here because index is a named argument. What I would do here is create a list of all the indices, for example:</p>\n\n<pre><code>indices = list(range(0, 200))\n</code></pre>\n\n<p>Then remove the ones you want to keep:</p>\n\n<pre><code>for x in [128, 133, 140, 143, 199]:\n    indices.remove(x)\n</code></pre>\n\n<p>Now you have a list of all the indices you want to remove:</p>\n\n<pre><code>dropped_data = dataset.drop(index=indices)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8207612"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4026, "favorite_count": 0, "accepted_answer_id": 54225623, "answer_count": 2, "score": 2, "last_activity_date": 1547698266, "creation_date": 1547673806, "last_edit_date": 1547674037, "question_id": 54225595, "link": "https://stackoverflow.com/questions/54225595/how-to-keep-only-specific-rows-from-a-dataframe-in-python", "title": "How to keep only specific rows from a dataframe in Python?", "body": "<p>I have a DataFrame with 200 indices. I want to delete all the rows belonging to other indices except those belonging to certain indices like 128, 133, 140, 143, 199.</p>\n\n<p>Previously, I dropped all the rows belonging to the indices 128, 133, 140, 143, 199, and it had worked fine. My code was</p>\n\n<pre><code>dataset_drop = dataset.drop(index = [128, 133, 140, 143, 199])\n</code></pre>\n\n<p>Now, I am trying to do the other way round. I want to keep the rows belonging to the indices 128, 133, 140, 143, 199 and delete the others.</p>\n\n<p>What I tried doing:</p>\n\n<pre><code>dropped_data = dataset.drop(index != [128, 133, 140, 143, 199])\n</code></pre>\n\n<p>When I do this, I get an error saying</p>\n\n<pre><code>NameError: name 'index' is not defined\n</code></pre>\n\n<p>Can anyone tell what is it that I am doing wrong?</p>\n"}, {"tags": ["python", "dictionary", "duplicates"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1547673890, "post_id": 54225574, "comment_id": 95277084, "body": "@DanielMesejo in this case, the duplicate keys are in the same dictionary, so I think they need something like a defaultdict with a loop. Maybe you can find that duplicate."}, {"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1547674147, "post_id": 54225574, "comment_id": 95277211, "body": "@coldspeed: <a href=\"https://stackoverflow.com/questions/31430384/how-to-sum-values-of-tuples-that-have-same-name-in-python\" title=\"how to sum values of tuples that have same name in python\">stackoverflow.com/questions/31430384/&hellip;</a>"}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1547674338, "post_id": 54225574, "comment_id": 95277276, "body": "ufff, accepted answer there is horrible."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1547674884, "post_id": 54225574, "comment_id": 95277515, "body": "@wim true. But the other answer has more upvotes now. Do you think it could have been closed differently? it&#39;s a duplicate all right. Maybe another Q&amp;A answers better?"}, {"owner": {"reputation": 19, "user_id": 10924527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6937c685d4ad3853c2f7935d23845e68?s=128&d=identicon&r=PG&f=1", "display_name": "aritten", "link": "https://stackoverflow.com/users/10924527/aritten"}, "edited": false, "score": 0, "creation_date": 1547675132, "post_id": 54225574, "comment_id": 95277619, "body": "I have already tried the solutions posted in both of those (and any other post that was even remotely similar), and neither worked."}, {"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1547675582, "post_id": 54225574, "comment_id": 95277811, "body": "Yeah, I mean I guess none of them would really work because you need the zip."}], "answers": [{"comments": [{"owner": {"reputation": 30387, "user_id": 6260170, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/0caf9a0d28be362618ffc0223b301d6e?s=128&d=identicon&r=PG&f=1", "display_name": "Chris_Rands", "link": "https://stackoverflow.com/users/6260170/chris-rands"}, "edited": false, "score": 0, "creation_date": 1547674541, "post_id": 54225714, "comment_id": 95277349, "body": "<code>data = collections.defaultdict(int)</code> etc."}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 1, "last_activity_date": 1547674293, "creation_date": 1547674293, "answer_id": 54225714, "question_id": 54225574, "link": "https://stackoverflow.com/questions/54225574/how-to-merge-two-lists-into-a-dictionary-and-sum-values-for-duplicate-keys/54225714#54225714", "title": "How to merge two lists into a dictionary and sum values for duplicate keys", "body": "<p>A plain old loop is best here:</p>\n\n<pre><code>&gt;&gt;&gt; data = {}\n&gt;&gt;&gt; for key, val in zip(key_list, value_list): \n...     data[key] = data.get(key, 0) + val \n... \n&gt;&gt;&gt; data \n{1: 2, 5: 7, 3: 9, 8: 10}\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10924527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6937c685d4ad3853c2f7935d23845e68?s=128&d=identicon&r=PG&f=1", "display_name": "aritten", "link": "https://stackoverflow.com/users/10924527/aritten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "closed_date": 1547674176, "answer_count": 1, "score": 1, "last_activity_date": 1547674293, "creation_date": 1547673708, "question_id": 54225574, "link": "https://stackoverflow.com/questions/54225574/how-to-merge-two-lists-into-a-dictionary-and-sum-values-for-duplicate-keys", "closed_reason": "Duplicate", "title": "How to merge two lists into a dictionary and sum values for duplicate keys", "body": "<p>I am trying to build a function to merge two lists into a dictionary, but the \"key\" list contains duplicates.  I would like to sum the values based on the key.  The lists could have any number of values (but each list would have the same number).</p>\n\n<p>I have tried out many different codes that I have found through Googling, but none of them were for this situation, and none worked quite right.  I'm just getting started with learning Python, so I'm sure there's something I'm missing!</p>\n\n<pre><code>my_dict={}\ndef merge_lists(my_dict):\n    newlist={k: sum(i[k] for i in my_dict) for k in my_dict[0]}\n    return newlist       \n</code></pre>\n\n<p>If I start with these lists: \nkey_list=[1, 5, 3, 8, 5, 8, 3], value_list=[2, 3, 7, 1, 4, 9, 2]</p>\n\n<p>I'm looking for this result:  {'1':2, '3':9, '5':7, '8':10}</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 19688, "user_id": 3149020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001905387968/picture?type=large", "display_name": "Spencer Wieczorek", "link": "https://stackoverflow.com/users/3149020/spencer-wieczorek"}, "edited": false, "score": 0, "creation_date": 1547673765, "post_id": 54225536, "comment_id": 95277024, "body": "Indent your for loop to be inside your <code>with</code>. Replace <code>5</code> with <code>row_count</code>. Note you can used the <code>csvfile</code> directly instead of <code>reader</code>."}, {"owner": {"reputation": 134, "user_id": 6519570, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-erHnpnxBOj0/AAAAAAAAAAI/AAAAAAAAAHo/Foijjq4FXMg/photo.jpg?sz=128", "display_name": "Brad Fallon", "link": "https://stackoverflow.com/users/6519570/brad-fallon"}, "edited": false, "score": 0, "creation_date": 1547673807, "post_id": 54225536, "comment_id": 95277045, "body": "Is the data type of &quot;reader&quot; a list? Is &quot;row&quot; a dict?"}, {"owner": {"reputation": 134, "user_id": 6519570, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-erHnpnxBOj0/AAAAAAAAAAI/AAAAAAAAAHo/Foijjq4FXMg/photo.jpg?sz=128", "display_name": "Brad Fallon", "link": "https://stackoverflow.com/users/6519570/brad-fallon"}, "edited": false, "score": 0, "creation_date": 1547673943, "post_id": 54225536, "comment_id": 95277111, "body": "I don&#39;t see why a counter is needed at all. The for loop will exit when each item has been iterated from a list. The exit command will quit the script. If the exit command is actually needed, then move it out of the for loop."}], "answers": [{"tags": [], "owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "is_accepted": true, "score": 2, "last_activity_date": 1547673888, "creation_date": 1547673888, "answer_id": 54225613, "question_id": 54225536, "link": "https://stackoverflow.com/questions/54225536/using-csv-row-length-as-variable-in-loop/54225613#54225613", "title": "Using csv row length as variable in loop", "body": "<p>Make sure to keep everything you do with the <code>reader</code> inside of the <code>with</code> block. Once the <code>with</code> block exits you can't access the reader anymore since the file is automatically closed.</p>\n\n<pre><code>count = 0\nwith open('mydata.csv', newline='') as csvfile:\n\n    reader = csv.DictReader(csvfile)\n\n    for row in reader:\n        count += 1\n        print(count)\n</code></pre>\n\n<p>Additionally you don't need the <code>sys.exit()</code>, your loop terminates by itself once you run out of lines. After this block of code you can use <code>count</code> wherever.</p>\n"}], "owner": {"reputation": 5630, "user_id": 5905425, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/badc510470c0747b371b267573b3d9b6?s=128&d=identicon&r=PG&f=1", "display_name": "the_darkside", "link": "https://stackoverflow.com/users/5905425/the-darkside"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 54225613, "answer_count": 1, "score": 0, "last_activity_date": 1547673955, "creation_date": 1547673532, "last_edit_date": 1547673955, "question_id": 54225536, "link": "https://stackoverflow.com/questions/54225536/using-csv-row-length-as-variable-in-loop", "title": "Using csv row length as variable in loop", "body": "<p>I am new to python - in the script below, I am setting the variable <code>count</code> to 0 and then looping over over each row of the csv file.  When the count reaches 5, I want to script to stop, and it does. </p>\n\n<p>However, in this case I know that the number of rows in the csv is 5.  What if I don't know the number of rows? I've commented out two lines that I've tried to use to give me the <code>row_count</code> and then to subsequently use the <code>row_count</code> variable <strong>in place</strong> of 5.  However, when I uncomment those two lines, the script just stops at <code>print(row_count)</code>.  What am I doing wrong here and how can I use the <code>row_count</code> variable further down so that <code>sys.exit()</code> happens on the last row? </p>\n\n<pre><code>count = 0\n\n\nwith open('mydata.csv', newline='') as csvfile:\n     reader = csv.DictReader(csvfile)\n     #row_count = sum(1 for row in reader)\n     #print(row_count)\n\n     for row in reader:\n         count += 1\n         print(count)\n         if count == 5:\n              sys.exit()\n</code></pre>\n"}, {"tags": ["python", "pandas", "for-loop", "iteration"], "comments": [{"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1547826243, "post_id": 54225524, "comment_id": 95338518, "body": "I think the issue you are having is that you use <code>freq=&#39;M&#39;</code> when it needs to be <code>freq=&#39;MS</code>&#39; when defining to_one. Again, this assumes your dates in your index are <b>always</b> the first of the month, if that&#39;s not the case you&#39;ll need to provide some examples of what the dates are."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10924660, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_iLMhfltNCM/AAAAAAAAAAI/AAAAAAAAASU/P4CBTc5SG1U/photo.jpg?sz=128", "display_name": "Jr Analyst", "link": "https://stackoverflow.com/users/10924660/jr-analyst"}, "edited": false, "score": 0, "creation_date": 1547731758, "post_id": 54225964, "comment_id": 95298481, "body": "Thank you! I&#39;ll try it out today and see how it goes."}, {"owner": {"reputation": 33, "user_id": 10924660, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_iLMhfltNCM/AAAAAAAAAAI/AAAAAAAAASU/P4CBTc5SG1U/photo.jpg?sz=128", "display_name": "Jr Analyst", "link": "https://stackoverflow.com/users/10924660/jr-analyst"}, "edited": false, "score": 0, "creation_date": 1547732223, "post_id": 54225964, "comment_id": 95298717, "body": "I tried out what you proposed but get the following error when I get to the line &quot;np.hstack...&quot; : ValueError: Cannot add integral value to Timestamp without freq.  I looked up some other solutions to this problem elsewhere on stackoverflow, but none of them made sense to me. For reference, the df from which my Series A was made has months and years as row indexes (ex: 2018-08-01, 2018-07-01, etc)."}, {"owner": {"reputation": 33, "user_id": 10924660, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_iLMhfltNCM/AAAAAAAAAAI/AAAAAAAAASU/P4CBTc5SG1U/photo.jpg?sz=128", "display_name": "Jr Analyst", "link": "https://stackoverflow.com/users/10924660/jr-analyst"}, "edited": false, "score": 0, "creation_date": 1547732638, "post_id": 54225964, "comment_id": 95298948, "body": "I think what I need to do is somehow tell np.hstack to add months instead of just numbers like 1 and 7 to each value in idx, but I don&#39;t know how to do that."}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "reply_to_user": {"reputation": 33, "user_id": 10924660, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_iLMhfltNCM/AAAAAAAAAAI/AAAAAAAAASU/P4CBTc5SG1U/photo.jpg?sz=128", "display_name": "Jr Analyst", "link": "https://stackoverflow.com/users/10924660/jr-analyst"}, "edited": false, "score": 0, "creation_date": 1547736486, "post_id": 54225964, "comment_id": 95301313, "body": "@JrAnalyst are your indices <code>datetime</code> objects or just strings? If they are <code>datetimes</code> then you can try: <code>np.hstack(pd.date_range(start=x+pd.offsets.DateOffset(months&zwnj;&#8203;=1), freq=&#39;M&#39;, periods=6) for x in idx)</code> which should give you the list of months, assuming <code>idx</code> is a list of <code>datetimes</code>"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "reply_to_user": {"reputation": 33, "user_id": 10924660, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_iLMhfltNCM/AAAAAAAAAAI/AAAAAAAAASU/P4CBTc5SG1U/photo.jpg?sz=128", "display_name": "Jr Analyst", "link": "https://stackoverflow.com/users/10924660/jr-analyst"}, "edited": false, "score": 0, "creation_date": 1547737043, "post_id": 54225964, "comment_id": 95301679, "body": "@JrAnalyst See the update, let me know if that solves it."}, {"owner": {"reputation": 33, "user_id": 10924660, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_iLMhfltNCM/AAAAAAAAAAI/AAAAAAAAASU/P4CBTc5SG1U/photo.jpg?sz=128", "display_name": "Jr Analyst", "link": "https://stackoverflow.com/users/10924660/jr-analyst"}, "edited": false, "score": 0, "creation_date": 1547741351, "post_id": 54225964, "comment_id": 95304391, "body": "I&#39;m at work currently, but I&#39;ll give it a shot in the afternoon. Thank you so much for taking the time to help out btw."}, {"owner": {"reputation": 33, "user_id": 10924660, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_iLMhfltNCM/AAAAAAAAAAI/AAAAAAAAASU/P4CBTc5SG1U/photo.jpg?sz=128", "display_name": "Jr Analyst", "link": "https://stackoverflow.com/users/10924660/jr-analyst"}, "edited": false, "score": 0, "creation_date": 1547761789, "post_id": 54225964, "comment_id": 95314087, "body": "Tried your method out. While everything runs perfectly, Series B still comes up filled with nothing but 0.ex: s2.unique() returns &quot; array([0]), dtype=int64 &quot;"}, {"owner": {"reputation": 33, "user_id": 10924660, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_iLMhfltNCM/AAAAAAAAAAI/AAAAAAAAASU/P4CBTc5SG1U/photo.jpg?sz=128", "display_name": "Jr Analyst", "link": "https://stackoverflow.com/users/10924660/jr-analyst"}, "edited": false, "score": 0, "creation_date": 1547761852, "post_id": 54225964, "comment_id": 95314110, "body": "Let me share the rest of the relevant code in an edit in my question. That might show where I went wrong as I still can&#39;t figure it out..."}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "reply_to_user": {"reputation": 33, "user_id": 10924660, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_iLMhfltNCM/AAAAAAAAAAI/AAAAAAAAASU/P4CBTc5SG1U/photo.jpg?sz=128", "display_name": "Jr Analyst", "link": "https://stackoverflow.com/users/10924660/jr-analyst"}, "edited": false, "score": 0, "creation_date": 1547761863, "post_id": 54225964, "comment_id": 95314113, "body": "@JrAnalyst it&#39;s possible the indices of the two do not exactly match, in which case the filter <code>s2[s2.index.isin(to_one)]</code> would do nothing. Since the other should be based on the first one, why not just create it with <code>s2 = s*0</code>, which would ensure the same index?"}], "tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": true, "score": 0, "last_activity_date": 1547737027, "last_edit_date": 1547737027, "creation_date": 1547675592, "answer_id": 54225964, "question_id": 54225524, "link": "https://stackoverflow.com/questions/54225524/question-about-iterating-through-pandas-series-with-conditional-statements/54225964#54225964", "title": "Question about iterating through Pandas series with conditional statements", "body": "<p>You can create an ID for consecutive groups of <code>1</code>s using <code>.shift</code> + <code>.cumsum</code>:</p>\n\n<pre><code>gps = s.ne(s.shift(1)).where(s.astype(bool)).cumsum()\n</code></pre>\n\n<p>Then you can get the last index for each group by: </p>\n\n<pre><code>idx = s[::-1].groupby(gps).idxmax()\n\n#0\n#1.0     5\n#2.0    18\n#Name: 0, dtype: int64\n</code></pre>\n\n<p>Frorm the list of all indices with <code>np.hstack</code> </p>\n\n<pre><code>import numpy as np\n\nnp.hstack(np.arange(x+1, x+7, 1) for x in idx)\n#array([ 6,  7,  8,  9, 10, 11, 19, 20, 21, 22, 23, 24])\n</code></pre>\n\n<p>And set those indices to 1 in the second Series:</p>\n\n<pre><code>s2[np.hstack(np.arange(x+1, x+7, 1) for x in idx)] = 1\n\ns2.ravel()\n# array([0., 0., 0., 0., 0., 0., 1., 1., 1., 1., 1., 1., 0., 0., 0., 0., 0.,..\n</code></pre>\n\n<hr>\n\n<p>Update from your comment: Assuming you have a <code>Series</code> <code>s</code> whose indices are <code>datetimes</code>, and another <code>Series</code> <code>s2</code> which has the same indices but all values are 0 and they have the <code>MonthStart</code> frequency, you can proceed in a similar fasion:</p>\n\n<pre><code>s = pd.Series([0,0,0,0,0,0,0,0,0,1,1]*5, index=pd.date_range('2010-01-01', freq='MS', periods=55))\ns2 = s*0\n\ngps = s.ne(s.shift(1)).where(s.astype(bool)).cumsum()\nidx = s[::-1].groupby(gps).idxmax()\n\n#1.0   2010-11-01\n#2.0   2011-10-01\n#3.0   2012-09-01\n#4.0   2013-08-01\n#5.0   2014-07-01\n#dtype: datetime64[ns]\n\nto_one = np.hstack(pd.date_range(start=x+pd.offsets.DateOffset(months=1), freq='MS', periods=6) for x in idx)\n\ns2[s2.index.isin(to_one)]= 1\n# I check .isin in case the indices extend beyond the indices in s2\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 10924660, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_iLMhfltNCM/AAAAAAAAAAI/AAAAAAAAASU/P4CBTc5SG1U/photo.jpg?sz=128", "display_name": "Jr Analyst", "link": "https://stackoverflow.com/users/10924660/jr-analyst"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 54225964, "answer_count": 1, "score": 0, "last_activity_date": 1547762127, "creation_date": 1547673499, "last_edit_date": 1547762127, "question_id": 54225524, "link": "https://stackoverflow.com/questions/54225524/question-about-iterating-through-pandas-series-with-conditional-statements", "title": "Question about iterating through Pandas series with conditional statements", "body": "<p>I'm trying to generate a column that would have zeros everywhere except when a specific condition is met. </p>\n\n<p>Right now, I have an existing series of 0s and 1s saved as a Series object. Let's call this Series A. I've created another series of the same size filled with zeros, let's call this Series B. What I'd like to do is, whenever I hit the last 1 in a sequence of 1s in Series A, then the next six rows of Series B should replace the 0s with 1s. </p>\n\n<p>For example: </p>\n\n<p>Series A</p>\n\n<p>0\n0\n0\n0\n1\n1\n0\n0\n0\n0\n0\n0\n0\n0\n0\n0\n1\n1\n1\n0\n0\n0\n0...</p>\n\n<p>Should produce Series B</p>\n\n<p>0\n0\n0\n0\n0\n0\n1\n1\n1\n1\n1\n1\n0\n0\n0\n0\n0\n0\n0\n1\n1\n1\n1...</p>\n\n<p>Here's what I've tried so far: </p>\n\n<pre><code>for row in SeriesA:\n    if row == 1:\n        continue\n    if SeriesA[row] == 1 and SeriesA[row  + 1] == 0:\n        SeriesB[row]=1\n        SeriesB[row+1]=1\n        SeriesB[row+2]=1\n        SeriesB[row+3]=1\n        SeriesB[row+4]=1\n        SeriesB[row+5]=1\n</code></pre>\n\n<p>However, this just generates Series B full of zeros except for the first five rows with become 1s. (Series A is all zeros until at least row 50)</p>\n\n<p>I think I'm not understanding how iterating works with Pandas, so any help is appreciated!</p>\n\n<p>EDIT: Full(ish) code</p>\n\n<pre><code>import os\nimport numpy as np\nimport pandas as pd\ndf = pd.read_csv(\"Python_Datafile.csv\", names = fields) #fields is a list with names for each column, the first column is called \"Date\".\ndf[\"Date\"] = pd.to_datetime(df[\"Date\"], format = \"%m/%Y\")\ndf.set_index(\"Date\", inplace = True)\n\nRecession = df[\"NBER\"] # This is series A\n\nRin6 = Recession*0 # This is series B\n\ngps = Recession.ne(Recession.shift(1)).where(Recession.astype(bool)).cumsum()\nidx = Recession[::-1].groupby(gps).idxmax()\nto_one = np.hstack(pd.date_range(start=x+pd.offsets.DateOffset(months=1), freq='M', periods=6) for x in idx)\nRin6[Rin6.index.isin(to_one)]= 1\n\nRin6.unique() # Returns -&gt; array([0], dtype=int64)\n</code></pre>\n"}, {"tags": ["python", "swagger", "openapi", "servicestack-openapi"], "comments": [{"owner": {"reputation": 57048, "user_id": 113116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e0v1H.png?s=128&g=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/113116/helen"}, "edited": false, "score": 1, "creation_date": 1547714503, "post_id": 54225500, "comment_id": 95288723, "body": "It&#39;s a bug: <a href=\"https://github.com/OpenAPITools/openapi-generator/issues/1577\" rel=\"nofollow noreferrer\">github.com/OpenAPITools/openapi-generator/issues/1577</a>"}, {"owner": {"reputation": 928, "user_id": 1627106, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ba9e2bb16fd59ef912af2fc9186b9098?s=128&d=identicon&r=PG", "display_name": "waza-ari", "link": "https://stackoverflow.com/users/1627106/waza-ari"}, "reply_to_user": {"reputation": 57048, "user_id": 113116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e0v1H.png?s=128&g=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/113116/helen"}, "edited": false, "score": 0, "creation_date": 1547737490, "post_id": 54225500, "comment_id": 95301947, "body": "Helen, thanks for googling it for me... I did look at the issues in GitHub but did not find it.... my bad. Could you please post this as an answer, I will accept it."}], "answers": [{"tags": [], "owner": {"reputation": 57048, "user_id": 113116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/e0v1H.png?s=128&g=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/113116/helen"}, "is_accepted": true, "score": 6, "last_activity_date": 1581071478, "last_edit_date": 1581071478, "creation_date": 1547740030, "answer_id": 54239497, "question_id": 54225500, "link": "https://stackoverflow.com/questions/54225500/how-to-use-bearer-authentication-in-openapi-codegen-generated-python-code/54239497#54239497", "title": "How to use bearer authentication in openapi-codegen generated python code", "body": "<p><a href=\"https://github.com/OpenAPITools/openapi-generator/issues/1577\" rel=\"nofollow noreferrer\">This was a bug</a>. It was fixed in openapi-generator v. 4.0.0-beta2 and later.</p>\n"}], "owner": {"reputation": 928, "user_id": 1627106, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ba9e2bb16fd59ef912af2fc9186b9098?s=128&d=identicon&r=PG", "display_name": "waza-ari", "link": "https://stackoverflow.com/users/1627106/waza-ari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4525, "favorite_count": 0, "accepted_answer_id": 54239497, "answer_count": 1, "score": 5, "last_activity_date": 1581071478, "creation_date": 1547673411, "question_id": 54225500, "link": "https://stackoverflow.com/questions/54225500/how-to-use-bearer-authentication-in-openapi-codegen-generated-python-code", "title": "How to use bearer authentication in openapi-codegen generated python code", "body": "<p>I am using the OpenApi 3.0 specification to document my API. It is basically a REST API which requires a valid Bearer token for each request except for the login request. The OpenAPI spec looks like this:</p>\n\n<pre><code>---\nopenapi: 3.0.0\ninfo:\n  title: MyTitle\n  contact:\n    email: mymail@mail.com\n  version: 0.0.1\nservers:\n- url: http://localhost/api/v1\ncomponents:\n  schemas:\n    ...\n  securitySchemes:\n    bearerAuth:\n      type: http\n      bearerFormat: JWT\n      scheme: bearer\nsecurity:\n- bearerAuth: []\n</code></pre>\n\n<p>In the automatically generated swagger-ui that works perfectly fine, the same is true for postman when I download the OpenAPI spec and import it into Postman.</p>\n\n<p>However, when using the openapi-generator using the following command:</p>\n\n<pre><code>docker run --user `id -u`:`id -g` --rm -v ${PWD}:/local openapitools/openapi-generator-cli generate -i /local/api.json -g python -o /local/api\n</code></pre>\n\n<p>However, instead of the bearer token, it tries to use username and password instead:</p>\n\n<pre><code>def get_basic_auth_token(self):\n    \"\"\"Gets HTTP basic authentication header (string).\n\n    :return: The token for basic HTTP authentication.\n    \"\"\"\n    return urllib3.util.make_headers(\n        basic_auth=self.username + ':' + self.password\n    ).get('authorization')\n\ndef auth_settings(self):\n    \"\"\"Gets Auth Settings dict for api client.\n\n    :return: The Auth Settings information dict.\n    \"\"\"\n    return {\n        'bearerAuth':\n            {\n                'type': 'basic',\n                'in': 'header',\n                'key': 'Authorization',\n                'value': self.get_basic_auth_token()\n            },\n\n    }\n</code></pre>\n\n<p>Note that here a username and password is used, and the auth_settings() function returns a basic auth. What do I have to do to use the Bearer authentication scheme in the generated code instead?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 981, "user_id": 7292937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zduRq.jpg?s=128&g=1", "display_name": "liamhawkins", "link": "https://stackoverflow.com/users/7292937/liamhawkins"}, "edited": false, "score": 1, "creation_date": 1547673563, "post_id": 54225494, "comment_id": 95276919, "body": "Is the position of the words relevant? Or is it just the words in the list you want to ignore. It might be easier to first remove the words you want to ignore first. Can you give a full example?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1547673611, "post_id": 54225494, "comment_id": 95276942, "body": "This is difficult to do with a regular expression. You want a regexp that matches punctuation, but with a negative lookbehind to ignore certain words. But negative lookbehinds have to be fixed length, and your words to ignore might not all be the same length."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1547673729, "post_id": 54225494, "comment_id": 95277002, "body": "Any reason you&#39;re not using a NLP library for this?"}, {"owner": {"reputation": 292, "user_id": 1807662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9sfYi.jpg?s=128&g=1", "display_name": "TimelordViktorious", "link": "https://stackoverflow.com/users/1807662/timelordviktorious"}, "edited": false, "score": 0, "creation_date": 1547673783, "post_id": 54225494, "comment_id": 95277033, "body": "I did try ntlk and spacey but it isn&#39;t entirely what I want."}, {"owner": {"reputation": 2565, "user_id": 1368703, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/95ccb92e85b56e1b19b7a1262efd06cf?s=128&d=identicon&r=PG", "display_name": "Wyrmwood", "link": "https://stackoverflow.com/users/1368703/wyrmwood"}, "edited": false, "score": 0, "creation_date": 1547675013, "post_id": 54225494, "comment_id": 95277568, "body": "Do you mean, &quot;in between the pairs of parenthesis?&quot; Like, do you want to capture <code>[&#39;Hi&#39;, &#39;my&#39; ...]</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 292, "user_id": 1807662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9sfYi.jpg?s=128&g=1", "display_name": "TimelordViktorious", "link": "https://stackoverflow.com/users/1807662/timelordviktorious"}, "edited": false, "score": 0, "creation_date": 1547673639, "post_id": 54225544, "comment_id": 95276959, "body": "I don&#39;t want to throw away any words as the primary use of this regular expression is to use re.split so I can tokenize the string according to the captured characters."}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1547673664, "post_id": 54225544, "comment_id": 95276971, "body": "This should be posted as a comment, not an answer."}], "tags": [], "owner": {"reputation": 3437, "user_id": 313145, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c631212bfc0d30a62d7269dd04237c1b?s=128&d=identicon&r=PG", "display_name": "J&#246;rg Beyer", "link": "https://stackoverflow.com/users/313145/j%c3%b6rg-beyer"}, "is_accepted": true, "score": 0, "last_activity_date": 1547673904, "last_edit_date": 1547673904, "creation_date": 1547673569, "answer_id": 54225544, "question_id": 54225494, "link": "https://stackoverflow.com/questions/54225494/python-regex-matching-splitting-on-punctuation-but-ignoring-certain-words/54225544#54225544", "title": "Python Regex Matching - Splitting on punctuation but ignoring certain words", "body": "<p>you can throw away at first all your stop words (like \"Dr.\") and then all letters (and digits).</p>\n\n<pre><code>import re\n\ntext = \"Hi, my name is Dr. Who. I'm in love with fish-fingers and custard !!\"\ntmp = re.sub(r'[Dr.|Prof.]', '', text)\nprint(re.sub('[a-zA-Z0-9]*', '', tmp))\n</code></pre>\n\n<p>Would that work?</p>\n\n<p>it would print:</p>\n\n<pre><code>,      '    -   !!\n</code></pre>\n\n<p>The output is capturing the text in between the parentheses, in your question.</p>\n"}], "owner": {"reputation": 292, "user_id": 1807662, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/9sfYi.jpg?s=128&g=1", "display_name": "TimelordViktorious", "link": "https://stackoverflow.com/users/1807662/timelordviktorious"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 54225544, "answer_count": 1, "score": 0, "last_activity_date": 1547673904, "creation_date": 1547673389, "question_id": 54225494, "link": "https://stackoverflow.com/questions/54225494/python-regex-matching-splitting-on-punctuation-but-ignoring-certain-words", "title": "Python Regex Matching - Splitting on punctuation but ignoring certain words", "body": "<p>Suppose I have the following sentence,</p>\n\n<blockquote>\n  <p>Hi, my name is Dr. Who. I'm in love with fish-fingers and custard !!</p>\n</blockquote>\n\n<p>I'm trying to capture the punctuation (except the apostrophe and hyphen) using regular expressions, but I also want to ignore certain words. For example, I'm ignoring Dr., and so I don't want to capture the . in the word Dr. </p>\n\n<p>Ideally, the regex should capture the text in between the parentheses:</p>\n\n<blockquote>\n  <p>Hi(, )my( )name( )is( )Dr.( )Who(. )I'm( )in( )love( )with( )fish-fingers( )and( )custard( !!)</p>\n</blockquote>\n\n<p>Note that I have a Python list that contains words like \"Dr.\" that I want to ignore. I'm also using string.punctuation to get a list of punctuation characters to use in the regex. I've tried using negative lookahead but it was still catching the \".\" in Dr. Any help appreciated!</p>\n"}, {"tags": ["python", "for-loop"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 3, "creation_date": 1547673011, "post_id": 54225403, "comment_id": 95276657, "body": "No, you don&#39;t need a new variable for each dog. You just need to store them in a list."}, {"owner": {"reputation": 2912, "user_id": 3081206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YaKOY.jpg?s=128&g=1", "display_name": "takendarkk", "link": "https://stackoverflow.com/users/3081206/takendarkk"}, "edited": false, "score": 0, "creation_date": 1547673096, "post_id": 54225403, "comment_id": 95276695, "body": "&quot;<i>i tried to put it into a for loop</i>&quot; I don&#39;t see a for loop in the code anywhere."}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1547673096, "post_id": 54225403, "comment_id": 95276696, "body": "Why do you need a separate variable? Can use list of dictionary"}, {"owner": {"reputation": 134, "user_id": 6519570, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-erHnpnxBOj0/AAAAAAAAAAI/AAAAAAAAAHo/Foijjq4FXMg/photo.jpg?sz=128", "display_name": "Brad Fallon", "link": "https://stackoverflow.com/users/6519570/brad-fallon"}, "edited": false, "score": 0, "creation_date": 1547673152, "post_id": 54225403, "comment_id": 95276718, "body": "Where are the other attribute values coming from? Are they random?"}, {"owner": {"reputation": 9, "user_id": 10756851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33fccb7b6f1bba33040e4d55fefcc84b?s=128&d=identicon&r=PG&f=1", "display_name": "the.visitor", "link": "https://stackoverflow.com/users/10756851/the-visitor"}, "edited": false, "score": 0, "creation_date": 1547673197, "post_id": 54225403, "comment_id": 95276746, "body": "yes they are random"}, {"owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "edited": false, "score": 0, "creation_date": 1547673198, "post_id": 54225403, "comment_id": 95276748, "body": "Side note: You import <code>random</code> but aren&#39;t using it. Please include all code applicable to the question."}, {"owner": {"reputation": 134, "user_id": 6519570, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-erHnpnxBOj0/AAAAAAAAAAI/AAAAAAAAAHo/Foijjq4FXMg/photo.jpg?sz=128", "display_name": "Brad Fallon", "link": "https://stackoverflow.com/users/6519570/brad-fallon"}, "edited": false, "score": 0, "creation_date": 1547673292, "post_id": 54225403, "comment_id": 95276806, "body": "Well, then you need a loop that will create the objects which are instances of the class &quot;info&quot;."}, {"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1547673752, "post_id": 54225403, "comment_id": 95277019, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1373164/how-do-i-create-a-variable-number-of-variables\">How do I create a variable number of variables?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 134, "user_id": 6519570, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-erHnpnxBOj0/AAAAAAAAAAI/AAAAAAAAAHo/Foijjq4FXMg/photo.jpg?sz=128", "display_name": "Brad Fallon", "link": "https://stackoverflow.com/users/6519570/brad-fallon"}, "is_accepted": false, "score": 1, "last_activity_date": 1547673548, "creation_date": 1547673548, "answer_id": 54225539, "question_id": 54225403, "link": "https://stackoverflow.com/questions/54225403/is-there-a-way-to-change-a-variable-everytime-a-for-loop-is-executed/54225539#54225539", "title": "Is there a way to change a variable everytime a for-loop is executed?", "body": "<p>You need something like this:</p>\n\n<pre><code>for dog_name in dog_names:\n    new_dog_info = info(\n        name = dog_name,\n        exercise = randint(0, 100),\n        ...\n</code></pre>\n\n<p>If this is a homework assignment you probably don't want me to write it all out.</p>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 10756851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33fccb7b6f1bba33040e4d55fefcc84b?s=128&d=identicon&r=PG&f=1", "display_name": "the.visitor", "link": "https://stackoverflow.com/users/10756851/the-visitor"}, "edited": false, "score": 0, "creation_date": 1547673878, "post_id": 54225580, "comment_id": 95277079, "body": "Thanks you, this was honestly useful forME"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 0, "last_activity_date": 1547673736, "creation_date": 1547673736, "answer_id": 54225580, "question_id": 54225403, "link": "https://stackoverflow.com/questions/54225403/is-there-a-way-to-change-a-variable-everytime-a-for-loop-is-executed/54225580#54225580", "title": "Is there a way to change a variable everytime a for-loop is executed?", "body": "<p>You'll almost certainly want to put them into a list:</p>\n\n<pre><code>kennel = []\nfor name in dog_names:\n    kennel.append(info(name,\n                       random.randint(1, 5), \n                       random.randint(1, 100),\n                       random.randint(1, 10),\n                       random.randint(1, 10)))\n</code></pre>\n\n<p>When you finish this loop, you'll have all your dog <code>info</code> objects in this list, and you can conveniently iterate through that list.</p>\n\n<pre><code>for dog in kennel:\n    ...\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10756851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33fccb7b6f1bba33040e4d55fefcc84b?s=128&d=identicon&r=PG&f=1", "display_name": "the.visitor", "link": "https://stackoverflow.com/users/10756851/the-visitor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 54225580, "answer_count": 2, "score": 0, "last_activity_date": 1547673783, "creation_date": 1547672894, "last_edit_date": 1547673783, "question_id": 54225403, "link": "https://stackoverflow.com/questions/54225403/is-there-a-way-to-change-a-variable-everytime-a-for-loop-is-executed", "title": "Is there a way to change a variable everytime a for-loop is executed?", "body": "<p>I dont know how to create a new variable for every new name from a list using a for loop.</p>\n\n<p>As im new to this coding thing, I was doing a little school project and trying to shorten my code and got into a little problem of a long list I had. So i tried to put it into a for loop and so that for every different name(weird given dog names) in a list i could get a new variable for it but just got stuck. Is there anyway anyone could come up with a solution?</p>\n\n<pre><code>import random\n\nclass info():\n\n    def __init__(self, name, exercise, intel, friend, drool):\n        self.name = name\n        self.exercise = exercise\n        self.intel = intel\n        self.friend = friend\n        self.drool = drool\n\n\n    def __repr__(self):\n        return \"\\nName : {}\\na-Exercise : {}\\nb-Intelligence : {}\\nc-Friendliness : {}\\nd-Drool : {}\".format(\n            self.name, self.exercise, self.intel, self.friend, self.drool)\n\ndog_names = [\"Annie the Afgan Hound\", \"Bertie the Boxer\", \"Betty the Borzoi\", \"Charlie the Chihuahua\", \"Chaz the Cocker Spaniel\", \"Donald the Dalmatian\", \"Dottie the Doberman\", \"Fern the Fox Terrier\", \"Frank the French Bulldog\", \"George the Great Dane\", \"Gertie the Greyhound\", \"Harry the Harrier\", \"Ian the Irish Wolfhound\", \"Juno the Jack Russell\", \"Keith the Kerry Blue\", \"Larry the Labrador\", \"Marge the Maltese\", \"Max the Mutt\", \"Nutty the Newfoundland\", \"Olive the Old English Sheepdog\", \"Peter the Pug\", \"Poppy the Pekingese\", \"Rosie the Rottweiler\", \"Ruby the Retriever\", \"Sam the Springer Spaniel\", \"Sukie the Saluki\", \"Vernon the Vizsla\", \"Whilma the West Highland Terrier\", \"William the Whippet\", \"Yolande the Yorkshire Terrier\"]\n\n#This is what i want to shorten\n\na = info(\"Annie the Afgan Hound\", random.randint(1, 5), random.randint(1, 100), random.randint(1, 10), random.randint(1, 10))#1\n\nb = info(\"Bertie the Boxer\", random.randint(1, 5), random.randint(1, 100), random.randint(1, 10), random.randint(1, 10))\n#etc\n</code></pre>\n\n<p>I would like to create a \"card\" for each name; so that every time this code is ran, there is a new variable for each name. Eg...</p>\n\n<pre><code>a = Name:Annie the Afgan Hound |\n    Exersice:10 |\n    Intelligence:34 |\n    Friendliness:4 |\n    Drool:2\n\nb = Name:Bertie the Boxer |\n    Exersice:7 |\n    Intelligence:87 |\n    Friendliness:9 |\n    Drool:10\n</code></pre>\n\n<p>New to this, so any help will be appreciated:)</p>\n"}, {"tags": ["python", "jquery", "html", "pandas", "flask"], "answers": [{"tags": [], "owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "is_accepted": true, "score": 3, "last_activity_date": 1547677163, "last_edit_date": 1547677163, "creation_date": 1547675321, "answer_id": 54225906, "question_id": 54225370, "link": "https://stackoverflow.com/questions/54225370/is-it-possible-to-use-jquery-to-make-a-pandas-table-filterable-searchable/54225906#54225906", "title": "Is it possible to use jQuery to make a pandas table filterable/searchable?", "body": "<p>Here's a working trial for one approach:</p>\n\n<pre><code>from flask import Flask, render_template_string, session, request\n\nimport pandas as pd\napp = Flask(__name__)\n\ntemplate = \"\"\"\n&lt;!doctype html&gt;\n&lt;input type=\"text\" value=\"\" name=\"my_filter\" id=\"my_filter\"&gt;\n\n&lt;div id=\"results\"&gt;{{ data|safe }}&lt;/div&gt;\n\n&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js\"&gt;&lt;/script&gt;\n\n&lt;script type=\"text/javascript\"&gt;\n   $('#my_filter').keyup(function() {\n       if ($(this).val().length &gt;= 1) {\n           var requested_code = document.getElementById('my_filter').value;\n\n           $.ajax({\n               type: 'POST',\n               data: JSON.stringify({\n                   'requested_code': requested_code\n               }),\n               contentType: 'application/json; charset=utf-8',\n               url: \"{{ url_for('filter_html') }}\",\n               success: function(resp) {\n                   $(\"#results\").html(resp);\n               }\n           });\n\n       }\n});\n&lt;/script&gt;\n&lt;/html&gt;\n\"\"\"\n\n@app.route(\"/\")\ndef table():\n    df = pd.DataFrame({'a': [1, 2, 3], 'b': [4, 5, 6]})\n    session['df'] = df.values.tolist()\n    return render_template_string(template, data=df.to_html(index=False))\n\n\n@app.route('/filter', methods=['GET', 'POST'])\ndef filter_html():\n    df = pd.DataFrame(session['df'], columns=['a', 'b'])\n    df = df[df['a'] == int(request.json.get('requested_code'))]\n    return df.to_html(index=False)\n\n\nif __name__ == '__main__':\n    app.secret_key = 'hello'\n    app.run(debug=True)\n</code></pre>\n\n<p>Essentially, add a JQuery function to the <code>input</code> box that looks for <code>keyup</code> events. However, these should trigger an AJAX request to a URL endpoint in Flask that can then update the <code>\"results\"</code> div. There may be cleaner ways to serialize the data to be stored in a session; this is just to illustrate an approach.</p>\n\n<p>The default <code>session</code> is rather small in Flask. If you try to store an object that's too large to fit, it won't error, the issue is just silently ignored. You will want to use <code>flask-session</code> to store the DF data; you're currently sending the whole thing to the browser so I assume it's not particularly large.</p>\n\n<p>For anyone less familiar with Flask but working with Pandas: You can run this code and then navigate to <code>127.0.0.1:5000</code> in your browser. The numbers 1, 2 or 3 are valid to enter into the search box to interact with the df, anything else results in an empty df.</p>\n"}], "owner": {"reputation": 301, "user_id": 10213506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6864b90887eb6f1190eda117c20494e8?s=128&d=identicon&r=PG&f=1", "display_name": "vendrediSurMer", "link": "https://stackoverflow.com/users/10213506/vendredisurmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1236, "favorite_count": 1, "accepted_answer_id": 54225906, "answer_count": 1, "score": 0, "last_activity_date": 1547677163, "creation_date": 1547672735, "question_id": 54225370, "link": "https://stackoverflow.com/questions/54225370/is-it-possible-to-use-jquery-to-make-a-pandas-table-filterable-searchable", "title": "Is it possible to use jQuery to make a pandas table filterable/searchable?", "body": "<p>I am using Flask to build a web app but I am currently stuck trying to create a filterable table (built using pandas) with a search box where you can search for an item in a row and the table will collapse when the item is found. Like the one here: <a href=\"https://www.w3schools.com/bootstrap/bootstrap_filters.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/bootstrap/bootstrap_filters.asp</a></p>\n\n<p>In the above example the jQuery filter function is applied to a table created directly in the html template, but I am having a hard time getting this to work with a pandas dataframe (nothing happens when I try searching via the search box).</p>\n\n<p>Any help would be appreciated :)</p>\n\n<p>My run.py is as follows:</p>\n\n<pre><code>from flask import Flask, render_template\nimport pandas as pd\napp = Flask(__name__)\n\n@app.route(\"/\")\ndef table():\n    df = pd.read_csv(\"input.csv\")\n    return render_template(\"test.html\", data=df.to_html(index=False))\n\nif __name__ == '__main__':\n    app.run(debug=True)\n</code></pre>\n\n<p>And my test html template:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js\"&gt;&lt;/script&gt;\n&lt;script&gt;\n$(document).ready(function(){\n  $(\"#myInput\").on(\"keyup\", function() {\n    var value = $(this).val().toLowerCase();\n    $({{data}}).filter(function() {\n      $(this).toggle($(this).text().toLowerCase().indexOf(value) &gt; -1)\n    });\n  });\n});\n&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;div class=\"container\"&gt;\n      &lt;h2&gt;Browse Phosphosites&lt;/h2&gt;\n      &lt;br&gt;&lt;br&gt;\n      &lt;p&gt;Search the table for selected phosphosites or associated genes, chromosome locations and sequences:&lt;/p&gt;  \n      &lt;input id=\"myInput\" type=\"text\" placeholder=\"Search...\"&gt;\n      &lt;br&gt;&lt;br&gt;\n      {{data | safe }}\n    &lt;/div&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["python", "regex", "string", "text"], "comments": [{"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1547672605, "post_id": 54225312, "comment_id": 95276474, "body": "How about <code>string.replace(&#39;var.&#39;, &#39;&#39;)</code>?"}, {"owner": {"reputation": 33, "user_id": 10924542, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ie1rN7ZGy8A/AAAAAAAAAAI/AAAAAAAAABo/HXYVCk4PEN4/photo.jpg?sz=128", "display_name": "Javier Nava", "link": "https://stackoverflow.com/users/10924542/javier-nava"}, "reply_to_user": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1547673168, "post_id": 54225312, "comment_id": 95276730, "body": "that would fail to remove the encompassing brackets"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10924542, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ie1rN7ZGy8A/AAAAAAAAAAI/AAAAAAAAABo/HXYVCk4PEN4/photo.jpg?sz=128", "display_name": "Javier Nava", "link": "https://stackoverflow.com/users/10924542/javier-nava"}, "edited": false, "score": 0, "creation_date": 1547673260, "post_id": 54225371, "comment_id": 95276790, "body": "Yes, that would work in this scenario. I believe I fail to state that &#39;Var(x)&#39; could be any string. so string could also be: string = &#39;{({var.Str1} / {var.Y2} + {var.X3})-{var.Str1}}&#39;"}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "reply_to_user": {"reputation": 33, "user_id": 10924542, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ie1rN7ZGy8A/AAAAAAAAAAI/AAAAAAAAABo/HXYVCk4PEN4/photo.jpg?sz=128", "display_name": "Javier Nava", "link": "https://stackoverflow.com/users/10924542/javier-nava"}, "edited": false, "score": 1, "creation_date": 1547673584, "post_id": 54225371, "comment_id": 95276927, "body": "@JavierNava Try this one then .. use <a href=\"http://regex101.com\" rel=\"nofollow noreferrer\">regex101.com</a> to refine the regex and adapt it to yet undisclosed input data..."}], "tags": [], "owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "is_accepted": true, "score": 1, "last_activity_date": 1547674165, "last_edit_date": 1547674165, "creation_date": 1547672738, "answer_id": 54225371, "question_id": 54225312, "link": "https://stackoverflow.com/questions/54225312/how-to-use-re-to-remove-encompassing-pattern-from-string-in-python/54225371#54225371", "title": "How to use re to remove encompassing pattern from string in python", "body": "<p>This should do it:</p>\n\n<pre><code>string = '{({var.Var1} / {var.Var2} + {var.Var3})-{var.Var1}}'\nstring2 = '{({var.Var1} / {var.Var(33)} + {var.Simplotid})-{var.Nukleodid(43)parle}}'\n\nimport re\npattern = r'\\{var\\.(.+?)\\}'\n\nfor t in [string, string2]:\n    print(re.sub(pattern,r\"\\1\",t)) # {(Var1 / Var2 + Var3)-Var1}\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>{(Var1 / Var2 + Var3)-Var1}\n{(Var1 / Var(33) + Simplotid)-Nukleodid(43)parle}\n</code></pre>\n\n<p>The pattern matches <code>r'\\{var\\.(.+?)\\}'</code> and replaces the complete part with what is captured inside the <code>(</code> ... <code>)</code> .. this is what the replacestring <code>r\"\\1\"</code> does: </p>\n\n<pre><code>\\0  whole matched thing front to back\n\\1  first matched group \n\\2  second matched group ... etc\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 0, "creation_date": 1547674043, "post_id": 54225600, "comment_id": 95277151, "body": "Why looping? You can simply capture what you want to be saved and replace the whole match by the captured stuff - see my answer... no loop needed."}], "tags": [], "owner": {"reputation": 33, "user_id": 10924542, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ie1rN7ZGy8A/AAAAAAAAAAI/AAAAAAAAABo/HXYVCk4PEN4/photo.jpg?sz=128", "display_name": "Javier Nava", "link": "https://stackoverflow.com/users/10924542/javier-nava"}, "is_accepted": false, "score": 0, "last_activity_date": 1547673826, "creation_date": 1547673826, "answer_id": 54225600, "question_id": 54225312, "link": "https://stackoverflow.com/questions/54225312/how-to-use-re-to-remove-encompassing-pattern-from-string-in-python/54225600#54225600", "title": "How to use re to remove encompassing pattern from string in python", "body": "<p>As a complement to the statement, Var could potentially be any string so string could also be:</p>\n\n<pre><code>string = '{({var.Str1} / {var.X2} + {var.Y3})-{var.Str1}}'\n</code></pre>\n\n<p>I tried to do a loop such as</p>\n\n<pre><code>import re\n\nstring = '{({var.Str1} / {var.X2} + {var.Y3})-{var.Str1}}'\nregex = r\"\\{var\\.(\\w+)\\}\"\nsearch = re.findall(regex,string)\nfor item in search:\n    string = re.sub(r\"\\{var\\.(\\w+)\\}\",item,string,1)\n</code></pre>\n\n<p>This seems to work OK, but I'm still wondering if there is any re trick that'd do this in one step.</p>\n"}], "owner": {"reputation": 33, "user_id": 10924542, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ie1rN7ZGy8A/AAAAAAAAAAI/AAAAAAAAABo/HXYVCk4PEN4/photo.jpg?sz=128", "display_name": "Javier Nava", "link": "https://stackoverflow.com/users/10924542/javier-nava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 54225371, "answer_count": 2, "score": -1, "last_activity_date": 1547674165, "creation_date": 1547672460, "question_id": 54225312, "link": "https://stackoverflow.com/questions/54225312/how-to-use-re-to-remove-encompassing-pattern-from-string-in-python", "title": "How to use re to remove encompassing pattern from string in python", "body": "<p>I have a string which could look like:</p>\n\n<pre><code>string = '{({var.Var1} / {var.Var2} + {var.Var3})-{var.Var1}}'\n</code></pre>\n\n<p>my objective would be to get</p>\n\n<pre><code>parsed_string = '{(Var1 / Var2 + Var3)-Var1}'\n</code></pre>\n\n<p>If I use re.findall as:</p>\n\n<pre><code>import re\n\nstring = '{({var.Var1} / {var.Var2} + {var.Var3})-{var.Var1}}'\nregex = r\"\\{var\\.(\\w+)\\}\"\nsearch = re.findall(regex,string)\n\nsearch = ['Var1', 'Var2', 'Var3', 'Var1']\n</code></pre>\n\n<p>I tried using re.sub, however it only accepts a single input. So it would return</p>\n\n<pre><code>parsed_string = '{(Var1 / Var1) + Var1-Var1}'\n</code></pre>\n\n<p>Is there a re command (or similar) which could output the target parsed_string in one step? Or should I create a loop with re.search with a combination of re.sub (delimited to the first occurence).</p>\n"}, {"tags": ["python", "arrays", "pandas", "list", "numpy"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1547672499, "post_id": 54225293, "comment_id": 95276429, "body": "<code>np.array(df[&#39;new&#39;].values.tolist())</code> or <code>np.stack(df[&#39;new&#39;])</code>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1547672619, "post_id": 54225293, "comment_id": 95276479, "body": "@user3483203 <code>tolist()</code> will mean it&#39;s no longer an array"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1547672732, "post_id": 54225293, "comment_id": 95276524, "body": "@roganjosh not sure what you mean.  If you leave out the <code>tolist</code>, you will get an array of type object with a shape of <code>(2,)</code>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1547672814, "post_id": 54225293, "comment_id": 95276574, "body": "@user3483203 but still a numpy array, that you can try (if in a suitable state) to convert the type of. <code>tolist()</code> drops it out to a python list, which you&#39;re just going to convert back to an array? You could just leave it at <code>.values</code>? Or am I missing something"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1547672857, "post_id": 54225293, "comment_id": 95276592, "body": "@George are you looking for a nested array within a pandas cell?"}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1547672889, "post_id": 54225293, "comment_id": 95276610, "body": "He is expecting an array of shape <code>(2, 3)</code>.  If you just call <code>df[&#39;new&#39;].values</code>, you get a 1D array containing two python lists."}, {"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 0, "creation_date": 1547673158, "post_id": 54225293, "comment_id": 95276722, "body": "I don&#39;t see why you can&#39;t simply use <code>s = np.array(df[&#39;new&#39;].apply(lambda x: np.array([mapping[i] for i in x])).values.tolist())</code>. Just convert to list and then to numpy array. Now, <code>s.shape</code> gives <code>(2,3)</code>"}, {"owner": {"reputation": 2773, "user_id": 4896087, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/jun3L.jpg?s=128&g=1", "display_name": "George Liu", "link": "https://stackoverflow.com/users/4896087/george-liu"}, "edited": false, "score": 0, "creation_date": 1547673190, "post_id": 54225293, "comment_id": 95276741, "body": "Yes, I was expecting an array of shape (2,3)."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1547673300, "post_id": 54225293, "comment_id": 95276812, "body": "@GeorgeLiu is your mapping always letter -&gt; number?  You shouldn&#39;t need to loop for that, you can vectorize it"}], "answers": [{"comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1547674853, "post_id": 54225522, "comment_id": 95277501, "body": "<code>concatenate</code> (or one its <code>stack</code> daughters) will treat a 1d object array as a list, and attempt to join the subarrays into one."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1547674940, "post_id": 54225522, "comment_id": 95277534, "body": "@hpaulj I&#39;guessing it would be a lot slower though, since <code>concatenate</code> is working with an object array, right?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1547676434, "post_id": 54225522, "comment_id": 95278173, "body": "We need to do some timings :)"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1547676766, "post_id": 54225522, "comment_id": 95278304, "body": "@hpaulj Does <code>np.stack(df[[&#39;new&#39;]].values, axis=1)</code> give you a 2D array of shape (2,3)? It doesn&#39;t seem to work, they remain lists for me."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1547704999, "post_id": 54225522, "comment_id": 95284798, "body": "<code>axis=0</code> is the version that replicates <code>np.array</code>."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 4, "last_activity_date": 1547673495, "creation_date": 1547673495, "answer_id": 54225522, "question_id": 54225293, "link": "https://stackoverflow.com/questions/54225293/convert-column-of-lists-to-2d-numpy-array/54225522#54225522", "title": "Convert column of lists to 2D numpy array", "body": "<p>I think it would be better to create an array from the list values directly.</p>\n\n<pre><code> df\n   col        new\n0  abc  [a, b, c]\n1  def  [d, e, f]\n\narr = np.array(df['new'].tolist())\narr\n# array([['a', 'b', 'c'],\n#        ['d', 'e', 'f']], dtype='&lt;U1')\n\narr.shape\n# (2, 3)\n</code></pre>\n\n<p><strong>Big disclaimer:</strong> This will work only if the sublists all have the same number of elements. If not, it will mean they are ragged arrays, and numpy will not be able to use an efficient memory format for representing your array (hence, the <code>dtype='object'</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1547704958, "last_edit_date": 1547704958, "creation_date": 1547704537, "answer_id": 54229808, "question_id": 54225293, "link": "https://stackoverflow.com/questions/54225293/convert-column-of-lists-to-2d-numpy-array/54229808#54229808", "title": "Convert column of lists to 2D numpy array", "body": "<pre><code>In [2]: import pandas as pd\nIn [3]: df = pd.DataFrame({'col': ['abc', 'def']})\n   ...: mapping = {v: k for k, v in enumerate('abcdef')}\n   ...: df['new'] = df['col'].apply(lambda x: list(x))\n\nIn [7]: df['new']\nOut[7]: \n0    [a, b, c]\n1    [d, e, f]\nName: new, dtype: object\nIn [8]: df['new'].values\nOut[8]: array([list(['a', 'b', 'c']), list(['d', 'e', 'f'])], dtype=object)\n</code></pre>\n\n<p><code>np.stack</code> behaves a lot like <code>np.array</code>, joining the elements on a new initial axis:</p>\n\n<pre><code>In [9]: np.stack(df['new'].values)\nOut[9]: \narray([['a', 'b', 'c'],\n       ['d', 'e', 'f']], dtype='&lt;U1')\n</code></pre>\n\n<p>or on another axis you your choice:</p>\n\n<pre><code>In [10]: np.stack(df['new'].values, axis=1)\nOut[10]: \narray([['a', 'd'],\n       ['b', 'e'],\n       ['c', 'f']], dtype='&lt;U1')\n</code></pre>\n\n<p><code>np.array</code> also works if the object array is turned into a list (as @coldspeed shows):</p>\n\n<pre><code>In [11]: df['new'].values.tolist()\nOut[11]: [['a', 'b', 'c'], ['d', 'e', 'f']]\nIn [12]: np.array(df['new'].values.tolist())\nOut[12]: \narray([['a', 'b', 'c'],\n       ['d', 'e', 'f']], dtype='&lt;U1')\n</code></pre>\n\n<p>As for speed, lets make a bigger array:</p>\n\n<pre><code>In [16]: arr = np.frompyfunc(lambda x: np.arange(1000),1,1)(np.arange(1000))\nIn [17]: arr.shape\nOut[17]: (1000,)\nIn [18]: np.stack(arr).shape\nOut[18]: (1000, 1000)\nIn [20]: np.array(arr.tolist()).shape\nOut[20]: (1000, 1000)\n\nIn [21]: timeit np.stack(arr).shape\n5.24 ms \u00b1 190 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\nIn [22]: timeit np.array(arr.tolist()).shape\n4.45 ms \u00b1 138 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n</code></pre>\n\n<p>Basically the same, with a slight edge to the <code>np.array</code> approach.</p>\n\n<p><code>stack</code> like <code>vstack</code> expands the dimensions of each element as needed.  Skipping that with a <code>concatenate</code> is a bit faster:</p>\n\n<pre><code>In [27]: timeit np.concatenate(arr).reshape(-1,1000).shape\n4.04 ms \u00b1 12.3 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 100 loops each)\n</code></pre>\n\n<p>This <code>arr</code> contains arrays.  If it contained lists instead the <code>array(arr.tolist())</code> approach does better (relatively), since it has only one list (of lists) to convert to array. The <code>stack</code> approach has to first convert each of the sublists into arrays.</p>\n"}], "owner": {"reputation": 2773, "user_id": 4896087, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/jun3L.jpg?s=128&g=1", "display_name": "George Liu", "link": "https://stackoverflow.com/users/4896087/george-liu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1419, "favorite_count": 0, "accepted_answer_id": 54225522, "answer_count": 2, "score": 1, "last_activity_date": 1547704958, "creation_date": 1547672377, "last_edit_date": 1547700758, "question_id": 54225293, "link": "https://stackoverflow.com/questions/54225293/convert-column-of-lists-to-2d-numpy-array", "title": "Convert column of lists to 2D numpy array", "body": "<p>I'm doing some operations on a Pandas dataframe. For a certain column, I need to convert each cell to a numpy array which is not hard. The end goal is to get a 2D array as a result from the whole column. However, when I perform the following operation, I got a 1D array, and the inner arrays are not recognized.</p>\n\n<pre><code>df = pd.DataFrame({'col': ['abc', 'def']})\nmapping = {v: k for k, v in enumerate('abcdef')}\ndf['new'] = df['col'].apply(lambda x: list(x))\ndf['new'].apply(lambda x: np.array([mapping[i] for i in x])).values\n</code></pre>\n\n<p>This gives:</p>\n\n<pre><code>array([array([0, 1, 2]), array([3, 4, 5])], dtype=object)\n</code></pre>\n\n<p>and the shape is (2,), meaning the inner arrays are not recognized. </p>\n\n<p>If I do <code>s.reshape(2,-1)</code>, I got <code>(2,1)</code> instead of <code>(2,3)</code> for the shape.</p>\n\n<p>Appreciate any help!</p>\n\n<hr>\n\n<p>Clarification:</p>\n\n<p>The above is only a toy example. What I was doing was preprocessing for machine learning using the IMDB dataset. I had to convert each value in a review column to a word embedding which is a numpy array. Now the challenge is to get all these arrays out as a 2D array, so that I can use them in my machine learning model.</p>\n"}, {"tags": ["python", "bash", "stdin", "sys"], "comments": [{"owner": {"reputation": 658058, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "edited": false, "score": 2, "creation_date": 1547672392, "post_id": 54225274, "comment_id": 95276383, "body": "Can there be more than 2 repetitions?"}, {"owner": {"reputation": 69207, "user_id": 1440565, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/ec430cc01ef4cf4ae63ebbe9e8596f72?s=128&d=identicon&r=PG", "display_name": "Code-Apprentice", "link": "https://stackoverflow.com/users/1440565/code-apprentice"}, "edited": false, "score": 3, "creation_date": 1547672420, "post_id": 54225274, "comment_id": 95276400, "body": "You need to assign <code>previous_word</code> to something"}, {"owner": {"reputation": 655, "user_id": 5556265, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/42477626d1699694dcafd66d56076f17?s=128&d=identicon&r=PG&f=1", "display_name": "Frederic Bastiat", "link": "https://stackoverflow.com/users/5556265/frederic-bastiat"}, "edited": false, "score": 0, "creation_date": 1547672837, "post_id": 54225274, "comment_id": 95276584, "body": "Hi, I edited my question, so I am looking for something that might work for more than 2 repititions but they will be next to one another. I know previous_word and count1, count2 aren&#39;t assigned; I&#39;m not sure if I can make this approach work though?"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 0, "creation_date": 1547673281, "post_id": 54225274, "comment_id": 95276801, "body": "So it&#39;s <i>Python</i> or <i>bash</i>? Btw, you <b>can</b> use <i>enumerate</i> on <code>sys.stdin</code>."}, {"owner": {"reputation": 1544, "user_id": 7095433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e608c3fba680f67e2997cae63cf626?s=128&d=identicon&r=PG", "display_name": "landru27", "link": "https://stackoverflow.com/users/7095433/landru27"}, "edited": false, "score": 0, "creation_date": 1547673368, "post_id": 54225274, "comment_id": 95276835, "body": "&quot;I&#39;m not sure if I can make this approach work though&quot;  -  So, give it a try -- turn your pseudocode into code -- and then post your code, actual output, and debugging you have attempted;  that will form the basis of a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>, which is what makes a good question on SO"}, {"owner": {"reputation": 172529, "user_id": 140750, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4c7af12cad08c95bc206a9636d164224?s=128&d=identicon&r=PG", "display_name": "William Pursell", "link": "https://stackoverflow.com/users/140750/william-pursell"}, "edited": false, "score": 0, "creation_date": 1547673641, "post_id": 54225274, "comment_id": 95276960, "body": "What do you mean by &quot;without storing anything in memory&quot;?  If you write code like <code>for line in sys.stdin</code> then a line will be read from stdin and stored in memory in the variable <code>line</code>.  Perhaps you mean <code>without storing *everything* in memory</code>."}], "answers": [{"comments": [{"owner": {"reputation": 655, "user_id": 5556265, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/42477626d1699694dcafd66d56076f17?s=128&d=identicon&r=PG&f=1", "display_name": "Frederic Bastiat", "link": "https://stackoverflow.com/users/5556265/frederic-bastiat"}, "edited": false, "score": 0, "creation_date": 1547673597, "post_id": 54225447, "comment_id": 95276935, "body": "thank you? what is awk/where can I find out more about it"}, {"owner": {"reputation": 658058, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "reply_to_user": {"reputation": 655, "user_id": 5556265, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/42477626d1699694dcafd66d56076f17?s=128&d=identicon&r=PG&f=1", "display_name": "Frederic Bastiat", "link": "https://stackoverflow.com/users/5556265/frederic-bastiat"}, "edited": false, "score": 1, "creation_date": 1547673729, "post_id": 54225447, "comment_id": 95277001, "body": "I have added couple of <code>awk</code> references in my answer"}], "tags": [], "owner": {"reputation": 658058, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 2, "last_activity_date": 1547673710, "last_edit_date": 1592644375, "creation_date": 1547673202, "answer_id": 54225447, "question_id": 54225274, "link": "https://stackoverflow.com/questions/54225274/for-loop-through-stdin-using-previous-item/54225447#54225447", "title": "for loop through stdin using previous item", "body": "<blockquote>\n<p>I would like to compare a line to the previous one without storing anything in memory (no dictionaries).</p>\n</blockquote>\n<p>To be able to sum up counts from all previous lines with similar word, you need to maintain some state.</p>\n<p>Usually this job is suited to <code>awk</code>. You may consider this command:</p>\n<pre><code>awk '{a[$1] += $2} p &amp;&amp; p != $1{print p, a[p]; delete a[p]} {p = $1} \nEND { print p, a[p] }' file\n</code></pre>\n\n<pre><code>a 2\nfile 7\nfor 1\nhas 1\nis 2\nlines 1\nsmall 3\ntest 3\nthis 3\ntwo 1\n</code></pre>\n<p>Using <code>delete</code>, this solution is not storing whole file in memory. State is maintained only for the duration while processing lines with same first word.</p>\n<p><strong>Awk References:</strong></p>\n<ul>\n<li><a href=\"https://www.gnu.org/s/gawk/manual/gawk.pdf\" rel=\"nofollow noreferrer\">Effective AWK Programming</a></li>\n<li><a href=\"http://www.grymoire.com/Unix/Awk.html\" rel=\"nofollow noreferrer\">Awk Tutorial</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1547673586, "post_id": 54225518, "comment_id": 95276928, "body": "I believe that I technically beat you to it by 6 sec. +1 to you!"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1547673877, "post_id": 54225518, "comment_id": 95277078, "body": "@MadPhysicist: When I posted, the refresh didn&#39;t show your answer.  Network lag.  :-)  Yes, +1 to you!"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 2, "last_activity_date": 1547673475, "creation_date": 1547673475, "answer_id": 54225518, "question_id": 54225274, "link": "https://stackoverflow.com/questions/54225274/for-loop-through-stdin-using-previous-item/54225518#54225518", "title": "for loop through stdin using previous item", "body": "<p>The basic logic is to keep track of the previous word.  If the current word matches, accumulate the count.  If not, print the previous word and its count, and start over.  There's a little special code to handle the first and last iterations.</p>\n\n<pre><code>stdin_data = [\n    \"a   2\",\n    \"file    1\",\n    \"file    2\",\n    \"file    4\",\n    \"for 1\",\n    \"has 1\",\n    \"is  2\",\n    \"lines   1\",\n    \"small   1\",\n    \"small   2\",\n    \"test    1\",\n    \"test    2\",\n    \"this    1\",\n    \"this    2\",\n    \"two 1\",\n]  \n\nprevious_word = \"\"\nword_ct = 0\n\nfor line in stdin_data:\n    word, count = line.split()\n    if word == previous_word:\n        word_ct += int(count)\n    else:\n        if previous_word != \"\":\n            print(previous_word, word_ct)\n        previous_word = word\n        word_ct = int(count)\n\n# Print the final word and count\nprint(previous_word, word_ct)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>a 2\nfile 7\nfor 1\nhas 1\nis 2\nlines 1\nsmall 3\ntest 3\nthis 3\ntwo 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "is_accepted": false, "score": 2, "last_activity_date": 1547673511, "creation_date": 1547673511, "answer_id": 54225529, "question_id": 54225274, "link": "https://stackoverflow.com/questions/54225274/for-loop-through-stdin-using-previous-item/54225529#54225529", "title": "for loop through stdin using previous item", "body": "<p>Your code is almost there. While it is commendable not to want to store the whole thing in memory, you will have to store the cumulative components of the previous line:</p>\n\n<pre><code>prev_word, prev_count = '', 0\nfor line in sys.stdin:\n    word, count = line.split()\n    count = int(count)\n    if word == prev_word:\n        prev_count += count\n    elif prev_count:\n        print(prev_word, prev_count)\n        prev_word, prev_count = word, count\n</code></pre>\n"}], "owner": {"reputation": 655, "user_id": 5556265, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/42477626d1699694dcafd66d56076f17?s=128&d=identicon&r=PG&f=1", "display_name": "Frederic Bastiat", "link": "https://stackoverflow.com/users/5556265/frederic-bastiat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 54225518, "answer_count": 3, "score": 0, "last_activity_date": 1547673710, "creation_date": 1547672308, "last_edit_date": 1547673663, "question_id": 54225274, "link": "https://stackoverflow.com/questions/54225274/for-loop-through-stdin-using-previous-item", "title": "for loop through stdin using previous item", "body": "<p>I would like to compare a line to the previous one without storing anything in memory (no dictionaries).</p>\n\n<p>Sample data:</p>\n\n<pre><code>a   2\nfile    1\nfile    2\nfile    4\nfor 1\nhas 1\nis  2\nlines   1\nsmall   1\nsmall   2\ntest    1\ntest    2\nthis    1\nthis    2\ntwo 1\n</code></pre>\n\n<p>Pseudocode:</p>\n\n<pre><code>for line in sys.stdin:\n    word, count = line.split()\n    if word == previous_word:\n        print(word, count1+count2)\n</code></pre>\n\n<p>I know I would use <code>enumerate</code> or <code>dict.iteritems</code> over an array but I can't on <code>sys.stdin</code>.</p>\n\n<p>Desired output:</p>\n\n<pre><code>a   2\nfile    7\nfor 1\nhas 1\nis  2\nlines   1\nsmall   3\ntest    3\nthis    3\ntwo 1\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "group-by", "pandas-groupby"], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 1, "last_activity_date": 1547672894, "creation_date": 1547672894, "answer_id": 54225402, "question_id": 54225257, "link": "https://stackoverflow.com/questions/54225257/bin-column-by-time-intervals-and-calculate-the-sum/54225402#54225402", "title": "Bin column by time intervals and calculate the sum", "body": "<p>Use, <code>reset_index</code>, then <code>groupby</code> and <code>resample</code>:</p>\n\n<pre><code>df.reset_index(level=0).groupby('computer').resample('4s')['value']\\\n   .sum().to_frame().sort_index(level=1)\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>df.reset_index('computer').groupby('computer').resample('4s')['value']\\\n   .sum().to_frame().sort_index(level=1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>                              value\ncomputer time                      \n0        1970-01-01 00:00:00      5\n1        1970-01-01 00:00:00      1\n2        1970-01-01 00:00:00      5\n3        1970-01-01 00:00:00      6\n2        1970-01-01 00:00:04      3\n3        1970-01-01 00:00:04      4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1547673262, "creation_date": 1547673262, "answer_id": 54225460, "question_id": 54225257, "link": "https://stackoverflow.com/questions/54225257/bin-column-by-time-intervals-and-calculate-the-sum/54225460#54225460", "title": "Bin column by time intervals and calculate the sum", "body": "<p>Use <code>groupby</code> with <code>pd.Grouper</code>:</p>\n\n<pre><code>u = (df.groupby(['computer', pd.Grouper(key='time', freq='4s')])\n       .sum()\n       .sort_index(level=1)\n       .reset_index())\nu['time'] = u['time'].dt.second\n\nu\n   computer  time  value\n0         0     0      5\n1         1     0      1\n2         2     0      5\n3         3     0      6\n4         2     4      3\n5         3     4      4\n</code></pre>\n\n<p>Instead of having a separate <code>groupby</code> and <code>resample</code>, you can allow one <code>groupby</code> call to handle both the grouping on \"computer\", and the resampling \"time\" together.</p>\n"}], "owner": {"reputation": 195, "user_id": 4978236, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8138329de72ecf5cbe0436007aa4d86a?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/4978236/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 54225460, "answer_count": 2, "score": 1, "last_activity_date": 1547752582, "creation_date": 1547672240, "last_edit_date": 1547752582, "question_id": 54225257, "link": "https://stackoverflow.com/questions/54225257/bin-column-by-time-intervals-and-calculate-the-sum", "title": "Bin column by time intervals and calculate the sum", "body": "<p>I have the pandas DataFrame:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df = pd.DataFrame({\n    \"computer\": [0, 1, 2, 3, 0, 1, 2, 3],\n    \"time\":     [0, 0, 1, 1, 2, 3, 4, 5],\n    \"value\":    [4, 1, 5, 6, 1, 0, 3, 4],\n})\ndf[\"time\"] = pd.to_datetime(df[\"time\"], unit=\"s\")\ndf.set_index([\"computer\", \"time\"])\n</code></pre>\n\n<p>I would like to bin <code>time</code> column into 4s intervals and sum the <code>value</code>s.\nThe output would look like:</p>\n\n<pre><code>df = pd.DataFrame({\n    \"computer\":   [0, 1, 2, 3, 2, 3],\n    \"start_time\": [0, 0, 0, 0, 4, 4],\n    \"value\":      [5, 1, 5, 6, 3, 4],\n})\ndf[\"start_time\"] = pd.to_datetime(df[\"start_time\"], unit=\"s\")\ndf.set_index([\"computer\", \"start_time\"])\n</code></pre>\n\n<p>I've tried to apply the code provided by <a href=\"https://stackoverflow.com/questions/22769047\">Pandas group by time windows</a>, but I'm unable to get it working due to the multiindex.\nI've also tried the <code>resample</code> method, but the same problem applies.</p>\n"}, {"tags": ["python", "visual-studio-code"], "comments": [{"owner": {"reputation": 5876, "user_id": 4443457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bebba8dda528baa8273aa12dba8118e6?s=128&d=identicon&r=PG&f=1", "display_name": "Don", "link": "https://stackoverflow.com/users/4443457/don"}, "edited": false, "score": 0, "creation_date": 1548229938, "post_id": 54225255, "comment_id": 95463379, "body": "The setting <code>debugOptions</code> has been removed from the debug configuration file since around the august 2018 release of the Python Extension. As a maintainer of the extension I&#39;d like to understand why you would like to use that setting?"}, {"owner": {"reputation": 2421, "user_id": 1344579, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/87738f0d76cd96e179917eae86f2659d?s=128&d=identicon&r=PG", "display_name": "NewGuy", "link": "https://stackoverflow.com/users/1344579/newguy"}, "reply_to_user": {"reputation": 5876, "user_id": 4443457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bebba8dda528baa8273aa12dba8118e6?s=128&d=identicon&r=PG&f=1", "display_name": "Don", "link": "https://stackoverflow.com/users/4443457/don"}, "edited": false, "score": 0, "creation_date": 1548272963, "post_id": 54225255, "comment_id": 95486745, "body": "@Don I&#39;m new with VSCode, so I&#39;m not entirely sure if it&#39;s the appropriate option to use. I was following the documentation <a href=\"https://code.visualstudio.com/docs/python/debugging\" rel=\"nofollow noreferrer\">here</a> and found the parameter and <a href=\"https://donjayamanne.github.io/pythonVSCodeDocs/docs/debugging_library-functions/\" rel=\"nofollow noreferrer\">here</a> for possible values (also found in this <a href=\"https://stackoverflow.com/a/36868320/\">answer</a> )"}], "owner": {"reputation": 2421, "user_id": 1344579, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/87738f0d76cd96e179917eae86f2659d?s=128&d=identicon&r=PG", "display_name": "NewGuy", "link": "https://stackoverflow.com/users/1344579/newguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 612, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547672237, "creation_date": 1547672237, "question_id": 54225255, "link": "https://stackoverflow.com/questions/54225255/property-debugoptions-is-not-allowed", "title": "Property debugOptions is not allowed", "body": "<p>I've just installed VSCode (version 1.30.2) and am setting it up to use with Python. I want to enable debugging. The default <code>launch.json</code> contains this entry:</p>\n\n<pre><code>{\n    \"name\": \"Python: Current File (Integrated Terminal)\",\n    \"type\": \"python\",\n    \"request\": \"launch\",\n    \"program\": \"${file}\",\n    \"console\": \"integratedTerminal\"\n}\n</code></pre>\n\n<p>I have modified it to also include the <code>debugOptions</code>:</p>\n\n<pre><code>{\n    \"name\": \"Python: Debug\",\n    \"type\": \"python\",\n    \"request\": \"launch\",\n    \"program\": \"${file}\",\n    \"debugOptions\": [\n        \"WaitOnAbnormalExit\",\n        \"WaitOnNormalExit\",\n        \"RedirectOutput\"\n    ]\n}\n</code></pre>\n\n<p>However, VSCode warns me about <code>debugOptions</code> with the following warning:</p>\n\n<pre><code>Property debugOptions is not allowed.\n</code></pre>\n\n<p>I've seen this <a href=\"https://stackoverflow.com/q/52807693/1344579\">question</a> but the answer doesn't seem to actually change the warning. Additionally, I don't seem to need the line that the answer indicates I need.</p>\n\n<p>Debugging works with the configuration I have, but I want to remove the warning that VSCode is showing on \"debugOptions\". How can I do so?</p>\n"}, {"tags": ["python", "python-2.7", "arguments", "parameter-passing", "args"], "comments": [{"owner": {"reputation": 3437, "user_id": 313145, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c631212bfc0d30a62d7269dd04237c1b?s=128&d=identicon&r=PG", "display_name": "J&#246;rg Beyer", "link": "https://stackoverflow.com/users/313145/j%c3%b6rg-beyer"}, "edited": false, "score": 0, "creation_date": 1547672492, "post_id": 54225248, "comment_id": 95276426, "body": "please correct the indention - this is not valid python code"}, {"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 1, "creation_date": 1547672495, "post_id": 54225248, "comment_id": 95276428, "body": "Please indent your code properly (it&#39;s impossible to follow it as it is now). Also, please remove any code that isn&#39;t pertinent to <i>this</i> question."}, {"owner": {"reputation": 37, "user_id": 5831297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce42a5aedbaa0abf49416cfceeb66b92?s=128&d=identicon&r=PG&f=1", "display_name": "mean developer", "link": "https://stackoverflow.com/users/5831297/mean-developer"}, "reply_to_user": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1547672876, "post_id": 54225248, "comment_id": 95276601, "body": "@thebjorn  Code has been indented  and removed code that isnt pertinent to this question"}, {"owner": {"reputation": 37, "user_id": 5831297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce42a5aedbaa0abf49416cfceeb66b92?s=128&d=identicon&r=PG&f=1", "display_name": "mean developer", "link": "https://stackoverflow.com/users/5831297/mean-developer"}, "reply_to_user": {"reputation": 3437, "user_id": 313145, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c631212bfc0d30a62d7269dd04237c1b?s=128&d=identicon&r=PG", "display_name": "J&#246;rg Beyer", "link": "https://stackoverflow.com/users/313145/j%c3%b6rg-beyer"}, "edited": false, "score": 0, "creation_date": 1547672891, "post_id": 54225248, "comment_id": 95276612, "body": "@J&#246;rgBeyer Code has been indented"}, {"owner": {"reputation": 3437, "user_id": 313145, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c631212bfc0d30a62d7269dd04237c1b?s=128&d=identicon&r=PG", "display_name": "J&#246;rg Beyer", "link": "https://stackoverflow.com/users/313145/j%c3%b6rg-beyer"}, "edited": false, "score": 0, "creation_date": 1547673038, "post_id": 54225248, "comment_id": 95276672, "body": "are you sure, that this is real code? for example: &quot;path, files, data = get_config()&quot; in the &quot;get_config&quot; function is unreachable. You unconditioanlly &quot;return&quot; in the line above. Also please take a look at the &quot;return&quot; in &quot;get_json_location&quot;"}, {"owner": {"reputation": 37, "user_id": 5831297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce42a5aedbaa0abf49416cfceeb66b92?s=128&d=identicon&r=PG&f=1", "display_name": "mean developer", "link": "https://stackoverflow.com/users/5831297/mean-developer"}, "reply_to_user": {"reputation": 3437, "user_id": 313145, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c631212bfc0d30a62d7269dd04237c1b?s=128&d=identicon&r=PG", "display_name": "J&#246;rg Beyer", "link": "https://stackoverflow.com/users/313145/j%c3%b6rg-beyer"}, "edited": false, "score": 0, "creation_date": 1547673275, "post_id": 54225248, "comment_id": 95276797, "body": "Yes this is the correct code @J&#246;rgBeyer   I have checked my code and its fine. get_json_location returns a file path"}, {"owner": {"reputation": 3437, "user_id": 313145, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c631212bfc0d30a62d7269dd04237c1b?s=128&d=identicon&r=PG", "display_name": "J&#246;rg Beyer", "link": "https://stackoverflow.com/users/313145/j%c3%b6rg-beyer"}, "edited": false, "score": 0, "creation_date": 1547673395, "post_id": 54225248, "comment_id": 95276846, "body": "Please take another look at your code. What about the for-loop in generate_json? Or the return in the first function (get_json_location) ?"}, {"owner": {"reputation": 37, "user_id": 5831297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce42a5aedbaa0abf49416cfceeb66b92?s=128&d=identicon&r=PG&f=1", "display_name": "mean developer", "link": "https://stackoverflow.com/users/5831297/mean-developer"}, "reply_to_user": {"reputation": 3437, "user_id": 313145, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c631212bfc0d30a62d7269dd04237c1b?s=128&d=identicon&r=PG", "display_name": "J&#246;rg Beyer", "link": "https://stackoverflow.com/users/313145/j%c3%b6rg-beyer"}, "edited": false, "score": 0, "creation_date": 1547673486, "post_id": 54225248, "comment_id": 95276880, "body": "My code is fine. All i have not done is added in the imports @J&#246;rgBeyer"}, {"owner": {"reputation": 306, "user_id": 8132160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6092bf548e75779644df38b31a8fd39?s=128&d=identicon&r=PG&f=1", "display_name": "Rachel", "link": "https://stackoverflow.com/users/8132160/rachel"}, "edited": false, "score": 0, "creation_date": 1547674625, "post_id": 54225248, "comment_id": 95277396, "body": "Why don&#39;t you refactor <code>main</code> in <code>generate.py</code> to take a list as input?  Then change the calling statements to first call <code>get_config</code> and then call <code>main</code> with the result.  Then you can call the <code>generate.py</code>&#39;s <code>main</code> by <code>gen_json.main([path, files, data])</code>, i.e. explicitly sending a list."}], "answers": [{"tags": [], "owner": {"reputation": 11899, "user_id": 7216865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X90W9.png?s=128&g=1", "display_name": "Maurice Meyer", "link": "https://stackoverflow.com/users/7216865/maurice-meyer"}, "is_accepted": false, "score": 1, "last_activity_date": 1547675616, "creation_date": 1547675616, "answer_id": 54225973, "question_id": 54225248, "link": "https://stackoverflow.com/questions/54225248/how-to-import-python-script-and-pass-arguments-to-the-main-function/54225973#54225973", "title": "How to import python script and pass arguments to the main function", "body": "<p>Think about refactoring your code!  </p>\n\n<p>To answer your question, you could pass a string from <code>main.py</code> to <code>gen_json.main('...')</code> and further to <code>gen_json.get_config('...')</code>. Argparse will evaluate that string, which needs to splitted into a list.<br>\nYou are still able to call generate.py with command line parameters.</p>\n\n<p>Please note that I removed <strong>unneccessary/incorrect code/identation</strong> to show how that could work in principle. </p>\n\n<p>generate.py:</p>\n\n<pre><code>import argparse\nimport sys\n\n\ndef main(cliParams=None):\n  cfg, data, date = get_config(cliParams)\n  print (cfg, data, date)\n\n  #json_location = cfg\n  #json_database = data[\"config\"][\"database\"]\n  #json_collection = data[\"config\"][\"collection\"]\n  #json_path = \"{0}/{1}{2}/{3}/{3}.json\".format(json_location, date, json_database, json_collection)\n  #print json_path\n\ndef get_config(cliParams=None):\n  parser = argparse.ArgumentParser()\n  parser.add_argument(\"-p\", \"--parameter-file\", action=\"store\", required=True)\n  parser.add_argument(\"-e\", \"--export-data-file\", action=\"store\", required=True)\n  parser.add_argument(\"-d\", \"--export-date\", action=\"store\", required=True)\n\n  if not cliParams:\n    args = parser.parse_args()\n  else:\n    args = parser.parse_args(cliParams.split())\n  #return [args.parameter_file, funcs.read_config(args.export_data_file), args.export_date]\n  return [args.parameter_file, args.export_data_file, args.export_date]\n\n\nif __name__ == \"__main__\":\n  logging.getLogger().setLevel(logging.INFO)\n  main()\n</code></pre>\n\n<p>main.py:</p>\n\n<pre><code>import os\nimport generate as gen_json\n\ndef generate_json():\n  path = '/tmp/foo.yml'\n  data = 'export_agent_core_agent.yaml'\n  date = '2019-01-15'\n\n  argParseString = '-p %s -e %s -d %s' % (path, data, date)\n  gen_json.main(argParseString)\n\nif __name__ == '__main__':\n  generate_json()\n</code></pre>\n\n<p>Prints to stdout:</p>\n\n<pre><code>&gt;&gt;&gt; /tmp/foo.yml export_agent_core_agent.yaml 2019-01-15\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5831297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce42a5aedbaa0abf49416cfceeb66b92?s=128&d=identicon&r=PG&f=1", "display_name": "mean developer", "link": "https://stackoverflow.com/users/5831297/mean-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3124, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547675616, "creation_date": 1547672179, "last_edit_date": 1547672833, "question_id": 54225248, "link": "https://stackoverflow.com/questions/54225248/how-to-import-python-script-and-pass-arguments-to-the-main-function", "title": "How to import python script and pass arguments to the main function", "body": "<p>I have two python scripts. The main script calls generate.py which has a main function that takes 3 arguments from argsparse. What i am trying to do is , import generate.py in to main.py. Call the main function from generate.py but pass the three arguments in to this so that it can execute the main function with these arguments.</p>\n\n<p>The three arguments are path , files and data.</p>\n\n<p>Path is just a filepath to data\nfiles is essentially the for loop looping through files in a directory\ndata is a folder with json files</p>\n\n<p>So far my main.py script looks as follows. :</p>\n\n<pre><code>def get_json_location(username=os.getlogin()):\n  first = \"/Users/\"\n  last = \"/Desktop/data-code/Testdata\"\n  result = first + username + last\nreturn result\n\n\ndef get_config():\n  parser = argparse.ArgumentParser()\n  parser.add_argument(\"-p\", \"--parameter-file\", action=\"store\", required=False)\n  parser.add_argument(\"-e\", \"--export-data-file\", action=\"store\", required=False)\n  parser.add_argument(\"-d\", \"--export-date\", action=\"store\", required=False)\n  args = parser.parse_args()\n\n  return [args.parameter_file, args.export_data_file, args.export_date]\n\n  path, files, data = get_config()\n\n  date = get_config()[2]\n  yml_directory = os.listdir('yaml')\n  yml_directory.remove('export_config.yaml')\n\n\ndef generate_json():\n  with open('dates/' + date + '.json', 'w') as start:\n  start.close()\n\n  for yml in yml_directory :\n  print(\"Running export for \" + yml)\n\n\n  # Here is the script that i am calling but i want to pass the parameters path , file and data_folder\n  gen_json.main(path,files,data)\n\n\n\n  if __name__ == '__main__':\n  generate_json()\n</code></pre>\n\n<p>generate.py is as follows :</p>\n\n<pre><code>def main(get_config):\n  cfg = get_config()[0] # json location\n  data = get_config()[1] # export_agent_core_agent.yaml\n  date = get_config()[2] # synthetic data folder - YYYY-MM-DD\n\n\njson_location = cfg\njson_database = data[\"config\"][\"database\"]\njson_collection = data[\"config\"][\"collection\"]\njson_path = \"{0}/{1}{2}/{3}/{3}.json\".format(json_location, date, json_database, json_collection)\n\ndef get_config():\n  parser = argparse.ArgumentParser()\n  parser.add_argument(\"-p\", \"--parameter-file\", action=\"store\", required=True)\n  parser.add_argument(\"-e\", \"--export-data-file\", action=\"store\", required=True)\n  parser.add_argument(\"-d\", \"--export-date\", action=\"store\", required=True)\n  args = parser.parse_args()\n\n  return [args.parameter_file, funcs.read_config(args.export_data_file), args.export_date]\n\n\nif __name__ == \"__main__\":\n  logging.getLogger().setLevel(logging.INFO)\n  main(get_config)\n</code></pre>\n"}, {"tags": ["python", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 687, "user_id": 3901216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6133069a70b73d84f51e886a6139e898?s=128&d=identicon&r=PG&f=1", "display_name": "tch", "link": "https://stackoverflow.com/users/3901216/tch"}, "is_accepted": false, "score": 0, "last_activity_date": 1547674156, "creation_date": 1547674156, "answer_id": 54225679, "question_id": 54225235, "link": "https://stackoverflow.com/questions/54225235/loop-through-numpy-matrix-elements/54225679#54225679", "title": "loop through numpy matrix elements", "body": "<p>You can use <a href=\"https://docs.scipy.org/doc/numpy-1.15.0/reference/generated/numpy.diag.html#numpy.diag\" rel=\"nofollow noreferrer\"><code>np.diag</code></a> to extract the <code>k</code>-th diagonal and then sum it.</p>\n\n<pre><code>{str(i):np.sum(np.diag(match_score_matrix,k=i)) for i in range(-15,8)}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": true, "score": 1, "last_activity_date": 1547674477, "creation_date": 1547674477, "answer_id": 54225747, "question_id": 54225235, "link": "https://stackoverflow.com/questions/54225235/loop-through-numpy-matrix-elements/54225747#54225747", "title": "loop through numpy matrix elements", "body": "<p>Consider using  <em>offset</em> in <a href=\"https://docs.scipy.org/doc/numpy-1.15.0/reference/generated/numpy.diagonal.html\" rel=\"nofollow noreferrer\"><code>np.diagonal</code></a>. Because the diagonal are when goals are equal to each other between home and away teams, one offset upward are probabilities when away team is one goal higher than home team. Conversely, one offset downward are probabilities when home team is one goal higher than away team. Therefore, sum the two probabilities.</p>\n\n<pre><code># AWAY ONE GOAL HIGHER\nnp.sum(np.diagonal(match_score_matrix, offset=1))    \n# HOME ONE GOAL HIGHER\nnp.sum(np.diagonal(match_score_matrix, offset=-1))\n\n# AWAY TWO GOALS HIGHER\nnp.sum(np.diagonal(match_score_matrix, offset=2))    \n# HOME TWO GOALS HIGHER\nnp.sum(np.diagonal(match_score_matrix, offset=-2))\n...\n\n# AWAY MAX GOALS HIGHER USING array.shape\nnp.sum(np.diagonal(match_score_matrix, offset=match_score_matrix.shape[0]))\n# HOME MAX GOALS HIGHER USING array.shape\nnp.sum(np.diagonal(match_score_matrix, offset=-match_score_matrix.shape[0]))\n</code></pre>\n\n<p>And for your needed dictionary, use a dictionary comprehension</p>\n\n<pre><code>def get_probabilities(match_score_matrix, max_goals_home, max_goals_away):\n\n    # DICTIONARY COMPREHENSION \n    return {str(i): np.sum(np.diagonal(match_score_matrix, offset=i)) for i in range(-15,15)}\n</code></pre>\n"}], "owner": {"reputation": 601, "user_id": 7959614, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f104f49cd87068e81f128afbda86a637?s=128&d=identicon&r=PG&f=1", "display_name": "HJA24", "link": "https://stackoverflow.com/users/7959614/hja24"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 54225747, "answer_count": 2, "score": 0, "last_activity_date": 1547674477, "creation_date": 1547672104, "question_id": 54225235, "link": "https://stackoverflow.com/questions/54225235/loop-through-numpy-matrix-elements", "title": "loop through numpy matrix elements", "body": "<p>I have the following matrix where each element represent a probability of a specific scoreline.  <a href=\"https://i.stack.imgur.com/JKpde.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JKpde.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>The number of goals of the home team is on the y-axis and the number of goals of the away team is the x-axis. The scoreline 0-0 is, for example, 1.21 and the scoreline of 4-3 is 0.84. I know that the probability of a home win is equal to </p>\n\n<pre><code>   np.sum(np.tril(match_score_matrix, -1))\n</code></pre>\n\n<p>The probability of draw is equal to:</p>\n\n<pre><code>   np.sum(np.diag(match_score_matrix))\n</code></pre>\n\n<p>The probability of a loss is equal to:</p>\n\n<pre><code>   np.sum(np.triu(match_score_matrix, 1)),\n</code></pre>\n\n<p>Now, I want to know the probability of each goal differences. In this matrix, the following goal differences outcomes are possible [-6, -5, ..., 0, ..., 15). How can I write a loop that calculates the probability of each outcome?</p>\n\n<pre><code>def get_probabilities(match_score_matrix, max_goals_home, max_goals_away):\n    return dict({'max_goals_away': np.something,\n                 '-5', np.something,\n                 '-4', np.something,\n                 ... \n                 '0', np.diag(match_score_matrix)),\n                 '1', np.something\n                 ...\n                 'max_goals_home', np.something })\n</code></pre>\n\n<p>How can I write this in an easy-to-use loop? Thank you in advance!</p>\n"}, {"tags": ["python", "sql", "select", "sqlite", "runtime-error"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1547672171, "post_id": 54225215, "comment_id": 95276292, "body": "Do not use string formatting to add parameters to queries. There is a fully-developed, perfectly simple system to create parameterized queries that avoid the risks of SQL injection."}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1547672318, "post_id": 54225215, "comment_id": 95276347, "body": "A likely issue is that you&#39;ve created multiple databases by accident while developing, and this cursor is connected to a legacy mistake. You need only to make a connection to a database that doesn&#39;t exist in SQLite and it will spring into life."}, {"owner": {"reputation": 2444, "user_id": 6180031, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh5.googleusercontent.com/-HRw-01bXV4c/AAAAAAAAAAI/AAAAAAAACP8/Mi48YmzBWL0/photo.jpg?sz=128", "display_name": "ZorgoZ", "link": "https://stackoverflow.com/users/6180031/zorgoz"}, "edited": false, "score": 0, "creation_date": 1547672374, "post_id": 54225215, "comment_id": 95276375, "body": "Are you sure, that this string construction is ok? No blanks will be added this way between the individual parts!"}, {"owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1547672723, "post_id": 54225215, "comment_id": 95276520, "body": "You need a space before <code>FROM</code> clause but I assume it is a typo here and not in actual code."}, {"owner": {"reputation": 53, "user_id": 10788818, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wRSKeQeMPI8/AAAAAAAAAAI/AAAAAAAAAKM/fC-Bz9nF5BU/photo.jpg?sz=128", "display_name": "Nathan Winspear", "link": "https://stackoverflow.com/users/10788818/nathan-winspear"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1547672916, "post_id": 54225215, "comment_id": 95276625, "body": "@roganjosh - I have checked the code that connects to the database and it is linked to the correct database file of which only one is there, could you tell me more about the name of the system for creating parameterised queries it may be worth changing to this as I use parameterised queries often in this program?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1547672979, "post_id": 54225215, "comment_id": 95276646, "body": "That <i>is</i> the name of the system. <a href=\"https://stackoverflow.com/questions/22776756/parameterized-queries-in-sqlite3-using-question-marks\" title=\"parameterized queries in sqlite3 using question marks\">stackoverflow.com/questions/22776756/&hellip;</a> etc."}, {"owner": {"reputation": 53, "user_id": 10788818, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wRSKeQeMPI8/AAAAAAAAAAI/AAAAAAAAAKM/fC-Bz9nF5BU/photo.jpg?sz=128", "display_name": "Nathan Winspear", "link": "https://stackoverflow.com/users/10788818/nathan-winspear"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1547673233, "post_id": 54225215, "comment_id": 95276771, "body": "@Parfait <i>facepalms</i> I feel like an idiot, all it was missing was a space after &quot;expense&quot;, Thanks for your help guys."}], "owner": {"reputation": 53, "user_id": 10788818, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wRSKeQeMPI8/AAAAAAAAAAI/AAAAAAAAAKM/fC-Bz9nF5BU/photo.jpg?sz=128", "display_name": "Nathan Winspear", "link": "https://stackoverflow.com/users/10788818/nathan-winspear"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547672031, "creation_date": 1547672031, "question_id": 54225215, "link": "https://stackoverflow.com/questions/54225215/sql-error-when-executing-in-python-but-not-in-sql-terminal", "title": "SQL Error when executing in python but not in sql terminal", "body": "<p>I am writing a basic program in python and using sqlite3 as my database to store information.</p>\n\n<p>I am trying to select some data from my database so that I can use it in my program, I have done this before in the program several times however this statement isn't working.</p>\n\n<pre><code>db_cursor.execute(\"SELECT startDate, renewalPeriod, description, income, expense\"\n                  \"FROM IncomeExpense \"\n                  \"WHERE accountID = {}\".format(account_id))\n</code></pre>\n\n<p>The error I am getting is:</p>\n\n<pre><code>sqlite3.OperationalError: no such column: startDate\n</code></pre>\n\n<p>This is the sql for table design:</p>\n\n<pre><code>CREATE TABLE IncomeExpense (\n    rowID INTEGER PRIMARY KEY AUTOINCREMENT,\n    startDate TEXT NOT NULL,\n    renewalPeriod INTEGER NOT NULL,\n    description TEXT NOT NULL,\n    type TEXT NOT NULL,\n    income FLOAT NOT NULL,\n    expense FLOAT NOT NULL,\n    accountID INTEGER,\n    FOREIGN KEY (accountID) REFERENCES Account(accountID));\n</code></pre>\n\n<p>The kicker is that when I manually type that select statement into the sqlite3 terminal it gives me the data no problem. I have included an image of the output I get when I enter it manually however I have blocked out the description, income and expense columns as they contain personal information. </p>\n\n<p><a href=\"https://i.stack.imgur.com/CxEGf.png\" rel=\"nofollow noreferrer\">Image of output in sqlite3 terminal</a></p>\n\n<p>I am not sure if it is something simple I am missing in this statement however any assistance would be greatly appreciated.</p>\n\n<p>Thanks :) </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1547672320, "post_id": 54225203, "comment_id": 95276348, "body": "Every path of execution must end in a <code>return</code>; unless the implicit <code>None</code> return is appropriate."}], "answers": [{"tags": [], "owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "is_accepted": true, "score": 2, "last_activity_date": 1547672067, "creation_date": 1547672067, "answer_id": 54225219, "question_id": 54225203, "link": "https://stackoverflow.com/questions/54225203/function-returns-none-but-prints-result/54225219#54225219", "title": "Function returns None, but prints result", "body": "<p>You need to return your recursive calls</p>\n\n<pre><code>def maximum(arr):\n    if len(arr) == 1:\n        return arr[0]\n    else:\n        if arr[0] &gt; arr[1]:\n            del arr[1]\n            return maximum(arr)\n    elif arr[0] &lt;= arr[1]:\n        del arr[0]\n        return maximum(arr)\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10839789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a247a6a7071f41293b6203e89fff787?s=128&d=identicon&r=PG&f=1", "display_name": "mrMoonpenguin", "link": "https://stackoverflow.com/users/10839789/mrmoonpenguin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 54225219, "answer_count": 1, "score": -1, "last_activity_date": 1547672304, "creation_date": 1547671971, "last_edit_date": 1547672304, "question_id": 54225203, "link": "https://stackoverflow.com/questions/54225203/function-returns-none-but-prints-result", "title": "Function returns None, but prints result", "body": "<pre><code>def maximum(arr):\n    if len(arr) == 1:\n        return arr[0]\n    else:\n        if arr[0] &gt; arr[1]:\n            del arr[1]\n            maximum(arr)\n        elif arr[0] &lt;= arr[1]:\n            del arr[0]\n            maximum(arr)\n\n\nprint(maximum([2, 2]))\n</code></pre>\n\n<p>If I change <code>return arr[0]</code> with <code>print(arr[0])</code> it prints out 2, but for some reason it returns None if I write <code>return arr[0]</code>. I also tried returning the whole array as the array is always 1 element long, but that didn't change anything and still returns None.</p>\n"}, {"tags": ["python", "bash", "raspbian", "vlc", "omxplayer"], "answers": [{"tags": [], "owner": {"reputation": 173, "user_id": 7171026, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ofme6ZfwJzE/AAAAAAAAAAI/AAAAAAAABPo/VA3x326hJ4Q/photo.jpg?sz=128", "display_name": "Basil Eric Rabi", "link": "https://stackoverflow.com/users/7171026/basil-eric-rabi"}, "is_accepted": false, "score": 0, "last_activity_date": 1562409120, "creation_date": 1562409120, "answer_id": 56913245, "question_id": 54225192, "link": "https://stackoverflow.com/questions/54225192/how-to-play-a-shuffled-list-of-videos-in-omxplayer/56913245#56913245", "title": "How to play a shuffled list of videos in omxplayer", "body": "<p>I created a \"play all random\" script for my daughter using R:</p>\n\n<pre><code>#!/usr/bin/Rscript\nsetwd(\"/home/pi/Desktop/MyDir\")\n\nfl &lt;- list.files(\".\")\nfl &lt;- sample(x = fl, size = length(fl))\nlen &lt;- length(fl)\ni &lt;- 1L\nwhile(i &lt;= len) {\n  tmpCMD &lt;- paste(\"omxplayer -b \\\"\", fl[i], \"\\\"\", sep = \"\")\n  cat(tmpCMD,\"\\n\")\n  tmpLog &lt;- system(command = tmpCMD)\n  if (tmpLog == 2)\n    break\n  i &lt;- i + 1L\n}\n</code></pre>\n\n<p>And using the script, I also created a .desktop file with icon so I can make it clickable in the application launch bar:</p>\n\n<pre><code>[Desktop Entry]\nName=PlayAll\nGenericName=Play All\nExec=/home/pi/bin/PlayAll.R\nIcon=/home/pi/Pictures/PlayAll.png\nTerminal=true\nType=Application\nCategories=AudioVideo;Video;Audio;Music;\nComment=Video Playlist\n</code></pre>\n\n<p>Like omxplayer, you can press <code>q</code> to play the next video and <code>CTRL+c</code> to stop playing.</p>\n"}], "owner": {"reputation": 132, "user_id": 1717823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d870363b1358d6b93e064263a5643a07?s=128&d=identicon&r=PG", "display_name": "KBKarma", "link": "https://stackoverflow.com/users/1717823/kbkarma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2033, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562409120, "creation_date": 1547671921, "question_id": 54225192, "link": "https://stackoverflow.com/questions/54225192/how-to-play-a-shuffled-list-of-videos-in-omxplayer", "title": "How to play a shuffled list of videos in omxplayer", "body": "<p>To start: I'm a novice with Python and bash - I did some bashscripting many years ago, and I've only ever dabbled in Python. And I think I'm slightly out of my depth.</p>\n\n<h1>What I have</h1>\n\n<ul>\n<li>91 mp4 video files (more on them anon)</li>\n<li>A Raspberry Pi 3 B, running Raspbian Stretch (as far as I'm aware)</li>\n<li>A Western Digital <i>My Passport</i> USB3 external hard disc-</li>\n</ul>\n\n<h1>What I want</h1>\n\n<p>I'm trying to set up something for my grandmother - she plugs in the Pi, it boots, and begins playing the videos in a folder on the external drive in a random order in a loop. I want it to be as simple as possible, as she's in her late 80s, not very technical, and lives 9,211km from me. As a result, any changes will have to be made by the more techy family members over there, who are not familiar with Linux or Python at all.</p>\n\n<h1>What I've got</h1>\n\n<p>I've got the fstab set up:</p>\n\n<pre><code>UUID=\"XXXXXXX\" /media/videoDrive auto nosuid,nodev,nofail 0 0\n</code></pre>\n\n<p>That works grand.</p>\n\n<p>I tried to play the videos via the command line in VLC, as it has support for playing files in a directory shuffled in a loop. And it worked... sort of. The videos were incredibly choppy the larger the video player was, and basically didn't play at full screen. I found out that omxplayer would play mp4s fine - but some of the videos were webm, which it refused to play. I converted those, though, so that's OK.</p>\n\n<p>I found a bashscript online, which was as follows:</p>\n\n<pre><code>#!/bin/bash\n\nsetterm -cursor off\nsetterm -clear\n\nfor file in $1/*\ndo\n omxplayer \"$file\" &gt; /dev/null\ndone\n\nsetterm -cursor on\n</code></pre>\n\n<p>Using that, I wrote the following Python script:</p>\n\n<pre><code>#Autoplay Script\nimport os, random\n\n#playlist path\npath = \"/media/videoDrive/vids\"\n\nvideoList = os.listdir(path)\nrandom.shuffle(videoList)\nfor video in videoList:\n    target = os.path.join(path, video)\n    os.system('omxplayer \"{}\" &gt; /dev/null'.format(target))\n</code></pre>\n\n<p>All I need to do is look up what file to add the script call to (I think it's initrc), then write instructions, package it up, and hand it over to my parents to take over there.</p>\n\n<p>... Once I've got the playback issue sorted.</p>\n\n<h1>What the problem is</h1>\n\n<p>Anyone with any Python knowledge may have figured out that the Python script will run until every video has been played (I only just realised it wouldn't even loop - dang). Which means that shutting down the Pi becomes quite difficult - you need to kill the Python process, then kill all omxplayer processes, and can only do that when the video isn't fullscreen, which happens with a few of them (I'd have fixed it when I first noticed the issue, but then I'd have to pull the plug on the Pi, which might not agree with the external). </p>\n\n<p>I'd like to have some way to run the player, playing videos at random for eternity until some sort of input happens, which kills the loop and omxplayer. Alternatively, if anyone can figure out how to get VLC to play these videos without issue, that'll be perfect.</p>\n"}, {"tags": ["python", "list", "loops", "dictionary", "nlp"], "comments": [{"owner": {"reputation": 1366, "user_id": 2126357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/413f5b3f165ec3a47b23076a85d21a7c?s=128&d=identicon&r=PG", "display_name": "Amit Amola", "link": "https://stackoverflow.com/users/2126357/amit-amola"}, "edited": false, "score": 0, "creation_date": 1547672060, "post_id": 54225185, "comment_id": 95276250, "body": "What&#39;s your desired output, what do you eventually want to get out of your list of dictionary?"}, {"owner": {"reputation": 1, "user_id": 10924494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/681288661ce5379ed360b719dd48e21b?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/10924494/henry"}, "reply_to_user": {"reputation": 1366, "user_id": 2126357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/413f5b3f165ec3a47b23076a85d21a7c?s=128&d=identicon&r=PG", "display_name": "Amit Amola", "link": "https://stackoverflow.com/users/2126357/amit-amola"}, "edited": false, "score": 0, "creation_date": 1547672213, "post_id": 54225185, "comment_id": 95276304, "body": "@AmitAmola The desired output is shown above. I need it to output matches to other dictionaries within the list"}, {"owner": {"reputation": 1366, "user_id": 2126357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/413f5b3f165ec3a47b23076a85d21a7c?s=128&d=identicon&r=PG", "display_name": "Amit Amola", "link": "https://stackoverflow.com/users/2126357/amit-amola"}, "edited": false, "score": 1, "creation_date": 1547702444, "post_id": 54225185, "comment_id": 95284064, "body": "Sorry mate, I am still unclear about the question. :("}, {"owner": {"reputation": 1, "user_id": 10924494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/681288661ce5379ed360b719dd48e21b?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/10924494/henry"}, "reply_to_user": {"reputation": 1366, "user_id": 2126357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/413f5b3f165ec3a47b23076a85d21a7c?s=128&d=identicon&r=PG", "display_name": "Amit Amola", "link": "https://stackoverflow.com/users/2126357/amit-amola"}, "edited": false, "score": 0, "creation_date": 1547714942, "post_id": 54225185, "comment_id": 95288944, "body": "I need to iterate through the incident_keywords list. For each dictionary, it will take its value and use that as the &#39;query&#39; then perform the search. It will then move onto the next dictionary and do the same"}], "owner": {"reputation": 1, "user_id": 10924494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/681288661ce5379ed360b719dd48e21b?s=128&d=identicon&r=PG&f=1", "display_name": "Henry", "link": "https://stackoverflow.com/users/10924494/henry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547672734, "creation_date": 1547671895, "last_edit_date": 1547672734, "question_id": 54225185, "link": "https://stackoverflow.com/questions/54225185/how-would-i-loop-through-a-list-of-dictionaries-and-apply-another-for-loop-to-ea", "title": "How would I loop through a list of dictionaries and apply another for loop to each item within the list?", "body": "<p>I have the following list of dictionaries that must be in this format:</p>\n\n<pre><code>incident keywords = [{'INC000007581874': 'ccd browser'},\n                     {'INC000007581947': 'CATIA'},\n                     {'INC000007582037': 'Catia'}]\n</code></pre>\n\n<p>I need to apply a search function to each one of these dictionary entries within this list.</p>\n\n<p>I have been thinking a for loop is the way to go but I do not know how to implement it. I also am thinking that removing the 'query = 'ccd browser'' to being applicable to all values within the dictionaries might be a way of doing it but I am not sure how to do it.</p>\n\n<p>So through each loop, it would use 'ccd browser' then next it would use 'CATIA' and so on for all dictionaries within the list, however long the list is.</p>\n\n<pre><code>def look_up(id,keywords):\n\n    # Ignores case\n    keywords = keywords.lower()\n    for item in incident_keywords:\n        # if any value contains s\n        if any([keywords in v.lower() for v in item.values()]):\n            # spit out the item \u2014 this is a generator function\n            yield item\n</code></pre>\n\n<p>The look_up() function searches for the word matches.</p>\n\n<pre><code>def search():\n\n    query = 'ccd browser'\n\n    print(' ')\n\n    choices = []\n    id = []\n\n    # iterate over at most 50 first results (can be changed)\n    for result in itertools.islice(look_up(id,query), 50):\n        id.append(list(result.keys()))\n        choices.append(list(result.values()))\n\n    output = process.extract(query,choices,limit=20)\n\n    # Tuple comprehension to remove strings from tuple pairings\n    removed = [tuple(j for j in i if isinstance(j, int)) for i in output]\n\n    print('')\n\n    zipped = [{\"Links:\" : [list(zip(id, removed))]}]\n\n    pprint.pprint(list(zip(incident_keywords_2, zipped)))\n</code></pre>\n\n<p>Search() function does the search but does not apply this to each entry within the list of dictionaries.</p>\n\n<p>Currently I am able to do this for the first entry within the list of dictionaries to give the output:</p>\n\n<pre><code>[({'INC000007581874': 'ccd browser'}},\n  {'Links:': [[(['INC000007581874'], (100,))]]})]\n</code></pre>\n\n<p>But I need help to apply this process to every entry within the list of dictionaries to give an output similar to below, when applied to all entries within the list of dictionaries:</p>\n\n<pre><code>[({'INC000007581874': 'ccd browser'}},\n  {'Links:': [[(['INC000007581874'], (100,))]]})]\n\n[({'INC000007581947': 'CATIA'}},\n  {'Links:': [[(['INC000007581947': 'CATIA'], (100,))]], \n              [(['INC000007582037': 'Catia'], (100,))]})]\n\n[({'INC000007582037': 'Catia'}},\n  {'Links:': [[(['INC000007582037': 'Catia'], (100,))]], \n              [(['INC000007581947': 'CATIA'], (100,))]})]\n</code></pre>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup", "http-headers", "google-chrome-devtools"], "answers": [{"comments": [{"owner": {"reputation": 3808, "user_id": 563744, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4038ca7cc712abff3122d11eb5975b68?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/563744/peter"}, "edited": false, "score": 1, "creation_date": 1579764523, "post_id": 54226045, "comment_id": 105877311, "body": "<code>X-user-agent</code> didn&#39;t work for me, I had to add a <code>User-Agent</code> header.  I think this depends on the receiving REST API (in my case Pluralsight).  I used: <code>&#39;User-Agent&#39;: &#39;Mozilla&#47;5.0 (Windows NT 10.0; Win64; x64) AppleWebKit&#47;537.36 (KHTML, like Gecko) Chrome&#47;71.0.3578.98 Safari&#47;537.36&#39;</code> successfully."}], "tags": [], "owner": {"reputation": 17276, "user_id": 7752296, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7033ea69df1e9dddbee828dc92ac967a?s=128&d=identicon&r=PG&f=1", "display_name": "chitown88", "link": "https://stackoverflow.com/users/7752296/chitown88"}, "is_accepted": true, "score": 3, "last_activity_date": 1547735664, "last_edit_date": 1547735664, "creation_date": 1547675995, "answer_id": 54226045, "question_id": 54225104, "link": "https://stackoverflow.com/questions/54225104/403-forbidden-on-requests-post-through-python-although-google-chrome-receiving-r/54226045#54226045", "title": "403 Forbidden on requests.post through Python although google chrome receiving response", "body": "<p>Added in the x-user-agent. Give this a shot:</p>\n\n<pre><code>import requests\nimport json\nheaders = {\n            'Accept': '*/*',\n            'Accept-Encoding': 'gzip, deflate, br',\n            'Accept-Language': 'en-US,en;q=0.9',\n            'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',\n            'Connection': 'keep-alive',\n            'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36',\n            'X-user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36 FKUA/website/41/website/Desktop',\n            'Referer' :   'https://www.flipkart.com/sellers?pid=HSAFFJWT2WUYHHHX',\n            'Content-Type': 'application/json',\n            'Origin': 'https://www.flipkart.com',\n            'Host': 'www.flipkart.com',\n            'Pragma': 'no-cache'\n            }\n\nurl = \"https://www.flipkart.com/api/3/page/dynamic/product-sellers\"\npayLoad = {\"requestContext\":{\"productId\":\"HSAFFJWT2WUYHHHX\"},\"locationContext\":{\"pincode\":\"001195\"}}\nresponse = requests.post(url,headers = headers,data = json.dumps(payLoad))\nprint(response.status_code,response.reason)\nprint(response.text)\nprint(response.request.headers)\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>print(response.status_code,response.reason)\n200 OK\n</code></pre>\n"}], "owner": {"reputation": 148, "user_id": 3423611, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff7e20d8cb851aaf324218f0c2c50b06?s=128&d=identicon&r=PG&f=1", "display_name": "jkasper", "link": "https://stackoverflow.com/users/3423611/jkasper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1165, "favorite_count": 0, "accepted_answer_id": 54226045, "answer_count": 1, "score": 2, "last_activity_date": 1547735664, "creation_date": 1547671582, "last_edit_date": 1547672392, "question_id": 54225104, "link": "https://stackoverflow.com/questions/54225104/403-forbidden-on-requests-post-through-python-although-google-chrome-receiving-r", "title": "403 Forbidden on requests.post through Python although google chrome receiving response", "body": "<p>I am very new to web-scraping. I'm trying to fetch data of flipkart sellers for a product by reverse-engineering the requests and scrape the data.\nThe URL I'm trying on is : <a href=\"https://www.flipkart.com/sellers?pid=HSAFFJWT2WUYHHHX\" rel=\"nofollow noreferrer\">https://www.flipkart.com/sellers?pid=HSAFFJWT2WUYHHHX</a>, which contains list of sellers for a particular product.</p>\n\n<p>When I open the network tab in Google chrome I can see that its making a POST request to: <a href=\"https://www.flipkart.com/api/3/page/dynamic/product-sellers\" rel=\"nofollow noreferrer\">https://www.flipkart.com/api/3/page/dynamic/product-sellers</a> with request payload as :\n <code>{\"requestContext\":{\"productId\":\"HSAFFJWT2WUYHHHX\"},\"locationContext\":{\"pincode\":\"110092\"}}</code></p>\n\n<p>I am copying the request headers and the payload, the browser has sent, in my code but I'm getting a 403 Forbidden message instead of getting a valid JSON data.</p>\n\n<p>Alternately, I've been successful in using <b>Selenium</b> to open this page (<a href=\"https://www.flipkart.com/sellers?pid=HSAFFJWT2WUYHHHX\" rel=\"nofollow noreferrer\">https://www.flipkart.com/sellers?pid=HSAFFJWT2WUYHHHX</a>) and then parse the sellers data using <b> Beautiful Soup </b>. However, selenium is very very slow. That is why I'm trying to fetch the json directly which populates the sellers data dynamically on this page.\nI've tried making a post request from my code as well as Postman but with no luck.</p>\n\n<pre><code>import requests\nimport json\nheaders = {\n            'Accept': '*/*',\n            'Accept-Encoding': 'gzip, deflate, br',\n            'Accept-Language': 'en-US,en;q=0.9',\n            'Accept-Charset': 'ISO-8859-1,utf-8;q=0.7,*;q=0.3',\n            'Connection': 'keep-alive',\n            'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/71.0.3578.98 Safari/537.36',\n            'Referer' :   'https://www.flipkart.com/sellers?pid=HSAFFJWT2WUYHHHX',\n            'Content-Type': 'application/json',\n            'Origin': 'https://www.flipkart.com',\n            'Host': 'www.flipkart.com',\n            'Pragma': 'no-cache'\n            }\n\nurl = \"https://www.flipkart.com/api/3/page/dynamic/product-sellers\"\npayLoad = {\"requestContext\":{\"productId\":\"HSAFFJWT2WUYHHHX\"},\"locationContext\":{\"pincode\":\"001195\"}}\nresponse = requests.post(url,headers = headers,data = json.dumps(payLoad))\nprint(response.status_code,response.reason)\nprint(response.text)\nprint(response.request.headers)\n\n</code></pre>\n\n<p>I'm expecting to get a Json like this programmatically : \n<img src=\"https://imgur.com/a/LkFHodW\" alt=\"response\"></p>\n\n<p>But I'm getting 403 Forbidden. Even though the page does not require a user to login.</p>\n\n<p>Perhaps there is some security token that the api expects that I have not given which is why its throwing 403 Forbidden.</p>\n\n<p>Can anyone help me figure out what am I missing to get the Json?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "scikit-learn"], "comments": [{"owner": {"reputation": 9410, "user_id": 4533188, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c75ac7fb128a03a7da7278ba391e95da?s=128&d=identicon&r=PG&f=1", "display_name": "Make42", "link": "https://stackoverflow.com/users/4533188/make42"}, "edited": false, "score": 0, "creation_date": 1579345179, "post_id": 54225078, "comment_id": 105740514, "body": "When I use &#39;geometric&#39; instead of &#39;arithmetic&#39; I still get negative values or values above 1. Does anyone know why?"}], "answers": [{"tags": [], "owner": {"reputation": 12637, "user_id": 6347629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vxdJr.jpg?s=128&g=1", "display_name": "Venkatachalam", "link": "https://stackoverflow.com/users/6347629/venkatachalam"}, "is_accepted": true, "score": 1, "last_activity_date": 1547808443, "last_edit_date": 1547808443, "creation_date": 1547804707, "answer_id": 54251270, "question_id": 54225078, "link": "https://stackoverflow.com/questions/54225078/normalized-mutual-info-score-in-sklearn-giving-negative-values-or-values-greater/54251270#54251270", "title": "normalized_mutual_info_score in sklearn giving negative values or values greater than 1", "body": "<p>As you have mentioned that setting the average_method gives sensible values. </p>\n\n<pre><code>normalized_mutual_info_score([0]*100001, [0]*100000 + [1],average_method='arithmetic')\n#3.166757680223739e-14\n</code></pre>\n\n<p>I would suggest using the <code>arithmetic</code> since that it going to be the default value in next version 0.22, <a href=\"https://github.com/scikit-learn/scikit-learn/blob/7389dba/sklearn/metrics/cluster/supervised.py#L798\" rel=\"nofollow noreferrer\">reference</a>. </p>\n"}], "owner": {"reputation": 431, "user_id": 3538339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ntlmu.jpg?s=128&g=1", "display_name": "matohak", "link": "https://stackoverflow.com/users/3538339/matohak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "accepted_answer_id": 54251270, "answer_count": 1, "score": 3, "last_activity_date": 1547808443, "creation_date": 1547671452, "question_id": 54225078, "link": "https://stackoverflow.com/questions/54225078/normalized-mutual-info-score-in-sklearn-giving-negative-values-or-values-greater", "title": "normalized_mutual_info_score in sklearn giving negative values or values greater than 1", "body": "<p>I'm trying to calculate the normalized mutual information between two 256*256 image labels, flatten into an array.</p>\n\n<p>In sklearn's documentation it was clear that the function normalized_mutual_info_score should only output values between 0 and 1.</p>\n\n<p>However I realise that when comparing lists with lots of elements sometimes it gives me negative values or values larger than 1. </p>\n\n<p>Is it an overflow/underflow problem? (I realise that I got a more realistic answer if I change average_method to \"arithmetic\", \"min\", or \"max\" but not sure which one would be the most appropriate to use in my case.)</p>\n\n<p>Using sklearn 0.20.0, I'll provide a synthetic example to reproduce the problem:</p>\n\n<pre><code>metrics.normalized_mutual_info_score([0]*100001, [0]*100000 + [1])\nmetrics.normalized_mutual_info_score([0]*110001, [0]*110000 + [1])\n</code></pre>\n\n<p>I expect the answer below to be 0 but instead I got 7.999 and -7.999 respectively.</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 8939621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be9f59706f40bf7ff887195f31925fb?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas", "link": "https://stackoverflow.com/users/8939621/niklas"}, "edited": false, "score": 0, "creation_date": 1547673207, "post_id": 54225126, "comment_id": 95276752, "body": "That already fixed the error for me, thanks a lot! That&#39;s the problem with following too many different tutorials at once... I will try the other answer again later with your proposed changes and edit the question accordingly. Do you see any other things that might cause problems? Maybe I should post it to codereview.stackexchange after."}, {"owner": {"reputation": 5, "user_id": 8939621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be9f59706f40bf7ff887195f31925fb?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas", "link": "https://stackoverflow.com/users/8939621/niklas"}, "edited": false, "score": 0, "creation_date": 1547678949, "post_id": 54225126, "comment_id": 95279125, "body": "I took back the accepted answer for now, so that the other questions can be answered. I wish you could accept multiple answers as correct."}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 0, "last_activity_date": 1547671694, "creation_date": 1547671694, "answer_id": 54225126, "question_id": 54225073, "link": "https://stackoverflow.com/questions/54225073/how-do-i-include-intermediary-models-in-my-django-rest-framework-api/54225126#54225126", "title": "How do I include intermediary Models in my Django Rest Framework API", "body": "<p>You've broken things by specifying related_names on your ForeignKeys in the PuppyOrder model. Remove those.</p>\n"}], "owner": {"reputation": 5, "user_id": 8939621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2be9f59706f40bf7ff887195f31925fb?s=128&d=identicon&r=PG&f=1", "display_name": "Niklas", "link": "https://stackoverflow.com/users/8939621/niklas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 203, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547678730, "creation_date": 1547671435, "last_edit_date": 1547678730, "question_id": 54225073, "link": "https://stackoverflow.com/questions/54225073/how-do-i-include-intermediary-models-in-my-django-rest-framework-api", "title": "How do I include intermediary Models in my Django Rest Framework API", "body": "<p>I am in the process of learning about the Django Rest Framework at the moment and I stumbled unto a tricky part that I can't seem to get working in our project. Our project is a fictional webshop where you can put dog babies in your cart and order them.\nOur Frontend is communicating with the backend via Django Rest Framework. The three main models that we have are Users, Orders and Puppies. Because every order has a list of puppies and every puppy has its own amount we needed an intermediary model for the two as a simple ManyToManyField apparently can't handle extra columns. This makes things much more complicated (at least for someone who is new to Django).</p>\n\n<p><strong>How can I reflect the relationship in the serializers and the views and how do I have to form the JSON Object that is sent from the frontend?</strong></p>\n\n<p>also:</p>\n\n<p><strong>Where would I calculate the total price of an order?</strong></p>\n\n<p><strong>Do I need the OrderDetail view even if I don't want to edit or get one specific order or is the OrderList view enough?</strong></p>\n\n<p>There is a question on here which is solving a similar problem: <a href=\"https://stackoverflow.com/questions/17256724/include-intermediary-through-model-in-responses-in-django-rest-framework\">Include intermediary (through model) in responses in Django Rest Framework</a>\nI implemented it in the code and got it working now, thanks to Daniel Roseman's comment. Creating the orders manually over /admin and getting them works now as it should.\n<strong>I still can't create orders via the API.</strong></p>\n\n<p>This is my code:</p>\n\n<p>models.py:</p>\n\n<pre><code>from django.db import models\nfrom django.conf import settings\nfrom django.contrib.auth.models import User\nfrom django.db.models.signals import post_save\nfrom django.dispatch import receiver\n\n\nclass Puppy(models.Model):\n    name = models.CharField(max_length=30)\n    price = models.DecimalField(max_digits=6, decimal_places=2)\n    image_url = models.CharField(max_length=200)\n    age = models.IntegerField(null=True)\n    weight = models.IntegerField(null=True)\n    description_de = models.CharField(max_length=500, null=True)\n    description_en = models.CharField(max_length=500, null=True)\n\n    def __str__(self):\n        return self.name\n\n\nclass Order(models.Model):\n    total_price = models.DecimalField(max_digits=9, decimal_places=2)\n    puppies = models.ManyToManyField(Puppy, through='PuppyOrder')\n    date = models.DateTimeField()\n    user = models.ForeignKey(settings.AUTH_USER_MODEL, on_delete=models.CASCADE, related_name='orders')\n\n    def save(self, *args, **kwargs):\n        \"\"\"\n        Create a new Order\n        \"\"\"\n        print(\"An order is being saved: \" + str(Order.id))\n        super(Order, self).save(*args, **kwargs)\n\n    def __str__(self):\n        return str(self.id)\n\n\nclass PuppyOrder(models.Model):\n    order = models.ForeignKey(Order, on_delete=models.CASCADE)\n    puppy = models.ForeignKey(Puppy, on_delete=models.CASCADE)\n    amount = models.IntegerField()\n\n    def __str__(self):\n        return self.id\n\n\nclass Address(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    # Some more address fields ...\n\n\n@receiver(post_save, sender=User)\ndef create_user_address(sender, instance, created, **kwargs):\n    if created:\n        Address.objects.create(user=instance)\n\n\n@receiver(post_save, sender=User)\ndef save_user_address(sender, instance, **kwargs):\n    instance.address.save()\n</code></pre>\n\n<p>views.py:</p>\n\n<pre><code>from rest_framework.decorators import api_view\nfrom rest_framework.response import Response\nfrom rest_framework.reverse import reverse\nfrom rest_framework.exceptions import ValidationError\nfrom rest_framework_jwt.serializers import VerifyJSONWebTokenSerializer\nfrom .serializers import UserSerializer, UserSerializerWithToken, OrderSerializer, PuppySerializer\nfrom .permissions import IsOwner\n\n\n@api_view(['GET'])\ndef api_root(request, format=None):\n    return Response({\n        'users': reverse('user-list', request=request, format=format),\n        'orders': reverse('order-list', request=request, format=format),\n        'puppies': reverse('puppy-list', request=request, format=format),\n    })\n\n\nclass OrderList(generics.ListCreateAPIView):\n    http_method_names = [\"get\", \"post\"]\n    queryset = Order.objects.all()\n    permission_classes = (permissions.IsAuthenticatedOrReadOnly,)\n    serializer_class = OrderSerializer\n\n    def get_queryset(self):\n        # Validation Code and getting self.request.user from jwt token ...\n        if self.request.user.is_anonymous:\n            return None\n        return Order.objects.all().filter(user=self.request.user)\n\n    def perform_create(self, serializer):\n        # Validation Code and getting self.request.user from jwt token ...\n        serializer.save(user=self.request.user)\n\n\nclass OrderDetail(generics.RetrieveUpdateDestroyAPIView):\n    http_method_names = [\"get\", \"post\"]\n    permission_classes = (permissions.IsAuthenticatedOrReadOnly,)\n    queryset = Order.objects.all()\n    serializer_class = OrderSerializer\n\n\nclass UserList(generics.ListAPIView):\n    http_method_names = [\"get\", \"post\"]\n    queryset = User.objects.all().select_related('address')\n    serializer_class = UserSerializer\n\n\nclass UserDetail(generics.RetrieveAPIView):\n    http_method_names = [\"get\", \"post\"]\n    queryset = User.objects.all().select_related('address')\n    serializer_class = UserSerializer\n\n\nclass PuppyList(generics.ListAPIView):\n    http_method_names = [\"get\"]\n    permission_classes = (permissions.AllowAny,)\n    queryset = Puppy.objects.all()\n    serializer_class = PuppySerializer\n\n\nclass PuppyDetail(generics.RetrieveAPIView):\n    http_method_names = [\"get\"]\n    permission_classes = (permissions.AllowAny,)\n    queryset = Puppy.objects.all()\n    serializer_class = PuppySerializer\n</code></pre>\n\n<p>serializers.py:</p>\n\n<pre><code>from rest_framework import serializers\nfrom rest_framework_jwt.settings import api_settings\nfrom django.contrib.auth.models import User\nfrom .models import Order, Puppy, PuppyOrder\n\n\nclass UserSerializer(serializers.ModelSerializer):\n    orders = serializers.PrimaryKeyRelatedField(many=True, read_only=True)\n\n    class Meta:\n        model = User\n        fields = ('id', 'username', 'orders')\n\n\nclass UserSerializerWithToken(serializers.ModelSerializer):\n\n# Neccessary code for generating a JWT token ...\n\n\nclass PuppySerializer(serializers.ModelSerializer):\n    description = serializers.SerializerMethodField()\n\n    def get_description(self, puppy):\n        return {'DE': puppy.description_de, 'EN': puppy.description_en}\n\n    class Meta:\n        model = Puppy\n        fields = ('id', 'name', 'price', 'image_url', 'age', 'weight', 'description')\n\n\nclass PuppyOrderSerializer(serializers.ModelSerializer):\n    puppy = serializers.ReadOnlyField(source='order.puppy')\n    order = serializers.ReadOnlyField(source='order.order')\n\n    class Meta:\n        model = PuppyOrder\n        fields = ('id', 'puppy', 'amount')\n\n\nclass OrderSerializer(serializers.ModelSerializer):\n    user = serializers.ReadOnlyField(source='user.username')\n    puppies = PuppyOrderSerializer(source='puppyorder_set', many=True) \n    # This is currently producing an error\n    # puppies = serializers.PrimaryKeyRelatedField(many=True, read_only=True)\n\n    class Meta:\n        model = Order\n        fields = ('id', 'total_price', 'puppies', 'date', 'user')\n\n</code></pre>\n\n<p>Feel free to tell me if you see something in my code that could be improved or doesn't make sense.\nThanks in advance, any help would be much appreciated!</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "edited": false, "score": 3, "creation_date": 1547671551, "post_id": 54225061, "comment_id": 95276017, "body": "It&#39;s worth pointing out that floor division (the way Python2 handled division where both operands were integers), can still be obtained with double slashes (e.g. <code>x &#47;&#47; y</code>)."}, {"owner": {"reputation": 3, "user_id": 10924587, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_4xBoXUnWvQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcat3jxF8fXVe8M5pLvNzDKZIc4kJA/mo/photo.jpg?sz=128", "display_name": "banro", "link": "https://stackoverflow.com/users/10924587/banro"}, "edited": false, "score": 0, "creation_date": 1547677777, "post_id": 54225061, "comment_id": 95278745, "body": "Thank you for your help"}], "tags": [], "owner": {"reputation": 1886, "user_id": 7619260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39d95b317e58de03fe052a9fca2355b7?s=128&d=identicon&r=PG&f=1", "display_name": "Calvin Godfrey", "link": "https://stackoverflow.com/users/7619260/calvin-godfrey"}, "is_accepted": true, "score": 2, "last_activity_date": 1547671371, "creation_date": 1547671371, "answer_id": 54225061, "question_id": 54225031, "link": "https://stackoverflow.com/questions/54225031/cant-multiply-sequence-by-non-int-of-type-floattried-and-tried/54225061#54225061", "title": "Can&#39;t multiply sequence by non-int of type &#39;float&#39;?Tried, and tried", "body": "<p>In Python 3, when you say <code>space = height / 2 - n</code>, it automatically casts the result to a float, so <code>spaces</code> will be <code>4.0 - 1 = 3.0</code>. You'll have to cast it to an <code>int</code> to multiply a string by it.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 10924587, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_4xBoXUnWvQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcat3jxF8fXVe8M5pLvNzDKZIc4kJA/mo/photo.jpg?sz=128", "display_name": "banro", "link": "https://stackoverflow.com/users/10924587/banro"}, "edited": false, "score": 1, "creation_date": 1547677783, "post_id": 54225189, "comment_id": 95278747, "body": "Thank you for your help"}], "tags": [], "owner": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "is_accepted": false, "score": 0, "last_activity_date": 1547671909, "creation_date": 1547671909, "answer_id": 54225189, "question_id": 54225031, "link": "https://stackoverflow.com/questions/54225031/cant-multiply-sequence-by-non-int-of-type-floattried-and-tried/54225189#54225189", "title": "Can&#39;t multiply sequence by non-int of type &#39;float&#39;?Tried, and tried", "body": "<p>As pointed out in the comments, since you are using Python3, you can use the floor division operator to assure an int result:</p>\n\n<pre><code>def half_finished_diamond(height):\n    n = 1\n    for i in range(height):\n        spaces = height // 2 - n    # &lt;-- note the // instead of /\n        blank = \" \"\n        print(blank*spaces + '/' * n + '\\\\' * n + \"\\n\")\n        n += 1\n\n\nhalf_finished_diamond(8)\n</code></pre>\n\n<p>See it in action on <a href=\"https://eval.in/1078035\" rel=\"nofollow noreferrer\">https://eval.in/1078035</a></p>\n"}], "owner": {"reputation": 3, "user_id": 10924587, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_4xBoXUnWvQ/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcat3jxF8fXVe8M5pLvNzDKZIc4kJA/mo/photo.jpg?sz=128", "display_name": "banro", "link": "https://stackoverflow.com/users/10924587/banro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "accepted_answer_id": 54225061, "answer_count": 2, "score": 0, "last_activity_date": 1547671909, "creation_date": 1547671266, "last_edit_date": 1547671304, "question_id": 54225031, "link": "https://stackoverflow.com/questions/54225031/cant-multiply-sequence-by-non-int-of-type-floattried-and-tried", "title": "Can&#39;t multiply sequence by non-int of type &#39;float&#39;?Tried, and tried", "body": "<pre><code>def half_finished_diamond(height):\n    n = 1\n    for i in range(height):\n        spaces = height / 2 - n\n        blank = \" \"\n        print(blank*spaces + '/' * n + '\\\\' * n + \"\\n\")\n        n += 1\n\n\nhalf_finished_diamond(8)\n</code></pre>\n\n<p>Wanting to get the upper part of diamond shape</p>\n"}, {"tags": ["python", "parallel-processing", "multiprocessing", "python-multiprocessing"], "comments": [{"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1547674613, "post_id": 54224989, "comment_id": 95277393, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/50461141/terminate-all-processes-when-condition-is-met\">Terminate all processes when condition is met</a>"}, {"owner": {"reputation": 23, "user_id": 10924549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f420ecd1bf9f116b4dc6b30c5600cf53?s=128&d=identicon&r=PG&f=1", "display_name": "James Doer", "link": "https://stackoverflow.com/users/10924549/james-doer"}, "reply_to_user": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1547679125, "post_id": 54224989, "comment_id": 95279185, "body": "It&#39;s not a duplicate, because it still finishes executing code, for example Requests module still sends data"}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1547709545, "post_id": 54224989, "comment_id": 95286483, "body": "Feel free, not to agree that it truly is a duplicate, read <a href=\"https://stackoverflow.com/help/duplicates\">Why are some questions marked as duplicate?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "is_accepted": true, "score": 1, "last_activity_date": 1547691803, "last_edit_date": 1547691803, "creation_date": 1547686961, "answer_id": 54227607, "question_id": 54224989, "link": "https://stackoverflow.com/questions/54224989/killing-a-multiprocessing-process-when-condition-is-met/54227607#54227607", "title": "Killing a multiprocessing process when condition is met", "body": "<p>If you need instant kills, you can use a <code>multiprocessing.Event</code> to inform the parent-process about the condition met and let it kill the worker processes immediately. A manager-process would be too heavyweight for this little synchronization needed.</p>\n\n<pre><code>import os\nfrom datetime import datetime\nfrom multiprocessing import Process, Event\n\n\ndef worker(range_, target, found_event):\n    print('{} | pid: {} started'.format(datetime.now(), os.getpid()))\n    for x in range_:\n        if x == target:\n            print('{} | pid: {} found target'.format(\n                datetime.now(), os.getpid())\n            )\n            found_event.set()\n\n\nif __name__ == \"__main__\":\n\n    N_WORKERS = 4\n\n    step = int(200e6)\n    ranges = [range(x, x + step) # change `range` to `xrange` for Python 2\n              for x in range(0, N_WORKERS * step, step)]\n    # range(0, 200000000), ..., range(800000000, 1000000000)]\n    target = int(150e6)  # &lt;-- worker finding this value triggers massacre\n    found_event = Event()\n\n    pool = [Process(target=worker, args=(range_, target, found_event))\n            for range_ in ranges]\n\n    for p in pool:\n        p.start()\n\n    found_event.wait()  # &lt;- blocks until condition met\n    print('{} | terminating processes'.format(datetime.now()))\n    for p in pool:\n        p.terminate()\n    for p in pool:\n        p.join()\n    print('{} | all processes joined'.format(datetime.now()))\n</code></pre>\n\n<p>Example Output:</p>\n\n<pre><code>2019-01-17 01:55:33.781884 | pid: 28376 started\n2019-01-17 01:55:33.782333 | pid: 28377 started\n2019-01-17 01:55:33.782851 | pid: 28378 started\n2019-01-17 01:55:33.783484 | pid: 28379 started\n2019-01-17 01:55:54.715425 | pid: 28376 found target\n2019-01-17 01:55:54.715613 | terminating processes\n2019-01-17 01:55:54.716326 | all processes joined\n\nProcess finished with exit code 0\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10924549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f420ecd1bf9f116b4dc6b30c5600cf53?s=128&d=identicon&r=PG&f=1", "display_name": "James Doer", "link": "https://stackoverflow.com/users/10924549/james-doer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1293, "favorite_count": 0, "accepted_answer_id": 54227607, "answer_count": 1, "score": 2, "last_activity_date": 1551283637, "creation_date": 1547671041, "last_edit_date": 1551283637, "question_id": 54224989, "link": "https://stackoverflow.com/questions/54224989/killing-a-multiprocessing-process-when-condition-is-met", "title": "Killing a multiprocessing process when condition is met", "body": "<p>The idea im trying to run is this:</p>\n\n<p>RUN 3 Processes doing calculation\nONCE one of the 3 processes finishes the task\nKILL others imediatly and continue with the main task, i can't let it run any second longer</p>\n\n<p>The things i've tried was:\n Putting the global variable through multiprocessing.manager, but that still lets processes finish their loops.\n Raising an exception</p>\n\n<p>OS: Windows\nPYTHON: 2.7</p>\n\n<pre><code>def f(name):\n    Doing = True\n    try:\n        while Doing:\n            print 'DOING',name\n            somecodethatmarksDoingAsFalse()\n    except Exception as error:\n        print 'bye'\n        print error\n        Doing = False\n        return True\n\n\n\n\nif __name__ == '__main__':\n    p = multiprocessing.Process(target=f, args=('bob',))\n    p2 = multiprocessing.Process(target=f, args=('tom',))\n    p.start()\n    p2.start()\n\n    p.join()\n    p2.join()\n\n\n    raise Exception('I know Python!')\n    sys.exit()\n</code></pre>\n\n<p>I expect to be able to kill all processes when i mark doing as false, raise an exception or any way when calculation is done on ONE of the processes</p>\n\n<p><strong>EDIT</strong>: It's not a duplicate, because it still finishes executing code, for example Requests module still sends data</p>\n"}, {"tags": ["python", "matlab", "numpy"], "comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 0, "creation_date": 1547671527, "post_id": 54224976, "comment_id": 95276003, "body": "I looked at your code earlier in an earlier version, and I didn&#39;t see how it could be refactored (in particular, vectorized). Have you considered using a dedicated differential equation (ODE) solver from <a href=\"https://docs.scipy.org/doc/scipy/reference/integrate.html#solving-initial-value-problems-for-ode-systems\" rel=\"nofollow noreferrer\"><code>scipy.integrate</code></a>?"}, {"owner": {"reputation": 3898, "user_id": 6221024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JHtD0ON5o_w/AAAAAAAAAAI/AAAAAAAAABw/1B5Y7p2C-g4/photo.jpg?sz=128", "display_name": "Dillon Davis", "link": "https://stackoverflow.com/users/6221024/dillon-davis"}, "edited": false, "score": 0, "creation_date": 1547671805, "post_id": 54224976, "comment_id": 95276134, "body": "This question would probably be better suited for the <a href=\"https://codereview.stackexchange.com/\">codereview stackexchange</a>."}, {"owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "edited": false, "score": 1, "creation_date": 1547671876, "post_id": 54224976, "comment_id": 95276169, "body": "You might look into <code>numba</code>."}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "reply_to_user": {"reputation": 3898, "user_id": 6221024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JHtD0ON5o_w/AAAAAAAAAAI/AAAAAAAAABw/1B5Y7p2C-g4/photo.jpg?sz=128", "display_name": "Dillon Davis", "link": "https://stackoverflow.com/users/6221024/dillon-davis"}, "edited": false, "score": 1, "creation_date": 1547672145, "post_id": 54224976, "comment_id": 95276279, "body": "@DillonDavis some context is missing but it&#39;s not complete code. You have more rep than me on CR but anyway: <a href=\"https://codereview.meta.stackexchange.com/questions/5777/a-guide-to-code-review-for-stack-overflow-users\">CR asks that we don&#39;t habitually send questions there from SO</a>. Performance optimization questions are still on topic here."}, {"owner": {"reputation": 3898, "user_id": 6221024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JHtD0ON5o_w/AAAAAAAAAAI/AAAAAAAAABw/1B5Y7p2C-g4/photo.jpg?sz=128", "display_name": "Dillon Davis", "link": "https://stackoverflow.com/users/6221024/dillon-davis"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 1, "creation_date": 1547672418, "post_id": 54224976, "comment_id": 95276397, "body": "I&#39;m new to CR myself. After reading that link, I agree with you @AndrasDeak."}, {"owner": {"reputation": 59, "user_id": 9216647, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215033441444440/picture?type=large", "display_name": "Martin Skovmand", "link": "https://stackoverflow.com/users/9216647/martin-skovmand"}, "reply_to_user": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 1, "creation_date": 1547672794, "post_id": 54224976, "comment_id": 95276558, "body": "@AndrasDeak, I have attempted to use scipy.signal.lsim, however, this appears to be more robust for my usage, and In most situations still faster."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1547674062, "post_id": 54224976, "comment_id": 95277159, "body": "Sometime ago I answered a MATLAB vs numpy performance question on CR: <a href=\"https://codereview.stackexchange.com/q/17702/27783\">codereview.stackexchange.com/q/17702/27783</a>.  But numpy performance questions are routinely answered on SO."}, {"owner": {"reputation": 59, "user_id": 9216647, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215033441444440/picture?type=large", "display_name": "Martin Skovmand", "link": "https://stackoverflow.com/users/9216647/martin-skovmand"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1547675360, "post_id": 54224976, "comment_id": 95277713, "body": "@hpaulj I did actually find that during my first search, however, there is not much to be done in the terms of vectorizing and cleaning up. However, using the Numba package as suggested by PMende, seems to yield good results."}], "answers": [{"comments": [{"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 1, "creation_date": 1547672775, "post_id": 54225363, "comment_id": 95276547, "body": "Note that fortran order should only be a matter of convenience, one can just permute the arrays and have &quot;fast&quot; axes last in the python version. And <code>numba</code> is probably pretty close in performance to what MATLAB&#39;s JIT compiler does."}, {"owner": {"reputation": 59, "user_id": 9216647, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215033441444440/picture?type=large", "display_name": "Martin Skovmand", "link": "https://stackoverflow.com/users/9216647/martin-skovmand"}, "edited": false, "score": 0, "creation_date": 1547675216, "post_id": 54225363, "comment_id": 95277656, "body": "I&#39;ve installed Numba, and that seems to do nicely. Thanks a lot, I will get right on to implement it in my code!"}], "tags": [], "owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "is_accepted": false, "score": 2, "last_activity_date": 1547672715, "creation_date": 1547672715, "answer_id": 54225363, "question_id": 54224976, "link": "https://stackoverflow.com/questions/54224976/how-to-increase-performance-of-for-loop-in-python/54225363#54225363", "title": "How to increase performance of for loop in python", "body": "<p>I suggested using <code>numba</code> in the comments. Here is an example:</p>\n\n<pre><code>import numba\nimport numpy as np\n\ndef py_func(dt, F, P1):\n    f = np.random.randn(1, int(60 / dt))\n    ns = f.size\n    yo = np.zeros((3))\n    y1 = np.zeros((3, ns), order='F')\n    for i in range(ns-1):\n        y1[:, i] = np.dot(P1, f[:, i]) + np.reshape(np.dot(F, yo), (3))\n        yo = y1[: , i]\n    return yo\n\n@numba.jit(nopython=True)\ndef numba_func(dt, F, P1):\n    f = np.random.randn(1, int(60 / dt))\n    ns = f.size\n    yo = np.zeros((3))\n    y1 = np.zeros((3, ns))\n    for i in range(ns-1):\n        y1[:, i] = np.dot(P1, f[:, i]) + np.reshape(np.dot(F, yo), (3))\n        yo = y1[: , i]\n    return yo\n</code></pre>\n\n<p>You can't use 'F' order with <code>numba</code> since it uses C-type arrays, not FORTRAN arrays.</p>\n\n<p>The timing differences are shown below:</p>\n\n<p>Pure python loop:</p>\n\n<pre><code>%%timeit\npy_func(dt, F, P1)\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>2.88 s \u00b1 100 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n</code></pre>\n\n<p>Numba:</p>\n\n<pre><code>%%timeit\nnumba_func(dt, F, P1)\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>588 ms \u00b1 10.3 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 9216647, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215033441444440/picture?type=large", "display_name": "Martin Skovmand", "link": "https://stackoverflow.com/users/9216647/martin-skovmand"}, "edited": false, "score": 0, "creation_date": 1547678610, "post_id": 54225890, "comment_id": 95279018, "body": "This is actually really good. I tried implementing this with Numba, to achieve even faster computation times, but I dont think the &quot;@&quot; operater, or maybe the np.outer() function is available, I end up with errors.  So for now I&#39;m sticking with the Numba solution."}, {"owner": {"reputation": 59, "user_id": 9216647, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215033441444440/picture?type=large", "display_name": "Martin Skovmand", "link": "https://stackoverflow.com/users/9216647/martin-skovmand"}, "edited": false, "score": 0, "creation_date": 1548334977, "post_id": 54225890, "comment_id": 95509908, "body": "I would like to revoke my answer, saying that this was the most stable solution, after more than just the initial testing. Sometimes Numba achieved exceptional times, other times, it didn&#39;t.   This is very consistent in the timing. So ended up being my preferable choice."}], "tags": [], "owner": {"reputation": 142, "user_id": 10923857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c34d0bbd201d9b8aa373fb7209aa646?s=128&d=identicon&r=PG&f=1", "display_name": "Jonas B.", "link": "https://stackoverflow.com/users/10923857/jonas-b"}, "is_accepted": true, "score": 1, "last_activity_date": 1547675648, "last_edit_date": 1547675648, "creation_date": 1547675256, "answer_id": 54225890, "question_id": 54224976, "link": "https://stackoverflow.com/questions/54224976/how-to-increase-performance-of-for-loop-in-python/54225890#54225890", "title": "How to increase performance of for loop in python", "body": "<p>I optimized your code a bit, the execution time for me went from 2.8s down to around 1.2s. Before you look for faster interpreters I recommend you do profiling (see line_profiler) and try to remove everything you can out of the innermost loop. Better, try to avoid any explicit 'for' loops and rely on numpy functions such as dot, einsum, etc.</p>\n\n<p>I guess there is still some place for optimization. I don't think I changed your values but better check. With other tools like numba or cython (<a href=\"http://cython.org\" rel=\"nofollow noreferrer\">cython.org</a>) or pypy (<a href=\"http://pypy.org\" rel=\"nofollow noreferrer\">pypy.org</a>) I guess your execution time will improve quite a lot more.</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport numpy as np\nimport time\n\nnp.random.seed(0)\n\n#@profile\ndef run():\n    dt = 0.0001\n    f = np.random.randn(1, int(60 / dt))\n    ns = np.size(f)\n    yo = np.zeros((3))\n    F = np.array([[1, 0.0001, 0], [0.001, 1, 0.0001], [0.001, 0, 1]])\n    P1 = np.transpose(np.array([[0, 0.0001, 0]]))\n    start_time = time.time()\n    y1 = np.outer(f, P1)\n    for i in range(ns-1):\n        y1[i] += F@yo\n        yo = y1[i]\n    print(\"--- %s seconds ---\" % (time.time() - start_time))\n    y1 = y1.T\n    print(yo)\n\nrun()\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9216647, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215033441444440/picture?type=large", "display_name": "Martin Skovmand", "link": "https://stackoverflow.com/users/9216647/martin-skovmand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 541, "favorite_count": 0, "accepted_answer_id": 54225890, "answer_count": 2, "score": 1, "last_activity_date": 1547675648, "creation_date": 1547671002, "last_edit_date": 1547673607, "question_id": 54224976, "link": "https://stackoverflow.com/questions/54224976/how-to-increase-performance-of-for-loop-in-python", "title": "How to increase performance of for loop in python", "body": "<p>I'm doing a lot of simulations with python, simulating system responses.</p>\n\n<p>I've currently been using a Runge-Kutta scheme, but have stumbled upon another scheme I've been testing.</p>\n\n<p>When testing this in Matlab I achieve exceptional performance, compared to that of my Runge-Kutta. However, when I transferred this to Python, it was significantly slower.</p>\n\n<p>I'm not sure if this is just how it is, or if I could improve my way of coding, so I would love to hear some of your input, if possible.</p>\n\n<p>The code in Matlab, exemplified:</p>\n\n<pre><code>dt = 0.0001;\nf = randn(1, (60 / dt));\nns = length(f);\nyo = zeros(3,1);\nP1 = [0; 0.001; 0];\nF = [1 0.0001 0; 0.001 1 0.0001; 0.001 0 1];\ny1 = zeros(3, ns);\ntic\nfor i = 1:ns\n    y1(:, i) = P1*f(:, i) + F*yo;\n    yo = y1(:, i);\nend\ntoc\n</code></pre>\n\n<p>In which the loop executes in 0.55-0.61 sec.</p>\n\n<p>The code in Python, exemplified:</p>\n\n<pre><code>dt = 0.0001\nf = np.random.randn(1, int(60 / dt))\nns = np.size(f)\nyo = np.zeros((3))\nF = np.array([[1, 0.0001, 0], [0.001, 1, 0.0001], [0.001, 0, 1]])\nP1 = np.transpose(np.array([[0, 0.0001, 0]]))\ny1 = np.zeros((3, ns), order='F')\nstart_time = time.time()\nfor i in range(ns-1):\n    y1[:, i] = np.dot(P1, f[:, i]) + np.reshape(np.dot(F, yo), (3))\n    yo = y1[: , i]\nprint(\"--- %s seconds ---\" % (time.time() - start_time))\n</code></pre>\n\n<p>In which the loop executes in 2.8 -3.1 sec.</p>\n\n<p>Can I do something to improve this?</p>\n\n<p>Thanks for considering my question.</p>\n"}, {"tags": ["python", "jupyter-notebook", "jupyter", "dllimport"], "comments": [{"owner": {"reputation": 10425, "user_id": 2142055, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Stop harming Monica", "link": "https://stackoverflow.com/users/2142055/stop-harming-monica"}, "edited": false, "score": 0, "creation_date": 1547840316, "post_id": 54224969, "comment_id": 95344937, "body": "That&#39;s python unable to <code>import sqlite3</code>. Can you do that in an interactive interpreter?"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 10872936, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ij_-5VoTqf8/AAAAAAAAAAI/AAAAAAAACeY/bDEmwgsgLcI/photo.jpg?sz=128", "display_name": "Benedek D&#233;r", "link": "https://stackoverflow.com/users/10872936/benedek-d%c3%a9r"}, "edited": false, "score": 0, "creation_date": 1547838047, "post_id": 54225033, "comment_id": 95344040, "body": "Thanks, it partially solved my problem, I&#39;ve edited my question with the now error..."}, {"owner": {"reputation": 33207, "user_id": 1399491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a1cb3dec3a6f3411ce3460276e44b292?s=128&d=identicon&r=PG", "display_name": "Alex W", "link": "https://stackoverflow.com/users/1399491/alex-w"}, "reply_to_user": {"reputation": 41, "user_id": 10872936, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ij_-5VoTqf8/AAAAAAAAAAI/AAAAAAAACeY/bDEmwgsgLcI/photo.jpg?sz=128", "display_name": "Benedek D&#233;r", "link": "https://stackoverflow.com/users/10872936/benedek-d%c3%a9r"}, "edited": false, "score": 0, "creation_date": 1547839596, "post_id": 54225033, "comment_id": 95344643, "body": "@BenedekD&#233;r Try running <code>pip install pysqlite2</code> to see if it resolves that error"}, {"owner": {"reputation": 164, "user_id": 6793507, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BTZqX.png?s=128&g=1", "display_name": "SomJura", "link": "https://stackoverflow.com/users/6793507/somjura"}, "edited": false, "score": 0, "creation_date": 1610622949, "post_id": 54225033, "comment_id": 116193432, "body": "This resolves an issue which appears in various different forms, related to zmq, pywin32, Pycharm and Anaconda (64-bit). In my case, when I was starting Jupyter from the Anaconda <code>base</code> environment everything worked normally. With other environments I would get an error, even if <code>jupyter notebook</code> was invoked from Anaconda Prompt, independent of Pycharm. Setting up a clean environment only, didn&#39;t help. What did help was setting up a clean environment and then running the uninstall/install of pyzmq <i>with pip</i>, from the terminal, within the activated environment."}], "tags": [], "owner": {"reputation": 33207, "user_id": 1399491, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a1cb3dec3a6f3411ce3460276e44b292?s=128&d=identicon&r=PG", "display_name": "Alex W", "link": "https://stackoverflow.com/users/1399491/alex-w"}, "is_accepted": false, "score": 8, "last_activity_date": 1547671274, "creation_date": 1547671274, "answer_id": 54225033, "question_id": 54224969, "link": "https://stackoverflow.com/questions/54224969/import-error-while-trying-to-run-jupyter-notebook/54225033#54225033", "title": "Import error while trying to run jupyter notebook", "body": "<p>I found a <a href=\"https://github.com/jupyter/notebook/issues/3435\" rel=\"noreferrer\">similar issue</a> open on GitHub for zmq. The recommendation by GitHub user <a href=\"https://github.com/harsh23tyagi\" rel=\"noreferrer\">harsh23tyagi</a> that seems to work for most is to run the following:</p>\n\n<pre><code>pip uninstall pyzmq\npip install pyzmq\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 5786763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f209b051708af265053c3ada3c1d300d?s=128&d=identicon&r=PG&f=1", "display_name": "Liam S.", "link": "https://stackoverflow.com/users/5786763/liam-s"}, "is_accepted": false, "score": 3, "last_activity_date": 1611354591, "creation_date": 1611354591, "answer_id": 65853590, "question_id": 54224969, "link": "https://stackoverflow.com/questions/54224969/import-error-while-trying-to-run-jupyter-notebook/65853590#65853590", "title": "Import error while trying to run jupyter notebook", "body": "<p>Working with conda env, <code>jupyter notebook</code> worked in (base) env but gave the .libzmq error in (my_env).\nTo be able to run notebooks from my_env, this worked for me :</p>\n<ul>\n<li><code>pip uninstall pyzmq</code></li>\n<li><code>pip install pyzmq==20</code> (no version for pyzmq didn't fix the issue for me)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12728271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e9fd8e67d80c777103b430c02cc675?s=128&d=identicon&r=PG&f=1", "display_name": "Hardleigh_Hewmann", "link": "https://stackoverflow.com/users/12728271/hardleigh-hewmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1615353913, "creation_date": 1615353913, "answer_id": 66558859, "question_id": 54224969, "link": "https://stackoverflow.com/questions/54224969/import-error-while-trying-to-run-jupyter-notebook/66558859#66558859", "title": "Import error while trying to run jupyter notebook", "body": "<p>It seems that updating pyzmq to the latest version fixes this problem for me.</p>\n<pre><code>conda install pyzmq=22\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10872936, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ij_-5VoTqf8/AAAAAAAAAAI/AAAAAAAACeY/bDEmwgsgLcI/photo.jpg?sz=128", "display_name": "Benedek D&#233;r", "link": "https://stackoverflow.com/users/10872936/benedek-d%c3%a9r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5292, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1616310331, "creation_date": 1547670947, "last_edit_date": 1547842296, "question_id": 54224969, "link": "https://stackoverflow.com/questions/54224969/import-error-while-trying-to-run-jupyter-notebook", "title": "Import error while trying to run jupyter notebook", "body": "<p>An import error occurs when trying to run <code>jupyter</code> notebook</p>\n\n<p>I'm trying to run <code>jupyter</code> notebook using <code>anaconda</code> (<code>git bash</code> platform), and as I type in <code>jupyter</code> notebook, an import error occurs every time. I tried to lauch it inside an environment, but the same error occured.</p>\n\n<pre><code>$ jupyter notebook\n</code></pre>\n\n<p>Traceback (most recent call last):</p>\n\n<pre><code>File \"C:\\Users\\User\\Anaconda3\\Scripts\\jupyter-notebook-script.py\", line 6, in\n &lt;module&gt;\nfrom notebook.notebookapp import main\nFile \"C:\\Users\\User\\Anaconda3\\lib\\site-packages\\notebook\\notebookapp.py\", line 47, in &lt;module&gt;\nfrom zmq.eventloop import ioloop\nFile \"C:\\Users\\User\\Anaconda3\\lib\\site-packages\\zmq\\__init__.py\", line 47, in &lt;module&gt;\nfrom zmq import backend\nFile \"C:\\Users\\User\\Anaconda3\\lib\\site-packages\\zmq\\backend\\__init__.py\", line 40, in &lt;module&gt;\nreraise(*exc_info)\nFile \"C:\\Users\\User\\Anaconda3\\lib\\site-packages\\zmq\\utils\\sixcerpt.py\", line 34, in reraise\nraise value\nFile \"C:\\Users\\User\\Anaconda3\\lib\\site-packages\\zmq\\backend\\__init__.py\", line 27, in &lt;module&gt;\n_ns = select_backend(first)\nFile \"C:\\Users\\User\\Anaconda3\\lib\\site-packages\\zmq\\backend\\select.py\", line 27, in select_backend\nmod = __import__(name, fromlist=public_api)\nFile \"C:\\Users\\User\\Anaconda3\\lib\\site-packages\\zmq\\backend\\cython\\__init__.py\", line 6, in &lt;module&gt;\nfrom . import (constants, error, message, context,\n    ImportError: DLL load failed: The specified module could not be found.\n</code></pre>\n\n<p><strong><em>EDITED</em></strong>\nAfter reinstalling pyzmq (and I tried reinstalling conda too), the following error occurs:</p>\n\n<pre><code>$ jupyter notebook\n</code></pre>\n\n<blockquote>\n  <p>Traceback (most recent call last):    File\n  \"C:\\Users\\User\\Anaconda3\\lib\\site-packages\\notebook\\services\\sessions\\sessionmanager.py\",\n  line 10, in  \n       import sqlite3</p>\n  \n  <p>File \"C:\\Users\\User\\Anaconda3\\lib\\sqlite3__init__.py\", line 23, in\n  \n       from sqlite3.dbapi2 import *</p>\n  \n  <p>File \"C:\\Users\\User\\Anaconda3\\lib\\sqlite3\\dbapi2.py\", line 27, in\n  </p>\n\n<pre><code>from _sqlite3 import *\n</code></pre>\n  \n  <p>ImportError: DLL load failed: The specified module could not be found.</p>\n  \n  <p>During handling of the above exception, another exception occurred:</p>\n  \n  <p>Traceback (most recent call last):   File\n  \"C:\\Users\\User\\Anaconda3\\Scripts\\jupyter-notebook-script.py\", line 6,\n  in </p>\n\n<pre><code>from notebook.notebookapp import main\n</code></pre>\n  \n  <p>File\n  \"C:\\Users\\User\\Anaconda3\\lib\\site-packages\\notebook\\notebookapp.py\",\n  line 86, in </p>\n\n<pre><code>from .services.sessions.sessionmanager import SessionManager\n</code></pre>\n  \n  <p>File\n  \"C:\\Users\\User\\Anaconda3\\lib\\site-packages\\notebook\\services\\sessions\\sessionmanager.py\",\n  line 13, in </p>\n\n<pre><code>from pysqlite2 import dbapi2 as sqlite3\n</code></pre>\n  \n  <p>ModuleNotFoundError: No module named 'pysqlite2'</p>\n</blockquote>\n"}, {"tags": ["python", "sql", "orm", "sqlalchemy"], "comments": [{"owner": {"reputation": 317, "user_id": 8400217, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60c9331c66bcbc2432fa978802aad965?s=128&d=identicon&r=PG&f=1", "display_name": "haag1", "link": "https://stackoverflow.com/users/8400217/haag1"}, "edited": false, "score": 1, "creation_date": 1547671190, "post_id": 54224886, "comment_id": 95275862, "body": "First of all, there is no need for the <code>parent_domain_id</code> in your <code>domains1</code> table assuming that this will house your main domains (ex./ A, B, C, etc...) and also assuming that for example &quot;B&quot; can&#39;t belong to &quot;A&quot;. From there, we haven&#39;t seen your query but you can always sort alphabetically, or use a <code>CASE</code> statement in your <code>ORDER BY</code> to get the desired sorting (or some variation of this depending on your DBMS)."}, {"owner": {"reputation": 2334, "user_id": 7948962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b64557f8a617effccaf4426f16e9035?s=128&d=identicon&r=PG&f=1", "display_name": "Jacob H", "link": "https://stackoverflow.com/users/7948962/jacob-h"}, "edited": false, "score": 0, "creation_date": 1547671382, "post_id": 54224886, "comment_id": 95275938, "body": "What is the query you are using to retrieve the &quot;sorted&quot; data? I assume this is an ORM? Can you update the post with the language/software you&#39;re using?"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 10766288, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Gj7W2Qm2zHY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hba1CC3FFLR0GdUzJQVKeTnrwyYw/mo/photo.jpg?sz=128", "display_name": "NoGapps", "link": "https://stackoverflow.com/users/10766288/nogapps"}, "edited": false, "score": 0, "creation_date": 1547761866, "post_id": 54225418, "comment_id": 95314114, "body": "Thank you very much Thorsten, I tried first one, it&#39;s almost perfect: A a1 a2 a3 b1 b2 b3 B c1 c2 c3 C. But I&#39;m looking for A a1 a2 a3 B b1 b2 b3 C c1 c2 c3."}, {"owner": {"reputation": 69149, "user_id": 2270762, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/52b46f7eff0a47c420a9a6f56a40fd0b?s=128&d=identicon&r=PG&f=1", "display_name": "Thorsten Kettner", "link": "https://stackoverflow.com/users/2270762/thorsten-kettner"}, "reply_to_user": {"reputation": 27, "user_id": 10766288, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Gj7W2Qm2zHY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hba1CC3FFLR0GdUzJQVKeTnrwyYw/mo/photo.jpg?sz=128", "display_name": "NoGapps", "link": "https://stackoverflow.com/users/10766288/nogapps"}, "edited": false, "score": 0, "creation_date": 1547763447, "post_id": 54225418, "comment_id": 95314642, "body": "Oh, I see, sorry. I&#39;ve added a type for sorting (&#39;domain&#39; comes before &#39;subdomain&#39; in the alphabet), so you always get the domain before its subdomains no matter what the name."}, {"owner": {"reputation": 27, "user_id": 10766288, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Gj7W2Qm2zHY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hba1CC3FFLR0GdUzJQVKeTnrwyYw/mo/photo.jpg?sz=128", "display_name": "NoGapps", "link": "https://stackoverflow.com/users/10766288/nogapps"}, "edited": false, "score": 0, "creation_date": 1547839321, "post_id": 54225418, "comment_id": 95344529, "body": "Thank you very much. It&#39;s works. Could you please add one more join to first query to get titles from third table?"}, {"owner": {"reputation": 69149, "user_id": 2270762, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/52b46f7eff0a47c420a9a6f56a40fd0b?s=128&d=identicon&r=PG&f=1", "display_name": "Thorsten Kettner", "link": "https://stackoverflow.com/users/2270762/thorsten-kettner"}, "reply_to_user": {"reputation": 27, "user_id": 10766288, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Gj7W2Qm2zHY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hba1CC3FFLR0GdUzJQVKeTnrwyYw/mo/photo.jpg?sz=128", "display_name": "NoGapps", "link": "https://stackoverflow.com/users/10766288/nogapps"}, "edited": false, "score": 0, "creation_date": 1547840076, "post_id": 54225418, "comment_id": 95344836, "body": "So far you have shown two source tables (domains1 and domains2; Im using domain and subdomain instead) and you want some title to appear in the result (in order to build a new table called titles from the query result). Where does the title come from?"}, {"owner": {"reputation": 27, "user_id": 10766288, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Gj7W2Qm2zHY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hba1CC3FFLR0GdUzJQVKeTnrwyYw/mo/photo.jpg?sz=128", "display_name": "NoGapps", "link": "https://stackoverflow.com/users/10766288/nogapps"}, "edited": false, "score": 0, "creation_date": 1547841783, "post_id": 54225418, "comment_id": 95345561, "body": "Please check it one more time. I have edited my original post."}, {"owner": {"reputation": 69149, "user_id": 2270762, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/52b46f7eff0a47c420a9a6f56a40fd0b?s=128&d=identicon&r=PG&f=1", "display_name": "Thorsten Kettner", "link": "https://stackoverflow.com/users/2270762/thorsten-kettner"}, "reply_to_user": {"reputation": 27, "user_id": 10766288, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Gj7W2Qm2zHY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hba1CC3FFLR0GdUzJQVKeTnrwyYw/mo/photo.jpg?sz=128", "display_name": "NoGapps", "link": "https://stackoverflow.com/users/10766288/nogapps"}, "edited": false, "score": 0, "creation_date": 1547843774, "post_id": 54225418, "comment_id": 95346327, "body": "Still there are two source tables without a title column and one target table with a title column. Where does it come from? What is it supposed to contain? Do you merely want to create an empty column?"}, {"owner": {"reputation": 27, "user_id": 10766288, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Gj7W2Qm2zHY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hba1CC3FFLR0GdUzJQVKeTnrwyYw/mo/photo.jpg?sz=128", "display_name": "NoGapps", "link": "https://stackoverflow.com/users/10766288/nogapps"}, "edited": false, "score": 0, "creation_date": 1547885069, "post_id": 54225418, "comment_id": 95354082, "body": "Imagine Titles as my log table. I  take all domains and subdomains check their titles, status etc. and fill the Titles table with this data. Then I need to retrieve this data in a form mentioned earlier (Domain &gt; Subdomains). Please check my first post again, I added some adjustments. Could you please add a third join to Titles table in your first query. Thank you so much for your help."}, {"owner": {"reputation": 69149, "user_id": 2270762, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/52b46f7eff0a47c420a9a6f56a40fd0b?s=128&d=identicon&r=PG&f=1", "display_name": "Thorsten Kettner", "link": "https://stackoverflow.com/users/2270762/thorsten-kettner"}, "reply_to_user": {"reputation": 27, "user_id": 10766288, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Gj7W2Qm2zHY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hba1CC3FFLR0GdUzJQVKeTnrwyYw/mo/photo.jpg?sz=128", "display_name": "NoGapps", "link": "https://stackoverflow.com/users/10766288/nogapps"}, "edited": false, "score": 0, "creation_date": 1547895562, "post_id": 54225418, "comment_id": 95356192, "body": "I think you should open a new request. You merely wanted to join two tables and get a special sort. This one I answered. Then you added a third table &quot;titles&quot; as a target table. And somehow you haven&#39;t been able to explain where its data stems from. Please look at your request. You say there are only two source tables, &quot;domains&quot; and &quot;subdomains&quot;. There is no third table. Table &quot;titles&quot; doesn&#39;t exist yet. You want to create this third table &quot;titles&quot; from the query result of the two source tables. But your target table magically contains more information than exists in the source tables."}], "tags": [], "owner": {"reputation": 69149, "user_id": 2270762, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/52b46f7eff0a47c420a9a6f56a40fd0b?s=128&d=identicon&r=PG&f=1", "display_name": "Thorsten Kettner", "link": "https://stackoverflow.com/users/2270762/thorsten-kettner"}, "is_accepted": true, "score": 0, "last_activity_date": 1547763345, "last_edit_date": 1547763345, "creation_date": 1547672985, "answer_id": 54225418, "question_id": 54224886, "link": "https://stackoverflow.com/questions/54224886/how-to-create-a-proper-database-structure-for-domains-and-subdomains/54225418#54225418", "title": "How to create a proper database structure for domains and subdomains?", "body": "<p>You are asking for a datamodel and a SQL query.</p>\n\n<p>You can use two tables:</p>\n\n<ul>\n<li>domain (domain_id, name)</li>\n<li>subdomain (subdomain_id, name, domain_id)</li>\n</ul>\n\n<p>with this query:</p>\n\n<pre><code>select name\nfrom\n(\n  select name, name as domain_name, 'domain' as type\n  from domain\n  union all\n  select sd.name, d.name as domain_name, 'subdomain' as type\n  from domain d\n  join subdomain sd on sd.domain_id = d.domain_id\n)\norder by domain_name, type, name;\n</code></pre>\n\n<p>Or just one table:</p>\n\n<ul>\n<li>domain (domain_id, name, parent_domain_id)</li>\n</ul>\n\n<p>with this query:</p>\n\n<pre><code>select name\nfrom\n(\n  select name, name as domain_name, 'domain' as type\n  from domain\n  where parent_domain_id is null\n  union all\n  select sd.name, d.name as domain_name, 'subdomain' as type\n  from domain d\n  join domain sd on sd.parent_domain_id = d.domain_id\n)\norder by domain_name, type, name;\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 10766288, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Gj7W2Qm2zHY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hba1CC3FFLR0GdUzJQVKeTnrwyYw/mo/photo.jpg?sz=128", "display_name": "NoGapps", "link": "https://stackoverflow.com/users/10766288/nogapps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 54225418, "answer_count": 1, "score": 0, "last_activity_date": 1548019772, "creation_date": 1547670559, "last_edit_date": 1548019772, "question_id": 54224886, "link": "https://stackoverflow.com/questions/54224886/how-to-create-a-proper-database-structure-for-domains-and-subdomains", "title": "How to create a proper database structure for domains and subdomains?", "body": "<p>I have a list of domains and list of subdomains. For example:</p>\n\n<p>domain A has subdomains a1, a2, a3.<br>\ndomain B has subdomain b1, b2, b3.<br>\ndomain C has no subdomains</p>\n\n<p>I need to create database structure so I can order it like so:</p>\n\n<p>A<br>\na1<br>\na2<br>\na3<br>\nB<br>\nb1<br>\nC  </p>\n\n<p>And I need to see clearly which one is domain or subdomain of what domain.</p>\n\n<p>I tried to put domains in one table and subdomains in other table with ForeignKey to domain. </p>\n\n<pre><code>class Domain(Base):\n    __tablename__ = \"domains\"\n    domain_id = Column(Integer(), primary_key=True)\n    name = Column(String(), unique=True)\n\n\nclass Subdomain(Base):\n    __tablename__ = \"subdomains\"\n    subdomain_id = Column(Integer(), primary_key=True)\n    name = Column(String(), unique=True)\n    domain_id = Column(Integer, ForeignKey('domains.domain_id'))\n</code></pre>\n\n<p>I'm using domains and subdomains from both of this table to crate third table:</p>\n\n<pre><code>class Title(Base):\n    __tablename__ = \"titles\"\n    title_id = Column(Integer(), primary_key=True)\n    domain_id = Column(Integer, ForeignKey('domains.domain_id'))\n    subdomain_id = Column(Integer, ForeignKey('subdomains.subdomain_id')) -- NULL if that is a Domain\n    title = Column(String())\n    status = Column(Integer())\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "event-handling", "picking", "scatter3d"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1547906778, "post_id": 54224866, "comment_id": 95358762, "body": "Divide your problem into smaller parts and try to isolate actual problems.  (I don&#39;t think this question has not received enough attention, but rather it&#39;s too complex to get an answer here.)"}, {"owner": {"reputation": 468, "user_id": 4035478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wlgQR.jpg?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/4035478/carl"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1547923138, "post_id": 54224866, "comment_id": 95363317, "body": "Thanks for your response.  I had considered this, but figured that (i) the problems are related: the selection of datapoints and manipulation in the eventhandler, (ii)  a complete answer to my question  could be helpful for others and would present a fairly complete, basic interactive 3d plot solution in matplotlib, and (iii) I have an inkling that the overall solution is relatively simple given the code provided, and that the three questions above might serve as similar examples in application, but I simply didn&#39;t quite get there, and my struggles will presumably be shared by others."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 1, "creation_date": 1547923999, "post_id": 54224866, "comment_id": 95363580, "body": "At which point are you struggling? Seems I missed that information in the question."}, {"owner": {"reputation": 468, "user_id": 4035478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wlgQR.jpg?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/4035478/carl"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1548000136, "post_id": 54224866, "comment_id": 95378369, "body": "(i) - (iv).  I can select points easily as the event handler does this via onpick(event).  But I cannot figure out how to actually do anything with these points: change their colours to reflect the fact that they have been selected, remove them by pressing a key (e.g. &#39;delete&#39;) and show that graphically.  I have attempted to change attributes using &#39;artist&#39; etc. but this hasn&#39;t worked for me."}], "answers": [{"comments": [{"owner": {"reputation": 468, "user_id": 4035478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wlgQR.jpg?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/4035478/carl"}, "edited": false, "score": 0, "creation_date": 1548555556, "post_id": 54329256, "comment_id": 95581861, "body": "Thanks Freya, this has been very helpful.  Did you look at using artists, blitting etc.?  I&#39;ve made good progress with your solution but am not quite there yet as the redrawing is very slow with many points.  I also want to add a transparent 3d plane of best fit, updated every time a point is deleted, ideally calculated using statsmodels."}, {"owner": {"reputation": 372, "user_id": 10944175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02e6348e5aa16cadefffee813526e185?s=128&d=identicon&r=PG&f=1", "display_name": "Freya W", "link": "https://stackoverflow.com/users/10944175/freya-w"}, "reply_to_user": {"reputation": 468, "user_id": 4035478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wlgQR.jpg?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/4035478/carl"}, "edited": false, "score": 0, "creation_date": 1548620151, "post_id": 54329256, "comment_id": 95596662, "body": "@Carl, I had a quick look at using blitting because before I removed the subplot before redrawing it was already slow with 4 data points. But it got faster with removing the subplot before readding another one, so I didn\u2019t bother. But yeah, with lots of data points it might be worth implementing blitting."}], "tags": [], "owner": {"reputation": 372, "user_id": 10944175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02e6348e5aa16cadefffee813526e185?s=128&d=identicon&r=PG&f=1", "display_name": "Freya W", "link": "https://stackoverflow.com/users/10944175/freya-w"}, "is_accepted": true, "score": 1, "last_activity_date": 1548408899, "last_edit_date": 1548408899, "creation_date": 1548253029, "answer_id": 54329256, "question_id": 54224866, "link": "https://stackoverflow.com/questions/54224866/change-colour-of-data-points-on-selection-and-remove-them-with-key-press-in-matp/54329256#54329256", "title": "Change colour of data points on selection and remove them with key press in matplotlib 3d scatter plot", "body": "<p>OK, I have got at least a partial solution for you, without the rectangle selection, but you can select multiple points and delete them with one key_event.</p>\n\n<p>To change the color, you need to change <code>graph._facecolor3d</code>, the hint was in <a href=\"https://github.com/matplotlib/matplotlib/issues/13035\" rel=\"nofollow noreferrer\">this</a> bug report about <code>set_facecolor</code> not setting <code>_facecolor3d</code>.</p>\n\n<p>It might also be a good idea to rewrite your function as a class to get rid of any needed <code>global</code> variables.</p>\n\n<p><s>My solution has parts that are not exactly pretty, I need to redraw the figure after removing data points, I couldn't get removing and updating to work.\nAlso </s>(see EDIT 2 below).\nI have not yet implemented what happens if the last data point is removed.</p>\n\n<p>The reason why your function <code>on_key(event)</code> didn't work was easy: you forgot to connect it.</p>\n\n<p>So this is a solution that should satisfy objectives (i) and (ii):</p>\n\n<pre><code>import matplotlib.pyplot as plt, numpy as np\nfrom mpl_toolkits.mplot3d import proj3d\n\nclass Class3DDataVisualizer:    \n    def __init__(self, X, ids, subindus, drawNew = True):\n\n        self.X = X;\n        self.ids = ids\n        self.subindus = subindus\n\n        self.disconnect = False\n        self.ind = []\n        self.label = None\n\n        if drawNew:        \n            self.fig = plt.figure(figsize = (7,5))\n        else:\n            self.fig.delaxes(self.ax)\n        self.ax = self.fig.add_subplot(111, projection = '3d')\n        self.graph  = self.ax.scatter(self.X[:, 0], self.X[:, 1], self.X[:, 2], depthshade = False, picker = True, facecolors=np.repeat([[0,0,1,1]],X.shape[0], axis=0) )         \n        if drawNew and not self.disconnect:\n            self.fig.canvas.mpl_connect('motion_notify_event', lambda event: self.onMouseMotion(event))  # on mouse motion    \n            self.fig.canvas.mpl_connect('pick_event', lambda event: self.onpick(event))\n            self.fig.canvas.mpl_connect('key_press_event', lambda event: self.on_key(event))\n\n        self.fig.tight_layout()\n        self.fig.show()\n\n\n    def distance(self, point, event):\n        \"\"\"Return distance between mouse position and given data point\n\n        Args:\n            point (np.array): np.array of shape (3,), with x,y,z in data coords\n            event (MouseEvent): mouse event (which contains mouse position in .x and .xdata)\n        Returns:\n            distance (np.float64): distance (in screen coords) between mouse pos and data point\n        \"\"\"\n        assert point.shape == (3,), \"distance: point.shape is wrong: %s, must be (3,)\" % point.shape\n\n        # Project 3d data space to 2d data space\n        x2, y2, _ = proj3d.proj_transform(point[0], point[1], point[2], plt.gca().get_proj())\n        # Convert 2d data space to 2d screen space\n        x3, y3 = self.ax.transData.transform((x2, y2))\n\n        return np.sqrt ((x3 - event.x)**2 + (y3 - event.y)**2)\n\n\n    def calcClosestDatapoint(self, event):\n        \"\"\"\"Calculate which data point is closest to the mouse position.\n\n        Args:\n            X (np.array) - array of points, of shape (numPoints, 3)\n            event (MouseEvent) - mouse event (containing mouse position)\n        Returns:\n            smallestIndex (int) - the index (into the array of points X) of the element closest to the mouse position\n        \"\"\"\n        distances = [self.distance (self.X[i, 0:3], event) for i in range(self.X.shape[0])]\n        return np.argmin(distances)\n\n\n    def annotatePlot(self, index):\n        \"\"\"Create popover label in 3d chart\n\n        Args:\n            X (np.array) - array of points, of shape (numPoints, 3)\n            index (int) - index (into points array X) of item which should be printed\n        Returns:\n            None\n        \"\"\"\n        # If we have previously displayed another label, remove it first\n        if self.label is not None:\n            self.label.remove()\n        # Get data point from array of points X, at position index\n        x2, y2, _ = proj3d.proj_transform(self.X[index, 0], self.X[index, 1], self.X[index, 2], self.ax.get_proj())\n        self.label = plt.annotate( self.ids[index],\n            xy = (x2, y2), xytext = (-20, 20), textcoords = 'offset points', ha = 'right', va = 'bottom',\n            bbox = dict(boxstyle = 'round,pad=0.5', fc = 'yellow', alpha = 0.5),\n            arrowprops = dict(arrowstyle = '-&gt;', connectionstyle = 'arc3,rad=0'))\n        self.fig.canvas.draw()\n\n\n    def onMouseMotion(self, event):\n        \"\"\"Event that is triggered when mouse is moved. Shows text annotation over data point closest to mouse.\"\"\"\n        closestIndex = self.calcClosestDatapoint(event)\n        self.annotatePlot (closestIndex) \n\n\n    def on_key(self, event):\n        \"\"\"\n        Function to be bound to the key press event\n        If the key pressed is delete and there is a picked object,\n        remove that object from the canvas\n        \"\"\"\n        if event.key == u'delete':\n            if self.ind:\n                self.X = np.delete(self.X, self.ind, axis=0)\n                self.ids = np.delete(ids, self.ind, axis=0)\n                self.__init__(self.X, self.ids, self.subindus, False)\n            else:\n                print('nothing selected')\n\n    def onpick(self, event):\n        self.ind.append(event.ind)\n        self.graph._facecolor3d[event.ind] = [1,0,0,1]\n\n\n\n#Datapoints\nY = np.array([[ 4.82250000e+01,  1.20276889e-03,  9.14501289e-01], [ 6.17564688e+01,  5.95020883e-02, -1.56770827e+00], [ 4.55139000e+01,  9.13454423e-02, -8.12277299e+00], [3,  8, -8.12277299e+00]])\n#Annotations\nids = ['a', 'b', 'c', 'd']\n\nsubindustries =  'example'\n\nClass3DDataVisualizer(Y, ids, subindustries)\n</code></pre>\n\n<p>To implement your rectangular selection you would have to override what currently happens during dragging (rotating the 3D plot) or an easier solution would be to define your rectangle with two consecutive clicks.</p>\n\n<p>Then use the <code>proj3d.proj_transform</code> to find which data is inside that rectangle, find the index of said data and recolor it using the <code>self.graph._facecolor3d[idx]</code> function and fill <code>self.ind</code> with those indices, after which hitting delete will take care of deleting all data which is specified by <code>self.ind</code>.</p>\n\n<p><strong>EDIT:</strong> I added two lines in the <code>__init__</code> that remove the ax/subplot before adding a new one after data points are deleted. I noticed plot interactions were becoming slow after a few data points were removed as the figure was just plotting over each subplot.</p>\n\n<p><strong>EDIT 2:</strong> I found out how you can modify your data instead of redrawing the whole plot, as mention in <a href=\"https://stackoverflow.com/a/32146791/10944175\">this answer</a> you will have to modify <code>_offsets3d</code>, which weirdly return a tuple for <code>x</code> and <code>y</code>, but an array for <code>z</code>.</p>\n\n<p>You can modify it using</p>\n\n<pre><code>(x,y,z) = self.graph._offsets3d # or event.artist._offsets3d\nxNew = x[:int(idx)] + x[int(idx)+1:]\nyNew = y[:int(idx)] + y[int(idx)+1:]\nz = np.delete(z, int(idx))\nself.graph._offsets3d = (xNew,yNew,z) # or event.artist._offsets3d\n</code></pre>\n\n<p>But then you'll run into problem with deleting several data points in a loop because the indices that you stored before won't be applicable after the first loop, you'll have to update the <code>_facecolor3d</code>, the list of labels... so I chose to keep the answer as is, because just redrawing the plot with new data seems easier and cleaner than that.</p>\n"}], "owner": {"reputation": 468, "user_id": 4035478, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wlgQR.jpg?s=128&g=1", "display_name": "Carl", "link": "https://stackoverflow.com/users/4035478/carl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1299, "favorite_count": 0, "accepted_answer_id": 54329256, "answer_count": 1, "score": 2, "last_activity_date": 1548408899, "creation_date": 1547670446, "last_edit_date": 1547719811, "question_id": 54224866, "link": "https://stackoverflow.com/questions/54224866/change-colour-of-data-points-on-selection-and-remove-them-with-key-press-in-matp", "title": "Change colour of data points on selection and remove them with key press in matplotlib 3d scatter plot", "body": "<p>I have a 3d scatter plot in matplotlib, and have set up annotations, inspired by answers <a href=\"https://stackoverflow.com/questions/10374930/matplotlib-annotating-a-3d-scatter-plot\">here</a>, particularly that by <a href=\"https://stackoverflow.com/users/2983039/doncristobal\">Don Cristobal</a>.  </p>\n\n<p>I have some basic event-capturing code set up, but after several days of trying, I still have not managed to achieve my objectives.  These are:</p>\n\n<p>(i)  Change colour of a point (dot) when selected with left mouse button from blue to e.g. dark blue/green.</p>\n\n<p>(ii)  Remove any selected dot selected in (i) after pressing the 'delete' key, including any annotations</p>\n\n<p>(iii)  Select multiple points in (i) using a <a href=\"https://matplotlib.org/examples/widgets/rectangle_selector.html\" rel=\"nofollow noreferrer\">selection rectangle</a> and delete using 'delete' key </p>\n\n<p>I have tried many approaches, including animating the chart to update based on changes in data, manipulating artist parameters, changing data points via e.g.         <code>xs, ys, zs = graph._offsets3d</code> (which does not appear to be documented), but to no avail.  </p>\n\n<p>I have attempted, within the onpick(event) function, to:</p>\n\n<p>(i)  Interact with points via event.ind to change colour using event.artist.set_face_colour()</p>\n\n<p>(ii)  Remove points using both artist.remove() </p>\n\n<p>(iii)  Remove points using xs, ys, zs = graph._offsets3d , removing the relevant point by index (event.ind[0]) from xs, ys, and zs, and then resetting graph points via graph._offsets3d = xs_new, ys_new, zs_new</p>\n\n<p>(iv)  Redrawing the chart, or relevant sections of the chart only (blitting?)</p>\n\n<p>with no success!  </p>\n\n<p>My current code is roughly as below.  In fact, I have several hundred points, not the 3 in the simplified example below.  I would like the graph to update smoothly if possible, although just getting something usable would be great.  Most of the code  to do this should probably reside within 'onpick', as that is the function that deals with picking events (see <a href=\"https://matplotlib.org/users/event_handling.html\" rel=\"nofollow noreferrer\">event handler</a>).  I have retained some of my code attempts, commented out, which I hope may be of some use.  The 'forceUpdate' function is meant to update the graph object on an event trigger, but I am not convinced that it currently does anything.  function <code>on_key(event)</code> also does not currently seem to work: presumably there must be a setting in order to determine points to delete, e.g. all artists that have a facecolor that has been changed from the default (e.g. delete all points that have colour dark blue/green rather than light blue).</p>\n\n<p>Any help is much appreciated.</p>\n\n<p>The code (below) is called with: </p>\n\n<pre><code>visualize3DData (Y, ids, subindustry)\n</code></pre>\n\n<p>Some sample data points are below:</p>\n\n<pre><code>#Datapoints\nY = np.array([[ 4.82250000e+01,  1.20276889e-03,  9.14501289e-01], [ 6.17564688e+01,  5.95020883e-02, -1.56770827e+00], [ 4.55139000e+01,  9.13454423e-02, -8.12277299e+00]])\n\n#Annotations\nids = ['a', 'b', 'c']\n\nsubindustry =  'example'\n</code></pre>\n\n<p>My current code is here:</p>\n\n<pre><code>import matplotlib.pyplot as plt, numpy as np\nfrom mpl_toolkits.mplot3d import proj3d\n\ndef visualize3DData (X, ids, subindus):\n    \"\"\"Visualize data in 3d plot with popover next to mouse position.\n\n    Args:\n        X (np.array) - array of points, of shape (numPoints, 3)\n    Returns:\n        None\n    \"\"\"\n    fig = plt.figure(figsize = (16,10))\n    ax = fig.add_subplot(111, projection = '3d')\n    graph  = ax.scatter(X[:, 0], X[:, 1], X[:, 2], depthshade = False, picker = True)  \n\n    def distance(point, event):\n        \"\"\"Return distance between mouse position and given data point\n\n        Args:\n            point (np.array): np.array of shape (3,), with x,y,z in data coords\n            event (MouseEvent): mouse event (which contains mouse position in .x and .xdata)\n        Returns:\n            distance (np.float64): distance (in screen coords) between mouse pos and data point\n        \"\"\"\n        assert point.shape == (3,), \"distance: point.shape is wrong: %s, must be (3,)\" % point.shape\n\n        # Project 3d data space to 2d data space\n        x2, y2, _ = proj3d.proj_transform(point[0], point[1], point[2], plt.gca().get_proj())\n        # Convert 2d data space to 2d screen space\n        x3, y3 = ax.transData.transform((x2, y2))\n\n        return np.sqrt ((x3 - event.x)**2 + (y3 - event.y)**2)\n\n\n    def calcClosestDatapoint(X, event):\n        \"\"\"\"Calculate which data point is closest to the mouse position.\n\n        Args:\n            X (np.array) - array of points, of shape (numPoints, 3)\n            event (MouseEvent) - mouse event (containing mouse position)\n        Returns:\n            smallestIndex (int) - the index (into the array of points X) of the element closest to the mouse position\n        \"\"\"\n        distances = [distance (X[i, 0:3], event) for i in range(X.shape[0])]\n        return np.argmin(distances)\n\n\n    def annotatePlot(X, index, ids):\n        \"\"\"Create popover label in 3d chart\n\n        Args:\n            X (np.array) - array of points, of shape (numPoints, 3)\n            index (int) - index (into points array X) of item which should be printed\n        Returns:\n            None\n        \"\"\"\n        # If we have previously displayed another label, remove it first\n        if hasattr(annotatePlot, 'label'):\n            annotatePlot.label.remove()\n        # Get data point from array of points X, at position index\n        x2, y2, _ = proj3d.proj_transform(X[index, 0], X[index, 1], X[index, 2], ax.get_proj())\n        annotatePlot.label = plt.annotate( ids[index],\n            xy = (x2, y2), xytext = (-20, 20), textcoords = 'offset points', ha = 'right', va = 'bottom',\n            bbox = dict(boxstyle = 'round,pad=0.5', fc = 'yellow', alpha = 0.5),\n            arrowprops = dict(arrowstyle = '-&gt;', connectionstyle = 'arc3,rad=0'))\n        fig.canvas.draw()\n\n\n    def onMouseMotion(event):\n        \"\"\"Event that is triggered when mouse is moved. Shows text annotation over data point closest to mouse.\"\"\"\n        closestIndex = calcClosestDatapoint(X, event)\n        annotatePlot (X, closestIndex, ids) \n\n\n    def onclick(event):\n        print('%s click: button=%d, x=%d, y=%d, xdata=%f, ydata=%f' %\n              ('double' if event.dblclick else 'single', event.button,\n               event.x, event.y, event.xdata, event.ydata))\n\n    def on_key(event):\n        \"\"\"\n        Function to be bound to the key press event\n        If the key pressed is delete and there is a picked object,\n        remove that object from the canvas\n        \"\"\"\n        if event.key == u'delete':\n            ax = plt.gca()\n            if ax.picked_object:\n                ax.picked_object.remove()\n                ax.picked_object = None\n                ax.figure.canvas.draw()\n\n    def onpick(event):\n\n        xmouse, ymouse = event.mouseevent.xdata, event.mouseevent.ydata\n        artist = event.artist\n        # print(dir(event.mouseevent))\n        ind = event.ind\n        # print('Artist picked:', event.artist)\n        # # print('{} vertices picked'.format(len(ind)))\n        print('ind', ind)\n        # # print('Pick between vertices {} and {}'.format(min(ind), max(ind) + 1))\n        # print('x, y of mouse: {:.2f},{:.2f}'.format(xmouse, ymouse))\n        # # print('Data point:', x[ind[0]], y[ind[0]])\n        #\n        # # remove = [artist for artist in pickable_artists if     artist.contains(event)[0]]\n        # remove = [artist for artist in X if artist.contains(event)[0]]\n        #\n        # if not remove:\n        #     # add a pt\n        #     x, y = ax.transData.inverted().transform_point([event.x,     event.y])\n        #     pt, = ax.plot(x, y, 'o', picker=5)\n        #     pickable_artists.append(pt)\n        # else:\n        #     for artist in remove:\n        #         artist.remove()\n        # plt.draw()\n        # plt.draw_idle()\n\n        xs, ys, zs = graph._offsets3d\n        print(xs[ind[0]])\n        print(ys[ind[0]])\n        print(zs[ind[0]])\n        print(dir(artist))\n\n        # xs[ind[0]] = 0.5\n        # ys[ind[0]] = 0.5\n        # zs[ind[0]] = 0.5   \n        # graph._offsets3d = (xs, ys, zs)\n\n        # print(artist.get_facecolor())\n        # artist.set_facecolor('red')\n        graph._facecolors[ind, :] = (1, 0, 0, 1)\n\n        plt.draw()\n\n    def forceUpdate(event):\n        global graph\n        graph.changed()\n\n    fig.canvas.mpl_connect('motion_notify_event', onMouseMotion)  # on mouse motion    \n    fig.canvas.mpl_connect('button_press_event', onclick)\n    fig.canvas.mpl_connect('pick_event', onpick)\n    fig.canvas.mpl_connect('draw_event', forceUpdate)\n\n    plt.tight_layout()\n\n    plt.show()\n</code></pre>\n"}, {"tags": ["python", "statistics", "linear-regression", "statsmodels"], "comments": [{"owner": {"reputation": 18838, "user_id": 333700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13088a623822caf74e635a68a55eae?s=128&d=identicon&r=PG", "display_name": "Josef", "link": "https://stackoverflow.com/users/333700/josef"}, "edited": false, "score": 0, "creation_date": 1547675754, "post_id": 54224839, "comment_id": 95277879, "body": "It would be helpful to see the summary tables for both. I have no idea what JASP is doing. My guess would be that categorical variables are encoded differently by default. If that is the the case, then parameters will differ, but the predicted values and statistics like Rsquared should be the same."}, {"owner": {"reputation": 14582, "user_id": 871096, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/39b6e181c797ef3ab2119322f7cac20b?s=128&d=identicon&r=PG", "display_name": "Robert Dodier", "link": "https://stackoverflow.com/users/871096/robert-dodier"}, "edited": false, "score": 0, "creation_date": 1547683615, "post_id": 54224839, "comment_id": 95280432, "body": "I agree with the ideas from Josef. I think it would help if you show your JASP code too. Also, this problem is simple enough that you can construct an equivalent model and solve it more or less by hand using your tool of choice (Python, R, Excel, etc). Maybe simplify it even more by removing the categorical variables. Verify that you can get equivalent results for the simplest possible model and go from there."}, {"owner": {"reputation": 11, "user_id": 8781693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27536dfb6ae4e9949fb4386bf47c46c3?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Corchs", "link": "https://stackoverflow.com/users/8781693/felipe-corchs"}, "reply_to_user": {"reputation": 18838, "user_id": 333700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad13088a623822caf74e635a68a55eae?s=128&d=identicon&r=PG", "display_name": "Josef", "link": "https://stackoverflow.com/users/333700/josef"}, "edited": false, "score": 0, "creation_date": 1547719518, "post_id": 54224839, "comment_id": 95291585, "body": "@Josef and @RobertDodier Thanks! Indeed, when I remove the categorical specifier (C) (<code>outcome ~ predictor1 + predictor2 + predictor1*predictor2</code>) JASP and Python return identical results. And, yes, statistics like Rsqrd were the same. Can I consider the second model, without the categorical specifier (C), correct even though the variable is categorical? Wouldn&#39;t the first one be more correct? If so, why JASP don&#39;t take this into consideration? Thanks again! I can still upload print screens with outputs and JASP &quot;input options&quot; window if you think will help."}], "owner": {"reputation": 11, "user_id": 8781693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27536dfb6ae4e9949fb4386bf47c46c3?s=128&d=identicon&r=PG&f=1", "display_name": "Felipe Corchs", "link": "https://stackoverflow.com/users/8781693/felipe-corchs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1547670315, "creation_date": 1547670315, "question_id": 54224839, "link": "https://stackoverflow.com/questions/54224839/jasp-and-statsmodels-python-returning-different-results-for-multiple-linear-re", "title": "JASP and Statsmodels (Python) returning different results for multiple linear regression", "body": "<p>I'm running a multiple linear regression analysis in Python's statsmodels and in JASP. I'm using the same dataset and, as far as I can understand, I'm using the same model. I'm pretty sure I'm coding it right in Python (see below). I assume this might be related to some underlying difference between JASP and statsmodels, but not sure. Am I right?</p>\n\n<p>Any comment highly appreciated.</p>\n\n<p>Thanks!</p>\n\n<p>Code I'm using in python:</p>\n\n<pre><code>model = smf.ols('outcome ~ predictor1 + C(predictor2) + predictor1*C(predictor2)', data = dataset).fit()\nprint(model.summary())\n</code></pre>\n\n<p>(obs. predictor1 is continuous; predictor2 is categorical)</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1547670282, "post_id": 54224798, "comment_id": 95275457, "body": "There must only be one row returned by <code>csv_reader1</code>."}, {"owner": {"reputation": 727, "user_id": 4866865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7789b80c26c3bc3f9d69580734c220b?s=128&d=identicon&r=PG&f=1", "display_name": "Gamification", "link": "https://stackoverflow.com/users/4866865/gamification"}, "edited": false, "score": 3, "creation_date": 1547670326, "post_id": 54224798, "comment_id": 95275476, "body": "Please try to reduce your code to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "reply_to_user": {"reputation": 727, "user_id": 4866865, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7789b80c26c3bc3f9d69580734c220b?s=128&d=identicon&r=PG&f=1", "display_name": "Gamification", "link": "https://stackoverflow.com/users/4866865/gamification"}, "edited": false, "score": 1, "creation_date": 1547670398, "post_id": 54224798, "comment_id": 95275507, "body": "@Pelipap You can type <code>[mcve]</code> to generate a link for a related concept by the way: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10924515, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TrcX2w6cvRE/AAAAAAAAAAI/AAAAAAAACS8/TmBi2v0OiSg/photo.jpg?sz=128", "display_name": "Karrade", "link": "https://stackoverflow.com/users/10924515/karrade"}, "edited": false, "score": 0, "creation_date": 1547762553, "post_id": 54225334, "comment_id": 95314349, "body": "Ok so thank you that was correct as well as both files were using the name &quot;shapeid&quot; when i did your suggestion as well as changed the 2nd file to use &quot;shapeid2&quot; it works great! i truly appreciate your help!"}], "tags": [], "owner": {"reputation": 111, "user_id": 5436357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acb07f6595f9fff3a99738911b297087?s=128&d=identicon&r=PG&f=1", "display_name": "Vuk Vojta", "link": "https://stackoverflow.com/users/5436357/vuk-vojta"}, "is_accepted": true, "score": 0, "last_activity_date": 1547672549, "creation_date": 1547672549, "answer_id": 54225334, "question_id": 54224798, "link": "https://stackoverflow.com/questions/54224798/python-is-not-running-my-for-loop-more-than-once/54225334#54225334", "title": "Python is Not running my For Loop more than once", "body": "<p>You iterate both 'driver-attributes.csv' and 'nodesfake.csv'. What you probably want to do is for every row of 'driver-attributes.csv' to open 'nodesfake.csv' and iterate from beginning.\nMove <code>with open('nodesfake.csv', mode='r') as nodes_file</code> just before <code>csv_reader1 = csv.DictReader(nodes_file)</code> !</p>\n"}], "owner": {"reputation": 3, "user_id": 10924515, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TrcX2w6cvRE/AAAAAAAAAAI/AAAAAAAACS8/TmBi2v0OiSg/photo.jpg?sz=128", "display_name": "Karrade", "link": "https://stackoverflow.com/users/10924515/karrade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 54225334, "answer_count": 1, "score": 0, "last_activity_date": 1547760817, "creation_date": 1547670167, "last_edit_date": 1547760817, "question_id": 54224798, "link": "https://stackoverflow.com/questions/54224798/python-is-not-running-my-for-loop-more-than-once", "title": "Python is Not running my For Loop more than once", "body": "<p>So i have been searching this for a few days now as well as trying everything i can think of to iron this out.. </p>\n\n<p>I have added print statements in trying to figure out whats causing this error and it looks like my for statement wont run more than once I am not seeing the error though, i am hoping someone here can see something i cant.</p>\n\n<p>Here is the part that wont run more than once:</p>\n\n<pre><code>for row in csv_reader1:\n                print(\"Searching for City Coordinates In Other File\")\n                if f'{row[\"shapeid\"]}' == shapeidInt:\n                    print(\"Found City in Coordinates File\")\n                    if coordString == \"none\":\n                        print(\"First in City\")\n                        coordString = f'({row[\"ycoords\"]} {row[\"xcoords\"]}'\n                    else:\n                        print(\"Not First in City\")\n                        coordString += f', {row[\"ycoords\"]} {row[\"xcoords\"]}'\n\n                else:\n                    print(\"Shapeid is not shapeidInt\")\n</code></pre>\n\n<p>Here is the Full Code:</p>\n\n<pre><code>import csv\nimport os\n\nshapeidInt = \"0123456\"\nlabelString = \"none\"\ncoordString = \"none\"\n\nif os.path.exists(\"Output.txt\"):\n  os.remove(\"Output.txt\")\n\nwith open('nodesfake.csv', mode='r') as nodes_file, open('driver-attributes.csv', mode='r') as driver_attributes_file:\n    csv_reader = csv.DictReader(driver_attributes_file)\n    print(\"Starting\")\n    for row in csv_reader:\n        print(\"Searching for a City\")\n        shapeidInt = f'{row[\"shapeid\"]}'\n        labelString = f'{row[\"LABEL\"]}'\n        if shapeidInt == \"\":\n            print(\"Blank Found\")\n            continue\n        else:\n\n            print(\"Found and Loading a City\" + f'{row[\"shapeid\"]}')\n            csv_reader1 = csv.DictReader(nodes_file)\n            for row in csv_reader1:\n                print(\"Searching for City Coordinates In Other File\")\n                if f'{row[\"shapeid\"]}' == shapeidInt:\n                    print(\"Found City in Coordinates File\")\n                    if coordString == \"none\":\n                        print(\"First in City\")\n                        coordString = f'({row[\"ycoords\"]} {row[\"xcoords\"]}'\n                    else:\n                        print(\"Not First in City\")\n                        coordString += f', {row[\"ycoords\"]} {row[\"xcoords\"]}'\n\n                else:\n                    print(\"Shapeid is not shapeidInt\")\n\n            f = open(\"Output.txt\", \"a+\")\n            print(\"Appending File\")\n            f.write(f'SET @' + labelString + '= ST_GEOMFROMTEXT(\\r\\n')\n            f.write(\"  'POLYGON(\\r\\n\")\n            coordString += \")\\r\\n\"\n            f.write(coordString)\n            f.write(\"  )'\\r\\n\")\n            f.write(');\\r\\n')\n\n            f.close()\n\n\n\n    print(\"=======================Finished=======================\")\n    print(f'=====================Check Output=====================')\n</code></pre>\n\n<p>Example Output:</p>\n\n<pre><code>Starting\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City0\nSearching for City Coordinates In Other File\nShapeid is not shapeidInt\nSearching for City Coordinates In Other File\nFound City in Coordinates File\nFirst in City\nSearching for City Coordinates In Other File\nShapeid is not shapeidInt\nSearching for City Coordinates In Other File\nFound City in Coordinates File\nNot First in City\nSearching for City Coordinates In Other File\nShapeid is not shapeidInt\nSearching for City Coordinates In Other File\nFound City in Coordinates File\nNot First in City\nSearching for City Coordinates In Other File\nShapeid is not shapeidInt\nSearching for City Coordinates In Other File\nFound City in Coordinates File\nNot First in City\nSearching for City Coordinates In Other File\nShapeid is not shapeidInt\nSearching for City Coordinates In Other File\nFound City in Coordinates File\nNot First in City\nSearching for City Coordinates In Other File\nShapeid is not shapeidInt\nSearching for City Coordinates In Other File\nFound City in Coordinates File\nNot First in City\nSearching for City Coordinates In Other File\nShapeid is not shapeidInt\nSearching for City Coordinates In Other File\nFound City in Coordinates File\nNot First in City\nSearching for City Coordinates In Other File\nShapeid is not shapeidInt\nSearching for City Coordinates In Other File\nShapeid is not shapeidInt\nSearching for City Coordinates In Other File\nShapeid is not shapeidInt\nSearching for City Coordinates In Other File\nShapeid is not shapeidInt\nSearching for City Coordinates In Other File\nShapeid is not shapeidInt\nSearching for City Coordinates In Other File\nShapeid is not shapeidInt\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City1\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City1.1\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City1.2\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City1.3\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City1.4\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City1.5\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City2\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City2.0.ring1\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City3\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City4\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City5\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City6\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City7\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City8\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City9\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City10\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City11\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City12\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City13\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City14\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City15\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City16\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City17\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City18\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City19\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City20\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City21\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City22\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City23\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City24\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City24.1\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City24.2\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City25\nAppending File\nSearching for a City\nBlank Found\nSearching for a City\nFound and Loading a City26\nAppending File\n=======================Finished=======================\n=====================Check Output=====================\n\nProcess returned 0 (0x0)        execution time : 0.591 s\nPress any key to continue . . .\n</code></pre>\n\n<p><strong>EDIT::</strong>\nim sorry i hope this is what you meant by more complete and verifiable @Pelipap\nunfortunatly this is as minimal as i can come up with.</p>\n\n<p>I am trying to loop through driver-attributes.csv and get the shapeid + Label\nthen use that to search through nodesfake.csv for that specific shapeid and get all coordinates and print them into a file as such:</p>\n\n<pre><code>SET @Ash Township= ST_GEOMFROMTEXT(\n  'POLYGON(\n(42.03516778 -83.41969026, 42.03679795 -83.41973153, 42.04044454 -83.4198216, 42.04155794 -83.41981444, 42.0440793 -83.41985152, 42.0452773 -83.41985275, 42.0466032 -83.41988936)\n  )'\n);\n</code></pre>\n\n<p>Example of driver-attributes.csv:</p>\n\n<pre><code>shapeid,OBJECTID,FIPSCODE,FIPSNUM,NAME,LABEL,TYPE,SQKM,SQMILES,ACRES,VER,LAYOUT,PENINSULA,ShapeSTAre,ShapeSTLen\n,,,,,,,,,,,,,,\n0,961,3680,3680,Ash,Ash Township,Township,90.159,34.81,22278.523,17A,landscape,lower,163750009.8,52066.60235\n,,,,,,,,,,,,,,\n1,965,7720,7720,Berlin,Berlin Township,Township,84.898,32.779,20978.464,17A,landscape,lower,154060891.4,95099.85825\n,,,,,,,,,,,,,,\n1.1,965,7720,7720,Berlin,Berlin Township,Township,84.898,32.779,20978.464,17A,landscape,lower,154060891.4,95099.85825\n</code></pre>\n\n<p>Example od nodesfake.csv:</p>\n\n<pre><code>shapeid,xcoords,ycoords\n,,\n0,-83.41969026,42.03516778\n,,\n0,-83.41973153,42.03679795\n,,\n0,-83.4198216,42.04044454\n,,\n0,-83.41981444,42.04155794\n,,\n0,-83.41985152,42.0440793\n,,\n0,-83.41985275,42.0452773\n,,\n0,-83.41988936,42.0466032\n,,\n1,-83.23384725,41.99454614\n,,\n1,-83.23398864,41.99444096\n,,\n1,-83.24133912,41.97833409\n</code></pre>\n"}, {"tags": ["python", "unicode", "eval", "python-2.x", "literals"], "comments": [{"owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "reply_to_user": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 0, "creation_date": 1547866470, "post_id": 54224792, "comment_id": 95351435, "body": "@wim I submitted it, but the response was that it&#39;s not a bug if a function merely fails to do what we <i>think</i> the user <i>might</i> expect. Rather, a bug would be something that, for example, directly goes against the documentation. In this case the official doc for both <code>literal_eval</code> and <code>unicode_literals</code> seems too brief to generate specific expectations about this behavior.   So this would be a new feature (against policy for Python 2.7) and more importantly would potentially break backward compatibility."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "edited": false, "score": 0, "creation_date": 1547671725, "post_id": 54224986, "comment_id": 95276092, "body": "@jez: I happen to have already edited the code to work for <code>&#39;3&#39;</code> while you were writing that comment."}, {"owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "edited": false, "score": 0, "creation_date": 1547675298, "post_id": 54224986, "comment_id": 95277693, "body": "On wim&#39;s answer you wrote &quot;I&#39;m not quite sure whether it&#39;d be possible to write an input that&#39;s safe when parsed with unicode_literals off, but unsafe with unicode_literals on&quot;.   To the best of my understanding, your own solution should be immune to this (potential) problem, even if such an input were to exist\u2014is that correct?"}, {"owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "edited": false, "score": 0, "creation_date": 1547701571, "post_id": 54224986, "comment_id": 95283850, "body": "Ok then that\u2019s my reason for choosing this answer"}, {"owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "edited": false, "score": 0, "creation_date": 1548092319, "post_id": 54224986, "comment_id": 95410783, "body": "May be worth noting that <code>import __future__</code> and <code>| __future__.unicode_literals.compiler_flag</code> are redundant if <code>compile</code> is being called in the same file as the initial <code>from __future__ import unicode_literals</code> statement, because <code>compile</code> inherits its caller&#39;s flags by default."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1547671474, "last_edit_date": 1547671474, "creation_date": 1547671037, "answer_id": 54224986, "question_id": 54224792, "link": "https://stackoverflow.com/questions/54224792/how-can-a-representation-of-a-literal-be-safely-evaluated-assuming-unicode-lite/54224986#54224986", "title": "How can a representation of a literal be safely evaluated, assuming unicode_literals?", "body": "<p>Neither <code>ast.literal_eval</code> nor <code>ast.parse</code> offer the option to set compiler flags. You can pass the appropriate flags to <code>compile</code> to parse the string with <code>unicode_literals</code> activated, then run <code>ast.literal_eval</code> on the resulting node:</p>\n\n<pre><code>import ast\n\n# Not a future statement. This imports the __future__ module, and has no special\n# effects beyond that.\nimport __future__\n\nunparsed = '\"blah\"'\nparsed = compile(unparsed,\n                 '&lt;string&gt;',\n                 'eval',\n                 ast.PyCF_ONLY_AST | __future__.unicode_literals.compiler_flag)\nvalue = ast.literal_eval(parsed)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1547671307, "post_id": 54225009, "comment_id": 95275907, "body": "Isn&#39;t that as unsafe as using <code>eval()</code> by itself?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1547671440, "post_id": 54225009, "comment_id": 95275959, "body": "@alexis: Not quite, because <code>ast.literal_eval</code> will throw an exception on (most?) unsafe input before it reaches <code>eval</code>. I&#39;m not quite sure whether it&#39;d be possible to write an input that&#39;s safe when parsed with <code>unicode_literals</code> off, but unsafe with <code>unicode_literals</code> on, though."}, {"owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "reply_to_user": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1547671985, "post_id": 54225009, "comment_id": 95276221, "body": "@alexis no, it&#39;s not evaluating the output of the previous <code>literal_eval</code>. It&#39;s evaluating the input again.   This solution is sneaky and ingenious.  I&#39;m wondering if there&#39;s a valid unicode literal representation that will trip up <code>ast.literal_eval</code>  though...?"}], "tags": [], "owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "is_accepted": false, "score": 4, "last_activity_date": 1547671163, "creation_date": 1547671163, "answer_id": 54225009, "question_id": 54224792, "link": "https://stackoverflow.com/questions/54224792/how-can-a-representation-of-a-literal-be-safely-evaluated-assuming-unicode-lite/54225009#54225009", "title": "How can a representation of a literal be safely evaluated, assuming unicode_literals?", "body": "<p>An interesting question. I'm not sure if there is any solution for <code>ast.literal_eval</code>, here, but I offer a cheap/safe workaround:</p>\n\n<pre><code>def my_literal_eval(s):\n    ast.literal_eval(s)\n    return eval(s)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1547672886, "post_id": 54225161, "comment_id": 95276609, "body": "<a href=\"https://ideone.com/EQjyOq\" rel=\"nofollow noreferrer\">You don&#39;t need Name nodes to get arbitrary code execution.</a>"}, {"owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "edited": false, "score": 0, "creation_date": 1547673210, "post_id": 54225161, "comment_id": 95276756, "body": "Looks like <code>EnsureNoNames().visit()</code> is being used as a &quot;screening&quot; step to detect whether the subsequent <code>eval(raw)</code> will be safe.  Is there any advantage to using a screening function other than <code>ast.literal_eval()</code> itself (wim&#39;s solution)?      user2357112&#39;s ingenious counterexample <code>raw = &#39;&#39;&#39;().__class__.__base__.__subclasses__()[-1].format.__globa&zwnj;&#8203;ls__[&#39;__builtins__&#39;]&zwnj;&#8203;[&#39;eval&#39;](     &#39;__import__(&quot;os&quot;).system(&quot;echo Arbitrary code executed.&quot;)&#39;)&#39;&#39;&#39;</code> shows that this particular screening function has security holes."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1547673262, "post_id": 54225161, "comment_id": 95276791, "body": "@user2357112 Thanks. I&#39;ve updated my answer to account for the use of attributes then."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "edited": false, "score": 0, "creation_date": 1547673867, "post_id": 54225161, "comment_id": 95277072, "body": "@jez No there isn&#39;t any meaningful advantage to wim&#39;s answer that I can think of (other than a friendlier error message). This was just an attempt at an alternative solution for the sake of completeness."}, {"owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "edited": false, "score": 1, "creation_date": 1547673984, "post_id": 54225161, "comment_id": 95277129, "body": "@blhsing Thanks for clarifying.  This answer and user2357112&#39;s have together taught me a lot I didn&#39;t know about <code>ast</code>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1547702951, "post_id": 54225161, "comment_id": 95284188, "body": "While I can&#39;t currently think of any way to get arbitrary code execution with both Name and Attribute nodes forbidden, a blacklist approach is still inherently riskier than the whitelist approach taken by <code>ast.literal_eval</code>. A whitelist makes it a lot easier than a blacklist to go through every allowed operation and verify that it&#39;s safe, especially as the language evolves and new syntax is added. (Python 2 may not be evolving at this point, but any Python 2 code has to be written with Python 3 migration in mind.)"}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 1, "last_activity_date": 1547673234, "last_edit_date": 1547673234, "creation_date": 1547671798, "answer_id": 54225161, "question_id": 54224792, "link": "https://stackoverflow.com/questions/54224792/how-can-a-representation-of-a-literal-be-safely-evaluated-assuming-unicode-lite/54225161#54225161", "title": "How can a representation of a literal be safely evaluated, assuming unicode_literals?", "body": "<p>What makes codes potentially insecure are references to names and/or attributes. You can subclass <code>ast.NodeVisitor</code> to ensure that there are no such references in a given piece of code before you <code>eval</code> it:</p>\n\n<pre><code>import ast\nfrom textwrap import dedent\n\nclass Validate(ast.NodeVisitor):\n    def visit_Name(self, node):\n        raise ValueError(\"Reference to name '%s' found in expression\" % node.id)\n    def visit_Attribute(self, node):\n        raise ValueError(\"Reference to attribute '%s' found in expression\" % node.attr)\n\nValidate().visit(ast.parse(dedent(raw), '&lt;inline&gt;', 'eval'))\neval(raw)\n</code></pre>\n"}], "owner": {"reputation": 12642, "user_id": 3019689, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cc10b8b7be444698cc0737fb52d51ce7?s=128&d=identicon&r=PG&f=1", "display_name": "jez", "link": "https://stackoverflow.com/users/3019689/jez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 54224986, "answer_count": 3, "score": 3, "last_activity_date": 1548184724, "creation_date": 1547670154, "last_edit_date": 1548184724, "question_id": 54224792, "link": "https://stackoverflow.com/questions/54224792/how-can-a-representation-of-a-literal-be-safely-evaluated-assuming-unicode-lite", "title": "How can a representation of a literal be safely evaluated, assuming unicode_literals?", "body": "<p>In Python 2, I would like to evaluate a string that contains the representation of a literal.  I would like to do this safely, so I don't want to use <code>eval()</code>\u2014instead I've become accustomed to using <code>ast.literal_eval()</code> for this kind of task.</p>\n\n<p>However, I also want to evaluate under the assumption that string literals in plain quotes denote <code>unicode</code> objects\u2014i.e. the kind of forward-compatible behavior you get with <code>from __future__ import unicode_literals</code>.  In the example below, <code>eval()</code> seems to respect this preference, but <code>ast.literal_eval()</code> seems not to.</p>\n\n<pre><code>from __future__ import unicode_literals, print_function\n\nimport ast\n\nraw = r\"\"\"   'hello'    \"\"\"\n\nvalue = eval(raw.strip())\nprint(repr(value))\n# Prints:\n# u'hello'\n\nvalue = ast.literal_eval(raw.strip())\nprint(repr(value))\n# Prints:\n# 'hello'\n</code></pre>\n\n<p>Note that I'm looking for a general-purpose <code>literal_eval</code> replacement\u2014I don't know in advance that the output is necessarily a string object.  I want to be able to assume that <code>raw</code> is the representation of an arbitrary Python literal, which may be a string, or may contain one or more strings, or not.</p>\n\n<p>Is there a way of getting the best of both worlds:  a function that both securely evaluates representations of arbitrary Python literals <em>and</em> respects the <code>unicode_literals</code> preference?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1547671694, "post_id": 54224758, "comment_id": 95276077, "body": "Do you care about order being maintained in the final DataFrame?"}, {"owner": {"reputation": 531, "user_id": 7933418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec40b228d90adc86ec949347733d2e1?s=128&d=identicon&r=PG&f=1", "display_name": "iprof0214", "link": "https://stackoverflow.com/users/7933418/iprof0214"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 1, "creation_date": 1547671742, "post_id": 54224758, "comment_id": 95276107, "body": "@user3483203 - Nope, as long as I have all the data order doesn&#39;t matter"}], "answers": [{"tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 1, "last_activity_date": 1547671846, "creation_date": 1547671846, "answer_id": 54225173, "question_id": 54224758, "link": "https://stackoverflow.com/questions/54224758/select-all-duplicates-on-two-different-column-combinations-based-on-conditions/54225173#54225173", "title": "select all duplicates on two different column combinations based on conditions", "body": "<h3><code>where</code> + <code>drop_duplicates</code></h3>\n\n<pre><code>df['key'] = df['t_num'].where(df['o_st'].eq('P'), df['r_num'])\n\ndf.drop_duplicates(subset=['A_key', 'key']).drop('key', 1)\n</code></pre>\n\n<p></p>\n\n<pre><code>    A_key  t_num r_num o_st\n292    A1     16    TS    Q\n173    A5     15    TT    Q\n955    A7     19    TQ    Q\n804    A7     17    TR    Q\n668    A1     28  None    P\n788    A4     88  None    P\n693    A7     17    TS    Q\n781    A1     22  None    P\n</code></pre>\n\n<hr>\n\n<p>You have two distinct subsets that you want to check for uniqueness depending on the value of the third column.  Instead of calling <code>drop_duplicates</code> twice, I create a mask that contains the correct subset value before calling <code>drop_duplicates</code> a single time.</p>\n"}], "owner": {"reputation": 531, "user_id": 7933418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eec40b228d90adc86ec949347733d2e1?s=128&d=identicon&r=PG&f=1", "display_name": "iprof0214", "link": "https://stackoverflow.com/users/7933418/iprof0214"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 54225173, "answer_count": 1, "score": 1, "last_activity_date": 1547671846, "creation_date": 1547670038, "last_edit_date": 1547670747, "question_id": 54224758, "link": "https://stackoverflow.com/questions/54224758/select-all-duplicates-on-two-different-column-combinations-based-on-conditions", "title": "select all duplicates on two different column combinations based on conditions", "body": "<p>I have the dataframe that looks like follows :</p>\n\n<pre><code>     A_key     t_num    r_num  o_st \n292  A1         16       TS      Q\n812  A1         16       TS      Q\n173  A5         15       TT      Q\n955  A7         19       TQ      Q\n804  A7         17       TR      Q\n49   A7         18       TQ      Q\n668  A1         28       None    P \n788  A4         88       None    P \n693  A7         17       TS      Q\n781  A1         22       None    P\n</code></pre>\n\n<p>I want to select all distinct rows for a unique combination of A_key and t_num for  o_st = 'P' and all distinct rows for a unique combination of A_key and r_num for o_st = 'Q' into a new dataframe. Appreciate any responses</p>\n\n<p>Expected df looks like the following</p>\n\n<pre><code>   A_key     t_num    r_num  o_st \n292  A1         16       TS      Q\n173  A5         15       TT      Q\n955  A7         19       TQ      Q\n804  A7         17       TR      Q\n668  A1         28       None    P \n788  A4         88       None    P \n693  A7         17       TS      Q\n781  A1         22       None    P\n</code></pre>\n"}, {"tags": ["python", "c++", "boost"], "comments": [{"owner": {"reputation": 155, "user_id": 2417774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3e28fcff33afd3cfb2242c4ae49b72c?s=128&d=identicon&r=PG", "display_name": "llonesmiz", "link": "https://stackoverflow.com/users/2417774/llonesmiz"}, "edited": false, "score": 0, "creation_date": 1547713503, "post_id": 54224743, "comment_id": 95288233, "body": "<a href=\"https://wiki.python.org/moin/boost.python/Inheritance#Reflecting_C.2B-.2B-_Inheritance_Relationships\" rel=\"nofollow noreferrer\">wiki.python.org/moin/boost.python/&hellip;</a> seems relevant."}], "answers": [{"tags": [], "owner": {"reputation": 107, "user_id": 5281266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe89ac43fa335a2b0ff5ba76f2925d64?s=128&d=identicon&r=PG&f=1", "display_name": "Keith Sloan", "link": "https://stackoverflow.com/users/5281266/keith-sloan"}, "is_accepted": false, "score": 1, "last_activity_date": 1547719410, "creation_date": 1547719410, "answer_id": 54233385, "question_id": 54224743, "link": "https://stackoverflow.com/questions/54224743/accessing-from-python-a-c-function-that-takes-a-pointer/54233385#54233385", "title": "Accessing from python a C++ function that takes a pointer", "body": "<p>Thanks for reference was able to resolve by adding bases to definition</p>\n\n<pre><code> class_&lt;G4VFacet, G4VFacet*, boost::noncopyable&gt;\n    (\"G4VFacet\", \"solid class\", no_init)\n    // ---\n    .def(\"SetVertex\",      &amp;G4TriangularFacet::SetVertex)\n\n    // operators\n    .def(self == self)\n    ;\n\n class_&lt;G4TriangularFacet, bases&lt;G4VFacet&gt; , boost::noncopyable&gt;\n   (\"G4TriangularFacet\", \"solid class\")\n   // ---\n   .def(\"SetVertex\",      &amp;G4TriangularFacet::SetVertex)\n\n   // operators\n   .def(self == self)\n   ;\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 5281266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe89ac43fa335a2b0ff5ba76f2925d64?s=128&d=identicon&r=PG&f=1", "display_name": "Keith Sloan", "link": "https://stackoverflow.com/users/5281266/keith-sloan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1547719410, "creation_date": 1547669978, "question_id": 54224743, "link": "https://stackoverflow.com/questions/54224743/accessing-from-python-a-c-function-that-takes-a-pointer", "title": "Accessing from python a C++ function that takes a pointer", "body": "<p>I am trying to use a function that requires a pointer to a class.</p>\n\n<p>I get the following error</p>\n\n<pre><code>&lt;class 'Boost.Python.ArgumentError'&gt;: Python argument types in\n    G4TessellatedSolid.AddFacet(G4TessellatedSolid, G4TriangularFacet)\ndid not match C++ signature:\n    AddFacet(G4TessellatedSolid {lvalue}, G4VFacet*)\n</code></pre>\n\n<p>G4TesselledSolid has a function\n     G4bool     AddFacet (G4VFacet *aFacet)</p>\n\n<p>G4TriansularFacet class definition has\n     class G4TriangularFacet : public G4VFacet</p>\n\n<p>My Boost class definition looks like</p>\n\n<pre><code>class_&lt;G4TessellatedSolid, G4TessellatedSolid*, boost::noncopyable&gt;\n         (\"G4TessellatedSolid\", \"solid class\")\n // ---\n       .def(\"AddFacet\",       &amp;G4TessellatedSolid::AddFacet)\n // operators\n       .def(self == self)\n       ;\n</code></pre>\n\n<p>My Pythons looks like \n    tessellate = G4TessellatedSolid()\n    tessellate.AddFacet(face)</p>\n"}, {"tags": ["python", "python-3.x", "initialization", "cpython"], "comments": [{"owner": {"reputation": 204, "user_id": 9034735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WpVTG.png?s=128&g=1", "display_name": "Pmp P.", "link": "https://stackoverflow.com/users/9034735/pmp-p"}, "edited": false, "score": 1, "creation_date": 1547709365, "post_id": 54224735, "comment_id": 95286418, "body": "i would be curious to know about those bugs you encountered in &quot;_bootstrap.py&quot; even on platform as weird as wasm or android there&#39;s no need to modify it. What do you want to achieve ?"}, {"owner": {"reputation": 2224, "user_id": 450946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dce6b278914691e3eb31e4442a73cc2a?s=128&d=identicon&r=PG", "display_name": "KOLANICH", "link": "https://stackoverflow.com/users/450946/kolanich"}, "reply_to_user": {"reputation": 204, "user_id": 9034735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WpVTG.png?s=128&g=1", "display_name": "Pmp P.", "link": "https://stackoverflow.com/users/9034735/pmp-p"}, "edited": false, "score": 0, "creation_date": 1549434006, "post_id": 54224735, "comment_id": 95895671, "body": "IDK for now (have not yet debugged it, was busy), but it breaks when interacts to my custom module loaders. 1 <code>importlib.reload</code> doesn&#39;t work. 2. When I load a module with <a href=\"https://gitlab.com/KOLANICH/lazily.py\" rel=\"nofollow noreferrer\">my custom loader, wrapping <code>importlib.import_module</code></a>, when I load later a submodule of that module, I get an error that the module is not present."}, {"owner": {"reputation": 204, "user_id": 9034735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WpVTG.png?s=128&g=1", "display_name": "Pmp P.", "link": "https://stackoverflow.com/users/9034735/pmp-p"}, "edited": false, "score": 1, "creation_date": 1550433005, "post_id": 54224735, "comment_id": 96256501, "body": "you may want to call importlib.invalidate_caches() before using reload or plugin systems."}], "answers": [{"comments": [{"owner": {"reputation": 204, "user_id": 9034735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WpVTG.png?s=128&g=1", "display_name": "Pmp P.", "link": "https://stackoverflow.com/users/9034735/pmp-p"}, "edited": false, "score": 0, "creation_date": 1611218073, "post_id": 54547625, "comment_id": 116380892, "body": "I think you may need to to <code>import _bootlocale</code> before hooking import system and/or use PYTHONUTF8=1 in startup environnement. There&#39;s a possibility of circular import with text iowrappers + getpreferredencoding. i think it&#39;s fixed in 3.10.  ( cf <a href=\"https://github.com/python/cpython/blob/3.9/Lib/locale.py#L658\" rel=\"nofollow noreferrer\">github.com/python/cpython/blob/3.9/Lib/locale.py#L658</a> )"}, {"owner": {"reputation": 2224, "user_id": 450946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dce6b278914691e3eb31e4442a73cc2a?s=128&d=identicon&r=PG", "display_name": "KOLANICH", "link": "https://stackoverflow.com/users/450946/kolanich"}, "reply_to_user": {"reputation": 204, "user_id": 9034735, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WpVTG.png?s=128&g=1", "display_name": "Pmp P.", "link": "https://stackoverflow.com/users/9034735/pmp-p"}, "edited": false, "score": 0, "creation_date": 1618981925, "post_id": 54547625, "comment_id": 118763437, "body": "Thanks for the advice. I have looked into cpython source code and saw <code>_bootlocale</code> is imported through <code>PyImport_ImportModule</code>, which calls <code>PyImport_Import</code>, which calls <code>__import__</code>. So in normal operation import system must already be working by the time <code>_bootlocale</code> is imported."}], "tags": [], "owner": {"reputation": 2224, "user_id": 450946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dce6b278914691e3eb31e4442a73cc2a?s=128&d=identicon&r=PG", "display_name": "KOLANICH", "link": "https://stackoverflow.com/users/450946/kolanich"}, "is_accepted": false, "score": 0, "last_activity_date": 1549433616, "creation_date": 1549433616, "answer_id": 54547625, "question_id": 54224735, "link": "https://stackoverflow.com/questions/54224735/importlib-bootstrap-and-python-interpreter-initialization/54547625#54547625", "title": "importlib._bootstrap and python interpreter initialization", "body": "<p>Not quite an answer, but I have solved one issue only for my case (loading python source code).</p>\n\n<blockquote>\n  <p>How should I make <code>open</code> work?</p>\n</blockquote>\n\n<p>It turned out that string encodings are unavailable that time, so I used <code>rb</code> instead of <code>r</code>. Then I pass the <code>bytes</code> to <code>compile</code>, it can deal with them.</p>\n"}], "owner": {"reputation": 2224, "user_id": 450946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dce6b278914691e3eb31e4442a73cc2a?s=128&d=identicon&r=PG", "display_name": "KOLANICH", "link": "https://stackoverflow.com/users/450946/kolanich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1292, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1549433616, "creation_date": 1547669941, "question_id": 54224735, "link": "https://stackoverflow.com/questions/54224735/importlib-bootstrap-and-python-interpreter-initialization", "title": "importlib._bootstrap and python interpreter initialization", "body": "<p>CPython interpreter modules import system is written in python itself and is initialized in <code>importlib._bootstrap</code>. Its source can be seen in <code>importlib/_bootstrap.py</code>, but it is not loaded from there. Instead it is loaded from so called frozen module, which bytecode is <a href=\"https://github.com/python/cpython/blob/master/Python/frozen.c#L31L45\" rel=\"nofollow noreferrer\">baked</a> into the interpreter library (<code>python37.dll</code>).</p>\n\n<p>The interpreter initializes itself by <a href=\"https://github.com/python/cpython/blob/master/Python/pylifecycle.c#L186\" rel=\"nofollow noreferrer\">importing <code>_frozen_importlib</code> (it's a name for <code>importlib._bootstrap</code> baked into the interpreter)</a> and <a href=\"https://github.com/python/cpython/blob/master/Python/pylifecycle.c#L217\" rel=\"nofollow noreferrer\">calling <code>_install</code> function defined there, passing <code>sys</code> and <code>_imp</code> modules as arguments</a>. <a href=\"https://github.com/python/cpython/blob/master/Lib/importlib/_bootstrap.py#L1158\" rel=\"nofollow noreferrer\"><code>_install</code></a> calls <a href=\"https://github.com/python/cpython/blob/master/Lib/importlib/_bootstrap.py#L1123L1146\" rel=\"nofollow noreferrer\"><code>_setup</code></a>, which initializes runtime needed for this module, and then adds 2 importers, implementing <a href=\"https://www.python.org/dev/peps/pep-0451/\" rel=\"nofollow noreferrer\">PEP 451</a>.</p>\n\n<p>When developing a custom importer I have encountered several bugs either in <code>_bootstrap.py</code> or in my importer, so I need to add some debug output into <code>_bootstrap.py</code>.</p>\n\n<p>So I try to make the interpreter to load <code>_bootstrap.py</code> from disk, not from baked-in bytecode.</p>\n\n<p>Analysis of cpython source code revealed that in order to import builtin modules I don't need the most of spec class. So builtin modules can be imported using <code>_create_builtin</code></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class UltraSimpleSpec:\n    __slots__=(\"name\",)\n    def __init__(self, name):\n       self.name = name\n\ndef _install(sys, _imp):\n    io = _imp.create_builtin(UltraSimpleSpec(\"_io\"))\n    _bi = _imp.create_builtin(UltraSimpleSpec(\"builtins\"))\n    fd = io.open(\"path/to/_bootstrap.py\", \"rt\") # exits the _install function without any exception, how can it do it?\n    raise _bi.Exception(\"Never called\") # _bi.print doesn't work, because sys.stdout is not initialized, so I have to use exceptions for debug output\n    ...\n</code></pre>\n\n<p>Unfortunately something strange happens and call to io.open causes <code>_install</code> to exit, control flow never reaches the next statement. And no exception seems to be raised, when it is, interpreter prints it, instead an exception is raised in another place because of missing side effect of <code>_install</code>.</p>\n\n<p>Yet ahother nuisance is that <code>sys.stdout</code> is not initialized, so we cannot <code>print</code> and have to rely on exceptions for debug output.</p>\n\n<p>So</p>\n\n<ol>\n<li><p>How should I make <code>open</code> work?</p></li>\n<li><p>How should I initialize <code>sys.stdout</code>?</p></li>\n</ol>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3467, "user_id": 3393308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a3f30f7c191e8d556c70c951fe3d9af?s=128&d=identicon&r=PG", "display_name": "yorodm", "link": "https://stackoverflow.com/users/3393308/yorodm"}, "edited": false, "score": 0, "creation_date": 1547671108, "post_id": 54224669, "comment_id": 95275832, "body": "That&#39;s not a proper way to use descriptors"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 7725690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8443544845cc6955ab32937447de39c7?s=128&d=identicon&r=PG&f=1", "display_name": "Dangraf", "link": "https://stackoverflow.com/users/7725690/dangraf"}, "edited": false, "score": 0, "creation_date": 1547672109, "post_id": 54224993, "comment_id": 95276267, "body": "Thanks for the heads up about one descriptor instance"}], "tags": [], "owner": {"reputation": 26167, "user_id": 736937, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3ccac435e2fd4eb9be62da7830d887c?s=128&d=identicon&r=PG", "display_name": "jedwards", "link": "https://stackoverflow.com/users/736937/jedwards"}, "is_accepted": true, "score": 1, "last_activity_date": 1547672198, "last_edit_date": 1547672198, "creation_date": 1547671067, "answer_id": 54224993, "question_id": 54224669, "link": "https://stackoverflow.com/questions/54224669/how-to-access-methods-and-attributes-in-derived-property-class-in-python/54224993#54224993", "title": "How to access methods and attributes in derived property class in python", "body": "<blockquote>\n  <p>How do I access the method \"get_memvervalues\" or the attributes _name, _tooltip etc?</p>\n</blockquote>\n\n<p>From a class (<code>myclass</code>):</p>\n\n<pre><code>myclass.__dict__['data']\n</code></pre>\n\n<p>From a class instance (<code>a</code>):</p>\n\n<pre><code>type(a).__dict__['data']\n</code></pre>\n\n<p>In both, <code>data</code> is the attribute name.</p>\n\n<p>For example:</p>\n\n<pre><code>a = myclass()\ndesc = type(a).__dict__['data']\n\nprint(desc.get_membervalues())    # {\n                                  #     'name': 'data', \n                                  #     'cls_name': 'AnotherClass', \n                                  #     'tooltip': 'help'\n                                  # }\n\nprint(desc._tooltip)              # help\n\nprint(vars(desc))                 # {\n                                  #     '_name': 'data',\n                                  #     '_value': 4,\n                                  #     '_cls_name': 'AnotherClass', \n                                  #     '_datatype': &lt;class 'int'&gt;, \n                                  #     '_tooltip': 'help', \n                                  #     '_kwargs': {}\n                                  # }\n</code></pre>\n\n<p>But, at first glance, there's a problem with your implementation:</p>\n\n<pre><code>a = myclass()\nb = myclass()\n\nprint(\"Before:\")        # Before:\nprint(\"a:\", a.data)     # a: 4\nprint(\"b:\", b.data)     # b: 4\n\na.data = 10\n\nprint(\"After:\")         # After:\nprint(\"a:\", a.data)     # a: 10\nprint(\"b:\", b.data)     # b: 10   (!!!)\n</code></pre>\n\n<p>If this makes sense to you, then you can stop reading and you're using the method descriptor in a unconventional way.</p>\n\n<p>Despite there being two class instances, there is only one descriptor instance:</p>\n\n<pre><code>type(a).__dict__['data'] is type(b).__dict__['data']\n</code></pre>\n\n<p>(which should be evident as <code>type(a) is type(b)</code>).</p>\n\n<p>To support the descriptor \"acting differently\", the first argument (you call it <code>instance</code> in <code>__set__</code>, but it's also passed to <code>__get__</code>) is a reference to the class instance -- that is what <code>self</code> would be inside a traditional method.</p>\n\n<p>You usually want to use this somehow.</p>\n"}, {"tags": [], "owner": {"reputation": 11552, "user_id": 8112138, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3b1ddf31abbf37d5fe71ad387e2772c?s=128&d=identicon&r=PG&f=1", "display_name": "Primusa", "link": "https://stackoverflow.com/users/8112138/primusa"}, "is_accepted": false, "score": 1, "last_activity_date": 1547671244, "creation_date": 1547671244, "answer_id": 54225027, "question_id": 54224669, "link": "https://stackoverflow.com/questions/54224669/how-to-access-methods-and-attributes-in-derived-property-class-in-python/54225027#54225027", "title": "How to access methods and attributes in derived property class in python", "body": "<p><code>get_membervalues</code> isn't defined inside <code>myclass</code>, so <code>a</code> won't have access to it. </p>\n\n<p>It's defined inside <code>myproperty</code>, so the next logical conclusion is to try and get to the <code>myproperty</code> object associated with <code>a.data</code>. Since Python stores the functions in <code>myclass</code> in <code>myclass.__dict__</code>, we can find the property object like so:</p>\n\n<pre><code>a.__class__.__dict__['data']\n</code></pre>\n\n<p>And then call the function from there:</p>\n\n<pre><code>a.__class__.__dict__['data'].get_membervalues()\n&gt;&gt;&gt; {'name': 'data', 'cls_name': 'AnotherClass', 'tooltip': 'help'}\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 7725690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8443544845cc6955ab32937447de39c7?s=128&d=identicon&r=PG&f=1", "display_name": "Dangraf", "link": "https://stackoverflow.com/users/7725690/dangraf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 54224993, "answer_count": 2, "score": 0, "last_activity_date": 1547672198, "creation_date": 1547669673, "question_id": 54224669, "link": "https://stackoverflow.com/questions/54224669/how-to-access-methods-and-attributes-in-derived-property-class-in-python", "title": "How to access methods and attributes in derived property class in python", "body": "<p>I'm trying to extend the property decorator to my own needs, but I don't know how to access the attributes and methods in the extended property</p>\n\n<pre><code>class myproperty(property):\n    def __init__(self, tooltip, cls_name,\n             fget=None, fset=None, fdel=None, doc=None, **kwargs ):\n        super().__init__(fget=fget, fset=fset, fdel=fdel, doc=doc)\n        self._name = ''\n        self._value = ''\n        self._cls_name = None        # name of GUI object to be used\n\n        self._datatype = None\n        self._tooltip = tooltip\n        self._cls_name = cls_name\n        self._kwargs = dict(**kwargs)\n\n    def __get__(self, *args, **kwargs):\n        return self._datatype(self._value)\n\n    def __set__(self, instance, value):\n        self._value = value\n        print(f'setting {value}')\n\n    def __call__(self, f):\n        self._value = f(self)\n        self._datatype= type(self._value )\n        self._name = f.__name__\n        return self\n\n    def get_membervalues(self):\n        return {'name': self._name, 'cls_name': self._cls_name, 'tooltip': self._tooltip}\n</code></pre>\n\n<p>I can use the property:</p>\n\n<pre><code>class myclass():\n    @myproperty(tooltip='help', cls_name='AnotherClass')\n    def data(self): return 4\n</code></pre>\n\n<p>And it seems to work internally</p>\n\n<pre><code>a = myclass()\nprint(a.data)        # prints out 4, __get__() is called\na.data = \"10\"        #  __set__ is called correctly\nprint(a.data)        #  prints out 10 correctly\nprint(type(a.data))  # prints out \"int\" which is correct\na.get_memvervalues()  # this does not work\n</code></pre>\n\n<p>How do I access the method \"get_memvervalues\" or the attributes _name, _tooltip etc?\nIve tried with inspect and to cast it but have not yet succeeded.\nBonus question: When the def <strong>call</strong>(self, f)  function is called I get the function pointer to 'data' in myclass. How do I extract the name of the class from that function pointer?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 4837, "user_id": 9769953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14a586643a20c8d68010f7a329f5a04?s=128&d=identicon&r=PG", "display_name": "0 0", "link": "https://stackoverflow.com/users/9769953/0-0"}, "edited": false, "score": 2, "creation_date": 1547669928, "post_id": 54224667, "comment_id": 95275278, "body": "The equation <code>data[&#39;democrat&#39;] &gt;= data[&#39;republican&#39;]</code> isn&#39;t <code>True</code> for several rows in your dataframe, hence <code>.all()</code> will evaluate to <code>False</code>. <i>Only</i> if the equation holds for <i>all</i> rows will it be <code>True</code>."}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 1, "creation_date": 1547669932, "post_id": 54224667, "comment_id": 95275280, "body": "The <code>.all()</code> function will check if all entries of <code>democrat</code> are greater than <code>republican</code> in the entire dataframe. This is not what you are trying to check"}, {"owner": {"reputation": 4837, "user_id": 9769953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14a586643a20c8d68010f7a329f5a04?s=128&d=identicon&r=PG", "display_name": "0 0", "link": "https://stackoverflow.com/users/9769953/0-0"}, "edited": false, "score": 1, "creation_date": 1547670269, "post_id": 54224667, "comment_id": 95275452, "body": "Notice that you&#39;re iterating over the rows, yet you don&#39;t use any of those rows individually: each iteration of the loop, you access the full DataFrame instead. You&#39;ll have to rethink how you&#39;re working with DataFrames, otherwise you&#39;ll be working against them. Your current loop suggests you&#39;re using them like dicts, which they are not."}, {"owner": {"reputation": 420, "user_id": 3910919, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/97b008fc9294b6d53cdf339827b96678?s=128&d=identicon&r=PG&f=1", "display_name": "natnay", "link": "https://stackoverflow.com/users/3910919/natnay"}, "reply_to_user": {"reputation": 4837, "user_id": 9769953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14a586643a20c8d68010f7a329f5a04?s=128&d=identicon&r=PG", "display_name": "0 0", "link": "https://stackoverflow.com/users/9769953/0-0"}, "edited": false, "score": 0, "creation_date": 1547671977, "post_id": 54224667, "comment_id": 95276215, "body": "@9769953 Thank you for that explanation. That really helped me understand what the underlying problem is!"}], "answers": [{"comments": [{"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1547670426, "post_id": 54224781, "comment_id": 95275514, "body": "Definitely good to highlight that the way to approach dataframes is row and column wise. The one thing I would note is that <code>mask</code> here is a <code>pd.Series</code> that is comprised of boolean values as that might not be apparent to OP"}, {"owner": {"reputation": 420, "user_id": 3910919, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/97b008fc9294b6d53cdf339827b96678?s=128&d=identicon&r=PG&f=1", "display_name": "natnay", "link": "https://stackoverflow.com/users/3910919/natnay"}, "edited": false, "score": 0, "creation_date": 1547672362, "post_id": 54224781, "comment_id": 95276372, "body": "This makes sense. Thanks for answering and explaining why it wasn&#39;t originally working :)"}], "tags": [], "owner": {"reputation": 4837, "user_id": 9769953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f14a586643a20c8d68010f7a329f5a04?s=128&d=identicon&r=PG", "display_name": "0 0", "link": "https://stackoverflow.com/users/9769953/0-0"}, "is_accepted": true, "score": 3, "last_activity_date": 1547670124, "creation_date": 1547670124, "answer_id": 54224781, "question_id": 54224667, "link": "https://stackoverflow.com/questions/54224667/pandas-any-all-with-if-else/54224781#54224781", "title": "Pandas: Any() All() with if/else", "body": "<p>You need a mask:</p>\n\n<pre><code># Set a default value\ndata['rwasted'] = data['republican'] - data['votestowin']\n# Find where it is different\nmask = data['democrat'] &gt;= data['republican']\n# Set those rows to another value\ndata['rwasted'][mask] = data['republican']\n</code></pre>\n\n<p>No if-else statement needed, <em>no</em> for loop needed either. You have to think row- and column-wise with DataFrames, not cell-like.</p>\n"}, {"comments": [{"owner": {"reputation": 420, "user_id": 3910919, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/97b008fc9294b6d53cdf339827b96678?s=128&d=identicon&r=PG&f=1", "display_name": "natnay", "link": "https://stackoverflow.com/users/3910919/natnay"}, "edited": false, "score": 0, "creation_date": 1547672527, "post_id": 54224814, "comment_id": 95276442, "body": "Gotcha, I see. Thanks for finagling a way for it to work!"}], "tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": false, "score": 1, "last_activity_date": 1547670232, "creation_date": 1547670232, "answer_id": 54224814, "question_id": 54224667, "link": "https://stackoverflow.com/questions/54224667/pandas-any-all-with-if-else/54224814#54224814", "title": "Pandas: Any() All() with if/else", "body": "<p><code>.all()</code> is a function that applies to an entire <code>Series</code>, not a single <code>row</code>. You are mixing concepts here. To do a row-by-row comparison (as you want to do):</p>\n\n<pre><code>myseries = []\nfor idx, row in data.iterrows():\n    if row['democrat'] &gt;= row['republican']:\n        myseries.append(row['republican'])\n    else:\n        myseries.append(row['republican'] - row['votestowin'])\n\ndata['rwasted'] = pd.Series(myseries)\n</code></pre>\n\n<p>See @9769953's answer for a more concise way to apply it in the dataframe, but this is the analogue to your <code>iterrows</code> approach</p>\n"}], "owner": {"reputation": 420, "user_id": 3910919, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/97b008fc9294b6d53cdf339827b96678?s=128&d=identicon&r=PG&f=1", "display_name": "natnay", "link": "https://stackoverflow.com/users/3910919/natnay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 54224781, "answer_count": 2, "score": 0, "last_activity_date": 1547670232, "creation_date": 1547669666, "question_id": 54224667, "link": "https://stackoverflow.com/questions/54224667/pandas-any-all-with-if-else", "title": "Pandas: Any() All() with if/else", "body": "<p>I'm trying to do a simple if/else statement on a Pandas dataframe. I was getting the error <code>The truth value of a Series is ambiguous.</code> so I tried using <code>any() all()</code>. Using these options causes only the <code>if</code> or <code>else</code> part of the expression to evaluate. My data looks like this:</p>\n\n<pre><code>state       district    democrat    republican  totalvotes  votestowin  rwasted\nMaine       1           227546.0    164569.0    392115.0    196057.5    -31488.5\nMaine       2           159081.0    192878.0    351959.0    175979.5     16898.5\nMaryland    1           103622.0    242574.0    346196.0    173098.0    69476.0\nMaryland    2           192183.0    102577.0    294760.0    147380.0    -44803.0\nMaryland    3           214640.0    115048.0    329688.0    164844.0    -49796.0\n</code></pre>\n\n<p>My code is</p>\n\n<pre><code>for idx,row in data.iterrows():\n    if (data['democrat'] &gt;= data['republican']).all():\n        data['rwasted'] = data['republican']\n    else:\n        data['rwasted'] = data['republican'] - data['votestowin']\n</code></pre>\n\n<p>You can see it's only evaluating the <code>else</code> part of the code. Any ideas how to get this working? Also why is it returning an error in the first place? This expression seems pretty straightfoward to me.  </p>\n"}, {"tags": ["python", "scrapy"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10597469"}, "edited": false, "score": 0, "creation_date": 1547669862, "post_id": 54224645, "comment_id": 95275235, "body": "There isn&#39;t enough info here to answer this question.  Where is your data?  Are you saving it to a database or just returning an array and looking at it?  What are you using to scrape (BS4, Selenium, etc.)?  Can you include some code from your scraper so people can see what indications it provides that it is finished?  Without amplifying information it is pretty much impossible to give you even a general answer."}, {"owner": {"reputation": 25, "user_id": 10820782, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-14UPuWz0U_w/AAAAAAAAAAI/AAAAAAAAAH8/dY1gO3Z_lMw/photo.jpg?sz=128", "display_name": "Snail_nnaail", "link": "https://stackoverflow.com/users/10820782/snail-nnaail"}, "edited": false, "score": 0, "creation_date": 1547720063, "post_id": 54224645, "comment_id": 95291952, "body": "sorry. The post is updated now"}, {"owner": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "edited": false, "score": 0, "creation_date": 1547809791, "post_id": 54224645, "comment_id": 95329518, "body": "Have you considered running a separate Python script after running the spider?"}], "answers": [{"comments": [{"owner": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "edited": false, "score": 1, "creation_date": 1547809740, "post_id": 54229585, "comment_id": 95329484, "body": "I don\u2019t think this is what the OP is looking for. Item Pipelines are used to handle individual items. I believe the OP wants to analyze the whole item set once the spider finishes."}, {"owner": {"reputation": 714, "user_id": 10832127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3d4bfe90edf86864e9e556583785bf?s=128&d=identicon&r=PG&f=1", "display_name": "ThunderMind", "link": "https://stackoverflow.com/users/10832127/thundermind"}, "reply_to_user": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "edited": false, "score": 0, "creation_date": 1547810606, "post_id": 54229585, "comment_id": 95329926, "body": "Okhay, Then <code>spider_close</code> function should do the work <code>https:&#47;&#47;doc.scrapy.org&#47;en&#47;latest&#47;topics&#47;signals.html</code>"}, {"owner": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "edited": false, "score": 0, "creation_date": 1547810945, "post_id": 54229585, "comment_id": 95330092, "body": "Assuming by that time the serialization to disk has finished. Which might be the case, but I am not certain."}], "tags": [], "owner": {"reputation": 714, "user_id": 10832127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f3d4bfe90edf86864e9e556583785bf?s=128&d=identicon&r=PG&f=1", "display_name": "ThunderMind", "link": "https://stackoverflow.com/users/10832127/thundermind"}, "is_accepted": false, "score": 0, "last_activity_date": 1547703153, "creation_date": 1547703153, "answer_id": 54229585, "question_id": 54224645, "link": "https://stackoverflow.com/questions/54224645/running-custom-code-after-crawling-has-finished-scrapy/54229585#54229585", "title": "Running custom code after crawling has finished (scrapy)", "body": "<p>Scrapy provides you the flow to control the item in <code>Pipelines</code></p>\n\n<p>In <code>Pipelines</code> you can verify or can apply any check on the item, if it does not match your criteria or you want to update data depending on some attribute values, you can do there.</p>\n\n<p>More info on <code>Pipelines</code> you can read <a href=\"https://doc.scrapy.org/en/latest/topics/item-pipeline.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 25, "user_id": 10820782, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-14UPuWz0U_w/AAAAAAAAAAI/AAAAAAAAAH8/dY1gO3Z_lMw/photo.jpg?sz=128", "display_name": "Snail_nnaail", "link": "https://stackoverflow.com/users/10820782/snail-nnaail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 708, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1547720579, "creation_date": 1547669580, "last_edit_date": 1547720579, "question_id": 54224645, "link": "https://stackoverflow.com/questions/54224645/running-custom-code-after-crawling-has-finished-scrapy", "title": "Running custom code after crawling has finished (scrapy)", "body": "<p>I need to test all of my scraped data after the crawl has finished (percentage of some fields' availability etc). The data is contained in a csv file, so for testing I decided to use Pandas. Is there any way to launch the code that tests the .csv file inside the scrapy spider after Scrapy tells me the crawling has finished? I've tried using extentions, but couldn't get it to work. Thx </p>\n\n<pre><code>class Spider(scrapy.Spider):\n    name = 'scrapyspider'\n    allowed_domains = ['www.example.com']\n    start_urls = ['https://www.example.com/1/', 'https://www.example.com/2/']\n\n\n    def parse(self, response):\n        for product_link in response.xpath(\n                '//a[@class=\"product-link\"]/@href').extract():\n            absolute_url = response.urljoin(product_link)\n            yield scrapy.Request(absolute_url, self.parse_product)\n        for category_link in response.xpath(\n            '//a[@class=\"navigation-item-link\"]/@href').extract():\n            absolute_url = response.urljoin(category_link)\n            yield scrapy.Request(absolute_url, self.parse)\n\n    def parse_product(self, response):\n        ...\n        yield item\n</code></pre>\n"}, {"tags": ["python", "pandas", "loops"], "comments": [{"owner": {"reputation": 306, "user_id": 8132160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6092bf548e75779644df38b31a8fd39?s=128&d=identicon&r=PG&f=1", "display_name": "Rachel", "link": "https://stackoverflow.com/users/8132160/rachel"}, "edited": false, "score": 0, "creation_date": 1547670615, "post_id": 54224590, "comment_id": 95275616, "body": "I think the your approach is flawed.  <code>row_iterator</code> is being traversed and <code>index</code> and <code>row_n0</code> are always set based on the value of the current <code>row_iterator</code> object.  You also set <code>row_n1</code> outside the loop and never update it.  This makes the comparisons static instead of dynamic.  I haven&#39;t used pandas before, but you should restructure your code to update the <code>row_n1</code> inside the loop.  Also, what is <code>i</code>?  I didn&#39;t see it get set, just being used."}], "answers": [{"tags": [], "owner": {"reputation": 62335, "user_id": 9840637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QqY9S.png?s=128&g=1", "display_name": "anky", "link": "https://stackoverflow.com/users/9840637/anky"}, "is_accepted": false, "score": 0, "last_activity_date": 1548389740, "last_edit_date": 1548389740, "creation_date": 1547710311, "answer_id": 54230989, "question_id": 54224590, "link": "https://stackoverflow.com/questions/54224590/pandas-iterrows-cant-skip-row-during-iteration-if-condition-met/54230989#54230989", "title": "Pandas iterrows can&#39;t skip row during iteration if condition met", "body": "<p>Assuming your dataframe looks like (<em>i have added 2 extra rows at the bottom since your example had nothing to reproduce the else part of the code</em>) :</p>\n\n<pre><code>    Terminal_ID TSG                 Date       Terminal_no  Vol\n0   t_tel_003   CashCheck           2018-01-10  3           61\n1   t_tel_003   CashCheck           2018-01-10  3           3\n2   t_tel_003   CommercialDeposit   2018-01-10  3           12\n3   t_tel_003   CommercialDeposit   2018-01-10  3           10\n4   t_tel_003   CommercialDeposit   2018-01-10  3           122\n5   t_tel_003   CommercialDeposit   2018-01-10  3           1\n6   t_tel_004   CommercialDeposit   2018-01-10  3           1\n7   t_tel_003   CommercialDeposit   2018-01-10  4           1\n</code></pre>\n\n<p>As you see the last 2 rows are totally different and doesnot have a match considering all the 4 columns(hence the output should have these 2 rows as it is):</p>\n\n<p>Using the below:</p>\n\n<pre><code>df_dup = df.groupby([df.index//2,'Terminal_ID','TSG','Date','Terminal_no'])[df.columns].apply(lambda x : x[x[x.columns[:-1]].duplicated(keep=False)]['Vol'].sum()).reset_index().rename(columns={0:'Vol'}).drop('level_0',axis=1).replace(0,np.nan).dropna()\ndf_uniq =df[~df[df.columns[:-1]].duplicated(keep=False)]\n\npd.concat([df_dup,df_uniq],ignore_index=True)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>    Terminal_ID TSG                 Date       Terminal_no  Vol\n0   t_tel_003   CashCheck           2018-01-10  3           64.0\n1   t_tel_003   CommercialDeposit   2018-01-10  3           22.0\n2   t_tel_003   CommercialDeposit   2018-01-10  3           123.0\n3   t_tel_004   CommercialDeposit   2018-01-10  3           1.0\n4   t_tel_003   CommercialDeposit   2018-01-10  4           1.0\n</code></pre>\n\n<p><strong>Explaination</strong> <strong><code>df_dup</code></strong>  Groupby every 2 rows using <code>df.index//2</code> under groupby , then apply function every group which checks if every group(here 2 rows excluding the last column <code>Vol</code>) is same and then does a sum on the <code>Vol</code> column.</p>\n\n<p><strong><code>df_uniq</code></strong> : Filter the totally unique values.\nFinally concat both to get your desired output.</p>\n\n<p>Hope this helps. Let me know if not. </p>\n"}], "owner": {"reputation": 23, "user_id": 10659560, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-FBEBq6x5YUw/AAAAAAAAAAI/AAAAAAAAE54/Yn5Fu7E37Wc/photo.jpg?sz=128", "display_name": "Vitor Valentim", "link": "https://stackoverflow.com/users/10659560/vitor-valentim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 943, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1548389740, "creation_date": 1547669388, "question_id": 54224590, "link": "https://stackoverflow.com/questions/54224590/pandas-iterrows-cant-skip-row-during-iteration-if-condition-met", "title": "Pandas iterrows can&#39;t skip row during iteration if condition met", "body": "<p>I'm using iterrows to loop through a dataframe and compare row n with row n+1.\nthe algorithm is as follows:</p>\n\n<pre><code>if columns 0,1,2 of row_n != columns 0,1,2 of row_n+1\noutput row = row_n \nthen check row_n+1 vs row_n+2...\n\nif columns 0,1,2 of row_n == columns 0,1,2 of row_n+1\noutput row columns 0,1,2,3 = row_n columns 0,1,2,3\noutput row column 4 = (row_n column 4 + row_n+1 column 4)\nthen \"skip one row\" and check row_n+2 vs row_n+3...\n</code></pre>\n\n<p>my current code works for the first comparison but then stops. My guess is that the problem is happening when Im trying to \"skip one row\". Im trying to use index = index+1 but the output does not look as expected. How can I fix this?</p>\n\n<pre><code>    row_iterator = TSG_table_sorted.iterrows()\n    _, row_n1 = row_iterator.__next__()\n\n    for index, row_n0 in row_iterator:\n        Terminal_ID_n0 = row_n0['Terminal_ID'];\n        TSG_n0 = row_n0['TSG'];\n        Date_n0 = row_n0['Date'];\n        Vol_n0 = row_n0['Vol'];     \n\n        Terminal_no_n0 = row_n0['Terminal_no'];\n\n        Terminal_ID_n1 = row_n1['Terminal_ID'];\n        TSG_n1 = row_n1['TSG'];\n        Date_n1 = row_n1['Date'];\n        Vol_n1 = row_n1['Vol'];        \n\n        if (Terminal_ID_n0==Terminal_ID_n1 and TSG_n0==TSG_n1 and Date_n0==Date_n1):\n            new_vol=Vol_n0+Vol_n1;\n            output_table.loc[i]=[Terminal_ID_n0,TSG_n0,Date_n0,Terminal_no_n0,new_vol]\n            i=i+1;\n        else:\n            output_table.loc[i]=[Terminal_ID_n0,TSG_n0,Date_n0,Terminal_no_n0,Vol_n0]    \n            i=i+1;\n            index=index+1;\n\n\n\n    input\n          Terminal_ID                TSG        Date Terminal_no  Vol\n    508     t_tel_003          CashCheck   10/1/2018         003   61\n    9605    t_tel_003          CashCheck   10/1/2018         003    3\n    2309    t_tel_003  CommercialDeposit   10/1/2018         003   12\n    4439    t_tel_003  CommercialDeposit   10/1/2018         003   10\n    9513    t_tel_003  CommercialDeposit   10/1/2018         003  122\n    12282   t_tel_003  CommercialDeposit   10/1/2018         003    1\n\n    current output\n          Terminal_ID                TSG        Date Terminal_no  Vol\n    0       t_tel_003          CashCheck   10/1/2018         003   64\n    1       t_tel_003  CommercialDeposit   10/1/2018         003   12\n    2       t_tel_003  CommercialDeposit   10/1/2018         003   10\n    3       t_tel_003  CommercialDeposit   10/1/2018         003  122\n    4       t_tel_003  CommercialDeposit   10/1/2018         003    1\n\n    expected output\n          Terminal_ID                TSG        Date Terminal_no  Vol\n    0       t_tel_003          CashCheck   10/1/2018         003   64\n    1       t_tel_003  CommercialDeposit   10/1/2018         003   22\n    3       t_tel_003  CommercialDeposit   10/1/2018         003  123\n</code></pre>\n"}]