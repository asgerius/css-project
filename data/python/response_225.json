[{"tags": ["python", "scrapy"], "comments": [{"owner": {"reputation": 2874, "user_id": 4720244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecbf3e87a6491f609f81b93e438282db?s=128&d=identicon&r=PG&f=1", "display_name": "EJAg", "link": "https://stackoverflow.com/users/4720244/ejag"}, "edited": false, "score": 0, "creation_date": 1556765187, "post_id": 55944102, "comment_id": 98542822, "body": "You can examine your scraped content with the scrapy shell. It seems bing.com is using client-side rendering, in which case you&#39;ll need to render the whole content to scrape it with something like Selenium"}], "answers": [{"tags": [], "owner": {"reputation": 291, "user_id": 5022565, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HdRX9.jpg?s=128&g=1", "display_name": "Janib Soomro", "link": "https://stackoverflow.com/users/5022565/janib-soomro"}, "is_accepted": false, "score": 0, "last_activity_date": 1556775869, "creation_date": 1556775869, "answer_id": 55946268, "question_id": 55944102, "link": "https://stackoverflow.com/questions/55944102/scrapy-output-file-is-blank/55946268#55946268", "title": "Scrapy Output File is Blank", "body": "<p>Bing knows that you aren't using a regular browser therefore do experiment with headers.</p>\n\n<p>Try these settings in settings.py {scrapy only}:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>USER_AGENT  = 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US) AppleWebKit/532.2 (KHTML, like Gecko) ChromePlus/4.0.222.3 Chrome/4.0.222.3 Safari/532.2'\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>DEFAULT_REQUEST_HEADERS = {\n    'accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3',\n    'accept-language': 'en-US,en;q=0.9',\n    'cache-control': 'no-cache',\n    'cookie': 'MUID=; SRCHD=AF=NOFORM; SRCHUID=1; SRCHUSR=; _EDGE_S=SID=; MUIDB=; _SS=SID=; ipv6=; SRCHHPGUSR=;',\n    'pragma': 'no-cache',\n    'upgrade-insecure-requests': '1',\n    'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36'\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2916, "user_id": 939364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cceb4bd730bda5e8464b76de4d1d6dc5?s=128&d=identicon&r=PG", "display_name": "Gallaecio", "link": "https://stackoverflow.com/users/939364/gallaecio"}, "is_accepted": false, "score": 0, "last_activity_date": 1556807730, "creation_date": 1556807730, "answer_id": 55954737, "question_id": 55944102, "link": "https://stackoverflow.com/questions/55944102/scrapy-output-file-is-blank/55954737#55954737", "title": "Scrapy Output File is Blank", "body": "<p>Your code is not yielding any data.</p>\n\n<p>You need to yield dictionaries or instances of a subclass of Scrapy\u2019s <code>Item</code> class containing the extracted data for that data to reach the output file.</p>\n\n<p>See the <a href=\"https://docs.scrapy.org/en/latest/intro/tutorial.html#extracting-data-in-our-spider\" rel=\"nofollow noreferrer\">corresponding section from the Scrapy tutorial</a>.</p>\n"}], "owner": {"reputation": 153, "user_id": 4350389, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/e17af375747ecd10953cccd45647a7d2?s=128&d=identicon&r=PG&f=1", "display_name": "user6680", "link": "https://stackoverflow.com/users/4350389/user6680"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556807730, "creation_date": 1556755188, "last_edit_date": 1556781565, "question_id": 55944102, "link": "https://stackoverflow.com/questions/55944102/scrapy-output-file-is-blank", "title": "Scrapy Output File is Blank", "body": "<p>I created a scrapy spider, but when I run the command </p>\n\n<pre><code>scrapy crawl scrapytest -o output.json\n</code></pre>\n\n<p>it runs, but the output report is blank. I know the xpath is correct so I'm not really sure. Still really new to scrapy. Any help is appreciated</p>\n\n<pre><code>import scrapy\n\nclass TestspiderSpider(scrapy.Spider):\n\n    name = 'testspider'\n    allowed_domains = ['bing.com']\n    start_urls = ['http://www.bing.com/']\n    url = [\n            'https://www.bing.com/search?q=sample+search&amp;FORM=AWRE'\n          ]\n    def parse(self, response):\n        response.xpath('//*[@class=\"b_algo\"]/h2/a/text()').extract()\n        yield scrapy.Request(url = url, callback = self.parse)\n</code></pre>\n"}, {"tags": ["python", "flask"], "answers": [{"tags": [], "owner": {"reputation": 555, "user_id": 5058759, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/04f6b2356ddb86bdd104703f8b54ded3?s=128&d=identicon&r=PG&f=1", "display_name": "rharper", "link": "https://stackoverflow.com/users/5058759/rharper"}, "is_accepted": true, "score": 0, "last_activity_date": 1556758300, "creation_date": 1556758300, "answer_id": 55944391, "question_id": 55944047, "link": "https://stackoverflow.com/questions/55944047/python-flask-output-dropdown-values-to-page/55944391#55944391", "title": "Python Flask output dropdown values to page", "body": "<p>I ended up just changing the redirect within the elif statement to </p>\n\n<pre><code>return redirect(url_for('index', cumul_hrs=cumul_hrs, cumul_overtime=cumul_overtime))\n</code></pre>\n\n<p>and then getting the variables from the URL with:</p>\n\n<pre><code>cumul_hrs, cumul_overtime = request.args.get('cumul_hrs'), request.args.get('cumul_overtime')\n</code></pre>\n\n<p>and passing them through <code>render_template</code>.</p>\n"}], "owner": {"reputation": 555, "user_id": 5058759, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/04f6b2356ddb86bdd104703f8b54ded3?s=128&d=identicon&r=PG&f=1", "display_name": "rharper", "link": "https://stackoverflow.com/users/5058759/rharper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 55944391, "answer_count": 1, "score": 0, "last_activity_date": 1556758300, "creation_date": 1556754645, "last_edit_date": 1556756392, "question_id": 55944047, "link": "https://stackoverflow.com/questions/55944047/python-flask-output-dropdown-values-to-page", "title": "Python Flask output dropdown values to page", "body": "<p>I have a two dictionaries with several keys and one value for each key. One dict has weekly cumulative work hours, the other weekly cumulative overtime hours. The key is a datetime object, which is calculated to be the beginning of a week. On my webpage I have a dropdown box, which contains the week beginnings</p>\n\n<pre><code>  &lt;form action=\"{{ url_for('index') }}\" method=\"post\"&gt;\n    &lt;select class=\"form-control\" name=\"cumuls\" id=\"select1\" onchange=\"if(this.value != 0) { this.form.submit(); }\"&gt;\n        &lt;option value=\"0\"&gt;Cumulative for week beginning...&lt;/option&gt;\n        {% for i,j in zip(wks, wks2) %}\n        &lt;option value=\"{{ i }}\"&gt;{{ j }}&lt;/option&gt;\n        {% endfor %}\n    &lt;/select&gt;\n  &lt;/form&gt;\n</code></pre>\n\n<p>(<code>wks2</code> is just a nicely formatted version of <code>wks</code>, and <code>wks</code> is just a list of the keys from the dicts which are datetime objects (the dictionaries have the same keys))</p>\n\n<p>I want to be able to click on an option from the dropdown box and for the corresponding values from the two dictionaries to appear below the dropdown box.</p>\n\n<p>I handle the form here (within an <code>index()</code> function), after the if is the end of the index function:</p>\n\n<pre><code>if request.method == 'POST':\n    if 'cumuls' in request.form:\n        week_Begin = request.form['cumuls']\n        listHours = listDates(current_user.get_id())\n        dct_hours, dct_overtime, wks = weeklySum2(listHours)\n\n        #strfdelta is a custom function that formats timedeltas\n        cumul_hrs = strfdelta(dct_hours[datetime.fromisoformat(week_Begin)], '%H:%M')\n\n        cumul_overtime = strfdelta(dct_overtime[datetime.fromisoformat(week_Begin)], '%H:%M')\n\n        return redirect(url_for('index'))\n\nlistHours = listDates(current_user.get_id())\n\ndct_hours, dct_overtime, wks = weeklySum2(listHours)\nprint(wks)\n# wkbgn = weekbeginning, this just formats the dates nicely\nwks2 = [wkbgn.strftime('%A') + ' ' + wkbgn.strftime('%-d') + ' ' + wkbgn.strftime('%b') + ' ' + wkbgn.strftime('%Y') for wkbgn in wks]\n\ncurrentDay = datetime.today()\nstart_week = (currentDay - timedelta(days=currentDay.weekday()))\n\nreturn render_template('index.html', form=form, hoursDb = listHours, dct_overtime=dct_overtime,dct_hours=dct_hours, wks=wks, wks2=wks2, zip=zip)\n</code></pre>\n\n<p>So within the <code>if 'cumuls'...</code>, I basically get the cumulative working and overtime hours for the selected week, in <code>cumul_hrs</code> and <code>cumul_overtime</code>, which works. I essentially want these variables to be displayed on the webpage (below the dropdown box), and the default variable that is displayed will be the current weeks cumulative so far. How could I do this?</p>\n\n<p>Any pointers/tips are greatly appreciated.</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 1142, "user_id": 10010216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PvbB.jpg?s=128&g=1", "display_name": "F Blanchet", "link": "https://stackoverflow.com/users/10010216/f-blanchet"}, "is_accepted": false, "score": 0, "last_activity_date": 1556757240, "last_edit_date": 1556757240, "creation_date": 1556755626, "answer_id": 55944135, "question_id": 55944044, "link": "https://stackoverflow.com/questions/55944044/pandas-dataframe-corr-stripping-columns-from-input/55944135#55944135", "title": "Pandas dataframe.corr() stripping columns from input", "body": "<p>It is because <code>.corr()</code> works only with numeric data type columns. You need to replace values <code>M</code> and <code>F</code> with for instance :<br>\n<code>crime_data['Gender'] = crime_data['Gender'].replace('M',1).replace('F',0)</code></p>\n"}, {"tags": [], "owner": {"reputation": 1539, "user_id": 11363596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f37f85a4f09c7ad798a028a153d18dc?s=128&d=identicon&r=PG&f=1", "display_name": "vb_rises", "link": "https://stackoverflow.com/users/11363596/vb-rises"}, "is_accepted": true, "score": 1, "last_activity_date": 1556756499, "creation_date": 1556756499, "answer_id": 55944217, "question_id": 55944044, "link": "https://stackoverflow.com/questions/55944044/pandas-dataframe-corr-stripping-columns-from-input/55944217#55944217", "title": "Pandas dataframe.corr() stripping columns from input", "body": "<pre><code>data['Gender']=data['Gender'].astype('category').cat.codes\ndata['Date']=data['Date'].astype('category').cat.codes\ndata.corr()\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>       Date  Gender    Age        curage\nDate   NaN   NaN       NaN        NaN\nGender NaN 1.000000 0.162804 -0.703474\nAge    NaN -0.162804 1.000000 0.814425\ncurage NaN -0.703474 0.814425 1.000000\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11439233, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-oQuomEhZ0y8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfgIBNr7SpBKISV_phG5dTuPxVLpQ/mo/photo.jpg?sz=128", "display_name": "Tyler Johnson", "link": "https://stackoverflow.com/users/11439233/tyler-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 55944217, "answer_count": 2, "score": 1, "last_activity_date": 1556757240, "creation_date": 1556754614, "question_id": 55944044, "link": "https://stackoverflow.com/questions/55944044/pandas-dataframe-corr-stripping-columns-from-input", "title": "Pandas dataframe.corr() stripping columns from input", "body": "<p>I'm learning how to use the pandas library in python3 and I've run into an issue with dataframe.corr()</p>\n\n<p>Here's an example of my dataset </p>\n\n<pre><code>Date,Gender,Age at Booking,Current Age\n2015-12-23,M,21,22\n2015-12-23,M,25,25\n2015-12-23,M,37,37\n2015-12-23,F,39,40\n2015-12-23,M,24,24\n</code></pre>\n\n<p>And here is how I attempt to load it/transform it</p>\n\n<pre><code>crime_data = pd.read_csv(crime_data_s)\nprint(crime_data.head())\nprint(crime_data['Date'])\ncorrelated_data = crime_data.corr()\nprint(correlated_data)\n</code></pre>\n\n<p>Printing crime data head shows the 4 columns with some associated data, accessing column 'Date' and printing its values works just as expected however when <code>crime_data.corr()</code> is called and I print the data it has stripped all other items except \"age at booking\" and \"current age\" therefore making it shape 2x2.</p>\n\n<p>Calling the <code>dataframe.info()</code> method I can see that the date and gender columns are being labeled as objects rather than relevant data what can be done to fix this so that I can attempt to run a correlation on the data?</p>\n"}, {"tags": ["python", "opencv"], "comments": [{"owner": {"reputation": 12540, "user_id": 11089932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N9t0d.jpg?s=128&g=1", "display_name": "HansHirse", "link": "https://stackoverflow.com/users/11089932/hanshirse"}, "edited": false, "score": 0, "creation_date": 1556781964, "post_id": 55944042, "comment_id": 98547647, "body": "I&#39;ve seen you wanted to embed an image of your output in your question. Nevertheless, the (hidden) link leads me to a Microsoft Live login page, thus I assume, it can&#39;t be shown properly out-of-the-box. Maybe, upload your image somewhere else, and provide a proper link!?"}, {"owner": {"reputation": 395, "user_id": 1560336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/FXiXh.png?s=128&g=1", "display_name": "Sorin Lascu", "link": "https://stackoverflow.com/users/1560336/sorin-lascu"}, "reply_to_user": {"reputation": 12540, "user_id": 11089932, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N9t0d.jpg?s=128&g=1", "display_name": "HansHirse", "link": "https://stackoverflow.com/users/11089932/hanshirse"}, "edited": false, "score": 0, "creation_date": 1556782780, "post_id": 55944042, "comment_id": 98548060, "body": "I apologize. I expected MS OneShare to work properly. I&#39;ll update the image right away. Edit: Imgur should do the trick."}], "owner": {"reputation": 395, "user_id": 1560336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/FXiXh.png?s=128&g=1", "display_name": "Sorin Lascu", "link": "https://stackoverflow.com/users/1560336/sorin-lascu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556782946, "creation_date": 1556754574, "last_edit_date": 1556782946, "question_id": 55944042, "link": "https://stackoverflow.com/questions/55944042/building-a-connection-graph-off-harris-corner-detector-output", "title": "Building a connection graph off Harris corner detector output", "body": "<p>My final intention is to build something based off this : <a href=\"https://www.researchgate.net/publication/308194022_Tifinagh_Character_Recognition_using_Harris_Corner_Detector_and_Graph_Representation\" rel=\"nofollow noreferrer\">https://www.researchgate.net/publication/308194022_Tifinagh_Character_Recognition_using_Harris_Corner_Detector_and_Graph_Representation</a> </p>\n\n<p>And I'm stuck at part 3.2, with building the adjacency matrix for the corners. The figure below is to help vizualize what I'm trying to achieve.</p>\n\n<p><img src=\"https://i.imgur.com/fyZ4nX5.png\" alt=\"Output so far\"></p>\n\n<p>Say I take that image of A and apply Harris to it and then use this code </p>\n\n<pre class=\"lang-py prettyprint-override\"><code># define the criteria to stop and refine the corners\nret, labels, stats, centroids = cv2.connectedComponentsWithStats(dst)\ncriteria = (cv2.TERM_CRITERIA_EPS + cv2.TERM_CRITERIA_MAX_ITER, 100, 0.001)\ncorners = cv2.cornerSubPix(gray,np.float32(centroids),(5,5),(-1,-1),criteria)\n\n#print corners\nfor i in range(1, len(corners)):\n    print(corners[i])\n</code></pre>\n\n<p>I get a nice list of corner coordinates that looks like this :</p>\n\n<pre><code>[51.70207 62.5541 ]\n[ 37.04742 100.78287]\n[ 66.707726 100.73132 ]\n[ 29.685337 119.28638 ]\n[ 75.62286 119.49719]\n</code></pre>\n\n<p>For reference, the image is 106 x 189. </p>\n\n<p>But how can I figure out which is  connected to which? I tried \"walking\" the image array from a corner until I run into another but this doesn't cover cases where there are multiple, like the center points in the A there. I also thought about how I can iterate over each corner and see if I can connect to others, but since they're part of the same contour they will always be able to connect.</p>\n\n<p>Any advice is appreciated.</p>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 1123584, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/47890562deeae557c4eb2669061ed4c7?s=128&d=identicon&r=PG", "display_name": "Stn", "link": "https://stackoverflow.com/users/1123584/stn"}, "edited": false, "score": 1, "creation_date": 1556758368, "post_id": 55944136, "comment_id": 98541664, "body": "Ok, let me try and repeat back what this is doing. The zip function essentially merges both variables together into a list(? - maybe a &quot;tuple&quot;). Then, with the for loop, you&#39;re iterating through each item, printing the href contents (from stick_names), only the text from stick_names, and only the text from stick_prices. Close?"}, {"owner": {"reputation": 15659, "user_id": 9448090, "user_type": "registered", "profile_image": "https://graph.facebook.com/600951510246447/picture?type=large", "display_name": "Jack Fleeting", "link": "https://stackoverflow.com/users/9448090/jack-fleeting"}, "reply_to_user": {"reputation": 327, "user_id": 1123584, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/47890562deeae557c4eb2669061ed4c7?s=128&d=identicon&r=PG", "display_name": "Stn", "link": "https://stackoverflow.com/users/1123584/stn"}, "edited": false, "score": 1, "creation_date": 1556758481, "post_id": 55944136, "comment_id": 98541689, "body": "@Stn - Right on the nose (though zip doesn&#39;t actually merge the variables; just picks one element from each). Zip is actually very useful - see more here, for example: <a href=\"https://www.geeksforgeeks.org/zip-in-python/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/zip-in-python</a>"}], "tags": [], "owner": {"reputation": 15659, "user_id": 9448090, "user_type": "registered", "profile_image": "https://graph.facebook.com/600951510246447/picture?type=large", "display_name": "Jack Fleeting", "link": "https://stackoverflow.com/users/9448090/jack-fleeting"}, "is_accepted": true, "score": 2, "last_activity_date": 1556755633, "creation_date": 1556755633, "answer_id": 55944136, "question_id": 55944041, "link": "https://stackoverflow.com/questions/55944041/cleaning-up-scraping-results-to-return-anchor-text-but-not-html/55944136#55944136", "title": "Cleaning up scraping results to return anchor text, but not HTML", "body": "<p>Not sure, but I think the following is what you may be looking for:</p>\n\n<p>Instead of <code>print(stick_prices)</code>, use:</p>\n\n<pre><code>for name,price in zip(stick_names,stick_prices):   \n       print(name[\"href\"],name.text,price.text)\n</code></pre>\n\n<p>The start of the output is:</p>\n\n<pre><code>    /collections/senior-hockey-sticks/products/ccm-ribcor-trigger-3d-sr-hockey-stick \n\n        CCM RIBCOR TRIGGER 3D SR HOCKEY STICK     \n\n$319.99\n\n/collections/senior-hockey-sticks/products/bauer-vapor-1x-lite-sr-hockey-stick \n\n        BAUER VAPOR 1X LITE SR HOCKEY STICK\n\n\n$339.99\n</code></pre>\n\n<p>etc.     </p>\n"}, {"tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": false, "score": 1, "last_activity_date": 1556780457, "creation_date": 1556780457, "answer_id": 55947189, "question_id": 55944041, "link": "https://stackoverflow.com/questions/55944041/cleaning-up-scraping-results-to-return-anchor-text-but-not-html/55947189#55947189", "title": "Cleaning up scraping results to return anchor text, but not HTML", "body": "<p>You need the .text property which you can also extract during a list comprehension. Then list/zip for a list of tuples of names/prices at end</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nurl = 'https://www.prohockeylife.com/collections/senior-hockey-sticks'\nheaders = {'user-agent': 'Mozilla/5.0'}   \npage = requests.get(url)\nsoup = BeautifulSoup(page.text, 'html.parser')\nstick_names = [item.text.strip() for item in soup.find_all(class_='product-title')]\nstick_prices = [item.text.strip() for item in soup.find_all(class_='regular-product')]\nprint(list(zip(stick_names, stick_prices)))\n</code></pre>\n"}], "owner": {"reputation": 327, "user_id": 1123584, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/47890562deeae557c4eb2669061ed4c7?s=128&d=identicon&r=PG", "display_name": "Stn", "link": "https://stackoverflow.com/users/1123584/stn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 55944136, "answer_count": 2, "score": 1, "last_activity_date": 1556780457, "creation_date": 1556754571, "question_id": 55944041, "link": "https://stackoverflow.com/questions/55944041/cleaning-up-scraping-results-to-return-anchor-text-but-not-html", "title": "Cleaning up scraping results to return anchor text, but not HTML", "body": "<p>I'm trying to scrape the prices of hockey sticks from the given URL. Eventually I'd also like to grab the names + URLs, but I don't consider that necessary to solving this.</p>\n\n<p>Here's what I've got:</p>\n\n<pre><code>import requests\nfrom pandas.io.json import json_normalize\nfrom bs4 import BeautifulSoup\n\nurl = 'https://www.prohockeylife.com/collections/senior-hockey-sticks'\nheaders = {'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/73.0.3683.103 Safari/537.36'}\n\npage = requests.get(url)\nsoup = BeautifulSoup(page.text, 'html.parser')\n\nstick_names = soup.find_all(class_='product-title')\nstick_prices = soup.find_all(class_='regular-product')\n\nprint(stick_prices)\n</code></pre>\n\n<p>The above code successfully returns prices of the hockey sticks, but it looks like this:</p>\n\n<pre><code>[&lt;p class=\"regular-product\"&gt;\n&lt;span&gt;$319.99&lt;/span&gt;\n&lt;/p&gt;, &lt;p class=\"regular-product\"&gt;\n&lt;span&gt;$339.99&lt;/span&gt;\n&lt;/p&gt;, &lt;p class=\"regular-product\"&gt;\n&lt;span&gt;$319.99&lt;/span&gt;\n</code></pre>\n\n<p>I'd like to clean it up and have only the actual price returned.</p>\n\n<p>I've tried a few things, including:</p>\n\n<pre><code>dirty_prices = soup.find_all(class_='regular-product')\nclean_prices = dirty_prices.get('a')\nprint(clean_prices)\n</code></pre>\n\n<p>But to little success. Pointers are appreciated!</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 16, "user_id": 8116658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83c05f1bfd5ece26858f9e8688683f20?s=128&d=identicon&r=PG", "display_name": "Benny Profane", "link": "https://stackoverflow.com/users/8116658/benny-profane"}, "is_accepted": true, "score": 0, "last_activity_date": 1556758790, "creation_date": 1556758790, "answer_id": 55959142, "question_id": 55959141, "link": "https://stackoverflow.com/questions/55959141/creating-recursive-function-findvalue-in-linked-list/55959142#55959142", "title": "Creating recursive function findValue() in linked list", "body": "<p>At the outset, I want to say that I'm not sure this particular question belongs on CS StackExchange - we're more about math and theory than we are about coding (though we still code, I'm sure). I'd point you to using StackOverflow or some of the more programming-oriented StackExchanges for future questions. </p>\n\n<p>With all that said, let's take a look at what's going on.</p>\n\n<p>You have a Node class which has data and a next reference (the next reference being another Node).</p>\n\n<p>You also have getters and setters for the Node class, good, good.</p>\n\n<p>Now you seem to have some sort of problem with traversal of the LinkedList - your findValue() function seems to call getData on a NoneType object - which I'm going to assume is the equivalent of <code>null</code> in Java and other languages.</p>\n\n<p>So, for your example, you know that 50 is not in the LinkedList at all. You call findValue and it recurses through your linkedList and then it mysteriously breaks...</p>\n\n<p>Switch your if-statements, so the None check comes first. What if LinkedList is a NoneType object? Then checking getData() will fail because you're calling it on something that <em>doesn't</em> have that attribute/method - and you do do this because the getData check comes before the None check. I think this is the source of the problem.</p>\n\n<p>But, in the words of Knuth - \"Beware of bugs in the above code; I have only proved it correct, not tried it.\"</p>\n\n<p>Hope this helps.</p>\n"}, {"tags": [], "owner": {"reputation": 2215, "user_id": 1689373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b36a57ad07d237603030ca54e7f4441?s=128&d=identicon&r=PG", "display_name": "Hoog", "link": "https://stackoverflow.com/users/1689373/hoog"}, "is_accepted": false, "score": 1, "last_activity_date": 1556826028, "creation_date": 1556826028, "answer_id": 55959176, "question_id": 55959141, "link": "https://stackoverflow.com/questions/55959141/creating-recursive-function-findvalue-in-linked-list/55959176#55959176", "title": "Creating recursive function findValue() in linked list", "body": "<p>This might be fixed by ordering 4 lines differently.  In these lines:</p>\n\n<pre><code>    if value == linkedList.getData():\n        return True\n    if linkedList == None:\n        return False\n</code></pre>\n\n<p>When your code gets here with <code>linkedList == None</code> it tries to find <code>.getData()</code> in an empty object BEFORE checking if the object is empty and returning false.  Reorder these and you should be good to go:</p>\n\n<pre><code>    if linkedList == None:\n        return False\n    if value == linkedList.getData():\n        return True\n</code></pre>\n"}], "migrated_from": {"other_site": {"aliases": ["http://computerscience.stackexchange.com"], "markdown_extensions": ["MathJax", "Prettify"], "launch_date": 1439905020, "open_beta_date": 1332272936, "closed_beta_date": 1331060400, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/cs/Img/apple-touch-icon@2.png", "favicon_url": "https://cdn.sstatic.net/Sites/cs/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/cs/Img/apple-touch-icon.png", "audience": "students, researchers and practitioners of computer science", "site_url": "https://cs.stackexchange.com", "api_site_parameter": "cs", "logo_url": "https://cdn.sstatic.net/Sites/cs/Img/logo.png", "name": "Computer Science", "site_type": "main_site"}, "on_date": 1556825811, "question_id": 108848}, "owner": {"reputation": 45, "user_id": 9100880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9bb924f1da18433b0bd943bc3965269?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/9100880/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 55959142, "answer_count": 2, "score": 1, "last_activity_date": 1556826028, "creation_date": 1556754558, "question_id": 55959141, "link": "https://stackoverflow.com/questions/55959141/creating-recursive-function-findvalue-in-linked-list", "title": "Creating recursive function findValue() in linked list", "body": "<p>Im trying to create a recursive function called findValue() that determines whether a given data value is in a linked list. The function returns True if the value is present and False otherwise. This is the implementation of the Node class:</p>\n\n<pre><code>class Node:\n    def __init__(self,initdata):\n        self.data = initdata\n        self.next = None\n\n    def getData(self):\n        return self.data\n\n    def getNext(self):\n        return self.next\n\n    def setData(self,newdata):\n        self.data = newdata\n\n    def setNext(self,newnext):\n        self.next = newnext\n</code></pre>\n\n<p>and this is the code that I have so far:</p>\n\n<pre><code>from Node import Node\n\ndef findValue(value, linkedList):\n    if value == linkedList.getData():\n        return True\n    if linkedList == None:\n        return False\n    else:\n        print(\"now:\", linkedList.getData())\n        print(\"next\", linkedList.getNext())\n        return findValue(value, linkedList.getNext())\n</code></pre>\n\n<p>I tried testing my code with these values:</p>\n\n<pre><code>n1 = Node(10); n2 = Node(20); n3 = Node(30); head = Node(40); n2.setNext(n1); \nn3.setNext(n2); head.setNext(n3)\n</code></pre>\n\n<p>I want my code to return False when the value given isn't in my linked list. However, when I try findValue(50, head) I get:</p>\n\n<pre><code>now: 40\nnext: &lt;Node.Node object at 0x10c410ac8&gt;\nnow: 30\nnext: &lt;Node.Node object at 0x10bf3b710&gt;\nnow: 20\nnext: &lt;Node.Node object at 0x10de5b898&gt;\nnow: 10\nnext: None\nTraceback (most recent call last):\n  File \"&lt;pyshell#34&gt;\", line 1, in &lt;module&gt;\n    findValue(50, head)\n  File \"/Users/Shared/Homework3/hw3.py\", line 29, in findValue\n    return findValue(value, linkedList.getNext())\n  File \"/Users/Shared/Homework3/hw3.py\", line 29, in findValue\n    return findValue(value, linkedList.getNext())\n  File \"/Users/Shared/Homework3/hw3.py\", line 29, in findValue\n    return findValue(value, linkedList.getNext())\n  [Previous line repeated 1 more time]\n  File \"/Users/Shared/Homework3/hw3.py\", line 22, in findValue\n    if value == linkedList.getData():\nAttributeError: 'NoneType' object has no attribute 'getData'\n</code></pre>\n\n<p>So towards the end, I see that the next value is None. Shouldn't None be the argument for the recursive call, therefore if linkedList == None: would be true, thus return False?</p>\n"}, {"tags": ["php", "python", "sympy", "mathjax", "asciimath"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1556754593, "post_id": 55944035, "comment_id": 98541047, "body": "What the heck is &quot;ASCII math notation&quot;?"}, {"owner": {"reputation": 621, "user_id": 1392897, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/77a81abd065fa0dc8e572021aad71ec2?s=128&d=identicon&r=PG", "display_name": "user1392897", "link": "https://stackoverflow.com/users/1392897/user1392897"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1556754623, "post_id": 55944035, "comment_id": 98541054, "body": "@ user2357112 Please see: <a href=\"http://asciimath.org/\" rel=\"nofollow noreferrer\">asciimath.org</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1556754943, "post_id": 55944035, "comment_id": 98541103, "body": "Here&#39;s a python library that parses AsciiMath: <a href=\"https://github.com/favalex/python-asciimathml\" rel=\"nofollow noreferrer\">github.com/favalex/python-asciimathml</a> I found it with Google, what did you try?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1556754953, "post_id": 55944035, "comment_id": 98541108, "body": "That&#39;s AsciiMath, not &quot;ASCII math notation&quot; or &quot;ASCII notation&quot;."}, {"owner": {"reputation": 621, "user_id": 1392897, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/77a81abd065fa0dc8e572021aad71ec2?s=128&d=identicon&r=PG", "display_name": "user1392897", "link": "https://stackoverflow.com/users/1392897/user1392897"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1556755000, "post_id": 55944035, "comment_id": 98541117, "body": "@user2357112 understood. I have corrected the language. thanks"}, {"owner": {"reputation": 621, "user_id": 1392897, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/77a81abd065fa0dc8e572021aad71ec2?s=128&d=identicon&r=PG", "display_name": "user1392897", "link": "https://stackoverflow.com/users/1392897/user1392897"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1556755078, "post_id": 55944035, "comment_id": 98541132, "body": "@Barmar - can python evaluate mathML expressions?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1556755265, "post_id": 55944035, "comment_id": 98541167, "body": "MathML is a markup language, not something intended to be evaluated."}, {"owner": {"reputation": 621, "user_id": 1392897, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/77a81abd065fa0dc8e572021aad71ec2?s=128&d=identicon&r=PG", "display_name": "user1392897", "link": "https://stackoverflow.com/users/1392897/user1392897"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1556755487, "post_id": 55944035, "comment_id": 98541199, "body": "@Barmar - right, so how does that library help?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1556755683, "post_id": 55944035, "comment_id": 98541229, "body": "This is some sort of sequal to: <a href=\"https://stackoverflow.com/questions/55931761/interpreting-a-python-function-from-json-data\" title=\"interpreting a python function from json data\">stackoverflow.com/questions/55931761/&hellip;</a>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1556755822, "post_id": 55944035, "comment_id": 98541253, "body": "Here&#39;s something about converting MathML to Sympy: <a href=\"https://github.com/sympy/sympy/issues/6070\" rel=\"nofollow noreferrer\">github.com/sympy/sympy/issues/6070</a> I can&#39;t tell whether there&#39;s something usable in there."}, {"owner": {"reputation": 621, "user_id": 1392897, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/77a81abd065fa0dc8e572021aad71ec2?s=128&d=identicon&r=PG", "display_name": "user1392897", "link": "https://stackoverflow.com/users/1392897/user1392897"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1556755936, "post_id": 55944035, "comment_id": 98541271, "body": "@hpaulj yes it is"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1556756484, "post_id": 55944035, "comment_id": 98541346, "body": "Someplace in its intro <code>sympy</code> explains that &#39;2x&#39; is not valid Python, as a result not valid <code>sympy</code> either.  That doesn&#39;t mean that <code>sympify</code> (or some variant) couldn&#39;t translate that.  <code>**</code> versus <code>^</code> is another Python quirk."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1556756691, "post_id": 55944035, "comment_id": 98541370, "body": "When you talk about Python interpreting an expression, are you asking about the core Python interpreter, or the <code>sympy</code> package?  <code>2*x</code> means different things depending on what <code>x</code> is.  It could be a number, a string, a list, or a <code>sympy.Symbol</code>, or a <code>numpy.ndarray</code> - or anything else that defines the relevant operator."}, {"owner": {"reputation": 621, "user_id": 1392897, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/77a81abd065fa0dc8e572021aad71ec2?s=128&d=identicon&r=PG", "display_name": "user1392897", "link": "https://stackoverflow.com/users/1392897/user1392897"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1556757704, "post_id": 55944035, "comment_id": 98541551, "body": "@hpaulj - I am asking about sympy or any other library that could parse the expression to something python could interpret"}], "answers": [{"comments": [{"owner": {"reputation": 621, "user_id": 1392897, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/77a81abd065fa0dc8e572021aad71ec2?s=128&d=identicon&r=PG", "display_name": "user1392897", "link": "https://stackoverflow.com/users/1392897/user1392897"}, "edited": false, "score": 0, "creation_date": 1556759108, "post_id": 55944427, "comment_id": 98541780, "body": "thank you for the help. and you are correct - the examples above are exactly the issue"}, {"owner": {"reputation": 621, "user_id": 1392897, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/77a81abd065fa0dc8e572021aad71ec2?s=128&d=identicon&r=PG", "display_name": "user1392897", "link": "https://stackoverflow.com/users/1392897/user1392897"}, "edited": false, "score": 0, "creation_date": 1556759443, "post_id": 55944427, "comment_id": 98541837, "body": "how would approach the issue from here? I have been researching for a few days and have had little luck devising a strategy to move forward"}, {"owner": {"reputation": 621, "user_id": 1392897, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/77a81abd065fa0dc8e572021aad71ec2?s=128&d=identicon&r=PG", "display_name": "user1392897", "link": "https://stackoverflow.com/users/1392897/user1392897"}, "edited": false, "score": 0, "creation_date": 1556761397, "post_id": 55944427, "comment_id": 98542144, "body": "thank you so much for the thorough response. you have provided excellent context and examples. I think there is enough here for me to move forward and experiment with different inputs."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 2, "last_activity_date": 1556761464, "last_edit_date": 1556761464, "creation_date": 1556758742, "answer_id": 55944427, "question_id": 55944035, "link": "https://stackoverflow.com/questions/55944035/parsing-asciimath-to-python-expression/55944427#55944427", "title": "Parsing AsciiMath to Python expression", "body": "<p>When asking a question like this, you should demonstrate the problem.  Here's what I think is happening.</p>\n\n<p>With one set of expressions, <code>sympify</code> works fine:</p>\n\n<pre><code>In [144]: sympify('2*x')==sympify('x*2')                                             \nOut[144]: True\n</code></pre>\n\n<p>But with the other pair:</p>\n\n<pre><code>In [145]: sympify('2x')==sympify('x2')                                               \n---------------------------------------------------------------------------\nSyntaxError                               Traceback (most recent call last)\n/usr/local/lib/python3.6/dist-packages/sympy/core/sympify.py in sympify(a, locals, convert_xor, strict, rational, evaluate)\n    367         a = a.replace('\\n', '')\n--&gt; 368         expr = parse_expr(a, local_dict=locals, transformations=transformations, evaluate=evaluate)\n    369     except (TokenError, SyntaxError) as exc:\n ...\nSympifyError: Sympify of expression 'could not parse '2x'' failed, because of exception being raised:\nSyntaxError: invalid syntax (&lt;string&gt;, line 1)\n</code></pre>\n\n<p>That's just for the '2x' string.  For the other string:</p>\n\n<pre><code>In [146]: sympify('x2')                                                              \nOut[146]: x\u2082\n</code></pre>\n\n<p><code>sympify</code> is expecting strings that could evaluated in a <code>sympy</code> environment </p>\n\n<blockquote>\n  <p>Converts an arbitrary expression to a type that can be used inside SymPy.</p>\n</blockquote>\n\n<p>It says <code>arbitrary</code>, but the docs are somewhat more restrictive, as described.</p>\n\n<pre><code>It currently accepts as arguments:\n   - any object defined in sympy\n   - standard numeric python types: int, long, float, Decimal\n   - strings (like \"0.09\" or \"2e-19\")\n   - booleans, including ``None`` (will leave ``None`` unchanged)\n   - lists, sets or tuples containing any of the above\n</code></pre>\n\n<p>In the context of the question that means expressions using <code>x</code> which was defined with</p>\n\n<pre><code>x = Symbol('x')\n</code></pre>\n\n<p>but ones using <code>y</code> would have problems.</p>\n\n<p>===</p>\n\n<p><code>sympify</code> produces a <code>sympy</code> expression:</p>\n\n<pre><code>In [161]: expr = sympify('2*x')                                                      \n\nIn [162]: type(expr)                                                                 \nOut[162]: sympy.core.mul.Mul\n</code></pre>\n\n<p>which can then be 'evaluated' in various ways.  I could describe this a 'modified', except <code>sympy</code> stresses that the expression is immutable.  These actions all produce new expressions or values:</p>\n\n<pre><code>In [163]: expr.subs(x,21)                                                            \nOut[163]: 42\n\nIn [164]: expr.diff(x)                                                               \nOut[164]: 2\n\nIn [165]: expr.integrate(x)                                                          \nOut[165]: \n 2\nx \n</code></pre>\n\n<p>===</p>\n\n<p>Also such an expression cannot be evaluated by the core Python interpreter,</p>\n\n<p>Define a new symbol, and expression:</p>\n\n<pre><code>In [166]: y = Symbol('y')                                                            \nIn [167]: expr = sympify('2*y')                                                      \n\nIn [168]: expr                                                                       \nOut[168]: 2\u22c5y\n</code></pre>\n\n<p>Reassigning <code>y</code> to be a Python integer, does not change the value of <code>expr</code>:</p>\n\n<pre><code>In [169]: y = 21                                                                         \nIn [170]: expr                                                                       \nOut[170]: 2\u22c5y\n</code></pre>\n\n<p>but it does allow us to evaluate a regular Python expression:</p>\n\n<pre><code>In [171]: 2*y                                                                        \nOut[171]: 42\n</code></pre>\n\n<p>But the same Python expression using <code>x</code> symbol produces a <code>sympy</code> expression:</p>\n\n<pre><code>In [172]: 2*x                                                                        \nOut[172]: 2\u22c5x\n</code></pre>\n\n<p>===</p>\n\n<p><a href=\"https://docs.sympy.org/latest/modules/parsing.html\" rel=\"nofollow noreferrer\">https://docs.sympy.org/latest/modules/parsing.html</a></p>\n\n<p>This <code>parsing</code> module has means of handling expressions like '2x'.  At least the docs show:</p>\n\n<p>(again in a <code>isympy</code> session):</p>\n\n<pre><code>In [173]: from sympy.parsing.sympy_parser import parse_expr                          \n\nIn [174]: from sympy.parsing.sympy_parser import parse_expr, standard_transformations\n     ...: , implicit_multiplication_application                                      \n\nIn [175]: transformations=(standard_transformations + (implicit_multiplication_applic\n     ...: ation,))                                                                   \n\nIn [176]: parse_expr('2x', transformations=transformations)                          \nOut[176]: 2\u22c5x\n\nIn [177]: parse_expr('x2', transformations=transformations)                          \nOut[177]: 2\u22c5x\n</code></pre>\n\n<p>So it does handle your example, but I don't know enough of <code>asciimatch</code> to know how much else works.</p>\n\n<p>That page also talks about a <code>LaTeX</code> parser, <a href=\"https://docs.sympy.org/latest/modules/parsing.html#experimental-latex-parsing\" rel=\"nofollow noreferrer\">https://docs.sympy.org/latest/modules/parsing.html#experimental-latex-parsing</a></p>\n"}], "owner": {"reputation": 621, "user_id": 1392897, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/77a81abd065fa0dc8e572021aad71ec2?s=128&d=identicon&r=PG", "display_name": "user1392897", "link": "https://stackoverflow.com/users/1392897/user1392897"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "accepted_answer_id": 55944427, "answer_count": 1, "score": -1, "last_activity_date": 1586371378, "creation_date": 1556754521, "last_edit_date": 1556755612, "question_id": 55944035, "link": "https://stackoverflow.com/questions/55944035/parsing-asciimath-to-python-expression", "title": "Parsing AsciiMath to Python expression", "body": "<p>I am attempting to pass 2 functions to a python script via JSON in order to evaluate their equivalence. The issue I am having is that the input is in <a href=\"http://asciimath.org/\" rel=\"nofollow noreferrer\">AsciiMath</a> notation. It seems <code>sympify</code> has no issue parsing the expressions from the strings if the format is consistent with that of Python expressions. Is there a way to parse AsciiMath notation into something Python can interpret? I have been unable to find any libraries that offer such a feature.</p>\n\n<p>PHP:</p>\n\n<pre><code>$data = array(\"2*x\", \"x*2\"); // returns true as expected\n$data = array(\"2x\", \"x2\"); // AsciiMath notation does not work\n$result = shell_exec('python /path/check.py ' . escapeshellarg(json_encode($data)));\n</code></pre>\n\n<p>Python:</p>\n\n<pre><code>import sys, json\nfrom sympy import *\n\n# Load the json data sent from PHP\ntry:\n    data = json.loads(sys.argv[1])\nexcept:\n    sys.exit(1)\n\nx = Symbol('x')\n\n# Convert string inputs to expressions\nuser_response = sympify(data[0])\ncorrect_answer = sympify(data[1])\n\n# Perform equivalence comparison\nresult = user_response == correct_answer\n\n# Return result\nprint json.dumps(result)\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "row"], "comments": [{"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "edited": false, "score": 0, "creation_date": 1556838969, "post_id": 55944027, "comment_id": 98574217, "body": "What does the original df look like?"}, {"owner": {"reputation": 87, "user_id": 9817441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e654308644f7ad4c146a485acec893?s=128&d=identicon&r=PG", "display_name": "ManuelVillamil", "link": "https://stackoverflow.com/users/9817441/manuelvillamil"}, "reply_to_user": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "edited": false, "score": 0, "creation_date": 1556957794, "post_id": 55944027, "comment_id": 98610929, "body": "It is the same table but only with the columns Compensation and initial_Value."}], "answers": [{"tags": [], "owner": {"reputation": 1055, "user_id": 3805553, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QQryi.png?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/3805553/chris"}, "is_accepted": false, "score": 0, "last_activity_date": 1557048132, "creation_date": 1557048132, "answer_id": 55990493, "question_id": 55944027, "link": "https://stackoverflow.com/questions/55944027/how-to-pass-a-value-from-one-row-to-the-next-one-in-pandas-python-and-use-it-t/55990493#55990493", "title": "How to pass a value from one row to the next one in pandas + python and use it to calculate the same following value recursively", "body": "<p>You can use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.apply.html\" rel=\"nofollow noreferrer\">apply</a> to create your customised operations. I've made a dummy dataset as you didn't provide the initial dataframe.</p>\n\n<pre><code>from itertools import zip_longest\n\n# dummy data\ndf = pd.DataFrame(np.random.randint(1, 10, (8, 5)),\n                  columns=['compensation', 'initial_value',\n                           'remained', 'value', 'value_compensed'],)\ndf.loc[0] = 0,0,0,0,0\n\n&gt;&gt;&gt; print(df)\n   compensation  initial_value  remained  value  value_compensed\n0             0              0         0      0                0\n1             2              9         1      9                7\n2             1              4         9      8                3\n3             3              4         5      7                6\n4             3              2         5      5                6\n5             9              1         5      2                4\n6             4              5         9      8                2\n7             1              6         9      6                8\n</code></pre>\n\n<p>Use apply (<code>axis=1</code>) to do row-wise iteration, where you use the initial dataframe as an argument, from which you can then get the previous row <code>x.name-1</code> and do your calculations. Not sure if I fully understood the intended result, but you can adjust the individual calculations of the different columns in the function.</p>\n\n<pre><code>def f(x, data):\n    if x.name == 0:\n        return [0,]*data.shape[1]\n    else:\n        x_remained = data.loc[x.name-1]['value_compensed']\n        x_value = data.loc[x.name-1]['initial_value'] + x_remained\n        x_compensed = x_value - x['compensation']\n\n        return [x['compensation'], x['initial_value'], x_remained, \\\n               x_value, x_compensed]\n\nadj = df.apply(f, args=(df,), axis=1)\nadj = pd.DataFrame.from_records(zip_longest(*adj.values), index=df.columns).T\n\n&gt;&gt;&gt; print(adj)\n   compensation  initial_value  remained  value  value_compensed\n0             0              0         0      0                0\n1             5              9         0      0               -5\n2             5              7         4     13                8\n3             7              9         1      8                1\n4             6              6         5     14                8\n5             4              9         6     12                8\n6             2              4         2     11                9\n7             9              2         6     10                1\n</code></pre>\n"}], "owner": {"reputation": 87, "user_id": 9817441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0e654308644f7ad4c146a485acec893?s=128&d=identicon&r=PG", "display_name": "ManuelVillamil", "link": "https://stackoverflow.com/users/9817441/manuelvillamil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 335, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1557048132, "creation_date": 1556754478, "question_id": 55944027, "link": "https://stackoverflow.com/questions/55944027/how-to-pass-a-value-from-one-row-to-the-next-one-in-pandas-python-and-use-it-t", "title": "How to pass a value from one row to the next one in pandas + python and use it to calculate the same following value recursively", "body": "<p>This is my desired output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZfvPb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZfvPb.png\" alt=\"enter image description here\"></a></p>\n\n<p>I am trying to calculate the column <code>df[Value]</code> and <code>df[Value_Compensed]</code>. However, to do that, I need to consider  the previous value of the row <code>df[Value_Compensed]</code>. In terms of my table:</p>\n\n<ul>\n<li>The first row all the values are 0</li>\n<li>The following rows: <code>df[Remained] = previous df[Value_compensed]</code>. Then <code>df[Value] = df[Initial_value] + df[Remained]</code>. Then <code>df[Value_Compensed] = df[Value] - df[Compensation]</code></li>\n</ul>\n\n<p>...And So on... </p>\n\n<p>I am struggling to pass the value of Value_Compensed from one row to the next, I tried with the function shift() but as you can see in the following image the values in <code>df[Value_Compensed]</code> are not correct due to it is not a static value and also it also changes after each row it did not work. Any Idea??</p>\n\n<p><a href=\"https://i.stack.imgur.com/6SWFL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6SWFL.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thanks.</p>\n\n<p>Manuel. </p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 325, "user_id": 3411757, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/B4nWJ.gif?s=128&g=1", "display_name": "oymonk", "link": "https://stackoverflow.com/users/3411757/oymonk"}, "edited": false, "score": 0, "creation_date": 1556754666, "post_id": 55944036, "comment_id": 98541062, "body": "It works!  thank you.  I just have to wait 10 mins to accept your answer"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1556754525, "creation_date": 1556754525, "answer_id": 55944036, "question_id": 55944014, "link": "https://stackoverflow.com/questions/55944014/retrieve-multiple-lookup-values-in-large-dataset/55944036#55944036", "title": "Retrieve multiple lookup values in large dataset?", "body": "<p>IIUC first <code>agg</code> and <code>join</code> with <code>df1</code> then <code>reindex</code> using <code>df2</code> </p>\n\n<pre><code>df1.groupby('Hash')['Name'].agg(','.join).reindex(df2.Hash).reset_index()\n     Hash     Name\n0  138249      Cat\n1  103669  Cat,Cat\n2  191826      Cat\n3  196655  Cat,Dog\n4  116780      Dog\n5  184831      Dog\n6  114333      Dog\n7  123757      Dog\n</code></pre>\n"}], "owner": {"reputation": 325, "user_id": 3411757, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/B4nWJ.gif?s=128&g=1", "display_name": "oymonk", "link": "https://stackoverflow.com/users/3411757/oymonk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 55944036, "answer_count": 1, "score": 1, "last_activity_date": 1556754525, "creation_date": 1556754343, "question_id": 55944014, "link": "https://stackoverflow.com/questions/55944014/retrieve-multiple-lookup-values-in-large-dataset", "title": "Retrieve multiple lookup values in large dataset?", "body": "<p>I have two dataframes:</p>\n\n<pre><code>import pandas as pd\ndata = [['138249','Cat']\n,['103669','Cat']\n,['191826','Cat']\n,['196655','Cat']\n,['103669','Cat']\n,['116780','Dog']\n,['184831','Dog']\n,['196655','Dog']\n,['114333','Dog']\n,['123757','Dog']]\n\n\ndf1 = pd.DataFrame(data, columns = ['Hash','Name'])\n\nprint(df1)\n\ndata2 = [\n'138249',\n'103669',\n'191826',\n'196655',\n'116780',\n'184831',\n'114333',\n'123757',]\n\ndf2 = pd.DataFrame(data2, columns = ['Hash'])\n</code></pre>\n\n<p>I want to write a code that will take the item in the second dataframe, scan the leftmost values in the first dataframe, then return all matching values from the first dataframe into a single cell in the second dataframe. </p>\n\n<p>Here's the result I am aiming for: </p>\n\n<p><a href=\"https://i.stack.imgur.com/kMyQa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kMyQa.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here's what I have tried: </p>\n\n<pre><code>#attempt one: use groupby to squish up the dataset.  No results\n\npast = df1.groupby('Hash')\n\nprint(past)\n\n#attempt two: use merge.  Result: empty dataframe\n\npast1 = pd.merge(df1, df2, right_index=True, left_on='Hash')\n\nprint(past1)\n\n#attempt three: use pivot.  Result: not the right format.  \n\npast2 = df1.pivot(index = None, columns = 'Hash', values = 'Name')\n\nprint(past2)\n</code></pre>\n\n<p>I can do this in Excel with the VBA code <a href=\"https://www.get-digital-help.com/2010/12/20/excel-udf-lookup-and-return-multiple-values-concatenated-into-one-cell/\" rel=\"nofollow noreferrer\">here</a>  but this code crashes when I apply to my real dataset (likely because it is too big - approximately  30,000 rows long)</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1556754873, "post_id": 55943982, "comment_id": 98541090, "body": "Just curious about whether you consider the speed of the code or not"}, {"owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1556755068, "post_id": 55943982, "comment_id": 98541129, "body": "In this case, I was worried about showing them the issue with their code. Sometimes I try to fix the mistakes, other times I try to inform of a better way. Though I do appreciate when I get to learn new things from your comments and answers. Also, I only really care about the speed of the code if the problem set is long enough to make speed an issue. Otherwise, readability is also good."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1556755132, "post_id": 55943982, "comment_id": 98541143, "body": "Ok that is fair enough :-)"}], "tags": [], "owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1556753999, "creation_date": 1556753999, "answer_id": 55943982, "question_id": 55943967, "link": "https://stackoverflow.com/questions/55943967/check-if-a-columns-contains-any-str-from-list/55943982#55943982", "title": "check if a columns contains any str from list", "body": "<p>Flip your iterables</p>\n\n<pre><code>df_data['cats'] = df_data.apply(lambda row: True if any([item in row['animals'] for item in cats]) else False, axis = 1)\n\nprint(df_data)\n#    A       animals   cats\n# 0  2     cat, frog   True\n# 1  1  kitten, fish   True\n# 2  3   frog2, fish  False\n</code></pre>\n\n<p>If you look closely</p>\n\n<pre><code>item in row['animals'] for item in cats\n</code></pre>\n\n<p>will iterate over <code>cats</code> and see if the item is in <code>row['animals']</code></p>\n\n<pre><code>item in cats for item in row['animals']\n</code></pre>\n\n<p>will iterate over <code>row['animals']</code> and see if the value of <code>row['animals']</code> is in the cats list</p>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1556754702, "creation_date": 1556754702, "answer_id": 55944053, "question_id": 55943967, "link": "https://stackoverflow.com/questions/55943967/check-if-a-columns-contains-any-str-from-list/55944053#55944053", "title": "check if a columns contains any str from list", "body": "<p>With pandas you should try your best not using for loop or apply , I am using <code>DataFrame</code> constructor with <code>isin</code> and <code>any</code>  </p>\n\n<pre><code>df_data['cats']=pd.DataFrame(df_data.animals.str.split(', ').tolist()).isin(cats).any(1)\ndf_data\n   A       animals   cats\n0  2     cat, frog   True\n1  1  kitten, fish   True\n2  3   frog2, fish  False\n</code></pre>\n"}], "owner": {"reputation": 70, "user_id": 7988145, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwHs.jpg?s=128&g=1", "display_name": "cat_on_the_mat", "link": "https://stackoverflow.com/users/7988145/cat-on-the-mat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556754702, "creation_date": 1556753867, "question_id": 55943967, "link": "https://stackoverflow.com/questions/55943967/check-if-a-columns-contains-any-str-from-list", "title": "check if a columns contains any str from list", "body": "<p>I try to use any() to check if the column contains any string from the list and make a new column with the corresponding results</p>\n\n<pre><code>df_data = pd.DataFrame({'A':[2,1,3], 'animals': ['cat, frog', 'kitten, fish', 'frog2, fish']})\ncats = ['kitten', 'cat']\ndf_data['cats'] = df_data.apply(lambda row: True if any(item in cats for item in row['animals']) else False, axis = 1)\n</code></pre>\n\n<p>I got these results, and I don't understand why it is False for the first two rows :</p>\n\n<pre><code>   A       animals   cats\n0  2     cat, frog  False\n1  1  kitten, fish  False\n2  3   frog2, fish  False\n</code></pre>\n\n<p>I expect to get False for the last row only</p>\n"}, {"tags": ["python", "tkinter", "combobox"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1556756792, "post_id": 55943959, "comment_id": 98541388, "body": "show minimal working code with your problem so we could run it and see it. This part of code seems OK."}], "answers": [{"tags": [], "owner": {"reputation": 18119, "user_id": 9284423, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zakui.png?s=128&g=1", "display_name": "Henry Yik", "link": "https://stackoverflow.com/users/9284423/henry-yik"}, "is_accepted": false, "score": 0, "last_activity_date": 1556762861, "creation_date": 1556762861, "answer_id": 55944828, "question_id": 55943959, "link": "https://stackoverflow.com/questions/55943959/python-tkinter-multiple-comboboxes-copying-eachothers-selected-value/55944828#55944828", "title": "Python TkInter - Multiple Comboboxes copying eachother&#39;s selected value", "body": "<p>You passed <code>text</code> parameter to both combobox. I believe what you meant is <code>font</code> instead.</p>\n\n<pre><code>subjects = ttk.Combobox(root,font = (\"Arial\",20), width = 60,height =40)\nquestions = ttk.Combobox(root,font = (\"Arial\",20), width = 60,height = 40)\n</code></pre>\n\n<p>By using <code>text</code> you actually created a common <code>textvariable</code> for both combobox. You can check by calling <code>subjects.config()</code> and <code>questions.config()</code>.</p>\n"}], "owner": {"reputation": 67, "user_id": 8074878, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/36495a672dca84ca0891cabbfde2f94c?s=128&d=identicon&r=PG&f=1", "display_name": "Esteb37", "link": "https://stackoverflow.com/users/8074878/esteb37"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 513, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556762861, "creation_date": 1556753816, "question_id": 55943959, "link": "https://stackoverflow.com/questions/55943959/python-tkinter-multiple-comboboxes-copying-eachothers-selected-value", "title": "Python TkInter - Multiple Comboboxes copying eachother&#39;s selected value", "body": "<p>I am writing a simple GUI with Tkinter in Python. I need two different comboboxes. However, when I select a value on the first combobox, for some reason it writes that value onto the second, and viceversa, as if they were linked.\nHow can I unlink them?\nHere is my code.</p>\n\n<pre><code>subjects = Combobox(frame_answer,text = (\"Arial\",20), width = 60,height =40) \nsubjects.grid(row = 20, column = 50)\nquestions = Combobox(frame_answer,text = (\"Arial\",20), width = 60,height = 40)\nquestions.grid(row = 40, column = 50)\nquestions[\"values\"] = [\"Select\",\"Question1\",\"Queston2\",\"Question3\"]\nsubjects[\"values\"] = [\"Select\",\"Math\",\"Science\",\"Spanish\"]\n</code></pre>\n"}, {"tags": ["python", "pdb"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1556754376, "post_id": 55943957, "comment_id": 98541017, "body": "Why do you want to do that? You can&#39;t set breakpoints or do much of anything useful with pdb that way. It&#39;s mostly equivalent to just running the script without pdb."}, {"owner": {"reputation": 1257, "user_id": 271388, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/EpdsS.png?s=128&g=1", "display_name": "CrabMan", "link": "https://stackoverflow.com/users/271388/crabman"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1556754420, "post_id": 55943957, "comment_id": 98541024, "body": "I want to enter debugger if an exception is raised."}], "answers": [{"tags": [], "owner": {"reputation": 1257, "user_id": 271388, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/EpdsS.png?s=128&g=1", "display_name": "CrabMan", "link": "https://stackoverflow.com/users/271388/crabman"}, "is_accepted": false, "score": 2, "last_activity_date": 1556754218, "creation_date": 1556754218, "answer_id": 55943997, "question_id": 55943957, "link": "https://stackoverflow.com/questions/55943957/python-m-pdb-myscript-py-how-to-automatically-continue-after-start/55943997#55943997", "title": "`python -m pdb myscript.py` - how to automatically &quot;continue&quot; after start?", "body": "<pre><code>python -m pdb -c continue myscript.py some_argument another_argument\n</code></pre>\n\n<p>From pdb docs:</p>\n\n<blockquote>\n  <p><em>pdb.py</em> accepts a <code>-c</code> option that executes commands as if given in a <em>.pdbrc</em> file, see <a href=\"https://docs.python.org/3/library/pdb.html#debugger-commands\" rel=\"nofollow noreferrer\">Debugger Commands</a>.</p>\n</blockquote>\n"}], "owner": {"reputation": 1257, "user_id": 271388, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/EpdsS.png?s=128&g=1", "display_name": "CrabMan", "link": "https://stackoverflow.com/users/271388/crabman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556754218, "creation_date": 1556753803, "question_id": 55943957, "link": "https://stackoverflow.com/questions/55943957/python-m-pdb-myscript-py-how-to-automatically-continue-after-start", "title": "`python -m pdb myscript.py` - how to automatically &quot;continue&quot; after start?", "body": "<p>When running a python with pdb, like</p>\n\n<pre><code>python -m pdb myscript.py some_arg another_arg\n</code></pre>\n\n<p>I don't want it to ask me what to do. I want it to \"continue\" immediately. Is there a way to do that? Is there a way to do that without editing the global pdb configuration in <em>~/.pdbrc</em>?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 2, "creation_date": 1556753904, "post_id": 55943950, "comment_id": 98540929, "body": "<code>newarr = sequence</code> This doesn&#39;t do what you think.  It does not create a new copy of <code>sequence</code>."}, {"owner": {"reputation": 65, "user_id": 7869295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/te8cb.jpg?s=128&g=1", "display_name": "Pawe\u0142 D\u0142ugosz", "link": "https://stackoverflow.com/users/7869295/pawe%c5%82-d%c5%82ugosz"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1556753947, "post_id": 55943950, "comment_id": 98540937, "body": "so what should i do instead? what does it do?"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1556754119, "post_id": 55943950, "comment_id": 98540969, "body": "It makes the <code>newarr</code> variable point to the same list in memory as <code>sequence</code> - so when you <code>del</code> an item from <code>newarr</code>, that affects <code>sequence</code> too. To make a copy, try <code>newarr = sequence[:]</code> or <code>newarr = sequence.copy()</code>"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1556754172, "post_id": 55943950, "comment_id": 98540980, "body": "Ref: <a href=\"https://stackoverflow.com/questions/2612802/how-to-clone-or-copy-a-list\" title=\"how to clone or copy a list\">stackoverflow.com/questions/2612802/how-to-clone-or-copy-a-l&zwnj;&#8203;ist</a>"}, {"owner": {"reputation": 65, "user_id": 7869295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/te8cb.jpg?s=128&g=1", "display_name": "Pawe\u0142 D\u0142ugosz", "link": "https://stackoverflow.com/users/7869295/pawe%c5%82-d%c5%82ugosz"}, "edited": false, "score": 0, "creation_date": 1556754234, "post_id": 55943950, "comment_id": 98540993, "body": "Yeah, thanks, that worked"}], "owner": {"reputation": 65, "user_id": 7869295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/te8cb.jpg?s=128&g=1", "display_name": "Pawe\u0142 D\u0142ugosz", "link": "https://stackoverflow.com/users/7869295/pawe%c5%82-d%c5%82ugosz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556753853, "creation_date": 1556753718, "last_edit_date": 1556753853, "question_id": 55943950, "link": "https://stackoverflow.com/questions/55943950/list-assignment-index-out-of-range-codesignal", "title": "list assignment index out of range codesignal", "body": "<p>I'm trying to relax on CodeSignal but i got this</p>\n\n<pre><code>\"Traceback (most recent call last):\n  main.py3\n in the pre-written template, in getUserOutputs\n    userOutput = _runjpmds(testInputs[i])\n  main.py3\n in the pre-written template, in _runjpmds\n    return almostIncreasingSequence(*_fArgs_fnlehdkfpkip)\n  main.py3\n on line 13, in almostIncreasingSequence\n    del(newarr[i])\nIndexError: list assignment index out of range\n</code></pre>\n\n<p>But why?</p>\n\n<pre><code>def ifgood(arr):\nfor i in range(0, len(arr)-1):\n    if arr[i+1] - arr[i] &lt;= 0:\n        return False\nreturn True\n\ndef almostIncreasingSequence(sequence):\n    if len(sequence) == 1:\n        return True\n    for i in range(0, len(sequence)):\n        newarr = sequence\n        del(newarr[i])\n        if ifgood(newarr) == True:\n            return True\n    return False\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "edited": false, "score": 0, "creation_date": 1556753797, "post_id": 55943944, "comment_id": 98540904, "body": "What output are you getting?"}, {"owner": {"reputation": 15, "user_id": 11122256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b2d7c915f0c6e211edbccf164f57316?s=128&d=identicon&r=PG&f=1", "display_name": "12345", "link": "https://stackoverflow.com/users/11122256/12345"}, "reply_to_user": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "edited": false, "score": 0, "creation_date": 1556755776, "post_id": 55943944, "comment_id": 98541246, "body": "I guess the issue is that I am not getting any input so I&#39;m unsure if the program is working or not."}, {"owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "edited": false, "score": 0, "creation_date": 1556755874, "post_id": 55943944, "comment_id": 98541260, "body": "I take that to mean you&#39;re not getting an error stack trace as well?"}, {"owner": {"reputation": 15, "user_id": 11122256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b2d7c915f0c6e211edbccf164f57316?s=128&d=identicon&r=PG&f=1", "display_name": "12345", "link": "https://stackoverflow.com/users/11122256/12345"}, "reply_to_user": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "edited": false, "score": 0, "creation_date": 1556756002, "post_id": 55943944, "comment_id": 98541283, "body": "Yes, sorry I forgot to mention that as well."}], "answers": [{"tags": [], "owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "is_accepted": true, "score": 0, "last_activity_date": 1556756908, "creation_date": 1556756908, "answer_id": 55944255, "question_id": 55943944, "link": "https://stackoverflow.com/questions/55943944/program-that-takes-a-set-of-letters-from-the-user-and-prints-out-all-of-the-comb/55944255#55944255", "title": "Program that takes a set of letters from the user and prints out all of the combinations of valid words from a separate Dictionary file", "body": "<p>Here is a working example of a function to find the anagrams of the characters entered. You can put a counter in and use <code>break</code> to exit the loop when you want. I trust the user input is working alright</p>\n\n<pre><code>dictionary_file = '/usr/share/dict/american-english' # Ubuntu's dictionary file\n\ndef anagrams(chars, dictionary_file):\n\n    with open(dictionary_file) as f:\n\n        # iterate through the dictionary file one line at a time\n        for line in f:\n\n            # Check to see that all characters are in there and the length matches\n            if all(c in line for c in chars) and (len(line.strip()) == len(chars)):\n\n                # Present the match\n                print(line.strip())\n\n\nanagrams('ritd', dictionary_file)\n# dirt\n</code></pre>\n\n<p>if you want to capture the results and then process them some other way, you can change <code>print()</code> to <code>yield</code> and iterate over the generator. (this is like iterating over <code>range(42)</code>.</p>\n\n<pre><code>def anagrams(chars, dictionary_file):\n\n    with open(dictionary_file) as f:\n        for line in f:\n            if all(c in line for c in chars) and (len(line.strip()) == len(chars)):\n                yield line.strip()\n\n\nfor match in anagrams('ritd', dictionary_file):\n    print(match)\n# dirt\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 11122256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b2d7c915f0c6e211edbccf164f57316?s=128&d=identicon&r=PG&f=1", "display_name": "12345", "link": "https://stackoverflow.com/users/11122256/12345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14, "favorite_count": 0, "accepted_answer_id": 55944255, "answer_count": 1, "score": 1, "last_activity_date": 1556759477, "creation_date": 1556753665, "last_edit_date": 1556759477, "question_id": 55943944, "link": "https://stackoverflow.com/questions/55943944/program-that-takes-a-set-of-letters-from-the-user-and-prints-out-all-of-the-comb", "title": "Program that takes a set of letters from the user and prints out all of the combinations of valid words from a separate Dictionary file", "body": "<p>I am having trouble with my current program that is supposed to take letters from user input, check them against a dictionary file that I already have, then return the possible words that can be made from the series of letters. Then, user input is supposed to dictate how many words are actually returned. I am new to python and am having trouble on how to check the letters against the dictionary file. I would really appreciate any and all help!</p>\n\n<p>This is what I have so far:</p>\n\n<pre><code>def find_words (letters, dictionary):\n    dictionary = open ('enable1.txt', 'r')\n    r = dictionary.read()\n    dictionary.close()\n    dict = dictionary (word)\n    w = 1\n    for k in dict.keys():\n        if k not in dictionary:\n            w = 0\n        if w == 1:\n            print (word)\n\nprint (find_words (['e', 'u', 'c', 'i']))\n\ndef main ():\n    letters = int (input (\"please enter some letters... at least 1, but no more than 7\\n&gt;\"))\n    if letters &lt; 1 and letters &gt; 7:\n        print (letters)\n    try:    \n       num_words = int (input (\"What is the maximum number of words to display?\\n&gt;\"))\n  except ValueError:\n       print ()\n</code></pre>\n\n<p>The desired output should look something like this:</p>\n\n<pre><code>Please enter some letters... at least 1, but no more than 7\n&gt; 123\nPlease enter some letters... at least 1, but no more than 7\n&gt;\nPlease enter some letters... at least 1, but no more than 7\n&gt; abcdefghijklmnop\nPlease enter some letters... at least 1, but no more than 7\n&gt; tdri\n\nWhat is the maximum number of words to display?\n&gt; 1\nShowing max 1 results:\ndirt\n</code></pre>\n"}, {"tags": ["python", "flask", "flask-wtforms"], "comments": [{"owner": {"reputation": 15, "user_id": 7358240, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QdetkXT9_v8/AAAAAAAAAAI/AAAAAAAAAEE/JvhviiN00wg/photo.jpg?sz=128", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/7358240/jonathan"}, "edited": false, "score": 0, "creation_date": 1556753789, "post_id": 55943912, "comment_id": 98540903, "body": "<code>for key in formData.keys():             app.logger.info(key)             app.logger.info(&#39;===================&#39;)         for value in formData.values():             # app.logger.info(formData[value])             app.logger.info(value)             app.logger.info(&#39;===================&#39;)</code> still skips all tags after the first one."}, {"owner": {"reputation": 1772, "user_id": 2421817, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/GFWOi.jpg?s=128&g=1", "display_name": "kerwei", "link": "https://stackoverflow.com/users/2421817/kerwei"}, "edited": false, "score": 0, "creation_date": 1556762448, "post_id": 55943912, "comment_id": 98542316, "body": "I believe if your key has multiple values then you need to access it by the <code>getlist()</code> function. <code>formData.getlist(&#39;tags&#39;) &gt; [u&#39;Health&#39;, u&#39;Local Community&#39;, u&#39;Regional News&#39;]</code>."}], "owner": {"reputation": 15, "user_id": 7358240, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QdetkXT9_v8/AAAAAAAAAAI/AAAAAAAAAEE/JvhviiN00wg/photo.jpg?sz=128", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/7358240/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556753386, "creation_date": 1556753386, "question_id": 55943912, "link": "https://stackoverflow.com/questions/55943912/call-all-dictionary-values-with-the-same-key-in-flask", "title": "Call all dictionary values with the same key in Flask", "body": "<p>I have a selectpicker multiple checklist of \"tags\" that you can add to a large form. When that form is submitted to the Flask Server, it sees that multiple \"tags\" are coming, but none of the code I write selects all of the values, just the first one. </p>\n\n<p>Here is an example form submitted:</p>\n\n<p><code>ImmutableMultiDict([('Page', u'Generic'), ('tags', u'Health'), ('tags', u'Local Community'), ('tags', u'Regional News'), ('author', u'Author Name'), ('Title', u'Title Name')])</code></p>\n\n<p>When I try to iterate over the Dictionary I get:</p>\n\n<pre><code>for value in formData.keys():\n            print formData[value]\n\n&gt; Generic\n&gt; Health\n&gt; Author Name\n&gt; Title Name``` \n\nI am missing \"local Community\" and \"Regional News\"\n</code></pre>\n"}, {"tags": ["python", "pandas", "data-visualization", "categorical-data"], "answers": [{"comments": [{"owner": {"reputation": 603, "user_id": 9473446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e62e126a3a6ea4f956453c444557b7?s=128&d=identicon&r=PG&f=1", "display_name": "srkdb", "link": "https://stackoverflow.com/users/9473446/srkdb"}, "edited": false, "score": 0, "creation_date": 1557942621, "post_id": 55944115, "comment_id": 98939316, "body": "If we remove col = &#39;Outcome&#39;, how do we differentiate between Fail/Pass on the same graph? I&#39;m trying to get all the 4 sets of information meaningfully."}, {"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "reply_to_user": {"reputation": 603, "user_id": 9473446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e62e126a3a6ea4f956453c444557b7?s=128&d=identicon&r=PG&f=1", "display_name": "srkdb", "link": "https://stackoverflow.com/users/9473446/srkdb"}, "edited": false, "score": 0, "creation_date": 1557947410, "post_id": 55944115, "comment_id": 98941391, "body": "See edit, they will both be on same graph, with different markers showing pass or fail."}], "tags": [], "owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "is_accepted": true, "score": 1, "last_activity_date": 1557947335, "last_edit_date": 1557947335, "creation_date": 1556755331, "answer_id": 55944115, "question_id": 55943909, "link": "https://stackoverflow.com/questions/55943909/relative-data-visualization-in-pandas/55944115#55944115", "title": "Relative data visualization in pandas", "body": "<pre><code>import matplotlib.pyplot as plt\nimport seaborn as sns\n\nsns.catplot(x = 'Event', y = 'Duration', hue = 'Machine', col = 'Outcome', data = df)\n</code></pre>\n\n<p>Give this a try, its two scatter plots. X axis is the event, y axis is Duration, color of the dots is based on the machine, and there is two graphs, one for fail and next to it is another for pass. \"df\" is your dataframe. You can remove <code>col = 'Outcome'</code> to have both Fail and Pass on the same graph.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<pre><code>fig, ax = plt.subplots(figsize = (10,10))\ng = sns.scatterplot(x = 'Event', y = 'Duration', hue = 'Machine', data = df[df['Outcome'] == 'PASS'], ax = ax)\ng = sns.scatterplot(x = 'Event', y = 'Duration', hue = 'Machine', data = df[df['Outcome'] == 'FAIL'], ax = ax, \n                    style = 'Machine', markers = ['x', 'x', 'x'])\n\nhandles, labels = ax.get_legend_handles_labels()\nax.legend(handles, ['Machine - Pass', 'a' ,'b', 'c', 'Machine - Fail', 'a','b','c'])\n\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 603, "user_id": 9473446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69e62e126a3a6ea4f956453c444557b7?s=128&d=identicon&r=PG&f=1", "display_name": "srkdb", "link": "https://stackoverflow.com/users/9473446/srkdb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 55944115, "answer_count": 1, "score": 0, "last_activity_date": 1557947335, "creation_date": 1556753347, "question_id": 55943909, "link": "https://stackoverflow.com/questions/55943909/relative-data-visualization-in-pandas", "title": "Relative data visualization in pandas", "body": "<p>I have some data as follows: </p>\n\n<pre><code>+---------+-------+---------+----------------+\n| Machine | Event | Outcome | Duration Total |\n+---------+-------+---------+----------------+\n| a       |     1 | FAIL    |           1127 |\n| a       |     2 | FAIL    |          56099 |\n| a       |     2 | PASS    |          15213 |\n| a       |     3 | FAIL    |          13891 |\n| a       |     3 | PASS    |          13934 |\n| a       |     4 | FAIL    |           6844 |\n| a       |     5 | FAIL    |           6449 |\n| b       |     1 | FAIL    |          21331 |\n| b       |     2 | FAIL    |          30362 |\n| b       |     3 | FAIL    |          12194 |\n| b       |     3 | PASS    |           7390 |\n| b       |     4 | FAIL    |          35472 |\n| b       |     4 | PASS    |           7731 |\n| b       |     5 | FAIL    |           7654 |\n| c       |     1 | FAIL    |          16833 |\n| c       |     1 | PASS    |          21337 |\n| c       |     2 | FAIL    |            440 |\n| c       |     2 | PASS    |          14320 |\n| c       |     3 | FAIL    |           5281 |\n+---------+-------+---------+----------------+\n</code></pre>\n\n<p>I'm trying to make a categorical scatter plot of total duration of each event and each machine. Or any other visualization to analyze them relatively. </p>\n\n<p>What would be a good choice and how to go about it? </p>\n"}, {"tags": ["python", "selenium", "selenium-chromedriver", "webdriverwait", "error-checking"], "comments": [{"owner": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "edited": false, "score": 1, "creation_date": 1556764751, "post_id": 55943908, "comment_id": 98542750, "body": "the version of selenium you are using is extremely out of date.. I&#39;m surprised it works at all with that version of chromium.  You should install the latest from PyPI with pip."}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "reply_to_user": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "edited": false, "score": 0, "creation_date": 1556765378, "post_id": 55943908, "comment_id": 98542847, "body": "Thanks Corey. Yeah, aged software sounds about par for the course. I don&#39;t want Pip on the system. It caused too many problems for me on a production web server I have to run. Eventually I found the bug reports on their GitHub, and the issues were closed as won&#39;t fix and comments like the user has to fix them. I despise the broken tool."}, {"owner": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "edited": false, "score": 0, "creation_date": 1556903874, "post_id": 55943908, "comment_id": 98599686, "body": "pip comes bundled already with newer versions of python, so you likel have it installed..  you can can also install the latest selenium without pip."}], "answers": [{"comments": [{"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1556759302, "post_id": 55944320, "comment_id": 98541813, "body": "Thanks. I&#39;m definitely not seeing an uncaught exception. Forgive my ignorance... Does Python only throw if there is a handler in place? My script is at <a href=\"https://pastebin.com/8fPGMXQt\" rel=\"nofollow noreferrer\">ftc-chrome.py</a> if you need to run it."}], "tags": [], "owner": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "is_accepted": false, "score": 1, "last_activity_date": 1556757812, "last_edit_date": 1556757812, "creation_date": 1556757461, "answer_id": 55944320, "question_id": 55943908, "link": "https://stackoverflow.com/questions/55943908/how-to-detect-a-button-click-failure-in-selenium/55944320#55944320", "title": "How to detect a button.click() failure in Selenium?", "body": "<p><code>click()</code> should raise an exception if it fails, and all exceptions in the Python client bindings are derived from <code>WebDriverException</code>.</p>\n\n<pre><code>from selenium.common.exceptions import WebDriverException\n\nbutton_continue = driver.find_element_by_id(\"StepTwoSubmitButton\")\ntry:\n    button_continue.click()\nexcept WebDriverException as e:\n    print('oops. click failed')\n    print(e)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 1, "last_activity_date": 1556782045, "creation_date": 1556782045, "answer_id": 55947554, "question_id": 55943908, "link": "https://stackoverflow.com/questions/55943908/how-to-detect-a-button-click-failure-in-selenium/55947554#55947554", "title": "How to detect a button.click() failure in Selenium?", "body": "<p>The element is a <a href=\"https://www.javascript.com/\" rel=\"nofollow noreferrer\">JavaScript</a> enabled element, so invoke <code>click()</code> on it ideally you need to induce <em>WebDriverWait</em> for the <code>element_to_be_clickable()</code> and wrap it in a <code>try-catch{}</code> and you can use either of the <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategies</a>:</p>\n\n<ul>\n<li><p>Using <code>CSS_SELECTOR</code>:</p>\n\n<pre><code>try:\n    WebDriverWait(driver, 20).until(EC.element_to_be_clickable((By.CSS_SELECTOR, \"input[name='StepTwoSubmitButton']\"))).click()\nexcept TimeoutException as e:\n    print(\"Element click failed\")\n</code></pre></li>\n<li><p>Using <code>XPATH</code>:</p>\n\n<pre><code>try:\n    WebDriverWait(driver, 20).until(EC.element_to_be_clickable((By.XPATH, \"//input[@name='StepTwoSubmitButton')]\"))).click()\nexcept TimeoutException as e:\n    print(\"Element click failed\")\n</code></pre></li>\n<li><p><strong>Note</strong> : You have to add the following imports :</p>\n\n<pre><code>from selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.common.exceptions import TimeoutException\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556782045, "creation_date": 1556753330, "last_edit_date": 1556782024, "question_id": 55943908, "link": "https://stackoverflow.com/questions/55943908/how-to-detect-a-button-click-failure-in-selenium", "title": "How to detect a button.click() failure in Selenium?", "body": "<p>I have a Selenium 3 Python script that is used to file <a href=\"https://complaints.donotcall.gov/complaint/complaintcheck.aspx\" rel=\"nofollow noreferrer\">FTC complaints</a> for nuisance calls. Today a miscreant got through using the number \"0\" (literal 0). The FTC website rejected the number but my script failed to detect the failure.</p>\n\n<p>Here is the relevant portion of my Python script that drives the complaint process. <a href=\"https://pastebin.com/cXLy3xKA\" rel=\"nofollow noreferrer\">Here is a pastebin</a> of the FTC page that is rejecting the number. According to the <a href=\"https://www.seleniumhq.org/docs/\" rel=\"nofollow noreferrer\">Selenium docs</a> there is no return value from <code>button_continue.click()</code> (if I am parsing the docs correctly; see around the heading <em>User Input - Filling In Forms</em>).</p>\n\n<pre><code># print(\"Clicking Continue\")\nbutton_continue = driver.find_element_by_id(\"StepTwoSubmitButton\")\nbutton_continue.click()\n</code></pre>\n\n<p>I also purchased the book <a href=\"https://www.amazon.com/gp/offer-listing/1491958707\" rel=\"nofollow noreferrer\">Test-Driven Development with Python</a>, but the Selenium hits I found when searching online turned out to be two pages in the book. (It was very disappointing; not recommended for this type of task, despite the title of the book).</p>\n\n<p>My question is, how do I detect the failures using Selenium 3?</p>\n\n<hr>\n\n<p>Here is the specific Javascript for the FTC page causing the trouble. It is from <a href=\"https://pastebin.com/cXLy3xKA\" rel=\"nofollow noreferrer\">the pastebin</a>:</p>\n\n<pre><code>&lt;div class=\"s_form_verif_bttn_sl\"&gt;\n    &lt;label for=\"StepTwoSubmitButton\"&gt;\n        &lt;input type=\"submit\" name=\"StepTwoSubmitButton\" value=\"Submit\" onclick=\"validateform();WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&amp;quot;StepTwoSubmitButton&amp;quot;, &amp;quot;&amp;quot;, true, &amp;quot;StepTwoEntry&amp;quot;, &amp;quot;&amp;quot;, false, false))\" id=\"StepTwoSubmitButton\" accesskey=\"s\" tabindex=\"17\" class=\"th_s\" /&gt;\n    &lt;/label&gt;&amp;nbsp;&amp;nbsp;\n    &lt;label for=\"StepTwoCancelButton\"&gt; \n        &lt;input type=\"submit\" name=\"StepTwoCancelButton\" value=\"Cancel\" id=\"StepTwoCancelButton\" accesskey=\"s\" tabindex=\"18\" class=\"th_s\" /&gt;\n    &lt;/label&gt;\n&lt;/div&gt;\n</code></pre>\n\n<hr>\n\n<p>I was able to reproduce the submit failure manually. Below is a screen capture of the result of submitting the form. When I watched the process in Developer Console I did not see anything out of the ordinary, like an uncaught exception.</p>\n\n<p><a href=\"https://i.stack.imgur.com/f9NZK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f9NZK.png\" alt=\"enter image description here\"></a></p>\n\n<hr>\n\n<p>Here are package versions.</p>\n\n<pre><code>$ apt-cache policy chromium-browser\nchromium-browser:\n  Installed: 73.0.3683.86-0ubuntu0.18.04.1\n  Candidate: 73.0.3683.86-0ubuntu0.18.04.1\n\n$ apt-cache policy python3-selenium\npython3-selenium:\n  Installed: 3.8.0+dfsg1-3\n  Candidate: 3.8.0+dfsg1-3\n\n$ apt-cache policy chromium-chromedriver\nchromium-chromedriver:\n  Installed: 73.0.3683.86-0ubuntu0.18.04.1\n  Candidate: 73.0.3683.86-0ubuntu0.18.04.1\n\n$ apt-cache policy python3\npython3:\n  Installed: 3.6.7-1~18.04\n  Candidate: 3.6.7-1~18.04\n</code></pre>\n"}, {"tags": ["python", "string", "pandas", "search", "merge"], "comments": [{"owner": {"reputation": 1393, "user_id": 8402628, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ac9288d8865280e16d62366724106d09?s=128&d=identicon&r=PG&f=1", "display_name": "YusufUMS", "link": "https://stackoverflow.com/users/8402628/yusufums"}, "edited": false, "score": 0, "creation_date": 1556753158, "post_id": 55943893, "comment_id": 98540794, "body": "Please share your expected output."}, {"owner": {"reputation": 1393, "user_id": 8402628, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ac9288d8865280e16d62366724106d09?s=128&d=identicon&r=PG&f=1", "display_name": "YusufUMS", "link": "https://stackoverflow.com/users/8402628/yusufums"}, "edited": false, "score": 0, "creation_date": 1556753346, "post_id": 55943893, "comment_id": 98540815, "body": "Why didn&#39;t you merge both <code>df</code>s using <code>pandas.merge()</code> on <code>id</code>?"}, {"owner": {"reputation": 1, "user_id": 11038360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e418ff55564dc438fcb285cbeb8847d8?s=128&d=identicon&r=PG&f=1", "display_name": "vadok", "link": "https://stackoverflow.com/users/11038360/vadok"}, "reply_to_user": {"reputation": 1393, "user_id": 8402628, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ac9288d8865280e16d62366724106d09?s=128&d=identicon&r=PG&f=1", "display_name": "YusufUMS", "link": "https://stackoverflow.com/users/8402628/yusufums"}, "edited": false, "score": 0, "creation_date": 1556779749, "post_id": 55943893, "comment_id": 98546654, "body": "Because DF1 is 10 times larger and the common cells are spread across the column. I edited for a bit more clarity on that"}], "answers": [{"tags": [], "owner": {"reputation": 1393, "user_id": 8402628, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ac9288d8865280e16d62366724106d09?s=128&d=identicon&r=PG&f=1", "display_name": "YusufUMS", "link": "https://stackoverflow.com/users/8402628/yusufums"}, "is_accepted": false, "score": 0, "last_activity_date": 1556862937, "last_edit_date": 1556862937, "creation_date": 1556753480, "answer_id": 55943918, "question_id": 55943893, "link": "https://stackoverflow.com/questions/55943893/how-to-merge-two-string-columns-where-the-one-is-subset-of-the-other/55943918#55943918", "title": "How to merge two string columns where the one is subset of the other", "body": "<p>I think my approach is a little bit complex. You can try other techniques if you can find. This is my approach:</p>\n\n<p>First, I split each word in column <code>text</code> from both <code>DF1</code> and <code>DF2</code>:</p>\n\n<pre><code>splitDF1, splitDF2 = [],[]\nfor i,tt1 in enumerate(DF1['text']):\n    splitDF1.append([i,tt1.split()])\nfor i,tt2 in enumerate(DF2['text']):\n    splitDF2.append([i,tt2.split()])\n</code></pre>\n\n<p>Then, I compare the list of splitted text in <code>DF1</code> with the one in <code>DF2</code>. If the splitted text in <code>DF2</code> is a subset of splitted text in <code>DF2</code>, store the <code>tag</code> into the new list, otherwise, leave it empty. Finally, add new column <code>tag</code> into <code>DF1</code> using the new list.</p>\n\n<pre><code>DF1tag = []\nfor sdf1 in splitDF1:\n    for sdf2 in splitDF2:\n        if set(sdf2[1]).issubset(sdf1[1]):\n            tag = DF2.iloc[sdf2[0]][2]\n            break\n        else:\n            tag = \"\"\n    DF1tag.append(tag)\nDF1['tag'] = DF1tag\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>print(DF1)\n\nid                       text       tag\n 1     some text with details      Good\n 2  which are not always good       Bad\n 3            irrelevant text          \n 4  I want to get rid of them  semiGood\n 5      more irrelevant cells          \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11038360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e418ff55564dc438fcb285cbeb8847d8?s=128&d=identicon&r=PG&f=1", "display_name": "vadok", "link": "https://stackoverflow.com/users/11038360/vadok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 495, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1556862937, "creation_date": 1556753116, "last_edit_date": 1556782819, "question_id": 55943893, "link": "https://stackoverflow.com/questions/55943893/how-to-merge-two-string-columns-where-the-one-is-subset-of-the-other", "title": "How to merge two string columns where the one is subset of the other", "body": "<p>I have <code>DF1</code> and a <code>DF2</code> which i want to merge on the left side (on the <code>['text']</code> column)</p>\n\n<p>The <code>DF2['text']</code> has some strings that are substrings of the <code>DF1['text']</code>. </p>\n\n<p>I tried looping dirty with a double loop, but <code>DF1</code> is around 200k lines and <code>DF2</code> around 2k, so the time seems to be long ( best case scenario)</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>DF1\nid   text                           \n1    'some text with details'       \n2    'which are not always good'    \n3    'irrelevant text'   \n4    'I want to get rid of them'\n5    'more irrelevant cells'\n\nDF2\nid   text                           tag\n1    'with details'                 'Good'\n2    'which are not'                'Bad'\n3    'to get rid of'                'semiGood'\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>for i in range(len(DF2)):\n    for k in range(len(DF1)):\n        if DF2['text'][i] in DF2['text'][k]:\n            DF1.loc[:,'tag'].iloc[k] = DF2['tag'][i]\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>DF1\nid   text                           tag\n1    'some text with details'       'Good'\n2    'which are not always good'    'Bad'\n3    'irrelevant text'              \n4    'I want to get rid of them'    'semiGood'\n5    'more irrelevant cells'\n</code></pre>\n\n<p>I would love to find a way to do this in less than 5 days that the double loop would require. Is there something?</p>\n"}, {"tags": ["python", "python-3.x", "user-interface", "tkinter"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1556756934, "post_id": 55943892, "comment_id": 98541420, "body": "<code>Button(..., command=function_name)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10700639, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1U6u7tjotUc/AAAAAAAAAAI/AAAAAAAAAFo/Xbd40dgNF-Q/photo.jpg?sz=128", "display_name": "Oscar L. Palomec", "link": "https://stackoverflow.com/users/10700639/oscar-l-palomec"}, "edited": false, "score": 0, "creation_date": 1556758797, "post_id": 55944318, "comment_id": 98541735, "body": "Thak you It worked! How can I do the same but with a checkbox?           #Checkbox         def movies():             print(&quot;Action:%d,\\n Comedy:%d&quot; % (var1.get(), var2.get()))              var1=IntVar()         b=Checkbutton(ventana, text=&quot;Action&quot;, variable=var1)         b.place(x=200, y= 300)          var2=IntVar()         a=Checkbutton(ventana, text=&quot;Comedy&quot;, variable=var2)         a.place(x=260, y= 300)"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 21, "user_id": 10700639, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1U6u7tjotUc/AAAAAAAAAAI/AAAAAAAAAFo/Xbd40dgNF-Q/photo.jpg?sz=128", "display_name": "Oscar L. Palomec", "link": "https://stackoverflow.com/users/10700639/oscar-l-palomec"}, "edited": false, "score": 0, "creation_date": 1556759559, "post_id": 55944318, "comment_id": 98541856, "body": "you can get <code>var1.get()</code> and <code>var2.get()</code> and <code>insert()</code> to scrolledtext."}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 0, "last_activity_date": 1556757446, "creation_date": 1556757446, "answer_id": 55944318, "question_id": 55943892, "link": "https://stackoverflow.com/questions/55943892/how-to-send-information-to-a-scrolledtext-from-a-form-in-tkinter-with-python-3/55944318#55944318", "title": "How to send information to a ScrolledText from a form in Tkinter with Python 3?", "body": "<p>You can use <code>Button(..., command=function_name)</code> to execute <code>function_name()</code> when you press button. This function can get selected value and insert in scrolledtext.</p>\n\n<pre><code>import tkinter as tk\nimport tkinter.ttk as ttk\nimport tkinter.scrolledtext as scrolledtext\n\ndef send_data():\n    txt.insert('end', combo.get() + '\\n')\n\nroot = tk.Tk()\n\nlabel = tk.Label(root, text=\"Location:\")\nlabel.pack()\n\ncombo = ttk.Combobox(root, values=(\"Chicago\",\"NY\", \"Texas\"))\ncombo.pack()\ncombo.current(0)\n\nbutton = tk.Button(root, text=\"Send\", command=send_data)\nbutton.pack()\n\ntxt = scrolledtext.ScrolledText(root) \ntxt.pack()\n\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 10700639, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1U6u7tjotUc/AAAAAAAAAAI/AAAAAAAAAFo/Xbd40dgNF-Q/photo.jpg?sz=128", "display_name": "Oscar L. Palomec", "link": "https://stackoverflow.com/users/10700639/oscar-l-palomec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 55944318, "answer_count": 1, "score": 1, "last_activity_date": 1556757446, "creation_date": 1556753106, "question_id": 55943892, "link": "https://stackoverflow.com/questions/55943892/how-to-send-information-to-a-scrolledtext-from-a-form-in-tkinter-with-python-3", "title": "How to send information to a ScrolledText from a form in Tkinter with Python 3?", "body": "<p>I made a form in Tkinter but when it is anwered I need the information to concatenate to a textbox.</p>\n\n<p>Let's say I select I live in Chicago, how do I send that information to the scrolled text when I press the button \"send\"?</p>\n\n<pre><code>   lblCd= Label(ventana,text=\"Location:\",font= (\"Arial\", 20), \n   fg=\"blue\", bg=\"white\").place(x=70,y=400)\n   combo['values']=(\"Chicago\",\"NY\", \"Texas\")\n   combo.current(1)\n   combo.place(x=260, y=400)\n\n\n    Btn=Button(ventana, text=\"Send\",)\n    Btn.place(x=200,y=500)\n\n    txt=scrolledtext.ScrolledText(ventana, width=40, height=10) \n    txt.place(x=260, y= 550)\n    txt.insert(INSERT, Nombre)\n</code></pre>\n"}, {"tags": ["python", "pandas", "lambda", "filter", "pandas-groupby"], "comments": [{"owner": {"reputation": 22506, "user_id": 7579547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e064cb6036830f4883abb0450f6afd7e?s=128&d=identicon&r=PG", "display_name": "Shaido", "link": "https://stackoverflow.com/users/7579547/shaido"}, "edited": false, "score": 0, "creation_date": 1556777798, "post_id": 55943867, "comment_id": 98545875, "body": "How do you want to calculate the ratio after removing some rows? E.g. in your example there is no False for Name2."}, {"owner": {"reputation": 61, "user_id": 1154087, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7bd9c86ea9eabd9437281599166afaff?s=128&d=identicon&r=PG", "display_name": "Atanu", "link": "https://stackoverflow.com/users/1154087/atanu"}, "reply_to_user": {"reputation": 22506, "user_id": 7579547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e064cb6036830f4883abb0450f6afd7e?s=128&d=identicon&r=PG", "display_name": "Shaido", "link": "https://stackoverflow.com/users/7579547/shaido"}, "edited": false, "score": 0, "creation_date": 1556818187, "post_id": 55943867, "comment_id": 98566592, "body": "I would just ignore it, I do not need that in the output. @Shaido"}], "answers": [{"tags": [], "owner": {"reputation": 22506, "user_id": 7579547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e064cb6036830f4883abb0450f6afd7e?s=128&d=identicon&r=PG", "display_name": "Shaido", "link": "https://stackoverflow.com/users/7579547/shaido"}, "is_accepted": false, "score": 1, "last_activity_date": 1556849741, "creation_date": 1556849741, "answer_id": 55962480, "question_id": 55943867, "link": "https://stackoverflow.com/questions/55943867/pandas-group-by-multiple-columns-filter-and-take-ratio-of-averages/55962480#55962480", "title": "Pandas group by multiple columns, filter and take ratio of averages", "body": "<p>This is one possible solution, first aggregate both the mean and count of each group:</p>\n\n<pre><code>df = grouped_df.agg([np.mean, 'count'])\n</code></pre>\n\n<p>Then filter the rows where the count is too low:</p>\n\n<pre><code>df = df[df['A', 'count'] &gt; 1]\n</code></pre>\n\n<p>Drop the unnecessary count columns and rename:</p>\n\n<pre><code>df = df.drop('count', axis=1, level=1)\ndf.columns = df.columns.get_level_values(0)\n</code></pre>\n\n<p>To calculate the mean, first unstack the <code>bool_column</code> and then add the new <code>ratio</code> column for each data column:</p>\n\n<pre><code>df = df.unstack()\n\nfor col in df.columns.get_level_values(0).unique():\n    df[col, 'ratio'] = df[col, True] / df[col, False]\n</code></pre>\n\n<p>Finally, select only the <code>ratio</code> columns:</p>\n\n<pre><code>df.iloc[:, df.columns.get_level_values(1) == 'ratio']\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>                  A      B\n  bool_column     ratio  ratio\nfilter_column       \n            1       NaN    NaN\n            2  0.857143  0.875\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 1154087, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7bd9c86ea9eabd9437281599166afaff?s=128&d=identicon&r=PG", "display_name": "Atanu", "link": "https://stackoverflow.com/users/1154087/atanu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 877, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1556849862, "creation_date": 1556752786, "last_edit_date": 1556849862, "question_id": 55943867, "link": "https://stackoverflow.com/questions/55943867/pandas-group-by-multiple-columns-filter-and-take-ratio-of-averages", "title": "Pandas group by multiple columns, filter and take ratio of averages", "body": "<p>I would like to groupby a dataframe using two columns, then filter the results which has less than some threshold value and then take the ratio of the means. </p>\n\n<p>Example:</p>\n\n<pre><code>grouped_df = df_test[[\"bool_column\", \"A\", \"B\",\n        \"C\", \"filter_column\"]].groupby([\"filter_column\", \"bool_column\"])\ngrouped_df.describe()\n</code></pre>\n\n<p>This gives me something like:</p>\n\n<pre><code>                   bool_column       A       B       C\nfilter_column\n\nName1                 True       &lt;stats&gt; &lt;stats&gt; &lt;stats&gt; [count = 4]\n                      False      &lt;stats&gt; &lt;stats&gt; &lt;stats&gt; [count = 2]\nName2                 True       &lt;stats&gt; &lt;stats&gt; &lt;stats&gt; [count = 3]\n                      False      &lt;stats&gt; &lt;stats&gt; &lt;stats&gt; [count = 1]\n\n</code></pre>\n\n<p>I now want to filter out those fields where count &lt; 2. So I want:</p>\n\n<pre><code>                   bool_column       A       B       C\nfilter_column\n\nName1                 True       &lt;stats&gt; &lt;stats&gt; &lt;stats&gt; [count = 4]\n                      False      &lt;stats&gt; &lt;stats&gt; &lt;stats&gt; [count = 2]\nName2                 True       &lt;stats&gt; &lt;stats&gt; &lt;stats&gt; [count = 3]\n\n</code></pre>\n\n<p>After this I want to take the ratio of means of columns <code>A</code>, <code>B</code> and <code>C</code>. That is for each filter column, I need </p>\n\n<pre><code>colA[True].mean / colb[False].mean\n</code></pre>\n\n<p>I couldn't get the filter to work anyway. I tried the following:</p>\n\n<ol>\n<li><code>grouped_df2 = grouped_df.filter(lambda x: len(x) &gt; 1)</code></li>\n<li><code>grouped_df2 = grouped_df2.stack()</code></li>\n<li><code>grouped_df = grouped_df.filter(lambda x: len(x) &gt; 0)</code></li>\n</ol>\n\n<p>The following works to get the ratio:</p>\n\n<pre><code>df = grouped_df['A'].mean().unstack('bool_column')\ndf = df[(df[True] &gt; 0) &amp; (df[False] &gt; 0)]\ndf['ratio'] = df[True] / df[False]\ndf = df.drop(columns=[True,False])\ndf.plot(kind='bar')\n</code></pre>\n"}, {"tags": ["python", "python-3.7"], "comments": [{"owner": {"reputation": 886, "user_id": 4499600, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YccdGudYeWs/AAAAAAAAAAI/AAAAAAAAH_o/MS7_ysyPhE4/photo.jpg?sz=128", "display_name": "e-neko", "link": "https://stackoverflow.com/users/4499600/e-neko"}, "edited": false, "score": 1, "creation_date": 1556753061, "post_id": 55943866, "comment_id": 98540769, "body": "<code>return</code> exits your function completely, returning <code>mv_p</code>.  If you want it to continue to next loop, you don&#39;t need neither <code>return</code> nor in fact <code>break</code> - your first loop will terminate automatically."}], "answers": [{"tags": [], "owner": {"reputation": 393, "user_id": 11339868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b855d14bbec4f8f96252870bdfb3e594?s=128&d=identicon&r=PG&f=1", "display_name": "icwebndev", "link": "https://stackoverflow.com/users/11339868/icwebndev"}, "is_accepted": false, "score": 0, "last_activity_date": 1556753127, "creation_date": 1556753127, "answer_id": 55943896, "question_id": 55943866, "link": "https://stackoverflow.com/questions/55943866/python-practice-game-issue-with-switching-between-while-loops/55943896#55943896", "title": "Python practice game, issue with switching between while loops", "body": "<p>Calling return inside of a loop will break function/method execution and return value to the caller.</p>\n\n<p>So, as soon as the first loop returns <code>mv_p</code>, your method call is over.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 11439238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/idHit.jpg?s=128&g=1", "display_name": "Mac_", "link": "https://stackoverflow.com/users/11439238/mac"}, "edited": false, "score": 0, "creation_date": 1556935882, "post_id": 55944253, "comment_id": 98607896, "body": "I tried this and my program opens with a black screen and is stuck loading."}, {"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "reply_to_user": {"reputation": 1, "user_id": 11439238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/idHit.jpg?s=128&g=1", "display_name": "Mac_", "link": "https://stackoverflow.com/users/11439238/mac"}, "edited": false, "score": 0, "creation_date": 1556964220, "post_id": 55944253, "comment_id": 98612244, "body": "Sorry, I forgot to specify that you need to draw the rect inside the loop. Added a comment where the drawing should occurr. Otherwise even in the rects are updated nothing is shown on the screen."}], "tags": [], "owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "is_accepted": false, "score": 0, "last_activity_date": 1556964105, "last_edit_date": 1556964105, "creation_date": 1556756900, "answer_id": 55944253, "question_id": 55943866, "link": "https://stackoverflow.com/questions/55943866/python-practice-game-issue-with-switching-between-while-loops/55944253#55944253", "title": "Python practice game, issue with switching between while loops", "body": "<p>If you want them to alternate (first loop, second loop, first loop, second loop, etc), you should nest them inside another loop.</p>\n\n<pre><code>def update(self):\n    mv_p = False\n    while True:\n        while not mv_p:\n            self.rect.x -= 5\n            if self.rect.left &gt; width - 750:\n                mv_p = True\n                break\n\n        while mv_p:\n            self.rect.y += 5\n            if self.rect.right &lt; width - 750:\n                mv_p = False\n                break\n\n        #need to draw on the screen here or nothing will be shown\n        #add condition to exit the function, adding for example a return\n        #inside af if, otherwise this will be an infinite loop.\n</code></pre>\n\n<p>If instead you just want first loop, second loop and exit no need to nest them, just remove the <code>return</code> calls from your function.</p>\n"}], "owner": {"reputation": 1, "user_id": 11439238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/idHit.jpg?s=128&g=1", "display_name": "Mac_", "link": "https://stackoverflow.com/users/11439238/mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 325, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556964105, "creation_date": 1556752767, "question_id": 55943866, "link": "https://stackoverflow.com/questions/55943866/python-practice-game-issue-with-switching-between-while-loops", "title": "Python practice game, issue with switching between while loops", "body": "<p>I want these while loops on line 21 - 34 to alternate (one ends the next one begins) but one simply stops and the next one doesn't run.</p>\n\n<pre><code>def update(self):\n    mv_p = False\n    while not mv_p:\n        self.rect.x -= 5\n        if self.rect.left &gt; width - 750:\n            mv_p = True\n            return mv_p\n            break\n\n    while mv_p:\n        self.rect.y += 5\n        if self.rect.right &lt; width - 750:\n            mv_p = False\n            return mv_p\n            break\n</code></pre>\n"}, {"tags": ["python", "pygame"], "comments": [{"owner": {"reputation": 45, "user_id": 9778717, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2g4tKe6sU0M/AAAAAAAAAAI/AAAAAAAAADI/_nzbHH-GMCM/photo.jpg?sz=128", "display_name": "spicy meatballs", "link": "https://stackoverflow.com/users/9778717/spicy-meatballs"}, "reply_to_user": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 0, "creation_date": 1556754709, "post_id": 55943859, "comment_id": 98541067, "body": "the problematic code is from what I can see with this line:  pygame.draw.rect(display,black,(x*16-player_rect.x,y*16-play&zwnj;&#8203;er_rect.y,16,16))"}, {"owner": {"reputation": 45, "user_id": 9778717, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2g4tKe6sU0M/AAAAAAAAAAI/AAAAAAAAADI/_nzbHH-GMCM/photo.jpg?sz=128", "display_name": "spicy meatballs", "link": "https://stackoverflow.com/users/9778717/spicy-meatballs"}, "reply_to_user": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 0, "creation_date": 1556754755, "post_id": 55943859, "comment_id": 98541073, "body": "when it didn&#39;t have the player_rect.x the collision points worked and were 16 by 16"}, {"owner": {"reputation": 45, "user_id": 9778717, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2g4tKe6sU0M/AAAAAAAAAAI/AAAAAAAAADI/_nzbHH-GMCM/photo.jpg?sz=128", "display_name": "spicy meatballs", "link": "https://stackoverflow.com/users/9778717/spicy-meatballs"}, "reply_to_user": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 0, "creation_date": 1556754861, "post_id": 55943859, "comment_id": 98541089, "body": "the player_rect.x is originally from the where the player is displayed, but I moved it and made the player stay in on spot"}, {"owner": {"reputation": 45, "user_id": 9778717, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2g4tKe6sU0M/AAAAAAAAAAI/AAAAAAAAADI/_nzbHH-GMCM/photo.jpg?sz=128", "display_name": "spicy meatballs", "link": "https://stackoverflow.com/users/9778717/spicy-meatballs"}, "reply_to_user": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 0, "creation_date": 1556754874, "post_id": 55943859, "comment_id": 98541091, "body": "this is where the problems began"}, {"owner": {"reputation": 45, "user_id": 9778717, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2g4tKe6sU0M/AAAAAAAAAAI/AAAAAAAAADI/_nzbHH-GMCM/photo.jpg?sz=128", "display_name": "spicy meatballs", "link": "https://stackoverflow.com/users/9778717/spicy-meatballs"}, "reply_to_user": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 0, "creation_date": 1556754978, "post_id": 55943859, "comment_id": 98541112, "body": "so the problems are I believe within the for loop that displays the tiles"}, {"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 0, "creation_date": 1556755394, "post_id": 55943859, "comment_id": 98541189, "body": "Please, post a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> so we can reproduce your error."}, {"owner": {"reputation": 45, "user_id": 9778717, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2g4tKe6sU0M/AAAAAAAAAAI/AAAAAAAAADI/_nzbHH-GMCM/photo.jpg?sz=128", "display_name": "spicy meatballs", "link": "https://stackoverflow.com/users/9778717/spicy-meatballs"}, "reply_to_user": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 0, "creation_date": 1556756120, "post_id": 55943859, "comment_id": 98541305, "body": "okay I will do that."}, {"owner": {"reputation": 45, "user_id": 9778717, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2g4tKe6sU0M/AAAAAAAAAAI/AAAAAAAAADI/_nzbHH-GMCM/photo.jpg?sz=128", "display_name": "spicy meatballs", "link": "https://stackoverflow.com/users/9778717/spicy-meatballs"}, "reply_to_user": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 0, "creation_date": 1556756691, "post_id": 55943859, "comment_id": 98541371, "body": "I have edited the code in the question to include a shorten version of the game, that just includes the code relevant to the problem that I am having"}, {"owner": {"reputation": 45, "user_id": 9778717, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2g4tKe6sU0M/AAAAAAAAAAI/AAAAAAAAADI/_nzbHH-GMCM/photo.jpg?sz=128", "display_name": "spicy meatballs", "link": "https://stackoverflow.com/users/9778717/spicy-meatballs"}, "reply_to_user": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 0, "creation_date": 1556756772, "post_id": 55943859, "comment_id": 98541383, "body": "I also made the player and tiles into just squares so that the image files are not required"}], "answers": [{"tags": [], "owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "is_accepted": true, "score": 3, "last_activity_date": 1556759154, "creation_date": 1556759154, "answer_id": 55944459, "question_id": 55943859, "link": "https://stackoverflow.com/questions/55943859/scrolling-backgrounds-with-map-based-collision-detection-pygame/55944459#55944459", "title": "Scrolling backgrounds with map-based collision detection Pygame", "body": "<p>Your code is a bit hard to follow, but I've understood where the problem is.</p>\n\n<p>In your <code>move</code> function you change the coordinates of <code>player_rect</code> to make it move. But then when you draw it (<code>pygame.draw.rect(display,black1,(142,100,16,16))</code>) you draw it at the center. So there is a mismatch between what you draw and what is tested for movement.</p>\n\n<p>Honestly, I cannot find a way to solve it without changing a lot of code.<br>\nIf you want to keep the backgroung scrolling, consider to not move the player but to move the tiles in the opposite direction. I mean, if the player goes left, move the tiles right, and so on.<br>\nCurrently you are creating the tiles each iteration. I would recommend to create them outside the main loop, and in the loop move them (editing the coordinates of their <code>rect</code>s).</p>\n"}], "owner": {"reputation": 45, "user_id": 9778717, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2g4tKe6sU0M/AAAAAAAAAAI/AAAAAAAAADI/_nzbHH-GMCM/photo.jpg?sz=128", "display_name": "spicy meatballs", "link": "https://stackoverflow.com/users/9778717/spicy-meatballs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 55944459, "answer_count": 1, "score": 1, "last_activity_date": 1556759154, "creation_date": 1556752674, "last_edit_date": 1556756615, "question_id": 55943859, "link": "https://stackoverflow.com/questions/55943859/scrolling-backgrounds-with-map-based-collision-detection-pygame", "title": "Scrolling backgrounds with map-based collision detection Pygame", "body": "<p>I am creating a game, that uses a map for collision, this all worked until I attempted to add scrolling to the game. It is supposed to make the background move instead of the player, which it does, but the problem lies within the collision detection.</p>\n\n<p>The size of each collision point goes from 16 by 16, to 1 by 1.\nThis has proven to be quite problematic, and any help with fixing it will be greatly appreciated </p>\n\n<p>I have tried changed to player's collision values, screen sizes, but in the end I am not sure what the exact cause of this problem is, my best guess would be that my removal of the player's movement and instead having it remain at the same position on the screen, has lead to problem with how the collision is suppose to act with the change in position, but this doesn't explain the shrinking of the collision points.</p>\n\n<pre><code>import pygame, sys\n\nclock = pygame.time.Clock()\n\nfrom pygame.locals import *\npygame.init() # initiates pygame\n\npygame.display.set_caption('The Game')\n\nWINDOW_SIZE = (600,400)\n\nscreen = pygame.display.set_mode(WINDOW_SIZE,0,32)\n\ndisplay = pygame.Surface((300,200))\n\nmoving_right = False\nmoving_left = False\nmoving_up = False\nmoving_down = False\n\ngame_map = [['2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2'],\n           ['2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2'],\n           ['2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2'],\n           ['0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0'],\n           ['0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0'],\n           ['0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0'],\n           ['0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0'],\n           ['0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0'],\n           ['0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0'],\n           ['0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0'],\n           ['2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2'],\n           ['2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2','2'],\n           ['0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0','0']]\n\nplayer_rect = pygame.Rect(100,100,16,16)\nblack = (45,45,45)\nblack1 = (60,60,60)\n\ndef collision_test(rect,tiles):\n   hit_list = []\n   for tile in tiles:\n       if rect.colliderect(tile):\n           hit_list.append(tile)\n   return hit_list\n\ndef move(rect,movement,tiles):\n   collision_types = {'top':False,'bottom':False,'right':False,'left':False}\n   rect.x += movement[0]\n   hit_list = collision_test(rect,tiles)\n   for tile in hit_list:\n       if movement[0] &gt; 0:\n           rect.right = tile.left\n           collision_types['right'] = True\n       elif movement[0] &lt; 0:\n           rect.left = tile.right\n           collision_types['left'] = True\n   rect.y += movement[1]\n   hit_list = collision_test(rect,tiles)\n   for tile in hit_list:\n       if movement[1] &gt; 0:\n           rect.bottom = tile.top\n           collision_types['bottom'] = True\n       elif movement[1] &lt; 0:\n           rect.top = tile.bottom\n           collision_types['top'] = True\n   return rect, collision_types\n\nwhile True:\n   display.fill((155,155,155))\n   tile_rects = []\n   y = 0\n   for layer in game_map:\n       x = 0\n       for tile in layer: # tiles\n           if tile == '2':\n               pygame.draw.rect(display,black,(x*16-player_rect.x,y*16-player_rect.y,16,16))\n           if tile != '0':\n               tile_rects.append(pygame.Rect(x*16-player_rect.x,y*16-player_rect.y,16,16))\n           x += 1\n       y += 1\n\n   player_movement = [0,0]\n   if moving_right == True:\n       player_movement[0] += 2\n   if moving_left == True:\n       player_movement[0] -= 2\n   if moving_up == True:\n       player_movement[1] -= 2\n   if moving_down == True:\n       player_movement[1] += 2\n   player_rect,collisions = move(player_rect,player_movement,tile_rects)\n\n   pygame.draw.rect(display,black1,(142,100,16,16)) #replacing the 142 and 100 with the rect.x and y, and remove the rect.x and y from the tiles, will make it work like the original\n\n\n   for event in pygame.event.get(): # event loop\n       if event.type == QUIT:\n           pygame.quit()\n           sys.exit()\n       if event.type == KEYDOWN:\n           if event.key == K_RIGHT:\n               moving_right = True\n           if event.key == K_LEFT:\n               moving_left = True\n           if event.key == K_UP:\n               moving_up = True\n           if event.key == K_DOWN:\n               moving_down = True\n       if event.type == KEYUP:\n           if event.key == K_RIGHT:\n               moving_right = False\n           if event.key == K_LEFT:\n               moving_left = False\n           if event.key == K_UP:\n               moving_up = False\n           if event.key == K_DOWN:\n               moving_down = False\n   screen.blit(pygame.transform.scale(display,WINDOW_SIZE),(0,0))\n   pygame.display.update()\n   clock.tick(60)\n\n</code></pre>\n\n<p>My expected result was for the collision points not to change and remain 16 by 16, unfortunately, instead the collision points for the tiles has shrank to 1 by 1, leading to many problems.</p>\n"}, {"tags": ["python", "opencv", "computer-vision", "homography"], "answers": [{"tags": [], "owner": {"reputation": 415, "user_id": 9405672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b7f7a4dcda855e7db9a405c0b624f11?s=128&d=identicon&r=PG&f=1", "display_name": "thadaBoy", "link": "https://stackoverflow.com/users/9405672/thadaboy"}, "is_accepted": true, "score": 3, "last_activity_date": 1556802580, "creation_date": 1556802580, "answer_id": 55953237, "question_id": 55943806, "link": "https://stackoverflow.com/questions/55943806/pasting-a-png-on-a-image-using-homography-in-opencv/55953237#55953237", "title": "Pasting a PNG on a image using homography in openCV", "body": "<p>The probem is solved in <a href=\"https://www.learnopencv.com/alpha-blending-using-opencv-cpp-python/\" rel=\"nofollow noreferrer\">this link</a>. PNG formats have an extra channel called 'alpha' for transparency. </p>\n"}], "owner": {"reputation": 415, "user_id": 9405672, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b7f7a4dcda855e7db9a405c0b624f11?s=128&d=identicon&r=PG&f=1", "display_name": "thadaBoy", "link": "https://stackoverflow.com/users/9405672/thadaboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 452, "favorite_count": 0, "accepted_answer_id": 55953237, "answer_count": 1, "score": 2, "last_activity_date": 1556802580, "creation_date": 1556752154, "question_id": 55943806, "link": "https://stackoverflow.com/questions/55943806/pasting-a-png-on-a-image-using-homography-in-opencv", "title": "Pasting a PNG on a image using homography in openCV", "body": "<p>I tried to paste a png image on another image(jpg) using homography in openCV by using <a href=\"https://www.learnopencv.com/homography-examples-using-opencv-python-c/\" rel=\"nofollow noreferrer\">this example.</a>  And jpg format is working with this but when I try to do with png the white area shows. And I also tried with using adding -1 and <code>cv2.IMREAD_UNCHANGED</code> in the imread which doesn't change the image but the code doesn't run after that. Please suggest me a way to paste a png. Would be a great help. The code is this and the images will follow.</p>\n\n<pre><code>import cv2\nimport numpy as np\nfrom utils import mouse_handler\nfrom utils import get_four_points\nimport sys\n\n\nif __name__ == '__main__' :\n\n    # Read source image.\n    im_src = cv2.imread('first-image.jpg');\n    size = im_src.shape\n\n    # Create a vector of source points.\n    pts_src = np.array(\n                       [\n                        [0,0],\n                        [size[1] - 1, 0],\n                        [size[1] - 1, size[0] -1],\n                        [0, size[0] - 1 ]\n                        ],dtype=float\n                       );\n\n\n    # Read destination image\n    im_dst = cv2.imread('times-square.jpg');\n\n    # Get four corners of the billboard\n    print 'Click on four corners of a billboard and then press ENTER'\n    pts_dst = get_four_points(im_dst)\n\n    # Calculate Homography between source and destination points\n    h, status = cv2.findHomography(pts_src, pts_dst);\n\n    # Warp source image\n    im_temp = cv2.warpPerspective(im_src, h, (im_dst.shape[1],im_dst.shape[0]))\n\n    # Black out polygonal area in destination image.\n    cv2.fillConvexPoly(im_dst, pts_dst.astype(int), 0, 16);\n\n    # Add warped source image to destination image.\n    im_dst = im_dst + im_temp;\n\n    # Display image.\n    cv2.imshow(\"Image\", im_dst);\n    cv2.waitKey(0);\n</code></pre>\n\n<p><strong>IMAGES :</strong>\n<a href=\"https://github.com/spmallick/learnopencv/blob/master/Homography/first-image.jpg\" rel=\"nofollow noreferrer\">https://github.com/spmallick/learnopencv/blob/master/Homography/first-image.jpg</a>\n<a href=\"https://github.com/spmallick/learnopencv/blob/master/Homography/times-square.jpg\" rel=\"nofollow noreferrer\">https://github.com/spmallick/learnopencv/blob/master/Homography/times-square.jpg</a></p>\n\n<p><strong>UTILS CLASS</strong>\n<a href=\"https://github.com/spmallick/learnopencv/blob/master/Homography/utils.py\" rel=\"nofollow noreferrer\">https://github.com/spmallick/learnopencv/blob/master/Homography/utils.py</a></p>\n\n<p>It would be great if you can provide me an answer.</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1556752234, "post_id": 55943778, "comment_id": 98540620, "body": "This breakdown doesn&#39;t quite work, because <code>print(list(a))</code> uses up the generator, so <code>next(a, len(result))</code> won&#39;t give the intended result."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1556752294, "post_id": 55943778, "comment_id": 98540631, "body": "Other than that, I like this approach of showing all the steps, although you should add some explanation."}, {"owner": {"reputation": 8941, "user_id": 179057, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9b94d4c76a86a818ccf34e7519e9f90?s=128&d=identicon&r=PG", "display_name": "David Robles", "link": "https://stackoverflow.com/users/179057/david-robles"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1556752363, "post_id": 55943778, "comment_id": 98540648, "body": "I should have cloned the generator using <code>itertools.tee</code> or something like that."}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 0, "creation_date": 1556752470, "post_id": 55943778, "comment_id": 98540668, "body": "I didn&#39;t know you could clone generators like that"}], "tags": [], "owner": {"reputation": 8941, "user_id": 179057, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9b94d4c76a86a818ccf34e7519e9f90?s=128&d=identicon&r=PG", "display_name": "David Robles", "link": "https://stackoverflow.com/users/179057/david-robles"}, "is_accepted": false, "score": 0, "last_activity_date": 1556752305, "last_edit_date": 1556752305, "creation_date": 1556751918, "answer_id": 55943778, "question_id": 55943738, "link": "https://stackoverflow.com/questions/55943738/trouble-understanding-the-following-pythonic-snippet/55943778#55943778", "title": "Trouble understanding the following pythonic snippet", "body": "<pre><code>result = [0,0,1,4,2,0,3]\na = (i for i, x in enumerate(result) if x != 0)\nprint(a)  # &lt;generator object &lt;genexpr&gt; at 0x110e075e8&gt;\nb = next(a, len(result))\nprint(b)  # 2\nc = result[b:]\nprint(c) # [1, 4, 2, 0, 3]\nresult = c or [0]\nprint(result) # [1, 4, 2, 0, 3]\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10312001"}, "edited": false, "score": 0, "creation_date": 1556832707, "post_id": 55943782, "comment_id": 98572604, "body": "After reading your response I still don&#39;t quite understand how writing the code like this makes result = [0] if the original result consists of only 0&#39;? For example if the list only contains 0&#39;s, then next() will return len(result). Thus we end up with result[len(result):] or [0]; equivalently [] or [0]. How does python know when to return the empty list or [0]?"}, {"owner": {"reputation": 6120, "user_id": 9214517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uHHGLaUqJK4/AAAAAAAAAAI/AAAAAAAAAAA/EMWzo-f2N9c/photo.jpg?sz=128", "display_name": "adrtam", "link": "https://stackoverflow.com/users/9214517/adrtam"}, "edited": false, "score": 1, "creation_date": 1556838795, "post_id": 55943782, "comment_id": 98574182, "body": "@KaiLee <code>A or B</code> is a <a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow noreferrer\">shortcircuit notation</a>. Means if <code>A</code> is not a &quot;true&quot; value, it evaluates into <code>B</code>. In this case <code>[]</code> is &quot;false&quot; value in Python, so you will always have <code>[0]</code> back."}, {"owner": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "edited": false, "score": 0, "creation_date": 1556842919, "post_id": 55943782, "comment_id": 98574927, "body": "@KaiLee note that if the list only contains 0&#39;s, <code>result[len(result):]</code> is an empty list <code>[]</code>, not <code>[0]</code>. Here is where the <code>or</code> statement will finally assign <code>[0]</code> to <code>result</code>."}], "tags": [], "owner": {"reputation": 6120, "user_id": 9214517, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uHHGLaUqJK4/AAAAAAAAAAI/AAAAAAAAAAA/EMWzo-f2N9c/photo.jpg?sz=128", "display_name": "adrtam", "link": "https://stackoverflow.com/users/9214517/adrtam"}, "is_accepted": false, "score": 3, "last_activity_date": 1556752002, "creation_date": 1556752002, "answer_id": 55943782, "question_id": 55943738, "link": "https://stackoverflow.com/questions/55943738/trouble-understanding-the-following-pythonic-snippet/55943782#55943782", "title": "Trouble understanding the following pythonic snippet", "body": "<p>Let's break it down:</p>\n\n<pre><code>result = result[\n    next(\n       (i for i, x in enumerate(result) if x != 0),\n       len(result)\n    ):\n] or [0]\n</code></pre>\n\n<p>Python <code>next()</code> function takes first argument as iterator and second argument as default. Default is used when the iterator is \"empty\". So if the line of <code>i for i, x....</code> yields nothing, the result would be <code>result[len(result):]</code> or simply an empty string. In which case, the <code>or [0]</code> part takes action and returns you an one-element list <code>[0]</code>.</p>\n\n<p>Now goes to the iterator line. It says</p>\n\n<pre><code>i for i, x in enumerate(result) if x != 0\n</code></pre>\n\n<p>which in English means find all indices <code>i</code> of <code>result</code> such that <code>result[i] != 0</code>. And put it to <code>next()</code>, it means you take the first of such indices. So in the input list, you are extracting the <em>index</em> of the first element that is not zero. Then, using the same logic as the previous paragraph, you build <code>result[i:]</code>, which means taking the sub-list of <code>result</code> from the first non-zero element.</p>\n"}, {"tags": [], "owner": {"reputation": 6521, "user_id": 7583953, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w0Jkd.jpg?s=128&g=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/7583953/alec"}, "is_accepted": false, "score": 0, "last_activity_date": 1556752180, "creation_date": 1556752180, "answer_id": 55943808, "question_id": 55943738, "link": "https://stackoverflow.com/questions/55943738/trouble-understanding-the-following-pythonic-snippet/55943808#55943808", "title": "Trouble understanding the following pythonic snippet", "body": "<pre><code>enumerate(result)\n</code></pre>\n\n<p>produces an iterable similar to </p>\n\n<pre><code>[(0, 0), (1, 0), (2, 1), (3, 4), (4, 2), (5, 0), (6, 3)]\n</code></pre>\n\n<p><code>i for i, x</code> is saying for the first and second index, return the first. So we now have a list of 0-6.</p>\n\n<p><code>next()</code> takes this list as an iterator, and if the iterator doesn't yield anything, returns <code>[0]</code>, due to the <code>or</code> statement.</p>\n\n<p>Basically, you're replacing the first element with <code>[0]</code> (which doesn't do anything), then copying the rest of the list.</p>\n"}, {"tags": [], "owner": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "is_accepted": false, "score": 0, "last_activity_date": 1556753466, "creation_date": 1556753466, "answer_id": 55943917, "question_id": 55943738, "link": "https://stackoverflow.com/questions/55943738/trouble-understanding-the-following-pythonic-snippet/55943917#55943917", "title": "Trouble understanding the following pythonic snippet", "body": "<p>By all means, @adrtam and others have already explained it all very well. For those looking at an explanation with (ugly) code, it would looks something like this:</p>\n\n<pre><code>result = [0,0,1,4,2,0,3]\n\ni=0                  # initialize the position counter\nfor x in result:     # scan each element in the list...\n    if x != 0:       # ...checking for non-zero elements...\n        break        # ... break the loop if we find it...\n    else:\n        i+=1         # ... otherwise increase the counter\n\n# i is now the index of the first non-zero element in the list\n\nresult = result[i:]  # take a slice of the list, starting with the i-th element\n                     # Note that, if i=len(result), then the slice will be an\n                     # empty array []. That would happen, for example, if all\n                     # the elements in the array were 0 (since we are checking\n                     # against 0\n\n# Hence the protection: \n# If we ended up here with an empty list, assign a list with a single 0 instead\n\nif not result:  \n    result = [0]\n\nprint(result)\n</code></pre>\n\n<p>See it in action here <a href=\"https://eval.in/1101785\" rel=\"nofollow noreferrer\">https://eval.in/1101785</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10312001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1556753466, "creation_date": 1556751528, "question_id": 55943738, "link": "https://stackoverflow.com/questions/55943738/trouble-understanding-the-following-pythonic-snippet", "title": "Trouble understanding the following pythonic snippet", "body": "<p>I know this will return the original array s.t it has no leading zeroes but i don't understand how the syntax here enables that.</p>\n\n<pre><code>result = [0,0,1,4,2,0,3]\nresult = result[next((i for i, x in enumerate(result) if x != 0),\n                         len(result)):] or [0]\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1556752476, "post_id": 55943776, "comment_id": 98540671, "body": "That&#39;s not a tuple of strings, but otherwise correct."}, {"owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "reply_to_user": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1556752517, "post_id": 55943776, "comment_id": 98540682, "body": "You are right, it needs the comma to officially make it a tuple"}], "tags": [], "owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "is_accepted": false, "score": 1, "last_activity_date": 1556752719, "last_edit_date": 1556752719, "creation_date": 1556751882, "answer_id": 55943776, "question_id": 55943711, "link": "https://stackoverflow.com/questions/55943711/how-to-fix-typeerror-in-string-requires-string-as-left-operand-not-nonety/55943776#55943776", "title": "How to fix &quot;TypeError: &#39;in &lt;string&gt;&#39; requires string as left operand, not NoneType&quot;", "body": "<p>You are specifying <code>proceed = None</code>, then two lines later you're trying to see if <code>None</code> is in a string. It looks like you're trying to make it a tuple of strings. If you give proceed a value that is a string or can be converted to a string, you should bypass the error</p>\n\n<pre><code>proceed = \"2\" \n\nwhile proceed not in (\"0\"):\n    print(\"look! I'm printing!\", proceed)\n\n    # this part is just to make it so I don't get \n    #an infinite loop without the rest of your code\n    proceed = str(int(proceed) - 1)\n\n# (\"look! I'm printing!\", '2')\n# (\"look! I'm printing!\", '1')\n</code></pre>\n\n<p>If you're going to have multiple buttons to trigger this function, then just add them as you build them. Otherwise, I would suggest just checking for equality and you will be fine with <code>proceed = None</code></p>\n\n<pre><code>proceed = None \n\nwhile not proceed == \"0\":\n    print(\"look! I'm printing!\", proceed)\n    proceed = \"0\"\n\n# (\"look! I'm printing!\", None)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11439158, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Eqr71INpiZM/AAAAAAAAAAI/AAAAAAAADpg/TuDkodWqDUE/photo.jpg?sz=128", "display_name": "Malu Dias", "link": "https://stackoverflow.com/users/11439158/malu-dias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2805, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556752719, "creation_date": 1556751340, "question_id": 55943711, "link": "https://stackoverflow.com/questions/55943711/how-to-fix-typeerror-in-string-requires-string-as-left-operand-not-nonety", "title": "How to fix &quot;TypeError: &#39;in &lt;string&gt;&#39; requires string as left operand, not NoneType&quot;", "body": "<p>I'm making a school project in which I created a game with a 'Instruction' screen and a 'Title' screen (both are different .py files), but I'm having trouble in alterning between the title screen and the instructions.</p>\n\n<p>I have tried changing the key you need to press to proceed and I have tried importing the Title file to the Instructions file and vice-versa.</p>\n\n<p>I really do expect that this function can take me back to the Title when I press \"0\".</p>\n\n<pre><code>from main import titlescreen\nglobal proceed\nproceed = None\n\nwhile proceed not in (\"0\"): #Line 76\n  proceed = input(\"Press '0' to go back to the tittle.\")\n  if proceed == \"0\":\n    os.system('clear')\n    titlescreen()\n\nERROR:\nTraceback (most recent call last):\n  File \"main.py\", line 113, in &lt;module&gt;\n    titlescreen()\n  File \"main.py\", line 92, in titlescreen\n    instructions()\n  File \"/home/runner/no.py\", line 76, in instructions\n    while pross not in (\"0\"):\nTypeError: 'in &lt;string&gt;' requires string as left operand, not NoneType\n</code></pre>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 1, "creation_date": 1556751773, "post_id": 55943694, "comment_id": 98540538, "body": "Yes, it&#39;s possible. Can you please share the html of the sample div element (with email and url) so that we can provide the solution."}, {"owner": {"reputation": 121, "user_id": 4318941, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-k_RB1X900hU/AAAAAAAAAAI/AAAAAAAATjE/pABcS_ufcgQ/photo.jpg?sz=128", "display_name": "Tony Simonovsky", "link": "https://stackoverflow.com/users/4318941/tony-simonovsky"}, "reply_to_user": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1556754264, "post_id": 55943694, "comment_id": 98540996, "body": "@supputuri thank you! Here&#39;s the url I&#39;m working with: <a href=\"https://clutch.co/web-designers?page=0\" rel=\"nofollow noreferrer\">clutch.co/web-designers?page=0</a>"}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 4318941, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-k_RB1X900hU/AAAAAAAAAAI/AAAAAAAATjE/pABcS_ufcgQ/photo.jpg?sz=128", "display_name": "Tony Simonovsky", "link": "https://stackoverflow.com/users/4318941/tony-simonovsky"}, "edited": false, "score": 0, "creation_date": 1556754571, "post_id": 55943877, "comment_id": 98541043, "body": "Thank you, @zaif  I tried this approach with the code:  &lt;code&gt; providers = browser.find_elements_by_class_name(&#39;provider-row&#39;) for provider in providers:     companyEmail = provider.find_elements_by_xpath(&quot;//div[@class=&#39;item&#39;]/a&quot;)     emailNum = 0     for email in companyEmail:         print(emailNum, email.get_attribute(&quot;href&quot;))         emailNum += 1 &lt;/code&gt;  But the inner code doesn&#39;t look to be searching within current &quot;provider-row&quot; div, rather - it takes all elements from the page which meet the xpath requirement &quot;//div[@class=&#39;item&#39;]/a&quot;."}], "tags": [], "owner": {"reputation": 61, "user_id": 5956174, "user_type": "registered", "profile_image": "https://graph.facebook.com/980733415344276/picture?type=large", "display_name": "Zaif Senpai", "link": "https://stackoverflow.com/users/5956174/zaif-senpai"}, "is_accepted": false, "score": 2, "last_activity_date": 1556752923, "creation_date": 1556752923, "answer_id": 55943877, "question_id": 55943694, "link": "https://stackoverflow.com/questions/55943694/seleniumpython-how-to-locate-several-elements-within-a-specific-element/55943877#55943877", "title": "Selenium+Python. How to locate several elements within a specific element?", "body": "<p>There are two ways you can do it.</p>\n\n<p><strong>First</strong>: Simply use the selector to find the element in children of that 'div' element. You can use find_elements functions to check how many parent 'divs' are there first, and then loop that many times. This method is not recommended.</p>\n\n<p><strong>Second</strong>: You can call find_element family of functions on a webelement object.</p>\n\n<p>Assume that I am working on <a href=\"https://www.webscraper.io/test-sites\" rel=\"nofollow noreferrer\">this</a> website.</p>\n\n<pre><code>### First method:\nFirstTitleInDiv = driver.find_element_by_css_selector(\".row.test-site:nth-of-type(1) h2\") # get first title\nSecondTitleInDiv = driver.find_element_by_css_selector(\".row.test-site:nth-of-type(2) h2\") # get second title\n# ... and so on.\n\n### Second method:\nDiv_Els = driver.find_elements_by_css_selector(\".row.test-site\") # get list of all divs\n# You can now loop through all divs in order to do following:\nFirstTitleInDiv = Div_Els[0].find_element_by_css_selector(\"h2\") # get first title\nSecondTitleInDiv = Div_Els[1].find_element_by_css_selector(\"h2\") # get second title\n# ... and so on.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 4318941, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-k_RB1X900hU/AAAAAAAAAAI/AAAAAAAATjE/pABcS_ufcgQ/photo.jpg?sz=128", "display_name": "Tony Simonovsky", "link": "https://stackoverflow.com/users/4318941/tony-simonovsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1556756489, "creation_date": 1556756489, "answer_id": 55944216, "question_id": 55943694, "link": "https://stackoverflow.com/questions/55943694/seleniumpython-how-to-locate-several-elements-within-a-specific-element/55944216#55944216", "title": "Selenium+Python. How to locate several elements within a specific element?", "body": "<p>Ok, I found the solution.</p>\n\n<p>First you collect all the blocks with fields you need to get. Example:</p>\n\n<p><code>providers = browser.find_elements_by_class_name('provider-row')</code></p>\n\n<p>And then you use find_elements_by_xpath() method with locator starting with \".//\" which means search inside a specific element. Example:</p>\n\n<p><code>providers[0].find_elements_by_xpath(\".//li[@class='website-link website-link-a']/a[@class='sl-ext']\")</code></p>\n"}, {"tags": [], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "is_accepted": false, "score": 2, "last_activity_date": 1556757477, "creation_date": 1556757477, "answer_id": 55944322, "question_id": 55943694, "link": "https://stackoverflow.com/questions/55943694/seleniumpython-how-to-locate-several-elements-within-a-specific-element/55944322#55944322", "title": "Selenium+Python. How to locate several elements within a specific element?", "body": "<p>Here is the complete logic.</p>\n\n<pre><code>url = \"https://clutch.co/web-designers?page=0\"\ndriver.get(url)\npros = driver.find_elements_by_css_selector(\"li.provider-row\")\nproviders =[]\nfor provider in pros:\n\n    pUrl = provider.find_element_by_css_selector(\".website-link.website-link-a a\").get_attribute(\"realurl\")\n    if (len(provider.find_elements_by_css_selector(\".contact-dropdown .item a\"))&gt;0):\n        pEmail = provider.find_element_by_css_selector(\".contact-dropdown .item a\").get_attribute('textContent')\n    else:\n        pEmail=''\n    providers.append(\"{\" + pUrl + \",\" +  pEmail + \"}\")\nprint(providers)\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 4318941, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-k_RB1X900hU/AAAAAAAAAAI/AAAAAAAATjE/pABcS_ufcgQ/photo.jpg?sz=128", "display_name": "Tony Simonovsky", "link": "https://stackoverflow.com/users/4318941/tony-simonovsky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1556757477, "creation_date": 1556751256, "question_id": 55943694, "link": "https://stackoverflow.com/questions/55943694/seleniumpython-how-to-locate-several-elements-within-a-specific-element", "title": "Selenium+Python. How to locate several elements within a specific element?", "body": "<p>I'm using Python+Selenium to scrape data from a site which lists companies' info.</p>\n\n<p>For each company I need 2 data points - email and url.</p>\n\n<p>The problem is - for some companies email is not indicated and if I separately get a list of urls and emails I won't be able to fit the pairs (list of emails will be shorter than list of url and I won't know which of the emails is missing).</p>\n\n<p>So I thought maybe there is a way to get root elements of each of the companies' blocks (say, it is div with class \"provider\") and then search inside each of them for email and url.</p>\n\n<p>Is it possible and if yes - how?</p>\n"}, {"tags": ["php", "python", "batch-file", "windows-server-2012-r2"], "comments": [{"owner": {"reputation": 2873, "user_id": 1929959, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be7c8d8d01d02c41df25100e7f294234?s=128&d=identicon&r=PG", "display_name": "Mihai8", "link": "https://stackoverflow.com/users/1929959/mihai8"}, "edited": false, "score": 0, "creation_date": 1556751472, "post_id": 55943685, "comment_id": 98540489, "body": "To run a Python script in PHP you can use shell_exec as can be see in one answer from <a href=\"https://stackoverflow.com/questions/19735250/running-a-python-script-from-php\" title=\"running a python script from php\">stackoverflow.com/questions/19735250/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 11395081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HnDtm.jpg?s=128&g=1", "display_name": "CRUDfunction", "link": "https://stackoverflow.com/users/11395081/crudfunction"}, "reply_to_user": {"reputation": 2873, "user_id": 1929959, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be7c8d8d01d02c41df25100e7f294234?s=128&d=identicon&r=PG", "display_name": "Mihai8", "link": "https://stackoverflow.com/users/1929959/mihai8"}, "edited": false, "score": 0, "creation_date": 1556751753, "post_id": 55943685, "comment_id": 98540536, "body": "As I mentioned I have tried that (actually from the exact answer you linked). Also this is a Windows server."}, {"owner": {"reputation": 34248, "user_id": 269970, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Breov.jpg?s=128&g=1", "display_name": "esqew", "link": "https://stackoverflow.com/users/269970/esqew"}, "edited": false, "score": 0, "creation_date": 1556816060, "post_id": 55943685, "comment_id": 98565713, "body": "If you have indeed found a solution to your issue, consider posting it as a self-answer below so that others may leverage it in the future."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11395081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HnDtm.jpg?s=128&g=1", "display_name": "CRUDfunction", "link": "https://stackoverflow.com/users/11395081/crudfunction"}, "is_accepted": false, "score": 0, "last_activity_date": 1556816398, "creation_date": 1556816398, "answer_id": 55957113, "question_id": 55943685, "link": "https://stackoverflow.com/questions/55943685/running-python-scripts-using-php-on-a-windows-server/55957113#55957113", "title": "Running Python scripts using PHP on a Windows Server", "body": "<p>SOLUTION: My Python file was crashing with no output, I was able to diagnose this with a try/except that printed the error message. Oops!</p>\n"}], "owner": {"reputation": 1, "user_id": 11395081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HnDtm.jpg?s=128&g=1", "display_name": "CRUDfunction", "link": "https://stackoverflow.com/users/11395081/crudfunction"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 365, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1556816398, "creation_date": 1556751172, "last_edit_date": 1556815338, "question_id": 55943685, "link": "https://stackoverflow.com/questions/55943685/running-python-scripts-using-php-on-a-windows-server", "title": "Running Python scripts using PHP on a Windows Server", "body": "<p>SOLUTION: My Python file was crashing with no output, I was able to diagnose this with a try/except that printed the error message. Oops!</p>\n\n<p>I have a Windows 2012R2 IIS server set up to display websites that exist within a GitHub repo. After pulling the pages down from the repo I need to process them using a Python script, up to this point this happens twice a day as a scheduled task. The users would like to be able to run the batch file that updates/processes the files by clicking a button in the admin panel of the site. To do this I have created a PHP page that is supposed to execute the same batch file that the scheduled task uses. The problem I am running into is when the batch runs the git commands are executed just fine, but the Python script does not run.</p>\n\n<p>I have already tried running the batch file using exec(), system(), and shell_exec(). I also tried running the batch file from a powershell script that runs the batch file. I'm guessing the PHP doesn't have the needed permissions to run Python files. Which is why I also tried passing Admin credentials to powershell through shell_exec. All of these have failed.</p>\n\n<p>Here is watch the batch file looks like</p>\n\n<pre><code>cd C:\\inetpub\\wwwroot\ngit fetch --all\ngit reset --hard master\ngit pull https://username:password@github.com/user/repo_name\ncd C:\\inetpub\nC:\\Python37\\python C:\\inetpub\\api_replace.py\n</code></pre>\n\n<p>And this is what I currently have in the PHP file.</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>&lt;?php\nsession_start();\nif(!isset($_SESSION[\"admin\"]) || $_SESSION[\"admin\"] !== true){\n    header(\"location: login.php\");\n    exit;\n}\n\n$shellout = shell_exec('powershell C:\\inetpub\\refresh_pages.bat server_name\\Administrator password');\necho $shellout\n?&gt;\n</code></pre>\n\n<p>I have also tried running the Python file directly through exec(), system(), and shell_exec().</p>\n\n<p>The results of the git pull show up on the page, but none of the print statements from the Python file do. The necessary file processing also does not occur.</p>\n"}, {"tags": ["python", "keras", "reinforcement-learning"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 10437878, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vLPwSD3WJvg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVoMjDZBxLW1T36Z2-jGYHsOeFoaA/mo/photo.jpg?sz=128", "display_name": "Mika", "link": "https://stackoverflow.com/users/10437878/mika"}, "edited": false, "score": 0, "creation_date": 1556819376, "post_id": 55948320, "comment_id": 98567112, "body": "Thanks for the answer. I have couple of points that confused me. 1) When you start learning, you have no samples so I draw random actions uniformly, so in the initial fitting my old probability distribution is 1/n_actions, right? 2) When an episode ends and a new one starts, what is the old probability distribution, uniform?"}, {"owner": {"reputation": 484, "user_id": 9015277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BeUpn.jpg?s=128&g=1", "display_name": "mkisantal", "link": "https://stackoverflow.com/users/9015277/mkisantal"}, "reply_to_user": {"reputation": 101, "user_id": 10437878, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vLPwSD3WJvg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVoMjDZBxLW1T36Z2-jGYHsOeFoaA/mo/photo.jpg?sz=128", "display_name": "Mika", "link": "https://stackoverflow.com/users/10437878/mika"}, "edited": false, "score": 0, "creation_date": 1556868653, "post_id": 55948320, "comment_id": 98581101, "body": "I&#39;m not sure I&#39;m getting your questions right, but I try to answer it. In general in deep RL you have a policy, which is represented by a neural network. For discrete actions you use a soft-max output layer, and this <b>is</b> your probability distribution over actions. You act in the environment by sampling from the actions according to your policy network&#39;s output probabilities.  1) At first you randomly initialize your network, so the initial distribution is most probably fairly close to uniform.  2) I don&#39;t think so."}, {"owner": {"reputation": 101, "user_id": 10437878, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vLPwSD3WJvg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVoMjDZBxLW1T36Z2-jGYHsOeFoaA/mo/photo.jpg?sz=128", "display_name": "Mika", "link": "https://stackoverflow.com/users/10437878/mika"}, "edited": false, "score": 0, "creation_date": 1556902892, "post_id": 55948320, "comment_id": 98599285, "body": "I found two implementations of PPO in github, <a href=\"https://github.com/OctThe16th/PPO-Keras/blob/master/Main.py\" rel=\"nofollow noreferrer\">github.com/OctThe16th/PPO-Keras/blob/master/Main.py</a> and <a href=\"https://github.com/liziniu/RL-PPO-Keras/blob/master/ppo.py\" rel=\"nofollow noreferrer\">github.com/liziniu/RL-PPO-Keras/blob/master/ppo.py</a>. They both use dummy_value and dummy_action=np.zeros((1, NUM_ACTIONS)), np.zeros((1, 1)), respectively, to get action using trained model . Why would they use zero values for action prediction?"}, {"owner": {"reputation": 484, "user_id": 9015277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BeUpn.jpg?s=128&g=1", "display_name": "mkisantal", "link": "https://stackoverflow.com/users/9015277/mkisantal"}, "reply_to_user": {"reputation": 101, "user_id": 10437878, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vLPwSD3WJvg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVoMjDZBxLW1T36Z2-jGYHsOeFoaA/mo/photo.jpg?sz=128", "display_name": "Mika", "link": "https://stackoverflow.com/users/10437878/mika"}, "edited": false, "score": 1, "creation_date": 1556916214, "post_id": 55948320, "comment_id": 98604301, "body": "In the first linked implementation the policy network gets the previous policy output and  action value as inputs. At the first step this is just substituted with zeros (the dummy vectors). So it&#39;s only needed for the neural network (it needs the same number of inputs every time), but not a necessary part of the algorithm itself."}, {"owner": {"reputation": 484, "user_id": 9015277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BeUpn.jpg?s=128&g=1", "display_name": "mkisantal", "link": "https://stackoverflow.com/users/9015277/mkisantal"}, "reply_to_user": {"reputation": 101, "user_id": 10437878, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vLPwSD3WJvg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVoMjDZBxLW1T36Z2-jGYHsOeFoaA/mo/photo.jpg?sz=128", "display_name": "Mika", "link": "https://stackoverflow.com/users/10437878/mika"}, "edited": false, "score": 1, "creation_date": 1556916284, "post_id": 55948320, "comment_id": 98604320, "body": "btw I think we are getting a bit further from your original question. Feel free to post another question, but if you value the answer I gave, please consider marking it as an accepted answer."}], "tags": [], "owner": {"reputation": 484, "user_id": 9015277, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BeUpn.jpg?s=128&g=1", "display_name": "mkisantal", "link": "https://stackoverflow.com/users/9015277/mkisantal"}, "is_accepted": true, "score": 2, "last_activity_date": 1556785285, "creation_date": 1556785285, "answer_id": 55948320, "question_id": 55943678, "link": "https://stackoverflow.com/questions/55943678/how-to-implement-proximal-policy-optimization-ppo-algorithm-for-classical-cont/55948320#55948320", "title": "How to implement Proximal Policy Optimization (PPO) Algorithm for classical control problems?", "body": "<p>I'm answering your question from a general RL point of view, I don't think the particular algorithm (PPO) makes any difference in this question.</p>\n\n<p>I think there is no fundamental differences, both can be seen as discrete control problems. In a game you observe the state, then choose an action and act according to it, and receive reward an the observation of the subsequent state.</p>\n\n<p>Now if you take a simple control problem, instead of a game you probably have a simulation (or just a very simple dynamic model) that describes the behavior of your problem. For example the equations of motion for an inverted pendulum (another classical control problem). In some case you might directly interact with the real system, not a model of it, but this is rare as it can be really slow, and the typical sample complexities of RL algorithms make learning on a real (physical) system less practical.</p>\n\n<p>Essentially you interact with the model of your problem just the same way as you do with a game: you observe a state, take an action and act, and observe the next state. The only difference is that while in games reward is usually pre-defined (some score or goal state), probably you need to define the reward function for your problem. But again, in many cases you also need to define rewards for games, so this is not a major difference either. </p>\n"}], "owner": {"reputation": 101, "user_id": 10437878, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-vLPwSD3WJvg/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVoMjDZBxLW1T36Z2-jGYHsOeFoaA/mo/photo.jpg?sz=128", "display_name": "Mika", "link": "https://stackoverflow.com/users/10437878/mika"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 0, "accepted_answer_id": 55948320, "answer_count": 1, "score": 1, "last_activity_date": 1556785285, "creation_date": 1556751110, "question_id": 55943678, "link": "https://stackoverflow.com/questions/55943678/how-to-implement-proximal-policy-optimization-ppo-algorithm-for-classical-cont", "title": "How to implement Proximal Policy Optimization (PPO) Algorithm for classical control problems?", "body": "<p>I am trying to implement clipped PPO algorithm for classical control task like keeping room temperature, charge of battery, etc. within certain limits. So far I've seen the implementations in game environments only. My question is the game environments and classical control problems are different when it comes to the implementation of the clipped PPO algorithm? If they are, help and tips on how to implement the algorithm for my case are appreciated.</p>\n"}, {"tags": ["python", "machine-learning", "mnist"], "answers": [{"comments": [{"owner": {"reputation": 680, "user_id": 4665371, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15216032392f58f35467a320cd6076c7?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4665371/david"}, "edited": false, "score": 0, "creation_date": 1556821513, "post_id": 55947565, "comment_id": 98568047, "body": "@Zultar,  weights[idx][jdx] -= alpha * weight_deltas[idx][jdx] is for updating the weights. about the gradient: weight_deltas = outer_prod(x_train[i], delta). I think it is obvious to see the parts for calculating the functions. There are a few function definitions at the beginning of the code. if you ignore them, you may find the core of the code. As I told, the code works perfectly for multiple inputs/outputs, so I assume the code itself works but when I tried to use it for MNIST, everything goes crazy. Thanks anyway for your comment."}, {"owner": {"reputation": 9, "user_id": 11340484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cuIbT.jpg?s=128&g=1", "display_name": "Zulthar", "link": "https://stackoverflow.com/users/11340484/zulthar"}, "reply_to_user": {"reputation": 680, "user_id": 4665371, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15216032392f58f35467a320cd6076c7?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4665371/david"}, "edited": false, "score": 0, "creation_date": 1556868953, "post_id": 55947565, "comment_id": 98581232, "body": "Hello! Yes, you are right. I&#39;m sorry I misread some parts. But you say &quot;  For single input and output, the code works, but when it comes to real datasets (which in this case is 784 inputs to 10 outputs),&quot;  What I understand is that when you give as an input a 2-dimensional matrix instead of a vector then you get a numerical error. This sounds to me as exploding gradient. Do you use any activation function? On a quick check, I cannot easily see. Maybe it&#39;s a good idea to format a bit your code to increase readability."}, {"owner": {"reputation": 680, "user_id": 4665371, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15216032392f58f35467a320cd6076c7?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4665371/david"}, "edited": false, "score": 0, "creation_date": 1556917351, "post_id": 55947565, "comment_id": 98604646, "body": "thanks, I will go ahead and clean the code. I mean that if I have the code for restricted inputes, say 2 input and 2 ouputs, the code coverges to almost zero as the error. But I cannot get why it does not work when having the weight sized of 784x10 instead of a weight sized of 2x2. There is no activation function."}, {"owner": {"reputation": 9, "user_id": 11340484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cuIbT.jpg?s=128&g=1", "display_name": "Zulthar", "link": "https://stackoverflow.com/users/11340484/zulthar"}, "reply_to_user": {"reputation": 680, "user_id": 4665371, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15216032392f58f35467a320cd6076c7?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4665371/david"}, "edited": false, "score": 0, "creation_date": 1557047651, "post_id": 55947565, "comment_id": 98628909, "body": "I&#39;d suggest you add the ReLU at the output of each hidden layer. This might actually correct everything."}], "tags": [], "owner": {"reputation": 9, "user_id": 11340484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cuIbT.jpg?s=128&g=1", "display_name": "Zulthar", "link": "https://stackoverflow.com/users/11340484/zulthar"}, "is_accepted": false, "score": -1, "last_activity_date": 1556782076, "creation_date": 1556782076, "answer_id": 55947565, "question_id": 55943659, "link": "https://stackoverflow.com/questions/55943659/my-python-code-for-mnist-dataset-shows-gigantic-error-values-what-i-am-missing/55947565#55947565", "title": "My python code for MNIST dataset shows gigantic error values, what I am missing?", "body": "<p>I see a lot of mistakes here.\nOne of the main benefits of using NN libraries like tensorflow, pyTorch etc is that they take care of the beautiful, yet pretty mindbending, linear algebra parts for you.\nFor examples, all the weights of a neural network are being initialized in a special way so that they are neither greater than 1, nor much less than 1, else, the gradients do vanish or explode too quickly.\nAlso, it's not clear where you are computing your gradients, updating the cost function, etc. To compute the gradients you need to go to the log space and come back so you avoid again the floating point error which will lead to gradient explosion (thus the infinity error). :)\nI'd suggest you get a better look in the theoretical part and then try to implement each part separately.\nCheers,</p>\n"}, {"tags": [], "owner": {"reputation": 680, "user_id": 4665371, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15216032392f58f35467a320cd6076c7?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4665371/david"}, "is_accepted": true, "score": 0, "last_activity_date": 1556993974, "creation_date": 1556993974, "answer_id": 55985561, "question_id": 55943659, "link": "https://stackoverflow.com/questions/55943659/my-python-code-for-mnist-dataset-shows-gigantic-error-values-what-i-am-missing/55985561#55985561", "title": "My python code for MNIST dataset shows gigantic error values, what I am missing?", "body": "<p>I finally find the answer and that is \"<a href=\"https://en.wikipedia.org/wiki/Vanishing_gradient_problem\" rel=\"nofollow noreferrer\">Gradient Clipping</a>\".\nThe thing was when the gradient is being calculated, it is needed to be restricted (normalized) to avoid gradient explosion.</p>\n"}], "owner": {"reputation": 680, "user_id": 4665371, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/15216032392f58f35467a320cd6076c7?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/4665371/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 55985561, "answer_count": 2, "score": 0, "last_activity_date": 1556993974, "creation_date": 1556750995, "last_edit_date": 1556821834, "question_id": 55943659, "link": "https://stackoverflow.com/questions/55943659/my-python-code-for-mnist-dataset-shows-gigantic-error-values-what-i-am-missing", "title": "My python code for MNIST dataset shows gigantic error values, what I am missing?", "body": "<p>Below you can find my code which is my first serious code for teaching myself machine learning and Python. I tried to write the code from scratch without using libraries like NumPy. For single input and output, the code works, but when it comes to real datasets (which in this case is 784 inputs to 10 outputs), it returns infinity as the error. I checked whatever I thought that might be the problem without success. </p>\n\n<p>The code may be a dirty solution. I started with the code from studying Trask Github and his code for multiple input/output works, but when I modified it to use MNIST, everything becomes crazy.\nCould someone take a look and help me to know what I am missing and what the problem(s) is(are)? Appreciated.</p>\n\n<pre><code>for i in range (x_train.shape[0]):\n    x_labels[i,x_label[i]]=1\ndef w_sum(a,b):\n    assert(len(a) == len(b))\n    output = 0\n    for i in range(len(a)):\n        output += (a[i] * b[i])\n    return output\n\ndef neural_network(input1, weights):\n    pred = vect_mat_mul(input1,weights)\n    return pred\n\ndef vect_mat_mul(vect,matrix):\n    output = np.zeros(10)\n    for i in range(10):\n\n        output[i] = w_sum(vect[0],matrix[:,i])\n\n    return output\ndef outer_prod(a, b):\n    out = np.zeros((len(a), len(b)))\n    for i in range(len(a)):\n        for j in range(len(b)):\n            out[i][j] = a[i] * b[j]\n    return out\n\n(x_train,x_label),(t_test,t_label)=ks.datasets.mnist.load_data()\nx_train=x_train.reshape(x_train.shape[0],28*28)\nweights=np.random.rand(784,10)\nx_labels=np.zeros((x_train.shape[0],10))\nalpha = 0.00001\n\nfor i in range(x_train.shape[0]):\n    error = np.zeros(10)\n    delta = np.zeros(10)\n    for iter in range(50):\n        x_train_to_NN = np.array([x_train[i]])\n        pred = neural_network(x_train_to_NN, weights)\n        for j in range(10):\n            error[j] = (pred[j] - x_labels[i, j]) ** 2\n            delta[j] = pred[j] - x_labels[i, j]\n        weight_deltas = outer_prod(x_train[i], delta) #calculate the gradient\n        for idx in range(784):\n            for jdx in range(10):\n                weights[idx][jdx] -= alpha * weight_deltas[idx][jdx] #update weight matrix\n\nprint('key=', i, '\\n Error=', error, '\\n Delta=', delta, '\\n Prediction=', pred)\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "jupyter-notebook"], "answers": [{"comments": [{"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "edited": false, "score": 0, "creation_date": 1556751492, "post_id": 55943705, "comment_id": 98540492, "body": "Just trying to understand, you had to use <code>reset_index</code> to create an index column for your &#39;i&#39; value since you couldnt select ColA or ColB, and your j value is just an arbitrary name for whats after the stub names?"}, {"owner": {"reputation": 67, "user_id": 10371991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9f92525731e8848563f90d368027268?s=128&d=identicon&r=PG&f=1", "display_name": "Annie", "link": "https://stackoverflow.com/users/10371991/annie"}, "edited": false, "score": 0, "creation_date": 1556751719, "post_id": 55943705, "comment_id": 98540532, "body": "Hi Terry, thank you for your help. I really appreciate it. I just updated the original question, adding the <code>ID</code> and <code>Date</code> columns, which actually made the problem a bit different. Could you please take a look and see if you could help? Thank you!"}, {"owner": {"reputation": 2311, "user_id": 5847854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2232315d77a11d67d885bf592226fe12?s=128&d=identicon&r=PG&f=1", "display_name": "Terry", "link": "https://stackoverflow.com/users/5847854/terry"}, "reply_to_user": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "edited": false, "score": 0, "creation_date": 1556751834, "post_id": 55943705, "comment_id": 98540551, "body": "@BenPap Yes, That&#39;s right, you made the correct reading, I add the output without the <code>reset_index()</code> to facilitate the visualization of the wholeprocess"}, {"owner": {"reputation": 2311, "user_id": 5847854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2232315d77a11d67d885bf592226fe12?s=128&d=identicon&r=PG&f=1", "display_name": "Terry", "link": "https://stackoverflow.com/users/5847854/terry"}, "reply_to_user": {"reputation": 67, "user_id": 10371991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9f92525731e8848563f90d368027268?s=128&d=identicon&r=PG&f=1", "display_name": "Annie", "link": "https://stackoverflow.com/users/10371991/annie"}, "edited": false, "score": 0, "creation_date": 1556752776, "post_id": 55943705, "comment_id": 98540717, "body": "@Annie Can you confirm if my output is correct? in your expected output have <code>date1</code> in the two last rows. In my have <code>date2</code>"}, {"owner": {"reputation": 67, "user_id": 10371991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9f92525731e8848563f90d368027268?s=128&d=identicon&r=PG&f=1", "display_name": "Annie", "link": "https://stackoverflow.com/users/10371991/annie"}, "edited": false, "score": 0, "creation_date": 1556753116, "post_id": 55943705, "comment_id": 98540785, "body": "Hi Terry, sorry for the typo, the expected output should have <code>date2</code> in the last 3 rows. However, as I run the code on my dataset (a more complex version of the one in this question: 4 columns in the stubnames, and 3 columns to use as the id_variable), and I got an error saying that <code>the id variables need to uniquely identify each row.</code>. May I know how to fix this error? Thank you for your time, I really appreciate it."}, {"owner": {"reputation": 2311, "user_id": 5847854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2232315d77a11d67d885bf592226fe12?s=128&d=identicon&r=PG&f=1", "display_name": "Terry", "link": "https://stackoverflow.com/users/5847854/terry"}, "reply_to_user": {"reputation": 67, "user_id": 10371991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9f92525731e8848563f90d368027268?s=128&d=identicon&r=PG&f=1", "display_name": "Annie", "link": "https://stackoverflow.com/users/10371991/annie"}, "edited": false, "score": 0, "creation_date": 1556754908, "post_id": 55943705, "comment_id": 98541098, "body": "@Annie I believe <a href=\"https://stackoverflow.com/a/50856264/5847854\">here</a> have what you need"}, {"owner": {"reputation": 67, "user_id": 10371991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9f92525731e8848563f90d368027268?s=128&d=identicon&r=PG&f=1", "display_name": "Annie", "link": "https://stackoverflow.com/users/10371991/annie"}, "edited": false, "score": 0, "creation_date": 1556755536, "post_id": 55943705, "comment_id": 98541208, "body": "Hi Terry, thank you for sharing with me the reference. I already tried that but it still didn&#39;t work for my case. I still got the same error saying that <code>the id variables need to uniquely identify each row.</code> Do you know if there is any other way for me to fix it? Thank you!"}, {"owner": {"reputation": 2311, "user_id": 5847854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2232315d77a11d67d885bf592226fe12?s=128&d=identicon&r=PG&f=1", "display_name": "Terry", "link": "https://stackoverflow.com/users/5847854/terry"}, "reply_to_user": {"reputation": 67, "user_id": 10371991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9f92525731e8848563f90d368027268?s=128&d=identicon&r=PG&f=1", "display_name": "Annie", "link": "https://stackoverflow.com/users/10371991/annie"}, "edited": false, "score": 0, "creation_date": 1556756260, "post_id": 55943705, "comment_id": 98541317, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/192694/discussion-between-terry-and-annie\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2311, "user_id": 5847854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2232315d77a11d67d885bf592226fe12?s=128&d=identicon&r=PG&f=1", "display_name": "Terry", "link": "https://stackoverflow.com/users/5847854/terry"}, "is_accepted": false, "score": 4, "last_activity_date": 1556752071, "last_edit_date": 1556752071, "creation_date": 1556751320, "answer_id": 55943705, "question_id": 55943641, "link": "https://stackoverflow.com/questions/55943641/how-to-split-columns-and-merge-them-as-rows/55943705#55943705", "title": "How to split columns and merge them as rows?", "body": "<p>you need <code>wide_to_long</code></p>\n\n<pre><code>pd.wide_to_long(df.reset_index(), stubnames = ['ColA', 'ColB'], i = 'index', j = 'value').reset_index(drop = True)\n\n    ColA    ColB\n0   1   2\n1   7   8\n2   3   4\n3   9   10\n4   5   6\n5   11  12\n</code></pre>\n\n<hr>\n\n<p><strong>Edit</strong><br>\nOutput without <code>reset_index()</code></p>\n\n<pre><code>pd.wide_to_long(df.reset_index(), stubnames = ['ColA', 'ColB'], i = 'index', j = 'value')\n            ColA    ColB\nindex   value       \n0       1   1       2\n1       1   7       8\n0       2   3       4\n1       2   9       10\n0       3   5       6\n1      3    11      12\n</code></pre>\n\n<hr>\n\n<p><strong>Edit2</strong> <br>\nWith the new data sample provide by OP:</p>\n\n<pre><code>pd.wide_to_long(df, stubnames = ['ColA', 'ColB'], i = ['ID', 'Date'], j = 'value').reset_index([0,1])\n\n    ID  Date    ColA    ColB\nvalue               \n1   id1 date1   1   2\n2   id1 date1   3   4\n3   id1 date1   5   6\n1   id2 date2   7   8\n2   id2 date2   9   10\n3   id2 date2   11  12\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 10371991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9f92525731e8848563f90d368027268?s=128&d=identicon&r=PG&f=1", "display_name": "Annie", "link": "https://stackoverflow.com/users/10371991/annie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "closed_date": 1556754786, "answer_count": 1, "score": 1, "last_activity_date": 1556752992, "creation_date": 1556750841, "last_edit_date": 1556752992, "question_id": 55943641, "link": "https://stackoverflow.com/questions/55943641/how-to-split-columns-and-merge-them-as-rows", "closed_reason": "Duplicate", "title": "How to split columns and merge them as rows?", "body": "<p>I have a data frame as follows:</p>\n\n<pre><code>ID    Date   ColA1   ColB1   ColA2   ColB2   ColA3   ColB3 \nid1   date1   1        2      3        4       5       6      \nid2   date2   7        8      9        10      11      12\n</code></pre>\n\n<p>How can I split the columns <code>ColA2</code>, <code>ColB2</code>, <code>ColA3</code>, <code>ColB3</code> and merge them again to the dataset as rows (considering the <code>ID</code> and <code>Date</code> columns)?</p>\n\n<p>Expected output:</p>\n\n<pre><code>ID   Date     ColA  ColB\nid1  date1    1      2\nid1  date1    3      4\nid1  date1    5      6\nid2  date2    7      8\nid2  date2    9      10\nid2  date2    11     12\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "python-3.x", "tkinter", "cairo", "rsvg"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 3, "creation_date": 1556751290, "post_id": 55943631, "comment_id": 98540442, "body": "show your code."}, {"owner": {"reputation": 600, "user_id": 11439134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bdd204e5f42f0fcf9c2c95a94c7746f?s=128&d=identicon&r=PG&f=1", "display_name": "Andoo", "link": "https://stackoverflow.com/users/11439134/andoo"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 2, "creation_date": 1556757172, "post_id": 55943631, "comment_id": 98541454, "body": "Hi, the code I mainly used is present in the lase and 2nd last links."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1556757616, "post_id": 55943631, "comment_id": 98541530, "body": "code in links work but your code not. So if you show code then we can search differences."}, {"owner": {"reputation": 600, "user_id": 11439134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bdd204e5f42f0fcf9c2c95a94c7746f?s=128&d=identicon&r=PG&f=1", "display_name": "Andoo", "link": "https://stackoverflow.com/users/11439134/andoo"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1556880790, "post_id": 55943631, "comment_id": 98587348, "body": "I added the code to the question. I think the errors are from how I installed cairo and rsvg rather than the code itself."}, {"owner": {"reputation": 1205, "user_id": 10713244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1176ac393f86b642dbf66e2b2fb6292?s=128&d=identicon&r=PG&f=1", "display_name": "\u0411\u043e\u0433\u0434\u0430\u043d \u041e\u043f\u0438\u0440", "link": "https://stackoverflow.com/users/10713244/%d0%91%d0%be%d0%b3%d0%b4%d0%b0%d0%bd-%d0%9e%d0%bf%d0%b8%d1%80"}, "edited": false, "score": 0, "creation_date": 1571851897, "post_id": 55943631, "comment_id": 103380578, "body": "I think that you should be able to use PIL.Image and PIL.ImageTk to do so"}, {"owner": {"reputation": 600, "user_id": 11439134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bdd204e5f42f0fcf9c2c95a94c7746f?s=128&d=identicon&r=PG&f=1", "display_name": "Andoo", "link": "https://stackoverflow.com/users/11439134/andoo"}, "reply_to_user": {"reputation": 1205, "user_id": 10713244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1176ac393f86b642dbf66e2b2fb6292?s=128&d=identicon&r=PG&f=1", "display_name": "\u0411\u043e\u0433\u0434\u0430\u043d \u041e\u043f\u0438\u0440", "link": "https://stackoverflow.com/users/10713244/%d0%91%d0%be%d0%b3%d0%b4%d0%b0%d0%bd-%d0%9e%d0%bf%d0%b8%d1%80"}, "edited": false, "score": 0, "creation_date": 1573906349, "post_id": 55943631, "comment_id": 104046909, "body": "@\u0411\u043e\u0433\u0434\u0430\u043d\u041e\u043f\u0438\u0440 I can&#39;t figure out how to load a svg from the hard drive or internet with PIL. If you have any insights, I&#39;d love to know."}, {"owner": {"reputation": 1205, "user_id": 10713244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1176ac393f86b642dbf66e2b2fb6292?s=128&d=identicon&r=PG&f=1", "display_name": "\u0411\u043e\u0433\u0434\u0430\u043d \u041e\u043f\u0438\u0440", "link": "https://stackoverflow.com/users/10713244/%d0%91%d0%be%d0%b3%d0%b4%d0%b0%d0%bd-%d0%9e%d0%bf%d0%b8%d1%80"}, "edited": false, "score": 0, "creation_date": 1585649300, "post_id": 55943631, "comment_id": 107828640, "body": "Take a look at <a href=\"https://pypi.org/project/svglib/\" rel=\"nofollow noreferrer\">pypi.org/project/svglib</a>. In its example the svg is converted into png which allowes you to use PIL"}, {"owner": {"reputation": 2521, "user_id": 10742758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df3eef31d2a93e29cc7cb907d3b6c956?s=128&d=identicon&r=PG", "display_name": "MaxiMouse", "link": "https://stackoverflow.com/users/10742758/maximouse"}, "edited": false, "score": 0, "creation_date": 1585661818, "post_id": 55943631, "comment_id": 107835534, "body": "Did you try renaming <code>rsvg.py</code> to something else?"}], "answers": [{"comments": [{"owner": {"reputation": 600, "user_id": 11439134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bdd204e5f42f0fcf9c2c95a94c7746f?s=128&d=identicon&r=PG&f=1", "display_name": "Andoo", "link": "https://stackoverflow.com/users/11439134/andoo"}, "edited": false, "score": 1, "creation_date": 1585693823, "post_id": 60951861, "comment_id": 107851768, "body": "Thanks! The question was about rsvg, though. Any insights? Also, if it is possible to use svglib/reportlab without downloading the shape? Is it possible to somehow skip reportlab altogether?"}], "tags": [], "owner": {"reputation": 1205, "user_id": 10713244, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1176ac393f86b642dbf66e2b2fb6292?s=128&d=identicon&r=PG&f=1", "display_name": "\u0411\u043e\u0433\u0434\u0430\u043d \u041e\u043f\u0438\u0440", "link": "https://stackoverflow.com/users/10713244/%d0%91%d0%be%d0%b3%d0%b4%d0%b0%d0%bd-%d0%9e%d0%bf%d0%b8%d1%80"}, "is_accepted": false, "score": 3, "last_activity_date": 1585661623, "creation_date": 1585661623, "answer_id": 60951861, "question_id": 55943631, "link": "https://stackoverflow.com/questions/55943631/putting-svg-images-into-tkinter-frame/60951861#60951861", "title": "Putting .SVG images into tkinter Frame", "body": "<p>I've managed to do it using svglib:</p>\n\n<pre><code>from svglib.svglib import svg2rlg\nfrom reportlab.graphics import renderPDF, renderPM\n\ndrawing = svg2rlg(\"safari-pinned-tab.f387b3f2.svg\")\nrenderPM.drawToFile(drawing, \"temp.png\", fmt=\"PNG\")\n\n\nfrom tkinter import *\n\ntk = Tk()\n\n\nfrom PIL import Image, ImageTk\n\nimg = Image.open('temp.png')\npimg = ImageTk.PhotoImage(img)\nsize = img.size\n\n\nframe = Canvas(tk, width=size[0], height=size[1])\nframe.pack()\nframe.create_image(0,0,anchor='nw',image=pimg)\n\ntk.mainloop()\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 600, "user_id": 11439134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bdd204e5f42f0fcf9c2c95a94c7746f?s=128&d=identicon&r=PG&f=1", "display_name": "Andoo", "link": "https://stackoverflow.com/users/11439134/andoo"}, "is_accepted": true, "score": 1, "last_activity_date": 1608042605, "last_edit_date": 1608042605, "creation_date": 1607993105, "answer_id": 65298522, "question_id": 55943631, "link": "https://stackoverflow.com/questions/55943631/putting-svg-images-into-tkinter-frame/65298522#65298522", "title": "Putting .SVG images into tkinter Frame", "body": "<p>I have finally managed to convert SVGs with Python 3 and PyCairo on Windows, but without rsvg. Rsvg still won't cooperate, but apparently it is still possible to load SVGs without it.</p>\n<p>The installation process is not very straightforward, but hey, it works!</p>\n<p>\u00a0</p>\n<p><strong>Instructions:</strong></p>\n<p>Note that these instructions are Windows-specific. On Linux, one can simply install pycairo via pip and use PyGObject's rsvg.</p>\n<ol>\n<li>Download the pycairo .whl file for your Windows installation from <a href=\"https://www.lfd.uci.edu/%7Egohlke/pythonlibs/\" rel=\"nofollow noreferrer\">https://www.lfd.uci.edu/~gohlke/pythonlibs/</a>.</li>\n<li>Install the downloaded file via pip: <code>pip install /path/to/your/pycairo/whl.whl</code> If that doesn't work, try using a different file from the above link. It may take a few tries.</li>\n<li>Run <code>pip install tinycss cssselect2 defusedxml</code>. This will install the dependacies for the next step.</li>\n<li>Go to <a href=\"https://github.com/Kozea/CairoSVG\" rel=\"nofollow noreferrer\">https://github.com/Kozea/CairoSVG</a>. Download and extract the <code>cairosvg</code> folder to your site packages folder, enabling your code to import it.</li>\n<li>Go to the <code>cairosvg</code> folder and open the file <code>surface.py</code>.</li>\n<li>Look for the line that says <code>import cairocffi as cairo</code> and replace it with <code>import cairo</code></li>\n</ol>\n<p>That should be enough to use PyCairo on Windows without a C++ compiler. Unfortionately, this still doesn't fix the rsvg issues (instead it replaces rsvg), but at least it works.</p>\n<p>\u00a0</p>\n<p><strong>Here are some examples of how to use it:</strong></p>\n<p>To convert an SVG to a PNG:</p>\n<pre><code>import cairosvg\ncairosvg.svg2png(url=&quot;example.svg&quot;, write_to=&quot;output.png&quot;)\n</code></pre>\n<p>To put an SVG into a Tkinter window without downloading the output:</p>\n<pre><code>import cairosvg\nimport io\nimport tkinter as tk\nfrom PIL import Image,ImageTk\n\nmain=tk.Tk()\n\nimage_data = cairosvg.svg2png(url=&quot;example.svg&quot;)\nimage = Image.open(io.BytesIO(image_data))\ntk_image = ImageTk.PhotoImage(image)\n\nbutton=tk.Label(main, image=tk_image)\nbutton.pack(expand=True, fill=&quot;both&quot;)\nmain.mainloop()\n</code></pre>\n<p>\u00a0</p>\n<p>Since it still uses Cairo, this solution is very quick, and has few dependencies.</p>\n<p>Hopefully this answer will be useful for anyone reading this in the future!</p>\n"}], "owner": {"reputation": 600, "user_id": 11439134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bdd204e5f42f0fcf9c2c95a94c7746f?s=128&d=identicon&r=PG&f=1", "display_name": "Andoo", "link": "https://stackoverflow.com/users/11439134/andoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4377, "favorite_count": 2, "accepted_answer_id": 65298522, "answer_count": 2, "score": 13, "last_activity_date": 1608042605, "creation_date": 1556750757, "last_edit_date": 1560423008, "question_id": 55943631, "link": "https://stackoverflow.com/questions/55943631/putting-svg-images-into-tkinter-frame", "title": "Putting .SVG images into tkinter Frame", "body": "<p>I have been trying to put the image from <a href=\"https://betacssjs.chesscomfiles.com/bundles/web/favicons/safari-pinned-tab.f387b3f2.svg\" rel=\"noreferrer\">https://betacssjs.chesscomfiles.com/bundles/web/favicons/safari-pinned-tab.f387b3f2.svg</a> into a Tkinter frame. I found from the post <a href=\"https://stackoverflow.com/questions/22583035/can-you-display-an-image-inside-of-a-python-program-without-using-pygame\">here</a> that it is possible with the help from rsvg and cairo.</p>\n\n<p>I was using python 3.6 on Windows 10. I got rsvg from <a href=\"https://github.com/GNOME/librsvg\" rel=\"noreferrer\">here</a> and cairo from <a href=\"https://github.com/vishnubob/cairo\" rel=\"noreferrer\">here</a> and then extracted the folders to the 'C:\\Users...\\site_packages' folder. They import fine but I cannot figure out how to use them. I tried using the code:</p>\n\n<pre><code>import tkinter as tk\nmain=tk.Tk()\nframe=tk.Frame(main)\ndef svgPhotoImage(self,file_path_name):\n        from PIL import Image,ImageTk\n        import rsvg,cairo \n        svg = rsvg.Handle(file=file_path_name)\n        width, height = svg.get_dimension_data()[:2]\n            surface = cairo.ImageSurface(cairo.FORMAT_ARGB32, int(width), int(height))\n            context = cairo.Context(surface)\n            #context.set_antialias(cairo.ANTIALIAS_SUBPIXEL)\n            svg.render_cairo(context)\n            tk_image=ImageTk.PhotoImage('RGBA')\n            image=Image.frombuffer('RGBA',(width,height),surface.get_data(),'raw','BGRA',0,1)\n            tk_image.paste(image)\n            return(tk_image)\n    tk_image=self.svgPhotoImage(filename)\n    frame.configure(image=tk_image)\n</code></pre>\n\n<p>and </p>\n\n<pre><code>#rsvg.py\nimport os\ntry:\n    import rsvg\n    WINDOWS=False\nexcept ImportError:\n    print\"Warning, could not import 'rsvg'\"\n    if os.name == 'nt':\n        print \"Detected windows, creating rsvg.\"\n        #some workarounds for windows\n\n        from ctypes import *\n\n        l=CDLL('librsvg-2-2.dll')\n        g=CDLL('libgobject-2.0-0.dll')\n        g.g_type_init()\n\n        class rsvgHandle():\n            class RsvgDimensionData(Structure):\n                _fields_ = [(\"width\", c_int),\n                            (\"height\", c_int),\n                            (\"em\",c_double),\n                            (\"ex\",c_double)]\n\n            class PycairoContext(Structure):\n                _fields_ = [(\"PyObject_HEAD\", c_byte * object.__basicsize__),\n                            (\"ctx\", c_void_p),\n                            (\"base\", c_void_p)]\n\n            def __init__(self, path):\n                self.path = path\n                error = ''\n                self.handle = l.rsvg_handle_new_from_file(self.path,error)\n\n\n            def get_dimension_data(self):\n                svgDim = self.RsvgDimensionData()\n                l.rsvg_handle_get_dimensions(self.handle,byref(svgDim))\n                return (svgDim.width,svgDim.height)\n\n            def render_cairo(self, ctx):\n                ctx.save()\n                z = self.PycairoContext.from_address(id(ctx))\n                l.rsvg_handle_render_cairo(self.handle, z.ctx)\n                ctx.restore()\n\n\n\n        class rsvgClass():\n            def Handle(self,file):\n                return rsvgHandle(file)\n\n        rsvg = rsvgClass()).\nh = rsvg.Handle(\"box.svg\")\ns = cairo.ImageSurface(cairo.FORMAT_ARGB32, 100, 100)\nctx = cairo.Context(s)\nh.render_cairo(ctx)\n</code></pre>\n\n<p>After trying those scripts, I kept getting the error message:</p>\n\n<pre><code>AttributeError: module 'rsvg' has no attribute 'Handle'\n</code></pre>\n\n<p>I am sure I did something wrong in the process but after hours of searching still could not figure out how to get it to work. I also tried installing pycairo (via pip) but got the error message </p>\n\n<pre><code>ERROR: Command \"'c:\\...\\python36-32\\python.exe' -u -c 'import setuptools, tokenize;__file__='\"'\"'C:\\\\...\\\\pip-install-peqhj3x1\\\\pycairo\\\\setup.py'\"'\"';f=getattr(tokenize, '\"'\"'open'\"'\"', open)(__file__);code=f.read().replace('\"'\"'\\r\\n'\"'\"', '\"'\"'\\n'\"'\"');f.close();exec(compile(code, __file__, '\"'\"'exec'\"'\"'))' install --record 'C:\\...\\Temp\\pip-record-jfozfbuc\\install-record.txt' --single-version-externally-managed --compile\" failed with error code 1 in C:\\...\\pip-install-peqhj3x1\\pycairo\\\n</code></pre>\n\n<p>I have no clue as to what to do now</p>\n\n<blockquote>\n  <p>EDIT: I was finally able to obtain pycairo from\n  <a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/\" rel=\"noreferrer\">https://www.lfd.uci.edu/~gohlke/pythonlibs/</a> and now  have it working.\n  I finally got rsvg to not give me the error message above by referring\n  <a href=\"https://stackoverflow.com/questions/56414829/attributeerror-module-rsvg-has-no-attribute-handle\">here</a>\n  and got the nessary DLL files from\n  <a href=\"https://github.com/jmcb/python-rsvg-dependencies\" rel=\"noreferrer\">here</a>. <strong>Cairo is\n  working fine but RSVG is creating a blank screen.</strong> I tried another\n  7-liner\n  <a href=\"https://stackoverflow.com/questions/56463524/python-svg-converter-creates-empty-file\">here</a>\n  and get the output of a blank file instead of a converted one.\n  Evidently RSVG is not working and I think it is an installation issue\n  (eg. incorrect .dll's). Help?</p>\n</blockquote>\n\n<p>If am trying to use cairo and rsvg because they take up little space and are really fast; wand or some other library is not an option. I just want to be able to put an SVG file into a tkinter frame. If anyone knows how install rsvg properly, I'd appreciate knowing. </p>\n\n<p>Any help would be hugely appreciated.\nThank you for any suggestions.</p>\n"}, {"tags": ["python", "opencv", "computer-vision", "motion"], "answers": [{"tags": [], "owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "is_accepted": true, "score": 6, "last_activity_date": 1556751962, "last_edit_date": 1556751962, "creation_date": 1556751435, "answer_id": 55943724, "question_id": 55943596, "link": "https://stackoverflow.com/questions/55943596/check-only-particular-portion-of-video-feed-in-opencv/55943724#55943724", "title": "Check only particular portion of video feed in OpenCV", "body": "<p>It seems like you want to obtain the region of interest (ROI) for a particular area of each frame. To do this in OpenCV, we can crop the image using bounding box coordinates. Consider <code>(0,0)</code> as the top left corner of the image with left-to-right as the x-direction and top-to-bottom as the y-direction. If we have <code>(x1, y1)</code> as the top-left vertex and <code>(x2,y2)</code> as the bottom-right vertex of a ROI, we can crop the image by:</p>\n\n<pre><code>ROI = frame[y1:y2, x1:x2]\n</code></pre>\n\n<p>As an illustration:</p>\n\n<pre><code>-------------------------------------------\n|                                         | \n|    (x1, y1)                             |\n|      ------------------------           |\n|      |                      |           |\n|      |                      |           | \n|      |         ROI          |           |  \n|      |                      |           |   \n|      |                      |           |   \n|      |                      |           |       \n|      ------------------------           |   \n|                           (x2, y2)      |    \n|                                         |             \n|                                         |             \n|                                         |             \n-------------------------------------------\n</code></pre>\n\n<p>We are able to do this since images are stored as a Numpy array in OpenCV. <a href=\"https://web.archive.org/web/20171224122803/https://docs.scipy.org/doc/numpy-dev/user/quickstart.html\" rel=\"noreferrer\">Here</a> is a great resource for Numpy array indexing and slicing. Once you have the desired ROI, you can do your motion detecting in this region.</p>\n"}], "owner": {"reputation": 91, "user_id": 8005955, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-do-pvhgmwDM/AAAAAAAAAAI/AAAAAAAAABE/mkxe_N_ucgg/photo.jpg?sz=128", "display_name": "MQaiser", "link": "https://stackoverflow.com/users/8005955/mqaiser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1290, "favorite_count": 0, "accepted_answer_id": 55943724, "answer_count": 1, "score": 2, "last_activity_date": 1556751962, "creation_date": 1556750494, "question_id": 55943596, "link": "https://stackoverflow.com/questions/55943596/check-only-particular-portion-of-video-feed-in-opencv", "title": "Check only particular portion of video feed in OpenCV", "body": "<p>How to get webcam video feed, for specific width and height?</p>\n\n<p>I have zero experience with OpenCV library, so I need help in this regard. This code is from geeksforgeeks.com. This is the only thing I have right now.</p>\n\n<p>What I'm trying to achieve is that, I want to detect motion in only specified area of video feed.</p>\n\n<pre><code>import cv2, time, pandas\n\n\n\nfrom datetime import datetime \n\n\n\nstatic_back = None\nmotion_list = [ None, None ] \ntime = [] \ndf = pandas.DataFrame(columns = [\"Start\", \"End\"]) \nvideo = cv2.VideoCapture(0) \n\n\n\nwhile True: \n    check, frame = video.read() \n    motion = 0\n    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY) \n    gray = cv2.GaussianBlur(gray, (21, 21), 0)\n\n\n\nif static_back is None: \n    static_back = gray \n    continue\n\ndiff_frame = cv2.absdiff(static_back, gray) \n\nthresh_frame = cv2.threshold(diff_frame, 30, 255, cv2.THRESH_BINARY)[1] \nthresh_frame = cv2.dilate(thresh_frame, None, iterations = 2) \n\n(cnts, _) = cv2.findContours(thresh_frame.copy(),  \n                   cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE) \n\nfor contour in cnts: \n    if cv2.contourArea(contour) &lt; 50000: \n        continue\n    motion = 1\n\n    (x, y, w, h) = cv2.boundingRect(contour) \n    # making green rectangle arround the moving object \n    cv2.rectangle(frame, (x, y), (x + w, y + h), (0, 255, 0), 3) \n\nmotion_list.append(motion) \n\nmotion_list = motion_list[-2:] \n\nif motion_list[-1] == 1 and motion_list[-2] == 0: \n    time.append(datetime.now()) \n\nif motion_list[-1] == 0 and motion_list[-2] == 1: \n    time.append(datetime.now()) \n\ncv2.imshow(\"Gray Frame\", gray) \n\ncv2.imshow(\"Difference Frame\", diff_frame) \n\ncv2.imshow(\"Threshold Frame\", thresh_frame) \n\ncv2.imshow(\"Color Frame\", frame) \n\nkey = cv2.waitKey(1) \nif key == ord('q'): \n    # if something is movingthen it append the end time of movement \n    if motion == 1: \n        time.append(datetime.now()) \n    break\n\n\nfor i in range(0, len(time), 2): \n    df = df.append({\"Start\":time[i], \"End\":time[i + 1]}, ignore_index = True)\n\ndf.to_csv(\"Time_of_movements.csv\") \nvideo.release() \ncv2.destroyAllWindows()\n</code></pre>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "edited": false, "score": 0, "creation_date": 1556750595, "post_id": 55943593, "comment_id": 98540298, "body": "Have you looked into the <code>json</code> package?"}, {"owner": {"reputation": 21, "user_id": 11423805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f492d2720cf22efe8cab5d07dfc269b?s=128&d=identicon&r=PG&f=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/11423805/unknown"}, "reply_to_user": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "edited": false, "score": 0, "creation_date": 1556750774, "post_id": 55943593, "comment_id": 98540331, "body": "Yes I have but I still need a little help"}, {"owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "edited": false, "score": 0, "creation_date": 1556750824, "post_id": 55943593, "comment_id": 98540342, "body": "Can you post what you have tried. Providing an answer is one thing, helping you figure out the obstacle you&#39;re stuck on is another."}], "answers": [{"tags": [], "owner": {"reputation": 1142, "user_id": 10010216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PvbB.jpg?s=128&g=1", "display_name": "F Blanchet", "link": "https://stackoverflow.com/users/10010216/f-blanchet"}, "is_accepted": false, "score": 0, "last_activity_date": 1556752583, "creation_date": 1556752583, "answer_id": 55943846, "question_id": 55943593, "link": "https://stackoverflow.com/questions/55943593/update-key-value-in-python-in-json-file/55943846#55943846", "title": "Update Key Value In Python In JSON File", "body": "<p>You can read a json file in python as follow:</p>\n\n<pre><code>import json\nwith open('your_file.json') as f:\n    data = json.load(f)\n</code></pre>\n\n<p>Then you access and change the value (for your case):</p>\n\n<pre><code>data['tabs'][0]['views'][4]['class'] = \"\"\n</code></pre>\n\n<p>After having changed the data, you can save it :</p>\n\n<pre><code>with open('your_file.json', 'w') as outfile:\n    json.dump(data, outfile)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11423805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f492d2720cf22efe8cab5d07dfc269b?s=128&d=identicon&r=PG&f=1", "display_name": "Unknown", "link": "https://stackoverflow.com/users/11423805/unknown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1556752583, "creation_date": 1556750489, "question_id": 55943593, "link": "https://stackoverflow.com/questions/55943593/update-key-value-in-python-in-json-file", "title": "Update Key Value In Python In JSON File", "body": "<p>How do I change a value in a json file with python? I want to search and find <code>\"class\": \"DepictionScreenshotsView\"</code> and replace it with <code>\"class\": \"\"</code></p>\n\n<p>JSON File:</p>\n\n<pre><code>{\n   \"minVersion\": \"0.1\",\n   \"class\": \"DepictionTabView\",\n   \"tintColor\": \"#2cb1be\",\n   \"headerImage\": \"\",\n   \"tabs\": [\n      {\n         \"tabname\": \"Details\",\n         \"class\": \"DepictionStackView\",\n         \"tintColor\": \"#2cb1be\",\n         \"views\": [\n            {\n               \"class\": \"DepictionSubheaderView\",\n               \"useBoldText\": true,\n               \"useBottomMargin\": false,\n               \"title\": \"Description\"\n            },\n            {\n               \"class\": \"DepictionMarkdownView\",\n               \"markdown\": \"Some dummy text...\",\n               \"useRawFormat\": true\n            },\n            {\n               \"class\": \"DepictionSeparatorView\"\n            },\n            {\n               \"class\": \"DepictionSubheaderView\",\n               \"useBoldText\": true,\n               \"useBottomMargin\": false,\n               \"title\": \"Screenshots\"\n            },\n            {\n               \"class\": \"DepictionScreenshotsView\",\n               \"itemCornerRadius\": 6,\n               \"itemSize\": \"{160, 284.44444444444}\",\n               \"screenshots\": [\n                  {\n                     \"accessibilityText\": \"Screenshot\",\n                     \"url\": \"http://example.com/image.png\"\n                  }\n               ]\n            },\n            {\n               \"class\": \"DepictionSeparatorView\"\n            },\n            {\n               \"class\": \"DepictionSubheaderView\",\n               \"useBoldText\": true,\n               \"useBottomMargin\": false,\n               \"title\": \"Information\"\n            },\n            {\n               \"class\": \"DepictionTableTextView\",\n               \"title\": \"Author\",\n               \"text\": \"User\"\n            },\n            {\n               \"class\": \"DepictionSpacerView\",\n               \"spacing\": 16\n            },\n            {\n               \"class\": \"DepictionStackView\",\n               \"views\": [\n                  {\n                     \"class\": \"DepictionTableButtonView\",\n                     \"title\": \"Contact\",\n                     \"action\": \"http://example.com/\",\n                     \"openExternal\": true\n                  }\n               ]\n            },\n            {\n               \"class\": \"DepictionSpacerView\",\n               \"spacing\": 16\n            }\n         ]\n      },\n      {\n         \"tabname\": \"History\",\n         \"class\": \"DepictionStackView\",\n         \"views\": [\n            {\n               \"class\": \"DepictionSubheaderView\",\n               \"useBoldText\": true,\n               \"useBottomMargin\": false,\n               \"title\": \"\"\n            },\n            {\n               \"class\": \"DepictionMarkdownView\",\n               \"markdown\": \"&lt;ul&gt;\\n&lt;li&gt;Initial release.&lt;\\/li&gt;\\n&lt;\\/ul&gt;\",\n               \"useRawFormat\": true\n            }\n         ]\n      }\n   ]\n}\n</code></pre>\n"}, {"tags": ["python", "sqlite"], "comments": [{"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 1, "creation_date": 1556750474, "post_id": 55943578, "comment_id": 98540262, "body": "That is the query."}, {"owner": {"reputation": 91, "user_id": 7586561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2f41a7f7d5ccd08c5a611bc26f2f2236?s=128&d=identicon&r=PG&f=1", "display_name": "f42", "link": "https://stackoverflow.com/users/7586561/f42"}, "reply_to_user": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 0, "creation_date": 1556750533, "post_id": 55943578, "comment_id": 98540279, "body": "But I would like to get something as  SELECT * FROM <code>cat</code> WHERE <code>pf</code> = &#39;value&#39; AND <code>cat</code> = &#39;value&#39; AND <code>sub_cat</code> = &#39;value&#39;"}, {"owner": {"reputation": 27648, "user_id": 9952196, "user_type": "registered", "profile_image": "https://graph.facebook.com/10216835866235879/picture?type=large", "display_name": "Shawn", "link": "https://stackoverflow.com/users/9952196/shawn"}, "edited": false, "score": 2, "creation_date": 1556750673, "post_id": 55943578, "comment_id": 98540314, "body": "Do you think the parameters in the query are literally replaced by the values bound to them to make a new string that gets executed? It doesn&#39;t work that way."}, {"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 0, "creation_date": 1556751051, "post_id": 55943578, "comment_id": 98540387, "body": "It&#39;s not that simple, because the database engine never builds the &quot;real&quot; query that you want to retrieve. The parameterized version is the real query from its perspective (if anything if you send a query containing literal values the DB engine is likely doing extra work to parse them out and build a prepared statement). Most likely you&#39;d have to do this yourself by manually replacing each <code>?</code> with the corresponding value, properly formatted in SQL syntax with correct quoting and escaping for strings, etc."}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1556752505, "post_id": 55943578, "comment_id": 98540678, "body": "What problem are you trying to solve by doing this?"}, {"owner": {"reputation": 91, "user_id": 7586561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2f41a7f7d5ccd08c5a611bc26f2f2236?s=128&d=identicon&r=PG&f=1", "display_name": "f42", "link": "https://stackoverflow.com/users/7586561/f42"}, "edited": false, "score": 0, "creation_date": 1556955029, "post_id": 55943578, "comment_id": 98610418, "body": "Actually the field sub_cat can be NULL  If i have in the database :   try - man - NULL try - man - young  SQL will return 1 result pf = &quot;try&quot;   cat = &quot;man&quot;   sub_cat = &quot;young&quot;   cursor.execute(&quot;SELECT * FROM <code>cat</code> WHERE <code>pf</code> = ? AND <code>cat</code> = ? AND <code>sub_cat</code> = ?&quot;, (pf, cat, sub_cat))  but if I have, the following no result are return pf = &quot;try&quot;   cat = &quot;man&quot;   sub_cat = None   cursor.execute(&quot;SELECT * FROM <code>cat</code> WHERE <code>pf</code> = ? AND <code>cat</code> = ? AND <code>sub_cat</code> = ?&quot;, (pf, cat, sub_cat))"}, {"owner": {"reputation": 91, "user_id": 7586561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2f41a7f7d5ccd08c5a611bc26f2f2236?s=128&d=identicon&r=PG&f=1", "display_name": "f42", "link": "https://stackoverflow.com/users/7586561/f42"}, "edited": false, "score": 0, "creation_date": 1556955259, "post_id": 55943578, "comment_id": 98610457, "body": "Should I use a particular query like  cursor.execute(&quot;SELECT * FROM cat WHERE pf = ? AND cat = ? AND sub_cat IS NULL&quot;, (pf, cat)"}], "owner": {"reputation": 91, "user_id": 7586561, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/2f41a7f7d5ccd08c5a611bc26f2f2236?s=128&d=identicon&r=PG&f=1", "display_name": "f42", "link": "https://stackoverflow.com/users/7586561/f42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556752426, "creation_date": 1556750366, "last_edit_date": 1556752426, "question_id": 55943578, "link": "https://stackoverflow.com/questions/55943578/how-get-the-real-query-sent-by-python-to-sqlite", "title": "How get the real query sent by python to sqlite?", "body": "<p>I have the following code and I would like to get the real query sent by python.</p>\n\n<pre><code>pf = \"try\"  \ncat = \"man\"  \nsub_cat = \"young\" \n\ncursor.execute(\"SELECT * FROM `cat` WHERE `pf` = ? AND `cat` = ? AND `sub_cat` = ?\", (pf, cat, sub_cat))\n</code></pre>\n\n<p>How could I do ?\nThe result I would like to get is : </p>\n\n<pre><code>SELECT * FROM `cat` WHERE `pf` = \"try\" AND `cat` = \"man\" AND `sub_cat` = \"young\"\n</code></pre>\n\n<p>Kind regards</p>\n"}, {"tags": ["python", "turtle-graphics"], "comments": [{"owner": {"reputation": 295, "user_id": 10991314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93b213fdc29b8adef7a6c906f9e904d1?s=128&d=identicon&r=PG&f=1", "display_name": "RenauV", "link": "https://stackoverflow.com/users/10991314/renauv"}, "edited": false, "score": 0, "creation_date": 1556750934, "post_id": 55943539, "comment_id": 98540363, "body": "The problem is that your &#39;while True&#39; function is basically running constantly. We need to look for a way for you to run the control of the distance only after bob&#39;s position changes."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 11306464, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GJ7Tm5NNORo/AAAAAAAAAAI/AAAAAAAAAXI/Xyy0Aungofg/photo.jpg?sz=128", "display_name": "Olympias", "link": "https://stackoverflow.com/users/11306464/olympias"}, "edited": false, "score": 0, "creation_date": 1556752243, "post_id": 55943722, "comment_id": 98540623, "body": "This worked perfectly! The only other thing I had to do was put the collision checker under both the phil and bob functions. Thank you so much!"}, {"owner": {"reputation": 7, "user_id": 11306464, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GJ7Tm5NNORo/AAAAAAAAAAI/AAAAAAAAAXI/Xyy0Aungofg/photo.jpg?sz=128", "display_name": "Olympias", "link": "https://stackoverflow.com/users/11306464/olympias"}, "edited": false, "score": 0, "creation_date": 1556753099, "post_id": 55943722, "comment_id": 98540781, "body": "Yep, new to stackoverflow, my bad."}], "tags": [], "owner": {"reputation": 295, "user_id": 10991314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93b213fdc29b8adef7a6c906f9e904d1?s=128&d=identicon&r=PG&f=1", "display_name": "RenauV", "link": "https://stackoverflow.com/users/10991314/renauv"}, "is_accepted": false, "score": 0, "last_activity_date": 1556751421, "creation_date": 1556751421, "answer_id": 55943722, "question_id": 55943539, "link": "https://stackoverflow.com/questions/55943539/when-i-run-my-python-turtle-game-the-graphics-window-stops-responding/55943722#55943722", "title": "When I run my Python Turtle game, the Graphics Window stops responding", "body": "<p>After review, this should work:</p>\n\n<pre><code>import turtle\nimport math\n\nbob = turtle.Turtle()\n\nwn = turtle.Screen()\nwn.bgcolor(\"black\")\nwn.setup(width = 700, height = 700)\nwn.tracer()\n\nborder_pen = turtle.Turtle()\nborder_pen.speed(0)\nborder_pen.color(\"white\")\nborder_pen.penup()\nborder_pen.setposition(-300,-300)\nborder_pen.pendown()\nborder_pen.pensize(3)\n\nfor side in range(4):\n    border_pen.fd(600)\n    border_pen.lt(90)\nborder_pen.hideturtle()\n\nbob.shape(\"triangle\")\nbob.speed(0)\nbob.color(\"blue\")\nbob.penup()\nbob.setpos(-50, 0)\ndef draw():\n    bob.penup()\ndef nodraw():\n    bob.pendown()\n\ndef fd():\n    bob.fd(20)\n    if bob.xcor() &gt; 280:\n        bob.setx(280)\n    if bob.ycor() &gt; 280:\n        bob.sety(280)\n\n    if bob.xcor() &lt; -280:\n        bob.setx(-280)\n    if bob.ycor() &lt;- 280:\n        bob.sety(-280)\n    distance = math.sqrt(math.pow(bob.xcor()-phil.xcor(),2)+math.pow(bob.ycor()-phil.ycor(),2))\n    print(distance)\n    if distance &lt; 20:\n        bob.setposition(-50, 0)\n        phil.setposition(50, 0)\ndef right():\n    bob.right(90)\n\ndef left():\n    bob.left(90)\n\nturtle.listen()\nturtle.onkey(left, \"Left\")\nturtle.onkey(fd, \"Up\")\nturtle.onkey(right, \"Right\")\n\nphil = turtle.Turtle()\nphil.speed(0)\nphil.penup()\nphil.shape(\"triangle\")\nphil.color(\"red\")\nphil.setpos(50, 0)\n\ndef fdp():\n    phil.fd(20)\n    if phil.xcor() &gt; 280:\n        phil.setx(280)\n    if phil.ycor() &gt; 280:\n        phil.sety(280)\n\n    if phil.xcor() &lt; -280:\n        phil.setx(-280)\n    if phil.ycor() &lt;- 280:\n        phil.sety(-280)\ndef rightp():\n    phil.right(90)\n\ndef leftp():\n    phil.left(90)\n\nturtle.listen()\nturtle.onkey(leftp, \"a\")\nturtle.onkey(fdp, \"w\")\nturtle.onkey(rightp, \"d\")\n\nturtle.done()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 11306464, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GJ7Tm5NNORo/AAAAAAAAAAI/AAAAAAAAAXI/Xyy0Aungofg/photo.jpg?sz=128", "display_name": "Olympias", "link": "https://stackoverflow.com/users/11306464/olympias"}, "edited": false, "score": 0, "creation_date": 1556752403, "post_id": 55943733, "comment_id": 98540656, "body": "The first part stopped my freezing problem is that the collision detector doesn&#39;t seem to work. And, please correct me if I&#39;m wrong, but if I get rid of the loop, wouldn&#39;t that only allow the game to be played once?"}, {"owner": {"reputation": 93, "user_id": 10763203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LCmaX1EWPO0/AAAAAAAAAAI/AAAAAAAAAcw/bgyTh5VwPKk/photo.jpg?sz=128", "display_name": "Amr Bashir", "link": "https://stackoverflow.com/users/10763203/amr-bashir"}, "reply_to_user": {"reputation": 7, "user_id": 11306464, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GJ7Tm5NNORo/AAAAAAAAAAI/AAAAAAAAAXI/Xyy0Aungofg/photo.jpg?sz=128", "display_name": "Olympias", "link": "https://stackoverflow.com/users/11306464/olympias"}, "edited": false, "score": 0, "creation_date": 1556752654, "post_id": 55943733, "comment_id": 98540698, "body": "Didn&#39;t check your collision code tbh but getting rid of the while loop won&#39;t affect the game and will keep running. I tried both code above and they worked the same."}, {"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 0, "creation_date": 1556780080, "post_id": 55943733, "comment_id": 98546800, "body": "Putting <code>turtle.done()</code> in the <code>while</code> loop makes no sense as <code>turtle.done()</code> hands off control to the tkinter event handler and doesn&#39;t return, ending the loop.  Getting rid of the <code>while</code> loop, without other modifications to compensate, effectively stops this program from doing what it&#39;s intended to do."}], "tags": [], "owner": {"reputation": 93, "user_id": 10763203, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-LCmaX1EWPO0/AAAAAAAAAAI/AAAAAAAAAcw/bgyTh5VwPKk/photo.jpg?sz=128", "display_name": "Amr Bashir", "link": "https://stackoverflow.com/users/10763203/amr-bashir"}, "is_accepted": false, "score": 0, "last_activity_date": 1556751479, "creation_date": 1556751479, "answer_id": 55943733, "question_id": 55943539, "link": "https://stackoverflow.com/questions/55943539/when-i-run-my-python-turtle-game-the-graphics-window-stops-responding/55943733#55943733", "title": "When I run my Python Turtle game, the Graphics Window stops responding", "body": "<p>indent your <code>turtle.done()</code> to be inside the <code>while</code> loop. This will fix your freezing problem. like this :</p>\n\n<pre><code>while True:\n    if isCollision(bob, phil):\n        bob.setposition(-50, 0)\n        phil.setposition(50, 0)\n    turtle.done()\n</code></pre>\n\n<p>you could also remove the <code>while</code> loop as you don't really need it for your <code>if</code> statement to work. like this:</p>\n\n<pre><code>if isCollision(bob, phil):\n    bob.setposition(-50, 0)\n    phil.setposition(50, 0)\nturtle.done()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": true, "score": 0, "last_activity_date": 1556779955, "creation_date": 1556779955, "answer_id": 55947071, "question_id": 55943539, "link": "https://stackoverflow.com/questions/55943539/when-i-run-my-python-turtle-game-the-graphics-window-stops-responding/55947071#55947071", "title": "When I run my Python Turtle game, the Graphics Window stops responding", "body": "<p>There are problems with your original code and the suggested answers which I've tried to address below.  Specifically: you don't need to calculate the distance between turtles, they already know how to do that; your, and others, use of <code>tracer()</code> makes no sense as you've no <code>update()</code> calls; collision between Bob and Phil should be symmetrical but one of the answers considers Bob colliding with Phil but not Phil colliding with Bob; one of the answers doesn't seem to understand the nature of <code>turtle.done()</code>.</p>\n\n<pre><code>from turtle import Screen, Turtle, mainloop\n\ndef bob_left():\n    bob.left(90)\n\ndef bob_forward():\n    bob.forward(20)\n\n    if bob.xcor() &gt; 280:\n        bob.setx(280)\n    elif bob.xcor() &lt; -280:\n        bob.setx(-280)\n\n    if bob.ycor() &gt; 280:\n        bob.sety(280)\n    elif bob.ycor() &lt; -280:\n        bob.sety(-280)\n\n    checkCollision()\n\ndef bob_right():\n    bob.right(90)\n\ndef phil_left():\n    phil.left(90)\n\ndef phil_forward():\n    phil.forward(20)\n\n    if phil.xcor() &gt; 280:\n        phil.setx(280)\n    elif phil.xcor() &lt; -280:\n        phil.setx(-280)\n\n    if phil.ycor() &gt; 280:\n        phil.sety(280)\n    elif phil.ycor() &lt; -280:\n        phil.sety(-280)\n\n    checkCollision()\n\ndef phil_right():\n    phil.right(90)\n\ndef isCollision(t1, t2):\n    return t1.distance(t2) &lt; 20\n\ndef checkCollision():\n    if isCollision(bob, phil):\n        bob.setposition(-50, 0)\n        phil.setposition(50, 0)\n\nscreen = Screen()\nscreen.bgcolor('black')\nscreen.setup(width=700, height=700)\n\nborder_pen = Turtle(visible=False)\nborder_pen.speed('fastest')\nborder_pen.color('white')\nborder_pen.pensize(3)\n\nborder_pen.penup()\nborder_pen.setposition(-300, -300)\nborder_pen.pendown()\n\nfor _ in range(4):\n    border_pen.fd(600)\n    border_pen.lt(90)\n\nbob = Turtle('triangle')\nbob.speed('fastest')\nbob.color('blue')\nbob.penup()\nbob.setpos(-50, 0)\n\nphil = Turtle('triangle')\nphil.speed('fastest')\nphil.color('red')\nphil.penup()\nphil.setposition(50, 0)\n\nscreen.onkey(bob_left, 'Left')\nscreen.onkey(bob_forward, 'Up')\nscreen.onkey(bob_right, 'Right')\n\nscreen.onkey(phil_left, 'a')\nscreen.onkey(phil_forward, 'w')\nscreen.onkey(phil_right, 'd')\nscreen.listen()\n\nmainloop()\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 11306464, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GJ7Tm5NNORo/AAAAAAAAAAI/AAAAAAAAAXI/Xyy0Aungofg/photo.jpg?sz=128", "display_name": "Olympias", "link": "https://stackoverflow.com/users/11306464/olympias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 55947071, "answer_count": 3, "score": 0, "last_activity_date": 1556780484, "creation_date": 1556750018, "last_edit_date": 1556780484, "question_id": 55943539, "link": "https://stackoverflow.com/questions/55943539/when-i-run-my-python-turtle-game-the-graphics-window-stops-responding", "title": "When I run my Python Turtle game, the Graphics Window stops responding", "body": "<p>I am new to turtle and programming in general and wanted to make a game of tag. There are two users where one is the runner and one is the chaser (Bob and Phil). When the chaser is close to the runner (detected using the distance formula), the program sets them back to their original starting positions. However, whenever I run the program, the Turtle Graphics window freezes and stops responding, eventually leading me to close the program. Can anyone help me identify the issue? </p>\n\n<pre><code>import turtle\nimport math\nbob = turtle.Turtle()\n\nwn = turtle.Screen()\nwn.bgcolor(\"black\")\nwn.setup(width = 700, height = 700)\nwn.tracer()\n\nborder_pen = turtle.Turtle()\nborder_pen.speed(0)\nborder_pen.color(\"white\")\nborder_pen.penup()\nborder_pen.setposition(-300,-300)\nborder_pen.pendown()\nborder_pen.pensize(3)\nfor side in range(4):\n    border_pen.fd(600)\n    border_pen.lt(90)\nborder_pen.hideturtle()\n\nbob.shape(\"triangle\")\nbob.speed(0)\nbob.color(\"blue\")\nbob.penup()\nbob.setpos(-50, 0)\ndef draw():\n    bob.penup()\ndef nodraw():\n    bob.pendown()\n\ndef fd():\n    bob.fd(20)\n    if bob.xcor() &gt; 280:\n        bob.setx(280)\n    if bob.ycor() &gt; 280:\n        bob.sety(280)\n\n    if bob.xcor() &lt; -280:\n        bob.setx(-280)\n    if bob.ycor() &lt;- 280:\n        bob.sety(-280)\ndef right():\n    bob.right(90)\n\ndef left():\n    bob.left(90)\n\nturtle.listen()\nturtle.onkey(left, \"Left\")\nturtle.onkey(fd, \"Up\")\nturtle.onkey(right, \"Right\")\n\nphil = turtle.Turtle()\nphil.speed(0)\nphil.penup()\nphil.shape(\"triangle\")\nphil.color(\"red\")\nphil.setpos(50, 0)\n\ndef fdp():\n    phil.fd(20)\n    if phil.xcor() &gt; 280:\n        phil.setx(280)\n    if phil.ycor() &gt; 280:\n        phil.sety(280)\n\n    if phil.xcor() &lt; -280:\n        phil.setx(-280)\n    if phil.ycor() &lt;- 280:\n        phil.sety(-280)\ndef rightp():\n    phil.right(90)\n\ndef leftp():\n    phil.left(90)\n\nturtle.listen()\nturtle.onkey(leftp, \"a\")\nturtle.onkey(fdp, \"w\")\nturtle.onkey(rightp, \"d\")\n\n\ndef isCollision(t1, t2):\n    distance = math.sqrt(math.pow(t1.xcor()-t2.xcor(),2)+math.pow(t1.ycor()-t2.ycor(),2))\n    if distance &lt; 20:\n        return True\n    else:\n        return False\nwhile True:\n    if isCollision(bob, phil):\n        bob.setposition(-50, 0)\n        phil.setposition(50, 0)\n\n\n\nturtle.done()\n</code></pre>\n"}, {"tags": ["python", "text", "associations", "cluster-analysis", "word"], "answers": [{"tags": [], "owner": {"reputation": 2000, "user_id": 8402369, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u5v3r.png?s=128&g=1", "display_name": "marsnebulasoup", "link": "https://stackoverflow.com/users/8402369/marsnebulasoup"}, "is_accepted": false, "score": 0, "last_activity_date": 1556750575, "creation_date": 1556750575, "answer_id": 55943601, "question_id": 55943532, "link": "https://stackoverflow.com/questions/55943532/is-there-an-algorithm-or-technique-in-place-that-is-capable-of-clustering-words/55943601#55943601", "title": "Is there an algorithm or technique in place that is capable of clustering words based on meaning?", "body": "<p>Google's natural language processing api might help. Here is a link: <a href=\"https://cloud.google.com/natural-language/\" rel=\"nofollow noreferrer\">https://cloud.google.com/natural-language/</a>. There is option to demo it right on the site, so you can see if that is what you are looking for.</p>\n"}, {"tags": [], "owner": {"reputation": 682, "user_id": 5540779, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-cQBwUxcnTU4/AAAAAAAAAAI/AAAAAAAABJE/5NECUAi1nR4/photo.jpg?sz=128", "display_name": "Joe B", "link": "https://stackoverflow.com/users/5540779/joe-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1556754495, "creation_date": 1556754495, "answer_id": 55944032, "question_id": 55943532, "link": "https://stackoverflow.com/questions/55943532/is-there-an-algorithm-or-technique-in-place-that-is-capable-of-clustering-words/55944032#55944032", "title": "Is there an algorithm or technique in place that is capable of clustering words based on meaning?", "body": "<p>There are a number of pretrained models for you to download that are vector representations of word stems. A popular choice is Google's pretrained 300-dimensional Word2Vec Model which can be downloaded from:</p>\n\n<p><a href=\"https://drive.google.com/file/d/0B7XkCwpI5KDYNlNUTTlSS21pQmM/edit\" rel=\"nofollow noreferrer\">https://drive.google.com/file/d/0B7XkCwpI5KDYNlNUTTlSS21pQmM/edit</a></p>\n\n<p>and loaded (after unzipping) with:</p>\n\n<pre><code>import gensim\nmodel = gensim.models.Word2Vec.load_word2vec_format('GoogleNews-vectors-negative300.bin', binary=True)  \n</code></pre>\n\n<p>This model is quite large, but does exactly what you want. If you are interested in only a subset of words, I suggest that you extract only those from the model and store their coordinates in a DataFrame for later (and faster) use.</p>\n\n<p>For other models see the following:</p>\n\n<ol>\n<li><a href=\"https://fasttext.cc/docs/en/crawl-vectors.html\" rel=\"nofollow noreferrer\">https://fasttext.cc/docs/en/crawl-vectors.html</a></li>\n<li><a href=\"https://nlp.stanford.edu/projects/glove/\" rel=\"nofollow noreferrer\">https://nlp.stanford.edu/projects/glove/</a></li>\n<li><a href=\"https://fasttext.cc/\" rel=\"nofollow noreferrer\">https://fasttext.cc/</a></li>\n</ol>\n"}], "owner": {"reputation": 19, "user_id": 6156749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15e3bf10ca1c1fc578a9c439277377df?s=128&d=identicon&r=PG&f=1", "display_name": "albin45", "link": "https://stackoverflow.com/users/6156749/albin45"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1556758624, "answer_count": 2, "score": -1, "last_activity_date": 1556754495, "creation_date": 1556749962, "question_id": 55943532, "link": "https://stackoverflow.com/questions/55943532/is-there-an-algorithm-or-technique-in-place-that-is-capable-of-clustering-words", "closed_reason": "Duplicate", "title": "Is there an algorithm or technique in place that is capable of clustering words based on meaning?", "body": "<p>I need to develop clusters for similar words based on the meaning of the word. For example, I want \"apple\" in the same cluster as \"fruit,\" \"banana,\" \"honeycrisp.\" </p>\n\n<p>Is there some lexicon package that has something like this in place, or would it be up to me to create my own clusters?</p>\n"}, {"tags": ["python", "netcdf", "netcdf4", "python-iris"], "answers": [{"tags": [], "owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "is_accepted": false, "score": 1, "last_activity_date": 1556778998, "creation_date": 1556778998, "answer_id": 55946870, "question_id": 55943456, "link": "https://stackoverflow.com/questions/55943456/convert-netcdf-into-csv-using-python/55946870#55946870", "title": "Convert netCDF into CSV using python", "body": "<p>You open your output file in binary mode by choosing <code>'wb'</code>.<br>\nTherefore the file writing function expects binary data, i.e. a <code>bytes</code> object.</p>\n\n<p>However, as you're requesting help for writing a csv-file, I assume you want to write plain text data, so you simply should remove the <code>b</code> for binary here:</p>\n\n<pre><code>with open('output.csv', 'w') as csvFile:\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1289, "user_id": 2984551, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KJ4rx.jpg?s=128&g=1", "display_name": "Robert Wilson", "link": "https://stackoverflow.com/users/2984551/robert-wilson"}, "is_accepted": false, "score": 1, "last_activity_date": 1591979613, "last_edit_date": 1591979613, "creation_date": 1591976428, "answer_id": 62347691, "question_id": 55943456, "link": "https://stackoverflow.com/questions/55943456/convert-netcdf-into-csv-using-python/62347691#62347691", "title": "Convert netCDF into CSV using python", "body": "<p>The easiest method for this would be to use xarray and pandas.</p>\n\n<pre><code>import xarray as xr\nimport pandas as pd\n</code></pre>\n\n<p>You will first need to read in the data using xarray:</p>\n\n<pre><code>data = xr.open_dataset(filename)\n</code></pre>\n\n<p>This will then need to be converted to a pandas dataset, with the index reset:</p>\n\n<pre><code>data_df = data.to_dataframe().reset_index()\n</code></pre>\n\n<p>Finally, you would need to save this as a csv:</p>\n\n<pre><code>data_df.to_csv(outfile)\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 2986108, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d8f36b65dce79af95a17bf3121ed7bc9?s=128&d=identicon&r=PG&f=1", "display_name": "user2986108", "link": "https://stackoverflow.com/users/2986108/user2986108"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 892, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1591979613, "creation_date": 1556749410, "question_id": 55943456, "link": "https://stackoverflow.com/questions/55943456/convert-netcdf-into-csv-using-python", "title": "Convert netCDF into CSV using python", "body": "<p>I am new to Python and trying to parse the netCDF file into .CSV in columanar format, so I can load that data into RDBMS for other reporting purpose. Please refer the details below.</p>\n\n<p>Sanpshot of my netCDF file:</p>\n\n<pre><code>dimensions:\ntime = UNLIMITED ; // (36 currently)\ngrid_latitude = 548 ;\ngrid_longitude = 421 ;\ntime_0 = UNLIMITED ; // (3 currently)\npressure = 3 ;\ntime_1 = UNLIMITED ; // (3 currently)\nbnds = 2 ;\npressure_0 = 2 ;\npressure_1 = 3 ;\ndim0 = UNLIMITED ; // (3 currently)\ngrid_longitude_0 = 421 ;\ngrid_latitude_0 = 547 ;\ntime_3 = UNLIMITED ; // (3 currently)\nvariables:\nfloat stratiform_snowfall_rate(time, grid_latitude, grid_longitude) ;\nstratiform_snowfall_rate:_FillValue = -1.073742e+09f ;\nstring stratiform_snowfall_rate:long_name = \"stratiform_snowfall_rate\" ;\nstring stratiform_snowfall_rate:units = \"kg m-2 s-1\" ;\nstring stratiform_snowfall_rate:um_stash_source = \"m01s04i204\" ;\nstring stratiform_snowfall_rate:grid_mapping = \"rotated_latitude_longitude\" ;string stratiform_snowfall_rate:coordinates = \"forecast_period forecast_reference_time\" ;int rotated_latitude_longitude ;\n</code></pre>\n\n<p>My Code:</p>\n\n<pre><code>from netCDF4 import Dataset, num2date\nfilename ='prods_op_mogreps-uk_20140717_03_11_015.nc'\nnc = Dataset(filename, 'r', Format='NETCDF4')\n ncv = nc.variables\n lats = nc.variables['grid_latitude'][:]\n lons = nc.variables['grid_longitude'][:]\n sfc= nc.variables['stratiform_snowfall_rate'][:]\n times = nc.variables['time'][:]\n units = nc.variables['time'].units\n dates = num2date (times[:], units=units, calendar='365_day')\n header = ['Latitude', 'Longitude']\n for d in dates:\n    header.append(d)\nimport csv\nwith open('output.csv', 'wb') as csvFile:\n    outputwriter = csv.writer(csvFile, delimiter=',')\n    for time_index, time in enumerate(times): # pull the dates out for the header\n         t = num2date(time, units = units, calendar='365_day')\n         header.append(t)\n    outputwriter.writerow(header)  \n    for lat_index, lat in enumerate(lats):\n        content = lat\n        #print lat_index\n        for lon_index, lon in enumerate(lons):\n            content.append(lon)\n            #print lon_index    \n            for time_index, time in enumerate(times): # for a date\n                # pull out the data \n                data = sfc[time_index,lat_index,lon_index]\n                content.append(data)\n                outputwriter.writerow(content)\ncsvFile.close()\nnc.close()\n</code></pre>\n\n<p>I am getting below error:</p>\n\n<blockquote>\n  <hr>\n\n<pre><code>TypeError                                 Traceback (most recent call last)\n&lt;ipython-input-41-b4b3b888999f&gt; in &lt;module&gt;\n      4          t = num2date(time, units = units, calendar='365_day')\n      5          header.append(t)\n----&gt; 6     outputwriter.writerow(header)\n      7     for lat_index, lat in enumerate(lats):\n      8         content = lat\n\nTypeError: a bytes-like object is required, not 'str'\n</code></pre>\n</blockquote>\n\n<p>Please help me on this code. Thanks</p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 1726, "user_id": 4208788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/InWyx.jpg?s=128&g=1", "display_name": "Higor Rossato", "link": "https://stackoverflow.com/users/4208788/higor-rossato"}, "is_accepted": true, "score": 1, "last_activity_date": 1556749411, "creation_date": 1556749411, "answer_id": 55943457, "question_id": 55943431, "link": "https://stackoverflow.com/questions/55943431/how-to-fix-noreversematch-user-is-not-a-registered-namespace/55943457#55943457", "title": "How to fix NoReverseMatch &#39;user&#39; is not a registered namespace", "body": "<p>You named your app_name='users' and you're calling 'user' in the template. That's why you're getting that. Also you have an opened but not closed single quote on your template.</p>\n"}], "owner": {"reputation": 3, "user_id": 11439103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/517af74c5872ccdd036d91c674709dcb?s=128&d=identicon&r=PG&f=1", "display_name": "minker36", "link": "https://stackoverflow.com/users/11439103/minker36"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 446, "favorite_count": 0, "accepted_answer_id": 55943457, "answer_count": 1, "score": 0, "last_activity_date": 1556749411, "creation_date": 1556749206, "question_id": 55943431, "link": "https://stackoverflow.com/questions/55943431/how-to-fix-noreversematch-user-is-not-a-registered-namespace", "title": "How to fix NoReverseMatch &#39;user&#39; is not a registered namespace", "body": "<p>I'm setting up a website, and want to make a user login page. But I always get \"NoReverseMatch at /users/login/ and  'user' is not a registered namespace\" when I am on the login page.</p>\n\n<p>url.py</p>\n\n<pre><code>from django.urls import path\nfrom django.contrib.auth.views import LoginView\n\nfrom . import views\n\napp_name ='users'\nurlpatterns = [\n    path('login/', LoginView.as_view(template_name='users/login.html'),\n         name='login'),\n]\n</code></pre>\n\n<p>login.html</p>\n\n<pre><code>{% extends \"learning_logs/base.html\" %}\n\n{% block content %}\n\n    {% if form.errors %}\n        &lt;p.Your username and password didn't match. Please try again.&lt;/p&gt;\n    {% endif %}\n\n    &lt;form method=\"post\" action=\"{% url 'user:login' %}\n        {% csrf_token %}\n        {{ form.as_p }}\n\n        &lt;botton name=\"sumbit\"&gt;log in&lt;/button&gt;\n        &lt;input type=\"hidden\" name=\"next\"\n            value=\"{% url 'learning_logs:index' %}\n    &lt;/form&gt;\n\n{% endblock content %}\n</code></pre>\n\n<p>and base.html that login extends from</p>\n\n<pre><code>&lt;p&gt;\n  &lt;a href = \"{% url 'learning_logs:index' %}\"&gt;Learning Log &lt;/a&gt; -\n  &lt;a href = \"{% url 'learning_logs:topics' %}\"&gt;Topics&lt;/a&gt; -\n  {% if user.is_authenticated %}\n    Hello, {{  user.username }}.\n  {% else %}\n    &lt;a href=\"{% url 'users:login' %}\"&gt;log in&lt;/a&gt;\n  {% endif %}\n\n&lt;/p&gt;\n\n{% block content %}{% endblock content %}\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 1614, "user_id": 10852841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe7a38cc20a4dc6159ee347bf6c19fdf?s=128&d=identicon&r=PG&f=1", "display_name": "HS-nebula", "link": "https://stackoverflow.com/users/10852841/hs-nebula"}, "edited": false, "score": 0, "creation_date": 1556749450, "post_id": 55943430, "comment_id": 98540033, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/40863665/pandas-python-update-column-of-a-dataframe-from-another-one-with-conditions\">Pandas (Python) - Update column of a dataframe from another one with conditions</a>"}, {"owner": {"reputation": 386, "user_id": 8246238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17eef201298686769a6a4ad733cbff80?s=128&d=identicon&r=PG&f=1", "display_name": "macaw_9227", "link": "https://stackoverflow.com/users/8246238/macaw-9227"}, "edited": false, "score": 0, "creation_date": 1556749791, "post_id": 55943430, "comment_id": 98540097, "body": "What should happen if the price and quantity for a fruit are different from today to yesterday?"}, {"owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "edited": false, "score": 0, "creation_date": 1556857172, "post_id": 55943430, "comment_id": 98577458, "body": "@William .Wu: check your <code>fruit</code> column of <code>yesterday_df</code>. It must have some duplicate values (same fruit names). I mean in your real data, not the sample you posted above. Run <code>yesterday_df.fruit.duplicated()</code> to see any <code>True</code>"}, {"owner": {"reputation": 113, "user_id": 11302812, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JgzEHy_FwwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gXXFR6ZsAYCK9pr6olxTDmlASXxg/mo/photo.jpg?sz=128", "display_name": "William .Wu", "link": "https://stackoverflow.com/users/11302812/william-wu"}, "edited": false, "score": 0, "creation_date": 1556906856, "post_id": 55943430, "comment_id": 98600823, "body": "Andy, you are right, that was the issue... in the real data, there&#39;s duplicates in the index &quot;fruit&quot; Thanks for your help."}, {"owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "edited": false, "score": 0, "creation_date": 1556940598, "post_id": 55943430, "comment_id": 98608382, "body": "@William.Wu:  glad I could help. See my edited post if you don&#39;t want to get rid of duplicates in &#39;yesterday_df`"}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 11302812, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JgzEHy_FwwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gXXFR6ZsAYCK9pr6olxTDmlASXxg/mo/photo.jpg?sz=128", "display_name": "William .Wu", "link": "https://stackoverflow.com/users/11302812/william-wu"}, "edited": false, "score": 0, "creation_date": 1556845195, "post_id": 55944003, "comment_id": 98575343, "body": "It seems to me that it only worked when today_df (4,4) and y_df (4,4) have same shape. if they are different, then, it&#39;s not working... is it the reason, or I am getting some other thing wrong?"}, {"owner": {"reputation": 1081, "user_id": 1815486, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/03e3fc59b08e7dab3f7684caf29dd051?s=128&d=identicon&r=PG", "display_name": "aiguofer", "link": "https://stackoverflow.com/users/1815486/aiguofer"}, "reply_to_user": {"reputation": 113, "user_id": 11302812, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JgzEHy_FwwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gXXFR6ZsAYCK9pr6olxTDmlASXxg/mo/photo.jpg?sz=128", "display_name": "William .Wu", "link": "https://stackoverflow.com/users/11302812/william-wu"}, "edited": false, "score": 0, "creation_date": 1556855653, "post_id": 55944003, "comment_id": 98577222, "body": "@William.Wu The way this works is by assigning the value from yesterday_df[&quot;comment&quot;] column to the &quot;comment&quot; column for all rows sharing the same index in today_df, so the key is to make sure that your index is the &quot;fruit&quot; column. You can read more about it here: <a href=\"https://medium.com/dunder-data/selecting-subsets-of-data-in-pandas-part-3-d5704b4b9116\" rel=\"nofollow noreferrer\">medium.com/dunder-data/&hellip;</a>  edit: I updated the example to show it works with different shapes"}, {"owner": {"reputation": 113, "user_id": 11302812, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JgzEHy_FwwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gXXFR6ZsAYCK9pr6olxTDmlASXxg/mo/photo.jpg?sz=128", "display_name": "William .Wu", "link": "https://stackoverflow.com/users/11302812/william-wu"}, "edited": false, "score": 0, "creation_date": 1556897640, "post_id": 55944003, "comment_id": 98596723, "body": "Thanks, it worked; my data has some duplicates in index, i.e. &quot;fruits&quot;."}], "tags": [], "owner": {"reputation": 1081, "user_id": 1815486, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/03e3fc59b08e7dab3f7684caf29dd051?s=128&d=identicon&r=PG", "display_name": "aiguofer", "link": "https://stackoverflow.com/users/1815486/aiguofer"}, "is_accepted": true, "score": 1, "last_activity_date": 1556859052, "last_edit_date": 1556859052, "creation_date": 1556754253, "answer_id": 55944003, "question_id": 55943430, "link": "https://stackoverflow.com/questions/55943430/how-to-compare-two-dataframe-and-update-a-particular-column-in-one-of-the-datafr/55944003#55944003", "title": "How to compare two Dataframe and update a particular column in one of the Dataframe?", "body": "<p>You were on the right path, but you can leverage indexes to assign values so there's no need for map. When you assign values to a dataframe using a Series, it'll align on the index. The key here is to make sure that you're using \"fruit\" as the index for both dataframes. The easiest way to do this is:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nfrom pandas.compat import StringIO\n\nyesterday = \"\"\"\nfruit,price,qty,comment,col to show it works with different shapes\napple,1.5,10,In Stock,bleh\nbanana,0.7,20,In Stock,blah\nPear,3.0,5,In Stock,bip\nWatermelon,1.2,30,Out Stock,bop\n\"\"\"\n\ntoday = \"\"\"\nfruit,price,qty,comment\napple,1.5,10,\nStrawberry,1.7,20,\nPineapple,0.9,5,\nWatermelon,1.2,30,\nPeach,2.1,10,\n\"\"\"\n\nyesterday_df = pd.read_csv(StringIO(yesterday), sep=\",\").set_index(\"fruit\")\ntoday_df = pd.read_csv(StringIO(today), sep=\",\").set_index(\"fruit\")\n\ntoday_df[\"comment\"] = yesterday_df[\"comment\"]\n\ntoday_df\n\nOut[1]: \n            price  qty    comment\nfruit                            \napple         1.5   10   In Stock\nStrawberry    1.7   20        NaN\nPineapple     0.9    5        NaN\nWatermelon    1.2   30  Out Stock\nPeach         2.1   10        NaN\n</code></pre>\n\n<p>Alternatively, you could set the index to 'fruit' when you read in your data and avoid the <code>set_index</code> call. </p>\n\n<p>You might also want to clean up you index ('fruit' column) by lower casing it since string indexes are case sensitive. For example, if yesterday you had \"Apple\" and today it was  \"apple\", this wouldn't work.</p>\n\n<p>Also, I'm assuming you're not interested in changing anything about 'price' or 'qty'. </p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 11302812, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JgzEHy_FwwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gXXFR6ZsAYCK9pr6olxTDmlASXxg/mo/photo.jpg?sz=128", "display_name": "William .Wu", "link": "https://stackoverflow.com/users/11302812/william-wu"}, "edited": false, "score": 0, "creation_date": 1556838537, "post_id": 55944093, "comment_id": 98574128, "body": "got this error message: &#39;Can only compare identically-labeled Series objects&#39;  what could be the cause?  I have checked that both y_df and t_df has same structure and same column name (comment, price, etc.)  Note: the number of rows might be different, i.e. y_df may have 4 rows and t_df may have more or less rows (2 rows or 5 rows) does that matter?"}, {"owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "reply_to_user": {"reputation": 113, "user_id": 11302812, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JgzEHy_FwwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gXXFR6ZsAYCK9pr6olxTDmlASXxg/mo/photo.jpg?sz=128", "display_name": "William .Wu", "link": "https://stackoverflow.com/users/11302812/william-wu"}, "edited": false, "score": 0, "creation_date": 1556940432, "post_id": 55944093, "comment_id": 98608367, "body": "@William.Wu: The original solution only works on same dimension <code>df</code>. please see my edit for updated solutions."}], "tags": [], "owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "is_accepted": false, "score": 2, "last_activity_date": 1556940378, "last_edit_date": 1556940378, "creation_date": 1556755028, "answer_id": 55944093, "question_id": 55943430, "link": "https://stackoverflow.com/questions/55943430/how-to-compare-two-dataframe-and-update-a-particular-column-in-one-of-the-datafr/55944093#55944093", "title": "How to compare two Dataframe and update a particular column in one of the Dataframe?", "body": "<p><strong>Edit:</strong><br>\nSince your <code>yesterday_df</code> has some duplicates in <code>fruit</code>, you commands throw the errors you posted. Any solution using <code>index</code> also errors out. You have 2 ways to solve it.   </p>\n\n<p>Method 1: get rid duplicates in <code>yesterday_df</code> and your solution using <code>map</code> as you posted would work without any issue.</p>\n\n<p>Method 2: Change your solution a little bit with groupby <code>yesterday_df</code> on <code>fruit</code> and pick <code>first</code> of each group to use for updating <code>today_df</code> as follows:</p>\n\n<pre><code>fruit_map = y_df.groupby('fruit').first()['comment']\nt_df['comment'] = t_df['fruit'].map(fruit_map).fillna(t_df['comment'])\n</code></pre>\n\n<hr>\n\n<p><strong>Original:</strong>\nwith data as belows:</p>\n\n<pre><code>y_df\n\nOut[2896]:\n        fruit  price  qty    comment\n0       apple    1.5   10   In Stock\n1      banana    0.7   20   In Stock\n2        Pear    3.0    5   In Stock\n3  Watermelon    1.2   30  Out Stock\n\nt_df\nOut[2897]:\n        fruit  price  qty comment\n0       apple    1.5   10\n1  Strawberry    1.7   20\n2   Pineapple    0.9    5\n3  Watermelon    1.2   30\n</code></pre>\n\n<hr>\n\n<p>You just need this command</p>\n\n<pre><code>t_df.comment = y_df.comment.where((y_df.price == t_df.price) &amp; (y_df.fruit == t_df.fruit), '')\n\nOut[2908]:\n        fruit  price  qty    comment\n0       apple    1.5   10   In Stock\n1  Strawberry    1.7   20\n2   Pineapple    0.9    5\n3  Watermelon    1.2   30  Out Stock\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 11302812, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JgzEHy_FwwE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gXXFR6ZsAYCK9pr6olxTDmlASXxg/mo/photo.jpg?sz=128", "display_name": "William .Wu", "link": "https://stackoverflow.com/users/11302812/william-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1377, "favorite_count": 0, "accepted_answer_id": 55944003, "answer_count": 2, "score": 1, "last_activity_date": 1556940378, "creation_date": 1556749202, "last_edit_date": 1556843878, "question_id": 55943430, "link": "https://stackoverflow.com/questions/55943430/how-to-compare-two-dataframe-and-update-a-particular-column-in-one-of-the-datafr", "title": "How to compare two Dataframe and update a particular column in one of the Dataframe?", "body": "<p>Update: I am having some issue with the answers and guessing it's something to do with the rows are not matching. (updated the today_df so that today and yesterday has diff # of rows).</p>\n\n<p>I need to compare yesterday's dataframe and today's new dataframe to update one column on today's dataframe. for example: \nyesterday_df: </p>\n\n<pre><code>fruit      price  qty   comment\napple       1.5   10    In Stock\nbanana      0.7   20    In Stock\nPear        3.0   5     In Stock\nWatermelon  1.2   30    Out Stock\n</code></pre>\n\n<p>today_df  (updated the today_df so that today and yesterday has diff # of rows)</p>\n\n<pre><code>fruit      price  qty   comment\napple       1.5   10    \nStrawberry  1.7   20    \nPineapple   0.9   5     \nWatermelon  1.2   30   \nPeach       2.1   10    \n</code></pre>\n\n<p>Desired output:\ntoday_df  </p>\n\n<pre><code>fruit      price  qty   comment\napple       1.5   10    In Stock  &lt;-- from yesterday\nStrawberry  1.7   20               &lt;-- empty\nPineapple   0.9   5                 &lt;-- empty\nWatermelon  1.2   30    Out Stock   &lt;-- From Yesterday\npeach       2.1   10                &lt;-- empty\n</code></pre>\n\n<p>For Today's Dataframe, the comment from previous day for Apple and Watermelon were carried over and the new info (Strawberry and Pineapple) from data were left blank. </p>\n\n<p>i've tried to use series mapping:</p>\n\n<pre><code>fruit_map = yesterday_df.set_index('fruit')['Comment']\ntoday_df['Comment']=today_df['fruit'].map(fruit_map).fillna(today_df['Comment'])\ntoday_df\n</code></pre>\n\n<p>but getting this error: </p>\n\n<blockquote>\n  <p>InvalidIndexError: Reindexing only valid with uniquely valued Index\n  objects</p>\n</blockquote>\n\n<pre><code>fruit_map = yesterday_df.set_index('fruit')['Comment']\ntoday_df['Comment']=today_df['fruit'].map(fruit_map).fillna(today_df['Comment'])\ntoday_df\n\ntoday_df\nfruit      price  qty   comment\napple       1.5   10    In Stock\nStrawberry  1.7   20    \nPineapple   0.9   5     \nWatermelon  1.2   30    Out Stock\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 46350, "user_id": 246616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb5db496ae1d5e7dbdcaa38f3c9b31b?s=128&d=identicon&r=PG", "display_name": "mVChr", "link": "https://stackoverflow.com/users/246616/mvchr"}, "edited": false, "score": 2, "creation_date": 1556749343, "post_id": 55943413, "comment_id": 98540007, "body": "You&#39;ll probably need to write your own parser. Here&#39;s a decent library for it: <a href=\"http://infohost.nmt.edu/tcc/help/pubs/pyparsing/web/index.html\" rel=\"nofollow noreferrer\">infohost.nmt.edu/tcc/help/pubs/pyparsing/web/index.html</a>"}, {"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 0, "creation_date": 1556749699, "post_id": 55943413, "comment_id": 98540081, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1651487/python-parsing-bracketed-blocks\">Python parsing bracketed blocks</a>"}], "answers": [{"tags": [], "owner": {"reputation": 46350, "user_id": 246616, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/deb5db496ae1d5e7dbdcaa38f3c9b31b?s=128&d=identicon&r=PG", "display_name": "mVChr", "link": "https://stackoverflow.com/users/246616/mvchr"}, "is_accepted": false, "score": 0, "last_activity_date": 1556749737, "creation_date": 1556749737, "answer_id": 55943502, "question_id": 55943413, "link": "https://stackoverflow.com/questions/55943413/how-to-parse-a-string-for-array-access/55943502#55943502", "title": "How to parse a string for array access", "body": "<p>If you don't expect it to get much more complicated than what you described, you might be able to get away with some regex. I usually wouldn't recommend it for this purpose, but I want you to be able to start somewhere...</p>\n\n<pre><code>import re\nkey = input('Enter field and indices (e.g. \"fieldA[5][3]\"): ')\nfield = re.match(r'[^[]*', key).group(0)\nindices = [int(num) for num in re.findall(r'\\[(\\d+)]', key)]\n</code></pre>\n\n<p>This will simply not recognize a missing field or incorrect bracketing and return an empty string or list respectively.</p>\n"}], "owner": {"reputation": 1, "user_id": 2905699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4feab8b1c3e3b887fc6bba3d21c2c321?s=128&d=identicon&r=PG&f=1", "display_name": "user2905699", "link": "https://stackoverflow.com/users/2905699/user2905699"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556749737, "creation_date": 1556749111, "last_edit_date": 1556749419, "question_id": 55943413, "link": "https://stackoverflow.com/questions/55943413/how-to-parse-a-string-for-array-access", "title": "How to parse a string for array access", "body": "<p>I'm trying to parse user input that specifies a value to look up in a dictionary. </p>\n\n<p>For example, this user input may be the string <code>fieldA[5]</code>. I need to then look up the key <code>fieldA</code> in my dictionary (which would be a list) and then grab the element at position <code>5</code>. This should be generalizable to any depth of lists, e.g. <code>fieldA[5][2][1][8]</code>, and properly fail for invalid inputs <code>fieldA[5[</code> or <code>fieldA[5][7</code>.</p>\n\n<p>I have investigated doing:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import re\n\nkey = \"fieldA[5]\"\n\nre.split('\\[|\\]', key)\n</code></pre>\n\n<p>which results in:</p>\n\n<pre><code>['fieldA', '5', '']\n</code></pre>\n\n<p>This works as an output (I can lookup in the dictionary with it), but does not actually enforce or check pairing of brackets, and is unintuitive in how it reads and how this output would be used to look up in the dictionary. </p>\n\n<p>Is there a parser library, or alternative approach available?</p>\n"}, {"tags": ["python", "hdf5", "pytables"], "answers": [{"tags": [], "owner": {"reputation": 3036, "user_id": 10462884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/09Tg9.jpg?s=128&g=1", "display_name": "kcw78", "link": "https://stackoverflow.com/users/10462884/kcw78"}, "is_accepted": true, "score": 1, "last_activity_date": 1556803032, "last_edit_date": 1556803032, "creation_date": 1556769835, "answer_id": 55945525, "question_id": 55943319, "link": "https://stackoverflow.com/questions/55943319/error-when-trying-to-save-hdf5-row-where-one-column-is-a-string-and-the-other-is/55945525#55945525", "title": "Error when trying to save hdf5 row where one column is a string and the other is an array of floats", "body": "<p>I can't help you with pandas, but can show you how do this with pytables.\nBasically you create a table referencing either a numpy recarray or a dtype that defines the mixed datatypes.</p>\n\n<p>Below is a super simple example to show how to create a table with 1 string and 4 floats. Then it adds rows of data to the table.\nIt shows 2 different methods to add data:<br>\n 1. A list of tuples (1 tuple for each row) - see <code>append_list</code><br>\n 2. A numpy recarray (with dtype matching the table definition) -\n    see <code>simple_recarr</code> in the for loop   </p>\n\n<p>To get the rest of the arguments for <code>create_table()</code>, read the Pytables documentation. It's very helpful, and should answer additional questions. Link below:<br>\n<a href=\"https://www.pytables.org/usersguide/index.html\" rel=\"nofollow noreferrer\">Pytables Users's Guide</a></p>\n\n<pre><code>import tables as tb\nimport numpy as np\n\nwith tb.open_file('SO_55943319.h5', 'w') as h5f:\n\n    my_dtype = np.dtype([('A','S16'),('b',float),('c',float),('d',float),('e',float)])\n    dset = h5f.create_table(h5f.root, 'table_data', description=my_dtype)\n\n# Append one row using a list:\n    append_list = [('test string', -2.355, 1.957, 1.266, -6.913)]\n    dset.append(append_list)\n\n    simple_recarr = np.recarray((1,),dtype=my_dtype)\n\n    for i in range(5):\n\n        simple_recarr['A']='string_' + str(i)\n        simple_recarr['b']=2.0*i\n        simple_recarr['c']=3.0*i\n        simple_recarr['d']=4.0*i\n        simple_recarr['e']=5.0*i\n\n        dset.append(simple_recarr)\n\nprint ('done')\n</code></pre>\n"}], "owner": {"reputation": 4079, "user_id": 3259896, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/641c30a7b383022f22b53c8cedb04e3f?s=128&d=identicon&r=PG&f=1", "display_name": "SantoshGupta7", "link": "https://stackoverflow.com/users/3259896/santoshgupta7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 55945525, "answer_count": 1, "score": 0, "last_activity_date": 1556803032, "creation_date": 1556748585, "question_id": 55943319, "link": "https://stackoverflow.com/questions/55943319/error-when-trying-to-save-hdf5-row-where-one-column-is-a-string-and-the-other-is", "title": "Error when trying to save hdf5 row where one column is a string and the other is an array of floats", "body": "<p>I have two column, one is a string, and the other is a numpy array of floats</p>\n\n<pre><code>a = 'this is string'\n\nb = np.array([-2.355,  1.957,  1.266, -6.913])\n</code></pre>\n\n<p>I would like to store them in a row as separate columns in a hdf5 file. For that I am using pandas</p>\n\n<pre><code>hdf_key = 'hdf_key'\nstore5 = pd.HDFStore('file.h5')\n\nz = pd.DataFrame(\n{\n 'string': [a],\n 'array': [b]\n})\nstore5.append(hdf_key, z, index=False)\nstore5.close()\n</code></pre>\n\n<p>However, I get this error</p>\n\n<pre><code>TypeError: Cannot serialize the column [array] because\nits data contents are [mixed] object dtype\n</code></pre>\n\n<p>Is there a way to store this to h5? If so, how? If not, what's the best way to store this sort of data? </p>\n"}, {"tags": ["python", "pandas", "numpy", "matplotlib"], "comments": [{"owner": {"reputation": 2142, "user_id": 3308951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUOnA.png?s=128&g=1", "display_name": "SyntaxVoid supports Monica", "link": "https://stackoverflow.com/users/3308951/syntaxvoid-supports-monica"}, "edited": false, "score": 1, "creation_date": 1556748690, "post_id": 55943317, "comment_id": 98539832, "body": "It helps if you post the full traceback which includes the line that&#39;s causing the error. It helps us help you faster"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 1, "creation_date": 1556749829, "post_id": 55943317, "comment_id": 98540108, "body": "Your error doesn&#39;t match your code. Please provide the actual code that&#39;s generating the error (Your code shows <code>scatter</code>, your error references <code>bar</code>"}, {"owner": {"reputation": 31, "user_id": 11156243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94fa38c3892d377463dfd5f16ee591a1?s=128&d=identicon&r=PG&f=1", "display_name": "erm", "link": "https://stackoverflow.com/users/11156243/erm"}, "edited": false, "score": 0, "creation_date": 1556749937, "post_id": 55943317, "comment_id": 98540144, "body": "Sorry--I tried it with plt.bar as well as scatter and forgot to switch it back. I will fix the error."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1556750363, "post_id": 55943317, "comment_id": 98540244, "body": "I guess it&#39;s problematic trying to plot a complete dataframe as x values. It looks like it&#39;s sufficient to replace <code>X=pd.DataFrame(df.Won)</code> by <code>X=df.Won</code>"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11156243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94fa38c3892d377463dfd5f16ee591a1?s=128&d=identicon&r=PG&f=1", "display_name": "erm", "link": "https://stackoverflow.com/users/11156243/erm"}, "edited": false, "score": 0, "creation_date": 1556749880, "post_id": 55943400, "comment_id": 98540124, "body": "The shape of X is (10117, 1), and the shape of y is (10117,). Are these the wrong shape? I&#39;ve done this with other datasets before with similar shapes and never come across this issue."}], "tags": [], "owner": {"reputation": 6521, "user_id": 7583953, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w0Jkd.jpg?s=128&g=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/7583953/alec"}, "is_accepted": false, "score": 1, "last_activity_date": 1556749034, "creation_date": 1556749034, "answer_id": 55943400, "question_id": 55943317, "link": "https://stackoverflow.com/questions/55943317/typeerror-unhashable-type-numpy-ndarray-when-trying-to-create-scatter-plot-f/55943400#55943400", "title": "TypeError: unhashable type: &#39;numpy.ndarray&#39; when trying to create scatter plot from dataset", "body": "<p>Arrays are unhashable because they're mutable. You can hash it by converting it to an immutable tuple (by wrapping it with <code>tuple()</code>) but you usually shouldn't be trying to hash arrays anyways. Your data is probably of the wrong shape.</p>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 11156243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94fa38c3892d377463dfd5f16ee591a1?s=128&d=identicon&r=PG&f=1", "display_name": "erm", "link": "https://stackoverflow.com/users/11156243/erm"}, "edited": false, "score": 0, "creation_date": 1556750652, "post_id": 55943537, "comment_id": 98540308, "body": "When I try this, I get a new error that x needs to be numeric. Maybe I just need to try a different dataset. I have tried about 4 with the same general targets and predictors and had no luck."}, {"owner": {"reputation": 1495, "user_id": 6246107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/139889820052d02ab40c3a3db5aa3f33?s=128&d=identicon&r=PG&f=1", "display_name": "Kenry Sanchez", "link": "https://stackoverflow.com/users/6246107/kenry-sanchez"}, "reply_to_user": {"reputation": 31, "user_id": 11156243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94fa38c3892d377463dfd5f16ee591a1?s=128&d=identicon&r=PG&f=1", "display_name": "erm", "link": "https://stackoverflow.com/users/11156243/erm"}, "edited": false, "score": 0, "creation_date": 1556750991, "post_id": 55943537, "comment_id": 98540376, "body": "ok, perfect, the problem is that the x-axis is as the Object type, I mean, string. You need to turn the x-axis into a float type."}, {"owner": {"reputation": 1495, "user_id": 6246107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/139889820052d02ab40c3a3db5aa3f33?s=128&d=identicon&r=PG&f=1", "display_name": "Kenry Sanchez", "link": "https://stackoverflow.com/users/6246107/kenry-sanchez"}, "reply_to_user": {"reputation": 31, "user_id": 11156243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94fa38c3892d377463dfd5f16ee591a1?s=128&d=identicon&r=PG&f=1", "display_name": "erm", "link": "https://stackoverflow.com/users/11156243/erm"}, "edited": false, "score": 0, "creation_date": 1556751074, "post_id": 55943537, "comment_id": 98540396, "body": "use <code>df.dtypes()</code> and you would see the types of the data frame. tell me the name of the type of the <code>Won</code> column."}, {"owner": {"reputation": 31, "user_id": 11156243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94fa38c3892d377463dfd5f16ee591a1?s=128&d=identicon&r=PG&f=1", "display_name": "erm", "link": "https://stackoverflow.com/users/11156243/erm"}, "edited": false, "score": 0, "creation_date": 1556751342, "post_id": 55943537, "comment_id": 98540454, "body": "It is a series object"}, {"owner": {"reputation": 1495, "user_id": 6246107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/139889820052d02ab40c3a3db5aa3f33?s=128&d=identicon&r=PG&f=1", "display_name": "Kenry Sanchez", "link": "https://stackoverflow.com/users/6246107/kenry-sanchez"}, "reply_to_user": {"reputation": 31, "user_id": 11156243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94fa38c3892d377463dfd5f16ee591a1?s=128&d=identicon&r=PG&f=1", "display_name": "erm", "link": "https://stackoverflow.com/users/11156243/erm"}, "edited": false, "score": 0, "creation_date": 1556751659, "post_id": 55943537, "comment_id": 98540522, "body": "I knew it. Well, in that case, use <code>df.astype(&lt;name type&gt;)</code> and turn it into Float. Then try it to call the plot again."}], "tags": [], "owner": {"reputation": 1495, "user_id": 6246107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/139889820052d02ab40c3a3db5aa3f33?s=128&d=identicon&r=PG&f=1", "display_name": "Kenry Sanchez", "link": "https://stackoverflow.com/users/6246107/kenry-sanchez"}, "is_accepted": true, "score": 1, "last_activity_date": 1556749997, "creation_date": 1556749997, "answer_id": 55943537, "question_id": 55943317, "link": "https://stackoverflow.com/questions/55943317/typeerror-unhashable-type-numpy-ndarray-when-trying-to-create-scatter-plot-f/55943537#55943537", "title": "TypeError: unhashable type: &#39;numpy.ndarray&#39; when trying to create scatter plot from dataset", "body": "<p>First, you don't need to: <code>df=pd.DataFrame(file)</code>. After opening the CSV file with pandas and saved in the <code>file</code> variable, you already get the data as dataFrame.</p>\n\n<p>Then, you can easily call the <code>scatter</code> and choose the x-axis and y-axis with</p>\n\n<pre><code>df.plot(kind =\"scatter\", x= \"Won\", y = \"Category\")\n</code></pre>\n\n<p>You don't need to preprocess the data, because of it's already preprocessed after opened the file with pandas. </p>\n"}], "owner": {"reputation": 31, "user_id": 11156243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94fa38c3892d377463dfd5f16ee591a1?s=128&d=identicon&r=PG&f=1", "display_name": "erm", "link": "https://stackoverflow.com/users/11156243/erm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2833, "favorite_count": 0, "accepted_answer_id": 55943537, "answer_count": 2, "score": 0, "last_activity_date": 1556750269, "creation_date": 1556748577, "last_edit_date": 1556750269, "question_id": 55943317, "link": "https://stackoverflow.com/questions/55943317/typeerror-unhashable-type-numpy-ndarray-when-trying-to-create-scatter-plot-f", "title": "TypeError: unhashable type: &#39;numpy.ndarray&#39; when trying to create scatter plot from dataset", "body": "<p>I am trying to create a scatter plot using a dataset on movies. The goal is to look at the correlation between the different categories and the target variable, whether or not the movie won an award. I have tried doing a type call on my variables, and neither of them appear to be of type numpy.ndarray as they are both pandas dataframes, yet I still get the following error when I try to create a scatter plot:</p>\n\n<blockquote>\n  <p>TypeError: unhashable type: 'numpy.ndarray'</p>\n</blockquote>\n\n<p>My code is as follows:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\nimport matplotlib.pyplot as plt\n\nfile=pd.read_csv('academy_awards.csv',sep=',',error_bad_lines=False,encoding=\"ISO 8859-1\")\nprint(file)\ndf=pd.DataFrame(file)\n\n#df=df.dropna(axis=0,how='any')\ntarget=df.Category\nX=pd.DataFrame(df.Won)\n\ny=target\n#print(type(X))\n#print(type(y))\n\nplt.scatter(X,y)\n</code></pre>\n\n<p>The following are the first 5 lines of the dataset I am using:</p>\n\n<pre><code>Year,Category,Nominee,Additional Info,Won\n2010 (83rd),Actor -- Leading Role,Javier Bardem,Biutiful \n{'Uxbal'},NO\n2010 (83rd),Actor -- Leading Role,Jeff Bridges,True Grit {'Rooster \nCogburn'},NO\n2010 (83rd),Actor -- Leading Role,Jesse Eisenberg,The Social \nNetwork {'Mark Zuckerberg'},NO\n2010 (83rd),Actor -- Leading Role,Colin Firth,The King's Speech \n{'King George VI'},YES\n2010 (83rd),Actor -- Leading Role,James Franco,127 Hours {'Aron \nRalston'},NO\n2010 (83rd),Actor -- Supporting Role,Christian Bale,The Fighter \n{'Dicky Eklund'},YES\n</code></pre>\n\n<p>Any help or suggestions are greatly appreciated!</p>\n\n<p>Edit:\nThe following is the full traceback--</p>\n\n<pre><code>-----------------------------------------------------------------------\nTypeError                                 Traceback (most recent call \nlast)\n&lt;ipython-input-211-efcb7c41bca1&gt; in &lt;module&gt;\n     14 print(y.shape)\n     15 \n---&gt; 16 plt.scatter(X,y)\n\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site- \npackages/matplotlib/pyplot.py in scatter(x, y, s, c, marker, cmap, \nnorm, vmin, vmax, alpha, linewidths, verts, edgecolors, data, **kwargs)\n   2862         vmin=vmin, vmax=vmax, alpha=alpha, \nlinewidths=linewidths,\n   2863         verts=verts, edgecolors=edgecolors, **({\"data\": data} \nif data\n-&gt; 2864         is not None else {}), **kwargs)\n   2865     sci(__ret)\n   2866     return __ret\n\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site- \npackages/matplotlib/__init__.py in inner(ax, data, *args, **kwargs)\n   1808                         \"the Matplotlib list!)\" % (label_namer, \nfunc.__name__),\n   1809                         RuntimeWarning, stacklevel=2)\n-&gt; 1810             return func(ax, *args, **kwargs)\n   1811 \n   1812         inner.__doc__ = _add_data_doc(inner.__doc__,\n\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site- \npackages/matplotlib/axes/_axes.py in scatter(self, x, y, s, c, marker, \ncmap, norm, vmin, vmax, alpha, linewidths, verts, edgecolors, **kwargs)\n   4170             edgecolors = 'face'\n   4171 \n-&gt; 4172         self._process_unit_info(xdata=x, ydata=y, \nkwargs=kwargs)\n   4173         x = self.convert_xunits(x)\n   4174         y = self.convert_yunits(y)\n\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site- \npackages/matplotlib/axes/_base.py in _process_unit_info(self, xdata, \nydata, kwargs)\n   2133             return kwargs\n   2134 \n-&gt; 2135         kwargs = _process_single_axis(xdata, self.xaxis, \n'xunits', kwargs)\n   2136         kwargs = _process_single_axis(ydata, self.yaxis, \n'yunits', kwargs)\n   2137         return kwargs\n\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site- \npackages/matplotlib/axes/_base.py in _process_single_axis(data, axis, \nunit_name, kwargs)\n   2116                 # We only need to update if there is nothing \nset yet.\n   2117                 if not axis.have_units():\n-&gt; 2118                     axis.update_units(data)\n   2119 \n   2120             # Check for units in the kwargs, and if present \nupdate axis\n\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site- \npackages/matplotlib/axis.py in update_units(self, data)\n   1471         neednew = self.converter != converter\n   1472         self.converter = converter\n-&gt; 1473         default = self.converter.default_units(data, self)\n   1474         if default is not None and self.units is None:\n   1475             self.set_units(default)\n\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site- \npackages/matplotlib/category.py in default_units(data, axis)\n    101         # default_units-&gt;axis_info-&gt;convert\n    102         if axis.units is None:\n--&gt; 103             axis.set_units(UnitData(data))\n    104         else:\n    105             axis.units.update(data)\n\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site- \npackages/matplotlib/category.py in __init__(self, data)\n    167         self._counter = itertools.count()\n    168         if data is not None:\n--&gt; 169             self.update(data)\n    170 \n    171     def update(self, data):\n\n/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site- \npackages/matplotlib/category.py in update(self, data)\n    184         data = np.atleast_1d(np.array(data, dtype=object))\n    185 \n--&gt; 186         for val in OrderedDict.fromkeys(data):\n    187             if not isinstance(val, (str, bytes)):\n    188                 raise TypeError(\"{val!r} is not a \nstring\".format(val=val))\n\nTypeError: unhashable type: 'numpy.ndarray'\n</code></pre>\n"}, {"tags": ["python", "image", "jpeg"], "answers": [{"tags": [], "owner": {"reputation": 1491, "user_id": 6232148, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9255cf10ac80e07a45561bbe5316a57f?s=128&d=identicon&r=PG&f=1", "display_name": "rma", "link": "https://stackoverflow.com/users/6232148/rma"}, "is_accepted": true, "score": 2, "last_activity_date": 1556748568, "creation_date": 1556748568, "answer_id": 55943312, "question_id": 55943311, "link": "https://stackoverflow.com/questions/55943311/convert-jpg-images-to-hdf5/55943312#55943312", "title": "Convert jpg images to .hdf5", "body": "<p>The solution looks like this</p>\n\n<pre><code>def convert_file(input_dir, filename, output_dir):\n    filepath = input_dir + '/' + filename\n    fin = open(filepath, 'rb')\n    binary_data = fin.read()\n    new_filepath = output_dir + '/' + filename[:-4] + '.hdf5'\n    f = h5py.File(new_filepath)\n    dt = h5py.special_dtype(vlen=np.dtype('uint8'))\n    dset = f.create_dataset('binary_data', (100, ), dtype=dt)\n    dset[0] = np.fromstring(binary_data, dtype='uint8')\n</code></pre>\n\n<p>I have a tool to do this at \n<a href=\"https://github.com/raguiar2/jpg_to_h5\" rel=\"nofollow noreferrer\">https://github.com/raguiar2/jpg_to_h5</a></p>\n"}, {"tags": [], "owner": {"reputation": 157, "user_id": 7654532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0a0a27b8314cff7b82c67e9a5e32f2?s=128&d=identicon&r=PG&f=1", "display_name": "shiv", "link": "https://stackoverflow.com/users/7654532/shiv"}, "is_accepted": false, "score": 0, "last_activity_date": 1587854187, "creation_date": 1587854187, "answer_id": 61433492, "question_id": 55943311, "link": "https://stackoverflow.com/questions/55943311/convert-jpg-images-to-hdf5/61433492#61433492", "title": "Convert jpg images to .hdf5", "body": "<p>I also created my own mini library for handling h5 files. Here's the link:\n<a href=\"https://github.com/ss4328/h5_manager_scripts\" rel=\"nofollow noreferrer\">https://github.com/ss4328/h5_manager_scripts</a></p>\n\n<p>The script manages creating h5 from a directory, merging h5s as well as visualizing 12 images from a h5.</p>\n"}], "owner": {"reputation": 1491, "user_id": 6232148, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9255cf10ac80e07a45561bbe5316a57f?s=128&d=identicon&r=PG&f=1", "display_name": "rma", "link": "https://stackoverflow.com/users/6232148/rma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3795, "favorite_count": 0, "accepted_answer_id": 55943312, "answer_count": 2, "score": 2, "last_activity_date": 1587854187, "creation_date": 1556748568, "question_id": 55943311, "link": "https://stackoverflow.com/questions/55943311/convert-jpg-images-to-hdf5", "title": "Convert jpg images to .hdf5", "body": "<p>Answering my own question here for future reference.</p>\n\n<p>I was recently working with a dataset of type <code>.jpg</code> images and needed to convert them to <code>.hdf5</code> images. I saw some answers for converting the other way around, but nothing from <code>.jpg</code> to <code>.hdf5</code>. What is the best way to do this?</p>\n"}, {"tags": ["python", "if-statement", "printing"], "comments": [{"owner": {"reputation": 51, "user_id": 7016002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f61b77a804a63755d585672fe88c7ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Wes S.", "link": "https://stackoverflow.com/users/7016002/wes-s"}, "edited": false, "score": 0, "creation_date": 1556749606, "post_id": 55943302, "comment_id": 98540062, "body": "You can, yours doesn&#39;t work because of syntax errors. You don&#39;t use the colons in conditional expressions. But that&#39;s probably not the way you want to go here. You should do the logic before the print to determine your foreground color and then print."}], "answers": [{"tags": [], "owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1556748857, "creation_date": 1556748857, "answer_id": 55943373, "question_id": 55943302, "link": "https://stackoverflow.com/questions/55943302/can-put-if-statements-inside-print-statements-in-python/55943373#55943373", "title": "Can put &quot;if&quot; statements inside &quot;print&quot; statements in python?", "body": "<p>You just need to rearrange your statement.</p>\n\n<p>Think of it as \"Print this... if this is the case... otherwise print that\"</p>\n\n<pre><code>print(\"Money: \", Fore.GREEN + str(Cash) if Cash &gt;= 0 else Fore.RED + str(Cash))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11312229, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gHbcsIzRoiw/AAAAAAAAAAI/AAAAAAAAARo/BfKeyrlYEhg/photo.jpg?sz=128", "display_name": "Brent Tersol", "link": "https://stackoverflow.com/users/11312229/brent-tersol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 865, "favorite_count": 0, "closed_date": 1556748688, "answer_count": 1, "score": 0, "last_activity_date": 1556748857, "creation_date": 1556748489, "question_id": 55943302, "link": "https://stackoverflow.com/questions/55943302/can-put-if-statements-inside-print-statements-in-python", "closed_reason": "Duplicate", "title": "Can put &quot;if&quot; statements inside &quot;print&quot; statements in python?", "body": "<p>So I want a font to be red if a condition is true, but otherwise print in green font. Look at the code down below for an example.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#if Money is greater than or equal to 0, then the font color will be green. Otherwise, the font color will be red.\n\nfrom colorama import Fore\nCash = int(input(\"Enter random number here (This is how much money a player has)\"))\nprint(\"Money: \", if (Cash) &gt;= 0: Fore.GREEN + (Cash), else: Fore.RED + (Cash))\n\n#this does not work on python, is there a way you can fix this?\n#If I input a positive number, I get a green font.\n#If I input a negative number, I get a red font.\n#The output only says \"SyntaxError: invalid syntax\"\n</code></pre>\n"}, {"tags": ["python", "multithreading", "multiprocessing"], "comments": [{"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 2, "creation_date": 1556748545, "post_id": 55943195, "comment_id": 98539779, "body": "What are you actually trying to do? Both parts of your question are not well posed. It might be easier to point you the &quot;right question&quot; (and its answer) if you explained exactly what it is you&#39;re trying to accomplish."}, {"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 0, "creation_date": 1556748628, "post_id": 55943195, "comment_id": 98539815, "body": "Why would you assume that you could not start both a process and thread? Why would you assume that creating a deep copy <i>before</i> starting a process is needed?"}, {"owner": {"reputation": 241, "user_id": 4451856, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/4d8415b6d02cac49b54ba05e283b66fe?s=128&d=identicon&r=PG&f=1", "display_name": "a&#39;-", "link": "https://stackoverflow.com/users/4451856/a"}, "edited": false, "score": 0, "creation_date": 1556748638, "post_id": 55943195, "comment_id": 98539819, "body": "If you look at the main() method, I am trying to spin a thread and a process from the same function. Are there any issues with this approach?"}, {"owner": {"reputation": 241, "user_id": 4451856, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/4d8415b6d02cac49b54ba05e283b66fe?s=128&d=identicon&r=PG&f=1", "display_name": "a&#39;-", "link": "https://stackoverflow.com/users/4451856/a"}, "reply_to_user": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 0, "creation_date": 1556748716, "post_id": 55943195, "comment_id": 98539842, "body": "@MisterMiyagi, I tried running it without a deepcopy and that did not work, that is the reason for the deepcopy of the object."}, {"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 0, "creation_date": 1556748924, "post_id": 55943195, "comment_id": 98539886, "body": "What do you mean by &quot;did not work&quot;? Did it throw an exception? Did it not behave as expected?"}, {"owner": {"reputation": 241, "user_id": 4451856, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/4d8415b6d02cac49b54ba05e283b66fe?s=128&d=identicon&r=PG&f=1", "display_name": "a&#39;-", "link": "https://stackoverflow.com/users/4451856/a"}, "edited": false, "score": 0, "creation_date": 1556748956, "post_id": 55943195, "comment_id": 98539897, "body": "It did not read the updated values in the list (i.e  not behave as expected)"}, {"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 0, "creation_date": 1556748978, "post_id": 55943195, "comment_id": 98539902, "body": "The <code>Process</code> in this case is a red herring I think. Does your <code>ABC.modify_list</code> have any kind of thread synchronization? You need some kind of locks around it so that your main thread isn&#39;t trying the read the object at the same time that your ancillary thread is modifying it. The fact that after you read <code>ABC.object</code> you pass it as an argument to a routine in a subprocess is irrelevant."}, {"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 0, "creation_date": 1556749197, "post_id": 55943195, "comment_id": 98539960, "body": "Since processes do not share memory, what the thread does to <code>abc</code> in the initial process is not necessarily visible in the child process. Only if the thread finishes before the process is launched does the later inherit the data from the former."}, {"owner": {"reputation": 241, "user_id": 4451856, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/4d8415b6d02cac49b54ba05e283b66fe?s=128&d=identicon&r=PG&f=1", "display_name": "a&#39;-", "link": "https://stackoverflow.com/users/4451856/a"}, "reply_to_user": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 0, "creation_date": 1556749227, "post_id": 55943195, "comment_id": 98539968, "body": "@Iguananaut thank you for pointing out the lock situation. I do have a lock in the original code in the main thread before it tries to make a copy of the list.  And my main concern was regarding spinning a process with the thread, since I couldn&#39;t find any documentation or code for the same"}, {"owner": {"reputation": 241, "user_id": 4451856, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/4d8415b6d02cac49b54ba05e283b66fe?s=128&d=identicon&r=PG&f=1", "display_name": "a&#39;-", "link": "https://stackoverflow.com/users/4451856/a"}, "reply_to_user": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 0, "creation_date": 1556749341, "post_id": 55943195, "comment_id": 98540005, "body": "@MisterMiyagi agreed. This question is under the assumption that the thread has modified the list before the process starts"}, {"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 1, "creation_date": 1556749548, "post_id": 55943195, "comment_id": 98540054, "body": "I think the synchronisation details matter, and it would help to know exactly what you expect this code to do and what it&#39;s doing instead."}, {"owner": {"reputation": 241, "user_id": 4451856, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/4d8415b6d02cac49b54ba05e283b66fe?s=128&d=identicon&r=PG&f=1", "display_name": "a&#39;-", "link": "https://stackoverflow.com/users/4451856/a"}, "reply_to_user": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 0, "creation_date": 1556749842, "post_id": 55943195, "comment_id": 98540113, "body": "@Iguananaut Please read the modified code that has the synchronization in place Also, this code is behaving as I expect it to, but my question was around if there are some edge cases that I am missing? Or if there is some obvious issues or alternative solutions to this? (except for spinning up 2 threads)"}, {"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 0, "creation_date": 1556750307, "post_id": 55943195, "comment_id": 98540231, "body": "Again, I think it would help if you explained exactly what you are hoping to achieve, since without a complete picture it&#39;s not possible to just guess what your problem is."}, {"owner": {"reputation": 15415, "user_id": 982257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/pRf2i.jpg?s=128&g=1", "display_name": "Iguananaut", "link": "https://stackoverflow.com/users/982257/iguananaut"}, "edited": false, "score": 0, "creation_date": 1556750526, "post_id": 55943195, "comment_id": 98540276, "body": "Regardless the updated code makes a little more sense now. Assuming your data structure <i>can</i> be deepcopied it makes sense to do so here since you want to grab a snapshot of it to pass to the subprocess. You could also avoid that by holding the lock while starting the Process but it would be better not to as that would block your thread that much longer."}], "answers": [{"comments": [{"owner": {"reputation": 241, "user_id": 4451856, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/4d8415b6d02cac49b54ba05e283b66fe?s=128&d=identicon&r=PG&f=1", "display_name": "a&#39;-", "link": "https://stackoverflow.com/users/4451856/a"}, "edited": false, "score": 0, "creation_date": 1556749474, "post_id": 55943374, "comment_id": 98540040, "body": "I only care about the object at the point when the process was created, if it is modified post creation it doesn&#39;t matter to the process. In this case, what would be recommended, creating a shared_memory or deepcopy?"}, {"owner": {"reputation": 1460, "user_id": 2804722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZjBig.jpg?s=128&g=1", "display_name": "Marc Sances", "link": "https://stackoverflow.com/users/2804722/marc-sances"}, "reply_to_user": {"reputation": 241, "user_id": 4451856, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/4d8415b6d02cac49b54ba05e283b66fe?s=128&d=identicon&r=PG&f=1", "display_name": "a&#39;-", "link": "https://stackoverflow.com/users/4451856/a"}, "edited": false, "score": 0, "creation_date": 1556749592, "post_id": 55943374, "comment_id": 98540059, "body": "Make a deepcopy, but make it before the thread starts, so once it&#39;s modified by the thread it still works, otherwise it&#39;s useless since when you call deepcopy it is possible that the thread has already modified the object. No need of shared memory in your case."}, {"owner": {"reputation": 241, "user_id": 4451856, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/4d8415b6d02cac49b54ba05e283b66fe?s=128&d=identicon&r=PG&f=1", "display_name": "a&#39;-", "link": "https://stackoverflow.com/users/4451856/a"}, "edited": false, "score": 0, "creation_date": 1556749950, "post_id": 55943374, "comment_id": 98540147, "body": "I need the most up to date modification by the thread when the process starts, so I think in my case I will need to make deepcopy every time I spin up a process inside the loop to get the latest value of the list"}], "tags": [], "owner": {"reputation": 1460, "user_id": 2804722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZjBig.jpg?s=128&g=1", "display_name": "Marc Sances", "link": "https://stackoverflow.com/users/2804722/marc-sances"}, "is_accepted": true, "score": 2, "last_activity_date": 1556748865, "creation_date": 1556748865, "answer_id": 55943374, "question_id": 55943195, "link": "https://stackoverflow.com/questions/55943195/can-you-start-a-thread-and-a-process-in-the-same-code/55943374#55943374", "title": "Can you start a thread and a process in the same code?", "body": "<p>Regarding first question: yes you can create a thread to perform some task while the main thread creates a process, or more threads... I don't see why that should be a problem to you. When you create a thread, the thread will jump to the thread target and the main thread will continue with the next instruction, which can happen to be creating a process.</p>\n\n<p>For the second question, if you don't set a shared memory page for the child process, all the process memory is \"deep copied\" (quotes apply since it's actually a copy-on-write) and so the new process will not be aware of what the thread did to the object, because there will be a new copy of everything, including the object.</p>\n\n<p>However, you're facing yourself a race condition: since the thread can modify the object, it will depend on the exact moment where the new process is created that it will have the new or old value. No matter what, any further changes done by other threads will not be seen by the new process.</p>\n\n<p>If you do set a shared memory page (<a href=\"https://docs.python.org/dev/library/multiprocessing.shared_memory.html\" rel=\"nofollow noreferrer\">multiprocessing.shared_memory</a>), then the child process will actually see all the changes done by the thread.</p>\n"}], "owner": {"reputation": 241, "user_id": 4451856, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/4d8415b6d02cac49b54ba05e283b66fe?s=128&d=identicon&r=PG&f=1", "display_name": "a&#39;-", "link": "https://stackoverflow.com/users/4451856/a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 55943374, "answer_count": 1, "score": 0, "last_activity_date": 1556750167, "creation_date": 1556747845, "last_edit_date": 1556750167, "question_id": 55943195, "link": "https://stackoverflow.com/questions/55943195/can-you-start-a-thread-and-a-process-in-the-same-code", "title": "Can you start a thread and a process in the same code?", "body": "<ol>\n<li>Can a main method of the code spin up a new thread and a new process? Please look at the main method in the below sample code for clarification of the question</li>\n<li>If the answer to the previous questions is yes: In that case the data object modified by the thread when passed to the process, will it need to be a deepcopy of the object ? Or can it be referenced directly since it is a part of the parent main process?</li>\n</ol>\n\n<p>P.S. The following code behaves as expected. The question is around if this is an acceptable solution? Or if there are some edge cases or obvious issues with the following code, that I might be overlooking </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import threading\nfrom multiprocessing import process\nfrom copy import deepcopy\nfrom threading import Lock\nimport time\n\nclass ABC:\n    def __init__(self, lock):\n        self.object = []\n        self.lock = lock\n    def modify_list(self):\n        while condition_true:\n            self._modify_list()\n            time.sleep(few_minutes)\n\n    def _modify_list(self):\n        with self.lock:\n            ''' Does something to modify self.object'''\nclass XYZ:\n    def __init__(self, abc_obj):\n        self.abc_obj = abc_obj\n    def read_obj(self):\n        ''' Performs the read operation on the abc_obj'''\n\ndef main():\n    lock = Lock()\n    abc = ABC(lock)\n    t1 = threading.Thread(target=abc.modify_list)\n    t1.start()\n\n    while condition_true:\n        with lock:\n            xyz = XYZ(deepcopy(abc.object))\n        p1 = process.Process(target=xyz.read_obj)\n        p1.start()\n        p1.join()\n    t1.join()\n</code></pre>\n"}, {"tags": ["python", "django", "django-views"], "comments": [{"owner": {"reputation": 1726, "user_id": 4208788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/InWyx.jpg?s=128&g=1", "display_name": "Higor Rossato", "link": "https://stackoverflow.com/users/4208788/higor-rossato"}, "edited": false, "score": 0, "creation_date": 1556749257, "post_id": 55943177, "comment_id": 98539979, "body": "Maybe you should try the <code>.format()</code> way instead of the <code>+</code>. So, the send_mail should look like: <code>send_mail(&#39;{} has sent you a message&#39;.format(current_user.first_name), plain_message_to_user, &#39;x@x.com&#39;, [to_user_email], fail_silently=False, html_message=html_message_to_user)</code>. Don&#39;t know if that&#39;s gonna fix it though"}, {"owner": {"reputation": 51, "user_id": 6210879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5731a67240e5eaa64072d7217604f07f?s=128&d=identicon&r=PG&f=1", "display_name": "user6210879", "link": "https://stackoverflow.com/users/6210879/user6210879"}, "reply_to_user": {"reputation": 1726, "user_id": 4208788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/InWyx.jpg?s=128&g=1", "display_name": "Higor Rossato", "link": "https://stackoverflow.com/users/4208788/higor-rossato"}, "edited": false, "score": 0, "creation_date": 1556836782, "post_id": 55943177, "comment_id": 98573733, "body": "that also didn&#39;t work.."}], "owner": {"reputation": 51, "user_id": 6210879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5731a67240e5eaa64072d7217604f07f?s=128&d=identicon&r=PG&f=1", "display_name": "user6210879", "link": "https://stackoverflow.com/users/6210879/user6210879"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556760323, "creation_date": 1556747733, "question_id": 55943177, "link": "https://stackoverflow.com/questions/55943177/calling-the-current-user-in-a-django-view-and-template", "title": "Calling the current user in a Django view and template", "body": "<p>I have a view where a chat channel is created between two users. I want to notify the user when a message is sent (who it came from) but I'm having trouble accessing the current user (the user who is logged in and sending the message). In the view below I have a 'to_user' whose name is displayed properly, however, the 'current_user' is not displaying.</p>\n\n<p>Here is my views.py</p>\n\n<pre><code>@login_required\ndef create_channel(request, to_user_id):\n    to_user = get_user_model().objects.get(pk=to_user_id)\n    try:\n        channel = Channel.objects.get(users=request.user, users__id=to_user_id)\n    except Channel.DoesNotExist:\n        channel = Channel.objects.create(\n            channel_name='{from_user}-{to_user}'.format(from_user=request.user.username, to_user=to_user)\n        )\n        channel.users.add(request.user)\n        channel.users.add(to_user)\n        client = get_client()\n        service = client.chat.services(settings.TWILIO_CHAT_SID)\n        twilio_channel = service.channels.create(channel.channel_name)\n\n        channel.twilio_chat_id = twilio_channel.sid\n\n        twilio_channel.members.create(identity=request.user.get_twilio_user_id())\n        twilio_channel.members.create(identity=to_user.get_twilio_user_id())\n        channel.save()\n        #email the to_user when they receive a message\n        to_user = to_user\n        current_user = request.user\n        to_user_email = to_user.email\n        user_email = current_user.email\n        html_message_to_user = render_to_string('send_message_to_user.html', {'user': current_user,\n                                                                            'to_user': to_user,\n                                                                            'channel': channel,\n                                                                            }\n        #send email to the to_user\n        send_mail(current_user.first_name + ' has sent you a message', plain_message_to_user, 'x@x.com', [to_user_email], fail_silently=False, html_message=html_message_to_user)\n        mail_admins('A message has been sent', 'A message has been sent to ' + to_user.first_name + ' from ' + current_user.first_name, fail_silently=False, )\n\n    return HttpResponseRedirect(reverse('chatapp:twilio', kwargs={'pk': channel.pk}))\n</code></pre>\n\n<p>The email is sending properly however the 'current_user' first_name is not showing up. I have also tried to simply put 'user' or 'request.user' and these don't work either. I'm not sure how to get the current users name to display in the email message or in the email template.</p>\n\n<p>Any help appreciated!</p>\n"}, {"tags": ["python", "python-3.x", "enums"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1556747910, "post_id": 55943172, "comment_id": 98539588, "body": "Have you read <a href=\"https://docs.python.org/3/library/enum.html#using-automatic-values\" rel=\"nofollow noreferrer\">docs.python.org/3/library/enum.html#using-automatic-values</a>? What are you actually trying to achieve here? This seems like an XY problem."}, {"owner": {"reputation": 379, "user_id": 5426995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9734b52b62109df1ed9f39c29ba721f6?s=128&d=identicon&r=PG&f=1", "display_name": "YatShan", "link": "https://stackoverflow.com/users/5426995/yatshan"}, "edited": false, "score": 0, "creation_date": 1556748027, "post_id": 55943172, "comment_id": 98539626, "body": "The answer for your question can be found in following link <a href=\"https://stackoverflow.com/questions/24243500/python-3-4-random-choice-on-enum\" title=\"python 3 4 random choice on enum\">stackoverflow.com/questions/24243500/&hellip;</a>"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "reply_to_user": {"reputation": 379, "user_id": 5426995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9734b52b62109df1ed9f39c29ba721f6?s=128&d=identicon&r=PG&f=1", "display_name": "YatShan", "link": "https://stackoverflow.com/users/5426995/yatshan"}, "edited": false, "score": 0, "creation_date": 1556748199, "post_id": 55943172, "comment_id": 98539691, "body": "@YatShan no, that&#39;s not the same"}, {"owner": {"reputation": 25770, "user_id": 5349916, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/QovYv.jpg?s=128&g=1", "display_name": "MisterMiyagi", "link": "https://stackoverflow.com/users/5349916/mistermiyagi"}, "edited": false, "score": 1, "creation_date": 1556748450, "post_id": 55943172, "comment_id": 98539754, "body": "The entire point of <code>auto</code> is already to produce arbitrary but consistent values. The precise method is reserved as an implementation detail. Setting an auto value to a specific one, say 10, is <i>less</i> arbitrary. What is your goal, and in how far do you need more arbitrary values?"}], "answers": [{"tags": [], "owner": {"reputation": 78, "user_id": 9713709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09b22cc9a992454f85923052c1b6819f?s=128&d=identicon&r=PG&f=1", "display_name": "juncaks", "link": "https://stackoverflow.com/users/9713709/juncaks"}, "is_accepted": false, "score": 3, "last_activity_date": 1556748548, "last_edit_date": 1556748548, "creation_date": 1556748136, "answer_id": 55943240, "question_id": 55943172, "link": "https://stackoverflow.com/questions/55943172/how-to-change-the-base-value-of-auto-in-python-enum/55943240#55943240", "title": "How to change the base value of auto in python Enum?", "body": "<p>You can use <code>_generate_next_value_</code> to change the way <code>auto()</code> select the value. For instance :</p>\n\n<pre><code>from enum import Enum, auto\n\nclass Auto_10(Enum):\n    def _generate_next_value_(name, start, count, last_values):\n        if name == \"ant\":\n            return 10\n        else:\n           return last_values[-1] + 1\n\nclass Animal(Auto_10):\n    ant = auto()\n    bee = auto()\n    cat = auto()\n    dog = auto()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51597, "user_id": 208880, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/de311342220232e618cb27c9936ab9bf?s=128&d=identicon&r=PG", "display_name": "Ethan Furman", "link": "https://stackoverflow.com/users/208880/ethan-furman"}, "is_accepted": true, "score": 5, "last_activity_date": 1556749645, "creation_date": 1556749645, "answer_id": 55943488, "question_id": 55943172, "link": "https://stackoverflow.com/questions/55943172/how-to-change-the-base-value-of-auto-in-python-enum/55943488#55943488", "title": "How to change the base value of auto in python Enum?", "body": "<p>If you want certain members to have certain values, just assign them:</p>\n\n<pre><code>class Animal(Enum):\n    ant = 10\n    bee = auto()\n    cat = auto()\n    dog = auto()\n</code></pre>\n\n<p>And that will automatically adjust the values of succeeding members:</p>\n\n<pre><code>&gt;&gt;&gt; list(Animal)\n[&lt;Animal.ant: 10&gt;, &lt;Animal.bee: 11&gt;, &lt;Animal.cat: 12&gt;, &lt;Animal.dog: 13&gt;]\n</code></pre>\n"}], "owner": {"reputation": 771, "user_id": 602117, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/f23193ab39941eb3e57a738161d316f5?s=128&d=identicon&r=PG", "display_name": "mr_js", "link": "https://stackoverflow.com/users/602117/mr-js"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 910, "favorite_count": 0, "accepted_answer_id": 55943488, "answer_count": 2, "score": 3, "last_activity_date": 1556750636, "creation_date": 1556747711, "last_edit_date": 1556750636, "question_id": 55943172, "link": "https://stackoverflow.com/questions/55943172/how-to-change-the-base-value-of-auto-in-python-enum", "title": "How to change the base value of auto in python Enum?", "body": "<p>Assuming I have the following code, how can I change the base value of auto so that Animal.ant is an arbitrary value, e.g. 10, rather than 1?</p>\n\n<pre><code>from enum import Enum, auto\n\nclass Animal(Enum):\n    ant = auto()\n    bee = auto()\n    cat = auto()\n    dog = auto()\n</code></pre>\n"}, {"tags": ["python", "scripting"], "comments": [{"owner": {"reputation": 51, "user_id": 7016002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f61b77a804a63755d585672fe88c7ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Wes S.", "link": "https://stackoverflow.com/users/7016002/wes-s"}, "edited": false, "score": 1, "creation_date": 1556748046, "post_id": 55943165, "comment_id": 98539634, "body": "What is the script you&#39;re calling doing? You can just import the module and call the methods it&#39;s calling on those files directly."}, {"owner": {"reputation": 33, "user_id": 11439034, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TenT9RaPv70/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfWFwXuEphxtIdW5oWtnPVKwtOvVA/mo/photo.jpg?sz=128", "display_name": "Grex L", "link": "https://stackoverflow.com/users/11439034/grex-l"}, "reply_to_user": {"reputation": 51, "user_id": 7016002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f61b77a804a63755d585672fe88c7ee4?s=128&d=identicon&r=PG&f=1", "display_name": "Wes S.", "link": "https://stackoverflow.com/users/7016002/wes-s"}, "edited": false, "score": 0, "creation_date": 1557586221, "post_id": 55943165, "comment_id": 98819155, "body": "I am not 100% sure tbh. It is an open sourced code that performs a kind of image transformation on one picture and i essentially just want to write a script to let it run that one command on a range of pictures instead of re-typing it 1k times.  So I&#39;m not very familiar with what it calls when."}], "owner": {"reputation": 33, "user_id": 11439034, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-TenT9RaPv70/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfWFwXuEphxtIdW5oWtnPVKwtOvVA/mo/photo.jpg?sz=128", "display_name": "Grex L", "link": "https://stackoverflow.com/users/11439034/grex-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 317, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556747692, "creation_date": 1556747692, "question_id": 55943165, "link": "https://stackoverflow.com/questions/55943165/how-to-call-another-python-file-with-arguments-and-flags", "title": "How to call another python file with arguments and --flags", "body": "<p>So, I have a script which uses three flags, two input and one output file. However I would like to write a script that calls this script and replaces one or more of the input files with each file from a specified subdirectory</p>\n\n<p>So far I have imported sys and listdir, so my current plan is to use sys to get an argument for the folder that i want to have the files from and use listdir to have an easy way to iterate through the filenames and call each one individually with that other script i mentioned. </p>\n\n<p>However I dont know how to call the script from inside my current file together with the flags (e.g. script.py --content ./contentfolder/content.jpg ...) and execute the entire batch. </p>\n\n<pre><code>from os import listdir\nimport sys \n\ndef main():\n    script = sys.argv[0]\n    contentfolder = sys.argv[1]\n    for file in listdir(contentfolder):\n        #call script --content file --input2 \"filename\" --output \"out\" ...     \nmain()\n</code></pre>\n\n<p>I'm quite new to python scripts so didnt get very far yet, but I also couldnt find anything useful with google (could be looking for the wrong keywords maybe?)</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1556748104, "post_id": 55943137, "comment_id": 98539656, "body": "The destroy command destroys a widget and all of it&#39;s children. If you&#39;re just closing a <code>Frame</code>, it won&#39;t close the window that the frame is in. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. We definitely don&#39;t need to see your entire program, so remove all code that isn&#39;t absolutely necessary to reproduce the problem."}, {"owner": {"reputation": 131, "user_id": 9022690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ce0b2daee75aff3ef471a1735143ce?s=128&d=identicon&r=PG&f=1", "display_name": "l.m", "link": "https://stackoverflow.com/users/9022690/l-m"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1556748196, "post_id": 55943137, "comment_id": 98539688, "body": "@BryanOakley Is there a specific function that closes the window, so closing everything?"}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1556748273, "post_id": 55943137, "comment_id": 98539708, "body": "The specific function is <code>destroy</code>, and you need to call it on the root window."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 1, "creation_date": 1556749653, "post_id": 55943137, "comment_id": 98540073, "body": "You do not have enough code to see why you are having to press Quit multiple times. My guess is <code>self.main</code> is not the root Tk instance."}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1556752406, "post_id": 55943137, "comment_id": 98540657, "body": "Its honestly impossible to be sure without seeing a working example that we can test. Please provide the MCVE that Bryan linked if you want a good answer to your question."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 4752610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b72eca3ec68cdaa930a6295e85b176d9?s=128&d=identicon&r=PG", "display_name": "futurebird", "link": "https://stackoverflow.com/users/4752610/futurebird"}, "edited": false, "score": 0, "creation_date": 1607371537, "post_id": 55943492, "comment_id": 115246865, "body": "destroy causes the window to stop responding and not close."}], "tags": [], "owner": {"reputation": 15, "user_id": 10043520, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Xzw1USpWQcU/AAAAAAAAAAI/AAAAAAAACKY/mrGpOvYJyf0/photo.jpg?sz=128", "display_name": "Everton Colombo", "link": "https://stackoverflow.com/users/10043520/everton-colombo"}, "is_accepted": false, "score": 0, "last_activity_date": 1556749659, "creation_date": 1556749659, "answer_id": 55943492, "question_id": 55943137, "link": "https://stackoverflow.com/questions/55943137/tkinter-window-doesnt-destroy-after-pressing-quit-once-have-to-press-quit-4-ti/55943492#55943492", "title": "Tkinter window doesn&#39;t destroy after pressing Quit once, have to press Quit 4 times to close window", "body": "<p><strong>Here are a few things you could try:</strong></p>\n\n<ul>\n<li>Make sure to call <code>destroy()</code> from the root window.</li>\n<li>Try pressing quit once and waiting. I've had a similar problem in older machines where I'd press a button and it would take 5 whole seconds to it to respond.</li>\n</ul>\n"}], "owner": {"reputation": 131, "user_id": 9022690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ce0b2daee75aff3ef471a1735143ce?s=128&d=identicon&r=PG&f=1", "display_name": "l.m", "link": "https://stackoverflow.com/users/9022690/l-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556749659, "creation_date": 1556747454, "question_id": 55943137, "link": "https://stackoverflow.com/questions/55943137/tkinter-window-doesnt-destroy-after-pressing-quit-once-have-to-press-quit-4-ti", "title": "Tkinter window doesn&#39;t destroy after pressing Quit once, have to press Quit 4 times to close window", "body": "<p>I'm using the Tkinter module in python, with that I make a calculator doing the basic functions for a calculator. So there is a total of 5 different functions, using Object-oriented programming. The issue I'm having is I implement the Quit widget so it destroys the main window when pressed. But when I press it, I have to press quit a total of 4 times before the window is closed.</p>\n\n<p>I would put all of my code but I'm not sure where the issue is and wanted to see any ideas you all say then ill put in the specific code.</p>\n\n<pre><code>self.quit = Button(self.bottom,text = 'Quit',command = self.main.destroy)\n</code></pre>\n\n<p>This is the line of code that executes to close the window using destroy.\n'main' is the title of the window.\n'bottom' is the fourth row.</p>\n\n<p>If you require I put in all my code then I will, I just didn't want to put in 30-40 lines of code and it could be anywhere.</p>\n\n<p>Is it possible since I have 5 frames, that the destroy function closes the first 3 first then finally closes the window that has quit?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 2651, "user_id": 5361479, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/892356874144950/picture?type=large", "display_name": "Jai", "link": "https://stackoverflow.com/users/5361479/jai"}, "edited": false, "score": 0, "creation_date": 1556747776, "post_id": 55943123, "comment_id": 98539550, "body": "where are you using the dictionary? Nowhere"}], "answers": [{"comments": [{"owner": {"reputation": 162, "user_id": 11223183, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-UmzimiTqwQA/AAAAAAAAAAI/AAAAAAAAAA8/K-fdc8ymzp8/photo.jpg?sz=128", "display_name": "ekmcd", "link": "https://stackoverflow.com/users/11223183/ekmcd"}, "edited": false, "score": 0, "creation_date": 1556748088, "post_id": 55943212, "comment_id": 98539650, "body": "Some context: In general a dictionary should use the value you have as a key (the question number) and the value you want as the value (the answer).  The other line changes because you want to compare answer to the value of the dictionary for the corresponding question.  Also, since the dictionary keys are numbers, you could just use a list and access them by the index."}, {"owner": {"reputation": 23, "user_id": 11416504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ba7eb20b8a9c9d8dd33fd12b51c8213?s=128&d=identicon&r=PG&f=1", "display_name": "slavel", "link": "https://stackoverflow.com/users/11416504/slavel"}, "edited": false, "score": 0, "creation_date": 1556748469, "post_id": 55943212, "comment_id": 98539761, "body": "Thank you!! This is really helpful!!"}], "tags": [], "owner": {"reputation": 2651, "user_id": 5361479, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/892356874144950/picture?type=large", "display_name": "Jai", "link": "https://stackoverflow.com/users/5361479/jai"}, "is_accepted": true, "score": 1, "last_activity_date": 1556775731, "last_edit_date": 1556775731, "creation_date": 1556747966, "answer_id": 55943212, "question_id": 55943123, "link": "https://stackoverflow.com/questions/55943123/how-to-count-score-of-multiple-choice-questions-from-a-text-file/55943212#55943212", "title": "How to count score of multiple-choice questions from a text file", "body": "<ul>\n<li>The dictionary you trying to use should be other way round and the value in the dictionary should not be in a list.  </li>\n<li><p><code>if answer == correct_answers</code> is wrong since <code>\"a\" != {0:\"c\", 1:b, 2:\"a\", 3:\"a\", 4:\"d\"}</code></p>\n\n<pre><code>math_file = open(\"math.txt\", 'r')\nquestion_prompts = math_file.readlines()\ncount = 0\ncorrect_answers = {0:\"c\", 1:\"b\", 2:\"a\", 3:\"a\", 4:\"d\"}  # the line to change\nstartline = 0\nfor num in range(5):\n    for i in range(startline, startline + 5):\n        print(question_prompts[i])\n    answer = input('Answer: ')\n    startline = startline + 5\n    if answer == correct_answers[num]: # the line to change\n        count += 1\n</code></pre></li>\n</ul>\n"}], "owner": {"reputation": 23, "user_id": 11416504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ba7eb20b8a9c9d8dd33fd12b51c8213?s=128&d=identicon&r=PG&f=1", "display_name": "slavel", "link": "https://stackoverflow.com/users/11416504/slavel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 55943212, "answer_count": 1, "score": 0, "last_activity_date": 1556775731, "creation_date": 1556747353, "question_id": 55943123, "link": "https://stackoverflow.com/questions/55943123/how-to-count-score-of-multiple-choice-questions-from-a-text-file", "title": "How to count score of multiple-choice questions from a text file", "body": "<p>I am trying to count the number of right and wrong answers in a text file that contains 5 questions and 4 possible answers. As of right now i am able to loop through each question one at a time and the user is able to give an answer, however I can't seem to figure out how to count if an answer given by the user is right or wrong. </p>\n\n<p>I know how to use an accumulator value in other simpler codes, however I just don't know how to format it when the questions are coming from a text file. </p>\n\n<pre><code>math_file = open(\"math.txt\", 'r')\nquestion_prompts = math_file.readlines()\ncount = 0\ncorrect_answers = {\"c\":[0], \"b\":[1], \"a\":[2], \"a\":[3], \"d\":[4]}\nstartline = 0\nfor num in range(5):\n    for i in range(startline, startline + 5):\n        print(question_prompts[i])\n    answer = input('Answer: ')\n    startline = startline + 5\n    if answer == correct_answers:\n        count += 1\n</code></pre>\n\n<p>This code properly prints out the text file questions one at a time, for example, the first question is:\nWhat is 4 x 6?</p>\n\n<p>(a) 4</p>\n\n<p>(b) 12</p>\n\n<p>(c) 24</p>\n\n<p>(d) 240</p>\n\n<p>and then the program gives </p>\n\n<p>Answer: (where the user can give input)</p>\n\n<p>I tried to use a dictionary to put the answers of the questions in order of which they appear, but im not sure that is working. Any advice greatly appreciated!!</p>\n"}, {"tags": ["python", "python-3.x", "exception"], "comments": [{"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1556747613, "post_id": 55943121, "comment_id": 98539510, "body": "Can you reliably recover from <i>any</i> exception in <code>Handler3</code>?"}, {"owner": {"reputation": 27, "user_id": 11228634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad87d281b470c554c266693d3e079e15?s=128&d=identicon&r=PG&f=1", "display_name": "TheGreatestWizard", "link": "https://stackoverflow.com/users/11228634/thegreatestwizard"}, "reply_to_user": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1556747863, "post_id": 55943121, "comment_id": 98539573, "body": "@Blorgbeard It&#39;s not really recovering anything. It&#39;s just some finish-off code."}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1556748200, "post_id": 55943121, "comment_id": 98539692, "body": "In your second scenario, you continue with <code>Task2</code> (after your finish-off code) if <code>Task1</code> fails due to an unknown exception. If that makes sense, then do that. If you want to abort the process if a task fails for an unknown reason, then do that."}, {"owner": {"reputation": 27, "user_id": 11228634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad87d281b470c554c266693d3e079e15?s=128&d=identicon&r=PG&f=1", "display_name": "TheGreatestWizard", "link": "https://stackoverflow.com/users/11228634/thegreatestwizard"}, "reply_to_user": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1556748913, "post_id": 55943121, "comment_id": 98539881, "body": "@Blorgbeard Yes, but I think the second one would be difficult to manage and probably I need to write <code>Handler3</code> in many forms."}, {"owner": {"reputation": 1108, "user_id": 3047647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19035ba45a8a276456fc32fda02ff9d0?s=128&d=identicon&r=PG&f=1", "display_name": "Sriram", "link": "https://stackoverflow.com/users/3047647/sriram"}, "edited": false, "score": 0, "creation_date": 1556784946, "post_id": 55943121, "comment_id": 98549115, "body": "Unknown exceptions should be handled only if you want your code to behave gracefully. If not you should feel free to raise it since it is not excepted and let the caller decide how to handle the exception. And if you want your code to behave gracefully it makes sense you use the first approach and put a exception handling at the top of the code"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11228634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad87d281b470c554c266693d3e079e15?s=128&d=identicon&r=PG&f=1", "display_name": "TheGreatestWizard", "link": "https://stackoverflow.com/users/11228634/thegreatestwizard"}, "edited": false, "score": 0, "creation_date": 1556748082, "post_id": 55943160, "comment_id": 98539648, "body": "In this case, I need to do some finish-off work if any error occurs. Thus, it becomes necessary for me to except every potential exception if possible"}], "tags": [], "owner": {"reputation": 78, "user_id": 9713709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09b22cc9a992454f85923052c1b6819f?s=128&d=identicon&r=PG&f=1", "display_name": "juncaks", "link": "https://stackoverflow.com/users/9713709/juncaks"}, "is_accepted": false, "score": 0, "last_activity_date": 1556747594, "creation_date": 1556747594, "answer_id": 55943160, "question_id": 55943121, "link": "https://stackoverflow.com/questions/55943121/is-it-a-good-idea-to-put-try-except-at-the-first-line-of-the-code-to-catc/55943160#55943160", "title": "Is it a good idea to put &quot;try...except...&quot; at the first line of the code to catch unknown error?", "body": "<p>In general it's never a good practice to except every exception. </p>\n\n<p>But, if it make sense, in my opinion the first one is cleaner. </p>\n"}], "owner": {"reputation": 27, "user_id": 11228634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad87d281b470c554c266693d3e079e15?s=128&d=identicon&r=PG&f=1", "display_name": "TheGreatestWizard", "link": "https://stackoverflow.com/users/11228634/thegreatestwizard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556749024, "creation_date": 1556747346, "last_edit_date": 1556749024, "question_id": 55943121, "link": "https://stackoverflow.com/questions/55943121/is-it-a-good-idea-to-put-try-except-at-the-first-line-of-the-code-to-catc", "title": "Is it a good idea to put &quot;try...except...&quot; at the first line of the code to catch unknown error?", "body": "<p>I've already handled some exceptions in my code, but I'm afraid of some unexpected errors that may occur. Let's say the code needs to finish three tasks. Is it okay to write it like this?</p>\n\n<pre><code>#Python 3.x\n\ntry:                 \n    try:\n        Task1()\n    except KnownError1:\n        Handler1()\n    Task2()        # The second task is safe \n    try:\n        Task3()\n    except KnownError2:\n        Handler2()   \nexcept Exception:\n    Handler3()\n</code></pre>\n\n<p>or should I catch the unknown error every time when I catch other errors:</p>\n\n<pre><code>try:\n    Task1()\nexcept KnownError1:\n    Handler1()\nexcept Exception:\n    Handler3()\nTask2()       \ntry:\n    Task3()\nexcept KnownError2:\n    Handler2()\nexcept Exception:\n    Handler3()\n</code></pre>\n\n<p>and why?</p>\n"}, {"tags": ["python", "tensorflow", "keras", "vgg-net"], "answers": [{"tags": [], "owner": {"reputation": 586, "user_id": 3016483, "user_type": "registered", "accept_rate": 28, "profile_image": "https://i.stack.imgur.com/jFQDy.jpg?s=128&g=1", "display_name": "Illuminati0x5B", "link": "https://stackoverflow.com/users/3016483/illuminati0x5b"}, "is_accepted": true, "score": 0, "last_activity_date": 1556751277, "creation_date": 1556751277, "answer_id": 55943697, "question_id": 55943110, "link": "https://stackoverflow.com/questions/55943110/keras-output-dimensions-of-vgg19-conv4-1-layer-doesnt-match-up-with-model-outpu/55943697#55943697", "title": "Keras Output Dimensions of VGG19 Conv4-1 Layer doesn&#39;t match up with model output", "body": "<p>VGG19 takes input (224, 224, 3) by default. If you apply 3 max-pooling layers to it, you will get (28,28, num_kernels). </p>\n\n<p>But, your input is (256, 256, 3). So, if you apply 3 max-pooling layers to this, you will end up getting (32, 32, num_kernels).</p>\n\n<p>After 1st max-pool layer - (128, 128, num_kernels)<br>\nAfter 2nd max-pool layer - (64, 64, num_kernels)<br>\nAfter 3rd max-pool layer - (32, 32, num_kernels)  </p>\n"}], "owner": {"reputation": 2293, "user_id": 4729764, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/aa45447daa10fb1175ae9f3261edd01b?s=128&d=identicon&r=PG", "display_name": "GRS", "link": "https://stackoverflow.com/users/4729764/grs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "accepted_answer_id": 55943697, "answer_count": 1, "score": 0, "last_activity_date": 1556751277, "creation_date": 1556747269, "question_id": 55943110, "link": "https://stackoverflow.com/questions/55943110/keras-output-dimensions-of-vgg19-conv4-1-layer-doesnt-match-up-with-model-outpu", "title": "Keras Output Dimensions of VGG19 Conv4-1 Layer doesn&#39;t match up with model output", "body": "<pre><code>import numpy as np\nfrom PIL import Image\nfrom keras.preprocessing import image\nfrom keras.applications.vgg19 import preprocess_input\n</code></pre>\n\n<p>To create the VGG19 model I use:</p>\n\n<pre><code>img = Input(shape=(256,256,3))\nvgg = VGG19(weights=\"imagenet\")\nvgg.outputs = [vgg.get_layer('block4_conv1').output]\nmodel = Model(inputs=img, outputs=vgg(img))\n</code></pre>\n\n<p>Then in the <code>model.summary()</code> I see that:</p>\n\n<p><code>block4_conv1 (Conv2D)        (None, 28, 28, 512)       1180160</code> </p>\n\n<p>My expected dimensions are <code>(28,28,512)</code>.</p>\n\n<p>To load the image into the network I use:</p>\n\n<pre><code>img = image.load_img(\"./path-to-image.jpeg\", target_size=(256, 256))\nimg = preprocess_input(np.array(img))\n</code></pre>\n\n<p>However, when I put my image through the model, my output dimension is <code>(1, 32, 32, 512)</code> and it makes no sense as to why this happens!</p>\n\n<p>To get output dimensions I run:</p>\n\n<pre><code>img_out = \\\n    model.predict(\n        np.expand_dims(img, 0), \n        batch_size=1\n    )\n\nimg_out.shape\n&gt;&gt;&gt; (1, 32, 32, 512) != (28,28,512)\n</code></pre>\n"}, {"tags": ["python", "keras", "jupyter-notebook", "attributeerror", "tqdm"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2398046"}, "is_accepted": false, "score": 2, "last_activity_date": 1556750463, "creation_date": 1556750463, "answer_id": 55943587, "question_id": 55943042, "link": "https://stackoverflow.com/questions/55943042/jupyter-notebook-and-keras-tqdm-attributeerror-tqdmnotebookcallback-object-h/55943587#55943587", "title": "Jupyter Notebook and Keras-TQDM: AttributeError: &#39;TQDMNotebookCallback&#39; object has no attribute &#39;on_train_batch_begin&#39;", "body": "<p>It seems this is an issue with <a href=\"https://github.com/bstriner/keras-tqdm\" rel=\"nofollow noreferrer\">keras tqdm</a>. From <a href=\"https://github.com/bstriner/keras-tqdm/issues/31\" rel=\"nofollow noreferrer\">Github</a>.</p>\n\n<p>The workaround posted in the issue worked for me:</p>\n\n<pre><code>from keras_tqdm import TQDMNotebookCallback\n\n# keras, model definition...\ncb = TQDMNotebookCallback()\nsetattr(cb,'on_train_batch_begin',lambda x,y:None)\nsetattr(cb,'on_train_batch_end',lambda x,y:None)\n\nmodel.fit(X_train, Y_train, verbose=0, callbacks=[cb])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 11391056, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-QCboblk5NZ8/AAAAAAAAAAI/AAAAAAAAAec/SkTLHTyXTlU/photo.jpg?sz=128", "display_name": "Anand Deshbhratar", "link": "https://stackoverflow.com/users/11391056/anand-deshbhratar"}, "is_accepted": false, "score": 1, "last_activity_date": 1557080443, "creation_date": 1557080443, "answer_id": 55995023, "question_id": 55943042, "link": "https://stackoverflow.com/questions/55943042/jupyter-notebook-and-keras-tqdm-attributeerror-tqdmnotebookcallback-object-h/55995023#55995023", "title": "Jupyter Notebook and Keras-TQDM: AttributeError: &#39;TQDMNotebookCallback&#39; object has no attribute &#39;on_train_batch_begin&#39;", "body": "<p><strong>Brief:</strong> Use keras library directly, instead of tensorflow.keras</p>\n\n<p>Initially, I was using keras from tensorflow (and all the keras library from tensorflow) and faced the same issue i.e.</p>\n\n<pre><code>from tensorflow.keras.models import Sequential\nfrom tensorflow.keras.optimizers import Adam\n.\n.\n</code></pre>\n\n<p>But, when I switched to keras libraries \"TQDMNotebookCallback\" error resolved.\nex:</p>\n\n<pre><code>from keras.models import Sequential\nfrom keras.optimizers import Adam\n.\n.\n</code></pre>\n\n<p>I don't know the exact reason but may be it is related to the source of keras. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2398046"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2073, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1557080443, "creation_date": 1556746810, "question_id": 55943042, "link": "https://stackoverflow.com/questions/55943042/jupyter-notebook-and-keras-tqdm-attributeerror-tqdmnotebookcallback-object-h", "title": "Jupyter Notebook and Keras-TQDM: AttributeError: &#39;TQDMNotebookCallback&#39; object has no attribute &#39;on_train_batch_begin&#39;", "body": "<p>I'm trying to use <a href=\"https://github.com/bstriner/keras-tqdm\" rel=\"nofollow noreferrer\">keras tqdm</a> progress bars in Jupyter Notebook, but I keep getting the error from the title.</p>\n\n<p>My code is:</p>\n\n<pre><code>X_train, X_val, Y_train, Y_val = train_test_split(X_train, Y_train, test_size=0.1,random_state=2)\nmodel = keras.Sequential([keras.layers.Flatten(input_shape=(28,28,1)),\n                          keras.layers.Dense(128, activation=tf.nn.relu),\n                          keras.layers.Dense(10, activation=tf.nn.softmax\n                         )])\nmodel.compile(optimizer='adam', loss='sparse_categorical_crossentropy', metrics=['accuracy'])\nhistory = model.fit(X_train, Y_train, epochs=5, verbose=0, callbacks=[TQDMNotebookCallback()])\n</code></pre>\n\n<p>I get the following error after running the last line:</p>\n\n<pre><code>---------------------------------------------------------------------------\nAttributeError                            Traceback (most recent call last)\n&lt;ipython-input-27-edd4c9b07979&gt; in &lt;module&gt;\n----&gt; 1 history = model.fit(X_train, Y_train, epochs=5, verbose=0, callbacks=[TQDMNotebookCallback()])\n\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/keras/engine/training.py in fit(self, x, y, batch_size, epochs, verbose, callbacks, validation_split, validation_data, shuffle, class_weight, sample_weight, initial_epoch, steps_per_epoch, validation_steps, max_queue_size, workers, use_multiprocessing, **kwargs)\n    878           initial_epoch=initial_epoch,\n    879           steps_per_epoch=steps_per_epoch,\n--&gt; 880           validation_steps=validation_steps)\n    881 \n    882   def evaluate(self,\n\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/keras/engine/training_arrays.py in model_iteration(model, inputs, targets, sample_weights, batch_size, epochs, verbose, callbacks, val_inputs, val_targets, val_sample_weights, shuffle, initial_epoch, steps_per_epoch, validation_steps, mode, validation_in_fit, **kwargs)\n    323         # Callbacks batch_begin.\n    324         batch_logs = {'batch': batch_index, 'size': len(batch_ids)}\n--&gt; 325         callbacks._call_batch_hook(mode, 'begin', batch_index, batch_logs)\n    326         progbar.on_batch_begin(batch_index, batch_logs)\n    327 \n\n/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages/tensorflow/python/keras/callbacks.py in _call_batch_hook(self, mode, hook, batch, logs)\n    194     t_before_callbacks = time.time()\n    195     for callback in self.callbacks:\n--&gt; 196       batch_hook = getattr(callback, hook_name)\n    197       batch_hook(batch, logs)\n    198     self._delta_ts[hook_name].append(time.time() - t_before_callbacks)\n\nAttributeError: 'TQDMNotebookCallback' object has no attribute 'on_train_batch_begin'\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "wxpython"], "comments": [{"owner": {"reputation": 16948, "user_id": 4637585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/2ff170e0cfa0be15efaabd3acef4df34?s=128&d=identicon&r=PG&f=1", "display_name": "Rolf of Saxony", "link": "https://stackoverflow.com/users/4637585/rolf-of-saxony"}, "edited": false, "score": 1, "creation_date": 1556788981, "post_id": 55943034, "comment_id": 98551143, "body": "Have you tried <code>del text_stuff</code>?"}, {"owner": {"reputation": 93, "user_id": 8583049, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--d7UbMF4tjI/AAAAAAAAAAI/AAAAAAAAAEM/gHKHdksUipY/photo.jpg?sz=128", "display_name": "Mark Edmondson", "link": "https://stackoverflow.com/users/8583049/mark-edmondson"}, "reply_to_user": {"reputation": 16948, "user_id": 4637585, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/2ff170e0cfa0be15efaabd3acef4df34?s=128&d=identicon&r=PG&f=1", "display_name": "Rolf of Saxony", "link": "https://stackoverflow.com/users/4637585/rolf-of-saxony"}, "edited": false, "score": 0, "creation_date": 1556914137, "post_id": 55943034, "comment_id": 98603559, "body": "Yeah, behave persists, unfortunately"}], "owner": {"reputation": 93, "user_id": 8583049, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--d7UbMF4tjI/AAAAAAAAAAI/AAAAAAAAAEM/gHKHdksUipY/photo.jpg?sz=128", "display_name": "Mark Edmondson", "link": "https://stackoverflow.com/users/8583049/mark-edmondson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556754112, "creation_date": 1556746767, "last_edit_date": 1556754112, "question_id": 55943034, "link": "https://stackoverflow.com/questions/55943034/gooey-python-how-to-clear-text-field-after-return-to-config", "title": "Gooey (Python): How to clear text field after return_to_config", "body": "<p>I'm using Gooey to generate a UI for a simple CLI program that processes some text. The app works just fine, but I'd like to improve the user experience for repeated runs. The way the app is set up, a user enters a string into a single text field, and runs the app. After the app completes, it returns to the config screen.</p>\n\n<p>Current behavior, the app returns to the config screen, but the user-entered text is still present.</p>\n\n<p>Desired behavior, the app returns to the config screen, and the text field is blank.</p>\n\n<p>1) does this feature already exist?\n1a) if yes, where can I find it?\n1b) if no, can anyone (maybe the library author?) point me in the direction of where the \"return to config\" action happens, so I can try and homebrew something myself?</p>\n\n<p>Example:</p>\n\n<pre><code>from gooey import Gooey, Gooeyparser\n\ndef do_stuff(data_in):\n    #do stuff\n    data_out = data_in\n    print data_out\n\n@Gooey(return_to_config=True)\ndef main():\n    parser = GooeyParser()\n    parser.add_argument(\"TextStuff\", help=\"This field doesn't clear after run\")\n    args = parser.parse_args()\n    text_stuff = args.TextStuff\n    do_stuff(text_stuff)\n\nif __name__ == \"__main__\":\n    main()\n</code></pre>\n"}, {"tags": ["python", "rabbitmq", "locust"], "comments": [{"owner": {"reputation": 1582, "user_id": 6506040, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/hX3vM.jpg?s=128&g=1", "display_name": "bumblebee", "link": "https://stackoverflow.com/users/6506040/bumblebee"}, "edited": false, "score": 0, "creation_date": 1556775649, "post_id": 55943025, "comment_id": 98545120, "body": "Check this out <a href=\"https://stackoverflow.com/questions/25392451/locust-how-to-make-locust-run-for-a-specific-amount-of-time\" title=\"locust how to make locust run for a specific amount of time\">stackoverflow.com/questions/25392451/&hellip;</a>"}, {"owner": {"reputation": 479, "user_id": 1380901, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7b972ff5d62434623ade7ad88b02aa99?s=128&d=identicon&r=PG", "display_name": "Tom Purl", "link": "https://stackoverflow.com/users/1380901/tom-purl"}, "reply_to_user": {"reputation": 1582, "user_id": 6506040, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/hX3vM.jpg?s=128&g=1", "display_name": "bumblebee", "link": "https://stackoverflow.com/users/6506040/bumblebee"}, "edited": false, "score": 0, "creation_date": 1556804349, "post_id": 55943025, "comment_id": 98559382, "body": "Thank you for the quick response bumblebee but I don&#39;t want to stop the entire test. I want my taskset to wait for 30 seconds before executing. I want all users to run the task set at the same time and then wait 30 seconds before running again."}, {"owner": {"reputation": 1582, "user_id": 6506040, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/hX3vM.jpg?s=128&g=1", "display_name": "bumblebee", "link": "https://stackoverflow.com/users/6506040/bumblebee"}, "edited": false, "score": 0, "creation_date": 1556804770, "post_id": 55943025, "comment_id": 98559638, "body": "Have a look at this <a href=\"https://github.com/locustio/locust/issues/59#issuecomment-41624517\" rel=\"nofollow noreferrer\">github.com/locustio/locust/issues/59#issuecomment-41624517</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 14440153, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgtIUDNf918J6aOVeBXf5MlL32-yXoZE46M9v6_Iw=k-s128", "display_name": "Loopero", "link": "https://stackoverflow.com/users/14440153/loopero"}, "is_accepted": false, "score": 0, "last_activity_date": 1603872010, "creation_date": 1603872010, "answer_id": 64568653, "question_id": 55943025, "link": "https://stackoverflow.com/questions/55943025/make-locust-wait-between-task-runs/64568653#64568653", "title": "Make Locust Wait Between Task Runs", "body": "<p>use this code</p>\n<pre><code>from rabbitmq import get_client\nimport time\n\nfrom locust import Locust, TaskSet, task, events,between\n\nclass RabbitTaskSet(TaskSet):\n    @task\n    def publish(self):\n        get_client().publish()\n\nclass MyLocust(Locust):\n    task_set = RabbitTaskSet\n    wait_time = between(5000, 10000)\n\n\ndef on_locust_stop_hatching():\n    get_client().disconnect()\n</code></pre>\n"}], "owner": {"reputation": 479, "user_id": 1380901, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7b972ff5d62434623ade7ad88b02aa99?s=128&d=identicon&r=PG", "display_name": "Tom Purl", "link": "https://stackoverflow.com/users/1380901/tom-purl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1183, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1603872010, "creation_date": 1556746747, "question_id": 55943025, "link": "https://stackoverflow.com/questions/55943025/make-locust-wait-between-task-runs", "title": "Make Locust Wait Between Task Runs", "body": "<p>I am using Locust to push messages into a RabbitMQ queue. I'm able to do this easily using the RabbitMQ sample from the <a href=\"https://github.com/jamescarr/locust.io-demo\" rel=\"nofollow noreferrer\">locust.io-demo</a> repository, but now I need to force the single task to wait 1 minute between each invocation.</p>\n\n<p>In my test, I need to push 100 messages into a queue every minute since this system will receive messages in \"bursts\" in one-minute increments. I've tried implementing this but have been unsuccessful. Here's the first thing I tried:</p>\n\n<pre><code>from rabbitmq import get_client\nimport time\n\nfrom locust import Locust, TaskSet, task, events\n\nclass RabbitTaskSet(TaskSet):\n    @task\n    def publish(self):\n        get_client().publish()\n\nclass MyLocust(Locust):\n    task_set = RabbitTaskSet\n    min_wait = 30000\n    max_wait = 30000\n\ndef on_locust_stop_hatching():\n    get_client().disconnect()\n\nevents.locust_stop_hatching += on_locust_stop_hatching\n</code></pre>\n\n<p>I assumed that the <code>publish</code> method would be executed once every 30 seconds since that's what the value for the min and max wait times. I then started Locust with 1 user and a hatch rate of 1.</p>\n\n<p>What I saw was that a new request was being generated every 10 seconds in the Locust UI.</p>\n\n<p>I then tried this instead:</p>\n\n<pre><code>class RabbitTaskSet(TaskSet):\n    @task\n    def publish(self):\n        get_client().publish()\n        time.sleep(30)\n\nclass MyLocust(Locust):\n    task_set = RabbitTaskSet\n    # min_wait = 30000\n    # max_wait = 30000\n</code></pre>\n\n<p>I then started Locust again with 1 user and a hatch rate of 1. Oddly enough I saw the same results - 1 new request every 10 seconds. Heck I even tried using <code>gevent.time</code> instead of <code>time.time</code> but I still got the same results.</p>\n\n<p>How can I make my publish task wait for 30 seconds between each execution? Is there a property that I'm missing?</p>\n"}, {"tags": ["python", "minecraft", "popen"], "answers": [{"tags": [], "owner": {"reputation": 660, "user_id": 5649962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8be5ef6c04e053aaee8cfed175fba7a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5649962/max"}, "is_accepted": true, "score": 0, "last_activity_date": 1556747781, "last_edit_date": 1556747781, "creation_date": 1556747036, "answer_id": 55943071, "question_id": 55942967, "link": "https://stackoverflow.com/questions/55942967/how-to-run-minecraft-server-from-python/55943071#55943071", "title": "How to run minecraft server from python?", "body": "<p>It's got to do with how you're passing your arguments.</p>\n\n<pre><code>subprocess.Popen(['java', '-jar', 'server.jar'], stdin=subprocess.PIPE, stdout=subprocess.PIPE, shell=True, cwd='D:\\MC SERVER 2k19')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "is_accepted": false, "score": 0, "last_activity_date": 1556748034, "last_edit_date": 1556748034, "creation_date": 1556747309, "answer_id": 55943117, "question_id": 55942967, "link": "https://stackoverflow.com/questions/55942967/how-to-run-minecraft-server-from-python/55943117#55943117", "title": "How to run minecraft server from python?", "body": "<p>If you need to start a Java program using CMD process from Python <strong>and</strong> show the window, you can use subprocess to call open another CMD terminal and run the command.</p>\n\n<p>In Windows you will need to CMD-escape spaces in the path you passing to the secondary CMD process. This is done with the carrot <code>^</code></p>\n\n<pre><code>proc = subprocess.Popen(\n    ['start', 'cmd', '/k', \"D:\\\\MC^ SERVER^ 2k19\\\\server.jar\", \n     '-jar', 'server.jar', 'java'], \n    stdout=subprocess.PIPE, \n    stderr=subprocess.PIPE, \n    shell=True\n)\n</code></pre>\n\n<p>Keep in mind you will <strong>NOT</strong> be able to retrieve any output from the secondary CMD process from Python.</p>\n\n<p>I.e. the process will return nothing.</p>\n\n<pre><code>proc.communicate()\n# returns:\n(b'', b'')\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 6022366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb7ca43029bcaad55f0878448e8c449?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kubiv", "link": "https://stackoverflow.com/users/6022366/roman-kubiv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 964, "favorite_count": 0, "accepted_answer_id": 55943071, "answer_count": 2, "score": 0, "last_activity_date": 1556748034, "creation_date": 1556746307, "last_edit_date": 1556746539, "question_id": 55942967, "link": "https://stackoverflow.com/questions/55942967/how-to-run-minecraft-server-from-python", "title": "How to run minecraft server from python?", "body": "<p>I cant figure out how to start the server using a python command.</p>\n\n<pre><code>s = subprocess.Popen('\"D:\\MC SERVER 2k19\\server.jar\" -jar server.jar java', stdin=subprocess.PIPE, stdout=subprocess.PIPE, shell=True)\n</code></pre>\n\n<p>This code runs without error but doesn't start the server in cmd.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "python-3.x", "python-2.7"], "comments": [{"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 1, "creation_date": 1556746742, "post_id": 55942945, "comment_id": 98539286, "body": "Do <code>def __init__(self, root, &lt;instance from TestClass&gt;): ...command = &lt;instance from TestClass&gt;.testButtonPressed</code>"}, {"owner": {"reputation": 582, "user_id": 5158634, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/9c19acf98d66681e3c3f32b2ee406942?s=128&d=identicon&r=PG&f=1", "display_name": "aejhyun", "link": "https://stackoverflow.com/users/5158634/aejhyun"}, "reply_to_user": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1556751898, "post_id": 55942945, "comment_id": 98540568, "body": "Yup. That did it. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 78, "user_id": 9713709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09b22cc9a992454f85923052c1b6819f?s=128&d=identicon&r=PG&f=1", "display_name": "juncaks", "link": "https://stackoverflow.com/users/9713709/juncaks"}, "is_accepted": false, "score": 1, "last_activity_date": 1556747084, "last_edit_date": 1556747084, "creation_date": 1556746524, "answer_id": 55942999, "question_id": 55942945, "link": "https://stackoverflow.com/questions/55942945/how-to-handle-a-widget-command-function-call-from-another-class-in-python/55942999#55942999", "title": "How to handle a widget command/function call from another class in Python?", "body": "<p>Note: I edited my response because i dind't understand your question properly.</p>\n\n<p>In python you can pass function as parameter : </p>\n\n<pre><code>class TestButton:\n    def __init__(self, root, command):\n        self.testButton = Button(root, text =\"Test Button\", command = command).grid(row = 11, column = 0)\n        #testButtonPressed is called in the TestButton class.\n\n\nclass TestClass:\n\n    #The testButtonPressed function is handled in the TestClass. \n    def testButtonPressed(self):\n        print \"Button is pressed!\"\n\nTestButton(root, TestClass().testButtonPressed)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 10043520, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Xzw1USpWQcU/AAAAAAAAAAI/AAAAAAAACKY/mrGpOvYJyf0/photo.jpg?sz=128", "display_name": "Everton Colombo", "link": "https://stackoverflow.com/users/10043520/everton-colombo"}, "is_accepted": false, "score": 0, "last_activity_date": 1556748633, "last_edit_date": 1556748633, "creation_date": 1556747685, "answer_id": 55943163, "question_id": 55942945, "link": "https://stackoverflow.com/questions/55942945/how-to-handle-a-widget-command-function-call-from-another-class-in-python/55943163#55943163", "title": "How to handle a widget command/function call from another class in Python?", "body": "<h2>Static Functions:</h2>\n\n<p>If the class is already defined and the function you want to pass is static, you should be able to do something like this:</p>\n\n<pre><code>class TestClass:\n    def testButtonPressed(self):\n        print \"Button is pressed!\"    \n\nclass TestButton:\n    def __init__(self, root):\n        self.testButton = Button(root, text=\"Test Button\", command=TestClass.testButtonPressed).grid(row=11, column=0)\n</code></pre>\n\n<blockquote>\n  <p><strong>Remember:</strong> when passing a function as an argument, you need to remove the parenthesis '()'. If you do not, you'd be passing what the function returns, and not the function itself.</p>\n</blockquote>\n\n<p>.</p>\n\n<h2>Non-Static Functions:</h2>\n\n<p>If the function you want to pass is not static (needs to be called within an instance of the class), you'd have to have a reference to that instance:</p>\n\n<pre><code>class TestClass:\n    def __init__(self):\n        self.message = \"Button is pressed!\"\n\n    def testButtonPressed(self):\n        print self.message    \n\nclass TestButton:\n    def __init__(self, root):\n        instance = TestClass()\n\n        self.testButton = Button(root, text=\"Test Button\", command=instance.testButtonPressed).grid(row=11, column=0)\n</code></pre>\n\n<p>or, if the instance is not within the scope of the class:</p>\n\n<pre><code>instance = TestClass()\n\nclass TestButton:\n    def __init__(self, root, reference):\n        self.testButton = Button(root, text=\"Test Button\", command=reference.testButtonPressed).grid(row=11, column=0)\n\ntest = TestButton(root, instance)\n</code></pre>\n\n<blockquote>\n  <p><strong>Note:</strong> Non-Static methods can be usually identified by having a 'self' parameter: E.g: <code>def function(self)</code></p>\n</blockquote>\n"}], "owner": {"reputation": 582, "user_id": 5158634, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/9c19acf98d66681e3c3f32b2ee406942?s=128&d=identicon&r=PG&f=1", "display_name": "aejhyun", "link": "https://stackoverflow.com/users/5158634/aejhyun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1556748633, "creation_date": 1556746169, "question_id": 55942945, "link": "https://stackoverflow.com/questions/55942945/how-to-handle-a-widget-command-function-call-from-another-class-in-python", "title": "How to handle a widget command/function call from another class in Python?", "body": "<p>When the button is pressed, I want to handle that function call not in the class that the button is in but rather in another class. So here's the following code on what I'm trying to achieve:</p>\n\n<pre><code>class TestButton:\n    def __init__(self, root):\n        self.testButton = Button(root, text =\"Test Button\", command = testButtonPressed).grid(row = 11, column = 0)\n        #testButtonPressed is called in the TestButton class.\n\nclass TestClass:\n\n    #The testButtonPressed function is handled in the TestClass. \n    def testButtonPressed():\n        print \"Button is pressed!\"\n</code></pre>\n\n<p>Please let me know how this is achieved and thank you so much!</p>\n"}, {"tags": ["python", "python-3.x"], "owner": {"reputation": 11, "user_id": 11437875, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UInexZLoCBI/AAAAAAAAAAI/AAAAAAAAABs/rEjZOO33PwQ/photo.jpg?sz=128", "display_name": "Darrin Joyner", "link": "https://stackoverflow.com/users/11437875/darrin-joyner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556746054, "creation_date": 1556746054, "question_id": 55942918, "link": "https://stackoverflow.com/questions/55942918/how-to-make-a-proper-reaction-time-simulation-with-leds-button-commands-and-t", "title": "How to make a proper Reaction Time Simulation with LED&#39;s, Button commands, and the Timing", "body": "<p>So for my reaction time assignment, I ran to multiple issues such as when the timer ended, the red light won't light up nor print out the message saying the user has failed and when I press enter after the timer goes out, I can still press the button and it would light up the green LED and print out the message. The whole point of the assignment is to set up the random timer from 5-10 seconds to press the yellow led before it runs out and give out the total amount of time that the user had gotten when they pressed the button till it runs out and I wonder how to properly do it.</p>\n\n<pre><code>import physense_emu\nimport time\nimport random\n\nsensor = physense_emu.Sensor()\n\n#Greeting user to press \"enter\" to start the reaction time simulator\nstrtTime = \"Start\"\n#Setting up simulator to start when pressing \"enter\"\nbutbucket = input(\"Press Enter\")\nstrtTime = time.time()\nrandVal = random.randint(5, 11)\nsensor.output(\"yled\", \"on\")\ntime.sleep(5)\nsensor.output(\"yled\", \"off\")\n\nstpTime = time.time()\nbtnStp = \"Button_3\"\n\n#Setting up reaction time system to light up \"green\" if user is fast enough to push a button, but if not, then it'll light up \"red\"\nwhile True:\n if (sensor.input(btnStp) == \"pressed\"):\n     totalTime = stpTime - strtTime\n     if totalTime &lt; 10:\n         sensor.output(\"gled\", \"on\")\n         time.sleep(3)\n         sensor.output(\"gled\",\"off\")\n         print(\"Congrats, you passed!\")\n     else:\n         sensor.output(\"rled\", \"on\")\n         time.sleep(3)\n         sensor.output(\"rled\", \"off\")\n         print(\"I'm sorry, but you failed to react quick enough!\")\n         break\n\n</code></pre>\n"}, {"tags": ["python", "string", "function"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 6388843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c57abc6c5b2946a568112617f80b31?s=128&d=identicon&r=PG&f=1", "display_name": "cpayal", "link": "https://stackoverflow.com/users/6388843/cpayal"}, "edited": false, "score": 0, "creation_date": 1556795296, "post_id": 55944669, "comment_id": 98554288, "body": "Thanks, @ChrisCharley. This worked wonders! Could you please elaborate: <code>elif line.startswith(&#39;TAILSTRING&#39;):         _, params = line.split(maxsplit = 1)</code> . I found from the docs that it splits at the first instance as <code>maxsplit = 1</code> is mentioned. How do I access the 2nd and the 3rd elements of the line <code>TAILSTRING X1 Y</code> as I want the modified string to be <code>BODY X1 Y1</code>. I am doing this as I also want to make sure later, that <code>BODY X1 Y1</code> is not already present in the same block of <code>MARKERSTRING</code> that I am looking at."}, {"owner": {"reputation": 35, "user_id": 6388843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c57abc6c5b2946a568112617f80b31?s=128&d=identicon&r=PG&f=1", "display_name": "cpayal", "link": "https://stackoverflow.com/users/6388843/cpayal"}, "edited": false, "score": 0, "creation_date": 1556795824, "post_id": 55944669, "comment_id": 98554551, "body": "I tried this: <code>params = line.split() </code> <code>buffer.insert(max_body_idx+1, &#39;BOND &#39; + params[2] + &#39; &#39; + params[3])  </code> . I am doing this as I also want to make sure later, that <code>BODY X1 Y1</code> is not already present in the same block of <code>MARKERSTRING</code> that I am looking at. Any suggestions for the same? Thanks"}, {"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "reply_to_user": {"reputation": 35, "user_id": 6388843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c57abc6c5b2946a568112617f80b31?s=128&d=identicon&r=PG&f=1", "display_name": "cpayal", "link": "https://stackoverflow.com/users/6388843/cpayal"}, "edited": false, "score": 0, "creation_date": 1556821250, "post_id": 55944669, "comment_id": 98567934, "body": "@chatterbox I tried to explain what some of your questions addressed. <code>BODY X1 Y1 is not already present in the same block of MARKERSTRING that I am looking at</code> Both items or any of the 2 items?"}, {"owner": {"reputation": 35, "user_id": 6388843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c57abc6c5b2946a568112617f80b31?s=128&d=identicon&r=PG&f=1", "display_name": "cpayal", "link": "https://stackoverflow.com/users/6388843/cpayal"}, "edited": false, "score": 0, "creation_date": 1556823693, "post_id": 55944669, "comment_id": 98569030, "body": "any of the two items. Thanks for the update and follow-up!"}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 0, "last_activity_date": 1556820550, "last_edit_date": 1556820550, "creation_date": 1556761336, "answer_id": 55944669, "question_id": 55942903, "link": "https://stackoverflow.com/questions/55942903/insert-new-string-after-a-pattern-with-line-index-and-write-to-a-new-file/55944669#55944669", "title": "Insert new string after a pattern with line index and write to a new file", "body": "<p>I can't say why you were not getting the results you wanted. Often, changing or amending one or two lines can fix the problem.</p>\n\n<p>However, I came up with a solution I think that works.</p>\n\n<p>EDIT: To answer your questions in the comment section (below),</p>\n\n<p><code>_, params = line.split(maxsplit = 1)</code></p>\n\n<p>This splits into 2 items for maxsplit value 1. The '_' is a place holder to get (and ignore) the first split item, <code>TAILSTRING</code>. The second item from the split, (<code>X1 Y</code> or <code>X2 Y</code>) is assigned to <code>params</code>.</p>\n\n<p><em>I also want to make sure later, that BODY X1 Y1 is not already present in the same block of MARKERSTRING that I am looking at</em></p>\n\n<p>To accomplish this, the code would need to be modified.</p>\n\n<pre><code>fin = open('f01.txt', 'r')\nfout = open('temp.txt', 'w')\n\nbuffer = []\nidx = 0\n\nfor line in fin:\n    line = line.rstrip()\n    buffer.append(line)\n    if line.startswith('MARKERSTRING'):\n        for item in buffer:\n            fout.write(item + \"\\n\")\n        buffer = []\n        idx = 0\n        # continue because don't want to increment idx at bottom of loop\n        # idx should be 0 for this iteration\n        continue\n    elif line.startswith('BODY'):\n        max_body_idx = idx\n    elif line.startswith('TAILSTRING'):\n        _, params = line.split(maxsplit = 1)\n        buffer.insert(max_body_idx+1, 'BODY ' + params)\n        max_body_idx += 1\n    idx += 1\n\nfin.close()\n\n# print out last record\nfor item in buffer:\n    fout.write(item + \"\\n\")\n\nfout.close()\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6388843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81c57abc6c5b2946a568112617f80b31?s=128&d=identicon&r=PG&f=1", "display_name": "cpayal", "link": "https://stackoverflow.com/users/6388843/cpayal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 1, "accepted_answer_id": 55944669, "answer_count": 1, "score": 0, "last_activity_date": 1556820550, "creation_date": 1556745986, "last_edit_date": 1556746615, "question_id": 55942903, "link": "https://stackoverflow.com/questions/55942903/insert-new-string-after-a-pattern-with-line-index-and-write-to-a-new-file", "title": "Insert new string after a pattern with line index and write to a new file", "body": "<p>I am a newbie to python, and I have gone through multiple python posts and tutorial websites and source documents to tackle my problem, however, I am not quite there yet!</p>\n\n<p>What I am trying to do: I have a text file with multiple lines, where I am first looking for blocks of texts marked from one occurrence of \"MARKERSTRING\" to another. \"MARKERSTRING\" occurs multiple times throughout the text, but only a few of them have \"TAILSTRING\" inside the block. If found, then I want to add a new line (\"newstring\") right beneath the last occurrence of the string \"BODY\" within the same block. </p>\n\n<p>I want to retain all lines into a new file and insert the new string at the given index of \"BODY\" (last occurrence within the block)</p>\n\n<p>The contents of my text file look like:</p>\n\n<pre><code>Multiple lines with some other text\n\nMARKERSTRING SOMESTRING SOME OTHER STRING #\n\nBODY A B C\nBODY V G H\nBODY Y U I\n\nTAILSTRING X1 Y\nTAILSTRING X2 Y\n\n\nMARKERSTRING SOMESTRING SOME OTHER STRING # \n\n### #Although I want to append this to my file I dont want to process my #function through this as it does not have \"TAILSTRING\"\n\nBODY B C\nBODY V G H J\nBODY Y U I\n\n### #But want this block:\n\nMARKERSTRING SOMESTRING SOME OTHER STRING #\n\nBODY B C\nBODY V G H J\n\n\nTAILSTRING X1 Y\nTAILSTRING X2 Y\n\n\nMultiple lines with some other text\n</code></pre>\n\n<p>END</p>\n\n<p>My problems are as follows:</p>\n\n<ol>\n<li><p>My function that gets the index and inserts the new string returns only the first occurrence. This could be a problem with the positioning of the return statement, but if indent it more it complains of \"UnboundLocalError\". If I use \"yield\" function then it returns an object. I want to write the new string within this function</p></li>\n<li><p>The second part which looks for \"MARKERSTRING\", appends all the lines to a buffer, and then calls my function, keeps appending the lines multiple times, without inserting the new string. This probably happens because I start to look for the required patterns inside the for loop, which fetches every line in the file.</p></li>\n</ol>\n\n<p>Is their a better way to do this without appending each line inside the for loop?</p>\n\n<p>Something like this:</p>\n\n<pre><code>import re\nfrom operator import itemgetter\nimport itertools\n\n\n### The Function #########\ndef myfunc(filename):\n    highest = None\n    for cnt, line in enumerate(filename):\n\n        if line.startswith(\"BODY \"):\n            bline = line.split()\n\n            highest = cnt\n\n        if line.startswith(\"TAIL\"):\n            lpline = line.split()\n            print(lpline)\n            newline = \"BOND\", lpline[2], lpline[4]\n\n            newstring = ' '.join((str(x)) for x in newline)\n\n            bline.insert(highest + 1, newstring) ##This doesnt insert\n            return bline\n\n### The \"Markerstring\" finder snippet: Keeps iterating over all lines #####\n\nfilename = open(\"input.txt\").readlines()\noutfilename = open(\"result.txt\", 'w+')\nbuffer = []\nkeepCurrentSet = True\nfor line in filename:\n    buffer.append(line)\n    if (line.startswith('MARKERSTRING '):\n        if keepCurrentSet:\n            outfilename.write(\"\".join(buffer))\n\n            myfunc(filename)\n</code></pre>\n\n<p>Expected result:</p>\n\n<pre><code>Multiple lines with some other text\n\n\nMARKERSTRING SOMESTRING SOME OTHER STRING #\n\nBODY A B C\nBODY V G H\nBODY Y U I\nBODY X1 Y     #Inserted line = newstring\nBODY X2 Y     #Inserted line = newstring\n\n\nTAILSTRING X1 Y\nTAILSTRING X2 Y\n\n\nMARKERSTRING SOMESTRING SOME OTHER STRING # \n\n### #Although I want to append this to my file I dont want to process my #function through this as it does not have \"TAILSTRING\"\n\nBODY B C\nBODY V G H J\nBODY Y U I\n\n\n### #But want this block:\n\nMARKERSTRING SOMESTRING SOME OTHER STRING #\n\n\nBODY B C\nBODY V G H J\nBODY X1 Y        #Inserted line = newstring\nBODY X2 Y        #Inserted line = newstring\n\nTAILSTRING X1 Y\nTAILSTRING X2 Y\n\nMultiple lines with some other text\n\nEND\n</code></pre>\n"}, {"tags": ["python", "linear-regression", "random-forest"], "answers": [{"comments": [{"owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "edited": false, "score": 1, "creation_date": 1556746835, "post_id": 55943009, "comment_id": 98539306, "body": "<code>R^2</code> is not accuracy."}, {"owner": {"reputation": 110, "user_id": 10209763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Utc0O.jpg?s=128&g=1", "display_name": "Mitchell Leefers", "link": "https://stackoverflow.com/users/10209763/mitchell-leefers"}, "reply_to_user": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "edited": false, "score": 0, "creation_date": 1556747107, "post_id": 55943009, "comment_id": 98539367, "body": "@modesitt In regression problems you do not use &quot;accuracy&quot; . Usually accuracy is reserved for classification problems. For regression models you usually use other metrics like Mean Squared Error (MSE) or R^2 to show how close a model fits a regression line or how closely predicted values match known values."}, {"owner": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "edited": false, "score": 0, "creation_date": 1556747249, "post_id": 55943009, "comment_id": 98539398, "body": "I&#39;m aware. It was more a hint to OP that they need to consider exactly what kind of metric they want. Also <code>R^2</code> is not <code>MSE</code> - it is normalized  <code>[-1,1]</code>."}, {"owner": {"reputation": 110, "user_id": 10209763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Utc0O.jpg?s=128&g=1", "display_name": "Mitchell Leefers", "link": "https://stackoverflow.com/users/10209763/mitchell-leefers"}, "reply_to_user": {"reputation": 6356, "user_id": 5030164, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/11b6c08b9d6554e51280244985e3022d?s=128&d=identicon&r=PG&f=1", "display_name": "modesitt", "link": "https://stackoverflow.com/users/5030164/modesitt"}, "edited": false, "score": 1, "creation_date": 1556747341, "post_id": 55943009, "comment_id": 98539435, "body": "I meant to put MSE or R^2. They indeed are not one in the same."}, {"owner": {"reputation": 1029, "user_id": 8430537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c285b4e893656976425d7497a4a8c30?s=128&d=identicon&r=PG&f=1", "display_name": "JonTargaryen", "link": "https://stackoverflow.com/users/8430537/jontargaryen"}, "edited": false, "score": 0, "creation_date": 1556821202, "post_id": 55943009, "comment_id": 98567916, "body": "@MitchellLeefers how can I implement that in my code?"}, {"owner": {"reputation": 110, "user_id": 10209763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Utc0O.jpg?s=128&g=1", "display_name": "Mitchell Leefers", "link": "https://stackoverflow.com/users/10209763/mitchell-leefers"}, "reply_to_user": {"reputation": 1029, "user_id": 8430537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c285b4e893656976425d7497a4a8c30?s=128&d=identicon&r=PG&f=1", "display_name": "JonTargaryen", "link": "https://stackoverflow.com/users/8430537/jontargaryen"}, "edited": false, "score": 1, "creation_date": 1556826609, "post_id": 55943009, "comment_id": 98570326, "body": "@JonTargaryen You should be able to just call the method with you model. So it would be lr.score(X_test). Of course if you want it to print the score you need to wrap that in a print statement like print(lr.score(X_test))"}, {"owner": {"reputation": 1029, "user_id": 8430537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c285b4e893656976425d7497a4a8c30?s=128&d=identicon&r=PG&f=1", "display_name": "JonTargaryen", "link": "https://stackoverflow.com/users/8430537/jontargaryen"}, "edited": false, "score": 0, "creation_date": 1557100354, "post_id": 55943009, "comment_id": 98641713, "body": "@MitchellLeefers it returns this <code>TypeError: score() missing 1 required positional argument: &#39;y&#39;</code> remember I want to check the acuracy of dataP against dataT"}, {"owner": {"reputation": 110, "user_id": 10209763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Utc0O.jpg?s=128&g=1", "display_name": "Mitchell Leefers", "link": "https://stackoverflow.com/users/10209763/mitchell-leefers"}, "reply_to_user": {"reputation": 1029, "user_id": 8430537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c285b4e893656976425d7497a4a8c30?s=128&d=identicon&r=PG&f=1", "display_name": "JonTargaryen", "link": "https://stackoverflow.com/users/8430537/jontargaryen"}, "edited": false, "score": 0, "creation_date": 1557349742, "post_id": 55943009, "comment_id": 98739602, "body": "@JonTargaryen Sorry for the slow response but, it almost sounds like you are trying to compare the accuracy of two different models? If that is the case then you would use dataP_score = score(X_p,y_p) and dataT_score = score(X_t, y_t)"}], "tags": [], "owner": {"reputation": 110, "user_id": 10209763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Utc0O.jpg?s=128&g=1", "display_name": "Mitchell Leefers", "link": "https://stackoverflow.com/users/10209763/mitchell-leefers"}, "is_accepted": false, "score": 0, "last_activity_date": 1556750228, "last_edit_date": 1556750228, "creation_date": 1556746599, "answer_id": 55943009, "question_id": 55942884, "link": "https://stackoverflow.com/questions/55942884/how-to-get-accuracy-in-randomforest-model-in-python/55943009#55943009", "title": "How to get accuracy in RandomForest Model in Python?", "body": "<p>I think this is handled with the score() method</p>\n\n<pre><code>lr.score(x_test, y_test)\n</code></pre>\n\n<p>This will return the R^2 value for your model. It looks like in your case you only have an x_test though.\nNote that this is not the accuracy. Regression models do not use accuracy like classification models. Instead different metrics are computed such as, mean square error or coefficient of determination. These metrics can show how accurately predicted values match known values or how closely a regression model fits a regression line.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13319302, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GgoFMVTG4PoVaXBovw-wbDfLY3xsQBH19Xv9c_3dw=k-s128", "display_name": "Pankaj Verma", "link": "https://stackoverflow.com/users/13319302/pankaj-verma"}, "is_accepted": false, "score": 0, "last_activity_date": 1595151662, "creation_date": 1595151662, "answer_id": 62978598, "question_id": 55942884, "link": "https://stackoverflow.com/questions/55942884/how-to-get-accuracy-in-randomforest-model-in-python/62978598#62978598", "title": "How to get accuracy in RandomForest Model in Python?", "body": "<pre><code>mse = sklearn.metrics.mean_squared_error(actual, predicted)\nrmse = math.sqrt(mse)\nprint('Accuracy for Random Forest',100*max(0,rmse)) \n</code></pre>\n"}], "owner": {"reputation": 1029, "user_id": 8430537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c285b4e893656976425d7497a4a8c30?s=128&d=identicon&r=PG&f=1", "display_name": "JonTargaryen", "link": "https://stackoverflow.com/users/8430537/jontargaryen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 6487, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1595151662, "creation_date": 1556745865, "last_edit_date": 1557100211, "question_id": 55942884, "link": "https://stackoverflow.com/questions/55942884/how-to-get-accuracy-in-randomforest-model-in-python", "title": "How to get accuracy in RandomForest Model in Python?", "body": "<p>I got this script, that predict with RandomForest and LinearRegression the values for the seconds dataset.That works ok, the accuracy for the linear regression is 18% , too bad.</p>\n\n<p>So Im trying with RandomForest, but I dont know how to calculate the accuracy of that model..</p>\n\n<pre><code>import pandas as pd\n\nfrom sklearn.ensemble import RandomForestRegressor\nfrom sklearn.datasets import make_regression\n\nimport numpy as np\nimport pandas as pd\nimport scipy\nimport matplotlib.pyplot as plt\nfrom pylab import rcParams\nimport urllib\nimport sklearn\nfrom sklearn.linear_model import RidgeCV, LinearRegression, Lasso\n\nfrom sklearn.preprocessing import StandardScaler, PolynomialFeatures\nfrom sklearn.model_selection import GridSearchCV\n\ndata = pd.read_csv('EncuestaVieja.csv')\nX = data[['Edad','Sexo','v1','v2','v3']]\ny = data['Alumna']\n\ndataP = pd.read_csv('EncuestaVieja_test.csv')\nX_p = dataP[['Edad','Sexo','v1','v2','v3']]\ny_p = dataP['Alumna']\n\ndataT = pd.read_csv('EncuestaVieja_test_2.csv')\nX_t = dataT[['Edad','Sexo','v1','v2','v3']]\ny_t = dataT['Alumna']\nregr = linear_model.LinearRegression()\n\nregr.fit(X, y)\n\nlr = RandomForestRegressor(n_estimators=50)\nlr.fit(X, y)\n\nX_test = pd.read_csv('EncuestaNueva.csv')[['Edad','Sexo','v1','v2','v3']]\n\npredictions = regr.predict(X_test)\n\n\npredictions2 = lr.predict(X_test)\nprint( 'RandomForest Accuracy: ')\nprint(((predictions2)))\nprint( '')\nfrom sklearn.linear_model import LinearRegression\nregressor = LinearRegression()\nregressor.fit(X_p,y_p)\naccuracy = regressor.score(X_t,y_t)\nprint( 'Linear Regression Accuracy: ', accuracy*100,'%')\nprint(((predictions)))\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>RandomForest Accuracy: \n[ 1.64  2.54  2.6   2.38  1.64  1.32  1.68  2.56  3.    2.28  2.38  2.68\n  2.9   2.5   2.78  1.96  1.56  2.6   2.12  2.76  2.74  1.66  1.68  2.12\n  2.3   2.36  2.28  2.28  2.82  1.7   1.86  2.36  1.24]\n\nLinear Regression Accuracy:  18.1336149086 %\n[ 1.2681851   1.02802219  3.13377072  2.96885127  2.30808853  1.98814349\n  2.39233726  2.8638321   1.86640316  2.63073399  2.21166731  2.25201016\n  1.95065189  2.65360517  3.08855254  1.01229733  2.18225606  2.41802534\n  2.43539473  2.50227407  1.71105799  1.88238089  2.12152321  3.33525397\n  2.72820453  2.43241713  2.88757874  2.6242382   2.63087916  1.98379487\n  2.25430306  1.96810279  0.8554685 ]\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1, "user_id": 11438982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9233d9307757f122dbed224685443e58?s=128&d=identicon&r=PG&f=1", "display_name": "notaprogrammer", "link": "https://stackoverflow.com/users/11438982/notaprogrammer"}, "reply_to_user": {"reputation": 1924, "user_id": 5516874, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ioXgB.jpg?s=128&g=1", "display_name": "Jessica", "link": "https://stackoverflow.com/users/5516874/jessica"}, "edited": false, "score": 0, "creation_date": 1556745989, "post_id": 55942868, "comment_id": 98539046, "body": "I am not allowed to use outside packages, I have looked almost everywhere for code with out it. Thank you for your reply."}, {"owner": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "edited": false, "score": 2, "creation_date": 1556745998, "post_id": 55942868, "comment_id": 98539049, "body": "<code>output as a table</code> is too generic. Do you mean, just printed out on screen? Or printed on file? Stored in a table for further manipulation?"}, {"owner": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "edited": false, "score": 2, "creation_date": 1556746052, "post_id": 55942868, "comment_id": 98539067, "body": "Also, include some code of what you&#39;ve done, as it will help us better understand the context."}, {"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 1, "creation_date": 1556746088, "post_id": 55942868, "comment_id": 98539077, "body": "&quot;in some way manipulate the data&quot; how exactly? What manipulation should be done?"}, {"owner": {"reputation": 1, "user_id": 11438982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9233d9307757f122dbed224685443e58?s=128&d=identicon&r=PG&f=1", "display_name": "notaprogrammer", "link": "https://stackoverflow.com/users/11438982/notaprogrammer"}, "edited": false, "score": 0, "creation_date": 1556746370, "post_id": 55942868, "comment_id": 98539175, "body": "Apologies, I am a beginner programmer if you have not noticed. The table must be printed out into the screen. The &quot;manipulation of data&quot; is into a table. I will post code shortly."}, {"owner": {"reputation": 3180, "user_id": 5754797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/469b1fada1dd163114d4bc471d312fb3?s=128&d=identicon&r=PG&f=1", "display_name": "sal", "link": "https://stackoverflow.com/users/5754797/sal"}, "edited": false, "score": 0, "creation_date": 1556747244, "post_id": 55942868, "comment_id": 98539397, "body": "To print text in columns, often times, each column in the same row is spaced using tabs <code>\\t</code> or a certain amount of spaces. If you are able to loop through each row/column, a print statement like the following is a good starting point: <code>print(&quot;{}\\t{}\\t{}\\t{}\\n&quot;.format(col1, col2, col3, col4))</code>"}], "answers": [{"tags": [], "owner": {"reputation": 319, "user_id": 9997212, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Spqoe7UGIWQ/AAAAAAAAAAI/AAAAAAAAC_A/lS35ph4Pq2U/photo.jpg?sz=128", "display_name": "Enzo", "link": "https://stackoverflow.com/users/9997212/enzo"}, "is_accepted": false, "score": 1, "last_activity_date": 1556752162, "creation_date": 1556752162, "answer_id": 55943807, "question_id": 55942868, "link": "https://stackoverflow.com/questions/55942868/how-to-take-a-data-file-read-it-and-having-the-output-as-a-table-in-python/55943807#55943807", "title": "How to take a data file, read it, and having the output as a table in python", "body": "<p>Let's say you want to print the list</p>\n\n<pre><code>L = [['name', 'age', 'birth date'],\n     ['john', '45', '29/01/1974'],\n     ['steve', '17', '13/03/2002'],\n     ['paul', '13', '22/05/2006']]\n</code></pre>\n\n<p>in table-format. The first step is to define the number of rows and columns in your table and save to variables, as this will help you up there.</p>\n\n<h2>Print the table</h2>\n\n<p>Using a for loop, you can print all the informations like in a table.</p>\n\n<pre><code>for i in L:\n    print(*i, sep='|', end='')\n    print()\n</code></pre>\n\n<h2>Define the width of each column</h2>\n\n<p>After that, you can define a list <code>width</code> with the length values of each element per column.</p>\n\n<p>That is, if you enter a list like </p>\n\n<pre><code>[['name', 'age', 'birth date'],\n ['john', '45', '29/01/1974'],\n ['steve', '17', '13/03/2002'],\n ['paul', '13', '22/05/2006']]\n</code></pre>\n\n<p>it should return <code>[5, 3, 10]</code>.</p>\n\n<p>Note that in the first column the longest string is <code>'steve'</code> (<strong>5</strong> characters), the second column is <code>'age'</code> (<strong>3</strong> characters), and the third column all the strings have the same length (<strong>10</strong> characters).</p>\n\n<h2>Define a vertical margin (optional)</h2>\n\n<p>Once you have created the table and printed it on the screen, you may encounter a problem like this:</p>\n\n<pre><code>name|age|birth date\njohn|45|29/01/1974\nsteve|17|13/03/2002\npaul|13|22/05/2006\n</code></pre>\n\n<p>To solve this, you can apply to each string in the list a built-in method, such as <code>center</code>. The <code>width</code> list will help you in this, because it'll be possible to define the size of each argument of the method through each element of the list <code>width</code>.</p>\n\n<h2>Define a horizontal line (optional)</h2>\n\n<p>For aesthetic reasons, you may want to separate the lines by a horizontal line, like this:</p>\n\n<pre><code>---------+-------+--------------\n   name  |  age  |  birth date  \n---------+-------+--------------\n   john  |   45  |  29/01/1974  \n---------+-------+--------------\n  steve  |   17  |  13/03/2002  \n---------+-------+--------------\n   paul  |   13  |  22/05/2006  \n---------+-------+--------------\n</code></pre>\n\n<p>Again, the <code>width</code> list will help you in this. Note that, in the horizontal line, the amount of <code>+</code> will always be once smaller than the number of rows, and the number of <code>-</code> will always be the size of each column, defined by the list <code>width</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 11438982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9233d9307757f122dbed224685443e58?s=128&d=identicon&r=PG&f=1", "display_name": "notaprogrammer", "link": "https://stackoverflow.com/users/11438982/notaprogrammer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1556752162, "creation_date": 1556745755, "question_id": 55942868, "link": "https://stackoverflow.com/questions/55942868/how-to-take-a-data-file-read-it-and-having-the-output-as-a-table-in-python", "title": "How to take a data file, read it, and having the output as a table in python", "body": "<p>I am having a problem with a python coding problem where I must use one data file, write a program to read the file, in some way manipulate the data read, and produce an output report. The report must be a table with columns, I can not figure out how to create the columns. Any help is appreciated.</p>\n"}, {"tags": ["python", "plot", "plotly", "surface"], "answers": [{"tags": [], "owner": {"reputation": 3942, "user_id": 3115244, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jY0OU.png?s=128&g=1", "display_name": "glhr", "link": "https://stackoverflow.com/users/3115244/glhr"}, "is_accepted": true, "score": 2, "last_activity_date": 1556790944, "creation_date": 1556790944, "answer_id": 55949895, "question_id": 55942865, "link": "https://stackoverflow.com/questions/55942865/how-to-center-plotly-3d-surface-plot/55949895#55949895", "title": "How to center plotly 3d surface plot?", "body": "<p>You can specify a range for the X and Y axis like this:</p>\n\n<pre><code>layout = go.Layout(xaxis=dict(range=[-5, 5]),\n                   yaxis=dict(range=[-5, 5]))\n</code></pre>\n\n<p>Note that this requires explicitly specifying the <code>x</code> and <code>y</code> axis in the data:</p>\n\n<pre><code>data = [go.Surface(z=Z.tolist(), x=x, y=y, colorscale='Viridis')]\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/njBr7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/njBr7.png\" alt=\"Plotly surface plot with fixed axis range for X and Y\"></a></p>\n\n<p>See the <a href=\"https://plot.ly/python/3d-axes/#range-of-axes\" rel=\"nofollow noreferrer\">official Plotly examples</a></p>\n"}], "owner": {"reputation": 45, "user_id": 11259486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cef196df270d617a2304b2aa143127af?s=128&d=identicon&r=PG&f=1", "display_name": "Egor Epishin", "link": "https://stackoverflow.com/users/11259486/egor-epishin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 1, "accepted_answer_id": 55949895, "answer_count": 1, "score": 3, "last_activity_date": 1556790944, "creation_date": 1556745741, "last_edit_date": 1556747095, "question_id": 55942865, "link": "https://stackoverflow.com/questions/55942865/how-to-center-plotly-3d-surface-plot", "title": "How to center plotly 3d surface plot?", "body": "<p>Trying to plot an intercative 3d surface with plotly (go.Surface), the resulting surface is not centered at origin. It is centered at (10,10) and axes go from 0 to 20. I want it to be centered at origin and axes be limited from -5 to 5. Would be great if someone could help me to do that.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Lbh1N.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lbh1N.jpg\" alt=\"enter image description here\"></a></p>\n\n<pre><code>x = np.arange(-5,5,0.01)\ny = np.arange(-5,5,0.01)\nxx,yy=np.meshgrid(x,y)\nZ=xx**2+yy**2\n\ndata = [go.Surface(z=Z.tolist(), colorscale='Viridis')]\n\nlayout = go.Layout(\n...\ncode here\n...\n)\n\nfig = dict(data=data, layout=layout)\n\nplotly.offline.plot(fig, filename='pandas-3d-surface')\n</code></pre>\n"}, {"tags": ["python", "opencv", "torch", "cv2"], "answers": [{"comments": [{"owner": {"reputation": 487, "user_id": 3376063, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/EUr98.jpg?s=128&g=1", "display_name": "Yuriy Pryyma", "link": "https://stackoverflow.com/users/3376063/yuriy-pryyma"}, "edited": false, "score": 0, "creation_date": 1564393547, "post_id": 55958505, "comment_id": 101002314, "body": "What does &quot;\\*&quot; sign mean?"}], "tags": [], "owner": {"reputation": 500, "user_id": 7748810, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-skSnYOLxmX0/AAAAAAAAAAI/AAAAAAAATiE/sE0nCIgim_E/photo.jpg?sz=128", "display_name": "NateTheGrate", "link": "https://stackoverflow.com/users/7748810/natethegrate"}, "is_accepted": false, "score": 2, "last_activity_date": 1556822880, "creation_date": 1556822880, "answer_id": 55958505, "question_id": 55942863, "link": "https://stackoverflow.com/questions/55942863/different-results-with-cv2-gaussianblur-and-cv2-filter2d-with-a-gaussian-kernel/55958505#55958505", "title": "Different results with cv2.GaussianBlur and cv2.filter2D with a gaussian kernel?", "body": "<p>This is a weird one; for practicality's sake, I'd suggest you just pick one you're happy with and use it. That aside, I'm guessing that the semantics of how the multiple arguments are handled cause this mismatch. Also, opencv's equation for inferring sigma from kernelsize and vice versa does not appear to match yours.</p>\n\n<p>From <a href=\"https://docs.opencv.org/3.1.0/d4/d86/group__imgproc__filter.html#gac05a120c1ae92a6060dd0db190a61afa\" rel=\"nofollow noreferrer\">GaussianBlur docs</a>:</p>\n\n<blockquote>\n  <ul>\n  <li>ksize:  Gaussian kernel size. ksize.width and ksize.height can differ but they both must be positive and odd. Or, they can be zero's and\n  then they are computed from sigma.</li>\n  <li>sigmaX: Gaussian kernel standard deviation in X direction.</li>\n  <li>sigmaY: Gaussian kernel standard deviation in Y direction; if sigmaY is zero, it is set to be equal to sigmaX, if both sigmas are zeros,\n  they are computed from ksize.width and ksize.height, respectively (see\n  cv::getGaussianKernel for details); <strong>to fully control the result\n  regardless of possible future modifications of all this semantics, it\n  is recommended to specify all of ksize, sigmaX, and sigmaY.</strong></li>\n  </ul>\n</blockquote>\n\n<p>And the <a href=\"https://docs.opencv.org/3.1.0/d4/d86/group__imgproc__filter.html#gac05a120c1ae92a6060dd0db190a61afa\" rel=\"nofollow noreferrer\">getGaussianKernel docs</a>:</p>\n\n<blockquote>\n  <ul>\n  <li><strong>If it is non-positive</strong>, it is computed from ksize as <code>sigma = 0.3\\*((ksize-1)\\*0.5 - 1) + 0.8</code></li>\n  </ul>\n</blockquote>\n\n<p>All emphasis mine. Is there any chance your sigma is negative? That might cause a mismatch. </p>\n\n<p>EDIT: just noticed you want this to match the lua code. My advice would be to save out the results, then compare them in photoshop or your favorite image editor. If you subtract the test from the reference, you should be able to see the difference, and as your attempts get closer, there should be less difference overall. Barring that, you could try and read the source to figure out the difference in definition, or write your own!</p>\n\n<p>Good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 69, "user_id": 10006394, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Wz1E.jpg?s=128&g=1", "display_name": "Enes E", "link": "https://stackoverflow.com/users/10006394/enes-e"}, "is_accepted": false, "score": 0, "last_activity_date": 1561485216, "creation_date": 1561485216, "answer_id": 56759577, "question_id": 55942863, "link": "https://stackoverflow.com/questions/55942863/different-results-with-cv2-gaussianblur-and-cv2-filter2d-with-a-gaussian-kernel/56759577#56759577", "title": "Different results with cv2.GaussianBlur and cv2.filter2D with a gaussian kernel?", "body": "<p>cv2.getGaussianKernel function return 1D vector, to make it 2D gaussian matrix, you can multiply it with its transpose ( @ is used for matrix multiplication). Could you try this code:</p>\n\n<pre><code>gaussian_kernel = cv2.getGaussianKernel(kernel_size, sigma)\nkernel_2D = gaussian_kernel @ gaussian_kernel.transpose()\nblurred_image_2 = cv2.filter2D(img, -1, kernel_2D)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10194700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74795297be364038cf024b74583b510f?s=128&d=identicon&r=PG&f=1", "display_name": "NSe", "link": "https://stackoverflow.com/users/10194700/nse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1779, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1561485216, "creation_date": 1556745731, "question_id": 55942863, "link": "https://stackoverflow.com/questions/55942863/different-results-with-cv2-gaussianblur-and-cv2-filter2d-with-a-gaussian-kernel", "title": "Different results with cv2.GaussianBlur and cv2.filter2D with a gaussian kernel?", "body": "<p>I am trying to port some lua/torch code in Python, there's a sequence that runs a Gaussian blur over an image as follows:</p>\n\n<pre><code>local gauK = image.gaussian(math.ceil(3*sigma)*2+1, sigma)\ninp = image.convolve(inp, gauK, 'same')\n</code></pre>\n\n<p>To replicate this in my approach, I have been looking at cv2.GaussianBlur() and cv2.filter2D with passing in a gaussian kernel. </p>\n\n<p>Method 1 (cv2.GaussianBlur):</p>\n\n<pre><code>kernel_size = int(math.ceil(3 * sigma) * 2 + 1)  # same size as the lua code\nblurred_image = cv2.GaussianBlur(img, ksize=(kernel_size, kernel_size), sigma)\n</code></pre>\n\n<p>Method 2 (cv2.filter2D)</p>\n\n<pre><code>kernel_size = int(math.ceil(3 * sigma) * 2 + 1)  # same size as the lua code\ngaussian_kernel = cv2.getGaussianKernel(kernel_size, sigma)\nblurred_image_2 = cv2.filter2D(img, -1, gaussian_kernel)\n</code></pre>\n\n<p>Between Method 1 &amp; Method 2, I get different images. It appears that the Method 1 image is a bit more blurred than in Method 2. Is there any reason why I might be getting different results here? I am trying to figure out which one would match the lua code. Thanks.</p>\n"}, {"tags": ["python", "ios", "python-3.x", "appium", "xcuitest"], "comments": [{"owner": {"reputation": 584, "user_id": 2697348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3da8e14d69ddb75304bd08c68be0685?s=128&d=identicon&r=PG&f=1", "display_name": "PixelPlex", "link": "https://stackoverflow.com/users/2697348/pixelplex"}, "edited": false, "score": 0, "creation_date": 1556789385, "post_id": 55942851, "comment_id": 98551323, "body": "Wasn&#39;t the driver&#39;s <code>PageSource</code> property supposed to load the new content automatically? I can&#39;t imagine you would need to reload the app window before the appium driver is able to find that new element."}, {"owner": {"reputation": 584, "user_id": 2697348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3da8e14d69ddb75304bd08c68be0685?s=128&d=identicon&r=PG&f=1", "display_name": "PixelPlex", "link": "https://stackoverflow.com/users/2697348/pixelplex"}, "edited": false, "score": 0, "creation_date": 1556789741, "post_id": 55942851, "comment_id": 98551508, "body": "<a href=\"https://discuss.appium.io/t/appium-cant-locate-dynamic-generated-elements-on-ios-native-app/17339\" rel=\"nofollow noreferrer\">This</a> post on the appium forum seems to be related."}], "owner": {"reputation": 1, "user_id": 11438463, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/890d6d2d8533580965d9e06028df97ba?s=128&d=identicon&r=PG", "display_name": "Nilay Jani", "link": "https://stackoverflow.com/users/11438463/nilay-jani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 348, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556745668, "creation_date": 1556745668, "question_id": 55942851, "link": "https://stackoverflow.com/questions/55942851/is-there-any-function-to-find-dynamic-element-on-app-page-using-appium", "title": "Is there any function to find dynamic element on App page using Appium?", "body": "<p>I am developing UI test automation for <code>iOS App</code>, By click on the button (<code>XCUIElementTypeButton</code>), it actually add buttons in <code>XCUIElementTypeCell</code> on App page. \nWhere do I find dynamically added buttons (or other elements) on App page?</p>\n\n<blockquote>\n  <p>Note: \n  - This is not hybrid app, So this App does not have web page.</p>\n</blockquote>\n\n<p>By changing App page and come back to original page, Appium always find dynamic elements.</p>\n\n<p>I need help to find any function or method to reload all <code>XCUIElement</code> without changing page. </p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11438943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e2ae5037b6fe197dfa0660977c1d65?s=128&d=identicon&r=PG&f=1", "display_name": "jaegerbomb", "link": "https://stackoverflow.com/users/11438943/jaegerbomb"}, "edited": false, "score": 0, "creation_date": 1556751723, "post_id": 55943528, "comment_id": 98540533, "body": "wonderful, my first impression was to use the callback, but I wanted to double check to make sure I wasnt missing anything obvious. thanks! :)"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 3, "user_id": 11438943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e2ae5037b6fe197dfa0660977c1d65?s=128&d=identicon&r=PG&f=1", "display_name": "jaegerbomb", "link": "https://stackoverflow.com/users/11438943/jaegerbomb"}, "edited": false, "score": 0, "creation_date": 1556752659, "post_id": 55943528, "comment_id": 98540699, "body": "You mean I could have saved the time writing all of this down because you knew the solution already????"}, {"owner": {"reputation": 3, "user_id": 11438943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e2ae5037b6fe197dfa0660977c1d65?s=128&d=identicon&r=PG&f=1", "display_name": "jaegerbomb", "link": "https://stackoverflow.com/users/11438943/jaegerbomb"}, "edited": false, "score": 0, "creation_date": 1556759572, "post_id": 55943528, "comment_id": 98541859, "body": "No just intuition (i havent used events in matplotlib before), but this library is quite complete and complicated, i figured there was another way."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 0, "last_activity_date": 1556749945, "creation_date": 1556749945, "answer_id": 55943528, "question_id": 55942849, "link": "https://stackoverflow.com/questions/55942849/limit-the-points-in-subplots-only-to-zoomed-in-region/55943528#55943528", "title": "Limit the points in subplots only to zoomed in region", "body": "<p>You would need to filter the data, depending on the limits of the main axes. One can connect callbacks on zoom events, see <a href=\"https://stackoverflow.com/questions/31490436/matplotlib-finding-out-xlim-and-ylim-after-zoom\">Matplotlib: Finding out xlim and ylim after zoom</a> and connect them to a function that performs the filtering on the data.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\n\nnumPoints = 100\nx = np.random.rand(numPoints)*20\ny = np.random.rand(numPoints)*20\n\nzeros = np.zeros_like(x)\n\n# Set up the axes with gridspec\nfig = plt.figure(figsize=(6, 6), constrained_layout=True)\ngrid = fig.add_gridspec(ncols=2, nrows=2, width_ratios=[0.3, 5], height_ratios=[5, 0.3])\n\nax_main = fig.add_subplot(grid[:-1, 1:])\nax_y = fig.add_subplot(grid[:-1, 0], xticklabels=[], sharey=ax_main)\nax_x = fig.add_subplot(grid[-1, 1:], yticklabels=[], sharex=ax_main)\n\nax_main.plot(x, y, 'ok', markersize=3, alpha=0.2)\nxline, = ax_x.plot(x, zeros, marker='o', ls=\"none\", color='gray')\nyline, = ax_y.plot(zeros, y, marker='o', ls=\"none\", color='gray')\n\nax_main.grid(True, lw = 1, ls = '--', c = '.75')\nax_y.grid(True, axis=\"x\", lw = 1, ls = '--', c = '.75')\nax_x.grid(True, axis=\"y\", lw = 1, ls = '--', c = '.75')\n\n\ndef xchange(evt):\n    ymin, ymax = ax_main.get_ylim()\n    filt = (y &lt;= ymax) &amp; (y &gt;= ymin)\n    xline.set_data(x[filt], zeros[filt])\n\ndef ychange(evt):\n    xmin, xmax = ax_main.get_xlim()\n    filt = (x &lt;= xmax) &amp; (x &gt;= xmin)\n    yline.set_data(zeros[filt], y[filt])\n\nax_main.callbacks.connect('xlim_changed', ychange)\nax_main.callbacks.connect('ylim_changed', xchange)\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Wr1Az.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wr1Az.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 3, "user_id": 11438943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e2ae5037b6fe197dfa0660977c1d65?s=128&d=identicon&r=PG&f=1", "display_name": "jaegerbomb", "link": "https://stackoverflow.com/users/11438943/jaegerbomb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 55943528, "answer_count": 1, "score": 0, "last_activity_date": 1556752062, "creation_date": 1556745665, "last_edit_date": 1556752062, "question_id": 55942849, "link": "https://stackoverflow.com/questions/55942849/limit-the-points-in-subplots-only-to-zoomed-in-region", "title": "Limit the points in subplots only to zoomed in region", "body": "<p>I have a set of 100 random 2D points (between 0 and 20) in a scatter plot with 2 sub plots surrounding the main. When I zoom in the main scatter plot, the range on the subplots gets shrunk, however I can see points from outside the zoom window region.</p>\n\n<pre><code>import numpy as np\nimport matplotlib\nimport matplotlib.pyplot as plt\n\nimport random\n\nnumPoints = 100\nx = [random.uniform(0, 20) for i in range(numPoints)]\ny = [random.uniform(0, 20) for i in range(numPoints)]\n\n# Set up the axes with gridspec\nfig = plt.figure(figsize=(6, 6), constrained_layout=True)\n\ngrid = fig.add_gridspec(ncols=2, nrows=2, width_ratios=[0.3, 5], height_ratios=[5, 0.3])\n\nmain_ax = fig.add_subplot(grid[:-1, 1:])\nmain_ax.plot(x, y, 'ok', markersize=3, alpha=0.2)\n\ny_hist = fig.add_subplot(grid[:-1, 0], xticklabels=[], sharey=main_ax)\nx_hist = fig.add_subplot(grid[-1, 1:], yticklabels=[], sharex=main_ax)\n\nx_hist.plot(\n    x, [0 for i in x], \n    'ok',\n    color='gray'\n)\nx_hist.invert_yaxis()\n\ny_hist.plot(\n    [0 for i in y], y,\n    'ok',\n    color='gray'\n)\ny_hist.invert_xaxis()\n\nmain_ax.grid(True, lw = 1, ls = '--', c = '.75')\nx_hist.grid(True, axis=\"x\", lw = 1, ls = '--', c = '.75')\ny_hist.grid(True, axis=\"y\", lw = 1, ls = '--', c = '.75')\n\nplt.show()\n</code></pre>\n\n<p><img src=\"https://i.ibb.co/3mfjRHf/Figure-1.png\" alt=\"image\"></p>\n\n<p>I am trying to get the dots in the left and bottom sub plots of the above image to match just what you see in the main plot (3 points). </p>\n\n<p>Instead they show everything in that direction. The Left subplot shows every point on the x axis between 0 and 2.5. The bottom subplot shows every point on the y axis between 10 and 12.5.</p>\n"}, {"tags": ["python", "amazon-web-services", "aws-xray"], "answers": [{"tags": [], "owner": {"reputation": 501, "user_id": 6872050, "user_type": "registered", "profile_image": "https://graph.facebook.com/656491361166913/picture?type=large", "display_name": "haotian465", "link": "https://stackoverflow.com/users/6872050/haotian465"}, "is_accepted": true, "score": 1, "last_activity_date": 1556832360, "creation_date": 1556832360, "answer_id": 55960467, "question_id": 55942830, "link": "https://stackoverflow.com/questions/55942830/how-to-set-segment-top-level-aws-xray-annotations-in-python-lambda/55960467#55960467", "title": "How to set segment (top) level AWS Xray annotations in Python Lambda", "body": "<p>Lambda function segment is not generated by X-Ray SDK. We are working with Lambda team to provide better experience but currently there is no workaround to annotate the segment.</p>\n\n<p>For annotating subsegment, you can create a subsegment inside the handler and then add annotation to it. You can see the quick start guide <a href=\"https://github.com/aws/aws-xray-sdk-python\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-xray-sdk-python</a> for creating custom subsegment.</p>\n\n<p>The easiest way is using context manager style:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>with xray_recorder.in_subsegment('pick_a_subsegment_name') as subsegment:\n        subsegment.put_annotation('key', 'value')\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 1224845, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9eb2ba1dd84bfebc05d5882ae60b1e4c?s=128&d=identicon&r=PG", "display_name": "tavor999", "link": "https://stackoverflow.com/users/1224845/tavor999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 554, "favorite_count": 0, "accepted_answer_id": 55960467, "answer_count": 1, "score": 0, "last_activity_date": 1556832360, "creation_date": 1556745541, "last_edit_date": 1556805189, "question_id": 55942830, "link": "https://stackoverflow.com/questions/55942830/how-to-set-segment-top-level-aws-xray-annotations-in-python-lambda", "title": "How to set segment (top) level AWS Xray annotations in Python Lambda", "body": "<p>I am successfully using AWS Xray within a Python v2 Lambda.  The <code>patch_all()</code> is working well to automatically patch a portion of my libraries, i.e boto3, for Xray.   </p>\n\n<p>I am unable to set high level annotations that persist across the lower level subsegments.  Can annotations in lambda be set like this?  If not how else should they be set? I've tried getting current <code>subsegment</code> and <code>segment</code>.</p>\n\n<pre><code>import json\nimport re\nimport boto3\nimport logging\nimport sys\n\nfrom aws_xray_sdk.core import xray_recorder\nfrom aws_xray_sdk.core import patch_all\n\npatch_all()\n\ndef lambda_handler(event, context):  \n  subsegment_ref = xray_recorder.current_subsegment()\n  subsegment_ref.put_annotation('account_id', 'foo')\n</code></pre>\n"}, {"tags": ["python", "powerpoint", "win32com", "python-pptx"], "answers": [{"tags": [], "owner": {"reputation": 649, "user_id": 8456608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jDMgZ.jpg?s=128&g=1", "display_name": "bm13563", "link": "https://stackoverflow.com/users/8456608/bm13563"}, "is_accepted": false, "score": 1, "last_activity_date": 1556794536, "creation_date": 1556794536, "answer_id": 55950882, "question_id": 55942773, "link": "https://stackoverflow.com/questions/55942773/how-to-set-title-to-a-powerpoint-slide-using-win32com-client/55950882#55950882", "title": "How to set title to a powerpoint slide using win32com client", "body": "<p>Just a small syntax issue:</p>\n\n<pre><code>PptApp = win32com.client.Dispatch(\"Powerpoint.Application\")\nPptApp.Visible = True\nz= excelrange.Copy()\nPPtPresentation = PptApp.Presentations.Open(r'C:\\Users\\aju.mathew.thomas\\Desktop\\PBC\\Pepsi\\PBC\\Performance Reports\\2019\\PPT\\PBC Performance Update.pptx')\npptSlide = PPtPresentation.Slides.Add(1,11)\ntitle = pptSlide.Shapes.Title\ntitle.TextFrame.TextRange.Text = 'My title here'\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 5961075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/142cf0b4ce68c71c9a125aa7903164f6?s=128&d=identicon&r=PG&f=1", "display_name": "amt1906", "link": "https://stackoverflow.com/users/5961075/amt1906"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1700, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556794536, "creation_date": 1556745191, "question_id": 55942773, "link": "https://stackoverflow.com/questions/55942773/how-to-set-title-to-a-powerpoint-slide-using-win32com-client", "title": "How to set title to a powerpoint slide using win32com client", "body": "<p>Could anyone please help me in setting a title to a powerpoint slide using win32com library in Python. The following is the code. I have used the slide layout 11 which denotes Title only</p>\n\n<pre><code>import openpyxl as op\nimport pptx\nimport os\nimport win32com.client\n\nimport smtplib\n\nos.chdir(r'C:\\Users\\aju.mathew.thomas\\Desktop\\PBC\\Pepsi\\PBC\\Performance Reports\\2019\\PPT')\npath= r'C:\\Users\\aju.mathew.thomas\\Desktop\\PBC\\Pepsi\\PBC\\Performance Reports\\2019\\PPT\\Summary2.xlsx'\nwb = op.load_workbook(path)\nExcelApp = win32com.client.Dispatch(\"Excel.Application\")\nExcelApp.Visible = False\nworkbook = ExcelApp.Workbooks.open(r'C:\\Users\\aju.mathew.thomas\\Desktop\\PBC\\Pepsi\\PBC\\Performance Reports\\2019\\PPT\\Summary2.xlsx')\nworksheet = workbook.Worksheets(\"Summary\")\nexcelrange = worksheet.Range(\"A2:R24\")\n\nPptApp = win32com.client.Dispatch(\"Powerpoint.Application\")\nPptApp.Visible = True\nz= excelrange.Copy()\nPPtPresentation = PptApp.Presentations.Open(r'C:\\Users\\aju.mathew.thomas\\Desktop\\PBC\\Pepsi\\PBC\\Performance Reports\\2019\\PPT\\PBC Performance Update.pptx')\npptSlide = PPtPresentation.Slides.Add(1,11)\n#pptSlide.Title.Characters.Text ='Metrics'\n\n#title = pptSlide.Shapes.Title\n#title.Text ='Metrics Summary'\npptSlide.Shapes.PasteSpecial(z)\nPPtPresentation.Save()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "bokeh"], "answers": [{"comments": [{"owner": {"reputation": 169, "user_id": 1848192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9891e18ef13e1a46f6ccae8f8c8a519?s=128&d=identicon&r=PG", "display_name": "Dave L.", "link": "https://stackoverflow.com/users/1848192/dave-l"}, "edited": false, "score": 0, "creation_date": 1556752454, "post_id": 55943059, "comment_id": 98540666, "body": "THANK YOU!!!     That did exactly what I needed.  It&#39;s the second time I&#39;ve come across this issue.  Wish there were a more intuitive and cleaner way to do that, but it gets the job done.    I&#39;ve been raking though the documentation and could not figure out how to get it done.  I tried something very close to that, but didn&#39;t get it to work.  The docs are a bit lacking in detail for things outside of their basic examples.  Especially for formatting.   Thanks again!"}, {"owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "reply_to_user": {"reputation": 169, "user_id": 1848192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9891e18ef13e1a46f6ccae8f8c8a519?s=128&d=identicon&r=PG", "display_name": "Dave L.", "link": "https://stackoverflow.com/users/1848192/dave-l"}, "edited": false, "score": 0, "creation_date": 1556773123, "post_id": 55943059, "comment_id": 98544343, "body": "It is technically in this first section <a href=\"https://bokeh.pydata.org/en/latest/docs/user_guide/tools.html#basic-tooltips\" rel=\"nofollow noreferrer\">bokeh.pydata.org/en/latest/docs/user_guide/&hellip;</a> but probably easy to miss. If you are familiar with Sphinx/ReST, help improving the docs is always appreciated."}, {"owner": {"reputation": 169, "user_id": 1848192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9891e18ef13e1a46f6ccae8f8c8a519?s=128&d=identicon&r=PG", "display_name": "Dave L.", "link": "https://stackoverflow.com/users/1848192/dave-l"}, "edited": false, "score": 0, "creation_date": 1556808504, "post_id": 55943059, "comment_id": 98561824, "body": "Thanks, I actually read that section several times.  Mainly lack of understanding of variable expansion (especially nested expansion e.g. &#39;@$name{0.0}&#39;) and formatting was what was giving me trouble."}, {"owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "reply_to_user": {"reputation": 169, "user_id": 1848192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9891e18ef13e1a46f6ccae8f8c8a519?s=128&d=identicon&r=PG", "display_name": "Dave L.", "link": "https://stackoverflow.com/users/1848192/dave-l"}, "edited": false, "score": 0, "creation_date": 1556814785, "post_id": 55943059, "comment_id": 98565195, "body": "Right it&#39;s a little obscure and mostly the result of history. In general <code>@foo</code> or <code>@{foo}</code> always means reference the column called &quot;foo&quot;. Then the &quot;special&quot; variable <code>$name</code> was added, which reports the name of the renderer. Then finally folks wanted to use that name, as a column name, hence we settled on <code>@$name</code>, or &quot;use the value of $name as the column name&quot;, as a path to provide that capability within the existing conventions. But yes, it&#39;s not the most obvious thing and could be documented/explained better."}], "tags": [], "owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "is_accepted": true, "score": 2, "last_activity_date": 1556746933, "creation_date": 1556746933, "answer_id": 55943059, "question_id": 55942765, "link": "https://stackoverflow.com/questions/55942765/picking-data-for-bokeh-hovertool-output-from-columndatasource/55943059#55943059", "title": "Picking data for Bokeh HoverTool output from ColumnDataSource", "body": "<p>You can use <code>@$name</code> to look up the value of the column that has <code>$name</code> as the column name:</p>\n\n<pre><code>hovertools= HoverTool(tooltips=[('Gear', '$name'),\n                                ('data', '@$name{0.0}'),\n                                ('RPM', '@rpm')],)\n</code></pre>\n\n<p>But note, for this to work, the value you set for <code>name</code> in the glyph method has to <em>match the column name</em>. E.g. I had to change:</p>\n\n<pre><code>for gear in ('1st', '2nd', '3rd', '4th'):\n    color = colors.__next__()\n    fig.line(x='rpm',\n             y=gear,\n             ...\n             name=gear)   # CHANGED to match column name\n    fig.circle(x='rpm',\n               y=gear,\n               ...\n               name=gear) # CHANGED to match column name\n</code></pre>\n\n<p>This yields:</p>\n\n<p><a href=\"https://i.stack.imgur.com/HgnKV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HgnKV.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/Lrvlu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Lrvlu.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note that in the \"tuple\" format for tooltips, the first label value is not expaned, so if you want e.g. something like <code>4th gear: &lt;value&gt;</code> on a per-line basis, then you'll want to use a <a href=\"https://bokeh.pydata.org/en/latest/docs/user_guide/tools.html#custom-tooltip\" rel=\"nofollow noreferrer\">Custom Tooltip</a></p>\n"}], "owner": {"reputation": 169, "user_id": 1848192, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9891e18ef13e1a46f6ccae8f8c8a519?s=128&d=identicon&r=PG", "display_name": "Dave L.", "link": "https://stackoverflow.com/users/1848192/dave-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "accepted_answer_id": 55943059, "answer_count": 1, "score": 2, "last_activity_date": 1556746933, "creation_date": 1556745133, "question_id": 55942765, "link": "https://stackoverflow.com/questions/55942765/picking-data-for-bokeh-hovertool-output-from-columndatasource", "title": "Picking data for Bokeh HoverTool output from ColumnDataSource", "body": "<p>I'm a bit vexed with the HoverTool in Bokeh.  I've got a ColumnDataSource that has multiple data 'columns' and I use the various columns to plot lines on a graph.  When I hover on one of the points on a line, I want to show the 'x' ('rpm' data in my CDS) and 'y' (one of the other columns in my CDS) data for that point on that line.  </p>\n\n<p>Since all lines are using the same CDS (different columns for 'y' values), for the life of me, I can't figure out how to discriminate the 'y' value for the line being hovered on, and display only the 'y' value for that line.  Currently, I'm just displaying all of the 'y' values for the 'x' value being hovered on.</p>\n\n<p>I don't want to use the '$y' parameter, because that's just the location of the cursor on the graph, not the data for the hovered point.</p>\n\n<p>Would appreciate your thoughts.  Thanks.</p>\n\n<p>Note, this program plots vehicle speed for given engine RPM, and each series is by transmission gear.</p>\n\n<pre><code>import itertools\nfrom bokeh.plotting import figure, show\nfrom bokeh.models import ColumnDataSource, HoverTool\nfrom bokeh.palettes import Category20_20 as palette\n\ndata={'rpm': range(2000, 4000, 500),\n     '1st': [15.00040961597459,\n             18.750512019968237,\n             22.50061442396188,\n             26.25071682795553],\n     '2nd': [28.241511931310182,\n             35.301889914137725,\n             42.36226789696527,\n             49.422645879792825],\n     '3rd': [45.751249328722494,\n             57.18906166090312,\n             68.62687399308373,\n             80.06468632526436],\n     '4th': [66.30615844742391,\n             82.8826980592799,\n             99.45923767113587,\n             116.03577728299183]}\n\ncds = ColumnDataSource(data=data)\n\nfig = figure(width=800, height= 600, title='Speed', x_axis_label='RPM', y_axis_label='Speed(mph)')\nhovertools= HoverTool(tooltips=[('Gear', '$name'),\n                                ('4th', '@4th{0.0}'),\n                                ('3rd', '@3rd{0.0}'),\n                                ('2nd', '@2nd{0.0}'),\n                                ('1st', '@1st{0.0}'),\n                                ('RPM', '@rpm')],)\n\ncolors = itertools.cycle(palette)\nfig.add_tools(hovertools)\nfor gear in ('1st', '2nd', '3rd', '4th'):\n    color = colors.__next__()\n    fig.line(x='rpm',\n             y=gear,\n             source=cds,\n             color=color,\n             legend=gear + ' gear',\n             muted_color=color,\n             muted_alpha=0.2,\n             line_width=1,\n             name=gear + ' gear')\n    fig.circle(x='rpm',\n               y=gear,\n               source=cds,\n               color=color,\n               legend=gear + ' gear',\n               muted_color=color,\n               muted_alpha=0.2,\n               line_width=1,\n               name=gear + ' gear')\n\nfig.legend.click_policy = \"mute\"\nfig.legend.background_fill_alpha = 0.5\n\nshow(fig)\n</code></pre>\n"}, {"tags": ["python", "pandas", "matplotlib", "bar-chart", "stacked-chart"], "comments": [{"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1556745492, "post_id": 55942763, "comment_id": 98538855, "body": "3 Series with 3 elements with 3 colors is a bit confusing. The stacks are the first elements of each Series, or a single Series? The green seems to be too small, but they all sum to 100 so unsure."}, {"owner": {"reputation": 394, "user_id": 9372533, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf6f602a462dda0d94d9b22f47632c88?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/9372533/jake"}, "reply_to_user": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1556745605, "post_id": 55942763, "comment_id": 98538899, "body": "Yes, it is confusing.. the first stack would be all of the first elements, the 2nd stack is all the 2nd elements, and the 3rd stack is all of the 3rd elements."}], "answers": [{"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 2, "creation_date": 1556745944, "post_id": 55942869, "comment_id": 98539030, "body": "Just shorter the lines<code>.plot.bar(stacked=True) </code> :-)"}], "tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": true, "score": 3, "last_activity_date": 1556746002, "last_edit_date": 1556746002, "creation_date": 1556745761, "answer_id": 55942869, "question_id": 55942763, "link": "https://stackoverflow.com/questions/55942763/stacking-three-bar-charts-from-different-series-in-python/55942869#55942869", "title": "Stacking three bar charts from different series in python", "body": "<p><code>concat</code> + a bar plot with <code>stacked=True</code></p>\n\n<pre><code>import pandas as pd\n\n(pd.concat([Series1, Series2, Series3], axis=1)\n     .assign(idx=x_lab).set_index('idx')       # just for the labeling\n     .plot.bar(stacked=True))\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/pQvEv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pQvEv.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 394, "user_id": 9372533, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf6f602a462dda0d94d9b22f47632c88?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/9372533/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 1, "accepted_answer_id": 55942869, "answer_count": 1, "score": 1, "last_activity_date": 1556746002, "creation_date": 1556745120, "question_id": 55942763, "link": "https://stackoverflow.com/questions/55942763/stacking-three-bar-charts-from-different-series-in-python", "title": "Stacking three bar charts from different series in python", "body": "<p>I am new to matplotlib and cannot figure out how to stack multiple series into one bar chart.</p>\n\n<p>Here is some data:</p>\n\n<pre><code>import pandas as pd\nimport matplotlib.pyplot as plt\n###Data\nx_lab =  pd.Series(['a','b','c'])\nSeries1 = pd.Series([25,35,30])\nSeries2 = pd.Series([40,35,50])\nSeries3 = pd.Series([35,30,20])\n\n##Creating the 3 bars to plot##\npl_1 = plt.bar(x= x_lab,height = Series1)\npl_2 = plt.bar(x= x_lab,height = Series2)\npl_3 = plt.bar(x= x_lab,height = Series3)\n</code></pre>\n\n<p>When I run this code the data is superimposed onto each other. I am hoping that the data would be able to be stacked instead. </p>\n\n<p>I have tried this:</p>\n\n<pre><code>##First attempt\nattempt_1 = plt.bar(x = x_lab, height = [pl_1,pl_2,pl_3], stacked = True)\n</code></pre>\n\n<p>And this: </p>\n\n<pre><code>##Second Attempt \npl_1 = plt.bar(x= x_lab,height = Series1, stacked = True)\npl_2 = plt.bar(x= x_lab,height = Series2, stacked = True)\npl_3 = plt.bar(x= x_lab,height = Series3, stacked = True)\n</code></pre>\n\n<p>But neither worked. The desired output wold look something like this (colors do not need to match): \n<a href=\"https://i.stack.imgur.com/fLQbx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fLQbx.png\" alt=\"enter image description here\"></a></p>\n\n<p>Any help or guidance would be greatly appreciated. </p>\n"}, {"tags": ["python", "python-sphinx", "restructuredtext", "pybtex"], "answers": [{"tags": [], "owner": {"reputation": 4457, "user_id": 141023, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/18431ffe70f2e333b8d29d7664171ac4?s=128&d=identicon&r=PG", "display_name": "cheshirekow", "link": "https://stackoverflow.com/users/141023/cheshirekow"}, "is_accepted": false, "score": 1, "last_activity_date": 1557265178, "creation_date": 1557265178, "answer_id": 56030812, "question_id": 55942749, "link": "https://stackoverflow.com/questions/55942749/how-do-you-change-the-style-of-pybtex-references-in-sphinx/56030812#56030812", "title": "How do you change the style of pybtex references in sphinx", "body": "<p>I hate to answer my own question, but here's what I figured out. I added the following to my <code>conf.py</code> and it uses the bibtex key for the label text:</p>\n\n<pre><code>from pybtex.style.formatting.unsrt import Style as UnsrtStyle\nfrom pybtex.style.labels.alpha import LabelStyle as AlphaLabelStyle\n\nclass KeyLabelStyle(AlphaLabelStyle):\n  def format_label(self, entry):\n    label = entry.key\n    return label\n\nclass CustomStyle(UnsrtStyle):\n  default_sorting_style = 'author_year_title'\n\n  def __init__(self, *args, **kwargs):\n    super(CustomStyle, self).__init__(*args, **kwargs)\n    self.label_style = KeyLabelStyle()\n    self.format_labels = self.label_style.format_labels\n\nfrom pybtex.plugin import register_plugin\nregister_plugin('pybtex.style.formatting', 'custom', CustomStyle)\n</code></pre>\n\n<p>To activate in RST:</p>\n\n<pre><code>.. bibliography:: refs.bib\n   :style: custom\n</code></pre>\n\n<p>This isn't a complete answer however as it doesn't really generate custom labels... but overrides some internals of an existing style. So kind of a hacky almost-answer... I hope it helps someone else. </p>\n"}], "owner": {"reputation": 4457, "user_id": 141023, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/18431ffe70f2e333b8d29d7664171ac4?s=128&d=identicon&r=PG", "display_name": "cheshirekow", "link": "https://stackoverflow.com/users/141023/cheshirekow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 378, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1557265178, "creation_date": 1556745048, "last_edit_date": 1556773468, "question_id": 55942749, "link": "https://stackoverflow.com/questions/55942749/how-do-you-change-the-style-of-pybtex-references-in-sphinx", "title": "How do you change the style of pybtex references in sphinx", "body": "<p>I'm trying to use the <a href=\"https://sphinxcontrib-bibtex.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">sphinxcontrib.bibtex</a> to include citations/references in some documentation. It says that you can <a href=\"https://sphinxcontrib-bibtex.readthedocs.io/en/latest/usage.html#directive-bibliography\" rel=\"nofollow noreferrer\">set the style</a> with:</p>\n\n<pre><code>.. bibliography: refs.bib\n   :style: plain\n</code></pre>\n\n<p>And it comes with the following styles: <code>alpha</code>, <code>plain</code> which create reference labels that look like this:</p>\n\n<ul>\n<li><code>alpha</code>: <code>[ZieglerBenderSchreiber+14]</code> or <code>[TMT14]</code> or <code>[PCY+16a]</code></li>\n<li><code>plain</code>: <code>[1]</code>, <code>[2]</code>, <code>[3]</code></li>\n</ul>\n\n<p>I find that <code>alpha</code> is inconsistent but I think that the just-numbers of <code>plain</code> lack context. To customize formatting it provides this example:</p>\n\n<pre><code>from pybtex.style.formatting.unsrt import Style as UnsrtStyle\nfrom pybtex.style.template import toplevel # ... and anything else needed\nfrom pybtex.plugin import register_plugin\n\nclass MyStyle(UnsrtStyle):\n\n    def format_XXX(self, e):\n        template = toplevel [\n            # etc.\n        ]\n        return template.format_data(e)\n\nregister_plugin('pybtex.style.formatting', 'mystyle', MyStyle)\n</code></pre>\n\n<p>which <code>sphinx</code> fails out on with:</p>\n\n<pre><code>sphinx-build -M html . out\nRunning Sphinx v1.8.3\n\nConfiguration error:\nThere is a syntax error in your configuration file: bad input (conf.py, line 92)\nDid you change the syntax from 2.x to 3.x?\n</code></pre>\n\n<p>It seems to use <a href=\"https://docs.pybtex.org/api/styles.html#pybtex.style.formatting.BaseStyle\" rel=\"nofollow noreferrer\">pybtex</a> under the hood so following an example from that documentation:</p>\n\n<pre><code>from pybtex.style.formatting import BaseStyle\nfrom pybtex.richtext import Text, Tag\n\nclass MyStyle(BaseStyle):\n    def format_article(self, entry):\n        return Text('Article ', Tag('em', entry.fields['title']))\n\nfrom pybtex.plugin import register_plugin\nregister_plugin('pybtex.style.formatting', 'mystyle', MyStyle)\n</code></pre>\n\n<p>and sphinx fails out with:</p>\n\n<pre><code>Exception occurred:\n  File \"/home/josh/codes/docs/conf.py\", line 88, in format_article\n    return Text('Article ', Tag('em', entry.fields['title']))\nAttributeError: 'dict' object has no attribute 'fields'\nThe full traceback has been saved in /tmp/sphinx-err-dftwlzvr.log, if you want to report the issue to the developers.\n</code></pre>\n\n<p>... and I think that just customizes the bibliography entry text and not the label text anyway. How do I customize the label text? I would prefer one of the following:</p>\n\n<ol>\n<li>just bracket numerals (<code>[1]</code>) like <code>plain</code>, but with labels in superscript</li>\n<li>something like <code>[ref.12]</code> similar to <code>eq.12</code> or <code>fig.12</code></li>\n<li>something like <code>alpha</code> but with a consistent number of characters</li>\n</ol>\n"}, {"tags": ["python", "matplotlib", "png", "data-visualization", "pie-chart"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1556746395, "post_id": 55942693, "comment_id": 98539188, "body": "radius=1.6 creates a pie that is larger than the figure, so it gets cut off. Use radius =1 or similar to have the complete pie within the figure."}, {"owner": {"reputation": 1, "user_id": 11080318, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_KSPNpssqVk/AAAAAAAAAAI/AAAAAAAAACA/JT6XJlTpp0w/photo.jpg?sz=128", "display_name": "Kenny Daniels", "link": "https://stackoverflow.com/users/11080318/kenny-daniels"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1556753877, "post_id": 55942693, "comment_id": 98540919, "body": "So is there no way to save the picture as is? I set it to radius 1.6 for more visibility, which is why I was avoiding using plt.tight_layout() because it set radius to 1."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1556754014, "post_id": 55942693, "comment_id": 98540950, "body": "If you want to have a larger figure use <code>plt.figure(figsize=(8,7))</code> or whatever numbers you need."}], "owner": {"reputation": 1, "user_id": 11080318, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_KSPNpssqVk/AAAAAAAAAAI/AAAAAAAAACA/JT6XJlTpp0w/photo.jpg?sz=128", "display_name": "Kenny Daniels", "link": "https://stackoverflow.com/users/11080318/kenny-daniels"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556758649, "creation_date": 1556744663, "last_edit_date": 1556758649, "question_id": 55942693, "link": "https://stackoverflow.com/questions/55942693/how-do-i-save-the-entire-graph-without-it-being-cut-off", "title": "How do I save the entire graph without it being cut off?", "body": "<p>I'm trying to graph a pie chart using myplotlib, and I was able to set the spacing and the end result with <code>plt.show()</code> is exactly what I want. However whenever I try to save my figure using <code>plt.savefig(\"file path name here.png\")</code> The title and portions of the labels are cut off. </p>\n\n<p>I have tried using <code>plt.tight_layout()</code> however, that completely removes all the spacing I set up beforehand. I also tried <code>plt.savefig(\"file path name.png\", dpi=...)</code> however that just increases the size of the saved png creating a bigger image that has its title and labels cut off.</p>\n\n<pre><code>Dict_July=dict(Apps[\"July\"].value_counts())\nDict_Aug=dict(Apps[\"August\"].value_counts())\nDict_Sept=dict(Apps[\"September\"].value_counts())\nDict_Oct=dict(Apps[\"October\"].value_counts())\nDict_Nov=dict(Apps[\"November\"].value_counts())\nDict_Jan=dict(Apps[\"January\"].value_counts())\nDict_Feb=dict(Apps[\"Feb/Mar\"].value_counts())\nDict_April=dict(Apps[\"April\"].value_counts())\n\nApp_Errors=[Dict_July, Dict_Aug, Dict_Sept, Dict_Oct, Dict_Nov, Dict_Jan, Dict_Feb, Dict_April]\n\nApp_Names=[\"None\",\"2020\",\"CRM\",\"Other\",\"3C Logic\",\"Outlook\",\"Act-on\",\"Foxit\"]\ncolors=[\"c\",\"orangered\",\"lime\",\"gold\",\"mediumorchid\",\"mediumslateblue\",\"fuchsia\",\"mediumspringgreen\"]\njuly_leg_values=[]\njuly_legend=[]\n\nfor x in range(len(App_Names)):\n    try:\n        july_leg_values.append(App_Errors[0][App_Names[x]])\n        july_legend.append(App_Names[x])\n    except:\n        \"test\"\n\nplt.pie(july_leg_values, labels=july_legend,shadow=True,colors=colors, autopct=\"%1.1f%%\", radius=1.6, explode=(.1,0,0,0,0,0,0,0))\nplt.title(\"July 2017 App Errors\",y=1.3,fontsize=14, fontweight=\"bold\")\n\nplt.savefig(\"./Images/July_App.png\")\n</code></pre>\n\n<p>Examples of what I created vs what is saved as are <a href=\"https://imgur.com/a/6xi02i1\" rel=\"nofollow noreferrer\">here</a>. </p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 3, "last_activity_date": 1556745918, "creation_date": 1556745918, "answer_id": 55942895, "question_id": 55942672, "link": "https://stackoverflow.com/questions/55942672/how-to-automatically-close-the-figure-at-the-end-of-an-animation/55942895#55942895", "title": "How to automatically close the figure at the end of an animation?", "body": "<p>Maybe you want to use the animating function to decide when to close the figure.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.animation as animation\n\nfig = plt.figure()\nax = fig.add_subplot(1, 1, 1)\n\ngrid_size = [10, 10]\ngrid = np.random.randint(low=0, high=256, size=grid_size, dtype=np.uint8)\nim = ax.imshow(grid, cmap='gray', vmin=0, vmax=255)\n\n# Animation settings\ndef animate(frame):\n    if frame == FRAMES_NUM:\n        print(f'{frame} == {FRAMES_NUM}; closing!')\n        plt.close(fig)\n    else:\n        print(f'frame: {frame}') # Debug: May be useful to stop\n        grid = np.random.randint(low=0, high=256, size=grid_size, dtype=np.uint8)\n        im.set_array(grid)\n\nINTERVAL = 100\nFRAMES_NUM = 10\n\nanim = animation.FuncAnimation(fig, animate, interval=INTERVAL, \n                               frames=FRAMES_NUM+1, repeat=False)\n\nplt.show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 15748662, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/80a95a1f99668a0e0ab75e29d0af57b1?s=128&d=identicon&r=PG", "display_name": "Footman_2", "link": "https://stackoverflow.com/users/15748662/footman-2"}, "is_accepted": false, "score": 0, "last_activity_date": 1619238596, "last_edit_date": 1619238596, "creation_date": 1619187947, "answer_id": 67231762, "question_id": 55942672, "link": "https://stackoverflow.com/questions/55942672/how-to-automatically-close-the-figure-at-the-end-of-an-animation/67231762#67231762", "title": "How to automatically close the figure at the end of an animation?", "body": "<p>Inside your animation function use <code>plt.close()</code><br />\nFor example if your last frame plotted was <code>iFrame = 9</code><br />\nthen:</p>\n<pre class=\"lang-py prettyprint-override\"><code>if iFrame == 9:\n    plt.close()\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 2709305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4ef6155be1cb70397a30b3683ed3672?s=128&d=identicon&r=PG&f=1", "display_name": "null", "link": "https://stackoverflow.com/users/2709305/null"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 647, "favorite_count": 0, "accepted_answer_id": 55942895, "answer_count": 2, "score": 2, "last_activity_date": 1619238596, "creation_date": 1556744503, "question_id": 55942672, "link": "https://stackoverflow.com/questions/55942672/how-to-automatically-close-the-figure-at-the-end-of-an-animation", "title": "How to automatically close the figure at the end of an animation?", "body": "<p>I'm trying to display an basic animation using Python and Matplotlib through <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.animation.FuncAnimation.html\" rel=\"nofollow noreferrer\"><code>animation.FuncAnimation()</code></a>. The animation is <strong>non-repeating</strong> and consist in a fixed (and pre-defined) amount of frames with some fixed interval beetween them. It is meant to run once.</p>\n\n<p>Here's how a single random frame is supposed to look like:\n<a href=\"https://i.stack.imgur.com/LrRajm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LrRajm.png\" alt=\"random frame\"></a></p>\n\n<p>The animation runs fine, but the figure doesn't close automatically after calling <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.show.html\" rel=\"nofollow noreferrer\"><code>plt.show()</code></a> since it is a blocking call.</p>\n\n<p>I'm aware that the method <code>plt.show()</code> can be made into non-blocking call by writing <code>plt.show(block=False)</code>, but that doesn't completely solve my problem. I haven't been able to get any information here on StackOverflow and other sites regarding how the library dispose that information of this <strong>event</strong> or so, in order to allow me to call <code>plt.close()</code>.</p>\n\n<p>I'm seaching for a pythonic way of doing this, instead of my current solution which is far from good. Here's my \"solution\":</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport matplotlib.animation as animation\n\nfig = plt.figure()\nax = fig.add_subplot(1, 1, 1)\n\n# Animation settings\ndef animate(frame):\n    grid_size = [10, 10]\n    print('frame: {}'.format(frame)) # Debug: May be useful to stop\n    grid = np.random.randint(low=0, high=256, size=grid_size, dtype=np.uint8)\n    ax.clear()\n    ax.imshow(grid, cmap='gray', vmin=0, vmax=255) # Is the range [0, 255] or [0, 255)?\n\nINTERVAL = 100\nFRAMES_NUM = 10\n\nanim = animation.FuncAnimation(fig, animate, interval=INTERVAL, frames=FRAMES_NUM, repeat=False)\n\nplt.show(block=False)\nplt.pause(float(FRAMES_NUM*INTERVAL)/1000) # Not pythonic\nplt.close(fig)\n</code></pre>\n\n<ol>\n<li>Can anyone show me a pythonic way of doing this?</li>\n<li>Am I doing this all\nwrong?</li>\n</ol>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 660, "user_id": 5649962, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c8be5ef6c04e053aaee8cfed175fba7a?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/5649962/max"}, "edited": false, "score": 0, "creation_date": 1556744459, "post_id": 55942655, "comment_id": 98538496, "body": "No, you can&#39;t because its contained within the same scope, read some here <a href=\"https://pythonspot.com/scope/\" rel=\"nofollow noreferrer\">pythonspot.com/scope</a>"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 11, "creation_date": 1556744522, "post_id": 55942655, "comment_id": 98538509, "body": "If this is the kind of thing that bothers you, you&#39;ll probably also hate the fact that <code>with</code> and <code>except</code> targets are function-scoped and the fact that block scope isn&#39;t a thing in general in Python. You&#39;ll just have to get used to it; block scope isn&#39;t a thing and isn&#39;t likely to become a thing any time soon in Python."}, {"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 0, "creation_date": 1556744824, "post_id": 55942655, "comment_id": 98538615, "body": "But why do you specifically want to do that in the first place?"}, {"owner": {"reputation": 74, "user_id": 5915808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb8b6c97e190cd737b8277d62445a8a6?s=128&d=identicon&r=PG&f=1", "display_name": "pasei", "link": "https://stackoverflow.com/users/5915808/pasei"}, "edited": false, "score": 0, "creation_date": 1556745122, "post_id": 55942655, "comment_id": 98538719, "body": "I have a fairly long code and I&#39;m running out of short name variables. But my scope understanding was wrong so I&#39;ll operate differently next time. Thanks for the answers."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1556748050, "post_id": 55942655, "comment_id": 98539636, "body": "If you&#39;ve got a chunk of code so long you&#39;re running out of short variable names, you should 1) refactor that into functions and 2) <i>stop using short variable names for everything</i>. Use actually descriptive names."}], "answers": [{"tags": [], "owner": {"reputation": 7882, "user_id": 2722968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d0a9ce812892f03b8342c5a60be24632?s=128&d=identicon&r=PG&f=1", "display_name": "user2722968", "link": "https://stackoverflow.com/users/2722968/user2722968"}, "is_accepted": true, "score": 3, "last_activity_date": 1556744562, "creation_date": 1556744562, "answer_id": 55942680, "question_id": 55942655, "link": "https://stackoverflow.com/questions/55942655/in-python-can-i-make-a-for-loop-without-the-loop-variable-overwriting-current-a/55942680#55942680", "title": "In Python, can I make a for loop without the loop variable overwriting current assignment?", "body": "<p>No, this is not possible. The variable will not be shadowed but assigned to the value of each iteration in the loop. The only corner-case where this is not true is the case where the object iterated over raises an exception before yielding a value.</p>\n"}, {"tags": [], "owner": {"reputation": 670, "user_id": 2207618, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/bd1e561856a20d167f7b544cb381d373?s=128&d=identicon&r=PG", "display_name": "danny bee", "link": "https://stackoverflow.com/users/2207618/danny-bee"}, "is_accepted": false, "score": 0, "last_activity_date": 1556744662, "creation_date": 1556744662, "answer_id": 55942691, "question_id": 55942655, "link": "https://stackoverflow.com/questions/55942655/in-python-can-i-make-a-for-loop-without-the-loop-variable-overwriting-current-a/55942691#55942691", "title": "In Python, can I make a for loop without the loop variable overwriting current assignment?", "body": "<p>The variable will be overwritten unless you contain the loop in a different scope</p>\n\n<p>For example, within a function:</p>\n\n<pre><code>x = 999\n\ndef do_stuff():\n  for x in range(10):\n     pass\n\ndo_stuff()\nprint(x)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>999\n</code></pre>\n\n<p>Other than containing the loop in a different scope it's not possible and you will most likely need to rename the variable</p>\n"}, {"tags": [], "owner": {"reputation": 6521, "user_id": 7583953, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w0Jkd.jpg?s=128&g=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/7583953/alec"}, "is_accepted": false, "score": 0, "last_activity_date": 1556744689, "creation_date": 1556744689, "answer_id": 55942699, "question_id": 55942655, "link": "https://stackoverflow.com/questions/55942655/in-python-can-i-make-a-for-loop-without-the-loop-variable-overwriting-current-a/55942699#55942699", "title": "In Python, can I make a for loop without the loop variable overwriting current assignment?", "body": "<p>You can, but only if you put the for loop in a lower scope, like inside of a function</p>\n\n<pre><code>x = 999\ndef func:\n    for x in range(10): pass\nprint(x)  # 999\n</code></pre>\n"}], "owner": {"reputation": 74, "user_id": 5915808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb8b6c97e190cd737b8277d62445a8a6?s=128&d=identicon&r=PG&f=1", "display_name": "pasei", "link": "https://stackoverflow.com/users/5915808/pasei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 55942680, "answer_count": 3, "score": -3, "last_activity_date": 1556744689, "creation_date": 1556744372, "question_id": 55942655, "link": "https://stackoverflow.com/questions/55942655/in-python-can-i-make-a-for-loop-without-the-loop-variable-overwriting-current-a", "title": "In Python, can I make a for loop without the loop variable overwriting current assignment?", "body": "<p>I am using a for loop with a variable that is already used, and the for loop overwrites that previously defined variable. I understand that the easy way would be to use a different variable name, but is there another way?</p>\n\n<pre><code>x = 999\n\nfor x in range(10):\n    pass\n\nprint(x)\n</code></pre>\n\n<blockquote>\n  <blockquote>\n    <p>9</p>\n  </blockquote>\n</blockquote>\n"}, {"tags": ["python", "numpy", "for-loop"], "owner": {"reputation": 69, "user_id": 11186297, "user_type": "registered", "profile_image": "https://graph.facebook.com/2321880048137830/picture?type=large", "display_name": "Michelle Hernandez", "link": "https://stackoverflow.com/users/11186297/michelle-hernandez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556744853, "creation_date": 1556743876, "question_id": 55942571, "link": "https://stackoverflow.com/questions/55942571/how-to-rearrange-3d-array", "title": "How to rearrange 3D array", "body": "<p>I have a 3D array and I want to rearrange them so each position in each dimension still corresponds to the next dimension, but the order of all 3 are changed.</p>\n\n<p>I have a 3D array: </p>\n\n<p><code>array = [32,30,96]</code>\nThe third dimension with 96 values I already ranked ordered to find that :</p>\n\n<p><code>ranks = [57 23 68 58 25 91 70 83 77 75 89 34 49 79 66 54 67 44 63 52 46 20 64 10 80 33 30 29 28 26 17 27 50 51 92 86 69 47  0  7  3 85 18 11 13 53  8 78 82 81 14 74 59 32 42 39  1 31 36 19 24  5 38  9 73 71 76 87 41 55 94 93 84 16 90 62 48 43 72 95 65 45 61 22 21 15 37 88  2 40 56  6 12 60  4 35]</code></p>\n\n<p>I want to rearrange the whole 3D array to reflect the rank order. SO I still want the same association across the array, but in a different order. </p>\n\n<p>So i want a new array that has the same dimensions, newarray=[32,30,96] but where its order based off the last dimension so [32,30,ranks] i don't care about the specific value, position 0 doesn't have to become 57, I want all the data corresponding to position 57 to now be position 0</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1556744023, "post_id": 55942538, "comment_id": 98538355, "body": "always add tag <code>python</code> and then code will be highlighted."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1556744154, "post_id": 55942538, "comment_id": 98538387, "body": "<code>personal_data_frame</code> is local variable created in <code>personal_data</code> so it doesn&#39;t exists in other functions. You should get different error. You have to use <code>global personal_data_frame</code> inside <code>personal_data</code> to assign <code>Frame</code> to global variable and then it can be used in other functions."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1556744387, "post_id": 55942538, "comment_id": 98538475, "body": "<code>Frame</code> doesn&#39;t have option <code>weight</code>. Create minimal working code which has problem only with <code>object has no attribute grid_forget</code>."}, {"owner": {"reputation": 1, "user_id": 11438861, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SfIPTyk_u2s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHzTS42kqNzV6hO9vIqgqVMdqfPA/mo/photo.jpg?sz=128", "display_name": "Connor Thompson", "link": "https://stackoverflow.com/users/11438861/connor-thompson"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1556745946, "post_id": 55942538, "comment_id": 98539032, "body": "Thanks for the information about weight aswell"}], "answers": [{"tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": false, "score": 0, "last_activity_date": 1556744968, "creation_date": 1556744968, "answer_id": 55942738, "question_id": 55942538, "link": "https://stackoverflow.com/questions/55942538/having-an-error-with-grid-forget-where-it-cant-find-the-attribute/55942738#55942738", "title": "Having an error with grid_forget() where it cant find the attribute", "body": "<p>Your code has many mistakes and it doesn't gives error <code>AttributeError: object has no attribute grid_forget</code> </p>\n\n<p>My example has no problem with removing <code>Frame</code>. It assigns <code>Frame</code> to global variable and then other function has access to this <code>Frame</code> and it can remove it.</p>\n\n<pre><code>import tkinter as tk\nimport tkinter.ttk as ttk\n\ndef input_data():\n    personal_data_frame.grid_forget()\n    input_data_frame = ttk.LabelFrame(root)#, weight=0) # ERROR\n    input_data_frame.grid(row=1, column=0, sticky=\"NSWE\")#, weight=1) # ERROR\n\ndef personal_data():\n    global personal_data_frame\n\n    personal_data_frame = ttk.Frame(root)#, weight=1) # ERROR\n    personal_data_frame.grid(row=1, column=0)\n\nroot = tk.Tk()\npersonal_data()\ninput_data()\nroot.mainloop()\n</code></pre>\n\n<hr>\n\n<p>You may have problem <code>AttributeError: object has no attribute grid_forget</code> if you assign something different then tkinter's widget to <code>personal_data_frame</code> - ie. string,  <code>object()</code>, etc.</p>\n\n<p>This code shows error <code>AttributeError: object has no attribute grid_forget</code> because I assign <code>object()</code> to <code>personal_data_frame</code> after <code>personal_data()</code> and <code>object()</code> doesn't have method <code>grid_forget()</code></p>\n\n<pre><code>import tkinter as tk\nimport tkinter.ttk as ttk\n\ndef input_data():\n    personal_data_frame.grid_forget()\n    input_data_frame = ttk.LabelFrame(root)#, weight=0) # ERROR\n    input_data_frame.grid(row=1, column=0, sticky=\"NSWE\")#, weight=1) # ERROR\n\ndef personal_data():\n    global personal_data_frame\n\n    personal_data_frame = ttk.Frame(root)#, weight=1) # ERROR\n    personal_data_frame.grid(row=1, column=0)\n\n\nroot = tk.Tk()\npersonal_data()\npersonal_data_frame = object()\ninput_data()\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11438861, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SfIPTyk_u2s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdHzTS42kqNzV6hO9vIqgqVMdqfPA/mo/photo.jpg?sz=128", "display_name": "Connor Thompson", "link": "https://stackoverflow.com/users/11438861/connor-thompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1556744968, "creation_date": 1556743713, "last_edit_date": 1556744006, "question_id": 55942538, "link": "https://stackoverflow.com/questions/55942538/having-an-error-with-grid-forget-where-it-cant-find-the-attribute", "title": "Having an error with grid_forget() where it cant find the attribute", "body": "<p>Im doing a small project using tkinter to have a window that has a changing middle frame</p>\n\n<pre><code>    import tkinter as tk\n    root = tk.Tk()\n\n\n    def input_data():\n      personal_data_frame.grid_forget()\n      input_data_frame = ttk.LabelFrame(root, weight=0)\n      input_data_frame.grid(row=1, column=0, sticky=\"NSWE\", weight=1)\n\n    def personal_data():\n      personal_data_frame = ttk.Frame(root, weight=1)\n      personal_data_frame.grid(row=1, column=0)\n    personal_data()\n    input_data()\n</code></pre>\n\n<p>So with this for me it can not seem to remove the personal data frame (I have some widgets in the frame I just took them out for simplicity) </p>\n\n<p>The error I get is \"AttributeError: object has no attribute grid_forget\"\nI am almost completely new to tkinter in general but I don't plan on giving up</p>\n"}, {"tags": ["python", "class", "oop", "object"], "comments": [{"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1556744193, "post_id": 55942530, "comment_id": 98538399, "body": "There&#39;s no code here that <i>displays</i> a full name. Your <code>employee</code> class has a function which returns a string. It&#39;s really more of a property, since it doesn&#39;t actually <i>do</i> anything."}, {"owner": {"reputation": 10928, "user_id": 1358308, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/d9448dee25fd2278def77cb7f0353574?s=128&d=identicon&r=PG", "display_name": "Sam Mason", "link": "https://stackoverflow.com/users/1358308/sam-mason"}, "edited": false, "score": 0, "creation_date": 1556744838, "post_id": 55942530, "comment_id": 98538623, "body": "also note you can mark methods like <code>emp_fullname</code> with <a href=\"https://stackoverflow.com/q/17330160/1358308\"><code>@property</code></a> which might end up closer to what you&#39;re expecting"}, {"owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "edited": false, "score": 0, "creation_date": 1556745349, "post_id": 55942530, "comment_id": 98538800, "body": "I think language can be tricky here. If the methods belong to the object you can say the actions are being done by the object, whereas if they are external methods or functions you can say they act on the object. Of course in the first case, the object may act on itself too."}, {"owner": {"reputation": 87, "user_id": 11431359, "user_type": "registered", "profile_image": "https://graph.facebook.com/2096619430393463/picture?type=large", "display_name": "Chyanit Singh", "link": "https://stackoverflow.com/users/11431359/chyanit-singh"}, "edited": false, "score": 0, "creation_date": 1556775814, "post_id": 55942530, "comment_id": 98545175, "body": "What does it mean that the type of an object determines the operations that an object supports in python can you please clarify with an example"}], "answers": [{"tags": [], "owner": {"reputation": 147, "user_id": 7724517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e22b1ad0b529f24e03b30be02702705?s=128&d=identicon&r=PG&f=1", "display_name": "cpcolella", "link": "https://stackoverflow.com/users/7724517/cpcolella"}, "is_accepted": false, "score": 0, "last_activity_date": 1556744191, "creation_date": 1556744191, "answer_id": 55942625, "question_id": 55942530, "link": "https://stackoverflow.com/questions/55942530/i-am-a-bit-confused-about-the-behaviour-of-objects-in-oop/55942625#55942625", "title": "I am a bit confused about the behaviour of objects in OOP", "body": "<p>Methods are performed by or on an object. It doesn't have to be one or the other. <code>GetFullName()</code> and <code>SetFullName(first,last)</code> are both methods. The former is performed by the object; like a dog barking, it gives you something. The latter is performed on the object like when you name your new dog or give it a bone.</p>\n\n<p>This question may or may not help you understand what a method is:\n<a href=\"https://stackoverflow.com/questions/155609/whats-the-difference-between-a-method-and-a-function\">What&#39;s the difference between a method and a function?</a></p>\n"}, {"comments": [{"owner": {"reputation": 87, "user_id": 11431359, "user_type": "registered", "profile_image": "https://graph.facebook.com/2096619430393463/picture?type=large", "display_name": "Chyanit Singh", "link": "https://stackoverflow.com/users/11431359/chyanit-singh"}, "edited": false, "score": 0, "creation_date": 1556809436, "post_id": 55949419, "comment_id": 98562381, "body": "can you please explain this in simple terms &quot;The operations would depend on the state of the object and the nature of the event. Sometimes an event contains a &quot;snapshot&quot; of the current overall state of the system that gives a context for the object operations to execute. Note that whatever the object does, it does not affect its external context&quot; Thank you so much for your answer"}, {"owner": {"reputation": 571, "user_id": 9053225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e02cf834b2d31955b0824a3eb33db2?s=128&d=identicon&r=PG", "display_name": "RWRkeSBZ", "link": "https://stackoverflow.com/users/9053225/rwrkesbz"}, "reply_to_user": {"reputation": 87, "user_id": 11431359, "user_type": "registered", "profile_image": "https://graph.facebook.com/2096619430393463/picture?type=large", "display_name": "Chyanit Singh", "link": "https://stackoverflow.com/users/11431359/chyanit-singh"}, "edited": false, "score": 0, "creation_date": 1556814575, "post_id": 55949419, "comment_id": 98565106, "body": "The effect of an operation would depend on the state of the object: for example, if you have an upper limit for salary, your operation would not yield any change if that limit is reached when you call <code>set_raise</code>. An event would contain a snapshot...: your object knows only about itself, so when a method is invoked as a result of an event, it is passed arguments that represent a snapshot of the context. An object does not affect its external context: the object itself <i>may</i> change when its method is invoked, but it cannot change its external context."}], "tags": [], "owner": {"reputation": 571, "user_id": 9053225, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39e02cf834b2d31955b0824a3eb33db2?s=128&d=identicon&r=PG", "display_name": "RWRkeSBZ", "link": "https://stackoverflow.com/users/9053225/rwrkesbz"}, "is_accepted": true, "score": 3, "last_activity_date": 1556789282, "creation_date": 1556789282, "answer_id": 55949419, "question_id": 55942530, "link": "https://stackoverflow.com/questions/55942530/i-am-a-bit-confused-about-the-behaviour-of-objects-in-oop/55949419#55949419", "title": "I am a bit confused about the behaviour of objects in OOP", "body": "<p>The behaviour of an object is always in response to an external stimulus. In OO, a message is broadcast by \"something\" and your object responds in some way. If the message is a request for information, it would trigger the knowledge responsibility of the object; if the message is an event or a request to do something, it would trigger a behaviour responsibility. The operations would depend on the state of the object and the nature of the event. Sometimes an event contains a \"snapshot\" of the current overall state of the system that gives a context for the object operations to execute. Note that whatever the object does, it does not affect its external context.</p>\n\n<p>There is a third responsibility which is to provide a service. Most OOP programming actually caters for services, which are just transforms of the contexts passed to them without any effect on the objects themselves. There is very little behaviour or knowledge responsibility in them.</p>\n\n<p>In your <code>employee</code> class, you have both knowledge and behaviour responsibilities. An instance of the class would be able to respond to a request for the full name of the employee and to \"behave\" in such a way as to change its internal state, that is, getting a new salary. The only thing I would change is renaming <code>set_raise</code> to <code>raise_salary</code> to make it look less of a setter method. </p>\n"}], "owner": {"reputation": 87, "user_id": 11431359, "user_type": "registered", "profile_image": "https://graph.facebook.com/2096619430393463/picture?type=large", "display_name": "Chyanit Singh", "link": "https://stackoverflow.com/users/11431359/chyanit-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 55949419, "answer_count": 2, "score": 2, "last_activity_date": 1556789282, "creation_date": 1556743645, "last_edit_date": 1556743770, "question_id": 55942530, "link": "https://stackoverflow.com/questions/55942530/i-am-a-bit-confused-about-the-behaviour-of-objects-in-oop", "title": "I am a bit confused about the behaviour of objects in OOP", "body": "<p>I have read that behavior of an object is the action performed by the object(in real life situation) but in programming, context is it not the <strong>operation/action performed on the object</strong> as described by the method.</p>\n\n<p>For example in the code below we have a method to display the full name of the employee. In this case, the action is performed by the object or is it the action is performed on the object?. How can displaying full name be a behavior of an object when we compare it to the behavior of a dog object(Like barking, sleeping, etc). Thanks for your help</p>\n\n<pre><code>class employee:\n\n    raise_value=1.05\n    def __init__(self,first,last,pay):\n\n        self.first=first\n        self.last=last\n        self.pay=pay\n\n    def emp_fullname(self):\n        return \"Full name is {} {}\".format(self.first,self.last)\n\n    def set_raise(self):\n        self.new_sal=float(self.pay)*employee.raise_value\n        return 'My new salary is {}'.format(self.new_sal)\n\ne1=employee(\"Chyanit\",\"Singh\",\"60000\")\ne2=employee(\"Parag\",\"Singh\",\"40000\")\n\ne1.emp_fullname()\n</code></pre>\n"}, {"tags": ["python", "multidimensional-array", "boolean"], "comments": [{"owner": {"reputation": 47115, "user_id": 235354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097d761861529df52a6800744f1074d2?s=128&d=identicon&r=PG", "display_name": "jspcal", "link": "https://stackoverflow.com/users/235354/jspcal"}, "edited": false, "score": 0, "creation_date": 1556743899, "post_id": 55942513, "comment_id": 98538313, "body": "Hi, the outer list contains 4 elements that are all the same instance, so modifying one will cause the other elements to reflect the change as well. <code>[False]*3</code> is a single list of 3 elements which is then inserted 4 times into the outer array."}, {"owner": {"reputation": 47115, "user_id": 235354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097d761861529df52a6800744f1074d2?s=128&d=identicon&r=PG", "display_name": "jspcal", "link": "https://stackoverflow.com/users/235354/jspcal"}, "edited": false, "score": 0, "creation_date": 1556744264, "post_id": 55942513, "comment_id": 98538427, "body": "Because he only modified the last element of the sublist - <code>arr[1][2] = True</code>."}], "answers": [{"comments": [{"owner": {"reputation": 35013, "user_id": 626853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ILPj4.jpg?s=128&g=1", "display_name": "Aasmund Eldhuset", "link": "https://stackoverflow.com/users/626853/aasmund-eldhuset"}, "reply_to_user": {"reputation": 11, "user_id": 11438873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88bb85a1e265a5d97e8d722d677ddf47?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/11438873/jim"}, "edited": false, "score": 0, "creation_date": 1556744022, "post_id": 55942550, "comment_id": 98538354, "body": "The most compact one I know about is to use a comprehension: <code>[[False] * 3 for i in range(4)]</code>"}, {"owner": {"reputation": 11, "user_id": 11438873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88bb85a1e265a5d97e8d722d677ddf47?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/11438873/jim"}, "edited": false, "score": 0, "creation_date": 1556744234, "post_id": 55942550, "comment_id": 98538417, "body": "Thank you!  and this applies to everything, lets say  arr = [[1]*3]*4 as well, correct? Not just bool.  This should also be written as arr = [[1]*3 for _ in range(4)]?  didn&#39;t expect that, as arr = [1]*3 works fine"}, {"owner": {"reputation": 35013, "user_id": 626853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ILPj4.jpg?s=128&g=1", "display_name": "Aasmund Eldhuset", "link": "https://stackoverflow.com/users/626853/aasmund-eldhuset"}, "reply_to_user": {"reputation": 11, "user_id": 11438873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88bb85a1e265a5d97e8d722d677ddf47?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/11438873/jim"}, "edited": false, "score": 1, "creation_date": 1556744620, "post_id": 55942550, "comment_id": 98538547, "body": "<code>[1] * 3</code> also creates three references to the <i>same</i> <code>1</code>. But numbers are immutable. If they weren&#39;t, you&#39;d see that changing one would change all. What you&#39;re changing when you do <code>arr[0] = 3</code> is not the number itself, but what the array&#39;s element 0 refers to."}, {"owner": {"reputation": 35013, "user_id": 626853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ILPj4.jpg?s=128&g=1", "display_name": "Aasmund Eldhuset", "link": "https://stackoverflow.com/users/626853/aasmund-eldhuset"}, "reply_to_user": {"reputation": 11, "user_id": 11438873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88bb85a1e265a5d97e8d722d677ddf47?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/11438873/jim"}, "edited": false, "score": 1, "creation_date": 1556744660, "post_id": 55942550, "comment_id": 98538559, "body": "<code>arr[0][0]</code> also changes what element 0 of the innermost array refers to (so the other elements in the inner array don&#39;t change), but all the elements of the outer array refer to the same inner array."}], "tags": [], "owner": {"reputation": 35013, "user_id": 626853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ILPj4.jpg?s=128&g=1", "display_name": "Aasmund Eldhuset", "link": "https://stackoverflow.com/users/626853/aasmund-eldhuset"}, "is_accepted": false, "score": 0, "last_activity_date": 1556743794, "creation_date": 1556743794, "answer_id": 55942550, "question_id": 55942513, "link": "https://stackoverflow.com/questions/55942513/why-is-it-that-when-i-set-one-element-arrij-in-a-2d-bool-array-to-true-al/55942550#55942550", "title": "Why is it that when I set one element (arr[i][j]) in a 2d bool array to True, all the j&#39;s set to True as well?", "body": "<p>You should not create multidimensional arrays with the <code>*</code> syntax. What happens is that <code>[False]*3</code> is evaluated first, creating a list with three elements that each refer to the immutable value <code>False</code>, but then the outer <code>[]*4</code> creates a list of four elements that all refer to the <em>same</em> three-element list. Instead, create an empty list, and use a loop to repeatedly append <code>[False]*3</code> to the list - that will reevaluate <code>[False]*3</code> every time, creating distinct inner lists.</p>\n"}], "owner": {"reputation": 11, "user_id": 11438873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88bb85a1e265a5d97e8d722d677ddf47?s=128&d=identicon&r=PG&f=1", "display_name": "Jim", "link": "https://stackoverflow.com/users/11438873/jim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "closed_date": 1556743822, "answer_count": 1, "score": 0, "last_activity_date": 1556743794, "creation_date": 1556743533, "last_edit_date": 1556743635, "question_id": 55942513, "link": "https://stackoverflow.com/questions/55942513/why-is-it-that-when-i-set-one-element-arrij-in-a-2d-bool-array-to-true-al", "closed_reason": "Duplicate", "title": "Why is it that when I set one element (arr[i][j]) in a 2d bool array to True, all the j&#39;s set to True as well?", "body": "<p>I initialized a 2d array and set all the elements to <code>False</code>. Then in my code I want to switch certain elements to <code>True</code> if conditions are met. However, <code>arr[i][j] = True</code> sets ALL j elements in <code>arr</code> to <code>True</code>. Why is that, and what is the correct syntax?</p>\n\n<pre><code>arr = [[False]*3]*4\nprint(arr)\narr[1][2] = True\nprint(arr)\n</code></pre>\n\n<p>This gives</p>\n\n<p>[[False, False, False], [False, False, False], [False, False, False], [False, False, False]]</p>\n\n<p>which is what we expected, and then</p>\n\n<p>[[False, False, True], [False, False, True], [False, False, True], [False, False, True]]</p>\n\n<p>where all the arr[i][2]'s are set to True, instead of just arr[1][2]</p>\n"}, {"tags": ["python", "api"], "comments": [{"owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "edited": false, "score": 0, "creation_date": 1556743789, "post_id": 55942495, "comment_id": 98538266, "body": "The code worked for me. Make sure you&#39;re using Python 3.4 or later."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1556743815, "post_id": 55942495, "comment_id": 98538279, "body": "That error message implies that you have a file in your local directory named <code>usda.py</code> (or perhaps <code>usda.pyc</code>)."}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1556744839, "post_id": 55942495, "comment_id": 98538624, "body": "According to <a href=\"https://python-usda.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">the docs</a> this should read <code>from usda import UsdaClient</code>"}, {"owner": {"reputation": 7, "user_id": 2074544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f79fa3e1f803a3b41d801859ce35210e?s=128&d=identicon&r=PG", "display_name": "Sid Khullar", "link": "https://stackoverflow.com/users/2074544/sid-khullar"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1556770669, "post_id": 55942495, "comment_id": 98543825, "body": "Thank you @John Gordon. I&#39;m quite new to Python and had named my file &#39;usda.py&#39;. Renaming the file worked. Would you be so kind as to deconstruct the error for me please?"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1556810070, "post_id": 55942495, "comment_id": 98562711, "body": "Imports generally look in the current directory first, so it found your local file <code>usda.py</code>, which of course did not contain the <code>client</code> submodule."}], "owner": {"reputation": 7, "user_id": 2074544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f79fa3e1f803a3b41d801859ce35210e?s=128&d=identicon&r=PG", "display_name": "Sid Khullar", "link": "https://stackoverflow.com/users/2074544/sid-khullar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556752530, "creation_date": 1556743423, "last_edit_date": 1556752530, "question_id": 55942495, "link": "https://stackoverflow.com/questions/55942495/python-usda-client-throwing-package-error-what-is-the-right-package-name", "title": "Python-USDA client throwing package error. What is the right package name?", "body": "<p>I'm trying to connect to the USDA API using python-usda, using the following process as mentioned in the PyPI docs.</p>\n\n<p>Installing with <code>pip install python-usda</code> and then importing with <code>from usda.client import UsdaClient</code>.</p>\n\n<p>This throws an error:</p>\n\n<pre><code>from usda.client import UsdaClient\nModuleNotFoundError: No module named 'usda.client'; 'usda' is not a package\n</code></pre>\n\n<p>What package should I be trying to import?</p>\n"}, {"tags": ["python", "tensorflow", "neural-network"], "comments": [{"owner": {"reputation": 670, "user_id": 4947590, "user_type": "registered", "profile_image": "https://graph.facebook.com/877401908985892/picture?type=large", "display_name": "Joy Mazumder", "link": "https://stackoverflow.com/users/4947590/joy-mazumder"}, "edited": false, "score": 0, "creation_date": 1556764043, "post_id": 55942491, "comment_id": 98542604, "body": "I am not 100% sure. Try this sess.run([self.train, tf.contrib.framework.get_global_step(), self.train, self.loss], feed_dict)"}, {"owner": {"reputation": 9, "user_id": 11438818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/181029550baf8e6bb3d7333bf39e8cd8?s=128&d=identicon&r=PG&f=1", "display_name": "DoubleCookie16", "link": "https://stackoverflow.com/users/11438818/doublecookie16"}, "reply_to_user": {"reputation": 670, "user_id": 4947590, "user_type": "registered", "profile_image": "https://graph.facebook.com/877401908985892/picture?type=large", "display_name": "Joy Mazumder", "link": "https://stackoverflow.com/users/4947590/joy-mazumder"}, "edited": false, "score": 0, "creation_date": 1556776562, "post_id": 55942491, "comment_id": 98545423, "body": "Cheers, but it sadly still throws TypeError: Fetch argument None has invalid type &lt;class &#39;NoneType&#39;&gt;"}, {"owner": {"reputation": 9, "user_id": 11438818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/181029550baf8e6bb3d7333bf39e8cd8?s=128&d=identicon&r=PG&f=1", "display_name": "DoubleCookie16", "link": "https://stackoverflow.com/users/11438818/doublecookie16"}, "reply_to_user": {"reputation": 670, "user_id": 4947590, "user_type": "registered", "profile_image": "https://graph.facebook.com/877401908985892/picture?type=large", "display_name": "Joy Mazumder", "link": "https://stackoverflow.com/users/4947590/joy-mazumder"}, "edited": false, "score": 0, "creation_date": 1556791526, "post_id": 55942491, "comment_id": 98552394, "body": "Concerning my update-the-neural-net-problem: I removed the update statements for now since I don&#39;t get it to work. I fixed the random seeds, so every one with the same parameters has the same results (doublechecked it). but if I then change my game implementation a small bit (changen the max number of ressource allowed), I get a small change in the result (= chosen actions in the last epoch differ 10%). Since the game is not consuming any Randoms, this leeds my to the conclusion that there already is an affect from the results to the neural network. But how?"}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 11438818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/181029550baf8e6bb3d7333bf39e8cd8?s=128&d=identicon&r=PG&f=1", "display_name": "DoubleCookie16", "link": "https://stackoverflow.com/users/11438818/doublecookie16"}, "is_accepted": false, "score": 0, "last_activity_date": 1556807576, "creation_date": 1556807576, "answer_id": 55954697, "question_id": 55942491, "link": "https://stackoverflow.com/questions/55942491/tensorflow-how-to-train-neuralnet/55954697#55954697", "title": "Tensorflow: how to train NeuralNet?", "body": "<p>ok, basicly i didn't get that </p>\n\n<pre><code>self.train = tf.train.GradientDescentOptimizer(self.decent_pl[0]).minimize(self.loss)\n</code></pre>\n\n<p>is setting the <em>method</em> \"train\" and sess.run calls the method with parameters.\nso i wrote a new learn method that works basicly.</p>\n\n<pre><code>def learn(self, sess, sta, vicp, dec):\n    sta = np.expand_dims(sta, 0)\n    vicp = np.expand_dims(vicp, 0)\n    dec = np.expand_dims(dec, 0)\n    sess.run(self.train, feed_dict={self.x_pl: sta, self.y_pl: vicp, self.decent_pl: dec})\n</code></pre>\n\n<p>the AI still acts stupid and often converges to 0 points, but that mus be my mistake probably at some other point.</p>\n"}], "owner": {"reputation": 9, "user_id": 11438818, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/181029550baf8e6bb3d7333bf39e8cd8?s=128&d=identicon&r=PG&f=1", "display_name": "DoubleCookie16", "link": "https://stackoverflow.com/users/11438818/doublecookie16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1556807576, "creation_date": 1556743410, "question_id": 55942491, "link": "https://stackoverflow.com/questions/55942491/tensorflow-how-to-train-neuralnet", "title": "Tensorflow: how to train NeuralNet?", "body": "<p>I am inspired by the possibilities of TensorFlow and want to  write a AI with a Neural Net that is optimizing a strategy fpr a single player board game. I get the code running, but the strategies are not improving. My Game impelmentation seems to be working fine. (its simple right now: get a ressource A, or a ressource B, or exchange al ressource for victoryPoints, so the smart thing would be to accumalate some ressources that exchange them.)\nI guess I am not training the model.</p>\n\n<p>I tried understanding code examples, but it's just a bit much for a python starter. \nSo what I know is I want to have a model which is evalutating a state, so it gets a state as an input, and the output is just one value: how good the state is, so how many vistory points are expected to be scored.\nThis I use to forecast the next ~3 rounds and then pick the action that leads to the best result in ~3 rounds accourding to the NeuralNetwork (and in the beginning a random selection is used instead, getting less); and start all over.\nI am really unsure how this \"predict\" (I think thats an evaluation) and \"update\" (I hope thats a training) is supposed to work.</p>\n\n<pre><code>class NeuralNet():\ndef __init__(self):\n     # Placeholders for inputs (x) and outputs(y)\n\n    self.x_pl = tf.placeholder(tf.float32, shape=[None, game.getStateSize(game())], name='X')\n    self.y_pl = tf.placeholder(shape=[None], dtype=tf.float32, name=\"y\")\n\n    self.fc1 = tf.contrib.layers.fully_connected(self.x_pl, 64)\n    self.fc2 = tf.contrib.layers.fully_connected(self.fc1, 64)\n    self.output = tf.contrib.layers.fully_connected(self.fc2, 1)\n    self.value = self.output[0]\n\n    self.loss = tf.reduce_sum(tf.square(self.y_pl-self.output))\n\n    self.train = tf.train.GradientDescentOptimizer(1.0).minimize(self.loss)\n\ndef predict(self, sess, s):\n    \"\"\"\n    Predicts value of state(?).\n    Args:\n      sess: Tensorflow session\n      s: State input of shape [batch_size, 4, 160, 160, 3]\n    Returns:\n      Tensor containing the estimated\n      state value.\n    \"\"\"\n    s = np.expand_dims(s, 0)\n    return sess.run(self.value, {self.x_pl: s})\n\ndef update(self, sess, s, y):\n    \"\"\"\n    Updates the NeuralNet so its predicting better(?).\n    Args:\n      sess: Tensorflow session object\n      s: State of game\n      y: VictoryPoints Actualy Earned at the end\n    Returns:\n      nothing yet\n    \"\"\"\n    s = np.expand_dims(s, 0)\n    y = np.expand_dims(y, 0)\n    feed_dict = {self.x_pl: s, self.y_pl: y}\n    sess.run([WHAT_TO_PUT_HERE, tf.contrib.framework.get_global_step(), self.train, self.loss], feed_dict)\n</code></pre>\n\n<p>in the main class the following is called:</p>\n\n<pre><code>with tf.Session() as sess:\nsess.run(tf.global_variables_initializer())\ndeep_q_learning(sess)\n</code></pre>\n\n<p>and then i am basicly going through the many epochs/episodes and playing one game each epoch. for the predictions I need there I use</p>\n\n<pre><code>neurnet.predict(sess, g.getGameState())\n</code></pre>\n\n<p>and I am trying to use</p>\n\n<pre><code>nn.update(sess, state, game.points)\n</code></pre>\n\n<p>at the end of an epoch to update, but that doesn't work technicly right now (TypeError: Fetch argument None has invalid type ).\n(\n\n<p>As without the update-line, the code runs through but the strategies are so bad it hardly scores any victory points (I guess random strategies would be better). (\n\n<p>Thank you very much for your help in advance!</p>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 3140836, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3fcf2e45a079a68820c3f8f13799b8cc?s=128&d=identicon&r=PG&f=1", "display_name": "eTothEipiPlus1", "link": "https://stackoverflow.com/users/3140836/etotheipiplus1"}, "edited": false, "score": 0, "creation_date": 1556808195, "post_id": 55943235, "comment_id": 98561640, "body": "Thanks for taking time to answer this bhavin. I&#39;m running from the master node. SPARK_HOME is /opt/spark/spark-2.4.0-bin-hadoop2.7 and this should be correct based on installation instructions. But I&#39;m still getting the error described in my question. I&#39;ll look into the configurations you outline. Do you have a good source to get started (like a good tutorial explaining these configs)? I&#39;m already using pyspark dataframes. My question is can I still distribute a computation using dataframes or do I need to use RDDs?"}, {"owner": {"reputation": 102, "user_id": 3897276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hRWeF.jpg?s=128&g=1", "display_name": "bhavin", "link": "https://stackoverflow.com/users/3897276/bhavin"}, "reply_to_user": {"reputation": 367, "user_id": 3140836, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3fcf2e45a079a68820c3f8f13799b8cc?s=128&d=identicon&r=PG&f=1", "display_name": "eTothEipiPlus1", "link": "https://stackoverflow.com/users/3140836/etotheipiplus1"}, "edited": false, "score": 0, "creation_date": 1556893281, "post_id": 55943235, "comment_id": 98594189, "body": "here are few  1  excel to calculate core etc | <a href=\"https://c2fo.io/c2fo/spark/aws/emr/2016/07/06/apache-spark-config-cheatsheet/\" rel=\"nofollow noreferrer\">c2fo.io/c2fo/spark/aws/emr/2016/07/06/&hellip;</a>. i had used this one to tune [snowplow] (<a href=\"https://snowplowanalytics.com/\" rel=\"nofollow noreferrer\">snowplowanalytics.com</a>) processing.  2. <a href=\"https://stackoverflow.com/questions/37871194/how-to-tune-spark-executor-number-cores-and-executor-memory\" title=\"how to tune spark executor number cores and executor memory\">stackoverflow.com/questions/37871194/&hellip;</a>"}], "tags": [], "owner": {"reputation": 102, "user_id": 3897276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hRWeF.jpg?s=128&g=1", "display_name": "bhavin", "link": "https://stackoverflow.com/users/3897276/bhavin"}, "is_accepted": false, "score": -2, "last_activity_date": 1556748092, "creation_date": 1556748092, "answer_id": 55943235, "question_id": 55942430, "link": "https://stackoverflow.com/questions/55942430/utilizing-spark-on-a-multi-node-cluster-with-pyspark/55943235#55943235", "title": "Utilizing Spark on a multi-node cluster with pyspark", "body": "<p>depends where you are running the script from.\nare you trying to run it form your laptop or master node.</p>\n\n<ul>\n<li><p>run from master node: you will have to set the SPARK_HOME env variable to  point to your spark lib installation.</p></li>\n<li><p>if you are running from ur laptop:</p></li>\n<li><p>make sure SPARK_HOME points to right lib.</p></li>\n<li>copy all the configs from :~/SPARK_HOME to your local SPARK_HOME</li>\n</ul>\n\n<p>followup Q1: this is tricky because you can run bot slaves and master on the same node. and configure spark to operate in master-slave config.</p>\n\n<p>configuring spark for optimized performance: \nalthough spark configuration out of the box is pretty good. but to optimized its performance you would have to tweak few properties specially \n 1. spark.executor.cores\n 2. spark.executor.memory\n 3. spark.driver.cores\n 4. spark.driver.memory</p>\n\n<p>additionally, you want your cluster to be as close together as possible , meaning in the same placement-groups. although not required use hdfs when working with large datasets and save intermediate results on hdfs. you might also want to use resource manager ( again not required , spark comes with one ) like yarn. ( this also come with additional config tuning ).</p>\n\n<p>if you find urself shipping data to slaves and also use more shuffle operations. then you want to consider using a good <a href=\"https://spark.apache.org/docs/latest/tuning.html\" rel=\"nofollow noreferrer\">serializer </a></p>\n\n<p>follow up Q2: well, you would generally not ship all the data from master to the slaves, but have salves build the data on their own. for that you you have to put ur data in x no of small files and let slaves read them via read apis.</p>\n\n<p>do I need to rewrite code to use RDD? this depend on the version of spark you are using. dataframe were introduced in 2.0.</p>\n"}], "owner": {"reputation": 367, "user_id": 3140836, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3fcf2e45a079a68820c3f8f13799b8cc?s=128&d=identicon&r=PG&f=1", "display_name": "eTothEipiPlus1", "link": "https://stackoverflow.com/users/3140836/etotheipiplus1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 969, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556748092, "creation_date": 1556743024, "last_edit_date": 1556744496, "question_id": 55942430, "link": "https://stackoverflow.com/questions/55942430/utilizing-spark-on-a-multi-node-cluster-with-pyspark", "title": "Utilizing Spark on a multi-node cluster with pyspark", "body": "<p>I've set up Spark on a multi-node cluster as explained in this article: <a href=\"https://medium.com/ymedialabs-innovation/apache-spark-on-a-multi-node-cluster-b75967c8cb2b\" rel=\"nofollow noreferrer\">https://medium.com/ymedialabs-innovation/apache-spark-on-a-multi-node-cluster-b75967c8cb2b</a></p>\n\n<p>I verified that the workers are all in the \"ALIVE\" state using the web UI: <a href=\"http://MASTER-IP:8080/\" rel=\"nofollow noreferrer\">http://MASTER-IP:8080/</a></p>\n\n<p>I also tested that I can start the spark shell, execute Scala commands and see the job results at <a href=\"http://MASTER-HOSTNAME:4041\" rel=\"nofollow noreferrer\">http://MASTER-HOSTNAME:4041</a>.</p>\n\n<p>In Python, I'm able to create a pyspark context without specifying the master OR by setting the master to <code>local[*]</code>. Below is the basic Python script I created for testing.</p>\n\n<pre><code># spark-basic.py\nfrom pyspark import SparkConf\nfrom pyspark import SparkContext\n\nconf = SparkConf()\n#conf.setMaster('spark://&lt;MASTER-HOSTNAME&gt;:7077')\nconf.setMaster('local[*]')\nconf.setAppName('spark-basic')\nsc = SparkContext(conf=conf)\n\ndef mod(x):\n    import numpy as np\n    return (x, np.mod(x, 2))\n\nrdd = sc.parallelize(range(1000)).map(mod).take(10)\nprint(rdd)\n</code></pre>\n\n<p>Why can I not set the master to <code>'spark://&lt;MASTER-HOSTNAME&gt;:7077'</code> as described in many online tutorials such as <a href=\"https://docs.anaconda.com/anaconda-scale/howto/spark-basic/\" rel=\"nofollow noreferrer\">this</a> one? The error I get when I try is pretty long but here is part of it (hopefully this part of the error message is enough for someone to help me out but I can always paste the whole thing in here too):</p>\n\n<pre><code>19/05/01 14:29:17 WARN StandaloneAppClient$ClientEndpoint: Failed to \nconnect to master MASTER-HOSTNAME:7077\norg.apache.spark.SparkException: Exception thrown in awaitResult\n    at org.apache.spark.rpc.RpcTimeout$$anonfun$1.applyOrElse(RpcTimeout.scala:77)\n    at org.apache.spark.rpc.RpcTimeout$$anonfun$1.applyOrElse(RpcTimeout.scala:75)\n    at scala.runtime.AbstractPartialFunction.apply(AbstractPartialFunction.scala:36)\n    at org.apache.spark.rpc.RpcTimeout$$anonfun$addMessageIfTimeout$1.applyOrElse(RpcTimeout.scala:59)\n    at org.apache.spark.rpc.RpcTimeout$$anonfun$addMessageIfTimeout$1.applyOrElse(RpcTimeout.scala:59)\n    at scala.PartialFunction$OrElse.apply(PartialFunction.scala:167)\n    at org.apache.spark.rpc.RpcTimeout.awaitResult(RpcTimeout.scala:83)\n    at org.apache.spark.rpc.RpcEnv.setupEndpointRefByURI(RpcEnv.scala:100)\n    at org.apache.spark.rpc.RpcEnv.setupEndpointRef(RpcEnv.scala:108)\n    at org.apache.spark.deploy.client.StandaloneAppClient$ClientEndpoint$$anonfun$tryRegisterAllMasters$1$$anon$1.run(StandaloneAppClient.scala:106)\n    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:511)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:266)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)\n    at java.lang.Thread.run(Thread.java:748)\nCaused by: java.lang.RuntimeException: java.io.EOFException\n    at java.io.DataInputStream.readFully(DataInputStream.java:197)\n    at java.io.DataInputStream.readUTF(DataInputStream.java:609)\n    at java.io.DataInputStream.readUTF(DataInputStream.java:564)\n    at org.apache.spark.rpc.netty.RequestMessage$.readRpcAddress(NettyRpcEnv.scala:593)\n</code></pre>\n\n<p>Then a follow-up question - does it matter? If I just set the master to <code>local[*]</code> am I still getting the full functionality of the Spark cluster? How do I know that I'm utilizing the Spark cluster for faster performance? (Sorry, I'm a newbie to this. I tried searching the internet like crazy but didn't find anything that helped me. If someone can point me to some useful resources to help me out too, that would be great! My ultimate goal is to use the Spark cluster to quickly manipulate very large datasets in Python.)</p>\n\n<p>Last follow-up question - I keep getting the warning <code>19/04/30 13:19:24 WARN TaskSetManager: Stage 0 contains a task of very large size (5786 KB). The maximum recommended task size is 100 KB.</code> Based on <a href=\"https://stackoverflow.com/questions/28878654/spark-using-python-how-to-resolve-stage-x-contains-a-task-of-very-large-size-x\">this</a> question it looks like I need to utilize the <code>parallelize</code> method in all of my data manipulations. This method returns an RDD and currently all my code is written to deal with pyspark DataFrame objects. Just checking - do I need to rewrite all my code to manipulate RDDs in order to utilize the Spark cluster? </p>\n"}, {"tags": ["python", "pytorch", "autograd"], "comments": [{"owner": {"reputation": 26717, "user_id": 5352399, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh3.googleusercontent.com/-Rk_dLwN-xPY/AAAAAAAAAAI/AAAAAAAAAC8/DtCya1W9lX4/photo.jpg?sz=128", "display_name": "Wasi Ahmad", "link": "https://stackoverflow.com/users/5352399/wasi-ahmad"}, "edited": false, "score": 0, "creation_date": 1556751669, "post_id": 55942423, "comment_id": 98540524, "body": "what do you mean by contextualizing?"}, {"owner": {"reputation": 434, "user_id": 4101137, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/17f389af9053b17ab7d5749fcb20b654?s=128&d=identicon&r=PG&f=1", "display_name": "user49404", "link": "https://stackoverflow.com/users/4101137/user49404"}, "reply_to_user": {"reputation": 26717, "user_id": 5352399, "user_type": "registered", "accept_rate": 81, "profile_image": "https://lh3.googleusercontent.com/-Rk_dLwN-xPY/AAAAAAAAAAI/AAAAAAAAAC8/DtCya1W9lX4/photo.jpg?sz=128", "display_name": "Wasi Ahmad", "link": "https://stackoverflow.com/users/5352399/wasi-ahmad"}, "edited": false, "score": 0, "creation_date": 1556840166, "post_id": 55942423, "comment_id": 98574420, "body": "Just wanted some bigger picture of what was going wrong here, as Sergey provided. thanks."}], "answers": [{"tags": [], "owner": {"reputation": 5962, "user_id": 220700, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1d1081bfed83e0be780441043732d5ff?s=128&d=identicon&r=PG", "display_name": "Sergii Dymchenko", "link": "https://stackoverflow.com/users/220700/sergii-dymchenko"}, "is_accepted": true, "score": 2, "last_activity_date": 1556753385, "last_edit_date": 1556753385, "creation_date": 1556751934, "answer_id": 55943779, "question_id": 55942423, "link": "https://stackoverflow.com/questions/55942423/pytorch-backpropagating-from-sum-of-matrix-elements-to-leaf-variable/55943779#55943779", "title": "Pytorch: backpropagating from sum of matrix elements to leaf variable", "body": "<p>Edit:</p>\n\n<p>Here is a detailed explanation of what's going on (\"this isn't a bug per se, but it is definitely a source of confusion\"): <a href=\"https://github.com/pytorch/pytorch/issues/19778\" rel=\"nofollow noreferrer\">https://github.com/pytorch/pytorch/issues/19778</a></p>\n\n<p>So one solution is to specifically ask to retain grad for now non-leaf <code>a</code>:</p>\n\n<pre><code>a = torch.tensor([1.])\na.requires_grad = True\na = a.reshape(a.shape)\na.retain_grad()\nb = torch.tensor([1.])\nc = torch.cat([a,b])\nd = torch.sum(c)\nd.backward()\n</code></pre>\n\n<hr>\n\n<p>Old answer:</p>\n\n<p>If you move <code>a.requires_grad = True</code> after the reshape, it works:</p>\n\n<pre><code>a = torch.tensor([1.])\na = a.reshape(a.shape)\na.requires_grad = True\nb = torch.tensor([1.])\nc = torch.cat([a,b])\nd = torch.sum(c)\nd.backward()\n</code></pre>\n\n<p>Seems like a bug in PyTorch, because after this <code>a.requires_grad</code> is still true.</p>\n\n<pre><code>a = torch.tensor([1.])\na.requires_grad = True\na = a.reshape(a.shape)\n</code></pre>\n\n<p>This seems to be related to the fact the <code>a</code> is no longer a leaf in your \"Doesn't work\" example, but still a leaf in other cases (print <code>a.is_leaf</code> to check).</p>\n"}], "owner": {"reputation": 434, "user_id": 4101137, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/17f389af9053b17ab7d5749fcb20b654?s=128&d=identicon&r=PG&f=1", "display_name": "user49404", "link": "https://stackoverflow.com/users/4101137/user49404"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1221, "favorite_count": 0, "accepted_answer_id": 55943779, "answer_count": 1, "score": 2, "last_activity_date": 1556753385, "creation_date": 1556742988, "last_edit_date": 1556745964, "question_id": 55942423, "link": "https://stackoverflow.com/questions/55942423/pytorch-backpropagating-from-sum-of-matrix-elements-to-leaf-variable", "title": "Pytorch: backpropagating from sum of matrix elements to leaf variable", "body": "<p>I'm trying to understand backpropagation in pytorch a bit better. I have a code snippet that successfully does backpropagation from the output d to the leaf variable a, but then if I add in a reshape step, the backpropagation no longer gives the input a gradient.</p>\n\n<p>I know reshape is out-of-place, but I'm still not sure how to contextualize this.</p>\n\n<p>Any thoughts?</p>\n\n<p>Thanks.</p>\n\n<pre><code>#Works\na = torch.tensor([1.])\na.requires_grad = True\nb = torch.tensor([1.])\nc = torch.cat([a,b])\nd = torch.sum(c)\nd.backward()\n\nprint('a gradient is')\nprint(a.grad) #=&gt; Tensor([1.])\n\n#Doesn't work\na = torch.tensor([1.])\na.requires_grad = True\na = a.reshape(a.shape)\nb = torch.tensor([1.])\nc = torch.cat([a,b])\nd = torch.sum(c)\nd.backward()\n\nprint('a gradient is')\nprint(a.grad) #=&gt; None\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 5, "creation_date": 1556743084, "post_id": 55942419, "comment_id": 98538036, "body": "This is a perfect question for <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 8218, "user_id": 2615940, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9a6Qc.jpg?s=128&g=1", "display_name": "skrrgwasme", "link": "https://stackoverflow.com/users/2615940/skrrgwasme"}, "edited": false, "score": 0, "creation_date": 1556743531, "post_id": 55942419, "comment_id": 98538201, "body": "I don&#39;t know how well Pandas works with parallel operations, but assuming it works with them alright, this looks like a good candidate for <a href=\"https://docs.python.org/3.4/library/multiprocessing.html?highlight=process#module-multiprocessing.pool\" rel=\"nofollow noreferrer\">multiprocessing pools</a>. You can use them to spin up a number of child processes that will execute jobs in parallel. <code>pool.map()</code> or <code>pool.imap()</code> are probably the functions you would be looking for. You would replace the <code>for</code> loop with a call to these functions, passing them the iterable object, instead of iterating over its contents one at a time."}, {"owner": {"reputation": 2575, "user_id": 10669875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ae3bf8ded4da2254e5aa66d54167613?s=128&d=identicon&r=PG&f=1", "display_name": "wovano", "link": "https://stackoverflow.com/users/10669875/wovano"}, "edited": false, "score": 0, "creation_date": 1559317692, "post_id": 55942419, "comment_id": 99394845, "body": "I tried to run your code, but it&#39;s incomplete and incorrectly formatted. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and format your code properly if you want to get an answer to your question. Also read the <a href=\"https://stackoverflow.com/tour\">tour</a> and <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}], "owner": {"reputation": 379, "user_id": 9176398, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/be55a9fe9ebfb0925c7f16ba7efad493?s=128&d=identicon&r=PG", "display_name": "user9176398", "link": "https://stackoverflow.com/users/9176398/user9176398"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556743115, "creation_date": 1556742978, "last_edit_date": 1556743115, "question_id": 55942419, "link": "https://stackoverflow.com/questions/55942419/speed-up-function-in-python", "title": "Speed up function in Python", "body": "<p>I wrote a function that iterate over 3 parameters in purpose to spot out-of-stock data point to illustrate this i'll draw an example : </p>\n\n<p>suppose that the product 10 in store 2 for an offer named \"super5\" is following this trend</p>\n\n<pre><code>day | qty\n\n1     50\n2     70\n3     55\n4     67\n5     13\n6     0\n</code></pre>\n\n<p>Offer finished at day 6, the product was potentialy out of stock at day 5. in order to spot this and verify it I find the index of 0 qty and look 2 back i took the mean of that two day (67 + 13) / 2 = 40 if the mean is >  first decile then tag \"out-of-stock\" else \"ko\"</p>\n\n<p>I tried : </p>\n\n<pre><code>def flag_out_of_stock(dataframe, sku, store, offer) : \nffl = []\nsku_store_offer = dataframe[[\"id_sku\", \"id_store\", \"id_offer\"]].drop_duplicates([\"id_sku\", \"id_store\", \"id_offer\"])\nfor sku, store, offer in tqdm(zip(sku_store_offer[\"id_sku\"], sku_store_offer[\"id_store\"], sku_store_offer[\"id_offer\"])):\n    cond1 = dataframe[\"id_sku\"] == sku\n    cond2 = dataframe[\"id_store\"] == store\n    cond3 = dataframe[\"id_offer\"] == offer\n    timeseries = dataframe[np.logical_and.reduce((cond1, cond2, cond3))][[\"f_qty_recalc\", \"id_day\"]]\\\n    .set_index(\"id_day\")\\\n    .sort_index()\n    mu = timeseries.mean()[0]\n    if mu &gt;= 6 : \n        sigma = timeseries.std()[0]\n        q1 = timeseries.quantile(0.1)[0]\n        # index where qty == 0\n        likely_out_of_stock_index = np.where(timeseries ==0)[0]\n        # if there more that one value where qty == 0\n        if len(likely_out_of_stock_index) &gt; 1 : \n            # for each index where qty == 0\n            for i in likely_out_of_stock_index :  \n                # if the day before or day after are superior to the first decile \n                #then flag out of stock\n                day_before_2 = timeseries.iloc[i-2:i].mean()[0]\n                if day_before_2 &gt;= q1 : \n                    ffl.append(\"out_of_stock\")\n                elif day_before_2 &gt;= mu - sigma  :\n                    ffl.append(\"likely_out_of_stock\")\n                else : \n                    ffl.append(\"KO\")\n        else :\n            try : \n                day_before_2 = timeseries.iloc[likely_out_of_stock_index-2:likely_out_of_stock_index].mean()[0]\n                if day_before_2 &gt;= q1 : \n                    ffl.append(\"out_of_stock\")\n                elif day_before_2 &gt;= mu - sigma  :\n                    ffl.append(\"out_of_stock\")\n                else : \n                    ffl.append(\"KO\")\n            except TypeError :\n                ffl.append(\"KO\")\n    else : \n        ffl.append(\"KO\")\nreturn pd.Series(ffl)\n</code></pre>\n\n<p>The issue there that this code running on ~600k row of parameters and took ~1.3seconde per iterations according to log 0.9sec is that operations</p>\n\n<pre><code>timeseries = dataframe[np.logical_and.reduce((cond1, cond2, cond3))][[\"f_qty_recalc\", \"id_day\"]]\\\n.set_index(\"id_day\")\\\n.sort_index()\n</code></pre>\n\n<p>so i would like to find another way to do that or speed up advice. Thanks.</p>\n"}, {"tags": ["python", "exception", "multiprocessing"], "answers": [{"tags": [], "owner": {"reputation": 3029, "user_id": 1239685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e2117ca06179184f05d9c385b1823b?s=128&d=identicon&r=PG", "display_name": "Dominick Pastore", "link": "https://stackoverflow.com/users/1239685/dominick-pastore"}, "is_accepted": true, "score": 0, "last_activity_date": 1556892239, "creation_date": 1556892239, "answer_id": 55971416, "question_id": 55942397, "link": "https://stackoverflow.com/questions/55942397/when-does-multiprocessing-basemanager-use-remoteerror/55971416#55971416", "title": "When does multiprocessing.BaseManager use RemoteError?", "body": "<p>I believe I've figured it out. I'm still not 100% sure, but seeing as how this question isn't getting a lot of attention, I figured I'll go ahead and add an answer in case future readers stumble across this.</p>\n\n<p>Exceptions that happen in the <code>WifiManager</code> during the original remote call get raised as <code>RemoteError</code>. In this case, that means exceptions on the remote end during this line in the web app:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>iface = wmanager.get_iface(iface_path)\n</code></pre>\n\n<p>After that, the web app is no longer directly interacting with the <code>WifiManager</code>. It is only interacting with <code>iface</code>, a <a href=\"https://docs.python.org/3/library/multiprocessing.html#proxy-objects\" rel=\"nofollow noreferrer\">proxy object</a>. If a proxy object (or more accurately, its referent) raises an exception on the remote side, the same exception gets raised in the web app, not a <code>RemoteError</code>. So, that means if this line were to cause e.g. a <code>WifiError</code> or <code>OSError</code>, those are the exceptions you would catch:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>iface.scan() # And other code using the iface object\n</code></pre>\n\n<p><strong>So, to summarize,</strong> calls on <code>BaseManager</code> (or subclasses) raise <code>RemoteError</code> when there is an exception on the remote end. Calls on proxy objects raise a copy of the original exception.</p>\n\n<p>Bear in mind, this answer is based on my observations, not my complete and total understanding of the situation, so it's possible there are some gotchas here I'm unaware of. If somebody knows better, please correct me. But this describes the behavior I've observed and <em>seems</em> consistent with the docs quoted in the question.</p>\n"}], "owner": {"reputation": 3029, "user_id": 1239685, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57e2117ca06179184f05d9c385b1823b?s=128&d=identicon&r=PG", "display_name": "Dominick Pastore", "link": "https://stackoverflow.com/users/1239685/dominick-pastore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 55971416, "answer_count": 1, "score": 0, "last_activity_date": 1556892932, "creation_date": 1556742840, "last_edit_date": 1556892932, "question_id": 55942397, "link": "https://stackoverflow.com/questions/55942397/when-does-multiprocessing-basemanager-use-remoteerror", "title": "When does multiprocessing.BaseManager use RemoteError?", "body": "<p>I have a C extension module for CPython. I need multiple uWSGI workers to share a single instance of an object in this module. I am using a custom subclass of <code>multiprocessing.BaseManager</code> to accomplish this, based on <a href=\"https://stackoverflow.com/a/28426819/1239685\">this answer</a> that describes a very similar solution.</p>\n\n<p>The first script below is <code>wifi.manager</code> (<code>wifi.controller.IFace</code> is the object to be shared). I run this with <code>python3 wifi/manager.py</code> and then start the web server, which runs the code in the second snippet to get the shared object instance.</p>\n\n<p>wifi/manager.py:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/env python3\n\nfrom multiprocessing.managers import BaseManager\n\n# .register() changes the class itself. We don't want to do that to BaseManager.\nclass WifiManager(BaseManager):\n    pass\n\nif __name__ == '__main__':\n    # If we are executed as a script (python3 manager.py), start the server\n    import atexit\n    from multiprocessing import Lock\n    import wifi.controller\n\n    ifaces_lock = Lock()\n    ifaces = dict()\n\n    def get_iface(iface_path):\n        with ifaces_lock:\n            if iface_path not in ifaces:\n                # Control interface isn't open. Open it.\n                iface = wifi.controller.IFace(iface_path)\n                ifaces[iface_path] = iface\n        return ifaces[iface_path]\n\n    def close_ifaces():\n        for iface in ifaces.values():\n            iface.close()\n\n    WifiManager.register('get_iface', get_iface)\n    atexit.register(close_ifaces)\n\n    manager = WifiManager(address=('127.0.0.1', 2437), authkey=b'wifimanager')\n    server = manager.get_server()\n    server.serve_forever()\nelse:\n    # If we are imported, provide the WifiManager class ready for clients to use\n    WifiManager.register('get_iface')\n</code></pre>\n\n<p>Snippet from web application:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from wifi.manager import WifiManager\n\n...\n\nwmanager = WifiManager(address=('127.0.0.1', 2437), authkey=b'wifimanager')\nwmanager.connect()\niface = wmanager.get_iface(iface_path)\n\niface.scan() # And other code using the iface object\n</code></pre>\n\n<p>The <code>wifi.controller.IFace</code> object sometimes raises exceptions, either built-in ones (mainly <code>OSError</code>) or its own <code>wifi.controller.WifiError</code> exception. Sometimes, I want to be able to catch these in the web app to present meaningful error pages to the client. But, what I've noticed is sometimes, these exceptions get captured and the same exception (e.g. <code>WifiError</code>) is raised in the web app. Other times, the web app gets a <code>multiprocessing.managers.RemoteError</code> with the traceback from the manager stored as a string.</p>\n\n<p>The question is, how do I know when it will raise the original exception and when it will raise a <code>RemoteError</code>, so I know which one to catch? <a href=\"https://docs.python.org/3/library/multiprocessing.html#multiprocessing.managers.BaseProxy._callmethod\" rel=\"nofollow noreferrer\">All the Python docs say</a> is this:</p>\n\n<blockquote>\n  <p>If an exception is raised by the call, then is re-raised by _callmethod(). If some other exception is raised in the manager\u2019s process then this is converted into a RemoteError exception and is raised by _callmethod().</p>\n</blockquote>\n\n<p>This isn't very clear to me and I can't figure out how it lines up with the behavior I've observed.</p>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1556742947, "post_id": 55942396, "comment_id": 98537985, "body": "What exactly happens with the rest? Can you share relevant parts of your <code>Place</code> model? What if a city has a district that has the same name as the city?"}, {"owner": {"reputation": 16602, "user_id": 8060120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gejWm.jpg?s=128&g=1", "display_name": "Brown Bear", "link": "https://stackoverflow.com/users/8060120/brown-bear"}, "edited": false, "score": 0, "creation_date": 1556743180, "post_id": 55942396, "comment_id": 98538082, "body": "please, show few example of your <code>entry</code>."}, {"owner": {"reputation": 51, "user_id": 11415812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9ba3e5d2b5c688b034b5f75619fd761?s=128&d=identicon&r=PG&f=1", "display_name": "roziuk", "link": "https://stackoverflow.com/users/11415812/roziuk"}, "reply_to_user": {"reputation": 16602, "user_id": 8060120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gejWm.jpg?s=128&g=1", "display_name": "Brown Bear", "link": "https://stackoverflow.com/users/8060120/brown-bear"}, "edited": false, "score": 0, "creation_date": 1556743321, "post_id": 55942396, "comment_id": 98538136, "body": "@Bear Brown ok, no problem"}, {"owner": {"reputation": 16602, "user_id": 8060120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gejWm.jpg?s=128&g=1", "display_name": "Brown Bear", "link": "https://stackoverflow.com/users/8060120/brown-bear"}, "edited": false, "score": 0, "creation_date": 1556743842, "post_id": 55942396, "comment_id": 98538295, "body": "if i understand correct, you can add the <code>unique_together = [&#39;name&#39;, &#39;parent&#39;]</code>? may be need clear table before it, and after apply the constraint you should catch a error that can help you."}], "owner": {"reputation": 51, "user_id": 11415812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9ba3e5d2b5c688b034b5f75619fd761?s=128&d=identicon&r=PG&f=1", "display_name": "roziuk", "link": "https://stackoverflow.com/users/11415812/roziuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1556743423, "creation_date": 1556742838, "last_edit_date": 1556743423, "question_id": 55942396, "link": "https://stackoverflow.com/questions/55942396/objects-creation", "title": "Objects creation", "body": "<p>I have a dataset which return me a set of tuples in this format <code>(region, district, city, role)</code>, and I want to create a hierarchy, but the loop doesn't work in correct way, it creates only <code>region</code> objects and also duplicates this objects \nentry:</p>\n\n<pre><code>('\u0420\u0456\u0432\u043d\u0435\u043d\u0441\u044c\u043a\u0430 \u043e\u0431\u043b.', '\u0414\u0443\u0431\u0435\u043d\u0441\u044c\u043a\u0438\u0439 \u0440-\u043d', '\u0441.\u041d\u043e\u0432\u0430 \u041c\u0438\u043a\u043e\u043b\u0430\u0457\u0432\u043a\u0430', Place.VILLAGE)\n ('\u0422\u0435\u0440\u043d\u043e\u043f\u0456\u043b\u044c\u0441\u044c\u043a\u0430 \u043e\u0431\u043b.', '\u0427\u043e\u0440\u0442\u043a\u0456\u0432\u0441\u044c\u043a\u0438\u0439 \u0440-\u043d', '\u0441.\u041c\u0443\u0445\u0430\u0432\u043a\u0430', Place.VILLAGE)\n ('\u0416\u0438\u0442\u043e\u043c\u0438\u0440\u0441\u044c\u043a\u0430 \u043e\u0431\u043b.', '\u041f\u043e\u043f\u0456\u043b\u044c\u043d\u044f\u043d\u0441\u044c\u043a\u0438\u0439 \u0440-\u043d', '\u0441.\u041c\u0438\u0440\u043e\u043b\u044e\u0431\u0456\u0432\u043a\u0430', Place.VILLAGE)\n ('\u0422\u0435\u0440\u043d\u043e\u043f\u0456\u043b\u044c\u0441\u044c\u043a\u0430 \u043e\u0431\u043b.', '\u0411\u0443\u0447\u0430\u0446\u044c\u043a\u0438\u0439 \u0440-\u043d', '\u0441.\u041f\u0435\u0440\u0435\u0434\u043c\u0456\u0441\u0442\u044f', Place.VILLAGE)\n ('\u0414\u043d\u0456\u043f\u0440\u043e\u043f\u0435\u0442\u0440\u043e\u0432\u0441\u044c\u043a\u0430 \u043e\u0431\u043b.', '\u0426\u0430\u0440\u0438\u0447\u0430\u043d\u0441\u044c\u043a\u0438\u0439 \u0440-\u043d', '\u0441.\u0420\u0438\u0431\u0430\u043b\u043a\u0438', Place.VILLAGE)\n</code></pre>\n\n<p>my model:</p>\n\n<pre><code>class Place(models.Model):\n    name = models.CharField(max_length=128, verbose_name='Place name', )\n    slug = models.SlugField(max_length=128, blank=True, null=True)\n    parent = models.ForeignKey('self', on_delete=models.CASCADE, blank=True, null=True)\n    role = models.CharField(max_length=20, choices=ROLE_CHOICES, null=True, blank=True)\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Command(BaseCommand):\n\n    help = 'Fill DB with initial data'\n\n    def handle(self, *args, **options):\n        for entry in list(get_dataset())[:10]:\n            region, region_created = Place.objects.get_or_create(name=entry[0], role=Place.REGION)\n            district, district_created = Place.objects.get_or_create(name=entry[1], role=Place.DISTRICT, parent=region)\n            city_obj, city_created = Place.objects.get_or_create(name=entry[2], role=entry[3], parent=district)\n\n        self.stdout.write(self.style.SUCCESS('Database updated successfully!'))\n</code></pre>\n"}, {"tags": ["python", "pygame", "sprite"], "comments": [{"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 3, "creation_date": 1556743387, "post_id": 55942389, "comment_id": 98538151, "body": "Hello! Why it didn&#39;t work? Please, describe the errors you get (and add a traceback). Also a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a> would be appreciated, I do not see any code where you try to multiply the <code>rect</code> or scale the image."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 3, "creation_date": 1556751007, "post_id": 55942389, "comment_id": 98540378, "body": "create file with bigger image in any graphics editor, load it in game and keep in <code>self.player.image_big</code> . When you collide then assign <code>self.player.image = self.player.image_big</code>. You will have to do the same with rectangle <code>self.player.rect = self.player.rect_big</code>"}, {"owner": {"reputation": 1, "user_id": 11438826, "user_type": "registered", "profile_image": "https://graph.facebook.com/2356781547933963/picture?type=large", "display_name": "Moustafa Raafat", "link": "https://stackoverflow.com/users/11438826/moustafa-raafat"}, "edited": false, "score": 0, "creation_date": 1556920473, "post_id": 55942389, "comment_id": 98605529, "body": "well i did this but it dosent work and it shows no errors, nothing happens when i collide with the powerup."}, {"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 1, "creation_date": 1556922785, "post_id": 55942389, "comment_id": 98606073, "body": "In that case we need a <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>, so we can reproduce and investigate the unexpected behaviour."}], "owner": {"reputation": 1, "user_id": 11438826, "user_type": "registered", "profile_image": "https://graph.facebook.com/2356781547933963/picture?type=large", "display_name": "Moustafa Raafat", "link": "https://stackoverflow.com/users/11438826/moustafa-raafat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1609072664, "answer_count": 0, "score": 0, "last_activity_date": 1556920633, "creation_date": 1556742828, "last_edit_date": 1556920633, "question_id": 55942389, "link": "https://stackoverflow.com/questions/55942389/how-to-make-sprite-bigger-when-coliding-with-another-sprite-in-pygame-mario-po", "closed_reason": "Duplicate", "title": "How to make sprite bigger when coliding with another sprite in pygame? (mario powerup)", "body": "<p>I have a class player and a class pow, I want that when the player sprite and the powerup sprite collide, the player sprite doubles in size just like in super mario (without the animations and all). Btw for the player \nI am using multiple images.</p>\n\n<p>I tried to just multiply the rect it didn't work.\ni tried to scale the image also didn't work.</p>\n\n<p>here i tried to change the image to a bigger image and the rect also but it also didnt work, it dosent show any errors, nothing happens when i collide.</p>\n\n<pre><code>    for pow in pow_hits:\n        if pow.type == 1:\n            self.score += 20\n            self.player.shield += 1\n        if pow.type == 2:\n            self.score += 15\n            self.player.image == self.player.image_big\n            self.player.rect == self.player.rect_big\n</code></pre>\n"}, {"tags": ["python", "html", "web-scraping"], "answers": [{"tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": false, "score": 0, "last_activity_date": 1556748795, "creation_date": 1556748795, "answer_id": 55943361, "question_id": 55942381, "link": "https://stackoverflow.com/questions/55942381/i-want-to-extract-vwap-value-from-the-given-webpage/55943361#55943361", "title": "I want to extract vwap value from the given webpage", "body": "<p>You can extract from a different tag which has a string containing a lot of useful info including that price after loading with <code>json</code></p>\n\n<pre><code>import requests\nimport json\nfrom bs4 import BeautifulSoup as bs\n\nr = requests.get('https://nseindia.com/live_market/dynaContent/live_watch/get_quote/GetQuote.jsp?symbol=KOTAKBANK&amp;illiquid=0&amp;smeFlag=0&amp;itpFlag=0')\nsoup = bs(r.content, 'lxml')\ndata = json.loads(soup.select_one('#responseDiv').text.strip())\nprint(data['data'][0]['averagePrice'])\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 11438822, "user_type": "registered", "profile_image": "https://graph.facebook.com/2446868045324287/picture?type=large", "display_name": "Aditya Taide", "link": "https://stackoverflow.com/users/11438822/aditya-taide"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1556778744, "creation_date": 1556742802, "last_edit_date": 1556778744, "question_id": 55942381, "link": "https://stackoverflow.com/questions/55942381/i-want-to-extract-vwap-value-from-the-given-webpage", "title": "I want to extract vwap value from the given webpage", "body": "<pre><code>from bs4 import BeautifulSoup as BS\nurl=\"https://nseindia.com/live_market/dynaContent/live_watch/get_quote/GetQuote.jsp?symbol=KOTAKBANK&amp;illiquid=0&amp;smeFlag=0&amp;itpFlag=0\"\n\npage=urllib.request.Request(url,headers={'User-Agent': 'Mozilla/5.0'}) \ninfile=urllib.request.urlopen(page).read()\ndata = infile.decode('ISO-8859-1') # Read the content as string decoded with ISO-8859-1\n\n\nprint (soup.find('span', {'id':'vwap'}).text)\n</code></pre>\n\n<p>I am running this code in jupyter; I want output to be displayed as the value of VWAP on the webpage, but nothing is shown as output.</p>\n"}, {"tags": ["python", "django", "elasticsearch", "search"], "answers": [{"tags": [], "owner": {"reputation": 160, "user_id": 7003027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eX0kB.jpg?s=128&g=1", "display_name": "Dian Bakti", "link": "https://stackoverflow.com/users/7003027/dian-bakti"}, "is_accepted": false, "score": 0, "last_activity_date": 1556875010, "creation_date": 1556875010, "answer_id": 55966744, "question_id": 55942374, "link": "https://stackoverflow.com/questions/55942374/elasticsearch-prioritise-one-field-in-query/55966744#55966744", "title": "Elasticsearch prioritise one field in query", "body": "<p>Haven't really tested it, but <a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/master/query-dsl-function-score-query.html\" rel=\"nofollow noreferrer\">https://www.elastic.co/guide/en/elasticsearch/reference/master/query-dsl-function-score-query.html</a> seems promising for your use case, you can try to implement the \"threshold\" with it.</p>\n"}], "owner": {"reputation": 2081, "user_id": 9724750, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ab06fab3d1d9317889437631ef0ccce?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/9724750/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1556875010, "creation_date": 1556742753, "question_id": 55942374, "link": "https://stackoverflow.com/questions/55942374/elasticsearch-prioritise-one-field-in-query", "title": "Elasticsearch prioritise one field in query", "body": "<p>I have created an elasticsearch index of documents that have a title field and a text field. Given a query, the desired behavior for my search is that it <em>first</em> checks the title field and, if there are <em>any</em> documents where the title is a \"good\" match with the query, then those documents must be ranked top. Only after good title matches should documents be returned that have a good text match.</p>\n\n<p>By \"good title match\" I mean something along the lines of \"the query is close to some subset of the title, where close means levinshtein distance less than some given number\". This is a threshold condition. So either a title is a \"good\" match, and should rank high, or it is not, and should receive no benefit for getting \"some\" match with the query. The outcome is binary. </p>\n\n<p>So if there is a query \"How to garden like the best\", a document with the title \"garden like the best\" should be ranked first, followed by documents that have a good match for the query in their \"text\" field. A document with title \"Budget Gardening\" should receive no bonus for having \"Gardening\" in its title, because it is not a good enough match.</p>\n\n<p>Here is my attempt. This is using the Python elastic_dsl library. But the JSON equivalent should be obvious.</p>\n\n<pre><code>s = Search()\n\ninitiated = s.query(\n    \"multi_match\",\n    query=query,\n    fields=[\n        'title^280',\n        'text^1'],\n    type='best_fields',\n    fuzziness='AUTO')\n</code></pre>\n\n<p>As you can see, I've done a multi match where I've given the \"title\" field a much higher importance. I've also allowed for some fuzziness for not knowing the exact spelling of the words in the title. The index is also stemmed. This approach has been mostly successful, but I've had two undesirable behaviors:</p>\n\n<ol>\n<li>Documents that have a title that has anything in common with the\nquery appear very high. For example, a the above query will match a\ndocument with the title \"budget gardening\" higher than a document\nwith a much better text field match. This is because there is no\nthreshold. </li>\n<li>Documents that have a very good body match still appear\nhigher than documents where the title is literally the exact query\nstring.</li>\n</ol>\n\n<p>How can I adapt my query to obtain the desired behavior? Thank you. </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 7, "creation_date": 1556743035, "post_id": 55942369, "comment_id": 98538018, "body": "Why adding to globals? Add inputs into a list, loop over list and feed data to   decode  - this looks abusive - poor python."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1556743178, "post_id": 55942369, "comment_id": 98538081, "body": "what is input &amp; expected output?"}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "edited": false, "score": 1, "creation_date": 1556743253, "post_id": 55942369, "comment_id": 98538109, "body": "@J  <i>decoding RLE</i> : &quot;5e&quot; -&gt; &quot;eeeee&quot; - some kind of reverse run length decoder"}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 3, "creation_date": 1556743255, "post_id": 55942369, "comment_id": 98538110, "body": "Don&#39;t create lists of variables like that. Use a real list!"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 6, "creation_date": 1556743342, "post_id": 55942369, "comment_id": 98538140, "body": "Any time you find yourself creating variables with sequential names like <code>line0</code>, <code>line1</code>, <code>line2</code>, etc. you should just use a list. Other dynamic variable names should be dictionaries."}, {"owner": {"reputation": 31, "user_id": 11438804, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K0cw-W7RGhc/AAAAAAAAAAI/AAAAAAAAABs/DW92TTtEgEk/photo.jpg?sz=128", "display_name": "Patrikas D", "link": "https://stackoverflow.com/users/11438804/patrikas-d"}, "edited": false, "score": 0, "creation_date": 1556743743, "post_id": 55942369, "comment_id": 98538246, "body": "@J the input is line by line RLE so line0 is 12b04a17c , line1 is 10r04y and so on, the output expected if for each to be decompressed and printed. Sorry for my poor explanation skills."}, {"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 1, "creation_date": 1556743828, "post_id": 55942369, "comment_id": 98538289, "body": "Seriously, sequentially named variables are a bad idea. Use a list so you can simply refer to <code>line[0]</code>, <code>line[1]</code>, ... <code>line[x]</code>."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 11438804, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K0cw-W7RGhc/AAAAAAAAAAI/AAAAAAAAABs/DW92TTtEgEk/photo.jpg?sz=128", "display_name": "Patrikas D", "link": "https://stackoverflow.com/users/11438804/patrikas-d"}, "edited": false, "score": 0, "creation_date": 1556744310, "post_id": 55942575, "comment_id": 98538442, "body": "I see the error of my ways now, i was horrifically over complicating things and should have just gone with the simple solution. Thank you so much @chepner !!!!"}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 5, "last_activity_date": 1556743916, "creation_date": 1556743916, "answer_id": 55942575, "question_id": 55942369, "link": "https://stackoverflow.com/questions/55942369/is-there-a-way-to-change-the-variable-used-in-a-function-while-in-a-for-loop/55942575#55942575", "title": "Is there a way to change the variable used in a function while in a for loop?", "body": "<p>Creating variable names on the fly is almost always the wrong thing to do. You just need a simple <em>list</em> of values:</p>\n\n<pre><code>lines = []\nfor x in range(ch):\n    lines.append(input())\n\n# or as a list comprehension,\n# lines = [input() for x in range(ch)]\n\nfor x in lines:\n    print(decode(x))\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 11438804, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-K0cw-W7RGhc/AAAAAAAAAAI/AAAAAAAAABs/DW92TTtEgEk/photo.jpg?sz=128", "display_name": "Patrikas D", "link": "https://stackoverflow.com/users/11438804/patrikas-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 55942575, "answer_count": 1, "score": 1, "last_activity_date": 1556744630, "creation_date": 1556742741, "last_edit_date": 1556744630, "question_id": 55942369, "link": "https://stackoverflow.com/questions/55942369/is-there-a-way-to-change-the-variable-used-in-a-function-while-in-a-for-loop", "title": "Is there a way to change the variable used in a function while in a for loop?", "body": "<p>I'm taking computer science courses at my school I need to figure out some code for an exam, I need to change the variable name after I print it in a for-loop after decoding RLE. It's hard for me to explain but I hope you understand.</p>\n\n<p>I've tried to look it up online but I can't find the proper way to phrase the problem I have.</p>\n\n<pre><code>import re\n\ndef decode(string):\n    return re.sub(r'(\\d+)(\\D)', lambda m: int(m.group(1)) * m.group(2), string)\n\nch=int(input())\n\nfor x in range(0, ch):\n    globals()['line%s' % x]=input()\n\nfor x in range(0, ch):\n    print(decode(['line%s' % x]))\n</code></pre>\n\n<p>The result I'm looking for is after entering the RLE line by line (<code>ch</code> is the amount of lines), the function I made takes the variable names created by the for loop (so their names are <code>line0</code>, <code>line1</code>, <code>line2</code> etc... until <code>line(ch)</code>) and then proceeds to decompress and print the RLE but I cant seem to get it to work</p>\n\n<p>Edit: I might have made my problem not obvious and I apologize, I want to fix the last two lines of code so that the RLE is decompressed and printed in one for loop, I don't know if this is possible but I just want to know how (if) I can somehow make <code>print(decode(['line%s' % x]))</code> work, so like the variable <code>line</code> followed by a number gets changed while in the variable. Sorry I'm terrible at explaining things.</p>\n"}, {"tags": ["python", "pandas", "csv", "data-analysis"], "comments": [{"owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "edited": false, "score": 0, "creation_date": 1556743185, "post_id": 55942361, "comment_id": 98538084, "body": "is your dataframe just the two columns?"}, {"owner": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "reply_to_user": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "edited": false, "score": 0, "creation_date": 1556743291, "post_id": 55942361, "comment_id": 98538126, "body": "dataframe is a total of 6 columns and 680 rows."}, {"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "edited": false, "score": 0, "creation_date": 1556743374, "post_id": 55942361, "comment_id": 98538148, "body": "you can just do df2 = df[[&#39;namecolumn&#39;]] if you want it as a dataframe, or df2 = df[&#39;namecolumn&#39;] if you want it as a Series."}, {"owner": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "reply_to_user": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "edited": false, "score": 0, "creation_date": 1556743518, "post_id": 55942361, "comment_id": 98538196, "body": "@BenPap how would i use this in my code above?"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "edited": false, "score": 0, "creation_date": 1556744008, "post_id": 55942501, "comment_id": 98538349, "body": "How can i do this from the yourdf, not the df itself and also keeping it in the greatest to least sort."}, {"owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "reply_to_user": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "edited": false, "score": 0, "creation_date": 1556744105, "post_id": 55942501, "comment_id": 98538380, "body": "It works the same for any dataframe that has that column in it"}, {"owner": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "edited": false, "score": 0, "creation_date": 1556747769, "post_id": 55942501, "comment_id": 98539545, "body": "When i do that, i get No axis named 1 for object type &lt;class &#39;type&#39;&gt;"}, {"owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "reply_to_user": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "edited": false, "score": 1, "creation_date": 1556747916, "post_id": 55942501, "comment_id": 98539592, "body": "can you update your post so it&#39;s a little more clear which print statements are yielding which output? I&#39;m not sure how you&#39;re applying the code above."}, {"owner": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "edited": false, "score": 0, "creation_date": 1556748577, "post_id": 55942501, "comment_id": 98539792, "body": "there are 144 distributors and 680 movies, the code takes only the distributors with the total amount of tickets sold for every movie that is made from that distributor and then only posting the distributors that take up more than 1% of total ticket sales and adds all others to others."}, {"owner": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "edited": false, "score": 0, "creation_date": 1556748626, "post_id": 55942501, "comment_id": 98539814, "body": "Then I need to rearrange those from greatest to least, that solves one question and then remove the column of tickets and only have the names or just only take the names out of the yourdf and be able to post that for another question."}], "tags": [], "owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1556744118, "last_edit_date": 1556744118, "creation_date": 1556743472, "answer_id": 55942501, "question_id": 55942361, "link": "https://stackoverflow.com/questions/55942361/how-to-remove-columns-in-group-by-pandas/55942501#55942501", "title": "How to remove columns in group by Pandas", "body": "<p>Try specifying <code>axis=1</code> to tell it you want to drop a column rather than an index.</p>\n\n<pre><code>yourdf.drop('Tickets Sold', axis=1, inplace=True)\nprint(yourdf)\n#           Distributor\n# 0    20th Century Fox\n# 1      Focus Features\n# 2           Lionsgate\n# 3  Paramount Pictures\n# 4   STX Entertainment\n# 5       Sony Pictures\n# 6           Universal\n# 7         Walt Disney\n# 8         Warner Bros\n# 9              Others\n</code></pre>\n\n<p>If you really want to preserve <code>yourdf</code> and have another <code>yourdf2</code> then</p>\n\n<pre><code>yourdf2 = yourdf.drop('Tickets Sold', axis=1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "edited": false, "score": 0, "creation_date": 1556747998, "post_id": 55943201, "comment_id": 98539612, "body": "df=df.groupby(df[&#39;Distributor&#39;])[&#39;Tickets Sold&#39;].sum() df1=df[df.div(df.sum()).lt(0.01)] df2=df.drop(df1.index) yourdf=pd.concat([df2,pd.Series(df1.sum(),index=[&#39;Others&#39;])]&zwnj;&#8203;)  yourdf = yourdf.sort_values(ascending=False) print(yourdf) yourdf2 = yourdf.drop(&#39;Tickets Sold&#39;, axis=1) print(yourdf2)"}, {"owner": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "edited": false, "score": 0, "creation_date": 1556748016, "post_id": 55943201, "comment_id": 98539619, "body": "how can i implement what you did in the code I have or if i replace all of this code with yours it will work?"}, {"owner": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "edited": false, "score": 0, "creation_date": 1556748068, "post_id": 55943201, "comment_id": 98539644, "body": "because i am using yourdf and yourdf2 to hold the original df for other uses and your df and yourdf2 as ways to solve other questions"}, {"owner": {"reputation": 558, "user_id": 11323304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8cfcb896f7637f921c2d2d756269f7?s=128&d=identicon&r=PG&f=1", "display_name": "zerecees", "link": "https://stackoverflow.com/users/11323304/zerecees"}, "reply_to_user": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "edited": false, "score": 0, "creation_date": 1556748074, "post_id": 55943201, "comment_id": 98539646, "body": "Give me 5 minutes to run a few tests and see what I can do for you. Be right back."}, {"owner": {"reputation": 558, "user_id": 11323304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8cfcb896f7637f921c2d2d756269f7?s=128&d=identicon&r=PG&f=1", "display_name": "zerecees", "link": "https://stackoverflow.com/users/11323304/zerecees"}, "reply_to_user": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "edited": false, "score": 0, "creation_date": 1556748339, "post_id": 55943201, "comment_id": 98539726, "body": "Ok, if you&#39;re trying to have one df for a variety of questions, I would recast df&#39;s as the questions come. df1, df1, df3, etc. If you&#39;re trying to use these values elsewhere, you might have a problem because they&#39;re index values. So you&#39;ll need to pull them out in some kind of array with df.index(). You can replace what I did in your code, but that doesn&#39;t mean it will work if we&#39;re not answering/asking the right questions, which I think is the problem here."}, {"owner": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "edited": false, "score": 0, "creation_date": 1556748490, "post_id": 55943201, "comment_id": 98539768, "body": "how would i end up doing that?"}, {"owner": {"reputation": 558, "user_id": 11323304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8cfcb896f7637f921c2d2d756269f7?s=128&d=identicon&r=PG&f=1", "display_name": "zerecees", "link": "https://stackoverflow.com/users/11323304/zerecees"}, "reply_to_user": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "edited": false, "score": 0, "creation_date": 1556749483, "post_id": 55943201, "comment_id": 98540044, "body": "To declare different df&#39;s for different questions you can do <code>df_q1 = df</code>, <code>df_q2 = df</code>, etc. But, be careful not to overwrite <code>df</code>. To take the index values out into their own array you can do <code>distributors = np.array(df.index.values)</code>. This stores them in a numpy array <code>distributors</code>, which is taken from <code>df</code> in the order which they appear in the index. Again, be sure to not overwrite variables."}, {"owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "edited": false, "score": 0, "creation_date": 1556749640, "post_id": 55943201, "comment_id": 98540069, "body": "Wanna help this guy out too? <a href=\"https://stackoverflow.com/questions/55943367/how-to-make-a-list-of-elements-ordered-from-greatest-to-least-based-off-the-data\" title=\"how to make a list of elements ordered from greatest to least based off the data\">stackoverflow.com/questions/55943367/&hellip;</a>"}], "tags": [], "owner": {"reputation": 558, "user_id": 11323304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8cfcb896f7637f921c2d2d756269f7?s=128&d=identicon&r=PG&f=1", "display_name": "zerecees", "link": "https://stackoverflow.com/users/11323304/zerecees"}, "is_accepted": false, "score": 0, "last_activity_date": 1556747878, "creation_date": 1556747878, "answer_id": 55943201, "question_id": 55942361, "link": "https://stackoverflow.com/questions/55942361/how-to-remove-columns-in-group-by-pandas/55943201#55943201", "title": "How to remove columns in group by Pandas", "body": "<p>Looking at your comments and reading your code, I'm thinking the behind the scenes issue is you're casting/recasting variables too much. This is resulting in overwriting/loosing what you're looking for when you need it. No worries, I'm sure you're in a Phase-1 stage of your project and testing things. But I wanted to point that out in case. You can always navigate around this issue using the <code>inplace=True</code> keyword argument.</p>\n\n<p>In any case, as Brian Cohan said, you need to delcare an axis with <code>axis=1</code>.</p>\n\n<p>Taking your code, it would look like this.</p>\n\n<pre><code>df = pd.DataFrame(df.groupby(df['Distributor'])['Tickets Sold'].sum()); display(df)\ndf = df.sort_values(by=\"Tickets Sold\", ascending=False); display(df)\ndf = df.drop(\"Tickets Sold\", axis = 1); display(df)\n# See here ------------------^\n</code></pre>\n\n<pre><code>|--------------------+--------------|\n|                    | Tickets Sold |\n|--------------------+--------------|\n| Distributor        |              |\n|--------------------+--------------|\n| 20th Century Fox   |    141367982 |\n| Focus Features     |     18799261 |\n| Lionsgate          |     75834308 |\n| Paramount Pictures |     86302817 |\n| STX Entertainment  |     22606674 |\n| Sony Pictures      |    102746480 |\n| Universal          |    159556790 |\n| Walt Disney        |    315655340 |\n| Warner Bros.       |    216426845 |\n| Others             |     74618013 |\n|--------------------+--------------|\n\n|--------------------+--------------|\n|                    | Tickets Sold |\n|--------------------+--------------|\n| Distributor        |              |\n|--------------------+--------------|\n| Walt Disney        |    315655340 |\n| Warner Bros.       |    216426845 |\n| Universal          |    159556790 |\n| 20th Century Fox   |    141367982 |\n| Sony Pictures      |    102746480 |\n| Paramount Pictures |     86302817 |\n| Lionsgate          |     75834308 |\n| Others             |     74618013 |\n| STX Entertainment  |     22606674 |\n| Focus Features     |     18799261 |\n|--------------------+--------------|\n\n|--------------------+\n|                    |\n|--------------------+\n| Distributor        |\n|--------------------+\n| Walt Disney        |\n| Warner Bros.       |\n| Universal          |\n| 20th Century Fox   |\n| Sony Pictures      |\n| Paramount Pictures |\n| Lionsgate          |\n| Others             |\n| STX Entertainment  |\n| Focus Features     |\n|--------------------|\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2239, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1556747878, "creation_date": 1556742702, "last_edit_date": 1556742754, "question_id": 55942361, "link": "https://stackoverflow.com/questions/55942361/how-to-remove-columns-in-group-by-pandas", "title": "How to remove columns in group by Pandas", "body": "<p>Trying to remove a column of data that is no longer needed.</p>\n\n<p>I have tried to use .drop and it isn't doing anything that I can tell.</p>\n\n<pre><code>df=df.groupby(df['Distributor'])['Tickets Sold'].sum()\ndf1=df[df.div(df.sum()).lt(0.01)]\ndf2=df.drop(df1.index)\nyourdf=pd.concat([df2,pd.Series(df1.sum(),index=['Others'])])\n\nyourdf = yourdf.sort_values(ascending=False)\nprint(yourdf)\nyourdf2 = yourdf.drop(columns=['Tickets Sold'])\nprint(yourdf2)\n</code></pre>\n\n<p>Instead of this.</p>\n\n<pre><code>20th Century Fox      141367982\nFocus Features         18799261\nLionsgate              75834308\nParamount Pictures     86302817\nSTX Entertainment      22606674\nSony Pictures         102746480\nUniversal             159556790\nWalt Disney           315655340\nWarner Bros.          216426845\nOthers                 74618013\n</code></pre>\n\n<p>Then into this.</p>\n\n<pre><code>Walt Disney           315655340\nWarner Bros.          216426845\nUniversal             159556790\n20th Century Fox      141367982\nSony Pictures         102746480\nParamount Pictures     86302817\nLionsgate              75834308\nOthers                 74618013\nSTX Entertainment      22606674\nFocus Features         18799261\n</code></pre>\n\n<p>I need this.</p>\n\n<pre><code>Walt Disney          \nWarner Bros.         \nUniversal             \n20th Century Fox      \nSony Pictures         \nParamount Pictures     \nLionsgate              \nOthers                 \nSTX Entertainment      \nFocus Features\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1556744039, "post_id": 55942321, "comment_id": 98538360, "body": "How about drop the columns at the end ?"}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 4, "last_activity_date": 1556742496, "creation_date": 1556742496, "answer_id": 55942321, "question_id": 55942273, "link": "https://stackoverflow.com/questions/55942273/sort-columns-values-in-pandas-to-create-alternate-sequence/55942321#55942321", "title": "sort columns values in pandas to create alternate sequence", "body": "<p>Try this:</p>\n\n<pre><code>df['rank'] = df.groupby(['Date','Type', 'Account']).cumcount()\ndf.sort_values(['Date', 'Type', 'rank'])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>+----+---------------------+-----------+--------+--------+\n|    | Date                | Account   |   Type |   rank |\n|----+---------------------+-----------+--------+--------|\n|  0 | 2019-01-01 00:00:00 | 123A      |      1 |      0 |\n|  1 | 2019-01-01 00:00:00 | 123B      |      1 |      0 |\n|  2 | 2019-01-02 00:00:00 | 456A      |      2 |      0 |\n|  4 | 2019-01-02 00:00:00 | 456B      |      2 |      0 |\n|  3 | 2019-01-02 00:00:00 | 456A      |      2 |      1 |\n|  5 | 2019-01-02 00:00:00 | 456B      |      2 |      1 |\n+----+---------------------+-----------+--------+--------+\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 3216468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64938298ba9097261a38a181212a30c2?s=128&d=identicon&r=PG&f=1", "display_name": "OhMikeGod", "link": "https://stackoverflow.com/users/3216468/ohmikegod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 55942321, "answer_count": 1, "score": 1, "last_activity_date": 1556742496, "creation_date": 1556742181, "question_id": 55942273, "link": "https://stackoverflow.com/questions/55942273/sort-columns-values-in-pandas-to-create-alternate-sequence", "title": "sort columns values in pandas to create alternate sequence", "body": "<p>I want to create an alternate order for my dataframe based on the last character of a string.</p>\n\n<p>Here is an example dataframe:</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame({'Date': ('2019-01-01', '2019-01-01', '2019-01-02', '2019-01-02', '2019-01-02', '2019-01-02'),\n                  'Account': ('123A', '123B', '456A', '456A', '456B', '456B'),\n                  'Type': ('1', '1', '2', '2', '2', '2')})\n\ndf = df.sort_values(['Date', 'Type'])\ndf\n         Date Account Type\n0  2019-01-01    123A    1\n1  2019-01-01    123B    1\n2  2019-01-02    456A    2\n3  2019-01-02    456A    2\n4  2019-01-02    456B    2\n5  2019-01-02    456B    2\n</code></pre>\n\n<p>The output I want is:</p>\n\n<pre><code>         Date Account Type\n0  2019-01-01    123A    1\n1  2019-01-01    123B    1\n2  2019-01-02    456A    2\n4  2019-01-02    456B    2\n3  2019-01-02    456A    2\n5  2019-01-02    456B    2\n</code></pre>\n\n<p>If you look at line 2 and 4 you can see that the last character of the sting has been alternate. So basically, I would like to sort by Date, Type and df['Account'].str[-1:] where df['Account'].str[-1:] is always alternate A-B, A-B for the same root in the account.</p>\n\n<p>I have tried to create new columns to identify problematic rows, but don't know how to reorder.</p>\n\n<pre><code>df['test1'] = np.where((df['Account'].str[:3].shift(-1) == df['Account'].str[:3]) &amp; (df['Account'].str[-1:].shift(-1) == 'B') &amp; (df['Account'].str[-1:] == 'B'), 1, 0)\n</code></pre>\n"}, {"tags": ["python", "pyomo"], "owner": {"reputation": 19, "user_id": 11438774, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hUQeG9IXlq0/AAAAAAAAAAI/AAAAAAAAAB4/BF0x99VIvLA/photo.jpg?sz=128", "display_name": "random tuber", "link": "https://stackoverflow.com/users/11438774/random-tuber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1556741968, "creation_date": 1556741968, "question_id": 55942232, "link": "https://stackoverflow.com/questions/55942232/is-there-an-explicit-explanation-video-for-how-pyomo-eventually-works-im-new-t", "title": "Is there an explicit explanation/video for how pyomo eventually works? (Im new to python)", "body": "<p>I have very little experience in python. Despite that our teacher introduced us to Pyomo with so little explanation and we are supposed to solve complex questions with it. we have a code that we are supposed to change/adapt, but I cannot rap my head about what they mean and how to use/change the code. Pyomo is Chinese to me :(</p>\n\n<p>I tried to define j, when I succeeded it seems that i is not defined now</p>\n\n<pre><code>from pyomo.environ import *\ninfinity = float('inf')\n\n\nmodelQ3 = ConcreteModel(\"Q3\")\n\n## Sets definition\n# Pollutant sources\nS=['S1', 'S2']\n# remediation measures\nM=['M1', 'M2', 'M3']\n\n##Parameters definition\n#a area of source Sj in M\u00b2\na = {}\na['S1']=1000\na['S2']=3000\n\n#ALPHA ATTENUATION FROM SOURCE S1 TO THE LAKE\n#ALPHA ATTENUATION FROM SOURCE S TO THE LAKE\nalpha={}\nalpha['S1']=0.37\nalpha['S2']=0.16\n\n#TM ANNUAL COST OF REMEDIATION MEASURE M (SEK PER M^2)\ntm={}\ntm['M1']=5.25\ntm['M2']=7.35\ntm['M3']=3.5\n\n\n#TARGET TARGET LOAD TO THE LAKE EXPRESSED AS FRACTION OF INITIAL LOAD\ntarget = 0.9\n\n#LK INITIAL LEAKAGE OF POLLUTANT FROM SOURCE S1 (KG)\nlk={}\nlk['S1']=500\nlk['S2']=1000\n\n#E EFFECTS OF EMISSION REDUCTION MEASURES M1 AND M2 (REDUCED POLLUTANT FRACTION)\ne={}\ne['M1']=0.85\ne['M2']=0.98\n\n#E3 ANNUAL REDUCTION BY LOAD REDUCTION MEASURE M3 (KG PER M^2 AND YEAR)\ne3=0.5475\n\n#L0 POLLUTANT LOAD TO THE LAKE FROM SOURCE S1 BEFORE REMEDIATION (KG);\nl0={}\nfor i in S:\n    l0[i]=lk[i]*(1-alpha[i])\n\n##E={}\n##for j in M:\n##    E[j]=e[j]\n\n##Variables definition\nmodelQ3.ra = Var(M, within=NonNegativeReals) #AREA (M^2) OVER WHICH REMEDIATION MEASURE M IS APPLIED\nmodelQ3.rm = Var(M, within=NonNegativeReals) #REDUCTION OF POLLUTANT LOAD WITH MEASURE M FROM SOURCE S1 (KG)\nmodelQ3.c = Var(M, within=NonNegativeReals) #TOTAL COST of MEASURE M AT SOURCE S1 (SEK)\n##Constraints definition\n# Cost measure\ndef c_rule(modelQ3,j,i):\n    return modelQ3.c[j,i] == tm[j]*modelQ3.ra[j,i]\nmodelQ3.cost_measure=Constraint(M,rule=c_rule)\n\n#load reduction\ndef rm_rule(modelQ3,j,i):\n    rule=None\n    if [j,i] =='M1' or [i,j] == 'M2':\n        rule=modelQ3.rm[i,j] == e[i,j]*lk*(modelQ3.ra[i,j][i]/a)*(1-alpha)\n    else:\n        rule=modelQ3.rm[i,j] == e3*(modelQ3.ra[i,j])\n    return rule\nmodelQ3.load_reduction=Constraint(M,rule=rm_rule)\n\n#New loads\ndef nl_rule(modelQ3):\n    return l0-sum(modelQ3.rm[j] for j in M) &lt;= l0*target\nmodelQ3.new_load=Constraint(rule=nl_rule)\n\n##Objective definition\n#minimize the cost\ndef cost_rule(modelQ3):\n    return sum(modelQ3.c [j] for j in M)\nmodelQ3.cost = Objective(rule=cost_rule, sense=minimize)\n\n##Selection of the solver: use glpk\nopt = SolverFactory('glpk')\n##Solving the model\nresults = opt.solve(modelQ3,logfile=modelQ3.name+'.yml')\n##\nmodelQ3.display(modelQ3.name+'.yml')\n#print(value(modelQ3.cost.expr))\n</code></pre>\n\n<p>expected result is the optimum price of remediation given the mentioned conditions</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 481672, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1556742271, "post_id": 55942224, "comment_id": 98537770, "body": "What is the rule here? It seems you want to match whitespace chars only before a whole word number, try <code>r&quot;\\s+(?=\\d+\\b)&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 77, "user_id": 297836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e1b37af5568dac3fc7d7738978288407?s=128&d=identicon&r=PG", "display_name": "KC.", "link": "https://stackoverflow.com/users/297836/kc"}, "edited": false, "score": 0, "creation_date": 1556742574, "post_id": 55942279, "comment_id": 98537857, "body": "Works perfectly. So is the (?!\\S) like a &quot;nested&quot;  lookahead for lack of a better word?"}, {"owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "reply_to_user": {"reputation": 77, "user_id": 297836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e1b37af5568dac3fc7d7738978288407?s=128&d=identicon&r=PG", "display_name": "KC.", "link": "https://stackoverflow.com/users/297836/kc"}, "edited": false, "score": 1, "creation_date": 1556742662, "post_id": 55942279, "comment_id": 98537886, "body": "It is a nested lookahead which asserts after matching 1+ digits what is directly after that is not a non whitespace character."}, {"owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "reply_to_user": {"reputation": 77, "user_id": 297836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e1b37af5568dac3fc7d7738978288407?s=128&d=identicon&r=PG", "display_name": "KC.", "link": "https://stackoverflow.com/users/297836/kc"}, "edited": false, "score": 0, "creation_date": 1556743324, "post_id": 55942279, "comment_id": 98538137, "body": "@KC. I have added a visual for some extra clarity."}], "tags": [], "owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": true, "score": 4, "last_activity_date": 1556743285, "last_edit_date": 1556743285, "creation_date": 1556742203, "answer_id": 55942279, "question_id": 55942224, "link": "https://stackoverflow.com/questions/55942224/python-string-split-only-on-numbers-preceded-or-followed-by-a-space/55942279#55942279", "title": "Python string split only on numbers preceded or followed by a space", "body": "<p>One option could be to match a space and use a positive lookahead to assert what is on the right are 1+ digits which after that are non followed by a non whitespace char:</p>\n\n<pre><code>\\s(?=\\d+(?!\\S))\n</code></pre>\n\n<ul>\n<li><code>\\s</code> Whitespace char</li>\n<li><code>(?=</code> positive lookahead, assert what is directly on the right\n\n<ul>\n<li><code>\\d+</code> Match 1+ digits</li>\n<li><code>(?!</code> Negative lookahead, assert what is directly on the right is not\n\n<ul>\n<li><code>\\S</code> Match non whitespace char</li>\n</ul></li>\n<li><code>)</code> Close negative lookahead</li>\n</ul></li>\n<li>Close positive lookahead</li>\n</ul>\n\n<p><a href=\"https://regex101.com/r/bZGP5B/1\" rel=\"nofollow noreferrer\">Regex demo</a> | <a href=\"https://ideone.com/Q6DmVD\" rel=\"nofollow noreferrer\">Python demo</a></p>\n\n<p>Your code could look like:</p>\n\n<pre><code>import re\ntmplist = re.split(r'\\s(?=\\d+(?!\\S))', 'Dual 425mm AutoCannon 25') \nprint(tmplist)\n</code></pre>\n\n<p>Result</p>\n\n<pre><code>['Dual 425mm AutoCannon', '25']\n</code></pre>\n\n<p>See a <a href=\"https://jex.im/regulex/#!flags=&amp;re=%5Cs(%3F%3D%5Cd%2B(%3F!%5CS))\" rel=\"nofollow noreferrer\">regulex</a> visual</p>\n\n<p><a href=\"https://i.stack.imgur.com/fqZfP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fqZfP.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1556742873, "creation_date": 1556742873, "answer_id": 55942406, "question_id": 55942224, "link": "https://stackoverflow.com/questions/55942224/python-string-split-only-on-numbers-preceded-or-followed-by-a-space/55942406#55942406", "title": "Python string split only on numbers preceded or followed by a space", "body": "<p>Not exactly the prettiest, but since regex can be difficult to read at times or go back and remember why you did what you did, here's a function that can accomplish what you're trying to do. I extended your text a little bit more just to make sure it kept working.</p>\n\n<pre><code>def split_on_number(text):\n\n    final = [text.split()[0]]  # Autoload the first item\n    for i in text.split()[1:]: # Ignore the first item\n\n        try:\n            #Try to convert it to a float\n            float(i)           \n\n        except ValueError: \n            # if there's an issue, append to last item\n            final[-1] = \" \".join([final[-1], i]) \n\n        else:\n            # if you can covnert to a float, then append it\n            final.append(i)    \n\n    return final\n\nprint(split_on_number('Dual 425mm AutoCannon 25 with another 4 items'))\n# ['Dual 425mm AutoCannon', '25 with another', '4 items']\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 297836, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e1b37af5568dac3fc7d7738978288407?s=128&d=identicon&r=PG", "display_name": "KC.", "link": "https://stackoverflow.com/users/297836/kc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 55942279, "answer_count": 2, "score": -1, "last_activity_date": 1556743285, "creation_date": 1556741937, "last_edit_date": 1592644375, "question_id": 55942224, "link": "https://stackoverflow.com/questions/55942224/python-string-split-only-on-numbers-preceded-or-followed-by-a-space", "title": "Python string split only on numbers preceded or followed by a space", "body": "<p>I have the following string that I would like to split into a list. I'm trying to figure out how to split it on digits that are preceded and followed by a space.</p>\n<p>I have tried the following and it is almost what I need.</p>\n<pre><code>\\s+(?=\\d)|(?&lt;=\\d)\\s+\n</code></pre>\n<hr />\n<h3>Attempt</h3>\n<pre><code>import re\n\n# Find the numeric values: \ntmplist = re.split(r'\\s+(?=\\d)|(?&lt;=\\d)\\s+', 'Dual 425mm AutoCannon 25') \n\n\n# Print the list\nprint(tmplist)\n</code></pre>\n<p>This is the outcome:</p>\n<pre><code>['Dual', '425mm AutoCannon', '25']\n</code></pre>\n<p>This is the desired outcome:</p>\n<pre><code>['Dual 425mm AutoCannon', '25']\n</code></pre>\n"}, {"tags": ["python", "hdf5", "pytables", "hdfql"], "comments": [{"owner": {"reputation": 3036, "user_id": 10462884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/09Tg9.jpg?s=128&g=1", "display_name": "kcw78", "link": "https://stackoverflow.com/users/10462884/kcw78"}, "edited": false, "score": 0, "creation_date": 1556743228, "post_id": 55942223, "comment_id": 98538102, "body": "Yes, you can append to tables and earrays. Which Python HDF5 module are you using? <code>h5py</code> or <code>pytables (tables)</code>?"}, {"owner": {"reputation": 4079, "user_id": 3259896, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/641c30a7b383022f22b53c8cedb04e3f?s=128&d=identicon&r=PG&f=1", "display_name": "SantoshGupta7", "link": "https://stackoverflow.com/users/3259896/santoshgupta7"}, "reply_to_user": {"reputation": 3036, "user_id": 10462884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/09Tg9.jpg?s=128&g=1", "display_name": "kcw78", "link": "https://stackoverflow.com/users/10462884/kcw78"}, "edited": false, "score": 0, "creation_date": 1556743534, "post_id": 55942223, "comment_id": 98538204, "body": "&#39;h5py or pytables (tables)&#39; uh, I thought they were the same thing? The data I am using have two rows of string and two rows of float32. And I want this to be readable in Pandas. Is there any recommendations?"}], "answers": [{"tags": [], "owner": {"reputation": 744, "user_id": 7185263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70019c4536c874704e90050f9f02d39?s=128&d=identicon&r=PG&f=1", "display_name": "SOG", "link": "https://stackoverflow.com/users/7185263/sog"}, "is_accepted": false, "score": 1, "last_activity_date": 1565028655, "last_edit_date": 1565028655, "creation_date": 1556744022, "answer_id": 55942595, "question_id": 55942223, "link": "https://stackoverflow.com/questions/55942223/is-there-way-to-write-hdf5-files-row-by-row-in-python/55942595#55942595", "title": "Is there way to write hdf5 files row by row in Python?", "body": "<p>If you are not bound to a specific technology, check out <a href=\"http://www.hdfql.com\" rel=\"nofollow noreferrer\">HDFql</a> as this will alleviate you from low-level details when dealing with HDF5 files.</p>\n\n<p>To solve your question, you need to create a dataset with two dimensions: the first is extendible and the second has a size of four (based on your code snippet, I assume you want to store four integers per row; also, if the datatype is not an integer, please check HDFql <a href=\"http://www.hdfql.com/resources/HDFqlReferenceManual.pdf\" rel=\"nofollow noreferrer\">reference manual</a> for an enumeration of all datatypes and change the code snippet below accordingly).</p>\n\n<p>In Python, to create such dataset execute (called <code>dset</code> in this example):</p>\n\n<pre><code>HDFql.execute(\"CREATE DATASET dset AS INT(UNLIMITED, 4)\")\n</code></pre>\n\n<p>Then, for each row you want to write, execute (please replace <code>val0</code>, <code>val1</code>, <code>val2</code> and <code>val3</code> with proper values):</p>\n\n<pre><code>HDFql.execute(\"INSERT INTO dset(-1:::) VALUES(%d, %d, %d, %d)\" % (val0, val1, val2, val3))\n</code></pre>\n\n<p>... finally, extend the first dimension of dataset <code>dset</code> by one like this:</p>\n\n<pre><code>HDFql.execute(\"ALTER DIMENSION dset TO +1\")\n</code></pre>\n\n<p>Repeat code snippet line #2 and #3 as many times as the rows you want to write.</p>\n"}, {"tags": [], "owner": {"reputation": 3036, "user_id": 10462884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/09Tg9.jpg?s=128&g=1", "display_name": "kcw78", "link": "https://stackoverflow.com/users/10462884/kcw78"}, "is_accepted": true, "score": 1, "last_activity_date": 1556770220, "creation_date": 1556770220, "answer_id": 55945564, "question_id": 55942223, "link": "https://stackoverflow.com/questions/55942223/is-there-way-to-write-hdf5-files-row-by-row-in-python/55945564#55945564", "title": "Is there way to write hdf5 files row by row in Python?", "body": "<p>This is similar to your other question.<a href=\"https://stackoverflow.com/questions/55943319\">Error when trying to save hdf5 row where one column is a string and the other is an array of floats</a></p>\n\n<p>With pytables, you can create an empty table referencing a dtype that defines each datataype (in this example, 4 floats). Then you use <code>table_object.append(row_data)</code> to add 1 or more rows of data, where <code>row_data</code> can be defined with a list of tuples or a numpy recarray. See complete example I posted to answer question above.</p>\n"}], "owner": {"reputation": 4079, "user_id": 3259896, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/641c30a7b383022f22b53c8cedb04e3f?s=128&d=identicon&r=PG&f=1", "display_name": "SantoshGupta7", "link": "https://stackoverflow.com/users/3259896/santoshgupta7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 0, "accepted_answer_id": 55945564, "answer_count": 2, "score": 0, "last_activity_date": 1565028655, "creation_date": 1556741935, "last_edit_date": 1556805165, "question_id": 55942223, "link": "https://stackoverflow.com/questions/55942223/is-there-way-to-write-hdf5-files-row-by-row-in-python", "title": "Is there way to write hdf5 files row by row in Python?", "body": "<p>For CSV files we could use</p>\n\n<pre><code>writer = csv.writer(output)\nwriter.writerow([a, b, c, d])\n</code></pre>\n\n<p>Is there anything like that for writing Hdf5 files? </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 6583, "user_id": 10426037, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6723e3123b9a13d6360d1ee755f8728?s=128&d=identicon&r=PG&f=1", "display_name": "Valentino", "link": "https://stackoverflow.com/users/10426037/valentino"}, "edited": false, "score": 0, "creation_date": 1556742063, "post_id": 55942198, "comment_id": 98537695, "body": "Hello! Can you add the code you wrote to read from the file and obtain the result? Also if you have tried anything to achieve what you want and the errors you get in case."}], "answers": [{"tags": [], "owner": {"reputation": 695, "user_id": 7343313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OB1ru.png?s=128&g=1", "display_name": "jonyfries", "link": "https://stackoverflow.com/users/7343313/jonyfries"}, "is_accepted": false, "score": 4, "last_activity_date": 1556742452, "creation_date": 1556742452, "answer_id": 55942315, "question_id": 55942198, "link": "https://stackoverflow.com/questions/55942198/creating-a-list-of-list-from-a-text-input/55942315#55942315", "title": "Creating a list of list from a text input", "body": "<p>Assuming that the length of raw will always be divisible by sink this will get you what you need!</p>\n\n<pre><code>sink = 4\nraw = ['0', '5', '3', '0', '0', '0', '2', '4', '0', '0', '0', '5', '0', '0', '0', '0']\n\ng = [raw[i:i+sink] for i in range(0, len(raw), sink)]\n\nprint(g)\n</code></pre>\n\n<p>If you prefer it not in a comprehension then this would be the loop:</p>\n\n<pre><code>sink = 4\nraw = ['0', '5', '3', '0', '0', '0', '2', '4', '0', '0', '0', '5', '0', '0', '0', '0']\n\ng = []\nfor i in range(0, len(raw), sink):\n    g.append(raw[i:i+sink])\n\nprint(g)\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 9500206, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Enrique", "link": "https://stackoverflow.com/users/9500206/enrique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556742759, "creation_date": 1556741816, "last_edit_date": 1556742424, "question_id": 55942198, "link": "https://stackoverflow.com/questions/55942198/creating-a-list-of-list-from-a-text-input", "title": "Creating a list of list from a text input", "body": "<p>I am attempting to create a list that contains lists that is read in from a .txt file. Preferably the inner list well be integers</p>\n\n<p>I have created two variables created from the text file sink which is the first and raw which is a slice of the orginal text file from [1:]</p>\n\n<p>example input from txt file</p>\n\n<p>4,0,5,3,0,0,0,2,4,0,0,0,5,0,0,0,0</p>\n\n<p>sink = 4</p>\n\n<p>raw = ['0', '5', '3', '0', '0', '0', '2', '4', '0', '0', '0', '5', '0', '0', '0', '0']</p>\n\n<p>The first number represents the division (4) and well change as the lists get larger or smaller.\nSo I would want to create something like this\ng = [[0,5,3,0],[0,0,2,4],[0,0,0,5],[0,0,0,0]]</p>\n\n<p>Apologies I deleted my attempts.</p>\n\n<pre><code>class Reader:\n    #place holder for rawData\n   rawData = []\n   file = open(\"test4.txt\")\n   rawData = file.read()\n   file.close()     \n   rawData = rawData.split(',')\n\nr = Reader()\nsink = int(r.rawData[0])\nsource = 0 #(this is for calculations in other parts of the program)\nraw = r.rawData[1:]\n</code></pre>\n"}, {"tags": ["python", "keras", "scikit-learn", "neural-network", "normalization"], "comments": [{"owner": {"reputation": 5466, "user_id": 10337630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc8062b598a897a7b97990343d3e9f3?s=128&d=identicon&r=PG&f=1", "display_name": "sentence", "link": "https://stackoverflow.com/users/10337630/sentence"}, "edited": false, "score": 0, "creation_date": 1556750201, "post_id": 55942184, "comment_id": 98540207, "body": "What does <code>Y</code> represent?"}, {"owner": {"reputation": 77, "user_id": 10855447, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3gynZdaduds/AAAAAAAAAAI/AAAAAAAAADM/k3rbugtmd_Y/photo.jpg?sz=128", "display_name": "Halt", "link": "https://stackoverflow.com/users/10855447/halt"}, "reply_to_user": {"reputation": 5466, "user_id": 10337630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc8062b598a897a7b97990343d3e9f3?s=128&d=identicon&r=PG&f=1", "display_name": "sentence", "link": "https://stackoverflow.com/users/10337630/sentence"}, "edited": false, "score": 0, "creation_date": 1556750550, "post_id": 55942184, "comment_id": 98540281, "body": "@sentence Y represents the 3rd col of my csv file wich is my output (large numbers as i said in my post)"}, {"owner": {"reputation": 5466, "user_id": 10337630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc8062b598a897a7b97990343d3e9f3?s=128&d=identicon&r=PG&f=1", "display_name": "sentence", "link": "https://stackoverflow.com/users/10337630/sentence"}, "edited": false, "score": 0, "creation_date": 1556750679, "post_id": 55942184, "comment_id": 98540316, "body": "Then, why do you scale the ouput? Is there any reason?"}, {"owner": {"reputation": 77, "user_id": 10855447, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3gynZdaduds/AAAAAAAAAAI/AAAAAAAAADM/k3rbugtmd_Y/photo.jpg?sz=128", "display_name": "Halt", "link": "https://stackoverflow.com/users/10855447/halt"}, "reply_to_user": {"reputation": 5466, "user_id": 10337630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc8062b598a897a7b97990343d3e9f3?s=128&d=identicon&r=PG&f=1", "display_name": "sentence", "link": "https://stackoverflow.com/users/10337630/sentence"}, "edited": false, "score": 0, "creation_date": 1556750947, "post_id": 55942184, "comment_id": 98540366, "body": "No, you&#39;re right i shouldn&#39;t scale the output, didn&#39;t even noticed i changed it. But at first I was not scaling Y and the problem was already there."}, {"owner": {"reputation": 1135, "user_id": 7126023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1e2add037b5642aef940f8315de7e71?s=128&d=identicon&r=PG&f=1", "display_name": "kruxx", "link": "https://stackoverflow.com/users/7126023/kruxx"}, "edited": false, "score": 0, "creation_date": 1556779498, "post_id": 55942184, "comment_id": 98546544, "body": "@Halt You should also scale your output as well because your output is in range of 1 000 to 150 000 000. This is vary large value to manipulate by gradient so, it might change from 1 000 to 100 000 on next iteration which can change gradient at very high ups and downs and also there might be vast difference in your loss as well. To avoid this I would prefer to use normalization on outlut as well with mean and standard deviation so, model can easily converge. And when you predict the result use the same mean and standard deviation values (which you have used for normalize) to retrive the data."}], "answers": [{"tags": [], "owner": {"reputation": 5466, "user_id": 10337630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc8062b598a897a7b97990343d3e9f3?s=128&d=identicon&r=PG&f=1", "display_name": "sentence", "link": "https://stackoverflow.com/users/10337630/sentence"}, "is_accepted": false, "score": 0, "last_activity_date": 1556753982, "creation_date": 1556753982, "answer_id": 55943979, "question_id": 55942184, "link": "https://stackoverflow.com/questions/55942184/keras-nn-applying-different-scaling-normalization-on-inputs/55943979#55943979", "title": "Keras / NN - Applying different scaling/normalization on inputs", "body": "<p>Short answer to your question is another question: do I have <strong>prior knowledge</strong> about the importance of the features characterizing my dataset?</p>\n\n<ul>\n<li>if yes, I <strong>may</strong> scale my data in such a way that more important features have larger variance/range.</li>\n<li>if not, I <strong>should</strong> scale my data in such a way that features have mean 0 and standard deviation 1. Why? Mainly for improving numerical condition, removing the problem of scale dependence of the initial weights, making the training process faster, and reducing the risk of getting stuck in local optima.</li>\n</ul>\n\n<p>Do not underestimate the sensitivity of gradient descent methods to scaling.</p>\n\n<p>Finally, remember to use statistics (mean and standard deviation) from the training set to standardize the validation/test set.</p>\n"}], "owner": {"reputation": 77, "user_id": 10855447, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3gynZdaduds/AAAAAAAAAAI/AAAAAAAAADM/k3rbugtmd_Y/photo.jpg?sz=128", "display_name": "Halt", "link": "https://stackoverflow.com/users/10855447/halt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1616436965, "creation_date": 1556741730, "last_edit_date": 1616436965, "question_id": 55942184, "link": "https://stackoverflow.com/questions/55942184/keras-nn-applying-different-scaling-normalization-on-inputs", "title": "Keras / NN - Applying different scaling/normalization on inputs", "body": "<p>on my journey learning ML I was testing some NN and I was seeing that my output doesn't seem to take into consideration one of my 3 inputs which is very important.</p>\n<p>My dataset is composed of 4 cols (csv):</p>\n<ul>\n<li><p>3 are numbers (including the output) between 1 000 and can go up to 150 000 000</p>\n</li>\n<li><p>1 is a number between 0 and 100 which is the one that's not taken in consideration by my NN</p>\n</li>\n</ul>\n<p>I scale my dataset this way using MinMaxScaler from scikit-learn:</p>\n<pre><code>df = pd.read_csv('rawData.csv')\ndataset = df.values\n\nmin_max_scaler = preprocessing.MinMaxScaler()\ndataset = min_max_scaler.fit_transform(dataset)\n\nX = dataset[:,0:3] # input\nY = dataset[:,3]   # output\n</code></pre>\n<p>I also use another way to scale my data (when I want to test my model):</p>\n<pre><code>min_test = np.min(runset)\nmax_test = np.max(runset)\n\nnormalized = (runset - min_test) / (max_test - min_test)\n\ntest = model.predict(normalized)\n\nresult = test * (max_test - min_test) + min_test\n</code></pre>\n<p>So my question is: <strong>Is it possible and recommended to use different scales for different inputs?</strong> If yes how do I do that?</p>\n"}, {"tags": ["python", "boolean"], "comments": [{"owner": {"reputation": 6812, "user_id": 7371893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ris3Z.png?s=128&g=1", "display_name": "&#226;\u0144\u014d\u014b\u0177Xmo\u016f\u015c", "link": "https://stackoverflow.com/users/7371893/%c3%a2%c5%84%c5%8d%c5%8b%c5%b7xmo%c5%af%c5%9c"}, "edited": false, "score": 0, "creation_date": 1556741860, "post_id": 55942181, "comment_id": 98537608, "body": "remove &quot;is True&quot; and add isdigit().  isdigit() already returns True or False."}, {"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1556741861, "post_id": 55942181, "comment_id": 98537609, "body": "<code>if dna[end].isdigit():</code>"}], "answers": [{"comments": [{"owner": {"reputation": 448, "user_id": 5912544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90ed5b6437a6c0cec4e520d149313d1a?s=128&d=identicon&r=PG&f=1", "display_name": "MaximGi", "link": "https://stackoverflow.com/users/5912544/maximgi"}, "edited": false, "score": 0, "creation_date": 1556741965, "post_id": 55942208, "comment_id": 98537652, "body": "Doesn&#39;t a function object, being not empty, evaluates to True nonetheless ?"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "reply_to_user": {"reputation": 448, "user_id": 5912544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90ed5b6437a6c0cec4e520d149313d1a?s=128&d=identicon&r=PG&f=1", "display_name": "MaximGi", "link": "https://stackoverflow.com/users/5912544/maximgi"}, "edited": false, "score": 1, "creation_date": 1556742043, "post_id": 55942208, "comment_id": 98537683, "body": "Function objects are <i>truthy</i>, but they do not have the exact value <code>True</code>."}, {"owner": {"reputation": 448, "user_id": 5912544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90ed5b6437a6c0cec4e520d149313d1a?s=128&d=identicon&r=PG&f=1", "display_name": "MaximGi", "link": "https://stackoverflow.com/users/5912544/maximgi"}, "edited": false, "score": 0, "creation_date": 1556742093, "post_id": 55942208, "comment_id": 98537707, "body": "So <code>if function_name:</code> would pass but not <code>if function_name is True</code>, right ?"}, {"owner": {"reputation": 445, "user_id": 4717826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c83f029beec5b4aabaa10385395649cf?s=128&d=identicon&r=PG&f=1", "display_name": "Davo", "link": "https://stackoverflow.com/users/4717826/davo"}, "reply_to_user": {"reputation": 448, "user_id": 5912544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90ed5b6437a6c0cec4e520d149313d1a?s=128&d=identicon&r=PG&f=1", "display_name": "MaximGi", "link": "https://stackoverflow.com/users/5912544/maximgi"}, "edited": false, "score": 0, "creation_date": 1556742176, "post_id": 55942208, "comment_id": 98537732, "body": "@MaximGi the function or method object is neither True not False, if you cast it to bool() it will become True tho."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "reply_to_user": {"reputation": 445, "user_id": 4717826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c83f029beec5b4aabaa10385395649cf?s=128&d=identicon&r=PG&f=1", "display_name": "Davo", "link": "https://stackoverflow.com/users/4717826/davo"}, "edited": false, "score": 1, "creation_date": 1556742345, "post_id": 55942208, "comment_id": 98537787, "body": "@Davo how so?  <code>if sorted: print 1</code> does print 1.  Therefore the built-in function object <code>sorted</code> (and, presumably, all function objects) is a truth-like value."}, {"owner": {"reputation": 445, "user_id": 4717826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c83f029beec5b4aabaa10385395649cf?s=128&d=identicon&r=PG&f=1", "display_name": "Davo", "link": "https://stackoverflow.com/users/4717826/davo"}, "edited": false, "score": 0, "creation_date": 1556742396, "post_id": 55942208, "comment_id": 98537803, "body": "@JohnGordon oh yeah, thats equivalent to <code>if sorted not in [0, None, False]:</code> no problems here"}], "tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": true, "score": 4, "last_activity_date": 1556741979, "last_edit_date": 1556741979, "creation_date": 1556741847, "answer_id": 55942208, "question_id": 55942181, "link": "https://stackoverflow.com/questions/55942181/my-program-doesnt-recognize-isdigit-as-true/55942208#55942208", "title": "My program doesn&#39;t recognize .isdigit as True", "body": "<p><code>if dna[end].isdigit is True:</code></p>\n\n<p><code>isdigit()</code> is a function, not an attribute.</p>\n\n<p>You forgot the parentheses on the end, therefore you're referring to <em>the function object itself</em>, instead of the <em>result</em> of calling the function.</p>\n"}, {"tags": [], "owner": {"reputation": 1460, "user_id": 2804722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZjBig.jpg?s=128&g=1", "display_name": "Marc Sances", "link": "https://stackoverflow.com/users/2804722/marc-sances"}, "is_accepted": false, "score": 1, "last_activity_date": 1556742187, "last_edit_date": 1556742187, "creation_date": 1556741881, "answer_id": 55942212, "question_id": 55942181, "link": "https://stackoverflow.com/questions/55942181/my-program-doesnt-recognize-isdigit-as-true/55942212#55942212", "title": "My program doesn&#39;t recognize .isdigit as True", "body": "<p>You must actually call the <code>isdigit()</code> method:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>dna = 'a3'\nstart = 0\nend = 1\nif dna[end].isdigit():\n    print('Yes')\n</code></pre>\n\n<p>This gives your expected answer, True.</p>\n\n<p>If you do <code>dna[end].isdigit</code> it just gives an object <code>&lt;built-in method isdigit of str object at address&gt;</code> which won't evaluate.</p>\n"}, {"tags": [], "owner": {"reputation": 445, "user_id": 4717826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c83f029beec5b4aabaa10385395649cf?s=128&d=identicon&r=PG&f=1", "display_name": "Davo", "link": "https://stackoverflow.com/users/4717826/davo"}, "is_accepted": false, "score": 1, "last_activity_date": 1556742327, "last_edit_date": 1556742327, "creation_date": 1556741911, "answer_id": 55942219, "question_id": 55942181, "link": "https://stackoverflow.com/questions/55942181/my-program-doesnt-recognize-isdigit-as-true/55942219#55942219", "title": "My program doesn&#39;t recognize .isdigit as True", "body": "<p><code>dna[end].isdigit</code> in this case is referring to a <code>str.isdigit</code> function. \nIf you do <code>print(type(dna[end].isdigit))</code> you will see what I mean. </p>\n\n<p>To call the function instead, add paranthesis like this <code>if dna[end].isdigit():</code></p>\n"}, {"tags": [], "owner": {"reputation": 170, "user_id": 11379566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa71c1bd5dce42c41c0f804eddf4dbfa?s=128&d=identicon&r=PG&f=1", "display_name": "TCFP", "link": "https://stackoverflow.com/users/11379566/tcfp"}, "is_accepted": false, "score": 1, "last_activity_date": 1556742511, "last_edit_date": 1556742511, "creation_date": 1556742103, "answer_id": 55942256, "question_id": 55942181, "link": "https://stackoverflow.com/questions/55942181/my-program-doesnt-recognize-isdigit-as-true/55942256#55942256", "title": "My program doesn&#39;t recognize .isdigit as True", "body": "<p>Two things:</p>\n\n<ul>\n<li><p>there's no need to compare to true, just use the result from isdigit()</p></li>\n<li><p>isdigit() is a function, which is <em>truthy</em> on its own, but does not equate to True</p></li>\n</ul>\n\n<p>Check out the <a href=\"https://docs.python.org/3/library/stdtypes.html\" rel=\"nofollow noreferrer\">Python docs</a> for more info.</p>\n"}], "owner": {"reputation": 57, "user_id": 10897030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O4AtA.jpg?s=128&g=1", "display_name": "Daniel Vazome", "link": "https://stackoverflow.com/users/10897030/daniel-vazome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 55942208, "answer_count": 4, "score": 0, "last_activity_date": 1556742511, "creation_date": 1556741715, "question_id": 55942181, "link": "https://stackoverflow.com/questions/55942181/my-program-doesnt-recognize-isdigit-as-true", "title": "My program doesn&#39;t recognize .isdigit as True", "body": "<p>In my program I want to check if the stroke symbol is a common digit (0-9)</p>\n\n<p>.isnumeral works strange because it counts alphabeticals (a-z) as True, well then I lurked in and got that .isnumeral isn't actually searching exclusively for what I want - digits. And through the manual I found .isdigit but:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>dna = 'a3'\nstart = 0\nend = 1\nif dna[end].isdigit is True:\n    print('Yes')\n</code></pre>\n\n<p>It's not working and 'Yes' isn't showing as expected.</p>\n"}, {"tags": ["python", "operating-system"], "comments": [{"owner": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 0, "creation_date": 1556743764, "post_id": 55942169, "comment_id": 98538254, "body": "How are you downloading the file?"}, {"owner": {"reputation": 1, "user_id": 11438758, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Gb8h6S1jhME/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcNlminArte7ZPeTOzRz5rxPA7vxg/mo/photo.jpg?sz=128", "display_name": "Daniil Kostromin", "link": "https://stackoverflow.com/users/11438758/daniil-kostromin"}, "reply_to_user": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 0, "creation_date": 1556744008, "post_id": 55942169, "comment_id": 98538348, "body": "Using Selenium with Chrome, after setting the folder as Chrome&#39;s default download folder"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1556744396, "post_id": 55942606, "comment_id": 98538480, "body": "Directory operations should always be synchronized."}, {"owner": {"reputation": 1, "user_id": 11438758, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Gb8h6S1jhME/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcNlminArte7ZPeTOzRz5rxPA7vxg/mo/photo.jpg?sz=128", "display_name": "Daniil Kostromin", "link": "https://stackoverflow.com/users/11438758/daniil-kostromin"}, "edited": false, "score": 1, "creation_date": 1556745390, "post_id": 55942606, "comment_id": 98538815, "body": "os.sync seems to be unix only, but maybe os.fsync will work? I&#39;ll try it. I&#39;m not familiar with the inner workings of OSes, and I still don&#39;t understand how I ended up with only the file contents being deleted."}], "tags": [], "owner": {"reputation": 3670, "user_id": 7857466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7OW0s.png?s=128&g=1", "display_name": "progmatico", "link": "https://stackoverflow.com/users/7857466/progmatico"}, "is_accepted": false, "score": 0, "last_activity_date": 1556745784, "last_edit_date": 1556745784, "creation_date": 1556744076, "answer_id": 55942606, "question_id": 55942169, "link": "https://stackoverflow.com/questions/55942169/os-remove-acting-weird-by-removing-the-contents-of-the-file-but-not-the-file-it/55942606#55942606", "title": "os.remove acting weird by removing the contents of the file, but not the file itself", "body": "<p>I suspect that's a buffer flush problem. Try following the remove with a call to <code>os.sync()</code>, <code>os.fsync()</code> on Windows, or see <a href=\"https://docs.python.org/3/library/functions.html?highlight=open#open\" rel=\"nofollow noreferrer\">here</a> for the <em>buffering</em> option to disable buffering when opening a file.</p>\n"}], "owner": {"reputation": 1, "user_id": 11438758, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Gb8h6S1jhME/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcNlminArte7ZPeTOzRz5rxPA7vxg/mo/photo.jpg?sz=128", "display_name": "Daniil Kostromin", "link": "https://stackoverflow.com/users/11438758/daniil-kostromin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1556745784, "creation_date": 1556741663, "question_id": 55942169, "link": "https://stackoverflow.com/questions/55942169/os-remove-acting-weird-by-removing-the-contents-of-the-file-but-not-the-file-it", "title": "os.remove acting weird by removing the contents of the file, but not the file itself", "body": "<p>I'm writing a web scraper that has to download 8000 files in total. In my script i download the files consecutively and delete the previous one after the relevant information has been extracted. To delete the file, i use \"os.remove(downloaded_file)\". So far, in 500+ downloads, 3 times it didnt remove the file, but just removed the contents of the file, so an exception happened when the script tried to copy things from an empty file. Has anyone experienced this or can explain what is happening? \nWorking on windows 10</p>\n\n<p>I couldn't fine any relevant information on this error so far. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def copy_to_master_and_delete_df(downloaded_file,master_file):\n    '''open a downloaded csv file, copy the data (line 10), append to master file and delete the downloaded file'''\n    while not os.path.exists(downloaded_file):\n        time.sleep(0.5)\n        log(f'waiting for {bank} {quarter} to download')\n    with open(downloaded_file, encoding='utf-8') as df:\n        data = list(df.readlines())[-1]\n    os.remove(downloaded_file)\n    while os.path.exists(downloaded_file):\n        time.sleep(0.1)\n        log(f'waiting for {bank} {quarter} to be deleted')\n    with open(master_file, 'a', encoding='utf-8') as mf:\n        mf.write(data)\n</code></pre>\n\n<p>On data = list(df.readlines())[-1] it gives an exception:</p>\n\n<pre><code>Exception has occurred: IndexError\nlist index out of range\n</code></pre>\n\n<p>It happens because of what is described earlier, the contents are removed, but not the file itself. \nTo work around this problem a little, i have put an infinite </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    while os.path.exists(downloaded_file):\n        time.sleep(0.1)\n        log(f'waiting for {bank} {quarter} to be deleted')\n</code></pre>\n\n<p>that allows me to manually delete the file and have the script not break down.</p>\n\n<p>I'm asking for help because it went to a next level. The script somehow jumped over the line where i check if the file  is deleted (again, the content is deleted but the file is not) and downloaded the next one, so the script crashed when it looked into an empty file.\nAny ideas to why this is happening or how to handle this?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1556743824, "post_id": 55942242, "comment_id": 98538285, "body": "Also, use <code>at</code> instead of <code>loc</code>"}, {"owner": {"reputation": 13, "user_id": 3241688, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041221272/picture?type=large", "display_name": "sadkeewee", "link": "https://stackoverflow.com/users/3241688/sadkeewee"}, "edited": false, "score": 0, "creation_date": 1556762490, "post_id": 55942242, "comment_id": 98542325, "body": "I actually managed to do it with this solution, but I didn&#39;t like it because of the loops. I&#39;d rather do it full pandas."}], "tags": [], "owner": {"reputation": 3809, "user_id": 3447515, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cPyHf.png?s=128&g=1", "display_name": "Cohan", "link": "https://stackoverflow.com/users/3447515/cohan"}, "is_accepted": false, "score": 4, "last_activity_date": 1556744265, "last_edit_date": 1556744265, "creation_date": 1556742029, "answer_id": 55942242, "question_id": 55942063, "link": "https://stackoverflow.com/questions/55942063/pandas-how-to-replace-values-in-a-data-frame-using-other-data-frames-columns/55942242#55942242", "title": "Pandas: How to replace values in a Data Frame using other Data Frame&#39;s columns", "body": "<p>You can use <code>df.iterrows()</code> to iterate through the rows of the second dataframe and use <code>df.at[]</code> to set the values where you need to.</p>\n\n<pre><code>df = pd.DataFrame([[0,0,0], [0,0,0], [0,0,0], [0,0,0]], columns=['201901', '201902', '201903'])\ndf.index=['a', 'b','c', 'd']\nprint(df)\n#    201901  201902  201903\n# a       0       0       0\n# b       0       0       0\n# c       0       0       0\n# d       0       0       0\n\ndfb = pd.DataFrame(['201902', '201901'], columns=['month'])\ndfb.index = ['a', 'b']\nprint(dfb)\n#     month\n# a  201902\n# b  201901\n\nfor i, row in dfb.iterrows():\n    df.at[i, row] = 1\n\nprint(df)\n#    201901  201902  201903\n# a       0       1       0\n# b       1       0       0\n# c       0       0       0\n# d       0       0       0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1556743125, "post_id": 55942399, "comment_id": 98538058, "body": "This is the right pandas&#39; way for this type of question"}, {"owner": {"reputation": 13, "user_id": 3241688, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041221272/picture?type=large", "display_name": "sadkeewee", "link": "https://stackoverflow.com/users/3241688/sadkeewee"}, "edited": false, "score": 0, "creation_date": 1556762136, "post_id": 55942399, "comment_id": 98542265, "body": "Can this be used without touching the other values in A? This solution is replacing with 0s the other values in the index,column combinations from B."}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1556797849, "post_id": 55942399, "comment_id": 98555538, "body": "sure, just make a copy of <code>dfA</code> (<code>dfC = dfA.copy()</code>) and use solution on the copy."}], "tags": [], "owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "is_accepted": false, "score": 2, "last_activity_date": 1556742842, "last_edit_date": 1592644375, "creation_date": 1556742842, "answer_id": 55942399, "question_id": 55942063, "link": "https://stackoverflow.com/questions/55942063/pandas-how-to-replace-values-in-a-data-frame-using-other-data-frames-columns/55942399#55942399", "title": "Pandas: How to replace values in a Data Frame using other Data Frame&#39;s columns", "body": "<p>Looks like there's no need to iterate. I have a simple solution using <code>pd.get_dummies</code> and <code>pd.DataFrame.update</code></p>\n<pre><code>dfA.update(pd.get_dummies(dfB.Month.apply(str)))\n</code></pre>\n<p>I used the <code>.apply(str)</code> because the content of dfB registered as an integer but the columns from A are strings, so the <code>update</code> won't work if the fields don't match</p>\n<h3>Output:</h3>\n<pre><code>       201901  201902  201903\nIndex                        \na         0.0     1.0       0\nb         1.0     0.0       0\nc         0.0     0.0       0\nd         0.0     0.0       0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 13, "user_id": 3241688, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041221272/picture?type=large", "display_name": "sadkeewee", "link": "https://stackoverflow.com/users/3241688/sadkeewee"}, "edited": false, "score": 0, "creation_date": 1556762626, "post_id": 55942722, "comment_id": 98542352, "body": "@user3241688 yw :-) happy coding"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 2, "last_activity_date": 1556744867, "creation_date": 1556744867, "answer_id": 55942722, "question_id": 55942063, "link": "https://stackoverflow.com/questions/55942063/pandas-how-to-replace-values-in-a-data-frame-using-other-data-frames-columns/55942722#55942722", "title": "Pandas: How to replace values in a Data Frame using other Data Frame&#39;s columns", "body": "<p>Numpy assign </p>\n\n<pre><code>df.values[df.index.get_indexer(dfb.index),df.columns.get_indexer(dfb.month)]=1\ndf\nOut[1081]: \n   201901  201902  201903\na       0       1       0\nb       1       0       0\nc       0       0       0\nd       0       0       0\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3241688, "user_type": "registered", "profile_image": "https://graph.facebook.com/1041221272/picture?type=large", "display_name": "sadkeewee", "link": "https://stackoverflow.com/users/3241688/sadkeewee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 625, "favorite_count": 2, "accepted_answer_id": 55942722, "answer_count": 3, "score": 1, "last_activity_date": 1557429113, "creation_date": 1556741168, "question_id": 55942063, "link": "https://stackoverflow.com/questions/55942063/pandas-how-to-replace-values-in-a-data-frame-using-other-data-frames-columns", "title": "Pandas: How to replace values in a Data Frame using other Data Frame&#39;s columns", "body": "<p>I want to replace the values in a dataframe A with \"1\" using another data frame as reference to map it, something like this:</p>\n\n<p>Original Data Frame A:</p>\n\n<pre><code>Index  201901    201902    201903\na      0         0         0\nb      0         0         0\nc      0         0         0\nd      0         0         0\n</code></pre>\n\n<p>Reference Data Frame B</p>\n\n<pre><code>Index  Month\na      201902\nb      201901\n</code></pre>\n\n<p>The result Data Frame C</p>\n\n<pre><code>Index  201901    201902    201903\na      0         1         0\nb      1         0         0\nc      0         0         0\nd      0         0         0\n</code></pre>\n\n<p>I've tried with loc but haven't found a way to make it work.\nAny suggestions?</p>\n"}, {"tags": ["python", "function", "object", "printing"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1556740967, "post_id": 55941946, "comment_id": 98537294, "body": "Don&#39;t call <code>input</code> inside <code>__init__</code>; let whoever is <i>instantiating</i> the class <code>student</code> call <code>input</code> to gather the necessary information, then pass that information via <i>arguments</i> to <code>student.__init__</code>. E.g, <code>name = input(...); adds = input(...); ...; a = student(name, addr, ...)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "is_accepted": false, "score": 10, "last_activity_date": 1556740601, "creation_date": 1556740601, "answer_id": 55941953, "question_id": 55941946, "link": "https://stackoverflow.com/questions/55941946/the-word-none-keeps-coming-up-on-every-line-of-output/55941953#55941953", "title": "The word &#39;None&#39; keeps coming up on every line of output", "body": "<p>You don't need to call <code>print</code> inside of <code>input</code> - just call <code>input</code>:</p>\n\n<pre><code>self.name = input('What is the Student Name?: ')\n</code></pre>\n\n<p>What's happening is that <code>print</code> is a function which prints the string you pass it, but doesn't return anything. </p>\n\n<p>You're passing the result of <code>print</code> to <code>input</code>, which prints what you pass it and then waits for input.</p>\n\n<p>Since <code>print</code> returns nothing (after printing what you told it), <code>input</code> is printing <code>None</code>.</p>\n"}], "owner": {"reputation": 141, "user_id": 11337273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce784861c15684a4f6dd7763d42ee2ca?s=128&d=identicon&r=PG&f=1", "display_name": "pythonNovice", "link": "https://stackoverflow.com/users/11337273/pythonnovice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1556741046, "answer_count": 1, "score": 0, "last_activity_date": 1556740601, "creation_date": 1556740549, "last_edit_date": 1556740598, "question_id": 55941946, "link": "https://stackoverflow.com/questions/55941946/the-word-none-keeps-coming-up-on-every-line-of-output", "closed_reason": "Duplicate", "title": "The word &#39;None&#39; keeps coming up on every line of output", "body": "<p>For an assignment in class, I am creating objects in a class called student(). It involves user input of student information then afterwards it outputs the student information in a nice format. However, each line in the console window prints out the word 'None' alongside asking the user for input. I am not sure why it's printing out and I want to address the issue. </p>\n\n<p>I believe that the problem lies where I define the function <strong>init</strong>(self) where I assign data members, but I have changed my code multiple ways and have had no luck yet.</p>\n\n<pre><code>class student(): \n\n     def __init__(self):\n\n        self.name = input(print('What is the Student Name?: '))\n        self.address = input(print('What is the Student address?: '))\n        self.city = input(print('In which city does the Student reside?: '))\n        self.state = input(print('In which state does the Student reside?: '))\n        self.zip = input(print('In which zip code does the student reside?: '))\n        self.id = input(print('What is the Student ID?: '))\n        self.gpa = input(print('What is the Student GPA?: '))\n\n        return\n\ndef formatInfo(list):\n\n    for student in list:\n        print('Student Name: ', student.name)\n        print('Address: ', student.address)\n        print('City: ', student.city)\n        print('State: ', student.state)\n        print('Zipcode: ', student.zip)\n        print('Student ID: ', student.id)\n        print('Student GPA: ', student.gpa)\n        print('')\n\na = student()\n\nb = student()\n\nc = student()\n\nstudent_list = [a,b,c]\n\nformatInfo(student_list)\n</code></pre>\n\n<p>I expect that the user will only see the question that is asked, not the word 'None' alongside the question.</p>\n"}, {"tags": ["python", "pandas", "csv", "data-analysis"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 11427469, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4IiI5BaML7c/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reYz-g399yuDmARaZOkqTQsK3CN3A/mo/photo.jpg?sz=128", "display_name": "Hoonin", "link": "https://stackoverflow.com/users/11427469/hoonin"}, "is_accepted": false, "score": 0, "last_activity_date": 1556742181, "last_edit_date": 1556742181, "creation_date": 1556741280, "answer_id": 55942085, "question_id": 55941941, "link": "https://stackoverflow.com/questions/55941941/sort-in-order-from-greatest-to-least-using-pandas-group-by/55942085#55942085", "title": "Sort in order from greatest to least using pandas group by", "body": "<p>This solves your problem!</p>\n\n<pre><code>df=df.groupby(df['Distributor'])['Tickets Sold'].sum()\ndf1=df[df.div(df.sum()).lt(0.01)]\ndf2=df.drop(df1.index)\nyourdf=pd.concat([df2,pd.Series(df1.sum(),index=['Others'])])\n\nyourdf = yourdf.sort_values(ascending=False)\nprint(yourdf)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 11438761, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkzyjB0WXPk/AAAAAAAAAAI/AAAAAAAAAB0/BhKyvWhp0ck/photo.jpg?sz=128", "display_name": "Saul Gamez", "link": "https://stackoverflow.com/users/11438761/saul-gamez"}, "edited": false, "score": 0, "creation_date": 1556741644, "post_id": 55942087, "comment_id": 98537518, "body": "sort_values() got an unexpected keyword argument &#39;by&#39;"}, {"owner": {"reputation": 110, "user_id": 10209763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Utc0O.jpg?s=128&g=1", "display_name": "Mitchell Leefers", "link": "https://stackoverflow.com/users/10209763/mitchell-leefers"}, "reply_to_user": {"reputation": 19, "user_id": 11438761, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkzyjB0WXPk/AAAAAAAAAAI/AAAAAAAAAB0/BhKyvWhp0ck/photo.jpg?sz=128", "display_name": "Saul Gamez", "link": "https://stackoverflow.com/users/11438761/saul-gamez"}, "edited": false, "score": 0, "creation_date": 1556741764, "post_id": 55942087, "comment_id": 98537577, "body": "Check out the documentation for the method here. Maybe you are using an earlier version of pandas? <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.sort_values.html\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/reference/api/&hellip;</a>"}], "tags": [], "owner": {"reputation": 110, "user_id": 10209763, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Utc0O.jpg?s=128&g=1", "display_name": "Mitchell Leefers", "link": "https://stackoverflow.com/users/10209763/mitchell-leefers"}, "is_accepted": false, "score": 0, "last_activity_date": 1556741293, "creation_date": 1556741293, "answer_id": 55942087, "question_id": 55941941, "link": "https://stackoverflow.com/questions/55941941/sort-in-order-from-greatest-to-least-using-pandas-group-by/55942087#55942087", "title": "Sort in order from greatest to least using pandas group by", "body": "<p>You can use the sort_values() method</p>\n\n<pre><code>   df.sort_values(by=['ColName'], ascending=False)\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11438761, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fkzyjB0WXPk/AAAAAAAAAAI/AAAAAAAAAB0/BhKyvWhp0ck/photo.jpg?sz=128", "display_name": "Saul Gamez", "link": "https://stackoverflow.com/users/11438761/saul-gamez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1556742181, "creation_date": 1556740540, "last_edit_date": 1556740766, "question_id": 55941941, "link": "https://stackoverflow.com/questions/55941941/sort-in-order-from-greatest-to-least-using-pandas-group-by", "title": "Sort in order from greatest to least using pandas group by", "body": "<p>Trying to sort from greatest to least of the sales of a company that also rearranges the names of the companies based on the index of the sales in the list.</p>\n\n<p>I cannot figure out what to try as I am stuck.</p>\n\n<pre><code>df=df.groupby(df['Distributor'])['Tickets Sold'].sum() \ndf1=df[df.div(df.sum()).lt(0.01)] df2=df.drop(df1.index) \nyourdf=pd.concat([df2,pd.Series(df1.sum(),index=['Others'])])\nprint(yourdf)\n</code></pre>\n\n<p>Instead of this. </p>\n\n<pre><code>20th Century Fox 141367982   \nFocus Features 18799261 \nLionsgate 75834308 \nParamount Pictures 86302817 \nSTX Entertainment 22606674 \nSony Pictures 102746480 \nUniversal 159556790 \nWalt Disney 315655340 \nWarner Bros. 216426845 \nOthers 74618013 \n</code></pre>\n\n<p>I need this. </p>\n\n<pre><code>Walt Disney 315655340 \nWarner Bros. 216426845 \nUniversal 159556790 \n20th Century Fox 141367982 \nSony Pictures 102746480 \nParamount Pictures 86302817 \nLionsgate 75834308\nOthers 74618013 \nSTX Entertainment 22606674 \nFocus Features 18799261\n</code></pre>\n"}]