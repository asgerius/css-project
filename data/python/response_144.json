[{"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "is_accepted": true, "score": 0, "last_activity_date": 1507766783, "creation_date": 1507766783, "answer_id": 46699366, "question_id": 46699307, "link": "https://stackoverflow.com/questions/46699307/adding-1-to-l-elements-in-list-starting-at-random-location/46699366#46699366", "title": "Adding 1 to L elements in list, starting at random location", "body": "<p>Don't recreate new lists all the time (list slicing creates copies), just increment each element as needed in a nested <code>for</code> loop:</p>\n\n<pre><code>genome = [0]*G\nfor x in range(R):\n    randlocation = random.randint(0,G-L)\n    for i in range(randlocation, randlocation+L):\n        genome[i] += 1\nprint genome\n</code></pre>\n\n<p>Using numpy is likely going to be even faster... since you can use vectorized operations on slices directly: something like <code>genome[randlocation:randlocation+L] += 1</code> (but using views rather than copies here)</p>\n"}, {"tags": [], "owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "is_accepted": false, "score": 0, "last_activity_date": 1507770474, "last_edit_date": 1507770474, "creation_date": 1507767693, "answer_id": 46699500, "question_id": 46699307, "link": "https://stackoverflow.com/questions/46699307/adding-1-to-l-elements-in-list-starting-at-random-location/46699500#46699500", "title": "Adding 1 to L elements in list, starting at random location", "body": "<p>While Julien's answer is efficient in its use of RAM, there's a faster way in plain Python. Use a list comprehension to perform the addition, and use slice assignment to copy the result back to the genome.</p>\n\n<pre><code>import random\n\n# Seed the randomizer so we can get consistent timings\nrandom.seed(42)\n\nG, R, L = 3000000, 40000, 500\ngenome = [0] * G\n\nfor x in range(R):\n    loc = random.randint(0, G-L)\n    genome[loc:loc + L] = [x+1 for x in genome[loc:loc + L]]\n</code></pre>\n\n<p>On my old 2GHz 32 bit machine running Python 3.6 that takes about 7 \u00b1 0.5 seconds. In contrast, using this loop to perform the update</p>\n\n<pre><code>for x in range(R):\n    loc = random.randint(0, G-L)\n    for i in range(loc, loc + L):\n        genome[i] += 1\n</code></pre>\n\n<p>takes around 18 \u00b1 0.5 seconds. But it does use more RAM since it needs to create an <code>L</code> sized lists on every loop. Of course, Python will recycle the memory used for those lists, and since <code>L</code> is only 500, that RAM use isn't worth worrying about.</p>\n\n<hr>\n\n<p>FWIW, if we do this using Numpy, we can drop the time down to 2 seconds or less. Another benefit is that Numpy arrays use native datatypes (machine integers in this case), so the RAM overheads are less than using lists of Python objects.</p>\n\n<pre><code>import numpy as np\nimport random\n\n# Seed the randomizer so we can get consistent timings\nrandom.seed(42)\n\nG, R, L = 3000000, 40000, 500\n\ngenome = np.zeros(G, dtype=np.int)\n\nfor x in range(R):\n    loc = random.randint(0, G-L)\n    genome[loc:loc + L] += 1\n</code></pre>\n\n<p>I'm not a Numpy expert, so there may be an even more efficient way to do this.</p>\n"}], "owner": {"reputation": 3, "user_id": 8762153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28885b0bfca124ee93b143f1e36e243b?s=128&d=identicon&r=PG&f=1", "display_name": "Dilan Patel", "link": "https://stackoverflow.com/users/8762153/dilan-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 46699366, "answer_count": 2, "score": 0, "last_activity_date": 1507770474, "creation_date": 1507766369, "question_id": 46699307, "link": "https://stackoverflow.com/questions/46699307/adding-1-to-l-elements-in-list-starting-at-random-location", "title": "Adding 1 to L elements in list, starting at random location", "body": "<p>This is the question:\nRepresent a genome of size G using a list with exactly G elements, where each element contains relevant information about that position, e.g., how many times the nucleotide at that position was sequenced. To simulate the sequencing process once, follow these steps:\n\u2022 Set all the elements in the list to 0 (to mark that each nucleotide has been sequenced 0 times).\n\u2022 Randomly select starting locations for R reads of size L, and for each read update the number of times\nthe nucleotides covered by the read were sequenced.</p>\n\n<p>so far I have this:</p>\n\n<pre><code>genome = [0]*G\nfor x in range(R):\n    randlocation = random.randint(0,G-L)\n    genome = genome[0:randlocation] + [x+1 for x in genome[randlocation:(randlocation+L)]] + genome[(randlocation+L):] \nprint genome\n</code></pre>\n\n<p>but this is too slow for the G, R, and L values we need to test it on (3000000, 40000, 500). Any help speeding this up would be much appreciated</p>\n"}, {"tags": ["python", "numpy", "int"], "comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 2, "creation_date": 1507766214, "post_id": 46699280, "comment_id": 80345998, "body": "The real question is why would you need to do this?"}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "reply_to_user": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 1, "creation_date": 1507815235, "post_id": 46699280, "comment_id": 80368347, "body": "@Julien It is a strange side-effect of certain numpy functions. e.g. <code>z = np.random.geometric(p=0.35, size=10000)</code> gives a different <code>type</code> than <code>z = np.random.geometric(p=0.35)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "is_accepted": false, "score": 4, "last_activity_date": 1507766439, "creation_date": 1507766439, "answer_id": 46699316, "question_id": 46699280, "link": "https://stackoverflow.com/questions/46699280/how-to-convert-python-int-into-numpy-int64/46699316#46699316", "title": "How to convert python int into numpy.int64?", "body": "<pre><code>import numpy as np\nz = 3\nz = np.dtype('int64').type(z)\nprint(type(z))\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>&lt;class 'numpy.int64'&gt;\n</code></pre>\n\n<p>But i support Juliens question in his comment.</p>\n"}, {"comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1507767482, "post_id": 46699347, "comment_id": 80346283, "body": "Nice! Just out of curiosity: is there a simple example (an outline would be enough) for some need of this (i don&#39;t doubt it exists)?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 3, "creation_date": 1507771466, "post_id": 46699347, "comment_id": 80347210, "body": "@sascha: Ensuring NumPy handling instead of regular Python handling for stuff like overflow, mostly."}, {"owner": {"reputation": 295, "user_id": 5317274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade91d92fa6e8b1de10bf68cbf8ad9b5?s=128&d=identicon&r=PG&f=1", "display_name": "EBo", "link": "https://stackoverflow.com/users/5317274/ebo"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 1, "creation_date": 1527240805, "post_id": 46699347, "comment_id": 88063682, "body": "@sascha  Since you asked for examples, I will give you two, but in general any program where you want to use integers and need numbers greater than 2,147,483,647, you will need an int64.  The first example is accounting.  You only need simple ints when running the books for most things.  Now imagine you want to balance the books for the entire nation (which has GDP&#39;s in the trillions).  You cannot keep that number in an int32.  I am working on identifying trees across a 10 million square kilometer area of Africa and want to uniquely id them.  That number is more than a max int32."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 295, "user_id": 5317274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade91d92fa6e8b1de10bf68cbf8ad9b5?s=128&d=identicon&r=PG&f=1", "display_name": "EBo", "link": "https://stackoverflow.com/users/5317274/ebo"}, "edited": false, "score": 3, "creation_date": 1527266521, "post_id": 46699347, "comment_id": 88079117, "body": "@EBo: Python ints are arbitrary precision; they have <i>more</i> range than a <code>numpy.int64</code>."}, {"owner": {"reputation": 295, "user_id": 5317274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ade91d92fa6e8b1de10bf68cbf8ad9b5?s=128&d=identicon&r=PG&f=1", "display_name": "EBo", "link": "https://stackoverflow.com/users/5317274/ebo"}, "edited": false, "score": 0, "creation_date": 1527533089, "post_id": 46699347, "comment_id": 88153593, "body": "@user2357112 You appear to be correct!  It is explained and demonstrated in <a href=\"https://stackoverflow.com/questions/21031093/python-and-arbitrary-precision-integers\" title=\"python and arbitrary precision integers\">stackoverflow.com/questions/21031093/&hellip;</a>  I had never heard about a separate integer division &#39;//&#39;.  It is a little different between python 2 and 3, so you need to check compatibility.  Specifically, python2 type(9999999999999/3) is long, and python3 it is float.  With the usage of &#39;//&#39; pyth2 returns a long, and python3 and in.  Interestingly enough python does not appear to have a BigFloat or float128, but numpy does.  Again thanks for teaching something new in python."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 28, "last_activity_date": 1594123996, "last_edit_date": 1594123996, "creation_date": 1507766623, "answer_id": 46699347, "question_id": 46699280, "link": "https://stackoverflow.com/questions/46699280/how-to-convert-python-int-into-numpy-int64/46699347#46699347", "title": "How to convert python int into numpy.int64?", "body": "<pre><code>z_as_int64 = numpy.int64(z)\n</code></pre>\n<p>It's that simple. Make sure you have a good reason, though - there <em>are</em> a few good reasons to do this, but most of the time, you can just use a regular <code>int</code> directly.</p>\n"}], "owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56750, "favorite_count": 0, "accepted_answer_id": 46699347, "answer_count": 2, "score": 17, "last_activity_date": 1594123996, "creation_date": 1507766155, "question_id": 46699280, "link": "https://stackoverflow.com/questions/46699280/how-to-convert-python-int-into-numpy-int64", "title": "How to convert python int into numpy.int64?", "body": "<p>Given a variable in python of type <code>int</code>, e.g. </p>\n\n<pre><code>z = 50\ntype(z) \n## outputs &lt;class 'int'&gt;\n</code></pre>\n\n<p>is there a straightforward way to convert this variable into <code>numpy.int64</code>? </p>\n\n<p>It appears one would have to convert this variable into a numpy array, and then convert this into int64. That feels quite convoluted.</p>\n\n<p><a href=\"https://docs.scipy.org/doc/numpy-1.13.0/user/basics.types.html\" rel=\"noreferrer\">https://docs.scipy.org/doc/numpy-1.13.0/user/basics.types.html</a></p>\n"}, {"tags": ["python", "python-requests", "autodesk-forge"], "comments": [{"owner": {"reputation": 4120, "user_id": 4916074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pIJHf.jpg?s=128&g=1", "display_name": "Philippe", "link": "https://stackoverflow.com/users/4916074/philippe"}, "edited": false, "score": 0, "creation_date": 1507787403, "post_id": 46699226, "comment_id": 80351638, "body": "Hard to tell based on such a thin description... can you show the bucket_id and objet_name? Are they correct? You can only upload a single resource to a given storage created at step 3. Also the error response should contain metadata in addition to the http code that may give a hint"}, {"owner": {"reputation": 19772, "user_id": 7376, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5b984e34330d801c7ba96f53c2a312e9?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/7376/tom"}, "reply_to_user": {"reputation": 4120, "user_id": 4916074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pIJHf.jpg?s=128&g=1", "display_name": "Philippe", "link": "https://stackoverflow.com/users/4916074/philippe"}, "edited": false, "score": 0, "creation_date": 1507814002, "post_id": 46699226, "comment_id": 80367515, "body": "@PhilippeLeefsma yes, the info is correct, the bucket and object info is working in the previous step. The metadata simply tells me I have a permission problem which seems misleading given the prior step (and every other bit I am doing) works with the same token&#39;s scopes."}, {"owner": {"reputation": 19772, "user_id": 7376, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5b984e34330d801c7ba96f53c2a312e9?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/7376/tom"}, "reply_to_user": {"reputation": 4120, "user_id": 4916074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pIJHf.jpg?s=128&g=1", "display_name": "Philippe", "link": "https://stackoverflow.com/users/4916074/philippe"}, "edited": false, "score": 0, "creation_date": 1507814880, "post_id": 46699226, "comment_id": 80368080, "body": "I&#39;ve added the logs of what I get back and need to correct my last comment: I don&#39;t know if the bucket id is correct based on the prior storage request, so I will focus on finding that out. The bucket id in my log above seems relatively short compared to other ids."}], "answers": [{"comments": [{"owner": {"reputation": 19772, "user_id": 7376, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5b984e34330d801c7ba96f53c2a312e9?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/7376/tom"}, "edited": false, "score": 0, "creation_date": 1507814818, "post_id": 46708242, "comment_id": 80368041, "body": "Thanks for the code, it looks pretty much the same as mine though. Can you tell from the logs I&#39;ve added what I may be doing wrong?"}, {"owner": {"reputation": 19772, "user_id": 7376, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5b984e34330d801c7ba96f53c2a312e9?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/7376/tom"}, "edited": false, "score": 0, "creation_date": 1507822616, "post_id": 46708242, "comment_id": 80373618, "body": "Thanks, that moved me along as it turned out I needed to check if the bucket exists, which isn&#39;t listed <a href=\"https://developer.autodesk.com/en/docs/data/v2/tutorials/upload-file/\" rel=\"nofollow noreferrer\">between steps 3 and 4 here</a> and I wasn&#39;t stripping the <code>:</code> off my bucket id."}], "tags": [], "owner": {"reputation": 1438, "user_id": 6510144, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0D0lW.png?s=128&g=1", "display_name": "Xiaodong Liang", "link": "https://stackoverflow.com/users/6510144/xiaodong-liang"}, "is_accepted": true, "score": 1, "last_activity_date": 1507807032, "creation_date": 1507807032, "answer_id": 46708242, "question_id": 46699226, "link": "https://stackoverflow.com/questions/46699226/put-file-data-to-a-autodesk-api-with-python-requests/46708242#46708242", "title": "PUT file data to a Autodesk API with Python Requests", "body": "<p>We had a sample code with Python in the past with v1 endpoints. I migrated to v2 today. It looks working well. Could you take a look if it could help you to address the issue you are having? \n<a href=\"https://github.com/xiaodongliang/forge.workflow-python-sample\" rel=\"nofollow noreferrer\">https://github.com/xiaodongliang/forge.workflow-python-sample</a></p>\n"}], "owner": {"reputation": 19772, "user_id": 7376, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5b984e34330d801c7ba96f53c2a312e9?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/7376/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 46708242, "answer_count": 1, "score": 0, "last_activity_date": 1507814734, "creation_date": 1507765745, "last_edit_date": 1507814734, "question_id": 46699226, "link": "https://stackoverflow.com/questions/46699226/put-file-data-to-a-autodesk-api-with-python-requests", "title": "PUT file data to a Autodesk API with Python Requests", "body": "<p>I am following the process described <a href=\"https://developer.autodesk.com/en/docs/data/v2/tutorials/upload-file/\" rel=\"nofollow noreferrer\">here</a> but getting stopped by a <code>403</code> at Step 4. I have a token with <code>data:write</code> and <code>data:create</code> scopes as <a href=\"https://developer.autodesk.com/en/docs/data/v2/reference/http/buckets-:bucketKey-objects-:objectName-PUT/\" rel=\"nofollow noreferrer\">specified in the docs</a> (and other API methods needing those scopes work) but I can't get a successful response and I think it's down to how I am sending the file data. My code looks like this:</p>\n\n<pre><code>url = '{}oss/v2/buckets/{}/objects/{}'.format(self.DOMAIN, bucket_id, object_name)\nwith open(file_path, 'rb') as f:\n    file_content = f.read()\nresponse = self.session.put(url, data=file_content, headers={\n    'content-type': 'application/octet-stream'\n}\n</code></pre>\n\n<p>The auth token is already included in the session's headers. Here are the logs from the upload process:</p>\n\n<pre><code>INFO Creating storage for README.md file in Test Project project, folder urn:adsk.wipprod:fs.folder:co.XXXXXXXXXXXXXXXX\nINFO Storage success, start PUT file to https://developer.api.autodesk.com/oss/v2/buckets/:wip.dm.prod/objects/eb0e0379-9958-45b5-8bb0-5f4111b7a037.md\nWARNING Upload failed, status 403: {\"developerMessage\":\"ACM check failed, user or calling service does not have access to perform this operation\",\"userMessage\":\"\",\"errorCode\":\"AUTH-012\",\"more info\":\"http://developer.api.autodesk.com/documentation/v1/errors/AUTH-012\"}\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 774, "user_id": 7056292, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tLf73.jpg?s=128&g=1", "display_name": "Ajmal Noushad", "link": "https://stackoverflow.com/users/7056292/ajmal-noushad"}, "edited": false, "score": 0, "creation_date": 1507770911, "post_id": 46699216, "comment_id": 80347082, "body": "What is the exact error that happens when you uncomment and connect?"}], "answers": [{"tags": [], "owner": {"reputation": 37767, "user_id": 641249, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XlsKx.jpg?s=128&g=1", "display_name": "neverwalkaloner", "link": "https://stackoverflow.com/users/641249/neverwalkaloner"}, "is_accepted": false, "score": 0, "last_activity_date": 1507771048, "creation_date": 1507771048, "answer_id": 46699891, "question_id": 46699216, "link": "https://stackoverflow.com/questions/46699216/how-to-use-string-field-values-as-url-parameters-in-django-and-verify-their-exis/46699891#46699891", "title": "How to use string field values as URL parameters in Django and verify their existence or serve 404?", "body": "<p>Django <code>filter</code> does not raise DoesNotExists error.\nYou can rewrite your code to this:</p>\n\n<pre><code>def manufacturer(request, manufacturer_title):\n    m = Manufacturer.objects.filter(title__iexact=manufacturer_title)\n    if not m.exists():\n        raise Http404(\"No such manufacturer\")\n    return HttpResponse(\"Manufacturer: %s\" % manufacturer_title)\n</code></pre>\n\n<p>or if <code>title</code> is uqique field you can just use <code>get()</code>:</p>\n\n<pre><code>  try:\n       m = Manufacturer.objects.get(title__iexact=manufacturer_title)\n  except Manufacturer.DoesNotExist:\n       raise Http404(\"No such manufacturer\")\n  return HttpResponse(\"Manufacturer: %s\" % m.title)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 774, "user_id": 7056292, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tLf73.jpg?s=128&g=1", "display_name": "Ajmal Noushad", "link": "https://stackoverflow.com/users/7056292/ajmal-noushad"}, "is_accepted": false, "score": 0, "last_activity_date": 1507772283, "last_edit_date": 1507772283, "creation_date": 1507771872, "answer_id": 46700008, "question_id": 46699216, "link": "https://stackoverflow.com/questions/46699216/how-to-use-string-field-values-as-url-parameters-in-django-and-verify-their-exis/46700008#46700008", "title": "How to use string field values as URL parameters in Django and verify their existence or serve 404?", "body": "<p><strong>filter</strong> does not raise an exception. May be you are trying to get a unique object, It can be done with <strong>get</strong> like this:</p>\n\n<pre><code>  Manufacturer.objects.get(title__iexact=manufacturer_title)\n</code></pre>\n\n<p>Now <strong>get</strong> will raise an exception if the object does not exist.</p>\n\n<p>What you require in your case can be done with a shortcut function too. Like this:\nIf you require a single object:</p>\n\n<pre><code> from django.shortcuts import get_object_or_404\n\n def manufacturer(request, manufacturer_title):\n      m = get_object_or_404(Manufacturer, title__iexact=manufacturer_title)\n      return HttpResponse(\"Manufacturer: %s\" % manufacturer_title)\n</code></pre>\n\n<p>If you require a queryset:</p>\n\n<pre><code>   from django.shortcuts import get_list_or_404\n\n   def manufacturer(request, manufacturer_title):\n      m = get_list_or_404(Manufacturer, title__contains=manufacturer_title)\n      return HttpResponse(\"Manufacturer: %s\" % manufacturer_title)\n</code></pre>\n"}], "owner": {"reputation": 731, "user_id": 1761927, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/32aba01561920142b03771b79774baae?s=128&d=identicon&r=PG", "display_name": "user163831", "link": "https://stackoverflow.com/users/1761927/user163831"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1507772283, "creation_date": 1507765641, "question_id": 46699216, "link": "https://stackoverflow.com/questions/46699216/how-to-use-string-field-values-as-url-parameters-in-django-and-verify-their-exis", "title": "How to use string field values as URL parameters in Django and verify their existence or serve 404?", "body": "<p>I have </p>\n\n<pre><code>def manufacturer(request, manufacturer_title):\n#try:\n#    m = Manufacturer.objects.filter(title__iexact=manufacturer_title)\n#except Manufacturer.DoesNotExist:\n#    raise Http404(\"No such manufacturer\")\nreturn HttpResponse(\"Manufacturer: %s\" % manufacturer_title)\n#return HttpResponse(\"Manufacturer: %s\" % m.title)\n</code></pre>\n\n<p>You can see what I'm trying to do here. With only that second to last line not commented out, this works for any value entered for manufacturer_title, and prints it however it's typed, no matter whether it's valid or not. However clearly I need it to match an existing manufacturer. If I un-comment the above commented lines (excluding the last) the server is unable to connect. </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1678, "user_id": 6895491, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157453976390237/picture?type=large", "display_name": "Brenden Petersen", "link": "https://stackoverflow.com/users/6895491/brenden-petersen"}, "edited": false, "score": 0, "creation_date": 1507766764, "post_id": 46699209, "comment_id": 80346115, "body": "I would suggest editing your original data, if that&#39;s possible. Currently, the rows alternate between labels and data. There are only 6 real data points here. Then there&#39;s an index (1, 2, 3) and header (&quot;A&quot;, &quot;B&quot;)."}, {"owner": {"reputation": 9, "user_id": 8762030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c26cb5e20ce63d126f0dd7a3d3b3edb?s=128&d=identicon&r=PG&f=1", "display_name": "PythonicRitual", "link": "https://stackoverflow.com/users/8762030/pythonicritual"}, "reply_to_user": {"reputation": 1678, "user_id": 6895491, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157453976390237/picture?type=large", "display_name": "Brenden Petersen", "link": "https://stackoverflow.com/users/6895491/brenden-petersen"}, "edited": false, "score": 0, "creation_date": 1507767536, "post_id": 46699209, "comment_id": 80346302, "body": "Thanks for your reply.  Unfortunately I am stuck with the format, which is frustrating.  Would it be better to dump it all into a list, line by line, and then manipulate from there?  The current approach uses Excel VBA which is very slow and cumbersome."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 8762030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c26cb5e20ce63d126f0dd7a3d3b3edb?s=128&d=identicon&r=PG&f=1", "display_name": "PythonicRitual", "link": "https://stackoverflow.com/users/8762030/pythonicritual"}, "edited": false, "score": 0, "creation_date": 1507840120, "post_id": 46699603, "comment_id": 80383026, "body": "That works really well, thank you!  How would I go about accessing the xi and yi lists from outside the function further down in the script?  I&#39;d like to do some data analysis on the values.  Thanks again. :)"}, {"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "reply_to_user": {"reputation": 9, "user_id": 8762030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c26cb5e20ce63d126f0dd7a3d3b3edb?s=128&d=identicon&r=PG&f=1", "display_name": "PythonicRitual", "link": "https://stackoverflow.com/users/8762030/pythonicritual"}, "edited": false, "score": 0, "creation_date": 1507843188, "post_id": 46699603, "comment_id": 80384627, "body": "@PythonicRitual You can run a similar loop again, because <code>xi</code> and <code>yi</code> exist temporarily. They are nothing more than the elements of <code>x</code> and <code>y[column]</code>. If you mean <code>x</code> and <code>y</code> in general, you can simply store the result of the function like so, <code>x, y, legends, labels = load_data(file)</code>. I just nested the two functions for the sake of brevity."}], "tags": [], "owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "is_accepted": true, "score": 0, "last_activity_date": 1507770473, "last_edit_date": 1507770473, "creation_date": 1507768623, "answer_id": 46699603, "question_id": 46699209, "link": "https://stackoverflow.com/questions/46699209/awkward-csv-to-2d-3d-list-in-python/46699603#46699603", "title": "Awkward CSV to 2D/3D list in Python", "body": "<p>If you want to plot your data, the best format is a list for <code>x</code> and a list of lists for <code>y</code>. And naturally, a list of lists for the labels.</p>\n\n<p>The legends are in the first line, so you can read that and be done with it. Then read every two lines to extract the x and label data and then read every two lines again with an offset of 1 to read all the y data. Some <code>zip()</code> and unpacking magic and you're done.</p>\n\n<pre><code>import csv\n\nimport matplotlib.pyplot as plt\n\ndef load_data(file):\n    reader = csv.reader(open(file, 'r', newline=''))\n    lines = tuple(reader)\n\n    legends = lines[0][1:]\n    x, *labels = zip(*lines[1::2])\n    _, *y = zip(*lines[2::2])\n    # must convert the data from strings to integers\n    # if floats are allowed in the data, use `float` instead\n    x = tuple(map(int, x))\n    y = tuple(tuple(map(int, column)) for column in y)\n\n    return x, y, legends, labels\n\ndef plot_columns(x, y, legends, labels):\n    for k in range(len(y)):\n        plt.plot(x, y[k])\n        for xi, yi, ilabel in zip(x, y[k], labels[k]):\n            plt.annotate(ilabel, xy=(xi, yi), textcoords='data')\n    plt.legend(legends)\n    plt.show()\n\nplot_columns(*load_data('datafiel1.csv'))\n</code></pre>\n\n<p>If you're on Python 2, the unpacking in <code>x, *labels = zip(*lines[1::2])</code> is not allowed. Instead, do it in steps</p>\n\n<pre><code># for x and labels\ntemp = zip(*lines[1::2])\nx, labels = temp[0], temp[1:]\n# for y\ny = zip(*lines[2::2])[1:]\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 8762030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c26cb5e20ce63d126f0dd7a3d3b3edb?s=128&d=identicon&r=PG&f=1", "display_name": "PythonicRitual", "link": "https://stackoverflow.com/users/8762030/pythonicritual"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 46699603, "answer_count": 1, "score": 0, "last_activity_date": 1507770473, "creation_date": 1507765569, "last_edit_date": 1507766166, "question_id": 46699209, "link": "https://stackoverflow.com/questions/46699209/awkward-csv-to-2d-3d-list-in-python", "title": "Awkward CSV to 2D/3D list in Python", "body": "<p>I have some data in a CSV as shown further down.  I am trying to get it into a sensible form, so I can plot the common x-axis [1, 2, 3] against y-axes [18, 22, 24] and [58, 68, 55] with 'A' and 'B' as the legends.</p>\n\n<p>My current thoughts are that the following structure would be easiest, although I get repetition of the x-axis.</p>\n\n<pre><code>[['A',[1,'A1',18],[2,'A2',22],[3,'A3',24]],\n ['B',[1,'B4',58],[2,'B4',68],[3,'B6',55]]]\n</code></pre>\n\n<p>Here is the ugly data.  As you can probably tell, A and B are headers.  18 corresponds to A1 at point 1, 22 to A2 at point 2, etc.  I tried checking for the empty 'cell' and inserting into the current array, however it got very messy, and I am stuck trying to extend this so that it could cope with 50+ columns and 20+ lines.</p>\n\n<pre><code>,A,B\n1,A1,B4\n,18,58\n2,A2,B5\n,22,68\n3,A3,B6\n,24,55\n</code></pre>\n\n<p>The advice <a href=\"https://stackoverflow.com/questions/24606650/reading-csv-file-and-inserting-it-into-2d-list-in-python?newreg=a295aacd64a14487bb28be8ffd4e8d2c\">here</a> was helpful but I couldn't apply it to my situation.  The below code worked for one column but required further manipulation and broke down once I added additional columns to the CSV file.</p>\n\n<pre><code>import csv\n\narr = []\n\ndatafile = open('datafile1.csv', 'r', newline='')\nreader = csv.reader(datafile)\nfor row in reader:\n    if row[0] != \"\":\n        #print(row)\n        arr.append(row)\n    elif row[1] != \"\":\n        arr[-1].insert(len(arr),row[1])\n\ndatafile.close()\n</code></pre>\n\n<p>Thanks in advance for any help you can provide!</p>\n"}, {"tags": ["python", "json", "leaflet", "netcdf"], "answers": [{"comments": [{"owner": {"reputation": 106, "user_id": 3063618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccbd5533abcb9308b08a15dff6e78710?s=128&d=identicon&r=PG&f=1", "display_name": "Franke Hsu", "link": "https://stackoverflow.com/users/3063618/franke-hsu"}, "edited": false, "score": 0, "creation_date": 1507916623, "post_id": 46702045, "comment_id": 80417308, "body": "Thanks ghybs, this does rescue me from several days bug search game."}], "tags": [], "owner": {"reputation": 34057, "user_id": 5108796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf3d4505d0473b230f8b413248f7439f?s=128&d=identicon&r=PG&f=1", "display_name": "ghybs", "link": "https://stackoverflow.com/users/5108796/ghybs"}, "is_accepted": true, "score": 0, "last_activity_date": 1507786039, "creation_date": 1507786039, "answer_id": 46702045, "question_id": 46699194, "link": "https://stackoverflow.com/questions/46699194/leaflet-velocity-cannot-read-property-data-of-null/46702045#46702045", "title": "leaflet-velocity - cannot read property &#39;data&#39; of null", "body": "<p>If you step down the error call stack, you will inspect <a href=\"https://github.com/danwild/leaflet-velocity/blob/v1.2.1/src/js/windy.js#L79-L98\" rel=\"nofollow noreferrer\"><code>createBuilder</code></a> function which shows you how it extracts <code>uComp</code> and <code>vComp</code> from your provided JSON data.</p>\n\n<p>You will see that it uses your records header <code>parameterCategory</code> and <code>parameterNumber</code> fields to determine whether the record data should be assigned to <code>uComp</code> or <code>vComp</code>:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>switch (record.header.parameterCategory + \",\" + record.header.parameterNumber) {\n  case \"1,2\":\n  case \"2,2\":\n    uComp = record;\n    break;\n  case \"1,3\":\n  case \"2,3\":\n    vComp = record;\n    break;\n  default:\n    scalar = record;\n}\n</code></pre>\n\n<p>It looks like your data has 2 records with exactly the same values for these 2 fields:</p>\n\n<pre><code>\"parameterNumber\": 2,\n\"parameterCategory\": 2\n</code></pre>\n\n<p>Therefore you do not seem to provide <code>vComp</code> type record.</p>\n\n<p>By forcing one of your records with <code>\"parameterNumber\": 3</code>, leaflet-velocity script no longer throws an error and displays something on the map, although it might not be the appropriate display.</p>\n"}], "owner": {"reputation": 106, "user_id": 3063618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccbd5533abcb9308b08a15dff6e78710?s=128&d=identicon&r=PG&f=1", "display_name": "Franke Hsu", "link": "https://stackoverflow.com/users/3063618/franke-hsu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 699, "favorite_count": 0, "accepted_answer_id": 46702045, "answer_count": 1, "score": 1, "last_activity_date": 1507786039, "creation_date": 1507765455, "question_id": 46699194, "link": "https://stackoverflow.com/questions/46699194/leaflet-velocity-cannot-read-property-data-of-null", "title": "leaflet-velocity - cannot read property &#39;data&#39; of null", "body": "<p>I am working on the wind animation by using leaflet-velocity.js, which can be found in either npm or github (<a href=\"https://github.com/danwild/leaflet-velocity\" rel=\"nofollow noreferrer\">https://github.com/danwild/leaflet-velocity</a>) from my own atmospheric model output (WRF).</p>\n\n<p>To perform the wind animation, I wrote down my own python code to convert the model output from netCDF format to json format. The code is showing below</p>\n\n<pre><code>import os, sys, json, numpy as np\nfrom glob import glob\nfrom netCDF4 import Dataset, num2date, date2num\n\n#- header templete\nheader = {  \n    'parameterUnit': 'm.s-1',\n    'parameterNumber': 2,\n    'dx': 1.0,\n    'dy': 1.0,\n    'parameterNumberName': 'eastward_wind',\n    'la1': 90.0,\n    'la2': -90.0,\n    'parameterCategory': 2,\n    'lo1': 0.0,\n    'nx': 360,\n    'ny': 181,\n    'refTime': '2016-04-30T06:00:00.000Z',\n    'lo2': 359.0,\n    }\n\nlists = glob('TXGLO.surf_wind4json.nc')\nntimes= 8\nfor fid in lists[:1]:\n    nc = Dataset(fid)\n    tm = nc.variables['Times'][:]\n    dim1, dim2 = nc.variables['XLAT'][0].shape\n    nPoints = dim1*dim2\n    lat= np.flipud(nc.variables['XLAT'][0]).flatten().tolist()\n    lon= np.flipud(nc.variables['XLONG'][0]+360.).flatten().tolist()\n    header['nx'] = dim1\n    header['ny'] = dim2\n    header['la1']= lat[0]\n    header['la2']= lat[-1]\n    header['lo1']= lon[0]\n    header['lo2']= lon[-1]\n    numPoints = nPoints\n    for num, tim in enumerate(tm[:1]):\n        refTime = ''.join(tim).replace('_',' ')\n        print(' Processing file : '+fid+' , time : '+str(num)+' '+refTime)\n        header['refTime'] = refTime\n        with open('cresm_atmos_surf.json','w') as outfile:  \n            outfile.write('[')\n            #-  U10\n            header['parameterNumberName'] = 'eastward_wind'\n            u10 = np.flipud(nc.variables['U10'][num]).flatten().tolist()\n            json.dump({'data':u10,'header':header}, outfile)\n            outfile.write(',')\n            #- V10\n            header['parameterNumberName'] = 'northward_wind'\n            v10 = np.flipud(nc.variables['V10'][num]).flatten().tolist()\n            json.dump({'data':v10,'header':header}, outfile)\n            outfile.write(']')\n</code></pre>\n\n<p>The results of json output looks like similar with the demo json file, such as wind-gbr.json (<a href=\"https://github.com/danwild/leaflet-velocity/blob/master/demo/wind-gbr.json\" rel=\"nofollow noreferrer\">https://github.com/danwild/leaflet-velocity/blob/master/demo/wind-gbr.json</a>)</p>\n\n<p>Once I completed the converter, I refreshed my web page and found out there is an error on reading my json file.</p>\n\n<p><a href=\"https://i.stack.imgur.com/ZtzyE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZtzyE.png\" alt=\"enter image description here\"></a> </p>\n\n<p><a href=\"https://i.stack.imgur.com/X3UOY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/X3UOY.png\" alt=\"enter image description here\"></a></p>\n\n<p>Could someone please help me to figure out what is the error?</p>\n\n<p>Thank You,</p>\n\n<p>my netcdf file : <a href=\"https://www.dropbox.com/s/tmyrrinraetvcxs/TXGLO.surf_wind4json.nc?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/tmyrrinraetvcxs/TXGLO.surf_wind4json.nc?dl=0</a></p>\n\n<p>my json file : \n<a href=\"https://www.dropbox.com/s/huiffld05zmldrs/cresm_atmos_surf.json?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/huiffld05zmldrs/cresm_atmos_surf.json?dl=0</a></p>\n\n<p>the demo json file :\n<a href=\"https://www.dropbox.com/s/17pr3vdkl1v3bq7/wind_gbr.json?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/17pr3vdkl1v3bq7/wind_gbr.json?dl=0</a></p>\n"}, {"tags": ["python", "optimization", "machine-learning", "scikit-learn", "neural-network"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1507767211, "post_id": 46699151, "comment_id": 80346212, "body": "It seems there are some misconceptions. NN-training has not much to do with least-squares optimization! Your task is also way too broad / or unclear and it&#39;s questionable if you did understand the difference between supervised- and unsupervised learning (as i read it)."}, {"owner": {"reputation": 103, "user_id": 3206070, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9f894217442a2facfd609e449b2c57b4?s=128&d=identicon&r=PG&f=1", "display_name": "user3206070", "link": "https://stackoverflow.com/users/3206070/user3206070"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1507770576, "post_id": 46699151, "comment_id": 80347008, "body": "Edit done. Is it now understandable ?"}, {"owner": {"reputation": 103, "user_id": 3206070, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9f894217442a2facfd609e449b2c57b4?s=128&d=identicon&r=PG&f=1", "display_name": "user3206070", "link": "https://stackoverflow.com/users/3206070/user3206070"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1507770737, "post_id": 46699151, "comment_id": 80347053, "body": "Its like I have to write a new MLPClassifier."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1507770770, "post_id": 46699151, "comment_id": 80347056, "body": "No it&#39;s not. You just removed least-squares and did not explain your task in more detail. Btw: in ML a classifier is considered supervised-learning. That&#39;s where the problem starts."}, {"owner": {"reputation": 103, "user_id": 3206070, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9f894217442a2facfd609e449b2c57b4?s=128&d=identicon&r=PG&f=1", "display_name": "user3206070", "link": "https://stackoverflow.com/users/3206070/user3206070"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1507774660, "post_id": 46699151, "comment_id": 80347952, "body": "<a href=\"https://github.com/pushkar/ABAGAIL/blob/master/src/opt/RandomizedHillClimbing.java\" rel=\"nofollow noreferrer\">github.com/pushkar/ABAGAIL/blob/master/src/opt/&hellip;</a> --- This has the implementation in java  of my problem"}, {"owner": {"reputation": 4804, "user_id": 3921875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cc1800eb35f1c8ad7a897b44036648?s=128&d=identicon&r=PG&f=1", "display_name": "piman314", "link": "https://stackoverflow.com/users/3921875/piman314"}, "edited": false, "score": 0, "creation_date": 1507803324, "post_id": 46699151, "comment_id": 80360555, "body": "That is just a link to some optimisation code. There seems to be some confusion in what exactly you want to do. If you need to do unsupervised learning, this can be done with lots of algorithms in scikit-learn. If you are <b>just</b> interested in ANN&#39;s then unsupervised learning can still be done with backpropagation, similarly to supervised learning."}], "owner": {"reputation": 103, "user_id": 3206070, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9f894217442a2facfd609e449b2c57b4?s=128&d=identicon&r=PG&f=1", "display_name": "user3206070", "link": "https://stackoverflow.com/users/3206070/user3206070"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507770504, "creation_date": 1507765195, "last_edit_date": 1507770504, "question_id": 46699151, "link": "https://stackoverflow.com/questions/46699151/implement-neural-network-but-backpropagation-weights-should-be-calculated-using", "title": "Implement neural network but backpropagation weights should be calculated using randomized optimisation?", "body": "<p>I was using sklearn python library for supervised learning algorithms. Now I have to do unsupervised learning algorithms. In this, I have to implement a neural network with weights for backpropagation to be optimised by either of following randomized optimisation algos: </p>\n\n<p>1) Genetic Algo</p>\n\n<p>2) Randomised Hill Climbing</p>\n\n<p>3) Annealing</p>\n\n<p>4) MIMIC</p>\n\n<p>I used MLPClassifier for supervised learning, not sure what to do here.\nScikit has no implementation provided for this problem.</p>\n\n<p>Sample code for NN is below(uses internal least square method for weight calculation):</p>\n\n<p><a href=\"http://scikit-learn.org/stable/modules/neural_networks_supervised.html#classification\" rel=\"nofollow noreferrer\">http://scikit-learn.org/stable/modules/neural_networks_supervised.html#classification</a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1507765022, "post_id": 46699116, "comment_id": 80345689, "body": "If you are getting an error, please post the full error message, inlcuding the stack trace."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1507765069, "post_id": 46699116, "comment_id": 80345706, "body": "That being said, it is coming from you passing a <code>float</code> object to the <code>range</code> function, which requires <code>int</code> objects."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1507765719, "post_id": 46699116, "comment_id": 80345874, "body": "Pleased to meet you William, and I hope you enjoy learning Python and being a member of SO. However, we don&#39;t put greetings in our posts here. The rule of thumb is: if you wouldn&#39;t expect to see it on a Wikipedia page, don&#39;t put it in your question (or answer). BTW, that&#39;s nice looking code, although it&#39;s customary in Python to call the main function <code>main</code> rather than <code>mainProgram</code>, and we use <code>snake_case</code> for function names rather than <code>camelCase</code>. See <a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow noreferrer\">PEP 8 -- Style Guide for Python Code</a> for further details."}, {"owner": {"reputation": 314, "user_id": 8674275, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d4d44ac3354d77036599ca0c23c93a84?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/8674275/william"}, "reply_to_user": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1507767150, "post_id": 46699116, "comment_id": 80346189, "body": "@PM2Ring - Thank you for the response. Just like my clean code, I will be cleaner with my posts going forward; very grateful for the hints / tips on the proper etiquette on SO."}], "answers": [{"comments": [{"owner": {"reputation": 314, "user_id": 8674275, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d4d44ac3354d77036599ca0c23c93a84?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/8674275/william"}, "edited": false, "score": 0, "creation_date": 1507767303, "post_id": 46699158, "comment_id": 80346235, "body": "thank you so much, makes complete sense, now I think about it."}], "tags": [], "owner": {"reputation": 53, "user_id": 5564492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4fff4b0ac79b43a990d3a27bfe0223?s=128&d=identicon&r=PG&f=1", "display_name": "jwqz", "link": "https://stackoverflow.com/users/5564492/jwqz"}, "is_accepted": false, "score": 1, "last_activity_date": 1507765211, "creation_date": 1507765211, "answer_id": 46699158, "question_id": 46699116, "link": "https://stackoverflow.com/questions/46699116/python-typeerror-float-object-cannot-be-interpreted-as-an-integer/46699158#46699158", "title": "Python | TypeError : &#39;float&#39; object cannot be interpreted as an integer", "body": "<p><code>hoursTraveled</code> is converted to a float from your input. </p>\n\n<p>It is then used in the range function in printSpec. As it is a float, the range function throws the error you provided.</p>\n\n<p>You could solve this by converting the input for hoursTraveled to an int right away, or doing so in the second argument of the range function. </p>\n\n<p>For a quick example try this:</p>\n\n<pre><code>&gt;&gt;&gt; range(1, 2.0)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nTypeError: range() integer end argument expected, got float.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1601, "user_id": 6659024, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-zJwW6zbr8zk/AAAAAAAAAAI/AAAAAAAAAOM/LD2nOFVdXFM/photo.jpg?sz=128", "display_name": "Xero Smith", "link": "https://stackoverflow.com/users/6659024/xero-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1507771324, "creation_date": 1507771324, "answer_id": 46699924, "question_id": 46699116, "link": "https://stackoverflow.com/questions/46699116/python-typeerror-float-object-cannot-be-interpreted-as-an-integer/46699924#46699924", "title": "Python | TypeError : &#39;float&#39; object cannot be interpreted as an integer", "body": "<p>The error stems from trying to get the range of a float. To avoid that, you have to account for floats in the <code>print_spec</code> function.</p>\n\n<p>Writing programs in a modular fashion is very good practice. kudos to you. Something to bear in mind, a key aspect of modularity is to group similar operations together. With this in mind, it makes sense to collect user data in a single function. This way your program maintains its modularity and is less fragmented.</p>\n\n<p>In the spirit of encouraging good practices, documenting your code is a great idea. Adding docstrings at the top of your functions that specify the expected arguments, retrn type and a general overview of the functions purpose is great practice, it helps a lot in understanding and debugging your code.</p>\n\n<p>You can refere to <a href=\"https://www.python.org/dev/peps/pep-0008/\" rel=\"nofollow noreferrer\">pep8</a> for more great tips on python style.</p>\n\n<p>Below is your code with some minor changes to get it working as you intend.\nI have included the term <code>Cumulative Distance Traveled</code> to the print out because that is what you actually calculate each hour.</p>\n\n<p>Further more, I have included fnctionality to handle cases whith fractional hours.</p>\n\n<pre><code>def get_journey_data():\n    \"\"\"(NoneType) -&gt; tuple(float, float)\n    Get the speed and duration of travel\n    \"\"\"\n    vehicle_speed = float(input(\"Please enter the average travel speed: \"))\n    hours_traveled = float(input(\"Please enter the travel time: \"))\n    return vehicle_speed, hours_traveled\n\ndef print_spec(travel_time, average_speed):\n    \"\"\"(float, float) -&gt; NoneType\n    Print the journey table in the following format:\n    Current Hour | Distance Traveled\n    \"\"\"\n    travel_time_hours = int(travel_time) #get whole hours from \n                                         #travel_time\n    travel_time_rem = travel_time % 1 #get fraction of an hour left over\n    hline = \"\\t---------------------------------------------\"\n    print(\"\\n\\tCurrent Hour\\t|\\tCumulative Distance Traveled\")\n    print(hline)\n    for current_hour in range(1, travel_time_hours + 1):\n        print(\"\\t\\t\", current_hour, \"\\t|\\t\", current_hour * average_speed)\n        print(hline)\n    if travel_time_rem:\n        print(\"\\t\\t\", travel_time_hours + 1, \"\\t|\\t\", \n              travel_time*average_speed)\n        print(hline)\n    return None\n\n\n\ndef main_program():\n    \"\"\"(NoneType) -&gt; Nonetype\"\"\"\n    vehicle_speed, hours_traveled = get_journey_data()\n    print_spec(hours_traveled, vehicle_speed)\n    return None\n</code></pre>\n"}], "owner": {"reputation": 314, "user_id": 8674275, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d4d44ac3354d77036599ca0c23c93a84?s=128&d=identicon&r=PG&f=1", "display_name": "William", "link": "https://stackoverflow.com/users/8674275/william"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1523, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1507771324, "creation_date": 1507764940, "last_edit_date": 1507765369, "question_id": 46699116, "link": "https://stackoverflow.com/questions/46699116/python-typeerror-float-object-cannot-be-interpreted-as-an-integer", "title": "Python | TypeError : &#39;float&#39; object cannot be interpreted as an integer", "body": "<p>I have tried to create a modularized program (as one of some practice assignments out a book), that asks a user for speed (mph) and time traveled (hrs), then (using a loop) I am trying to display the distance the vehicle has travelled, for each hr of the journey.</p>\n\n<p>I am trying to structure my module in an modularized fashion, hence all the <code>def</code></p>\n\n<p><strong>Issue:</strong> When debugging, I'm getting an <code>TypeError: 'float' object cannot be interpreted as an integer</code>, </p>\n\n<pre><code>def userJourneySpeed():\n    vehicleSpeed = float(input(\"Please enter the speed of your vehicle: \"))\n    return vehicleSpeed\n\ndef userJourneyTime():\n    hoursTraveled = float(input(\"Please enter how many hours you traveled: \"))\n    return hoursTraveled\n\ndef printSpec(hoursTraveled, vehicleSpeed):\n    print(\"Hour\", \"\\tDistance Traveled\")\n    for currentHour in range(1, hoursTraveled + 1):\n        userDistanceTraveled = vehicleSpeed * currentHour\n        print(currentHour, \"\\t\", userDistanceTraveled)\n\ndef mainProgram():\n    vehicleSpeed = userJourneySpeed()\n    hoursTraveled = userJourneyTime()\n    printSpec(hoursTraveled, vehicleSpeed)\nmainProgram()\n</code></pre>\n\n<p>Any advice on where I have gone wrong, would be greatly appreciated!</p>\n"}, {"tags": ["python", "for-loop"], "comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1507764754, "post_id": 46699074, "comment_id": 80345640, "body": "<code>[future.result() for future in as_completed(futures) if future.result() is not None]</code>?"}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 1, "creation_date": 1507765035, "post_id": 46699074, "comment_id": 80345695, "body": "What Julien said. However, if the <code>future.result()</code> method is expensive to compute (or has side-effects) it would be better to do this in two stages. First create a list (or generator) of all the results and then filter out the <code>None</code>s."}, {"owner": {"reputation": 4380, "user_id": 1656850, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/RIotq.gif?s=128&g=1", "display_name": "boardrider", "link": "https://stackoverflow.com/users/1656850/boardrider"}, "reply_to_user": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1507876201, "post_id": 46699074, "comment_id": 80393771, "body": "Further to @PM remark, read on <a href=\"https://docs.python.org/2/library/functions.html#filter\" rel=\"nofollow noreferrer\">docs.python.org/2/library/functions.html#filter</a>"}], "answers": [{"comments": [{"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1507765876, "post_id": 46699142, "comment_id": 80345916, "body": "Similar approach: <code>final_result = filter(lambda _: _ is not None, lst)</code>"}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1507766114, "post_id": 46699142, "comment_id": 80345975, "body": "@Julien Yes, works the same, however, note that <code>filter</code> returns an iterator, not a list in Python 3."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1507766401, "post_id": 46699142, "comment_id": 80346034, "body": "Also, a <code>filter</code> that requires a <code>lambda</code> (or Python level <code>def</code>) is slower (in all versions) than an equivalent listcomp/genexpr that avoids function calls, and generally less readable to boot."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1507766508, "post_id": 46699142, "comment_id": 80346060, "body": "To avoid a potentially large intermediate <code>list</code>, you might change the first listcomp to a genexpr, so you only make one final <code>list</code>."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1507766622, "post_id": 46699142, "comment_id": 80346085, "body": "Of course, you can avoid passing a <code>lambda</code> to <code>filter</code> if <code>None</code> is the only False-ish value returned by <code>future.result()</code>."}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 3, "last_activity_date": 1507765413, "last_edit_date": 1507765413, "creation_date": 1507765101, "answer_id": 46699142, "question_id": 46699074, "link": "https://stackoverflow.com/questions/46699074/pythonic-way-of-iterating-over-an-array-and-remove-all-none/46699142#46699142", "title": "Pythonic way of iterating over an array and remove all None", "body": "<p>You can <em>force</em> the removal of <code>None</code> from the return of <code>future.result</code> into a single list comprehension by using a nested <em>for</em>, calling the function <strong>once</strong>:</p>\n\n<pre><code>[x for future in as_completed(futures) \n   for x in (future.result(),) if x is not None]\n</code></pre>\n\n<p>However, it is more <strong>readable</strong> to filter the <code>None</code> values from the list after the first comprehension completes:</p>\n\n<pre><code>lst = [future.result() for future in as_completed(futures)]\nfinal_list = [x for x in lst if x is not None]\n</code></pre>\n"}], "owner": {"reputation": 9374, "user_id": 302351, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5b84104138aca2137ecef1d748c4bb71?s=128&d=identicon&r=PG", "display_name": "Amarsh", "link": "https://stackoverflow.com/users/302351/amarsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 46699142, "answer_count": 1, "score": 1, "last_activity_date": 1507765413, "creation_date": 1507764652, "question_id": 46699074, "link": "https://stackoverflow.com/questions/46699074/pythonic-way-of-iterating-over-an-array-and-remove-all-none", "title": "Pythonic way of iterating over an array and remove all None", "body": "<p>My statements looks like the following:</p>\n\n<pre><code>[future.result() for future in as_completed(futures)]\n</code></pre>\n\n<p>It works, except that, at times, <code>future.result()</code> resolved to <code>None</code>, which puts <code>None</code> into my array. How can I discard these <code>None</code>s? Something similar to </p>\n\n<pre><code>[if future.result() is not None: future.result() for future in as_completed(futures)]\n</code></pre>\n"}, {"tags": ["python", "conda"], "comments": [{"owner": {"reputation": 1682, "user_id": 4267783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sv5Im.jpg?s=128&g=1", "display_name": "Thtu", "link": "https://stackoverflow.com/users/4267783/thtu"}, "edited": false, "score": 1, "creation_date": 1507766203, "post_id": 46699056, "comment_id": 80345994, "body": "What happens when you try to pip install it? It&#39;s got a perfectly valid setup file...  <code>pip install -e &#47;path&#47;to&#47;installer&#47;directory&#47;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7830303"}, "reply_to_user": {"reputation": 1682, "user_id": 4267783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sv5Im.jpg?s=128&g=1", "display_name": "Thtu", "link": "https://stackoverflow.com/users/4267783/thtu"}, "edited": false, "score": 0, "creation_date": 1507766410, "post_id": 46699056, "comment_id": 80346037, "body": "this worked. I had not used <code>-e</code> flag..rookie mistake. if i <code>source activate myenv</code> and pip install it like that is it installed inside conda env?"}, {"owner": {"reputation": 1682, "user_id": 4267783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sv5Im.jpg?s=128&g=1", "display_name": "Thtu", "link": "https://stackoverflow.com/users/4267783/thtu"}, "edited": false, "score": 0, "creation_date": 1507772295, "post_id": 46699056, "comment_id": 80347410, "body": "Yes installing while inside your conda env should make the package available in that conda env, you actually don&#39;t need the <code>-e</code> flag at all, it&#39;s just so that any changes you make locally won&#39;t require you to reinstall it.  It&#39;s nice to be able to hack around sometimes if you have to bring the entire package down locally anyway."}], "owner": {"user_type": "does_not_exist", "display_name": "user7830303"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 245, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507764596, "creation_date": 1507764596, "question_id": 46699056, "link": "https://stackoverflow.com/questions/46699056/python-extract-package-into-conda-environment", "title": "Python - extract package into conda environment", "body": "<p>I want to install a package in a conda enviroment, and not system-wise.</p>\n\n<p>the package, however, can't be installed via <code>conda install</code>, neither via conda's <code>pip install</code>.</p>\n\n<p>documentation -> <a href=\"http://digitalmusics.dartmouth.edu/~mcasey/bregman/\" rel=\"nofollow noreferrer\">Bregman Toobox</a>&lt;- says it must be extracted and installed like so:</p>\n\n<pre><code>cd /path/to/installer/directory sudo python setup.py install\n</code></pre>\n\n<p>how do I install this into my conda enviroment?</p>\n"}, {"tags": ["python", "if-statement"], "comments": [{"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 6, "creation_date": 1507764443, "post_id": 46699030, "comment_id": 80345578, "body": "You want <code>if...elif...else</code> not separate <code>if</code> clauses."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 2, "creation_date": 1507764511, "post_id": 46699030, "comment_id": 80345592, "body": "Yes, the <code>else</code> applies only to the most recent <code>if</code>, not to the whole stack."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1507764619, "post_id": 46699030, "comment_id": 80345608, "body": "Why do all the numbers from 2 to 7 correspond to Tuesday? Your code says to print <code>&#39;Sorry, that is not a valid number.&#39;</code> whenever <code>user_number</code> isn&#39;t 7."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 2, "creation_date": 1507764627, "post_id": 46699030, "comment_id": 80345611, "body": "...which is to say, this is behaving correctly-as-written if it prints &quot;Sorry, that is not a valid number.&quot; for every value except 7."}, {"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 2, "creation_date": 1507764662, "post_id": 46699030, "comment_id": 80345618, "body": "The title of your question is somewhat absurd. Python&#39;s else statements are not counterexamples to the principle of sufficient reason (<a href=\"https://en.wikipedia.org/wiki/Principle_of_sufficient_reason\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Principle_of_sufficient_reason</a>)"}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 1, "creation_date": 1507764825, "post_id": 46699030, "comment_id": 80345656, "body": "BTW, this can be done much more compactly if you use a tuple or list of weekday names, but maybe you haven&#39;t learned about those yet..."}], "answers": [{"comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1507765232, "post_id": 46699127, "comment_id": 80345734, "body": "I wouldn&#39;t, I&#39;d use an Enum. Or for a less-overbuilt solution, I&#39;d use a list with the first element <code>None</code>. <code>[None, &quot;Monday&quot;, &quot;Tuesday&quot;, ...]</code>"}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1507765928, "post_id": 46699127, "comment_id": 80345930, "body": "I downvoted because the answer you provided is a typo&#39;d Python2 drop-in replacement for OP&#39;s code (which isn&#39;t even accurate per his question, though presumably 2, 3, 4, 5, 6, and 7 weren&#39;t all supposed to be Tuesday...) with no mention of why his code wasn&#39;t working as expected."}], "tags": [], "owner": {"reputation": 451, "user_id": 809362, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/mMmYg.jpg?s=128&g=1", "display_name": "Tim Gottgetreu", "link": "https://stackoverflow.com/users/809362/tim-gottgetreu"}, "is_accepted": false, "score": 0, "last_activity_date": 1507764995, "creation_date": 1507764995, "answer_id": 46699127, "question_id": 46699030, "link": "https://stackoverflow.com/questions/46699030/python-executes-else-statement-for-no-reason/46699127#46699127", "title": "Python executes else statement for no reason", "body": "<p>I'd do something like this:</p>\n\n<pre><code>user_number = int(input('Please enter a number between 1 &amp; 7: '))\nDayDict = {1:'Monday',2:'Tuesday',3:'Wednsday',4:'Thursday',5:'Friday',6:'Saturday',7:'Sunday'}\n\ndef num_day(x):\n     if x in DayDict:\n         print 'The number '+ str(x) + ' corresponds to '  + DayDict[x]\n     else:\n         print 'Sorry, that is not a valid number.'\n\nnum_day(user_number)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 8645282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dfae00362898d065619356c509d8c62?s=128&d=identicon&r=PG&f=1", "display_name": "coderguy_1", "link": "https://stackoverflow.com/users/8645282/coderguy-1"}, "edited": false, "score": 0, "creation_date": 1507768016, "post_id": 46699217, "comment_id": 80346405, "body": "Thank you, and that data structure seems a tad bit scary to me."}], "tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": true, "score": 1, "last_activity_date": 1507765646, "creation_date": 1507765646, "answer_id": 46699217, "question_id": 46699030, "link": "https://stackoverflow.com/questions/46699030/python-executes-else-statement-for-no-reason/46699217#46699217", "title": "Python executes else statement for no reason", "body": "<p>As mentioned in the comments, this fails because each <code>if</code> is its own logical statement. You want to use <code>if..elif..else</code> instead of <code>if..if..else</code>.</p>\n\n<pre><code>if user_number == 1:\n    print('The number 1 corresponds to Monday')\n\nelif user_number == 2:\n    print('The number 2 corresponds to Tuesday')\n\nelif user_number == 3:\n    print('The number 3 corresponds to Tuesday')\n\nelif user_number == 4:\n    print('The number 4 corresponds to Tuesday')\n\nelif user_number == 5:\n    print('The number 5 corresponds to Tuesday')\n\nelif user_number == 6:\n    print('The number 6 corresponds to Tuesday')\n\nelif user_number == 7:\n    print('The number 7 corresponds to Tuesday')\n\nelse:\n    print('Sorry, that is not a valid number.')\n</code></pre>\n\n<p>This combines them all into one logical statement, and the <code>else</code> is then the catch-all for ALL the tests, not just the last one.</p>\n\n<hr>\n\n<p>That said, a bit of over-engineering is always fun for beginner questions like this. How would you feel about an <code>Enum</code> for a weekday data structure?</p>\n\n<pre><code>import enum\n\nclass Weekday(enum.Enum):\n    MONDAY = 1\n    TUESDAY = 2\n    WEDNESDAY = 3\n    THURSDAY = 4\n    FRIDAY = 5\n    SATURDAY = 6\n    SUNDAY = 7\n\n    def __str__(self):\n        return self.name.title()\n\nuser_number = int(input(\"Enter a number: \"))\ntry:\n    weekday = Weekday(user_number)\n    print(f\"The number {user_number} corresponds to {weekday}\")\nexcept ValueError:\n    print(\"Sorry, that is not a valid number.\")\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8645282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dfae00362898d065619356c509d8c62?s=128&d=identicon&r=PG&f=1", "display_name": "coderguy_1", "link": "https://stackoverflow.com/users/8645282/coderguy-1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 46699217, "answer_count": 2, "score": -4, "last_activity_date": 1507765646, "creation_date": 1507764394, "question_id": 46699030, "link": "https://stackoverflow.com/questions/46699030/python-executes-else-statement-for-no-reason", "title": "Python executes else statement for no reason", "body": "<p>I am trying to make a function where the user gives a number from 1-7, and that number that corresponds to a day in the week, otherwise there will be a message saying: 'Sorry this is not the right number'</p>\n\n<p>My Code So Far: </p>\n\n<pre><code>def num_day():\n\nuser_number = int(input('Please enter a number between 1 &amp; 7: '))\n\nif user_number == 1:\n    print('The number 1 corresponds to Monday')\n\nif user_number == 2:\n    print('The number 2 corresponds to Tuesday')\n\nif user_number == 3:\n    print('The number 3 corresponds to Tuesday')\n\nif user_number == 4:\n    print('The number 4 corresponds to Tuesday')\n\nif user_number == 5:\n    print('The number 5 corresponds to Tuesday')\n\nif user_number == 6:\n    print('The number 6 corresponds to Tuesday')\n\nif user_number == 7:\n    print('The number 7 corresponds to Tuesday')\n\nelse:\n    print('Sorry, that is not a valid number.')\n\n\nnum_day()\n</code></pre>\n\n<p>It gets the if statement correct, but keeps on throwing in 'Sorry, that is not a valid number'</p>\n"}, {"tags": ["python", "function"], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 5564492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4fff4b0ac79b43a990d3a27bfe0223?s=128&d=identicon&r=PG&f=1", "display_name": "jwqz", "link": "https://stackoverflow.com/users/5564492/jwqz"}, "is_accepted": false, "score": 0, "last_activity_date": 1507764640, "creation_date": 1507764640, "answer_id": 46699069, "question_id": 46698989, "link": "https://stackoverflow.com/questions/46698989/how-to-use-a-function-in-another-python-file/46699069#46699069", "title": "How to use a function in another python file", "body": "<p>What is the name of the file into which you put your function? It is that name that should be imported. Say:</p>\n\n<p>You have a file named: <code>wavefunctionfile.py</code> with the following content:</p>\n\n<pre><code>def wavefunction(a,b):\n    print(a)\n    print(b)\n    return a+b\n</code></pre>\n\n<p>You can now start python in the same directory as the file and do this:</p>\n\n<pre><code>&gt;&gt;&gt; import wavefunctionfile as w\n&gt;&gt;&gt; w.wavefunction(3,4)\n</code></pre>\n\n<p>This will output</p>\n\n<pre><code>3\n4\n7\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1404, "user_id": 6395770, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/a1dd74e2bc23bea3918a139070114d23?s=128&d=identicon&r=PG&f=1", "display_name": "information_interchange", "link": "https://stackoverflow.com/users/6395770/information-interchange"}, "is_accepted": false, "score": 0, "last_activity_date": 1507765717, "last_edit_date": 1507765717, "creation_date": 1507765286, "answer_id": 46699170, "question_id": 46698989, "link": "https://stackoverflow.com/questions/46698989/how-to-use-a-function-in-another-python-file/46699170#46699170", "title": "How to use a function in another python file", "body": "<p><code>from WaveLengthCalFile import WaveLengthCal</code> should work, but I feel like if the above doesn't work then there is something else going on...</p>\n\n<p>Note that you will need to configure your IDE to work with this. In Pycharm you can right click the directory your <code>WaveLengthCalFile</code> is in and click \"Mark as Source\"</p>\n\n<p><a href=\"https://i.stack.imgur.com/a7pN5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a7pN5.png\" alt=\"See this pic for more info\"></a></p>\n\n<p>In the above picture, I import a function called <code>a_func</code> from a file called moonbase.py, which demonstrates your required functionality exactly</p>\n"}], "owner": {"reputation": 181, "user_id": 8566262, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/8ebe2c2cc1bbf8f165f018936b2c34da?s=128&d=identicon&r=PG&f=1", "display_name": "Zhifang Hu", "link": "https://stackoverflow.com/users/8566262/zhifang-hu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1507765717, "creation_date": 1507764061, "question_id": 46698989, "link": "https://stackoverflow.com/questions/46698989/how-to-use-a-function-in-another-python-file", "title": "How to use a function in another python file", "body": "<p>I made a function called WaveLengthCal(d, T) as below</p>\n\n<pre><code>def WaveLengthCal(d, T):\n\n import numpy as np\n\n g=9.8\n k0h=4*np.pi**2/g/T**2*d;\n\n if k0h&gt;2.72:\n    kh=k0h*(1+2*np.exp(-2*k0h))\n else:\n    kh=np.sqrt(k0h)*(1+1/16*k0h+11/360*k0h**2)\n\n NP=10 # number of time of iteration\n L0=g*T**2/2/np.pi\n L=L0*np.tanh(kh)\n\n if d/L &lt;1/20:\n    L=T*np.sqrt(g*d)\n elif d/L&gt;1/2:\n    L=L0\n else:\n    for i in range(NP):\n        L=g*T**2/2/np.pi*np.tanh(2*np.pi*d/L)\n\n return L\n</code></pre>\n\n<p>This function works fine if I use this function in the same file as</p>\n\n<pre><code>&gt;&gt;&gt; WaveLengthCal(2,3)\n[11.297788563155367]\n</code></pre>\n\n<p>However, when I tried to use this function in another python file as below, </p>\n\n<pre><code>import WaveLengthCal as wl\n\nL=wl.WaveLengthCal(0.513,2)\n</code></pre>\n\n<p>it does not work well, it showed an error message as </p>\n\n<pre><code>&gt; Traceback (most recent call last):   File\n&gt; \"/usr/lib/python3.5/code.py\", line 91, in runcode\n&gt;     exec(code, self.locals)   File \"&lt;input&gt;\", line 7, in &lt;module&gt; TypeError: WaveLengthCal() missing 1 required positional argument: 'T'\n</code></pre>\n\n<p>I am not sure why, as I already put two inputs there, but it keeps on telling me one of the argument is missing. Anyone has any suggestions?</p>\n"}, {"tags": ["python", "dataframe", "duplicates"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1507766166, "post_id": 46698973, "comment_id": 80345988, "body": "What are the criteria for &quot;most similar&quot;?  Where is your coding attempt?"}, {"owner": {"reputation": 91, "user_id": 6008789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb3e1b1549bae8cbca24250711617afd?s=128&d=identicon&r=PG&f=1", "display_name": "amn89", "link": "https://stackoverflow.com/users/6008789/amn89"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1507766827, "post_id": 46698973, "comment_id": 80346130, "body": "select all cars with respect to the color and the year is not important, so for example: we have SequenceMatcher(None,&quot;BMW 2017&quot;, &quot;BMW 2016&quot;).ratio()  = 0.875 So, this is most similar"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1507767273, "post_id": 46698973, "comment_id": 80346224, "body": "If the year is not important, then you need to split that into a separate column, or at least pre-process your <b>name</b> column to remove it.  Split that field into words and compare on the first word only.  &quot;dedup&quot; (remove duplicates) based on those criteria."}, {"owner": {"reputation": 91, "user_id": 6008789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb3e1b1549bae8cbca24250711617afd?s=128&d=identicon&r=PG&f=1", "display_name": "amn89", "link": "https://stackoverflow.com/users/6008789/amn89"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1507768269, "post_id": 46698973, "comment_id": 80346472, "body": "The issue here is &quot;name&quot; column, some values 3 or 4 words, in this case how many columns should I have after splitting!!, I think SequenceMatcher is much better, I tried this using for loop but the performance wasn&#39;t good"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1507768368, "post_id": 46698973, "comment_id": 80346505, "body": "You will have no extra columns; this is in-line processing.  You put <b>name.split()[0]</b> into your comparison criteria."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1507829359, "post_id": 46698973, "comment_id": 80377432, "body": "Okay; I&#39;ll sweep these comments into an answer so you can accept and retire the question properly."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1507829440, "creation_date": 1507829440, "answer_id": 46715614, "question_id": 46698973, "link": "https://stackoverflow.com/questions/46698973/remove-duplicate-and-most-similar-in-dataframe-pandas-python/46715614#46715614", "title": "Remove duplicate and most Similar in dataframe pandas python", "body": "<p>If the year is not important, then you need to split that into a separate column, or at least pre-process your name column to remove it. Split that field into words and compare on the first word only. \"dedup\" (remove duplicates) based on those criteria.</p>\n\n<p>You put <strong>name.split()[0]</strong> into your comparison criteria: that splits the string into individual words, but then uses only the first one.</p>\n"}], "owner": {"reputation": 91, "user_id": 6008789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb3e1b1549bae8cbca24250711617afd?s=128&d=identicon&r=PG&f=1", "display_name": "amn89", "link": "https://stackoverflow.com/users/6008789/amn89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1507829440, "creation_date": 1507763939, "last_edit_date": 1507765766, "question_id": 46698973, "link": "https://stackoverflow.com/questions/46698973/remove-duplicate-and-most-similar-in-dataframe-pandas-python", "title": "Remove duplicate and most Similar in dataframe pandas python", "body": "<p>I want to remove duplicates and most similar from dataframe </p>\n\n<pre><code>df[\"ID\",\"name\",\"Color\"] = {[123,BMW 2017,Black],\n                           [124,BMW 2016,Black],\n                           [125,KIA,Blue],\n                           [126,Mini,Yellow],\n                           [127,Skoda,White],\n                           [128,BMW,White]}\n</code></pre>\n\n<p>The result should be</p>\n\n<pre><code>                          {[123,BMW 2017,Black],\n                           [125,KIA,Blue],\n                           [126,Mini,Yellow],\n                           [127,Skoda,White],\n                           [128,BMW,White]}\n</code></pre>\n"}, {"tags": ["python", "pandas", "pyproj"], "comments": [{"owner": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "edited": false, "score": 2, "creation_date": 1507768511, "post_id": 46698970, "comment_id": 80346541, "body": "rename the <code>x,y</code> variables in the for loop, they&#39;re the same name as the series your trying to write them too, and are being set to the float coordinate value."}, {"owner": {"reputation": 39, "user_id": 8754430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e858867dcfb137549e1f5b541a2e45?s=128&d=identicon&r=PG&f=1", "display_name": "Lyss C", "link": "https://stackoverflow.com/users/8754430/lyss-c"}, "reply_to_user": {"reputation": 7436, "user_id": 5514476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP6t0.jpg?s=128&g=1", "display_name": "DJK", "link": "https://stackoverflow.com/users/5514476/djk"}, "edited": false, "score": 0, "creation_date": 1507827599, "post_id": 46698970, "comment_id": 80376431, "body": "Awesome, thanks! Now I have to figure out why it outputs the same coordinates instead of converting them to feet."}], "owner": {"reputation": 39, "user_id": 8754430, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3e858867dcfb137549e1f5b541a2e45?s=128&d=identicon&r=PG&f=1", "display_name": "Lyss C", "link": "https://stackoverflow.com/users/8754430/lyss-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 907, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1507763918, "creation_date": 1507763918, "question_id": 46698970, "link": "https://stackoverflow.com/questions/46698970/converting-lat-long-to-x-y-in-state-plane-with-pyproj", "title": "Converting lat, long to x, y in state plane with pyproj", "body": "<p>I am having trouble transforming a dataframe I have of latitude and longitude coordinates to the state plane projection. I've attempted to use code I found in another post but it keeps throwing \"AttributeError: 'float' object has no attribute 'set_value'\". Here is a link to the original code so I can properly credit it: <a href=\"https://stackoverflow.com/a/36871668/8754430\">https://stackoverflow.com/a/36871668/8754430</a></p>\n\n<p>Here is my code</p>\n\n<pre><code>    import pyproj\n    import numpy as np\n\n    subways_loc = pd.read_csv('subways_loc.csv')\n\n    NAD83_LI = pyproj.Proj(init = \"EPSG:32118\")\n    NYS_LIZ = pyproj.Proj(init = \"ESRI:102718\")\n\n    def coord_transform(df):\n        x = pd.Series()\n        y = pd.Series()\n        for idx, val in enumerate(df['Latitude']):\n            x, y = pyproj.transform(NAD83_LI, NYS_LIZ, df['Longitude'][idx], df['Latitude'][idx])\n            x.set_value(idx, x)\n            y.set_value(idx, y)\n        df['x'] = x\n        df['y'] = y\n        return df\n\n    subways_loc_trans = coord_transform(subways_loc)\n\n    print(subways_loc_trans.head(1))\n</code></pre>\n\n<h2>And here is the specific error:</h2>\n\n<pre><code>    AttributeError                            Traceback (most recent call last)\n    &lt;ipython-input-103-a13e9199a9d5&gt; in &lt;module&gt;()\n         11     print(x, y)\n         12 \n    ---&gt; 13 subways_loc_trans = coord_transform(subways_loc)\n         14 \n         15 print(subways_loc_trans.head(1))\n\n    &lt;ipython-input-103-a13e9199a9d5&gt; in coord_transform(df)\n          4     for idx, val in enumerate(df['Latitude']):\n          5         x, y = pyproj.transform(NAD83_LI, NYS_LIZ, df['Longitude'][idx], df['Latitude'][idx])\n    ----&gt; 6         x.set_value(idx, x)\n          7         y.set_value(idx, y)\n          8     df['x'] = x\n\n    AttributeError: 'float' object has no attribute 'set_value'\n</code></pre>\n\n<p>Here is the link to my github upload of the file <a href=\"https://github.com/amkaris/SB-Code/blob/master/subways_loc.csv\" rel=\"nofollow noreferrer\">https://github.com/amkaris/SB-Code/blob/master/subways_loc.csv</a>.</p>\n\n<p>Any and all help is appreciated! Thanks!</p>\n"}, {"tags": ["python", "list"], "answers": [{"comments": [{"owner": {"reputation": 1233, "user_id": 1349726, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q7hLi.jpg?s=128&g=1", "display_name": "Houy Narun", "link": "https://stackoverflow.com/users/1349726/houy-narun"}, "edited": false, "score": 0, "creation_date": 1507766318, "post_id": 46698937, "comment_id": 80346020, "body": "Thank you very for your helpful and detail answer. It works perfect. I&#39;ve learned something from that. Cheer :)"}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 6, "last_activity_date": 1507764068, "last_edit_date": 1507764068, "creation_date": 1507763735, "answer_id": 46698937, "question_id": 46698927, "link": "https://stackoverflow.com/questions/46698927/how-to-remove-list-element-from-list-of-list-in-python/46698937#46698937", "title": "How to remove list element from list of list in python", "body": "<p><strong>Slice</strong> each nested list in a <em>list comprehension</em>. The slice notation starts at index 0 and stops at 1 i.e. <code>[0, 2)</code>:</p>\n\n<pre><code>NewList = [element[:2] for element in List]\n</code></pre>\n\n<p>When the start index is not specified, it is taken as <code>None</code> which is the same as start index of the list when <code>None</code> appears before the first <code>:</code>.</p>\n\n<p>Same as:</p>\n\n<pre><code>NewList = [element[slice(None, 2)] for element in List] # More verbose\n</code></pre>\n\n<hr>\n\n<p>In Python 3, you could use <strong>extended unpacking</strong> to achieve the same thing applying the 'splat' operator <code>*</code>:</p>\n\n<pre><code>NewList = [elements for *elements, _, _ in List]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 3, "creation_date": 1507763948, "post_id": 46698957, "comment_id": 80345466, "body": "<code>del s[2:]</code> would clear all but the first two entries more efficiently. You could use <code>del s[2:4]</code> if you only want to remove indices 2 and 3. Note that this solution doesn&#39;t copy in any way, so the data is dropped (Moses&#39;s solution shallow copies, so the top two levels of the new <code>list</code> are independent)."}], "tags": [], "owner": {"reputation": 53, "user_id": 5564492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f4fff4b0ac79b43a990d3a27bfe0223?s=128&d=identicon&r=PG&f=1", "display_name": "jwqz", "link": "https://stackoverflow.com/users/5564492/jwqz"}, "is_accepted": false, "score": 1, "last_activity_date": 1507763861, "creation_date": 1507763861, "answer_id": 46698957, "question_id": 46698927, "link": "https://stackoverflow.com/questions/46698927/how-to-remove-list-element-from-list-of-list-in-python/46698957#46698957", "title": "How to remove list element from list of list in python", "body": "<p>How about this:</p>\n\n<pre><code> for s in List:\n    del s[3]\n    del s[2]\n</code></pre>\n\n<p>That deletes in place.</p>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1507764174, "post_id": 46698983, "comment_id": 80345523, "body": "Minor note on behavior: This removes the last two elements, rather than preserving the first two. When there are a uniform four elements in each sublist, the two operations are equivalent, but if the elements are uneven length, or you performed the operation twice, the behavior is very different. Preserving the first two is safer and idempotent."}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1507764275, "post_id": 46698983, "comment_id": 80345545, "body": "@ShadowRanger thank you for pointing that out. While other solutions are more than satisfactory performance-wise, I thought I would include this solution to allow for arbitrary length sublists."}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": false, "score": 1, "last_activity_date": 1507764223, "last_edit_date": 1507764223, "creation_date": 1507763987, "answer_id": 46698983, "question_id": 46698927, "link": "https://stackoverflow.com/questions/46698927/how-to-remove-list-element-from-list-of-list-in-python/46698983#46698983", "title": "How to remove list element from list of list in python", "body": "<p>This solution uses negative indexing to allow for arbitrary length sublists, along as the original condition of two trailing digits is maintained.</p>\n\n<pre><code>List =  [\n        ['101', 'Dashboard', '1', '1'],\n        ['102', 'Potential Cstomer', '1', '1'],\n        ['102-01', 'Potential Cstomer', '1', '1'],\n        ['102-02', 'Potential Cstomer Activity', '1', '1']\n    ]\nnew_final_list = [i[:-2] for i in List]\nfor i in new_final_list:\n   print(i)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>['101', 'Dashboard'], \n['102', 'Potential Cstomer']\n['102-01', 'Potential Cstomer']\n['102-02', 'Potential Cstomer Activity']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10653471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e45cb452491929b25ce5ad89b8650d3?s=128&d=identicon&r=PG&f=1", "display_name": "K. Winfred", "link": "https://stackoverflow.com/users/10653471/k-winfred"}, "is_accepted": false, "score": -1, "last_activity_date": 1542224796, "creation_date": 1542224796, "answer_id": 53307733, "question_id": 46698927, "link": "https://stackoverflow.com/questions/46698927/how-to-remove-list-element-from-list-of-list-in-python/53307733#53307733", "title": "How to remove list element from list of list in python", "body": "<h2>Please reference code below:</h2>\n\n<pre><code>Names = [[\"Tom\", 32, 12], [\"John\", 54, 16], [\"James\", 52, 15]]\nNames_new = []\n\nfor i in Names:\n    # print(i + )\n    del i[0]\n    Names_new.append(i)\n\nprint(Names_new)\n</code></pre>\n"}], "owner": {"reputation": 1233, "user_id": 1349726, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/q7hLi.jpg?s=128&g=1", "display_name": "Houy Narun", "link": "https://stackoverflow.com/users/1349726/houy-narun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 46698937, "answer_count": 4, "score": 2, "last_activity_date": 1542224796, "creation_date": 1507763614, "question_id": 46698927, "link": "https://stackoverflow.com/questions/46698927/how-to-remove-list-element-from-list-of-list-in-python", "title": "How to remove list element from list of list in python", "body": "<p>I tried to remove the third and the fourth list from the list of list in python.</p>\n\n<p>My list of list is below:</p>\n\n<pre><code>List =  [\n            ['101', 'Dashboard', '1', '1'],\n            ['102', 'Potential Cstomer', '1', '1'],\n            ['102-01', 'Potential Cstomer', '1', '1'],\n            ['102-02', 'Potential Cstomer Activity', '1', '1']\n        ]\n</code></pre>\n\n<p>After remove the third and fourth element of list, I would like to be like this:</p>\n\n<pre><code>NewList =  [\n            ['101', 'Dashboard'],\n            ['102', 'Potential Cstomer'],\n            ['102-01', 'Potential Cstomer'],\n            ['102-02', 'Potential Customer Activity']\n        ]\n</code></pre>\n\n<p>I tried my code like below but it did not make any change.</p>\n\n<pre><code>    NewList     = [list(element) for element in List if element[0] or element[1]]\n\n    print NewList\n</code></pre>\n\n<p>How should I change my current code to achieve my expected result? Thanks.</p>\n"}, {"tags": ["python", "matplotlib", "latex"], "answers": [{"comments": [{"owner": {"reputation": 1055, "user_id": 8322295, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/mx0gd.jpg?s=128&g=1", "display_name": "Jim421616", "link": "https://stackoverflow.com/users/8322295/jim421616"}, "edited": false, "score": 0, "creation_date": 1507765569, "post_id": 46698966, "comment_id": 80345832, "body": "Hmmm apparently Jupyter doesn&#39;t like them either."}, {"owner": {"reputation": 1055, "user_id": 8322295, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/mx0gd.jpg?s=128&g=1", "display_name": "Jim421616", "link": "https://stackoverflow.com/users/8322295/jim421616"}, "edited": false, "score": 0, "creation_date": 1507765901, "post_id": 46698966, "comment_id": 80345922, "body": "Tried running in Jupyter notebook and Anaconda shell, but neither seem to recognize the Latex commands. Is there no way I can do it in Spyder? I&#39;ve put Latex commands in legends using Spyder before, using Python 3."}], "tags": [], "owner": {"reputation": 39, "user_id": 8532291, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9a1dcb441d7f5928b7ba502b4c5347c?s=128&d=identicon&r=PG&f=1", "display_name": "mshahabi", "link": "https://stackoverflow.com/users/8532291/mshahabi"}, "is_accepted": false, "score": -1, "last_activity_date": 1507763905, "creation_date": 1507763905, "answer_id": 46698966, "question_id": 46698921, "link": "https://stackoverflow.com/questions/46698921/latex-and-text-in-matplotlib-title/46698966#46698966", "title": "Latex and text in matplotlib title", "body": "<p>Try to run your code through your terminal, as Spyder or Canopy cannot handle Latex commands.</p>\n"}, {"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 9, "last_activity_date": 1581460135, "last_edit_date": 1581460135, "creation_date": 1507801141, "answer_id": 46706257, "question_id": 46698921, "link": "https://stackoverflow.com/questions/46698921/latex-and-text-in-matplotlib-title/46706257#46706257", "title": "Latex and text in matplotlib title", "body": "<p>It seems you are not using latex (<code>usetex = True</code>) but simple MathText. There is no <code>\\textdegree</code> in MathText. </p>\n\n<p>Using </p>\n\n<pre><code>plt.title(r'W1 disk and central $\\pm2^\\circ$ subtracted', fontsize='small')\n</code></pre>\n\n<p>should give you</p>\n\n<p><a href=\"https://i.stack.imgur.com/mMy56.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/mMy56.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1055, "user_id": 8322295, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/mx0gd.jpg?s=128&g=1", "display_name": "Jim421616", "link": "https://stackoverflow.com/users/8322295/jim421616"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12507, "favorite_count": 2, "accepted_answer_id": 46706257, "answer_count": 2, "score": 6, "last_activity_date": 1581460135, "creation_date": 1507763593, "question_id": 46698921, "link": "https://stackoverflow.com/questions/46698921/latex-and-text-in-matplotlib-title", "title": "Latex and text in matplotlib title", "body": "<p>I'm trying to show an image with a title that combines normal text with a couple of Latex commands:</p>\n\n<pre><code>plt.imshow(w1subtracted2, origin='lower',\n          extent=[l_max, -l_max, -b_max, b_max],\n          cmap = color_map)\nplt.title('W1 disk and central $\\pm2\\textdegree$ subtracted', fontsize = 'small')\nplt.xlabel(xlabel, fontsize = 'small')\nplt.ylabel(ylabel, fontsize = 'small')\nplt.savefig('w1subtracted2.png')\n</code></pre>\n\n<p>but I can't get the title showing the <code>\\pm</code> and <code>\\textdegree</code> to show in Latex style. How can I achieve that?</p>\n"}, {"tags": ["python", "macos", "rocksdb"], "answers": [{"comments": [{"owner": {"reputation": 5840, "user_id": 3404994, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fUJmx.jpg?s=128&g=1", "display_name": "Satendra", "link": "https://stackoverflow.com/users/3404994/satendra"}, "edited": false, "score": 0, "creation_date": 1511335022, "post_id": 47428432, "comment_id": 81811984, "body": "Take care of  proper indentation, line break and code block when you post answer"}], "tags": [], "owner": {"reputation": 11, "user_id": 2646355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/36506754b016183a2cb2d90ed0b71a4a?s=128&d=identicon&r=PG", "display_name": "Gautam Singh", "link": "https://stackoverflow.com/users/2646355/gautam-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1511664076, "last_edit_date": 1511664076, "creation_date": 1511333329, "answer_id": 47428432, "question_id": 46698888, "link": "https://stackoverflow.com/questions/46698888/rocksdb-errors-rocksioerror-io-error-while-lock-file-sample-db-lock-resource/47428432#47428432", "title": "rocksdb.errors.RocksIOError: IO error: While lock file: sample.db/LOCK: Resource temporarily unavailable", "body": "<p>I ran into similar issue while running write_stress test (tools/write_stress_runner.py ). \nI would suggest you </p>\n\n<ol>\n<li>Check if RocksDB process has too many open files(It doesn't look like \nto be the case from your application code).</li>\n<li>Check if another instance of your app is running.</li>\n<li><p>Delete LOCK file and run your application(sample.db/LOCK). </p>\n\n<pre><code>os.system('rm sample.db/LOCK')\n\nrdb = rocksdb.DB(\"sample.db\", rocksdb.Options(create_if_missing=True))\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 2190, "user_id": 4341121, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/eab54953654a9b9aed676b7c64a2a3fc?s=128&d=identicon&r=PG&f=1", "display_name": "Logic", "link": "https://stackoverflow.com/users/4341121/logic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2305, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1511664076, "creation_date": 1507763382, "question_id": 46698888, "link": "https://stackoverflow.com/questions/46698888/rocksdb-errors-rocksioerror-io-error-while-lock-file-sample-db-lock-resource", "title": "rocksdb.errors.RocksIOError: IO error: While lock file: sample.db/LOCK: Resource temporarily unavailable", "body": "<p>How to remove the LOCK on rocksDB</p>\n\n<p>I try to run the following code but getting the following error </p>\n\n<pre><code> * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)\n * Restarting with stat\nTraceback (most recent call last):\nFile \"hello flask.py\", line 18, in &lt;module&gt;\nrdb = rocksdb.DB(\"sample.db\", rocksdb.Options(create_if_missing=True))\nFile \"rocksdb/_rocksdb.pyx\", line 1437, in \nrocksdb._rocksdb.DB.__cinit__ (rocksdb/_rocksdb.cpp:23176)\nFile \"rocksdb/_rocksdb.pyx\", line 84, in rocksdb._rocksdb.check_status \n(rocksdb/_rocksdb.cpp:3453)\nrocksdb.errors.RocksIOError: IO error: While lock file: sample.db/LOCK: \nResource temporarily unavailable\n</code></pre>\n\n<p>Code : </p>\n\n<pre><code>from flask import Flask\nimport rocksdb\n\napp = Flask(__name__)\n\n@app.route('/hello/&lt;name&gt;')\ndef hello_name(name):\n    value = name.encode(encoding='UTF-8',errors='strict')\n    rdb.put(b'name', value)\n    return 'Hello %s!' % rdb.get(b'name')\n\n@app.route('/')\ndef hello():\n    return 'Welcome'\n\nif __name__ == '__main__':\n    rdb = rocksdb.DB(\"sample.db\", rocksdb.Options(create_if_missing=True))\n    app.run(debug = True)\n</code></pre>\n"}, {"tags": ["python", "pandas", "plotly", "plotly-dash"], "comments": [{"owner": {"reputation": 2763, "user_id": 3491991, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/pmHXU.png?s=128&g=1", "display_name": "zelusp", "link": "https://stackoverflow.com/users/3491991/zelusp"}, "edited": false, "score": 0, "creation_date": 1522091438, "post_id": 46698876, "comment_id": 86001783, "body": "Have a go at <a href=\"https://stackoverflow.com/a/47949174/3491991\">this documentation</a> - I think it could help you a lot"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4198602, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Dx5LmeTcLH8/AAAAAAAAAAI/AAAAAAAAAD4/MPTKbOsCtbc/photo.jpg?sz=128", "display_name": "\u041c\u0438\u0448\u0430 \u041d\u0435\u0441\u043a\u0430\u0436\u0443\u043a\u043e\u0432", "link": "https://stackoverflow.com/users/4198602/%d0%9c%d0%b8%d1%88%d0%b0-%d0%9d%d0%b5%d1%81%d0%ba%d0%b0%d0%b6%d1%83%d0%ba%d0%be%d0%b2"}, "is_accepted": false, "score": 0, "last_activity_date": 1510637665, "creation_date": 1510637665, "answer_id": 47278367, "question_id": 46698876, "link": "https://stackoverflow.com/questions/46698876/can-my-output-of-pandas-dataframe-be-graphed/47278367#47278367", "title": "Can my output of Pandas dataframe be graphed?", "body": "<p>Yes, you can build plot from your pandas dataframe. Folow instructions from guide : <a href=\"https://plot.ly/dash/getting-started\" rel=\"nofollow noreferrer\">https://plot.ly/dash/getting-started</a></p>\n\n<p>Simpliest way to build plot is:</p>\n\n<pre><code>    html.Div(\n        dcc.Graph(\n                id='mapbox',\n                figure={\n                    'data': [go.Bar(\n                            x = data ['PutXcolumnNameHere'],\n                            y = data ['PutYcolumnNameHere'],\n                            )\n                    ],\n                    'layout': go.Layout(\n                        legend={'x': 0, 'y': 1},\n                        hovermode='closest'\n                    )\n                }\n        )\n    )\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 7691211, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/44f236d03aa4a70e79660b88c1be31b8?s=128&d=identicon&r=PG&f=1", "display_name": "davidjbeiler", "link": "https://stackoverflow.com/users/7691211/davidjbeiler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2630, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1589757183, "creation_date": 1507763303, "last_edit_date": 1552909924, "question_id": 46698876, "link": "https://stackoverflow.com/questions/46698876/can-my-output-of-pandas-dataframe-be-graphed", "title": "Can my output of Pandas dataframe be graphed?", "body": "<pre><code>import dash, matplotlib\nimport dash_core_components as dcc\nimport dash_html_components as html\nimport plotly.graph_objs as go\nimport pandas as pd\n\n\n\ndata = pd.read_excel('C:\\\\Users\\\\myuser\\\\Desktop\\\\Pandas\\\\$$$$.xlsx')\ndata2 = data.groupby(['Department']).count()\nprint data2\n</code></pre>\n\n<p>prints out exactly the information i need, however can i plot this?</p>\n\n<p>C:\\Users\\dbeiler\\Desktop\\Pandas>python PythonApplication1.py</p>\n\n<pre><code>        Email  Completion\n\nDepartment\n\ndep1         165          62\n\ndep2         147          68\n\ndep3          37           8\n</code></pre>\n\n<p>ideally i'd like to use plotly if convenient <a href=\"https://plot.ly/products/dash/\" rel=\"nofollow noreferrer\">https://plot.ly/products/dash/</a></p>\n"}, {"tags": ["python", "xgboost"], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 8761938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MNKgD4lFG-U/AAAAAAAAAAI/AAAAAAAAEVw/l1B9HDjGkjE/photo.jpg?sz=128", "display_name": "Bryn Clarke", "link": "https://stackoverflow.com/users/8761938/bryn-clarke"}, "is_accepted": true, "score": 5, "last_activity_date": 1507833711, "creation_date": 1507833711, "answer_id": 46716743, "question_id": 46698872, "link": "https://stackoverflow.com/questions/46698872/poisson-regression-in-xgboost-fails-for-low-frequencies/46716743#46716743", "title": "Poisson Regression in xgboost Fails for Low Frequencies", "body": "<p>After some digging, I found a solution. Documenting here in case someone else runs into the same issue. It turns out I needed to add an offset term equal to the (natural) log of the mean frequency. If that isn't immediately obvious, it's because the initial prediction starts at a frequency of 0.5, and many boosting iterations are needed just to rescale the predictions to the average frequency.</p>\n\n<p>See the below code for an update to the toy example. As I suggested in the original question, the predictions now approach the mean frequency (2.5) at the lower scales.</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nimport xgboost as xgb\n\ndef get_preds(mult):\n    # generate toy dataset for illustration\n    # 4 observations with linearly increasing frequencies\n    # the frequencies are scaled by `mult`\n    dmat = xgb.DMatrix(data=np.array([[0, 0], [0, 1], [1, 0], [1, 1]]),\n                       label=[i*mult for i in [1, 2, 3, 4]],\n                       weight=[1000, 1000, 1000, 1000])\n\n    ## adding an offset term equal to the log of the mean frequency\n    offset = np.log(np.mean([i*mult for i in [1, 2, 3, 4]]))\n    dmat.set_base_margin(np.repeat(offset, 4))\n\n    # train a poisson booster on the toy data\n    bst = xgb.train(\n        params={\"objective\": \"count:poisson\"},\n        dtrain=dmat,\n        num_boost_round=100000,\n        early_stopping_rounds=5,\n        evals=[(dmat, \"train\")],\n        verbose_eval=False)\n\n    # return fitted frequencies after reversing scaling\n    return bst.predict(dmat)/mult\n\n# test multipliers in the range [10**(-8), 10**1]\n# display fitted frequencies \nmults = [10**i for i in range(-8, 1)]\n## round to 1 decimal point to show the result approaches 2.5\ndf = pd.DataFrame(np.round(np.vstack([get_preds(m) for m in mults]), 1))\ndf.index = mults\ndf.columns = [\"(0, 0)\", \"(0, 1)\", \"(1, 0)\", \"(1, 1)\"]\ndf\n\n# --- result ---\n#              (0, 0)  (0, 1)  (1, 0)  (1, 1)\n#1.000000e-08     2.5     2.5     2.5     2.5\n#1.000000e-07     2.5     2.5     2.5     2.5\n#1.000000e-06     2.5     2.5     2.5     2.5\n#1.000000e-05     2.5     2.5     2.5     2.5\n#1.000000e-04     2.4     2.5     2.5     2.6\n#1.000000e-03     1.0     2.0     3.0     4.0\n#1.000000e-02     1.0     2.0     3.0     4.0\n#1.000000e-01     1.0     2.0     3.0     4.0\n#1.000000e+00     1.0     2.0     3.0     4.0\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 8761938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MNKgD4lFG-U/AAAAAAAAAAI/AAAAAAAAEVw/l1B9HDjGkjE/photo.jpg?sz=128", "display_name": "Bryn Clarke", "link": "https://stackoverflow.com/users/8761938/bryn-clarke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2728, "favorite_count": 1, "accepted_answer_id": 46716743, "answer_count": 1, "score": 6, "last_activity_date": 1507833711, "creation_date": 1507763250, "question_id": 46698872, "link": "https://stackoverflow.com/questions/46698872/poisson-regression-in-xgboost-fails-for-low-frequencies", "title": "Poisson Regression in xgboost Fails for Low Frequencies", "body": "<p>I'm trying to implement a boosted Poisson regression model in xgboost, but I am finding the results are biased at low frequencies. To illustrate, here is some minimal Python code that I think replicates the issue:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nimport xgboost as xgb\n\ndef get_preds(mult):\n    # generate toy dataset for illustration\n    # 4 observations with linearly increasing frequencies\n    # the frequencies are scaled by `mult`\n    dmat = xgb.DMatrix(data=np.array([[0, 0], [0, 1], [1, 0], [1, 1]]),\n                       label=[i*mult for i in [1, 2, 3, 4]],\n                       weight=[1000, 1000, 1000, 1000])\n\n    # train a poisson booster on the toy data\n    bst = xgb.train(\n        params={\"objective\": \"count:poisson\"},\n        dtrain=dmat,\n        num_boost_round=100000,\n        early_stopping_rounds=5,\n        evals=[(dmat, \"train\")],\n        verbose_eval=False)\n\n    # return fitted frequencies after reversing scaling\n    return bst.predict(dmat)/mult\n\n# test multipliers in the range [10**(-8), 10**1]\n# display fitted frequencies \nmults = [10**i for i in range(-8, 1)]\ndf = pd.DataFrame(np.round(np.vstack([get_preds(m) for m in mults]), 0))\ndf.index = mults\ndf.columns = [\"(0, 0)\", \"(0, 1)\", \"(1, 0)\", \"(1, 1)\"]\ndf\n\n# --- result ---\n#               (0, 0)   (0, 1)   (1, 0)   (1, 1)\n#1.000000e-08  11598.0  11598.0  11598.0  11598.0\n#1.000000e-07   1161.0   1161.0   1161.0   1161.0\n#1.000000e-06    118.0    118.0    118.0    118.0\n#1.000000e-05     12.0     12.0     12.0     12.0\n#1.000000e-04      2.0      2.0      3.0      3.0\n#1.000000e-03      1.0      2.0      3.0      4.0\n#1.000000e-02      1.0      2.0      3.0      4.0\n#1.000000e-01      1.0      2.0      3.0      4.0\n#1.000000e+00      1.0      2.0      3.0      4.0\n</code></pre>\n\n<p>Notice that at low frequencies the predictions seem to blow up. This may have something to do with the Poisson lambda * the weight dropping below 1 (and in fact increasing the weight above 1000 does shift the \"blow-up\" to lower frequencies), but I would still expect the predictions to approach the mean training frequency (2.5). Also (not shown in the example above), reducing <code>eta</code> seems to increase the amount of bias in the predictions.</p>\n\n<p>What would cause this to happen? Is a parameter available that would mitigate the effect?</p>\n"}, {"tags": ["python", "multithreading", "python-3.x"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1507763178, "post_id": 46698837, "comment_id": 80345283, "body": "While you can perform imports in another thread, it probably won&#39;t achieve what you want to achieve."}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1507763249, "post_id": 46698837, "comment_id": 80345300, "body": "@user2357112  Why? It does seem to speed up the imports."}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 3, "creation_date": 1507763295, "post_id": 46698837, "comment_id": 80345317, "body": "What do you mean by &quot;start running the script&quot;? If the script needs the &quot;8 or so packages&quot;, how can it start running before those have been imported?"}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "reply_to_user": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1507763522, "post_id": 46698837, "comment_id": 80345369, "body": "@user4815162342 That&#39;s the thing.  I could get the packages I need initially by importing the normal way then get the others as the script runs and by the time one of those packages are needed they will have already loaded."}], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1507764330, "post_id": 46699002, "comment_id": 80345563, "body": "Beyond the GIL, there is a <a href=\"https://stackoverflow.com/q/12389526/364696\">global lock protecting module imports as well</a>, so threading imports is doubly pointless."}, {"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1507764760, "post_id": 46699002, "comment_id": 80345641, "body": "@ShadowRanger Is this still the case in current Python 3 versions? Somewhere between 3.1 and 3.6 the mention of import in threaded code seems to have disappeared from the threading chapter of the Python documentation."}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1507765054, "post_id": 46699002, "comment_id": 80345703, "body": "Ok This seems like a bad idea with Tkinter what about the other modules (not GUI) will they be affected?  What are the alternatives (if any) Everything except the standard library calls could be <code>pyc</code> files is there anything else to speed up execution time?"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1507768974, "post_id": 46699002, "comment_id": 80346661, "body": "@RolandSmith: Ah, yes, forgot that <a href=\"https://docs.python.org/3/whatsnew/3.3.html#a-finer-grained-import-lock\" rel=\"nofollow noreferrer\">in 3.3 they introduced per module import locks</a>. So just blocked by the GIL; the import locks would only be a problem if you imported the same module in multiple threads (which can be easier to do than you would think, since most imports trigger imports of dependent modules)."}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1507802854, "post_id": 46699002, "comment_id": 80360252, "body": "@RolandSmith  I&#39;m sorry I think I might have been unclear.  I mean it takes about 10 seconds to load <b>all</b> the 8 modules to load.  <code>pygame.mixer</code> does take the longest though. I will get measurements for it as soon as I can."}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1507842781, "post_id": 46699002, "comment_id": 80384437, "body": "Right I have measured but my readings are strange. 27.904929006649144, 24.359547216813752, 2.2433278654516133, 2.302499898412886, 2.1275044430994545, 2.0166949328348793 and 1.8994527128036118. I have not made an error the result certainly was 27.904929006649144 and 24.359547216813752. It suddenly goes down afterwards (as you can see) any ideas what is causing this?"}, {"owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "reply_to_user": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 1, "creation_date": 1507862499, "post_id": 46699002, "comment_id": 80389997, "body": "@Simon That is probably an effect of your operating system&#39;s cache warming up. Most operating systems today use free memory as a disk cache, because disk is much slower than RAM. After a couple of tries, all your modules files will be in that disk cache, where they can be accessed quicker. :-)If you were to reboot your PC, you would probably see the same thing again. The operating system has other influences as well.  The general concensus seems to be that disk operations on ms-windows are significantly slower than on e.g. Linux."}, {"owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "edited": false, "score": 0, "creation_date": 1507883696, "post_id": 46699002, "comment_id": 80397555, "body": "OK that sounds plausible.  My computer is quite old and I do run Windows.  Thank you (for answering and your patience when faced with a slow learner)  I will look at the answer you provided and work out a solution from there.  ; )"}], "tags": [], "owner": {"reputation": 35789, "user_id": 1219295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BmJq2.png?s=128&g=1", "display_name": "Roland Smith", "link": "https://stackoverflow.com/users/1219295/roland-smith"}, "is_accepted": true, "score": 3, "last_activity_date": 1507832696, "last_edit_date": 1507832696, "creation_date": 1507764126, "answer_id": 46699002, "question_id": 46698837, "link": "https://stackoverflow.com/questions/46698837/can-i-import-modules-from-thread-in-python/46699002#46699002", "title": "Can I import modules from thread in Python?", "body": "<p>If you are using CPython, this might not yield as much improvement as you'd expect.</p>\n\n<p>CPython has a Global Interpreter Lock (\"GIL\") that ensures that only one thread at a time can be executing Python bytecode.</p>\n\n<p>So whenever the import thread is executing Python code, the other thread is not running. The GIL is released by a thread when it is e.g. waiting on I/O. So there will be some time savings because of that.</p>\n\n<p>There is a difference of opinion as to whether tkinter is truly thread-safe. It is still considered wise to run the tkinter main loop in the original thread, and to not invoke tkinter calls from other threads, because that <em>can</em> lead to crashes.</p>\n\n<p>The GIL also can cause problems for GUI programs. If you are using a second thread for a long-running calculation, the user interface might become less responsive. There are at least two possible solutions. The first one is to split the long-running calculation up into small pieces which are each executed by a <code>after</code> method. The second is to run the calculation in a different <em>process</em>.</p>\n\n<hr>\n\n<p>Follow-up questions from the comments:</p>\n\n<blockquote>\n  <p>is there anything else to speed up execution time?</p>\n</blockquote>\n\n<p>The first thing you must to do is <em>measure</em>; what <em>exactly</em> causes the problem. Then you can look into the problem areas and try to improve them.</p>\n\n<p>For example module load times. Run your app under a <a href=\"https://pypi.python.org/pypi/line_profiler/\" rel=\"nofollow noreferrer\">profiler</a> to see how long the module loads take and why.</p>\n\n<p>If <code>pygame.mixer</code> takes too long to load, you could use your platform's native mixer. UNIX-like operating systems generally have a <code>/dev/mixer</code> device, while ms-windows has different API's for it. Using those definitely won't take 10 seconds. \nThere is a cost associated with this: you will loose portability between operating systems.</p>\n\n<blockquote>\n  <p>What are the alternatives</p>\n</blockquote>\n\n<p>Using multiple cores is a usual tactic to try and speed things up. Currently on CPython the only <em>general</em> way get code to run in parallel on multiple cores is with <code>multiprocessing</code> or <code>concurrent.futures</code>.</p>\n\n<p>However it depends on the nature of your problem if this tactic can work.</p>\n\n<p>If your problem involves doing the same calculations over a huge set of data, that is relatively easy to parallelize. In that case you can expect a maximal speedup roughly equivalent to the numbers of cores you use.</p>\n\n<p>It could be that your problem consists of multiple steps, each of which depends on the result of a previous step. Such problems are serial in nature and are much harder to execute in parallel.</p>\n\n<p>Other ways to possible speed things up could be to use another Python implementation like <a href=\"https://pypy.org/\" rel=\"nofollow noreferrer\">Pypy</a>. Or you could use <a href=\"http://cython.org/\" rel=\"nofollow noreferrer\">cython</a> together with type hints to convert performance-critical parts to compiled C code.</p>\n"}, {"comments": [{"owner": {"reputation": 3307, "user_id": 8743099, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCygy.png?s=128&g=1", "display_name": "Mike from PSG", "link": "https://stackoverflow.com/users/8743099/mike-from-psg"}, "edited": false, "score": 2, "creation_date": 1559444639, "post_id": 56388584, "comment_id": 99420697, "body": "I like it!  Very clever!   I&#39;m still no pro at Python, so dunno if it&#39;s the best solution to use, but I think it&#39;s a great idea and perhaps could work well.  The code worked great on my machine."}], "tags": [], "owner": {"reputation": 1668, "user_id": 10146012, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dlAbb.jpg?s=128&g=1", "display_name": "Mahmoud Elshahat", "link": "https://stackoverflow.com/users/10146012/mahmoud-elshahat"}, "is_accepted": false, "score": 2, "last_activity_date": 1559277092, "last_edit_date": 1559277092, "creation_date": 1559275957, "answer_id": 56388584, "question_id": 46698837, "link": "https://stackoverflow.com/questions/46698837/can-i-import-modules-from-thread-in-python/56388584#56388584", "title": "Can I import modules from thread in Python?", "body": "<p>I understand this is an old thread but i was looking for a way to minimize the loading time of my application, and wanted the user to see the gui so he can interact with it while other module being imported in background</p>\n\n<p>i have read some answers suggesting a lazy import techniques, which i found complicated \"for me\", then i stumbled here with a suggest to use threading to import modules in background, then i gave it a shot, and found out it is the most brilliant idea that fits my needs</p>\n\n<p>below is a code for an example gui application using <a href=\"https://github.com/PySimpleGUI/PySimpleGUI\" rel=\"nofollow noreferrer\">PySimpleGUI</a> which ask the user to enter a url and it will open it in the default browser window, the only module required to do so is <code>webbrowser</code>, so this job could be done while other modules loading</p>\n\n<p>I added comments in this code to explain mostly all parts, hope it will help someone,\ntested on python 3.6, windows10.</p>\n\n<p>please note: this is just a dummy code as a showcase.</p>\n\n<pre><code># import essentials first\nimport PySimpleGUI as sg\nimport time, threading\n\n# global variable names to reference to the imported modules, this way will \n# solve the problem of importing inside a function local namespace\npg = None\njs = None\nwb = None\n\nprogress = 0  # for our progress bar\n\ndef importer():\n    # we will simulate a time consuming modules by time.sleep()\n    global progress\n    progress = 10\n    start = time.time()\n    global pg, js, wb\n    import pygame as pg\n    time.sleep(3)\n    print(f'done importing pygame mixer in {time.time()-start} seconds')\n    progress = 40\n\n    start = time.time()\n    import webbrowser as wb\n    time.sleep(2)\n    print(f'done importing webbrowser in {time.time()-start} seconds')\n    progress = 70\n\n    start = time.time()\n    import json as js\n    time.sleep(10)\n    print(f'done importing json in {time.time()-start} seconds')\n\n    progress = 100\n    print('imports finished')\n\n# start our importer in a separate thread\nthreading.Thread(target=importer).start()\n\n# main app \ndef main():\n    # window layout\n    layout = [[sg.Text('Enter url:', size=(15,1)), sg.Input(default_text='https://google.com', size=(31, 1), key='url')],\n            [sg.Text('Loading modules:', size=(15,1), key='status'), \n            sg.ProgressBar(max_value=100, orientation='horizontal', size=(20,10), key='progress')],\n            [sg.Button('Open url', disabled=True, key='open_url'), sg.Button('joysticks', disabled=True, key='joysticks'), sg.Cancel()]]\n    window = sg.Window('test application for lazy imports', layout=layout) # our window\n\n    while True:  # main application loop\n        event, values = window.Read(timeout=10)  # non blocking read from our gui\n        if event in [None, 'Cancel']:\n            window.Close()\n            break \n\n        elif event == 'open_url':\n            wb.open(values['url'])\n            print('helllooooooooooooo')\n\n        elif event == 'joysticks':\n            # show joystics number currently connected\n            pg.init()\n            n = pg.joystick.get_count()  # Get count of joysticks\n            sg.Popup(f'joysticks number currently connected to computer = {n}')\n\n        # open url button is disabled by default and will be enabled once our webbrowser module imported\n        if wb:\n            window.Element('open_url').Update(disabled= False)\n\n        if pg:\n            window.Element('joysticks').Update(disabled= False)\n\n        # progress bar\n        window.Element('progress').UpdateBar(progress)\n        if progress &gt;= 100:\n            window.Element('status').Update('Loading completed', background_color='green')\n\nmain()\n</code></pre>\n"}], "owner": {"reputation": 8884, "user_id": 8372104, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/72UbV.png?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/8372104/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2109, "favorite_count": 0, "accepted_answer_id": 46699002, "answer_count": 2, "score": 3, "last_activity_date": 1559277092, "creation_date": 1507763037, "question_id": 46698837, "link": "https://stackoverflow.com/questions/46698837/can-i-import-modules-from-thread-in-python", "title": "Can I import modules from thread in Python?", "body": "<p>It all began last night when I was making a script that required 8 or so packages including <code>pygame.mixer</code> which on my computer importing this takes a few seconds.  </p>\n\n<p>This meant that before the script even started I had to wait 10 or so seconds for all the imports to load.  Because I want the script to obviously be as fast as possible could I start running the script while getting the imports with something like this:</p>\n\n<pre><code>import threading\n\n\ndef import_modules():\n    import tkinter as tk\n    from pygame import mixer\n    import json\n    import webbrowser\n    print('imports finished')\n\na = threading.Thread(target=import_modules)\na.start()\nfor i in range(10000):\n    print('Getting Modules')\n</code></pre>\n\n<p>So my question is:</p>\n\n<p>Is this considered bad practice and will it cause problems?</p>\n\n<p>If so are there alternatives I could use? </p>\n\n<p>Or is it OK to do this?</p>\n"}, {"tags": ["python", "class", "variables", "random", "constructor"], "comments": [{"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1507763127, "post_id": 46698825, "comment_id": 80345263, "body": "Don&#39;t generate it randomly every time? It&#39;s not a good way to generate valid MACs anyway."}, {"owner": {"reputation": 1484, "user_id": 6662739, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b3ead54cd5f2928c0e9a65a29c7ce3a4?s=128&d=identicon&r=PG&f=1", "display_name": "Ollaw", "link": "https://stackoverflow.com/users/6662739/ollaw"}, "edited": false, "score": 0, "creation_date": 1507763234, "post_id": 46698825, "comment_id": 80345298, "body": "add the parenthesis in the constructor at <code>generate_mac</code>. It should become <code>self.generate_mac()</code>"}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1507763732, "post_id": 46698825, "comment_id": 80345422, "body": "Google or search <a href=\"https://stackoverflow.com\">Stack Overflow</a> for mac generation, after the whole random vs persistent bit is sorted out to see how to safely generate a random MAC."}], "answers": [{"comments": [{"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1507763190, "post_id": 46698852, "comment_id": 80345284, "body": "That looks like a comment."}, {"owner": {"reputation": 78771, "user_id": 831878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1d1a4823c46ad92f357b4bb7e74a64b0?s=128&d=identicon&r=PG", "display_name": "Ray Toal", "link": "https://stackoverflow.com/users/831878/ray-toal"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1507763268, "post_id": 46698852, "comment_id": 80345308, "body": "Really? A comment asks for clarification of the question. An answer tells the OP what he or she wants to know. Am I wrong about this?"}, {"owner": {"reputation": 78771, "user_id": 831878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1d1a4823c46ad92f357b4bb7e74a64b0?s=128&d=identicon&r=PG", "display_name": "Ray Toal", "link": "https://stackoverflow.com/users/831878/ray-toal"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1507763433, "post_id": 46698852, "comment_id": 80345346, "body": "Hmmm, looks like you may be right. I just landed on <a href=\"https://stackoverflow.com/questions/46698861/syntaxerror-unexpected-identifier-for-an-asynchronous-function\" title=\"syntaxerror unexpected identifier for an asynchronous function\">stackoverflow.com/questions/46698861/&hellip;</a> where Pointy pointed out a missing comma in a comment instead of an answer.... Although that was fixing a syntax error. Close call, but I see what you are saying."}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1507763656, "post_id": 46698852, "comment_id": 80345403, "body": "Initially the answer was just about the typo. The current answer, I&#39;m not really sure that&#39;s what the poster is asking i.e. it&#39;s not obvious it&#39;s about the typo but I suppose they can chime in."}, {"owner": {"reputation": 3, "user_id": 8608605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2107fb034bdcd27784b570f4ce0392b0?s=128&d=identicon&r=PG&f=1", "display_name": "rg4444", "link": "https://stackoverflow.com/users/8608605/rg4444"}, "edited": false, "score": 0, "creation_date": 1507764977, "post_id": 46698852, "comment_id": 80345678, "body": "Should have seen that. Sorry for the bother over such a simple thing."}], "tags": [], "owner": {"reputation": 78771, "user_id": 831878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1d1a4823c46ad92f357b4bb7e74a64b0?s=128&d=identicon&r=PG", "display_name": "Ray Toal", "link": "https://stackoverflow.com/users/831878/ray-toal"}, "is_accepted": true, "score": 1, "last_activity_date": 1507763215, "last_edit_date": 1507763215, "creation_date": 1507763131, "answer_id": 46698852, "question_id": 46698825, "link": "https://stackoverflow.com/questions/46698825/python-class-constructor-methods/46698852#46698852", "title": "Python Class Constructor Methods", "body": "<p>In your <code>__init__</code> method you <em>meant</em> to write</p>\n\n<pre><code>self.mac_address = self.generate_mac()\n</code></pre>\n\n<p>and in the call near the bottom, write</p>\n\n<pre><code>f.write(send_node.mac_address + \" \" + send_node.name[-1])\n</code></pre>\n\n<p>You had written</p>\n\n<pre><code>self.mac_address = self.generate_mac\n</code></pre>\n\n<p>which meant that <code>self.mac_address</code> was actually a method. You want it to be set once, during construction, as a string property instead of a method.</p>\n"}, {"tags": [], "owner": {"reputation": 629, "user_id": 4049036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hzumh.jpg?s=128&g=1", "display_name": "blueenvelope", "link": "https://stackoverflow.com/users/4049036/blueenvelope"}, "is_accepted": false, "score": 0, "last_activity_date": 1507763270, "creation_date": 1507763270, "answer_id": 46698873, "question_id": 46698825, "link": "https://stackoverflow.com/questions/46698825/python-class-constructor-methods/46698873#46698873", "title": "Python Class Constructor Methods", "body": "<pre><code>self.mac_address = self.generate_mac()\n</code></pre>\n\n<p>Instead of assigning a function to the variable, call the function.  Then on the object creation: node_instance = Node() will run the <strong>init</strong> and generate a Mac address.  mac_address will now be a string (the result of the function call) and all future calls to node_instance.mac_address will be the string.</p>\n"}], "owner": {"reputation": 3, "user_id": 8608605, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2107fb034bdcd27784b570f4ce0392b0?s=128&d=identicon&r=PG&f=1", "display_name": "rg4444", "link": "https://stackoverflow.com/users/8608605/rg4444"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 46698852, "answer_count": 2, "score": 0, "last_activity_date": 1507763270, "creation_date": 1507762915, "question_id": 46698825, "link": "https://stackoverflow.com/questions/46698825/python-class-constructor-methods", "title": "Python Class Constructor Methods", "body": "<p>So I have this code:</p>\n\n<pre><code>import random\n\nclass Node():\n\n    def __init__(self, name, content):\n        self.name = name\n        self.mac_address = self.generate_mac\n        self.content = content\n\n    def generate_mac():\n       return  \"%02x:%02x:%02x:%02x:%02x:%02x\" % (\n        random.randint(0, 255),\n        random.randint(0, 255),\n        random.randint(0, 255),\n        random.randint(0, 255),\n        random.randint(0, 255),\n        random.randint(0, 255)\n        )\n\n\nclass Switch():\n\n    def __init__(self, name, content):\n        self.name = name\n        self.file = name + \".txt\"\n        self.content = content\n\n    def write_table(self, send_node, recv_node):\n        f = open(self.file, 'w')\n        f.write(send_node.mac_address() + \" \" + send_node.name[-1])\n</code></pre>\n\n<p>I want every node to have a fixed MAC address which I can get later using <code>node_instance.mac_address</code>. But every time I do that, I'll be generating a new address. How to I keep it fixed?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1507763410, "post_id": 46698824, "comment_id": 80345335, "body": "We answer specific questions here. &quot;ANY help would be greatly appreciated&quot; isn&#39;t a question. You need to have a conversation with someone, and Stack Overflow isn&#39;t the place to do that."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 1, "creation_date": 1507763411, "post_id": 46698824, "comment_id": 80345336, "body": "If you want help with this you need to show us the code you&#39;ve written so far and explain what it&#39;s doing wrong."}, {"owner": {"reputation": 31, "user_id": 8761975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5c15f24098f27a7c891fb1d29eb3066?s=128&d=identicon&r=PG&f=1", "display_name": "notanexpert", "link": "https://stackoverflow.com/users/8761975/notanexpert"}, "edited": false, "score": 0, "creation_date": 1507763639, "post_id": 46698824, "comment_id": 80345397, "body": "Sorry, this is the first time I&#39;ve used the site. Truthfully, I don&#39;t even really know where to begin to make this work so I don&#39;t really have code written."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1507763835, "post_id": 46698824, "comment_id": 80345447, "body": "Do you have any experience writing recursive functions? Complete beginner aren&#39;t usually expected to write recursive code... This task isn&#39;t hard, but there are a few pitfalls. In particular, you need to be careful with strings."}, {"owner": {"reputation": 31, "user_id": 8761975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5c15f24098f27a7c891fb1d29eb3066?s=128&d=identicon&r=PG&f=1", "display_name": "notanexpert", "link": "https://stackoverflow.com/users/8761975/notanexpert"}, "edited": false, "score": 0, "creation_date": 1507763961, "post_id": 46698824, "comment_id": 80345470, "body": "Yeah, thats what everyone keeps telling me. The professor is purposely going much harder on us than you would expect in an intro class because he thinks this is the only way we&#39;ll learn anything. However it&#39;s like learning the spanish alphabet and then being told to go write an essay."}, {"owner": {"reputation": 31, "user_id": 8761975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5c15f24098f27a7c891fb1d29eb3066?s=128&d=identicon&r=PG&f=1", "display_name": "notanexpert", "link": "https://stackoverflow.com/users/8761975/notanexpert"}, "edited": false, "score": 0, "creation_date": 1507764016, "post_id": 46698824, "comment_id": 80345486, "body": "To answer you though, I do not have very much experience with writing recursive functions, especially in this context. I apologize for not submitting code in my question but like I said, I don&#39;t even really know where to begin and just want to figure this out."}, {"owner": {"reputation": 2302, "user_id": 5851593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ouqf6.jpg?s=128&g=1", "display_name": "Edwin van Mierlo", "link": "https://stackoverflow.com/users/5851593/edwin-van-mierlo"}, "edited": false, "score": 0, "creation_date": 1507765069, "post_id": 46698824, "comment_id": 80345705, "body": "basically show us your code, show us where it goes wrong, show us your input, show us your output, show us your expected output.... then ask us your question."}, {"owner": {"reputation": 31, "user_id": 8761975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5c15f24098f27a7c891fb1d29eb3066?s=128&d=identicon&r=PG&f=1", "display_name": "notanexpert", "link": "https://stackoverflow.com/users/8761975/notanexpert"}, "reply_to_user": {"reputation": 2302, "user_id": 5851593, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ouqf6.jpg?s=128&g=1", "display_name": "Edwin van Mierlo", "link": "https://stackoverflow.com/users/5851593/edwin-van-mierlo"}, "edited": false, "score": 0, "creation_date": 1507765802, "post_id": 46698824, "comment_id": 80345897, "body": "@EdwinvanMierlo Sorry, I don&#39;t really have code to post. I genuinely do not know how to do this, or how to even begin. It was brought up in class but I never figured it out and, as I said, the professor is now moving on and I just want to understand how this works. I can&#39;t stress enough that I am a beginner as well."}], "answers": [{"tags": [], "owner": {"reputation": 1221, "user_id": 6210312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kWA1n.png?s=128&g=1", "display_name": "Lacobus", "link": "https://stackoverflow.com/users/6210312/lacobus"}, "is_accepted": false, "score": 2, "last_activity_date": 1508673816, "creation_date": 1508673816, "answer_id": 46873845, "question_id": 46698824, "link": "https://stackoverflow.com/questions/46698824/python-deep-copy-without-using-copy-module/46873845#46873845", "title": "Python - Deep Copy without using copy module", "body": "<p>Maybe, you are looking for something like this:</p>\n\n<pre><code>def mydeepcopy(L):\n    if isinstance(L, list):\n        ret = []\n        for i in L:\n            ret.append(mydeepcopy(i))\n    elif isinstance(L, (int, float, type(None), str, bool)):\n        ret = L\n    else:\n        raise ValueError(\"Unexpected type for mydeepcopy function\")\n\n    return ret\n\nlst = [ [1,2,3], [4,5,6], [7,8,9] ]\ncopy = mydeepcopy(lst)\n\nprint(\"Original Data: %s\" % (lst))\nprint(\"Original IDs: %s = %s\" % (id(lst),[ id(i) for i in lst ]))\n\nprint(\"Copied Data: %s\" % (copy))\nprint(\"Copied IDs: %s = %s\" % (id(copy),[ id(i) for i in copy ]))\n</code></pre>\n\n<p>Possible Output:</p>\n\n<pre><code>Original Data: [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\nOriginal IDs: 140637274065288 = [140637274064712, 140637274064776, 140637274065352]\nCopied Data: [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\nCopied IDs: 140637274065480 = [140637274065416, 140637274065160, 140637274065096]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 143, "user_id": 6539635, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IZPw5.jpg?s=128&g=1", "display_name": "Aaron John Sabu", "link": "https://stackoverflow.com/users/6539635/aaron-john-sabu"}, "is_accepted": false, "score": 0, "last_activity_date": 1603688567, "last_edit_date": 1603688567, "creation_date": 1591800157, "answer_id": 62306366, "question_id": 46698824, "link": "https://stackoverflow.com/questions/46698824/python-deep-copy-without-using-copy-module/62306366#62306366", "title": "Python - Deep Copy without using copy module", "body": "<p>It is a single line answer:</p>\n<pre><code>newList = [L[i] for i in range(len(L))]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 87, "user_id": 12618026, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAcnnhiom8yEvsOeGwIktJPYKvZcypvkFGITLB6tA=k-s128", "display_name": "Retr0_", "link": "https://stackoverflow.com/users/12618026/retr0"}, "is_accepted": false, "score": 0, "last_activity_date": 1603689077, "creation_date": 1603689077, "answer_id": 64531813, "question_id": 46698824, "link": "https://stackoverflow.com/questions/46698824/python-deep-copy-without-using-copy-module/64531813#64531813", "title": "Python - Deep Copy without using copy module", "body": "<p>Deepcopy can be done using this one line method,</p>\n<pre><code>def deep_copy(source_list):\n    dest_list = source_list[:]\n    return dest_list\n</code></pre>\n<p>It gives you the smaller function and reduce the processing time.</p>\n"}], "owner": {"reputation": 31, "user_id": 8761975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5c15f24098f27a7c891fb1d29eb3066?s=128&d=identicon&r=PG&f=1", "display_name": "notanexpert", "link": "https://stackoverflow.com/users/8761975/notanexpert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1780, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1603689077, "creation_date": 1507762913, "last_edit_date": 1507763317, "question_id": 46698824, "link": "https://stackoverflow.com/questions/46698824/python-deep-copy-without-using-copy-module", "title": "Python - Deep Copy without using copy module", "body": "<p>Essentially, the problem was to create a function deepcopy(L) that will return a deep copy of a list L. However, we were told to not use the copy module or any function in it. </p>\n\n<p>I'm a complete beginner in an intro class and am honestly struggling with this one. The only thing we were really told is that we should use recursion to solve the problem but after being stuck for so long I figured I'd ask for help. </p>\n\n<p>Couldn't figure it out in class and didn't really get a clear answer and now the professor is moving on so ANY help would be greatly appreciated. Thanks. </p>\n"}, {"tags": ["python", "pandas", "scikit-learn", "time-series", "cross-validation"], "comments": [{"owner": {"reputation": 746, "user_id": 1168308, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cabf454c065defba4fefaddfbb236b4?s=128&d=identicon&r=PG", "display_name": "SriK", "link": "https://stackoverflow.com/users/1168308/srik"}, "edited": false, "score": 1, "creation_date": 1523518214, "post_id": 46698792, "comment_id": 86595784, "body": "did you find a solution for this as I am looking for an approach myself?"}, {"owner": {"reputation": 921, "user_id": 5854731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7991cfbcd383d625d64aae3622cd2e59?s=128&d=identicon&r=PG&f=1", "display_name": "XXavier", "link": "https://stackoverflow.com/users/5854731/xxavier"}, "reply_to_user": {"reputation": 746, "user_id": 1168308, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cabf454c065defba4fefaddfbb236b4?s=128&d=identicon&r=PG", "display_name": "SriK", "link": "https://stackoverflow.com/users/1168308/srik"}, "edited": false, "score": 1, "creation_date": 1525384220, "post_id": 46698792, "comment_id": 87346634, "body": "Not really i manually loop through each group after sorting the group by time and sampled the last few rows for validation. It was a really time consuming process"}, {"owner": {"reputation": 746, "user_id": 1168308, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cabf454c065defba4fefaddfbb236b4?s=128&d=identicon&r=PG", "display_name": "SriK", "link": "https://stackoverflow.com/users/1168308/srik"}, "edited": false, "score": 0, "creation_date": 1525449763, "post_id": 46698792, "comment_id": 87375133, "body": "Ah, so you drop data in the splits to get an adequate proportionality ? Yeah, that would work if you have lots of data."}], "answers": [{"comments": [{"owner": {"reputation": 746, "user_id": 1168308, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/5cabf454c065defba4fefaddfbb236b4?s=128&d=identicon&r=PG", "display_name": "SriK", "link": "https://stackoverflow.com/users/1168308/srik"}, "edited": false, "score": 0, "creation_date": 1523518132, "post_id": 48426320, "comment_id": 86595752, "body": "How does this account for stratification? This solution does not even look at the group partitions."}], "tags": [], "owner": {"reputation": 144, "user_id": 8399475, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FSnNd.jpg?s=128&g=1", "display_name": "Bondeaux", "link": "https://stackoverflow.com/users/8399475/bondeaux"}, "is_accepted": false, "score": -3, "last_activity_date": 1516808559, "creation_date": 1516808559, "answer_id": 48426320, "question_id": 46698792, "link": "https://stackoverflow.com/questions/46698792/stratified-cross-validation-of-timeseries-data/48426320#48426320", "title": "Stratified Cross validation of timeseries data", "body": "<p>The following should do it:    </p>\n\n<pre><code>    series = Series.from_csv('yourfile.csv', header=0)\n    X = series.values\n    n_train = 500\n    n_records = len(X)\n    for i in range(n_train, n_records):\n        train, test = X[0:i], X[i:i+1]\n        print('train=%d, test=%d' % (len(train), len(test)))\n</code></pre>\n"}], "owner": {"reputation": 921, "user_id": 5854731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7991cfbcd383d625d64aae3622cd2e59?s=128&d=identicon&r=PG&f=1", "display_name": "XXavier", "link": "https://stackoverflow.com/users/5854731/xxavier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1328, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1516808559, "creation_date": 1507762696, "last_edit_date": 1507796537, "question_id": 46698792, "link": "https://stackoverflow.com/questions/46698792/stratified-cross-validation-of-timeseries-data", "title": "Stratified Cross validation of timeseries data", "body": "<p>I want to do a time series cross validation based on group (grp column). In the below sample data, Temperature is my target variable</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\ntimeS=pd.date_range(start='1980-01-01 00:00:00', end='1980-01-01 00:00:05', \nfreq='S')\ndf = pd.DataFrame(dict(time=timeS, grp=['A']*3 + ['B']*3, material=[1,2,3]*2,\ntemperature=['2.4','5','9.9']*2))\n\n\n    grp material    temperature    time\n0   A   1       2.4                1980-01-01 00:00:00\n1   A   2       5                  1980-01-01 00:00:01\n2   A   3       9.9                1980-01-01 00:00:02\n3   B   1       2.4                1980-01-01 00:00:03\n4   B   2       5                  1980-01-01 00:00:04\n5   B   3       9.9                1980-01-01 00:00:05\n</code></pre>\n\n<p>i am planing to add some lag features based on grp using this code.</p>\n\n<pre><code>df.groupby(\"grp\")['temperature'].shift(-1)\n0      5\n1    9.9\n2    NaN\n3      5\n4    9.9\n5    NaN\nName: temperature, dtype: object\n</code></pre>\n\n<p>The problem now i have is when i do cross validation I can using this function from sklearn <em>sklearn.model_selection.TimeSeriesSplit</em> but it does not take into consideration of the group effect. Can anyone tell me how to do the CV split per group (like stratified split)? I am going to use xgboost.cv for cv if that helps.</p>\n\n<p>Edit: Time changes per group. Time increases uniformly (per second) within the group</p>\n"}, {"tags": ["python", "tensorflow", "keras", "mxnet"], "comments": [{"owner": {"reputation": 181, "user_id": 1891457, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/98fd8e3d7a2eb3564163c6f726fd9817?s=128&d=identicon&r=PG", "display_name": "HalaKuwatly", "link": "https://stackoverflow.com/users/1891457/halakuwatly"}, "edited": false, "score": 0, "creation_date": 1511456038, "post_id": 46698701, "comment_id": 81875085, "body": "Hey, did you figure it out?"}, {"owner": {"reputation": 871, "user_id": 5683778, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/bXLFl.jpg?s=128&g=1", "display_name": "June Skeeter", "link": "https://stackoverflow.com/users/5683778/june-skeeter"}, "reply_to_user": {"reputation": 181, "user_id": 1891457, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/98fd8e3d7a2eb3564163c6f726fd9817?s=128&d=identicon&r=PG", "display_name": "HalaKuwatly", "link": "https://stackoverflow.com/users/1891457/halakuwatly"}, "edited": false, "score": 0, "creation_date": 1511470884, "post_id": 46698701, "comment_id": 81881159, "body": "Not with MXNet, I gave up on it and switched to tensorflow.  I figured out how to implement multiprocessing with tensorflow to train-test-validate models simultaneously."}], "answers": [{"tags": [], "owner": {"reputation": 311, "user_id": 839946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/305f05978c1b39138a49f2d8cefd9886?s=128&d=identicon&r=PG", "display_name": "Sandeep", "link": "https://stackoverflow.com/users/839946/sandeep"}, "is_accepted": false, "score": 3, "last_activity_date": 1513360247, "creation_date": 1513360247, "answer_id": 47837468, "question_id": 46698701, "link": "https://stackoverflow.com/questions/46698701/keras-fails-to-load-model-weights-when-using-mxnet-backend/47837468#47837468", "title": "Keras fails to load model weights when using MXNet backend", "body": "<p>MXNet backend LSTM layer uses MXNet's <a href=\"https://mxnet.incubator.apache.org/how_to/bucketing.html\" rel=\"nofollow noreferrer\">bucketing module</a> that requires declaring bucket sizes (length) statically, however, Keras and TF supports dynamic length. Hence, you are seeing issue with loading the model weights and shape mis-match.</p>\n\n<p>Currently working on adding Keras2 support with MXNet backend, and this issue should be taken care in the Keras2.<a href=\"https://github.com/deep-learning-tools/keras/tree/keras2_mxnet_backend\" rel=\"nofollow noreferrer\">https://github.com/deep-learning-tools/keras/tree/keras2_mxnet_backend</a>\n<a href=\"https://github.com/keras-team/keras/issues/8697\" rel=\"nofollow noreferrer\">https://github.com/keras-team/keras/issues/8697</a></p>\n"}], "owner": {"reputation": 871, "user_id": 5683778, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/bXLFl.jpg?s=128&g=1", "display_name": "June Skeeter", "link": "https://stackoverflow.com/users/5683778/june-skeeter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1513360247, "creation_date": 1507762137, "last_edit_date": 1507853007, "question_id": 46698701, "link": "https://stackoverflow.com/questions/46698701/keras-fails-to-load-model-weights-when-using-mxnet-backend", "title": "Keras fails to load model weights when using MXNet backend", "body": "<p>I am trying gap fill a half hourly time series of carbon fluxes. I want to use train-test-validate cross validation to identify the most parsimonious LSTM model by training a model with all available inputs and then pruning it until the score stops improving.  For each model, I'm using k-fold CV to split 90% train, 10% validate, and then in the model.fit(), splitting train further into a train and test set.  I'm using early stopping to help minimize run time and using ModelCheckpoint to save the best weights (the epoch with the lowest \"val_loss\").  Then I want to load those model weights and calculate the validation score (MSE) on the 10% of the data set aside for validation outside the model using the weights that performed best on test set.</p>\n\n<p>Here is a working example of my code training an LSTM with 9 factors and 13 timestimes (the 6 hours leading up to each observation)</p>\n\n<pre><code>import time\nimport numpy as np\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom itertools import combinations\nfrom functools import partial\nfrom multiprocessing import Pool\nfrom sklearn.neural_network import MLPRegressor as MPR\nfrom sklearn.preprocessing import StandardScaler\nfrom sklearn import metrics\nfrom sklearn.model_selection import RepeatedKFold\nimport keras\nfrom keras.models import Sequential\nfrom keras.layers import Dense\nfrom keras.layers import Dropout\nfrom keras.layers import LSTM\nfrom keras.wrappers.scikit_learn import KerasRegressor\nfrom keras.callbacks import EarlyStopping,ModelCheckpoint\nimport warnings\nwarnings.filterwarnings('ignore')\nimport tensorflow as tf\nconfig = tf.ConfigProto()\nconfig.gpu_options.per_process_gpu_memory_fraction = 0.9\nsession = tf.Session(config=config)\n\ndef TimeShape(rolls,X1):\n    X = np.zeros(shape = (X1.shape[0],rolls+1,X1.shape[1]))\n    X[:,0,:] = X1\n    if rolls &gt; 0:\n        for roll in range(0,rolls):\n            X2 = np.roll(X1,(roll+1),axis=0)\n            X[:,roll+1,:] = X2\n    return(X)\n\ndef LSTM_Model(time_steps,inputs,load=None):\n    model = Sequential()\n    model.add(LSTM(12, input_shape=(time_steps+1,inputs),return_sequences=True,init='normal', activation='tanh'))\n    model.add(LSTM(6,init='normal', activation='tanh'))\n    model.add(Dense(1, init='normal',activation='linear'))\n    NUM_GPU = 1 # or the number of GPUs available on your machine\n    gpu_list = []\n    for i in range(NUM_GPU): gpu_list.append('gpu(%d)' % i)\n    model.compile(loss='mean_squared_error', optimizer='adam',context=gpu_list) # - Add if using MXNET\n    return(model)\n\nclass LossHistory(keras.callbacks.Callback):\n    def on_train_begin(self, logs={}):\n        self.train_losses = []\n        self.test_losses = []\n    def on_epoch_end(self, batch, logs={}):\n        self.train_losses.append(logs.get('loss'))\n        self.test_losses.append(logs.get('val_loss'))\n\nclass LSTM_Optimize:\n    def __init__(self,Path,y_var):\n#       **Read and prep Data Data**\n        self.Master = pd.read_csv(Path,delimiter = ',',header = 0,na_values = -9999)\n        self.Master = self.Master.set_index(pd.DatetimeIndex(pd.to_datetime(self.Master['datetime'])))\n        self.Master['DOY'] = self.Master.index.dayofyear*1.0\n        self.Master['HR'] = self.Master.index.hour*1.0\n        self.Data = self.Master[np.isfinite(self.Master[y_var])]\n        self.Data = self.Data.interpolate().bfill()\n        self.Data = self.Data.interpolate().ffill()\n#       ** Nomralize Y variable**\n#       ** Pipeline takes care of X, but not Y, I've foun the models work better when normalizing Y **\n        self.y = self.Data[y_var].values\n        self.YStandard = StandardScaler()\n        self.YScaled = self.YStandard.fit(self.y.reshape(-1, 1))\n        Yscale = self.YScaled.transform(self.y.reshape(-1, 1))\n        self.y = np.ndarray.flatten(Yscale)\n        self.Ytru = self.YScaled.inverse_transform(self.y.reshape(-1,1))\n\n    def Run(self,Inputs):\n        # Preparing the input data\n        time_steps = 12   \n        X = self.Data[Inputs]\n        input_shape = len(Inputs)\n        self.XStandard = StandardScaler()\n        self.XScaled= self.XStandard.fit(X)\n        Xscale = self.XScaled.transform(X)\n        Xscale = TimeShape(time_steps,Xscale)\n        Xscale = Xscale[time_steps+1:,:,:]\n        self.y = self.y[time_steps+1:]\n\n\n        ES = EarlyStopping(monitor='val_loss', min_delta=0.0, patience=25, verbose=1, mode='auto')\n        CH = ModelCheckpoint(filepath='weights.hdf5',monitor='val_loss', verbose=0, save_best_only=True)\n        HS=LossHistory()\n        MSE = []\n        kf = RepeatedKFold(n_splits=10,n_repeats=2)\n        batch_size=25\n        Mod = LSTM_Model(time_steps,input_shape)\n        plt.figure(figsize = (7,7))\n        for train,test in kf.split(Xscale,self.y):\n            Mod.fit(Xscale[train],self.y[train],batch_size=batch_size, nb_epoch=1000,validation_split=0.1,\n                    shuffle=True,callbacks=[ES,CH,HS],verbose=0)\n            Y = Mod.predict(Xscale[test],batch_size = batch_size)\n            Mod.load_weights('weights.hdf5')\n            Y = Mod.predict(Xscale[test],batch_size = batch_size)\n            MSE.append(metrics.mean_squared_error(self.y[test],Y))\n            plt.plot(HS.test_losses,linestyle='--')\n            plt.plot(HS.train_losses)\n\n        print(Mod.summary())\n        print(np.asanyarray(MSE).mean())\n\nPath = 'FluxData.csv'\n% matplotlib inline\nstart_time = time.time()\nif __name__ == '__main__':  \n    CH4_Model = ['Sedge','Shrubby','Temp','VWC','ustar','wind_speed','air_pressure',\n             'PPFD_Avg','NR_Wm2_Avg','AirTC_Avg']\n    y_var = 'ch4_flux'\n    Model = CH4_Model\n    Best = LSTM_Optimize(Path,y_var)\n    Best.Run(Model)\n    print()\n    print(\"--- %s seconds ---\" % (time.time() - start_time))\n</code></pre>\n\n<p>And here are a few rows of my dataset - the actual series has 1000's of observations</p>\n\n<pre><code>datetime,co2_flux,ch4_flux,ustar,wind_speed,AirTC_Avg,air_pressure,AirTC_Min,RH,PPFD_Avg,NR_Wm2_Avg,VWC,Temp,Sedge,Shrubby\n7/11/2016 8:00,-0.337747167,0.011732699,0.404379747,3.887986435,15.07,101118.6513,15.03,92.7,414.2,225.1,0.5895,7.950660426,0.001292044,0.823794007\n7/11/2016 8:30,-1.021087283,0.010256442,0.424094541,3.94983083,14.89,101144.0926,14.84,92.8,339.7,177.1,0.5895,8.24119905,0.001058732,0.826866339\n7/11/2016 9:00,-0.146511388,0.008503355,0.456274817,4.687202214,14.71,101177.3176,14.63,93.4,354.4,183.7,0.5895,8.146344257,0.000474955,0.84272365\n7/11/2016 9:30,0.144368521,0.009458078,0.462915317,4.810986576,14.27,101203.9191,14.2,93.3,370.2,188.4,0.5895,7.995179025,0.00147768,0.854715683\n7/11/2016 10:00,1.471425801,0.014895985,0.47095652,5.098075355,13.7,101235.9171,13.62,94.3,462.9,233.9,0.5895,7.521166721,4.64E-05,0.871581919\n7/11/2016 10:30,0.889911286,0.01564225,0.487227522,4.969666239,13.13,101277.0195,13.04,96,309.9,155.2,0.5895,7.923818563,8.14E-06,0.880709962\n</code></pre>\n\n<p>When I run this with a Tensorflow backed, everything goes smoothly and I get .  Howeverif I try to run it with a MXNet backend, it fails to load the save model weights and I get this traceback:</p>\n\n<pre><code>---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-1-14c6597a2feb&gt; in &lt;module&gt;()\n    114     Model = CH4_Model\n    115     Best = LSTM_Optimize(Path,y_var)\n--&gt; 116     Best.Run(Model)\n    117     print()\n    118     print(\"--- %s seconds ---\" % (time.time() - start_time))\n\n&lt;ipython-input-1-14c6597a2feb&gt; in Run(self, Inputs)\n     96                     shuffle=True,callbacks=[ES,CH,HS],verbose=0)\n     97             Y = Mod.predict(Xscale[test],batch_size = batch_size)\n---&gt; 98             Mod.load_weights('weights.hdf5')\n     99             Y = Mod.predict(Xscale[test],batch_size = batch_size)\n    100             MSE.append(metrics.mean_squared_error(self.y[test],Y))\n\n/usr/local/lib/python3.5/dist-packages/Keras-1.2.2-py3.5.egg/keras/engine/topology.py in load_weights(self, filepath, by_name)\n   2718             self.load_weights_from_hdf5_group_by_name(f)\n   2719         else:\n-&gt; 2720             self.load_weights_from_hdf5_group(f)\n   2721 \n   2722         if hasattr(f, 'close'):\n\n/usr/local/lib/python3.5/dist-packages/Keras-1.2.2-py3.5.egg/keras/engine/topology.py in load_weights_from_hdf5_group(self, f)\n   2804                         weight_values[0] = w\n   2805                 weight_value_tuples += zip(symbolic_weights, weight_values)\n-&gt; 2806             K.batch_set_value(weight_value_tuples)\n   2807 \n   2808     def load_weights_from_hdf5_group_by_name(self, f):\n\n/usr/local/lib/python3.5/dist-packages/Keras-1.2.2-py3.5.egg/keras/backend/mxnet_backend.py in batch_set_value(tuples)\n   2205     \"\"\"\n   2206     for p, w in tuples:\n-&gt; 2207         set_value(p, w)\n   2208 \n   2209 \n\n/usr/local/lib/python3.5/dist-packages/Keras-1.2.2-py3.5.egg/keras/backend/mxnet_backend.py in set_value(x, value)\n   2193     if isinstance(value, Number):\n   2194         value = [value]\n-&gt; 2195     x.bind(mx.nd.array(value))\n   2196 \n   2197 \n\n/usr/local/lib/python3.5/dist-packages/mxnet-0.11.0-py3.5.egg/mxnet/ndarray.py in array(source_array, ctx, dtype)\n   1295                 raise TypeError('source_array must be array like object')\n   1296     arr = empty(source_array.shape, ctx, dtype)\n-&gt; 1297     arr[:] = source_array\n   1298     return arr\n   1299 \n\n/usr/local/lib/python3.5/dist-packages/mxnet-0.11.0-py3.5.egg/mxnet/ndarray.py in __setitem__(self, key, value)\n    384                 _internal._set_value(float(value), out=self)\n    385             elif isinstance(value, (np.ndarray, np.generic)):\n--&gt; 386                 self._sync_copyfrom(value)\n    387             else:\n    388                 raise TypeError(\n\n/usr/local/lib/python3.5/dist-packages/mxnet-0.11.0-py3.5.egg/mxnet/ndarray.py in _sync_copyfrom(self, source_array)\n    556             print(self.shape)\n    557             raise ValueError('Shape inconsistent: expected %s vs got %s'%(\n--&gt; 558                 str(self.shape), str(source_array.shape)))\n    559         check_call(_LIB.MXNDArraySyncCopyFromCPU(\n    560             self.handle,\n\nValueError: Shape inconsistent: expected () vs got (1,)\n</code></pre>\n\n<p>Why do I want to use MXNet?  It seems to be faster than tensorflow, and I will have to perform train-test-validation on many models with varying inputs and different #s of nodes and hyper-paramters.  I've been able to significantly boost the speed of keras models with a MXNet backend by using multiprocessing to train multiple different models in parallel.  However, using a tensroflow back end I get a thread-lock error when trying to do multiprocessing.</p>\n\n<p>For context, I'm using Deep Learning AMI Ubuntu Linux - 2.3_Sep2017 (ami-d6ee1dae) environment on a p2.xlarge instance.</p>\n\n<p>Any ideas would be greatly appreciated!</p>\n"}, {"tags": ["python", "excel", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 0, "last_activity_date": 1507763742, "last_edit_date": 1507763742, "creation_date": 1507763406, "answer_id": 46698894, "question_id": 46698699, "link": "https://stackoverflow.com/questions/46698699/pandas-dataframe-to-excel-excel-function-inactive-non-evaluated/46698894#46698894", "title": "Pandas Dataframe to_excel Excel function &quot;inactive&quot;/&quot;non-evaluated&quot;", "body": "<p>Consider the following demo:</p>\n\n<pre><code>writer = pd.ExcelWriter('d:/temp/a3.xlsx')\n\ndf.to_excel(writer, index=False)\n\nbook = writer.book\n\nws = book.worksheets()[0]\n\nws.write_formula('A1', '=HYPERLINK(\"http://www.google.com\", \"Google\")')\n\nwriter.save()\n</code></pre>\n\n<p>PS you may also want to check <a href=\"https://xlsxwriter.readthedocs.io/worksheet.html#write_url\" rel=\"nofollow noreferrer\">worksheet.write_url()</a> method</p>\n"}], "owner": {"reputation": 16302, "user_id": 1953475, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/xbP7V.jpg?s=128&g=1", "display_name": "B.Mr.W.", "link": "https://stackoverflow.com/users/1953475/b-mr-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507763742, "creation_date": 1507762128, "question_id": 46698699, "link": "https://stackoverflow.com/questions/46698699/pandas-dataframe-to-excel-excel-function-inactive-non-evaluated", "title": "Pandas Dataframe to_excel Excel function &quot;inactive&quot;/&quot;non-evaluated&quot;", "body": "<p>I am using Pandas Dataframe to generate an Excel file where the cells will store the hyperlink. I am pretty positive that the HYPERLINK functions are valid. </p>\n\n<pre><code>def gen_link(sheet, cell, text):\n    '''\n    a utility function to generate the hyper link\n    '''\n    data = {\n        'sheet': sheet,\n        'cell': cell,\n        'text': text\n    }\n    value = '=HYPERLINK(\"#{sheet}!{cell}\",\"{text}\")'.format(**data)\n    value = value.upper()\n    return value\n</code></pre>\n\n<p>However, when I open the output file in Excel, all the links looks unevaluated. I have to go to the cell, highlight the content and hit enter to activate it. </p>\n\n<p>The <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.to_excel.html\" rel=\"nofollow noreferrer\">documentation</a> of <code>to_excel</code> does not provide that much information and I am wondering if the community knows the answer. </p>\n\n<p><a href=\"https://i.stack.imgur.com/aI2RX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aI2RX.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "flask", "flask-socketio"], "comments": [{"owner": {"reputation": 56149, "user_id": 904393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07759b65c163ee70d802ae9cce9142ec?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/904393/miguel"}, "edited": false, "score": 0, "creation_date": 1507765494, "post_id": 46698655, "comment_id": 80345807, "body": "What is the relationship between this problem and PyCharm? I see you mention it only in the title. Does this work when you run the script outside of PyCharm?"}, {"owner": {"reputation": 2464, "user_id": 3629892, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e82d30463a970d795b8b8cf1455ff7bb?s=128&d=identicon&r=PG&f=1", "display_name": "user3629892", "link": "https://stackoverflow.com/users/3629892/user3629892"}, "reply_to_user": {"reputation": 56149, "user_id": 904393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07759b65c163ee70d802ae9cce9142ec?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/904393/miguel"}, "edited": false, "score": 0, "creation_date": 1507829370, "post_id": 46698655, "comment_id": 80377438, "body": "Hi! Yes, the title is misleading, I have changed it. It doesn&#39;t work from the console either. Same behaviour."}, {"owner": {"reputation": 56149, "user_id": 904393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07759b65c163ee70d802ae9cce9142ec?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/904393/miguel"}, "edited": false, "score": 0, "creation_date": 1507829612, "post_id": 46698655, "comment_id": 80377572, "body": "Does the example <code>app.py</code> from <a href=\"https://github.com/miguelgrinberg/Flask-SocketIO/tree/master/example\" rel=\"nofollow noreferrer\">github.com/miguelgrinberg/Flask-SocketIO/tree/master/example</a> work in your environment?"}, {"owner": {"reputation": 2464, "user_id": 3629892, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e82d30463a970d795b8b8cf1455ff7bb?s=128&d=identicon&r=PG&f=1", "display_name": "user3629892", "link": "https://stackoverflow.com/users/3629892/user3629892"}, "reply_to_user": {"reputation": 56149, "user_id": 904393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07759b65c163ee70d802ae9cce9142ec?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/904393/miguel"}, "edited": false, "score": 0, "creation_date": 1507829898, "post_id": 46698655, "comment_id": 80377730, "body": "No, same thing unfortunately."}, {"owner": {"reputation": 56149, "user_id": 904393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07759b65c163ee70d802ae9cce9142ec?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/904393/miguel"}, "edited": false, "score": 1, "creation_date": 1507830385, "post_id": 46698655, "comment_id": 80378016, "body": "Did you try rebuilding your virtual environment?"}, {"owner": {"reputation": 2464, "user_id": 3629892, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e82d30463a970d795b8b8cf1455ff7bb?s=128&d=identicon&r=PG&f=1", "display_name": "user3629892", "link": "https://stackoverflow.com/users/3629892/user3629892"}, "reply_to_user": {"reputation": 56149, "user_id": 904393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07759b65c163ee70d802ae9cce9142ec?s=128&d=identicon&r=PG", "display_name": "Miguel", "link": "https://stackoverflow.com/users/904393/miguel"}, "edited": false, "score": 0, "creation_date": 1507832683, "post_id": 46698655, "comment_id": 80379231, "body": "Thanks a lot for this! I didn&#39;t even have a virtualenv (I&#39;m new to python). Now it works perfectly AND I&#39;m doing it in a more professional way. Thanks again :)"}], "owner": {"reputation": 2464, "user_id": 3629892, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e82d30463a970d795b8b8cf1455ff7bb?s=128&d=identicon&r=PG&f=1", "display_name": "user3629892", "link": "https://stackoverflow.com/users/3629892/user3629892"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 590, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507829380, "creation_date": 1507761777, "last_edit_date": 1507829380, "question_id": 46698655, "link": "https://stackoverflow.com/questions/46698655/flask-socketio-not-starting", "title": "flask socketio not starting", "body": "<p>Trying to get a flask socketio app going.</p>\n\n<p>Here's my init.py</p>\n\n<pre><code>import os\n\nfrom flask import Flask, logging\nfrom flask_socketio import SocketIO\nfrom flask_sqlalchemy import SQLAlchemy\n\nfrom config import app_config\n\ndatabase = SQLAlchemy()\nsocket_io = SocketIO()\n\n\ndef create_app(config_name):\n    app = Flask(__name__, instance_relative_config=True)\n    app.config.from_object(app_config[config_name])\n    database.init_app(app)\n    socket_io.init_app(app)\n\n    from .home import home as home_blueprint\n    app.register_blueprint(home_blueprint)\n\n    return app\n</code></pre>\n\n<p>and here is my run.py</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport sys\nfrom app import create_app, socket_io\n\nconfig_name = sys.argv[1]\napp = create_app(config_name)\n\nif __name__ == \"__main__\":\n    socket_io.run(app)\n</code></pre>\n\n<p>When I start up the app, this is the log output in the python console:</p>\n\n<pre><code>C:\\AnacondaPython\\python.exe D:/workspaces/App/run.py development\n * Restarting with windowsapi reloader\n * Debugger is active!\n * Debugger PIN: 189-233-458\n</code></pre>\n\n<p>And then nothing happens.</p>\n\n<p>When I open the app in the browser, it just keeps loading.</p>\n\n<p>How do I do this correctly?</p>\n\n<p>I'll provide more code if necessary.</p>\n\n<p>Thanks for any help and tips!</p>\n"}, {"tags": ["python", "python-3.x", "while-loop", "break"], "comments": [{"owner": {"reputation": 41467, "user_id": 351031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d495a914ca38eca81f0143e62706775d?s=128&d=identicon&r=PG&f=1", "display_name": "g.d.d.c", "link": "https://stackoverflow.com/users/351031/g-d-d-c"}, "edited": false, "score": 2, "creation_date": 1507761840, "post_id": 46698634, "comment_id": 80344901, "body": "The issue is that you&#39;re recursively calling your function, which means that you have nested while loops that each have to be broken for each invocation of your function.  You&#39;ll need to rethink your approach."}, {"owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "edited": false, "score": 0, "creation_date": 1507762178, "post_id": 46698634, "comment_id": 80344998, "body": "<code>return products_inp()</code> would do."}], "answers": [{"tags": [], "owner": {"reputation": 41467, "user_id": 351031, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d495a914ca38eca81f0143e62706775d?s=128&d=identicon&r=PG&f=1", "display_name": "g.d.d.c", "link": "https://stackoverflow.com/users/351031/g-d-d-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1507762020, "creation_date": 1507762020, "answer_id": 46698687, "question_id": 46698634, "link": "https://stackoverflow.com/questions/46698634/cant-break-while-cycle/46698687#46698687", "title": "Can&#39;t break &quot;while&quot; cycle", "body": "<p>Viable:</p>\n\n<pre><code>def myfunc():\n  while True:\n    # do something static here.\n    if condition:\n      break\n</code></pre>\n\n<p>Not viable:</p>\n\n<pre><code>def myfunc():\n  while True:\n    myfunc()\n    break\n</code></pre>\n\n<p>With the former setup, as long as you don't call <code>myfunc()</code>, breaking breaks the only while loop.  With the latter setup (yours), each time you call <code>myfunc()</code> from within your function, you create a nested <code>while True</code> loop.  You have to break each one of those.</p>\n"}, {"tags": [], "owner": {"reputation": 698, "user_id": 7742131, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/7mQxh.jpg?s=128&g=1", "display_name": "caird coinheringaahing", "link": "https://stackoverflow.com/users/7742131/caird-coinheringaahing"}, "is_accepted": false, "score": 1, "last_activity_date": 1507762044, "creation_date": 1507762044, "answer_id": 46698689, "question_id": 46698634, "link": "https://stackoverflow.com/questions/46698634/cant-break-while-cycle/46698689#46698689", "title": "Can&#39;t break &quot;while&quot; cycle", "body": "<p>Because you are recursively calling the function, you are nesting your <code>while</code> loop, meaning that it needs to be broken out of each time you call the function. It would be better to exclude the whole loop from the function to result in</p>\n\n<pre><code>inplist = []\ndef products_inp():\n    inp = \"\"\n    inp = input(\"lets see watcha got...\\n\")\n    inplist.append(inp)\n    print(inplist)\n\nwhile True:\n    selector = \"\"\n    selector = input(\"smth else? (Y/N)\\n\")\n    if selector.lower() == 'y':\n        products_inp()\n    elif selector.lower() == 'n':\n        print(\"Got'em! loading...\")\n        break\n    else:\n        print(\"aint got it...\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 8728796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2313163d2bf748495140b8d1368fa9f1?s=128&d=identicon&r=PG&f=1", "display_name": "user77581", "link": "https://stackoverflow.com/users/8728796/user77581"}, "is_accepted": false, "score": 0, "last_activity_date": 1507762528, "creation_date": 1507762528, "answer_id": 46698768, "question_id": 46698634, "link": "https://stackoverflow.com/questions/46698634/cant-break-while-cycle/46698768#46698768", "title": "Can&#39;t break &quot;while&quot; cycle", "body": "<p>The other answers are correct, another approach to tackle a problem like this is to not use a while loop that you have to break. Sometimes there is no way around this but in your case you could easily rearrange your code into a function that takes user input, and then a while loop with a boolean expression, such that if the user wants to input more it remains true and if they enter n it becomes false terminating the loop. This also makes it easier to read. </p>\n"}], "owner": {"reputation": 83, "user_id": 8761932, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hLxN_pcRfSY/AAAAAAAAAAI/AAAAAAAAANM/UHeM7gR_evA/photo.jpg?sz=128", "display_name": "Andrei Aleksandrov", "link": "https://stackoverflow.com/users/8761932/andrei-aleksandrov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1507762528, "creation_date": 1507761674, "question_id": 46698634, "link": "https://stackoverflow.com/questions/46698634/cant-break-while-cycle", "title": "Can&#39;t break &quot;while&quot; cycle", "body": "<p>SO, Hello! I am coding my first programm and i need help with the next problem:\nThe folowing code is getting a str then asking about if it shall get another string. If the answer is yes it should ask for the next string, but if the answer is no it should break the cycle \"while\". Well in fact what is happening cycle is breaking only after working so much times as much items u enterd.\nHere's a <a href=\"https://repl.it/M4Ta/0\" rel=\"nofollow noreferrer\">link</a> for webinterpriter.\nSorry for my english.</p>\n\n<pre><code>inplist = []\ndef products_inp():\n    inp = \"\"\n    inp = input(\"lets see watcha got...\\n\")\n    inplist.append(inp)\n    print(inplist)\n    while True:\n        selector = \"\"\n        selector = input(\"smth else? (Y/N)\\n\")\n        if selector.lower() == 'y':\n            products_inp()\n        elif selector.lower() == 'n':\n            print(\"Got'em! loading...\")\n            break\n        else:\n            print(\"aint got it...\")\nproducts_inp()\n</code></pre>\n"}, {"tags": ["python", "testing", "mocking", "metaprogramming"], "answers": [{"tags": [], "owner": {"reputation": 365, "user_id": 6097123, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bXkWJ.jpg?s=128&g=1", "display_name": "sann05", "link": "https://stackoverflow.com/users/6097123/sann05"}, "is_accepted": true, "score": 1, "last_activity_date": 1507894977, "creation_date": 1507894977, "answer_id": 46729164, "question_id": 46698613, "link": "https://stackoverflow.com/questions/46698613/how-to-inject-meta-data-in-existing-object/46729164#46729164", "title": "How to inject meta data in existing object", "body": "<p>It turns out that i should create metaclass with <strong>__call__</strong> method and reinitialize classes with my metaclass like in example below:</p>\n\n<pre><code>collector = 0\n\n\nclass IdMeta(type):\n    def __call__(cls, *args, **kwds):\n        global collector\n        collector += 1\n        cls.id = collector\n        return type.__call__(cls, *args, **kwds)\n\n\nA = IdMeta(A.__name__, A.__bases__, dict(A.__dict__))\nB = IdMeta(B.__name__, B.__bases__, dict(B.__dict__))\n</code></pre>\n"}], "owner": {"reputation": 365, "user_id": 6097123, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/bXkWJ.jpg?s=128&g=1", "display_name": "sann05", "link": "https://stackoverflow.com/users/6097123/sann05"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 46729164, "answer_count": 1, "score": 0, "last_activity_date": 1507894977, "creation_date": 1507761523, "question_id": 46698613, "link": "https://stackoverflow.com/questions/46698613/how-to-inject-meta-data-in-existing-object", "title": "How to inject meta data in existing object", "body": "<p>Sometimes, i need to change existing method behaviour or inject meta data for testing purpouses. Like: we have 2 predefined classes which we can't change (we can implement SomeClass* just to ease injecting metadata). </p>\n\n<pre><code>class A(SomeClass1):\n    def __init__(self):\n        last_id = self.id\n\nclass B(SomeClass2):\n   def __init__(self):\n        last_id = self.id\n</code></pre>\n\n<p>So what should be done to next line print incremented id's (like: 1 2 3) ?</p>\n\n<pre><code>print A().id, B().id, A().id\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1507763249, "post_id": 46698601, "comment_id": 80345301, "body": "<b>1</b> Is this Python 2 or 3? <b>2</b> What line is raising that error? Please post the full traceback. <b>3</b> When writing encoded bytes to files (rather than text) you should open those files in binary mode. That shouldn&#39;t matter on Unix-like systems, but it does on Windows. <b>4</b> It&#39;s not a good idea to mix encodings, eg ISO-8859-1 with UTF-8. And definitely don&#39;t mix encoded data with unencoded Unicode strings. You may find this article helpful: <a href=\"http://nedbatchelder.com/text/unipain.html\" rel=\"nofollow noreferrer\">Pragmatic Unicode</a>, which was written by SO veteran Ned Batchelder."}, {"owner": {"reputation": 6804, "user_id": 1934510, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3f2e521fe728bb5d6e87db48df3c9114?s=128&d=identicon&r=PG", "display_name": "Filipe Ferminiano", "link": "https://stackoverflow.com/users/1934510/filipe-ferminiano"}, "reply_to_user": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1507763746, "post_id": 46698601, "comment_id": 80345425, "body": "Hi this is Python 2.7. I posted the full traceback. The full code is this. I only don&#39;t show get_data function, which is just a function to access my database."}], "owner": {"reputation": 6804, "user_id": 1934510, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3f2e521fe728bb5d6e87db48df3c9114?s=128&d=identicon&r=PG", "display_name": "Filipe Ferminiano", "link": "https://stackoverflow.com/users/1934510/filipe-ferminiano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1166, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507763559, "creation_date": 1507761472, "last_edit_date": 1507763559, "question_id": 46698601, "link": "https://stackoverflow.com/questions/46698601/unicodedecodeerror-utf8-codec-cant-decode-byte-0xe9-in-position-18-invalid", "title": "UnicodeDecodeError: &#39;utf8&#39; codec can&#39;t decode byte 0xe9 in position 18: invalid continuation byte", "body": "<p>I'm trying to output a datetime column to json.But I'm getting this error in Python 2.7:</p>\n\n<pre><code>UnicodeDecodeError: 'utf8' codec can't decode byte 0xe9 in position 18: invalid continuation byte\n</code></pre>\n\n<p>This is a sample data:</p>\n\n<pre><code>&gt;&gt;&gt; data\n            id impact_date             store     country  \\\n0      6244543  2017-10-10  ARGENTINA   ARGENTINA\n1      6244544  2017-10-10  ARGENTINA   ARGENTINA\n2      6244545  2017-10-10  ARGENTINA   ARGENTINA\n3      6244546  2017-10-10  ARGENTINA   ARGENTINA\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>data = get_data(DB_ENGINE, MYSQL_USER, MYSQL_PASSWORD, MYSQL_HOST, MYSQL_PORT, MYSQL_DB, query)\n\n\nif filename:\n    with open(filename, 'w+') as f: f.write(json.dumps(x,default=datetime_handler))\n\ndef datetime_handler(x):\n    if isinstance(x, datetime.datetime):\n        #return unicode(x.strftime(\"%B %d, %Y\"),errors=\"ignore\")\n        # return unicode(x.strftime(\"%B %d, %Y\").encode('latin-1'),errors=\"ignore\")\n        return x.strftime(\"%B %d, %Y\").encode('ISO-8859-1')\n    else:\n            return x\n    raise TypeError(\"Unknown type\")\n\n\nif filename:\n    with open(filename, 'w+') as f: f.write(json.dumps(x,default=datetime_handler))\n</code></pre>\n\n<p>How can I fix this?</p>\n\n<p>EDIT</p>\n\n<p>The full traceback:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 2, in &lt;module&gt;\n  File \"/usr/lib64/python2.7/json/__init__.py\", line 250, in dumps\n    sort_keys=sort_keys, **kw).encode(obj)\n  File \"/usr/lib64/python2.7/json/encoder.py\", line 207, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n  File \"/usr/lib64/python2.7/json/encoder.py\", line 270, in iterencode\n    return _iterencode(o, 0)\nUnicodeDecodeError: 'utf8' codec can't decode byte 0xe9 in position 18: invalid continuation byte\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "box"], "comments": [{"owner": {"reputation": 6861, "user_id": 1594286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1c31013ccab64b0efbc9b18236d80ac1?s=128&d=identicon&r=PG", "display_name": "Shadow", "link": "https://stackoverflow.com/users/1594286/shadow"}, "edited": false, "score": 0, "creation_date": 1507761575, "post_id": 46698597, "comment_id": 80344828, "body": "Please start by formatting your code. Don&#39;t apologise for it - fix it :P"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1507761938, "post_id": 46698597, "comment_id": 80344933, "body": "Welcome to StackOverflow.  Please read and follow the posting guidelines in the help documentation.  <a href=\"http://stackoverflow.com/help/mcve\">Minimal, complete, verifiable example</a> applies here.  We cannot effectively help you until you post your MCVE code and accurately describe the problem. We should be able to paste your posted code into a text file and reproduce the problem you described. Among other things, the user tour points you to notes on how to format your posting."}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1507762404, "creation_date": 1507762404, "answer_id": 46698754, "question_id": 46698597, "link": "https://stackoverflow.com/questions/46698597/how-to-make-a-hollow-box-using-python/46698754#46698754", "title": "How to make a hollow box using python", "body": "<p>Part of your problem is that you've written a lot of supporting code well before you've figured out how to print <em>any</em> box.  Among other things, you can't print the two types of lines that you need.  Drop the overhead for now; test this with a simple main program of</p>\n\n<pre><code>print_line(\"*\", 5)\n</code></pre>\n\n<p>When you have <strong>print_line</strong> working, then back up to</p>\n\n<pre><code>print_box(\"*\", 5)\n</code></pre>\n\n<p>Once <strong>that</strong> is working, <em>then</em> you can fiddle with input and validation.</p>\n\n<p>In the meantime, here's a simple change to help you test, so you can tell which characters come from which <strong>print</strong> statements:</p>\n\n<pre><code>def print_line(ch, size):\n    print(\"1\")\n    for index in range(4):\n        print(\"2\", end =\"\")\n    print(\"3\")\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>1\n22223\n</code></pre>\n\n<p>Does that show you some of the problems in your logic?</p>\n\n<p>Keep going: you're doing a lot of things right.</p>\n"}], "owner": {"reputation": 1, "user_id": 8761923, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-144bz1fruPU/AAAAAAAAAAI/AAAAAAAANaU/YrjFx8caOEQ/photo.jpg?sz=128", "display_name": "Tony", "link": "https://stackoverflow.com/users/8761923/tony"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1507762497, "creation_date": 1507761460, "last_edit_date": 1507762497, "question_id": 46698597, "link": "https://stackoverflow.com/questions/46698597/how-to-make-a-hollow-box-using-python", "title": "How to make a hollow box using python", "body": "<p>So I have an assignment to print a box (hollow) according to the user-given output. The function names and purposes are assigned.</p>\n\n<p>When I call this code with <strong>print_box()</strong> and enter the answers, I cant get a box.</p>\n\n<p>Code:    </p>\n\n<pre><code>def print_line(ch, size):\n    print(ch)\n    for index in range(4):\n        print(ch, end =\"\")\n    print(ch)\n\ndef get_size():\n    n = int(input(\"Enter a number between 3 and 8: \"))\n    while n &lt; 3:\n        n = int(input(\"Wrong, enter a number between 3 and 8: \"))\n    return n\n\ndef get_char():\n    ch = input(\"Enter a character (* or -): \")\n    while ch not in \u2018*-\u2019:\n        ch = input(\"Please try again: \")\n    return ch\n\ndef print_box():\n    size = get_size()\n    ch = get_char()\n    print_line(ch, size)\n\nprint_box()\n</code></pre>\n"}, {"tags": ["python", "flask", "flask-sqlalchemy", "flask-wtforms"], "answers": [{"comments": [{"owner": {"reputation": 363, "user_id": 3677938, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/efb2f253b6ed2de396ed30db937f6275?s=128&d=identicon&r=PG", "display_name": "Automatic Bazooty", "link": "https://stackoverflow.com/users/3677938/automatic-bazooty"}, "edited": false, "score": 0, "creation_date": 1507762371, "post_id": 46698695, "comment_id": 80345052, "body": "Thanks for the answer, though I&#39;m getting this traceback: AttributeError: &#39;Request&#39; object has no attribute &#39;POST&#39;"}, {"owner": {"reputation": 363, "user_id": 3677938, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/efb2f253b6ed2de396ed30db937f6275?s=128&d=identicon&r=PG", "display_name": "Automatic Bazooty", "link": "https://stackoverflow.com/users/3677938/automatic-bazooty"}, "edited": false, "score": 0, "creation_date": 1507762589, "post_id": 46698695, "comment_id": 80345119, "body": "Also, I&#39;ll need to get the test name passed into update_audit so that the database knows which row I want to update. This should happen in audit.html, and row[2] contains the test name."}, {"owner": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "reply_to_user": {"reputation": 363, "user_id": 3677938, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/efb2f253b6ed2de396ed30db937f6275?s=128&d=identicon&r=PG", "display_name": "Automatic Bazooty", "link": "https://stackoverflow.com/users/3677938/automatic-bazooty"}, "edited": false, "score": 0, "creation_date": 1507762761, "post_id": 46698695, "comment_id": 80345173, "body": "It should be <code>request.form</code> not <code>request.POST</code>"}, {"owner": {"reputation": 363, "user_id": 3677938, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/efb2f253b6ed2de396ed30db937f6275?s=128&d=identicon&r=PG", "display_name": "Automatic Bazooty", "link": "https://stackoverflow.com/users/3677938/automatic-bazooty"}, "edited": false, "score": 0, "creation_date": 1507763741, "post_id": 46698695, "comment_id": 80345424, "body": "That got the data sent to the clicked.html view, but the database still isn&#39;t updated. Close though!"}, {"owner": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "reply_to_user": {"reputation": 363, "user_id": 3677938, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/efb2f253b6ed2de396ed30db937f6275?s=128&d=identicon&r=PG", "display_name": "Automatic Bazooty", "link": "https://stackoverflow.com/users/3677938/automatic-bazooty"}, "edited": false, "score": 0, "creation_date": 1507764832, "post_id": 46698695, "comment_id": 80345657, "body": "Yes, you need to commit changes to the db."}], "tags": [], "owner": {"reputation": 27093, "user_id": 5189811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FzPWr.png?s=128&g=1", "display_name": "Oluwafemi Sule", "link": "https://stackoverflow.com/users/5189811/oluwafemi-sule"}, "is_accepted": false, "score": 1, "last_activity_date": 1507764871, "last_edit_date": 1507764871, "creation_date": 1507762090, "answer_id": 46698695, "question_id": 46698586, "link": "https://stackoverflow.com/questions/46698586/using-flask-to-send-form-data-to-a-database/46698695#46698695", "title": "Using Flask to send form data to a database", "body": "<p>Set a name attribute for text input so that it gets sent with the submitted form.</p>\n\n<pre><code>&lt;input name=\"description\" type=\"text\" id=\"desc\" value=\"{{ row[3] }}\" size=\"140\"&gt;\n</code></pre>\n\n<p>Update your view function to get description from the POST dictionary attribute of <code>request</code>. <code>test_name</code> also needs to be updated to an appropriate value.</p>\n\n<pre><code>@app.route('/update-audit/', methods=['POST'])\ndef update_audit():\n    description = request.form.get('description')\n    test_name = request.form.get('update_audit')\n    cur = connect_db()\n    with cur:\n        cur.execute(\n            'UPDATE audit SET description = ? '\n            'WHERE test_name = ?;', (description, test_name,))\n\n    # commit changes to the database\n    return render_template('clicked.html')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 363, "user_id": 3677938, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/efb2f253b6ed2de396ed30db937f6275?s=128&d=identicon&r=PG", "display_name": "Automatic Bazooty", "link": "https://stackoverflow.com/users/3677938/automatic-bazooty"}, "edited": false, "score": 0, "creation_date": 1507762524, "post_id": 46698755, "comment_id": 80345097, "body": "row is the current index of the iter data from the database. When I load audit.html, I pass along the result of a query which asks for all the data in the table sample."}], "tags": [], "owner": {"reputation": 11, "user_id": 8723159, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q61wp.jpg?s=128&g=1", "display_name": "Leo Leite", "link": "https://stackoverflow.com/users/8723159/leo-leite"}, "is_accepted": false, "score": 0, "last_activity_date": 1507762425, "creation_date": 1507762425, "answer_id": 46698755, "question_id": 46698586, "link": "https://stackoverflow.com/questions/46698586/using-flask-to-send-form-data-to-a-database/46698755#46698755", "title": "Using Flask to send form data to a database", "body": "<p>Your render_template should get a form argument:</p>\n\n<p>return render_template('clicked.html', form=form)</p>\n\n<p>It is also not clear in the code you provided where the Forms are treated in python and where the variable row comes from.</p>\n"}, {"tags": [], "owner": {"reputation": 363, "user_id": 3677938, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/efb2f253b6ed2de396ed30db937f6275?s=128&d=identicon&r=PG", "display_name": "Automatic Bazooty", "link": "https://stackoverflow.com/users/3677938/automatic-bazooty"}, "is_accepted": false, "score": 0, "last_activity_date": 1507919436, "creation_date": 1507919436, "answer_id": 46736035, "question_id": 46698586, "link": "https://stackoverflow.com/questions/46698586/using-flask-to-send-form-data-to-a-database/46736035#46736035", "title": "Using Flask to send form data to a database", "body": "<p>Figured it out:</p>\n\n<p><strong>app.py sample</strong></p>\n\n<pre><code>@app.route('/update-audit/', methods=['POST'])\ndef update_audit():\n    description = request.form.get('description')\n    test_name = request.form.get('test_name')\n\n    sql = 'UPDATE audit SET description=? WHERE test_name=?'\n    conn = sqlite3.connect(DATABASE)\n    cur = conn.cursor()\n    cur.execute(sql, (description, test_name))\n    conn.commit()\n    conn.close()\n\n    return render_template('clicked.html', data=(test_name, description))\n</code></pre>\n\n<p><strong>audit.html sample</strong></p>\n\n<pre><code>&lt;form action=\"{{ url_for('update_audit') }}\" method=\"POST\"&gt;\n    &lt;td&gt;\n        &lt;input type=\"hidden\" name=\"test_name\" value=\"{{ row[2] }}\"&gt;{{ row[2] }}&lt;/input&gt;\n    &lt;/td&gt;\n    &lt;td&gt;\n        &lt;input type=\"text\" name=\"description\" id=\"desc\" value=\"{{ row[3] }}\" size=\"100\" maxlength=\"140\"/&gt;\n        &lt;input type=\"submit\" class=\"btn btn-success\" value=\"Update\"/&gt;\n    &lt;/td&gt;\n&lt;/form&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>The answer is a combination of the right SQL-Alchemy commands, and ensuring that I'm sending the data to the update_audit function via two input-tags in audit.html.</p>\n"}], "owner": {"reputation": 363, "user_id": 3677938, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/efb2f253b6ed2de396ed30db937f6275?s=128&d=identicon&r=PG", "display_name": "Automatic Bazooty", "link": "https://stackoverflow.com/users/3677938/automatic-bazooty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9003, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1507919436, "creation_date": 1507761350, "question_id": 46698586, "link": "https://stackoverflow.com/questions/46698586/using-flask-to-send-form-data-to-a-database", "title": "Using Flask to send form data to a database", "body": "<p>I've created a simple web page with a text field and a button. I want my application to update a record in my database with the content of the text field when I click the button. Seems simple enough, but I can't figure out what I'm missing. Here's my code thus far:</p>\n\n<p><strong>app.py sample</strong></p>\n\n<pre><code>@app.route('/update-audit/', methods=['POST'])\ndef update_audit(test_name, description):\n    cur = connect_db()\n    cur.execute('UPDATE audit SET description = ? WHERE test_name = ?', (description, test_name,))\n    return render_template('clicked.html')\n</code></pre>\n\n<p><strong>audit.html sample</strong></p>\n\n<pre><code>&lt;form action=\"{{ url_for('update_audit') }}\" method=\"post\"&gt;\n    &lt;td&gt;{{ row[2] }}&lt;/td&gt;\n    &lt;td&gt;\n        &lt;input type=\"text\" id=\"desc\" value=\"{{ row[3] }}\" size=\"140\"&gt;\n        &lt;input type=\"hidden\" name=\"update_audit\" value=\"{{ row[2] }}, desc\"/&gt;\n        &lt;input type=\"submit\" class=\"btn btn-success\" value=\"Update\"/&gt;\n    &lt;/td&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p><strong>clicked.html</strong></p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n{% extends \"layout.html\" %}\n{% block content %}\n&lt;body&gt;\n{{ form.description }}&lt;br /&gt;\n&lt;/body&gt;\n{% endblock %}\n</code></pre>\n\n<p><strong>table sample</strong></p>\n\n<pre><code>id | tool name | test name | description\n========================================\n1  | \"tool1\"   | \"test1\"   | \"update me!\"\n</code></pre>\n\n<p>Not sure if I'm missing an essential concept (I played around with flask_wtf and didn't get anywhere) or if I'm a step or two away from making this happen.</p>\n"}, {"tags": ["python", "image-processing"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 8741568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b55c44018c52b2c8aef7c42e2ba799?s=128&d=identicon&r=PG&f=1", "display_name": "George Lin", "link": "https://stackoverflow.com/users/8741568/george-lin"}, "is_accepted": false, "score": 0, "last_activity_date": 1507766962, "creation_date": 1507766962, "answer_id": 46699385, "question_id": 46698570, "link": "https://stackoverflow.com/questions/46698570/normalise-face-landmark-data-using-python/46699385#46699385", "title": "Normalise face landmark data using python", "body": "<p>Actually I think I have figured it out, pretty simple maths actually, here is what i am going to do</p>\n\n<ol>\n<li>Take every point and take away the first box point values - this will give me the points as if the box starts at [ 0,0 ]</li>\n<li>Apply the box/normalised size ratio to every point</li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 8741568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24b55c44018c52b2c8aef7c42e2ba799?s=128&d=identicon&r=PG&f=1", "display_name": "George Lin", "link": "https://stackoverflow.com/users/8741568/george-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507766962, "creation_date": 1507761230, "question_id": 46698570, "link": "https://stackoverflow.com/questions/46698570/normalise-face-landmark-data-using-python", "title": "Normalise face landmark data using python", "body": "<p>I am currently learning python and playing around with tensorflow.</p>\n\n<p>I have a bunch of images where I have obtained the landmarks (pixel points) of a person's facial features such as ears and eyes. In addition, it also provides me with a box (4 coordinates) where the face exists.</p>\n\n<p>My goal is to normalise all the data from different images into a standard sized rectangle / square and calculate the position of the landmarks relative to the normalised size.</p>\n\n<p>Is there an API that allows me to do this already or should I get cracking and calculate the points myself?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "optimization", "scipy"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 1, "creation_date": 1507761124, "post_id": 46698519, "comment_id": 80344704, "body": "Yes, by defining a callback. This is trivial to do for x, but for the other two use-cases you should wrap those functions (manual counting) and probably cache the obj too. (you must decide if disp is enough for you; it probably depends a lot on the minimizer on how verbose it is)"}, {"owner": {"reputation": 134, "user_id": 8127598, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208108850547319/picture?type=large", "display_name": "Gustavo Amarante", "link": "https://stackoverflow.com/users/8127598/gustavo-amarante"}, "reply_to_user": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1507761441, "post_id": 46698519, "comment_id": 80344792, "body": "That is it! I did not pay attention to that option on the documentation. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 134, "user_id": 8127598, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208108850547319/picture?type=large", "display_name": "Gustavo Amarante", "link": "https://stackoverflow.com/users/8127598/gustavo-amarante"}, "edited": false, "score": 0, "creation_date": 1507761244, "post_id": 46698554, "comment_id": 80344730, "body": "I have the <code>disp</code> option set to <code>True</code>. It only shows the output after the procedure is done, and not during the procedure."}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "reply_to_user": {"reputation": 134, "user_id": 8127598, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208108850547319/picture?type=large", "display_name": "Gustavo Amarante", "link": "https://stackoverflow.com/users/8127598/gustavo-amarante"}, "edited": false, "score": 0, "creation_date": 1507761374, "post_id": 46698554, "comment_id": 80344774, "body": "Then I don&#39;t know what you mean by &quot;during the procedure&quot;. This should print out information about the objective, gradient, etc, at each step of the solver. Do you want this information at each <i>function evaluation</i>?"}, {"owner": {"reputation": 134, "user_id": 8127598, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208108850547319/picture?type=large", "display_name": "Gustavo Amarante", "link": "https://stackoverflow.com/users/8127598/gustavo-amarante"}, "edited": false, "score": 0, "creation_date": 1507761604, "post_id": 46698554, "comment_id": 80344835, "body": "I think you understood it correctly. It is really at each iteration, but the <code>disp</code> option does not do that. @sascha told me about the <code>callback</code> option and it gives me the value of <code>x</code> at each step. Thanks for the help!"}], "tags": [], "owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "is_accepted": false, "score": 0, "last_activity_date": 1507761137, "creation_date": 1507761137, "answer_id": 46698554, "question_id": 46698519, "link": "https://stackoverflow.com/questions/46698519/scipy-optimize-view-steps-during-procedure/46698554#46698554", "title": "scipy optimize - View steps during procedure", "body": "<p>The <code>minimize</code> function takes an <code>options</code> dict as a keyword argument. Accepted keys for this dict inlude, <code>disp</code>, which should be set to <code>True</code> to print the progress of the minimization.</p>\n"}], "owner": {"reputation": 134, "user_id": 8127598, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10208108850547319/picture?type=large", "display_name": "Gustavo Amarante", "link": "https://stackoverflow.com/users/8127598/gustavo-amarante"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507761137, "creation_date": 1507760851, "question_id": 46698519, "link": "https://stackoverflow.com/questions/46698519/scipy-optimize-view-steps-during-procedure", "title": "scipy optimize - View steps during procedure", "body": "<p>I am using the <code>minimize</code> function from <code>scipy.optimize</code> library. \nIs there a way to print some values <strong>during</strong> the optimization procedure? Values like the current x, objective function value, number of iterations and number of gradient evaluations.</p>\n\n<p>I know there are options to save these values and return them <strong>after</strong> the optimization is over. But can I see them at each step?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 369, "user_id": 4188557, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/YtroC.jpg?s=128&g=1", "display_name": "Preetesh Gaitonde", "link": "https://stackoverflow.com/users/4188557/preetesh-gaitonde"}, "edited": false, "score": 1, "creation_date": 1507769282, "post_id": 46699201, "comment_id": 80346728, "body": "Made slight edit to your answer as col_2 and col_3 both needed to be unique values. Please review. Thanks!"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 369, "user_id": 4188557, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/YtroC.jpg?s=128&g=1", "display_name": "Preetesh Gaitonde", "link": "https://stackoverflow.com/users/4188557/preetesh-gaitonde"}, "edited": false, "score": 0, "creation_date": 1507770943, "post_id": 46699201, "comment_id": 80347090, "body": "@Rooney, you got it.  Just modifed the output to match your solution."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 1, "last_activity_date": 1507770920, "last_edit_date": 1507770920, "creation_date": 1507765504, "answer_id": 46699201, "question_id": 46698514, "link": "https://stackoverflow.com/questions/46698514/combining-rows-in-pandas-dataframe-by-comparing-multiple-columns/46699201#46699201", "title": "Combining rows in pandas DataFrame by comparing multiple columns", "body": "<p>If the previous <a href=\"https://stackoverflow.com/a/46695138/6361531\">solution worked</a>, then let's try this one:</p>\n\n<pre><code>l = lambda x: ' , '.join(x.unique())\n\ndf = df.apply(lambda x: x.str.strip()).replace('',np.nan)\n\nprint(df.groupby(df.col_1.ffill())\\\n  .agg({'col_2': l,'col_3': l, 'col_4':'first'})\\\n  .reset_index())\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>       col_1                                              col_2  \\\n0  Non-Saved  www.google.com , www.facebook.com , www.linked...   \n1      Saved                      www.Quora.com , www.gmail.com   \n\n                col_3   col_4  \n0  POST , GET , OTHER  20,567  \n1          POST , GET   6,337  \n</code></pre>\n"}], "owner": {"reputation": 369, "user_id": 4188557, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/YtroC.jpg?s=128&g=1", "display_name": "Preetesh Gaitonde", "link": "https://stackoverflow.com/users/4188557/preetesh-gaitonde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 46699201, "answer_count": 1, "score": 1, "last_activity_date": 1507770920, "creation_date": 1507760810, "question_id": 46698514, "link": "https://stackoverflow.com/questions/46698514/combining-rows-in-pandas-dataframe-by-comparing-multiple-columns", "title": "Combining rows in pandas DataFrame by comparing multiple columns", "body": "<p>How can I achieve the expected result from the following DataFrame</p>\n\n<pre><code> df\n            col_1             col_2    col_3     col_4  \n     0  Non-Saved    www.google.com     POST    20,567\n     1               www.google.com     POST\n     2             www.facebook.com      GET   \n     3             www.facebook.com    OTHER\n     4             www.linkedin.com      GET\n     5      Saved     www.Quora.com     POST     6,337\n     6                www.gmail.com     POST \n     7                www.gmail.com      GET\n</code></pre>\n\n<p>Expected result:</p>\n\n<pre><code>            col_1             col_2    col_3     col_4  \n     0  Non-Saved    www.google.com     POST    20,567\n                   www.facebook.com      GET   \n                   www.linkedin.com    OTHER\n     1      Saved     www.Quora.com     POST     6,337\n                      www.gmail.com      GET\n</code></pre>\n\n<p>from 8 rows to 2 rows by merging the empty strings in col_1 and col_3. Also, concatenating distinct values in col_2 and col_3 into one cell. Can anyone help me with an user-defined function to do this?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 1, "creation_date": 1507760939, "post_id": 46698469, "comment_id": 80344643, "body": "Try to break the problem down. You&#39;re given a big string, which contains both names and grades. How can you separate those pieces out? (Hint: Look at the format of your input strings!)"}, {"owner": {"reputation": 29, "user_id": 8761867, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/860aeb80b6d7d11c3262576202d8859f?s=128&d=identicon&r=PG&f=1", "display_name": "Rir8", "link": "https://stackoverflow.com/users/8761867/rir8"}, "reply_to_user": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1507762365, "post_id": 46698469, "comment_id": 80345049, "body": "Thanks for the tip! Each person&#39;s name with their grade is an individual string so I&#39;ll see if I can somehow split up each of those strings then maybe convert numbers into int from there."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1507764671, "post_id": 46698469, "comment_id": 80345620, "body": "For fun (and to remind you how easy we have it in Python...) I <a href=\"https://gist.github.com/NotTheEconomist/6e129c9f015d39100ccaa4079f140f64\" rel=\"nofollow noreferrer\">implemented this in Haskell</a>. To be fair, I did re-implement <code>splitOn</code> and <code>strip</code> that exist in the <code>Data.Text</code> package. I intended to have no imports, but found that defining <code>Data.Char(isSpace)</code> was...tedious."}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 8761867, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/860aeb80b6d7d11c3262576202d8859f?s=128&d=identicon&r=PG&f=1", "display_name": "Rir8", "link": "https://stackoverflow.com/users/8761867/rir8"}, "edited": false, "score": 0, "creation_date": 1507762439, "post_id": 46698547, "comment_id": 80345075, "body": "Thank you very much for the code and for adding the # comments about what each line does so I know whats going on. I&#39;ll try this one out!"}, {"owner": {"reputation": 29, "user_id": 8761867, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/860aeb80b6d7d11c3262576202d8859f?s=128&d=identicon&r=PG&f=1", "display_name": "Rir8", "link": "https://stackoverflow.com/users/8761867/rir8"}, "edited": false, "score": 0, "creation_date": 1507762928, "post_id": 46698547, "comment_id": 80345215, "body": "Thank you again for the code! Just two questions about it, when you write element.split(&#39;,&#39;) why is it splitting at commas between strings and not at commas in the string? Would it even  be possible to split at commas in the string because strings are immutable? Secondly, when you use the word &#39;element&#39; could any other word have been used? To test this I put elxment instead of element and it still worked does this mean element could be any word? If it could be any word what exactly does it mean/do? Other than that I understand the rest thanks!"}, {"owner": {"reputation": 1678, "user_id": 6895491, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157453976390237/picture?type=large", "display_name": "Brenden Petersen", "link": "https://stackoverflow.com/users/6895491/brenden-petersen"}, "reply_to_user": {"reputation": 29, "user_id": 8761867, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/860aeb80b6d7d11c3262576202d8859f?s=128&d=identicon&r=PG&f=1", "display_name": "Rir8", "link": "https://stackoverflow.com/users/8761867/rir8"}, "edited": false, "score": 0, "creation_date": 1507763139, "post_id": 46698547, "comment_id": 80345267, "body": "It is splitting at commas in the string. <code>element</code> is one element of the original list, e.g. <code>&#39;Joe, 60, 90, 80&#39;</code>. <code>element.split(&#39;,&#39;)</code> returns a list of strings, but they include whitespace, hence the additional <code>strip</code> command. I separated the <code>split</code> and <code>strip</code> into two lines to make it clearer."}], "tags": [], "owner": {"reputation": 1678, "user_id": 6895491, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157453976390237/picture?type=large", "display_name": "Brenden Petersen", "link": "https://stackoverflow.com/users/6895491/brenden-petersen"}, "is_accepted": false, "score": 0, "last_activity_date": 1507763211, "last_edit_date": 1507763211, "creation_date": 1507761094, "answer_id": 46698547, "question_id": 46698469, "link": "https://stackoverflow.com/questions/46698469/turning-a-list-with-only-strings-into-sublists-with-strings-and-floats-in-python/46698547#46698547", "title": "Turning a list with only strings into sublists with strings and floats in python", "body": "<pre><code>def string_list(L):\n    final_list = []\n    for element in L:\n        new_entry = element.split(',') # Split on commas; returns a list of strings\n        new_entry = [x.strip() for x in new_entry] # Remove whitespace from each string in list\n        new_entry[1:] = [float(x) for x in new_entry[1:]] # Cast all entries but the first to float\n        final_list.append(new_entry)\n    return final_list\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 8761867, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/860aeb80b6d7d11c3262576202d8859f?s=128&d=identicon&r=PG&f=1", "display_name": "Rir8", "link": "https://stackoverflow.com/users/8761867/rir8"}, "edited": false, "score": 0, "creation_date": 1507772936, "post_id": 46698945, "comment_id": 80347552, "body": "Thank you very much for the code and the excellent breakdown!"}, {"owner": {"reputation": 2662, "user_id": 3396860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/defKI.jpg?s=128&g=1", "display_name": "Stefan Collier", "link": "https://stackoverflow.com/users/3396860/stefan-collier"}, "reply_to_user": {"reputation": 29, "user_id": 8761867, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/860aeb80b6d7d11c3262576202d8859f?s=128&d=identicon&r=PG&f=1", "display_name": "Rir8", "link": "https://stackoverflow.com/users/8761867/rir8"}, "edited": false, "score": 1, "creation_date": 1507802561, "post_id": 46698945, "comment_id": 80360065, "body": "Thanks! The breakdown is actually reverse of the way I made it, so I thought I would show my working. Just a quick side note, one liners are awesome but not super sustainable in long term(timewise) code. For production code, you would really want to make sure the performance boost outways the complexity (to debug them)."}], "tags": [], "owner": {"reputation": 2662, "user_id": 3396860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/defKI.jpg?s=128&g=1", "display_name": "Stefan Collier", "link": "https://stackoverflow.com/users/3396860/stefan-collier"}, "is_accepted": false, "score": 0, "last_activity_date": 1507763766, "last_edit_date": 1592644375, "creation_date": 1507763766, "answer_id": 46698945, "question_id": 46698469, "link": "https://stackoverflow.com/questions/46698469/turning-a-list-with-only-strings-into-sublists-with-strings-and-floats-in-python/46698945#46698945", "title": "Turning a list with only strings into sublists with strings and floats in python", "body": "<h1>Solution</h1>\n<p>Got to love the magic oneliner list comprehension!</p>\n<pre><code>[[float(val) if val.strip().isdigit() else val.strip() for val in person.split(',')] for person in L]\n</code></pre>\n<p><em>The same list comprehension but for narrow screens:</em></p>\n<pre><code> [[float(val) if val.strip().isdigit() else val.strip() \n      for val in person.split(',')]  \n      for person in L ]\n</code></pre>\n<h1>Usage</h1>\n<p>Which you could slap into your function like so:</p>\n<pre><code>def string_list(L):\n    return [[float(val) if val.strip().isdigit() else val.strip() for val in person.split(',')] for person in L]\n</code></pre>\n<p>And use it like so:</p>\n<pre><code>&gt;&gt;&gt; L = [&quot;Joe, 60, 90, 80&quot;, &quot;Harry, 60, 70&quot;, &quot;Jill, 98.5, 100, 95.5, 98&quot;]\n&gt;&gt;&gt; string_list(L)\n[['Joe', 60.0, 90.0, 80.0],\n ['Harry', 60.0, 70.0],\n ['Jill', '98.5', 100.0, '95.5', 98.0]]\n</code></pre>\n<hr />\n<h1>Breakdown</h1>\n<p>List comprehensions are awesome but ugly! So let's decompose this behemoth into its corresponding parts:</p>\n<pre><code>for person in L]\n</code></pre>\n<p>For each item (e.g. <code>&quot;Joe, 60, 90, 80&quot;</code>) in our list</p>\n<pre><code>for val in person.split(',')\n</code></pre>\n<p>If we split each of those strings into a list of strings such that\n<code>&quot;Joe, 60, 90, 80&quot;</code>-&gt; <code>[&quot;Joe&quot;,&quot;60&quot;,&quot;90&quot;,&quot;80&quot;]</code> and store iterate over each of those elements (<code>&quot;Joe&quot;</code> or <code>&quot;60&quot;</code> and so on) storing each of those values as <code>val</code></p>\n<pre><code>float(val) if val.strip().isdigit() else val.strip()\n</code></pre>\n<p>If <code>val</code> only consists of digit characters (<code>.isdigit()</code>), then convert it to a float. Otherwise, return the string (without white-space characters like space via <code>.strip()</code>)</p>\n<pre><code>[[&lt;code&gt; for val in person.&lt;more&gt;] for person in L] \n</code></pre>\n<p>The inner brackets group the elements of the person, without them you only get a single list of strings.</p>\n<blockquote>\n<p>If you wanted a single list you would need to reorder the <code>for &lt;thing&gt; in &lt;list&gt;</code>'s like so:</p>\n<pre><code> [float(val) if val.strip().isdigit() else val.strip() \n     for person in L\n     for val in person.split(',') ]\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 29, "user_id": 8761867, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/860aeb80b6d7d11c3262576202d8859f?s=128&d=identicon&r=PG&f=1", "display_name": "Rir8", "link": "https://stackoverflow.com/users/8761867/rir8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 718, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1507763766, "creation_date": 1507760549, "last_edit_date": 1507761001, "question_id": 46698469, "link": "https://stackoverflow.com/questions/46698469/turning-a-list-with-only-strings-into-sublists-with-strings-and-floats-in-python", "title": "Turning a list with only strings into sublists with strings and floats in python", "body": "<p>I am really struggling with making a python code. Any help would be very much appreciated. The function I need to write a code for is below. Since the numbers are strings in the input, I know I can't somehow separate by name of the student, I think I must somehow convert the numbers into int/float and then somehow separate the list into sublists by name (ie. by string) but I don't know how to accomplish this. I know I can use map(int, ) to turn something into int but it doesn't seem to be working and the number of grades (ie. str i need to turn into float) can be different with any input</p>\n\n<p>Thanks!</p>\n\n<p>Code:</p>\n\n<pre><code>def string_list(L):\n\n    '''(list of str) -&gt; list of list\n    Given a list of strings where each string has the format:\n    'name, grade, grade, grade, ...' return a new list of \n    lists where each inner list has the format :\n    [name (str), grade, grade, grade, ...] where the name \n    is a string and the grades are floats.\n    &gt;&gt;&gt; string_list(['Joe, 60, 90, 80', 'Harry, 60, 70', 'Jill, 98.5, 100, 95.5, 98'])\n    [['Joe', 60.0, 90.0, 80.0], ['Harry', 60.0, 70.0], ['Jill', 98.5, 100.0, 95.5, 98.0]]\n    '''\n</code></pre>\n"}, {"tags": ["python", "dictionary", "for-loop", "iteration", "openpyxl"], "comments": [{"owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "edited": false, "score": 0, "creation_date": 1507805579, "post_id": 46698459, "comment_id": 80361924, "body": "<code>komorka = &quot;{}{}&quot;.format(kolumna, wiersz)</code> is unnecessary openpyxl provides a programmatic interface for accessing cells. Please read the introduction in the <b>official</b> documentation more carefully."}], "answers": [{"tags": [], "owner": {"reputation": 629, "user_id": 4049036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hzumh.jpg?s=128&g=1", "display_name": "blueenvelope", "link": "https://stackoverflow.com/users/4049036/blueenvelope"}, "is_accepted": true, "score": 0, "last_activity_date": 1507765596, "creation_date": 1507765596, "answer_id": 46699213, "question_id": 46698459, "link": "https://stackoverflow.com/questions/46698459/iteration-loop-through-nested-dictionary-stoping-at-second/46699213#46699213", "title": "Iteration loop through nested dictionary - stoping at second", "body": "<pre><code>materialproduction[key1][key2] = value \n</code></pre>\n\n<p>Will attempt to look up the value of materialproduction[key1] and then add the key2-value pair to that result.  However '2' is not a key that exists in materialproduction. So you will get a KeyError on that look up.</p>\n\n<p>What you need to do is add a dictionary for each licznik key.  For example add the following before materialproduction[licznik][liczkolumny] = wartosckomorki:</p>\n\n<pre><code>if liczkolumny == 1:\n    materialproduction[licznik] = {}\n</code></pre>\n\n<p>A cleaner way to do this is to use a defaultdict:</p>\n\n<pre><code>from collections import defaultdict\n\nmaterialproduction = defaultdict(dict)\n</code></pre>\n\n<p>If a key does not exist, instead of erroring a dictionary will be used as the result, which is what you are after.</p>\n"}], "owner": {"reputation": 75, "user_id": 8748731, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-tk0373JNZsY/AAAAAAAAAAI/AAAAAAAAATg/0OUCv-yTawg/photo.jpg?sz=128", "display_name": "Kris", "link": "https://stackoverflow.com/users/8748731/kris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 46699213, "answer_count": 1, "score": 0, "last_activity_date": 1507765596, "creation_date": 1507760516, "question_id": 46698459, "link": "https://stackoverflow.com/questions/46698459/iteration-loop-through-nested-dictionary-stoping-at-second", "title": "Iteration loop through nested dictionary - stoping at second", "body": "<p>I've thought 2nd hour and I don't know why error appears.\nError said that loop cannot find second stage of dictionary.</p>\n\n<pre><code>from openpyxl import load_workbook\nbook = load_workbook('OBS.xlsx')\nzakladkaall = book.get_sheet_by_name('ALL')\n\nlicznik = 1\nliczkolumny = 1\n\nmaterialproduction = {\n    licznik : {liczkolumny : \"\"}\n}\n\nfor wiersz in range(2, zakladkaall.max_row):\n    for kolumna in \"ABCDEFGHI\":\n        komorka = \"{}{}\".format(kolumna, wiersz)\n        wartosckomorki = zakladkaall[komorka].value\n        materialproduction[licznik][liczkolumny] = wartosckomorki\n\n        if liczkolumny &lt; 9:\n            liczkolumny += 1\n            print(licznik)\n            print(liczkolumny)\n        else:\n            liczkolumny = 1\n            licznik += 1\n            print(licznik)\n\nprint(materialproduction[licznik][liczkolumny])\n</code></pre>\n\n<p>Loop should made dictionary like this:\nmaterialproduction[1][1]\n.\n.\n.\nmaterialproduction[1][9]\nmaterialproduction[2][1]\n.\n.\n.\nmaterialproduction[2][9]</p>\n\n<p>etc, but there is problem when \"licznik\" (first stage) has increased number to \"2\"...\nCan you help me?</p>\n"}, {"tags": ["python", "ipython"], "comments": [{"owner": {"reputation": 6861, "user_id": 1594286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1c31013ccab64b0efbc9b18236d80ac1?s=128&d=identicon&r=PG", "display_name": "Shadow", "link": "https://stackoverflow.com/users/1594286/shadow"}, "edited": false, "score": 0, "creation_date": 1507760539, "post_id": 46698450, "comment_id": 80344526, "body": "That&#39;s a warning. Meaning sql magic probably did actually install. Can you please check?"}, {"owner": {"reputation": 1043, "user_id": 4513062, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/756ee9ec86172885e11e64c1bfd8e7cd?s=128&d=identicon&r=PG&f=1", "display_name": "Mookayama", "link": "https://stackoverflow.com/users/4513062/mookayama"}, "reply_to_user": {"reputation": 6861, "user_id": 1594286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1c31013ccab64b0efbc9b18236d80ac1?s=128&d=identicon&r=PG", "display_name": "Shadow", "link": "https://stackoverflow.com/users/1594286/shadow"}, "edited": false, "score": 0, "creation_date": 1507761160, "post_id": 46698450, "comment_id": 80344713, "body": "Its intall but now I got this error: see edit above"}], "answers": [{"tags": [], "owner": {"reputation": 1043, "user_id": 4513062, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/756ee9ec86172885e11e64c1bfd8e7cd?s=128&d=identicon&r=PG&f=1", "display_name": "Mookayama", "link": "https://stackoverflow.com/users/4513062/mookayama"}, "is_accepted": false, "score": 0, "last_activity_date": 1508175929, "creation_date": 1508175929, "answer_id": 46776134, "question_id": 46698450, "link": "https://stackoverflow.com/questions/46698450/python-sql-magic-issue-with-oracle-12-1-0-2-0/46776134#46776134", "title": "python sql magic issue with oracle 12.1.0.2.0", "body": "<p>I cannot get sql magic to work but I find an easier solution.</p>\n\n<p>Just do this</p>\n\n<pre><code>import pandas as pd\nprint(con.version)\nquery = \"\"\"select * from all_tab_columns\"\"\"\ndf_ora = pd.read_sql(query, con=con)\n</code></pre>\n"}], "owner": {"reputation": 1043, "user_id": 4513062, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/756ee9ec86172885e11e64c1bfd8e7cd?s=128&d=identicon&r=PG&f=1", "display_name": "Mookayama", "link": "https://stackoverflow.com/users/4513062/mookayama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1508175929, "creation_date": 1507760484, "last_edit_date": 1507761561, "question_id": 46698450, "link": "https://stackoverflow.com/questions/46698450/python-sql-magic-issue-with-oracle-12-1-0-2-0", "title": "python sql magic issue with oracle 12.1.0.2.0", "body": "<p>I follow the instruction to install sql magic. </p>\n\n<p><a href=\"https://github.com/catherinedevlin/ipython-sql\" rel=\"nofollow noreferrer\">https://github.com/catherinedevlin/ipython-sql</a></p>\n\n<p>I got the following errors</p>\n\n<pre><code>/anaconda/lib/python3.6/site-packages/IPython/config.py:13: ShimWarning: The `IPython.config` package has been deprecated since IPython 4.0. You should import from traitlets.config instead.\n  \"You should import from traitlets.config instead.\", ShimWarning)\n/anaconda/lib/python3.6/site-packages/IPython/utils/traitlets.py:5: UserWarning: IPython.utils.traitlets has moved to a top-level traitlets package.\n  warn(\"IPython.utils.traitlets has moved to a top-level traitlets package.\")\n</code></pre>\n\n<p>It looks like its just warning so I move forward to  try to connect to the Oracle DB The version is 12.1.0.2.0 </p>\n\n<p>but still error out...</p>\n\n<p>The end of the error stack:</p>\n\n<pre><code>/anaconda/lib/python3.6/site-packages/sqlalchemy/dialects/oracle/cx_oracle.py in &lt;listcomp&gt;(.0)\n    707 \n    708         if hasattr(self.dbapi, 'version'):\n--&gt; 709             self.cx_oracle_ver = tuple([int(x) for x in\n    710                                         self.dbapi.version.split('.')])\n    711         else:\n\nValueError: invalid literal for int() with base 10: '0b2'\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "pyspark"], "answers": [{"tags": [], "owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "is_accepted": false, "score": 2, "last_activity_date": 1507763954, "last_edit_date": 1507763954, "creation_date": 1507762641, "answer_id": 46698783, "question_id": 46698437, "link": "https://stackoverflow.com/questions/46698437/parallelization-in-counting-spark-dataframe-groups-in-pyspark/46698783#46698783", "title": "Parallelization in counting Spark dataframe groups in pyspark", "body": "<p><strong>TL;DR</strong> There is <em>probably</em> nothing wrong with your deployment.</p>\n\n<blockquote>\n  <p>I had expected to see 21 processes running </p>\n</blockquote>\n\n<p>Unless you specifically configured Spark to use a single core per executor JVM, there is no reason for this to happen. Unlike <code>RDD</code> example you've mentioned in the question, <code>DataFrame</code> API doesn't use Python workers at all, with exception to Python <code>UserDefinedFunctions</code>.</p>\n\n<p>At the same time, JVM executors use threading instead of full-fledged system processes (PySpark uses the later one to avoid <a href=\"https://wiki.python.org/moin/GlobalInterpreterLock\" rel=\"nofollow noreferrer\">GIL</a>). Furthermore default <code>spark.executor.cores</code> in standalone mode is equal to the number of <a href=\"https://spark.apache.org/docs/latest/configuration.html\" rel=\"nofollow noreferrer\"><em>the available cores on the worker</em></a>. So without additional configuration you should see two executor JVMs, each using 21 data processing threads.</p>\n\n<p>Overall you should check Spark UI, if you see tasks assigned to the executors, all should be fine.</p>\n"}], "owner": {"reputation": 157, "user_id": 1472433, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/51c131799239c3f350c5f17a256fbd5a?s=128&d=identicon&r=PG", "display_name": "xbot", "link": "https://stackoverflow.com/users/1472433/xbot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1480, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1507763954, "creation_date": 1507760380, "last_edit_date": 1507762804, "question_id": 46698437, "link": "https://stackoverflow.com/questions/46698437/parallelization-in-counting-spark-dataframe-groups-in-pyspark", "title": "Parallelization in counting Spark dataframe groups in pyspark", "body": "<p>I have approximately 200 files in a single directory on a Linux machine named <code>part-0001</code>, <code>part-0002</code>, and so on. Each has approximately one million rows with the same columns (call them 'a', 'b', and so on). Let the pair 'a','b' be the key for each row (with many duplicates). </p>\n\n<p>At the same time, I have set up a Spark 2.2.0 cluster with a master and two slaves with a total of 42 cores available. The address is <code>spark://XXX.YYY.com:7077</code>. </p>\n\n<p>I then use PySpark to connect to the cluster and compute the counts across the 200 files for each unique pair as follows.</p>\n\n<pre><code>from pyspark import SparkContext\nfrom pyspark.sql import SQLContext\nimport pandas as pd\n\nsc = SparkContext(\"spark://XXX.YYY.com:7077\")\nsqlContext = SQLContext(sc)\n\ndata_path = \"/location/to/my/data/part-*\"\nsparkdf = sqlContext.read.csv(path=data_path, header=True)\ndfgrouped = sparkdf.groupBy(['a','b'])\ncounts_by_group = dfgrouped.count()\n</code></pre>\n\n<p>This works in that I can see Spark progressing through a series of messages and it does indeed return results that look plausible. </p>\n\n<p><strong>Problem</strong>: While this calculation is being performed top does not show any evidence that the slave cores are doing anything. There doesn't appear to be any parallelization. Each slave has a single related Java process that was there before the job (plus processes from other users and background system processes). So it appears that the master is doing all the work. Given that there are 200 odd files, I had expected to see 21 processes running on each slave machine until things wound down (this <em>is</em> what I see when I explicitly invoke <code>parallelize</code> as follows <code>count = sc.parallelize(c=range(1, niters + 1), numSlices=ncores).map(f).reduce(add)</code> in a separate implementation).</p>\n\n<p><strong>Questions</strong>: How do I ensure that Spark is actually parallelizing the count? I would like each core to grab one or more files, perform the count for the pairs it sees in the file, and then have the individual results reduced into a single <code>DataFrame</code>. Shouldn't I see this in top? Do I need to explicitly invoke parallelization?</p>\n\n<p>(FWIW, I have seen example using partitioning, but my understanding is that this is used to distribute processing on chunks of a <em>single</em> file. My case is that I have many files.)</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "html", "file", "hash", "md5"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8761786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64707cb275255f6043e0be4e3ec2cb56?s=128&d=identicon&r=PG&f=1", "display_name": "Neil Boyd", "link": "https://stackoverflow.com/users/8761786/neil-boyd"}, "edited": false, "score": 0, "creation_date": 1507803853, "post_id": 46698683, "comment_id": 80360873, "body": "I see what you mean with the assembly addresses, was working on this at like 1am and just flew over my head. However the hashes still differ in value after changing . I am going to look more into it and I will report back if I fix it."}], "tags": [], "owner": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "is_accepted": false, "score": 1, "last_activity_date": 1507762316, "last_edit_date": 1507762316, "creation_date": 1507761974, "answer_id": 46698683, "question_id": 46698419, "link": "https://stackoverflow.com/questions/46698419/python-md5-hashing-same-content-returns-different-hash/46698683#46698683", "title": "Python MD5 hashing same content returns different hash", "body": "<p>The screenshot you have attached is showing the location of the two hash objects <code>fileHash</code> and <code>webHash</code>. They should be in different locations.</p>\n\n<p>What you really want to compare is the <code>hexdigest()</code> of the two hash objects. Change your <code>if</code> statement to:</p>\n\n<pre><code>if FileHash.hexdigest() == WebHash.hexdigest():\n        print (\"[*] Jobs being read from file!\")\n        num_of_jobs(fileCont)\n</code></pre>\n\n<p>Take a look at this <a href=\"https://stackoverflow.com/questions/5297448/how-to-get-md5-sum-of-a-string\">other StackOverflow answer</a> for some more how-to.</p>\n"}], "owner": {"reputation": 1, "user_id": 8761786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64707cb275255f6043e0be4e3ec2cb56?s=128&d=identicon&r=PG&f=1", "display_name": "Neil Boyd", "link": "https://stackoverflow.com/users/8761786/neil-boyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 741, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1507762316, "creation_date": 1507760262, "last_edit_date": 1507760639, "question_id": 46698419, "link": "https://stackoverflow.com/questions/46698419/python-md5-hashing-same-content-returns-different-hash", "title": "Python MD5 hashing same content returns different hash", "body": "<p>I am writing a python program, because I am lazy, that checks a website for a job opening I have been told about and returns all the jobs the companies web page. </p>\n\n<p>Here is my code so far (yes I know the code is jancky however I am just trying to get it working)</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nimport sys\nimport os\nimport hashlib\n\nreload(sys)\nsys.setdefaultencoding('utf8')\n\nres = requests.get('WEBSITE URL', verify=False)\nres.raise_for_status()\n\nfilename = \"JobWebsite.txt\"\n\ndef StartUp():\n    if not os.path.isfile(filename):\n        try:\n            jobfile = open(filename, 'a')\n            jobfile = open(filename, 'r+')\n            print(\"[*] Succesfully Created output file\")\n            return jobfile\n        except:\n            print(\"[*] Error creating output file!\")\n            sys.exit(0)\n    else:\n         try:\n             jobfile = open(filename, 'r+')\n             print(\"[*] Succesfully Opened output file\")\n             return jobfile\n         except:\n             print(\"[*] Error opening output file!\")\n             sys.exit(0)\n\n def AnyChange(htmlFile):\n    fileCont = htmlFile.read()\n    FileHash = hasher(fileCont, \"File Code Hashed\")\n    WebHash = hasher(res.text, \"Webpage Code Hashed\")\n    !!!!! Here is the Problem\n    print (\"[*] File hash is \" + str(FileHash))\n    print (\"[*] Website hash is \" + str(WebHash))\n    if FileHash == WebHash:\n        print (\"[*] Jobs being read from file!\")\n        num_of_jobs(fileCont)\n    else:\n        print(\"[*] Jobs being read from website!\")\n        num_of_jobs(res.text)\n        deleteContent(htmlFile)\n        writeWebContent(htmlFile, res.text)\n\ndef hasher(content, message):\n    content = hashlib.md5(content.encode('utf-8'))\n    return content\n\ndef num_of_jobs(htmlFile):\n    content = BeautifulSoup(htmlFile, \"html.parser\")\n    elems = content.select('.search-result-inner')\n    print(\"[*] There are \" + str(len(elems)) + \" jobs available!\")\n\ndef deleteContent(htmlFile):\n    print(\"[*] Deleting Contents of local file! \")\n    htmlFile.seek(0)\n    htmlFile.truncate()\n\ndef writeWebContent(htmlFile, content):\n    htmlFile = open(filename, 'r+')\n    print(\"[*] Writing Contents of website to file! \")\n    htmlFile.write(content.encode('utf-8'))\n\njobfile = StartUp()\nAnyChange(jobfile)\n</code></pre>\n\n<p>The problem I currently have is that I hash both of the websites html code and the files html code. However both of the hashes don't match, like ever, I am not sure and can only guess that it might be something with the contents being save in a file. The hashes aren't too far apart but it still causes the If statement to fail each time</p>\n\n<p><a href=\"https://i.stack.imgur.com/DAPbZ.png\" rel=\"nofollow noreferrer\">Breakpoint in Program with hashes</a></p>\n"}, {"tags": ["python", "pandas", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 2, "last_activity_date": 1507760570, "creation_date": 1507760570, "answer_id": 46698472, "question_id": 46698406, "link": "https://stackoverflow.com/questions/46698406/calculating-months-with-pandas-and-numpy/46698472#46698472", "title": "Calculating months with pandas and numpy", "body": "<p>IIUC:</p>\n\n<pre><code>In [117]: df[\"EndDate\"].dt.to_period('M') - df[\"StartDate\"].dt.to_period('M')\nOut[117]:\n0    12\n1     2\n2    12\n3    11\n4     1\ndtype: object\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1043, "user_id": 6035703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3252ceecff3c6283bca24f59e72eca21?s=128&d=identicon&r=PG&f=1", "display_name": "0TTT0", "link": "https://stackoverflow.com/users/6035703/0ttt0"}, "is_accepted": false, "score": 1, "last_activity_date": 1507760908, "creation_date": 1507760908, "answer_id": 46698526, "question_id": 46698406, "link": "https://stackoverflow.com/questions/46698406/calculating-months-with-pandas-and-numpy/46698526#46698526", "title": "Calculating months with pandas and numpy", "body": "<p>Going from the 19th of June to the 18th of June is going to get you just under 12 months which is why the ceiling is 12.  </p>\n\n<p>From June to June is 12 months not 13...  It's a full year.\nYour expected months should be 12 for indices 0 and 3. </p>\n\n<p>Here's some corrected code.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\ndf = pd.DataFrame({\n    'StartDate' : ['2017-06-19', '2017-10-01', '2017-09-29', '2017-08-01', '2017-08-01'],\n    'EndDate'   : ['2018-06-18', '2017-12-31', '2018-09-30', '2018-07-31', '2017-09-30'],\n    'ExpectedMonths'    : [12, 3, 12, 12, 2]\n})\n\ndf['StartDate'] = pd.to_datetime(df['StartDate'], format='%Y-%m-%d')\ndf['EndDate'] = pd.to_datetime(df['EndDate'], format='%Y-%m-%d')\ndf['calculatedMonths'] = (df[\"EndDate\"] - df[\"StartDate\"]) / np.timedelta64(1, 'M')\ndf['roundedMonths'] = round(df['calculatedMonths'])\n\nprint(df)\n</code></pre>\n"}], "owner": {"reputation": 497, "user_id": 2480769, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/e18498c1a173797a970ab5cf1770df4b?s=128&d=identicon&r=PG", "display_name": "mnickey", "link": "https://stackoverflow.com/users/2480769/mnickey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1507760908, "creation_date": 1507760203, "question_id": 46698406, "link": "https://stackoverflow.com/questions/46698406/calculating-months-with-pandas-and-numpy", "title": "Calculating months with pandas and numpy", "body": "<p>I'm having trouble calculating the months properly. What I have so far is below as well as the output.\nWhile most of the months calculate properly, some do not. I need to figure this out as it's bugging me.\nAny ideas are greatly appreciated.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\ndf = pd.DataFrame({\n    'StartDate' : ['2017-06-19', '2017-10-01', '2017-09-29', '2017-08-01', '2017-08-01'],\n    'EndDate'   : ['2018-06-18', '2017-12-31', '2018-09-30', '2018-07-31', '2017-09-30'],\n    'ExpectedMonths'    : [13, 3, 13, 12, 2]\n})\n\ndf['StartDate'] = pd.to_datetime(df['StartDate'], format='%Y-%m-%d')\ndf['EndDate'] = pd.to_datetime(df['EndDate'], format='%Y-%m-%d')\ndf['calculatedMonths'] = (df[\"EndDate\"] - df[\"StartDate\"]) / np.timedelta64(1, 'M')\ndf['ceilMonths'] = df['calculatedMonths'].apply(np.ceil)\n</code></pre>\n\n<p>Output so far:\nAs you can see, the first row should be 13 but I am seeing 12 in the results. June to May should be 12 and add another month (June) that should be 13.</p>\n\n<pre><code>        EndDate     ExpectedMonths      StartDate   calculatedMonths    ceilMonths  \n0       2018-06-18  13                  2017-06-19  11.959178           12.0\n1       2017-12-31  3                   2017-10-01  2.989794            3.0\n2       2018-09-30  13                  2017-09-29  12.024888           13.0\n3       2018-07-31  12                  2017-08-01  11.959178           12.0\n4       2017-09-30  2                   2017-08-01  1.971293            2.0\n</code></pre>\n\n<p>What do I need to adjust in order to get the expected output and the calculated months to match?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 0, "last_activity_date": 1507759955, "creation_date": 1507759955, "answer_id": 46698361, "question_id": 46698313, "link": "https://stackoverflow.com/questions/46698313/shift-values-based-on-condition-in-a-column/46698361#46698361", "title": "Shift values based on condition in a column", "body": "<pre><code>In [102]: df.loc[df.F.notnull(), list('ABCDE')] = \\\n              df.loc[df.F.notnull(), list('FGHIJ')].values\n\nIn [103]: df\nOut[103]:\n      A     B  C   D   E     F     G    H    I     J\n0   1.0  11.0  a  XX  50   NaN   NaN  NaN  NaN   NaN\n1   2.0  12.0  b  YY  10   NaN   1.0  NaN  NaN   NaN\n2   1.0  11.0  c  ZZ  70   NaN   NaN   11   12  56.0\n3   6.0  10.0  c  DD  45   6.0  10.0    c   DD  45.0\n4   1.0   7.0  d  LL  64   1.0   7.0    d   LL  64.0\n5  89.0   NaN  f  KK  13  89.0   NaN    f   KK  13.0\n</code></pre>\n"}], "owner": {"reputation": 231, "user_id": 7621018, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/1767736509918821/picture?type=large", "display_name": "Venkatesh Malhotra", "link": "https://stackoverflow.com/users/7621018/venkatesh-malhotra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "accepted_answer_id": 46698361, "answer_count": 1, "score": 0, "last_activity_date": 1507759955, "creation_date": 1507759726, "question_id": 46698313, "link": "https://stackoverflow.com/questions/46698313/shift-values-based-on-condition-in-a-column", "title": "Shift values based on condition in a column", "body": "<p>I have following dataframe <code>df1</code>:</p>\n\n<pre><code>      A     B    C    D    E    F    G    H    I    J\n  0   1    11    a    XX   50   Nan  Nan  Nan  Nan  Nan\n  1   2    12    b    YY   10   Nan  1    Nan  Nan  Nan\n  2   1    11    c    ZZ   70   Nan  Nan  11   12   56\n  3   Nan  Nan   Nan  Nan  0    6    10   c    DD   45\n  4   3     7    e    MM   12   1    7    d    LL   64\n  5   Nan  Nan   Nan  Nan  2    89   Nan  f    KK   13\n</code></pre>\n\n<p>I would like to built a resulting dataframe <code>df2</code> in such a way that if a value is present in any row for attribute <code>F</code> (any value but not \"Nan\"), then copy the values of <code>F</code>, <code>G</code>, <code>H</code>, <code>I</code>, <code>J</code> for that particular row and paste them in <code>A</code>, <code>B</code>, <code>C</code>, <code>D</code> and <code>E</code> respectively. Hence values of last three rows should be copied.</p>\n\n<p>The resulting dataframe <code>df2</code> should be some thing like this:</p>\n\n<pre><code>       A     B    C    D    E    F    G    H    I    J   \n   0   1    11    a    XX   50   Nan  Nan  Nan  Nan  Nan\n   1   2    12    b    YY   10   Nan  1    Nan  Nan  Nan\n   2   1    11    c    ZZ   70   Nan  Nan   11   12   56\n   3   6    10    c    DD   45    6    10   c    DD   45\n   4   1     7    d    LL   64    1    7    d    LL   64\n   5   89   Nan   f    KK   13    89   Nan  f    KK   13\n</code></pre>\n\n<p>Any help would be surely appreciated.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3095495"}, "edited": false, "score": 0, "creation_date": 1507760030, "post_id": 46698363, "comment_id": 80344371, "body": "&#39;I wish to merge all the columns into just 1 column, where all the numbers are totalled up&#39; - e.g. in this case, if we used the picture above, the outcome would be 78"}, {"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1507760236, "post_id": 46698363, "comment_id": 80344427, "body": "If you have a problem with my answer, you&#39;re going to have to be more explicit what it is."}], "tags": [], "owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "is_accepted": false, "score": 0, "last_activity_date": 1507761718, "last_edit_date": 1507761718, "creation_date": 1507759973, "answer_id": 46698363, "question_id": 46698272, "link": "https://stackoverflow.com/questions/46698272/pandas-how-to-merge-columns-into-1-where-all-the-values-are-added-together/46698363#46698363", "title": "Pandas, how to merge columns into 1 where all the values are added together", "body": "<p>df['year'] = df.sum(axis=1)</p>\n\n<p>For your second question, you state what the situation is, but you don't state what your desired outcome is.</p>\n\n<p>edit: I assume that the \"y\" is constant. For the second row, if you just want one row, you can do df.loc[1].sum(). If you want that in a dataframe, you can do new_df = pd.DataFrame([['y'],[df.loc[1].sum()]]). If you want more than one row, you can do new_df = pd.DataFrame([['y']+[[df.loc[row].sum()] for row in range(1,df.shape[0]]])</p>\n"}, {"tags": [], "owner": {"reputation": 675, "user_id": 4922735, "user_type": "registered", "profile_image": "https://graph.facebook.com/10103910304944377/picture?type=large", "display_name": "Seiji Armstrong", "link": "https://stackoverflow.com/users/4922735/seiji-armstrong"}, "is_accepted": false, "score": 0, "last_activity_date": 1507761288, "creation_date": 1507761288, "answer_id": 46698575, "question_id": 46698272, "link": "https://stackoverflow.com/questions/46698272/pandas-how-to-merge-columns-into-1-where-all-the-values-are-added-together/46698575#46698575", "title": "Pandas, how to merge columns into 1 where all the values are added together", "body": "<p>If you want to sum all elements in a row, you can simply say\n<code>df.iloc[row_num].sum()</code></p>\n"}, {"tags": [], "owner": {"reputation": 1126, "user_id": 5527199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qnkLm.jpg?s=128&g=1", "display_name": "Luke Kot-Zaniewski", "link": "https://stackoverflow.com/users/5527199/luke-kot-zaniewski"}, "is_accepted": false, "score": 0, "last_activity_date": 1507761732, "last_edit_date": 1507761732, "creation_date": 1507761380, "answer_id": 46698592, "question_id": 46698272, "link": "https://stackoverflow.com/questions/46698272/pandas-how-to-merge-columns-into-1-where-all-the-values-are-added-together/46698592#46698592", "title": "Pandas, how to merge columns into 1 where all the values are added together", "body": "<p>Assuming you are reading from a structured file format like csv, you could do something like this. I tried to answer the second part of your initial question as well.</p>\n\n<p><code>skip-rows</code> is a collection so it can obviously hold more than one row marked for skipping.</p>\n\n<pre><code>##ignore the repeating column-header rows by telling pandas which to skip when reading the file\ndf = pandas.read_csv('C:\\\\test.csv', skiprows=[16])\n##create a new dataframe where you aggregate the columns into one value, Y\ndf = pandas.DataFrame(data=df.sum(axis=1), columns=[\"Y\"])\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3095495"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1507761732, "creation_date": 1507759544, "last_edit_date": 1507760578, "question_id": 46698272, "link": "https://stackoverflow.com/questions/46698272/pandas-how-to-merge-columns-into-1-where-all-the-values-are-added-together", "title": "Pandas, how to merge columns into 1 where all the values are added together", "body": "<p><a href=\"https://i.stack.imgur.com/ZnquL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZnquL.png\" alt=\"enter image description here\"></a></p>\n\n<p>If I were to have a dataframe with the information (as shown above in the picture) where..</p>\n\n<p>Row 1 held strings and Row 2 held numerical values</p>\n\n<p>How would I merge all the columns in 1 column?</p>\n\n<p>Using the picture as an example, the desired outcome in this case would be</p>\n\n<p><a href=\"https://i.stack.imgur.com/TaPjp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TaPjp.png\" alt=\"enter image description here\"></a></p>\n\n<p>Where the first row has been merged into single string character and row 2 has had all its values added together to give a result, in this case 78</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1507759526, "post_id": 46698246, "comment_id": 80344224, "body": "Show what you have tried so far."}, {"owner": {"reputation": 49388, "user_id": 6779307, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p7O3q.jpg?s=128&g=1", "display_name": "Patrick Haugh", "link": "https://stackoverflow.com/users/6779307/patrick-haugh"}, "edited": false, "score": 0, "creation_date": 1507759715, "post_id": 46698246, "comment_id": 80344281, "body": "Look at <a href=\"https://docs.python.org/3/library/random.html#random.choices\" rel=\"nofollow noreferrer\"><code>random.choices</code></a> and <a href=\"https://docs.python.org/3/library/itertools.html#itertools.permutations\" rel=\"nofollow noreferrer\"><code>itertools.permutations</code></a>"}, {"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 0, "creation_date": 1507759827, "post_id": 46698246, "comment_id": 80344310, "body": "would this <code>[[1, 2, 3, 4, 5], [1, 2, 3, 5, 4], [1, 2, 4, 3, 5], [1, 2, 4, 5, 3]]</code> be valid result for you?"}, {"owner": {"reputation": 831, "user_id": 8291566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0dp9a.png?s=128&g=1", "display_name": "Mahdi Ghelichi", "link": "https://stackoverflow.com/users/8291566/mahdi-ghelichi"}, "edited": false, "score": 0, "creation_date": 1507761104, "post_id": 46698246, "comment_id": 80344699, "body": "I did not look at itertools. I tried random.choices but the problem was omitting the repeated random samples. There is no guarantee that two randomly generated samples are not the same."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1507760912, "post_id": 46698343, "comment_id": 80344636, "body": "That&#39;s going to generate a lot more permutations than necessary, though. That might not be a big deal with a length-4 list, but it&#39;s completely infeasible for something like length-20."}, {"owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1507761041, "post_id": 46698343, "comment_id": 80344683, "body": "Yes, I was about to comment on your answer... its good to have a more efficient alternative for larger lists. I wonder if this can be solved with numpy."}], "tags": [], "owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "is_accepted": false, "score": 2, "last_activity_date": 1507759881, "creation_date": 1507759881, "answer_id": 46698343, "question_id": 46698246, "link": "https://stackoverflow.com/questions/46698246/generate-unique-and-random-samples-of-a-given-list-in-python-for-a-given-amount/46698343#46698343", "title": "Generate unique and random samples of a given list in Python for a given amount of times?", "body": "<p>As pointed out in <a href=\"https://stackoverflow.com/questions/104420/how-to-generate-all-permutations-of-a-list-in-python\">this</a> post, you can use <code>itertools</code> to generate all possible permutations of the list:</p>\n\n<pre><code>all_perms = list(itertools.permutations(L))\n</code></pre>\n\n<p>then if you only want 4 random choices (without replacement) of all possible permutations, you can do something like:</p>\n\n<pre><code>random.sample(all_perms, k=4)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5285, "user_id": 5495304, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/h7m4z.png?s=128&g=1", "display_name": "Gerges", "link": "https://stackoverflow.com/users/5495304/gerges"}, "edited": false, "score": 0, "creation_date": 1507761782, "post_id": 46698443, "comment_id": 80344887, "body": "Good alternative for larger arrays! One thing to consider though is that <code>math.factorial(len(l))</code> might go out of range due to multiplication by <code>0.3</code> which casts it to <code>float</code>. Doing <code>if n&#47;0.3 &lt; math.factorial(len(l))</code> would solve overflow error for larger lists..."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1507763090, "last_edit_date": 1507763090, "creation_date": 1507760417, "answer_id": 46698443, "question_id": 46698246, "link": "https://stackoverflow.com/questions/46698246/generate-unique-and-random-samples-of-a-given-list-in-python-for-a-given-amount/46698443#46698443", "title": "Generate unique and random samples of a given list in Python for a given amount of times?", "body": "<p>Fairly standard approach: pick random samples and throw away duplicates for a small sample, or partial shuffle if you're generating a sample that covers most of the sample space.</p>\n\n<pre><code>import itertools\nimport math\nimport random\n\ndef n_random_permutations(n, l):\n    if n * 3 &lt; math.factorial(len(l)):\n        # rejection sampling\n        # generate samples and throw them away if we already picked them.\n        samples = set()\n\n        while len(samples) &lt; n:\n            sample = list(l)\n            random.shuffle(sample)\n            samples.add(tuple(sample))\n\n        samples = list(samples)\n        random.shuffle(samples)\n        return samples\n    else:\n        # generate every possible permutation and pick n of them.\n        permutations = list(itertools.permutations(l))\n        return random.sample(permutations, n)\n</code></pre>\n"}], "owner": {"reputation": 831, "user_id": 8291566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0dp9a.png?s=128&g=1", "display_name": "Mahdi Ghelichi", "link": "https://stackoverflow.com/users/8291566/mahdi-ghelichi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 46698443, "answer_count": 2, "score": -1, "last_activity_date": 1507765451, "creation_date": 1507759410, "last_edit_date": 1507765451, "question_id": 46698246, "link": "https://stackoverflow.com/questions/46698246/generate-unique-and-random-samples-of-a-given-list-in-python-for-a-given-amount", "title": "Generate unique and random samples of a given list in Python for a given amount of times?", "body": "<p>Lets say <code>L=[1,2,3,4,5]</code></p>\n\n<p>How can I create 4 (or maximum of <code>len(L)</code>!) unique random orders of L?</p>\n\n<p>Expected result should look like this:</p>\n\n<pre><code>[[2,1,3,4,5],[5,3,2,1,4],[4,3,2,1,5],[5,1,3,2,4]\n</code></pre>\n"}, {"tags": ["python", "html", "parsing", "xpath", "lxml"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1507759391, "post_id": 46698210, "comment_id": 80344176, "body": "The <code>html</code> module doesn&#39;t have a <code>fromstring</code> method. Do you use an external library?"}, {"owner": {"reputation": 364, "user_id": 4792638, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8319c84214fa0e21a0500cafc9e0a387?s=128&d=identicon&r=PG&f=1", "display_name": "User New", "link": "https://stackoverflow.com/users/4792638/user-new"}, "reply_to_user": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1507762891, "post_id": 46698210, "comment_id": 80345209, "body": "@MichaelButscher no, I guess not. The only import I&#39;m using is import lxml.html as html"}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1507768820, "post_id": 46698210, "comment_id": 80346615, "body": "lxml is an external library"}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1507784105, "post_id": 46698210, "comment_id": 80350379, "body": "Posts are dynamic - there are no such content in initial page source, so you cannot scrape it in this way. You need a tool like Selenium to be able to handle content generated by JavaScript"}, {"owner": {"reputation": 364, "user_id": 4792638, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8319c84214fa0e21a0500cafc9e0a387?s=128&d=identicon&r=PG&f=1", "display_name": "User New", "link": "https://stackoverflow.com/users/4792638/user-new"}, "reply_to_user": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1507805302, "post_id": 46698210, "comment_id": 80361747, "body": "@Andersson, to my regret - Selenium is not an option. What do you mean by dynamic? My file saved on the HDD is dynamic? This file opened in browser is xpath parsible. But opened in Python - not (well, it is parsed, but in a different way than in browser). So I need a help how to parse it in Python THE SAME WAY it is parsed in browser. Do you have any ideas? (P.S. The question is about parsing file on the HDD, not a page in the internet.)"}, {"owner": {"reputation": 364, "user_id": 4792638, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8319c84214fa0e21a0500cafc9e0a387?s=128&d=identicon&r=PG&f=1", "display_name": "User New", "link": "https://stackoverflow.com/users/4792638/user-new"}, "reply_to_user": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1507805574, "post_id": 46698210, "comment_id": 80361919, "body": "@MichaelButscher, ok, it is external (I didn&#39;t know it). Does it helps us in any way?"}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1507813660, "post_id": 46698210, "comment_id": 80367295, "body": "@UserNew You should add the tag lxml to your question so people used to this library know that they should look at this question."}, {"owner": {"reputation": 364, "user_id": 4792638, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8319c84214fa0e21a0500cafc9e0a387?s=128&d=identicon&r=PG&f=1", "display_name": "User New", "link": "https://stackoverflow.com/users/4792638/user-new"}, "reply_to_user": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1507830035, "post_id": 46698210, "comment_id": 80377806, "body": "@MichaelButscher, tag added."}, {"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 0, "creation_date": 1507851268, "post_id": 46698210, "comment_id": 80387445, "body": "@UserNew To answer the question you asked Andersson: The HTML page content in memory can be modified by JavaScript code executed in browser so that it doesn&#39;t match the initial code from file anymore (this is meant with &quot;dynamic&quot; here). Try to switch off JavaScript in your browser, open the page again and if your XPath expression works in browser yet, there is a chance that it can work in lxml as well."}], "owner": {"reputation": 364, "user_id": 4792638, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8319c84214fa0e21a0500cafc9e0a387?s=128&d=identicon&r=PG&f=1", "display_name": "User New", "link": "https://stackoverflow.com/users/4792638/user-new"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507829992, "creation_date": 1507759182, "last_edit_date": 1507829992, "question_id": 46698210, "link": "https://stackoverflow.com/questions/46698210/python-html-parsing-xpath-works-in-browser-doesnt-work-in-python", "title": "Python html parsing. (xpath works in browser, doesn&#39;t work in Python)", "body": "<p>I'm trying to scrape a saved facebook page. I need to find posts with xpath (or in other way, but preferably xpath).\nSo I open that saved file in BROWSER:\nand try my xpath expression. It works perfectly.</p>\n\n<p>expression: //div[starts-with(@id,\"mall_post_\")]</p>\n\n<p><a href=\"https://i.stack.imgur.com/Kin8d.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Kin8d.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>but when I do the same in Python (Python3.4 or Python3.6) it finds NOTHING.\nHere is the code:</p>\n\n<pre><code>import lxml.html as html    \nwith open('page03.html', 'rb') as htmlfile:\n    page = htmlfile.read()\n\n    res = html.fromstring(page)\n    print(res)\n\n    posts = res.xpath(u'//div[starts-with(@id,\"mall_post_\")]')\n    print(posts)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/euBHk.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/euBHk.jpg\" alt=\"enter image description here\"></a>\nEven if I try just to find all div's with id's (//div[@id]/@id) - it doesn't see half of the div's (with id) present in the document.</p>\n\n<p>The saved html file is big - over 800 Kb, so I can't post it here, but I'll give a link to it:\n<a href=\"https://www.dropbox.com/s/tz7kp695syk8jow/page04.html?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/tz7kp695syk8jow/page04.html?dl=0</a></p>\n\n<p>Please help to make it working, or maybe you know some other way to scrape these posts which support scraping/parsing for multiple parameters(author, text, comments, etc).</p>\n"}, {"tags": ["python", "python-3.x", "python-3.5", "python-module", "synology"], "owner": {"reputation": 13, "user_id": 3101107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/92wOd.jpg?s=128&g=1", "display_name": "BMB", "link": "https://stackoverflow.com/users/3101107/bmb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2247, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1508530556, "creation_date": 1507759121, "last_edit_date": 1508530556, "question_id": 46698195, "link": "https://stackoverflow.com/questions/46698195/installing-python3-modules-on-synology-diskstation-stops-with-errors", "title": "Installing Python3 Modules on Synology Diskstation stops with errors", "body": "<p>I fail to install pandas and other modules on my Python3 installation.</p>\n\n<p>System: DS216j, DSM 6.1.3, Marvell Armada</p>\n\n<p>Following instructions from here: \n<a href=\"https://stackoverflow.com/questions/38141115/python-at-synology-how-to-get-python3-modules-installed-and-where-is-python2-7\">Python at Synology, how to get Python3 modules installed and where is Python2.7 installed?</a></p>\n\n<p>I could install PIP and I also installed virtualenv and set an ENV in /volume1/Programme/py3k</p>\n\n<p>When I run <code>pip3 install panda</code> I get following error:</p>\n\n<pre><code>Command \"python setup.py egg_info\" failed with error code 1 in /tmp/pip-build-gebsk2ej/pandas/\n</code></pre>\n\n<p>The complete output:</p>\n\n<pre><code>Collecting pandas\n  Using cached pandas-0.20.3.tar.gz\n    Complete output from command python setup.py egg_info:\n    /bin/sh: svnversion: command not found\n    /bin/sh: svnversion: command not found\n    non-existing path in 'numpy/distutils': 'site.cfg'\n    Could not locate executable gfortran\n    Could not locate executable f95\n    Could not locate executable ifort\n    Could not locate executable ifc\n    Could not locate executable lf95\n    Could not locate executable pgfortran\n    Could not locate executable f90\n    Could not locate executable f77\n    Could not locate executable fort\n    Could not locate executable efort\n    Could not locate executable efc\n    Could not locate executable g77\n    Could not locate executable g95\n    Could not locate executable pathf95\n    don't know how to compile Fortran code on platform 'posix'\n    Running from numpy source directory.\n    /tmp/easy_install-2ovt2hrb/numpy-1.13.3/setup.py:367: UserWarning: Unrecognized setuptools command, proceeding with generating Cython sources and expanding templates\n      run_build = parse_setuppy_commands()\n    /tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/system_info.py:572: UserWarning:\n        Atlas (http://math-atlas.sourceforge.net/) libraries not found.\n        Directories to search for the libraries can be specified in the\n        numpy/distutils/site.cfg file (section [atlas]) or by setting\n        the ATLAS environment variable.\n      self.calc_info()\n    /tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/system_info.py:572: UserWarning:\n        Blas (http://www.netlib.org/blas/) libraries not found.\n        Directories to search for the libraries can be specified in the\n        numpy/distutils/site.cfg file (section [blas]) or by setting\n        the BLAS environment variable.\n      self.calc_info()\n    /tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/system_info.py:572: UserWarning:\n        Blas (http://www.netlib.org/blas/) sources not found.\n        Directories to search for the sources can be specified in the\n        numpy/distutils/site.cfg file (section [blas_src]) or by setting\n        the BLAS_SRC environment variable.\n      self.calc_info()\n    /tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/system_info.py:572: UserWarning:\n        Lapack (http://www.netlib.org/lapack/) libraries not found.\n        Directories to search for the libraries can be specified in the\n        numpy/distutils/site.cfg file (section [lapack]) or by setting\n        the LAPACK environment variable.\n      self.calc_info()\n    /tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/system_info.py:572: UserWarning:\n        Lapack (http://www.netlib.org/lapack/) sources not found.\n        Directories to search for the sources can be specified in the\n        numpy/distutils/site.cfg file (section [lapack_src]) or by setting\n        the LAPACK_SRC environment variable.\n      self.calc_info()\n    /volume1/@appstore/py3k/usr/local/lib/python3.5/distutils/dist.py:261: UserWarning: Unknown distribution option: 'define_macros'\n      warnings.warn(msg)\n    Traceback (most recent call last):\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 158, in save_modules\n        yield saved\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 199, in setup_context\n        yield\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/contextlib.py\", line 77, in __exit__\n        self.gen.throw(type, value, traceback)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 67, in save_path\n        yield saved\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 199, in setup_context\n        yield\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/contextlib.py\", line 77, in __exit__\n        self.gen.throw(type, value, traceback)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 58, in save_argv\n        yield saved\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 199, in setup_context\n        yield\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/contextlib.py\", line 77, in __exit__\n        self.gen.throw(type, value, traceback)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 84, in override_temp\n        yield\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 199, in setup_context\n        yield\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/contextlib.py\", line 77, in __exit__\n        self.gen.throw(type, value, traceback)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 94, in pushd\n        yield saved\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 199, in setup_context\n        yield\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 254, in run_setup\n        _execfile(setup_script, ns)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 49, in _execfile\n        exec(code, globals, locals)\n      File \"/tmp/easy_install-2ovt2hrb/numpy-1.13.3/setup.py\", line 392, in &lt;module&gt;\n        \"\"\"Custom distutils command subclassed from Cython.Distutils.build_ext\n      File \"/tmp/easy_install-2ovt2hrb/numpy-1.13.3/setup.py\", line 384, in setup_package\n        \"\"\" % src)\n      File \"/tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/core.py\", line 169, in setup\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/distutils/core.py\", line 148, in setup\n        dist.run_commands()\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/distutils/dist.py\", line 955, in run_commands\n        self.run_command(cmd)\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/distutils/dist.py\", line 974, in run_command\n        cmd_obj.run()\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/command/bdist_egg.py\", line 160, in run\n        self.run_command(\"egg_info\")\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/distutils/cmd.py\", line 313, in run_command\n        self.distribution.run_command(command)\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/distutils/dist.py\", line 974, in run_command\n        cmd_obj.run()\n      File \"/tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/command/egg_info.py\", line 26, in run\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/distutils/cmd.py\", line 313, in run_command\n        self.distribution.run_command(command)\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/distutils/dist.py\", line 974, in run_command\n        cmd_obj.run()\n      File \"/tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/command/build_src.py\", line 148, in run\n      File \"/tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/command/build_src.py\", line 159, in build_sources\n      File \"/tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/command/build_src.py\", line 294, in build_library_sources\n      File \"/tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/command/build_src.py\", line 377, in generate_sources\n      File \"numpy/core/setup.py\", line 674, in get_mathlib_info\n        'pandas.tests.io.json',\n    RuntimeError: Broken toolchain: cannot link a simple C program\n\n    During handling of the above exception, another exception occurred:\n\n    Traceback (most recent call last):\n      File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n      File \"/tmp/pip-build-gebsk2ej/pandas/setup.py\", line 729, in &lt;module&gt;\n        **setuptools_kwargs)\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/distutils/core.py\", line 108, in setup\n        _setup_distribution = dist = klass(attrs)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/dist.py\", line 335, in __init__\n        self.fetch_build_eggs(attrs['setup_requires'])\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/dist.py\", line 456, in fetch_build_eggs\n        replace_conflicting=True,\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/pkg_resources/__init__.py\", line 863, in resolve\n        replace_conflicting=replace_conflicting\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/pkg_resources/__init__.py\", line 1141, in best_match\n        return self.obtain(req, installer)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/pkg_resources/__init__.py\", line 1153, in obtain\n        return installer(requirement)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/dist.py\", line 522, in fetch_build_egg\n        return cmd.easy_install(req)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/command/easy_install.py\", line 672, in easy_install\n        return self.install_item(spec, dist.location, tmpdir, deps)\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/contextlib.py\", line 77, in __exit__\n        self.gen.throw(type, value, traceback)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/command/easy_install.py\", line 634, in _tmpdir\n        yield str(tmpdir)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/command/easy_install.py\", line 672, in easy_install\n        return self.install_item(spec, dist.location, tmpdir, deps)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/command/easy_install.py\", line 698, in install_item\n        dists = self.install_eggs(spec, download, tmpdir)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/command/easy_install.py\", line 879, in install_eggs\n        return self.build_and_install(setup_script, setup_base)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/command/easy_install.py\", line 1118, in build_and_install\n        self.run_setup(setup_script, setup_base, args)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/command/easy_install.py\", line 1104, in run_setup\n        run_setup(setup_script, args)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 257, in run_setup\n        raise\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/contextlib.py\", line 77, in __exit__\n        self.gen.throw(type, value, traceback)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 199, in setup_context\n        yield\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/contextlib.py\", line 77, in __exit__\n        self.gen.throw(type, value, traceback)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 182, in save_pkg_resources_state\n        yield saved\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 199, in setup_context\n        yield\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/contextlib.py\", line 77, in __exit__\n        self.gen.throw(type, value, traceback)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 170, in save_modules\n        saved_exc.resume()\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 145, in resume\n        six.reraise(type, exc, self._tb)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/pkg_resources/_vendor/six.py\", line 685, in reraise\n        raise value.with_traceback(tb)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 158, in save_modules\n        yield saved\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 199, in setup_context\n        yield\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/contextlib.py\", line 77, in __exit__\n        self.gen.throw(type, value, traceback)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 67, in save_path\n        yield saved\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 199, in setup_context\n        yield\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/contextlib.py\", line 77, in __exit__\n        self.gen.throw(type, value, traceback)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 58, in save_argv\n        yield saved\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 199, in setup_context\n        yield\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/contextlib.py\", line 77, in __exit__\n        self.gen.throw(type, value, traceback)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 84, in override_temp\n        yield\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 199, in setup_context\n        yield\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/contextlib.py\", line 77, in __exit__\n        self.gen.throw(type, value, traceback)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 94, in pushd\n        yield saved\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 199, in setup_context\n        yield\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 254, in run_setup\n        _execfile(setup_script, ns)\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/sandbox.py\", line 49, in _execfile\n        exec(code, globals, locals)\n      File \"/tmp/easy_install-2ovt2hrb/numpy-1.13.3/setup.py\", line 392, in &lt;module&gt;\n        \"\"\"Custom distutils command subclassed from Cython.Distutils.build_ext\n      File \"/tmp/easy_install-2ovt2hrb/numpy-1.13.3/setup.py\", line 384, in setup_package\n        \"\"\" % src)\n      File \"/tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/core.py\", line 169, in setup\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/distutils/core.py\", line 148, in setup\n        dist.run_commands()\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/distutils/dist.py\", line 955, in run_commands\n        self.run_command(cmd)\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/distutils/dist.py\", line 974, in run_command\n        cmd_obj.run()\n      File \"/volume1/Programme/py3k/lib/python3.5/site-packages/setuptools/command/bdist_egg.py\", line 160, in run\n        self.run_command(\"egg_info\")\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/distutils/cmd.py\", line 313, in run_command\n        self.distribution.run_command(command)\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/distutils/dist.py\", line 974, in run_command\n        cmd_obj.run()\n      File \"/tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/command/egg_info.py\", line 26, in run\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/distutils/cmd.py\", line 313, in run_command\n        self.distribution.run_command(command)\n      File \"/volume1/@appstore/py3k/usr/local/lib/python3.5/distutils/dist.py\", line 974, in run_command\n        cmd_obj.run()\n      File \"/tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/command/build_src.py\", line 148, in run\n      File \"/tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/command/build_src.py\", line 159, in build_sources\n      File \"/tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/command/build_src.py\", line 294, in build_library_sources\n      File \"/tmp/easy_install-2ovt2hrb/numpy-1.13.3/numpy/distutils/command/build_src.py\", line 377, in generate_sources\n      File \"numpy/core/setup.py\", line 674, in get_mathlib_info\n        'pandas.tests.io.json',\n    RuntimeError: Broken toolchain: cannot link a simple C program\n    /bin/ash: /usr/local/arm-unknown-linux-gnueabi/bin/arm-unknown-linux-gnueabi-ccache-gcc: No such file or directory\n    /bin/ash: /usr/local/arm-unknown-linux-gnueabi/bin/arm-unknown-linux-gnueabi-ccache-gcc: No such file or directory\n</code></pre>\n\n<p>Do I need to install other packages before (svn, gfortran, etc)? And how would I do it if so?</p>\n\n<p>Or is there another reason why it fails?</p>\n\n<p>/edit</p>\n\n<p>I could install python-dateutil (whl) and pytz (egg), but not pandas and numpy. For pandas and numpy the available wheel packages are only available for x86. </p>\n\n<p>Is this the reason for a failing installation? </p>\n\n<p>How do I build my own wheel for the ARM core used in my system?</p>\n\n<p>edit/</p>\n\n<p>/edit2</p>\n\n<p>It looks like my assumption above is correct. With the help of \n<a href=\"https://github.com/imrehg/arm-wheels\" rel=\"nofollow noreferrer\">https://github.com/imrehg/arm-wheels</a>\nI could install numpy. Unfortunately pandas is not yet available. So I'll try to build it on my own.</p>\n\n<p>edit2/</p>\n\n<p>Thanks for your help!\nBMB</p>\n"}, {"tags": ["python", "tensorflow", "keras"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2891129"}, "edited": false, "score": 0, "creation_date": 1507816826, "post_id": 46698189, "comment_id": 80369511, "body": "Did you try mean absolute error(mae)? Also, binary cross-entropy is for classification problems, not regression problems."}, {"owner": {"reputation": 316, "user_id": 4518087, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hpcDU.png?s=128&g=1", "display_name": "Wedoso", "link": "https://stackoverflow.com/users/4518087/wedoso"}, "edited": false, "score": 0, "creation_date": 1507915243, "post_id": 46698189, "comment_id": 80416638, "body": "@semicolon in the past couple days I tried DNN. The performance metrics I focus is sign accuracy. Of course, the predicted values are also important. With <code>mse</code> and DNN structure, the current sign accuracy is 81.5%. I tried your suggestion with <code>mae</code> as loss function and the same DNN structure. The sign accuracy is 81.7%. The answer given by Julio below is almost what I want, though an error is raised. Actually, the reason I want to introduce cross entropy is to improve the sign accuracy."}], "answers": [{"comments": [{"owner": {"reputation": 316, "user_id": 4518087, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hpcDU.png?s=128&g=1", "display_name": "Wedoso", "link": "https://stackoverflow.com/users/4518087/wedoso"}, "edited": false, "score": 0, "creation_date": 1507913958, "post_id": 46714227, "comment_id": 80416007, "body": "There is an error: <code>TypeError: custom_loss() takes exactly 2 arguments (3 given)</code>. And I compile model as this <code>model.compile(optimizer=&#39;adam&#39;, loss=self.custom_loss, metrics=[&#39;mse&#39;])</code>"}, {"owner": {"reputation": 3221, "user_id": 4727666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xzs0NoBGYUM/AAAAAAAAAAI/AAAAAAAAAsI/OvJLK1sQo0k/photo.jpg?sz=128", "display_name": "Julio Daniel Reyes", "link": "https://stackoverflow.com/users/4727666/julio-daniel-reyes"}, "reply_to_user": {"reputation": 316, "user_id": 4518087, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hpcDU.png?s=128&g=1", "display_name": "Wedoso", "link": "https://stackoverflow.com/users/4518087/wedoso"}, "edited": false, "score": 1, "creation_date": 1507916315, "post_id": 46714227, "comment_id": 80417159, "body": "<code>self</code> is the third parameter, that is why is giving you an error"}], "tags": [], "owner": {"reputation": 3221, "user_id": 4727666, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xzs0NoBGYUM/AAAAAAAAAAI/AAAAAAAAAsI/OvJLK1sQo0k/photo.jpg?sz=128", "display_name": "Julio Daniel Reyes", "link": "https://stackoverflow.com/users/4727666/julio-daniel-reyes"}, "is_accepted": true, "score": 3, "last_activity_date": 1507824436, "creation_date": 1507824436, "answer_id": 46714227, "question_id": 46698189, "link": "https://stackoverflow.com/questions/46698189/combine-cross-entropy-and-mse-in-loss-function/46714227#46714227", "title": "Combine cross-entropy and mse in loss function", "body": "<p>You can create your own loss function, checkout <a href=\"https://keras.io/losses/\" rel=\"nofollow noreferrer\">keras documentation</a> and <a href=\"https://github.com/fchollet/keras/blob/master/keras/losses.py\" rel=\"nofollow noreferrer\">source code</a> for ideas, but it should be something like this:    </p>\n\n<pre><code>from keras.losses import mean_squared_error, binary_crossentropy\n\ndef my_custom_loss(y_true, y_pred):\n    mse = mean_squared_error(y_true, y_pred)\n    crossentropy = binary_crossentropy(y_true, y_pred)\n    return mse + crossentropy\n\n...\n\nmodel.compile(loss=my_custom_loss, ...)\n</code></pre>\n\n<p>Also checkout the <a href=\"https://keras.io/backend/\" rel=\"nofollow noreferrer\">backend API</a> to use primitives if you need basic tensor operations</p>\n"}, {"tags": [], "owner": {"reputation": 3723, "user_id": 3731622, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/34ed93a2cf922f7064184109e4b9c16a?s=128&d=identicon&r=PG&f=1", "display_name": "user3731622", "link": "https://stackoverflow.com/users/3731622/user3731622"}, "is_accepted": false, "score": 0, "last_activity_date": 1541551931, "creation_date": 1541551931, "answer_id": 53182254, "question_id": 46698189, "link": "https://stackoverflow.com/questions/46698189/combine-cross-entropy-and-mse-in-loss-function/53182254#53182254", "title": "Combine cross-entropy and mse in loss function", "body": "<p>You might want to use the Keras functional api to build a multi output model.</p>\n\n<p>You could create one output for the classification part of the model and one output for the regression part of the model. (FYI, in literature these are referred to as the classification head and regression head of the CNN.)</p>\n\n<p>Then you can specify the loss functions for each of the outputs.</p>\n\n<p>You can also weight each loss function (i.e. set weights for linear combination of losses of each of the models outputs).</p>\n\n<p>This type of multi output model is explained in <a href=\"https://keras.io/getting-started/functional-api-guide/\" rel=\"nofollow noreferrer\">Keras functional api guide</a>.  Read through the link and pay attention to the section <strong>Multi-input and multi-output models</strong></p>\n"}], "owner": {"reputation": 316, "user_id": 4518087, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/hpcDU.png?s=128&g=1", "display_name": "Wedoso", "link": "https://stackoverflow.com/users/4518087/wedoso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2996, "favorite_count": 3, "accepted_answer_id": 46714227, "answer_count": 2, "score": 2, "last_activity_date": 1541551931, "creation_date": 1507759110, "question_id": 46698189, "link": "https://stackoverflow.com/questions/46698189/combine-cross-entropy-and-mse-in-loss-function", "title": "Combine cross-entropy and mse in loss function", "body": "<p>I am working on a regression problem. My dataset has labels ranging from <code>[0,1]</code>. Due to the design purpose, the label with the value over <code>0.3</code> is converted to the negative, i.e., <code>0.35</code> is converted to <code>-0.35</code>. </p>\n\n<p>In keras, I first tried <code>mse</code> as the loss function, but the performance is not good. After I realize the sign of labels, I tried binary cross-entropy as well. But the performance is still not good.</p>\n\n<p>As I explained above, it seems we can utilize two loss functions and sum them up. But I don't know how to write the code. Besides, if you have any other suggestion for this specific dataset, please let me know.</p>\n"}, {"tags": ["python", "pycharm"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 5, "creation_date": 1507758903, "post_id": 46698141, "comment_id": 80344023, "body": "because <code>pass</code> is a keyword. don&#39;t use it as a variable."}, {"owner": {"reputation": 19, "user_id": 8761743, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VnIWET8MSwA/AAAAAAAAAAI/AAAAAAAAAYo/N_DH6eQ4-Kg/photo.jpg?sz=128", "display_name": "udara chinthaka", "link": "https://stackoverflow.com/users/8761743/udara-chinthaka"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1507759067, "post_id": 46698141, "comment_id": 80344079, "body": "It works. Thank you very much. i&#39;m just beginning my self study"}], "answers": [{"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1507759479, "post_id": 46698199, "comment_id": 80344210, "body": "I didn&#39;t find any duplicate to this basic err, python :)) question so I answered as community wiki. If someone finds a proper duplicate feel free to suggest / close"}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 1, "last_activity_date": 1507759140, "creation_date": 1507759140, "answer_id": 46698199, "question_id": 46698141, "link": "https://stackoverflow.com/questions/46698141/pass-data-value-in-python/46698199#46698199", "title": "Pass data value in python", "body": "<p>you're unlucky enough to have stumbled on a python keyword (the <em>null</em> statement that does nothing except make indentation happy).</p>\n\n<p>hich is currently:</p>\n\n<pre><code>['and', 'as', 'assert', 'break', 'class', 'continue', 'def', 'del', 'elif',\n 'else', 'except', 'exec', 'finally', 'for', 'from', 'global', 'if', 'import',\n 'in', 'is', 'lambda', 'not', 'or', 'pass', 'print', 'raise', 'return', 'try',\n 'while', 'with', 'yield']\n</code></pre>\n\n<p>(from <a href=\"https://stackoverflow.com/questions/9642087/is-it-possible-to-get-a-list-of-keywords-in-python\">Is it possible to get a list of keywords in Python?</a>)</p>\n\n<p>As opposed to built-in functions like <code>sum</code> or <code>list</code>, keywords cannot be used / overridden without triggering strange syntax errors.</p>\n"}], "owner": {"reputation": 19, "user_id": 8761743, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VnIWET8MSwA/AAAAAAAAAAI/AAAAAAAAAYo/N_DH6eQ4-Kg/photo.jpg?sz=128", "display_name": "udara chinthaka", "link": "https://stackoverflow.com/users/8761743/udara-chinthaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1507759140, "creation_date": 1507758800, "last_edit_date": 1507758950, "question_id": 46698141, "link": "https://stackoverflow.com/questions/46698141/pass-data-value-in-python", "title": "Pass data value in python", "body": "<p><a href=\"https://i.stack.imgur.com/OQqS2.png\" rel=\"nofollow noreferrer\">python code line for get value from the form</a></p>\n\n<pre><code>pass = form.getvalue('name',)\n</code></pre>\n\n<p>when i try to set form data value to this 'pass' variable it gives two errors near the equal mark. </p>\n\n<ol>\n<li><p>End of statement expected.</p></li>\n<li><p>Statement expected, found py:EQ </p></li>\n</ol>\n\n<p>Why?</p>\n"}, {"tags": ["jquery", "python", "html", "flask"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1507759440, "post_id": 46698134, "comment_id": 80344195, "body": "You did not post <code>my_function()</code> which seems to do the major work."}, {"owner": {"reputation": 9076, "user_id": 865601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47d4708f5f7ae78ab1f4c4b8c3b62ddd?s=128&d=identicon&r=PG", "display_name": "Jacob Budin", "link": "https://stackoverflow.com/users/865601/jacob-budin"}, "edited": false, "score": 0, "creation_date": 1507769275, "post_id": 46698134, "comment_id": 80346724, "body": "How long does it take to process 500 words?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5017783"}, "edited": false, "score": 0, "creation_date": 1507970655, "post_id": 46698134, "comment_id": 80431335, "body": "Less than a second. I think the problem is in get request. Probably get request cannot take so much text. I tried using post, but then I cannot get the output on the same page."}], "answers": [{"tags": [], "owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "is_accepted": true, "score": 4, "last_activity_date": 1508020315, "last_edit_date": 1508020315, "creation_date": 1507987604, "answer_id": 46745086, "question_id": 46698134, "link": "https://stackoverflow.com/questions/46698134/how-to-post-the-output-result-on-the-same-page-in-flask-app/46745086#46745086", "title": "How to post the output result on the same page in flask app?", "body": "<p>As you are already using an ajax method able to handle the response, you could return the JSON response directly instead of rendering a new template:</p>\n\n<pre><code>return jsonify(result=result) \n</code></pre>\n\n<p>Also you may want to change GET to POST for the JQuery method :</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;link rel=\"stylesheet\" href=\"../static/main.css\"&gt;\n        &lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js\"&gt;&lt;/script&gt;\n        &lt;script type=text/javascript&gt;\n            $(function() {\n              $('a#process_input').bind('click', function() {\n                $.post('/', {  \n                  story: $('textarea[name=\"story\"]').val(),\n                }, function(data) {\n                  $('#result').text(data.result);\n                });\n                return false;\n              });\n            });\n        &lt;/script&gt;\n    &lt;/head&gt;\n</code></pre>\n\n<p>(Note that you need to write <code>$.post('/background_process'</code> if you keep two separated functions, and not the one i suggest below.)</p>\n\n<p>Then you can gather the code in one function, the template will be rendered with a GET method, and the response will be rendered from a POST :</p>\n\n<pre><code>app = Flask(__name__)\n\n@app.route('/', methods= [\"GET\", \"POST\"])\ndef homepage():\n    if request.method == 'POST':\n        story = request.form.get('story')\n        if story:\n            result = myfunction(story)\n            return jsonify(result=result)\n        else:\n            return jsonify(result='Input needed')\n\n    return render_template('index.html')\n\nif __name__ == \"__main__\":\n    app.debug=True\n    app.run()\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5017783"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7573, "favorite_count": 2, "accepted_answer_id": 46745086, "answer_count": 1, "score": 5, "last_activity_date": 1541771170, "creation_date": 1507758761, "last_edit_date": 1507973935, "question_id": 46698134, "link": "https://stackoverflow.com/questions/46698134/how-to-post-the-output-result-on-the-same-page-in-flask-app", "title": "How to post the output result on the same page in flask app?", "body": "<p>I have a flask app that takes some text as an input, runs a python script and spits out an output on the same html page, except it goes to a new page. I don't see why it would go to a new page.</p>\n\n<p>This is my app.py file:</p>\n\n<pre><code>#!/usr/bin/env python3\n\nfrom flask import *\nfrom flask import render_template\nfrom myclass import myfunction\n\napp = Flask(__name__)\n\n@app.route('/')\ndef homepage():\n    return render_template('index.html')\n\n@app.route('/', methods= [\"POST\"])\ndef background_process():\n    if request.method == 'POST':\n        try:\n            story = request.form.get('story')\n            if story:\n                result = myfunction(story)\n                return render_template('index.html', **jsonify(result))\n            else:\n                return jsonify(result='Input needed')\n        except Exception as e:\n            return (str(e))\n\nif __name__ == \"__main__\":\n    app.debug=True\n    app.run()\n</code></pre>\n\n<p>And this is my index.html file:</p>\n\n<pre><code> &lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;link rel=\"stylesheet\" href=\"../static/main.css\"&gt;\n        &lt;script src=\"//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js\"&gt;&lt;/script&gt;\n        &lt;script type=text/javascript&gt;\n            $(function() {\n              $('a#process_input').bind('click', function() {\n                $.getJSON('/background_process', {\n                  story: $('textarea[name=\"story\"]').val(),\n                }, function(data) {\n                  $('#result').text(data.result);\n                });\n                return false;\n              });\n            });\n        &lt;/script&gt;\n    &lt;/head&gt;\n\n    &lt;body&gt;\n        &lt;div class='container'&gt;\n            &lt;form&gt;\n                &lt;textarea id=\"text_input\" rows=\"20\" cols=\"80\" name=story&gt;&lt;/textarea&gt;\n                &lt;br&gt;\n                &lt;a href=# id=process_input&gt;&lt;button class='btn btn-default'&gt;Submit&lt;/button&gt;&lt;/a&gt;\n            &lt;/form&gt;\n            &lt;br&gt;\n            &lt;p&gt;&lt;h2 align='center'&gt;Result:&lt;/h2&gt;&lt;h2 id=result align='center'&gt;&lt;/h2&gt;&lt;/p&gt;\n\n        &lt;/div&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>When input is given, it shows the result in a new page on json format. I want to show it on the same page. What's going wrong here?\nThanks!</p>\n"}, {"tags": ["python", "graph-tool"], "answers": [{"tags": [], "owner": {"reputation": 4525, "user_id": 180962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fa21ab3e7b0fdcc3058400a35aef75b?s=128&d=identicon&r=PG", "display_name": "Tiago Peixoto", "link": "https://stackoverflow.com/users/180962/tiago-peixoto"}, "is_accepted": false, "score": 1, "last_activity_date": 1507886121, "last_edit_date": 1507886121, "creation_date": 1507820418, "answer_id": 46712868, "question_id": 46698127, "link": "https://stackoverflow.com/questions/46698127/graph-tool-edge-text-not-working/46712868#46712868", "title": "graph tool edge text not working", "body": "<p>This is a cairo/pango bug.</p>\n\n<p>You can get around it by specifying the font family explicitly:</p>\n\n<pre><code>graph_draw(g, eprops=props, edge_font_family=\"Times\")\n</code></pre>\n\n<p>EDIT: In fact, this turned out to be subtle bug when using cairo together with boost::coroutines. This has been fixed now in version 2.25, and the original example should work without modification.</p>\n"}], "owner": {"reputation": 21, "user_id": 2248525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b705e99b602d27f1bfa908dceda8cea?s=128&d=identicon&r=PG", "display_name": "user2248525", "link": "https://stackoverflow.com/users/2248525/user2248525"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1507886121, "creation_date": 1507758729, "last_edit_date": 1507760675, "question_id": 46698127, "link": "https://stackoverflow.com/questions/46698127/graph-tool-edge-text-not-working", "title": "graph tool edge text not working", "body": "<p>I am trying to create an interactive finite state automata in python using graph-tool, but I can't get edge labels to work.</p>\n\n<p>Here is the python file:</p>\n\n<pre><code>from graph_tool.all import *\n\ng = Graph()\nedge_labels = g.new_edge_property(\"string\")\na = g.add_vertex()\nb = g.add_vertex()\ne = g.add_edge(a, b)\nedge_labels[e] = 'a'\nprops = {'text': edge_labels}\ngraph_draw(\n    g,\n    eprops=props,\n    output_size=(200, 200),\n)\n</code></pre>\n\n<p>This the crash:</p>\n\n<pre><code>*** Error in `/usr/lib/python-exec/python2.7/python2': free(): invalid size: 0x00000000023d0840 ***\n======= Backtrace: =========\n/lib64/libc.so.6(+0x77a4b)[0x7f73bac77a4b]\n/lib64/libc.so.6(+0x7f6be)[0x7f73bac7f6be]\n/lib64/libc.so.6(+0x7ffa6)[0x7f73bac7ffa6]\n/usr/lib64/python2.7/site-packages/graph_tool/draw/libgraph_tool_draw.so(+0xbba31)[0x7f73970d5a31]\n/usr/lib64/python2.7/site-packages/graph_tool/topology/libgraph_tool_topology.so(_ZN5boost11coroutines26detail14pull_coroutineINS_6python3api6objectEE13control_block7destroyEPS7_+0x87)[0x7f73a281daf7]\n/usr/lib64/python2.7/site-packages/graph_tool/draw/libgraph_tool_draw.so(_Z10cairo_drawRN10graph_tool14GraphInterfaceEN5boost3anyES3_S3_bNS2_6python4dictES5_S5_S5_dlNS4_3api6objectE+0x548)[0x7f73970d8168]\n/usr/lib64/python2.7/site-packages/graph_tool/draw/libgraph_tool_draw.so(+0x251666)[0x7f739726b666]\n/usr/lib64/python2.7/site-packages/graph_tool/draw/libgraph_tool_draw.so(+0x251ba8)[0x7f739726bba8]\n/usr/lib64/libboost_python-2.7.so.1.65.0(_ZNK5boost6python7objects8function4callEP7_objectS4_+0x2d7)[0x7f73a8aedd67]\n/usr/lib64/libboost_python-2.7.so.1.65.0(+0x25f48)[0x7f73a8aedf48]\n/usr/lib64/libboost_python-2.7.so.1.65.0(_ZNK5boost6python6detail17exception_handlerclERKNS_9function0IvEE+0x6b)[0x7f73a8af4beb]\n/usr/lib64/python2.7/site-packages/graph_tool/libgraph_tool_core.so(+0xa17cb3)[0x7f73a9982cb3]\n/usr/lib64/libboost_python-2.7.so.1.65.0(_ZNK5boost6python6detail17exception_handlerclERKNS_9function0IvEE+0x3a)[0x7f73a8af4bba]\n/usr/lib64/python2.7/site-packages/graph_tool/libgraph_tool_core.so(+0xa17bd3)[0x7f73a9982bd3]\n/usr/lib64/libboost_python-2.7.so.1.65.0(_ZNK5boost6python6detail17exception_handlerclERKNS_9function0IvEE+0x3a)[0x7f73a8af4bba]\n/usr/lib64/python2.7/site-packages/graph_tool/libgraph_tool_core.so(+0xa17b73)[0x7f73a9982b73]\n/usr/lib64/libboost_python-2.7.so.1.65.0(_ZN5boost6python21handle_exception_implENS_9function0IvEE+0x3f)[0x7f73a8af498f]\n/usr/lib64/libboost_python-2.7.so.1.65.0(+0x23059)[0x7f73a8aeb059]\n/usr/lib64/libpython2.7.so.1.0(PyObject_Call+0x43)[0x7f73bb21cf73]\n/usr/lib64/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x5595)[0x7f73bb2b6275]\n...\n/lib64/libc.so.6(__libc_start_main+0xf1)[0x7f73bac20521]\n/usr/lib/python-exec/python2.7/python2(_start+0x2a)[0x40064a]\n======= Memory map: ========\n00400000-00401000 r-xp 00000000 08:03 28461541                           /usr/bin/python2.7\n00600000-00601000 r--p 00000000 08:03 28461541                           /usr/bin/python2.7\n00601000-00602000 rw-p 00001000 08:03 28461541                           /usr/bin/python2.7\n00aa9000-027cb000 rw-p 00000000 00:00 0                                  [heap]\n7f737c000000-7f737c022000 rw-p 00000000 00:00 0 \n7f737c022000-7f7380000000 ---p 00000000 00:00 0 \n7f7380000000-7f7380021000 rw-p 00000000 00:00 0 \n7f7380021000-7f7384000000 ---p 00000000 00:00 0 \n7f7384000000-7f7384021000 rw-p 00000000 00:00 0 \n7f7384021000-7f7388000000 ---p 00000000 00:00 0 \n7f738a3be000-7f738a477000 r--p 00000000 08:03 24020070                   /usr/share/fonts/dejavu/DejaVuSans.ttf\n7f738a477000-7f738a482000 r--s 00000000 08:03 19015130                   /var/cache/fontconfig/acc285bc1956c3c4bc7afb41d537a85a-le64.cache-7\n...\n</code></pre>\n\n<p>I have no idea where to start looking for the issue. Running with python 3 gives a similar error. If I remove the edge labels, it works.</p>\n\n<p>If not a solution to this problem, are there any libraries that can be suggested as alternatives to graph-tool? I want the the visualisation to be interactive, since I eventually want the FSA to be modifiable in the GUI.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1507758692, "post_id": 46698097, "comment_id": 80343949, "body": "Compare to <code>query.lower()</code>."}, {"owner": {"reputation": 479, "user_id": 6854567, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZTADTNI83K4/AAAAAAAAAAI/AAAAAAAAAG4/Kz1m_iRuHu8/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/6854567/alex"}, "edited": false, "score": 0, "creation_date": 1507758762, "post_id": 46698097, "comment_id": 80343981, "body": "But when you are using lower() make sure that what you are comparing is also &quot;.lower()&quot; because python IS case sensitive."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1507759129, "post_id": 46698097, "comment_id": 80344094, "body": "the fact that this text comes from a <code>request.get</code> seems irrelevant here, it&#39;s just case insensitive string matching."}], "answers": [{"tags": [], "owner": {"reputation": 820, "user_id": 5626341, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/225ed59da2a212f403bb7948cf396b5e?s=128&d=identicon&r=PG&f=1", "display_name": "kloddant", "link": "https://stackoverflow.com/users/5626341/kloddant"}, "is_accepted": true, "score": 2, "last_activity_date": 1507758703, "creation_date": 1507758703, "answer_id": 46698122, "question_id": 46698097, "link": "https://stackoverflow.com/questions/46698097/ignore-uppercase-in-a-query-python/46698122#46698122", "title": "Ignore uppercase in a query, Python", "body": "<p>Use .lower() </p>\n\n<pre><code>if query.lower() in ['song', 'songs']:\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "is_accepted": false, "score": 1, "last_activity_date": 1507758941, "last_edit_date": 1592644375, "creation_date": 1507758941, "answer_id": 46698166, "question_id": 46698097, "link": "https://stackoverflow.com/questions/46698097/ignore-uppercase-in-a-query-python/46698166#46698166", "title": "Ignore uppercase in a query, Python", "body": "<p>In Python3.3+, you should prefer <a href=\"https://docs.python.org/3/library/stdtypes.html#str.casefold\" rel=\"nofollow noreferrer\"><code>str.casefold</code>\n</a>.</p>\n<pre><code>if query.casefold() in ['song'.casefold(), 'songs'.casefold()]:\n</code></pre>\n<p>From the docs:</p>\n<blockquote>\n<p>Return a casefolded copy of the string. Casefolded strings may be used for caseless matching.</p>\n<p>Casefolding is similar to lowercasing but more aggressive because it is intended to remove all case distinctions in a string. For example, the German lowercase letter '\u00df' is equivalent to &quot;ss&quot;. Since it is already lowercase, lower() would do nothing to '\u00df'; casefold() converts it to &quot;ss&quot;.</p>\n<p>The casefolding algorithm is described in section 3.13 of the Unicode Standard.</p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7332748"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 581, "favorite_count": 0, "closed_date": 1507759076, "accepted_answer_id": 46698122, "answer_count": 2, "score": 0, "last_activity_date": 1507758941, "creation_date": 1507758594, "question_id": 46698097, "link": "https://stackoverflow.com/questions/46698097/ignore-uppercase-in-a-query-python", "closed_reason": "Duplicate", "title": "Ignore uppercase in a query, Python", "body": "<p>I have this code</p>\n\n<pre><code>query = request.GET.get(\"q\")\n    if query:\n        if query == \"song\" or query == \"songs\":\n            return render(request, 'music/cloud.html', {\n                'songs': song_results,\n                'generic_songs': song_results_generic,\n            })\n</code></pre>\n\n<p>The thing is, I want the \"if\" statement to ignor uppercases.\nFor example, when the user search by \"SoNg\" or \"SonG\" or.. it will be converted to \"song\" before testing</p>\n"}, {"tags": ["python", "python-2.7", "list", "loops"], "comments": [{"owner": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1507760572, "post_id": 46698061, "comment_id": 80344534, "body": "Does this say hostLogin alters global variables?"}, {"owner": {"reputation": 79, "user_id": 6480498, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/360279420844809/picture?type=large", "display_name": "Damon", "link": "https://stackoverflow.com/users/6480498/damon"}, "reply_to_user": {"reputation": 4508, "user_id": 1766544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d74d9adb2fe5c3bf8fc5d10c504ca155?s=128&d=identicon&r=PG", "display_name": "Kenny Ostrom", "link": "https://stackoverflow.com/users/1766544/kenny-ostrom"}, "edited": false, "score": 0, "creation_date": 1507763626, "post_id": 46698061, "comment_id": 80345393, "body": "Yes, every time it runs, it alters global variables with new host data"}], "owner": {"reputation": 79, "user_id": 6480498, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/360279420844809/picture?type=large", "display_name": "Damon", "link": "https://stackoverflow.com/users/6480498/damon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507758398, "creation_date": 1507758398, "question_id": 46698061, "link": "https://stackoverflow.com/questions/46698061/python-loop-to-check-each-items-in-a-list-against-other-element", "title": "Python loop to check each items in a list against other element", "body": "<p>I have been trying several loops but can't seem to achieve what I want. Here is what I have and what I am missing:</p>\n\n<pre><code>#Gets a list of all MAC addresses \nMACList = fetchMAC.MAC\ni = 0\nwhile i&lt;len(MACList):\n    #Gets data associated to MAC\n    hostLogin(user, password, MACList[i])\n    #After above function is executed, below variables will change values for each MAC, it adds second MAC to SecondMAC\n    # It can not see ip associated to SecondMac so it puts \"NA\" under IPAddr2 as placeholder\n    print \"Data: \", MACList[i], SecondMAC, IPAddr1,IPAddr2, Host, Loc\n    #Add all this data in a database\n    MacDB.updateDB(MACList[i], SecondMAC, IPAddr,IPAddr2, Host, Loc)\n    i +=1\n    # I am stuck here\n    # so after adding very first MAC, the loop starts over with i = 1\n    # It goes thru hostlogin() function as usual and gets all data for second MAC. \n    # But before adding its own row in DB by calling updateDB(), I would like to check if this MAC is already exists. Three ways I believe we can check:\n    # 1 - Compare new MAC is in SecondMAC variable of PREVIOUS MAC loop\n    # 2 - Opposite of 1.  Check if previous MAC is in SecondMAC variable of THIS loop.\n    # 3 - Query DB and see if it already exists under SecondMAC column of BD.\n    # if second MAC in MACList is already in DB as SecondMAC\n    # then run it though below func and if not, add it normally and move on to next MAC\n\n    MacDB.editDB(MACList[i], SecondMAC, IPAddr)\n\n    # Above func edits the row where MAC was stored and Sets the value of IPAddr2 for that SecondMAC.\n</code></pre>\n\n<p>Unfortunately, when I get data with hostLogin function, it can see MAC addresses but can only see ip address associated to that host and not IP associated to second MAC on same host.  This is the main reason I have to compare and make sure I am not adding a new entry of a MAC/IP that is part of a host with 2 NICS.</p>\n\n<p>It will keep doing same for next MACs until none left.  This list should be fairly small so I am not worried too much about efficiency.</p>\n\n<p>Any help will be awesome.</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 1057, "user_id": 4255698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20e5e4d9d4b65eef49186ebc94f26c34?s=128&d=identicon&r=PG", "display_name": "Roberto Trani", "link": "https://stackoverflow.com/users/4255698/roberto-trani"}, "edited": false, "score": 1, "creation_date": 1507759358, "post_id": 46698020, "comment_id": 80344166, "body": "From your edit it seems that the csv header is a row of the dataframe. Can you have a look?"}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 0, "creation_date": 1507759415, "post_id": 46698020, "comment_id": 80344186, "body": "If you check <code>df[&#39;Org ID&#39;].eq(&#39;Org ID&#39;).any()</code>, does it return <code>True</code>? It seems you have some undesired values in the ID and Name columns. If you have headers, <code>headers=None</code> should not be used otherwise, you need to add <code>df = df.iloc[1:]</code>."}, {"owner": {"reputation": 1536, "user_id": 3088202, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/be1f7690d14a2a6111b37f9d6558e916?s=128&d=identicon&r=PG&f=1", "display_name": "user3088202", "link": "https://stackoverflow.com/users/3088202/user3088202"}, "edited": false, "score": 0, "creation_date": 1507759446, "post_id": 46698020, "comment_id": 80344200, "body": "It does return true"}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 0, "creation_date": 1507759539, "post_id": 46698020, "comment_id": 80344229, "body": "Try either <code>df = df.iloc[1:]</code> or remove <code>header=None</code>, which reads the header as a row in your data frame."}, {"owner": {"reputation": 1536, "user_id": 3088202, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/be1f7690d14a2a6111b37f9d6558e916?s=128&d=identicon&r=PG&f=1", "display_name": "user3088202", "link": "https://stackoverflow.com/users/3088202/user3088202"}, "edited": false, "score": 0, "creation_date": 1507759659, "post_id": 46698020, "comment_id": 80344263, "body": "I removed the header=None and i get same result"}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 0, "creation_date": 1507760156, "post_id": 46698020, "comment_id": 80344401, "body": "You might need to remove <code>names=name_cols</code> as well."}, {"owner": {"reputation": 1536, "user_id": 3088202, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/be1f7690d14a2a6111b37f9d6558e916?s=128&d=identicon&r=PG&f=1", "display_name": "user3088202", "link": "https://stackoverflow.com/users/3088202/user3088202"}, "edited": false, "score": 0, "creation_date": 1507760838, "post_id": 46698020, "comment_id": 80344614, "body": "I switched to pd.read_csv(path, encoding=&quot;ISO-8859-1&quot;, usecols=[&#39;Org ID&#39;, &#39;Org Name&#39;, &#39;Segment&#39;], index_col=False, header=None) but get ValueError: Usecols do not match names."}, {"owner": {"reputation": 1536, "user_id": 3088202, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/be1f7690d14a2a6111b37f9d6558e916?s=128&d=identicon&r=PG&f=1", "display_name": "user3088202", "link": "https://stackoverflow.com/users/3088202/user3088202"}, "edited": false, "score": 0, "creation_date": 1507760893, "post_id": 46698020, "comment_id": 80344630, "body": "Never mind it works. Forgot to take out the header=None"}, {"owner": {"reputation": 1536, "user_id": 3088202, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/be1f7690d14a2a6111b37f9d6558e916?s=128&d=identicon&r=PG&f=1", "display_name": "user3088202", "link": "https://stackoverflow.com/users/3088202/user3088202"}, "edited": false, "score": 0, "creation_date": 1507760954, "post_id": 46698020, "comment_id": 80344649, "body": "The only issue now is that I still have that first column which i assume is an index column (per image above). I do have index_col set to False."}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "edited": false, "score": 0, "creation_date": 1507761554, "post_id": 46698020, "comment_id": 80344824, "body": "The first column is actually not a column but index, It looks like a column, because of the <code>columns.name</code>. Try <code>df = pd.crosstab([df.A, df.B], df.C).reset_index(); df.columns.name = None</code>, you will see this more clearly."}, {"owner": {"reputation": 1536, "user_id": 3088202, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/be1f7690d14a2a6111b37f9d6558e916?s=128&d=identicon&r=PG&f=1", "display_name": "user3088202", "link": "https://stackoverflow.com/users/3088202/user3088202"}, "edited": false, "score": 0, "creation_date": 1507761651, "post_id": 46698020, "comment_id": 80344849, "body": "Got it. Thank for all your help."}, {"owner": {"reputation": 8257, "user_id": 3568092, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlJHI.png?s=128&g=1", "display_name": "dangom", "link": "https://stackoverflow.com/users/3568092/dangom"}, "edited": false, "score": 0, "creation_date": 1507761759, "post_id": 46698020, "comment_id": 80344880, "body": "I don&#39;t know anything about your needs, but it looks like Segment is a variable, so ideally you&#39;d want to keep it as a column (to keep your <a href=\"http://www.stat.wvu.edu/~jharner/courses/stat623/docs/tidy-dataJSS.pdf\" rel=\"nofollow noreferrer\">data tidy</a> and easy to manipulate later). Is there a specific reason you need to change your df structure? What are you trying to do?"}, {"owner": {"reputation": 1536, "user_id": 3088202, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/be1f7690d14a2a6111b37f9d6558e916?s=128&d=identicon&r=PG&f=1", "display_name": "user3088202", "link": "https://stackoverflow.com/users/3088202/user3088202"}, "reply_to_user": {"reputation": 8257, "user_id": 3568092, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/mlJHI.png?s=128&g=1", "display_name": "dangom", "link": "https://stackoverflow.com/users/3568092/dangom"}, "edited": false, "score": 0, "creation_date": 1507817636, "post_id": 46698020, "comment_id": 80370094, "body": "@dangom I have two dfs. The one with segments and another that has all other org data. I want to add the segment df data as columns to the other org data df using a left join."}], "answers": [{"comments": [{"owner": {"reputation": 1536, "user_id": 3088202, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/be1f7690d14a2a6111b37f9d6558e916?s=128&d=identicon&r=PG&f=1", "display_name": "user3088202", "link": "https://stackoverflow.com/users/3088202/user3088202"}, "edited": false, "score": 0, "creation_date": 1507759054, "post_id": 46698070, "comment_id": 80344076, "body": "Thanks for  quick reply. When I try this something gets messed up. I will update the question with the results in a sec."}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "reply_to_user": {"reputation": 1536, "user_id": 3088202, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/be1f7690d14a2a6111b37f9d6558e916?s=128&d=identicon&r=PG&f=1", "display_name": "user3088202", "link": "https://stackoverflow.com/users/3088202/user3088202"}, "edited": false, "score": 0, "creation_date": 1507759198, "post_id": 46698070, "comment_id": 80344111, "body": "If you just need an indicator of existence, then add <code>df.drop_duplicates</code> might help."}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": false, "score": 2, "last_activity_date": 1507759141, "last_edit_date": 1507759141, "creation_date": 1507758467, "answer_id": 46698070, "question_id": 46698020, "link": "https://stackoverflow.com/questions/46698020/reorganize-pandas-data-frame-to-display-data-horizontal/46698070#46698070", "title": "Reorganize pandas data frame to display data horizontal", "body": "<p>You can use <code>pd.crosstab</code>:</p>\n\n<pre><code>df = df.drop_duplicates()\npd.crosstab([df['Org ID'], df['Org Name']], df['Segment']).reset_index()\n</code></pre>\n\n<hr>\n\n<p><em>Example</em>:</p>\n\n<pre><code>df = pd.DataFrame({\n    'A': ['a', 'a', 'b', 'b', 'c'],\n    'B': [1, 2, 2, 3, 4],\n    'C': ['seg1', 'seg1', 'seg2', 'seg2', 'seg3']\n})\n\ndf = df.drop_duplicates()\npd.crosstab([df.A, df.B], df.C).reset_index()\n#C  A   B   seg1    seg2    seg3\n#0  a   1      1       0    0\n#1  a   2      1       0    0\n#2  b   2      0       1    0\n#3  b   3      0       1    0\n#4  c   4      0       0    1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 2, "last_activity_date": 1507758605, "creation_date": 1507758605, "answer_id": 46698100, "question_id": 46698020, "link": "https://stackoverflow.com/questions/46698020/reorganize-pandas-data-frame-to-display-data-horizontal/46698100#46698100", "title": "Reorganize pandas data frame to display data horizontal", "body": "<p>you can use <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.pivot_table.html\" rel=\"nofollow noreferrer\">pivot_table()</a> method:</p>\n\n<pre><code>df.pivot_table(index=['Org ID','Org Name'], columns='Segment', \n               aggfunc='size', fill_value=0) \\\n  .reset_index()\n</code></pre>\n"}], "owner": {"reputation": 1536, "user_id": 3088202, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/be1f7690d14a2a6111b37f9d6558e916?s=128&d=identicon&r=PG&f=1", "display_name": "user3088202", "link": "https://stackoverflow.com/users/3088202/user3088202"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1507759537, "creation_date": 1507758162, "last_edit_date": 1507759537, "question_id": 46698020, "link": "https://stackoverflow.com/questions/46698020/reorganize-pandas-data-frame-to-display-data-horizontal", "title": "Reorganize pandas data frame to display data horizontal", "body": "<p>I have a data frame that displays which segments a particular organization belongs to. I want to prep the data frame for a left join merge on Org ID with other organization data. </p>\n\n<p>Current, this df displays info top to bottom with each segment (with org id) in a separate row. Below is a sample of the df and an example of where I want to go with it.</p>\n\n<p><strong>Current df structure</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/oNLb3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oNLb3.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Needed df structure</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/7Yapc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7Yapc.png\" alt=\"enter image description here\"></a></p>\n\n<p>The number of segments is capped at 10 and each has a unique name such as Aerospace and Construction. </p>\n\n<p>I have been digging around for a starting point to get this done for a few hours and no luck. </p>\n\n<p>Could anyone provide a starting point for this?</p>\n\n<p><strong>EDIT: Using pd.crosstab</strong></p>\n\n<p>df.info()</p>\n\n<pre><code>&lt;class 'pandas.core.frame.DataFrame'&gt;\nRangeIndex: 13 entries, 0 to 12\nData columns (total 3 columns):\nOrg ID      13 non-null object\nOrg Name    13 non-null object\nSegment     13 non-null object\ndtypes: object(3)\nmemory usage: 392.0+ bytes\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>file = \"sample-data.csv\"\npath = root + file\nname_cols = ['Org ID', 'Org Name', 'Segment']\npull_cols = ['Org ID', 'Org Name', 'Segment']\ndf = pd.read_csv(path, header=None, encoding=\"ISO-8859-1\", names=name_cols, \n                       usecols=pull_cols, index_col=False)\ndf = pd.crosstab([df['Org ID'], df['Org Name']], df['Segment']).reset_index()\ndf.head(10)\n</code></pre>\n\n<p>Result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/rg9yF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rg9yF.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 1197, "user_id": 6327846, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/n0yWJ.jpg?s=128&g=1", "display_name": "Garrett", "link": "https://stackoverflow.com/users/6327846/garrett"}, "edited": false, "score": 0, "creation_date": 1508106975, "post_id": 46698118, "comment_id": 80466721, "body": "give me error <code>NameError at &#47;feed&#47;post&#47;5&#47;like&#47; name &#39;request&#39; is not defined</code>"}, {"owner": {"reputation": 1197, "user_id": 6327846, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/n0yWJ.jpg?s=128&g=1", "display_name": "Garrett", "link": "https://stackoverflow.com/users/6327846/garrett"}, "edited": false, "score": 0, "creation_date": 1508107757, "post_id": 46698118, "comment_id": 80466872, "body": "and doe not add instance to <code>UserNotification </code> model upon post creation."}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "reply_to_user": {"reputation": 1197, "user_id": 6327846, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/n0yWJ.jpg?s=128&g=1", "display_name": "Garrett", "link": "https://stackoverflow.com/users/6327846/garrett"}, "edited": false, "score": 0, "creation_date": 1508142275, "post_id": 46698118, "comment_id": 80477035, "body": "If it&#39;s a method in a class based view, it should be <code>self.request</code> not <code>request</code>."}], "tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": true, "score": 1, "last_activity_date": 1508142203, "last_edit_date": 1508142203, "creation_date": 1507758678, "answer_id": 46698118, "question_id": 46698019, "link": "https://stackoverflow.com/questions/46698019/adding-instances-into-a-different-model/46698118#46698118", "title": "Adding instances into a different model", "body": "<p>You can create an instance with <code>UserNotification()</code> then call save(), or you can use the <code>create</code> shortcut.</p>\n\n<p>In the view you have access to the post and the logged in user. The timestamp will be added automatically and <code>read</code> will default to <code>False</code>, so you just have to decide what to set <code>notify_type</code> to:</p>\n\n<pre><code>obj.likes.add(user)\n#Add notification to UserNotification model\nnotification = UserNotification.objects.create(\n    user=self.request.user,\n    post=obj,\n    notify_type=\"???\"\n)\n</code></pre>\n"}], "owner": {"reputation": 1197, "user_id": 6327846, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/n0yWJ.jpg?s=128&g=1", "display_name": "Garrett", "link": "https://stackoverflow.com/users/6327846/garrett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 46698118, "answer_count": 1, "score": 0, "last_activity_date": 1508142203, "creation_date": 1507758161, "question_id": 46698019, "link": "https://stackoverflow.com/questions/46698019/adding-instances-into-a-different-model", "title": "Adding instances into a different model", "body": "<p>I am trying to make a notification app for my Django project.</p>\n\n<p>I have this as one of my views:</p>\n\n<pre><code>class LikePostToggle(RedirectView):\n    def get_redirect_url(self,pk):\n        obj = get_object_or_404(UserPost,pk=pk)\n        user = self.request.user\n        if user.is_authenticated():\n            if user in obj.likes.all():\n                obj.likes.remove(user)\n            else:\n                obj.likes.add(user)\n                #Add notification to UserNotification model\n                #Auto fill all fields\n        return obj.get_absolute_url()\n</code></pre>\n\n<p>And this is my <code>UserNotification</code> model:</p>\n\n<pre><code>class UserNotification(models.Model):\n    user = models.ForeignKey(User,related_name='user',null=True)\n    post = models.ForeignKey('feed.UserPost',related_name='post-notification')\n    timestamp = models.DateTimeField(auto_now_add=True)\n    notify_type = models.CharField(max_length=6)\n    read = models.BooleanField(default=False)\n\n    def __str__(self):\n        return self.user\n</code></pre>\n\n<p>In the model I think I want the <code>user</code> field to be the user committing the action (Liking, commenting, etc.).</p>\n\n<p>My question is how might I go above making it so that whenever someone likes a post or comments and therefore triggers the <code>LikePostToggle</code> view it also adds an instance to the <code>UserNotification</code> model so that the user can be notified?</p>\n"}, {"tags": ["python", "image", "cv2"], "comments": [{"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 2, "creation_date": 1507758066, "post_id": 46697949, "comment_id": 80343709, "body": "Your code is  slow because you convert the whole image to grayscale again and again, every time you find a colored pixel!"}, {"owner": {"reputation": 3502, "user_id": 2714534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/se2TH.jpg?s=128&g=1", "display_name": "blakev", "link": "https://stackoverflow.com/users/2714534/blakev"}, "edited": false, "score": 0, "creation_date": 1507758243, "post_id": 46697949, "comment_id": 80343777, "body": "It would be much faster to just always convert to grayscale, even if you&#39;re doing it for an image that doesn&#39;t need it. At least then all your input images will be in a consistent format."}, {"owner": {"reputation": 77, "user_id": 4623424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34407004ecf1d8874beb4f9264540180?s=128&d=identicon&r=PG&f=1", "display_name": "khushhall", "link": "https://stackoverflow.com/users/4623424/khushhall"}, "edited": false, "score": 0, "creation_date": 1515943397, "post_id": 46697949, "comment_id": 83484524, "body": "For loading the image in grayscale irrespective whether the input image is grayscale or RGB, you can use the following: <code>img = cv2.imread(&#39;myImg.jpg&#39;, 0)</code>"}], "owner": {"reputation": 1082, "user_id": 3291312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/04b3c46bbd896df4a14549cdcf152e3d?s=128&d=identicon&r=PG&f=1", "display_name": "dward4", "link": "https://stackoverflow.com/users/3291312/dward4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507757809, "creation_date": 1507757809, "question_id": 46697949, "link": "https://stackoverflow.com/questions/46697949/is-there-a-faster-way-than-using-a-for-loop-way-to-check-for-greyscale-in-python", "title": "Is there a faster way than using a for loop way to check for greyscale in python", "body": "<p>I am trying to write a function which determines if an image is grayscale or not, and then convert to grayscale if not, and return that image at the end.</p>\n\n<p>The for loop code below works fine, but it's very slow. Is there a faster way to check for this? I looked through CV2 documentation but couldn't find anything offhand.</p>\n\n<pre><code>import cv2\ndef grey():\n    img = cv2.imread('1.jpg')\n    for x in range(img.shape[0]):\n        for y in range(img.shape[1]):\n            if img[x,y,0] == img[x,y,1] == img[x,y,2]:\n                grey = img\n            else:\n                grey = cv2.cvtColor(img, cv2.COLOR_BGR2GRAY)\n    return grey\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3502, "user_id": 2714534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/se2TH.jpg?s=128&g=1", "display_name": "blakev", "link": "https://stackoverflow.com/users/2714534/blakev"}, "edited": false, "score": 3, "creation_date": 1507757734, "post_id": 46697899, "comment_id": 80343570, "body": "It&#39;s because your variable <code>base2</code> is no longer in scope. You can learn about <a href=\"http://python-textbok.readthedocs.io/en/1.0/Variables_and_Scope.html\" rel=\"nofollow noreferrer\">function scope here</a>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1507757867, "post_id": 46697899, "comment_id": 80343624, "body": "You need to learn about variable scoping rules. You are using local variables. You <i>could</i> make your variables all globally scoped, but that is not a good design approach. Rather, you should be taking data as arguments and returning data from your functions. As an aside, and this is a bit of a terminology nitpick, but Python doesn&#39;t have variable declarations"}], "owner": {"reputation": 11, "user_id": 8723301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/178a7ad6f37ea1c51a28cc2d0fe58625?s=128&d=identicon&r=PG&f=1", "display_name": "panda67", "link": "https://stackoverflow.com/users/8723301/panda67"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507758453, "creation_date": 1507757571, "question_id": 46697899, "link": "https://stackoverflow.com/questions/46697899/user-input-variable-declared-in-function-not-working-in-other-functions-main-in", "title": "user input variable declared in function not working in other functions/main in python?", "body": "<p>One of the functions in my code takes a user inputted number in binary, and another function converts that number to base 10. For some reason my variables are not working right. The function \"base2TO10\" is not recognizing the user input that is defined as \"base2\". How can I fix this and let main run all of my functions?</p>\n\n<pre><code>def isBase2():\n    flag2 = True\n\n    while(flag2 == True):\n        base2 = input(\"Enter a base 2 number: \")\n        try:\n            base2 = int(base2 , 2)\n            flag1 = False\n            return True\n        except ValueError:\n            flag1 = True\n        else:\n            flag1 = True\n    return base2\n\n\n**def base2TO10():\n    b = base2\n    number = 0\n    for idx, num in enumerate(b[::-1]):\n        base2 += int(num)*(2**idx)\n    return number**    \n\n\ndef main():\n\n    if printmenu() == \"2\":\n        askUserValue()\n        isBase2()\n        base2TO10()\n</code></pre>\n"}, {"tags": ["python", "arrays", "numpy", "containment"], "comments": [{"owner": {"reputation": 479, "user_id": 6854567, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZTADTNI83K4/AAAAAAAAAAI/AAAAAAAAAG4/Kz1m_iRuHu8/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/6854567/alex"}, "edited": false, "score": 0, "creation_date": 1507757706, "post_id": 46697852, "comment_id": 80343561, "body": "Looks like the second array contains multiple arrays. if you look at array([[[ &lt;- 3 ["}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1507757910, "post_id": 46697852, "comment_id": 80343645, "body": "<code>theArray</code> isn&#39;t an array. It&#39;s a list."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1507757965, "post_id": 46697852, "comment_id": 80343675, "body": "<code>in</code> for lists assumes that <code>==</code> is an equivalence relation on its elements. <code>==</code> isn&#39;t an equivalence relation on NumPy arrays; it doesn&#39;t even return a boolean. Using <code>in</code> here is essentially meaningless."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1507758271, "post_id": 46697852, "comment_id": 80343789, "body": "I cannot reproduce this, actually, mine fails for both. I&#39;m on numpy <code>&#39;1.13.1&#39;</code>"}, {"owner": {"reputation": 1067, "user_id": 4769035, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/27f6dfcd5cee3d8f265be617bb83049e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4769035/alex"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1507758272, "post_id": 46697852, "comment_id": 80343791, "body": "@user2357112. Oh. Is there an python-elegant way to check if a list contains a certain NumPy array then? Basically I treat arrays as entries and try to do some processing with them"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1507758558, "post_id": 46697852, "comment_id": 80343896, "body": "@juanpa.arrivillaga: <code>pair[0]</code> would have to be the same object as <code>theArray[0]</code> to get True instead of a ValueError."}, {"owner": {"reputation": 1067, "user_id": 4769035, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/27f6dfcd5cee3d8f265be617bb83049e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4769035/alex"}, "edited": false, "score": 0, "creation_date": 1507759039, "post_id": 46697852, "comment_id": 80344075, "body": "Yes, it is the same object"}], "answers": [{"comments": [{"owner": {"reputation": 1067, "user_id": 4769035, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/27f6dfcd5cee3d8f265be617bb83049e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4769035/alex"}, "edited": false, "score": 0, "creation_date": 1507758604, "post_id": 46698056, "comment_id": 80343913, "body": "Yes, <code>theArray</code> is a bad name for a list =) Thanks a lot for showing how the things work! The brains stopped boiling finally =)"}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 2, "last_activity_date": 1507758379, "creation_date": 1507758379, "answer_id": 46698056, "question_id": 46697852, "link": "https://stackoverflow.com/questions/46697852/two-similar-array-in-array-containment-tests-one-passes-the-other-raises-a-val/46698056#46698056", "title": "Two similar array-in-array containment tests. One passes, the other raises a ValueError. Why?", "body": "<p>Using <code>in</code> at all here is a mistake.</p>\n\n<p><code>theArray</code> isn't an array. It's a list. <code>in</code> for lists assumes that <code>==</code> is an equivalence relation on its elements, but <code>==</code> isn't an equivalence relation on NumPy arrays; it doesn't even return a boolean. Using <code>in</code> here is essentially meaningless.</p>\n\n<p>Making <code>theArray</code> an array wouldn't help, because <code>in</code> for arrays makes <a href=\"https://stackoverflow.com/questions/18320624/how-does-contains-work-for-ndarrays\">basically no sense</a>.</p>\n\n<p><code>pair[0] in theArray</code> happens to not raise an exception because of an optimization lists perform. Lists try an <code>is</code> comparison before <code>==</code> for <code>in</code>, and <code>pair[0]</code> happens to be the exact same object as the first element of <code>theArray</code>, so the list never gets around to trying <code>==</code> and being confused by its return value.</p>\n\n<hr>\n\n<p>If you want to check whether a specific object <code>obj</code> is one of the elements of a list <code>l</code> (not just <code>==</code>-equivalent to one of the elements, but actually that object), use <code>any(obj is element for element in l)</code>.</p>\n\n<p>If you want to check whether a NumPy array is \"equal\" to an array in a list of arrays in the sense of having the same shape and equal elements, use <code>any(numpy.array_equal(obj, element) for element in l)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 610, "user_id": 6589136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a171bbd8e33f5513288c062aa3b8ac3?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Buckley", "link": "https://stackoverflow.com/users/6589136/rob-buckley"}, "is_accepted": false, "score": 0, "last_activity_date": 1507758510, "creation_date": 1507758510, "answer_id": 46698080, "question_id": 46697852, "link": "https://stackoverflow.com/questions/46697852/two-similar-array-in-array-containment-tests-one-passes-the-other-raises-a-val/46698080#46698080", "title": "Two similar array-in-array containment tests. One passes, the other raises a ValueError. Why?", "body": "<p>I get the ValueError for both success and failure cases.</p>\n\n<p>as @user2357112 said, the issue is that the elements of the list are numpy arrays, so the == comparison which 'in' depends on doesn't work</p>\n\n<p>but you can use a construction like:</p>\n\n<pre><code>any(np.all(x == p[0]) for x in theArray)\n</code></pre>\n"}], "owner": {"reputation": 1067, "user_id": 4769035, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/27f6dfcd5cee3d8f265be617bb83049e?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/4769035/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 46698056, "answer_count": 2, "score": 0, "last_activity_date": 1507758510, "creation_date": 1507757313, "question_id": 46697852, "link": "https://stackoverflow.com/questions/46697852/two-similar-array-in-array-containment-tests-one-passes-the-other-raises-a-val", "title": "Two similar array-in-array containment tests. One passes, the other raises a ValueError. Why?", "body": "<p>Moar noob Python questions</p>\n\n<p>I have a list of NumPy arrays and want to test if two arrays are inside. Console log:</p>\n\n<pre><code>&gt;&gt;&gt; theArray\n[array([[[213, 742]]], dtype=int32), array([[[127, 740]],\n       [[127, 741]],\n       [[128, 742]],\n       [[127, 741]]], dtype=int32)]\n\n&gt;&gt;&gt; pair[0]\narray([[[213, 742]]], dtype=int32)\n\n&gt;&gt;&gt; pair[1]\narray([[[124, 736]]], dtype=int32)\n\n&gt;&gt;&gt; pair[0] in theArray\nTrue\n\n&gt;&gt;&gt; pair[1] in theArray\nTraceback (most recent call last):\n  File \"...\\pydevd_exec2.py\", line 3, in Exec\n    exec(exp, global_vars, local_vars)\n  File \"&lt;input&gt;\", line 1, in &lt;module&gt;\nValueError: The truth value of an array with more than one element is ambiguous. Use a.any() or a.all()\n</code></pre>\n\n<p><code>pair[0]</code> and <code>pair[1]</code> seem to have absolutely similar characteristics according to the debugger (except the contents). So how are these two cases different? Why could the second one fail while the first does not?</p>\n"}, {"tags": ["python", "numpy", "machine-learning", "neural-network", "sigmoid"], "comments": [{"owner": {"reputation": 4353, "user_id": 3385534, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3d838751adf50adef228a3b32b383575?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/3385534/bob"}, "edited": false, "score": 0, "creation_date": 1511967372, "post_id": 46697840, "comment_id": 82068258, "body": "it optimizes and learns faster than sigmoid only under specific conditions (it lacks some sigmoid drawbacks but has it&#39;s own, e.g. the so called &quot;dead relu&quot; problem etc etc, it&#39;s all much more complicated), also if you need your net to return values between 0 and 1 you will need sigmoid or it&#39;s close alternative anyway, as relu is unbounded. If you want to design neural nets yourself, I&#39;d start somewhere around here: <a href=\"https://medium.com/@karpathy/yes-you-should-understand-backprop-e2f06eab496b\" rel=\"nofollow noreferrer\">medium.com/@karpathy/&hellip;</a>"}, {"owner": {"reputation": 328, "user_id": 8414454, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rEJ6wpSY5_k/AAAAAAAAAAI/AAAAAAAAAIw/paPqUdlmWAA/photo.jpg?sz=128", "display_name": "Ikechukwu Anude", "link": "https://stackoverflow.com/users/8414454/ikechukwu-anude"}, "reply_to_user": {"reputation": 4353, "user_id": 3385534, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3d838751adf50adef228a3b32b383575?s=128&d=identicon&r=PG&f=1", "display_name": "Bob", "link": "https://stackoverflow.com/users/3385534/bob"}, "edited": false, "score": 0, "creation_date": 1512084501, "post_id": 46697840, "comment_id": 82126296, "body": "Thank you for that information. I would like my net to return values between 0 and 1 because I need it to return classical probabilities. I have a question about the ReLU function, why would someone need a function that doesn&#39;t output a value between 0 and 1 and does that mean that the sigmoid and ReLU functions aren&#39;t interchangeable? Also I might have accidentally flagged your comment."}], "answers": [{"tags": [], "owner": {"reputation": 47598, "user_id": 712995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/c7ImO.png?s=128&g=1", "display_name": "Maxim", "link": "https://stackoverflow.com/users/712995/maxim"}, "is_accepted": true, "score": 1, "last_activity_date": 1507809592, "creation_date": 1507809592, "answer_id": 46709071, "question_id": 46697840, "link": "https://stackoverflow.com/questions/46697840/how-to-implement-relu-in-place-of-the-sigmoid-function/46709071#46709071", "title": "How to implement ReLU in place of the Sigmoid Function", "body": "<p>I'd like to add here that there is actually a wide range of ReLu-like activation functions that can be used instead of standard <a href=\"https://en.wikipedia.org/wiki/Rectifier_(neural_networks)\" rel=\"nofollow noreferrer\">ReLu activation</a>:</p>\n\n<ul>\n<li>You've mentioned Leaky ReLu yourself (parametrized by <code>alpha</code>).</li>\n<li><a href=\"https://arxiv.org/abs/1502.01852\" rel=\"nofollow noreferrer\">Parametric Rectified Linear Unit</a> (PReLU). The formula is the same as Leaky ReLu, but allows the coefficient <code>alpha</code> to be learned. See also <a href=\"https://datascience.stackexchange.com/questions/18583/what-is-the-difference-between-leakyrelu-and-prelu\">this discussion</a>.</li>\n<li><a href=\"https://arxiv.org/abs/1511.07289\" rel=\"nofollow noreferrer\">Exponential linear unit</a> (ELU), which try to make the mean activations closer to zero which speeds up learning:</li>\n</ul>\n\n<p><a href=\"https://i.stack.imgur.com/6W7Dx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6W7Dx.png\" alt=\"elu formula\"></a></p>\n\n<ul>\n<li><a href=\"https://arxiv.org/abs/1706.02515\" rel=\"nofollow noreferrer\">Scaled exponential linear unit</a> (SELU) has been published very recently. It's an extension of ELU, with a specific choice of parameter, which has an additional normalizing effect and helps to learn faster.</li>\n</ul>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Activation_function#Comparison_of_activation_functions\" rel=\"nofollow noreferrer\">Here's the list</a> of all activations and their derivatives.</p>\n"}], "owner": {"reputation": 328, "user_id": 8414454, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rEJ6wpSY5_k/AAAAAAAAAAI/AAAAAAAAAIw/paPqUdlmWAA/photo.jpg?sz=128", "display_name": "Ikechukwu Anude", "link": "https://stackoverflow.com/users/8414454/ikechukwu-anude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1978, "favorite_count": 0, "accepted_answer_id": 46709071, "answer_count": 1, "score": 2, "last_activity_date": 1507809592, "creation_date": 1507757247, "question_id": 46697840, "link": "https://stackoverflow.com/questions/46697840/how-to-implement-relu-in-place-of-the-sigmoid-function", "title": "How to implement ReLU in place of the Sigmoid Function", "body": "<pre><code>import numpy as np \n\nalpha = 0.0251 # as close to true alpha as possible\ndef nonlinear(x, deriv=False):\n  if(deriv==True):\n    return x*(1-x)\n  return 1/(1+np.e**(-x))\n\n#seed\nnp.random.seed(1)\n\n#testing sample\ntest_x = np.array([[251,497,-246],\n              [299,249,50],\n              [194,180,14],\n              [140,148,-8],\n              [210,140,70]])\n#Input Array - This input will be taken directly from a Pong game\nX = np.array([[198,200,-2],\n          [90, 280,-190],\n          [84, 256,-172],\n          [140,240,-100],\n          [114,216,-102],\n          [72, 95,-23],\n          [99, 31, 68],\n          [144, 20, 124],\n          [640, 216,424],\n          [32, 464,-432],\n          [176, 64,112],\n          [754, 506,248],\n          [107, 104,3],\n          [116,101,15]])\n\n#output array - if ball_pos - paddle &gt; 0 move up else move down\nY = np.array([[0,0,0,0,0,0,1,1,1,0,1,1,1,1,]]).T \n\nsyn0 = 2*np.random.random((3,14))-1\nsyn1 = 2*np.random.random((14,14))-1\n\nfor j in range(60000):\n\n  #forward propagation \n  l0 = X\n  l1 = nonlinear(np.dot(l0, syn0))\n  l2 = nonlinear(np.dot(l1, syn1))\n\n  #how much did we miss \n  l2_error = Y - l2 \n\n  #multiply how much missed by the slope of sigmoid at the value in l1 \n  l2_delta = l2_error * nonlinear(l2, True)\n\n  #how much did l1 contribute to l2 error \n  #(according to the weights)\n  l1_error = l2_delta.dot(syn1.T)\n\n  #in what direction is the target l1?\n  # Sure?\n  l1_delta = l1_error*nonlinear(l1,True)\n\n  #update weight\n  syn1 += alpha * (l1.T.dot(l2_delta))\n  syn0 += alpha * (l0.T.dot(l1_delta))\n\n  # display error \n  if(j % 10000) == 0:\n    print(\"ERROR: \" + str(np.mean(np.abs(l2_error))))\n\n\n#Testing Forward propagation\nl0_test = test_x\nl1_test = nonlinear(np.dot(l0_test,syn0))\nl2_test = nonlinear(np.dot(l1_test,syn1))\n\n#Dress up the array (make it look nice)\nl2_test_output = []\nfor x in range(len(l2_test)):\n  l2_test_output.append(l2_test[x][0])\n\nprint(\"Test Output\")\nprint(l2_test_output)\n\n#Put all the l2 data in a way I could see it: Just the first probabilites \nl2_output = []\nfor x in range(len(l2)):\n  l2_output.append(l2[x][0])\n\nprint(\"Output\")\nprint(l2_output)\n</code></pre>\n\n<p>This code is supposed to take in a group of three numbers [(value_1),(value_2),(value_1-value_2)] and return either a \"0\" if the difference between the first and second value is negative or a \"1\" if the difference is positive. So far it actually works very well.</p>\n\n<p>Here is the output:\n<code>ERROR: 0.497132186092\nERROR: 0.105081486632\nERROR: 0.102115299177\nERROR: 0.100813655802\nERROR: 0.100042420179\nERROR: 0.0995185781466\nTest Output\n[0.0074706006801269686, 0.66687458928464094, 0.66687458928463983, 0.66686236694464551, 0.98341439176739631]\nOutput\n[0.66687459245609326, 0.00083944690766060215, 0.00083946471285455484, 0.0074706634783305243, 0.0074706634765733968, 0.007480987498372226, 0.99646513183073093, 0.99647100131874755, 0.99646513180692531, 0.00083944572383107523, 0.99646513180692531, 0.98324165810211861, 0.66687439729829612, 0.66687459321626519]</code>    ERROR: 0.497132186092</p>\n\n<p>As you can see the error given the alpha = 0.0251 (for gradient descent - found this through trial and error) is only about 9.95 %. </p>\n\n<p>Since I made this program, I've learned that leaky RelU is a better alternative to the Sigmoid function since it optimizes and learns faster than the Sigmoid. I want to implement the leaky RelU function using numpy  in this program but I'm not sure of where to start and more particularly what its derivative is.</p>\n\n<p>How can I implement leaky RelU into this neural net?</p>\n"}, {"tags": ["python", "filtering", "jupyter-notebook"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8042396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/675db082f429724e45232cf2df5d3ba4?s=128&d=identicon&r=PG&f=1", "display_name": "user367640", "link": "https://stackoverflow.com/users/8042396/user367640"}, "edited": false, "score": 0, "creation_date": 1507760717, "post_id": 46698211, "comment_id": 80344581, "body": "Ok. I understand now. Thank you for the response!"}], "tags": [], "owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "is_accepted": true, "score": 1, "last_activity_date": 1507759216, "creation_date": 1507759216, "answer_id": 46698211, "question_id": 46697836, "link": "https://stackoverflow.com/questions/46697836/butterworth-filter-using-scipy/46698211#46698211", "title": "Butterworth Filter Using Scipy", "body": "<p>The cutoff frequencies in this method are normalized by the Nyquist frequency. (The highest resolvable frequency in the signal.) The Nyquist frequency is, by definition, half the sampling rate of the signal. In your case, that's 500Hz. So you should have <code>Wn = 0.5</code>, which comes from:</p>\n\n<pre><code>cutoff = 250.0\nFs = 1000.0\nWn = cutoff / (Fs / 2.0)\n</code></pre>\n\n<p>I think your confusion about radians comes from the documentation. It's not saying that you need to somehow convert your frequencies into radians. The Nyquist frequency <em>equals</em> pi radians per sample, and the sampling rate <em>equals</em> 2*pi radians per sample. This is called \"half-cycles per sample\". See the Wikipedia page on <a href=\"https://en.wikipedia.org/wiki/Normalized_frequency_(unit)\" rel=\"nofollow noreferrer\">Normalized frequency</a>, which has more information.</p>\n"}], "owner": {"reputation": 11, "user_id": 8042396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/675db082f429724e45232cf2df5d3ba4?s=128&d=identicon&r=PG&f=1", "display_name": "user367640", "link": "https://stackoverflow.com/users/8042396/user367640"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1651, "favorite_count": 0, "accepted_answer_id": 46698211, "answer_count": 1, "score": 0, "last_activity_date": 1507759216, "creation_date": 1507757232, "question_id": 46697836, "link": "https://stackoverflow.com/questions/46697836/butterworth-filter-using-scipy", "title": "Butterworth Filter Using Scipy", "body": "<p>I have a question about the following parameters regarding the scipy.signal.butter function. I am using python and running it in jupyter notebook.</p>\n\n<p>Link for the documentation below:</p>\n\n<p><a href=\"https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.signal.butter.html\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.signal.butter.html</a></p>\n\n<p>I'm trying to implement a low pass nth order butterworth filter. And I'm confused about the parameter Wn. If I have a sampling frequency of let's say 1000Hz. And I would like to cut off frequencies above 250Hz. From my understanding of the documentation, Wn would have to be the following:</p>\n\n<p>fs = 1000 * 2pi</p>\n\n<p>fc = 250 * 2pi</p>\n\n<p>Wn = fc/(fs/2)</p>\n\n<p>Is this correct? I used the following process above, and my response did not seem accurate. But I don't have any expectation of the output so it could be right. Thank you.</p>\n"}, {"tags": ["python", "itk", "simpleitk"], "answers": [{"comments": [{"owner": {"reputation": 183, "user_id": 4869051, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f0febb525853e3d2c01739f9b40099d3?s=128&d=identicon&r=PG&f=1", "display_name": "Q_1.0", "link": "https://stackoverflow.com/users/4869051/q-1-0"}, "edited": false, "score": 0, "creation_date": 1508876600, "post_id": 46901266, "comment_id": 80786196, "body": "Thanks for your reply. I tried sitk.InverseDisplacementField(disp_field) before and it just would not converge."}, {"owner": {"reputation": 685, "user_id": 1310934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7f2e0ec444c5147b6df51f973123db6?s=128&d=identicon&r=PG", "display_name": "g.stevo", "link": "https://stackoverflow.com/users/1310934/g-stevo"}, "reply_to_user": {"reputation": 183, "user_id": 4869051, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f0febb525853e3d2c01739f9b40099d3?s=128&d=identicon&r=PG&f=1", "display_name": "Q_1.0", "link": "https://stackoverflow.com/users/4869051/q-1-0"}, "edited": false, "score": 0, "creation_date": 1509401185, "post_id": 46901266, "comment_id": 80996942, "body": "Have you tried sitk.InverseDisplacementField(disp_field, 1)  i.e running it with a single iteration rather than 10?"}], "tags": [], "owner": {"reputation": 685, "user_id": 1310934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7f2e0ec444c5147b6df51f973123db6?s=128&d=identicon&r=PG", "display_name": "g.stevo", "link": "https://stackoverflow.com/users/1310934/g-stevo"}, "is_accepted": false, "score": 0, "last_activity_date": 1508812194, "creation_date": 1508812194, "answer_id": 46901266, "question_id": 46697791, "link": "https://stackoverflow.com/questions/46697791/how-to-use-simpleitk-get-inverse-displacement-field/46901266#46901266", "title": "how to use simpleitk get inverse displacement field", "body": "<p>The following is the specification for running the <code>InvertDisplacementField</code> procedural interface</p>\n\n<pre><code>Image itk::simple::InvertDisplacementField  (const Image &amp; image1,\n        uint32_t    maximumNumberOfIterations = 10u,\n        double      maxErrorToleranceThreshold = 0.1,\n        double      meanErrorToleranceThreshold = 0.001,\n        bool    enforceBoundaryCondition = true) \n</code></pre>\n\n<p>So I think that by you passing the </p>\n\n<pre><code>disp_field.GetSize(),disp_field.GetOrigin(),disp_field.GetSpacing(), subsamplingFactor=16\n</code></pre>\n\n<p>as parameters 2 to 5 means you are passing the interface not what is expected?</p>\n\n<p>Try just running <code>disp_field_inv = sitk.InverseDisplacementField(disp_field)</code></p>\n\n<p>and see if it iterates to a result!</p>\n"}, {"tags": [], "owner": {"reputation": 899, "user_id": 949028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/98b73c08b0fab02d483f2e9e0aca03f2?s=128&d=identicon&r=PG", "display_name": "Andreas Schuh", "link": "https://stackoverflow.com/users/949028/andreas-schuh"}, "is_accepted": false, "score": 0, "last_activity_date": 1571318995, "creation_date": 1571318995, "answer_id": 58433896, "question_id": 46697791, "link": "https://stackoverflow.com/questions/46697791/how-to-use-simpleitk-get-inverse-displacement-field/58433896#58433896", "title": "how to use simpleitk get inverse displacement field", "body": "<p>For what it's worth after all these years, just wanted to point out that the original question and (so far only) answer by g.stevo mix-up two different filters available in SimpleITK, namely:</p>\n\n<ul>\n<li><code>sitk.InverseDisplacementField</code></li>\n<li><code>sitk.InvertDisplacementField</code></li>\n</ul>\n\n<p>Each of these procedural APIs and their respective image filters have different <code>Execute</code> function arguments.</p>\n"}], "owner": {"reputation": 183, "user_id": 4869051, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f0febb525853e3d2c01739f9b40099d3?s=128&d=identicon&r=PG&f=1", "display_name": "Q_1.0", "link": "https://stackoverflow.com/users/4869051/q-1-0"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 858, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1571318995, "creation_date": 1507757045, "question_id": 46697791, "link": "https://stackoverflow.com/questions/46697791/how-to-use-simpleitk-get-inverse-displacement-field", "title": "how to use simpleitk get inverse displacement field", "body": "<p>I just moved from matlab to python recently so I can use simpleitk and sorry if this is a dumb question.</p>\n\n<p>I have a transformation tx after demons registration using simpleitk. I wish to get the displacement field and its inverse by doing the following,</p>\n\n<pre><code>disp_field = tx.GetDisplacementField()\ndisp_field_inv = tx.GetInverseDisplacementField()\n</code></pre>\n\n<p>It turns out disp_field is exactly what I need --- an image volume of 256*256*176. But disp_field_inv is an empty array. Does anyone know why?</p>\n\n<p>Then I tried the following,</p>\n\n<pre><code>disp_field_inv = sitk.InverseDisplacementField(disp_field,disp_field.GetSize(),disp_field.GetOrigin(),disp_field.GetSpacing(),\n                                           subsamplingFactor=16)\n</code></pre>\n\n<p>But python is just running like forever. Does anybody know how to do it properly?</p>\n"}, {"tags": ["python", "multithreading", "restart"], "comments": [{"owner": {"reputation": 6220, "user_id": 2216621, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/10c8cf1cdc1383558bd4b78a19d1b524?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Watts", "link": "https://stackoverflow.com/users/2216621/rob-watts"}, "edited": false, "score": 0, "creation_date": 1507757142, "post_id": 46697741, "comment_id": 80343300, "body": "So it does throw an exception? Why don&#39;t you have the <code>try-except</code> block inside of your <code>while True</code> loop?"}], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 2, "last_activity_date": 1507757259, "creation_date": 1507757259, "answer_id": 46697844, "question_id": 46697741, "link": "https://stackoverflow.com/questions/46697741/restart-thread-after-exception-on-python/46697844#46697844", "title": "Restart thread after exception on Python", "body": "<p>threads cannot be restarted in python ... of coarse you could just implement your own \"thread\" class thats not really a thread</p>\n\n<pre><code>class ftp_id(object): # this is a bad name for a class please see pep8\n    def __init__(self, ftpID):\n        super(ftp_id,self)\n        self.ftpID = ftpID\n        self.thread = None\n        self.thread_stop = False\n    def __getattr__(self):\n        return getattr(self.thread)\n    def start(self):\n        if self.thread:\n           self.thread_stop = True\n           self.thread.terminate()\n           self.thread.join()\n\n        self.thread = threading.Thread(target = self.run)\n        self.thread.start()\n    def run(self):\n        self.thread_stop = False\n        while not self.thread_stop:\n            with verrou:\n                siteID = self.ftpID\n                directory = str(datetime.now())[:-16].replace('-', '')\n                filename = siteID + '_' + str(datetime.now())[:-7].replace(':', '').replace(' ', '_').replace('-', '') + '.txt'\n                dictstr = myExtract(siteID)\n                myWriteFile(directory, filename, dictstr)\n                pendingtime = myWaiting(siteID, dictstr)\n            time.sleep(pendingtime)\n</code></pre>\n\n<p>although i dont know if this actually answers your question</p>\n"}, {"tags": [], "owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "is_accepted": false, "score": 5, "last_activity_date": 1507757547, "creation_date": 1507757547, "answer_id": 46697894, "question_id": 46697741, "link": "https://stackoverflow.com/questions/46697741/restart-thread-after-exception-on-python/46697894#46697894", "title": "Restart thread after exception on Python", "body": "<p>Threads cannot be restarted. So you should put the exception handling inside the <code>while</code>-block, and never exit the loop:</p>\n\n<pre><code>def download(server):\n    while True:\n        try:\n            with verrou:\n                now = datetime.now()\n                directory = '{:%Y%m%d}'.format(now)\n                filename = '{}_{:%Y%m%d_%H%M%S}.txt'.format(server, now)\n                dictstr = myExtract(server)\n                myWriteFile(directory, filename, dictstr)\n                pendingtime = myWaiting(server, dictstr)\n            time.sleep(pendingtime)\n        except:\n            # restart\n            pass\n\nthreads = [\n    Thread(target=download, args=(server,))\n    for server in [\"ftp-01\", \"ftp-02\", \"ftp-03\", \"ftp-04\"\n]\n\nfor thread in threads:\n    thread.start()\n\nfor thread in threads:\n    thread.join()\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 8655511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cbd92094a2025163e421dff80209a7d?s=128&d=identicon&r=PG&f=1", "display_name": "Wansonce", "link": "https://stackoverflow.com/users/8655511/wansonce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4814, "favorite_count": 2, "answer_count": 2, "score": 4, "last_activity_date": 1507757547, "creation_date": 1507756791, "question_id": 46697741, "link": "https://stackoverflow.com/questions/46697741/restart-thread-after-exception-on-python", "title": "Restart thread after exception on Python", "body": "<p>I wrote this script in order to extract metadata from data on specific ftp then save it on specific directory and waits a random time and extract again etc... \nSo there is 2 points : \nFirst : to extract from specific ftp \nSecond : to save it and wait a random time which depends of the ftp used.</p>\n\n<p>Sometime I have timeout issue from ftp. When it occurs there is no extract, save or waiting from the thread anymore. The others thread continue to work until they meet a timeout issue too.</p>\n\n<p>I tried to catch exception in order to \"restart\" the thread which concerns by the ftp timeout issue. But nothing changes.</p>\n\n<p>Someone please can help me to find a way to \"restart\" the thread?</p>\n\n<p>Many thank's</p>\n\n<pre><code>class ftp_id(Thread):\n    def __init__(self, ftpID):\n        Thread.__init__(self)\n        self.ftpID = ftpID\n    def run(self):\n        while True:\n            with verrou:\n                siteID = self.ftpID\n                directory = str(datetime.now())[:-16].replace('-', '')\n                filename = siteID + '_' + str(datetime.now())[:-7].replace(':', '').replace(' ', '_').replace('-', '') + '.txt'\n                dictstr = myExtract(siteID)\n                myWriteFile(directory, filename, dictstr)\n                pendingtime = myWaiting(siteID, dictstr)\n            time.sleep(pendingtime)\n        except :\n            self.stop = True\n            self.stop = False\n            self.start()\n            self.join()\n\nthread_01 = ftp_id(\"ftp-01\")\nthread_02 = ftp_id(\"ftp-02\")\nthread_03 = ftp_id(\"ftp-03\")\nthread_04 = ftp_id(\"ftp-04\")\n\nthread_01.start()\nthread_02.start()\nthread_03.start()\nthread_04.start()\n\nthread_01.join()\nthread_02.join()\nthread_03.join()\nthread_04.join()\n</code></pre>\n"}, {"tags": ["python", "pexpect", "pxssh"], "comments": [{"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1507757054, "post_id": 46697739, "comment_id": 80343253, "body": "Can you try it out on a system that you have control over (or has a cooperative administrator)? It&#39;s a lot easier to troubleshoot if you can see what&#39;s going on at both ends."}, {"owner": {"reputation": 23, "user_id": 8761629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/983bdf4d54dc3c3973aa7903a186b693?s=128&d=identicon&r=PG&f=1", "display_name": "E. Zh", "link": "https://stackoverflow.com/users/8761629/e-zh"}, "reply_to_user": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1507757218, "post_id": 46697739, "comment_id": 80343335, "body": "@Acccumulation I have control on all test machines. Then how to do? can you please give more details? For example, I know the exception should be &quot;no connection&quot; as it&#39;s a windows machine and manual ssh will fail, but it still goes to &quot;wrong password&quot; printout....."}], "owner": {"reputation": 23, "user_id": 8761629, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/983bdf4d54dc3c3973aa7903a186b693?s=128&d=identicon&r=PG&f=1", "display_name": "E. Zh", "link": "https://stackoverflow.com/users/8761629/e-zh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507760532, "creation_date": 1507756784, "last_edit_date": 1507760532, "question_id": 46697739, "link": "https://stackoverflow.com/questions/46697739/differentiate-no-connection-and-wrong-password-using-pxssh-in-python", "title": "differentiate no connection and wrong password using pxssh in python", "body": "<p>I am testing how to differentiate between \"no connection\" and \"wrong password\" for ssh login. My ssh class is like the following</p>\n\n<pre><code>class SSH(object):\n  def __init__(self, ip):\n    self.ip = ip\n  def connect (self):\n    try:\n      connection = pxssh.pxssh()\n      connection.login(self.ip, \"user\", \"password\")\n      print \"success\"\n      return\n    except pexpect.EOF:\n      print \"no connection\"\n      return\n    except pxssh.ExceptionPxssh as e:\n      print \"wrong password\"\n      return\n</code></pre>\n\n<p>But it looks like in some cases even there is no ssh connection or connection timeout (such as ssh to a windows), it still throws the exception of <code>pxssh.ExceptionPxssh</code> instead of <code>pexpect.EOF</code>. But in other cases it works fine. </p>\n\n<p>Could anyone give some advice what's the issue and how to fix?</p>\n"}, {"tags": ["python", "selenium"], "comments": [{"owner": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1507757246, "post_id": 46697675, "comment_id": 80343343, "body": "Does your actual code have the same indentation as the code that you&#39;ve presented?"}, {"owner": {"reputation": 19, "user_id": 8634820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VsOXW.png?s=128&g=1", "display_name": "4eller", "link": "https://stackoverflow.com/users/8634820/4eller"}, "reply_to_user": {"reputation": 2261, "user_id": 8544123, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f32b871be77d8c71efc294359b300367?s=128&d=identicon&r=PG&f=1", "display_name": "Acccumulation", "link": "https://stackoverflow.com/users/8544123/acccumulation"}, "edited": false, "score": 0, "creation_date": 1507757763, "post_id": 46697675, "comment_id": 80343586, "body": "No it does not, i&#39;ll fix that real quick @acccumulation"}, {"owner": {"reputation": 3502, "user_id": 2714534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/se2TH.jpg?s=128&g=1", "display_name": "blakev", "link": "https://stackoverflow.com/users/2714534/blakev"}, "edited": false, "score": 0, "creation_date": 1507758086, "post_id": 46697675, "comment_id": 80343719, "body": "<code>driver.close()</code> closes the entire browser, which triggers the <code>driver.quit()</code>. I don&#39;t see an easy way to close a tab/window when you have more than one going. As a rule of thumb you want to avoid switching window handles."}, {"owner": {"reputation": 19, "user_id": 8634820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VsOXW.png?s=128&g=1", "display_name": "4eller", "link": "https://stackoverflow.com/users/8634820/4eller"}, "edited": false, "score": 0, "creation_date": 1507758512, "post_id": 46697675, "comment_id": 80343877, "body": "driver.close() was closing opened tabs without closing the entire browser before"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 8634820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VsOXW.png?s=128&g=1", "display_name": "4eller", "link": "https://stackoverflow.com/users/8634820/4eller"}, "edited": false, "score": 0, "creation_date": 1507763060, "post_id": 46698785, "comment_id": 80345252, "body": "Amazing answer! I thank you, I actually learned something new and interesting there :) @JeffC"}, {"owner": {"reputation": 19, "user_id": 8634820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VsOXW.png?s=128&g=1", "display_name": "4eller", "link": "https://stackoverflow.com/users/8634820/4eller"}, "edited": false, "score": 0, "creation_date": 1507821099, "post_id": 46698785, "comment_id": 80372625, "body": "Hey @JeffC i&#39;m getting a timeout error on the WebDriverWait, it&#39;s also not clicking the realtor links printing them out. It just clicks on the listing, brings up the page and sits there."}], "tags": [], "owner": {"reputation": 18006, "user_id": 2386774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dea7da142cb7e85d5d5a8576e2625431?s=128&d=identicon&r=PG", "display_name": "JeffC", "link": "https://stackoverflow.com/users/2386774/jeffc"}, "is_accepted": true, "score": 0, "last_activity_date": 1507762647, "creation_date": 1507762647, "answer_id": 46698785, "question_id": 46697675, "link": "https://stackoverflow.com/questions/46697675/how-to-dismiss-a-method-when-except-block-is-run-in-a-try-except/46698785#46698785", "title": "How to dismiss a method when except block is run in a try-except", "body": "<p>In my opinion, using exceptions as logic flow is not a good practice. Exceptions should be exceptional... they should indicate when something unexpectedly wrong happened.</p>\n\n<p>Instead, use <code>find_elements_*</code> (plural) and check if the collection returned is empty. If it's not empty, that means that the link exists, click on it, etc. If the collection is empty, return to home and start the next loop.</p>\n\n<pre><code>for i in range(1,9):\n    listing_page = driver.find_element_by_xpath('//*[@id=\"m_property_lst_cnt_realtor_more_'+str(i)+'\"]').click()\n    realtor_url = driver.find_elements_by_xpath('//*[@id=\"lblMediaLinks\"]/a')\n    if (len(realtor_url)) &gt; 0\n        realtor_url[0].click\n        WebDriverWait(driver, 10).until(lambda d: len(driver.window_handles) == 2)\n        driver.switch_to_window(driver.window_handles[1])\n        driver.close()\n        driver.switch_to_window(driver.window_handles[0])\n    driver.get(home_page)\n</code></pre>\n\n<p>BTW, <code>.click()</code> still doesn't return anything so assigning its return to a variable will never return anything but <code>null</code> so I removed that part.</p>\n"}], "owner": {"reputation": 19, "user_id": 8634820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/VsOXW.png?s=128&g=1", "display_name": "4eller", "link": "https://stackoverflow.com/users/8634820/4eller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 46698785, "answer_count": 1, "score": 0, "last_activity_date": 1507762647, "creation_date": 1507756507, "last_edit_date": 1507758433, "question_id": 46697675, "link": "https://stackoverflow.com/questions/46697675/how-to-dismiss-a-method-when-except-block-is-run-in-a-try-except", "title": "How to dismiss a method when except block is run in a try-except", "body": "<p>I'm just working on a simple script that goes through real estate listings and collects agents personal websites. I ran into an issue when I came across a listing where the agent didn't have a website in which case the script stopped working. Now i've put in a try-except which works until the except block is run, when that happens the whole browser closes. </p>\n\n<pre><code>    time.sleep(15)\nfor i in range(1,9):\n    listing_page = driver.find_element_by_xpath('//*[@id=\"m_property_lst_cnt_realtor_more_'+str(i)+'\"]').click()\n    try:\n        realtor_url = driver.find_element_by_xpath('//*[@id=\"lblMediaLinks\"]/a').click()\n        WebDriverWait(driver, 10).until(lambda d: len(driver.window_handles) == 2)\n        driver.switch_to_window(driver.window_handles[1])\n        WebDriverWait(driver, 10)\n    except:\n           print(\"Not found\")\n           continue\n    driver.close()\n    driver.switch_to_window(driver.window_handles[0])\n    driver.get(home_page)\n    time.sleep(10)\n</code></pre>\n\n<p>Is there anyway I can revert back to the home page and start the loop again when the except block is run? Then if it's not; the loop runs as usual?</p>\n"}, {"tags": ["python", "python-3.x", "pygame", "sprite"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1507766644, "post_id": 46697502, "comment_id": 80346093, "body": "change it to <code>calculate_new_xy(self.rect.center,...)</code> and then access x as [0] and y as [1] and set your speed to 2 ... it should work"}], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": true, "score": 1, "last_activity_date": 1507766697, "last_edit_date": 1507766697, "creation_date": 1507755936, "answer_id": 46697552, "question_id": 46697502, "link": "https://stackoverflow.com/questions/46697502/how-to-move-a-sprite-according-to-an-angle-in-pygame/46697552#46697552", "title": "How to move a sprite according to an angle in Pygame", "body": "<p>you just need a little basic trig</p>\n\n<pre><code>def calculat_new_xy(old_xy,speed,angle_in_radians):\n    new_x = old_xy.X + (speed*math.cos(angle_in_radians))\n    new_y = old_xy.Y + (speed*math.sin(angle_in_radians))\n    return new_x, new_y\n</code></pre>\n\n<p>--- edit ---</p>\n\n<p>Here is your code from above edited to work</p>\n\n<pre><code>import pygame, math, time\nscreen=pygame.display.set_mode((320,240))\nclock=pygame.time.Clock()\npygame.init()\ndef calculate_new_xy(old_xy,speed,angle_in_radians):\n    new_x = old_xy[0] + (speed*math.cos(angle_in_radians))\n    new_y = old_xy[1] + (speed*math.sin(angle_in_radians))\n    return new_x, new_y\nclass Bullet(pygame.sprite.Sprite):\n    def __init__(self,x,y,direction,speed):\n            pygame.sprite.Sprite.__init__(self)\n            self.image=pygame.Surface((16, 16))\n            self.image.fill((255,0,0))\n            self.rect=self.image.get_rect()\n            self.rect.center=(x,y)\n            self.direction=math.radians(direction)\n            self.speed=speed\n    def update(self):\n            self.rect.center=calculate_new_xy(self.rect.center,self.speed,self.direction)\nspr=pygame.sprite.Group()\nbullet=Bullet(160,120,45,2); spr.add(bullet)\nplay=True\nwhile play:\n    clock.tick(60)\n    for ev in pygame.event.get():\n        if ev.type == pygame.QUIT:\n            play=False\n    screen.fill((0,0,0))\n    spr.update()\n    spr.draw(screen)\n    pygame.display.flip()\npygame.quit()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 8754481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kROzT.png?s=128&g=1", "display_name": "DarkBlood202", "link": "https://stackoverflow.com/users/8754481/darkblood202"}, "edited": false, "score": 0, "creation_date": 1507760915, "post_id": 46698257, "comment_id": 80344638, "body": "I really appreciate your answer... But I&#39;m afraid to say that...it&#39;s a little confusing... Also... I don&#39;t know if that&#39;s what i wanted to get... Probably I should have said something like: I would like to define a function which creates a &quot;moving object&quot; that moves in a certain direction... Maybe... if you explain it to me... in simpler...words...? (I&#39;m sorry, this is a little hard for me to understand...)"}, {"owner": {"reputation": 35, "user_id": 8754481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kROzT.png?s=128&g=1", "display_name": "DarkBlood202", "link": "https://stackoverflow.com/users/8754481/darkblood202"}, "edited": false, "score": 0, "creation_date": 1507761231, "post_id": 46698257, "comment_id": 80344726, "body": "I guess...I don&#39;t"}, {"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "reply_to_user": {"reputation": 35, "user_id": 8754481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kROzT.png?s=128&g=1", "display_name": "DarkBlood202", "link": "https://stackoverflow.com/users/8754481/darkblood202"}, "edited": false, "score": 0, "creation_date": 1507762865, "post_id": 46698257, "comment_id": 80345200, "body": "Okay, I can&#39;t and shouldn&#39;t explain vector math here, so I recommend to go to school. :P You can learn it for example on <a href=\"https://www.khanacademy.org/math/linear-algebra/vectors-and-spaces\" rel=\"nofollow noreferrer\">khanacademy.org</a>, but better learn trigonometry first."}, {"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "reply_to_user": {"reputation": 35, "user_id": 8754481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kROzT.png?s=128&g=1", "display_name": "DarkBlood202", "link": "https://stackoverflow.com/users/8754481/darkblood202"}, "edited": false, "score": 0, "creation_date": 1507762929, "post_id": 46698257, "comment_id": 80345216, "body": "Pygame&#39;s vectors use trigonometry under the hood for the rotation, so you don&#39;t have to deal with it directly. The movement is pretty simple: Imagine you had separate <code>pos_x</code>, <code>pos_y</code>, <code>velocity_x</code> and <code>velocity_y</code> attributes, then you would just move the sprite by adding <code>pos_x += velocity_x</code> and <code>pos_y += velocity_y</code>. With vectors you can just do this in one line by adding the two vectors: <code>pos += velocity</code>."}, {"owner": {"reputation": 35, "user_id": 8754481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kROzT.png?s=128&g=1", "display_name": "DarkBlood202", "link": "https://stackoverflow.com/users/8754481/darkblood202"}, "edited": false, "score": 0, "creation_date": 1507763227, "post_id": 46698257, "comment_id": 80345294, "body": "Actually... I had trigonometry at highschool... But I don&#39;t know exactly how to apply it here...  I understood that brief explanation, by the way..."}, {"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "reply_to_user": {"reputation": 35, "user_id": 8754481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kROzT.png?s=128&g=1", "display_name": "DarkBlood202", "link": "https://stackoverflow.com/users/8754481/darkblood202"}, "edited": false, "score": 0, "creation_date": 1507766415, "post_id": 46698257, "comment_id": 80346040, "body": "Check out the added trigonometry solution."}, {"owner": {"reputation": 511, "user_id": 2255257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/23ee9039ad14c98b370abad89d2bfbe3?s=128&d=identicon&r=PG", "display_name": "Mat Whiteside", "link": "https://stackoverflow.com/users/2255257/mat-whiteside"}, "edited": false, "score": 0, "creation_date": 1528149018, "post_id": 46698257, "comment_id": 88388223, "body": "I have implemented your solution to solve the inaccuracy problem caused by the trig. solution however the sprite has a vibrating effect when it isn&#39;t moving straight along an axis, eg, if the angle = 110 deg. Any ideas what this could be being caused by?"}, {"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "reply_to_user": {"reputation": 511, "user_id": 2255257, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/23ee9039ad14c98b370abad89d2bfbe3?s=128&d=identicon&r=PG", "display_name": "Mat Whiteside", "link": "https://stackoverflow.com/users/2255257/mat-whiteside"}, "edited": false, "score": 0, "creation_date": 1528207500, "post_id": 46698257, "comment_id": 88413548, "body": "@MatWhiteside that happens because the images have to be blitted at integer coordinates, since computer monitors don&#39;t have fractional pixels. The actual position which consists of floats is truncated to ints when you assign it to the <code>rect.center</code>. I don&#39;t know if there&#39;s a way to avoid or reduce this vibration (let me know if you find a solution). If the bullets move fast enough, the user probably won&#39;t notice it."}], "tags": [], "owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "is_accepted": false, "score": 1, "last_activity_date": 1507766047, "last_edit_date": 1507766047, "creation_date": 1507759472, "answer_id": 46698257, "question_id": 46697502, "link": "https://stackoverflow.com/questions/46697502/how-to-move-a-sprite-according-to-an-angle-in-pygame/46698257#46698257", "title": "How to move a sprite according to an angle in Pygame", "body": "<p>I recommend to use vectors. To get the velocity, rotate the start direction vector <code>Vector2(1, 0)</code> by the angle and multiply it by the desired speed. Then just add this velocity vector to the position vector in the <code>update</code> method and also update the <code>rect</code> position to move the sprite. (Press 'a' or 'd' to rotate, mouse 1 or space to shoot.)</p>\n\n<pre><code>import pygame as pg\nfrom pygame.math import Vector2\n\n\npg.init()\nscreen = pg.display.set_mode((640, 480))\nscreen_rect = screen.get_rect()\n\nFONT = pg.font.Font(None, 24)\nBULLET_IMAGE = pg.Surface((20, 11), pg.SRCALPHA)\npg.draw.polygon(BULLET_IMAGE, pg.Color('aquamarine1'),\n                [(0, 0), (20, 5), (0, 11)])\n\n\nclass Bullet(pg.sprite.Sprite):\n\n    def __init__(self, pos, angle):\n        super().__init__()\n        self.image = pg.transform.rotate(BULLET_IMAGE, -angle)\n        self.rect = self.image.get_rect(center=pos)\n        # To apply an offset to the start position,\n        # create another vector and rotate it as well.\n        offset = Vector2(40, 0).rotate(angle)\n        # Then add the offset vector to the position vector.\n        self.pos = Vector2(pos) + offset  # Center of the sprite.\n        # Rotate the direction vector (1, 0) by the angle.\n        # Multiply by desired speed.\n        self.velocity = Vector2(1, 0).rotate(angle) * 9\n\n    def update(self):\n        self.pos += self.velocity  # Add velocity to pos to move the sprite.\n        self.rect.center = self.pos  # Update rect coords.\n\n        if not screen_rect.contains(self.rect):\n            self.kill()\n\n\ndef main():\n    clock = pg.time.Clock()\n    cannon_img = pg.Surface((40, 20), pg.SRCALPHA)\n    cannon_img.fill(pg.Color('aquamarine3'))\n    cannon = cannon_img.get_rect(center=(320, 240))\n    angle = 0\n    bullet_group = pg.sprite.Group()  # Add bullets to this group.\n\n    while True:\n        for event in pg.event.get():\n            if event.type == pg.QUIT:\n                return\n            elif event.type == pg.MOUSEBUTTONDOWN:\n                # Left button fires a bullet from center with\n                # current angle. Add the bullet to the bullet_group.\n                if event.button == 1:\n                    bullet_group.add(Bullet(cannon.center, angle))\n\n        keys = pg.key.get_pressed()\n        if keys[pg.K_a]:\n            angle -= 3\n        elif keys[pg.K_d]:\n            angle += 3\n        if keys[pg.K_SPACE]:\n            bullet_group.add(Bullet(cannon.center, angle))\n\n        # Rotate the cannon image.\n        rotated_cannon_img = pg.transform.rotate(cannon_img, -angle)\n        cannon = rotated_cannon_img.get_rect(center=cannon.center)\n\n        bullet_group.update()\n\n        # Draw\n        screen.fill((30, 40, 50))\n        screen.blit(rotated_cannon_img, cannon)\n        bullet_group.draw(screen)\n        txt = FONT.render('angle {:.1f}'.format(angle), True, (150, 150, 170))\n        screen.blit(txt, (10, 10))\n        pg.display.update()\n\n        clock.tick(30)\n\nif __name__ == '__main__':\n    main()\n    pg.quit()\n</code></pre>\n\n<hr>\n\n<p>Regarding the code in your added example, the easiest solution is to calculate the <code>speed_x</code> and <code>speed_y</code> (\"velocity\" would be more fitting) in the <code>__init__</code> method and then just update the <code>self.rect.x</code> and <code>y</code> attributes in the <code>update</code> method. </p>\n\n<pre><code>import math\nimport pygame\n\n\npygame.init()\n\nscreen = pygame.display.set_mode((640, 480))\nclock = pygame.time.Clock()\n\nBULLET_IMAGE = pygame.Surface((20, 11), pygame.SRCALPHA)\npygame.draw.polygon(BULLET_IMAGE, pygame.Color('aquamarine1'),\n                [(0, 0), (20, 5), (0, 11)])\n\n\nclass Bullet(pygame.sprite.Sprite):\n\n    def __init__(self, x, y, angle, speed):\n        pygame.sprite.Sprite.__init__(self)\n        # Rotate the bullet image (negative angle because y-axis is flipped).\n        self.image = pygame.transform.rotate(BULLET_IMAGE, -angle)\n        self.rect = self.image.get_rect(center=(x, y))\n        angle = math.radians(angle)\n        self.speed_x = speed * math.cos(angle)\n        self.speed_y = speed * math.sin(angle)\n\n    def update(self):\n        self.rect.x += self.speed_x\n        self.rect.y += self.speed_y\n\nspr = pygame.sprite.Group()\nbullet = Bullet(10, 10, 60, 3)\nbullet2 = Bullet(10, 10, 30, 3)\nspr.add(bullet, bullet2)\n\nplay = True\nwhile play:\n    clock.tick(60)\n    for ev in pygame.event.get():\n        if ev.type == pygame.QUIT:\n            play = False\n    screen.fill((30,30,40))\n    spr.update()\n    spr.draw(screen)\n    pygame.display.flip()\n\npygame.quit()\n</code></pre>\n\n<p>There's a problem, because <code>pygame.Rect</code>s can only have ints as the x and y attributes, so the movement won't be 100% correct. To solve this problem, you need to store the coords/position of the sprite in separate variables, add the speed to them and afterwards update the rect:</p>\n\n<pre><code>    # In `__init__`.\n    self.pos_x = x\n    self.pos_y = y\n\ndef update(self):\n    self.pos_x += self.speed_x\n    self.pos_y += self.speed_y\n    self.rect.center = (self.pos_x, self.pos_y)\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 8754481, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kROzT.png?s=128&g=1", "display_name": "DarkBlood202", "link": "https://stackoverflow.com/users/8754481/darkblood202"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4934, "favorite_count": 1, "accepted_answer_id": 46697552, "answer_count": 2, "score": 2, "last_activity_date": 1507766697, "creation_date": 1507755732, "last_edit_date": 1507764134, "question_id": 46697502, "link": "https://stackoverflow.com/questions/46697502/how-to-move-a-sprite-according-to-an-angle-in-pygame", "title": "How to move a sprite according to an angle in Pygame", "body": "<p>I'm having trouble with moving sprites. I can move them in the x and y axis with no problem at all. What I can't figure out is how can I move them according to a certain angle. What I mean is, I'm trying to create a function which includes the object I'm trying to move, its speed, and its direction(which should be measured in degrees). Something like:</p>\n\n<pre><code>MovingObject(obj,speed,direction) #this is the function I'm trying to define\n</code></pre>\n\n<p>It's more like a \"spawning function\" rather than just movement... Take for example that I would like to create an object of the class \"Bullet\" and want it to follow certain direction (different from the x and y axis, of course)\nActually I have no clear idea of how to do such thing and I would like some advice in order to achieve so.\nThanks for reading this!</p>\n\n<p>EDIT:\n@Joran Beasley I tried to do what you told me...but I guess I did it wrong...</p>\n\n<pre><code>import pygame, math, time\nscreen=pygame.display.set_mode((320,240))\nclock=pygame.time.Clock()\npygame.init()\ndef calculate_new_xy(old_xy,speed,angle_in_radians):\n    new_x = old_xy.x + (speed*math.cos(angle_in_radians))\n    new_y = old_xy.y + (speed*math.sin(angle_in_radians))\n    return new_x, new_y\nclass Bullet(pygame.sprite.Sprite):\n    def __init__(self,x,y,direction,speed):        \n            pygame.sprite.Sprite.__init__(self)\n            self.image=pygame.Surface((16, 16))\n            self.image.fill((255,0,0))\n            self.rect=self.image.get_rect()\n            self.rect.center=(x,y)\n            self.direction=math.radians(direction)\n            self.speed=speed\n    def update(self):\n            self.rect.center=calculate_new_xy(self.rect,self.speed,self.direction)\nspr=pygame.sprite.Group()\nbullet=Bullet(160,120,45,1); spr.add(bullet)\nplay=True\nwhile play:\n    clock.tick(60)\n    for ev in pygame.event.get():\n        if ev.type == pygame.QUIT:\n            play=False\n    screen.fill((0,0,0))\n    spr.update()\n    spr.draw(screen)\n    pygame.display.flip()\npygame.quit()\n</code></pre>\n\n<p>The object moves but... not in the specified direction...</p>\n"}, {"tags": ["python", "hex"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5597655"}, "edited": false, "score": 0, "creation_date": 1507755985, "post_id": 46697490, "comment_id": 80342830, "body": "Can you show us what you&#39;ve tried?"}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1507757650, "post_id": 46697490, "comment_id": 80343533, "body": "MAC addresses are usually 48 bits (6 octets), but this \u201cMAC\u201d address is 64 bits (8 octets). That is confusing."}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1507757664, "post_id": 46697490, "comment_id": 80343538, "body": "@liv2hak: where exactly did you get this address from?"}], "answers": [{"comments": [{"owner": {"reputation": 16233, "user_id": 4253229, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-e2FAQvlj5CQ/AAAAAAAAAAI/AAAAAAAAAqM/TlSnekirgNE/photo.jpg?sz=128", "display_name": "Eugene Sh.", "link": "https://stackoverflow.com/users/4253229/eugene-sh"}, "edited": false, "score": 0, "creation_date": 1507756880, "post_id": 46697744, "comment_id": 80343189, "body": "The OP has the code to convert. He is just not convinced by the output."}, {"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 1, "creation_date": 1507757035, "post_id": 46697744, "comment_id": 80343250, "body": "That doesn\u2019t look like an EUI-64: the middle two bytes aren\u2019t FFFE (per the Cisco page you linked to)."}, {"owner": {"reputation": 3502, "user_id": 2714534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/se2TH.jpg?s=128&g=1", "display_name": "blakev", "link": "https://stackoverflow.com/users/2714534/blakev"}, "reply_to_user": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1507757252, "post_id": 46697744, "comment_id": 80343348, "body": "@nneonneo good catch .. wonder if it&#39;s a &quot;real&quot; IPv6 address, or just looking like one."}], "tags": [], "owner": {"reputation": 3502, "user_id": 2714534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/se2TH.jpg?s=128&g=1", "display_name": "blakev", "link": "https://stackoverflow.com/users/2714534/blakev"}, "is_accepted": false, "score": -1, "last_activity_date": 1507757396, "last_edit_date": 1507757396, "creation_date": 1507756800, "answer_id": 46697744, "question_id": 46697490, "link": "https://stackoverflow.com/questions/46697490/converting-hex-number-to-mac-address/46697744#46697744", "title": "Converting hex number to mac address", "body": "<p><code>0x000e96a001064d60</code> represents an <del><a href=\"https://supportforums.cisco.com/t5/network-infrastructure-documents/understanding-ipv6-eui-64-bit-address/ta-p/3116953\" rel=\"nofollow noreferrer\">EUI-64 identifier</a></del>. <em>Guess not, an EUI-64 needs to have <code>FFFE</code> as the middle bytes.</em></p>\n\n<p>EUI-64 identifiers are used in: (<a href=\"https://www.askapache.com/online-tools/mac-lookup/\" rel=\"nofollow noreferrer\">source</a>)</p>\n\n<ul>\n<li>FireWire</li>\n<li>IPv6 (Modified EUI-64 as the least-significant 64 bits of a unicast network address or link-local address when stateless auto configuration is used)</li>\n<li>ZigBee / 802.15.4 / 6LoWPAN wireless personal-area networks</li>\n</ul>\n\n<p>To convert that number to a MAC format in Python use:</p>\n\n<pre><code>mac = '0x000e96a001064d60'\nmac = mac.split('x')[1].zfill(16)\n':'.join(''.join(x) for x in zip(*[iter(mac)]*2)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>00:0e:96:a0:01:06:4d:60\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "is_accepted": false, "score": 1, "last_activity_date": 1507758030, "last_edit_date": 1507758030, "creation_date": 1507757134, "answer_id": 46697810, "question_id": 46697490, "link": "https://stackoverflow.com/questions/46697490/converting-hex-number-to-mac-address/46697810#46697810", "title": "Converting hex number to mac address", "body": "<p>One way to do that with RegEx to split the string:</p>\n\n<pre><code>import re\n\nv = 0x000e96a001064d60\ns = '{0:016x}'.format(v)\ns = ':'.join(re.findall(r'\\w\\w', s))\nprint(s)\n# -&gt; 00:0e:96:a0:01:06:4d:60\n</code></pre>\n\n<p>Or, without RegEx:</p>\n\n<pre><code>v = 0x000e96a001064d60\ns = '{0:016x}'.format(v)\ns = ':'.join(s[i:i + 2] for i in range(0, 16, 2))\nprint(s)\n# -&gt; 00:0e:96:a0:01:06:4d:60\n</code></pre>\n\n<p>A classic MAC address has 6 bytes. This is a EUI-48 address.\nBut here, you have 8 bytes. So it looks like a EUI-64 address. But, bytes 4 and 5 should be FF:FE\u2026</p>\n"}], "owner": {"reputation": 12459, "user_id": 316082, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a18baaf9417df189af31b53af03adb1c?s=128&d=identicon&r=PG", "display_name": "liv2hak", "link": "https://stackoverflow.com/users/316082/liv2hak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4083, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1507758030, "creation_date": 1507755663, "last_edit_date": 1507756488, "question_id": 46697490, "link": "https://stackoverflow.com/questions/46697490/converting-hex-number-to-mac-address", "title": "Converting hex number to mac address", "body": "<p>I have a hex number <code>0x000e96a001064d60</code>. I need to convert this to a mac address. I was told that this represents the IEEE_Complete address. </p>\n\n<p>To my eye it seems one nibble too many here. How do I convert this to MAC address</p>\n\n<p>I have tried </p>\n\n<pre><code>value = value[2:] if len(value) % 2 == 0 else \"0\" + value[2:]\nreturn \":\".join(value[i:i+2] for i in range(0, len(value), 2))\n</code></pre>\n\n<p>what I get is </p>\n\n<pre><code>\"00:0e:96:a0:01:06:4d:60\n</code></pre>\n\n<p>To me it looks too long to be a <code>MAC address</code></p>\n"}, {"tags": ["python", "python-3.x", "character-encoding"], "answers": [{"comments": [{"owner": {"reputation": 4578, "user_id": 5180047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Z8PTw2eJC9E/AAAAAAAAAAI/AAAAAAAAAco/2C4t6AgoQNc/photo.jpg?sz=128", "display_name": "Nick Brady", "link": "https://stackoverflow.com/users/5180047/nick-brady"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1507757834, "post_id": 46697813, "comment_id": 80343613, "body": "^, yep, exactly what I was referring to. Thanks for pulling that out."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1507757936, "post_id": 46697813, "comment_id": 80343658, "body": "even better in the answer :) well, if we can generalize 8 to 16 and 32 of course :)"}], "tags": [], "owner": {"reputation": 4578, "user_id": 5180047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Z8PTw2eJC9E/AAAAAAAAAAI/AAAAAAAAAco/2C4t6AgoQNc/photo.jpg?sz=128", "display_name": "Nick Brady", "link": "https://stackoverflow.com/users/5180047/nick-brady"}, "is_accepted": true, "score": 3, "last_activity_date": 1507757905, "last_edit_date": 1507757905, "creation_date": 1507757147, "answer_id": 46697813, "question_id": 46697484, "link": "https://stackoverflow.com/questions/46697484/utf16-vs-utf-16/46697813#46697813", "title": "utf16 vs utf-16", "body": "<p>Interesting question. I did some searching and it looks like you can find all of the options available here: <a href=\"https://docs.python.org/3/library/codecs.html#standard-encodings\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/codecs.html#standard-encodings</a></p>\n\n<p>so in this case, neither! It should be <code>utf_16</code>. Still, with my experience with python, I wouldn't be surprised if they sanitized the arg you provided so that it would work regardless. And from the link, it looks like they do! so <code>utf-16</code> should be a valid alias.</p>\n\n<blockquote>\n  <p>Notice that spelling alternatives that only differ in case or use a hyphen instead of an underscore are also valid aliases; therefore, e.g. 'utf-8' is a valid alias for the 'utf_8' codec</p>\n</blockquote>\n\n<p>Edit - that is definitely the correct link.\n<a href=\"https://docs.python.org/3.4/library/functions.html#open\" rel=\"nofollow noreferrer\">https://docs.python.org/3.4/library/functions.html#open</a> which is the documentation for <code>open</code> links you to it in this sentence </p>\n\n<blockquote>\n  <p>See the codecs module for the list of supported encodings.</p>\n</blockquote>\n"}], "owner": {"reputation": 4713, "user_id": 1187968, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/55c10b3b35dba52324314052e9cf84dc?s=128&d=identicon&r=PG", "display_name": "user1187968", "link": "https://stackoverflow.com/users/1187968/user1187968"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 46697813, "answer_count": 1, "score": 4, "last_activity_date": 1507757905, "creation_date": 1507755648, "last_edit_date": 1507757802, "question_id": 46697484, "link": "https://stackoverflow.com/questions/46697484/utf16-vs-utf-16", "title": "utf16 vs utf-16", "body": "<p>Which line from below is correct? I do know all these available encodings? </p>\n\n<pre><code>with open(filename, 'w', encoding='utf16') as fp:\nwith open(filename, 'w', encoding='utf-16') as fp:\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy", "vectorization"], "comments": [{"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 3, "creation_date": 1507755614, "post_id": 46697443, "comment_id": 80342656, "body": "Also respectfully - you might want to take an hour or two to read over the first few sections of the Pandas docs, it could help considerably with your Pandas workflow."}, {"owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "edited": false, "score": 1, "creation_date": 1507755712, "post_id": 46697443, "comment_id": 80342705, "body": "The built-in way to time code is to <a href=\"https://stackoverflow.com/questions/8220801/how-to-use-timeit-module#\">use the timeit module</a>. An easier way is to use <a href=\"https://stackoverflow.com/q/29280470/190597\">IPython&#39;s <code>%timeit</code> command</a>."}, {"owner": {"reputation": 73, "user_id": 6934685, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9b6b66466fb5d172d5af22afd00257e8?s=128&d=identicon&r=PG&f=1", "display_name": "awsmagala", "link": "https://stackoverflow.com/users/6934685/awsmagala"}, "edited": false, "score": 0, "creation_date": 1507766422, "post_id": 46697443, "comment_id": 80346042, "body": "I&#39;m sorry I am sure this is a basic question and I am working on improving my understanding of python and pandas but I don&#39;t use it every day so sometimes the indexing of dataframes confuses me.  I edited my question to make it clearer and why it is different than the question yall flagged."}], "owner": {"reputation": 73, "user_id": 6934685, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9b6b66466fb5d172d5af22afd00257e8?s=128&d=identicon&r=PG&f=1", "display_name": "awsmagala", "link": "https://stackoverflow.com/users/6934685/awsmagala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 681, "favorite_count": 0, "closed_date": 1507755606, "answer_count": 0, "score": 1, "last_activity_date": 1507766282, "creation_date": 1507755460, "last_edit_date": 1507766282, "question_id": 46697443, "link": "https://stackoverflow.com/questions/46697443/pandas-numpy-help-vectorizing-or-using-df-apply", "closed_reason": "Duplicate", "title": "Pandas/Numpy help vectorizing or using df.apply", "body": "<p>So lets say I have a data frame that looks like this.</p>\n\n<pre><code>    x1    x2    x3    y1    y2    y3    z1    z2    z3\n1   10    10.1  9.9   1     2     3     4     5     6\n2   11    11.1  10.9  2     3     4     5     6     7\n...\n</code></pre>\n\n<p>I want to make a 3 columns called <code>[xave,yave,zave]</code> and then have each element in it be the average of the three columns in the df above (this is just an example, I need to do this operation 6 times on 6 sets of three columns)</p>\n\n<pre><code>    x1    x2    x3    y1    y2    y3    z1    z2    z3    xave    yave    zave\n1   10    10.1  9.9   1     2     3     4     5     6     10      2       5\n2   11    11.1  10.9  2     3     4     5     6     7     11      3       6\n...\n</code></pre>\n\n<p>Right now I am doing this by looping through the dataframes index and using <code>df.set_value(index,col,val)</code> to do this at each index value.</p>\n\n<p><code>for index in df.index:\n     df.set_value(index = index, col = x1, value = np.average(df.iloc[index,[0:2])</code></p>\n\n<p>I feel like there has to be a way to do this with a <code>df.apply()</code> or maybe a lambda function.  I just need to increase the speed of the function otherwise it takes too long to analyze a large amount of files.  I have another script that loops through a directory and grabs all .csv files inside it. It then performs the analysis I am doing and saves the filename and values as an array.  The directory is ~3000 files the amount of data can vary from 200kb to 4000kb in each. </p>\n\n<p>I am not sure of the exact timing I am looking up how to figure that out now.</p>\n"}, {"tags": ["python", "string", "pandas", "csv", "text"], "comments": [{"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 0, "creation_date": 1507756533, "post_id": 46697440, "comment_id": 80343063, "body": "The <code>replace()</code> function, as demonstrated by all answers, is what you&#39;re looking for. However, be mindful that if you have multiple spaces between words, you might get undesired results. For example, <code>&#39;a b  c&#39;.replace(&#39; &#39;, &#39;, &#39;)</code> returns <code>&#39;a, b, , c&#39;</code>. If that&#39;s not an issue for you, you&#39;re good to go."}], "answers": [{"comments": [{"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 0, "creation_date": 1507756395, "post_id": 46697581, "comment_id": 80343005, "body": "<code>split()</code> by default splits at spaces. However, there is a difference between <code>split()</code> and <code>split(&#39; &#39;)</code> and the former might be more preferable."}, {"owner": {"reputation": 392, "user_id": 8462076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79cea304227dd5a520fc697981628665?s=128&d=identicon&r=PG&f=1", "display_name": "peyo", "link": "https://stackoverflow.com/users/8462076/peyo"}, "edited": false, "score": 0, "creation_date": 1507756430, "post_id": 46697581, "comment_id": 80343022, "body": "With a few thousands line, I guess it will be a bit slow to split and join each line.. :/"}, {"owner": {"reputation": 33, "user_id": 8191545, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/787a109d0976eff7b3bc818b2c9a1172?s=128&d=identicon&r=PG&f=1", "display_name": "Rivaldo Hater", "link": "https://stackoverflow.com/users/8191545/rivaldo-hater"}, "edited": false, "score": 0, "creation_date": 1507756533, "post_id": 46697581, "comment_id": 80343062, "body": "I am trying to adapt to use in my text file."}], "tags": [], "owner": {"reputation": 562, "user_id": 4598067, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pRKOta17UmQ/AAAAAAAAAAI/AAAAAAAAAmc/7JBZC0FlHIw/photo.jpg?sz=128", "display_name": "pythomatic", "link": "https://stackoverflow.com/users/4598067/pythomatic"}, "is_accepted": false, "score": 3, "last_activity_date": 1507756113, "creation_date": 1507756113, "answer_id": 46697581, "question_id": 46697440, "link": "https://stackoverflow.com/questions/46697440/add-virgula-in-front-of-each-word/46697581#46697581", "title": "Add Virgula in front of each word", "body": "<pre><code>the_list = entrada.split(\" \") # take input &amp; make a list of all values, separated by \" \"\nsaida = the_list.join(\", \") # join all elements with \", \"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 72, "user_id": 8239103, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213224900565135/picture?type=large", "display_name": "Keith Cargill", "link": "https://stackoverflow.com/users/8239103/keith-cargill"}, "is_accepted": false, "score": 3, "last_activity_date": 1507756166, "creation_date": 1507756166, "answer_id": 46697591, "question_id": 46697440, "link": "https://stackoverflow.com/questions/46697440/add-virgula-in-front-of-each-word/46697591#46697591", "title": "Add Virgula in front of each word", "body": "<p>Your line is probably just a string, so you can use:</p>\n\n<pre><code>line.replace(\" \",\", \")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1846, "user_id": 7424634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ooAaa.jpg?s=128&g=1", "display_name": "rachid el kedmiri", "link": "https://stackoverflow.com/users/7424634/rachid-el-kedmiri"}, "is_accepted": false, "score": 1, "last_activity_date": 1507756267, "creation_date": 1507756267, "answer_id": 46697621, "question_id": 46697440, "link": "https://stackoverflow.com/questions/46697440/add-virgula-in-front-of-each-word/46697621#46697621", "title": "Add Virgula in front of each word", "body": "<p>Complexity-wise you should replace the space directly with a comma, rather than traverse the phrase multiple times.</p>\n\n<pre><code>the_list = entrada.replace(' ', ', ')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 392, "user_id": 8462076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79cea304227dd5a520fc697981628665?s=128&d=identicon&r=PG&f=1", "display_name": "peyo", "link": "https://stackoverflow.com/users/8462076/peyo"}, "is_accepted": false, "score": 1, "last_activity_date": 1507756342, "creation_date": 1507756342, "answer_id": 46697637, "question_id": 46697440, "link": "https://stackoverflow.com/questions/46697440/add-virgula-in-front-of-each-word/46697637#46697637", "title": "Add Virgula in front of each word", "body": "<p>First, you need to <a href=\"https://docs.python.org/3.6/library/readline.html\" rel=\"nofollow noreferrer\">read your input on line at a time</a>.\nThen you simply use str.replace() as such:</p>\n\n<pre><code>sampletxt = \"input phrase of the file to exemplify\"\noutput = sampletxt.replace(\" \", \", \")\n</code></pre>\n\n<p>And you're done.</p>\n"}, {"tags": [], "owner": {"reputation": 11863, "user_id": 1762211, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bc8759842af428f995e2ce7a03adb609?s=128&d=identicon&r=PG", "display_name": "Mohamed Ali JAMAOUI", "link": "https://stackoverflow.com/users/1762211/mohamed-ali-jamaoui"}, "is_accepted": true, "score": 1, "last_activity_date": 1507797897, "last_edit_date": 1507797897, "creation_date": 1507756593, "answer_id": 46697694, "question_id": 46697440, "link": "https://stackoverflow.com/questions/46697440/add-virgula-in-front-of-each-word/46697694#46697694", "title": "Add Virgula in front of each word", "body": "<p>Based on the code sample you added, the question you are trying to answer is how to replace <code>' '</code> with <code>', '</code> for each row in a <code>pandas dataframe</code>. </p>\n\n<p>Here's one way to do that:</p>\n\n<pre><code>import pandas as pd\n\nsampletxt = pd.read_csv('teste.csv' , header = None)\noutput = sampletxt.replace('\\s+', ', ', regex=True)\nprint(output)\n</code></pre>\n\n<p><strong>Example:</strong></p>\n\n<pre><code>In [24]: l\nOut[24]: \n['input phrase of the file to exemplify',\n 'input phrase of the file to exemplify 2',\n 'input phrase of the file to exemplify 4']\n\nIn [25]: sampletxt = pd.DataFrame(l)\n\nIn [26]: sampletxt\nOut[26]: \n                                         0\n0    input phrase of the file to exemplify\n1  input phrase of the file to exemplify 2\n2  input phrase of the file to exemplify 4\n\nIn [27]: output = sampletxt.replace('\\s+', ', ', regex=True)\n\nIn [28]: output \nOut[28]: \n                                                0\n0     input, phrase, of, the, file, to, exemplify\n1  input, phrase, of, the, file, to, exemplify, 2\n2  input, phrase, of, the, file, to, exemplify, 4\n</code></pre>\n\n<hr>\n\n<p><strong>OLD answer</strong></p>\n\n<p>You can also use <code>re.sub(..)</code>, as follows: </p>\n\n<pre><code>In [3]: import re\n\nIn [4]: st = \"input phrase of the file to exemplify\"\n\nIn [5]: re.sub(' ',', ', st)\nOut[5]: 'input, phrase, of, the, file, to, exemplify'\n</code></pre>\n\n<hr>\n\n<p><code>re.sub(...)</code> is faster than <code>str.replace(..)</code></p>\n\n<pre><code>In [6]: timeit re.sub(' ',', ', st)\n100000 loops, best of 3: 1.74 \u00b5s per loop\n\nIn [7]: timeit st.replace(' ',', ')\n1000000 loops, best of 3: 257 ns per loop\n</code></pre>\n\n<hr>\n\n<p>In case you have multiple spaces separating two words, the output of all the answers based on <code>str.replace(' ',',')</code> will be wrong. For instance</p>\n\n<pre><code>In [15]: st\nOut[15]: 'input phrase of the file to  exemplify'\n\nIn [16]: re.sub(' ',', ', st)\nOut[16]: 'input, phrase, of, the, file, to, , exemplify'\n\nIn [17]: st.replace(' ',', ')\nOut[17]: 'input, phrase, of, the, file, to, , exemplify'\n</code></pre>\n\n<p>To fix that you need to use a regex (regular expression) that matches one or many spaces as follows: </p>\n\n<pre><code>In [22]: st\nOut[22]: 'input phrase of the file to  exemplify'\n\nIn [23]: re.sub('\\s+', ', ', st)\nOut[23]: 'input, phrase, of, the, file, to, exemplify'\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 8191545, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/787a109d0976eff7b3bc818b2c9a1172?s=128&d=identicon&r=PG&f=1", "display_name": "Rivaldo Hater", "link": "https://stackoverflow.com/users/8191545/rivaldo-hater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 46697694, "answer_count": 5, "score": 2, "last_activity_date": 1507810439, "creation_date": 1507755448, "last_edit_date": 1507810439, "question_id": 46697440, "link": "https://stackoverflow.com/questions/46697440/add-virgula-in-front-of-each-word", "title": "Add Virgula in front of each word", "body": "<p>I have a text file with more than a thousand lines, and for a certain process I need to separate the words by comma. I wanted a help to develop this algorithm in python since I'm starting in the language</p>\n\n<p><strong>Entrada</strong></p>\n\n<pre><code>input phrase of the file to exemplify\n</code></pre>\n\n<p><strong>Sa\u00edda</strong></p>\n\n<pre><code>input, phrase, of, the, file, to, exemplify\n</code></pre>\n\n<p>I'm trying like this:</p>\n\n<pre><code>import pandas as pd\n\n sampletxt = pd.read_csv('teste.csv' , header = None)\n output = sampletxt.replace(\" \", \", \")\n\n print output\n</code></pre>\n"}, {"tags": ["python", "google-api", "google-cloud-platform", "python-2.x", "google-speech-api"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1507755762, "post_id": 46697410, "comment_id": 80342727, "body": "How are you examining this data? It sounds like it may already be UTF-8, and you&#39;re just misunderstanding the presentation of whatever you&#39;re using to read the data."}, {"owner": {"reputation": 49793, "user_id": 4014959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GdqQJ.jpg?s=128&g=1", "display_name": "PM 2Ring", "link": "https://stackoverflow.com/users/4014959/pm-2ring"}, "edited": false, "score": 0, "creation_date": 1507756063, "post_id": 46697410, "comment_id": 80342865, "body": "Should that example string print as <code>voc&#234; hoje boa noite cart&#227;o</code> ?"}, {"owner": {"reputation": 737, "user_id": 6712690, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001168137353/picture?type=large", "display_name": "Ryoji Kuwae Neto", "link": "https://stackoverflow.com/users/6712690/ryoji-kuwae-neto"}, "edited": false, "score": 0, "creation_date": 1507770424, "post_id": 46697410, "comment_id": 80346977, "body": "This is what&#39;s being provided when I do a http request, if I print response.result, or if I do write the content of response.result in a file, it&#39;s being recorded as \\303\\251 (each special character is converted, this one is just an example)  I&#39;m recording the response.result as:  file.write(str(response.result))"}], "owner": {"reputation": 737, "user_id": 6712690, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001168137353/picture?type=large", "display_name": "Ryoji Kuwae Neto", "link": "https://stackoverflow.com/users/6712690/ryoji-kuwae-neto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507770892, "creation_date": 1507755351, "last_edit_date": 1507770892, "question_id": 46697410, "link": "https://stackoverflow.com/questions/46697410/how-to-convert-303-255-to-%c3%ad-in-python", "title": "How to convert \\303\\255 to &quot;&#237;&quot; in Python?", "body": "<p>I'm using Google Speech API and since i'm using LongRunning functions for wav files, and they're all in pt-BR language, they're returning with content such as \"voc\\303\\252 hoje boa noite cart\\303\\243o\".</p>\n\n<p>How can I convert this back to UTF-8?</p>\n\n<p>I already tried .encode function, and already tried to check if there's any parameter to send, but I cannot find anything.</p>\n\n<pre><code>    # [START def_transcribe_gcs]\n    def transcribe_gcs(gcs_uri):\n        \"\"\"Asynchronously transcribes the audio file specified by the gcs_uri.\"\"\"\n        from google.cloud import speech\n        from google.cloud.speech import enums\n        from google.cloud.speech import types\n        client = speech.SpeechClient()\n    audio = types.RecognitionAudio(uri=gcs_uri)\n    config = types.RecognitionConfig(\n        encoding=enums.RecognitionConfig.AudioEncoding.LINEAR16,\n        sample_rate_hertz=8000,\n        language_code='pt-BR')\n\n    operation = client.long_running_recognize(config, audio)\n\n    print('Waiting for operation to complete...')\n    response = operation.result(timeout=300)\n\n    # Print the first alternative of all the consecutive results.\n    for result in response.results:\n        print('Transcript: {}'.format(result.alternatives[0].transcript))\n        print('Confidence: {}'.format(result.alternatives[0].confidence))\n\n    ##This part is mine, the rest of the code belongs to Google\n    file = open(\"Test.txt\", \"wb\")\n    file.write(str(response.results))\n    file.close()\n# [END def_transcribe_gcs]\n</code></pre>\n"}, {"tags": ["python", "pyqt", "pyqt5", "qscintilla"], "comments": [{"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 2, "creation_date": 1507758230, "post_id": 46697404, "comment_id": 80343773, "body": "There is no need to add the keywords directly. There are python api files provided by the standard qscintilla installation that can be loaded at runtime. You can also load api files for pyqt and for qscintilla itself."}, {"owner": {"reputation": 2858, "user_id": 4067676, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5faXN.jpg?s=128&g=1", "display_name": "Vince W.", "link": "https://stackoverflow.com/users/4067676/vince-w"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1507758757, "post_id": 46697404, "comment_id": 80343978, "body": "@ekhumoro Looking in the package I see those api files, but I am uncertain about what is the function call to load them.  Could you provide an example?"}, {"owner": {"reputation": 2858, "user_id": 4067676, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5faXN.jpg?s=128&g=1", "display_name": "Vince W.", "link": "https://stackoverflow.com/users/4067676/vince-w"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1507759562, "post_id": 46697404, "comment_id": 80344238, "body": "Thanks for the comment, I went looking more closely at the class documentation here and found what I was looking for.  See answer below.  <a href=\"http://pyqt.sourceforge.net/Docs/QScintilla2/classQsciAPIs.html\" rel=\"nofollow noreferrer\">pyqt.sourceforge.net/Docs/QScintilla2/classQsciAPIs.html</a>"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1507759946, "post_id": 46697404, "comment_id": 80344351, "body": "Sorry - I was going to add an answer but you beat me to it :)"}], "answers": [{"comments": [{"owner": {"reputation": 2858, "user_id": 4067676, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5faXN.jpg?s=128&g=1", "display_name": "Vince W.", "link": "https://stackoverflow.com/users/4067676/vince-w"}, "edited": false, "score": 0, "creation_date": 1507756812, "post_id": 46697692, "comment_id": 80343163, "body": "thanks.  Could you explain what role the lexer is playing in the autocomplete?  Also, is it relatively simple to implement standard library module autocomplete with functions from the standard library as well?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 2858, "user_id": 4067676, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5faXN.jpg?s=128&g=1", "display_name": "Vince W.", "link": "https://stackoverflow.com/users/4067676/vince-w"}, "edited": false, "score": 0, "creation_date": 1507757574, "post_id": 46697692, "comment_id": 80343497, "body": "I have updated my answer, I added the functionality of knowing the names of the libraries but it is not a smart autocomplete. Please if my answer helps you do not forget to mark it as correct."}, {"owner": {"reputation": 2858, "user_id": 4067676, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5faXN.jpg?s=128&g=1", "display_name": "Vince W.", "link": "https://stackoverflow.com/users/4067676/vince-w"}, "edited": false, "score": 0, "creation_date": 1507758696, "post_id": 46697692, "comment_id": 80343952, "body": "the answer is in the right direction, but has some undesireable consequences.  For example, if I set the autcompletion source to AcsAll so that it includes document words as well as the api, autocompletion makes sense for document words.  Namely, when I type <code>sys.</code> it suggests <code>sys.argv</code> and <code>sys.exit</code> bc they are in the document.  When I type <code>range.r</code>, it will suggest <code>range.range</code> and <code>range.raise</code> which obviously don&#39;t make sense.  I&#39;m not sure that an autocomplete which sometimes suggests wrong things is what I&#39;m looking for."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 2858, "user_id": 4067676, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5faXN.jpg?s=128&g=1", "display_name": "Vince W.", "link": "https://stackoverflow.com/users/4067676/vince-w"}, "edited": false, "score": 0, "creation_date": 1507758816, "post_id": 46697692, "comment_id": 80344001, "body": "To that I meant that it is not an intelligent autocomplete, you must filter the data that gives the QsciAPIs."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": false, "score": 1, "last_activity_date": 1507757472, "last_edit_date": 1507757472, "creation_date": 1507756588, "answer_id": 46697692, "question_id": 46697404, "link": "https://stackoverflow.com/questions/46697404/no-python-keywords-in-autocomplete-suggestions-using-qscintilla-and-pyqt/46697692#46697692", "title": "no python keywords in autocomplete suggestions using QScintilla and PyQt", "body": "<p>qscintilla does not know the keywords of python nor of the libraries, QsciAPIs hopes that you provide information, in the following part I show some functions that return the keywords and the name of the standard libraries. qscintilla will only autocomplete with the words you provide, if you want an intelligent autocomplete, I recommend you do a logic that recognizes the points or parenthesis and filter the words you provide to QsciAPIs. </p>\n\n<pre><code>import sys\nfrom PyQt5 import QtWidgets, Qsci\nimport keyword\nimport pkgutil\n\napp = QtWidgets.QApplication(sys.argv)\neditor = Qsci.QsciScintilla()\nlexer = Qsci.QsciLexerPython()\neditor.setLexer(lexer)\n\n## setup autocompletion\napi = Qsci.QsciAPIs(lexer)\n\nfor key in keyword.kwlist + dir(__builtins__):\n    api.add(key)\n\nfor importer, name, ispkg in pkgutil.iter_modules():\n    api.add(name)\n\napi.prepare()\n\neditor.setAutoCompletionThreshold(1)\neditor.setAutoCompletionSource(Qsci.QsciScintilla.AcsAPIs)\n\neditor.show()\neditor.setText(open(sys.argv[0]).read())\nsys.exit(app.exec_())\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 2, "creation_date": 1507759889, "post_id": 46698268, "comment_id": 80344332, "body": "Note that you can get a list of all installed api files from <code>api.installedAPIFiles()</code>. If you want the language keywords for python, you can add them individually from <code>lexer.keywords(1).split()</code>."}, {"owner": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1510170516, "post_id": 46698268, "comment_id": 81326151, "body": "Hi @ekhumoro , could you give more explanation about what the <code>api.load(..)</code> function actually does? From what I understand, it clones the keywords from the given api-file. Will <code>api.installedAPIFiles()</code> just return those filenames that have been cloned before? I would like to add your explanations to my website <a href=\"https://qscintilla.com/autocompletion/\" rel=\"nofollow noreferrer\">qscintilla.com/autocompletion</a>"}, {"owner": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1510170592, "post_id": 46698268, "comment_id": 81326182, "body": "@ekhumoro , if you agree, I will make proper reference to your StackOverflow account when adding your explanations to the website ;-)"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "edited": false, "score": 0, "creation_date": 1510172811, "post_id": 46698268, "comment_id": 81327379, "body": "@K.Mulier. The raw api files are installed in a standard system location (usually in qt&#39;s shared-data directory). The <code>api.load()</code> method reads a raw api file, and stores it in an internal list. The <code>api.prepare()</code> method does the actual work of parsing the lines of raw data and storing the information in a format that can be accessed efiiciently. The prepared data can be saved using <code>api.savePrepared()</code> and re-loaded with <code>api.loadPrepared()</code>. These prepared data files are usually stored by the application in a config directory on a per-user basis."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "edited": false, "score": 0, "creation_date": 1510174180, "post_id": 46698268, "comment_id": 81328138, "body": "@K.Mulier. Thank for the offer, but I am mostly just passing on information that I have found elsewhere. You are doing all the real work of creating and maintaining the website. If you want to give credit where it&#39;s due, please make sure you prominently acknowledge <a href=\"https://www.riverbankcomputing.com/software/qscintilla/intro\" rel=\"nofollow noreferrer\">Phil Thompson (Riverbank Computing)</a>, as he is the author of QScintilla and also provides the PyQt bindings. You should probably also provide a prominent link to the <a href=\"http://pyqt.sourceforge.net/Docs/QScintilla2/\" rel=\"nofollow noreferrer\">official QScintilla Documentation</a>."}, {"owner": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1510174458, "post_id": 46698268, "comment_id": 81328282, "body": "Hi @ekhumoro . Thank you for your answer. I have added a link on my homepage to the fundraising site of Neil Hodgson (the creator of Scintilla). Thank you for pointing out the work of Mr. Phil Thompson. As you explain, without Mr. Thompson we couldn&#39;t use Scintilla in Python (and PyQt). Do you know of a fundraising page he has for his work on QScintilla and the PyQt bindings?"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "edited": false, "score": 0, "creation_date": 1510175302, "post_id": 46698268, "comment_id": 81328773, "body": "@K.Mulier. QScintilla does <b>much</b> more than simply wrap Scintilla for Qt. Your <a href=\"https://qscintilla.com/introduction/\" rel=\"nofollow noreferrer\">introduction page</a> is really misleading on that point. See the <a href=\"https://www.riverbankcomputing.com/software/qscintilla/license\" rel=\"nofollow noreferrer\">QScintilla Licence Page</a> regarding its commercial status. It also seems somewhat strange to mention Nokia - very few people will remember that episode in Qt&#39;s history with much fondness. Qt is currently owned by <a href=\"https://en.wikipedia.org/wiki/The_Qt_Company\" rel=\"nofollow noreferrer\">Digia/The Qt Company</a>."}, {"owner": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1510320443, "post_id": 46698268, "comment_id": 81397369, "body": "Hi @ekhumoro , I am happy to get your feedback on the website. I got the impression that QScintilla is doing only a wrap of Scintilla for Qt (or PyQt in particular). But apparently, my impression is wrong, and QScintilla is doing more than that. Please share me some more information so I can correct the intro on my website."}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "edited": false, "score": 0, "creation_date": 1510335092, "post_id": 46698268, "comment_id": 81406718, "body": "@K.Mulier. I don&#39;t want to make too much of this, but I think that, at the very least, it&#39;s just common courtesy to acknowledge the principal author of QScintilla. If you&#39;re going to put up a website called &quot;QScintilla&quot; that uses a &quot;qscintilla.com&quot; domain, I think the onus is on you to make sure you are respecting the author&#39;s copyright. If you want to know what QScintilla is comprised of, you can download the source code and see for yourself. There is also a <a href=\"https://www.riverbankcomputing.com/mailman/listinfo/qscintilla\" rel=\"nofollow noreferrer\">QScintilla mailing list</a>."}, {"owner": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1510335276, "post_id": 46698268, "comment_id": 81406818, "body": "Hi @ekhumoro, you are right. I should do that. Where can I find info about the stuff QScintilla adds on top of Scintilla (besides reading both of the source codes)?"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "edited": false, "score": 0, "creation_date": 1510336038, "post_id": 46698268, "comment_id": 81407183, "body": "@K.Mulier. The <a href=\"http://pyqt.sourceforge.net/Docs/QScintilla2/annotated.html\" rel=\"nofollow noreferrer\">class list</a> should give you broad view of what is included. Really, the high-level APIs of QScintilla are more akin to SciTE, than to Scintilla. The APIs of Scintilla are mostly very low-level. A lot of layers have to be added on top of it in order to make use of all of its features. QScintilla was originally created purely for use in the <a href=\"https://eric-ide.python-projects.org/\" rel=\"nofollow noreferrer\">Eric Python IDE</a> - but it&#39;s since taken on a life of its own."}, {"owner": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "edited": false, "score": 0, "creation_date": 1510336125, "post_id": 46698268, "comment_id": 81407239, "body": "Interesting, didn&#39;t know that QScintilla was originally created for Eric Python IDE :-)"}, {"owner": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "edited": false, "score": 0, "creation_date": 1510336155, "post_id": 46698268, "comment_id": 81407253, "body": "How did you learn all this stuff? Do you have a personal project (perhaps an IDE) based on QScintilla?"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "edited": false, "score": 0, "creation_date": 1510337027, "post_id": 46698268, "comment_id": 81407748, "body": "@K.Mulier. I have been using both PyQt and QScintilla in various ways since around the time Qt3 was first released (2002-ish). So I suppose I have just steadily accumulated knowledge over rmany years. There&#39;s been no real plan to any of it, though ;-) (PS: I think we should probably end this discussion here, as we are highjacking Vince W&#39;s answer)."}, {"owner": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "edited": false, "score": 0, "creation_date": 1510337121, "post_id": 46698268, "comment_id": 81407796, "body": "Yeah, you&#39;re right. Perhaps we can continue over email? I&#39;ll put my email here, you note it down, and then I remove this comment immediately: kristof dot mulier at telenet dot be"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "edited": false, "score": 0, "creation_date": 1510337369, "post_id": 46698268, "comment_id": 81407907, "body": "@K.Mulier. A chat room on SO would be better."}, {"owner": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "edited": false, "score": 0, "creation_date": 1510338612, "post_id": 46698268, "comment_id": 81408519, "body": "Don&#39;t know.. didn&#39;t use it that much so far. Will the messages we exchange on the chatroom stay present for future reference? I mean, I like to be able to look up conversations if I forgot something interesting. With mail, that&#39;s possible."}, {"owner": {"reputation": 2858, "user_id": 4067676, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5faXN.jpg?s=128&g=1", "display_name": "Vince W.", "link": "https://stackoverflow.com/users/4067676/vince-w"}, "reply_to_user": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "edited": false, "score": 0, "creation_date": 1510345491, "post_id": 46698268, "comment_id": 81411702, "body": "@K.Mulier, and ekhumoro, just to let you know, I&#39;ve enjoyed reading the back and forth.  Curiosity never dies.  As a side note, I asked this question after checking qscintilla.com and not finding the answer, so I&#39;m glad it sparked some discussion"}, {"owner": {"reputation": 6280, "user_id": 6178507, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5VkoH.jpg?s=128&g=1", "display_name": "K.Mulier", "link": "https://stackoverflow.com/users/6178507/k-mulier"}, "edited": false, "score": 0, "creation_date": 1510345811, "post_id": 46698268, "comment_id": 81411862, "body": "@VinceW. great to hear that :-)"}], "tags": [], "owner": {"reputation": 2858, "user_id": 4067676, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5faXN.jpg?s=128&g=1", "display_name": "Vince W.", "link": "https://stackoverflow.com/users/4067676/vince-w"}, "is_accepted": true, "score": 2, "last_activity_date": 1507759509, "creation_date": 1507759509, "answer_id": 46698268, "question_id": 46697404, "link": "https://stackoverflow.com/questions/46697404/no-python-keywords-in-autocomplete-suggestions-using-qscintilla-and-pyqt/46698268#46698268", "title": "no python keywords in autocomplete suggestions using QScintilla and PyQt", "body": "<p>Thanks to ekhumoro for guiding me to the answer.  The QsciAPIs class has a load method, and PyQt comes with a set of api files.  Below is the code that does proper autocompletion in the manner I was looking for:</p>\n\n<pre><code>\"\"\"Base code originally from: http://kib2.free.fr/tutos/PyQt4/QScintilla2.html\"\"\"\n\nimport sys\nimport os\nimport PyQt5\nfrom PyQt5 import QtWidgets, Qsci\n\napp = QtWidgets.QApplication(sys.argv)\neditor = Qsci.QsciScintilla()\nlexer = Qsci.QsciLexerPython(editor)\neditor.setLexer(lexer)\n\n## setup autocompletion\napi = Qsci.QsciAPIs(lexer)\n\n# import the desired api file\npyqt_path = os.path.dirname(PyQt5.__file__)\napi.load(os.path.join(pyqt_path, \"Qt/qsci/api/python/Python-3.6.api\"))\n\napi.prepare()\neditor.setAutoCompletionThreshold(1)\neditor.setAutoCompletionSource(Qsci.QsciScintilla.AcsAll)\n\neditor.show()\neditor.setText(open(sys.argv[0]).read())\nsys.exit(app.exec_())\n</code></pre>\n"}], "owner": {"reputation": 2858, "user_id": 4067676, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/5faXN.jpg?s=128&g=1", "display_name": "Vince W.", "link": "https://stackoverflow.com/users/4067676/vince-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 1, "accepted_answer_id": 46698268, "answer_count": 2, "score": 2, "last_activity_date": 1507759509, "creation_date": 1507755325, "question_id": 46697404, "link": "https://stackoverflow.com/questions/46697404/no-python-keywords-in-autocomplete-suggestions-using-qscintilla-and-pyqt", "title": "no python keywords in autocomplete suggestions using QScintilla and PyQt", "body": "<p>I was expecting autocomplete suggestions of Python keywords (i.e. <code>for, range, lambda</code>) and hoping for autocomplete suggestions with standard library modules and functions (i.e. <code>sys, os.path</code>, etc.) when setting up an api with the QsciLexerPython lexer, but in the code example below, compressed and updated from <a href=\"http://www.kidstrythisathome.com/2011/08/autocompletion-using-pyqt4-and-qscintilla/\" rel=\"nofollow noreferrer\">this website</a>, the only auto-completion that happens are the four strings added to the list.</p>\n\n<p>Am I doing something wrong, and if so how do I get python keywords to register in the autocomplete?  (My main question here of course)</p>\n\n<p>If rather this is the expected behavior, what role does the lexer play in the autocomplete and why are the keywords from the lexer not being assigned to the autocomplete lists in this example?</p>\n\n<p>Lastly, is it possible to have python standard library modules and sub-modules in the autocomplete, and what does that require?</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\"\"\"Base code originally from: http://kib2.free.fr/tutos/PyQt4/QScintilla2.html\"\"\"\n\nimport sys\nfrom PyQt5 import QtWidgets, Qsci\n\napp = QtWidgets.QApplication(sys.argv)\neditor = Qsci.QsciScintilla()\nlexer = Qsci.QsciLexerPython()\neditor.setLexer(lexer)\n\n## setup autocompletion\napi = Qsci.QsciAPIs(lexer)\napi.add(\"aLongString\")\napi.add(\"aLongerString\")\napi.add(\"aDifferentString\")\napi.add(\"sOmethingElse\")\napi.prepare()\neditor.setAutoCompletionThreshold(1)\neditor.setAutoCompletionSource(Qsci.QsciScintilla.AcsAPIs)\n\neditor.show()\neditor.setText(open(sys.argv[0]).read())\nsys.exit(app.exec_())\n</code></pre>\n"}, {"tags": ["python", "append"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1507755594, "post_id": 46697394, "comment_id": 80342646, "body": "That&#39;s like 30 gigabytes of strings you&#39;re building there. Do you even have 30 gigabytes of RAM?"}, {"owner": {"reputation": 3502, "user_id": 2714534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/se2TH.jpg?s=128&g=1", "display_name": "blakev", "link": "https://stackoverflow.com/users/2714534/blakev"}, "edited": false, "score": 1, "creation_date": 1507755602, "post_id": 46697394, "comment_id": 80342650, "body": "You&#39;re adding 1 MB of data 30k times in a loop and you&#39;re wondering why it&#39;s slow? Also, <code>&quot;testeafda&quot; * 100000</code> is going to have to rebuild the string 100,000 times since strings are immutable. You&#39;d get an instant speed up if you predefined that string outside the loop and appended it to a list instead of rebuilding each iteration."}], "answers": [{"tags": [], "owner": {"reputation": 498, "user_id": 8396562, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wYKbnoTMUkA/AAAAAAAAAAI/AAAAAAAAG2Y/fUDsBs07yHQ/photo.jpg?sz=128", "display_name": "Samantha", "link": "https://stackoverflow.com/users/8396562/samantha"}, "is_accepted": false, "score": 0, "last_activity_date": 1507755999, "creation_date": 1507755999, "answer_id": 46697567, "question_id": 46697394, "link": "https://stackoverflow.com/questions/46697394/why-does-the-append-operation-in-python-work-slow-down-when-appending-large-stri/46697567#46697567", "title": "Why does the append operation in Python work slow down when appending large strings?", "body": "<p>I think it's from <code>\"testeafda\" * 100000</code> because the a new string is created 10000 times. </p>\n\n<p>Even when you append a character to an existing string, a new string is actually created. </p>\n"}, {"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1507757563, "post_id": 46697689, "comment_id": 80343493, "body": "Compared to the list the OP is trying to build in the loop, a list of 30,000 integers is a drop in the bucket."}], "tags": [], "owner": {"reputation": 708, "user_id": 5407046, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/801df4bf5faf6dc26bd4d29ac3d1cee2?s=128&d=identicon&r=PG&f=1", "display_name": "Brijesh", "link": "https://stackoverflow.com/users/5407046/brijesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1507757360, "last_edit_date": 1507757360, "creation_date": 1507756572, "answer_id": 46697689, "question_id": 46697394, "link": "https://stackoverflow.com/questions/46697394/why-does-the-append-operation-in-python-work-slow-down-when-appending-large-stri/46697689#46697689", "title": "Why does the append operation in Python work slow down when appending large strings?", "body": "<p>Why don't you use Xrange function (if you are using Python 2.x), that should have a marked improvement in memory management. Like;</p>\n\n<pre><code>for i in xrange(30000):\n ...\n</code></pre>\n"}], "owner": {"reputation": 443, "user_id": 1507889, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f3d6850c91ada65b62df8f909e67719d?s=128&d=identicon&r=PG", "display_name": "user1507889", "link": "https://stackoverflow.com/users/1507889/user1507889"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1507761396, "creation_date": 1507755300, "last_edit_date": 1507761396, "question_id": 46697394, "link": "https://stackoverflow.com/questions/46697394/why-does-the-append-operation-in-python-work-slow-down-when-appending-large-stri", "title": "Why does the append operation in Python work slow down when appending large strings?", "body": "<p>When you run the following code, append times take 10 times longer as time goes on. </p>\n\n<pre><code>from datetime import datetime\n\ntest = []\n\nfor i in range(30000):\n    time_before_append = datetime.now()\n    test.append(\"testeafda\" * 100000)\n    time_after_append = datetime.now()\n    print(time_after_append - time_before_append)\n</code></pre>\n\n<p>I understand that append is generally O(1). Does this relate to garbage collection, the list resizing itself, memory usage and/or something else? Just trying to understand how the internals of Python work.  </p>\n"}, {"tags": ["python", "python-3.x", "random"], "comments": [{"owner": {"reputation": 7231, "user_id": 236345, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ekgwV.jpg?s=128&g=1", "display_name": "Alfabravo", "link": "https://stackoverflow.com/users/236345/alfabravo"}, "edited": false, "score": 0, "creation_date": 1507755431, "post_id": 46697386, "comment_id": 80342551, "body": "sorry but in your question it&#39;s not clear what&#39;s the stopping criteria. Also, what does &quot;dice 10 000&quot; mean?"}, {"owner": {"reputation": 27, "user_id": 8761548, "user_type": "registered", "profile_image": "https://graph.facebook.com/1931456966880887/picture?type=large", "display_name": "Adrian Grupaty Chlpik", "link": "https://stackoverflow.com/users/8761548/adrian-grupaty-chlpik"}, "reply_to_user": {"reputation": 7231, "user_id": 236345, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ekgwV.jpg?s=128&g=1", "display_name": "Alfabravo", "link": "https://stackoverflow.com/users/236345/alfabravo"}, "edited": false, "score": 0, "creation_date": 1507756048, "post_id": 46697386, "comment_id": 80342859, "body": "dice 10 000 is the name of game the stopping criteria is either you didnt threw 1,5 or straight or trips or higher everything count as point and if you hit something lets say trips of sixes you now can decide whether you throw again but without these three dices but if you fail to hit anything you lose every point you ve got in the section or keep wich gives you 600 points"}, {"owner": {"user_type": "does_not_exist", "display_name": "user707650"}, "edited": false, "score": 0, "creation_date": 1507794169, "post_id": 46697386, "comment_id": 80354923, "body": "Your example code doesn&#39;t run; please make sure your example code is working, even if it doesn&#39;t provide the results you&#39;re looking for."}], "owner": {"reputation": 27, "user_id": 8761548, "user_type": "registered", "profile_image": "https://graph.facebook.com/1931456966880887/picture?type=large", "display_name": "Adrian Grupaty Chlpik", "link": "https://stackoverflow.com/users/8761548/adrian-grupaty-chlpik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507793569, "creation_date": 1507755270, "last_edit_date": 1507793569, "question_id": 46697386, "link": "https://stackoverflow.com/questions/46697386/computer-decision-mechanism", "title": "Computer decision mechanism", "body": "<p>I have 5 players where they throw dice. We cannot use any external input such as onclick action or something.</p>\n\n<p>How do I make the computer decide whether it is good to stop throwing? The stopping criteria is either you didn't throw 1,5 or straight or triples or higher. Everything counts as a point and if you hit something, lets say triple sixes you now can decide whether you throw again, but without these three dice. But if you fail to hit anything on the next throw, you lose every point you've got in the section. Or keep the sixes, which gives you 600 points.</p>\n\n<pre><code>def game(length, output = True):\n    round_no = 0\n    avg_pts = 0\n    player_points[0,0,0,0,0]\n    while output:\n        round_no += 1\n        for i in range 5:\n            lock = true\n            while lock: \n            dice_throw(number_of_throws)\n\ndef dice_throw(number_of_throws):\n    throw_values = []\n    for i in range(number_of_throws):\n        throw_values.append(randint(1,6))\n    throw_values.sort()   \n    for i in range(throw_values)\n</code></pre>\n\n<p>How can I make a mechanism that decides if its good to continue throwing or not?</p>\n"}, {"tags": ["python", "python-2.7", "python-3.x"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1507755441, "post_id": 46697369, "comment_id": 80342559, "body": "Why do you feel you need two scripts, and an intermediate file, for this?  Anything you could possibly do in the second script, you could do in the first script (inside the <code>if</code>)."}, {"owner": {"reputation": 315, "user_id": 7762652, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/f7cac3a546a55e49ed85ed343290e606?s=128&d=identicon&r=PG&f=1", "display_name": "nice_remark", "link": "https://stackoverflow.com/users/7762652/nice-remark"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1507756901, "post_id": 46697369, "comment_id": 80343199, "body": "sorry @jasonharper my python knowledge is a bit rusty and couldn&#39;t think of another method. don&#39;t get me started on my complete lack of understanding of regular expressions..."}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 7762652, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/f7cac3a546a55e49ed85ed343290e606?s=128&d=identicon&r=PG&f=1", "display_name": "nice_remark", "link": "https://stackoverflow.com/users/7762652/nice-remark"}, "edited": false, "score": 0, "creation_date": 1507756386, "post_id": 46697517, "comment_id": 80343000, "body": "but what about removing the excess data following the n or N values"}, {"owner": {"reputation": 315, "user_id": 7762652, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/f7cac3a546a55e49ed85ed343290e606?s=128&d=identicon&r=PG&f=1", "display_name": "nice_remark", "link": "https://stackoverflow.com/users/7762652/nice-remark"}, "edited": false, "score": 0, "creation_date": 1507756833, "post_id": 46697517, "comment_id": 80343171, "body": "when trying to write this to a text file, the data is not listed line by line like in the output of your code. would adding the line <code>file.write(m.group(1))</code> do the trick?"}, {"owner": {"reputation": 315, "user_id": 7762652, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/f7cac3a546a55e49ed85ed343290e606?s=128&d=identicon&r=PG&f=1", "display_name": "nice_remark", "link": "https://stackoverflow.com/users/7762652/nice-remark"}, "edited": false, "score": 0, "creation_date": 1507807073, "post_id": 46697517, "comment_id": 80362825, "body": "2.7, but could download the latest version of python 3.XX if necessary"}, {"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "reply_to_user": {"reputation": 315, "user_id": 7762652, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/f7cac3a546a55e49ed85ed343290e606?s=128&d=identicon&r=PG&f=1", "display_name": "nice_remark", "link": "https://stackoverflow.com/users/7762652/nice-remark"}, "edited": false, "score": 0, "creation_date": 1507807265, "post_id": 46697517, "comment_id": 80362951, "body": "@nice_remark, yes, upgrade to newer version and share the screenshot with your current output"}, {"owner": {"reputation": 315, "user_id": 7762652, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/f7cac3a546a55e49ed85ed343290e606?s=128&d=identicon&r=PG&f=1", "display_name": "nice_remark", "link": "https://stackoverflow.com/users/7762652/nice-remark"}, "edited": false, "score": 0, "creation_date": 1507809066, "post_id": 46697517, "comment_id": 80364042, "body": "the output is similar to what you provided in your original response. but I still cannot figure out how to write the data to a .txt file in that format. I use the sublime text python build system to print the output (which is where i see it output a format similar to your post). when adding <code>file.write(m.group(1))</code> to the <code>if m</code> statement the output .txt file is one giant line of all the n and N data. for instance the ouput would be N69n0975"}], "tags": [], "owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "is_accepted": false, "score": 1, "last_activity_date": 1507756524, "last_edit_date": 1507756524, "creation_date": 1507755785, "answer_id": 46697517, "question_id": 46697369, "link": "https://stackoverflow.com/questions/46697369/print-out-lines-that-begin-with-two-different-string-outputs/46697517#46697517", "title": "Print out lines that begin with two different string outputs?", "body": "<p>With <code>re.search()</code> function:</p>\n\n<p>Sample <code>file.txt</code> content:</p>\n\n<pre><code>inst \"N69\" \"IOB\",placed BIOB_X11Y0 R8  ,\nsome text\ninst \"n0975\" \"SLICEX\",placed CLEXL_X20Y5 SLICE_X32Y5  ,\ntext\nanother text\n</code></pre>\n\n<hr>\n\n<pre><code>import re\n\nwith open('file.txt', 'r') as f:\n    for l in f.read().splitlines():\n        m = re.search(r'^inst \"([Nn][^\"]+)\"', l)\n        if m:\n            print(m.group(1))\n</code></pre>\n\n<p>The output:</p>\n\n<pre><code>N69\nn0975\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 977, "user_id": 2488983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2pRE.jpg?s=128&g=1", "display_name": "bergerg", "link": "https://stackoverflow.com/users/2488983/bergerg"}, "is_accepted": false, "score": 1, "last_activity_date": 1507755812, "creation_date": 1507755812, "answer_id": 46697526, "question_id": 46697369, "link": "https://stackoverflow.com/questions/46697369/print-out-lines-that-begin-with-two-different-string-outputs/46697526#46697526", "title": "Print out lines that begin with two different string outputs?", "body": "<p>Yes with the <code>re</code> module.</p>\n\n<pre><code>re.finditer(r'^inst\\s+\\\"n(\\d+)\\\"', the_whole_file, re.I)\n</code></pre>\n\n<p>Will return you an iterator of all the matches.\nFor each match you will need to do <code>.group(1)</code> to get those numbers you wanted.</p>\n\n<p>Notice that you don't need to filter the file first using this method. You can do this for the whole file.</p>\n\n<p>The output in your case will be:</p>\n\n<pre><code>69\n0975\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3203, "user_id": 2763915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b53d3b3f8b36383de69ab29d9633251?s=128&d=identicon&r=PG&f=1", "display_name": "atru", "link": "https://stackoverflow.com/users/2763915/atru"}, "is_accepted": false, "score": 0, "last_activity_date": 1507763725, "creation_date": 1507763725, "answer_id": 46698935, "question_id": 46697369, "link": "https://stackoverflow.com/questions/46697369/print-out-lines-that-begin-with-two-different-string-outputs/46698935#46698935", "title": "Print out lines that begin with two different string outputs?", "body": "<p>Here is one solution:</p>\n\n<pre><code>with open('nfile.txt','r') as f:\n    for line in f:\n        if line.startswith('inst \"n') or line.startswith('inst \"N'):\n            print line.split()[1]\n</code></pre>\n\n<p>For each line in the file <code>startswith</code> part checks if the line starts with one of your target patters. If yes, it splits the line using <code>split</code> and prints the second component which is the part with <code>n</code> or <code>N</code>. </p>\n"}], "owner": {"reputation": 315, "user_id": 7762652, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/f7cac3a546a55e49ed85ed343290e606?s=128&d=identicon&r=PG&f=1", "display_name": "nice_remark", "link": "https://stackoverflow.com/users/7762652/nice-remark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1507763725, "creation_date": 1507755214, "question_id": 46697369, "link": "https://stackoverflow.com/questions/46697369/print-out-lines-that-begin-with-two-different-string-outputs", "title": "Print out lines that begin with two different string outputs?", "body": "<p>I am trying to scan an input file and print out parts of lines that begin with a certain string. The text file is 10000+ lines, but I am only concerned with the beginning line, and more specifically the data within that line. For clarification, here are two lines of code which explain what I am trying to say.</p>\n\n<pre><code>inst \"N69\" \"IOB\",placed BIOB_X11Y0 R8  ,\n\ninst \"n0975\" \"SLICEX\",placed CLEXL_X20Y5 SLICE_X32Y5  ,\n</code></pre>\n\n<p>Here is the code that I have gotten to so far:</p>\n\n<pre><code>searchfile = open(\"C:\\PATH\\TO\\FILE.txt\",\"r\")\nfor line in searchfile:\n    if \"inst \" in line: \n        print line\nsearchfile.close()\n</code></pre>\n\n<p>Now this is great if I am looking for all lines that start with \"inst\", but I am specifically looking for lines that start with \"inst \"N\"\" or \"inst \"n\"\". From there, I wanted to extract just the string starting with N  or n.</p>\n\n<p>My idea was to first extract those lines (as shown above) to a new .txt file, then run another script to get only the portions of the lines that have N or n. In the example above, I am only concerned with N69 and n0975. Is there an easier method of doing this?</p>\n"}, {"tags": ["python", "dictionary", "jupyter-notebook"], "comments": [{"owner": {"reputation": 7647, "user_id": 987358, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/ace6dfd8c4f8c95d5a3fddc020af97f8?s=128&d=identicon&r=PG", "display_name": "Michael Butscher", "link": "https://stackoverflow.com/users/987358/michael-butscher"}, "edited": false, "score": 1, "creation_date": 1507755335, "post_id": 46697344, "comment_id": 80342518, "body": "Keys in <code>dict</code> don&#39;t have an order. Since Python 2.7 there is <code>collections.OrderedDict</code>"}], "answers": [{"tags": [], "owner": {"reputation": 498, "user_id": 8396562, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wYKbnoTMUkA/AAAAAAAAAAI/AAAAAAAAG2Y/fUDsBs07yHQ/photo.jpg?sz=128", "display_name": "Samantha", "link": "https://stackoverflow.com/users/8396562/samantha"}, "is_accepted": false, "score": 0, "last_activity_date": 1507755476, "creation_date": 1507755476, "answer_id": 46697451, "question_id": 46697344, "link": "https://stackoverflow.com/questions/46697344/does-the-keys-appended-to-a-dictionary-vary-depending-on-python-machine-env/46697451#46697451", "title": "Does the keys appended to a dictionary vary depending on python machine/env", "body": "<p>It's not stored in order. You can try using <code>OrderedDict</code> <a href=\"https://docs.python.org/3/library/collections.html#collections.OrderedDict\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/collections.html#collections.OrderedDict</a></p>\n"}, {"tags": [], "owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "is_accepted": true, "score": 0, "last_activity_date": 1507756142, "last_edit_date": 1507756142, "creation_date": 1507755720, "answer_id": 46697497, "question_id": 46697344, "link": "https://stackoverflow.com/questions/46697344/does-the-keys-appended-to-a-dictionary-vary-depending-on-python-machine-env/46697497#46697497", "title": "Does the keys appended to a dictionary vary depending on python machine/env", "body": "<p>You can use <a href=\"https://docs.python.org/3/library/collections.html#collections.Counter\" rel=\"nofollow noreferrer\"><code>collections.Counter</code></a> to count character occurrences.</p>\n\n<p>Since the keys in a <a href=\"https://docs.python.org/3/tutorial/datastructures.html#dictionaries\" rel=\"nofollow noreferrer\">dictionary have no order</a>, you need to loop over the string:</p>\n\n<pre><code>import collections\n\n\ndef first_singleton(s):\n    counter = collections.Counter(s)\n    for c in s:\n        if counter[c] == 1:\n            return c\n    return None\n\nprint(first_singleton('abacabad'))\n</code></pre>\n"}], "owner": {"reputation": 1909, "user_id": 2375574, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/9ed9192b2e8d4dad7864bb45f589a449?s=128&d=identicon&r=PG", "display_name": "Saleem Ahmed", "link": "https://stackoverflow.com/users/2375574/saleem-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 46697497, "answer_count": 2, "score": 0, "last_activity_date": 1507756142, "creation_date": 1507755107, "question_id": 46697344, "link": "https://stackoverflow.com/questions/46697344/does-the-keys-appended-to-a-dictionary-vary-depending-on-python-machine-env", "title": "Does the keys appended to a dictionary vary depending on python machine/env", "body": "<p>I started practicing codefights recently, its supposed to be a great practice space for online interview questions. </p>\n\n<p>Problem being, this is my solution in python for a simple question on finding the first non repeating character in a string : </p>\n\n<pre><code>def firstNotRepeatingCharacter(s):\n    d = dict()\n    for i in range(len(s)):\n        key = s[i]\n        print d\n        if key in d:\n            d[key] += 1\n        else:\n            d[key] = 1\n    found = '_'\n    for key in d:\n        if d[key] == 1:\n            found = key\n            break\n    return found\n</code></pre>\n\n<p>which when I run on my local jupyter notebook gives me the following output : </p>\n\n<pre><code>firstNotRepeatingCharacter('abacabad')   \n\n{}\n{'a': 1}\n{'a': 1, 'b': 1}\n{'a': 2, 'b': 1}\n{'a': 2, 'b': 1, 'c': 1}\n{'a': 3, 'b': 1, 'c': 1}\n{'a': 3, 'b': 2, 'c': 1}\n{'a': 4, 'b': 2, 'c': 1}\nOut[89]:\n'c'\n</code></pre>\n\n<p>Which is awesome. That is the answer. </p>\n\n<p>However running the same on <a href=\"https://codefights.com/\" rel=\"nofollow noreferrer\">codefights </a> env gives an error: \n<a href=\"https://i.stack.imgur.com/w5Xjj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/w5Xjj.png\" alt=\"code fights output gives **&#39;d&#39;** because it gets added to the dictionary before. \"></a></p>\n\n<p>So my question being, I being a python noob, the append in a dictionary does it add keys to random place or is it in an orderly fashion ?? \nOr the output difference is because of some difference in the python env of the jupyter noteboook and their online compiler. </p>\n"}, {"tags": ["python", "pandas", "numpy", "dataset", "aggregate"], "comments": [{"owner": {"reputation": 23416, "user_id": 3877338, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/300539394aa55b738b51e6769cca9b3e?s=128&d=identicon&r=PG&f=1", "display_name": "JohnE", "link": "https://stackoverflow.com/users/3877338/johne"}, "edited": false, "score": 1, "creation_date": 1507756775, "post_id": 46697328, "comment_id": 80343144, "body": "mean is just sum() / n and you should know what n is.  std is a little harder but same basic approach will work.  you just need (0-mean) * (n-x) where x is the number of non-zeroes."}], "answers": [{"tags": [], "owner": {"reputation": 562, "user_id": 4598067, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pRKOta17UmQ/AAAAAAAAAAI/AAAAAAAAAmc/7JBZC0FlHIw/photo.jpg?sz=128", "display_name": "pythomatic", "link": "https://stackoverflow.com/users/4598067/pythomatic"}, "is_accepted": true, "score": 1, "last_activity_date": 1507755286, "creation_date": 1507755286, "answer_id": 46697393, "question_id": 46697328, "link": "https://stackoverflow.com/questions/46697328/mean-std-calculation-of-data-set-logging-change-of-value-only/46697393#46697393", "title": "Mean/Std calculation of data-set logging change of value only", "body": "<p>I would order the list by <code>epoch</code>, then multiply the <code>value</code> of each by the difference between <code>epochs</code>. You don't need to store extra data that way, but you can pretty easily solve for the mean. </p>\n"}], "owner": {"reputation": 97, "user_id": 2256679, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/Yaere.jpg?s=128&g=1", "display_name": "Aeolos", "link": "https://stackoverflow.com/users/2256679/aeolos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "accepted_answer_id": 46697393, "answer_count": 1, "score": 0, "last_activity_date": 1507755286, "creation_date": 1507755043, "question_id": 46697328, "link": "https://stackoverflow.com/questions/46697328/mean-std-calculation-of-data-set-logging-change-of-value-only", "title": "Mean/Std calculation of data-set logging change of value only", "body": "<p>I wish to calculate the mean, and std of a time series data-set that only records when there is a change in value. </p>\n\n<p>The time series is at 1 second intervals, which puts the risk of a bloated data-set if each missing value between changes is generated. </p>\n\n<p>Example of data set type: [Epoch, Value]</p>\n\n<pre><code>[[152345235, 3], [152345335, 12], [152345835, 8]]\n</code></pre>\n\n<p>We are using python for cleaning and aggregating the data. A sparse matrix would not suffice, as it is based on ignoring 0 values, which are not present. On research there was nothing showing that could readily solve this problem.</p>\n\n<p>My question is, has anyone come across a similar problem, and if so what techniques were used to solve.</p>\n"}, {"tags": ["python", "drive", "seek", "fclose", "invalid-argument"], "comments": [{"owner": {"reputation": 875, "user_id": 6698273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c77a7034e4def459c75c7fa1ee5e7d?s=128&d=identicon&r=PG&f=1", "display_name": "BlooB", "link": "https://stackoverflow.com/users/6698273/bloob"}, "edited": false, "score": 0, "creation_date": 1507755049, "post_id": 46697259, "comment_id": 80342400, "body": "why not add try, catch block around them, that way yo might catch something"}, {"owner": {"reputation": 114, "user_id": 3059148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540fc5cbd97627ad4f59b4055ba02bed?s=128&d=identicon&r=PG&f=1", "display_name": "Nuclear_Man_D", "link": "https://stackoverflow.com/users/3059148/nuclear-man-d"}, "reply_to_user": {"reputation": 875, "user_id": 6698273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c77a7034e4def459c75c7fa1ee5e7d?s=128&d=identicon&r=PG&f=1", "display_name": "BlooB", "link": "https://stackoverflow.com/users/6698273/bloob"}, "edited": false, "score": 0, "creation_date": 1507867049, "post_id": 46697259, "comment_id": 80390977, "body": "@BlooB I added the traceback for your examination.  No errors with regular files and it used to work fine with compact flash."}, {"owner": {"reputation": 5452, "user_id": 3714940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bwcdU.jpg?s=128&g=1", "display_name": "SiHa", "link": "https://stackoverflow.com/users/3714940/siha"}, "edited": false, "score": 1, "creation_date": 1507878814, "post_id": 46697259, "comment_id": 80394981, "body": "Just a stab in the dark - if you are using a larger CF card than previously, might the sector sizes now be larger? If they are 1024 Bytes now, 512*3 would not match a sector boundary and would fail."}, {"owner": {"reputation": 875, "user_id": 6698273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c77a7034e4def459c75c7fa1ee5e7d?s=128&d=identicon&r=PG&f=1", "display_name": "BlooB", "link": "https://stackoverflow.com/users/6698273/bloob"}, "edited": false, "score": 0, "creation_date": 1507917120, "post_id": 46697259, "comment_id": 80417546, "body": "@Nuclear_Man_D something really stupid, but can you close() the file, than open(), than try seek(), tell me what happens"}, {"owner": {"reputation": 114, "user_id": 3059148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540fc5cbd97627ad4f59b4055ba02bed?s=128&d=identicon&r=PG&f=1", "display_name": "Nuclear_Man_D", "link": "https://stackoverflow.com/users/3059148/nuclear-man-d"}, "reply_to_user": {"reputation": 5452, "user_id": 3714940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bwcdU.jpg?s=128&g=1", "display_name": "SiHa", "link": "https://stackoverflow.com/users/3714940/siha"}, "edited": false, "score": 0, "creation_date": 1508009374, "post_id": 46697259, "comment_id": 80443072, "body": "@SiHa I did not think of that - I am used to accessing the compact flash on the Z80 processor through an IDE interface.  The blocks are multiples of 512 there, but maybe a new protocol changes things a bit... Thank you.  I will look into that."}, {"owner": {"reputation": 114, "user_id": 3059148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540fc5cbd97627ad4f59b4055ba02bed?s=128&d=identicon&r=PG&f=1", "display_name": "Nuclear_Man_D", "link": "https://stackoverflow.com/users/3059148/nuclear-man-d"}, "reply_to_user": {"reputation": 875, "user_id": 6698273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/29c77a7034e4def459c75c7fa1ee5e7d?s=128&d=identicon&r=PG&f=1", "display_name": "BlooB", "link": "https://stackoverflow.com/users/6698273/bloob"}, "edited": false, "score": 0, "creation_date": 1508009391, "post_id": 46697259, "comment_id": 80443079, "body": "@BlooB yea, I tried closing, but closing it creates the same error as seek."}], "owner": {"reputation": 114, "user_id": 3059148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/540fc5cbd97627ad4f59b4055ba02bed?s=128&d=identicon&r=PG&f=1", "display_name": "Nuclear_Man_D", "link": "https://stackoverflow.com/users/3059148/nuclear-man-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1507866998, "creation_date": 1507754751, "last_edit_date": 1507866998, "question_id": 46697259, "link": "https://stackoverflow.com/questions/46697259/python-3-file-close-errorno-22-accessing-compact-flash-card", "title": "python 3 file.close() Errorno 22 - accessing compact flash card", "body": "<p>I am using python to directly access the bytes written on a compact flash card.  With windows (the OS I am currently using) a drive can be accessed directly by adding a '\\\\\\\\.\\\\' (\\\\.\\ when printed) before the drive name.  The result is a string like '\\\\\\\\.\\\\G:'.  Opening and writing these drives work fine; But after some of my code executes o.close() and o.seek() both fail.</p>\n\n<pre><code>f=open(\"\\\\\\\\.\\\\G:\",'rb+') # use 'rb+' for disk/drive/card writing\nf.seek(512*3)             # multiples of 512 are required (here seek works fine)\nf.write(512*b'x')         # fill sector with the letter x\n...                       # some of my code\nf.close()                 # Errorno 22 : invalid argument\nf.seek(0)                 # Also an errorno 22, even if file is open\n</code></pre>\n\n<p>This suggests the problem is in my other code.... However that code only uses the file to seek and write, which using those functions there causes no errors.</p>\n\n<p>Here is my exact error message:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"NFS.py\", line 139 in &lt;module&gt;\n    make_fs(args.input, fo)\n  File \"NFS.py\", line 12 in make_fs\n    root_data, ls=walk(i, o, tmp)\n  File \"NFS.py\", line 34 in walk\n    o.seek(512*i)\nOSError: [Errorno 22] Invalid argument\n</code></pre>\n\n<p>Why would python (or the OS) give me 'invalid argument' when seeking to zero or closing the file?  Remember, of course, that the file is really a hardware compact flash card.</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 49533, "user_id": 1057429, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XG8at.jpg?s=128&g=1", "display_name": "Nir Alfasi", "link": "https://stackoverflow.com/users/1057429/nir-alfasi"}, "edited": false, "score": 2, "creation_date": 1507754735, "post_id": 46697201, "comment_id": 80342231, "body": "But what&#39;s the point on doing &quot;the fastest&quot; ? do you think it will affect performance ? :)"}], "answers": [{"tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": true, "score": 3, "last_activity_date": 1507754655, "creation_date": 1507754655, "answer_id": 46697233, "question_id": 46697201, "link": "https://stackoverflow.com/questions/46697201/whats-the-fastest-way-of-creating-dictionary-inside-list/46697233#46697233", "title": "What&#39;s the fastest way of creating dictionary inside list?", "body": "<p>Use the dictionary literal syntax, <code>{...}</code></p>\n\n<pre><code>my_list.append({\"key1\": my_text1, \"key2\": my_text2})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 977, "user_id": 2488983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2pRE.jpg?s=128&g=1", "display_name": "bergerg", "link": "https://stackoverflow.com/users/2488983/bergerg"}, "is_accepted": false, "score": 0, "last_activity_date": 1507755115, "creation_date": 1507755115, "answer_id": 46697347, "question_id": 46697201, "link": "https://stackoverflow.com/questions/46697201/whats-the-fastest-way-of-creating-dictionary-inside-list/46697347#46697347", "title": "What&#39;s the fastest way of creating dictionary inside list?", "body": "<p>I'll take it a step further and assume you have a list of texts you want to format as dicts and append to a list:</p>\n\n<pre><code>[{\"key%d\" % (i + 1) : text for i, text in enumerate(text_list)} for text_list in list_of_lists]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "is_accepted": false, "score": 0, "last_activity_date": 1507755121, "creation_date": 1507755121, "answer_id": 46697349, "question_id": 46697201, "link": "https://stackoverflow.com/questions/46697201/whats-the-fastest-way-of-creating-dictionary-inside-list/46697349#46697349", "title": "What&#39;s the fastest way of creating dictionary inside list?", "body": "<p>There is this other syntax you can try:</p>\n\n<pre><code>my_list.append(dict(key1=my_text1, key2=my_text2))\n</code></pre>\n\n<p>Not sure about this issue of \"fastest\" considering the fact that doing something like this is quite simple in python. The above syntax is probably fastest to <em>write</em>, but I have a feeling that's not what you are after.</p>\n"}, {"tags": [], "owner": {"reputation": 7756, "user_id": 2118666, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ND705.png?s=128&g=1", "display_name": "stephen", "link": "https://stackoverflow.com/users/2118666/stephen"}, "is_accepted": false, "score": 0, "last_activity_date": 1507784665, "creation_date": 1507784665, "answer_id": 46701783, "question_id": 46697201, "link": "https://stackoverflow.com/questions/46697201/whats-the-fastest-way-of-creating-dictionary-inside-list/46701783#46701783", "title": "What&#39;s the fastest way of creating dictionary inside list?", "body": "<p>The fastest way is to be declarative:</p>\n\n<pre><code>my_list = [{'Key1': 'text1', 'Key2': 'text2'}]\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 5789155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bb8b1f1ebd4736e1e74bd76dacb9ef0c?s=128&d=identicon&r=PG&f=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/5789155/mat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 46697233, "answer_count": 4, "score": 0, "last_activity_date": 1507784665, "creation_date": 1507754553, "question_id": 46697201, "link": "https://stackoverflow.com/questions/46697201/whats-the-fastest-way-of-creating-dictionary-inside-list", "title": "What&#39;s the fastest way of creating dictionary inside list?", "body": "<pre><code>my_text1 = 'text1'\nmy_text2 = 'text2'\nmy_list = []\nmy_dict = {}\nmy_dict['Key1'] = my_text1\nmy_dict['Key2'] = my_text2\nmy_list.append(my_dict)\n</code></pre>\n\n<p>What's the fastest way to create a list of dictionaries? \nIs it possible to use write variable in dictionary?</p>\n\n<p>I wanted to make something like this:</p>\n\n<pre><code>my_list.append('key1'= %s, 'key2'= %s % (my_text1, my_text2))\n</code></pre>\n\n<p>I know it's wrong syntax but It's my goal to append different values from variables</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 0, "creation_date": 1507755207, "post_id": 46697181, "comment_id": 80342457, "body": "Well for starters I would create a list or dictionary to put the questions inside and then you could draw a random question of that difficulty from there."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8690990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f09298e6eaa275282049f0634514929?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey Tang", "link": "https://stackoverflow.com/users/8690990/jeffrey-tang"}, "edited": false, "score": 0, "creation_date": 1508185707, "post_id": 46697348, "comment_id": 80502954, "body": "If I was to do another &#39;mapping&#39; for computing it wouldn&#39;t work because of a keyError."}], "tags": [], "owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "is_accepted": true, "score": 0, "last_activity_date": 1507755121, "creation_date": 1507755121, "answer_id": 46697348, "question_id": 46697181, "link": "https://stackoverflow.com/questions/46697181/handling-a-selection/46697348#46697348", "title": "Handling a selection", "body": "<p>The classic practice is to use a mapping. Here you need a mapping for <em>options</em> and another mapping for <em>difficulty</em>.</p>\n\n<p>Here is a possible implementation:</p>\n\n<pre><code>options = input(\"Choose 'a' for arithmetic or 'c' for computing: \")\ndifficulty = input(\"Choose 'e' for easy , 'm' for medium , 'h' for hard: \")\n\nmapping = {'a': {\n    'e': \"What is 4+4?\",\n    'm': \"What is 8x8+4-2?\",\n    'h': \"What is 8+4+3-2x8+2?\"\n}}\n\nquestion = mapping[options][difficulty]\nanswer = int(input(question))\n</code></pre>\n\n<p>Of course, you also need to store the expected answers. </p>\n"}, {"comments": [{"owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 0, "creation_date": 1507755719, "post_id": 46697425, "comment_id": 80342706, "body": "nice yaml reference, +1"}, {"owner": {"reputation": 2051, "user_id": 2514753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8wHrt.jpg?s=128&g=1", "display_name": "darthsidious", "link": "https://stackoverflow.com/users/2514753/darthsidious"}, "reply_to_user": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 0, "creation_date": 1507755821, "post_id": 46697425, "comment_id": 80342753, "body": "yeah, you can nest your answers and stuff. It&#39;s pretty handy. Of course a <code>JSON</code> file can also be used but the structure gets a bit complicated if you want arrays and stuff."}], "tags": [], "owner": {"reputation": 2051, "user_id": 2514753, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8wHrt.jpg?s=128&g=1", "display_name": "darthsidious", "link": "https://stackoverflow.com/users/2514753/darthsidious"}, "is_accepted": false, "score": 4, "last_activity_date": 1507755405, "creation_date": 1507755405, "answer_id": 46697425, "question_id": 46697181, "link": "https://stackoverflow.com/questions/46697181/handling-a-selection/46697425#46697425", "title": "Handling a selection", "body": "<p>Since there is no problem with the code and is more stylistic, each person might have their own view on the matter. One way to do it is:</p>\n\n<pre><code>options_diffCulty = {\n    \"a\": {\n        \"e\": \"What is 4+4?\",\n        \"m\": \"What is 8x8+4-2?\",\n        \"h\": \"What is 8+4+3-2x8+2?\"\n    }\n}\noptions = input(\"Choose 'a' for arithmetic or 'c' for computing: \")\ndiffCulty = input(\"Choose 'e' for easy , 'm' for medium , 'h' for hard: \")\nquestOne = int(input(options_diffCulty[options][diffCulty]))\n</code></pre>\n\n<p>You can also use <a href=\"http://pyyaml.org/wiki/PyYAMLDocumentation\" rel=\"nofollow noreferrer\">yaml</a> to give a more hierarchical structure to your questions like:</p>\n\n<pre><code>a:\n  e: What is 4+4?\n  m: What is 8x8+4-2?\n  h: What is 8+4+3-2x8+2?\nb:\n  e: What is 4+4?\n  m: What is 8x8+4-2?\n  h: What is 8+4+3-2x8+2?\n</code></pre>\n\n<p>This can be loaded into your program with a simple <code>options_diffCulty = yaml.load(open(\"your yaml\").read())</code> and the continue from there. But thats just me.</p>\n"}, {"tags": [], "owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "is_accepted": false, "score": 0, "last_activity_date": 1507757261, "last_edit_date": 1507757261, "creation_date": 1507755644, "answer_id": 46697482, "question_id": 46697181, "link": "https://stackoverflow.com/questions/46697181/handling-a-selection/46697482#46697482", "title": "Handling a selection", "body": "<p>I thought about something like this:</p>\n\n<pre><code>import random\n\noptions = input(\"Choose 'a' for arithmetic or 'c' for computing: \")\ndiffCulty = input (\"Choose 'e' for easy , 'm' for medium , 'h' for hard: \")\nquestions = int(input(\"How many? \"))\n\nqa = {\"a\": {\n        \"e\":[{\"q\":\"What is 4+4?\",\"a\":8},\n             {\"q\":\"What is 5+4?\",\"a\":9}],\n        \"m\":[{\"q\":\"What is 8x8+4-2?\",\"a\":66}],\n        \"h\":[{\"q\":\"What is 8+4+3-2x8+2?\",\"a\":1}]\n    }}\n\n\nwhile questions:\n    array = qa[options][diffCulty]\n    randomint = random.randint(0,len(array)-1)\n\n    q = array[randomint][\"q\"]\n    a = array[randomint][\"a\"]\n\n\n    if int(input(q)) == a:\n        print(\"Right\")\n    else:\n        print(\"Wrong\")\n\n    questions -= 1\n</code></pre>\n\n<hr>\n\n<p>And to create the question dictionary you could have a simple spreadsheet converted to csv:</p>\n\n<pre><code>import pandas as pd\nimport io\nfrom collections import defaultdict\n\ncsv = \"\"\"type,difficulty,question,answer\na,e,What is 4+4?,8\na,e,What is 4+5?,9\na,m,What is 4+4-2*2?,4\"\"\"\n\ndf = pd.read_csv(io.StringIO(csv))\n\nd = defaultdict(lambda: defaultdict(list))\n\nfor item in df.to_dict(orient=\"records\"):\n    d[item[\"type\"]][item[\"difficulty\"]].append({\"q\":item[\"question\"],\"a\":int(item[\"answer\"])})\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8690990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f09298e6eaa275282049f0634514929?s=128&d=identicon&r=PG&f=1", "display_name": "Jeffrey Tang", "link": "https://stackoverflow.com/users/8690990/jeffrey-tang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 46697348, "answer_count": 3, "score": 0, "last_activity_date": 1507757261, "creation_date": 1507754477, "last_edit_date": 1507754666, "question_id": 46697181, "link": "https://stackoverflow.com/questions/46697181/handling-a-selection", "title": "Handling a selection", "body": "<p>Allows the user to make an input of the question they would like to choose and the difficulty they wish to complete in. </p>\n\n<p>The code below is very repetitive meaning the if and elif statements have the same coding but varies on the user options and difficulty they have chosen. </p>\n\n<p>So, is there a way to shorten this code since it is inefficient repeating the same code?</p>\n\n<pre><code>options = input(\"Choose 'a' for arithmetic or 'c' for computing: \")\ndiffCulty = input (\"Choose 'e' for easy , 'm' for medium , 'h' for hard: \")\n\nif options == \"a\" and diffCulty == \"e\":\n    questOne = int(input(\"What is 4+4?\"))\n\nelif options == \"a\" and diffCulty == \"m\":\n    questTwo = int(input(\"What is 8x8+4-2?\"))\n\nelif options == \"a\" and diffCulty == \"h\":\n    questThree = int(input(\"What is 8+4+3-2x8+2?\"))\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 7187, "user_id": 2243104, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47daacd71b7294e97d5ef36ba029a95c?s=128&d=identicon&r=PG&f=1", "display_name": "Reti43", "link": "https://stackoverflow.com/users/2243104/reti43"}, "edited": false, "score": 1, "creation_date": 1507754630, "post_id": 46697159, "comment_id": 80342190, "body": "There is nothing special about a function called main. Just define a function with the name you want, write its arguments and then the body of the function. Just like you did with <code>main()</code>. It&#39;s not clear to me what you&#39;re struggling with."}, {"owner": {"reputation": 304245, "user_id": 216074, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/609c93bafd659500f83fde04802a9be5?s=128&d=identicon&r=PG", "display_name": "poke", "link": "https://stackoverflow.com/users/216074/poke"}, "edited": false, "score": 0, "creation_date": 1507754892, "post_id": 46697159, "comment_id": 80342315, "body": "If you are new to Python, please <a href=\"https://docs.python.org/3/tutorial/index.html\" rel=\"nofollow noreferrer\">read the official tutorial</a> or check out <a href=\"https://sopython.com/wiki/What_tutorial_should_I_read%3F\" rel=\"nofollow noreferrer\">another tutorial</a>. What you are asking is very basic language knowledge, making this question is far too broad."}], "answers": [{"tags": [], "owner": {"reputation": 3502, "user_id": 2714534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/se2TH.jpg?s=128&g=1", "display_name": "blakev", "link": "https://stackoverflow.com/users/2714534/blakev"}, "is_accepted": false, "score": -2, "last_activity_date": 1507755170, "last_edit_date": 1507755170, "creation_date": 1507754749, "answer_id": 46697258, "question_id": 46697159, "link": "https://stackoverflow.com/questions/46697159/how-to-use-def-insert-name-here-functions/46697258#46697258", "title": "How to use def *insert name here* (): functions?", "body": "<p>Have a look at these similar questions:</p>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/19130958/what-does-it-mean-to-call-a-function-in-python\">What does it mean to call a function?</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/12722767/how-to-correctly-define-a-function\">How to correctly define a function?</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/32409802/basic-explanation-of-python-functions\">Basic explanation of Python functions?</a></p></li>\n</ol>\n\n<p>There's nothing special about the function named <code>main</code>. You can name functions whatever you want.</p>\n\n<p>When you \"call\" a function you're just jumping from one block of code to another. When the function returns it goes back to the line that called it.</p>\n\n<pre><code>def something():\n    print('something')\n\ndef other():\n    print('else')\n\ndef a_value():\n    return 100\n\nsomething()\nother()\nx = a_value()\nprint(x)\n\n# ~~~~~ output\nsomething\nelse\n100\n</code></pre>\n\n<hr>\n\n<p>In your example a good use of a function would be to calculate the employee's pay.</p>\n\n<pre><code>def total_pay(hours_worked, hourly_rate, overtime_after=40):\n    base_pay = min(overtime_after, hours_worked) * hourly_rate\n    overtime_pay = max(0, hours_worked - overtime_after) * (hourly_rate * 1.5)\n    return base_pay + overtime_pay\n</code></pre>\n\n<p>This function allows us to define the three things that determine a worker's pay.  The <code>base_pay</code> will be, at most, the number of hours before overtime is applied. The <code>overtime_pay</code> will be from 0 to \"some other limit\" that's not defined here. Overtime is given time and a half (<code>1.5</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 756, "user_id": 3218168, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c54f389614ac9d3007b2b983f10691ff?s=128&d=identicon&r=PG", "display_name": "BenWurth", "link": "https://stackoverflow.com/users/3218168/benwurth"}, "is_accepted": false, "score": 0, "last_activity_date": 1507755113, "creation_date": 1507755113, "answer_id": 46697346, "question_id": 46697159, "link": "https://stackoverflow.com/questions/46697159/how-to-use-def-insert-name-here-functions/46697346#46697346", "title": "How to use def *insert name here* (): functions?", "body": "<p>You can declare your functions outside of the main function declaration and then use them in the main function (or inside of other functions in the main function).</p>\n\n<p>So you could do something like:</p>\n\n<pre><code>def calcPay(hours):\n    # Does logic\n    return [400, 30, 430]\n\ndef displayOutput(regPay, overtimePay, totalPay):\n    # Prints formatted string\n\ndef main():\n    hoursWorked = float(input(\"How many hours did you work? \"))\n    pay = calcPay(hoursWorked)\n    displayOutput(pay[0], pay[1], pay[2])\n\nmain()\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 7809840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d603e364b2f7dab20b96018553ef4a48?s=128&d=identicon&r=PG&f=1", "display_name": "Sea W", "link": "https://stackoverflow.com/users/7809840/sea-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1507755170, "creation_date": 1507754423, "last_edit_date": 1507754477, "question_id": 46697159, "link": "https://stackoverflow.com/questions/46697159/how-to-use-def-insert-name-here-functions", "title": "How to use def *insert name here* (): functions?", "body": "<p>I'm new to python and had a question about to to use more functions in a code besides def main():</p>\n\n<p>My code below works, but I am trying to add new def's to their respective areas. </p>\n\n<p>So like a new def called (def calcPay():), to where the hours enter are calculated (regPay, overtimePay, and total) as 3 separate items.\n &amp;\nAlso add a new def called (def displayOutput():), the function would receive all three of the values from (overtimePay, regPay, and totalPay) and print the message below.</p>\n\n<p>If someone could explain to me how to use new functions besides main, that would be greatly appreciated.</p>\n\n<p>Thanks, here is my code:</p>\n\n<pre><code>def main():\n\n    try:\n        hoursWorked = float(input(\"How many hours did you work? \"))\n\n\n        if hoursWorked &gt; 40:\n                overtimePay = (hoursWorked - 40) * 15\n                regPay = 40 *10\n                totalPay =( overtimePay + regPay)\n\n        else:\n            regPay = hoursWorked * 10\n            overtimePay = 0\n            totalPay = (regPay + overtimePay)\n\n\n        print(\"You earned\",'${:,.2f}'.format(regPay),\"in regular pay\",'${:,.2f}'.format(overtimePay),\n              \"in overtime for a total of\",'${:,.2f}'.format(totalPay))\n    except:\n        print(\"Sorry, that wasn't a valid number. Ending program\")\n\n\nmain()\n</code></pre>\n"}, {"tags": ["python", "pip", "setup.py", "requirements.txt"], "owner": {"reputation": 2015, "user_id": 611873, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/UsO0s.jpg?s=128&g=1", "display_name": "aaragon", "link": "https://stackoverflow.com/users/611873/aaragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507754268, "creation_date": 1507754268, "question_id": 46697117, "link": "https://stackoverflow.com/questions/46697117/how-do-i-make-setup-py-play-nice-with-code-thats-both-a-library-and-an-applicat", "title": "how do I make setup.py play nice with code that&#39;s both a library and an application", "body": "<p>I'm creating a library, but the library is also an application. Therefore, I'm trying to make the code as painless as possible for people with no real background in programming. I decided to go along with suggestions in <a href=\"https://caremad.io/posts/2013/07/setup-vs-requirement/\" rel=\"nofollow noreferrer\">this post</a>. However, I'm running into all sorts of issues. I want users to do</p>\n\n<pre><code>$ make config\n$ make install\n</code></pre>\n\n<p>I need to do this because it's actually a C++/Python code, so I'm mixing them with Swig and Cmake. My objective is then to make those <code>config</code> and <code>install</code> targets so installing is a breeze. The first question I have is the following: If the contents of my <code>setup.py</code> file is as simple as </p>\n\n<pre><code>from setuptools import setup, find_packages\n\ndef read(*names, **kwargs):\n    return io.open(\n        join(dirname(__file__), *names),\n        encoding=kwargs.get(\"encoding\", \"utf8\")\n    ).read()\n\nsetup(\n    name=\"myproject\",\n    version=\"0.1.0\",\n)\n</code></pre>\n\n<p>and I type\n    $ python setup.py build</p>\n\n<p>How is it possible that the code is actually installed within <code>pip</code>?</p>\n\n<pre><code>$ pip freeze\n-e git+https://svn.3me.tudelft.nl/git/myproject.git@92f08bfcbaf1f78a6acdf5f03b5c7a36e87800eb#egg=myproject\n</code></pre>\n\n<p>I improved the <code>setup.py</code> so that it also has dependencies:</p>\n\n<pre><code>setup(\n    name=\"myproject\",\n    version=\"0.1.0\",\n    install_requires=[\n        # eg: \"aspectlib==1.1.1\", \"six&gt;=1.7\",\n        \"numpy\", \"scipy\", \"Sphinx\", \"pytest\", \"matplotlib\", \"dill\"\n    ],\n)\n</code></pre>\n\n<p>and I put a <code>requirements.txt</code> as discussed in the link above:</p>\n\n<pre><code>--index-url https://pypi.python.org/simple/\n\n-e . \n</code></pre>\n\n<p>and I run <code>pip install -r requirements.txt</code> it actually installs all dependencies needed, but if I rerun it, it fails with</p>\n\n<pre><code>Exception:\nTraceback (most recent call last):\n  File \"/Users/aaragon/.virtualenvs/test7/lib/python3.5/site-packages/pip/basecommand.py\", line 215, in main\n    status = self.run(options, args)\n  File \"/Users/aaragon/.virtualenvs/test7/lib/python3.5/site-packages/pip/commands/install.py\", line 342, in run\n    prefix=options.prefix_path,\n  File \"/Users/aaragon/.virtualenvs/test7/lib/python3.5/site-packages/pip/req/req_set.py\", line 778, in install\n    requirement.uninstall(auto_confirm=True)\n  File \"/Users/aaragon/.virtualenvs/test7/lib/python3.5/site-packages/pip/req/req_install.py\", line 703, in uninstall\n    '(at %s)' % (link_pointer, self.name, dist.location)\nAssertionError: Egg-link /Users/aaragon/Local/myproject does not match installed location of myproject (at /Users/aaragon/Local/myproject/src)\n</code></pre>\n\n<p>why am I getting this error?</p>\n"}, {"tags": ["python", "datetime", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1507759733, "post_id": 46697115, "comment_id": 80344286, "body": "You would want to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the issue."}, {"owner": {"reputation": 305, "user_id": 3896248, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3631d155d5ca09c23ed4cb6aafdb26bc?s=128&d=identicon&r=PG&f=1", "display_name": "user3896248", "link": "https://stackoverflow.com/users/3896248/user3896248"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1507761755, "post_id": 46697115, "comment_id": 80344878, "body": "Sorry, I don&#39;t know what to add that would make it more clear.  The code block contains everything relevant and nothing but.  It&#39;s plotting UTC.  I&#39;d like it to plot times in EST.  Included are examples of things that do not work."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1507762167, "post_id": 46697115, "comment_id": 80344994, "body": "The main engine that drives any kind of debugging is reproducibility. Now I cannot reproduce the above issue, because no <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> is given. I.e. I cannot copy the code and run it to see the issue. Hence I cannot test certain things to locate the problem and thus I cannot help you. Of course you may be lucky and find the one guy that wrote the package pass by to know what&#39;s going on from the top of his head, or you may find someone with too much time writing such example himself. But most of the time, questions without <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> are simply closed as off-topic or will never get answered. Your choice."}, {"owner": {"reputation": 305, "user_id": 3896248, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3631d155d5ca09c23ed4cb6aafdb26bc?s=128&d=identicon&r=PG&f=1", "display_name": "user3896248", "link": "https://stackoverflow.com/users/3896248/user3896248"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1507763356, "post_id": 46697115, "comment_id": 80345326, "body": "Alright, it&#39;s runnable independantly now."}], "answers": [{"tags": [], "owner": {"reputation": 305, "user_id": 3896248, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3631d155d5ca09c23ed4cb6aafdb26bc?s=128&d=identicon&r=PG&f=1", "display_name": "user3896248", "link": "https://stackoverflow.com/users/3896248/user3896248"}, "is_accepted": false, "score": 0, "last_activity_date": 1507764134, "creation_date": 1507764134, "answer_id": 46699004, "question_id": 46697115, "link": "https://stackoverflow.com/questions/46697115/plotting-dates-with-timezones-in-matplotlib-pyplot/46699004#46699004", "title": "Plotting dates with timezones in matplotlib.pyplot", "body": "<p>I had tried passing the timezone to the DateFormatters for the x-axis labels before, but the timezone modifier seems to be applied after the locators are placed, leaving all the labels reading 4 hours behind each midnight or the hours specified.  I've realized that the locators also need the timezone as a parameter to counteract this.  That'd do it.</p>\n"}], "owner": {"reputation": 305, "user_id": 3896248, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/3631d155d5ca09c23ed4cb6aafdb26bc?s=128&d=identicon&r=PG&f=1", "display_name": "user3896248", "link": "https://stackoverflow.com/users/3896248/user3896248"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 763, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507764134, "creation_date": 1507754266, "last_edit_date": 1507763342, "question_id": 46697115, "link": "https://stackoverflow.com/questions/46697115/plotting-dates-with-timezones-in-matplotlib-pyplot", "title": "Plotting dates with timezones in matplotlib.pyplot", "body": "<p>How do I properly set pyplot to plot dates in a given timezone?\nI can see various places to put a tzinfo object, but all of these either do nothing or do not remotely work as expected.  I load a list of records from a csv, with each record being [naive timestamp in UTC, number to plot]</p>\n\n<pre><code>import pytz\nfrom datetime import datetime\nimport matplotlib.pyplot as plt\nimport matplotlib.dates as mdates\nestZone=pytz.timezone('US/Eastern')\n\nrecords=[['10/10/17 12:00','100'],['11/10/17 12:00','150'],['12/10/17 12:00','200']]\n\ndef parseDT(stampString):\n    return datetime.strptime(stampString,'%d/%m/%y %H:%M')\n\ndef plotGraph():\n    xvalues=[]\n    yvalues=[]\n    for r in records:\n        rdatetime=(parseDT(r[0])) #parseDT just returns naive DT\n        rdatetime=pytz.utc.localize(rdatetime)\n        rdatetime=rdatetime.astimezone(tz=estZone)\n        xvalues.append(rdatetime)\n        yvalues.append(int(r[1]))\n\n    fig,ax=plt.subplots(figsize=(8,3))\n    plt.plot_date(xvalues,yvalues,ls='solid',lw=1.5,aa=True,marker='None',color='g')\n    dayFmt=mdates.DateFormatter('%a-%b-%d')\n    hrFmt=mdates.DateFormatter('%H:00')\n    ax.xaxis.set_major_formatter(dayFmt)\n    ax.xaxis.set_major_locator(mdates.DayLocator())\n    ax.xaxis.set_minor_locator(mdates.HourLocator(byhour=[6,12,18]))\n    ax.xaxis.set_minor_formatter(hrFmt)\n    plt.grid(b=True, which='both',linestyle='dotted')\n    plt.show()\n\nplotGraph()\n</code></pre>\n\n<p>This produces (minus some formatting) this figure:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vsWtt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vsWtt.png\" alt=\"First output\"></a>\nWhich is actually still UTC.  It's identical to the result if I had omitted the <code>astimezone(tz=estZone)</code>, even though I've verified that part is definitely functioning. </p>\n\n<p>If I proceed to pass <code>tz=estZone</code> to <code>plt.plot_date</code>, the figure is identical.  There's no change. How can I change this to make an EST graph from my UTC timestamps?</p>\n"}, {"tags": ["python", "django", "django-forms", "django-views"], "answers": [{"tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": false, "score": 1, "last_activity_date": 1507754233, "creation_date": 1507754233, "answer_id": 46697108, "question_id": 46697058, "link": "https://stackoverflow.com/questions/46697058/how-do-you-fix-this-integrityerror-at-restaurants-create-not-null-constrain/46697108#46697108", "title": "How do you fix this: IntegrityError at /restaurants/create? - NOT NULL constraint failed: restaurants_restaurantlocation.name", "body": "<p>Your fields have name <code>Title</code>, <code>Location</code>, <code>Category</code> but your Django code is looking for <code>title</code>, <code>location</code> and <code>category</code>. These need to be the same.</p>\n"}], "owner": {"reputation": 81, "user_id": 8760970, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fd0e4ad2200f406f5215137485b8e40?s=128&d=identicon&r=PG&f=1", "display_name": "H D", "link": "https://stackoverflow.com/users/8760970/h-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1507755152, "creation_date": 1507754009, "last_edit_date": 1507755152, "question_id": 46697058, "link": "https://stackoverflow.com/questions/46697058/how-do-you-fix-this-integrityerror-at-restaurants-create-not-null-constrain", "title": "How do you fix this: IntegrityError at /restaurants/create? - NOT NULL constraint failed: restaurants_restaurantlocation.name", "body": "<p>I'm trying to make a django developed website which is called MuyPicky. It is a website which allows you to find restaurants and other things based on your pickiness. I am currently making a page for forms which adds Restaurants to the database. As I am doing this I get this error:</p>\n\n<pre><code>IntegrityError at /restaurants/create.\nNOT NULL constraint failed: restaurants_restaurantlocation.name \n</code></pre>\n\n<p>Is this why I get the error</p>\n\n<p>Here is the forms.py:</p>\n\n<pre><code>class RestaurantCreateForm(forms.Form):\n    title = forms.CharField()\n    location = forms.CharField(required = False)\n    category = forms.CharField(required = False)\n</code></pre>\n\n<p>The form.html:</p>\n\n<pre><code>{% extends \"base.html\" %}\n\n{% block title %}Add Restaurant || {{block.super}} {% endblock %}\n\n{% block content %}\n    &lt;div class=\"container-fluid\"&gt;\n        &lt;div class=\"container\"&gt;\n            &lt;div class=\"row\"&gt;\n                &lt;div class=\"col-md-offset-4 col-md-4  col-md-offset-4\"&gt;\n                    &lt;h1&gt;Add Restaurant&lt;/h1&gt;\n                    &lt;form method=\"POST\"&gt;{% csrf_token %}\n                        &lt;input title=\"Title\" class=\"form-control\" type=\"text\" name=\"Title\"    placeholder=\"Title\"&gt;\n                        &lt;br&gt;\n                        &lt;input title=\"Location\" class=\"form-control\" type=\"text\" name=\"Location\" placeholder=\"Location\"&gt;&lt;br&gt;\n                        &lt;input title=\"Category\" class=\"form-control\" type=\"text\" name=\"Category\" placeholder=\"Category\"&gt;&lt;br&gt;\n                        &lt;!--&lt;input title=\"Save\" class=\"form-control btn btn-info \" type=\"submit\" value=\"Save\" &gt;--&gt;&lt;br&gt;\n                        &lt;button class=\"btn btn-success form-control btn-md center-block\" type=\"submit\"&gt;Save&lt;/button&gt;\n                        &lt;/form&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n{% endblock %}    \n</code></pre>\n\n<p>The view from views.py:</p>\n\n<pre><code>def restaurant_createview(request):\n    #if request.method == \"GET\":\n    #   print(\"get data\")\n    if request.method == \"POST\":\n        title    = request.POST.get(\"title\") #(request.POST[\"title\"])\n        location = request.POST.get(\"location\")\n        category = request.POST.get(\"category\")\n        obj      = RestaurantLocation.objects.create(\n            name     = title,\n            location = location, \n            category = category\n        )\n        return HttpResponseRedirect(\"/restaurants/\")\n    template_name = \"restaurants/form.html\"\n    context = {}\n    return render(request, template_name, context)\n</code></pre>\n\n<p>Lastly the urls.py:</p>\n\n<pre><code>urlpatterns = [\n  url(r'^admin/', admin.site.urls),\n  url(r'^/$', TemplateView.as_view(template_name=\"home.html\")), \n  url(r'^restaurants/$', RestaurantListView.as_view()),\n  url(r'^restaurants/create/$', restaurant_createview),\n  url(r'^restaurants/(?P&lt;slug&gt;[\\w-]+)/$', RestaurantDetailView.as_view()),\n  url(r'^contact/$', TemplateView.as_view(template_name=\"contact.html\")),\n  url(r'^about/$',TemplateView.as_view(template_name=\"about.html\"))]\n</code></pre>\n"}, {"tags": ["python", "postgresql", "psycopg2"], "comments": [{"owner": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "edited": false, "score": 0, "creation_date": 1507754233, "post_id": 46696996, "comment_id": 80341978, "body": "the main issue is : when you pass less parameters than the query takes, how do you want to match the parameters ?"}, {"owner": {"reputation": 850, "user_id": 4580729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac46efd39b35cac8c51a4b4b2e7163d5?s=128&d=identicon&r=PG", "display_name": "Tom Hunt", "link": "https://stackoverflow.com/users/4580729/tom-hunt"}, "reply_to_user": {"reputation": 11162, "user_id": 6655211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SnofI.png?s=128&g=1", "display_name": "PRMoureu", "link": "https://stackoverflow.com/users/6655211/prmoureu"}, "edited": false, "score": 0, "creation_date": 1507754363, "post_id": 46696996, "comment_id": 80342054, "body": "If I specify more placeholders in the query than I pass parameters, I assume I get a syntax error. What would be ideal would be some parameter value that causes the corresponding placeholder to become DEFAULT, rather than a literal."}], "answers": [{"tags": [], "owner": {"reputation": 54295, "user_id": 148765, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/07d542a58ef9867b4ac2309ecdac3d2e?s=128&d=identicon&r=PG", "display_name": "Chinmay Kanchi", "link": "https://stackoverflow.com/users/148765/chinmay-kanchi"}, "is_accepted": true, "score": 2, "last_activity_date": 1507755085, "creation_date": 1507755085, "answer_id": 46697335, "question_id": 46696996, "link": "https://stackoverflow.com/questions/46696996/how-to-specify-a-columns-default-value-as-a-placeholder/46697335#46697335", "title": "How to specify a column&#39;s default value as a placeholder?", "body": "<p>The way I usually deal with this is to have a placeholder in place of the column list and string <code>format()</code> the list of columns. This is safe, as the list of columns is controlled by the dev, and isn't untrusted user input.</p>\n\n<pre><code>stmt_without_col_names = 'INSERT INTO table ({}) VALUES ({})'\ninput_values = [1, None, 1, None, None]\ncolumns = ('col1', 'col2', 'col3', 'col4', 'col5')\ncolumns_to_keep = {k: v for k, v in zip(columns, input_values) if v is not None}\n# note: relies on dict key ordering remaining the same\n# this is true if the dict is not modified *at all* between creation\n# and the statement execution - use an OrderedDict or other data  \n# structure instead if you're worried\nformat_str = ','.join(['%s'] * len(columns_to_keep))\nstmt = stmt_without_col_names.format(columns_to_keep.keys(), format_str)\n# stmt looks like \"INSERT INTO table (['col3', 'col1']) VALUES (%s,%s)\"\ncursor.execute(stmt, columns_to_keep.values())\n</code></pre>\n"}], "owner": {"reputation": 850, "user_id": 4580729, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ac46efd39b35cac8c51a4b4b2e7163d5?s=128&d=identicon&r=PG", "display_name": "Tom Hunt", "link": "https://stackoverflow.com/users/4580729/tom-hunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 46697335, "answer_count": 1, "score": 1, "last_activity_date": 1507755085, "creation_date": 1507753768, "question_id": 46696996, "link": "https://stackoverflow.com/questions/46696996/how-to-specify-a-columns-default-value-as-a-placeholder", "title": "How to specify a column&#39;s default value as a placeholder?", "body": "<p>I've got a table with multiple columns, several of which are optional. I'm reading records from an external source, in which each record may specify values for the optional columns or not. For each record, I'd like to insert a row into the database with the given values plus the column defaults for any column that's not specified.</p>\n\n<p>If all the columns are specified, I obviously just use a basic INSERT statement:</p>\n\n<pre><code>db_cursor.execute(\"insert into table (col1, col2, col3, col4, col5) \" + \n                  \"values (%s, %s, %s, %s, %s)\",\n                  (value_1, value_2, value_3, value_4, value_5))\n</code></pre>\n\n<p>However, if some values are unspecified, there doesn't seem to be an easy way to use the defaults for only those values. You can use the DEFAULT keyword in SQL (or, equivalently, leave those columns out of the insert statement entirely), as e.g.</p>\n\n<pre><code>db_cursor.execute(\"insert into table (col1, col2, col3, col4, col5) \" + \n                  \"values (%s, %s, %s, DEFAULT, %s)\",\n                  (value_1, value_2, value_3, value_5))\n</code></pre>\n\n<p>But you can't pass <code>'DEFAULT'</code> as a placeholder value; it'll just become that string.</p>\n\n<p>So far I can only think of three approaches to this problem:</p>\n\n<ol>\n<li><p>Construct the SQL query string itself at run-time based on the input data, rather than using parameterization. This is a very strong anti-pattern due to the usual SQL injection reasons. (This application isn't actually security-critical, but I don't want such anti-patterns in my code.)</p></li>\n<li><p>Write a different query string for each possible combination of specified and unspecified parameters. Here, if four of the columns are optional, that's 2^4 = 16 different commands running the same query. This is obviously unworkable.</p></li>\n<li><p>Make the application aware of the default values and have it send them explicitly in the case where a column is unspecified. This breaks SPOT for the defaults, with all the attending maintenance and interoperability headaches (multiple applications read the database). Of the approaches I can think of, this is probably least bad, but I'd still prefer not to have to do it.</p></li>\n</ol>\n\n<p>Is there an easier way to manage dynamically sending defaults?</p>\n"}, {"tags": ["python", "tensorflow", "deep-learning"], "comments": [{"owner": {"reputation": 1871, "user_id": 4086968, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zsjlM.png?s=128&g=1", "display_name": "reese0106", "link": "https://stackoverflow.com/users/4086968/reese0106"}, "edited": false, "score": 1, "creation_date": 1521058923, "post_id": 46696859, "comment_id": 85577041, "body": "I&#39;m trying to re-use this, but I&#39;m not getting create_graph to work as I am getting a <code>DecodeError: Truncated message.</code> when trying to perform <code>graph_def.ParseFromString(f.read())</code> -- does this still work for you?"}], "answers": [{"comments": [{"owner": {"reputation": 1871, "user_id": 4086968, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zsjlM.png?s=128&g=1", "display_name": "reese0106", "link": "https://stackoverflow.com/users/4086968/reese0106"}, "edited": false, "score": 0, "creation_date": 1521059311, "post_id": 46699540, "comment_id": 85577241, "body": "I&#39;m having trouble with the <code>create_graph()</code> above -- is there any reason that newer versions of TF (ie. 1.4+) would run into <code>DecodeError: Truncated message.</code>? Are there any existing TF functions that could replace the functionality of <code>create_graph()</code> above?"}], "tags": [], "owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "is_accepted": true, "score": 7, "last_activity_date": 1507767932, "creation_date": 1507767932, "answer_id": 46699540, "question_id": 46696859, "link": "https://stackoverflow.com/questions/46696859/tf-graphkeys-trainable-variables-on-output-graph-pb-resulting-in-empty-list/46699540#46699540", "title": "tf.GraphKeys.TRAINABLE_VARIABLES on output_graph.pb resulting in empty list", "body": "<p>The <code>tf.import_graph_def()</code> function doesn't have enough information to reconstruct the <code>tf.GraphKeys.TRAINABLE_VARIABLES</code> collection (for that, you would need a <a href=\"https://www.tensorflow.org/api_guides/python/meta_graph\" rel=\"noreferrer\"><code>MetaGraphDef</code></a>). However, if <code>output.pb</code> contains a \"frozen\" <code>GraphDef</code>, then all of the weights will be stored in <a href=\"https://www.tensorflow.org/api_docs/python/tf/constant\" rel=\"noreferrer\"><code>tf.constant()</code></a> nodes in the graph. To extract them, you can do something like the following:</p>\n\n<pre><code>create_graph(GRAPH_DIR)\n\nconstant_values = {}\n\nwith tf.Session() as sess:\n  constant_ops = [op for op in sess.graph.get_operations() if op.type == \"Const\"]\n  for constant_op in constant_ops:\n    constant_values[constant_op.name] = sess.run(constant_op.outputs[0])\n</code></pre>\n\n<p>Note that <code>constant_values</code> will probably contain more values than just the weights, so you may need to filter further by <code>op.name</code> or some other criterion.</p>\n"}], "owner": {"reputation": 3628, "user_id": 6802252, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/93aac7d4f79b7275d62dc21cfe248ac2?s=128&d=identicon&r=PG&f=1", "display_name": "Moondra", "link": "https://stackoverflow.com/users/6802252/moondra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5169, "favorite_count": 4, "accepted_answer_id": 46699540, "answer_count": 1, "score": 6, "last_activity_date": 1553672430, "creation_date": 1507753145, "question_id": 46696859, "link": "https://stackoverflow.com/questions/46696859/tf-graphkeys-trainable-variables-on-output-graph-pb-resulting-in-empty-list", "title": "tf.GraphKeys.TRAINABLE_VARIABLES on output_graph.pb resulting in empty list", "body": "<p>I'm trying to extract all the weights/biases from a saved model <code>output_graph.pb</code>.</p>\n\n<p>I read the model:</p>\n\n<pre><code>def create_graph(modelFullPath):\n    \"\"\"Creates a graph from saved GraphDef file and returns a saver.\"\"\"\n    # Creates graph from saved graph_def.pb.\n    with tf.gfile.FastGFile(modelFullPath, 'rb') as f:\n        graph_def = tf.GraphDef()\n        graph_def.ParseFromString(f.read())\n        tf.import_graph_def(graph_def, name='')\n\nGRAPH_DIR = r'C:\\tmp\\output_graph.pb'\ncreate_graph(GRAPH_DIR)\n</code></pre>\n\n<p>And attempted this hoping I would be able to extract all weights/biases\nwithin each layer. </p>\n\n<pre><code>with tf.Session() as sess:\n    all_vars = tf.get_collection(tf.GraphKeys.TRAINABLE_VARIABLES)\n    print (len(all_vars))\n</code></pre>\n\n<p>However, I'm getting a value of 0 as the len. </p>\n\n<p>Final goal is to extract the weights and biases and save it to a text file/np.arrays. </p>\n"}, {"tags": ["python", "pandas", "dataframe", "apply"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1507753295, "post_id": 46696807, "comment_id": 80341498, "body": "Can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that fits your situation? Obviously, you do not need to provide 65 columns. 5 columns should be fine."}], "answers": [{"comments": [{"owner": {"reputation": 3883, "user_id": 973158, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d8f132b1c508947f8c6858790796f1a4?s=128&d=identicon&r=PG&f=1", "display_name": "beta", "link": "https://stackoverflow.com/users/973158/beta"}, "edited": false, "score": 0, "creation_date": 1507785515, "post_id": 46697127, "comment_id": 80350879, "body": "my problem (of course) was in the hidden code... <code>myFunc</code> returned a dataframe with column headings and this lead to the error somehow. I now return as follows and it works: <code>return result[[&#39;col1&#39;, &#39;col2&#39;, &#39;col3&#39;, &#39;col4&#39;]].iloc[0]</code>. Of course this means that only the first row of the series is taken, which is what I want in my code. As for the vectorization, i will create a new thread later. thx!"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 2, "last_activity_date": 1507754308, "creation_date": 1507754308, "answer_id": 46697127, "question_id": 46696807, "link": "https://stackoverflow.com/questions/46696807/create-multiple-new-columns-for-pandas-dataframe-with-apply-function/46697127#46697127", "title": "Create multiple new columns for pandas dataframe with apply + function", "body": "<p>Demo:</p>\n\n<pre><code>In [40]: df = pd.DataFrame({'a':[1,2,3]})\n\nIn [41]: df\nOut[41]:\n   a\n0  1\n1  2\n2  3\n\nIn [42]: def myFunc(row):\n    ...:     #code to get some result from another dataframe\n    ...:     # NOTE: trick is to return pd.Series()\n    ...:     return pd.Series([1,2,3,4]) * row['a']\n    ...:\n\nIn [44]: df[['col1', 'col2', 'col3','col4']] = df.apply(myFunc, axis=1)\n\nIn [45]: df\nOut[45]:\n   a  col1  col2  col3  col4\n0  1     1     2     3     4\n1  2     2     4     6     8\n2  3     3     6     9    12\n</code></pre>\n\n<p><strong>Disclaimer:</strong> try to avoid using <code>.apply(..., axis=1)</code> - as it's a <code>for loop</code> under the hood - i.e. it's not vectoried and will work <em>much</em> slower compared to vectorized Pandas/Numpy ufuncs.</p>\n\n<p>PS if you would provide details of what you are trying to calculate in the <code>myFunc</code> functuion, then we could try to find a vectorized solution...</p>\n"}], "owner": {"reputation": 3883, "user_id": 973158, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d8f132b1c508947f8c6858790796f1a4?s=128&d=identicon&r=PG&f=1", "display_name": "beta", "link": "https://stackoverflow.com/users/973158/beta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 499, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1507754308, "creation_date": 1507752983, "question_id": 46696807, "link": "https://stackoverflow.com/questions/46696807/create-multiple-new-columns-for-pandas-dataframe-with-apply-function", "title": "Create multiple new columns for pandas dataframe with apply + function", "body": "<p>I have a pandas dataframe <code>df</code> of the following shape: <code>(763, 65)</code></p>\n\n<p>I use the following code to create 4 new columns:</p>\n\n<pre><code>df[['col1', 'col2', 'col3','col4']] = df.apply(myFunc, axis=1)\n\ndef myFunc(row):\n    #code to get some result from another dataframe\n    return result1, result2, result3, result4\n</code></pre>\n\n<p>The shape of the dataframe which is returned in <code>myFunc</code> is <code>(1, 4)</code>. The code runs into the following error:</p>\n\n<blockquote>\n  <p>ValueError: Shape of passed values is (763, 4), indices imply (763, 65)</p>\n</blockquote>\n\n<p>I know that <code>df</code> has 65 columns and that the returned data from <code>myFunc</code> only has 4 columns. However, I only want to create the 4 new columns (that is, <code>col1</code>, <code>col2</code>, etc.), so in my opinion the code is correct when it only returns 4 columns in <code>myFunc</code>. What am I doing wrong?</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 3502, "user_id": 2714534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/se2TH.jpg?s=128&g=1", "display_name": "blakev", "link": "https://stackoverflow.com/users/2714534/blakev"}, "edited": false, "score": 0, "creation_date": 1507754425, "post_id": 46696797, "comment_id": 80342081, "body": "What have you already tried? Do you have a working solution that isn&#39;t fast enough?"}, {"owner": {"reputation": 1540, "user_id": 4807625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/825e21cf278fa7a7f40ff21e6cc218ab?s=128&d=identicon&r=PG&f=1", "display_name": "PTN", "link": "https://stackoverflow.com/users/4807625/ptn"}, "reply_to_user": {"reputation": 3502, "user_id": 2714534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/se2TH.jpg?s=128&g=1", "display_name": "blakev", "link": "https://stackoverflow.com/users/2714534/blakev"}, "edited": false, "score": 0, "creation_date": 1507776114, "post_id": 46696797, "comment_id": 80348286, "body": "@blakev I updated my code"}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1507779287, "post_id": 46696797, "comment_id": 80349078, "body": "Are you open to using NumPy? Or must you use the list-of-lists representation?"}, {"owner": {"reputation": 1540, "user_id": 4807625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/825e21cf278fa7a7f40ff21e6cc218ab?s=128&d=identicon&r=PG&f=1", "display_name": "PTN", "link": "https://stackoverflow.com/users/4807625/ptn"}, "reply_to_user": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1507783283, "post_id": 46696797, "comment_id": 80350130, "body": "@bnaecker I never used NumPy so I went with this implementation, but as long as I can represent a 2D array, everything is okay"}, {"owner": {"reputation": 5074, "user_id": 1354854, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/013458c49caa535da7af54d010a8a0b3?s=128&d=identicon&r=PG", "display_name": "bnaecker", "link": "https://stackoverflow.com/users/1354854/bnaecker"}, "edited": false, "score": 0, "creation_date": 1507843796, "post_id": 46696797, "comment_id": 80384917, "body": "Look into using <code>np.diff</code>, which computes differences along a given axis. You can use this to find the blocks entirely within one axis, but will have to do a bit more work to get the square-sized blocks. But this solution will be vectorized, and so fast and efficient."}], "owner": {"reputation": 1540, "user_id": 4807625, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/825e21cf278fa7a7f40ff21e6cc218ab?s=128&d=identicon&r=PG&f=1", "display_name": "PTN", "link": "https://stackoverflow.com/users/4807625/ptn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1507776093, "creation_date": 1507752947, "last_edit_date": 1507776093, "question_id": 46696797, "link": "https://stackoverflow.com/questions/46696797/quick-way-to-check-multiple-similar-elements-within-list-of-arrays-python", "title": "Quick way to check multiple similar elements within list of arrays Python", "body": "<p>What is an efficient way to detect similar elements in a list of arrays, where the element(s) can be in the same array or a different array?</p>\n\n<p>I'm representing a matrix as a grid of blocks, and any element with the same value that stands next to each other is combined into one \"block\". The blocks can be rectangular or square, but cannot be L-shaped. I also need to keep track of how many elements there are.</p>\n\n<p>For example, the arrays can be like these:</p>\n\n<pre><code>[[1, 2, 2, 1, 4]\n,[3, 4, 0, 1, 0]]\n</code></pre>\n\n<p>And the \"blocks\" here would be one block of 2 and one block of 1</p>\n\n<pre><code>[[0, 2, 2, 0, 3]\n,[3, 2, 2, 1, 4]]\n</code></pre>\n\n<p>The \"block\" here would be one block of 2</p>\n\n<p>The syntax <code>for element in list</code> and <code>list(set(list1).intersection(list2))</code> do not give you how many elements there are, and I can try to use a bunch of for loops, but is there a better way to do this?</p>\n\n<p><strong>UPDATE</strong>: The block length is 2 maximum (2 horizontal and 2 vertical like example 2).</p>\n\n<pre><code>x = 0\nfor row in grid: # loop each array in grid of arrays\n   y = 0\n   for val in row: # loop each value in array\n      if val == row[y + 1]: # found horizontal block of 2 (same block on the right)\n         # DO SOMETHING\n      elif val == self.state[x + 1][y]: # found vertical block of 2 (same block on the bottom)\n         # DO SOMETHING\n      elif val == row[y - 1] or \n           val == self.state[x - 1][y]: # block already checked in previous if\n         continue; # skip loop\n      else: # stand alone block \n         # DO SOMETHING\n\n      y += 1;\n   x += 1;\n</code></pre>\n"}, {"tags": ["python", "uuid"], "comments": [{"owner": {"reputation": 3943, "user_id": 2647317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f163870821b443d585648035a69464?s=128&d=identicon&r=PG", "display_name": "Pooyan Khosravi", "link": "https://stackoverflow.com/users/2647317/pooyan-khosravi"}, "edited": false, "score": 0, "creation_date": 1507761417, "post_id": 46696766, "comment_id": 80344788, "body": "I have no idea how <code>getnode</code> works but you probably should at very least mention your <b>operation system</b> for example is it <i>Linux</i>? Your Q has a higher chance if you go crazy with details."}, {"owner": {"reputation": 97, "user_id": 8068513, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3c51d198ba511ba7a383f09426dfe9b6?s=128&d=identicon&r=PG&f=1", "display_name": "scan", "link": "https://stackoverflow.com/users/8068513/scan"}, "reply_to_user": {"reputation": 3943, "user_id": 2647317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f163870821b443d585648035a69464?s=128&d=identicon&r=PG", "display_name": "Pooyan Khosravi", "link": "https://stackoverflow.com/users/2647317/pooyan-khosravi"}, "edited": false, "score": 0, "creation_date": 1507782988, "post_id": 46696766, "comment_id": 80350063, "body": "Thanks for suggesting. It is Windows"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 8068513, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3c51d198ba511ba7a383f09426dfe9b6?s=128&d=identicon&r=PG&f=1", "display_name": "scan", "link": "https://stackoverflow.com/users/8068513/scan"}, "edited": false, "score": 0, "creation_date": 1507754163, "post_id": 46696818, "comment_id": 80341932, "body": "My computer is not connected to a network other than the internet. But it&#39;s too dangerous for my scenario if getnode () has such a property of variability. :( Is there any other way to get an id that is unique to each computer?"}, {"owner": {"reputation": 3943, "user_id": 2647317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51f163870821b443d585648035a69464?s=128&d=identicon&r=PG", "display_name": "Pooyan Khosravi", "link": "https://stackoverflow.com/users/2647317/pooyan-khosravi"}, "reply_to_user": {"reputation": 97, "user_id": 8068513, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3c51d198ba511ba7a383f09426dfe9b6?s=128&d=identicon&r=PG&f=1", "display_name": "scan", "link": "https://stackoverflow.com/users/8068513/scan"}, "edited": false, "score": 0, "creation_date": 1507829211, "post_id": 46696818, "comment_id": 80377345, "body": "@scan tried a MAC address? Associate all MACs on one device with each other; this way it doesn&#39;t matter which one you happen to get this time."}, {"owner": {"reputation": 97, "user_id": 8068513, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3c51d198ba511ba7a383f09426dfe9b6?s=128&d=identicon&r=PG&f=1", "display_name": "scan", "link": "https://stackoverflow.com/users/8068513/scan"}, "edited": false, "score": 0, "creation_date": 1507919259, "post_id": 46696818, "comment_id": 80418649, "body": "T&#220;RK&#199;E \u0130NGILIZCE  I used the number retrieved with the getNode () method. but after a while I gave it a different number and my serial became useless. What is the way of what you say? which method should I use?"}], "tags": [], "owner": {"reputation": 562, "user_id": 4598067, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pRKOta17UmQ/AAAAAAAAAAI/AAAAAAAAAmc/7JBZC0FlHIw/photo.jpg?sz=128", "display_name": "pythomatic", "link": "https://stackoverflow.com/users/4598067/pythomatic"}, "is_accepted": false, "score": 0, "last_activity_date": 1507753004, "creation_date": 1507753004, "answer_id": 46696818, "question_id": 46696766, "link": "https://stackoverflow.com/questions/46696766/is-not-the-getnode-number-constant/46696818#46696818", "title": "Is not the getnode() number constant?", "body": "<p>If you have multiple network interfaces on the machine, it may return any one it finds.</p>\n\n<p><a href=\"https://docs.python.org/2/library/uuid.html\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/uuid.html</a></p>\n"}], "owner": {"reputation": 97, "user_id": 8068513, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3c51d198ba511ba7a383f09426dfe9b6?s=128&d=identicon&r=PG&f=1", "display_name": "scan", "link": "https://stackoverflow.com/users/8068513/scan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 306, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507835611, "creation_date": 1507752787, "last_edit_date": 1507835611, "question_id": 46696766, "link": "https://stackoverflow.com/questions/46696766/is-not-the-getnode-number-constant", "title": "Is not the getnode() number constant?", "body": "<p>I was trying to generate a special kind of serial number for a computer by using the <code>getnode()</code> number.</p>\n\n<pre><code>from uuid import getnode\n\ngnd = str(getnode())\nserial = \"UMH{}F-{}3{}T4-M3{}I7-0{}A{}W\".format(gnd[10], gnd[3], gnd[13], gnd[0], gnd[4], gnd[6])\n</code></pre>\n\n<p>I noticed today that the <code>getnode()</code> method gives a different number value than a few weeks ago.</p>\n\n<p>I use the same computer and I did not make any changes to the hardware! However, if the number I get from the <code>getnode()</code> method is not constant, this will crash the whole scenario.</p>\n\n<p>Any clue?</p>\n"}, {"tags": ["python", "string", "sockets", "send"], "comments": [{"owner": {"reputation": 2639, "user_id": 3072566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jaZNV.png?s=128&g=1", "display_name": "litelite", "link": "https://stackoverflow.com/users/3072566/litelite"}, "edited": false, "score": 2, "creation_date": 1507752829, "post_id": 46696732, "comment_id": 80341306, "body": "That&#39;s because you never sent the newline character..."}, {"owner": {"reputation": 7081, "user_id": 789671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/feaaeb3d021966d84450cbfb24b1824a?s=128&d=identicon&r=PG", "display_name": "glibdud", "link": "https://stackoverflow.com/users/789671/glibdud"}, "edited": false, "score": 0, "creation_date": 1507753690, "post_id": 46696732, "comment_id": 80341685, "body": "<code>send()</code> is not the same as <code>print()</code>; it sends <i>only</i> what you tell it to. If you want to send multiple lines, you&#39;ll need to put <code>\\n</code> (or whatever the client expects) between them yourself."}, {"owner": {"reputation": 26, "user_id": 7554797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd938d9a13884427aec62b6b31c4229b?s=128&d=identicon&r=PG&f=1", "display_name": "AngryPython", "link": "https://stackoverflow.com/users/7554797/angrypython"}, "edited": false, "score": 0, "creation_date": 1507753881, "post_id": 46696732, "comment_id": 80341784, "body": "I added the \\n but it still doens&#39;t work"}, {"owner": {"reputation": 26, "user_id": 7554797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd938d9a13884427aec62b6b31c4229b?s=128&d=identicon&r=PG&f=1", "display_name": "AngryPython", "link": "https://stackoverflow.com/users/7554797/angrypython"}, "edited": false, "score": 0, "creation_date": 1507754080, "post_id": 46696732, "comment_id": 80341888, "body": "And I also need them to be sent separately like different packets"}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 2, "creation_date": 1507755944, "post_id": 46696732, "comment_id": 80342814, "body": "On a TCP stream, you have absolutely no control over the packet boundaries that the other end receives.  To separate multiple chunks of data, you either have to separate them with some specific character, or precede each one with a length value so that the receiver knows how many bytes to read."}], "owner": {"reputation": 26, "user_id": 7554797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd938d9a13884427aec62b6b31c4229b?s=128&d=identicon&r=PG&f=1", "display_name": "AngryPython", "link": "https://stackoverflow.com/users/7554797/angrypython"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507752640, "creation_date": 1507752640, "question_id": 46696732, "link": "https://stackoverflow.com/questions/46696732/python-socket-server-data-sending-error", "title": "Python socket server data sending error", "body": "<p>so basically I have multiple conn.send(data) functions one after another in my server, problem is that when client receives that it puts it in one line, this is my server code:</p>\n\n<pre><code>server = \"0.0.0.0\"\nport = 5851\n\ns = socket(AF_INET, SOCK_STREAM)\ns.setsockopt(SOL_SOCKET, SO_REUSEADDR, 1)\ns.bind((server, port))\ns.listen(10)\n\ntry:\n    conn, addr = s.accept()\n    print(addr)\n    conn.send(\"chr Room_1\")\n    conn.send(\"cr Room_1\")\n    conn.send(\"cr Room_2\")\n    s.close()\n    exit()\nexcept KeyboardInterrupt:\n    print(\"\\nexiting\")\n    s.close()\n</code></pre>\n\n<p>So when client receives this data it puts it in one line instead of 3 separate data variables.</p>\n"}, {"tags": ["python", "image", "tkinter", "pipeline", "mri"], "owner": {"reputation": 21, "user_id": 8761354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ce1808119bc67086a676338fc55c2a6?s=128&d=identicon&r=PG&f=1", "display_name": "Harry Hyeonseok Kim", "link": "https://stackoverflow.com/users/8761354/harry-hyeonseok-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1507752480, "creation_date": 1507752480, "question_id": 46696691, "link": "https://stackoverflow.com/questions/46696691/matlabs-imshow3d-mouse-scrolling-image-visualization-in-python", "title": "matlab&#39;s imshow3d mouse scrolling image visualization in python", "body": "<p>Currently, I am trying to build a User Interface with python to visualize MRI images (in numpy) in 'tkinter' Graphic User Interface. \nThe feature of mouse scrolling from Matlab's imshow3d is essential but I was not able to find anything like this on web (ex.<a href=\"https://i.stack.imgur.com/8fitv.png\" rel=\"nofollow noreferrer\">https://www.mathworks.com/matlabcentral/mlcdownloads/downloads/submissions/47463/versions/3/screenshot.jpg</a>).\nDoes anyone have any idea how I can implement the mouse based slice browsing with tkinter? \nor are there any other gui that I could use to build what I want.</p>\n"}, {"tags": ["python", "string", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1507753534, "post_id": 46696679, "comment_id": 80341609, "body": "There <b>is no <code>b</code> character</b>"}, {"owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 1, "creation_date": 1507754987, "post_id": 46696679, "comment_id": 80342358, "body": "Please do not post screenshots. They are really not helping. Instead share data with the simple command: df.head().to_dict()  as an example. -1"}], "answers": [{"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 109, "user_id": 8458613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67626bdc3a8dade15af43e2b6794d607?s=128&d=identicon&r=PG&f=1", "display_name": "John Singh", "link": "https://stackoverflow.com/users/8458613/john-singh"}, "edited": false, "score": 0, "creation_date": 1507753174, "post_id": 46696826, "comment_id": 80341452, "body": "@JohnSingh Great. Do consider <a href=\"https://stackoverflow.com/help/someone-answers\">smashing that accept button</a>."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 2, "creation_date": 1507753857, "post_id": 46696826, "comment_id": 80341776, "body": "@c\u1d0f\u029f\u1d05s\u1d18\u1d07\u1d07\u1d05 I smashed that up arrow for you."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1507753898, "post_id": 46696826, "comment_id": 80341796, "body": "@ScottBoston Lol, that made me chuckle. Thanks ;-)"}, {"owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "edited": false, "score": 1, "creation_date": 1507754530, "post_id": 46696826, "comment_id": 80342135, "body": "Although true, the key here is the .str method for pd.series. The decode is just a normal string function. Anyway +1 :)"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 2, "creation_date": 1507754832, "post_id": 46696826, "comment_id": 80342286, "body": "When smashing... try not to break it!"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 2, "creation_date": 1507754874, "post_id": 46696826, "comment_id": 80342310, "body": "I do not like number 4 , so I make it to 5"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 26, "last_activity_date": 1507753038, "creation_date": 1507753038, "answer_id": 46696826, "question_id": 46696679, "link": "https://stackoverflow.com/questions/46696679/removing-b-from-string-column-in-a-pandas-dataframe/46696826#46696826", "title": "Removing b&#39;&#39; from string column in a pandas dataframe", "body": "<p>You're working with byte strings. You might consider <code>str.decode</code>:</p>\n\n<pre><code>data['class'] = data['class'].str.decode('utf-8') \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15201, "user_id": 7386332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb50c81104978fe1e111da483c41ff0f?s=128&d=identicon&r=PG&f=1", "display_name": "Anton vBR", "link": "https://stackoverflow.com/users/7386332/anton-vbr"}, "is_accepted": false, "score": 2, "last_activity_date": 1507754768, "creation_date": 1507754768, "answer_id": 46697263, "question_id": 46696679, "link": "https://stackoverflow.com/questions/46696679/removing-b-from-string-column-in-a-pandas-dataframe/46697263#46697263", "title": "Removing b&#39;&#39; from string column in a pandas dataframe", "body": "<p>Further explanation:</p>\n\n<pre><code>df = pd.DataFrame([b'123']) # create dataframe with b'' element\n</code></pre>\n\n<p>Now we can call</p>\n\n<pre><code>df[0].str.decode('utf-8') # returns a pd.series applying decode on str succesfully\ndf[0].decode('utf-8') # tries to decode the series and throws an error\n</code></pre>\n\n<p>Basically what you are doing with .str() is applying it for all elements. It could also be written like this:</p>\n\n<pre><code>df[0].apply(lambda x: x.decode('utf-8')) \n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 8458613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67626bdc3a8dade15af43e2b6794d607?s=128&d=identicon&r=PG&f=1", "display_name": "John Singh", "link": "https://stackoverflow.com/users/8458613/john-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8565, "favorite_count": 0, "answer_count": 2, "score": 8, "last_activity_date": 1507754768, "creation_date": 1507752441, "last_edit_date": 1507754566, "question_id": 46696679, "link": "https://stackoverflow.com/questions/46696679/removing-b-from-string-column-in-a-pandas-dataframe", "title": "Removing b&#39;&#39; from string column in a pandas dataframe", "body": "<p>I have a data frame as taken from SDSS database. Example data is here.</p>\n\n<p><a href=\"https://i.stack.imgur.com/9fiNu.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/9fiNu.png\" alt=\"img\"></a></p>\n\n<p>I want to remove the character 'b' from <code>data['class']</code>. I tried</p>\n\n<pre><code>data['class'] = data['class'].replace(\"b','')\n</code></pre>\n\n<p>But I am not getting the result.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1507752572, "post_id": 46696669, "comment_id": 80341195, "body": "<code>if data == dogs</code> won&#39;t work because you&#39;re testing for equality against a list. Maybe <code>if data in dogs</code>"}, {"owner": {"reputation": 22312, "user_id": 463758, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/105689a9cb392f18c1d0b27ed0cf657f?s=128&d=identicon&r=PG&f=1", "display_name": "balki", "link": "https://stackoverflow.com/users/463758/balki"}, "edited": false, "score": 0, "creation_date": 1507752835, "post_id": 46696669, "comment_id": 80341312, "body": "You are almost there. Just change the <code>if</code> check. <code>if data+&#39;\\n&#39; in dogs:</code>"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 8749514, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4584d3f50c9c1152f56d8e12107fa9d1?s=128&d=identicon&r=PG&f=1", "display_name": "MC Abstract", "link": "https://stackoverflow.com/users/8749514/mc-abstract"}, "edited": false, "score": 0, "creation_date": 1507753341, "post_id": 46696712, "comment_id": 80341520, "body": "the thing is when I type an answer, I get the result of the else statement."}, {"owner": {"reputation": 5725, "user_id": 3224008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7IvbW.png?s=128&g=1", "display_name": "Leistungsabfall", "link": "https://stackoverflow.com/users/3224008/leistungsabfall"}, "reply_to_user": {"reputation": 37, "user_id": 8749514, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4584d3f50c9c1152f56d8e12107fa9d1?s=128&d=identicon&r=PG&f=1", "display_name": "MC Abstract", "link": "https://stackoverflow.com/users/8749514/mc-abstract"}, "edited": false, "score": 1, "creation_date": 1507753513, "post_id": 46696712, "comment_id": 80341595, "body": "maybe there are some whitespace characters like \\n or \\r at the end of each line, try: <code>dogs = [dog.strip() for dog in dog_file.readlines()]</code>"}], "tags": [], "owner": {"reputation": 5725, "user_id": 3224008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7IvbW.png?s=128&g=1", "display_name": "Leistungsabfall", "link": "https://stackoverflow.com/users/3224008/leistungsabfall"}, "is_accepted": false, "score": 3, "last_activity_date": 1507752564, "creation_date": 1507752564, "answer_id": 46696712, "question_id": 46696669, "link": "https://stackoverflow.com/questions/46696669/how-do-i-turn-data-from-a-text-file-into-a-list/46696712#46696712", "title": "How do I turn data from a text file into a list?", "body": "<p><code>dogs</code> is a list of strings while <code>data</code> is a single string. You want to check if <code>data</code> <strong>is contained</strong> in <code>dogs</code> using the <code>in</code> operator:</p>\n\n<pre><code>if data in dogs:\n    # do sth\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 990, "user_id": 7307172, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/QSzl1.png?s=128&g=1", "display_name": "GreenSaber", "link": "https://stackoverflow.com/users/7307172/greensaber"}, "is_accepted": false, "score": 0, "last_activity_date": 1507752627, "creation_date": 1507752627, "answer_id": 46696725, "question_id": 46696669, "link": "https://stackoverflow.com/questions/46696669/how-do-i-turn-data-from-a-text-file-into-a-list/46696725#46696725", "title": "How do I turn data from a text file into a list?", "body": "<p>Try this:</p>\n\n<pre><code>dog_list = []\nfor dog in dogs:\n    dog_list.append(dog)\n</code></pre>\n\n<p>This will append every line of the file into a list. Now to check if there is a dog in the list try:</p>\n\n<pre><code>dog_type = input(\"Enter a dog: \")\nif dog_type in dog_list\":\n    print(\"Success\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 8753773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0994e5c3b61d87ed6b279c0a2098199?s=128&d=identicon&r=PG&f=1", "display_name": "Unusual Kmc", "link": "https://stackoverflow.com/users/8753773/unusual-kmc"}, "is_accepted": false, "score": 1, "last_activity_date": 1507753827, "creation_date": 1507753827, "answer_id": 46697013, "question_id": 46696669, "link": "https://stackoverflow.com/questions/46696669/how-do-i-turn-data-from-a-text-file-into-a-list/46697013#46697013", "title": "How do I turn data from a text file into a list?", "body": "<p>If you want to write the .txt into an array (convert to list), try this:</p>\n\n<pre><code>with open(\"Dogs.txt\", \"r\") as ins:\n    dogarray = []\n    for line in ins:\n        line = line.strip()\n        dogarray.append(line)\n    print (dogarray)\n</code></pre>\n\n<p>This writes it into an array and uses the <code>.strip</code> function to remove the unwanted <code>\\n</code> after every new line. All you need to do now is read from the array.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 8761293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/209cf3b84d86936eb93309224112d085?s=128&d=identicon&r=PG&f=1", "display_name": "Aswini", "link": "https://stackoverflow.com/users/8761293/aswini"}, "is_accepted": false, "score": 1, "last_activity_date": 1507756100, "creation_date": 1507756100, "answer_id": 46697579, "question_id": 46696669, "link": "https://stackoverflow.com/questions/46696669/how-do-i-turn-data-from-a-text-file-into-a-list/46697579#46697579", "title": "How do I turn data from a text file into a list?", "body": "<p>Try this:</p>\n\n<pre><code>dog_file = open(\"Dogs.txt\", \"r\")\ndogs = dog_file.readlines()\n# you want to strip away the spaces and new line characters\ncontent = [x.strip() for x in dogs]\ndata = input(\"Enter a name: \")\n# since dogs here is a list\nif data in dogs:\n    print(\"Success\")\nelse:\n    print(\"Sorry that didn't work\")\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 8749514, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4584d3f50c9c1152f56d8e12107fa9d1?s=128&d=identicon&r=PG&f=1", "display_name": "MC Abstract", "link": "https://stackoverflow.com/users/8749514/mc-abstract"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1507756100, "creation_date": 1507752413, "question_id": 46696669, "link": "https://stackoverflow.com/questions/46696669/how-do-i-turn-data-from-a-text-file-into-a-list", "title": "How do I turn data from a text file into a list?", "body": "<p>My objective here is to open the dog file, convert it into a list, and then let the user enter a type of dog and if it matches a dog name in the list, say it's  correct.</p>\n\n<pre><code>dog_file = open(\"Dogs.txt\", \"r\")\ndogs = dog_file.readlines()\nprint(dogs)\ndata = input(\"Enter a name: \")\nif data == dogs:\n    print(\"Success\")\nelse:\n    print(\"Sorry that didn't work\")\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "list"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 6, "creation_date": 1507752514, "post_id": 46696666, "comment_id": 80341157, "body": "This code is Pythonic. If you wanted to create a list, you might use a list-comprehension, but for-loops are <i>perfectly pythonic</i>. As an aside, this is not an array, this is a <code>list</code>"}], "answers": [{"tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": true, "score": 3, "last_activity_date": 1507753201, "creation_date": 1507753201, "answer_id": 46696871, "question_id": 46696666, "link": "https://stackoverflow.com/questions/46696666/pythonic-way-to-return-dict-entry-from-list-with-specific-key-value-pair/46696871#46696871", "title": "Pythonic way to return dict entry from list with specific key-value pair?", "body": "<p>You could reorganize the data structure to index each entry by <code>rel</code>. It would provide a more natural way to access the entries at the cost of having to do a transformation pass.</p>\n\n<pre><code>hrefs_by_rel = {link['rel']: link['href'] for link in responseData['links']}\nprint(hrefs_by_rel['next'])\n</code></pre>\n\n<p>(It would also cause duplicate entries to be discarded.)</p>\n\n<p>You <em>could</em> change the explicit loop into a list comprehension, though I wouldn't necessarily consider it better style.</p>\n\n<pre><code>rel_hrefs = [link['href'] for link in responseData['links'] if link['rel'] == \"next\"]\n</code></pre>\n"}], "owner": {"reputation": 530, "user_id": 1426591, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/510b21a278f2d3beef60ca73a03ba255?s=128&d=identicon&r=PG", "display_name": "Andy Levesque", "link": "https://stackoverflow.com/users/1426591/andy-levesque"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1507774213, "accepted_answer_id": 46696871, "answer_count": 1, "score": 0, "last_activity_date": 1507753201, "creation_date": 1507752404, "last_edit_date": 1507752989, "question_id": 46696666, "link": "https://stackoverflow.com/questions/46696666/pythonic-way-to-return-dict-entry-from-list-with-specific-key-value-pair", "closed_reason": "Opinion-based", "title": "Pythonic way to return dict entry from list with specific key-value pair?", "body": "<p>I'm trying to process a JSON file. Contained within the file is an list of <code>links</code> like this: </p>\n\n<pre><code>\"links\": [\n    {\n        \"href\": \"https://specificURL/incidents\",\n        \"rel\": \"canonical\"\n    },\n    {\n        \"href\": \"https://specificURL/metadata-catalog/incidents\",\n        \"mediaType\": \"application/schema+json\",\n        \"rel\": \"describedby\"\n    },\n    {\n        \"href\": \"https://specificURL/incidents?limit=10&amp;fromId=11\",\n        \"rel\": \"next\"\n    },\n    {\n        \"href\": \"https://specificURL/incidents-search-form\",\n        \"rel\": \"search-form\"\n    },\n    {\n        \"href\": \"https://specificURL/incidents?limit=10\",\n        \"rel\": \"self\"\n    }\n]\n</code></pre>\n\n<p>I'm pulling the next link by looping through the list, but I'm curious if there's a more \"pythonic\" way to do so. </p>\n\n<p>Working code:</p>\n\n<pre><code>for link in responseData['links']:\n    if link['rel'] == \"next\":\n        print(link['href'])\n</code></pre>\n\n<p>Is this really the most pythonic way to do this? </p>\n"}, {"tags": ["python", "pandas", "dataframe", "time-series"], "comments": [{"owner": {"reputation": 413, "user_id": 6470373, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/305bdf8946f0aa8372a6a33db3ce35af?s=128&d=identicon&r=PG&f=1", "display_name": "Ulu83", "link": "https://stackoverflow.com/users/6470373/ulu83"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1507755288, "post_id": 46696652, "comment_id": 80342495, "body": "This is because these are independent events. Sveral events may occur at the same or different places, at the same or different times"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1507755446, "post_id": 46696652, "comment_id": 80342563, "body": "Uh... I am sorry.  My question is in your expected results, should the second record start with 01:00 instead of 00:00?"}, {"owner": {"reputation": 413, "user_id": 6470373, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/305bdf8946f0aa8372a6a33db3ce35af?s=128&d=identicon&r=PG&f=1", "display_name": "Ulu83", "link": "https://stackoverflow.com/users/6470373/ulu83"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1507755540, "post_id": 46696652, "comment_id": 80342623, "body": "My bad. Yes your interpretation is right. Edited the OP."}], "answers": [{"tags": [], "owner": {"reputation": 413, "user_id": 6470373, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/305bdf8946f0aa8372a6a33db3ce35af?s=128&d=identicon&r=PG&f=1", "display_name": "Ulu83", "link": "https://stackoverflow.com/users/6470373/ulu83"}, "is_accepted": true, "score": 1, "last_activity_date": 1508080642, "creation_date": 1508080642, "answer_id": 46756599, "question_id": 46696652, "link": "https://stackoverflow.com/questions/46696652/split-dataframe-rows-by-datetime-in-pandas/46756599#46756599", "title": "Split DataFrame rows by DateTime in pandas", "body": "<p>I adapted <a href=\"https://stackoverflow.com/questions/40345522/pandas-break-datetime-intervals-by-day?rq=1/%22this%22\">this</a> answer to implement hourly and not daily splits. This code works in a WHIL-loop, so it will re-itereate as long as there are rows with durations still > 1hour. </p>\n\n<pre><code>mytimedelta = pd.Timedelta('1 hour')\n\n#create boolean mask\nsplit_rows = (dfob['duration'] &gt; mytimedelta)    \n\nwhile split_rows.any():\n    #get new rows to append and adjust start time to 1 hour later.\n    new_rows = dfob[split_rows].copy()\n    new_rows['start'] = new_rows['start'] + mytimedelta\n\n    #update the end time of old rows\n    dfob.loc[split_rows, 'end'] = dfob.loc[split_rows, 'start'] + \\\n        pd.DateOffset(hours=1, seconds=-1)\n    dfob = dfob.append(new_rows)\n\n    #update the duration of all rows\n    dfob['duration'] = dfob['end'] - dfob['start']\n\n    #create an updated boolean mask\n    split_rows = (dfob['duration'] &gt; mytimedelta)\n\n#when job is done:\ndfob.sort_index().reset_index(drop=True)\ndfob['duration'] = dfob['end'] - dfob['start']    \n</code></pre>\n"}], "owner": {"reputation": 413, "user_id": 6470373, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/305bdf8946f0aa8372a6a33db3ce35af?s=128&d=identicon&r=PG&f=1", "display_name": "Ulu83", "link": "https://stackoverflow.com/users/6470373/ulu83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 834, "favorite_count": 0, "accepted_answer_id": 46756599, "answer_count": 1, "score": 0, "last_activity_date": 1508080642, "creation_date": 1507752362, "last_edit_date": 1507755514, "question_id": 46696652, "link": "https://stackoverflow.com/questions/46696652/split-dataframe-rows-by-datetime-in-pandas", "title": "Split DataFrame rows by DateTime in pandas", "body": "<p>I have a DataFrame containing events like this:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>location  start_time   end_time     some_value1   some_value2\nLECP      00:00        01:30        25            nice info\nLECP      02:00        04:00        10            other info\nLECS      02:00        03:00         5            lorem\nLIPM      02:55        03:15         9            ipsum\n</code></pre>\n\n<p>and I want to split the rows so that I get maximum intervals of <code>1 hour</code>, e.g. if an event has a duration of <code>01:30</code>, I want to get a row of length <code>01:00</code> and another of <code>00:30</code>. If an event has a length of <code>02:30</code>, I want to get three rows. And if an event has a duration of an hour or less, it should just remain being one row. Like so:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>location  start_time   end_time   some_value1   some_value2\nLECP      00:00        01:00      25            nice info\nLECP      01:00        01:30      25            nice info\n\nLECP      02:00        03:00      10            other info\nLECP      03:00        04:00      10            other info\n\nLECS      02:00        03:00       5            lorem\nLIPM      02:55        03:15       9            ipsum\n</code></pre>\n\n<p>It does not matter if the remainder is at the beginning or the end. It even would not matter if the duration is distributed equally to the rows, as long as no rows has a duration of > 1 hour.</p>\n\n<p>What I tried:\n  - reading through <a href=\"https://pandas.pydata.org/pandas-docs/stable/timeseries.html\" rel=\"nofollow noreferrer\">Time Series / Date functionality</a> and not understanding anything\n  - searching StackOverflow.</p>\n"}, {"tags": ["python", "pyserial"], "answers": [{"tags": [], "owner": {"reputation": 1132, "user_id": 655404, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/4C1Ap.png?s=128&g=1", "display_name": "NichtJens", "link": "https://stackoverflow.com/users/655404/nichtjens"}, "is_accepted": false, "score": 0, "last_activity_date": 1507915843, "last_edit_date": 1507915843, "creation_date": 1507754524, "answer_id": 46697195, "question_id": 46696646, "link": "https://stackoverflow.com/questions/46696646/pyserial-port-array/46697195#46697195", "title": "PYSERIAL port array", "body": "<p>You should not catch all exceptions per se. Instead catch specific ones... But for starters remove the try/except and try again. This will give you/us the actual error message.</p>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 5539708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HS2za.jpg?s=128&g=1", "display_name": "Ameer Hamza", "link": "https://stackoverflow.com/users/5539708/ameer-hamza"}, "is_accepted": false, "score": 0, "last_activity_date": 1507786103, "creation_date": 1507786103, "answer_id": 46702064, "question_id": 46696646, "link": "https://stackoverflow.com/questions/46696646/pyserial-port-array/46702064#46702064", "title": "PYSERIAL port array", "body": "<p>I figured it out myself, i was messing up with arrays previously. Following code is working fine now:</p>\n\n<pre><code>ser = []\nser.append(serial.Serial(\n    'COM1', \n    baudrate = SERIAL_BAUD_RATE, \n    timeout = SERIAL_TIMEOUT\n))\n</code></pre>\n\n<p>If i need to add another port, i will just call ser.append() and port can be accessed through identifier ser[i].</p>\n"}], "owner": {"reputation": 45, "user_id": 5539708, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HS2za.jpg?s=128&g=1", "display_name": "Ameer Hamza", "link": "https://stackoverflow.com/users/5539708/ameer-hamza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1507915843, "creation_date": 1507752343, "question_id": 46696646, "link": "https://stackoverflow.com/questions/46696646/pyserial-port-array", "title": "PYSERIAL port array", "body": "<p>I am very new to python but little experienced with C Programming. I am trying to open and use multiple serial ports using pyserial library, and want to use array of serial ports to keep track of them for read and write operations, Below is my code:</p>\n\n<pre><code>try:\n    ser[0] = serial.Serial(\n        SERIAL_COM[0], \n        baudrate = SERIAL_BAUD_RATE, \n        timeout = SERIAL_TIMEOUT\n    )\nexcept: \n    print (\"Exception occurred\")\n</code></pre>\n\n<p>Above code always go into exception, However if i don't use as array i.e. changed ser[0] to ser I don't face exception. I just want to know how can i use serial port array to avoid exception ?</p>\n"}, {"tags": ["python", "numpy", "numba"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1507752514, "post_id": 46696639, "comment_id": 80341158, "body": "You can&#39;t call arbitrary Python functions in nopython mode. That&#39;s the core, defining feature of nopython mode: no Python."}, {"owner": {"reputation": 150, "user_id": 4443371, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/384b18eda79ce41f5da2e7cbcaeec2c4?s=128&d=identicon&r=PG&f=1", "display_name": "Matteo Silvestro", "link": "https://stackoverflow.com/users/4443371/matteo-silvestro"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1507752665, "post_id": 46696639, "comment_id": 80341239, "body": "So if I don&#39;t define all functions by myself and let them run in <code>nopython</code> mode, there is no way?"}], "answers": [{"comments": [{"owner": {"reputation": 150, "user_id": 4443371, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/384b18eda79ce41f5da2e7cbcaeec2c4?s=128&d=identicon&r=PG&f=1", "display_name": "Matteo Silvestro", "link": "https://stackoverflow.com/users/4443371/matteo-silvestro"}, "edited": false, "score": 0, "creation_date": 1507802646, "post_id": 46696939, "comment_id": 80360114, "body": "Thank you. Not even something like <code>jit(levenshtein_distance)</code> or <code>njit(levenshtein_distance)</code> will do it, right? I have to write my own function decorated with <code>@jit(nopython=True)</code>."}, {"owner": {"reputation": 56759, "user_id": 392949, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ef7a66dcbb260f54c3d06b0490b844bf?s=128&d=identicon&r=PG", "display_name": "JoshAdel", "link": "https://stackoverflow.com/users/392949/joshadel"}, "reply_to_user": {"reputation": 150, "user_id": 4443371, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/384b18eda79ce41f5da2e7cbcaeec2c4?s=128&d=identicon&r=PG&f=1", "display_name": "Matteo Silvestro", "link": "https://stackoverflow.com/users/4443371/matteo-silvestro"}, "edited": false, "score": 1, "creation_date": 1507810640, "post_id": 46696939, "comment_id": 80365131, "body": "If <code>levenshtein_distance</code> was written in such a way that numba could jit it, then it would work, but it would have to adhere to the supported features in the links I provided to do so."}], "tags": [], "owner": {"reputation": 56759, "user_id": 392949, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ef7a66dcbb260f54c3d06b0490b844bf?s=128&d=identicon&r=PG", "display_name": "JoshAdel", "link": "https://stackoverflow.com/users/392949/joshadel"}, "is_accepted": true, "score": 5, "last_activity_date": 1507753495, "creation_date": 1507753495, "answer_id": 46696939, "question_id": 46696639, "link": "https://stackoverflow.com/questions/46696639/numba-jit-nopython-mode-tell-numba-the-signature-of-an-external-arbitrary-funct/46696939#46696939", "title": "Numba jit nopython mode: tell numba the signature of an external arbitrary function", "body": "<p>Your code works for me when <code>metric</code> is <code>euclidean_distance</code> because that's a function that's also a <code>nopython</code> jitted numba function. You can't pass in arbitrary functions though. In order for something to work in <code>nopython</code> mode, every callable function must be supported by numba (see <a href=\"http://numba.pydata.org/numba-doc/latest/reference/pysupported.html\" rel=\"noreferrer\">http://numba.pydata.org/numba-doc/latest/reference/pysupported.html</a> and <a href=\"http://numba.pydata.org/numba-doc/latest/reference/numpysupported.html\" rel=\"noreferrer\">http://numba.pydata.org/numba-doc/latest/reference/numpysupported.html</a>) or be user-defined as a numba <code>nopython</code> function. There's no getting around that constraint. </p>\n"}], "owner": {"reputation": 150, "user_id": 4443371, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/384b18eda79ce41f5da2e7cbcaeec2c4?s=128&d=identicon&r=PG&f=1", "display_name": "Matteo Silvestro", "link": "https://stackoverflow.com/users/4443371/matteo-silvestro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5411, "favorite_count": 2, "accepted_answer_id": 46696939, "answer_count": 1, "score": 3, "last_activity_date": 1507753495, "creation_date": 1507752304, "question_id": 46696639, "link": "https://stackoverflow.com/questions/46696639/numba-jit-nopython-mode-tell-numba-the-signature-of-an-external-arbitrary-funct", "title": "Numba jit nopython mode: tell numba the signature of an external arbitrary function", "body": "\n\n<p>I need to build a dissimilarity matrix for a generic metric. Since I need the algorithm to run fast, I used <code>numba</code> 0.35 in <code>nopython</code> mode.\nHere is my code</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nfrom numba import jit\nfrom jellyfish import levenshtein_distance\n\ndef _dissimilarity_matrix(metric):\n    @jit(nopython=True)\n    def dm(data):\n        n = data.shape[0]\n        diss = np.zeros((n, n))\n        for i in range(n):\n            for j in range(i+1):\n                dist = metric(data[i], data[j])\n                diss[i, j] = dist\n                diss[j, i] = dist\n        return diss\n\n    return dm\n\n@jit(nopython=True)\ndef euclidean_distance(vec1, vec2):\n    return np.sqrt(((vec1 - vec2)**2).sum())\n\ntest1 = np.random.randn(10, 2)\ndissimilarity_matrix1 = _dissimilarity_matrix(euclidean_distance)\ndiss1 = dissimilarity_matrix1(test1)\n\ntest2 = np.array([\"this\", \"is\", \"a\", \"test\"])\ndissimilarity_matrix2 = _dissimilarity_matrix(levenshtein_distance)\ndiss2 = dissimilarity_matrix2(test2)\n</code></pre>\n\n<p>but the output is:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>numba.errors.TypingError: Failed at nopython (nopython frontend)\nUntyped global name 'metric': cannot determine Numba type of &lt;class 'builtin_function_or_method'&gt;\nFile \"test.py\", line 12\n</code></pre>\n\n<p>Note that the function <code>euclidean_distance</code> is defined by me and has the decorator <code>@jit(nopython=True)</code>, while the function <code>levenshtein_distance</code> comes from an external module (not written by me). Is there a way to tell <code>numba</code> explicitly the signature of the function passed in (i.e. <code>metric</code> in <code>_dissimilarity_matrix</code>)?\nI really need the function <code>_dissimilarity_matrix</code> to run in <code>nopython</code> mode and accept as input an arbitrary function.</p>\n"}, {"tags": ["python", "simpy"], "comments": [{"owner": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 1, "creation_date": 1507755747, "post_id": 46696587, "comment_id": 80342723, "body": "Make up your mind. First you do <code>clock = Label(root, font=(&#39;times&#39;, 20, &#39;bold&#39;), bg=&#39;green&#39;)</code>, then you do <code>def clock(...)</code>. What is clock? Clock is a function."}, {"owner": {"reputation": 1, "user_id": 7763830, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MDRz6sOfOfQ/AAAAAAAAAAI/AAAAAAAAAG0/tHiP1kNe9Ro/photo.jpg?sz=128", "display_name": "Miss Khan", "link": "https://stackoverflow.com/users/7763830/miss-khan"}, "reply_to_user": {"reputation": 25744, "user_id": 2089675, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/sBz5q.jpg?s=128&g=1", "display_name": "smac89", "link": "https://stackoverflow.com/users/2089675/smac89"}, "edited": false, "score": 0, "creation_date": 1507801414, "post_id": 46696587, "comment_id": 80359280, "body": "oops! I can&#39;t see that omg it is a bullshit mistake huh."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7763830, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MDRz6sOfOfQ/AAAAAAAAAAI/AAAAAAAAAG0/tHiP1kNe9Ro/photo.jpg?sz=128", "display_name": "Miss Khan", "link": "https://stackoverflow.com/users/7763830/miss-khan"}, "edited": false, "score": 0, "creation_date": 1507800991, "post_id": 46697475, "comment_id": 80359034, "body": "oops! sorry, it&#39;s a useless mistake anyways thank you."}], "tags": [], "owner": {"reputation": 2378, "user_id": 3564517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/uRAlt.jpg?s=128&g=1", "display_name": "Stefan Scherfke", "link": "https://stackoverflow.com/users/3564517/stefan-scherfke"}, "is_accepted": false, "score": 2, "last_activity_date": 1507755586, "creation_date": 1507755586, "answer_id": 46697475, "question_id": 46696587, "link": "https://stackoverflow.com/questions/46696587/how-to-make-clock-in-gui-using-simpy-python/46697475#46697475", "title": "how to make clock in GUI using simpy python?", "body": "<p>You redefine clock.  First, you say \"clock, you are a label.\"  Later you say, \"clock, you are a function.\".</p>\n"}, {"comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1508847558, "post_id": 46907533, "comment_id": 80767284, "body": "This answer would be better if you explained what you did differently. Otherwise we have to examine the code line-by-line looking for the significant differences."}], "tags": [], "owner": {"reputation": 174, "user_id": 4525312, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/30a3b96b1429a0b4c3856b28952d815a?s=128&d=identicon&r=PG&f=1", "display_name": "bobo", "link": "https://stackoverflow.com/users/4525312/bobo"}, "is_accepted": false, "score": 0, "last_activity_date": 1508839137, "creation_date": 1508839137, "answer_id": 46907533, "question_id": 46696587, "link": "https://stackoverflow.com/questions/46696587/how-to-make-clock-in-gui-using-simpy-python/46907533#46907533", "title": "how to make clock in GUI using simpy python?", "body": "<p>Here is how I made a clock in tkinter:</p>\n\n<pre><code>from Tkinter import *\nimport simpy\n\nSIM_TIME = 100\n\nclass Clock:\n    def __init__(self, canvas, x1, y1, x2, y2, tag):\n        self.x1 = x1\n        self.y1 = y1\n        self.x2 = x2\n        self.y2 = y2\n        self.canvas = canvas\n        self.train = canvas.create_rectangle(self.x1, self.y1, self.x2, self.y2, fill=\"#fff\")\n        self.time = canvas.create_text(((self.x2 - self.x1)/2 + self.x1), ((self.y2 - self.y1)/2 + self.y1), text = \"Time = \"+str(tag)+\"s\")\n        self.canvas.update()\n\n    def tick(self, tag):\n        self.canvas.delete(self.time)\n        self.time = canvas.create_text(((self.x2 - self.x1)/2 + self.x1), ((self.y2 - self.y1)/2 + self.y1), text = \"Time = \"+str(tag)+\"s\")\n        self.canvas.update()\n\ndef create_clock(env):\n    clock = Clock(canvas, 500,225,700,265, env.now)\n    while True:\n        yield env.timeout(1)\n        clock.tick(env.now)\n\nanimation = Tk()\nim = PhotoImage(file=\"image.gif\")\ncanvas = Canvas(animation, width = 800, height = 310)\ncanvas.create_image(0,0, anchor=NW, image=im)\nanimation.title(\"Sim Title\")\ncanvas.pack()\n\n\nenv = simpy.Environment()\nenv.process(create_clock(env))\nenv.run(until=SIM_TIME)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7763830, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MDRz6sOfOfQ/AAAAAAAAAAI/AAAAAAAAAG0/tHiP1kNe9Ro/photo.jpg?sz=128", "display_name": "Miss Khan", "link": "https://stackoverflow.com/users/7763830/miss-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1508839137, "creation_date": 1507752141, "question_id": 46696587, "link": "https://stackoverflow.com/questions/46696587/how-to-make-clock-in-gui-using-simpy-python", "title": "how to make clock in GUI using simpy python?", "body": "<pre><code>import simpy \nfrom tkinter import *\nimport time\n\nroot = Tk()\ntime1 = ''\nclock = Label(root, font=('times', 20, 'bold'), bg='green')\nclock.pack(fill=BOTH, expand=1)\ndef clock(env,tick):\n    while True:\n         print(env.now)\n         yield env.timeout(tick())\ndef tick():\n    time2 = time.strftime('%H:%M:%S')\n    clock.config(text=time2)\n    clock.after(200, tick)\n\n\nenv = simpy.Environment()\nenv.process(clock(env,tick()))\nenv.run(until=root.mainloop(  ))\n</code></pre>\n\n<p>but it gives me an error </p>\n\n<p>File \"D:\\python\\guiclock.py\", line 18, in tick \nclock.config(text=time2) AttributeError: 'function' object has no attribute 'config'</p>\n"}, {"tags": ["python", "beautifulsoup", "findall", "scraper"], "comments": [{"owner": {"reputation": 562, "user_id": 4598067, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pRKOta17UmQ/AAAAAAAAAAI/AAAAAAAAAmc/7JBZC0FlHIw/photo.jpg?sz=128", "display_name": "pythomatic", "link": "https://stackoverflow.com/users/4598067/pythomatic"}, "edited": false, "score": 0, "creation_date": 1507752205, "post_id": 46696557, "comment_id": 80341011, "body": "<code>$</code> is the regex for end of string"}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 2110710, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0df90fd7cfc4d773162ec166bb3ddd71?s=128&d=identicon&r=PG", "display_name": "manners", "link": "https://stackoverflow.com/users/2110710/manners"}, "edited": false, "score": 0, "creation_date": 1507910779, "post_id": 46696622, "comment_id": 80414345, "body": "Thanks for this help but unfortunately the string in the link isn&#39;t a word - it can consist of letters and numbers so word boundaries or word characters don&#39;t work.  I&#39;m going to try with $ suggestions above as the boundary for the end of the string.  The non-greedy suggestion helps though."}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 119, "user_id": 2110710, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0df90fd7cfc4d773162ec166bb3ddd71?s=128&d=identicon&r=PG", "display_name": "manners", "link": "https://stackoverflow.com/users/2110710/manners"}, "edited": false, "score": 0, "creation_date": 1507910863, "post_id": 46696622, "comment_id": 80414396, "body": "@manners I said <i>if</i>, never said it&#39;s going to work in all cases. Also, you mean the first approach does not work?"}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 1, "last_activity_date": 1507752253, "creation_date": 1507752253, "answer_id": 46696622, "question_id": 46696557, "link": "https://stackoverflow.com/questions/46696557/python-re-findall-returning-links-with-unwanted-string-afterwards/46696622#46696622", "title": "Python re.findall returning links with unwanted string afterwards", "body": "<p>You can use a non-greedy match (adding <code>?</code> to the pattern) with a word boundary character <code>'\\b'</code>:</p>\n\n<pre><code>&gt;&gt;&gt; re.findall(r'stream:\\/\\/.+?\\b', link)\n['stream://987cds9c8ujru56236te2ys28u99u2s']\n</code></pre>\n\n<p>Or if you want to match only word characters you can simply use <code>'\\w+'</code>:</p>\n\n<pre><code>&gt;&gt;&gt; re.findall(r'stream:\\/\\/\\w+', link)\n['stream://987cds9c8ujru56236te2ys28u99u2s']\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 2110710, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/0df90fd7cfc4d773162ec166bb3ddd71?s=128&d=identicon&r=PG", "display_name": "manners", "link": "https://stackoverflow.com/users/2110710/manners"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 46696622, "answer_count": 1, "score": 1, "last_activity_date": 1507752253, "creation_date": 1507752023, "question_id": 46696557, "link": "https://stackoverflow.com/questions/46696557/python-re-findall-returning-links-with-unwanted-string-afterwards", "title": "Python re.findall returning links with unwanted string afterwards", "body": "<p>I have a python script using BeautifulSoup to scrape.  This is my code:</p>\n\n<pre><code>re.findall('stream:\\/\\/.+', link)\n</code></pre>\n\n<p>Which is designed to find links like:</p>\n\n<pre><code>stream://987cds9c8ujru56236te2ys28u99u2s\n</code></pre>\n\n<p>But it also returns strings like this:</p>\n\n<pre><code>stream://987cds9c8ujru56236te2ys28u99u2s  [SD] Spanish - (9.15am)\n</code></pre>\n\n<p>i.e. with spaces and extra stuff which I don't want.  How can I express the </p>\n\n<pre><code>re.findall\n</code></pre>\n\n<p>So it only returns the link first part?</p>\n\n<p>(Thanks in advance)</p>\n"}, {"tags": ["python", "django", "python-2.7"], "answers": [{"tags": [], "owner": {"reputation": 109, "user_id": 7483001, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0af3637528d19a9ec5ec82ea904e03ce?s=128&d=identicon&r=PG&f=1", "display_name": "Skif", "link": "https://stackoverflow.com/users/7483001/skif"}, "is_accepted": false, "score": 0, "last_activity_date": 1507794077, "creation_date": 1507794077, "answer_id": 46704061, "question_id": 46696555, "link": "https://stackoverflow.com/questions/46696555/foreignkey-and-none-value/46704061#46704061", "title": "Foreignkey and none value", "body": "<p>I found error. Before insert i try type conversion int(var). If var was None i received such error.</p>\n"}], "owner": {"reputation": 109, "user_id": 7483001, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0af3637528d19a9ec5ec82ea904e03ce?s=128&d=identicon&r=PG&f=1", "display_name": "Skif", "link": "https://stackoverflow.com/users/7483001/skif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1507794077, "creation_date": 1507752012, "question_id": 46696555, "link": "https://stackoverflow.com/questions/46696555/foreignkey-and-none-value", "title": "Foreignkey and none value", "body": "<p>I have error while try to add in ForeignKey field None value.</p>\n\n<p>My model:</p>\n\n<pre><code>class Invoice(models.Model):\n    tender_game_id = models.ForeignKey(TenderGame, related_name='invoice_tender_game_id', verbose_name='Tender', blank=True, null=True)\n</code></pre>\n\n<p>makemigration/migrate/syncdb - i did all.</p>\n\n<p>I'm receiving everytime error:</p>\n\n<pre><code>ERROR:logger:int() argument must be a string or a number, not 'NoneType'\n</code></pre>\n\n<p>What am I doing wrong?\nDjango 1.7</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1507752188, "post_id": 46696544, "comment_id": 80341001, "body": "Probably use <code>split()</code> to get the words into a list and then index that list. But you&#39;ll still have to check the first word of that list."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 7520296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea4d1cb886c28e577915435be92f969?s=128&d=identicon&r=PG&f=1", "display_name": "ana", "link": "https://stackoverflow.com/users/7520296/ana"}, "edited": false, "score": 0, "creation_date": 1508083333, "post_id": 46696690, "comment_id": 80459333, "body": "I was able to parse a large text file with lot of complications based on this code. Thanks."}], "tags": [], "owner": {"reputation": 562, "user_id": 4598067, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-pRKOta17UmQ/AAAAAAAAAAI/AAAAAAAAAmc/7JBZC0FlHIw/photo.jpg?sz=128", "display_name": "pythomatic", "link": "https://stackoverflow.com/users/4598067/pythomatic"}, "is_accepted": false, "score": 0, "last_activity_date": 1507752479, "creation_date": 1507752479, "answer_id": 46696690, "question_id": 46696544, "link": "https://stackoverflow.com/questions/46696544/how-can-i-parse-this-text-file-into-a-dictionary/46696690#46696690", "title": "How can I parse this text file into a dictionary?", "body": "<pre><code>dict = {}\nif line.startswith('city'):\n    current_city = line[8:12]\n    dict[current_city] = []\n</code></pre>\n\n<p>From here you just need to <code>dict[current_city].append(temp)</code>, etc.</p>\n\n<p>Loop through your input by identifying the pattern wherein the city category will repeat.</p>\n"}, {"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1507753166, "post_id": 46696716, "comment_id": 80341447, "body": "Fair answer. It just struck me now, rereading the question, that the OP&#39;s requested structure is impossible. They also have <code>daytime</code> against the key so might need a tuple/list."}, {"owner": {"reputation": 19, "user_id": 7520296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea4d1cb886c28e577915435be92f969?s=128&d=identicon&r=PG&f=1", "display_name": "ana", "link": "https://stackoverflow.com/users/7520296/ana"}, "edited": false, "score": 0, "creation_date": 1507798541, "post_id": 46696716, "comment_id": 80357430, "body": "Thanks Zac for the solution and editing. What I want a dictionary with cities as keys and each key is  mapped to a list of values of temperature, daytime etc."}, {"owner": {"reputation": 640, "user_id": 478079, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/53v77.jpg?s=128&g=1", "display_name": "Zac Crites", "link": "https://stackoverflow.com/users/478079/zac-crites"}, "reply_to_user": {"reputation": 19, "user_id": 7520296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea4d1cb886c28e577915435be92f969?s=128&d=identicon&r=PG&f=1", "display_name": "ana", "link": "https://stackoverflow.com/users/7520296/ana"}, "edited": false, "score": 0, "creation_date": 1507819673, "post_id": 46696716, "comment_id": 80371632, "body": "@ana I&#39;ve updated my answer to produce a list instead of a dictionary."}], "tags": [], "owner": {"reputation": 640, "user_id": 478079, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/53v77.jpg?s=128&g=1", "display_name": "Zac Crites", "link": "https://stackoverflow.com/users/478079/zac-crites"}, "is_accepted": false, "score": 0, "last_activity_date": 1507819653, "last_edit_date": 1507819653, "creation_date": 1507752594, "answer_id": 46696716, "question_id": 46696544, "link": "https://stackoverflow.com/questions/46696544/how-can-i-parse-this-text-file-into-a-dictionary/46696716#46696716", "title": "How can I parse this text file into a dictionary?", "body": "<p>You can loop over the lines of the text file looking for your cues, then add the values to a dictionary. Each city's values are stored in a list, so you'll end up with a list of city properties keyed by the city name.</p>\n\n<pre><code>cities = {}\nwith open('file.txt', 'r') as f:\n    city = None\n    city_name = None\n\n    for line in f:\n        if line.startswith('city'):\n            if city is not None:\n                cities[city_name] = city\n            city = []\n            city_name = line[8:12]\n\n        elif line.startswith('temperature'):\n            city.append(line[:])\n\n        elif line.startswith('daytime'):\n            city.append(line[:])\n\n        # etc.\n\n# Print the resulting city properties\nfrom pprint import pprint\npprint(cities)\n</code></pre>\n\n<p>You may prefer to use <code>str.split()</code> instead of slicing the values directly. You may also be interested in something like <a href=\"https://docs.python.org/3/library/re.html\" rel=\"nofollow noreferrer\">regular expressions</a>, which are much more powerful for parsing strings like this.</p>\n"}], "owner": {"reputation": 19, "user_id": 7520296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ea4d1cb886c28e577915435be92f969?s=128&d=identicon&r=PG&f=1", "display_name": "ana", "link": "https://stackoverflow.com/users/7520296/ana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1507819653, "creation_date": 1507751994, "last_edit_date": 1507798329, "question_id": 46696544, "link": "https://stackoverflow.com/questions/46696544/how-can-i-parse-this-text-file-into-a-dictionary", "title": "How can I parse this text file into a dictionary?", "body": "<p>I am parsing a big text file with the following format.</p>\n\n<p>city is city1 in the west coast.</p>\n\n<p>(some lines which are not relevant to me)</p>\n\n<p>......</p>\n\n<p>temperature is 15 degree in winter.</p>\n\n<p>.....</p>\n\n<p>daytime is 5 hours.</p>\n\n<p>....</p>\n\n<p>city is city2 in the west coast.</p>\n\n<p>.... the pattern repeats.</p>\n\n<p>I have used line.startswith() and made a outputline by concatenating the values like : </p>\n\n<p>for line in file:</p>\n\n<pre><code>if line.startswith('city'):\n\n   line1 = line[8:12]\n\nif line.startswith('temperature')\n\n   line2 = line[:] and so on.\n</code></pre>\n\n<p>finally outputline = line1 +line2+line3</p>\n\n<p>so it prints one outputline for each city block.</p>\n\n<p>But I understand this is an ugly solution. What I want is a dictionary like this:\n{city1:[15, 5], city2:[temperature, daytime] ....}</p>\n\n<p>could you please help?</p>\n"}, {"tags": ["python", "machine-learning", "naivebayes"], "answers": [{"tags": [], "owner": {"reputation": 546, "user_id": 6329992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/417d58288a37959c8b0da3e69297bb0e?s=128&d=identicon&r=PG&f=1", "display_name": "DavidS1992", "link": "https://stackoverflow.com/users/6329992/davids1992"}, "is_accepted": false, "score": 0, "last_activity_date": 1507754396, "creation_date": 1507754396, "answer_id": 46697151, "question_id": 46696478, "link": "https://stackoverflow.com/questions/46696478/how-to-use-multinomial-naive-bayes-for-both-text-and-non-text-data-using-python/46697151#46697151", "title": "How to use multinomial naive bayes for both text and non text data using python?", "body": "<p>Three are several ways to do that:</p>\n\n<ul>\n<li>simply concatenate Hashing Vectors with integers and train on that bigger features vector. It will work.</li>\n</ul>\n\n<p>It would be more reasonable to do so using different classifier, beacuse MultinominalNB can't model the interactions between the features. But if you want nothing else but MultinominalNB, you can do it. You can also:</p>\n\n<ul>\n<li><p>train two of them - one on HV, one on integers, and weigth the output, or</p></li>\n<li><p>use MultinominalNB on text and different classifier on integers, or</p></li>\n<li><p>use MultinominalNB on text, and take the output as a features both with integers.</p></li>\n</ul>\n"}], "owner": {"reputation": 1, "user_id": 5617804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c02b7832cd33b3f882ff47c4b30faafe?s=128&d=identicon&r=PG&f=1", "display_name": "Farhan Ansari", "link": "https://stackoverflow.com/users/5617804/farhan-ansari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507754396, "creation_date": 1507751727, "question_id": 46696478, "link": "https://stackoverflow.com/questions/46696478/how-to-use-multinomial-naive-bayes-for-both-text-and-non-text-data-using-python", "title": "How to use multinomial naive bayes for both text and non text data using python?", "body": "<p>The data consists of text parameters as well as integer parameters. The problem is to train machine with both data. Hashing Vectorizer is used for text parameters training.</p>\n\n<p>Thanks in advance....</p>\n"}, {"tags": ["python", "pandas", "numpy", "slice"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 2, "creation_date": 1507751769, "post_id": 46696415, "comment_id": 80340767, "body": "Would the start and stop always be coinciding?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1507751939, "post_id": 46696415, "comment_id": 80340864, "body": "Asking the same question as Divakar. If it is the case, you can just use <code>np.split</code>: <code>np.split(a, b[:, 1])</code>"}, {"owner": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "edited": false, "score": 0, "creation_date": 1507752087, "post_id": 46696415, "comment_id": 80340946, "body": "yes. the start will always repeat the stop of the previous row"}], "answers": [{"comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1507754126, "post_id": 46696601, "comment_id": 80341914, "body": "Definitely learned about <code>ufunc.reduce</code> and <code>ufunc.reduceat</code>  Thx!"}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": false, "score": 3, "last_activity_date": 1507752181, "creation_date": 1507752181, "answer_id": 46696601, "question_id": 46696415, "link": "https://stackoverflow.com/questions/46696415/irregular-slicing-in-numpy/46696601#46696601", "title": "irregular slicing in numpy", "body": "<p>You can use <code>np.add.reduceat</code> with flattened <code>b</code> as the indices:</p>\n\n<pre><code>np.add.reduceat(a, np.ravel(b))[::2]/np.diff(b, axis=1).ravel()\n# array([  1.5,   6. ,  11.5,  16.5])\n</code></pre>\n\n<p>with <em>for loop</em>:</p>\n\n<pre><code>[np.mean(a[b[_][0]:b[_][1]]) for _ in range(len(b))]\n# [1.5, 6.0, 11.5, 16.5]\n</code></pre>\n\n<p>For more, you can see the first example in <code>help(np.add.reduceat)</code>:</p>\n\n<blockquote>\n<pre><code>Examples\n--------\nTo take the running sum of four successive values:\n\n&gt;&gt;&gt; np.add.reduceat(np.arange(8),[0,4, 1,5, 2,6, 3,7])[::2]\narray([ 6, 10, 14, 18])\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1507752543, "post_id": 46696611, "comment_id": 80341181, "body": "@hpaulj Apologies, was drawing a blank when figuring out how to get the mean, and <code>map</code> was all I could think of. (I am aware of the speed constraints on this solution)."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "edited": false, "score": 0, "creation_date": 1507752594, "post_id": 46696611, "comment_id": 80341203, "body": "@SirajS. No problem! I&#39;m not sure about the performance aspect. If you find it being too slow for your use case, please feel free to retract and use Psidom&#39;s answer instead."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 1, "last_activity_date": 1507752508, "last_edit_date": 1507752508, "creation_date": 1507752215, "answer_id": 46696611, "question_id": 46696415, "link": "https://stackoverflow.com/questions/46696415/irregular-slicing-in-numpy/46696611#46696611", "title": "irregular slicing in numpy", "body": "<p>Let's try <code>np.split</code>.</p>\n\n<pre><code>&gt;&gt;&gt; list(map(np.mean, np.split(a, b[:, 1])))\n[1.5, 6.0, 11.5, 16.5, 19.0]\n</code></pre>\n\n<hr>\n\n<p>Using a <em>list comprehension</em>:</p>\n\n<pre><code>&gt;&gt;&gt; [np.mean(x) for x in np.split(a, b[:, 1])]\n[1.5, 6.0, 11.5, 16.5, 19.0]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 0, "last_activity_date": 1507754514, "creation_date": 1507754514, "answer_id": 46697193, "question_id": 46696415, "link": "https://stackoverflow.com/questions/46696415/irregular-slicing-in-numpy/46697193#46697193", "title": "irregular slicing in numpy", "body": "<p>Using <code>cumsum</code> and <code>np.diff</code></p>\n\n<pre><code>c = b[:, 1]\n\nnp.diff(np.append(0, a.cumsum()[c - 1])) / np.diff(np.append(0, c))\n\narray([  1.5,   6. ,  11.5,  16.5])\n</code></pre>\n"}], "owner": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 1, "accepted_answer_id": 46696611, "answer_count": 3, "score": 1, "last_activity_date": 1507755880, "creation_date": 1507751520, "question_id": 46696415, "link": "https://stackoverflow.com/questions/46696415/irregular-slicing-in-numpy", "title": "irregular slicing in numpy", "body": "<p>consider the below <code>numpy array</code></p>\n\n<pre><code>a = np.arange(20)\n</code></pre>\n\n<p>and the slicing requirement give below</p>\n\n<pre><code>b = [[0,4],\n     [4,9],\n     [9,15],\n     [15,19]]\n</code></pre>\n\n<p>how can i slice <code>'a'</code> based on irregular slicing information in <code>'b'</code>? like for example:</p>\n\n<pre><code>np.mean(a[b[:,0]:b[:,1]])\n</code></pre>\n\n<p>I know how to achieve this with loop statement, like </p>\n\n<pre><code>[np.mean(a[b[_][0]:b[_][1]]) for _ in range(len(b))]\n</code></pre>\n\n<p>but is there a way in which i can avoid using loops?</p>\n"}]