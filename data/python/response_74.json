[{"tags": ["python", "xml", "xpath", "lxml"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1465430794, "post_id": 37714813, "comment_id": 62903367, "body": "Can you add a link to the actual file? Or at least a stripped down usable version with the namespace decs etc,.."}, {"owner": {"reputation": 137, "user_id": 2321869, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3c6983c0f45b215ebff2988a18eab6fc?s=128&d=identicon&r=PG", "display_name": "Shreedhar Manek", "link": "https://stackoverflow.com/users/2321869/shreedhar-manek"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1465431274, "post_id": 37714813, "comment_id": 62903499, "body": "@PadraicCunningham Ah. Okay. Here are the namespaces - <a href=\"https://gist.github.com/shrox/df592e65a8848dd4f0ddab18cc340dd4\" rel=\"nofollow noreferrer\">gist.github.com/shrox/df592e65a8848dd4f0ddab18cc340dd4</a>"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1465432106, "post_id": 37714813, "comment_id": 62903708, "body": "Can you add a watered down version of the file? It will be easier to just show you a complete example."}, {"owner": {"reputation": 137, "user_id": 2321869, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3c6983c0f45b215ebff2988a18eab6fc?s=128&d=identicon&r=PG", "display_name": "Shreedhar Manek", "link": "https://stackoverflow.com/users/2321869/shreedhar-manek"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1465432228, "post_id": 37714813, "comment_id": 62903736, "body": "@PadraicCunningham I did! The namespaces with the tag in question. <a href=\"https://gist.github.com/shrox/df592e65a8848dd4f0ddab18cc340dd4\" rel=\"nofollow noreferrer\">gist.github.com/shrox/df592e65a8848dd4f0ddab18cc340dd4</a>"}, {"owner": {"reputation": 137, "user_id": 2321869, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3c6983c0f45b215ebff2988a18eab6fc?s=128&d=identicon&r=PG", "display_name": "Shreedhar Manek", "link": "https://stackoverflow.com/users/2321869/shreedhar-manek"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1465432269, "post_id": 37714813, "comment_id": 62903745, "body": "I just need to know how to make .attrib work with attributes with a prefix."}, {"owner": {"reputation": 137, "user_id": 2321869, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3c6983c0f45b215ebff2988a18eab6fc?s=128&d=identicon&r=PG", "display_name": "Shreedhar Manek", "link": "https://stackoverflow.com/users/2321869/shreedhar-manek"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1465432829, "post_id": 37714813, "comment_id": 62903851, "body": "It didn&#39;t work. The reason why I was trying to use .attrib. Maybe I was doing something wrong but I got the same error for it - <code>ValueError: Invalid attribute name u&#39;xlink:href&#39;</code>. They both work <b>without</b> a prefix."}, {"owner": {"reputation": 137, "user_id": 2321869, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3c6983c0f45b215ebff2988a18eab6fc?s=128&d=identicon&r=PG", "display_name": "Shreedhar Manek", "link": "https://stackoverflow.com/users/2321869/shreedhar-manek"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1465433037, "post_id": 37714813, "comment_id": 62903899, "body": "I am going wrong somewhere with the namespace for xlink. Where do I set it? Setting it for xpath doesn&#39;t work."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1465434304, "post_id": 37714813, "comment_id": 62904159, "body": "I added a working example"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 2321869, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3c6983c0f45b215ebff2988a18eab6fc?s=128&d=identicon&r=PG", "display_name": "Shreedhar Manek", "link": "https://stackoverflow.com/users/2321869/shreedhar-manek"}, "edited": false, "score": 0, "creation_date": 1465434654, "post_id": 37715285, "comment_id": 62904226, "body": "You have no idea how helpful you&#39;ve been. I&#39;ve been having difficulty in understanding how namespaces work since yesterday and this has simplified it for me. Thank you!"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 1, "last_activity_date": 1465434579, "last_edit_date": 1465434579, "creation_date": 1465433882, "answer_id": 37715285, "question_id": 37714813, "link": "https://stackoverflow.com/questions/37714813/how-to-add-an-attribute-to-a-tag-found-using-xpath-in-lxml-in-python/37715285#37715285", "title": "How to add an attribute to a tag found using xpath in lxml in Python?", "body": "<p>This is a working example:</p>\n\n<pre><code>from lxml import etree as et\n\nxml = et.parse(\"your.xml\")\nroot = xml.getroot()\nd = root.nsmap\n\nfor node in root.xpath(\"//draw:image\", namespaces=d):\n    node.attrib[\"{http://www.w3.org/1999/xlink}href\"] = \"value\"\n    node.attrib[\"{http://www.w3.org/1999/xlink}show\"] = \"embed\"\nprint(et.tostring(xml))\n</code></pre>\n\n<p>Which for:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;office:document xmlns:office=\"urn:oasis:names:tc:opendocument:xmlns:office:1.0\"\nxmlns:style=\"urn:oasis:names:tc:opendocument:xmlns:style:1.0\"\nxmlns:text=\"urn:oasis:names:tc:opendocument:xmlns:text:1.0\"\nxmlns:table=\"urn:oasis:names:tc:opendocument:xmlns:table:1.0\"\nxmlns:draw=\"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0\"\nxmlns:fo=\"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0\"\nxmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\"\nxmlns:meta=\"urn:oasis:names:tc:opendocument:xmlns:meta:1.0\"\nxmlns:number=\"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0\"\nxmlns:svg=\"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0\"\nxmlns:chart=\"urn:oasis:names:tc:opendocument:xmlns:chart:1.0\"\nxmlns:dr3d=\"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0\"&gt;\n&lt;draw:image&gt;&lt;/draw:image&gt;\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>&lt;office:document xmlns:office=\"urn:oasis:names:tc:opendocument:xmlns:office:1.0\" xmlns:style=\"urn:oasis:names:tc:opendocument:xmlns:style:1.0\" xmlns:text=\"urn:oasis:names:tc:opendocument:xmlns:text:1.0\" xmlns:table=\"urn:oasis:names:tc:opendocument:xmlns:table:1.0\" xmlns:draw=\"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0\" xmlns:fo=\"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" xmlns:dc=\"http://purl.org/dc/elements/1.1/\" xmlns:meta=\"urn:oasis:names:tc:opendocument:xmlns:meta:1.0\" xmlns:number=\"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0\" xmlns:svg=\"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0\" xmlns:chart=\"urn:oasis:names:tc:opendocument:xmlns:chart:1.0\" xmlns:dr3d=\"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0\"&gt;\n&lt;draw:image xlink:href=\"value\" xlink:show=\"embed\"/&gt;\n\n\n&lt;/office:document&gt;\n</code></pre>\n\n<p>Or using set:</p>\n\n<pre><code>for node in root.xpath(\"//draw:image\", namespaces=d):\n    node.set(\"{http://www.w3.org/1999/xlink}href\", \"image\")\n    node.set(\"{http://www.w3.org/1999/xlink}show\", \"embed\")\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 2321869, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3c6983c0f45b215ebff2988a18eab6fc?s=128&d=identicon&r=PG", "display_name": "Shreedhar Manek", "link": "https://stackoverflow.com/users/2321869/shreedhar-manek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1108, "favorite_count": 0, "accepted_answer_id": 37715285, "answer_count": 1, "score": 1, "last_activity_date": 1465434579, "creation_date": 1465430167, "last_edit_date": 1465431452, "question_id": 37714813, "link": "https://stackoverflow.com/questions/37714813/how-to-add-an-attribute-to-a-tag-found-using-xpath-in-lxml-in-python", "title": "How to add an attribute to a tag found using xpath in lxml in Python?", "body": "<p>I have the following xml - </p>\n\n<pre><code>&lt;draw:image&gt;&lt;/draw:image&gt;\n</code></pre>\n\n<p>I want to add multiple xlink attributes to it and make it -</p>\n\n<pre><code>&lt;draw:image xlink:href=\"image\" xlink:show=\"embed\"&gt;&lt;/draw:image&gt;\n</code></pre>\n\n<p>I tried using the following code but got the error \"ValueError: Invalid attribute name u'xlink:href'\"</p>\n\n<pre><code>root.xpath(\"//draw:image\", namespaces=\n{\"draw\":\"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0\"})\n[0].attrib['xlink:href'] = 'image'\n</code></pre>\n\n<p>What am I doing wrong? There seems to be something related to namespaces, but I can't figure what.</p>\n"}, {"tags": ["python", "python-2.7"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6442898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8703b48f1d97378264da9c605cf8f0d2?s=128&d=identicon&r=PG&f=1", "display_name": "Husnasri Chennupati", "link": "https://stackoverflow.com/users/6442898/husnasri-chennupati"}, "edited": false, "score": 0, "creation_date": 1465433265, "post_id": 37714882, "comment_id": 62903949, "body": "one more question..... I have test field this ..........pp =&quot;DEFAULT SECURITY NO      CUSTOMER        C 00     LOANS           L 00     INQUIRY         I 00     NAME/ADDRESS    5 00                          BACKDATE 1-7    E 00     BACKDATE 8-30   F 00     BACKDATE &gt; 30   G 00 ACCESS ALL FUNC. NO  *** FLOOR LIMITS ***                   0&quot;  ......I want result like this ...[&#39;DEFAULT SECURITY&#39;,&#39;NO&#39;,&#39;CUSTOMER&#39;,&#39;C&#39;,&#39;LOAN&#39;,&#39;L&#39;,&#39;INQUIRY&#39;,&#39;I&#39;,&#39;NAME&zwnj;&#8203;/ADDRESS&#39;,&#39;5&#39;,&#39;BACKD&zwnj;&#8203;ATE 1-7&#39;,&#39;E&#39;,&#39;BACKDATE 8-30&#39;,&#39;F&#39;,&#39;BACKDATE &gt; 30&#39;,&#39;G&#39;,&#39;FLOOR LIMITS&#39;,&#39;0&#39;]"}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 11, "user_id": 6442898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8703b48f1d97378264da9c605cf8f0d2?s=128&d=identicon&r=PG&f=1", "display_name": "Husnasri Chennupati", "link": "https://stackoverflow.com/users/6442898/husnasri-chennupati"}, "edited": false, "score": 0, "creation_date": 1465433579, "post_id": 37714882, "comment_id": 62904011, "body": "You can start with <code>pp.replace(&#39;*&#39;, &#39;&#39;).split()</code>. Then modify by merging items from <code>.split</code>"}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": true, "score": 0, "last_activity_date": 1465431605, "last_edit_date": 1465431605, "creation_date": 1465430700, "answer_id": 37714882, "question_id": 37714773, "link": "https://stackoverflow.com/questions/37714773/combining-specific-values-in-python-list/37714882#37714882", "title": "combining specific values in python list", "body": "<p>Merge the list items into a string literal using <code>.join</code> then <code>split</code> the string with <code>re</code> into a list of items using the numbers. </p>\n\n<p>Build the final list by using a list comprehension on the splitted items to <code>strip</code> and <code>filter</code> whitespace characters: </p>\n\n<pre><code>import re\n\nlst = ['INQ/DATA', 'ENTRY', '1', 'MONETARY', '0', 'TRAN', 'GRID', '0', 'BCR', '0', 'ENVIRONMENT', 'TBL', '0', 'PRODUCT', 'FILE', '0', 'STOP/HOLD', '1', 'QUERY', '0', 'LOOKUP', 'FILE', '0', 'REPORT', 'FILE', '0']\ns = \" \".join(lst)\n\np = re.compile(r'(\\d+)')\nresult = [i.strip() for i in p.split(s) if i != '']\n# ['INQ/DATA ENTRY', '1', 'MONETARY', '0', 'TRAN GRID', '0', 'BCR', '0', 'ENVIRONMENT TBL', '0', 'PRODUCT FILE', '0', 'STOP/HOLD', '1', 'QUERY', '0', 'LOOKUP FILE', '0', 'REPORT FILE', '0']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 0, "last_activity_date": 1465468071, "last_edit_date": 1465468071, "creation_date": 1465431503, "answer_id": 37715000, "question_id": 37714773, "link": "https://stackoverflow.com/questions/37714773/combining-specific-values-in-python-list/37715000#37715000", "title": "combining specific values in python list", "body": "<p>Let <a href=\"https://docs.python.org/2/library/itertools.html#itertools.groupby\" rel=\"nofollow\"><em>itertools.groupby</em></a> do it for you, passing <code>str.isdigit</code> as the key:</p>\n\n<pre><code>l =  ['INQ/DATA', 'ENTRY', '1', 'MONETARY', '0', 'TRAN', 'GRID', '0', 'BCR', '0', 'ENVIRONMENT', 'TBL', '0', 'PRODUCT', 'FILE', '0', 'STOP/HOLD', '1', 'QUERY', '0', 'LOOKUP', 'FILE', '0', 'REPORT', 'FILE', '0']\n\nfrom itertools import groupby\n\nnew = [\" \".join(v) for k, v in groupby(l, key=str.isdigit)]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>In [4]: from itertools import groupby\n\nIn [5]: [\" \".join(v) for k, v in groupby(l, key=str.isdigit)]\nOut[5]:  ['INQ/DATA ENTRY', '1', 'MONETARY', '0', 'TRAN GRID', '0', 'BCR', '0', 'ENVIRONMENT TBL', '0', 'PRODUCT FILE', '0', 'STOP/HOLD', '1', 'QUERY', '0', 'LOOKUP FILE', '0', 'REPORT FILE', '0']\n</code></pre>\n\n<p>To work for negative numbers or floats you can use a helper function:</p>\n\n<pre><code>from itertools import groupby\n\ndef f(x):\n    try:\n        float(x)\n        return True\n    except ValueError:\n        return False\n\n\nprint([\" \".join(v) for k, v in groupby(l, key=f)])\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6442898, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8703b48f1d97378264da9c605cf8f0d2?s=128&d=identicon&r=PG&f=1", "display_name": "Husnasri Chennupati", "link": "https://stackoverflow.com/users/6442898/husnasri-chennupati"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 1, "accepted_answer_id": 37714882, "answer_count": 2, "score": -1, "last_activity_date": 1465468071, "creation_date": 1465429894, "last_edit_date": 1465467951, "question_id": 37714773, "link": "https://stackoverflow.com/questions/37714773/combining-specific-values-in-python-list", "title": "combining specific values in python list", "body": "<p>Here is my list </p>\n\n<pre><code>['INQ/DATA', 'ENTRY', '1', 'MONETARY', '0', 'TRAN', 'GRID', '0', 'BCR', '0', 'ENVIRONMENT', 'TBL', '0', 'PRODUCT', 'FILE', '0', 'STOP/HOLD', '1', 'QUERY', '0', 'LOOKUP', 'FILE', '0', 'REPORT', 'FILE', '0']\n</code></pre>\n\n<p>I want the answer set like below...</p>\n\n<pre><code>['INQ/DATA ENTRY', '1', 'MONETARY', '0', 'TRAN GRID', '0', 'BCR', '0', 'ENVIRONMENT TBL', '0', 'PRODUCT FILE', '0', 'STOP/HOLD', '1', 'QUERY', '0', 'LOOKUP FILE', '0', 'REPORT \nFILE', '0']\n</code></pre>\n\n<p>I am looking for short program instead of too much loop\nI tried for loop</p>\n\n<pre><code>           for i in range(len(ar2)-2):\n\n               if i &lt; len(ar2)-4 :\n                   if len(ar2[i])&gt;1 and len(ar2[i+1]) &gt; 1:\n                      #print ar2[i]+' '+ar2[i+1]\n                      fll.append(ar2[i]+' '+ar2[i+1])\n                      del ar2[i+1]\n                   else:\n\n                       fll.append(ar2[i])\n               else:\n                    fll.append(ar2[i])\n</code></pre>\n\n<p>please advise....\nThanks in advance.....</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2452, "user_id": 1594060, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d93aa9c4456a600e2fdc404588726354?s=128&d=identicon&r=PG", "display_name": "Josh Rumbut", "link": "https://stackoverflow.com/users/1594060/josh-rumbut"}, "edited": false, "score": 0, "creation_date": 1465430880, "post_id": 37714768, "comment_id": 62903385, "body": "I&#39;m going to suggest that while it&#39;s possible to replace this with any of the answers below, it&#39;s really obvious what this code does, and not necessarily as obvious what the other code does. Also if you need to add &#241; or &#231; to your original solution it&#39;s obvious how to do that."}, {"owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "reply_to_user": {"reputation": 2452, "user_id": 1594060, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d93aa9c4456a600e2fdc404588726354?s=128&d=identicon&r=PG", "display_name": "Josh Rumbut", "link": "https://stackoverflow.com/users/1594060/josh-rumbut"}, "edited": false, "score": 0, "creation_date": 1465430984, "post_id": 37714768, "comment_id": 62903413, "body": "@JoshRumbut I guess if you don&#39;t know what the <code>ord</code> function or <code>.get</code>   do then maybe. But you could just put a comment above it. Why write 60 lines when you can write 6 lines and a comment and be just as clear"}, {"owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "edited": false, "score": 0, "creation_date": 1465431056, "post_id": 37714768, "comment_id": 62903435, "body": "This reminds me of <a href=\"https://github.com/AceLewis/my_first_calculator.py/blob/master/my_first_calculator.py\" rel=\"nofollow noreferrer\">github.com/AceLewis/my_first_calculator.py/blob/master/&hellip;</a>"}, {"owner": {"reputation": 2452, "user_id": 1594060, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d93aa9c4456a600e2fdc404588726354?s=128&d=identicon&r=PG", "display_name": "Josh Rumbut", "link": "https://stackoverflow.com/users/1594060/josh-rumbut"}, "reply_to_user": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "edited": false, "score": 0, "creation_date": 1465431568, "post_id": 37714768, "comment_id": 62903572, "body": "@Keatinge maybe, in either case putting it in a well named method with a comment is a good idea. Not sure how many people remember what that 96 does off the top of their head, and it still requires hardcoding the last few values. There&#39;s also the issue of what to do if some of the characters change the value they&#39;re associated with, become associated with the same value, or if perhaps Cyrillic letters need to be handled as well."}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1465430148, "post_id": 37714792, "comment_id": 62903166, "body": "Rather than explicitly writing out that huge dict, you could do something like <code>d = {c: i for i, c in enumerate(&quot; &quot; + string.ascii_lowercase + &quot;.,?&#39;&quot;)}</code>."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1465430375, "post_id": 37714792, "comment_id": 62903241, "body": "@user2357112, yep, I was more showing the logic but I added your suggestion"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 1, "last_activity_date": 1465430539, "last_edit_date": 1465430539, "creation_date": 1465430061, "answer_id": 37714792, "question_id": 37714768, "link": "https://stackoverflow.com/questions/37714768/simplify-code-using-a-list-in-python/37714792#37714792", "title": "simplify code using a list in python", "body": "<p>Use a <em>dict</em> with <em>str.lower</em>:</p>\n\n<pre><code>d = {\" \":0, \"a\": 1, \"b\": 2, ......,\"'\":30}\n\ncharacter = d.get(character.lower(), 0)\n</code></pre>\n\n<p>If <em>character</em> is not in the dict the default value will be <code>0</code>although I don't see the logic of setting a space to 0 and also having that as a default.</p>\n\n<p>To create the dict as per @user23571152 comment:</p>\n\n<pre><code>d = {c: i for i, c in enumerate(\" \" + string.ascii_lowercase + \".,?'\")}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1465431348, "post_id": 37714817, "comment_id": 62903522, "body": "@Barmar I don&#39;t see a better way to write it. 96 is just the number you have to use to get a = 1 b = 2. Do you really think this code would be more clear with some variable on the top called <code>valueToSubtractFromOrd</code> equal to 96. It&#39;s not a meaningful number"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1465431383, "post_id": 37714817, "comment_id": 62903531, "body": "<code>ord(char.lower()) - ord(&#39;a&#39;)+1</code>."}, {"owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1465431460, "post_id": 37714817, "comment_id": 62903550, "body": "@Barmar Now every single letter requires two calls to ord though, one of which getting the same value every time."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1465431523, "post_id": 37714817, "comment_id": 62903564, "body": "<code>base = ord(&#39;a&#39;)-1</code> then use <code>ord(char.lower()) - base</code>."}, {"owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1465431746, "post_id": 37714817, "comment_id": 62903620, "body": "@Barmar alright fair enough, I&#39;ve edited it with the first way"}], "tags": [], "owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "is_accepted": false, "score": 1, "last_activity_date": 1465431699, "last_edit_date": 1465431699, "creation_date": 1465430187, "answer_id": 37714817, "question_id": 37714768, "link": "https://stackoverflow.com/questions/37714768/simplify-code-using-a-list-in-python/37714817#37714817", "title": "simplify code using a list in python", "body": "<p>There's no reason to code all those letters a-z by hand...\nIf it's alpha, subtract 97 from the ord, otherwise <code>.get()</code> from the dict with a default of 0 if its not in the dict</p>\n\n<pre><code>specialChars = {\" \" : 0, \".\" : 27, \",\" : 28, \"?\" : 29, \"'\" : 30}\nchar = \"'\"\nif char.isalpha():\n    print(ord(char.lower())-ord('a')+1)\nelse:\n    print(specialChars.get(char, 0))\n</code></pre>\n\n<p>This makes two calls to ord per char, I don't know how your actual function works but ideally you would just calculated <code>ord('a')+1</code> one time and use that per character. Or you could just use <code>print(ord(char.lower())-96)</code> if you are okay with the magic number</p>\n"}, {"tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": 3, "last_activity_date": 1465430189, "creation_date": 1465430189, "answer_id": 37714818, "question_id": 37714768, "link": "https://stackoverflow.com/questions/37714768/simplify-code-using-a-list-in-python/37714818#37714818", "title": "simplify code using a list in python", "body": "<p>Put all of the characters into one big string where the characters' positions in that string are the values you want to assign. You can handle upper and lowercase letters by converting the input to lowercase first.</p>\n\n<pre><code>value = \" abcdefghijklmnopqrstuvwxyz.,?'\".find(character.lower())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8139, "user_id": 384803, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/a700a4a1ccb243dd47d0a155fd43a2a2?s=128&d=identicon&r=PG", "display_name": "Dmitry B.", "link": "https://stackoverflow.com/users/384803/dmitry-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1465430623, "last_edit_date": 1465430623, "creation_date": 1465430254, "answer_id": 37714823, "question_id": 37714768, "link": "https://stackoverflow.com/questions/37714768/simplify-code-using-a-list-in-python/37714823#37714823", "title": "simplify code using a list in python", "body": "<p>Here's the basic idea:</p>\n\n<pre><code>character = ord(character.lower()) - ord('a') + 1 if character != ' ' else 0\n</code></pre>\n\n<p>You can adapt it to your particular requirements on the input. Since you didn't specify the acceptable domain of input values, I'm assuming that input is limited to what's in your example.</p>\n"}, {"tags": [], "owner": {"reputation": 5496, "user_id": 2661491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/829f8aba5815197b56359be148cd0a13?s=128&d=identicon&r=PG", "display_name": "evan.oman", "link": "https://stackoverflow.com/users/2661491/evan-oman"}, "is_accepted": false, "score": 0, "last_activity_date": 1465430733, "creation_date": 1465430733, "answer_id": 37714889, "question_id": 37714768, "link": "https://stackoverflow.com/questions/37714768/simplify-code-using-a-list-in-python/37714889#37714889", "title": "simplify code using a list in python", "body": "<p>I would use a <code>dict</code> like so:</p>\n\n<pre><code>In [0]: import string\n\nIn [1]: keys = list(\" \") + list(string.ascii_lowercase)\n\nIn [2]: dict = {}\n\nIn [3]: for v, k in enumerate(keys): dict[k] = v\n\nIn [4]: def getCharVal(character): return dict.get(character.lower(), -1)\n\nIn [5]: getCharVal(\"B\")\nOut[5]: 2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 407, "user_id": 4680561, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/88780952c04837b474db267bef98037f?s=128&d=identicon&r=PG&f=1", "display_name": "amitnair92", "link": "https://stackoverflow.com/users/4680561/amitnair92"}, "is_accepted": true, "score": 1, "last_activity_date": 1465445266, "creation_date": 1465445266, "answer_id": 37716628, "question_id": 37714768, "link": "https://stackoverflow.com/questions/37714768/simplify-code-using-a-list-in-python/37716628#37716628", "title": "simplify code using a list in python", "body": "<p>You can Simply set range by setting ASCII value using ord() function and then find index using index() function.</p>\n\n<pre><code>TestCase='T'\n\n# Make all Input to lowercase.\n\nTestCase=TestCase.lower()\n\n\n#calculate ASCII value of all lower character String\n\nRangeVariable=range(ord('a'),ord('z'))\n\n#Now Returning required Index value by comparing ASCII value of Testcase with that in RangVariable\n\n\nprint(RangeVariable.index(ord(TestCase)))\n</code></pre>\n"}], "owner": {"reputation": 847, "user_id": 2325057, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0724029f547016dbef01bc6cf3403d05?s=128&d=identicon&r=PG", "display_name": "Benjamin Chausse", "link": "https://stackoverflow.com/users/2325057/benjamin-chausse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 37716628, "answer_count": 6, "score": 3, "last_activity_date": 1465445266, "creation_date": 1465429836, "question_id": 37714768, "link": "https://stackoverflow.com/questions/37714768/simplify-code-using-a-list-in-python", "title": "simplify code using a list in python", "body": "<p>I have a line of python code that basically asigns a integer to a string (one letter). Since I use if statements, it need a lot of code lines... Is there a way I could simplify my code using a list so that it doesn't take up  63 lines of code? Here's my code:</p>\n\n<pre><code>if character in \" \":\n    character = 0\nelif character in \"Aa\":\n    character = 1\nelif character in \"Bb\":\n    character = 2\nelif character in \"Cc\":\n    character = 3\nelif character in \"Dd\":\n    character = 4\nelif character in \"Ee\":\n    character = 5\nelif character in \"Ff\":\n    character = 6\nelif character in \"Gg\":\n    character = 7\nelif character in \"Hh\":\n    character = 8\nelif character in \"Ii\":\n    character = 9\nelif character in \"Jj\":\n    character = 10\nelif character in \"Kk\":\n    character = 11\nelif character in \"Ll\":\n    character = 12\nelif character in \"Mm\":\n    character = 13\nelif character in \"Nn\":\n    character = 14\nelif character in \"Oo\":\n    character = 15\nelif character in \"Pp\":\n    character = 16\nelif character in \"Qq\":\n    character = 17\nelif character in \"Rr\":\n    character = 18\nelif character in \"Ss\":\n    character = 19\nelif character in \"Tt\":\n    character = 20\nelif character in \"Uu\":\n    character = 21\nelif character in \"Vv\":\n    character = 22\nelif character in \"Ww\":\n    character = 23\nelif character in \"Xx\":\n    character = 24\nelif character in \"Yy\":\n    character = 25\nelif character in \"Zz\":\n    character = 26\nelif character in \".\":\n    character = 27\nelif character in \",\":\n    character = 28\nelif character in \"?\":\n    character = 29\nelif character in \"'\":\n    character = 30\nelse:\n    character = 0\n</code></pre>\n"}, {"tags": ["python", "set", "multiprocessing"], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1465431292, "post_id": 37714759, "comment_id": 62903505, "body": "If other processes are concurrently <code>get</code>ting from the queue, a separate queue and dict are necessary to make sure you don&#39;t have situations where an integer gets added, removed, and added again. You could still avoid the lock with something like <code>shared_dict.setdefault(result_int, (process_identifier, increasing_counter))</code> to atomically add <code>result_int</code> to the dict and determine whether it was previously added, though it&#39;s a bit cumbersome."}, {"owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1465431808, "post_id": 37714759, "comment_id": 62903636, "body": "In the absence of any hints about what the <code>out_q</code> consumer does, I simply can&#39;t guess - but, yes, that does sound most plausible."}, {"owner": {"reputation": 335, "user_id": 2953544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/442e414cc00eda69863fcfa039018786?s=128&d=identicon&r=PG&f=1", "display_name": "AJSmyth", "link": "https://stackoverflow.com/users/2953544/ajsmyth"}, "edited": false, "score": 0, "creation_date": 1465504627, "post_id": 37714759, "comment_id": 62942663, "body": "@TimPeters I didn&#39;t actually use a set AND a list in the original code. Those are two different versions of the same code. Your second solution makes a lot of sense, though, and I&#39;m going to try it. Thanks for helping me understand what&#39;s going on with mp!"}], "tags": [], "owner": {"reputation": 55248, "user_id": 2705542, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc22708f70324dcbfe34f247637ca01?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Peters", "link": "https://stackoverflow.com/users/2705542/tim-peters"}, "is_accepted": true, "score": 9, "last_activity_date": 1540312172, "last_edit_date": 1540312172, "creation_date": 1465429773, "answer_id": 37714759, "question_id": 37714680, "link": "https://stackoverflow.com/questions/37714680/can-a-set-be-shared-between-python-processes/37714759#37714759", "title": "Can a set() be shared between Python processes?", "body": "<p>An obvious tweak is to use an <code>mp.Manager.dict()</code> instead of the set, and use arbitrary values (say, set <code>the_dict[result_int] = 1</code> to indicate membership in the set).  BTW, this is how \"everyone\" implemented sets before Python added the <code>set</code> type, and even now dicts and sets are implemented by basically the same code under the covers.</p>\n\n<p>Added later:  I confess I don't grasp why you used both a set and a list in the original code, since the set's keys are identical to the list's contents.  If order of entry isn't important, why not forget the list entirely?  Then you could also drop the layer of locking needed in the original to keep the set and the list in synch.</p>\n\n<p>Fleshing that out, with the dict suggestion, the whole function would become just like:</p>\n\n<pre><code>def worker(shared_dict):\n    # Do some processing and get an integer\n    result_int = some_other_code()\n    shared_dict[result_int] = 1\n</code></pre>\n\n<p>Other processes could do <code>shared_dict.pop()</code> then to get one value at a time (although, no, they couldn't wait on <code>.pop()</code> as they do for a queue's <code>.get()</code>).</p>\n\n<p>And one more:  consider using local (process-local) sets?  They'll run much faster.  Then each worker won't add any duplicates <em>it</em> knows about, but there may be duplicates <em>across</em> processes.  Your code didn't give any hints about what the <code>out_q</code> consumer does, but if there's only one then a local set in that too could weed out cross-process duplicates.  Or perhaps the memory burden gets too high then?  Can't guess from here ;-)</p>\n\n<h2>BIG EDIT</h2>\n\n<p>I'm going to suggest a different approach:  don't use <code>mp.Manager</code> at all.  Most times I see people use it, they regret it, because it's not doing what they <em>think</em> it's doing.  What they think:  it's supplying physically shared objects.  What it's doing:  it's supplying <em>semantically</em> shared objects.  Physically, they live in Yet Another, under-the-covers, process, and operations on the objects are forwarded to that latter process, where they're performed by that process in its own address space.  It's not <em>physically</em> shared at all.  So, while it can be very convenient, there are substantial interprocess overheads for even the simplest operations.</p>\n\n<p>So I suggest instead using a single, ordinary set in one process, which will be the sole code concerned with weeding out duplicates.  The worker processes produce ints with no concern for duplicates - they just pass the ints on.  An <code>mp.Queue</code> is fine for that (again, no real need for an <code>mp.Manager.Queue</code>).</p>\n\n<p>Like so, which is a complete executable program:</p>\n\n<pre><code>N = 20\n\ndef worker(outq):\n    from random import randrange\n    from time import sleep\n    while True:    \n        i = randrange(N)\n        outq.put(i)\n        sleep(0.1)\n\ndef uniqueifier(inq, outq):\n    seen = set()\n    while True:\n        i = inq.get()\n        if i not in seen:\n            seen.add(i)\n            outq.put(i)\n\ndef consumer(inq):\n    for _ in range(N):\n        i = inq.get()\n        print(i)\n\nif __name__ == \"__main__\":\n    import multiprocessing as mp\n    q1 = mp.Queue()\n    q2 = mp.Queue()\n    consume = mp.Process(target=consumer, args=(q2,))\n    consume.start()\n    procs = [mp.Process(target=uniqueifier, args=(q1, q2))]\n    for _ in range(4):\n        procs.append(mp.Process(target=worker, args=(q1,)))\n    for p in procs:\n        p.start()\n    consume.join()\n    for p in procs:\n        p.terminate()\n</code></pre>\n\n<p>The second queue passed to <code>uniqueifier</code> plays the role of your original queue:  it delivers only unique integers.  No attempt is made to \"share memory\", and so no costs due to that are paid.  The only interprocess communication is via easy, explicit <code>mp.Queue</code> operations.  There is only one set, and since it's not shared in any way it runs as fast as possible.</p>\n\n<p>In effect, this just sets up a simple pipeline, although with multiple inputs.</p>\n"}], "owner": {"reputation": 335, "user_id": 2953544, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/442e414cc00eda69863fcfa039018786?s=128&d=identicon&r=PG&f=1", "display_name": "AJSmyth", "link": "https://stackoverflow.com/users/2953544/ajsmyth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4589, "favorite_count": 0, "accepted_answer_id": 37714759, "answer_count": 1, "score": 4, "last_activity_date": 1540312172, "creation_date": 1465429168, "last_edit_date": 1465504329, "question_id": 37714680, "link": "https://stackoverflow.com/questions/37714680/can-a-set-be-shared-between-python-processes", "title": "Can a set() be shared between Python processes?", "body": "<p>I am using multiprocessing in Python 2.7 to process a very large set of data. As each process runs, it adds integers to a shared mp.Manager.Queue(), but only if some other process hasn't already added the same integer. Since you can't do an \"in\"-style membership test for Queues, the way I'm doing it is to check each int for membership in a shared mp.Manager.list(). The list will eventually have ~30 million entries, and so membership tests will be extremely slow, nullifying the advantage of multiprocessing.</p>\n\n<p>Here's a much simplified version of what I'm doing:</p>\n\n<pre><code>import multiprocessing as mp\n\ndef worker(shared_list, out_q, lock):\n    # Do some processing and get an integer\n    result_int = some_other_code()\n\n    # Use a lock to ensure nothing is added to the list in the meantime\n    lock.acquire()\n    # This lookup can take forever when the list is large\n    if result_int not in shared_list:\n        out_q.put(result_int)\n        shared_list.append(result_int)\n    lock.release()\n\nmanager = mp.Manager()\nshared_list = manager.list()\nlock = manager.lock()\nout_q = manager.Queue()\n\nfor i in range(8):\n   p = mp.Process(target=worker, args=(shared_list, out_q, lock))\n   p.start()\n</code></pre>\n\n<p>I previously tried using a set() instead of an mp.Manager.list(), but it seems that each process has its own memory space, and so when I updated the set, it didn't synchronize across processes. Hence, I switched to the current approach.</p>\n\n<p>Here's roughly how I previously tried using a set():\nimport multiprocessing as mp</p>\n\n<pre><code>def worker(shared_set, out_q, lock):\n    # Do some processing and get an integer\n    result_int = some_other_code()\n\n    # Use a lock to ensure nothing is added to the set in the meantime\n    lock.acquire()\n    # This lookup is fast, but the set doesn't reflect additions made by other processes.\n    if result_int not in shared_set:\n        out_q.put(result_int)\n        shared_set.add(result_int)\n    lock.release()\n\nmanager = mp.Manager()\nlock = manager.lock()\nout_q = manager.Queue()\n\n# This set will NOT synchronize between processes\nshared_set = set()\n\n\nfor i in range(8):\n   p = mp.Process(target=worker, args=(shared_set, out_q, lock))\n   p.start()\n</code></pre>\n\n<p>Note: these examples are untested and simply represent the relevant parts of my code.</p>\n\n<p>Is there a way to share sets across processes, or otherwise do faster membership lookups?</p>\n\n<p>EDIT:\nA little more information: the out_q is consumed by another process which writes the data to a single output file. There can be no duplicates. If I generate an integer and it's found to be a duplicate, the process needs to go back and generate the next-best integer.</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "linear-regression", "apache-spark-mllib"], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 2594827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6544b67b55d07d15fd069bc7d2d1946?s=128&d=identicon&r=PG", "display_name": "Anubis", "link": "https://stackoverflow.com/users/2594827/anubis"}, "is_accepted": false, "score": 1, "last_activity_date": 1485869963, "last_edit_date": 1485869963, "creation_date": 1485868711, "answer_id": 41958637, "question_id": 37714635, "link": "https://stackoverflow.com/questions/37714635/spark-mllib-linear-regression-giving-really-bad-results/41958637#41958637", "title": "Spark mllib linear regression giving really bad results", "body": "<p>Have a similar problem.\nUsed DecisionTree and RandomForest regression which works fine, althrough it is not great with producing continuous labels if you want to have a quite accurate solution.</p>\n\n<p>Then tested linear regression also like you did with multiple values for each parameter and also using multiple datasets and didnt get any solution that comes remotely close to the real value.\nAlso tried to use StandardScaler for feature scaling before training the model, but also not satisfying at all. :-(</p>\n\n<p><strong>EDIT: Setting intercept to true might solve the problem.</strong></p>\n"}], "owner": {"reputation": 153, "user_id": 4509910, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-Znzd0PSHE4A/AAAAAAAAAAI/AAAAAAAANsg/to6hKHbwx9k/photo.jpg?sz=128", "display_name": "Carlos Andres Castro", "link": "https://stackoverflow.com/users/4509910/carlos-andres-castro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 922, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485869963, "creation_date": 1465428848, "last_edit_date": 1495542812, "question_id": 37714635, "link": "https://stackoverflow.com/questions/37714635/spark-mllib-linear-regression-giving-really-bad-results", "title": "Spark mllib linear regression giving really bad results", "body": "<p>I've been getting <strong>really poor results</strong> when trying to do a linear regression using Spark mllib's LinearRegressionWithSGD using Python.</p>\n\n<p>I looked into similiar questions, like the following : </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/29751110/spark-mllib-linear-regression-intercept-and-weight-nan\">Spark - MLlib linear regression intercept and weight NaN</a></li>\n<li><a href=\"https://stackoverflow.com/questions/34940225/spark-mllib-python-linear-regression-with-sgd-not-getting-accurate-weights-for-s\">https://stackoverflow.com/questions/34940225/spark-mllib-python-linear-regression-with-sgd-not-getting-accurate-weights-for-s</a> </li>\n<li><a href=\"https://stackoverflow.com/questions/31131899/spark-mllib-linear-regression-linear-least-squares-giving-random-results\">Spark MlLib linear regression (Linear least squares) giving random results</a></li>\n</ul>\n\n<p>I am well aware that the key is to tweak the parameters <em>just right</em>.</p>\n\n<p>I also understand that Stochastic Gradient Descent won't necessarily find an optimal solution (like Alternating Least Squares does) due to the chance of getting stuck in a local minimum.  But at least I would expect to find an OK model.</p>\n\n<p>Here is my setup, I choose to use <a href=\"http://www.amstat.org/publications/jse/v16n3/datasets.kuiper.html\" rel=\"nofollow noreferrer\">this example</a> from the Journal of Statistics education and the corresponding <a href=\"http://www.amstat.org/publications/jse/jse_data_archive.htm\" rel=\"nofollow noreferrer\">dataset</a>.  I know from this paper (and from replicating the results in JMP) that if I use only the numerical fields I should get something similar to the following equation (with an R^2 of ~44% and a RMSE of ~7400):</p>\n\n<p><em>Price = 7323 - 0.171 Mileage + 3200 Cylinder - 1463 Doors + 6206 Cruise - 2024 Sound + 3327 Leather</em></p>\n\n<p>Since I didn't know how to set up the parameters <em>just right</em>, I ran the following brute force approach:</p>\n\n<pre><code>from collections import Iterable\nfrom pyspark import SparkContext\nfrom pyspark.mllib.regression import LabeledPoint\nfrom pyspark.mllib.regression import LinearRegressionWithSGD\nfrom pyspark.mllib.evaluation import RegressionMetrics\n\ndef f(n):\n    return float(n)\n\nif __name__ == \"__main__\":\n    sc = SparkContext(appName=\"LinearRegressionExample\")\n\n    # CSV file format:\n    # 0      1        2     3      4     5     6         7      8      9       10     11\n    # Price, Mileage, Make, Model, Trim, Type, Cylinder, Liter, Doors, Cruise, Sound, Leather\n    raw_data = sc.textFile('file:///home/ccastroh/training/pyspark/kuiper.csv')\n\n    # Grabbing numerical values only (for now)\n    data = raw_data \\\n        .map(lambda x : x.split(','))  \\\n        .map(lambda x : [f(x[0]), f(x[1]), f(x[6]), f(x[8]), f(x[9]), f(x[10]), f(x[11])])\n    points = data.map(lambda x : LabeledPoint(x[0], x[1:])).cache()\n\n    print \"Num, Iterations, Step, MiniBatch, RegParam, RegType, Intercept?, Validation?, \" + \\\n        \"RMSE, R2, EXPLAINED VARIANCE, INTERCEPT, WEIGHTS...\"\n    i = 0\n    for ite in [10, 100, 1000]:\n      for stp in [1, 1e-01, 1e-02, 1e-03, 1e-04, 1e-05, 1e-06, 1e-07, 1e-08, 1e-09, 1e-10]:\n        for mini in [0.2, 0.4, 0.6, 0.8, 1.0]:\n          for regP in [0.0, 0.1, 0.01, 0.001]:\n            for regT in [None, 'l1', 'l2']:\n              for intr in [True]:\n                for vald in [False, True]:\n                  i += 1\n\n                  message = str(i) + \\\n                      \",\" + str(ite) + \\\n                      \",\" + str(stp) + \\\n                      \",\" + str(mini) + \\\n                      \",\" + str(regP) + \\\n                      \",\" + str(regT) + \\\n                      \",\" + str(intr) + \\\n                      \",\" + str(vald)\n\n                  model = LinearRegressionWithSGD.train(points, iterations=ite, step=stp, \\\n                      miniBatchFraction=mini, regParam=regP, regType=regT, intercept=intr, \\\n                      validateData=vald)\n\n                  predictions_observations = points \\\n                      .map(lambda p : (float(model.predict(p.features)), p.label)).cache()\n                  metrics = RegressionMetrics(predictions_observations)\n                  message += \",\" + str(metrics.rootMeanSquaredError) \\\n                     + \",\" + str(metrics.r2) \\\n                     + \",\" + str(metrics.explainedVariance)\n\n                  message += \",\" + str(model.intercept)\n                  for weight in model.weights:\n                      message += \",\" + str(weight)\n\n                  print message\n    sc.stop()\n</code></pre>\n\n<p>As you can see, I basically ran 3960 different variations.  In none of those did I get anything that remotely resembles the formula from the paper or JMP.  Here are some highlights:</p>\n\n<ul>\n<li>In a lot of the runs I got NaN for the intercept and weights</li>\n<li>The highest R^2 that I got was -0.89.  Which I didn't even know you could get a negative R^2.  It turns out a negative value indicates that the chosen model <a href=\"https://stats.stackexchange.com/questions/12900/when-is-r-squared-negative\">fits worse than a horizontal line</a>.</li>\n<li>The lowest RMSE that I got was 13600, which is way worse than the expected 7400.</li>\n</ul>\n\n<p>I also tried <a href=\"http://www.benetzkorn.com/2011/11/data-normalization-and-standardization/\" rel=\"nofollow noreferrer\">normalizing the values</a> so that there are in the [0,1] range, and that didn't help either</p>\n\n<p><strong>Does anyone have any idea of how to get a Linear Regression model that is half decent?  Am I missing something?</strong></p>\n"}, {"tags": ["python", "subprocess", "pipeline"], "comments": [{"owner": {"reputation": 7107, "user_id": 459780, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/55b2cca3b7a11df3a961d57a68705503?s=128&d=identicon&r=PG", "display_name": "Daniel Standage", "link": "https://stackoverflow.com/users/459780/daniel-standage"}, "reply_to_user": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1465432994, "post_id": 37714611, "comment_id": 62903887, "body": "<code>someProgram</code> processes short sequences of DNA represented as strings."}, {"owner": {"reputation": 2046, "user_id": 1357527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e689f1fae96cb781cb487a0bc045b5be?s=128&d=identicon&r=PG", "display_name": "Natecat", "link": "https://stackoverflow.com/users/1357527/natecat"}, "edited": false, "score": 0, "creation_date": 1465433536, "post_id": 37714611, "comment_id": 62904003, "body": "@DanielStandage Are you sure it is terminating in a timely manner?"}, {"owner": {"reputation": 7107, "user_id": 459780, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/55b2cca3b7a11df3a961d57a68705503?s=128&d=identicon&r=PG", "display_name": "Daniel Standage", "link": "https://stackoverflow.com/users/459780/daniel-standage"}, "reply_to_user": {"reputation": 2046, "user_id": 1357527, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e689f1fae96cb781cb487a0bc045b5be?s=128&d=identicon&r=PG", "display_name": "Natecat", "link": "https://stackoverflow.com/users/1357527/natecat"}, "edited": false, "score": 0, "creation_date": 1465436957, "post_id": 37714611, "comment_id": 62904718, "body": "@Natecat When I run the shell wrapper, it executes and finishes within seconds. The Python wrapper hangs indefinitely. I edited the question to provide a dummy script for testing."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 0, "creation_date": 1465468900, "post_id": 37714611, "comment_id": 62918667, "body": "This has nothing to do with communicate or wait, your code never gets passed the <code>with open...</code>"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1465575459, "post_id": 37714611, "comment_id": 62975252, "body": "I&#39;ve updated <a href=\"http://stackoverflow.com/a/37686462/4279\">my answer to your related question, to produce the desired output: it shows how to print 4 lines from one then 4 lines from another file, etc</a>"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 1, "creation_date": 1465575758, "post_id": 37714611, "comment_id": 62975445, "body": "if you have a working bash script why do you need to translate it to Python? (just run the bash script directly)."}, {"owner": {"reputation": 7107, "user_id": 459780, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/55b2cca3b7a11df3a961d57a68705503?s=128&d=identicon&r=PG", "display_name": "Daniel Standage", "link": "https://stackoverflow.com/users/459780/daniel-standage"}, "reply_to_user": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1466011973, "post_id": 37714611, "comment_id": 63144874, "body": "@J.F. Sebastian Fair question. Some security and testing concerns, but mostly want to integrate with a related Python codebase."}], "owner": {"reputation": 7107, "user_id": 459780, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/55b2cca3b7a11df3a961d57a68705503?s=128&d=identicon&r=PG", "display_name": "Daniel Standage", "link": "https://stackoverflow.com/users/459780/daniel-standage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1465436889, "creation_date": 1465428686, "last_edit_date": 1465436889, "question_id": 37714611, "link": "https://stackoverflow.com/questions/37714611/nesting-process-substitutions-and-named-pipes-in-python", "title": "Nesting process substitutions and named pipes in Python", "body": "<p>There is a program (which I cannot modify) that creates two output files. I'm trying to write a Python wrapper around this program that streams the two outputs of this program through pipes and interleaves the two outputs into a single output, 4 lines at a time.</p>\n\n<p>I have implemented a working wrapper in Bash. It's got a lot of nested process substitutions, named pipes, and such.</p>\n\n<pre><code>mkfifo out1\nmkfifo out2\n\n./someProgram out1 out2 &amp;\npaste &lt;(paste - - - - &lt; out1) &lt;(paste - - - - &lt; out2) | tr '\\t' '\\n'\n\nwait\nrm out1 out2\n</code></pre>\n\n<p>I'm now trying to translate this into Python.</p>\n\n<pre><code># `named_pipes()` function as defined in http://stackoverflow.com/a/28840955/459780\nwith named_pipes(4) as paths:\n    data1, data2, paste1, paste2 = paths\n    proc1 = Popen(['./someProgram', data1, data2])\n\n    with open(data1, 'r') as stream1, open(data2, 'r') as stream2, \\\n            open(paste1, 'w') as stream3, open(paste2, 'w') as stream4:\n        pastecmd = ['paste', '-', '-', '-', '-']\n        proc2 = Popen(pastecmd, stdin=stream1, stdout=stream3)\n        proc3 = Popen(pastecmd, stdin=stream2, stdout=stream4)\n        proc4 = Popen(['paste', paste1, paste2], stdout=PIPE)\n        proc5 = Popen(['tr', \"'\\t'\", \"'\\n'\"], stdin=proc4.stdout)\n\n        proc5.communicate()\n        proc1.wait()\n</code></pre>\n\n<p>It's deadlocking, probably because I'm not calling the <code>communicate()</code> and <code>wait()</code> functions correctly. What am I doing wrong?</p>\n\n<hr>\n\n<p><strong>EDIT</strong>: The following dummy script behaves similarly to the program of interest. Save it as <code>someProgram</code> if you actually want to run the Bash and Python code above.</p>\n\n<pre><code>#!/usr/bin/env python\nfrom __future__ import print_function\nimport sys\nwith open(sys.argv[1], 'w') as f1, open(sys.argv[2], 'w') as f2:\n    for i in range(1000):\n        print('@read{}/1'.format(i), 'ACGT'*25, '+', 'BBBB'*25, sep='\\n', file=f1)\n        print('@read{}/2'.format(i), 'ACGT'*25, '+', 'BBBB'*25, sep='\\n', file=f2)\n</code></pre>\n"}, {"tags": ["python", "datetime"], "comments": [{"owner": {"reputation": 5959, "user_id": 3558644, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/QzHDA.jpg?s=128&g=1", "display_name": "Joe T. Boka", "link": "https://stackoverflow.com/users/3558644/joe-t-boka"}, "edited": false, "score": 0, "creation_date": 1465429148, "post_id": 37714602, "comment_id": 62902857, "body": "Have you tried to use Pandas? It&#39;s very easy to do this with Pandas."}, {"owner": {"reputation": 827, "user_id": 4060111, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/db01430448878e0a6fef247076d10c57?s=128&d=identicon&r=PG&f=1", "display_name": "Helene", "link": "https://stackoverflow.com/users/4060111/helene"}, "edited": false, "score": 1, "creation_date": 1465429504, "post_id": 37714602, "comment_id": 62902955, "body": "Not quite sure if you want to create a table like the one you showed, or loop every 30min for some other actions. If it is the later one, you can refer to: <a href=\"http://stackoverflow.com/questions/153584/how-to-iterate-over-a-timespan-after-days-hours-weeks-and-months-in-python\" title=\"how to iterate over a timespan after days hours weeks and months in python\">stackoverflow.com/questions/153584/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 6961, "user_id": 1248974, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ClqC2.jpg?s=128&g=1", "display_name": "davedwards", "link": "https://stackoverflow.com/users/1248974/davedwards"}, "is_accepted": false, "score": 2, "last_activity_date": 1465434678, "creation_date": 1465434678, "answer_id": 37715379, "question_id": 37714602, "link": "https://stackoverflow.com/questions/37714602/python-iteration-by-date-and-time-half-hour/37715379#37715379", "title": "python - iteration by date and time - half hour", "body": "<pre><code>import datetime\nfrom datetime import timedelta\n\nformat = \"%Y-%m-%d,%H:%M\"\n\nstart = datetime.datetime(2016, 6, 10, 0, 0)\n\nminutes = 0\n\nfor i in range(6):\n    print (start + timedelta(minutes=minutes)).strftime(format)\n    minutes += 30\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ python timespan.py  \n2016-06-10,00:00  \n2016-06-10,00:30  \n2016-06-10,01:00  \n2016-06-10,01:30  \n2016-06-10,02:00  \n2016-06-10,02:30  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 212, "user_id": 8216962, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mDnUk.png?s=128&g=1", "display_name": "Daedalus", "link": "https://stackoverflow.com/users/8216962/daedalus"}, "edited": false, "score": 0, "creation_date": 1601459515, "post_id": 37715533, "comment_id": 113412617, "body": "To be python3 compatible you need a parenthesis in print. Also, you need to replace xrange() with range(). Thank you!"}], "tags": [], "owner": {"reputation": 28401, "user_id": 2666859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LtKyC.png?s=128&g=1", "display_name": "Serenity", "link": "https://stackoverflow.com/users/2666859/serenity"}, "is_accepted": true, "score": 4, "last_activity_date": 1465435997, "creation_date": 1465435997, "answer_id": 37715533, "question_id": 37714602, "link": "https://stackoverflow.com/questions/37714602/python-iteration-by-date-and-time-half-hour/37715533#37715533", "title": "python - iteration by date and time - half hour", "body": "<p>Use <code>timedelta</code> to generate a range of <code>datetime</code> objects:</p>\n\n<pre><code>from datetime import timedelta, datetime\n\nstart_date = datetime(2016, 6, 9, 5, 0, 0)\nfor td in (start_date + timedelta(minutes=30*it) for it in xrange(10)):\n    print td.strftime(\"%Y-%m-%d,%H:%M\")\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>2016-06-09,05:00\n2016-06-09,05:30\n2016-06-09,06:00\n2016-06-09,06:30\n2016-06-09,07:00\n2016-06-09,07:30\n2016-06-09,08:00\n2016-06-09,08:30\n2016-06-09,09:00\n2016-06-09,09:30\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6023611"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3370, "favorite_count": 0, "accepted_answer_id": 37715533, "answer_count": 2, "score": 2, "last_activity_date": 1500790178, "creation_date": 1465428646, "last_edit_date": 1500790178, "question_id": 37714602, "link": "https://stackoverflow.com/questions/37714602/python-iteration-by-date-and-time-half-hour", "title": "python - iteration by date and time - half hour", "body": "<p>I think about how to iterate by data and time in following way:  </p>\n\n<pre><code>2016-06-10,00:00\n2016-06-10,01:30\n2016-06-10,02:00\n2016-06-10,02:30\n....\n</code></pre>\n\n<p>Can somebody help me ?</p>\n"}, {"tags": ["python", "node.js", "google-app-engine"], "comments": [{"owner": {"reputation": 4755, "user_id": 3284355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eeUPu.jpg?s=128&g=1", "display_name": "Molda", "link": "https://stackoverflow.com/users/3284355/molda"}, "edited": false, "score": 0, "creation_date": 1465453675, "post_id": 37714535, "comment_id": 62909411, "body": "I probably won&#39;t help you much but I&#39;m curious, is the python app running all the time or only when a request comes in? I mean in case of node app it&#39;s running even if no request comes in and some resources are needed to keep the app running."}, {"owner": {"reputation": 493, "user_id": 163300, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ffe6a8963636a5a8396f58d1755c8069?s=128&d=identicon&r=PG", "display_name": "wailer", "link": "https://stackoverflow.com/users/163300/wailer"}, "reply_to_user": {"reputation": 4755, "user_id": 3284355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eeUPu.jpg?s=128&g=1", "display_name": "Molda", "link": "https://stackoverflow.com/users/3284355/molda"}, "edited": false, "score": 0, "creation_date": 1466053738, "post_id": 37714535, "comment_id": 63159672, "body": "Python app - only when a request comes in. I don&#39;t want flexible !! I love my standard app engine... simple."}], "owner": {"reputation": 493, "user_id": 163300, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ffe6a8963636a5a8396f58d1755c8069?s=128&d=identicon&r=PG", "display_name": "wailer", "link": "https://stackoverflow.com/users/163300/wailer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 291, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1465428236, "creation_date": 1465428236, "question_id": 37714535, "link": "https://stackoverflow.com/questions/37714535/app-engine-standard-python-vs-app-engine-flexible-node-js-billing-clarifi", "title": "App Engine Standard (Python) vs. App Engine Flexible (Node.js) - Billing Clarifications", "body": "<p>I am currently running a python app on GCE (app engine standard) it's a small app only running under 1 instance - and when I load test it increases/decreases instance as needed and I get billed for usages. Fine and Dandy. </p>\n\n<p>Now when it comes node.js as per documentation I am on beta version of app engine flexible (previously managed VM's - Thanks marketing). I created an app deployed it for the first time and it created 2 compute engine instance (1 CPU small 1.7G mem). As far as I can tell looking at the documentation. These 2 instance will be running even if there is no load? is it correct? So the app engine flexible has a minimum 2 instance deployment correct? In app engine standard I have days where I get charged nothing cos no one visited the app (I know it's not popular - that's another issue). But in case of nodejs/flexible I will be charged for those days? correct?</p>\n\n<p>Thanks for clarification? hmm.. this gives a whole new meaning to the word \"flexible\"</p>\n"}, {"tags": ["python", "windows", "imagemagick", "anaconda", "wand"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 5066767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931b0d095335783a37b493105da7859b?s=128&d=identicon&r=PG&f=1", "display_name": "DataDude", "link": "https://stackoverflow.com/users/5066767/datadude"}, "edited": false, "score": 0, "creation_date": 1465498530, "post_id": 37724640, "comment_id": 62939406, "body": "Yep that&#39;s it. Thank you! I don&#39;t know why it was working when I was misusing it before."}, {"owner": {"reputation": 20869, "user_id": 438117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec2e8d45b1a0210065d1a4e3800f151?s=128&d=identicon&r=PG", "display_name": "emcconville", "link": "https://stackoverflow.com/users/438117/emcconville"}, "reply_to_user": {"reputation": 49, "user_id": 5066767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931b0d095335783a37b493105da7859b?s=128&d=identicon&r=PG&f=1", "display_name": "DataDude", "link": "https://stackoverflow.com/users/5066767/datadude"}, "edited": false, "score": 0, "creation_date": 1465499718, "post_id": 37724640, "comment_id": 62940103, "body": "Perhaps you used <code>import wand.image</code> elsewhere?"}], "tags": [], "owner": {"reputation": 20869, "user_id": 438117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dec2e8d45b1a0210065d1a4e3800f151?s=128&d=identicon&r=PG", "display_name": "emcconville", "link": "https://stackoverflow.com/users/438117/emcconville"}, "is_accepted": true, "score": 1, "last_activity_date": 1465480674, "last_edit_date": 1465480674, "creation_date": 1465471541, "answer_id": 37724640, "question_id": 37714467, "link": "https://stackoverflow.com/questions/37714467/wand-imagemagick-anaconda-wand-has-no-attribute-image/37724640#37724640", "title": "Wand + ImageMagick + Anaconda: &quot;&#39;wand&#39; has no attribute &#39;image&#39;&quot;", "body": "<p>Try this</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from wand.image import Image\n\nwith Image(filename=source_file, resolution=(RESOLUTION, RESOLUTION)) as img:\n    pass\n</code></pre>\n\n<blockquote>\n  <p>Is there something I'm missing? Why is wand not working correctly?</p>\n</blockquote>\n\n<p>I believe it is working as expected, and the original architect did not intend to allow top-package-level shortcuts (i.e. <code>import wand</code>). This kinda makes sense as <a href=\"/questions/tagged/wand\" class=\"post-tag\" title=\"show questions tagged &#39;wand&#39;\" rel=\"tag\">wand</a> integrates to IM with <a href=\"/questions/tagged/ctypes\" class=\"post-tag\" title=\"show questions tagged &#39;ctypes&#39;\" rel=\"tag\">ctypes</a>, and does not attempt to resolve libraries during <code>setup.py</code>.</p>\n\n<p>You can modify the package to include the module shortcuts your expecting by adding the following.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># wand/__init__.py\nimport api\nimport color\nimport compat\nimport display\nimport drawing\nimport exceptions\nimport font\nimport image\nimport resource\nimport sequence\nimport version\n</code></pre>\n\n<p>But I wouldn't recommend this. The <code>from package.module import Class</code> is a lot more cleaner.</p>\n"}, {"tags": [], "owner": {"reputation": 992, "user_id": 2123997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c074af03e7ea8ffb86b7c7e12373b090?s=128&d=identicon&r=PG", "display_name": "Aaj Kaal", "link": "https://stackoverflow.com/users/2123997/aaj-kaal"}, "is_accepted": false, "score": 0, "last_activity_date": 1600960568, "creation_date": 1600960568, "answer_id": 64049453, "question_id": 37714467, "link": "https://stackoverflow.com/questions/37714467/wand-imagemagick-anaconda-wand-has-no-attribute-image/64049453#64049453", "title": "Wand + ImageMagick + Anaconda: &quot;&#39;wand&#39; has no attribute &#39;image&#39;&quot;", "body": "<p>If you are using PIL.Image as well then use:</p>\n<p><code>from wand.image import Image as wand_image_Image</code><br />\n<code>import PIL</code></p>\n"}], "owner": {"reputation": 49, "user_id": 5066767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/931b0d095335783a37b493105da7859b?s=128&d=identicon&r=PG&f=1", "display_name": "DataDude", "link": "https://stackoverflow.com/users/5066767/datadude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2369, "favorite_count": 1, "accepted_answer_id": 37724640, "answer_count": 2, "score": 2, "last_activity_date": 1600960568, "creation_date": 1465427764, "question_id": 37714467, "link": "https://stackoverflow.com/questions/37714467/wand-imagemagick-anaconda-wand-has-no-attribute-image", "title": "Wand + ImageMagick + Anaconda: &quot;&#39;wand&#39; has no attribute &#39;image&#39;&quot;", "body": "<p>I'm having issues using these three together. I believe wand is not recognizing the ImageMagick libraries but I'm not sure.</p>\n\n<p>Environment:\nPython 3.5.1 :: Anaconda 4.0.0 (64-bit)\nWindows 7</p>\n\n<p>Set up instructions I took:</p>\n\n<ol>\n<li>Installed ImageMagick-6.9.4-Q8 (x64) with the \"C/C++ development\nheaders options checked. (Installed to C:\\Program\nFiles\\ImageMagick-6.9.4-Q8)</li>\n<li>Set MAGICK_HOME envar C:\\Program Files\\ImageMagick-6.9.4-Q8</li>\n<li>Installed wand from pip</li>\n</ol>\n\n<p>My code:</p>\n\n<pre><code>import wand\n...\nwith wand.image.Image(filename=source_file, resolution=(RESOLUTION, RESOLUTION)) as img:\n...\n</code></pre>\n\n<p>Traceback:</p>\n\n<pre><code>    Traceback (most recent call last):\n  File \".\\pdf_convert.py\", line 31, in &lt;module&gt;\n    ret = pdf2jpg(f, target_file, 2480)\n  File \".\\pdf_convert.py\", line 10, in pdf2jpg\n    with wand.image.Image(filename=source_file, resolution=(RESOLUTION, RESOLUTION)) as img:\nAttributeError: module 'wand' has no attribute 'image'\n</code></pre>\n\n<p>From everything I've seen I've followed the right setup instructions. I am using the 64 bit version of ImageMagick with the 64 bit version of Anaconda. This was working with me before until I started using Anaconda (before I was using regular 32 bit Python and 32 bit ImageMagick.)</p>\n\n<p>Is there something I'm missing? Why is wand not working correctly?</p>\n"}, {"tags": ["python", "numpy", "numpy-einsum"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1465435458, "post_id": 37714462, "comment_id": 62904398, "body": "There are more examples in the unittest file, <a href=\"https://github.com/numpy/numpy/blob/master/numpy/core/tests/test_einsum.py\" rel=\"nofollow noreferrer\">github.com/numpy/numpy/blob/master/numpy/core/tests/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 7, "last_activity_date": 1465428853, "last_edit_date": 1465428853, "creation_date": 1465428531, "answer_id": 37714579, "question_id": 37714462, "link": "https://stackoverflow.com/questions/37714462/numpy-einsum-broadcasting/37714579#37714579", "title": "Numpy einsum broadcasting", "body": "<p>The ellipses are a shorthand roughly standing for \"all the remaining axes not explicitly mentioned\". For example, suppose you had an array of shape (2,3,4,5,6,6):</p>\n\n<pre><code>import numpy as np\narr = np.random.random((2,3,4,5,6,6))\n</code></pre>\n\n<p>and you wish to take a trace along its last two axes:</p>\n\n<pre><code>result = np.einsum('ijklmm-&gt;ijklm', arr)\nresult.shape\n# (2, 3, 4, 5, 6)\n</code></pre>\n\n<p>An equivalent way to do that would be </p>\n\n<pre><code>result2 = np.einsum('...mm-&gt;...m', arr)\nassert np.allclose(result, result2)\n</code></pre>\n\n<p>The ellipses provide a shorthand notation meaning (in this case) \"and all the\naxes to the left\". The <code>...</code> stand for <code>ijkl</code>.</p>\n\n<p>One nice thing about not having to be explicit is that </p>\n\n<pre><code>np.einsum('...mm-&gt;...m', arr)\n</code></pre>\n\n<p>works equally well with arrays of any number of dimensions >= 2 (so long as the last two have equal length), whereas</p>\n\n<pre><code>np.einsum('ijklmm-&gt;ijklm', arr)\n</code></pre>\n\n<p>only works when <code>arr</code> has exactly 6 dimensions.</p>\n\n<hr>\n\n<p>When the ellipses appear in the middle, it is shorthand for \"all the middle axes\nnot explicitly mentioned\". For example, below, <code>np.einsum('ijklmi-&gt;ijklm', arr)</code>\nis equivalent to <code>np.einsum('i...i-&gt;i...', arr)</code>. Here the <code>...</code> stand for <code>jklm</code>:</p>\n\n<pre><code>arr = np.random.random((6,2,3,4,5,6))\nresult = np.einsum('ijklmi-&gt;ijklm', arr)\nresult2 = np.einsum('i...i-&gt;i...', arr)\nassert np.allclose(result, result2)\n</code></pre>\n"}], "owner": {"reputation": 16194, "user_id": 667883, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a39234ae82a5898cba1d70b5bff80ec3?s=128&d=identicon&r=PG", "display_name": "Allen", "link": "https://stackoverflow.com/users/667883/allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1279, "favorite_count": 2, "accepted_answer_id": 37714579, "answer_count": 1, "score": 5, "last_activity_date": 1465463994, "creation_date": 1465427748, "last_edit_date": 1465463994, "question_id": 37714462, "link": "https://stackoverflow.com/questions/37714462/numpy-einsum-broadcasting", "title": "Numpy einsum broadcasting", "body": "<p>Can someone please explain how broadcasting (ellipsis) works in the numpy.einsum() function?</p>\n\n<p>Some examples to show how and when it can be used would be greatly appreciated.</p>\n\n<p>I've checked the following official documentation page but there are only 2 examples and I can't seem to understand how to interpret it and use it.</p>\n\n<p><a href=\"http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.einsum.html\" rel=\"noreferrer\">http://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.einsum.html</a></p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 3, "creation_date": 1465427168, "post_id": 37714320, "comment_id": 62902254, "body": "This is almost certainly not working code, since <code>obj_array.size[0]</code> is invalid ... you mean <code>obj_array.shape</code>"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1465428272, "post_id": 37714320, "comment_id": 62902585, "body": "use a <a href=\"http://docs.scipy.org/doc/numpy-1.10.1/reference/generated/numpy.recarray.html\" rel=\"nofollow noreferrer\"><code>recarray</code></a> perhaps?"}], "answers": [{"tags": [], "owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "is_accepted": false, "score": 0, "last_activity_date": 1465428335, "creation_date": 1465428335, "answer_id": 37714552, "question_id": 37714320, "link": "https://stackoverflow.com/questions/37714320/new-numpy-array-from-attribute-of-objects-in-another-numpy-array/37714552#37714552", "title": "New numpy array from attribute of objects in another numpy array", "body": "<p>You can create your new array as:</p>\n\n<pre><code>bar_array = np.reshape(\n    np.fromiter((x.bar for x in obj_array.flat), dtype=float),\n    obj_array.shape)\n</code></pre>\n\n<p>Alter the <code>dtype</code> to whatever you'd please.</p>\n"}, {"tags": [], "owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "is_accepted": true, "score": 1, "last_activity_date": 1465429283, "creation_date": 1465429283, "answer_id": 37714694, "question_id": 37714320, "link": "https://stackoverflow.com/questions/37714320/new-numpy-array-from-attribute-of-objects-in-another-numpy-array/37714694#37714694", "title": "New numpy array from attribute of objects in another numpy array", "body": "<p>I think the fastest way will be to combine Python's  <code>operator.attrgetter</code> with numpy's <code>np.frompyfunction</code> - the first gives a fast, native code inlined, way to retrieve an object's attribute. The second, transforms an ordinary Python function into a Numpy's broadcast function, which can process an entire array in a single call - </p>\n\n<p>so, your call is:</p>\n\n<pre><code>from operator import attrgetter\nimport numpy as np\n# code to build obj_array\n...\nbar_array_easy_way = np.frompyfunc(attrgetter(\"bar\"), 1, 1)(obj_array)\n</code></pre>\n\n<p>Quickly comparing it against using  <code>fromtiterator</code> built a 1 million int array from my objects in half the time - besides, <code>fromiterator</code> can't build arrays with <code>dtype=object</code> - just fixed size elements. </p>\n\n<p>Note that <code>attrgetter</code> itself is rather a \"function factory\" - it takes an attribute name, and returns a function that will take any object and return that attribute. That returned function we pass in turn, to <code>frompyfunc</code> - which takes other 2 arguments in order to allow numpy to make its broadcasting magic: the number of input arguments and the number of return results for our function.</p>\n"}], "owner": {"reputation": 947, "user_id": 3088559, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b918ad95c7d6485814ceda30d279604b?s=128&d=identicon&r=PG&f=1", "display_name": "ericksonla", "link": "https://stackoverflow.com/users/3088559/ericksonla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 37714694, "answer_count": 2, "score": 0, "last_activity_date": 1465492442, "creation_date": 1465426893, "last_edit_date": 1465492442, "question_id": 37714320, "link": "https://stackoverflow.com/questions/37714320/new-numpy-array-from-attribute-of-objects-in-another-numpy-array", "title": "New numpy array from attribute of objects in another numpy array", "body": "<p>Is there a way to do an element-wise attribute extraction from a numpy array? For example, say I have:</p>\n\n<pre><code>import numpy as np\n\nclass foo():\n    def __init__(self, value):\n        self.bar = value\n\nobj_array = np.empty((2, 2), dtype='object')\nfor i in range(obj_array.shape[0]):\n    for j in range(obj_array.shape[1]):\n        obj_array[i, j] = foo(i+j)\n\nbar_array_hard_way = np.empty_like(obj_array)\nfor i in range(obj_array.shape[0]):\n    for j in range(obj_array.shape[1]):\n        bar_array_hard_way[i, j] = obj_array[i, j].bar\n</code></pre>\n\n<p>Here, I have an array of objects. Each object has some attribute. I'm hoping there is a slick built-in way of extracting those attributes as a new numpy array. Obviously this is a pretty trivial example, but larger arrays the element-wise copying is pretty annoying.</p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"comments": [{"owner": {"reputation": 502, "user_id": 4538674, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/eb62f75ad508781e30b9825facf65572?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Faraci", "link": "https://stackoverflow.com/users/4538674/jeff-faraci"}, "edited": false, "score": 0, "creation_date": 1465440707, "post_id": 37715040, "comment_id": 62905383, "body": "Thank you, let me go through all the details!  I really appreciate it.  If I have questions I will post here."}, {"owner": {"reputation": 502, "user_id": 4538674, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/eb62f75ad508781e30b9825facf65572?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Faraci", "link": "https://stackoverflow.com/users/4538674/jeff-faraci"}, "edited": false, "score": 0, "creation_date": 1465441374, "post_id": 37715040, "comment_id": 62905506, "body": "Everything is working and I can follow what you did.  Thanks a lot for the explanation and help on this."}], "tags": [], "owner": {"reputation": 28401, "user_id": 2666859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LtKyC.png?s=128&g=1", "display_name": "Serenity", "link": "https://stackoverflow.com/users/2666859/serenity"}, "is_accepted": true, "score": 1, "last_activity_date": 1465431769, "creation_date": 1465431769, "answer_id": 37715040, "question_id": 37714315, "link": "https://stackoverflow.com/questions/37714315/plotting-2-dat-files-string-file-handle-error/37715040#37715040", "title": "plotting 2 .dat files, string file handle error", "body": "<p>You have to plot with <code>plot</code> function:</p>\n\n<pre><code>...\nplot1 = plt.plot(*dat_file, linewidth=1.0, marker = 'o', label='solution 1') \nplot2 = plt.plot(*dat_file2, linewidth=1.0, marker = 'v', label='solution 2') \nax = plt.gca()\nax.legend(loc='best')\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/rSdP4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rSdP4.png\" alt=\"enter image description here\"></a></p>\n\n<p><code>plotfile</code> requires to set a delimiter (default is ',') and filename not arrays, you have to write like this:</p>\n\n<pre><code>plot1 = plt.plotfile(\"file1.dat\", linewidth=1.0, marker = 'o', delimiter=' ', newfig=False,  label='solution 1')\nplot2 = plt.plotfile(\"file2.dat\", linewidth=1.0, marker = 'v', delimiter=' ', newfig=False,  label='solution 2') \nplt.title(\"Result\")\nplt.xlabel('$x$', fontsize = 14)\nplt.ylabel('$y$', fontsize = 14)\nax = plt.gca()\nax.legend(loc='best')\nplt.show()    \n</code></pre>\n\n<p><code>newfig=False</code> controls plot data on a new figure or not.</p>\n"}], "owner": {"reputation": 502, "user_id": 4538674, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/eb62f75ad508781e30b9825facf65572?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff Faraci", "link": "https://stackoverflow.com/users/4538674/jeff-faraci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 37715040, "answer_count": 1, "score": 1, "last_activity_date": 1465431769, "creation_date": 1465426868, "question_id": 37714315, "link": "https://stackoverflow.com/questions/37714315/plotting-2-dat-files-string-file-handle-error", "title": "plotting 2 .dat files, string file handle error", "body": "<p>Hi I am trying to plot data from two .dat files on the same plot.\nWhen I try, I am getting an error message.  I show exactly where it comes from below in the code.  It has to do with a string or file handle.  I am very new to python and do not know how to fix this.</p>\n\n<p>I import both of my .dat files, they are both files with 2 columns.\nThen I define the name of my x,y axes with a specified font size, then do the same for the title.  I then try to plot the two .dat files on 1 plot.</p>\n\n<pre><code>import numpy as np\nfrom matplotlib import pyplot as plt\n\nfig = plt.figure()\n\n#unpack file data\n\ndat_file = np.loadtxt(\"file1.dat\", unpack=True)\ndat_file2 = np.loadtxt(\"file2.dat\", unpack=True)\n\nplt.xlabel('$x$', fontsize = 14)\nplt.ylabel('$y$', fontsize = 14)\nplt.title('result..', fontsize = 14)\n\nplot1 = plt.plotfile(*dat_file, linewidth=1.0, marker = 'o') #error message from this line\nplot2 = plt.plotfile(*dat_file2, linewidth=1.0, marker = 'v') #error message from this line\n\nplt.plotfile([plot1,plot2],['solution 1','solution 2'])\n\nplt.show()\n</code></pre>\n\n<p>Thanks a lot for your help.</p>\n"}, {"tags": ["python", "scrapy"], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 1931070, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8ec49c772467ee7091a4313c14ecf5cf?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/1931070/john-doe"}, "edited": false, "score": 0, "creation_date": 1465427834, "post_id": 37714372, "comment_id": 62902452, "body": "but it for all pages"}, {"owner": {"reputation": 129, "user_id": 1931070, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8ec49c772467ee7091a4313c14ecf5cf?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/1931070/john-doe"}, "edited": false, "score": 0, "creation_date": 1465427853, "post_id": 37714372, "comment_id": 62902458, "body": "can make it only for parse_item() ?"}, {"owner": {"reputation": 4546, "user_id": 2781701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5745f276004f077454f27cde70858a1d?s=128&d=identicon&r=PG", "display_name": "Rafael Almeida", "link": "https://stackoverflow.com/users/2781701/rafael-almeida"}, "edited": false, "score": 0, "creation_date": 1465428830, "post_id": 37714372, "comment_id": 62902753, "body": "Never thought of using middlewares for this kind of ordeal +1, thanks"}, {"owner": {"reputation": 129, "user_id": 1931070, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8ec49c772467ee7091a4313c14ecf5cf?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/1931070/john-doe"}, "edited": false, "score": 0, "creation_date": 1465430549, "post_id": 37714372, "comment_id": 62903295, "body": "can get spider name in <b>init</b> ?"}, {"owner": {"reputation": 129, "user_id": 1931070, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8ec49c772467ee7091a4313c14ecf5cf?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/1931070/john-doe"}, "edited": false, "score": 0, "creation_date": 1465432810, "post_id": 37714372, "comment_id": 62903847, "body": "request.callback always _response_downloaded"}, {"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1465441647, "post_id": 37714372, "comment_id": 62905560, "body": "sorry I didn&#39;t test the middleware, it should be ready now, I was missing the <code>self</code> argument and to return a <code>response</code>"}, {"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1465446167, "post_id": 37714372, "comment_id": 62906574, "body": "it shouldn&#39;t return that, how did you activate your middleware? what order is it in?, do you have more middlewares?"}, {"owner": {"reputation": 129, "user_id": 1931070, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8ec49c772467ee7091a4313c14ecf5cf?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/1931070/john-doe"}, "edited": false, "score": 0, "creation_date": 1465449636, "post_id": 37714372, "comment_id": 62907722, "body": "middleware second in order of DOWNLOADER_MIDDLEWARES"}, {"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1465480426, "post_id": 37714372, "comment_id": 62927316, "body": "ok looks like you are using a <code>CrawlSpider</code> I am afraid I can&#39;t get the respective callbacks on that case."}], "tags": [], "owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "is_accepted": false, "score": 2, "last_activity_date": 1465441621, "last_edit_date": 1465441621, "creation_date": 1465427130, "answer_id": 37714372, "question_id": 37714294, "link": "https://stackoverflow.com/questions/37714294/scrapy-middleware-for-skip-some-page/37714372#37714372", "title": "scrapy middleware for skip some page", "body": "<p>You should use a <a href=\"http://doc.scrapy.org/en/latest/topics/downloader-middleware.html#scrapy.downloadermiddlewares.DownloaderMiddleware.process_response\" rel=\"nofollow\"><code>Downloader Middleware</code></a> specifically because of the <code>process_response</code> it offers</p>\n\n<p>from scrapy.exceptions import IgnoreRequest</p>\n\n<pre><code>class SkipMiddleware(object):\n    def process_response(self, request, response, spider):\n        if spider.name == 'myspider' and request.callback == spider.parse_item:\n            if 'pattern' not in response.xpath('//title//text()').extract_first():\n            raise IgnoreRequest\n        return response\n</code></pre>\n\n<p>remember to <a href=\"http://doc.scrapy.org/en/latest/topics/downloader-middleware.html#activating-a-downloader-middleware\" rel=\"nofollow\">activate it</a></p>\n"}, {"tags": [], "owner": {"reputation": 129, "user_id": 1931070, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8ec49c772467ee7091a4313c14ecf5cf?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/1931070/john-doe"}, "is_accepted": true, "score": 0, "last_activity_date": 1465516155, "creation_date": 1465516155, "answer_id": 37737936, "question_id": 37714294, "link": "https://stackoverflow.com/questions/37714294/scrapy-middleware-for-skip-some-page/37737936#37737936", "title": "scrapy middleware for skip some page", "body": "<p>sad to answer my own question, but what can i do...</p>\n\n<pre><code>   def process_response(self,request, response, spider):\n        if not spider._rules:\n            return response\n        rule_index=request._meta.get('rule',None)\n\n        response_callback=None\n        if rule_index != None:\n            rule = spider._rules[rule_index]\n            response_callback=rule.callback\n\n\n        if response_callback and response_callback == getattr(spider,self.settings['PARSE_FUNCTION']):\n            ## do something\n        return response\n</code></pre>\n"}], "owner": {"reputation": 129, "user_id": 1931070, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8ec49c772467ee7091a4313c14ecf5cf?s=128&d=identicon&r=PG&f=1", "display_name": "John Doe", "link": "https://stackoverflow.com/users/1931070/john-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 0, "accepted_answer_id": 37737936, "answer_count": 2, "score": 1, "last_activity_date": 1465516155, "creation_date": 1465426775, "question_id": 37714294, "link": "https://stackoverflow.com/questions/37714294/scrapy-middleware-for-skip-some-page", "title": "scrapy middleware for skip some page", "body": "<p>i want got data only from pages where \"name\" contains some pattern\nother pages i want skip.</p>\n\n<p>Now it is so</p>\n\n<pre><code>def parse_item(self, response):\n  item=Item()\n  item['name']=response.xpath('//title//text()').extract().first()\n  if \"pattern\" not in item['name']:\n    return []\n  else:\n    return item\n</code></pre>\n\n<p>how to make it as middleware?</p>\n"}, {"tags": ["python", "airflow"], "comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1465426915, "post_id": 37714261, "comment_id": 62902180, "body": "Looks like it&#39;s a DAG.  <a href=\"https://github.com/apache/incubator-airflow/blob/master/airflow/www/templates/airflow/dags.html\" rel=\"nofollow noreferrer\">github.com/apache/incubator-airflow/blob/master/airflow/www/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1465427038, "post_id": 37714261, "comment_id": 62902217, "body": "Shown in the documentation here.  <a href=\"https://cwiki.apache.org/confluence/display/AIRFLOW/DAGs+UI\" rel=\"nofollow noreferrer\">cwiki.apache.org/confluence/display/AIRFLOW/DAGs+UI</a>"}, {"owner": {"reputation": 15409, "user_id": 2877364, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0a101160e41fd7fd75f5fc701f8acb1c?s=128&d=identicon&r=PG", "display_name": "cxw", "link": "https://stackoverflow.com/users/2877364/cxw"}, "edited": false, "score": 0, "creation_date": 1465427426, "post_id": 37714261, "comment_id": 62902333, "body": "Source: function landing_times in <a href=\"https://github.com/apache/incubator-airflow/blob/master/airflow/www/views.py\" rel=\"nofollow noreferrer\">github.com/apache/incubator-airflow/blob/master/airflow/www/&zwnj;&#8203;&hellip;</a> .  Looks like it might show when recent jobs completed."}], "answers": [{"comments": [{"owner": {"reputation": 2416, "user_id": 825860, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dXVfB.png?s=128&g=1", "display_name": "victorx", "link": "https://stackoverflow.com/users/825860/victorx"}, "edited": false, "score": 2, "creation_date": 1485214204, "post_id": 37739978, "comment_id": 70823171, "body": "I wonder whether the word &#39;minutes&#39; is a typo of &#39;minus&#39;. Even so, I can&#39;t quite make sense of your description. Do you mind elaborating it a little bit more?"}, {"owner": {"reputation": 2506, "user_id": 7866972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tsl55.jpg?s=128&g=1", "display_name": "Tehscript", "link": "https://stackoverflow.com/users/7866972/tehscript"}, "edited": false, "score": 0, "creation_date": 1573641219, "post_id": 37739978, "comment_id": 103945153, "body": "I think op meant -&gt; (the time when the job completes) - (the time when the job should have started). So it&#39;s the variance in order to see if the job has been executed on schedule or not."}], "tags": [], "owner": {"reputation": 378, "user_id": 6442810, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SJl_YXy9MT4/AAAAAAAAAAI/AAAAAAAASA4/-CYNDkz8eNQ/photo.jpg?sz=128", "display_name": "user6442810", "link": "https://stackoverflow.com/users/6442810/user6442810"}, "is_accepted": false, "score": 11, "last_activity_date": 1542141076, "last_edit_date": 1542141076, "creation_date": 1465533248, "answer_id": 37739978, "question_id": 37714261, "link": "https://stackoverflow.com/questions/37714261/what-does-the-landing-time-mean-in-airflow/37739978#37739978", "title": "What does the landing time mean in airflow?", "body": "<p>I directly asked the author Maxime. His answer was <code>landing_time</code> is when the job completes minus when the job should have started (for airflow, it's the end of the scheduled period).</p>\n\n<p>source:\n<a href=\"http://gitter.im/apache/incubator-airflow\" rel=\"noreferrer\">http://gitter.im/apache/incubator-airflow</a>\nIt is a good place to get help and Maxine is very nice and helpful. But the answers are not persistent..</p>\n"}, {"comments": [{"owner": {"reputation": 12402, "user_id": 24424, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/1374b43b692ccd9ed477697a8fa2a0e9?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/24424/rahul"}, "edited": false, "score": 0, "creation_date": 1515744138, "post_id": 44444156, "comment_id": 83425106, "body": "I am wondering if this is entirely accurate. I see jobs with landing time of 5 hours when the job ended at 11:00 in the morning. That is because the job did not start immediately after the scheduling period ended since it had upstream dependencies."}], "tags": [], "owner": {"reputation": 395, "user_id": 6814234, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O3r4I.jpg?s=128&g=1", "display_name": "Steve Wetzel", "link": "https://stackoverflow.com/users/6814234/steve-wetzel"}, "is_accepted": false, "score": 22, "last_activity_date": 1496951213, "last_edit_date": 1496951213, "creation_date": 1496950375, "answer_id": 44444156, "question_id": 37714261, "link": "https://stackoverflow.com/questions/37714261/what-does-the-landing-time-mean-in-airflow/44444156#44444156", "title": "What does the landing time mean in airflow?", "body": "<p>Since the existing answer here wasn't totally clear, and this is the top hit for \"airflow landing time\" I went to the chat archives and found the original answer being referenced here:</p>\n\n<pre><code>Maxime Beauchemin @mistercrunch Jun 09 2016 11:12 \nit's the number of hours after the time the scheduling period ended\ntake a schedule_interval='@daily' run for 2016-01-01 that finishes at 2016-01-02 03:52:00\nlanding time is 3:52\n</code></pre>\n\n<p><a href=\"https://gitter.im/apache/incubator-airflow/archives/2016/06/09\" rel=\"noreferrer\">https://gitter.im/apache/incubator-airflow/archives/2016/06/09</a></p>\n\n<p>It seems the Y axis is in hours, and the negative landing times are a result of running jobs manually so they finish hours before they \"should have finished\" based on the schedule.</p>\n"}, {"tags": [], "owner": {"reputation": 516, "user_id": 7024760, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2def18759fb434b290fbad5c857e15?s=128&d=identicon&r=PG&f=1", "display_name": "Flavio", "link": "https://stackoverflow.com/users/7024760/flavio"}, "is_accepted": false, "score": -3, "last_activity_date": 1533894870, "creation_date": 1533894870, "answer_id": 51783838, "question_id": 37714261, "link": "https://stackoverflow.com/questions/37714261/what-does-the-landing-time-mean-in-airflow/51783838#51783838", "title": "What does the landing time mean in airflow?", "body": "<p>Landing Times: Total time spent including retries.</p>\n"}], "owner": {"reputation": 378, "user_id": 6442810, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SJl_YXy9MT4/AAAAAAAAAAI/AAAAAAAASA4/-CYNDkz8eNQ/photo.jpg?sz=128", "display_name": "user6442810", "link": "https://stackoverflow.com/users/6442810/user6442810"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6523, "favorite_count": 4, "answer_count": 3, "score": 26, "last_activity_date": 1542141076, "creation_date": 1465426576, "last_edit_date": 1533896050, "question_id": 37714261, "link": "https://stackoverflow.com/questions/37714261/what-does-the-landing-time-mean-in-airflow", "title": "What does the landing time mean in airflow?", "body": "<p>There is a section called \"landing time\" in the DAG view on the web console of airflow.</p>\n\n<p>An example screen shot taken from airbnb's blog:</p>\n\n<p><a href=\"https://i.stack.imgur.com/BCcqp.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/BCcqp.png\" alt=\"\"></a></p>\n\n<p>But what does it mean? There is no definition in the documents or in their repository.</p>\n"}, {"tags": ["python", "numpy", "pandas"], "comments": [{"owner": {"reputation": 1540, "user_id": 6297504, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FUlnHAlBzYU/AAAAAAAAAAI/AAAAAAAABu0/feK9LrMcSKU/photo.jpg?sz=128", "display_name": "Andreas Hsieh", "link": "https://stackoverflow.com/users/6297504/andreas-hsieh"}, "edited": false, "score": 0, "creation_date": 1465428362, "post_id": 37714241, "comment_id": 62902618, "body": "Can you provide sample data of your dataframe?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6442767, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207901871797067/picture?type=large", "display_name": "Gabriel Sanchez Dos Santos", "link": "https://stackoverflow.com/users/6442767/gabriel-sanchez-dos-santos"}, "edited": false, "score": 0, "creation_date": 1465494199, "post_id": 37714874, "comment_id": 62936822, "body": "Hey I updated my question with my code...I tried to merge, but I think I am doing in the wrong way...how can I do it from the example I added in my first question?"}], "tags": [], "owner": {"reputation": 9, "user_id": 5265457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed9a549f139f235840d54f977bcc52c7?s=128&d=identicon&r=PG&f=1", "display_name": "gbakie", "link": "https://stackoverflow.com/users/5265457/gbakie"}, "is_accepted": false, "score": 0, "last_activity_date": 1465570479, "last_edit_date": 1465570479, "creation_date": 1465430635, "answer_id": 37714874, "question_id": 37714241, "link": "https://stackoverflow.com/questions/37714241/pandas-how-to-combine-matrix-with-different-index-and-columns/37714874#37714874", "title": "pandas: how to combine matrix with different index and columns?", "body": "<p>I believe that there is a mistake in the relationship dataframe from your example, since you clearly state that it should be the relationship between <strong>season</strong> (and not region) and month, so I changed it accordingly.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\nregions = ['Region A', 'Region B', 'Region C', 'Region D']\nseasons = ['Season A', 'Season B', 'Season C', 'Season D']\ncost_data = np.array([[1, 9, 7, 2], [7, 0, 3, 3], [4, 0, 7, 5], [3, 10, 3, 10]])\n\ncost = pd.DataFrame(data=cost_data, index=regions, columns=seasons)\n\nmonths = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug']\nrel_data = np.array([[1, 1, 0, 0, 0, 0, 0, 0], \n                     [0, 0, 1, 1, 0, 0, 0, 0], \n                     [0, 0, 0, 0, 1, 1, 0, 0], \n                     [0, 0, 0, 0, 0, 0, 1, 1]])\n\nrel = pd.DataFrame(data=rel_data, index=seasons, columns=months)\n\nc = pd.DataFrame(index=regions, columns=months)\nfor region in regions:\n    for month in months:\n        for season in seasons:\n            if rel.loc[season][month]:\n                c.loc[region][month] = cost.loc[region][season]\n\nprint c\n\n#          Jan Feb Mar Apr May Jun Jul Aug\n#Region A   1   1   9   9   7   7   2   2\n#Region B   7   7   0   0   3   3   3   3\n#Region C   4   4   0   0   7   7   5   5\n#Region D   3   3  10  10   3   3  10  10\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6442767, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207901871797067/picture?type=large", "display_name": "Gabriel Sanchez Dos Santos", "link": "https://stackoverflow.com/users/6442767/gabriel-sanchez-dos-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465570479, "creation_date": 1465426425, "last_edit_date": 1465494117, "question_id": 37714241, "link": "https://stackoverflow.com/questions/37714241/pandas-how-to-combine-matrix-with-different-index-and-columns", "title": "pandas: how to combine matrix with different index and columns?", "body": "<p>I am using python, pandas and numpy to read a few data.</p>\n\n<p>I have two data frames:</p>\n\n<p>Input 1- Cost matrix(it has the cost per season and region): index = regions and columns = seasons\nInput 2- Binary matrix(value 1 when a month \"a\" belongs to a season \"b\": index=seasons, columns=months</p>\n\n<p>The output that I would like to have is a matrix C that has the cost per region and month: index=region, column month.</p>\n\n<p>Could anyone please help me with that? I googled a lot, but I can't find the solution.</p>\n\n<p>updating with my code</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nfrom xlwings import Workbook, Range\nimport os\nprint(os.getcwd())\nlink = (os.getcwd() + '/test.xlsx')\nprint(link)\n\n#Open the Workbook\nwb = Workbook(link)\n#\n#Reading data\n\nregions=np.array(Range('Sheet1','regions').value)\n#[u'Region A' u'Region B' u'Region C' u'Region D']\n\nseasons=np.array(Range('Sheet1','seasons').value)\n#[u'Season A' u'Season B' u'Season C' u'Season D']\n\nmonths=np.array(Range('Sheet1','months').value)\n#[u'Jan' u'Feb' u'Mar' u'Apr' u'May' u'Jun' u'Jul' u'Aug']\n\n#read relationship between season and month\ndata=Range('Sheet1','rel').table.value\nrelationship=pd.DataFrame(data[0:], index = regions, columns=months)\n#          Jan  Feb  Mar  Apr  May  Jun  Jul  Aug\n#Region A    1    1    0    0    0    0    0    0\n#Region B    0    0    1    1    0    0    0    0\n#Region C    0    0    0    0    1    1    0    0\n#Region D    0    0    0    0    0    0    1    1\n\n#read the cost per region\ndata=Range('Sheet1','cost').table.value\ncost=pd.DataFrame(data[0:], index = regions, columns=seasons)\n#          Season A  Season B  Season C  Season D\n#Region A         1         9         7         2\n#Region B         7         0         3         3\n#Region C         4         0         7         5\n#Region D         3        10         3        10\n\n\n#What I want:\n#        Jan    Feb Mar Apr May Jun Jul Aug\n#Region A   1   1   9   9   7   7   2   2\n#Region B   7   7   0   0   3   3   3   3\n#Region C   4   4   0   0   7   7   5   5\n#Region D   3   3   10  10  3   3   10  10\n</code></pre>\n"}, {"tags": ["python", "sqlite"], "comments": [{"owner": {"reputation": 16373, "user_id": 9908, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aa969fa6c106368e269620f1a90652a8?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/9908/david"}, "edited": false, "score": 0, "creation_date": 1465426937, "post_id": 37714226, "comment_id": 62902189, "body": "?&#39;s sanitizing is done by the actual sqlite library and not format.  in sqlite it would be something like <code>connection.execute(...&quot;VALUES (?,?)&quot;..., (&quot;foo&quot;, 123)</code> with a function signature like <code>execute(statement, raw_values)</code> so the ?&#39;s will remain if you use .format"}, {"owner": {"reputation": 63, "user_id": 6222400, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ilIix.jpg?s=128&g=1", "display_name": "D. Romanski", "link": "https://stackoverflow.com/users/6222400/d-romanski"}, "reply_to_user": {"reputation": 16373, "user_id": 9908, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aa969fa6c106368e269620f1a90652a8?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/9908/david"}, "edited": false, "score": 0, "creation_date": 1465427190, "post_id": 37714226, "comment_id": 62902262, "body": "Correct. But I am not adding these to a database. I am creating a list of insert statements to be written to a .txt file. Would I still want to set up a connection for that?"}, {"owner": {"reputation": 16373, "user_id": 9908, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aa969fa6c106368e269620f1a90652a8?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/9908/david"}, "edited": false, "score": 0, "creation_date": 1465427658, "post_id": 37714226, "comment_id": 62902393, "body": "I just went through sqlite&#39;s source code to see if the escape/statement logic can be used independently.  Closest I found was this - <a href=\"https://docs.python.org/2/library/sqlite3.html#sqlite3.Connection.iterdump\" rel=\"nofollow noreferrer\">docs.python.org/2/library/&hellip;</a>  where you would have to load your data into say a memory Sqlite DB and then use this to get cleaned statements.  Python 3 should have the same functionality but google still brings up Py2 docs for me."}, {"owner": {"reputation": 16373, "user_id": 9908, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aa969fa6c106368e269620f1a90652a8?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/9908/david"}, "edited": false, "score": 0, "creation_date": 1465429008, "post_id": 37714226, "comment_id": 62902819, "body": "Closest I could find for sanitizing could be re.escape but I suspect its not as good as the actual sqlite sanitizing logic.  Unfortunately sqlite has a mechanism for printing statements to strings but it was not provided/bridged to Python and it would still require a live sqlite DB."}, {"owner": {"reputation": 63, "user_id": 6222400, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ilIix.jpg?s=128&g=1", "display_name": "D. Romanski", "link": "https://stackoverflow.com/users/6222400/d-romanski"}, "reply_to_user": {"reputation": 16373, "user_id": 9908, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aa969fa6c106368e269620f1a90652a8?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/9908/david"}, "edited": false, "score": 0, "creation_date": 1465429216, "post_id": 37714226, "comment_id": 62902876, "body": "Thanks man. I appreciate your help. I will see what I can do about using a DB for it."}], "answers": [{"comments": [{"owner": {"reputation": 16373, "user_id": 9908, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aa969fa6c106368e269620f1a90652a8?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/9908/david"}, "edited": false, "score": 0, "creation_date": 1465452632, "post_id": 37715010, "comment_id": 62908916, "body": "Any chance you can post a snippet of what you did to make it work?"}], "tags": [], "owner": {"reputation": 63, "user_id": 6222400, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ilIix.jpg?s=128&g=1", "display_name": "D. Romanski", "link": "https://stackoverflow.com/users/6222400/d-romanski"}, "is_accepted": false, "score": 0, "last_activity_date": 1465431581, "creation_date": 1465431581, "answer_id": 37715010, "question_id": 37714226, "link": "https://stackoverflow.com/questions/37714226/populating-insert-statements-from-a-local-file/37715010#37715010", "title": "Populating Insert Statements from a local file", "body": "<p>I figured it out after reviewing it. Essentially I was missing that I had to combine the attributes together with my Insert string with the '+'. Also had to convert the variables to str() in case they were int.</p>\n"}], "owner": {"reputation": 63, "user_id": 6222400, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ilIix.jpg?s=128&g=1", "display_name": "D. Romanski", "link": "https://stackoverflow.com/users/6222400/d-romanski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465431581, "creation_date": 1465426348, "question_id": 37714226, "link": "https://stackoverflow.com/questions/37714226/populating-insert-statements-from-a-local-file", "title": "Populating Insert Statements from a local file", "body": "<p>I am trying to write user data from a file into a series of insert statements. I feel I am close but just missing one or two things. I am attempting to run a .format, but all I end up with are ?'s</p>\n\n<pre><code>import time, json, sqlite3\n\ndef insertsfromfile(file):\n    results = open(file).readlines()\n    output = open('UserINSERTFile.txt', 'w')\n    for rows in results:\n\n        jsonobject = json.loads(rows)\n        userid = jsonobject['user']['id']\n        name = jsonobject['user']['name']\n        screenname = jsonobject['user']['screen_name']\n        description = jsonobject['user']['description']\n        friendscount = jsonobject['user']['friends_count']\n\n        insert = ('INSERT INTO Users VALUES (?,?,?,?,?'.format(userid, name, screenname,description, friendscount)\n        insert = insert[:-1] + ''\n        output.write(insert)\n    output.close()\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "regex", "separator"], "comments": [{"owner": {"reputation": 19255, "user_id": 428862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7041b76f657ac8e8d32a72f1b8b5b4bb?s=128&d=identicon&r=PG", "display_name": "Merlin", "link": "https://stackoverflow.com/users/428862/merlin"}, "edited": false, "score": 0, "creation_date": 1465430683, "post_id": 37714202, "comment_id": 62903329, "body": "/@user start by  removing the &quot;engine&quot;.  And, please include actual data sample .5-10 rows."}, {"owner": {"reputation": 15, "user_id": 2763524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b076d5ea1459585af7cde71b6e18d78b?s=128&d=identicon&r=PG&f=1", "display_name": "user2763524", "link": "https://stackoverflow.com/users/2763524/user2763524"}, "reply_to_user": {"reputation": 19255, "user_id": 428862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7041b76f657ac8e8d32a72f1b8b5b4bb?s=128&d=identicon&r=PG", "display_name": "Merlin", "link": "https://stackoverflow.com/users/428862/merlin"}, "edited": false, "score": 0, "creation_date": 1465431674, "post_id": 37714202, "comment_id": 62903598, "body": "Hello Merlin and thanks for replying! Removing the engine gives me a &quot;ParserWarning Falling back to python engine because the &#39;c&#39; engine does not support regex separators&quot;. I have edited the OP with actual data"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 2763524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b076d5ea1459585af7cde71b6e18d78b?s=128&d=identicon&r=PG&f=1", "display_name": "user2763524", "link": "https://stackoverflow.com/users/2763524/user2763524"}, "edited": false, "score": 0, "creation_date": 1465430407, "post_id": 37714411, "comment_id": 62903253, "body": "Thank you for your reply! I tried read_table, changing the sep value to what you suggested, as well as the other suggestions in the thread you linked.. still running into the same issue :("}], "tags": [], "owner": {"reputation": 1540, "user_id": 6297504, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FUlnHAlBzYU/AAAAAAAAAAI/AAAAAAAABu0/feK9LrMcSKU/photo.jpg?sz=128", "display_name": "Andreas Hsieh", "link": "https://stackoverflow.com/users/6297504/andreas-hsieh"}, "is_accepted": false, "score": 0, "last_activity_date": 1465427396, "last_edit_date": 1495542709, "creation_date": 1465427396, "answer_id": 37714411, "question_id": 37714202, "link": "https://stackoverflow.com/questions/37714202/using-regex-separators-with-read-csv-in-python/37714411#37714411", "title": "Using regex separators with read_csv() in python?", "body": "<p>Have you tried <code>read_table</code> instead? I've got this kind of error when I tried to use <code>read_csv</code> before and I solved the problem by using it. Please refer to this <a href=\"https://stackoverflow.com/questions/18039057/python-pandas-error-tokenizing-data\">post</a>, this might give you some ideas about how to solve the error. And maybe also try <code>sep=r\":{2}\"</code> as delimiter.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 2763524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b076d5ea1459585af7cde71b6e18d78b?s=128&d=identicon&r=PG&f=1", "display_name": "user2763524", "link": "https://stackoverflow.com/users/2763524/user2763524"}, "edited": false, "score": 0, "creation_date": 1465431983, "post_id": 37714999, "comment_id": 62903678, "body": "Just tried this, same error.. thanks for your help so far, much appreciated!"}, {"owner": {"reputation": 15, "user_id": 2763524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b076d5ea1459585af7cde71b6e18d78b?s=128&d=identicon&r=PG&f=1", "display_name": "user2763524", "link": "https://stackoverflow.com/users/2763524/user2763524"}, "edited": false, "score": 1, "creation_date": 1465657785, "post_id": 37714999, "comment_id": 62999163, "body": "Hello,  I was able to fix the problem by specifying:      index_col=[0,1,2,3], usecols=[0,1,2,3]  in read_csv. Using one or the other did not work as a standalone. Many thanks for your help, this was a bit of an obscure bug to figure out :)"}], "tags": [], "owner": {"reputation": 19255, "user_id": 428862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7041b76f657ac8e8d32a72f1b8b5b4bb?s=128&d=identicon&r=PG", "display_name": "Merlin", "link": "https://stackoverflow.com/users/428862/merlin"}, "is_accepted": true, "score": 0, "last_activity_date": 1465434393, "last_edit_date": 1465434393, "creation_date": 1465431501, "answer_id": 37714999, "question_id": 37714202, "link": "https://stackoverflow.com/questions/37714202/using-regex-separators-with-read-csv-in-python/37714999#37714999", "title": "Using regex separators with read_csv() in python?", "body": "<p>Start with this:</p>\n\n<pre><code>pd.read_csv(tweets_data_path, sep=\"::\", header = None, usecols = [0,1,2,3])\n</code></pre>\n\n<p>The above should bring in 4 columns, then you can figure out how many lines were dropped, and if the data makes sense. </p>\n\n<p>Use this pattern:</p>\n\n<pre><code>data[\"lang\"].unique()\n</code></pre>\n\n<p>Since, you have problem with data and do not where it is. You need to step back and use python 'csv reader'. This should get you started. </p>\n\n<pre><code>import csv\nreader = csv.reader(tweets_data_path)\ntweetList = []\nfor row in reader:\n    try:  \n        tweetList.append(  (row[0].split('::')) )\n    except BaseException, e :\n        print 'Error: ',str(e)\n\nprint tweetList\n\ntweetsDf =   pd.DataFrame(tweetList)\n\n\n\nprint tweetsDf\n                                   0  \\\n    0   Fri Apr 22 21:41:03 +0000 2016   \n    1   Fri Apr 22 21:41:07 +0000 2016   \n    2   Fri Apr 22 21:41:07 +0000 2016   \n    3   Fri Apr 22 21:41:08 +0000 2016   \n\n                                                       1                   2     3  \n0  RT @TalOfer: Barack Obama: Brexit would put UK...      United Kingdom    en  \n1  RT @JamieRoss7: It must be awful to strongly b...  The United Kingdom    en  \n2  Whether or not it rains on June 23rd will  hav...              Dublin  None  \n3  FINANCIAL TIMES FRONT PAGE: 'Obama warns Brexi...              Mardan  None  \n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 2763524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b076d5ea1459585af7cde71b6e18d78b?s=128&d=identicon&r=PG&f=1", "display_name": "user2763524", "link": "https://stackoverflow.com/users/2763524/user2763524"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 901, "favorite_count": 0, "accepted_answer_id": 37714999, "answer_count": 2, "score": 1, "last_activity_date": 1540483935, "creation_date": 1465426202, "last_edit_date": 1540483935, "question_id": 37714202, "link": "https://stackoverflow.com/questions/37714202/using-regex-separators-with-read-csv-in-python", "title": "Using regex separators with read_csv() in python?", "body": "<p>I have <em>a lot</em> of csv files formated as such:</p>\n\n<pre><code>date1::tweet1::location1::language1\n\ndate2::tweet2::location2::language2\n\ndate3::tweet3::location3::language3\n</code></pre>\n\n<p>and so on. Some files contain up to 200 000 tweets. I want to extract 4 fields and put them in a pandas dataframe, as well as count the number of tweets. Here's the code I'm using for now:</p>\n\n<pre><code>try:\n    data = pd.read_csv(tweets_data_path, sep=\"::\", header = None, engine='python')\n    data.columns = [\"timestamp\", \"tweet\", \"location\", \"lang\"]\n    print 'Number of tweets: ' + str(len(data))\n\nexcept BaseException, e :\n    print 'Error: ',str(e)\n</code></pre>\n\n<p>I get the following error thrown at me</p>\n\n<pre><code>Error: expected 4 fields in line 4581, saw 5\n</code></pre>\n\n<p>I tried setting error_bad_lines = False, manually deleting the lines that make the program bug, setting nrows to a lower number.. and still get those \"expected fields\" errors for random lines. Say I delete the bottom half of the file, I will get the same error but for line 1787. Which doesn't make sense to me as it was processed correctly before. Visually inspecting the csv files doesn't reveal abornmal patterns that suddenly appear in the buggy line either.</p>\n\n<p>The date fields and tweets contain colons, urls and so on so perhaps regex would make sense?</p>\n\n<p>Can someone help me figure out what I'm doing wrong? Many thanks in advance!</p>\n\n<p>Sample of the data as requested below:</p>\n\n<pre><code>Fri Apr 22 21:41:03 +0000 2016::RT @TalOfer: Barack Obama: Brexit would put UK back of the queue for trade talks [short url] #EuRef #StrongerIn::United Kingdom::en\n\nFri Apr 22 21:41:07 +0000 2016::RT @JamieRoss7: It must be awful to strongly believe in Brexit and be watching your campaigns make an absolute horse's arse of it.::The United Kingdom::en\n\nFri Apr 22 21:41:07 +0000 2016::Whether or not it rains on June 23rd will  have more influence on the vote than Obama's lunch with the Queen and LiGA with George. #brexit.::Dublin, Ireland::en\n\nFri Apr 22 21:41:08 +0000 2016::FINANCIAL TIMES FRONT PAGE: 'Obama warns Brexit vote would send UK to 'back of trade queue' #skypapers [short url]::Mardan, Pakistan::en\n</code></pre>\n"}, {"tags": ["python", "nltk", "stanford-nlp", "dependency-parsing"], "comments": [{"owner": {"reputation": 23, "user_id": 970155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94f6b66cef204e44c12520f8ce2119d6?s=128&d=identicon&r=PG&f=1", "display_name": "user970155", "link": "https://stackoverflow.com/users/970155/user970155"}, "edited": false, "score": 0, "creation_date": 1465428618, "post_id": 37714198, "comment_id": 62902683, "body": "result = parser.parse(&#39;seven leaf&#39;) print(result[0])"}, {"owner": {"reputation": 23, "user_id": 970155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94f6b66cef204e44c12520f8ce2119d6?s=128&d=identicon&r=PG&f=1", "display_name": "user970155", "link": "https://stackoverflow.com/users/970155/user970155"}, "edited": false, "score": 0, "creation_date": 1465428719, "post_id": 37714198, "comment_id": 62902716, "body": "the above returns TypeError: &#39;list_iterator&#39; object is not subscriptable"}, {"owner": {"reputation": 211, "user_id": 6427579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1901467458231b56e553575126ec842?s=128&d=identicon&r=PG&f=1", "display_name": "RainbowRevenge", "link": "https://stackoverflow.com/users/6427579/rainbowrevenge"}, "edited": false, "score": 0, "creation_date": 1465431234, "post_id": 37714198, "comment_id": 62903489, "body": "Since it says it&#39;s an iterator have you tried <code>print(result.next())</code> ? Weird because the result should be a defaultdict as in your question..."}], "answers": [{"tags": [], "owner": {"reputation": 3096, "user_id": 3808276, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXVzR.jpg?s=128&g=1", "display_name": "Abu Shoeb", "link": "https://stackoverflow.com/users/3808276/abu-shoeb"}, "is_accepted": false, "score": 0, "last_activity_date": 1611680168, "creation_date": 1611680168, "answer_id": 65905681, "question_id": 37714198, "link": "https://stackoverflow.com/questions/37714198/iterate-dependency-graph-items-generated-by-stanford-dependency-parser/65905681#65905681", "title": "Iterate Dependency Graph items generated by Stanford Dependency Parser", "body": "<p>The output of the dependency graph is an object of <code>DependencyGraph</code> class. If you run</p>\n<pre><code>dir(result) # assuming result contains the parser output\n</code></pre>\n<p>You would be able to see all the properties and methods of the <code>result</code> object.</p>\n<pre><code>['__class__',\n '__delattr__',\n '__dict__',\n '__dir__',\n '__doc__',\n '__eq__',\n '__format__',\n '__ge__',\n '__getattribute__',\n '__gt__',\n '__hash__',\n '__init__',\n '__init_subclass__',\n '__le__',\n '__lt__',\n '__module__',\n '__ne__',\n '__new__',\n '__reduce__',\n '__reduce_ex__',\n '__repr__',\n '__setattr__',\n '__sizeof__',\n '__str__',\n '__subclasshook__',\n '__unicode__',\n '__weakref__',\n '_hd',\n '_parse',\n '_rel',\n '_repr_svg_',\n '_tree',\n '_word',\n 'add_arc',\n 'add_node',\n 'connect_graph',\n 'contains_address',\n 'contains_cycle',\n 'get_by_address',\n 'get_cycle_path',\n 'left_children',\n 'load',\n 'nodes',\n 'nx_graph',\n 'redirect_arcs',\n 'remove_by_address',\n 'right_children',\n 'root',\n 'to_conll',\n 'to_dot',\n 'top_relation_label',\n 'tree',\n 'triples',\n 'unicode_repr']\n</code></pre>\n<p>Then you can iterate over all nodes to access your desired items.</p>\n<pre><code>for i in range(len(result.nodes)):\n    print(f&quot;Word: {result.nodes[i]['word']}\\tLemma: {result.nodes[i]['lemma']}\\tTag: {result.nodes[i]['tag']}\\tHead: {result.nodes[i]['head']}\\tRel: {result.nodes[i]['rel']}&quot;)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 970155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94f6b66cef204e44c12520f8ce2119d6?s=128&d=identicon&r=PG&f=1", "display_name": "user970155", "link": "https://stackoverflow.com/users/970155/user970155"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1611723905, "creation_date": 1465426191, "last_edit_date": 1611723905, "question_id": 37714198, "link": "https://stackoverflow.com/questions/37714198/iterate-dependency-graph-items-generated-by-stanford-dependency-parser", "title": "Iterate Dependency Graph items generated by Stanford Dependency Parser", "body": "<p>I am struggling to go over the results of Stanford Dependency Parser. It prints the information successfully but I can't access it. This is what I see when I print the results.</p>\n<pre><code>defaultdict(&lt;function DependencyGraph.__init__.&lt;locals&gt;.&lt;lambda&gt; at 0x075078A0&gt;,\n                        {0: {'address': 0,\n                             'ctag': 'TOP',\n                             'deps': defaultdict(&lt;class 'list'&gt;, {'root': [2]}),\n                             'feats': None,\n                             'head': None,\n                             'lemma': None,\n                             'rel': None,\n                             'tag': 'TOP',\n                             'word': None},\n                         1: {'address': 1,\n                             'ctag': 'CD',\n                             'deps': defaultdict(&lt;class 'list'&gt;, {}),\n                             'feats': '_',\n                             'head': 2,\n                             'lemma': '_',\n                             'rel': 'nummod',\n                             'tag': 'CD',\n                             'word': 'seven'},\n                    \n</code></pre>\n<p>How can I acess these items?</p>\n"}, {"tags": ["python", "arrays", "numpy", "tensorflow"], "answers": [{"tags": [], "owner": {"reputation": 53055, "user_id": 419116, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/RmTuo.jpg?s=128&g=1", "display_name": "Yaroslav Bulatov", "link": "https://stackoverflow.com/users/419116/yaroslav-bulatov"}, "is_accepted": true, "score": 1, "last_activity_date": 1465490398, "last_edit_date": 1495535641, "creation_date": 1465490398, "answer_id": 37731733, "question_id": 37714118, "link": "https://stackoverflow.com/questions/37714118/tensorflow-gather-across-multiple-dimentions/37731733#37731733", "title": "tensorflow gather across multiple dimentions", "body": "<p>There's an update on <a href=\"https://github.com/tensorflow/tensorflow/issues/206\" rel=\"nofollow noreferrer\">#206</a> that @ebrevdo is working on generalizing slicing.</p>\n\n<p>Meanwhile, you could flatten your array, construct linear indices for the elements you want, use gather, then reshape back, like was done in <a href=\"https://stackoverflow.com/questions/36088277/how-to-select-rows-from-a-3-d-tensor-in-tensorflow/36088778#36088778\">another answer</a> by mrry. That's probably not much worse in efficiency than a native implementation</p>\n"}], "owner": {"reputation": 5991, "user_id": 232371, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fb2a01bdde27923d196336fe006c8764?s=128&d=identicon&r=PG", "display_name": "Ben Usman", "link": "https://stackoverflow.com/users/232371/ben-usman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 37731733, "answer_count": 1, "score": 0, "last_activity_date": 1465490398, "creation_date": 1465425720, "question_id": 37714118, "link": "https://stackoverflow.com/questions/37714118/tensorflow-gather-across-multiple-dimentions", "title": "tensorflow gather across multiple dimentions", "body": "<p><code>gather(params, indices)</code> does the following</p>\n\n<pre><code>output[i, ..., j, :, ... :] = params[indices[i, ..., j], :, ..., :]\n</code></pre>\n\n<p>so if you have 4-dimensional params and 2-dimensional indices, you end up having 5-dimensional array as a result</p>\n\n<p>the question is how to do</p>\n\n<pre><code>output[i, ..., j, :, ... :] = params[indices[i, :], ..., indices[j, :], :, ..., :]\n</code></pre>\n\n<p>so that it acts as <code>numpy's</code></p>\n\n<p><code>output = params[indices[0], indices[1], .. , :]</code></p>\n\n<p>(the #206 ticket on github is regarding different issue: it is about numpy-like api, not gathering in general)</p>\n\n<p>one possible way is to use <code>gather_nd</code>, but (as far as I understand) if we want to <code>gather_nd</code> over not all dimensions, we still have to create indices for them, e.g. if we have 10-dimensional array A and we want to index first two dimensions with 2-dimensional array B, like A[B[0], B[1], :] our indices matrix would have to have 11 columns (with 8 redundant).</p>\n\n<pre><code>--- old indices ----       new index\n0 0 &lt;all rows of length 8&gt; 0\n1 1 &lt;all rows of length 8&gt; 1\n...\n</code></pre>\n"}, {"tags": ["python", "html", "web-scraping"], "answers": [{"comments": [{"owner": {"reputation": 165, "user_id": 5744310, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ad1eae7c8d753b8d5d23d7b11937d0d8?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/5744310/pavel"}, "edited": false, "score": 0, "creation_date": 1465476025, "post_id": 37714463, "comment_id": 62923756, "body": "Hi, It works fine. One question - why are you loading pprint? I`m not familiar with this module and it seems unused here."}, {"owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "reply_to_user": {"reputation": 165, "user_id": 5744310, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ad1eae7c8d753b8d5d23d7b11937d0d8?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/5744310/pavel"}, "edited": false, "score": 0, "creation_date": 1465476106, "post_id": 37714463, "comment_id": 62923811, "body": "Oh you&#39;re right, I use it in the first answer to display the list nicely, it&#39;s unused in the version that converts the html to data frame"}], "tags": [], "owner": {"reputation": 4096, "user_id": 2056979, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pg0MQ.jpg?s=128&g=1", "display_name": "Keatinge", "link": "https://stackoverflow.com/users/2056979/keatinge"}, "is_accepted": false, "score": 1, "last_activity_date": 1465428099, "last_edit_date": 1465428099, "creation_date": 1465427752, "answer_id": 37714463, "question_id": 37714116, "link": "https://stackoverflow.com/questions/37714116/extract-columns-from-html-using-python-beautifulsoup/37714463#37714463", "title": "Extract Columns from html using Python (Beautifulsoup)", "body": "<p>Here's a way to convert the html table into a nested list</p>\n\n<p>The solution is to find the specific table, then loop through each tr in the table, creating a sublist of the text of all the items inside that tr. The code to do this is a nested list comprehension.</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nfrom pprint import pprint\n\nurl='http://www.investing.com/currencies/usd-brl-historical-data'\nr = requests.get(url)\nsoup = BeautifulSoup(r.content,'html.parser')\ntable = soup.find(\"table\", {\"id\" : \"curr_table\"})\n#first row is empty\ntableRows = [[td.text for td in row.find_all(\"td\")] for row in table.find_all(\"tr\")[1:]]\npprint(tableRows)\n</code></pre>\n\n<p>This gets all the data from the table</p>\n\n<pre><code>[['Jun 08, 2016', '3.3614', '3.4411', '3.4465', '3.3584', '-2.34%'],\n ['Jun 07, 2016', '3.4421', '3.4885', '3.5141', '3.4401', '-1.36%'],\n ['Jun 06, 2016', '3.4896', '3.5265', '3.5295', '3.4840', '-1.09%'],\n ['Jun 05, 2016', '3.5280', '3.5280', '3.5280', '3.5280', '0.11%'],\n ['Jun 03, 2016', '3.5240', '3.5910', '3.5947', '3.5212', '-1.91%'],\n ['Jun 02, 2016', '3.5926', '3.6005', '3.6157', '3.5765', '-0.22%'],\n ['Jun 01, 2016', '3.6007', '3.6080', '3.6363', '3.5755', '-0.29%'],\n ['May 31, 2016', '3.6111', '3.5700', '3.6383', '3.5534', '1.11%'],\n ['May 30, 2016', '3.5713', '3.6110', '3.6167', '3.5675', '-1.11%'],\n ['May 27, 2016', '3.6115', '3.5824', '3.6303', '3.5792', '0.81%'],\n ['May 26, 2016', '3.5825', '3.5826', '3.5857', '3.5757', '-0.03%'],\n ['May 25, 2016', '3.5836', '3.5702', '3.6218', '3.5511', '0.34%'],\n ['May 24, 2016', '3.5713', '3.5717', '3.5903', '3.5417', '-0.04%'],\n ['May 23, 2016', '3.5728', '3.5195', '3.5894', '3.5121', '1.49%'],\n ['May 20, 2016', '3.5202', '3.5633', '3.5663', '3.5154', '-1.24%'],\n ['May 19, 2016', '3.5644', '3.5668', '3.6197', '3.5503', '-0.11%'],\n ['May 18, 2016', '3.5683', '3.4877', '3.5703', '3.4854', '2.28%'],\n ['May 17, 2016', '3.4888', '3.4990', '3.5300', '3.4812', '-0.32%'],\n ['May 16, 2016', '3.5001', '3.5309', '3.5366', '3.4944', '-0.96%'],\n ['May 13, 2016', '3.5340', '3.4845', '3.5345', '3.4630', '1.39%'],\n ['May 12, 2016', '3.4855', '3.4514', '3.5068', '3.4346', '0.95%'],\n ['May 11, 2016', '3.4528', '3.4755', '3.4835', '3.4389', '-0.66%'],\n ['May 10, 2016', '3.4758', '3.5155', '3.5173', '3.4623', '-1.15%'],\n ['May 09, 2016', '3.5164', '3.5010', '3.6766', '3.4906', '0.40%']]\n</code></pre>\n\n<p>If you want to convert it to a pandas dataframe you just need to also grab the table headings and add them </p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nimport pandas\nfrom pprint import pprint\n\nurl='http://www.investing.com/currencies/usd-brl-historical-data'\nr = requests.get(url)\nsoup = BeautifulSoup(r.content,'html.parser')\ntable = soup.find(\"table\", {\"id\" : \"curr_table\"})\ntableRows = [[td.text for td in row.find_all(\"td\")] for row in table.find_all(\"tr\")[1:]]\n\n#get headers for dataframe\ntableHeaders = [th.text for th in table.find_all(\"th\")]\n\n#build df from tableRows and headers\ndf = pandas.DataFrame(tableRows, columns=tableHeaders)\n\nprint(df)\n</code></pre>\n\n<p>Then you'll get a dataframe that looks like this:</p>\n\n<pre><code>            Date   Price    Open    High     Low Change %\n0   Jun 08, 2016  3.3596  3.4411  3.4465  3.3584   -2.40%\n1   Jun 07, 2016  3.4421  3.4885  3.5141  3.4401   -1.36%\n2   Jun 06, 2016  3.4896  3.5265  3.5295  3.4840   -1.09%\n3   Jun 05, 2016  3.5280  3.5280  3.5280  3.5280    0.11%\n4   Jun 03, 2016  3.5240  3.5910  3.5947  3.5212   -1.91%\n5   Jun 02, 2016  3.5926  3.6005  3.6157  3.5765   -0.22%\n6   Jun 01, 2016  3.6007  3.6080  3.6363  3.5755   -0.29%\n7   May 31, 2016  3.6111  3.5700  3.6383  3.5534    1.11%\n8   May 30, 2016  3.5713  3.6110  3.6167  3.5675   -1.11%\n9   May 27, 2016  3.6115  3.5824  3.6303  3.5792    0.81%\n10  May 26, 2016  3.5825  3.5826  3.5857  3.5757   -0.03%\n11  May 25, 2016  3.5836  3.5702  3.6218  3.5511    0.34%\n12  May 24, 2016  3.5713  3.5717  3.5903  3.5417   -0.04%\n13  May 23, 2016  3.5728  3.5195  3.5894  3.5121    1.49%\n14  May 20, 2016  3.5202  3.5633  3.5663  3.5154   -1.24%\n15  May 19, 2016  3.5644  3.5668  3.6197  3.5503   -0.11%\n16  May 18, 2016  3.5683  3.4877  3.5703  3.4854    2.28%\n17  May 17, 2016  3.4888  3.4990  3.5300  3.4812   -0.32%\n18  May 16, 2016  3.5001  3.5309  3.5366  3.4944   -0.96%\n19  May 13, 2016  3.5340  3.4845  3.5345  3.4630    1.39%\n20  May 12, 2016  3.4855  3.4514  3.5068  3.4346    0.95%\n21  May 11, 2016  3.4528  3.4755  3.4835  3.4389   -0.66%\n22  May 10, 2016  3.4758  3.5155  3.5173  3.4623   -1.15%\n23  May 09, 2016  3.5164  3.5010  3.6766  3.4906    0.40%\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 165, "user_id": 5744310, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ad1eae7c8d753b8d5d23d7b11937d0d8?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/5744310/pavel"}, "edited": false, "score": 0, "creation_date": 1465474396, "post_id": 37714661, "comment_id": 62922480, "body": "Thanks,the code looks really compact but I&#39;m getting the following error message - &quot;ImportError: lxml not found, please install it&quot; When I pip install lxml I get &quot;Requiremnt already up-to-date&quot;"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 165, "user_id": 5744310, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ad1eae7c8d753b8d5d23d7b11937d0d8?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/5744310/pavel"}, "edited": false, "score": 0, "creation_date": 1465494792, "post_id": 37714661, "comment_id": 62937172, "body": "You are using python2 or 3?"}, {"owner": {"reputation": 165, "user_id": 5744310, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ad1eae7c8d753b8d5d23d7b11937d0d8?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/5744310/pavel"}, "edited": false, "score": 0, "creation_date": 1465505743, "post_id": 37714661, "comment_id": 62943234, "body": "python 3. I`m using Anaconda (don&#39;t know if it matters).  I followed your 1st link and used it to extract a different date range i will try to combine those routines to extract data as dataframe."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 165, "user_id": 5744310, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ad1eae7c8d753b8d5d23d7b11937d0d8?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/5744310/pavel"}, "edited": false, "score": 0, "creation_date": 1465512551, "post_id": 37714661, "comment_id": 62945818, "body": "Then use pip3 install lxml, also you can pass <code>flavor=&quot;bs4&quot;</code>"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 165, "user_id": 5744310, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ad1eae7c8d753b8d5d23d7b11937d0d8?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/5744310/pavel"}, "edited": false, "score": 1, "creation_date": 1465514201, "post_id": 37714661, "comment_id": 62946248, "body": "No prob, you can specify bs4, lxml, html5lib or xml"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 1, "last_activity_date": 1465429364, "last_edit_date": 1495535340, "creation_date": 1465429044, "answer_id": 37714661, "question_id": 37714116, "link": "https://stackoverflow.com/questions/37714116/extract-columns-from-html-using-python-beautifulsoup/37714661#37714661", "title": "Extract Columns from html using Python (Beautifulsoup)", "body": "<p>How to parse the table from that site I have already answered <a href=\"https://stackoverflow.com/a/37668294/2141635\">here</a> but since you want a <em>DataFrame</em>, just use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.read_html.html\" rel=\"nofollow noreferrer\">pandas.read_html</a></p>\n\n<pre><code>url = 'http://www.investing.com/currencies/usd-brl-historical-data'\nr = requests.get(url)\n\n\nimport pandas as pd\n\ndf = pd.read_html(r.content,attrs = {'id': 'curr_table'})[0]\n</code></pre>\n\n<p>Which will give you:</p>\n\n<pre><code>            Date   Price    Open    High     Low Change %\n0   Jun 08, 2016  3.3609  3.4411  3.4465  3.3584   -2.36%\n1   Jun 07, 2016  3.4421  3.4885  3.5141  3.4401   -1.36%\n2   Jun 06, 2016  3.4896  3.5265  3.5295  3.4840   -1.09%\n3   Jun 05, 2016  3.5280  3.5280  3.5280  3.5280    0.11%\n4   Jun 03, 2016  3.5240  3.5910  3.5947  3.5212   -1.91%\n5   Jun 02, 2016  3.5926  3.6005  3.6157  3.5765   -0.22%\n6   Jun 01, 2016  3.6007  3.6080  3.6363  3.5755   -0.29%\n7   May 31, 2016  3.6111  3.5700  3.6383  3.5534    1.11%\n8   May 30, 2016  3.5713  3.6110  3.6167  3.5675   -1.11%\n9   May 27, 2016  3.6115  3.5824  3.6303  3.5792    0.81%\n10  May 26, 2016  3.5825  3.5826  3.5857  3.5757   -0.03%\n11  May 25, 2016  3.5836  3.5702  3.6218  3.5511    0.34%\n12  May 24, 2016  3.5713  3.5717  3.5903  3.5417   -0.04%\n13  May 23, 2016  3.5728  3.5195  3.5894  3.5121    1.49%\n14  May 20, 2016  3.5202  3.5633  3.5663  3.5154   -1.24%\n15  May 19, 2016  3.5644  3.5668  3.6197  3.5503   -0.11%\n16  May 18, 2016  3.5683  3.4877  3.5703  3.4854    2.28%\n17  May 17, 2016  3.4888  3.4990  3.5300  3.4812   -0.32%\n18  May 16, 2016  3.5001  3.5309  3.5366  3.4944   -0.96%\n19  May 13, 2016  3.5340  3.4845  3.5345  3.4630    1.39%\n20  May 12, 2016  3.4855  3.4514  3.5068  3.4346    0.95%\n21  May 11, 2016  3.4528  3.4755  3.4835  3.4389   -0.66%\n22  May 10, 2016  3.4758  3.5155  3.5173  3.4623   -1.15%\n23  May 09, 2016  3.5164  3.5010  3.6766  3.4906    0.40%\n</code></pre>\n\n<p>You can generally pass the url directly but we get a <em>403 error</em> for this particular site using <em>urllib2</em> which is the lib used by <em>read_html</em> so we need to use requests to get that html.</p>\n"}], "owner": {"reputation": 165, "user_id": 5744310, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/ad1eae7c8d753b8d5d23d7b11937d0d8?s=128&d=identicon&r=PG&f=1", "display_name": "Pavel", "link": "https://stackoverflow.com/users/5744310/pavel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3117, "favorite_count": 0, "accepted_answer_id": 37714661, "answer_count": 2, "score": 1, "last_activity_date": 1543482697, "creation_date": 1465425702, "last_edit_date": 1465427523, "question_id": 37714116, "link": "https://stackoverflow.com/questions/37714116/extract-columns-from-html-using-python-beautifulsoup", "title": "Extract Columns from html using Python (Beautifulsoup)", "body": "<p>I need to extract the info from this page -<a href=\"http://www.investing.com/currencies/usd-brl-historical-data\" rel=\"nofollow\">http://www.investing.com/currencies/usd-brl-historical-data</a>. I need Date, Price, Open, High, Low,Change %.\nI`m new to Python so I got stuck at this step:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\nfrom datetime import datetime\n\nurl='http://www.investing.com/currencies/usd-brl-historical-data'\nr = requests.get(url)\n\nsoup=BeautifulSoup(r.content,'lxml')\n\ng_data = soup.find_all('table', {'class':'genTbl closedTbl historicalTbl'})\n\nd=[]\n\nfor item in g_data:\nTable_Values = item.find_all('tr')\nN=len(Table_Values)-1\n\nfor n in range(N):\n    k = (item.find_all('td', {'class':'first left bold noWrap'})[n].text)\n\n    print(item.find_all('td', {'class':'first left bold noWrap'})[n].text)\n</code></pre>\n\n<p>Here I have several problems:</p>\n\n<p>Column for Price can de tagged as  or . <strong>How can I specify that I want items tagged with class = 'redFont' or/and 'greenfont'?</strong>. Also Change % can also have class redFont and greenFont. Other columns are tagged by . <strong>How can I extract them?</strong></p>\n\n<p><strong>Is there a way to extract columns from table?</strong></p>\n\n<p>Ideally I would like to have a dateframe with Columns Date, Price, Open, High, Low,Change %.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "ibm-cloud-infrastructure"], "answers": [{"comments": [{"owner": {"reputation": 295, "user_id": 2076625, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/49d7fecaf6a950092ff171bdf87811ce?s=128&d=identicon&r=PG", "display_name": "kyl", "link": "https://stackoverflow.com/users/2076625/kyl"}, "edited": false, "score": 0, "creation_date": 1465936973, "post_id": 37730431, "comment_id": 63107231, "body": "ah I see.  How do I specify the &quot;expires at&quot; if I want the file removed from object storage and not just have the cache expire?"}, {"owner": {"reputation": 4368, "user_id": 5165832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7093683da5ea0a5d497732d01124de38?s=128&d=identicon&r=PG&f=1", "display_name": "Nelson Raul Cabero Mendoza", "link": "https://stackoverflow.com/users/5165832/nelson-raul-cabero-mendoza"}, "reply_to_user": {"reputation": 295, "user_id": 2076625, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/49d7fecaf6a950092ff171bdf87811ce?s=128&d=identicon&r=PG", "display_name": "kyl", "link": "https://stackoverflow.com/users/2076625/kyl"}, "edited": false, "score": 0, "creation_date": 1465994875, "post_id": 37730431, "comment_id": 63132927, "body": "I think that functionality does not exist, I cannot see anything about that in OpenStack <a href=\"http://developer.openstack.org/api-ref-objectstorage-v1.html\" rel=\"nofollow noreferrer\">developer.openstack.org/api-ref-objectstorage-v1.html</a> , softlayer object storage is based in open stack if you know how to do it in open stack it should work as well in softlayer"}], "tags": [], "owner": {"reputation": 4368, "user_id": 5165832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7093683da5ea0a5d497732d01124de38?s=128&d=identicon&r=PG&f=1", "display_name": "Nelson Raul Cabero Mendoza", "link": "https://stackoverflow.com/users/5165832/nelson-raul-cabero-mendoza"}, "is_accepted": false, "score": 0, "last_activity_date": 1465486606, "creation_date": 1465486606, "answer_id": 37730431, "question_id": 37714040, "link": "https://stackoverflow.com/questions/37714040/softlayer-object-storage-python-api-time-to-live/37730431#37730431", "title": "Softlayer Object Storage Python API Time To Live", "body": "<p>You need to make sure that the \"ttl\" is available in the headers, The \"TTL\" header is available when your container has enabled CDN.</p>\n\n<p>so to verify that the ttl header exist you can use this code line:</p>\n\n<pre><code>sl_storage['myContainserName']['MyFileName'].headers\n</code></pre>\n\n<p>then you can update the tll using this line code:</p>\n\n<pre><code>sl_storage['myContainserName']['MyFileName'].update({'x-cdn-ttl':'3600'})\n</code></pre>\n\n<p>in case the ttl values does not exist and you have the cdn enabled try to create the header using this line code:</p>\n\n<pre><code>  sl_storage['myContainserName']['MyFileName'].create({'x-cdn-ttl':'3600'})\n</code></pre>\n\n<p>Regards</p>\n"}, {"tags": [], "owner": {"reputation": 4368, "user_id": 5165832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7093683da5ea0a5d497732d01124de38?s=128&d=identicon&r=PG&f=1", "display_name": "Nelson Raul Cabero Mendoza", "link": "https://stackoverflow.com/users/5165832/nelson-raul-cabero-mendoza"}, "is_accepted": false, "score": 0, "last_activity_date": 1468852697, "creation_date": 1468852697, "answer_id": 38439525, "question_id": 37714040, "link": "https://stackoverflow.com/questions/37714040/softlayer-object-storage-python-api-time-to-live/38439525#38439525", "title": "Softlayer Object Storage Python API Time To Live", "body": "<p>You need to set up the header \"X-Delete-At: 1417341600\" where 1417341600 is a Unix timestamp see more information here <a href=\"http://docs.openstack.org/developer/swift/overview_expiring_objects.html\" rel=\"nofollow\">http://docs.openstack.org/developer/swift/overview_expiring_objects.html</a></p>\n\n<p>using the Python client you can use the update method:\n<a href=\"https://github.com/softlayer/softlayer-object-storage-python/blob/master/object_storage/storage_object.py#L210-L216\" rel=\"nofollow\">https://github.com/softlayer/softlayer-object-storage-python/blob/master/object_storage/storage_object.py#L210-L216</a></p>\n\n<pre><code>sl_storage['myContainserName']['MyFileName'].update({'X-Delete-At':1417341600})\n</code></pre>\n\n<p>Regards</p>\n"}], "owner": {"reputation": 295, "user_id": 2076625, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/49d7fecaf6a950092ff171bdf87811ce?s=128&d=identicon&r=PG", "display_name": "kyl", "link": "https://stackoverflow.com/users/2076625/kyl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1468852697, "creation_date": 1465425211, "question_id": 37714040, "link": "https://stackoverflow.com/questions/37714040/softlayer-object-storage-python-api-time-to-live", "title": "Softlayer Object Storage Python API Time To Live", "body": "<p>How do I set time to live for a file on object storage?</p>\n\n<p>Looking at the code in <a href=\"https://github.com/softlayer/softlayer-object-storage-python/blob/master/object_storage/storage_object.py\" rel=\"nofollow\">https://github.com/softlayer/softlayer-object-storage-python/blob/master/object_storage/storage_object.py</a> it takes in (self, data, check_md5) with no TTL option.</p>\n\n<pre><code>sl_storage = object_storage.get_client(\n    username = environment['slos_username'],\n    password = environment['api_key'],\n    auth_url = environment['auth_url']\n)\n\n# get container \nsl_container = sl_storage.get_container(environment['object_container'])\n# create \"pointer\" to cointainer file fabfile.zip\n\nsl_file = sl_container[filename]\nmyzip = open(foldername + filename, 'rb')\nsl_file.create()\n\nsl_file.send(myzip, TIME_TO_LIVE_PARAM=100)\n</code></pre>\n\n<p>I also tried according to <a href=\"https://github.com/softlayer/softlayer-object-storage-python/blob/master/object_storage/container.py\" rel=\"nofollow\">https://github.com/softlayer/softlayer-object-storage-python/blob/master/object_storage/container.py</a></p>\n\n<pre><code>sl_file['ttl'] = timetolive\n</code></pre>\n\n<p>But it doesn't work.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "loops", "infinite", "sudoku"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1465425502, "post_id": 37713979, "comment_id": 62901724, "body": "<code>if board[row][column]==9: board[row][column] = 0</code> Then you go back to the beginning of the row and try the same thing again to then reset the same tile and repeat..."}, {"owner": {"reputation": 419, "user_id": 4802286, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3761f653752047db610b85c78c5169ff?s=128&d=identicon&r=PG&f=1", "display_name": "conjenks", "link": "https://stackoverflow.com/users/4802286/conjenks"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1465426183, "post_id": 37713979, "comment_id": 62901931, "body": "@TadhgMcDonald-Jensen are you referring to that snippet of code in the <code>solve</code> function or in <code>add1</code>?"}, {"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1465426324, "post_id": 37713979, "comment_id": 62901985, "body": "the relevant section is identical so both."}], "answers": [{"tags": [], "owner": {"reputation": 853, "user_id": 4421692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1ac72ff7addc80329a7641a65c4e919?s=128&d=identicon&r=PG&f=1", "display_name": "Samer Ayoub", "link": "https://stackoverflow.com/users/4421692/samer-ayoub"}, "is_accepted": false, "score": 0, "last_activity_date": 1465426590, "creation_date": 1465426590, "answer_id": 37714263, "question_id": 37713979, "link": "https://stackoverflow.com/questions/37713979/python-sudoku-solver-stuck-in-infinite-loop-given-certain-values/37714263#37714263", "title": "Python - Sudoku Solver stuck in infinite loop given certain values", "body": "<p>I think the last continue need to be indented more inside</p>\n"}], "owner": {"reputation": 419, "user_id": 4802286, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3761f653752047db610b85c78c5169ff?s=128&d=identicon&r=PG&f=1", "display_name": "conjenks", "link": "https://stackoverflow.com/users/4802286/conjenks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1465426590, "creation_date": 1465424818, "question_id": 37713979, "link": "https://stackoverflow.com/questions/37713979/python-sudoku-solver-stuck-in-infinite-loop-given-certain-values", "title": "Python - Sudoku Solver stuck in infinite loop given certain values", "body": "<p>here is the code for my sudoku solver. At the end, I put certain values in certain squares. The solver works when I include all values except the last one. When I include the last (commented out) value, the solver enters an infinite loop. Is anyone able to see why this is?</p>\n\n<pre><code>class Cell:\n    def __init__(self, value, isPermanent):\n        self.value = 0\n        self.isPermanent = False\n\n\ndef solve(board):  # solves the board\n    if valid(board) is False:\n        print(\"This board is unsolvable.\")\n        return\n    row = 0  # begin in the first cell in the first row\n    column = 0\n    while row != 9:  # while there are still empty spaces in the 9 rows,\n        printBoard(board)\n        print(), print()\n        if row &lt;= 8 and column &lt;= 8:\n            row, column = add1(board, row, column)  # add 1 to the current cell\n        if valid(board) is True:  # if the board is valid,\n            if column == 8:  # if in the last cell of a row,\n                row += 1  # move up one row, and begin in the first cell\n                column = 0\n            else:  # otherwise, move on to the next cell\n                column += 1\n            continue  # restart\n        if valid(board) is False:  # if the board is invalid,\n            if board[row][column].value == 9:  # if the value of the current cell is equal to 9,\n                board[row][column].value = 0  # set it equal to 0\n                if column == 0:  # if in the first cell of a row,\n                    row -= 1  # go back a row, and into the last cell\n                    column = 8\n                else:  # otherwise, move back to the previous cell\n                    column -= 1\n            continue  # restart\n\n\ndef add1(board, row, column):  # increments each cell\n    while row != 9:\n        if board[row][column].isPermanent:\n            if column == 8:\n                row += 1\n                column = 0\n            else:\n                column += 1\n            continue\n        if board[row][column].value == 9:  # if the value of the cell is equal to 9,\n            board[row][column].value = 0  # set it equal to 0\n            if column == 0:  # if in the first cell of a row,\n                row -= 1  # go back a row, to the last cell\n                column = 8\n            else:  # if not in the first cell,\n                column -= 1  # go to the previous cell\n        board[row][column].value += 1  # add 1 to the current cell\n        return row, column  # return the new coordinate of the current cell\n    return row, column\n\n\ndef valid(board):\n    for i in range(1, 10):\n        if checkRowsForDuplicate(board, i) is False:\n            return False\n        if checkColumnsForDuplicate(board, i) is False:\n            return False\n        if checkZonesForDuplicate(board, i) is False:\n            return False\n    return True\n\n\ndef checkRowsForDuplicate(board, x):\n    for row in board:\n        line = []\n        for cell in row:\n            line.append(cell.value)\n        if line.count(x) &gt; 1:\n            return False\n\n\ndef checkColumnsForDuplicate(board, x):\n    for i in range(0, 9):\n        column = []\n        for row in board:\n            column.append(row[i].value)\n        if column.count(x) &gt; 1:\n            return False\n\n\ndef checkZonesForDuplicate(board, x):\n    y = [0, 3, 6]\n    z = [3, 6, 9]\n    for i in range(3):\n        for j in range(3):\n            if checkSingleZone(board, x, y[i], z[i], y[j], z[j]) is False:\n                return False\n    return True\n\n\ndef checkSingleZone(board, x, rowStart, rowEnd, columnStart, columnEnd):\n    zoneValues = []\n    for row in board[rowStart:rowEnd]:\n        for column in row[columnStart:columnEnd]:\n            zoneValues.append(column.value)\n    if zoneValues.count(x) &gt; 1:\n        return False\n\n\ndef printBoard(board):\n    for row in board:\n        line = []\n        for cell in row:\n            line.append(cell.value)\n        print(line)\n\n\ndef initializeBoard():\n    board = [[], [], [], [], [], [], [], [], []]\n    for row in board:\n        for i in range(0, 9):\n            row.append(Cell(0, False))\n    return board\n\n\nboard = initializeBoard()\n\nboard[0][7].value = 2\nboard[0][7].isPermanent = True\n\nboard[2][1].value = 9\nboard[2][1].isPermanent = True\n\nboard[2][2].value = 8\nboard[2][2].isPermanent = True\n\nboard[4][4].value = 8\nboard[4][4].isPermanent = True\n\nboard[7][1].value = 5\nboard[7][1].isPermanent = True\n\nboard[8][8].value = 3\nboard[8][8].isPermanent = True\n\n# before this value is entered, the board can be solved, \n# but trying to solve it with this value included results in an infinite loop\n# board[7][4].value = 7\n# board[7][4].isPermanent = True\n\n\nsolve(board)\n</code></pre>\n"}, {"tags": ["python", "scikit-learn"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 6442727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23f5ad729b1d61672e493f752951313?s=128&d=identicon&r=PG&f=1", "display_name": "kokoma", "link": "https://stackoverflow.com/users/6442727/kokoma"}, "edited": false, "score": 0, "creation_date": 1465494634, "post_id": 37723226, "comment_id": 62937108, "body": "If different models return different score metrics, then how can we use it to do model selection?"}, {"owner": {"reputation": 33681, "user_id": 1330293, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/76742a2b36b2e174181679118274e2e7?s=128&d=identicon&r=PG", "display_name": "elyase", "link": "https://stackoverflow.com/users/1330293/elyase"}, "reply_to_user": {"reputation": 61, "user_id": 6442727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23f5ad729b1d61672e493f752951313?s=128&d=identicon&r=PG&f=1", "display_name": "kokoma", "link": "https://stackoverflow.com/users/6442727/kokoma"}, "edited": false, "score": 0, "creation_date": 1465655775, "post_id": 37723226, "comment_id": 62998464, "body": "all models within a family will use the same metric so there is no inconsistency. For example if you use RandomForestClassifier the <code>.score()</code> method will return the mean accuracy. With <code>cross_val_score</code> you are comparing one RandomForestClassifier model with some hyperparameters to another with different hyperparameters and selecting the best."}], "tags": [], "owner": {"reputation": 33681, "user_id": 1330293, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/76742a2b36b2e174181679118274e2e7?s=128&d=identicon&r=PG", "display_name": "elyase", "link": "https://stackoverflow.com/users/1330293/elyase"}, "is_accepted": false, "score": 5, "last_activity_date": 1465467658, "creation_date": 1465467658, "answer_id": 37723226, "question_id": 37713953, "link": "https://stackoverflow.com/questions/37713953/what-kind-of-scores-are-returned-by-cross-validation-cross-val-score/37723226#37723226", "title": "What kind of scores are returned by cross_validation.cross_val_score?", "body": "<p><code>cross_val_score</code> calls the <code>.score()</code> method of the estimator you pass in and what that returns varies depending on the estimator. You have to look into the documentation for each estimator to find out what the corresponding <code>.score()</code> method returns. You can override this default behaviour with the <code>scoring</code> parameter. This is documented <a href=\"http://scikit-learn.org/stable/modules/cross_validation.html#computing-cross-validated-metrics\" rel=\"noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 46, "user_id": 7034760, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4Uli0suMykA/AAAAAAAAAAI/AAAAAAAAAAA/D7Mg3CvDe2Y/photo.jpg?sz=128", "display_name": "Soumendra Bagh", "link": "https://stackoverflow.com/users/7034760/soumendra-bagh"}, "is_accepted": false, "score": 1, "last_activity_date": 1575633450, "creation_date": 1575633450, "answer_id": 59212709, "question_id": 37713953, "link": "https://stackoverflow.com/questions/37713953/what-kind-of-scores-are-returned-by-cross-validation-cross-val-score/59212709#59212709", "title": "What kind of scores are returned by cross_validation.cross_val_score?", "body": "<p>I avoided this problem by first calculating predicted values with cross_val_predict and then using the predicted values with y_test to get score with metrics.accuracy_score. </p>\n\n<pre><code># Function that runs the requested algorithm and returns the accuracy metrics\ndef fit_ml_algo(algo, X_train, y_train, cv):\n\n# One Pass\nmodel = algo.fit(X_train, y_train)\nacc = round(model.score(X_train, y_train) * 100, 2)\n\n# Cross Validation \ntrain_pred = model_selection.cross_val_predict(algo, \n                                              X_train, \n                                              y_train, \n                                              cv=cv, \n                                              n_jobs = -1)\n# Cross-validation accuracy metric\nacc_cv = round(metrics.accuracy_score(y_train, train_pred) * 100, 2)\n\nreturn train_pred, acc, acc_cv\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 6442727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23f5ad729b1d61672e493f752951313?s=128&d=identicon&r=PG&f=1", "display_name": "kokoma", "link": "https://stackoverflow.com/users/6442727/kokoma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2779, "favorite_count": 2, "answer_count": 2, "score": 5, "last_activity_date": 1575633450, "creation_date": 1465424696, "question_id": 37713953, "link": "https://stackoverflow.com/questions/37713953/what-kind-of-scores-are-returned-by-cross-validation-cross-val-score", "title": "What kind of scores are returned by cross_validation.cross_val_score?", "body": "<p>I can't find this information in sci-kit learn documentation. But based on the numbers I got, it doesn't look like scores are mean squared error. </p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "is_accepted": false, "score": 3, "last_activity_date": 1465425160, "last_edit_date": 1465425160, "creation_date": 1465424721, "answer_id": 37713959, "question_id": 37713900, "link": "https://stackoverflow.com/questions/37713900/how-to-replace-a-specific-index-inside-of-an-array-with-a-new-string-and-then-r/37713959#37713959", "title": "How to replace a specific index inside of an array with a new string, and then revert it back to its original value?", "body": "<p>Just save the old value in a variable, e.g. <code>player_room_char</code>:</p>\n\n<pre><code>player_room_char = gameMap[i][j]\ngameMap[i][j] = 'P'\n\n...\n\ngameMap[i][j] = player_room_char\n</code></pre>\n\n<p>Presumably there is only one player, so you should only need a single variable.</p>\n"}], "owner": {"reputation": 266, "user_id": 5438236, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/uI4df.jpg?s=128&g=1", "display_name": "Mochamethod", "link": "https://stackoverflow.com/users/5438236/mochamethod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465425160, "creation_date": 1465424385, "question_id": 37713900, "link": "https://stackoverflow.com/questions/37713900/how-to-replace-a-specific-index-inside-of-an-array-with-a-new-string-and-then-r", "title": "How to replace a specific index inside of an array with a new string, and then revert it back to its original value?", "body": "<pre><code>gameMap = [['.'] * 5 for _ in xrange(5)]   # '.' represents grass.\n</code></pre>\n\n<p>This should print something along the lines of: </p>\n\n<pre><code>[['.', '.', '.', '.', '.'], \n['.', '.', '.', '.', '.'], \n['.', '.', '.', '.', '.'], \n['.', '.', '.', '.', '.'], \n['.', '.', '.', '.', '.']]\n</code></pre>\n\n<p>I'm looking to replace a specific index of this array using the tracked user position.  If the user position is at <code>(0, 0)</code>, i.e. <code>userpos = gamemap[0][0]</code>, and I replace that index with a <code>'P'</code> so the first row looked like <code>[['P', '.', '.', '.', '.'],</code>, how would I go about tracking that index's original value of <code>'.'</code> so that when the player moves from 0,0 I could replace the that tile with its first value, which in this case would be <code>'.'</code>?</p>\n"}, {"tags": ["python", "google-api", "blogger"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "edited": false, "score": 0, "creation_date": 1465427665, "post_id": 37714318, "comment_id": 62902395, "body": "I updated my question to include more information on client_secrets, which doesn&#39;t seem to contain any reference to userIds. I will try out entering the userId in that portion of the code, thanks! The sample code comes from here: <a href=\"https://github.com/google/google-api-python-client/tree/master/samples/blogger\" rel=\"nofollow noreferrer\">github.com/google/google-api-python-client/tree/master/sampl&zwnj;&#8203;es/&hellip;</a>. Their documentation wasn&#39;t straight-forward for me for some reason, so hopefully your suggestion works!"}, {"owner": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "edited": false, "score": 0, "creation_date": 1465427976, "post_id": 37714318, "comment_id": 62902484, "body": "Unfortunately, changing the &#39;self&#39; reference actually resulted in a broken http request. Which, by the way, thank you for that insight on the Http Requests! I just finished a project in school working with http requests, so that is helpful as well.  Perhaps I was just expecting too much out of this sample, as I gathered from the documentation that it already created http requests for me."}, {"owner": {"reputation": 1978, "user_id": 4179570, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7rqjc.jpg?s=128&g=1", "display_name": "glls", "link": "https://stackoverflow.com/users/4179570/glls"}, "reply_to_user": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "edited": false, "score": 0, "creation_date": 1465428325, "post_id": 37714318, "comment_id": 62902597, "body": "I just added the blogger API reference guide, which is what you really want to use"}, {"owner": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "edited": false, "score": 0, "creation_date": 1465428715, "post_id": 37714318, "comment_id": 62902714, "body": "I&#39;m starting to wonder if the Blogger API is really what I want for what I&#39;m trying to accomplish. My project involves taking a list of blog URLs and getting all the post data associated with those blogs.  It might be possible, but I&#39;m not certain. I&#39;d still really like to get the sample code to work, as it really is bothering me that I can&#39;t find a single working sample for Blogger APIs."}, {"owner": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "edited": false, "score": 0, "creation_date": 1465429216, "post_id": 37714318, "comment_id": 62902877, "body": "Looking a little closer at the blogger.py code, I noticed that service is actually constructed in the sample code.  Would that possibly be where the initial http request (getting a user&#39;s blog) is formed (behind the scenes, of course)? I might have a flaw in my understanding, but I thought that  all of the API methods mentioned in the reference guide were a way of encapsulating the requests."}, {"owner": {"reputation": 1978, "user_id": 4179570, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7rqjc.jpg?s=128&g=1", "display_name": "glls", "link": "https://stackoverflow.com/users/4179570/glls"}, "reply_to_user": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "edited": false, "score": 0, "creation_date": 1465439029, "post_id": 37714318, "comment_id": 62905062, "body": "view modified answer"}, {"owner": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "edited": false, "score": 0, "creation_date": 1465483903, "post_id": 37714318, "comment_id": 62929941, "body": "Hmm, my problem seems to be that I am never taken to authentication to sign in, so there is no blog for it to read from. Perhaps it&#39;s my own inexperience with using a Python IDE? I&#39;m currently using PyCharm. Also, thank you so much for sharing the requests library. I&#39;m starting to think that I&#39;m at the point where I&#39;ll get my own code working before I can get the Google sample working!"}, {"owner": {"reputation": 1978, "user_id": 4179570, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7rqjc.jpg?s=128&g=1", "display_name": "glls", "link": "https://stackoverflow.com/users/4179570/glls"}, "reply_to_user": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "edited": false, "score": 0, "creation_date": 1465486763, "post_id": 37714318, "comment_id": 62932164, "body": "I tested the sample and created a dummy blog - on my first attempt it redirected me to login, afterwards, i was getting the above mentioned terminal info, using pycharm as well"}, {"owner": {"reputation": 1978, "user_id": 4179570, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7rqjc.jpg?s=128&g=1", "display_name": "glls", "link": "https://stackoverflow.com/users/4179570/glls"}, "reply_to_user": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "edited": false, "score": 0, "creation_date": 1465486822, "post_id": 37714318, "comment_id": 62932208, "body": "If you can paste the terminal error message from pycharm into your post, it will be very much appreciated"}, {"owner": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "edited": false, "score": 0, "creation_date": 1465487391, "post_id": 37714318, "comment_id": 62932627, "body": "I actually had posted the error already - it runs, but gets the user as &#39;unknown&#39; since it never has me log in. It&#39;s near the bottom of my post. The only thing I could think that might be creating a problem is that I used homebrew to install Python."}, {"owner": {"reputation": 1978, "user_id": 4179570, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7rqjc.jpg?s=128&g=1", "display_name": "glls", "link": "https://stackoverflow.com/users/4179570/glls"}, "reply_to_user": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "edited": false, "score": 0, "creation_date": 1465495177, "post_id": 37714318, "comment_id": 62937402, "body": "just to be sure: you did replace the client id and secret, correct? and removed the brackets? And last thing... Try using Python 3.4 rather than 2.7 for this example, i dont think 2.7 supports ---from googleapiclient import sample_tools---"}, {"owner": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "edited": false, "score": 0, "creation_date": 1466005206, "post_id": 37714318, "comment_id": 63140753, "body": "Correct and correct. Unfortunately, I just tried Python 3.4, and found that I&#39;m having the same problem. The authentication window never comes up. I am using Mac OSX, not sure if that would be part of my issue. I honestly have no idea what&#39;s going on to keep the sample from working correctly."}, {"owner": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "edited": false, "score": 0, "creation_date": 1466005565, "post_id": 37714318, "comment_id": 63141009, "body": "Could my problem be in the type of Client ID credential I used? When registering my project in the OAuth Console, I selected &#39;Other&#39; for my ClientID."}, {"owner": {"reputation": 1978, "user_id": 4179570, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7rqjc.jpg?s=128&g=1", "display_name": "glls", "link": "https://stackoverflow.com/users/4179570/glls"}, "reply_to_user": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "edited": false, "score": 0, "creation_date": 1466010292, "post_id": 37714318, "comment_id": 63143956, "body": "what kind of API key did you provide your app? did you provide Oauth Consent? did you setup a Service account key rather than an API key?"}, {"owner": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "edited": false, "score": 0, "creation_date": 1466010958, "post_id": 37714318, "comment_id": 63144337, "body": "I was under the impression that if I had an OAuth 2.0 token (which I assumed was the client ID and client secret), then my project didn&#39;t need an API key (unless by API key you mean the OAuth 2 tokens). I created OAuth 2.0 client IDs credentials for this project, so it&#39;s not a Service Account key. My consent screen is set up with an email address and a project name."}, {"owner": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "edited": false, "score": 0, "creation_date": 1466036002, "post_id": 37714318, "comment_id": 63155418, "body": "While I still don&#39;t know why the Blogger Sample won&#39;t pull up the authentication consent window, I was able to accomplish some Get requests thanks to the request library you shared, and since I don&#39;t need authentication for my personal project anyway (just this sample), I&#39;m going to accept your answer. Thanks for all your help!"}], "tags": [], "owner": {"reputation": 1978, "user_id": 4179570, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/7rqjc.jpg?s=128&g=1", "display_name": "glls", "link": "https://stackoverflow.com/users/4179570/glls"}, "is_accepted": true, "score": 0, "last_activity_date": 1465438840, "last_edit_date": 1465438840, "creation_date": 1465426888, "answer_id": 37714318, "question_id": 37713882, "link": "https://stackoverflow.com/questions/37713882/understanding-basic-python-google-api-sample/37714318#37714318", "title": "Understanding Basic Python Google API Sample", "body": "<p>The sample code is self explanatory:</p>\n\n<pre><code>#libraries used to connect with googles api\nfrom oauth2client import client\nfrom googleapiclient import sample_tools\n\n\ndef main(argv):\n  # Authenticate and construct service.\n  service, flags = sample_tools.init(\n      argv, 'blogger', 'v3', __doc__, __file__,\n      scope='https://www.googleapis.com/auth/blogger')\n</code></pre>\n\n<p>This above uses Oath2 Flow, you are redirected and need to authenticate (at least the first time you run this)</p>\n\n<pre><code> try:\n\n      users = service.users()    #googleapiclient.discovery.Resource object\n\n      # Retrieve this user's profile information\n      thisuser = users.get(userId='self').execute()\n      print('This user\\'s display name is: %s' % thisuser['displayName'])\n\n      blogs = service.blogs()   #googleapiclient.discovery.Resource object\n\n # Retrieve the list of Blogs this user has write privileges on\n      thisusersblogs = blogs.listByUser(userId='self').execute()  #retrieves all blogs from the user (you = self) \n      for blog in thisusersblogs['items']:    #for loop that iterates over a JSON (dictionary) to get key value 'items'\n        print('The blog named \\'%s\\' is at: %s' % (blog['name'], blog['url']))\n\n      posts = service.posts()    #googleapiclient.discovery.Resource object for posts\n\n  # List the posts for each blog this user has\n      for blog in thisusersblogs['items']:\n        print('The posts for %s:' % blog['name'])  \n        request = posts.list(blogId=blog['id'])     #uses #googleapiclient.discovery.Resource object for posts to get blog by id\n        while request != None:\n          posts_doc = request.execute()\n          if 'items' in posts_doc and not (posts_doc['items'] is None):\n            for post in posts_doc['items']:\n              print('  %s (%s)' % (post['title'], post['url']))\n          request = posts.list_next(request, posts_doc)\n\n  except client.AccessTokenRefreshError:\n    print ('The credentials have been revoked or expired, please re-run'\n      'the application to re-authorize')\n\nif __name__ == '__main__':\n  main(sys.argv)\n</code></pre>\n\n<p>Running this returns  all your posts as follows:</p>\n\n<pre><code>This user's display name is: \"something\"\nThe blog named 'myTest' is at: http://BLOGNAME.blogspot.com/\nThe posts for myTest:\n  POST NAME (http://BLOGNAME.blogspot.com/2016/06/postname.html)\n</code></pre>\n\n<p>Maybe you want to get started with basic requests, rather than code samples, to get familiar with the API?</p>\n\n<p><a href=\"https://developers.google.com/blogger/docs/3.0/using#RetrievingABlog\" rel=\"nofollow\">https://developers.google.com/blogger/docs/3.0/using#RetrievingABlog</a></p>\n\n<p>start with the basics, Ex:</p>\n\n<blockquote>\n  <p>Retrieving a blog</p>\n  \n  <p>You can retrieve information for a particular blog by sending an HTTP\n  GET request to the blog's URI. The URI for a blog has the following\n  format:</p>\n  \n  <p><a href=\"https://www.googleapis.com/blogger/v3/blogs/blogId\" rel=\"nofollow\">https://www.googleapis.com/blogger/v3/blogs/blogId</a></p>\n</blockquote>\n\n<p>Depending on the pyton version you are using, you can import different libraries to do your requests, Ex.\nfrom <a href=\"http://docs.python-requests.org/en/master/user/quickstart/#make-a-request\" rel=\"nofollow\">http://docs.python-requests.org/en/master/user/quickstart/#make-a-request</a></p>\n\n<pre><code>import requests\n\nr = requests.get('https://www.googleapis.com/blogger/v3/blogs/blogId')\nprint r.text\n</code></pre>\n\n<p>this should retunr a JSON :</p>\n\n<pre><code>{\n  \"kind\": \"blogger#blog\",\n  \"id\": \"2399953\",\n  \"name\": \"Blogger Buzz\",\n  \"description\": \"The Official Buzz from Blogger at Google\",\n  \"published\": \"2007-04-23T22:17:29.261Z\",\n  \"updated\": \"2011-08-02T06:01:15.941Z\",\n  \"url\": \"http://buzz.blogger.com/\",\n  \"selfLink\": \"https://www.googleapis.com/blogger/v3/blogs/2399953\",\n  \"posts\": {\n    \"totalItems\": 494,\n    \"selfLink\": \"https://www.googleapis.com/blogger/v3/blogs/2399953/posts\"\n  },\n  \"pages\": {\n    \"totalItems\": 2,\n    \"selfLink\": \"https://www.googleapis.com/blogger/v3/blogs/2399953/pages\"\n  },\n  \"locale\": {\n    \"language\": \"en\",\n    \"country\": \"\",\n    \"variant\": \"\"\n  }\n}\n</code></pre>\n\n<p>you probably want to check <a href=\"https://developers.google.com/blogger/docs/3.0/reference/#Blogs\" rel=\"nofollow\">https://developers.google.com/blogger/docs/3.0/reference/#Blogs</a></p>\n"}, {"tags": [], "owner": {"reputation": 6567, "user_id": 1103953, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/107522343c9ed3b01cdc0d3eece92241?s=128&d=identicon&r=PG", "display_name": "RtmY", "link": "https://stackoverflow.com/users/1103953/rtmy"}, "is_accepted": false, "score": 0, "last_activity_date": 1606157963, "last_edit_date": 1606157963, "creation_date": 1606157548, "answer_id": 64974577, "question_id": 37713882, "link": "https://stackoverflow.com/questions/37713882/understanding-basic-python-google-api-sample/64974577#64974577", "title": "Understanding Basic Python Google API Sample", "body": "<p>Adding a basic working example for working with Google drive with Python client library.</p>\n<p><strong>Recommendation for Python Client library</strong></p>\n<p>I'll add another example for using google drive with python client library.</p>\n<p>First of all I would Highly suggest using the <a href=\"https://github.com/googleworkspace/PyDrive\" rel=\"nofollow noreferrer\">PyDrive</a> library which makes the OAuth process much easier (Install with pip:  <code>pip install PyDrive</code>).</p>\n<p>More details in <a href=\"https://googleworkspace.github.io/PyDrive/docs/build/html/quickstart.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n<hr />\n<p><strong>How to run a basic python code that interacts with Google drive?</strong></p>\n<p>1 ) Go to APIs Console and make your own project.</p>\n<p>2 ) Search for \u2018Google Drive API\u2019, select the entry, and click \u2018Enable\u2019.</p>\n<p>3 ) Select \u2018Credentials\u2019 from the left menu, click \u2018Create Credentials\u2019, select \u2018OAuth client ID\u2019.</p>\n<p>4 ) Now, the product name and consent screen need to be set -&gt; click \u2018Configure consent screen\u2019 and follow the instructions. Once finished:</p>\n<p>a. Select \u2018Application type\u2019 to be Web application.</p>\n<p>b. Enter an appropriate name.</p>\n<p>c. Input <code>http://localhost:8080</code> for <code>Authorized JavaScript origins</code>.</p>\n<p>d. Input <code>http://localhost:8080/</code> for <code>Authorized redirect URIs</code>.</p>\n<p>e. Click \u2018Create\u2019.</p>\n<p>5 ) Click \u2018Download JSON\u2019 on the right side of Client ID to download <code>client_secret_&lt;long ID&gt;.json</code>. <br>\nThe downloaded file has all authentication information of your application. <br>\n<strong>Rename the file</strong> to \u201cclient_secret<strong>s</strong>.json\u201d and place it in your working directory.</p>\n<hr />\n<p><strong>Basic code example</strong></p>\n<p>Add your code and run it - for example basic code that returns all files in root directory:</p>\n<pre><code>from pydrive.auth import GoogleAuth\nfrom pydrive.drive import GoogleDrive\n\ngauth = GoogleAuth()\ngauth.LocalWebserverAuth()\n\ndrive = GoogleDrive(gauth)\n\n\n# Auto-iterate through all files that matches this query\nfile_list = drive.ListFile({'q': &quot;'root' in parents and trashed=false&quot;}).GetList()\nfor file1 in file_list:\n  print('title: %s, id: %s' % (file1['title'], file1['id']))\n</code></pre>\n<hr />\n<p><strong>If you receive 403 authorization error in the authentication process</strong></p>\n<p>You will have to add your gmail account at least as a test user in order to proceed with the authentication flow:</p>\n<p><a href=\"https://i.stack.imgur.com/1TYEr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1TYEr.png\" alt=\"enter image description here\" /></a></p>\n<hr />\n<p><strong>Additional Snapshots</strong></p>\n<p>Image for steps 4.c and 4.d:</p>\n<p><a href=\"https://i.stack.imgur.com/fo0sf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fo0sf.png\" alt=\"enter image description here\" /></a></p>\n<p>Image for step 5:</p>\n<p><a href=\"https://i.stack.imgur.com/jJCHL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jJCHL.png\" alt=\"enter image description here\" /></a></p>\n"}], "owner": {"reputation": 83, "user_id": 6331921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JV9bq.jpg?s=128&g=1", "display_name": "tatertot", "link": "https://stackoverflow.com/users/6331921/tatertot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1949, "favorite_count": 0, "accepted_answer_id": 37714318, "answer_count": 2, "score": 3, "last_activity_date": 1606157963, "creation_date": 1465424302, "last_edit_date": 1465487318, "question_id": 37713882, "link": "https://stackoverflow.com/questions/37713882/understanding-basic-python-google-api-sample", "title": "Understanding Basic Python Google API Sample", "body": "<p>I mentioned trying to get google java sample code working in one of my previous questions on StackOverflow, but abandoned trying to do that after realizing how deprecated the samples were. Since I dabbled in python a bit about 4 years ago, I decided that I would take a look at the Google Blogger API for Python.</p>\n\n<p>While most of the API calls make sense, I cannot seem to get this sample to run correctly!</p>\n\n<p>Here is the sample I am trying to run:</p>\n\n<pre><code>#!/usr/bin/env python\n# -*- coding: utf-8 -*-\n#\n# Copyright 2014 Google Inc. All Rights Reserved.\n#\n# Licensed under the Apache License, Version 2.0 (the \"License\");\n# you may not use this file except in compliance with the License.\n# You may obtain a copy of the License at\n#\n#      http://www.apache.org/licenses/LICENSE-2.0\n#\n# Unless required by applicable law or agreed to in writing, software\n# distributed under the License is distributed on an \"AS IS\" BASIS,\n# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n# See the License for the specific language governing permissions and\n# limitations under the License.\n\n\"\"\"Simple command-line sample for Blogger.\n\nCommand-line application that retrieves the users blogs and posts.\n\nUsage:\n  $ python blogger.py\n\nYou can also get help on all the command-line flags the program understands\nby running:\n\n  $ python blogger.py --help\n\nTo get detailed log output run:\n\n  $ python blogger.py --logging_level=DEBUG\n\"\"\"\nfrom __future__ import print_function\n\n__author__ = 'jcgregorio@google.com (Joe Gregorio)'\n\nimport sys\n\nfrom oauth2client import client\nfrom googleapiclient import sample_tools\n\n\ndef main(argv):\n  # Authenticate and construct service.\n  service, flags = sample_tools.init(\n      argv, 'blogger', 'v3', __doc__, __file__,\n      scope='https://www.googleapis.com/auth/blogger')\n\n  try:\n\n      users = service.users()\n\n      # Retrieve this user's profile information\n      thisuser = users.get(userId='self').execute()\n      print('This user\\'s display name is: %s' % thisuser['displayName'])\n\n      blogs = service.blogs()\n\n      # Retrieve the list of Blogs this user has write privileges on\n      thisusersblogs = blogs.listByUser(userId='self').execute()\n      for blog in thisusersblogs['items']:\n        print('The blog named \\'%s\\' is at: %s' % (blog['name'], blog['url']))\n\n      posts = service.posts()\n\n      # List the posts for each blog this user has\n      for blog in thisusersblogs['items']:\n        print('The posts for %s:' % blog['name'])\n        request = posts.list(blogId=blog['id'])\n        while request != None:\n          posts_doc = request.execute()\n          if 'items' in posts_doc and not (posts_doc['items'] is None):\n            for post in posts_doc['items']:\n              print('  %s (%s)' % (post['title'], post['url']))\n          request = posts.list_next(request, posts_doc)\n\n  except client.AccessTokenRefreshError:\n    print ('The credentials have been revoked or expired, please re-run'\n      'the application to re-authorize')\n\nif __name__ == '__main__':\n  main(sys.argv)\n</code></pre>\n\n<p>I've run this sample in both PyCharm and the terminal, and while the code compiles and runs (which is more than I could say for the Java sample!) I cannot seem to follow where the sample is getting its information. </p>\n\n<p>The sample requires a client_secrets.json file, which I populated with my client id and client secrets keys obtained from the Google API console, however, I don't see how the sample is supposed to get data on the current blogger user, as there doesn't seem to be an input to select a user, input an email address, or anything of the like. The service apparently obtains the current user, but it doesn't actually appear to do so.</p>\n\n<p>client_secrets.json:</p>\n\n<pre><code>{\n  \"web\": {\n    \"client_id\": \"[[INSERT CLIENT ID HERE]]\",\n    \"client_secret\": \"[[INSERT CLIENT SECRET HERE]]\",\n    \"redirect_uris\": [],\n    \"auth_uri\": \"https://accounts.google.com/o/oauth2/auth\",\n    \"token_uri\": \"https://accounts.google.com/o/oauth2/token\"\n  }\n}\n</code></pre>\n\n<p>In fact, upon running this code, I receive the following error:</p>\n\n<pre><code>/usr/local/Cellar/python/2.7.11/Frameworks/Python.framework/Versions/2.7/bin/python2.7 /google-api-python-client-master/samples/blogger/blogger.py\nThis user's display name is: Unknown\nTraceback (most recent call last):\n  File \"/google-api-python-client-master/samples/blogger/blogger.py\", line 83, in &lt;module&gt;\n    main(sys.argv)\n  File \"/google-api-python-client-master/samples/blogger/blogger.py\", line 62, in main\n    for blog in thisusersblogs['items']:\nKeyError: 'items'\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>If someone could help me understand what I'm missing in my understanding of how this sample works, I would definitely appreciate it. My python is definitely rusty, but I'm hoping playing around with this sample code will help me in using it again.</p>\n"}, {"tags": ["python", "django", "django-models", "django-views", "django-uploads"], "comments": [{"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1465432573, "post_id": 37713864, "comment_id": 62903801, "body": "what does your form look like?"}, {"owner": {"reputation": 139, "user_id": 5863556, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6402cafb07cf89555ebd9809fd69d96a?s=128&d=identicon&r=PG&f=1", "display_name": "Dannad", "link": "https://stackoverflow.com/users/5863556/dannad"}, "reply_to_user": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 1, "creation_date": 1465439130, "post_id": 37713864, "comment_id": 62905080, "body": "sorry, I just added it"}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 5863556, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6402cafb07cf89555ebd9809fd69d96a?s=128&d=identicon&r=PG&f=1", "display_name": "Dannad", "link": "https://stackoverflow.com/users/5863556/dannad"}, "edited": false, "score": 0, "creation_date": 1465567682, "post_id": 37716385, "comment_id": 62970221, "body": "I tried this, but I am getting the error: (IntegrityError at /gaestebuch/send_update_profile/ (1048, &quot;Column &#39;user_id&#39; cannot be null&quot;)). Any idea how I could fix that? Sorry for the late reply"}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "reply_to_user": {"reputation": 139, "user_id": 5863556, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6402cafb07cf89555ebd9809fd69d96a?s=128&d=identicon&r=PG&f=1", "display_name": "Dannad", "link": "https://stackoverflow.com/users/5863556/dannad"}, "edited": false, "score": 0, "creation_date": 1465570196, "post_id": 37716385, "comment_id": 62971969, "body": "that&#39;s a different question. You need to grab the user id from request.user in the form init"}, {"owner": {"reputation": 139, "user_id": 5863556, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6402cafb07cf89555ebd9809fd69d96a?s=128&d=identicon&r=PG&f=1", "display_name": "Dannad", "link": "https://stackoverflow.com/users/5863556/dannad"}, "edited": false, "score": 1, "creation_date": 1465571890, "post_id": 37716385, "comment_id": 62973096, "body": "Thanks a lot for helping me!"}, {"owner": {"reputation": 139, "user_id": 5863556, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6402cafb07cf89555ebd9809fd69d96a?s=128&d=identicon&r=PG&f=1", "display_name": "Dannad", "link": "https://stackoverflow.com/users/5863556/dannad"}, "edited": false, "score": 1, "creation_date": 1465653825, "post_id": 37716385, "comment_id": 62997783, "body": "sry, I forgot to do that, sure I will do that :)"}], "tags": [], "owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "is_accepted": true, "score": 1, "last_activity_date": 1465443816, "creation_date": 1465443816, "answer_id": 37716385, "question_id": 37713864, "link": "https://stackoverflow.com/questions/37713864/django-by-updating-the-userprofile-the-image-is-not-saving-correctly/37716385#37716385", "title": "(Django) By updating the UserProfile, the image is not saving correctly", "body": "<p>Since you are using a ModelForm subclass instead of a Form subclass you should make use of it's functionality, particularly the <a href=\"https://docs.djangoproject.com/en/1.9/topics/forms/modelforms/#the-save-method\" rel=\"nofollow\">save method.</a></p>\n\n<blockquote>\n  <p>Every ModelForm also has a save() method. This method creates and\n  saves a database object from the data bound to the form. A subclass of\n  ModelForm can accept an existing model instance as the keyword\n  argument instance; if this is supplied, save() will update that\n  instance. If it\u2019s not supplied, save() will create a new instance of\n  the specified model</p>\n</blockquote>\n\n<p>Thus your code ca be simplified as</p>\n\n<pre><code>form = UserProfileForm(request.POST or None, request.FILES or None)\nif form.is_valid():\n    form.save()\n    return redirect('the url' + str(userProfile.id))\n\n else:\n    return render_to_response(\n        'gaestebuch/update_profile.html', {'form':form}, RequestContext(request))\n</code></pre>\n\n<p>On a side note, when writing new django code use <a href=\"https://docs.djangoproject.com/en/1.9/topics/http/shortcuts/#django.shortcuts.render\" rel=\"nofollow\">render</a> instead of render_to_response as render_to_response is planned to be deprecated in the future and eventually removed.</p>\n"}], "owner": {"reputation": 139, "user_id": 5863556, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6402cafb07cf89555ebd9809fd69d96a?s=128&d=identicon&r=PG&f=1", "display_name": "Dannad", "link": "https://stackoverflow.com/users/5863556/dannad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 37716385, "answer_count": 1, "score": 1, "last_activity_date": 1465443816, "creation_date": 1465424206, "last_edit_date": 1465443106, "question_id": 37713864, "link": "https://stackoverflow.com/questions/37713864/django-by-updating-the-userprofile-the-image-is-not-saving-correctly", "title": "(Django) By updating the UserProfile, the image is not saving correctly", "body": "<p>I made a view, to update a userprofile. When uploading an image the image is saved correctly, but when updating the profile again, the image is not saved anymore, how can I solve that problem? I am glad for any help!</p>\n\n<p>my class UserProfile looks like this:</p>\n\n<pre><code>class UserProfile(models.Model):\n    user = models.OneToOneField(User)\n    bio = models.TextField(max_length=500, blank = True, default=('keine Angabe'), null=True)\n    image = models.FileField(null=True, blank=True)\n    facebook = models.CharField(max_length=200, null=True,default=('keine Angabe'))\n\n    def get_absolute_url(self):\n        return reverse('gaestebuch:result', args=[str(self.id)])\n\n    def __unicode__(self):\n        return self.user.username\n\n    @property\n    def get_content_type(self):\n        instance = self\n        content_type =   ContentType.objects.get_for_models(instance.__class__)\n        return content_type\n</code></pre>\n\n<p>I use two views:</p>\n\n<pre><code>def update_profile(request):\n    userProfile = UserProfile.objects.get(user=request.user)\n    form = UserProfileForm(initial={'bio': userProfile.bio, 'image' : userProfile.image, 'facebook': userProfile.facebook})\n    return render_to_response('gaestebuch/update_profile.html', {'form':form}, RequestContext(request))\n\n\n@login_required\ndef send_update_profile(request):\n    if request.method == 'POST':\n        #form = UserProfileForm(request.POST)\n        form = UserProfileForm(request.POST or None, request.FILES or None)\n        if form.is_valid():\n            userProfile = UserProfile.objects.get(user=request.user)\n            bio = form.cleaned_data['bio']\n            userProfile.bio = bio\n            image = form.cleaned_data['image']\n            userProfile.image = image\n            facebook = form.cleaned_data['facebook']\n            userProfile.facebook = facebook\n        userProfile.save()\n        return redirect('the url' + str(userProfile.id))\n    else:\n        form = UserProfileForm()\n    return redirect('/user/send_update_profile')\n</code></pre>\n\n<p>This is my form:</p>\n\n<pre><code>class UserProfileForm(forms.ModelForm):\n\n    class Meta:\n        model = UserProfile\n        fields = ('bio','image','facebook',)\n</code></pre>\n\n<p>If there is anything else necessary to ad, I am happy to add that.</p>\n\n<p>I am glad for any help!</p>\n"}, {"tags": ["python", "excel", "python-2.7", "xlwings"], "comments": [{"owner": {"reputation": 5157, "user_id": 918626, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8c377a6e6f8a5a6910bb62f51c6f853?s=128&d=identicon&r=PG", "display_name": "Felix Zumstein", "link": "https://stackoverflow.com/users/918626/felix-zumstein"}, "edited": false, "score": 0, "creation_date": 1465459270, "post_id": 37713858, "comment_id": 62912584, "body": "Whe the duplication of the same question? <a href=\"http://stackoverflow.com/q/37710357/918626\">stackoverflow.com/q/37710357/918626</a>"}, {"owner": {"reputation": 303, "user_id": 6320717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0ba1da4f14852adeeeb765ed3d9c39b?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Setteducati Jr.", "link": "https://stackoverflow.com/users/6320717/steven-setteducati-jr"}, "reply_to_user": {"reputation": 5157, "user_id": 918626, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d8c377a6e6f8a5a6910bb62f51c6f853?s=128&d=identicon&r=PG", "display_name": "Felix Zumstein", "link": "https://stackoverflow.com/users/918626/felix-zumstein"}, "edited": false, "score": 0, "creation_date": 1465477524, "post_id": 37713858, "comment_id": 62924934, "body": "Pretty much, just trying to figure out if there are some options that are easier than others"}], "owner": {"reputation": 303, "user_id": 6320717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a0ba1da4f14852adeeeb765ed3d9c39b?s=128&d=identicon&r=PG&f=1", "display_name": "Steven Setteducati Jr.", "link": "https://stackoverflow.com/users/6320717/steven-setteducati-jr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1465424129, "creation_date": 1465424129, "question_id": 37713858, "link": "https://stackoverflow.com/questions/37713858/xlwings-udfs-and-executable-python-file", "title": "xlwings UDFs and executable python file", "body": "<p>So I know that xlwings can import User Defined Functions to excel from Python and I have no problems when I do that. I also know that xlwings can run macros based on a frozen (executable) python file which removes the requirement for a user to have python installed. My question is if you can merge the two so that User Defined Functions can be run using only a frozen (executable) python file as its source? If so please elaborate on the settings required to do so since I have not successfully done so. Thank you in advance for your time!</p>\n"}, {"tags": ["python", "pyspark", "apache-spark-sql"], "comments": [{"owner": {"reputation": 5792, "user_id": 5907870, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DKVw5.jpg?s=128&g=1", "display_name": "shivsn", "link": "https://stackoverflow.com/users/5907870/shivsn"}, "edited": false, "score": 0, "creation_date": 1465463869, "post_id": 37713847, "comment_id": 62915361, "body": "try <code>df.replace(&#39;None&#39;,&#39; &#39;)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 280325, "user_id": 1560062, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c5027e3046fed86e8e34b4fa0e6246c?s=128&d=identicon&r=PG", "display_name": "zero323", "link": "https://stackoverflow.com/users/1560062/zero323"}, "is_accepted": false, "score": 3, "last_activity_date": 1465472705, "last_edit_date": 1465472705, "creation_date": 1465472285, "answer_id": 37724912, "question_id": 37713847, "link": "https://stackoverflow.com/questions/37713847/pyspark-typeerror-row-object-does-not-support-item-assignment/37724912#37724912", "title": "PySpark: TypeError: &#39;Row&#39; object does not support item assignment", "body": "<p><code>Row</code> is a subclass of <code>tuple</code> and <code>tuples</code> in Python are immutable hence don't support item assignment. If you want to replace an item stored in a tuple you have rebuild it from scratch:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>## replace \"\" with placeholder of your choice \ntuple(x if x is not None else \"\" for x in row)  \n</code></pre>\n\n<p>If you want to simply concatenate flat schema replacing null with empty string you can use <code>concat_ws</code>:</p>\n\n<pre><code>from pyspark.sql.functions import concat_ws\n\ndf.select(concat_ws(\"\\t\", *df.columns)).rdd.flatMap(lambda x: x)\n</code></pre>\n\n<p>To prepare output it makes more sense to use <code>spark-csv</code> and specify <code>nullValue</code>, <code>delimiter</code> and <code>quoteMode</code>.</p>\n"}], "owner": {"reputation": 17078, "user_id": 3993270, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/1bee661ad7451ff3107ca6954560a06c?s=128&d=identicon&r=PG&f=1", "display_name": "Edamame", "link": "https://stackoverflow.com/users/3993270/edamame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13733, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1547309552, "creation_date": 1465424056, "last_edit_date": 1547309552, "question_id": 37713847, "link": "https://stackoverflow.com/questions/37713847/pyspark-typeerror-row-object-does-not-support-item-assignment", "title": "PySpark: TypeError: &#39;Row&#39; object does not support item assignment", "body": "<p>I used the following code to replace the <code>None</code> value in a DataFrame row to an empty string:</p>\n\n<pre><code>def replaceNone(row):\n  row_len = len(row)\n  for i in range(0, row_len):\n    if row[i] is None:\n      row[i] = \"\"    \n  return row\n</code></pre>\n\n<p>in my pyspark code:</p>\n\n<pre><code>data_out = df.rdd.map(lambda row : replaceNone(row)).map(\n  lambda row : \"\\t\".join( [x.encode(\"utf-8\") if isinstance(x, basestring) else str(x).encode(\"utf-8\") for x in row])\n)\n</code></pre>\n\n<p>Then I got the following errors:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>File \"&lt;ipython-input-10-8e5d8b2c3a7f&gt;\", line 1, in &lt;lambda&gt;\n  File \"&lt;ipython-input-2-d1153a537442&gt;\", line 6, in replaceNone\nTypeError: 'Row' object does not support item assignment\n</code></pre>\n\n<p>Does anyone have any idea about the error? How do I replace a \"None\" value in a row to an empty string? Thanks!</p>\n"}, {"tags": ["python", "google-app-engine", "memory", "memory-management", "app-engine-ndb"], "comments": [{"owner": {"reputation": 5997, "user_id": 4062630, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/E4leK.png?s=128&g=1", "display_name": "Sudhanshu Gaur", "link": "https://stackoverflow.com/users/4062630/sudhanshu-gaur"}, "edited": false, "score": 0, "creation_date": 1607016818, "post_id": 37713846, "comment_id": 115146690, "body": "Did you get any solution? I am facing same issue."}, {"owner": {"reputation": 14220, "user_id": 136598, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/55c76f58f63ba7cbb85658158b3a82f8?s=128&d=identicon&r=PG&f=1", "display_name": "gaefan", "link": "https://stackoverflow.com/users/136598/gaefan"}, "reply_to_user": {"reputation": 5997, "user_id": 4062630, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/E4leK.png?s=128&g=1", "display_name": "Sudhanshu Gaur", "link": "https://stackoverflow.com/users/4062630/sudhanshu-gaur"}, "edited": false, "score": 0, "creation_date": 1607018334, "post_id": 37713846, "comment_id": 115147417, "body": "@SudhanshuGaur, no I never did.  I just accept that an instance will occasionally exceed memory limits, crash, and then restart.  As long as you have more than one instance running, it isn&#39;t a big deal as your app will always be available."}], "answers": [{"tags": [], "owner": {"reputation": 14220, "user_id": 136598, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/55c76f58f63ba7cbb85658158b3a82f8?s=128&d=identicon&r=PG&f=1", "display_name": "gaefan", "link": "https://stackoverflow.com/users/136598/gaefan"}, "is_accepted": true, "score": 2, "last_activity_date": 1467638981, "last_edit_date": 1495542824, "creation_date": 1466943192, "answer_id": 38038411, "question_id": 37713846, "link": "https://stackoverflow.com/questions/37713846/app-engine-instance-memory-constantly-increasing/38038411#38038411", "title": "App Engine instance memory constantly increasing", "body": "<p>I found <a href=\"https://stackoverflow.com/questions/33036334/memory-leak-in-google-ndb-library\">another answer</a> that explains part of what is going on here.  I'll give a summary based on that answer:</p>\n\n<ol>\n<li><p>When using NDB, entities are stored in a context cache, and the context cache is part of your memory usage.</p></li>\n<li><p>From the <a href=\"https://cloud.google.com/appengine/docs/python/ndb/cache\" rel=\"nofollow noreferrer\">documentation</a>, one would expect that memory to be released upon the completion of an HTTP request.</p></li>\n<li><p>In practice, the memory is not released upon the completion of the HTTP request.  Apparently, context caches are reused, and the cache is cleared before its next use, which can take a long time to happen.</p></li>\n</ol>\n\n<p>For my situation, I am adding <code>_use_cache=False</code> to most entities to prevent them from being stored in the context cache.  Because of the way my app works, I don't need the context caches for these entities, and this reduces memory usage.</p>\n\n<p><strong>The above is only a partial solution however!</strong></p>\n\n<p>Even with caching turned off for most of my entities, my memory usage is still constantly increasing!  Below is snapshot over a 2.5 day period where the memory continuously increases from 36 MB to 81 MB.  This is over the 4th of July weekend with low traffic.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Shv9Q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Shv9Q.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 14220, "user_id": 136598, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/55c76f58f63ba7cbb85658158b3a82f8?s=128&d=identicon&r=PG&f=1", "display_name": "gaefan", "link": "https://stackoverflow.com/users/136598/gaefan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 3, "accepted_answer_id": 38038411, "answer_count": 1, "score": 3, "last_activity_date": 1467638981, "creation_date": 1465424056, "last_edit_date": 1466968263, "question_id": 37713846, "link": "https://stackoverflow.com/questions/37713846/app-engine-instance-memory-constantly-increasing", "title": "App Engine instance memory constantly increasing", "body": "<p>I'd expect the memory usage of my app engine instances (Python) to be relatively flat after an initial startup period.  Each request to my app is short lived, and it seems all memory usage of single request should be released shortly afterwards.</p>\n\n<p>This is not the case in practice however.  Below is a snapshot of instance memory usage provided by the console.  My app has relatively low traffic so I generally have only one instance running.  Over the two-day period in the graph, the memory usage trend is constantly increasing. (The two blips are where two instances were briefly running.)</p>\n\n<p>I regularly get memory exceeded errors so I'd like to prevent this continuous increase of memory usage.</p>\n\n<p>At the time of the snapshot:</p>\n\n<ul>\n<li>Memcache is using less than 1MB</li>\n<li>Task queues are empty</li>\n<li>Traffic is low (0.2 count/second)</li>\n</ul>\n\n<p>I'd expect the instance memory usage to fall in these circumstances, but it isn't happening.</p>\n\n<p>Because I'm using Python with its automatic garbage collection, I don't see how I could have caused this.</p>\n\n<p>Is this expected app engine behavior and is there anything I can do to fix it?</p>\n\n<p><a href=\"https://i.stack.imgur.com/CHDdi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CHDdi.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "excel", "datetime", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 19255, "user_id": 428862, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7041b76f657ac8e8d32a72f1b8b5b4bb?s=128&d=identicon&r=PG", "display_name": "Merlin", "link": "https://stackoverflow.com/users/428862/merlin"}, "edited": false, "score": 1, "creation_date": 1465424446, "post_id": 37713729, "comment_id": 62901408, "body": "Excel read system setting, so it will vary machine to machine."}], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 0, "last_activity_date": 1465450571, "creation_date": 1465450571, "answer_id": 37717624, "question_id": 37713729, "link": "https://stackoverflow.com/questions/37713729/python-pandas-dataframe-date-index-different-format-in-xlsx-and-csv/37717624#37717624", "title": "Python pandas dataframe &quot;Date&quot; Index different format in xlsx and csv", "body": "<p>You can convert the date to a string.  If the date is in the index, you could do:</p>\n\n<pre><code>df.set_index(df.index.map(lambda x: x.strftime('%m/%d/%Y'))).to_excel()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28655, "user_id": 10238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8c3b1025babebf20168dd90ea8f268c?s=128&d=identicon&r=PG", "display_name": "jmcnamara", "link": "https://stackoverflow.com/users/10238/jmcnamara"}, "is_accepted": false, "score": 1, "last_activity_date": 1465506588, "creation_date": 1465506588, "answer_id": 37736228, "question_id": 37713729, "link": "https://stackoverflow.com/questions/37713729/python-pandas-dataframe-date-index-different-format-in-xlsx-and-csv/37736228#37736228", "title": "Python pandas dataframe &quot;Date&quot; Index different format in xlsx and csv", "body": "<p>You are seeing the datetime in the default pandas Excel datetime format. However, you can easily set it to whatever you want:</p>\n\n<pre><code># Set the default datetime and/or date formats.\nwriter = pd.ExcelWriter(\"pandas_datetime.xlsx\",\n                        engine='xlsxwriter',\n                        date_format='mm/dd/yyy',\n                        datetime_format='mm/dd/yyyy')\n\n# Convert the dataframe to an XlsxWriter Excel object.\ndf.to_excel(writer, sheet_name='Sheet1')\n</code></pre>\n\n<p>See a full example in the XlsxWriter docs: Example: <a href=\"https://xlsxwriter.readthedocs.io/example_pandas_datetime.html\" rel=\"nofollow\">Pandas Excel output with date times.</a></p>\n"}], "owner": {"reputation": 1761, "user_id": 817688, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ceb8f9732787c08552a5a18802768410?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/817688/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1620, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1465506588, "creation_date": 1465423404, "last_edit_date": 1465424474, "question_id": 37713729, "link": "https://stackoverflow.com/questions/37713729/python-pandas-dataframe-date-index-different-format-in-xlsx-and-csv", "title": "Python pandas dataframe &quot;Date&quot; Index different format in xlsx and csv", "body": "<p>I have an xlsx file with multiple tabs, each tab has a <code>Date</code> column in the format of <code>MM/DD/YYYY</code></p>\n\n<p>Read each tab into a pandas dataframe, applied some operations on each tab, and then write the dataframe back into two formats: xlsx and csv</p>\n\n<p>In the xlsx file, the <code>Date</code> column (index) becomes a format that has the time attached: <code>1/1/2013  12:00:00 AM</code>, while the <code>Date</code> column in the csv file remains unchanged: <code>MM/DD/YYYY</code></p>\n\n<p>How can I make sure the <code>Date</code> column in the xlsx file maintains the same format <code>MM/DD/YYYY</code>? </p>\n"}, {"tags": ["python", "numpy", "matplotlib", "scipy", "curve-fitting"], "comments": [{"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1465474308, "post_id": 37713691, "comment_id": 62922426, "body": "Take a look at <a href=\"http://stackoverflow.com/questions/21420792/exponential-curve-fitting-in-scipy\" title=\"exponential curve fitting in scipy\">stackoverflow.com/questions/21420792/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1527, "user_id": 5597830, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a4bbb1abdbcb8d69b6fcca5239e7b851?s=128&d=identicon&r=PG&f=1", "display_name": "iron2man", "link": "https://stackoverflow.com/users/5597830/iron2man"}, "edited": false, "score": 0, "creation_date": 1465426312, "post_id": 37714159, "comment_id": 62901978, "body": "Cool. For this case, would I then have to apply a for loop for my data set?"}, {"owner": {"reputation": 28401, "user_id": 2666859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LtKyC.png?s=128&g=1", "display_name": "Serenity", "link": "https://stackoverflow.com/users/2666859/serenity"}, "reply_to_user": {"reputation": 1527, "user_id": 5597830, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a4bbb1abdbcb8d69b6fcca5239e7b851?s=128&d=identicon&r=PG&f=1", "display_name": "iron2man", "link": "https://stackoverflow.com/users/5597830/iron2man"}, "edited": false, "score": 0, "creation_date": 1465426509, "post_id": 37714159, "comment_id": 62902036, "body": "Loop for what? <code>curve_fit</code> has searched the suitable fit function."}, {"owner": {"reputation": 1527, "user_id": 5597830, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a4bbb1abdbcb8d69b6fcca5239e7b851?s=128&d=identicon&r=PG&f=1", "display_name": "iron2man", "link": "https://stackoverflow.com/users/5597830/iron2man"}, "edited": false, "score": 0, "creation_date": 1465426951, "post_id": 37714159, "comment_id": 62902195, "body": "When I define my x and y values as the arrays, i&#39;m returned with this, <code>ufunc &#39;multiply&#39; did not contain a loop with signature matching types dtype(&#39;S32&#39;) dtype(&#39;S32&#39;) dtype(&#39;S32&#39;)</code>"}, {"owner": {"reputation": 28401, "user_id": 2666859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LtKyC.png?s=128&g=1", "display_name": "Serenity", "link": "https://stackoverflow.com/users/2666859/serenity"}, "reply_to_user": {"reputation": 1527, "user_id": 5597830, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a4bbb1abdbcb8d69b6fcca5239e7b851?s=128&d=identicon&r=PG&f=1", "display_name": "iron2man", "link": "https://stackoverflow.com/users/5597830/iron2man"}, "edited": false, "score": 1, "creation_date": 1465429825, "post_id": 37714159, "comment_id": 62903055, "body": "Try to write         <code>FreqTime1.append(np.float32(row[0])); DecayCount1.append(np.float32(row[3]))</code>"}], "tags": [], "owner": {"reputation": 28401, "user_id": 2666859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LtKyC.png?s=128&g=1", "display_name": "Serenity", "link": "https://stackoverflow.com/users/2666859/serenity"}, "is_accepted": false, "score": 7, "last_activity_date": 1465425971, "creation_date": 1465425971, "answer_id": 37714159, "question_id": 37713691, "link": "https://stackoverflow.com/questions/37713691/python-fitting-exponential-decay-curve-from-recorded-values/37714159#37714159", "title": "Python - Fitting exponential decay curve from recorded values", "body": "<p>You have to use <code>curve_fit</code> from scipy.optimize: <a href=\"http://docs.scipy.org/doc/scipy-0.16.1/reference/generated/scipy.optimize.curve_fit.html\" rel=\"noreferrer\">http://docs.scipy.org/doc/scipy-0.16.1/reference/generated/scipy.optimize.curve_fit.html</a></p>\n\n<pre><code>from scipy.optimize import curve_fit\nimport numpy as np\n# define type of function to search\ndef model_func(x, a, k, b):\n    return a * np.exp(-k*x) + b\n\n# sample data\nx = np.array([399.75, 989.25, 1578.75, 2168.25, 2757.75, 3347.25, 3936.75, 4526.25, 5115.75, 5705.25])\ny = np.array([109,62,39,13,10,4,2,0,1,2])\n\n# curve fit\np0 = (1.,1.e-5,1.) # starting search koefs\nopt, pcov = curve_fit(model_func, x, y, p0)\na, k, b = opt\n# test result\nx2 = np.linspace(250, 6000, 250)\ny2 = model_func(x2, a, k, b)\nfig, ax = plt.subplots()\nax.plot(x2, y2, color='r', label='Fit. func: $f(x) = %.3f e^{%.3f x} %+.3f$' % (a,k,b))\nax.plot(x, y, 'bo', label='data with noise')\nax.legend(loc='best')\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/vJGf3.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/vJGf3.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "is_accepted": false, "score": 1, "last_activity_date": 1465476593, "creation_date": 1465476593, "answer_id": 37726500, "question_id": 37713691, "link": "https://stackoverflow.com/questions/37713691/python-fitting-exponential-decay-curve-from-recorded-values/37726500#37726500", "title": "Python - Fitting exponential decay curve from recorded values", "body": "<p><em>\"I'm returned with this error message</em></p>\n\n<pre><code>TypeError: ufunc 'multiply' did not contain a loop with signature matching types dtype('S32') dtype('S32') dtype('S32')\n</code></pre>\n\n<p><em>Any idea on how to resolve this?\"</em></p>\n\n<p>Your code that reads the CSV file to create <code>FreqTime1</code> and <code>DelayCount1</code> is creating arrays of strings.  You can fix that by following the suggestion that @StanleyR made in a comment.  A better idea is to replace this code:</p>\n\n<pre><code>FreqTime1 = []\nDecayCount1 = []\nwith open('Half_Life.csv', 'r') as f:\n    reader = csv.reader(f, delimiter=',')\n    for row in reader:\n        FreqTime1.append(row[0])\n        DecayCount1.append(row[3])\n\nFreqTime1 = np.array(FreqTime1) \nDecayCount1 = np.array(DecayCount1)\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>FreqTime1, DecayCount1 = np.loadtxt('Half_Life.csv', delimiter=',', usecols=(0, 3), unpack=True)\n</code></pre>\n"}], "owner": {"reputation": 1527, "user_id": 5597830, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/a4bbb1abdbcb8d69b6fcca5239e7b851?s=128&d=identicon&r=PG&f=1", "display_name": "iron2man", "link": "https://stackoverflow.com/users/5597830/iron2man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5630, "favorite_count": 3, "answer_count": 2, "score": 4, "last_activity_date": 1526368614, "creation_date": 1465423161, "last_edit_date": 1526368614, "question_id": 37713691, "link": "https://stackoverflow.com/questions/37713691/python-fitting-exponential-decay-curve-from-recorded-values", "title": "Python - Fitting exponential decay curve from recorded values", "body": "<p>I'm aware that there are threads pertaining to this, but i'm confused to where I want to I fit my data to the fit.</p>\n\n<p>My data is imported and plotted as such.</p>\n\n<pre><code>import matplotlib.pyplot as plt\n%matplotlib inline\nimport pylab as plb\nimport numpy as np\nimport scipy as sp\nimport csv\n\nFreqTime1 = []\nDecayCount1 = []\nwith open('Half_Life.csv', 'r') as f:\n    reader = csv.reader(f, delimiter=',')\n    for row in reader:\n        FreqTime1.append(row[0])\n        DecayCount1.append(row[3])\n\nFreqTime1 = np.array(FreqTime1) \nDecayCount1 = np.array(DecayCount1)\n\nfig1 = plt.figure(figsize=(15,6))\nax1 = fig1.add_subplot(111)\nax1.plot(FreqTime1,DecayCount1, \".\", label = 'Run 1')\nax1.set_xlabel('Time (sec)')\nax1.set_ylabel('Count')\nplt.legend()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/2AqC3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2AqC3.png\" alt=\"enter image description here\"></a></p>\n\n<p>Problem is, i'm having difficulty setting up general exponential decay, in which I'm not sure how compute the parameter values from the data set.</p>\n\n<p>If possible as well, I'm then wanting to have the equation of the fitted decay equation to be displayed with the graph. But that can be easily applied if a fit is able to be produced.</p>\n\n<p><strong>Edit</strong> -------------------------------------------------------------</p>\n\n<p>So when using the fitting function that Stanely R mentioned</p>\n\n<pre><code>def model_func(x, a, k, b):\n    return a * np.exp(-k*x) + b\n\nx = FreqTime1\ny = DecayCount1\n\n\np0 = (1.,1.e-5,1.) \nopt, pcov = curve_fit(model_func, x, y, p0)\na, k, b = opt\n</code></pre>\n\n<p>I'm returned with this error message</p>\n\n<p><code>TypeError: ufunc 'multiply' did not contain a loop with signature matching types dtype('S32') dtype('S32') dtype('S32')</code></p>\n\n<p>Any idea on how to resolve this?</p>\n"}, {"tags": ["python", "json", "pandas"], "comments": [{"owner": {"reputation": 426, "user_id": 6389000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c5b15fe4f79c8b0ca80e3e921d20e?s=128&d=identicon&r=PG&f=1", "display_name": "shane", "link": "https://stackoverflow.com/users/6389000/shane"}, "edited": false, "score": 0, "creation_date": 1465423391, "post_id": 37713642, "comment_id": 62901010, "body": "Try running <code>data[1].keys()</code> and <code>data[1][&#39;message&#39;].keys()</code>."}, {"owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "reply_to_user": {"reputation": 426, "user_id": 6389000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c5b15fe4f79c8b0ca80e3e921d20e?s=128&d=identicon&r=PG&f=1", "display_name": "shane", "link": "https://stackoverflow.com/users/6389000/shane"}, "edited": false, "score": 0, "creation_date": 1465423466, "post_id": 37713642, "comment_id": 62901035, "body": "data[1].keys() gives [u&#39;timestamp&#39;, u&#39;message&#39;, u&#39;level&#39;] but data[1][&#39;message&#39;].keys gives AttributeError: &#39;unicode&#39; object has no attribute &#39;keys&#39;"}, {"owner": {"reputation": 651, "user_id": 2240644, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/345dbf158e9e74657f42a7e06f06c5fd?s=128&d=identicon&r=PG", "display_name": "hdiogenes", "link": "https://stackoverflow.com/users/2240644/hdiogenes"}, "edited": false, "score": 0, "creation_date": 1465425612, "post_id": 37713642, "comment_id": 62901758, "body": "Your first example is not JSON, but a Python dictionary converted to a string. It&#39;s also wrong, cause you&#39;re missing a comma after the two }}&#39;s at the 2nd line. You should also include a full (working) code example of what you&#39;re trying to do, because what you&#39;re saying is the error doesn&#39;t match your data."}], "answers": [{"tags": [], "owner": {"reputation": 1766, "user_id": 6320411, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6683418aa1edf3de02e886f07ebecf26?s=128&d=identicon&r=PG&f=1", "display_name": "Neill Herbst", "link": "https://stackoverflow.com/users/6320411/neill-herbst"}, "is_accepted": false, "score": 0, "last_activity_date": 1465470435, "creation_date": 1465470435, "answer_id": 37724241, "question_id": 37713642, "link": "https://stackoverflow.com/questions/37713642/reading-a-json-in-python-and-converting-it-to-dataframe/37724241#37724241", "title": "Reading a JSON in python and converting it to dataframe", "body": "<p>You can use <code>pandas.read_json</code> this will automatically read the file into a DataFrame. </p>\n\n<pre><code>import pandas as pd\n\ndata = pd.read_json('test.json')\n</code></pre>\n\n<p>but the data you show in the question is not in valid JSON format. For the correct format please see this <a href=\"http://www.w3schools.com/json/\" rel=\"nofollow\">example</a>. To check if your file is in valid JSON format you can also use this <a href=\"http://jsonlint.com/\" rel=\"nofollow\">validator</a>. The valid JSON format of your data would look like this:</p>\n\n<pre><code>[{\n    \"level\": \"INFO\",\n    \"message\": [{\n        \"method\": \"someMethod\",\n        \"params\": [{\n            \"frameId\": \"9.6\",\n            \"loaderId\": \"3.2\",\n            \"requestId\": \"4.6\"\n        }]\n    }],\n    \"timestamp\": \"654789 L\"\n}]\n</code></pre>\n"}], "owner": {"reputation": 1755, "user_id": 5059335, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/b0ca397cbec3c1264f0f22c6cab4e280?s=128&d=identicon&r=PG&f=1", "display_name": "haimen", "link": "https://stackoverflow.com/users/5059335/haimen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1465470435, "creation_date": 1465422969, "question_id": 37713642, "link": "https://stackoverflow.com/questions/37713642/reading-a-json-in-python-and-converting-it-to-dataframe", "title": "Reading a JSON in python and converting it to dataframe", "body": "<p>Suppose I have a JSON file as follows,</p>\n\n<pre><code>{u'level': u'INFO',\n u'message': {\"method\":\"someMethod\",\"params\":{\"frameId\":\"9.6\",\"loaderId\":\"3.2\",\"requestId\":\"4.6\"}}\nu'timestamp': 654789L}\n</code></pre>\n\n<p>For parsing this into dataframe, for the first level, I am able to do <code>data[1]['level']</code>, <code>data[1]['message']</code>, <code>data[1]['timestamp']</code>. But I want to go deeper into the message and I am trying, <code>data[1]['message']['method']</code> or <code>data[1]['message']['params']</code> which is throwing me error. </p>\n\n<pre><code>TypeError: string indices must be integers\n</code></pre>\n\n<p>There is a difference in quotes between the first level and second levels where the first level has single quotes and second level has double quotes. Can anybody tell me how to reach to the method or params parameter here? Also the best way to parse everything into a dataframe?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "python-3.x", "tkinter", "combobox"], "answers": [{"tags": [], "owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "is_accepted": false, "score": 4, "last_activity_date": 1535466981, "last_edit_date": 1535466981, "creation_date": 1465432308, "answer_id": 37715100, "question_id": 37713616, "link": "https://stackoverflow.com/questions/37713616/how-do-i-get-the-index-of-the-selected-item-in-a-combobox/37715100#37715100", "title": "How do I get the index of the selected item in a Combobox?", "body": "<p>You can use the <a href=\"http://infohost.nmt.edu/tcc/help/pubs/tkinter/web/ttk-Combobox.html\" rel=\"nofollow noreferrer\"><code>current</code></a> method. Here's an example:</p>\n\n<pre><code>import tkinter as tk\nfrom tkinter import ttk\n\n\nr = tk.Tk()\n\nc = ttk.Combobox(r)\nc[\"values\"] = [\"first\", \"second\", \"third\"]\nc.bind(\"&lt;&lt;ComboboxSelected&gt;&gt;\", lambda _ : print(c.current()))\nc.current(0)\nc.pack()\n\nr.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 6442665, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7a0c120f0572d1710d0be0f634f3844?s=128&d=identicon&r=PG&f=1", "display_name": "DarrellB", "link": "https://stackoverflow.com/users/6442665/darrellb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4854, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1535467424, "creation_date": 1465422864, "last_edit_date": 1535467424, "question_id": 37713616, "link": "https://stackoverflow.com/questions/37713616/how-do-i-get-the-index-of-the-selected-item-in-a-combobox", "title": "How do I get the index of the selected item in a Combobox?", "body": "<p>In a <code>Combobox</code>, I would need to get not the contents of the selected item but the index (or position) of the line or selected item.</p>\n\n<p>How can I do that?</p>\n"}, {"tags": ["python", "nuitka"], "comments": [{"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1470069136, "post_id": 37713589, "comment_id": 64785375, "body": "I personally had this problem on Mac OS X, fresh install via pip. The build is also extremely slow"}, {"owner": {"reputation": 614, "user_id": 128517, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RkZfR.jpg?s=128&g=1", "display_name": "hecvd", "link": "https://stackoverflow.com/users/128517/hecvd"}, "edited": false, "score": 0, "creation_date": 1470263987, "post_id": 37713589, "comment_id": 64883312, "body": "Maybe try setting the option --recurse-directory ?"}, {"owner": {"reputation": 924, "user_id": 1088305, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/92b228e35b8bd517411182ce3ba379e4?s=128&d=identicon&r=PG", "display_name": "Mark Horvath", "link": "https://stackoverflow.com/users/1088305/mark-horvath"}, "edited": false, "score": 0, "creation_date": 1470341881, "post_id": 37713589, "comment_id": 64924825, "body": "Are you using virtualenv or any import mechanism where the imported moduels are not on PYTHONPATH?"}, {"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "reply_to_user": {"reputation": 614, "user_id": 128517, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/RkZfR.jpg?s=128&g=1", "display_name": "hecvd", "link": "https://stackoverflow.com/users/128517/hecvd"}, "edited": false, "score": 0, "creation_date": 1470416194, "post_id": 37713589, "comment_id": 64958876, "body": "@Hector all on PYTHONPATH. no virtualenv"}, {"owner": {"reputation": 12697, "user_id": 4994021, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/159a6a0bd0b0b5ab92e0dc66d936cc7c?s=128&d=identicon&r=PG&f=1", "display_name": "Peter Brittain", "link": "https://stackoverflow.com/users/4994021/peter-brittain"}, "edited": false, "score": 0, "creation_date": 1470521309, "post_id": 37713589, "comment_id": 64986467, "body": "Looks like <a href=\"https://www.reddit.com/r/programming/comments/2psa19/nuitka_a_python_compiler/\" rel=\"nofollow noreferrer\">numpy is problematic</a>...  Is it just numpy or do other, simpler 3rd party packages have this issue?"}], "answers": [{"comments": [{"owner": {"reputation": 6465, "user_id": 1459669, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/WW5ah.jpg?s=128&g=1", "display_name": "no\u0265\u0287\u028e\u0500\u028ez\u0250\u0279\u0186", "link": "https://stackoverflow.com/users/1459669/no%c9%a5%ca%87%ca%8e%d4%80%ca%8ez%c9%90%c9%b9%c6%86"}, "edited": false, "score": 0, "creation_date": 1470069045, "post_id": 38305187, "comment_id": 64785318, "body": "I didn&#39;t use conditional imports and received this error. I&#39;m considering placing a bounty on this question now."}], "tags": [], "owner": {"reputation": 524, "user_id": 5996838, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/2f68d8fd98fd2a42b108db9974f48800?s=128&d=identicon&r=PG", "display_name": "ChaoticTwist", "link": "https://stackoverflow.com/users/5996838/chaotictwist"}, "is_accepted": false, "score": 5, "last_activity_date": 1468234668, "creation_date": 1468234668, "answer_id": 38305187, "question_id": 37713589, "link": "https://stackoverflow.com/questions/37713589/nuitka-error-cannot-find-in-package-as-absolute-import/38305187#38305187", "title": "Nuitka error Cannot find &#39; &#39; in package &#39; &#39; as absolute import", "body": "<p>I don't know about your particular use case but I also faced similar Cannot find '' in Package errors when using nuitka.</p>\n\n<p>I was using sqlalchemy and had a similar issue with <code>configparser</code>.<br>\nAfter about a day of debugging I found out that Nuitka trips up with SWIG (Dynamically Loaded shared objects). \nWhat it means basically is, some programs/modules try to increase compatibility by using conditional imports.<br>\nFor eg:</p>\n\n<pre><code>If python_version==3.5:\n    import thislibrary\nelse:\n    import thatlibrary\n</code></pre>\n\n<p>specifically the <code>configparser</code> library is named <code>configparser</code> in python3 and <code>ConfigParser</code> in python2.<br>\nSo what basically is happening is that nuitka is trying to import python 3 stuff when you clearly are using python 2.  </p>\n\n<p>For me the fix was to modify the source code of sqlalchemy and change the <code>if else</code> construct to:   </p>\n\n<pre><code>import thatlibrary   \n</code></pre>\n\n<p>You can find more information in this <a href=\"http://www.tsheffler.com/blog/2015/01/05/nuitka-compiler-for-python/#Issues_with_Dynamically_Loaded_shared_objects_SWIG\" rel=\"noreferrer\">Guide</a>\n written by Tom Sheffler </p>\n"}, {"tags": [], "owner": {"reputation": 5606, "user_id": 5096868, "user_type": "registered", "accept_rate": 18, "profile_image": "https://lh3.googleusercontent.com/-8Np8hlUC0dk/AAAAAAAAAAI/AAAAAAAAAA0/wG7k8Fr7Ti0/photo.jpg?sz=128", "display_name": "Yogesh Rathi", "link": "https://stackoverflow.com/users/5096868/yogesh-rathi"}, "is_accepted": false, "score": 2, "last_activity_date": 1470640164, "creation_date": 1470640164, "answer_id": 38823170, "question_id": 37713589, "link": "https://stackoverflow.com/questions/37713589/nuitka-error-cannot-find-in-package-as-absolute-import/38823170#38823170", "title": "Nuitka error Cannot find &#39; &#39; in package &#39; &#39; as absolute import", "body": "<p><a href=\"http://nuitka.net/posts/nuitka-release-0520.html\" rel=\"nofollow\">Official answer from Nuitaka.</a></p>\n\n<p>What problem you facing same like another problem one user facing <code>package 'matplotlib' as absolute import.</code> this problem, then there nuitaka given comments below check if it useful for below comment.</p>\n\n<blockquote>\n  <p>I think you might be using 32 bits Python on Windows and hit the 2GB RAM boundary. Use 64 bits for better luck. Incidentally I am working on scalability improvements for the next releases which ought to make this not happen. For now Nuitka loads all say 1000 modules into RAM and compiles them all globally. Needs a lot of RAM.</p>\n</blockquote>\n"}], "owner": {"reputation": 2511, "user_id": 3015268, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/K2RwN.jpg?s=128&g=1", "display_name": "bakalolo", "link": "https://stackoverflow.com/users/3015268/bakalolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6048, "favorite_count": 3, "answer_count": 2, "score": 15, "last_activity_date": 1470640164, "creation_date": 1465422752, "last_edit_date": 1470068940, "question_id": 37713589, "link": "https://stackoverflow.com/questions/37713589/nuitka-error-cannot-find-in-package-as-absolute-import", "title": "Nuitka error Cannot find &#39; &#39; in package &#39; &#39; as absolute import", "body": "<p>I'm trying to use the nuitka tool to turn my python program into executable on ubuntu.  It works fine if the program doesn't have any import statements but breaks when I use it on a program that imports something e.g. </p>\n\n<p>test.py</p>\n\n<pre><code>import numpy\n\nprint \"hello, world.\"\n</code></pre>\n\n<p>type this on commandline</p>\n\n<pre><code>nuitka --recurse-all --python-version=2.7 test.py\n</code></pre>\n\n<p>and gives me these errors</p>\n\n<pre><code>Nuitka:WARNING:/usr/lib/python2.7/dist-packages/numpy/numarray/functions.py:45: Cannot find 'copyreg' in package 'numpy.numarray' as absolute import.\nNuitka:WARNING:/usr/lib/python2.7/dist-packages/numpy/distutils/npy_pkg_config.py:11: Cannot find 'configparser' in package 'numpy.distutils' as absolute import.\nNuitka:WARNING:/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py:1765: Cannot find 'Numeric' in package 'numpy.distutils' as absolute import.\nNuitka:WARNING:/usr/lib/python2.7/dist-packages/numpy/distutils/system_info.py:1770: Cannot find 'numarray' in package 'numpy.distutils' as absolute import.\nNuitka:WARNING:/usr/lib/python2.7/dist-packages/numpy/f2py/diagnose.py:48: Cannot find 'numpy_distutils' in package 'numpy.f2py' as absolute import.\nNuitka:WARNING:/usr/lib/python2.7/dist-packages/numpy/f2py/diagnose.py:87: Cannot find 'numpy_distutils.command.build_flib' in package 'numpy.f2py' as absolute import.\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "tkinter"], "comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 1, "creation_date": 1465427279, "post_id": 37713588, "comment_id": 62902288, "body": "That is the test app that opens when running the <code>tkinter.py</code> module as the main, it means that <code>mtTkinter.py</code> is not the installation package but the module itself, just import and use it from your program, it doesn&#39;t look like it needs to be installed."}, {"owner": {"reputation": 93, "user_id": 6441779, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lmIturEDNII/AAAAAAAAAAI/AAAAAAAAABw/Kq5Zl9sTzvo/photo.jpg?sz=128", "display_name": "SolarPixelGaming", "link": "https://stackoverflow.com/users/6441779/solarpixelgaming"}, "reply_to_user": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 0, "creation_date": 1465431726, "post_id": 37713588, "comment_id": 62903616, "body": "thank you!!! The tutorial I followed (not specifically for mtTkinter) and it said to do it that way. There were now tutorials for mtTkinter alone. Thank you @TadhgMcDonald-Jensen"}], "answers": [{"tags": [], "owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "is_accepted": false, "score": 1, "last_activity_date": 1465432457, "creation_date": 1465432457, "answer_id": 37715116, "question_id": 37713588, "link": "https://stackoverflow.com/questions/37713588/i-have-trouble-installing-mttkinter/37715116#37715116", "title": "I have trouble installing mtTkinter?", "body": "<p>Most tutorials that indicate to run:</p>\n\n<pre><code>python setup.py install\n</code></pre>\n\n<p>Will use the specific filename <code>setup.py</code>, usually if there is no <code>setup.py</code> the file is usable as it is or needs to be installed manually, in this case the <code>mtTkinter.py</code> file has no need for installation.</p>\n\n<p>The reason you were seeing the startup window is that that is the test app when you run <code>tkinter</code> as the main program (which is what you did) you could see the same popup from the original tkinter by running:</p>\n\n<pre><code>python -m Tkinter\n</code></pre>\n\n<p>(The <code>-m</code> indicates to run a module)  Obviously tkinter is not an installation package and it actually ignored the <code>install</code> argument entirely, it just went to the test app.</p>\n"}], "owner": {"reputation": 93, "user_id": 6441779, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lmIturEDNII/AAAAAAAAAAI/AAAAAAAAABw/Kq5Zl9sTzvo/photo.jpg?sz=128", "display_name": "SolarPixelGaming", "link": "https://stackoverflow.com/users/6441779/solarpixelgaming"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 823, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1465432457, "creation_date": 1465422752, "last_edit_date": 1465423491, "question_id": 37713588, "link": "https://stackoverflow.com/questions/37713588/i-have-trouble-installing-mttkinter", "title": "I have trouble installing mtTkinter?", "body": "<p>This window shows up when I attempt to install mtTkinter with \"python mtTkinter.py install\" through command prompt:</p>\n\n<p><a href=\"https://i.stack.imgur.com/6hogO.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6hogO.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>This is the command prompt log from the install:</p>\n\n<p><a href=\"https://i.stack.imgur.com/hE6hA.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hE6hA.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>(Highlighter and added/blue pen area is the log)</p>\n\n<p>I am working on a clicker game, like cookie clicker, and Tkinter tends to freeze when using threading. I found mtTkinter, which is multithreading safe.</p>\n\n<p>So I typed in \"python mtTkinter.py install\" into command prompt. There is no error, it just does not install. The window that opened had the two buttons, [Click Me!] (which gets square brackets added to it over and over) and then QUIT. The Click Me button does nothing, and the quit button closes it.\nI am running Windows Vista Python 2.7.11. What am I doing wrong?</p>\n\n<p>Keep in mind I am a beginner at python and computer science, so please be simple with your answers.</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1465422843, "post_id": 37713581, "comment_id": 62900742, "body": "Do you want this to happen for every time it&#39;s imported, or just the first time per interpreter?"}, {"owner": {"reputation": 644, "user_id": 3689166, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8148710486ab58ba20f23d4d6d736ae5?s=128&d=identicon&r=PG&f=1", "display_name": "limbo", "link": "https://stackoverflow.com/users/3689166/limbo"}, "edited": false, "score": 0, "creation_date": 1465423044, "post_id": 37713581, "comment_id": 62900844, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/5027352/how-to-test-if-one-python-module-has-been-imported\">this</a>"}, {"owner": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "reply_to_user": {"reputation": 644, "user_id": 3689166, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8148710486ab58ba20f23d4d6d736ae5?s=128&d=identicon&r=PG&f=1", "display_name": "limbo", "link": "https://stackoverflow.com/users/3689166/limbo"}, "edited": false, "score": 1, "creation_date": 1465423162, "post_id": 37713581, "comment_id": 62900908, "body": "@limbo that question isn&#39;t from the right perspective; I want it from the module&#39;s perspective."}, {"owner": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1465423248, "post_id": 37713581, "comment_id": 62900947, "body": "@user2357112 I&#39;m wanting to modify an object that exists in the module for the case that&#39;s it&#39;s imported; and only modify it once."}, {"owner": {"reputation": 16373, "user_id": 9908, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aa969fa6c106368e269620f1a90652a8?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/9908/david"}, "edited": false, "score": 0, "creation_date": 1465423276, "post_id": 37713581, "comment_id": 62900958, "body": "Top level logic runs once on import.  Various stdlib packages have convenience helpers that are generated on import.  I believe re, rand, and os do this."}, {"owner": {"reputation": 16373, "user_id": 9908, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aa969fa6c106368e269620f1a90652a8?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/9908/david"}, "edited": false, "score": 0, "creation_date": 1465423415, "post_id": 37713581, "comment_id": 62901015, "body": "Additionally across the spectrum (stdlib and public) the try...except pattern is used to conditionally import libraries (eg cjson, easy json, and then falling back to the native implementation).   All run once on first import."}], "answers": [{"comments": [{"owner": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "edited": false, "score": 0, "creation_date": 1465424173, "post_id": 37713787, "comment_id": 62901305, "body": "Thank you for your answer; I don&#39;t believe I was specific enough in my question. I&#39;ve since amended it and hopefully am being more thorough with what I&#39;m looking for."}, {"owner": {"reputation": 16373, "user_id": 9908, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aa969fa6c106368e269620f1a90652a8?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/9908/david"}, "reply_to_user": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "edited": false, "score": 0, "creation_date": 1465424285, "post_id": 37713787, "comment_id": 62901339, "body": "@jacob That&#39;s exactly how Python does it, especially for testing and in situations like unit-tests or applications that implement __main__ or am I missing something else in your question?"}, {"owner": {"reputation": 16373, "user_id": 9908, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aa969fa6c106368e269620f1a90652a8?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/9908/david"}, "reply_to_user": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "edited": false, "score": 0, "creation_date": 1465424523, "post_id": 37713787, "comment_id": 62901423, "body": "@jacob if it seems stupid but it works and someone can understand what it does, it might still be stupid but it works."}], "tags": [], "owner": {"reputation": 16373, "user_id": 9908, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aa969fa6c106368e269620f1a90652a8?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/9908/david"}, "is_accepted": true, "score": 1, "last_activity_date": 1465423743, "creation_date": 1465423743, "answer_id": 37713787, "question_id": 37713581, "link": "https://stackoverflow.com/questions/37713581/check-if-my-module-was-imported/37713787#37713787", "title": "Check if my module was imported", "body": "<p>Python run's top level logic once on import.  Examples can be found in the stdlib hashlib implementation here (github is down at moment).  <a href=\"https://fossies.org/dox/Python-3.5.1/hashlib_8py_source.html#name=l00131\" rel=\"nofollow\">https://fossies.org/dox/Python-3.5.1/hashlib_8py_source.html#name=l00131</a></p>\n\n<p>Notice the use of <code>try...except</code> for conditional imports and the top level lines starting at line #57</p>\n\n<pre><code>57 __always_supported = ('md5', 'sha1', 'sha224', 'sha256', 'sha384', 'sha512')\n58 \n59 algorithms_guaranteed = set(__always_supported)\n60 algorithms_available = set(__always_supported)\n</code></pre>\n\n<p>Those are created once on import and not subsequent calls.   Part of the reason why it works this way is that a module is an object and is stored in <a href=\"https://docs.python.org/2/library/sys.html#sys.modules\" rel=\"nofollow\">sys.modules - Py2 but same for Py3</a>.</p>\n\n<p>Edit: To clarify you can use modules like <a href=\"https://en.wikipedia.org/wiki/Singleton_pattern\" rel=\"nofollow\">singletons</a> but it is the path to madness as it can make unit-testing and debugging painful if not impossible.</p>\n"}], "owner": {"reputation": 3625, "user_id": 249552, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/kQlfx.png?s=128&g=1", "display_name": "jacob", "link": "https://stackoverflow.com/users/249552/jacob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 37713787, "answer_count": 1, "score": 1, "last_activity_date": 1465424186, "creation_date": 1465422703, "last_edit_date": 1465424186, "question_id": 37713581, "link": "https://stackoverflow.com/questions/37713581/check-if-my-module-was-imported", "title": "Check if my module was imported", "body": "<p>I'm wanting to trigger a function inside the module for when the module <strong>itself</strong> is imported;</p>\n\n<p>From what I've tested it seems that I can just check if <code>__name__</code> isn't <code>__main__</code> and use that as a solution; but I was wondering if there was a better way with some sort of import hook?</p>\n\n<pre><code>if __name__ != '__main__':\n    # I was imported\n    ...\n</code></pre>\n\n<p>I'm wanting to modify an object that exists in the module for this specific case and only have it modified once.</p>\n\n<p>I've had success with this; but am wondering if there's another way to approach this.</p>\n\n<pre><code>if __name__ == '__main__':\n    example = 0\nelse:\n    example = 1\n</code></pre>\n"}, {"tags": ["python", "unix", "file-descriptor", "python-os"], "comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1465423373, "post_id": 37713514, "comment_id": 62901003, "body": "You are using Python 2 by the looks of it.  See <code>close_fds</code> parameter to <code>Popen</code>.  The default changed in 3.2 for these reasons."}], "answers": [{"comments": [{"owner": {"reputation": 427, "user_id": 3586683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/48c8dc250e11dacec949790ca7d07148?s=128&d=identicon&r=PG&f=1", "display_name": "chmod 777 j", "link": "https://stackoverflow.com/users/3586683/chmod-777-j"}, "edited": false, "score": 0, "creation_date": 1465423149, "post_id": 37713654, "comment_id": 62900903, "body": "Thanks John.  Your answer was very enlightening."}], "tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": true, "score": 6, "last_activity_date": 1465423018, "creation_date": 1465423018, "answer_id": 37713654, "question_id": 37713514, "link": "https://stackoverflow.com/questions/37713514/whats-going-on-with-closed-file-descriptors/37713654#37713654", "title": "What&#39;s going on with closed file descriptors?", "body": "<p>Each process has its own set of file descriptors. Closing an fd in one program will not affect another program. This is why every program can use the same fd numbers for stdin (0), stdout (1), and stderr (2), and why shell scripts can usually just open fd 3 without having to check if it's available.</p>\n\n<p>File descriptors are inherited by child processes, unless you explicitly prevent it by setting the close-on-exec flag. By default, without that flag, a child process will get copies of the parent's file descriptors.</p>\n"}], "owner": {"reputation": 427, "user_id": 3586683, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/48c8dc250e11dacec949790ca7d07148?s=128&d=identicon&r=PG&f=1", "display_name": "chmod 777 j", "link": "https://stackoverflow.com/users/3586683/chmod-777-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 0, "accepted_answer_id": 37713654, "answer_count": 1, "score": 4, "last_activity_date": 1465423018, "creation_date": 1465422422, "question_id": 37713514, "link": "https://stackoverflow.com/questions/37713514/whats-going-on-with-closed-file-descriptors", "title": "What&#39;s going on with closed file descriptors?", "body": "<p>In the example code below we open a file descriptor to sandbox.log, provide it as stdout to a subprocess, and then close the file descriptor, yet the subprocess can still write to the file.  Is subprocess.Popen duping the file descriptor internally?  Is it safe to close a file descriptor after passing it to a subprocess?</p>\n\n<pre><code>import subprocess\nimport os\nimport time\n\n\nprint 'create or clear sandbox.log'\nsubprocess.call('touch sandbox.log', shell=True)\nsubprocess.call('echo \"\" &gt; sandbox.log', shell=True)\n\nprint 'open the file descriptor'\nfd = os.open('sandbox.log', os.O_WRONLY)\n\ncommand = 'sleep 10 &amp;&amp; echo \"hello world\"'\nprint 'run the command'\np = subprocess.Popen(command, stdout=fd, stderr=subprocess.STDOUT, shell=True)\n\nos.close(fd)\n\ntry:\n    os.close(fd)\nexcept OSError:\n    print 'fd is already closed'\nelse:\n    print 'fd takes some time to close'\n\nif p.poll() is None:\n    print 'p isnt finished, but fd is closed'\n\np.wait()\nprint 'p just finished'\n\nwith open('sandbox.log') as f:\n    if any('hello world' in line for line in f):\n        raise Exception(\"There's text in sandbox.log. Whats going on?\")\n</code></pre>\n\n<p>For reference, I got the following output running the above code as a script:</p>\n\n<pre><code>% python test_close_fd.py\ncreate or clear sandbox.log\nopen the file descriptor\nrun the command\nfd is already closed\np isnt finished, but fd is closed\np just finished\nTraceback (most recent call last):\n  File \"test_close_fd.py\", line 34, in &lt;module&gt;\n    raise Exception(\"There's text in sandbox.log. Whats going on?\")\nException: There's text in sandbox.log. Whats going on?\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 14291, "user_id": 545424, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/6a4ac5213b7eeab93dc09b263effcfcf?s=128&d=identicon&r=PG", "display_name": "user545424", "link": "https://stackoverflow.com/users/545424/user545424"}, "edited": false, "score": 0, "creation_date": 1465423682, "post_id": 37713484, "comment_id": 62901124, "body": "I doubt this is going to work. <code>np.savetxt</code> is meant to be loaded by <code>np.loadtxt</code> and it&#39;s not in general possible to load an unknown data type. Why are you adding the same string to the first column of every row?"}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 5203407, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-VLFuS2mpRWw/AAAAAAAAAAI/AAAAAAAAAEA/3XSHoR865vI/photo.jpg?sz=128", "display_name": "Kostas Belivanis", "link": "https://stackoverflow.com/users/5203407/kostas-belivanis"}, "edited": false, "score": 0, "creation_date": 1465477290, "post_id": 37713961, "comment_id": 62924756, "body": "This was very helpful. Thank you very much!"}, {"owner": {"reputation": 1453, "user_id": 4932791, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/P5G5H.jpg?s=128&g=1", "display_name": "kRazzy R", "link": "https://stackoverflow.com/users/4932791/krazzy-r"}, "edited": false, "score": 0, "creation_date": 1518140339, "post_id": 37713961, "comment_id": 84393760, "body": "fmt=&#39;%5s&#39;  what is that?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 1453, "user_id": 4932791, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/P5G5H.jpg?s=128&g=1", "display_name": "kRazzy R", "link": "https://stackoverflow.com/users/4932791/krazzy-r"}, "edited": false, "score": 1, "creation_date": 1518142490, "post_id": 37713961, "comment_id": 84394250, "body": "@kRazzyR, &#39;%5s&#39; is a normal Python string format, used for example in <code>&#39;%5s&#39;%12</code>."}, {"owner": {"reputation": 1453, "user_id": 4932791, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/P5G5H.jpg?s=128&g=1", "display_name": "kRazzy R", "link": "https://stackoverflow.com/users/4932791/krazzy-r"}, "edited": false, "score": 0, "creation_date": 1518145851, "post_id": 37713961, "comment_id": 84395060, "body": "Could you kindly help me out here : <a href=\"https://stackoverflow.com/questions/48698167/unable-to-do-np-savetxt-on-save-newly-appended-string-column-to-numpy-array\" title=\"unable to do np savetxt on save newly appended string column to numpy array\">stackoverflow.com/questions/48698167/&hellip;</a> @hpaulj"}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 12, "last_activity_date": 1465430439, "last_edit_date": 1465430439, "creation_date": 1465424730, "answer_id": 37713961, "question_id": 37713484, "link": "https://stackoverflow.com/questions/37713484/write-object-array-to-txt-file/37713961#37713961", "title": "Write object array to .txt file", "body": "<p>More of the error message:</p>\n\n<pre><code>-&gt; 1162                                     % (str(X.dtype), format))\n   1163         if len(footer) &gt; 0:\n   1164             footer = footer.replace('\\n', '\\n' + comments)\n\nTypeError: Mismatch between array dtype ('object') and format specifier ('%.18e,%.18e,%.18e,%.18e,%.18e,%.18e,%.18e,%.18e,%.18e')\n</code></pre>\n\n<p><code>savetxt</code> is iterating over the rows of <code>rsf</code>, and for each trying to create a string that it can write to the file.  Without <code>fmt</code> specification from you it tries a default format repeated by the number of columns.  That's the <code>format specifier</code>.</p>\n\n<p>This is a basic Python string formatting issue. </p>\n\n<pre><code>In [264]: row=rsf[1,:]\n\nIn [265]: row\nOut[265]: array(['FREQ', 8, 9, 10, 11, 12, 13, 14, 15], dtype=object)\n\nIn [266]: '%s, %d, %d, %d, %d, %d, %d, %d, %d'%tuple(row)\nOut[266]: 'FREQ, 8, 9, 10, 11, 12, 13, 14, 15'\n</code></pre>\n\n<p>so you need to call <code>savetxt</code> with something like:</p>\n\n<pre><code>In [267]: fmt='%s, %d, %d, %d, %d, %d, %d, %d, %d'\n\nIn [268]: np.savetxt('test.txt',rsf,fmt=fmt)\n\nIn [269]: cat test.txt\nFREQ, 0, 1, 2, 3, 4, 5, 6, 7\nFREQ, 8, 9, 10, 11, 12, 13, 14, 15\nFREQ, 16, 17, 18, 19, 20, 21, 22, 23\nFREQ, 24, 25, 26, 27, 28, 29, 30, 31\n...\n</code></pre>\n\n<p>or you could simplify the format with the generic '%s'</p>\n\n<pre><code>In [270]: np.savetxt('test.txt',rsf,fmt='%5s',delimiter=',')\n\nIn [271]: cat test.txt\n FREQ,    0,    1,    2,    3,    4,    5,    6,    7\n FREQ,    8,    9,   10,   11,   12,   13,   14,   15\n FREQ,   16,   17,   18,   19,   20,   21,   22,   23\n FREQ,   24,   25,   26,   27,   28,   29,   30,   31\n FREQ,   32,   33,   34,   35,   36,   37,   38,   39\n</code></pre>\n"}], "owner": {"reputation": 327, "user_id": 5203407, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-VLFuS2mpRWw/AAAAAAAAAAI/AAAAAAAAAEA/3XSHoR865vI/photo.jpg?sz=128", "display_name": "Kostas Belivanis", "link": "https://stackoverflow.com/users/5203407/kostas-belivanis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18758, "favorite_count": 2, "accepted_answer_id": 37713961, "answer_count": 1, "score": 7, "last_activity_date": 1465430439, "creation_date": 1465422326, "last_edit_date": 1465422487, "question_id": 37713484, "link": "https://stackoverflow.com/questions/37713484/write-object-array-to-txt-file", "title": "Write object array to .txt file", "body": "<p>When I do</p>\n\n<pre><code>k=12\n\nrsf = np.zeros((int(k), 9), dtype='object')\n\nfor i in range(0, int(k)):\n    rsf[i, 0] = \"FREQ\"\n    for j in range(1, 9):\n        rsf[i, j] = sampled[8*i+j-1, 0]\n</code></pre>\n\n<p>and then try to write it by</p>\n\n<pre><code>np.savetxt('test.txt', rsf, delimiter=',')\n</code></pre>\n\n<p>I get an error Mismatch between array dtype ('object') and format specifier</p>\n\n<p>Any help on how I can overcome this issue? (And maybe append to arrays of non equal sizes?)</p>\n"}, {"tags": ["python", "json", "pandas", "nested"], "comments": [{"owner": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1465848473, "post_id": 37713329, "comment_id": 63062575, "body": "Unfortunately questions about whether a high-level approach to a problem is good/correct/possible/etc are unfortunately not considered on-topic here. That said, I think the dict-of-dicts approach <i>does</i> look promising. You should use your other question to resolve the remaining details, but remember to update the error messages you&#39;re receiving <i>as well as</i> the code you&#39;re using, so they&#39;re in sync (otherwise your problems aren&#39;t reproducible)."}, {"owner": {"reputation": 423, "user_id": 6195734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/065b9cace001a0f6f8e350d58d0f17ce?s=128&d=identicon&r=PG&f=1", "display_name": "spaine", "link": "https://stackoverflow.com/users/6195734/spaine"}, "reply_to_user": {"reputation": 14050, "user_id": 1858225, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/8afcf8a38024eb5b17c0b0b58ff96d79?s=128&d=identicon&r=PG", "display_name": "Kyle Strand", "link": "https://stackoverflow.com/users/1858225/kyle-strand"}, "edited": false, "score": 0, "creation_date": 1465926835, "post_id": 37713329, "comment_id": 63102113, "body": "I&#39;ve also tried adapting this answer too:  <a href=\"http://stackoverflow.com/questions/24374062/pandas-groupby-to-nested-json\" title=\"pandas groupby to nested json\">stackoverflow.com/questions/24374062/&hellip;</a> , but still no dice."}], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 6195734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/065b9cace001a0f6f8e350d58d0f17ce?s=128&d=identicon&r=PG&f=1", "display_name": "spaine", "link": "https://stackoverflow.com/users/6195734/spaine"}, "edited": false, "score": 0, "creation_date": 1465940453, "post_id": 37822561, "comment_id": 63108857, "body": "Note that it was necessary to upgrade from pandas 0.16.1 to 0.18.1 in order for this code to work."}], "tags": [], "owner": {"reputation": 423, "user_id": 6195734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/065b9cace001a0f6f8e350d58d0f17ce?s=128&d=identicon&r=PG&f=1", "display_name": "spaine", "link": "https://stackoverflow.com/users/6195734/spaine"}, "is_accepted": false, "score": 0, "last_activity_date": 1466090878, "last_edit_date": 1466090878, "creation_date": 1465940306, "answer_id": 37822561, "question_id": 37713329, "link": "https://stackoverflow.com/questions/37713329/how-to-build-a-json-file-with-nested-records-from-a-flat-data-table/37822561#37822561", "title": "How to build a JSON file with nested records from a flat data table?", "body": "<p>With some input from @root I used a different tack and came up with the following code, which seems to get most of the way there:</p>\n\n<pre><code>import pandas\nimport json\nfrom collections import defaultdict\n\ninputExcel = 'E:\\\\teamsMM.xlsx'\nexportJson = 'E:\\\\teamsMM.json'\n\ndata = pandas.read_excel(inputExcel, sheetname = 'SCAT Teams', encoding = 'utf8')\n\ngrouped = data.groupby(['teamname', 'members']).first()\n\nresults = defaultdict(lambda: defaultdict(dict))\n\nfor t in grouped.itertuples():\n    for i, key in enumerate(t.Index):\n        if i ==0:\n            nested = results[key]\n        elif i == len(t.Index) -1:\n            nested[key] = t\n        else:\n            nested = nested[key]\n\n\nformattedJson = json.dumps(results, indent = 4)\n\nformattedJson = '{\\n\"teams\": [\\n' + formattedJson +'\\n]\\n }'\n\nparsed = open(exportJson, \"w\")\nparsed.write(formattedJson)\n</code></pre>\n\n<p>The resulting JSON file is this:</p>\n\n<pre><code>{\n\"teams\": [\n{\n    \"1\": {\n        \"0\": [\n            [\n                1, \n                0\n            ], \n            \"John\", \n            \"Doe\", \n            \"Anon\", \n            \"916-555-1234\", \n            \"none\", \n            \"john.doe@wildlife.net\"\n        ], \n        \"1\": [\n            [\n                1, \n                1\n            ], \n            \"Jane\", \n            \"Doe\", \n            \"Anon\", \n            \"916-555-4321\", \n            \"916-555-7890\", \n            \"jane.doe@wildlife.net\"\n        ]\n    }, \n    \"2\": {\n        \"0\": [\n            [\n                2, \n                0\n            ], \n            \"Mickey\", \n            \"Moose\", \n            \"Moosers\", \n            \"916-555-0000\", \n            \"916-555-1111\", \n            \"mickey.moose@wildlife.net\"\n        ], \n        \"1\": [\n            [\n                2, \n                1\n            ], \n            \"Minny\", \n            \"Moose\", \n            \"Moosers\", \n            \"916-555-2222\", \n            \"none\", \n            \"minny.moose@wildlife.net\"\n        ]\n    }\n}\n]\n }\n</code></pre>\n\n<p>This format is very close to the desired end product.  Remaining issues are:  removing the redundant array  [1, 0] that appears just above each firstname, and getting the headers for each nest to be \"teamname\": \"1\",\n\"members\": rather than \"1\": \"0\":</p>\n\n<p>Also, I do not know why each record is being stripped of its heading on the conversion.  For instance why is dictionary entry \"firstname\":\"John\" exported as \"John\".</p>\n"}, {"tags": [], "owner": {"reputation": 423, "user_id": 6195734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/065b9cace001a0f6f8e350d58d0f17ce?s=128&d=identicon&r=PG&f=1", "display_name": "spaine", "link": "https://stackoverflow.com/users/6195734/spaine"}, "is_accepted": true, "score": 1, "last_activity_date": 1466450406, "last_edit_date": 1466450406, "creation_date": 1466439444, "answer_id": 37927283, "question_id": 37713329, "link": "https://stackoverflow.com/questions/37713329/how-to-build-a-json-file-with-nested-records-from-a-flat-data-table/37927283#37927283", "title": "How to build a JSON file with nested records from a flat data table?", "body": "<p>This is the a solution that works and creates the desired JSON format.  First, I grouped my dataframe by the appropriate columns, then instead of creating a dictionary (and losing data order) for each column heading/record pair, I created them as lists of tuples, then transformed the list into an Ordered Dict.  Another Ordered Dict was created for the two columns that everything else was grouped by.  Precise layering between lists and ordered dicts was necessary to for the JSON conversion to produce the correct format.  Also note that when dumping to JSON, sort_keys must be set to false, or all your Ordered Dicts will be rearranged into alphabetical order.</p>\n\n<pre><code>import pandas\nimport json\nfrom collections import OrderedDict\n\ninputExcel = 'E:\\\\teams.xlsx'\nexportJson = 'E:\\\\teams.json'\n\ndata = pandas.read_excel(inputExcel, sheetname = 'SCAT Teams', encoding = 'utf8')\n\n# This creates a tuple of column headings for later use matching them with column data\ncols = []\ncolumnList = list(data[0:])\nfor col in columnList:\n    cols.append(str(col))\ncolumnList = tuple(cols)\n\n#This groups the dataframe by the 'teamname' and 'members' columns\ngrouped = data.groupby(['teamname', 'members']).first()\n\n#This creates a reference to the index level of the groups\ngroupnames = data.groupby([\"teamname\", \"members\"]).grouper.levels\ntm = (groupnames[0])\n\n#Create a list to add team records to at the end of the first 'for' loop\nteamsList = []\n\nfor teamN in tm:\n    teamN = int(teamN)  #added this in to prevent TypeError: 1 is not JSON serializable\n    tempList = []   #Create an temporary list to add each record to\n    for index, row in grouped.iterrows():\n        dataRow = row\n        if index[0] == teamN:  #Select the record in each row of the grouped dataframe if its index matches the team number\n\n            #In order to have the JSON records come out in the same order, I had to first create a list of tuples, then convert to and Ordered Dict\n            rowDict = ([(columnList[2], dataRow[0]), (columnList[3], dataRow[1]), (columnList[4], dataRow[2]), (columnList[5], dataRow[3]), (columnList[6], dataRow[4]), (columnList[7], dataRow[5])])\n            rowDict = OrderedDict(rowDict)\n            tempList.append(rowDict)\n    #Create another Ordered Dict to keep 'teamname' and the list of members from the temporary list sorted\n    t = ([('teamname', str(teamN)), ('members', tempList)])\n    t= OrderedDict(t)\n\n    #Append the Ordered Dict to the emepty list of teams created earlier\n    ListX = t\n    teamsList.append(ListX)\n\n\n#Create a final dictionary with a single item: the list of teams\nteams = {\"teams\":teamsList} \n\n#Dump to JSON format\nformattedJson = json.dumps(teams, indent = 1, sort_keys = False) #sort_keys MUST be set to False, or all dictionaries will be alphebetized\nformattedJson = formattedJson.replace(\"NaN\", '\"NULL\"') #\"NaN\" is the NULL format in pandas dataframes - must be replaced with \"NULL\" to be a valid JSON file\nprint formattedJson\n\n#Export to JSON file\nparsed = open(exportJson, \"w\")\nparsed.write(formattedJson)\n\nprint\"\\n\\nExport to JSON Complete\"\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 6195734, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/065b9cace001a0f6f8e350d58d0f17ce?s=128&d=identicon&r=PG&f=1", "display_name": "spaine", "link": "https://stackoverflow.com/users/6195734/spaine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2378, "favorite_count": 1, "accepted_answer_id": 37927283, "answer_count": 2, "score": 7, "last_activity_date": 1483139433, "creation_date": 1465421688, "last_edit_date": 1483139433, "question_id": 37713329, "link": "https://stackoverflow.com/questions/37713329/how-to-build-a-json-file-with-nested-records-from-a-flat-data-table", "title": "How to build a JSON file with nested records from a flat data table?", "body": "<p>I'm looking for a Python technique to build a nested JSON file from a flat table in a pandas data frame. For example how could a pandas data frame table such as:</p>\n\n<pre><code>teamname  member firstname lastname  orgname         phone        mobile\n0        1       0      John      Doe     Anon  916-555-1234                 \n1        1       1      Jane      Doe     Anon  916-555-4321  916-555-7890   \n2        2       0    Mickey    Moose  Moosers  916-555-0000  916-555-1111   \n3        2       1     Minny    Moose  Moosers  916-555-2222\n</code></pre>\n\n<p>be taken and exported to a JSON that looks like:</p>\n\n<pre><code>{\n\"teams\": [\n{\n\"teamname\": \"1\",\n\"members\": [\n  {\n    \"firstname\": \"John\", \n    \"lastname\": \"Doe\",\n    \"orgname\": \"Anon\",\n    \"phone\": \"916-555-1234\",\n    \"mobile\": \"\",\n  },\n  {\n    \"firstname\": \"Jane\",\n    \"lastname\": \"Doe\",\n    \"orgname\": \"Anon\",\n    \"phone\": \"916-555-4321\",\n    \"mobile\": \"916-555-7890\",\n  }\n]\n},\n{\n\"teamname\": \"2\",\n\"members\": [\n  {\n    \"firstname\": \"Mickey\",\n    \"lastname\": \"Moose\",\n    \"orgname\": \"Moosers\",\n    \"phone\": \"916-555-0000\",\n    \"mobile\": \"916-555-1111\",\n  },\n  {\n    \"firstname\": \"Minny\",\n    \"lastname\": \"Moose\",\n    \"orgname\": \"Moosers\",\n    \"phone\": \"916-555-2222\",\n    \"mobile\": \"\",\n  }\n]\n}       \n]\n\n}\n</code></pre>\n\n<p>I have tried doing this by creating a dict of dicts and dumping to JSON.  This is my current code:</p>\n\n<pre><code>data = pandas.read_excel(inputExcel, sheetname = 'SCAT Teams', encoding = 'utf8')\nmemberDictTuple = [] \n\nfor index, row in data.iterrows():\n    dataRow = row\n    rowDict = dict(zip(columnList[2:], dataRow[2:]))\n\n    teamRowDict = {columnList[0]:int(dataRow[0])}\n\n    memberId = tuple(row[1:2])\n    memberId = memberId[0]\n\n    teamName = tuple(row[0:1])\n    teamName = teamName[0]\n\n    memberDict1 = {int(memberId):rowDict}\n    memberDict2 = {int(teamName):memberDict1}\n\n    memberDictTuple.append(memberDict2)\n\nmemberDictTuple = tuple(memberDictTuple)\nformattedJson = json.dumps(memberDictTuple, indent = 4, sort_keys = True)\nprint formattedJson\n</code></pre>\n\n<p>This produces the following output.  Each item is nested at the correct level under \"teamname\" 1 or 2, but records should be nested together if they have the same teamname.  How can I fix this so that teamname 1 and teamname 2 each have 2 records nested within?</p>\n\n<pre><code>[\n    {\n        \"1\": {\n            \"0\": {\n                \"email\": \"john.doe@wildlife.net\", \n                \"firstname\": \"John\", \n                \"lastname\": \"Doe\", \n                \"mobile\": \"none\", \n                \"orgname\": \"Anon\", \n                \"phone\": \"916-555-1234\"\n            }\n        }\n    }, \n    {\n        \"1\": {\n            \"1\": {\n                \"email\": \"jane.doe@wildlife.net\", \n                \"firstname\": \"Jane\", \n                \"lastname\": \"Doe\", \n                \"mobile\": \"916-555-7890\", \n                \"orgname\": \"Anon\", \n                \"phone\": \"916-555-4321\"\n            }\n        }\n    }, \n    {\n        \"2\": {\n            \"0\": {\n                \"email\": \"mickey.moose@wildlife.net\", \n                \"firstname\": \"Mickey\", \n                \"lastname\": \"Moose\", \n                \"mobile\": \"916-555-1111\", \n                \"orgname\": \"Moosers\", \n                \"phone\": \"916-555-0000\"\n            }\n        }\n    }, \n    {\n        \"2\": {\n            \"1\": {\n                \"email\": \"minny.moose@wildlife.net\", \n                \"firstname\": \"Minny\", \n                \"lastname\": \"Moose\", \n                \"mobile\": \"none\", \n                \"orgname\": \"Moosers\", \n                \"phone\": \"916-555-2222\"\n            }\n        }\n    }\n]\n</code></pre>\n"}, {"tags": ["python", "arrays", "matlab", "matrix"], "comments": [{"owner": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "edited": false, "score": 1, "creation_date": 1465421560, "post_id": 37713276, "comment_id": 62900175, "body": "just a user-based remark - do not ask anyone to put matrix in the stdin by hand. This is not an usefull approach. Simply ask for a path to a file containing the matrix in some generic format, like .csv"}, {"owner": {"reputation": 27649, "user_id": 5067311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qjltV.png?s=128&g=1", "display_name": "Andras Deak", "link": "https://stackoverflow.com/users/5067311/andras-deak"}, "edited": false, "score": 1, "creation_date": 1465422524, "post_id": 37713276, "comment_id": 62900615, "body": "&quot;<i>I keep getting errors</i>&quot; is never sufficient information for us to help you."}, {"owner": {"reputation": 3, "user_id": 6442548, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lEt05R3H71Q/AAAAAAAAAAI/AAAAAAAAAB4/ElVdOWNslqw/photo.jpg?sz=128", "display_name": "Cyndi Dickerson", "link": "https://stackoverflow.com/users/6442548/cyndi-dickerson"}, "reply_to_user": {"reputation": 56500, "user_id": 2658050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yPuAp.jpg?s=128&g=1", "display_name": "lejlot", "link": "https://stackoverflow.com/users/2658050/lejlot"}, "edited": false, "score": 0, "creation_date": 1465422626, "post_id": 37713276, "comment_id": 62900654, "body": "@lejlot This is probably a really stupid question, but how do you do that?"}, {"owner": {"reputation": 211, "user_id": 6427579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1901467458231b56e553575126ec842?s=128&d=identicon&r=PG&f=1", "display_name": "RainbowRevenge", "link": "https://stackoverflow.com/users/6427579/rainbowrevenge"}, "edited": false, "score": 0, "creation_date": 1465423052, "post_id": 37713276, "comment_id": 62900847, "body": "See here for example: <a href=\"http://stackoverflow.com/questions/9282967/how-to-open-a-file-using-the-open-with-statement\" title=\"how to open a file using the open with statement\">stackoverflow.com/questions/9282967/&hellip;</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6442548, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lEt05R3H71Q/AAAAAAAAAAI/AAAAAAAAAB4/ElVdOWNslqw/photo.jpg?sz=128", "display_name": "Cyndi Dickerson", "link": "https://stackoverflow.com/users/6442548/cyndi-dickerson"}, "edited": false, "score": 0, "creation_date": 1465423419, "post_id": 37713603, "comment_id": 62901017, "body": "Thanks, that fixed it.  I am getting a new error now when I command it to    print(btrain_multidimensional_array)         Traceback (most recent call last):       File &quot;C:\\Users\\Cynthia\\Documents\\Lodder Lab\\Spectral Analysis\\Supa Fly.py&quot;, line 24, in &lt;module&gt;         print(btrain_multidimensional_array) NameError: name &#39;btrain_multidimensional_array&#39; is not defined  Any idea why the object I commanded it to return doesn&#39;t exist?"}, {"owner": {"reputation": 211, "user_id": 6427579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1901467458231b56e553575126ec842?s=128&d=identicon&r=PG&f=1", "display_name": "RainbowRevenge", "link": "https://stackoverflow.com/users/6427579/rainbowrevenge"}, "reply_to_user": {"reputation": 3, "user_id": 6442548, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lEt05R3H71Q/AAAAAAAAAAI/AAAAAAAAAB4/ElVdOWNslqw/photo.jpg?sz=128", "display_name": "Cyndi Dickerson", "link": "https://stackoverflow.com/users/6442548/cyndi-dickerson"}, "edited": false, "score": 0, "creation_date": 1465425077, "post_id": 37713603, "comment_id": 62901602, "body": "Well this error comes from the fact that np.reshape() does not return anything. It just reshapes an exisiting array so you don&#39;t need to assign a new variable. Your other error should go away as well."}], "tags": [], "owner": {"reputation": 211, "user_id": 6427579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1901467458231b56e553575126ec842?s=128&d=identicon&r=PG&f=1", "display_name": "RainbowRevenge", "link": "https://stackoverflow.com/users/6427579/rainbowrevenge"}, "is_accepted": true, "score": 1, "last_activity_date": 1465422830, "creation_date": 1465422830, "answer_id": 37713603, "question_id": 37713276, "link": "https://stackoverflow.com/questions/37713276/how-do-you-ask-a-user-to-input-a-matrix-on-python/37713603#37713603", "title": "How do you ask a user to input a matrix on Python?", "body": "<p>Your code is ok so far but <code>btrain = [input(\"Input btrain as a list of values separated by commas.\")]</code> will end up being a list of a single string or a list of a tuple of your values if you're on python 2.7. The correct way to do it would be </p>\n\n<pre><code>btrain = input(\"Input btrain as a list of values separated by commas.\").split(\",\")\n</code></pre>\n\n<p>split(delimiter) gives a list of all values splitted at some delimiter in this case \",\"</p>\n"}], "owner": {"reputation": 3, "user_id": 6442548, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-lEt05R3H71Q/AAAAAAAAAAI/AAAAAAAAAB4/ElVdOWNslqw/photo.jpg?sz=128", "display_name": "Cyndi Dickerson", "link": "https://stackoverflow.com/users/6442548/cyndi-dickerson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1093, "favorite_count": 1, "accepted_answer_id": 37713603, "answer_count": 1, "score": 0, "last_activity_date": 1465429558, "creation_date": 1465421440, "last_edit_date": 1465429558, "question_id": 37713276, "link": "https://stackoverflow.com/questions/37713276/how-do-you-ask-a-user-to-input-a-matrix-on-python", "title": "How do you ask a user to input a matrix on Python?", "body": "<p>I'm pretty new to Python, and I'm trying to translate a Matlab code.  I'm trying to write a program that begins with a user uploading or entering their data from an IR training spectrum, and then the program appending it into an array or a matrix.  But I'm not certain that I'm doing this right (especially because I keep getting errors!)</p>\n\n<pre><code># Requires numpy and math.\n\n# Import necessary modules.\nimport numpy as np\nimport math\n\n# Get data for the training spectra as a list.\n# Then turn that list into a numpy array given the user's input of how many\n# rows and columns there should be.\n# (An alternate way to do this would be to have users input it with commas and\n# semi-colons.)\n# btrain_matrix returns the array.\ndef btrain_matrix():\n    btrain = [input(\"Input btrain as a list of values separated by commas.\")]\n    btrain_row_number = int(input(\"How many rows should there be in this matrix? \\n i.e., how many training samples were there?\"))\n    btrain_column_number = int(input(\"How many columns should there be in this matrix? \\n i.e., how many peaks were trained?\"))\n\n    btrain_array=np.array(btrain)\n    btrain_multidimensional_array = btrain_array.reshape(btrain_row_number,btrain_column_number)\n\n    print(btrain_multidimensional_array)\n    return (btrain_multidimensional_array)\n\nbtrain_matrix()\nbtrain_row_number = input(\"Please re-enter the number of rows in btrain.\")\n\n# Insert a sequence to call btrain_matrix here\n</code></pre>\n\n<p>The error I'm getting is this:</p>\n\n<pre><code>Input btrain as a list of values separated by commas.1,2,3\nHow many rows should there be in this matrix? \n i.e., how many training samples were there?1\nHow many columns should there be in this matrix? \n i.e., how many peaks were trained?3\nTraceback (most recent call last):\n  File \"C:\\Users\\Cynthia\\Documents\\Lodder Lab\\Spectral Analysis\\Supa Fly.py\", line 24, in &lt;module&gt;\n    btrain_matrix()\n  File \"C:\\Users\\Cynthia\\Documents\\Lodder Lab\\Spectral Analysis\\Supa Fly.py\", line 19, in btrain_matrix\n    btrain_multidimensional_array = btrain_array.reshape(btrain_row_number,btrain_column_number)\nValueError: total size of new array must be unchanged\n</code></pre>\n\n<p>If I input \"1,2,3\" and \"1\", \"1\", the program runs fine. How do I get it to recognize each of those inputs as separate items in a list?</p>\n"}, {"tags": ["python", "xml", "tree", "element", "writing"], "comments": [{"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 1, "creation_date": 1465421197, "post_id": 37713184, "comment_id": 62900008, "body": "Please post the whole traceback."}], "answers": [{"comments": [{"owner": {"reputation": 1064, "user_id": 291033, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5921675bd44896010211f5a11695764b?s=128&d=identicon&r=PG", "display_name": "Huw Walters", "link": "https://stackoverflow.com/users/291033/huw-walters"}, "edited": false, "score": 2, "creation_date": 1506685363, "post_id": 37713268, "comment_id": 79930558, "body": "And if writing to standard output, you can use <code>tree.write(sys.stdout.buffer)</code>."}, {"owner": {"reputation": 2633, "user_id": 1426861, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6a5fc35da5d38806aa98df9571612ae9?s=128&d=identicon&r=PG", "display_name": "Tony Sepia", "link": "https://stackoverflow.com/users/1426861/tony-sepia"}, "edited": false, "score": 1, "creation_date": 1530807149, "post_id": 37713268, "comment_id": 89373272, "body": "in my case encoding could not be &#39;unicode&#39;. I had to change it to &quot;UTF-8&quot; instead"}], "tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": true, "score": 23, "last_activity_date": 1611772000, "last_edit_date": 1611772000, "creation_date": 1465421406, "answer_id": 37713268, "question_id": 37713184, "link": "https://stackoverflow.com/questions/37713184/python-element-tree-writing-to-new-file/37713268#37713268", "title": "Python Element Tree Writing to New File", "body": "<p>The <a href=\"https://docs.python.org/3/library/xml.etree.elementtree.html#xml.etree.ElementTree.ElementTree.write\" rel=\"nofollow noreferrer\"><code>ElementTree.write</code></a> method defaults to us-ascii encoding and as such expects a file opened for writing binary:</p>\n<blockquote>\n<p>The output is either a string (str) or binary (bytes). This is controlled by the encoding argument. If <em>encoding</em> is <code>&quot;unicode&quot;</code>, the output is a string; otherwise, it\u2019s binary. Note that this may conflict with the type of <em>file</em> if it\u2019s an open file object; make sure you do not try to write a string to a binary stream and vice versa.</p>\n</blockquote>\n<p>So either open the file for writing in <em>binary mode</em>:</p>\n<pre><code>with open('person.xml', 'wb') as f:\n    tree.write(f)\n</code></pre>\n<p>or open the file for writing in <em>text mode</em> and give <code>&quot;unicode&quot;</code> as <em>encoding</em>:</p>\n<pre><code>with open('person.xml', 'w') as f:\n    tree.write(f, encoding='unicode')\n</code></pre>\n<p>or open the file for writing in <em>binary mode</em> and pass an explicit encoding:</p>\n<pre><code>with open('person.xml', 'wb') as f:\n    tree.write(f, encoding='utf-8')\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 6442582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ad0b460391ab0d737df3d69f9654189?s=128&d=identicon&r=PG&f=1", "display_name": "Kyle Zimmerman", "link": "https://stackoverflow.com/users/6442582/kyle-zimmerman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36567, "favorite_count": 4, "accepted_answer_id": 37713268, "answer_count": 1, "score": 9, "last_activity_date": 1611772000, "creation_date": 1465421081, "question_id": 37713184, "link": "https://stackoverflow.com/questions/37713184/python-element-tree-writing-to-new-file", "title": "Python Element Tree Writing to New File", "body": "<p>Hi so I've been struggling with this and can't quite figure out why I'm getting errors. Trying to export just some basic XML into a new file, keeps giving me a TypeError. Below is a small sample of the code</p>\n\n<pre><code>from xml.etree.ElementTree import ElementTree\nfrom xml.etree.ElementTree import Element\nfrom xml.etree.ElementTree import SubElement\nimport xml.etree.ElementTree as ET\n\n\nroot = Element('QuoteWerksXML')\ntree = ElementTree(root)\nver = SubElement(root, \"AppVersionMajor\")\nver.text = '5.1'\n\ntree.write(open('person.xml', 'w'))\n</code></pre>\n"}, {"tags": ["python", "opencv", "ar.drone"], "answers": [{"tags": [], "owner": {"reputation": 2231, "user_id": 6410520, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f641ad7e7d5b962dc3814f5565d3ea03?s=128&d=identicon&r=PG&f=1", "display_name": "Kathiravan Natarajan", "link": "https://stackoverflow.com/users/6410520/kathiravan-natarajan"}, "is_accepted": false, "score": 1, "last_activity_date": 1485649589, "creation_date": 1485649589, "answer_id": 41916395, "question_id": 37713155, "link": "https://stackoverflow.com/questions/37713155/stream-video-from-drone-parrot-2-0-python-cv2/41916395#41916395", "title": "Stream video from drone Parrot 2.0. Python + cv2", "body": "<pre><code>import cv2\ncam = cv2.VideoCapture('tcp://192.168.1.1:5555')\nrunning = True\nwhile running:\n    # get current frame of video\n    running, frame = cam.read()\n    if running:\n        cv2.imshow('frame', frame)\n        if cv2.waitKey(1) &amp; 0xFF == 27: \n            # escape key pressed\n            running = False\n    else:\n        # error reading frame\n        print 'error reading video feed'\ncam.release()\ncv2.destroyAllWindows()\n</code></pre>\n\n<p>Try this code...This works for me.</p>\n"}], "owner": {"reputation": 195, "user_id": 5554632, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b11f07650e8901325b1e8f42dcbd0a2b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/5554632/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1767, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574772533, "creation_date": 1465420991, "last_edit_date": 1574772533, "question_id": 37713155, "link": "https://stackoverflow.com/questions/37713155/stream-video-from-drone-parrot-2-0-python-cv2", "title": "Stream video from drone Parrot 2.0. Python + cv2", "body": "<p>I am trying to have access to the stream of my drone's camera.</p>\n\n<p>Here my code:</p>\n\n<pre><code>import cv2\nimport numpy\nimport libardrone\n\ndrone = libardrone.ARDrone()\ncap = drone.image\n\nwhile(True):\n    cap = drone.image\n    if not cap:\n        continue\n    ret, frame = convert\n    gray = cv2.cvtColor(frame, cv2.COLOR_BGR2GRAY)\n    cv2.imshow('frame',gray)\n    if cv2.waitKey(1) &amp; 0xFF == ord('q'):\n        break\n\ncap.release()\ncv2.destroyAllWindows()\n</code></pre>\n\n<p>It does not work. It does not open any frame where I can see the stream video of my drone's camera.\nWhat's wrong? Do you have any suggestions?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "powershell"], "comments": [{"owner": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 1, "creation_date": 1465421581, "post_id": 37713149, "comment_id": 62900189, "body": "There a plenty of ways to do it (in both python &amp; powershell). Share what you&#39;ve tried &amp; we&#39;ll help."}, {"owner": {"reputation": 101, "user_id": 665393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24fb400ed5570ceb4081a2310fd6acb1?s=128&d=identicon&r=PG", "display_name": "Spock", "link": "https://stackoverflow.com/users/665393/spock"}, "reply_to_user": {"reputation": 10100, "user_id": 590028, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/43c6ce77252e438b40b96f5c68cf3432?s=128&d=identicon&r=PG", "display_name": "user590028", "link": "https://stackoverflow.com/users/590028/user590028"}, "edited": false, "score": 0, "creation_date": 1465424617, "post_id": 37713149, "comment_id": 62901446, "body": "For single line, yes, select-string, regx, ... But to group multi-lines, I don&#39;t know, unless I process the file as a whole.  I thought may be someone has some smart way to do that."}, {"owner": {"reputation": 4363, "user_id": 2040569, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/78834c6b2f1bb61025b0d29ae59af530?s=128&d=identicon&r=PG&f=1", "display_name": "Austin T French", "link": "https://stackoverflow.com/users/2040569/austin-t-french"}, "edited": false, "score": 0, "creation_date": 1465425241, "post_id": 37713149, "comment_id": 62901652, "body": "With what degree of certainty? Any regularity to the text at all? Dates always 2016? Text never has numbers?"}, {"owner": {"reputation": 30007, "user_id": 3245749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xYDwR.jpg?s=128&g=1", "display_name": "TheMadTechnician", "link": "https://stackoverflow.com/users/3245749/themadtechnician"}, "edited": false, "score": 0, "creation_date": 1465428369, "post_id": 37713149, "comment_id": 62902620, "body": "PS&#39;s <code>-Split</code> can do it with RegEx... <a href=\"https://regex101.com/r/kO4nB6/1\" rel=\"nofollow noreferrer\"><code>(?s)(?:[\\r\\n]|^)(\\d{4}-\\d\\d-\\d\\d \\d\\d:\\d\\d:\\d\\d,\\d{3}:.*?)(?=[\\r\\n]\\d{4}-\\d\\d-\\d\\d \\d\\d:\\d\\d:\\d\\d,\\d{3}:|$)</code></a>"}, {"owner": {"reputation": 101, "user_id": 665393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24fb400ed5570ceb4081a2310fd6acb1?s=128&d=identicon&r=PG", "display_name": "Spock", "link": "https://stackoverflow.com/users/665393/spock"}, "edited": false, "score": 0, "creation_date": 1465431152, "post_id": 37713149, "comment_id": 62903462, "body": "No, date is whatever the date-time, like nnnn-nn-nn nn:nn:nn format  The text portion will have numbers, but it should not have the same date-time format in it.  Basically, the date-time format is the delimiter for each grouping.  Using &quot;2016&quot; as the delimiter will not work as there might be GUID id in the text that contains 2016.  The text portion (sometext) is basically some error msg and stack trace of the error.  I am trying to filter out all the known errors, so I can see any new error, and the log file can be large (like couple hundreds MB).  Thanks."}, {"owner": {"reputation": 101, "user_id": 665393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24fb400ed5570ceb4081a2310fd6acb1?s=128&d=identicon&r=PG", "display_name": "Spock", "link": "https://stackoverflow.com/users/665393/spock"}, "edited": false, "score": 0, "creation_date": 1465431496, "post_id": 37713149, "comment_id": 62903558, "body": "@TheMadTechnican, That&#39;s a complex RegEx, let me digest a bit.  But it will have to apply to the whole file at once, I guess?  Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 665393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24fb400ed5570ceb4081a2310fd6acb1?s=128&d=identicon&r=PG", "display_name": "Spock", "link": "https://stackoverflow.com/users/665393/spock"}, "edited": false, "score": 0, "creation_date": 1466526923, "post_id": 37868678, "comment_id": 63348673, "body": "Hi Travis, I don&#39;t see convertfrom-string in my system. I see convertfrom-stringdata.  Is there something I need to download or install?  This looks very promising and exactly what I need.  Thanks very much!"}, {"owner": {"reputation": 2091, "user_id": 2658816, "user_type": "registered", "profile_image": "https://graph.facebook.com/675659038/picture?type=large", "display_name": "TravisEz13", "link": "https://stackoverflow.com/users/2658816/travisez13"}, "reply_to_user": {"reputation": 101, "user_id": 665393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24fb400ed5570ceb4081a2310fd6acb1?s=128&d=identicon&r=PG", "display_name": "Spock", "link": "https://stackoverflow.com/users/665393/spock"}, "edited": false, "score": 0, "creation_date": 1466535565, "post_id": 37868678, "comment_id": 63353596, "body": "It is part of PowerShell 5.0 which comes with Windows 10 or you can install it <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=50395\" rel=\"nofollow noreferrer\">with WMF 5.0</a>"}, {"owner": {"reputation": 101, "user_id": 665393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24fb400ed5570ceb4081a2310fd6acb1?s=128&d=identicon&r=PG", "display_name": "Spock", "link": "https://stackoverflow.com/users/665393/spock"}, "edited": false, "score": 0, "creation_date": 1466628502, "post_id": 37868678, "comment_id": 63401963, "body": "Installed WMF5.0 and it works as Travis&#39; example above, but It process line by line.  Is it possible to include the other lines as part of the message object?  Like &quot;sometext...abcd1234&quot; in &quot;message=sometext1234...This is what I want...&quot;?"}, {"owner": {"reputation": 2091, "user_id": 2658816, "user_type": "registered", "profile_image": "https://graph.facebook.com/675659038/picture?type=large", "display_name": "TravisEz13", "link": "https://stackoverflow.com/users/2658816/travisez13"}, "reply_to_user": {"reputation": 101, "user_id": 665393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24fb400ed5570ceb4081a2310fd6acb1?s=128&d=identicon&r=PG", "display_name": "Spock", "link": "https://stackoverflow.com/users/665393/spock"}, "edited": false, "score": 0, "creation_date": 1466628569, "post_id": 37868678, "comment_id": 63401998, "body": "@Spock can you update your question with your current code?"}, {"owner": {"reputation": 101, "user_id": 665393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24fb400ed5570ceb4081a2310fd6acb1?s=128&d=identicon&r=PG", "display_name": "Spock", "link": "https://stackoverflow.com/users/665393/spock"}, "edited": false, "score": 0, "creation_date": 1466628806, "post_id": 37868678, "comment_id": 63402106, "body": "I am not sure what you mean.  I am just following your code example.  It works but I want the output to be something like this, if it make any sense:"}, {"owner": {"reputation": 101, "user_id": 665393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24fb400ed5570ceb4081a2310fd6acb1?s=128&d=identicon&r=PG", "display_name": "Spock", "link": "https://stackoverflow.com/users/665393/spock"}, "edited": false, "score": 0, "creation_date": 1466629065, "post_id": 37868678, "comment_id": 63402246, "body": "{@{date=2016-06-06 07:26:46,038:; message= sometext... sometext...   sometext... sometext...}}                                                                     {@{date=2016-06-06 08:21:46,591:; message=sometext1234...This is what I want... sometext...abcd1234 }} ... `"}], "tags": [], "owner": {"reputation": 2091, "user_id": 2658816, "user_type": "registered", "profile_image": "https://graph.facebook.com/675659038/picture?type=large", "display_name": "TravisEz13", "link": "https://stackoverflow.com/users/2658816/travisez13"}, "is_accepted": false, "score": 0, "last_activity_date": 1466108426, "creation_date": 1466108426, "answer_id": 37868678, "question_id": 37713149, "link": "https://stackoverflow.com/questions/37713149/filter-multi-lines-separated-by-a-date-time-field/37868678#37868678", "title": "filter multi lines separated by a date time field", "body": "<p>PowerShell <a href=\"https://technet.microsoft.com/en-us/library/dn807178.aspx\" rel=\"nofollow\"><code>ConvertFrom-String</code></a> can take a template and convert data to structure output.  <strong>You may have to adjust the template for your actual data.</strong></p>\n\n<h1>Example</h1>\n\n<pre><code>$log = @\"\n2016-06-06 07:26:46,038: sometext...\nsometext...\n  sometext...\nsometext...\n2016-06-06 08:21:46,591:sometext1234...This is what I want...\nsometext...abcd1234\n2016-06-06 09:06:47,003: sometext...\n2016-06-06 09:16:46,957: sometext...\n  sometext...\n sometext...\n\"@\n\n$logTemplate = @\"\n{log*:{date:2016-06-06 07:26:46,038:}{message:sometext...}}\n\"@\n\n$log | ConvertFrom-String -TemplateContent $logTemplate\n</code></pre>\n\n<h2>Result</h2>\n\n<pre><code>log                                                                              \n---                                                                              \n{@{date=2016-06-06 07:26:46,038:; message= sometext...}}                         \nsometext...                                                                      \n  sometext...                                                                    \nsometext...                                                                      \n{@{date=2016-06-06 08:21:46,591:; message=sometext1234...This is what I want...}}\nsometext...abcd1234                                                              \n{@{date=2016-06-06 09:06:47,003:; message= sometext...}}                         \n{@{date=2016-06-06 09:16:46,957:; message= sometext...}}                         \n  sometext...      \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 665393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24fb400ed5570ceb4081a2310fd6acb1?s=128&d=identicon&r=PG", "display_name": "Spock", "link": "https://stackoverflow.com/users/665393/spock"}, "is_accepted": true, "score": 0, "last_activity_date": 1468011009, "last_edit_date": 1468011009, "creation_date": 1467848426, "answer_id": 38235521, "question_id": 37713149, "link": "https://stackoverflow.com/questions/37713149/filter-multi-lines-separated-by-a-date-time-field/38235521#38235521", "title": "filter multi lines separated by a date time field", "body": "<p>Sorry, it took me a while, but I finally figured it out. And many thanks for everyone, who gave me ideas to test.  Even though, @TravisEz13's convertfrom-string was almost what I want, and I did use it in other applications, very useful, but I didn't use it for this case.  I ended up reading the file with get-content, but I didn't know before select-string has an option -context.  So I set the lines after very large (kinda cheating), and it worked.  Here is the code:</p>\n\n<blockquote>\n  <p>gc \"C:\\abc.txt\" | select-string '\\d{4}-\\d{2}-\\d{2} \\d{2}:\\d{2}:\\d{2}' -Context 0,100 | ?{$_ -match \"whatever\"}</p>\n</blockquote>\n"}], "owner": {"reputation": 101, "user_id": 665393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24fb400ed5570ceb4081a2310fd6acb1?s=128&d=identicon&r=PG", "display_name": "Spock", "link": "https://stackoverflow.com/users/665393/spock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 38235521, "answer_count": 2, "score": 0, "last_activity_date": 1468011009, "creation_date": 1465420966, "last_edit_date": 1465424844, "question_id": 37713149, "link": "https://stackoverflow.com/questions/37713149/filter-multi-lines-separated-by-a-date-time-field", "title": "filter multi lines separated by a date time field", "body": "<p>I have a logfile that are multi-lines separated by a date-time field like this:</p>\n\n<pre><code>2016-06-06 07:26:46,038: sometext...\nsometext...\n  sometext...\nsometext...\n2016-06-06 08:21:46,591:sometext1234...This is what I want...\nsometext...abcd1234\n2016-06-06 09:06:47,003: sometext...\n2016-06-06 09:16:46,957: sometext...\n  sometext...\n sometext...\n</code></pre>\n\n<p>The date-time always starts at the beginning of the line but the text can be on the same line or span multi-lines.  Is there a easy way to group and filter the date-time with the \"sometext\" in PowerShell (or python)?  Thanks in advance!</p>\n\n<p>PS:\nJust to be clear, I want to filter out from the above:</p>\n\n<pre><code>2016-06-06 08:21:46,591:sometext1234...This is what I want...\nsometext...abcd1234\n</code></pre>\n\n<p>by giving the text \"This is what I want\"</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 3, "creation_date": 1465421034, "post_id": 37713144, "comment_id": 62899923, "body": "I think you are missing something, yes.  Why do you think calling <code>len(a)</code> would be related to <code>a</code> having an attribute called <code>len</code>?  (There is a magic method called <code>__len__</code>, but that is neither here nor there as far as your question.)"}], "answers": [{"comments": [{"owner": {"reputation": 16773, "user_id": 5827215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-s_pAOw1Sc-M/AAAAAAAAAAI/AAAAAAAAAMA/J-R1IMHbuY4/photo.jpg?sz=128", "display_name": "Tadhg McDonald-Jensen", "link": "https://stackoverflow.com/users/5827215/tadhg-mcdonald-jensen"}, "edited": false, "score": 2, "creation_date": 1465421145, "post_id": 37713187, "comment_id": 62899980, "body": "not quite, <code>len(x)</code> returns <code>x.__len__()</code> assuming the method exists and returns a valid integer length."}], "tags": [], "owner": {"reputation": 782, "user_id": 5145654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rRw4q.jpg?s=128&g=1", "display_name": "AaronI", "link": "https://stackoverflow.com/users/5145654/aaroni"}, "is_accepted": true, "score": 5, "last_activity_date": 1465421313, "last_edit_date": 1465421313, "creation_date": 1465421088, "answer_id": 37713187, "question_id": 37713144, "link": "https://stackoverflow.com/questions/37713144/do-python-lists-not-have-a-len-attribute/37713187#37713187", "title": "Do Python lists not have a len attribute?", "body": "<p>Yes, you're missing something. <a href=\"https://docs.python.org/3/library/functions.html#len\" rel=\"nofollow\"><code>len(x)</code></a> returns <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__len__\" rel=\"nofollow\"><code>x.__len__()</code></a>, not <code>x.len</code>.</p>\n\n<p>Try running <a href=\"https://docs.python.org/3/library/functions.html#dir\" rel=\"nofollow\"><code>dir(x)</code></a> to see what attributes are available on an object.</p>\n"}], "owner": {"reputation": 1703, "user_id": 2457243, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fdcb7cbaf9a56755f42881f693fca1c1?s=128&d=identicon&r=PG&f=1", "display_name": "NeutronStar", "link": "https://stackoverflow.com/users/2457243/neutronstar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 37713187, "answer_count": 1, "score": -1, "last_activity_date": 1465421313, "creation_date": 1465420952, "question_id": 37713144, "link": "https://stackoverflow.com/questions/37713144/do-python-lists-not-have-a-len-attribute", "title": "Do Python lists not have a len attribute?", "body": "<p>The output of the following script:</p>\n\n<pre><code>a = ['abc', 'def', 'ghi', 'jkl']\n\nprint len(a)\nprint hasattr(a,\"len\")\n</code></pre>\n\n<p>is</p>\n\n<pre><code>4\nFalse\n</code></pre>\n\n<p>I was expecting the <code>False</code> to be <code>True</code>, especially since <code>len()</code> works on <code>a</code>.  Am I missing something about what an attribute actually is?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 3424, "user_id": 3750257, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KF8gx.png?s=128&g=1", "display_name": "pppery", "link": "https://stackoverflow.com/users/3750257/pppery"}, "edited": false, "score": 1, "creation_date": 1465423258, "post_id": 37713122, "comment_id": 62900952, "body": "Indentation matters in python."}], "answers": [{"tags": [], "owner": {"reputation": 4731, "user_id": 1716866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/411da970ac5de2f1a0d66a10741b0e9c?s=128&d=identicon&r=PG", "display_name": "leekaiinthesky", "link": "https://stackoverflow.com/users/1716866/leekaiinthesky"}, "is_accepted": false, "score": 0, "last_activity_date": 1466535812, "creation_date": 1466535812, "answer_id": 37952601, "question_id": 37713122, "link": "https://stackoverflow.com/questions/37713122/how-to-change-xloc-id-to-ensembl-id-from-cuffdiff/37952601#37952601", "title": "how to change XLOC ID to Ensembl ID from Cuffdiff", "body": "<p>As @ppperry commented, indentation matters in Python:</p>\n\n<pre><code>#!/usr/bin/python\ngtf_handle = \"/PATH/TO/merged.gtf\"\nfh = open(gtf_handle, \"r\")\nimport re\ntrans_ids = {}\nwith open('merged2.gtf', 'w') as f:\n    for line in fh:\n        line = line.strip('\\n') ##strip the line to remove white spaces\n        ##print line\n        cuffID = re.findall(r'gene_id \\\"([\\w\\.]+)\"', line) ##use RE to get lists of cuffid, ensemblId etc\n        cuffTx = re.findall(r'transcript_id \\\"([\\w\\.]+)\"', line)\n        ensemblTx = re.findall(r'oId \\\"([\\w\\.]+)\"', line)\n        geneName = re.findall(r'gene_name \\\"([\\w\\.]+)\"', line)\n        ##print cuffTx[0]\n        line = str(line).replace(cuffTx[0], ensemblTx[0]) ##unlist the transcript identifiers and replace cufflinksID with ensemblIDs\n        print line\n        f.write(\"%s\\n\" % str(line)) ##write file out to a .gtf file\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6442435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d027ea08d29a3cef8ad5d70461f56a75?s=128&d=identicon&r=PG&f=1", "display_name": "Y Chang", "link": "https://stackoverflow.com/users/6442435/y-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 577, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466535812, "creation_date": 1465420856, "last_edit_date": 1465423222, "question_id": 37713122, "link": "https://stackoverflow.com/questions/37713122/how-to-change-xloc-id-to-ensembl-id-from-cuffdiff", "title": "how to change XLOC ID to Ensembl ID from Cuffdiff", "body": "<p>I did RNA-Seq analysis, the GTF file I used was from Ensembl. The output of cuffdiff replaced the Ensembl IDs with XLOC's although it also output gene names (e.g. MX2). Ensembl IDs were no longer there. </p>\n\n<p>I saw a post that showed to modify the merged.gtf using this python script</p>\n\n<p><a href=\"http://seqanswers.com/forums/showthread.php?t=51071\" rel=\"nofollow\">http://seqanswers.com/forums/showthread.php?t=51071</a></p>\n\n<pre><code>#!/usr/bin/python\ngtf_handle = \"/PATH/TO/merged.gtf\"\nfh = open(gtf_handle, \"r\")\nimport re\ntrans_ids = {}\nwith open('merged2.gtf', 'w') as f:\nfor line in fh:\nline = line.strip('\\n') ##strip the line to remove white spaces\n##print line\ncuffID = re.findall(r'gene_id \\\"([\\w\\.]+)\"', line) ##use RE to get lists of cuffid, ensemblId etc\ncuffTx = re.findall(r'transcript_id \\\"([\\w\\.]+)\"', line)\nensemblTx = re.findall(r'oId \\\"([\\w\\.]+)\"', line)\ngeneName = re.findall(r'gene_name \\\"([\\w\\.]+)\"', line)\n##print cuffTx[0]\nline = str(line).replace(cuffTx[0], ensemblTx[0]) ##unlist the transcript identifiers and replace cufflinksID with ensemblIDs\nprint line\nf.write(\"%s\\n\" % str(line)) ##write file out to a .gtf file`\n</code></pre>\n\n<p>I followed this script but get an error:</p>\n\n<pre><code>File \"modify_merge.py\", line 12 \n  for line in fh: \nIndentationError: expected an indented block\n</code></pre>\n"}, {"tags": ["python", "dictionary", "nested"], "comments": [{"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1465420798, "post_id": 37713097, "comment_id": 62899819, "body": "Possible Duplicate of <a href=\"http://stackoverflow.com/q/9139897\">How to set default value to all keys of a dict object in python?</a>"}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1465420814, "post_id": 37713097, "comment_id": 62899826, "body": "<code>d = defaultdict(lambda: defaultdict(list))</code>? And note that you&#39;re appending a single-element list into another list, which is possibly not what you want."}, {"owner": {"reputation": 3, "user_id": 3715501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0e338e0b7b220e5dae4a3779128745e?s=128&d=identicon&r=PG&f=1", "display_name": "user3715501", "link": "https://stackoverflow.com/users/3715501/user3715501"}, "edited": false, "score": 0, "creation_date": 1465421127, "post_id": 37713097, "comment_id": 62899971, "body": "yeah, sorry its just the value not another list. Have edited the code.thanks"}], "owner": {"reputation": 3, "user_id": 3715501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0e338e0b7b220e5dae4a3779128745e?s=128&d=identicon&r=PG&f=1", "display_name": "user3715501", "link": "https://stackoverflow.com/users/3715501/user3715501"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 534, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1465421139, "creation_date": 1465420691, "last_edit_date": 1465421139, "question_id": 37713097, "link": "https://stackoverflow.com/questions/37713097/initialize-list-in-a-python-nested-dictionary", "title": "Initialize list in a python nested dictionary", "body": "<p>I am building a dynamic nested python dictonary as below</p>\n\n<pre><code>08-Jul-2016 |Offlines | [value1,value2] \n            |Gobxmls  | [value1,value3,value3,value4] \n            |Bregs    | []\n</code></pre>\n\n<p>During initialization, I am not able to add/append elements in list at the end of this dictionary.\nThis is how i have created the nested dict:</p>\n\n<pre><code>class nested_dict(dict):\n    def __missing__(self, key):\n        value = self[key] = type(self)()\n        return value\n\nd = nested_dict()\n</code></pre>\n\n<p>I want to initialize it this way (within a loop) without checking everytime if its a null list. Is it possible ?</p>\n\n<pre><code>for value in values\n    d[date][Offlines].append(value)\n</code></pre>\n"}, {"tags": ["python", "list", "path"], "answers": [{"comments": [{"owner": {"reputation": 21338, "user_id": 145279, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/r9KgA.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/145279/will"}, "edited": false, "score": 0, "creation_date": 1465426988, "post_id": 37713125, "comment_id": 62902204, "body": "Hi, can you explain your answer a bit? Popped up in the review queue, as code-only answers tend to. Thanks!"}, {"owner": {"reputation": 1354, "user_id": 1074744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0694d753f7e2b3839c9d4dce5feff668?s=128&d=identicon&r=PG", "display_name": "Tom Barron", "link": "https://stackoverflow.com/users/1074744/tom-barron"}, "reply_to_user": {"reputation": 21338, "user_id": 145279, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/r9KgA.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/145279/will"}, "edited": false, "score": 1, "creation_date": 1465482772, "post_id": 37713125, "comment_id": 62929095, "body": "@Will: Thanks for the reminder. I should&#39;ve known better. :)"}, {"owner": {"reputation": 21338, "user_id": 145279, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/r9KgA.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/145279/will"}, "edited": false, "score": 0, "creation_date": 1465503726, "post_id": 37713125, "comment_id": 62942230, "body": "Awesome, thanks for explaining! :)"}], "tags": [], "owner": {"reputation": 1354, "user_id": 1074744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0694d753f7e2b3839c9d4dce5feff668?s=128&d=identicon&r=PG", "display_name": "Tom Barron", "link": "https://stackoverflow.com/users/1074744/tom-barron"}, "is_accepted": false, "score": 1, "last_activity_date": 1465503714, "last_edit_date": 1465503714, "creation_date": 1465420871, "answer_id": 37713125, "question_id": 37713032, "link": "https://stackoverflow.com/questions/37713032/error-with-splitting-file-path-string-by-in-python/37713125#37713125", "title": "error with splitting file path string by / in python", "body": "<pre><code>import os\nimport glob\npath = r'C://Users/Alexander/Desktop/test/*.txt'\nfor file in glob.glob(path):\n    name = os.path.basename(file)\n    (path, ext) = os.path.splitext(file)\n    print(ext)\n</code></pre>\n\n<p><code>os.path.basename()</code> will extract the filename part of the path. <code>os.path.splitext()</code> hands back a tuple containing the path and the split-off extension. Since that's what your example seemed to be printing, that's what I did in my suggested answer.</p>\n\n<p>For portability, it's usually safer to use the built-in path manipulation routines rather than trying to do it yourself.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 6406506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5fcfb7f9f0319ed7594797f774821b?s=128&d=identicon&r=PG&f=1", "display_name": "Wangana", "link": "https://stackoverflow.com/users/6406506/wangana"}, "edited": false, "score": 0, "creation_date": 1465421625, "post_id": 37713240, "comment_id": 62900206, "body": "This worked, thanks! But I&#39;m not sure how it works. How does os.path.sep split the string? And why the -1 for the list position?"}, {"owner": {"reputation": 601, "user_id": 1636256, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5968a5a993a88221963284a8333f0e6d?s=128&d=identicon&r=PG", "display_name": "Natsukane", "link": "https://stackoverflow.com/users/1636256/natsukane"}, "reply_to_user": {"reputation": 51, "user_id": 6406506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5fcfb7f9f0319ed7594797f774821b?s=128&d=identicon&r=PG&f=1", "display_name": "Wangana", "link": "https://stackoverflow.com/users/6406506/wangana"}, "edited": false, "score": 0, "creation_date": 1465422708, "post_id": 37713240, "comment_id": 62900685, "body": "@AlexR. os.path.sep is the string the current OS uses for separating file paths. The [-1] just means &quot;the last element in the list&quot;, which in this case is the filename."}], "tags": [], "owner": {"reputation": 601, "user_id": 1636256, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5968a5a993a88221963284a8333f0e6d?s=128&d=identicon&r=PG", "display_name": "Natsukane", "link": "https://stackoverflow.com/users/1636256/natsukane"}, "is_accepted": true, "score": 1, "last_activity_date": 1465421269, "creation_date": 1465421269, "answer_id": 37713240, "question_id": 37713032, "link": "https://stackoverflow.com/questions/37713032/error-with-splitting-file-path-string-by-in-python/37713240#37713240", "title": "error with splitting file path string by / in python", "body": "<p>You can split by the OS path separator:</p>\n\n<pre><code>import os\nimport glob\n\npath = r'C://Users/Alexander/Desktop/test/*.txt'\nfor file in glob.glob(path):\n    name = file.split(os.path.sep)[-1]\n    name2 = name.split(\".\")[0]\n    print(name2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 595, "user_id": 2914543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8c3c02feff3b10c1657835a63542d0f?s=128&d=identicon&r=PG&f=1", "display_name": "schafle", "link": "https://stackoverflow.com/users/2914543/schafle"}, "is_accepted": false, "score": 0, "last_activity_date": 1465421787, "creation_date": 1465421787, "answer_id": 37713350, "question_id": 37713032, "link": "https://stackoverflow.com/questions/37713032/error-with-splitting-file-path-string-by-in-python/37713350#37713350", "title": "error with splitting file path string by / in python", "body": "<p>You can use <code>os.listdir(path)</code> to list all the files in a directory.\nThen iterate over the list to get the filename of each file.</p>\n\n<pre><code>for file in os.listdir(path):\n    name2 = file .split(\".\")[0]\n    print(name2)\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 6406506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff5fcfb7f9f0319ed7594797f774821b?s=128&d=identicon&r=PG&f=1", "display_name": "Wangana", "link": "https://stackoverflow.com/users/6406506/wangana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "closed_date": 1465455419, "accepted_answer_id": 37713240, "answer_count": 3, "score": 1, "last_activity_date": 1465503714, "creation_date": 1465420451, "question_id": 37713032, "link": "https://stackoverflow.com/questions/37713032/error-with-splitting-file-path-string-by-in-python", "closed_reason": "Duplicate", "title": "error with splitting file path string by / in python", "body": "<p>This is what I'm doing. I'm taking a text from a folder, modifying that text, and writing it out to another folder with a modified file name. I'm trying to establish the file name as a variable. Unfortunately this happens:</p>\n\n<pre><code>import os\nimport glob\npath = r'C://Users/Alexander/Desktop/test/*.txt'\nfor file in glob.glob(path):\n    name = file.split(r'/')[5]\n    name2 = name.split(\".\")[0]\n    print(name2)\n</code></pre>\n\n<p>Output: test\\indillama_Luisa_testfile</p>\n\n<p>The file name is 'indillama_Luisa_testfile.txt' it is saved in a folder on my desktop called 'test'. </p>\n\n<p>Python is including the 'test\\' in the file name. If I try to split name at [6] it says that index is out of range. I'm using regex and I'm assuming that it's reading '/*' as a single unit and not as a slash in the file directory.</p>\n\n<p>How do I get the file name? </p>\n"}, {"tags": ["python", "list"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 6398238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1916f42dd0d4c27d88c6896cacd6adea?s=128&d=identicon&r=PG&f=1", "display_name": "H. Seigne", "link": "https://stackoverflow.com/users/6398238/h-seigne"}, "edited": false, "score": 0, "creation_date": 1465420671, "post_id": 37713064, "comment_id": 62899759, "body": "Oh thanks so much, I&#39;d like to get rid of the functions but the task says to show that you can use functions, so I figured this was the easiest way. Anyway thanks!"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6370398"}, "is_accepted": true, "score": 3, "last_activity_date": 1465420553, "creation_date": 1465420553, "answer_id": 37713064, "question_id": 37713012, "link": "https://stackoverflow.com/questions/37713012/struggling-to-add-numbers-in-a-list-together-unsupported-operand-type/37713064#37713064", "title": "Struggling to add numbers in a list together (unsupported operand type)", "body": "<p>Instead of:</p>\n\n<pre><code>judgeScoreList = judgeScores.split()\n</code></pre>\n\n<p>You want:</p>\n\n<pre><code>judgeScoreList = [int(X) for X in judgeScores.split()]\n</code></pre>\n\n<p>I'd also recommend getting rid of all these little single-purpose functions.</p>\n"}], "owner": {"reputation": 45, "user_id": 6398238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1916f42dd0d4c27d88c6896cacd6adea?s=128&d=identicon&r=PG&f=1", "display_name": "H. Seigne", "link": "https://stackoverflow.com/users/6398238/h-seigne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 37713064, "answer_count": 1, "score": 0, "last_activity_date": 1465420553, "creation_date": 1465420357, "last_edit_date": 1465420437, "question_id": 37713012, "link": "https://stackoverflow.com/questions/37713012/struggling-to-add-numbers-in-a-list-together-unsupported-operand-type", "title": "Struggling to add numbers in a list together (unsupported operand type)", "body": "<p>Trying to get this program to work for a school project, but in line 26 of the code I get an unsupported operand type error for 'int' and 'str'. Any help would be appreciated. Here is the code:</p>\n\n<pre><code>final = False\nwhile final == False:\n\n    while True:\n            try:\n                eventName = str(input(\"What is the event's name? \"))\n                numberJudges = int(input(\"How many judges are there? \"))\n                competitorName = str(input(\"What is the competitor's name? \"))\n                judgeScores = input(\"Please enter the judges scores with a space between each one. \")\n                break\n            except ValueError:\n                print(\"That is not a valid name or number(s)\") \n    finalJudges = numberJudges - 2\n\n    def judgeScoreListFunction(judgeScores):\n        judgeScoreList = judgeScores.split()\n        return judgeScoreList\n\n    def cleanJudgeScoresFunction(judgeScoreList):\n        judgeScoreList.remove(max(judgeScoreList))\n        judgeScoreList.remove(min(judgeScoreList))\n        finalJudgeScores = judgeScoreList \n        return finalJudgeScores\n\n    def cleanScoreFunction(finalJudgeScores, finalJudges):\n        cleanedScore = sum(finalJudgeScores)\n        finalScore = cleanedScore / finalJudges\n        format(finalScore, '.2f')\n        return finalScore\n\n    judgeScoreList = judgeScoreListFunction(judgeScores)\n    finalJudgeScores = cleanJudgeScoresFunction(judgeScoreList)\n    finalScore = cleanScoreFunction(finalJudgeScores, finalJudges)\n\n    if competitorName == \"Finish\":\n        final = True\n</code></pre>\n"}, {"tags": ["python", "ssh", "paramiko"], "answers": [{"tags": [], "owner": {"reputation": 150862, "user_id": 790387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/450fd2737dd0355700a574bd12842509?s=128&d=identicon&r=PG", "display_name": "Burhan Khalid", "link": "https://stackoverflow.com/users/790387/burhan-khalid"}, "is_accepted": true, "score": 1, "last_activity_date": 1465420167, "creation_date": 1465420167, "answer_id": 37712982, "question_id": 37712921, "link": "https://stackoverflow.com/questions/37712921/sshclient-object-has-no-attribute-known-hosts-on-ssh-connect/37712982#37712982", "title": "&#39;SSHClient&#39; object has no attribute &#39;known_hosts&#39; on ssh.connect()", "body": "<p>This is a <a href=\"https://github.com/paramiko/paramiko/pull/176\" rel=\"nofollow\">known bug</a> and the fix was released to version 1.12.1; you seem to be using 1.12.0. Try upgrading to the latest release:</p>\n\n<pre><code>pip install --upgrade paramiko\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12672, "user_id": 1200821, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Cm117.jpg?s=128&g=1", "display_name": "Juan Diego Godoy Robles", "link": "https://stackoverflow.com/users/1200821/juan-diego-godoy-robles"}, "is_accepted": false, "score": 1, "last_activity_date": 1465420481, "creation_date": 1465420481, "answer_id": 37713041, "question_id": 37712921, "link": "https://stackoverflow.com/questions/37712921/sshclient-object-has-no-attribute-known-hosts-on-ssh-connect/37713041#37713041", "title": "&#39;SSHClient&#39; object has no attribute &#39;known_hosts&#39; on ssh.connect()", "body": "<p>A quick fix:</p>\n\n<pre><code>ssh = paramiko.SSHClient()\nssh.known_hosts = None\n...\n...\n</code></pre>\n\n<p>The <code>bug</code> was fixed <a href=\"https://github.com/paramiko/paramiko/pull/176/commits/026739aef57143fb606bec32dcff49c632cfe738\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 37, "user_id": 4135067, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/06102683621cffc7d8c653fb6503db20?s=128&d=identicon&r=PG&f=1", "display_name": "Suren", "link": "https://stackoverflow.com/users/4135067/suren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2838, "favorite_count": 0, "accepted_answer_id": 37712982, "answer_count": 2, "score": 0, "last_activity_date": 1465456791, "creation_date": 1465419925, "last_edit_date": 1465456791, "question_id": 37712921, "link": "https://stackoverflow.com/questions/37712921/sshclient-object-has-no-attribute-known-hosts-on-ssh-connect", "title": "&#39;SSHClient&#39; object has no attribute &#39;known_hosts&#39; on ssh.connect()", "body": "<p>I am trying to connect ssh server using code below</p>\n\n<pre><code>ssh = paramiko.SSHClient()\nssh.load_system_host_keys()\nssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nssh.load_host_keys(os.path.expanduser(os.path.join(\"~\", \".ssh\", \"known_hosts\"))\nssh.connect(\"10.1.3.2\", username = \"root\")\n</code></pre>\n\n<p>but I get the following error message</p>\n\n<pre><code>Exception during testMethod !!\nTraceback (most recent call last):\n  File \"/usr/local/lib/python2.7/dist-packages/Qb/QbUnittest/QbUnittest.py\", line 624, in __call__\n    testMethod()\n  File \"testDropBear_send_file.py\", line 31, in runMe\n    ssh.connect(\"10.1.3.2\", username = \"root\")\n  File \"/usr/local/lib/python2.7/dist-packages/paramiko-1.12.0-py2.7.egg/paramiko/client.py\", line 326, in connect\n    self._policy.missing_host_key(self, server_hostkey_name, server_key)\n  File \"/usr/local/lib/python2.7/dist-packages/paramiko-1.12.0-py2.7.egg/paramiko/client.py\", line 71, in missing_host_key\n    client.save_host_keys(client._host_keys_filename)\n  File \"/usr/local/lib/python2.7/dist-packages/paramiko-1.12.0-py2.7.egg/paramiko/client.py\", line 192, in save_host_keys\n    if self.known_hosts is not None:\nAttributeError: 'SSHClient' object has no attribute 'known_hosts'\n</code></pre>\n\n<p>Can someone help me to understand what is the problem?</p>\n"}, {"tags": ["python", "tensorflow", "skflow"], "comments": [{"owner": {"reputation": 2808, "user_id": 5708323, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iN_dtRnmo9Y/AAAAAAAAAAI/AAAAAAAAABE/VlOtp_yX8RI/photo.jpg?sz=128", "display_name": "Pete Warden", "link": "https://stackoverflow.com/users/5708323/pete-warden"}, "edited": false, "score": 0, "creation_date": 1465597145, "post_id": 37712723, "comment_id": 62985100, "body": "Sorry you&#39;re hitting problems, from the description this seems like a bug. Could you file this on <a href=\"https://github.com/tensorflow/tensorflow/issues\" rel=\"nofollow noreferrer\">github.com/tensorflow/tensorflow/issues</a> ?"}, {"owner": {"reputation": 8894, "user_id": 137783, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/938a1132d5f1b2c5a54345b0e672689c?s=128&d=identicon&r=PG", "display_name": "dartdog", "link": "https://stackoverflow.com/users/137783/dartdog"}, "reply_to_user": {"reputation": 2808, "user_id": 5708323, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-iN_dtRnmo9Y/AAAAAAAAAAI/AAAAAAAAABE/VlOtp_yX8RI/photo.jpg?sz=128", "display_name": "Pete Warden", "link": "https://stackoverflow.com/users/5708323/pete-warden"}, "edited": false, "score": 0, "creation_date": 1465597412, "post_id": 37712723, "comment_id": 62985171, "body": "Will do sorry I can&#39;t provide complete test case but large prop data"}], "answers": [{"tags": [], "owner": {"reputation": 666, "user_id": 4592311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3aa4a62842564879072c872f6560df1a?s=128&d=identicon&r=PG&f=1", "display_name": "Ismael", "link": "https://stackoverflow.com/users/4592311/ismael"}, "is_accepted": true, "score": 3, "last_activity_date": 1475001758, "last_edit_date": 1475001758, "creation_date": 1465830352, "answer_id": 37793193, "question_id": 37712723, "link": "https://stackoverflow.com/questions/37712723/tensorflowdnnclassifier-class-is-deprecated-but-replacement-does-not-seem-to-wor/37793193#37793193", "title": "TensorFlowDNNClassifier class is deprecated but replacement does not seem to work?", "body": "<p>I don't think it is a bug, from the source code of DNNClassifier, I can tell that its usage differs from TensorFlowDNNClassifier. The constructor of DNNClassifier doesn't have the steps param: </p>\n\n<pre><code>def __init__(self,\n           hidden_units,\n           feature_columns=None,\n           model_dir=None,\n           n_classes=2,\n           weight_column_name=None,\n           optimizer=None,\n           activation_fn=nn.relu,\n           dropout=None,\n           config=None)\n</code></pre>\n\n<p>As you could see <a href=\"https://github.com/tensorflow/tensorflow/blob/r0.9/tensorflow/contrib/learn/python/learn/estimators/dnn.py#L89\" rel=\"nofollow\" title=\"DNNClassifier\">here</a>. Instead the fit() method that DNNClassifier inherited from <a href=\"https://github.com/tensorflow/tensorflow/blob/r0.9/tensorflow/contrib/learn/python/learn/estimators/estimator.py#L138\" rel=\"nofollow\">BaseEstimator</a> now has the steps param, notice that the same happens with batch_size:</p>\n\n<pre><code>  def fit(self, x=None, y=None, input_fn=None, steps=None, batch_size=None,\n          monitors=None):\n</code></pre>\n\n<p>For the \"it hangs with no completion?\", in the doc of the fit() method of BaseEstimator it is explained that if steps is <code>None</code> (as the value by default), the model will train forever.</p>\n\n<p>I still don't get why I would like to train a model forever. My guesses are that creators think this way is better for the classifier if we want to have early stopping on validation data, but as I said is only my guess.</p>\n\n<p>As you could see DNNClassifier doesn't give any feedback as the deprecated \nTensorFlowDNNClassifier, it is supposed that the feedback can be setup with the 'config' param that is present in the constructor of DNNClassifier. So you should pass a RunConfig object as config, and in the params of this object you should set the verbose param, unfortunately I tried to set it so I can see the progress of the loss, but didn't get so lucky.</p>\n\n<p>I recommend you to take a look at the latest post of Yuan Tang in his blog <a href=\"http://terrytangyuan.github.io/\" rel=\"nofollow\">here</a>, one of the creators of the skflow, aka tf learn.</p>\n"}, {"tags": [], "owner": {"reputation": 3672, "user_id": 828184, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Drsll.png?s=128&g=1", "display_name": "CodingYourLife", "link": "https://stackoverflow.com/users/828184/codingyourlife"}, "is_accepted": false, "score": 0, "last_activity_date": 1477259391, "creation_date": 1477259391, "answer_id": 40208156, "question_id": 37712723, "link": "https://stackoverflow.com/questions/37712723/tensorflowdnnclassifier-class-is-deprecated-but-replacement-does-not-seem-to-wor/40208156#40208156", "title": "TensorFlowDNNClassifier class is deprecated but replacement does not seem to work?", "body": "<p>I just had a similar issue @Ismael answer is correct. I just wanted to add to the information that now classifier.fit() has the steps parameter that this parameter behaves differently. It doesn't abort earlier. There is another parameter called max_steps. That behaves as the original steps parameter of TensorFlowDNNClassifier.</p>\n\n<p>In short just use the <strong>max_steps</strong> parameter on fit() like this:</p>\n\n<pre><code>classifier = skflow.DNNClassifier(...)\nclassifier.fit(X_train, y_train, max_steps=3000)\n</code></pre>\n"}], "owner": {"reputation": 8894, "user_id": 137783, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/938a1132d5f1b2c5a54345b0e672689c?s=128&d=identicon&r=PG", "display_name": "dartdog", "link": "https://stackoverflow.com/users/137783/dartdog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2049, "favorite_count": 1, "accepted_answer_id": 37793193, "answer_count": 2, "score": 2, "last_activity_date": 1477259391, "creation_date": 1465419247, "last_edit_date": 1465478170, "question_id": 37712723, "link": "https://stackoverflow.com/questions/37712723/tensorflowdnnclassifier-class-is-deprecated-but-replacement-does-not-seem-to-wor", "title": "TensorFlowDNNClassifier class is deprecated but replacement does not seem to work?", "body": "<p>Using the following with TF .9.0rc0 on 60,000 (train) and 26,000 (test) on  or so records with 145 coded columns (1,0) trying to predict 1 or 0 for class identification..</p>\n\n<pre><code>classifier_TensorFlow = learn.TensorFlowDNNClassifier(hidden_units=[10, 20, 10],n_classes=2, steps=100)\nclassifier_TensorFlow.fit(X_train, y_train.ravel())\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>WARNING:tensorflow:TensorFlowDNNClassifier class is deprecated. Please consider using DNNClassifier as an alternative.\nOut[34]:TensorFlowDNNClassifier(steps=100, batch_size=32)\n</code></pre>\n\n<p>And then good results quite fast:</p>\n\n<pre><code>score = metrics.accuracy_score(y_test,   classifier_TensorFlow.predict(X_test))\nprint('Accuracy: {0:f}'.format(score))\nAccuracy: 0.923121\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>print (metrics.confusion_matrix(y_test, X_pred_class))\n[[23996   103]\n[ 1992    15]]\n</code></pre>\n\n<p>But when I try to use the new suggested method:</p>\n\n<pre><code>classifier_TensorFlow = learn.DNNClassifier(hidden_units=[10, 20, 10],n_classes=2)\n</code></pre>\n\n<p>it hangs with no completion? it would not take the \"steps\" parameter? I get no error messages or output so not much to go on... Any ideas or hints? The documentation is a bit \"light?\"</p>\n"}, {"tags": ["python", "optimization", "linear-programming", "pulp"], "comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1465419445, "post_id": 37712721, "comment_id": 62899221, "body": "Not all questions need code, but in this case it looks more like you just dumped the question and are hoping someone writes the solution for you. This isn&#39;t actually a programming question, it&#39;s a math question. You need to have a rudimentary understanding of Python before any answer here might help you."}, {"owner": {"reputation": 405, "user_id": 4077004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/11aa278557d34f0e2612a9133dead8c2?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil ", "link": "https://stackoverflow.com/users/4077004/nikhil"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1465419608, "post_id": 37712721, "comment_id": 62899291, "body": "Yes I have more than a rudimentary understanding of python. I&#39;d just like someone to point me in the right direction as far as an example or some such thing is concerned as I completely lack any sort of understanding of the field of optimization or linear programming and the corresponding packages in python."}, {"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1465419786, "post_id": 37712721, "comment_id": 62899374, "body": "Sounds like you need a tutorial, because this is an XY problem. Your real question seems to be &quot;How do I perform linear programming in Python&quot; which appears Too Broad. A quick google search turned up <a href=\"http://thomas-cokelaer.info/blog/2012/11/solving-a-linear-programming-problem-with-python-pulp/\" rel=\"nofollow noreferrer\">this tutorial about PuLP</a> which might help you."}, {"owner": {"reputation": 405, "user_id": 4077004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/11aa278557d34f0e2612a9133dead8c2?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil ", "link": "https://stackoverflow.com/users/4077004/nikhil"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1465421198, "post_id": 37712721, "comment_id": 62900010, "body": "@AdamSmith I&#39;ve seen that already. But they don&#39;t seem to be working with  quadratic terms in the objective which is what I have in my objective function."}], "answers": [{"comments": [{"owner": {"reputation": 405, "user_id": 4077004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/11aa278557d34f0e2612a9133dead8c2?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil ", "link": "https://stackoverflow.com/users/4077004/nikhil"}, "edited": false, "score": 0, "creation_date": 1465502235, "post_id": 37713770, "comment_id": 62941459, "body": "thanks for the input. I&#39;m currently using <a href=\"http://www.cvxpy.org/en/latest/\" rel=\"nofollow noreferrer\">cvxpy.org/en/latest</a>  but I&#39;m seeing an error when I try to put in the following objective function:    <code>A = np.array([[29,29,79],[28,28,48],[9,40,0]])   objective=Minimize(x.T*A*x) </code> The error I&#39;m seeing is <code>Forming a nonconvex expression (affine)*(affine).   warnings.warn(&quot;Forming a nonconvex expression (affine)*(affine).&quot;)</code> . Any idea how I could fix that? Or what I&#39;m doing wrong?"}, {"owner": {"reputation": 10888, "user_id": 5625534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d4mCF.jpg?s=128&g=1", "display_name": "Erwin Kalvelagen", "link": "https://stackoverflow.com/users/5625534/erwin-kalvelagen"}, "reply_to_user": {"reputation": 405, "user_id": 4077004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/11aa278557d34f0e2612a9133dead8c2?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil ", "link": "https://stackoverflow.com/users/4077004/nikhil"}, "edited": false, "score": 0, "creation_date": 1465502799, "post_id": 37713770, "comment_id": 62941779, "body": "Cvxopt is for convex problems, and it seems you try to pass on a non-convex problem."}, {"owner": {"reputation": 405, "user_id": 4077004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/11aa278557d34f0e2612a9133dead8c2?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil ", "link": "https://stackoverflow.com/users/4077004/nikhil"}, "edited": false, "score": 0, "creation_date": 1465502927, "post_id": 37713770, "comment_id": 62941837, "body": "Hmm right but what I&#39;m not understanding is, if the problem is inherently non-convex or if I can actually modify the representation of the objective function to make it convex? Meaning can I re-formulate the problem in some way to make it convex? @erwinkalvelagen"}, {"owner": {"reputation": 10888, "user_id": 5625534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d4mCF.jpg?s=128&g=1", "display_name": "Erwin Kalvelagen", "link": "https://stackoverflow.com/users/5625534/erwin-kalvelagen"}, "reply_to_user": {"reputation": 405, "user_id": 4077004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/11aa278557d34f0e2612a9133dead8c2?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil ", "link": "https://stackoverflow.com/users/4077004/nikhil"}, "edited": false, "score": 0, "creation_date": 1465503176, "post_id": 37713770, "comment_id": 62941955, "body": "1. Depends on the data in the Q matrix, 2. If you know how to that, there may be a Nobel prize waiting for you."}, {"owner": {"reputation": 405, "user_id": 4077004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/11aa278557d34f0e2612a9133dead8c2?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil ", "link": "https://stackoverflow.com/users/4077004/nikhil"}, "edited": false, "score": 0, "creation_date": 1465503340, "post_id": 37713770, "comment_id": 62942027, "body": ":) haha I see ok got it. What Q matrix are you referring to?"}, {"owner": {"reputation": 10888, "user_id": 5625534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d4mCF.jpg?s=128&g=1", "display_name": "Erwin Kalvelagen", "link": "https://stackoverflow.com/users/5625534/erwin-kalvelagen"}, "reply_to_user": {"reputation": 405, "user_id": 4077004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/11aa278557d34f0e2612a9133dead8c2?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil ", "link": "https://stackoverflow.com/users/4077004/nikhil"}, "edited": false, "score": 0, "creation_date": 1465503462, "post_id": 37713770, "comment_id": 62942090, "body": "Everyone writes x&#39;Qx. That is the usual notation. You probably should do some reading about this."}], "tags": [], "owner": {"reputation": 10888, "user_id": 5625534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d4mCF.jpg?s=128&g=1", "display_name": "Erwin Kalvelagen", "link": "https://stackoverflow.com/users/5625534/erwin-kalvelagen"}, "is_accepted": false, "score": 0, "last_activity_date": 1465541520, "last_edit_date": 1465541520, "creation_date": 1465423647, "answer_id": 37713770, "question_id": 37712721, "link": "https://stackoverflow.com/questions/37712721/python-linear-programming/37713770#37713770", "title": "Python Linear Programming", "body": "<p>I don't believe PuLP supports quadratic programming (QP). Your model is quadratic and PuLP is only for linear programming models (LPs and MIPs). There are quite a few options to express QPs in Python. High performance commercial solvers often provide Python bindings, and otherwise you can look at for example <a href=\"http://cvxopt.org/\" rel=\"nofollow\">CVXOPT</a>. Notice that only convex QPs are \"easy\" to solve. If you have a non-convex QP things become much more difficult and you may need to look at a global solver (there not as many of those type of solvers). Non-convex QPs can be reformulated via the KKT conditions as a linear MIP model, although these models may not always perform very well. </p>\n"}], "owner": {"reputation": 405, "user_id": 4077004, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/11aa278557d34f0e2612a9133dead8c2?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil ", "link": "https://stackoverflow.com/users/4077004/nikhil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465541520, "creation_date": 1465419229, "last_edit_date": 1465502610, "question_id": 37712721, "link": "https://stackoverflow.com/questions/37712721/python-linear-programming", "title": "Python Linear Programming", "body": "<p>I am trying to solve the following equation:</p>\n\n<p><code>maximize x^{T}Ax</code>   where <code>x</code> is a <code>3 X 1</code> vector of the variables to be maximized and <code>A</code> is a <code>3 X 3</code> matrix of values.</p>\n\n<p>So basically <code>x^{T} = [a,b,c]</code> which are the unknowns to be maximized and <code>A</code> could be something like </p>\n\n<p><code>A = [ [29, 29, 79],\n      [28, 28, 48],\n      [9, 40, 0 ]]</code></p>\n\n<p>Could someone show me how to represent this in the form of a maximization problem using PuLP or some other linear programming package in python?</p>\n\n<p>Any help would be much appreciated. I am extremely new to this area and have not idea how to get started representing this formulation.</p>\n\n<p>I have so far tried to use <a href=\"http://www.cvxpy.org/en/latest/\" rel=\"nofollow\">CVXPY</a> to model this function.\nI have the following code but am seeing an error:</p>\n\n<pre><code>    [1] A = np.array([[29,29,79],[28,28,48],[9,40,0]])\n    [2] x=Variable(3)\n    [3] objective=Minimize(x.T*A*x)\n     Warning: Forming a nonconvex expression (affine)*(affine).\n  warnings.warn(\"Forming a nonconvex expression (affine)*(affine).\")\n    [4] constraints=[0&lt;=x,x&lt;=1,sum_entries(x)==1] #what I'm trying to say is each entry of x should be between 0 and 1 and all entries should add up to 1.\n    [5] prob = Problem(objective, constraints)\n    [6] prob.solve()\n    DCPError: Problem does not follow DCP rules.\n</code></pre>\n"}, {"tags": ["python", "linux", "performance", "kivy"], "comments": [{"owner": {"reputation": 25731, "user_id": 2469283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3271ba34d6b680ed1103b4d4aeda9d6d?s=128&d=identicon&r=PG", "display_name": "inclement", "link": "https://stackoverflow.com/users/2469283/inclement"}, "edited": false, "score": 1, "creation_date": 1465421792, "post_id": 37712717, "comment_id": 62900294, "body": "A simple start would be to try running a trivial kivy app and see if the issues persist. If they don&#39;t, you can be sure it&#39;s something in your code causing the problem. If they do, it&#39;s something in Kivy."}, {"owner": {"reputation": 7857, "user_id": 1542900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00aff6b6266554a0909a07844cbb98ec?s=128&d=identicon&r=PG&f=1", "display_name": "Nykakin", "link": "https://stackoverflow.com/users/1542900/nykakin"}, "edited": false, "score": 0, "creation_date": 1465422495, "post_id": 37712717, "comment_id": 62900606, "body": "You can try profiling your code in order to detect which part of it is to blame. For example you can try use <a href=\"https://pymotw.com/2/profile/\" rel=\"nofollow noreferrer\">profile</a> module."}, {"owner": {"reputation": 543, "user_id": 4893295, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6bcbe3081615f66750eb71bb7bdca7a8?s=128&d=identicon&r=PG&f=1", "display_name": "user4893295", "link": "https://stackoverflow.com/users/4893295/user4893295"}, "edited": false, "score": 0, "creation_date": 1465481158, "post_id": 37712717, "comment_id": 62927876, "body": "Ok thanks, have added the result of cProfile to the question. Still confused!"}, {"owner": {"reputation": 7857, "user_id": 1542900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00aff6b6266554a0909a07844cbb98ec?s=128&d=identicon&r=PG&f=1", "display_name": "Nykakin", "link": "https://stackoverflow.com/users/1542900/nykakin"}, "edited": false, "score": 0, "creation_date": 1465486002, "post_id": 37712717, "comment_id": 62931600, "body": "See <a href=\"http://stackoverflow.com/questions/5964126/pythons-profile-module-string1\">this</a>"}, {"owner": {"reputation": 543, "user_id": 4893295, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6bcbe3081615f66750eb71bb7bdca7a8?s=128&d=identicon&r=PG&f=1", "display_name": "user4893295", "link": "https://stackoverflow.com/users/4893295/user4893295"}, "edited": false, "score": 0, "creation_date": 1466434211, "post_id": 37712717, "comment_id": 63301513, "body": "I&#39;m still struggling with this. In particular, the CPU usage in &#39;top&#39; flying up to 200-300% on a touch event. Surely this is not my code that is doing this - it happens even when the event that is called by the touch is simply testing a variable!!?"}], "owner": {"reputation": 543, "user_id": 4893295, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6bcbe3081615f66750eb71bb7bdca7a8?s=128&d=identicon&r=PG&f=1", "display_name": "user4893295", "link": "https://stackoverflow.com/users/4893295/user4893295"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 910, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1465481116, "creation_date": 1465419212, "last_edit_date": 1465481116, "question_id": 37712717, "link": "https://stackoverflow.com/questions/37712717/kivy-python-performance-issues", "title": "Kivy / python performance issues", "body": "<p>My Kivy application is suffering from a noticeable response lag to touch events, on my test machine:</p>\n\n<ul>\n<li>Deb Jessie, Python 2.7, Kivy 1.9.1</li>\n<li>Intel Atom 1860 Mhz</li>\n<li>Geforce GT610 4GB RAM SSD</li>\n<li>3.16.0-4-amd64 #1 SMP Debian 3.16.7-ckt25-2 (2016-04-08) x86_64 GNU/Linux</li>\n</ul>\n\n<p>It runs fine on my iMac, and whilst the Mac is obviously a lot more powerful, I don't believe my deb machine should be struggling. Yet, Python is sitting at around 85% CPU when the app is ticking over, and any touch events cause that to fly up to around 235%.</p>\n\n<p>Now, I'm going to take a wild guess that my code is to blame, but can anyone suggest a howto or process to go through to start finding out what / which parts of the code are responsible? I have 3 threads running (apart from Kivy), which seem to look ok, but ideally I guess I'm looking for a 'top' command in Python as a start ;)</p>\n\n<p>EDIT\nok, so I've now run the script through cProfile, which seems to suggest that this is the top user of cpu:</p>\n\n<pre><code>ncalls  tottime  percall  cumtime  percall filename:lineno(function)\n     1    0.000    0.000   11.158   11.158 &lt;string&gt;:1(&lt;module&gt;)\n</code></pre>\n\n<p>To quote the brilliant Ultravox, 'This means nothing to me'...</p>\n"}, {"tags": ["python", "django", "openshift", "wsgi", "django-1.8"], "comments": [{"owner": {"reputation": 601, "user_id": 1636256, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5968a5a993a88221963284a8333f0e6d?s=128&d=identicon&r=PG", "display_name": "Natsukane", "link": "https://stackoverflow.com/users/1636256/natsukane"}, "edited": false, "score": 0, "creation_date": 1465420277, "post_id": 37712689, "comment_id": 62899590, "body": "<a href=\"http://stackoverflow.com/questions/11688819/how-to-configure-django-on-openshift\">This</a> question might help you."}, {"owner": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "reply_to_user": {"reputation": 601, "user_id": 1636256, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5968a5a993a88221963284a8333f0e6d?s=128&d=identicon&r=PG", "display_name": "Natsukane", "link": "https://stackoverflow.com/users/1636256/natsukane"}, "edited": false, "score": 0, "creation_date": 1465420583, "post_id": 37712689, "comment_id": 62899719, "body": "Thanks @Natsukane for the link but I refered already this link in my post. And the answer does not solve my issue"}, {"owner": {"reputation": 601, "user_id": 1636256, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5968a5a993a88221963284a8333f0e6d?s=128&d=identicon&r=PG", "display_name": "Natsukane", "link": "https://stackoverflow.com/users/1636256/natsukane"}, "edited": false, "score": 0, "creation_date": 1465421730, "post_id": 37712689, "comment_id": 62900265, "body": "My bad, I didn&#39;t check that link and assumed it linked to another website instead of SO. In any case, the code in your example and that link is different - did you get the same error when testing that solution? Also, please include the code from your setup.py in your question."}, {"owner": {"reputation": 2926, "user_id": 4589744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d8c232e7f6d7e5c798a552dfaa4b96c?s=128&d=identicon&r=PG&f=1", "display_name": "Praveen Yalagandula", "link": "https://stackoverflow.com/users/4589744/praveen-yalagandula"}, "edited": false, "score": 0, "creation_date": 1465422656, "post_id": 37712689, "comment_id": 62900666, "body": "Also include what is the value for os.environ[&#39;OPENSHIFT_REPO_DIR&#39;] and the full path for the project.settings. It seems like project.settings is not available under the sys path by the time it is getting evaluated."}, {"owner": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "reply_to_user": {"reputation": 601, "user_id": 1636256, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5968a5a993a88221963284a8333f0e6d?s=128&d=identicon&r=PG", "display_name": "Natsukane", "link": "https://stackoverflow.com/users/1636256/natsukane"}, "edited": false, "score": 0, "creation_date": 1465451548, "post_id": 37712689, "comment_id": 62908452, "body": "@Natsukane you want the setup.py under project folder ?"}, {"owner": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "reply_to_user": {"reputation": 2926, "user_id": 4589744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d8c232e7f6d7e5c798a552dfaa4b96c?s=128&d=identicon&r=PG&f=1", "display_name": "Praveen Yalagandula", "link": "https://stackoverflow.com/users/4589744/praveen-yalagandula"}, "edited": false, "score": 0, "creation_date": 1465451709, "post_id": 37712689, "comment_id": 62908523, "body": "@PraveenYalagandula how do you include the full path of my project ?"}], "answers": [{"tags": [], "owner": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "is_accepted": true, "score": 0, "last_activity_date": 1465502613, "creation_date": 1465502613, "answer_id": 37735184, "question_id": 37712689, "link": "https://stackoverflow.com/questions/37712689/configure-wsgi-with-django-on-openshift/37735184#37735184", "title": "Configure WSGI with Django on OpenShift", "body": "<p>I had on the top of <strong>wsgi.py</strong></p>\n\n<pre><code>os.path.join(os.environ['OPENSHIFT_HOMEDIR'], 'app-root/repo')\n</code></pre>\n\n<p>and I didn't have this error !\nAnd I also put all my code under folder which have the name of my project in order to match</p>\n\n<pre><code>os.environ['DJANGO_SETTINGS_MODULE'] = 'project.settings'\n</code></pre>\n"}], "owner": {"reputation": 847, "user_id": 2641416, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NG6kf.jpg?s=128&g=1", "display_name": "general03", "link": "https://stackoverflow.com/users/2641416/general03"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 0, "accepted_answer_id": 37735184, "answer_count": 1, "score": 0, "last_activity_date": 1465502613, "creation_date": 1465419104, "last_edit_date": 1495535341, "question_id": 37712689, "link": "https://stackoverflow.com/questions/37712689/configure-wsgi-with-django-on-openshift", "title": "Configure WSGI with Django on OpenShift", "body": "<p>I tried to configure WSGI with <strong>wsgi.py</strong> in my project folder</p>\n\n<pre><code>import os\nimport sys\n\nsys.path.append(os.path.join(os.environ['OPENSHIFT_REPO_DIR']))\n\nos.environ['DJANGO_SETTINGS_MODULE'] = 'project.settings'\n\nvirtenv = os.environ['OPENSHIFT_HOMEDIR'] + 'python/virtenv/'\nos.environ['PYTHON_EGG_CACHE'] = os.path.join(virtenv, 'lib/python2.7/site-packages')\n\nvirtualenv = os.path.join(virtenv, 'bin/activate_this.py')\ntry:\n    execfile(virtualenv, dict(__file__=virtualenv))\nexcept IOError:\n    pass\n#\n# IMPORTANT: Put any additional includes below this line.  If placed above this\n# line, it's possible required libraries won't be in your searchable path\n#\n\nimport django.core.handlers.wsgi\napplication = django.core.handlers.wsgi.WSGIHandler()\n</code></pre>\n\n<p>but I have <strong>Internal Server Error 500</strong> </p>\n\n<pre><code>[Wed Jun 08 16:42:46 2016] [error] [client 127.9.155.129] ImportError: No module named project.settings\n</code></pre>\n\n<p>and I have this module available in my projet.</p>\n\n<p>I tried some help like : </p>\n\n<ul>\n<li><a href=\"http://www.appsembler.com/blog/django-deployment-using-openshift/\" rel=\"nofollow noreferrer\">http://www.appsembler.com/blog/django-deployment-using-openshift/</a></li>\n<li><a href=\"https://stackoverflow.com/questions/11688819/how-to-configure-django-on-openshift\">How to configure Django on OpenShift?</a></li>\n</ul>\n\n<p>Can you help my to launch my app on OpenShift </p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "css", "django", "django-staticfiles", "mezzanine"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4578899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/e8eji.jpg?s=128&g=1", "display_name": "Shojajou", "link": "https://stackoverflow.com/users/4578899/shojajou"}, "edited": false, "score": 0, "creation_date": 1465455550, "post_id": 37714398, "comment_id": 62910373, "body": "Thanks. And what is AWS S3?"}, {"owner": {"reputation": 1256, "user_id": 5186864, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84a45ac1ccac37ed3a6565851115ecbf?s=128&d=identicon&r=PG&f=1", "display_name": "Falk Schuetzenmeister", "link": "https://stackoverflow.com/users/5186864/falk-schuetzenmeister"}, "reply_to_user": {"reputation": 85, "user_id": 4578899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/e8eji.jpg?s=128&g=1", "display_name": "Shojajou", "link": "https://stackoverflow.com/users/4578899/shojajou"}, "edited": false, "score": 1, "creation_date": 1465489434, "post_id": 37714398, "comment_id": 62933953, "body": "Never mind. It is just a storage solution in the cloud using Amazon Web Services that becomes more and more popular. The case in point is that static files can be collected anywhere since Django doesn&#39;t do anything with them. They will be loaded by the clients browser. Of course rendered templates need to point to the correct location. For this reason you need to specify this locations in the settings."}], "tags": [], "owner": {"reputation": 1256, "user_id": 5186864, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/84a45ac1ccac37ed3a6565851115ecbf?s=128&d=identicon&r=PG&f=1", "display_name": "Falk Schuetzenmeister", "link": "https://stackoverflow.com/users/5186864/falk-schuetzenmeister"}, "is_accepted": true, "score": 3, "last_activity_date": 1465490296, "last_edit_date": 1465490296, "creation_date": 1465427317, "answer_id": 37714398, "question_id": 37712665, "link": "https://stackoverflow.com/questions/37712665/django-mezzanine-staticfiles-frustrating-error/37714398#37714398", "title": "django - mezzanine - staticfiles - frustrating error", "body": "<p>Django does not serve static files if DEBUG=False. The <code>--insecure</code> option seems to be a workaround or more precisely, the dev server runs automatically insecure if in debug mode.</p>\n\n<p>The proper way is in a production environment would be to run <code>python manage.py collectstatic</code> and point the remote proxy server (nginx, apache, or the like) to the resulting folder (which can be configured in settings). Alternatively you can place your statics in an AWS S3 bucket. </p>\n\n<p>You should not run your project of <code>python manage.py runserver</code> in production anyways. If you are not deploying yet, just test your project with <code>DEBUG=True</code>.</p>\n\n<p>An additional option is to add a static view to your url configuration.</p>\n\n<pre><code># urls.py\n\nfrom os import path\nfrom django.conf import settings\nfrom django.conf.urls import url\nfrom django.views.static import serve\n\nurlpatterns = [\n    # your patterns here \n]\n\nurlpatterns += [url(\n    r'^static/(?P&lt;path&gt;.*)$', serve, \n    {'document_root': path.join(settings.BASE_DIR, 'static/public')})]\n</code></pre>\n\n<p>Obviously the paths have to match your projects. But even this approach is not recommended in production. It just circumvents the fact that Django does not serves static if DEBUG = False. It still requires that you run <code>python manage.py collectstatic</code> whenever you make changes to your static files.</p>\n"}], "owner": {"reputation": 85, "user_id": 4578899, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/e8eji.jpg?s=128&g=1", "display_name": "Shojajou", "link": "https://stackoverflow.com/users/4578899/shojajou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "accepted_answer_id": 37714398, "answer_count": 1, "score": 1, "last_activity_date": 1465490296, "creation_date": 1465419019, "last_edit_date": 1495542310, "question_id": 37712665, "link": "https://stackoverflow.com/questions/37712665/django-mezzanine-staticfiles-frustrating-error", "title": "django - mezzanine - staticfiles - frustrating error", "body": "<p>I'm new to Django. I have some difficulties, my static files are not loaded properly.</p>\n\n<p>My project directory looks like this:</p>\n\n<ul>\n<li>myNewWebSite\n\n<ul>\n<li>myNewWebSite</li>\n<li>home</li>\n<li>static\n\n<ul>\n<li>css\n\n<ul>\n<li>home.css </li>\n</ul></li>\n</ul></li>\n<li>templates\n\n<ul>\n<li>home\n\n<ul>\n<li>index</li>\n</ul></li>\n</ul></li>\n</ul></li>\n<li>manage.py</li>\n<li>init.py</li>\n</ul>\n\n<p>I configured following settings in myNewWebSite/settings.py:</p>\n\n<pre><code>PROJECT_APP_PATH = os.path.dirname(os.path.abspath(__file__))\nPROJECT_APP = os.path.basename(PROJECT_APP_PATH)\nPROJECT_ROOT = BASE_DIR = os.path.dirname(PROJECT_APP_PATH)\nSTATIC_URL = \"/static/\"\nSTATIC_ROOT = os.path.join(PROJECT_ROOT, STATIC_URL.strip(\"/\"))\n</code></pre>\n\n<p>My template (templates/home/index.html):</p>\n\n<pre><code>{% load staticfiles %}\n&lt;html&gt;\n&lt;head&gt;\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"{% static 'css/home.css' %}\" /&gt;\n&lt;/head&gt;\n&lt;body&gt;\n    &lt;h1 id=\"test\"&gt;Hello World, This is my first website in django&lt;/h1&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>My styles in static/css/home.css:</p>\n\n<pre><code>body {\n    background-color: red;\n}\n\n#test {\n    border: 10px solid green;\n}\n</code></pre>\n\n<p>I cannot see any effect of these changes. Only the message <code>Hello World,...</code> shows up. The output shows this:</p>\n\n<pre><code>[08/Jun/2016 20:36:04] \"GET /myhome/ HTTP/1.1\" 200 178\n[08/Jun/2016 20:36:04] \"GET /static/css/home.css HTTP/1.1\" 301 0\n[08/Jun/2016 20:36:04] \"GET /static/css/home.css/ HTTP/1.1\" 404 4930\n</code></pre>\n\n<p>I have set <code>DEBUG = False</code> in <strong>settings.py</strong> and <strong>local_settings.py</strong>(in Mezzanine).</p>\n\n<p>What is the problem?</p>\n\n<h2>UPDATE</h2>\n\n<p>Running the development server with <code>--insecure</code> parameter solved the problem. </p>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/a/7574901/4578899\"><strong>GDorn</strong></a></p>\n\n<p>IF <code>DEBUG = False</code> THEN <code>python manage.py runserver --insecure</code></p>\n"}, {"tags": ["python", "cython", "ctypes", "python-extensions"], "answers": [{"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 6, "last_activity_date": 1465419297, "creation_date": 1465419297, "answer_id": 37712741, "question_id": 37712561, "link": "https://stackoverflow.com/questions/37712561/differences-between-cython-extending-c-c-with-python-h-etc/37712741#37712741", "title": "Differences between Cython, extending C/C++ with Python.h, etc", "body": "<p>It helps to know what you need to do here.</p>\n\n<p>If you're not using <code>ctypes</code> for function calls, it's unlikely that it will save you anything to just have <code>ctypes</code> types involved. If you already have some DLL lying around with a \"solve it for me\" function, then sure, <code>ctypes</code> it is.</p>\n\n<p>Cython creates extension modules, so anything you can do with Cython could also be done with an extension module, it just depends on how comfortable you are writing extensions by hand. Cython is more limited than writing extension by hand, and harder to \"see\" performance in (the rules for optimizing Cython are basically the opposite of optimizing CPython code, and if you forget to <code>cdef</code> the right things, you gain nothing), but Cython is generally simpler too.</p>\n\n<p>Writing a separate non-extension DLL is only worthwhile if you have non-Python uses for it; otherwise, a Python extension is basically just the DLL case, but better integrated.</p>\n\n<p>Basically, by definition, with infinite time and skill, a CPython extension will beat any other option on performance since it can do everything the others do, and more. It's just more work, and easy to make mistakes (because you're writing C, which is error prone).</p>\n"}], "owner": {"reputation": 2867, "user_id": 2599709, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/3c565ca54f4e129a36e857b20f5ff86f?s=128&d=identicon&r=PG", "display_name": "Chrispresso", "link": "https://stackoverflow.com/users/2599709/chrispresso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 1, "accepted_answer_id": 37712741, "answer_count": 1, "score": 5, "last_activity_date": 1465428222, "creation_date": 1465418618, "last_edit_date": 1465419330, "question_id": 37712561, "link": "https://stackoverflow.com/questions/37712561/differences-between-cython-extending-c-c-with-python-h-etc", "title": "Differences between Cython, extending C/C++ with Python.h, etc", "body": "<p>Right now I have an image processing algorithm that is roughly 100 lines or so in Python. It takes about 500ms using <code>numpy</code>, <code>PIL</code> and <code>scipy</code>. I am looking to get it faster, and as the actual algorithm seems pretty optimized thus far, I'm wondering if using a different approach such as <code>Cython</code> would improve the times. I believe that I have several different things I could do:</p>\n\n<ol>\n<li><strong>Use Cython</strong> to expose relevant parts of the C library to Python.</li>\n<li><strong>Use Ctypes</strong> to just write everything in C but still have it pure Python (not leaning towards this at all)</li>\n<li><strong>Create an extension module</strong> in C/C++ and them import it and call the functions. I'm not sure if I would be able to use <code>numpy</code> this way though.</li>\n<li><strong>Create a DLL</strong> and have Python load it. This doesn't get to use <code>numpy</code> or those modules, but would still be very efficient.</li>\n</ol>\n\n<p>I'm just looking for speed here, not worried about difficulty of the implementation. Is there any one option that is better in this case, are they all the same, or is it even worth doing?</p>\n"}, {"tags": ["python", "html", "beautifulsoup"], "answers": [{"comments": [{"owner": {"reputation": 1688, "user_id": 2058355, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/F4ysP.jpg?s=128&g=1", "display_name": "prashantitis", "link": "https://stackoverflow.com/users/2058355/prashantitis"}, "edited": false, "score": 0, "creation_date": 1465419760, "post_id": 37712638, "comment_id": 62899351, "body": "if I have multiple such html elements then replacing .find with .findAll should work, but it&#39;s not working?"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 1688, "user_id": 2058355, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/F4ysP.jpg?s=128&g=1", "display_name": "prashantitis", "link": "https://stackoverflow.com/users/2058355/prashantitis"}, "edited": false, "score": 0, "creation_date": 1465419850, "post_id": 37712638, "comment_id": 62899394, "body": "@Prashant i that case, you should find all blocks first, via, say <code>for company in soup.find_all(&quot;div&quot;, class_=&quot;organization_autocomplete&quot;):</code>. Then, for every company use the solution I&#39;ve proposed, but replace <code>soup</code> with <code>company</code>."}, {"owner": {"reputation": 1688, "user_id": 2058355, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/F4ysP.jpg?s=128&g=1", "display_name": "prashantitis", "link": "https://stackoverflow.com/users/2058355/prashantitis"}, "edited": false, "score": 0, "creation_date": 1465420255, "post_id": 37712638, "comment_id": 62899585, "body": "that worked, but I get confuse in classes where they have multiple name like &quot;&lt;div class=&quot;container organization_autocomplete&quot;&gt;&quot; In this how to decide which one to use for selecting name container or organization_autocomplete and similarily for  &lt;div class=&quot;identity container&quot;&gt;"}, {"owner": {"reputation": 1688, "user_id": 2058355, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/F4ysP.jpg?s=128&g=1", "display_name": "prashantitis", "link": "https://stackoverflow.com/users/2058355/prashantitis"}, "edited": false, "score": 0, "creation_date": 1465420485, "post_id": 37712638, "comment_id": 62899686, "body": "Also for let&#39;s say name why we didn&#39;t used these classes &lt;div class=&quot;follow_card_wrapper&quot;&gt;&lt;div class=&quot;link_container&quot;&gt;&lt;div class=&quot;name follow_card&quot;"}, {"owner": {"reputation": 1688, "user_id": 2058355, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/F4ysP.jpg?s=128&g=1", "display_name": "prashantitis", "link": "https://stackoverflow.com/users/2058355/prashantitis"}, "edited": false, "score": 0, "creation_date": 1465420734, "post_id": 37712638, "comment_id": 62899788, "body": "Can you please help me figure this out, because I always gets confused in such cases, It would be much better if you could add explaination in your answer itself"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 1688, "user_id": 2058355, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/F4ysP.jpg?s=128&g=1", "display_name": "prashantitis", "link": "https://stackoverflow.com/users/2058355/prashantitis"}, "edited": false, "score": 0, "creation_date": 1465422499, "post_id": 37712638, "comment_id": 62900607, "body": "@Prashant sure, could you please create a separate question to keep this topic clean? Make sure to provide all the necessary details needed to answer. Thanks."}, {"owner": {"reputation": 1688, "user_id": 2058355, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/F4ysP.jpg?s=128&g=1", "display_name": "prashantitis", "link": "https://stackoverflow.com/users/2058355/prashantitis"}, "edited": false, "score": 0, "creation_date": 1465454423, "post_id": 37712638, "comment_id": 62909761, "body": "The further queries are related to same topic, please consider adding more details here itself, I had already added each and every detail in the question as well as comments"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 1688, "user_id": 2058355, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/F4ysP.jpg?s=128&g=1", "display_name": "prashantitis", "link": "https://stackoverflow.com/users/2058355/prashantitis"}, "edited": false, "score": 0, "creation_date": 1465479072, "post_id": 37712638, "comment_id": 62926202, "body": "@Prashant ok, added some information to the answer. Hope that helps."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 2, "last_activity_date": 1465479021, "last_edit_date": 1465479021, "creation_date": 1465418901, "answer_id": 37712638, "question_id": 37712501, "link": "https://stackoverflow.com/questions/37712501/find-elements-in-html-dom/37712638#37712638", "title": "find elements in html DOM", "body": "<p>I would get both name and logo using the class attributes:</p>\n\n<pre><code>logo = soup.find(\"div\", class_=\"logo\").img[\"src\"]\nname = soup.find(\"div\", class_=\"identity\").find(\"div\", class_=\"name\").get_text()\n\nprint(logo, name)\n</code></pre>\n\n<p>Or, via <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors\" rel=\"nofollow\">CSS selectors</a>:</p>\n\n<pre><code>logo = soup.select_one(\"div.logo img\")[\"src\"]\nname = soup.select_one(\"div.identity div.name\").get_text()\n\nprint(logo, name)\n</code></pre>\n\n<p>As for choosing which classes to use, and which location techniques to apply in general - there is no silver bullet. Though, it is recommended to rely on ids and \"data-oriented\" classes or other data-oriented attributes. For instance, in your case, <code>container</code> class is more \"layout\"-oriented than \"data\"-oriented. </p>\n"}], "owner": {"reputation": 1688, "user_id": 2058355, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/F4ysP.jpg?s=128&g=1", "display_name": "prashantitis", "link": "https://stackoverflow.com/users/2058355/prashantitis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 1, "accepted_answer_id": 37712638, "answer_count": 1, "score": -1, "last_activity_date": 1465479021, "creation_date": 1465418429, "last_edit_date": 1465421883, "question_id": 37712501, "link": "https://stackoverflow.com/questions/37712501/find-elements-in-html-dom", "title": "find elements in html DOM", "body": "<p>I want to get Name/logo/Description/type from this HTML DOM \nI use python Beautiful Soup and got Description and Type\nusing </p>\n\n<pre><code>soup = BeautifulSoup(html_data)\nfor h in soup.findAll(\"span\", { \"class\" : \"description\" }):\n     print h.text\n</code></pre>\n\n<p>But Unable to get the Name and logo in a Json file.</p>\n\n<pre><code>&lt;a href=\"/organization/flipkart\"&gt;\n    &lt;div class=\"container organization_autocomplete\"&gt;\n      &lt;div class=\"logo\"&gt;\n        &lt;img src=\"https://abcdsdsdsf/imm.jpg\"&gt;\n      &lt;/div&gt;\n      &lt;div class=\"identity container\"&gt;\n        &lt;div class=\"follow_card_wrapper\"&gt;&lt;div class=\"link_container\"&gt;&lt;div class=\"name follow_card\" data-name=\"Flipkart\" data-type=\"Organization\" data-uuid=\"43b9e775b843f194fb96d266684cfb53\" data-permalink=\"/organization/flipkart\" data-image=\"https://abcdsdsdsf/imm.jpg\"&gt;Flipkart&lt;/div&gt;&lt;/div&gt;&lt;div class=\"card_inner\"&gt;&lt;/div&gt;&lt;/div&gt;\n        &lt;div class=\"content container\"&gt;\n          &lt;span class=\"type\"&gt;Company - &lt;/span&gt;\n            &lt;span class=\"description\"&gt;\n              Flipkart is an online shopping destination for electronics, books, music and movies.\n            &lt;/span&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/a&gt;\n</code></pre>\n\n<p>I tried with the same method replacing Class name, but get empty output.\nCan anyone tell how the Nested class be dealt in such cases</p>\n\n<p><strong>EDIT</strong>\nI appreciate Alecxe efforts but Looking at alecxe's answer I have some confusions.</p>\n\n<p><strong>It would be good if someone can explain that the classes where they\n   have multiple name like</strong> </p>\n\n<pre><code>&lt;div class=container\n   organization_autocomplete&gt;\n</code></pre>\n\n<p>In this how to decide which one to use\n   for selecting name container or organization_autocomplete and\n   similarily for </p>\n\n<ul>\n<li>Also for let's say name why we didn't used these classes \nclass=\"follow_card_wrapper\">\nclass=\"name follow_card\"</li>\n</ul>\n"}, {"tags": ["python", "sqlalchemy"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1465441073, "post_id": 37712473, "comment_id": 62905459, "body": "What prevents you from from testing your assumption?"}, {"owner": {"reputation": 3997, "user_id": 1344476, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/a19f9730ac71e7d8e5be91aa1d0ea06f?s=128&d=identicon&r=PG", "display_name": "Ray", "link": "https://stackoverflow.com/users/1344476/ray"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1465493235, "post_id": 37712473, "comment_id": 62936182, "body": "I changed the order of the fixtures in the parameters and I got the expected result. My ordering (get_all) works fine. But I want to know the initial order of the three right before the get_all call. How can I view that? I&#39;m not sure if I am explaining it right."}], "owner": {"reputation": 3997, "user_id": 1344476, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/a19f9730ac71e7d8e5be91aa1d0ea06f?s=128&d=identicon&r=PG", "display_name": "Ray", "link": "https://stackoverflow.com/users/1344476/ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1465421742, "creation_date": 1465418324, "last_edit_date": 1465421742, "question_id": 37712473, "link": "https://stackoverflow.com/questions/37712473/fixture-order-in-python", "title": "Fixture order in Python", "body": "<p>I have the following unit test in Python that uses three fixtures <code>bill_to1</code>, <code>bill_to2</code>, <code>bill_to3</code>, with different values:</p>\n\n<pre><code>def test_get_all_lists_master_first(dbsession, invoice_group1, bill_to3, bill_to2, bill_to1):\n    bill_tos = BillTo.get_all(dbsession, invoice_group1.id)\n    assert bill_tos.first().is_master\n</code></pre>\n\n<p>Can anyone tell me if my fixtures are created in the order I list them in the parameters on the first line? I ask because my test tests the ordering of my bill_to items and I want to make sure my call to get_all orders it properly. But I'm not sure if the list starts off already un-ordered.</p>\n"}, {"tags": ["python", "scipy", "hierarchical-clustering"], "answers": [{"comments": [{"owner": {"reputation": 3364, "user_id": 1884171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uisYs.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/1884171/andrew"}, "edited": false, "score": 0, "creation_date": 1465435604, "post_id": 37712929, "comment_id": 62904436, "body": "Does this answer your question?"}, {"owner": {"reputation": 193, "user_id": 4082824, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-kWJAozeu8B0/AAAAAAAAAAI/AAAAAAAAAFc/QCZPdr-NweA/photo.jpg?sz=128", "display_name": "Duong Trung Nghia", "link": "https://stackoverflow.com/users/4082824/duong-trung-nghia"}, "edited": false, "score": 1, "creation_date": 1465495273, "post_id": 37712929, "comment_id": 62937457, "body": "Yes, that is correct. Minor adjustment is &quot;An (n\u22121) by 4 matrix Z&quot;"}], "tags": [], "owner": {"reputation": 3364, "user_id": 1884171, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/uisYs.jpg?s=128&g=1", "display_name": "andrew", "link": "https://stackoverflow.com/users/1884171/andrew"}, "is_accepted": true, "score": 8, "last_activity_date": 1465495545, "last_edit_date": 1495540917, "creation_date": 1465419962, "answer_id": 37712929, "question_id": 37712465, "link": "https://stackoverflow.com/questions/37712465/what-is-the-meaning-of-the-return-values-of-the-scipy-cluster-hierarchy-linkage/37712929#37712929", "title": "what is the meaning of the return values of the scipy.cluster.hierarchy.linkage?", "body": "<p>Although this has <a href=\"https://stackoverflow.com/questions/9838861/scipy-linkage-format\">been answered before</a>, it was a \"read the docs\" answer. I think it is useful to explain the docs a bit.</p>\n\n<p>From the docs, we read that:</p>\n\n<blockquote>\n  <p>An (n\u22121) by 4 matrix Z is returned. At the i-th iteration, clusters\n  with indices Z[i, 0] and Z[i, 1] are combined to form cluster n + i. A\n  cluster with an index less than n corresponds to one of the n original\n  observations. The distance between clusters Z[i, 0] and Z[i, 1] is\n  given by Z[i, 2]. The fourth value Z[i, 3] represents the number of\n  original observations in the newly formed cluster.</p>\n</blockquote>\n\n<p>I think the confusing part is the the first n clusters are singletons (\"original observations\"). So the first value in Z actually the n+1'th cluster. It is the first cluster to combine two singletons.</p>\n\n<p>So in your example, Z[0] is the 4+1'th cluster. We have </p>\n\n<pre><code> Z[0] = [  1.           2.           1.41421356   2.        ]\n</code></pre>\n\n<p>The first two values tell us which clusters were used to create cluster Z[0]. They are cluster_1, the singleton [1,4], and cluster_2, the singleton [2, 3].</p>\n\n<p>The third value gives us the distance between the clusters. We can verify that sqrt((2-1)^2 + (3-4)^2)) = 1.41... </p>\n\n<p>The fourth value tells us how many singletons are in cluster Z[0].</p>\n\n<p>So looking at your last cluster, Z[2], we see that is combines the firs two clusters in Z. Each of them contains two unique singletons, so the Z[2,3] = 4.</p>\n"}], "owner": {"reputation": 193, "user_id": 4082824, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh3.googleusercontent.com/-kWJAozeu8B0/AAAAAAAAAAI/AAAAAAAAAFc/QCZPdr-NweA/photo.jpg?sz=128", "display_name": "Duong Trung Nghia", "link": "https://stackoverflow.com/users/4082824/duong-trung-nghia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2208, "favorite_count": 2, "accepted_answer_id": 37712929, "answer_count": 1, "score": 4, "last_activity_date": 1465495545, "creation_date": 1465418313, "question_id": 37712465, "link": "https://stackoverflow.com/questions/37712465/what-is-the-meaning-of-the-return-values-of-the-scipy-cluster-hierarchy-linkage", "title": "what is the meaning of the return values of the scipy.cluster.hierarchy.linkage?", "body": "<p>Let assume that we have X matrix as follows:</p>\n\n<pre><code>[[9 0]\n[1 4]\n[2 3]\n[8 5]]\n</code></pre>\n\n<p>Then,</p>\n\n<pre><code>from scipy.cluster.hierarchy import linkage\nZ = linkage(X, method=\"ward\")\nprint(Z)\n</code></pre>\n\n<p>The returning matrix is follows:</p>\n\n<pre><code>[[  1.           2.           1.41421356   2.        ]\n [  0.           3.           5.09901951   2.        ]\n [  4.           5.          10.           4.        ]]\n</code></pre>\n\n<p>What is the meaning of the returning values?</p>\n"}, {"tags": ["python", "oracle", "postgresql", "psycopg2", "cx-oracle"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 1, "creation_date": 1465419449, "post_id": 37712411, "comment_id": 62899224, "body": "As to why cx_Oracle is able to create the funky datetime: <a href=\"https://bitbucket.org/anthony_tuininga/cx_oracle/src/1a6c77089c453202cd687de7a5c8cb06aca4c35d/Transforms.c?at=default&amp;fileviewer=file-view-default#Transforms.c-26\" rel=\"nofollow noreferrer\">it uses the C-API</a>."}, {"owner": {"reputation": 82590, "user_id": 1509264, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ab28e5358f7959b75d8649c7e1759874?s=128&d=identicon&r=PG", "display_name": "MT0", "link": "https://stackoverflow.com/users/1509264/mt0"}, "edited": false, "score": 0, "creation_date": 1465419602, "post_id": 37712411, "comment_id": 62899287, "body": "What do you get if you <code>SELECT DUMP( CAR_RENTAL_DATE ) FROM TRXNS_ALL WHERE TRX_ID = 50079327</code>?"}, {"owner": {"reputation": 281, "user_id": 6442235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6113d13adece0f8355e43126fb26e84a?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Damiani", "link": "https://stackoverflow.com/users/6442235/jason-damiani"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1465419762, "post_id": 37712411, "comment_id": 62899355, "body": "@IljaEveril&#228; that makes sense"}, {"owner": {"reputation": 82590, "user_id": 1509264, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ab28e5358f7959b75d8649c7e1759874?s=128&d=identicon&r=PG", "display_name": "MT0", "link": "https://stackoverflow.com/users/1509264/mt0"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1465419774, "post_id": 37712411, "comment_id": 62899361, "body": "@IljaEveril&#228; You can create the date using pure SQL: <code>SELECT DATE &#39;0000-06-30&#39; FROM DUAL</code>."}, {"owner": {"reputation": 281, "user_id": 6442235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6113d13adece0f8355e43126fb26e84a?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Damiani", "link": "https://stackoverflow.com/users/6442235/jason-damiani"}, "reply_to_user": {"reputation": 82590, "user_id": 1509264, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ab28e5358f7959b75d8649c7e1759874?s=128&d=identicon&r=PG", "display_name": "MT0", "link": "https://stackoverflow.com/users/1509264/mt0"}, "edited": false, "score": 0, "creation_date": 1465419810, "post_id": 37712411, "comment_id": 62899379, "body": "@MT0 this is the output <code>Typ=12 Len=7: 100,100,6,30,1,1,1</code>"}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 82590, "user_id": 1509264, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ab28e5358f7959b75d8649c7e1759874?s=128&d=identicon&r=PG", "display_name": "MT0", "link": "https://stackoverflow.com/users/1509264/mt0"}, "edited": false, "score": 0, "creation_date": 1465420560, "post_id": 37712411, "comment_id": 62899708, "body": "@MT0 meant why cx_Oracle is able to create the 0 year <i>python</i> datetime object from the Oracle datetime. Normally you&#39;d get an exception."}, {"owner": {"reputation": 97819, "user_id": 131874, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b3600796ab1d9e78c7545c91468c2e51?s=128&d=identicon&r=PG", "display_name": "Clodoaldo Neto", "link": "https://stackoverflow.com/users/131874/clodoaldo-neto"}, "edited": false, "score": 0, "creation_date": 1465484228, "post_id": 37712411, "comment_id": 62930225, "body": "Extract the date from Oracle as a string in the format <code>YYYY-MM-DD</code>"}], "owner": {"reputation": 281, "user_id": 6442235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6113d13adece0f8355e43126fb26e84a?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Damiani", "link": "https://stackoverflow.com/users/6442235/jason-damiani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 360, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1465418111, "creation_date": 1465418111, "question_id": 37712411, "link": "https://stackoverflow.com/questions/37712411/python-oracle-cx-oracle-date-behavior-with-year-0-issues", "title": "Python/Oracle/cx_Oracle date behavior with year=0 issues", "body": "<p>I'm currently working on some ETL code to incrementally load data from a source Oracle system to a Postgresql analysis environment with Python as the glue. </p>\n\n<p>I am leveraging cx_Oracle as the driver to pull the Oracle data, but I am running into some strange issues with Oracle Date and Python datetime and year 0.</p>\n\n<p>As far as I understand, neither Oracle nor Python support year 0. I've isolated a particular row and field with an offending Date:</p>\n\n<pre><code>SELECT\n  CAR_RENTAL_DATE,\n  EXTRACT(YEAR FROM CAR_RENTAL_DATE)\nFROM\n  TRXNS_ALL\nWHERE\n  TRX_ID = 50079327\n</code></pre>\n\n<p>Here are the results from the sqlplus CLI:</p>\n\n<pre><code>CAR_RENTA EXTRACT(YEARFROMCAR_RENTAL_DATE)\n--------- --------------------------------\n30-JUN-00                0\n</code></pre>\n\n<p>According to this post, it is actually possible to create an Oracle Date with year 0, but its not officially supported in the docs: <a href=\"http://rwijk.blogspot.com/2008/10/year-zero.html\" rel=\"nofollow\">http://rwijk.blogspot.com/2008/10/year-zero.html</a></p>\n\n<p>The issue I am having is the Python representation that cx_Oracle is returning to me:</p>\n\n<pre><code>cur.execute('select CAR_RENTAL_DATE, extract(year from CAR_RENTAL_DATE) FROM TRXNS_ALL where TRX_ID = 50079327')\nres = cur.fetchone()\nprint repr(res[0]), type(res[0])\n</code></pre>\n\n<p>Which results in the following:</p>\n\n<pre><code>datetime.datetime(0, 6, 30, 0, 0) &lt;type 'datetime.datetime'&gt;\n</code></pre>\n\n<p>Strangely (but expectedly), creating the same Python datetime gives me an error:</p>\n\n<pre><code>dt = datetime.datetime(0, 6, 30, 0, 0)\n\nValueError: year is out of range\n</code></pre>\n\n<p>When I attempt to insert this datetime to a Postgresql timestamp field with psycopg2, the insertion fails, as expected.</p>\n\n<p>What is really going on here? How do Oracle and Python both support year 0 despite their documentation?</p>\n\n<p>What is a good way to handle this aside from iterating over every tuple value returned by cx_Oracle to detect and handle year=0?</p>\n"}, {"tags": ["python", "linux", "ipython"], "comments": [{"owner": {"reputation": 474, "user_id": 5923998, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9376d73bf02a34860f8103933cda5480?s=128&d=identicon&r=PG&f=1", "display_name": "seanmus", "link": "https://stackoverflow.com/users/5923998/seanmus"}, "edited": false, "score": 0, "creation_date": 1465422745, "post_id": 37712353, "comment_id": 62900698, "body": "Not exactly an answer,  but why not use separate virtual environments for Python 2 and Python 3? This is what I do."}], "answers": [{"tags": [], "owner": {"reputation": 348, "user_id": 6308345, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9PZAr.png?s=128&g=1", "display_name": "Stephen Balousek", "link": "https://stackoverflow.com/users/6308345/stephen-balousek"}, "is_accepted": false, "score": 1, "last_activity_date": 1470364229, "creation_date": 1470364229, "answer_id": 38780202, "question_id": 37712353, "link": "https://stackoverflow.com/questions/37712353/adding-python-2-kernel-to-ipython/38780202#38780202", "title": "Adding Python 2 kernel to Ipython", "body": "<p>I experienced the same issue and found that a <code>backports</code> package was installed in both the Python 2.7 system site directory <em>and</em> the user site directory.  Furthermore, the <code>backports.shutil_get_terminal_size</code> package was only in the system site directory:</p>\n\n<pre><code>$ ls -l $(find / -name 'backports' 2&gt;/dev/null)\n/root/.local/lib/python2.7/site-packages/backports:\ntotal 0\ndrwxr-xr-x 1 root root 88 Aug  4 16:04 configparser\n\n/usr/lib/python2.7/site-packages/backports:\ntotal 8\n-rw-r--r-- 1 root root  75 Aug  4 17:58 __init__.py\n-rw-r--r-- 1 root root 267 Aug  4 17:58 __init__.pyc\ndrwxr-xr-x 1 root root 128 Aug  4 17:58 shutil_get_terminal_size\n</code></pre>\n\n<p>When Python executes an <code>import</code> statement, it looks in the user site directory first, and then looks in the system site directory.  Since the <code>shutil_get_terminal_size</code> package is not in the <code>backports</code> package in the user site directory, that import will always fail.  Here's what the import error looks like in its minimal form:</p>\n\n<pre><code>$ echo \"from backports.shutil_get_terminal_size import get_terminal_size; \\\n        print(get_terminal_size())\" | python2\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nImportError: No module named shutil_get_terminal_size\n</code></pre>\n\n<p>Adding the <code>-s</code> option on the python command line tells Python to <strong>not</strong> use the user site directory, and the import command succeeds:</p>\n\n<pre><code>$ echo \"from backports.shutil_get_terminal_size import get_terminal_size; \\\n        print(get_terminal_size())\" | python2 -s\nterminal_size(columns=319, lines=104)\n</code></pre>\n\n<p>The <code>install</code> command also succeeds when the <code>-s</code> option is added to the python command line:</p>\n\n<pre><code>$ python2 -s -m ipykernel install\nInstalled kernelspec python2 in /usr/local/share/jupyter/kernels/python2\n</code></pre>\n\n<p>How the <code>backports</code> package got into the user site directory in the first place is still a mystery.</p>\n"}], "owner": {"reputation": 433, "user_id": 6114794, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a3c35f609ef85a1e958d145052126a13?s=128&d=identicon&r=PG&f=1", "display_name": "Anderlecht", "link": "https://stackoverflow.com/users/6114794/anderlecht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1404, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1470364229, "creation_date": 1465417896, "question_id": 37712353, "link": "https://stackoverflow.com/questions/37712353/adding-python-2-kernel-to-ipython", "title": "Adding Python 2 kernel to Ipython", "body": "<p>I have Jupyter Notebook installed on Ubuntu. Python 2 and 3 run OK on the terminal but only Python 3 shows up on IPython. I am trying to get both kernels (2 and 3) up on IPython.</p>\n\n<p>I've tried to manually install ipykernel from <a href=\"https://github.com/ipython/ipykernel\" rel=\"nofollow\">https://github.com/ipython/ipykernel</a> which was successful but still can't get Python 2 kernel to show up. I also tried: </p>\n\n<pre><code>&gt; sudo ipython2 kernelspec install-self\n</code></pre>\n\n<p>And got the error: <code>ImportError: No module named shutil_get_terminal_size</code> </p>\n\n<p>Next, i tried:</p>\n\n<pre><code>python2 -m pip install --upgrade ipykernel \npython2 -m ipykernel install \n</code></pre>\n\n<p>The second line returned an error:</p>\n\n<pre><code>/usr/bin/python2: No module named shutil_get_terminal_size; 'ipykernel' is a package and cannot be directly executed\n</code></pre>\n\n<p>I guess the challenge is with the module named <em>shutil_get_terminal_size</em>. Please, kindly advise on how I can fix this. I read this post: <a href=\"https://github.com/ipython/ipython/issues/9416\" rel=\"nofollow\">https://github.com/ipython/ipython/issues/9416</a> but can't make much sense of it.</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "django", "django-forms", "formset"], "comments": [{"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1465421937, "post_id": 37712328, "comment_id": 62900358, "body": "What is the result from your current clean function? What&#39;s wrong with it?"}, {"owner": {"reputation": 321, "user_id": 932755, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/755c6d280b1b57810a77d22f8dfe72c9?s=128&d=identicon&r=PG", "display_name": "Fabian", "link": "https://stackoverflow.com/users/932755/fabian"}, "reply_to_user": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1465474836, "post_id": 37712328, "comment_id": 62922847, "body": "@H&#229;kenLid I get the forms displayed again and those forms with just one filled field (the date_of_issue with the initial value) are marked as &quot;need to be filled&quot; (as other fields of the form are required). I don&#39;t know if the clean function is the way to go ..."}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1465477889, "post_id": 37712328, "comment_id": 62925230, "body": "I see. I find that you lose a lot of the convenience of the django forms framework once you start any not trivial overriding of methods and functionality. In this case, I would consider either dropping the placeholder, or find some client side solution to this. A javascript &quot;today&quot; button to fill the date, maybe. Or a javascript function that pre validates formsets on submit, and filters out the sub forms where only <code>date_of_issue</code> is filled."}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 1, "creation_date": 1465478365, "post_id": 37712328, "comment_id": 62925633, "body": "I haven&#39;t used formsets much, so I can&#39;t give you a suggestion to how this can be done server side. Looks like the <code>clean_field</code> method doesn&#39;t work, so it&#39;s a matter of figuring out which other method to override. I would look at the <code>changed_data</code> property and the <code>has_changed</code> method of the  <a href=\"https://github.com/django/django/blob/1.9.7/django/forms/forms.py#L64\" rel=\"nofollow noreferrer\"><code>django.forms.forms.BaseForm</code> class.</a>"}], "answers": [{"tags": [], "owner": {"reputation": 321, "user_id": 932755, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/755c6d280b1b57810a77d22f8dfe72c9?s=128&d=identicon&r=PG", "display_name": "Fabian", "link": "https://stackoverflow.com/users/932755/fabian"}, "is_accepted": true, "score": 0, "last_activity_date": 1465624450, "creation_date": 1465624450, "answer_id": 37760454, "question_id": 37712328, "link": "https://stackoverflow.com/questions/37712328/django-formset-ingore-forms-contaning-only-initial-values/37760454#37760454", "title": "django - FormSet: ingore forms contaning only initial values", "body": "<p>Thx @h\u00e5ken-lid for pushing me into the code. I should have done it in the first place.</p>\n\n<p>At the end I don't know what did the trick. I've overwritten most of the clean functions and check the errors at the levels of validation (read the <a href=\"https://docs.djangoproject.com/en/dev/ref/forms/validation/\" rel=\"nofollow\">docs</a>. It helps!)</p>\n\n<p>One thing is the show_hidden_initial. It seems to be necessary for the form to recognize that the initial value didn't change:</p>\n\n<pre><code>class IssueForm(forms.Form):\n    # ...\n\n    date_of_issue = forms.DateField(\n            initial=date.today().strftime(\"%d.%m.%Y\"),\n            show_hidden_initial=True,\n            widget=forms.TextInput(attrs={\n                'placeholder': date.today().strftime(\"%d.%m.%Y\"),\n                'class': 'form-control, datepicker',\n            }),\n            localize=True,\n            required=True)\n</code></pre>\n\n<p>Another approach was to overwrite the form clean function and remove the error (not a really nice solution):</p>\n\n<pre><code>class IssueForm(forms.Form):\n    # ...\n\n    def clean(self):\n        cleaned_data = super(IssueForm, self).clean()\n\n        # get all non default fields\n        not_default_fields = [value for key, value in cleaned_data.items() if key not in ('date_of_issue', 'issuer')]\n\n        if any(not_default_fields) is False and 'value' in self.errors:\n            # remove the error if it's the only one\n            self.errors.pop('value')\n\n        return cleaned_data\n</code></pre>\n\n<p>I don't know why it didn't work like expected in the first place but now it does ...</p>\n"}], "owner": {"reputation": 321, "user_id": 932755, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/755c6d280b1b57810a77d22f8dfe72c9?s=128&d=identicon&r=PG", "display_name": "Fabian", "link": "https://stackoverflow.com/users/932755/fabian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 37760454, "answer_count": 1, "score": 1, "last_activity_date": 1465624450, "creation_date": 1465417807, "question_id": 37712328, "link": "https://stackoverflow.com/questions/37712328/django-formset-ingore-forms-contaning-only-initial-values", "title": "django - FormSet: ingore forms contaning only initial values", "body": "<p>I have a FormSet and each form contains one filed with initial value:</p>\n\n<pre><code>class IssueForm(forms.Form):\n\n    date_of_issue = forms.DateField(\n            initial=date.today().strftime(\"%d.%m.%Y\"),\n            widget=forms.TextInput(attrs={\n                'placeholder': date.today().strftime(\"%d.%m.%Y\"),\n                'class': 'form-control',\n            }),\n            localize=True,\n            required=True)\n</code></pre>\n\n<p>Now the user gets 10 extra forms displayed but maybe he/she just fills 5 of them. Now the field date_of_issue is required and so after submitting the formSet it'll be displayed again and marking those 5 rows not filled by the user.</p>\n\n<p>I tried to add my own clean function for the field but I don't know if this is the way to go:</p>\n\n<pre><code>def clean_date_of_issue(self):\n    if len(self.cleaned_data) == 1 and 'date_of_issue' in self.cleaned_data:\n        self.cleaned_data = dict()\n        return None\n    return self.cleaned_data['date_of_issue']\n</code></pre>\n"}, {"tags": ["python", "sql", "database", "ms-access", "pyodbc"], "comments": [{"owner": {"reputation": 4957, "user_id": 2230844, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b0e722a4823f29c56d7a97bc6500ccc?s=128&d=identicon&r=PG", "display_name": "denfromufa", "link": "https://stackoverflow.com/users/2230844/denfromufa"}, "edited": false, "score": 0, "creation_date": 1465418314, "post_id": 37712307, "comment_id": 62898631, "body": "here is solution in .NET: <a href=\"http://stackoverflow.com/questions/862749/how-to-get-the-primary-key-of-an-ms-access-table-in-c-sharp\" title=\"how to get the primary key of an ms access table in c sharp\">stackoverflow.com/questions/862749/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4957, "user_id": 2230844, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b0e722a4823f29c56d7a97bc6500ccc?s=128&d=identicon&r=PG", "display_name": "denfromufa", "link": "https://stackoverflow.com/users/2230844/denfromufa"}, "is_accepted": false, "score": 2, "last_activity_date": 1465426413, "last_edit_date": 1465426413, "creation_date": 1465420267, "answer_id": 37712996, "question_id": 37712307, "link": "https://stackoverflow.com/questions/37712307/pyodbc-read-primary-keys-from-ms-access-mdb-database/37712996#37712996", "title": "pyodbc - read primary keys from MS Access (MDB) database", "body": "<p>Here is solution using pythonnet and Oledb Jet driver. Note that this does not preserve the order of primary keys as columns:</p>\n\n<pre><code>import clr\nimport System\nimport System.Data.OleDb\nfrom System.Data.OleDb import OleDbSchemaGuid\n\ndef getKeyNames(tableName, mdbname):\n    conn = System.Data.OleDb.OleDbConnection()\n    conn.ConnectionString = (\"Provider=Microsoft.Jet.OLEDB.4.0;\"\n                         \"Data source={}\".format(mdbname))\n    conn.Open()\n    returnList=[]\n    mySchema = (conn).GetOleDbSchemaTable(OleDbSchemaGuid.Primary_Keys,\n        [None, None, tableName])\n    columnOrdinalForName = mySchema.Columns[\"COLUMN_NAME\"].Ordinal\n    for r in mySchema.Rows:\n        returnList.append(r.ItemArray[columnOrdinalForName])\n        conn.Close()\n    return returnList\n\ngetKeyNames(table_name,mdbname)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4957, "user_id": 2230844, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b0e722a4823f29c56d7a97bc6500ccc?s=128&d=identicon&r=PG", "display_name": "denfromufa", "link": "https://stackoverflow.com/users/2230844/denfromufa"}, "edited": false, "score": 0, "creation_date": 1465484371, "post_id": 37713906, "comment_id": 62930348, "body": "what is the equivalent of <code>OleDbSchemaGuid.Primary_Keys</code> and <code>Columns[&quot;COLUMN_NAME&quot;].Ordinal</code>? Right now you have hard-coded indices 5, 7, and 8 from statistics."}, {"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "reply_to_user": {"reputation": 4957, "user_id": 2230844, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b0e722a4823f29c56d7a97bc6500ccc?s=128&d=identicon&r=PG", "display_name": "denfromufa", "link": "https://stackoverflow.com/users/2230844/denfromufa"}, "edited": false, "score": 2, "creation_date": 1465485684, "post_id": 37713906, "comment_id": 62931372, "body": "@denfromufa - Those are the column indices as defined in the documentation for the <code>.statistics</code> method of the <a href=\"https://github.com/mkleehammer/pyodbc/wiki/Cursor\" rel=\"nofollow noreferrer\">cursor object</a>. You could create your own variables, e.g., <code>ordinal_position_col = 7</code>, but aside from making the code a bit more self-documenting it would amount to the same thing."}, {"owner": {"reputation": 4957, "user_id": 2230844, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b0e722a4823f29c56d7a97bc6500ccc?s=128&d=identicon&r=PG", "display_name": "denfromufa", "link": "https://stackoverflow.com/users/2230844/denfromufa"}, "edited": false, "score": 2, "creation_date": 1465485902, "post_id": 37713906, "comment_id": 62931522, "body": "actually it is defined by ODBC driver from Microsoft: <a href=\"https://msdn.microsoft.com/en-us/library/ms711022(VS.85).aspx\" rel=\"nofollow noreferrer\">msdn.microsoft.com/en-us/library/ms711022(VS.85).aspx</a>"}, {"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "reply_to_user": {"reputation": 4957, "user_id": 2230844, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b0e722a4823f29c56d7a97bc6500ccc?s=128&d=identicon&r=PG", "display_name": "denfromufa", "link": "https://stackoverflow.com/users/2230844/denfromufa"}, "edited": false, "score": 0, "creation_date": 1465486471, "post_id": 37713906, "comment_id": 62931940, "body": "@denfromufa - Good reference. Thanks for posting it."}], "tags": [], "owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "is_accepted": true, "score": 4, "last_activity_date": 1465424411, "creation_date": 1465424411, "answer_id": 37713906, "question_id": 37712307, "link": "https://stackoverflow.com/questions/37712307/pyodbc-read-primary-keys-from-ms-access-mdb-database/37713906#37713906", "title": "pyodbc - read primary keys from MS Access (MDB) database", "body": "<p>For Access ODBC we can get the Primary Key columns via the <code>.statistics</code> method of the pyodbc <code>cursor</code> object:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>crsr = conn.cursor()\ntable_name = 'MyTable'\n# dict comprehension: {ordinal_position: col_name}\npk_cols = {row[7]: row[8] for row in crsr.statistics(table_name) if row[5]=='PrimaryKey'}\nprint(pk_cols)  # e.g., {1: 'InvID', 2: 'LineItem'}\n</code></pre>\n"}], "owner": {"reputation": 4957, "user_id": 2230844, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b0e722a4823f29c56d7a97bc6500ccc?s=128&d=identicon&r=PG", "display_name": "denfromufa", "link": "https://stackoverflow.com/users/2230844/denfromufa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1502, "favorite_count": 0, "accepted_answer_id": 37713906, "answer_count": 2, "score": 2, "last_activity_date": 1465484426, "creation_date": 1465417735, "last_edit_date": 1465484426, "question_id": 37712307, "link": "https://stackoverflow.com/questions/37712307/pyodbc-read-primary-keys-from-ms-access-mdb-database", "title": "pyodbc - read primary keys from MS Access (MDB) database", "body": "<p>When I try to use <code>cursor.primaryKeys(\"tablename\")</code> then exception occurs:</p>\n\n<p><code>Error: ('IM001', '[IM001] [Microsoft][ODBC Driver Manager] Driver does not support this function (0) (SQLPrimaryKeys)')</code></p>\n\n<p><code>list(cursor.columns(table='tablename'))</code> does not reveal primary keys either.</p>\n"}, {"tags": ["python", "rounding"], "comments": [{"owner": {"reputation": 13500, "user_id": 1401975, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1LLiP.png?s=128&g=1", "display_name": "HamZa", "link": "https://stackoverflow.com/users/1401975/hamza"}, "edited": false, "score": 2, "creation_date": 1465418029, "post_id": 37712306, "comment_id": 62898504, "body": "This might work <code>int(2.667 * 100) &#47; 100</code>"}, {"owner": {"reputation": 24610, "user_id": 270986, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c49652c88a43a35bbf0095abfdae3515?s=128&d=identicon&r=PG", "display_name": "Mark Dickinson", "link": "https://stackoverflow.com/users/270986/mark-dickinson"}, "edited": false, "score": 0, "creation_date": 1465463153, "post_id": 37712306, "comment_id": 62914920, "body": "What result do you want for <code>round_down(-2.667, 2)</code>? (i.e., what should &quot;down&quot; mean for negative numbers?)"}], "answers": [{"tags": [], "owner": {"reputation": 2172, "user_id": 5869747, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cA9pa.jpg?s=128&g=1", "display_name": "A. Vidor", "link": "https://stackoverflow.com/users/5869747/a-vidor"}, "is_accepted": false, "score": 2, "last_activity_date": 1465417968, "creation_date": 1465417968, "answer_id": 37712374, "question_id": 37712306, "link": "https://stackoverflow.com/questions/37712306/how-to-round-float-down-to-a-given-precision/37712374#37712374", "title": "How to round float down to a given precision?", "body": "<p>You can use <code>math.floor</code> to \"round down\" to the nearest whole number. So to round to the 3rd decimal place, you can try <code>math.floor(1000*number) / 1000</code>.</p>\n\n<p>In general, to \"round down\" a number <code>num</code> to precision <code>n</code>, you can try:</p>\n\n<pre><code>from math import floor\n\ndef round_down(num, n):\n    multiplier = pow(10,n)\n    return floor(num * multiplier) / multiplier\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 2, "creation_date": 1465418070, "post_id": 37712389, "comment_id": 62898520, "body": "just use <code>int</code> rather than <code>math.floor</code> to avoid import"}, {"owner": {"reputation": 5935, "user_id": 893324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b24d4de5ae7afebfee98aa85e8a960e?s=128&d=identicon&r=PG", "display_name": "Brien", "link": "https://stackoverflow.com/users/893324/brien"}, "reply_to_user": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 4, "creation_date": 1465418156, "post_id": 37712389, "comment_id": 62898565, "body": "<code>int</code> doesn&#39;t always round down though, it instead rounds towards 0.  with <code>int</code>, <code>round_down(-2.667,2)</code> would give <code>-2.66</code>, whereas with <code>math.floor</code> it gives <code>-2.67</code> and"}, {"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 1, "creation_date": 1465418233, "post_id": 37712389, "comment_id": 62898593, "body": "I guess it depends on what OP means by round down but I would assume that rounding down in magnitude would be the expected functionality"}], "tags": [], "owner": {"reputation": 5935, "user_id": 893324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b24d4de5ae7afebfee98aa85e8a960e?s=128&d=identicon&r=PG", "display_name": "Brien", "link": "https://stackoverflow.com/users/893324/brien"}, "is_accepted": true, "score": 4, "last_activity_date": 1465418025, "creation_date": 1465418025, "answer_id": 37712389, "question_id": 37712306, "link": "https://stackoverflow.com/questions/37712306/how-to-round-float-down-to-a-given-precision/37712389#37712389", "title": "How to round float down to a given precision?", "body": "<p>Something like this should work for whatever number of digits you want to do:</p>\n\n<pre><code>&gt;&gt;&gt; import math\n&gt;&gt;&gt; def round_down(num,digits):\n        factor = 10.0 ** digits\n        return math.floor(num * factor) / factor\n\n&gt;&gt;&gt; round_down(2.667,2)\n2.66\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 1, "creation_date": 1465418495, "post_id": 37712409, "comment_id": 62898732, "body": "Note that <code>ROUND_DOWN</code> rounds towards zero, which is very misleading naming. <code>ROUND_FLOOR</code> will round toward -infinity."}, {"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "reply_to_user": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1465418547, "post_id": 37712409, "comment_id": 62898760, "body": "@interjay Ah Yes, In the case of negative numbers. I will add that."}], "tags": [], "owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "is_accepted": false, "score": 5, "last_activity_date": 1465418696, "last_edit_date": 1495540353, "creation_date": 1465418100, "answer_id": 37712409, "question_id": 37712306, "link": "https://stackoverflow.com/questions/37712306/how-to-round-float-down-to-a-given-precision/37712409#37712409", "title": "How to round float down to a given precision?", "body": "<p>You've got a friend in <a href=\"https://docs.python.org/3/library/decimal.html#decimal.Decimal.quantize\" rel=\"nofollow noreferrer\"><code>quantize</code></a> and <a href=\"https://docs.python.org/3/library/decimal.html#decimal.ROUND_FLOOR\" rel=\"nofollow noreferrer\"><code>ROUND_FLOOR</code></a> </p>\n\n<pre><code>&gt;&gt;&gt; from decimal import Decimal,ROUND_FLOOR\n&gt;&gt;&gt; float(Decimal(str(2.667)).quantize(Decimal('.01'), rounding=ROUND_FLOOR))\n2.66\n&gt;&gt;&gt; float(Decimal(str(-2.667)).quantize(Decimal('.01'), rounding=ROUND_FLOOR))\n-2.67\n</code></pre>\n\n<p>Note that you can use <a href=\"https://docs.python.org/3/library/decimal.html#decimal.ROUND_DOWN\" rel=\"nofollow noreferrer\"><code>ROUND_DOWN</code></a> for positive numbers. As interjay mentions <a href=\"https://stackoverflow.com/questions/37712306/how-to-round-float-down-to-a-given-precision#comment62898732_37712409\">in a comment</a>, <code>ROUND_DOWN</code> <em>Rounds towards zero</em> and hence may return incorrect values for negative numbers. </p>\n\n<pre><code>&gt;&gt;&gt; from decimal import Decimal,ROUND_DOWN\n&gt;&gt;&gt; Decimal(str(2.667)).quantize(Decimal('.01'), rounding=ROUND_DOWN)\nDecimal('2.66')\n&gt;&gt;&gt; float(Decimal(str(2.667)).quantize(Decimal('.01'), rounding=ROUND_DOWN))\n2.66\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 1, "last_activity_date": 1465419923, "last_edit_date": 1465419923, "creation_date": 1465418607, "answer_id": 37712554, "question_id": 37712306, "link": "https://stackoverflow.com/questions/37712306/how-to-round-float-down-to-a-given-precision/37712554#37712554", "title": "How to round float down to a given precision?", "body": "<p>You can also play around this using strings</p>\n\n<pre><code>def round_down(num, prec):\n    if isinstance(num, float):\n        s = str(num)\n        return float(s[:s.find('.') + prec + 1])\n    else:\n        raise ValueError\n\nround_down(2.6667, 2)\n# 2.66\n</code></pre>\n\n<p>Patch the code with more checks like precision is not negative among others.</p>\n"}], "owner": {"reputation": 28245, "user_id": 1547004, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5255289d0269d550a4e80e6bf6b0f590?s=128&d=identicon&r=PG", "display_name": "Brendan Abel", "link": "https://stackoverflow.com/users/1547004/brendan-abel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1620, "favorite_count": 1, "accepted_answer_id": 37712389, "answer_count": 4, "score": 5, "last_activity_date": 1465419923, "creation_date": 1465417734, "last_edit_date": 1465418137, "question_id": 37712306, "link": "https://stackoverflow.com/questions/37712306/how-to-round-float-down-to-a-given-precision", "title": "How to round float down to a given precision?", "body": "<p>I need a way to round a float to a given number of decimal places, but I want to always round down.</p>\n\n<p>For example, instead of</p>\n\n<pre><code>&gt;&gt;&gt; round(2.667, 2)\n2.67\n</code></pre>\n\n<p>I would rather have</p>\n\n<pre><code>&gt;&gt;&gt; round_down(2.667, 2)\n2.66\n</code></pre>\n"}, {"tags": ["python", "datetime", "selenium", "selenium-webdriver"], "answers": [{"tags": [], "owner": {"reputation": 4546, "user_id": 2781701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5745f276004f077454f27cde70858a1d?s=128&d=identicon&r=PG", "display_name": "Rafael Almeida", "link": "https://stackoverflow.com/users/2781701/rafael-almeida"}, "is_accepted": true, "score": 1, "last_activity_date": 1465430281, "creation_date": 1465430281, "answer_id": 37714829, "question_id": 37712286, "link": "https://stackoverflow.com/questions/37712286/testing-consistency-with-selenium-scraping/37714829#37714829", "title": "Testing consistency with Selenium scraping", "body": "<p>I noticed that the website creates a cookie for the user timezone, you can exploit that by adding it yourself</p>\n\n<pre><code>driver.add_cookie({'name': 'op_user_time_zone', 'value': '-4'})\n</code></pre>\n\n<p>That should do the trick</p>\n\n<p>In case it doesn't work edit the current code to what you tried, also check the <a href=\"http://selenium-python.readthedocs.io/navigating.html?highlight=cookie#cookies\" rel=\"nofollow\">docs</a> to make sure you're implementing it correctly.</p>\n"}], "owner": {"reputation": 421, "user_id": 4889550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/oHKXR.jpg?s=128&g=1", "display_name": "noblerthanoedipus", "link": "https://stackoverflow.com/users/4889550/noblerthanoedipus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 2, "accepted_answer_id": 37714829, "answer_count": 1, "score": 1, "last_activity_date": 1465430281, "creation_date": 1465417651, "last_edit_date": 1465418388, "question_id": 37712286, "link": "https://stackoverflow.com/questions/37712286/testing-consistency-with-selenium-scraping", "title": "Testing consistency with Selenium scraping", "body": "<p>This script scrapes data from a website with upcoming sports games into a dictionary (<a href=\"http://www.oddsportal.com\" rel=\"nofollow\">www.oddsportal.com</a>). Takes under 2.5 mins.</p>\n\n<pre><code>from selenium.common.exceptions import TimeoutException\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nimport pandas as pd\nimport datetime\nimport time\n\nupcoming = ['http://www.oddsportal.com/basketball/usa/wnba/']\nnextgames = []\n\ndef rescrape(urls, cs):\n\n    driver = webdriver.PhantomJS(executable_path=r'C:/phantomjs.exe') \n    driver.get('http://www.oddsportal.com/set-timezone/15/')\n    # The above link sets the timezone. I believe problem lies here, explicit wait?    \n    driver.implicitly_wait(3)\n\n    for url in urls:        \n        for i in range(2): \n            #This is to run the the scrape twice within function. It scrapes the same way both times        \n            wait = WebDriverWait(driver, 5)            \n            driver.get(url)\n            # this is to ensure the table with games has appeared            \n            try:     \n                wait.until(EC.visibility_of_element_located((By.CSS_SELECTOR, \"table#tournamentTable tr.odd\")))\n            except TimeoutException:\n                continue\n            # below is the script to get details from each game            \n            for match in driver.find_element_by_css_selector(\"table#tournamentTable\").find_elements_by_tag_name('tr')[3:]:\n                try:\n                    home, away = match.find_element_by_class_name(\"table-participant\").text.split(\" - \")\n                except:\n                    continue\n\n                date = match.find_element_by_xpath(\".//preceding::th[contains(@class, 'first2')][1]\").text\n                kickoff = match.find_element_by_class_name(\"table-time\").text\n                # following deals with exceptions to a recognized date format\n                if \"oday\" in date:\n                    date = datetime.date.today().strftime(\"%d %b %Y\")\n                    event = \"Not specified\"\n\n                elif \"omorrow\" in date:\n                    date = datetime.date.today() + datetime.timedelta(days=1)\n                    date = date.strftime(\"%d %b %Y\")                \n\n                elif \"esterday\" in date:\n                    date = datetime.date.today() + datetime.timedelta(days=-1)\n                    date = date.strftime(\"%d %b %Y\")                            \n                elif \" - \" in date:\n                    date, event = date.split(\" - \", 1)                    \n\n\n                nextgames.append({\n                    \"current time\": time.ctime(),                \n                    \"home\": home.strip(),\n                    \"away\": away.strip(),\n                    \"date\": date,\n                    \"time\": kickoff.strip()})\n\n                time.sleep(3)\n                print len(nextgames)\n\n        print len(nextgames)\n    driver.close()\n    df = pd.DataFrame(nextgames)\n    df.to_csv(cs, encoding='utf-8')\n    return df\n\nfor i in range(3):\n    rescrape(upcoming, 'trial' + str(i) + '.csv')\n</code></pre>\n\n<p>What's wrong with it is that setting timezone <code>driver.get('http://www.oddsportal.com/set-timezone/15/')</code> doesn't always work. It reverts to default timezone of GMT about 20% of the time it scrapes. This output shows the wrong date &amp; time on the third round, after getting things right first 2 times. Notice how last range(2) loop gets both times wrong but only second date is wrong - means it can change timezone in either loop: </p>\n\n<p><code>pd.set_option('display.max_colwidth', 10)</code></p>\n\n<pre><code>    Unnamed: 0       away current time       date       home   time\n0           0   Washin...  Wed Ju...     8-Jun-16  Dallas...  20:30\n1           1   San An...  Wed Ju...     9-Jun-16  Phoeni...  22:00\n2           2   Washin...  Wed Ju...     8-Jun-16  Dallas...  20:30\n3           3   San An...  Wed Ju...     9-Jun-16  Phoeni...  22:00\n4           4   Washin...  Wed Ju...     8-Jun-16  Dallas...  20:30\n5           5   San An...  Wed Ju...     9-Jun-16  Phoeni...  22:00\n6           6   Washin...  Wed Ju...     8-Jun-16  Dallas...  20:30\n7           7   San An...  Wed Ju...     9-Jun-16  Phoeni...  22:00\n8           8   Phoeni...  Wed Ju...     8-Jun-16  Minnes...   0:00\n9           9   New Yo...  Wed Ju...     8-Jun-16  Los An...   2:00\n10         10   Washin...  Wed Ju...     9-Jun-16  Dallas...   0:30\n11         11   San An...  Wed Ju...    10-Jun-16  Phoeni...   2:00\n</code></pre>\n\n<p>So how do I ensure the timezone <code>.get</code> works every time? Currently I have an implicit wait and have tried explicit waits to no avail.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 5, "creation_date": 1465417818, "post_id": 37712284, "comment_id": 62898394, "body": "<code>df[&#39;TAG&#39;] = &#39;MY STRING&#39;</code>"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1465419301, "post_id": 37712284, "comment_id": 62899143, "body": "<a href=\"http://nbviewer.jupyter.org/urls/bitbucket.org/hrojas/learn-pandas/raw/master/lessons/04%20-%20Lesson.ipynb\" rel=\"nofollow noreferrer\">adding/deleting columns</a> - pandas lesson"}], "answers": [{"tags": [], "owner": {"reputation": 1440, "user_id": 3154314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51a481af927708d875a0f2b9f496082b?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3154314/aaron"}, "is_accepted": true, "score": 2, "last_activity_date": 1465419055, "creation_date": 1465419055, "answer_id": 37712673, "question_id": 37712284, "link": "https://stackoverflow.com/questions/37712284/python-fill-a-list-with-the-same-string/37712673#37712673", "title": "Python fill a list with the same string", "body": "<p><code>df['TAG'] = ['MY STRING'] * len(preds)</code></p>\n"}], "owner": {"reputation": 382, "user_id": 5058753, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/b28a867684af1ed1128e934d09125164?s=128&d=identicon&r=PG&f=1", "display_name": "DolphinGenomePyramids", "link": "https://stackoverflow.com/users/5058753/dolphingenomepyramids"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1143, "favorite_count": 0, "accepted_answer_id": 37712673, "answer_count": 1, "score": 1, "last_activity_date": 1465419055, "creation_date": 1465417647, "question_id": 37712284, "link": "https://stackoverflow.com/questions/37712284/python-fill-a-list-with-the-same-string", "title": "Python fill a list with the same string", "body": "<p>I have a pandas DataFrame and I would like to make a new column with the same string in each row. </p>\n\n<p>Currently I'm doing this. </p>\n\n<pre><code>tag=[]\nfor x in xrange(len(preds)): #preds is a np.array, same length of df\n    tag.append('MY STRING')\n df['TAG']=tag\n</code></pre>\n\n<p>I know there must be a smarter way to do this. </p>\n\n<p>Any help is appreciated. </p>\n"}, {"tags": ["python", "google-app-engine", "google-cloud-datastore", "app-engine-ndb"], "answers": [{"tags": [], "owner": {"reputation": 3557, "user_id": 1558654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5187bd1b6ca3a3c95f57a39a89ad9263?s=128&d=identicon&r=PG", "display_name": "Marten", "link": "https://stackoverflow.com/users/1558654/marten"}, "is_accepted": true, "score": 1, "last_activity_date": 1465431442, "creation_date": 1465431442, "answer_id": 37714989, "question_id": 37712279, "link": "https://stackoverflow.com/questions/37712279/badvalueerror-when-storing-repeated-keyproperty-with-custom-validator/37714989#37714989", "title": "BadValueError when storing repeated KeyProperty with custom validator", "body": "<p>Ok, found it. <code>KeyProperty</code> has this really weird constructor \"signature magic\" (<a href=\"https://github.com/GoogleCloudPlatform/datastore-ndb-python/blob/8f777e76818c7ae130a8abf5efea79575e1f4be8/ndb/model.py#L1963\" rel=\"nofollow\">model.py, line 1963</a>).</p>\n\n<p>The point is that if the first parameter is a string, it becomes the field name of the property, not the kind! If you want to specify the kind by string you must use a keyword argument, otherwise the kind parameter must be the actual type not just the name. Correct me if I'm wrong but that's not part of the public documentation. That's really confusing, because with a <code>ndb.Key</code> you actually can specify the kind as a string as the first positional parameter.</p>\n\n<p>As it happened I had 3 KeyProperties with the same kind, but different attribute names. However, since I specified the kind as a string, it actually became the name. So all three properties were using the same name. As a result, the repeated property value was serialized with the non-repeated <code>KeyProperty</code> instance, causing this crash.</p>\n\n<p>The solution was to specify the kind with a keyword argument:</p>\n\n<pre><code>foo = ndb.KeyProperty(kind='Foo', validator=key_validator('Foo'))\n</code></pre>\n\n<p>Serializing the KeyProperties from/to JSON works well now.</p>\n"}], "owner": {"reputation": 3557, "user_id": 1558654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5187bd1b6ca3a3c95f57a39a89ad9263?s=128&d=identicon&r=PG", "display_name": "Marten", "link": "https://stackoverflow.com/users/1558654/marten"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 37714989, "answer_count": 1, "score": 2, "last_activity_date": 1482887824, "creation_date": 1465417629, "last_edit_date": 1482887824, "question_id": 37712279, "link": "https://stackoverflow.com/questions/37712279/badvalueerror-when-storing-repeated-keyproperty-with-custom-validator", "title": "BadValueError when storing repeated KeyProperty with custom validator", "body": "<p>I'm trying to simplify the JSON serialization and de-serialization of ndb KeyProperties by utilizing a custom validator that converts a string to a <code>Key</code> of the respective kind.</p>\n\n<p>The idea is to have a property like this: </p>\n\n<pre><code>def key_validator(kind):\n  def validator(prop, value):\n    if not isinstance(value, ndb.Key):\n      return ndb.Key(kind, value)\n    return value\n  return validator\n\nclass Bar(ndb.Model):\n\n  foo = ndb.KeyProperty('Foo', validator=key_validator('Foo'))\n</code></pre>\n\n<p>As you can see the validator converts any string to a <code>Key</code> of the given kind.\nThe goal is to be able to pass a JSON object that contains the id of a Key to the <code>populate</code> method like so:</p>\n\n<pre><code>bar = Bar()\nbar.populate(json.loads('{\"foo\": \"1234\"}'))\n</code></pre>\n\n<p>Which should effectively do this:</p>\n\n<pre><code>bar = Bar()\nbar.foo = ndb.Key(\"Foo\", \"1234\")\n</code></pre>\n\n<p>The problem is that this requires to override <code>KeyProperty</code> because the validator is called after some basic validation is performed, which fails, because <code>\"1234\"</code> is apparently not a <code>Key</code>, see <a href=\"https://github.com/GoogleCloudPlatform/datastore-ndb-python/issues/268\" rel=\"nofollow\">issue 268</a>.</p>\n\n<p>So to make this work I've created a \"ValidationMixin\" and a new KeyProperty that calls the validator <em>before</em> any other validation takes place (and also serializes the <code>Key</code> to just the id).</p>\n\n<pre><code>class ValidationMixin(object):\n  # make sure to call _validator before we do as the very first validation step\n  def _do_validate(self, value):\n    if self._validator is not None:\n      newvalue = self._validator(self, value)\n      if newvalue is not None:\n        value = newvalue\n    return super(ValidationMixin, self)._do_validate(value)\n\n# A KeyProperty that allows a validator to generate a Key.\n# In addition it serializes to just the id of the key\nclass KeyProperty(ValidationMixin, ndb.KeyProperty):\n  # return just the id of the key\n  def _get_for_dict(self, entity):\n    value = self._get_value(entity)\n    if self._repeated:\n      return [v.id() for v in value]\n    elif value is not None:\n      return value.id()\n    return value\n</code></pre>\n\n<p>Using this <code>KeyProperty</code> works like a charm for non-repeated properties. Unfortunately it fails badly with properties that have <code>repeated=True</code>.</p>\n\n<p>The following exception is thrown when I call <code>bar.populate(json.loads('[{\"foo\": \"1234\"}]'))</code> followed by <code>put()</code>:</p>\n\n<pre><code>  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/ext/ndb/model.py\", line 3451, in _put\n    return self._put_async(**ctx_options).get_result()\n  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py\", line 383, in get_result\n    self.check_success()\n  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py\", line 427, in _help_tasklet_along\n    value = gen.throw(exc.__class__, exc, tb)\n  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/ext/ndb/context.py\", line 824, in put\n    key = yield self._put_batcher.add(entity, options)\n  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/ext/ndb/tasklets.py\", line 430, in _help_tasklet_along\n    value = gen.send(val)\n  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/ext/ndb/context.py\", line 358, in _put_tasklet\n    keys = yield self._conn.async_put(options, datastore_entities)\n  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/datastore/datastore_rpc.py\", line 1852, in async_put\n    pbs = [entity_to_pb(entity) for entity in entities]\n  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/ext/ndb/model.py\", line 697, in entity_to_pb\n    pb = ent._to_pb()\n  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/ext/ndb/model.py\", line 3167, in _to_pb\n    prop._serialize(self, pb, projection=self._projection)\n  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/ext/ndb/model.py\", line 1422, in _serialize\n    values = self._get_base_value_unwrapped_as_list(entity)\n  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/ext/ndb/model.py\", line 1192, in _get_base_value_unwrapped_as_list\n    wrapped = self._get_base_value(entity)\n  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/ext/ndb/model.py\", line 1180, in _get_base_value\n    return self._apply_to_values(entity, self._opt_call_to_base_type)\n  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/ext/ndb/model.py\", line 1355, in _apply_to_values\n    newvalue = function(value)\n  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/ext/ndb/model.py\", line 1234, in _opt_call_to_base_type\n    value = _BaseValue(self._call_to_base_type(value))\n  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/ext/ndb/model.py\", line 1255, in _call_to_base_type\n    return call(value)\n  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/ext/ndb/model.py\", line 1331, in call\n    newvalue = method(self, value)\n  File \"/base/data/home/runtimes/python27/python27_lib/versions/1/google/appengine/ext/ndb/model.py\", line 2013, in _validate\n  raise datastore_errors.BadValueError('Expected Key, got %r' % (value,))\nBadValueError: Expected Key, got [Key('Foo', '486944fe896a44c689275e6f19e3084a')]\n</code></pre>\n\n<p>As you can see it complains about the value being a list instead of a single <code>Key</code>. Note that the Exception is thrown in <code>put()</code> not in <code>populate</code>, so the initial validation performed by <code>_set_value</code> succeeded.</p>\n\n<p>So my question is, is my approach broken or should that work? If it should work, why doesn't it work and how can it be fixed?</p>\n\n<h1>update</h1>\n\n<p>According to the stack trace the code execution passes <a href=\"https://github.com/GoogleCloudPlatform/datastore-ndb-python/blob/master/ndb/model.py#L1355\" rel=\"nofollow\">model.py, line 1355</a>, which is strange, because the property is repeated and should the the other branch in <a href=\"https://github.com/GoogleCloudPlatform/datastore-ndb-python/blob/master/ndb/model.py#L1347\" rel=\"nofollow\">model.py, line 1347</a></p>\n\n<h1>update 2</h1>\n\n<p>I just discovered that it works when I remove anther non-repeated <code>KeyProperty</code> from the model. It looks like the serialization is broken and the wrong <code>KeyProperty</code> instance is passed to the <code>_seralize</code> method</p>\n"}, {"tags": ["python", "audio", "amazon-ec2", "pjsip", "pyaudio"], "answers": [{"tags": [], "owner": {"reputation": 48, "user_id": 4996129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6900323277dfa51fee8188a12438b81?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Denton", "link": "https://stackoverflow.com/users/4996129/tyler-denton"}, "is_accepted": true, "score": 0, "last_activity_date": 1465923813, "last_edit_date": 1465923813, "creation_date": 1465501325, "answer_id": 37734848, "question_id": 37712275, "link": "https://stackoverflow.com/questions/37712275/pyaudio-and-pjsip-in-a-virtual-machine/37734848#37734848", "title": "pyAudio and PJSIP in a Virtual Machine", "body": "<p>Alright, this isn't the most reliable solution but it does seem to work. </p>\n\n<p>To start with you must verify you have pulseaudio installed and working</p>\n\n<p>Use what ever package installer you need:</p>\n\n<p>apt-get/yum/zypper pulseaudio pulseaudio-devel alsa-lib alsa-devel alsa-plugins-pulseaudio</p>\n\n<p>pulseaudio --start</p>\n\n<p>pacmd load-module module-null-sink sink_name=MySink</p>\n\n<p>pacmd update-sink-proplist MySink device.description=MySink</p>\n\n<p>This will allow you to pass audio around in your vm so that it can be sent out using pjsip. </p>\n\n<p>If you dont have your own loopback written in python you can use:</p>\n\n<p>pacmd load-module module-loopback sink=MySink</p>\n\n<p>to pass audio back out. If you do have a loopback written you cannot use both.</p>\n"}], "owner": {"reputation": 48, "user_id": 4996129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6900323277dfa51fee8188a12438b81?s=128&d=identicon&r=PG&f=1", "display_name": "Tyler Denton", "link": "https://stackoverflow.com/users/4996129/tyler-denton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 586, "favorite_count": 1, "accepted_answer_id": 37734848, "answer_count": 1, "score": 1, "last_activity_date": 1465923813, "creation_date": 1465417617, "question_id": 37712275, "link": "https://stackoverflow.com/questions/37712275/pyaudio-and-pjsip-in-a-virtual-machine", "title": "pyAudio and PJSIP in a Virtual Machine", "body": "<p>I am writing a SIP client in python. I am able to make my script run on my computer just fine. It plays a wav file, grabs the audio and then sends the audio out using a sip session. I am having a very hard time getting this to run in the AWS ec2 VM. The VM is running SUSE 12. </p>\n\n<p>There seems to be a lot of questions related to audio loop backs and piping audio around. But I haven't found any that seem to encompass all of the ways I am having issues.</p>\n\n<p>I have tried figuring out how to set one up using pacmd but havent had and luck. I have Dummy Output and Monitor of Dummy Output as defaults but that didnt work. </p>\n\n<p>When I try to open the stream i still get a no default output device error.</p>\n\n<p>What I am trying to find is a way to have a virtual sound card (i guess) that I can have for channels on the sip call and stream the wav file into. </p>\n\n<p>Any advice or direction would be very helpful.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 426, "user_id": 6389000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c5b15fe4f79c8b0ca80e3e921d20e?s=128&d=identicon&r=PG&f=1", "display_name": "shane", "link": "https://stackoverflow.com/users/6389000/shane"}, "edited": false, "score": 0, "creation_date": 1465418536, "post_id": 37712274, "comment_id": 62898754, "body": "I think your goal is to get a DataFrame with rows of unique users, correct?"}], "answers": [{"tags": [], "owner": {"reputation": 26041, "user_id": 3339965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ac89d084d3bc5dc083bad3ea5518f11?s=128&d=identicon&r=PG&f=1", "display_name": "root", "link": "https://stackoverflow.com/users/3339965/root"}, "is_accepted": true, "score": 1, "last_activity_date": 1465420358, "creation_date": 1465420358, "answer_id": 37713013, "question_id": 37712274, "link": "https://stackoverflow.com/questions/37712274/python-how-do-you-keep-all-of-your-data-when-using-value-counts/37713013#37713013", "title": "Python: How do you keep all of your data when using .Value_counts()?", "body": "<p>You can use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.duplicated.html\" rel=\"nofollow\"><code>DataFrame.duplicated</code></a> to determine which rows are duplicates, and then filter using <code>loc</code>:</p>\n\n<pre><code>f = f.loc[~f.duplicated(subset=['User Name'], keep=False), :]\n</code></pre>\n\n<p>The <code>subset</code> parameter specifies to just look for duplicates in the <code>'User Name'</code> column. The <code>keep=False</code> argument specifies to flag all duplicates.  Since <code>duplicated</code> returns <code>True</code> for duplicates, I negated it with <code>~</code>.</p>\n\n<p>This appears to be much more efficient than <code>groupby</code> when testing on a fairly large DataFrame with a fair amount of duplicates:</p>\n\n<pre><code>%timeit f.loc[~f.duplicated(subset=['User Name'], keep=False), :]\n100 loops, best of 3: 17.4 ms per loop\n\n%timeit f.groupby('User Name').filter(lambda x: len(x) == 1)\n1 loop, best of 3: 6.78 s per loop\n</code></pre>\n"}], "owner": {"reputation": 303, "user_id": 6377863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1f7a69816576dc244df97631a057d23e?s=128&d=identicon&r=PG&f=1", "display_name": "JetCorey", "link": "https://stackoverflow.com/users/6377863/jetcorey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 37713013, "answer_count": 1, "score": 0, "last_activity_date": 1465814689, "creation_date": 1465417616, "last_edit_date": 1465814689, "question_id": 37712274, "link": "https://stackoverflow.com/questions/37712274/python-how-do-you-keep-all-of-your-data-when-using-value-counts", "title": "Python: How do you keep all of your data when using .Value_counts()?", "body": "<p>.Value_counts() gets rid of the rest of my data. Analyze my data without loosing the rest of the information? Or is there another word counter code I can use that doesn't remove the rest of my columns of data?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>from pandas import DataFrame, read_csv\nimport pandas as pd  \nf1 = pd.read_csv('lastlogonuser.txt', sep='\\t', encoding='latin1')\nf2 = pd.read_csv('UserAccounts.csv', sep=',', encoding ='latin1')\nf2 = f2.rename(columns={'Shortname':'User Name'})\nf = pd.concat([f1, f2])\ncounts = f['User Name'].value_counts()\nf = counts[counts == 1] \nf \n</code></pre>\n\n<p>I get something like this when I run my code:</p>\n\n<pre><code>sample534         1\nsample987         1\nsample342         1\nsample321         1\nsample123         1\n</code></pre>\n\n<p>I would like something like:</p>\n\n<pre><code>   User Name    Description                    CN Account\n1  sample534    Journal Mailbox managed by         \n1  sample987    Journal Mailbox managed by    \n1  sample342    Journal Mailbox managed by   \n1  sample321    Journal Mailbox managed by \n1  sample123    Journal Mailbox managed by \n</code></pre>\n\n<p>Sample of data I am using:</p>\n\n<pre><code>enter code here\nAccount User Name User CN                       Description\nENABLED MBJ29     CN=MBJ29,CN=Users             Journal Mailbox managed by  \nENABLED MBJ14     CN=MBJ14,CN=Users             Journal Mailbox managed by\nENABLED MBJ08     CN=MBJ30,CN=Users             Journal Mailbox managed by   \nENABLED MBJ07     CN=MBJ07,CN=Users             Journal Mailbox managed by \n</code></pre>\n"}, {"tags": ["python", "mongodb", "pymongo", "mongoengine"], "answers": [{"tags": [], "owner": {"reputation": 183, "user_id": 5970602, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AoNlrJOnJ5E/AAAAAAAAAAI/AAAAAAAAAvs/4fY8Ra9hBEg/photo.jpg?sz=128", "display_name": "Ji\u0159&#237; Mauritz", "link": "https://stackoverflow.com/users/5970602/ji%c5%99%c3%ad-mauritz"}, "is_accepted": false, "score": 0, "last_activity_date": 1522943769, "last_edit_date": 1522943769, "creation_date": 1522940398, "answer_id": 49675571, "question_id": 37712259, "link": "https://stackoverflow.com/questions/37712259/saving-none-into-mongodb-using-mongoengine-dynamic-document/49675571#49675571", "title": "Saving None into MongoDB using MongoEngine Dynamic Document", "body": "<p>I had no problem running your code. The document inserted looks like this:</p>\n\n<pre><code>\"timeseries\" : [{ \"var_1\" : 2, \"var_2\" : 4 }, { \"var_1\" : 2, \"var_2\" : 6 }, { \"var_1\" : 3 }, { \"var_1\" : 4 }]\n</code></pre>\n\n<p>Before I could've run the code, I had to put <code>self</code> as an argument of your <code>sample_insert</code> function. </p>\n"}], "owner": {"reputation": 21, "user_id": 6442317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26e3347960c7dd66d1c51b6b8540390a?s=128&d=identicon&r=PG&f=1", "display_name": "Sam F", "link": "https://stackoverflow.com/users/6442317/sam-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1522943769, "creation_date": 1465417582, "last_edit_date": 1465469118, "question_id": 37712259, "link": "https://stackoverflow.com/questions/37712259/saving-none-into-mongodb-using-mongoengine-dynamic-document", "title": "Saving None into MongoDB using MongoEngine Dynamic Document", "body": "<p>I am trying to save a MongoEngine Document into a Dynamic Document. Sample code is as follows:</p>\n\n<pre><code>class Small(mongoengine.Document):\n    var_1 = mongoengine.IntField(db_field=\"var_1\")\n    var_2 = mongoengine.IntField(db_field=\"var_2\")\n\nclass Main(mongoengine.DynamicDocument):\n    timeseries = mongoengine.ListField(mongoengine.EmbeddedDocumentField('Small'),\n                                       db_field=\"timeseries\")\n\n    def sample_insert():\n        input = [(2, 4), (2, 6), (3, None), (4, None)]\n\n        to_insert = [Small(var_1=i[0], var_2=i[1]) for i in input]\n\n        self.timeseries = to_insert\n        self.save()\n</code></pre>\n\n<p>The problem I am having occurs when one or more of the values to be saved is None. In this case the following error is generated:</p>\n\n<pre><code>mongoengine.errors.ValidationError: ValidationError (Data:55c0d57d1853bcad5c17b1f7) (var_1.Field is required)\n</code></pre>\n\n<p>I could set the None values to 0, but this is not a good solution as I can no longer distinguish between legitimate 0 values and non-existing values.</p>\n\n<p>What I would love to do is be able to insert these None values as a 'null' entry into MongoDB.</p>\n\n<p>Is this possible?</p>\n"}, {"tags": ["python", "html", "regex", "string"], "comments": [{"owner": {"reputation": 1177, "user_id": 2730902, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V2mrq.jpg?s=128&g=1", "display_name": "LordNeo", "link": "https://stackoverflow.com/users/2730902/lordneo"}, "edited": false, "score": 0, "creation_date": 1465418081, "post_id": 37712252, "comment_id": 62898525, "body": "Does the revision numbers have always the same amount of characters? Maybe you should try to cut the string from the back instead."}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1465418113, "post_id": 37712252, "comment_id": 62898541, "body": "The regex engine is colourblind. It can&#39;t tell which colour your lines would be rendered in a web browser. Is there some other clue you can use to identify the numbers you are looking for?"}, {"owner": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 0, "creation_date": 1465418402, "post_id": 37712252, "comment_id": 62898682, "body": "<a href=\"http://stackoverflow.com/a/1732454/5323213\">don&#39;t use regex to parse html</a>"}, {"owner": {"reputation": 2952, "user_id": 5244995, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CPafo.png?s=128&g=1", "display_name": "Jed Fox", "link": "https://stackoverflow.com/users/5244995/jed-fox"}, "reply_to_user": {"reputation": 5127, "user_id": 5323213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c231bca62d8fc45d54fa169950c3701?s=128&d=identicon&r=PG&f=1", "display_name": "R Nar", "link": "https://stackoverflow.com/users/5323213/r-nar"}, "edited": false, "score": 0, "creation_date": 1465418804, "post_id": 37712252, "comment_id": 62898897, "body": "@RNar see the answer directly below your linked answer."}, {"owner": {"reputation": 21, "user_id": 6162660, "user_type": "registered", "profile_image": "https://graph.facebook.com/507862105/picture?type=large", "display_name": "Varun Behl", "link": "https://stackoverflow.com/users/6162660/varun-behl"}, "edited": false, "score": 0, "creation_date": 1465481353, "post_id": 37712252, "comment_id": 62928007, "body": "The revision numbers could have 5 or 6 characters. I&#39;m a little limited to libraries included with a Linux installation, so I haven&#39;t been able to use BeautifulSoup. I have been trying (and failing) with the second answer though, but I&#39;ll keep working along those lines. I also realized I might be able to cut out all the lines including rgb and then do a simple re findall statement. Thanks for all the responses!"}], "answers": [{"tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": false, "score": 0, "last_activity_date": 1465417992, "creation_date": 1465417992, "answer_id": 37712381, "question_id": 37712252, "link": "https://stackoverflow.com/questions/37712252/how-can-i-use-regular-expression-python-to-find-all-integers-after-a-known-strin/37712381#37712381", "title": "How can I use regular expression/Python to find all integers after a known string, an unknown string, and another known string?", "body": "<p>If you know you're only looking for lines that contain the pattern <code>color: rgb(255, 0, 0)</code>, then add that pattern to your regexp:</p>\n\n<pre><code>paragraphs = re.findall(r'color: rgb\\(255, 0, 0\\).*r(\\d*)&lt;br&gt;',str(html))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150862, "user_id": 790387, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/450fd2737dd0355700a574bd12842509?s=128&d=identicon&r=PG", "display_name": "Burhan Khalid", "link": "https://stackoverflow.com/users/790387/burhan-khalid"}, "is_accepted": false, "score": 1, "last_activity_date": 1465418537, "creation_date": 1465418537, "answer_id": 37712533, "question_id": 37712252, "link": "https://stackoverflow.com/questions/37712252/how-can-i-use-regular-expression-python-to-find-all-integers-after-a-known-strin/37712533#37712533", "title": "How can I use regular expression/Python to find all integers after a known string, an unknown string, and another known string?", "body": "<p>You need to use a HTML parser to help you filter out the tags that have the red color applied, then use your regular expression on the tag's contents:</p>\n\n<pre><code>&gt;&gt;&gt; from bs4 import BeautifulSoup\n&gt;&gt;&gt; html = ''' (your html here) '''\n&gt;&gt;&gt; parser = BeautifulSoup(html, 'html.parser')\n&gt;&gt;&gt; for span_tag in parser.find_all('span', style='color: rgb(255, 0, 0);'):\n...  print(span_tag.text)\n\nRandom Text 4.23.6 r98543\n</code></pre>\n\n<p>You can then collect all the text, and run your regular expression over it to filter out the version numbers:</p>\n\n<pre><code>&gt;&gt;&gt; t = [i.text for i in parser.find_all('span', style='color: rgb(255, 0, 0);')] \n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6162660, "user_type": "registered", "profile_image": "https://graph.facebook.com/507862105/picture?type=large", "display_name": "Varun Behl", "link": "https://stackoverflow.com/users/6162660/varun-behl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1465418537, "creation_date": 1465417554, "question_id": 37712252, "link": "https://stackoverflow.com/questions/37712252/how-can-i-use-regular-expression-python-to-find-all-integers-after-a-known-strin", "title": "How can I use regular expression/Python to find all integers after a known string, an unknown string, and another known string?", "body": "<p>I'm new to regular expression/Python, but I'm trying to extract a revision number from an HTML page. I used a proxy and urllib to store the read page into a string. I have some text that looks like:</p>\n\n<pre><code>&lt;p&gt;Proxy 3.2.1 r72440&lt;br&gt;\nSlotBios 11.00&lt;/p&gt;\n&lt;p&gt;&lt;strong&gt;&lt;span style=\"color: rgb(255, 0, 0);\"&gt;Random Text 4.23.6 r98543&lt;br&gt;\n...&lt;/tr&gt;...\n&lt;p&gt;&lt;strong&gt;&lt;span style=\"color: rgb(255, 0, 0);\"&gt;Random Text 4.33.6 r98549&lt;br&gt;\n</code></pre>\n\n<p>I want to parse the text and extract the revision numbers corresponding to lines of red. So in this example, I want to parse out 98543 and 98549.</p>\n\n<p>I'm able to parse out all the lines generally with:</p>\n\n<pre><code>paragraphs = re.findall(r'r(\\d*)&lt;br&gt;',str(html))\n</code></pre>\n\n<p>However, I'm a little stuck on how to do it such that I can find only the red lines. My current code would also include 72440. Any idea how to get around this? Thanks!</p>\n"}, {"tags": ["python", "performance", "python-multiprocessing"], "comments": [{"owner": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "edited": false, "score": 0, "creation_date": 1465421452, "post_id": 37712249, "comment_id": 62900126, "body": "Protecting your whole worker code with a lock has the same effect as not using multiprocessing at all, you&#39;re forcing all tasks to be performed serially."}, {"owner": {"reputation": 5, "user_id": 6442308, "user_type": "registered", "profile_image": "https://graph.facebook.com/277418785942164/picture?type=large", "display_name": "Alex Wang", "link": "https://stackoverflow.com/users/6442308/alex-wang"}, "reply_to_user": {"reputation": 59735, "user_id": 1350899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a42186174515a63b8058100a736252f?s=128&d=identicon&r=PG", "display_name": "mata", "link": "https://stackoverflow.com/users/1350899/mata"}, "edited": false, "score": 0, "creation_date": 1465430479, "post_id": 37712249, "comment_id": 62903269, "body": "yep I realized it  and thanks for the note. I locked the writing process instead, but it will write the results of the quickest subprocess."}], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1465420227, "post_id": 37712975, "comment_id": 62899574, "body": "If the processes are CPU bound, you&#39;d want <code>ProcessPoolExecutor</code> to bypass GIL issues (which is also what you use <code>multiprocessing</code> for)."}], "tags": [], "owner": {"reputation": 483, "user_id": 2175385, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f45ddf32f001de0ece08f56e0fa668da?s=128&d=identicon&r=PG", "display_name": "RedCraig", "link": "https://stackoverflow.com/users/2175385/redcraig"}, "is_accepted": true, "score": 1, "last_activity_date": 1465420122, "creation_date": 1465420122, "answer_id": 37712975, "question_id": 37712249, "link": "https://stackoverflow.com/questions/37712249/python-multiprocessing-and-save-data-in-order/37712975#37712975", "title": "Python multiprocessing and save data in order", "body": "<p><a href=\"https://docs.python.org/3/library/concurrent.futures.html#threadpoolexecutor-example\" rel=\"nofollow\">ThreadPoolExecuter</a> is great for running the same method in parallel with different sets of data, and for re-assembling the results from each thread.</p>\n\n<p>As the results come back from each thread put them in a list something like <code>[(index1, result1), (index2, result2),...]</code> as/when they return, sort the list by index when all threads have completed, then write the sorted list to a file.</p>\n\n<p>The catch here is that this keeps all of your results in memory, but you should be able to do this as you're already keeping them all in memory in each of your processes.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 6442308, "user_type": "registered", "profile_image": "https://graph.facebook.com/277418785942164/picture?type=large", "display_name": "Alex Wang", "link": "https://stackoverflow.com/users/6442308/alex-wang"}, "edited": false, "score": 0, "creation_date": 1465445576, "post_id": 37713052, "comment_id": 62906409, "body": "how to add arguments to imap() here? I don&#39;t really understand imap() methods. Thanks for the help!"}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 5, "user_id": 6442308, "user_type": "registered", "profile_image": "https://graph.facebook.com/277418785942164/picture?type=large", "display_name": "Alex Wang", "link": "https://stackoverflow.com/users/6442308/alex-wang"}, "edited": false, "score": 0, "creation_date": 1465472210, "post_id": 37713052, "comment_id": 62920854, "body": "@AlexWang: You&#39;d define the function as <code>def worker(allargs):</code> with the first line <code>dat,fileName,l = allargs</code> to unpack them. Then you&#39;d just create a generator that produce three-tuples, and pass that: <code>for result in pool.imap(worker, generatoroftuples):</code>"}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": false, "score": 3, "last_activity_date": 1465428282, "last_edit_date": 1465428282, "creation_date": 1465420520, "answer_id": 37713052, "question_id": 37712249, "link": "https://stackoverflow.com/questions/37712249/python-multiprocessing-and-save-data-in-order/37713052#37713052", "title": "Python multiprocessing and save data in order", "body": "<p>I'd suggest using a <code>multiprocessing.Pool</code> and using its <code>imap</code> method to do the work. Have the workers <code>return</code> values instead of writing them directly, with the main process performing all the I/O. <code>imap</code> guarantees you get the results in the order the tasks were dispatched, and with only the main process performing I/O, conflicts are impossible.</p>\n\n<p>It's also an improvement because you can split up your work into fixed chunks instead of carefully dividing the work to match the number of processes you wish to launch. <code>multiprocessing.Pool</code>, by default, spawns a number of workers equal to your CPU cores (so no need to manually specify the number of workers and risk too few, wasting cores, or too many, wasting time on context switches). And <code>map</code>/<code>imap</code> and company will seamlessly split X work items among N workers, without needing to ensure the number of work items equals the number of work items.</p>\n"}], "owner": {"reputation": 5, "user_id": 6442308, "user_type": "registered", "profile_image": "https://graph.facebook.com/277418785942164/picture?type=large", "display_name": "Alex Wang", "link": "https://stackoverflow.com/users/6442308/alex-wang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1681, "favorite_count": 0, "accepted_answer_id": 37712975, "answer_count": 2, "score": 0, "last_activity_date": 1465428282, "creation_date": 1465417550, "question_id": 37712249, "link": "https://stackoverflow.com/questions/37712249/python-multiprocessing-and-save-data-in-order", "title": "Python multiprocessing and save data in order", "body": "<p>I'm analyzing a cvs file data line by line. For each line, I will generate a string storing the analyzed results.</p>\n\n<p>Since the file is huge, I must do multiprocessing. But because I have to access the results by their index,I have to store them in order (to a local file). </p>\n\n<p>One way I tried and worked is using lock, but it's still very slow. If i didn't lock it, it runs fast, but the data will be messed.</p>\n\n<p>What I want to do is to store those results in order to a global list. And I can write to a local file when all of the subprocesses are done.\nAny hints how to do it without a lock and how to speed it up?</p>\n\n<p>The following are my multiprocessing part code:</p>\n\n<pre><code>def worker(dat,fileName,l):\n    l.acquire()\n    target = open(fileName,\"a\")\n    for values in dat:\n        # recursively apply different start mean2, find best solution\n        model = MixGaussian(values)\n        bf = model.findBestFit()\n        # find the value where it's equally probable belongs to two gaussians \n        m1 = bf[0]\n        m2 = bf[1]\n        d1 = bf[2]\n        d2 = bf[3]\n\n        # calculate x\n        k = math.log((d1+0.001)/(d2+0.001))* d1 * d2\n        a = d1 -d2 \n        b = 2 * (m1*d2 - m2 * d1)\n        c = m2 * m2 * d1 - m1* m1 * d2 - k \n        delta = -1 * math.sqrt(b*b - 4 * a * c)\n        if a == 0:\n            a += 0.01\n        x = (-1 * b + delta) / (2 * a)\n        bf.append(x)\n        print bf\n\n        target.write(\",\".join(str(ele) for ele in bf))\n        target.write(\"\\n\")\n\n    target.close()\n    l.release()\n\nif __name__ == \"__main__\":\n    # read from line 8000 to 8999\n    data = readFile(\"unc_expr.tsv\",8000,9000)\n    target = open(\"modelstest9.csv\",\"w\")\n    target.write(\"mean_1,mean_2,deviantion_1,deviation_2,cross_value\")\n    target.write(\"\\n\")\n    target.close()\n\n    numPrcs = 16\n    d = []\n    for i in range(numPrcs-1):\n        d.append(data[i*len(data)/numPrcs:(i+1) *len(data)/numPrcs])\n    d.append(data[(numPrcs-1)*len(data)/numPrcs:])\n\n    start_time = time.time()\n    lock = Lock()\n    print(\"start time: %s\"%start_time)\n\n    for i in range(numPrcs):    \n        Process(target=worker,args=(d[i],\"modelstest9.csv\",lock)).start()\n</code></pre>\n\n<p>Thanks!!</p>\n"}, {"tags": ["python", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 603, "user_id": 3190440, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/mC8aS.png?s=128&g=1", "display_name": "Maggick", "link": "https://stackoverflow.com/users/3190440/maggick"}, "is_accepted": false, "score": -2, "last_activity_date": 1465421894, "creation_date": 1465421894, "answer_id": 37713375, "question_id": 37712243, "link": "https://stackoverflow.com/questions/37712243/possible-to-keep-same-lines-in-same-color-in-different-plots-in-matplotlib/37713375#37713375", "title": "Possible to keep same lines in same color in different plots in matplotlib?", "body": "<p>For the lines 6-10 just plot 5 blank lines before plotting the actual lines that you want to. 1-5 will already have the default colors that match the 1-10 scheme. </p>\n\n<pre><code>import matplotlib.pyplot as plt\nplt.plot([0]) # line 1\nplt.plot([0]) # line 2\nplt.plot([0]) # line 3\nplt.plot([0]) # line 4\nplt.plot([0]) # line 5\nplt.plot([1,2,3,4]) # line 6\nplt.ylabel('some numbers')\nplt.show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1188, "user_id": 3333687, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ViHfO.jpg?s=128&g=1", "display_name": "jka.ne", "link": "https://stackoverflow.com/users/3333687/jka-ne"}, "is_accepted": false, "score": 1, "last_activity_date": 1472209663, "creation_date": 1472209663, "answer_id": 39164870, "question_id": 37712243, "link": "https://stackoverflow.com/questions/37712243/possible-to-keep-same-lines-in-same-color-in-different-plots-in-matplotlib/39164870#39164870", "title": "Possible to keep same lines in same color in different plots in matplotlib?", "body": "<p>If you link your plots by assigning a label (useful if you have a legend anyway) then you can lookup the previous colour.</p>\n\n<p>Original problem:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nplt.style.use('ggplot')\nimport numpy as np\n\n\nf, axs = plt.subplots(3)\n\nlines = [np.random.rand(10,1) for a in range(10)]\n\nfor i, line in enumerate(lines):\n    axs[0].plot(line)\n\nfor i, line in enumerate(lines[:5]):\n    axs[1].plot(line)\n\nfor i, line in enumerate(lines[5:]):\n    axs[2].plot(line)\n\naxs[0].set_title(\"All Lines\")\naxs[1].set_title(\"First Five\")\naxs[2].set_title(\"Last Five\")\nf.tight_layout()\nplt.savefig(\"No Linking.png\")\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/Q1Av2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Q1Av2.png\" alt=\"No Linking of colours\"></a></p>\n\n<p>Then add some labels instead:</p>\n\n<pre><code>f, axs = plt.subplots(3)\n\nfor i, line in enumerate(lines):\n    label = \"Line {}\".format(i)\n    axs[0].plot(line, label=label)\n\nfor i, line in enumerate(lines):\n    if i &lt; 5:\n        ax = axs[1]\n    else:\n        ax = axs[2]\n\n    label = \"Line {}\".format(i)\n    # here we look up what colour was used in the first subplot.\n    colour = [l for l in axs[0].lines if l._label == label][0]._color\n    ax.plot(line, label=label, color=colour)\n\n\n\naxs[0].set_title(\"All Lines\")\naxs[1].set_title(\"First Five\")\naxs[2].set_title(\"Last Five\")\nf.tight_layout()\nplt.savefig(\"With Linking.png\")\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/9dH2f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9dH2f.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 21, "user_id": 6441547, "user_type": "registered", "profile_image": "https://graph.facebook.com/619194994909451/picture?type=large", "display_name": "Jamie Zemin Zhang", "link": "https://stackoverflow.com/users/6441547/jamie-zemin-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3283, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1472209663, "creation_date": 1465417534, "question_id": 37712243, "link": "https://stackoverflow.com/questions/37712243/possible-to-keep-same-lines-in-same-color-in-different-plots-in-matplotlib", "title": "Possible to keep same lines in same color in different plots in matplotlib?", "body": "<p>Say I have a figure A consists of 10 lines : 1 to 10, colored by default settings of matplotlib.</p>\n\n<p>Now I want to plot lines 1-5 in figure B and lines 6-10 in figure C, but keep the colors of the lines consistent. I mean in figure B, colors of line 1-5 are the same with line 1-5 in figure A; and in figure C, colors of line 6-10 are the same with lines 6-10 in figure A.</p>\n\n<p>Is there a way doing this? Thank you in advance!</p>\n"}, {"tags": ["python", "if-statement", "sage"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1465417418, "post_id": 37712178, "comment_id": 62898194, "body": "<code>0 % 2</code> is the same as <code>0</code>, so your test is the same as <code>if L[i] == 0</code>. Is that what you meant? Or did you mean <code>if L[i] % 2 == 0</code>?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1465417438, "post_id": 37712178, "comment_id": 62898205, "body": "The latter is the correct way to test if a value is even."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1465417526, "post_id": 37712178, "comment_id": 62898247, "body": "You say <i>Syntax Error</i> in the subject... but you don&#39;t have a syntax error. Can you edit the subject to remove the confusing wording?"}, {"owner": {"reputation": 221, "user_id": 6442349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SZrZB.jpg?s=128&g=1", "display_name": "Andres Mejia", "link": "https://stackoverflow.com/users/6442349/andres-mejia"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1465417680, "post_id": 37712178, "comment_id": 62898325, "body": "edited. @Barmar, I&#39;m really used to $a \\equiv b (mod2)$ and so I think that&#39;s what I had in mind. That&#39;s what I meant"}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1465417710, "post_id": 37712178, "comment_id": 62898337, "body": "Can you print out <code>i</code> as you iterate through it? <code>print(repr(i))</code> is best. It appears as though the values are strings and maybe digits with commas."}, {"owner": {"reputation": 221, "user_id": 6442349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SZrZB.jpg?s=128&g=1", "display_name": "Andres Mejia", "link": "https://stackoverflow.com/users/6442349/andres-mejia"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1465417851, "post_id": 37712178, "comment_id": 62898417, "body": "@Barmar you were indeed correct, that fixed the problem. <i>facepalm</i> sorry, still getting used to this."}, {"owner": {"reputation": 97030, "user_id": 189205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c60305494593d556e57a3cf8e4a8c163?s=128&d=identicon&r=PG", "display_name": "interjay", "link": "https://stackoverflow.com/users/189205/interjay"}, "edited": false, "score": 0, "creation_date": 1465418064, "post_id": 37712178, "comment_id": 62898516, "body": "Please don&#39;t edit the question to fix the problem you had in your code - that makes the question and posted answers meaningless and confusing."}, {"owner": {"reputation": 221, "user_id": 6442349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SZrZB.jpg?s=128&g=1", "display_name": "Andres Mejia", "link": "https://stackoverflow.com/users/6442349/andres-mejia"}, "edited": false, "score": 0, "creation_date": 1465418325, "post_id": 37712178, "comment_id": 62898636, "body": "Unedited, you are correct."}, {"owner": {"reputation": 4059, "user_id": 782821, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/aaf3f7965a7323d6a25ee614cfa386b4?s=128&d=identicon&r=PG", "display_name": "kcrisman", "link": "https://stackoverflow.com/users/782821/kcrisman"}, "edited": false, "score": 0, "creation_date": 1465480389, "post_id": 37712178, "comment_id": 62927297, "body": "By the way, if you intend to use integers modulo <code>n</code>, you may want to use <code>mod(x,n)</code> to get them (or just create the ring of integers mod n in Sage)."}], "answers": [{"tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 0, "last_activity_date": 1465417957, "creation_date": 1465417957, "answer_id": 37712369, "question_id": 37712178, "link": "https://stackoverflow.com/questions/37712178/error-in-if-loop-sage/37712369#37712369", "title": "error in &quot;if&quot; loop (Sage)", "body": "<p>You intend to print even numbers? This should work:</p>\n\n<pre><code>Q = DiagonalQuadraticForm(ZZ,[1,1,1,1])\nL = Q.representation_number_list(10)\nfor i, v in enumerate(L):\n     if v % 2 == 0:\n          print i\n</code></pre>\n\n<p><code>enumerate(...)</code> can replace <code>range(len(...))</code></p>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1465419645, "creation_date": 1465419645, "answer_id": 37712842, "question_id": 37712178, "link": "https://stackoverflow.com/questions/37712178/error-in-if-loop-sage/37712842#37712842", "title": "error in &quot;if&quot; loop (Sage)", "body": "<p>Modulus syntax in Python (and most other programming languages) is not the same as mathematical notation. In math, you write</p>\n\n<pre><code>a \u2261 b (mod n)\n</code></pre>\n\n<p>to indicate that <code>a</code> and <code>b</code> are congruent modulo <code>n</code>. In programming languages, <code>modulus</code> is treated as an arithmetic operation on <code>a</code> and <code>n</code>, analogous with division (it returns the remainder of the division rather than the quotient). To determine if the number is congruent with another number, you compare that remainder with the number, so it's written as:</p>\n\n<pre><code>a % n == b\n</code></pre>\n\n<p>Therefore, your <code>if</code> statement should be:</p>\n\n<pre><code>if L[i] % 2 == 0:\n</code></pre>\n\n<p>When you write</p>\n\n<pre><code>if L[i] == 0 % 2:\n</code></pre>\n\n<p>it's parsed as:</p>\n\n<pre><code>if L[i] == (0 % 2):\n</code></pre>\n\n<p>And since the remainder of <code>0 / 2</code> is <code>0</code>, it's equivalent to:</p>\n\n<pre><code>if L[i] == 0:\n</code></pre>\n\n<p>which isn't what you intended.</p>\n"}], "owner": {"reputation": 221, "user_id": 6442349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SZrZB.jpg?s=128&g=1", "display_name": "Andres Mejia", "link": "https://stackoverflow.com/users/6442349/andres-mejia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 37712842, "answer_count": 2, "score": -1, "last_activity_date": 1465419645, "creation_date": 1465417283, "last_edit_date": 1465418313, "question_id": 37712178, "link": "https://stackoverflow.com/questions/37712178/error-in-if-loop-sage", "title": "error in &quot;if&quot; loop (Sage)", "body": "<p>I'm using \"Sage,\" but I do not think that it is relevant for this question.</p>\n\n<p>I have made the following definitions, and attempted to implement an if loop:</p>\n\n<pre><code>Q = DiagonalQuadraticForm(ZZ,[1,1,1,1])\nL = Q.representation_number_list(10)\nfor i in range(len(L)):\n         if L[i]  == 0 % 2:\n              print i\n</code></pre>\n\n<p>Upon looking up Python demos, it seems as though my syntax is correct and (I haven't been made aware of any syntax errors.)</p>\n\n<p>However, nothing is being printed! In fact, if I declare \"i\" in the next textbox, all that displays is \"9,\" which doesn't change despite my fiddling with the modulus. What is wrong?</p>\n"}, {"tags": ["python", "function", "import", "calculator"], "comments": [{"owner": {"reputation": 4621, "user_id": 1939638, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/vu1kQ.jpg?s=128&g=1", "display_name": "Matt Cremeens", "link": "https://stackoverflow.com/users/1939638/matt-cremeens"}, "edited": false, "score": 1, "creation_date": 1465416993, "post_id": 37712040, "comment_id": 62897952, "body": "<code>addition</code> isn&#39;t indented properly."}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 1, "creation_date": 1465417179, "post_id": 37712040, "comment_id": 62898065, "body": "your class also isn&#39;t indented properly."}], "answers": [{"tags": [], "owner": {"reputation": 2543, "user_id": 3527520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/284940a2227bc0245276e6022be418e3?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Fraser", "link": "https://stackoverflow.com/users/3527520/simon-fraser"}, "is_accepted": true, "score": 0, "last_activity_date": 1465417308, "creation_date": 1465417308, "answer_id": 37712189, "question_id": 37712040, "link": "https://stackoverflow.com/questions/37712040/bug-while-trying-to-create-a-function-from-other-functions-in-python/37712189#37712189", "title": "bug while trying to create a function from other functions in python", "body": "<p>In the <code>if</code> statements, like this:</p>\n\n<pre><code>if xn == \"a\":\n    addition = add.addition\n    x = self.addition()\n    self.x = x\n    return x\n</code></pre>\n\n<p><code>addition</code> is created as a variable local to the function <code>choice</code>, but you're then setting <code>x</code> to be <code>self.addition()</code>, which isn't defined.</p>\n\n<p>If you mean to write <code>x = add.addition()</code> then be warned that your <code>addition</code> function doesn't return anything, it just prints out a value. The same for the other functions - none of them return anything. So <code>self.addition</code> is not defined, and <code>x</code> will be a <code>NoneType</code> object</p>\n\n<p>Your <code>addition</code>, <code>subtraction</code> and other functions also take <code>self</code> as an argument, when they're not methods in a class, so this doesn't make much sense.</p>\n"}], "owner": {"reputation": 43, "user_id": 5719426, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a48c95fe7e4f92f74b73e501b384662d?s=128&d=identicon&r=PG&f=1", "display_name": "mangafas", "link": "https://stackoverflow.com/users/5719426/mangafas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 37712189, "answer_count": 1, "score": 0, "last_activity_date": 1465417308, "creation_date": 1465416728, "question_id": 37712040, "link": "https://stackoverflow.com/questions/37712040/bug-while-trying-to-create-a-function-from-other-functions-in-python", "title": "bug while trying to create a function from other functions in python", "body": "<p>I have been trying to create a calculator and i had for practical reasons i tried to import functions from a separate python file. It works at some extent but it breaks when it tries to do the calculations. The bug is is that the add is not defined but i did defined it while importing the function. Here is the code:</p>\n\n<pre><code>class Calculator(object):\n\nimport a10 as add\nimport d10 as div\nimport m10 as mult\nimport s10 as sub\n\ndef choice(self):\n    print(\"A. Addition\\l B. Substraction\\l C. Division\\l D. Multiplication\")\n    xn = input(\"What do you want to do? \")\n    if xn == \"a\":\n        addition = add.addition\n        x = self.addition()\n        self.x = x\n        return x\n    elif xn == \"b\":\n        subtraction = sub.subtraction\n        z = self.subtraction()\n        self.z = z\n        return z\n    elif xn == \"c\":\n        division = div.division\n        y = self.division()\n        self.y = y\n        return y\n    elif xn == 'd':\n        Multiplication = mult.multiplication\n        v = self.Multiplication()\n        self.v = v\n        return v\n\n\nobjcalc = Calculator()\nprint(objcalc.choice())\n</code></pre>\n\n<p>Here is the a10</p>\n\n<pre><code>def addition(self):\ntry:\n    n = int(input(\"enter number: \"))  \n    n_for_add = int(input(\"What do you want to add on \" + str(n) + \" ? \"))       \nexcept ValueError: \n    print(\"you must enter an integer!\") \nn_from_add = n + n_for_add\nprint(str(n) + \" plus \" + str(n_for_add) + \" equals to \" + str(n_from_add))  \n</code></pre>\n\n<p>s10</p>\n\n<pre><code>def subtraction(self):\n    try:\n        nu = int(input(\"enter number: \"))\n        nu_for_sub = int(input(\"What do you want to take off \" + str(nu) + \" ? \"))\n    except ValueError:\n        print(\"you must enter an integer!\")\n    nu_from_sub = nu - nu_for_sub\n    print(str(nu) + \" minus \" + str(nu_for_sub) + \" equals to \" + str(nu_from_sub))\n</code></pre>\n\n<p>m10</p>\n\n<pre><code>def Multiplication(self):\n    try:\n        numb = int(input(\"enter number: \"))\n        numb_for_multi = int(input(\"What do you want to multiply \" + str(numb) + \" on? \"))\n    except ValueError:\n        print(\"you must enter an integer!\")\n    numb_from_multi = numb * numb_for_multi\n    print(str(numb) + \" multiplied by  \" + str(numb_for_multi) + \" equals to \" + str(numb_from_multi))\n</code></pre>\n\n<p>d10</p>\n\n<pre><code>def division(self):\n    try:\n        num = int(input(\"enter number: \"))\n        num_for_div = int(input(\"What do you want to divide \" + str(num) + \" off? \"))\n    except ValueError:\n        print(\"you must enter an integer!\")\n    num_from_div = num / num_for_div\n    print(str(num) + \" divided by \" + str(num_for_div) + \" equals to \" + str(num_from_div))\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "csv", "matplotlib"], "comments": [{"owner": {"reputation": 6344, "user_id": 2486357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d50eaca20365c51634c9452835c50ab?s=128&d=identicon&r=PG", "display_name": "C_Z_", "link": "https://stackoverflow.com/users/2486357/c-z"}, "edited": false, "score": 0, "creation_date": 1465416975, "post_id": 37711936, "comment_id": 62897941, "body": "Maybe <code>plt.annotate()</code> is what you need: <a href=\"http://matplotlib.org/users/annotations_intro.html\" rel=\"nofollow noreferrer\">matplotlib.org/users/annotations_intro.html</a>"}, {"owner": {"reputation": 41, "user_id": 6131313, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bb2beb045ed16798a69a46ee2a867c28?s=128&d=identicon&r=PG&f=1", "display_name": "FootyStattowannab3", "link": "https://stackoverflow.com/users/6131313/footystattowannab3"}, "reply_to_user": {"reputation": 6344, "user_id": 2486357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d50eaca20365c51634c9452835c50ab?s=128&d=identicon&r=PG", "display_name": "C_Z_", "link": "https://stackoverflow.com/users/2486357/c-z"}, "edited": false, "score": 0, "creation_date": 1465417124, "post_id": 37711936, "comment_id": 62898029, "body": "Is it possible to plot a start and end point to get the correct length of the arrow? Not seen anything to suggest so."}, {"owner": {"reputation": 6344, "user_id": 2486357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2d50eaca20365c51634c9452835c50ab?s=128&d=identicon&r=PG", "display_name": "C_Z_", "link": "https://stackoverflow.com/users/2486357/c-z"}, "edited": false, "score": 0, "creation_date": 1465417927, "post_id": 37711936, "comment_id": 62898456, "body": "Yes, you just set <code>xy</code> to be the start and <code>xytext</code> to be the end. Just leave the text as a blank string."}, {"owner": {"reputation": 16763, "user_id": 2749397, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/rcNMz.png?s=128&g=1", "display_name": "gboffi", "link": "https://stackoverflow.com/users/2749397/gboffi"}, "edited": false, "score": 0, "creation_date": 1465418782, "post_id": 37711936, "comment_id": 62898889, "body": "Is your example representative of the typical size of your problem? A solution where you add individual objects to a plot doesn&#39;t scale nicely with   Matplotlib, if you have thousand arrows you may have to use <a href=\"http://matplotlib.org/api/collections_api.html\" rel=\"nofollow noreferrer\"><code>collections</code></a>"}], "answers": [{"comments": [{"owner": {"reputation": 765, "user_id": 2176965, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44a425d990d4ff43fe5a93d1aa236db7?s=128&d=identicon&r=PG&f=1", "display_name": "DiCaprio", "link": "https://stackoverflow.com/users/2176965/dicaprio"}, "edited": false, "score": 0, "creation_date": 1530717478, "post_id": 37715460, "comment_id": 89336289, "body": "for <code>FancyArrow</code> use <code>from matplotlib import patches</code>"}], "tags": [], "owner": {"reputation": 28401, "user_id": 2666859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LtKyC.png?s=128&g=1", "display_name": "Serenity", "link": "https://stackoverflow.com/users/2666859/serenity"}, "is_accepted": true, "score": 1, "last_activity_date": 1465435336, "creation_date": 1465435336, "answer_id": 37715460, "question_id": 37711936, "link": "https://stackoverflow.com/questions/37711936/arrows-on-scatter/37715460#37715460", "title": "Arrows on Scatter", "body": "<p>You can use 'arrow' to plot arrow, like here:</p>\n\n<pre><code>import numpy as np\nfrom matplotlib import pyplot as plt\n\ndata = np.genfromtxt('file1.dat', delimiter=',', skip_header=1, names=['MAG', 'X0', 'Y0','X1','Y1'])\nplt.scatter(data['X0'], data['Y0'], color='r', zorder=10)\nplt.scatter(data['X1'], data['Y1'], color='r', zorder=10)\n\nfor d in data:\n    if(d['MAG'] &gt; 0):\n        plt.arrow(d['X0'],d['Y0'],d['X1']-d['X0'], d['Y1']-d['Y0'], \n         shape='full', color='b', lw=d['MAG']/2., length_includes_head=True, \n         zorder=0, head_length=3., head_width=1.5)\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/XDUFt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XDUFt.png\" alt=\"enter image description here\"></a></p>\n\n<p>Another way you have to use <code>FancyArrow</code>, like here:</p>\n\n<pre><code>for d in data:\n    if(d['MAG'] &gt; 0):\n        ar = patches.FancyArrow(d['X0'],d['Y0'],d['X1']-d['X0'], d['Y1']-d['Y0'], width=d['MAG']/4.,\n         head_width=3., head_length=1.54, length_includes_head=True, zorder = 0) \n        plt.gca().add_patch(ar)\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6131313, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bb2beb045ed16798a69a46ee2a867c28?s=128&d=identicon&r=PG&f=1", "display_name": "FootyStattowannab3", "link": "https://stackoverflow.com/users/6131313/footystattowannab3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3949, "favorite_count": 0, "accepted_answer_id": 37715460, "answer_count": 1, "score": 3, "last_activity_date": 1465435336, "creation_date": 1465416382, "last_edit_date": 1465424799, "question_id": 37711936, "link": "https://stackoverflow.com/questions/37711936/arrows-on-scatter", "title": "Arrows on Scatter", "body": "<p>Having had no luck myself I'm looking for a bit of assistance with this problem I have run into.</p>\n\n<p>I have CSV data in this format.</p>\n\n<pre><code>Flow Amount,X_Start,Y_Start,X_End,Y_End\n4,36.20740741,31.97407407,48.103125,9.4125\n4,50.71851852,48.46666667,65.65714286,73.81785714\n3,50.71851852,48.46666667,48.103125,9.4125\n3,48.103125,9.4125,62.14642857,22.55357143\n2,31.976,71.308,40.19210526,88.43157895\n1,56.98888889,48.18333333,36.20740741,31.97407407\n1,56.98888889,48.18333333,50.71851852,48.46666667\n0,46.65686275,72.46470588,48.103125,9.4125\n0,65.65714286,73.81785714,12.18333333,55.78333333\n</code></pre>\n\n<p>I am looking to plot an arrow onto my scatter from the points at (X_Start, Y_Start) to the point (X_End, Y_End) with an arrow head at the End point.</p>\n\n<p>I would also like to change the weight of the arrow based upon column 1 [Flow] showing a thicker line, the greater the number.</p>\n\n<p>I have created a plot with everything except the arrows and the arrow effect I am looking to achieve is much like the one from the screenshot.</p>\n\n<p><a href=\"https://i.stack.imgur.com/QX5i3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QX5i3.png\" alt=\"enter image description here\"></a></p>\n\n<p>I've looked into <code>plt.quiver()</code> but that only takes 1 point so I'm looking for an effective workaround to add these arrows to my plot while I loop through the CSV data.</p>\n\n<p>I would be thankful for any solution ideas.</p>\n"}, {"tags": ["python", "parallel-processing", "multiprocessing"], "answers": [{"tags": [], "owner": {"reputation": 40991, "user_id": 4794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f90cd356f2945b284946d5743467d850?s=128&d=identicon&r=PG", "display_name": "Don Kirkby", "link": "https://stackoverflow.com/users/4794/don-kirkby"}, "is_accepted": true, "score": 1, "last_activity_date": 1465498745, "creation_date": 1465498745, "answer_id": 37734134, "question_id": 37711931, "link": "https://stackoverflow.com/questions/37711931/parallel-processing-in-python-when-clearing-all-variables/37734134#37734134", "title": "Parallel processing in Python when clearing all variables", "body": "<p>It probably has to do with the restrictions of using <a href=\"https://docs.python.org/2/library/multiprocessing.html#windows\" rel=\"nofollow\">multiprocessing on Windows</a>.</p>\n\n<blockquote>\n  <p>Since Windows lacks <code>os.fork()</code> it has a few extra restrictions.</p>\n</blockquote>\n\n<p>It may be that some global variables are used to control multiprocessing under Windows, and you're breaking that. Try printing the variable names before you delete them.</p>\n\n<p>You'll get more helpful answers if you describe why you want to clear out all the global variables. I would guess that you'd be better off to use fewer global variables, so you don't have to clear them out.</p>\n"}], "owner": {"reputation": 93, "user_id": 2386083, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d85511051fb33418b9c63c99cb25aa51?s=128&d=identicon&r=PG", "display_name": "Mohamad", "link": "https://stackoverflow.com/users/2386083/mohamad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "accepted_answer_id": 37734134, "answer_count": 1, "score": 0, "last_activity_date": 1465498745, "creation_date": 1465416368, "question_id": 37711931, "link": "https://stackoverflow.com/questions/37711931/parallel-processing-in-python-when-clearing-all-variables", "title": "Parallel processing in Python when clearing all variables", "body": "<p>I'm trying to run parallel process using python. I managed to do that using the multiprocessing module.</p>\n\n<p>The problem is that when I add a \"Clear all variables\" at the beginning of the code, the algorithm gives me this error:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):</p>\n  \n  <p>File \"\", line 1, in \n      runfile('C:/Users/cuca/Dropbox/USP/Pesquisa/PosQuali/Paralelo/Paraleltest2.py',\n  wdir='C:/Users/cuca/Dropbox/USP/Pesquisa/PosQuali/Paralelo')</p>\n  \n  <p>File\n  \"C:\\Python27\\lib\\site-packages\\spyderlib\\widgets\\externalshell\\sitecustomize.py\",\n  line 685, in runfile\n      execfile(filename, namespace)</p>\n  \n  <p>File\n  \"C:\\Python27\\lib\\site-packages\\spyderlib\\widgets\\externalshell\\sitecustomize.py\",\n  line 71, in execfile\n      exec(compile(scripttext, filename, 'exec'), glob, loc)</p>\n  \n  <p>File\n  \"C:/Users/cuca/Dropbox/USP/Pesquisa/PosQuali/Paralelo/Paraleltest2.py\",\n  line 36, in \n      answer1 = result1.get(timeout=1)</p>\n  \n  <p>File \"C:\\Python27\\lib\\multiprocessing\\pool.py\", line 563, in get\n      raise TimeoutError</p>\n  \n  <p>TimeoutError</p>\n</blockquote>\n\n<p>When I delete the \"Clear All Variables\" procedure from the beginning of the algorithm, it works.</p>\n\n<p>Any idea why?</p>\n\n<p>Thanks.</p>\n\n<pre><code>#Clear All\nall = [var for var in globals() if var[0] != \"_\"]\nfor var in all:\n    del globals()[var]\n\n\nfrom multiprocessing import Pool\nimport math\n\n\ndef Func1(A):\n    for i in range(1000,100000):\n        R = A * math.cos(i) * math.cos(i)\n    return R\n\n\nif __name__ == '__main__':\n\n    pool = Pool()\n    result1 = pool.apply_async(Func1, [2])   \n    result2 = pool.apply_async(Func1, [4])    \n    answer1 = result1.get(timeout=1)\n    answer2 = result2.get(timeout=1)\n</code></pre>\n"}, {"tags": ["python", "multithreading", "pyqt", "pyqt5"], "comments": [{"owner": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "edited": false, "score": 1, "creation_date": 1465417224, "post_id": 37711921, "comment_id": 62898096, "body": "Forcibly killing a thread (in any language) is almost never a good idea, because it&#39;s impossible to guarantee that the thread isn&#39;t holding a lock, in the middle of modifying shared state, etc. With that said, have you looked at non-Qt-specific <a href=\"http://stackoverflow.com/q/323972/25507\">approaches to killing threads in Python</a>?"}, {"owner": {"reputation": 3869, "user_id": 4117209, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4ef42870aacbf20424dfe7d866110eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Six", "link": "https://stackoverflow.com/users/4117209/six"}, "reply_to_user": {"reputation": 49834, "user_id": 25507, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/DqZPI.png?s=128&g=1", "display_name": "Josh Kelley", "link": "https://stackoverflow.com/users/25507/josh-kelley"}, "edited": false, "score": 0, "creation_date": 1465420634, "post_id": 37711921, "comment_id": 62899740, "body": "AFAIK I don&#39;t have access to PyQt5&#39;s threads (or if I do, I&#39;m not sure how to get at them). It&#39;s been causing my program to stall indefinitely, so inadvisable as it may be, I just need a way to kill it off once it&#39;s unrecoverable. It looks like <code>multiprocessing</code> may be able to do the job, which would be a slight improvement over the current hack."}, {"owner": {"reputation": 9263, "user_id": 1536976, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc2372591e00f2ab504b59b4f7cbed43?s=128&d=identicon&r=PG", "display_name": "Trilarion", "link": "https://stackoverflow.com/users/1536976/trilarion"}, "edited": false, "score": 0, "creation_date": 1465474461, "post_id": 37711921, "comment_id": 62922521, "body": "Maybe you could find out why it hangs and then avoid the condition."}, {"owner": {"reputation": 3869, "user_id": 4117209, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4ef42870aacbf20424dfe7d866110eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Six", "link": "https://stackoverflow.com/users/4117209/six"}, "reply_to_user": {"reputation": 9263, "user_id": 1536976, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc2372591e00f2ab504b59b4f7cbed43?s=128&d=identicon&r=PG", "display_name": "Trilarion", "link": "https://stackoverflow.com/users/1536976/trilarion"}, "edited": false, "score": 0, "creation_date": 1465513100, "post_id": 37711921, "comment_id": 62945956, "body": "@Trilarion Of course, that was my first order of business. Unfortunately it&#39;s really difficult to even reproduce, I only notice after hangs it&#39;s daily scheduled process every week or so. I suspect it&#39;s due to advertising-related JS on certain webpages. I&#39;ve noticed many other people reporting what I suspect are similar issues: <a href=\"http://www.qtforum.org/article/32057/tip-having-problem-with-hanging-application-when-using-qwebview.html\" rel=\"nofollow noreferrer\">qtforum.org/article/32057/&hellip;</a> <a href=\"http://www.qtcentre.org/archive/index.php/t-28766.html\" rel=\"nofollow noreferrer\">qtcentre.org/archive/index.php/t-28766.html</a>"}, {"owner": {"reputation": 3869, "user_id": 4117209, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4ef42870aacbf20424dfe7d866110eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Six", "link": "https://stackoverflow.com/users/4117209/six"}, "edited": false, "score": 0, "creation_date": 1465513251, "post_id": 37711921, "comment_id": 62945995, "body": "QT is largely a mystery to me but I think you may be able to reproduce something similar with <code>render(requests.get(&#39;https:&#47;&#47;news.ycombinator.com&#39;).text)</code>. This hangs indefinitely for me."}, {"owner": {"reputation": 9263, "user_id": 1536976, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc2372591e00f2ab504b59b4f7cbed43?s=128&d=identicon&r=PG", "display_name": "Trilarion", "link": "https://stackoverflow.com/users/1536976/trilarion"}, "edited": false, "score": 0, "creation_date": 1465549800, "post_id": 37711921, "comment_id": 62958682, "body": "Since you are using PyQt5, what about trying QtWebEngineView from QtWebEngineWidgets. If I&#39;m not mistaken, they use another web engine."}], "answers": [{"tags": [], "owner": {"reputation": 2465, "user_id": 2308300, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zs5xn.jpg?s=128&g=1", "display_name": "Locane", "link": "https://stackoverflow.com/users/2308300/locane"}, "is_accepted": false, "score": 1, "last_activity_date": 1571556668, "last_edit_date": 1571556668, "creation_date": 1571554385, "answer_id": 58470684, "question_id": 37711921, "link": "https://stackoverflow.com/questions/37711921/how-to-kill-hung-threads-in-python/58470684#58470684", "title": "How to kill hung threads in Python", "body": "<p>I was looking for a solution too, there apparently isn't one, on purpose.</p>\n\n<p>If you're using Linux and all you want is Python to attempt something for N seconds and then time out and handle an error condition after those N seconds, you can do this:</p>\n\n<pre><code>import time\nimport signal\n\n# This stuff is so when we get SIGALRM from the timeout functionality we can handle it instead of\n# crashing to the ground\nclass TimeOutError(Exception):\n    pass\ndef raise_timeout(var1, var2):\n    raise TimeOutError\nsignal.signal(signal.SIGALRM, raise_timeout)\n\n# Turn the alarm on\nsignal.alarm(1)\n\n# Try your thing\ntry:\n    time.sleep(2)\nexcept TimeOutError as e:\n    print(\"  We hit our timeout value and we bailed out of whatever that BS was.\")\n\n# Remember to turn the alarm back off if your attempt succeeds!\nsignal.alarm(0)\n</code></pre>\n\n<p>The one drawback is that you can't <strong>nest</strong> signal.alarm() hooks; if, in your try statement, you're calling something else that also then sets a signal.alarm(), it will override the first one and screw your stuff up.</p>\n"}], "owner": {"reputation": 3869, "user_id": 4117209, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4ef42870aacbf20424dfe7d866110eb0?s=128&d=identicon&r=PG&f=1", "display_name": "Six", "link": "https://stackoverflow.com/users/4117209/six"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1152, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1571556668, "creation_date": 1465416343, "last_edit_date": 1465577197, "question_id": 37711921, "link": "https://stackoverflow.com/questions/37711921/how-to-kill-hung-threads-in-python", "title": "How to kill hung threads in Python", "body": "<p>I've created a function that uses PyQt5 to \"render\" HTML and return the result. It's as follows:</p>\n\n<pre><code>def render(source_html):\n    \"\"\"Fully render HTML, JavaScript and all.\"\"\"\n\n    import sys\n    from PyQt5.QtWidgets import QApplication\n    from PyQt5.QtWebKitWidgets import QWebPage\n\n    class Render(QWebPage):\n        def __init__(self, html):\n            self.html = None\n            self.app = QApplication(sys.argv)\n            QWebPage.__init__(self)\n            self.loadFinished.connect(self._loadFinished)\n            self.mainFrame().setHtml(html)\n            self.app.exec_()\n\n        def _loadFinished(self, result):\n            self.html = self.mainFrame().toHtml()\n            self.app.quit()\n\n    return Render(source_html).html\n</code></pre>\n\n<p>Occasionally it's threads will hang indefinitely and I'll have to kill the whole program. Unfortunately PyQt5 may as well be a black box as I'm not sure how to kill it when it misbehaves.</p>\n\n<p>Ideally I'd be able to implement a timeout of <em>n</em> seconds. As a workaround, I've put the function in it's own script <code>render.py</code> and am calling it from via <code>subprocess</code> with this monstrosity:</p>\n\n<pre><code>def render(html):\n    \"\"\"Return fully rendered HTML, JavaScript and all.\"\"\"\n    args = ['render.py', '-']\n    timeout = 20\n\n    try:\n        return subprocess.check_output(args,\n                                       input=html,\n                                       timeout=timeout,\n                                       universal_newlines=True)\n    # Python 2's subprocess.check_output doesn't support input or timeout\n    except TypeError:\n        class SubprocessError(Exception):\n            \"\"\"Base exception from subprocess module.\"\"\"\n            pass\n\n        class TimeoutExpired(SubprocessError):\n            \"\"\"\n            This exception is raised when the timeout expires while\n            waiting for a child process.\n            \"\"\"\n\n            def __init__(self, cmd, timeout, output=None):\n                super(TimeoutExpired, self).__init__()\n                self.cmd = cmd\n                self.timeout = timeout\n                self.output = output\n\n            def __str__(self):\n                return ('Command %r timed out after %s seconds' %\n                        (self.cmd, self.timeout))\n\n        process = subprocess.Popen(['timeout', str(timeout)] + args,\n                                   stderr=subprocess.PIPE,\n                                   stdin=subprocess.PIPE,\n                                   stdout=subprocess.PIPE)\n        # pipe html into render.py's stdin\n        output = process.communicate(\n            html.encode('utf8'))[0].decode('latin1')\n        retcode = process.poll()\n        if retcode == 124:\n            raise TimeoutExpired(args, timeout)\n        return output\n</code></pre>\n\n<p>The <code>multiprocessing</code> module appears to greatly simplify things:</p>\n\n<pre><code>from multiprocessing import Pool\n\npool = Pool(1)\nrendered_html = pool.apply_async(render, args=(html,)).get(timeout=20)\npool.terminate()\n</code></pre>\n\n<p>Is there a way to implement a timeout that doesn't necessitate these sort of shenanigans?</p>\n"}, {"tags": ["python", "regex", "python-2.7"], "comments": [{"owner": {"reputation": 235, "user_id": 1410668, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4debb905a43192c6379c63839c5c335d?s=128&d=identicon&r=PG", "display_name": "user1410668", "link": "https://stackoverflow.com/users/1410668/user1410668"}, "reply_to_user": {"reputation": 42750, "user_id": 189134, "user_type": "moderator", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/jFsyb.png?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/189134/andy"}, "edited": false, "score": 0, "creation_date": 1465416547, "post_id": 37711913, "comment_id": 62897696, "body": "If I would put my regex \\w[\\w\\/\\\\-]*(\\s*[\\w\\/\\\\-])* on <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101.com</a> it works fine and matches HELLO-WORLD as expected."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1465416683, "post_id": 37711913, "comment_id": 62897788, "body": "Try <code>\\w[\\w&#47;\\\\-]*(?:\\s*[\\w&#47;\\\\-])*</code>. See <a href=\"http://ideone.com/NIarL0\" rel=\"nofollow noreferrer\">ideone.com/NIarL0</a>"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1465417072, "post_id": 37711913, "comment_id": 62897994, "body": "@alexis: There is no lookahead in my suggested pattern, please see the answer."}], "answers": [{"comments": [{"owner": {"reputation": 235, "user_id": 1410668, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4debb905a43192c6379c63839c5c335d?s=128&d=identicon&r=PG", "display_name": "user1410668", "link": "https://stackoverflow.com/users/1410668/user1410668"}, "edited": false, "score": 0, "creation_date": 1465417227, "post_id": 37712067, "comment_id": 62898099, "body": "This is perfect. Thank you."}, {"owner": {"reputation": 43245, "user_id": 699305, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/db6ce45b5ec86e1b00d922fc5cee315f?s=128&d=identicon&r=PG", "display_name": "alexis", "link": "https://stackoverflow.com/users/699305/alexis"}, "edited": false, "score": 0, "creation_date": 1465417378, "post_id": 37712067, "comment_id": 62898175, "body": "Explanation: if <code>re.findall</code> contains capturing groups, it will <i>only</i> return the content captured by the groups; not the whole match."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1465417513, "post_id": 37712067, "comment_id": 62898243, "body": "Yes, here is the relevant link: <a href=\"https://docs.python.org/2/library/re.html#re.findall\" rel=\"nofollow noreferrer\">docs.python.org/2/library/re.html#re.findall</a>"}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1465416850, "creation_date": 1465416850, "answer_id": 37712067, "question_id": 37711913, "link": "https://stackoverflow.com/questions/37711913/python-regex-not-matching-but-works-on-regex-tester/37712067#37712067", "title": "Python regex not matching but works on regex tester", "body": "<p>You can  use a <em>non-capturing</em> group (i.e. <code>(?:\\s*[\\w/\\\\-])</code>, the <code>(?:...)</code> does not form a capturing group and <code>re.findall</code> returns the whole match, not the captured group value(s)):</p>\n\n<pre><code>import re\npattern = re.compile(r'\\w[\\w/\\\\-]*(?:\\s*[\\w/\\\\-])*')\nprint(pattern.findall(\"HELLO-WORLD\"))\n</code></pre>\n\n<p>See the <a href=\"http://ideone.com/NIarL0\" rel=\"nofollow\">IDEONE demo</a></p>\n\n<p>Also, note that <code>/</code> symbol does not have to be escaped in a Python regex pattern.</p>\n\n<p>Another point is that there is a PyPi regex module, and that is why I suggest using <code>import re</code> rather than hiding it with <code>as regex</code>.</p>\n"}], "owner": {"reputation": 235, "user_id": 1410668, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4debb905a43192c6379c63839c5c335d?s=128&d=identicon&r=PG", "display_name": "user1410668", "link": "https://stackoverflow.com/users/1410668/user1410668"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1091, "favorite_count": 0, "accepted_answer_id": 37712067, "answer_count": 1, "score": 1, "last_activity_date": 1465417104, "creation_date": 1465416335, "last_edit_date": 1465417104, "question_id": 37711913, "link": "https://stackoverflow.com/questions/37711913/python-regex-not-matching-but-works-on-regex-tester", "title": "Python regex not matching but works on regex tester", "body": "<pre><code>import re as regex\npattern = regex.compile(r'\\w[\\w\\/\\\\-]*(\\s*[\\w\\/\\\\-])*')\nprint pattern.findall(\"HELLO-WORLD\")\n</code></pre>\n\n<p>This just prints out <code>['']</code></p>\n\n<p>The regex works correctly on an online regex tester. Why is it not matching?</p>\n"}, {"tags": ["python", "ajax", "django"], "comments": [{"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1465418493, "post_id": 37711850, "comment_id": 62898728, "body": "You can store data in the <a href=\"https://docs.djangoproject.com/en/1.9/topics/http/sessions/#using-sessions-in-views\" rel=\"nofollow noreferrer\">session object</a> between requests."}, {"owner": {"reputation": 1661, "user_id": 856647, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/YWbzz.jpg?s=128&g=1", "display_name": "roob", "link": "https://stackoverflow.com/users/856647/roob"}, "edited": false, "score": 0, "creation_date": 1465425111, "post_id": 37711850, "comment_id": 62901612, "body": "Where are the files (initial data) being loaded from? Are they coming from server side, or from the user (client side)?"}, {"owner": {"reputation": 1, "user_id": 6442216, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206159724534056/picture?type=large", "display_name": "Willem-Jan Weejee", "link": "https://stackoverflow.com/users/6442216/willem-jan-weejee"}, "edited": false, "score": 0, "creation_date": 1465448063, "post_id": 37711850, "comment_id": 62907182, "body": "From the server side"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6442216, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206159724534056/picture?type=large", "display_name": "Willem-Jan Weejee", "link": "https://stackoverflow.com/users/6442216/willem-jan-weejee"}, "edited": false, "score": 0, "creation_date": 1465418133, "post_id": 37712058, "comment_id": 62898552, "body": "A representative amount of data to do the simulation on has a size of 9710484 bytes. It would be nice to somehow store this in the view without the need to transfer it everytime the settings change."}], "tags": [], "owner": {"reputation": 138, "user_id": 1994255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85b1a59007598923576a3a3d7345f59f?s=128&d=identicon&r=PG", "display_name": "Lawrence Dean Vanderpool", "link": "https://stackoverflow.com/users/1994255/lawrence-dean-vanderpool"}, "is_accepted": false, "score": 0, "last_activity_date": 1465416805, "creation_date": 1465416805, "answer_id": 37712058, "question_id": 37711850, "link": "https://stackoverflow.com/questions/37711850/django-object-in-view/37712058#37712058", "title": "Django object in view?", "body": "<p>Unless you set up some kind of socket (for instance using Django Channels) you'll have to resend the entire request data on each request. This doesn't seem to be much of a problem for your use case, though.</p>\n"}], "owner": {"reputation": 1, "user_id": 6442216, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206159724534056/picture?type=large", "display_name": "Willem-Jan Weejee", "link": "https://stackoverflow.com/users/6442216/willem-jan-weejee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465417023, "creation_date": 1465416080, "question_id": 37711850, "link": "https://stackoverflow.com/questions/37711850/django-object-in-view", "title": "Django object in view?", "body": "<p>I'm using Django templates with HTML/JS to show the results of simulations in python/Anaconda. The simulation depends on the setting of different parameters. After the initial data is loaded (from files) and visualized by the first call of the page, the parameters can be chosen in textfields/dropdowns in the template. An AJAX-request sends the parameter to the view and retrieves an array with the results.<br>\nDo I need to send all the initial data with the requests everytime, or is it possible to store it in, for example, an attribute of an object in the view? Are examples avaiable?</p>\n"}, {"tags": ["python", "matplotlib", "3d"], "comments": [{"owner": {"reputation": 4475, "user_id": 3846228, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/j0fFT.jpg?s=128&g=1", "display_name": "dot.Py", "link": "https://stackoverflow.com/users/3846228/dot-py"}, "edited": false, "score": 0, "creation_date": 1465416508, "post_id": 37711843, "comment_id": 62897671, "body": "I know nothing about 3d charts... but i know this process is called <code>interpolation</code>. According to wiki, interpolation is a method of constructing new data points within the range of a discrete set of known data points. Maybe this new keyword will help you."}, {"owner": {"reputation": 23, "user_id": 6352804, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201918529281705/picture?type=large", "display_name": "Jesse Batson", "link": "https://stackoverflow.com/users/6352804/jesse-batson"}, "reply_to_user": {"reputation": 4475, "user_id": 3846228, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/j0fFT.jpg?s=128&g=1", "display_name": "dot.Py", "link": "https://stackoverflow.com/users/3846228/dot-py"}, "edited": false, "score": 0, "creation_date": 1465416573, "post_id": 37711843, "comment_id": 62897716, "body": "From what I&#39;ve used so far though, the interpolation only works for 1D and only gives more sets of points rather than a line though? Anyone feel free to correct me if I&#39;m wrong"}, {"owner": {"reputation": 4475, "user_id": 3846228, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/j0fFT.jpg?s=128&g=1", "display_name": "dot.Py", "link": "https://stackoverflow.com/users/3846228/dot-py"}, "edited": false, "score": 0, "creation_date": 1465416858, "post_id": 37711843, "comment_id": 62897880, "body": "<a href=\"http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.interpolate.griddata.html\" rel=\"nofollow noreferrer\">docs.scipy.org/doc/scipy-0.14.0/reference/generated/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6352804, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201918529281705/picture?type=large", "display_name": "Jesse Batson", "link": "https://stackoverflow.com/users/6352804/jesse-batson"}, "edited": false, "score": 0, "creation_date": 1465417268, "post_id": 37712075, "comment_id": 62898114, "body": "When I try using the ax.plot3D(x,y,z), it gives me the error: &#39;ValueError: third arg must be a format string&#39;. Am I using it wrong?"}, {"owner": {"reputation": 3739, "user_id": 5422525, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9fb3d7ac742a990084930a48b6001421?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/5422525/m-t"}, "reply_to_user": {"reputation": 23, "user_id": 6352804, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201918529281705/picture?type=large", "display_name": "Jesse Batson", "link": "https://stackoverflow.com/users/6352804/jesse-batson"}, "edited": false, "score": 0, "creation_date": 1465417370, "post_id": 37712075, "comment_id": 62898168, "body": "@JesseBatson Could you verify that the type of your <code>ax</code> is <code>matplotlib.axes._subplots.Axes3DSubplot&#39;</code>?"}, {"owner": {"reputation": 23, "user_id": 6352804, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201918529281705/picture?type=large", "display_name": "Jesse Batson", "link": "https://stackoverflow.com/users/6352804/jesse-batson"}, "edited": false, "score": 0, "creation_date": 1465417548, "post_id": 37712075, "comment_id": 62898259, "body": "It verified that &lt;class &#39;matplotlib.axes._subplots.Axes3DSubplot&#39;&gt;"}, {"owner": {"reputation": 23, "user_id": 6352804, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201918529281705/picture?type=large", "display_name": "Jesse Batson", "link": "https://stackoverflow.com/users/6352804/jesse-batson"}, "edited": false, "score": 0, "creation_date": 1465418016, "post_id": 37712075, "comment_id": 62898501, "body": "I don&#39;t know if this matters, but I am also using Python 2.7 in case you happen to be using a different version?"}, {"owner": {"reputation": 3739, "user_id": 5422525, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9fb3d7ac742a990084930a48b6001421?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/5422525/m-t"}, "reply_to_user": {"reputation": 23, "user_id": 6352804, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201918529281705/picture?type=large", "display_name": "Jesse Batson", "link": "https://stackoverflow.com/users/6352804/jesse-batson"}, "edited": false, "score": 0, "creation_date": 1465418610, "post_id": 37712075, "comment_id": 62898798, "body": "@JesseBatson The code above works on both 3.x and 2.7. Could you try to run the exact piece of code above as a standalone script (adding <code>plt.show()</code> at the end) or running it in a jupyter notebook with <code>%matplotlib inline</code>."}, {"owner": {"reputation": 23, "user_id": 6352804, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201918529281705/picture?type=large", "display_name": "Jesse Batson", "link": "https://stackoverflow.com/users/6352804/jesse-batson"}, "edited": false, "score": 0, "creation_date": 1465479855, "post_id": 37712075, "comment_id": 62926854, "body": "So I ran yours and it does work! I&#39;ve found that it&#39;s because you have a set equation for your line, whereas I don&#39;t have an equation for mine which is why yours works. If I don&#39;t have an equation for my path how would I connect the points?"}], "tags": [], "owner": {"reputation": 3739, "user_id": 5422525, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9fb3d7ac742a990084930a48b6001421?s=128&d=identicon&r=PG&f=1", "display_name": "M.T", "link": "https://stackoverflow.com/users/5422525/m-t"}, "is_accepted": false, "score": 3, "last_activity_date": 1465417266, "last_edit_date": 1465417266, "creation_date": 1465416871, "answer_id": 37712075, "question_id": 37711843, "link": "https://stackoverflow.com/questions/37711843/how-can-i-connect-points-on-a-3d-scatter-plot/37712075#37712075", "title": "How can I connect points on a 3D scatter plot?", "body": "<p>If you have enough points using only your coordinates I think what you are looking for is <a href=\"http://matplotlib.org/mpl_toolkits/mplot3d/api.html#mpl_toolkits.mplot3d.axes3d.Axes3D.plot3D\" rel=\"nofollow noreferrer\"><code>plot3D</code></a>. If you need it more smooth line it might be worth looking into <a href=\"http://docs.scipy.org/doc/scipy-0.14.0/reference/generated/scipy.interpolate.RegularGridInterpolator.html#scipy.interpolate.RegularGridInterpolator\" rel=\"nofollow noreferrer\"><code>scipy.interpolate.RegularGridInterpolator</code></a> which would help generate more points, which you could then insert into <code>plot3D</code>.</p>\n\n<p>Example of usage of <code>plot3D</code>:</p>\n\n<pre><code>import numpy\nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import Axes3D\n\nfig = plt.figure(figsize=(20,10))\nax = plt.axes(projection='3d')\n\nz_coords_row = numpy.sin(numpy.linspace(0,2*numpy.pi,100))+5\nx_coords_row = numpy.sin(numpy.linspace(0,2*numpy.pi,100))\ny_coords_row = numpy.cos(numpy.linspace(0,2*numpy.pi,100))\n\nz = numpy.transpose(z_coords_row)[0:100]\nx = numpy.transpose(x_coords_row)[0:100]\ny = numpy.transpose(y_coords_row)[0:100]\n\nplt.xticks(numpy.arange(-1.5, 1.5, .25))\nplt.yticks(numpy.arange(-1.5, 1.5, .5))\n\nax.scatter(x, y, z,s=5)\nax.plot3D(x,y,z)\nax.view_init(elev=10., azim=45)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/K8ruR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K8ruR.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 23, "user_id": 6352804, "user_type": "registered", "profile_image": "https://graph.facebook.com/10201918529281705/picture?type=large", "display_name": "Jesse Batson", "link": "https://stackoverflow.com/users/6352804/jesse-batson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1630, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1465417266, "creation_date": 1465416062, "question_id": 37711843, "link": "https://stackoverflow.com/questions/37711843/how-can-i-connect-points-on-a-3d-scatter-plot", "title": "How can I connect points on a 3D scatter plot?", "body": "<p>So currently, I have all these coordinates and so it's quite easy to create a 3D scatter plot of all the combination of coordinates.</p>\n\n<pre><code>fig = plt.figure(figsize=(20,10))\nax = plt.axes(projection='3d')\n\nz = numpy.transpose(z_coords_row)[0:100]\nx = numpy.transpose(x_coords_row)[0:100]\ny = numpy.transpose(y_coords_row)[0:100]\n\nplt.xticks(numpy.arange(-1.5, 1.5, .25))\nplt.yticks(numpy.arange(-1.5, 1.5, .5))\n\nax.scatter(x, y, z,s=1)\nax.view_init(elev=10., azim=45)\n</code></pre>\n\n<p>This code gives me a result as so: <a href=\"http://i.stack.imgur.com/KKw1D.png\" rel=\"nofollow\">http://i.stack.imgur.com/KKw1D.png</a></p>\n\n<p>I've run into lots of problems trying to connect each point with a line to the next point in sequence. How do I go about connecting each point with the next in the array so that it's a smooth line graph?</p>\n"}, {"tags": ["python", "numpy", "scipy", "permutation", "combinatorics"], "comments": [{"owner": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 0, "creation_date": 1465416195, "post_id": 37711817, "comment_id": 62897500, "body": "Does it need to be in that order?"}, {"owner": {"reputation": 31574, "user_id": 586086, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/7cffe3cc36f65529fa2cc6841f532ac5?s=128&d=identicon&r=PG", "display_name": "Andrew Mao", "link": "https://stackoverflow.com/users/586086/andrew-mao"}, "reply_to_user": {"reputation": 3420, "user_id": 1530134, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/d6b1b610a6302fd94ff9f8971a4f1899?s=128&d=identicon&r=PG", "display_name": "Alyssa Haroldsen", "link": "https://stackoverflow.com/users/1530134/alyssa-haroldsen"}, "edited": false, "score": 0, "creation_date": 1465416278, "post_id": 37711817, "comment_id": 62897548, "body": "@Kupiakos nope. And I didn&#39;t realize, the person that posted that first question made the same list."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2379410"}, "edited": false, "score": 1, "creation_date": 1465461378, "post_id": 37711817, "comment_id": 62913837, "body": "Thinking in terms of <a href=\"https://en.wikipedia.org/wiki/Stars_and_bars_(combinatorics)\" rel=\"nofollow noreferrer\">stars and bars</a>, use an algorithm for &quot;unranking combinations&quot; to find the locations of the bars (or stars). One such algorithm is outlined here: <a href=\"https://en.wikipedia.org/wiki/Combinatorial_number_system#Finding_the_k-combination_for_a_given_number\" rel=\"nofollow noreferrer\">Finding the k-combination for a given number</a>."}, {"owner": {"reputation": 31574, "user_id": 586086, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/7cffe3cc36f65529fa2cc6841f532ac5?s=128&d=identicon&r=PG", "display_name": "Andrew Mao", "link": "https://stackoverflow.com/users/586086/andrew-mao"}, "edited": false, "score": 0, "creation_date": 1465487906, "post_id": 37711817, "comment_id": 62933003, "body": "Thanks @morningsun. I&#39;d implement it myself, but it would be good to first know if something similar already exists in the Python world."}], "answers": [{"comments": [{"owner": {"reputation": 2467, "user_id": 1082565, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/0c918ea36838138eb596d1d6edddc4d5?s=128&d=identicon&r=PG", "display_name": "Ian Hincks", "link": "https://stackoverflow.com/users/1082565/ian-hincks"}, "edited": false, "score": 0, "creation_date": 1467994443, "post_id": 37712597, "comment_id": 63961739, "body": "Nice answer, +1. I believe the initialization size of the <code>partition_array</code> in the second snippet is wrong, should be n+b-1 choose b-1, no? See <a href=\"https://en.wikipedia.org/wiki/Multinomial_distribution#Properties\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Multinomial_distribution#Properties</a>."}, {"owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "reply_to_user": {"reputation": 2467, "user_id": 1082565, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/0c918ea36838138eb596d1d6edddc4d5?s=128&d=identicon&r=PG", "display_name": "Ian Hincks", "link": "https://stackoverflow.com/users/1082565/ian-hincks"}, "edited": false, "score": 0, "creation_date": 1468000743, "post_id": 37712597, "comment_id": 63964831, "body": "@IanHincks That would make sense... I hope... updated accordingly."}], "tags": [], "owner": {"reputation": 8233, "user_id": 2247550, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/zrSSY.jpg?s=128&g=1", "display_name": "Jared Goguen", "link": "https://stackoverflow.com/users/2247550/jared-goguen"}, "is_accepted": false, "score": 2, "last_activity_date": 1468000680, "last_edit_date": 1468000680, "creation_date": 1465418758, "answer_id": 37712597, "question_id": 37711817, "link": "https://stackoverflow.com/questions/37711817/generate-all-possible-outcomes-of-k-balls-in-n-bins-sum-of-multinomial-catego/37712597#37712597", "title": "Generate all possible outcomes of k balls in n bins (sum of multinomial / categorical outcomes)", "body": "<p>Here's a generator solution using <code>itertools.combinations_with_replacement</code>, don't know if it will be suitable for your needs.</p>\n\n<pre><code>def partitions(n, b):\n    masks = numpy.identity(b, dtype=int)\n    for c in itertools.combinations_with_replacement(masks, n): \n        yield sum(c)\n\noutput = numpy.array(list(partitions(3, 4)))\n# [[3 0 0 0]\n#  [2 1 0 0]\n#  ...\n#  [0 0 1 2]\n#  [0 0 0 3]]\n</code></pre>\n\n<p>The complexity of this function grows exponentially, so there is a discrete boundary between what is feasible and what is not. </p>\n\n<p>Note that while numpy arrays need to know their size at construction, this is easily possible since the multiset number is easily found. Below <em>might</em> be a better method, I have done no timings.</p>\n\n<pre><code>from math import factorial as fact\nfrom itertools import combinations_with_replacement as cwr\n\nnCr = lambda n, r: fact(n) / fact(n-r) / fact(r)\n\ndef partitions(n, b):\n    partition_array = numpy.empty((nCr(n+b-1, b-1), b), dtype=int)\n    masks = numpy.identity(b, dtype=int)\n    for i, c in enumerate(cwr(masks, n)): \n        partition_array[i,:] = sum(c)\n    return partition_array\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 62252, "user_id": 1435869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TrEd9.jpg?s=128&g=1", "display_name": "karakfa", "link": "https://stackoverflow.com/users/1435869/karakfa"}, "is_accepted": false, "score": 0, "last_activity_date": 1465420553, "creation_date": 1465420553, "answer_id": 37713063, "question_id": 37711817, "link": "https://stackoverflow.com/questions/37711817/generate-all-possible-outcomes-of-k-balls-in-n-bins-sum-of-multinomial-catego/37713063#37713063", "title": "Generate all possible outcomes of k balls in n bins (sum of multinomial / categorical outcomes)", "body": "<p>here is a naive implementation with list comprehensions, not sure about performance compared to numpy</p>\n\n<pre><code>def gen(n,k):\n    if(k==1):\n        return [[n]]\n    if(n==0):\n        return [[0]*k]\n    return [ g2 for x in range(n+1) for g2 in [ u+[n-x] for u in gen(x,k-1) ] ]\n\n&gt; gen(3,4)\n[[0, 0, 0, 3],\n [0, 0, 1, 2],\n [0, 1, 0, 2],\n [1, 0, 0, 2],\n [0, 0, 2, 1],\n [0, 1, 1, 1],\n [1, 0, 1, 1],\n [0, 2, 0, 1],\n [1, 1, 0, 1],\n [2, 0, 0, 1],\n [0, 0, 3, 0],\n [0, 1, 2, 0],\n [1, 0, 2, 0],\n [0, 2, 1, 0],\n [1, 1, 1, 0],\n [2, 0, 1, 0],\n [0, 3, 0, 0],\n [1, 2, 0, 0],\n [2, 1, 0, 0],\n [3, 0, 0, 0]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31574, "user_id": 586086, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/7cffe3cc36f65529fa2cc6841f532ac5?s=128&d=identicon&r=PG", "display_name": "Andrew Mao", "link": "https://stackoverflow.com/users/586086/andrew-mao"}, "is_accepted": false, "score": 2, "last_activity_date": 1465944557, "last_edit_date": 1465944557, "creation_date": 1465935680, "answer_id": 37821406, "question_id": 37711817, "link": "https://stackoverflow.com/questions/37711817/generate-all-possible-outcomes-of-k-balls-in-n-bins-sum-of-multinomial-catego/37821406#37821406", "title": "Generate all possible outcomes of k balls in n bins (sum of multinomial / categorical outcomes)", "body": "<p>For reference purposes, the following code uses <a href=\"https://en.wikipedia.org/wiki/Loopless_algorithm\" rel=\"nofollow\">Ehrlich's algorithm</a> to iterate through all possible combinations of a multiset in C++, Javascript, and Python:</p>\n\n<blockquote>\n  <p><a href=\"https://github.com/ekg/multichoose\" rel=\"nofollow\">https://github.com/ekg/multichoose</a></p>\n</blockquote>\n\n<p>This can be converted to the above format using <a href=\"https://en.wikipedia.org/wiki/Multiset#/media/File:Combinations_with_repetition;_5_multichoose_3.svg\" rel=\"nofollow\">this method</a>. Specifically,</p>\n\n<pre><code>for s in multichoose(k, set):\n    row = np.bincount(s, minlength=len(set) + 1)\n</code></pre>\n\n<p>This still isn't pure numpy, but can be used to fill a preallocated <code>numpy.array</code> pretty quickly.</p>\n"}, {"tags": [], "owner": {"reputation": 1032, "user_id": 1918127, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/P0mp4.jpg?s=128&g=1", "display_name": "AndyP", "link": "https://stackoverflow.com/users/1918127/andyp"}, "is_accepted": false, "score": 0, "last_activity_date": 1470030396, "last_edit_date": 1470030396, "creation_date": 1470026202, "answer_id": 38691110, "question_id": 37711817, "link": "https://stackoverflow.com/questions/37711817/generate-all-possible-outcomes-of-k-balls-in-n-bins-sum-of-multinomial-catego/38691110#38691110", "title": "Generate all possible outcomes of k balls in n bins (sum of multinomial / categorical outcomes)", "body": "<p>Here's the solution I came up with for this.</p>\n\n<pre><code>import numpy, itertools\ndef multinomial_combinations(n, k, max_power=None):\n    \"\"\"returns a list (2d numpy array) of all length k sequences of \n    non-negative integers n1, ..., nk such that n1 + ... + nk = n.\"\"\"\n    bar_placements = itertools.combinations(range(1, n+k), k-1)\n    tmp = [(0,) + x + (n+k,) for x in bar_placements]\n    sequences =  numpy.diff(tmp) - 1\n    if max_power:\n        return sequences[numpy.where((sequences&lt;=max_power).all(axis=1))][::-1]\n    else:\n        return sequences[::-1]\n</code></pre>\n\n<p>Note 1: The [::-1] at the end just reverses the order to match your example output.</p>\n\n<p>Note 2: Finding these sequences is equivalent to finding all ways to arrange n stars and k-1 bars in (to fill n+k-1 spots) (see <a href=\"https://en.wikipedia.org/wiki/Stars_and_bars_(combinatorics)#Theorem_two_2\" rel=\"nofollow\">stars and bars thm 2</a>).</p>\n\n<p>Note 3: The max_power argument is to give you the option to return only sequences where all integers are below some max.</p>\n"}], "owner": {"reputation": 31574, "user_id": 586086, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/7cffe3cc36f65529fa2cc6841f532ac5?s=128&d=identicon&r=PG", "display_name": "Andrew Mao", "link": "https://stackoverflow.com/users/586086/andrew-mao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1762, "favorite_count": 2, "answer_count": 4, "score": 12, "last_activity_date": 1470030396, "creation_date": 1465415975, "last_edit_date": 1495535325, "question_id": 37711817, "link": "https://stackoverflow.com/questions/37711817/generate-all-possible-outcomes-of-k-balls-in-n-bins-sum-of-multinomial-catego", "title": "Generate all possible outcomes of k balls in n bins (sum of multinomial / categorical outcomes)", "body": "<p>Suppose we have <code>n</code> bins in which we are throwing <code>k</code> balls. What is a <strong>fast</strong> (i.e. using numpy/scipy instead of python code) way to generate all possible outcomes as a matrix?</p>\n\n<p>For example, if <code>n = 4</code> and <code>k = 3</code>, we'd want the following <code>numpy.array</code>:</p>\n\n<pre><code>3 0 0 0\n2 1 0 0\n2 0 1 0\n2 0 0 1\n1 2 0 0\n1 1 1 0\n1 1 0 1\n1 0 2 0\n1 0 1 1\n1 0 0 2\n0 3 0 0\n0 2 1 0\n0 2 0 1\n0 1 2 0\n0 1 1 1\n0 1 0 2\n0 0 3 0\n0 0 2 1\n0 0 1 2\n0 0 0 3\n</code></pre>\n\n<p>Apologies if any permutation was missed, but this is the general idea. The generated permutations don't have to be in any particular order, but the above list was convenient for categorically iterating through them mentally.</p>\n\n<p><strong>Better yet, is there a way to map every integer from 1 to the <a href=\"https://en.wikipedia.org/wiki/Stars_and_bars_(combinatorics)\" rel=\"nofollow noreferrer\">multiset number</a> (the cardinality of this list) directly to a given permutation?</strong></p>\n\n<p>This question is related to the following ones, which are implemented in R with very different facilities:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/q/27064675/586086\">Generating all permutations of N balls in M bins</a></li>\n<li><a href=\"https://stackoverflow.com/q/2893042/586086\">Generate a matrix of all possible outcomes for throwing n dice (ignoring order)</a></li>\n</ul>\n\n<p>Also related references:</p>\n\n<ul>\n<li><a href=\"https://en.wikipedia.org/wiki/Stars_and_bars_(combinatorics)\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Stars_and_bars_(combinatorics)</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Multiset#Counting_multisets\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Multiset#Counting_multisets</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Combinatorial_number_system\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Combinatorial_number_system</a></li>\n</ul>\n"}, {"tags": ["python", "c++", "dll"], "answers": [{"tags": [], "owner": {"reputation": 199, "user_id": 908456, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/d0840e1f0329ea6fdb2c50cb713eb1ba?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/908456/damian"}, "is_accepted": true, "score": 0, "last_activity_date": 1465502578, "creation_date": 1465502578, "answer_id": 37735177, "question_id": 37711813, "link": "https://stackoverflow.com/questions/37711813/running-python-demo-script-with-dll-pyd-dependencies/37735177#37735177", "title": "Running python demo script with dll/pyd dependencies", "body": "<p>In the end, I'm settling for adding the bin folder to the python path programmatically with </p>\n\n<pre><code>import os, sys\nmoduleDir = os.path.dirname(os.getcwd()) + os.sep + \"bin\"\nsys.path.insert(0, moduleDir)\n</code></pre>\n\n<p>It solves my issue in the short term although it doesn't look nice. </p>\n"}], "owner": {"reputation": 199, "user_id": 908456, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/d0840e1f0329ea6fdb2c50cb713eb1ba?s=128&d=identicon&r=PG", "display_name": "Damian", "link": "https://stackoverflow.com/users/908456/damian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 1, "accepted_answer_id": 37735177, "answer_count": 1, "score": 0, "last_activity_date": 1465502578, "creation_date": 1465415943, "question_id": 37711813, "link": "https://stackoverflow.com/questions/37711813/running-python-demo-script-with-dll-pyd-dependencies", "title": "Running python demo script with dll/pyd dependencies", "body": "<p>I'm writing some python code that depends on a c++ library (I'm using Boost.Python). I use cmake to build and put the library dll and pyd files into bin. My folder structure looks a bit like this:</p>\n\n<pre><code>Project\n|-- bin: folder where test executables, dll, and pyd files get put after build\n|-- cpp: all cpp/h files to build the dll\n|-- python: the cpp files with the boost.python interface as well as python code that depends on it (and the dlls)\n|-- test: cpp code with tests\n</code></pre>\n\n<p>To run my python files, I need the dll and pyd files in the same directory as the python script. Currently, I have cmake copy the .py files in python into bin for me to run and test. However, I really don't like this as it is ugly adn cumbersome. I read that I could add my bin folder to the PYTHONPATH and PATH variables to solve this, but this would make my python code a little ugly I think. </p>\n\n<p>I am a novice at Python; therefore, I was wondering if there are better ways to handle this issue. Ideally, I'd like to run my python scripts/module from the python folder so I can debug from an environment like PyCharm or Visual Studio.</p>\n"}, {"tags": ["python", "pip"], "comments": [{"owner": {"reputation": 1840, "user_id": 1046584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a12f24dc02bccd33ed96beeede302b38?s=128&d=identicon&r=PG&f=1", "display_name": "Lu&#237;s Bianchin", "link": "https://stackoverflow.com/users/1046584/lu%c3%ads-bianchin"}, "edited": false, "score": 0, "creation_date": 1488981378, "post_id": 37711730, "comment_id": 72471045, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/28365790/attributeerror-when-trying-to-install-using-pip\">AttributeError when trying to install using pip</a>"}, {"owner": {"reputation": 1840, "user_id": 1046584, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a12f24dc02bccd33ed96beeede302b38?s=128&d=identicon&r=PG&f=1", "display_name": "Lu&#237;s Bianchin", "link": "https://stackoverflow.com/users/1046584/lu%c3%ads-bianchin"}, "edited": false, "score": 0, "creation_date": 1488981405, "post_id": 37711730, "comment_id": 72471063, "body": "I seems this is the same issue as <a href=\"https://stackoverflow.com/questions/28365790/attributeerror-when-trying-to-install-using-pip\" title=\"attributeerror when trying to install using pip\">stackoverflow.com/questions/28365790/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3535, "user_id": 3753656, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/116f069a5946e427bf02eb20202abb83?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Deo", "link": "https://stackoverflow.com/users/3753656/brandon-deo"}, "edited": false, "score": 0, "creation_date": 1465418789, "post_id": 37712320, "comment_id": 62898892, "body": "Easy install worked. Python was still causing error. Thanks"}], "tags": [], "owner": {"reputation": 2888, "user_id": 295246, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9cd2f57961c042dbc58c575ee6c22510?s=128&d=identicon&r=PG", "display_name": "HEADLESS_0NE", "link": "https://stackoverflow.com/users/295246/headless-0ne"}, "is_accepted": true, "score": 2, "last_activity_date": 1465417786, "creation_date": 1465417786, "answer_id": 37712320, "question_id": 37711730, "link": "https://stackoverflow.com/questions/37711730/pip-failing-with-attribute-error-no-attribute-handerlist/37712320#37712320", "title": "pip failing with attribute error: no attribute _handerList", "body": "<p>You could attempt to properly reinstall <code>pip</code> either via Python itself or using <code>easy_install</code> with upgrade enforced.</p>\n\n<p><strong>Python</strong></p>\n\n<p><code>python -m pip install --upgrade --force pip</code></p>\n\n<p><strong>easy_install</strong></p>\n\n<p><code>sudo easy_install --upgrade pip</code></p>\n"}], "owner": {"reputation": 3535, "user_id": 3753656, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/116f069a5946e427bf02eb20202abb83?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Deo", "link": "https://stackoverflow.com/users/3753656/brandon-deo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1827, "favorite_count": 0, "accepted_answer_id": 37712320, "answer_count": 1, "score": 0, "last_activity_date": 1465417786, "creation_date": 1465415642, "question_id": 37711730, "link": "https://stackoverflow.com/questions/37711730/pip-failing-with-attribute-error-no-attribute-handerlist", "title": "pip failing with attribute error: no attribute _handerList", "body": "<p>I just installed \"logging\" from pip and now pip is broken. I've tried <code>sudo rm /usr/local/bin/pip*; sudo easy_install pip</code> and it didn't resolve the issue. The full result from attempting to install a package: </p>\n\n<pre><code>    Traceback (most recent call last):\n  File \"/usr/local/bin/pip\", line 9, in &lt;module&gt;\n    load_entry_point('pip==8.1.1', 'console_scripts', 'pip')()\n  File \"/Library/Python/2.7/site-packages/pip/__init__.py\", line 217, in main\n    return command.main(cmd_args)\n  File \"/Library/Python/2.7/site-packages/pip/basecommand.py\", line 179, in main\n    for name in [\"pip._vendor\", \"distlib\", \"requests\", \"urllib3\"]\n  File \"/Library/Python/2.7/site-packages/pip/compat/dictconfig.py\", line 565, in dictConfig\n    dictConfigClass(config).configure()\n  File \"/Library/Python/2.7/site-packages/pip/compat/dictconfig.py\", line 332, in configure\n    del logging._handlerList[:]\nAttributeError: 'module' object has no attribute '_handlerList'\n</code></pre>\n\n<p>Any help here would be appreciated.</p>\n"}, {"tags": ["python", "tkinter"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6442173"}, "edited": false, "score": 0, "creation_date": 1465421135, "post_id": 37711697, "comment_id": 62899977, "body": "I tried your suggestion but it still doesn&#39;t refresh the window. Perhaps my ch() function doesn&#39;t really do anything?"}, {"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1465475691, "post_id": 37711697, "comment_id": 62923493, "body": "@Leopold2 Well, the window should refresh in the sense that new rows will appear below the already existing ones. If your window isn&#39;t tall enough, you might not notice the new rows. Or did you want the new rows to replace the old ones? I&#39;ve revised my answer to suggest how you might do that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6442173"}, "edited": false, "score": 0, "creation_date": 1465492260, "post_id": 37711697, "comment_id": 62935620, "body": "Yeah, config did solve my problem. Now the labels change properly and the old ones disappear. Thanks a lot."}], "tags": [], "owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "is_accepted": true, "score": 2, "last_activity_date": 1465475596, "last_edit_date": 1465475596, "creation_date": 1465415542, "answer_id": 37711697, "question_id": 37711674, "link": "https://stackoverflow.com/questions/37711674/how-to-refresh-the-window-with-tkinter/37711697#37711697", "title": "How to refresh the window with Tkinter", "body": "<pre><code>root.after(5000,ch())\n</code></pre>\n\n<p>This calls <code>ch</code> immediately and registers whatever the return value is to execute five seconds later. Instead, try:</p>\n\n<pre><code>root.after(5000,ch)\n</code></pre>\n\n<hr>\n\n<p>Edit: another problem you have is that <code>ch</code> adds new labels to the window, but the old ones still remain. Since you have 45 rows to start with, the new ones appear below that and will probably be off-screen, so you don't notice that they've appeared.</p>\n\n<p>If you want the new numbers to replace the old, don't create a new label - just reconfigure the existing ones to have new text.</p>\n\n<pre><code>from tkinter import *\nfrom random import *\n\nroot= Tk()\ncol=10\nrow=10\nnum=[[randint(0,9) for i in range(col)] for j in range(row)] \n\nlabels = []\nfor k in range(row):\n    theLabel= Label(root,text=' '.join(str(e) for e in num[k])) \n    theLabel.pack()\n    labels.append(theLabel)\n\ndef ch():\n    for label in labels:\n        row = [randint(0,9) for i in range(col)]\n        label.config(text = ' '.join(str(e) for e in row))\n\nroot.after(5000,ch)\nroot.mainloop()\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6442173"}, "is_accepted": false, "score": 0, "last_activity_date": 1465493119, "last_edit_date": 1465493119, "creation_date": 1465492420, "answer_id": 37732334, "question_id": 37711674, "link": "https://stackoverflow.com/questions/37711674/how-to-refresh-the-window-with-tkinter/37732334#37732334", "title": "How to refresh the window with Tkinter", "body": "<p>Btw, this is the final working form: </p>\n\n<pre><code>from tkinter import *\nfrom random import *\n\nroot=Tk()\ncol=200\nrow=57\nnum=[randint(0,9) for i in range(col*row)]\nst=\"\"\n\nfor k in range(0,col*row,col):\n    st=st + ('  '.join(str(e) for e in num[k:k+col])) + '\\n'\n\ntheLabel= Label(root,text=st)\ntheLabel.pack()\n\ndef ch():\n    st1=\"\"\n    num1=[randint(0,9) for i in range(col*row)]\n    for k in range(0,col*row,col):\n        st1=st1 + ('  '.join(str(e) for e in num1[k:k+col])) + '\\n'\n    theLabel.config(text=st1)\n    theLabel.pack()\n    root.after(1000,ch)\n\nroot.after(1000,ch)\nroot.mainloop()\n</code></pre>\n\n<p>I also added a recursion so that it goes on non-stop. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6442173"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8688, "favorite_count": 0, "accepted_answer_id": 37711697, "answer_count": 2, "score": 0, "last_activity_date": 1465493119, "creation_date": 1465415458, "question_id": 37711674, "link": "https://stackoverflow.com/questions/37711674/how-to-refresh-the-window-with-tkinter", "title": "How to refresh the window with Tkinter", "body": "<p>I am trying to create a window filled with random integers between 0 and 9. After a certain amount of time, the window should refresh and display new randomly selected integers. My code does the first step just fine but fails at the second part. I have looked up functions like after() but it still doesn't work. The code looks like this:</p>\n\n<pre><code>from tkinter import *\nfrom random import *\n\nroot= Tk()\ncol=170\nrow=45\nnum=[[randint(0,9) for i in range(col)] for j in range(row)] \n\nfor k in range(row):\n        theLabel= Label(root,text=' '.join(str(e) for e in num[k])) \n        theLabel.pack()\n\ndef ch():\n    num1=[[randint(0,9) for i in range(col)] for j in range(row)]\n    for k in range(row):\n        theLabel= Label(root,text=' '.join(str(e) for e in num1[k])) \n        theLabel.pack()\n\nroot.after(5000,ch())\nroot.mainloop()\n</code></pre>\n\n<p>What should I do? I would appreciate any kind of help.</p>\n"}, {"tags": ["python", "module", "pip"], "comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 1, "creation_date": 1465415665, "post_id": 37711671, "comment_id": 62897181, "body": "Are you sure that pyOpt <i>isn&#39;t</i> pyopt?"}, {"owner": {"reputation": 4484, "user_id": 2952453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ce6904d840f47967e884cde22b9bd16?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas", "link": "https://stackoverflow.com/users/2952453/thomas"}, "edited": false, "score": 0, "creation_date": 1465417133, "post_id": 37711671, "comment_id": 62898041, "body": "Which IDE are you using."}, {"owner": {"reputation": 21, "user_id": 6442217, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153696602823946/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6442217/alex"}, "edited": false, "score": 0, "creation_date": 1466130012, "post_id": 37711671, "comment_id": 63200664, "body": "Yeah, unfortunately. pyopt doesn&#39;t have the same methods as pyOpt is supposed to. and I&#39;ve looked at the folders in the pyOpt zip on my desktop and they don&#39;t match the files for pyopt."}, {"owner": {"reputation": 21, "user_id": 6442217, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153696602823946/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6442217/alex"}, "edited": false, "score": 0, "creation_date": 1466130646, "post_id": 37711671, "comment_id": 63200821, "body": "I&#39;m using Canopy as my IDE"}], "answers": [{"tags": [], "owner": {"reputation": 438, "user_id": 974478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/672a8cde0706bf67e1eb741c5e92d553?s=128&d=identicon&r=PG", "display_name": "kjyv", "link": "https://stackoverflow.com/users/974478/kjyv"}, "is_accepted": false, "score": 2, "last_activity_date": 1471859045, "creation_date": 1471859045, "answer_id": 39076209, "question_id": 37711671, "link": "https://stackoverflow.com/questions/37711671/i-want-to-install-pyopt-for-python-but-pyopt-is-already-installed-and-pip-is-ca/39076209#39076209", "title": "I want to install pyOpt for python, but pyopt is already installed and pip is case insensitive", "body": "<p><a href=\"https://pypi.python.org/pypi/pyopt/0.84\" rel=\"nofollow\">pyopt</a> is not <a href=\"http://www.pyopt.org/\" rel=\"nofollow\">pyOpt</a>. In fact, pyOpt is not on pypi, so you have to download it separately and install e.g. with setup.py. Depending on your system it might be available through the package management system.</p>\n"}], "owner": {"reputation": 21, "user_id": 6442217, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153696602823946/picture?type=large", "display_name": "Alex", "link": "https://stackoverflow.com/users/6442217/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 987, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1471859045, "creation_date": 1465415448, "question_id": 37711671, "link": "https://stackoverflow.com/questions/37711671/i-want-to-install-pyopt-for-python-but-pyopt-is-already-installed-and-pip-is-ca", "title": "I want to install pyOpt for python, but pyopt is already installed and pip is case insensitive", "body": "<p>I'm new to this forum and relatively new to python. The problem I'm having is a follows: I'm trying to install the module pyOpt(the optimization package) but when I use my ide's command line and pip install it says that the package is already installed. However, the package that is currently installed is pyopt. I've only ever used pip install and from what I've been able to gather it is case insensitive and thinks that pyOpt is pyopt. I don't really know where to go from here, and thought you guys might have some suggestions.</p>\n\n<p>PS. my ide is enthought canopy  </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 1, "creation_date": 1465415575, "post_id": 37711669, "comment_id": 62897128, "body": "You are overthinking this, The best way is to <code>print(&quot;Score {:.3f}%&quot;.format(score))</code>"}, {"owner": {"reputation": 41280, "user_id": 344286, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3827b2facd01ed6a64a96df00d4b877a?s=128&d=identicon&r=PG", "display_name": "Wayne Werner", "link": "https://stackoverflow.com/users/344286/wayne-werner"}, "edited": false, "score": 0, "creation_date": 1465415608, "post_id": 37711669, "comment_id": 62897147, "body": "See <a href=\"https://pyformat.info/\" rel=\"nofollow noreferrer\">pyformat.info</a> for more about string formatting"}, {"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1465415834, "post_id": 37711669, "comment_id": 62897277, "body": "<i>&quot;I am not quite sure where to add the &quot;%&quot; sign in the print statement.&quot;</i> I have a suggestion. When you&#39;re not quite sure about something, take a guess and see if it works. One of the great things about programming is that it&#39;s quite difficult to permanently damage anything just by playing around."}], "answers": [{"tags": [], "owner": {"reputation": 1296, "user_id": 2081387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9492856d9ec97b0caaaa6bb38665f12c?s=128&d=identicon&r=PG", "display_name": "d1ll1nger", "link": "https://stackoverflow.com/users/2081387/d1ll1nger"}, "is_accepted": false, "score": 0, "last_activity_date": 1465415818, "creation_date": 1465415818, "answer_id": 37711777, "question_id": 37711669, "link": "https://stackoverflow.com/questions/37711669/adding-a-at-the-end-of-a-print-statement/37711777#37711777", "title": "Adding a &quot;%&quot; at the end of a print statement", "body": "<p>This works for me:</p>\n\n<pre><code>print(\" Score \", format(score, \".3f\",) + \"%\")\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6422004, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/afe707af7ba708e3c93cef851656a667?s=128&d=identicon&r=PG&f=1", "display_name": "G. Yedkois", "link": "https://stackoverflow.com/users/6422004/g-yedkois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "closed_date": 1465415660, "answer_count": 1, "score": 0, "last_activity_date": 1465415818, "creation_date": 1465415438, "last_edit_date": 1465415462, "question_id": 37711669, "link": "https://stackoverflow.com/questions/37711669/adding-a-at-the-end-of-a-print-statement", "closed_reason": "Duplicate", "title": "Adding a &quot;%&quot; at the end of a print statement", "body": "<p>I am having an an issue. One of my assignments is to make a program that inputs 3 test scores and get the average, and the average should follow a \"%\" sign immediately after. I am not quite sure where to add the \"%\" sign in the print statement. I have combed through my book and cannot find anything.</p>\n\n<pre><code>keep_going = \"y\"\n\nwhile keep_going == \"y\":\n\n    test_1 = int(input(\" Enter a test score: \"))\n    test_2 = int(input(\" Enter a test score: \"))\n    test_3 = int(input(\" Enter a test score: \"))\n\n    score = (test_1 + test_2 + test_3) / 3.0\n\n    print(\" Score \", format(score, \".3f\",), sep=\"\")\n\n    keep_going = input(\" Would you like to continue? (Enter y for yes)\")\n</code></pre>\n"}, {"tags": ["python", "pandas", "matplotlib"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1465416044, "post_id": 37711642, "comment_id": 62897402, "body": "please provide the <code>data</code>"}, {"owner": {"reputation": 13049, "user_id": 4413446, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Z2gMy.png?s=128&g=1", "display_name": "Romain", "link": "https://stackoverflow.com/users/4413446/romain"}, "edited": false, "score": 0, "creation_date": 1465417258, "post_id": 37711642, "comment_id": 62898107, "body": "Sorry but if you want help, you have to rephrase your question and provide an example with some row of data. The example provided is not clear since you talk about period index conversion and the code does not show this conversion for e.g. <code>df[&#39;date&#39;].dt.to_period(&#39;H&#39;)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 1, "last_activity_date": 1465417381, "creation_date": 1465417381, "answer_id": 37712201, "question_id": 37711642, "link": "https://stackoverflow.com/questions/37711642/plot-pandas-period-range-with-matplotlib-set-freq-of-axis/37712201#37712201", "title": "plot pandas period_range with matplotlib - set freq of axis", "body": "<p>I constructed data to demonstrate what I believe was your question.</p>\n\n<p>If you fill in a dataframe with data for only a specific range of the index and then plot it, it will only generate a line for when that data was not null.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\nts = pd.date_range(end='2016-03-31', periods=250, freq='D')\n\nnp.random.seed([3,1415])\nranges = pd.DataFrame((np.random.choice(xrange(100), (2, 10)) +\n                       np.array([[0], [150]])),\n                      columns=list('ABCDEFGHIJ'))\n\ndf = pd.DataFrame(index=ts)\ncount = 1\nfor i, c in ranges.iteritems():\n    s, e = c\n    df.loc[ts[s]:ts[e], i] = count\n    count += 1\n\ndf.plot()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/65W76.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/65W76.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 89, "user_id": 5321866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/239f8c026c09043eb91993b070d6a19a?s=128&d=identicon&r=PG&f=1", "display_name": "Axel", "link": "https://stackoverflow.com/users/5321866/axel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3213, "favorite_count": 2, "accepted_answer_id": 37712201, "answer_count": 1, "score": 4, "last_activity_date": 1465909411, "creation_date": 1465415356, "last_edit_date": 1465909411, "question_id": 37711642, "link": "https://stackoverflow.com/questions/37711642/plot-pandas-period-range-with-matplotlib-set-freq-of-axis", "title": "plot pandas period_range with matplotlib - set freq of axis", "body": "<p>I got a pandas DataFrame with values for time spans with variable lenths. I want to plot a horizontal line for the value of each timespan with the length of the timespan. Therfore, I converted the timespan to an PeriodIndex by</p>\n\n<pre><code>ax0=fig.add_axes([.16,.2,0.8,.7])\nax0.plot_date(data['periodIndex'], data['value'])\n</code></pre>\n\n<p>which produces:</p>\n\n<pre><code>TypeError: Axis must have `freq` set to convert to Periods\n</code></pre>\n\n<p>so my Question is how to set the frequency of my xaxis</p>\n\n<p>Thanks a lot for your help</p>\n\n<p>Axel</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>this is part of the pandas dataFrame I want to plot</p>\n\n<pre><code>     start        stop          A           B          C\nID                                                                    \n1    2015-08-17   2015-08-25    -5.684246  -34.759047  10.714920   \n2    2015-08-25   2015-09-02   -10.850721  -78.443556   8.362215   \n3    2015-09-02   2015-09-15    -7.139351  -47.814199   9.300612   \n4    2015-09-15   2015-09-21    -7.822367  -56.895241   5.683696   \n5    2015-09-21   2015-09-29    -6.491543  -42.947744   8.984596   \n6    2015-09-29   2015-10-05    -9.897980  -67.985256  11.198583  \n</code></pre>\n\n<p>I solved the problem and now it looks like\n<a href=\"http://i.stack.imgur.com/wB1mI.png\" rel=\"nofollow\">this</a>\nby the following code</p>\n\n<pre><code>firstDate=df.ix[df.index[0]]['start']\n\nfig=plt.figure(figsize=(9*1.5,6*1.5))\nax0=fig.add_axes([.15,.2,0.75,.7])\n\nax0.set_xticks(df['start_abs'])\nax0.set_xticklabels([i.date() for i in df['start']], rotation='vertical')\n\nB=ax0.twinx()\nB.set_ylim(-200,0)\n\nfor _index, _series in df.iterrows():\n    start=_series['start']\n    stop=_series['stop']   \n    df.ix[_index, 'start_abs']=(start-firstDate).days\n    df.ix[_index, 'width_abs']=(stop-start).days\n    df.ix[_index, 'stop_abs']=(stop-firstDate).days\n\n    line_A=ax0.hlines(y=df.ix[_index,'A'], xmin=df.ix[_index, 'start_abs'], xmax=df.ix[_index, 'stop_abs'], colors='r')\n    line_A.set_linewidths(3)\n    text_A=ax0.text(df.ix[_index, 'start_abs'], df.ix[_index,'A'], '{a:4.2f}'.format(a=df.ix[_index,'A']), fontsize=8, color='r')\n\n    line_B=B.hlines(y=df.ix[_index,'B'], xmin=df.ix[_index,'start_abs'], xmax=df.ix[_index,'stop_abs'], colors='k')\n    line_B.set_linewidths(3)\n    text_B=B.text(df.ix[_index,'start_abs'], df.ix[_index,'B'], '{a:4.2f}'.format(a=df.ix[_index,'B']), fontsize=8, color='k')\n\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "edited": false, "score": 0, "creation_date": 1465415534, "post_id": 37711627, "comment_id": 62897102, "body": "You have a typo in there. You use <code>products</code> in your view but <code>product</code> in the template"}, {"owner": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "reply_to_user": {"reputation": 49301, "user_id": 3100115, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/46d2b7e69a0a4a82fefdd01a8cf476bd?s=128&d=identicon&r=PG&f=1", "display_name": "styvane", "link": "https://stackoverflow.com/users/3100115/styvane"}, "edited": false, "score": 0, "creation_date": 1465415706, "post_id": 37711627, "comment_id": 62897207, "body": "@user3100115 yeah, I change the typo, it still not working"}, {"owner": {"reputation": 1009, "user_id": 2798465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34cba3448d0c726af4f55249d923c1c?s=128&d=identicon&r=PG", "display_name": "trantu", "link": "https://stackoverflow.com/users/2798465/trantu"}, "edited": false, "score": 0, "creation_date": 1465416706, "post_id": 37711627, "comment_id": 62897802, "body": "Do you get some errors?"}, {"owner": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "reply_to_user": {"reputation": 1009, "user_id": 2798465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34cba3448d0c726af4f55249d923c1c?s=128&d=identicon&r=PG", "display_name": "trantu", "link": "https://stackoverflow.com/users/2798465/trantu"}, "edited": false, "score": 0, "creation_date": 1465417363, "post_id": 37711627, "comment_id": 62898161, "body": "@trantu that is the problem, I didn&#39;t get any errors, just didn&#39;t show the context i want to pass to the template"}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1465418828, "post_id": 37711627, "comment_id": 62898907, "body": "What is the rendered html? What is the output if you run <code>print(context)</code> in your view?"}, {"owner": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "reply_to_user": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 1, "creation_date": 1465419785, "post_id": 37711627, "comment_id": 62899369, "body": "@H&#229;ken Lid 2 . after I print(context):print(context) {&#39;products&#39;: [&lt;Product: fly V&gt;, &lt;Product: Mega&gt;]}"}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1465420747, "post_id": 37711627, "comment_id": 62899795, "body": "And what is the rendered html?"}, {"owner": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "reply_to_user": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1465421161, "post_id": 37711627, "comment_id": 62899992, "body": "@H&#229;ken Lid it is just a empty page with nav-bar and footer."}, {"owner": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "reply_to_user": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1465421202, "post_id": 37711627, "comment_id": 62900014, "body": "@H&#229;ken Lid nothing show on the html page"}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1465421407, "post_id": 37711627, "comment_id": 62900102, "body": "What is the rendered html? Is there a <code>&lt;div class=&quot;storefront_product_display&quot; &gt;</code> there or not? Does it have any child elements? I&#39;m not asking how it looks in the browser. What is the output of the template <code>render()</code>?"}, {"owner": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "reply_to_user": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "edited": false, "score": 0, "creation_date": 1465421915, "post_id": 37711627, "comment_id": 62900349, "body": "@H&#229;ken Lid after render(), it only have <code>&lt;div class=&quot;storefront_product_display&gt;</code>.after that, it even not go through the for loop in the template."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "edited": false, "score": 0, "creation_date": 1465417726, "post_id": 37712036, "comment_id": 62898346, "body": "<code>TEMPLATES = [     {         &#39;BACKEND&#39;: &#39;django.template.backends.django.DjangoTemplates&#39;,         &#39;DIRS&#39;: [os.path.join(BASE_DIR,&#39;templates&#39;)],         &#39;APP_DIRS&#39;: True,         &#39;OPTIONS&#39;: {             &#39;context_processors&#39;: [                 &#39;django.template.context_processors.debug&#39;,                 &#39;django.template.context_processors.request&#39;,                 &#39;django.contrib.auth.context_processors.auth&#39;,                 &#39;django.contrib.messages.context_processors.messages&#39;,             ],         },     }, ]</code>"}, {"owner": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "edited": false, "score": 0, "creation_date": 1465417749, "post_id": 37712036, "comment_id": 62898356, "body": "this is my settting.py:"}, {"owner": {"reputation": 86, "user_id": 2397903, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ajCFv.jpg?s=128&g=1", "display_name": "Oztro", "link": "https://stackoverflow.com/users/2397903/oztro"}, "reply_to_user": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "edited": false, "score": 0, "creation_date": 1465417996, "post_id": 37712036, "comment_id": 62898489, "body": "add this line: template = &quot;template/sell.html&quot;     render_to_response(template,context,context_instance=Request&zwnj;&#8203;Context(request))"}, {"owner": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "edited": false, "score": 0, "creation_date": 1465418347, "post_id": 37712036, "comment_id": 62898650, "body": "I follow your idea, I changed but still not working .<code>from django.shortcuts import render,render_to_response import datetime from .models import Product from django.contrib import messages from django.template import RequestContext  # Create your views here. def sellmainpage(request):     template=&quot;template&#47;sell.html&quot;     product=Product.objects.all()     context=RequestContext(request,{     &#39;example&#39;:product     })     return render_to_response(template,context,context_instance=Request&zwnj;&#8203;Context(request)) </code>"}, {"owner": {"reputation": 86, "user_id": 2397903, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ajCFv.jpg?s=128&g=1", "display_name": "Oztro", "link": "https://stackoverflow.com/users/2397903/oztro"}, "reply_to_user": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "edited": false, "score": 0, "creation_date": 1465418717, "post_id": 37712036, "comment_id": 62898856, "body": "replace context=RequestContext(request,{ &#39;example&#39;:product })  with context={ &#39;example&#39;:product }"}, {"owner": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "edited": false, "score": 0, "creation_date": 1465418825, "post_id": 37712036, "comment_id": 62898906, "body": "yes, I changed it. I post my new view.py, but I still cannot make it work."}, {"owner": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "edited": false, "score": 0, "creation_date": 1465422189, "post_id": 37712036, "comment_id": 62900468, "body": "I inspect my template code, I found my template cannot even go though my for loop."}, {"owner": {"reputation": 86, "user_id": 2397903, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ajCFv.jpg?s=128&g=1", "display_name": "Oztro", "link": "https://stackoverflow.com/users/2397903/oztro"}, "reply_to_user": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "edited": false, "score": 0, "creation_date": 1465423830, "post_id": 37712036, "comment_id": 62901177, "body": "If you delete the for, can you see the template?"}, {"owner": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "edited": false, "score": 0, "creation_date": 1465424072, "post_id": 37712036, "comment_id": 62901268, "body": "I try to delete the for, still cannot see any thing, but I try to create a file is context_processor.py, and add the file to setting.py, It work, but I don&#39;t know why I cannot use the simple way."}, {"owner": {"reputation": 86, "user_id": 2397903, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ajCFv.jpg?s=128&g=1", "display_name": "Oztro", "link": "https://stackoverflow.com/users/2397903/oztro"}, "reply_to_user": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "edited": false, "score": 0, "creation_date": 1465427397, "post_id": 37712036, "comment_id": 62902325, "body": "try to change the template."}], "tags": [], "owner": {"reputation": 86, "user_id": 2397903, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/ajCFv.jpg?s=128&g=1", "display_name": "Oztro", "link": "https://stackoverflow.com/users/2397903/oztro"}, "is_accepted": false, "score": 1, "last_activity_date": 1465427297, "last_edit_date": 1465427297, "creation_date": 1465416701, "answer_id": 37712036, "question_id": 37711627, "link": "https://stackoverflow.com/questions/37711627/django-1-9-render-cannot-pass-context-to-my-template/37712036#37712036", "title": "Django 1.9: render cannot pass context to my template", "body": "<p>Show us your setting, you should have a folder \"template\", and inside the html</p>\n\n<p>Example settings.py</p>\n\n<pre><code>BASE_DIR = os.path.dirname(os.path.realpath(__file__))\nTEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [os.path.join(BASE_DIR,'template'),],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'trabajo.context_processors.globales',\n                'trabajo.context_processors.menu',\n                'trabajo.context_processors.globales',\n                'django.template.context_processors.debug',\n                'django.template.context_processors.request',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n                'django.core.context_processors.static',\n            ],\n        },\n    },\n]\n</code></pre>\n\n<p>you view.py:</p>\n\n<pre><code>def sellmainpage(request):\n    products=Product.objects.all()\n    context = {\n        \"products\": products,\n    }\n    template = \"template/sell.html\"\n    render_to_response(template,context,context_instance=RequestContext(request))\n</code></pre>\n\n<p>sell.html</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;Page Title&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;h1&gt;My First Heading&lt;/h1&gt;\n&lt;p&gt;My first paragraph.&lt;/p&gt;\n\n&lt;/body&gt;\n&lt;/html&gt; \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 260, "user_id": 6709315, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fc2785b43c47004ca989633c432d2973?s=128&d=identicon&r=PG&f=1", "display_name": "Chaitanya Patel", "link": "https://stackoverflow.com/users/6709315/chaitanya-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1475171255, "creation_date": 1475171255, "answer_id": 39776855, "question_id": 37711627, "link": "https://stackoverflow.com/questions/37711627/django-1-9-render-cannot-pass-context-to-my-template/39776855#39776855", "title": "Django 1.9: render cannot pass context to my template", "body": "<p>instead of </p>\n\n<pre><code>return render(request, \"sell.html\", context)\n</code></pre>\n\n<p>try</p>\n\n<pre><code>loader.get_template('sell.html')\nreturn HttpResponse(template.render(context,request))\n</code></pre>\n\n<p>don't forget to import needed things.</p>\n\n<pre><code>from django.template import loader\nfrom django.http import HttpResponse\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 5458254, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/513218238829211/picture?type=large", "display_name": "Bo Cao", "link": "https://stackoverflow.com/users/5458254/bo-cao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4533, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475171255, "creation_date": 1465415292, "last_edit_date": 1465415416, "question_id": 37711627, "link": "https://stackoverflow.com/questions/37711627/django-1-9-render-cannot-pass-context-to-my-template", "title": "Django 1.9: render cannot pass context to my template", "body": "<p>I'm trying to use render(request,'sell.thml',context) in django 1.9, I use mysql to be my database. but nothing show up in my template. I don't know why I cannot use render to pass my context variable to template. Anyone can help me about it?</p>\n\n<p>In my view.py:</p>\n\n<pre><code>def sellmainpage(request):\n    products=Product.objects.all()\n    context = {\n        \"products\": products,\n    }\n    return render(request, \"sell.html\", context)\n</code></pre>\n\n\n\n<p>In my sell.html:</p>\n\n<pre><code>&lt;div class=\"col-md-8 col-md-offset-2 col-sm-12 maincontent\" style=\"padding-top:100px\"&gt;\n&lt;div class=\"storefront_product_display\" &gt;\n  {% for product in products %}\n  &lt;a href=\"{% url 'product_detail' %}\"&gt;\n  &lt;img src=\"{% static 'img/logo.png' %}\"&gt;\n  &lt;span class=\"storefront_product_name\"&gt;{{ product.product }}&lt;/span&gt;\n  &lt;span class=\"storefront_product_companyname\"&gt;{{ product.company }} &lt;/span&gt;\n  {% endfor %}\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>in my models.py:</p>\n\n<pre><code>class Product(models.Model):\n    product=models.CharField(max_length=200)\n    company=models.ForeignKey(Company)\n    description=models.TextField()\n    price=models.DecimalField(decimal_places=2,max_digits=10)\n    stock=models.IntegerField(default=0)\n\n    def __str__(self):\n        return self.product\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "3d", "latex", "mplot3d"], "answers": [{"tags": [], "owner": {"reputation": 28401, "user_id": 2666859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LtKyC.png?s=128&g=1", "display_name": "Serenity", "link": "https://stackoverflow.com/users/2666859/serenity"}, "is_accepted": true, "score": 34, "last_activity_date": 1465423748, "creation_date": 1465423748, "answer_id": 37713788, "question_id": 37711538, "link": "https://stackoverflow.com/questions/37711538/matplotlib-3d-axes-ticks-labels-and-latex/37713788#37713788", "title": "matplotlib 3d axes ticks, labels, and LaTeX", "body": "<blockquote>\n  <p>How do I adjust the axis ticks to that of my choosing? I.e., how would\n  I get the z-axis to only label 2, 0, and -2, and in the font size that\n  I want? I know how to do this in 2D but not 3D.</p>\n</blockquote>\n\n<p>You have to change properties of <code>zticks</code>.</p>\n\n<blockquote>\n  <p>Why is the x-axis label distorted, which I wanted to do with this\n  script, but not the z-axis label (gamma)? This does not make sense. I\n  need this axis labeled in the Greek letter. How do I fix this?</p>\n</blockquote>\n\n<p>You have to disable autorotation for z axis labels. Look at the code below:</p>\n\n<pre><code>import matplotlib as mpl\nfrom mpl_toolkits.mplot3d import Axes3D\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nmpl.rcParams['legend.fontsize'] = 10\n\nfig = plt.figure()\nax = fig.gca(projection='3d')\ntheta = np.linspace(-4 * np.pi, 4 * np.pi, 100)\nz = np.linspace(-2, 2, 100)\nr = z**2 + 1\nx = r * np.sin(theta)\ny = r * np.cos(theta)\nax.plot(x, y, z, label='parametric curve')\nax.legend()\n\nax.set_xlabel('$X$', fontsize=20)\nax.set_ylabel('$Y$')\nax.yaxis._axinfo['label']['space_factor'] = 3.0\n# set z ticks and labels\nax.set_zticks([-2, 0, 2])\n# change fontsize\nfor t in ax.zaxis.get_major_ticks(): t.label.set_fontsize(10)\n# disable auto rotation\nax.zaxis.set_rotate_label(False) \nax.set_zlabel('$\\gamma$', fontsize=30, rotation = 0)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/vCNO9.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/vCNO9.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 11641326, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Q5AbGbe0AJo/AAAAAAAAAAI/AAAAAAAAABw/3rR5tUGLB5A/photo.jpg?sz=128", "display_name": "Paul Snijder", "link": "https://stackoverflow.com/users/11641326/paul-snijder"}, "is_accepted": false, "score": 5, "last_activity_date": 1560415847, "creation_date": 1560415847, "answer_id": 56576803, "question_id": 37711538, "link": "https://stackoverflow.com/questions/37711538/matplotlib-3d-axes-ticks-labels-and-latex/56576803#56576803", "title": "matplotlib 3d axes ticks, labels, and LaTeX", "body": "<p>The for loop is not necessary, to change the size of your ticks you can use:</p>\n\n<pre><code>    ax.zaxis.set_tick_params(labelsize=10)\n</code></pre>\n"}], "owner": {"reputation": 1427, "user_id": 5162520, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/e1b32faa01a76ded6683fa2ec7215d53?s=128&d=identicon&r=PG&f=1", "display_name": "Forklift17", "link": "https://stackoverflow.com/users/5162520/forklift17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71399, "favorite_count": 8, "accepted_answer_id": 37713788, "answer_count": 2, "score": 38, "last_activity_date": 1560415847, "creation_date": 1465414997, "last_edit_date": 1543552108, "question_id": 37711538, "link": "https://stackoverflow.com/questions/37711538/matplotlib-3d-axes-ticks-labels-and-latex", "title": "matplotlib 3d axes ticks, labels, and LaTeX", "body": "<p>I am running <a href=\"http://matplotlib.org/examples/mplot3d/lines3d_demo.html\" rel=\"noreferrer\">this</a> sample script, with the following modifications:</p>\n\n<pre><code>import matplotlib as mpl\nfrom mpl_toolkits.mplot3d import Axes3D\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nmpl.rcParams['legend.fontsize'] = 10\n\nfig = plt.figure()\nax = fig.gca(projection='3d')\ntheta = np.linspace(-4 * np.pi, 4 * np.pi, 100)\nz = np.linspace(-2, 2, 100)\nr = z**2 + 1\nx = r * np.sin(theta)\ny = r * np.cos(theta)\nax.plot(x, y, z, label='parametric curve')\nax.legend()\n\nax.set_xlabel('$X$', fontsize=20, rotation=150)\nax.set_ylabel('$Y$')\nax.set_zlabel(r'$\\gamma$', fontsize=30, rotation=60)\nax.yaxis._axinfo['label']['space_factor'] = 3.0\n\nplt.show()\n</code></pre>\n\n<ol>\n<li><p>How do I adjust the axis ticks to that of my choosing? I.e., how would I get the z-axis to only label 2, 0, and -2, and in the font size that I want? I know how to do this in 2D but not 3D.</p></li>\n<li><p>The script above produces the following:</p></li>\n</ol>\n\n<p><a href=\"https://i.stack.imgur.com/DrtVI.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/DrtVI.png\" alt=\"enter image description here\"></a></p>\n\n<p>Why is the x-axis label distorted, which I wanted to do with this script, but not the z-axis label (gamma)? This does not make sense. I need this axis labeled in the Greek letter. How do I fix this?</p>\n"}, {"tags": ["python", "django", "database", "legacy-database"], "answers": [{"tags": [], "owner": {"reputation": 804, "user_id": 5297793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCd5k.jpg?s=128&g=1", "display_name": "Yonsy Solis", "link": "https://stackoverflow.com/users/5297793/yonsy-solis"}, "is_accepted": false, "score": 1, "last_activity_date": 1465416792, "creation_date": 1465416792, "answer_id": 37712056, "question_id": 37711512, "link": "https://stackoverflow.com/questions/37711512/how-to-implement-multivalued-attribute-in-django/37712056#37712056", "title": "How to implement multivalued attribute in Django?", "body": "<p>In Django, all the Models (written for you or generated with inspectdb) <a href=\"https://docs.djangoproject.com/en/1.9/topics/db/models/#automatic-primary-key-fields\" rel=\"nofollow\">must kave Primary Key</a>.</p>\n\n<p>If you like to use the table <strong>phonenumbers</strong> like a Model, you will need that this table have a primary key.</p>\n\n<p>In this scenario, my advice is that you modify your legacy table to add a new primary key manually and discard your composite primary key. Your legacy table have a composite primary key (<strong>phone_number</strong>+<strong>area_code</strong>) and this is not supported officially in Django.</p>\n"}, {"tags": [], "owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "is_accepted": true, "score": 0, "last_activity_date": 1465445083, "creation_date": 1465445083, "answer_id": 37716599, "question_id": 37711512, "link": "https://stackoverflow.com/questions/37711512/how-to-implement-multivalued-attribute-in-django/37716599#37716599", "title": "How to implement multivalued attribute in Django?", "body": "<p>Django does not support composite primary keys and your PhoneNumbers table has a primary key that spans three columns. This <a href=\"https://code.djangoproject.com/wiki/MultipleColumnPrimaryKeys\" rel=\"nofollow\">ticket</a> has been open for years. There is a <a href=\"https://github.com/simone/django-compositekey\" rel=\"nofollow\">third party plugin</a> that provide composite primary key support but it's been unmaintained for two years and incompatible with the latest versions of Django.</p>\n\n<p>The solution is to add the primary key. But before that do</p>\n\n<pre><code>./manage.py migrate\n</code></pre>\n\n<p>This will make sure that the tables needed by django are created in your legacy database.</p>\n\n<p>Now modify your models to delete this line</p>\n\n<pre><code>managed = False\n</code></pre>\n\n<p>This signals django that alterations to the models are to be reflected in the database. Then change your model as follows.</p>\n\n<pre><code>class Person(models.Model):\n    id = models.BigIntegerField(primary_key=True, db_column='person_id')\n    first_name = models.CharField(max_length=255)\n    last_name = models.CharField(max_length=255)\n\n    class Meta:\n        db_table = 'person'\n\n\nclass PhoneNumbers(models.Model):\n    id = models.BigIntegerField(primary_key=True)\n    person = models.ForeignKey(Person, models.DO_NOTHING)\n    phone_number = models.CharField(max_length=15)\n    area_code = models.CharField(max_length=15)\n\n    class Meta:\n        db_table = 'phonenumbers'\n        unique_together = (('person', 'phone_number', 'area_code'),)\n</code></pre>\n\n<p>Then do</p>\n\n<pre><code> ./manage.py makemigrations  your_app_name\n ./manage.py migrate\n</code></pre>\n\n<p>Notice that I have renamed the primary key field in Person. This is just a cosmetic change. That's because the convention is to have the primary key field as id. When you are dealing with lots of models you are likely to forget that this model's primary key was named differently. Hence the change.</p>\n"}], "owner": {"reputation": 13, "user_id": 6441936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48fa0db90821e582def93582ed1b42ac?s=128&d=identicon&r=PG&f=1", "display_name": "Peter LT", "link": "https://stackoverflow.com/users/6441936/peter-lt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1536, "favorite_count": 0, "accepted_answer_id": 37716599, "answer_count": 2, "score": 1, "last_activity_date": 1465445083, "creation_date": 1465414871, "question_id": 37711512, "link": "https://stackoverflow.com/questions/37711512/how-to-implement-multivalued-attribute-in-django", "title": "How to implement multivalued attribute in Django?", "body": "<p>I have a legacy database with the following tables:</p>\n\n<p>person</p>\n\n<pre><code>person_id (PK)  |  first_name  |  last_name\n        1       |  John        |  Doe\n        2       |  David       |  Bentley\n</code></pre>\n\n<p>phonenumbers</p>\n\n<pre><code>person_id (FK,PK) |  phone_number (PK)  | area_code (PK)\n        1         |  758-4551           | 909\n        1         |  763-3445           | 909\n        2         |  634-0011           | 637\n</code></pre>\n\n<p>Every person can have zero or more phone numbers, which is a multivalued attribute of the person entity. </p>\n\n<p>I've tried using the Django's inspectdb command which generated the following models.py:</p>\n\n<pre><code>class Person(models.Model):\n    person_id = models.BigIntegerField(primary_key=True)\n    first_name = models.CharField(max_length=255)\n    last_name = models.CharField(max_length=255)\n\n    class Meta:\n        managed = False\n        db_table = 'person'\n\n\nclass PhoneNumbers(models.Model):\n    person = models.ForeignKey(Person, models.DO_NOTHING)\n    phone_number = models.CharField(max_length=15)\n    area_code = models.CharField(max_length=15)\n\n    class Meta:\n        managed = False\n        db_table = 'phonenumbers'\n        unique_together = (('person', 'phone_number', 'area_code'),)\n</code></pre>\n\n<p>However, when I tried to save a new instance of PhoneNumbers, Django returned the following error message:</p>\n\n<pre><code>django.db.utils.ProgrammingError: column phonenumbers.id does not exist\n</code></pre>\n\n<p>Apparently Django expects the phone number's table to have a surrogate key. \nSince the phone number's table is not an entity, it doesn't have a surrogate key in my legacy database. Notice that the phonenumbers' table primary key is a composition of all of its columns.</p>\n\n<p>How can I map these tables into Django's models so that it works with my legacy database?</p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 2337, "user_id": 4278243, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IUMpR.jpg?s=128&g=1", "display_name": "Aleksander Monk", "link": "https://stackoverflow.com/users/4278243/aleksander-monk"}, "is_accepted": true, "score": 5, "last_activity_date": 1465421236, "creation_date": 1465421236, "answer_id": 37713230, "question_id": 37711491, "link": "https://stackoverflow.com/questions/37711491/django-add-friends-with-custom-user-model/37713230#37713230", "title": "Django, add friends with custom user model", "body": "<p>At the end I did it another way </p>\n\n<p>Instead of ForeignKey I used ManyToMany and class Relationship</p>\n\n<pre><code>class Person(AbstractBaseUser, PermissionsMixin):\n... things here...\nrelationships = models.ManyToManyField('self', through='Relationship',\n                                           symmetrical=False,\n                                           related_name='related_to')\n</code></pre>\n\n<p>and class</p>\n\n<pre><code>class Relationship(models.Model):\nfrom_person = models.ForeignKey(Person, related_name='from_people')\nto_person = models.ForeignKey(Person, related_name='to_people')\n</code></pre>\n\n<p>To add user in my view I have this </p>\n\n<pre><code>def add_friend(request, username):\n    if request.user.is_authenticated():\n        user = Person.objects.get_by_natural_key(username)\n        Relationship.objects.get_or_create(\n            from_person=request.user,\n            to_person=user)\n        return HttpResponseRedirect('/profile/')\n</code></pre>\n\n<p>and to show list of users </p>\n\n<pre><code>def show_friends(request, username):\n    user = Person.objects.get_by_natural_key(username)\n    rel = user.relationships.filter(\n        to_people__from_person=user)\n    args = {'friends': rel}\n    return render(request, \"profile/friend_list.html\", args)\n</code></pre>\n\n<p>You can see more <a href=\"http://charlesleifer.com/blog/self-referencing-many-many-through/\" rel=\"noreferrer\">here</a> . This post helped me understand what I'm doing wrong and what should be changed.</p>\n"}], "owner": {"reputation": 2337, "user_id": 4278243, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IUMpR.jpg?s=128&g=1", "display_name": "Aleksander Monk", "link": "https://stackoverflow.com/users/4278243/aleksander-monk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1901, "favorite_count": 3, "accepted_answer_id": 37713230, "answer_count": 1, "score": 2, "last_activity_date": 1465421236, "creation_date": 1465414808, "question_id": 37711491, "link": "https://stackoverflow.com/questions/37711491/django-add-friends-with-custom-user-model", "title": "Django, add friends with custom user model", "body": "<p>I know that I'm reinventing the wheel here, but I just don't like <code>django-friendship</code> and want to write it myself. </p>\n\n<p>Thus, I have custom user model Person </p>\n\n<pre><code>class Person(AbstractBaseUser, PermissionsMixin):\n\n    username = models.CharField(('username'), max_length=75, unique=True,\n                                help_text=('Required. 30 characters or fewer. Letters, numbers and '\n                                           '@/./+/-/_ characters'),\n                                validators=[\n                                    validators.RegexValidator(re.compile('^[\\w.@+-]+$'),\n                                                              ('Enter a valid username.'), 'invalid')\n                                ])\n    ....more other fields....\n    friend = models.ForeignKey('self', related_name=\"friends\",  default=None, null=True)\n</code></pre>\n\n<p>As you can see I have foreign key with self or other words oneToMany relationship. </p>\n\n<p>and here is what I have in views.py to add friends </p>\n\n<pre><code>def add_friend(request, username):\n    if request.user.is_authenticated():\n        user = Person.objects.get_by_natural_key(username)\n        if user is not None:\n            user.friend = request.user    /// here\n        return HttpResponseRedirect('/profile/')\n</code></pre>\n\n<p>I'm getting user which I want to add to my friends by username and set users field(friends) to current user(request user). However, I think that I'm doing something wrong here. </p>\n\n<p>I tried to google it, but didnt find example with <code>ForeignKey('self')</code></p>\n"}, {"tags": ["python", "timer", "python-3.4"], "answers": [{"tags": [], "owner": {"reputation": 1440, "user_id": 3154314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51a481af927708d875a0f2b9f496082b?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3154314/aaron"}, "is_accepted": true, "score": 3, "last_activity_date": 1465418415, "creation_date": 1465418415, "answer_id": 37712496, "question_id": 37711458, "link": "https://stackoverflow.com/questions/37711458/running-a-python-function-after-a-certain-time-passes-using-threading-timer-ho/37712496#37712496", "title": "Running a python function after a certain time passes. Using Threading Timer, however it only runs once and then stops", "body": "<p>You haven't given enough detail of what your actual issue is, what code do you want to run more than once? Can you show the code that actually calls this function? </p>\n\n<p>When you call start, the main thread will continue executing from that spot, while the task you scheduled will call the parse_file method at the specified time, and exit once complete. It sounds to me like you don't have anything that is keeping your main thread alive (that is, you don't have any more code after you call the executor). </p>\n\n<p>Here is a small example showing how you can use the Timer to execute tasks while the main thread is still working. You can keep typing in input, and the print statement will show you all the threads that completed since the last time you typed an input.</p>\n\n<pre><code>from threading import Timer\nimport sys\n\ndef scheduled_task(arg):\n    print(\"\\ntask complete arg %s!\\n\"%(arg))\n\ndef run_scheduled_task(arg):\n    timer = Timer(10, scheduled_task, [arg])\n    timer.start()\n\ndone = False\nwhile not done:\n    user_input = input(\"Give me some input (exit to stop): \")\n    if user_input == 'exit':\n        print('Exiting')\n        done = True\n    else:\n        run_scheduled_task(user_input)\n</code></pre>\n"}], "owner": {"reputation": 402, "user_id": 5244303, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/080fa55d914ce0587eb7d55800c8a802?s=128&d=identicon&r=PG&f=1", "display_name": "M. Barbieri", "link": "https://stackoverflow.com/users/5244303/m-barbieri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7678, "favorite_count": 1, "accepted_answer_id": 37712496, "answer_count": 1, "score": 1, "last_activity_date": 1465418415, "creation_date": 1465414661, "question_id": 37711458, "link": "https://stackoverflow.com/questions/37711458/running-a-python-function-after-a-certain-time-passes-using-threading-timer-ho", "title": "Running a python function after a certain time passes. Using Threading Timer, however it only runs once and then stops", "body": "<p>I am trying to run a specific function in my python file. However, when I run the method with the timer that calls said function, it executes everything that it's supposed to, but then exits the job after the first time. I need it to continue to run the function after the specified time. </p>\n\n<p>This is the function that contains the timer:</p>\n\n<pre>\n    def executor(file):\n        x = datetime.today()\n        y = x.replace(day=x.day, hour=x.hour, minute=x.minute, second=x.second+10, microsecond=0)\n        delta_t = y-x\n        secs = delta_t.seconds+1\n        t = Timer(secs, parse_file, [file])\n        t.start()\n</pre>\n\n<p>The function that I am trying to call, is <code>parse_file(file_name)</code>.\nI am passing in the <code>file_name</code> when calling the <code>executor</code> function.</p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 40991, "user_id": 4794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f90cd356f2945b284946d5743467d850?s=128&d=identicon&r=PG", "display_name": "Don Kirkby", "link": "https://stackoverflow.com/users/4794/don-kirkby"}, "is_accepted": false, "score": 11, "last_activity_date": 1467064033, "last_edit_date": 1467064033, "creation_date": 1465414483, "answer_id": 37711403, "question_id": 37711402, "link": "https://stackoverflow.com/questions/37711402/circular-dependency-when-squashing-django-migrations/37711403#37711403", "title": "Circular dependency when squashing Django migrations", "body": "<p>This seems like a lot of work, but it's the best solution I've found so far. I've posted the squashed migrations in the <a href=\"https://github.com/donkirkby/djsquash/tree/master\" rel=\"noreferrer\">master branch</a>. Before running <code>squashmigrations</code>, we replace the foreign key\nfrom <code>Cranberry</code> to <code>Bacon</code> with an integer field. Override the field name so it\nhas the <code>_id</code> suffix of a foreign key. This will break the dependency without losing data.</p>\n\n<pre><code># TODO: switch back to the foreign key.\n# bacon = models.ForeignKey('meat.Bacon', null=True)\nbacon = models.IntegerField(db_column='bacon_id', null=True)\n</code></pre>\n\n<p>Run <code>makemigrations</code> and rename the migration to show that it is starting\nthe squash process:</p>\n\n<ul>\n<li><code>fruit/0100_unlink_apps</code> converts the foreign key to an integer field</li>\n</ul>\n\n<p>Now run <code>squashmigrations fruit 0100</code> and rename the migration to make it easier\nto follow the sequence:</p>\n\n<ul>\n<li><code>fruit/0101_squashed</code> combines all the migrations from 1 to 100.</li>\n</ul>\n\n<p>Comment out the dependency from <code>fruit/0101_squashed</code> to <code>meat/0001_initial</code>. It\nisn't really needed, and it creates a circular dependency. With more complicated\nmigration histories, the foreign keys to other apps might not get optimized out.\nSearch the file for all the app names listed in the dependencies to see if there\nare any foreign keys left. If so, manually replace them with the integer fields.\nUsually, this means replacing a <code>CreateModel(...ForeignKey...)</code> and\n<code>AlterModel(...IntegerField...)</code> with a <code>CreateModel(...IntegerField...)</code>.</p>\n\n<p>The next commit contains all these changes for demonstration purposes. It\nwouldn't make sense to push it without the following commit, though, because\nthe apps are still unlinked.</p>\n\n<p>Switch back to the foreign key from <code>Cranberry</code> to <code>Bacon</code>, and run\n<code>makemigrations</code> one last time. Rename the migration to show that it is\nfinishing the squash process:</p>\n\n<ul>\n<li><code>fruit/0102_relink_apps</code> converts the integer field back to a foreign key</li>\n</ul>\n\n<p>Remove the dependency from <code>fruit/0102_relink_apps</code> to <code>fruit/0101_squashed</code>,\nand add a dependency from <code>fruit/0102_relink_apps</code> to <code>fruit/0100_unlink_apps</code>.\nThe original dependency just won't work. Take the dependencies that were\ncommented out in <code>fruit/0101_squashed</code> and add them to <code>fruit/0102_relink_apps</code>.\nThat will ensure the links get created in the right order.</p>\n\n<p>Run the test suite to show that the squashed migration works properly. If you\ncan, test against something other than SQLite, because it doesn't catch some\nforeign key problems. Back up the development or production database and run\n<code>migrate</code> to see that the unlinking and relinking of the apps doesn't break\nanything.</p>\n\n<p>Take a nap.</p>\n\n<h2>Bonus section: after all installations are squashed</h2>\n\n<p>The <a href=\"https://github.com/donkirkby/djsquash/tree/convert_squash\" rel=\"noreferrer\">convert_squash branch</a> shows what could happen in the future once all\ninstallations have migrated past the squash point. Delete all the migrations\nfrom 1 to 100, because they've been replaced by 101. Delete the <code>replaces</code> list\nfrom <code>fruit/0101_squashed</code>. Run <code>showmigrations</code> to check for any broken\ndependencies, and replace them with <code>fruit/0101_squashed</code>. </p>\n\n<h2>The horror of many-to-many relationships</h2>\n\n<p>If you are unlucky enough to have a many-to-many relationship between two apps, it gets really ugly. I had to use <a href=\"https://docs.djangoproject.com/en/1.9/ref/migration-operations/#separatedatabaseandstate\" rel=\"noreferrer\">the <code>SeparateDatabaseAndState</code> operation</a> to disconnect the two apps without having to write a data migration. The trick is to replace the many-to-many relationship with a temporary child model using the same table and field names, then tell Django to just update its state without touching the database schema. To see an example, look at my <a href=\"https://github.com/cfe-lab/Kive/blob/2d411bdcc99678b8c39666e6383998743c19254c/kive/pipeline/migrations/0100_unlink_apps.py#L16\" rel=\"noreferrer\">unlink</a>, <a href=\"https://github.com/cfe-lab/Kive/blob/2d411bdcc99678b8c39666e6383998743c19254c/kive/pipeline/migrations/0101_squashed2.py#L162\" rel=\"noreferrer\">squashed</a>, and <a href=\"https://github.com/cfe-lab/Kive/blob/2d411bdcc99678b8c39666e6383998743c19254c/kive/pipeline/migrations/0102_relink_apps.py#L17\" rel=\"noreferrer\">relink</a> migrations.</p>\n"}, {"comments": [{"owner": {"reputation": 10968, "user_id": 232220, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/7123839b35e3f4235aab013e7ac75106?s=128&d=identicon&r=PG&f=1", "display_name": "Teekin", "link": "https://stackoverflow.com/users/232220/teekin"}, "edited": false, "score": 2, "creation_date": 1531344850, "post_id": 50281676, "comment_id": 89566471, "body": "I&#39;m not going to use this solution, but the explanation in it is very valuable, so +1."}], "tags": [], "owner": {"reputation": 40991, "user_id": 4794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f90cd356f2945b284946d5743467d850?s=128&d=identicon&r=PG", "display_name": "Don Kirkby", "link": "https://stackoverflow.com/users/4794/don-kirkby"}, "is_accepted": true, "score": 9, "last_activity_date": 1525987166, "creation_date": 1525987166, "answer_id": 50281676, "question_id": 37711402, "link": "https://stackoverflow.com/questions/37711402/circular-dependency-when-squashing-django-migrations/50281676#50281676", "title": "Circular dependency when squashing Django migrations", "body": "<p>For Django versions after 1.9, it seems harder to avoid the <code>CircularDependencyError</code>. When Django loads the graph of migrations and applies the replacements, it includes all the dependencies of the replaced migrations as dependencies of the new migration. That means that even when you split the dependency on another app out of the main squashed migration, you still get the dependency from one of the old migrations you replaced.</p>\n\n<p>This seems like a horrible mess to disentangle, but if you absolutely must find a way to squash your migrations, here's what I got to work on my small <a href=\"https://github.com/donkirkby/djsquash\" rel=\"noreferrer\">sample project</a>:</p>\n\n<ol>\n<li><p>Remove all of the migrations.</p>\n\n<pre><code>$ rm fruit/migrations/0*\n$ rm meat/migrations/0*\n</code></pre></li>\n<li><p>Create a new set of migrations. This is the only way that I've seen Django properly break dependency cycles by separating <code>0001_initial</code> and <code>0002_cranberry_bacon</code>.</p>\n\n<pre><code>$ ./manage.py makemigrations \nMigrations for 'fruit':\n  fruit/migrations/0001_initial.py\n    - Create model Apple\n    - Create model Cranberry\n  fruit/migrations/0002_cranberry_bacon.py\n    - Add field bacon to cranberry\nMigrations for 'meat':\n  meat/migrations/0001_initial.py\n    - Create model Bacon\n</code></pre></li>\n<li><p>Rename the new migrations to be replacements, and restore the old migrations.</p>\n\n<pre><code>$ mv fruit/migrations/0001_initial.py fruit/migrations/0101_squashed.py\n$ mv fruit/migrations/0002_cranberry_bacon.py fruit/migrations/0102_link_apps.py\n$ git checkout -- .\n</code></pre></li>\n<li><p>Change the new migrations to actually be replacements for the old migrations. Look through the old migrations to see which ones depend on the other app. List those migrations in <code>0102_link_apps.py</code>, and list all the other migrations in <code>0101_squashed.py</code>.</p>\n\n<pre><code># Added to 0101_squashed.py\nreplaces = [(b'fruit', '0001_initial'), (b'fruit', '0003_apple_size')]\n\n# Added to 0102_link_apps.py\nreplaces = [(b'fruit', '0002_cranberry_bacon')]\n</code></pre></li>\n<li><p>Now comes the painful part on a large project. All of the old migrations that depend on the other app have to be taken out of the dependency chain. In my example, <code>0003_apple_size</code> now depends on <code>0001_initial</code> instead of <code>0002_cranberry_bacon</code>. Of course, Django gets upset if you have more than one leaf node in an app's migrations, so you need to link the two dependency chains back together at the end. Here's <code>fruit/migrations/0100_prepare_squash.py</code>:</p>\n\n<pre><code>from __future__ import unicode_literals\n\nfrom django.db import migrations\n\n\nclass Migration(migrations.Migration):\n\n    dependencies = [\n        ('fruit', '0003_apple_size'),\n        ('fruit', '0002_cranberry_bacon'),\n    ]\n\n    operations = [\n    ]\n</code></pre></li>\n<li><p>Add <code>0100_prepare_squash</code> to the list of migrations that <code>0102_link_apps</code> replaces.</p>\n\n<pre><code># Added to 0102_link_apps.py\nreplaces = [(b'fruit', '0002_cranberry_bacon'), (b'fruit', '0100_prepare_squash')]\n</code></pre></li>\n</ol>\n\n<p>This seems horribly dangerous, particularly making changes to the dependencies of the old migrations. I guess you could make the dependency chain more elaborate to ensure that everything runs in the correct order, but that would be even more painful to set up.</p>\n"}, {"tags": [], "owner": {"reputation": 803, "user_id": 2036206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f76d0dee4114a55d958016680bcd22d5?s=128&d=identicon&r=PG", "display_name": "flix", "link": "https://stackoverflow.com/users/2036206/flix"}, "is_accepted": false, "score": 0, "last_activity_date": 1592672322, "creation_date": 1592672322, "answer_id": 62488931, "question_id": 37711402, "link": "https://stackoverflow.com/questions/37711402/circular-dependency-when-squashing-django-migrations/62488931#62488931", "title": "Circular dependency when squashing Django migrations", "body": "<p>You could use <a href=\"https://github.com/3YOURMIND/django-replace-migrations\" rel=\"nofollow noreferrer\">django-replace-migration</a>, which I have written to make it easier to remove old migrations.</p>\n"}], "owner": {"reputation": 40991, "user_id": 4794, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f90cd356f2945b284946d5743467d850?s=128&d=identicon&r=PG", "display_name": "Don Kirkby", "link": "https://stackoverflow.com/users/4794/don-kirkby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3300, "favorite_count": 1, "accepted_answer_id": 50281676, "answer_count": 3, "score": 8, "last_activity_date": 1592672322, "creation_date": 1465414483, "question_id": 37711402, "link": "https://stackoverflow.com/questions/37711402/circular-dependency-when-squashing-django-migrations", "title": "Circular dependency when squashing Django migrations", "body": "<p>We've created a large Django application, and we want to squash migrations. However, the squashed migrations have circular dependencies between the apps in our application. How can we break those circular dependencies without breaking Django's migration squashing?</p>\n\n<p>I've created a <a href=\"https://github.com/donkirkby/djsquash/tree/before_squash\" rel=\"noreferrer\">small sample project</a> to reproduce the problem. The project has two apps: <code>fruit</code> and <code>meat</code>. An <code>Apple</code> has many <code>Bacon</code>\nchildren, and a <code>Bacon</code> has many <code>Cranberry</code> children. You can see that the fruit app depends on the meat app, and the meat app depends on the fruit app.</p>\n\n<p>The first commit creates all three models with a name field on each and\nforeign keys from <code>Cranberry</code> to <code>Bacon</code> and from <code>Bacon</code> to <code>Apple</code>. Calling <code>makemigrations</code> creates three migrations:</p>\n\n<ul>\n<li><code>fruit/0001_initial</code> creates the <code>Apple</code> and <code>Cranberry</code> models</li>\n<li><code>meat/0001_initial</code> creates the <code>Bacon</code> model with its foreign key to <code>Apple</code></li>\n<li><code>fruit/0002_cranberry_bacon</code> adds the foreign key from <code>Cranberry</code> to <code>Bacon</code></li>\n</ul>\n\n<p>The next commit adds an <code>Apple.size</code> field just so there is something to squash.\nCalling <code>makemigrations</code> adds another migration:</p>\n\n<ul>\n<li><code>fruit/0003_apple_size</code> adds the <code>size</code> field</li>\n</ul>\n\n<p>Running <code>squashmigrations</code> now creates a squashed migration with a circular dependency. The <a href=\"https://docs.djangoproject.com/en/1.9/topics/migrations/#squashing-migrations\" rel=\"noreferrer\"><code>squashmigrations</code> documentation</a> gives this advice:</p>\n\n<blockquote>\n  <p>To manually resolve a <code>CircularDependencyError</code>, break out one of the ForeignKeys in the circular dependency loop into a separate migration, and move the dependency on the other app with it. If you\u2019re unsure, see how makemigrations deals with the problem when asked to create brand new migrations from your models. In a future release of Django, squashmigrations will be updated to attempt to resolve these errors itself.</p>\n</blockquote>\n\n<p>If I do that, however, the extra migration isn't configured properly as a replacement. That means that my current database that has gone through the original migrations tries to add the foreign key field again and fails.</p>\n\n<pre><code>$ ./manage.py migrate\n...\ndjango.db.utils.ProgrammingError: column \"bacon_id\" of relation \"fruit_cranberry\" already exists\n</code></pre>\n\n<p>How can I tell the migration system that two new migrations replace all the old migrations?</p>\n"}, {"tags": ["python", "scrapy", "web-crawler", "yield"], "comments": [{"owner": {"reputation": 36, "user_id": 4290671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a842d026997c32cdc8ae04b36e54717?s=128&d=identicon&r=PG&f=1", "display_name": "josh", "link": "https://stackoverflow.com/users/4290671/josh"}, "edited": false, "score": 0, "creation_date": 1465414475, "post_id": 37711376, "comment_id": 62896532, "body": "I discovered that if you have return instead of pass, it works."}, {"owner": {"reputation": 5236, "user_id": 1913990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fab871420257b4167142acf11b0923cb?s=128&d=identicon&r=PG", "display_name": "cmd", "link": "https://stackoverflow.com/users/1913990/cmd"}, "edited": false, "score": 0, "creation_date": 1465415190, "post_id": 37711376, "comment_id": 62896911, "body": "What are you trying to accomplish by using yield?  You are never letting it actually yield a value.  while trying to compute the first value to yield, you hit a second yield."}, {"owner": {"reputation": 36, "user_id": 4290671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a842d026997c32cdc8ae04b36e54717?s=128&d=identicon&r=PG&f=1", "display_name": "josh", "link": "https://stackoverflow.com/users/4290671/josh"}, "reply_to_user": {"reputation": 5236, "user_id": 1913990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fab871420257b4167142acf11b0923cb?s=128&d=identicon&r=PG", "display_name": "cmd", "link": "https://stackoverflow.com/users/1913990/cmd"}, "edited": false, "score": 0, "creation_date": 1465502204, "post_id": 37711376, "comment_id": 62941444, "body": "This code is just an example for the question. But the same problem is in my actual code. I had already used yield to get a response from a url and wanted to pass it to a different parser without having to revisit the page (saves bandwitdh). But it wouldn&#39;t parse it if yield was present in the function as demonstrated above. I don&#39;t know much about yield vs return but all the scrapy examples use yield  with items, so that&#39;s what I use."}], "answers": [{"tags": [], "owner": {"reputation": 19115, "user_id": 2572383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a475c78c46b48609cf6b3b3e082f6d4?s=128&d=identicon&r=PG", "display_name": "paul trmbrth", "link": "https://stackoverflow.com/users/2572383/paul-trmbrth"}, "is_accepted": false, "score": 1, "last_activity_date": 1465464142, "last_edit_date": 1465464142, "creation_date": 1465463834, "answer_id": 37721703, "question_id": 37711376, "link": "https://stackoverflow.com/questions/37711376/python-yield-prevents-output-execution-in-scrapy-web-spider-crawler/37721703#37721703", "title": "Python Yield prevents output/execution in Scrapy Web Spider Crawler", "body": "<p><a href=\"http://doc.scrapy.org/en/latest/topics/spiders.html#spiders\" rel=\"nofollow\">Scrapy spider callbacks</a> are expected:</p>\n\n<ul>\n<li>to return an item, a dict or a Request</li>\n<li>or be iterables of items, dicts or Requests,</li>\n</ul>\n\n<blockquote>\n  <p>In the callback function, you parse the response (web page) and return either dicts with extracted data, Item objects, Request objects, or an iterable of these objects. </p>\n</blockquote>\n\n<p>The 2 most common cases for having iterable callbacks results are:</p>\n\n<ul>\n<li>either generators using <code>yield</code>, generating items, dicts, or Requests</li>\n<li>or returning Python list (<code>[]</code>) of items, dicts or Requests</li>\n</ul>\n\n<p>(other Python objects can be iterables too, but let's focus on these 2 cases)</p>\n\n<p>Using <code>yield</code> in your callback methods, you're defining <a href=\"https://wiki.python.org/moin/Generators\" rel=\"nofollow\">generators</a></p>\n\n<blockquote>\n  <p>Generators functions allow you to declare a function that behaves like an iterator, i.e. it can be used in a for loop.</p>\n</blockquote>\n\n<p>So, in your <code>parse_page1</code>, if you want to use \"results\" from another callback method that is using <code>yield</code>, you need to iterate on it, capture those generated values, and either:</p>\n\n<ul>\n<li><code>yield</code> each value again to scrapy engine (making <code>parse_page1</code> a generator too)</li>\n<li>or return all values in <code>parse_page1</code> as a list</li>\n</ul>\n\n<p>Here's an example spider (say, <code>spider.py</code>) with a generator callback, <code>parse</code>, using 3 other generator callbacks and 1 callback using return:</p>\n\n<pre><code>import scrapy\n\nclass TestSpider(scrapy.Spider):\n    name = \"test\"\n    start_urls = [\"http://www.example.com\"]\n\n    def parse(self, response):\n        # parse_a, parse_b and parse_c are generators,\n        # so we \"for loop\" over them\n        for rb in self.parse_a(response):\n            yield rb\n\n        for rb in self.parse_b(response):\n            yield rb\n\n        for rb in self.parse_c(response):\n            yield rb\n\n        # parse_d returns a single value\n        # so we yield it's result directly\n        yield self.parse_d(response)\n\n    def parse_a(self, response):\n        self.logger.info(\"I am in 'parse_a'\")\n        yield {\"value\": \"a\"}\n\n    def parse_b(self, response):\n        self.logger.info(\"I am in 'parse_b'\")\n        yield {\"value\": \"b\"}\n\n    def parse_c(self, response):\n        self.logger.info(\"I am in 'parse_c'\")\n        yield {\"value\": \"c\"}\n\n    def parse_d(self, response):\n        self.logger.info(\"I am in 'parse_d'\")\n        return {\"value\": \"d\"}\n</code></pre>\n\n<p><code>scrapy run spider.py</code> produces this:</p>\n\n<pre><code>$ scrapy runspider spider.py \n2016-06-09 10:40:35 [scrapy] INFO: Scrapy 1.1.0 started (bot: scrapybot)\n(...)\n2016-06-09 10:40:35 [scrapy] INFO: Spider opened\n2016-06-09 10:40:35 [scrapy] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)\n2016-06-09 10:40:36 [scrapy] DEBUG: Crawled (200) &lt;GET http://www.example.com&gt; (referer: None)\n2016-06-09 10:40:36 [test] INFO: I am in 'parse_a'\n2016-06-09 10:40:36 [scrapy] DEBUG: Scraped from &lt;200 http://www.example.com&gt;\n{'value': 'a'}\n2016-06-09 10:40:36 [test] INFO: I am in 'parse_b'\n2016-06-09 10:40:36 [scrapy] DEBUG: Scraped from &lt;200 http://www.example.com&gt;\n{'value': 'b'}\n2016-06-09 10:40:36 [test] INFO: I am in 'parse_c'\n2016-06-09 10:40:36 [scrapy] DEBUG: Scraped from &lt;200 http://www.example.com&gt;\n{'value': 'c'}\n2016-06-09 10:40:36 [test] INFO: I am in 'parse_d'\n2016-06-09 10:40:36 [scrapy] DEBUG: Scraped from &lt;200 http://www.example.com&gt;\n{'value': 'd'}\n2016-06-09 10:40:36 [scrapy] INFO: Closing spider (finished)\n2016-06-09 10:40:36 [scrapy] INFO: Dumping Scrapy stats:\n{'downloader/request_bytes': 213,\n 'downloader/request_count': 1,\n 'downloader/request_method_count/GET': 1,\n 'downloader/response_bytes': 957,\n 'downloader/response_count': 1,\n 'downloader/response_status_count/200': 1,\n 'finish_reason': 'finished',\n 'finish_time': datetime.datetime(2016, 6, 9, 8, 40, 36, 144795),\n 'item_scraped_count': 4,\n 'log_count/DEBUG': 5,\n 'log_count/INFO': 11,\n 'response_received_count': 1,\n 'scheduler/dequeued': 1,\n 'scheduler/dequeued/memory': 1,\n 'scheduler/enqueued': 1,\n 'scheduler/enqueued/memory': 1,\n 'start_time': datetime.datetime(2016, 6, 9, 8, 40, 35, 733023)}\n2016-06-09 10:40:36 [scrapy] INFO: Spider closed (finished)\n</code></pre>\n\n<p>Now, using a callback method using return for values from generators and non-generator callbacks:</p>\n\n<pre><code>import scrapy\n\nclass TestSpider(scrapy.Spider):\n    name = \"test\"\n    start_urls = [\"http://www.example.com\"]\n\n    def parse(self, response):\n        results = []\n\n        # extend() will loop on the values from the generators,\n        # adding them to the list\n        results.extend(self.parse_a(response))\n        results.extend(self.parse_b(response))\n        results.extend(self.parse_b(response))\n\n        # parse_d() returns only 1 value, so we just append the return value\n        results.append(self.parse_d(response))\n\n        return results\n\n    def parse_a(self, response):\n        self.logger.info(\"I am in 'parse_a'\")\n        yield {\"value\": \"a\"}\n\n    def parse_b(self, response):\n        self.logger.info(\"I am in 'parse_b'\")\n        yield {\"value\": \"b\"}\n\n    def parse_c(self, response):\n        self.logger.info(\"I am in 'parse_c'\")\n        yield {\"value\": \"c\"}\n\n    def parse_d(self, response):\n        self.logger.info(\"I am in 'parse_d'\")\n        return {\"value\": \"d\"}\n</code></pre>\n\n<p>It produces this:</p>\n\n<pre><code>$ scrapy runspider spider.py \n2016-06-09 10:50:41 [scrapy] INFO: Scrapy 1.1.0 started (bot: scrapybot)\n(...)\n2016-06-09 10:50:41 [scrapy] INFO: Spider opened\n2016-06-09 10:50:41 [scrapy] INFO: Crawled 0 pages (at 0 pages/min), scraped 0 items (at 0 items/min)\n2016-06-09 10:50:41 [scrapy] DEBUG: Crawled (200) &lt;GET http://www.example.com&gt; (referer: None)\n2016-06-09 10:50:41 [test] INFO: I am in 'parse_a'\n2016-06-09 10:50:41 [test] INFO: I am in 'parse_b'\n2016-06-09 10:50:41 [test] INFO: I am in 'parse_b'\n2016-06-09 10:50:41 [test] INFO: I am in 'parse_d'\n2016-06-09 10:50:41 [scrapy] DEBUG: Scraped from &lt;200 http://www.example.com&gt;\n{'value': 'a'}\n2016-06-09 10:50:41 [scrapy] DEBUG: Scraped from &lt;200 http://www.example.com&gt;\n{'value': 'b'}\n2016-06-09 10:50:41 [scrapy] DEBUG: Scraped from &lt;200 http://www.example.com&gt;\n{'value': 'b'}\n2016-06-09 10:50:41 [scrapy] DEBUG: Scraped from &lt;200 http://www.example.com&gt;\n{'value': 'd'}\n2016-06-09 10:50:41 [scrapy] INFO: Closing spider (finished)\n2016-06-09 10:50:41 [scrapy] INFO: Dumping Scrapy stats:\n{'downloader/request_bytes': 213,\n 'downloader/request_count': 1,\n 'downloader/request_method_count/GET': 1,\n 'downloader/response_bytes': 957,\n 'downloader/response_count': 1,\n 'downloader/response_status_count/200': 1,\n 'finish_reason': 'finished',\n 'finish_time': datetime.datetime(2016, 6, 9, 8, 50, 41, 619777),\n 'item_scraped_count': 4,\n 'log_count/DEBUG': 5,\n 'log_count/INFO': 11,\n 'response_received_count': 1,\n 'scheduler/dequeued': 1,\n 'scheduler/dequeued/memory': 1,\n 'scheduler/enqueued': 1,\n 'scheduler/enqueued/memory': 1,\n 'start_time': datetime.datetime(2016, 6, 9, 8, 50, 41, 225264)}\n2016-06-09 10:50:41 [scrapy] INFO: Spider closed (finished)\n</code></pre>\n\n<p>Notice the difference in INFO logs: in the 2nd case, all INFO lines are printed at once, because <code>parse</code> consumes all generators before handing results back to scrapy engine, and then scrapy prints the items it got (as a list).</p>\n\n<p>Whereas in the first case, using <code>parse</code> as generator, scrapy iterates over the callback results, and sub-callbacks are called one at a time, items being produced on each iteration at <code>yield</code> points.</p>\n\n<p>Another variation is to consume sub-callbacks into a list (like in the 2nd example above), and still have <code>parse</code> as a generator, but that would less coherent (although still working):</p>\n\n<pre><code>import scrapy\n\nclass TestSpider(scrapy.Spider):\n    name = \"test\"\n    start_urls = [\"http://www.example.com\"]\n\n    def parse(self, response):\n        results = []\n\n        # extend() will loop on the values from the generators,\n        # adding them to the list\n        results.extend(self.parse_a(response))\n        results.extend(self.parse_b(response))\n        results.extend(self.parse_b(response))\n\n        # parse_d() returns only 1 value, so we just append the return value\n        results.append(self.parse_d(response))\n\n        for rv in results:\n            yield rv\n\n    def parse_a(self, response):\n        self.logger.info(\"I am in 'parse_a'\")\n        yield {\"value\": \"a\"}\n\n    def parse_b(self, response):\n        self.logger.info(\"I am in 'parse_b'\")\n        yield {\"value\": \"b\"}\n\n    def parse_c(self, response):\n        self.logger.info(\"I am in 'parse_c'\")\n        yield {\"value\": \"c\"}\n\n    def parse_d(self, response):\n        self.logger.info(\"I am in 'parse_d'\")\n        return {\"value\": \"d\"}\n</code></pre>\n"}], "owner": {"reputation": 36, "user_id": 4290671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a842d026997c32cdc8ae04b36e54717?s=128&d=identicon&r=PG&f=1", "display_name": "josh", "link": "https://stackoverflow.com/users/4290671/josh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1461, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465464142, "creation_date": 1465414440, "question_id": 37711376, "link": "https://stackoverflow.com/questions/37711376/python-yield-prevents-output-execution-in-scrapy-web-spider-crawler", "title": "Python Yield prevents output/execution in Scrapy Web Spider Crawler", "body": "<p>I have an issue with my scrapy spider.  Ipass a response object from one parse function to another. The code will only execute for functions that that do not have a yield request (see difference between the two snippets) Why is this?</p>\n\n<pre><code># Yield in parse_page2 scope; \"Parsing page 2\" doesn't print\nimport scrapy\n\n\nclass GetInfSpider(scrapy.Spider):\n    name = \"get_inf\"\n    # allowed_domains = [\"example.com\n    def start_requests(self):\n        yield scrapy.Request(\"http://www.apple.com\", callback=self.parse_page1)\n\n\n    def parse_page1(self, response):\n        print\"Parsepage1\"\n        self.printString('This prints yet self.parse_page2(response) does not print if yield is in scope !!!')\n        self.parse_page2(response)\n\n\n    def printString(self, string):\n        print string\n\n\n    def parse_page2(self, response):\n        print \"Parsing page 2\"\n\n        yield scrapy.Request(\"http://www.google.com\", callback=self.parse_page3) \n\n    def parse_page3(self, response):\n        pass\n</code></pre>\n\n<p>output :</p>\n\n<pre><code>Parsiing page1\nThis prints yet self.parse_page2(response) does not print if yield is in its scope !!!\n</code></pre>\n\n<p>As opposed to:</p>\n\n<pre><code># Yield commented out; \"Parsing page 2\" does print\nimport scrapy\n\n\nclass GetInfSpider(scrapy.Spider):\n    name = \"get_inf\"\n    # allowed_domains = [\"example.com\n    def start_requests(self):\n        yield scrapy.Request(\"http://www.apple.com\", callback=self.parse_page1)\n\n\n    def parse_page1(self, response):\n        print\"Parsiing page1\"\n        self.printString('This prints yet self.parse_page2(response) does not print if yield is in its scope !!!', response )\n        self.parse_page2(response)\n\n\n    def printString(self, string, response):\n        print string\n\n\n    def parse_page2(self, response):\n        print \"Parsing page 2\"\n\n        #yield scrapy.Request(\"http://www.google.com\", callback=self.parse_page3) \n\n    def parse_page3(self, response):\n        pass\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>Parsiing page1\nThis prints yet self.parse_page2(response) does not print if yield is in its scope !!!\nParsing page 2\n</code></pre>\n"}, {"tags": ["python", "regex", "django"], "answers": [{"comments": [{"owner": {"reputation": 1668, "user_id": 6034955, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cd88d2a52c87063ffe42204d769c93ce?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/6034955/rob"}, "edited": false, "score": 0, "creation_date": 1465421770, "post_id": 37712051, "comment_id": 62900281, "body": "If not using raw strings were the issue, it would seem my other expressions should break as they are formatted exactly the same.  But, I&#39;ve got no other leads so I&#39;ll give it a shot. Thanks for the convention tips...I&#39;ll note them for the future, but this is a SU only tool, so I don&#39;t need to catch the 400&#39;s elegantly. I&#39;ll give this a shot this evening (Like I said, I have to test it on live server) and if it works, i&#39;ll accept."}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "reply_to_user": {"reputation": 1668, "user_id": 6034955, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cd88d2a52c87063ffe42204d769c93ce?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/6034955/rob"}, "edited": false, "score": 0, "creation_date": 1465422898, "post_id": 37712051, "comment_id": 62900769, "body": "I&#39;m not exactly sure what triggers the exception, since you haven&#39;t included a traceback. But the exception comes from django, not from <code>re</code>. It might be because of the final <code>?</code>, which I can&#39;t see any use for anyway."}, {"owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "reply_to_user": {"reputation": 1668, "user_id": 6034955, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cd88d2a52c87063ffe42204d769c93ce?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/6034955/rob"}, "edited": false, "score": 1, "creation_date": 1465424014, "post_id": 37712051, "comment_id": 62901250, "body": "It turns out I was wrong about this being a django error. The root cause seems to be a bug in <code>re</code> that has been fixed in current versions of python. <a href=\"http://stackoverflow.com/questions/3675144/regex-error-nothing-to-repeat\" title=\"regex error nothing to repeat\">stackoverflow.com/questions/3675144/&hellip;</a>"}, {"owner": {"reputation": 1668, "user_id": 6034955, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cd88d2a52c87063ffe42204d769c93ce?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/6034955/rob"}, "edited": false, "score": 0, "creation_date": 1465478542, "post_id": 37712051, "comment_id": 62925769, "body": "I&#39;m going to attempt a more verbose expression to try to get around this bug, something like [A-Za-z0-9_.]*   . Thanks again for finding that bug link, I was totally lost."}], "tags": [], "owner": {"reputation": 17922, "user_id": 1977847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2zWQh.png?s=128&g=1", "display_name": "H&#229;ken Lid", "link": "https://stackoverflow.com/users/1977847/h%c3%a5ken-lid"}, "is_accepted": true, "score": 0, "last_activity_date": 1465416766, "creation_date": 1465416766, "answer_id": 37712051, "question_id": 37711337, "link": "https://stackoverflow.com/questions/37711337/django-domain-regex-parameter-not-working-on-production-machine/37712051#37712051", "title": "Django domain + regex parameter not working on production machine", "body": "<p>I would change it to this:</p>\n\n<pre><code>SEARCH_REGEX = r'(?P&lt;pdom&gt;.+)$' \n</code></pre>\n\n<p>It's usually a good idea to use raw strings <code>r''</code> for regular expressions in python.</p>\n\n<p>The group will match the entire content of the search part of your url. I would handle query string validation in the view, instead of in the url regex. If someone tries to search <code>polls/search/two+words</code>, you should not return a 404, but instead a 400 status and a error message explaining that the search string was malformed.</p>\n\n<p>Finally, you might want to follow the common convention for search urls. Which is to use a query parameter called <code>q</code>. So your url-pattern would be <code>^polls/search/$</code>, and then you just handle the <code>q</code> in the view using something like this:</p>\n\n<pre><code>def search_page_view(request):\n\n    query_string = request.GET.get('q', '')\n</code></pre>\n"}], "owner": {"reputation": 1668, "user_id": 6034955, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/cd88d2a52c87063ffe42204d769c93ce?s=128&d=identicon&r=PG&f=1", "display_name": "rob", "link": "https://stackoverflow.com/users/6034955/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 37712051, "answer_count": 1, "score": 1, "last_activity_date": 1465416766, "creation_date": 1465414306, "question_id": 37711337, "link": "https://stackoverflow.com/questions/37711337/django-domain-regex-parameter-not-working-on-production-machine", "title": "Django domain + regex parameter not working on production machine", "body": "<p>I currently have a django view with a fairly simple search function (takes user input, returns a list of objects). For usability, I'd like the option of passing search paramters via url like so:</p>\n\n<p>www.example.com/search/mysearchstring </p>\n\n<p>Where mysearchstring is the input to the search function. I'm using regex to validate any alphanumeric or underscore characters. </p>\n\n<p><strong>The problem I'm having is that while this works perfectly in my development environment, it breaks on the live machine.</strong> </p>\n\n<p>Currently, I am using this exact same method (with different regex patterns) in other django views without any issues. This leads me to believe that either. </p>\n\n<p>1) My regex is truly bad (more likely)</p>\n\n<p>2) There is a difference in regex validators between environments (less likely)</p>\n\n<p>The machine running this is using django 1.6 and python 2.7, which are slightly behind my development machine, but not significantly. </p>\n\n<p>urls.py</p>\n\n<pre><code>SEARCH_REGEX = '(?P&lt;pdom&gt;\\w*)?' \nurlpatterns = patterns('',\n....\nurl(r'^polls/search/' + SEARCH_REGEX,  'polls.views.search'),\n...)\n</code></pre>\n\n<p>Which are passed to the view like this\nviews. py</p>\n\n<pre><code>def search(request, pdom):\n...\n</code></pre>\n\n<p>When loading up the page, I get the following error:</p>\n\n<pre><code>ImproperlyConfigured: \"^polls/search/(?P&lt;pdom&gt;\\w*)?\" is not a valid regular expression: nothing to repeat\n</code></pre>\n\n<p>I've been scratching my head over this one for a while. I've attempted to use a few different methods of encapsulation around the expression with no change in results. Would appreciate any insight! </p>\n"}, {"tags": ["python", "scale", "logarithm", "natural-logarithm"], "comments": [{"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 2, "creation_date": 1465414796, "post_id": 37711238, "comment_id": 62896705, "body": "Since the distance from 10 to 20 is the same as the distance from 20 to 40, I&#39;m going to hazard a guess of Log 2."}, {"owner": {"reputation": 466742, "user_id": 224671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c90de868a7e95d75bdfd6a906dfedac7?s=128&d=identicon&r=PG", "display_name": "kennytm", "link": "https://stackoverflow.com/users/224671/kennytm"}, "edited": false, "score": 3, "creation_date": 1465418171, "post_id": 37711238, "comment_id": 62898571, "body": "Since log_n(a) = log(a) / log(n), the base doesn&#39;t matter."}], "answers": [{"tags": [], "owner": {"reputation": 11277, "user_id": 3657941, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/304d8d4cceca5f9ce2383ff97b53e36b?s=128&d=identicon&r=PG&f=1", "display_name": "David Cullen", "link": "https://stackoverflow.com/users/3657941/david-cullen"}, "is_accepted": true, "score": 2, "last_activity_date": 1465422371, "last_edit_date": 1465422371, "creation_date": 1465418696, "answer_id": 37712585, "question_id": 37711238, "link": "https://stackoverflow.com/questions/37711238/calculate-values-in-logarithmic-scale/37712585#37712585", "title": "Calculate values in logarithmic scale", "body": "<p>Assuming you want a height in pixels of 500, you can use this to get the intervals:</p>\n\n<pre><code>import math\npixels = 500\noffset = math.log(10)\nfor x in range(10, 71, 10):\n    print x, int(pixels * (math.log(x) - offset) / (math.log(70) - offset))\n</code></pre>\n\n<p>This is the output:</p>\n\n<pre><code>10 0\n20 178\n30 282\n40 356\n50 413\n60 460\n70 500\n</code></pre>\n\n<p>The pixel counts are just the differences between the start and end of each interval. Change 500 to fit your application.</p>\n"}], "owner": {"reputation": 2449, "user_id": 1471681, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/BNxc8.jpg?s=128&g=1", "display_name": "khex", "link": "https://stackoverflow.com/users/1471681/khex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2498, "favorite_count": 0, "accepted_answer_id": 37712585, "answer_count": 1, "score": 3, "last_activity_date": 1465422371, "creation_date": 1465414052, "question_id": 37711238, "link": "https://stackoverflow.com/questions/37711238/calculate-values-in-logarithmic-scale", "title": "Calculate values in logarithmic scale", "body": "<p>I want to redraw this <code>Body Weight</code> scale in bitmap editor pixel by pixel. As I understood this is a logarithmic scale, but what is the logarithm - binary or decimal?</p>\n\n<p>How to calculate distance between lines in pixels. Maybe it's better to count from 1 to 70 and than reverse it.</p>\n\n<pre><code>values = []\nfor kilos, value in enumerate(range(1, 71)):\n    //  some logic\n    values.append([kilos, pixels])\nreverse(values)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/COFul.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/COFul.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "excel", "xlrd"], "comments": [{"owner": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 1, "creation_date": 1465414654, "post_id": 37711235, "comment_id": 62896632, "body": "How is your question connect with its title?  (you can&#39;t have variable keys, by the way)."}, {"owner": {"reputation": 171, "user_id": 2486230, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/jikJB.png?s=128&g=1", "display_name": "FelixTheNub", "link": "https://stackoverflow.com/users/2486230/felixthenub"}, "reply_to_user": {"reputation": 37256, "user_id": 736308, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/o5EqQ.jpg?s=128&g=1", "display_name": "cdarke", "link": "https://stackoverflow.com/users/736308/cdarke"}, "edited": false, "score": 0, "creation_date": 1465415266, "post_id": 37711235, "comment_id": 62896959, "body": "Sorry about that. I was going to ask a question before about a separate topic. Stack overflow saved it, and I overlooked it. It&#39;s changed now."}, {"owner": {"reputation": 4475, "user_id": 3846228, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/j0fFT.jpg?s=128&g=1", "display_name": "dot.Py", "link": "https://stackoverflow.com/users/3846228/dot-py"}, "edited": false, "score": 1, "creation_date": 1465415790, "post_id": 37711235, "comment_id": 62897246, "body": "take a look at pyAutoIt  ( <a href=\"https://pypi.python.org/pypi/PyAutoIt/0.3\" rel=\"nofollow noreferrer\">pypi.python.org/pypi/PyAutoIt/0.3</a> )"}, {"owner": {"reputation": 4475, "user_id": 3846228, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/j0fFT.jpg?s=128&g=1", "display_name": "dot.Py", "link": "https://stackoverflow.com/users/3846228/dot-py"}, "edited": false, "score": 1, "creation_date": 1465415846, "post_id": 37711235, "comment_id": 62897287, "body": "this may be useful too: <a href=\"http://seleniumsimplified.com/2016/01/can-i-use-selenium-webdriver-to-automate-a-windows-desktop-application/\" rel=\"nofollow noreferrer\">seleniumsimplified.com/2016/01/&hellip;</a>"}, {"owner": {"reputation": 171, "user_id": 2486230, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/jikJB.png?s=128&g=1", "display_name": "FelixTheNub", "link": "https://stackoverflow.com/users/2486230/felixthenub"}, "edited": false, "score": 0, "creation_date": 1465416040, "post_id": 37711235, "comment_id": 62897400, "body": "Thank you very much Dot_Py. I will check those out now."}, {"owner": {"reputation": 11978, "user_id": 774651, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d174682a9c2469488ac0cd91f0253215?s=128&d=identicon&r=PG&f=1", "display_name": "Lol4t0", "link": "https://stackoverflow.com/users/774651/lol4t0"}, "edited": false, "score": 2, "creation_date": 1465416107, "post_id": 37711235, "comment_id": 62897443, "body": "See this answer: <a href=\"http://stackoverflow.com/a/1067842/774651\">stackoverflow.com/a/1067842/774651</a>"}, {"owner": {"reputation": 171, "user_id": 2486230, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/jikJB.png?s=128&g=1", "display_name": "FelixTheNub", "link": "https://stackoverflow.com/users/2486230/felixthenub"}, "edited": false, "score": 0, "creation_date": 1465416699, "post_id": 37711235, "comment_id": 62897796, "body": "Thank you Lol4t0! That looks like exactly what I was imagining."}, {"owner": {"reputation": 171, "user_id": 2486230, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/jikJB.png?s=128&g=1", "display_name": "FelixTheNub", "link": "https://stackoverflow.com/users/2486230/felixthenub"}, "edited": false, "score": 0, "creation_date": 1465925798, "post_id": 37711235, "comment_id": 63101515, "body": "I tried a few things, but pywin32 seems to be the most promising. I edited my original post to reflect my progress."}, {"owner": {"reputation": 801, "user_id": 2752305, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/1652120747/picture?type=large", "display_name": "pekapa", "link": "https://stackoverflow.com/users/2752305/pekapa"}, "edited": false, "score": 0, "creation_date": 1465926965, "post_id": 37711235, "comment_id": 63102186, "body": "Seems like you have no cell selected, so sending a key is sending it somewhere else... try: <code>wb.Cells(1,1).Value = &quot;1&quot;</code> (<a href=\"http://pythonexcels.com/python-excel-mini-cookbook/\" rel=\"nofollow noreferrer\">source</a>)"}, {"owner": {"reputation": 171, "user_id": 2486230, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/jikJB.png?s=128&g=1", "display_name": "FelixTheNub", "link": "https://stackoverflow.com/users/2486230/felixthenub"}, "edited": false, "score": 0, "creation_date": 1465927742, "post_id": 37711235, "comment_id": 63102634, "body": "Thanks for your time pekapa. I&#39;m actually not interested in placing a value into a cell. When I start the macro, a new textbox window appears, and that is where I&#39;d like to pass some keyboard inputs."}], "owner": {"reputation": 171, "user_id": 2486230, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/jikJB.png?s=128&g=1", "display_name": "FelixTheNub", "link": "https://stackoverflow.com/users/2486230/felixthenub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 504, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1465925642, "creation_date": 1465414025, "last_edit_date": 1465925642, "question_id": 37711235, "link": "https://stackoverflow.com/questions/37711235/python-script-for-pasting-values-into-xls", "title": "Python script for pasting values into .xls", "body": "<p>I am creating a Python script to paste values pulled from another file into an Excel template.</p>\n\n<p>The Excel template contains many macros that process the data it is given. This data is then sent to the clipboard, and the unsaved Excel file is then closed.</p>\n\n<p>I have used a combo of xlwt and xlrd (it's a .xls file) to try and write to the Excel file, but it seems that these commands access the file without explicitly opening it (the Excel file never comes on screen).</p>\n\n<p>I was curious if anyone could point me in the right direction of some tools that would allow me to explicitly open an Excel file (e.g. subprocess.call()), paste the data into some cells, then let the user do the rest.</p>\n\n<p>Any help or criticism is appreciated.</p>\n\n<p>EDIT:\nI have been trying to use pywin32 for my purposes. It's not quite working. While it can successfully open the Excel file and run the macro, it cannot pass any values into the textbox of the macro.</p>\n\n<p>Here is my current code:</p>\n\n<pre><code>import win32com.client as win32\nimport time\n\nexcel = win32.gencache.EnsureDispatch('Excel.Application')\nwb = excel.Workbooks.Open(r'C:\\Users\\me\\Desktop\\file.xlsm')\nexcel.Visible = True\n\n#if I run wb.Application.SendKeys(1) here, it places a 1 into a cell on the worksheet\n\nwb.Application.Run('Set_Up_Sheet') #running the macro, which successfully launches\ntime.sleep(2)\nwb.Application.SendKeys(1) #this seems to have no effect\n</code></pre>\n\n<p>How can I send values to this macro's textbox?</p>\n"}, {"tags": ["python", "json", "shell", "subprocess"], "comments": [{"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1465415140, "post_id": 37711231, "comment_id": 62896873, "body": "By &quot;nested JSON,&quot; do you mean nested <i>objects</i> or that the JSON output contains string values that are themselves JSONified data?"}, {"owner": {"reputation": 5045, "user_id": 3469521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b1ea16472234c4b480dd7d5e9a2c4b9c?s=128&d=identicon&r=PG&f=1", "display_name": "activelearner", "link": "https://stackoverflow.com/users/3469521/activelearner"}, "reply_to_user": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1465415580, "post_id": 37711231, "comment_id": 62897129, "body": "I meant nested objects. Example - <a href=\"https://www.google.com/search?q=nested+json+example&amp;biw=1920&amp;bih=1008&amp;source=lnms&amp;tbm=isch&amp;sa=X&amp;ved=0ahUKEwjlv4qlmpnNAhVaVWMKHfmnDQUQ_AUIBygC#imgrc=VPxuEKMtHzOH8M%3A\" rel=\"nofollow noreferrer\">google.com/&hellip;</a>"}, {"owner": {"reputation": 795, "user_id": 5589510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1daa57cb89948693e40c89c22f57750?s=128&d=identicon&r=PG&f=1", "display_name": "leongold", "link": "https://stackoverflow.com/users/5589510/leongold"}, "edited": false, "score": 0, "creation_date": 1465416312, "post_id": 37711231, "comment_id": 62897564, "body": "I suggest you print the contents of &#39;statistics&#39;, for example. You&#39;re receiving a KeyError, that indicates the json unpacks well (nested json -&gt; nested dict), but something else goes amiss."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1465587382, "post_id": 37711231, "comment_id": 62981333, "body": "Do you see <code>{&quot;statistics&quot;: {&quot;AmountBille&quot;: &quot;...&quot;}}</code> in <code>print(data)</code>? Unrelated: for compatibility with Python 3, pass <code>universal_newlines=True</code>."}], "owner": {"reputation": 5045, "user_id": 3469521, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b1ea16472234c4b480dd7d5e9a2c4b9c?s=128&d=identicon&r=PG&f=1", "display_name": "activelearner", "link": "https://stackoverflow.com/users/3469521/activelearner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1230, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1465414004, "creation_date": 1465414004, "question_id": 37711231, "link": "https://stackoverflow.com/questions/37711231/python-how-to-save-json-data-output-from-a-shell-command-using-subprocess", "title": "Python - How to save json data output from a shell command using subprocess?", "body": "<p>I have a shell command which produces a <strong>nested json</strong> response when run as a normal shell command.</p>\n\n<p>However, I am now trying to run this command via Python. While doing so, I used the subprocess.checkoutput function as follows:</p>\n\n<pre><code>my_command = 'xyz show --format=json -j jobid'\ndata = subprocess.check_output(my_command, shell=True)\n</code></pre>\n\n<p>Realizing that 'data' was storing a string, I then executed this command:</p>\n\n<pre><code>data_as_json = json.loads(data)\n</code></pre>\n\n<p>When I try to retrieve value for a non-nested key in data_as_json, it works. However, when I try to do the same for a nested key, I am getting a key error as below:</p>\n\n<pre><code>billed = data_as_json['statistics']['AmountBilled']\nKeyError: 'AmountBilled'\n</code></pre>\n\n<p>How can I overcome this problem? Thanks in advance!</p>\n"}, {"tags": ["python", "directory"], "answers": [{"comments": [{"owner": {"reputation": 2531, "user_id": 3696619, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LueSz.jpg?s=128&g=1", "display_name": "Jay Bosamiya", "link": "https://stackoverflow.com/users/3696619/jay-bosamiya"}, "edited": false, "score": 0, "creation_date": 1465483046, "post_id": 37711429, "comment_id": 62929292, "body": "Thanks a lot :) Well, this was a one-off thing (in the current scenario) and I felt it was a common pattern for a lot of people, which is why I asked in the first place. However, the fact that I could use a Context Manager helps me out a lot in the long run."}], "tags": [], "owner": {"reputation": 21338, "user_id": 145279, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/r9KgA.jpg?s=128&g=1", "display_name": "Will", "link": "https://stackoverflow.com/users/145279/will"}, "is_accepted": true, "score": 2, "last_activity_date": 1465414563, "creation_date": 1465414563, "answer_id": 37711429, "question_id": 37711216, "link": "https://stackoverflow.com/questions/37711216/recursively-create-directories-prior-to-opening-file-for-writing/37711429#37711429", "title": "Recursively create directories prior to opening file for writing", "body": "<p>If you're repeating this pattern in multiple places, you could create your own Context Manager that extends <code>open()</code> and overloads <code>__enter__()</code>:</p>\n\n<pre><code>import os\n\nclass OpenCreateDirs(open):\n    def __enter__(self, filename, *args, **kwargs):\n        file_dir = os.path.dirname(filename)\n        if not os.path.exists(file_dir):\n            os.makedirs(file_dir)\n\n        super(OpenCreateDirs, self).__enter__(filename, *args, **kwargs)\n</code></pre>\n\n<p>Then your code becomes:</p>\n\n<pre><code>import os\n\nconfig_value = 'Foo=Bar'  # Temporary placeholder\nconfig_file_path = os.path.join('/tmp/a/b/c', 'config')\n\nwith OpenCreateDirs(config_file_path, 'w') as f:\n    f.write(config_value)\n</code></pre>\n\n<p>The first method to be called when you run <code>with open(...) as f:</code> is <code>open.__enter__()</code>. So by creating directories before calling <code>super(...).__enter__()</code>, you create the directories before attempting to open the file.</p>\n"}], "owner": {"reputation": 2531, "user_id": 3696619, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LueSz.jpg?s=128&g=1", "display_name": "Jay Bosamiya", "link": "https://stackoverflow.com/users/3696619/jay-bosamiya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 37711429, "answer_count": 1, "score": 4, "last_activity_date": 1465414563, "creation_date": 1465413937, "question_id": 37711216, "link": "https://stackoverflow.com/questions/37711216/recursively-create-directories-prior-to-opening-file-for-writing", "title": "Recursively create directories prior to opening file for writing", "body": "<p>I need to write to a file (truncating) and the path it is on itself might not exist). For example, I want to write to <code>/tmp/a/b/c/config</code>, but <code>/tmp/a</code> itself might not exist. Then, <code>open('/tmp/a/b/c/config', 'w')</code> would not work, obviously, since it doesn't make the necessary directories. However, I can work with the following code:</p>\n\n<pre><code>import os\n\nconfig_value = 'Foo=Bar'  # Temporary placeholder\n\nconfig_dir = '/tmp/a/b/c'  # Temporary placeholder\nconfig_file_path = os.path.join(config_dir, 'config')\n\nif not os.path.exists(config_dir):\n    os.makedirs(config_dir)\n\nwith open(config_file_path, 'w') as f:\n    f.write(config_value)\n</code></pre>\n\n<p>Is there a more Pythonic way to do this? Both Python 2.x and Python 3.x would be nice to know (even though I use 2.x in my code, due to dependency reasons).</p>\n"}, {"tags": ["c#", "python"], "comments": [{"owner": {"reputation": 41, "user_id": 3752779, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/80b6d35e31dfd3ac4085bf7bec2bd347?s=128&d=identicon&r=PG&f=1", "display_name": "user3752779", "link": "https://stackoverflow.com/users/3752779/user3752779"}, "edited": false, "score": 0, "creation_date": 1465413277, "post_id": 37710998, "comment_id": 62895914, "body": "or this: <a href=\"http://bet.hkjc.com/racing/pages/odds_wp.aspx?date=09-06-2016&amp;venue=HV&amp;lang=en\" rel=\"nofollow noreferrer\">bet.hkjc.com/racing/pages/&hellip;</a>"}, {"owner": {"reputation": 673, "user_id": 6392827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/451f9508333b122e58a7b27a6ec84ec3?s=128&d=identicon&r=PG&f=1", "display_name": "Peter4499", "link": "https://stackoverflow.com/users/6392827/peter4499"}, "edited": false, "score": 0, "creation_date": 1465414504, "post_id": 37710998, "comment_id": 62896553, "body": "Please show the same effort in writing your question that you&#39;d expect someone to put in answering the question. Maybe some code of how you&#39;re &quot;downloading&quot; the page. Example of the strange characters and so on."}, {"owner": {"reputation": 673, "user_id": 6392827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/451f9508333b122e58a7b27a6ec84ec3?s=128&d=identicon&r=PG&f=1", "display_name": "Peter4499", "link": "https://stackoverflow.com/users/6392827/peter4499"}, "edited": false, "score": 0, "creation_date": 1465415591, "post_id": 37710998, "comment_id": 62897140, "body": "That&#39;s definitely not UTF8 - the site looks to be Chinese and UTF8 doesn&#39;t support it.Propably Unicode should work for you"}, {"owner": {"reputation": 41, "user_id": 3752779, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/80b6d35e31dfd3ac4085bf7bec2bd347?s=128&d=identicon&r=PG&f=1", "display_name": "user3752779", "link": "https://stackoverflow.com/users/3752779/user3752779"}, "reply_to_user": {"reputation": 673, "user_id": 6392827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/451f9508333b122e58a7b27a6ec84ec3?s=128&d=identicon&r=PG&f=1", "display_name": "Peter4499", "link": "https://stackoverflow.com/users/6392827/peter4499"}, "edited": false, "score": 0, "creation_date": 1465415916, "post_id": 37710998, "comment_id": 62897323, "body": "I have tried that as well.. text just gets converted to unciode text but still not human readable"}, {"owner": {"reputation": 37744, "user_id": 578411, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qj33e.png?s=128&g=1", "display_name": "rene", "link": "https://stackoverflow.com/users/578411/rene"}, "reply_to_user": {"reputation": 673, "user_id": 6392827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/451f9508333b122e58a7b27a6ec84ec3?s=128&d=identicon&r=PG&f=1", "display_name": "Peter4499", "link": "https://stackoverflow.com/users/6392827/peter4499"}, "edited": false, "score": 0, "creation_date": 1467188636, "post_id": 37710998, "comment_id": 63623242, "body": "@Peter4499 <a href=\"https://en.wikipedia.org/wiki/UTF-8\" rel=\"nofollow noreferrer\">UTF-8</a> is an encoding to support all characters of Unicode which includes Chinese characters. The stream was compressed, it was not related to encoding."}], "answers": [{"tags": [], "owner": {"reputation": 37744, "user_id": 578411, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/qj33e.png?s=128&g=1", "display_name": "rene", "link": "https://stackoverflow.com/users/578411/rene"}, "is_accepted": false, "score": 1, "last_activity_date": 1467188181, "creation_date": 1467188181, "answer_id": 38093984, "question_id": 37710998, "link": "https://stackoverflow.com/questions/37710998/c-webclient-strange-characters/38093984#38093984", "title": "C# WebClient Strange Characters", "body": "<p>You're looking at a compressed byte stream. You can tell by inspecting the headers of the http response, for example with <a href=\"https://curl.haxx.se/\" rel=\"nofollow\">curl</a>:</p>\n\n<p><code>curl -X HEAD -i http://bet.hkjc.com/</code></p>\n\n<p>but the Developer Console of your browser will reveal the same:</p>\n\n<blockquote>\n<pre><code>HTTP/1.1 200 OK\nCache-Control: public, max-age=120, must-revalidate\nContent-Length: 3615\nContent-Type: text/html; charset=utf-8\nContent-Encoding: gzip\nExpires: Wed, 29 Jun 2016 08:01:06 GMT\nVary: Accept-Encoding\nServer: Microsoft-IIS/7.0\nX-AspNet-Version: 2.0.50727\nX-Powered-By: ASP.NET\nDate: Wed, 29 Jun 2016 08:00:14 GMT\nVia: 1.1 stjbwbwa52\nAccept-Ranges: bytes\n</code></pre>\n</blockquote>\n\n<p>Notice the <code>Content-Encoding:</code> to say <em>gzip</em>. This means the result you just got is compressed with the gzip algorithm. The standard WebClient can't handle that but with an simple subclass the WebClient can do new tricks:</p>\n\n<pre><code>public class DecompressWebClient:WebClient\n{\n    // moved common logic here\n    public DecompressWebClient()\n    {\n        this.Encoding = Encoding.UTF8;\n    }\n\n    // This is the factory to create the webrequest\n    protected override WebRequest GetWebRequest(Uri address)\n    {\n        // get the default one\n        var request = base.GetWebRequest(address);\n        // see if it is a HttpWebRequest\n        var httpReq = request as HttpWebRequest;\n        if (httpReq != null)\n        {\n            // add extra capabilities, like decompression\n            httpReq.AutomaticDecompression =  DecompressionMethods.GZip;\n        }\n        return request;\n    }\n}\n</code></pre>\n\n<p>On the <code>HttpWebRequest</code> there exists a property <a href=\"https://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.automaticdecompression(v=vs.110).aspx\" rel=\"nofollow\"><code>AutomaticDecompression</code></a> that, when set to true, will take care of the decompression for us.</p>\n\n<p>When you put the Subclassed WebClient to use your code will look like:</p>\n\n<pre><code>string url = \"http://bet.hkjc.com\";\nusing(WebClient webClient = new DecompressWebClient())\n{\n    string html = webClient.DownloadString(url);\n    File.WriteAllText(\"page.html\", html);\n}\n</code></pre>\n\n<p>The encoding UTF8 is correct, as you can also see in the header for the <code>Content-Type</code> setting.</p>\n\n<p>The top of the html file will look like this:</p>\n\n<blockquote>\n<pre><code>&lt;html&gt;\n&lt;head&gt;\n  &lt;meta http-equiv=\"X-UA-Compatible\" content=\"IE=EmulateIE7; IE=EmulateIE10\"/&gt;\n  &lt;meta name=\"application-name\" content=\"\u9999\u6e2f\u8cfd\u99ac\u6703\"/&gt;\n  &lt;title&gt;\u9999\u6e2f\u8cfd\u99ac\u6703&lt;/title&gt;\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 41, "user_id": 3752779, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/80b6d35e31dfd3ac4085bf7bec2bd347?s=128&d=identicon&r=PG&f=1", "display_name": "user3752779", "link": "https://stackoverflow.com/users/3752779/user3752779"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 431, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1467188223, "creation_date": 1465413199, "last_edit_date": 1467188223, "question_id": 37710998, "link": "https://stackoverflow.com/questions/37710998/c-webclient-strange-characters", "title": "C# WebClient Strange Characters", "body": "<p>I am trying to download this webpage  using C# WebClient..\nNow it works perfectly with python urllib2 but with c# web client it gives these strange characters in the output file.. </p>\n\n<p>I have tried using Encoding with webclient class as well but it doesn't work at all..</p>\n\n<pre><code>public static string GetWebURL()\n    {\n        string url = \"http://bet.hkjc.com\";\n        WebClient webClient = new WebClient();\n        webClient.Encoding = Encoding.UTF8;\n        string html = webClient.DownloadString(url);\n        File.WriteAllText(\"page.html\", html);\n    }\n</code></pre>\n\n<p>this is the output with those strange characters</p>\n\n<pre><code>\u00e2\u20ac\u00b9\u00c3\u00a2\u00c3\u00a5\u00c2\u00b2Qt\u00c3\u00b1w\u00e2\u20ac\u00b0pU\u00c3\u00b0\u00c3\u00b1\u00c3\u00b5Qu\u00c3\u00b2\u00c3\u00b1tVP\u00c3\u2019\u00c3\u2022\u00c3\u20147v\u00c3\u2013\u00c3\u2014w q\u00c2H\u00cb\u0153\u00c3\u00a8*\u00e2\u20ac\u017e%\u00c3\u00a6g\u00e2\u20ac\u201cd\u00c3\u00a6\u00c3\u00a7%\u00c3\u00a6\u00c3\u00a8\u00c3\u00ab\u00c2\u00bb\u00c3\u00ba)\u00c3\u2122\u00c3\u00b1r\u00c2(N.\u00c3\u0160,(Q(\u00c2\u00a9,H\u00c2\u00b5U*I\u00c2\u00ad(\u00c3\u2018\u00c3J,K\u00e2\u20ac\u017e\u00cb\u2020*\u00c3\u2122q)((\u00e2\u20acU*T\u00c6\u2019e\u00e2\u20ac\u00b0E \u00c2\u00a9y\u00e2\u20ac\u00b0I9\u00c2\u00a9\u00c5\u00bd\u00c3\u2030\u00c3\u2030\u00c2\u00a9\u00c3\u2026\u00c3\u2026\u00c3\u017d\u00c3\u00b9y%E\u00c3\u00b99 \u00c2\u00b6i\u00e2\u20ac\u00b09\u00c3\u2026\u00c2\u00a9\u00c3\u2013 %\u00e2\u201e\u00a2i X\u00e2\u20ach\"(\u00c3\u2030-P\u00c2\u00b0U(\u00c3\u00c3\u0152K\u00c3\u2030/\u00c3\u2014\u00c3\u2039\u00c3\u2030ON\u00c2\u00b9H/\u00c2\u00a3(5M\u00c2\u00af\u00c2\u00b84\u00c2\u00a9\u00c2\u00b8\u00c2\u00a4H\u00c3\u0192\\SlHu\u00c2\u00b0kP\u00cb\u0153kP\u00c2\u00bc\u00c5\u00b8\u00c2\u00a3\u00c2\u00af+PP/L\u00e2\u20ac\u02dc\u00c2\u00cb\u01534&amp;\u00c2\u00b5\u00c3\u201a?MCI_IS\u00c2\u00ae+%?713\u00c3/17\u00c2\u00a8   \u00c3\u2030\u00cb\u0153fd!\u00c2\u00b8   zJ\u00c5\u00a1\u00c3\u0161\u00e2\u20ac P\u00c2\u00abS\u00c3\u00b2\u00e2\u20ac\u0153KsS\u00c3\u00b3J\u00c3\u00b4 &amp;MA  V\u00c2\u00a8\u00c5\u00b8K\u00c3\u00b2\u00c3\u00b4\u00e2\u20ac\u2122RK\u00e2\u20ac\u0161s2\u00c3\u0153\u00c5 \u00e2\u201a\u00ac\u00c2\u00aa\u00c3\u00b42\u00e2\u20ac\u00b9}\u00c3\u00b2\u00c3\u201c\u00c3\u00b3\u00c3\u00b3445\u00c2\u00a1\u00c3\u0160\u00c3=\u00c2\u00adW\u00e2\u20acZ\u00c2\u00e2\u20ac\u0153\u00cb\u0153\u00c5\u201c t|zj^jQbN&lt;\u00c3\u02dc1z\u00e2\u20ac\u00b0\u00c3\u2026\u00c3\u00b69\u00e2\u20ac\u00b0y\u00c3\u00a9\u00c2\u00b6\u00c2\u00a9yJ_\u00c2P-\u00cb\u2020\u00c3\u201d\u00c5\u00a1\u00c5\u201cch\u00cb\u2020e\u00c2\u00a6\u00e2\u20ac\u0161 \u00c2\u00b5\\H&amp;[\u00c3\u2014r\u00c3\u2122\u00c3\u00a8C\u00e2\u20ac\u2122\u00e2\u201a\u00ac0\u00c2J%\u00c3 \u00e2\u20ac\u017e \u00c3\u00b7\u00e2\u20ac\u0161\u00c3\u00bc\u00c3\u00bcP9Ud\u00c2\u00a6M\u00c3\u00c3\u00c3\u201d\u00c3\u0152\u00c3\u02dc\u00c3\u02c6\u00c3\u2013M\u00c3\u2014\u00c3\u00c3\u02c625\u00c2\u00b2 \u00c3\u00b7\u00c3\u00b4\u00c2\u00b3V\u00c2\u00b7\u00e2\u20ac (\u00c3\u017dM-JOM \n</code></pre>\n\n<p>What should I do to see the html that is being send?</p>\n"}]