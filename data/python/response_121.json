[{"tags": ["python", "pandas", "machine-learning"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1493857863, "post_id": 43771851, "comment_id": 74585172, "body": "Can you post the full stack trace?"}, {"owner": {"reputation": 6048, "user_id": 3437504, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/G7yH4.jpg?s=128&g=1", "display_name": "Bob Haffner", "link": "https://stackoverflow.com/users/3437504/bob-haffner"}, "edited": false, "score": 0, "creation_date": 1493859108, "post_id": 43771851, "comment_id": 74585443, "body": "result[1] is the likely culprit as result has only one element"}, {"owner": {"reputation": 81, "user_id": 2557434, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c4d928ab3475f8809cba1e6220043422?s=128&d=identicon&r=PG", "display_name": "user63827", "link": "https://stackoverflow.com/users/2557434/user63827"}, "edited": false, "score": 0, "creation_date": 1494081836, "post_id": 43771851, "comment_id": 74681718, "body": "Correct.It was an issue at my end.Thanks."}], "owner": {"reputation": 81, "user_id": 2557434, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c4d928ab3475f8809cba1e6220043422?s=128&d=identicon&r=PG", "display_name": "user63827", "link": "https://stackoverflow.com/users/2557434/user63827"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493856943, "creation_date": 1493855978, "last_edit_date": 1493856943, "question_id": 43771851, "link": "https://stackoverflow.com/questions/43771851/exposing-ml-model-output-to-rest-api", "title": "Exposing ML model output to rest api", "body": "<p>I have a sample model which takes below features </p>\n\n<pre><code>[\n    data['ApplicantIncome'],\n    data['CoapplicantIncome'],\n    data['LoanAmount'],\n    data['Loan_Amount_Term'],\n    data['Credit_History'],\n    data['gender_Female'],\n    data['marriage_Yes'],\n    data['education_Graduate'],\n    data['employed_Yes'],\n    data['property_Rural'],\n    data['property_Semiurban'],\n    data['property_Urban']\n]\n</code></pre>\n\n<p>and the result </p>\n\n<pre><code>{'Loan_ID': int(result[0]),'Loan_Status': result(result[1]) ]}\n</code></pre>\n\n<p>Using below code but it throws error.</p>\n\n<pre><code>IndexError: index 1 is out of bounds for axis 0 with size 1\n\n\n\nimport numpy as np\n#need to 'conda install flask' for this to work\nfrom flask import Flask, abort, jsonify, request\nimport pickle\n\n\nmy_random_forest = pickle.load(open(\"loan_pred.pkl\", \"rb\"))\n\napp = Flask(__name__)\n\n@app.route('/api', methods=['POST'])\ndef make_predict():\n    #all kinds of error checking should go here\n    data = request.get_json(force=True)\n    #convert our json to a numpy array\n    predict_request = [data['ApplicantIncome'],data['CoapplicantIncome'],data['LoanAmount'], data['Loan_Amount_Term'],data['Credit_History'],data['gender_Female'],data['marriage_Yes'],data['education_Graduate'],data['employed_Yes'],data['property_Rural'],data['property_Semiurban'],data['property_Urban']]\n    predict_request = np.array(predict_request).reshape(1,-1)\n    #np array goes into random forest, prediction comes out\n    result = my_random_forest.predict(predict_request)\n    #return our prediction\n    output = {'Loan_ID': int(result[0]),'Loan_Status': result(result[1]) }\n    print(output)\n    return jsonify(results=output)\n\nif __name__ == '__main__':\n    app.run(port = 9001, debug = True)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "generator", "itertools"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 6791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovr3p.jpg?s=128&g=1", "display_name": "Jesse Feinman", "link": "https://stackoverflow.com/users/6791842/jesse-feinman"}, "edited": false, "score": 1, "creation_date": 1493859718, "post_id": 43771994, "comment_id": 74585578, "body": "Thanks! It seems obvious now that you&#39;ve explained the behavior. Great explanation, by the way."}], "tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": true, "score": 1, "last_activity_date": 1493858570, "last_edit_date": 1493858570, "creation_date": 1493857836, "answer_id": 43771994, "question_id": 43771832, "link": "https://stackoverflow.com/questions/43771832/generator-and-list-return-different-results/43771994#43771994", "title": "Generator and list return different results", "body": "<p>The problem is that the <code>n</code> variable has changed before you actually consume the generators. So when the function returned the list of generators it's at <code>n - 1</code> (the function parameter <code>n</code>). So in your example both generators use the same index: <code>1</code>. To understand what I mean look at this simple example:</p>\n\n<pre><code>&gt;&gt;&gt; list_of_list = [[0, 1]]*20\n&gt;&gt;&gt; index = 1\n&gt;&gt;&gt; gen = (item[index] for item in list_of_list)\n&gt;&gt;&gt; print(next(gen))\n1\n&gt;&gt;&gt; index = 0\n&gt;&gt;&gt; print(next(gen))  # changing index \"changed the generator\"\n0\n</code></pre>\n\n<p>In your case the loop constantly changed <code>n</code> (not manual intervention like in my example) but when the generators are executed it's fixed for all created generators at the same value.</p>\n\n<h3>Solution</h3>\n\n<p>You need to \"fix\" the current value of <code>n</code> in some way for each iteration. One possibility is <code>map</code> with <code>operator.itemgetter</code>:</p>\n\n<pre><code>def split_feat(gen, n):\n    G = tee(gen, n)\n    return [map(itemgetter(n), g) for n, g in enumerate(G)]\n</code></pre>\n\n<p>The <code>itemgetter</code> is immediatly created with the \"current\" <code>n</code> value, so the result will be as expected. </p>\n\n<p>That's not the only ways to achieve the desired result. You could also use a function that creates the generator. The function will \"remember\" the current <code>n</code> (like a closure) and also work like you expect:</p>\n\n<pre><code>def split_feat(gen, n):\n    G = tee(gen, n)\n    def create_generator(it, n):\n        return (item[n] for item in it)\n    return [create_generator(g, n) for n, g in enumerate(G)]\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6791842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ovr3p.jpg?s=128&g=1", "display_name": "Jesse Feinman", "link": "https://stackoverflow.com/users/6791842/jesse-feinman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 1, "accepted_answer_id": 43771994, "answer_count": 1, "score": 1, "last_activity_date": 1493858570, "creation_date": 1493855822, "last_edit_date": 1493857927, "question_id": 43771832, "link": "https://stackoverflow.com/questions/43771832/generator-and-list-return-different-results", "title": "Generator and list return different results", "body": "<p>I'm trying to take in a generator, where each element is a list/tuple/iterable, that have equal length and return a separate generator for each index of the elements.</p>\n\n<p>When I hard code the indexes in <code>split_feat2</code> below it works as expected. However when I use a list comprehension or append to a list and return it produces incorrect results.</p>\n\n<p>I checked my logic and tried returning a list of lists instead of a list of generators by substituting the <code>()</code> for <code>[]</code> in the comprehension and it yielded correct results so I have no idea where the issue is.</p>\n\n<p>Any insight into why it's acting the way it is would be greatly appreciated.</p>\n\n<pre><code>def split_feat2(gen):\n    G = tee(gen, 2)\n    return [(e[0] for e in G[0]), (e[1] for e in G[1])]\n\ndef split_feat(gen, n):\n    G = tee(gen, n)\n    return [(e[n] for e in g) for n, g in enumerate(G)]\n\ndef split_featlist(gen, n):\n    G = tee(gen, n)\n    return [[e[n] for e in g] for n, g in enumerate(G)]\n\ntest = lambda:((i^2,j+i) for i, j in enumerate(range(10)))\n\nprint(\"This is what I want\")\nt = split_feat2(test())\nprint(list(t[0]))\nprint(list(t[1]))\nprint(t)\n\nprint(\"\\nBut I get this output\")\nt = split_feat(test(), 2)\nprint(list(t[0]))\nprint(list(t[1]))\nprint(t)\n\nprint(\"\\nWhen I want this output but from generators instead of lists\")\nt = split_featlist(test(), 2)\nprint(list(t[0]))\nprint(list(t[1]))\nprint(t)\n</code></pre>\n\n<p>The above code outputs the below:</p>\n\n<pre><code>This is what I want\n[2, 3, 0, 1, 6, 7, 4, 5, 10, 11]\n[0, 2, 4, 6, 8, 10, 12, 14, 16, 18]\n[&lt;generator object split_feat2.&lt;locals&gt;.&lt;genexpr&gt; at 0x00000219C794F7D8&gt;, &lt;generator object split_feat2.&lt;locals&gt;.&lt;genexpr&gt; at 0x00000219C794F200&gt;]\n\nBut I get this output\n[0, 2, 4, 6, 8, 10, 12, 14, 16, 18]\n[0, 2, 4, 6, 8, 10, 12, 14, 16, 18]\n[&lt;generator object split_feat.&lt;locals&gt;.&lt;listcomp&gt;.&lt;genexpr&gt; at 0x00000219C791DB48&gt;, &lt;generator object split_feat.&lt;locals&gt;.&lt;listcomp&gt;.&lt;genexpr&gt; at 0x00000219C794F150&gt;]\n\nWhen I want this output but from generators instead of lists\n[2, 3, 0, 1, 6, 7, 4, 5, 10, 11]\n[0, 2, 4, 6, 8, 10, 12, 14, 16, 18]\n[[2, 3, 0, 1, 6, 7, 4, 5, 10, 11], [0, 2, 4, 6, 8, 10, 12, 14, 16, 18]]\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7960295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981df65ff4e51b466ff838be9be1da2e?s=128&d=identicon&r=PG&f=1", "display_name": "RantheMan", "link": "https://stackoverflow.com/users/7960295/rantheman"}, "edited": false, "score": 0, "creation_date": 1493857389, "post_id": 43771815, "comment_id": 74585087, "body": "I tried this before and it didn&#39;t work. Where would I enter this?"}], "tags": [], "owner": {"reputation": 142796, "user_id": 42346, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZikEw.jpg?s=128&g=1", "display_name": "mechanical_meat", "link": "https://stackoverflow.com/users/42346/mechanical-meat"}, "is_accepted": false, "score": 1, "last_activity_date": 1493855725, "creation_date": 1493855725, "answer_id": 43771815, "question_id": 43771794, "link": "https://stackoverflow.com/questions/43771794/keep-running-into-name-not-defined-on-python-3-6/43771815#43771815", "title": "Keep running into name not defined on Python 3.6", "body": "<p>You functions are returning things, use them:</p>\n\n<pre><code>adj = get_adjective()\nnoun = get_noun()\nverb = get_verb()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7960295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981df65ff4e51b466ff838be9be1da2e?s=128&d=identicon&r=PG&f=1", "display_name": "RantheMan", "link": "https://stackoverflow.com/users/7960295/rantheman"}, "edited": false, "score": 0, "creation_date": 1493857363, "post_id": 43771824, "comment_id": 74585081, "body": "I tried your first suggestion and it asked me all of my questions (Please provide...) twice, and the answers I entered the second time worked. Strange."}, {"owner": {"reputation": 11, "user_id": 7960295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981df65ff4e51b466ff838be9be1da2e?s=128&d=identicon&r=PG&f=1", "display_name": "RantheMan", "link": "https://stackoverflow.com/users/7960295/rantheman"}, "edited": false, "score": 0, "creation_date": 1493858098, "post_id": 43771824, "comment_id": 74585201, "body": "I got it! Thank you! On to the next exercise"}], "tags": [], "owner": {"reputation": 38834, "user_id": 3705840, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/a7ybc.png?s=128&g=1", "display_name": "lmiguelvargasf", "link": "https://stackoverflow.com/users/3705840/lmiguelvargasf"}, "is_accepted": true, "score": 1, "last_activity_date": 1493855763, "creation_date": 1493855763, "answer_id": 43771824, "question_id": 43771794, "link": "https://stackoverflow.com/questions/43771794/keep-running-into-name-not-defined-on-python-3-6/43771824#43771824", "title": "Keep running into name not defined on Python 3.6", "body": "<p>The problem is that you are assigning the values you are getting from your frunctions <code>get_adjective()</code>, <code>get_noun()</code>, and <code>get_verb()</code>. You could solve it by:</p>\n\n<pre><code>putting_together(get_adjective(), get_noun(), get_verb())\n</code></pre>\n\n<p>or you can assign each value to a variable as @bernie has said in his answer:</p>\n\n<pre><code>adjective = get_adjective()\nnoun = get_noun()\nverb = get_verb()\n\nputting_together(adjective, noun, verb)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7960295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/981df65ff4e51b466ff838be9be1da2e?s=128&d=identicon&r=PG&f=1", "display_name": "RantheMan", "link": "https://stackoverflow.com/users/7960295/rantheman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 43771824, "answer_count": 2, "score": 0, "last_activity_date": 1493886673, "creation_date": 1493855587, "last_edit_date": 1493886673, "question_id": 43771794, "link": "https://stackoverflow.com/questions/43771794/keep-running-into-name-not-defined-on-python-3-6", "title": "Keep running into name not defined on Python 3.6", "body": "<p>FYI, I am EXTREMELY new to Python and coding in general, I downloaded it a couple days ago and practice an hour or so a day with a tutorial book I purchased on my Kindle.</p>\n\n<p>Now to the problem, I am trying this exercise where I get input from the user and then fill it into a story that I have created. Like a mad lib type thing. Here is the code and below it is the error I get.</p>\n\n<pre><code>print('It was a (adjective) October day. The infamous (noun) was (verb) South to escape the Winter.')\n\ndef get_adjective():\n    \"\"\"getting the adjective\"\"\"\n    adj=input('Please provide an adjective:')\n    return adj\n\ndef get_noun():\n    \"\"\"getting the noun\"\"\"\n    noun=input('Please provide a noun:')\n    return noun\n\ndef get_verb():\n    \"\"\"getting the verb\"\"\"\n    verb=input('Please provide a verb:')\n    return verb\n\nget_adjective()\nget_noun()\nget_verb()\n\ndef putting_together(adj,noun,verb):\n    \"\"\"executing story\"\"\"\n    print('It was a {} October day. The infamous {} was {} South to escape the Winter.'.format(adj,noun,verb))\n\nputting_together(adj,noun,verb)\n</code></pre>\n\n<p>Some of you may already know what is wrong, either way here is the message I get in return when I run it</p>\n\n<pre><code>It was a (adjective) October day. The infamous (noun) was (verb) South to escape the Winter.\n\nPlease provide an adjective:cold\nPlease provide a noun:John\nPlease provide a verb:riding\nTraceback (most recent call last):\n  File \"C:/Python36-32/practice.py\", line 24, in &lt;module&gt;\n    putting_together(adj,noun,verb)\nNameError: name 'adj' is not defined\n</code></pre>\n\n<p>So that's it. Any help is appreciated. I will say though, I am new and am not completely familiar with the language. Dumbing things down would be helpful. Thanks yall. </p>\n"}, {"tags": ["php", "python", "ubuntu"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 2, "creation_date": 1493855510, "post_id": 43771749, "comment_id": 74584857, "body": "im reasonably sure www-data (or whatever user is running the php webserver) would not have permission to access /root folder .... you need to look into linux and permissions ....  ... /root is probably not an appropriate place to store whatever this is"}], "answers": [{"tags": [], "owner": {"reputation": 1540, "user_id": 7741129, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zzKIkC-0i18/AAAAAAAAAAI/AAAAAAAAAEM/SXWRU0buiWg/photo.jpg?sz=128", "display_name": "capcj", "link": "https://stackoverflow.com/users/7741129/capcj"}, "is_accepted": false, "score": 1, "last_activity_date": 1493855785, "creation_date": 1493855785, "answer_id": 43771826, "question_id": 43771749, "link": "https://stackoverflow.com/questions/43771749/if-py-file-exists-in-root/43771826#43771826", "title": "if py file exists in /root", "body": "<p>It's a bad practice to relay on /root folder to exec scripts. Add the fact a PY script called by php!!!!</p>\n\n<p>My tip is to study better <a href=\"https://www.linux.com/learn/understanding-linux-file-permissions\" rel=\"nofollow noreferrer\">the files permissions on linux</a></p>\n\n<p>I suggest create a folder inside your PHP project folder (can call scripts) and run the py script inside it, checking the permission of the folder, if folder exists and that stuff.</p>\n\n<p>The perfect case is: never relay your project into a system structure, it's too risky and too dependable.</p>\n"}], "owner": {"reputation": 41, "user_id": 5146098, "user_type": "registered", "profile_image": "https://graph.facebook.com/946605285382780/picture?type=large", "display_name": "Pete Howell", "link": "https://stackoverflow.com/users/5146098/pete-howell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493855785, "creation_date": 1493855293, "question_id": 43771749, "link": "https://stackoverflow.com/questions/43771749/if-py-file-exists-in-root", "title": "if py file exists in /root", "body": "<p>So I put a python code in my root folder called test.py.  I tried to see if it exists in PHP by running this</p>\n\n<pre><code>$file ='/root/test.py';\necho file_exists($file);\n</code></pre>\n\n<p>The file does in-fact exist, but the echo is always false.</p>\n"}, {"tags": ["python", "django", "python-2.7", "python-3.x", "unicode"], "comments": [{"owner": {"reputation": 3467, "user_id": 171450, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3babaa84012b7ec17726a6d899590b1?s=128&d=identicon&r=PG", "display_name": "Aidan Kane", "link": "https://stackoverflow.com/users/171450/aidan-kane"}, "edited": false, "score": 0, "creation_date": 1493854934, "post_id": 43771668, "comment_id": 74584691, "body": "Not so familiar with django but I would start by looking at what has been inserted into the db."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3475724"}, "reply_to_user": {"reputation": 3467, "user_id": 171450, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3babaa84012b7ec17726a6d899590b1?s=128&d=identicon&r=PG", "display_name": "Aidan Kane", "link": "https://stackoverflow.com/users/171450/aidan-kane"}, "edited": false, "score": 0, "creation_date": 1493855099, "post_id": 43771668, "comment_id": 74584732, "body": "@AidanKane exactly what I printed at the top and the type"}, {"owner": {"reputation": 3467, "user_id": 171450, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3babaa84012b7ec17726a6d899590b1?s=128&d=identicon&r=PG", "display_name": "Aidan Kane", "link": "https://stackoverflow.com/users/171450/aidan-kane"}, "edited": false, "score": 0, "creation_date": 1493855833, "post_id": 43771668, "comment_id": 74584928, "body": "Ah, yes, sorry. Which db are you using? What collation do you have set on the column / table? I&#39;d be trying to log the query that django is running against the db."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3475724"}, "reply_to_user": {"reputation": 3467, "user_id": 171450, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3babaa84012b7ec17726a6d899590b1?s=128&d=identicon&r=PG", "display_name": "Aidan Kane", "link": "https://stackoverflow.com/users/171450/aidan-kane"}, "edited": false, "score": 0, "creation_date": 1493855969, "post_id": 43771668, "comment_id": 74584961, "body": "@AidanKane postgres in production, litesql localt"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3475724"}, "reply_to_user": {"reputation": 3467, "user_id": 171450, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3babaa84012b7ec17726a6d899590b1?s=128&d=identicon&r=PG", "display_name": "Aidan Kane", "link": "https://stackoverflow.com/users/171450/aidan-kane"}, "edited": false, "score": 0, "creation_date": 1493857259, "post_id": 43771668, "comment_id": 74585060, "body": "@Kane actually simple exact filter works"}, {"owner": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1493860369, "post_id": 43771668, "comment_id": 74585718, "body": "you should use the same RDBMS for production and testing. Sqlite and postgres are very very different"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3475724"}, "edited": false, "score": 0, "creation_date": 1493860981, "post_id": 43771668, "comment_id": 74585879, "body": "I know, had some issue with local postgres( two installed, and there is some mess) so I just saved the time to fix crutial bugs"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3475724"}, "reply_to_user": {"reputation": 47988, "user_id": 267540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2v58W.jpg?s=128&g=1", "display_name": "e4c5", "link": "https://stackoverflow.com/users/267540/e4c5"}, "edited": false, "score": 0, "creation_date": 1493861020, "post_id": 43771668, "comment_id": 74585892, "body": "@e4c5 at least here not working behaviour is the same locally and in prod"}], "owner": {"user_type": "does_not_exist", "display_name": "user3475724"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 491, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1493859650, "creation_date": 1493854747, "last_edit_date": 1493859650, "question_id": 43771668, "link": "https://stackoverflow.com/questions/43771668/django-istartswith-doest-work-python-2-7-django-1-8", "title": "Django __istartswith does&#39;t work. Python 2.7, Django 1.8", "body": "<p>I am working with cyrillic text. There is parser written in python2.7 which saves strings from another site into database, which are saved as unicode to database <code>[u'\\u041a\\u043e\\u043d\\u0446\\u0435\\u0440\\u0442\\u044b']</code></p>\n\n<p>type:</p>\n\n<pre><code>&lt;type 'lxml.etree._ElementUnicodeResult'&gt;\n</code></pre>\n\n<p>In templates it's shown as normal text (russian this case), but search  doesn't work. In this case using django filters(any)(and the relevant data is present)do not return by the normal key? Is it correct behaviour? What is the right solution? </p>\n\n<p>Tired cyrillic letter, and the must be results by this search. The type of string is unicode, but find nothing among many result starting with the following letter, so something is wrong, but I can't understand why. And at the same time english search keys give relevant search result to english words, while russian do not.</p>\n\n<pre><code> var = u'\u0431'\n print(type(var))\n result = Event.objects.filter(title__istartswith= var)\n</code></pre>\n\n<p>EDIT:  actually simple exact filter works , but anything complex doesn't</p>\n\n<p>EDIT: and title__contains also works. so I'll better rename the questions not to get beaten. but behaviour is pretty strange, sometimes it doesn't show anything thought exact same title is the key. why? and still in face I need start with functionality which doesn't work</p>\n"}, {"tags": ["python", "python-2.7", "pandas"], "comments": [{"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 9, "creation_date": 1493854816, "post_id": 43771654, "comment_id": 74584657, "body": "<code>print Trades.columns</code> and report back what is printed out."}, {"owner": {"reputation": 285, "user_id": 2868299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/31abd6c60306a9df9cddf151a74ea805?s=128&d=identicon&r=PG&f=1", "display_name": "DixieFlatline", "link": "https://stackoverflow.com/users/2868299/dixieflatline"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1493854957, "post_id": 43771654, "comment_id": 74584702, "body": "@piRSquared TRADE DATE,ACCOUNT,COMPANY,COST CENTER,CURRENCY"}, {"owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 1, "creation_date": 1493855019, "post_id": 43771654, "comment_id": 74584713, "body": "Are there extraneous characters in any of the column names? Like <code>TRADE DATE </code>?"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1493855046, "post_id": 43771654, "comment_id": 74584719, "body": "That&#39;s not how its presented.  It looks like <code>Index([&#39;co&#39;], dtype=&#39;object&#39;)</code>.  Please copy and paste the output form that print statement"}, {"owner": {"reputation": 285, "user_id": 2868299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/31abd6c60306a9df9cddf151a74ea805?s=128&d=identicon&r=PG&f=1", "display_name": "DixieFlatline", "link": "https://stackoverflow.com/users/2868299/dixieflatline"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1493855305, "post_id": 43771654, "comment_id": 74584795, "body": "@piRSquared Sorry, just took the column names before. Here&#39;s the full: Index([u&#39;TRADE DATE,ACCOUNT,COMPANY,COST CENTER,CURRENCY&#39;], dtype = &#39;object&#39;)"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 2, "creation_date": 1493855393, "post_id": 43771654, "comment_id": 74584822, "body": "Thank you and there in lies your problem.  You have a single column with a big mashed up string.  Look at <code>df.shape</code>.  It should be some tuple with a <code>1</code> as the second element <code>(x, 1)</code>.  If you want to solve this problem, you&#39;ll want to show us a sample of the file you are parsing, or a sample of the dataframe so we can fix it.  Then your merge should work.  Also, your other dataframe may suffer from the same problem."}, {"owner": {"reputation": 285, "user_id": 2868299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/31abd6c60306a9df9cddf151a74ea805?s=128&d=identicon&r=PG&f=1", "display_name": "DixieFlatline", "link": "https://stackoverflow.com/users/2868299/dixieflatline"}, "edited": false, "score": 0, "creation_date": 1493855649, "post_id": 43771654, "comment_id": 74584890, "body": "Aha! That was the problem. I read both frames from csv files, and I didn&#39;t notice that the file producer had started using a different separator. That screwed up the import."}], "answers": [{"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 3, "last_activity_date": 1493855748, "creation_date": 1493855748, "answer_id": 43771820, "question_id": 43771654, "link": "https://stackoverflow.com/questions/43771654/pandas-getting-a-key-error-when-the-key-exists/43771820#43771820", "title": "Pandas - Getting a Key Error when the Key Exists", "body": "<p>Your <code>Trades</code> dataframe has a single column with all the intended column names mashed together into a single string.  Check the code that parses your file.</p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 6286619, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-gREUEGtHy7w/AAAAAAAAAAI/AAAAAAAAACY/jVpTvBrumX0/photo.jpg?sz=128", "display_name": "Azum", "link": "https://stackoverflow.com/users/6286619/azum"}, "is_accepted": false, "score": 0, "last_activity_date": 1551733830, "creation_date": 1551733830, "answer_id": 54991600, "question_id": 43771654, "link": "https://stackoverflow.com/questions/43771654/pandas-getting-a-key-error-when-the-key-exists/54991600#54991600", "title": "Pandas - Getting a Key Error when the Key Exists", "body": "<p>Essentially keyError is shown in pandas python when there is no such column name for example you are typing <code>df.loc[df['one']==10]</code> but column name 'one does not exist' whoever if it exist and you are still getting the same error try place try and except statement my problem was solved using try and except statement.</p>\n\n<p>for example </p>\n\n<pre><code>try:\n   df_new = df.loc[df['one']==10]\nexcept KeyError:\n   print('No KeyError')\n</code></pre>\n"}], "owner": {"reputation": 285, "user_id": 2868299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/31abd6c60306a9df9cddf151a74ea805?s=128&d=identicon&r=PG&f=1", "display_name": "DixieFlatline", "link": "https://stackoverflow.com/users/2868299/dixieflatline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13630, "favorite_count": 0, "accepted_answer_id": 43771820, "answer_count": 2, "score": 5, "last_activity_date": 1551733830, "creation_date": 1493854684, "question_id": 43771654, "link": "https://stackoverflow.com/questions/43771654/pandas-getting-a-key-error-when-the-key-exists", "title": "Pandas - Getting a Key Error when the Key Exists", "body": "<p>I'm trying to join two dataframes in Pandas. </p>\n\n<p>The first frame is called Trades and has these columns:</p>\n\n<pre><code>TRADE DATE\nACCOUNT\nCOMPANY\nCOST CENTER\nCURRENCY\n</code></pre>\n\n<p>The second frame is called Company_Mapping and has these columns:</p>\n\n<pre><code>ACTUAL_COMPANY_ID\nMAPPED_COMPANY_ID\n</code></pre>\n\n<p>I'm trying to join them with this code:</p>\n\n<pre><code>trade_df = pd.merge(left=Trades, right = Company_Mapping, how = 'left', left_on = 'COMPANY', right_on = 'ACTUAL_COMPANY_ID'\n</code></pre>\n\n<p>This returns:</p>\n\n<pre><code>KeyError: 'COMPANY'\n</code></pre>\n\n<p>I've double checked the spelling and COMPANY is clearly in Trades, and I have no clue what would cause this.</p>\n\n<p>Any ideas?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "sql-server", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 3476845, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bfa29bcd4f128f08e98949d5f2139d11?s=128&d=identicon&r=PG&f=1", "display_name": "userPinealbody", "link": "https://stackoverflow.com/users/3476845/userpinealbody"}, "edited": false, "score": 0, "creation_date": 1493915335, "post_id": 43771660, "comment_id": 74617097, "body": "Well, that&#39;s embarrassing - that was such a simple fix.  Thank you for the help."}], "tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": true, "score": 1, "last_activity_date": 1493854709, "creation_date": 1493854709, "answer_id": 43771660, "question_id": 43771617, "link": "https://stackoverflow.com/questions/43771617/using-pandas-to-join-and-append-columns-in-a-loop/43771660#43771660", "title": "Using Pandas to join and append columns in a loop", "body": "<p>Your error is in the statement <code>finaltable = basetable.merge(datatable,...)</code>. At each loop iteration, you merge the original <code>basetable</code> with the new <code>datatable</code>, store the result in the <code>finaltable</code>... and discard it. What you need is <code>basetable = basetable.merge(datatable,...)</code>. No <code>finaltable</code>s.</p>\n"}], "owner": {"reputation": 95, "user_id": 3476845, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bfa29bcd4f128f08e98949d5f2139d11?s=128&d=identicon&r=PG&f=1", "display_name": "userPinealbody", "link": "https://stackoverflow.com/users/3476845/userpinealbody"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 628, "favorite_count": 0, "accepted_answer_id": 43771660, "answer_count": 1, "score": 0, "last_activity_date": 1493854709, "creation_date": 1493854402, "last_edit_date": 1493854615, "question_id": 43771617, "link": "https://stackoverflow.com/questions/43771617/using-pandas-to-join-and-append-columns-in-a-loop", "title": "Using Pandas to join and append columns in a loop", "body": "<p>I want to append columns from tables generated in a loop to a dataframe. I was hoping to accomplish this using <code>pandas.merge</code>, but it doesn't seem to be working out for me. </p>\n\n<p>My code: </p>\n\n<pre><code>from datetime import date\nfrom datetime import timedelta\nimport pandas\nimport numpy\nimport pyodbc\n\ndate1 = date(2017, 1, 1)  #Starting Date\ndate2 = date(2017, 1, 10) #Ending Date\n\nDateDelta = date2 - date1\nDateAdd = DateDelta.days\nStartDate = date1\ncount = 1\n\n# Create the holding table\nconn = pyodbc.connect('Server Information')\n**basetable = pandas.read_sql(\"SELECT....\") \n\nwhile count &lt;= DateAdd:\n    print(StartDate)\n    **datatable = pandas.read_sql(\"SELECT...WHERE Date = \"+str(StartDate)+\"...\")\n    finaltable = basetable.merge(datatable,how='left',left_on='OrganizationName',right_on='OrganizationName')\n    StartDate = StartDate + timedelta(days=1)\n    count = count + 1\nprint(finaltable)\n</code></pre>\n\n<p>Shortened the select statements for brevity's sake, but the tables produced look like this:</p>\n\n<p>**Basetable</p>\n\n<pre><code>School_District\n---------------\nDistrict_Alpha\nDistrict_Beta\n...\nDistrict_Zed\n</code></pre>\n\n<p>**Datatable</p>\n\n<pre><code>School_District|2016-01-01|\n---------------|----------|\nDistrict_Alpha |  400     |\nDistrict_Beta  |  300     |\n...            |  200     |\nDistrict_Zed   |  100     |\n</code></pre>\n\n<p>I have the datatable written so the column takes the name of the date selected for that particular loop, so column names can be unique once i get this up and running.  My problem, however, is that the above code only produces one column of data.  I have a good guess as to why: Only the last merge is being processed - I thought using <code>pandas.append</code> would be the way to get around that, but <code>pandas.append</code> doesn't \"join\" like merge does.  Is there some other way to accomplish a sort of Join &amp; Append using Pandas?  My goal is to keep this flexible so that other dates can be easily input depending on our data needs.</p>\n\n<p>In the end, what I want to see is:</p>\n\n<pre><code>School_District|2016-01-01|2016-01-02|...  |2016-01-10|\n---------------|----------|----------|-----|----------|\nDistrict_Alpha |  400     |   1      |     |   45     |\nDistrict_Beta  |  300     |   2      |     |   33     |\n...            |  200     |   3      |     |   5435   |\nDistrict_Zed   |  100     |   4      |     |   333    |\n</code></pre>\n"}, {"tags": ["python", "json", "python-2.7"], "comments": [{"owner": {"reputation": 1121, "user_id": 2203218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22a9e261af43bdb3164fc4cc3b05f318?s=128&d=identicon&r=PG&f=1", "display_name": "eugecm", "link": "https://stackoverflow.com/users/2203218/eugecm"}, "edited": false, "score": 2, "creation_date": 1493854484, "post_id": 43771595, "comment_id": 74584568, "body": "you are assigning to <code>variable</code> on every iteration, therefore overwriting the previous computations"}, {"owner": {"reputation": 3, "user_id": 7960229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af1e36f96c0652a3adfe123214532840?s=128&d=identicon&r=PG&f=1", "display_name": "Joe T.", "link": "https://stackoverflow.com/users/7960229/joe-t"}, "reply_to_user": {"reputation": 1121, "user_id": 2203218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/22a9e261af43bdb3164fc4cc3b05f318?s=128&d=identicon&r=PG&f=1", "display_name": "eugecm", "link": "https://stackoverflow.com/users/2203218/eugecm"}, "edited": false, "score": 0, "creation_date": 1493899182, "post_id": 43771595, "comment_id": 74604755, "body": "OK - That makes sense. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7960229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af1e36f96c0652a3adfe123214532840?s=128&d=identicon&r=PG&f=1", "display_name": "Joe T.", "link": "https://stackoverflow.com/users/7960229/joe-t"}, "edited": false, "score": 0, "creation_date": 1493899250, "post_id": 43771835, "comment_id": 74604803, "body": "Hey Drew G. - that works and makes sense. I can see the .json files with variables.keys(), and can access the sub and sub-sub keys within each one. Thanks!"}], "tags": [], "owner": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "is_accepted": true, "score": 0, "last_activity_date": 1493855875, "creation_date": 1493855875, "answer_id": 43771835, "question_id": 43771595, "link": "https://stackoverflow.com/questions/43771595/loading-more-than-one-json-file-in-python-2-7-by-looping-through-a-directory/43771835#43771835", "title": "Loading more than one .json file in Python 2.7 by looping through a directory", "body": "<p>Try:</p>\n\n<pre><code>import json, os  \n\nvariables = {}\n\nfor filename in os.listdir('D:/path1/path2/'):\n    if filename.endswith('.json'):\n        with open(os.path.join('D:/path1/path2/',filename)) as json_file:\n            variables[filename] = json.load(json_file)\n</code></pre>\n\n<p>Then your <code>variables</code> dictionary will contain the loaded json with the filename as the key rather than just overwriting <code>variable</code></p>\n"}], "owner": {"reputation": 3, "user_id": 7960229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af1e36f96c0652a3adfe123214532840?s=128&d=identicon&r=PG&f=1", "display_name": "Joe T.", "link": "https://stackoverflow.com/users/7960229/joe-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "accepted_answer_id": 43771835, "answer_count": 1, "score": 0, "last_activity_date": 1493855875, "creation_date": 1493854285, "question_id": 43771595, "link": "https://stackoverflow.com/questions/43771595/loading-more-than-one-json-file-in-python-2-7-by-looping-through-a-directory", "title": "Loading more than one .json file in Python 2.7 by looping through a directory", "body": "<p>I have three .json files in a directory, and I'm trying to loop through this directory to load all three .json files. However something interesting happens: the code does not produce an error, but it only loads one of the three .json files. I can see that it does this because I am assigning the json.load function to a variable, and then entering variable['someKey']['someInnerKey'] in the interpreter (the .json files have one level of nesting).</p>\n\n<p>Below is the code I am using. I've spent some time searching through many posts here dealing with reading and opening .json files, but I haven't found the one \"Aha!\" post as of yet. I'll keep digging, but if anyone has any suggestions or tips, they would be much appreciated.</p>\n\n<pre><code>import json, os  \nfor filename in os.listdir('D:/path1/path2/'):\n    if filename.endswith('.json'):\n        with open(os.path.join('D:/path1/path2/',filename)) as json_file:\n            variable = json.load(json_file)\n</code></pre>\n"}, {"tags": ["python", "arrays"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1493854417, "post_id": 43771593, "comment_id": 74584548, "body": "What is <code>stdarray</code>?"}, {"owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1493854543, "post_id": 43771593, "comment_id": 74584579, "body": "@user2357112: It seems to be a helper module for working with multi-dimension Python lists.  <a href=\"http://introcs.cs.princeton.edu/python/code/stdarray.py.html\" rel=\"nofollow noreferrer\">introcs.cs.princeton.edu/python/code/stdarray.py.html</a>"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1493854557, "post_id": 43771593, "comment_id": 74584583, "body": "How do you know all <code>field</code> values are <code>False</code>? A <code>list</code> with a value in it is truthy: <code>bool([False]) == True</code>"}, {"owner": {"reputation": 13, "user_id": 7960252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c24aa4ddb10f8d20e8695a36e0db2d?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/7960252/marcel"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1493887034, "post_id": 43771593, "comment_id": 74596243, "body": "@Peter Wood I send it trough a debugger, so I know that at some point all of the boolean values are False but &quot;any(field)&quot; doesn&#39;t seem to care. It still has the value True, and &quot;not any(field)&quot; has still the Value False."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7960252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c24aa4ddb10f8d20e8695a36e0db2d?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/7960252/marcel"}, "edited": false, "score": 0, "creation_date": 1493887302, "post_id": 43771712, "comment_id": 74596426, "body": "I tried the last command but it says False from almost the beginning (after the array is filled with False values)"}, {"owner": {"reputation": 13, "user_id": 7960252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c24aa4ddb10f8d20e8695a36e0db2d?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/7960252/marcel"}, "edited": false, "score": 0, "creation_date": 1493888816, "post_id": 43771712, "comment_id": 74597442, "body": "Okay, I just did this: <code>while True:        if not (any(any(row) for row in field)):             break</code>"}, {"owner": {"reputation": 13, "user_id": 7960252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c24aa4ddb10f8d20e8695a36e0db2d?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/7960252/marcel"}, "edited": false, "score": 0, "creation_date": 1493889859, "post_id": 43771712, "comment_id": 74598248, "body": "or easier: <code>while (any(any(row) for row in field)):</code>"}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1493894859, "post_id": 43771712, "comment_id": 74601713, "body": "<code>while any(any(row) for row in field):</code> you don&#39;t need the extra parentheses."}], "tags": [], "owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "is_accepted": true, "score": 3, "last_activity_date": 1493855084, "creation_date": 1493855084, "answer_id": 43771712, "question_id": 43771593, "link": "https://stackoverflow.com/questions/43771593/using-any-all-on-2d-array/43771712#43771712", "title": "Using any()/all() on 2d array", "body": "<p>When you iterate over a <code>list</code> of <code>list</code>s, you get lists.</p>\n\n<pre><code>&gt;&gt;&gt; matrix = [[1, 2, 3], [4, 5, 6], [7, 8, 9]]\n&gt;&gt;&gt; for row in matrix:\n...     print(row)\n...\n[1, 2, 3]\n[4, 5, 6]\n[7, 8, 9]\n</code></pre>\n\n<p>Any non-empty list is \u201ctruthy\u201d (i.e., makes the body of an <code>if</code> or <code>while</code> statement execute) even if all of its values are falsy.</p>\n\n<pre><code>if []:\n    print(\"Won't execute: Empty list is falsy\")\n\nif [0, 0.0, False, '', b'']:\n    print(\"Will execute: Non-empty list is truthy\")\n</code></pre>\n\n<p>If you want to check if there is a truthy value anywhere in the two-dimensional list, you can use:</p>\n\n<pre><code>any(any(row) for row in matrix)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7960252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21c24aa4ddb10f8d20e8695a36e0db2d?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/7960252/marcel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 514, "favorite_count": 0, "accepted_answer_id": 43771712, "answer_count": 1, "score": -1, "last_activity_date": 1493887851, "creation_date": 1493854279, "last_edit_date": 1493887851, "question_id": 43771593, "link": "https://stackoverflow.com/questions/43771593/using-any-all-on-2d-array", "title": "Using any()/all() on 2d array", "body": "<p>I'm trying to solve this exercise and I would be pretty much finished if my while loop would work.\nJust for context: The exercise was to develop a program which sends a few runners trough a grid until every point in the grid got touched. My grid is a 2d array, every time a runner gets to a new position the boolean value switches from True to False. When all of the positions in the array are touched (False), the while loop is supposed to stop. It doesn't.\nAny(field) still returns True despite the fact that all boolean values in the array are on False.</p>\n\n<pre><code>field = stdarray.create2D(n, n, True)\nfield[middle][middle] = False\nlaeufer = stdarray.create2D(n, 2, middle)\nwhile any(field):\n    for x in range(n):\n        step = 0\n        if laeufer[x][0] == 0 and laeufer[x][1] == 0: \\\n                step = random.choice([0, 2])\n        elif laeufer[x][0] == n - 1 and laeufer[x][1] == n - 1:\n            step = random.choice([1, 3])\n        elif laeufer[x][0] == 0 and laeufer[x][1] == n - 1:\n            step = random.choice([0, 3])\n        elif laeufer[x][0] == n - 1 and laeufer[x][1] == 0:\n            step = random.choice([1, 2])\n        elif laeufer[x][0] == 0:\n            step = random.choice([0, 2, 3])\n        elif laeufer[x][0] == n - 1:\n            step = random.choice([1, 2, 3])\n        elif laeufer[x][1] == 0:\n            step = random.choice([0, 1, 2])\n        elif laeufer[x][1] == n - 1:\n            step = random.choice([0, 1, 3])\n        else:\n            step = random.randrange(0, 4)\n        if step == 0:\n            laeufer[x][0] += 1\n        elif step == 1:\n            laeufer[x][0] -= 1\n        elif step == 2:\n            laeufer[x][1] += 1\n        else:\n            laeufer[x][1] -= 1\n        steps += 1\n        test = not all(field)\n        field[laeufer[x][0]][laeufer[x][1]] = False\n</code></pre>\n\n<p>I know, a lot of ifs but it works until the point of the while loop. It just continues running with an all False array instead of terminating.\nWhy isn't any() switching to False when there are no Trues left?</p>\n\n<p>I hope you can help me.\nThanks,\nMarcel</p>\n\n<p>Edit:\nFrom the debugger:</p>\n\n<pre><code>field = {list} &lt;class \u201alist\u2018&gt;:[\u2026]\n__len__ = {int} 4\n 0 = {list} &lt;class \u201alist\u2018&gt;: [False, False, False, False]\n 1 = {list} &lt;class \u201alist\u2018&gt;: [False, False, False, False]\n 2 = {list} &lt;class \u201alist\u2018&gt;: [False, False, False, False]\n 3 = {list} &lt;class \u201alist\u2018&gt;: [False, False, False, False]\ni = {int} 0\nlaeufer = {list} &lt;class \u201alist\u2018&gt;: [[1, 1], [2, 2], [2, 0], [3, 2]]\nn = {int} 4\nrunden = {int} 1000\nstep = {int} 3\nsteps = {int} 103\ntest = False\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "sleep", "frequency"], "comments": [{"owner": {"reputation": 1271, "user_id": 2027390, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/354a23f38243af2d4167b7acd598d8f1?s=128&d=identicon&r=PG&f=1", "display_name": "hugos", "link": "https://stackoverflow.com/users/2027390/hugos"}, "edited": false, "score": 0, "creation_date": 1493857135, "post_id": 43771575, "comment_id": 74585034, "body": "Do you want to execute the <code>ExternalFunction.main</code> at a given frequency?"}, {"owner": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "reply_to_user": {"reputation": 1271, "user_id": 2027390, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/354a23f38243af2d4167b7acd598d8f1?s=128&d=identicon&r=PG&f=1", "display_name": "hugos", "link": "https://stackoverflow.com/users/2027390/hugos"}, "edited": false, "score": 0, "creation_date": 1493857404, "post_id": 43771575, "comment_id": 74585090, "body": "Yes that&#39;s correct. I&#39;ve used threading.timer() and apscheduler in the past; perhaps these options would be better? EDIT: apscheduler only accepts second integers, so is not suitable for millisecond precision."}, {"owner": {"reputation": 1271, "user_id": 2027390, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/354a23f38243af2d4167b7acd598d8f1?s=128&d=identicon&r=PG&f=1", "display_name": "hugos", "link": "https://stackoverflow.com/users/2027390/hugos"}, "edited": false, "score": 0, "creation_date": 1493858010, "post_id": 43771575, "comment_id": 74585190, "body": "I think you&#39;re on the right track, what my answer basically suggests is storing the time before the loop and  &quot;fill&quot; the remaining period in the end. Very similar to what you are doing."}], "answers": [{"comments": [{"owner": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 0, "creation_date": 1493858059, "post_id": 43771965, "comment_id": 74585197, "body": "Thanks Hugo. I&#39;ve just implemented your approach, and am experiencing the same issue. A period of 1/60 seconds (i.e. 60Hz frequency) is resulting in an actual delay of 0.0311 seconds, which is roughly twice the expected delay of 0.016667."}, {"owner": {"reputation": 1271, "user_id": 2027390, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/354a23f38243af2d4167b7acd598d8f1?s=128&d=identicon&r=PG&f=1", "display_name": "hugos", "link": "https://stackoverflow.com/users/2027390/hugos"}, "reply_to_user": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 0, "creation_date": 1493858223, "post_id": 43771965, "comment_id": 74585230, "body": "Uhm, is there any chance the <code>ExternalFunction.main</code> is taking more than the period you want?"}, {"owner": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 0, "creation_date": 1493858297, "post_id": 43771965, "comment_id": 74585246, "body": "The 0.0311 second delay is measured across the while (time.time() - time_before) &lt; period loop only, once the ExternalFunction.main function has returned."}, {"owner": {"reputation": 1271, "user_id": 2027390, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/354a23f38243af2d4167b7acd598d8f1?s=128&d=identicon&r=PG&f=1", "display_name": "hugos", "link": "https://stackoverflow.com/users/2027390/hugos"}, "reply_to_user": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 0, "creation_date": 1493858789, "post_id": 43771965, "comment_id": 74585359, "body": "You seem to suggest you&#39;re using threads. Do you know approximately how many threads are running in your program?"}, {"owner": {"reputation": 1271, "user_id": 2027390, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/354a23f38243af2d4167b7acd598d8f1?s=128&d=identicon&r=PG&f=1", "display_name": "hugos", "link": "https://stackoverflow.com/users/2027390/hugos"}, "reply_to_user": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 0, "creation_date": 1493859298, "post_id": 43771965, "comment_id": 74585476, "body": "Also can you tell me if adding <code>import sys; sys.setcheckinterval(1)</code> to the beginning of the code solves the problem?"}, {"owner": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 0, "creation_date": 1493861036, "post_id": 43771965, "comment_id": 74585897, "body": "I&#39;ve added sys.setcheckinterval(1), which doesn&#39;t appear to have had any impact. I&#39;m reviewing the number of threads at the moment."}, {"owner": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 0, "creation_date": 1493861235, "post_id": 43771965, "comment_id": 74585944, "body": "I&#39;ve added a threading.activeCount() print which shows 2 active threads."}, {"owner": {"reputation": 1271, "user_id": 2027390, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/354a23f38243af2d4167b7acd598d8f1?s=128&d=identicon&r=PG&f=1", "display_name": "hugos", "link": "https://stackoverflow.com/users/2027390/hugos"}, "reply_to_user": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 0, "creation_date": 1493861614, "post_id": 43771965, "comment_id": 74586072, "body": "Only 2? So that&#39;s likely not the problem"}, {"owner": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 0, "creation_date": 1493862544, "post_id": 43771965, "comment_id": 74586315, "body": "I&#39;m somewhat at a loss. I&#39;ve just written this: <a href=\"http://ideone.com/SAUOzI\" rel=\"nofollow noreferrer\">ideone.com/SAUOzI</a>, which gives ~60Hz as expected, and copied it exactly to a new .py module on my computer, and am getting the same 32.05Hz (0.0311s period) as in my software."}, {"owner": {"reputation": 1271, "user_id": 2027390, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/354a23f38243af2d4167b7acd598d8f1?s=128&d=identicon&r=PG&f=1", "display_name": "hugos", "link": "https://stackoverflow.com/users/2027390/hugos"}, "reply_to_user": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 0, "creation_date": 1493863091, "post_id": 43771965, "comment_id": 74586450, "body": "That&#39;s interesting, so it&#39;s definitely not thread related. Last questions: What is your OS and what python are you using?"}, {"owner": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 0, "creation_date": 1493863204, "post_id": 43771965, "comment_id": 74586483, "body": "Windows 7 Enterprise 64-bit and Python 3.4.4. I&#39;ll do the same testing on my Linux machine this afternoon."}, {"owner": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 0, "creation_date": 1493864120, "post_id": 43771965, "comment_id": 74586715, "body": "Yeah it&#39;s very strange. I&#39;&#39;ll see how my Linux machine goes, and continue to play around. Thank you for all your input!"}, {"owner": {"reputation": 1271, "user_id": 2027390, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/354a23f38243af2d4167b7acd598d8f1?s=128&d=identicon&r=PG&f=1", "display_name": "hugos", "link": "https://stackoverflow.com/users/2027390/hugos"}, "reply_to_user": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 0, "creation_date": 1493864174, "post_id": 43771965, "comment_id": 74586731, "body": "Please let me know if you figure this out. I&#39;m curious :)"}, {"owner": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 0, "creation_date": 1493864347, "post_id": 43771965, "comment_id": 74586775, "body": "I will do! By the way, I&#39;ve just noticed that a Frequency set at 64Hz results in the 32.05Hz output frequency, but a Frequency set at 65Hz gives me ~64.1Hz output. Further to this point, I can increase the input Frequency up to 200Hz+ and still have the same ~64.1Hz output frequency. There&#39;s something very strange going on here!"}, {"owner": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 1, "creation_date": 1493870226, "post_id": 43771965, "comment_id": 74588190, "body": "Hugo, this issue appears to have been solved, as per my post here: <a href=\"http://stackoverflow.com/questions/43772960/inaccurate-time-sleep-with-python-3-x-and-windows-7?noredirect=1#comment74587904_43772960\" title=\"inaccurate time sleep with python 3 x and windows 7\">stackoverflow.com/questions/43772960/&hellip;</a>."}, {"owner": {"reputation": 1271, "user_id": 2027390, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/354a23f38243af2d4167b7acd598d8f1?s=128&d=identicon&r=PG&f=1", "display_name": "hugos", "link": "https://stackoverflow.com/users/2027390/hugos"}, "reply_to_user": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 0, "creation_date": 1493898637, "post_id": 43771965, "comment_id": 74604375, "body": "Thank you for telling me. So it is in fact a problem with sleep precision on Windows. Nice to know!"}], "tags": [], "owner": {"reputation": 1271, "user_id": 2027390, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/354a23f38243af2d4167b7acd598d8f1?s=128&d=identicon&r=PG&f=1", "display_name": "hugos", "link": "https://stackoverflow.com/users/2027390/hugos"}, "is_accepted": false, "score": 1, "last_activity_date": 1493859883, "last_edit_date": 1493859883, "creation_date": 1493857636, "answer_id": 43771965, "question_id": 43771575, "link": "https://stackoverflow.com/questions/43771575/accurate-sleep-delay-within-python-while-loop/43771965#43771965", "title": "Accurate sleep/delay within Python while loop", "body": "<p>If I understood your question correctly, you want to execute <code>ExternalFunction.main</code> at a given frequency. The problem is that the execution of <code>ExternalFunction.main</code> itself takes some time. If you don't need very fine precision -- it seems that you don't -- my suggestion is doing something like this.</p>\n\n<pre><code>import time\n\nfrequency = 1  # Hz\nperiod = 1.0/frequency\n\nwhile True:\n    time_before = time.time()\n    [...]\n    ExternalFunction.main([...])\n    [...]\n    while (time.time() - time_before) &lt; period:\n        time.sleep(0.001)  # precision here\n</code></pre>\n\n<p>You may tune the precision to your needs. Greater precision (smaller number) will make the inner while loop execute more often.</p>\n\n<p>This achieves decent results when not using threads. However, when using Python threads, the GIL (Global Interpreter Lock) makes sure only one thread runs at a time. If you have a huge number of threads it may be that it is taking way too much time for the program to go back to your main thread. Increasing the frequency Python changes between threads may give you more accurate delays.</p>\n\n<p>Add this to the beginning of your code to increase the thread switching frequency.</p>\n\n<pre><code>import sys\nsys.setcheckinterval(1)\n</code></pre>\n\n<p><code>1</code> is the number of instructions executed on each thread before switching (the default is 100), a larger number improves performance but will increase the threading switching time.</p>\n"}, {"comments": [{"owner": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "edited": false, "score": 0, "creation_date": 1493858610, "post_id": 43772010, "comment_id": 74585317, "body": "Thanks xvan. I&#39;ve just tried the pause module, including pause.until, pause.seconds and pause.milliseconds, but find the &#39;actual&#39; delay is always 0.0311, as per all other suggested and attempted approaches."}], "tags": [], "owner": {"reputation": 4011, "user_id": 1477064, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cd12123a743db34ac0b055a6fa736788?s=128&d=identicon&r=PG", "display_name": "xvan", "link": "https://stackoverflow.com/users/1477064/xvan"}, "is_accepted": false, "score": 0, "last_activity_date": 1493858335, "last_edit_date": 1493858335, "creation_date": 1493858011, "answer_id": 43772010, "question_id": 43771575, "link": "https://stackoverflow.com/questions/43771575/accurate-sleep-delay-within-python-while-loop/43772010#43772010", "title": "Accurate sleep/delay within Python while loop", "body": "<p>You may want to try <a href=\"https://github.com/jgillick/python-pause\" rel=\"nofollow noreferrer\">python-pause</a></p>\n\n<blockquote>\n  <p>Pause until a unix time, with millisecond precision:</p>\n\n<pre><code>import pause\npause.until(1370640569.7747359)\n</code></pre>\n  \n  <p>Pause using datetime:</p>\n\n<pre><code>import pause, datetime\ndt = datetime.datetime(2013, 6, 2, 14, 36, 34, 383752)\npause.until(dt)\n</code></pre>\n</blockquote>\n\n<p>You may use it like:</p>\n\n<pre><code>freqHz=60.0\ntd=datetime.timedelta(seconds=1/freqHz)\ndt=datetime.now()\n\nwhile true:\n  #Your code here\n  dt+=td\n  pause.until(dt)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13023, "user_id": 819417, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/C3Phl.jpg?s=128&g=1", "display_name": "Cees Timmerman", "link": "https://stackoverflow.com/users/819417/cees-timmerman"}, "edited": false, "score": 0, "creation_date": 1559164649, "post_id": 50899062, "comment_id": 99340039, "body": "Accurate, but that eats CPU cycles which is why i&#39;m using <code>sleep()</code> in the first place."}], "tags": [], "owner": {"reputation": 1755, "user_id": 9874393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zd1Tp.jpg?s=128&g=1", "display_name": "Bruno Vermeulen", "link": "https://stackoverflow.com/users/9874393/bruno-vermeulen"}, "is_accepted": false, "score": 0, "last_activity_date": 1529261095, "last_edit_date": 1529261095, "creation_date": 1529257410, "answer_id": 50899062, "question_id": 43771575, "link": "https://stackoverflow.com/questions/43771575/accurate-sleep-delay-within-python-while-loop/50899062#50899062", "title": "Accurate sleep/delay within Python while loop", "body": "<p>Another solution for an accurate delay is to use the perf_counter() function from module time. Especially useful in windows as time.sleep is not accurate in milliseconds. See below example where function accurate_delay creates a delay in milliseconds.</p>\n\n<pre><code>import time\n\n\ndef accurate_delay(delay):\n    ''' Function to provide accurate time delay in millisecond\n    '''\n    _ = time.perf_counter() + delay/1000\n    while time.perf_counter() &lt; _:\n        pass\n\n\ndelay = 10\nt_start = time.perf_counter()\nprint('Wait for {:.0f} ms. Start: {:.5f}'.format(delay, t_start))\n\naccurate_delay(delay)\n\nt_end = time.perf_counter()\nprint('End time: {:.5f}. Delay is {:.5f} ms'.\n      format(t_end, 1000*(t_end - t_start)))\n\nsum = 0\nntests = 1000\nfor _ in range(ntests):\n    t_start = time.perf_counter()\n    accurate_delay(delay)\n    t_end = time.perf_counter()\n    print('Test completed: {:.2f}%'.format(_/ntests * 100), end='\\r', flush=True)\n    sum = sum + 1000*(t_end - t_start) - delay\n\nprint('Average difference in time delay is {:.5f} ms.'.format(sum/ntests))`\n</code></pre>\n"}], "owner": {"reputation": 955, "user_id": 2521957, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/06b79c37b59335a7886613e671c5cac4?s=128&d=identicon&r=PG", "display_name": "jars121", "link": "https://stackoverflow.com/users/2521957/jars121"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4397, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1529261095, "creation_date": 1493854198, "question_id": 43771575, "link": "https://stackoverflow.com/questions/43771575/accurate-sleep-delay-within-python-while-loop", "title": "Accurate sleep/delay within Python while loop", "body": "<p>I have a while True loop which sends variables to an external function, and then uses the returned values. This send/receive process has a user-configurable frequency, which is saved and read from an external .ini configuration file.</p>\n\n<p>I've tried time.sleep(1 / Frequency), but am not satisfied with the accuracy, given the number of threads being used elsewhere. E.g. a frequency of 60Hz (period of 0.0166667) is giving an 'actual' time.sleep() period of ~0.0311.</p>\n\n<p>My preference would be to use an additional while loop, which compares the current time to the start time plus the period, as follows:</p>\n\n<pre><code>EndTime = time.time() + (1 / Frequency)\nwhile time.time() - EndTime &lt; 0:\n    sleep(0)\n</code></pre>\n\n<p>This would fit into the end of my while True function as follows:</p>\n\n<pre><code>while True:\n    A = random.randint(0, 5)\n    B = random.randint(0, 10)\n    C = random.randint(0, 20)\n\n    Values = ExternalFunction.main(Variable_A = A, Variable_B = B, Variable_C = C)\n\n    Return_A = Values['A_Out']\n    Return_B = Values['B_Out']\n    Return_C = Values['C_Out']\n\n    #Updated other functions with Return_A, Return_B and Return_C\n\n    EndTime = time.time() + (1 / Frequency)\n    while time.time() - EndTime &lt; 0:\n        time.sleep(0)\n</code></pre>\n\n<p>I'm missing something, as the addition of the while loop causes the function to execute once only.  How can I get the above to function correctly? Is this the best approach to 'accurate' frequency control on a non-real time operating system? Should I be using threading for this particular component? I'm testing this function on both Windows 7 (64-bit) and Ubuntu (64-bit).</p>\n"}, {"tags": ["python", "django", "django-models", "django-queryset"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 2887928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aYAr0.jpg?s=128&g=1", "display_name": "iBljad", "link": "https://stackoverflow.com/users/2887928/ibljad"}, "edited": false, "score": 0, "creation_date": 1493934890, "post_id": 43771863, "comment_id": 74627440, "body": "Thanks! But I need only one related platform name for each Game object: eg. 2 items in QuerySet: <code>Battlefield (PS3), Battlefield (PC)</code> \u2014 <b>not</b> <code>Battlefield (PS3, PC)</code>. How could I connect them?"}, {"owner": {"reputation": 389, "user_id": 6412073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3777715f290e4338fc3cd9cb5ebef141?s=128&d=identicon&r=PG", "display_name": "rhys_gbs", "link": "https://stackoverflow.com/users/6412073/rhys-gbs"}, "reply_to_user": {"reputation": 1, "user_id": 2887928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aYAr0.jpg?s=128&g=1", "display_name": "iBljad", "link": "https://stackoverflow.com/users/2887928/ibljad"}, "edited": false, "score": 0, "creation_date": 1493935100, "post_id": 43771863, "comment_id": 74627518, "body": "Well then you need to make you link model unique_together and unless you plan on adding extra fields to link you may as well just add a foreign key on the game model, I&#39;ll update my answer based on wether you are having extra fields on the link model?"}], "tags": [], "owner": {"reputation": 389, "user_id": 6412073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3777715f290e4338fc3cd9cb5ebef141?s=128&d=identicon&r=PG", "display_name": "rhys_gbs", "link": "https://stackoverflow.com/users/6412073/rhys-gbs"}, "is_accepted": false, "score": 0, "last_activity_date": 1493935315, "last_edit_date": 1493935315, "creation_date": 1493856092, "answer_id": 43771863, "question_id": 43771524, "link": "https://stackoverflow.com/questions/43771524/django-query-get-value-from-not-directly-related-model/43771863#43771863", "title": "Django query: get value from not directly related model", "body": "<p>You can use link_set to get the reverse lookup for games here's the <a href=\"https://docs.djangoproject.com/en/dev/topics/db/queries/#following-relationships-backward\" rel=\"nofollow noreferrer\">django documentation</a></p>\n\n<pre><code>class Platform(models.Model):\n    platform = models.CharField()\n\n\nclass Game(models.Model):\n    game = models.CharField()\n    genre = models.CharField()\n\n    def save(self, *args, **kwargs):\n        self.title = \"{0} ({1})\".format(self.title, self.link__platform)\n        super(Game, self).save(*args, **kwargs)\n\n\nclass Link(models.Model):\n    class Meta:\n        unique_together = ('game', 'platform')\n    game = models.ForeignKey(Game)\n    platform = models.ForeignKey(Platform)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 2887928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aYAr0.jpg?s=128&g=1", "display_name": "iBljad", "link": "https://stackoverflow.com/users/2887928/ibljad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493935315, "creation_date": 1493853894, "question_id": 43771524, "link": "https://stackoverflow.com/questions/43771524/django-query-get-value-from-not-directly-related-model", "title": "Django query: get value from not directly related model", "body": "<p>I want to get value from not directly related model in Django.\nI have following models:</p>\n\n<pre><code>class Platform(models.Model):\n    platform = models.CharField()\n\n\nclass Game(models.Model):\n    game = models.CharField()\n    genre = models.CharField()\n\n\nclass Link(models.Model):\n    game = models.ForeignKey(Game)\n    platform = models.ForeignKey(Platform)\n</code></pre>\n\n<p>How could I get QuerySet of Game objects where game title (Game.game field) would be replaced to following pattern: Game (Platform) (eg. 'Battlefield (PS3)') without extra hits to database?</p>\n\n<p>In SQL it would look like this:</p>\n\n<pre><code>SELECT\n  g.id,\n  g.game || ' (' || p.platform || ')' AS game\nFROM game g INNER JOIN link l ON g.id = l.game_id\n  LEFT JOIN platform p ON l.platform_id = p.id;\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 0, "creation_date": 1493854274, "post_id": 43771522, "comment_id": 74584513, "body": "Which elif statement? It sounds like have some outer loop condition, which is changed in the <code>if</code> but not in the <code>elif</code>. Therefore as soon as it hits the elif its stuck as the loop condition never changes."}], "answers": [{"comments": [{"owner": {"reputation": 868, "user_id": 5485014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b581a2d3ec981221fd4fec5118766e9?s=128&d=identicon&r=PG&f=1", "display_name": "Anis Jonischkeit", "link": "https://stackoverflow.com/users/5485014/anis-jonischkeit"}, "edited": false, "score": 0, "creation_date": 1493854396, "post_id": 43771574, "comment_id": 74584542, "body": "I just updated my answer to explain it a bit more. Let me know if it is still unclear"}, {"owner": {"reputation": 81, "user_id": 6142748, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/de2d058e47ec047b5dc4dbfb4051a576?s=128&d=identicon&r=PG&f=1", "display_name": "mykill456", "link": "https://stackoverflow.com/users/6142748/mykill456"}, "edited": false, "score": 0, "creation_date": 1493854943, "post_id": 43771574, "comment_id": 74584696, "body": "Thank you so much for ultra fast reply and easy to understand. Works great"}], "tags": [], "owner": {"reputation": 868, "user_id": 5485014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b581a2d3ec981221fd4fec5118766e9?s=128&d=identicon&r=PG&f=1", "display_name": "Anis Jonischkeit", "link": "https://stackoverflow.com/users/5485014/anis-jonischkeit"}, "is_accepted": true, "score": 1, "last_activity_date": 1493854354, "last_edit_date": 1493854354, "creation_date": 1493854198, "answer_id": 43771574, "question_id": 43771522, "link": "https://stackoverflow.com/questions/43771522/while-loop-infinitely-loops-if-it-reaches-the-elif-statement/43771574#43771574", "title": "while loop infinitely loops if it reaches the elif statement", "body": "<p>how about this:</p>\n\n<pre><code>shopitemsF = [\"Ghostblade: 150 Damage, Cost: 700\", \"Thunderblade: 120 Damage, Cost: 300\", \"Bloodcursed Sword: 160 Damage, Cost 800\"]\nshopitemsM = [\"Fire Throw: 150 Damage, Cost: 700\", \"Ice Wind: 120 Damage, Cost: 300\", \"Electric shock: 160 Damage, Cost 800\"]\n\n\nprint(\"Welcome to the shop.\")\nprint('')\nif character == \"Fighter\":\n    g = ', '\n    print(g.join(shopitemsF))\n    time.sleep(1)\nelif character == \"Mage\":\n    g = ', '\n    print(g.join(shopitemsM))\n    time.sleep(1)\n\nshopchoice = input(\"Please pick another item? \")\nprint('')\n\nfound = False\nwhile found != True:\n    for text2 in shopitemsF:\n        if shopchoice in text2:\n            print(text2)\n            if int(text2[-3:]) &gt;= gold:\n                print(\"You need another\", int(text2[-3:]) - gold, \"gold.\")\n                shopchoice = input(\"Please pick another item? \")\n                break                    \n           elif int(text2[-3:]) &lt;= gold:\n                print(\"You have purchased,\", text2[:-11]+\".\")\n                x = (int(text2[-21:-18]))\n                found = True\n\n\n    for text2 in shopitemsM:\n        if shopchoice in text2:\n            print(text2)\n            if int(text2[-3:]) &gt;= gold:\n                print(\"You need another\", int(text2[-3:]) - gold, \"gold.\")\n                shopchoice = input(\"Please pick another item? \")\n                break\n            elif int(text2[-3:]) &lt;= gold:\n                print(\"You have purchased,\", text2[:-11]+\".\")\n                x = (int(text2[-21:-18]))\n                found = True\n</code></pre>\n\n<p>You create a variable <code>found</code> set it to false, and unless you find the item keep it false. Then <code>while found != True:</code> keeps your loop going for the instance where the item is too expensive. If however they bought the item, found is set to true which breaks you out of the loop</p>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 6142748, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/de2d058e47ec047b5dc4dbfb4051a576?s=128&d=identicon&r=PG&f=1", "display_name": "mykill456", "link": "https://stackoverflow.com/users/6142748/mykill456"}, "edited": false, "score": 0, "creation_date": 1493855143, "post_id": 43771591, "comment_id": 74584746, "body": "Yeah I&#39;ve been told I would need to use a function which I can&#39;t understand how it works yet cause I&#39;m still learning. Thanks for reply anyway"}], "tags": [], "owner": {"reputation": 66, "user_id": 7185647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4d0475a7b6fa6d82083acf9f68878e?s=128&d=identicon&r=PG&f=1", "display_name": "kosiokarchev", "link": "https://stackoverflow.com/users/7185647/kosiokarchev"}, "is_accepted": false, "score": 0, "last_activity_date": 1493854269, "creation_date": 1493854269, "answer_id": 43771591, "question_id": 43771522, "link": "https://stackoverflow.com/questions/43771522/while-loop-infinitely-loops-if-it-reaches-the-elif-statement/43771591#43771591", "title": "while loop infinitely loops if it reaches the elif statement", "body": "<p>You never ask for a <code>shopchoice</code> again, so you are stuck with whatever was chosen in the beginning forever. Just put your <code>shopchoice = input (...)</code> statement only once in the beginning of the while loop. You should also think of a way of letting the user out of the shop ;)</p>\n"}], "owner": {"reputation": 81, "user_id": 6142748, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/de2d058e47ec047b5dc4dbfb4051a576?s=128&d=identicon&r=PG&f=1", "display_name": "mykill456", "link": "https://stackoverflow.com/users/6142748/mykill456"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 43771574, "answer_count": 2, "score": 0, "last_activity_date": 1493854354, "creation_date": 1493853881, "question_id": 43771522, "link": "https://stackoverflow.com/questions/43771522/while-loop-infinitely-loops-if-it-reaches-the-elif-statement", "title": "while loop infinitely loops if it reaches the elif statement", "body": "<p>The code is for a shop just for a reference. They start with 400 gold and if they pick an item too expensive it asks if they would like to pick another. My issue is if they pick an item that they can afford the while loop infinitely loops which I am not sure why.</p>\n\n<pre><code>    shopitemsF = [\"Ghostblade: 150 Damage, Cost: 700\", \"Thunderblade: 120 Damage, Cost: 300\", \"Bloodcursed Sword: 160 Damage, Cost 800\"]\n    shopitemsM = [\"Fire Throw: 150 Damage, Cost: 700\", \"Ice Wind: 120 Damage, Cost: 300\", \"Electric shock: 160 Damage, Cost 800\"]\n\n\n    print(\"Welcome to the shop.\")\n    print('')\n    if character == \"Fighter\":\n        g = ', '\n        print(g.join(shopitemsF))\n        time.sleep(1)\n    elif character == \"Mage\":\n        g = ', '\n        print(g.join(shopitemsM))\n        time.sleep(1)\n\n    shopchoice = input(\"Please pick another item? \")\n    print('')\n\n    while True:\n        for text2 in shopitemsF:\n            if shopchoice in text2:\n                print(text2)\n                if int(text2[-3:]) &gt;= gold:\n                    print(\"You need another\", int(text2[-3:]) - gold, \"gold.\")\n                    shopchoice = input(\"Please pick another item? \")\n                    break                    \n               elif int(text2[-3:]) &lt;= gold:\n                    print(\"You have purchased,\", text2[:-11]+\".\")\n                    x = (int(text2[-21:-18]))\n\n\n        for text2 in shopitemsM:\n            if shopchoice in text2:\n                print(text2)\n                if int(text2[-3:]) &gt;= gold:\n                    print(\"You need another\", int(text2[-3:]) - gold, \"gold.\")\n                    shopchoice = input(\"Please pick another item? \")\n                    break\n                elif int(text2[-3:]) &lt;= gold:\n                    print(\"You have purchased,\", text2[:-11]+\".\")\n                    x = (int(text2[-21:-18]))\n</code></pre>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 3627, "user_id": 1753919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m9UUd.jpg?s=128&g=1", "display_name": "plasmon360", "link": "https://stackoverflow.com/users/1753919/plasmon360"}, "edited": false, "score": 4, "creation_date": 1493854845, "post_id": 43771514, "comment_id": 74584662, "body": "did u look at <a href=\"http://stackoverflow.com/questions/4148292/how-do-i-select-a-window-from-a-numpy-array-with-periodic-boundary-conditions\" title=\"how do i select a window from a numpy array with periodic boundary conditions\">stackoverflow.com/questions/4148292/&hellip;</a>?"}, {"owner": {"reputation": 2116, "user_id": 7247547, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9edc71b8ad82b60fb9955e8adcede03a?s=128&d=identicon&r=PG&f=1", "display_name": "kevinkayaks", "link": "https://stackoverflow.com/users/7247547/kevinkayaks"}, "reply_to_user": {"reputation": 3627, "user_id": 1753919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m9UUd.jpg?s=128&g=1", "display_name": "plasmon360", "link": "https://stackoverflow.com/users/1753919/plasmon360"}, "edited": false, "score": 0, "creation_date": 1493860849, "post_id": 43771514, "comment_id": 74585839, "body": "Thank you that&#39;s very helpful !"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 1, "creation_date": 1493884856, "post_id": 43771514, "comment_id": 74595003, "body": "For efficient one use views - <a href=\"http://stackoverflow.com/questions/42831022\">stackoverflow.com/questions/42831022</a>"}, {"owner": {"reputation": 2116, "user_id": 7247547, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9edc71b8ad82b60fb9955e8adcede03a?s=128&d=identicon&r=PG&f=1", "display_name": "kevinkayaks", "link": "https://stackoverflow.com/users/7247547/kevinkayaks"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1494025097, "post_id": 43771514, "comment_id": 74669089, "body": "@Divakar this is not a solution because view_as_windows does not account for periodic boundary conditions"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 1, "creation_date": 1494025859, "post_id": 43771514, "comment_id": 74669294, "body": "So, you are saying func <code>sub_A</code> would produce lesser elements for boundary elements from <code>A</code>?"}, {"owner": {"reputation": 2116, "user_id": 7247547, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9edc71b8ad82b60fb9955e8adcede03a?s=128&d=identicon&r=PG&f=1", "display_name": "kevinkayaks", "link": "https://stackoverflow.com/users/7247547/kevinkayaks"}, "edited": false, "score": 0, "creation_date": 1494026043, "post_id": 43771514, "comment_id": 74669342, "body": "I edited for more explanation-- I need to create a larger array as necessary containing A as blocks in order to draw 3x3 arrays which wrap around the boundaries of A. The boundary elements should be the same shape as all other elements"}], "answers": [{"comments": [{"owner": {"reputation": 2116, "user_id": 7247547, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9edc71b8ad82b60fb9955e8adcede03a?s=128&d=identicon&r=PG&f=1", "display_name": "kevinkayaks", "link": "https://stackoverflow.com/users/7247547/kevinkayaks"}, "edited": false, "score": 0, "creation_date": 1494026764, "post_id": 43815013, "comment_id": 74669536, "body": "Thank you! That&#39;s excellent. If I wanted to generalize to 3D could I just use   out = view_as_blocks(Apad,(3,3,3))?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 2116, "user_id": 7247547, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9edc71b8ad82b60fb9955e8adcede03a?s=128&d=identicon&r=PG&f=1", "display_name": "kevinkayaks", "link": "https://stackoverflow.com/users/7247547/kevinkayaks"}, "edited": false, "score": 1, "creation_date": 1494026829, "post_id": 43815013, "comment_id": 74669551, "body": "@kevinkayaks Haven&#39;t tested, but I would think something like that."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 1, "last_activity_date": 1494026541, "creation_date": 1494026541, "answer_id": 43815013, "question_id": 43771514, "link": "https://stackoverflow.com/questions/43771514/viewing-cells-of-a-grid-in-sliding-windows-with-periodic-boundaries/43815013#43815013", "title": "Viewing cells of a grid in sliding windows with periodic boundaries", "body": "<p>Simply pad with <code>wrapping</code> functionality using <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.pad.html\" rel=\"nofollow noreferrer\"><code>np.pad</code></a> and then use <a href=\"http://scikit-image.org/docs/dev/api/skimage.util.html#skimage.util.view_as_windows\" rel=\"nofollow noreferrer\">Scikit's <code>view_as_windows</code></a> -</p>\n\n<pre><code>from skimage.util.shape import view_as_windows\n\nApad = np.pad(A,1,'wrap')\nout = view_as_windows(Apad,(3,3))\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [65]: A\nOut[65]: \narray([[ 0,  1,  2,  3],\n       [ 4,  5,  6,  7],\n       [ 8,  9, 10, 11],\n       [12, 13, 14, 15]])\n\nIn [66]: Apad = np.pad(A,1,'wrap')\n\nIn [67]: out = view_as_windows(Apad,(3,3))\n\nIn [68]: out[0,0]\nOut[68]: \narray([[15, 12, 13],\n       [ 3,  0,  1],\n       [ 7,  4,  5]])\n\nIn [69]: out[1,1]\nOut[69]: \narray([[ 0,  1,  2],\n       [ 4,  5,  6],\n       [ 8,  9, 10]])\n</code></pre>\n"}], "owner": {"reputation": 2116, "user_id": 7247547, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/9edc71b8ad82b60fb9955e8adcede03a?s=128&d=identicon&r=PG&f=1", "display_name": "kevinkayaks", "link": "https://stackoverflow.com/users/7247547/kevinkayaks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 190, "favorite_count": 0, "accepted_answer_id": 43815013, "answer_count": 1, "score": 1, "last_activity_date": 1494026560, "creation_date": 1493853832, "last_edit_date": 1494026560, "question_id": 43771514, "link": "https://stackoverflow.com/questions/43771514/viewing-cells-of-a-grid-in-sliding-windows-with-periodic-boundaries", "title": "Viewing cells of a grid in sliding windows with periodic boundaries", "body": "<p>Consider a 2D array </p>\n\n<pre><code>&gt;&gt;&gt; A = np.array(range(16)).reshape(4, 4)\n&gt;&gt;&gt; A\narray([[ 0,  1,  2,  3],\n       [ 4,  5,  6,  7],\n       [ 8,  9, 10, 11],\n       [12, 13, 14, 15]])\n</code></pre>\n\n<p>I  would like to construct a function f(i,j) which pulls a 3x3 block from elements surrounding A[i,j] with periodic boundary conditions. </p>\n\n<p>For example a non-boundary element would be </p>\n\n<pre><code>&gt;&gt;&gt; f(1,1)\narray([[ 0,  1,  2],\n       [ 4,  5,  6],\n       [ 8,  9, 10]])\n</code></pre>\n\n<p>and a boundary element would be </p>\n\n<pre><code>&gt;&gt;&gt; f(0,0)\narray([[15, 12, 13],\n       [ 3,  0,  1],\n       [ 7,  4,  5]])\n</code></pre>\n\n<p>view_as_windows comes close but does not wrap around periodic boundaries. </p>\n\n<pre><code>&gt;&gt;&gt; from skimage.util.shape import view_as_windows\n&gt;&gt;&gt; view_as_windows(A,(3,3))\narray([[[[ 0,  1,  2],\n     [ 4,  5,  6],\n     [ 8,  9, 10]],\n\n    [[ 1,  2,  3],\n     [ 5,  6,  7],\n     [ 9, 10, 11]]],\n\n\n   [[[ 4,  5,  6],\n     [ 8,  9, 10],\n     [12, 13, 14]],\n\n    [[ 5,  6,  7],\n     [ 9, 10, 11],\n     [13, 14, 15]]]])\n</code></pre>\n\n<p>In this case view_as_windows(A)[0,0] == f(1,1) but f(0,0) is not in view_as_windows(A). I need a view_as_windows(A) type array which has the same number of elements as A, where each element has shape (3,3)</p>\n"}, {"tags": ["python", "multiprocessing"], "comments": [{"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 1, "creation_date": 1493854202, "post_id": 43771504, "comment_id": 74584493, "body": "<code>[arr1]</code> - you are only doing one job with the entire dataset."}, {"owner": {"reputation": 821, "user_id": 1231599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f179f8c729e804a302dab09abc4c4e21?s=128&d=identicon&r=PG", "display_name": "Fenwick", "link": "https://stackoverflow.com/users/1231599/fenwick"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1493854580, "post_id": 43771504, "comment_id": 74584589, "body": "@tdelaney shouldn&#39;t pool.map cut arr1 into chunks? The parallel code works and works faster than single core code with arr1 of size 10000."}, {"owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1493854723, "post_id": 43771504, "comment_id": 74584637, "body": "You have to do the splitting yourself. Are you on Windows or a unix-like system? There is a faster way for unixy systems."}, {"owner": {"reputation": 821, "user_id": 1231599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f179f8c729e804a302dab09abc4c4e21?s=128&d=identicon&r=PG", "display_name": "Fenwick", "link": "https://stackoverflow.com/users/1231599/fenwick"}, "reply_to_user": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "edited": false, "score": 0, "creation_date": 1493854979, "post_id": 43771504, "comment_id": 74584706, "body": "@tdelaney Oh I just realized that arr1 is automatically iterated by Pool in each worker() call. What is the splitting technique you are talking about? Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 55248, "user_id": 642070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c280b71b3187d1cc113a6e302b414b9?s=128&d=identicon&r=PG", "display_name": "tdelaney", "link": "https://stackoverflow.com/users/642070/tdelaney"}, "is_accepted": true, "score": 1, "last_activity_date": 1493870254, "last_edit_date": 1493870254, "creation_date": 1493855743, "answer_id": 43771819, "question_id": 43771504, "link": "https://stackoverflow.com/questions/43771504/python-multiprocessing-with-pool-the-main-process-takes-forever/43771819#43771819", "title": "Python multiprocessing with Pool - the main process takes forever", "body": "<p>It looks like you want to divide the work into chunks. You can use the range function to partition the data. On Linux, forked processes get a copy-on-write view of the parent memory so you can just pass down the indexes you want to work on. On Windows, no such luck. You need to pass in each sublist. This program should do it</p>\n\n<pre><code>import numpy as np\nimport multiprocessing\nimport time\nimport platform\n\ndef worker(a):\n    if platform.system() == \"Linux\":\n        # on linux we passed in start:len\n        start, length = a\n        a = arr1[start:length]\n    for i in range(len(a)):\n        for j in arr2:\n            a[i] = a[i]*j\n    return len(a)\n\narr2 = np.random.rand(10000).tolist()\n\nif __name__ == '__main__':\n    multiprocessing.freeze_support()\n    cores = multiprocessing.cpu_count()\n    arr1 = np.random.rand(1000000).tolist()\n    tmp = time.time()\n    pool = multiprocessing.Pool(processes=cores)\n    chunk = (len(arr1)+cores-1)//cores\n    # on Windows, pass the sublist, on linux just the indexes and let the\n    # worker split from the view of parent memory space\n    if platform.system() == \"Linux\":\n        seq = [(i, i+chunk) for i in range(0, len(arr1), chunk)]\n    else:\n        seq = [arr1[i:i+chunk] for i in range(0, len(arr1), chunk)]\n    result = pool.map(worker, seq, chunksize=1)\n    print \"mp time\", time.time()-tmp\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "is_accepted": false, "score": 0, "last_activity_date": 1493863289, "creation_date": 1493863289, "answer_id": 43772645, "question_id": 43771504, "link": "https://stackoverflow.com/questions/43771504/python-multiprocessing-with-pool-the-main-process-takes-forever/43772645#43772645", "title": "Python multiprocessing with Pool - the main process takes forever", "body": "<p>You point is here:</p>\n\n<p><code>pool.map</code> will automatically iterate the object which is <code>[arr1]</code> in your program. Please notice that the object is <code>[arr1]</code> but not <code>arr1</code>, that means the length of object you pass to <code>pool.map</code> is only <strong>one</strong>.</p>\n\n<p>I think the simplest solution is replace <code>[arr1]</code> with <code>arr1</code>.</p>\n"}], "owner": {"reputation": 821, "user_id": 1231599, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/f179f8c729e804a302dab09abc4c4e21?s=128&d=identicon&r=PG", "display_name": "Fenwick", "link": "https://stackoverflow.com/users/1231599/fenwick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1795, "favorite_count": 1, "accepted_answer_id": 43771819, "answer_count": 2, "score": 0, "last_activity_date": 1493870254, "creation_date": 1493853785, "last_edit_date": 1495541398, "question_id": 43771504, "link": "https://stackoverflow.com/questions/43771504/python-multiprocessing-with-pool-the-main-process-takes-forever", "title": "Python multiprocessing with Pool - the main process takes forever", "body": "<p>I am trying to understand how multiprocessing works with Python. Here's my test code:</p>\n\n<pre><code>import numpy as np\nimport multiprocessing\nimport time\n\ndef worker(a):\n    for i in range(len(a)):\n        for j in arr2:\n            a[i] = a[i]*j\n    return len(a)\n\narr2 = np.random.rand(10000).tolist()\n\nif __name__ == '__main__':\n    multiprocessing.freeze_support()\n    cores = multiprocessing.cpu_count()\n    arr1 = np.random.rand(1000000).tolist()\n    tmp = time.time()\n    pool = multiprocessing.Pool(processes=cores)\n    result = pool.map(worker, [arr1], chunksize=1000000/(cores-1))\n    print \"mp time\", time.time()-tmp\n</code></pre>\n\n<p>I have 8 cores. It usually ends up with 7 processes using only ~3% of the CPU for about a second, and the last process uses ~1/8 of the CPU for forever...(it has been running for about 15 minutes)</p>\n\n<p>I understand that the interprocess communication usually bounds the complexity of parallel programming, but does it usually take this long? What else could cause the last process to take forever?</p>\n\n<p>This thread: <a href=\"https://stackoverflow.com/questions/9236958/python-multiprocessing-never-joins\">Python multiprocessing never joins</a> seems to address a similar issue but it doesn't solve the problem with Pool.</p>\n"}, {"tags": ["python", "node.js", "slurm"], "owner": {"reputation": 1490, "user_id": 2402577, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Fn7Ch.png?s=128&g=1", "display_name": "alper", "link": "https://stackoverflow.com/users/2402577/alper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1493854038, "creation_date": 1493853725, "last_edit_date": 1493854038, "question_id": 43771495, "link": "https://stackoverflow.com/questions/43771495/python-makes-system-call-to-nodejs-inside-slurm-but-cannot-get-output-from-node", "title": "Python makes system call to nodejs inside SLURM, but cannot get output from node.js", "body": "<p>I have a python code which works when I run from console.</p>\n\n<pre><code>python hello.py; #returns hello.\n</code></pre>\n\n<p>But when I run my python code inside SLURM, nodejs code won't return any output. I see an empty string <code>['']</code>. </p>\n\n<p>hello.py</p>\n\n<pre><code>def contractCall( val ):\n   return os.popen( val + \"| sudo nodejs\").read().replace(\"\\n\", \"\").replace(\" \", \"\");\n\njobInfo = contractCall('echo \"console.log( \\'hello\\'   )\"');\nprint(jobInfo); #this line returns [''] when I call it inside SLURM.\n</code></pre>\n\n<p>slurmRun.sh</p>\n\n<pre><code>#!/bin/bash\n#SBATCH -o slurm.out        # STDOUT\n#SBATCH -e slurm.err        # STDERR\n\npython hello.py \n</code></pre>\n\n<p>its output: <code>['']</code></p>\n\n<p>Thank you for your valuable time and help.</p>\n"}, {"tags": ["python", "types", "module", "callable"], "comments": [{"owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 2, "creation_date": 1493853033, "post_id": 43771400, "comment_id": 74584172, "body": "Yes, <code>type</code> returns a type object. Type objects are callable."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1493853170, "post_id": 43771400, "comment_id": 74584222, "body": "I don&#39;t understand your question."}, {"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "reply_to_user": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 0, "creation_date": 1493853204, "post_id": 43771400, "comment_id": 74584232, "body": "@vaultah Do you mean, <code>type(__builtins__)</code>  displays <code>&lt;type &#39;module&#39;&gt;</code> on stdout and returns callable object?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1493853235, "post_id": 43771400, "comment_id": 74584239, "body": "<code>&lt;type &#39;module&#39;&gt;</code> is the <code>repr</code> of the <code>module</code> type object."}, {"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1493853389, "post_id": 43771400, "comment_id": 74584289, "body": "@juanpa.arrivillaga  I can apply <code>(&#39;my_module&#39;)</code> to an object, if it is of type <code>function</code>. Is <code>type(__builtins__)</code> returning some function?"}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1493853456, "post_id": 43771400, "comment_id": 74584305, "body": "It&#39;s returning a type, i.e. a class. Calling a class returns an instance of said class."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1493853557, "post_id": 43771400, "comment_id": 74584336, "body": "What? You can&#39;t apply (?) &#39;my_module&#39; to <i>any</i> function, only ones which accepts a single positional parameter. But <code>type(__builtins__)</code> is returning a type object, which is callable like a function."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1493853652, "post_id": 43771400, "comment_id": 74584366, "body": "Maybe if you explain what you are trying to accomplish with <code>my_module = type(__builtins__)(&#39;my_module&#39;)</code>. The object <code>my_module</code> which you are creating this way isn&#39;t going to be very useful..."}], "answers": [{"tags": [], "owner": {"reputation": 180853, "user_id": 424499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc2071afd499daef001e75e14d7f9cce?s=128&d=identicon&r=PG", "display_name": "Raymond Hettinger", "link": "https://stackoverflow.com/users/424499/raymond-hettinger"}, "is_accepted": false, "score": 3, "last_activity_date": 1493853881, "creation_date": 1493853881, "answer_id": 43771521, "question_id": 43771400, "link": "https://stackoverflow.com/questions/43771400/python-type-function-returns-a-callable/43771521#43771521", "title": "Python type() function returns a callable", "body": "<p>The <em>type()</em> function returns the class of an object.  In the case of <code>type(__builtins__)</code> it returns a <em>Module</em> type.   The semantics of module are detailed at:  <a href=\"https://docs.python.org/3/library/stdtypes.html#modules\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/stdtypes.html#modules</a></p>\n\n<p>The source code for CPython has this in Objects/moduleobject.c::<em>module_init()</em>:</p>\n\n<pre><code>static char *kwlist[] = {\"name\", \"doc\", NULL};\nPyObject *dict, *name = Py_None, *doc = Py_None;\nif (!PyArg_ParseTupleAndKeywords(args, kwds, \"U|O:module.__init__\",\n                                 kwlist, &amp;name, &amp;doc))\n</code></pre>\n\n<p>That means you can call (instantiate) module objects with the <em>name</em> of the module as a required argument and the docstring as an optional argument.</p>\n"}, {"comments": [{"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "edited": false, "score": 0, "creation_date": 1493855956, "post_id": 43771705, "comment_id": 74584959, "body": "Can I say, <code>x = 1</code> is nothing but <code>x = int(1)</code> internally? Only difference is, <code>x=int(1)</code> is more OOP way of writing python code. Guido provided syntactic sugar <code>x=1</code> from math sense."}, {"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "edited": false, "score": 0, "creation_date": 1493897914, "post_id": 43771705, "comment_id": 74603803, "body": "am still not clear,If x=myClass() is not confusing  then how y=int() is confusing. If my team decides for writing oop style python code, then x=1 looks like math equation despite int(1) gets executed internally."}, {"owner": {"reputation": 547, "user_id": 6028742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x0Zmu.jpg?s=128&g=1", "display_name": "tpvasconcelos", "link": "https://stackoverflow.com/users/6028742/tpvasconcelos"}, "reply_to_user": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "edited": false, "score": 1, "creation_date": 1493898988, "post_id": 43771705, "comment_id": 74604620, "body": "Python does not call <code>int()</code> when you run <code>x=1</code>. <code>x=1</code> is faster to type, is faster to run, as is the most pythonic way of writing code. See: <a href=\"http://stackoverflow.com/questions/2736693/creating-a-list-in-python-something-sneaky-going-on\">this</a> and <a href=\"http://stackoverflow.com/questions/5790860/and-vs-list-and-dict-which-is-better\">that</a>"}], "tags": [], "owner": {"reputation": 547, "user_id": 6028742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x0Zmu.jpg?s=128&g=1", "display_name": "tpvasconcelos", "link": "https://stackoverflow.com/users/6028742/tpvasconcelos"}, "is_accepted": true, "score": 2, "last_activity_date": 1571922206, "last_edit_date": 1571922206, "creation_date": 1493855030, "answer_id": 43771705, "question_id": 43771400, "link": "https://stackoverflow.com/questions/43771400/python-type-function-returns-a-callable/43771705#43771705", "title": "Python type() function returns a callable", "body": "<p>Let's run through some examples:</p>\n\n<hr>\n\n<pre><code>&gt;&gt;&gt; type(int)\n&lt;class 'type'&gt;\n</code></pre>\n\n<p>So, since <code>type(int)</code> returns a <code>type</code>, it makes sense that</p>\n\n<pre><code>&gt;&gt;&gt; type(int)(12)\n&lt;class 'int'&gt;\n</code></pre>\n\n<p>since </p>\n\n<pre><code>&gt;&gt;&gt; type(12)\n&lt;class 'int'&gt;\n</code></pre>\n\n<p><strong>More importantly:</strong></p>\n\n<pre><code>&gt;&gt;&gt; (type(int)(12) == type(12)) and (type(int)(12) is type(12))\nTrue\n</code></pre>\n\n<hr>\n\n<p>Now, if you instead do:</p>\n\n<pre><code>&gt;&gt;&gt; type(int())\n&lt;class 'int'&gt;\n</code></pre>\n\n<p>which is also expected since</p>\n\n<pre><code>&gt;&gt;&gt; (int() == 0) and (int() is 0)\nTrue\n</code></pre>\n\n<p>and</p>\n\n<pre><code>&gt;&gt;&gt; (type(int()) = type(0)) and (type(int()) is type(0))\nTrue\n</code></pre>\n\n<hr>\n\n<p>So, putting things together: </p>\n\n<ul>\n<li><code>int</code> is an object of type <code>type</code></li>\n<li><code>int()</code> is an (integer) object of type <code>int</code></li>\n</ul>\n\n<hr>\n\n<p>Another example:</p>\n\n<pre><code>&gt;&gt;&gt; type(str())\n&lt;class 'str'&gt;\n</code></pre>\n\n<p>which means that </p>\n\n<pre><code>&gt;&gt;&gt; (type(str())() == '') and (type(str())() is '')\nTrue\n</code></pre>\n\n<p>therefore, it behaves just like a string object:</p>\n\n<pre><code>&gt;&gt;&gt; type(str())().join(['Hello', ', World!'])\n'Hello, World!'\n</code></pre>\n\n<hr>\n\n<p>I have the feeling that I might have made this seem much more complicated than it actually is... it isn't!</p>\n\n<hr>\n\n<p><code>type()</code> returns the class of an object. So:</p>\n\n<ul>\n<li><code>type(12)</code> is just an ugly way of writing <code>int</code></li>\n<li><code>type(12)(12)</code> is just an ugly way of writing <code>int(12)</code></li>\n</ul>\n\n<p>So, \"Yes!\", <code>type()</code> returns a callable. But it's much better to think about it as (from <a href=\"https://docs.python.org/3/library/functions.html#type\" rel=\"nofollow noreferrer\">official docs</a> )</p>\n\n<blockquote>\n  <p><em>class <strong>type</strong>(object)</em></p>\n  \n  <p>With one argument, return the type of an object. The return value is a type object and generally the same object as returned by object.__class__.</p>\n</blockquote>\n"}], "owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1213, "favorite_count": 0, "accepted_answer_id": 43771705, "answer_count": 2, "score": 1, "last_activity_date": 1571922206, "creation_date": 1493853006, "last_edit_date": 1493854318, "question_id": 43771400, "link": "https://stackoverflow.com/questions/43771400/python-type-function-returns-a-callable", "title": "Python type() function returns a callable", "body": "<p><code>type(object)</code> returns type of an object.</p>\n\n<pre><code>&gt;&gt;&gt; type(__builtins__)\n&lt;type 'module'&gt;\n&gt;&gt;&gt; name = type(__builtins__)\n&gt;&gt;&gt; type(name)\n&lt;type 'type'&gt;\n&gt;&gt;&gt; name\n&lt;type 'module'&gt;\n\n&gt;&gt;&gt; name('my_module')\n&lt;module 'my_module' (built-in)&gt;\n&gt;&gt;&gt; name('xyz')\n&lt;module 'xyz' (built-in)&gt;\n&gt;&gt;&gt; \n</code></pre>\n\n<p>In this syntax, </p>\n\n<pre><code>my_module = type(__builtins__)('my_module')\n</code></pre>\n\n<p><code>type(__builtins__)</code> should return callable object that takes <code>('my_module')</code> as argument. <code>type(object)</code> returns callable object?</p>\n\n<p>How to understand what this is doing?</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 361, "user_id": 1457672, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2eca838e800629862e3a9c2c0ac879c1?s=128&d=identicon&r=PG", "display_name": "John Laudun", "link": "https://stackoverflow.com/users/1457672/john-laudun"}, "edited": false, "score": 0, "creation_date": 1493854064, "post_id": 43771411, "comment_id": 74584463, "body": "Nice. Okay, I&#39;m going to try this out and see if I can compile the list of tuples so that each word only appears once in the list with multiple locations -- I&#39;ll have to do that either for a single text or across the entire corpus."}, {"owner": {"reputation": 361, "user_id": 1457672, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2eca838e800629862e3a9c2c0ac879c1?s=128&d=identicon&r=PG", "display_name": "John Laudun", "link": "https://stackoverflow.com/users/1457672/john-laudun"}, "edited": false, "score": 1, "creation_date": 1493865413, "post_id": 43771411, "comment_id": 74587013, "body": "You beat me to it. Thanks for unstumping!"}], "tags": [], "owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "is_accepted": true, "score": 1, "last_activity_date": 1493854616, "last_edit_date": 1493854616, "creation_date": 1493853093, "answer_id": 43771411, "question_id": 43771328, "link": "https://stackoverflow.com/questions/43771328/python-get-item-placements-as-percentage-of-list-index-divided-by-length/43771411#43771411", "title": "Python: get item placements as percentage of list index divided by length", "body": "<p>If you <code>enumerate</code> the list, then you have the index, and can divide by the length to get relative position:</p>\n\n<p><strong>Code:</strong></p>\n\n<pre><code>word_list = 'Here is a text it is not a long text'.split()\nprint(word_list)\n\nword_with_position = [\n    (word, float(i)/len(word_list)) for i, word in enumerate(word_list)]\nprint(word_with_position)\n</code></pre>\n\n<p><strong>Results:</strong></p>\n\n<pre><code>['Here', 'is', 'a', 'text', 'it', 'is', 'not', 'a', 'long', 'text']\n\n[('Here', 0.0), ('is', 0.1), ('a', 0.2), ('text', 0.3), ('it', 0.4), \n ('is', 0.5), ('not', 0.6), ('a', 0.7), ('long', 0.8), ('text', 0.9)]\n</code></pre>\n\n<p><strong>As a Dict:</strong></p>\n\n<pre><code>from collections import defaultdict\n\nword_with_positions = defaultdict(list)\nfor i, word in enumerate(word_list):\n    word_with_positions[word].append(float(i)/len(word_list))\n\nprint(word_with_positions)\n</code></pre>\n\n<p><strong>Results:</strong></p>\n\n<pre><code>{'a': [0.2, 0.7], 'text': [0.3, 0.9], 'is': [0.1, 0.5], 'it': [0.4], \n 'Here': [0.0], 'long': [0.8], 'not': [0.6]}\n</code></pre>\n"}], "owner": {"reputation": 361, "user_id": 1457672, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2eca838e800629862e3a9c2c0ac879c1?s=128&d=identicon&r=PG", "display_name": "John Laudun", "link": "https://stackoverflow.com/users/1457672/john-laudun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 43771411, "answer_count": 1, "score": 1, "last_activity_date": 1493854616, "creation_date": 1493852441, "last_edit_date": 1493853155, "question_id": 43771328, "link": "https://stackoverflow.com/questions/43771328/python-get-item-placements-as-percentage-of-list-index-divided-by-length", "title": "Python: get item placements as percentage of list index divided by length", "body": "<p>I have a collection of texts. Each of those texts is normalized and tokenized into a list -- I'll post that code below -- so that what I have is a list of lists, each of which is a text. What I want to do is to get all the locations of each of the words in a text. </p>\n\n<p>E.g., \"Here is a text; it is not a long text.\"</p>\n\n<pre><code>here: 1        (Not counting pythonically here.)\nis:   2, 6\na:    3, 8\ntext: 4, 10\nit:   5\nnot:  7\nlong: 9\n</code></pre>\n\n<p>These positions, however, aren't comparable, so I would like to normalize them by dividing them by the length of the text:</p>\n\n<pre><code>here: 0.1\nis:   0.2, 0.6\n</code></pre>\n\n<p>My goal is then to be able to collect up <strong>all</strong> the instances of such words across a collection of texts and to average the locations in order to see if some words regularly occur in particular parts of the texts. This is what <a href=\"http://varianceexplained.org/r/tidytext-plots/\" rel=\"nofollow noreferrer\">David Robinson has done in R</a>. I am trying to do this in Python:</p>\n\n<pre><code># =-=-=-=-=-=-=-=-=-=-=\n# Data Load &amp; Tokenize\n# =-=-=-=-=-=-=-=-=-=-= \n\nimport pandas\nimport re\nfrom nltk.tokenize import WhitespaceTokenizer\n\n# LOAD\ncolnames = ['author', 'title', 'date' , 'length', 'text']\ndf = pandas.read_csv('../data/talks_3.csv', names=colnames)\ntalks = df.text.tolist()\nauthors = df.author.tolist()\ndates = df.date.tolist()\nyears = [re.sub('[A-Za-z ]', '', item) for item in dates]\nauthordate = [author+\" \"+year for author, year in zip(authors, years)]\n\n# TOKENIZE\ntokenizer = WhitespaceTokenizer()\ntexts = []\nfor talk in talks:   \n    raw = re.sub(r\"[^\\w\\d'\\s]+\",'', talk).lower()\n    tokens = tokenizer.tokenize(raw)\n    texts.append(tokens)\n</code></pre>\n\n<p>And here is where I stumble -- it goes from working code to pseudo-code pretty quickly:</p>\n\n<pre><code>def get_word_placement(listname):\n    wordplaces = {}\n    for word in listname:\n        get the word\n        get its location of listname[word]/len(listname)\n        attach those locations to word\n</code></pre>\n"}, {"tags": ["python", "opencv", "anaconda", "spyder"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 1, "creation_date": 1493852628, "post_id": 43771298, "comment_id": 74584034, "body": "is your image really called <code>sample</code> with no suffix? I have no such issues if I supply the path to a valid image."}, {"owner": {"reputation": 6626, "user_id": 4907913, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2769a366bde01ddbf60008819e371c?s=128&d=identicon&r=PG&f=1", "display_name": "thewaywewere", "link": "https://stackoverflow.com/users/4907913/thewaywewere"}, "edited": false, "score": 0, "creation_date": 1493862121, "post_id": 43771298, "comment_id": 74586208, "body": "From the error, it tells the height and width of the image are not greater than 0 pixel. What&#39;s the acutal image source you typed in the code?"}, {"owner": {"reputation": 13, "user_id": 7960195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9665abb0f2c475b24de51a2033cf24?s=128&d=identicon&r=PG&f=1", "display_name": "Tenma", "link": "https://stackoverflow.com/users/7960195/tenma"}, "edited": false, "score": 0, "creation_date": 1493863366, "post_id": 43771298, "comment_id": 74586525, "body": "I added the suffix and it worked. Appreciate for the suggestions. However, the window just keeps showing a grey image and it freezes when I click on it. The size of this jpg image is 256&#215;256."}, {"owner": {"reputation": 13, "user_id": 7960195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9665abb0f2c475b24de51a2033cf24?s=128&d=identicon&r=PG&f=1", "display_name": "Tenma", "link": "https://stackoverflow.com/users/7960195/tenma"}, "edited": false, "score": 0, "creation_date": 1493864012, "post_id": 43771298, "comment_id": 74586687, "body": "I just put waitKey and successfully worked. Much appreciate for your helps."}], "owner": {"reputation": 13, "user_id": 7960195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c9665abb0f2c475b24de51a2033cf24?s=128&d=identicon&r=PG&f=1", "display_name": "Tenma", "link": "https://stackoverflow.com/users/7960195/tenma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 352, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493852474, "creation_date": 1493852297, "last_edit_date": 1493852474, "question_id": 43771298, "link": "https://stackoverflow.com/questions/43771298/image-cant-be-shown-on-opencv-with-python", "title": "Image can&#39;t be shown on OpenCV with Python", "body": "<p>I am currently studying OpenCV using Anaconda. However, I get an error when I try showing a image.</p>\n\n<p>The environments are: Anaconda3(Python 2.7.13), Windows 7, OpenCV 3.2.0</p>\n\n<p>What I tried and the symptom is as following. </p>\n\n<pre><code>import numpy as np\nimport cv2\n\nimg = cv2.imread('sample',0)\ncv2.imshow('image',img)\n</code></pre>\n\n<p>The error</p>\n\n<pre><code>OpenCV Error: Assertion failed (size.width&gt;0 &amp;&amp; size.height&gt;0) in cv::imshow, fi\nle C:\\build\\master_winpack-bindings-win64-vc14-static\\opencv\\modules\\highgui\\src\n\\window.cpp, line 304\nTraceback (most recent call last):\nFile \"\", line 1, in \ncv2.error: C:\\build\\master_winpack-bindings-win64-vc14-static\\opencv\\modules\\hig\nhgui\\src\\window.cpp:304: error: (-215) size.width&gt;0 &amp;&amp; size.height&gt;0 in function\ncv::imshow\n</code></pre>\n\n<p>Appreciate for your advice.</p>\n"}, {"tags": ["python", "pandas", "numpy", "data-acquisition"], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 6736902, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/PLNa5.jpg?s=128&g=1", "display_name": "philiporlando", "link": "https://stackoverflow.com/users/6736902/philiporlando"}, "edited": false, "score": 0, "creation_date": 1493855890, "post_id": 43771542, "comment_id": 74584941, "body": "Thanks for your input. I really need the while loop to work for this application, as I don&#39;t have an idea of my data&#39;s range ahead of time."}, {"owner": {"reputation": 3627, "user_id": 1753919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m9UUd.jpg?s=128&g=1", "display_name": "plasmon360", "link": "https://stackoverflow.com/users/1753919/plasmon360"}, "reply_to_user": {"reputation": 779, "user_id": 6736902, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/PLNa5.jpg?s=128&g=1", "display_name": "philiporlando", "link": "https://stackoverflow.com/users/6736902/philiporlando"}, "edited": false, "score": 0, "creation_date": 1493857173, "post_id": 43771542, "comment_id": 74585040, "body": "Glad to help. I just used for loop as a demonstration, you can still use your while loop. see my latest edit."}], "tags": [], "owner": {"reputation": 3627, "user_id": 1753919, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m9UUd.jpg?s=128&g=1", "display_name": "plasmon360", "link": "https://stackoverflow.com/users/1753919/plasmon360"}, "is_accepted": false, "score": 1, "last_activity_date": 1493857132, "last_edit_date": 1493857132, "creation_date": 1493854028, "answer_id": 43771542, "question_id": 43771240, "link": "https://stackoverflow.com/questions/43771240/appending-rows-to-a-pandas-dataframe/43771542#43771542", "title": "Appending Rows to a Pandas DataFrame", "body": "<p>you are appending a dataframe with lists (that grow with time) for each field  every time it enters a while loop. But you should be adding  a dataframe with a list with only one element for each field at a time. please see example below</p>\n\n<p>you are essentially doing this:</p>\n\n<pre><code>co = [] ## carbon monoxide concentration in ppm\ndata = [] ## raw analog output between 0-5V\ntimes = [] ## timestamp\n\ndf = pd.DataFrame()\nfor i in range(0,5):\n    data.append(i)\n    times.append(i)\n    co.append(i)\n    df = df.append(pd.DataFrame({'co':co, 'volts':data, 'datetime':times}))\nprint df\n</code></pre>\n\n<p>which results in</p>\n\n<pre><code>   co  datetime  volts\n0   0         0      0\n0   0         0      0\n1   1         1      1\n0   0         0      0\n1   1         1      1\n2   2         2      2\n0   0         0      0\n1   1         1      1\n2   2         2      2\n3   3         3      3\n0   0         0      0\n1   1         1      1\n2   2         2      2\n3   3         3      3\n4   4         4      4\n</code></pre>\n\n<p>but you should be doing this</p>\n\n<pre><code>df = pd.DataFrame()\nfor i in range(0,5):\n    df = df.append(pd.DataFrame({'co':[i], 'volts':[i], 'datetime':[i]}))\nprint df\n</code></pre>\n\n<p>which results in</p>\n\n<pre><code>   co  datetime  volts\n0   0         0      0\n0   1         1      1\n0   2         2      2\n0   3         3      3\n0   4         4      4\n</code></pre>\n\n<p>so your code should like </p>\n\n<pre><code>## Source libraries:\nfrom __future__ import print_function\nimport UniversalLibrary as UL\nimport time, os, io, csv, datetime\nimport pandas as pd\n\n## Specify PMD settings:\nBoardNum = 0\nGain = UL.BIP5VOLTS\nChan = 0\n\n## Create empty dataframe to fill:\ndf = pd.DataFrame()\n\n## Set filepath:\nfilename = \"~/pmd_data.csv\"\n\nwhile True:\n    ts = time.time()\n    DataValue = UL.cbAIn(BoardNum, Chan, Gain)\n    EngUnits = UL.cbToEngUnits(BoardNum, Gain, DataValue)\n    ppm = EngUnits * 10 ## 1 Volt = 10ppm of carbon monoxide\n    times = (datetime.datetime.fromtimestamp(ts).strftime('%Y-%m-%d %H:%M:%S'))\n    df = df.append(pd.DataFrame({'co':[ppm], 'volts':[EngUnits], 'datetime':[times]})) \n    print(df)\n    df.to_csv(filename, sep = ',', index = False, encoding = 'utf-8')\n    time.sleep(1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 779, "user_id": 6736902, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/PLNa5.jpg?s=128&g=1", "display_name": "philiporlando", "link": "https://stackoverflow.com/users/6736902/philiporlando"}, "edited": false, "score": 0, "creation_date": 1493855806, "post_id": 43771635, "comment_id": 74584923, "body": "This did the trick! Thank you so much for your help! I am new to python and this taught me  how to use <code>columns</code> and <code>df.loc[counter]</code> in a way that I won&#39;t forget. Do you have any quick recommendations as to the best way to print the output to the console? I&#39;m using <code>print(df.loc[counter])</code> at the moment, but the output stacks my columns in long format instead of the desired wide format. I&#39;m now able to acquire data from a +20 year old air quality instrument! Thanks again!"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 779, "user_id": 6736902, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/PLNa5.jpg?s=128&g=1", "display_name": "philiporlando", "link": "https://stackoverflow.com/users/6736902/philiporlando"}, "edited": false, "score": 0, "creation_date": 1493855882, "post_id": 43771635, "comment_id": 74584940, "body": "@spacedSparking Glad I can add life to that instrument.  Try <code>print(df.loc[[counter]])</code>"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 1, "last_activity_date": 1493854504, "creation_date": 1493854504, "answer_id": 43771635, "question_id": 43771240, "link": "https://stackoverflow.com/questions/43771240/appending-rows-to-a-pandas-dataframe/43771635#43771635", "title": "Appending Rows to a Pandas DataFrame", "body": "<p>Since you don't use the index specifically, I'd keep a counter and use it to add a new row to an existing dataframe.</p>\n\n<p>I'd rewrite the <code>while</code> loop like this</p>\n\n<pre><code>## Source libraries:\nfrom __future__ import print_function\nimport UniversalLibrary as UL\nimport time, os, io, csv, datetime\nimport pandas as pd\n\n## Specify PMD settings:\nBoardNum = 0\nGain = UL.BIP5VOLTS\nChan = 0\n\n## Create empty lists and a dataframe to fill:\ndf = pd.DataFrame(columns=['co', 'volts', 'datetime'])\n\n## Set filepath:\nfilename = \"~/pmd_data.csv\"\n\ncounter = 0\nwhile True:\n    ts = time.time()\n    DataValue = UL.cbAIn(BoardNum, Chan, Gain)\n    EngUnits = UL.cbToEngUnits(BoardNum, Gain, DataValue)\n    ppm = EngUnits * 10 ## 1 Volt = 10ppm of carbon monoxide\n    df.loc[counter] = pd.Series(dict(\n            co=ppm, volts=EngUnits, datetime=ts\n        ))\n    ## This line of code is not providing the desired result:\n    counter += 1\n    df.to_csv(filename, sep = ',', index = False, encoding = 'utf-8')\n    time.sleep(1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 7987753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a810676c1413bd97eb3dd59b05f6a8b1?s=128&d=identicon&r=PG", "display_name": "Matt Morgan", "link": "https://stackoverflow.com/users/7987753/matt-morgan"}, "is_accepted": false, "score": 2, "last_activity_date": 1508960763, "creation_date": 1508960763, "answer_id": 46940908, "question_id": 43771240, "link": "https://stackoverflow.com/questions/43771240/appending-rows-to-a-pandas-dataframe/46940908#46940908", "title": "Appending Rows to a Pandas DataFrame", "body": "<p>If you're just looking to append, then you don't need a counter with .loc. You can just change it to df.loc[len(df)] = row . This will always write a new row at the end of the DataFrame.</p>\n\n<p>Updated code from piRSquared code here:</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>## Source libraries:\nfrom __future__ import print_function\nimport UniversalLibrary as UL\nimport time, os, io, csv, datetime\nimport pandas as pd\n\n## Specify PMD settings:\nBoardNum = 0\nGain = UL.BIP5VOLTS\nChan = 0\n\n## Create empty lists and a dataframe to fill:\ndf = pd.DataFrame(columns=['co', 'volts', 'datetime'])\n\n## Set filepath:\nfilename = \"~/pmd_data.csv\"\n\nwhile True:\n    ts = time.time()\n    DataValue = UL.cbAIn(BoardNum, Chan, Gain)\n    EngUnits = UL.cbToEngUnits(BoardNum, Gain, DataValue)\n    ppm = EngUnits * 10 ## 1 Volt = 10ppm of carbon monoxide\n    df.loc[len(df)] = pd.Series(dict(\n            co=ppm, volts=EngUnits, datetime=ts\n        ))\n    ## This line of code is not providing the desired result:\n    df.to_csv(filename, sep = ',', index = False, encoding = 'utf-8')\n    time.sleep(1)\n</code></pre>\n"}], "owner": {"reputation": 779, "user_id": 6736902, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/PLNa5.jpg?s=128&g=1", "display_name": "philiporlando", "link": "https://stackoverflow.com/users/6736902/philiporlando"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3726, "favorite_count": 1, "accepted_answer_id": 43771635, "answer_count": 3, "score": 3, "last_activity_date": 1508960763, "creation_date": 1493851971, "last_edit_date": 1493853441, "question_id": 43771240, "link": "https://stackoverflow.com/questions/43771240/appending-rows-to-a-pandas-dataframe", "title": "Appending Rows to a Pandas DataFrame", "body": "<p>I'm trying to read an analog signal from a Measurement-Computing Personal Measurement Device (PMD-1208FS) and then write it to a file with a corresponding timestamp for each observation. I would like to append to this file once every second with a new observation. </p>\n\n<p>The <code>PyUniversalLibrary</code> allows me to read from the device, but I'm stuck trying to figure out how to save the information into a dataframe. This <a href=\"http://scipy.github.io/old-wiki/pages/Cookbook/Data_Acquisition_with_PyUL\" rel=\"nofollow noreferrer\">example</a> was helpful for reading data from the PMD, but it doesn't provide any data logging examples. </p>\n\n<p>The example below gets close to solving this problem, but the <code>df.append(pd.DataFrame()</code> function is not providing me with the desired result. This function ends up appending the most recent dataframe to the bottom of the previously saved one, rather than just appending the new data. The result is a dataframe with many duplicate dataframes in sequence. </p>\n\n<h2>Here's my code:</h2>\n\n<pre><code>## Source libraries:\nfrom __future__ import print_function\nimport UniversalLibrary as UL\nimport time, os, io, csv, datetime\nimport pandas as pd\n\n## Specify PMD settings:\nBoardNum = 0\nGain = UL.BIP5VOLTS\nChan = 0\n\n## Create empty lists and a dataframe to fill:\nco = [] ## carbon monoxide concentration in ppm\ndata = [] ## raw analog output between 0-5V\ntimes = [] ## timestamp\ndf = pd.DataFrame()\n\n\n## Set filepath:\nfilename = \"~/pmd_data.csv\"\n\nwhile True:\n    ts = time.time()\n    DataValue = UL.cbAIn(BoardNum, Chan, Gain)\n    EngUnits = UL.cbToEngUnits(BoardNum, Gain, DataValue)\n    ppm = EngUnits * 10 ## 1 Volt = 10ppm of carbon monoxide\n    data.append(EngUnits)\n    times.append(datetime.datetime.fromtimestamp(ts).strftime('%Y-%m-%d %H:%M:%S'))\n    co.append(ppm)\n    ## This line of code is not providing the desired result:\n    df = df.append(pd.DataFrame({'co':ppm, 'volts':data, 'datetime':times})) \n    print(df)\n    df.to_csv(filename, sep = ',', index = False, encoding = 'utf-8')\n    time.sleep(1)\n</code></pre>\n\n<h2>Current Output:</h2>\n\n<pre><code>    co    datetime    volts\n0    13.8    2017-05-03 15:57:19   1.38\n1    13.8    2017-05-03 15:57:19   1.38    \n2    13.9    2017-05-03 15:57:20   1.39\n3    13.8    2017-05-03 15:57:19   1.38\n4    13.9    2017-05-03 15:57:20   1.39\n5    14.2    2017-05-03 15:57:21   1.42\n</code></pre>\n\n<h2>Desired Output:</h2>\n\n<pre><code>    co    datetime    volts\n0    13.8    2017-05-03 15:57:19   1.38\n1    13.9    2017-05-03 15:57:20   1.39\n2    14.2    2017-05-03 15:57:21   1.42\n</code></pre>\n"}, {"tags": ["python", "animation", "pygame"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6630384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3306ae7afa4464a8e1abaf0f8287721d?s=128&d=identicon&r=PG&f=1", "display_name": "Trevor Murphy", "link": "https://stackoverflow.com/users/6630384/trevor-murphy"}, "edited": false, "score": 1, "creation_date": 1493917972, "post_id": 43772798, "comment_id": 74618583, "body": "I appreciate it(along with the side notes), I always like to know what can be done better. I sort of got it to work but I am going to try to implement this, it seems to be a lot cleaner. Thanks again! :)"}], "tags": [], "owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "is_accepted": true, "score": 0, "last_activity_date": 1493864501, "creation_date": 1493864501, "answer_id": 43772798, "question_id": 43771197, "link": "https://stackoverflow.com/questions/43771197/pygame-animated-object-is-not-drawn-over/43772798#43772798", "title": "Pygame Animated Object is not Drawn over", "body": "<p>Here's one way to do it. First store a copy of the original image in the <code>Sword</code> class and give it a <code>stabbing</code> attribute. Calling <code>stab()</code> will rotate the image and set <code>self.stabbing = True</code>. Now in the <code>update</code> method you look if it's still stabbing, decrement the <code>self.stabtime</code> and if it's <code>&lt;= 0</code> reset the image and angle.</p>\n\n<pre><code>SWORD_IMAGE = pygame.image.load('images\\\\sword.png').convert()\n\nclass Sword(pygame.sprite.Sprite):\n\n    def __init__(self, x1, y1, angle=-25, stabtime=30):\n        super().__init__()\n        self.angle = angle\n        self.image = pygame.transform.rotate(SWORD_IMAGE, self.angle)\n        self.orig_image = self.image\n        self.rect = self.image.get_rect(topleft=(x1, y1))\n        self.stabtime = stabtime\n        self.stabbing = False\n\n    def update(self):\n        if self.stabbing:\n            if self.stabtime &lt;= 0:\n                self.reset_stab()\n            self.stabtime -= 1\n\n    def stab(self):\n        self.angle = -65\n        self.image = pygame.transform.rotate(self.orig_image, self.angle)\n        self.stabbing = True\n\n    def reset_stab(self):\n        self.stabtime = 30\n        self.image = self.orig_image\n        self.angle = -25\n        self.stabbing = False\n</code></pre>\n\n<p>Side notes:</p>\n\n<p>Don't load images again and again from your hard disk inside the while loop, just load them once globally and reuse them in the program. Also, convert images with the <code>convert()</code> or <code>convert_alpha()</code> methods to improve the performance. </p>\n\n<p>Don't call <code>pygame.key.get_pressed()</code> more than one time, call it in the while loop and then pass the <code>key</code> tuple to the objects that need it. </p>\n"}], "owner": {"reputation": 25, "user_id": 6630384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3306ae7afa4464a8e1abaf0f8287721d?s=128&d=identicon&r=PG&f=1", "display_name": "Trevor Murphy", "link": "https://stackoverflow.com/users/6630384/trevor-murphy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 43772798, "answer_count": 1, "score": 1, "last_activity_date": 1493864501, "creation_date": 1493851641, "question_id": 43771197, "link": "https://stackoverflow.com/questions/43771197/pygame-animated-object-is-not-drawn-over", "title": "Pygame Animated Object is not Drawn over", "body": "<p>I am writing a simple python game for class using pygame. I have coded for a short amount of time but have not used graphics until this project. I have already created a 'fireball' that moves from the player to the point clicked.\nI am working on a warrior, he has a sword the travels with him. I also have got the slash-looking motion I want. You press the space bar to have the sword change angles then it comes back up to its regular position. The problem I am having is that once the image/object(sword) is drawn in the down position it stays in that position. Though the original image rises back to the original position. I was hoping someone would have a point in the right direction. This is my first graphical game. I know this usually has something to do with what line the object is drawn on in the main, however, i have messed around with that quite a bit with no luck.  Also, if I am going about this incorrectly don't hesitate to say anything.\nAny help is appreciated, Thanks.</p>\n\n<p>class Player(pygame.sprite.Sprite):</p>\n\n<pre><code>def __init__(self, name):\n    pygame.sprite.Sprite.__init__(self)\n    self.name = name\n    self.level = 1\n    self.xp = 0\n    self.health = 100\n    self.power = 100\n    self.disc = 0\n    self.currentAtk = 1\n\n\ndef draw(self, screen):\n    screen.blit(self.image, (self.rect.x, self.rect.y))\n\ndef update(self):\n    key = pygame.key.get_pressed()\n\n    if key[K_SPACE]:\n        if self.disc == 1 and self.currentAtk == 1:\n            self.warsword.stab()\n</code></pre>\n\n<p>class Sword(pygame.sprite.Sprite):</p>\n\n<pre><code>image = pygame.image.load('images\\\\sword.png')\n\ndef __init__(self, x1, y1, angle = -25, stabtime = 5):\n    pygame.sprite.Sprite.__init__(self)\n    self.angle = angle\n    self.image = pygame.transform.rotate(Sword.image, self.angle)\n    self.rect = self.image.get_rect()\n    self.rect.x, self.rect.y = x1, y1\n    self.stabtime = stabtime\n    self.repeat = 2\n\ndef update(self):\n    key = pygame.key.get_pressed()\n\n    if key[K_a] and self.rect.x &gt;= 72:\n        self.rect.x -= 1\n    if key[K_d] and self.rect.x &lt;= 572:\n        self.rect.x += 1\n    if key[K_w] and self.rect.y &gt;= 154:\n        self.rect.y -= 1\n    if key[K_s] and self.rect.y &lt;= 309:\n        self.rect.y += 1\n\ndef draw(self, screen, x, y):\n    screen.blit(self.image, (x, y))\n\ndef stab(self):\n    if self.angle != -90 and self.stabtime == 5:\n        self.angle = -90\n        self.rect.y += 15\n    if self.stabtime &gt;= -5:\n        self.image = pygame.transform.rotate(self.image, self.angle)\n    else:\n        pygame.sprite.Sprite.update(self)\n    self.stabtime -= 1\n</code></pre>\n\n<p>class Warrior(Player):</p>\n\n<pre><code>image = pygame.image.load('images\\\\warrior.png')\nSwordX = 0\nSwordY = 0\ndef __init__(self, name, x, y):\n    super(Warrior, self).__init__(name)\n    self.disc = 1\n    self.image = Warrior.image\n    self.rect = self.image.get_rect()\n    self.rect.x = x\n    self.rect.y = y\n    Warrior.SwordX = self.rect.x + 12\n    Warrior.SwordY = self.rect.y + 10\n    self.warsword = Sword(Warrior.SwordX, Warrior.SwordY)\n    atks.add(self.warsword)\n</code></pre>\n\n<p>def main():</p>\n\n<pre><code>chars = pygame.sprite.Group(())\nscreen = pygame.display.set_mode((640, 480))\na = Warrior('Fago', 250, 200)\nchars.add(a)\nscreen = pygame.display.set_mode((640, 480))\nwhile True:\n\n    chars.update()\n    atks.update()\n    screen.blit(pygame.image.load('images\\\\arena.png'), (0,0))\n    atks.draw(screen)\n\n    chars.draw(screen)\n\n    pygame.display.update()\n    CLOCK.tick(75)\n    pygame.event.pump()\n</code></pre>\n\n<p>main()</p>\n"}, {"tags": ["python", "dictionary", "iteration"], "comments": [{"owner": {"reputation": 3467, "user_id": 171450, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3babaa84012b7ec17726a6d899590b1?s=128&d=identicon&r=PG", "display_name": "Aidan Kane", "link": "https://stackoverflow.com/users/171450/aidan-kane"}, "edited": false, "score": 0, "creation_date": 1493851587, "post_id": 43771147, "comment_id": 74583745, "body": "Are you using the standard libs csv module to create the csv? Also, do you want to take care to not alter the original objects?"}, {"owner": {"reputation": 1293, "user_id": 7492420, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ca34e32c5b0e1aae0c1d5976cdd8ad60?s=128&d=identicon&r=PG&f=1", "display_name": "jovicbg", "link": "https://stackoverflow.com/users/7492420/jovicbg"}, "reply_to_user": {"reputation": 3467, "user_id": 171450, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3babaa84012b7ec17726a6d899590b1?s=128&d=identicon&r=PG", "display_name": "Aidan Kane", "link": "https://stackoverflow.com/users/171450/aidan-kane"}, "edited": false, "score": 0, "creation_date": 1493851849, "post_id": 43771147, "comment_id": 74583820, "body": "No, I don&#39;t care.  Actually, I use xlsx for excel file. Do you have any advice, maybe it&#39;s easier than iterating through dicts?"}], "answers": [{"comments": [{"owner": {"reputation": 2284, "user_id": 3684792, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/24880a587c5f7bece55cd19c733e223e?s=128&d=identicon&r=PG&f=1", "display_name": "user3684792", "link": "https://stackoverflow.com/users/3684792/user3684792"}, "edited": false, "score": 0, "creation_date": 1493851752, "post_id": 43771172, "comment_id": 74583785, "body": "I would exploit the fact that  str(None) == &#39;None&#39;. Just personal preference against this kind of string literal"}, {"owner": {"reputation": 1293, "user_id": 7492420, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ca34e32c5b0e1aae0c1d5976cdd8ad60?s=128&d=identicon&r=PG&f=1", "display_name": "jovicbg", "link": "https://stackoverflow.com/users/7492420/jovicbg"}, "edited": false, "score": 0, "creation_date": 1493851970, "post_id": 43771172, "comment_id": 74583854, "body": "I have tried this, but I need to update empty dicts with that new values. That&#39;s where i got confused @AidanKane"}, {"owner": {"reputation": 3467, "user_id": 171450, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3babaa84012b7ec17726a6d899590b1?s=128&d=identicon&r=PG", "display_name": "Aidan Kane", "link": "https://stackoverflow.com/users/171450/aidan-kane"}, "edited": false, "score": 0, "creation_date": 1493852067, "post_id": 43771172, "comment_id": 74583874, "body": "I probably wouldn&#39;t. You might accidentally end up converting bytes into a string like &quot;b&#39;thing&#39;&quot; if you use <code>str()</code> willy-nilly."}, {"owner": {"reputation": 3467, "user_id": 171450, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3babaa84012b7ec17726a6d899590b1?s=128&d=identicon&r=PG", "display_name": "Aidan Kane", "link": "https://stackoverflow.com/users/171450/aidan-kane"}, "reply_to_user": {"reputation": 1293, "user_id": 7492420, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ca34e32c5b0e1aae0c1d5976cdd8ad60?s=128&d=identicon&r=PG&f=1", "display_name": "jovicbg", "link": "https://stackoverflow.com/users/7492420/jovicbg"}, "edited": false, "score": 0, "creation_date": 1493852131, "post_id": 43771172, "comment_id": 74583892, "body": "@jovicbg so you have some objects that are totally empty dicts? Do they all have a consistent structure?"}, {"owner": {"reputation": 1293, "user_id": 7492420, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ca34e32c5b0e1aae0c1d5976cdd8ad60?s=128&d=identicon&r=PG&f=1", "display_name": "jovicbg", "link": "https://stackoverflow.com/users/7492420/jovicbg"}, "edited": false, "score": 0, "creation_date": 1493853123, "post_id": 43771172, "comment_id": 74584203, "body": "No, no.  When I tried to write a code I&#39;ve first create empty dict so I could update it later with new values (after code which is similar to the code you wrote here). Anyway, I don&#39;t know how to keep that values"}, {"owner": {"reputation": 1293, "user_id": 7492420, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ca34e32c5b0e1aae0c1d5976cdd8ad60?s=128&d=identicon&r=PG&f=1", "display_name": "jovicbg", "link": "https://stackoverflow.com/users/7492420/jovicbg"}, "edited": false, "score": 0, "creation_date": 1493853247, "post_id": 43771172, "comment_id": 74584244, "body": "New update code sample takes a huge amount of time to processing, but I hope it will work."}], "tags": [], "owner": {"reputation": 3467, "user_id": 171450, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a3babaa84012b7ec17726a6d899590b1?s=128&d=identicon&r=PG", "display_name": "Aidan Kane", "link": "https://stackoverflow.com/users/171450/aidan-kane"}, "is_accepted": false, "score": 1, "last_activity_date": 1493852923, "last_edit_date": 1493852923, "creation_date": 1493851501, "answer_id": 43771172, "question_id": 43771147, "link": "https://stackoverflow.com/questions/43771147/conditionally-change-values-of-inner-dict-in-python/43771172#43771172", "title": "Conditionally change values of inner dict in python", "body": "<p>One option is just to brute-force through all the values of all the objects and replace the Nones.</p>\n\n<pre><code>for obj in objects:\n    for k,v in obj.items():\n        if v is None:\n            obj[k] = 'None'\n</code></pre>\n\n<p>EDIT It's best to use the python csv module where possible.</p>\n\n<p>In this case we can make a custom DictWriter to handle the None situations for us (it might need tweaking depending on the data).</p>\n\n<pre><code>import csv\n\nclass NoneSafeWriter(csv.DictWriter):\n\n    def _extract_val(self, rowdict, key):\n        v = rowdict.get(key)\n        return 'None' if v == None else v\n\n    def _dict_to_list(self, rowdict):\n        return [self._extract_val(rowdict, key) for key in self.fieldnames]\n\nwith open('output.csv', 'w') as csvfile:\n    fieldnames = ['cellload', 'cellthr', 'cellcap']\n    writer = NoneSafeWriter(csvfile, fieldnames=fieldnames)\n    writer.writeheader()\n    writer.writerows(objects.values())\n</code></pre>\n"}], "owner": {"reputation": 1293, "user_id": 7492420, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ca34e32c5b0e1aae0c1d5976cdd8ad60?s=128&d=identicon&r=PG&f=1", "display_name": "jovicbg", "link": "https://stackoverflow.com/users/7492420/jovicbg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 259, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493860399, "creation_date": 1493851306, "last_edit_date": 1493860399, "question_id": 43771147, "link": "https://stackoverflow.com/questions/43771147/conditionally-change-values-of-inner-dict-in-python", "title": "Conditionally change values of inner dict in python", "body": "<p>I have dicts in dict and need to change where the value of inner dicts is None to 'None' so it could show in csv file, not to be a blank cell. \nExample:</p>\n\n<pre><code>{Object1 : {cellload : 1, cellthr : None, cellcap : 40}\nObject2 : {cellload : None, cellthr : 2, cellcap : 40}\n...\nObjectN : {cellload : None, cellthr : 5, cellcap : 50}}\n</code></pre>\n\n<p>So, I don't need None or NaN values, that can't be recognized in csv file, I need 'None' as a string. </p>\n\n<p>I've tried this:</p>\n\n<pre><code>def replace(main_dif):\n    for k, v in main_dif.items():\n        for ki, ve in v.items():\n            if ve is None:\n                ve = \"None\"\n            elif type(ve) == type(main_dif):\n                replace(ve)\nreplace(main_dif)\n</code></pre>\n\n<p>And this:</p>\n\n<pre><code>outer = {}\nfor k, v in main_dif.items():\n    inner = {}\n    for ki, ve in v.items():\n        if ve is None:\n            ve == 'None'\n        else:\n            ve = ve\n        inner.update({ki:ve})\n    outer.update({k:inner})\n</code></pre>\n\n<p>And None is there just like always, like I did nothing. </p>\n"}, {"tags": ["python", "pandas", "matplotlib", "seaborn", "categorical-data"], "comments": [{"owner": {"reputation": 35611, "user_id": 1533576, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7cd43cc3fa88edc6f2dbdad5fcbc85c1?s=128&d=identicon&r=PG", "display_name": "mwaskom", "link": "https://stackoverflow.com/users/1533576/mwaskom"}, "edited": false, "score": 0, "creation_date": 1493855464, "post_id": 43771135, "comment_id": 74584839, "body": "It would be a lot better if you added some code to at least generate an example dataset or shared your dataset as a csv. As is you&#39;re asking potentially answerers to do a lot of work generating the data themselves before helping you."}, {"owner": {"reputation": 101, "user_id": 5900540, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af21215592e87767f83ec5439fce3989?s=128&d=identicon&r=PG&f=1", "display_name": "jdiction", "link": "https://stackoverflow.com/users/5900540/jdiction"}, "reply_to_user": {"reputation": 35611, "user_id": 1533576, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7cd43cc3fa88edc6f2dbdad5fcbc85c1?s=128&d=identicon&r=PG", "display_name": "mwaskom", "link": "https://stackoverflow.com/users/1533576/mwaskom"}, "edited": false, "score": 0, "creation_date": 1493858138, "post_id": 43771135, "comment_id": 74585212, "body": "Thank you @mwaskom , that&#39;s a good idea"}], "answers": [{"tags": [], "owner": {"reputation": 28401, "user_id": 2666859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LtKyC.png?s=128&g=1", "display_name": "Serenity", "link": "https://stackoverflow.com/users/2666859/serenity"}, "is_accepted": true, "score": 3, "last_activity_date": 1493890944, "creation_date": 1493890944, "answer_id": 43779303, "question_id": 43771135, "link": "https://stackoverflow.com/questions/43771135/lexical-dispersion-plot-is-seaborn/43779303#43779303", "title": "Lexical dispersion plot is seaborn", "body": "<p>You have to use <code>stripplot</code>. Firstly, you have to properly read datetime column of your data and then plot it:</p>\n\n<pre><code>import pandas as pd\nimport matplotlib.pyplot as plt\nimport seaborn as sns\n\n# datetime parser\ndateparse = lambda x: pd.datetime.strptime(x, '%y/%m/%d %H:%M')\ndf = pd.read_csv('./sample_data.csv',parse_dates=['DateTime'], date_parser=dateparse)\n\n# set size of figure\nplt.figure(figsize=(22,6))\n# use horizontal stripplot with x marker size of 5\nsns.stripplot(y='Weather',x='DateTime', data=df,\n orient='h', marker='X', color='navy', size=5)\n# rotate x tick labels\nplt.xticks(rotation=15)\n# remover borders of plot\nplt.tight_layout()\nplt.show()\n</code></pre>\n\n<p>Figure is clickable\n<a href=\"https://i.stack.imgur.com/2gv4f.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2gv4f.png\" alt=\"Figure is clickable\"></a></p>\n"}], "owner": {"reputation": 101, "user_id": 5900540, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/af21215592e87767f83ec5439fce3989?s=128&d=identicon&r=PG&f=1", "display_name": "jdiction", "link": "https://stackoverflow.com/users/5900540/jdiction"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 687, "favorite_count": 1, "accepted_answer_id": 43779303, "answer_count": 1, "score": 3, "last_activity_date": 1493891033, "creation_date": 1493851235, "last_edit_date": 1493891033, "question_id": 43771135, "link": "https://stackoverflow.com/questions/43771135/lexical-dispersion-plot-is-seaborn", "title": "Lexical dispersion plot is seaborn", "body": "<p>I am using the seaborn module to produce a plot similar to the example below.</p>\n\n<pre><code>import pandas as pd\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport seaborn as sns\nlocation = \"/global/scratch/umalmonj/WRF/juris/golden_hourly_manual_obs.csv\"\n\ndf = pd.read_csv(location,usecols= [\"Year\",\"Month\",\"Day\",\"Time\",\"Weather\"],parse_dates=[[\"Year\",\"Month\",\"Day\",\"Time\"]])\n</code></pre>\n\n<p>I have a df that looks like:</p>\n\n<pre><code>     Year_Month_Day_Time        Weather\n0    2010-01-01 00:00:00            NaN\n1    2010-01-01 01:00:00            NaN\n2    2010-01-01 02:00:00            NaN\n..    \n7    2010-01-01 07:00:00           Snow\n8    2010-01-01 08:00:00           Snow\n9    2010-01-01 09:00:00   Snow Showers\n..\n18   2010-01-01 18:00:00            NaN\n19   2010-01-01 19:00:00            NaN\n20   2010-01-01 20:00:00            NaN\n...                  ...            ...\n2861 2010-04-30 05:00:00   Mainly Clear\n2862 2010-04-30 06:00:00   Mainly Clear\n2863 2010-04-30 07:00:00  Mostly Cloudy\n</code></pre>\n\n<p>I want to create a seaborn stripplot with the different weather categories something similar to the following plot. <a href=\"https://i.stack.imgur.com/uyCaB.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uyCaB.jpg\" alt=\"lexical dispersion plot\"></a></p>\n\n<p>Also known as a lexical dispersion plot.</p>\n\n<p>Any help would be great!</p>\n\n<p>My sample dataset in a csv format can be found here \n<a href=\"https://www.dropbox.com/s/ulzz5x3rsl2yjd5/sample_data.csv?dl=0\" rel=\"nofollow noreferrer\">https://www.dropbox.com/s/ulzz5x3rsl2yjd5/sample_data.csv?dl=0</a></p>\n"}, {"tags": ["python", "arrays", "performance", "numpy", "zipfile"], "comments": [{"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1493850971, "post_id": 43771058, "comment_id": 74583558, "body": "Are you clearing your cache after the first test? Because if not, your subsequent tests aren&#39;t really measuring reading the file from disk."}, {"owner": {"reputation": 33, "user_id": 6874238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78b647ee5b84adc760f42a9abb3c94d4?s=128&d=identicon&r=PG&f=1", "display_name": "P. Zeek", "link": "https://stackoverflow.com/users/6874238/p-zeek"}, "reply_to_user": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1493851436, "post_id": 43771058, "comment_id": 74583698, "body": "I think so. If I start the script which executes nothing but the np.fromfile/zfile-test from scratch, I get 0.08s and 6s, every single time. I&#39;m not sure where caching could even occur in this."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1493852053, "post_id": 43771058, "comment_id": 74583871, "body": "For loading a csv file, the <code>pandas</code> reader is supposedly these fastest.  Numpy loaders read the file line by line and build a list of lists from that.  I don&#39;t think the zip part makes a difference."}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1493854596, "post_id": 43771058, "comment_id": 74584594, "body": "The filesystem caches, that&#39;s where. Agreed with @hpaulj that the pandas csv reader is one of the fastest ways to ingest something csv-like into python."}, {"owner": {"reputation": 4335, "user_id": 1898534, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/XKxNa.jpg?s=128&g=1", "display_name": "PlagTag", "link": "https://stackoverflow.com/users/1898534/plagtag"}, "edited": false, "score": 0, "creation_date": 1493883012, "post_id": 43771058, "comment_id": 74593867, "body": "@P.Zeek, you could zcat the vial in the shell via subprocess and pipe that stream to pandas, might be faster. consider storing your files from bandas to bcolz --&gt; way better"}, {"owner": {"reputation": 33, "user_id": 6874238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78b647ee5b84adc760f42a9abb3c94d4?s=128&d=identicon&r=PG&f=1", "display_name": "P. Zeek", "link": "https://stackoverflow.com/users/6874238/p-zeek"}, "reply_to_user": {"reputation": 4335, "user_id": 1898534, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/XKxNa.jpg?s=128&g=1", "display_name": "PlagTag", "link": "https://stackoverflow.com/users/1898534/plagtag"}, "edited": false, "score": 0, "creation_date": 1493886445, "post_id": 43771058, "comment_id": 74595885, "body": "@PlagTag One of my first attempts was using &#39;unzip&#39; in the shell and having numpy read from that stream. This took way longer than the code I posted above, so I abandoned that approach, believing the pipe to be the bottleneck. If there is a better way to do this, it would be great if you would post an answer and show me an example (that would also yield the np.dtypes I need)."}, {"owner": {"reputation": 33, "user_id": 6874238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78b647ee5b84adc760f42a9abb3c94d4?s=128&d=identicon&r=PG&f=1", "display_name": "P. Zeek", "link": "https://stackoverflow.com/users/6874238/p-zeek"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1493886899, "post_id": 43771058, "comment_id": 74596156, "body": "@hpaulj &amp; pvg why doesn&#39;t the zip part make a difference? And I don&#39;t know of a way to get the np.dtypes I need using pandas. An example that works with the data-snippet above would be nice."}, {"owner": {"reputation": 33, "user_id": 6874238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78b647ee5b84adc760f42a9abb3c94d4?s=128&d=identicon&r=PG&f=1", "display_name": "P. Zeek", "link": "https://stackoverflow.com/users/6874238/p-zeek"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1493888667, "post_id": 43771058, "comment_id": 74597346, "body": "@hpaulj I also do not understand why pandas reader is considered the fastest, when in fact it is 35 times slower then numpy.fromfile (according to the benchmarking done here <a href=\"https://softwarerecs.stackexchange.com/questions/7463/fastest-python-library-to-read-a-csv-file\" title=\"fastest python library to read a csv file\">softwarerecs.stackexchange.com/questions/7463/&hellip;</a>). I assume pd.read_csv and pandas.io.parsers.read_csv (which allegedly beats everybody else) are the same, since pandas <b>init</b> does not contain the &#39;io&#39;-reference."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1493899984, "post_id": 43771058, "comment_id": 74605314, "body": "If you can use the array that <code>fromfile</code> gives you, use it.  It reads the whole file as a flat sequence of numbers.  Most <code>csv</code> readers want the features that <code>pandas</code> handles, like headers, mixed column types, missing data etc."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1493900410, "post_id": 43771058, "comment_id": 74605625, "body": "If I read the 2014 benchmarks correctly, <code>fromfile</code> is being used in its binary mode, reading a file created with <code>tofile</code>.  <code>fromfile</code> in text mode might be much slower. Test it yourself."}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6874238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78b647ee5b84adc760f42a9abb3c94d4?s=128&d=identicon&r=PG&f=1", "display_name": "P. Zeek", "link": "https://stackoverflow.com/users/6874238/p-zeek"}, "edited": false, "score": 0, "creation_date": 1493887807, "post_id": 43772770, "comment_id": 74596794, "body": "The extracted file (80MB) needs 30 times more space than the zip file (2.6MB), because the content of the csv-file is redundant at times and can therefore easily be compressed. That is why I am trying to extract only the required files on demand and in memory only."}], "tags": [], "owner": {"reputation": 14624, "user_id": 5588279, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/31a5c0b08beca9ebc2c1d5e60ba691d7?s=128&d=identicon&r=PG&f=1", "display_name": "Sraw", "link": "https://stackoverflow.com/users/5588279/sraw"}, "is_accepted": false, "score": 0, "last_activity_date": 1493864249, "creation_date": 1493864249, "answer_id": 43772770, "question_id": 43771058, "link": "https://stackoverflow.com/questions/43771058/python-read-zipfile-into-numpy-array-efficiently/43772770#43772770", "title": "python read zipfile into numpy-array efficiently", "body": "<p>I think this is not a problem about read speed from disk. Even though you are using HDD, reading 80MB into memory can be done in one second. </p>\n\n<p>Take my experience as an example, the cost of time is determined by the process of uncompressing. If you just work with extracted data, it won't cost you a lot I believe.</p>\n"}], "owner": {"reputation": 33, "user_id": 6874238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78b647ee5b84adc760f42a9abb3c94d4?s=128&d=identicon&r=PG&f=1", "display_name": "P. Zeek", "link": "https://stackoverflow.com/users/6874238/p-zeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 717, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493864249, "creation_date": 1493850768, "question_id": 43771058, "link": "https://stackoverflow.com/questions/43771058/python-read-zipfile-into-numpy-array-efficiently", "title": "python read zipfile into numpy-array efficiently", "body": "<p>I want to read a zipfile into memory and extract its content into a numpy array (as numpy-datatypes). This needs to happen in an extremely efficient/fast manner, since the files are rather big and there are many of them. Unfortunately looking at similiar questions didn't help me, because I couldn't find a way to convert the data into numpy-datatypes at the time of reading. Also the speed turned out to be a big problem.</p>\n\n<p>For example: The zipfile \"log_ks818.zip\" contains \"log_file.csv\", which contains the needed data in the following format (yyyymmdd hhnnsszzz,float,float,zero):</p>\n\n<pre><code>20161001 190000100,1.000500,1.000800,0\n20161001 190001000,1.001000,1.002000,0\n20161001 190002500,1.001500,1.001200,0\n...\n</code></pre>\n\n<p>The fastest that I managed to do so far (using pandas):</p>\n\n<pre><code>zfile = zipfile.ZipFile(\"log_ks818.zip\", 'r')\ndf = pd.read_csv(io.BytesIO(zfile.read(\"log_file.csv\")), header=None, usecols=[0, 1, 2], delimiter=',', encoding='utf-8')\nprint(df.head())\n</code></pre>\n\n<p>However this takes around 6 seconds for ~2,000,000 lines in the file (~80MB if unpacked), which is too slow (plus it's not a numpy object). When I compared the read-in speed of different numpy/pandas-methods, using the extracted file on the hard drive to test, np.fromfile performed the best with 0.08 seconds to simply get it into memory. It would be nice if it was possible to stay in this magnitude when reading the data from the zip-file.</p>\n"}, {"tags": ["python", "numpy", "matplotlib"], "comments": [{"owner": {"reputation": 31, "user_id": 7959967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cccbb5fe5b264a74bdd5d8a57aa8fc6?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/7959967/marcel"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1493851967, "post_id": 43771044, "comment_id": 74583853, "body": "alright, if i choose a third degree polinomial and ask it to print the xizes variable i receive many arrays like these:   &lt;[1. , 0.738, 0.544644, 0.40194727]&gt; , these arrays are x values for every term of the polinomial, (1=x^0   0.738=x&#185;    0.544644=x&#178;    0.40194727= x&#179;)"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 7959967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cccbb5fe5b264a74bdd5d8a57aa8fc6?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/7959967/marcel"}, "is_accepted": false, "score": 1, "last_activity_date": 1493855563, "creation_date": 1493855563, "answer_id": 43771791, "question_id": 43771044, "link": "https://stackoverflow.com/questions/43771044/summing-numpy-array-elements-together/43771791#43771791", "title": "Summing numpy array elements together", "body": "<p>nevermind, already figured it out, if it will help somebody later i added the folowing line to sum it</p>\n\n<pre><code>xizes = np.sum(xizes,axis=1)\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7959967, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2cccbb5fe5b264a74bdd5d8a57aa8fc6?s=128&d=identicon&r=PG&f=1", "display_name": "Marcel", "link": "https://stackoverflow.com/users/7959967/marcel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493932962, "creation_date": 1493850714, "last_edit_date": 1493932962, "question_id": 43771044, "link": "https://stackoverflow.com/questions/43771044/summing-numpy-array-elements-together", "title": "Summing numpy array elements together", "body": "<p>i'm trying to make a polinomial calculator in which i can insert the largest coefficient, problem is, the xizes variable, that would be the image of the function is coming as multiple arrays, therefore the function graphic (using matplotlib) is coming like this (this is a third degree polynomial(x\u00b3+x\u00b2+x\u00b9+x^0)): <a href=\"https://imgur.com/a/uRr15\" rel=\"nofollow noreferrer\">http://imgur.com/a/uRr15</a></p>\n\n<p>is there a way to sum up the elements of each array? that would solve the problem</p>\n\n<p>Here's the code:</p>\n\n<pre><code>expoente = int(input(\"insira o grau do polinomio (numero inteiro): \"))\nexpoente = expoente+1\nintervalo_1 = float(input(\"insira o intervalo desejado \\n(ponto inicial): \"))\nintervalo_2 = float(input(\"(ponto final): \" ))\nexpoentes = range(0, expoente)\nexpoentes = [item*1 for item in expoentes]\n\n\nquantidade = (intervalo_2 - intervalo_1)*500\nx = np.linspace(intervalo_1,intervalo_2,num=quantidade,endpoint=False)\nxizes = [item**expoentes for item in x]\nplt.plot(x,xizes, label=\"Grafico do polinomio\")\nplt.xlim([intervalo_1,intervalo_2])\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "string", "encoding", "locale", "decoding"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1493851352, "post_id": 43771034, "comment_id": 74583668, "body": "The problem is likely that your <i>terminal emulator</i> doesn&#39;t support unicode characters, or is set to encode with ASCII, hence the <code>UnicodeEncode</code> error when you <i>print</i>. When you <code>.encode</code> a string, it returns a <code>bytes</code> object, which will always have an &quot;ugly&quot; representation for bytes outside the ascii ordinal range... unless you *decode it * (or in your case, refrain from encoding it)."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1493851900, "post_id": 43771034, "comment_id": 74583832, "body": "Are you sure this <code>&quot;no_NB.UTF-8&quot;</code> is an available locale? Try <code>locale -a | grep &quot;no_NB.UTF-8&quot;</code> in your shell. I couldn&#39;t find it on my machine, (osx 10.12.4), but I did find <code>no_NO.UTF-8</code>"}], "answers": [{"tags": [], "owner": {"reputation": 585, "user_id": 4623578, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/CJIiv.png?s=128&g=1", "display_name": "Kyrre", "link": "https://stackoverflow.com/users/4623578/kyrre"}, "is_accepted": true, "score": 0, "last_activity_date": 1493852403, "creation_date": 1493852403, "answer_id": 43771318, "question_id": 43771034, "link": "https://stackoverflow.com/questions/43771034/python-3-6-1-printing-string-as-human-readable-text-special-characters/43771318#43771318", "title": "Python 3.6.1 - Printing string as human readable text, special characters", "body": "<p>Setting</p>\n\n<pre><code>export LC_ALL=no_NO.UTF-8\nexport LANG=no_NO.UTF-8\n</code></pre>\n\n<p>in my .bash_profile now allows me to see the characters I want in my terminal and it is also successfully echoed to a file.</p>\n"}], "owner": {"reputation": 585, "user_id": 4623578, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/CJIiv.png?s=128&g=1", "display_name": "Kyrre", "link": "https://stackoverflow.com/users/4623578/kyrre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 43771318, "answer_count": 1, "score": 2, "last_activity_date": 1493852403, "creation_date": 1493850615, "question_id": 43771034, "link": "https://stackoverflow.com/questions/43771034/python-3-6-1-printing-string-as-human-readable-text-special-characters", "title": "Python 3.6.1 - Printing string as human readable text, special characters", "body": "<p>I'm building a little django 1.1 app (though I believe this issue to be specific to Python) where I've come to use commands to control the flow of getting and categorizing data. I also wish to print a sort of summary using a third command. I am using macOS 10.12.3</p>\n\n<p>My problem comes from getting text data in and printing it to the console or a document using</p>\n\n<pre><code>&gt; or &gt;&gt;\n</code></pre>\n\n<p>in the console. </p>\n\n<p>I'm running these scripts using an alias of Python 3.6.1</p>\n\n<p>I'm using the Tweepy api, but that should hopefully not be relevant.</p>\n\n<p>These snippets should illustrate the problem I'm hoping to solve:</p>\n\n<pre><code>print(type(data))\nprint(type(data.text))\ntry:\n    print(data.text)\nexcept UnicodeEncodeError:\n    print(\"no printing today :(\")\nprint(type(data.text.encode('UTF-8')))\nprint(data.text.encode('UTF-8'))\n</code></pre>\n\n<p>this outputs:</p>\n\n<pre><code>&lt;class 'tweepy.models.Status'&gt;\n&lt;class 'str'&gt;\nno printing today :(\n&lt;class 'bytes'&gt;\nb'kontroll p\\xc3\\xa5 ... v\\xc3\\xa5pen.'\n</code></pre>\n\n<p>The ugly things there should both be the character '\u00e5'.</p>\n\n<p>This is the error that would be thrown:</p>\n\n<pre><code>UnicodeEncodeError: 'ascii' codec can't encode character '\\xe5' in position 223: ordinal not in range(128)\n</code></pre>\n\n<p>It says 'ascii' codec, but doing (in my Python 3.6.1 script):</p>\n\n<pre><code>print(sys.getdefaultencoding())\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>utf-8\n</code></pre>\n\n<p>Running </p>\n\n<pre><code>print(sys.getdefaultencoding())\n</code></pre>\n\n<p>again in Python 2.7.10 outputs:</p>\n\n<pre><code>ascii\n</code></pre>\n\n<p>So the thrown error matches what 2.7.10 outputs. I am not discounting the possibility that I could be wrong about what a default encoder does</p>\n\n<p>I have also tried</p>\n\n<pre><code>export LOCALE=\"no_NB.UTF-8\"\n</code></pre>\n\n<p>in an attempt to see if this could be caused by my system (unless I'm misunderstanding what this does). I did not write this to any file, thinking it would persist through the current session.</p>\n\n<p>Is the wrong encoder being used somehow? Could it be my terminal encoding? How can I write my special characters to the terminal and file? Are strings really this hard to get right?</p>\n\n<p>Any help is greatly appreciated!!</p>\n"}, {"tags": ["python", "numpy", "interpolation"], "comments": [{"owner": {"reputation": 2145, "user_id": 2007153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2acd37d2c8cfe6202572879b40bd01b3?s=128&d=identicon&r=PG", "display_name": "DougR", "link": "https://stackoverflow.com/users/2007153/dougr"}, "edited": false, "score": 0, "creation_date": 1494536681, "post_id": 43771023, "comment_id": 74884326, "body": "You will need to add another column to describe the relationship of x and y with another dimension. For example, if each point on the graph can be referenced to a time, then you could try either a 3 term non linear least squared method or radial basis function. These functions are both available in SciPy. If you can post your code which produced the chart,  then perhaps I can show you how to use those methods."}], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 7185647, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb4d0475a7b6fa6d82083acf9f68878e?s=128&d=identicon&r=PG&f=1", "display_name": "kosiokarchev", "link": "https://stackoverflow.com/users/7185647/kosiokarchev"}, "is_accepted": false, "score": 0, "last_activity_date": 1493853385, "last_edit_date": 1493853385, "creation_date": 1493853075, "answer_id": 43771409, "question_id": 43771023, "link": "https://stackoverflow.com/questions/43771023/interpolate-a-curve-on-itself-using-numpy/43771409#43771409", "title": "Interpolate a curve on itself using NumPy", "body": "<p>According to the <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.interp.html\" rel=\"nofollow noreferrer\">docs</a> the array of X values should be sorted (or periodic), otherwise \"the result is nonsense\". You can try to split your curve into sections, and then interpolate each part on the others. You can find the correct splitting places by looking at where <code>np.diff(x)</code> changes sign.</p>\n"}], "owner": {"reputation": 251, "user_id": 7108075, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/40fd249a3100b8de964feab6ed38a192?s=128&d=identicon&r=PG&f=1", "display_name": "888", "link": "https://stackoverflow.com/users/7108075/888"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493853385, "creation_date": 1493850561, "last_edit_date": 1493852441, "question_id": 43771023, "link": "https://stackoverflow.com/questions/43771023/interpolate-a-curve-on-itself-using-numpy", "title": "Interpolate a curve on itself using NumPy", "body": "<p>I have the following curve as two arrays, of x and y positions.  </p>\n\n<p><img src=\"https://i.stack.imgur.com/yS0Bp.png\" alt=\"curve\"></p>\n\n<p>Imagine if you were to draw vertical lines going through each point, and add points on the curve wherever these lines intersect the curve. This is what I want.   </p>\n\n<p>I tried using <code>np.interp(x, x, y)</code>, but I ended up with the following mess: </p>\n\n<p><img src=\"https://i.stack.imgur.com/lGZMX.png\" alt=\"mess\"></p>\n\n<p>How can I do this? Is it possible with <code>np.interp</code>? </p>\n\n<p>This might be something that should be asked in a different question, but I would also like there to be points added where the curve crosses over itself.</p>\n"}, {"tags": ["python", "python-3.x", "kivy", "traceback", "kivy-language"], "answers": [{"tags": [], "owner": {"reputation": 6178, "user_id": 4420934, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a512a390a9af72bcac92dcb903e5cdeb?s=128&d=identicon&r=PG&f=1", "display_name": "syntonym", "link": "https://stackoverflow.com/users/4420934/syntonym"}, "is_accepted": true, "score": 0, "last_activity_date": 1493880901, "creation_date": 1493880901, "answer_id": 43775894, "question_id": 43770955, "link": "https://stackoverflow.com/questions/43770955/cardtransition-isnt-working-in-kivy-1-9-1/43775894#43775894", "title": "CardTransition isn&#39;t working in Kivy 1.9.1", "body": "<p>CardTransition was only added in kivy 1.10.</p>\n"}], "owner": {"reputation": 141, "user_id": 7922147, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2c5ad8ff87328722c23f66844a2d0cf4?s=128&d=identicon&r=PG&f=1", "display_name": "Markus", "link": "https://stackoverflow.com/users/7922147/markus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 43775894, "answer_count": 1, "score": 0, "last_activity_date": 1493880901, "creation_date": 1493850222, "question_id": 43770955, "link": "https://stackoverflow.com/questions/43770955/cardtransition-isnt-working-in-kivy-1-9-1", "title": "CardTransition isn&#39;t working in Kivy 1.9.1", "body": "<p>I am trying to make a simple app in kivy with multiple screens that makes use of the CardTransition, but when I try to run it I get an Error. I know the app itself works because I have tried it with a different transition and it works fine. I am using Python 3.4.4 with Kivy 1.9.1.</p>\n\n<p>Here's the code:</p>\n\n<pre><code>import kivy\nkivy.require(\"1.9.1\")\n\nfrom kivy.uix.boxlayout     import BoxLayout\nfrom kivy.app               import App\nfrom kivy.uix.label         import Label\nfrom kivy.uix.button        import Button\nfrom kivy.lang              import Builder\nfrom kivy.uix.screenmanager import ScreenManager, Screen, SwapTransition, CardTransition\n\nKivyFile = Builder.load_string(\"\"\"\n&lt;Screen1&gt;:\n    name: \"Screen1\"\n    BoxLayout:\n        orientation: \"vertical\"\n        padding: 40\n        spacing: 20\n\n        Label:\n            text: \"This is screen 1\"\n        Button:\n            text: \"Next Screen\"\n            on_release: app.root.current = \"Screen2\"\n&lt;Screen2&gt;:\n    name: \"Screen2\"\n    BoxLayout:\n        orientation: \"vertical\"\n        padding: 40\n        spacing: 20\n\n        Label:\n            text: \"This is screen 2\"\n        Button:\n            text: \"Next Screen\"\n            on_release: app.root.current = \"Screen3\"\n&lt;Screen3&gt;:\n    name: \"Screen3\"\n    BoxLayout:\n        orientation: \"vertical\"\n        padding: 40\n        spacing: 20\n\n        Label:\n            text: \"This is screen 3\"\n        Button:\n            text: \"Next Screen\"\n            on_release: app.root.current = \"Screen1\"\n\"\"\")\n\nclass Screen1(Screen):\n    pass\n\nclass Screen2(Screen):\n    pass\n\nclass Screen3(Screen):\n    pass\n\nsm = ScreenManager(transition=CardTransition())\nsm.add_widget(Screen1(name = \"Screen1\"))\nsm.add_widget(Screen2(name = \"Screen2\"))\nsm.add_widget(Screen3(name = \"Screen3\"))\n\nclass MyApp(App):\n\n    def build(self):\n        return sm\n\nif __name__ == \"__main__\":\n    MyApp().run()\n</code></pre>\n\n<p>Here's the error I get:</p>\n\n<pre><code> Traceback (most recent call last):\n   File \"C:/Users/Markus/Desktop/Kivy/TestTransitions.py\", line 9, in &lt;module&gt;\n     from kivy.uix.screenmanager import ScreenManager, Screen, SwapTransition, CardTransition\n ImportError: cannot import name 'CardTransition'\n</code></pre>\n"}, {"tags": ["python", "django", "scrape"], "answers": [{"tags": [], "owner": {"reputation": 15340, "user_id": 1560035, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fe3aa4a1766a44d8f27db8a95cb573ed?s=128&d=identicon&r=PG", "display_name": "TheoretiCAL", "link": "https://stackoverflow.com/users/1560035/theoretical"}, "is_accepted": false, "score": 4, "last_activity_date": 1493850454, "creation_date": 1493850454, "answer_id": 43771006, "question_id": 43770949, "link": "https://stackoverflow.com/questions/43770949/web-scraper-using-django-python-for-web/43771006#43771006", "title": "Web Scraper Using django (python for web)", "body": "<p>If your using django, set up a form with a text input field for the url on your html page. On submission this url will appear in the POST variables if you've set it up correctly. Then in your back end, where you handle the url that was POST'd, grab the user's input url.\nsee <a href=\"https://tutorial.djangogirls.org/en/django_forms/\" rel=\"nofollow noreferrer\">https://tutorial.djangogirls.org/en/django_forms/</a> if you don't know how to set up a form.</p>\n"}, {"tags": [], "owner": {"reputation": 23296, "user_id": 7925166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/596c4642f5acb93900b5b55f140e493c?s=128&d=identicon&r=PG&f=1", "display_name": "Exprator", "link": "https://stackoverflow.com/users/7925166/exprator"}, "is_accepted": true, "score": 3, "last_activity_date": 1494823278, "last_edit_date": 1494823278, "creation_date": 1493876286, "answer_id": 43774654, "question_id": 43770949, "link": "https://stackoverflow.com/questions/43770949/web-scraper-using-django-python-for-web/43774654#43774654", "title": "Web Scraper Using django (python for web)", "body": "<p>in your view </p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n</code></pre>\n\n<p>create a form from where the user will post the url for scrapping</p>\n\n<p>in the specific view function</p>\n\n<pre><code>url = form.cleaned_data.get['name of the input field']\ndata = requests.get(url)\n</code></pre>\n\n<p>and then do what you need to do with your scrapped data</p>\n"}], "owner": {"reputation": 572, "user_id": 6803908, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Z4HUD.jpg?s=128&g=1", "display_name": "Abdulrahman Mushref", "link": "https://stackoverflow.com/users/6803908/abdulrahman-mushref"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6196, "favorite_count": 1, "closed_date": 1494832181, "accepted_answer_id": 43774654, "answer_count": 2, "score": 0, "last_activity_date": 1494823278, "creation_date": 1493850180, "question_id": 43770949, "link": "https://stackoverflow.com/questions/43770949/web-scraper-using-django-python-for-web", "closed_reason": "Needs more focus", "title": "Web Scraper Using django (python for web)", "body": "<p>It's been a month or so, yeah?</p>\n\n<p>I've been searching the web for web scraping using python and I have found beautifulSoup and lots of other scraping tools such as Scrapy, scraper, etc.</p>\n\n<p><strong>All of them are the same...a little differences there might be..</strong></p>\n\n<p>Most tutorials I watch or read, are the same to...</p>\n\n<p>Okay, what I am trying to do here is the following:</p>\n\n<p>Except of putting the URL that I wanna scrape into the code...<strong>I want the USER to INPUT the url and then the scraper scrapes that url that the user has pasted in the HTML  field</strong></p>\n\n<p>All tutorials have the code like this:</p>\n\n<pre><code>url = (http://......)\n</code></pre>\n\n<p>No...I want it somehow like this:</p>\n\n<pre><code>url = (USER INPUT)\n</code></pre>\n\n<p>Example video:\n<a href=\"https://youtu.be/Wo5eMclb-G4?t=65\" rel=\"nofollow noreferrer\">Link scraper</a>\n<br/>\nIt's funny how he didn't actually to this in his tutorials...I think?</p>\n\n<p>but yes, that's what I am trying to do, if you have any tutorial or documentation of doing this, please please help me out!!</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "asynchronous", "heroku", "flask"], "comments": [{"owner": {"reputation": 5091, "user_id": 2714012, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/fRcBY.jpg?s=128&g=1", "display_name": "stamaimer", "link": "https://stackoverflow.com/users/2714012/stamaimer"}, "edited": false, "score": 0, "creation_date": 1493850238, "post_id": 43770889, "comment_id": 74583321, "body": "Use celery to do the time consuming task and use ajax to poll the result."}, {"owner": {"reputation": 1038, "user_id": 1321279, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/a00f839434d28b43f746596cf84e1399?s=128&d=identicon&r=PG", "display_name": "S. J.", "link": "https://stackoverflow.com/users/1321279/s-j"}, "reply_to_user": {"reputation": 5091, "user_id": 2714012, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/fRcBY.jpg?s=128&g=1", "display_name": "stamaimer", "link": "https://stackoverflow.com/users/2714012/stamaimer"}, "edited": false, "score": 0, "creation_date": 1493910663, "post_id": 43770889, "comment_id": 74613791, "body": "@stamaimer While Celery/Rabbit would be a good choice, I&#39;m limited in what I&#39;m allowed to use (everything requires a hierarchy of approval from the client, and waiting 2-3 weeks for a size-2 bug simply won&#39;t do).  If it can&#39;t be done with Flask alone, so be it, but I need to check."}], "answers": [{"tags": [], "owner": {"reputation": 4645, "user_id": 978676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d119c37b35cff2131c7d8180aa439656?s=128&d=identicon&r=PG", "display_name": "bimsapi", "link": "https://stackoverflow.com/users/978676/bimsapi"}, "is_accepted": false, "score": 0, "last_activity_date": 1494470471, "creation_date": 1494470471, "answer_id": 43905621, "question_id": 43770889, "link": "https://stackoverflow.com/questions/43770889/using-yield-to-async-a-flask-response-but-adding-header-information-at-the-end/43905621#43905621", "title": "Using yield to async a Flask Response, but adding header information at the end of the long async call?", "body": "<p>Making sure I'm interpreting this correctly. You have a request that generates something and issues a redirect. The generation takes a long time, triggering the Heroku timeout. You want to get around the time out, somehow.</p>\n\n<p>Can you do this with Flask alone, with the constraint of the Heroku routing tier? Sort of. Note, though, that the simple \"keep alive\" you are doing fails because it results in an invalid HTTP response. Once you start sending anything that is <em>not</em> a header, you can't send a header (i.e., the redirect).</p>\n\n<p>Your two options - </p>\n\n<ul>\n<li><strong>Polling.</strong> Launch an async job, pre-calculate the URL for the job result, but have it guarded by a \"monitor\" of some kind (e.g., check the job and display \"In progress\", refreshing every 2-5 seconds until it's done). You have a worker dyno that is used to calculate the result. Ordinarily, I'd say \"Redis + Python RQ\" for a fast start, but if you can't add any new server-side dependencies, a simple database queue table could suffice. </li>\n<li><strong>Pushing.</strong> Use an add-on like <a href=\"https://elements.heroku.com/addons/pusher\" rel=\"nofollow noreferrer\">Pusher</a>. No new server-side dependencies, just an account (which has a low-cost entry option) If that's not an option, roll a <a href=\"https://devcenter.heroku.com/articles/python-websockets\" rel=\"nofollow noreferrer\">WebSocket</a>-based solution.</li>\n</ul>\n\n<p>In general, spending some time to do a good async return will pay off in the long run. It's one of the single best performance enhancements to make to any site - return fast, give the user a responsive experience. You do have to spawn the async task in another process or thread, in order to free up request threads for other responses.</p>\n"}], "owner": {"reputation": 1038, "user_id": 1321279, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/a00f839434d28b43f746596cf84e1399?s=128&d=identicon&r=PG", "display_name": "S. J.", "link": "https://stackoverflow.com/users/1321279/s-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 346, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1494470471, "creation_date": 1493849778, "question_id": 43770889, "link": "https://stackoverflow.com/questions/43770889/using-yield-to-async-a-flask-response-but-adding-header-information-at-the-end", "title": "Using yield to async a Flask Response, but adding header information at the end of the long async call?", "body": "<p>I have a particularly large task that takes ~60 seconds to complete.  Heroku routers send a timeout error after 30 seconds if nothing is returned, so using a <code>yield</code> statement helps solve that:</p>\n\n<pre><code>def foo():\n    while not isDone:\n        print(\"yield\")\n        yield \" \"\n        time.sleep(10)\nreturn Response(foo(), mimetype='text/html')```\n</code></pre>\n\n<p>(or something similar)</p>\n\n<p>And that works all well and good, except in my case, at the end of my very long task, it makes a decision on where to <code>302</code> forward next.  It's easy enough to set a forwarding location:</p>\n\n<pre><code>response = Response(foo(), 302, mimetype='text/html')\nresponse.headers['Location'] = '/bar'\nreturn response\n</code></pre>\n\n<p>except that in this example <code>/bar</code> is static, and I need to assign that dynamically, and only at the end of the very long process.</p>\n\n<p>So is there a way to dynamically assign the forwarding location at the end of the very long async process?</p>\n"}, {"tags": ["python", "apache-kafka", "kafka-producer-api"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 2006588, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/9e531a2e09c1c71aaa7212c32c601903?s=128&d=identicon&r=PG", "display_name": "akshayg21", "link": "https://stackoverflow.com/users/2006588/akshayg21"}, "edited": false, "score": 0, "creation_date": 1495474472, "post_id": 43773272, "comment_id": 75256997, "body": "Thank you for your answer but as I was working on windows I could not use chmod even though I got some direction from this. My problem isn&#39;t solved but I will ask it in separate post."}, {"owner": {"reputation": 4544, "user_id": 1252056, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/fruvR.png?s=128&g=1", "display_name": "streetturtle", "link": "https://stackoverflow.com/users/1252056/streetturtle"}, "reply_to_user": {"reputation": 51, "user_id": 2006588, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/9e531a2e09c1c71aaa7212c32c601903?s=128&d=identicon&r=PG", "display_name": "akshayg21", "link": "https://stackoverflow.com/users/2006588/akshayg21"}, "edited": false, "score": 0, "creation_date": 1495474810, "post_id": 43773272, "comment_id": 75257197, "body": "If you are in Windows you don&#39;t need to do a <code>chmod</code>, just run the script: <code>C:\\pathTo\\python.exe C:\\pathTo\\my_python_script.py</code>"}], "tags": [], "owner": {"reputation": 4544, "user_id": 1252056, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/fruvR.png?s=128&g=1", "display_name": "streetturtle", "link": "https://stackoverflow.com/users/1252056/streetturtle"}, "is_accepted": false, "score": 2, "last_activity_date": 1493867709, "creation_date": 1493867709, "answer_id": 43773272, "question_id": 43770869, "link": "https://stackoverflow.com/questions/43770869/how-to-run-kafka-producer-that-is-written-in-python/43773272#43773272", "title": "How to run kafka producer that is written in Python?", "body": "<p>So your question is how to run a python script? Simply save it, make executable and execute:</p>\n\n<pre><code>chmod +x ./kProducer.py\npython ./kproducer.py\n</code></pre>\n\n<p>More detail are here: <a href=\"http://pythoncentral.io/execute-python-script-file-shell/\" rel=\"nofollow noreferrer\">How to Run a Python Script via a File or the Shell</a></p>\n"}, {"tags": [], "owner": {"reputation": 759, "user_id": 2468325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/52043875f68011d2441d06d6ad3d4fdb?s=128&d=identicon&r=PG", "display_name": "Naseer-shaik", "link": "https://stackoverflow.com/users/2468325/naseer-shaik"}, "is_accepted": false, "score": 1, "last_activity_date": 1520112172, "creation_date": 1520112172, "answer_id": 49089340, "question_id": 43770869, "link": "https://stackoverflow.com/questions/43770869/how-to-run-kafka-producer-that-is-written-in-python/49089340#49089340", "title": "How to run kafka producer that is written in Python?", "body": "<p>Add shebang line at the top to your script:</p>\n\n<p><code>#!/usr/bin/env python-version</code>\nReplace the python-version with python2 for 2.x and python3 for 3.x\nTo check the version of python use the command: \n<code>python -V</code> \nThe shebang line will determine the script ability to run as standalone. This will help when you want to double-click the script and execute it and not from the terminal. or simply say </p>\n\n<p><code>python scriptname.py</code></p>\n"}], "owner": {"reputation": 51, "user_id": 2006588, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/9e531a2e09c1c71aaa7212c32c601903?s=128&d=identicon&r=PG", "display_name": "akshayg21", "link": "https://stackoverflow.com/users/2006588/akshayg21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1495, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1520112172, "creation_date": 1493849665, "question_id": 43770869, "link": "https://stackoverflow.com/questions/43770869/how-to-run-kafka-producer-that-is-written-in-python", "title": "How to run kafka producer that is written in Python?", "body": "<p>I am new to Kafka but have seen a few tutorials so I know how Kafka works. I am trying to run a producer that I have written in Python but I don't know how to run this file after I have started my zookeeper server and kafka server. If anyone can tell me the structure of the command that is to be written in command prompt, I would really appreciate it.\nThanks!</p>\n\n<p>Kafka Producer: </p>\n\n<pre><code>import json\nimport time\nfrom kafka import KafkaProducer\nfrom kafka.errors import KafkaError\nfrom kafka.future import log\n\nif __name__ == \"__main__\":\n  producer = KafkaProducer(bootstrap_servers= 'localhost: 9092')\n\nfuture = producer.send('my-topic', b\"test\")\n\ntry:\n    record_metadata = future.get( timeout=10)\nexcept KafkaError :\n    log.exeption()\n    pass\n\nprint( record_metadata.topic)\nprint(record_metadata.partition)\nprint(record_metadata.offset)\n\nproducer = KafkaProducer(value_serializer = lambda m: json.dumps(m).encode('ascii'))\nproducer.send('json-topic',{'key':'value'})\n\nfor _ in range (100):\n    producer.send('my-topic', b\"test\")\n    producer.send('my-topic',b\"\\xc2Hola, mundo!\")\n    time.sleep(1)\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 130, "user_id": 6921350, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/50b52304a28ad4607796090c8c0935d0?s=128&d=identicon&r=PG&f=1", "display_name": "Retro", "link": "https://stackoverflow.com/users/6921350/retro"}, "edited": false, "score": 0, "creation_date": 1493853245, "post_id": 43771069, "comment_id": 74584243, "body": "Thanks for the answer, I have tried that now, but it unfortunately doesn&#39;t seem to have made a difference."}], "tags": [], "owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "is_accepted": false, "score": 1, "last_activity_date": 1493850793, "creation_date": 1493850793, "answer_id": 43771069, "question_id": 43770861, "link": "https://stackoverflow.com/questions/43770861/tkinter-stop-panedwndow-resize/43771069#43771069", "title": "tkinter - Stop PanedWndow resize", "body": "<p>You can set the minimum size that you would like a window to go with the <code>minsize</code> argument: </p>\n\n<pre><code>m1 = PanedWindow()\nm1.pack(fill=BOTH, expand=1)\n\nleft = Label(m1, text=\"left pane\")\nm1.add(left)\nm1.paneconfig(left, minsize=200)\n</code></pre>\n\n<p>See more options here: <a href=\"http://effbot.org/tkinterbook/panedwindow.htm#Tkinter.PanedWindow.paneconfigure-method\" rel=\"nofollow noreferrer\">http://effbot.org/tkinterbook/panedwindow.htm#Tkinter.PanedWindow.paneconfigure-method</a></p>\n"}, {"tags": [], "owner": {"reputation": 130, "user_id": 6921350, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/50b52304a28ad4607796090c8c0935d0?s=128&d=identicon&r=PG&f=1", "display_name": "Retro", "link": "https://stackoverflow.com/users/6921350/retro"}, "is_accepted": false, "score": 0, "last_activity_date": 1493895487, "creation_date": 1493895487, "answer_id": 43780971, "question_id": 43770861, "link": "https://stackoverflow.com/questions/43770861/tkinter-stop-panedwndow-resize/43780971#43780971", "title": "tkinter - Stop PanedWndow resize", "body": "<p>I managed to solve this by putting both the canvas and the Pandastable in a frame and setting the height manually. </p>\n\n<p>It seems that when Pandastable is updating itself it sets it's height to 0, which then has the effect of allowing the canvas to expand to fit the space.</p>\n\n<p>I'm not sure of the technicalities behind it, but it works!</p>\n"}], "owner": {"reputation": 130, "user_id": 6921350, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/50b52304a28ad4607796090c8c0935d0?s=128&d=identicon&r=PG&f=1", "display_name": "Retro", "link": "https://stackoverflow.com/users/6921350/retro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1003, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1493895487, "creation_date": 1493849602, "question_id": 43770861, "link": "https://stackoverflow.com/questions/43770861/tkinter-stop-panedwndow-resize", "title": "tkinter - Stop PanedWndow resize", "body": "<p>So I've been using the following code from the effbot tutorial as a base:</p>\n\n<pre><code>from Tkinter import *\n\nm1 = PanedWindow()\nm1.pack(fill=BOTH, expand=1)\n\nleft = Label(m1, text=\"left pane\")\nm1.add(left)\n\nm2 = PanedWindow(m1, orient=VERTICAL)\nm1.add(m2)\n\ntop = Label(m2, text=\"top pane\")\nm2.add(top)\n\nbottom = Label(m2, text=\"bottom pane\")\nm2.add(bottom)\n\nmainloop()\n</code></pre>\n\n<p>My issue is that I have two widgets in m2; a graph and a datatable. On a certain operation, the graph pushes the datatable up so it can't be seen. Is it possible to stop the internal panel elements disrupting each others size?</p>\n\n<p>I'd still like to be able to resize manually though if possible.</p>\n"}, {"tags": ["python", "python-3.x", "tkinter", "animated-gif"], "comments": [{"owner": {"reputation": 13651, "user_id": 2997574, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/692bdd849c43a550cc59734ebfa41dd8?s=128&d=identicon&r=PG", "display_name": "Alvaro Fuentes", "link": "https://stackoverflow.com/users/2997574/alvaro-fuentes"}, "edited": false, "score": 2, "creation_date": 1493849940, "post_id": 43770847, "comment_id": 74583231, "body": "Shouldn&#39;t you check that <code>ind</code> never goes above 100? Maybe <code>ind %= 100</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 7258548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb8f05186ffdf922ed54a9558b0b956?s=128&d=identicon&r=PG&f=1", "display_name": "nmoore146", "link": "https://stackoverflow.com/users/7258548/nmoore146"}, "edited": false, "score": 0, "creation_date": 1493850587, "post_id": 43770948, "comment_id": 74583446, "body": "That got me to thinking...I changed the range to 13, since I created this gif and know how many frames are in it.  Now it loads and terminal gets stuck into &quot;index out of range&quot; error.  I adjusted all the other numbers in the function below it.  Is there any way to count the frames and store that in a variable and then call that in the range()?"}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "reply_to_user": {"reputation": 65, "user_id": 7258548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb8f05186ffdf922ed54a9558b0b956?s=128&d=identicon&r=PG&f=1", "display_name": "nmoore146", "link": "https://stackoverflow.com/users/7258548/nmoore146"}, "edited": false, "score": 0, "creation_date": 1493850729, "post_id": 43770948, "comment_id": 74583486, "body": "No, but you can loop over the frames until you get the EOF (end of file) error, as I did in my code."}, {"owner": {"reputation": 65, "user_id": 7258548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb8f05186ffdf922ed54a9558b0b956?s=128&d=identicon&r=PG&f=1", "display_name": "nmoore146", "link": "https://stackoverflow.com/users/7258548/nmoore146"}, "edited": false, "score": 0, "creation_date": 1493851017, "post_id": 43770948, "comment_id": 74583574, "body": "Ok, I have edited my code and pushed it to GitHub.  Right now it loops through the the 13 frames, but the complete image doesn&#39;t show up and then I get an index out of range error when it gets through all the frames."}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "reply_to_user": {"reputation": 65, "user_id": 7258548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb8f05186ffdf922ed54a9558b0b956?s=128&d=identicon&r=PG&f=1", "display_name": "nmoore146", "link": "https://stackoverflow.com/users/7258548/nmoore146"}, "edited": false, "score": 0, "creation_date": 1493851937, "post_id": 43770948, "comment_id": 74583844, "body": "Those are 2 problems. The complete image not showing up is because the image you have is optimized for space, so each frame is only an update of what&#39;s changed from the previous frames. You have to assemble each frame to fix that, or edit the gif to an unoptimized version. In GIMP it&#39;s Filters &gt; Animantion &gt; Unoptimize. The other problem is that after 13 frames you try to load frame number 14, and since that does not exist you get the error. You need to check the frame number and loop back to when it&#39;s too big. The <code>%</code> operator can help with that. Why don&#39;t you want to use my code?"}, {"owner": {"reputation": 65, "user_id": 7258548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb8f05186ffdf922ed54a9558b0b956?s=128&d=identicon&r=PG&f=1", "display_name": "nmoore146", "link": "https://stackoverflow.com/users/7258548/nmoore146"}, "edited": false, "score": 1, "creation_date": 1493852443, "post_id": 43770948, "comment_id": 74583978, "body": "My original reason for not using it was that I have had some issues using PIL with python3, but while I was away it seems to have been fixed.  Thanks for the help.  I am pretty sure I will have more issues and now I feel better about coming to Stack Overflow."}], "tags": [], "owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "is_accepted": true, "score": 15, "last_activity_date": 1593474773, "last_edit_date": 1593474773, "creation_date": 1493850179, "answer_id": 43770948, "question_id": 43770847, "link": "https://stackoverflow.com/questions/43770847/play-an-animated-gif-in-python-with-tkinter/43770948#43770948", "title": "Play an Animated GIF in python with tkinter", "body": "<p>The error means that you tried to load 100 frames, but the gif has less than that.</p>\n<p>Animated gifs in tkinter are notoriously bad. I wrote this code an age ago that you can steal from, but will get laggy with anything but small gifs:</p>\n<pre><code>import tkinter as tk\nfrom PIL import Image, ImageTk\nfrom itertools import count\n\nclass ImageLabel(tk.Label):\n    &quot;&quot;&quot;a label that displays images, and plays them if they are gifs&quot;&quot;&quot;\n    def load(self, im):\n        if isinstance(im, str):\n            im = Image.open(im)\n        self.loc = 0\n        self.frames = []\n\n        try:\n            for i in count(1):\n                self.frames.append(ImageTk.PhotoImage(im.copy()))\n                im.seek(i)\n        except EOFError:\n            pass\n\n        try:\n            self.delay = im.info['duration']\n        except:\n            self.delay = 100\n\n        if len(self.frames) == 1:\n            self.config(image=self.frames[0])\n        else:\n            self.next_frame()\n\n    def unload(self):\n        self.config(image=&quot;&quot;)\n        self.frames = None\n\n    def next_frame(self):\n        if self.frames:\n            self.loc += 1\n            self.loc %= len(self.frames)\n            self.config(image=self.frames[self.loc])\n            self.after(self.delay, self.next_frame)\n\nroot = tk.Tk()\nlbl = ImageLabel(root)\nlbl.pack()\nlbl.load('ball-1.gif')\nroot.mainloop()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 10551500, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-a5kDn_F1q-4/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbDbXQ4eR5o9qwVc9d8mVFn4PQclGA/mo/photo.jpg?sz=128", "display_name": "Kushal Bhavsar", "link": "https://stackoverflow.com/users/10551500/kushal-bhavsar"}, "is_accepted": false, "score": 0, "last_activity_date": 1586331527, "creation_date": 1586331527, "answer_id": 61095547, "question_id": 43770847, "link": "https://stackoverflow.com/questions/43770847/play-an-animated-gif-in-python-with-tkinter/61095547#61095547", "title": "Play an Animated GIF in python with tkinter", "body": "<p>First of all, you need to know what is the last range of your GIF file. so by changing the different value of i, you will get it.For my condition is 31.\nthen just need to put the condition.So it will play gif infinitely. </p>\n\n<pre><code>    from tkinter import *\n    import time\n    import os\n    root = Tk()\n\n    frames = [PhotoImage(file='./images/play.gif',format = 'gif -index %i' %(i)) for i in range(31)]\n\n    def update(ind):\n        frame = frames[ind]\n        ind += 1\n        print(ind)\n        if ind&gt;30: #With this condition it will play gif infinitely\n            ind = 0\n        label.configure(image=frame)\n        root.after(100, update, ind)\n\n    label = Label(root)\n    label.pack()\n    root.after(0, update, 0)\n    root.mainloop()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 15871, "user_id": 2123530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a7fba006184897e8d74f1795e2835b?s=128&d=identicon&r=PG", "display_name": "\u03b2.\u03b5\u03b7\u03bf\u03b9\u03c4.\u03b2\u03b5", "link": "https://stackoverflow.com/users/2123530/%ce%b2-%ce%b5%ce%b7%ce%bf%ce%b9%cf%84-%ce%b2%ce%b5"}, "edited": false, "score": 0, "creation_date": 1593426407, "post_id": 62626067, "comment_id": 110767437, "body": "I did change your code block so it explicitly says it is Python code. Also I removed your ending sentence, the reason is, <a href=\"https://meta.stackoverflow.com/questions/330562/where-to-say-thank-you-on-stack-overflow\">we tend not to leave &quot;chatty&quot; thank you and the like in SO posts</a>. This said, you can always review the history of a post, just click on the link going with &quot;edited ... ago&quot; and you&#39;ll lend on a revision page <a href=\"https://stackoverflow.com/posts/62626067/revisions\">like this one</a> were you can see an history of all chanegs done."}], "tags": [], "owner": {"reputation": 95, "user_id": 11043577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8e72e2134d3c83bd9fbc62bfb2464c4?s=128&d=identicon&r=PG", "display_name": "Naman Bansal", "link": "https://stackoverflow.com/users/11043577/naman-bansal"}, "is_accepted": false, "score": 0, "last_activity_date": 1593372820, "last_edit_date": 1593372820, "creation_date": 1593365694, "answer_id": 62626067, "question_id": 43770847, "link": "https://stackoverflow.com/questions/43770847/play-an-animated-gif-in-python-with-tkinter/62626067#62626067", "title": "Play an Animated GIF in python with tkinter", "body": "<p>A very simple approach would be to use multithreading.</p>\n<p>To run the GIF infinitely in a Tkinter window you should follow the following:</p>\n<ol>\n<li>Create a function to run the GIF.</li>\n<li>Put your code to run the GIF inside <code>while True</code> inside the function.</li>\n<li>Create a thread to run the function.</li>\n<li>Run <code>root.mainloop()</code> in the primary flow of the program.</li>\n<li>Use <code>time.sleep()</code> to control the speed of your animation.</li>\n</ol>\n<p>Refer to my code below:</p>\n<pre class=\"lang-py prettyprint-override\"><code>i=0\nph = ImageTk.PhotoImage(Image.fromarray(imageframes[i]))\nimglabel=Label(f2,image=ph)\nimglabel.grid(row=0,column=0)\n\ndef runthegif(root,i):\n    \n    while True:\n        i = i + 7\n        i= i % 150\n        \n        ph=ImageTk.PhotoImage(PhotoImage(file='images/ball.gif',format='gif -index %i' %i))\n        imagelabel=Label(f2,image=ph)\n        imagelabel.grid(row=0,column=0)\n        time.sleep(0.1)\n    \n\n\nt1=threading.Thread(target=runthegif,args=(root,i))\nt1.start()\n\n\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 7258548, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb8f05186ffdf922ed54a9558b0b956?s=128&d=identicon&r=PG&f=1", "display_name": "nmoore146", "link": "https://stackoverflow.com/users/7258548/nmoore146"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14817, "favorite_count": 2, "accepted_answer_id": 43770948, "answer_count": 3, "score": 5, "last_activity_date": 1593474773, "creation_date": 1493849543, "question_id": 43770847, "link": "https://stackoverflow.com/questions/43770847/play-an-animated-gif-in-python-with-tkinter", "title": "Play an Animated GIF in python with tkinter", "body": "<p>I am wanting to create a virtual pet style game using python3 and tkinter.  So far I have the main window and have started putting labels in, but the issue I am having is playing an animated gif.  I have searched on here and have found some answers, but they keep throwing errors. The result I found has the index position of the gif using PhotoImage continue through a certain range.</p>\n\n<pre><code>    # Loop through the index of the animated gif\nframe2 = [PhotoImage(file='images/ball-1.gif', format = 'gif -index %i' %i) for i in range(100)]\n\ndef update(ind):\n\n    frame = frame2[ind]\n    ind += 1\n    img.configure(image=frame)\n    ms.after(100, update, ind)\n\nimg = Label(ms)\nimg.place(x=250, y=250, anchor=\"center\")\n\nms.after(0, update, 0)\nms.mainloop()\n</code></pre>\n\n<p>When I run this in terminal with \"pyhton3 main.py\" I get the following error:</p>\n\n<blockquote>\n  <p>_tkinter.TclError: no image data for this index</p>\n</blockquote>\n\n<p>What am I overlooking or completely leaving out?</p>\n\n<p>Here is the link to the GitHub repository to see the full project:<a href=\"https://github.com/nmoore14/first_python/tree/master/VirtPet_Python\" rel=\"noreferrer\">VirtPet_Python</a></p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "git", "github", "github3.py"], "answers": [{"tags": [], "owner": {"reputation": 365, "user_id": 3319183, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Sb1ax.jpg?s=128&g=1", "display_name": "tyrell_c", "link": "https://stackoverflow.com/users/3319183/tyrell-c"}, "is_accepted": true, "score": 0, "last_activity_date": 1493907587, "creation_date": 1493907587, "answer_id": 43785491, "question_id": 43770821, "link": "https://stackoverflow.com/questions/43770821/how-do-i-specify-team-permissions-on-github3py/43785491#43785491", "title": "How do I specify team permissions on github3py", "body": "<p>Well it looks like there's another method with the same name but for object <code>Team</code> </p>\n\n<pre><code>add_repository(repository, permission=u'')\nAdd repository to this team.\n\nParameters: \nrepository (str) \u2013 (required), form: \u2018user/repo\u2019\npermission (str) \u2013 (optional), (\u2018pull\u2019, \u2018push\u2019, \u2018admin\u2019)\n</code></pre>\n\n<p>This way you can specify permissions. </p>\n"}], "owner": {"reputation": 365, "user_id": 3319183, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/Sb1ax.jpg?s=128&g=1", "display_name": "tyrell_c", "link": "https://stackoverflow.com/users/3319183/tyrell-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 43785491, "answer_count": 1, "score": 0, "last_activity_date": 1493907587, "creation_date": 1493849424, "question_id": 43770821, "link": "https://stackoverflow.com/questions/43770821/how-do-i-specify-team-permissions-on-github3py", "title": "How do I specify team permissions on github3py", "body": "<p>I'm trying to do a simple script of adding repositories to a team with github3py. </p>\n\n<p>The <code>add_repo(repo, team)</code> method doesn't have anyway to specify what kind of permission I want my team to have, according to : <a href=\"http://github3.readthedocs.io/en/develop/orgs.html\" rel=\"nofollow noreferrer\">http://github3.readthedocs.io/en/develop/orgs.html</a></p>\n\n<p>vs in github docs, it says you can pass the permission as parameter: \n<a href=\"https://developer.github.com/v3/orgs/teams/#add-or-update-team-repository\" rel=\"nofollow noreferrer\">https://developer.github.com/v3/orgs/teams/#add-or-update-team-repository</a></p>\n\n<p>so is this just not implemented in github3.py or am I confused? </p>\n\n<p>I want to be able to add a team with read and write permissions. This defaults to read.</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1493849311, "post_id": 43770703, "comment_id": 74582996, "body": "If you use the StringVar as a textvariable argument (as opposed to a text argument) then the value is set automatically; you dont need the set_teamnumber method. I don&#39;t feel like wading into your code any further; please provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> if you want more help."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 7832524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af818b58586d8ee27962e81befa2c005?s=128&d=identicon&r=PG&f=1", "display_name": "tdbridger", "link": "https://stackoverflow.com/users/7832524/tdbridger"}, "edited": false, "score": 0, "creation_date": 1493892053, "post_id": 43770808, "comment_id": 74599783, "body": "Thanks very much, sorry if the questions I post are menial, need to get the project done by tomorrow."}, {"owner": {"reputation": 59, "user_id": 7832524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af818b58586d8ee27962e81befa2c005?s=128&d=identicon&r=PG&f=1", "display_name": "tdbridger", "link": "https://stackoverflow.com/users/7832524/tdbridger"}, "edited": false, "score": 0, "creation_date": 1493921015, "post_id": 43770808, "comment_id": 74620294, "body": "Even with this, when I come to say print the variable it still returns blank, any ideas?"}], "tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 1, "last_activity_date": 1493849374, "creation_date": 1493849374, "answer_id": 43770808, "question_id": 43770703, "link": "https://stackoverflow.com/questions/43770703/tkinter-change-a-shared-variable/43770808#43770808", "title": "Tkinter change a shared variable", "body": "<p>You start by setting <code>shared_data[\"current_course\"]</code> to an instance of <code>StringVar</code>, but then later you're resetting it to just a string.</p>\n\n<p>Since it is a <code>StringVar</code>, you need to call the <code>set</code> method to set the value:</p>\n\n<pre><code>currentcourse = self.controller.shared_data[\"currentcourse\"]\ncurrentcourse.set(listmenu.get())\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 7832524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af818b58586d8ee27962e81befa2c005?s=128&d=identicon&r=PG&f=1", "display_name": "tdbridger", "link": "https://stackoverflow.com/users/7832524/tdbridger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "accepted_answer_id": 43770808, "answer_count": 1, "score": 0, "last_activity_date": 1493849374, "creation_date": 1493848782, "last_edit_date": 1495541398, "question_id": 43770703, "link": "https://stackoverflow.com/questions/43770703/tkinter-change-a-shared-variable", "title": "Tkinter change a shared variable", "body": "<p>I am using <a href=\"https://stackoverflow.com/questions/33646605/how-to-access-variables-from-different-classes-in-tkinter-python-3\">a solution</a> found to try and share variables throughout my code, which consists of 'Frame' classes. However, any attempt I make to try and change the value of these shared variables seems to have no effect, and after I attempt to change them, if I print it just returns blank. Any help would be appreciated.</p>\n\n<pre><code>class GolfApp(tk.Tk):\n    def __init__(self, *args, **kwargs):\n    tk.Tk.__init__(self, *args, **kwargs)\n    self.shared_data = {\n        \"currentcourse\": tk.StringVar(),\n        \"numberofteams\": tk.IntVar()}\n\n    container = tk.Frame(self)\n    container.pack(side=\"top\", fill=\"both\", expand=True)\n    container.grid_rowconfigure(0, weight=1)\n    container.grid_columnconfigure(0, weight=1)\n\n    self.frames = {}\n    for F in (MainMenu, CreatePage, ViewPage, GetTeamsPage, ChooseCourse, \n              AddCourse, LoginSignUp, Login, SignUp, Highscores1, Highscores2,\n              Scorecards1, Scorecards2):\n        page_name = F.__name__\n        frame = F(parent=container, controller=self)\n        self.frames[page_name] = frame\n        frame.grid(row=0, column=0, sticky=\"nsew\")\n\n    self.show_frame(\"LoginSignUp\")\n\ndef show_frame(self, page_name):\n    frame = self.frames[page_name]\n    frame.tkraise()\n</code></pre>\n\n<p>This is where the solution from the link can be found. I have two variables, 'currentcourse' and 'numberofteams' which I need to share from one frame to others. I am attempting to set these variables in two different classes in the following bits of code.</p>\n\n<pre><code>class GetTeamsPage(tk.Frame):\n    def __init__(self, parent, controller):\n    tk.Frame.__init__(self, parent)\n    self.controller = controller\n    self.configure(background=\"lightgreen\")\n\n    def set_teamnumber():\n        numberofteams = answerentry.get()            \n        numberofteams = self.controller.shared_data[\"numberofteams\"].get()\n\n    def testInt(inStr, i, acttyp):\n        ind = int(i)\n        if acttyp == '1':\n           if not inStr[ind].isdigit():\n               return False\n        return True\n\n    for col in range(7):\n        self.grid_columnconfigure(col)\n\n\n    for row in range(5):\n        self.grid_rowconfigure(row)\n\n    questionlbl = tk.Label(self,\n                           text=\"How many teams/players are there?\",\n                           bg=\"lightgreen\",\n                           font = \"Verdana 20 bold\")\n\n    questionlbl.grid(column=2,\n                     row=0,\n                     columnspan=3)\n\n    answerentry = tk.Entry(self,\n                           text=\"Enter a number here.\",\n                           validate = \"key\",\n                           textvariable=self.controller.shared_data[\"numberofteams\"])\n\n    answerentry.grid(column=2,\n                     row=2,\n                     columnspan=3)\n\n    moveonbtn = tk.Button(self,\n                          text=\"Continue\",\n                          height = \"3\",\n                          width = \"40\",\n                          bg=\"darkgreen\",\n                          fg=\"lightgreen\",\n                          command = lambda: (controller.show_frame(\"CreatePage\"), set_teamnumber()))\n\n    moveonbtn.grid(column=1,\n                   row=5,\n                   columnspan=3)\n\n    returnbtn = tk.Button(self,\n                          height=\"3\",\n                          width=\"40\",\n                          bg=\"darkgreen\",\n                          fg=\"lightgreen\",\n                          text=\"Return to main menu\",\n                          command = lambda: controller.show_frame(\"MainMenu\"))\n\n    returnbtn.grid(column=4,\n                   row=5,\n                   columnspan=3)\n\nclass ChooseCourse(tk.Frame):\n    def __init__(self, parent, controller):\n    tk.Frame.__init__(self, parent)\n    self.controller = controller\n    self.configure(background=\"lightgreen\")\n    cursor.execute(\"SELECT CourseName FROM Course\")\n    coursetuple = cursor.fetchall()\n    courselist = [row[0] for row in coursetuple]\n\n\n    def get_choice():\n        currentcourse = self.controller.shared_data[\"currentcourse\"]\n        currentcourse = listmenu.get()\n\n\n    for col in range(2):\n        self.grid_columnconfigure(col, minsize=50)\n\n    for row in range(7):\n        self.grid_rowconfigure(row, minsize=60)\n\n    titlelbl = tk.Label(self,\n                        text=\"Choose a course\",\n                        bg=\"lightgreen\",\n                        font = \"Verdana 20 bold\")\n\n    titlelbl.grid(column=2,\n                  row=0)\n\n    addbtn = tk.Button(self,\n                       text=\"Add a new course\",\n                       bg=\"darkgreen\",\n                       fg=\"lightgreen\",\n                       command = lambda: controller.show_frame(\"AddCourse\"))\n\n    addbtn.grid(column=2,\n                row=3)\n\n    continuebtn = tk.Button(self,\n                            text=\"Continue\",\n                            bg=\"darkgreen\",\n                            fg=\"lightgreen\",\n                            command = lambda: (controller.show_frame(\"GetTeamsPage\"), get_choice))\n\n    continuebtn.grid(column=2,\n                     row=4)\n\n    returnbtn = tk.Button(self,\n                          text=\"Return to main menu\",\n                          bg=\"darkgreen\",\n                          fg=\"lightgreen\",\n                          command = lambda: controller.show_frame(\"MainMenu\"))\n\n    returnbtn.grid(column=2,\n                   row=5)\n\n\n    listmenu = tk.Listbox(self)\n\n    for x in range(0, len(courselist)):     \n            listmenu.insert(\"end\", courselist[x])\n\n    listmenu.grid(column=2,\n                     row=1)\n</code></pre>\n"}, {"tags": ["python", "go"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1493848848, "post_id": 43770667, "comment_id": 74582809, "body": "In my mind, <i>values</i> have types. Not names. But in statically typed languages, a given name can only refer to values of the type it was declared to refer to. It cannot change. That is why they are <i>statically</i> typed. Just think about it as a promise to the compiler: &quot;in this scope, <code>x</code> will always refer to a value of type <code>int</code>&quot;"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1493849085, "post_id": 43770667, "comment_id": 74582911, "body": "@juanpa.arrivillaga In Go and other statically typed languages, both variables and values have types, and the declared type of the variable must match the type of the value that it holds."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1493849252, "post_id": 43770667, "comment_id": 74582971, "body": "@DYZ yeah, I suppose that is correct. Values and Names are both said to be &quot;typed&quot;. In any event, it seems like a subtle semantic difference with no concrete difference."}, {"owner": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1493883129, "post_id": 43770667, "comment_id": 74593948, "body": "Go does not have the notion of &quot;name&quot; like python does. Go has the concept of a &quot;variable&quot;. <code>x</code> is a variable. Variables have types and values. The type of variable <code>x</code> is <code>int</code> and the value is <code>3</code>. No names involved. The concept &quot;variable&quot; is closely related to the idea of &quot;has a certain, fixed memory address and fixed memory layout&quot;."}, {"owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1493896802, "post_id": 43770667, "comment_id": 74603023, "body": "@juanpa.arrivillaga x:=3 syntax in GO leads to a confusion, because that syntax looks similar to python, despite GO compiler does type inference to find the type of x at compile time. Not sure, why static typed languages provide such syntax?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 30951, "user_id": 1266756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52eb9d81540fd9e91b82435b194ec9df?s=128&d=identicon&r=PG", "display_name": "Volker", "link": "https://stackoverflow.com/users/1266756/volker"}, "edited": false, "score": 0, "creation_date": 1493926250, "post_id": 43770667, "comment_id": 74623194, "body": "@Volker I would have a small quibble: Go does implicitly have a concept of &quot;names&quot; since it does have classic &quot;variables&quot;. A variable as such consists of an identifier (a name) and an associated storage location (chunk of organized memory). In Python, it is a better mental model to just think of variables as just names, with no associated storage location. But if you come from statically typed languages closer to the metal like C, one might think in terms of classic variables if you limit variables in Python to Py_Object* pointer  types (for CPython... implementation detail yadda yadda)."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1493926531, "post_id": 43770667, "comment_id": 74623359, "body": "@overexchange Most consider it a feature, I would say. I like type inference. It is liberating to be able to use powerful type systems in languages like Haskell and Scala without so much boilerplate! As for Go, I&#39;ve only dabbled, but I enjoy it. It is gives you the speed of a statically typed, compiled language like Java or C++ but it feels almost like writing Python, despite the curly braces."}], "answers": [{"tags": [], "owner": {"reputation": 13815, "user_id": 6575931, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-CumJFhlEBdA/AAAAAAAAAAI/AAAAAAAAi5U/sqexnazvXek/photo.jpg?sz=128", "display_name": "Uriel", "link": "https://stackoverflow.com/users/6575931/uriel"}, "is_accepted": true, "score": 5, "last_activity_date": 1493926554, "last_edit_date": 1493926554, "creation_date": 1493850131, "answer_id": 43770942, "question_id": 43770667, "link": "https://stackoverflow.com/questions/43770667/name-value-go-vs-python/43770942#43770942", "title": "Name &amp; value - Go vs Python", "body": "<p>Python variables are bound to instances of classes that are assigned to them dynamically over the course of the program. Therefore, and especially with mutable objects, they are merely pointers who contain information about their data location and the type of the data they point to. That's why, upon assigning a new value, you are creating a new instance (which is your main interest) and bind the variable name to it, so the type is related to the <em>value</em>, not the variable itself.</p>\n\n<pre><code>&gt;&gt;&gt; x = 3; id(x)\n1996006560\n&gt;&gt;&gt; x = 'str'; id(x)\n1732654458784\n</code></pre>\n\n<hr>\n\n<p>Go variables on the other hand, are serving (when not pointers) as stronghold memory locations, as the language is compiled and the variables get a constant \"job\" to keep a certain type of information (which could be a pointer as well). Therefore, a variable would almost certainly maintain his memory along the program, will have constant datatype properties, and, you could say the variable itself is of a certain type (and not of a semi-pointer type).</p>\n\n<pre><code>package main\nimport . \"fmt\"\nfunc main () {\n    x := \"str\"; Println(&amp;x)         // 0xc04203a1c0\n    x = \"Hello world!\"; Println(&amp;x) // 0xc04203a1c0\n}\n</code></pre>\n"}], "owner": {"reputation": 11490, "user_id": 3317808, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6c8272382fcd9841919bc1f8709d25a0?s=128&d=identicon&r=PG&f=1", "display_name": "overexchange", "link": "https://stackoverflow.com/users/3317808/overexchange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 43770942, "answer_count": 1, "score": 3, "last_activity_date": 1493932980, "creation_date": 1493848670, "last_edit_date": 1493932980, "question_id": 43770667, "link": "https://stackoverflow.com/questions/43770667/name-value-go-vs-python", "title": "Name &amp; value - Go vs Python", "body": "<p>In python, with below code,</p>\n\n<pre><code>x = 3\nx='str'\n</code></pre>\n\n<p>allows <code>x</code> to first point to <code>int</code> type object and then to <code>str</code> type object, because python is <strong>dynamic typed</strong>. <code>type(x)</code> gives type of value(<code>3</code> or <code>str</code>) <strong>but not</strong> type of name <code>x</code>.</p>\n\n<p>In-fact, <code>x</code> does not store value <code>3</code> but point to <code>int</code> type object whose value is <code>3</code></p>\n\n<hr>\n\n<p>In GO language, with below syntax,</p>\n\n<pre><code>func main() {\n        y := 2\n        fmt.Println(reflect.TypeOf(y)) // gives 'int'\n        y = \"str\" // Compile time error, because GO is static typed \n}\n</code></pre>\n\n<p><strong>Question:</strong></p>\n\n<p>Is <code>int</code>, the type of name <code>y</code> or the type of value <code>2</code>?</p>\n"}, {"tags": ["python", "list", "sorting"], "answers": [{"comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 2, "creation_date": 1493849786, "post_id": 43770691, "comment_id": 74583165, "body": "Can you explain assignment to a slice?"}, {"owner": {"reputation": 11435, "user_id": 6328256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PyZe2.png?s=128&g=1", "display_name": "Sash Sinha", "link": "https://stackoverflow.com/users/6328256/sash-sinha"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1493854629, "post_id": 43770691, "comment_id": 74584608, "body": "@PeterWood I added a line describing it, OP can search the term on their own to find answers explaining it in great detail (much better than I can)."}], "tags": [], "owner": {"reputation": 11435, "user_id": 6328256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PyZe2.png?s=128&g=1", "display_name": "Sash Sinha", "link": "https://stackoverflow.com/users/6328256/sash-sinha"}, "is_accepted": false, "score": 3, "last_activity_date": 1493854432, "last_edit_date": 1493854432, "creation_date": 1493848735, "answer_id": 43770691, "question_id": 43770650, "link": "https://stackoverflow.com/questions/43770650/sorting-a-list-in-python-from-the-second-element-on/43770691#43770691", "title": "Sorting a list in python from the second element on", "body": "<p>You can do so by slice assignment where you replace a slice of <code>a</code> with a sorted slice of <code>a</code>:</p>\n\n<pre><code>&gt;&gt;&gt; a = ['T',4,2,1,3]\n&gt;&gt;&gt; a[1:] = sorted(a[1:])\n&gt;&gt;&gt; a\n['T', 1, 2, 3, 4]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 117275, "user_id": 5393381, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/308ffa6266fda6d94bc56fbd9e9798f9?s=128&d=identicon&r=PG&f=1", "display_name": "MSeifert", "link": "https://stackoverflow.com/users/5393381/mseifert"}, "is_accepted": false, "score": 3, "last_activity_date": 1493848747, "creation_date": 1493848747, "answer_id": 43770695, "question_id": 43770650, "link": "https://stackoverflow.com/questions/43770650/sorting-a-list-in-python-from-the-second-element-on/43770695#43770695", "title": "Sorting a list in python from the second element on", "body": "<p>You could slice it, sort the trailing slice and concatenate it afterwards:</p>\n\n<pre><code>&gt;&gt;&gt; a = a[:1] + sorted(a[1:])\n&gt;&gt;&gt; a\n['T', 1, 2, 3, 4]\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7460643, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-y7DHE7lrQ3g/AAAAAAAAAAI/AAAAAAAAACo/bwTlz3P0wtQ/photo.jpg?sz=128", "display_name": "Sayan Basu", "link": "https://stackoverflow.com/users/7460643/sayan-basu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1493854685, "creation_date": 1493848581, "last_edit_date": 1493854026, "question_id": 43770650, "link": "https://stackoverflow.com/questions/43770650/sorting-a-list-in-python-from-the-second-element-on", "title": "Sorting a list in python from the second element on", "body": "<p>I want to sort a list but I want it to be sorted excluding the first element.</p>\n\n<p>For example:</p>\n\n<pre><code>a = ['T', 4, 2, 1, 3]\n</code></pre>\n\n<p>Now I want the list to be sorted but the first element should stay in its place:</p>\n\n<pre><code>a = ['T', 1, 2, 3, 4]\n</code></pre>\n\n<p>I know this can be done by using a sorting algorithm but is there a one line way to do it or a more <em>pythonic</em> way to do this?</p>\n"}, {"tags": ["python", "beautifulsoup", "python-requests"], "answers": [{"tags": [], "owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "is_accepted": false, "score": 0, "last_activity_date": 1493849507, "creation_date": 1493849507, "answer_id": 43770840, "question_id": 43770646, "link": "https://stackoverflow.com/questions/43770646/why-dont-some-search-bars-work-with-python-requests/43770840#43770840", "title": "Why don&#39;t some search bars work with Python requests?", "body": "<p>The query tag name is <code>\"q\"</code>, not <code>\"query\"</code>.</p>\n\n<p>Enjoy responsibly!</p>\n"}], "owner": {"reputation": 11, "user_id": 7960008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb73d5b4ae0dd84672964e2a3776a44?s=128&d=identicon&r=PG&f=1", "display_name": "andrewbowie", "link": "https://stackoverflow.com/users/7960008/andrewbowie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493865051, "creation_date": 1493848561, "last_edit_date": 1493865051, "question_id": 43770646, "link": "https://stackoverflow.com/questions/43770646/why-dont-some-search-bars-work-with-python-requests", "title": "Why don&#39;t some search bars work with Python requests?", "body": "<p>For whatever reason, I can't seem to be able to get this request to actually search in the search bar. There are 2 search bars on this website, one on the top right of the header, and also one on the main page. Maybe that has something to do with this? Any ideas?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>from bs4 import BeautifulSoup as soup\nimport requests\nbeername = \"guinness\"\nurl = 'https://untappd.com/search?'\nsearch_params = {'query': beername}\nr = requests.get(url, params=search_params)\nr = requests.post(url, params=search_params) # &lt;-doesn't work either\ns = soup(r.content, 'html.parser')\ncontainers = s.findAll('div', {'class': \"beer-item \"})\nprint(len(containers)) # this returns 0 right now\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "pivot"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 5, "last_activity_date": 1493848653, "creation_date": 1493848653, "answer_id": 43770664, "question_id": 43770635, "link": "https://stackoverflow.com/questions/43770635/make-a-dataframe-with-grouped-questions-from-three-columns/43770664#43770664", "title": "Make a dataframe with grouped questions from three columns", "body": "<p>Use <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.pivot_table.html\" rel=\"noreferrer\">DataFrame.pivot_table()</a> method:</p>\n\n<pre><code>In [250]: df.pivot_table(index='A', columns='B', values='C', aggfunc='sum', fill_value=0)\nOut[250]:\nB                 Agree  Disagree  Strongly Agree  Strongly Disagree\nA\nI am motivated        4         6               5                  0\nI am open-minded      4         4               0                  3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 211, "user_id": 7600491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/443dce014018ae0590a898e2c268aab9?s=128&d=identicon&r=PG&f=1", "display_name": "yangd01234", "link": "https://stackoverflow.com/users/7600491/yangd01234"}, "edited": false, "score": 0, "creation_date": 1493912971, "post_id": 43770680, "comment_id": 74615502, "body": "Thank you for the answer and also including in extra credit, this worked perfectly!"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 3, "last_activity_date": 1493850016, "last_edit_date": 1493850016, "creation_date": 1493848710, "answer_id": 43770680, "question_id": 43770635, "link": "https://stackoverflow.com/questions/43770635/make-a-dataframe-with-grouped-questions-from-three-columns/43770680#43770680", "title": "Make a dataframe with grouped questions from three columns", "body": "<p>Because these are already frequency counts, we can assume that we have unique <code>Question</code> / <code>Opinion</code> pairs.  So, we can use <code>set_index</code> and <code>unstack</code> as there won't be a need to aggregate.  This should save us some time with efficiency.  We could accomplish the same goal with <code>pivot</code>, however, <code>pivot</code> doesn't have a <code>fill_value</code> option that enables us to preserve <code>dtype</code></p>\n\n<pre><code>df.set_index(['A', 'B']).C.unstack(fill_value=0)\n\nB                 Agree  Disagree  Strongly Agree  Strongly Disagree\nA                                                                   \nI am motivated        4         6               5                  0\nI am open-minded      4         4               0                  3\n</code></pre>\n\n<hr>\n\n<p><strong><em>Extra Credit</em></strong><br>\n<em>Turn <code>'B'</code> into a <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Categorical.html\" rel=\"nofollow noreferrer\"><strong><code>pd.Categorical</code></strong></a> and the columns will be sorted</em></p>\n\n<pre><code>df.B = pd.Categorical(\n    df.B, ['Strongly Disagree', 'Disagree', 'Agree', 'Strongly Agree'], True)\ndf.set_index(['A', 'B']).C.unstack(fill_value=0)\n\nB                 Strongly Disagree  Disagree  Agree  Strongly Agree\nA                                                                   \nI am motivated                    0         6      4               5\nI am open-minded                  3         4      4               0\n</code></pre>\n"}], "owner": {"reputation": 211, "user_id": 7600491, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/443dce014018ae0590a898e2c268aab9?s=128&d=identicon&r=PG&f=1", "display_name": "yangd01234", "link": "https://stackoverflow.com/users/7600491/yangd01234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 1, "accepted_answer_id": 43770680, "answer_count": 2, "score": 4, "last_activity_date": 1493891823, "creation_date": 1493848502, "last_edit_date": 1493891823, "question_id": 43770635, "link": "https://stackoverflow.com/questions/43770635/make-a-dataframe-with-grouped-questions-from-three-columns", "title": "Make a dataframe with grouped questions from three columns", "body": "<p>I have the following dataframe:</p>\n\n<pre><code>       A               B                  C\n  I am motivated     Agree                4\n  I am motivated     Strongly Agree       5\n  I am motivated     Disagree             6\n  I am open-minded   Agree                4\n  I am open-minded   Disagree             4\n  I am open-minded   Strongly Disagree    3\n</code></pre>\n\n<p>Where column A is the question, column B is the answer, and column C is the frequency of \"Strongly Agree\", \"Agree\", \"Disagree\", and \"Strongly Disagree\" for the questions in column A.  </p>\n\n<p>How can I convert it into the following dataframe?</p>\n\n<pre><code>                  Strongly Agree    Agree     Disagree   Strongly Disagree\nI am motivated        5               4           6             0\nI am open-minded      0               4           4             3\n</code></pre>\n\n<p>I tried looking at groupby() for columns from other posts but could not figure it out.  Using python 3</p>\n"}, {"tags": ["python", "list", "dictionary"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1493848599, "post_id": 43770618, "comment_id": 74582718, "body": "I&#39;m not sure exactly what it is you are trying to do, but a for-loop <i>is</i> pythonic."}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1493848640, "post_id": 43770618, "comment_id": 74582740, "body": "What is the value of, say, <code>myDictList[0][0]</code>?"}, {"owner": {"reputation": 3494, "user_id": 1243255, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9328a10a909a33568ad798474053f476?s=128&d=identicon&r=PG", "display_name": "Zanam", "link": "https://stackoverflow.com/users/1243255/zanam"}, "edited": false, "score": 0, "creation_date": 1493848688, "post_id": 43770618, "comment_id": 74582757, "body": "I agree, is there smarter way to do the above ?"}], "answers": [{"tags": [], "owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "is_accepted": true, "score": 3, "last_activity_date": 1493849237, "creation_date": 1493849237, "answer_id": 43770781, "question_id": 43770618, "link": "https://stackoverflow.com/questions/43770618/python-extracting-data-from-nested-dictionary-with-single-keys/43770781#43770781", "title": "Python: Extracting data from nested dictionary with single keys", "body": "<p>There is nothing to do:</p>\n\n<pre><code>myDictList[0] == {1: {1: {'XX':5, 'YY':7}}}\n</code></pre>\n\n<p>Is the same as:</p>\n\n<pre><code>myDictList[0][1][1] == {'XX':5, 'YY':7}\n</code></pre>\n"}], "owner": {"reputation": 3494, "user_id": 1243255, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/9328a10a909a33568ad798474053f476?s=128&d=identicon&r=PG", "display_name": "Zanam", "link": "https://stackoverflow.com/users/1243255/zanam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 467, "favorite_count": 0, "accepted_answer_id": 43770781, "answer_count": 1, "score": -1, "last_activity_date": 1493849237, "creation_date": 1493848402, "last_edit_date": 1493848907, "question_id": 43770618, "link": "https://stackoverflow.com/questions/43770618/python-extracting-data-from-nested-dictionary-with-single-keys", "title": "Python: Extracting data from nested dictionary with single keys", "body": "<p>I have a list of about 300 dictionary each of which has elements as follows:</p>\n\n<pre><code>myDictList[0]\n{1: {1: {'XX':5, 'YY':7}}}\n\nmyDictList[1]\n{11: {25: {'XX':15, 'YY':73}}}\n</code></pre>\n\n<p>I want to instead generate </p>\n\n<pre><code>myDictList[0] = {}\nmyDictList[1] = {}\nmyDictList[0][1][1] = {'XX':5, 'YY':7}\nmyDictList[1][11][25] = {'XX':15, 'YY':73}\n</code></pre>\n\n<p>I am trying a <code>for loop</code> right now. Is there a pythonic way to do this?</p>\n\n<p>Edit:</p>\n\n<p>myDictList is <code>list</code> and others are <code>dictionary</code> as follows:</p>\n\n<pre><code>myDictList[0] = {}\nmyDictList[0][1] = {}\nmyDictList[0][1][1] = {}\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1493849794, "post_id": 43770616, "comment_id": 74583166, "body": "What did you try so far? Please include your code in the question."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1493851083, "post_id": 43770616, "comment_id": 74583595, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/2444538/go-to-a-specific-line-in-python\">Go to a specific line in Python?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4719, "user_id": 2958070, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FtkjC.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/2958070/ben"}, "is_accepted": true, "score": 1, "last_activity_date": 1493900393, "last_edit_date": 1493900393, "creation_date": 1493848723, "answer_id": 43770685, "question_id": 43770616, "link": "https://stackoverflow.com/questions/43770616/how-to-get-the-text-from-a-specific-line-of-text/43770685#43770685", "title": "How to get the text from a specific line of text?", "body": "<p>Do you want something like this?</p>\n\n<pre><code>def get_lines(filename, line_numbers):\n    with open(filename) as f:\n        for line_number, line in enumerate(f):\n            if line_number in line_numbers:\n                yield line_number, line\n\n\nfor line_number, line in get_lines('tmp.txt', (1, 3)):\n    print(line_number, line)\n</code></pre>\n\n<p>This code returns a generator iterator so you should loop through it.</p>\n"}], "owner": {"reputation": 3, "user_id": 7945814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f85e026a314be5ec7036e7911197b250?s=128&d=identicon&r=PG&f=1", "display_name": "jake", "link": "https://stackoverflow.com/users/7945814/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 43770685, "answer_count": 1, "score": -1, "last_activity_date": 1493900393, "creation_date": 1493848392, "question_id": 43770616, "link": "https://stackoverflow.com/questions/43770616/how-to-get-the-text-from-a-specific-line-of-text", "title": "How to get the text from a specific line of text?", "body": "<p>How can I take text file and access/return a specific line from the file? \nFor example, \"File.txt\" is 100 lines long and I want the information that's contained on lines 1,31,61 and 91.</p>\n\n<pre><code>dataFile = open(\"File.text\",\"a+\")\n</code></pre>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1493848514, "post_id": 43770594, "comment_id": 74582687, "body": "Why would you set the id manually? It&#39;s an auto incrementing field, you should let the db set it."}, {"owner": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "reply_to_user": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1493849495, "post_id": 43770594, "comment_id": 74583066, "body": "@DanielRoseman, I know it. The question was another."}], "answers": [{"comments": [{"owner": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 0, "creation_date": 1493872333, "post_id": 43772356, "comment_id": 74588787, "body": "&quot;However, that transaction is not going to protect against the situation you describe.&quot;. Why?"}, {"owner": {"reputation": 36561, "user_id": 2395796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8786484468219bcf403bbdce5eb37c8d?s=128&d=identicon&r=PG", "display_name": "Kevin Christopher Henry", "link": "https://stackoverflow.com/users/2395796/kevin-christopher-henry"}, "reply_to_user": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 0, "creation_date": 1493873750, "post_id": 43772356, "comment_id": 74589184, "body": "@Gilgamesz: It says it&#39;s &quot;prone to a race-condition... if uniqueness is not enforced at the database level&quot;. Since the uniqueness of <code>id</code> <i>is</i> enforced at the database level, that doesn&#39;t apply to the situation you described. As to your second question, the rest of that paragraph is describing why. Let me know if you have a more specific question."}, {"owner": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 0, "creation_date": 1493877690, "post_id": 43772356, "comment_id": 74590717, "body": "thanks- you right.  My question was not specific. The question is: I don&#39;t understand why uniqueness ensures that it is race condition safe. Otherwise, it is not."}, {"owner": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 0, "creation_date": 1493877867, "post_id": 43772356, "comment_id": 74590796, "body": "After all, in <code>update_or_create</code> there is <code>transaction.atomic(using=self.db):</code>. So I don&#39;t understand why uniqueness matters- it has been taken lock for a database ( or table)"}, {"owner": {"reputation": 36561, "user_id": 2395796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8786484468219bcf403bbdce5eb37c8d?s=128&d=identicon&r=PG", "display_name": "Kevin Christopher Henry", "link": "https://stackoverflow.com/users/2395796/kevin-christopher-henry"}, "reply_to_user": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 0, "creation_date": 1493879251, "post_id": 43772356, "comment_id": 74591480, "body": "@Gilgamesz: You might have a misunderstanding of what transactions are in the SQL world. They&#39;re not locks, and they&#39;re not what you might think of as &quot;atomic&quot; in other contexts. The specific behavior is complicated and depends on the <i>transaction isolation level</i> and its database-specific implementation (see <a href=\"https://www.postgresql.org/docs/current/static/transaction-iso.html\" rel=\"nofollow noreferrer\">PostgreSQL&#39;s docs</a>, for example)."}, {"owner": {"reputation": 36561, "user_id": 2395796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8786484468219bcf403bbdce5eb37c8d?s=128&d=identicon&r=PG", "display_name": "Kevin Christopher Henry", "link": "https://stackoverflow.com/users/2395796/kevin-christopher-henry"}, "reply_to_user": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 0, "creation_date": 1493879279, "post_id": 43772356, "comment_id": 74591491, "body": "@Gilgamesz: In your specific scenario, uniqueness matters because it causes the database to reject the second <code>INSERT</code> with an error. <code>update_or_create()</code> detects that error and does an <code>UPDATE</code> instead. Look through the code I linked to to fully understand the algorithm."}, {"owner": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 0, "creation_date": 1494082920, "post_id": 43772356, "comment_id": 74682105, "body": "you right that I misunderstanding transactions. You said that I cannot think about it as atomicity from other worlds. But, when I read in documentation about <code>@transaction.atomic</code> it is said that:   &quot;atomic allows us to create a block of code within which the atomicity on the database is guaranteed&quot;. Now, I am confused."}, {"owner": {"reputation": 36561, "user_id": 2395796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8786484468219bcf403bbdce5eb37c8d?s=128&d=identicon&r=PG", "display_name": "Kevin Christopher Henry", "link": "https://stackoverflow.com/users/2395796/kevin-christopher-henry"}, "reply_to_user": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 0, "creation_date": 1494094436, "post_id": 43772356, "comment_id": 74685859, "body": "@Gilgamesz: They are atomic in the SQL sense (&quot;on the database&quot;), I&#39;m just pointing out that these terms - <i>transaction</i>, <i>atomic</i>, <i>isolation</i> - all have specific meanings and implications. Coming from another context where the terms are used differently you might end up with a misunderstanding (for example, thinking that transactions are like locks)."}, {"owner": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "edited": false, "score": 0, "creation_date": 1494098570, "post_id": 43772356, "comment_id": 74687072, "body": "&quot; They are atomic in the SQL sense (&quot;on the database&quot;), &quot;, what does it mean? Is it dependant of isolation level? How?"}], "tags": [], "owner": {"reputation": 36561, "user_id": 2395796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8786484468219bcf403bbdce5eb37c8d?s=128&d=identicon&r=PG", "display_name": "Kevin Christopher Henry", "link": "https://stackoverflow.com/users/2395796/kevin-christopher-henry"}, "is_accepted": false, "score": 2, "last_activity_date": 1493860842, "creation_date": 1493860842, "answer_id": 43772356, "question_id": 43770594, "link": "https://stackoverflow.com/questions/43770594/atomicity-of-save-in-django/43772356#43772356", "title": "Atomicity of save() in django", "body": "<p>The documented <code>save()</code> logic that you summarized is run within a transaction in the <a href=\"https://github.com/django/django/blob/1.11/django/db/models/base.py#L833\" rel=\"nofollow noreferrer\">source code</a>.</p>\n\n<p>However, that transaction is not going to protect against the situation you describe. The default database isolation level probably doesn't apply, and the <code>save()</code> code doesn't have any mechanism to retry the update if the insert raises an <code>IntegrityError</code>.</p>\n\n<p>Now, Django <em>does</em> have a solution to this problem, and it's <a href=\"https://docs.djangoproject.com/en/1.11/ref/models/querysets/#update-or-create\" rel=\"nofollow noreferrer\"><code>update_or_create()</code></a>, which, along with <code>get_or_create()</code>, \"is atomic assuming correct usage, correct database configuration, and correct behavior of the underlying database\". See the <a href=\"https://github.com/django/django/blob/1.11/django/db/models/query.py#L467\" rel=\"nofollow noreferrer\">source code</a> to understand how it achieves this. </p>\n\n<p>So your best bet is probably to use that, something like:</p>\n\n<pre><code>def f(title):\n    Book.objects.update_or_create(\n        id=1, \n        defaults={\"title\": title},\n    )\n</code></pre>\n"}], "owner": {"reputation": 3815, "user_id": 5382150, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GwGSL.png?s=128&g=1", "display_name": "Gilgamesz", "link": "https://stackoverflow.com/users/5382150/gilgamesz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1493860887, "creation_date": 1493848280, "last_edit_date": 1493860887, "question_id": 43770594, "link": "https://stackoverflow.com/questions/43770594/atomicity-of-save-in-django", "title": "Atomicity of save() in django", "body": "<p>Let's consider a table in database:</p>\n\n<pre><code>Book:\n\n+--------+\n|id|title|\n----------\n</code></pre>\n\n<p>The table is empty.</p>\n\n<p>Now, I have a piece of code:</p>\n\n<pre><code>from django.db import models\n\nclass Book(models.Model):\n    title = models.CharField(max_length=100)\n\n\ndef f(title):\n    b = Book()\n    b.id = 1\n    b.title = title\n    b.save()\n</code></pre>\n\n<p>And, I have two processes:</p>\n\n<p>Process 1 executes: <code>f('t1')</code></p>\n\n<p>Process 2 executes <code>f('t2')</code></p>\n\n<p>What if the following situation will take place?</p>\n\n<p>The <code>save()</code> looks like ( based on what I read from documentation) </p>\n\n<pre><code>(1) UPDATE # if primary_key is set\n(2) INSERT # if UPDATE returns 0 rows or primary_key = None\n</code></pre>\n\n<p>What if the second process executed (1) operation. Now, the first process executed (1) and (2) operation. And now, the second process tries to execute (2). ERROR.</p>\n\n<p>So, in fact, the question is: It is safe when it comes to atomicity? Does django ensures atomicity in that situation? If not, how can I do it? </p>\n\n<p>Please note that:\nI know that I can make it to be a transaction. I am asking if I <strong>have to do it.</strong></p>\n"}, {"tags": ["python", "radio-button", "maya", "popupmenu", "maya-api"], "answers": [{"comments": [{"owner": {"reputation": 44, "user_id": 7835581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fe845997b371909f4ee0689b08ba17?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Baker", "link": "https://stackoverflow.com/users/7835581/adam-baker"}, "edited": false, "score": 0, "creation_date": 1493922536, "post_id": 43786844, "comment_id": 74621108, "body": "I think I understand but I am trying to print the menu item. And when I try and print &quot;selected&quot; it doesn&#39;t come back with the name of selected."}], "tags": [], "owner": {"reputation": 11342, "user_id": 1936075, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/keYz5.jpg?s=128&g=1", "display_name": "theodox", "link": "https://stackoverflow.com/users/1936075/theodox"}, "is_accepted": true, "score": 0, "last_activity_date": 1493910986, "creation_date": 1493910986, "answer_id": 43786844, "question_id": 43770584, "link": "https://stackoverflow.com/questions/43770584/cmds-radiomenuitemcollection-get-selected/43786844#43786844", "title": "Cmds.radioMenuItemCollection - get selected", "body": "<p>It looks like ADSK forgot to expose all the controls on that one! It doesn't report as a regular <code>radioCollection</code>. so the only workaround is something like this:</p>\n\n<pre><code>cmds.window( menuBar=True )\nq = cmds.menu( label='Position' )\nr = cmds.radioMenuItemCollection()\nx =cmds.menuItem( label='Top', radioButton=False )\ny = cmds.menuItem( label='Middle', radioButton=False )\nz = cmds.menuItem( label='Bottom', radioButton=True )\ncmds.showWindow()\n\nselected = max ([t if cmds.menuItem(t, q=True, rb=True) else None for t in  (x,y,z)])\n</code></pre>\n"}], "owner": {"reputation": 44, "user_id": 7835581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fe845997b371909f4ee0689b08ba17?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Baker", "link": "https://stackoverflow.com/users/7835581/adam-baker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 43786844, "answer_count": 1, "score": 0, "last_activity_date": 1493910986, "creation_date": 1493848213, "question_id": 43770584, "link": "https://stackoverflow.com/questions/43770584/cmds-radiomenuitemcollection-get-selected", "title": "Cmds.radioMenuItemCollection - get selected", "body": "<p>Hey all I am trying to get the name of the selected menuItem(radioButton) in a popupMenu. I know in cmds.radioCollection they have a flag called \"select\" but for cmds.radioMenuItemCollection the flag select doesn't exist. How can I get the name of the selected option </p>\n"}, {"tags": ["python", "audio", "wav"], "answers": [{"tags": [], "owner": {"reputation": 1104, "user_id": 5251061, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CEyGb.jpg?s=128&g=1", "display_name": "mc51", "link": "https://stackoverflow.com/users/5251061/mc51"}, "is_accepted": true, "score": 0, "last_activity_date": 1493851097, "creation_date": 1493851097, "answer_id": 43771107, "question_id": 43770550, "link": "https://stackoverflow.com/questions/43770550/return-type-of-wavfile-read-in-python/43771107#43771107", "title": "Return type of wavfile.read in python", "body": "<p>data holds a numpy array representing the sound in your .wav file.\nSome good explanations on how the sound is represented in that data can be found in the following question: \n<a href=\"https://stackoverflow.com/questions/13039846/what-do-the-bytes-in-a-wav-file-represent\">What do the bytes in a .wav file represent?</a></p>\n"}, {"tags": [], "owner": {"reputation": 13852, "user_id": 468725, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/85a49cd89084e6512dee0f140e86d5b4?s=128&d=identicon&r=PG", "display_name": "Pavel P", "link": "https://stackoverflow.com/users/468725/pavel-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1493891294, "creation_date": 1493891294, "answer_id": 43779436, "question_id": 43770550, "link": "https://stackoverflow.com/questions/43770550/return-type-of-wavfile-read-in-python/43779436#43779436", "title": "Return type of wavfile.read in python", "body": "<p><code>data</code> in <a href=\"https://msdn.microsoft.com/en-us/library/windows/desktop/ee415713%28v=vs.85%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\">wav files</a> is <a href=\"https://en.wikipedia.org/wiki/Sampling_(signal_processing)\" rel=\"nofollow noreferrer\">audio samples</a>. Most of the time it's 16bit signed integers. For wav files you mostly care about rate (sound frequency) and number of channels (if your wav file is not mono).</p>\n"}], "owner": {"reputation": 81, "user_id": 7853137, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/834cf968ebb26bad62b26b960567d893?s=128&d=identicon&r=PG&f=1", "display_name": "eli0T", "link": "https://stackoverflow.com/users/7853137/eli0t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 680, "favorite_count": 0, "accepted_answer_id": 43771107, "answer_count": 2, "score": 1, "last_activity_date": 1493891294, "creation_date": 1493848098, "question_id": 43770550, "link": "https://stackoverflow.com/questions/43770550/return-type-of-wavfile-read-in-python", "title": "Return type of wavfile.read in python", "body": "<p>I need to analyse a sound file, in order to get when the sound is louder.</p>\n\n<p>I have this :</p>\n\n<blockquote>\n  <p>rate, data = wavfile.read('test.wav')</p>\n</blockquote>\n\n<p>I know the meaning of the rate value, but what really is in the data variable ?</p>\n\n<p>It works well when I want to retrieve the time intervals of the louder part of the audio, by looking at the data list, but I can't really find out the meaning of this list...</p>\n\n<p>Thank you very much</p>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1493848420, "post_id": 43770529, "comment_id": 74582648, "body": "You can update the text or any attribute of the Label with the <code>config</code> method: <code>label.config(text=&#39;Sending: &#39; + l)</code>."}, {"owner": {"reputation": 1, "user_id": 7905825, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1862150904040158/picture?type=large", "display_name": "Mohamed El Hadi", "link": "https://stackoverflow.com/users/7905825/mohamed-el-hadi"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1493850355, "post_id": 43770529, "comment_id": 74583364, "body": "@Novel I didn&#39;t understand :/"}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1493850484, "post_id": 43770529, "comment_id": 74583408, "body": "If you replace <code>print (&#39;Sending: &#39; + l)</code> with <code>label.config(text=&#39;Sending: &#39; + l)</code> you will see the updates in the label rather than the terminal. Isn&#39;t that what you were asking?"}, {"owner": {"reputation": 1, "user_id": 7905825, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1862150904040158/picture?type=large", "display_name": "Mohamed El Hadi", "link": "https://stackoverflow.com/users/7905825/mohamed-el-hadi"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1493851156, "post_id": 43770529, "comment_id": 74583616, "body": "@Novel yes , but i want to see the updates in this label : Label(Frame1, text=&quot;Commande&quot;,background=&#39;NavajoWhite2&#39;).pack(padx=165, pady=10)  how to do ?  thank you and sorry for the inconvenience"}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1493851349, "post_id": 43770529, "comment_id": 74583667, "body": "So give that label a variable name and use the same code with the proper name. Note you have to put the <code>pack()</code> on a separate line if  you are saving the Label to a variable."}, {"owner": {"reputation": 1, "user_id": 7905825, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1862150904040158/picture?type=large", "display_name": "Mohamed El Hadi", "link": "https://stackoverflow.com/users/7905825/mohamed-el-hadi"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1493852525, "post_id": 43770529, "comment_id": 74584003, "body": "@Novel I did what you told me , it only shows me the first line and not all the updates"}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1493852691, "post_id": 43770529, "comment_id": 74584055, "body": "I can&#39;t run your code as it is; Show me a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> and I&#39;ll fix it for you."}, {"owner": {"reputation": 1, "user_id": 7905825, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1862150904040158/picture?type=large", "display_name": "Mohamed El Hadi", "link": "https://stackoverflow.com/users/7905825/mohamed-el-hadi"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1493854071, "post_id": 43770529, "comment_id": 74584466, "body": "@Novel   I wrote this :  <code>o.config(text = &#39;Sending:&#39; + l).pack(padx=50, pady=50)</code>  with : <code>o= LabelFrame(moha, text= &quot;Fase des commandes&quot;)</code>  The result is that it shows me the first line  , and then there is an error message that appears the error message is : <code>AttributeError: &#39;NoneType&#39; object has no attribute &#39;pack&#39;</code>"}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1493854321, "post_id": 43770529, "comment_id": 74584522, "body": "Show me a Minimal, Complete, and Verifiable example and I&#39;ll fix it for you."}, {"owner": {"reputation": 1, "user_id": 7905825, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1862150904040158/picture?type=large", "display_name": "Mohamed El Hadi", "link": "https://stackoverflow.com/users/7905825/mohamed-el-hadi"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1493855329, "post_id": 43770529, "comment_id": 74584803, "body": "@Novel    The program is longer than that, I have already mentioned what is important I can not compress more than that :("}, {"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1493862106, "post_id": 43770529, "comment_id": 74586203, "body": "I&#39;m not asking you to compress it. I&#39;m asking you to write a whole new program that I can run and that demonstrates your problem. Then I can test it and fix it and then you can apply that to your big program."}], "answers": [{"tags": [], "owner": {"reputation": 2153, "user_id": 4084269, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1dyyRxuVJ2Y/AAAAAAAAAAI/AAAAAAAAAPg/Ie0n46FZeUY/photo.jpg?sz=128", "display_name": "Josselin", "link": "https://stackoverflow.com/users/4084269/josselin"}, "is_accepted": false, "score": 0, "last_activity_date": 1493907318, "last_edit_date": 1495540030, "creation_date": 1493907318, "answer_id": 43785377, "question_id": 43770529, "link": "https://stackoverflow.com/questions/43770529/tkinter-interface-need-assistance/43785377#43785377", "title": "tkinter interface need assistance", "body": "<p>as mentioned by Novel, in order to properly store the reference to a widget, you should separate widget <strong>creation</strong> from widget <strong>alignment</strong> (see also <a href=\"https://stackoverflow.com/a/43275555/4084269\">here</a>).</p>\n\n<p>Second, to display in <strong>real time</strong> the text of your label in your GUI while in a <code>for</code> loop, you will need to call <code>.update()</code> on your main window.</p>\n\n<p>Below is a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a> that shows how this works:</p>\n\n<pre><code>import tkinter as tk\nfrom time import sleep\n\ndef change_label():\n    for i in range(5):\n        label.config(text=\"iteration \" + str(i))\n        # Update the GUI in real time\n        root.update()\n        sleep(1)\n\nroot = tk.Tk()\n# Create &amp; align a label in 2 steps\nlabel = tk.Label(root, text=\"hello\") \nlabel.pack()\n\nbutton = tk.Button(root, text=\"click me\", command=change_label)\nbutton.pack()\n\n# Launch the GUI\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7905825, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/1862150904040158/picture?type=large", "display_name": "Mohamed El Hadi", "link": "https://stackoverflow.com/users/7905825/mohamed-el-hadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1508338051, "creation_date": 1493848006, "last_edit_date": 1508338051, "question_id": 43770529, "link": "https://stackoverflow.com/questions/43770529/tkinter-interface-need-assistance", "title": "tkinter interface need assistance", "body": "<p>I am developing a graphical interface with tkinter. When I open file and send it, I want to see the scrolling instructions in label (Commande) </p>\n\n<p>To be more precise i do not know how to link this instruction <code>print('Sending: ' + l)</code> with this instruction <code>Label(Frame1, text=\"Commande\", background='NavajoWhite2').pack(padx=165, pady=10)</code></p>\n\n<p>Thanks to all</p>\n\n<pre><code>from tkinter import *\nfrom tkinter import filedialog\nfrom tkinter import ttk, Text\n\n#nom de la fenetre\n\nmoha = Tk()\nmoha.title('Emetteur G-code Universel')\nmoha.geometry(\"2500x2500\")\nmoha['bg']= 'NavajoWhite2'\n\n##################\n##################\n#le chemin de recherche #\n\ndef file(tk_event=None, *args, **kw):\n    fiile = filedialog.askopenfilename(filetypes=[('txt files','.txt'),('all files','.*')])\n    file_path.set(fiile)\n    fichier = open(fiile, \"r\")\n    print(fiile)\n\n    content_bis = fichier.readlines()\n\n    for line in content_bis:\n            T.insert(END, line)\n\n    fichier.close()\n\n    # Cr\u00e9er les diff\u00e9rentes Frame\n\n    Outil = LabelFrame(moha, text=\"Outil\")\n    Outil.place(x=500)\n    Outil['bg']= 'NavajoWhite2'\n    label = Label(Outil, text='Fichier : ', background='NavajoWhite2')\n    label.place(x=10, y=114)\n\n    file_path = StringVar()\n\n    entry = Entry(Outil, textvariable=file_path)\n    entry.place(x=60, y=114)\n    ################\n\n   def moh():\n\n      # Open grbl serial port\n      s = serial.Serial('/dev/ttyS0',115200)\n\n      # Open g-code file\n\n      f = open(file_path.get(), \"r\");\n\n      # Wake up grbl\n      s.write(\"\\r\\n\\r\\n\".encode('utf8'))\n      time.sleep(2)   # Wait for grbl to initialize \n      s.flushInput()  # Flush startup text in serial input\n\n      # Stream g-code to grbl\n      for line in f:\n          l = line.strip() # Strip all EOL characters for consistency\n          print ('Sending: ' + l)\n          s.write((l + '\\n').encode(\"utf8\")) # Send g-code block to grbl\n          grbl_out = s.readline().decode(\"utf8\") # Wait for grbl response with carriage return\n          print (' : ' + grbl_out)\n\n      # Wait here until grbl is finished to close serial port and file.\n      raw_input(\"  Press &lt;Enter&gt; to exit and disable grbl.\") \n\n      # Close file and serial port\n      f.close()\n      s.close()\n\n\n    #Cr\u00e9er la barre de recherche \n\n\n   #################\n  o = LabelFrame(moha, text=\"Fase des commandes\")\n  o.place(y=400)\n  o['bg']= 'NavajoWhite2'\n  Label(o, background='NavajoWhite2').pack(padx=670,pady=120)\n  Frame1 = Frame(o, borderwidth=3, relief=GROOVE, background='NavajoWhite2')\n  Frame1.place(x=0, y=5)\n  Label(Frame1, text=\"Commande\",background='NavajoWhite2').pack(padx=165, pady=10)\n  #################\n  b1= Button(Outil, text =\"Commande\", background='White').place(x=10, y=20)\n  b2= Button(Outil, text =\"Fichier\", background='White').place(x=110, y=20)\n  b3= Button(Outil, text =\"C\u00f4ntrole de la machine\", \n  background='White').place(x=190, y=20)\n  b4= Button(Outil, text =\"Selectionner un fichier\",background='White', \n command=file).place(x=235, y=112)\n  b5= Button(Outil, text =\"Envoyer\",background='White', command=moh).place(x=30, y=150)\n  b6= Button(Outil, text =\"Pause\",background='White').place(x=110, y=150)\n  b7= Button(Outil, text =\"Annuler\",background='White').place(x=180, y=150)\n  Label(Outil, text=\"\", background='NavajoWhite2').pack(padx=300, pady=150)\n  ################\n  ################\n  S = Scrollbar(Outil, background='NavajoWhite2')\n  T = Text(Outil, height=19, width=28)\n  S.place(x=380, y=10)\n  T.place(x=400, y=0)\n  S.config(command=T.yview)\n  T.config(yscrollcommand=S.set)\n</code></pre>\n"}, {"tags": ["python", "pandas", "matplotlib", "seaborn"], "comments": [{"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 1, "creation_date": 1493848127, "post_id": 43770507, "comment_id": 74582542, "body": "Did you read the documentation for <code>barplot</code>? It takes a parameter called <code>order</code>. So you could sort by your <code>Count</code> column, and pass the resulting <code>Dim</code> values to that."}], "answers": [{"comments": [{"owner": {"reputation": 747, "user_id": 4155911, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/cf3a762dec887f6eb6268fd06a31167b?s=128&d=identicon&r=PG&f=1", "display_name": "Rotkiv", "link": "https://stackoverflow.com/users/4155911/rotkiv"}, "edited": false, "score": 2, "creation_date": 1504197789, "post_id": 43770963, "comment_id": 78932794, "body": "Do I understand it correctly -- even if I have sorted dataframe I have to first create it using indices as labels to make sure sns does not sort bars alphabetically based on label names (and there is no way to pass, for example, <code>sorted = False</code>, to avoid that) ?"}], "tags": [], "owner": {"reputation": 28401, "user_id": 2666859, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LtKyC.png?s=128&g=1", "display_name": "Serenity", "link": "https://stackoverflow.com/users/2666859/serenity"}, "is_accepted": true, "score": 18, "last_activity_date": 1531587866, "last_edit_date": 1531587866, "creation_date": 1493850268, "answer_id": 43770963, "question_id": 43770507, "link": "https://stackoverflow.com/questions/43770507/seaborn-bar-plot-ordering/43770963#43770963", "title": "Seaborn Bar Plot Ordering", "body": "<p>You have to sort your dataframe in desired way and the reindex it to make new ascending / descending index. After that you may plot bar graph with index as x values. Then set set labels by Dim column of your dataframe:</p>\n\n<pre><code>import matplotlib.pylab as plt\nimport pandas as pd\nimport seaborn as sns\n\ndicti=({'37':99943,'25':47228,'36':16933,'40':14996,'35':11791,'34':8030,'24' : 6319 ,'2'  :5055 ,'39' :4758 ,'38' :4611  })\npd_df = pd.DataFrame(list(dicti.items()))\npd_df.columns =[\"Dim\",\"Count\"]\nprint (pd_df)\n# sort df by Count column\npd_df = pd_df.sort_values(['Count']).reset_index(drop=True)\nprint (pd_df)\n\nplt.figure(figsize=(12,8))\n# plot barh chart with index as x values\nax = sns.barplot(pd_df.index, pd_df.Count)\nax.get_yaxis().set_major_formatter(plt.FuncFormatter(lambda x, loc: \"{:,}\".format(int(x))))\nax.set(xlabel=\"Dim\", ylabel='Count')\n# add proper Dim values as x labels\nax.set_xticklabels(pd_df.Dim)\nfor item in ax.get_xticklabels(): item.set_rotation(90)\nfor i, v in enumerate(pd_df[\"Count\"].iteritems()):        \n    ax.text(i ,v[1], \"{:,}\".format(v[1]), color='m', va ='bottom', rotation=45)\nplt.tight_layout()\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/S9wAO.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/S9wAO.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 13897, "user_id": 1713660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5aa62fae5a22b542d2a188b95384aee?s=128&d=identicon&r=PG", "display_name": "vladkras", "link": "https://stackoverflow.com/users/1713660/vladkras"}, "edited": false, "score": 2, "creation_date": 1550248324, "post_id": 53646789, "comment_id": 96212576, "body": "but is it possible to sort by estimated value: <code>sns.barplot(x=&#39;Id&#39;, y=&quot;Speed&quot;, data=df, estimator=np.mean, order=?)</code>"}, {"owner": {"reputation": 1730, "user_id": 674301, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/97e523edc8aabe111dba9f2a8e9e2da6?s=128&d=identicon&r=PG", "display_name": "Jeremy", "link": "https://stackoverflow.com/users/674301/jeremy"}, "edited": false, "score": 0, "creation_date": 1591201654, "post_id": 53646789, "comment_id": 109968173, "body": "There is likely a better way, but this works:    <code>grp_order = df.groupby(&#39;Id&#39;).Speed.agg(&#39;mean&#39;).sort_values().index</code> and then <code>sns.barplot(x=&#39;Id&#39;, y=&quot;Speed&quot;, data=df, estimator=np.mean, order=grp_order)</code>"}, {"owner": {"reputation": 2375, "user_id": 2745116, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/d6e52cda3e0dccbd57c3020a3e6cecfa?s=128&d=identicon&r=PG&f=1", "display_name": "CGFoX", "link": "https://stackoverflow.com/users/2745116/cgfox"}, "edited": false, "score": 0, "creation_date": 1605802831, "post_id": 53646789, "comment_id": 114769722, "body": "I can&#39;t get this to work and the link doesn&#39;t show anything related to your solution. What is <code>result</code> supposed to be or return? A dict returning an int? That gives me an error"}], "tags": [], "owner": {"reputation": 5678, "user_id": 2487549, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/874b378607eb21bc868bdadb8847560f?s=128&d=identicon&r=PG", "display_name": "Foreever", "link": "https://stackoverflow.com/users/2487549/foreever"}, "is_accepted": false, "score": 35, "last_activity_date": 1544082496, "creation_date": 1544082496, "answer_id": 53646789, "question_id": 43770507, "link": "https://stackoverflow.com/questions/43770507/seaborn-bar-plot-ordering/53646789#53646789", "title": "Seaborn Bar Plot Ordering", "body": "<p>you can use the order parameter for this. </p>\n\n<pre><code>sns.barplot(x='Id', y=\"Speed\", data=df, order=result['Id'])\n</code></pre>\n\n<p>Credits to Wayne. </p>\n\n<p>See the rest of his <a href=\"https://gist.github.com/fomightez/bb5a9c727d93d1508187677b4d74d7c1\" rel=\"noreferrer\">code</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 158, "user_id": 8044221, "user_type": "registered", "profile_image": "https://graph.facebook.com/1889023494719541/picture?type=large", "display_name": "Veera Srikanth", "link": "https://stackoverflow.com/users/8044221/veera-srikanth"}, "is_accepted": false, "score": 5, "last_activity_date": 1618754320, "last_edit_date": 1618754320, "creation_date": 1586013917, "answer_id": 61030372, "question_id": 43770507, "link": "https://stackoverflow.com/questions/43770507/seaborn-bar-plot-ordering/61030372#61030372", "title": "Seaborn Bar Plot Ordering", "body": "<p>Prepare the data frame such that it is ordered by the column that you want.</p>\n<p>Now pass that as a parameter to function.</p>\n<pre><code>import pandas as pd\nimport seaborn as sns\n\ndicti=({'37': 99943,'25': 47228,'36': 16933,'40': 14996,'35': 11791,'34': 8030,'24': 6319 ,'2': 5055 ,'39': 4758 ,'38' :4611})\npd_df = pd.DataFrame(list(dicti.items()))\npd_df.columns =[&quot;Dim&quot;, &quot;Count&quot;]\n\n# Here the dataframe is already sorted if not use the below line\n# pd_df = pd_df.sort_values('Count').reset_index()\n# or \n# pd_df = pd_df.sort_values('Count',ascending=False).reset_index()\n\nsns.barplot(x='Dim', y='Count', data=pd_df, order=pd_df['Dim'])`\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/cDenU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cDenU.png\" alt=\"enter image description here\" /></a></p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 13014469, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-To-_3o0fwII/AAAAAAAAAAI/AAAAAAAAAAA/AKF05nCUJr02sS29dQmgyr4yK2AhpM2Sug/photo.jpg?sz=128", "display_name": "Vojtech Stas", "link": "https://stackoverflow.com/users/13014469/vojtech-stas"}, "is_accepted": false, "score": 1, "last_activity_date": 1614198892, "last_edit_date": 1614198892, "creation_date": 1614189373, "answer_id": 66356299, "question_id": 43770507, "link": "https://stackoverflow.com/questions/43770507/seaborn-bar-plot-ordering/66356299#66356299", "title": "Seaborn Bar Plot Ordering", "body": "<p>To make a specific order, I reccomend to create a list and then order by it:</p>\n<pre><code>order_list = ['first','second','third']\n\nsns.barplot(x = df['x'], y = df['y'],order=order_list )\n</code></pre>\n"}], "owner": {"reputation": 810, "user_id": 5960199, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/670840dc7b3f96c94a1009baca779111?s=128&d=identicon&r=PG", "display_name": "Tronald Dump", "link": "https://stackoverflow.com/users/5960199/tronald-dump"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67479, "favorite_count": 11, "accepted_answer_id": 43770963, "answer_count": 4, "score": 26, "last_activity_date": 1618754320, "creation_date": 1493847915, "last_edit_date": 1498829906, "question_id": 43770507, "link": "https://stackoverflow.com/questions/43770507/seaborn-bar-plot-ordering", "title": "Seaborn Bar Plot Ordering", "body": "<p>I have a pandas dataframe that has two columns. </p>\n\n<p>I need the plot ordered by the \"Count\" Column.</p>\n\n<pre><code>dicti=({'37':99943,'25':47228,'36':16933,'40':14996,'35':11791,'34':8030,'24' : 6319 ,'2'  :5055 ,'39' :4758 ,'38' :4611  })\npd_df = pd.DataFrame(list(dicti.iteritems()))\npd_df.columns =[\"Dim\",\"Count\"]\nplt.figure(figsize=(12,8))\nax = sns.barplot(x=\"Dim\", y= \"Count\",data=pd_df )\nax.get_yaxis().set_major_formatter(plt.FuncFormatter(lambda x, loc: \"\n{:,}\".format(int(x))))\nax.set(xlabel=\"Dim\", ylabel='Count')\nfor item in ax.get_xticklabels():\n    item.set_rotation(90)\nfor i, v in enumerate(pd_df[\"Count\"].iteritems()):        \n    ax.text(i ,v[1], \"{:,}\".format(v[1]), color='m', va ='bottom', \n    rotation=45)\nplt.tight_layout()\n</code></pre>\n\n<p>Right now the plot is getting ordered by the \"Dim\" column, I need it ordered by the \"Count\" column,How can I do this?<a href=\"https://i.stack.imgur.com/30pqv.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/30pqv.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "quantlib", "quantlib-swig"], "comments": [{"owner": {"reputation": 7039, "user_id": 2251840, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O3LmV.png?s=128&g=1", "display_name": "SmallChess", "link": "https://stackoverflow.com/users/2251840/smallchess"}, "edited": false, "score": 0, "creation_date": 1493872674, "post_id": 43770483, "comment_id": 74588884, "body": "gcc doesn&#39;t compile C++... g++ does..."}, {"owner": {"reputation": 3167, "user_id": 3123992, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ca672660899533ec8102cdea4dc84556?s=128&d=identicon&r=PG&f=1", "display_name": "WillZ", "link": "https://stackoverflow.com/users/3123992/willz"}, "reply_to_user": {"reputation": 7039, "user_id": 2251840, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/O3LmV.png?s=128&g=1", "display_name": "SmallChess", "link": "https://stackoverflow.com/users/2251840/smallchess"}, "edited": false, "score": 0, "creation_date": 1493929739, "post_id": 43770483, "comment_id": 74625216, "body": "this is not related to g++."}], "answers": [{"comments": [{"owner": {"reputation": 3543, "user_id": 356579, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97d48f903085f5d2283cc63a80cfa825?s=128&d=identicon&r=PG", "display_name": "Luigi Ballabio", "link": "https://stackoverflow.com/users/356579/luigi-ballabio"}, "edited": false, "score": 0, "creation_date": 1494712808, "post_id": 43792270, "comment_id": 74947721, "body": "Hmm, no, it&#39;s not required.  <code>quantlib_wrap.cpp</code> is included in the release (you can download it again and check).  If you&#39;re cloning the code from GitHub, then yes, you&#39;ll need SWIG.  What might have happened is that a <code>make clean</code> also deleted the wrappers. We might have to add something about that in the instructions.  Anyway, glad it worked in the end."}], "tags": [], "owner": {"reputation": 3167, "user_id": 3123992, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ca672660899533ec8102cdea4dc84556?s=128&d=identicon&r=PG&f=1", "display_name": "WillZ", "link": "https://stackoverflow.com/users/3123992/willz"}, "is_accepted": false, "score": 0, "last_activity_date": 1493929856, "creation_date": 1493929856, "answer_id": 43792270, "question_id": 43770483, "link": "https://stackoverflow.com/questions/43770483/quantlib-swig-for-python-error-missing-quantlib-quantlib-wrap-cpp-on-macos-sier/43792270#43792270", "title": "Quantlib-SWIG for Python error, missing Quantlib/quantlib_wrap.cpp on MacOS Sierra", "body": "<p>Figured out why this was happening. Grepped the Makefile. If fact it was looking for SWIG. So a <code>brew install swig</code> resolved this issue. </p>\n\n<p>Even though the official installation webpage said <code>swig</code> was not required, it was required in the end.</p>\n"}], "owner": {"reputation": 3167, "user_id": 3123992, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ca672660899533ec8102cdea4dc84556?s=128&d=identicon&r=PG&f=1", "display_name": "WillZ", "link": "https://stackoverflow.com/users/3123992/willz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493929856, "creation_date": 1493847815, "question_id": 43770483, "link": "https://stackoverflow.com/questions/43770483/quantlib-swig-for-python-error-missing-quantlib-quantlib-wrap-cpp-on-macos-sier", "title": "Quantlib-SWIG for Python error, missing Quantlib/quantlib_wrap.cpp on MacOS Sierra", "body": "<p>I downloaded Qauntlib-SWIG v1.9 from Sourceforge, also tried github <code>master</code> branch, followed instructions on the <a href=\"http://quantlib.org/install/macosx-python.shtml\" rel=\"nofollow noreferrer\">official page</a>, but in both cases I'm left with the following error message. </p>\n\n<p>I'm running <code>MacOS Sierra</code> / <code>Python 3.6</code> / <code>boost</code> version 1.64.0_1, <code>gcc</code> version below. I installed <code>quantlib</code> v1.9.2 with <code>Homebrew</code>. </p>\n\n<pre><code>$ gcc -v\nConfigured with: --prefix=/Applications/Xcode.app/Contents/Developer/usr --with-gxx-include-dir=/usr/include/c++/4.2.1\nApple LLVM version 8.1.0 (clang-802.0.42)\nTarget: x86_64-apple-darwin16.5.0\nThread model: posix\nInstalledDir: /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin\n</code></pre>\n\n<p>I suspect the error is caused by the first statement below: <code>python -c++ ...</code> It doesn't seem to be a valid flag for python, which gave the error message (tried <code>python -c++</code> in command prompt, got the same error).</p>\n\n<p>Any idea how / where this flag came from? Thank you.</p>\n\n<p>Error message:</p>\n\n<pre><code>(py36) me:QuantLib-SWIG $ make -C Python\npython -c++ -modern -outdir QuantLib \\\n            -o QuantLib/quantlib_wrap.cpp ../SWIG/quantlib.i\n  File \"&lt;string&gt;\", line 1\n    ++\n     ^\nSyntaxError: invalid syntax\nmake: [QuantLib/quantlib_wrap.cpp] Error 1 (ignored)\npython -c++ -modern -outdir QuantLib \\\n            -o QuantLib/quantlib_wrap.cpp ../SWIG/quantlib.i\n  File \"&lt;string&gt;\", line 1\n    ++\n     ^\nSyntaxError: invalid syntax\nmake: [QuantLib/QuantLib.py] Error 1 (ignored)\n/Applications/Xcode.app/Contents/Developer/usr/bin/make  all-am\npython -c++ -modern -outdir QuantLib \\\n            -o QuantLib/quantlib_wrap.cpp ../SWIG/quantlib.i\n  File \"&lt;string&gt;\", line 1\n    ++\n     ^\nSyntaxError: invalid syntax\nmake[1]: [QuantLib/quantlib_wrap.cpp] Error 1 (ignored)\npython -c++ -modern -outdir QuantLib \\\n            -o QuantLib/quantlib_wrap.cpp ../SWIG/quantlib.i\n  File \"&lt;string&gt;\", line 1\n    ++\n     ^\nSyntaxError: invalid syntax\nmake[1]: [QuantLib/QuantLib.py] Error 1 (ignored)\nCXXFLAGS=\"-O2 -stdlib=libstdc++ -mmacosx-version-min=10.6 -fno-strict-aliasing -Wno-unused -Wno-uninitialized -Wno-sign-compare -Wno-write-strings\" CC=\"gcc\" CXX=\"g++\" /Users/me/anaconda/envs/py36/bin/python setup.py build\nrunning build\nrunning build_py\nfile QuantLib/QuantLib.py (for module QuantLib.QuantLib) not found\nfile QuantLib/QuantLib.py (for module QuantLib.QuantLib) not found\nrunning build_ext\nbuilding 'QuantLib._QuantLib' extension\ngcc -Wno-unused-result -Wsign-compare -Wunreachable-code -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -I/Users/me/anaconda/envs/py36/include -arch x86_64 -I/Users/me/anaconda/envs/py36/include -arch x86_64 -I/Users/me/anaconda/envs/py36/include/python3.6m -I/usr/local/Cellar/quantlib/1.9.2/include -c QuantLib/quantlib_wrap.cpp -o build/temp.macosx-10.7-x86_64-3.6/QuantLib/quantlib_wrap.o -Wno-unused -O2 -stdlib=libstdc++ -mmacosx-version-min=10.6 -fno-strict-aliasing -Wno-unused -Wno-uninitialized -Wno-sign-compare -Wno-write-strings\nclang: error: no such file or directory: 'QuantLib/quantlib_wrap.cpp'\nclang: error: no input files\nerror: command 'gcc' failed with exit status 1\nmake[1]: *** [.build-stamp] Error 1\nmake: *** [all] Error 2\n(py36) me:QuantLib-SWIG $ \n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy"], "answers": [{"tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 7, "last_activity_date": 1493847690, "creation_date": 1493847690, "answer_id": 43770456, "question_id": 43770401, "link": "https://stackoverflow.com/questions/43770401/subtract-pandas-columns-from-a-specified-column/43770456#43770456", "title": "Subtract pandas columns from a specified column", "body": "<pre><code>In [226]: df[['A','B','C']] = df.deposit.values[:, None] - df[['A','B','C']]\n\nIn [227]: df\nOut[227]:\n         date  deposit   A   B   C\n0  2017-01-15       12   7   2   0\n1  2017-01-16       20  10  16 -12\n2  2017-01-17        5 -45  -5 -13\n3  2017-01-18       22   7   2  10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2508, "user_id": 1045479, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5dfb7eeb76f5473d05f396f436205e44?s=128&d=identicon&r=PG", "display_name": "alex314159", "link": "https://stackoverflow.com/users/1045479/alex314159"}, "is_accepted": false, "score": 1, "last_activity_date": 1493848010, "creation_date": 1493848010, "answer_id": 43770532, "question_id": 43770401, "link": "https://stackoverflow.com/questions/43770401/subtract-pandas-columns-from-a-specified-column/43770532#43770532", "title": "Subtract pandas columns from a specified column", "body": "<pre><code>for c in ['A','B','C']:\n    df[c]=df['deposit']-df[c]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 3, "last_activity_date": 1493848573, "last_edit_date": 1493848573, "creation_date": 1493848250, "answer_id": 43770592, "question_id": 43770401, "link": "https://stackoverflow.com/questions/43770401/subtract-pandas-columns-from-a-specified-column/43770592#43770592", "title": "Subtract pandas columns from a specified column", "body": "<p><strong><em><code>loc</code> + <code>rsub</code></em></strong>  </p>\n\n<pre><code>cols = ['A', 'B', 'C']\ndf.loc[:, cols] = df[cols].rsub(df.deposit, 0)\ndf\n\n\n         date  deposit   A   B   C\n0  2017-01-15       12   7   2   0\n1  2017-01-16       20  10  16 -12\n2  2017-01-17        5 -45  -5 -13\n3  2017-01-18       22   7   2  10\n</code></pre>\n\n<p><strong><em><code>inplace</code></em></strong><br>\n<em>My preference for doing it <code>inplace</code></em>  </p>\n\n<pre><code>df.update(df[['A', 'B', 'C']].rsub(df.deposit, 0))\n\ndf\n\n         date  deposit   A   B   C\n0  2017-01-15       12   7   2   0\n1  2017-01-16       20  10  16 -12\n2  2017-01-17        5 -45  -5 -13\n3  2017-01-18       22   7   2  10\n</code></pre>\n\n<p><strong><em><code>copy</code></em></strong><br>\n<em>My preference overall</em>  </p>\n\n<pre><code>df.assign(**df[['A', 'B', 'C']].rsub(df.deposit, 0).to_dict('list'))\n\n         date  deposit   A   B   C\n0  2017-01-15       12   7   2   0\n1  2017-01-16       20  10  16 -12\n2  2017-01-17        5 -45  -5 -13\n3  2017-01-18       22   7   2  10\n</code></pre>\n"}], "owner": {"reputation": 3364, "user_id": 6532319, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/640a51d80a7e24b0510d9e096e15ac6e?s=128&d=identicon&r=PG&f=1", "display_name": "DougKruger", "link": "https://stackoverflow.com/users/6532319/dougkruger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3333, "favorite_count": 0, "accepted_answer_id": 43770456, "answer_count": 3, "score": 4, "last_activity_date": 1551398702, "creation_date": 1493847445, "last_edit_date": 1551398702, "question_id": 43770401, "link": "https://stackoverflow.com/questions/43770401/subtract-pandas-columns-from-a-specified-column", "title": "Subtract pandas columns from a specified column", "body": "<p>How can I dynamically subtract values in multiple pandas dataframe columns from a specified column. In this case, how can I subtract columns A, B, and C from deposit and place the value in the corresponding A, B, and C columns.</p>\n\n<pre><code>   date         deposit       A                 B           C\n0  2017-01-15   12            5                 10          12\n1  2017-01-16   20            10                4           32\n2  2017-01-17   5             50                10          18\n3  2017-01-18   22            15                20          12\n</code></pre>\n\n<p>should produce:</p>\n\n<pre><code>   date         deposit       A                 B           C\n0  2017-01-15   12            7                 2           0\n1  2017-01-16   20            10                16         -12\n2  2017-01-17   5            -45               -5          -13\n3  2017-01-18   22            7                 2           10\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1493847436, "post_id": 43770367, "comment_id": 74582240, "body": "What&#39;s wrong with the <code>hex</code> built-in function?"}, {"owner": {"reputation": 2997, "user_id": 2285202, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bccd329fe99ef1b3d24a3eb82523e045?s=128&d=identicon&r=PG", "display_name": "Anton Glukhov", "link": "https://stackoverflow.com/users/2285202/anton-glukhov"}, "edited": false, "score": 0, "creation_date": 1493847471, "post_id": 43770367, "comment_id": 74582259, "body": "Unicode function has additional &#39;encoding&#39; parameter. Try this"}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1493847553, "post_id": 43770367, "comment_id": 74582297, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12214801/print-a-string-as-hex-bytes\">Print a string as hex bytes?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4177, "user_id": 3806122, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/cKU37.png?s=128&g=1", "display_name": "Jerfov2", "link": "https://stackoverflow.com/users/3806122/jerfov2"}, "is_accepted": false, "score": 0, "last_activity_date": 1493847734, "creation_date": 1493847734, "answer_id": 43770472, "question_id": 43770367, "link": "https://stackoverflow.com/questions/43770367/printing-unicode-hex-values-for-strings/43770472#43770472", "title": "printing unicode hex values for strings", "body": "<p>Try this:</p>\n\n<pre><code>character = ...\n\nuni_string = hex(ord(character))[2:].zfill(4) \n</code></pre>\n\n<p>This gets the unicode number, converts to hex, lops off first two characters, then pads the string with zeros up to length 4 </p>\n"}, {"tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": true, "score": 1, "last_activity_date": 1493848123, "creation_date": 1493848123, "answer_id": 43770558, "question_id": 43770367, "link": "https://stackoverflow.com/questions/43770367/printing-unicode-hex-values-for-strings/43770558#43770558", "title": "printing unicode hex values for strings", "body": "<p>Use string formatting:</p>\n\n<pre><code>&gt;&gt;&gt; string = 'test'\n&gt;&gt;&gt; ''.join([\"{:04x}\".format(ord(c)) for c in string])\n'0074006500730074'\n&gt;&gt;&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3881466, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100006554730964/picture?type=large", "display_name": "Omair Omair", "link": "https://stackoverflow.com/users/3881466/omair-omair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 43770558, "answer_count": 2, "score": -1, "last_activity_date": 1493848123, "creation_date": 1493847256, "last_edit_date": 1493847453, "question_id": 43770367, "link": "https://stackoverflow.com/questions/43770367/printing-unicode-hex-values-for-strings", "title": "printing unicode hex values for strings", "body": "<p>I am trying to print unicode characters for strings.\nFor example, '{' should print as '007B' (with the leading zeroes)</p>\n\n<p>All I can do at the moment is this:</p>\n\n<pre><code>binascii.hexlify(unicode(\"{\")) \n'7b'\n</code></pre>\n\n<p>I want to be able to give it a string like \"test\" and it should print \"0074006500730074\"</p>\n"}, {"tags": ["python", "pandas", "matrix"], "answers": [{"tags": [], "owner": {"reputation": 743, "user_id": 1965736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8c672cbc98529109ba7f6187beb6541?s=128&d=identicon&r=PG", "display_name": "philngo", "link": "https://stackoverflow.com/users/1965736/philngo"}, "is_accepted": true, "score": 1, "last_activity_date": 1493847528, "creation_date": 1493847528, "answer_id": 43770423, "question_id": 43770295, "link": "https://stackoverflow.com/questions/43770295/pandas-populate-off-diagonals-of-matrix/43770423#43770423", "title": "Pandas: populate off diagonals of matrix", "body": "<p>You could use <code>np.eye(n)</code>:</p>\n\n<p><code>pd.DataFrame(np.eye(5) * np.array([1, 2, 3, 4, 5]))</code></p>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 0, "last_activity_date": 1493847932, "last_edit_date": 1493847932, "creation_date": 1493847617, "answer_id": 43770443, "question_id": 43770295, "link": "https://stackoverflow.com/questions/43770295/pandas-populate-off-diagonals-of-matrix/43770443#43770443", "title": "Pandas: populate off diagonals of matrix", "body": "<p>Consider the dataframe <code>df</code></p>\n\n<pre><code>df = pd.DataFrame(np.random.randint(10, size=[5, 5]), list('ABCDE'), list('VWXYZ'))\nprint(df)\n\n   V  W  X  Y  Z\nA  4  6  7  5  4\nB  9  7  3  3  0\nC  1  9  7  8  2\nD  1  9  7  9  9\nE  6  6  6  6  1\n</code></pre>\n\n<p><strong><em><code>np.eye</code></em></strong>  </p>\n\n<pre><code>df.mul(np.eye(len(df), dtype=int))\n\n   V  W  X  Y  Z\nA  4  0  0  0  0\nB  0  7  0  0  0\nC  0  0  7  0  0\nD  0  0  0  9  0\nE  0  0  0  0  1\n</code></pre>\n\n<p><strong><em>reconstruct</em></strong><br>\n<em>filling in the diagonals</em>  </p>\n\n<pre><code>z = np.zeros_like(df)\nr = np.arange(len(df))\nz[r, r] = df.values[r, r]\n\npd.DataFrame(z, df.index, df.columns)\n\n   V  W  X  Y  Z\nA  4  0  0  0  0\nB  0  7  0  0  0\nC  0  0  7  0  0\nD  0  0  0  9  0\nE  0  0  0  0  1\n</code></pre>\n\n<p><strong><em><code>np.triu_indices</code></em></strong><br>\n<em>fill in off diagonals</em>  </p>\n\n<pre><code>i, j = np.triu_indices(len(df), 1)\n\ndf.values[i, j] = 0\ndf.values[j, i] = 0\n\ndf\n\n   V  W  X  Y  Z\nA  4  0  0  0  0\nB  0  7  0  0  0\nC  0  0  7  0  0\nD  0  0  0  9  0\nE  0  0  0  0  1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4505, "user_id": 3626961, "user_type": "registered", "accept_rate": 92, "profile_image": "https://graph.facebook.com/100001104558583/picture?type=large", "display_name": "titipata", "link": "https://stackoverflow.com/users/3626961/titipata"}, "is_accepted": false, "score": 0, "last_activity_date": 1493847862, "creation_date": 1493847862, "answer_id": 43770495, "question_id": 43770295, "link": "https://stackoverflow.com/questions/43770295/pandas-populate-off-diagonals-of-matrix/43770495#43770495", "title": "Pandas: populate off diagonals of matrix", "body": "<p>One way is to use <code>fill_diagonal</code> to fill new zeros matrix with diagonal from old matrix.</p>\n\n<pre><code>import numpy as np\n\nA = np.array([[1,2], [3,4]])\nA_d = np.zeros_like(A)\nnp.fill_diagonal(A_d, A.diagonal())\n\n# A_d\n# array([[1, 0],\n#        [0, 4]])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 357, "user_id": 6317524, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/60f5811af3a8639fe0a1f7fd4475d95d?s=128&d=identicon&r=PG&f=1", "display_name": "trob", "link": "https://stackoverflow.com/users/6317524/trob"}, "edited": false, "score": 0, "creation_date": 1493906351, "post_id": 43770568, "comment_id": 74610387, "body": "This is pretty clever."}], "tags": [], "owner": {"reputation": 678, "user_id": 7887265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/447565696c6376764ef04e96fac7f0af?s=128&d=identicon&r=PG&f=1", "display_name": "lsalamon", "link": "https://stackoverflow.com/users/7887265/lsalamon"}, "is_accepted": false, "score": 1, "last_activity_date": 1493848159, "creation_date": 1493848159, "answer_id": 43770568, "question_id": 43770295, "link": "https://stackoverflow.com/questions/43770295/pandas-populate-off-diagonals-of-matrix/43770568#43770568", "title": "Pandas: populate off diagonals of matrix", "body": "<p>np.diag should be sufficient:</p>\n\n<pre><code>df = pd.DataFrame(np.random.randint(7, size=[6, 6]))\nnp.diag(np.diag(df))\n\narray([[5, 0, 0, 0, 0, 0],\n       [0, 0, 0, 0, 0, 0],\n       [0, 0, 0, 0, 0, 0],\n       [0, 0, 0, 1, 0, 0],\n       [0, 0, 0, 0, 3, 0],\n       [0, 0, 0, 0, 0, 3]])\n</code></pre>\n"}], "owner": {"reputation": 357, "user_id": 6317524, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/60f5811af3a8639fe0a1f7fd4475d95d?s=128&d=identicon&r=PG&f=1", "display_name": "trob", "link": "https://stackoverflow.com/users/6317524/trob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 476, "favorite_count": 0, "accepted_answer_id": 43770423, "answer_count": 4, "score": -2, "last_activity_date": 1493848159, "creation_date": 1493846840, "question_id": 43770295, "link": "https://stackoverflow.com/questions/43770295/pandas-populate-off-diagonals-of-matrix", "title": "Pandas: populate off diagonals of matrix", "body": "<p>Suppose I have an NxN matrix (df).  I would like to populate all but the diagonals of df with 0s.  Is there a straightforward way to do this?</p>\n"}, {"tags": ["python", "django", "django-class-based-views"], "comments": [{"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 1, "creation_date": 1493847378, "post_id": 43770284, "comment_id": 74582214, "body": "I would comment out <code>permanent = True</code> until you are sure that the redirects are working. You don&#39;t want your browser to store incorrect redirects."}, {"owner": {"reputation": 65, "user_id": 6179733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/affbe694df9756f5a21f7f8dd20e21b7?s=128&d=identicon&r=PG", "display_name": "Eliseu Egewarth", "link": "https://stackoverflow.com/users/6179733/eliseu-egewarth"}, "reply_to_user": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "edited": false, "score": 0, "creation_date": 1493848867, "post_id": 43770284, "comment_id": 74582816, "body": "@Alasdair, I change the value to False whenever I test."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 6179733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/affbe694df9756f5a21f7f8dd20e21b7?s=128&d=identicon&r=PG", "display_name": "Eliseu Egewarth", "link": "https://stackoverflow.com/users/6179733/eliseu-egewarth"}, "edited": false, "score": 0, "creation_date": 1493849816, "post_id": 43770347, "comment_id": 74583179, "body": "your last solution satisfy my needs ( using <code>get_redirect_url</code>). I just had to change <code>request.GET.get</code> to <code>self.request.get.get</code> and it worked perfectly."}, {"owner": {"reputation": 65, "user_id": 6179733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/affbe694df9756f5a21f7f8dd20e21b7?s=128&d=identicon&r=PG", "display_name": "Eliseu Egewarth", "link": "https://stackoverflow.com/users/6179733/eliseu-egewarth"}, "edited": false, "score": 0, "creation_date": 1493849941, "post_id": 43770347, "comment_id": 74583233, "body": "Please correct this so I can accept your response, please."}, {"owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "reply_to_user": {"reputation": 65, "user_id": 6179733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/affbe694df9756f5a21f7f8dd20e21b7?s=128&d=identicon&r=PG", "display_name": "Eliseu Egewarth", "link": "https://stackoverflow.com/users/6179733/eliseu-egewarth"}, "edited": false, "score": 1, "creation_date": 1493852962, "post_id": 43770347, "comment_id": 74584146, "body": "Good spot, fixed :)"}], "tags": [], "owner": {"reputation": 250720, "user_id": 113962, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b80ae1d65878cf68a4b1a00848467527?s=128&d=identicon&r=PG", "display_name": "Alasdair", "link": "https://stackoverflow.com/users/113962/alasdair"}, "is_accepted": true, "score": 1, "last_activity_date": 1493852878, "last_edit_date": 1493852878, "creation_date": 1493847140, "answer_id": 43770347, "question_id": 43770284, "link": "https://stackoverflow.com/questions/43770284/how-can-i-edit-the-kwargs-of-a-redirectview/43770347#43770347", "title": "How can I edit the kwargs of a RedirectView?", "body": "<p>You include <code>self</code> in the method signature, but not when you call the method.</p>\n\n<p>If you want to add <code>pk</code> to the existing kwargs, then you should do:</p>\n\n<pre><code>def get(self, request, *args, **kwargs):\n    kwargs['pk'] = request.GET.get('cod_parlamentar', '')\n    return super(LegacyParlamentarDetailRedirectView, self).get(request, *args, **kwargs)\n</code></pre>\n\n<p>If you want to ignore existing kwargs then you should change it to:</p>\n\n<pre><code>def get(self, request, *args, **kwargs):\n    kwargs = {'pk': request.GET.get('cod_parlamentar', '')}\n    return super(LegacyParlamentarDetailRedirectView, self).get(request, *args, **kwargs)\n</code></pre>\n\n<p>Note that you'll need to handle errors when <code>cod_parlamentar</code> is missing from the GET params.</p>\n\n<p>From the code you have shown, I think it would be clearer if you overrode <code>get_redirect_url</code> instead:</p>\n\n<pre><code>from django.urls import reverse\n# from django.core.urlresolvers import reverse # Django 1.9 and earlier\n\nclass LegacyParlamentarDetailRedirectView(RedirectView):\n    permanent = True\n\n    def get_redirect_url(self):\n        return reverse('parlamentar_detail', kwargs={'pk': self.request.GET.get('cod_parlamentar', ''})\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 6179733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/affbe694df9756f5a21f7f8dd20e21b7?s=128&d=identicon&r=PG", "display_name": "Eliseu Egewarth", "link": "https://stackoverflow.com/users/6179733/eliseu-egewarth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 0, "accepted_answer_id": 43770347, "answer_count": 1, "score": 1, "last_activity_date": 1493852878, "creation_date": 1493846773, "question_id": 43770284, "link": "https://stackoverflow.com/questions/43770284/how-can-i-edit-the-kwargs-of-a-redirectview", "title": "How can I edit the kwargs of a RedirectView?", "body": "<p>I have a project that needs to redirect legacy urls to the new urls (I need to keep them for a while)...\nI'm using the RedirectView class to do this, but I have to set up the url hard-coded.</p>\n\n<p>My code is like this:</p>\n\n<pre><code>class LegacyParlamentarDetailRedirectView(RedirectView):\n    permanent = True\n    url = '/parlamentar/%s'\n    def get(self, request, *args, **kwargs):\n        pk = request.GET.get('cod_parlamentar', '')\n        self.url = self.url % (pk)\n\n        return super(LegacyParlamentarDetailRedirectView, self).get(self, request, *args, **kwargs)\n</code></pre>\n\n<p>What I want to do is to use the pattern_name attribute so I do not have to write the url, but I need to add the variable pk to the kwargs list (something like this):</p>\n\n<pre><code>class LegacyParlamentarDetailRedirectView(RedirectView):\n    permanent = True\n    pattern_name = 'parlamentar_detail'\n    def get(self, request, *args, **kwargs):\n        kwargs['pk'] = request.GET.get('cod_parlamentar', '')\n\n        return super(LegacyParlamentarDetailRedirectView, self).get(self, request, *args, )\n</code></pre>\n\n<p>can anyone help me?</p>\n"}, {"tags": ["python", "c++", "boost", "variadic-functions", "function-composition"], "owner": {"reputation": 777, "user_id": 5697437, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/838f55e32bef215fa7dccda904737856?s=128&d=identicon&r=PG&f=1", "display_name": "Katie", "link": "https://stackoverflow.com/users/5697437/katie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1493846873, "creation_date": 1493846455, "last_edit_date": 1493846873, "question_id": 43770219, "link": "https://stackoverflow.com/questions/43770219/using-python-interpreter-to-instantiate-c-objects-within-c-application", "title": "Using Python interpreter to instantiate C++ objects within C++ application", "body": "<p>I've implemented several classes in C++ (e.g. <code>GetRadius</code>, <code>GetHeight</code>, <code>Multiply</code>, <code>Add</code> below). I'd like to embed the Python interpreter inside a C++ application so that I can write a Python script (<code>config.py</code> below) to instantiate these objects, as follows:</p>\n\n<pre><code>#!/usr/bin/env python\n# config.py\nfrom my_cpp_classes import *\n\ninstantiate_in_cpp = []\n\n# Area of cylinder\ncircle = Multiply(GetRadius(), GetRadius()), 3.14)\nside = Multiply(Multiply(2, GetRadius()), GetHeight())  # function composition\narea = Add(circle, circle, side)                        # variadic\n\n# Volume of cylinder\nvolume = Multiply(end, GetHeight())\n\ninstantiate_in_cpp.append(area)\ninstantiate_in_cpp.append(volume)\n</code></pre>\n\n<p>In some sense I'm using Python as a markup language for configuring a C++ application.</p>\n\n<p>What's the recommended way to do this without Boost? (I see that <a href=\"http://www.boost.org/doc/libs/1_64_0/libs/python/doc/html/tutorial/tutorial/embedding.html#tutorial.embedding.using_the_interpreter\" rel=\"nofollow noreferrer\">Boost.Python</a> provides a means to embed the interpreter and expose the C++ objects to a Python program.) Would I run into any issues trying to expose the function compositions or variadic functions?</p>\n"}, {"tags": ["python", "python-3.x", "lxml"], "answers": [{"tags": [], "owner": {"reputation": 5170, "user_id": 9200529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LgIT2.jpg?s=128&g=1", "display_name": "Nathan V\u0113rzemnieks", "link": "https://stackoverflow.com/users/9200529/nathan-v%c4%93rzemnieks"}, "is_accepted": false, "score": 2, "last_activity_date": 1516327754, "creation_date": 1516327754, "answer_id": 48333161, "question_id": 43770156, "link": "https://stackoverflow.com/questions/43770156/getting-original-string-with-lxml-tostring/48333161#48333161", "title": "Getting original string with lxml tostring()", "body": "<p>How about this:</p>\n\n<pre><code>In [31]: elem = etree.fromstring(\"&lt;tag&gt;\u2744&lt;/tag&gt;\")\n\nIn [32]: etree.tostring(elem, encoding=str)\nOut[32]: '&lt;tag&gt;\u2744&lt;/tag&gt;'\n</code></pre>\n"}], "owner": {"reputation": 3542, "user_id": 1093674, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d67b951d3ef8e9d79b4c62e3a3c52b4e?s=128&d=identicon&r=PG", "display_name": "Cristhian Boujon", "link": "https://stackoverflow.com/users/1093674/cristhian-boujon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1051, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1516327754, "creation_date": 1493846199, "question_id": 43770156, "link": "https://stackoverflow.com/questions/43770156/getting-original-string-with-lxml-tostring", "title": "Getting original string with lxml tostring()", "body": "<p>I'm using lxml and I'm trying to get the original xml string so: </p>\n\n<pre><code>&gt;&gt;&gt; elem = etree.fromstring(\"&lt;tag&gt;\u00e1\u00e9\u00ed\u00f3\u00fa\u00f1\u00fc&lt;/tag&gt;\")\n&gt;&gt;&gt; etree.tostring(elem)\nb'&lt;tag&gt;&amp;#225;&amp;#233;&amp;#237;&amp;#243;&amp;#250;&amp;#241;&amp;#252;&lt;/tag&gt;'\n</code></pre>\n\n<p>The only way that I found to get the original string is doing:</p>\n\n<pre><code>&gt;&gt;&gt; etree.tostring(elem, encoding = \"utf-8\").decode(\"utf-8\")\n'&lt;tag&gt;\u00e1\u00e9\u00ed\u00f3\u00fa\u00f1\u00fc&lt;/tag&gt;'\n</code></pre>\n\n<p>Is there a better aproach?</p>\n"}, {"tags": ["python", "django", "for-loop", "nested"], "answers": [{"tags": [], "owner": {"reputation": 434, "user_id": 7959703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3yDhc.jpg?s=128&g=1", "display_name": "yusuf.oguntola", "link": "https://stackoverflow.com/users/7959703/yusuf-oguntola"}, "is_accepted": false, "score": 0, "last_activity_date": 1493847315, "creation_date": 1493847315, "answer_id": 43770381, "question_id": 43770138, "link": "https://stackoverflow.com/questions/43770138/querying-foreignkey-nested-for-loop-django/43770381#43770381", "title": "querying foreignkey nested for loop django", "body": "<ol>\n<li><p><code>items = Item.objects.filter(business_id = business_id)</code> is wrong.\nYou should rather say:</p>\n\n<p>items = Item.objects.filter(business__id = business_id) #Notice the double underscore.</p></li>\n</ol>\n\n<p>You may also rather get the business and simply say:</p>\n\n<pre><code>business.item_set.all() #This would retrieve all Item for the business.\n</code></pre>\n\n<ol start=\"2\">\n<li><p><code>select_related()</code> expects a fieldname as a paramter. So use a field name that exists on the Item model. Like:</p>\n\n<p><code>select_related('category')</code></p></li>\n<li><p>Where's the meal? May be you can proceed from there though.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 7234109, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c49f0d129bdd5a703bed2aebb3d7e35e?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Galloway", "link": "https://stackoverflow.com/users/7234109/kevin-galloway"}, "is_accepted": true, "score": 1, "last_activity_date": 1493919918, "creation_date": 1493919918, "answer_id": 43789561, "question_id": 43770138, "link": "https://stackoverflow.com/questions/43770138/querying-foreignkey-nested-for-loop-django/43789561#43789561", "title": "querying foreignkey nested for loop django", "body": "<p>To list the items by category, I used @yusuf.oguntola's idea and initially got the business with .get(), then I created a queryset to get all the items. My function in views.py included</p>\n\n<pre><code>business = Business.objects.get(id = business_id)\nitems = business.item_set.all().order_by('category')\n</code></pre>\n\n<p>note: the business_id was passed in url pattern</p>\n\n<p>However, the key change was in my template. I found this awesome built in functionality for templates in the django documents <a href=\"https://docs.djangoproject.com/en/1.11/ref/templates/builtins/#regroup\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>I implemented it in template like so...</p>\n\n<pre><code>{% regroup items by category as category_list %}\n\n  &lt;ul&gt;\n  {% for category in category_list %}\n     &lt;li&gt;{{ category.grouper }}\n     &lt;ul&gt;\n         {% for item in category.list %}\n             &lt;li&gt;{{ item.name }}&lt;br&gt; {{ item.short_description }}&lt;/li&gt;\n         {% endfor %}\n     &lt;/ul&gt;\n     &lt;/li&gt;\n  {% endfor %}\n  &lt;/ul&gt;\n</code></pre>\n\n<p>One of the most important parts is you have to have order_by() and put the parameter of the field you are ordering by - in my case, category. If this is not included, it will simply put the items listed in chronological order and will repeat your field instance.</p>\n"}], "owner": {"reputation": 101, "user_id": 7234109, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c49f0d129bdd5a703bed2aebb3d7e35e?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin Galloway", "link": "https://stackoverflow.com/users/7234109/kevin-galloway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1217, "favorite_count": 0, "accepted_answer_id": 43789561, "answer_count": 2, "score": 2, "last_activity_date": 1493919980, "creation_date": 1493846113, "last_edit_date": 1493919980, "question_id": 43770138, "link": "https://stackoverflow.com/questions/43770138/querying-foreignkey-nested-for-loop-django", "title": "querying foreignkey nested for loop django", "body": "<p>I am trying to return a list of categories for a business, and for each category I would like to list all the items related to the category.</p>\n\n<p>I was returning all of my items, not by category, but I have decided I want them sorted by category. This is what I have tried (among other attempts as well) I simply am having trouble getting the items into there categories. This is my latest attempt</p>\n\n<p>In my models.py I have</p>\n\n<pre><code>Business(models.Model):\n    name = models.CharField(max_length=100)\n    address = models.CharField(max_length=100)\n    logo = models.CharField(max_length=300)\n\nItemCategory(models.Model):\n    name = models.CharField(max_length=50)\n\nItem(models.Model):\n    name = models.CharField(max_length=100)\n    business = models.ForeignKey(Business)\n    category = models.ForeignKey(ItemCategory)\n    short_description = models.CharField(max_length=250)\n</code></pre>\n\n<p>in my views.py</p>\n\n<pre><code>def business_profile(request, business_id):\n    items = Item.objects.filter(business_id = business_id).select_related('itemcategory')\n\nreturn render(request, 'business_profile.html', {\"items\": items})\n</code></pre>\n\n<p>in my template I am trying</p>\n\n<pre><code>{% for itemcategory in items.itemcategory_set.all %}\n    {{ itemcategory.name }}\n        {% for item in itemcategory %}\n\n            {{ item.name }} &lt;br&gt;\n            {{ item.short_description }}\n\n        {% endfor %}\n\n{% endfor %}\n</code></pre>\n\n<p>From my research into other questions and reading the documents, i felt this would be right.. However from my results I can not get the correct output in my template.</p>\n\n<ol>\n<li>Would this be the correct practice? Or should I try getting the categories first with</li>\n</ol>\n\n<p><code>categories = ItemCategory.objects.filter(business = business_id)</code></p>\n\n<p>and then possibly add a select_related('item') to process all the items for the category?</p>\n\n<ol start=\"2\">\n<li>When I refer to data in the template but my model has 2 words (ItemCategory) - for instance when I move backward for a foreign key or use the model in select_related('') - would I use item_category or do you simply use itemcategory with no underscore?</li>\n</ol>\n\n<p>UPDATE: I answered below in comment with explanation.</p>\n"}, {"tags": ["python", "c++", "installation", "atom-editor", "enaml"], "answers": [{"tags": [], "owner": {"reputation": 14128, "user_id": 2362877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QmqIT.jpg?s=128&g=1", "display_name": "frmdstryr", "link": "https://stackoverflow.com/users/2362877/frmdstryr"}, "is_accepted": true, "score": 0, "last_activity_date": 1505674378, "creation_date": 1505674378, "answer_id": 46267728, "question_id": 43770130, "link": "https://stackoverflow.com/questions/43770130/installing-enaml-in-anaconda/46267728#46267728", "title": "Installing enaml in Anaconda", "body": "<p>Install the <a href=\"https://www.microsoft.com/en-us/download/details.aspx?id=44266\" rel=\"nofollow noreferrer\">Microsoft Visual C++ Compiler for Python 2.7</a> and run <code>pip install enaml</code> again. There's also a tutorial here <a href=\"https://www.youtube.com/watch?v=OMjiPRSWFdY&amp;t=2s\" rel=\"nofollow noreferrer\">Python GUI's with enaml</a> that shows how to get started from scratch.</p>\n"}, {"tags": [], "owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1509052635, "creation_date": 1509052635, "answer_id": 46963961, "question_id": 43770130, "link": "https://stackoverflow.com/questions/43770130/installing-enaml-in-anaconda/46963961#46963961", "title": "Installing enaml in Anaconda", "body": "<p><code>conda install enaml</code> is the more idiomatic way to install packages in anaconda than <code>pip install</code>, at least for packages it knows about. Enaml and Atom are among this list.</p>\n\n<p>This bypasses C++ compilation so it may not be what you want, but it is the easiest way to install Enaml. (I have a black thumb when it comes to building from source, so Anaconda works very well for me.)</p>\n"}], "owner": {"reputation": 126, "user_id": 7959882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f50dc87df7236c2255bf208e52c3ea5e?s=128&d=identicon&r=PG&f=1", "display_name": "Maugrim", "link": "https://stackoverflow.com/users/7959882/maugrim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 46267728, "answer_count": 2, "score": 2, "last_activity_date": 1509052635, "creation_date": 1493846073, "last_edit_date": 1592644375, "question_id": 43770130, "link": "https://stackoverflow.com/questions/43770130/installing-enaml-in-anaconda", "title": "Installing enaml in Anaconda", "body": "<p>I am trying to install enaml for the latest Anaconda distribution(4.3.1). The installation guide on <a href=\"http://nucleic.github.io/enaml/docs/get_started/installation.html\" rel=\"nofollow noreferrer\">http://nucleic.github.io/enaml/docs/get_started/installation.html</a> says:</p>\n<blockquote>\n<p>The sections below describe how to install Enaml and all of its dependencies from scratch, starting with the installation of a Python runtime. The instructions assume that the user\u2019s system has a C++ compiler and the Git command line tools installed and available on the system path.</p>\n<p>The Easy Way</p>\n<p>If installing and building Enaml and its dependencies from scratch is not appealing, the free (and unaffiliated) Anaconda Python distribution provides a complete Python environment which comes with a reasonably recent version of Enaml and a host of other useful packages.</p>\n<p>If you have a working C++ compiler, you can install using pip:</p>\n<p>$ pip install enaml</p>\n</blockquote>\n<p><strong>Can you please tell me the easiest way to install a C++ compiler and Git command line tools and make them available on system path?</strong></p>\n<p>What I tried:\nI tried installing Visual Studio however it turns out to be 32 bit so when pip installing enaml or atom I get the following error:</p>\n<p>Failed building wheel for atom</p>\n<p>fatal error LNK1112: module machine type 'x64' conflicts with target machine type 'X86'</p>\n"}, {"tags": ["python", "mysql", "django", "django-queryset", "django-database"], "answers": [{"comments": [{"owner": {"reputation": 407, "user_id": 6825966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617db727a13cd752fbbccced9d179ce5?s=128&d=identicon&r=PG&f=1", "display_name": "mjuk", "link": "https://stackoverflow.com/users/6825966/mjuk"}, "edited": false, "score": 0, "creation_date": 1493892587, "post_id": 43771738, "comment_id": 74600145, "body": "Thanks, that worked! However, when I add <code>pk__in=[1,2]</code> to the Tag filter, I get <code>django.core.exceptions.FieldError: Expression contains mixed types. You must set output_field</code>."}, {"owner": {"reputation": 12189, "user_id": 2062318, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/78a27bedd2d3c0cded7b342858475dab?s=128&d=identicon&r=PG", "display_name": "Todor", "link": "https://stackoverflow.com/users/2062318/todor"}, "reply_to_user": {"reputation": 407, "user_id": 6825966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617db727a13cd752fbbccced9d179ce5?s=128&d=identicon&r=PG&f=1", "display_name": "mjuk", "link": "https://stackoverflow.com/users/6825966/mjuk"}, "edited": false, "score": 3, "creation_date": 1493894250, "post_id": 43771738, "comment_id": 74601306, "body": "You can try to print the <code>queryset.query</code> and execute it in your <code>RDBMS</code> directly to see what you get in return. I guess that for some rows <code>Count</code> may return <code>NULL</code> instead of 0. You can try to confirm that by temporary exclude rows w/o count, i.e. <code>.filter(count__gte=1)</code>. However, <code>Subquery</code> accepts a second argument, which is <code>output_field</code> you can try set it to: <code>output_field=fields.IntegerField()</code>"}, {"owner": {"reputation": 541, "user_id": 3708999, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/80c78065d73c3a4142f3d7362970e54f?s=128&d=identicon&r=PG&f=1", "display_name": "sajid", "link": "https://stackoverflow.com/users/3708999/sajid"}, "edited": false, "score": 2, "creation_date": 1528282230, "post_id": 43771738, "comment_id": 88445391, "body": "@Todor Does not work for me. I get django.db.utils.ProgrammingError: more than one row returned by a subquery used as an expression"}, {"owner": {"reputation": 12189, "user_id": 2062318, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/78a27bedd2d3c0cded7b342858475dab?s=128&d=identicon&r=PG", "display_name": "Todor", "link": "https://stackoverflow.com/users/2062318/todor"}, "edited": false, "score": 0, "creation_date": 1528291242, "post_id": 43771738, "comment_id": 88451322, "body": "I guess you have some filter missing, so you got more than one group per row which returns more than one count. You must have a filter on every field in your first <code>.values()</code> clause in the subquery."}, {"owner": {"reputation": 136, "user_id": 5575888, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0fc66f06e58d5e1507ff27012884a11?s=128&d=identicon&r=PG", "display_name": "hjaarnio", "link": "https://stackoverflow.com/users/5575888/hjaarnio"}, "edited": false, "score": 0, "creation_date": 1603360623, "post_id": 43771738, "comment_id": 114015302, "body": "having a default ordering set on Tag will make the GROUP BY include also the fields defined in the ordering in addition the ones in <code>values()</code>, which generates a <code>Subquery returns more than 1 row</code> error. fix by adding <code>).order_by(&#39;post&#39;).values(&#39;post&#39;)</code>"}], "tags": [], "owner": {"reputation": 12189, "user_id": 2062318, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/78a27bedd2d3c0cded7b342858475dab?s=128&d=identicon&r=PG", "display_name": "Todor", "link": "https://stackoverflow.com/users/2062318/todor"}, "is_accepted": true, "score": 94, "last_activity_date": 1593637579, "last_edit_date": 1593637579, "creation_date": 1493855239, "answer_id": 43771738, "question_id": 43770118, "link": "https://stackoverflow.com/questions/43770118/simple-subquery-with-outerref/43771738#43771738", "title": "Simple Subquery with OuterRef", "body": "<p>One of the problems with your example is that you cannot use <code>queryset.count()</code> as a subquery, because <code>.count()</code> tries to evaluate the queryset and return the count.</p>\n<p>So one may think that the right approach would be to use <code>Count()</code> instead. Maybe something like this:</p>\n<pre><code>Post.objects.annotate(\n    count=Count(Tag.objects.filter(post=OuterRef('pk')))\n)\n</code></pre>\n<p>This won't work for two reasons:</p>\n<ol>\n<li><p>The <code>Tag</code> queryset selects all <code>Tag</code> fields, while <code>Count</code> can only count on one field. Thus: <code>Tag.objects.filter(post=OuterRef('pk')).only('pk')</code> is needed (to select counting on <code>tag.pk</code>).</p>\n</li>\n<li><p><code>Count</code> itself is not a <code>Subquery</code> class, <code>Count</code> is an <code>Aggregate</code>. So the expression generated by <code>Count</code> is not recognized as a <code>Subquery</code> (<code>OuterRef</code> requires subquery), we can fix that by using <code>Subquery</code>.</p>\n</li>\n</ol>\n<p>Applying fixes for 1) and 2) would produce:</p>\n<pre><code>Post.objects.annotate(\n    count=Count(Subquery(Tag.objects.filter(post=OuterRef('pk')).only('pk')))\n)\n</code></pre>\n<p><strong>However</strong>\nif you inspect the query being produced:</p>\n<pre><code>SELECT \n    &quot;tests_post&quot;.&quot;id&quot;,\n    &quot;tests_post&quot;.&quot;title&quot;,\n    COUNT((SELECT U0.&quot;id&quot; \n            FROM &quot;tests_tag&quot; U0 \n            INNER JOIN &quot;tests_post_tags&quot; U1 ON (U0.&quot;id&quot; = U1.&quot;tag_id&quot;) \n            WHERE U1.&quot;post_id&quot; = (&quot;tests_post&quot;.&quot;id&quot;))\n    ) AS &quot;count&quot; \nFROM &quot;tests_post&quot; \nGROUP BY \n    &quot;tests_post&quot;.&quot;id&quot;,\n    &quot;tests_post&quot;.&quot;title&quot;\n</code></pre>\n<p>you will notice a <code>GROUP BY</code> clause. This is because <code>COUNT</code> is an aggregate function. Right now it does not affect the result, but in some other cases it may. That's why the <a href=\"https://docs.djangoproject.com/en/1.11/ref/models/expressions/#using-aggregates-within-a-subquery-expression\" rel=\"noreferrer\">docs</a> suggest a different approach, where the aggregation is moved into the <code>subquery</code> via a specific combination of <code>values</code> + <code>annotate</code> + <code>values</code> :</p>\n<pre><code>Post.objects.annotate(\n    count=Subquery(\n        Tag.objects\n            .filter(post=OuterRef('pk'))\n            # The first .values call defines our GROUP BY clause\n            # Its important to have a filtration on every field defined here\n            # Otherwise you will have more than one group per row!!!\n            # This will lead to subqueries to return more than one row!\n            # But they are not allowed to do that!\n            # In our example we group only by post\n            # and we filter by post via OuterRef\n            .values('post')\n            # Here we say: count how many rows we have per group \n            .annotate(count=Count('pk'))\n            # Here we say: return only the count\n            .values('count')\n    )\n)\n</code></pre>\n<p>Finally this will produce:</p>\n<pre><code>SELECT \n    &quot;tests_post&quot;.&quot;id&quot;,\n    &quot;tests_post&quot;.&quot;title&quot;,\n    (SELECT COUNT(U0.&quot;id&quot;) AS &quot;count&quot; \n            FROM &quot;tests_tag&quot; U0 \n            INNER JOIN &quot;tests_post_tags&quot; U1 ON (U0.&quot;id&quot; = U1.&quot;tag_id&quot;) \n            WHERE U1.&quot;post_id&quot; = (&quot;tests_post&quot;.&quot;id&quot;) \n            GROUP BY U1.&quot;post_id&quot;\n    ) AS &quot;count&quot; \nFROM &quot;tests_post&quot;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 774, "user_id": 3983804, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6f3dbfc582c87eb81fe6f5783bea2a6?s=128&d=identicon&r=PG&f=1", "display_name": "Brad Martsberger", "link": "https://stackoverflow.com/users/3983804/brad-martsberger"}, "is_accepted": false, "score": 3, "last_activity_date": 1592493326, "last_edit_date": 1592493326, "creation_date": 1557947746, "answer_id": 56156241, "question_id": 43770118, "link": "https://stackoverflow.com/questions/43770118/simple-subquery-with-outerref/56156241#56156241", "title": "Simple Subquery with OuterRef", "body": "<p>The <a href=\"https://github.com/martsberger/django-sql-utils\" rel=\"nofollow noreferrer\">django-sql-utils</a> package makes this kind of subquery aggregation simple. Just <code>pip install django-sql-utils</code> and then:</p>\n\n<pre><code>from sql_util.utils import SubqueryCount\nposts = Post.objects.annotate(\n            tag_count=SubqueryCount('tag'))\n</code></pre>\n\n<p>The API for SubqueryCount is the same as Count, but it generates a subselect in the SQL instead of joining to the related table.</p>\n"}], "owner": {"reputation": 407, "user_id": 6825966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/617db727a13cd752fbbccced9d179ce5?s=128&d=identicon&r=PG&f=1", "display_name": "mjuk", "link": "https://stackoverflow.com/users/6825966/mjuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20641, "favorite_count": 19, "accepted_answer_id": 43771738, "answer_count": 2, "score": 41, "last_activity_date": 1593637579, "creation_date": 1493846020, "last_edit_date": 1593637358, "question_id": 43770118, "link": "https://stackoverflow.com/questions/43770118/simple-subquery-with-outerref", "title": "Simple Subquery with OuterRef", "body": "<p>I am trying to make a very simple <code>Subquery</code> that uses <code>OuterRef</code> (not for practical purposes, but just to get it working), but I keep running into the same error.</p>\n<p><code>posts/models.py</code> code</p>\n<pre><code>from django.db import models\n\nclass Tag(models.Model):\n    name = models.CharField(max_length=120)\n    def __str__(self):\n        return self.name\n\nclass Post(models.Model):\n    title = models.CharField(max_length=120)\n    tags = models.ManyToManyField(Tag)\n    def __str__(self):\n        return self.title\n</code></pre>\n<p><code>manage.py shell</code> code</p>\n<pre><code>&gt;&gt;&gt; from django.db.models import OuterRef, Subquery\n&gt;&gt;&gt; from posts.models import Tag, Post\n&gt;&gt;&gt; tag1 = Tag.objects.create(name='tag1')\n&gt;&gt;&gt; post1 = Post.objects.create(title='post1')\n&gt;&gt;&gt; post1.tags.add(tag1)\n&gt;&gt;&gt; Tag.objects.filter(post=post1.pk)\n&lt;QuerySet [&lt;Tag: tag1&gt;]&gt;\n&gt;&gt;&gt; tags_list = Tag.objects.filter(post=OuterRef('pk'))\n&gt;&gt;&gt; Post.objects.annotate(count=Subquery(tags_list.count()))\n</code></pre>\n<p>The last two lines should give me number of tags for each Post object. And here I keep getting the same error:</p>\n<pre><code>ValueError: This queryset contains a reference to an outer query and may only be used in a subquery.\n</code></pre>\n"}, {"tags": ["python", "raspberry-pi", "adc"], "answers": [{"comments": [{"owner": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1493916291, "post_id": 43772262, "comment_id": 74617652, "body": "Err, I think instead of using bitwise and (&amp;) when combining the bits from each byte in &quot;return ((r[0] &amp; 0x1F) &lt;&lt; 5) &amp; ((r[1] &gt;&gt; 3) &amp; 0x1F)&quot; (which will always return 0 as the two values will never have overlapping 1s) you should use bitwise or (|)), i.e. &quot;return ((r[0] &amp; 0x1F) &lt;&lt; 5) | ((r[1] &gt;&gt; 3) &amp; 0x1F)&quot;"}, {"owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "reply_to_user": {"reputation": 5192, "user_id": 2318649, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rW1HG.jpg?s=128&g=1", "display_name": "barny", "link": "https://stackoverflow.com/users/2318649/barny"}, "edited": false, "score": 0, "creation_date": 1493939519, "post_id": 43772262, "comment_id": 74628903, "body": "Yes, amended the post."}], "tags": [], "owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "is_accepted": false, "score": 1, "last_activity_date": 1493939578, "last_edit_date": 1493939578, "creation_date": 1493860056, "answer_id": 43772262, "question_id": 43770086, "link": "https://stackoverflow.com/questions/43770086/raspberry-pi-adc-mpc3001-using-python-and-spidev/43772262#43772262", "title": "Raspberry pi adc: MPC3001 using python and spidev", "body": "<p>In the <a href=\"http://ww1.microchip.com/downloads/en/DeviceDoc/21293b.pdf\" rel=\"nofollow noreferrer\">data sheet</a> figure 5-2 it shows what the issue is.  The data returned from the device, bit by bit, looks like this (where X = don't care, and Bx is bit number x of the data; B0 is LSB and B9 MSB):</p>\n\n<pre><code>BYTE0:  X  X  0 B9 B8 B7 B6 B5 \nBYTE1: B4 B3 B2 B1 B0 B1 B2 B3\nBYTE2: B4 B5 B6 B7 B8 B9  X  X\n</code></pre>\n\n<p>If you change the return statement to this:</p>\n\n<pre><code>return ((r[0] &amp; 0x1F) &lt;&lt; 5) | ((r[1] &gt;&gt; 3) &amp; 0x1F)\n</code></pre>\n\n<p>it might work.</p>\n\n<p>But if I were you I wouldn't trust me (I no longer have a hardware setup where I could test anything).  I think it's best to print the individual values of the bytes in r and ponder the result until it starts to make sense.  Be aware that some SPI implementations let you read in the data on either the rising or the falling edge.  If you have that wrong your data will never make sense.</p>\n\n<p>Another clue here is that the three LSBs of an A/D converter reading shouldn't be consistently 000, for reading after reading.  There is almost always noise in the least significant bit, at least, if not two or three bits.</p>\n\n<p>BTW I agree with you about spidev.  I switched to quick2wire and then things went much more smoothly.  It's better written and much better documented.</p>\n"}], "owner": {"reputation": 11, "user_id": 5656362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/521866c50ed3badcb9e43c39cac3dfa2?s=128&d=identicon&r=PG&f=1", "display_name": "Toon Hooy", "link": "https://stackoverflow.com/users/5656362/toon-hooy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493939578, "creation_date": 1493845877, "question_id": 43770086, "link": "https://stackoverflow.com/questions/43770086/raspberry-pi-adc-mpc3001-using-python-and-spidev", "title": "Raspberry pi adc: MPC3001 using python and spidev", "body": "<p>I am trying to use a MPC3001 ADC with the Raspberry pi over SPI using Python.\nWhile doing so I am getting some strange results:</p>\n\n<p>The code I am using:</p>\n\n<pre><code>import sys\nimport spidev\n\nspi = spidev.SpiDev()\nspi.open(0,0)\n\ndef readAdc(channel):\n    r = spi.xfer2([1, 8 + channel &lt;&lt; 4, 0])\n    return ((r[1]&amp;3) &lt;&lt; 8) + r[2]\n\nwhile True:\n    print readAdc(0)\n    time.sleep(0.5)\n</code></pre>\n\n<p>running the script above, while measuring the center point of a voltage divider, yields a random switching between 2 values: 504 and 1016.</p>\n\n<p>Since 504 is the value I would expect to be correct, in combination with the binary representation of the two results;</p>\n\n<p>504 --> 00111111000</p>\n\n<p>1016 --> 01111111000</p>\n\n<p>I assume I am accidentally 'creating' a 1 somewhere. </p>\n\n<p>Can someone point me in the right direction.\nThanks in advance</p>\n\n<p>BTW: Is it me, or is there no decent documentation for the spidev lib?</p>\n"}, {"tags": ["python", "sockets", "http", "header", "recv"], "comments": [{"owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 1, "creation_date": 1493846087, "post_id": 43770074, "comment_id": 74581691, "body": "This seems an odd termination condition: <code>if len(packet) &lt; BUFF_SIZE: break</code>. What are you trying to achieve there?"}, {"owner": {"reputation": 13, "user_id": 5860483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1655467014f74bf75c3ed5ad16669b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Alhussani", "link": "https://stackoverflow.com/users/5860483/omar-alhussani"}, "reply_to_user": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "edited": false, "score": 0, "creation_date": 1493846165, "post_id": 43770074, "comment_id": 74581735, "body": "i tried: if not packet: break but it kept looping so i just went with that and it worked"}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1493870704, "post_id": 43770074, "comment_id": 74588325, "body": "If you really want to implement your own HTTP stack please read the <a href=\"https://www.ietf.org/rfc/rfc2616.txt\" rel=\"nofollow noreferrer\">standard</a> instead of just guessing. The HTTP request consists of a header and an optional body delimited by a new line and the size of the body is given in the header. You cannot just use dumb <code>recv</code> in the hope that you get everything but you have to actually properly deal with the HTTP protocol."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5860483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1655467014f74bf75c3ed5ad16669b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Alhussani", "link": "https://stackoverflow.com/users/5860483/omar-alhussani"}, "edited": false, "score": 0, "creation_date": 1493900806, "post_id": 43780322, "comment_id": 74605934, "body": "it keeps looping and doesn&#39;t break"}, {"owner": {"reputation": 5288, "user_id": 3012385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcba6da9cb612283b21f74c407824bc5?s=128&d=identicon&r=PG", "display_name": "DaSourcerer", "link": "https://stackoverflow.com/users/3012385/dasourcerer"}, "reply_to_user": {"reputation": 13, "user_id": 5860483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1655467014f74bf75c3ed5ad16669b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Alhussani", "link": "https://stackoverflow.com/users/5860483/omar-alhussani"}, "edited": false, "score": 0, "creation_date": 1493928011, "post_id": 43780322, "comment_id": 74624250, "body": "@OmarAlhussani I modified the code to output right away. See what it gives you. My guess is that the client does not terminate the connection."}], "tags": [], "owner": {"reputation": 5288, "user_id": 3012385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcba6da9cb612283b21f74c407824bc5?s=128&d=identicon&r=PG", "display_name": "DaSourcerer", "link": "https://stackoverflow.com/users/3012385/dasourcerer"}, "is_accepted": true, "score": 0, "last_activity_date": 1493927950, "last_edit_date": 1493927950, "creation_date": 1493893639, "answer_id": 43780322, "question_id": 43770074, "link": "https://stackoverflow.com/questions/43770074/python-cant-receive-user-data-in-http-socket-server/43780322#43780322", "title": "Python can&#39;t receive user data in HTTP socket server", "body": "<p>You have stopped reading after the header sequence as Steffen correctly observed. The following code should work (beware, untested!):</p>\n\n<pre><code>def recvall(self, conn):\n    BUFF_SIZE = 4096\n\n    while True:\n        packet = conn.recv(BUFF_SIZE)\n        if not packet:\n            break\n        print packet.decode('utf-8')\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5860483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1655467014f74bf75c3ed5ad16669b4a?s=128&d=identicon&r=PG&f=1", "display_name": "Omar Alhussani", "link": "https://stackoverflow.com/users/5860483/omar-alhussani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 505, "favorite_count": 1, "accepted_answer_id": 43780322, "answer_count": 1, "score": 0, "last_activity_date": 1493927950, "creation_date": 1493845811, "last_edit_date": 1493846137, "question_id": 43770074, "link": "https://stackoverflow.com/questions/43770074/python-cant-receive-user-data-in-http-socket-server", "title": "Python can&#39;t receive user data in HTTP socket server", "body": "<p>I can't get the data in recv()\nI want the data that the user inputs in form fields</p>\n\n<p>Code:</p>\n\n<pre><code>def recvall(self, conn):\n    BUFF_SIZE = 4096 # 4 KiB\n    data = \"\"\n\n    while True:\n\n        packet = conn.recv(BUFF_SIZE).decode('utf-8')\n        data += packet\n\n        if len(packet) &lt; BUFF_SIZE:\n            break\n\n    print (data)\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>POST /search HTTP/1.1\nHost: localhost\nConnection: keep-alive\nContent-Length: 14\nCache-Control: max-age=0\nOrigin: http://localhost\nUpgrade-Insecure-Requests: 1\nUser-Agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/57.0.2987.133 Safari/537.36\nContent-Type: application/x-www-form-urlencoded\nAccept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8\nReferer: http://localhost/\nAccept-Encoding: gzip, deflate, br\nAccept-Language: en-US,en;q=0.8\n</code></pre>\n\n<p>It seems to be missing a line or something i've tried everything\ni want the data at the end</p>\n"}, {"tags": ["python", "python-2.7", "python-3.x", "wxpython", "ipython"], "comments": [{"owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "edited": false, "score": 0, "creation_date": 1493846079, "post_id": 43770065, "comment_id": 74581688, "body": "You want a string of all integers? All of them?"}, {"owner": {"reputation": 14442, "user_id": 7475225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/niMZR.jpg?s=128&g=1", "display_name": "Mike - SMT", "link": "https://stackoverflow.com/users/7475225/mike-smt"}, "edited": false, "score": 0, "creation_date": 1493846349, "post_id": 43770065, "comment_id": 74581822, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/16488278/how-to-check-if-a-variable-is-an-integer-or-a-string\">How to check if a variable is an integer or a string?</a>"}, {"owner": {"reputation": 23, "user_id": 7959693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ROXPl.jpg?s=128&g=1", "display_name": "John Asare", "link": "https://stackoverflow.com/users/7959693/john-asare"}, "edited": false, "score": 0, "creation_date": 1493847573, "post_id": 43770065, "comment_id": 74582307, "body": "Unfortunately not, it is not a duplicate"}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1493846310, "post_id": 43770129, "comment_id": 74581799, "body": "If you think it&#39;s already been answered, mark it as a duplicate."}], "tags": [], "owner": {"reputation": 114, "user_id": 7930361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qbsjw.jpg?s=128&g=1", "display_name": "Rapido", "link": "https://stackoverflow.com/users/7930361/rapido"}, "is_accepted": false, "score": 0, "last_activity_date": 1493846068, "last_edit_date": 1495542384, "creation_date": 1493846068, "answer_id": 43770129, "question_id": 43770065, "link": "https://stackoverflow.com/questions/43770065/is-there-any-way-i-can-include-all-integers/43770129#43770129", "title": "Is there any way I can include all integers?", "body": "<p>Already solved : <a href=\"https://stackoverflow.com/questions/16488278/how-to-check-if-a-variable-is-an-integer-or-a-string\">How to check if a variable is an integer or a string?</a></p>\n\n<blockquote>\n<pre><code>try:\n    value = int(value)\nexcept ValueError:\n    pass  # it was a string, not an int. (or anything alse)\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 23, "user_id": 7959693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ROXPl.jpg?s=128&g=1", "display_name": "John Asare", "link": "https://stackoverflow.com/users/7959693/john-asare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1493848131, "creation_date": 1493845772, "last_edit_date": 1493848131, "question_id": 43770065, "link": "https://stackoverflow.com/questions/43770065/is-there-any-way-i-can-include-all-integers", "title": "Is there any way I can include all integers?", "body": "<p>Can someone please show me how to include all integers instead just \"1234567890\". So in that case the program will check if token is in as much integers as possible. </p>\n\n<pre><code>for token in tokenList:\n        if token in \"1234567890\" \n</code></pre>\n\n<h1>need it to be all integers instead of \"1234567890\"</h1>\n\n<p>Update: more in depth.</p>\n\n<p>Instead of \"for token in tokenList:\n            if token in \"1234567890\" \nHow can I say, \"for token in token list:\n            if token is in integers.</p>\n\n<pre><code>def infixToPostfix(infixexpr):\n  prec = {}\n  prec[\"**\"] = 3\n  prec[\"*\"] = 3\n  prec[\"/\"] = 3\n  prec[\"+\"] = 2\n  prec[\"-\"] = 2\n  prec[\"(\"] = 1\n  prec[\")\"] = 1\n  opStack = Stack()\n  postfixList = []\n  tokenList = infixexpr.split()\n\n  for token in tokenList:\n      if token in \"1234567890\":\n          postfixList.append(token)\n      elif token == '(':\n          opStack.push(token)\n      elif token == ')':\n          topToken = opStack.pop()\n          while topToken != '(':\n              postfixList.append(topToken)\n              topToken = opStack.pop()\n      else:\n          while (not opStack.isEmpty()) and \\\n             (prec[opStack.peek()] &gt;= prec[token]):\n                postfixList.append(opStack.pop())\n          opStack.push(token)\n\n  while not opStack.isEmpty():\n      postfixList.append(opStack.pop())\n  return \" \".join(postfixList)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "numpy", "variables", "for-loop"], "comments": [{"owner": {"reputation": 19039, "user_id": 5851928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a108205f3620cbf490cb5e6ecd20ebb2?s=128&d=identicon&r=PG&f=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/5851928/davidg"}, "edited": false, "score": 1, "creation_date": 1493845912, "post_id": 43770049, "comment_id": 74581619, "body": "Your question is unclear. What doesn&#39;t work? It would help if you can provide a <a href=\"https://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable example</a>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1493846401, "post_id": 43770049, "comment_id": 74581846, "body": "&quot;It doesn&#39;t work&quot; is not an adequate problem statement. Please elaborate."}, {"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1493846747, "post_id": 43770049, "comment_id": 74581986, "body": "Please show a code snippet that shows the problem and the full traceback that results from that code."}], "answers": [{"comments": [{"owner": {"reputation": 1008, "user_id": 307542, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IB4Nz.png?s=128&g=1", "display_name": "abathur", "link": "https://stackoverflow.com/users/307542/abathur"}, "edited": false, "score": 0, "creation_date": 1493846529, "post_id": 43770235, "comment_id": 74581897, "body": "There are other iterable types that might be more appropriate depending on the situation."}], "tags": [], "owner": {"reputation": 1008, "user_id": 307542, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/IB4Nz.png?s=128&g=1", "display_name": "abathur", "link": "https://stackoverflow.com/users/307542/abathur"}, "is_accepted": true, "score": 1, "last_activity_date": 1493846521, "creation_date": 1493846521, "answer_id": 43770235, "question_id": 43770049, "link": "https://stackoverflow.com/questions/43770049/storing-loops-in-looped-variable/43770235#43770235", "title": "Storing loops in looped variable?", "body": "<p>You need to define the variable <code>at</code> before you try to make assignments to it. You're getting the error because the variable doesn't exist. If you just need a simple list, you need <code>at = []</code> before your loop.</p>\n\n<p>Then, in your loop, instead of directly assigning a given index, you can just use <code>at.append(&lt;computation&gt;)</code></p>\n"}], "owner": {"reputation": 3, "user_id": 7957145, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Gp0uJHvQw50/AAAAAAAAAAI/AAAAAAAAABc/gcMMDhtm8CI/photo.jpg?sz=128", "display_name": "Ishimura", "link": "https://stackoverflow.com/users/7957145/ishimura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 43770235, "answer_count": 1, "score": -1, "last_activity_date": 1493847088, "creation_date": 1493845720, "last_edit_date": 1493847088, "question_id": 43770049, "link": "https://stackoverflow.com/questions/43770049/storing-loops-in-looped-variable", "title": "Storing loops in looped variable?", "body": "<p>I am calculating the buoyancy force of a wing via multiple points. For this I have specific surfaces and air pressure data. What I want to now is storing calculated values in a variable via loop like this: </p>\n\n<pre><code>w = 0.7\n\n# air pressure data\npt = np.array([0, -18.63, -80.41, -88.25, 90.21, -95.61])\npb = np.array([-112.28, 34.32, -101.98, -85.31, -3.33, 11.47, 14.71])\n\n#top wing x-pos.\nxt = np.array([11, 9.1, 6.85, 4.7, 1.7, 0.6, 1.9])\n#bottom wing x-pos. \nxb = np.array([2.85,0.8, 0.85, 2.5, 4.225, 6.7, 9.025, 11])\n\n#top wing y-pos.\nyt = np.array([1, 2.1, 3.05, 3.8, 3.7, 2.1, 1])\n#bottom wing y-pos. \nyb = np.array([4.05, 3, 1.55, 0.95, 1.125, 1.3, 1.225,1])\n\n\nfor i in range(0,5):\n    at[i] = sqrt( (xt[i] - xt[i+1]) ** 2 + (yt[i] - yt[i+1]) **2 ) * w\n    ab[i] = sqrt( (xb[i] - xb[i+1]) ** 2 + (yb[i] - yb[i+1]) **2 ) * w\n</code></pre>\n\n<p>On the left it should create multiple variables like these:</p>\n\n<pre><code>at0 = ...\n :\n :\nat5 = ... \n\nab0 = ...\n :\n :\nab5 = ... \n</code></pre>\n\n<p>and on the right it adresses the stored numbers in the <code>np.array()</code>s</p>\n\n<p>This gives this error though: <code>NameError: name 'at' is not defined</code>\nand afterwards continue like this:</p>\n\n<pre><code>for x in range(0,5):\n    Ft = sum( at[x] * pt[x] )\n    Fb = sum( ab[x] * pb[x] )\n</code></pre>\n\n<p>Until now I tried to do it with dictionaries, loops given in one line... But it doesn't work. </p>\n\n<p>By the way: Does it matter whether I use <code>np.sum()</code> and <code>np.sqrt()</code> instead of using <code>sum()</code> and <code>sqrt()</code>?\nThank you very much!</p>\n"}, {"tags": ["python", "shortest-path", "dijkstra", "graph-traversal"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1493845833, "post_id": 43770041, "comment_id": 74581579, "body": "When working with matrices, using <code>numpy</code> usually speeds up things."}, {"owner": {"reputation": 9372, "user_id": 4585963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8Yzwc.jpg?s=128&g=1", "display_name": "hilberts_drinking_problem", "link": "https://stackoverflow.com/users/4585963/hilberts-drinking-problem"}, "edited": false, "score": 0, "creation_date": 1493933360, "post_id": 43770041, "comment_id": 74626873, "body": "Regarding your question about <code>copy</code>, you could profile your code and answer that conclusively."}], "owner": {"reputation": 1749, "user_id": 1179317, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c97e780a81e79fa27fda17b56895512b?s=128&d=identicon&r=PG", "display_name": "user1179317", "link": "https://stackoverflow.com/users/1179317/user1179317"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 320, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1493931571, "creation_date": 1493845679, "last_edit_date": 1495542860, "question_id": 43770041, "link": "https://stackoverflow.com/questions/43770041/get-shortest-path-with-an-extra-edge-with-weight-w", "title": "Get shortest path with an extra edge with weight &#39;w&#39;?", "body": "<p>The question is like <a href=\"https://stackoverflow.com/questions/40089933/dijkstras-single-source-shourtest-path-with-an-extra-edge-with-weight-of-w\">Dijkstra&#39;s Single Source Shourtest Path with an extra edge with weight of &#39;w&#39;</a>.</p>\n\n<p>You are given an undirected weighted graph, which is represented as an adjacency matrix. Find the shortest path between a start node and a finish node in the graph. You are allowed to add at most one edge of a given weight between any two nodes that are not directly connected to each other.</p>\n\n<p>Example:</p>\n\n<p>For <code>start = 1</code>, <code>finish = 4</code>, <code>weight = 2</code> and</p>\n\n<pre><code>graph = [[0, 2, 0, 4, 0],\n         [2, 0, 1, 0, 0],\n         [0, 1, 0, 3, 0],\n         [4, 0, 3, 0, 1],\n         [0, 0, 0, 1, 0]]\n</code></pre>\n\n<p>the output should be\n<code>shortestPathWithEdge(start, finish, weight, graph) == 3</code>.</p>\n\n<p>My current solution uses Dijstra, but i run it multiple times base on how many possible edges there are. I know with Dijstra, you can get the shortest path to all the nodes, but I cant seem to think of a way to manipulate that data by adding an edge connection without running Dijstra algorithm over again.</p>\n\n<p>The graph can be 1000x1000.  So with a large matrix, my solution will be too slow and will not work.</p>\n\n<p>Is there a quick update that can be done to Dijstra algorithm to handle additional edges?</p>\n\n<p>My code is below, it works but quite slow.  Maybe <code>copy.copy</code> is also causing it to be a lot slower than it should.</p>\n\n<pre><code>import copy\n\ndef getDistances(graph):\n    ##### GET DISTANCES FROM GRAPH\n    ##### PLACE IN DICTIONARY FORM\n    distances = {}\n    edges = set()\n\n    for i, node in enumerate(graph):\n        distances[i+1] = {}\n        for j, distance in enumerate(node):\n            ##### NO NEED TO GET DISTANCE TO ITSELF\n            if i != j:\n                distances[i+1][j+1] = distance\n                if distance == 0 and (i+1,j+1) not in edges and (j+1,i+1) not in edges:\n                    ##### ADD TO EDGES\n                    edges.add((i+1,j+1))\n\n    return distances, edges\n\ndef dijstra(visited,unvisited,currentNode,currentDistance,distances,finish):\n    while True:\n        for neighbor, distance in distances[currentNode].items():\n            if distance == 0 or neighbor not in unvisited:\n                continue\n\n            newDistance = currentDistance + distance\n            if unvisited[neighbor] == None or unvisited[neighbor] &gt; newDistance:\n                unvisited[neighbor] = newDistance\n\n        visited[currentNode] = currentDistance\n        del unvisited[currentNode]\n\n        if not unvisited:\n            break\n\n        candidates = [node for node in unvisited.items() if node[1]]\n        currentNode, currentDistance = sorted(candidates, key=lambda x: x[1])[0]\n\n    ##### VISITED CONTAINS SHORTEST PATH TO ALL NODES\n    return visited[finish]\n\ndef shortestPathWithEdge(start, finish, weight, graph):\n\n    best = 10000000\n\n    nodes = { i+1 for i in range(len(graph)) }\n    distances, edges = getDistances(graph)\n\n    #####IF NO EXTRA EDGE\n    # visited = {}\n    # unvisited = { node:None for node in nodes}\n    # currentNode = start\n    # currentDistance = 0\n    # solution = dijstra(visited,unvisited,currentNode,currentDistance,distances,finish)\n\n    #####WITH AN EXTRA EDGE\n    solution = 10000000\n    for node1, node2 in edges:\n        _distances = copy.copy(distances)\n        _distances[node1][node2] = weight\n        visited = {}\n        unvisited = {node: None for node in nodes}\n        currentNode = start\n        currentDistance = 0\n        shortest2 = dijstra(visited, unvisited, currentNode, currentDistance, _distances, finish)\n\n        solution = min(solution,shortest2)\n\n    return solution\n\n\nstart = 1\nfinish = 4\nweight = 2\n\ngraph = [[0, 2, 0, 4, 0],\\\n            [2, 0, 1, 0, 0], \\\n            [0, 1, 0, 3, 0], \\\n            [4, 0, 3, 0, 1],\\\n            [0, 0, 0, 1, 0]]\n\nprint(\"Answer:\", shortestPathWithEdge(start, finish, weight, graph))\n</code></pre>\n"}, {"tags": ["python", "json", "list", "dictionary"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6519395, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/592dd62b71357a38cd1e967713a902b3?s=128&d=identicon&r=PG&f=1", "display_name": "Krishnang Dalal", "link": "https://stackoverflow.com/users/6519395/krishnang-dalal"}, "edited": false, "score": 0, "creation_date": 1493860959, "post_id": 43770265, "comment_id": 74585870, "body": "Thanks a lot for such a comprehensive explanation and trick. Cheers!"}], "tags": [], "owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "is_accepted": false, "score": 1, "last_activity_date": 1493847116, "last_edit_date": 1493847116, "creation_date": 1493846688, "answer_id": 43770265, "question_id": 43770034, "link": "https://stackoverflow.com/questions/43770034/iterate-over-a-list-of-dictionary-and-string/43770265#43770265", "title": "Iterate over a list of dictionary and string", "body": "<p>You could use this (rather unreadable) one-liner:</p>\n\n<pre><code>&gt;&gt;&gt; [r['location'].get('street_1', None) if isinstance(r['location'], dict) else (r['location'] or None) for r in d]\n[None, 'RR. E DURRESIT PALL. M.C.INERTE KATI 1 LAPRAKE']\n</code></pre>\n\n<p>It's probably better to go with a full for-loop:</p>\n\n<pre><code>&gt;&gt;&gt; l = []\n&gt;&gt;&gt; for r in d:\n...     loc = r['location']\n...     if isinstance(loc, dict):\n...         l.append(loc.get('street_1', None))\n...     else:\n...         l.append(loc or None)\n...\n&gt;&gt;&gt; l\n[None, 'RR. E DURRESIT PALL. M.C.INERTE KATI 1 LAPRAKE']\n&gt;&gt;&gt;\n</code></pre>\n\n<p>Essentially, use <code>isinstance</code> to check if you are working with a <code>dict</code> or not. If we are, use <code>.get</code>, if we aren't, append the value. I use <code>loc or None</code> which will evalute to <code>None</code> if <code>loc</code> is not truthy, which <code>u\"\"</code> happens to be not truthy. </p>\n\n<p>The alternative is a <a href=\"https://docs.python.org/2/glossary.html#term-eafp\" rel=\"nofollow noreferrer\">EAFP</a> approach:</p>\n\n<pre><code>&gt;&gt;&gt; for r in d:\n...     loc = r['location']\n...     try:\n...         l.append(loc.get('street_1', None))\n...     except AttributeError:\n...         l.append(loc or None)\n...\n&gt;&gt;&gt; l\n[None, 'RR. E DURRESIT PALL. M.C.INERTE KATI 1 LAPRAKE']\n</code></pre>\n\n<p>Whether or not it is more efficient to go with that or a <a href=\"https://docs.python.org/2/glossary.html#term-lbyl\" rel=\"nofollow noreferrer\">LBYL</a> approach depends on the nature of the data. If the \"exception\" is not truly exceptional, i.e. it occurs frequently, then a LBYL approach will actually be faster, even if EAFP is considered Pythonic.</p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 6519395, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/592dd62b71357a38cd1e967713a902b3?s=128&d=identicon&r=PG&f=1", "display_name": "Krishnang Dalal", "link": "https://stackoverflow.com/users/6519395/krishnang-dalal"}, "edited": false, "score": 0, "creation_date": 1493861009, "post_id": 43770493, "comment_id": 74585889, "body": "Thanks a lot @martineau"}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": false, "score": 0, "last_activity_date": 1493847857, "creation_date": 1493847857, "answer_id": 43770493, "question_id": 43770034, "link": "https://stackoverflow.com/questions/43770034/iterate-over-a-list-of-dictionary-and-string/43770493#43770493", "title": "Iterate over a list of dictionary and string", "body": "<p>As simple way would be:</p>\n\n<pre><code>for i in d:\n    location = i['location']\n    if location:\n        print(location.get('street_1', 'n/a'))  # or whatever you want to do...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 6519395, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/592dd62b71357a38cd1e967713a902b3?s=128&d=identicon&r=PG&f=1", "display_name": "Krishnang Dalal", "link": "https://stackoverflow.com/users/6519395/krishnang-dalal"}, "edited": false, "score": 0, "creation_date": 1493860980, "post_id": 43770494, "comment_id": 74585878, "body": "Thanks a lot @stefan"}, {"owner": {"reputation": 53, "user_id": 6519395, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/592dd62b71357a38cd1e967713a902b3?s=128&d=identicon&r=PG&f=1", "display_name": "Krishnang Dalal", "link": "https://stackoverflow.com/users/6519395/krishnang-dalal"}, "edited": false, "score": 0, "creation_date": 1493904352, "post_id": 43770494, "comment_id": 74608711, "body": "Hi @Stefan Pochmann: Just a quick question, can you explain how is this working?"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 53, "user_id": 6519395, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/592dd62b71357a38cd1e967713a902b3?s=128&d=identicon&r=PG&f=1", "display_name": "Krishnang Dalal", "link": "https://stackoverflow.com/users/6519395/krishnang-dalal"}, "edited": false, "score": 0, "creation_date": 1493905473, "post_id": 43770494, "comment_id": 74609653, "body": "@KrishnangDalal Not sure what to explain. It&#39;s the same as yours, except when <code>i[&quot;location&quot;]</code> is false, an empty dict is used instead. Maybe you need to read <a href=\"https://docs.python.org/2/reference/expressions.html#boolean-operations\" rel=\"nofollow noreferrer\">the documentation for Boolean operations</a>?"}, {"owner": {"reputation": 53, "user_id": 6519395, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/592dd62b71357a38cd1e967713a902b3?s=128&d=identicon&r=PG&f=1", "display_name": "Krishnang Dalal", "link": "https://stackoverflow.com/users/6519395/krishnang-dalal"}, "edited": false, "score": 0, "creation_date": 1493910120, "post_id": 43770494, "comment_id": 74613329, "body": "Aah, Got it. The &#39;Evaluation order&#39; is what I was missing. Thanks a lot again."}], "tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 1, "last_activity_date": 1493905885, "last_edit_date": 1493905885, "creation_date": 1493847859, "answer_id": 43770494, "question_id": 43770034, "link": "https://stackoverflow.com/questions/43770034/iterate-over-a-list-of-dictionary-and-string/43770494#43770494", "title": "Iterate over a list of dictionary and string", "body": "<p>Just modifying your attempt a little, using an empty dict as default.</p>\n\n<pre><code>&gt;&gt;&gt; [(i['location'] or {}).get('street_1') for i in d]\n[None, 'RR. E DURRESIT PALL. M.C.INERTE KATI 1 LAPRAKE']\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6519395, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/592dd62b71357a38cd1e967713a902b3?s=128&d=identicon&r=PG&f=1", "display_name": "Krishnang Dalal", "link": "https://stackoverflow.com/users/6519395/krishnang-dalal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 266, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1493905885, "creation_date": 1493845658, "last_edit_date": 1493847313, "question_id": 43770034, "link": "https://stackoverflow.com/questions/43770034/iterate-over-a-list-of-dictionary-and-string", "title": "Iterate over a list of dictionary and string", "body": "<p>I have a list of dictionaries converted from JSON but few keys seem to be Unicode which giving me trouble accessing the keys of the dictionary. The list looks like this:</p>\n\n<pre><code>d = [{'location': u'',\n      'partner_id': '648746',\n      'partner_is_CSP': 'Y',\n      'partner_name': 'D4T4 SOLUTIONS PLC',\n      'partner_programs_tiers': [{'program_name': 'Cloud Service Provider',\n        'tier_name': 'Gold'}],\n      'partner_type': 'Direct Reseller; Service Provider',\n      'sort_value': '60',\n      'url_to_logo': u'',\n      'url_to_website': 'https://www.d4t4solutions.com/'},\n     {'location': {'address_type': 'H',\n       'city': 'Tirane',\n       'country': 'ALBANIA',\n       'geo_latitude': '41.348335',\n       'geo_longitude': '19.79865',\n       'phone': u'',\n       'point_of_contact': u'',\n       'state': u'',\n       'street_1': 'RR. E DURRESIT PALL. M.C.INERTE KATI 1 LAPRAKE',\n       'street_2': u'',\n       'street_3': u'',\n       'zip': '1023'},\n      'partner_id': '649341',\n      'partner_is_CSP': 'N',\n      'partner_name': 'COMMUNICATION PROGRESS',\n      'partner_programs_tiers': '[]',\n      'partner_type': 'Distribution VAR',\n      'sort_value': '0',\n      'url_to_logo': u'',\n      'url_to_website': 'www.commprog.com'}]\n</code></pre>\n\n<p>Now, I want to do something like this:</p>\n\n<pre><code>l = [i[\"location\"].get(\"street_1\",None) for i in d]\n</code></pre>\n\n<p>But I'm getting the following error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>AttributeError: 'Unicode' object has no attribute 'get'\n</code></pre>\n\n<p>How can I work my way around that Unicode? Thanks a lot for your help.</p>\n\n<p>P.S. list <code>d</code> contains more dictionaries than shown here and it contains more than just one Unicode. When I iter over the dictionaries, I would like to have <code>None</code> value for the location key with an empty Unicode value is encountered.</p>\n"}, {"tags": ["python", "python-2.7", "subprocess"], "comments": [{"owner": {"reputation": 345, "user_id": 5947576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e5c16fde4a3b4535c626a873f843dd?s=128&d=identicon&r=PG", "display_name": "vv01f", "link": "https://stackoverflow.com/users/5947576/vv01f"}, "edited": false, "score": 0, "creation_date": 1493846058, "post_id": 43770008, "comment_id": 74581680, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/16196712/python-to-wait-for-shell-command-to-complete\">python to wait for shell command to complete</a>"}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1493847082, "post_id": 43770008, "comment_id": 74582116, "body": "You could launch a shell with <code>subprocess.Popen()</code>, then feed the commands to its standard input."}, {"owner": {"reputation": 496, "user_id": 3061426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gYaar.jpg?s=128&g=1", "display_name": "leandrocastelli", "link": "https://stackoverflow.com/users/3061426/leandrocastelli"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1493857466, "post_id": 43770008, "comment_id": 74585100, "body": "@jasonharper do you mean to get the output from Popen and add directly to another Popen as stdin? But what about the environment variables? How could I keep them?"}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1493857677, "post_id": 43770008, "comment_id": 74585150, "body": "There would only be one <code>Popen</code>, running &quot;/bin/sh&quot; perhaps.  Feed it your commands, one by one; the same shell remains running, so it would maintain its environment vars."}], "answers": [{"tags": [], "owner": {"reputation": 345, "user_id": 5947576, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2e5c16fde4a3b4535c626a873f843dd?s=128&d=identicon&r=PG", "display_name": "vv01f", "link": "https://stackoverflow.com/users/5947576/vv01f"}, "is_accepted": false, "score": 0, "last_activity_date": 1493846116, "last_edit_date": 1495542859, "creation_date": 1493846116, "answer_id": 43770140, "question_id": 43770008, "link": "https://stackoverflow.com/questions/43770008/execute-bash-commands-in-the-same-process-in-python/43770140#43770140", "title": "Execute bash commands in the same process in python", "body": "<p>when calling a shell, the os starts a new process unless you have a shell interpreter in python all the way.</p>\n\n<p>the only possibility to do it in the same process is simulating all steps with python directly.</p>\n\n<p>the better way is to accept the limit, call an external process yourself and wait for the script to terminate controlled. example was e.g. here: <a href=\"https://stackoverflow.com/questions/16196712/python-to-wait-for-shell-command-to-complete\">python to wait for shell command to complete</a></p>\n"}, {"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1493858614, "post_id": 43770349, "comment_id": 74585319, "body": "You may need to <code>flush</code> stdout to ensure this works and force <code>bash</code> to operate unbuffered, or you&#39;ll deadlock; even then, it would be brittle. You&#39;d probably need to use the <code>select</code> module and/or threads to ensure no deadlocks, or use the third party <code>pexpect</code> module for more customizable control."}], "tags": [], "owner": {"reputation": 116, "user_id": 3064856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8ad3e73e2656bf9cdd0309aa40f14b6?s=128&d=identicon&r=PG&f=1", "display_name": "Keith M", "link": "https://stackoverflow.com/users/3064856/keith-m"}, "is_accepted": true, "score": 3, "last_activity_date": 1493847161, "creation_date": 1493847161, "answer_id": 43770349, "question_id": 43770008, "link": "https://stackoverflow.com/questions/43770008/execute-bash-commands-in-the-same-process-in-python/43770349#43770349", "title": "Execute bash commands in the same process in python", "body": "<p>What you want is definitely a little weird, but it's possible using pipes.</p>\n\n<pre><code>from subprocess import PIPE, Popen\n\np = Popen(['bash'], stdin=PIPE, stdout=PIPE)\np.stdin.write('echo hello world\\n')\nprint(p.stdout.readline())\n# Check a return code\np.stdin.write('echo $?\\n')\nif p.stdout.readline().strip() \u2a75 '0':\n    print(\"Command succeeded\")\np.stdin.write('echo bye world\\n')\n# Close input and wait for bash to exit\nstdout, stderr = p.communicate()\nprint(stdout)\n</code></pre>\n"}], "owner": {"reputation": 496, "user_id": 3061426, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gYaar.jpg?s=128&g=1", "display_name": "leandrocastelli", "link": "https://stackoverflow.com/users/3061426/leandrocastelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1667, "favorite_count": 0, "accepted_answer_id": 43770349, "answer_count": 2, "score": 1, "last_activity_date": 1493858059, "creation_date": 1493845543, "last_edit_date": 1493858059, "question_id": 43770008, "link": "https://stackoverflow.com/questions/43770008/execute-bash-commands-in-the-same-process-in-python", "title": "Execute bash commands in the same process in python", "body": "<p>I need to run a large build script (bash commands) on a python script. I receive it as a large string and each line is splitted by a \\n. So, I need to execute each line separately.</p>\n\n<p>At first, I tried to use <a href=\"https://docs.python.org/2.7/library/subprocess.html\" rel=\"nofollow noreferrer\">subprocess.Popen()</a> to execute them. But the problem is: after each line, the process terminates and all the environment variables are lost. </p>\n\n<p>The problem is not to wait a command to finish to execute another, I need all of them to be executed on the same shell.</p>\n\n<p>The only solution that I found so far is to save all those commands as a sh file (for example build.sh) and execute it on python.</p>\n\n<p>I would not like to use this approuch because I want to have more control over each execution.</p>\n\n<p>Is there any way to execute those commands on the same process, one by one?</p>\n\n<p>Any other solution would be nice too.</p>\n"}, {"tags": ["python", "python-3.x", "keylogger"], "comments": [{"owner": {"reputation": 25125, "user_id": 156755, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VYXRG.jpg?s=128&g=1", "display_name": "Basic", "link": "https://stackoverflow.com/users/156755/basic"}, "edited": false, "score": 0, "creation_date": 1493846255, "post_id": 43769941, "comment_id": 74581777, "body": "Low-level hooking of the keyboard through the Win32 API is usually the only reliable way to capture input, especially when technologies like DirectInput (DriectX) are involved. Is this purely to get some test data? Or do you need to emulate keystrokes also? If the former, you could throw together a .Net winforms app that performs the same function in ~10 lines of code"}, {"owner": {"reputation": 927, "user_id": 5864426, "user_type": "registered", "accept_rate": 61, "profile_image": "https://lh6.googleusercontent.com/-t0c4QVkpjlo/AAAAAAAAAAI/AAAAAAAAAVE/KArf5EUu0tU/photo.jpg?sz=128", "display_name": "Dhruv Marwha", "link": "https://stackoverflow.com/users/5864426/dhruv-marwha"}, "reply_to_user": {"reputation": 25125, "user_id": 156755, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/VYXRG.jpg?s=128&g=1", "display_name": "Basic", "link": "https://stackoverflow.com/users/156755/basic"}, "edited": false, "score": 0, "creation_date": 1493963231, "post_id": 43769941, "comment_id": 74634940, "body": "@Basic This is to get the key input(Test Data). I actually need to get the keystrokes and pass this onto another function/file as input.This input will be used to train my Neural Network.Can you suggest me any other methods for the same?"}], "owner": {"reputation": 927, "user_id": 5864426, "user_type": "registered", "accept_rate": 61, "profile_image": "https://lh6.googleusercontent.com/-t0c4QVkpjlo/AAAAAAAAAAI/AAAAAAAAAVE/KArf5EUu0tU/photo.jpg?sz=128", "display_name": "Dhruv Marwha", "link": "https://stackoverflow.com/users/5864426/dhruv-marwha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493883370, "creation_date": 1493845249, "last_edit_date": 1493883370, "question_id": 43769941, "link": "https://stackoverflow.com/questions/43769941/unable-to-figure-out-the-issue-with-codekeylogger-in-python-with-win32api", "title": "Unable to Figure out the issue with code(Keylogger in Python with win32api)", "body": "<p>I am following this tutorial series-<a href=\"https://www.youtube.com/watch?v=F4y4YOpUcTQ\" rel=\"nofollow noreferrer\">Neural Network Training Data for self-driving - Python plays GTA p.9 </a></p>\n\n<p>This is the code which is provided on the github link which i am trying to modify-<a href=\"https://github.com/Sentdex/pygta5/blob/master/getkeys.py\" rel=\"nofollow noreferrer\">Github Getkeys.py</a></p>\n\n<p>Basically in this code,we are using the python win32 api in order to record keypresses.</p>\n\n<p>The code is as follows-</p>\n\n<pre><code>import win32api as wapi\nimport time\n\nkeyList = [\"\\b\"]\nfor char in \"ABCDEFGHIJKLMNOPQRSTUVWXYZ 123456789,.'\u00a3$/\\\\\":\n    keyList.append(char)\n\ndef key_check():\n    keys = []\n    for key in keyList:\n        if wapi.GetAsyncKeyState(ord(key)):\n            keys.append(key)\nreturn keys\n</code></pre>\n\n<p>The problem is that i am using Pycharm Community edition and i have installed pypiwin32 which does not have this method.I basically need to make this code work without using the win32 api.</p>\n\n<p>This is what i have tried.</p>\n\n<pre><code>keylist=[\"\\b\"]\nfor char in \"ABCDEFGHIJKLMNOPQRSTUVWXYZ 123456789,.'APS$/\\\\\":\n    keylist.append(char)\nfrom pynput import keyboard\n\n    def on_press(key):\n    keys=[]\n    for xyz in keylist:\n        try:k = key.char\n        except:k=key.name\n\n         # single-char keys\n\n        if k==ord(xyz):\n            keys.append(xyz)\n\n    return keys\n\ndef on_release(key):\n    print('{0} released'.format(\n        key))\n    if key == keyboard.Key.esc:\n        # Stop listener\n        return False\n\nwith keyboard.Listener(\n        on_press=on_press,on_release=on_release) as listener:\n    listener.join()\n</code></pre>\n\n<p>Now this method does not work properly.And i need this code to work outside the console.i.e while this script runs,it should record all keypresses.I was wondering if someone could help me out.</p>\n"}, {"tags": ["python", "quantitative-finance"], "comments": [{"owner": {"reputation": 2614, "user_id": 3254869, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/O17Z7.jpg?s=128&g=1", "display_name": "zhqiat", "link": "https://stackoverflow.com/users/3254869/zhqiat"}, "edited": false, "score": 0, "creation_date": 1493845276, "post_id": 43769906, "comment_id": 74581301, "body": "You&#39;re not so much doing trendlines (in the statistical sense) as you are doing technical analysis. Look at <code>pandas_talib</code> (the package)"}, {"owner": {"reputation": 538, "user_id": 4822557, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/81e75b6f2aa934d614c7410885e72bef?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Zheng", "link": "https://stackoverflow.com/users/4822557/carl-zheng"}, "reply_to_user": {"reputation": 2614, "user_id": 3254869, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/O17Z7.jpg?s=128&g=1", "display_name": "zhqiat", "link": "https://stackoverflow.com/users/3254869/zhqiat"}, "edited": false, "score": 0, "creation_date": 1493846870, "post_id": 43769906, "comment_id": 74582035, "body": "@zhqiat Thank you for helping. It seems helpful, but I am still looking for a document."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "edited": false, "score": 0, "creation_date": 1493993641, "post_id": 43770468, "comment_id": 74653423, "body": "With all respect to the efforts, a <b>Trend</b> in trading domain is by far not just a calculation ( as @zhqiat has already stated above, before you started to fill in this answer ). Failure to respect this is obvious. Just technically speaking. you might have also recognised on your own, that a here proposed calculation does hold <b>neither</b> on semi-log example, <b>nor</b> on a purely linearly scaled example, presented above."}, {"owner": {"reputation": 983, "user_id": 2360477, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/6ed424b16e296a3b9e4fc9ce055962e6?s=128&d=identicon&r=PG", "display_name": "user172839", "link": "https://stackoverflow.com/users/2360477/user172839"}, "edited": false, "score": 0, "creation_date": 1512000981, "post_id": 43770468, "comment_id": 82085911, "body": "Is someone able to explain how this in pseudo code?"}, {"owner": {"reputation": 111, "user_id": 1888107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0mNE.jpg?s=128&g=1", "display_name": "SVetter", "link": "https://stackoverflow.com/users/1888107/svetter"}, "edited": false, "score": 0, "creation_date": 1569070517, "post_id": 43770468, "comment_id": 102481516, "body": "Hey @heyu91, can you please explain the line: data1 = data1.loc[data1[&#39;Adj. High&#39;] &gt; reg[0] * data1[&#39;date_id&#39;] + reg[1]] ? I don&#39;t understand what role the data1[&#39;date_id] plays in this equation. thanks!"}, {"owner": {"reputation": 91, "user_id": 10369793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ad450cc3db874d90b770568dfe6a46b?s=128&d=identicon&r=PG&f=1", "display_name": "Nguyen Tan Bao", "link": "https://stackoverflow.com/users/10369793/nguyen-tan-bao"}, "reply_to_user": {"reputation": 111, "user_id": 1888107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y0mNE.jpg?s=128&g=1", "display_name": "SVetter", "link": "https://stackoverflow.com/users/1888107/svetter"}, "edited": false, "score": 1, "creation_date": 1596010764, "post_id": 43770468, "comment_id": 111668689, "body": "@SVetter it  means just keep all data points that are above the regression line"}], "tags": [], "owner": {"reputation": 864, "user_id": 4956987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/065becdd47029da38c41ecd13ff0f6ae?s=128&d=identicon&r=PG&f=1", "display_name": "heyu91", "link": "https://stackoverflow.com/users/4956987/heyu91"}, "is_accepted": true, "score": 16, "last_activity_date": 1493847723, "creation_date": 1493847723, "answer_id": 43770468, "question_id": 43769906, "link": "https://stackoverflow.com/questions/43769906/how-to-calculate-the-trendline-for-stock-price/43770468#43770468", "title": "How to calculate the trendline for stock price", "body": "<pre><code>import pandas as pd\nimport quandl as qdl\nfrom scipy.stats import linregress\n\n# get AAPL 10 years data\n\ndata = qdl.get(\"WIKI/AAPL\", start_date=\"2007-01-01\", end_date=\"2017-05-01\")\n\ndata0 = data.copy()\ndata0['date_id'] = ((data0.index.date - data0.index.date.min())).astype('timedelta64[D]')\ndata0['date_id'] = data0['date_id'].dt.days + 1\n\n# high trend line\n\ndata1 = data0.copy()\n\nwhile len(data1)&gt;3:\n\n    reg = linregress(\n                    x=data1['date_id'],\n                    y=data1['Adj. High'],\n                    )\n    data1 = data1.loc[data1['Adj. High'] &gt; reg[0] * data1['date_id'] + reg[1]]\n\nreg = linregress(\n                    x=data1['date_id'],\n                    y=data1['Adj. High'],\n                    )\n\ndata0['high_trend'] = reg[0] * data0['date_id'] + reg[1]\n\n# low trend line\n\ndata1 = data0.copy()\n\nwhile len(data1)&gt;3:\n\n    reg = linregress(\n                    x=data1['date_id'],\n                    y=data1['Adj. Low'],\n                    )\n    data1 = data1.loc[data1['Adj. Low'] &lt; reg[0] * data1['date_id'] + reg[1]]\n\nreg = linregress(\n                    x=data1['date_id'],\n                    y=data1['Adj. Low'],\n                    )\n\ndata0['low_trend'] = reg[0] * data0['date_id'] + reg[1]\n\n# plot\n\ndata0['Adj. Close'].plot()\ndata0['high_trend'].plot()\ndata0['low_trend'].plot()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/7mT6L.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/7mT6L.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "is_accepted": false, "score": 3, "last_activity_date": 1493995975, "last_edit_date": 1493995975, "creation_date": 1493995515, "answer_id": 43807878, "question_id": 43769906, "link": "https://stackoverflow.com/questions/43769906/how-to-calculate-the-trendline-for-stock-price/43807878#43807878", "title": "How to calculate the trendline for stock price", "body": "<h2>Some ideas &amp; guidances:</h2>\n\n<blockquote>\n  <p>Based on your statement <em>(cit.:)<br><strong>I did some searches and thought for a whole day</strong>, there is no a really good idea on how to do.</em><br>I can make you sure, there is no universally good idea, how to solve this, but this should not make you nervous. Generations of CTAs have spent their whole lives on doing this to their individual horizons of the best efforts they could have spent on mastering this, so at least, we can learn on what they have left us as a path to follow.</p>\n</blockquote>\n\n<p><a href=\"https://i.stack.imgur.com/Es1vy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Es1vy.png\" alt=\"Trend is more an OPINION than a somewhat calculus-based line\"></a></p>\n\n<p><strong>1) DEFINE a Trend:</strong><br>\nAs an initial surprise, one ought consider a trend to be rather an exosystem-driven ( extrinsic ) feature, which is more related to an <strong>opinion</strong>, than to a TimeSeries Data ( observable ) history.</p>\n\n<p>In other words, once one realises, that the information about a trend is simply not present internally in the TimeSeries dataset, the things will start to clear up significantly.</p>\n\n<p><strong>2)</strong> given one believes strong enough into her/his Trend-identification methods,<br>one can but <strong>EXTEND such Trend-indication, as a line-of-belief, into FUTURE</strong> ( a conjecture )</p>\n\n<p><strong>3)</strong> The <strong>MARKET</strong> &amp; only The Market <strong>VALIDATES</strong> ( or ignores ) such one's \"accepted\"-belief.</p>\n\n<p><strong>4) SHARED</strong> beliefs <strong>RE-CONFIRM</strong> such a line-of-belief as a majority respected Trend-indication ( measured by Market risk exposed equity, not by a popular vote, the less by crowd-shouted or CTAs' self-promoting squeeks )</p>\n\n<hr>\n\n<h2>Does it ever work?</h2>\n\n<p>The USDCAD example screen above<sup> <a href=\"https://i.stack.imgur.com/Es1vy.png\" rel=\"nofollow noreferrer\">( <strong>zoom-out</strong> into a new window for a full-scale indepth view )</a> </sup> reflects all these, plus adds a few instances of FUNDAMENTAL EVENT, that were introduced \"across\" the technically drafted ( quantitatively supported ) principal attractors, showing a part of a real life of the flow of the river called an FX-trading.</p>\n"}], "owner": {"reputation": 538, "user_id": 4822557, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/81e75b6f2aa934d614c7410885e72bef?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Zheng", "link": "https://stackoverflow.com/users/4822557/carl-zheng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14685, "favorite_count": 15, "accepted_answer_id": 43770468, "answer_count": 2, "score": 13, "last_activity_date": 1493995975, "creation_date": 1493845105, "question_id": 43769906, "link": "https://stackoverflow.com/questions/43769906/how-to-calculate-the-trendline-for-stock-price", "title": "How to calculate the trendline for stock price", "body": "<p>I am trying to calculate and draw the trendlines for stock prices. I did some searches and thought for a whole day, there is no a really good idea on how to do.</p>\n\n<p>I have daily price history and want to find the cross point between trendline and price line.</p>\n\n<p>Could you provide some ideas or guidances?</p>\n\n<p>Thank you so much!!!</p>\n\n<p><a href=\"https://i.stack.imgur.com/wYjrP.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/wYjrP.png\" alt=\"Trendline Sample\"></a></p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 10158, "user_id": 1209921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZxrGg.gif?s=128&g=1", "display_name": "Matthias", "link": "https://stackoverflow.com/users/1209921/matthias"}, "edited": false, "score": 2, "creation_date": 1493845113, "post_id": 43769886, "comment_id": 74581193, "body": "You can&#39;t convert a list to an integer, but you can convert the string value in the list to an integer."}, {"owner": {"reputation": 19039, "user_id": 5851928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a108205f3620cbf490cb5e6ecd20ebb2?s=128&d=identicon&r=PG&f=1", "display_name": "DavidG", "link": "https://stackoverflow.com/users/5851928/davidg"}, "edited": false, "score": 2, "creation_date": 1493845176, "post_id": 43769886, "comment_id": 74581235, "body": "By using <code>int(num[0])</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1493845231, "post_id": 43769886, "comment_id": 74581275, "body": "note that you can also fail to convert <code>num = set([&#39;123&#39;])</code> :) trial and error isn&#39;t the best way to solve issues."}], "answers": [{"tags": [], "owner": {"reputation": 888, "user_id": 6367928, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/205a7c154b1fee1378aeedd6fde8038c?s=128&d=identicon&r=PG&f=1", "display_name": "WholesomeGhost", "link": "https://stackoverflow.com/users/6367928/wholesomeghost"}, "is_accepted": false, "score": 0, "last_activity_date": 1493845352, "creation_date": 1493845352, "answer_id": 43769970, "question_id": 43769886, "link": "https://stackoverflow.com/questions/43769886/cant-convert-list-string-to-integer/43769970#43769970", "title": "Can&#39;t convert list string to integer", "body": "<p>You can just do:</p>\n\n<pre><code>print(int(num[0])) \n</code></pre>\n\n<p>given that a list only has one member.</p>\n"}, {"tags": [], "owner": {"reputation": 2171, "user_id": 1190376, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/61970bb1278cba93a6060586f35241b0?s=128&d=identicon&r=PG", "display_name": "Antimony", "link": "https://stackoverflow.com/users/1190376/antimony"}, "is_accepted": false, "score": 1, "last_activity_date": 1493845616, "creation_date": 1493845616, "answer_id": 43770022, "question_id": 43769886, "link": "https://stackoverflow.com/questions/43769886/cant-convert-list-string-to-integer/43770022#43770022", "title": "Can&#39;t convert list string to integer", "body": "<p>To convert all items of a list of strings:</p>\n\n<pre><code>int_list = [int(x) for x in num]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 5717258, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/7dr1r.jpg?s=128&g=1", "display_name": "Kornelia", "link": "https://stackoverflow.com/users/5717258/kornelia"}, "is_accepted": false, "score": 0, "last_activity_date": 1493859025, "creation_date": 1493859025, "answer_id": 43772118, "question_id": 43769886, "link": "https://stackoverflow.com/questions/43769886/cant-convert-list-string-to-integer/43772118#43772118", "title": "Can&#39;t convert list string to integer", "body": "<p>Typing into Python Shell:</p>\n\n<pre><code>&gt;&gt;&gt; num=['123']\n&gt;&gt;&gt; type(num)\n&lt;class 'list'&gt;\n&gt;&gt;&gt; type(num[0])\n&lt;class 'str'&gt;\n</code></pre>\n\n<p>So as You can simply assume you cannot convert instance of a Class 'list' into an int as well as str.</p>\n"}], "owner": {"reputation": 111, "user_id": 6530753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e6f9f9bb3e43c2d70e643156354dfa4?s=128&d=identicon&r=PG&f=1", "display_name": "Ozixic", "link": "https://stackoverflow.com/users/6530753/ozixic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1194, "favorite_count": 0, "answer_count": 3, "score": -5, "last_activity_date": 1493859025, "creation_date": 1493845007, "question_id": 43769886, "link": "https://stackoverflow.com/questions/43769886/cant-convert-list-string-to-integer", "title": "Can&#39;t convert list string to integer", "body": "<p>I cant convert a list with a string to an integer.</p>\n\n<pre><code>num = ['123']\n</code></pre>\n\n<p>When I try:</p>\n\n<pre><code>print(int(num))\n</code></pre>\n\n<p>I get error:</p>\n\n<pre><code>TypeError: int() argument must be a string, a bytes-like object or a number, \nnot 'list'\n</code></pre>\n\n<p>when I try:</p>\n\n<pre><code>print(int(str(num)))\n</code></pre>\n\n<p>I get error:</p>\n\n<pre><code>ValueError: invalid literal for int() with base 10: \"['123']\"\n</code></pre>\n"}, {"tags": ["python", "multithreading", "python-3.x", "rabbitmq", "pika"], "owner": {"reputation": 4953, "user_id": 1867854, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/ea603ef86247c91331785befada5430b?s=128&d=identicon&r=PG&f=1", "display_name": "mitchkman", "link": "https://stackoverflow.com/users/1867854/mitchkman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 370, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1493844958, "creation_date": 1493844958, "question_id": 43769873, "link": "https://stackoverflow.com/questions/43769873/closing-rabbitmq-connection-blocks-thread-using-pika", "title": "Closing RabbitMQ connection blocks thread, using Pika", "body": "<p>I'm connecting to RabbitMQ from a separate thread but want to allow the thread to be stopped from another thread.</p>\n\n<pre><code>class JobListener(threading.Thread):\n    \"\"\"Listens for jobs\"\"\"\n\n    connection = None\n    channel = None\n    consuming = False\n\n    def run(self):\n        try:\n            \"\"\"Start listening for jobs\"\"\"\n            self.connection = pika.BlockingConnection(\n                pika.ConnectionParameters(host=CONN_HOST, credentials=CONN_CREDENTIALS))\n            print(\"[SLAVE/JobListener] AMQP connection established.\")\n            self.channel = self.connection.channel()\n            print(\"[SLAVE/JobListener] Channel opened.\")\n            self.channel.queue_declare(queue=QUEUE_NAME)\n            print(\"[SLAVE/JobListener] Queue declared\")\n            self.channel.basic_consume(self.on_message, queue=QUEUE_NAME, no_ack=True)\n            self.consuming = True\n            print(\"[SLAVE/JobListener] Starting consumption...\")\n            self.channel.start_consuming()\n            print(\"[SLAVE/JobListener] start_consuming() got interrupted externally.\")\n        finally:\n            self.consuming = False\n\n            print(\"[SLAVE/JobListener] JobListener thread finished.\")\n\n    def stop(self):\n        \"\"\"Stop listening for jobs\"\"\"\n        self.channel.stop_consuming()\n        print(\"[SLAVE/JobListener] Message consumption stopped.\")\n        self.channel.close()\n        print(\"[SLAVE/JobListener] Channel closed.\")\n        self.connection.close()\n        print(\"[SLAVE/JobListener] AMQP connection closed.\")\n        self.consuming = False\n\n    def on_message(self, channel, method, properties, body):\n        \"\"\"Handle incoming message\"\"\"\n        print(\"[x] Received %r \" % body)\n</code></pre>\n\n<p>From a different thread, I'm calling either <code>job_listener.start()</code> or <code>job_listener.stop()</code>.</p>\n\n<p>However, when I call <code>job_listener.stop()</code>, the inner call of <code>self.connection.close()</code> is blocked. Why?</p>\n"}, {"tags": ["python", "mysql", "cursor", "tornado"], "answers": [{"tags": [], "owner": {"reputation": 20703, "user_id": 2805033, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TasHL.jpg?s=128&g=1", "display_name": "Ben Darnell", "link": "https://stackoverflow.com/users/2805033/ben-darnell"}, "is_accepted": true, "score": 0, "last_activity_date": 1494294517, "creation_date": 1494294517, "answer_id": 43859751, "question_id": 43769830, "link": "https://stackoverflow.com/questions/43769830/tornado-mysql-how-to-get-size-of-cursor/43859751#43859751", "title": "tornado mysql: how to get size of cursor", "body": "<p>It's not always possible to iterate over a python sequence more than once, or to know how many things are in a sequence without iterating over it. So to be safe, you must copy the result into a list:</p>\n\n<pre><code>lst = list(IOLoop.current().run_sync(f))\nif lst:\n    for row in lst:\n        print(row)\n</code></pre>\n"}], "owner": {"reputation": 8220, "user_id": 3305546, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/G2mbe.png?s=128&g=1", "display_name": "Yves", "link": "https://stackoverflow.com/users/3305546/yves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 43859751, "answer_count": 1, "score": 0, "last_activity_date": 1494294517, "creation_date": 1493844817, "question_id": 43769830, "link": "https://stackoverflow.com/questions/43769830/tornado-mysql-how-to-get-size-of-cursor", "title": "tornado mysql: how to get size of cursor", "body": "<p>Here is how tornado works with MySQL:<br></p>\n\n<pre><code>from __future__ import print_function\nfrom tornado import ioloop, gen\nimport tornado_mysql\n\n\n@gen.coroutine\ndef f():\n    conn = yield tornado_mysql.connect(host='127.0.0.1', port=3306, user='user', passwd='passwd', db='mydb')\n    cur = conn.cursor()\n    yield cur.execute(query)   \n    cur.close()\n    conn.close()\n    return cur\n\nquery = \"select id from tablename\"\nfor row in ioloop.IOLoop.current().run_sync(f):\n    print(row)\n</code></pre>\n\n<p>If <code>print(row)</code> executes zero time, it means that <code>select id from tablename</code> got nothing.<br></p>\n\n<p>I just want to know how to get the size of <code>ioloop.IOLoop.current().run_sync(f)</code> immediately (something like <code>ioloop.IOLoop.current().run_sync(f).size == 0</code>) so that I can determine whether some sql query got something or not.</p>\n"}, {"tags": ["python", "arrays", "image", "numpy", "keras"], "answers": [{"tags": [], "owner": {"reputation": 6242, "user_id": 5359882, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/9cykE.jpg?s=128&g=1", "display_name": "Wilmar van Ommeren", "link": "https://stackoverflow.com/users/5359882/wilmar-van-ommeren"}, "is_accepted": false, "score": 1, "last_activity_date": 1493990431, "creation_date": 1493990431, "answer_id": 43806064, "question_id": 43769796, "link": "https://stackoverflow.com/questions/43769796/how-to-prepare-multiple-rgb-images-as-numpy-array-for-cnn/43806064#43806064", "title": "How to prepare multiple RGB images as numpy array for CNN", "body": "<p>I am assuming that you are using Theano and that your jpgs have 3 bands. In addition, your jpgs should have the same input shape as the input shape that you indicate in the first convolutional model (28x28 pixels). In that case you can reshape all your jpes with the following lines:</p>\n\n<pre><code>#create random data\nno_of_jpgs = 10\njpgs = [np.random.randint(0,255,(28,28,3)) for i in range(no_of_jpgs)]\njpgs = np.array(jpgs)\n\n#reshape data\njpgs.reshape(no_of_jpgs, jpgs.shape[1], jpgs.shape[2], 3)\n</code></pre>\n\n<p>now you have an array with: (features, n_bands, x, y)</p>\n\n<p>In addition you should change your input_shape so that it supports 3 bands:</p>\n\n<pre><code>model.add(Convolution2D(32, 3, 3, activation='relu', input_shape=(3, 28,28)))\n</code></pre>\n\n<p>If you have jpgs with a different shape or more bands, just change the input_shape values in the first convolutional layer.</p>\n"}], "owner": {"reputation": 31, "user_id": 7931563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fa33c0ffac5116d3c7932ace7555165?s=128&d=identicon&r=PG&f=1", "display_name": "Deya", "link": "https://stackoverflow.com/users/7931563/deya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1455, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493990431, "creation_date": 1493844684, "last_edit_date": 1495535484, "question_id": 43769796, "link": "https://stackoverflow.com/questions/43769796/how-to-prepare-multiple-rgb-images-as-numpy-array-for-cnn", "title": "How to prepare multiple RGB images as numpy array for CNN", "body": "<p>I want to use the code below with my own input images instead of the mnist images.  However I am having a hard time inputting several color .jpg images into a numpy array similar to the X_train used in the code below.  I have a folder called data with another folder called train that includes several images that I would like to use as my X_train.  I can generate the labels for them and one-hot encode them.  I just don't know how to make all my images go into a nice array like X_train. Help?  I did look <a href=\"https://stackoverflow.com/questions/41531843/reading-multiple-rgb-images-to-numpy-array\">here</a>, but I got a Value Error: setting an array element with a sequence when I just copied and pasted the summarized code. </p>\n\n<pre><code>import numpy as np\nnp.random.seed(123)  # for reproducibility\n\nfrom keras.models import Sequential\nfrom keras.layers import Dense, Dropout, Activation, Flatten\nfrom keras.layers import Convolution2D, MaxPooling2D\nfrom keras.utils import np_utils\nfrom keras.datasets import mnist\n\n# 4. Load pre-shuffled MNIST data into train and test sets\n(X_train, y_train), (X_test, y_test) = mnist.load_data()\n\n# 5. Preprocess input data\nX_train = X_train.reshape(X_train.shape[0], 1, 28, 28)\nX_test = X_test.reshape(X_test.shape[0], 1, 28, 28)\nX_train = X_train.astype('float32')\nX_test = X_test.astype('float32')\nX_train /= 255\nX_test /= 255\n\n# 6. Preprocess class labels\nY_train = np_utils.to_categorical(y_train, 10)\nY_test = np_utils.to_categorical(y_test, 10)\n\n# 7. Define model architecture\nmodel = Sequential()\n\nmodel.add(Convolution2D(32, 3, 3, activation='relu', input_shape=(1,28,28)))\nmodel.add(Convolution2D(32, 3, 3, activation='relu'))\nmodel.add(MaxPooling2D(pool_size=(2,2)))\nmodel.add(Dropout(0.25))\n\nmodel.add(Flatten())\nmodel.add(Dense(128, activation='relu'))\nmodel.add(Dropout(0.5))\nmodel.add(Dense(10, activation='softmax'))\n\n# 8. Compile model\nmodel.compile(loss='categorical_crossentropy',\n              optimizer='adam',\n              metrics=['accuracy'])\n\n# 9. Fit model on training data\nmodel.fit(X_train, Y_train, \n          batch_size=32, nb_epoch=10, verbose=1)\n\n# 10. Evaluate model on test data\nscore = model.evaluate(X_test, Y_test, verbose=0)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "user-interface", "pyqt", "pyqt5"], "comments": [{"owner": {"reputation": 8008, "user_id": 2085149, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/818184fc241c47dee455d3c47c94d8cb?s=128&d=identicon&r=PG", "display_name": "The Compiler", "link": "https://stackoverflow.com/users/2085149/the-compiler"}, "edited": false, "score": 0, "creation_date": 1493962659, "post_id": 43769746, "comment_id": 74634741, "body": "You might want to use a <code>QTableVIew</code> and a custom <code>QAbstractTableModel</code> or <code>QStandardItemModel</code> instead."}, {"owner": {"reputation": 638, "user_id": 7822225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d357e167b18b7e8234c4e6d0070a7ace?s=128&d=identicon&r=PG&f=1", "display_name": "laxer", "link": "https://stackoverflow.com/users/7822225/laxer"}, "reply_to_user": {"reputation": 8008, "user_id": 2085149, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/818184fc241c47dee455d3c47c94d8cb?s=128&d=identicon&r=PG", "display_name": "The Compiler", "link": "https://stackoverflow.com/users/2085149/the-compiler"}, "edited": false, "score": 0, "creation_date": 1493997587, "post_id": 43769746, "comment_id": 74656122, "body": "Thank you for the advice I will have to look into those."}], "owner": {"reputation": 638, "user_id": 7822225, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d357e167b18b7e8234c4e6d0070a7ace?s=128&d=identicon&r=PG&f=1", "display_name": "laxer", "link": "https://stackoverflow.com/users/7822225/laxer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493939908, "creation_date": 1493844531, "last_edit_date": 1493939908, "question_id": 43769746, "link": "https://stackoverflow.com/questions/43769746/gui-dynamically-adding-check-boxes-faster", "title": "GUI dynamically adding check boxes faster?", "body": "<p>I'm trying to make a GUI that will search a text file of a codebook.The user will type in keywords and the results will be printed out in a <code>QScrollArea</code> with a checkbox next to it. I have working code for all of it but my problem is, sometimes there can be close to 1200 check box's that are added and it really slows everything down and the GUI freezes for around 4 seconds. Is there a way to be able to add all of these check boxes but not have the whole thing freeze while it is adding them? I have looked at how quickly the results come back and even for over 1000 results it comes back in about 0.32 seconds. My thought is dynamically adding widgets is what is slowing it down. Thank you for any advice and your time</p>\n\n<p><strong>Code explanation</strong></p>\n\n<p>Below I have posted the function that does what I was explaining. Basically every time a letter is added in the search bar it will call the function <code>search_results</code>. I have another class called <code>codeBook</code> that does all of my actual search logic and then returns the results as a <code>list</code> and assigns it to the <code>results</code> variable. Then it loops through <code>results</code> and prints out the check boxes. </p>\n\n<p><strong>Current Working Code</strong></p>\n\n<pre><code>def search_results(self):\n\n    try:\n        start_x = 10\n        start_y = 10\n        test_input = self.findChild(QScrollArea, \"Results_choice_box\")\n        Search_data = self.findChild(QLineEdit, \"SearchBox\")\n        grid = self.findChild(QGridLayout, \"gridLayout\")\n        Search_data = Search_data.text()\n\n\n\n        if len(Search_data) &gt; 4:\n\n            search = codeBook()\n            results = search.codebook_search(Search_data,self.CodeBook)            \n            self.remove_previous_from_window()\n            for i in range(0,len(results)-1):\n                checkBox = QCheckBox(results[i], self)\n                checkBox.setObjectName(\"checkBox__\" +str(i))\n                grid.addWidget(checkBox,start_y + (i*10),start_x)\n                checkBox.stateChanged.connect(self.update_text_window)\n        else:\n            self.remove_previous_from_window()\n\n    except:\n        pass\n</code></pre>\n"}, {"tags": ["python", "import", "structure"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 6647758, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/949326d9823813eeb56b6b4605f7ea89?s=128&d=identicon&r=PG&f=1", "display_name": "Riizu", "link": "https://stackoverflow.com/users/6647758/riizu"}, "edited": false, "score": 0, "creation_date": 1493922331, "post_id": 43777697, "comment_id": 74620991, "body": "This worked, once I upgraded to Python 3.3+ . I found I was not able to get it to work in Python 2.7 unless <code>src</code> was a package as well, which felt like a mistake (since you should never import all of src)."}], "tags": [], "owner": {"reputation": 45, "user_id": 5141055, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208858547004029/picture?type=large", "display_name": "eltonlaw", "link": "https://stackoverflow.com/users/5141055/eltonlaw"}, "is_accepted": false, "score": 0, "last_activity_date": 1493886631, "creation_date": 1493886631, "answer_id": 43777697, "question_id": 43769734, "link": "https://stackoverflow.com/questions/43769734/multiple-level-nested-imports-in-python/43777697#43777697", "title": "Multiple-level nested imports in Python", "body": "<p>So it's quite easy to reference something going deeper into the directory . For example, from run.py, you would be able to use something such as:</p>\n\n<pre><code>    from src.project.config.file import foo\n</code></pre>\n\n<p>It's easy to access something in the same directory as well, say you're in src/file1.py  trying to access src/file2.py, this would just be:</p>\n\n<pre><code>    from file2 import foo\n</code></pre>\n\n<p>This works too. However if you were trying to import upward say from file.py to run.py and tried running something like this:</p>\n\n<pre><code>    from ... import run.foo\n</code></pre>\n\n<p>You would get the following error:</p>\n\n<pre><code>    ValueError: attempted relative import beyond top-level package\n</code></pre>\n\n<p>The problem is that Python is assuming that your top-level package is wherever the file being run is located. That's why you can import everything on the same level and deeper but can't get at anything above.</p>\n\n<p>An easy hack to get past this is to just append the path to your file to your <code>sys.path</code> so:</p>\n\n<pre><code>    import sys\n    sys.append('path/to/run')\n    from run import foo\n</code></pre>\n\n<p>So that's the answer to you question.</p>\n\n<p>Based on the way your project is setup though it seems like you want to make a module and that's a bit more hands on, I suggest reading the <a href=\"https://docs.python.org/3/tutorial/modules.html\" rel=\"nofollow noreferrer\">documentation</a> it's pretty good. </p>\n"}], "owner": {"reputation": 43, "user_id": 6647758, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/949326d9823813eeb56b6b4605f7ea89?s=128&d=identicon&r=PG&f=1", "display_name": "Riizu", "link": "https://stackoverflow.com/users/6647758/riizu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2029, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493886631, "creation_date": 1493844482, "question_id": 43769734, "link": "https://stackoverflow.com/questions/43769734/multiple-level-nested-imports-in-python", "title": "Multiple-level nested imports in Python", "body": "<p>I am currently working in the following project, and running into some difficulty with imports. I previously came from a Ruby background before Python, so I suspect I'm just missing something.</p>\n\n<pre><code>-src\n--project\n---actions\n----some .py files\n---config\n----some .py files\n---db\n----some .py files\n-tests\n--some .py files\n-run.py\n</code></pre>\n\n<p>Some of the actions I'd like to do are:</p>\n\n<ul>\n<li>import src/project/config/file.py from <code>run.py</code></li>\n<li>import between second level folder in <code>project</code> (ie. file in <code>actions</code> imports something from <code>config</code>)</li>\n<li>import any file into a test</li>\n</ul>\n\n<p>Would anyone have any advice on how to accomplish this?</p>\n"}, {"tags": ["python", "csv", "pandas", "dictionary"], "answers": [{"comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 3, "creation_date": 1493845705, "post_id": 43769792, "comment_id": 74581521, "body": "If the dictionaries are also valid JSON objects, then <code>json.loads</code> is about 5% faster than <code>ast.literal_eval</code>."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1493847032, "post_id": 43769792, "comment_id": 74582095, "body": "@DYZ, i&#39;ve added a timing - for that DF it was 10% faster ;)"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 2, "last_activity_date": 1493846949, "last_edit_date": 1495541398, "creation_date": 1493844677, "answer_id": 43769792, "question_id": 43769733, "link": "https://stackoverflow.com/questions/43769733/constructing-pandas-dataframe-from-csv-that-has-columns-of-dictionaries/43769792#43769792", "title": "constructing pandas dataframe from csv that has columns of dictionaries", "body": "<p><strong>Source DF:</strong></p>\n\n<pre><code>In [172]: df\nOut[172]:\n                         id                               attributes                       attr2\n0  255RSSSTCHL-QLTDGLZD-BLK  {\"color\":\"Black\",\"hardware\":\"Goldtone\"}  {\"aaa\":\"aaa\", \"bbb\":\"bbb\"}\n1   C3ACCRDNFLP-QLTDS-S-BLK         {\"size\":\"Small\",\"color\":\"Black\"}               {\"ccc\":\"ccc\"}\n</code></pre>\n\n<p><strong>Solution 1:</strong></p>\n\n<pre><code>import ast\n\nattr_cols = ['attributes','attr2']\n\ndef f(df, attr_col):\n    return df.join(df.pop(attr_col) \\\n             .apply(lambda x: pd.Series(ast.literal_eval(x))))\n\n\nfor col in attr_cols:\n    df = f(df, col)\n</code></pre>\n\n<p><strong>Solution 2:</strong> thanks to <a href=\"https://stackoverflow.com/questions/43769733/constructing-pandas-dataframe-from-csv-that-has-columns-of-dictionaries/43769792?noredirect=1#comment74581521_43769792\">@DYZ for the hint</a>:</p>\n\n<pre><code>import json\n\nattr_cols = ['attributes','attr2']\n\ndef f(df, attr_col):\n    return df.join(df.pop(attr_col) \\\n             .apply(lambda x: pd.Series(json.loads(x))))\n\nfor col in attr_cols:\n    df = f(df, col)\n</code></pre>\n\n<p><strong>Result:</strong></p>\n\n<pre><code>In [175]: df\nOut[175]:\n                         id  color  hardware   size  aaa  bbb  ccc\n0  255RSSSTCHL-QLTDGLZD-BLK  Black  Goldtone    NaN  aaa  bbb  NaN\n1   C3ACCRDNFLP-QLTDS-S-BLK  Black       NaN  Small  NaN  NaN  ccc\n</code></pre>\n\n<p><strong>Timing:</strong> for 20.000 rows DF:</p>\n\n<pre><code>In [198]: df = pd.concat([df] * 10**4, ignore_index=True)\n\nIn [199]: df.shape\nOut[199]: (20000, 3)\n\nIn [201]: %paste\ndef f_ast(df, attr_col):\n    return df.join(df.pop(attr_col) \\\n             .apply(lambda x: pd.Series(ast.literal_eval(x))))\n\ndef f_json(df, attr_col):\n    return df.join(df.pop(attr_col) \\\n             .apply(lambda x: pd.Series(json.loads(x))))\n## -- End pasted text --\n\nIn [202]: %%timeit\n     ...: for col in attr_cols:\n     ...:     f_ast(df.copy(), col)\n     ...:\n1 loop, best of 3: 33.1 s per loop\n\nIn [203]:\n\nIn [203]: %%timeit\n     ...: for col in attr_cols:\n     ...:     f_json(df.copy(), col)\n     ...:\n1 loop, best of 3: 30 s per loop\n\nIn [204]: df.shape\nOut[204]: (20000, 3)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 0, "last_activity_date": 1493851255, "creation_date": 1493851255, "answer_id": 43771136, "question_id": 43769733, "link": "https://stackoverflow.com/questions/43769733/constructing-pandas-dataframe-from-csv-that-has-columns-of-dictionaries/43771136#43771136", "title": "constructing pandas dataframe from csv that has columns of dictionaries", "body": "<p>You could embed the string parsing in the <code>pd.read_csv</code> call using the <code>converters</code> option</p>\n\n<pre><code>import pandas as pd\nfrom io import StringIO\nfrom cytoolz.dicttoolz import merge as dmerge\nfrom json import loads\n\ntxt = \"\"\"id|attributes|attr2\n255RSSSTCHL-QLTDGLZD-BLK|{\"color\":\"Black\",\"hardware\":\"Goldtone\"}|{\"aaa\":\"aaa\", \"bbb\":\"bbb\"}\nC3ACCRDNFLP-QLTDS-S-BLK|{\"size\":\"Small\",\"color\":\"Black\"}|{\"ccc\":\"ccc\"}\"\"\"\n\nconverters = dict(attributes=loads, attr2=loads)\n\ndf = pd.read_csv(StringIO(txt), sep='|', index_col='id', converters=converters)\ndf\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/8P8kE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8P8kE.png\" alt=\"enter image description here\"></a></p>\n\n<p>Then we can <code>merge</code> the dictionaries across each row and convert to a <code>pd.DataFrame</code>.  I'll use <code>cytoolz.dicttoolz.merge</code> imported as <code>dmerge</code> above.</p>\n\n<pre><code>pd.DataFrame(df.apply(dmerge, 1).values.tolist(), df.index).reset_index()\n\n                         id  aaa  bbb  ccc  color  hardware   size\n0  255RSSSTCHL-QLTDGLZD-BLK  aaa  bbb  NaN  Black  Goldtone    NaN\n1   C3ACCRDNFLP-QLTDS-S-BLK  NaN  NaN  ccc  Black       NaN  Small\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 7376051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f8820583b6a8796915c9e59d536be271?s=128&d=identicon&r=PG&f=1", "display_name": "thaneofcawdor", "link": "https://stackoverflow.com/users/7376051/thaneofcawdor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 43769792, "answer_count": 2, "score": 3, "last_activity_date": 1493851255, "creation_date": 1493844480, "question_id": 43769733, "link": "https://stackoverflow.com/questions/43769733/constructing-pandas-dataframe-from-csv-that-has-columns-of-dictionaries", "title": "constructing pandas dataframe from csv that has columns of dictionaries", "body": "<p>I have a csv that contains multiple columns filled with a single dict. There are thousands of rows. I want to pull these dicts out and make columns out of their keys and fill the cells in with their values, filling in NaN where a value is missing. So that:</p>\n\n<pre><code>   id                            attributes\n0   255RSSSTCHL-QLTDGLZD-BLK     {\"color\": \"Black\", \"hardware\": \"Goldtone\"}\n1   C3ACCRDNFLP-QLTDS-S-BLK      {\"size\": \"Small\", \"color\": \"Black\"}\n</code></pre>\n\n<p>Becomes:</p>\n\n<pre><code>   id                            size   color   hardware  \n0   255RSSSTCHL-QLTDGLZD-BLK     NaN    Black   Goldtone\n1   C3ACCRDNFLP-QLTDS-S-BLK      Small  Black   NaN\n</code></pre>\n\n<p>There are several columns like 'id' that I would like to keep untouched in the resulting DataFrame and there are several columns like 'attributes' that are filled with dicts that I want to blow out into columns. I truncated them to the example above for illustration.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "edited": false, "score": 1, "creation_date": 1493846800, "post_id": 43769771, "comment_id": 74582006, "body": "This is slick.  By default it keeps the first record if there are multiple rows with equal numbers of null values.  Thoughts on how to keep the last record?"}, {"owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "reply_to_user": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "edited": false, "score": 1, "creation_date": 1493847259, "post_id": 43769771, "comment_id": 74582177, "body": "You can reverse the two series, since <code>idxmax()</code> always get the first max index. <code>df.loc[df.count(1)[::-1].groupby(df.A[::-1]).idxmax()]</code>."}], "tags": [], "owner": {"reputation": 169523, "user_id": 4983450, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/NR2ko.jpg?s=128&g=1", "display_name": "Psidom", "link": "https://stackoverflow.com/users/4983450/psidom"}, "is_accepted": true, "score": 6, "last_activity_date": 1493844606, "creation_date": 1493844606, "answer_id": 43769771, "question_id": 43769693, "link": "https://stackoverflow.com/questions/43769693/drop-duplicates-in-a-dataframe-keeping-the-row-with-the-least-nulls/43769771#43769771", "title": "Drop Duplicates in a DataFrame Keeping the Row with the Least Nulls", "body": "<p>If you don't have duplicated index, you can do:</p>\n\n<pre><code>df.loc[df.notnull().sum(1).groupby(df.A).idxmax()]\n\n#    A    B   C   D\n#b  AA  1.0 4.0 NaN\n#d  BB  2.0 5.0 3.0\n#e  CC  3.0 6.0 4.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 2, "last_activity_date": 1493846382, "last_edit_date": 1493846382, "creation_date": 1493845148, "answer_id": 43769915, "question_id": 43769693, "link": "https://stackoverflow.com/questions/43769693/drop-duplicates-in-a-dataframe-keeping-the-row-with-the-least-nulls/43769915#43769915", "title": "Drop Duplicates in a DataFrame Keeping the Row with the Least Nulls", "body": "<p>Let's try taking the advantage that <code>count</code> doesn't count NaN:</p>\n\n<pre><code>df_out = df.groupby('A', as_index=False).apply(lambda x: x[(x.count(axis=1)==x.count(axis=1).max())])\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>df_out = df.groupby('A', as_index=False).apply(lambda x: x.loc[x.count(axis=1).idxmax()])\nprint(df_out)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>      A    B    C    D\n0 b  AA  1.0  4.0  NaN\n1 d  BB  2.0  5.0  3.0\n2 e  CC  3.0  6.0  4.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 688, "user_id": 2896045, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/693163854/picture?type=large", "display_name": "Carlo Mazzaferro", "link": "https://stackoverflow.com/users/2896045/carlo-mazzaferro"}, "edited": false, "score": 2, "creation_date": 1530287264, "post_id": 43770115, "comment_id": 89197838, "body": "Nice solution. Also, vastly more efficient than the accepted one."}], "tags": [], "owner": {"reputation": 56440, "user_id": 2285236, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ac8c2e0f71dbd8cf4543039bebf2ab3?s=128&d=identicon&r=PG&f=1", "display_name": "ayhan", "link": "https://stackoverflow.com/users/2285236/ayhan"}, "is_accepted": false, "score": 8, "last_activity_date": 1493846013, "creation_date": 1493846013, "answer_id": 43770115, "question_id": 43769693, "link": "https://stackoverflow.com/questions/43769693/drop-duplicates-in-a-dataframe-keeping-the-row-with-the-least-nulls/43770115#43770115", "title": "Drop Duplicates in a DataFrame Keeping the Row with the Least Nulls", "body": "<p>An alternative would be to count the number of items in each row, sort the DataFrame and keep the last item so that it has the highest count.</p>\n\n<pre><code>(df.assign(counts=df.count(axis=1))\n   .sort_values(['A', 'counts'])\n   .drop_duplicates('A', keep='last')\n   .drop('counts', axis=1))\nOut: \n    A    B    C    D\nb  AA  1.0  4.0  NaN\nd  BB  2.0  5.0  3.0\ne  CC  3.0  6.0  4.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 84, "user_id": 6209773, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh4.googleusercontent.com/-7VsuMCHXEto/AAAAAAAAAAI/AAAAAAAAADM/fuiVydCa5WI/photo.jpg?sz=128", "display_name": "Omniverse10", "link": "https://stackoverflow.com/users/6209773/omniverse10"}, "is_accepted": false, "score": 1, "last_activity_date": 1617724783, "creation_date": 1617724783, "answer_id": 66972206, "question_id": 43769693, "link": "https://stackoverflow.com/questions/43769693/drop-duplicates-in-a-dataframe-keeping-the-row-with-the-least-nulls/66972206#66972206", "title": "Drop Duplicates in a DataFrame Keeping the Row with the Least Nulls", "body": "<p>Sort the values for all the columns, with <code>na_position='last'</code>. Then use the <code>drop_duplicate</code> function and use <code>keep='first'</code></p>\n<pre><code>d_out = d.sort_values(by=list(d.columns),na_position='last').drop_duplicates('A',keep='first')\n</code></pre>\n<p>Output:</p>\n<pre><code>    A   B   C   D\nb   AA  1.0 4.0 NaN\nd   BB  2.0 5.0 3.0\ne   CC  3.0 NaN 4.0\n</code></pre>\n"}], "owner": {"reputation": 1663, "user_id": 6321559, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEAjx.png?s=128&g=1", "display_name": "it&#39;s-yer-boy-chet", "link": "https://stackoverflow.com/users/6321559/its-yer-boy-chet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2393, "favorite_count": 4, "accepted_answer_id": 43769771, "answer_count": 4, "score": 6, "last_activity_date": 1617724783, "creation_date": 1493844319, "question_id": 43769693, "link": "https://stackoverflow.com/questions/43769693/drop-duplicates-in-a-dataframe-keeping-the-row-with-the-least-nulls", "title": "Drop Duplicates in a DataFrame Keeping the Row with the Least Nulls", "body": "<p>With this DataFrame:</p>\n\n<pre><code>d = {'A' : pd.Series(['AA', 'AA', 'AA', 'BB','CC'], \n           index=['a', 'b', 'c', 'd','e']),\n     'B' : pd.Series([1., 2., 3.], index=['b', 'd','e']),\n     'C' : pd.Series([4., 5., 6.], index=['b', 'd', '']),\n     'D' : pd.Series([1., 2., 3.,4.], index=['a', 'c', 'd','e'])}\n\nIn[1]: pd.DataFrame(d)\n\nOut[1]: \n     A    B    C    D\n a  AA  NaN  NaN  1.0\n b  AA  1.0  4.0  NaN\n c  AA  NaN  NaN  2.0\n d  BB  2.0  5.0  3.0\n e  CC  3.0  6.0  4.0\n</code></pre>\n\n<p>I would like to drop duplicates on <code>df['A']</code> and keep the row with the fewest null values in the columns that are not being dropped <code>on</code>.  </p>\n\n<pre><code>In[2]: pd.DataFrame(d).drop_duplicates(on='A', **magical_answer=True**)\n\nOut[1]: \n     A    B    C    D\n b  AA  1.0  4.0  NaN\n d  BB  2.0  5.0  3.0\n e  CC  3.0  6.0  4.0\n</code></pre>\n\n<p>I can see a possible issue not enumerated in this example would occur if there are multiple rows with the fewest nulls, in that case it would be useful to have the <code>keep : {\u2018first\u2019, \u2018last\u2019}</code> arg.</p>\n"}, {"tags": ["python", "mysql"], "comments": [{"owner": {"reputation": 910, "user_id": 6401202, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/EeXss.jpg?s=128&g=1", "display_name": "Dogan Askan", "link": "https://stackoverflow.com/users/6401202/dogan-askan"}, "edited": false, "score": 0, "creation_date": 1493844566, "post_id": 43769665, "comment_id": 74580900, "body": "it looks it&#39;s already a date object. But you can use a list comprehension to convert a list of strings like <code>[i.strftime(%Y,%m,%d&#39;) for i in yourlist]</code>"}, {"owner": {"reputation": 13, "user_id": 7776390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4f9cc0ec575685f8055f650cb4a9fd1?s=128&d=identicon&r=PG&f=1", "display_name": "Doc.Jem", "link": "https://stackoverflow.com/users/7776390/doc-jem"}, "reply_to_user": {"reputation": 910, "user_id": 6401202, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/EeXss.jpg?s=128&g=1", "display_name": "Dogan Askan", "link": "https://stackoverflow.com/users/6401202/dogan-askan"}, "edited": false, "score": 0, "creation_date": 1493844963, "post_id": 43769665, "comment_id": 74581102, "body": "Thank you Dogan, I had already tried something similar too- I get an error <code>Could not locate column in row for column &#39;strftime&#39;</code>"}, {"owner": {"reputation": 910, "user_id": 6401202, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/EeXss.jpg?s=128&g=1", "display_name": "Dogan Askan", "link": "https://stackoverflow.com/users/6401202/dogan-askan"}, "edited": false, "score": 0, "creation_date": 1493845392, "post_id": 43769665, "comment_id": 74581370, "body": "Then you must be putting <code>strftime</code> as a query argument rather than a object method. Try to add your entire code snippet and exact error message to this question and we&#39;ll see."}], "owner": {"reputation": 13, "user_id": 7776390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4f9cc0ec575685f8055f650cb4a9fd1?s=128&d=identicon&r=PG&f=1", "display_name": "Doc.Jem", "link": "https://stackoverflow.com/users/7776390/doc-jem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 424, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493848242, "creation_date": 1493844200, "last_edit_date": 1493848242, "question_id": 43769665, "link": "https://stackoverflow.com/questions/43769665/converting-list-return-from-sqlalchemy-select-to-a-datetime-object", "title": "Converting list return from sqlalchemy select to a datetime object", "body": "<p>I'm sorry I am a noob to python and sqlalchemy so I would appreciate your help!</p>\n\n<p>I have a table <code>stock</code> in a sqlalchemy database with a column <code>price_date</code> which is formatted within the table as a <code>Date</code> variable.</p>\n\n<p>I have made a <code>select</code> query to get the 'price_date' of the last entry in the table as follows:-</p>\n\n<p><code>query = select([stock.c.price_date].order_by(stock.c.index.desc()).limit (1)</code></p>\n\n<p>This returns a list result as follows:-\n<code>[(datetime.date(2017, 5, 3),)]</code> </p>\n\n<p>I would like to convert this to a datetime.date object- so I can then compare it with other dates.</p>\n\n<p>I am having problems doing this conversion-\ntrying a <code>.strftime('%Y,%m,%d')</code> returns <code>'list' object has no attribute 'strftime'</code>\nWhat is the correct way to do this?</p>\n\n<p>Many thanks!</p>\n\n<p>EDIT- Here are the lines of my code, Ive added Dogan's suggestion which actually returns a new error-</p>\n\n<pre><code>query = select([stock.c.price_date]).order_by(stock.c.index.desc()).limit (1)\nresult = conn.execute(query)\ndata = result.fetchall()\nresult.close()\ndt = [(d.strftime('%Y,%m,%d') for d in data)]\n</code></pre>\n\n<p>and this is not producing an error but when I print dt is comes out:-</p>\n\n<p><code>[&lt;generator object &lt;genexpr&gt; at 0x6f7a5f58&gt;]</code></p>\n"}, {"tags": ["python", "nltk"], "answers": [{"tags": [], "owner": {"reputation": 4641, "user_id": 3446051, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/eb1zv.jpg?s=128&g=1", "display_name": "Code Pope", "link": "https://stackoverflow.com/users/3446051/code-pope"}, "is_accepted": true, "score": 0, "last_activity_date": 1493968154, "creation_date": 1493968154, "answer_id": 43798666, "question_id": 43769655, "link": "https://stackoverflow.com/questions/43769655/error-installing-nltk-on-win-7/43798666#43798666", "title": "Error installing NLTK on Win 7", "body": "<p>After three days of research finally I have solved the problem. So for anyone else to safe you the time I invested, do the following steps:<br>\n1. Install Anaconda 32 bit<br>\n2. After sucessfull installation run <code>python</code> and use the following command <code>import nltk</code><br>\n3. Run the command <code>nltk.download()</code> (don't forget the parantheses)  </p>\n"}], "owner": {"reputation": 4641, "user_id": 3446051, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/eb1zv.jpg?s=128&g=1", "display_name": "Code Pope", "link": "https://stackoverflow.com/users/3446051/code-pope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 43798666, "answer_count": 1, "score": 0, "last_activity_date": 1493968154, "creation_date": 1493844156, "last_edit_date": 1493849317, "question_id": 43769655, "link": "https://stackoverflow.com/questions/43769655/error-installing-nltk-on-win-7", "title": "Error installing NLTK on Win 7", "body": "<p>I try to install NLTK on my Win 7 computer. I am getting the following error message:</p>\n\n<pre><code>Python version -32 required, which was not found in the registry\n</code></pre>\n\n<p>I have done the following actions:</p>\n\n<ol>\n<li><p>I have installed Python 32 Bit version 3.6.1.</p></li>\n<li><p>On another computer I have installed Anaconda.</p></li>\n<li><p>I have done the steps described in <a href=\"https://groups.google.com/forum/#!topic/nltk-users/sNuc1vBIfUc\" rel=\"nofollow noreferrer\">this thread</a>.  </p></li>\n</ol>\n\n<p>None of them works and I am still getting the error message when running the NLTk setup. Does anyone know what I have to do?</p>\n"}, {"tags": ["python", "json", "python-3.x", "debugging"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 3, "creation_date": 1493845317, "post_id": 43769637, "comment_id": 74581331, "body": "It&#39;s not a valid JSON file; there is extra data past the end of whatever object it contains.  Look at the file in a text editor, the problem is likely to be obvious."}], "owner": {"reputation": 61, "user_id": 7648738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab76538dcaf2f0eb475ad03b9038397b?s=128&d=identicon&r=PG&f=1", "display_name": "puffballjack", "link": "https://stackoverflow.com/users/7648738/puffballjack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1970, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1502634579, "creation_date": 1493844103, "last_edit_date": 1493845335, "question_id": 43769637, "link": "https://stackoverflow.com/questions/43769637/jsondecodeerror-extra-data-occurring-when-trying-to-json-load-large-file", "title": "JSONDecodeError: Extra data occurring when trying to json.load large file", "body": "<p>I'm pulling this error when I run this string of code and I'm not sure how to interpret it. After research I still don't know the problem. Does anyone know what's going on. </p>\n\n<p>Here is the code:</p>\n\n<pre><code>import json, sys\n\nwith open('/Users/mac/Desktop/export-2017-04-28-0235-25014395ac.json', 'r',\n          encoding='utf-8') as json_data:\n    d = json.load(json_data)\nprint(d)\n</code></pre>\n\n<p>Also, I'm wondering if the JSON size is the problem. It's about 200mb.</p>\n\n<p>Here's the error now:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Traceback (most recent call last):\n  File \"/Users/mac/Desktop/untitled.py\", line 5, in &lt;module&gt;\n    d = json.load(json_data)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/json/__init__.py\", line 299, in load\n    parse_constant=parse_constant, object_pairs_hook=object_pairs_hook, **kw)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/json/__init__.py\", line 354, in loads\n    return _default_decoder.decode(s)\n  File \"/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/json/decoder.py\", line 342, in decode\n    raise JSONDecodeError(\"Extra data\", s, end)\njson.decoder.JSONDecodeError: Extra data: line 2 column 1 (char 15629)\n[Finished in 1.5s with exit code 1]\n[shell_cmd: python3 -OO -u \"/Users/mac/Desktop/untitled.py\"]\n[dir: /Users/mac/Desktop]\n[path: /usr/bin:/bin:/usr/sbin:/sbin]\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pip", "pythonpath"], "comments": [{"owner": {"reputation": 2070, "user_id": 378704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5318a95a23ff8a67c0edc171412c83a?s=128&d=identicon&r=PG", "display_name": "kiran.koduru", "link": "https://stackoverflow.com/users/378704/kiran-koduru"}, "edited": false, "score": 2, "creation_date": 1493843773, "post_id": 43769477, "comment_id": 74580493, "body": "To save you the long discussion I would suggest installing <a href=\"http://python-guide-pt-br.readthedocs.io/en/latest/dev/virtualenvs/#virtualenv\" rel=\"nofollow noreferrer\">virtualenv</a> to setup your environment for python projects. That way you can don&#39;t have to worry about the root packages vs user packages etc."}], "owner": {"reputation": 2070, "user_id": 4125080, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh5.googleusercontent.com/-wNwaT9zzxZs/AAAAAAAAAAI/AAAAAAAAAEw/DPbiLiDLzMg/photo.jpg?sz=128", "display_name": "rodgdor", "link": "https://stackoverflow.com/users/4125080/rodgdor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 285, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1493843506, "creation_date": 1493843506, "question_id": 43769477, "link": "https://stackoverflow.com/questions/43769477/sys-path-in-python3-contains-path-for-python2", "title": "sys.path in python3 contains path for python2", "body": "<p>I recently installed python3 in my MacOs.  </p>\n\n<p>Here's what <code>sys.path</code> gives me on the python3 interpreter:</p>\n\n<p><code>['', '/Library/Python/2.7/site-packages', '/Users/rdora', '/Library/Frameworks/Python.framework/Versions/3.6/lib/python36.zip', '/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6', '/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/lib-dynload', '/Library/Frameworks/Python.framework/Versions/3.6/lib/python3.6/site-packages']</code></p>\n\n<p>As you can see, the first entry belongs to the site-packages of python2.7.</p>\n\n<p>Moreover, <code>$pip3 list</code> returns:</p>\n\n<p><code>biopython (1.68)\nfisher (0.1.4)\nmpmath (0.19)\nnetworkx (1.11)\nnumpy (1.11.2)\npickleshare (0.7.4)\npip (9.0.1)\nscipy (0.18.1)\nsetuptools (28.8.0)\nsympy (1.0)</code></p>\n\n<p>but <code>$sudo pip3 list</code> gives:</p>\n\n<p><code>biopython (1.69)\nnumpy (1.12.1)\npip (9.0.1)\nscipy (0.19.0)\nsetuptools (28.8.0)</code></p>\n\n<p>The first list of packages coincide with the packages I've installed for python2 with <code>$pip install PackageName</code> and the second list with the packages I recently installed with <code>$sudo pip3 install PackageName</code>. </p>\n\n<p>Any idea why I get this different results depending on the use of <code>sudo</code>, and why is there a python2 path in <code>sys.path</code> for python3?</p>\n\n<p>Note: I installed python 2.7 using brew and python3 using the installer from <a href=\"https://www.python.org/downloads/mac-osx/\" rel=\"nofollow noreferrer\">PSF</a>. </p>\n"}, {"tags": ["python", "numpy", "image-processing", "computer-vision"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 2, "creation_date": 1493843296, "post_id": 43769398, "comment_id": 74580249, "body": "<code>&quot;is not working the way I would expect</code>&quot; Elaborate?"}, {"owner": {"reputation": 1, "user_id": 1504341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e63a7553dbc774fa2416422f5de6ab8?s=128&d=identicon&r=PG", "display_name": "Pradheep Elango", "link": "https://stackoverflow.com/users/1504341/pradheep-elango"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1493844710, "post_id": 43769398, "comment_id": 74580967, "body": "If I compute <code>z = X_train[j,...,c] - means[j, c]</code>, z looks very different than if I  do <code>X_train_norm[j,...,c] = ....</code>. The output illustrates that."}, {"owner": {"reputation": 1, "user_id": 1504341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e63a7553dbc774fa2416422f5de6ab8?s=128&d=identicon&r=PG", "display_name": "Pradheep Elango", "link": "https://stackoverflow.com/users/1504341/pradheep-elango"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1493845278, "post_id": 43769398, "comment_id": 74581302, "body": "Updated snippet with code that works"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 1504341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e63a7553dbc774fa2416422f5de6ab8?s=128&d=identicon&r=PG", "display_name": "Pradheep Elango", "link": "https://stackoverflow.com/users/1504341/pradheep-elango"}, "is_accepted": false, "score": 0, "last_activity_date": 1493846423, "creation_date": 1493846423, "answer_id": 43770208, "question_id": 43769398, "link": "https://stackoverflow.com/questions/43769398/what-is-the-correct-way-to-modify-an-ndarray-in-python-numpy/43770208#43770208", "title": "What is the correct way to modify an ndarray in Python (numpy)?", "body": "<p>Duh! It was a type issue. </p>\n\n<pre><code>X_train was uint8.\nX_train_norm = np.zeros_like(X_train,dtype='float64')\nX_train_norm = X_train_norm.astype(float)\nfor j in range(100, 102):\n   z = X_train[j,...] - means[j,]\n   print(z.shape, z.mean())\n   X_train_norm[j] = z\n   print(X_train_norm[j].shape, X_train_norm[j].mean())\n</code></pre>\n\n<p>correctly prints</p>\n\n<pre><code>(32, 32, 3) 0.0\n(32, 32, 3) 0.0\n(32, 32, 3) 0.0\n(32, 32, 3) 0.0\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 1504341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e63a7553dbc774fa2416422f5de6ab8?s=128&d=identicon&r=PG", "display_name": "Pradheep Elango", "link": "https://stackoverflow.com/users/1504341/pradheep-elango"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1493846423, "creation_date": 1493843200, "last_edit_date": 1493845400, "question_id": 43769398, "link": "https://stackoverflow.com/questions/43769398/what-is-the-correct-way-to-modify-an-ndarray-in-python-numpy", "title": "What is the correct way to modify an ndarray in Python (numpy)?", "body": "<p>I'm finding that modifying/assigning a numpy.ndarray like: \n    X[j,...,c] = something. \nis not working the way I would expect. Please see the following code snippet and the accompanying output</p>\n\n<pre><code>X_train_norm = np.zeros_like(X_train)\nfor j in range(100, 102):\n   for c in range(X_train.shape[-1]):\n      X_train_norm[j,...,c] = X_train[j,...,c] - means[j, c]\n      print(j, c, np.mean(X_train_norm[j,...,c]), np.mean(X_train[j,...,c] - means[j,c]))\n\n\n100 0 152.491210938 0.0\n100 1 153.384765625 0.0\n100 2 164.598632812 0.0\n101 0 148.837890625 0.0\n101 1 151.559570312 0.0\n101 2 162.604492188 0.0\n\n(means is a Nx3 array and X_train is a Nx32x32x3 array)\n</code></pre>\n\n<p>What is the right way to create the output?</p>\n\n<p>EDIT: I got it working with a code snippet like this:</p>\n\n<pre><code>z = X_train[j,...] - means[j,]\nif X_train_norm is None:\n    X_train_norm = np.array(z, ndmin=4)\nelse:\n    X_train_norm = np.vstack([X_train_norm, np.array(z, ndmin=4)])\n</code></pre>\n\n<p>I am sure there is a more efficient and pythonic way to do this. Thanks for looking!</p>\n"}, {"tags": ["python", "tensorflow", "serialization", "pickle", "dill"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1493843320, "post_id": 43769390, "comment_id": 74580261, "body": "Possible duplicate <a href=\"http://stackoverflow.com/questions/39286665/how-to-avoid-pickling-errors-when-sharing-objects-between-threads\" title=\"how to avoid pickling errors when sharing objects between threads\">stackoverflow.com/questions/39286665/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 4957, "user_id": 2230844, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b0e722a4823f29c56d7a97bc6500ccc?s=128&d=identicon&r=PG", "display_name": "denfromufa", "link": "https://stackoverflow.com/users/2230844/denfromufa"}, "edited": false, "score": 0, "creation_date": 1600951689, "post_id": 43826063, "comment_id": 113255605, "body": "You don&#39;t provide proof of serialization for tf tensor with dill library."}, {"owner": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "reply_to_user": {"reputation": 4957, "user_id": 2230844, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b0e722a4823f29c56d7a97bc6500ccc?s=128&d=identicon&r=PG", "display_name": "denfromufa", "link": "https://stackoverflow.com/users/2230844/denfromufa"}, "edited": false, "score": 1, "creation_date": 1601034646, "post_id": 43826063, "comment_id": 113285634, "body": "@denfromufa: That&#39;s not what the OP was asking. What more, in your opinion, should I have shown than what the OP did in the question?"}, {"owner": {"reputation": 4957, "user_id": 2230844, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b0e722a4823f29c56d7a97bc6500ccc?s=128&d=identicon&r=PG", "display_name": "denfromufa", "link": "https://stackoverflow.com/users/2230844/denfromufa"}, "edited": false, "score": 0, "creation_date": 1601041184, "post_id": 43826063, "comment_id": 113288951, "body": "I see now, sorry for confusion!"}], "tags": [], "owner": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "is_accepted": true, "score": 3, "last_activity_date": 1601041270, "last_edit_date": 1601041270, "creation_date": 1494110703, "answer_id": 43826063, "question_id": 43769390, "link": "https://stackoverflow.com/questions/43769390/why-does-pickling-a-tensorflow-tensor-fail/43826063#43826063", "title": "Why does pickling a tensorflow Tensor fail?", "body": "<p>The reason why dill can serialize these objects, but not pickle? Simple answer is that <code>pickle</code> cannot serialize most objects in python, the <code>thread.lock</code> object included.  If you want to serialize one of these objects, use an advanced serialization library like <code>dill</code>.  As to exactly why <code>pickle</code> can't, I think originally it stems from the implementation of the GIL and the <code>frame</code> object rendering some objects unserializable, and thus there was no drive to serialize everything in the language. There's always been talk about security issues stemming from serialization of all python objects, but I think that's a red herring.  Not having full language serialization limits the ability to operate in parallel computing, so hopefully <code>pickle</code> will learn from <code>dill</code> how to serialize more objects.</p>\n"}, {"comments": [{"owner": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "edited": false, "score": 1, "creation_date": 1572403404, "post_id": 58603627, "comment_id": 103545252, "body": "If you look at the traceback, it&#39;s obvious that the <code>Lock</code> object is not pickling.  Note that when you say the functions are not evaluated immediately, that means that they are put on the execution stack, which means there&#39;s a connection to the <code>frame</code> object as noted in my answer.  Both <code>dill</code> and <code>Tensor</code> objects have evolved significantly since the OP posted."}, {"owner": {"reputation": 1506, "user_id": 10359765, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F-1Wf-K-dWQ/AAAAAAAAAAI/AAAAAAAAACA/ub8XVyLGxHM/photo.jpg?sz=128", "display_name": "MoltenMuffins", "link": "https://stackoverflow.com/users/10359765/moltenmuffins"}, "reply_to_user": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "edited": false, "score": 0, "creation_date": 1572923948, "post_id": 58603627, "comment_id": 103703337, "body": "Hi @MikeMcKerns, while I&#39;m not entirely familar with the inner workings of tensorflow nor how the <code>frame</code> object is used by it, I was answering based on the docs for a tf.Tensor. A tf.Tensor in the build context doesn&#39;t actually contain the values for the tensor but rather is handle for the outputs for a tensorflow operation. As it isn&#39;t a Python object, I didn&#39;t think it made sense for it to be serializable unless it was evaluated."}, {"owner": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "edited": false, "score": 1, "creation_date": 1572960031, "post_id": 58603627, "comment_id": 103717853, "body": "That may be true... The objects that makeup a python function are different before and after the first evaluation of the function. With lazy evaluation, a python function&#39;s skeleton is composed when it&#39;s built, but the contents of it aren&#39;t handled until it&#39;s called the first time. Before that, the guts of a function are put on the execution stack (essentially on the <code>frame</code>) to be retrieved when it&#39;s called.  Also, note that essentially everything in python is an object -- a list, a file handle... basically anything that has a <code>type</code> (i.e. derives from a python class)."}, {"owner": {"reputation": 1506, "user_id": 10359765, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F-1Wf-K-dWQ/AAAAAAAAAAI/AAAAAAAAACA/ub8XVyLGxHM/photo.jpg?sz=128", "display_name": "MoltenMuffins", "link": "https://stackoverflow.com/users/10359765/moltenmuffins"}, "reply_to_user": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "edited": false, "score": 0, "creation_date": 1573032591, "post_id": 58603627, "comment_id": 103745077, "body": "@MikeMcKerns I hope you don&#39;t mind me asking additional questions because you seem really well versed with this topic. In that case wouldn&#39;t it matter that tensorflow ops make calls to the tensorflow C++ api when called?  In fact <code>frame</code> seems to be a C++ struct."}, {"owner": {"reputation": 27099, "user_id": 2379433, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/197d2417f199b0b6f951ee62e627a1d8?s=128&d=identicon&r=PG", "display_name": "Mike McKerns", "link": "https://stackoverflow.com/users/2379433/mike-mckerns"}, "edited": false, "score": 0, "creation_date": 1573047664, "post_id": 58603627, "comment_id": 103753475, "body": "Python objects are generally thin classes wrapped around C-type objects -- unless you are calling directly to one of the <code>ctypes</code> (if I&#39;m not mistaken).  So, I&#39;d have to see how the calls to the <code>tensorflow</code> C-type api are made."}], "tags": [], "owner": {"reputation": 1506, "user_id": 10359765, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-F-1Wf-K-dWQ/AAAAAAAAAAI/AAAAAAAAACA/ub8XVyLGxHM/photo.jpg?sz=128", "display_name": "MoltenMuffins", "link": "https://stackoverflow.com/users/10359765/moltenmuffins"}, "is_accepted": false, "score": 2, "last_activity_date": 1572722128, "last_edit_date": 1572722128, "creation_date": 1572337504, "answer_id": 58603627, "question_id": 43769390, "link": "https://stackoverflow.com/questions/43769390/why-does-pickling-a-tensorflow-tensor-fail/58603627#58603627", "title": "Why does pickling a tensorflow Tensor fail?", "body": "<p>I find that I am unable to reproduce the output of <a href=\"https://stackoverflow.com/users/209246/eqzx\">eqzx's</a> script and serializing fails for both <code>dill</code> and <code>pickle</code>. </p>\n\n<p>While this question is several years old, I believe the issue wasn't with pickle but rather the fact that tensors in tensorflow 1.x are not evaluated immediately. They are instead evaluated when their graph is executed. (In tensorflow 2.0 eager execution is enabled by default so you don't really have to deal with this paradigm).</p>\n\n<p>Using <code>tf.enable_eager_execution()</code> or evaluating a tensor within a <code>tf.Session()</code> context </p>\n\n<p>The following script doesn't throw an error when using either Pickle or Dill:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import tensorflow as tf\ntf.enable_eager_execution()\nimport pickle \n# import dill\n\nn = tf.zeros((1,1))\npickle.dumps(n)\n# dill.dumps(n)\n\nprint('Success')\n</code></pre>\n\n<p>Same script using Session.run() instead doesn't throw an error:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import tensorflow as tf\nimport pickle\n# import dill\n\nwith tf.Session() as sess:\n    n = sess.run(tf.zeros((1,1)))\npickle.dumps(n)\n# dill.dumps(n)\n\nprint('Success')\n</code></pre>\n"}], "owner": {"reputation": 4107, "user_id": 209246, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/adb0e3938e80137f0599ac63ac1a56b4?s=128&d=identicon&r=PG", "display_name": "eqzx", "link": "https://stackoverflow.com/users/209246/eqzx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2964, "favorite_count": 2, "accepted_answer_id": 43826063, "answer_count": 2, "score": 3, "last_activity_date": 1601041270, "creation_date": 1493843182, "last_edit_date": 1600951608, "question_id": 43769390, "link": "https://stackoverflow.com/questions/43769390/why-does-pickling-a-tensorflow-tensor-fail", "title": "Why does pickling a tensorflow Tensor fail?", "body": "<p>Here's a snippet that will succeed in serializing with <code>dill</code>, but fail with <code>pickle</code>. It is surprising that <code>Tensor</code> objects aren't natively pickleable. Is this a fundamental limitation of thread-aware Tensors, or is it just not implemented?</p>\n\n<pre><code>import dill\nimport pickle\nimport tensorflow as tf\n\ndill.dumps(tf.zeros((1,1)))\nprint(\"Dill succeeded\")\npickle.dumps(tf.zeros((1,1)))\nprint(\"Pickle succeeded\")\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ python foo.py\nDill succeeded\nTraceback (most recent call last):\n  File \"foo.py\", line 7, in &lt;module&gt;\n    pickle.dumps(tf.zeros((1,1)))\nTypeError: can't pickle _thread.lock objects\n</code></pre>\n"}, {"tags": ["python", "deep-learning", "classification", "keras", "conv-neural-network"], "comments": [{"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 0, "creation_date": 1493844326, "post_id": 43769357, "comment_id": 74580777, "body": "Duplicate of <a href=\"https://stats.stackexchange.com/questions/19048/what-is-the-difference-between-test-set-and-validation-set\" title=\"what is the difference between test set and validation set\">stats.stackexchange.com/questions/19048/&hellip;</a>"}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "edited": false, "score": 1, "creation_date": 1493844595, "post_id": 43769357, "comment_id": 74580913, "body": "In brief, a test set can&#39;t be a part of the train set because then you&#39;re effectively checking the same facts as those that your model was told to regard as true. I.e. this doesn&#39;t actually test or utilize the model&#39;s predictive power, only gives false reassurance."}], "answers": [{"tags": [], "owner": {"reputation": 20, "user_id": 11724002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a789c047aea16ca83337a8f43472d1aa?s=128&d=identicon&r=PG&f=1", "display_name": "Swathy", "link": "https://stackoverflow.com/users/11724002/swathy"}, "is_accepted": false, "score": 0, "last_activity_date": 1564057613, "creation_date": 1564057613, "answer_id": 57201952, "question_id": 43769357, "link": "https://stackoverflow.com/questions/43769357/selecting-test-and-train-sets-in-keras-for-python/57201952#57201952", "title": "Selecting test and train sets in Keras for Python", "body": "<p>Your method is not impossible, but it is impractical. A Neural Network learns from the training dataset. If you give the same data again in the test set, it will generate accurate predictions, which will have no relation with the network's predictive power. </p>\n"}], "owner": {"reputation": 29, "user_id": 7959705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51bc41276d3d38bb583e4c00e6617e8a?s=128&d=identicon&r=PG&f=1", "display_name": "karnason", "link": "https://stackoverflow.com/users/7959705/karnason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1564057613, "creation_date": 1493843056, "last_edit_date": 1493902511, "question_id": 43769357, "link": "https://stackoverflow.com/questions/43769357/selecting-test-and-train-sets-in-keras-for-python", "title": "Selecting test and train sets in Keras for Python", "body": "<p>I am trying to use Keras in Python for time series classification. </p>\n\n<p><strong>I have made a simple CNN and was wondering if it is possible to randomly select a subsection of the full data set at each epoch to serve as the test set?</strong></p>\n\n<p>I am quite new to neural nets so if there are any reasons this is impossible or impractical I would appreciate clarity.</p>\n"}, {"tags": ["python", "python-3.x", "sqlalchemy", "python-multiprocessing"], "answers": [{"comments": [{"owner": {"reputation": 3542, "user_id": 1093674, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d67b951d3ef8e9d79b4c62e3a3c52b4e?s=128&d=identicon&r=PG", "display_name": "Cristhian Boujon", "link": "https://stackoverflow.com/users/1093674/cristhian-boujon"}, "edited": false, "score": 0, "creation_date": 1493846531, "post_id": 43770159, "comment_id": 74581900, "body": "Hello @univerio, thanks for your ansewer. I will try it but do you have a better approach to suggests me? I will really apreciate it"}, {"owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "reply_to_user": {"reputation": 3542, "user_id": 1093674, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d67b951d3ef8e9d79b4c62e3a3c52b4e?s=128&d=identicon&r=PG", "display_name": "Cristhian Boujon", "link": "https://stackoverflow.com/users/1093674/cristhian-boujon"}, "edited": false, "score": 0, "creation_date": 1493849093, "post_id": 43770159, "comment_id": 74582915, "body": "@Overflow012 Not sure what you&#39;re asking. This is the standard approach. Does this not work for you?"}, {"owner": {"reputation": 453, "user_id": 6010142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/26e92880b947077a2ce7e868c5a869eb?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/6010142/ali"}, "edited": false, "score": 0, "creation_date": 1570560877, "post_id": 43770159, "comment_id": 102949060, "body": "How would I be able to run my unit tests (with an in memory database) with this approach?"}, {"owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "reply_to_user": {"reputation": 453, "user_id": 6010142, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/26e92880b947077a2ce7e868c5a869eb?s=128&d=identicon&r=PG&f=1", "display_name": "Ali", "link": "https://stackoverflow.com/users/6010142/ali"}, "edited": false, "score": 0, "creation_date": 1570673132, "post_id": 43770159, "comment_id": 102989541, "body": "@Ali They&#39;re no different. You just need to conditionally construct a different engine if you&#39;re in the test environment."}], "tags": [], "owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "is_accepted": true, "score": 3, "last_activity_date": 1493846218, "creation_date": 1493846218, "answer_id": 43770159, "question_id": 43769329, "link": "https://stackoverflow.com/questions/43769329/handling-scoped-session-across-multiple-modules-with-sqlalchemy/43770159#43770159", "title": "Handling scoped_session across multiple modules with SQLAlchemy", "body": "<p><code>scoped_session</code> should be created at the module level. For your project structure, that probably means having a separate module to house the engine and session:</p>\n\n<p><strong>db.py</strong></p>\n\n<pre><code>engine = create_engine(connection_string, echo=True)\nSession = scoped_session(sessionmaker(bind=engine))\n</code></pre>\n\n<p><strong>module1.py</strong></p>\n\n<pre><code>from db import Session\n\nclass Foo:\n    def foo_method(self):\n        session = Session()\n        session.query(...)...\n</code></pre>\n"}], "owner": {"reputation": 3542, "user_id": 1093674, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/d67b951d3ef8e9d79b4c62e3a3c52b4e?s=128&d=identicon&r=PG", "display_name": "Cristhian Boujon", "link": "https://stackoverflow.com/users/1093674/cristhian-boujon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 0, "accepted_answer_id": 43770159, "answer_count": 1, "score": 4, "last_activity_date": 1493846275, "creation_date": 1493842953, "last_edit_date": 1493846275, "question_id": 43769329, "link": "https://stackoverflow.com/questions/43769329/handling-scoped-session-across-multiple-modules-with-sqlalchemy", "title": "Handling scoped_session across multiple modules with SQLAlchemy", "body": "<p>I'm newbie using SQLAlchemy and I'm working on a complex ETL process so I did the below simplified code:</p>\n\n<p><strong>module1.py</strong></p>\n\n<pre><code>class Foo:\n    def foo_method(self):\n        # doing stuff with database\n</code></pre>\n\n<p><strong>module2.py</strong></p>\n\n<pre><code>class Bar:\n    def bar_method(self):\n        # doing stuff with database\n</code></pre>\n\n<p><strong>main_script.py</strong></p>\n\n<pre><code>from module1 import Foo\nfrom module2 import Bar\n\ndef run():\n    with Pool(processes = num_workers) as pool:\n        responses = [pool.apply_async(some_func, (param)) for param in params]\n        for response in responses:\n            response.get()\n\n\ndef some_func(param):\n    engine = create_engine(connection_string, echo=True)\n    Session = scoped_session(sessionmaker(bind=engine))\n    session = Session()    \n    # Start doing some stuff with database\n    foo = Foo()\n    foo.foo_method()\n\n    bar = Bar()\n    bar.bar_method()\n</code></pre>\n\n<p>So I have a Pool with worker process. When I call <code>main_script.run()</code> each worker creates a database session inside <code>some_func</code>. My question is how can I use the same session for each worker in module1 and module2 without passing the session by param to each method? Should I add the follow lines in each module/file?</p>\n\n<pre><code>    engine = create_engine(connection_string, echo=True)\n    Session = scoped_session(sessionmaker(bind=engine))\n    session = Session()   \n</code></pre>\n"}, {"tags": ["python", "pickle"], "comments": [{"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "edited": false, "score": 0, "creation_date": 1493843089, "post_id": 43769309, "comment_id": 74580120, "body": "(1) It&#39;s obviously integer-limit related (but i don&#39;t know the exact source) (2) I don&#39;t see some good reason to do this (3) I think you should open the target-file in binary-mode (old python 2 docs: use binary if mode &gt;= 1)."}, {"owner": {"reputation": 18542, "user_id": 47351, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/fab8190589ada198cbf1a69b981a8670?s=128&d=identicon&r=PG", "display_name": "RvdK", "link": "https://stackoverflow.com/users/47351/rvdk"}, "edited": false, "score": 3, "creation_date": 1493843235, "post_id": 43769309, "comment_id": 74580213, "body": "For data of 12GB, is pickle the right tool for the job? Or do you have to use it?"}, {"owner": {"reputation": 7081, "user_id": 789671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/feaaeb3d021966d84450cbfb24b1824a?s=128&d=identicon&r=PG", "display_name": "glibdud", "link": "https://stackoverflow.com/users/789671/glibdud"}, "edited": false, "score": 1, "creation_date": 1493843290, "post_id": 43769309, "comment_id": 74580245, "body": "What version of the pickle protocol are you using? Note the <a href=\"https://docs.python.org/3/library/pickle.html#data-stream-format\" rel=\"nofollow noreferrer\">description of protocol 4</a> (introduced in 3.4) includes &quot;adds support for very large objects&quot;."}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1493843716, "post_id": 43769309, "comment_id": 74580467, "body": "Why would you want to do this? It is certainly slower and more resource intensive than just re reading the file."}, {"owner": {"reputation": 22012, "user_id": 194586, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/1a71658d81f8a82a8122050f21bb86d3?s=128&d=identicon&r=PG", "display_name": "Nick T", "link": "https://stackoverflow.com/users/194586/nick-t"}, "edited": false, "score": 1, "creation_date": 1493843751, "post_id": 43769309, "comment_id": 74580483, "body": "Do you actually have the need to read the entire English Wikipedia into memory at once? It might be a good idea to figure out what you want to do with it then come up with a less-stressful, likely-faster solution, e.g. put individual articles into your favorite database."}, {"owner": {"reputation": 179, "user_id": 5721482, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/cd8ec9c98200df2790f79b93fde08ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Silas", "link": "https://stackoverflow.com/users/5721482/silas"}, "edited": false, "score": 0, "creation_date": 1493844216, "post_id": 43769309, "comment_id": 74580725, "body": "I&#39;m using pickle protocol 2, yes my goal is to read the whole english wiki into memory and save it as a data.pkl file"}, {"owner": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1493844660, "post_id": 43769309, "comment_id": 74580941, "body": "Pickle is not the correct format for <i>one</i> text string. Protocol 2 is limited to 2GB. Why pickle?"}, {"owner": {"reputation": 179, "user_id": 5721482, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/cd8ec9c98200df2790f79b93fde08ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Silas", "link": "https://stackoverflow.com/users/5721482/silas"}, "edited": false, "score": 0, "creation_date": 1493845105, "post_id": 43769309, "comment_id": 74581185, "body": "Because I wanted to load my data.pkl file into another script. I have done this before but I just forgot. I was able to pickle a 12gb file"}, {"owner": {"reputation": 179, "user_id": 5721482, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/cd8ec9c98200df2790f79b93fde08ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Silas", "link": "https://stackoverflow.com/users/5721482/silas"}, "reply_to_user": {"reputation": 38371, "user_id": 3555845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e06f616d9a53b1ca18287d1049a28ee?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/3555845/daniel"}, "edited": false, "score": 0, "creation_date": 1493845600, "post_id": 43769309, "comment_id": 74581468, "body": "@Daniel Actually im not trying to pickle one string but rather wiki.en.text file"}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 5721482, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/cd8ec9c98200df2790f79b93fde08ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Silas", "link": "https://stackoverflow.com/users/5721482/silas"}, "edited": false, "score": 0, "creation_date": 1493846066, "post_id": 43770116, "comment_id": 74581683, "body": "Definitely considering SQlite now or HDF5 using hickle"}], "tags": [], "owner": {"reputation": 65, "user_id": 2643386, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fJPk3.jpg?s=128&g=1", "display_name": "jvaquero", "link": "https://stackoverflow.com/users/2643386/jvaquero"}, "is_accepted": false, "score": 1, "last_activity_date": 1493846016, "creation_date": 1493846016, "answer_id": 43770116, "question_id": 43769309, "link": "https://stackoverflow.com/questions/43769309/pickling-a-very-large-text-file-12gb/43770116#43770116", "title": "Pickling a very large text file, 12Gb", "body": "<p>For this kind of serialization pickle is not a good option. Even for cPickle, information > than 4Gb can be highly problematic. Have you think on using other alternatives like SQLite or HDF5?</p>\n"}], "owner": {"reputation": 179, "user_id": 5721482, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/cd8ec9c98200df2790f79b93fde08ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Silas", "link": "https://stackoverflow.com/users/5721482/silas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 558, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1493846198, "creation_date": 1493842883, "last_edit_date": 1493846198, "question_id": 43769309, "link": "https://stackoverflow.com/questions/43769309/pickling-a-very-large-text-file-12gb", "title": "Pickling a very large text file, 12Gb", "body": "<p>I'm trying to pickle a large text file, using the following code:</p>\n\n<pre><code>import pickle\n\nfile1=open('/home/mustafa/data/wiki.en.text','r')\nobj=[file1.read()]\npickle.dump(obj,open('data.pkl','w'),2)\n</code></pre>\n\n<p>I get the following error:</p>\n\n<blockquote>\n<pre><code>struct.error: 'i' format requires -2147483648 &lt;= number &lt;= 2147483647\n</code></pre>\n</blockquote>\n\n<p>I think it might be a multiprocessing issue.</p>\n"}, {"tags": ["python", "selenium", "selenium-grid", "remotewebdriver"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 7994087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97ea606577f0d5afdcd5d463728f79cf?s=128&d=identicon&r=PG&f=1", "display_name": "Davide DG", "link": "https://stackoverflow.com/users/7994087/davide-dg"}, "is_accepted": false, "score": 1, "last_activity_date": 1499371440, "last_edit_date": 1499371440, "creation_date": 1494450895, "answer_id": 43902869, "question_id": 43769237, "link": "https://stackoverflow.com/questions/43769237/running-tests-that-use-remote-webdriver-and-connects-to-a-selenium-hub-and-node/43902869#43902869", "title": "running tests that use remote webdriver and connects to a selenium hub and node fails", "body": "<p>I was having the same error while testing selenium-extras...</p>\n\n<p>I think the latest version (3.4.1) of python-selenium has a bug when interacting with Selenium GRID (hub+node), while running fine when in standalone mode instead.</p>\n\n<p>I worked around it using <strong>older</strong> python selenium:</p>\n\n<pre><code>pip show selenium | grep -i version\nVersion: 2.48.0\n</code></pre>\n\n<p>If you installed with pip, you can uninstall it first:</p>\n\n<pre><code>pip uninstall selenium\n</code></pre>\n\n<p>then try a different version, I tried with success with the same available from APT:</p>\n\n<pre><code>pip install selenium==2.48.0\n</code></pre>\n\n<p>Maybe some later versions are working, but did not try.</p>\n\n<p>Bye!</p>\n"}], "owner": {"reputation": 59, "user_id": 3939458, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4ugMy.jpg?s=128&g=1", "display_name": "Roselle Ebarle", "link": "https://stackoverflow.com/users/3939458/roselle-ebarle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 953, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499371440, "creation_date": 1493842672, "question_id": 43769237, "link": "https://stackoverflow.com/questions/43769237/running-tests-that-use-remote-webdriver-and-connects-to-a-selenium-hub-and-node", "title": "running tests that use remote webdriver and connects to a selenium hub and node fails", "body": "<h1>Overview:</h1>\n\n<p>I am trying to run a python script that uses webdriver.Remote using CHROME  browser in an ubuntu server. I have setup a selenium grid (a hub and a node) in the server and used systemd service files to run the hub and node AND xvfb as background processes. However, running the python file gives me a: <code>selenium.common.exceptions.WebDriverException:</code></p>\n\n<h3>More Details:</h3>\n\n<ul>\n<li>Selenium server version: 3.4</li>\n<li>Chromedriver version: 2.29 (Already in /usr/local/bin - no problem running this)</li>\n<li>Geckodriver version: 0.15.0 (i am using chrome browser, but putting this here just in case you need it. </li>\n<li>i am already exporting DISPLAY :5 for xvfb</li>\n<li>checking netstat -tln shows that hub and node are running on ports 4444 and 5555</li>\n<li>i am automating the setup of the digital ocean servers via fabric. So how do i run the python script? I put the code INSIDE the digital ocean server, and run the code there</li>\n<li>please let me know if you need more details but when i check the logs of the NODE, i don't see any messages at all that a session has been created in the node</li>\n</ul>\n\n<p>I've been creating fresh droplets and spent countless hours already debugging what is wrong. </p>\n\n<h1>Code</h1>\n\n<h3>For xvfb process:</h3>\n\n<pre><code>[Unit]\nDescription=X Virtual Frame Buffer Service\nAfter=network.target\n\n[Service]\nExecStart=/usr/bin/Xvfb :5 -screen 0 1024x768x8\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n\n<h3>For selenium HUB:</h3>\n\n<pre><code>[Unit]\nDescription=Selenium Hub\nAfter=syslog.target network.target\n\n\n[Service]\nUser=root\nType=simple\nEnvironment=DISPLAY=:5\nExecStart=/usr/bin/java -Dwebdriver.gecko.driver=/usr/local/bin/geckodriver -Dwebdriver.chrome.bin=/usr/bin/google-chrome -Dwebdriver.chrome.driver=/usr/local/bin/chromedriver -jar /usr/local/bin/selenium-server-standalone.jar -role hub -log /var/log/selenium-hub/output.log\n\n\n[Install] \nWantedBy=multi-user.target\n</code></pre>\n\n<h3>And here's another one for my selenium NODE</h3>\n\n<pre><code>....\n\n[Service]\nUser=root\nType=simple\nEnvironment=DISPLAY=:5\nExecStart=/usr/bin/java -Dwebdriver.gecko.driver=/usr/local/bin/geckodriver -Dwebdriver.chrome.bin=/usr/bin/google-chrome -Dwebdriver.chrome.driver=/usr/local/bin/chromedriver -jar /usr/local/bin/selenium-server-standalone.jar -role node -hub http://localhost:4444/grid/register -log /var/log/selenium-node/output.log\n</code></pre>\n\n<h3>Here's the error i get</h3>\n\n<pre><code>selenium.common.exceptions.WebDriverException: Message: None\nStacktrace:\n     at java.util.HashMap.putMapEntries (HashMap.java:500)\n     at java.util.HashMap.putAll (HashMap.java:784)\n     at org.openqa.selenium.remote.DesiredCapabilities.&lt;init&gt; (DesiredCapabilities.java:55)\n     at org.openqa.grid.web.servlet.handler.RequestHandler.process (RequestHandler.java:104)\n....\nat org.seleniumhq.jetty9.util.thread.QueuedThreadPool.runJob (QueuedThreadPool.java:672\nat org.seleniumhq.jetty9.util.thread.QueuedThreadPool$2.run (QueuedThreadPool.java:590\nat java.lang.Thread.run (Thread.java:745)\n</code></pre>\n\n<h3>Here's how i use remote.WebDriver</h3>\n\n<pre><code>def create_driver():\n    command_executor = 'http://localhost:4444/wd/hub'  # default\n    capabilities = {\n        'browserName': 'chrome',\n        'version': '',\n        'platform': 'ANY',\n        'javascriptEnabled': 'True',\n        # 'acceptSslCerts': 'False',\n        # 'unexpectedAlertBehaviour': 'True',\n        'chromeOptions': {\n            'args': [\n                '--disable-extensions',\n                '--no-sandbox',\n                '--disable-setuid-sandbox',\n                '--verbose',\n                '--log-path=/var/log/chromedriver-full.log',\n                '--disable-impl-side-painting',\n                '--memory-model=high',\n                '--disk-cache-size=500000000',\n                '--allow-running-insecure-content',\n                '--ignore-certificate-errors',\n                '--ignore-urlfetcher-cert-requests',\n                '--disable-gpu',\n                '--disk-cache-dir=null',\n            ],\n            # 'extensions': [],\n            # 'binary': '/usr/bin/chromium-browser',\n            # 'minidumpPath': '/root/'\n        },\n        'loggingPrefs': {'driver': 'ALL', 'server': 'ALL', 'browser': 'ALL', 'performance': 'ALL'}\n    }\n    driver = webdriver.Remote(desired_capabilities=capabilities, command_executor=command_executor)\n    time.sleep(5)  # Let the user actually see something!\n    driver.implicitly_wait(60)\n    return driver\n\n\ndef main():\n    print(\"Running remote web driver test\")\n    driver = create_driver()\n    driver.get(\"https://www.google.com.ph\")\n    print(driver.current_url)\n    screenshot = driver.save_screenshot('/root/test.png')\n    print(screenshot)\n    driver.quit()\n    display.stop()\n    print(\"Success test on remote web driver\")\n\nmain()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "ctypes", "emulation", "sendinput"], "comments": [{"owner": {"reputation": 175, "user_id": 7024687, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ba0cf7c9aa6ab9090c231b50f7c795bf?s=128&d=identicon&r=PG&f=1", "display_name": "Daveyman123", "link": "https://stackoverflow.com/users/7024687/daveyman123"}, "edited": false, "score": 0, "creation_date": 1493849476, "post_id": 43769160, "comment_id": 74583056, "body": "I should mention it is a similar issue to this one: <a href=\"http://stackoverflow.com/questions/27674827/python-mouse-movement-emulation-in-games/29956868#29956868\" title=\"python mouse movement emulation in games\">stackoverflow.com/questions/27674827/&hellip;</a>  i am trying to run it inside a video game. but it also doesnt work when im using it on the desktop alone. pyautogui wont work. I am in python 3.5 and windows 10"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 8120554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cef58f5b6749fe91033f3e2053638a36?s=128&d=identicon&r=PG", "display_name": "J.K.", "link": "https://stackoverflow.com/users/8120554/j-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1496762084, "creation_date": 1496762084, "answer_id": 44393799, "question_id": 43769160, "link": "https://stackoverflow.com/questions/43769160/win32api-and-python-causing-my-screen-to-go-black-when-it-moves-the-mouse/44393799#44393799", "title": "win32api and python causing my screen to go black when it moves the mouse", "body": "<p>Had the same issue, try changing in:</p>\n\n<pre><code>ii_.mi = MouseInput(x, y, 0, 0x0001 | 0x8000, 1, ctypes.pointer(extra))\n</code></pre>\n\n<p>the fifth parameter (I.E. \"1\") to a 0, so it looks like this:</p>\n\n<pre><code>ii_.mi = MouseInput(x, y, 0, 0x0001 | 0x8000, 0, ctypes.pointer(extra))\n</code></pre>\n\n<p>Worked for me...\nGood luck</p>\n"}], "owner": {"reputation": 175, "user_id": 7024687, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ba0cf7c9aa6ab9090c231b50f7c795bf?s=128&d=identicon&r=PG&f=1", "display_name": "Daveyman123", "link": "https://stackoverflow.com/users/7024687/daveyman123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496762084, "creation_date": 1493842372, "last_edit_date": 1493917126, "question_id": 43769160, "link": "https://stackoverflow.com/questions/43769160/win32api-and-python-causing-my-screen-to-go-black-when-it-moves-the-mouse", "title": "win32api and python causing my screen to go black when it moves the mouse", "body": "<p>For whatever reason the screen is going black after the second or third movement of the mouse. First is the function i use to move the mouse:</p>\n\n<pre><code>import ctypes\nimport time\n\nSendInput = ctypes.windll.user32.SendInput\n\n\ndef MoveMouse(x, y):\n    extra = ctypes.c_ulong(0)\n    ii_ = Input_I()\n    x = int(x*(65536/ctypes.windll.user32.GetSystemMetrics(0))+1)\n    y = int(y*(65536/ctypes.windll.user32.GetSystemMetrics(1))+1)\n    ii_.mi = MouseInput(x, y, 0, 0x0001 | 0x8000, 1, ctypes.pointer(extra))\n    x = Input(ctypes.c_ulong(0), ii_)\n    ctypes.windll.user32.SendInput(1, ctypes.pointer(x), ctypes.sizeof(x))\n</code></pre>\n\n<p>this causes the screen to go black</p>\n\n<pre><code>import numpy as np\nfrom PIL import ImageGrab\nimport cv2\nimport time\nimport win32api, win32con\nfrom directkeys import PressKey,ReleaseKey, W, A, S, D, MoveMouse\nfrom grabscreen import grab_screen\nx_pad = 0\ny_pad = 0\ndef left():\n    PressKey(W)\n    PressKey(A)\n    #ReleaseKey(W)\n    ReleaseKey(D)\n    #ReleaseKey(A)\n    time.sleep(.9)\n    ReleaseKey(A)\ndef leftClick():\n    win32api.mouse_event(win32con.MOUSEEVENTF_LEFTDOWN,0,0)\n    time.sleep(.1)\n    win32api.mouse_event(win32con.MOUSEEVENTF_LEFTUP,0,0)\n    print (\"Click.\")\ndef mousePos(cord):\n    win32api.SetCursorPos((x_pad + cord[0], y_pad + cord[1]))\ndef screen_record(): \n    last_time = time.time()\n    while(True):\n        # 800x600 windowed mode for GTA 5, at the top left position of your main screen.\n        # 40 px accounts for title bar. \n        printscreen =  grab_screen(region=(0,40,800,640))\n        #rgb_im = printscreen.convert('RGB')\n        pixels =int(printscreen[300, 300, 0]) \n        print(pixels)\n        #r, g, b = printscreen.getpixel((551, 350 ))\n        if pixels == 255:\n            #if r == 127and g == 26 and b == 25:\n            x, y = win32api.GetCursorPos()\n            #x += 44\n            time.sleep(1)\n            MoveMouse(x, y)\n            time.sleep(1)\n#\n\n\n        #print (r, g, b)\nscreen_record()\n</code></pre>\n\n<p>Thanks any help would be appreciated. To summarize i need help determining why the Move Mouse function is causing my entire desktop monitor to black out until the function is no longer being used.</p>\n"}, {"tags": ["python", "class", "sorting", "class-method"], "comments": [{"owner": {"reputation": 3248, "user_id": 5707684, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/wrGFn.jpg?s=128&g=1", "display_name": "Elmex80s", "link": "https://stackoverflow.com/users/5707684/elmex80s"}, "edited": false, "score": 2, "creation_date": 1493842490, "post_id": 43769153, "comment_id": 74579820, "body": "<i>Is it possible to write a base class method to sort a list of class objects, stored as a static class variable, in a child class, by a key in a dictionary, that is an attribute of the class using sort or sorted or does a more elaborate sorting method need to be written?</i> Again please :O ?!"}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1493842573, "post_id": 43769153, "comment_id": 74579863, "body": "Could you maybe provide an example of what you expect this method to do?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1493842789, "post_id": 43769153, "comment_id": 74579979, "body": "<code>Person</code> and <code>Meeting</code> are going to share the same <code>storage</code> list this way. Is that really what you want to happen? (You probably shouldn&#39;t be making <code>storage</code> a class attribute at all; it&#39;s mutable global state and probably not any of these classes&#39; responsibility. Also, you have curly quotes. Those will cause problems.)"}], "answers": [{"tags": [], "owner": {"reputation": 84953, "user_id": 1405065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5c422b239ab1f49d3f4fcff9e5df3cf?s=128&d=identicon&r=PG", "display_name": "Blckknght", "link": "https://stackoverflow.com/users/1405065/blckknght"}, "is_accepted": true, "score": 1, "last_activity_date": 1493851054, "creation_date": 1493851054, "answer_id": 43771104, "question_id": 43769153, "link": "https://stackoverflow.com/questions/43769153/sorting-a-list-of-inherited-class-instances-by-a-class-attribute-dictionary-key/43771104#43771104", "title": "Sorting a list of inherited class instances by a class attribute dictionary Key", "body": "<p>You don't show anywhere how your objects are ending up in the <code>storage</code> list, but assuming you have that working correctly (and you're not getting a mix of objects of different subclasses all in <code>Engine.storage</code> unexpectedly), the sorting should be pretty simple. </p>\n\n<pre><code>@classmethod\ndef my_sorter(cls):\n    return sorted(cls.storage, key=lambda obj: obj.attributes[cls.mindex])\n</code></pre>\n\n<p>I'm a little skeptical though about whether your <code>Person</code> and <code>Meeting</code> classes should be subclasses of <code>Engine</code>. That doesn't seem like an IS-A relationship to me. Perhaps it would make more sense if I knew the whole project design.</p>\n"}], "owner": {"reputation": 3, "user_id": 7907064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8eb4cfa423f32421c31a3c1562b954?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Mc", "link": "https://stackoverflow.com/users/7907064/mike-mc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 43771104, "answer_count": 1, "score": 0, "last_activity_date": 1493851054, "creation_date": 1493842330, "last_edit_date": 1493848864, "question_id": 43769153, "link": "https://stackoverflow.com/questions/43769153/sorting-a-list-of-inherited-class-instances-by-a-class-attribute-dictionary-key", "title": "Sorting a list of inherited class instances by a class attribute dictionary Key", "body": "<p>Is it possible to write a base class method to sort a list of class objects, stored as a static class variable, in a child class, by a key in a dictionary, that is an attribute of the class using sort or sorted or does a more elaborate sorting method need to be written?</p>\n\n<p>I\u2019m a python noob and I\u2019ve attempted to write the \u201cmy_sorter\u201d method using sort &amp; sorted, trying at a lambda key definition, itemgetter, and attrgetter and am not sure if I am failing at the syntax to access these mixed nested structures or if it\u2019s just not possible without writing a more elaborate sorting routine to deliberately shift entries around in the list.</p>\n\n<p>Note that each child class has a static variable named \u201cmindex\u201d that identifies the \u201cprimary key\u201d of its attribute dictionary (i.e. a unique value to sort by). \nWhat would the my_sorter() method look like?</p>\n\n<pre><code>class Engine():\n    storage = []\n\n    @classmethod\n    def my_sorter(cls):\n        #sort cls.storage by cls.mindex\n\nclass Person(Engine):\n    mindex = 'Name'\n\n    def __init__(self, name):\n        self.attributes = {\n            'Name' : name,\n        }\n\nclass Meeting (Engine):\n    mindex = 'Date'\n\n    def __init__(self, date):\n        self.attributes = {\n            'Date' : date,\n        }\n</code></pre>\n"}, {"tags": ["python", "quickfix", "fix-protocol"], "answers": [{"tags": [], "owner": {"reputation": 1187, "user_id": 566941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f446a0f02b45e2fdce401b5c8fe105e4?s=128&d=identicon&r=PG", "display_name": "MD-Tech", "link": "https://stackoverflow.com/users/566941/md-tech"}, "is_accepted": true, "score": 1, "last_activity_date": 1493883581, "creation_date": 1493883581, "answer_id": 43776739, "question_id": 43769116, "link": "https://stackoverflow.com/questions/43769116/where-to-find-the-associated-tag-numbers-for-the-quickfix-variables/43776739#43776739", "title": "Where to find the associated tag numbers for the quickfix variables?", "body": "<p>The <a href=\"http://www.fixtradingcommunity.org/\" rel=\"nofollow noreferrer\">FIX protocol standard website</a>, particularly <a href=\"http://www.fixtradingcommunity.org/FIXimate/FIXimate3.0/\" rel=\"nofollow noreferrer\">FIXimate</a>, has all that you need to identify tag numbers and message layouts. There are also some example ROEs and other help and FIX standards information available there.</p>\n"}], "owner": {"reputation": 1623, "user_id": 3453901, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/595dbc4484c4e615143ab807a3df288a?s=128&d=identicon&r=PG&f=1", "display_name": "Alex F", "link": "https://stackoverflow.com/users/3453901/alex-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 43776739, "answer_count": 1, "score": 0, "last_activity_date": 1493883581, "creation_date": 1493842217, "question_id": 43769116, "link": "https://stackoverflow.com/questions/43769116/where-to-find-the-associated-tag-numbers-for-the-quickfix-variables", "title": "Where to find the associated tag numbers for the quickfix variables?", "body": "<p>I have the documentation for all fields in quickfix <a href=\"http://www.quickfixengine.org/quickfix/doc/html/configuration.html\" rel=\"nofollow noreferrer\">http://www.quickfixengine.org/quickfix/doc/html/configuration.html</a>. </p>\n\n<p>However, there is no indication of what integer tags each field corresponds to. I have an idea of a few fields from examples I have found, such as </p>\n\n<pre><code>import quickfix as fix\norder = fix.Message()\n\nquantity = 100\norder.setField(38, quantity)\n</code></pre>\n\n<p>Can anyone point me to some documentation on this?</p>\n"}, {"tags": ["python", "opencv", "matplotlib", "histogram"], "answers": [{"tags": [], "owner": {"reputation": 3528, "user_id": 3373942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lU4jQ.jpg?s=128&g=1", "display_name": "Robbie", "link": "https://stackoverflow.com/users/3373942/robbie"}, "is_accepted": true, "score": 1, "last_activity_date": 1563943701, "last_edit_date": 1563943701, "creation_date": 1493877628, "answer_id": 43774970, "question_id": 43769098, "link": "https://stackoverflow.com/questions/43769098/weird-histogram-result-from-cv2/43774970#43774970", "title": "Weird histogram result from cv2", "body": "<p>I replicated your code using numpy to make sure it wasn't cv2 that was doing something wrong. Although it may look unusual the results are actually consistent with the image.</p>\n\n<p>Firstly, take a look at the image intensity (pixel values) in each channel:<a href=\"https://i.stack.imgur.com/GFFcl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GFFcl.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can see the flowers have a very high value in the blue channel (close to 255), and the background has a very high value in the red channel. Not very many pixels have a high value in the green channel.</p>\n\n<p>Computing the histogram of pixel valuesfor each channel I get the same result:<a href=\"https://i.stack.imgur.com/oZvNT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oZvNT.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the code:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom PIL import Image\nimport numpy as np\n\nim = np.array(Image.open('im.jpg'))\nchannelNames=['R','G','B']\n\nfig, axes = plt.subplots(1,3,figsize=(10,4))\nfor channel, ax in enumerate(axes):\n    imshow=ax.imshow(im.T[channel].T, cmap=plt.cm.gray, vmin=0, vmax=255)\n    ax.set_xticks(())\n    ax.set_yticks(())\n    ax.set_title(channelNames[channel])\n\nfig.colorbar(imshow,fraction=0.06, pad=0.07, shrink=1.5)\nfig.tight_layout()\nfig.subplots_adjust(right=0.9)\nfig.show()\n\nfig, ax = plt.subplots(1, figsize=(6,4))\nfor channel in range(3):\n    cts = np.bincount(im.T[channel].flatten())\n    bins=np.arange(0,256,1)\n    ax.plot(bins, cts, c=channelNames[channel])\nax.set_xlabel('Bins')\nax.set_ylabel('# of Pixels')\nfig.show()\n</code></pre>\n"}], "owner": {"reputation": 667, "user_id": 5307891, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a60c2ec567d8f6e250a34b639a918116?s=128&d=identicon&r=PG&f=1", "display_name": "Decay42", "link": "https://stackoverflow.com/users/5307891/decay42"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 1, "accepted_answer_id": 43774970, "answer_count": 1, "score": 1, "last_activity_date": 1563943701, "creation_date": 1493842125, "question_id": 43769098, "link": "https://stackoverflow.com/questions/43769098/weird-histogram-result-from-cv2", "title": "Weird histogram result from cv2", "body": "<p>So, I grabbed some sample code for generating and plotting a color histogram off here: <a href=\"http://www.pyimagesearch.com/2014/01/22/clever-girl-a-guide-to-utilizing-color-histograms-for-computer-vision-and-image-search-engines/\" rel=\"nofollow noreferrer\">http://www.pyimagesearch.com/2014/01/22/clever-girl-a-guide-to-utilizing-color-histograms-for-computer-vision-and-image-search-engines/</a></p>\n\n<pre><code>from matplotlib import pyplot as plt\nimport cv2, os, glob\n\nos.chdir(r\"....pathname....\")\nfor file in glob.glob(\"*.jpg\"):\n    image = cv2.imread(file)\n    chans = cv2.split(image)\n    colors = (\"b\", \"g\", \"r\")\n    plt.figure()\n    plt.title(\"'Flattened' Color Histogram\")\n    plt.xlabel(\"Bins\")\n    plt.ylabel(\"# of Pixels\")\n\n    for (chan, color) in zip(chans, colors):\n        hist = cv2.calcHist([chan], [0], None, [256], [0, 256])\n        cv2.normalize(hist,hist,8,cv2.NORM_MINMAX)\n        plt.plot(hist, color = color)\n        plt.xlim([0,256])\n    plt.savefig(file + '_hist.jpg')\n</code></pre>\n\n<p>And for most images, I get a decent looking histogram like this for example:<a href=\"https://i.stack.imgur.com/YbZk4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YbZk4.png\" alt=\"\"></a></p>\n\n<p>However for some images, I get a basically flat histogram with the end going to \"extreme\" values, like this:\n<a href=\"https://i.stack.imgur.com/bDoeR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bDoeR.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the original image, which produced the latter histogram: <a href=\"https://i.imgur.com/xerRgy1.jpg\" rel=\"nofollow noreferrer\">http://i.imgur.com/xerRgy1.jpg</a></p>\n\n<p>Can anyone explain what is happening and why?</p>\n"}, {"tags": ["python", "teradata"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 1, "creation_date": 1493842311, "post_id": 43769075, "comment_id": 74579712, "body": "If you have any missing values (<code>NULL</code>) in any column, the column data type is changed to float. If this is your case, you can either ignore the <code>.0</code> or eliminate the missing values and cast the column back to int with <code>.astype(int)</code>."}, {"owner": {"reputation": 25, "user_id": 7886270, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OxhM0UF826k/AAAAAAAAAAI/AAAAAAAAABs/V0-JFHTmwu4/photo.jpg?sz=128", "display_name": "Ishwor Bhatta", "link": "https://stackoverflow.com/users/7886270/ishwor-bhatta"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1493901599, "post_id": 43769075, "comment_id": 74606527, "body": "@DYZ Thank you for your suggestion. I was able to fix this issue by adding coerce_float = False parameter in the read_sql_query method."}], "owner": {"reputation": 25, "user_id": 7886270, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OxhM0UF826k/AAAAAAAAAAI/AAAAAAAAABs/V0-JFHTmwu4/photo.jpg?sz=128", "display_name": "Ishwor Bhatta", "link": "https://stackoverflow.com/users/7886270/ishwor-bhatta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1493842019, "creation_date": 1493842019, "question_id": 43769075, "link": "https://stackoverflow.com/questions/43769075/python-code-producing-decimal-values-for-int-fields", "title": "Python code producing decimal values for int fields", "body": "<p>I am trying to retrieve data from teradata database and save it in flatfile. But when I run the SQL query in SQL editor everything looks as expected. But when I run the same query from Python script the integer fields are converted to floating point decimals with .0. Can anybody suggest me how to get rid of this.\nHere is my connection code in python</p>\n\n<pre><code>uda = teradata.UdaExec(appName = \"Sample\", version = \"1.0\", logConsole=False)\nself.conn = uda.connect(method = 'odbc', system = self.db, username = self.user, password = self.pwd)\nresult =  pd.read_sql_query(sql, self.conn)\n</code></pre>\n"}, {"tags": ["python", "pickle"], "comments": [{"owner": {"reputation": 7081, "user_id": 789671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/feaaeb3d021966d84450cbfb24b1824a?s=128&d=identicon&r=PG", "display_name": "glibdud", "link": "https://stackoverflow.com/users/789671/glibdud"}, "edited": false, "score": 1, "creation_date": 1493842182, "post_id": 43769071, "comment_id": 74579649, "body": "Could you provide a more complete example that we could test?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1493842219, "post_id": 43769071, "comment_id": 74579667, "body": "That sounds like you&#39;re just wrong about the protocol=2 thing. Maybe the pickle doesn&#39;t actually come from the code you think it does."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1493843078, "post_id": 43769071, "comment_id": 74580115, "body": "Note that a file can have more than one pickle in it. Maybe your file has multiple pickles in a mixture of protocols."}, {"owner": {"reputation": 13598, "user_id": 3990607, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0ZRtB.png?s=128&g=1", "display_name": "patapouf_ai", "link": "https://stackoverflow.com/users/3990607/patapouf-ai"}, "edited": false, "score": 0, "creation_date": 1505378103, "post_id": 43769071, "comment_id": 79391124, "body": "if you are using python 3 to pickle, on top of using protocol=2 make sure that you specify the encoding (idealy both during dump and load)"}], "answers": [{"tags": [], "owner": {"reputation": 471, "user_id": 2781787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf44e757ce0716f515a3d1c7cde2e98b?s=128&d=identicon&r=PG&f=1", "display_name": "Julien Nyambal", "link": "https://stackoverflow.com/users/2781787/julien-nyambal"}, "is_accepted": false, "score": 0, "last_activity_date": 1498865214, "creation_date": 1498865214, "answer_id": 44855960, "question_id": 43769071, "link": "https://stackoverflow.com/questions/43769071/valueerror-unsupported-pickle-protocol-3-python-2-7-cannot-load-pickle-file-e/44855960#44855960", "title": "ValueError: unsupported pickle protocol: 3, python 2.7 cannot load pickle file even dump with protocol = 2", "body": "<p>It is more likely to be a pickle file created with python 3. I guess you mainly use python 2.7. Either you re-create the pickle file with python 2.7 or you use python 3.</p>\n"}], "owner": {"reputation": 1, "user_id": 3501625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/461af0889ba554f6ffc61933ebe948e4?s=128&d=identicon&r=PG&f=1", "display_name": "tinkerxiao", "link": "https://stackoverflow.com/users/3501625/tinkerxiao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2628, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498865214, "creation_date": 1493842001, "question_id": 43769071, "link": "https://stackoverflow.com/questions/43769071/valueerror-unsupported-pickle-protocol-3-python-2-7-cannot-load-pickle-file-e", "title": "ValueError: unsupported pickle protocol: 3, python 2.7 cannot load pickle file even dump with protocol = 2", "body": "<p>I have used:\npickle.dump(data, f, protocol=2)</p>\n\n<p>And try to open the pickle file with python 2.7, however, it still pop up with the error \"ValueError: unsupported pickle protocol: 3\".  </p>\n"}, {"tags": ["python", "jupyter-notebook", "ipywidgets"], "comments": [{"owner": {"reputation": 1, "user_id": 8327933, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/96945630380249ea361367c4358ce97e?s=128&d=identicon&r=PG", "display_name": "Eugene Belogay", "link": "https://stackoverflow.com/users/8327933/eugene-belogay"}, "edited": false, "score": 0, "creation_date": 1500412929, "post_id": 43769068, "comment_id": 77323200, "body": "Answered here (bad news -- ipywidgets not supported by PyCharm): <a href=\"https://stackoverflow.com/questions/41106767/pycharm-notebook-widget-javascript-not-detected\" title=\"pycharm notebook widget javascript not detected\">stackoverflow.com/questions/41106767/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 7373, "user_id": 5200329, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/da6b14c198704567425703ff9507dfb4?s=128&d=identicon&r=PG", "display_name": "Bhishan Poudel", "link": "https://stackoverflow.com/users/5200329/bhishan-poudel"}, "edited": false, "score": 2, "creation_date": 1493997322, "post_id": 43798073, "comment_id": 74655936, "body": "Enabling notebook extension is SUCCESSFUL, but , however, the module widgets still gives the error: Widget Javascript not detected.  It may not be installed or enabled properly. Can we also solve WIDGETS problem???"}, {"owner": {"reputation": 2552, "user_id": 209532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee229a93c4ff7bb994a2465bba852670?s=128&d=identicon&r=PG", "display_name": "chjortlund", "link": "https://stackoverflow.com/users/209532/chjortlund"}, "reply_to_user": {"reputation": 7373, "user_id": 5200329, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/da6b14c198704567425703ff9507dfb4?s=128&d=identicon&r=PG", "display_name": "Bhishan Poudel", "link": "https://stackoverflow.com/users/5200329/bhishan-poudel"}, "edited": false, "score": 0, "creation_date": 1494424343, "post_id": 43798073, "comment_id": 74823039, "body": "Your not just missing the ipywidgets? Try installing it by running: pip install ipywidgets"}, {"owner": {"reputation": 402, "user_id": 7726586, "user_type": "registered", "profile_image": "https://graph.facebook.com/1841176686137013/picture?type=large", "display_name": "maria", "link": "https://stackoverflow.com/users/7726586/maria"}, "edited": false, "score": 1, "creation_date": 1603234602, "post_id": 43798073, "comment_id": 113971688, "body": "Thanks @chjortlund, <code>pip install ipywidgets </code> helped for me"}], "tags": [], "owner": {"reputation": 2552, "user_id": 209532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee229a93c4ff7bb994a2465bba852670?s=128&d=identicon&r=PG", "display_name": "chjortlund", "link": "https://stackoverflow.com/users/209532/chjortlund"}, "is_accepted": true, "score": 7, "last_activity_date": 1493966146, "creation_date": 1493966146, "answer_id": 43798073, "question_id": 43769068, "link": "https://stackoverflow.com/questions/43769068/jupyter-notebook-widget-javascript-not-detected/43798073#43798073", "title": "Jupyter notebook: Widget Javascript not detected", "body": "<p>Run the following command:\n<code>jupyter nbextension enable --py --sys-prefix widgetsnbextension</code>, then restart the kernel in Jupyter should do the trick.</p>\n"}, {"tags": [], "owner": {"reputation": 9, "user_id": 5658715, "user_type": "registered", "profile_image": "https://graph.facebook.com/866158533501437/picture?type=large", "display_name": "Lucas Igor Balthazar", "link": "https://stackoverflow.com/users/5658715/lucas-igor-balthazar"}, "is_accepted": false, "score": 0, "last_activity_date": 1501700084, "creation_date": 1501700084, "answer_id": 45468885, "question_id": 43769068, "link": "https://stackoverflow.com/questions/43769068/jupyter-notebook-widget-javascript-not-detected/45468885#45468885", "title": "Jupyter notebook: Widget Javascript not detected", "body": "<p>I faced the same problem and after running the command:<code>jupyter nbextension enable --py --sys-prefix widgetsnbextension</code>, the prompt should appear: </p>\n\n<pre><code>&gt;Enabling notebook extension jupyter-js-widgets/extension...\n</code></pre>\n\n<p><code>- Validating: ok</code>.\nRefresh your jupyter notebook and the widgets worked.</p>\n"}, {"comments": [{"owner": {"reputation": 411, "user_id": 3855204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc8dd3ae72efc2e4ea47a10ba065bfd?s=128&d=identicon&r=PG&f=1", "display_name": "dcatteeu", "link": "https://stackoverflow.com/users/3855204/dcatteeu"}, "edited": false, "score": 1, "creation_date": 1510160135, "post_id": 46289589, "comment_id": 81319816, "body": "Indeed, the conda-forge version of <code>ipywidgets</code> is newer and this solves the problem in my case."}], "tags": [], "owner": {"reputation": 28720, "user_id": 4561314, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6ad3771ba6e8e823dbcae710c1cde4da?s=128&d=identicon&r=PG", "display_name": "stackoverflowuser2010", "link": "https://stackoverflow.com/users/4561314/stackoverflowuser2010"}, "is_accepted": false, "score": 4, "last_activity_date": 1506064632, "last_edit_date": 1506064632, "creation_date": 1505777474, "answer_id": 46289589, "question_id": 43769068, "link": "https://stackoverflow.com/questions/43769068/jupyter-notebook-widget-javascript-not-detected/46289589#46289589", "title": "Jupyter notebook: Widget Javascript not detected", "body": "<p>I used the following commands successfully with Jupyter, Mac OS, Python 3.6, and Anaconda. The first command gets the latest version of ipywidgets at this time (version 7.0).</p>\n\n<pre><code>conda install -c conda-forge ipywidgets\n\njupyter nbextension enable --py widgetsnbextension\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 486, "user_id": 5733896, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/96b1ac167b0b2b17a12b3dfcce37ce61?s=128&d=identicon&r=PG&f=1", "display_name": "Adarsh Trivedi", "link": "https://stackoverflow.com/users/5733896/adarsh-trivedi"}, "is_accepted": false, "score": 0, "last_activity_date": 1506424304, "creation_date": 1506424304, "answer_id": 46424883, "question_id": 43769068, "link": "https://stackoverflow.com/questions/43769068/jupyter-notebook-widget-javascript-not-detected/46424883#46424883", "title": "Jupyter notebook: Widget Javascript not detected", "body": "<p>Probably the best way, at least it worked for me: reinstall the ipywidgets and widgetsextension and it should work.</p>\n\n<pre><code>pip uninstall ipywidgets widgetsnbextension\n\npip install ipywidgets\n\njupyter nbextension enable --py --sys-prefix widgetsnbextension\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1064, "user_id": 576437, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8260d2749892ba15584fdd566717361a?s=128&d=identicon&r=PG", "display_name": "Vikash Madhow", "link": "https://stackoverflow.com/users/576437/vikash-madhow"}, "is_accepted": false, "score": 1, "last_activity_date": 1518443679, "creation_date": 1518443679, "answer_id": 48748141, "question_id": 43769068, "link": "https://stackoverflow.com/questions/43769068/jupyter-notebook-widget-javascript-not-detected/48748141#48748141", "title": "Jupyter notebook: Widget Javascript not detected", "body": "<p>This solved it for me: </p>\n\n<pre><code>jupyter labextension install @jupyter-widgets/jupyterlab-manager\n</code></pre>\n"}], "owner": {"reputation": 7373, "user_id": 5200329, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/da6b14c198704567425703ff9507dfb4?s=128&d=identicon&r=PG", "display_name": "Bhishan Poudel", "link": "https://stackoverflow.com/users/5200329/bhishan-poudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10593, "favorite_count": 2, "accepted_answer_id": 43798073, "answer_count": 5, "score": 8, "last_activity_date": 1612973298, "creation_date": 1493841991, "last_edit_date": 1612973298, "question_id": 43769068, "link": "https://stackoverflow.com/questions/43769068/jupyter-notebook-widget-javascript-not-detected", "title": "Jupyter notebook: Widget Javascript not detected", "body": "<p>Question:\nI installed python3 and jupyter notebook using pip3 in MacOs 10.9.<br>\nWhen I try to run the widget it gives error that there is no javascript widget.\nI have python3 and R kernels installed in Jupyter-notebook.  </p>\n\n<p>Code:  </p>\n\n<pre><code>from ipywidgets import widgets\nfrom IPython.display import display\ntext = widgets.Text()\ndisplay(text)\ntext.on_submit('hello')\n</code></pre>\n\n<p>Error:  </p>\n\n<pre><code>Widget Javascript not detected.  It may not be installed or enabled properly.  \n</code></pre>\n\n<p>Attempts:  </p>\n\n<pre><code>sudo -H pip3 install ipywidgets  \nsudo -H pip3 install -upgrade ipywidgets  \njupyter nbextension enable --py widgetsnbextension\n# restarted the computer. \n</code></pre>\n\n<p>The last command gives error. </p>\n\n<pre><code>[EnableNBExtensionApp] CRITICAL | Bad config encountered during initialization:\n[EnableNBExtensionApp] CRITICAL | Unrecognized flag: '--py'\n</code></pre>\n\n<p>Note that in mac I have jupyter-nbextension command but the command:  </p>\n\n<pre><code>jupyter-nbextension enable --py widgetsnbextension \n</code></pre>\n\n<p>does not work either.</p>\n\n<p>But <code>jupyter nbextension enable widgetsnbextension</code> gives no error and also does nothing. The same error is popped in if I run the code.  </p>\n\n<p>Also,</p>\n\n<pre><code>import ipywidgets\nipywidgets.__version__\n</code></pre>\n\n<p>gives '6.0.0'.  </p>\n\n<p>Some notes:  </p>\n\n<pre><code>which jupyter  \njupyter is /Library/Frameworks/Python.framework/Versions/3.5/bin/jupyter\nwhich jupyter-notebook\njupyter-notebook is /Library/Frameworks/Python.framework/Versions/3.5/bin/jupyter-notebook\n</code></pre>\n\n<p>Related links:  </p>\n\n<pre><code>https://github.com/jupyter-widgets/ipywidgets/issues/541    \nhttps://github.com/jupyter/help/issues/32    \nhttps://github.com/jupyter/help/issues/131    \nhttps://github.com/binder-project/binder/issues/83   \n</code></pre>\n\n<p>How can I install widgets?<br>\nDo I need to install java separately ? </p>\n"}, {"tags": ["python", "machine-learning", "scikit-learn"], "comments": [{"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1493861210, "post_id": 43769010, "comment_id": 74585941, "body": "Which version of scikit are you using? In the latest the upper TyperError should not come. Also its confusing, you want the gridSearch inside pipeline, or pipeline inside GridSearch. Looking at the first line, its latter. Then you should use <code>best_estimator_</code> on gridSearchCV object, not on pipeline object as you have done here. You should post your complete code and full stack trace of TypeError above?"}, {"owner": {"reputation": 1236, "user_id": 2507010, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1749123b303c2aa92523a3b9462238a6?s=128&d=identicon&r=PG", "display_name": "Larissa Leite", "link": "https://stackoverflow.com/users/2507010/larissa-leite"}, "reply_to_user": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1493889082, "post_id": 43769010, "comment_id": 74597626, "body": "Thank you for your answer @VivekKumar. I am using 0.18.1. Sorry, it&#39;s just that I used the same variable name since these parts are in different functions. I edited it so that it doesn&#39;t get confusing. The pipeline is actually inside the <code>GridSearchCV</code>, but when I print <code>best_estimator_</code>, it gives me the pipeline"}], "answers": [{"comments": [{"owner": {"reputation": 1236, "user_id": 2507010, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1749123b303c2aa92523a3b9462238a6?s=128&d=identicon&r=PG", "display_name": "Larissa Leite", "link": "https://stackoverflow.com/users/2507010/larissa-leite"}, "edited": false, "score": 0, "creation_date": 1493898038, "post_id": 43780701, "comment_id": 74603894, "body": "You mean not supply the expected? I did this and the error is gone, but when I print this <code>evaluator(gs.best_estimator_, test_data, predicted)</code> I get 1.0, which doesn&#39;t make sense..."}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "reply_to_user": {"reputation": 1236, "user_id": 2507010, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1749123b303c2aa92523a3b9462238a6?s=128&d=identicon&r=PG", "display_name": "Larissa Leite", "link": "https://stackoverflow.com/users/2507010/larissa-leite"}, "edited": false, "score": 1, "creation_date": 1493898456, "post_id": 43780701, "comment_id": 74604227, "body": "@LarissaLeite Sorry, use the <code>expected</code> instead of <code>predicted</code>. I have changed the code."}], "tags": [], "owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "is_accepted": true, "score": 0, "last_activity_date": 1493898427, "last_edit_date": 1493898427, "creation_date": 1493894725, "answer_id": 43780701, "question_id": 43769010, "link": "https://stackoverflow.com/questions/43769010/use-scoring-function-used-by-gridsearchcv-to-get-predictions/43780701#43780701", "title": "Use scoring function used by GridSearchCV to get predictions", "body": "<p>Yes, thats the desired behaviour of GridSearchCV. The pipeline object returned from the <code>gs.best_estimator_</code> is already fitted on the whole <code>train_data</code> with best parameters found in grid search. </p>\n\n<p>You need to send that pipeline object into the <code>evaluator</code>. But your current usage of <code>evaluator</code> is wrong.</p>\n\n<p>What the scorer_ from make_scorer does it takes the test data, make predictions on it and then calculate score by comparing it with actual data.</p>\n\n<p>Hence, its signature is:</p>\n\n<p><code>scorer(estimator, X_test, y_test)</code></p>\n\n<p>But you are trying to use it as:</p>\n\n<pre><code>evaluator(expected, predicted)\n</code></pre>\n\n<p>It will not work because:</p>\n\n<ol>\n<li>It does not satisfy the signature of scorer</li>\n<li>It needs the X data, not the predicted y data.</li>\n</ol>\n\n<p>So, if you already have the actual and predicted values of the data, you can simply use the:</p>\n\n<p><code>accuracy_score(expected, predicted)</code></p>\n\n<p>If you want to use the <code>scorer_</code> (your <code>evaluator</code>), then you should not supply it the <code>predicted</code>, instead supply the <code>test_data</code> (from which the <code>predicted</code> is got)</p>\n\n<pre><code>evaluator(gs.best_estimator_, test_data, expected)\n</code></pre>\n"}], "owner": {"reputation": 1236, "user_id": 2507010, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/1749123b303c2aa92523a3b9462238a6?s=128&d=identicon&r=PG", "display_name": "Larissa Leite", "link": "https://stackoverflow.com/users/2507010/larissa-leite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 895, "favorite_count": 0, "accepted_answer_id": 43780701, "answer_count": 1, "score": 0, "last_activity_date": 1493898427, "creation_date": 1493841774, "last_edit_date": 1493889130, "question_id": 43769010, "link": "https://stackoverflow.com/questions/43769010/use-scoring-function-used-by-gridsearchcv-to-get-predictions", "title": "Use scoring function used by GridSearchCV to get predictions", "body": "<p>I am creating dynamic pipelines in scikit-learn and I set the scoring function as a parameter string on the <code>GridSearchCV</code>:</p>\n\n<p><code>gs = GridSearchCV(pipeline, grid, scoring='accuracy')</code> </p>\n\n<p>However, when I try to get the scoring function that was used in order to evaluate the predictions, this is what I get:</p>\n\n<pre><code>  File \"app/experimenter/sklearn/sklearn-dask-tests.py\", line 127, in run_pipeline\n    print(evaluator(expected, predicted))\nTypeError: __call__() takes at least 4 arguments (3 given)\n</code></pre>\n\n<p>This is the code:</p>\n\n<pre><code>gs.fit(train_data, train_target)\n\npredicted = gs.predict(test_data)\n\nevaluator = gs.scorer_\n\nprint(evaluator(expected, predicted))\n</code></pre>\n\n<p>So from what I have seen the problem is that the evaluator is in fact <code>make_scorer(accuracy_score)</code>. I guess it would be possible to get <code>print(evaluator(expected, predicted))</code> to work if I add the estimator as the first parameter, but how do I get it properly from the pipeline?</p>\n\n<p>Cause when I do <code>gs.best_estimator_</code> I get this:</p>\n\n<pre><code>Pipeline(steps=[('mapper', DataFrameMapper(default=False, df_out=False,\n        features=[('Sex', LabelBinarizer(neg_label=0, pos_label=1, sparse_output=False))],\n        sparse=False)), ('DecisionTree', DecisionTreeClassifier(class_weight=None, criterion='gini', max_depth=3,\n            max_features=1, max_...      min_weight_fraction_leaf=0.0, presort=False, random_state=None,\n            splitter='best'))])\n</code></pre>\n"}, {"tags": ["python", "server", "webserver", "multiprocessing", "python-multiprocessing"], "answers": [{"comments": [{"owner": {"reputation": 6259, "user_id": 2816571, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/8S452.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/2816571/paul"}, "edited": false, "score": 0, "creation_date": 1504182676, "post_id": 43769479, "comment_id": 78922253, "body": "It appears that the question wants to avoid the use of threads and instead use multiprocessing"}], "tags": [], "owner": {"reputation": 434, "user_id": 7959703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3yDhc.jpg?s=128&g=1", "display_name": "yusuf.oguntola", "link": "https://stackoverflow.com/users/7959703/yusuf-oguntola"}, "is_accepted": false, "score": 0, "last_activity_date": 1493843510, "creation_date": 1493843510, "answer_id": 43769479, "question_id": 43768974, "link": "https://stackoverflow.com/questions/43768974/how-to-implement-multi-processing-in-a-web-server-python/43769479#43769479", "title": "How to implement multi-processing in a web-server (python)?", "body": "<p>Use a new thread to accept connection from clients</p>\n"}], "owner": {"reputation": 61, "user_id": 4822684, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZLjc8KUZpuk/AAAAAAAAAAI/AAAAAAAAADU/kKri8HM-N0o/photo.jpg?sz=128", "display_name": "jitesh pabla", "link": "https://stackoverflow.com/users/4822684/jitesh-pabla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 467, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1493843510, "creation_date": 1493841627, "last_edit_date": 1493842671, "question_id": 43768974, "link": "https://stackoverflow.com/questions/43768974/how-to-implement-multi-processing-in-a-web-server-python", "title": "How to implement multi-processing in a web-server (python)?", "body": "<p>I have been following a tutorial to write a python webserver: <a href=\"http://ruslanspivak.com/lsbaws-part3/\" rel=\"nofollow noreferrer\">ruslanspivak.com/lsbaws-part3/</a>.</p>\n\n<p>There is a simple code for python web-server that is supposed to handle requests using multiprocessing </p>\n\n<pre><code>import os\nimport socket\nimport time\n\nSERVER_ADDRESS = (HOST, PORT) = '', 8888\nREQUEST_QUEUE_SIZE = 15\n\nfile = open(\"test.html\", \"r\")\nhttp_response = file.read()\n\ndef handle_request(client_connection):\n    request = client_connection.recv(1024)\n\n    print(\n        'Child PID: {pid}. Parent PID {ppid}'.format(\n            pid=os.getpid(),\n            ppid=os.getppid(),\n        )\n    )\n    #print(request.decode())\n    '''http_response = b\"\"\"\\\nHTTP/1.1 200 OK\n\nHello, World!\n\"\"\"'''\n    client_connection.sendall(http_response)\n    time.sleep(15)\n\n\ndef serve_forever():\n    listen_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n    listen_socket.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)\n    listen_socket.bind(SERVER_ADDRESS)\n    listen_socket.listen(REQUEST_QUEUE_SIZE)\n    print('Serving HTTP on port {port} ...'.format(port=PORT))\n    print('Parent PID (PPID): {pid}\\n'.format(pid=os.getpid()))\n\n    while True:\n        client_connection, client_address = listen_socket.accept()\n        #print \"parent is now accepting new clients\"\n        pid = os.fork()\n        if pid == 0:  # child\n            #print \"aaaaaaaa\", pid, \"aaaaaaa\"\n            listen_socket.close()  # close child copy\n            handle_request(client_connection)\n            client_connection.close()\n            print (\"child {pid} exits\".format(pid=os.getpid()))\n            os._exit(0)  # child exits here\n\n        else:  # parent\n            print \"parent process continues\"\n            client_connection.close()  # close parent copy and loop over\n\nif __name__ == '__main__':\n    serve_forever()\n</code></pre>\n\n<p>This is supposed to return a simple webpage to the client and wait for 15 seconds to close the connection.\nDuring the 15 seconds, other clients should still be able to connect and receive the webpage, but it seems like the other clients have to wait for the previous child process to end in order to do that.</p>\n\n<p>How can I implement true multi-processing where the at least 4-5 clients can get the webpage without waiting for the previous child process to end?</p>\n\n<p>(of course I can remove the sleep() function, but that would not truly solve the problem)</p>\n"}, {"tags": ["python", "encode"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 3, "creation_date": 1493841775, "post_id": 43768961, "comment_id": 74579429, "body": "You can execute different code depending on the version: <code>if sys.version_info[0]==2: .... else: ....</code>"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1493842135, "post_id": 43768961, "comment_id": 74579609, "body": "What does <code>.decode(&#39;utf-8&#39;).encode(&#39;utf-8&#39;)</code> achieve? Doesn&#39;t look very meaningful."}, {"owner": {"reputation": 190, "user_id": 3936509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd6c3d893542310a77fe4dda99523683?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3936509/alex"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1493843543, "post_id": 43768961, "comment_id": 74580383, "body": "@StefanPochmann I think encode without decode uses default ascii codec, that&#39;s why it can&#39;t decode <code>0xd0</code>. In general it works without encode in python2 but doesn&#39;t work in python3"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1493845090, "post_id": 43768961, "comment_id": 74581177, "body": "@Alex Sorry, I don&#39;t understand. What is <code>&quot;{}\\n&quot;.format(cyrillic_text)</code>? Can you give a small example? I.e., some <code>s</code> so that <code>s.decode(&#39;utf-8&#39;).encode(&#39;utf-8&#39;)</code> isn&#39;t the same as <code>s</code>?"}, {"owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "edited": false, "score": 0, "creation_date": 1493845857, "post_id": 43768961, "comment_id": 74581592, "body": "Where does <code>cyrillic_text</code> come from?  Is a string literal?  User input?  Text read from a file?"}, {"owner": {"reputation": 190, "user_id": 3936509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd6c3d893542310a77fe4dda99523683?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3936509/alex"}, "edited": false, "score": 0, "creation_date": 1493874857, "post_id": 43768961, "comment_id": 74589529, "body": "it comes from a text file with data encoded in utf-8"}, {"owner": {"reputation": 190, "user_id": 3936509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd6c3d893542310a77fe4dda99523683?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3936509/alex"}, "reply_to_user": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1493888623, "post_id": 43768961, "comment_id": 74597321, "body": "I managed to get Unicode data from the file using <code>codecs.open(&quot;path&quot;, &quot;r&quot;, encoding=&#39;utf-8&#39;)</code>, but it failes down the road in third party modules on <code>b&#39;utf string&#39;.split(&#39;python3 unicode separator&#39;)</code> line,  so I have to use @DYZ&#39;s solution for now"}], "answers": [{"tags": [], "owner": {"reputation": 76876, "user_id": 287586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tB5AG.png?s=128&g=1", "display_name": "dan04", "link": "https://stackoverflow.com/users/287586/dan04"}, "is_accepted": true, "score": 0, "last_activity_date": 1493842424, "creation_date": 1493842424, "answer_id": 43769172, "question_id": 43768961, "link": "https://stackoverflow.com/questions/43768961/how-to-encode-string-into-utf-8-for-both-python-2-x-and-3-x/43769172#43769172", "title": "How to encode string into utf-8 for both Python 2.x and 3.x", "body": "<p>Use <a href=\"https://docs.python.org/2/howto/unicode.html#the-unicode-type\" rel=\"nofollow noreferrer\"><code>unicode</code> strings</a> (instead of the 8-bit <code>str</code>) throughout your Python 2.x code.  This is equivalent to Python 3.x <code>str</code> type.  Then, you can simply use <code>the_string.encode('UTF-8')</code> to get byte string (of type <code>str</code> in 2.x, but <code>bytes</code> in 3.x).</p>\n\n<p>If you don't need to support Python 3.0 through 3.2, you can prefix all your string literals with <code>u</code>.  In Python 2.x, this creates a <code>unicode</code> string, and in 3.3+ <a href=\"https://www.python.org/dev/peps/pep-0414/\" rel=\"nofollow noreferrer\">it's supported for backwards compatibility</a> but does nothing.</p>\n"}], "owner": {"reputation": 190, "user_id": 3936509, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd6c3d893542310a77fe4dda99523683?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/3936509/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4610, "favorite_count": 0, "accepted_answer_id": 43769172, "answer_count": 1, "score": 0, "last_activity_date": 1493842424, "creation_date": 1493841554, "last_edit_date": 1495540028, "question_id": 43768961, "link": "https://stackoverflow.com/questions/43768961/how-to-encode-string-into-utf-8-for-both-python-2-x-and-3-x", "title": "How to encode string into utf-8 for both Python 2.x and 3.x", "body": "<p>I'm trying to write a formatted string containing Cyrillic symbols (in utf-8) to Unix pipe:</p>\n\n<pre><code>sort_proc.stdin.write(\"{}\\n\".format(cyrillic_text).decode('utf-8').encode('utf-8'))\n</code></pre>\n\n<p>I had to encode because <code>'str' does not support the buffer interface</code> and decode because <code>'ascii' codec can't decode byte 0xd0</code>. So this code works in Python 2.7 as expected. However Python 3.4 says <code>'str' object has no attribute 'decode'</code> as string literals in python3 are already \"decoded\". So I know how to fix it for each version separately but don't know how to fix for both. I've found a solution related to reloading sys module and setting setdefaultencoding, however this article <a href=\"https://stackoverflow.com/questions/3828723/why-should-we-not-use-sys-setdefaultencodingutf-8-in-a-py-script\">why should we NOT use sys.setdefaultencoding</a> says it's just a hack and shouldn't be used at all. Please post the most pythonic way of doing these things. Thanks.</p>\n"}, {"tags": ["python", "command-line"], "comments": [{"owner": {"reputation": 19091, "user_id": 6246044, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YMZMd.jpg?s=128&g=1", "display_name": "Rory Daulton", "link": "https://stackoverflow.com/users/6246044/rory-daulton"}, "edited": false, "score": 0, "creation_date": 1493841846, "post_id": 43768949, "comment_id": 74579464, "body": "May I assume you do not actually want that particular function <code>printlist</code> but just some function that will print the result of the command you pass through the command line?"}, {"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1493841849, "post_id": 43768949, "comment_id": 74579467, "body": "It is possible (with <code>exec()</code>), but very undesirable."}], "answers": [{"tags": [], "owner": {"reputation": 2486, "user_id": 7665691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8a29f95ebd154c0c084345b1729fc11?s=128&d=identicon&r=PG&f=1", "display_name": "Michael H.", "link": "https://stackoverflow.com/users/7665691/michael-h"}, "is_accepted": false, "score": 1, "last_activity_date": 1493841894, "creation_date": 1493841894, "answer_id": 43769037, "question_id": 43768949, "link": "https://stackoverflow.com/questions/43768949/pass-a-code-of-python-in-a-command-line/43769037#43769037", "title": "Pass a code of Python in a command line", "body": "<p>Save the code</p>\n\n<pre><code>import sys\nprint(sys.argv)\n</code></pre>\n\n<p>as <code>filename.py</code>, then run <code>python filename.py Hi there!</code> and see what happens ;)</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 5717258, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/7dr1r.jpg?s=128&g=1", "display_name": "Kornelia", "link": "https://stackoverflow.com/users/5717258/kornelia"}, "edited": false, "score": 0, "creation_date": 1493842996, "post_id": 43769055, "comment_id": 74580082, "body": "Well, I need to make some operation on this list, I don&#39;t need it like a String. I&#39;m not sure if it is possible."}, {"owner": {"reputation": 2800, "user_id": 2193134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7007988a388d47491a921503d30cca07?s=128&d=identicon&r=PG&f=1", "display_name": "TehTris", "link": "https://stackoverflow.com/users/2193134/tehtris"}, "edited": false, "score": 0, "creation_date": 1493844031, "post_id": 43769055, "comment_id": 74580622, "body": "it will always go into the program as a string. Its up to you to convert it to whatever else you need."}, {"owner": {"reputation": 37, "user_id": 5717258, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/7dr1r.jpg?s=128&g=1", "display_name": "Kornelia", "link": "https://stackoverflow.com/users/5717258/kornelia"}, "edited": false, "score": 0, "creation_date": 1493849881, "post_id": 43769055, "comment_id": 74583199, "body": "But I can&#39;t execute this part of code adding as an argument in command line?"}], "tags": [], "owner": {"reputation": 1587, "user_id": 3520965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31fd95e9573fb19ea05a8f928d905f39?s=128&d=identicon&r=PG&f=1", "display_name": "Dalvenjia", "link": "https://stackoverflow.com/users/3520965/dalvenjia"}, "is_accepted": false, "score": 1, "last_activity_date": 1493841957, "creation_date": 1493841957, "answer_id": 43769055, "question_id": 43768949, "link": "https://stackoverflow.com/questions/43768949/pass-a-code-of-python-in-a-command-line/43769055#43769055", "title": "Pass a code of Python in a command line", "body": "<p>I'm not sure if I understand correctly, but the <code>sys</code> module has the attribute <code>argv</code> that is a list of all the arguments passed in the command line.</p>\n\n<p>test.py:</p>\n\n<pre><code>#!/usr/bin/env python\nimport sys\n\nfor argument in sys.argv:\n    print(argument)\n</code></pre>\n\n<p>This example will print every argument passed to the script, take in mind that the first element <code>sys.argv[0]</code> will always be the name of the script.</p>\n\n<pre><code>$ ./test.py hello there\n./test.py\nhello\nthere\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 185, "user_id": 2908254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b26bd518b9a4758d501debba1770f8e?s=128&d=identicon&r=PG", "display_name": "Gregory Morse", "link": "https://stackoverflow.com/users/2908254/gregory-morse"}, "is_accepted": false, "score": 0, "last_activity_date": 1604812730, "creation_date": 1604812730, "answer_id": 64735050, "question_id": 43768949, "link": "https://stackoverflow.com/questions/43768949/pass-a-code-of-python-in-a-command-line/64735050#64735050", "title": "Pass a code of Python in a command line", "body": "<p>There are two options to send short code snippets similar to what you can do via the <code>timeit</code> module or certain other <code>-m</code> module option functionality and these are:</p>\n<p>You can use either the <code>-c</code> option of Python e.g.:\n<code>python -c &quot;&lt;code here&gt;&quot;</code></p>\n<p>Or you could use piping such as:\n<code>echo &lt;code here&gt; | python</code></p>\n<p>You can combine multiple statements using the <code>;</code> semicolon statement separator.  However if you use a <code>:</code> such as with <code>while</code> or <code>for</code> or <code>def</code> or <code>if</code> then you cannot use the <code>;</code> so there may be limited options.  Possibly some clever ways around this limitation but I have yet to see them.</p>\n"}], "owner": {"reputation": 37, "user_id": 5717258, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/7dr1r.jpg?s=128&g=1", "display_name": "Kornelia", "link": "https://stackoverflow.com/users/5717258/kornelia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1604812730, "creation_date": 1493841530, "last_edit_date": 1493843077, "question_id": 43768949, "link": "https://stackoverflow.com/questions/43768949/pass-a-code-of-python-in-a-command-line", "title": "Pass a code of Python in a command line", "body": "<p>Is it possible to somehow convert string which I pass via command line e.g</p>\n\n<pre><code>python myfile.py \"s = list(range(1000))\"\n</code></pre>\n\n<p>into module? And then...</p>\n\n<pre><code>#myfile.py\ndef printlist(s):\n   print(s)\n</code></pre>\n\n<p>?</p>\n\n<p>Something like a timeit module, but with my own code.</p>\n\n<pre><code>python -m timeit -s \"s = list(range(1000))\" \"sorted(s)\" \n</code></pre>\n"}, {"tags": ["python", "tkinter", "tkinter-canvas"], "comments": [{"owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1493845820, "post_id": 43768894, "comment_id": 74581573, "body": "Why do you want a Canvas rather than a Label to show the image? Do you need the image to be scrollable?"}, {"owner": {"reputation": 1601, "user_id": 5900093, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac3f1e0e212aabaefe01f2eaeb4b408f?s=128&d=identicon&r=PG&f=1", "display_name": "Bird", "link": "https://stackoverflow.com/users/5900093/bird"}, "reply_to_user": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "edited": false, "score": 0, "creation_date": 1493846115, "post_id": 43768894, "comment_id": 74581709, "body": "It doesn&#39;t need to be scrollable, I just need to get the click locations. I&#39;ve never used the Label widget, so I don&#39;t really have a good answer to your question, but I&#39;m open to suggestions."}], "answers": [{"comments": [{"owner": {"reputation": 1601, "user_id": 5900093, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac3f1e0e212aabaefe01f2eaeb4b408f?s=128&d=identicon&r=PG&f=1", "display_name": "Bird", "link": "https://stackoverflow.com/users/5900093/bird"}, "edited": false, "score": 0, "creation_date": 1493852410, "post_id": 43770585, "comment_id": 74583967, "body": "That works great, thanks! I was using the ImageTk part to open png files, which doesn&#39;t seem to work with just the regular tkinter. Great to learn a new tkinter widget, too."}], "tags": [], "owner": {"reputation": 11466, "user_id": 2229945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cfbf044eccb8835deec653dae32d56e7?s=128&d=identicon&r=PG", "display_name": "Novel", "link": "https://stackoverflow.com/users/2229945/novel"}, "is_accepted": true, "score": 3, "last_activity_date": 1493848219, "creation_date": 1493848219, "answer_id": 43770585, "question_id": 43768894, "link": "https://stackoverflow.com/questions/43768894/loop-through-images-with-tkinter-canvas-in-python/43770585#43770585", "title": "Loop through images with Tkinter canvas in Python", "body": "<p>It would be a lot easier if you can use a Label instead: </p>\n\n<p>Also, note there is no reason to use ImageTk since loading an image from a file is built into tkinter as <code>Tkinter.PhotoImage</code>. </p>\n\n<p>Also, I converted your wildcard import to a normal import; wildcard imports are messy and against PEP8. </p>\n\n<p>Lastly, I don't know what you mean with 'on closing', so I added a button to advance to the next image. This will throw a StopIteration error on the last image that you will need to handle. </p>\n\n<pre><code>import Tkinter as tk\nfrom tkFileDialog import askdirectory\nimport os\n\n# Create empty list for coordinate arrays to be appended to\ncoords = []\n\n# Function to be called when mouse is clicked\ndef save_coords(event):\n    click_loc = [event.x, event.y]\n    print \"you clicked on\", click_loc\n    coords.append(click_loc)\n\n# Function to load the next image into the Label\ndef next_img():\n    img_label.img = tk.PhotoImage(file=next(imgs))\n    img_label.config(image=img_label.img)\n\nroot = tk.Tk()\n\n# Choose multiple images\nimg_dir = askdirectory(parent=root, initialdir=\"D:/Temp/\", title='Choose folder')\nos.chdir(img_dir)\nimgs = iter(os.listdir(img_dir))\n\nimg_label = tk.Label(root)\nimg_label.pack()\nimg_label.bind(\"&lt;Button-1&gt;\",save_coords)\n\nbtn = tk.Button(root, text='Next image', command=next_img)\nbtn.pack()\n\nnext_img() # load first image\n\nroot.mainloop()\n\nprint coords\n</code></pre>\n"}], "owner": {"reputation": 1601, "user_id": 5900093, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac3f1e0e212aabaefe01f2eaeb4b408f?s=128&d=identicon&r=PG&f=1", "display_name": "Bird", "link": "https://stackoverflow.com/users/5900093/bird"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4543, "favorite_count": 2, "accepted_answer_id": 43770585, "answer_count": 1, "score": 1, "last_activity_date": 1493848219, "creation_date": 1493841352, "last_edit_date": 1495542363, "question_id": 43768894, "link": "https://stackoverflow.com/questions/43768894/loop-through-images-with-tkinter-canvas-in-python", "title": "Loop through images with Tkinter canvas in Python", "body": "<p>I'm trying to write a script that will allow the user to select a folder with images and then save the coordinates of the user's clicks on each image. To do this I would like to display each image file on a Tkinter canvas, save click locations, then when the canvas is closed, open the next image.</p>\n\n<p>I can get this to work for a single image with the code below (adapted from <a href=\"https://stackoverflow.com/questions/5501192/how-to-display-picture-and-get-mouse-click-coordinate-on-it\">this question</a>). I was hoping the <code>for File in imgs</code> loop would keep opening the next image, but it does not. I suspect I need a <code>on_closing</code> function to tell Tkinter to open another image.  </p>\n\n<p>What's the proper way to have Tkinter open the next image after closing an image?</p>\n\n<pre><code>from Tkinter import *\nfrom tkFileDialog import askopenfilenames, askopenfilename, askdirectory\nfrom PIL import Image, ImageTk\nimport cv2\nimport numpy as np\nimport os\n\nif __name__ == \"__main__\":\n    root = Tk()\n\n    #setting up a tkinter canvas with scrollbars\n    frame = Frame(width=1920, height=1080, bd=2, relief=SUNKEN)\n    frame.grid_rowconfigure(0, weight=1)\n    frame.grid_columnconfigure(0, weight=1)\n    xscroll = Scrollbar(frame, orient=HORIZONTAL)\n    xscroll.grid(row=1, column=0, sticky=E+W)\n    yscroll = Scrollbar(frame)\n    yscroll.grid(row=0, column=1, sticky=N+S)\n    canvas = Canvas(frame, bd=0, xscrollcommand=xscroll.set, yscrollcommand=yscroll.set)\n    canvas.config(width=1920, height=1080)\n    canvas.grid(row=0, column=0, sticky=N+S+E+W)\n    xscroll.config(command=canvas.xview)\n    yscroll.config(command=canvas.yview)\n    frame.pack(fill=BOTH,expand=1)\n\n    # Function to be called when mouse is clicked\n    def save_coords(event):\n        coords.append([event.x, event.y])\n\n    # def on_closing():\n        # Open the next image file\n\n\n    # Create empty list for coordinate arrays to be appended to\n    coords = []\n\n    # Choose multiple images\n    img_dir = askdirectory(parent=root, initialdir=\"D:/Temp/\", title='Choose folder')\n    os.chdir(img_dir)\n    imgs = os.listdir(img_dir)\n    #imgs = askopenfilenames(parent=root, initialdir=\"D:/Temp/cvCal/\", title='Choose images')\n    for File in imgs:\n        img = ImageTk.PhotoImage(Image.open(File).resize((1280,720), Image.ANTIALIAS))\n        canvas.create_image(0,0,image=img,anchor=\"nw\")\n        canvas.config(scrollregion=canvas.bbox(ALL))\n        canvas.bind(\"&lt;Button 1&gt;\",save_coords)\n        # on_closing()...\n\n    root.mainloop()\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "imap", "imaplib"], "comments": [{"owner": {"reputation": 1514, "user_id": 195383, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/286ea349060105e596aec349da029a00?s=128&d=identicon&r=PG", "display_name": "Menno Smits", "link": "https://stackoverflow.com/users/195383/menno-smits"}, "edited": false, "score": 0, "creation_date": 1493900446, "post_id": 43768833, "comment_id": 74605651, "body": "You might also want to consider IMAPClient (<a href=\"https://pypi.python.org/pypi/IMAPClient\" rel=\"nofollow noreferrer\">pypi.python.org/pypi/IMAPClient</a>). It makes working with UIDs somewhat easier."}], "answers": [{"tags": [], "owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1493844408, "creation_date": 1493844408, "answer_id": 43769715, "question_id": 43768833, "link": "https://stackoverflow.com/questions/43768833/how-to-delete-a-specific-email-using-only-uid/43769715#43769715", "title": "How to delete a specific email using only uid", "body": "<p>If you're using UIDs, you need to use UID store:</p>\n\n<pre><code>mail.uid('STORE', uid,'+FLAGS','\\\\Deleted')\nmail.expunge()\n</code></pre>\n\n<p>Don't mix message sequence numbers (fetch, store, search) with UIDs (uid fetch, uid store, uid search).  You might delete the wrong message all together!</p>\n"}], "owner": {"reputation": 2581, "user_id": 5460959, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/d8b5d07d4ff33671bc4031bd32cd8c59?s=128&d=identicon&r=PG&f=1", "display_name": "McFizz", "link": "https://stackoverflow.com/users/5460959/mcfizz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493844408, "creation_date": 1493841148, "question_id": 43768833, "link": "https://stackoverflow.com/questions/43768833/how-to-delete-a-specific-email-using-only-uid", "title": "How to delete a specific email using only uid", "body": "<p>I'm trying to delete an email remotely using python's imap4 library and the email's uid value. I have tried using this code but it hasn't worked. </p>\n\n<pre><code>mail.store(uid,'+FLAGS','\\\\Deleted')\nmail.expunge()\n</code></pre>\n\n<p>How do I delete this particular email?</p>\n"}, {"tags": ["python", "scapy", "mac-address", "arp", "data-link-layer"], "comments": [{"owner": {"reputation": 8390, "user_id": 1404049, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/vkpuK.png?s=128&g=1", "display_name": "Fallenreaper", "link": "https://stackoverflow.com/users/1404049/fallenreaper"}, "edited": false, "score": 0, "creation_date": 1493844607, "post_id": 43768827, "comment_id": 74580923, "body": "So, you are curious about just changing <code>dst=</code>?   I mean i have it as a hardcoded string, but if i extract them, i would see no reason why it couldnt be globally changed.  I use that in my get_mac_address calls though, as i use the static string to help determining the target ip address&#39; mac addr.  When doing arp poisoning, i will pass in a target mac, which correlates to the tar ip address.   I think you would want to have it be a proper pairing"}], "owner": {"reputation": 551, "user_id": 5151362, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10153500806707156/picture?type=large", "display_name": "Lew Wei Hao", "link": "https://stackoverflow.com/users/5151362/lew-wei-hao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2151, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1493841126, "creation_date": 1493841126, "question_id": 43768827, "link": "https://stackoverflow.com/questions/43768827/scapy-is-it-possible-to-manually-set-the-destination-mac-address-of-arp-packets", "title": "Scapy: Is it possible to manually set the destination MAC address of ARP packets?", "body": "<p>Using python with Scapy, I have no problems changing the MAC address destination of the packets using the following sample code:</p>\n\n<pre><code>packet = Ether(dst=[MAC address])/IP()......\n</code></pre>\n\n<p>However, when I try to do the same with ARP like this:</p>\n\n<pre><code>packet = Ether(dst=[MAC address])/ARP(......\n</code></pre>\n\n<p>The packet does not get sent out. Is it because ARP is already a layer 2 protocol? If thats the case, is there any possibility of manually changing the destination MAC of an ARP packet?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 337, "user_id": 7763266, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d6023a72f2ffb848a4fd547f094e64a5?s=128&d=identicon&r=PG&f=1", "display_name": "Gravel", "link": "https://stackoverflow.com/users/7763266/gravel"}, "edited": false, "score": 0, "creation_date": 1493841480, "post_id": 43768899, "comment_id": 74579255, "body": "My current working directory contains more than 100 subdirectories, and each subdirectory contains the 3 files to merge in the dataframes. I can not specify the path of the subdirectorys, since they al have different names. So I have to add the command df.to_csv somewhere in the loop, to have it saved in all subdirectories, but I do not know how..."}], "tags": [], "owner": {"reputation": 12074, "user_id": 5626112, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7c4f02b1ae7b6e7f262d67e428a35fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Steven G", "link": "https://stackoverflow.com/users/5626112/steven-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1493841360, "creation_date": 1493841360, "answer_id": 43768899, "question_id": 43768825, "link": "https://stackoverflow.com/questions/43768825/python-write-dataframe-output-to-different-subdirectories/43768899#43768899", "title": "Python; write dataframe output to different subdirectories", "body": "<p>just add a path to <code>to_csv()</code>    </p>\n\n<pre><code>df_end.to_csv('your/path/here/outputgenesdf.csv')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 337, "user_id": 7763266, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d6023a72f2ffb848a4fd547f094e64a5?s=128&d=identicon&r=PG&f=1", "display_name": "Gravel", "link": "https://stackoverflow.com/users/7763266/gravel"}, "edited": false, "score": 0, "creation_date": 1493875099, "post_id": 43769565, "comment_id": 74589634, "body": "If I do this, python gives an error that df1 is not defined. It gives the error in the line : dfmerge1 = pd.merge(df1, df2, on=[&#39;genome&#39;, &#39;contig&#39;], how=&#39;outer&#39;)"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 2, "last_activity_date": 1493843877, "creation_date": 1493843877, "answer_id": 43769565, "question_id": 43768825, "link": "https://stackoverflow.com/questions/43768825/python-write-dataframe-output-to-different-subdirectories/43769565#43769565", "title": "Python; write dataframe output to different subdirectories", "body": "<p>Try this:</p>\n\n<pre><code>df_end.to_csv(os.path.join(root, 'outputgenesdf.csv'))\n</code></pre>\n\n<p>PS make sure that this command is in the <code>for loop</code></p>\n\n<pre><code>print('Start merging contig files')\n\nfor root, dirs, files in os.walk(os.getcwd()):\n    filepath = os.path.join(root, 'genes.faa.genespercontig.csv')\n    if os.path.isfile(filepath):\n        with open(filepath, 'r') as f1:\n            df1 = pd.read_csv(f1, header=None, delim_whitespace=True, names = [\"contig\", \"genes\"])\n            df1['genome'] = os.path.basename(os.path.dirname(filepath))\n\n    filepath = os.path.join(root, 'hmmer.analyze.txt.results.txt')\n    if os.path.isfile(filepath):\n        with open(filepath, 'r') as f2:\n            df2 = pd.read_csv(f2, header=None, delim_whitespace=True, names = [\"contig\", \"SCM\"])\n            df2['genome'] = os.path.basename(os.path.dirname(filepath))\n\n    filepath = os.path.join(root, 'genes.fna.output_blastplasmiddb.out.count_plasmiddbhit.out')\n    if os.path.isfile(filepath):\n        with open(filepath, 'r') as f3:\n            df3 = pd.read_csv(f3, header=None, delim_whitespace=True, names = [\"contig\", \"plasmid_genes\"])\n            df3['genome'] = os.path.basename(os.path.dirname(filepath))\n\n    #merge dataframes\n    dfmerge1 = pd.merge(df1, df2, on=['genome', 'contig'], how='outer')\n    df_end = pd.merge(dfmerge1, df3, on=['genome', 'contig'], how='outer')      \n\n    df_end.to_csv(os.path.join(root, 'outputgenesdf.csv'))\n</code></pre>\n"}], "owner": {"reputation": 337, "user_id": 7763266, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d6023a72f2ffb848a4fd547f094e64a5?s=128&d=identicon&r=PG&f=1", "display_name": "Gravel", "link": "https://stackoverflow.com/users/7763266/gravel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 998, "favorite_count": 0, "accepted_answer_id": 43769565, "answer_count": 2, "score": 2, "last_activity_date": 1493843959, "creation_date": 1493841110, "last_edit_date": 1493843959, "question_id": 43768825, "link": "https://stackoverflow.com/questions/43768825/python-write-dataframe-output-to-different-subdirectories", "title": "Python; write dataframe output to different subdirectories", "body": "<p>I am running my script from my current working directory. With my script, I loop over the subdirectories of the current working directory. Each subdirectory contains the 3 files mentioned in the script, and for each subdirectory, I merge the 3 files to one dataframe. As my script is now, it writes the merged dataframe of only one subdirectory to the current working directory. What I want is the csv file with the merged dataframe of each subdirectory saved in that subdirectory, or a file with dataframes of each subdirectory concatenated to one large output file.\nWith my script, I have only the output of one subdirectory in the output file.</p>\n\n<p>My script is as follows:</p>\n\n<pre><code>print('Start merging contig files')\n\nfor root, dirs, files in os.walk(os.getcwd()):\n    filepath = os.path.join(root, 'genes.faa.genespercontig.csv')\n    if os.path.isfile(filepath):\n        with open(filepath, 'r') as f1:\n            df1 = pd.read_csv(f1, header=None, delim_whitespace=True, names = [\"contig\", \"genes\"])\n            df1['genome'] = os.path.basename(os.path.dirname(filepath))\n\n    filepath = os.path.join(root, 'hmmer.analyze.txt.results.txt')\n    if os.path.isfile(filepath):\n        with open(filepath, 'r') as f2:\n            df2 = pd.read_csv(f2, header=None, delim_whitespace=True, names = [\"contig\", \"SCM\"])\n            df2['genome'] = os.path.basename(os.path.dirname(filepath))\n\n    filepath = os.path.join(root, 'genes.fna.output_blastplasmiddb.out.count_plasmiddbhit.out')\n    if os.path.isfile(filepath):\n        with open(filepath, 'r') as f3:\n            df3 = pd.read_csv(f3, header=None, delim_whitespace=True, names = [\"contig\", \"plasmid_genes\"])\n            df3['genome'] = os.path.basename(os.path.dirname(filepath))\n\n#merge dataframes\ndfmerge1 = pd.merge(df1, df2, on=['genome', 'contig'], how='outer')\ndf_end = pd.merge(dfmerge1, df3, on=['genome', 'contig'], how='outer')      \n\ndf_end.to_csv('outputgenesdf.csv')\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "python-3.x", "csv", "pandas"], "comments": [{"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1493842722, "post_id": 43768700, "comment_id": 74579936, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12555323/adding-new-column-to-existing-dataframe-in-python-pandas\">Adding new column to existing DataFrame in Python pandas</a>"}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1493842880, "post_id": 43768700, "comment_id": 74580026, "body": "It looks like you want to <a href=\"http://pandas.pydata.org/pandas-docs/stable/merging.html\" rel=\"nofollow noreferrer\"><code>concat</code> or <code>append</code></a>, not <code>merge</code>."}], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 7959535, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/129b6a758ec580cfd788d38b8da7ca89?s=128&d=identicon&r=PG&f=1", "display_name": "kabaname", "link": "https://stackoverflow.com/users/7959535/kabaname"}, "edited": false, "score": 0, "creation_date": 1493842420, "post_id": 43768734, "comment_id": 74579782, "body": "So I tried that, and it seems to have removed both columns and all data... but that did solve the issue of duplication as the remaining data was not duplicated like before."}], "tags": [], "owner": {"reputation": 12074, "user_id": 5626112, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7c4f02b1ae7b6e7f262d67e428a35fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Steven G", "link": "https://stackoverflow.com/users/5626112/steven-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1493840801, "creation_date": 1493840801, "answer_id": 43768734, "question_id": 43768700, "link": "https://stackoverflow.com/questions/43768700/prevent-duplication-of-rows-when-performing-merge/43768734#43768734", "title": "Prevent duplication of rows when performing merge", "body": "<p>try indexing your df and then drop duplicates:</p>\n\n<pre><code>df = df.set_index(['id', 'item_num']).drop_duplicates()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 245, "user_id": 7959535, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/129b6a758ec580cfd788d38b8da7ca89?s=128&d=identicon&r=PG&f=1", "display_name": "kabaname", "link": "https://stackoverflow.com/users/7959535/kabaname"}, "edited": false, "score": 0, "creation_date": 1493848342, "post_id": 43769114, "comment_id": 74582617, "body": "I&#39;m getting a <code>ValueError: Shape of passed values is (13, 10799), indices imply (13, 6240)</code>"}], "tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": false, "score": 1, "last_activity_date": 1493842203, "creation_date": 1493842203, "answer_id": 43769114, "question_id": 43768700, "link": "https://stackoverflow.com/questions/43768700/prevent-duplication-of-rows-when-performing-merge/43769114#43769114", "title": "Prevent duplication of rows when performing merge", "body": "<p>I think you need concat</p>\n\n<pre><code>result = pd.concat([df1.set_index('id'), df2.set_index('id')],axis = 1).reset_index()\n</code></pre>\n\n<p>You get </p>\n\n<pre><code>    id      item_no     description\n0   A123    1           Mary had a...\n1   A123    2           ...little lamb\n2   B456    1           ...Its fleece...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 245, "user_id": 7959535, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/129b6a758ec580cfd788d38b8da7ca89?s=128&d=identicon&r=PG&f=1", "display_name": "kabaname", "link": "https://stackoverflow.com/users/7959535/kabaname"}, "edited": false, "score": 0, "creation_date": 1493848758, "post_id": 43769403, "comment_id": 74582779, "body": "I wish this had worked for me, but it seems to have just not included any of the data from one of the CSVs. In fact, the resulting CSV is just a copy of one of the CSVs."}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "reply_to_user": {"reputation": 245, "user_id": 7959535, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/129b6a758ec580cfd788d38b8da7ca89?s=128&d=identicon&r=PG&f=1", "display_name": "kabaname", "link": "https://stackoverflow.com/users/7959535/kabaname"}, "edited": false, "score": 1, "creation_date": 1493848984, "post_id": 43769403, "comment_id": 74582860, "body": "@kabaname, are you sure you have assigned the result of merging back?"}, {"owner": {"reputation": 245, "user_id": 7959535, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/129b6a758ec580cfd788d38b8da7ca89?s=128&d=identicon&r=PG&f=1", "display_name": "kabaname", "link": "https://stackoverflow.com/users/7959535/kabaname"}, "edited": false, "score": 0, "creation_date": 1493866785, "post_id": 43769403, "comment_id": 74587325, "body": "nevermind, so I got it to produce the result - but it&#39;s still multiplying the rows so as to repeat the descriptions for <code>1</code> and <code>2</code> just like in my example. In other words, <code>Mary had a...</code> is repeating for both 1 and 2 and then <code>...little lamb.</code> is also repeating, still. @maxu"}, {"owner": {"reputation": 245, "user_id": 7959535, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/129b6a758ec580cfd788d38b8da7ca89?s=128&d=identicon&r=PG&f=1", "display_name": "kabaname", "link": "https://stackoverflow.com/users/7959535/kabaname"}, "edited": false, "score": 0, "creation_date": 1496538254, "post_id": 43769403, "comment_id": 75702105, "body": "Just thought I&#39;d circle back and let you know this works fine! Thanks for your help."}, {"owner": {"reputation": 245, "user_id": 7959535, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/129b6a758ec580cfd788d38b8da7ca89?s=128&d=identicon&r=PG&f=1", "display_name": "kabaname", "link": "https://stackoverflow.com/users/7959535/kabaname"}, "edited": false, "score": 0, "creation_date": 1498064994, "post_id": 43769403, "comment_id": 76348708, "body": "Hi @MaxU, I have an update to this problem and was wondering if you could shed some insight?"}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": true, "score": 1, "last_activity_date": 1493848850, "last_edit_date": 1493848850, "creation_date": 1493843210, "answer_id": 43769403, "question_id": 43768700, "link": "https://stackoverflow.com/questions/43768700/prevent-duplication-of-rows-when-performing-merge/43769403#43769403", "title": "Prevent duplication of rows when performing merge", "body": "<p>I'd do it this way:</p>\n\n<pre><code>In [135]: result = A.merge(B.assign(item_num=B.groupby('id').cumcount()+1))\n\nIn [136]: result\nOut[136]:\n     id  item_num       description\n0  A123         1     Mary had a...\n1  A123         2   ...little lamb.\n2  B456         1  ...Its fleece...\n</code></pre>\n\n<p>Explanation: we can create \"virtual\" <code>item_num</code> column in the <code>B</code> DF for joining:</p>\n\n<pre><code>In [137]: B.assign(item_num=B.groupby('id').cumcount()+1)\nOut[137]:\n     id       description  item_num\n0  A123     Mary had a...         1\n1  A123   ...little lamb.         2\n2  B456  ...Its fleece...         1\n</code></pre>\n"}], "owner": {"reputation": 245, "user_id": 7959535, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/129b6a758ec580cfd788d38b8da7ca89?s=128&d=identicon&r=PG&f=1", "display_name": "kabaname", "link": "https://stackoverflow.com/users/7959535/kabaname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 43769403, "answer_count": 3, "score": 5, "last_activity_date": 1546913527, "creation_date": 1493840678, "last_edit_date": 1546913527, "question_id": 43768700, "link": "https://stackoverflow.com/questions/43768700/prevent-duplication-of-rows-when-performing-merge", "title": "Prevent duplication of rows when performing merge", "body": "<p>I've hit a wall with a data analysis project I'm working on. </p>\n\n<p>Essentially, if I have example CSV 'A':</p>\n\n<pre><code>id   | item_num\nA123 |     1\nA123 |     2\nB456 |     1\n</code></pre>\n\n<p>And I have example CSV 'B':</p>\n\n<pre><code>id   | description\nA123 | Mary had a...\nA123 | ...little lamb.\nB456 | ...Its fleece...\n</code></pre>\n\n<p>If I perform a <code>merge</code> using <code>Pandas</code>, it ends up like this:</p>\n\n<pre><code>id   | item_num | description\nA123 |     1    | Mary had a...\nA123 |     2    | Mary had a...\nA123 |     1    | ...little lamb.\nA123 |     2    | ...little lamb.\nB456 |     1    | Its fleece...\n</code></pre>\n\n<p>How could I instead make it become:</p>\n\n<pre><code>id   | item_num | description\nA123 |     1    | Mary had a...\nA123 |     2    | ...little lamb...\nB456 |     1    | Its fleece...\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>import pandas as pd\n\n# Import CSVs\nfirst = pd.read_csv(\"../PATH_TO_CSV/A.csv\")\nprint(\"Imported first CSV: \" + str(first.shape))\nsecond = pd.read_csv(\"../PATH_TO_CSV/B.csv\")\nprint(\"Imported second CSV: \" + str(second.shape))\n\n\n# Create a resultant, but empty, DF, and then append the merge.\nresult = pd.DataFrame()\nresult = result.append(pd.merge(first, second), ignore_index = True)\nprint(\"Merged CSVs... resulting DataFrame is: \" + str(result.shape))\n\n# Lets do a \"dedupe\" to deal with an issue on how Pandas handles datetime merges\n# I read about an issue where if datetime is involved, duplicate entires will be created.\nresult = result.drop_duplicates()\nprint(\"Deduping... resulting DataFrame is: \" + str(result.shape))\n\n# Save to another CSV\nresult.to_csv(\"EXPORT.csv\", index=False)\nprint(\"Saved to file.\")\n</code></pre>\n\n<p>I would really appreciate any help - I'm very stuck! And I'm dealing with 20,000+ rows.</p>\n\n<p>Thanks.</p>\n\n<p>Edit: my post was marked as a potential duplicate. It's not, as I'm not necessarily trying to add a column - I'm just trying to prevent the <code>description</code> to be multiplied by the number of <code>item_num</code> that are attributed to a particular <code>id</code>.</p>\n\n<hr>\n\n<p><strong>UPDATE, 6/21:</strong></p>\n\n<p>How could I do the merge, if the 2 DFs looked like this instead?</p>\n\n<pre><code>id   | item_num | other_col\nA123 |     1    | lorem ipsum\nA123 |     2    | dolor sit\nA123 |     3    | amet, consectetur\nB456 |     1    | lorem ipsum\n</code></pre>\n\n<p>And I have example CSV 'B':</p>\n\n<pre><code>id   | item_num | description\nA123 |     1    | Mary had a...\nA123 |     2    | ...little lamb.\nB456 |     1    | ...Its fleece...\n</code></pre>\n\n<p>So I end up with:</p>\n\n<pre><code>id   | item_num |  other_col  | description\nA123 |     1    | lorem ipsum | Mary Had a...\nA123 |     2    | dolor sit   | ...little lamb.\nB456 |     1    | lorem ipsum | ...Its fleece...\n</code></pre>\n\n<p>Meaning, the row that has the 3, with \"amet, consectetur\" in the \"other_col\" is ignored. </p>\n"}, {"tags": ["python", "flask", "redis", "gunicorn"], "comments": [{"owner": {"reputation": 1569, "user_id": 7268968, "user_type": "registered", "accept_rate": 27, "profile_image": "https://graph.facebook.com/10107185465206940/picture?type=large", "display_name": "Peter Weyand", "link": "https://stackoverflow.com/users/7268968/peter-weyand"}, "edited": false, "score": 0, "creation_date": 1541662913, "post_id": 43768665, "comment_id": 93294732, "body": "This question has been inappropriately flagged as a duplicate - the provided links are tangential on even a surface reading. Flagging for moderation."}], "owner": {"reputation": 11, "user_id": 7959602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c1bcb7a39efe36870eb0215548948e2?s=128&d=identicon&r=PG&f=1", "display_name": "gargoyles", "link": "https://stackoverflow.com/users/7959602/gargoyles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1315, "favorite_count": 0, "closed_date": 1493845183, "answer_count": 0, "score": 1, "last_activity_date": 1493845297, "creation_date": 1493840520, "question_id": 43768665, "link": "https://stackoverflow.com/questions/43768665/flask-send-file-not-automatically-downloading-file-after-adding-redis-rq", "closed_reason": "Duplicate", "title": "Flask send_file() not automatically downloading file after adding redis rq", "body": "<p><strong>Context:</strong> I built a web app using flask to make several calls to an API and create/download the results of those calls to an excel file on the fly. To avoid timing out on larger jobs, I implemented redis with RQ to handle the work in the background. This is all up and running, however neither send_file() nor send_from_directory() are actually sending the file (I was using send_file() before implementing rq and it was working without problem). The file is built and returns a 200 status, but the download doesn't start automatically. If I right click on the call and open in a new tab, the file downloads.</p>\n\n<p><strong>Here is some of my code:</strong></p>\n\n<pre><code>@app.route(\"/status/&lt;job_id&gt;\", methods=['GET'])\ndef job_status(job_id):\n    job = queue.fetch_job(job_id)\n    if job.is_finished:\n        output = make_xls()\n        output.seek(0)\n        filename = '{}_{}.xlsx'.format(session['filter'], session['id'])\n        return send_file(output, mimetype=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\",attachment_filename=filename, as_attachment=True)\n</code></pre>\n\n<p>I have ajax polling the this route continuously so to know when the job is finished.</p>\n\n<p>make_xls() returns a io.BytesIO() used by pandas.ExcelWriter() to create the excel.</p>\n\n<p>I'm using gevent as the worker in gunicorn so the job is run asynchronously. Let me know what other information I can provide. There isn't a traceback, that I can see, it seems like everything runs successfully, just no file is downloaded. I've also tried saving the file locally then making a GET to another route with the file name and then trying to return the file with send_from_directory(). <a href=\"https://i.stack.imgur.com/6amGs.png\" rel=\"nofollow noreferrer\">The request returns 200</a>. And if I right-click and open in new tab, the file downloads. </p>\n\n<p>I've been reading up on race conditions and blocking vs non-blocking, but just haven't been able to figure out what I'm missing. Any help would be appreciated, even if it is things to look in to.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "python-3.x", "ms-access", "pyodbc"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 7959555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ec203b8887b7b27926206fc0c25aff?s=128&d=identicon&r=PG&f=1", "display_name": "jj2593", "link": "https://stackoverflow.com/users/7959555/jj2593"}, "edited": false, "score": 0, "creation_date": 1493847393, "post_id": 43770126, "comment_id": 74582221, "body": "I tried that and got this error message:      crsr.execute(&quot;select [+veDP] as posDP from Conditions&quot;) pyodbc.Error: (&#39;07002&#39;, &#39;[07002] [Microsoft][ODBC Microsoft Access Driver] Too few parameters. Expected 1. (-3010) (SQLExecDirectW)&#39;)"}, {"owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "reply_to_user": {"reputation": 67, "user_id": 7959555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ec203b8887b7b27926206fc0c25aff?s=128&d=identicon&r=PG&f=1", "display_name": "jj2593", "link": "https://stackoverflow.com/users/7959555/jj2593"}, "edited": false, "score": 0, "creation_date": 1493851930, "post_id": 43770126, "comment_id": 74583841, "body": "<code>print([x.column_name for x in crsr.columns(&quot;Conditions&quot;)])</code>. Do you see <code>&#39;+veDP&#39;</code> in the list? If not, then it is not actually a column name. (It may be the Caption of a column.)"}, {"owner": {"reputation": 67, "user_id": 7959555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ec203b8887b7b27926206fc0c25aff?s=128&d=identicon&r=PG&f=1", "display_name": "jj2593", "link": "https://stackoverflow.com/users/7959555/jj2593"}, "edited": false, "score": 0, "creation_date": 1494017418, "post_id": 43770126, "comment_id": 74666565, "body": "Thanks! That helped!"}], "tags": [], "owner": {"reputation": 97598, "user_id": 2144390, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6QjmY.jpg?s=128&g=1", "display_name": "Gord Thompson", "link": "https://stackoverflow.com/users/2144390/gord-thompson"}, "is_accepted": false, "score": 0, "last_activity_date": 1494029664, "last_edit_date": 1494029664, "creation_date": 1493846066, "answer_id": 43770126, "question_id": 43768615, "link": "https://stackoverflow.com/questions/43768615/using-pyodbc-to-import-column-name-with-non-alphanumeric-characters/43770126#43770126", "title": "Using pyodbc to import column name with non alphanumeric characters?", "body": "<p>The most common way to have Access SQL deal with spaces and \"funny characters\" in  object names is to use square brackets, e.g., </p>\n\n<pre class=\"lang-python prettyprint-override\"><code>crsr.execute(\"select CompoundKey, Q1Mass, Q3Mass, [+veDP] AS posDP, CE from Conditions\")\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>Be aware that Access allows us to specify a \"Caption\" for a given field ...</p>\n\n<p><a href=\"https://i.stack.imgur.com/WsHF8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WsHF8.png\" alt=\"DesignView.png\"></a></p>\n\n<p>... and when we look at the table in Datasheet View it appears that the field is named [+veDP] ...</p>\n\n<p><a href=\"https://i.stack.imgur.com/Sqqvx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Sqqvx.png\" alt=\"DatasheetView.png\"></a></p>\n\n<p>... when in fact the field name is actually [posDP].</p>\n"}], "owner": {"reputation": 67, "user_id": 7959555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8ec203b8887b7b27926206fc0c25aff?s=128&d=identicon&r=PG&f=1", "display_name": "jj2593", "link": "https://stackoverflow.com/users/7959555/jj2593"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1494029664, "creation_date": 1493840340, "last_edit_date": 1493846082, "question_id": 43768615, "link": "https://stackoverflow.com/questions/43768615/using-pyodbc-to-import-column-name-with-non-alphanumeric-characters", "title": "Using pyodbc to import column name with non alphanumeric characters?", "body": "<p>I'm currently trying to use pyodbc to read columns from Microsoft Access into python. One of the columns has a + sign in it. How would I go about selecting this column and then printing a row from the column. Currently my code looks something like this:</p>\n\n<pre><code>crsr.execute(\"select CompoundKey, Q1Mass, Q3Mass, +veDP, CE from Conditions\")\nfor row in crsr:\n    print(\"Q1 Mass: %.3f\" % row.Q1Mass)\n</code></pre>\n\n<p>So I'd like to be able to import +veDP and then print the rows of that column.</p>\n"}]