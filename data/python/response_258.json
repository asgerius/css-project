[{"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1576714230, "post_id": 59401602, "comment_id": 104992407, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/53066627/groupby-to-return-nth-group-not-row\">groupby to return nth group - NOT row</a>"}, {"owner": {"reputation": 904, "user_id": 8643941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a35c6635b29c3bfb4cbae3661b72a29f?s=128&d=identicon&r=PG&f=1", "display_name": "bwc", "link": "https://stackoverflow.com/users/8643941/bwc"}, "edited": false, "score": 0, "creation_date": 1576714526, "post_id": 59401602, "comment_id": 104992473, "body": "How about transforming your array back into a dataframe? <code>d = pd.DataFrame(array)</code>"}, {"owner": {"reputation": 3138, "user_id": 463213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0f387381ec6bd2ede5472a04c769c7?s=128&d=identicon&r=PG", "display_name": "charlesreid1", "link": "https://stackoverflow.com/users/463213/charlesreid1"}, "reply_to_user": {"reputation": 904, "user_id": 8643941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a35c6635b29c3bfb4cbae3661b72a29f?s=128&d=identicon&r=PG&f=1", "display_name": "bwc", "link": "https://stackoverflow.com/users/8643941/bwc"}, "edited": false, "score": 0, "creation_date": 1576714708, "post_id": 59401602, "comment_id": 104992506, "body": "@bwc OP is trying to avoid the intermediate step of turning the dataframe into an array: &quot;On a large dataset, converting the dataframe to an array is very slow&quot;"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576722349, "post_id": 59401602, "comment_id": 104993892, "body": "What does your data look like (the format)?"}], "answers": [{"tags": [], "owner": {"reputation": 3138, "user_id": 463213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0f387381ec6bd2ede5472a04c769c7?s=128&d=identicon&r=PG", "display_name": "charlesreid1", "link": "https://stackoverflow.com/users/463213/charlesreid1"}, "is_accepted": true, "score": 1, "last_activity_date": 1576714370, "creation_date": 1576714370, "answer_id": 59401706, "question_id": 59401602, "link": "https://stackoverflow.com/questions/59401602/pandas-how-can-i-locate-group-n-in-a-sorted-groupby/59401706#59401706", "title": "Pandas how can I locate group n in a sorted groupby?", "body": "<p>You can get a list of group keys using <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.core.groupby.GroupBy.groups.html#pandas.core.groupby.GroupBy.groups\" rel=\"nofollow noreferrer\"><code>grouped_df.groups</code></a> attribute, which returns a dict. Then get the keys of that dict using the <code>keys()</code> function:</p>\n\n<pre><code>In [27]: grouped_df.groups.keys()\nOut[27]: dict_keys([(0, 0), (0, 1), (0, 2), (0, 3), (0, 4), (1, 0), (1, 1), (1, 2), (1, 3), (1, 4), (2, 0), (2, 1), (2, 3), (2, 4), (3, 0), (3, 1), (3, 2), (3, 3), (3, 4), (4, 0), (4, 1), (4, 2), (4, 3), (4, 4)])\n</code></pre>\n\n<p>(These keys have values of <code>(index1, index2)</code> corresponding to the index1/index2 value for that group.)</p>\n\n<p>The list comprehension you use to populate <code>array</code> will iterate through these group keys in order, so element 4 of the resulting array corresponds to the fourth key:</p>\n\n<pre><code>In [28]: list(grouped_df.groups.keys())[3]\nOut[28]: (0, 3)\n</code></pre>\n\n<p>(which indicates <code>index1=0</code> and <code>index2=3</code>). Now you can assign that key to a variable and get the group corresponding to that key using the <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.core.groupby.GroupBy.get_group.html#pandas.core.groupby.GroupBy.get_group\" rel=\"nofollow noreferrer\"><code>grouped_df.get_group()</code></a> method:</p>\n\n<pre><code>In [29]: my_key = list(grouped_df.groups.keys())[3]\n\nIn [30]: grouped_df.get_group(my_key)\nOut[30]:\n           a  index1  index2\n0   1.764052       0       3\n14  0.443863       0       3\n56  0.066517       0       3\n58 -0.634322       0       3\n65 -0.401781       0       3\n69  0.051945       0       3\n</code></pre>\n\n<p>Finally, grab column \"a\" from the result, and get the values the same way you did with the list comprehension:</p>\n\n<pre><code>In [31]: grouped_df.get_group(my_key)['a'].values\nOut[31]:\narray([ 1.76405235,  0.44386323,  0.06651722, -0.63432209, -0.40178094,\n        0.0519454 ])\n</code></pre>\n\n<p>Or, as a somewhat messy one-liner,</p>\n\n<pre><code>In [32]: grouped_df.get_group(list(grouped_df.groups.keys())[3])['a'].values\nOut[32]:\narray([ 1.76405235,  0.44386323,  0.06651722, -0.63432209, -0.40178094,\n        0.0519454 ])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3138, "user_id": 463213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0f387381ec6bd2ede5472a04c769c7?s=128&d=identicon&r=PG", "display_name": "charlesreid1", "link": "https://stackoverflow.com/users/463213/charlesreid1"}, "edited": false, "score": 0, "creation_date": 1576716811, "post_id": 59401780, "comment_id": 104992902, "body": "From OP: &quot;On a large dataset, converting the dataframe to an array is very slow&quot; - calling <code>.to_numpy()</code> would still incur that overhead cost"}], "tags": [], "owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "is_accepted": false, "score": 0, "last_activity_date": 1576714991, "creation_date": 1576714991, "answer_id": 59401780, "question_id": 59401602, "link": "https://stackoverflow.com/questions/59401602/pandas-how-can-i-locate-group-n-in-a-sorted-groupby/59401780#59401780", "title": "Pandas how can I locate group n in a sorted groupby?", "body": "<p>You can just make the groupby lists like so:</p>\n\n<pre><code>grouped_df.agg(list).to_numpy().tolist()[3]\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>[[1.764052345967664,\n  0.44386323274542566,\n  0.06651722238316789,\n  -0.6343220936809636,\n  -0.4017809362082619,\n  0.05194539579613895]]\n</code></pre>\n"}], "owner": {"reputation": 1419, "user_id": 7026806, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh6.googleusercontent.com/-_twXQaUprgA/AAAAAAAAAAI/AAAAAAAAAMs/AXIxlhsTIfE/photo.jpg?sz=128", "display_name": "komodovaran_", "link": "https://stackoverflow.com/users/7026806/komodovaran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 59401706, "answer_count": 2, "score": 2, "last_activity_date": 1576778773, "creation_date": 1576713512, "last_edit_date": 1576778773, "question_id": 59401602, "link": "https://stackoverflow.com/questions/59401602/pandas-how-can-i-locate-group-n-in-a-sorted-groupby", "title": "Pandas how can I locate group n in a sorted groupby?", "body": "<p>I have a massive Pandas dataframe converted to a tensor for deep learning. Now I want to access group n in both my dataframe and my array.</p>\n\n<p>E.g., how do I access the dataframe group that eventually becomes group 3 in the array, with a given set of sorting keys?</p>\n\n<p>On a large dataset, converting the dataframe to an array is <em>very</em> slow, as there's roughly 200k groups in millions of rows. So this can only be done once, and not on the fly, and I don't have pickles of lists of groups.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\n\nnp.random.seed(0)\n\ndf = pd.DataFrame({\"a\"     : np.random.normal(0, 1, 100),\n                   \"index1\": np.random.randint(0, 5, 100),\n                   \"index2\": np.random.randint(0, 5, 100)})\n\ngrouped_df = df.groupby([\"index1\", \"index2\"])\n\n# convert dataframe to array for e.g. deep learning but never do this operation again (too slow)\narray = np.array([group[\"a\"].values for _, group in grouped_df])\n\n# fetch the same sample from the array and the df\narray_n = array[3] # this is trivial\n\n# how can I do this in my df?\n# grouped_df[3] obviously doesn't work.\n</code></pre>\n"}, {"tags": ["python", "regex", "csv"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1576713728, "post_id": 59401574, "comment_id": 104992286, "body": "related: <a href=\"https://stackoverflow.com/questions/23783053/regex-alternation-order\">Regex Alternation Order</a> ... <a href=\"https://stackoverflow.com/questions/32284334/python-regex-alternation-for-sets-of-words\">Python regex: Alternation for sets of words</a> ... <a href=\"https://stackoverflow.com/questions/tagged/regex-alternation\">Questions tagged regex-alternation</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1451, "user_id": 6552776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UiuKq.jpg?s=128&g=1", "display_name": "csabinho", "link": "https://stackoverflow.com/users/6552776/csabinho"}, "is_accepted": true, "score": 2, "last_activity_date": 1576713553, "creation_date": 1576713553, "answer_id": 59401606, "question_id": 59401574, "link": "https://stackoverflow.com/questions/59401574/several-arguments-for-re-compile-in-python/59401606#59401606", "title": "Several arguments for re.compile in Python?", "body": "<p>You can do this by using this: <code>(global warming|climate change)</code>!</p>\n\n<p><code>|</code> is separating the various options you have.</p>\n"}], "owner": {"reputation": 35, "user_id": 12372468, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-CB7jp_UDYjY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcjTGfeg5XFcpfPwuwtw9527jYCJg/photo.jpg?sz=128", "display_name": "Tomito", "link": "https://stackoverflow.com/users/12372468/tomito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 59401606, "answer_count": 1, "score": 0, "last_activity_date": 1576713553, "creation_date": 1576713253, "question_id": 59401574, "link": "https://stackoverflow.com/questions/59401574/several-arguments-for-re-compile-in-python", "title": "Several arguments for re.compile in Python?", "body": "<p>To follow up <a href=\"https://stackoverflow.com/questions/59173183/searching-for-a-specific-phrase-in-csv-file-using-regex-in-python/59196029#59196029\">my previous question</a>, I'd like to ask if it's possible to add several arguments while using re.compile? \nI took \"global warming\" as an example in my previous question. What if I want to search for possible forms of \"global warming\" and also \"climate change\" in my database? \nAny solutions to that? </p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1576713331, "post_id": 59401554, "comment_id": 104992188, "body": "Do you need cases where <code>k&gt;n</code> though? As far as I understand if <code>(k, n)</code> satisfies your condition <code>(n, k)</code> will do too."}, {"owner": {"reputation": 610, "user_id": 8105551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd37b36bdaf21c49a388890fa0a392d5?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/8105551/matt"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1576713614, "post_id": 59401554, "comment_id": 104992267, "body": "Yes, I am looking for a set of perfect square numbers S1-S9 such that S1 + x = S2, S2 + x  = S3 ect. S1 = k^2 and S2 = (k + n +1)^2. so n is the number of squares between S1 and S2, and k defines S1, S1 = k^2."}], "answers": [{"comments": [{"owner": {"reputation": 610, "user_id": 8105551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd37b36bdaf21c49a388890fa0a392d5?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/8105551/matt"}, "edited": false, "score": 0, "creation_date": 1576714142, "post_id": 59401612, "comment_id": 104992385, "body": "I am trying to increase the limit when the numbers k and n meet the limit, not when the two equations are equal, and I believe that this implementation will not produce pairs where k &lt; n and n &gt; than the original limit, i..e. (k = 0, n = 2000)."}, {"owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "reply_to_user": {"reputation": 610, "user_id": 8105551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd37b36bdaf21c49a388890fa0a392d5?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/8105551/matt"}, "edited": false, "score": 0, "creation_date": 1576717143, "post_id": 59401612, "comment_id": 104992958, "body": "@Matt Perhaps, I understood. See the edits. Is that what you want?"}], "tags": [], "owner": {"reputation": 18268, "user_id": 5218354, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh4.googleusercontent.com/-NEO9rZKeffY/AAAAAAAAAAI/AAAAAAAAAKc/9IttO1jUOr4/photo.jpg=k-s128", "display_name": "norok2", "link": "https://stackoverflow.com/users/5218354/norok2"}, "is_accepted": false, "score": 1, "last_activity_date": 1576717118, "last_edit_date": 1576717118, "creation_date": 1576713580, "answer_id": 59401612, "question_id": 59401554, "link": "https://stackoverflow.com/questions/59401554/way-to-iterate-over-all-combinations-of-two-variables-with-dynamic-limit/59401612#59401612", "title": "Way to iterate over all combinations of two variables with dynamic limit", "body": "<p>(<strong>EDITED</strong>)</p>\n\n<p>If I understood correctly, you want to cover increasingly large squares, e.g.:</p>\n\n<pre><code># square of side 1\n(0, 0) \n# square of side 2\n(0, 1), (1, 1), (1, 0)\n# square of side 3\n(0, 2), (1, 2), (2, 2), (2, 1), (2, 0)\n# square of side 4\n(0, 3), (1, 3), (2, 3), (3, 3), (3, 2), (3, 1), (3, 0)\n...\n</code></pre>\n\n<p>or, visually:</p>\n\n<pre><code>0 1 2 3\n1 1 2 3\n2 2 2 3\n3 3 3 3\n...\n</code></pre>\n\n<p>and the size of the square is the \"limit\".</p>\n\n<p>If that is the case, what you could do is two consecutive loops:</p>\n\n<pre><code>max_limit = 3\nlimit = 0\ni = j = 0\nwhile limit &lt; max_limit:\n    i, j = 0, limit\n    while i &lt; limit:\n        print((i, j), end=' ')\n        # INSERT YOUR (I, J) CONDITION HERE\n        i += 1\n    while j &gt;= 0:\n        print((i, j), end=' ')\n        # INSERT YOUR (I, J) CONDITION HERE\n        j -= 1\n    limit += 1\n</code></pre>\n\n<p>with output:</p>\n\n<pre><code>(0, 0) (0, 1) (1, 1) (1, 0) (0, 2) (1, 2) (2, 2) (2, 1) (2, 0) \n</code></pre>\n\n<p>Of course, this is not ideal because you now would have two different points where to execute essentially the same instructions (i.e. the <code>print()</code>).</p>\n\n<p>Luckily, this can be easily rewritten as:</p>\n\n<pre><code>max_limit = 3\nlimit = 0\ni = j = 0\nwhile limit &lt; 3:\n    i, j = 0, limit\n    countdown = limit * 2 + 1\n    while countdown &gt; 0:\n        print((i, j), end=' ')\n        # INSERT YOUR (I, J) CONDITION HERE\n        if i &lt; limit:\n            i += 1\n            countdown -= 1\n        elif j &gt;= 0:\n            j -= 1\n            countdown -= 1\n    limit += 1\n</code></pre>\n\n<p>with the same output as before:</p>\n\n<pre><code>(0, 0) (0, 1) (1, 1) (1, 0) (0, 2) (1, 2) (2, 2) (2, 1) (2, 0) \n</code></pre>\n\n<p>This exploits the observation that the number of elements to generate at each <code>limit</code> level is given by <code>countdown = limit * 2 + 1</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1576714153, "post_id": 59401662, "comment_id": 104992387, "body": "I&#39;m not sure if testing both <code>(3, 4)</code> and <code>(4, 3)</code> is beneficial. It might make sense to eliminate those in the generator."}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1576714210, "post_id": 59401662, "comment_id": 104992403, "body": "The OP&#39;s code generates both, and the question explicitly says their second solution is more efficient <i>&quot;but will miss values where k &gt; n&quot;</i>, so generating the pairs in both orders is the required behaviour. <code>k</code> and <code>n</code> are not symmetrical in the code they are used for."}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1576714271, "post_id": 59401662, "comment_id": 104992416, "body": "Agreed, but the generator doesn&#39;t have to generate both. The comparison code can return/print both <code>k, n</code> and <code>n, k</code>, if <code>n != k</code>, when it finds a match."}, {"owner": {"reputation": 610, "user_id": 8105551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd37b36bdaf21c49a388890fa0a392d5?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/8105551/matt"}, "edited": false, "score": 0, "creation_date": 1576714310, "post_id": 59401662, "comment_id": 104992423, "body": "Actually, I would like to generate both (3,4) and (4,3)."}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1576714346, "post_id": 59401662, "comment_id": 104992434, "body": "The generator&#39;s responsibility is to generate the pairs which the loop wants to iterate over. If the loop wants them in both orders then the generator should yield them in both orders."}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1576714423, "post_id": 59401662, "comment_id": 104992450, "body": "I agree with you both, I am suggesting this as a performance optimisation. There is no point calculating the squares for both pairs. You can do it for one pair and simply reverse it if you find a match."}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1576714512, "post_id": 59401662, "comment_id": 104992466, "body": "It&#39;s not a performance optimisation. The code checking for a match calculates <code>k**2 + 8*((2*k*n) + n**2 + (2*n) + (2*k) + 1)</code> which is not symmetric in <code>k</code> and <code>n</code>, so you have to calculate it both ways round however you slice it."}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1576714625, "post_id": 59401662, "comment_id": 104992489, "body": "You may have missed that the <code>k**2</code> is outside the brackets, whereas <code>n**2</code> is inside the brackets so it is being multiplied by 8."}], "tags": [], "owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "is_accepted": true, "score": 4, "last_activity_date": 1576714394, "last_edit_date": 1576714394, "creation_date": 1576714063, "answer_id": 59401662, "question_id": 59401554, "link": "https://stackoverflow.com/questions/59401554/way-to-iterate-over-all-combinations-of-two-variables-with-dynamic-limit/59401662#59401662", "title": "Way to iterate over all combinations of two variables with dynamic limit", "body": "<p>Essentially, you are trying to iterate over all pairs of non-negative integers, out to infinity, without seeing any pair more than once. In particular, you want to generate all pairs <code>(k, n)</code> in increasing order of <code>max(k, n)</code>.</p>\n\n<p>It's a good idea to separate the logic of generating the pairs from the logic of consuming them, by writing a generator function. There are, of course, infinitely many pairs, so it's up to you to stop iterating when you want to.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def all_pairs():\n    m = 0\n    while True:\n        for i in range(m):\n            yield (i, m)\n        for i in range(m + 1):\n            yield (m, i)\n        m += 1\n</code></pre>\n\n<p>Example usage:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>out = []\n\nfor k, n in all_pairs():\n    out.append( (k, n) )\n    if len(out) &gt;= 25:\n        break\n\nprint(out)\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>[(0, 0), # m = 0\n (0, 1), (1, 0), (1, 1), # m = 1\n (0, 2), (1, 2), (2, 0), (2, 1), (2, 2), # m = 2\n (0, 3), (1, 3), (2, 3), (3, 0), (3, 1), (3, 2), (3, 3), # m = 3\n (0, 4), (1, 4), (2, 4), (3, 4), (4, 0), (4, 1), (4, 2), (4, 3), (4, 4) # m = 4\n]\n</code></pre>\n"}], "owner": {"reputation": 610, "user_id": 8105551, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd37b36bdaf21c49a388890fa0a392d5?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/8105551/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 59401662, "answer_count": 2, "score": 1, "last_activity_date": 1576728109, "creation_date": 1576713065, "last_edit_date": 1576728109, "question_id": 59401554, "link": "https://stackoverflow.com/questions/59401554/way-to-iterate-over-all-combinations-of-two-variables-with-dynamic-limit", "title": "Way to iterate over all combinations of two variables with dynamic limit", "body": "<p>I am looking for some numbers that meet a certain criteria. I would like to check every combination of two numbers within a specified limit, and when that limit is met, I would like to increase it, and check the combinations that I have not yet checked. I would like to do this without hashing/sets as there will be many combinations.</p>\n\n<p>e.g. The following snippet will check every combination, and has a dynamic limit, but it will spend most of it's time checking values that were already checked.</p>\n\n<pre><code>limit = 1000\n\nwhile True:\n    for k in range(limit):\n        for n in range(limit):\n            if k**2 + 8*((2*k*n) + n**2 + (2*n) + (2*k) + 1) == ((k + n + 1)**2) + 7*((2*k*n) + n**2 + (2*n) + (2*k) + 1):\n                pass # Do more checking not pertaining to this question\n    limit += 1 # increase limit\n</code></pre>\n\n<p>This next snippet will be more efficient, but will miss values where k > n:</p>\n\n<pre><code>n = -1\nwhile True:\n    n += 1\n    for k in range(n):\n        if k**2 + 8*((2*k*n) + n**2 + (2*n) + (2*k) + 1) == ((k + n + 1)**2) + 7*((2*k*n) + n**2 + (2*n) + (2*k) + 1):\n            pass # Do more checking not pertaining to this question\n</code></pre>\n\n<p>For some reason, I can't quite wrap my head around getting to every combination, and increasing the limit without repeating. Any help will be much appreciated.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "multiprocessing", "pathos"], "comments": [{"owner": {"reputation": 12117, "user_id": 2745495, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bbcd267235bab78ec6710ef6654ba87?s=128&d=identicon&r=PG", "display_name": "Gino Mempin", "link": "https://stackoverflow.com/users/2745495/gino-mempin"}, "edited": false, "score": 0, "creation_date": 1576727732, "post_id": 59401547, "comment_id": 104994868, "body": "Please <a href=\"https://stackoverflow.com/posts/59401547/edit\">edit</a> to post your actual attempt at &quot;<i>Replacing multiprocessing with multiprocess fails to change the array stored in shared memory</i>, and the full/complete error Traceback you get with your own code."}, {"owner": {"reputation": 1, "user_id": 12561663, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MgLC1fUhNYY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3refQdZ2EejIcTNJ8tcUnKzXFxAKYA/photo.jpg?sz=128", "display_name": "Fernando Martinez", "link": "https://stackoverflow.com/users/12561663/fernando-martinez"}, "reply_to_user": {"reputation": 12117, "user_id": 2745495, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bbcd267235bab78ec6710ef6654ba87?s=128&d=identicon&r=PG", "display_name": "Gino Mempin", "link": "https://stackoverflow.com/users/2745495/gino-mempin"}, "edited": false, "score": 1, "creation_date": 1576788097, "post_id": 59401547, "comment_id": 105020635, "body": "Edited with my modification and the error traceback."}], "owner": {"reputation": 1, "user_id": 12561663, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MgLC1fUhNYY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3refQdZ2EejIcTNJ8tcUnKzXFxAKYA/photo.jpg?sz=128", "display_name": "Fernando Martinez", "link": "https://stackoverflow.com/users/12561663/fernando-martinez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 284, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1576798167, "creation_date": 1576712933, "last_edit_date": 1576788246, "question_id": 59401547, "link": "https://stackoverflow.com/questions/59401547/pathos-multiprocess-fails-to-write-to-shared-memory", "title": "pathos multiprocess fails to write to shared memory", "body": "<p>I'm trying to change the code (<a href=\"https://stackoverflow.com/questions/7894791/use-numpy-array-in-shared-memory-for-multiprocessing\">from this example</a>) to use pathos multiprocess instead of multiprocessing. The example code runs just fine. Replacing multiprocessing with multiprocess fails to change the array stored in shared memory and raises an assertion error. Below is the code with my modification.</p>\n\n<pre><code>import ctypes\nimport logging\nimport multiprocess as mp\n\nfrom contextlib import closing\n\nimport numpy as np\n\ninfo = mp.get_logger().info\n\ndef main():\n    logger = mp.log_to_stderr()\n    logger.setLevel(logging.INFO)\n\n    # create shared array\n    N, M = 100, 11\n    shared_arr = mp.Array(ctypes.c_double, N)\n    arr = tonumpyarray(shared_arr)\n\n    # fill with random values\n    arr[:] = np.random.uniform(size=N)\n    print(arr)\n    arr_orig = arr.copy()\n\n    # write to arr from different processes\n    with closing(mp.Pool(initializer=init, initargs=(shared_arr,))) as p:\n        # many processes access the same slice\n        stop_f = N // 10\n        p.map_async(f, [slice(stop_f)]*M)\n\n        # many processes access different slices of the same array\n        assert M % 2 # odd\n        step = N // 10\n        p.map_async(g, [slice(i, i + step) for i in range(stop_f, N, step)])\n    p.join()\n    print(arr)\n    assert np.allclose(((-1)**M)*tonumpyarray(shared_arr), arr_orig)\n\ndef init(shared_arr_):\n    global shared_arr\n    shared_arr = shared_arr_ # must be inherited, not passed as an argument\n\ndef tonumpyarray(mp_arr):\n    return np.frombuffer(mp_arr.get_obj())\n\ndef f(i):\n    \"\"\"synchronized.\"\"\"\n    with shared_arr.get_lock(): # synchronize access\n        g(i)\n\ndef g(i):\n    \"\"\"no synchronization.\"\"\"\n    info(\"start %s\" % (i,))\n    arr = tonumpyarray(shared_arr)\n    arr[i] = -1 * arr[i]\n    info(\"end   %s\" % (i,))\n\nif __name__ == '__main__':\n    mp.freeze_support()\n    main()\n</code></pre>\n\n<p>Here is the output of script demonstrating undesired behavior (shared array unchanged).</p>\n\n<pre><code>[INFO/MainProcess] allocating a new mmap of length 4096\n[7.53982236e-01 8.91817533e-01 3.42952411e-01 4.81562566e-01\n 8.11524911e-01 9.39701276e-01 2.49035240e-01 9.81663723e-01\n 8.08235711e-01 1.42681227e-01 3.45497140e-01 8.90562288e-01\n 4.35241873e-01 4.60578813e-01 3.46264261e-01 4.93318426e-01\n 3.22399114e-01 7.83147144e-01 9.47066783e-02 5.18534236e-01\n 8.51086344e-01 6.27441844e-01 1.06383034e-01 2.38705882e-01\n 7.97136179e-01 7.86004956e-01 8.66374084e-01 5.17888509e-01\n 8.17624705e-01 9.49644794e-01 6.31860201e-01 5.36854341e-01\n 3.04143232e-01 3.72530617e-01 2.30401250e-01 8.07846412e-02\n 9.07925558e-01 2.83202034e-01 2.29512224e-01 1.10851201e-01\n 7.72062029e-01 3.60300517e-01 5.54688922e-04 5.65488687e-01\n 5.62561777e-01 6.34814941e-01 5.96339057e-01 9.79598924e-01\n 2.09899979e-01 7.15104955e-01 6.55292670e-01 1.68393973e-01\n 9.72467624e-01 8.35882816e-01 7.43016913e-01 4.94503316e-01\n 4.64440104e-01 9.19258107e-01 8.77918280e-01 3.50650473e-02\n 1.78977134e-02 8.37892866e-01 3.97096237e-01 3.98471290e-01\n 1.50104963e-01 6.85465476e-01 8.44218457e-01 5.62325961e-01\n 1.10385518e-01 3.60357701e-01 3.57917840e-01 8.63808991e-01\n 8.39141018e-01 1.79879196e-01 8.02565416e-01 6.78710916e-01\n 9.40750906e-01 6.95072638e-01 4.07945520e-01 8.04220531e-01\n 9.36671866e-01 8.04467890e-01 2.71010169e-01 6.12931552e-02\n 9.13496687e-01 9.94252838e-03 6.29349539e-01 7.82656394e-02\n 6.58311027e-01 9.18628747e-01 9.21899148e-01 6.34954946e-03\n 9.87928873e-01 2.35952899e-01 6.93470029e-01 9.41543773e-01\n 2.27509027e-01 7.76581113e-01 5.76203661e-01 7.70004310e-01]\n[INFO/MainProcess] child process calling self.run()\n[INFO/MainProcess] child process calling self.run()\n[INFO/MainProcess] child process calling self.run()\n[INFO/MainProcess] child process calling self.run()\n[INFO/MainProcess] child process calling self.run()\n[INFO/MainProcess] child process calling self.run()\n[INFO/MainProcess] child process calling self.run()\n[INFO/MainProcess] child process calling self.run()\n[INFO/MainProcess] child process calling self.run()\n[INFO/MainProcess] child process calling self.run()\n[INFO/MainProcess] child process calling self.run()\n[INFO/MainProcess] process shutting down\n[INFO/MainProcess] process exiting with exitcode 0\n[INFO/MainProcess] process shutting down\n[INFO/MainProcess] process exiting with exitcode 0\n[INFO/MainProcess] process shutting down\n[INFO/MainProcess] process shutting down\n[INFO/MainProcess] process exiting with exitcode 0\n[INFO/MainProcess] process shutting down\n[INFO/MainProcess] process exiting with exitcode 0\n[INFO/MainProcess] process shutting down\n[INFO/MainProcess] process exiting with exitcode 0\n[INFO/MainProcess] process shutting down\n[INFO/MainProcess] process exiting with exitcode 0\n[INFO/MainProcess] process exiting with exitcode 0\n[INFO/MainProcess] process shutting down\n[INFO/MainProcess] process exiting with exitcode 0\n[INFO/MainProcess] process shutting down\n[INFO/MainProcess] process exiting with exitcode 0\n[INFO/MainProcess] process shutting down\n[INFO/MainProcess] process exiting with exitcode 0\n[INFO/MainProcess] process shutting down\n[INFO/MainProcess] process exiting with exitcode 0\n[INFO/MainProcess] child process calling self.run()\n[INFO/MainProcess] process shutting down\n[INFO/MainProcess] process exiting with exitcode 0\n[7.53982236e-01 8.91817533e-01 3.42952411e-01 4.81562566e-01\n 8.11524911e-01 9.39701276e-01 2.49035240e-01 9.81663723e-01\n 8.08235711e-01 1.42681227e-01 3.45497140e-01 8.90562288e-01\n 4.35241873e-01 4.60578813e-01 3.46264261e-01 4.93318426e-01\n 3.22399114e-01 7.83147144e-01 9.47066783e-02 5.18534236e-01\n 8.51086344e-01 6.27441844e-01 1.06383034e-01 2.38705882e-01\n 7.97136179e-01 7.86004956e-01 8.66374084e-01 5.17888509e-01\n 8.17624705e-01 9.49644794e-01 6.31860201e-01 5.36854341e-01\n 3.04143232e-01 3.72530617e-01 2.30401250e-01 8.07846412e-02\n 9.07925558e-01 2.83202034e-01 2.29512224e-01 1.10851201e-01\n 7.72062029e-01 3.60300517e-01 5.54688922e-04 5.65488687e-01\n 5.62561777e-01 6.34814941e-01 5.96339057e-01 9.79598924e-01\n 2.09899979e-01 7.15104955e-01 6.55292670e-01 1.68393973e-01\n 9.72467624e-01 8.35882816e-01 7.43016913e-01 4.94503316e-01\n 4.64440104e-01 9.19258107e-01 8.77918280e-01 3.50650473e-02\n 1.78977134e-02 8.37892866e-01 3.97096237e-01 3.98471290e-01\n 1.50104963e-01 6.85465476e-01 8.44218457e-01 5.62325961e-01\n 1.10385518e-01 3.60357701e-01 3.57917840e-01 8.63808991e-01\n 8.39141018e-01 1.79879196e-01 8.02565416e-01 6.78710916e-01\n 9.40750906e-01 6.95072638e-01 4.07945520e-01 8.04220531e-01\n 9.36671866e-01 8.04467890e-01 2.71010169e-01 6.12931552e-02\n 9.13496687e-01 9.94252838e-03 6.29349539e-01 7.82656394e-02\n 6.58311027e-01 9.18628747e-01 9.21899148e-01 6.34954946e-03\n 9.87928873e-01 2.35952899e-01 6.93470029e-01 9.41543773e-01\n 2.27509027e-01 7.76581113e-01 5.76203661e-01 7.70004310e-01]\n</code></pre>\n\n<p>Here is the full traceback.</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\Fernando\\AppData\\Local\\Continuum\\anaconda3\\envs\\fountaintx\\lib\\site-packages\\IPython\\core\\interactiveshell.py\", line 3326, in run_code\n    exec(code_obj, self.user_global_ns, self.user_ns)\n  File \"&lt;ipython-input-2-4f9235b548aa&gt;\", line 1, in &lt;module&gt;\n    runfile('C:/Users/Fernando/.PyCharm2019.2/config/scratches/scratch_1.py', wdir='C:/Users/Fernando/.PyCharm2019.2/config/scratches')\n  File \"C:\\Program Files\\JetBrains\\PyCharm Professional Edition with Anaconda plugin 2019.2.4\\helpers\\pydev\\_pydev_bundle\\pydev_umd.py\", line 197, in runfile\n    pydev_imports.execfile(filename, global_vars, local_vars)  # execute the script\n  File \"C:\\Program Files\\JetBrains\\PyCharm Professional Edition with Anaconda plugin 2019.2.4\\helpers\\pydev\\_pydev_imps\\_pydev_execfile.py\", line 18, in execfile\n    exec(compile(contents+\"\\n\", file, 'exec'), glob, loc)\n  File \"C:/Users/Fernando/.PyCharm2019.2/config/scratches/scratch_1.py\", line 60, in &lt;module&gt;\n    main()\n  File \"C:/Users/Fernando/.PyCharm2019.2/config/scratches/scratch_1.py\", line 37, in main\n    assert np.allclose(((-1)**M)*tonumpyarray(shared_arr), arr_orig)\nAssertionError\n</code></pre>\n"}, {"tags": ["python", "csv", "twitter", "tweepy"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12561690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54c47b208ae13640779245c5d763d27e?s=128&d=identicon&r=PG&f=1", "display_name": "circuitcities", "link": "https://stackoverflow.com/users/12561690/circuitcities"}, "edited": false, "score": 0, "creation_date": 1576806464, "post_id": 59401921, "comment_id": 105025085, "body": "Thanks! Unfortunately, I now get this attribute error: &#39;Status&#39; object has no attribute &#39;full_text&#39;"}, {"owner": {"reputation": 3138, "user_id": 463213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0f387381ec6bd2ede5472a04c769c7?s=128&d=identicon&r=PG", "display_name": "charlesreid1", "link": "https://stackoverflow.com/users/463213/charlesreid1"}, "reply_to_user": {"reputation": 11, "user_id": 12561690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54c47b208ae13640779245c5d763d27e?s=128&d=identicon&r=PG&f=1", "display_name": "circuitcities", "link": "https://stackoverflow.com/users/12561690/circuitcities"}, "edited": false, "score": 0, "creation_date": 1576887383, "post_id": 59401921, "comment_id": 105050914, "body": "Is that coming from the results of the <code>get_status()</code> call using the first <a href=\"https://tweepy.readthedocs.io/en/latest/extended_tweets.html#examples\" rel=\"nofollow noreferrer\">extended tweets</a> example?"}], "tags": [], "owner": {"reputation": 3138, "user_id": 463213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0f387381ec6bd2ede5472a04c769c7?s=128&d=identicon&r=PG", "display_name": "charlesreid1", "link": "https://stackoverflow.com/users/463213/charlesreid1"}, "is_accepted": false, "score": 0, "last_activity_date": 1576716305, "creation_date": 1576716305, "answer_id": 59401921, "question_id": 59401540, "link": "https://stackoverflow.com/questions/59401540/save-extended-tweet-to-csv-with-tweepy/59401921#59401921", "title": "Save extended tweet to CSV with Tweepy?", "body": "<p>As mentioned in the <a href=\"http://docs.tweepy.org/en/latest/cursor_tutorial.html#passing-parameters-into-the-api-method\" rel=\"nofollow noreferrer\">Passing parameters into the API method section of the Cursor Tutorial</a>, keyword arguments fed to <code>tweepy.Cursor()</code> will be passed along to <code>api.search</code> when it is called.</p>\n\n<p>However, <strong>the <code>api.search</code> method does not take a <code>tweet_mode</code> keyword argument</strong> - see <a href=\"https://tweepy.readthedocs.io/en/latest/api.html#help-methods\" rel=\"nofollow noreferrer\"><code>API.search</code></a> in the tweepy documentation. In fact, the only API endpoint that uses it seems to be <a href=\"https://tweepy.readthedocs.io/en/latest/api.html#API.lookup_users\" rel=\"nofollow noreferrer\"><code>api.lookup_users()</code></a> (see <a href=\"https://github.com/tweepy/tweepy/blob/ce2ad288166a72d53cfe5cbc33f0ff8b333379b4/tweepy/api.py#L376\" rel=\"nofollow noreferrer\">source code</a>).</p>\n\n<p>In other words, it seems that the <code>tweet_mode=\"extended\"</code> keyword argument is simply being ignored by the <code>api.search</code> method. If you look at the <a href=\"https://github.com/tweepy/tweepy/blob/ce2ad288166a72d53cfe5cbc33f0ff8b333379b4/tweepy/api.py#L1270-L1272\" rel=\"nofollow noreferrer\">source code</a> it is not used in the final API call.</p>\n\n<p><strong>Two suggestions:</strong></p>\n\n<ol>\n<li><p>If the <code>tweet_mode</code> keyword argument is not actually implemented, you may need to file a bug report in the <a href=\"https://github.com/tweepy/tweepy\" rel=\"nofollow noreferrer\">tweepy repo on Github</a>.</p></li>\n<li><p>Alternatively, try splitting your code into two steps: in the first step, use <code>api.search</code> to get a list of tweet IDs that match your search. Then, use the resulting list of tweet IDs and call <code>api.get_status</code> as per <a href=\"https://tweepy.readthedocs.io/en/latest/extended_tweets.html#examples\" rel=\"nofollow noreferrer\">this example</a>. If their example does not work, that's a good place to start with your bug report in the tweepy repo!</p></li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 12561690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54c47b208ae13640779245c5d763d27e?s=128&d=identicon&r=PG&f=1", "display_name": "circuitcities", "link": "https://stackoverflow.com/users/12561690/circuitcities"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 305, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576887186, "creation_date": 1576712897, "last_edit_date": 1576887186, "question_id": 59401540, "link": "https://stackoverflow.com/questions/59401540/save-extended-tweet-to-csv-with-tweepy", "title": "Save extended tweet to CSV with Tweepy?", "body": "<p>I'm trying to use Tweepy to save extended tweets to a CSV file, but the tweets only continue to show until the 140 character limit. I set the truncated parameter to False and tweet_mode to \"extended,\" but I still can't get the full tweets to display in the CSV file. Any ideas?</p>\n\n<pre><code>#!/usr/bin/python\nimport tweepy\nimport csv #Import csv\nauth = tweepy.auth.OAuthHandler('XXX', 'XXX')\nauth.set_access_token('XXX', 'XXX')\n\napi = tweepy.API(auth)\n\n# Open/create a file to append data to\ncsvFile = open('file.csv', 'a')\n\n#Use csv writer\ncsvWriter = csv.writer(csvFile)\n\nfor tweet in tweepy.Cursor(api.search,\n                           q = \"query\",\n                           truncated = False,\n                           tweet_mode= \"extended\",\n                           since = \"2019-12-11\",\n                           until = \"2019-12-18\",\n                           wait_on_rate_limit = True,\n                           lang = \"en\").items():\n    if (not tweet.retweeted) and ('RT @' not in tweet.full_text):  \n        csvWriter.writerow([tweet.created_at, tweet.full_text.encode('utf-8')])\n        print(tweet.created_at, tweet.full_text)\ncsvFile.close()\n</code></pre>\n"}, {"tags": ["python", "string", "web-scraping"], "comments": [{"owner": {"reputation": 4375, "user_id": 381179, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ebb3d1f5ca7ad690f67bd5e7d2f7fd77?s=128&d=identicon&r=PG", "display_name": "Lagerbaer", "link": "https://stackoverflow.com/users/381179/lagerbaer"}, "edited": false, "score": 1, "creation_date": 1576713027, "post_id": 59401513, "comment_id": 104992121, "body": "For the task of splitting the string, use the aptly named split method: <code>&quot;This,will,work&quot;.split(&#39;,&#39;)</code> gives you a list with three entries, <code>[&quot;This&quot;, &quot;will&quot;, &quot;work&quot;]</code>.  Then for each part you&#39;d do your particular processing.  Looks like you already got <code>re</code> imported, so look into the regular expression matching there."}, {"owner": {"reputation": 33, "user_id": 7679046, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UuUu-YfPQ9o/AAAAAAAAAAI/AAAAAAAAAZk/9eIkAQOaGNk/photo.jpg?sz=128", "display_name": "Francisco Sanchez", "link": "https://stackoverflow.com/users/7679046/francisco-sanchez"}, "reply_to_user": {"reputation": 4375, "user_id": 381179, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ebb3d1f5ca7ad690f67bd5e7d2f7fd77?s=128&d=identicon&r=PG", "display_name": "Lagerbaer", "link": "https://stackoverflow.com/users/381179/lagerbaer"}, "edited": false, "score": 0, "creation_date": 1576713541, "post_id": 59401513, "comment_id": 104992249, "body": "All right @Lagerbaer I&#39;ll read more about regular expressions... Maybe it will be the right way to do what I want... The main problem is that these data doesn&#39;t follows a pattern... Sometimes we get something like &quot;47-4, 82, 26&quot; in other cases I get a &quot;30, 82-10, 26-3&quot; you know? I need to find a way to test these parts"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7679046, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UuUu-YfPQ9o/AAAAAAAAAAI/AAAAAAAAAZk/9eIkAQOaGNk/photo.jpg?sz=128", "display_name": "Francisco Sanchez", "link": "https://stackoverflow.com/users/7679046/francisco-sanchez"}, "edited": false, "score": 0, "creation_date": 1576714375, "post_id": 59401646, "comment_id": 104992443, "body": "man!  You just saved me! Thank you so much, bro! I&#39;m really learning a lot over here! Thanks!"}, {"owner": {"reputation": 33, "user_id": 7679046, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UuUu-YfPQ9o/AAAAAAAAAAI/AAAAAAAAAZk/9eIkAQOaGNk/photo.jpg?sz=128", "display_name": "Francisco Sanchez", "link": "https://stackoverflow.com/users/7679046/francisco-sanchez"}, "edited": false, "score": 0, "creation_date": 1576714417, "post_id": 59401646, "comment_id": 104992449, "body": "You&#39;re amazing!"}, {"owner": {"reputation": 4482, "user_id": 7942856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/756c48bc43c45b11aa15fe52fd20d469?s=128&d=identicon&r=PG&f=1", "display_name": "PacketLoss", "link": "https://stackoverflow.com/users/7942856/packetloss"}, "reply_to_user": {"reputation": 33, "user_id": 7679046, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UuUu-YfPQ9o/AAAAAAAAAAI/AAAAAAAAAZk/9eIkAQOaGNk/photo.jpg?sz=128", "display_name": "Francisco Sanchez", "link": "https://stackoverflow.com/users/7679046/francisco-sanchez"}, "edited": false, "score": 1, "creation_date": 1576715090, "post_id": 59401646, "comment_id": 104992565, "body": "Good to see you&#39;re learning! @FranciscoSanchez I have added another example at the bottom which condenses the above into one line per dimension. Beauty of list comprehension."}, {"owner": {"reputation": 33, "user_id": 7679046, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UuUu-YfPQ9o/AAAAAAAAAAI/AAAAAAAAAZk/9eIkAQOaGNk/photo.jpg?sz=128", "display_name": "Francisco Sanchez", "link": "https://stackoverflow.com/users/7679046/francisco-sanchez"}, "edited": false, "score": 0, "creation_date": 1576716069, "post_id": 59401646, "comment_id": 104992758, "body": "Pretty clean! Someday I&#39;ll be able to code like that! That&#39;s great! lol nowadays my code is awfully ugly. But with practice it will get better."}], "tags": [], "owner": {"reputation": 4482, "user_id": 7942856, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/756c48bc43c45b11aa15fe52fd20d469?s=128&d=identicon&r=PG&f=1", "display_name": "PacketLoss", "link": "https://stackoverflow.com/users/7942856/packetloss"}, "is_accepted": true, "score": 2, "last_activity_date": 1576714939, "last_edit_date": 1576714939, "creation_date": 1576713882, "answer_id": 59401646, "question_id": 59401513, "link": "https://stackoverflow.com/questions/59401513/python-filtering-data-from-a-string-before-in-between-and-after-commas/59401646#59401646", "title": "Python - Filtering data from a string - before, in between and after commas", "body": "<p>The reason you have comma's and values in one strings is due to you calling .join() on the return of the web scrape. </p>\n\n<p>The return is actually a list, and you can use the following to extract the values (regardless of formatting) as long as they are in the same order every time; wide, deep, high. <code>(See below for method of detecting regardless of order)</code></p>\n\n<pre><code>import requests\nfrom lxml import html\nimport re\n\nresp = requests.get(\n                    url=\"https://tyreehouseplans.com/shop/bedrooms/5-bedrooms/avenue/\",\n                    headers={'User-Agent':'Mozilla/5.0 (Windows NT 6.1; Win64; x64) Appl eWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.108 Safari/537.36'}\n)\n\ntree = html.fromstring(html=resp.text)\n\ndimensions = tree.xpath(\"//h3[contains(., 'House Size')]/following-sibling::p/text()\")\n\nwide = dimensions[0].replace('\\n', '').split(' ')[0]\ndeep = dimensions[1].replace('\\n', '').split(' ')[0]\nhigh = dimensions[2].replace('\\n', '').split(' ')[0]\n\n\nprint(wide)\nprint(deep)\nprint(high)\n</code></pre>\n\n<p>This returns;</p>\n\n<pre><code>47\u2032-4\u2033\n82\u2032\n26\u2032\n&gt;&gt;&gt; \n</code></pre>\n\n<p>You will then be able to perform your formatting check per measurement. </p>\n\n<p>EDIT: </p>\n\n<p>If the location of the measurements is variable, or changes. The below code will detect the measurement regardless of order;</p>\n\n<pre><code>import requests\nfrom lxml import html\nimport re\n\nresp = requests.get(\n                    url=\"https://tyreehouseplans.com/shop/bedrooms/5-bedrooms/avenue/\",\n                    headers={'User-Agent':'Mozilla/5.0 (Windows NT 6.1; Win64; x64) Appl eWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.108 Safari/537.36'}\n)\n\ntree = html.fromstring(html=resp.text)\n\ndimensions = tree.xpath(\"//h3[contains(., 'House Size')]/following-sibling::p/text()\")\n\n\nwide = [v for v in dimensions if 'wide' in v]\ndeep = [v for v in dimensions if 'deep' in v]\nhigh = [v for v in dimensions if 'high' in v]\n\nwide = wide[0].replace('\\n', '').split(' ')[0]\ndeep = deep[0].replace('\\n', '').split(' ')[0]\nhigh = high[0].replace('\\n', '').split(' ')[0]\n\n\nprint(wide)\nprint(deep)\nprint(high)\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>You can further condense the above code into nice little one liners for each dimension.</p>\n\n<pre><code>wide = [v.replace('\\n', '').split(' ')[0] for v in dimensions if 'wide' in v][0]\ndeep = [v.replace('\\n', '').split(' ')[0] for v in dimensions if 'deep' in v][0]\nhigh = [v.replace('\\n', '').split(' ')[0] for v in dimensions if 'high' in v][0]\n\nprint(wide)\nprint(deep)\nprint(high)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 7679046, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UuUu-YfPQ9o/AAAAAAAAAAI/AAAAAAAAAZk/9eIkAQOaGNk/photo.jpg?sz=128", "display_name": "Francisco Sanchez", "link": "https://stackoverflow.com/users/7679046/francisco-sanchez"}, "edited": false, "score": 0, "creation_date": 1576714892, "post_id": 59401734, "comment_id": 104992533, "body": "Hey @RichieBendall thanks for your explanation! I&#39;m trying to learn more about regexes! It&#39;s so much powerfull!"}], "tags": [], "owner": {"reputation": 3595, "user_id": 8384910, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tdOxhK4hKB4/AAAAAAAAAAI/AAAAAAAABlk/dWnl8ZxHsdI/photo.jpg?sz=128", "display_name": "Richie Bendall", "link": "https://stackoverflow.com/users/8384910/richie-bendall"}, "is_accepted": false, "score": 2, "last_activity_date": 1576714597, "creation_date": 1576714597, "answer_id": 59401734, "question_id": 59401513, "link": "https://stackoverflow.com/questions/59401513/python-filtering-data-from-a-string-before-in-between-and-after-commas/59401734#59401734", "title": "Python - Filtering data from a string - before, in between and after commas", "body": "<p>A simple strategy of parsing the content is via regexes. In your code, add the following line at the bottom of your code, after <code>dimensions = dimensions.replace('\\n', '')</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>dimensions = re.match(\"(?P&lt;wide&gt;.+) wide,(?P&lt;deep&gt;.+) deep,(?P&lt;high&gt;.+) high\", dimensions).groupdict()\n</code></pre>\n\n<p>You can then obtain the dimensions via normal dict-like methods:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>dimensions[\"wide\"]\ndimensions[\"deep\"]\ndimensions[\"high\"]\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7679046, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-UuUu-YfPQ9o/AAAAAAAAAAI/AAAAAAAAAZk/9eIkAQOaGNk/photo.jpg?sz=128", "display_name": "Francisco Sanchez", "link": "https://stackoverflow.com/users/7679046/francisco-sanchez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 59401646, "answer_count": 2, "score": 0, "last_activity_date": 1576714939, "creation_date": 1576712695, "question_id": 59401513, "link": "https://stackoverflow.com/questions/59401513/python-filtering-data-from-a-string-before-in-between-and-after-commas", "title": "Python - Filtering data from a string - before, in between and after commas", "body": "<p>I'm pretty new to programming and I`m starting learning Python.</p>\n\n<p>For a little web scraping project, I'm using a code that collects via Xpath the following data as string.</p>\n\n<p>The objective is get this data and convert square feet to square meters.</p>\n\n<p><a href=\"https://i.stack.imgur.com/H9jwu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H9jwu.png\" alt=\"enter image description here\"></a></p>\n\n<p>For this example the code returns this string: \"47\u2032-4\u2033 wide,82\u2032 deep,26\u2032 high\"</p>\n\n<p>Here's the code:</p>\n\n<pre><code>import requests\nfrom lxml import html\nimport re\n\nresp = requests.get(\n                    url=\"https://tyreehouseplans.com/shop/bedrooms/5-bedrooms/avenue/\",\n                    headers={'User-Agent':'Mozilla/5.0 (Windows NT 6.1; Win64; x64) Appl eWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.108 Safari/537.36'}\n)\n\ntree = html.fromstring(html=resp.text)\n\ndimensions = tree.xpath(\"//h3[contains(., 'House Size')]/following-sibling::p/text()\")\n\ndimensions = ','.join(dimensions)\n\ndimensions = dimensions.replace('\\n', '')\n\nprint(dimensions)\n</code></pre>\n\n<p>Looking to this string: \"47\u2032-4\u2033 wide,82\u2032 deep,26\u2032 high\" I think the best way to do the conversion is filter the data in three parts: data before the first comma (47-4), then the data in between the first and the second comma (82) and finally the data that is after the second comma (26).</p>\n\n<p>I think if I could get these 3 parts and storing it in three variables, I could test the variables to check when the format is different, for example, if a variable contains hifen (47-4), the script will get the first number as feet and the second as inches, so I can convert both of them to meters, sum and finally get this numbers converted in square meters.</p>\n\n<p>If I test the variable and there's not contains a hifen I just convert feet to meters and that's it =)</p>\n\n<p>Guys, do you think my idea is all right?</p>\n\n<p>If yes, how to divide/get these three parts of this string?</p>\n\n<p>I guess that using the commas as \"pattern\" will be the best way to separate, test and process using an IF...</p>\n\n<p>Could you help me, guys?</p>\n"}, {"tags": ["python", "file"], "comments": [{"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1576712781, "post_id": 59401512, "comment_id": 104992057, "body": "Showing the actual error with surrounding lines would be very helpful."}], "answers": [{"tags": [], "owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 2, "last_activity_date": 1576712857, "creation_date": 1576712857, "answer_id": 59401535, "question_id": 59401512, "link": "https://stackoverflow.com/questions/59401512/being-prevented-from-closing-file-in-python/59401535#59401535", "title": "Being Prevented From Closing File in Python", "body": "<p>The problem is a missing close parenthesis on the line before <code>close</code>.  It should be:</p>\n\n<pre><code>high_scores.write(\"\",winners[[x][0],\" - \",winners[[x][1]],\"\"])\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 11020194, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DskEKEwth4s/AAAAAAAAAAI/AAAAAAAAAfY/98syxLxKiG4/photo.jpg?sz=128", "display_name": "M. Ibtihaz Islam", "link": "https://stackoverflow.com/users/11020194/m-ibtihaz-islam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16, "favorite_count": 0, "closed_date": 1576747019, "answer_count": 1, "score": 0, "last_activity_date": 1576712889, "creation_date": 1576712691, "last_edit_date": 1576712889, "question_id": 59401512, "link": "https://stackoverflow.com/questions/59401512/being-prevented-from-closing-file-in-python", "closed_reason": "Needs details or clarity", "title": "Being Prevented From Closing File in Python", "body": "<p>I am trying to place scores from a 2D Array in to a file and I have arranged them in to descending order and the top highest scores will be put in to a text file for it to be read. </p>\n\n<pre><code>def highScoresList(player,score):\n    length = len(winners)\n    winners.append(\"\")\n    winners.insert(length, player)\n    winners.insert(length, score)\n    if length == 0:\n        length = length\n    else:\n        for x in range (0,length):\n            if winners[[x][1]] &lt; winners[[x+1][1]]:\n                temp = winners[x]\n                winners[x] = winners[x+1]\n                winners[x+1] = temp\n                length += 1\nif length &lt;= 5:\n    count = len(winners)\n    if count &lt; 5:\n        for x in winners:\n            high_scores = open(\"diceScores.txt\",\"w\")\n            high_scores.write(\"\",winners[[x][0],\" - \",winners[[x][1]],\"\"]\n            **high_scores.close()** # Invalid Syntax\n        high_scores = open(\"diceScores.txt\",\"r\")\n        print(high_scores.read())\n        high_scores.close()\n    else:\n        high_scores = open(\"diceScores.txt\",\"a\")\n        for x in range (0,4):\n            high_scores.write(\"\",winners[[x][0],\" - \",winners[[x][1]],\"\"]\n            high_scores.close()\n        high_scores = open(\"diceScores.txt\",\"r\")\n        print(high_scores.read())\n        high_scores.close()\n</code></pre>\n\n<p>When I run the code, there is a syntax error on <code>high_scores.close()</code>> on the 7th line. What can I do to fix it?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 4375, "user_id": 381179, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/ebb3d1f5ca7ad690f67bd5e7d2f7fd77?s=128&d=identicon&r=PG", "display_name": "Lagerbaer", "link": "https://stackoverflow.com/users/381179/lagerbaer"}, "edited": false, "score": 0, "creation_date": 1576713529, "post_id": 59401511, "comment_id": 104992244, "body": "Can you verify from the outside that <code>arg</code> is contained in <code>obj.__dict__</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 162, "user_id": 11505680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7537b6a0dfdbbbba92ab116c29aadf8?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/11505680/ilya"}, "is_accepted": true, "score": 0, "last_activity_date": 1576716302, "creation_date": 1576716302, "answer_id": 59401920, "question_id": 59401511, "link": "https://stackoverflow.com/questions/59401511/pandas-custom-accessor-with-instance-variable/59401920#59401920", "title": "Pandas custom accessor with instance variable", "body": "<p>I got it to work by saying in the method:</p>\n\n<pre><code>obj.foo.__dict__['arg'] = arg\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>obj.foo.arg\n</code></pre>\n"}], "owner": {"reputation": 162, "user_id": 11505680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7537b6a0dfdbbbba92ab116c29aadf8?s=128&d=identicon&r=PG&f=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/11505680/ilya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 59401920, "answer_count": 1, "score": 2, "last_activity_date": 1576716302, "creation_date": 1576712687, "last_edit_date": 1576716116, "question_id": 59401511, "link": "https://stackoverflow.com/questions/59401511/pandas-custom-accessor-with-instance-variable", "title": "Pandas custom accessor with instance variable", "body": "<p>I'm trying to <a href=\"https://pandas.pydata.org/pandas-docs/stable/development/extending.html\" rel=\"nofollow noreferrer\">extend</a> <code>pd.DataFrame</code> with some extra functionality. I have the methods working fine, but I want to store some additional data as an instance variable, and I'm having unexpected trouble.</p>\n\n<p>So far, I have:</p>\n\n<pre><code>@pd.api.extensions.register_dataframe_accessor('foo')\nclass Foo:\n\n    def __init__(self, df):\n        self._df = df\n\n    @staticmethod\n    def load_data(arg):\n        data = doStuff(arg)\n        obj = pd.DataFrame(data)\n        # Remember how this object was made\n        obj.__dict__['arg'] = arg\n        return obj        \n</code></pre>\n\n<p>(The awkward assignment to <code>obj.__dict__</code>, instead of just saying <code>obj.arg = arg</code>, prevents Pandas from treating this as an attempt to make a column. I learned to do this when I once subclassed DataFrame, which was quite a headache.)</p>\n\n<p>Then I do:</p>\n\n<pre><code>obj = Foo.load_data('stuff')\nobj.arg\nobj.foo.arg\nobj.foo._df.arg\n</code></pre>\n\n<p>Each of the last 3 lines leads to an <code>AttributeError</code>. I know I assigned the property... where did it go?</p>\n"}, {"tags": ["python", "audio", "pygame"], "comments": [{"owner": {"reputation": 12260, "user_id": 1730895, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6abb0b52473d614852289b49ccf3c3c?s=128&d=identicon&r=PG", "display_name": "Kingsley", "link": "https://stackoverflow.com/users/1730895/kingsley"}, "edited": false, "score": 0, "creation_date": 1576713488, "post_id": 59401509, "comment_id": 104992232, "body": "Please update the code to show the event processing - as the window is dragged, a lot of events are generated, maybe the handling of these is helping.  Are you waiting long enough for the sound to play?  The <code>music.play()</code> function returns somewhat immediately."}, {"owner": {"reputation": 132, "user_id": 1339178, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/677373ee0a6dc88b3e51837b94866326?s=128&d=identicon&r=PG", "display_name": "cookertron", "link": "https://stackoverflow.com/users/1339178/cookertron"}, "edited": false, "score": 0, "creation_date": 1576724711, "post_id": 59401509, "comment_id": 104994318, "body": "Are you checking for events? Try adding e = pygame.event.get() in your main loop"}, {"owner": {"reputation": 15, "user_id": 12561688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607214a0a349195e7c41c046c6efe188?s=128&d=identicon&r=PG&f=1", "display_name": "PieroCamposeo", "link": "https://stackoverflow.com/users/12561688/pierocamposeo"}, "edited": false, "score": 0, "creation_date": 1576774954, "post_id": 59401509, "comment_id": 105015518, "body": "Kingsley and cookertron thank you for the replies! Please help me with my other query if you have the time."}], "owner": {"reputation": 15, "user_id": 12561688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/607214a0a349195e7c41c046c6efe188?s=128&d=identicon&r=PG&f=1", "display_name": "PieroCamposeo", "link": "https://stackoverflow.com/users/12561688/pierocamposeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 1, "closed_date": 1608369735, "answer_count": 0, "score": 0, "last_activity_date": 1608369755, "creation_date": 1576712683, "question_id": 59401509, "link": "https://stackoverflow.com/questions/59401509/why-am-i-getting-this-error-with-audio-in-pygame", "closed_reason": "Duplicate", "title": "Why am I getting this error with audio in PyGame?", "body": "<p>I am currently having a certain error with background audio on my file in PyGame.</p>\n\n<p>I have imported pygame mixer, initialized it, and used the following code:</p>\n\n<pre><code>pygame.mixer.music.load(open(\"BACKGROUND.mp3\",\"rb\"))\npygame.mixer.music.play()\n</code></pre>\n\n<p>The sound only plays when I am dragging / holding the window. Any idea why this may occur?\nPlease help this is for a school project.</p>\n"}, {"tags": ["python", "google-cloud-dataflow", "pickle", "apache-beam"], "comments": [{"owner": {"reputation": 2428, "user_id": 3226630, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/06d6d868f99ab0a0990d789b53f3c6b0?s=128&d=identicon&r=PG&f=1", "display_name": "Jayadeep Jayaraman", "link": "https://stackoverflow.com/users/3226630/jayadeep-jayaraman"}, "edited": false, "score": 0, "creation_date": 1576754203, "post_id": 59401463, "comment_id": 105004596, "body": "What version of apache beam are you using ?"}, {"owner": {"reputation": 21, "user_id": 12561658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9efa5792e2a381b4766befc32eb87025?s=128&d=identicon&r=PG&f=1", "display_name": "ash", "link": "https://stackoverflow.com/users/12561658/ash"}, "reply_to_user": {"reputation": 2428, "user_id": 3226630, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/06d6d868f99ab0a0990d789b53f3c6b0?s=128&d=identicon&r=PG&f=1", "display_name": "Jayadeep Jayaraman", "link": "https://stackoverflow.com/users/3226630/jayadeep-jayaraman"}, "edited": false, "score": 0, "creation_date": 1576761334, "post_id": 59401463, "comment_id": 105008054, "body": "Hi. I am using on apache-beam 2.16.0. The python version is  3.5.3. I am running the program from a GCP AI Platform Jupyter Notebook."}, {"owner": {"reputation": 2428, "user_id": 3226630, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/06d6d868f99ab0a0990d789b53f3c6b0?s=128&d=identicon&r=PG&f=1", "display_name": "Jayadeep Jayaraman", "link": "https://stackoverflow.com/users/3226630/jayadeep-jayaraman"}, "edited": false, "score": 0, "creation_date": 1576762326, "post_id": 59401463, "comment_id": 105008572, "body": "Can you share a sample of how you are running it from the notebook?"}, {"owner": {"reputation": 21, "user_id": 12561658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9efa5792e2a381b4766befc32eb87025?s=128&d=identicon&r=PG&f=1", "display_name": "ash", "link": "https://stackoverflow.com/users/12561658/ash"}, "reply_to_user": {"reputation": 2428, "user_id": 3226630, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/06d6d868f99ab0a0990d789b53f3c6b0?s=128&d=identicon&r=PG&f=1", "display_name": "Jayadeep Jayaraman", "link": "https://stackoverflow.com/users/3226630/jayadeep-jayaraman"}, "edited": false, "score": 0, "creation_date": 1576772709, "post_id": 59401463, "comment_id": 105014344, "body": "@JayadeepJayaraman. Thanks for the help. I have included the main parts of the jupyter notebook code.."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 12561658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9efa5792e2a381b4766befc32eb87025?s=128&d=identicon&r=PG&f=1", "display_name": "ash", "link": "https://stackoverflow.com/users/12561658/ash"}, "edited": false, "score": 0, "creation_date": 1577027384, "post_id": 59437054, "comment_id": 105073429, "body": "Thanks Jayadeep. I will try out with beam 2.17 and see how that goes."}], "tags": [], "owner": {"reputation": 2428, "user_id": 3226630, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/06d6d868f99ab0a0990d789b53f3c6b0?s=128&d=identicon&r=PG&f=1", "display_name": "Jayadeep Jayaraman", "link": "https://stackoverflow.com/users/3226630/jayadeep-jayaraman"}, "is_accepted": false, "score": 1, "last_activity_date": 1576939025, "creation_date": 1576939025, "answer_id": 59437054, "question_id": 59401463, "link": "https://stackoverflow.com/questions/59401463/dataflow-pickling-error-when-submitting-jobs/59437054#59437054", "title": "Dataflow Pickling Error When Submitting Jobs", "body": "<p>I believe this is related to <a href=\"https://issues.apache.org/jira/browse/BEAM-8651\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/BEAM-8651</a> where the pickler.py [1] has issues with dill. You can upgrade your beam version to 2.17 version and see if this resolves the issue.</p>\n\n<p>1 - <a href=\"https://github.com/apache/beam/blob/master/sdks/python/apache_beam/internal/pickler.py\" rel=\"nofollow noreferrer\">https://github.com/apache/beam/blob/master/sdks/python/apache_beam/internal/pickler.py</a></p>\n"}], "owner": {"reputation": 21, "user_id": 12561658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9efa5792e2a381b4766befc32eb87025?s=128&d=identicon&r=PG&f=1", "display_name": "ash", "link": "https://stackoverflow.com/users/12561658/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 731, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1576939025, "creation_date": 1576712286, "last_edit_date": 1592644375, "question_id": 59401463, "link": "https://stackoverflow.com/questions/59401463/dataflow-pickling-error-when-submitting-jobs", "title": "Dataflow Pickling Error When Submitting Jobs", "body": "<p>I have this weird issue while submitting apache-beam jobs to GCP DataFlow. Sometimes the code runs fine and the execution is successful. However, occasionally I get the following pickling related error while trying to submit the same job (with no code changes). The final error is a <code>'KeyError: 'ClassType' </code> message. Any clues as to why this happens occasionally?</p>\n<pre><code>DataflowRuntimeException                  Traceback (most recent call last)\n&lt;ipython-input-8-90e709657cb0&gt; in &lt;module&gt;\n----&gt; 1 preprocess_reg('DataflowRunner')\n\n&lt;ipython-input-7-3200c06db079&gt; in preprocess_reg(RUNNER)\n     45                         | 'ExtractOnlyWords' &gt;&gt; beam.Map(lambda contents: contents[1])\n     46                         | 'FlattenSentenceList' &gt;&gt; beam.FlatMap(lambda contents: contents)\n---&gt; 47                         | 'WriteCompleteFiles' &gt;&gt; beam.io.WriteToText(output_prefix_com,append_trailing_newlines=True))\n     48 \n\n/usr/local/lib/python3.5/dist-packages/apache_beam/pipeline.py in __exit__(self, exc_type, exc_val, exc_tb)\n    425   def __exit__(self, exc_type, exc_val, exc_tb):\n    426     if not exc_type:\n--&gt; 427       self.run().wait_until_finish()\n    428 \n    429   def visit(self, visitor):\n\n/usr/local/lib/python3.5/dist-packages/apache_beam/runners/dataflow/dataflow_runner.py in wait_until_finish(self, duration)\n   1345         raise DataflowRuntimeException(\n   1346             'Dataflow pipeline failed. State: %s, Error:\\n%s' %\n-&gt; 1347             (self.state, getattr(self._runner, 'last_error_msg', None)), self)\n   1348     return self.state\n   1349 \n\nDataflowRuntimeException: Dataflow pipeline failed. State: FAILED, Error:\nTraceback (most recent call last):\n  File &quot;/usr/local/lib/python3.5/site-packages/apache_beam/internal/pickler.py&quot;, line 261, in loads\n    return dill.loads(s)\n  File &quot;/usr/local/lib/python3.5/site-packages/dill/_dill.py&quot;, line 317, in loads\n    return load(file, ignore)\n  File &quot;/usr/local/lib/python3.5/site-packages/dill/_dill.py&quot;, line 305, in load\n    obj = pik.load()\n  File &quot;/usr/local/lib/python3.5/site-packages/dill/_dill.py&quot;, line 577, in _load_type\n    return _reverse_typemap[name]\nKeyError: 'ClassType'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File &quot;/usr/local/lib/python3.5/site-packages/dataflow_worker/batchworker.py&quot;, line 649, in do_work\n    work_executor.execute()\n  File &quot;/usr/local/lib/python3.5/site-packages/dataflow_worker/executor.py&quot;, line 176, in execute\n    op.start()\n  File &quot;apache_beam/runners/worker/operations.py&quot;, line 587, in apache_beam.runners.worker.operations.DoOperation.start\n  File &quot;apache_beam/runners/worker/operations.py&quot;, line 588, in apache_beam.runners.worker.operations.DoOperation.start\n  File &quot;apache_beam/runners/worker/operations.py&quot;, line 589, in apache_beam.runners.worker.operations.DoOperation.start\n  File &quot;apache_beam/runners/worker/operations.py&quot;, line 220, in apache_beam.runners.worker.operations.Operation.start\n  File &quot;apache_beam/runners/worker/operations.py&quot;, line 224, in apache_beam.runners.worker.operations.Operation.start\n  File &quot;apache_beam/runners/worker/operations.py&quot;, line 535, in apache_beam.runners.worker.operations.DoOperation.setup\n  File &quot;apache_beam/runners/worker/operations.py&quot;, line 540, in apache_beam.runners.worker.operations.DoOperation.setup\n  File &quot;/usr/local/lib/python3.5/site-packages/apache_beam/internal/pickler.py&quot;, line 265, in loads\n    return dill.loads(s)\n  File &quot;/usr/local/lib/python3.5/site-packages/dill/_dill.py&quot;, line 317, in loads\n    return load(file, ignore)\n  File &quot;/usr/local/lib/python3.5/site-packages/dill/_dill.py&quot;, line 305, in load\n    obj = pik.load()\n  File &quot;/usr/local/lib/python3.5/site-packages/dill/_dill.py&quot;, line 577, in _load_type\n    return _reverse_typemap[name]\n**KeyError: 'ClassType'**\n</code></pre>\n<p>Below is a sample of the notebook code:</p>\n<h2>ParDo Function Cell</h2>\n<pre><code>class WordExtractingDoFn_Final(beam.DoFn):    \n\ndef __init__(self,min_chg_year=2009):\n    # TODO(BEAM-6158): Revert the workaround once we can pickle super() on py3.\n    # super(WordExtractingDoFn, self).__init__()\n    beam.DoFn.__init__(self)\n    self.min_chg_year = min_chg_year\n\n\ndef process(self, element):\n    &quot;&quot;&quot;Returns parsed text after parsing by beautiful soup\n    Args:\n      element: the element being processed\n    Returns:\n      The processed element.\n    &quot;&quot;&quot;\n    from bs4 import BeautifulSoup #import stmts in the function to facilitate worker access\n    import re       \n    \n    re_headings = re.compile(r'.*(staff|participants.|committee)+.*(economic|financial|policy)+.*\\s*.*',re.IGNORECASE) #regex for clear topics\n    re_start_para = re.compile(r'By unanimous vot.* [\\w\\n\\s]*[.]',re.IGNORECASE) #regex for indication of start of actual meat of minutes\n    re_end_para = re.compile(r'Vot.* for this \\w+',re.IGNORECASE) #regex for indicating where the minutes stop\n    re_year = re.compile(r'[\\d]{4}') # regex for extracting year from file name in element(1)\n    statement = BeautifulSoup(element[1], 'html.parser')       \n    headings = statement.findAll('strong') \n    words = ''\n    \n    #file year. topics only work for minutes after 2008.\n    tgt_year = int(re.search(re_year,element[0]).group(0)) #extract year from file name\n            \n    #case where there are clear topics within the meeting minutes. this happened from 2011.\n    if tgt_year &gt;= self.min_chg_year and len(headings) &gt;=2:\n        for heading in headings:\n            result = re.search(re_headings,heading.text)\n            if result!= None:\n                start = statement.text.find(heading.text) + len(heading.text)\n                target = heading.findNext('strong')\n                if target!=None:\n                    end = statement.text.find(target.text)\n                else:\n                    end = len(statement.text)\n                content = statement.text[start:end]                 \n                words = words + content  \n        \n    \n    #case where there are no topic within minutes. Have to determine where to start and stop\n    else:\n        results_start = re.finditer(re_start_para,statement.text)\n        results_end = re.finditer(re_end_para,statement.text)\n        \n        try:\n            first,*_ = results_end #unpacking of iteration. we need the first occurence of 'Voted for this**'\n            start_pos = 0 #set the initial starting position to be zero\n            end_pos = first.start()\n            #check for the first start position that is before the end position\n            for x in results_start:\n                if x.end() &gt;= end_pos: \n                    break\n                else:\n                    start_pos = x.end()\n            if (start_pos!=0):                \n                content = statement.text[start_pos:end_pos] #use the spans from first and last to determine text to extract\n                words = content\n            else:\n                print ('file had a 0 start {}'.format(element[0])) \n        except:\n            print ('file had issues {}'.format(element[0]))\n            pass\n        \n    #split the paragraphs into sentences\n    \n    if len(words) &gt; 0:\n        re_us = re.compile(r'(U\\.S\\.).') #U.S. gives issues while trying to split. replace with USA \n        filtered_str = re.sub(re_us,'USA ',words)\n        \n        re_blank = re.compile(r'(\\\\\\\\r\\\\\\\\n|(\\s){2,})') #filter out unwanted spaces, tabs. especially from older html files\n        filtered_str = re.sub(re_blank,' ',filtered_str)\n        \n        \n        re_encode_issues = re.compile(r'(\\\\x.{2})') #encoding issues with utf\n        filtered_str = re.sub(re_encode_issues,'',filtered_str)\n        \n        re_apos_issues = re.compile(r&quot;(\\\\')&quot;) #encoding issues with utf\n        filtered_str = re.sub(re_apos_issues,'',filtered_str)\n        \n        #next, split the file\n        words = re.split(r'[\\.?:][:&quot;\\\\\\\\n\\s]+',filtered_str)\n        \n        \n    return [(element[0],words)] \n</code></pre>\n<h2>DataFlow Execution Cell</h2>\n<pre><code>def preprocess_reg(RUNNER):\n    job_name = '********' + '-' + datetime.datetime.now().strftime('%y%m%d-%H%M%S')\n    print('Launching Dataflow job {} ... hang on'.format(job_name))\n    OUTPUT_DIR = 'gs://{0}/d***/processed'.format(BUCKET) \n    INPUT_FILES = 'gs://{0}/raw/minutes/**/*'.format(BUCKET) \n    output_prefix_com = 'gs://{0}/******/dataflowprocessing-trial'.format(BUCKET)\n\n    #dictionary of pipeline options\n    options = {\n    'staging_location': os.path.join(OUTPUT_DIR, 'tmp', 'staging'),\n    'temp_location': os.path.join(OUTPUT_DIR, 'tmp'),\n    'job_name': 'prep******' + '-' + \n     datetime.datetime.now().strftime('%y%m%d-%H%M%S'),\n    'project': PROJECT,\n    'runner': RUNNER,\n    'num_workers' : 2,\n    'max_num_workers': 3        \n    }\n    #instantiate PipelineOptions obj_ect using options dictionary\n    opts = beam.pipeline.PipelineOptions(flags=[], **options)\n    #instantantiate Pipeline object using PipelineOptions\n\n    with beam.Pipeline(options=opts) as p:\n        readable_files = (p \n                    | fileio.MatchFiles(INPUT_FILES)\n                    | fileio.ReadMatches()\n                    | beam.Reshuffle())\n\n        files_and_contents = (readable_files \n                        | 'ReadFilesOneByOne' &gt;&gt; beam.Map(lambda x: (x.metadata.path, \n                                              x.read())))\n\n        extract_process = (files_and_contents                       \n                    | 'ProcesswithBS' &gt;&gt; beam.ParDo(WordExtractingDoFn_Final()))\n\n    #use the filter function to write only files where the parsing WordExtractingDoFn was successful\n        write_process = (extract_process\n                    | 'FilterforFilesWithContent' &gt;&gt; beam.Filter(lambda contents: len(contents[1]) &gt; 0) \n                    | 'ExtractOnlyWords' &gt;&gt; beam.Map(lambda contents: contents[1])\n                    | 'FlattenSentenceList' &gt;&gt; beam.FlatMap(lambda contents: contents)\n                    | 'WriteCompleteFiles' &gt;&gt; beam.io.WriteToText(output_prefix_com,append_trailing_newlines=True))\n</code></pre>\n"}, {"tags": ["python", "image", "io", "gif"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10307699, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tWkRZQLLx_8/AAAAAAAAAAI/AAAAAAAAAIQ/A1m-mptbZIc/photo.jpg?sz=128", "display_name": "Digit", "link": "https://stackoverflow.com/users/10307699/digit"}, "edited": false, "score": 0, "creation_date": 1576720293, "post_id": 59401774, "comment_id": 104993549, "body": "Thank you for this, I did that same procedure with two images that had failed and they both worked fine after. Do you have any idea how I could go about repairing them? I&#39;m wondering if it might have something to do with extensions rather noncompliance to the standard."}], "tags": [], "owner": {"reputation": 2212, "user_id": 6770842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tjxUi.png?s=128&g=1", "display_name": "sciroccorics", "link": "https://stackoverflow.com/users/6770842/sciroccorics"}, "is_accepted": true, "score": 0, "last_activity_date": 1576714963, "creation_date": 1576714963, "answer_id": 59401774, "question_id": 59401405, "link": "https://stackoverflow.com/questions/59401405/how-to-read-and-write-gifs-in-python-pil-and-imageio-dont-seem-to-work/59401774#59401774", "title": "How to Read and Write gifs in python, PIL and imageio don&#39;t seem to work", "body": "<p>I quite convinced that your test image does not fully respect the GIF standard: even some image viewer don't show the correct animation (however it does display correctly in all browsers I've tested). This could explain that you notice the problem for only a few of your test images.</p>\n\n<p>To check this intuition, I extracted all frames, and use them to regenerate the animation in a new GIF file (many software exist for such a task, you may even use some online web sites for this). And guess what ? This new file didn't show any problem with PIL.</p>\n"}], "owner": {"reputation": 3, "user_id": 10307699, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tWkRZQLLx_8/AAAAAAAAAAI/AAAAAAAAAIQ/A1m-mptbZIc/photo.jpg?sz=128", "display_name": "Digit", "link": "https://stackoverflow.com/users/10307699/digit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 552, "favorite_count": 0, "accepted_answer_id": 59401774, "answer_count": 1, "score": -1, "last_activity_date": 1576714963, "creation_date": 1576711817, "question_id": 59401405, "link": "https://stackoverflow.com/questions/59401405/how-to-read-and-write-gifs-in-python-pil-and-imageio-dont-seem-to-work", "title": "How to Read and Write gifs in python, PIL and imageio don&#39;t seem to work", "body": "<p>I've been trying for about a day now to read gif files for an image viewer in python but nothing has worked. Most files load fine, but some retain artifacts from the image frames being incorrectly processed. From what I've read, it seems to have something to do with PIL's management of transparency and/or its way of converting between RGBA and PA image modes. The simplest example of simply loading and then saving the gif with imageio is shown below.</p>\n\n<pre><code>import imageio\ngif = imageio.mimread(\"test.gif\")\nimageio.mimwrite(\"out.gif\", gif)\n</code></pre>\n\n<p>which is analogous to this with PIL:</p>\n\n<pre><code>from PIL import Image\n\ngif = Image.open(\"test.gif\")\ngif.save(\"out.gif\", save_all=True)\n</code></pre>\n\n<p>Both produce the same result, which is not surprising as imageio is dependent on PIL</p>\n\n<p>I've tried every combination of commands and arguments that I could find that looked like they may help, like manually setting the palette and transparency, and using the different \"disposal\" values to change the way the frames are combined. I've also tried using seek() to extract all the frames into an array and created a gif from them, but it seems that PIL is just not capable of properly parsing some GIFs. Here is an example input and output:\n(The second gif's color palette has been compressed to get it under 2MB but it is a negligible difference if any)</p>\n\n<p><a href=\"https://i.stack.imgur.com/9Pr7P.gif\" rel=\"nofollow noreferrer\">input gif</a> <a href=\"https://i.stack.imgur.com/Pyx0Y.gif\" rel=\"nofollow noreferrer\">output gif</a></p>\n"}, {"tags": ["python", "string", "split"], "comments": [{"owner": {"reputation": 2423, "user_id": 6007566, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2dc2e86664941a748f0dab92216d67c6?s=128&d=identicon&r=PG&f=1", "display_name": "Boendal", "link": "https://stackoverflow.com/users/6007566/boendal"}, "edited": false, "score": 0, "creation_date": 1576712925, "post_id": 59401404, "comment_id": 104992099, "body": "case 5 and 6 are identical. You can&#39;t decide if Kostadin/Alcievski is the lastname or firstname without more information. So one will be wrong and the other will be right."}, {"owner": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "reply_to_user": {"reputation": 2423, "user_id": 6007566, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2dc2e86664941a748f0dab92216d67c6?s=128&d=identicon&r=PG&f=1", "display_name": "Boendal", "link": "https://stackoverflow.com/users/6007566/boendal"}, "edited": false, "score": 0, "creation_date": 1576713034, "post_id": 59401404, "comment_id": 104992122, "body": "If there is one string other than dob, will consider it fname. That&#39;s okay @Boendal"}], "answers": [{"comments": [{"owner": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "edited": false, "score": 0, "creation_date": 1576713771, "post_id": 59401566, "comment_id": 104992297, "body": "First and Lastname can at times have special characters like &quot;-&quot; and space"}, {"owner": {"reputation": 2020, "user_id": 3279603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zp3k.jpg?s=128&g=1", "display_name": "aminrd", "link": "https://stackoverflow.com/users/3279603/aminrd"}, "reply_to_user": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "edited": false, "score": 0, "creation_date": 1576713840, "post_id": 59401566, "comment_id": 104992311, "body": "@Simrankaur Then you can easily add them to accepting characters in the regular expression"}, {"owner": {"reputation": 2423, "user_id": 6007566, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2dc2e86664941a748f0dab92216d67c6?s=128&d=identicon&r=PG&f=1", "display_name": "Boendal", "link": "https://stackoverflow.com/users/6007566/boendal"}, "edited": false, "score": 1, "creation_date": 1576713893, "post_id": 59401566, "comment_id": 104992324, "body": "@aminrd but space is also a delimiter for first and lastname"}], "tags": [], "owner": {"reputation": 2020, "user_id": 3279603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zp3k.jpg?s=128&g=1", "display_name": "aminrd", "link": "https://stackoverflow.com/users/3279603/aminrd"}, "is_accepted": false, "score": 1, "last_activity_date": 1576713161, "creation_date": 1576713161, "answer_id": 59401566, "question_id": 59401404, "link": "https://stackoverflow.com/questions/59401404/python-string-operation-to-get-firstname-lastname-and-dob-from-a-string/59401566#59401566", "title": "python string operation to get firstname lastname and dob from a string", "body": "<pre class=\"lang-py prettyprint-override\"><code>import re\n\npatient = \"Alcievski,Kostadin26:07:1937\"\n\n# Assuming that first name and last name only contains alphabets\nnames = re.findall(\"[a-zA-Z]+\", patient)\n\nif len(names) &gt; 0:\n    patient_first_name = names[0]\n    if len(names) &gt; 1:\n        patient_last_name = names[1]\n\n# Assuming that date format is always %d:%m:%Y\ndate_format = re.findall(\"\\d\\d:\\d\\d:\\d\\d\\d\\d\", patient)\nif len(date_format) &gt; 0: \n    patient_dob_string = date_format[0]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "edited": false, "score": 0, "creation_date": 1576882529, "post_id": 59402030, "comment_id": 105050048, "body": "Thanks. What if &#39;Alcievski, Kostadin, 26:07:1937 (1)&#39;"}, {"owner": {"reputation": 3671, "user_id": 2826937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmIdz.png?s=128&g=1", "display_name": "Alexandr Shurigin", "link": "https://stackoverflow.com/users/2826937/alexandr-shurigin"}, "reply_to_user": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "edited": false, "score": 1, "creation_date": 1576951480, "post_id": 59402030, "comment_id": 105061134, "body": "It will pass the regex but <code>(1)</code> will be skipped since it is not a part of the date/time string expected"}, {"owner": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "edited": false, "score": 0, "creation_date": 1577390827, "post_id": 59402030, "comment_id": 105160127, "body": "great. Also what if Alcievski,Kostadin,26:07:37 or Alcievski,Kostadin,26-07-37"}, {"owner": {"reputation": 3671, "user_id": 2826937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmIdz.png?s=128&g=1", "display_name": "Alexandr Shurigin", "link": "https://stackoverflow.com/users/2826937/alexandr-shurigin"}, "reply_to_user": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "edited": false, "score": 1, "creation_date": 1577393819, "post_id": 59402030, "comment_id": 105160861, "body": "These cases are not covered since not listed in the requirements, but it could be updated easy to the mask which supports just any &quot;-:&quot; between numbers"}], "tags": [], "owner": {"reputation": 3671, "user_id": 2826937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KmIdz.png?s=128&g=1", "display_name": "Alexandr Shurigin", "link": "https://stackoverflow.com/users/2826937/alexandr-shurigin"}, "is_accepted": true, "score": 1, "last_activity_date": 1576717315, "creation_date": 1576717315, "answer_id": 59402030, "question_id": 59401404, "link": "https://stackoverflow.com/questions/59401404/python-string-operation-to-get-firstname-lastname-and-dob-from-a-string/59402030#59402030", "title": "python string operation to get firstname lastname and dob from a string", "body": "<p>Working example from me. Covers the listed in the requirements and other possible cases I can imagine :)</p>\n\n<pre><code>import re\nfrom pprint import pprint\n\nsources = [\n    'Alcievski, Kostadin 26:07:1937',\n    'Alcievski',\n    'Alcievski, Kostadin, 26:07:1937',\n    'Alcievski Kostadin 26:07:1937',\n    'Alcievski 26:07:1937',\n    'Kostadin 26:07:1937',\n    'Alcievski,Kostadin 26:07:1937',\n    'Alcievski,Kostadin26:07:1937',\n    'Alcievski,Kostadin,26:07:1937',\n]\n\ndata = []\nfor item in sources:\n    m = re.match('(.*?)(\\d+:\\d+:\\d+)', item)\n    if not m:\n        continue\n\n    dob = m.group(2)\n\n    names = m.group(1).strip(' ,')\n    names = re.split('[\\s,]+', names)\n\n    data.append((names.pop(0), next(iter(names), None), dob))\n\npprint(data)\n</code></pre>\n\n<p>Outputs</p>\n\n<pre><code># &gt; python test.py\n[('Alcievski', 'Kostadin', '26:07:1937'),\n ('Alcievski', 'Kostadin', '26:07:1937'),\n ('Alcievski', 'Kostadin', '26:07:1937'),\n ('Alcievski', None, '26:07:1937'),\n ('Kostadin', None, '26:07:1937'),\n ('Alcievski', 'Kostadin', '26:07:1937'),\n ('Alcievski', 'Kostadin', '26:07:1937'),\n ('Alcievski', 'Kostadin', '26:07:1937')]\n</code></pre>\n"}], "owner": {"reputation": 2866, "user_id": 2699001, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/09lZu.jpg?s=128&g=1", "display_name": "S Khurana", "link": "https://stackoverflow.com/users/2699001/s-khurana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 59402030, "answer_count": 2, "score": 0, "last_activity_date": 1577390804, "creation_date": 1576711814, "last_edit_date": 1577390804, "question_id": 59401404, "link": "https://stackoverflow.com/questions/59401404/python-string-operation-to-get-firstname-lastname-and-dob-from-a-string", "title": "python string operation to get firstname lastname and dob from a string", "body": "<p>String could be in a number of formats:</p>\n\n<ol>\n<li>Alcievski, Kostadin 26:07:1937</li>\n<li>Alcievski</li>\n<li>Alcievski, Kostadin, 26:07:1937</li>\n<li>Alcievski Kostadin 26:07:1937</li>\n<li>Alcievski 26:07:1937</li>\n<li>Kostadin 26:07:1937</li>\n<li>Alcievski,Kostadin 26:07:1937</li>\n<li>Alcievski,Kostadin26:07:1937</li>\n<li>Alcievski,Kostadin,26:07:1937</li>\n<li>Alcievski,Kostadin,26:07:1937 (1)</li>\n<li>Alcievski,Kostadin,26:07:37</li>\n<li>Alcievski,Kostadin,26-07-37</li>\n</ol>\n\n<p>Here's what I have so far:</p>\n\n<pre><code>            patient_first_name = patient.split(' ')[1]\n            if patient_first_name == ',':\n                patient_first_name = patient.split(',')[1]\n\n            if not patient_first_name or \":\" in patient_first_name:\n                patient_first_name = ''\n\n\n           patient_last_name = patient.rpartition(',')[0]\n\n           if not  patient_last_name:\n                patient_last_name = patient.split(' ')[0]\n\n\n       split_pat = patient.rpartition(' ')\n        patient_dob = split_pat[len(split_pat) - 1]\n        patient_dob_string = datetime.strptime(patient_dob, '%d:%m:%Y')\n</code></pre>\n\n<p>But ofcourse it does not work for all the formats. How can I modify this code to give me <code>fname</code>, <code>lname</code> and <code>dob</code> with all such varitations.</p>\n"}, {"tags": ["python", "image", "opencv", "image-processing", "computer-vision"], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 10308015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8717f5cfb895407b9cc9e342f8006085?s=128&d=identicon&r=PG", "display_name": "Ovcheric", "link": "https://stackoverflow.com/users/10308015/ovcheric"}, "edited": false, "score": 2, "creation_date": 1576780412, "post_id": 59402625, "comment_id": 105017785, "body": "Wow, that was way more complicated than I thought it would be. Thanks!"}], "tags": [], "owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "is_accepted": true, "score": 4, "last_activity_date": 1576786643, "last_edit_date": 1576786643, "creation_date": 1576723279, "answer_id": 59402625, "question_id": 59401389, "link": "https://stackoverflow.com/questions/59401389/how-to-isolate-everything-inside-of-a-contour-scale-it-and-test-the-similarity/59402625#59402625", "title": "How to isolate everything inside of a contour, scale it, and test the similarity to an image?", "body": "<p>This situation is perfect for <a href=\"https://opencv-python-tutroals.readthedocs.io/en/latest/py_tutorials/py_imgproc/py_template_matching/py_template_matching.html#template-matching\" rel=\"nofollow noreferrer\">template matching</a>. The idea is to search and find the location of a template image within a larger image. To perform this method, the template slides over the input image (similar to 2D convolution) where comparison methods are performed to determine pixel similarity. This is the basic idea behind template matching. Unfortunately, this basic method has flaws since it only works if the template image size is the same as the desired item to find in the input image. So if your template image was smaller than the desired region to find in the input image, this method would not work.</p>\n\n<p>To get around this limitation, we can implement scale variant template matching by dynamically rescaling the image using <code>np.linspace()</code>. With each iteration, we resize the input image and keep track of the ratio. We continue resizing until the template image size is larger than the resized image while keeping track of the highest correlation value. A higher correlation value means a better match. Once we iterate through various scales, we find the ratio with the largest match and then compute the coordinates of the bounding box to determine the ROI.</p>\n\n<hr>\n\n<p>Using your template image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/rBfOL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rBfOL.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here's the detected card highlighted in green. To visualize the process of dynamic template matching, uncomment the section in the code.</p>\n\n<p><a href=\"https://i.stack.imgur.com/RiqpW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RiqpW.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>Code</p>\n\n<pre><code>import cv2\nimport numpy as np\n\n# Resizes a image and maintains aspect ratio\ndef maintain_aspect_ratio_resize(image, width=None, height=None, inter=cv2.INTER_AREA):\n    # Grab the image size and initialize dimensions\n    dim = None\n    (h, w) = image.shape[:2]\n\n    # Return original image if no need to resize\n    if width is None and height is None:\n        return image\n\n    # We are resizing height if width is none\n    if width is None:\n        # Calculate the ratio of the height and construct the dimensions\n        r = height / float(h)\n        dim = (int(w * r), height)\n    # We are resizing width if height is none\n    else:\n        # Calculate the ratio of the 0idth and construct the dimensions\n        r = width / float(w)\n        dim = (width, int(h * r))\n\n    # Return the resized image\n    return cv2.resize(image, dim, interpolation=inter)\n\n# Load template and convert to grayscale\ntemplate = cv2.imread('template.png')\ntemplate = cv2.cvtColor(template, cv2.COLOR_BGR2GRAY)\n(tH, tW) = template.shape[:2]\ncv2.imshow(\"template\", template)\n\n# Load original image, convert to grayscale\noriginal_image = cv2.imread('1.jpg')\ngray = cv2.cvtColor(original_image, cv2.COLOR_BGR2GRAY)\nfound = None\n\n# Dynamically rescale image for better template matching\nfor scale in np.linspace(0.1, 3.0, 20)[::-1]:\n\n    # Resize image to scale and keep track of ratio\n    resized = maintain_aspect_ratio_resize(gray, width=int(gray.shape[1] * scale))\n    r = gray.shape[1] / float(resized.shape[1])\n\n    # Stop if template image size is larger than resized image\n    if resized.shape[0] &lt; tH or resized.shape[1] &lt; tW:\n        break\n\n    # Threshold resized image and apply template matching\n    thresh = cv2.threshold(resized, 0, 255, cv2.THRESH_BINARY_INV + cv2.THRESH_OTSU)[1]\n    detected = cv2.matchTemplate(thresh, template, cv2.TM_CCOEFF)\n    (_, max_val, _, max_loc) = cv2.minMaxLoc(detected)\n\n    # Uncomment this section for visualization\n    '''\n    clone = np.dstack([thresh, thresh, thresh])\n    cv2.rectangle(clone, (max_loc[0], max_loc[1]), (max_loc[0] + tW, max_loc[1] + tH), (0,255,0), 2)\n    cv2.imshow('visualize', clone)\n    cv2.waitKey(50)\n    '''\n\n    # Keep track of correlation value\n    # Higher correlation means better match\n    if found is None or max_val &gt; found[0]:\n        found = (max_val, max_loc, r)\n\n# Compute coordinates of bounding box\n(_, max_loc, r) = found\n(start_x, start_y) = (int(max_loc[0] * r), int(max_loc[1] * r))\n(end_x, end_y) = (int((max_loc[0] + tW) * r), int((max_loc[1] + tH) * r))\n\n# Draw bounding box on ROI\ncv2.rectangle(original_image, (start_x, start_y), (end_x, end_y), (0,255,0), 5)\ncv2.imshow('detected', original_image)\ncv2.imwrite('detected.png', original_image)\ncv2.waitKey(0)\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 10308015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8717f5cfb895407b9cc9e342f8006085?s=128&d=identicon&r=PG", "display_name": "Ovcheric", "link": "https://stackoverflow.com/users/10308015/ovcheric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1631, "favorite_count": 2, "accepted_answer_id": 59402625, "answer_count": 1, "score": 7, "last_activity_date": 1576786643, "creation_date": 1576711677, "last_edit_date": 1576723274, "question_id": 59401389, "link": "https://stackoverflow.com/questions/59401389/how-to-isolate-everything-inside-of-a-contour-scale-it-and-test-the-similarity", "title": "How to isolate everything inside of a contour, scale it, and test the similarity to an image?", "body": "<p>I'm working on a project just for fun, and my goal is to play online poker and have the program identify the cards that are on the table. I am using OpenCV with python to isolate the area where the cards are going to be. I have been able to take an image of that area, grayscale and threshold it, and draw a contour around the edge of the card. I am now stuck on how to move forward.  </p>\n\n<p>This is my code so far:</p>\n\n<pre><code>import cv2\nfrom PIL import ImageGrab\nimport numpy as np\n\ndef processed(image):\n    grayscaled = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n    thresholded = cv2.Canny(grayscaled, threshold1 = 200, threshold2 = 200)\n\n    return thresholded\n\ndef drawcard1():\n    screen = ImageGrab.grab(bbox = (770,300,850,400))\n\n    processed_img = processed(np.array(screen))  \n\n    outside_contour, dummy = cv2.findContours(processed_img.copy(), 0,2)\n\n    colored = cv2.cvtColor(processed_img, cv2.COLOR_GRAY2BGR)\n\n    cv2.drawContours(colored, outside_contour, 0, (0,255,0),2)     \n\n    cv2.imshow('resized_card', colored)\n\nwhile True:\n    drawcard1()\n\n\n\n    if cv2.waitKey(25) &amp; 0xFF == ord('w'):\n        cv2.destroyAllWindows()\n        break\n\n</code></pre>\n\n<p>This is the result of what I have so far:  </p>\n\n<p><img src=\"https://i.stack.imgur.com/X5lF3.png\" alt=\"Contour of a single card\"></p>\n\n<p>I need to be able to take the inside of the contour, and remove anything outside of it. Then the resulting image should only be the card, which I need to scale to 49x68 pixels. Once I can get that to work my plan is to get the contours of the rank and suit, and fill it in with white pixels, which I would then compare to a set of images to determine the best fit.</p>\n\n<p>I am very new to OpenCV and image processing, but I find this stuff incredibly fascinating! I've been able to get this far with Google, but I can't find anything this time. </p>\n\n<p>This is the image that I am using as a way to replace the game for now:  </p>\n\n<p><img src=\"https://i.stack.imgur.com/QJZcS.jpg\" alt=\"Image sample of the game\"></p>\n\n<p>This is one of the images that I will use to compare the table cards to:  </p>\n\n<p><img src=\"https://i.stack.imgur.com/GEcaY.png\" alt=\"Picture of the known card\"></p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 1059, "user_id": 10796680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rgfvm.jpg?s=128&g=1", "display_name": "David Alford", "link": "https://stackoverflow.com/users/10796680/david-alford"}, "edited": false, "score": 0, "creation_date": 1576711887, "post_id": 59401335, "comment_id": 104991827, "body": "What is your <code>MEDIA_ROOT</code> set as in your settings dir?"}, {"owner": {"reputation": 396, "user_id": 8150682, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UpZnQ.jpg?s=128&g=1", "display_name": "Romeo", "link": "https://stackoverflow.com/users/8150682/romeo"}, "reply_to_user": {"reputation": 1059, "user_id": 10796680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rgfvm.jpg?s=128&g=1", "display_name": "David Alford", "link": "https://stackoverflow.com/users/10796680/david-alford"}, "edited": false, "score": 1, "creation_date": 1576712099, "post_id": 59401335, "comment_id": 104991892, "body": "@DavidAlford It is set as MEDIA_ROOT = os.path.join(BASE_DIR, &#39;media&#39;)"}, {"owner": {"reputation": 396, "user_id": 8150682, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UpZnQ.jpg?s=128&g=1", "display_name": "Romeo", "link": "https://stackoverflow.com/users/8150682/romeo"}, "reply_to_user": {"reputation": 1059, "user_id": 10796680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rgfvm.jpg?s=128&g=1", "display_name": "David Alford", "link": "https://stackoverflow.com/users/10796680/david-alford"}, "edited": false, "score": 0, "creation_date": 1576712626, "post_id": 59401335, "comment_id": 104992021, "body": "@DavidAlford Could that be the issue? Do i need to change it to <code>os.path.join(BASE_DIR, &#39;media&#47;profile_pics&#39;)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 396, "user_id": 8150682, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UpZnQ.jpg?s=128&g=1", "display_name": "Romeo", "link": "https://stackoverflow.com/users/8150682/romeo"}, "edited": false, "score": 0, "creation_date": 1576713391, "post_id": 59401500, "comment_id": 104992205, "body": "That worked for me. I appreciate. It didn&#39;t occur to me that i was to add on the sub directory"}], "tags": [], "owner": {"reputation": 1186, "user_id": 837073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8d331f3c1771c482e28edba2fbfdf0?s=128&d=identicon&r=PG", "display_name": "Airith", "link": "https://stackoverflow.com/users/837073/airith"}, "is_accepted": true, "score": 2, "last_activity_date": 1576712638, "creation_date": 1576712638, "answer_id": 59401500, "question_id": 59401335, "link": "https://stackoverflow.com/questions/59401335/default-image-set-in-image-field-not-found/59401500#59401500", "title": "Default image set in image field not found", "body": "<p>Specifying just the file will look in your media folder, if your default image is in media/profile_pics then set the default to <code>profile_pics/default.png</code></p>\n"}], "owner": {"reputation": 396, "user_id": 8150682, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UpZnQ.jpg?s=128&g=1", "display_name": "Romeo", "link": "https://stackoverflow.com/users/8150682/romeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 59401500, "answer_count": 1, "score": 1, "last_activity_date": 1576712638, "creation_date": 1576711315, "question_id": 59401335, "link": "https://stackoverflow.com/questions/59401335/default-image-set-in-image-field-not-found", "title": "Default image set in image field not found", "body": "<p>In the Profile model below, a default image is set in the image field for a registered user.\nA default image is provided in the Django media directory <code>media/profile_pics</code> After the register view form is saved(in line 10) in the views, an error message is printed out saying the file or directory to the image is not found. This is because the directory in which Django is looking for the image is wrong. Its looking in the path <code>C:\\\\dev\\\\blogger\\\\media\\\\default.png</code> instead of <code>C:\\\\dev\\\\blogger\\\\media\\\\profile_pics\\\\default.png</code></p>\n\n<p>I've been on this for hours just trying to fix it, but to no avail.</p>\n\n<p>source code below.</p>\n\n<p><strong>Error:</strong></p>\n\n<pre><code>FileNotFoundError at /account/register\n\n[Errno 2] No such file or directory: 'C:\\\\dev\\\\blogger\\\\media\\\\default.png\n</code></pre>\n\n<p><strong>Directory</strong></p>\n\n<pre><code>C:.\n\u251c\u2500\u2500\u2500.vscode\n\u251c\u2500\u2500\u2500blog\n\u2502   \u251c\u2500\u2500\u2500migrations\n\u2502   \u2502   \u2514\u2500\u2500\u2500__pycache__\n\u2502   \u2514\u2500\u2500\u2500__pycache__\n\u251c\u2500\u2500\u2500blogger\n\u2502   \u251c\u2500\u2500\u2500static\n\u2502   \u2502   \u2514\u2500\u2500\u2500blog\n\u2502   \u2514\u2500\u2500\u2500__pycache__\n\u251c\u2500\u2500\u2500media\n\u2502   \u2514\u2500\u2500\u2500profile_pics\n\u251c\u2500\u2500\u2500templates\n\u2502   \u251c\u2500\u2500\u2500blog\n\u2502   \u2502   \u2514\u2500\u2500\u2500post\n\u2502   \u2514\u2500\u2500\u2500users\n\u251c\u2500\u2500\u2500users\n\u2502   \u251c\u2500\u2500\u2500migrations\n\u2502   \u2502   \u2514\u2500\u2500\u2500__pycache__\n\u2502   \u2514\u2500\u2500\u2500__pycache__\n</code></pre>\n\n<p><strong>Model:</strong></p>\n\n<pre><code>from django.db import models\nfrom django.contrib.auth.models import User\nfrom PIL import Image\n\nclass Profile(models.Model):\n    user = models.OneToOneField(User, on_delete=models.CASCADE)\n    image = models.ImageField(default='default.png', upload_to='profile_pics')\n\n    def __str__(self):\n        return f'{self.user.username} Profile'\n\n    # Override save nethod. Resize images for scalability\n    def save(self, *args, **kwargs):\n\n        super().save(*args, **kwargs)\n\n        img = Image.open(self.image.path)\n\n        if img.height &gt; 300 or img.width &gt; 300:\n            resize_img = (300, 300)\n            img.thumbnail(resize_img)\n            img.save(self.image.path)\n\n        # [TODO] Delete older images when updated with new images\n</code></pre>\n\n<p><strong>views:</strong></p>\n\n<pre><code>from django.shortcuts import render, redirect\nfrom users.forms import UserRegisterationForm, UserUpdateForm, ProfileUpdateForm\nfrom django.contrib import messages\nfrom django.contrib.auth.decorators import login_required\n\ndef register(request):\n    if request.method == 'POST':\n        form = UserRegisterationForm(request.POST)\n        if form.is_valid():\n            form.save()\n            username = form.cleaned_data.get('username')\n            messages.success(request, f'Welcome {username}! You are now able to login.')\n            return redirect('account:login')\n        else:\n            messages.warning(request, 'Oops! Please try again')\n            return redirect('account:register')\n    else:\n        messages.success(request, f'Hi! Fill in fields to join')\n        form = UserRegisterationForm()\n\n    return render(request, 'users/register.html', {'form':form})\n</code></pre>\n"}, {"tags": ["javascript", "python", "html", "selenium", "web-scraping"], "comments": [{"owner": {"reputation": 11899, "user_id": 7216865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X90W9.png?s=128&g=1", "display_name": "Maurice Meyer", "link": "https://stackoverflow.com/users/7216865/maurice-meyer"}, "edited": false, "score": 1, "creation_date": 1576712421, "post_id": 59401330, "comment_id": 104991968, "body": "Spotify provides an API: <a href=\"https://developer.spotify.com/documentation/web-api/reference/playlists/get-playlist\" rel=\"nofollow noreferrer\">developer.spotify.com/documentation/web-api/reference/playli&zwnj;&#8203;sts/&hellip;</a>"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576712431, "post_id": 59401330, "comment_id": 104991973, "body": "Can\u2019t you use the spotify API for this? In any case, have you checked to see if you could make the same requests as they do, instead of having to rely on Selenium?"}], "answers": [{"tags": [], "owner": {"reputation": 1959, "user_id": 12094894, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-NjIomZJlN5g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reQRTujazUTsx8ooT0_rHUW6q7FPA/photo.jpg?sz=128", "display_name": "Simon Crane", "link": "https://stackoverflow.com/users/12094894/simon-crane"}, "is_accepted": false, "score": 0, "last_activity_date": 1576712641, "creation_date": 1576712641, "answer_id": 59401501, "question_id": 59401330, "link": "https://stackoverflow.com/questions/59401330/python-webscraping-spotify-webplayer-issues-with-scrolling-to-bottom-of-page/59401501#59401501", "title": "Python webscraping, Spotify webplayer, issues with scrolling to bottom of page", "body": "<p>This isn't an answer using scrolling, but you can get the data direct from the Spotify api:</p>\n\n<p><a href=\"https://developer.spotify.com/documentation/web-api/reference/playlists/get-playlists-tracks/\" rel=\"nofollow noreferrer\">https://developer.spotify.com/documentation/web-api/reference/playlists/get-playlists-tracks/</a></p>\n\n<p>Note that you can only get up to 100 track titles at a time, so you will have to make multiple requests and use the offset parameter. This is also why your browser only loads 100 songs at a time. </p>\n"}, {"tags": [], "owner": {"reputation": 215, "user_id": 11846850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b266570180a2815e43051b51c3ec8214?s=128&d=identicon&r=PG&f=1", "display_name": "Retsek", "link": "https://stackoverflow.com/users/11846850/retsek"}, "is_accepted": false, "score": 0, "last_activity_date": 1576722966, "last_edit_date": 1576722966, "creation_date": 1576716875, "answer_id": 59401984, "question_id": 59401330, "link": "https://stackoverflow.com/questions/59401330/python-webscraping-spotify-webplayer-issues-with-scrolling-to-bottom-of-page/59401984#59401984", "title": "Python webscraping, Spotify webplayer, issues with scrolling to bottom of page", "body": "<p>Spotify API requires you register for a license which is a bit over the top for just a little project I'm working on, I however have managed to bodge this script together that works. If anyone in the future sees this post hoping to do a similar project to me, please do not copy this code. It is terrible.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import time\nfrom selenium import webdriver\n\nurl=\"https://open.spotify.com/playlist/1xXEN6UhQEMsVhX4KitlhW\"\ndriver = webdriver.Firefox()\ndriver.get(url)\n\ncont = False\npreviousScrollHeight = 0\n\nwhile cont == False:\n    time.sleep(1)\n    driver.execute_script(\"var HTMLCollection = document.getElementsByClassName('main-view-container__scroll-node'); var objDiv = HTMLCollection[0]; objDiv.scrollTop = objDiv.scrollHeight;\")\n    scrollTop = driver.execute_script(\"var HTMLCollection = document.getElementsByClassName('main-view-container__scroll-node'); var objDiv = HTMLCollection[0]; return objDiv.scrollTop;\")\n\n    time.sleep(1)\n    scrollHeight = driver.execute_script(\"var HTMLCollection = document.getElementsByClassName('main-view-container__scroll-node'); var objDiv = HTMLCollection[0]; return objDiv.scrollHeight;\")\n\n    if previousScrollHeight == scrollHeight:\n        cont = True\n\n    previousScrollHeight = scrollHeight\n\n\ntracks = driver.execute_script(\"obj = document.getElementsByClassName('tracklist-name'); var lst = []; for (var i = 0; i &lt; obj.length; i++) { lst.push(obj[i].innerText) }; return lst;\")\nartists = driver.execute_script(\"obj = document.getElementsByClassName('TrackListRow__artists'); var lst = []; for (var i = 0; i &lt; obj.length; i++) { lst.push(obj[i].innerText) }; return lst;\")\n\ndriver.close()\n\nzipped = zip(tracks, artists)\nprint(list(zipped))\n</code></pre>\n"}], "owner": {"reputation": 215, "user_id": 11846850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b266570180a2815e43051b51c3ec8214?s=128&d=identicon&r=PG&f=1", "display_name": "Retsek", "link": "https://stackoverflow.com/users/11846850/retsek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1576722966, "creation_date": 1576711262, "question_id": 59401330, "link": "https://stackoverflow.com/questions/59401330/python-webscraping-spotify-webplayer-issues-with-scrolling-to-bottom-of-page", "title": "Python webscraping, Spotify webplayer, issues with scrolling to bottom of page", "body": "<p>I want to make a python program that when given a link to a Spotify playlist will return a list of the track names. This is what I have so far.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from bs4 import BeautifulSoup\nfrom selenium import webdriver\n\nurl=\"https://open.spotify.com/playlist/1xXEN6UhQEMsVhX4KitlhW\"\ndriver = webdriver.Firefox()\ndriver.get(url)\n\npage = driver.page_source\npage_soup = BeautifulSoup(page,'html.parser')\n\ntracks = page_soup.findAll(\"div\",{\"class\":\"tracklist-name\"})\n\nprint(tracks)\nprint(len(tracks))\n\ndriver.close()\n</code></pre>\n\n<p>However this only returns the first 100 songs. I have discovered that typing <code>document.getElementsByClassName(\"tracklist-name\")</code> into the developer console in browser will also only return the first 100 songs, unless I have scrolled to the bottom of the page, so I want to scroll to the bottom of the page first but <code>window.scrollTo(0, document.body.scrollHeight)</code> does not work because the playlist isn't in the main body, the actual body of the page cannot be scrolled at all (I don't know all the technical terms I am a newbie at Javascript).</p>\n\n<p>So how would I write a script that scrolls to the bottom of the Spotify playlist such that I can extract all the songs, not just the first 100?</p>\n"}, {"tags": ["python", "sql", "django", "amazon-s3", "boto3"], "answers": [{"tags": [], "owner": {"reputation": 5869, "user_id": 1448679, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/f4efbb20b826ad4a24f9a46e83a3f448?s=128&d=identicon&r=PG&f=1", "display_name": "Arun K", "link": "https://stackoverflow.com/users/1448679/arun-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1576712043, "creation_date": 1576712043, "answer_id": 59401429, "question_id": 59401312, "link": "https://stackoverflow.com/questions/59401312/aws-signed-urls-from-sql/59401429#59401429", "title": "AWS Signed URLs from SQL", "body": "<p>I don't think it's possible, I can't think of any other ways to avoid looping through and generate the signatures. Also s3 doesn't support generating signatures for multiple files in one go.</p>\n"}, {"comments": [{"owner": {"reputation": 209, "user_id": 1282623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c070a619cad4477f556fcfbef649a2f?s=128&d=identicon&r=PG", "display_name": "Justin H.", "link": "https://stackoverflow.com/users/1282623/justin-h"}, "edited": false, "score": 0, "creation_date": 1576760032, "post_id": 59403712, "comment_id": 105007425, "body": "Thanks. We are using an on premise postgresql server but postgresql also allows user defined functions in python. So this would certainly be one option."}, {"owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "reply_to_user": {"reputation": 209, "user_id": 1282623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c070a619cad4477f556fcfbef649a2f?s=128&d=identicon&r=PG", "display_name": "Justin H.", "link": "https://stackoverflow.com/users/1282623/justin-h"}, "edited": false, "score": 0, "creation_date": 1576788057, "post_id": 59403712, "comment_id": 105020617, "body": "Oops! Sorry, I incorrectly assumed Redshift, but I see you are using PostgreSQL. The same general method would still apply."}], "tags": [], "owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "is_accepted": false, "score": 1, "last_activity_date": 1576733127, "creation_date": 1576733127, "answer_id": 59403712, "question_id": 59401312, "link": "https://stackoverflow.com/questions/59401312/aws-signed-urls-from-sql/59403712#59403712", "title": "AWS Signed URLs from SQL", "body": "<p>Here's some Python that can generate a pre-signed URL with Python 2.7 (which is the version used by Redshift):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import base64\nimport hmac\nimport sha\nimport urllib\nimport time\n\nSECRET_KEY = 'abc123'\nOBJECT = '/my-bucket/foo'\nDURATION = 120\n\n# Expiry time\nexpiry_epoch = int(time.time() + DURATION)\n\n# Generate signature\nh = hmac.new(SECRET_KEY, \"GET\\n\\n\\n\" + str(expiry_epoch) + \"\\n\" + OBJECT, sha)\nsignature = urllib.quote_plus(base64.encodestring(h.digest()).strip())\n\n# Put this after the URL\nprint(\"?AWSAccessKeyId=AKIAxxx&amp;Expires=\" + str(expiry_epoch) + \"&amp;Signature=\" + signature)\n</code></pre>\n\n<p>It will output the parameters to append to the URL to permit access via the pre-signed URL.</p>\n\n<p>You will need to put your Secret Key into the code.</p>\n\n<p>Hopefully you can then turn this code into a User-Defined Function in Redshift.</p>\n"}, {"tags": [], "owner": {"reputation": 209, "user_id": 1282623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c070a619cad4477f556fcfbef649a2f?s=128&d=identicon&r=PG", "display_name": "Justin H.", "link": "https://stackoverflow.com/users/1282623/justin-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1576776403, "creation_date": 1576776403, "answer_id": 59414344, "question_id": 59401312, "link": "https://stackoverflow.com/questions/59401312/aws-signed-urls-from-sql/59414344#59414344", "title": "AWS Signed URLs from SQL", "body": "<p>I ended up just looping over the results.  I still think it can be done with a custom cursor instead.  I may do that eventually.</p>\n\n<p>Here's a gist that shows the kind of raw sql helper I created. <a href=\"https://gist.github.com/cspinelive/9ba8c4034b42c00683ef175f54068546\" rel=\"nofollow noreferrer\">https://gist.github.com/cspinelive/9ba8c4034b42c00683ef175f54068546</a>  It allows clean code like this:</p>\n\n<pre><code>from Acme.db import AcmeQuery\n\nsql = 'select id, \"pdf_url\" from books where status=%(status)s limit 10'\nparams = {'status': 'A'}\n\ns3signer = AcmeQuery.S3Signer(cols=['pdf_url'])\n\nrows = AcmeQuery(sql, params=params, row_modifier=s3signer).run()\n</code></pre>\n\n<p>the here's the meat of it (see the gist for the full code)</p>\n\n<pre><code>class AcmeQuery(object):\n  def run(self):\n    with connection.cursor() as cursor:\n          cursor.execute(sql, params)\n\n          # covert list of tuples to list of dictionaries\n          rows = dictfetchall(cursor)\n\n          # post process each row with a custom function\n          # function must accept the as a dictionary as its first argument\n          # other arguments may be accepted as well via kwargs\n          if self.row_modifier:\n              for row in rows:\n                  self.row_modifier.func(row, **self.row_modifier.params)\n\n   return rows\n\nclass RowModifier(object):\n    def __init__(self, func, params=None):\n        self.func = func\n        self.params = params or {}\n</code></pre>\n"}], "owner": {"reputation": 209, "user_id": 1282623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c070a619cad4477f556fcfbef649a2f?s=128&d=identicon&r=PG", "display_name": "Justin H.", "link": "https://stackoverflow.com/users/1282623/justin-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1576776403, "creation_date": 1576711182, "last_edit_date": 1576717144, "question_id": 59401312, "link": "https://stackoverflow.com/questions/59401312/aws-signed-urls-from-sql", "title": "AWS Signed URLs from SQL", "body": "<p>I've got a lot of static content in an S3 bucket that doesn't have public read access.  I want to provide access to this content by generating signed urls.  </p>\n\n<p>I'm using python and boto3 library for most use cases.  I have a few raw SQL queries though that pull the URLs straight from the database and dump them right to the browser.  I'd rather not have to loop through all the results on the server, convert the urls to signed urls using python, and then send it to the browser.  I'd prefer that there be a SQL equivalent of this magic.  </p>\n\n<p>Instead of </p>\n\n<p><code>select imageFileUrl from photos;</code></p>\n\n<p>I'd like to be able to do something like</p>\n\n<p><code>select signed_url(imageFileUrl) from photos;</code></p>\n\n<p>The python boto class / function for this seems to be <code>botocore.signers.RequestSigner.sign()</code></p>\n\n<p>Upon looking deeper the real meat of it (for my use case at least) appears to be <code>botocore.auth.HmacV1QueryAuth</code> and its <code>get_signature</code>, <code>canonical_string</code>, <code>sign_string</code> and <code>_inject_signature</code> functions.</p>\n\n<p>Has anyone solved this problem before?  Am I on the right track?</p>\n\n<p>I'm using python 3, django 2, and postgresql 10.</p>\n\n<p>Edit:\nI may consider making my own cursor using the cursor_factory param discussed here. <a href=\"http://initd.org/psycopg/docs/extras.html#connection-and-cursor-subclasses\" rel=\"nofollow noreferrer\">http://initd.org/psycopg/docs/extras.html#connection-and-cursor-subclasses</a></p>\n\n<p>Perhaps find a way to pass in a function map so any column that needs special attention can get it right at the point of origin vs looping the result set again. We\u2019ll see. </p>\n"}, {"tags": ["python", "automation", "webbrowser-control", "pyautogui"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1579535382, "post_id": 59401253, "comment_id": 105790194, "body": "What do you mean by &quot;it&#39;s too fast&quot;? Is this not what you want?"}, {"owner": {"reputation": 1, "user_id": 12561116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ed97459c0b92c60c7512c009c083857?s=128&d=identicon&r=PG&f=1", "display_name": "FastRx3", "link": "https://stackoverflow.com/users/12561116/fastrx3"}, "reply_to_user": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1579584139, "post_id": 59401253, "comment_id": 105804638, "body": "I meant that Python is processing the code in a fast manner, so the code needs a pause in between certain code to allow the mouse navigate, clicking, etc. Python is processing the code fast (speed is not an issue) the issue is- the browser is not loading the entire website between clicks/movements, etc. I was running 8 gig&#39;s of ram on my mac- now 16- so who know&#39;s if that makes a difference. Normally, I understand the data would be queried with SQL/ACCESS, or Excel ODBC but these weren&#39;t an option. So I tried to scrape the data using python."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12561116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ed97459c0b92c60c7512c009c083857?s=128&d=identicon&r=PG&f=1", "display_name": "FastRx3", "link": "https://stackoverflow.com/users/12561116/fastrx3"}, "edited": false, "score": 0, "creation_date": 1576718680, "post_id": 59401699, "comment_id": 104993267, "body": "Thanks for your response! Because it&#39;s hippa data- unfortunately I can&#39;t access the data directly from the third party data warehouse. Even though the company generates the data, they don&#39;t have access to it. Kinda dumb, so this is why the company has always pulled data this way. I suggested to write a SQL query to pull the data, but wasn&#39;t allowed. I have used an API for pulling stock data via Quandl module but not sure if this is allowed by the third party provider. You mentioned web scraper- I&#39;m thinking BeautifulSoup- I&#39;ll check out Scrapy now. I&#39;ll definitely try it your way."}], "tags": [], "owner": {"reputation": 41, "user_id": 12497770, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDtqRd83PhhDeY9ZnGh7mQNQflXXziD5x8YmjifMg=k-s128", "display_name": "Latronis", "link": "https://stackoverflow.com/users/12497770/latronis"}, "is_accepted": false, "score": 1, "last_activity_date": 1576714320, "creation_date": 1576714320, "answer_id": 59401699, "question_id": 59401253, "link": "https://stackoverflow.com/questions/59401253/controlling-the-mouse-and-browser-with-pyautogui-for-process-automation/59401699#59401699", "title": "Controlling the mouse and browser with pyautogui for process automation", "body": "<p>The way you are going about grabbing your data is very error prone and not how people generally go about grabbing data from websites. What you want is a web scraper, which allows you to grab information from websites or some companies provide API's that allow you easier access to the data.</p>\n\n<p>To grab information from LinkedIn it has a <a href=\"https://docs.microsoft.com/en-us/linkedin/\" rel=\"nofollow noreferrer\">built in API</a>. You did mention that you were navigating to another site though in which case I would see if that site has an API or look into using <a href=\"https://scrapy.org/\" rel=\"nofollow noreferrer\">Scrapy</a>, a web scraper that should allow you to pull the information you need. </p>\n\n<p>Sidenote: You can also look into synchronous and asynchronous programming with python to make multiple requests faster/easier</p>\n"}], "owner": {"reputation": 1, "user_id": 12561116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ed97459c0b92c60c7512c009c083857?s=128&d=identicon&r=PG&f=1", "display_name": "FastRx3", "link": "https://stackoverflow.com/users/12561116/fastrx3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1545, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1579535367, "creation_date": 1576710784, "last_edit_date": 1579535367, "question_id": 59401253, "link": "https://stackoverflow.com/questions/59401253/controlling-the-mouse-and-browser-with-pyautogui-for-process-automation", "title": "Controlling the mouse and browser with pyautogui for process automation", "body": "<p>I'm new at Python and I need expert guidance for the project I'm trying to finish at work, as none of my coworkers are programmers. </p>\n\n<p>I'm making a script that logs into a website and pulls a CSV dataset. Here are the steps that I'd like to automate: </p>\n\n<ol>\n<li>Open chrome, go to a website</li>\n<li>Login with username/password</li>\n<li>Navigate to another internal site via menu dropdown</li>\n<li>Input text into a search tag box or delete search tags, e.g. \"Hours\", press \"Enter\" or \"Tab\" to select (repeat this for 3-4 search tags)</li>\n<li>Click \"Run data\"</li>\n<li>Wait until data loads, then click \"Download\" to get a CSV file with 40-50k rows of data</li>\n<li>Repeat this process 3-4 times for different data pulls, different links and different search tags </li>\n</ol>\n\n<p>This process usually takes 30-40 minutes for a total of 4 or 5 data pulls each week so it's like watching paint dry. </p>\n\n<p>I've tried to automate this using the <code>pyautogui</code> module, but it isn't working out for me. It works too fast, or doesn't work at all. I think I'm using it wrong.</p>\n\n<p>This is my code:</p>\n\n<pre><code>import webbrowser\nimport pyautogui\n#pyautogui.position()\n#print(pyautogui.position())\n\n#1-2\npyautogui.FAILSAFE = True\nchrome_path = 'open -a /Applications/Google\\ Chrome.app %s'\n\n#2-12\nurl = 'http://Google.com/'\nwebbrowser.get(chrome_path).open(url)\npyautogui.moveTo(185, 87, duration=0.25)\npyautogui.click()\npyautogui.typewrite('www.linkedin.com')\npyautogui.press('enter')\n#loginhere? Research\n</code></pre>\n\n<p>In case <code>pyautogui</code> is not suited for this task, can you recommend an alternative way?</p>\n"}, {"tags": ["python", "text"], "comments": [{"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576710936, "post_id": 59401238, "comment_id": 104991621, "body": "what do you mean with the <code>input</code> function? The user is putting in the text you can&#39;t control his speed. If you mean the message of the <code>input</code>, simply print it separatly and then use <code>input()</code>"}, {"owner": {"reputation": 4500, "user_id": 8858995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d1981ec5dd8311a79e695d512716ef?s=128&d=identicon&r=PG&f=1", "display_name": "Ibraheem Ahmed", "link": "https://stackoverflow.com/users/8858995/ibraheem-ahmed"}, "edited": false, "score": 0, "creation_date": 1576710941, "post_id": 59401238, "comment_id": 104991622, "body": "I don&#39;t fully understand the question. What exactly do you want to do with the input function? <a href=\"https://stackoverflow.com/questions/36896844/how-to-make-python-print-one-character-at-a-time-on-the-same-line\">For your initial question about the print function</a>"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1576711259, "post_id": 59401238, "comment_id": 104991681, "body": "Just print the characters one at a time in a loop using <code>&#39;&#39;</code> for the <code>end</code> argument then the line after the loop would be <code>input()</code> with no prompt."}, {"owner": {"reputation": 9, "user_id": 12561506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5991de14575cbe6e12460ab6382d1947?s=128&d=identicon&r=PG&f=1", "display_name": "pythongames12", "link": "https://stackoverflow.com/users/12561506/pythongames12"}, "edited": false, "score": 0, "creation_date": 1576711290, "post_id": 59401238, "comment_id": 104991691, "body": "Sorry, the text that comes before the input function, as in x = input(&#39;What is your name?&#39;)"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576711321, "post_id": 59401238, "comment_id": 104991697, "body": "<code>print(&quot;What is your name?&quot;)</code> and then <code>x = input()</code>"}, {"owner": {"reputation": 9, "user_id": 12561506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5991de14575cbe6e12460ab6382d1947?s=128&d=identicon&r=PG&f=1", "display_name": "pythongames12", "link": "https://stackoverflow.com/users/12561506/pythongames12"}, "edited": false, "score": 0, "creation_date": 1576711457, "post_id": 59401238, "comment_id": 104991730, "body": "But then what if I wanted to make a function out of that?"}, {"owner": {"reputation": 9, "user_id": 12561506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5991de14575cbe6e12460ab6382d1947?s=128&d=identicon&r=PG&f=1", "display_name": "pythongames12", "link": "https://stackoverflow.com/users/12561506/pythongames12"}, "edited": false, "score": 0, "creation_date": 1576711635, "post_id": 59401238, "comment_id": 104991771, "body": "Sorry, something like: def inputTyping(): and I could call the function every time I wanted the user to input something"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576711673, "post_id": 59401238, "comment_id": 104991783, "body": "what&#39;s the problem, define that function and put those 2 lines inside"}, {"owner": {"reputation": 9, "user_id": 12561506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5991de14575cbe6e12460ab6382d1947?s=128&d=identicon&r=PG&f=1", "display_name": "pythongames12", "link": "https://stackoverflow.com/users/12561506/pythongames12"}, "edited": false, "score": 0, "creation_date": 1576712424, "post_id": 59401238, "comment_id": 104991970, "body": "Do you mean something like def inputType(): x = input() print(x)"}, {"owner": {"reputation": 4500, "user_id": 8858995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d1981ec5dd8311a79e695d512716ef?s=128&d=identicon&r=PG&f=1", "display_name": "Ibraheem Ahmed", "link": "https://stackoverflow.com/users/8858995/ibraheem-ahmed"}, "edited": false, "score": 0, "creation_date": 1576713049, "post_id": 59401238, "comment_id": 104992127, "body": "Yes, I have answered the question, and put it into a function."}], "answers": [{"comments": [{"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "reply_to_user": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576711675, "post_id": 59401302, "comment_id": 104991784, "body": "it depends on your system, you&#39;ll definitely need to play around with the values. I&#39;m on  a mac for example, and it prints in real time"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576711911, "post_id": 59401302, "comment_id": 104991838, "body": "Could also be <code>print(x, end=&quot;&quot;, flush=True)</code> instead of the <code>sys</code> calls"}], "tags": [], "owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "is_accepted": false, "score": 1, "last_activity_date": 1576712608, "last_edit_date": 1576712608, "creation_date": 1576711106, "answer_id": 59401302, "question_id": 59401238, "link": "https://stackoverflow.com/questions/59401238/how-do-make-text-in-print-and-input-appear-one-by-one/59401302#59401302", "title": "How do make text in print() and input() appear one by one?", "body": "<p>You can use this:</p>\n\n<pre><code>text = 'What is your name? '\nfor x in text:\n   sys.stdout.write(x)\n   sys.stdout.flush()\n   time.sleep(0.00001)\nname = input()\n</code></pre>\n\n<p>you can randomize the sleep time per loop as well to mimic typing even better like this:</p>\n\n<pre><code>import time,sys,random\ntext = 'What is your name? '\nfor x in text:\n   sys.stdout.write(x)\n   sys.stdout.flush()\n   time.sleep(random.uniform(.000001, .000019))\nname = input()\n</code></pre>\n\n<p>as Tomerikoo pointed out, some systems have faster/slow delays so you may need to use uniform(.01, .5) on another system. I use OS/X.</p>\n\n<p>On windows this probably works better. Thanks Tomerikoo:</p>\n\n<pre><code>import time,sys,random\ntext = 'What is your name? '\nfor x in text:\n   print(x, end=\"\", flush=True)\n   time.sleep(random.uniform(.000001, .000019))\n   # or smaller sleep time, really depends on your system:\n   # time.sleep(random.uniform(.01, .5))\nname = input()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9, "user_id": 12561506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5991de14575cbe6e12460ab6382d1947?s=128&d=identicon&r=PG&f=1", "display_name": "pythongames12", "link": "https://stackoverflow.com/users/12561506/pythongames12"}, "edited": false, "score": 0, "creation_date": 1576713362, "post_id": 59401383, "comment_id": 104992195, "body": "Thanks for answering. Does this input command work for other questions as well? Would I have to make a def every time asked a new question?"}, {"owner": {"reputation": 4500, "user_id": 8858995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d1981ec5dd8311a79e695d512716ef?s=128&d=identicon&r=PG&f=1", "display_name": "Ibraheem Ahmed", "link": "https://stackoverflow.com/users/8858995/ibraheem-ahmed"}, "reply_to_user": {"reputation": 9, "user_id": 12561506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5991de14575cbe6e12460ab6382d1947?s=128&d=identicon&r=PG&f=1", "display_name": "pythongames12", "link": "https://stackoverflow.com/users/12561506/pythongames12"}, "edited": false, "score": 0, "creation_date": 1576713776, "post_id": 59401383, "comment_id": 104992299, "body": "I have updated my question. Now use <code>getinput(&quot;Question&quot;)</code>. Any question you pass when you call the function will be printed out"}], "tags": [], "owner": {"reputation": 4500, "user_id": 8858995, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44d1981ec5dd8311a79e695d512716ef?s=128&d=identicon&r=PG&f=1", "display_name": "Ibraheem Ahmed", "link": "https://stackoverflow.com/users/8858995/ibraheem-ahmed"}, "is_accepted": false, "score": 0, "last_activity_date": 1576713730, "last_edit_date": 1576713730, "creation_date": 1576711657, "answer_id": 59401383, "question_id": 59401238, "link": "https://stackoverflow.com/questions/59401238/how-do-make-text-in-print-and-input-appear-one-by-one/59401383#59401383", "title": "How do make text in print() and input() appear one by one?", "body": "<p>You can use the following code:</p>\n\n<pre><code>import time,sys\n\ndef getinput(question):\n    text = input(question)\n    for x in text:\n        sys.stdout.write(x)\n        sys.stdout.flush()\n        time.sleep(0.00001) #Sets the speed of typing, depending on your system\n</code></pre>\n\n<p>Now everytime you call <code>getinput(\"Sample Question\")</code>, you would get the user's input based on the question you passed to the function.</p>\n"}], "owner": {"reputation": 9, "user_id": 12561506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5991de14575cbe6e12460ab6382d1947?s=128&d=identicon&r=PG&f=1", "display_name": "pythongames12", "link": "https://stackoverflow.com/users/12561506/pythongames12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "closed_date": 1576752476, "answer_count": 2, "score": -1, "last_activity_date": 1576725404, "creation_date": 1576710673, "last_edit_date": 1576725404, "question_id": 59401238, "link": "https://stackoverflow.com/questions/59401238/how-do-make-text-in-print-and-input-appear-one-by-one", "closed_reason": "Needs more focus", "title": "How do make text in print() and input() appear one by one?", "body": "<p>Almost like an RPG game, I want to make text appear as if someone is typing them. I have an idea of how to do it with the print() function in python, something involving the sleep() and maybe with sys.stdout.flush?</p>\n\n<p>How would I do it text coming before an input function?</p>\n\n<p>For example, I want <code>What is your name?</code> to be typed out, and then the user would input his name.</p>\n"}, {"tags": ["python", "raspberry-pi3"], "comments": [{"owner": {"reputation": 4192, "user_id": 197681, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UP9gT.jpg?s=128&g=1", "display_name": "wmorrell", "link": "https://stackoverflow.com/users/197681/wmorrell"}, "edited": false, "score": 1, "creation_date": 1576710916, "post_id": 59401225, "comment_id": 104991612, "body": "I would imagine the answer is somewhere in the <code>lib_nrf24</code> docs; either <code>radio.read</code> is supposed to return a value that you check, or it pokes values into the <code>receivedMessage</code> argument. If the latter, you should be checking that values are actually added, instead of blindly reading into an empty list."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 1, "creation_date": 1576712748, "post_id": 59401225, "comment_id": 104992053, "body": "What error message? What do you understand from that error, and what have you done to solve it?"}, {"owner": {"reputation": 19, "user_id": 12548756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD0GEX1GUHe7PKV3k8xkw2C5dKG853zlpzQ7bR9=k-s128", "display_name": "Airidas Jeznas", "link": "https://stackoverflow.com/users/12548756/airidas-jeznas"}, "edited": false, "score": 0, "creation_date": 1576713250, "post_id": 59401225, "comment_id": 104992173, "body": "From the error I understand that the <code>receivedMessage</code> list is empty, thus sending the list out of range error. So far, I tried downloading a modified library from a different person and using that instead. It did not solve the problem."}, {"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1576715230, "post_id": 59401225, "comment_id": 104992601, "body": "Welcome to Stack Overflow! You need to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> including the full error message with traceback. But yes your understanding is right, the list is probably empty. For some basic debugging try <code>print(radio.read(receivedMessage, radio.getDynamicPayloadSize()))</code> and <code>print(receivedMessage)</code>."}, {"owner": {"reputation": 19, "user_id": 12548756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD0GEX1GUHe7PKV3k8xkw2C5dKG853zlpzQ7bR9=k-s128", "display_name": "Airidas Jeznas", "link": "https://stackoverflow.com/users/12548756/airidas-jeznas"}, "reply_to_user": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 1, "creation_date": 1576717216, "post_id": 59401225, "comment_id": 104992970, "body": "@wjandrea Updated the post with the traceback and prints of <code>radio.read</code> and <code>receivedMessage</code>"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 12548756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD0GEX1GUHe7PKV3k8xkw2C5dKG853zlpzQ7bR9=k-s128", "display_name": "Airidas Jeznas", "link": "https://stackoverflow.com/users/12548756/airidas-jeznas"}, "edited": false, "score": 0, "creation_date": 1576718895, "post_id": 59402089, "comment_id": 104993305, "body": "That indeed fixed the error. Thank you very much :)"}, {"owner": {"reputation": 523, "user_id": 11381650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7000d86a30fc29b49130068e589964ff?s=128&d=identicon&r=PG&f=1", "display_name": "eggrobot78", "link": "https://stackoverflow.com/users/11381650/eggrobot78"}, "reply_to_user": {"reputation": 19, "user_id": 12548756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD0GEX1GUHe7PKV3k8xkw2C5dKG853zlpzQ7bR9=k-s128", "display_name": "Airidas Jeznas", "link": "https://stackoverflow.com/users/12548756/airidas-jeznas"}, "edited": false, "score": 0, "creation_date": 1576719116, "post_id": 59402089, "comment_id": 104993343, "body": "It solves because in some cases the program is trying to read data from a variable that is null (doesn&#39;t exist). To fix you check first if it exists and then reads."}, {"owner": {"reputation": 523, "user_id": 11381650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7000d86a30fc29b49130068e589964ff?s=128&d=identicon&r=PG&f=1", "display_name": "eggrobot78", "link": "https://stackoverflow.com/users/11381650/eggrobot78"}, "reply_to_user": {"reputation": 19, "user_id": 12548756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD0GEX1GUHe7PKV3k8xkw2C5dKG853zlpzQ7bR9=k-s128", "display_name": "Airidas Jeznas", "link": "https://stackoverflow.com/users/12548756/airidas-jeznas"}, "edited": false, "score": 0, "creation_date": 1576719270, "post_id": 59402089, "comment_id": 104993372, "body": "If variable is null and try to access it <code>data[0]</code> you get <code>index out of range</code> error."}], "tags": [], "owner": {"reputation": 523, "user_id": 11381650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7000d86a30fc29b49130068e589964ff?s=128&d=identicon&r=PG&f=1", "display_name": "eggrobot78", "link": "https://stackoverflow.com/users/11381650/eggrobot78"}, "is_accepted": true, "score": 0, "last_activity_date": 1576717916, "creation_date": 1576717916, "answer_id": 59402089, "question_id": 59401225, "link": "https://stackoverflow.com/questions/59401225/list-index-out-of-range-on-raspberry-pi/59402089#59402089", "title": "List index out of range on Raspberry Pi", "body": "<p>Why don't you do:</p>\n\n<pre><code>if(receivedMessage):\n    a = receivedMessage[0]\n    b = receivedMessage[1]\n    print( \"Temperature:\" , a, \"Humidity:\" , b )\n</code></pre>\n\n<p>This might solve the problem.</p>\n"}], "owner": {"reputation": 19, "user_id": 12548756, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mD0GEX1GUHe7PKV3k8xkw2C5dKG853zlpzQ7bR9=k-s128", "display_name": "Airidas Jeznas", "link": "https://stackoverflow.com/users/12548756/airidas-jeznas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 59402089, "answer_count": 1, "score": 0, "last_activity_date": 1576717916, "creation_date": 1576710601, "last_edit_date": 1576717156, "question_id": 59401225, "link": "https://stackoverflow.com/questions/59401225/list-index-out-of-range-on-raspberry-pi", "title": "List index out of range on Raspberry Pi", "body": "<p>I'm getting the 'List index out of range' error when trying to get my NRF24L01 module working on Raspberry Pi 3b+. The code is written in python and I just can't seem to notice the error. </p>\n\n<pre><code>import RPi.GPIO as GPIO\nfrom lib_nrf24 import NRF24\nimport time\nimport spidev\n\nGPIO.setmode(GPIO.BCM)\n\npipes = [[0xE8, 0xE8, 0xF0, 0xF0, 0xE1], [0xF0, 0xF0, 0xF0, 0xF0, 0xE1]]\n\nradio = NRF24 (GPIO, spidev.SpiDev())\nradio.begin(0, 17)\n\nradio.setPayloadSize (32)\nradio.setChannel(0x76)\nradio.setDataRate(NRF24.BR_1MBPS)\nradio.setPALevel(NRF24.PA_MIN)\n\nradio.setAutoAck(True)\nradio.enableDynamicPayloads()\nradio.enableAckPayload()\n\nradio.openReadingPipe(1, pipes[1])\nradio.printDetails()\nradio.startListening()\nwhile True :\n\n    while not radio.available(0):\n       time.sleep(1/100)\n\n    a = []\n    b = []\n    receivedMessage = []\n    radio.read(receivedMessage, radio.getDynamicPayloadSize())\n    a = receivedMessage[0]\n    b = receivedMessage[1]\n    print( \"Temperature:\" , a, \"Humidity:\" , b )\n\n</code></pre>\n\n<p>The error appears on lines <code>a = receivedMessage[0]</code> and <code>b = receivedMessage[1]</code>.\nWould love some fresh look and advices on how to fix this.\nTraceback:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/home/pi/Desktop/NRF24L01/VEIIIK.py\", line 34, in &lt;module&gt;\n    a = receivedMessage[0]\nIndexError: list index out of range\n</code></pre>\n\n<p>UPDATE\nUsing the line <code>print(radio.read(receivedMessage, radio.getDynamicPayloadSize()))</code> gives the ouptut:</p>\n\n<pre><code>0\n1\n1\n1\n1\n1\n1\n1\n1\n1\n1\n</code></pre>\n\n<p>While the line <code>print(receivedMessage)</code> outputs <code>[]</code>.</p>\n"}, {"tags": ["python", "python-3.x", "recursion", "return", "return-value"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9169757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85baa28c2b243f0ddfa896819fddc59c?s=128&d=identicon&r=PG&f=1", "display_name": "JAVABB", "link": "https://stackoverflow.com/users/9169757/javabb"}, "edited": false, "score": 0, "creation_date": 1576710408, "post_id": 59401162, "comment_id": 104991486, "body": "why are some objects mutable and others not mutable"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 27, "user_id": 9169757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85baa28c2b243f0ddfa896819fddc59c?s=128&d=identicon&r=PG&f=1", "display_name": "JAVABB", "link": "https://stackoverflow.com/users/9169757/javabb"}, "edited": false, "score": 0, "creation_date": 1576710673, "post_id": 59401162, "comment_id": 104991558, "body": "Ideally, all objects would be immutable; code that can&#39;t change existing values is easier to understand, and immutable values often use slightly less memory. However, mutability provides performance benefits, so some types (namely, containers like lists, dicts, and sets) are made mutable as a compromise."}, {"owner": {"reputation": 27, "user_id": 9169757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85baa28c2b243f0ddfa896819fddc59c?s=128&d=identicon&r=PG&f=1", "display_name": "JAVABB", "link": "https://stackoverflow.com/users/9169757/javabb"}, "edited": false, "score": 0, "creation_date": 1576710831, "post_id": 59401162, "comment_id": 104991595, "body": "By mutable you mean can be changes/over-written? Is this only in python or the same in other languages like java, c++"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 27, "user_id": 9169757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85baa28c2b243f0ddfa896819fddc59c?s=128&d=identicon&r=PG&f=1", "display_name": "JAVABB", "link": "https://stackoverflow.com/users/9169757/javabb"}, "edited": false, "score": 0, "creation_date": 1576711637, "post_id": 59401162, "comment_id": 104991775, "body": "Right. Most languages have both. Some (Haskell, for example) don&#39;t have any mutable types. I&#39;m not ware of any that have <i>only</i> mutable types. (No one lets you change the value of an integer like 1, for example. Note that I&#39;m excluding something like <code>Integer</code> in Java, which is really just a container for an immutable value.)"}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 0, "last_activity_date": 1576710184, "creation_date": 1576710184, "answer_id": 59401162, "question_id": 59401133, "link": "https://stackoverflow.com/questions/59401133/recursive-aggregation-return-statements-question/59401162#59401162", "title": "Recursive aggregation return statements question", "body": "<p>The object <em>referenced</em> by <code>soln</code> is mutable and can be (and is) mutated in-place. The other values are immutable; <code>sums + root.left.value</code> creates a new object to be passed to the next call to <code>help</code>, leaving both <code>sums</code> and <code>root.left.value</code> unchanged in the current call to <code>help</code>.</p>\n"}], "owner": {"reputation": 27, "user_id": 9169757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85baa28c2b243f0ddfa896819fddc59c?s=128&d=identicon&r=PG&f=1", "display_name": "JAVABB", "link": "https://stackoverflow.com/users/9169757/javabb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 1, "accepted_answer_id": 59401162, "answer_count": 1, "score": 0, "last_activity_date": 1576710184, "creation_date": 1576709980, "question_id": 59401133, "link": "https://stackoverflow.com/questions/59401133/recursive-aggregation-return-statements-question", "title": "Recursive aggregation return statements question", "body": "<p>I am working on a problem that calculates all the branch sums on a given binary tree and returns the results in an array or python list, I know this is the correct answer but I am having some trouble understanding how the aggregation process happens and why if the list is being updated before subsequent function calls then why aren't the other variables.</p>\n\n<p>code:</p>\n\n<pre><code>def branchTot(root):\n    soln = []\n    fin  = help(root, root.value, soln)\n    return fin\n\n\ndef help(root, sums, soln): \n    if root.left is None and root.right is None:\n        soln.append(sums)\n\n\nelse:\n    if root.right is not None and root.left is not None :\n        help(root.left, sums + root.left.value, soln)\n        help(root.right, sums + root.right.value, soln)\n    elif root.right is not None:\n        help(root.right, sums + root.right.value, soln)\n    else:\n        help(root.left, sums + root.left.value, soln)\n\nreturn soln\n</code></pre>\n\n<p>for example with the tree:</p>\n\n<pre><code>      1\n    /   \\\n   2     3\n</code></pre>\n\n<p>the functions on the call stack would be </p>\n\n<p>(3.) help(3,4,[3]) --> returned : soln = [3,4]</p>\n\n<p>(2.) help(2,3,[])  --> returned : soln = [3]</p>\n\n<p>(1.) help(1,1,[])</p>\n\n<p>my question is why in the last(3.) call if the 'soln' variable is updated from the previous(2.) call then why aren't also the root and sum variables updated from (2.) instead of being still from call(1.)? </p>\n\n<p>like why isn't it:\n(since 2.right is None)</p>\n\n<p>(3.) help(None,3+None,[3]) --> returned : soln = [3,4]. </p>\n\n<p>(2.) help(2,3,[])  --> returned : soln = [3]</p>\n\n<p>(1.) help(1,1,[])</p>\n"}, {"tags": ["python", "pandas", "data-conversion", "dma"], "comments": [{"owner": {"reputation": 8568, "user_id": 9177877, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5qL1i.png?s=128&g=1", "display_name": "It_is_Chris", "link": "https://stackoverflow.com/users/9177877/it-is-chris"}, "edited": false, "score": 2, "creation_date": 1576710343, "post_id": 59401127, "comment_id": 104991464, "body": "Do you have the DMA codes mapped to a city? Can you provide a sample of the data you currently have?"}, {"owner": {"reputation": 4256, "user_id": 5386938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H3KU09vCXj4/AAAAAAAAAAI/AAAAAAAAAQI/P8vlqd0SX5s/photo.jpg?sz=128", "display_name": "Justin Ezequiel", "link": "https://stackoverflow.com/users/5386938/justin-ezequiel"}, "edited": false, "score": 1, "creation_date": 1576711773, "post_id": 59401127, "comment_id": 104991795, "body": "There&#39;s &quot;Major US Cities with Latitude/Longitude and DMA Codes&quot; at <a href=\"https://gist.github.com/sillypog/4080120\" rel=\"nofollow noreferrer\">gist.github.com/sillypog/4080120</a>"}, {"owner": {"reputation": 4256, "user_id": 5386938, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-H3KU09vCXj4/AAAAAAAAAAI/AAAAAAAAAQI/P8vlqd0SX5s/photo.jpg?sz=128", "display_name": "Justin Ezequiel", "link": "https://stackoverflow.com/users/5386938/justin-ezequiel"}, "edited": false, "score": 0, "creation_date": 1576711831, "post_id": 59401127, "comment_id": 104991806, "body": "I have no idea if the data there&#39;s correct or if the coordinates represent the center."}], "owner": {"reputation": 73, "user_id": 12109776, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DEfz6ZNo7Yo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIbEqZynzLkEfTi_aUOfboXfYHww/photo.jpg?sz=128", "display_name": "J V", "link": "https://stackoverflow.com/users/12109776/j-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 324, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1576709923, "creation_date": 1576709923, "question_id": 59401127, "link": "https://stackoverflow.com/questions/59401127/is-there-a-way-to-convert-dma-codes-into-lat-longs", "title": "Is there a way to convert DMA codes into lat/longs?", "body": "<p>I am trying to figure out a way to get the center of a DMA code and turn it into lat/longs, using python/pandas. Please let me know if any of you have an idea on how to go about this, thank you!!</p>\n"}, {"tags": ["python", "python-3.x", "python-module"], "comments": [{"owner": {"reputation": 2844, "user_id": 1159735, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/46270a02b45a8009e9502204bec3bfac?s=128&d=identicon&r=PG", "display_name": "vgel", "link": "https://stackoverflow.com/users/1159735/vgel"}, "edited": false, "score": 0, "creation_date": 1576710284, "post_id": 59401109, "comment_id": 104991448, "body": "Are you sure that you edited the correct directory? When I do the same process on my machine, it works as it should. If you do <code>import sys; print(sys.path)</code>, does it include <code>&#47;Users&#47;username</code>?"}, {"owner": {"reputation": 2844, "user_id": 1159735, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/46270a02b45a8009e9502204bec3bfac?s=128&d=identicon&r=PG", "display_name": "vgel", "link": "https://stackoverflow.com/users/1159735/vgel"}, "edited": false, "score": 0, "creation_date": 1576710406, "post_id": 59401109, "comment_id": 104991485, "body": "Actually -- considering that you said the name of the folder is <code>teNPy</code> with that capitalization, it&#39;s almost certainly not loading the library from that folder -- Python&#39;s library loading is case-sensitive, IIRC."}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576710409, "post_id": 59401109, "comment_id": 104991487, "body": "How can you make a library read your own scripts? It is already written, it is not aware of your script even if you put it in the same directory..."}, {"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1576710625, "post_id": 59401109, "comment_id": 104991543, "body": "What do you mean \u201cIf I run\u201d? Please expand in the question. What script are you running with that import that fails? Where is the script situated?"}, {"owner": {"reputation": 1, "user_id": 9413052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a3e2a933d83e70ce32360afe692951?s=128&d=identicon&r=PG&f=1", "display_name": "frenzie19", "link": "https://stackoverflow.com/users/9413052/frenzie19"}, "edited": false, "score": 0, "creation_date": 1576712187, "post_id": 59401109, "comment_id": 104991910, "body": "Thank you for your comment. I updated the question. The script test.py only contains &#39;from tenpy.models.toric_code import ToricCode&#39; and I&#39;ve placed it on my desktop. This works fine. If I change it to &#39;from tenpy.models.test_module import ToricCode&#39; then I get an error about the non-existence of the module."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9413052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a3e2a933d83e70ce32360afe692951?s=128&d=identicon&r=PG&f=1", "display_name": "frenzie19", "link": "https://stackoverflow.com/users/9413052/frenzie19"}, "edited": false, "score": 0, "creation_date": 1576713527, "post_id": 59401268, "comment_id": 104992242, "body": "Thank you for your answer. I&#39;ve noticed that if I just change the name of one of the ready-made modules, and type"}], "tags": [], "owner": {"reputation": 1740, "user_id": 5319613, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OqPGa.png?s=128&g=1", "display_name": "Rahul P", "link": "https://stackoverflow.com/users/5319613/rahul-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1576710870, "creation_date": 1576710870, "answer_id": 59401268, "question_id": 59401109, "link": "https://stackoverflow.com/questions/59401109/adding-a-module-to-an-existing-library/59401268#59401268", "title": "Adding a module to an existing library", "body": "<p>It depends where you are running this code from. Providing a directory structure would help.</p>\n\n<p>It looks like the issue is that the folder you seek to export your classes from is not in the PYTHONPATH. If you ever want to look at what is in the PYTHONPATH, you could use:</p>\n\n<pre><code>import sys\n\nprint(sys.path)\n</code></pre>\n\n<p>You could add that at the top of your code to debug it in terms of modules and see what your PYTHONPATH looks like.</p>\n\n<p>You need to add a file (usually empty, but not always) called <code>__init__.py</code> in the folder you want to import code from. </p>\n\n<p>Here is a great guide to understanding how importing modules work:</p>\n\n<p><a href=\"https://chrisyeh96.github.io/2017/08/08/definitive-guide-python-imports.html\" rel=\"nofollow noreferrer\">Definite Guide To Python Imports</a></p>\n\n<p>Alternatively, you could also add the following code to the top of your code:</p>\n\n<pre><code>import sys\nimport os\n\nsys.path.append(os.path.join(os.pardir, os.path.abspath(os.path.dirname(__file__))))\nsys.path.append(os.path.join(os.path.abspath(os.path.dirname(__file__)), os.pardir, os.pardir))\n</code></pre>\n\n<p>If you were to add the code above, you won't have to do something like:</p>\n\n<pre><code>from &lt;folder&gt;.file import &lt;class/method&gt;\n</code></pre>\n\n<p>but you could just use:</p>\n\n<pre><code>from file import &lt;class/method&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9413052, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a3e2a933d83e70ce32360afe692951?s=128&d=identicon&r=PG&f=1", "display_name": "frenzie19", "link": "https://stackoverflow.com/users/9413052/frenzie19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1576712221, "creation_date": 1576709823, "last_edit_date": 1576712221, "question_id": 59401109, "link": "https://stackoverflow.com/questions/59401109/adding-a-module-to-an-existing-library", "title": "Adding a module to an existing library", "body": "<p>I recently installed a <a href=\"https://tenpy.github.io/index.html\" rel=\"nofollow noreferrer\">library</a>, which created a directory and subdirectories containing various python3 scripts. </p>\n\n<p>Lets focus on the directory </p>\n\n<pre><code>/Users/username/TeNPy/tenpy/models\n</code></pre>\n\n<p>This contains some pre-made modules, for instance one called toric_code.py, containing the class 'ToricCode'. </p>\n\n<p>If I run a script (lets call it test.py, situated on my desktop, for instance) that <em>only</em> contains</p>\n\n<pre><code>from tenpy.models.toric_code import ToricCode\n</code></pre>\n\n<p>this works perfectly fine, I get not errors. </p>\n\n<p>Now I created a new script, called it test_module.py and copy-pasted the toric_code.py script. The content between the two is <em>precisely the same</em>. Now I put test_module.py in the same directory as toric_code.py.</p>\n\n<p>If I run </p>\n\n<pre><code>from tenpy.models.test_module import ToricCode\n</code></pre>\n\n<p>I get the error </p>\n\n<pre><code>ModuleNotFoundError: No module named 'tenpy.models.test_module'\n</code></pre>\n\n<p>TL;DR - How can I make a library I installed read one of my own scripts as a module?.</p>\n"}, {"tags": ["python", "django", "django-models"], "comments": [{"owner": {"reputation": 263603, "user_id": 674039, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/leoFi.gif?s=128&g=1", "display_name": "wim", "link": "https://stackoverflow.com/users/674039/wim"}, "edited": false, "score": 1, "creation_date": 1576711677, "post_id": 59401041, "comment_id": 104991786, "body": "If it&#39;s a pure Python function, you probably can&#39;t do this easily. The ORM isn&#39;t magic, it still has to translate to SQL somehow.  If you show the function source, someone might be able to translate it directly to a query, though."}, {"owner": {"reputation": 352, "user_id": 10291817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nOvXi.jpg?s=128&g=1", "display_name": "Durai", "link": "https://stackoverflow.com/users/10291817/durai"}, "edited": false, "score": 0, "creation_date": 1576713164, "post_id": 59401041, "comment_id": 104992152, "body": "If you want to sort data while getting it using models. check order by in the orm itself. It will help. If you do it from database, it is expected to be faster, based on indexes. <a href=\"https://docs.djangoproject.com/en/3.0/ref/models/querysets/#order-by\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/3.0/ref/models/querysets/#order-by</a>"}, {"owner": {"reputation": 1323, "user_id": 4810639, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4ec58e181325b1e1142610e55bb855eb?s=128&d=identicon&r=PG&f=1", "display_name": "theEpsilon", "link": "https://stackoverflow.com/users/4810639/theepsilon"}, "reply_to_user": {"reputation": 352, "user_id": 10291817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nOvXi.jpg?s=128&g=1", "display_name": "Durai", "link": "https://stackoverflow.com/users/10291817/durai"}, "edited": false, "score": 0, "creation_date": 1576713357, "post_id": 59401041, "comment_id": 104992192, "body": "@Durai not in this case because I want to order based on a function, not necessarily a field"}, {"owner": {"reputation": 352, "user_id": 10291817, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nOvXi.jpg?s=128&g=1", "display_name": "Durai", "link": "https://stackoverflow.com/users/10291817/durai"}, "edited": false, "score": 0, "creation_date": 1576713808, "post_id": 59401041, "comment_id": 104992305, "body": "My understanding is that you want to do a sort based on model property. But not on the fields. If you do that on the fly, it is going to cause you performance issue. So my best bet will you, I will calculate that value on save and store that in the model itself to store in db. Then will perform order by to sort later. This way it will be lot faster. But, if you do update using queryset or update from raw sql, you will face inconsistency. You can use trigger in this case. you can omit save via queryset and write a table level trigger instead row level."}, {"owner": {"reputation": 671, "user_id": 4491186, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/04a18a19c210c23f15e8111aa21de45a?s=128&d=identicon&r=PG&f=1", "display_name": "ac2001", "link": "https://stackoverflow.com/users/4491186/ac2001"}, "edited": false, "score": 0, "creation_date": 1576715060, "post_id": 59401041, "comment_id": 104992558, "body": "It is not possible to filter/sort a query by a model method/property in the ORM (<a href=\"https://stackoverflow.com/questions/2276768/django-query-filtering-from-model-method\" title=\"django query filtering from model method\">stackoverflow.com/questions/2276768/&hellip;</a>).  If you post the function we might be able to help create that annotation, which would allow filtering/sorting."}], "owner": {"reputation": 1323, "user_id": 4810639, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4ec58e181325b1e1142610e55bb855eb?s=128&d=identicon&r=PG&f=1", "display_name": "theEpsilon", "link": "https://stackoverflow.com/users/4810639/theepsilon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1576711373, "creation_date": 1576709311, "last_edit_date": 1576711373, "question_id": 59401041, "link": "https://stackoverflow.com/questions/59401041/django-annotate-this", "title": "Django annotate this?", "body": "<p>I have a function that is present on a field on my model that I would like to sort by. The function (<code>sort</code> in the example below) takes the instance of the model as the argument and spits out a value. I need to pass the model instance so that I can get values from fields. I want to sort by the output of the function. I'm trying to do something like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>model.objects.annotate(sort_value=field.sort(this)).order_by(sort_value)\n</code></pre>\n\n<p>How can I reference an individual model instance in the queryset (using <code>this</code> as the placeholder in the example)? Should I be using something other than annotate?</p>\n\n<p>Something like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>sorted(model.objects.all(), key=field.sort)\n</code></pre>\n\n<p>but fast.</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576713113, "post_id": 59401000, "comment_id": 104992140, "body": "That\u2019s the only error you\u2019re getting? It looks like there\u2019s a typo in your code."}, {"owner": {"reputation": 12117, "user_id": 2745495, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bbcd267235bab78ec6710ef6654ba87?s=128&d=identicon&r=PG", "display_name": "Gino Mempin", "link": "https://stackoverflow.com/users/2745495/gino-mempin"}, "edited": false, "score": 0, "creation_date": 1576728092, "post_id": 59401000, "comment_id": 104994927, "body": "You should learn to read the full error message, not just the last part. It would have shown you that &quot;<code>module &#39;pandas&#39; has no attribute &#39;read_cvs&#39;</code>&quot;. You basically have a typo for, &quot;cvs&quot; should be &quot;csv&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9351742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee70e9e1609dabd16f665e2859e0c732?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew G", "link": "https://stackoverflow.com/users/9351742/andrew-g"}, "is_accepted": false, "score": 1, "last_activity_date": 1576709854, "creation_date": 1576709854, "answer_id": 59401112, "question_id": 59401000, "link": "https://stackoverflow.com/questions/59401000/getting-process-finished-with-exit-code-1073741819-0xc0000005/59401112#59401112", "title": "Getting Process finished with exit code -1073741819 (0xC0000005)", "body": "<p>Are you trying to import a Comma-Separated Values (*.csv) file? If so, you need to change <code>pandas.read_cvs(\"myfile.cvs\")</code> to <code>pandas.read_csv(\"myfile.cvs\")</code> (and you may need to change your file from <code>myfile.cvs</code> to <code>myfile.csv</code>).</p>\n\n<p>The documentation for <code>read_csv</code> <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_csv.html\" rel=\"nofollow noreferrer\">can be found here</a>.</p>\n\n<p>Your code would look something like:</p>\n\n<pre><code>import pandas\ndf=pandas.read_csv(\"myfile.csv\")\nprint(df)\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 11682494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a8bcae63ffbc853f30ab3583b58007a?s=128&d=identicon&r=PG&f=1", "display_name": "Karthikeyan", "link": "https://stackoverflow.com/users/11682494/karthikeyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "closed_date": 1576738157, "answer_count": 1, "score": 0, "last_activity_date": 1576778672, "creation_date": 1576709082, "last_edit_date": 1576778672, "question_id": 59401000, "link": "https://stackoverflow.com/questions/59401000/getting-process-finished-with-exit-code-1073741819-0xc0000005", "closed_reason": "Not suitable for this site", "title": "Getting Process finished with exit code -1073741819 (0xC0000005)", "body": "<p>I am trying to do a simple import of data from cvs as a dataframe with the help of pandas in python. But i am getting Process finished with exit code -1073741819 (0xC0000005)</p>\n\n<p>code used : </p>\n\n<pre><code>import pandas\ndf=pandas.read_csv(\"myfile.csv\")\nprint(df)\n</code></pre>\n\n<p>Do you have any idea why I am getting this issue . Please let me know if you guys need any more details from me </p>\n\n<p>Note : Sorry I corrected the typo (Its the typo while asking the question)\nI typed just <code>import numpy</code> line even for that i am getting \n<a href=\"https://i.stack.imgur.com/4gqtr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4gqtr.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "pandas", "pivot"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1576708904, "post_id": 59400969, "comment_id": 104991020, "body": "Check Q and A question 10"}, {"owner": {"reputation": 6970, "user_id": 1421907, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/706df37b134846b622fdcb29bf879316?s=128&d=identicon&r=PG", "display_name": "Ger", "link": "https://stackoverflow.com/users/1421907/ger"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1576709329, "post_id": 59400969, "comment_id": 104991142, "body": "I am not sure this is the same question. I do not want to count the values of A or B. I want the values in column val. The question 10 is effectively the same, but the answer do a cumulative sum."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1576709376, "post_id": 59400969, "comment_id": 104991169, "body": "that is cumcount not cumsum ."}, {"owner": {"reputation": 6970, "user_id": 1421907, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/706df37b134846b622fdcb29bf879316?s=128&d=identicon&r=PG", "display_name": "Ger", "link": "https://stackoverflow.com/users/1421907/ger"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1576709488, "post_id": 59400969, "comment_id": 104991211, "body": "Yes but I neither want to count nor to sum. I would like the values without any operation."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1576709567, "post_id": 59400969, "comment_id": 104991238, "body": "You just miss the index , cumcount is to create the index for each name"}, {"owner": {"reputation": 6970, "user_id": 1421907, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/706df37b134846b622fdcb29bf879316?s=128&d=identicon&r=PG", "display_name": "Ger", "link": "https://stackoverflow.com/users/1421907/ger"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1576743187, "post_id": 59400969, "comment_id": 104999207, "body": "Ah ! Ok, I understand. Do you have the possibility to complete the answer of question 10 to give a complete solution ?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1576762174, "post_id": 59400969, "comment_id": 105008492, "body": "I will contact Pir to include that"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1583732655, "post_id": 59400969, "comment_id": 107202290, "body": "If you say <i>the number of values in A and B is not the same</i>, then the example should reflect that, e.g. <code>df = pd.DataFrame({&quot;name&quot;: [l for l in &quot;AAABBBBB&quot;], ...</code>. You&#39;re not doing <i>aggregate</i> and you&#39;re not doing <i>filter values on a given column</i> and that&#39;s not what &#39;groupby` does anyway: you mean to say <i>&quot;pivot, using column <code>name</code> to make new frame&#39;s columns&quot;</i>. Best not to reference so many keywords to explain what you&#39;re <i>not</i> doing - this question unwantedly matched searches for all sorts of unrelated queries, e.g. <i>[pandas] name result of aggregate</i>"}], "owner": {"reputation": 6970, "user_id": 1421907, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/706df37b134846b622fdcb29bf879316?s=128&d=identicon&r=PG", "display_name": "Ger", "link": "https://stackoverflow.com/users/1421907/ger"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1576708896, "answer_count": 0, "score": 0, "last_activity_date": 1583733091, "creation_date": 1576708865, "last_edit_date": 1583733091, "question_id": 59400969, "link": "https://stackoverflow.com/questions/59400969/how-to-convert-single-column-in-pandas-dataframe-to-multiple-new-columns", "closed_reason": "Duplicate", "title": "How to convert single column in pandas dataframe to multiple new columns?", "body": "<p>I would like to take a given column and use its values as (multiple) new columns in a data frame. It looks like a pivot but without index.</p>\n\n<p>If I have a data frame such as:</p>\n\n<pre><code>df = pd.DataFrame({\"name\": [l for l in \"AAABBB\"], \"val\": np.random.random(6)})\n</code></pre>\n\n<p>Example data:</p>\n\n<pre><code>  name       val\n0    A  0.600525\n1    A  0.316421\n2    A  0.744816\n3    B  0.818978\n4    B  0.647259\n5    B  0.455111\n</code></pre>\n\n<p>I would like to group by the column \"name\" but I do not want to aggregate the results. I want to have a new column A and a new column B that contain the values in column \"val\".</p>\n\n<pre><code>name         A         B\n0     0.600525  0.818978\n1     0.316421  0.647259\n2     0.744816  0.455111\n</code></pre>\n\n<p>The index doesn't matter here and of course, the number of values in A and B is not the same. </p>\n"}, {"tags": ["python", "html", "jinja2"], "comments": [{"owner": {"reputation": 979, "user_id": 6808714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d15b3cab88d9d5a4c25e71ba08a9af4a?s=128&d=identicon&r=PG", "display_name": "Mahrez BenHamad", "link": "https://stackoverflow.com/users/6808714/mahrez-benhamad"}, "edited": false, "score": 0, "creation_date": 1576709274, "post_id": 59400948, "comment_id": 104991132, "body": "the image of how they currently grouped not display? what&#39;s your view.py ?"}, {"owner": {"reputation": 3, "user_id": 10786950, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TZ5LAkt3XaU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jIEr3xkS0xhRUqdMPJ1K9UYJwPnw/mo/photo.jpg?sz=128", "display_name": "Van Hour", "link": "https://stackoverflow.com/users/10786950/van-hour"}, "reply_to_user": {"reputation": 979, "user_id": 6808714, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d15b3cab88d9d5a4c25e71ba08a9af4a?s=128&d=identicon&r=PG", "display_name": "Mahrez BenHamad", "link": "https://stackoverflow.com/users/6808714/mahrez-benhamad"}, "edited": false, "score": 0, "creation_date": 1576709684, "post_id": 59400948, "comment_id": 104991278, "body": "I dont have access to that file at the moment, but I added sample images of what I&#39;m trying to build to. Also, I searched but could not find a way to check a specific value of a cell in a table on jinja. I was trying to write an if-else to check if a value in column 1 already exist, if so, then dont add text to the cell."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10786950, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TZ5LAkt3XaU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jIEr3xkS0xhRUqdMPJ1K9UYJwPnw/mo/photo.jpg?sz=128", "display_name": "Van Hour", "link": "https://stackoverflow.com/users/10786950/van-hour"}, "edited": false, "score": 0, "creation_date": 1576768441, "post_id": 59401105, "comment_id": 105012016, "body": "I tried adding this, but it doesnt seem to make a difference. The set status_before in the else statement is not updating."}, {"owner": {"reputation": 2423, "user_id": 6007566, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2dc2e86664941a748f0dab92216d67c6?s=128&d=identicon&r=PG&f=1", "display_name": "Boendal", "link": "https://stackoverflow.com/users/6007566/boendal"}, "reply_to_user": {"reputation": 3, "user_id": 10786950, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TZ5LAkt3XaU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jIEr3xkS0xhRUqdMPJ1K9UYJwPnw/mo/photo.jpg?sz=128", "display_name": "Van Hour", "link": "https://stackoverflow.com/users/10786950/van-hour"}, "edited": false, "score": 0, "creation_date": 1576769664, "post_id": 59401105, "comment_id": 105012740, "body": "@VanHour I updated my post, try it with mutable list."}, {"owner": {"reputation": 3, "user_id": 10786950, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TZ5LAkt3XaU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jIEr3xkS0xhRUqdMPJ1K9UYJwPnw/mo/photo.jpg?sz=128", "display_name": "Van Hour", "link": "https://stackoverflow.com/users/10786950/van-hour"}, "edited": false, "score": 0, "creation_date": 1576769932, "post_id": 59401105, "comment_id": 105012899, "body": "Works perfectly! Thank you for your help and quick replies!"}, {"owner": {"reputation": 2423, "user_id": 6007566, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2dc2e86664941a748f0dab92216d67c6?s=128&d=identicon&r=PG&f=1", "display_name": "Boendal", "link": "https://stackoverflow.com/users/6007566/boendal"}, "reply_to_user": {"reputation": 3, "user_id": 10786950, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TZ5LAkt3XaU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jIEr3xkS0xhRUqdMPJ1K9UYJwPnw/mo/photo.jpg?sz=128", "display_name": "Van Hour", "link": "https://stackoverflow.com/users/10786950/van-hour"}, "edited": false, "score": 0, "creation_date": 1576770097, "post_id": 59401105, "comment_id": 105012985, "body": "@VanHour you&#39;re welcome. if it helped you please accept it as answer so people with similar problems see that it&#39;s already solved."}], "tags": [], "owner": {"reputation": 2423, "user_id": 6007566, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2dc2e86664941a748f0dab92216d67c6?s=128&d=identicon&r=PG&f=1", "display_name": "Boendal", "link": "https://stackoverflow.com/users/6007566/boendal"}, "is_accepted": true, "score": 1, "last_activity_date": 1576769598, "last_edit_date": 1576769598, "creation_date": 1576709783, "answer_id": 59401105, "question_id": 59400948, "link": "https://stackoverflow.com/questions/59400948/jinja-template-remove-duplicate-from-table-column/59401105#59401105", "title": "Jinja template - remove duplicate from table column", "body": "<p>You can try this: Check if you are already in your actual test case if yes don't print the status again else print it.</p>\n\n<pre><code>{% set status_before = [] %}    \n{% for key, value in testCaseStatusDict.items() %}\n    &lt;tr&gt;    \n        {% if value['status'][0][0] in status_before %}\n            &lt;td&gt;&lt;/td&gt;\n        {% else %}\n            &lt;td&gt;{{ value['status'][0][0] }}&lt;/td&gt;\n            {% set __ = status_before.append(value['status'][0][0]) %}\n        {% endif %}\n    ...\n</code></pre>\n\n<p>@Edit Try it with mutable list, even if it's ugly. Looks like updating a variable inside a loop is not supported: <a href=\"https://github.com/pallets/jinja/issues/641\" rel=\"nofollow noreferrer\">https://github.com/pallets/jinja/issues/641</a></p>\n"}], "owner": {"reputation": 3, "user_id": 10786950, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TZ5LAkt3XaU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jIEr3xkS0xhRUqdMPJ1K9UYJwPnw/mo/photo.jpg?sz=128", "display_name": "Van Hour", "link": "https://stackoverflow.com/users/10786950/van-hour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "accepted_answer_id": 59401105, "answer_count": 1, "score": 0, "last_activity_date": 1576769598, "creation_date": 1576708719, "last_edit_date": 1576726542, "question_id": 59400948, "link": "https://stackoverflow.com/questions/59400948/jinja-template-remove-duplicate-from-table-column", "title": "Jinja template - remove duplicate from table column", "body": "<p>I created a table with 3 columns. </p>\n\n<ul>\n<li>Column one is the main test name.</li>\n<li>Column two is the sub-test name.</li>\n<li>Column three is the pass/fail status.</li>\n</ul>\n\n<p>I would like to remove duplicates in column so that sub-test and status can look like they are grouped with the main test. </p>\n\n<p>I tried to use the unique filter in the html below <code>&lt;td&gt;{{ value['status'][0][0]|unique }}&lt;/td&gt;</code> but no luck there. </p>\n\n<p>Basically trying to remove duplicates from column 1 of my table. </p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;table style=\"width: 100%\" class=\"flex-container\"&gt;\n    &lt;tbody&gt;\n        {% for key, value in testCaseStatusDict.items() %}\n            &lt;tr&gt;\n                &lt;td&gt;{{ value['status'][0][0] }}&lt;/td&gt;\n\n                &lt;td style=\"text-align: left; vertical-align: middle\"&gt;&lt;b&gt;{{ value['testCaseName']}}&lt;/b&gt;&lt;/td&gt;\n\n                {% for status in value['status']%}\n                    {% if status[2] == 'FAIL' %}\n                        &lt;td style=\"background-color: red; text-align: center\"&gt;&lt;br&gt;{{ status[2] }} &lt;br&gt; {{ status[3] }}&lt;/td&gt;\n                    {% else %}\n                        &lt;td style=\"background-color: green; text-align: center\"&gt;&lt;br&gt;{{ status[2] }} &lt;br&gt; {{ status[3] }}&lt;/td&gt;\n                    {% endif %}\n                {% endfor %}\n            &lt;/tr&gt;\n        {% endfor %}\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Desired look:</p>\n\n<p><a href=\"https://i.stack.imgur.com/L9GTI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L9GTI.png\" alt=\"Desired look\"></a></p>\n\n<p>Actual output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/3HX2u.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3HX2u.png\" alt=\"Actual output\"></a></p>\n"}, {"tags": ["python", "python-3.x", "audio", "microphone", "python-sounddevice"], "comments": [{"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576713183, "post_id": 59400925, "comment_id": 104992156, "body": "The docs don\u2019t cover this?"}, {"owner": {"reputation": 69, "user_id": 9438598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--t8PST-1gDQ/AAAAAAAAAAI/AAAAAAAAAeE/W5u1-nxUUDU/photo.jpg?sz=128", "display_name": "raz erez", "link": "https://stackoverflow.com/users/9438598/raz-erez"}, "reply_to_user": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576736677, "post_id": 59400925, "comment_id": 104996919, "body": "I couldn&#39;t find a solution in the docs."}, {"owner": {"reputation": 3727, "user_id": 500098, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d0f6607a133fa379486fca179ec92c27?s=128&d=identicon&r=PG", "display_name": "Matthias", "link": "https://stackoverflow.com/users/500098/matthias"}, "edited": false, "score": 0, "creation_date": 1576741830, "post_id": 59400925, "comment_id": 104998695, "body": "The usage in your code seems fine. Probably the input is switched automatically (by the OS) when you plug in the headphones? Could you provide the list of devices?"}, {"owner": {"reputation": 69, "user_id": 9438598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--t8PST-1gDQ/AAAAAAAAAAI/AAAAAAAAAeE/W5u1-nxUUDU/photo.jpg?sz=128", "display_name": "raz erez", "link": "https://stackoverflow.com/users/9438598/raz-erez"}, "edited": false, "score": 0, "creation_date": 1576745539, "post_id": 59400925, "comment_id": 105000251, "body": "When I look at the devices before I plug the headphones I see Realtek microphone. When I plug the headphones, the screen of the devices does not change but the input audio is from the headphones. it seems like the input audio was changed in the hardware level and the pc is not aware of this change."}], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 9438598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--t8PST-1gDQ/AAAAAAAAAAI/AAAAAAAAAeE/W5u1-nxUUDU/photo.jpg?sz=128", "display_name": "raz erez", "link": "https://stackoverflow.com/users/9438598/raz-erez"}, "is_accepted": true, "score": 0, "last_activity_date": 1576777291, "creation_date": 1576777291, "answer_id": 59414535, "question_id": 59400925, "link": "https://stackoverflow.com/questions/59400925/how-to-specify-which-recording-device-to-use-with-python-sounddevice/59414535#59414535", "title": "How to specify which recording device to use with python sounddevice", "body": "<p>The problem was that in the audio manager (in my case it's Realtek audio manager), the recording device advance settings were set to \"Tie up same type of input jacks...\".</p>\n\n<p>When I changed it to \"Separate all input jacks as independent input devices\" it fixed the problem.</p>\n"}], "owner": {"reputation": 69, "user_id": 9438598, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--t8PST-1gDQ/AAAAAAAAAAI/AAAAAAAAAeE/W5u1-nxUUDU/photo.jpg?sz=128", "display_name": "raz erez", "link": "https://stackoverflow.com/users/9438598/raz-erez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 1, "accepted_answer_id": 59414535, "answer_count": 1, "score": 0, "last_activity_date": 1615852685, "creation_date": 1576708577, "question_id": 59400925, "link": "https://stackoverflow.com/questions/59400925/how-to-specify-which-recording-device-to-use-with-python-sounddevice", "title": "How to specify which recording device to use with python sounddevice", "body": "<p>I want to use the following function twice.</p>\n\n<p>This function converts live audio input into a wav file.</p>\n\n<p>For the first time, I use my pc built-in microphone and for the second run, I use my headphone's microphone that I plugged in before I run the code.</p>\n\n<p>But when I tried my function it used only my headphone's microphone:</p>\n\n<pre><code>import sounddevice as sd\nfrom scipy.io.wavfile import write\nfrom playsound import playsound\ndef audio_to_wav(dst, device):\n    \"\"\"\n    converts live audio to wav file\n    :param dst: destination wav file\n    \"\"\"\n    # Sample rate:\n    fs = 4410\n    # Duration of recording:\n    seconds = 5\n\n    myrecording = sd.rec(int(seconds * fs), samplerate=fs, channels=2, device=device)\n    # Wait until recording is finished:\n    sd.wait()\n    # Save as WAV file:\n    write(dst, fs, myrecording)\n</code></pre>\n\n<p>In my main I called this function twice:</p>\n\n<pre><code>def main():\n    # transfer mic1 audio to wav:\n    audio_to_wav(\"file1.wav\", 0)\n    # transfer mic2 audio to wav:\n    audio_to_wav(\"file2.wav\", 1)\n    # play the wav files audio:\n    playsound(\"file1.wav\")\n    playsound(\"file2.wav\")\n</code></pre>\n\n<p>But when i ran this code the function used only the headphone's microphone.</p>\n\n<p>How can I use both my pc built-in microphone and my headphone's microphone at the same time?</p>\n"}, {"tags": ["python", "pangram"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1576708665, "post_id": 59400918, "comment_id": 104990953, "body": "Note you could just <code>return &quot;abcdefghijklmnopqrstuvwxyz&quot; in sentence</code>, but that that&#39;s absolutely not the right logic. Try e.g. <code>&quot;abc&quot; in &quot;cab&quot;</code> to see why this might be a problem."}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576709269, "post_id": 59400918, "comment_id": 104991129, "body": "Let me guess, you only pass the tests whose result is <code>False</code>?"}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1576709290, "post_id": 59400918, "comment_id": 104991138, "body": "That, plus the <code>&quot;abcdefghijklmnopqrstuvwxyz&quot;</code> test."}, {"owner": {"reputation": 16851, "user_id": 5460719, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0f2a855c86ad12fc2988d3948b69ec6?s=128&d=identicon&r=PG&f=1", "display_name": "Tom Karzes", "link": "https://stackoverflow.com/users/5460719/tom-karzes"}, "edited": false, "score": 0, "creation_date": 1576709332, "post_id": 59400918, "comment_id": 104991147, "body": "<code>&quot;abc&quot; in s</code> will return true only if the string <code>abc</code> occurs in <code>s</code> as a substring, i.e. in that exact order with no intervening characters.  So it would return true for <code>xabcy</code> but false for <code>xacby</code> or <code>axbyc</code> etc."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576713247, "post_id": 59400918, "comment_id": 104992172, "body": "This is almost certainly a duplicate..."}], "answers": [{"comments": [{"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 5, "creation_date": 1576709467, "post_id": 59401043, "comment_id": 104991205, "body": "Even more Pythonic: <code>return set(alphabet) &lt;= set(sentence.lower())</code>."}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1576709551, "post_id": 59401043, "comment_id": 104991236, "body": "It&#39;s equivalent to the <code>issubset</code> method: <a href=\"https://docs.python.org/3/library/stdtypes.html#frozenset.issubset\" rel=\"nofollow noreferrer\">docs.python.org/3/library/stdtypes.html#frozenset.issubset</a>"}], "tags": [], "owner": {"reputation": 337, "user_id": 4695453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c126a2e8cc0dd2feea773cf6d60ad0a6?s=128&d=identicon&r=PG&f=1", "display_name": "swaggy p", "link": "https://stackoverflow.com/users/4695453/swaggy-p"}, "is_accepted": true, "score": 5, "last_activity_date": 1576709408, "last_edit_date": 1576709408, "creation_date": 1576709323, "answer_id": 59401043, "question_id": 59400918, "link": "https://stackoverflow.com/questions/59400918/errors-in-python-pangram-checker-on-exercism-io/59401043#59401043", "title": "Errors in Python Pangram Checker on Exercism.io", "body": "<p>This:</p>\n\n<pre><code>alphabet = \"abcdefghijklmnopqrstuvwxyz\"\nif alphabet in sentence:\n</code></pre>\n\n<p>is checking if that <em>entire string</em>, i.e., the string <code>abcdefghijklmnopqrstuvwxyz</code>, is in the sentence. it is <em>not</em> checking that each individual letter of that string is in the sentence.</p>\n\n<p>As it stands, your program will only return true if the string being tested against contains the precise sequence <code>abcdefghijklmnopqrstuvwxyz</code>. None of your tests contain that string except the 2nd one, but since a couple of your tests are supposed to return false, those ones are passing.</p>\n\n<p>A way of checking each letter looks something like this (and there are surely better/more pythonic ways, just trying to convey the concept of checking each letter instead of checking that entire big string):</p>\n\n<pre><code>def is_pangram(sentence):\n    alphabet = \"abcdefghijklmnopqrstuvwxyz\"\n\n    for char in alphabet: \n        if char not in sentence.lower(): \n            return False\n\n    return True\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 10822604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Iu6Vl.jpg?s=128&g=1", "display_name": "Jordan Williams", "link": "https://stackoverflow.com/users/10822604/jordan-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 59401043, "answer_count": 1, "score": 1, "last_activity_date": 1576709758, "creation_date": 1576708531, "last_edit_date": 1576709758, "question_id": 59400918, "link": "https://stackoverflow.com/questions/59400918/errors-in-python-pangram-checker-on-exercism-io", "title": "Errors in Python Pangram Checker on Exercism.io", "body": "<p>I am trying to solve <a href=\"https://exercism.io/my/solutions/9be7b7a4b23c4ead8401fe1e728572b3\" rel=\"nofollow noreferrer\">this</a> problem on Exercism.io's Python track and am passing all tests except tests for mixed case and punctuation, only lower case, numbers, and underscores. There are 10 tests and I currently have four incorrect. Here's my code.</p>\n\n<pre><code>def is_pangram(sentence):\nalphabet = \"abcdefghijklmnopqrstuvwxyz\"\nif alphabet in sentence:\n    return True\nelse:\n    return False\n</code></pre>\n\n<p>Here is the test code:</p>\n\n<pre><code>class PangramTest(unittest.TestCase):\ndef test_empty_sentence(self):\n    self.assertIs(is_pangram(\"\"), False)\n\ndef test_perfect_lower_case(self):\n    self.assertIs(is_pangram(\"abcdefghijklmnopqrstuvwxyz\"), True)\n\ndef test_only_lower_case(self):\n    self.assertIs(is_pangram(\"the quick brown fox jumps over the lazy dog\"), True)\n\ndef test_missing_the_letter_x(self):\n    self.assertIs(\n        is_pangram(\"a quick movement of the enemy will jeopardize five gunboats\"),\n        False,\n    )\n\ndef test_missing_the_letter_h(self):\n    self.assertIs(is_pangram(\"five boxing wizards jump quickly at it\"), False)\n\ndef test_with_underscores(self):\n    self.assertIs(is_pangram(\"the_quick_brown_fox_jumps_over_the_lazy_dog\"), True)\n\ndef test_with_numbers(self):\n    self.assertIs(\n        is_pangram(\"the 1 quick brown fox jumps over the 2 lazy dogs\"), True\n    )\n\ndef test_missing_letters_replaced_by_numbers(self):\n    self.assertIs(is_pangram(\"7h3 qu1ck brown fox jumps ov3r 7h3 lazy dog\"), False)\n\ndef test_mixed_case_and_punctuation(self):\n    self.assertIs(is_pangram('\"Five quacking Zephyrs jolt my wax bed.\"'), True)\n\ndef test_case_insensitive(self):\n    self.assertIs(is_pangram(\"the quick brown fox jumps over with lazy FX\"), False)\n</code></pre>\n\n<p>What am I missing? Is there any aspect of this conceptually that I haven't grasped that I should do further research into?</p>\n"}, {"tags": ["python", "pip"], "comments": [{"owner": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 0, "creation_date": 1576709058, "post_id": 59400916, "comment_id": 104991071, "body": "how are you getting the package on the windows machine if you don&#39;t have Internet"}, {"owner": {"reputation": 289, "user_id": 2965071, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ylMpw.png?s=128&g=1", "display_name": "HoopsMcCann", "link": "https://stackoverflow.com/users/2965071/hoopsmccann"}, "reply_to_user": {"reputation": 9070, "user_id": 6817835, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8GBAa.jpg?s=128&g=1", "display_name": "gold_cy", "link": "https://stackoverflow.com/users/6817835/gold-cy"}, "edited": false, "score": 0, "creation_date": 1576710449, "post_id": 59400916, "comment_id": 104991498, "body": "@aws_apprentice on windows I already have pip and python 3.6, on mac I have the project with the dependencies"}], "answers": [{"comments": [{"owner": {"reputation": 515, "user_id": 2816849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6da0566b755d59605cbc3f7cd8edcc91?s=128&d=identicon&r=PG&f=1", "display_name": "LeBlue", "link": "https://stackoverflow.com/users/2816849/leblue"}, "edited": false, "score": 0, "creation_date": 1576711903, "post_id": 59401304, "comment_id": 104991833, "body": "I would have chosen to first build a requirments with <code>pip freeze &gt; all_reqs.txt</code> and convert to wheels with <code>pip wheel -r all_reqs.txt</code> and afterwards download everything with your approach for whl that are not <code>any</code>"}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "reply_to_user": {"reputation": 515, "user_id": 2816849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6da0566b755d59605cbc3f7cd8edcc91?s=128&d=identicon&r=PG&f=1", "display_name": "LeBlue", "link": "https://stackoverflow.com/users/2816849/leblue"}, "edited": false, "score": 0, "creation_date": 1576712038, "post_id": 59401304, "comment_id": 104991875, "body": "Run <code>pip freeze</code> on MacOS to list Windows packages? What&#39;s the point? Convert packages on MacOS to OSX wheels to be moved to Windows? Isn&#39;t that a bit meaningless?"}, {"owner": {"reputation": 515, "user_id": 2816849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6da0566b755d59605cbc3f7cd8edcc91?s=128&d=identicon&r=PG&f=1", "display_name": "LeBlue", "link": "https://stackoverflow.com/users/2816849/leblue"}, "edited": false, "score": 0, "creation_date": 1576712660, "post_id": 59401304, "comment_id": 104992026, "body": "No it is not, as a lot of packages will be <code>py2.py3-none-any.whl</code> which will run/install under most if not any python version and os (pure python)."}, {"owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "reply_to_user": {"reputation": 515, "user_id": 2816849, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6da0566b755d59605cbc3f7cd8edcc91?s=128&d=identicon&r=PG&f=1", "display_name": "LeBlue", "link": "https://stackoverflow.com/users/2816849/leblue"}, "edited": false, "score": 0, "creation_date": 1576713342, "post_id": 59401304, "comment_id": 104992189, "body": "IMO there are not so many universal packages. Most now have extension written in C/C++. Some are almost completely written in C/C++. People usually need numpy, scipy, pandas, tensorflow."}], "tags": [], "owner": {"reputation": 55797, "user_id": 7976758, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/512cfbaf98d63ca4acd57b2df792aec6?s=128&d=identicon&r=PG", "display_name": "phd", "link": "https://stackoverflow.com/users/7976758/phd"}, "is_accepted": true, "score": 1, "last_activity_date": 1576711122, "creation_date": 1576711122, "answer_id": 59401304, "question_id": 59400916, "link": "https://stackoverflow.com/questions/59400916/package-python-project-along-with-dependencies-to-another-machine-without-intern/59401304#59401304", "title": "Package Python project along with dependencies to another machine without internet and different OS", "body": "<p>To <strong>some extent</strong> <code>pip</code> allows to download a package with dependencies for a different platform. Try</p>\n\n<pre><code>pip download --only-binary=:all: --platform win_amd64 --implementation cp --python-version=3.6 --abi=cp36m 'put-your-package-name-here'\n</code></pre>\n\n<p>If the package and all its dependencies provide binary wheels <code>pip</code> downloads all of them into the current directory. Move them to the offline computer and run there</p>\n\n<pre><code>pip install --find-links=\\path\\to\\wheels\\directory 'your-package'\n</code></pre>\n\n<p>If the package and all its dependencies provide only source distribution try</p>\n\n<pre><code>pip download --only-binary=:none: --platform win_amd64 --implementation cp --python-version=3.6 --abi=cp36m 'your-package'\n</code></pre>\n\n<p>But if the package and dependencies are mixed \u2014 some have binary wheels and some only sdists \u2014 <code>pip</code> fails to download dependencies. There is no solution for this situation. The only workaround is to run Windows on your MacOS \u2014 in an emulator or a container.</p>\n\n<p>PS. I use platform <code>win_amd64</code> as an example. If you have 32-bit Windows or if you have 32-bit Python on a 64-bit Windows \u2014 use platform <code>win32</code>.</p>\n"}], "owner": {"reputation": 289, "user_id": 2965071, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ylMpw.png?s=128&g=1", "display_name": "HoopsMcCann", "link": "https://stackoverflow.com/users/2965071/hoopsmccann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "accepted_answer_id": 59401304, "answer_count": 1, "score": 2, "last_activity_date": 1576711122, "creation_date": 1576708526, "question_id": 59400916, "link": "https://stackoverflow.com/questions/59400916/package-python-project-along-with-dependencies-to-another-machine-without-intern", "title": "Package Python project along with dependencies to another machine without internet and different OS", "body": "<p>As the title suggests, I have a computer running mac os with a python project. I so have a windows computer without internet, with Python 3.6, and with pip.</p>\n\n<p>The project in question relies on a couple pip package dependencies. Is there anyway to package everything together so that the project can work on the windows machine with no internet?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576713416, "post_id": 59400855, "comment_id": 104992213, "body": "Have you read the docs!?"}], "answers": [{"tags": [], "owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "is_accepted": false, "score": 1, "last_activity_date": 1576709113, "last_edit_date": 1576709113, "creation_date": 1576708519, "answer_id": 59400912, "question_id": 59400855, "link": "https://stackoverflow.com/questions/59400855/pandas-create-a-dataframe-by-multiplying-every-element-in-a-list-with-every-othe/59400912#59400912", "title": "pandas create a DataFrame by multiplying every element in a list with every other element", "body": "<pre><code>data = [1,2,3,4]\n</code></pre>\n\n<p>Nested for loops would work:</p>\n\n<pre><code>import numpy as np\na = []\nfor n in data:\n    row = []\n    for m in data:\n        math = some_operation_on(m,n)\n        row.append(math)\n    a.append(row)\n\na = np.array(a)\n</code></pre>\n\n<p>For simple operations like your example use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.mgrid.html#numpy.mgrid\" rel=\"nofollow noreferrer\">numpy.meshgrid</a>.</p>\n\n<pre><code>In [21]: a = [1,2,3,4]\n\nIn [22]: x,y = np.meshgrid(a,a)\n\nIn [23]: x*y\nOut[23]: \narray([[ 1,  2,  3,  4],\n       [ 2,  4,  6,  8],\n       [ 3,  6,  9, 12],\n       [ 4,  8, 12, 16]])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 249, "user_id": 3637405, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9f6344055cff36934b57af7b8c9875cc?s=128&d=identicon&r=PG&f=1", "display_name": "UserBRy", "link": "https://stackoverflow.com/users/3637405/userbry"}, "edited": false, "score": 0, "creation_date": 1576710115, "post_id": 59401014, "comment_id": 104991396, "body": "That worked great.  Is there a way to name the columns of the dataframe as you using this approach?  Or would it be better to name it after the dataframe has been populated?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 249, "user_id": 3637405, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9f6344055cff36934b57af7b8c9875cc?s=128&d=identicon&r=PG&f=1", "display_name": "UserBRy", "link": "https://stackoverflow.com/users/3637405/userbry"}, "edited": false, "score": 0, "creation_date": 1576710156, "post_id": 59401014, "comment_id": 104991408, "body": "@UserBRy You can name the columns while creating them: <code>pd.DataFrame(np.multiply.outer(arr, arr), columns=[&#39;A&#39;, &#39;B&#39;, &#39;C&#39;, &#39;D&#39;])</code>"}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": false, "score": 2, "last_activity_date": 1576709159, "creation_date": 1576709159, "answer_id": 59401014, "question_id": 59400855, "link": "https://stackoverflow.com/questions/59400855/pandas-create-a-dataframe-by-multiplying-every-element-in-a-list-with-every-othe/59401014#59401014", "title": "pandas create a DataFrame by multiplying every element in a list with every other element", "body": "<p>Broadcasted multiplication will work here:</p>\n\n<pre><code>arr = np.array([1, 2, 3, 4])\npd.DataFrame(arr * arr[:,None])    \n\n   0  1   2   3\n0  1  2   3   4\n1  2  4   6   8\n2  3  6   9  12\n3  4  8  12  16\n</code></pre>\n\n<p>Alternatively, most numpy arithmetic functions define an <code>.outer</code> unfunc:</p>\n\n<pre><code>pd.DataFrame(np.multiply.outer(arr, arr))\n\n   0  1   2   3\n0  1  2   3   4\n1  2  4   6   8\n2  3  6   9  12\n3  4  8  12  16\n</code></pre>\n"}], "owner": {"reputation": 249, "user_id": 3637405, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/9f6344055cff36934b57af7b8c9875cc?s=128&d=identicon&r=PG&f=1", "display_name": "UserBRy", "link": "https://stackoverflow.com/users/3637405/userbry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1576709169, "creation_date": 1576708168, "last_edit_date": 1576709169, "question_id": 59400855, "link": "https://stackoverflow.com/questions/59400855/pandas-create-a-dataframe-by-multiplying-every-element-in-a-list-with-every-othe", "title": "pandas create a DataFrame by multiplying every element in a list with every other element", "body": "<p>I need to populate a dataframe with a matrix built from a single list, but the math and python syntax are beyond me.  I essentially need to perform some math operations as if the same list were both the rows and the columns.</p>\n\n<p>So it should look something like this....</p>\n\n<pre><code>#Input\nlist = [1,2,3,4]\n\ncreate a matrix using some math on the list, like matrix[i,j] = list[i] * list[j]\n\n#output\nnp.matrix([[1,2,3,4], [2,4,6,8], [3,6,9,12], [4,8,12,16]])\n\ndf = pd.dataframe[np.matrix]\n</code></pre>\n"}, {"tags": ["python", "tkinter", "tkinter-canvas"], "comments": [{"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 1, "creation_date": 1576708634, "post_id": 59400843, "comment_id": 104990942, "body": "Change to <code>iid = cv.create_rectangle(...</code>. Later on you can do: <code>cv.itemconfig(iid, fill=&#39;green&#39;)</code> Read <a href=\"http://effbot.org/tkinterbook/canvas.htm#Tkinter.Canvas.itemconfig-method\" rel=\"nofollow noreferrer\">Canvas.itemconfig-method</a>"}], "answers": [{"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": true, "score": 1, "last_activity_date": 1576711166, "last_edit_date": 1576711166, "creation_date": 1576709302, "answer_id": 59401040, "question_id": 59400843, "link": "https://stackoverflow.com/questions/59400843/how-can-i-config-dynamically-created-rectangles-on-tkinter-canvas/59401040#59401040", "title": "How can I config dynamically created rectangles on Tkinter Canvas?", "body": "<p>Every time you create an item on a canvas, the function will return a unique id. You can use that id laster as the first argument to the <code>itemconfigure</code> method. You just need to store those ids and use them later.</p>\n\n<p>Alternatively, if each word in <code>wordList</code> is unique, you can use the word as a tag, and treat the tag as if it were the unique id. In the following example, both the image and rectangle have the word as a tag. The rectangle also has a tag that is the word with the prefix \"rect-\". </p>\n\n<pre><code>for item in wordList: ##creating the image and its corresponding rectangle\n    cv.create_image(xVal*i, 100, image=item[0], tags=(item,))\n    cv.create_rectangle(xVal*(i-1)+10, 445, xVal*(i+1)-10, 475, fill=\"red\", \n        tags=(item, \"rect-\"+item))\n    i += 2\n</code></pre>\n\n<p>With that, you could configure the rectangle for the word \"hello\" with something like this:</p>\n\n<pre><code>cv.itemconfigure(\"rect-hello\", fill=\"green\")\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12345773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de2b6f608931d1e50d6f62dead79f181?s=128&d=identicon&r=PG&f=1", "display_name": "b0fa", "link": "https://stackoverflow.com/users/12345773/b0fa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 59401040, "answer_count": 1, "score": 0, "last_activity_date": 1576711166, "creation_date": 1576708126, "question_id": 59400843, "link": "https://stackoverflow.com/questions/59400843/how-can-i-config-dynamically-created-rectangles-on-tkinter-canvas", "title": "How can I config dynamically created rectangles on Tkinter Canvas?", "body": "<p>So I'm creating a image-to-word matching game on Tkinter in Python. The user can select how many images/words they'd like to play with/match, and I need a red rectangle to correspond to each image. The code that I used to create these rectangles is as follows:</p>\n\n<pre><code>for item in wordList: ##creating the image and its corresponding rectangle\n    cv.create_image(xVal*i, 100, image=item[0])\n    cv.create_rectangle(xVal*(i-1)+10, 445, xVal*(i+1)-10, 475, fill=\"red\")\n    i += 2\n</code></pre>\n\n<p>Where wordList is the list of images that will be shown to the user. \nWhat I wanted to do is have the rectangle for each image turn green if the user enters the right word into an Entry widget. However, I have no idea how to access/config the rectangles that were made.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "csv", "dataframe", "dictionary", "data-analysis"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1576708204, "post_id": 59400818, "comment_id": 104990816, "body": "Not clear. Are you comparing an existing DataFrame to a separate csv?  An <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be usefull. Please also read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1576708946, "post_id": 59400818, "comment_id": 104991029, "body": "What values are &quot;key&quot;?"}, {"owner": {"reputation": 95, "user_id": 12559321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb4b9f54b26449cb1fcd1d88df2c91c?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/12559321/rahul"}, "edited": false, "score": 0, "creation_date": 1576709529, "post_id": 59400818, "comment_id": 104991225, "body": "In the example. &#39;Key&#39; is &#39;Names&#39; and &#39;Price&#39; is assigned to it. I need to keep only those records where &#39;price&#39; are available. My dictionary is in CSV and am accessing my DF through Python."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1576709876, "post_id": 59400818, "comment_id": 104991329, "body": "<a href=\"https://stackoverflow.com/help/formatting\">Formatting help</a> ... <a href=\"https://stackoverflow.com/editing-help\">more Formatting</a> ... <a href=\"https://meta.stackexchange.com/questions/3122/formatting-sandbox\">Formatting sandbox</a>"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576713591, "post_id": 59400818, "comment_id": 104992260, "body": "Despite multiple comments, this remains quite unclear..."}], "answers": [{"comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1576708876, "post_id": 59400931, "comment_id": 104991008, "body": "I think the OP wants to &quot;reject&quot; rows that don&#39;t have &quot;key&quot; values (but may have others, so aren&#39;t completely empty)."}, {"owner": {"reputation": 95, "user_id": 12559321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb4b9f54b26449cb1fcd1d88df2c91c?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/12559321/rahul"}, "edited": false, "score": 0, "creation_date": 1576709361, "post_id": 59400931, "comment_id": 104991162, "body": "Thanks for quick reply. I also need to count the number of records I rejected from that column of my data frame which has missing dictionary value. Your thoughts will be highly appreciated."}, {"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "reply_to_user": {"reputation": 95, "user_id": 12559321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb4b9f54b26449cb1fcd1d88df2c91c?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/12559321/rahul"}, "edited": false, "score": 0, "creation_date": 1576709817, "post_id": 59400931, "comment_id": 104991311, "body": "@Rahul i added that to my answer, i hope that helps"}, {"owner": {"reputation": 95, "user_id": 12559321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb4b9f54b26449cb1fcd1d88df2c91c?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/12559321/rahul"}, "edited": false, "score": 0, "creation_date": 1576710311, "post_id": 59400931, "comment_id": 104991454, "body": "Thanks. Appreciated. You accessed shape through Index. What if I want access through column name. I have more than 200 columns. So it will be easy to access by name. Any suggestion."}, {"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "edited": false, "score": 0, "creation_date": 1576710473, "post_id": 59400931, "comment_id": 104991503, "body": "You can use it per column the same way, is that what you mean:  df[&#39;price&#39;].shape[0] - df[&#39;price&#39;].dropna().shape[0]"}, {"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "edited": false, "score": 0, "creation_date": 1576710538, "post_id": 59400931, "comment_id": 104991520, "body": "btw, if you enjoyed the answer, check out: <a href=\"https://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work/5235#5235\" title=\"how does accepting an answer work\">meta.stackexchange.com/questions/5234/&hellip;</a>  and welcome to stackoverflow!"}, {"owner": {"reputation": 95, "user_id": 12559321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb4b9f54b26449cb1fcd1d88df2c91c?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/12559321/rahul"}, "edited": false, "score": 0, "creation_date": 1576710882, "post_id": 59400931, "comment_id": 104991603, "body": "No. I have the record of &#39;names&#39; with additional 200 columns in which few of the names, price is missing. I have to access my data frame through &#39;Name&#39;. Secondly why you used &#39;0&#39; if I want to access through column name."}, {"owner": {"reputation": 95, "user_id": 12559321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb4b9f54b26449cb1fcd1d88df2c91c?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/12559321/rahul"}, "edited": false, "score": 0, "creation_date": 1576711821, "post_id": 59400931, "comment_id": 104991803, "body": "Any more suggestion ? I really need help now."}, {"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "reply_to_user": {"reputation": 95, "user_id": 12559321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb4b9f54b26449cb1fcd1d88df2c91c?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/12559321/rahul"}, "edited": false, "score": 0, "creation_date": 1576711944, "post_id": 59400931, "comment_id": 104991846, "body": "@Rahul, it just a convention i use, i can help further, let me think about it. Can you give me an example, i think i know what you mean,  but i need a better description so i can formulate a good answer"}, {"owner": {"reputation": 95, "user_id": 12559321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb4b9f54b26449cb1fcd1d88df2c91c?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/12559321/rahul"}, "edited": false, "score": 0, "creation_date": 1576712545, "post_id": 59400931, "comment_id": 104992004, "body": "My df has 200 columns. One of the column is mapped to dictionary in csv which is  mapped in python df. I have 10k records and few of the particular column records in dictionary may not match the dictionary. So I need to reject those records. Besides that I also need to count the records which I had rejected. I hope if am clear ? may be you can give me some loop function which can read dictionary and rejects records by itself."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "reply_to_user": {"reputation": 95, "user_id": 12559321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb4b9f54b26449cb1fcd1d88df2c91c?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/12559321/rahul"}, "edited": false, "score": 0, "creation_date": 1576713559, "post_id": 59400931, "comment_id": 104992251, "body": "@Rahul A column is mapped to a dictionary in a CSV file which is mapped to a (the same?) DataFrame?"}, {"owner": {"reputation": 95, "user_id": 12559321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb4b9f54b26449cb1fcd1d88df2c91c?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/12559321/rahul"}, "edited": false, "score": 0, "creation_date": 1576714933, "post_id": 59400931, "comment_id": 104992540, "body": "any suggestions ?"}, {"owner": {"reputation": 95, "user_id": 12559321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb4b9f54b26449cb1fcd1d88df2c91c?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/12559321/rahul"}, "edited": false, "score": 0, "creation_date": 1576716898, "post_id": 59400931, "comment_id": 104992924, "body": "dropna didnt worked out. It didnt save any record. I can see only column headers.My python is connected to database. When i wanted to export into CSV after passing dropna. It shows empty dataframe."}, {"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "edited": false, "score": 0, "creation_date": 1576718880, "post_id": 59400931, "comment_id": 104993299, "body": "I think we should move this to chat to discuss further"}, {"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "edited": false, "score": 0, "creation_date": 1576719058, "post_id": 59400931, "comment_id": 104993332, "body": "<a href=\"https://chat.stackoverflow.com/rooms/info/204513/how-to-handle-missing-key-values-in-csv-dictionary?tab=general\">chat.stackoverflow.com/rooms/info/204513/&hellip;</a>"}], "tags": [], "owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "is_accepted": false, "score": 0, "last_activity_date": 1576715794, "last_edit_date": 1576715794, "creation_date": 1576708609, "answer_id": 59400931, "question_id": 59400818, "link": "https://stackoverflow.com/questions/59400818/how-to-handle-missing-key-values-in-csv-dictionary-and-working-through-pandas/59400931#59400931", "title": "How to handle &#39;missing key values&#39; in CSV dictionary and working through Pandas data frame?", "body": "<p>You can use:</p>\n\n<pre><code>df.dropna() \n</code></pre>\n\n<p>It will drop the entire row of an empty value</p>\n\n<p>To count the rows that have a NaN value do this:</p>\n\n<pre><code>df.shape[0] - df.dropna().shape[0] \n# 2\n</code></pre>\n\n<p>if your counting matches for a map you can do it like this:</p>\n\n<pre><code>dictionary= {'Ram':100,'John':200,'Mike':500}\n\nlen(df[df.Names.map(dictionary).fillna(0) ==0])                                                                                                                                     \n# 2\n\nlen(df[df.Names.map(dictionary).fillna(0) &gt;0])                                                                                                                                      \n# 3\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 12559321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eb4b9f54b26449cb1fcd1d88df2c91c?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/12559321/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1576715794, "creation_date": 1576707968, "last_edit_date": 1576708382, "question_id": 59400818, "link": "https://stackoverflow.com/questions/59400818/how-to-handle-missing-key-values-in-csv-dictionary-and-working-through-pandas", "title": "How to handle &#39;missing key values&#39; in CSV dictionary and working through Pandas data frame?", "body": "<p>I want to reject the records in pandas data frame where key values are missing and assigning only those records which are present in CSV. For example match only those 'Names' where 'prices' are mentioned.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>'Names' 'price'\nRam      100\nJohn     200\ndan \nMike     500\nCapri   \n</code></pre>\n"}, {"tags": ["python", "postgresql", "airflow"], "comments": [{"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 1, "creation_date": 1576713638, "post_id": 59400807, "comment_id": 104992272, "body": "What have you done to debug this? Have you tried printing the values at different steps of the way? Checking if the contents of the DB actually change?"}, {"owner": {"reputation": 429, "user_id": 12447788, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-p1o2VFOrUzI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rf8aT0EOnjV5N42LLy_Rp5C-3qTrw/photo.jpg?sz=128", "display_name": "S.Au.Ra.B.H", "link": "https://stackoverflow.com/users/12447788/s-au-ra-b-h"}, "edited": false, "score": 0, "creation_date": 1576714141, "post_id": 59400807, "comment_id": 104992384, "body": "The code creates a dictionary from the returned columns and rows. If only values are required to be captured, why not exclude columns?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1576714345, "post_id": 59400807, "comment_id": 104992433, "body": "Are you using MySQL or Postgres?"}, {"owner": {"reputation": 236, "user_id": 10405409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/421965571c01369b361d03aed4a022ac?s=128&d=identicon&r=PG&f=1", "display_name": "Coder123", "link": "https://stackoverflow.com/users/10405409/coder123"}, "edited": false, "score": 0, "creation_date": 1576766887, "post_id": 59400807, "comment_id": 105011175, "body": "i am using MySQL"}], "answers": [{"comments": [{"owner": {"reputation": 236, "user_id": 10405409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/421965571c01369b361d03aed4a022ac?s=128&d=identicon&r=PG&f=1", "display_name": "Coder123", "link": "https://stackoverflow.com/users/10405409/coder123"}, "edited": false, "score": 0, "creation_date": 1576769697, "post_id": 59402015, "comment_id": 105012759, "body": "It is now giving me the error of TypeError: tuple indices must be integers, not str. Do you know why that is?"}, {"owner": {"reputation": 7900, "user_id": 642096, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/PgqQf.jpg?s=128&g=1", "display_name": "cetver", "link": "https://stackoverflow.com/users/642096/cetver"}, "reply_to_user": {"reputation": 236, "user_id": 10405409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/421965571c01369b361d03aed4a022ac?s=128&d=identicon&r=PG&f=1", "display_name": "Coder123", "link": "https://stackoverflow.com/users/10405409/coder123"}, "edited": false, "score": 0, "creation_date": 1576787620, "post_id": 59402015, "comment_id": 105020469, "body": "<code>print(result)</code>"}], "tags": [], "owner": {"reputation": 7900, "user_id": 642096, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/PgqQf.jpg?s=128&g=1", "display_name": "cetver", "link": "https://stackoverflow.com/users/642096/cetver"}, "is_accepted": false, "score": 0, "last_activity_date": 1576717823, "last_edit_date": 1576717823, "creation_date": 1576717170, "answer_id": 59402015, "question_id": 59400807, "link": "https://stackoverflow.com/questions/59400807/how-to-capture-just-the-value-from-a-postgresql-query/59402015#59402015", "title": "How to Capture just the value from a PostgreSQL Query", "body": "<p>There is no way to do what you want, but 3 ways to do very similar:</p>\n\n<p>1.</p>\n\n<pre><code>cursor = connection.cursor()\ncursor.execute(sql)\nresult = cursor.fetchone()\nmax_updated_at = result[0]\n</code></pre>\n\n<p>2.</p>\n\n<pre><code>dict_cur = connection.cursor(cursor_factory=psycopg2.extras.DictCursor)\ndict_cur.execute('select max(updated_at) as max_updated_at ...')\nresult = dict_cur.fetchone()\nmax_updated_at = result['max_updated_at']\n</code></pre>\n\n<p>3.</p>\n\n<pre><code>nt_cur = connection.cursor(cursor_factory=psycopg2.extras.NamedTupleCursor)\nnt_cur.execute('select max(updated_at) as max_updated_at ...')\nresult = nt_cur.fetchone()\nmax_updated_at = result.max_updated_at\n</code></pre>\n"}], "owner": {"reputation": 236, "user_id": 10405409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/421965571c01369b361d03aed4a022ac?s=128&d=identicon&r=PG&f=1", "display_name": "Coder123", "link": "https://stackoverflow.com/users/10405409/coder123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1576717823, "creation_date": 1576707894, "last_edit_date": 1576715179, "question_id": 59400807, "link": "https://stackoverflow.com/questions/59400807/how-to-capture-just-the-value-from-a-postgresql-query", "title": "How to Capture just the value from a PostgreSQL Query", "body": "<p>I am trying to capture the only the record from a PostgreSQL statement. The select statements outputs one row with column named as updated_at and the value is a timestamp- '2008-01-01 00:50:01'. I want to just capture/collect that value so when I call that variable, it just outputs '2008-01-01 00:50:01'.</p>\n\n<p>Here is my code: </p>\n\n<pre><code>def get_etl_record():\n    pg_hook = PostgresHook(postgre_conn_id=\"post\", schema='schema1')\n    connection = pg_hook.get_conn()\n    cursor = connection.cursor()\n    cursor2 = connection.cursor()\n    latest_update_query = \"select max(updated_at) from my_table group by updated_at\"\n    cursor.execute(latest_update_query)\n    #results= cursor.fetchall()\n    columns = [col[0] for col in cursor.description]\n    rows = [dict(zip(columns, row[0])) for row in cursor.fetchall()]\n    print(rows)\n</code></pre>\n\n<p>However this code doesnt give me an output.</p>\n\n<p>Any ideas or suggestions?</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 33388, "user_id": 2437514, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/8QN0K.jpg?s=128&g=1", "display_name": "Rick supports Monica", "link": "https://stackoverflow.com/users/2437514/rick-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576708245, "post_id": 59400775, "comment_id": 104990831, "body": "In case it is confusing: I unintentionally set my random number range to be only positive numbers, which means no generated points will be zone 1. I am going to leave this as-is so I don&#39;t have to copy and paste a new set of randoms etc."}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1576708800, "post_id": 59400775, "comment_id": 104990991, "body": "For O(nm) solution , use loop is ok in this case"}, {"owner": {"reputation": 33388, "user_id": 2437514, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/8QN0K.jpg?s=128&g=1", "display_name": "Rick supports Monica", "link": "https://stackoverflow.com/users/2437514/rick-supports-monica"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1576709560, "post_id": 59400775, "comment_id": 104991237, "body": "@YOandBEN_W I&#39;m self taught and unfamiliar with Big-O. What does nm denote?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1576709607, "post_id": 59400775, "comment_id": 104991253, "body": "<a href=\"https://stackoverflow.com/questions/23896399/difference-between-omn-and-omn\" title=\"difference between omn and omn\">stackoverflow.com/questions/23896399/&hellip;</a> :-)"}], "answers": [{"comments": [{"owner": {"reputation": 33388, "user_id": 2437514, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/8QN0K.jpg?s=128&g=1", "display_name": "Rick supports Monica", "link": "https://stackoverflow.com/users/2437514/rick-supports-monica"}, "edited": false, "score": 0, "creation_date": 1576763989, "post_id": 59401171, "comment_id": 105009493, "body": "this is interesting; i haven&#39;t used numpy arrays much directly (except to do mathematics)."}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1576764193, "last_edit_date": 1576764193, "creation_date": 1576710243, "answer_id": 59401171, "question_id": 59400775, "link": "https://stackoverflow.com/questions/59400775/assign-a-dataframe-index-as-a-value-to-another-dataframe-based-on-multiple-condi/59401171#59401171", "title": "Assign a dataframe index as a value to another dataframe based on multiple conditions (lt, gt test criteria)", "body": "<p>A little bit improvement use <code>numpy</code> broadcast </p>\n\n<pre><code>cx = pairs.cx.values\ncy = pairs.cy.values\nminx, maxx, miny, maxy = zones.T.values\ns = (\n    pd.DataFrame(\n        (cx &gt; minx[:, None])\n        &amp; (cx &lt; maxx[:, None])\n        &amp; (cy &gt; miny[:, None])\n        &amp; (cy &lt; maxy[:, None])\n    )\n    .mul(zones.index, axis=0)\n    .max()\n)\n\ns\n0    2\n1    2\n2    2\n3    3\n4    2\n5    3\n6    2\n7    3\n8    3\n9    2\ndtype: int64\n\npairs[\"zone\"]=s.values\n</code></pre>\n"}], "owner": {"reputation": 33388, "user_id": 2437514, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/8QN0K.jpg?s=128&g=1", "display_name": "Rick supports Monica", "link": "https://stackoverflow.com/users/2437514/rick-supports-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576764193, "creation_date": 1576707684, "last_edit_date": 1576708077, "question_id": 59400775, "link": "https://stackoverflow.com/questions/59400775/assign-a-dataframe-index-as-a-value-to-another-dataframe-based-on-multiple-condi", "title": "Assign a dataframe index as a value to another dataframe based on multiple conditions (lt, gt test criteria)", "body": "<p>I have a dataframe that looks like this (it represents zones in a 2D space; note that they overlap, and that is OK):</p>\n\n<pre><code>&gt;&gt;&gt; zones = pd.DataFrame(dict(\n    minx=[-10, -10, -5],\n    maxx=[10, 10, 5],\n    miny=[-10, 0, 0],\n    maxy=[10, 10, 10],\n), index=range(1,4))\n&gt;&gt;&gt; zones.index.name = \"zone\"\n&gt;&gt;&gt; zones\n      minx  maxx  miny  maxy\nzone\n1      -10    10   -10    10\n2      -10    10     0    10\n3       -5     5     0    10\n</code></pre>\n\n<p>I have a second dataframe of ordered pairs that looks something like the following (random numbers here since they don't really matter):</p>\n\n<pre><code>&gt;&gt;&gt; pairs = pd.DataFrame(list(zip((uniform(0, 10) for _ in range(10)), (uniform(0,10) for _ in range(10)))), index=range(1,11), columns=[\"cx\", \"cy\"])\n&gt;&gt;&gt; pairs.index.name = \"pair\"\n&gt;&gt;&gt; pairs[\"zone\"] = \"??\"\n&gt;&gt;&gt; pairs\n               cx        cy zone\npair\n1        8.405715  2.691102   ??\n2        6.645482  1.843225   ??\n3        4.123719  8.996641   ??\n4        7.003991  9.695182   ??\n5        7.296730  1.175356   ??\n6        7.960617  9.503888   ??\n7        7.694749  6.907869   ??\n8        8.308742  5.439141   ??\n9        6.404875  5.663983   ??\n10       3.361129  3.123590   ??\n</code></pre>\n\n<p>I want to fill the \"zone\" series of this dataframe with the correct zone number for each cx, cy pair based on the zone definitions in the first dataframe.</p>\n\n<p>The code I have written to do this is below. However, I am sure there is a much better way to do it using pandas (i.e., without iterating over the <code>zones</code> columns). How should it be done?</p>\n\n<pre><code>for num, zone in zones.transpose().iteritems():\n    idx = (\n        (pairs.cx.gt(zone[\"minx\"]))\n        &amp; (pairs.cx.lt(zone[\"maxx\"]))\n        &amp; (pairs.cy.gt(zone[\"miny\"]))\n        &amp; (pairs.cy.lt(zone[\"maxy\"]))\n    )\n    pairs.loc[idx, \"zone\"] = num\n</code></pre>\n\n<p>NOTE: The highest zone number wins. So for example, index 5 in the second table above has the approximate ordered pair (7.3, 1.2), and would fall inside of zones 1, 2, AND 3. Therefore, it should be zone 3. However, index 9  with a.o.p. (6.4, 5.7) falls outside of zone 3 but inside zones 1 AND 2. Therefore, it should be assigned zone 2.</p>\n"}, {"tags": ["python", "django", "keycloak", "web-administration"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 11811787, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-IfrUpjpOJGI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcOq8XnR6W0aEK8l-kqC9zdeQfnSQ/photo.jpg?sz=128", "display_name": "Shavaiz Hussain", "link": "https://stackoverflow.com/users/11811787/shavaiz-hussain"}, "is_accepted": false, "score": 0, "last_activity_date": 1576757241, "creation_date": 1576757241, "answer_id": 59409481, "question_id": 59400730, "link": "https://stackoverflow.com/questions/59400730/make-django-rest-endpoints-inaccessible-if-no-permission-exists/59409481#59409481", "title": "Make Django REST endpoints inaccessible if no permission exists", "body": "<p>You have to create a user_type field in your User Model </p>\n\n<pre><code> ACCESS_CHOICES = (\n        ('subscriber', 'subscriber'),\n        ('non-subscribe', 'non-subscribe')\n    )\n\nuser_type = models.CharField(choices=ACCESS_CHOICES, max_length=15)\n</code></pre>\n\n<p>create a custom permission class and put that into your view</p>\n\n<pre><code>class MoviesAccessPermssion(permissions.BasePermission):\n    def has_permission(self, request, view):\n        return True or False #on base of request.user.user_type\n</code></pre>\n"}], "owner": {"reputation": 147, "user_id": 10878067, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-nHtDhWIinaY/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcbDzEASM4gWsS1gjMFn6K2rIy6ucQ/mo/photo.jpg?sz=128", "display_name": "deptrai", "link": "https://stackoverflow.com/users/10878067/deptrai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576757241, "creation_date": 1576707450, "question_id": 59400730, "link": "https://stackoverflow.com/questions/59400730/make-django-rest-endpoints-inaccessible-if-no-permission-exists", "title": "Make Django REST endpoints inaccessible if no permission exists", "body": "<p>currently I am creating a webbackend with Django, where the administration is done with KeyCloak. </p>\n\n<p>With KeyCloak I can assign users with certain role (e.g. customers, subscription customers).</p>\n\n<p>The customer and subscription customer have different permissions. (E.g. like in the film industry, where only the subscription customers can watch all movies and the normal customer can not) \nThere's an endpoint to every movie. </p>\n\n<p>How can I make this endpoint inaccessible with missing permissions? </p>\n"}, {"tags": ["python", "postgresql", "unit-testing", "mocking", "psycopg2"], "answers": [{"comments": [{"owner": {"reputation": 101, "user_id": 12075149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5648a39ae4641382e0dde52fdc6482f5?s=128&d=identicon&r=PG&f=1", "display_name": "resolute", "link": "https://stackoverflow.com/users/12075149/resolute"}, "edited": false, "score": 0, "creation_date": 1576718450, "post_id": 59401634, "comment_id": 104993236, "body": "Thank you, I actually had a custom exception class but I didn&#39;t think to raise it.  Now to encounter a DatabaseError (thereby raising the SpecialDatabaseError) what could be done to trigger it?"}, {"owner": {"reputation": 3138, "user_id": 463213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0f387381ec6bd2ede5472a04c769c7?s=128&d=identicon&r=PG", "display_name": "charlesreid1", "link": "https://stackoverflow.com/users/463213/charlesreid1"}, "reply_to_user": {"reputation": 101, "user_id": 12075149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5648a39ae4641382e0dde52fdc6482f5?s=128&d=identicon&r=PG&f=1", "display_name": "resolute", "link": "https://stackoverflow.com/users/12075149/resolute"}, "edited": false, "score": 0, "creation_date": 1576719423, "post_id": 59401634, "comment_id": 104993401, "body": "You can call <code>cursor.execute()</code> in a way that will cause a <code>DatabaseError</code> - and there are many ways that can happen. Or you can just put a <code>raise psycopg2.DatabaseError()</code> on the line after <code>cursor.execute()</code>. Does that answer your question?"}, {"owner": {"reputation": 3138, "user_id": 463213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0f387381ec6bd2ede5472a04c769c7?s=128&d=identicon&r=PG", "display_name": "charlesreid1", "link": "https://stackoverflow.com/users/463213/charlesreid1"}, "reply_to_user": {"reputation": 101, "user_id": 12075149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5648a39ae4641382e0dde52fdc6482f5?s=128&d=identicon&r=PG&f=1", "display_name": "resolute", "link": "https://stackoverflow.com/users/12075149/resolute"}, "edited": false, "score": 0, "creation_date": 1576719579, "post_id": 59401634, "comment_id": 104993428, "body": "Alternatively, you could also mock <code>cursor.execute</code> to raise an exception using <code>MagicMock.side_effect</code>"}, {"owner": {"reputation": 101, "user_id": 12075149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5648a39ae4641382e0dde52fdc6482f5?s=128&d=identicon&r=PG&f=1", "display_name": "resolute", "link": "https://stackoverflow.com/users/12075149/resolute"}, "edited": false, "score": 0, "creation_date": 1576728281, "post_id": 59401634, "comment_id": 104994954, "body": "Thanks - I was asking more about inside the test itself, but yes the MagicMock.side_effect is something I&#39;ll try."}], "tags": [], "owner": {"reputation": 3138, "user_id": 463213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e0f387381ec6bd2ede5472a04c769c7?s=128&d=identicon&r=PG", "display_name": "charlesreid1", "link": "https://stackoverflow.com/users/463213/charlesreid1"}, "is_accepted": true, "score": 2, "last_activity_date": 1576713764, "creation_date": 1576713764, "answer_id": 59401634, "question_id": 59400728, "link": "https://stackoverflow.com/questions/59400728/mocking-psycopg2-how-do-i-raise-the-exception/59401634#59401634", "title": "Mocking psycopg2 - how do I raise the exception?", "body": "<p>Your <code>insertPage()</code> function is already catching the <code>psycopg2.DatabaseError</code> and printing a message instead, and exiting without raising another exception. That's why the <code>DatabaseError</code> never makes it out of the <code>insertPage</code> function.</p>\n\n<p>Try changing your <code>insertPage</code> function to just make the <code>cursor.execute</code> call, without the try/except block, which will allow <code>insertPage</code> to pass the exception up the chain instead of catching it:</p>\n\n<pre><code>def insertPage(cursor, html):\n   cursor.execute((\"INSERT INTO mytable (full_html)\"\n        \"VALUES (%s) RETURNING id\"), (html,))\n</code></pre>\n\n<p>Alternatively, you could define a custom exception type and raise it when you encounter the <code>DatabaseError</code>:</p>\n\n<pre><code>class SpecialDatabaseError(Exception):\n    pass\n\ndef insertPage(cursor, html):\n    try:\n       cursor.execute((\"INSERT INTO mytable (full_html)\"\n        \"VALUES (%s) RETURNING id\"), (html,))\n    except psycopg2.DatabaseError:\n        raise SpecialDatabaseError(\"This is a special error!\")\n</code></pre>\n\n<p>then your mock would assert that the <code>SpecialDatabaseError</code> is raised:</p>\n\n<pre><code>   with self.assertRaises(SpecialDatabaseError):\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 12075149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5648a39ae4641382e0dde52fdc6482f5?s=128&d=identicon&r=PG&f=1", "display_name": "resolute", "link": "https://stackoverflow.com/users/12075149/resolute"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 587, "favorite_count": 0, "accepted_answer_id": 59401634, "answer_count": 1, "score": 1, "last_activity_date": 1576713764, "creation_date": 1576707436, "last_edit_date": 1576712688, "question_id": 59400728, "link": "https://stackoverflow.com/questions/59400728/mocking-psycopg2-how-do-i-raise-the-exception", "title": "Mocking psycopg2 - how do I raise the exception?", "body": "<p>I'm trying to handle potential execution problems with psycopg2 database. IIRC <code>psycopg2.DatabaseError</code> should handle most sql errors. The method inserts a <code>html</code> string into <code>full_html</code> column inside <code>mytable</code> and returns the <code>id</code> associated with it.</p>\n\n<pre><code>def insertPage(cursor, html):\n    try:\n       cursor.execute((\"INSERT INTO mytable (full_html)\"\n        \"VALUES (%s) RETURNING id\"), (html,))\n    except psycopg2.DatabaseError:\n         print(\"error inserting html\")\n</code></pre>\n\n<p>and the test:</p>\n\n<pre><code>def test_insertPage_error(self):\n    mockPage = (1, 'html') # Row contains id and html string\n\n    with patch('psycopg2.connect') as mock_connect:\n        with self.assertRaises(psycopg2.DatabaseError):\n            mock_cur = mock_connect.return_value.cursor.return_value\n            mock_cur.fetchone.return_value = mockPage\n\n            resultId = insertPage(mock_cur, 'html')\n</code></pre>\n\n<p>I'm having trouble invoking the <code>psycopg2.DatabaseError</code>. I've tried replacing <code>'html'</code> argument with None or another value that's not a string. I'm thinking it's a problem with my <code>mock_cur</code> not returning what I want? Perhaps I'm misunderstanding the error i'm raising?</p>\n\n<p>Traceback:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/code/tests/testInsert.py\", line 62, in test_insertPage_error\n    resultId = insertPage(mock_cur, 'html')\nAssertionError: DatabaseError not raised\n</code></pre>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": false, "score": 2, "last_activity_date": 1576707350, "creation_date": 1576707350, "answer_id": 59400709, "question_id": 59400641, "link": "https://stackoverflow.com/questions/59400641/how-do-you-replace-multiple-characters-from-a-single-value-using-pandas/59400709#59400709", "title": "How do you replace multiple characters from a single value using pandas?", "body": "<pre><code>df.phoneNumber.str.replace('(', '').str.replace(')', '')\n</code></pre>\n\n<p>or</p>\n\n<pre><code>df.phoneNumber.apply(lambda s: ''.join(c for c in s if c not in {'(', ')'}))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155, "user_id": 11138226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d04820d17e831766fc786f8fee4abd71?s=128&d=identicon&r=PG&f=1", "display_name": "Logan0015", "link": "https://stackoverflow.com/users/11138226/logan0015"}, "edited": false, "score": 0, "creation_date": 1576768204, "post_id": 59400735, "comment_id": 105011892, "body": "Thank you James, for anyone that is looking at this later, this is the exact code I used.  <code>df[&#39;phoneNumber&#39;] = df[&#39;phoneNumber&#39;].str.replace(&#39;[\\(\\)]&#39;, &#39;&#39;)</code>"}], "tags": [], "owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "is_accepted": true, "score": 5, "last_activity_date": 1576707488, "creation_date": 1576707488, "answer_id": 59400735, "question_id": 59400641, "link": "https://stackoverflow.com/questions/59400641/how-do-you-replace-multiple-characters-from-a-single-value-using-pandas/59400735#59400735", "title": "How do you replace multiple characters from a single value using pandas?", "body": "<p>The <code>replace</code> method takes two parameter, a pattern and a replacement.  You can pass it a regex pattern that finds open and closed parenthesis and replaces them with nothing using:</p>\n\n<pre><code>df.phoneNumber.str.replace('[\\(\\)]', '')\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 11138226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d04820d17e831766fc786f8fee4abd71?s=128&d=identicon&r=PG&f=1", "display_name": "Logan0015", "link": "https://stackoverflow.com/users/11138226/logan0015"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 59400735, "answer_count": 2, "score": 2, "last_activity_date": 1576707488, "creation_date": 1576707028, "question_id": 59400641, "link": "https://stackoverflow.com/questions/59400641/how-do-you-replace-multiple-characters-from-a-single-value-using-pandas", "title": "How do you replace multiple characters from a single value using pandas?", "body": "<p>I am trying to remove the special characters in a phone number. Specifically the parenthesis. When I run this with only one of the parenthesis it works fine, but whenever I attempt to add a second string to replace it only does the first one. This is what I am using. </p>\n\n<pre><code>  df['phoneNumber'] = df['phoneNumber'].str.replace({'(':'',')':''}), regex=True)\n</code></pre>\n"}, {"tags": ["python", "pandas", "function", "dataframe", "multiple-columns"], "comments": [{"owner": {"reputation": 3952, "user_id": 6696657, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c78dbc81728388bd956e9d4f4c1a6759?s=128&d=identicon&r=PG&f=1", "display_name": "MattR", "link": "https://stackoverflow.com/users/6696657/mattr"}, "edited": false, "score": 0, "creation_date": 1576707065, "post_id": 59400632, "comment_id": 104990400, "body": "do you know all the values that correspond to the column names? I&#39;m wondering why you may want to do this."}, {"owner": {"reputation": 514, "user_id": 9008162, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/173472de06313d25656f7f91bc143a86?s=128&d=identicon&r=PG&f=1", "display_name": "saga", "link": "https://stackoverflow.com/users/9008162/saga"}, "reply_to_user": {"reputation": 3952, "user_id": 6696657, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c78dbc81728388bd956e9d4f4c1a6759?s=128&d=identicon&r=PG&f=1", "display_name": "MattR", "link": "https://stackoverflow.com/users/6696657/mattr"}, "edited": false, "score": 0, "creation_date": 1576707467, "post_id": 59400632, "comment_id": 104990541, "body": "@MattR The values are either n/a, or with a bool value, just a default value. Because I want to create a function specifically for adding columns. But I have no idea how to do that for dataframe."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1576707561, "post_id": 59400632, "comment_id": 104990578, "body": "<code>df = df.assign(**{&#39;c&#39;:1,&#39;d&#39;:2})</code> - or <code>df.assign(c=1,d=2)</code> ... <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.assign.html?highlight=assign\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/reference/api/&hellip;</a>"}, {"owner": {"reputation": 514, "user_id": 9008162, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/173472de06313d25656f7f91bc143a86?s=128&d=identicon&r=PG&f=1", "display_name": "saga", "link": "https://stackoverflow.com/users/9008162/saga"}, "edited": false, "score": 0, "creation_date": 1576707860, "post_id": 59400632, "comment_id": 104990705, "body": "Sorry, I want to create a function so it can be used to add columns for different dfs. Is that a way to do that?"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1576707935, "post_id": 59400632, "comment_id": 104990731, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/39050539/adding-multiple-columns-to-pandas-simultaneously\">adding multiple columns to pandas simultaneously</a>"}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1576708049, "post_id": 59400632, "comment_id": 104990776, "body": "Make a function that takes a DataFrame and a dictionary as arguments; in the function add the new columns; return the new DataFrame."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576713774, "post_id": 59400632, "comment_id": 104992298, "body": "Could you provide some more context for this?"}], "answers": [{"comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1576708175, "post_id": 59400842, "comment_id": 104990810, "body": "why we need a function here ? df.assign(**dictionary)?"}, {"owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1576708209, "post_id": 59400842, "comment_id": 104990817, "body": "OP wants a function, so that&#39;s why i answered with one"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1576708230, "post_id": 59400842, "comment_id": 104990824, "body": "assign is a function itself"}], "tags": [], "owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "is_accepted": true, "score": 1, "last_activity_date": 1576708355, "last_edit_date": 1576708355, "creation_date": 1576708111, "answer_id": 59400842, "question_id": 59400632, "link": "https://stackoverflow.com/questions/59400632/how-to-add-multiple-columns-to-dataframe-by-function/59400842#59400842", "title": "How to add multiple columns to dataframe by function", "body": "<p>Create a dictionary:</p>\n\n<pre><code>dictionary= { 'c':'', 'd':-1 }\n\ndef new_columns(df, dictionary):\n    return df.assign(**dictionary)\n</code></pre>\n\n<p>then call it with your df:</p>\n\n<pre><code>df = new_columns(df, dictionary)\n</code></pre>\n\n<p>or just ( if you don't need a function call, not sure what your use case is) :</p>\n\n<pre><code>df.assign(**dictionary)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 853, "user_id": 4421692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1ac72ff7addc80329a7641a65c4e919?s=128&d=identicon&r=PG&f=1", "display_name": "Samer Ayoub", "link": "https://stackoverflow.com/users/4421692/samer-ayoub"}, "is_accepted": false, "score": 0, "last_activity_date": 1576708968, "creation_date": 1576708968, "answer_id": 59400983, "question_id": 59400632, "link": "https://stackoverflow.com/questions/59400632/how-to-add-multiple-columns-to-dataframe-by-function/59400983#59400983", "title": "How to add multiple columns to dataframe by function", "body": "<pre><code>def update_df(a_df, new_cols_names, new_cols_vals):\n  for n, v in zip(new_cols_names, new_cols_vals):\n    a_df[n] = v\n\nupdate_df(df, ['c', 'd', 'e'], ['', 5, 6])\n</code></pre>\n"}], "owner": {"reputation": 514, "user_id": 9008162, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/173472de06313d25656f7f91bc143a86?s=128&d=identicon&r=PG&f=1", "display_name": "saga", "link": "https://stackoverflow.com/users/9008162/saga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 145, "favorite_count": 0, "accepted_answer_id": 59400842, "answer_count": 2, "score": 1, "last_activity_date": 1576708968, "creation_date": 1576706945, "question_id": 59400632, "link": "https://stackoverflow.com/questions/59400632/how-to-add-multiple-columns-to-dataframe-by-function", "title": "How to add multiple columns to dataframe by function", "body": "<p>If I have a df such as this:</p>\n\n<pre><code>   a  b\n0  1  3\n1  2  4\n</code></pre>\n\n<p>I can use <code>df['c'] = ''</code> and <code>df['d'] = -1</code> to add 2 columns and become this:</p>\n\n<pre><code>   a  b c  d\n0  1  3   -1\n1  2  4   -1\n</code></pre>\n\n<p>How can I make the code within a function, so I can apply that function to df and add all the columns at once, instead of adding them one by one seperately as above? Thanks</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 1, "creation_date": 1576706987, "post_id": 59400530, "comment_id": 104990368, "body": "Rather than including pseudocode, have you tried writing a solution yourself based on the answer to your previous question? That would be a good place to start, then you can ask a specific question if you get stuck, since &quot;Can someone write this code for me&quot; is not <a href=\"https://stackoverflow.com/help/on-topic\">on-topic</a> for stack overflow"}, {"owner": {"reputation": 1375, "user_id": 9307263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defcaa944843f58d4f4befbed4a9c77c?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Joseph", "link": "https://stackoverflow.com/users/9307263/brian-joseph"}, "reply_to_user": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 2, "creation_date": 1576707076, "post_id": 59400530, "comment_id": 104990402, "body": "@G.Anderson, his &quot;psudocode&quot; is nearly runnable code, given a dataframe. I think that&#39;s a bit harsh."}, {"owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "edited": false, "score": 0, "creation_date": 1576707191, "post_id": 59400530, "comment_id": 104990448, "body": "yes, the code runs in a loop, but it&#39;s slow. I&#39;m trying to figure out if there is a faster way without having to query all the elements one by one. Since I&#39;m not very experienced with Pandas, I&#39;m not sure if this is possible or not."}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1576707504, "post_id": 59400530, "comment_id": 104990556, "body": "It wasn&#39;t intended to be harsh, and I apologize if it came off that way. However the answer provided in the linked question gives code to solve nearly this exact problem in a loop-free, idiomatic way using <code>.shift()</code> so it&#39;s not clear how this question is different from the previous question"}, {"owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "edited": false, "score": 0, "creation_date": 1576707615, "post_id": 59400530, "comment_id": 104990594, "body": "the main difference is that I want to keep the last state between the two conditions: so if condition 1 is true, set the state to 1 for example, and if condition 2 is true, set the state to 0 and fill the output with the last state; in some rows, neither condition will be true so the last state must be used"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1576707775, "post_id": 59400530, "comment_id": 104990668, "body": "could you show the expected output?"}, {"owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "edited": false, "score": 0, "creation_date": 1576708260, "post_id": 59400530, "comment_id": 104990834, "body": "I have edited the question and put some sample output"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1576710183, "post_id": 59400530, "comment_id": 104991414, "body": "ummm a lifelong flip flop"}, {"owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "edited": false, "score": 0, "creation_date": 1576710668, "post_id": 59400530, "comment_id": 104991554, "body": "Is it possible to make the result of each iteration either a value decided by a set of conditions (like what is in the previous question, but 2 conditions) or the same column with a shift, to recover the previous result?"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1576710923, "post_id": 59400530, "comment_id": 104991615, "body": "It is possible with a little imagination and math :) check my solution! I&#39;m glad I found a simple solution for this problem"}, {"owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "reply_to_user": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1576711118, "post_id": 59400530, "comment_id": 104991657, "body": "@ansev: very elegant solution!"}], "answers": [{"comments": [{"owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "edited": false, "score": 0, "creation_date": 1576711106, "post_id": 59400721, "comment_id": 104991652, "body": "it&#39;s interesting, I was exactly thinking of it as a flip-flop too! (I suffered several years of VHDL..). The solution is very nice! thanks!"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "reply_to_user": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "edited": false, "score": 2, "creation_date": 1576711270, "post_id": 59400721, "comment_id": 104991685, "body": "I have studied electronics for years and also program in VHDL :). Finding a simple solution in pandas for this has excited me a lot, since I thought I was not able to get rid of the loops!. I am glad to help you:)  thanks for asking this question"}, {"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "reply_to_user": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "edited": false, "score": 1, "creation_date": 1576712809, "post_id": 59400721, "comment_id": 104992066, "body": "In case the state is 0, if it produces a True to set the state to 0 the previous solution would fail, I have taken this into account and updated the solution"}], "tags": [], "owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "is_accepted": true, "score": 1, "last_activity_date": 1576713781, "last_edit_date": 1576713781, "creation_date": 1576707398, "answer_id": 59400721, "question_id": 59400530, "link": "https://stackoverflow.com/questions/59400530/track-state-reversal-in-pandas-by-comparing-two-columns/59400721#59400721", "title": "track state reversal in Pandas by comparing two columns", "body": "<p>this is the equation of a RS flip flop: <a href=\"https://en.wikipedia.org/wiki/Flip-flop_(electronics)\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Flip-flop_(electronics)</a></p>\n\n<p>using the example given as a dataframe:</p>\n\n<pre><code>print(df)\n\n   cond_A  cond_B\n0   False   False\n1   False    True\n2   False   False\n3   False   False\n4    True   False\n5   False   False\n</code></pre>\n\n<hr>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code>df['state']=df.any(axis=1).where(df['cond_B'].cumsum().ge(1),0).cumsum()%2\nprint(df)\n\n\n   cond_A  cond_B  state\n0   False   False      0\n1   False    True      1\n2   False   False      1\n3   False   False      1\n4    True   False      0\n5   False   False      0\n</code></pre>\n\n<hr>\n\n<p>If you have two independent series</p>\n\n<pre><code>(cond_A | cond_B).where(cond_B.cumsum().ge(1),0).cumsum()%2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "edited": false, "score": 0, "creation_date": 1576708027, "post_id": 59400766, "comment_id": 104990769, "body": "it is not necessary to use <code>pd.Series</code> here, instead of <code>replac</code>e you can use <code>astype (int)</code> or <code>np.where</code>"}], "tags": [], "owner": {"reputation": 5059, "user_id": 1428102, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OEl5y.jpg?s=128&g=1", "display_name": "abhilb", "link": "https://stackoverflow.com/users/1428102/abhilb"}, "is_accepted": false, "score": 0, "last_activity_date": 1576707654, "creation_date": 1576707654, "answer_id": 59400766, "question_id": 59400530, "link": "https://stackoverflow.com/questions/59400530/track-state-reversal-in-pandas-by-comparing-two-columns/59400766#59400766", "title": "track state reversal in Pandas by comparing two columns", "body": "<p>You can try </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; df['c'] = pd.Series((df.a.shift(-1) &lt; df.b) &amp; (df.a &gt;= df.b)).replace({False : 0, True : 1})\n&gt;&gt;&gt; df\n    a   b  c\n0   8  17  0\n1   2  86  0\n2  93  42  0\n3  49   1  0\n4  35  62  0\n5   3  39  0\n6  25  21  0\n7  54  24  1\n8   3  77  0\n9  41  42  0\n</code></pre>\n"}], "owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 59400721, "answer_count": 2, "score": 1, "last_activity_date": 1576714888, "creation_date": 1576706411, "last_edit_date": 1576714888, "question_id": 59400530, "link": "https://stackoverflow.com/questions/59400530/track-state-reversal-in-pandas-by-comparing-two-columns", "title": "track state reversal in Pandas by comparing two columns", "body": "<p>This is a follow-on to my previous question: <a href=\"https://stackoverflow.com/questions/59399896/detecting-value-crossing-between-columns-in-pandas/59399980?noredirect=1#comment104989497_59399980\">detecting value crossing between columns in Pandas</a></p>\n\n<p>Let's assume I have two columns, <code>df['a']</code> and <code>df['b']</code>, called 'a' and 'b' here to simplify</p>\n\n<p>In the previous question, I was trying to detect indices where: a[i - 1] &lt; b[i] and a[i] >= b[i]</p>\n\n<p>now, I am trying to track two changes:</p>\n\n<pre><code>a[i - 1] &lt; b[i] and a[i] &gt;= b[i]\n</code></pre>\n\n<p>and</p>\n\n<pre><code>a[i - 1] &gt;= b[i] and a[i] &lt; b[i]\n</code></pre>\n\n<p>and create a column with a value set based on the LAST change that occurred.</p>\n\n<p>Here is some pseudo code:</p>\n\n<pre><code>state = 0\nresult = []\nfor i in myIndex:\n    if a[i - 1] &lt; b[i] and a[i] &gt;= b[i]:\n        state = 1\n    elif a[i - 1] &gt;= b[i] and a[i] &lt; b[i]:\n        state = 0\n\nresult.append(state)\n</code></pre>\n\n<p>is there an idiomatic (non-looping) way to achieve this in Pandas?</p>\n\n<hr>\n\n<p>Edit:</p>\n\n<p>I realize this question has caused some confusion, so I didn't word it properly. An example here:</p>\n\n<p>Let's assume I have two columns for the outputs of the two conditions I'm tracking:</p>\n\n<pre><code> cond_A    cond_B\n false     false\n false     true\n false     false\n false     false\n true      false\n false     false\n</code></pre>\n\n<p>then the output should be (if we set 0 and 1 as output values):</p>\n\n<pre><code>cond_A    cond_B    output\nfalse     false     0\nfalse     true      1\nfalse     false     1\nfalse     false     1\ntrue      false     0\nfalse     false     0\n</code></pre>\n\n<p>so, if both conditions are false, we reuse the last state, if a condition is true, we set the state.</p>\n"}, {"tags": ["python", "progress-bar"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 12020980, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OG3KJOlm5JQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcMnbPtcsOP6triPXFDGpaA4H3tng/photo.jpg?sz=128", "display_name": "Parcevel", "link": "https://stackoverflow.com/users/12020980/parcevel"}, "edited": false, "score": 0, "creation_date": 1576874814, "post_id": 59401849, "comment_id": 105048261, "body": "Okay so this does look like it would solve my problem, however I failed to mention that I am stuck using python 3.5, do you know how to alter the asyncio section to work in that version?"}, {"owner": {"reputation": 68, "user_id": 1954506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61708b386b17cb59e4841fc553e99985?s=128&d=identicon&r=PG", "display_name": "Baozi", "link": "https://stackoverflow.com/users/1954506/baozi"}, "reply_to_user": {"reputation": 133, "user_id": 12020980, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OG3KJOlm5JQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcMnbPtcsOP6triPXFDGpaA4H3tng/photo.jpg?sz=128", "display_name": "Parcevel", "link": "https://stackoverflow.com/users/12020980/parcevel"}, "edited": false, "score": 0, "creation_date": 1576887843, "post_id": 59401849, "comment_id": 105050974, "body": "It&#39;s been a while since I&#39;ve used earlier Python version, so take this with a grain of salt, but I believe the code should still work in 3.5 as that was the version &quot;async def&quot; was introduced; I just can&#39;t guarantee the behavior.  To be safe, you can look into the <code>@asyncio.coroutine</code> function decorator to replace the <code>async def</code> blocks.  Here&#39;s something a quick Google search yielded me: <a href=\"https://snarky.ca/how-the-heck-does-async-await-work-in-python-3-5/\" rel=\"nofollow noreferrer\">snarky.ca/how-the-heck-does-async-await-work-in-python-3-5</a> I&#39;m on holiday so I can&#39;t readily create a 3.5 venv to test this for you unfortunately.  Hope that helps!"}], "tags": [], "owner": {"reputation": 68, "user_id": 1954506, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61708b386b17cb59e4841fc553e99985?s=128&d=identicon&r=PG", "display_name": "Baozi", "link": "https://stackoverflow.com/users/1954506/baozi"}, "is_accepted": true, "score": 1, "last_activity_date": 1576887885, "last_edit_date": 1576887885, "creation_date": 1576715617, "answer_id": 59401849, "question_id": 59400519, "link": "https://stackoverflow.com/questions/59400519/two-progress-bars-with-separate-updates/59401849#59401849", "title": "Two progress bars with separate updates", "body": "<p>Not sure if this is exactly what you're looking for, but I managed to do this by wrapping your code with asyncio.  I increased the sleep between updates to 1 second to make the asynchronous updates more obvious.  Hope this helps.</p>\n\n<pre><code># Python 3.6+\nimport asyncio\nimport progressbar\n\nasync def update_bar(bar):\n    while not bar.end_time:\n        bar.update()\n        await asyncio.sleep(0.1)\n\nasync def iterate_bar(bar, loopval):\n    bar.start()\n    for i in range(loopval):\n        bar.update(i+1)\n        await asyncio.sleep(1)\n    bar.finish()\n\nasync def main(bar, loopval):\n    await asyncio.gather(update_bar(bar), iterate_bar(bar, loopval))\n\nif __name__ == '__main__':\n    loopval = 20\n    bar = progressbar.ProgressBar(\n        maxval=loopval,\n        widgets=[\n            progressbar.Bar(\n                marker='#',\n                fill='.',\n                left='[',\n                right=']',\n            ),\n            progressbar.AnimatedMarker(),\n            progressbar.Percentage(),\n        ],\n    )\n\n    asyncio.run(main(bar, loopval))\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 12020980, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OG3KJOlm5JQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcMnbPtcsOP6triPXFDGpaA4H3tng/photo.jpg?sz=128", "display_name": "Parcevel", "link": "https://stackoverflow.com/users/12020980/parcevel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 59401849, "answer_count": 1, "score": 0, "last_activity_date": 1576887885, "creation_date": 1576706347, "last_edit_date": 1576707033, "question_id": 59400519, "link": "https://stackoverflow.com/questions/59400519/two-progress-bars-with-separate-updates", "title": "Two progress bars with separate updates", "body": "<p>I would like to have a loading bar for an application, but said application has large pauses so I would also like an indicator that the process has not died even if the loading bar does not fill for a while. </p>\n\n<p>Using the python progressbar library I came up with this.</p>\n\n<pre><code>import progressbar\nimport time\n\nloopval=20\n\nbar = progressbar.ProgressBar(maxval=loopval,widgets[progressbar.Bar(marker='#',fill='.',\\\nleft='[',right=']'),progressbar.AnimatedMarker(), progressbar.Percentage()])\n\nbar.start()\n\nfor i in range(loopval):\n   bar.update(i+1)\n   time.sleep(0.1)\n</code></pre>\n\n<p>This prints out a nice looking bar of '.''s that slowly fills with '#''s and has an accurate percentage at the end of the line as well as a rotating animated marker. </p>\n\n<p>ex:\n[############################################################################]/100%\n(the slash at the end goes between |,/,-,and \\)</p>\n\n<p>I would like to be able to update the animated marker separately from the bar update. This way even if the bar does not update for a while the animated marker will show that the process is still alive.</p>\n\n<p>I have looked through the progressbar docs and could't find a way to do this. I am not married to this library if there is a better one that makes this easier I am happy to switch as well.</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "for-loop"], "comments": [{"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 4, "creation_date": 1576706366, "post_id": 59400508, "comment_id": 104990149, "body": "just unindent the <code>print</code> outside the loop and see what you get"}, {"owner": {"reputation": 169, "user_id": 12561270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/790c8e151b8eed6e7c4c035b85360a9c?s=128&d=identicon&r=PG&f=1", "display_name": "MAAHE", "link": "https://stackoverflow.com/users/12561270/maahe"}, "reply_to_user": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576706665, "post_id": 59400508, "comment_id": 104990267, "body": "Thanks!  it worked :)"}, {"owner": {"reputation": 585, "user_id": 11297958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iBWI7.png?s=128&g=1", "display_name": "Kalma", "link": "https://stackoverflow.com/users/11297958/kalma"}, "edited": false, "score": 0, "creation_date": 1576707117, "post_id": 59400508, "comment_id": 104990419, "body": "That works, though there is an undesired &quot;dtype: float64&quot; at the end. You can also just print(number, Y[number]) in your very same code and you will get what you are looking for!"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 1, "creation_date": 1576713871, "post_id": 59400508, "comment_id": 104992316, "body": "Variable and function names should follow the <code>lower_case_with_underscores</code> style."}], "answers": [{"tags": [], "owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "is_accepted": false, "score": 1, "last_activity_date": 1576707716, "last_edit_date": 1576707716, "creation_date": 1576706925, "answer_id": 59400626, "question_id": 59400508, "link": "https://stackoverflow.com/questions/59400508/for-loop-with-zip/59400626#59400626", "title": "For loop with zip", "body": "<p>Try this:</p>\n\n<pre><code>list(zip(numbers,[f'\"{math.cos(i):.6f}' for i in Value]))                                                                                                                           \n[('Sub1', '\"-0.952413'), ('Sub2', '\"0.525322'), ('Sub3', '\"0.154251')]\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>pd.DataFrame(list(zip(numbers,[f'{math.cos(i):.6f}' for i in Value])))\n\n\n      0          1\n0  Sub1  -0.952413\n1  Sub2   0.525322\n2  Sub3   0.154251\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 12561270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/790c8e151b8eed6e7c4c035b85360a9c?s=128&d=identicon&r=PG&f=1", "display_name": "MAAHE", "link": "https://stackoverflow.com/users/12561270/maahe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576707716, "creation_date": 1576706246, "last_edit_date": 1576706438, "question_id": 59400508, "link": "https://stackoverflow.com/questions/59400508/for-loop-with-zip", "title": "For loop with zip", "body": "<p>I am looking for some help, I have this example </p>\n\n<pre><code>numbers=['Sub1','Sub2','Sub3']\nValue=[60,45,30]\nY = pd.Series()\nfor number,i in zip(numbers,Value):\n    Y[number]=math.cos(i)\n    print(Y)\n</code></pre>\n\n<p>I get this result </p>\n\n<pre><code>Sub1   -0.952413\ndtype: float64\nSub1   -0.952413\nSub2    0.525322\ndtype: float64\nSub1   -0.952413\nSub2    0.525322\nSub3    0.154251\ndtype: float64\n</code></pre>\n\n<p>but what I hope to get is </p>\n\n<pre><code>Sub1   -0.952413\nSub2    0.525322\nSub3    0.154251\n</code></pre>\n\n<p>or </p>\n\n<pre><code>-0.952413\n 0.525322\n 0.154251\n</code></pre>\n\n<p>because I will need those values to complete the code.\nThanks\nBR\nBeginner</p>\n"}, {"tags": ["python", "numpy", "cvxpy"], "answers": [{"comments": [{"owner": {"reputation": 209, "user_id": 8849135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/grLB8.jpg?s=128&g=1", "display_name": "Tomasz Kania", "link": "https://stackoverflow.com/users/8849135/tomasz-kania"}, "edited": false, "score": 0, "creation_date": 1576707259, "post_id": 59400602, "comment_id": 104990465, "body": "Thanks! Actually I want to minimise the maxima of absolute values of the vector $A\\theta - b$."}, {"owner": {"reputation": 209, "user_id": 8849135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/grLB8.jpg?s=128&g=1", "display_name": "Tomasz Kania", "link": "https://stackoverflow.com/users/8849135/tomasz-kania"}, "edited": false, "score": 0, "creation_date": 1576707457, "post_id": 59400602, "comment_id": 104990536, "body": "I want to minimise the Chebyshev norm of the vector. <a href=\"https://en.wikipedia.org/wiki/Chebyshev_distance\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Chebyshev_distance</a>"}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "reply_to_user": {"reputation": 209, "user_id": 8849135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/grLB8.jpg?s=128&g=1", "display_name": "Tomasz Kania", "link": "https://stackoverflow.com/users/8849135/tomasz-kania"}, "edited": false, "score": 0, "creation_date": 1576707620, "post_id": 59400602, "comment_id": 104990596, "body": "(<b>dumb comment :-D</b> please ignore) I have to admit, that i&#39;m approaching some limit here as i&#39;m not that familiar with this norm. <code>minimise the maxima of absolute values of the vector</code> is for me exactly <code>min l1-norm(vector)</code>. Or not?"}, {"owner": {"reputation": 209, "user_id": 8849135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/grLB8.jpg?s=128&g=1", "display_name": "Tomasz Kania", "link": "https://stackoverflow.com/users/8849135/tomasz-kania"}, "edited": false, "score": 0, "creation_date": 1576707672, "post_id": 59400602, "comment_id": 104990627, "body": "This is the l_infty-norm (the l1 is the sum of absolute values)."}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "reply_to_user": {"reputation": 209, "user_id": 8849135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/grLB8.jpg?s=128&g=1", "display_name": "Tomasz Kania", "link": "https://stackoverflow.com/users/8849135/tomasz-kania"}, "edited": false, "score": 0, "creation_date": 1576707701, "post_id": 59400602, "comment_id": 104990639, "body": "Argh, yeah, sry. Let me think about yours for a sec."}], "tags": [], "owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "is_accepted": true, "score": 1, "last_activity_date": 1576707879, "last_edit_date": 1576707879, "creation_date": 1576706779, "answer_id": 59400602, "question_id": 59400478, "link": "https://stackoverflow.com/questions/59400478/typeerror-in-cvxpy-float-argument-must-be-a-string-or-a-number-not-inequali/59400602#59400602", "title": "TypeError in CVXPY: float() argument must be a string or a number, not &#39;Inequality&#39;", "body": "<p>I don't know what you want to model exactly, but here something which works:</p>\n\n<pre><code>import cvxpy as cp\nimport numpy as np\n\nA = np.random.normal(0, 1, (64,6))\nb = np.random.normal(0, 1, (64,1))\ntheta = cp.Variable(shape = (6,1))\n\nprob = cp.Problem(\n            cp.Minimize(cp.sum(theta)),  # what do you want to minimize?\n            [\n                cp.max(A*theta -b) &lt;= 5,\n                -10 &lt;= theta,\n                theta &lt;= 10\n            ]\n        )\n</code></pre>\n\n<p>works and should show the problem.</p>\n\n<p>I would prefer a more clean impl like:</p>\n\n<pre><code>import cvxpy as cp\nimport numpy as np\n\nA = np.random.normal(0, 1, (64,6))\nb = np.random.normal(0, 1, (64,1))\ntheta = cp.Variable(shape = (6,1))\n\nobj = cp.Minimize(cp.sum(theta))          # what do you want to minimize?\n                                          # feasibility-problem? -&gt; use hardcoded constant: cp.Minimize(0)\nconstraints = [\n    cp.max(A*theta -b) &lt;= 5,\n    -10 &lt;= theta,\n    theta &lt;= 10\n]\n\nprob = cp.Problem(obj, constraints)\n</code></pre>\n\n<p>The reason: it's easier to read out what's happening exactly.</p>\n\n<p><strong>Your problem:</strong> your objective has a constraint, which is impossible.</p>\n\n<pre><code>import cvxpy as cp\nimport numpy as np\n\nA = np.random.normal(0, 1, (64,6))\nb = np.random.normal(0, 1, (64,1))\ntheta = cp.Variable(shape = (6,1))\n\nprob = cp.Problem(\ncp.Minimize(cp.max(A*theta -b) &lt;= 5),  # first argument = objective\n                                       # -&gt; minimize (constraint) : impossible!\n    [-10 &lt;= theta, theta &lt;= 10])       # second argument = constraints\n                                       # -&gt; box-constraints\n</code></pre>\n\n<p>Shortly speaking:</p>\n\n<ul>\n<li>you <em>want</em> to minimize a function</li>\n<li>you <em>do</em> minimize an inequality</li>\n</ul>\n\n<h1>Towards comment below:</h1>\n\n<p><em>edit</em></p>\n\n<pre><code>obj = cp.Minimize(cp.max(cp.abs(A*theta-b)))\n</code></pre>\n\n<p>Small check:</p>\n\n<pre><code>print((A*theta-b).shape)\n(64, 1)\nprint((cp.abs(A*theta-b)).shape)\n(64, 1)\n</code></pre>\n\n<p>Elementwise abs: good</p>\n\n<p>The final outer <code>max</code> results in a single value, or else <code>cp.Minimize</code> won't accept it. good</p>\n\n<p><strong>EDIT</strong> Or let's make cvxpy and us more happy:</p>\n\n<pre><code>obj = cp.Minimize(cp.norm(A*theta-b, \"inf\"))\n</code></pre>\n"}], "owner": {"reputation": 209, "user_id": 8849135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/grLB8.jpg?s=128&g=1", "display_name": "Tomasz Kania", "link": "https://stackoverflow.com/users/8849135/tomasz-kania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 556, "favorite_count": 1, "accepted_answer_id": 59400602, "answer_count": 1, "score": 1, "last_activity_date": 1587030057, "creation_date": 1576706123, "last_edit_date": 1587030057, "question_id": 59400478, "link": "https://stackoverflow.com/questions/59400478/typeerror-in-cvxpy-float-argument-must-be-a-string-or-a-number-not-inequali", "title": "TypeError in CVXPY: float() argument must be a string or a number, not &#39;Inequality&#39;", "body": "<p>Still playing with CVXPY. This time I get an interesting error. Let us look at this minimal code</p>\n\n<pre><code>import cvxpy as cp\nimport numpy as np\n\nA = np.random.normal(0, 1, (64,6))\nb = np.random.normal(0, 1, (64,1))\ntheta = cp.Variable(shape = (6,1))\n\nprob = cp.Problem(\n    cp.Minimize(cp.max(A*theta -b) &lt;= 5),\n    [-10 &lt;= theta, theta &lt;= 10])\n</code></pre>\n\n<p>Once compiled, I get the following error:</p>\n\n<blockquote>\n  <p>~\\Anaconda3\\lib\\site-packages\\cvxpy\\expressions\\constants\\constant.py in <strong>init</strong>(self, value)\n       42             self._sparse = True\n       43         else:\n  ---> 44             self._value = intf.DEFAULT_INTF.const_to_matrix(value)\n       45             self._sparse = False\n       46         self._imag = None</p>\n  \n  <p>~\\Anaconda3\\lib\\site-packages\\cvxpy\\interface\\numpy_interface\\ndarray_interface.py in const_to_matrix(self, value, convert_scalars)\n       48             return result\n       49         else:\n  ---> 50             return result.astype(numpy.float64)\n       51 \n       52     # Return an identity matrix.</p>\n  \n  <p>TypeError: float() argument must be a string or a number, not 'Inequality'</p>\n</blockquote>\n"}, {"tags": ["python", "performance"], "comments": [{"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1576706329, "post_id": 59400460, "comment_id": 104990134, "body": "Your way seems fine to me, especially for x &lt;= 23. Wrap it in a function, of course. (But\u2026 are these ids not actually binary?)"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1576706623, "post_id": 59400460, "comment_id": 104990246, "body": "Curious: Why base 10?"}, {"owner": {"reputation": 174, "user_id": 10958093, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EPASDnRpi7o/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZyiOkfp3ziX8Lbgbaz2V8fp8vohA/mo/photo.jpg?sz=128", "display_name": "DanStu", "link": "https://stackoverflow.com/users/10958093/danstu"}, "edited": false, "score": 0, "creation_date": 1576706734, "post_id": 59400460, "comment_id": 104990286, "body": "This is just an example, not all IDs will be base 10. Probably not the best example to go with since I can see why that would create confusion, I just found it read the cleanest"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1576706918, "post_id": 59400460, "comment_id": 104990350, "body": "Not sure what you mean. Your IDs are numbers, not strings, so &quot;be base 10&quot; and &quot;be binary&quot; don&#39;t really make sense."}, {"owner": {"reputation": 174, "user_id": 10958093, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EPASDnRpi7o/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZyiOkfp3ziX8Lbgbaz2V8fp8vohA/mo/photo.jpg?sz=128", "display_name": "DanStu", "link": "https://stackoverflow.com/users/10958093/danstu"}, "edited": false, "score": 0, "creation_date": 1576707121, "post_id": 59400460, "comment_id": 104990421, "body": "I edited to remove that part of the comment. None of the IDs are truly binary, sorry for the confusion"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 1, "creation_date": 1576707186, "post_id": 59400460, "comment_id": 104990442, "body": "Okay, so how does it actually work? Because stringification with <code>str(n)</code> only works for decimal."}], "answers": [{"tags": [], "owner": {"reputation": 3891, "user_id": 4585713, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0163e6ba41d9dfd2c9d13c528c87e1f5?s=128&d=identicon&r=PG&f=1", "display_name": "PMende", "link": "https://stackoverflow.com/users/4585713/pmende"}, "is_accepted": true, "score": 1, "last_activity_date": 1576706432, "creation_date": 1576706432, "answer_id": 59400534, "question_id": 59400460, "link": "https://stackoverflow.com/questions/59400460/pythonic-way-to-identify-the-origin-of-a-unique-numeric-id/59400534#59400534", "title": "Pythonic way to identify the origin of a unique numeric ID", "body": "<p>The following should work:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def id_list(unique_id):\n    reversed = str(unique_id)[::-1]\n    result = [\n        i\n        for i, num in enumerate(reversed)\n        if num == \"1\"\n    ]\n    return result\n</code></pre>\n\n<p>Example: <code>id_list(101000100010)</code> results in:</p>\n\n<pre><code>[1, 5, 9, 12]\n</code></pre>\n\n<p>What the function does, in words, is to turn the ID into a string, reverses it, then checks each character to see if it's equal to <code>\"1\"</code>. If it is, the index of that character is added to a list. Then the list is returned.</p>\n"}, {"tags": [], "owner": {"reputation": 25463, "user_id": 5003756, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8BUMb.jpg?s=128&g=1", "display_name": "James", "link": "https://stackoverflow.com/users/5003756/james"}, "is_accepted": false, "score": 1, "last_activity_date": 1576706639, "creation_date": 1576706639, "answer_id": 59400578, "question_id": 59400460, "link": "https://stackoverflow.com/questions/59400460/pythonic-way-to-identify-the-origin-of-a-unique-numeric-id/59400578#59400578", "title": "Pythonic way to identify the origin of a unique numeric ID", "body": "<p>You can use <code>log10</code> from the <code>math</code> module to accomplish this.  Taking the integer of <code>log10</code> gives you the largest power of 10 in the number.  Subtract that and repeat until the number is 0.  This gives you a list of the powers of 10 that compose the number.  </p>\n\n<p>Here I raise an exception if the number cannot be perfectly decomposed.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from math import log10\n\ndef decompose_10(x):\n    powers = []\n    while x:\n        p = int(log10(x))\n        if p &lt; 1:\n            raise ValueError(f'{x} cannot be decomposed into sums of powers of 10')\n        powers.insert(0, p)\n        x = x - 10**p\n    return powers\n\nx = 101000100010\n\ndecompose_10(x)\n# returns:\n[1, 5, 9, 11]\n\ndecompose_10(x+3)\n# raises:\n---------------------------------------------------------------------------\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-69-7c6a1e865b34&gt; in &lt;module&gt;\n----&gt; 1 decompose_10(x+3)\n\n&lt;ipython-input-68-6310bad29158&gt; in decompose_10(x)\n      4         p = int(log10(x))\n      5         if p &lt; 1:\n----&gt; 6             raise ValueError(f'{x} cannot be decomposed into sums of powers of 10')\n      7         powers.insert(0, p)\n      8         x = x - 10**p\n\nValueError: 3 cannot be decomposed into sums of powers of 10\n\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12105, "user_id": 6043170, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iFy-IHfVniw/AAAAAAAAAAI/AAAAAAAAAFM/f_Xao2r127I/photo.jpg?sz=128", "display_name": "2ps", "link": "https://stackoverflow.com/users/6043170/2ps"}, "is_accepted": false, "score": 1, "last_activity_date": 1576706702, "creation_date": 1576706702, "answer_id": 59400588, "question_id": 59400460, "link": "https://stackoverflow.com/questions/59400460/pythonic-way-to-identify-the-origin-of-a-unique-numeric-id/59400588#59400588", "title": "Pythonic way to identify the origin of a unique numeric ID", "body": "<p>You can also consider the following method which uses the modulo operator to find 1s. That said, for pure performance, you may want to shift your unique IDs from 10^N to 2^N since computers can do 2-based exponentiation and division much more quickly:</p>\n\n<pre><code>ids, x = [], 0\nwhile uniqueId:\n    n = unqiueId % 10\n    uniqueId //= 10\n    if n:\n        ids.append(x)\n    x += 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2020, "user_id": 3279603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zp3k.jpg?s=128&g=1", "display_name": "aminrd", "link": "https://stackoverflow.com/users/3279603/aminrd"}, "is_accepted": false, "score": 1, "last_activity_date": 1576707364, "last_edit_date": 1576707364, "creation_date": 1576706922, "answer_id": 59400625, "question_id": 59400460, "link": "https://stackoverflow.com/questions/59400460/pythonic-way-to-identify-the-origin-of-a-unique-numeric-id/59400625#59400625", "title": "Pythonic way to identify the origin of a unique numeric ID", "body": "<pre class=\"lang-py prettyprint-override\"><code>import re\n\na = 101000100010\nidlist = [ x.start() for x in re.finditer('1', str(a)[::-1]) ]\n\nprint(idlist)\n# Output: [1, 5, 9, 11]\n</code></pre>\n"}], "owner": {"reputation": 174, "user_id": 10958093, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-EPASDnRpi7o/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZyiOkfp3ziX8Lbgbaz2V8fp8vohA/mo/photo.jpg?sz=128", "display_name": "DanStu", "link": "https://stackoverflow.com/users/10958093/danstu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 59400534, "answer_count": 4, "score": 0, "last_activity_date": 1576983746, "creation_date": 1576706029, "last_edit_date": 1576983746, "question_id": 59400460, "link": "https://stackoverflow.com/questions/59400460/pythonic-way-to-identify-the-origin-of-a-unique-numeric-id", "title": "Pythonic way to identify the origin of a unique numeric ID", "body": "<p>I am going to have a large dataset of unique numeric IDs, where each ID is equal to the sum of a subset of a list of values.</p>\n\n<p>In one case, the values are all 10^x, where 1&lt;=x&lt;=23. So I have a list</p>\n\n<pre><code>list1 = []\nfor x in range(1,24):\n    list1.append(10**x)\n</code></pre>\n\n<p>Which will contain a list of values ranging from 10 to 1e+23. My unique IDs are created in this manner:</p>\n\n<pre><code>idlist = [1,5,9,11]\nuniqueID = 0\nfor x in idlist:\n    uniqueID += list1[x-1]\n</code></pre>\n\n<p>This unique ID would be 101000100010, or 10^1 + 10^5 + 10^9 + 10^11. However, what I need to do is the reverse, where I have the ID and want the list of values (\"idlist\"). My current method (below) works, but I can't imagine it is the most effective way. I would greatly appreciate any recommendations on how to make this more efficient. </p>\n\n<pre><code>idlist = []\nfor x in reversed(range(1,24)):\n    if uniqueID &gt;= 10**x:\n        uniqueID -= 10**x\n        tmp.append(x)\n</code></pre>\n\n<p>\"idlist\" rightfully returns [1,5,9,11]</p>\n"}, {"tags": ["python", "location", "coordinates", "geocoding", "estimation"], "comments": [{"owner": {"reputation": 2020, "user_id": 3279603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zp3k.jpg?s=128&g=1", "display_name": "aminrd", "link": "https://stackoverflow.com/users/3279603/aminrd"}, "edited": false, "score": 0, "creation_date": 1576706123, "post_id": 59400459, "comment_id": 104990066, "body": "This repository should be helpful : <a href=\"https://github.com/googlemaps/google-maps-services-python\" rel=\"nofollow noreferrer\">github.com/googlemaps/google-maps-services-python</a>"}, {"owner": {"reputation": 89, "user_id": 12449115, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMXgw.png?s=128&g=1", "display_name": "dburenok", "link": "https://stackoverflow.com/users/12449115/dburenok"}, "reply_to_user": {"reputation": 2020, "user_id": 3279603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9zp3k.jpg?s=128&g=1", "display_name": "aminrd", "link": "https://stackoverflow.com/users/3279603/aminrd"}, "edited": false, "score": 0, "creation_date": 1576706860, "post_id": 59400459, "comment_id": 104990336, "body": "@aminrd Thank you, that is exactly what I&#39;m looking for."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576713891, "post_id": 59400459, "comment_id": 104992321, "body": "This is explicitly off-topic."}, {"owner": {"reputation": 89, "user_id": 12449115, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMXgw.png?s=128&g=1", "display_name": "dburenok", "link": "https://stackoverflow.com/users/12449115/dburenok"}, "reply_to_user": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576716730, "post_id": 59400459, "comment_id": 104992880, "body": "@AlexanderC&#233;cile How so?"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576716784, "post_id": 59400459, "comment_id": 104992893, "body": "Please see: <a href=\"https://stackoverflow.com/help/on-topic\">help center</a>"}], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 12449115, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMXgw.png?s=128&g=1", "display_name": "dburenok", "link": "https://stackoverflow.com/users/12449115/dburenok"}, "is_accepted": true, "score": 0, "last_activity_date": 1576709264, "creation_date": 1576709264, "answer_id": 59401033, "question_id": 59400459, "link": "https://stackoverflow.com/questions/59400459/getting-best-guess-coordinates-from-a-location-name-in-python/59401033#59401033", "title": "Getting &quot;best-guess&quot; coordinates from a location name in Python", "body": "<p>Solved it thanks to @aminrd tip.</p>\n\n<p>Google Places API is the answer.</p>\n\n<pre><code>import googlemaps\nAPI_KEY = \"your google API key goes here\"\ngmaps = googlemaps.Client(key=API_KEY)\nplace_result = gmaps.find_place(input='Buddy\\'s Pub in City, State', input_type='textquery', fields=[\"geometry/location\"])\nprint(place_result)\n</code></pre>\n\n<p>Output looks like </p>\n\n<pre><code>{'candidates': [{'geometry': {'location': {'lat': XX.2804533, 'lng': -XXX.1195808}}}], 'status': 'OK'}\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 12449115, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oMXgw.png?s=128&g=1", "display_name": "dburenok", "link": "https://stackoverflow.com/users/12449115/dburenok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "closed_date": 1576735973, "accepted_answer_id": 59401033, "answer_count": 1, "score": -2, "last_activity_date": 1576709264, "creation_date": 1576706003, "question_id": 59400459, "link": "https://stackoverflow.com/questions/59400459/getting-best-guess-coordinates-from-a-location-name-in-python", "closed_reason": "Needs more focus", "title": "Getting &quot;best-guess&quot; coordinates from a location name in Python", "body": "<p>I'm looking for a way to take a rough location string (ex. \"Buddy's Pub in City, State\"), and convert it to the best-guess set of coordinates. I've looked at GeoPy and Google's Geocoding API, but they are not exactly what I'm looking for. Any help would be appreciated.</p>\n"}, {"tags": ["python", "python-2.7", "memory", "io", "size"], "comments": [{"owner": {"reputation": 7241, "user_id": 1624202, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b7072db2a0769ddc90b827e73a23cc2b?s=128&d=identicon&r=PG", "display_name": "Cruncher", "link": "https://stackoverflow.com/users/1624202/cruncher"}, "edited": false, "score": 0, "creation_date": 1576706595, "post_id": 59400404, "comment_id": 104990231, "body": "I think the better question, is what does <code>__sizeof__</code> <i>actually</i> tell you?"}, {"owner": {"reputation": 5908, "user_id": 2442613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c872ea7055801788bec55c7703b96d88?s=128&d=identicon&r=PG", "display_name": "Paul Cornelius", "link": "https://stackoverflow.com/users/2442613/paul-cornelius"}, "edited": false, "score": 0, "creation_date": 1576708645, "post_id": 59400404, "comment_id": 104990948, "body": "Please try to clarify the question.  All Python objects need to allocate memory, and the Python internal API uses a memory allocator for this purpose.  StringIO() is no different from anything else.  Why are you interested in specifically that type of object?"}], "owner": {"reputation": 8341, "user_id": 3014866, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/epfow.jpg?s=128&g=1", "display_name": "Rudzianko\u016d", "link": "https://stackoverflow.com/users/3014866/rudzianko%c5%ad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1576705624, "creation_date": 1576705624, "question_id": 59400404, "link": "https://stackoverflow.com/questions/59400404/where-does-stringio-allocates-memory", "title": "Where does StringIO allocates memory", "body": "<p>Probably silly question: Where does StringIO allocates memory?</p>\n\n<pre><code>from cStringIO import StringIO\nimport sys\n\n\nbuff = StringIO()\nbuff.write('This goes into the buffer. Don\"t know what to say more.')\nprint(buff.__sizeof__())\nbuff.write('This goes next. blablablabla!!1!!!!')\nprint(sys.getsizeof(buff))\n\n&gt;&gt; 56\n&gt;&gt; 56\n</code></pre>\n\n<p>I know about <code>.tell()</code> method. But I wonder about how object represents in memory.</p>\n"}, {"tags": ["python", "function", "class", "methods", "pygame"], "comments": [{"owner": {"reputation": 7241, "user_id": 1624202, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b7072db2a0769ddc90b827e73a23cc2b?s=128&d=identicon&r=PG", "display_name": "Cruncher", "link": "https://stackoverflow.com/users/1624202/cruncher"}, "edited": false, "score": 1, "creation_date": 1576705825, "post_id": 59400380, "comment_id": 104989972, "body": "I see instance functions that look like they belong in a class, but don&#39;t see any class definitions.   Can you include more code? At least the class definitions"}, {"owner": {"reputation": 1371, "user_id": 5103577, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Okf5j.png?s=128&g=1", "display_name": "Luke Borowy", "link": "https://stackoverflow.com/users/5103577/luke-borowy"}, "edited": false, "score": 0, "creation_date": 1576705864, "post_id": 59400380, "comment_id": 104989983, "body": "You say that you are calling <code>increase_speed</code> in your main file, can we see that code please?"}, {"owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "edited": false, "score": 0, "creation_date": 1576705931, "post_id": 59400380, "comment_id": 104989998, "body": "Does each alien have its own instance of <code>Settings</code>?"}, {"owner": {"reputation": 117, "user_id": 11782590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883209b84080045adb3a72f0cd54e5b1?s=128&d=identicon&r=PG&f=1", "display_name": "Peksio", "link": "https://stackoverflow.com/users/11782590/peksio"}, "edited": false, "score": 0, "creation_date": 1576706080, "post_id": 59400380, "comment_id": 104990049, "body": "I added more code in post I am sorry for poor formatting.  Yes, each alien have line of code:         self.settings = Settings()  In main file I have these lines of code:         if not self.aliens:              self._create_fleet_1()             self._create_fleet_2()             self._create_fleet_3()             self.settings.increase_speed()              print(&quot;Next wave!&quot;)  When there is no more aliens, code is spawning fleets and executing &quot;increase_speed&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 11782590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883209b84080045adb3a72f0cd54e5b1?s=128&d=identicon&r=PG&f=1", "display_name": "Peksio", "link": "https://stackoverflow.com/users/11782590/peksio"}, "edited": false, "score": 0, "creation_date": 1576789461, "post_id": 59400529, "comment_id": 105021049, "body": "Hi, thank you very much for your answer. I tried all three solutions for 3 hours but I couldn&#39;t manage to get it work. Sorry, I am a newbie at python.  Could you please elaborate a little bit on first or second solution ?  Also, I think I got farthest with third one (I pasted in Original post in &quot;Edit 2&quot; new code for settings. And it is still not working. (I tried with those &quot;global&quot; keyword and without them and I still receive error about &quot;local variable referenced before assignment&quot;.  Thank you for your time."}], "tags": [], "owner": {"reputation": 138010, "user_id": 5577765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoGpC.jpg?s=128&g=1", "display_name": "Rabbid76", "link": "https://stackoverflow.com/users/5577765/rabbid76"}, "is_accepted": false, "score": 3, "last_activity_date": 1576707239, "last_edit_date": 1576707239, "creation_date": 1576706404, "answer_id": 59400529, "question_id": 59400380, "link": "https://stackoverflow.com/questions/59400380/python-and-pygame-value-is-updating-but-update-is-not-taken-into-account-by-code/59400529#59400529", "title": "Python and Pygame Value is updating but update is not taken into account by code?", "body": "<p><code>Settings</code> seems to contain global settings, but each <code>Alien</code> creates its own instance of <code>Settings</code>:</p>\n\n<blockquote>\n  <pre class=\"lang-py prettyprint-override\"><code>class Alien(Sprite):\n   \"\"\"A class to represent a single alien.\"\"\"\n\n   def __init__(self, space_impact):\n       # [...]\n\n       self.settings = Settings()\n</code></pre>\n</blockquote>\n\n<p>That means that each <code>Alien</code> has its own <code>Settings</code> and thus <code>alien_speed</code>. </p>\n\n<p>Either you've to update the settings in each instance of <code>Alien</code>, that means you've to call <code>increase_speed()</code> for each <code>Alien</code> separately.</p>\n\n<p>Or just pass a singleton instance of <code>Settings</code> to <code>Aliens</code>. That makes it sufficient to update the singleton instance:</p>\n\n<pre><code>class Alien(Sprite):\n    \"\"\"A class to represent a single alien.\"\"\"\n\n    def __init__(self, space_impact, settings):\n        \"\"\"Initialize alien and set it's starting position.\"\"\"\n        super().__init__()\n        self.screen = space_impact.screen\n        self.settings = settings\n        # [...]\n</code></pre>\n\n<p>In \"main\":</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>alien = Alien(space_impact, self.settings)\n</code></pre>\n\n<p>Another option would be to turn the attributes of the class <code>Settings</code> to <a href=\"https://docs.python.org/3/tutorial/classes.html#class-and-instance-variables\" rel=\"nofollow noreferrer\">class attributes</a>. Instance attribute are unique to each instance, but class attributes are shared by all instances.</p>\n"}], "owner": {"reputation": 117, "user_id": 11782590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883209b84080045adb3a72f0cd54e5b1?s=128&d=identicon&r=PG&f=1", "display_name": "Peksio", "link": "https://stackoverflow.com/users/11782590/peksio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577740790, "creation_date": 1576705461, "last_edit_date": 1577740790, "question_id": 59400380, "link": "https://stackoverflow.com/questions/59400380/python-and-pygame-value-is-updating-but-update-is-not-taken-into-account-by-code", "title": "Python and Pygame Value is updating but update is not taken into account by code?", "body": "<p>I wanted to ask you for your help. I am following tutorial about creating alien game but I modified it a little bit and I cannot get it to work properly. I have value for alien_speed in <code>settings</code> pyfile. I am modifying it in method <code>increase_speed</code> and I am printing it (and it is actually growing like I want it to). But aliens have still the same speed. I don't understand why it is not working. Can maybe someone point me in right direction ?</p>\n\n<p>settings.py:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pygame\n\nresolution_width = 1280\nresolution_height = 720\n\nclass Settings:\n    \"\"\"A class to store all settings for Space Impact.\"\"\"\n\n    def __init__(self):\n        \"\"\"Initialize the game's static settings.\"\"\"\n        # Screen settings\n        # This line is needed to avoid error: No video mode has been set\n        self.screen = pygame.display.set_mode((0, 0))\n        self.screen_width = resolution_width\n        self.screen_height = resolution_height\n        self.bg_image = pygame.image.load(\"images/background_1.png\").convert()\n\n        # Bullet settings\n        self.bullet_speed = self.screen_width*0.01\n        self.bullet_width = self.screen_width*0.02\n        self.bullet_height = self.screen_height*0.02\n        self.bullet_color = (0, 0, 0)\n\n        # How quickly the game speeds up\n        self.speedup_scale = 999\n        # Ship Settings\n        self.ships_limit = 3\n\n\n\n        self.initialize_dynamic_settings()\n\n    def initialize_dynamic_settings(self):\n        self.alien_speed = self.screen_width*0.003\n\n    def increase_speed(self):\n        \"\"\"Increase speed settings.\"\"\"\n        self.alien_speed *= self.speedup_scale\n        print(self.alien_speed)\n</code></pre>\n\n<p>alien.py:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pygame\nfrom pygame.sprite import Sprite\nfrom settings import Settings\nimport random\n\n\nclass Alien(Sprite):\n    \"\"\"A class to represent a single alien.\"\"\"\n\n    def __init__(self, space_impact):\n        \"\"\"Initialize alien and set it's starting position.\"\"\"\n        super().__init__()\n        self.screen = space_impact.screen\n        self.settings = Settings()\n\n        # Load the alien image and set it's rect attribute.\n        self.index = 0\n        self.timer = 0\n        self.image = []\n        self.image.append(pygame.image.load('images/alien_1.png'))\n        self.image.append(pygame.image.load('images/alien_2.png'))\n        self.image = self.image[self.index]\n        self.image = pygame.transform.scale(self.image, (80 * int(self.settings.screen_width * 0.0019),\n                                            40 * int(self.settings.screen_width*0.0019)))\n\n        self.rect = self.image.get_rect()\n\n        random_height = random.uniform(0.01, 0.85)\n        random_width = random.uniform(1.1, 2)\n        self.rect.x = int(self.settings.screen_width * random_width)\n        self.rect.y = int(self.settings.screen_height * random_height)\n\n        # Store the alien's exact horizontal position.\n        self.x = float(self.rect.x)\n\n    def update(self):\n        \"\"\"Move the alien to left side.\"\"\"\n        self.x -= self.settings.alien_speed\n        self.rect.x = self.x\n\n        if self.timer &gt;= 0 and self.timer &lt;= 25:\n            self.timer += 1\n            self.index = 0\n\n        elif self.timer &gt;= 26 and self.timer &lt; 50:\n            self.timer += 1\n            self.index = 1\n        else:\n            self.timer = 0\n\n        if self.index == 0:\n            self.image = pygame.image.load(\"images/alien_1.png\")\n        if self.index == 1:\n            self.image = pygame.image.load(\"images/alien_2.png\")\n\n        self.image = pygame.transform.scale(self.image, (80 * int(self.settings.screen_width * 0.0019),\n                                            40 * int(self.settings.screen_width * 0.0019)))\n</code></pre>\n\n<p>Edit: Of course in my main file I am calling function <code>self.settings.increase_speed()</code></p>\n\n<hr>\n\n<p>Edit2:</p>\n\n<pre><code>import pygame\n\nresolution_width = 1280\nresolution_height = 720\n\nclass Settings:\n    \"\"\"A class to store all settings for Space Impact.\"\"\"\n\n    screen_width = resolution_width\n    alien_speed = screen_width * 0.003\n    speedup_scale = 3\n    alien_speed *= speedup_scale\n\n    def __init__(self):\n        \"\"\"Initialize the game's static settings.\"\"\"\n        # Screen settings\n        # This line is needed to avoid error: No video mode has been set\n        self.screen = pygame.display.set_mode((0, 0))\n        self.screen_width = resolution_width\n        self.screen_height = resolution_height\n        self.bg_image = pygame.image.load(\"images/background_1.png\").convert()\n\n        # Bullet settings\n        self.bullet_speed = self.screen_width*0.01\n        self.bullet_width = self.screen_width*0.02\n        self.bullet_height = self.screen_height*0.02\n        self.bullet_color = (0, 0, 0)\n\n        # How quickly the game speeds up\n        self.speedup_scale = 3\n        # Ship Settings\n        self.ships_limit = 3\n\n\n\n\n    def increase_speed(self):\n        \"\"\"Increase speed settings.\"\"\"\n        global alien_speed\n        global speedup_scale\n        alien_speed *= speedup_scale\n        print(self.alien_speed)\n</code></pre>\n\n<p>Edit3:</p>\n\n<p>I managed to fix it thanks to your comments. Thank you :)</p>\n"}, {"tags": ["python", "flask"], "answers": [{"comments": [{"owner": {"reputation": 203, "user_id": 12466329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0323ce7a29df2864b22945369c7f7c42?s=128&d=identicon&r=PG&f=1", "display_name": "trigangle", "link": "https://stackoverflow.com/users/12466329/trigangle"}, "edited": false, "score": 0, "creation_date": 1576789658, "post_id": 59400372, "comment_id": 105021100, "body": "Even with this fix, the code doesn&#39;t work. While it prints the function, whenever I visit the url, it doesn&#39;t print. It only prints when I init the app."}, {"owner": {"reputation": 2193, "user_id": 3700524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVsYW.jpg?s=128&g=1", "display_name": "Mohsen_Fatemi", "link": "https://stackoverflow.com/users/3700524/mohsen-fatemi"}, "reply_to_user": {"reputation": 203, "user_id": 12466329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0323ce7a29df2864b22945369c7f7c42?s=128&d=identicon&r=PG&f=1", "display_name": "trigangle", "link": "https://stackoverflow.com/users/12466329/trigangle"}, "edited": false, "score": 0, "creation_date": 1576873569, "post_id": 59400372, "comment_id": 105047888, "body": "@trigangle can you please tell me where do you call <code>url_print</code> method?"}, {"owner": {"reputation": 203, "user_id": 12466329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0323ce7a29df2864b22945369c7f7c42?s=128&d=identicon&r=PG&f=1", "display_name": "trigangle", "link": "https://stackoverflow.com/users/12466329/trigangle"}, "edited": false, "score": 0, "creation_date": 1576890119, "post_id": 59400372, "comment_id": 105051303, "body": "I call the function using the @ symbol write before the view function."}], "tags": [], "owner": {"reputation": 2193, "user_id": 3700524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVsYW.jpg?s=128&g=1", "display_name": "Mohsen_Fatemi", "link": "https://stackoverflow.com/users/3700524/mohsen-fatemi"}, "is_accepted": true, "score": 1, "last_activity_date": 1576705387, "creation_date": 1576705387, "answer_id": 59400372, "question_id": 59400312, "link": "https://stackoverflow.com/questions/59400312/flask-print-urls-visited/59400372#59400372", "title": "Flask print urls visited", "body": "<p>The error you've sent is not related to these lines, send your code completely, but more generally if you want to print a function's name in python, you can use <code>__name__</code> :</p>\n\n<pre><code>def function1(input):\n   return input**2\n\nprint(function1.__name__)\n</code></pre>\n\n<p>this will print :</p>\n\n<pre><code>function1\n</code></pre>\n"}], "owner": {"reputation": 203, "user_id": 12466329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0323ce7a29df2864b22945369c7f7c42?s=128&d=identicon&r=PG&f=1", "display_name": "trigangle", "link": "https://stackoverflow.com/users/12466329/trigangle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 59400372, "answer_count": 1, "score": 0, "last_activity_date": 1576716348, "creation_date": 1576705046, "last_edit_date": 1576716348, "question_id": 59400312, "link": "https://stackoverflow.com/questions/59400312/flask-print-urls-visited", "title": "Flask print urls visited", "body": "<p>I want to make a function that prints the name of every url visited.</p>\n\n<p>I made a wrapper that can be called like the following:</p>\n\n<pre><code>@url_print\n@app.route('/')\ndef index():\n    return render_template('index.html')\n</code></pre>\n\n<p>The code for url print is here:</p>\n\n<pre><code>def url_print(func, *args, **kwargs):\n    print(\"Url '%s' was visited\" % func.__name__)\n    return(func(*args, **kwargs))\n</code></pre>\n\n<p>But I keep getting the following error:</p>\n\n<pre><code>ctx.app.update_template_context(context)\nAttributeError: 'NoneType' object has no attribute 'app'\n</code></pre>\n\n<p>Can someone help me? Thanks in advance.</p>\n"}, {"tags": ["python", "tkinter", "input", "tkinter-canvas"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 2, "creation_date": 1576706724, "post_id": 59400282, "comment_id": 104990281, "body": "standard rule : if you have many elements then keep them on list. It seems you have variable to keep only one input so last input replaces previous one before code could use it to move snake. You have to add new input to the end of some list and later code has to use <code>for</code>-loop to use all inputs from list to move snake."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 1, "creation_date": 1576707278, "post_id": 59400282, "comment_id": 104990468, "body": "With <code>self.update()</code> from any key event handler you are doing <b>concurrent</b> updates. Remove all <code>self.update()</code>, <code>__init__</code> with <code>self.Game = 0</code> is working for me."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11862897"}, "is_accepted": true, "score": 0, "last_activity_date": 1576709387, "creation_date": 1576709387, "answer_id": 59401054, "question_id": 59400282, "link": "https://stackoverflow.com/questions/59400282/need-help-on-snake-program-about-users-input/59401054#59401054", "title": "Need help on snake program about user&#39;s input", "body": "<p>Thank Furas for the basic idea it was what i needed. New code with my correction :</p>\n\n<pre><code>def __init__(self, root,n,m):\n\"\"\"\n\n    \"\"\"\n    self.input = []\n\n\"\"\"\n\n\n     \"\"\"\ndef move_up(self,event):\n    if self.Game == -2:\n        self.Game =0\n        self.up()\n        self.update()\n    else:\n        self.input.append(0)\n\n\"\"\"\n    Same for all the move\n    \"\"\"\n\n\ndef update(self):\n    if self.Game == -2:\n        return \n    if len(self.input)&gt;3: #Make sure that the player doesn't stack instruction\n        self.pop()\n    try:\n        input = self.input.pop(0)\n    except:\n        input = -1\n    if input == 0:\n        self.up()\n    elif input == 1:\n        self.right()\n    elif input == 2:\n        self.down()\n    elif input == 3:\n        self.left()\n    self.move()\n    self.eat()\n    self.collide()\n    if self.Game == -1:\n        self.root.destroy()\n        return \n    self.canvas.delete(\"all\")\n    self.draw_snake()\n    self.draw_food()\n    self.root.after(self.speed,self.update)\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11862897"}, "edited": false, "score": 0, "creation_date": 1576737445, "post_id": 59401089, "comment_id": 104997166, "body": "Thank for the idea of improvement I will try that"}], "tags": [], "owner": {"reputation": 2212, "user_id": 6770842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tjxUi.png?s=128&g=1", "display_name": "sciroccorics", "link": "https://stackoverflow.com/users/6770842/sciroccorics"}, "is_accepted": false, "score": 1, "last_activity_date": 1576709648, "creation_date": 1576709648, "answer_id": 59401089, "question_id": 59400282, "link": "https://stackoverflow.com/questions/59400282/need-help-on-snake-program-about-users-input/59401089#59401089", "title": "Need help on snake program about user&#39;s input", "body": "<p>This is not really a bug. Your animation uses an 'update' function that is executed every 120ms. So if you hit 2 arrow keys within 120ms (i.e. between two successive calls of 'update'), only the last hit is considered, because only one translation vector can be considered for each snake update. Nobody can blame you on that point, as time controlled animation is a discrete process with a given time window. It's the only solution to get fluid and regular animation (all video games are based on such a process), so that's clearly correct.</p>\n\n<p>However, your code may still be improved on several aspects. For instance, at each animation frame, you delete all Canvas items and create a whole new set of items ('create_rectangle') for the snake elements and the food. This is not very efficient. It would be better to simply change the coordinates of the items (check the Canvas.coords function from the doc). Note that animating a snake simply requires to move the previous tail position to the new head position, to give the illusion of a moving beast. So moving only 1 item (2 items when eating food) is necessary at each frame, which is must faster to process.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11862897"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 1, "accepted_answer_id": 59401054, "answer_count": 2, "score": 0, "last_activity_date": 1576709648, "creation_date": 1576704863, "question_id": 59400282, "link": "https://stackoverflow.com/questions/59400282/need-help-on-snake-program-about-users-input", "title": "Need help on snake program about user&#39;s input", "body": "<p>So, I'm writing a snake program using the tkinter Library. The program is globally working but I have a little problem with the inputs' treatment indeed if i give two input too quickly only the last one will be interpret. And i don't really know how to solve this i try to force the update after every player's input but it's clearly not the good solution because it force the snake to move and make it able to teleport so I'm would be glad if someone has an idea to solve this issue. There is my code I'm sure that it could be improved but for now I would like to focus on the first issue.</p>\n\n<pre><code>import tkinter as tk\nimport numpy.random as rd\n\nclass snake:\n    def __init__(self,n,m):\n        self.n = n\n        self.m = m\n        self.body = [(n//2,m//2),(n//2,m//2-1)]\n        self.lenght = 2\n        self.food = (0,0)\n        self.relocate_food()\n        self.Game = -2\n        self.vector = (0,1)  #(0,-1) = up, (0,1) = right, (0,1) = down, (-1,0) = left\n        self.speed = 120\n\n    def up(self):\n        self.vector = (-1,0)  \n    def right(self):\n        self.vector = (0,1) \n    def down(self):\n        self.vector = (1,0)      \n    def left(self):\n        self.vector = (0,-1)\n\n\n    def relocate_food(self):\n        x = rd.randint(0,self.n)\n        y = rd.randint(0,self.m)\n        i = 0\n        test = True\n        while i&lt;self.lenght and test:\n            if (x,y) == self.body[i]:\n                test = False\n                self.relocate_food()\n            else:\n                i += 1\n        if i == self.lenght:\n            self.food = (x,y)\n\n\n    def collide(self):\n        head = self.body[0]\n        for i in range(1,self.lenght):\n            if head == self.body[i]:\n                self.Game = -1\n                break\n            x,y = head\n            if x&gt;=self.n or y&gt;=self.m or x&lt;0 or y&lt;0:\n                self.Game = -1\n\n    def eat(self):\n        head = self.body[0]\n        if head == self.food:           \n            self.lenght +=1\n            x0, y0 = self.body[-1]\n            x1, y1 = self.body[-2]\n            x = x0 - x1\n            y = y0 - y1\n            self.body.append((x0+x,y0+y))\n            self.relocate_food()\n            if self.lenght%5 == 0:\n                self.speed = int(self.speed * 0.90)\n\n\n\n\n    def move(self):\n        dx, dy = self.vector     \n        last_x, last_y = self.body[0]\n        new_x = last_x + dx\n        new_y = last_y + dy\n        self.body[0] = (new_x, new_y)\n        for k in range(1, self.lenght):\n            x, y = self.body[k]\n            self.body[k] = (last_x,last_y)\n            last_x, last_y = x, y\n        return \n\n\n\n\nclass screen(snake):\n    def __init__(self,root,n,m):\n        snake.__init__(self,n,m)\n        root.minsize(n*20,m*20)\n        root.maxsize(n*20,m*20)\n        root.configure(background='white')\n        self.root = root\n        self.n = n\n        self.m = m\n        self.speed = 130\n        self.canvas = tk.Canvas(root, width = n*20, height =m*20,bg='black')\n        self.canvas.bind_all(\"&lt;Key-Up&gt;\",self.move_up)\n        self.canvas.bind_all(\"&lt;Key-Down&gt;\",self.move_down)\n        self.canvas.bind_all(\"&lt;Key-Left&gt;\",self.move_left)\n        self.canvas.bind_all(\"&lt;Key-Right&gt;\",self.move_right)\n        self.canvas.grid(row=1,column=0)\n        self.draw_snake()\n        self.draw_food()\n\n\n    def draw_snake(self):\n        y,x = self.body[0]\n        self.canvas.create_rectangle(x*20,y*20,(x+1)*20,(y+1)*20,fill= 'red4')\n        for k in range(1,self.lenght):\n            y,x = self.body[k]\n            self.canvas.create_rectangle(x*20,y*20,(x+1)*20,(y+1)*20,fill= 'red')\n\n    def draw_food(self):\n        y,x =self.food\n        self.canvas.create_rectangle(x*20,y*20,(x+1)*20,(y+1)*20,fill= 'green')\n\n    def move_up(self,event):\n        if self.Game == -2:\n            self.Game =0\n            self.up()\n            self.update()\n        else:\n            self.up()\n\n\n    def move_down(self,event):\n        if self.Game == -2:\n            self.Game =0\n            self.down()\n            self.update()\n        else:\n            self.down()\n\n    def move_left(self,event):\n        if self.Game == -2:\n            self.Game =0\n            self.left()\n            self.update()\n        else:\n            self.left()\n\n    def move_right(self,event):\n        if self.Game == -2:\n            self.Game =0\n            self.right()\n            self.update()\n        else:\n            self.right()\n\n\n    def update(self):\n        if self.Game == -2:\n            return \n        self.move()\n        self.eat()\n        self.collide()\n        if self.Game == -1:\n            self.root.destroy()\n            return \n        self.canvas.delete(\"all\")\n        self.draw_snake()\n        self.draw_food()\n        self.root.after(self.speed,self.update)\n\nwindow = tk.Tk()\nsnake = screen(window,35,35)\nsnake.update()\nwindow.mainloop()     \n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe", "correlation"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 1, "creation_date": 1576705009, "post_id": 59400264, "comment_id": 104989691, "body": "<a href=\"https://stackoverflow.com/questions/30143417/computing-the-correlation-coefficient-between-two-multi-dimensional-arrays\" title=\"computing the correlation coefficient between two multi dimensional arrays\">stackoverflow.com/questions/30143417/&hellip;</a>"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1576705866, "post_id": 59400264, "comment_id": 104989984, "body": "Wow, that link was news to me. I wonder why <code>pandas</code> favors the double loop in DataFrame.corr()? It it because it&#39;s a bit more free to deal with different methods, or is is just a memory concern once you&#39;re in the world of 50 columns and 40M+ rows?"}], "answers": [{"comments": [{"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "edited": false, "score": 1, "creation_date": 1576705421, "post_id": 59400343, "comment_id": 104989825, "body": "Prettier than the other answer, thanks, but still imperfect in that it computes (n+m)^2 correlations instead of n*m correlations."}, {"owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "edited": false, "score": 1, "creation_date": 1576767156, "post_id": 59400343, "comment_id": 105011331, "body": "(the other answer I refer to has now been deleted)"}], "tags": [], "owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "is_accepted": false, "score": 1, "last_activity_date": 1576705242, "creation_date": 1576705242, "answer_id": 59400343, "question_id": 59400264, "link": "https://stackoverflow.com/questions/59400264/compute-correlation-of-two-dataframes-columnwise/59400343#59400343", "title": "Compute correlation of two DataFrames columnwise", "body": "<p>Concatem:</p>\n\n<pre><code>pd.concat([df1, df2], axis=1, keys=['df1', 'df2']).corr().loc['df1', 'df2']\n\n     C    D    E\nA -1.0  1.0 -1.0\nB  1.0 -1.0  1.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8412, "user_id": 8973620, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7qt6R.jpg?s=128&g=1", "display_name": "Mykola Zotko", "link": "https://stackoverflow.com/users/8973620/mykola-zotko"}, "is_accepted": true, "score": 2, "last_activity_date": 1576767194, "last_edit_date": 1576767194, "creation_date": 1576708553, "answer_id": 59400921, "question_id": 59400264, "link": "https://stackoverflow.com/questions/59400264/compute-correlation-of-two-dataframes-columnwise/59400921#59400921", "title": "Compute correlation of two DataFrames columnwise", "body": "<p>You can use the methods <code>apply</code> and <code>corrwith</code>:</p>\n\n<pre><code>df2.apply(df1.corrwith)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>     C    D    E\nA -1.0  1.0 -1.0\nB  1.0 -1.0  1.0\n</code></pre>\n"}], "owner": {"reputation": 52286, "user_id": 850781, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/pwfBo.jpg?s=128&g=1", "display_name": "sds", "link": "https://stackoverflow.com/users/850781/sds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 59400921, "answer_count": 2, "score": 3, "last_activity_date": 1576767194, "creation_date": 1576704701, "last_edit_date": 1576705116, "question_id": 59400264, "link": "https://stackoverflow.com/questions/59400264/compute-correlation-of-two-dataframes-columnwise", "title": "Compute correlation of two DataFrames columnwise", "body": "<p>I have two <code>DataFrame</code>s and I want to compute their correlations without looping:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\ndf1 = pd.DataFrame({'A': range(0,4), 'B': range(14,10,-1)})\ndf2 = pd.DataFrame({'C': range(104,100,-1), 'D': range(2,6), 'E': range(11,7,-1)})\ncorr = pd.DataFrame(dict(c1=c1, **{c2:df2[c2].corr(df1[c1]) for c2 in df2.columns})\n                    for c1 in df1.columns).set_index(\"c1\")\ncorr.index.name = None\n</code></pre>\n\n<p>Now <code>corr</code> is</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>     C    D    E\nA -1.0  1.0 -1.0\nB  1.0 -1.0  1.0\n</code></pre>\n\n<p>Neither <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.corr.html\" rel=\"nofollow noreferrer\"><code>DataFrame.corr</code></a> nor <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.corrwith.html\" rel=\"nofollow noreferrer\"><code>DataFrame.corrwith</code></a> do what I need.</p>\n"}, {"tags": ["python", "list"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 2, "creation_date": 1576704746, "post_id": 59400224, "comment_id": 104989602, "body": "Welcome to StackOverflow. See <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal, reproducible example</a>. We cannot effectively help you until you post your MRE code and accurately specify the problem. We should be able to paste your posted code into a text file and reproduce the problem you specified. Your given code doesn&#39;t run due to undefined variables; &quot;doesn&#39;t work&quot; is not a problem specification."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1576704784, "post_id": 59400224, "comment_id": 104989618, "body": "What is <code>ck</code>?  That variable is not defined anywhere in your code."}, {"owner": {"reputation": 27, "user_id": 12560350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26cd6cc8c2460a8cfb7a2fbb6daf7da1?s=128&d=identicon&r=PG&f=1", "display_name": "cakeBoy", "link": "https://stackoverflow.com/users/12560350/cakeboy"}, "edited": false, "score": 0, "creation_date": 1576704879, "post_id": 59400224, "comment_id": 104989649, "body": "I&#39;m sorry I meant list.remove... I corrected the error"}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 2, "creation_date": 1576704904, "post_id": 59400224, "comment_id": 104989658, "body": "Don&#39;t redefine <code>list</code> in your code. It&#39;s a builtin."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 3, "creation_date": 1576705011, "post_id": 59400224, "comment_id": 104989692, "body": "I think you&#39;re guilty of DWI - Deleting While Iterating. See <a href=\"https://stackoverflow.com/q/1207406/10077\">stackoverflow.com/q/1207406/10077</a>"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576705087, "post_id": 59400224, "comment_id": 104989714, "body": "You don&#39;t want to modify the list while iterating over it. That leads to nasty behaviours. Instead, create a new list while iterating the original"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 12560350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26cd6cc8c2460a8cfb7a2fbb6daf7da1?s=128&d=identicon&r=PG&f=1", "display_name": "cakeBoy", "link": "https://stackoverflow.com/users/12560350/cakeboy"}, "edited": false, "score": 0, "creation_date": 1576706462, "post_id": 59400294, "comment_id": 104990171, "body": "Thank you, yes I only have single &#39;5&#39; and &#39;3&#39;"}], "tags": [], "owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "is_accepted": false, "score": 2, "last_activity_date": 1576705297, "last_edit_date": 1576705297, "creation_date": 1576704940, "answer_id": 59400294, "question_id": 59400224, "link": "https://stackoverflow.com/questions/59400224/remove-an-element-from-a-lists-of-lists-in-python/59400294#59400294", "title": "Remove an element from a lists of lists in Python", "body": "<p>It's easier to test whether a 5 occurs before a 3 if they are strings, rather than tuples; so we can use <code>''.join</code> to convert them to strings.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; data = [('3', '3', '3'), ('3', '3', '5'), ('3', '5', '3'), ('3', '5', '5'), ('5', '3', '3'), ('5', '3', '5'), ('5', '5', '3'), ('5', '5', '5')]\n&gt;&gt;&gt; [r for r in data if '53' not in ''.join(r)]\n[('3', '3', '3'), ('3', '3', '5'), ('3', '5', '5'), ('5', '5', '5')]\n</code></pre>\n\n<p>This assumes you only want to test for a 5 immediately before a 3, and won't work for more general cases where the strings in the tuple could e.g. be <code>'53'</code> themselves. But it's sufficient for your example.</p>\n\n<p>A more general solution is to use a regex, and join on a character like <code>,</code> which none of the strings will contain:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; data = [('5', '3', '1'), ('53', '1', '1'), ('5', '1', '3')]\n&gt;&gt;&gt; import re\n&gt;&gt;&gt; pattern = re.compile('(^|,)5,(.*,)*3(,|$)')\n&gt;&gt;&gt; [r for r in data if not pattern.search(','.join(r))]\n[('53', '1', '1')]\n</code></pre>\n\n<p>Here the pattern <code>(^|,)5,(.+,)*3(,|$)</code> matches a 5 either at the start or after a <code>,</code>, followed by a comma, followed by any number of things ending with commas, followed by a 3 which is either before a comma or the end of the string.</p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 12560350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26cd6cc8c2460a8cfb7a2fbb6daf7da1?s=128&d=identicon&r=PG&f=1", "display_name": "cakeBoy", "link": "https://stackoverflow.com/users/12560350/cakeboy"}, "edited": false, "score": 0, "creation_date": 1576706515, "post_id": 59400329, "comment_id": 104990197, "body": "Thank you, this worked. I&#39;m new to python"}], "tags": [], "owner": {"reputation": 86481, "user_id": 2411802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RA92x.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2411802/alexander"}, "is_accepted": true, "score": 1, "last_activity_date": 1576707139, "last_edit_date": 1576707139, "creation_date": 1576705151, "answer_id": 59400329, "question_id": 59400224, "link": "https://stackoverflow.com/questions/59400224/remove-an-element-from-a-lists-of-lists-in-python/59400329#59400329", "title": "Remove an element from a lists of lists in Python", "body": "<p>You could use a conditional list comprehension:</p>\n\n<pre><code># List of Tuples (lot).\nlist_of_tups = [('3', '3', '3'), ('3', '3', '5'), ('3', '5', '3'), ('3', '5', '5'), ('5', '3', '3'), ('5', '3', '5'), ('5', '5', '3'), ('5', '5', '5')]\n\n&gt;&gt;&gt; [tup for tup in list_of_tups \n     if not any((a == '5' and b == '3') for a, b in zip(tup, tup[1:]))]\n[('3', '3', '3'), ('3', '3', '5'), ('3', '5', '5'), ('5', '5', '5')]\n</code></pre>\n\n<p>To modify the list inplace rather than create a new list, create an index of items that need to be removed and then pop them off in reverse order.</p>\n\n<pre><code>idx = [n for n, tup in enumerate(list_of_tups) \n       if any((a == '5' and b == '3') for a, b in zip(tup, tup[1:]))]\nfor i in reversed(idx):\n    list_of_tups.pop(i)\n\n&gt;&gt;&gt; list_of_tups\n[('3', '3', '3'), ('3', '3', '5'), ('3', '5', '5'), ('5', '5', '5')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12561204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b020f1b54a1b77faf67b139a4999d69?s=128&d=identicon&r=PG&f=1", "display_name": "Kezir", "link": "https://stackoverflow.com/users/12561204/kezir"}, "is_accepted": false, "score": -1, "last_activity_date": 1576712620, "last_edit_date": 1576712620, "creation_date": 1576706448, "answer_id": 59400539, "question_id": 59400224, "link": "https://stackoverflow.com/questions/59400224/remove-an-element-from-a-lists-of-lists-in-python/59400539#59400539", "title": "Remove an element from a lists of lists in Python", "body": "<p>Try to create another list with the same arguments (dont copy them, create new) and  remove() from the second list</p>\n\n<pre><code>tab = [('3', '3', '3'), ('3', '3', '5'), ('3', '5', '3'), ('3', '5', '5'), ('5', '3', '3'), ('5', '3', '5'), ('5', '5', '3'), ('5', '5', '5')]    \ntab2 = [('3', '3', '3'), ('3', '3', '5'), ('3', '5', '3'), ('3', '5', '5'), ('5', '3', '3'), ('5', '3', '5'), ('5', '5', '3'), ('5', '5', '5')]\nfor i in tab:\n    for j in range(0,2):\n        if i[j]=='5' and i[j+1]=='3':\n            tab2.remove(i)\n            break\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 12560350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26cd6cc8c2460a8cfb7a2fbb6daf7da1?s=128&d=identicon&r=PG&f=1", "display_name": "cakeBoy", "link": "https://stackoverflow.com/users/12560350/cakeboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "closed_date": 1576705245, "accepted_answer_id": 59400329, "answer_count": 3, "score": -1, "last_activity_date": 1576712620, "creation_date": 1576704504, "last_edit_date": 1576705131, "question_id": 59400224, "link": "https://stackoverflow.com/questions/59400224/remove-an-element-from-a-lists-of-lists-in-python", "closed_reason": "Duplicate", "title": "Remove an element from a lists of lists in Python", "body": "<p>How can I remove from a list of list every list in which a '5' is placed before a '3' given an initial list of list like the following one?</p>\n\n<pre><code>[('3', '3', '3'), ('3', '3', '5'), ('3', '5', '3'), ('3', '5', '5'), ('5', '3', '3'), ('5', '3', '5'), ('5', '5', '3'), ('5', '5', '5')]\n</code></pre>\n\n<p>I tried with </p>\n\n<pre><code>for i in list_ck:\n   for j in range(0,2):\n      if (i[j]=='5' and i[j+1]=='3'):\n         list_ck.remove(i)\n</code></pre>\n\n<p>but it doesn't work</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 2193, "user_id": 3700524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVsYW.jpg?s=128&g=1", "display_name": "Mohsen_Fatemi", "link": "https://stackoverflow.com/users/3700524/mohsen-fatemi"}, "edited": false, "score": 0, "creation_date": 1576705667, "post_id": 59400163, "comment_id": 104989904, "body": "what do you want to do? send <code>df.head()</code> so that we can understand what you want to do"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1576705722, "post_id": 59400163, "comment_id": 104989927, "body": "Welcome to stack overflow! The reason you&#39;re getting name and dtype information is because you&#39;re appending a <code>pandas.series</code> to your <code>weight</code> list. Is that what you intend to do? Or are you only trying to append the value?"}, {"owner": {"reputation": 2193, "user_id": 3700524, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XVsYW.jpg?s=128&g=1", "display_name": "Mohsen_Fatemi", "link": "https://stackoverflow.com/users/3700524/mohsen-fatemi"}, "edited": false, "score": 0, "creation_date": 1576705877, "post_id": 59400163, "comment_id": 104989987, "body": "The approach that you used is not efficient, try to do it using <code>apply</code> method and <code>lambda</code>s"}, {"owner": {"reputation": 11, "user_id": 12561108, "user_type": "registered", "profile_image": "https://graph.facebook.com/3280609205346654/picture?type=large", "display_name": "Bryan Ortiz", "link": "https://stackoverflow.com/users/12561108/bryan-ortiz"}, "edited": false, "score": 0, "creation_date": 1576706030, "post_id": 59400163, "comment_id": 104990035, "body": "Sorry, I want to find all the &quot;weight&quot; values for each particle that fell within the radius that I inserted into the code"}], "answers": [{"tags": [], "owner": {"reputation": 124, "user_id": 12334227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UcnzX.jpg?s=128&g=1", "display_name": "SublimizeD", "link": "https://stackoverflow.com/users/12334227/sublimized"}, "is_accepted": false, "score": 0, "last_activity_date": 1576706310, "creation_date": 1576706310, "answer_id": 59400517, "question_id": 59400163, "link": "https://stackoverflow.com/questions/59400163/how-can-i-remove-name-and-dtype-from-my-output-list/59400517#59400517", "title": "How can I remove name and dtype from my output list?", "body": "<pre><code>d=df[df['radio']==i]['ParWeight'].iloc[0]\nweight.append(d)\nprint(weight)\n</code></pre>\n\n<p>iloc SHOULD be able to isolate the string value here. I was not able to test due to not have a df available.</p>\n"}], "owner": {"reputation": 11, "user_id": 12561108, "user_type": "registered", "profile_image": "https://graph.facebook.com/3280609205346654/picture?type=large", "display_name": "Bryan Ortiz", "link": "https://stackoverflow.com/users/12561108/bryan-ortiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576706310, "creation_date": 1576704169, "last_edit_date": 1576704666, "question_id": 59400163, "link": "https://stackoverflow.com/questions/59400163/how-can-i-remove-name-and-dtype-from-my-output-list", "title": "How can I remove name and dtype from my output list?", "body": "<p>I have been doing a program in Python 2 that helps me add all the elements that belong to my list of results, but I had a problem with that list, it is that in my resulting list there are values that are not numbers like \"name\" and \"dtype\" by what I can't add them. With this line of code \"d = df [df ['radio'] == i] ['ParWeight']\" what the program does is rescue the value of the \"weight\" for a particle that fell within a radius of less than The radio inserted. Each particle corresponds to a radius and its weight</p>\n\n<pre><code>import pandas as pd\n#Define the data list\nweight=[]\ndata=pd.read_csv('muons.txt',header=0,delim_whitespace=True)\ndf=pd.DataFrame(data)\n#Insert the radio values\nR=input('Insert the Radio: ')\nfor i in df['radio']:\n    if i&lt;R:\n        d=df[df['radio']==i]['ParWeight']\n        weight.append(d) \nprint(weight)\n[7    2.88072\nName: ParWeight, dtype: float64, 40    5.45978\nName: ParWeight, dtype: float64]\n</code></pre>\n"}, {"tags": ["python", "windows"], "comments": [{"owner": {"reputation": 12117, "user_id": 2745495, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5bbcd267235bab78ec6710ef6654ba87?s=128&d=identicon&r=PG", "display_name": "Gino Mempin", "link": "https://stackoverflow.com/users/2745495/gino-mempin"}, "edited": false, "score": 0, "creation_date": 1576731477, "post_id": 59400155, "comment_id": 104995555, "body": "Did you at least try what the error message is telling you? Add <code>--user</code>  or check the permissions ??"}], "answers": [{"tags": [], "owner": {"reputation": 24, "user_id": 9342847, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/y9GZv.jpg?s=128&g=1", "display_name": "Kelyn Paul", "link": "https://stackoverflow.com/users/9342847/kelyn-paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1576704448, "creation_date": 1576704448, "answer_id": 59400215, "question_id": 59400155, "link": "https://stackoverflow.com/questions/59400155/how-to-install-pymprog-python-3-7/59400215#59400215", "title": "How to install &#39;pymprog&#39;? Python 3.7", "body": "<p>Try running pip as super user, if your on Linux you'll start the command with sudo. If on Windows, open terminal as admin.</p>\n"}, {"tags": [], "owner": {"reputation": 686, "user_id": 12555595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/634a5a7ac6210821aeefa0bcdfda3ec0?s=128&d=identicon&r=PG&f=1", "display_name": "laserany", "link": "https://stackoverflow.com/users/12555595/laserany"}, "is_accepted": false, "score": 0, "last_activity_date": 1576704506, "creation_date": 1576704506, "answer_id": 59400226, "question_id": 59400155, "link": "https://stackoverflow.com/questions/59400155/how-to-install-pymprog-python-3-7/59400226#59400226", "title": "How to install &#39;pymprog&#39;? Python 3.7", "body": "<p>this happens when you do not have permission to your program files folder (probably restricted by your admin or super user). adding the --user option while installing would fix the problem by installing python under your user folder instead. Hope that helps</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12375041, "user_type": "registered", "profile_image": "https://graph.facebook.com/2720316464714444/picture?type=large", "display_name": "Nikolas Chrysostomou", "link": "https://stackoverflow.com/users/12375041/nikolas-chrysostomou"}, "is_accepted": false, "score": 0, "last_activity_date": 1576704763, "creation_date": 1576704763, "answer_id": 59400268, "question_id": 59400155, "link": "https://stackoverflow.com/questions/59400155/how-to-install-pymprog-python-3-7/59400268#59400268", "title": "How to install &#39;pymprog&#39;? Python 3.7", "body": "<p>Just run command prompt as administrator and the problem is fixed!</p>\n\n<p>Thanks guys!</p>\n"}], "owner": {"reputation": 1, "user_id": 12375041, "user_type": "registered", "profile_image": "https://graph.facebook.com/2720316464714444/picture?type=large", "display_name": "Nikolas Chrysostomou", "link": "https://stackoverflow.com/users/12375041/nikolas-chrysostomou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "closed_date": 1576733635, "answer_count": 3, "score": -2, "last_activity_date": 1576707189, "creation_date": 1576704128, "last_edit_date": 1576707189, "question_id": 59400155, "link": "https://stackoverflow.com/questions/59400155/how-to-install-pymprog-python-3-7", "closed_reason": "Duplicate", "title": "How to install &#39;pymprog&#39;? Python 3.7", "body": "<p>I'm trying to install <code>pymprog</code> (Python 3.7) and I get the following message : </p>\n\n<pre><code>Could not install packages due to an EnvironmentError: [WinError 5] Access is denied: 'c:\\\\program files\\\\python37\\\\Lib\\\\site-packages\\\\swiglpk'\nConsider using the `--user` option or check the permissions.\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "google-cloud-functions"], "comments": [{"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 1, "creation_date": 1576704270, "post_id": 59400154, "comment_id": 104989388, "body": "You&#39;re not looping anything at all though.  Did you mean to do <code>for value in df[&#39;ID&#39;]: response = requests.get(...)</code>? What do you see from <code>print(value)</code>?"}, {"owner": {"reputation": 2051, "user_id": 6273496, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh3.googleusercontent.com/-ylur9-ED2UU/AAAAAAAAAAI/AAAAAAAAACU/r0Cd0F2YJCI/photo.jpg?sz=128", "display_name": "Simon Breton", "link": "https://stackoverflow.com/users/6273496/simon-breton"}, "reply_to_user": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 0, "creation_date": 1576704503, "post_id": 59400154, "comment_id": 104989507, "body": "I think I&#39;m misinterpreting my console log output. I&#39;m seeing all the value (<code>df[[&#39;ID&#39;]]</code>) printed one after the other from my csv file... like if I was looping through it."}, {"owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "edited": false, "score": 2, "creation_date": 1576704606, "post_id": 59400154, "comment_id": 104989550, "body": "<code>.to_string(...)</code> makes it a string representation of the items, but it&#39;s really just <i>one</i> iteration of <i>every ID</i>.  If you want to deal with them one by one, you need to loop them with <code>for</code>."}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 1, "creation_date": 1576704630, "post_id": 59400154, "comment_id": 104989558, "body": "<code>df[[&#39;ID&#39;]].to_string(index=False)</code> is giving you the entire column as a string at once. You need to index into or loop over the column to get the individual data elements"}, {"owner": {"reputation": 2051, "user_id": 6273496, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh3.googleusercontent.com/-ylur9-ED2UU/AAAAAAAAAAI/AAAAAAAAACU/r0Cd0F2YJCI/photo.jpg?sz=128", "display_name": "Simon Breton", "link": "https://stackoverflow.com/users/6273496/simon-breton"}, "reply_to_user": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "edited": false, "score": 0, "creation_date": 1576706998, "post_id": 59400154, "comment_id": 104990372, "body": "@Parfait would it be more simple with <code>csv</code> module? I&#39;ll be happy to have a example."}], "answers": [{"tags": [], "owner": {"reputation": 11919, "user_id": 9183344, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U7r5r.png?s=128&g=1", "display_name": "r.ook", "link": "https://stackoverflow.com/users/9183344/r-ook"}, "is_accepted": true, "score": 1, "last_activity_date": 1576704654, "creation_date": 1576704654, "answer_id": 59400257, "question_id": 59400154, "link": "https://stackoverflow.com/questions/59400154/passing-value-from-panda-dataframe-to-http-request/59400257#59400257", "title": "passing value from panda dataframe to http request", "body": "<p>Give this a try instead:</p>\n\n<pre><code>def api_request(request): \n    fs = gcsfs.GCSFileSystem(project=PROJECT)\n    with fs.open('gs://project.appspot.com/file.csv') as f:\n        df = pd.read_csv(f)\n        for value in df['ID']:\n            response = requests.get(\n                REQUEST_URL + value,\n                headers = {'accept': 'application/json', 'ClientToken': TOKEN }\n            )\n            json_response = response.json()\n            print(json_response)\n</code></pre>\n\n<p>As mentioned in my comment, you haven't iterated through the data.  What you are seeing is just the string representation of it with linebreaks (which might be why you mistakenly thought to be looping).</p>\n"}, {"tags": [], "owner": {"reputation": 86789, "user_id": 1422451, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/sFFvX.jpg?s=128&g=1", "display_name": "Parfait", "link": "https://stackoverflow.com/users/1422451/parfait"}, "is_accepted": false, "score": 2, "last_activity_date": 1576707406, "creation_date": 1576707406, "answer_id": 59400724, "question_id": 59400154, "link": "https://stackoverflow.com/questions/59400154/passing-value-from-panda-dataframe-to-http-request/59400724#59400724", "title": "passing value from panda dataframe to http request", "body": "<p>Actually, forgo the use of the Pandas library and simply iterate through csv</p>\n\n<pre><code>import csv\n\ndef api_request(request): \n    fs = gcsfs.GCSFileSystem(project=PROJECT)\n    with fs.open('gs://project.appspot.com/file.csv') as f:\n        reader = csv.reader(f)\n        next(reader, None)                 # SKIP HEADERS\n\n        for row in reader:                 # LOOP THROUGH GENERATOR (NOT PANDAS SERIES)\n            value = row[0]                 # SELECT FIRST COLUMN (ASSUMED ID)\n            response = requests.get(\n                 REQUEST_URL + value,\n                 headers={'accept': 'application/json', 'ClientToken': TOKEN }\n            )     \n            json_response = response.json()\n            print(json_response)\n</code></pre>\n"}], "owner": {"reputation": 2051, "user_id": 6273496, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh3.googleusercontent.com/-ylur9-ED2UU/AAAAAAAAAAI/AAAAAAAAACU/r0Cd0F2YJCI/photo.jpg?sz=128", "display_name": "Simon Breton", "link": "https://stackoverflow.com/users/6273496/simon-breton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 59400257, "answer_count": 2, "score": -1, "last_activity_date": 1576707406, "creation_date": 1576704127, "question_id": 59400154, "link": "https://stackoverflow.com/questions/59400154/passing-value-from-panda-dataframe-to-http-request", "title": "passing value from panda dataframe to http request", "body": "<p>I'm not sure how I should ask this question. I'm looping through a csv file using panda (at least I think so). As I'm looping through rows, I want to pass a value from a specific column to run an http request for each row. </p>\n\n<p>Here is my code so far:</p>\n\n<pre><code>def api_request(request): \n    fs = gcsfs.GCSFileSystem(project=PROJECT)\n    with fs.open('gs://project.appspot.com/file.csv') as f:\n        df = pd.read_csv(f,)\n        value = df[['ID']].to_string(index=False)\n        print(value)\n        response = requests.get(REQUEST_URL + value,headers={'accept': 'application/json','ClientToken':TOKEN }\n        )\n        json_response = response.json()\n        print(json_response)\n</code></pre>\n\n<p>As you can see, I'm looping through the csv file to get the ID to pass it to my request url. </p>\n\n<p>I'm not sure I understand the issue but looking at the console log it seems that <code>print(value)</code> is in the loop when the response request is not. In other words, in the console log I'm seeing all the ID printed but I'm seeing only one http request which is empty (probably because the ID is not correctly passed to it). </p>\n\n<p>I'm running my script with cloud functions. </p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "keras", "deep-learning"], "comments": [{"owner": {"reputation": 8295, "user_id": 1699075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a9c6b631a073149ec7200f8cd6378b?s=128&d=identicon&r=PG&f=1", "display_name": "thushv89", "link": "https://stackoverflow.com/users/1699075/thushv89"}, "edited": false, "score": 0, "creation_date": 1576704815, "post_id": 59400128, "comment_id": 104989633, "body": "Recommendations of <a href=\"https://stackoverflow.com/questions/59188056/tensorflow-2-0-warnings-dense-features-is-casting-an-input-tensor-from-dtype-f#comment104598715_59188056\">this</a> question might be able to help you."}, {"owner": {"reputation": 21097, "user_id": 10908375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L7f8w.jpg?s=128&g=1", "display_name": "Nicolas Gervais", "link": "https://stackoverflow.com/users/10908375/nicolas-gervais"}, "reply_to_user": {"reputation": 8295, "user_id": 1699075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37a9c6b631a073149ec7200f8cd6378b?s=128&d=identicon&r=PG&f=1", "display_name": "thushv89", "link": "https://stackoverflow.com/users/1699075/thushv89"}, "edited": false, "score": 0, "creation_date": 1576705115, "post_id": 59400128, "comment_id": 104989723, "body": "I see that it&#39;s related the comments aren&#39;t very clear and no answer has been posted. Feel free to provide an answer based on the code I provided."}], "answers": [{"tags": [], "owner": {"reputation": 21097, "user_id": 10908375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L7f8w.jpg?s=128&g=1", "display_name": "Nicolas Gervais", "link": "https://stackoverflow.com/users/10908375/nicolas-gervais"}, "is_accepted": true, "score": 6, "last_activity_date": 1594811929, "last_edit_date": 1594811929, "creation_date": 1590584670, "answer_id": 62043823, "question_id": 59400128, "link": "https://stackoverflow.com/questions/59400128/warningtensorflowlayer-my-model-is-casting-an-input-tensor-from-dtype-float64/62043823#62043823", "title": "WARNING:tensorflow:Layer my_model is casting an input tensor from dtype float64 to the layer&#39;s dtype of float32, which is new behavior in TensorFlow 2", "body": "<p><strong>tl;dr</strong> to avoid this, cast your input to <code>float32</code></p>\n<pre><code>X = tf.cast(iris[:, :3], tf.float32) \ny = tf.cast(iris[:, 3], tf.float32)\n</code></pre>\n<p>or with <code>numpy</code>:</p>\n<pre><code>X = np.array(iris[:, :3], dtype=np.float32)\ny = np.array(iris[:, 3], dtype=np.float32)\n</code></pre>\n<p><strong>Explanation</strong></p>\n<p>By default, Tensorflow uses <code>floatx</code>, which defaults to <code>float32</code>, which is standard for deep learning. You can verify this:</p>\n<pre><code>import tensorflow as tf\ntf.keras.backend.floatx()\n</code></pre>\n<pre><code>Out[3]: 'float32'\n</code></pre>\n<p>The input you provided (the Iris dataset), is of dtype <code>float64</code>, so there is a mismatch between Tensorflow's default dtype for weights, and the input. Tensorflow doesn't like that, because casting (changing the dtype) is costly. Tensorflow will generally throw an error when manipulating tensors of different dtypes (e.g., comparing <code>float32</code> logits and <code>float64</code> labels).</p>\n<p>The &quot;new behavior&quot; it's talking about:</p>\n<blockquote>\n<p>Layer my_model_1 is casting an input tensor from dtype float64 to the layer's dtype of float32, which is new behavior in TensorFlow 2</p>\n</blockquote>\n<p>Is that it will automatically cast the input dtype to <code>float32</code>. Tensorflow 1.X probably threw an exception in this situation, although I can't say I've ever used it.</p>\n"}], "owner": {"reputation": 21097, "user_id": 10908375, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L7f8w.jpg?s=128&g=1", "display_name": "Nicolas Gervais", "link": "https://stackoverflow.com/users/10908375/nicolas-gervais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3389, "favorite_count": 0, "accepted_answer_id": 62043823, "answer_count": 1, "score": 5, "last_activity_date": 1606756912, "creation_date": 1576704035, "last_edit_date": 1606756912, "question_id": 59400128, "link": "https://stackoverflow.com/questions/59400128/warningtensorflowlayer-my-model-is-casting-an-input-tensor-from-dtype-float64", "title": "WARNING:tensorflow:Layer my_model is casting an input tensor from dtype float64 to the layer&#39;s dtype of float32, which is new behavior in TensorFlow 2", "body": "<p>Before my Tensorflow neural network starts training, the following warning prints out:</p>\n<blockquote>\n<p>WARNING:tensorflow:Layer my_model is casting an input tensor from\ndtype float64 to the layer's dtype of float32, which is new behavior\nin TensorFlow 2.  The layer has dtype float32 because it's dtype\ndefaults to floatx. If you intended to run this layer in float32, you\ncan safely ignore this warning.</p>\n</blockquote>\n<blockquote>\n<p>If in doubt, this warning is likely\nonly an issue if you are porting a TensorFlow 1.X model to TensorFlow\n2. To change all layers to have dtype float64 by default, call <code>tf.keras.backend.set_floatx('float64')</code>.</p>\n</blockquote>\n<blockquote>\n<p>To change just this layer,\npass dtype='float64' to the layer constructor. If you are the author\nof this layer, you can disable autocasting by passing autocast=False\nto the base Layer constructor.</p>\n</blockquote>\n<p>Now, based on the error message, <strong>I am able to silence this error message</strong> by setting the backend to <code>'float64'</code>. But, I would like to get to the bottom of this and set the right <code>dtypes</code> manually.</p>\n<p>Full code:</p>\n<pre class=\"lang-py prettyprint-override\"><code>import tensorflow as tf\nfrom tensorflow.keras.layers import Dense, Concatenate\nfrom tensorflow.keras import Model\nfrom sklearn.datasets import load_iris\niris, target = load_iris(return_X_y=True)\n\nX = iris[:, :3]\ny = iris[:, 3]\n\nds = tf.data.Dataset.from_tensor_slices((X, y)).shuffle(25).batch(8)\n\nclass MyModel(Model):\n  def __init__(self):\n    super(MyModel, self).__init__()\n    self.d0 = Dense(16, activation='relu')\n    self.d1 = Dense(32, activation='relu')\n    self.d2 = Dense(1, activation='linear')\n\n  def call(self, x):\n    x = self.d0(x)\n    x = self.d1(x)\n    x = self.d2(x)\n    return x\n\nmodel = MyModel()\n\nloss_object = tf.keras.losses.MeanSquaredError()\n\noptimizer = tf.keras.optimizers.Adam(learning_rate=5e-4)\n\nloss = tf.keras.metrics.Mean(name='loss')\nerror = tf.keras.metrics.MeanSquaredError()\n\n@tf.function\ndef train_step(inputs, targets):\n    with tf.GradientTape() as tape:\n        predictions = model(inputs)\n        run_loss = loss_object(targets, predictions)\n    gradients = tape.gradient(run_loss, model.trainable_variables)\n    optimizer.apply_gradients(zip(gradients, model.trainable_variables))\n    loss(run_loss)\n    error(predictions, targets)\n\nfor epoch in range(10):\n  for data, labels in ds:\n    train_step(data, labels)\n\n  template = 'Epoch {:&gt;2}, Loss: {:&gt;7.4f}, MSE: {:&gt;6.2f}'\n  print(template.format(epoch+1,\n                        loss.result(),\n                        error.result()*100))\n  # Reset the metrics for the next epoch\n  loss.reset_states()\n  error.reset_states()\n</code></pre>\n"}, {"tags": ["python", "supercollider"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 13491998, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wvooi.jpg?s=128&g=1", "display_name": "codeastic", "link": "https://stackoverflow.com/users/13491998/codeastic"}, "is_accepted": false, "score": 0, "last_activity_date": 1589359800, "last_edit_date": 1589359800, "creation_date": 1588870631, "answer_id": 61663447, "question_id": 59400111, "link": "https://stackoverflow.com/questions/59400111/python-booting-program-supercollider-with-a-file/61663447#61663447", "title": "Python - Booting program SuperCollider with a file", "body": "<p>The string-concatenation may be the problem: <code>thisdir+\"/FoxDot/..\"</code> inserts a space before <code>/FoxDot</code>. This space is not inserted when using <code>thisdir++\"/..</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 10542230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f691fb929908a4e9ae979bdddcdc1a4?s=128&d=identicon&r=PG&f=1", "display_name": "Moz", "link": "https://stackoverflow.com/users/10542230/moz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1589359800, "creation_date": 1576703962, "question_id": 59400111, "link": "https://stackoverflow.com/questions/59400111/python-booting-program-supercollider-with-a-file", "title": "Python - Booting program SuperCollider with a file", "body": "<p>I am attempting to write an automated startup system for the FoxDot module in python using supercollider.</p>\n\n<p>My main problem right now is when I run the following code:</p>\n\n<pre><code>if(running == False):\n        startup = thisdir+\"/FoxDot/startup.scd\" #the location where my startup file is\n        subprocess.Popen([sclangloc], 0, startup, cwd=ourcwd, shell=True, ) #boot program with file containing arguments (FoxDot.start)\n</code></pre>\n\n<p>However, when I actually run this, the program is starting but never actually tries to run the arguments in my file.</p>\n\n<p>How can I make supercollider (specifically sclang (the server FoxDot uses to function)) run with said arguments?</p>\n\n<p>Thankyou</p>\n"}, {"tags": ["python", "numpy", "cvxpy"], "answers": [{"comments": [{"owner": {"reputation": 209, "user_id": 8849135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/grLB8.jpg?s=128&g=1", "display_name": "Tomasz Kania", "link": "https://stackoverflow.com/users/8849135/tomasz-kania"}, "edited": false, "score": 0, "creation_date": 1576704704, "post_id": 59400130, "comment_id": 104989588, "body": "That&#39;s right! However still some funny errors appear <code>---&gt; 50             return result.astype(numpy.float64)      51       52     # Return an identity matrix.  TypeError: float() argument must be a string or a number, not &#39;Inequality&#39; </code>"}, {"owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "reply_to_user": {"reputation": 209, "user_id": 8849135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/grLB8.jpg?s=128&g=1", "display_name": "Tomasz Kania", "link": "https://stackoverflow.com/users/8849135/tomasz-kania"}, "edited": false, "score": 0, "creation_date": 1576704818, "post_id": 59400130, "comment_id": 104989635, "body": "There i can&#39;t help without a reproducible example (yours is missing code). My only very wild guess: did you use <code>np.matrix</code>? If, don&#39;t! In 2019 (and probably years for now), np.matrix is deprecated / not recommended <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.matrix.html\" rel=\"nofollow noreferrer\">see note</a>. Use a plain 2d numpy-array."}, {"owner": {"reputation": 209, "user_id": 8849135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/grLB8.jpg?s=128&g=1", "display_name": "Tomasz Kania", "link": "https://stackoverflow.com/users/8849135/tomasz-kania"}, "edited": false, "score": 0, "creation_date": 1576706150, "post_id": 59400130, "comment_id": 104990079, "body": "Thank you. Would you mind taking a look?  <a href=\"https://stackoverflow.com/questions/59400478/typeeror-in-cvxpy-float-argument-must-be-a-string-or-a-number-not-inequalit\" title=\"typeeror in cvxpy float argument must be a string or a number not inequalit\">stackoverflow.com/questions/59400478/&hellip;</a>"}], "tags": [], "owner": {"reputation": 27269, "user_id": 2320035, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/83d5a6d76755c6a987dd59495698dcfe?s=128&d=identicon&r=PG", "display_name": "sascha", "link": "https://stackoverflow.com/users/2320035/sascha"}, "is_accepted": true, "score": 1, "last_activity_date": 1576704048, "creation_date": 1576704048, "answer_id": 59400130, "question_id": 59400094, "link": "https://stackoverflow.com/questions/59400094/non-strict-inequalities-as-contstraints-in-pythons-library-cvxpy/59400130#59400130", "title": "Non-strict inequalities as contstraints in Python&#39;s library cvxpy", "body": "<p>Same reason as in your <a href=\"https://stackoverflow.com/q/59398822/2320035\">earlier question</a> (although things like that are hard to analyze). </p>\n\n<p>You need to ask cvxpy for it's <code>max</code> <a href=\"https://www.cvxpy.org/tutorial/functions/index.html#scalar-functions\" rel=\"nofollow noreferrer\">function</a> explicitly. <strong>This is always required / recommended</strong>.</p>\n\n<pre><code>cp.Minimize(max(M*theta-b))\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>cp.Minimize(cp.max(M*theta-b))\n</code></pre>\n\n<p>You basically have to use only functions from cvxpy, except for the <a href=\"https://www.cvxpy.org/tutorial/functions/index.html#clarifications\" rel=\"nofollow noreferrer\">following</a>:</p>\n\n<blockquote>\n  <p>The CVXPY function sum sums all the entries in a single expression. The built-in Python sum should be used to add together a list of expressions.</p>\n</blockquote>\n"}], "owner": {"reputation": 209, "user_id": 8849135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/grLB8.jpg?s=128&g=1", "display_name": "Tomasz Kania", "link": "https://stackoverflow.com/users/8849135/tomasz-kania"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 59400130, "answer_count": 1, "score": 2, "last_activity_date": 1576704373, "creation_date": 1576703854, "last_edit_date": 1576704373, "question_id": 59400094, "link": "https://stackoverflow.com/questions/59400094/non-strict-inequalities-as-contstraints-in-pythons-library-cvxpy", "title": "Non-strict inequalities as contstraints in Python&#39;s library cvxpy", "body": "<p>I am playing with the cvxpy library in order to solve some particular optimisation problem</p>\n\n<pre><code>import cvxpy as cp\nimport numpy as np\n\n(...)\n\nprob = cp.Problem(\n    cp.Minimize(max(M*theta-b)) &lt;= 45,\n    [-48 &lt;= theta, theta &lt;= 48])\n</code></pre>\n\n<p>(Here M and b are certain numpy matrices.)</p>\n\n<p>Interestingly, it screams:</p>\n\n<pre><code>NotImplementedError                       Traceback (most recent call last)\n&lt;ipython-input-62-0296c965b1ff&gt; in &lt;module&gt;\n      1 prob = cp.Problem(\n----&gt; 2     cp.Minimize(max(M*theta-b)) &lt;= 45,\n      3     [-10 &lt;= theta, theta &lt;= 10])\n\n~\\Anaconda3\\lib\\site-packages\\cvxpy\\expressions\\expression.py in __gt__(self, other)\n    595         \"\"\"Unsupported.\n    596         \"\"\"\n--&gt; 597         raise NotImplementedError(\"Strict inequalities are not allowed.\")\n\nNotImplementedError: Strict inequalities are not allowed.\n</code></pre>\n\n<p>however, to me, they do not look strict at all...</p>\n"}, {"tags": ["python", "pandas", "web-scraping"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 2, "creation_date": 1576704251, "post_id": 59400075, "comment_id": 104989381, "body": "Welcome to stack overflow! Unfortunately, this is not a code-writing or tutorial service, and we ask that you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> including code for what you&#39;ve already tried based on your own research. Your best bet would be to find a tutorial or other resource, try some things, and then come back and ask specific questions if you hit specific problems. As-is, this question is likely to be closed as <a href=\"https://stackoverflow.com/help/on-topic\">off-topic</a> for being too broad"}], "answers": [{"tags": [], "owner": {"reputation": 240, "user_id": 12560825, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBXsLPlWyblr1bIP8SREIyL-MOtZB6Yqse5VbQI=k-s128", "display_name": "Kyle Hurst", "link": "https://stackoverflow.com/users/12560825/kyle-hurst"}, "is_accepted": false, "score": 0, "last_activity_date": 1576704506, "creation_date": 1576704506, "answer_id": 59400225, "question_id": 59400075, "link": "https://stackoverflow.com/questions/59400075/parsing-through-html-with-beautiful-soup-and-python-working-with-table-data/59400225#59400225", "title": "Parsing through HTML with beautiful soup and python: working with table data", "body": "<p>I found <a href=\"https://lxml.de/\" rel=\"nofollow noreferrer\">lxml</a> to be very helpful when looping through HTML to parse/gather/store data. Do some research on using xpath to loop through, you can easily grab all of the text and store it using this method:</p>\n\n<pre><code>    from lxml import etree\n\n    root = etree.HTML(html)\n    textOut = root.xpath('//*[text()]') #grab all text OR\n    textOut = root.xpath('//*[text()[contains(., \"stuff\")]]') #grab just text you want\n</code></pre>\n\n<p>Given the site you noted and that you're scraping tables, you can use xpath to direct your searches to tables only like this:</p>\n\n<pre><code>    textOut = root.xpath('//table[text()]') #grab just text from tables\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "is_accepted": false, "score": 0, "last_activity_date": 1576718633, "creation_date": 1576718633, "answer_id": 59402172, "question_id": 59400075, "link": "https://stackoverflow.com/questions/59400075/parsing-through-html-with-beautiful-soup-and-python-working-with-table-data/59402172#59402172", "title": "Parsing through HTML with beautiful soup and python: working with table data", "body": "<p>You can use this to grab a table, and use whichtable to choose which one, as there are multiple:</p>\n\n<pre><code>def getContent(link, filename, whichtable=0):\n    result1 = requests.get(link)\n    src1 = result1.content\n    soup = BeautifulSoup(src1,'lxml')\n    table = soup.find_all('table')[whichtable]\n    with open(filename,'w',newline='') as f:\n        writer = csv.writer(f)\n        for tr in table('tr'):\n            row = [t.get_text(strip=True)for t in tr(['td','th'])]\n            writer.writerow(row)\ngetContent('https://teams.technion.ac.il/residency-placements/', 'what.csv', whichtable=0)\ndf2= pd.read_csv('what.csv')\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>                                    Hospital/Location                                  Specialty\n0          Maimonides Med Ctr-NYMaimonides Med Ctr-NY         Medicine-PreliminaryAnesthesiology\n1                          Jacobi Med Ctr/Einstein-NY                                 Pediatrics\n2                          Jacobi Med Ctr/Einstein-NY                                 Pediatrics\n3                                 Temple Univ Hosp-PA                          Internal Medicine\n4                 Case Western/MetroHealth Med Ctr-OH                                 Pediatrics\n5                      Sinai Hospital of Baltimore-MD                                 Pediatrics\n6                                 Baystate Med Ctr-MA                                   Medicine\n7                      U Rochester/Strong Memorial-NY                             Anesthesiology\n8                               Johns Hopkins Hosp-MD                        Surgery-Preliminary\n9                          Westchester Medical Ctr-NY                                 Psychiatry\n10                                Danbury Hospital-CT                                   Medicine\n11                        Icahn SOM at Mount Sinai-NY                                 Pediatrics\n12                 Emory Univ SOM-GAEmory Univ SOM-GA                    TransitionalDermatology\n13  NYMC-Metropolitan Hosp Ctr-NYKingsbrook Jewish...  Medicine-PreliminaryPhys Medicine &amp; Rehab\n14                            Advocate Health Care-IL                            Pediatrics/ALGH\n15                                    Mayo Clinic- WI                            Family Medicine\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2231, "user_id": 12455879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a81cac450eb5d596c6ba57478e67396c?s=128&d=identicon&r=PG&f=1", "display_name": "dabingsou", "link": "https://stackoverflow.com/users/12455879/dabingsou"}, "is_accepted": false, "score": 0, "last_activity_date": 1576725739, "creation_date": 1576725739, "answer_id": 59402906, "question_id": 59400075, "link": "https://stackoverflow.com/questions/59400075/parsing-through-html-with-beautiful-soup-and-python-working-with-table-data/59402906#59402906", "title": "Parsing through HTML with beautiful soup and python: working with table data", "body": "<p>You can use this to extract data from tables, too. Other things need to be dealt with by yourself.\nFirst, you need to install libs using pip</p>\n\n<pre><code>pip install requests\npip install simplified_scrapy\n</code></pre>\n\n<hr>\n\n<pre><code>import requests\nfrom simplified_scrapy.simplified_doc import SimplifiedDoc \nhtml=requests.get('https://teams.technion.ac.il/residency-placements/').text\ndoc = SimplifiedDoc(html)\ntables = doc.getElementsByClass('entry',start='listitems') # Use start to filter previous div\ndata = []\nfor table in tables:\n  t=[] # Data of a table\n  rows = table.trs # get all rows\n  for row in rows:\n    tds = row.children # get all td and th\n    t.append([td.text for td in tds])\n  data.append(t)\n\nprint (data)\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 4957489, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6d77932834d513fc219e9d2a454c9c1?s=128&d=identicon&r=PG&f=1", "display_name": "gboge", "link": "https://stackoverflow.com/users/4957489/gboge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 1, "closed_date": 1576748785, "answer_count": 3, "score": 1, "last_activity_date": 1576725739, "creation_date": 1576703711, "question_id": 59400075, "link": "https://stackoverflow.com/questions/59400075/parsing-through-html-with-beautiful-soup-and-python-working-with-table-data", "closed_reason": "Needs more focus", "title": "Parsing through HTML with beautiful soup and python: working with table data", "body": "<p>I'm trying to parse the data stored as different tables from the following website: </p>\n\n<p><a href=\"https://teams.technion.ac.il/residency-placements/\" rel=\"nofollow noreferrer\">https://teams.technion.ac.il/residency-placements/</a></p>\n\n<p>I want to parse the data from the table and store it as a dataframe. I'm trying my hand at beautifulsoup. I've already figured out which id tag to parse on and have found that there are ten separate ones (eg tab-1, tab-2,...,tab-10). I want to write a function that will loop through the HTML and store the text under each tab as a separate dataframe in pandas. I'm a beginner at this so I have no idea what I'm doing. Thank you!</p>\n"}, {"tags": ["python", "matrix", "sympy", "matrix-inverse"], "answers": [{"comments": [{"owner": {"reputation": 75386, "user_id": 161801, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0383e4cae325f65a1bbd906be4be2276?s=128&d=identicon&r=PG", "display_name": "asmeurer", "link": "https://stackoverflow.com/users/161801/asmeurer"}, "edited": false, "score": 0, "creation_date": 1576713593, "post_id": 59400554, "comment_id": 104992262, "body": "For a fully symbolic <code>n x n</code> matrix, the determinant contains n! terms. 8! is 40320. So unless your matrix has some symmetries, or, ideally, many zero entries, the symbolic determinant and hence the symbolic inverse will be a large expression. It is possible that the cofactor and the determinant can cancel each other out to get a simpler expression (after calling <code>cancel</code>)."}], "tags": [], "owner": {"reputation": 5598, "user_id": 9450991, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d8fa060feb1d11913814710f4ee352?s=128&d=identicon&r=PG&f=1", "display_name": "Oscar Benjamin", "link": "https://stackoverflow.com/users/9450991/oscar-benjamin"}, "is_accepted": true, "score": 2, "last_activity_date": 1576706552, "creation_date": 1576706552, "answer_id": 59400554, "question_id": 59400064, "link": "https://stackoverflow.com/questions/59400064/sympy-find-inverse-of-matrix-only-at-a-particular-location/59400554#59400554", "title": "Sympy - find inverse of matrix only at a particular location?", "body": "<p>The general formula for the inverse is calculated from the transposed matrix of cofactors and the determinant so</p>\n\n<pre><code>In [8]: M = Matrix([[1, 4, 7], [3, 0, 5], [-1, 9, 11]])                                                                           \n\nIn [9]: M                                                                                                                         \nOut[9]: \n\u23a11   4  7 \u23a4\n\u23a2         \u23a5\n\u23a23   0  5 \u23a5\n\u23a2         \u23a5\n\u23a3-1  9  11\u23a6\n\nIn [10]: M.inv()                                                                                                                  \nOut[10]: \n\u23a145/8   -19/8  -5/2\u23a4\n\u23a2                  \u23a5\n\u23a219/4   -9/4    -2 \u23a5\n\u23a2                  \u23a5\n\u23a3-27/8  13/8   3/2 \u23a6\n\nIn [11]: M.cofactor(0, 0) / M.det()                                                                                               \nOut[11]: 45/8\n</code></pre>\n\n<p>This requires computing two determinants: one for the whole matrix and one for the cofactor. In big-O terms this is <code>O(n**3)</code> (same as the inverse) but it might be faster than computing the inverse.</p>\n\n<p>If the problem is expression blow up then I think that using cofactor and determinant will not help since the determinant calculations will still be slow. In that case you need to give an example expression that demonstrates the problem.</p>\n"}], "owner": {"reputation": 2791, "user_id": 817551, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ff1a76036bf1971cc6e8e920dbab100e?s=128&d=identicon&r=PG", "display_name": "awareeye", "link": "https://stackoverflow.com/users/817551/awareeye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 59400554, "answer_count": 1, "score": 1, "last_activity_date": 1576706552, "creation_date": 1576703652, "question_id": 59400064, "link": "https://stackoverflow.com/questions/59400064/sympy-find-inverse-of-matrix-only-at-a-particular-location", "title": "Sympy - find inverse of matrix only at a particular location?", "body": "<p>I have an 8 by 8 matrix in Sympy. Inverting the entire matrix takes too long since the symbolic expression for each cell in the matrix is fairly complicated in my case. Also, I am only interested in the value of the inverse of a matrix for a single cell (first row and first column). Is there any way to compute the inverse only at a single location instead of computing the value at all 64 locations of the matrix?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "winapi", "pip", "pycharm", "pyinstaller"], "answers": [{"comments": [{"owner": {"reputation": 323, "user_id": 12313380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f51152a0294a530f860a82239fa31356?s=128&d=identicon&r=PG&f=1", "display_name": "tiberhockey", "link": "https://stackoverflow.com/users/12313380/tiberhockey"}, "edited": false, "score": 0, "creation_date": 1576766623, "post_id": 59402799, "comment_id": 105011023, "body": "Thank you for the great explanation, it working now. Have a great  day sir!"}, {"owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "reply_to_user": {"reputation": 323, "user_id": 12313380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f51152a0294a530f860a82239fa31356?s=128&d=identicon&r=PG&f=1", "display_name": "tiberhockey", "link": "https://stackoverflow.com/users/12313380/tiberhockey"}, "edited": false, "score": 0, "creation_date": 1576821243, "post_id": 59402799, "comment_id": 105027696, "body": "@tiberhockey Glad to help."}], "tags": [], "owner": {"reputation": 4915, "user_id": 11128312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ufn85.jpg?s=128&g=1", "display_name": "Strive Sun", "link": "https://stackoverflow.com/users/11128312/strive-sun"}, "is_accepted": true, "score": 1, "last_activity_date": 1576724795, "creation_date": 1576724795, "answer_id": 59402799, "question_id": 59400038, "link": "https://stackoverflow.com/questions/59400038/pycharm-win32api-module-install-error-non-zero-exit-code-1/59402799#59402799", "title": "Pycharm win32api module install Error: Non-zero exit code (1)", "body": "<p>Looks like you're having trouble finding the win32api module.</p>\n\n<p>Don't worry. I will help you solve this issue.</p>\n\n<p>First, if you are using <code>virtualenv</code>, please make sure you have activated your environment.</p>\n\n<p>If you don't know how to activate, please refer these links below:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/14604699/how-to-activate-virtualenv\">How to activate virtualenv?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/54312543/activate-venv-python-3-7-2-for-windows\">Activate venv (Python 3.7.2) for Windows [duplicate]</a></li>\n</ul>\n\n<p>Second, when you create the project, please choose <strong>New environment using Virtualenv</strong>.</p>\n\n<p>Then select <strong>Inherit global site-packages</strong> and <strong>Make available to all projects</strong> and press <strong>Create button</strong>.</p>\n\n<p>This is a screensnap for reference.</p>\n\n<p><a href=\"https://i.stack.imgur.com/eJujK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eJujK.png\" alt=\"enter image description here\"></a></p>\n\n<p>Third, you need to edit configuartions.</p>\n\n<p>Like this screensnap shows below, you need to choose .py file by selecting <strong>Script Path</strong>.</p>\n\n<p><a href=\"https://i.stack.imgur.com/HT3Kt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HT3Kt.png\" alt=\"enter image description here\"></a></p>\n\n<p>Finally, after everything is configured, it can work well.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Api03.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Api03.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 323, "user_id": 12313380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f51152a0294a530f860a82239fa31356?s=128&d=identicon&r=PG&f=1", "display_name": "tiberhockey", "link": "https://stackoverflow.com/users/12313380/tiberhockey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2105, "favorite_count": 0, "accepted_answer_id": 59402799, "answer_count": 1, "score": 1, "last_activity_date": 1576724795, "creation_date": 1576703505, "last_edit_date": 1576706666, "question_id": 59400038, "link": "https://stackoverflow.com/questions/59400038/pycharm-win32api-module-install-error-non-zero-exit-code-1", "title": "Pycharm win32api module install Error: Non-zero exit code (1)", "body": "<p>so i got this problem when I try to: import win32api on my Pycharm project.py code. I got this error: Non-zero exit code (1)</p>\n\n<p>I also tried with pypiwin32 and I still got the same error. </p>\n\n<p>What is strange is when I executed the pip install pypiwin32 command on my CMD the instalation of pypiwin32 worked. But it still doesnt work on Pycharm. Thanks for the help</p>\n\n<p><a href=\"https://i.stack.imgur.com/MwmfH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MwmfH.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/wTxAV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wTxAV.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "python-3.7"], "comments": [{"owner": {"reputation": 1591, "user_id": 7264980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6251945f2fe3a58c482788f1cd20fa9?s=128&d=identicon&r=PG", "display_name": "Anatoliy R", "link": "https://stackoverflow.com/users/7264980/anatoliy-r"}, "edited": false, "score": 1, "creation_date": 1576703780, "post_id": 59400007, "comment_id": 104989230, "body": "please edit your post and include your attempt with for cycle"}, {"owner": {"reputation": 1, "user_id": 12561172, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h36FpRvau0o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfN2g5ubnOCZUitC-P1J1kR0j-EmA/photo.jpg?sz=128", "display_name": "Ana Luiza Tavares", "link": "https://stackoverflow.com/users/12561172/ana-luiza-tavares"}, "reply_to_user": {"reputation": 1591, "user_id": 7264980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6251945f2fe3a58c482788f1cd20fa9?s=128&d=identicon&r=PG", "display_name": "Anatoliy R", "link": "https://stackoverflow.com/users/7264980/anatoliy-r"}, "edited": false, "score": 0, "creation_date": 1576704275, "post_id": 59400007, "comment_id": 104989392, "body": "Done! Don&#39;t know if it helps because I don&#39;t really know what to put under the for cylcle"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 4, "creation_date": 1576704497, "post_id": 59400007, "comment_id": 104989502, "body": "&quot;I don&#39;t know how to code this&quot; is not a Stack Overflow question.  There&#39;s nothing in your code that attempts to sum the list elements.  <a href=\"https://stackoverflow.com/help/on-topic\">On topic</a>, <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a>, and ... <a href=\"https://codeblog.jonskeet.uk/2010/08/29/writing-the-perfect-question/\" rel=\"nofollow noreferrer\">the perfect question</a> apply here.  If you don&#39;t know how to identify and sum things, consider working through tutorials on grouping, sorting, and summation.  If you <i>do</i> know, then please make an honest try and post that."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1576714372, "post_id": 59400007, "comment_id": 104992442, "body": "I agree with @Prune, I suggest learning more about programming in general."}], "answers": [{"tags": [], "owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "is_accepted": true, "score": -1, "last_activity_date": 1576704369, "last_edit_date": 1576704369, "creation_date": 1576703777, "answer_id": 59400086, "question_id": 59400007, "link": "https://stackoverflow.com/questions/59400007/how-can-i-add-the-numbers-of-tuples-from-different-lists-of-a-a-list-in-python/59400086#59400086", "title": "How can i add the numbers of tuples from different lists of a a list in Python?", "body": "<p>If the \"list names\" are always in the same order, you can do this using a list comprehension with <code>zip</code> and <code>sum</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; data = [[('Lista-A', 1), ('Lista-X', 1), ('Lista-Z', 4)], [('Lista-A', 2), ('Lista-X', 0), ('Lista-Z', 1)], [('Lista-A', 5), ('Lista-X', 1), ('Lista-Z', 0)], [('Lista-A', 0), ('Lista-X', 1), ('Lista-Z', 4)]]\n&gt;&gt;&gt; [(col[0][0], sum(x for _, x in col)) for col in zip(*data)]\n[('Lista-A', 8), ('Lista-X', 3), ('Lista-Z', 9)]\n</code></pre>\n\n<p><code>zip(*data)</code> is a standard way to iterate over \"columns\" from a list of \"rows\". Assuming the columns do line up, then each column contains all the numbers to be summed for the same \"list name\". The <code>sum</code> function adds the numbers; the columns contain tuples where we want to sum the numbers in the second component, hence the destructuring assignment <code>_, x</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 12561172, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h36FpRvau0o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfN2g5ubnOCZUitC-P1J1kR0j-EmA/photo.jpg?sz=128", "display_name": "Ana Luiza Tavares", "link": "https://stackoverflow.com/users/12561172/ana-luiza-tavares"}, "edited": false, "score": 0, "creation_date": 1576704399, "post_id": 59400135, "comment_id": 104989450, "body": "I was trying to do something more simple using just &quot;for cycle&quot;, but thanks!!"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "reply_to_user": {"reputation": 1, "user_id": 12561172, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h36FpRvau0o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfN2g5ubnOCZUitC-P1J1kR0j-EmA/photo.jpg?sz=128", "display_name": "Ana Luiza Tavares", "link": "https://stackoverflow.com/users/12561172/ana-luiza-tavares"}, "edited": false, "score": 0, "creation_date": 1576704513, "post_id": 59400135, "comment_id": 104989516, "body": "@AnaLuizaTavares You have a nested list. Using a single <code>for</code> &quot;cycle&quot; will not help you much..."}], "tags": [], "owner": {"reputation": 524, "user_id": 2475812, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/4ebb91cdf6e9e3e441ae6e6e9fa8cecf?s=128&d=identicon&r=PG", "display_name": "D Dhaliwal", "link": "https://stackoverflow.com/users/2475812/d-dhaliwal"}, "is_accepted": false, "score": 0, "last_activity_date": 1576704164, "last_edit_date": 1576704164, "creation_date": 1576704064, "answer_id": 59400135, "question_id": 59400007, "link": "https://stackoverflow.com/questions/59400007/how-can-i-add-the-numbers-of-tuples-from-different-lists-of-a-a-list-in-python/59400135#59400135", "title": "How can i add the numbers of tuples from different lists of a a list in Python?", "body": "<p>This should work</p>\n\n<pre><code>from collections import defaultdict\n\ninput = [[('Lista-A', 1), ('Lista-X', 1), ('Lista-Z', 4)], [('Lista-A', 2), ('Lista-X', 0), ('Lista-Z', 1)], [('Lista-A', 5), ('Lista-X', 1), ('Lista-Z', 0)], [('Lista-A', 0), ('Lista-X', 1), ('Lista-Z', 4)]]\n\nd = defaultdict(int)\nfor i in input:\n    for j in i:\n        d[j[0]] += j[1]\n\nres = list(d.items())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1591, "user_id": 7264980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6251945f2fe3a58c482788f1cd20fa9?s=128&d=identicon&r=PG", "display_name": "Anatoliy R", "link": "https://stackoverflow.com/users/7264980/anatoliy-r"}, "is_accepted": false, "score": -1, "last_activity_date": 1576705308, "creation_date": 1576705308, "answer_id": 59400359, "question_id": 59400007, "link": "https://stackoverflow.com/questions/59400007/how-can-i-add-the-numbers-of-tuples-from-different-lists-of-a-a-list-in-python/59400359#59400359", "title": "How can i add the numbers of tuples from different lists of a a list in Python?", "body": "<p>Not the most elegant \"pythonic\" way, but using your code</p>\n\n<pre><code>new_lista = {}\nfor lista in p:\n    for i in lista: \n        new_lista[i[0]] = new_lista.get(i[0], 0) + i[1]\n\np1 = [(k,v) for k,v in new_lista.items()]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1216, "user_id": 1627968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4568c8ef9068eada35e5ed74ee4d471b?s=128&d=identicon&r=PG", "display_name": "Benjamin Rowell", "link": "https://stackoverflow.com/users/1627968/benjamin-rowell"}, "is_accepted": false, "score": -1, "last_activity_date": 1576705658, "creation_date": 1576705658, "answer_id": 59400412, "question_id": 59400007, "link": "https://stackoverflow.com/questions/59400007/how-can-i-add-the-numbers-of-tuples-from-different-lists-of-a-a-list-in-python/59400412#59400412", "title": "How can i add the numbers of tuples from different lists of a a list in Python?", "body": "<p>A horrible one-liner after the import, but it does the trick!</p>\n\n<pre><code>&gt;&gt;&gt; from functools import reduce\n&gt;&gt;&gt; reduce(lambda x, y: dict((k, v + y[k]) for k, v in x.items()), [dict(i) for i in input])\n{'Lista-A': 8, 'Lista-X': 3, 'Lista-Z': 9}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12561172, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-h36FpRvau0o/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfN2g5ubnOCZUitC-P1J1kR0j-EmA/photo.jpg?sz=128", "display_name": "Ana Luiza Tavares", "link": "https://stackoverflow.com/users/12561172/ana-luiza-tavares"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 1, "closed_date": 1576751362, "accepted_answer_id": 59400086, "answer_count": 4, "score": -5, "last_activity_date": 1576705658, "creation_date": 1576703337, "last_edit_date": 1576704161, "question_id": 59400007, "link": "https://stackoverflow.com/questions/59400007/how-can-i-add-the-numbers-of-tuples-from-different-lists-of-a-a-list-in-python", "closed_reason": "Needs more focus", "title": "How can i add the numbers of tuples from different lists of a a list in Python?", "body": "<p>here's what i have (in python version 3.7.4):</p>\n\n<pre><code>P= [[('Lista-A', 1), ('Lista-X', 1), ('Lista-Z', 4)], [('Lista-A', 2), ('Lista-X', 0), ('Lista-Z', 1)], [('Lista-A', 5), ('Lista-X', 1), ('Lista-Z', 0)], [('Lista-A', 0), ('Lista-X', 1), ('Lista-Z', 4)]]\n</code></pre>\n\n<p>I'm trying to sum all the numbers associated with \"Lista-A\", \"Lista-X\" and \"Lista-Z\" so that I can get something like this (just a list of tuples that has the sum of the numbers associated with each \"Lista\"):</p>\n\n<pre><code>[('Lista-A', 8), ('Lista-X', 3), ('Lista-Z', 9)]\n</code></pre>\n\n<p>I've tried using a for cycle but I'm not getting there.</p>\n\n<pre><code>for lista in P:\n        for i in lista: \n</code></pre>\n\n<p>I don't know how to continue the code... Can anyone help me? \nThanks in advance!</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "edited": false, "score": 3, "creation_date": 1576703726, "post_id": 59399995, "comment_id": 104989203, "body": "why do <code>Ocean</code>, <code>Swamp</code> move from <code>Tom</code> to <code>Jeff</code> in the output?"}, {"owner": {"reputation": 6155, "user_id": 6817245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc5e8c2d05056411966127e92c337fbd?s=128&d=identicon&r=PG&f=1", "display_name": "warped", "link": "https://stackoverflow.com/users/6817245/warped"}, "edited": false, "score": 0, "creation_date": 1576703734, "post_id": 59399995, "comment_id": 104989208, "body": "you want <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.melt.html\" rel=\"nofollow noreferrer\">melt</a>"}, {"owner": {"reputation": 37, "user_id": 12561140, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4vqQwc_ygqQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdonioOVoAibcezyit3DkXAbThLAg/photo.jpg?sz=128", "display_name": "Brian Smart", "link": "https://stackoverflow.com/users/12561140/brian-smart"}, "reply_to_user": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "edited": false, "score": 0, "creation_date": 1576706131, "post_id": 59399995, "comment_id": 104990069, "body": "@AndyL. You&#39;re right that was a typo thank you"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 12561140, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4vqQwc_ygqQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdonioOVoAibcezyit3DkXAbThLAg/photo.jpg?sz=128", "display_name": "Brian Smart", "link": "https://stackoverflow.com/users/12561140/brian-smart"}, "edited": false, "score": 1, "creation_date": 1576706484, "post_id": 59400210, "comment_id": 104990183, "body": "Thank you very much"}], "tags": [], "owner": {"reputation": 26154, "user_id": 11884237, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7d7q4.png?s=128&g=1", "display_name": "ansev", "link": "https://stackoverflow.com/users/11884237/ansev"}, "is_accepted": true, "score": 2, "last_activity_date": 1576706286, "last_edit_date": 1576706286, "creation_date": 1576704429, "answer_id": 59400210, "question_id": 59399995, "link": "https://stackoverflow.com/questions/59399995/creating-new-dataframe-from-existing-dataframe-columns-if-not-empty/59400210#59400210", "title": "Creating new dataframe from existing dataframe columns if not empty", "body": "<p>Use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.melt.html#pandas.DataFrame.melt\" rel=\"nofollow noreferrer\"><code>DataFrame.melt</code></a>:</p>\n\n<pre><code>( df.melt('Name',value_name='Preference')\n    .drop('variable',axis=1)\n    .dropna()\n    .sort_values('Name')\n    .reset_index(drop=True) )\n</code></pre>\n\n<p>or <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.stack.html\" rel=\"nofollow noreferrer\"><code>DataFrame.stack</code></a> with <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.set_index.html\" rel=\"nofollow noreferrer\"><code>DataFrame.set_index</code></a>:</p>\n\n<pre><code>df.set_index('Name').stack().rename('Preference').reset_index(level=['Name',0],drop=0)\n</code></pre>\n\n<p><strong>Output</strong></p>\n\n<pre><code>   Name Preference\n0  Dave      Beach\n1  Dave       Lake\n2  Dave   Mountain\n3  Dave     Desert\n4  Jeff   Outdoors\n5   Tom     Forest\n6   Tom      Ocean\n7   Tom      Swamp\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 12561140, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4vqQwc_ygqQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdonioOVoAibcezyit3DkXAbThLAg/photo.jpg?sz=128", "display_name": "Brian Smart", "link": "https://stackoverflow.com/users/12561140/brian-smart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 59400210, "answer_count": 1, "score": 1, "last_activity_date": 1576727711, "creation_date": 1576703281, "last_edit_date": 1576727711, "question_id": 59399995, "link": "https://stackoverflow.com/questions/59399995/creating-new-dataframe-from-existing-dataframe-columns-if-not-empty", "title": "Creating new dataframe from existing dataframe columns if not empty", "body": "<p>I have a Pandas DataFrame with columns that contain data for some rows and not for others. I need to merge several columns into a single column, removing missing data. For example:</p>\n\n<pre><code>   Name     Preference_1 Preference_2 Preference_3 Preference_4\n0  Dave        Beach         Lake     Mountain       Desert\n1  Jeff     Outdoors          NaN          NaN          NaN\n2   Tom       Forest        Ocean        Swamp          NaN\n</code></pre>\n\n<p>Needs to become this:</p>\n\n<pre><code>   Name   Preference\n0  Dave      Beach\n1  Dave       Lake\n2  Dave   Mountain\n3  Dave     Desert\n4  Jeff   Outdoors\n5  Tom      Ocean\n6  Tom      Swamp\n7  Tom     Forest\n</code></pre>\n"}, {"tags": ["python", "optimization", "solver", "gurobi"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 12476198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12cf0f6e5951ec7a8cbc5923234e90c2?s=128&d=identicon&r=PG&f=1", "display_name": "peter_b", "link": "https://stackoverflow.com/users/12476198/peter-b"}, "is_accepted": true, "score": 0, "last_activity_date": 1576762550, "creation_date": 1576762550, "answer_id": 59410889, "question_id": 59399957, "link": "https://stackoverflow.com/questions/59399957/how-to-implement-an-or-logic-in-gurobipy/59410889#59410889", "title": "How to implement an &quot;or&quot; logic in gurobipy", "body": "<p>I could solve it by simply multiplying the binaries in the totals constraint:</p>\n\n<pre><code>model.addConstrs(\n    (gp.quicksum(prices[sup, item]*buys[sup, item] for item in items)\n     == total[sup]*binary_buy[sup] for sup in suppliers), \"TotalFornecedor\" \n    )\n</code></pre>\n\n<p>I hope this helps someone who crosses this problem! Thanks.</p>\n"}], "owner": {"reputation": 11, "user_id": 12476198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12cf0f6e5951ec7a8cbc5923234e90c2?s=128&d=identicon&r=PG&f=1", "display_name": "peter_b", "link": "https://stackoverflow.com/users/12476198/peter-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 59410889, "answer_count": 1, "score": 2, "last_activity_date": 1576762550, "creation_date": 1576703066, "question_id": 59399957, "link": "https://stackoverflow.com/questions/59399957/how-to-implement-an-or-logic-in-gurobipy", "title": "How to implement an &quot;or&quot; logic in gurobipy", "body": "<p>I'm a beginner in gurobipy so I'm trying to understand how to state my problem with it, I have a variable in the model that has to be either zero or greater than a parameter.</p>\n\n<pre><code>#If total is not zero then this constraint has to hold\nmodel.addConstrs(\n    (total[sup] &gt;= mins[sup] for sup in suppliers), \"CheckMin\"\n)\n</code></pre>\n\n<p>I tried creating a binary var for each supplier that had to be True if the total for that supplier was greater than 0, as this:</p>\n\n<pre><code>model.addConstrs(\n(bool(gp.quicksum(total[sup] for sup in suppliers)) == binary_buy[sup]\n  for sup in suppliers), \"BinaryConst\"\n)\n</code></pre>\n\n<p>This is leading to infeasible solution, apparently this second constraint is forcing every <code>binary_buy[sup]</code> to be True, while what I want is for it to be True only when <code>total[sup]</code> is greater than 0. It would be nice if someone could help to state this properly, I also accept suggestions of other solvers in python, thanks!</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 61, "user_id": 12546691, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FgnlO_fWwu0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdxsuv_6RV5Nnh0Owu12jje8PvP0g/photo.jpg?sz=128", "display_name": "prabs", "link": "https://stackoverflow.com/users/12546691/prabs"}, "edited": false, "score": 0, "creation_date": 1576704869, "post_id": 59399939, "comment_id": 104989648, "body": "@moys can you help?"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576714591, "post_id": 59399939, "comment_id": 104992483, "body": "Can you be more specific? Which part isn\u2019t working?"}], "answers": [{"tags": [], "owner": {"reputation": 2127, "user_id": 9377366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885e8773aad4c9408787bfe8329b663f?s=128&d=identicon&r=PG&f=1", "display_name": "fsl", "link": "https://stackoverflow.com/users/9377366/fsl"}, "is_accepted": false, "score": 1, "last_activity_date": 1576706688, "last_edit_date": 1576706688, "creation_date": 1576706354, "answer_id": 59400521, "question_id": 59399939, "link": "https://stackoverflow.com/questions/59399939/how-to-compare-the-sum-score-of-men-to-sum-score-of-women-to-get-the-count-of-co/59400521#59400521", "title": "how to compare the sum score of men to sum score of women to get the count of countries?", "body": "<p>Not sure if you want to leave the ones who are equal or otherwise, but the same logic applies:</p>\n\n<pre><code>group = df.groupby(['country', 'Gender'])['Score'].sum().unstack()\nnot_equal = group[group.M != group.W]\nfiltered_df = df[df.country.isin(not_equal.index)]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   country  Edition     sports               Athletes   Medal Gender  Score  score_sum\n7   France     2010  Athletics  CHOROPHAS, Efstathios    gold      W      3          5\n8   France     2010  Athletics  CHOROPHAS, Efstathios    gold      M      3          4\n9   France     2010       golf          HAJOS, Alfred  Bronze      M      1          4\n10  France     2011       golf       ANDREOU, Joannis  silver      W      2          5\n11   Spain     2011       golf          BURKE, Thomas    gold      M      3          3\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 12546691, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FgnlO_fWwu0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdxsuv_6RV5Nnh0Owu12jje8PvP0g/photo.jpg?sz=128", "display_name": "prabs", "link": "https://stackoverflow.com/users/12546691/prabs"}, "edited": false, "score": 0, "creation_date": 1576707642, "post_id": 59400535, "comment_id": 104990613, "body": "you are awesome! but can we do it using pandas pivot table?"}, {"owner": {"reputation": 298, "user_id": 12392347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I1MjG.jpg?s=128&g=1", "display_name": "Enrique Ortiz Casillas", "link": "https://stackoverflow.com/users/12392347/enrique-ortiz-casillas"}, "reply_to_user": {"reputation": 61, "user_id": 12546691, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FgnlO_fWwu0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdxsuv_6RV5Nnh0Owu12jje8PvP0g/photo.jpg?sz=128", "display_name": "prabs", "link": "https://stackoverflow.com/users/12546691/prabs"}, "edited": false, "score": 0, "creation_date": 1576710385, "post_id": 59400535, "comment_id": 104991479, "body": "Hey! You can do something like this: pivot = pd.pivot_table(df, columns=[&#39;Country&#39;, &#39;Gender&#39;], values = [&#39;Score&#39;],     aggfunc=&#39;sum&#39;).unstack()      print(pivot[pivot.M == pivot.W]) #this will be similar to the past result"}], "tags": [], "owner": {"reputation": 298, "user_id": 12392347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I1MjG.jpg?s=128&g=1", "display_name": "Enrique Ortiz Casillas", "link": "https://stackoverflow.com/users/12392347/enrique-ortiz-casillas"}, "is_accepted": false, "score": 1, "last_activity_date": 1576706440, "creation_date": 1576706440, "answer_id": 59400535, "question_id": 59399939, "link": "https://stackoverflow.com/questions/59399939/how-to-compare-the-sum-score-of-men-to-sum-score-of-women-to-get-the-count-of-co/59400535#59400535", "title": "how to compare the sum score of men to sum score of women to get the count of countries?", "body": "<p>You can do this:</p>\n\n<pre><code>sum_men = df[df['Gender']=='M'].groupby ('Country' )['Score'].sum().reset_index() #watch the reset_index()\nsum_women = df[df['Gender']=='W'].groupby ('Country' )['Score'].sum().reset_index()\nnew_df = sum_men.merge(sum_women, on=\"Country\")\nnew_df['diff'] = new_df['Score_x'] - new_df['Score_y']\nnew_df\n\n   Country  Score_x  Score_y  diff\n0   France        4        5    -1\n1  Germany        5        5     0\n2       US        3        3     0\n\nprint(new_df[new_df['diff']==0])\n\nCountry  Score_x  Score_y  diff\n1  Germany        5        5     0\n2       US        3        3     0\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 12546691, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-FgnlO_fWwu0/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdxsuv_6RV5Nnh0Owu12jje8PvP0g/photo.jpg?sz=128", "display_name": "prabs", "link": "https://stackoverflow.com/users/12546691/prabs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1576706688, "creation_date": 1576702997, "last_edit_date": 1576703309, "question_id": 59399939, "link": "https://stackoverflow.com/questions/59399939/how-to-compare-the-sum-score-of-men-to-sum-score-of-women-to-get-the-count-of-co", "title": "how to compare the sum score of men to sum score of women to get the count of countries?", "body": "<p>Let's say this is my data frame:</p>\n\n<pre><code>country     Edition   sports       Athletes        Medal      Gender   Score\nGermany     1990    Aquatics  HAJOS, Alfred          gold       M        3\nGermany     1990    Aquatics  HIRSCHMANN, Otto       silver     M        2\nGermany     1990    Aquatics  DRIVAS, Dimitrios      gold       W        3\nGermany     1990    Aquatics  DRIVAS, Dimitrios      silver     W        2\nUS          2008    Athletics MALOKINIS, Ioannis     gold       M        1\nUS          2008    Athletics HAJOS, Alfred          silver     M        2\nUS          2009    Athletics CHASAPIS, Spiridon     gold       W        3\nFrance      2010    Athletics CHOROPHAS, Efstathios  gold       W        3\nFrance      2010    Athletics CHOROPHAS, Efstathios  gold       M        3\nFrance      2010    golf      HAJOS, Alfred          Bronze     M        1\nFrance      2011    golf      ANDREOU, Joannis       silver     W        2\nSpain       2011    golf      BURKE, Thomas          gold       M        3\n</code></pre>\n\n<p>I am trying to find for how many countries the sum of men scores is equal to the sum of women scores?\nI have tried the following:</p>\n\n<p><code>sum_men = df[ df ['Gender']=='M'].groupby ( 'country' )[Score ].sum()</code> <br>\n<code>sum_women = df[ df ['Gender']=='W'].groupby ( 'country' )[Score ].sum()</code></p>\n\n<p>Now i don't know how to compare this two and filter out no.of countries who have sum of men scores is equal to the sum of women scores.</p>\n\n<p>can anyone please help me in this?</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 510, "user_id": 12534623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea8fcc0afb09e0f5c3aa986268a5317?s=128&d=identicon&r=PG&f=1", "display_name": "inverzeio", "link": "https://stackoverflow.com/users/12534623/inverzeio"}, "is_accepted": false, "score": 0, "last_activity_date": 1576703182, "creation_date": 1576703182, "answer_id": 59399979, "question_id": 59399903, "link": "https://stackoverflow.com/questions/59399903/how-to-get-the-list-of-available-encode-decode-codecs/59399979#59399979", "title": "How to get the list of available encode/decode codecs?", "body": "<pre><code>help(codecs)\n</code></pre>\n\n<p>list the help for encode() as well.</p>\n\n<p>The following docs page also lists out the supported encodings.\n<a href=\"https://docs.python.org/3/library/codecs.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/codecs.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "is_accepted": false, "score": 1, "last_activity_date": 1576707097, "creation_date": 1576707097, "answer_id": 59400648, "question_id": 59399903, "link": "https://stackoverflow.com/questions/59399903/how-to-get-the-list-of-available-encode-decode-codecs/59400648#59400648", "title": "How to get the list of available encode/decode codecs?", "body": "<p>Not trivial -</p>\n\n<p>For some reason, there is no way to list the codecs from a Python interpreter.</p>\n\n<p>The codecs module allows one to lookup for a registered codec, by using</p>\n\n<pre><code>import codecs\n\ncodecs.lookup(\"codec_name\")\n</code></pre>\n\n<p>But the codec registry is an private list in the interpreter core, that\nis not exposed to Python only code.</p>\n\n<p>The lookup code is at: <a href=\"https://github.com/python/cpython/blob/673c39331f844a80c465efd7cff88ac55c432bfb/Python/codecs.c#L100\" rel=\"nofollow noreferrer\">https://github.com/python/cpython/blob/673c39331f844a80c465efd7cff88ac55c432bfb/Python/codecs.c#L100</a> </p>\n\n<p>Trying to write a C simple function to return a copy of that internal list\nsoon finds out that it is an struct member in the InterpreterState that\nis reserved for internal use, and should not be touched by external code.</p>\n\n<p>So, you can only guess at codec names, and use the \"lookup\" function above.</p>\n"}], "owner": {"reputation": 6192, "user_id": 1497199, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/43eaea281fd5ff0f5b459674e2308015?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1497199/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1576707097, "creation_date": 1576702782, "question_id": 59399903, "link": "https://stackoverflow.com/questions/59399903/how-to-get-the-list-of-available-encode-decode-codecs", "title": "How to get the list of available encode/decode codecs?", "body": "<p>The documentation for <code>open</code> states:</p>\n\n<pre><code>encoding is the name of the encoding used to decode or encode the\nfile. This should only be used in text mode.  The default encoding is\nplatform dependent, but any encoding supported by Python can be\npassed.  See the codecs module for the list of supported encodings.\n</code></pre>\n\n<p>So I <code>import codecs</code> and then what to understand what I can pass in as the <code>encoding</code> parameter to open?</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "edited": false, "score": 0, "creation_date": 1576704012, "post_id": 59399980, "comment_id": 104989309, "body": "thanks! is there any way to get a list of the indices where the statement is true?"}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "reply_to_user": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "edited": false, "score": 0, "creation_date": 1576704038, "post_id": 59399980, "comment_id": 104989317, "body": "Could you explain why&#39;d you want that? Do you want to return these rows which are <code>True</code>?"}, {"owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "edited": false, "score": 0, "creation_date": 1576704310, "post_id": 59399980, "comment_id": 104989410, "body": "the code is used to detect crossing points in financial data; at that stage, it leaves the Pandas world since actions need to be taken for each of these events, with the index/timestamp as a parameter"}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "reply_to_user": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "edited": false, "score": 0, "creation_date": 1576704492, "post_id": 59399980, "comment_id": 104989497, "body": "I see, added it to my answer. But I barely have to return a list of indices when using pandas. The solution you have in your head probably has a better approach, but that&#39;s outside the scope of this question for now. Glad I could help and good luck @Thomas"}], "tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": true, "score": 2, "last_activity_date": 1576704420, "last_edit_date": 1576704420, "creation_date": 1576703187, "answer_id": 59399980, "question_id": 59399896, "link": "https://stackoverflow.com/questions/59399896/detecting-value-crossing-between-columns-in-pandas/59399980#59399980", "title": "detecting value crossing between columns in Pandas", "body": "<p>You can use the <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.shift.html\" rel=\"nofollow noreferrer\"><code>Series.shift</code></a> with <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.lt.html\" rel=\"nofollow noreferrer\"><code>Series.lt</code></a> which is <em>\"less than\"</em>, same as <code>&lt;</code> and <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.ge.html\" rel=\"nofollow noreferrer\"><code>Series.ge</code></a> which is \"greater than or equal\" and is same as <code>&gt;=</code>:</p>\n\n<pre><code>mask = df['a'].shift().lt(df['b']) &amp; df['a'].ge(df['b'])\n# same as (df['A'].shift() &lt; df['b']) &amp; (df['a'] &gt;= df['b'])\n\n0    False\n1    False\n2    False\n3    False\n4     True\ndtype: bool\n</code></pre>\n\n<p>Notice, we don't have to specify <code>astype(bool)</code>, pandas works with <a href=\"https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html\" rel=\"nofollow noreferrer\"><code>boolean indexing</code></a> and returns <code>booleans</code> when defining conditions.</p>\n\n<hr>\n\n<p>To get the <code>indices</code> of the rows with <code>True</code>, use:</p>\n\n<pre><code>idx = df[mask].index.tolist()\n\nprint(idx)\n[4]\n</code></pre>\n"}], "owner": {"reputation": 7660, "user_id": 695498, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/ee7dba0113ba15076c79d0e9043d7718?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/695498/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 107, "favorite_count": 0, "accepted_answer_id": 59399980, "answer_count": 1, "score": 2, "last_activity_date": 1576704420, "creation_date": 1576702750, "question_id": 59399896, "link": "https://stackoverflow.com/questions/59399896/detecting-value-crossing-between-columns-in-pandas", "title": "detecting value crossing between columns in Pandas", "body": "<p>Let's say I have the following dataframe:</p>\n\n<pre><code>df = pd.DataFrame({'a': [10, 20, 30, 40, 50], 'b': [0, 10, 40, 45, 50]}, columns = ['a', 'b'])\n</code></pre>\n\n<p>I would like to make a list of indices where:</p>\n\n<blockquote>\n  <p>a [i - 1] &lt; b[i] and a[i] >= b[i]</p>\n</blockquote>\n\n<p>in order to detect when a value, in a timeseries, is crossing another one</p>\n\n<p>is there a Pandas idiomatic way to achieve this without iterating through all the elements?</p>\n\n<p>I tried to create a new column with flags to indicate a crossing by doing this:</p>\n\n<pre><code>df['t'] = (df['a'].shift(1).values &lt; df['b'].values and di['a'].values &gt;= df['b']).astype(bool)\n</code></pre>\n\n<p>but that won't compile. I'm not sure how to approach this problem, short of doing a loop through all the elements.</p>\n"}, {"tags": ["python", "finance", "algorithmic-trading"], "comments": [{"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576714807, "post_id": 59399889, "comment_id": 104992518, "body": "Wouldn\u2019t this be better suited to the Statistics Stack Exchange?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3666197, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79fc6c23061326c7e6a6f82a1663634b?s=128&d=identicon&r=PG", "display_name": "user3666197", "link": "https://stackoverflow.com/users/3666197/user3666197"}, "is_accepted": false, "score": 1, "last_activity_date": 1576771934, "creation_date": 1576771934, "answer_id": 59413359, "question_id": 59399889, "link": "https://stackoverflow.com/questions/59399889/understanding-the-generalized-formula-of-the-hurst-exponent-in-python/59413359#59413359", "title": "Understanding the generalized formula of the Hurst Exponent in Python", "body": "<blockquote>\n  <p><strong>Q</strong> : <em>how many observations do I need to set up that lags range?</em></p>\n</blockquote>\n\n<p>Given a 200-bars lag is wanted, it makes indeed no sense to have less than 200-bars of observations.</p>\n\n<blockquote>\n  <p><strong>Q</strong> : <em>if I set up the lags range in 10 and 80, does that mean that the autocorrelation will be calculated between the 10 and 80 observations in a time series?</em></p>\n</blockquote>\n\n<p>Absolutely. This is how Hurst works.</p>\n\n<p>See a function implementation, taken from QuantFX module, as-is v.4.13 ( Py2.7 will not make troubles in most places, yet any xrange() ought be replaced with range() in Py3.x ):</p>\n\n<pre><code>def HurstEXP( ts = [ None, ] ):                                         # TESTED: HurstEXP()                Hurst exponent ( Browninan Motion &amp; other observations measure ) 100+ BARs back(!)\n            \"\"\"                                                         __doc__\n            USAGE:\n                        HurstEXP( ts = [ None, ] )\n\n                        Returns the Hurst Exponent of the time series vector ts[]\n\n            PARAMETERS:\n                        ts[,]   a time-series, with 100+ elements\n                                ( or [ None, ] that produces a demo run )\n\n            RETURNS:\n                        float - a Hurst Exponent approximation,\n                                as a real value\n                                or\n                                an explanatory string on an empty call\n            THROWS:\n                        n/a\n            EXAMPLE:\n                        &gt;&gt;&gt; HurstEXP()                                        # actual numbers will vary, as per np.random.randn() generator used\n                        HurstEXP( Geometric Browian Motion ):    0.49447454\n                        HurstEXP(    Mean-Reverting Series ):   -0.00016013\n                        HurstEXP(          Trending Series ):    0.95748937\n                        'SYNTH series demo ( on HurstEXP( ts == [ None, ] ) ) # actual numbers vary, as per np.random.randn() generator'\n\n                        &gt;&gt;&gt; HurstEXP( rolling_window( aDSEG[:,idxC], 100 ) )\n            REF.s:\n                        &gt;&gt;&gt; www.quantstart.com/articles/Basics-of-Statistical-Mean-Reversion-Testing\n            \"\"\"\n            #---------------------------------------------------------------------------------------------------------------------------&lt;self-reflective&gt;\n            if ( ts[0] == None ):                                       # DEMO: Create a SYNTH Geometric Brownian Motion, Mean-Reverting and Trending Series:\n\n                 gbm = np.log( 1000 + np.cumsum(     np.random.randn( 100000 ) ) )  # a Geometric Brownian Motion[log(1000 + rand), log(1000 + rand + rand ), log(1000 + rand + rand + rand ),... log(  1000 + rand + ... )]\n                 mr  = np.log( 1000 +                np.random.randn( 100000 )   )  # a Mean-Reverting Series    [log(1000 + rand), log(1000 + rand        ), log(1000 + rand               ),... log(  1000 + rand       )]\n                 tr  = np.log( 1000 + np.cumsum( 1 + np.random.randn( 100000 ) ) )  # a Trending Series          [log(1001 + rand), log(1002 + rand + rand ), log(1003 + rand + rand + rand ),... log(101000 + rand + ... )]\n\n                                                                        # Output the Hurst Exponent for each of the above SYNTH series\n                 print ( \"HurstEXP( Geometric Browian Motion ):   {0: &gt; 12.8f}\".format( HurstEXP( gbm ) ) )\n                 print ( \"HurstEXP(    Mean-Reverting Series ):   {0: &gt; 12.8f}\".format( HurstEXP( mr  ) ) )\n                 print ( \"HurstEXP(          Trending Series ):   {0: &gt; 12.8f}\".format( HurstEXP( tr  ) ) )\n\n                 return ( \"SYNTH series demo ( on HurstEXP( ts == [ None, ] ) ) # actual numbers vary, as per np.random.randn() generator\" )\n            \"\"\"                                                         # FIX:\n            ===================================================================================================================\n            |\n            |&gt;&gt;&gt; QuantFX.HurstEXP( QuantFX.DATA[ :1000,QuantFX.idxH].tolist() )\n            0.47537688039105963\n            |\n            |&gt;&gt;&gt; QuantFX.HurstEXP( QuantFX.DATA[ :101,QuantFX.idxH].tolist() )\n            -0.31081076640420308\n            |\n            |&gt;&gt;&gt; QuantFX.HurstEXP( QuantFX.DATA[ :100,QuantFX.idxH].tolist() )\n            nan\n            |\n            |&gt;&gt;&gt; QuantFX.HurstEXP( QuantFX.DATA[ :99,QuantFX.idxH].tolist() )\n\n            Intel MKL ERROR: Parameter 6 was incorrect on entry to DGELSD.\n            C:\\Python27.anaconda\\lib\\site-packages\\numpy\\lib\\polynomial.py:594: RankWarning: Polyfit may be poorly conditioned\n            warnings.warn(msg, RankWarning)\n            0.026867491053098096\n            \"\"\"\n            pass;     too_short_list = 101 - len( ts )                  # MUST HAVE 101+ ELEMENTS\n            if ( 0 &lt;  too_short_list ):                                 # IF NOT:\n                 ts = too_short_list * ts[:1] + ts                      #    PRE-PEND SUFFICIENT NUMBER of [ts[0],]-as-list REPLICAS TO THE LIST-HEAD\n            #---------------------------------------------------------------------------------------------------------------------------\n            lags = range( 2, 100 )                                                              # Create the range of lag values\n            tau  = [ np.sqrt( np.std( np.subtract( ts[lag:], ts[:-lag] ) ) ) for lag in lags ]  # Calculate the array of the variances of the lagged differences\n            #oly = np.polyfit( np.log( lags ), np.log( tau ), 1 )                               # Use a linear fit to estimate the Hurst Exponent\n            #eturn ( 2.0 * poly[0] )                                                            # Return the Hurst exponent from the polyfit output\n            \"\"\" ********************************************************************************************************************************************************************* DONE:[MS]:ISSUE / FIXED ABOVE\n            |&gt;&gt;&gt; QuantFX.HurstEXP( QuantFX.DATA[ : QuantFX.aMinPTR,QuantFX.idxH] )\n            C:\\Python27.anaconda\\lib\\site-packages\\numpy\\core\\_methods.py:82: RuntimeWarning: Degrees of freedom &lt;= 0 for slice\n              warnings.warn(\"Degrees of freedom &lt;= 0 for slice\", RuntimeWarning)\n            C:\\Python27.anaconda\\lib\\site-packages\\numpy\\core\\_methods.py:94: RuntimeWarning: invalid value encountered in true_divide\n              arrmean, rcount, out=arrmean, casting='unsafe', subok=False)\n            C:\\Python27.anaconda\\lib\\site-packages\\numpy\\core\\_methods.py:114: RuntimeWarning: invalid value encountered in true_divide\n              ret, rcount, out=ret, casting='unsafe', subok=False)\n            QuantFX.py:23034: RuntimeWarning: divide by zero encountered in log\n              return ( 2.0 * np.polyfit( np.log( lags ), np.log( tau ), 1 )[0] )                  # Return the Hurst exponent from the polyfit output ( a linear fit to estimate the Hurst Exponent )\n\n            Intel MKL ERROR: Parameter 6 was incorrect on entry to DGELSD.\n            C:\\Python27.anaconda\\lib\\site-packages\\numpy\\lib\\polynomial.py:594: RankWarning: Polyfit may be poorly conditioned\n              warnings.warn(msg, RankWarning)\n            0.028471879418359915\n            |\n            |\n            |# DATA:\n            |\n            |&gt;&gt;&gt; QuantFX.DATA[ : QuantFX.aMinPTR,QuantFX.idxH]\n            memmap([ 1763.31005859,  1765.01000977,  1765.44995117,  1764.80004883,\n                     1765.83996582,  1768.91003418,  1771.04003906,  1769.43994141,\n                     1771.4699707 ,  1771.61999512,  1774.76000977,  1769.55004883,\n                     1773.4699707 ,  1773.32995605,  1770.08996582,  1770.20996094,\n                     1768.34997559,  1768.02001953,  1767.59997559,  1767.23999023,\n                     1768.41003418,  1769.06994629,  1769.56994629,  1770.7800293 ,\n                     1770.56994629,  1769.7800293 ,  1769.90002441,  1770.44995117,\n                     1770.9699707 ,  1771.04003906,  1771.16003418,  1769.81005859,\n                     1768.76000977,  1769.39001465,  1773.23999023,  1771.91003418,\n                     1766.92004395,  1765.56994629,  1762.65002441,  1760.18005371,\n                     1755.        ,  1756.67004395,  1753.48999023,  1753.7199707 ,\n                     1751.92004395,  1745.44995117,  1745.44995117,  1744.54003906,\n                     1744.54003906,  1744.84997559,  1744.84997559,  1744.34997559,\n                     1744.34997559,  1743.75      ,  1743.75      ,  1745.23999023,\n                     1745.23999023,  1745.15002441,  1745.31005859,  1745.47998047,\n                     1745.47998047,  1749.06994629,  1749.06994629,  1748.29003906,\n                     1748.29003906,  1747.42004395,  1747.42004395,  1746.98999023,\n                     1747.61999512,  1748.79003906,  1748.79003906,  1748.38000488,\n                     1748.38000488,  1744.81005859,  1744.81005859,  1736.80004883,\n                     1736.80004883,  1735.43005371,  1735.43005371,  1737.9699707\n                     ], dtype=float32\n                    )\n            |\n            |\n            | # CONVERTED .tolist() to avoid .memmap-type artifacts:\n            |\n            |&gt;&gt;&gt; QuantFX.DATA[ : QuantFX.aMinPTR,QuantFX.idxH].tolist()\n            [1763.31005859375, 1765.010009765625, 1765.449951171875, 1764.800048828125, 1765.8399658203125, 1768.9100341796875, 1771.0400390625, 1769.43994140625, 1771.469970703125, 1771.6199951171875, 1774.760\n            859375, 1743.75, 1743.75, 1745.239990234375, 1745.239990234375, 1745.1500244140625, 1745.31005859375, 1745.47998046875, 1745.47998046875, 1749.0699462890625, 1749.0699462890625, 1748.2900390625, 174\n            |\n            |&gt;&gt;&gt; QuantFX.HurstEXP( QuantFX.DATA[ : QuantFX.aMinPTR,QuantFX.idxH].tolist() )\n            C:\\Python27.anaconda\\lib\\site-packages\\numpy\\core\\_methods.py:116: RuntimeWarning: invalid value encountered in double_scalars\n              ret = ret.dtype.type(ret / rcount)\n\n            Intel MKL ERROR: Parameter 6 was incorrect on entry to DGELSD.\n            C:\\Python27.anaconda\\lib\\site-packages\\numpy\\lib\\polynomial.py:594: RankWarning: Polyfit may be poorly conditioned\n              warnings.warn(msg, RankWarning)\n            0.028471876494884543\n            ===================================================================================================================\n            |\n            |&gt;&gt;&gt; QuantFX.HurstEXP( QuantFX.DATA[ :1000,QuantFX.idxH].tolist() )\n            0.47537688039105963\n            |\n            |&gt;&gt;&gt; QuantFX.HurstEXP( QuantFX.DATA[ :101,QuantFX.idxH].tolist() )\n            -0.31081076640420308\n            |\n            |&gt;&gt;&gt; QuantFX.HurstEXP( QuantFX.DATA[ :100,QuantFX.idxH].tolist() )\n            nan\n            |\n            |&gt;&gt;&gt; QuantFX.HurstEXP( QuantFX.DATA[ :99,QuantFX.idxH].tolist() )\n\n            Intel MKL ERROR: Parameter 6 was incorrect on entry to DGELSD.\n            C:\\Python27.anaconda\\lib\\site-packages\\numpy\\lib\\polynomial.py:594: RankWarning: Polyfit may be poorly conditioned\n            warnings.warn(msg, RankWarning)\n            0.026867491053098096\n            \"\"\"\n            return ( 2.0 * np.polyfit( np.log( lags ), np.log( tau ), 1 )[0] )\n</code></pre>\n\n<p>Detailed post and discussion about properties is <a href=\"https://stackoverflow.com/a/57098453\">here</a></p>\n"}], "owner": {"reputation": 153, "user_id": 11781149, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee9d31fb871c6851c215eebe1d2b7b32?s=128&d=identicon&r=PG&f=1", "display_name": "Martingale", "link": "https://stackoverflow.com/users/11781149/martingale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 412, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1576771934, "creation_date": 1576702709, "question_id": 59399889, "link": "https://stackoverflow.com/questions/59399889/understanding-the-generalized-formula-of-the-hurst-exponent-in-python", "title": "Understanding the generalized formula of the Hurst Exponent in Python", "body": "<p>I apologize if my question is not very concise. I am trying to understand the generalized formula to estimate the Hurst Exponent published in QuantStart: </p>\n\n<p><a href=\"https://www.quantstart.com/articles/Basics-of-Statistical-Mean-Reversion-Testing\" rel=\"nofollow noreferrer\">https://www.quantstart.com/articles/Basics-of-Statistical-Mean-Reversion-Testing</a></p>\n\n<p>This is the code:</p>\n\n<pre><code>from numpy import cumsum, log, polyfit, sqrt, std, subtract\nfrom numpy.random import randn\ndef hurst(ts):\n    lags = range(10,80)\n    tau = [sqrt(std(subtract(ts[lag:], ts[:-lag]))) for lag in lags]\n    poly = polyfit(log(lags), log(tau), 1)\n    return poly[0]*2.0\nprint ('&gt; Hurst Exponent:', '%.6s' % hurst(df['Close']))\n</code></pre>\n\n<p>I\u2019ve applied this code and it worked. But I don\u2019t understand very well how this formula exactly works. I have doubts especially with the lags. I\u2019d be very grateful if someone could give me some information to understand this part of the formula.  </p>\n\n<p>For example, if I set up the lags range in 10 and 80, does that mean that the autocorrelation will be calculated between the 10 and 80 observations in a time series?  </p>\n\n<p>And another important question, how many observations do I need to set up that lags range? Should I have at least 80 observations? </p>\n\n<p>As I mentioned before I\u2019d be very grateful if someone would be so kind as to shed some light on it. I would appreciate it very much.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "apache-kafka"], "answers": [{"comments": [{"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "edited": false, "score": 0, "creation_date": 1576712680, "post_id": 59401502, "comment_id": 104992032, "body": "Also: Structured Streaming is generally preffered"}, {"owner": {"reputation": 11, "user_id": 7887856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a8206561d5e63ba585f43ca79f62b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/7887856/julius"}, "edited": false, "score": 0, "creation_date": 1576716764, "post_id": 59401502, "comment_id": 104992890, "body": "I didn&#39;t quite get where to which parameter of createStream to add this string. I have been setting kafka for the first time and I followed up <a href=\"https://www.rittmanmead.com/blog/2017/01/getting-started-with-spark-streaming-with-python-and-kafka/\" rel=\"nofollow noreferrer\">rittmanmead.com/blog/2017/01/&hellip;</a>."}, {"owner": {"reputation": 11, "user_id": 7887856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a8206561d5e63ba585f43ca79f62b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/7887856/julius"}, "edited": false, "score": 0, "creation_date": 1576717781, "post_id": 59401502, "comment_id": 104993087, "body": "Also, I added new message in the topic after creating kafkaStream and then did <code>kafkaStream.pprint()</code> but it still prints nothing"}, {"owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "reply_to_user": {"reputation": 11, "user_id": 7887856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a8206561d5e63ba585f43ca79f62b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/7887856/julius"}, "edited": false, "score": 0, "creation_date": 1576731972, "post_id": 59401502, "comment_id": 104995654, "body": "You&#39;re just printing the stream object, not starting consuming. You&#39;re missing <code>ssc.start()</code> and      <code>ssc.awaitTermination()</code>... And if you refer to the official documentation, it says where to place the property I mentioned"}], "tags": [], "owner": {"reputation": 124932, "user_id": 2308683, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/eac16c9fc481cb6825f8b3a35f916b5c?s=128&d=identicon&r=PG", "display_name": "OneCricketeer", "link": "https://stackoverflow.com/users/2308683/onecricketeer"}, "is_accepted": false, "score": 0, "last_activity_date": 1576732228, "last_edit_date": 1576732228, "creation_date": 1576712643, "answer_id": 59401502, "question_id": 59399885, "link": "https://stackoverflow.com/questions/59399885/not-able-to-connect-to-kafka-topic-using-spark-streaming-python-jupyter/59401502#59401502", "title": "Not able to connect to kafka topic using spark streaming (python, jupyter)", "body": "<p>It's not clear if you are sending any data., but you're not actually starting consumption </p>\n\n<p>You'll need this at the end </p>\n\n<pre><code>ssc.start() \nssc.awaitTermination() \n</code></pre>\n\n<p>You need to add <code>auto.offset.reset\" : \"smallest\"</code> in the <code>createStream</code> properties to read existing topic data.</p>\n\n<pre><code>from pyspark.streaming.kafka import KafkaUtils\n\ndirectKafkaStream = KafkaUtils.createDirectStream(ssc, [topic], {\"bootstrap-servers\": brokers, \"auto.offset.reset\" : \"smallest\"})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 9599091, "user_type": "registered", "profile_image": "https://graph.facebook.com/1610249552356449/picture?type=large", "display_name": "Karthikeyan Rasipalay Durairaj", "link": "https://stackoverflow.com/users/9599091/karthikeyan-rasipalay-durairaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1577378045, "creation_date": 1577378045, "answer_id": 59491023, "question_id": 59399885, "link": "https://stackoverflow.com/questions/59399885/not-able-to-connect-to-kafka-topic-using-spark-streaming-python-jupyter/59491023#59491023", "title": "Not able to connect to kafka topic using spark streaming (python, jupyter)", "body": "<p>As cricket_007 mentioned Structured Streaming is generally preferred. If you still want to handle it with directStream  method sample as in below .</p>\n\n<p><strong>Note</strong> : Trying to read the message from topic 'topicname' and rewriting into another topic called 'compacttopic'</p>\n\n<pre><code>from pyspark import SparkConf, SparkContext\nfrom operator import add\nimport sys\nfrom pyspark.streaming import StreamingContext\nfrom pyspark.streaming.kafka import KafkaUtils\nimport json\nfrom kafka import SimpleProducer, KafkaClient\nfrom kafka import KafkaProducer\n\nproducer = KafkaProducer(bootstrap_servers='localhost:9092')\n\ndef handler(message):\n    records = message.collect()\n    for record in records:\n        value_all=record[1]\n        value_spt=value_all.split('|')\n        value_key=value_spt[0]\n        print (value_key)\n        producer.send('compacttopic', key=str(value_key),value=str(record[1]))\n        producer.flush()\n\ndef main():\n    sc = SparkContext(appName=\"PythonStreamingDirectKafkaWordCount\")\n    ssc = StreamingContext(sc, 10)\n\n    brokers, topic = sys.argv[1:]\n    kvs = KafkaUtils.createDirectStream(ssc, ['topicname'], {\"metadata.broker.list\": 'localhost:9092'})\n    kvs.foreachRDD(handler)\n\n    ssc.start()\n    ssc.awaitTermination()\nif __name__ == \"__main__\":\n\n   main()\n</code></pre>\n\n<p><strong>spark-submit command :</strong> </p>\n\n<pre><code> ./bin/spark-submit --jars /Users/KarthikeyanDurairaj/jarfiles/spark-streaming-kafka-0-8-assembly_2.11-2.3.1.jar topictotopic.py localhost:9092 topicname\n</code></pre>\n\n<p><strong>Note</strong> : Adjust the jar version based on your spark installed version . </p>\n\n<p><strong>Structured Streaming Approach :</strong> </p>\n\n<p>You can refer the below stack overflow link for pyspark based Structured Streaming.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/58755063/failed-to-find-leader-for-topics-java-lang-nullpointerexception-nullpointerexce/58860695#58860695\">Failed to find leader for topics; java.lang.NullPointerException NullPointerException at org.apache.kafka.common.utils.Utils.formatAddress</a></p>\n"}], "owner": {"reputation": 11, "user_id": 7887856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a8206561d5e63ba585f43ca79f62b4f?s=128&d=identicon&r=PG&f=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/7887856/julius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 216, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1577378045, "creation_date": 1576702682, "last_edit_date": 1576716513, "question_id": 59399885, "link": "https://stackoverflow.com/questions/59399885/not-able-to-connect-to-kafka-topic-using-spark-streaming-python-jupyter", "title": "Not able to connect to kafka topic using spark streaming (python, jupyter)", "body": "<p>I tried to connect to kafka topic using spark. It's not reading any data in its dstream or giving any error.\nHere is my jupyter code:</p>\n\n<pre><code>import os\nos.environ['PYSPARK_SUBMIT_ARGS'] = '--packages org.apache.spark:spark-streaming-kafka-0-8_2.11:2.0.2 pyspark-shell'\nfrom pretty import pprint\nfrom pyspark import SparkContext\nfrom pyspark.streaming import StreamingContext\nfrom pyspark.streaming.kafka import KafkaUtils\nimport json\n\nsc = SparkContext(appName=\"PythonSparkStreamingKafka_RM_01\")\nsc.setLogLevel(\"WARN\")\nssc = StreamingContext(sc, 60)\n\nkafkaStream = KafkaUtils.createStream(ssc, 'localhost:2181', 'spark-streaming', {'topic_name':1})\nkafkaStream.pprint()\n</code></pre>\n\n<p>Nothing gets printed. Also tried with createDirectStream but didn't get any output. Followed <a href=\"https://stackoverflow.com/questions/54455093/spark-streaming-not-reading-from-kafka-topics\">Spark Streaming not reading from Kafka topics</a> and added PYTHONPATH but it didn't help either.</p>\n\n<p>Any help would be deeply appreciated. Thanks!</p>\n"}, {"tags": ["python", "keras"], "answers": [{"tags": [], "owner": {"reputation": 582, "user_id": 12485858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0293380964c0d2e827faa71680773dd?s=128&d=identicon&r=PG&f=1", "display_name": "t_e_o", "link": "https://stackoverflow.com/users/12485858/t-e-o"}, "is_accepted": false, "score": 0, "last_activity_date": 1576708293, "last_edit_date": 1576708293, "creation_date": 1576704885, "answer_id": 59400286, "question_id": 59399878, "link": "https://stackoverflow.com/questions/59399878/does-order-of-the-traning-data-matter-when-building-a-cnn-model/59400286#59400286", "title": "Does order of the traning data matter when building a CNN model?", "body": "<p>Shuffling the data when training a neural network in batches might be crucial for the performance of your model. A more detailed discussion on this topic is presented <a href=\"https://datascience.stackexchange.com/questions/24511/why-should-the-data-be-shuffled-for-machine-learning-tasks\">here</a> on the data science stackexchange.\nI just want to add that shuffling is in general beneficial for the evaluation of your model when you do cross validation, for example. In each train-test folds you want to have random samples, so that you can be sure that your model can generalize well.</p>\n"}, {"tags": [], "owner": {"reputation": 422, "user_id": 10852215, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dbdc0e7ced72cbf41b34036876b03d1a?s=128&d=identicon&r=PG&f=1", "display_name": "learningthemachine", "link": "https://stackoverflow.com/users/10852215/learningthemachine"}, "is_accepted": false, "score": 0, "last_activity_date": 1576707250, "creation_date": 1576707250, "answer_id": 59400682, "question_id": 59399878, "link": "https://stackoverflow.com/questions/59399878/does-order-of-the-traning-data-matter-when-building-a-cnn-model/59400682#59400682", "title": "Does order of the traning data matter when building a CNN model?", "body": "<p>Theoretically for the last epoch, if the last half of the samples were only positive your model might have a slight bias for the positive. However this is why Keras' fit() function has a shuffle feature so it shuffles training samples for every epoch to ensure there is no bias and your model gets to train on different batches get a look at your problem from many different angles. Unless you have a reason to believe you should not be doing this i'd definitely recommend it.</p>\n"}], "owner": {"reputation": 1523, "user_id": 1228906, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/ed86bc1b6ad01727b1ffe781c5946966?s=128&d=identicon&r=PG", "display_name": "webber", "link": "https://stackoverflow.com/users/1228906/webber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 155, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1576708293, "creation_date": 1576702649, "question_id": 59399878, "link": "https://stackoverflow.com/questions/59399878/does-order-of-the-traning-data-matter-when-building-a-cnn-model", "title": "Does order of the traning data matter when building a CNN model?", "body": "<p>I'm reviewing the Keras CNN example located <a href=\"https://keras.io/examples/imdb_cnn/\" rel=\"nofollow noreferrer\">here</a> and i see that the input data has the positive and negative sentiment training samples randomly shuffled. I was wondering if the CNN is sensitive to the ordering of the training data. </p>\n\n<p>For clarity: if my y_train was of shape 100x1, in which 0-50 where all positive sentiments and 50-100 were negative sentiments, would the results be any different compared to when every even index has positive sentiment and odd index has negative?</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "webdriverwait", "expected-condition"], "comments": [{"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 3, "creation_date": 1576702590, "post_id": 59399852, "comment_id": 104988817, "body": "That line contains three function calls, so I&#39;d start by splitting those three across separate lines, to see which one is the problem."}, {"owner": {"reputation": 26796, "user_id": 4834, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/6a04e124482c3750617f8dacde3388ce?s=128&d=identicon&r=PG", "display_name": "quamrana", "link": "https://stackoverflow.com/users/4834/quamrana"}, "edited": false, "score": 1, "creation_date": 1576703692, "post_id": 59399852, "comment_id": 104989197, "body": "From the documentation <code>element_to_be_clickable()</code> takes  a single parameter of what looks like a <code>tuple</code>. Try: <code>wait.until(EC.element_to_be_clickable((By.ID,&#39;RptViewer_ctl0&zwnj;&#8203;9_ctl04_ctl00_Button&zwnj;&#8203;Link&#39;)))</code>  Note: <code>(By.ID,&#39;Rpt ...</code>"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 10170100, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YffhCqF98r4/AAAAAAAAAAI/AAAAAAAAAQQ/IjMTylIbyv4/photo.jpg?sz=128", "display_name": "Hubert Tarnacki", "link": "https://stackoverflow.com/users/10170100/hubert-tarnacki"}, "is_accepted": false, "score": 0, "last_activity_date": 1576708334, "creation_date": 1576708334, "answer_id": 59400884, "question_id": 59399852, "link": "https://stackoverflow.com/questions/59399852/typeerror-str-object-is-not-callable-passing-locator-within-expected-condit/59400884#59400884", "title": "&quot;TypeError: &#39;str&#39; object is not callable&quot; passing locator within expected_conditions through Python + Selenium", "body": "<p>By.ID is a string. Not callable. Expected condition takes locator in a form of a tuple (as quamrana already suggested)</p>\n"}, {"tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 0, "last_activity_date": 1576712079, "creation_date": 1576712079, "answer_id": 59401436, "question_id": 59399852, "link": "https://stackoverflow.com/questions/59399852/typeerror-str-object-is-not-callable-passing-locator-within-expected-condit/59401436#59401436", "title": "&quot;TypeError: &#39;str&#39; object is not callable&quot; passing locator within expected_conditions through Python + Selenium", "body": "<p>While using <a href=\"https://seleniumhq.github.io/selenium/docs/api/py/webdriver_support/selenium.webdriver.support.wait.html#module-selenium.webdriver.support.wait\" rel=\"nofollow noreferrer\">WebDriverWait</a> inconjunction with <a href=\"https://seleniumhq.github.io/selenium/docs/api/py/webdriver_support/selenium.webdriver.support.expected_conditions.html#module-selenium.webdriver.support.expected_conditions\" rel=\"nofollow noreferrer\">expected_conditions</a> you have to enclose the locator with in a tuple as follows:</p>\n\n<pre><code>WebDriverWait(driver, 20).until(EC.element_to_be_clickable((By.ID, \"RptViewer_ctl09_ctl04_ctl00_ButtonLink\")))\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 12527464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/111fa8d6a8dd3704d34d98f6dcfe7a98?s=128&d=identicon&r=PG&f=1", "display_name": "ETLien", "link": "https://stackoverflow.com/users/12527464/etlien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 189, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1576712079, "creation_date": 1576702511, "last_edit_date": 1576712033, "question_id": 59399852, "link": "https://stackoverflow.com/questions/59399852/typeerror-str-object-is-not-callable-passing-locator-within-expected-condit", "title": "&quot;TypeError: &#39;str&#39; object is not callable&quot; passing locator within expected_conditions through Python + Selenium", "body": "<p>I'm receiving the following error:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):   File \"[redacted]\", line 69, in\n  \n      wait.until(EC.element_to_be_clickable(By.ID(\"RptViewer_ctl09_ctl04_ctl00_ButtonLink\")))\n  TypeError: 'str' object is not callable</p>\n</blockquote>\n\n<p>Here's the section of code I believe is causing the problem:</p>\n\n<pre><code>66   browser.find_element_by_id('RptViewer_ctl09_ctl04_ctl00_ButtonLink')\n67   drp = browser.find_element_by_id('RptViewer_ctl09_ctl04_ctl00_ButtonLink')\n68   wait = WebDriverWait(browser, 10)\n69   wait.until(EC.element_to_be_clickable(By.ID('RptViewer_ctl09_ctl04_ctl00_ButtonLink')))\n70   drp.click()\n</code></pre>\n\n<p>I think what's causing the issue is the \"ID('RptViewer_ctl09_ctl04_ctl00_ButtonLink')\" section but I'm not sure if that's true and I'm not sure of how to fix it. Any guidance is extremely appreciated.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "gis", "python-2.x", "raster"], "comments": [{"owner": {"reputation": 3997, "user_id": 401226, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c07266a320e66c7c220bd8c01759646d?s=128&d=identicon&r=PG", "display_name": "Tim Richardson", "link": "https://stackoverflow.com/users/401226/tim-richardson"}, "edited": false, "score": 1, "creation_date": 1576702758, "post_id": 59399844, "comment_id": 104988881, "body": "functions don&#39;t normally have attributes, so band1 is not what you think it is. As a wild guess, what happens if you do band1 = ds.GetRasterBand(1).ReadAsArray()  {note parentheses at the end}"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 12362962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f47e156df0e4052c2afcf07840628ccf?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/12362962/richard"}, "edited": false, "score": 0, "creation_date": 1576779664, "post_id": 59400010, "comment_id": 105017467, "body": "Thank you so much! I need a big post it note on my computer that says DONT FORGET YOUR PARENTHESES."}], "tags": [], "owner": {"reputation": 3997, "user_id": 401226, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c07266a320e66c7c220bd8c01759646d?s=128&d=identicon&r=PG", "display_name": "Tim Richardson", "link": "https://stackoverflow.com/users/401226/tim-richardson"}, "is_accepted": true, "score": 1, "last_activity_date": 1580368609, "last_edit_date": 1580368609, "creation_date": 1576703354, "answer_id": 59400010, "question_id": 59399844, "link": "https://stackoverflow.com/questions/59399844/attribute-error-function-object-has-no-attribute-datatype/59400010#59400010", "title": "Attribute Error &#39;function&#39; object has no attribute &#39;DataType&#39;", "body": "<p>I think try</p>\n\n<pre><code>band1 = ds.GetRasterBand(1).ReadAsArray()\n</code></pre>\n\n<p>with parentheses at the end.</p>\n\n<p>The parentheses is python syntax to call the function and get the result.\nWithout the parentheses, you have made <code>band1</code> a synonym for the <code>ReadAsArray</code> function.\nThis can be helpful in other circumstances, you could do</p>\n\n<pre><code> band1 = ds.GetRasterBand(1).ReadAsArray    \n x = band1() \n</code></pre>\n\n<p>which calls <code>ReadAsArray</code></p>\n\n<p>but it is not what you wanted to do</p>\n"}], "owner": {"reputation": 73, "user_id": 12362962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f47e156df0e4052c2afcf07840628ccf?s=128&d=identicon&r=PG&f=1", "display_name": "Richard", "link": "https://stackoverflow.com/users/12362962/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2753, "favorite_count": 0, "accepted_answer_id": 59400010, "answer_count": 1, "score": 0, "last_activity_date": 1580368609, "creation_date": 1576702451, "question_id": 59399844, "link": "https://stackoverflow.com/questions/59399844/attribute-error-function-object-has-no-attribute-datatype", "title": "Attribute Error &#39;function&#39; object has no attribute &#39;DataType&#39;", "body": "<p>I am thinking this is an easy fix and likely due to me being meh at python.</p>\n\n<p>What I am trying to do is take this 4 banded <a href=\"https://drive.google.com/file/d/1xeoY_LL3tVouSES6SlORjJsz_WFk9JA0/view?usp=sharing\" rel=\"nofollow noreferrer\">NAIP</a> and create a 432 false color image. Ultimately to create a script that will run through hundreds of these images to do so, but that is clearly far off. </p>\n\n<p>I keep receiving an error <code>AttributeError: 'function' object has no attribute 'DataType'</code> \nIf I enter a DataType ex: <code>gdal.GDT_Byte</code> (which i don't fully understand) then later I get an error <code>AttributeError: 'function' object has no attribute 'shape'</code> Which leads me to believe either there is something different between this raster and the one I used in a similar function for class OR I am fundamentally reading in the raster wrong.</p>\n\n<p>Here is my full code:</p>\n\n<pre><code>import os\nfrom osgeo import gdal\n\n#change directory to data location\ndata_folder = r'my directory'\nos.chdir(data_folder)\n\n#open the .tif file and its bands, make sure they opened properly\nds = gdal.Open('example.tif') \nif ds is None: \n    raise IOError('Cound not open raster ya n00b')\nband1 = ds.GetRasterBand(1).ReadAsArray\nif band1 is None:\n    raise IOError('bandz 1 didnt make her dance')\nband2 = ds.GetRasterBand(2).ReadAsArray\nif band2 is None:\n    raise IOError('bandz 2 didnt make her dance')\nband3 = ds.GetRasterBand(3).ReadAsArray\nif band3 is None:\n    raise IOError('bandz 3 didnt make her dance')\nband4 = ds.GetRasterBand(4).ReadAsArray\nif band4 is None:\n    raise IOError('bandz 4 didnt make her dance')\n\n#Get the GeoTiff driver to create an output raster    \ngtiff_driver = gdal.GetDriverByName('GTiff')\n\n#Get the data type name\ndata_type = band1.DataType\ndata_type = gdal.GetDataTypeName(data_type)\n\ntest_1 = gtiff_driver.Create('test_v1.tif', ds.RasterXSize, ds.RasterYSize, 3, gdal.GDT_Byte)\nif test_1 is None:\n    raise IOError('Could not create raster test_1')\n\ntest_1.SetProjection(ds.GetProjection())\ntest_1.SetGeoTransform(ds.GetGeoTransform())\n\nt1_band1 = test_1.GetRasterBand(1)\nt1_band1.WriteArray(band4)\n\nt1_band2 = test_1.GetRasterBand(2)\nt1_band2.WriteArray(band3)\n\nt1_band3 = test_1.GetRasterBand(3)\nt1_band3.WriteArray(band2)\n\ndel t1_band1, t1_band2, t1_band3, test_1, ds \n</code></pre>\n\n<p>I feel like I am just being dumb here but would really appreciate some help. Oh and I am still using Python 2, I know i need to switch soon. Thank you!</p>\n"}, {"tags": ["python", "backpropagation"], "comments": [{"owner": {"reputation": 582, "user_id": 12485858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0293380964c0d2e827faa71680773dd?s=128&d=identicon&r=PG&f=1", "display_name": "t_e_o", "link": "https://stackoverflow.com/users/12485858/t-e-o"}, "edited": false, "score": 1, "creation_date": 1576716219, "post_id": 59399842, "comment_id": 104992780, "body": "Maybe this can be helpful? <a href=\"https://towardsdatascience.com/implementing-the-xor-gate-using-backpropagation-in-neural-networks-c1f255b4f20d\" rel=\"nofollow noreferrer\">towardsdatascience.com/&hellip;</a>"}, {"owner": {"reputation": 582, "user_id": 12485858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0293380964c0d2e827faa71680773dd?s=128&d=identicon&r=PG&f=1", "display_name": "t_e_o", "link": "https://stackoverflow.com/users/12485858/t-e-o"}, "edited": false, "score": 1, "creation_date": 1576716447, "post_id": 59399842, "comment_id": 104992825, "body": "I would also like to see how you train the network"}, {"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1576732250, "post_id": 59399842, "comment_id": 104995716, "body": "I don&#39;t know anything about neural networks, but I did notice your code is incomplete. It&#39;s missing imports, the <code>class</code> statement, and main."}, {"owner": {"reputation": 844, "user_id": 6200146, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/7a9d6844668a6196275de3450407cc11?s=128&d=identicon&r=PG&f=1", "display_name": "mavi", "link": "https://stackoverflow.com/users/6200146/mavi"}, "reply_to_user": {"reputation": 582, "user_id": 12485858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0293380964c0d2e827faa71680773dd?s=128&d=identicon&r=PG&f=1", "display_name": "t_e_o", "link": "https://stackoverflow.com/users/12485858/t-e-o"}, "edited": false, "score": 0, "creation_date": 1576744986, "post_id": 59399842, "comment_id": 104999976, "body": "@t_e_o the network is trained using gradient descent. In my code, I have a function called gradient. This function takes the derivative respect to the weight we want to update, then we use the gradient descent algorithm to update the weights. In order to see the equation check my notes after I write &quot;In order to calculate the gradient&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 844, "user_id": 6200146, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/7a9d6844668a6196275de3450407cc11?s=128&d=identicon&r=PG&f=1", "display_name": "mavi", "link": "https://stackoverflow.com/users/6200146/mavi"}, "edited": false, "score": 0, "creation_date": 1576863863, "post_id": 59417634, "comment_id": 105044670, "body": "Thanks, I was wrong on how the gradient is calculated. I was making just one forward pass and looping in the gradient which was doing something with the weights that didn&#180;t work but instead, I needed to make a forward pass each time to calculate the gradient again. I also modified my question with some of you remaks."}, {"owner": {"reputation": 275, "user_id": 12444582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y44aw.jpg?s=128&g=1", "display_name": "Paul Denoyes", "link": "https://stackoverflow.com/users/12444582/paul-denoyes"}, "reply_to_user": {"reputation": 844, "user_id": 6200146, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/7a9d6844668a6196275de3450407cc11?s=128&d=identicon&r=PG&f=1", "display_name": "mavi", "link": "https://stackoverflow.com/users/6200146/mavi"}, "edited": false, "score": 1, "creation_date": 1576887474, "post_id": 59417634, "comment_id": 105050930, "body": "@mavi Yep, I removed my remarks as they are not relevant anymore, and only let a recommendation to use the bias every time. Good luck with the generalization of your script !"}], "tags": [], "owner": {"reputation": 275, "user_id": 12444582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y44aw.jpg?s=128&g=1", "display_name": "Paul Denoyes", "link": "https://stackoverflow.com/users/12444582/paul-denoyes"}, "is_accepted": true, "score": 2, "last_activity_date": 1576887373, "last_edit_date": 1576887373, "creation_date": 1576794351, "answer_id": 59417634, "question_id": 59399842, "link": "https://stackoverflow.com/questions/59399842/xor-gate-with-backpropagation/59417634#59417634", "title": "Xor gate with Backpropagation", "body": "<p>Just changed the way you \"loop\", it seems to be working fine now (modified code hereunder).</p>\n\n<p>I may have missed something but <strong>your backprop looks ok</strong>.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nimport math\n\nclass perceptronmonocouche(object):\n    def xor(self):\n        print('xor')\n        X = np.array([[1,1],[1,0],[0,1],[0,0]]) #X.shape = (4,2)\n        y = np.array([0,1,1,0])\n        w0 = np.array([[.9,.1],[.3,.5]]) #random weights layer0\n        w1 = np.array([.8,.7]) #random wights layer1\n        max_epochs = 10000\n        epochs = 0\n        agreed_convergence_error = 0.001\n        error = 1\n        decision_threshold = 0.5\n\n        while epochs &lt;= max_epochs and error &gt; agreed_convergence_error:\n            #forward pass\n            epochs += 1\n            youtput=[]\n            for i in range(X.shape[0]):#X.shape = (4,2)\n                #print('x0', X[i][0])\n                #print('x1', X[i][1])\n                h0 = self.sig(w0[0,0]*X[i][0] + w0[1,0]*X[i][1])\n                h1 = self.sig(w0[0,1]*X[i][0] + w0[1,1]* X[i][1])\n                y0 = self.sig(w1[0]* h0 + w1[1] * h1) # shape = (4,)\n                youtput.append(y0)\n                if epochs%1000 ==0:\n                    print('y0',y0)\n                    if y0 &gt; decision_threshold:\n                        prediction = 1\n                    else:\n                        prediction = 0\n                    print('real value', y[i])\n                    print('predicted value', prediction)\n\n                #backpropagation\n                dey0 = -(y[i]-y0) # y[i] -&gt; desired output | y0 -&gt; output            \n                dew0_00 = dey0 * y0 * (1 - y0) * w1[0] * h0 * (1 - h0) * X[i][0]\n                dew0_01 = dey0 * y0 * (1 - y0) * w1[1] * h1 * (1 - h1) * X[i][0]\n                dew0_10 = dey0 * y0 * (1 - y0) * w1[0] * h0 * (1 - h0) * X[i][1]\n                dew0_11 = dey0 * y0 * (1 - y0) * w1[1] * h1 * (1 - h1) * X[i][1]\n                dew1_0 = dey0 * h0\n                dew1_1 = dey0 * h1\n\n                w0[0,0] = self.gradient(w0[0,0], dew0_00)\n                w0[0,1] = self.gradient(w0[0,1], dew0_01)\n                w0[1,0] = self.gradient(w0[1,0], dew0_10)\n                w0[1,1] = self.gradient(w0[1,1], dew0_11)\n                w1[0] = self.gradient(w1[0], dew1_0)\n                w1[1] = self.gradient(w1[1], dew1_1)\n\n                #print('print W0, ', w0)\n                #print('print W1, ', w1)\n            error = self.error(y,youtput )\n            if epochs%1000 ==0:\n                print('error -&gt; ', error)\n\n    def gradient(self, w, w_derivative):\n        alpha = .2\n        w = w - alpha * w_derivative\n        return w\n\n    def error(self, y, yhat):\n        e = 0\n        for i in range (y.shape[0]):\n            e = e + .5 * (y[i]- yhat[i])**2\n        return e \n\n    def sig(self,x):\n         return 1 / (1 + math.exp(-x))\n\np = perceptronmonocouche()\np.xor()\n</code></pre>\n\n<p>Result</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>y0 0.05892656406522486\nreal value 0\npredicted value 0\ny0 0.9593864604895951\nreal value 1\npredicted value 1\ny0 0.9593585562506973\nreal value 1\npredicted value 1\ny0 0.03119936553811551\nreal value 0\npredicted value 0\nerror -&gt;  0.003873463452052477\n</code></pre>\n\n<p><strong><em>Note</em></strong> : Here it works fine without the bias, however I'd recommend anytime you can to let the bias for the propagation.</p>\n"}], "owner": {"reputation": 844, "user_id": 6200146, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/7a9d6844668a6196275de3450407cc11?s=128&d=identicon&r=PG&f=1", "display_name": "mavi", "link": "https://stackoverflow.com/users/6200146/mavi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 2, "accepted_answer_id": 59417634, "answer_count": 1, "score": 3, "last_activity_date": 1576887373, "creation_date": 1576702432, "last_edit_date": 1576796402, "question_id": 59399842, "link": "https://stackoverflow.com/questions/59399842/xor-gate-with-backpropagation", "title": "Xor gate with Backpropagation", "body": "<p>I am trying to understand how backpropagation works. So I wrote a straight forward script to try to understand it before writing a generalized algorithm.</p>\n\n<p>What the script is trying to do is to train an XOR gate.\nMy neural network is very simple. 2 inputs, 2 hidden neurons, and 1 output. (Note that the bias are omitted for simplicity)</p>\n\n<p><a href=\"https://i.stack.imgur.com/nZXpu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nZXpu.png\" alt=\"enter image description here\"></a></p>\n\n<p>(for more information see the images attached at the end)</p>\n\n<p>The problem is that after training the perceptron it doesn't work and I don't know where the problem is. It can be in my equations or in my implementation.</p>\n\n<p>Code:</p>\n\n<pre><code>    def xor(self):\n        print('xor')\n        X = np.array([[1,1],[1,0],[0,1],[0,0]]) #X.shape = (4,2)\n        y = np.array([0,1,1,0])\n        w0 = np.array([[.9,.1],[.3,.5]]) #random weights layer0\n        w1 = np.array([.8,.7]) #random wights layer1\n\n        #forward pass\n        youtput=[]\n        for i in range(X.shape[0]):#X.shape = (4,2)\n            #print('x0', X[i][0])\n            #print('x1', X[i][1])\n            h0 = self.sig(w0[0,0]*X[i][0] + w0[1,0]*X[i][1])\n            h1 = self.sig(w0[0,1]*X[i][0] + w0[1,1]* X[i][1])\n            y0 = self.sig(w1[0]* h0 + w1[1] * h1) # shape = (4,)\n            youtput.append(y0)\n            print('y0',y0)\n\n            #backpropagation\n            dey0 = -(y[i]-y0) # y[i] -&gt; desired output | y0 -&gt; output\n            deW0_00 = dey0 * y0 * (1 - y0) * w1[0] * h0 * (1 - h0) * X[i][0]\n            deW0_01 = dey0 * y0 * (1 - y0) * w1[1] * h1 * (1 - h1) * X[i][0]\n            deW0_10 = dey0 * y0 * (1 - y0) * w1[0] * h0 * (1 - h0) * X[i][1]\n            deW0_11 = dey0 * y0 * (1 - y0) * w1[1] * h1 * (1 - h1) * X[i][1]\n            deW1_00 = dey0 * h0\n            deW1_10 = dey0 * h1\n\n            w0[0,0] = self.gradient(w0[0,0], deW0_00)\n            w0[0,1] = self.gradient(w0[0,1], deW0_01)\n            w0[1,0] = self.gradient(w0[1,0], deW0_10)\n            w0[1,1] = self.gradient(w0[1,1], deW0_11)\n            w1[0] = self.gradient(w1[0], deW1_00)\n            w1[1] = self.gradient(w1[1], deW1_10)\n\n            #print('print W0, ', w0)\n            #print('print W1, ', w1)\n        print('error -&gt; ', self.error(y,youtput ))  \n        #forward pass\n        youtput2= []\n        for i in range(X.shape[0]):#X.shape = (4,2)\n            print('x0 =', X[i][0], ', x1 =', X[i][1])\n            h0 = self.sig(w0[0,0]*X[i][0] + w0[1,0]*X[i][1])\n            h1 = self.sig(w0[0,1]*X[i][0] + w0[1,1]* X[i][1])\n            y0 = self.sig(w1[0]* h0 + w1[1] * h1)\n            youtput2.append(y0)\n            print('y0-----&gt;',y0)\n        print('error -&gt; ', self.error(y,youtput2 ))\n\n    def gradient(self, w, w_derivative):\n        alpha = .001\n        for i in range(1000000):\n            w = w - alpha * w_derivative\n        return w\n\n    def error(self, y, yhat):\n        e = 0\n        for i in range (y.shape[0]):\n            e = e + .5 * (y[i]- yhat[i])**2\n        return e \n\n    def sig(self,x):\n         return 1 / (1 + math.exp(-x)) \n</code></pre>\n\n<p>Result</p>\n\n<pre><code>PS C:\\gitProjects\\perceptron&gt; python .\\perceptron.py\nxor\ny0 0.7439839341840395\ny0 0.49999936933995615\ny0 0.4999996364775347\ny0 7.228146514841657e-229\nerror -&gt;  0.5267565442535\nx0 = 1 , x1 = 1\ny0-----&gt; 0.49999999999999856\nx0 = 1 , x1 = 0\ny0-----&gt; 0.4999993695274945\nx0 = 0 , x1 = 1\ny0-----&gt; 0.49999963653435153\nx0 = 0 , x1 = 0\ny0-----&gt; 7.228146514841657e-229\nerror -&gt;  0.3750004969693411\n</code></pre>\n\n<p>The equations.\n<a href=\"https://i.stack.imgur.com/CXNZ2.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CXNZ2.jpg\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/13Pkw.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/13Pkw.jpg\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/ZsH7s.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZsH7s.jpg\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/Fg3m2.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Fg3m2.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "ode", "gekko"], "answers": [{"comments": [{"owner": {"reputation": 335, "user_id": 10073465, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--bMMUwns4Jc/AAAAAAAAAAI/AAAAAAAAABE/41tyWScHGcU/photo.jpg?sz=128", "display_name": "Felipe Mello", "link": "https://stackoverflow.com/users/10073465/felipe-mello"}, "edited": false, "score": 1, "creation_date": 1576772063, "post_id": 59404316, "comment_id": 105014010, "body": "Awesome! Thank you, Mr. Hedengren. It is amazing that there are people like you making open source code and answering questions at stackoverflow."}], "tags": [], "owner": {"reputation": 5870, "user_id": 2366941, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DyN2Q.jpg?s=128&g=1", "display_name": "John Hedengren", "link": "https://stackoverflow.com/users/2366941/john-hedengren"}, "is_accepted": true, "score": 1, "last_activity_date": 1576737391, "last_edit_date": 1576737391, "creation_date": 1576736961, "answer_id": 59404316, "question_id": 59399823, "link": "https://stackoverflow.com/questions/59399823/how-to-describe-a-discrete-parameter-using-gekko/59404316#59404316", "title": "How to describe a discrete parameter using GEKKO?", "body": "<p>Your strategy to feed glucose as a pulse is a good method to have a discontinuous input. The problem with a discrete jump in glucose concentration is that there is a glucose derivative term as equation 4: <code>m.Equation(G.dt() == e4)</code>. If the <code>dG/dt</code> term changes over a very short amount of time then the derivative term gets very large.</p>\n\n<p>One strategy to deal with the large derivatives at discrete points is to use <code>m.options.NODES=2</code> to avoid problems with the additional internal nodes with orthogonal collocation on finite elements. With no internal nodes, you may need to increase the number of time points to maintain accuracy for the integration. This allows a very short-duration impulse input of glucose to the batch reactor such as <code>3.6 seconds</code> for the addition.</p>\n\n<p><code>feed_small_delta_t = 0.001 # 3.6 seconds</code></p>\n\n<p>The index for the feed input is off by one so <code>Fi[i+1]</code> should be where the impulse is applied, not <code>Fi[i]</code>.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>Fi = np.zeros(len(t))\nfor i in range(1,len(t)):\n    if t[i]%(24) == 0:\n        Fi[i+1] = 0.1/feed_small_delta_t\n</code></pre>\n\n<p>This gives similar results to what you had before but with a shorter input impulse for the discrete event of adding additional sugar to the batch.</p>\n\n<p><a href=\"https://i.stack.imgur.com/kABO7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kABO7.png\" alt=\"Batch Reactor Results\"></a></p>\n\n<p><strong><em>Full Script with Modifications</em></strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nfrom gekko import GEKKO\nimport matplotlib.pyplot as plt\nimport pandas as pd\n\nm = GEKKO(remote=False)    # create GEKKO model\n\n#constants 3L fed-batch\nKdQ = 0.001        #degree of degradation of glutamine (1/h)\nmG = 1.1e-10   #glucose maintenance coefficient (mmol/cell/hour)\nYAQ = 0.90         #yield of ammonia from glutamine\nYLG = 2            #yield of lactate from glucose\nYXG = 2.2e8    #yield of cells from glucose (cells/mmol)\nYXQ = 1.5e9    #yield of cells from glutamine (cells/mmol)\nKL = 150           #lactate saturation constant (mM)\nKA = 40            #ammonia saturation constant (mM)\nKdmax = 0.01       #maximum death rate (1/h)\nmumax = 0.044      #maximum growth rate (1/h)\nKG = 1             #glucose saturation constant (mM)\nKQ = 0.22          #glutamine saturation constant (mM)\nmQ = 0             #glutamine maintenance coefficient (mmol/cell/hour)\nkmu = 0.01         #intrinsic death rate (1/h)\nKlysis = 2e-2  #rate of cell lysis (1/h)\nCi_star = 100      #inhibitor saturation concentration (mM)\nqi = 2.5e-10   #specific inhibitor production rate (1/h)\n\nN_HOURS = 150 #Number of hours of the experiment\nTIME_STEP = 0.5\nfeed_small_delta_t = 0.001 \n\n#create time array. It will be from 0 to N_HOURS, with time step TIME_STEP, \n#and every 24h, there will be a feed_small_delta_t\nt = []\nfor i in range(int(N_HOURS/TIME_STEP +1)):\n    t_value = i*TIME_STEP\n    t.append(t_value)\n\n    if t_value%24 == 0:\n        t.append(t_value + feed_small_delta_t)\n\nm.time = t\n\n#Create input feed-rate array\nFi = np.zeros(len(t))\nfor i in range(1,len(t)):\n    if t[i]%(24) == 0:\n        Fi[i+1] = 0.1/feed_small_delta_t #it is divided by feed_small_delta_t so volume added is constant.\n\n#Flow, volume and concentration\nFi = m.Param(Fi)   #input feed-rate (L/h)     \nFo = 0              #output feed-rate (L/h)\nV = 3              #volume (L)\nSG = 653           #glucose concentration in the feed (mM)\nSQ = 58.8          #glutamine concentration in the feed (mM)\n\n\nXTMM = m.Var(value=2,lb=-0.0000,name='XT')            #total cell density (MMcells/L)\nXVMM = m.Var(value=2,lb=-0.0000, name='XV')      #viable cell density (MMcells/L)\nXDMM = m.Var(value=0,lb=-0.0000,name='XD')          #dead cell density (MMcells/L)\nG = m.Var(value = 20,lb=-0.0000,name='G')            #glucose concentration (mM)\nQ = m.Var(value = 3.8,lb=-0.0000, name='Q')           #glutamine concentration (mM)\nL = m.Var(value=0.1,lb=-0.0000,name='L')                #lactate concentration (mM)\nA = m.Var(value=1.8,lb=-0.0000,name='A')              #ammonia concentration (mM)\nCi = m.Var(lb=-0.0000, name='Ci')            #inhibitor concentration (mM)\nmu = m.Var(lb=-0.0000, name='mu')            #growth rate (1/h)\nKd = m.Var(lb=-0.0000, name='Kd')            #death rate(1/h)\n\n# scale back to cells/L from million cells/L\nXT = m.Intermediate(XTMM*1e8)\nXV = m.Intermediate(XVMM*1e8)\nXD = m.Intermediate(XDMM*1e8)\n\ne1 = m.Intermediate((mu*XV - Klysis*XD - XT*Fo/V)/1e8)\ne2 = m.Intermediate(((mu - Kd)*XV - XV*Fo/V)/1e8)\ne3 = m.Intermediate((Kd*XV - Klysis*XD - XV*Fo/V)/1e8)\ne4 = m.Intermediate((Fi/V)*SG - (Fo/V)*G + (-mu/YXG - mG)*XV)\ne5 = m.Intermediate((Fi/V)*SQ - (Fo/V)*Q + (-mu/YXQ - mQ)*XV - KdQ*Q)\ne6 = m.Intermediate(-YLG*(-mu/YXG -mG)*XV-(Fo/V)*L)\ne7 = m.Intermediate(-YAQ*(-mu/YXQ - mQ)*XV +KdQ*Q-(Fo/V)*A)\ne8 = m.Intermediate(qi*XV - (Fo/V)*Ci)\ne9a = m.Intermediate((Ci_star*(KG+G)*(KQ+Q)*(L/KL + 1)*(A/KA + 1)))\ne9b = m.Intermediate((mumax*G*Q*(Ci_star-Ci)))\ne10a = m.Intermediate((mu+kmu))\ne10b = m.Intermediate(Kdmax*kmu)\n\n# create GEEKO equations\nm.Equation(XTMM.dt() == e1)\nm.Equation(XVMM.dt() == e2)\nm.Equation(XDMM.dt() == e3)\nm.Equation(G.dt() == e4)\nm.Equation(Q.dt() == e5)\nm.Equation(L.dt() == e6)\nm.Equation(A.dt() == e7)\nm.Equation(Ci.dt() == e8)\nm.Equation(e9a * mu == e9b)\nm.Equation(e10a * Kd == e10b)\n\n# solve ODE\nm.options.IMODE = 4\nm.options.SOLVER = 1\nm.options.NODES = 2\nm.options.COLDSTART = 2\n#m.open_folder()\nm.solve(display=False)\n\nplt.figure()\nplt.subplot(3,1,1)\nplt.plot(m.time, XV.value,label='XV')\nplt.plot(m.time, XT.value,label='XT')\nplt.plot(m.time, XD.value,label='XD')\nplt.legend()\nplt.subplot(3,1,2)\nplt.plot(m.time, G.value,label='G')\nplt.plot(m.time, Q.value,label='Q')\nplt.plot(m.time, L.value,label='L')\nplt.plot(m.time, A.value,label='A')\nplt.plot(m.time, Ci.value,label='Ci')\nplt.legend()\nplt.subplot(3,1,3)\nplt.plot(m.time, mu.value,label='mu')\nplt.plot(m.time, Kd.value,label='Kd')\nplt.legend()\nplt.xlabel('Time (hr)')\n\nplt.figure()\nplt.plot(m.time, e1.value,'r-.',label='eqn1')\nplt.plot(m.time, e2.value,'g:',label='eqn2')\nplt.plot(m.time, e3.value,'b:',label='eqn3')\nplt.plot(m.time, e4.value,'b--',label='eqn4')\nplt.plot(m.time, e5.value,'y:',label='eqn5')\nplt.plot(m.time, e6.value,'m--',label='eqn6')\nplt.plot(m.time, e7.value,'b-.',label='eqn7')\nplt.plot(m.time, e8.value,'g--',label='eqn8')\nplt.plot(m.time, e9a.value,'r:',label='eqn9a')\nplt.plot(m.time, e9b.value,'r--',label='eqn9b')\nplt.plot(m.time, e10a.value,'k:',label='eqn10a')\nplt.plot(m.time, e10b.value,'k--',label='eqn10b')\nplt.legend()\n\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 10073465, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--bMMUwns4Jc/AAAAAAAAAAI/AAAAAAAAABE/41tyWScHGcU/photo.jpg?sz=128", "display_name": "Felipe Mello", "link": "https://stackoverflow.com/users/10073465/felipe-mello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 59404316, "answer_count": 1, "score": 2, "last_activity_date": 1576737391, "creation_date": 1576702333, "last_edit_date": 1576731095, "question_id": 59399823, "link": "https://stackoverflow.com/questions/59399823/how-to-describe-a-discrete-parameter-using-gekko", "title": "How to describe a discrete parameter using GEKKO?", "body": "<p>I have a model with 10 equations that describe a fed-batch bioreactor. Basically, every 24h \"food\" (Glucose and other components) is added to the system. My problem is that this feeding procedure is currently being modeled as the flow-rate (L/H) over two time steps (delta_T), instead of a single discrete food addition (delta_T = 0).</p>\n\n<p>This is what the glucose equation looks like:</p>\n\n<pre><code>e4 = m.Intermediate(**(Fi/V)*SG** - (Fo/V)*G + (-mu/YXG - mG)*XV)\n\nm.Equation(G.dt() == e4)\n</code></pre>\n\n<p>Where <code>G</code> is the Glucose Concentration in the bioreactor (mM), <code>Fi</code> is input feed-rate (L/h), <code>V</code> is the bioreactor volume (L), and <code>SG</code> is the glucose concentration in the feed (mM).</p>\n\n<p><a href=\"https://i.stack.imgur.com/pV1rN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pV1rN.png\" alt=\"Glucose\"></a></p>\n\n<p>I managed to make the system feasible by calling this <code>delta_T = 0.2 hours</code>, in other words, the Glucose concentration <strong>continuously</strong> (instead of <strong>instantly</strong>) rises from <code>G1</code> at time <code>t1</code> to <code>G2</code> at time <code>t1 + 0.2h</code>. If I try to lower this <code>delta_T</code>, the system shows a very bizarre behavior.</p>\n\n<p>Time array looks like this: [..., 19.5, 20.0, 20.5, 21.0, 21.5, 22.0, 22.5, 23.0, 23.5, <strong>24.0, 24.2</strong>, 24.5, 25.0, ...]. </p>\n\n<p>It changes in steps of 0.5h, and every 24h, when I add glucose to the bioreactor, I forced the next time step to be only 0.2 long, instead of 0.5. I want this delta to be 0.</p>\n\n<p>My feed-rate looks like this:</p>\n\n<p>[..., 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, <strong>0.5</strong>, 0.0, 0.0, 0.0,...]</p>\n\n<p><a href=\"https://i.stack.imgur.com/n3LTQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n3LTQ.png\" alt=\"Feed\"></a></p>\n\n<p>Is there anyway that I can make this feeding process discrete? The full code is shown below. Thanks!!</p>\n\n<pre><code>import numpy as np\nfrom gekko import GEKKO\nimport matplotlib.pyplot as plt\nimport pandas as pd\n\nm = GEKKO(remote=False)    # create GEKKO model\n\n#constants 3L fed-batch\nKdQ = 0.001        #degree of degradation of glutamine (1/h)\nmG = 1.1e-10   #glucose maintenance coefficient (mmol/cell/hour)\nYAQ = 0.90         #yield of ammonia from glutamine\nYLG = 2            #yield of lactate from glucose\nYXG = 2.2e8    #yield of cells from glucose (cells/mmol)\nYXQ = 1.5e9    #yield of cells from glutamine (cells/mmol)\nKL = 150           #lactate saturation constant (mM)\nKA = 40            #ammonia saturation constant (mM)\nKdmax = 0.01       #maximum death rate (1/h)\nmumax = 0.044      #maximum growth rate (1/h)\nKG = 1             #glucose saturation constant (mM)\nKQ = 0.22          #glutamine saturation constant (mM)\nmQ = 0             #glutamine maintenance coefficient (mmol/cell/hour)\nkmu = 0.01         #intrinsic death rate (1/h)\nKlysis = 2e-2  #rate of cell lysis (1/h)\nCi_star = 100      #inhibitor saturation concentration (mM)\nqi = 2.5e-10   #specific inhibitor production rate (1/h)\n\nN_HOURS = 150 #Number of hours of the experiment\nTIME_STEP = 0.5\nfeed_small_delta_t = 0.2 \n\n#create time array. It will be from 0 to N_HOURS, with time step TIME_STEP, \n#and every 24h, there will be a feed_small_delta_t\nt = []\nfor i in range(int(N_HOURS/TIME_STEP +1)):\n    t_value = i*TIME_STEP\n    t.append(t_value)\n\n    if t_value%24 == 0:\n        t.append(t_value + feed_small_delta_t)\n\nm.time = t\n\n#Create input feed-rate array\nFi = np.zeros(len(t))\nfor i in range(1,len(t)):\n    if t[i]%(24) == 0:\n        Fi[i] = 0.1/feed_small_delta_t #it is divided by feed_small_delta_t so volume added is constant.\n\n#Flow, volume and concentration\nFi = m.Param(Fi)   #input feed-rate (L/h)     \nFo = 0              #output feed-rate (L/h)\nV = 3              #volume (L)\nSG = 653           #glucose concentration in the feed (mM)\nSQ = 58.8          #glutamine concentration in the feed (mM)\n\n\nXTMM = m.Var(value=2,lb=-0.0000,name='XT')            #total cell density (MMcells/L)\nXVMM = m.Var(value=2,lb=-0.0000, name='XV')      #viable cell density (MMcells/L)\nXDMM = m.Var(value=0,lb=-0.0000,name='XD')          #dead cell density (MMcells/L)\nG = m.Var(value = 20,lb=-0.0000,name='G')            #glucose concentration (mM)\nQ = m.Var(value = 3.8,lb=-0.0000, name='Q')           #glutamine concentration (mM)\nL = m.Var(value=0.1,lb=-0.0000,name='L')                #lactate concentration (mM)\nA = m.Var(value=1.8,lb=-0.0000,name='A')              #ammonia concentration (mM)\nCi = m.Var(lb=-0.0000, name='Ci')            #inhibitor concentration (mM)\nmu = m.Var(lb=-0.0000, name='mu')            #growth rate (1/h)\nKd = m.Var(lb=-0.0000, name='Kd')            #death rate(1/h)\n\n# scale back to cells/L from million cells/L\nXT = m.Intermediate(XTMM*1e8)\nXV = m.Intermediate(XVMM*1e8)\nXD = m.Intermediate(XDMM*1e8)\n\ne1 = m.Intermediate((mu*XV - Klysis*XD - XT*Fo/V)/1e8)\ne2 = m.Intermediate(((mu - Kd)*XV - XV*Fo/V)/1e8)\ne3 = m.Intermediate((Kd*XV - Klysis*XD - XV*Fo/V)/1e8)\ne4 = m.Intermediate((Fi/V)*SG - (Fo/V)*G + (-mu/YXG - mG)*XV)\ne5 = m.Intermediate((Fi/V)*SQ - (Fo/V)*Q + (-mu/YXQ - mQ)*XV - KdQ*Q)\ne6 = m.Intermediate(-YLG*(-mu/YXG -mG)*XV-(Fo/V)*L)\ne7 = m.Intermediate(-YAQ*(-mu/YXQ - mQ)*XV +KdQ*Q-(Fo/V)*A)\ne8 = m.Intermediate(qi*XV - (Fo/V)*Ci)\ne9a = m.Intermediate((Ci_star*(KG+G)*(KQ+Q)*(L/KL + 1)*(A/KA + 1)))\ne9b = m.Intermediate((mumax*G*Q*(Ci_star-Ci)))\ne10a = m.Intermediate((mu+kmu))\ne10b = m.Intermediate(Kdmax*kmu)\n\n# create GEEKO equations\nm.Equation(XTMM.dt() == e1)\nm.Equation(XVMM.dt() == e2)\nm.Equation(XDMM.dt() == e3)\nm.Equation(G.dt() == e4)\nm.Equation(Q.dt() == e5)\nm.Equation(L.dt() == e6)\nm.Equation(A.dt() == e7)\nm.Equation(Ci.dt() == e8)\nm.Equation(e9a * mu == e9b)\nm.Equation(e10a * Kd == e10b)\n\n# solve ODE\nm.options.IMODE = 4\nm.options.SOLVER = 1\nm.options.NODES = 3\nm.options.COLDSTART = 2\n#m.open_folder()\nm.solve(display=False)\n\nplt.figure()\nplt.subplot(3,1,1)\nplt.plot(m.time, XV.value,label='XV')\nplt.plot(m.time, XT.value,label='XT')\nplt.plot(m.time, XD.value,label='XD')\nplt.legend()\nplt.subplot(3,1,2)\nplt.plot(m.time, G.value,label='G')\nplt.plot(m.time, Q.value,label='Q')\nplt.plot(m.time, L.value,label='L')\nplt.plot(m.time, A.value,label='A')\nplt.plot(m.time, Ci.value,label='Ci')\nplt.legend()\nplt.subplot(3,1,3)\nplt.plot(m.time, mu.value,label='mu')\nplt.plot(m.time, Kd.value,label='Kd')\nplt.legend()\nplt.xlabel('Time (hr)')\n\nplt.figure()\nplt.plot(m.time, e1.value,'r-.',label='eqn1')\nplt.plot(m.time, e2.value,'g:',label='eqn2')\nplt.plot(m.time, e3.value,'b:',label='eqn3')\nplt.plot(m.time, e4.value,'b--',label='eqn4')\nplt.plot(m.time, e5.value,'y:',label='eqn5')\nplt.plot(m.time, e6.value,'m--',label='eqn6')\nplt.plot(m.time, e7.value,'b-.',label='eqn7')\nplt.plot(m.time, e8.value,'g--',label='eqn8')\nplt.plot(m.time, e9a.value,'r:',label='eqn9a')\nplt.plot(m.time, e9b.value,'r--',label='eqn9b')\nplt.plot(m.time, e10a.value,'k:',label='eqn10a')\nplt.plot(m.time, e10b.value,'k--',label='eqn10b')\nplt.legend()\n\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "mysql", "airflow"], "answers": [{"tags": [], "owner": {"reputation": 188041, "user_id": 10676716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/arsQA.jpg?s=128&g=1", "display_name": "GMB", "link": "https://stackoverflow.com/users/10676716/gmb"}, "is_accepted": false, "score": 0, "last_activity_date": 1576702521, "creation_date": 1576702521, "answer_id": 59399856, "question_id": 59399811, "link": "https://stackoverflow.com/questions/59399811/how-to-capture-only-new-records-from-mysql-db/59399856#59399856", "title": "How to capture only new records from MYSQL DB", "body": "<p>There is no by-default row-level timestamp in MySQL.</p>\n\n<p>One solution would be to create your own, by adding a column to the concerned table(s) and enabling the <code>default</code> and <code>on update</code> options:</p>\n\n<pre><code>alter table mytable add ts timestamp \n    default current_timestamp \n    on update current_timestamp\n;\n</code></pre>\n"}], "owner": {"reputation": 236, "user_id": 10405409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/421965571c01369b361d03aed4a022ac?s=128&d=identicon&r=PG&f=1", "display_name": "Coder123", "link": "https://stackoverflow.com/users/10405409/coder123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576702521, "creation_date": 1576702271, "question_id": 59399811, "link": "https://stackoverflow.com/questions/59399811/how-to-capture-only-new-records-from-mysql-db", "title": "How to capture only new records from MYSQL DB", "body": "<p>I am trying to capture only new records from my MYSQL DB so I can only select those and send them to a S3 bucket as a .csv file. Is there any way or mysql function that holds the timestamp for each record? I am trying to incremental loads from mysql to s3.</p>\n\n<p>Any ideas or suggestions?</p>\n"}, {"tags": ["python", "python-imaging-library", "malware"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1576702384, "post_id": 59399809, "comment_id": 104988735, "body": "use pillow library. Load image, then save it."}, {"owner": {"reputation": 652, "user_id": 11025792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0073caa316ad3d9fa6f71d2e574368b0?s=128&d=identicon&r=PG&f=1", "display_name": "bones225", "link": "https://stackoverflow.com/users/11025792/bones225"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1576710242, "post_id": 59399809, "comment_id": 104991433, "body": "I currently use PIL to open, resize, and convert(&#39;RGBA&#39;) all images that I get. What does PIL do that causes it to remove <a href=\"https://isc.sans.edu/forums/diary/A+Malicious+JPEG/24490/\" rel=\"nofollow noreferrer\">threats like this</a> in a JPG?"}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1579025128, "post_id": 59399809, "comment_id": 105627425, "body": "Did my answer, or any others, sort out your problem? If so, please consider accepting it as your answer - by clicking the hollow tick/checkmark beside the vote count. If not, please say what didn&#39;t work so that I, or someone else, can assist you further. Thanks. <a href=\"http://meta.stackexchange.com/questions/5234/how-does-accepting-an-answer-work/5235#5235\" title=\"how does accepting an answer work\">meta.stackexchange.com/questions/5234/&hellip;</a>"}, {"owner": {"reputation": 652, "user_id": 11025792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0073caa316ad3d9fa6f71d2e574368b0?s=128&d=identicon&r=PG&f=1", "display_name": "bones225", "link": "https://stackoverflow.com/users/11025792/bones225"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1579031551, "post_id": 59399809, "comment_id": 105630131, "body": "@MarkSetchell Thanks. Sorry, I had upvoted them before, but I think I didn&#39;t accept a best answer for some reason.. Maybe too early. Thanks for the reminder."}], "answers": [{"tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": false, "score": 2, "last_activity_date": 1576746530, "creation_date": 1576746530, "answer_id": 59406394, "question_id": 59399809, "link": "https://stackoverflow.com/questions/59399809/removing-potential-malware-in-image-in-python/59406394#59406394", "title": "Removing potential malware in image in Python", "body": "<p>\"malicious\" content is contained in the image metadata.</p>\n\n<p>When you read the image data (pixels, colors) in a matrix (using pillow aka PIL library in python for instance), you just get the image data.</p>\n\n<p>When you save it back, the meta data is lost, keeping only the image data.</p>\n\n<p>Saving it back can have undesired side-effects, though:</p>\n\n<ul>\n<li>lossy compression alters the image</li>\n<li>depending on the output format, transparency can be unsupported, and lost</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "is_accepted": true, "score": 2, "last_activity_date": 1576759975, "last_edit_date": 1576759975, "creation_date": 1576752307, "answer_id": 59408087, "question_id": 59399809, "link": "https://stackoverflow.com/questions/59399809/removing-potential-malware-in-image-in-python/59408087#59408087", "title": "Removing potential malware in image in Python", "body": "<p>At its simplest level, a bitmap image contains two things:</p>\n\n<ul>\n<li><p>meta-data, which is information about the image, and</p></li>\n<li><p>pixel data, which are the pixel colours themselves.</p></li>\n</ul>\n\n<p>The meta-data contains critical things like the image height and width, the number of channels, the bits per pixel, the image's colourspace and how it is compressed. It also contains, arguably less-critical supplementary information such as:</p>\n\n<ul>\n<li>EXIF data - what camera was used, what lens, what exposure, GPS info and so on</li>\n<li>ICC Colour Profiles for accurate colour reproduction</li>\n<li>IPTC information - press and telecoms info, copyright, subject-matter tagging and so on</li>\n<li>Geo-referencing and/or photogrammetry information - see GeoTIFF</li>\n<li>comments - which can contain arbitrary information (and malware)</li>\n</ul>\n\n<p>The pixel data contains the colours (and potentially any transparency) of the grid of pixels making  up the image. It is often compressed.</p>\n\n<p>Note that the above is at a simple level. I only mentioned bitmap files without referring to vector files such as SVG files which can contain their own set of problems such as the <em>\"Billion Laughs DoS Attack\"</em> see <a href=\"https://en.wikipedia.org/wiki/Billion_laughs_attack\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Billion_laughs_attack</a></p>\n\n<p>Note also that it is entirely possible to append an entire executable program to the end, or in the middle of an image, without necessarily upsetting image readers/display programs which, in general, ignore information they can't understand but try their best to use the parts they do. If you want an example, here I make a red image with <strong>ImageMagick</strong> and append 128kB of arbitrary data to the end and display it in the Terminal on a Mac without any complaint from <strong>macOS</strong>:</p>\n\n<pre><code>magick -size 1024x768 xc:red image.png             # make red image\ndd if=/dev/zero bs=128 count=1024 &gt;&gt; image.png     # append 128kB of whatever I like - not actually malware in this case\nopen imge.png                                      # use \"xdg-open\" on Linux\n</code></pre>\n\n<p>Note also that it is possible to embed other information using steganography, like for example, hijacking the least significant bit of every pixel and using it to convey a message or carry some unexpected payload such as malware or watermark. As it is the least significant bit, it is normally visually imperceptible.</p>\n\n<hr>\n\n<p>So, now the question is what tradeoffs you wish to make, or put another way <em>\"how paranoid are you?\"</em> The more information you decide to strip from your image, the more likely you are to unintentionally lose some information you later need. If you strip the EXIF data, you will no longer know when the image was shot, or where, or by whom. If you strip the ICC Colour Profile, your image may appear washed out, or over-saturated, or green in some viewers. If you strip the IPTC information, you may be committing a licence-infringement if you are required by contract to retain it. If you strip the geo-referencing information, your data may become useless. If you strip the comments, you may lose masking information, or copyright, or tagging information. If you change the format from PNG/TIFF/GIF to JPEG, you will lose transparency and accuracy. If you change from TIFF to PNG, you will lose the ability to store 32-bit, 64-bit or floating point data and more than 4 channels. If you change from JPEG to PNG, you may inadvertently make the file many tens or hundreds of times larger.</p>\n\n<p>So, pretty much the most paranoid action you could take would be to load the bitmap into memory , save it (preferably in memory rather than to disk for performance reasons) in a format that is incapable of storing anything other pixel data (e.g. PPM or raw RGB(A) bytes) and re-save it as your JPEG or PNG. That will discard all EXIF/IPTC/Geo-data and comments as well as any tacked on extraneous data at the end or in the middle of the image. If you want a concrete example, you could use the following <strong>ImageMagick</strong> command in Terminal:</p>\n\n<pre><code>magick input.jpg -strip ppm:- | magick ppm:- result.jpg\n</code></pre>\n\n<p>If you were using PIL/Pillow and Python, you could do:</p>\n\n<pre><code>from PIL import Image\nimport numpy as np\n\n# Load image\nim = Image.open('image.jpg')                                     \n\n# Convert to format that cannot store IPTC/EXIF or comments, i.e. Numpy array\nna = np.array(im)                                                                       \n\n# Create new image from the Numpy array and save\nresult = Image.fromarray(na).save('clean.jpg')\n</code></pre>\n\n<p>If your image is in PNG format though, you have added complications - it may be a palette image and it may have alpha/transparency information and you will likely want to retain that. That might look like this:</p>\n\n<pre><code>from PIL import Image\nimport numpy as np\n\n# Load image\nim = Image.open('image.png')                                     \n\n# Convert to format that cannot store IPTC/EXIF or comments, i.e. Numpy array\nna = np.array(im)                                                                       \n\n# Create new image from the Numpy array\nresult = Image.fromarray(na)\n\n# Copy forward the palette, if any\npalette = im.getpalette()\nif palette != None:\n    result.putpalette(palette)\n\n# Save result\nresult.save('clean.png')\n</code></pre>\n\n<p>If you need to preserve some meta-data, you will need to consider other options.</p>\n"}], "owner": {"reputation": 652, "user_id": 11025792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0073caa316ad3d9fa6f71d2e574368b0?s=128&d=identicon&r=PG&f=1", "display_name": "bones225", "link": "https://stackoverflow.com/users/11025792/bones225"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "accepted_answer_id": 59408087, "answer_count": 2, "score": 1, "last_activity_date": 1576759975, "creation_date": 1576702262, "question_id": 59399809, "link": "https://stackoverflow.com/questions/59399809/removing-potential-malware-in-image-in-python", "title": "Removing potential malware in image in Python", "body": "<p>I've read that .PNG, .JPEG, and other image file types can potentially contain malware.</p>\n\n<p>I am looking to remove potential malware embedded in user-uploaded images. Is there a way in Python to essentially \"flatten\" an image that would essentially remove any malicious content? Kind of like if you were to take a screenshot of the image then save the screenshot? Or maybe there is an image type that can't be corrupted as easily?</p>\n\n<p>I am already hosting all user uploaded content on a separate domain, but am wondering if I can take this a step further.</p>\n"}, {"tags": ["javascript", "python"], "comments": [{"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 2, "creation_date": 1576702469, "post_id": 59399789, "comment_id": 104988769, "body": "I don&#39;t think there&#39;s going to be any extra background info here. Two development teams built what they thought was needed for their respective implementations."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1576702568, "post_id": 59399789, "comment_id": 104988807, "body": "The browser console implementors decided not to show the prototypes of primitive JS types."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1576702612, "post_id": 59399789, "comment_id": 104988820, "body": "You can always use <code>console.log(Number.prototype)</code>"}], "owner": {"reputation": 305, "user_id": 9188248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e596f676873c756bfc4dadde14eafdbd?s=128&d=identicon&r=PG&f=1", "display_name": "Aiden Campbell", "link": "https://stackoverflow.com/users/9188248/aiden-campbell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576702172, "creation_date": 1576702172, "question_id": 59399789, "link": "https://stackoverflow.com/questions/59399789/console-dir-in-js-vs-dir-in-python", "title": "console.dir in JS vs dir in Python", "body": "<p>I am coming from a JS background and I am currently learning Python. I noticed that when I print dir(10) using python I get all the methods that live on the object.</p>\n\n<p>In JS if I run console.dir(10) I don't get all the methods that live on the number prototype chain.</p>\n\n<p>If everything in JS is an object just like in python why is this the case? Was it just implemented this way or there some background to this?</p>\n"}, {"tags": ["python", "scikit-learn", "data-science"], "answers": [{"tags": [], "owner": {"reputation": 582, "user_id": 12485858, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0293380964c0d2e827faa71680773dd?s=128&d=identicon&r=PG&f=1", "display_name": "t_e_o", "link": "https://stackoverflow.com/users/12485858/t-e-o"}, "is_accepted": false, "score": 1, "last_activity_date": 1576702586, "creation_date": 1576702586, "answer_id": 59399866, "question_id": 59399744, "link": "https://stackoverflow.com/questions/59399744/classification-report-using-confusion-matrix/59399866#59399866", "title": "classification_report using confusion matrix", "body": "<p>I suggest you to read this post here <a href=\"https://towardsdatascience.com/beyond-accuracy-precision-and-recall-3da06bea9f6c\" rel=\"nofollow noreferrer\">https://towardsdatascience.com/beyond-accuracy-precision-and-recall-3da06bea9f6c</a> . From the values in your confusion matrix, you can calculate the true positives, true negatives, false positives and false negatives. Afterwards, you can calculate any metrics which use them.</p>\n\n<p>I found one code example (<a href=\"https://www.programcreek.com/python/example/87183/sklearn.metrics.confusion_matrix\" rel=\"nofollow noreferrer\">source</a>)</p>\n\n<pre><code>def evaluate(self, dataset):\n        predictions = self.predict(dataset[:,0])\n        confusion_matrix = sklearn_confusion_matrix(dataset[:,1], predictions, labels=self.__classes)\n\n        precisions = []\n        recalls = []\n        accuracies = []\n\n        for gender in self.__classes:\n            idx = self.__classes_indexes[gender]\n            precision = 1\n            recall = 1\n            if np.sum(confusion_matrix[idx,:]) &gt; 0:\n                precision = confusion_matrix[idx][idx]/np.sum(confusion_matrix[idx,:])\n            if np.sum(confusion_matrix[:, idx]) &gt; 0:\n                recall = confusion_matrix[idx][idx]/np.sum(confusion_matrix[:, idx])\n            precisions.append(precision)\n            recalls.append(recall)\n\n        precision = np.mean(precisions)\n        recall = np.mean(recalls)\n        f1 = (2*(precision*recall))/float(precision+recall)\n        accuracy = np.sum(confusion_matrix.diagonal())/float(np.sum(confusion_matrix))\n\n        return precision, recall, accuracy, f1 \n</code></pre>\n\n<p>In the code you can see how the confusion matrix can be created and the scores can be derived. I know that you already have the matrix, so maybe you can just take a look at the second part and try to understand how the scores are calculated using the matrix only.</p>\n"}], "owner": {"reputation": 41, "user_id": 1690434, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60a4bd60651a9af25c157272dcb562ef?s=128&d=identicon&r=PG", "display_name": "Iam", "link": "https://stackoverflow.com/users/1690434/iam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1577434070, "creation_date": 1576701939, "last_edit_date": 1577434070, "question_id": 59399744, "link": "https://stackoverflow.com/questions/59399744/classification-report-using-confusion-matrix", "title": "classification_report using confusion matrix", "body": "<p>We have a confusion matrix for my ML model. </p>\n\n<pre><code>array([[508,  12],\n       [ 78,  36]])\n</code></pre>\n\n<p>We also have <code>classification_report</code></p>\n\n<pre><code>              precision    recall  f1-score   support\n\n           0       0.83      0.98      0.90       123\n           1       0.85      0.31      0.45        36\n\n    accuracy                           0.83       159\n   macro avg       0.84      0.64      0.67       159\nweighted avg       0.83      0.83      0.80       159\n</code></pre>\n\n<p>To understand the efficacy of this ML solution, we have a confusion matrix generated for traditionally built system </p>\n\n<pre><code>array([[305,  62],\n       [ 108,  50]])\n</code></pre>\n\n<p>Is there a way to generate <code>classification_report</code> from this? Standard function rather than coding, to ensure consistency.</p>\n"}, {"tags": ["python", "python-3.x", "anaconda", "conda", "spacy"], "answers": [{"comments": [{"owner": {"reputation": 1327, "user_id": 7046704, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rEY2QfhW0_A/AAAAAAAAAAI/AAAAAAAAAEM/Ouygw_ziPAs/photo.jpg?sz=128", "display_name": "Kelly ChowChow", "link": "https://stackoverflow.com/users/7046704/kelly-chowchow"}, "edited": false, "score": 0, "creation_date": 1576708550, "post_id": 59399893, "comment_id": 104990921, "body": "the second option doesn&#39;t seem to work: &quot;Usage:      pip3 &lt;command&gt; [options]  no such option: -U&quot;"}, {"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "reply_to_user": {"reputation": 1327, "user_id": 7046704, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rEY2QfhW0_A/AAAAAAAAAAI/AAAAAAAAAEM/Ouygw_ziPAs/photo.jpg?sz=128", "display_name": "Kelly ChowChow", "link": "https://stackoverflow.com/users/7046704/kelly-chowchow"}, "edited": false, "score": 0, "creation_date": 1576708905, "post_id": 59399893, "comment_id": 104991021, "body": "sorry, that was from their website. And I left off <code>install</code> but edited it in. try it now."}], "tags": [], "owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "is_accepted": true, "score": 2, "last_activity_date": 1576708884, "last_edit_date": 1576708884, "creation_date": 1576702721, "answer_id": 59399893, "question_id": 59399718, "link": "https://stackoverflow.com/questions/59399718/downloading-a-library-in-python3-env-through-conda/59399893#59399893", "title": "downloading a library in python3 env through conda", "body": "<p>Using Conda will not install things into the python virtual environment you created. If you'd like to make a conda virtual environment with a specific version of python and then install python packages into the conda environment you can do the following:</p>\n\n<pre><code>conda create -n .env python=x.x anaconda\nsource activate .env\nconda install -n .env -c conda-forge spacy\n</code></pre>\n\n<p>If you'd like to just use your python virtual environment instead and install space there follow these steps (I will assume .env doesn't exist here for completeness).</p>\n\n<pre><code>python3 -m venv .env\nsource .env/bin/activate\npip3 install spacy\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5254, "user_id": 24447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da74b7df5db7590fc140329c62b3e498?s=128&d=identicon&r=PG", "display_name": "nekomatic", "link": "https://stackoverflow.com/users/24447/nekomatic"}, "edited": false, "score": 1, "creation_date": 1576846782, "post_id": 59401406, "comment_id": 105037330, "body": "<code>venv</code> and <code>conda</code> are two different tools, and probably aren&#39;t even using the same Python interpreter on your system - you can&#39;t just mix and match them. If you create a conda environment and install into it with conda (or pip) it should work."}], "tags": [], "owner": {"reputation": 1327, "user_id": 7046704, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rEY2QfhW0_A/AAAAAAAAAAI/AAAAAAAAAEM/Ouygw_ziPAs/photo.jpg?sz=128", "display_name": "Kelly ChowChow", "link": "https://stackoverflow.com/users/7046704/kelly-chowchow"}, "is_accepted": false, "score": 0, "last_activity_date": 1576711823, "creation_date": 1576711823, "answer_id": 59401406, "question_id": 59399718, "link": "https://stackoverflow.com/questions/59399718/downloading-a-library-in-python3-env-through-conda/59401406#59401406", "title": "downloading a library in python3 env through conda", "body": "<p>I used <code>pip install</code> and python3 instead and it worked! </p>\n\n<pre><code>python -m venv .env\nsource .env/bin/activate\npip install -U spacy\npython -m spacy download en_core_web_sm\n</code></pre>\n\n<p>somehow, using <code>conda install</code> isn't working. </p>\n"}], "owner": {"reputation": 1327, "user_id": 7046704, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-rEY2QfhW0_A/AAAAAAAAAAI/AAAAAAAAAEM/Ouygw_ziPAs/photo.jpg?sz=128", "display_name": "Kelly ChowChow", "link": "https://stackoverflow.com/users/7046704/kelly-chowchow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 1, "accepted_answer_id": 59399893, "answer_count": 2, "score": 1, "last_activity_date": 1576711823, "creation_date": 1576701818, "question_id": 59399718, "link": "https://stackoverflow.com/questions/59399718/downloading-a-library-in-python3-env-through-conda", "title": "downloading a library in python3 env through conda", "body": "<p>I'm trying to download the spaCy library in a new python3 environment.</p>\n\n<p>Here's what I have:</p>\n\n<pre><code>python3 -m venv .env\nsource .env/bin/activate\nconda install -c conda-forge spacy\nconda install -c conda-forge spacy-lookups-data\npython3 -m spacy download en_core_web_sm\n</code></pre>\n\n<p>The error I got was: /Users/KerryChowChow/Dropbox/2019data_art/.env/bin/python3: No module named spacy</p>\n\n<p>I have both python2.7 and python3 under the environment. Tried both <code>python -m spacy download en_core_web_sm</code> and <code>python3 -m spacy download en_core_web_sm</code>\nBoth resulted in the same error. </p>\n\n<p>I think it's a location problem. </p>\n\n<p>I have previously successfully downloaded spaCy via the command line <code>conda install -c conda-forge spacy</code> so spaCy must be SOMEWHERE.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 1, "creation_date": 1576701724, "post_id": 59399680, "comment_id": 104988498, "body": "Can you write out the formula instead of us having to derive it from your code."}, {"owner": {"reputation": 63, "user_id": 10631505, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2An5vgAdjyY/AAAAAAAAAAI/AAAAAAAABWw/30sjPzoLswQ/photo.jpg?sz=128", "display_name": "hello", "link": "https://stackoverflow.com/users/10631505/hello"}, "reply_to_user": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 0, "creation_date": 1576702268, "post_id": 59399680, "comment_id": 104988688, "body": "The formula is in the if function. It deletes the row when sqrt((-111.55-longitude)^2+(75.6-latitude)^2))&gt;0.7."}], "answers": [{"comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1576745332, "post_id": 59399895, "comment_id": 105000152, "body": "Threading will make no difference to processing speed due to the GIL"}, {"owner": {"reputation": 570, "user_id": 9393525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4931f6f76220bad06a5821116792154a?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshya Srivastava", "link": "https://stackoverflow.com/users/9393525/lakshya-srivastava"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1576781643, "post_id": 59399895, "comment_id": 105018215, "body": "@roganjosh, this is a debatable topic and after release of python 3.2 GIL has been improved dramatically, regardless of that if i dare to say Dask could also be used to make it like parallel or fast. However I would love to discuss GIL with you some place other than comments. Cheers!"}], "tags": [], "owner": {"reputation": 570, "user_id": 9393525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4931f6f76220bad06a5821116792154a?s=128&d=identicon&r=PG&f=1", "display_name": "Lakshya Srivastava", "link": "https://stackoverflow.com/users/9393525/lakshya-srivastava"}, "is_accepted": false, "score": 0, "last_activity_date": 1576702739, "creation_date": 1576702739, "answer_id": 59399895, "question_id": 59399680, "link": "https://stackoverflow.com/questions/59399680/how-to-delete-csv-values-outside-a-radius/59399895#59399895", "title": "How to delete csv values outside a radius", "body": "<p>My best guess would to be to use <a href=\"https://pypi.org/project/haversine/\" rel=\"nofollow noreferrer\">Haversine Formula</a>, run it for all the coordinates and make a condition to remove all the coordinates greater than the radius distance.</p>\n\n<p>I would also incorporate threading if I had a large data set.</p>\n\n<p>Approach could also be taken from Monte Carlo Pi prediction, being approx but it could be made highly parallel and fast. <a href=\"https://www.hackster.io/arthur-brown/estimating-pi-with-the-monte-carlo-method-fb9676\" rel=\"nofollow noreferrer\">See here</a> </p>\n\n<p>Good luck.</p>\n"}, {"tags": [], "owner": {"reputation": 2212, "user_id": 6770842, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tjxUi.png?s=128&g=1", "display_name": "sciroccorics", "link": "https://stackoverflow.com/users/6770842/sciroccorics"}, "is_accepted": true, "score": 1, "last_activity_date": 1576703322, "creation_date": 1576703322, "answer_id": 59400003, "question_id": 59399680, "link": "https://stackoverflow.com/questions/59399680/how-to-delete-csv-values-outside-a-radius/59400003#59400003", "title": "How to delete csv values outside a radius", "body": "<p>I couldn't edit my comment (too late), so I post the whole modified code:</p>\n\n<pre><code>import pandas as pd\nimport numpy\nimport math\ndf =pd.read_csv(r\"C:\\\\Users\\\\tx163s\\\\Documents\\\\projectfiles\\\\values.csv\")\ndrop_indices = []\nfor row in range(len(df)):\n   if ((-111.55-df[row]['Longitude'])**2+(75.6-df[row]['Latitude'])**2) &gt; 0.49:\n      drop_indices.append(i)\ndf.drop(drop_indices, axis=0, inplace=True)\ndf.to_csv(r\"C:\\\\Users\\\\tx163s\\\\Documents\\\\projectfiles\\\\values.csv\")\n</code></pre>\n\n<p>The pb in your initial code was the missing 'inplace=True' to modify the incoming df instead of returning a new df with dropped rows.</p>\n\n<p>The other modification avoids repeated access to <code>df</code> as well as the use of <code>abs</code> and <code>sqrt</code>. The trick is: sqrt(x^2) > 0.7 is equivalent to x^2 > 0.49</p>\n\n<p>Finally note that using Euclidian distance on spherical coordinates (longitude,latitude) is not very pertinent, but that is another question...</p>\n"}], "owner": {"reputation": 63, "user_id": 10631505, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-2An5vgAdjyY/AAAAAAAAAAI/AAAAAAAABWw/30sjPzoLswQ/photo.jpg?sz=128", "display_name": "hello", "link": "https://stackoverflow.com/users/10631505/hello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 59400003, "answer_count": 2, "score": -1, "last_activity_date": 1576703322, "creation_date": 1576701560, "question_id": 59399680, "link": "https://stackoverflow.com/questions/59399680/how-to-delete-csv-values-outside-a-radius", "title": "How to delete csv values outside a radius", "body": "<p>I am a bit new to python and especially pandas. I have a csv file that has a table with values and their corresponding longitude and latitude that looks like this:</p>\n\n<pre><code>Longitude       Latitude    Value\n-123.603607     81.377536   0.348\n-124.017502     81.387791   0.386\n-124.432344     81.397611   0.383\n-124.848099     81.406995   0.405\n-125.264724     81.415942   --\n...            ...         ...\n</code></pre>\n\n<p>I am interested in finding all values whose longitude and latitude lies within a 0.7 lon/lat radius from the point -111.55 lon, 75.6 lat by removing all rows whose longitude/latitude are located outside of a radius. There was a question similar to this posted a few days ago, but I haven't found a way to do it yet.</p>\n\n<p>My current code uses the distance formula but ends up in an error:</p>\n\n<pre><code>import pandas as pd\nimport numpy\nimport math\ndf =pd.read_csv(r\"C:\\\\Users\\\\tx163s\\\\Documents\\\\projectfiles\\\\values.csv\")\ndrop_indices = []\nfor row in range(len(df)):\n   if(math.sqrt(abs(-111.55 - df[row]['Longitude'])*abs(-111.55 - df[row]['Longitude'])+abs(75.6-df[row]['Latitude'])*abs(75.6-df[row]['Latitude'])) &gt; 0.7):\n      drop_indices.append(i)\ndf.drop(drop_indices)\ndf.to_csv(r\"C:\\\\Users\\\\tx163s\\\\Documents\\\\projectfiles\\\\values.csv\")\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "email", "smtplib", "yagmail"], "comments": [{"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1576701878, "post_id": 59399652, "comment_id": 104988550, "body": "which version of python as you using"}, {"owner": {"reputation": 27, "user_id": 11068808, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yvXBjWALfOI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNmH9ZTftOzK0EO-hnmszhDXCx6XQ/mo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/11068808/alex"}, "reply_to_user": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1576702079, "post_id": 59399652, "comment_id": 104988613, "body": "@ChrisDoyle 3.7.3"}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1576702990, "post_id": 59399652, "comment_id": 104988955, "body": "stupid question but is your python version compiled with ssl? looking in smtplib it only loads the smtp_SSL if you have SSL installed"}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1576703032, "post_id": 59399652, "comment_id": 104988971, "body": "can you try a simple task which is in your email script as the first line before <code>import csv</code> try <code>import ssl</code> and see if you get any error about ssl module not found"}, {"owner": {"reputation": 27, "user_id": 11068808, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yvXBjWALfOI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNmH9ZTftOzK0EO-hnmszhDXCx6XQ/mo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/11068808/alex"}, "reply_to_user": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1576704067, "post_id": 59399652, "comment_id": 104989325, "body": "@ChrisDoyle not a stupid question at all. I&#39;m not very experienced with python, I just play around with writing scripts to make my job a bit easier. I did get the following error &quot;ImportError: DLL load failed: The specified module could not be found.&quot;"}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1576704273, "post_id": 59399652, "comment_id": 104989390, "body": "was expcting seomthing like <code>ModuleNotFoundError: No module named &#39;ssl&#39;</code> but sounds to me like you python evniroment wasnt compiled with ssl, which means then yagmail calls smtplib when it checks for ssl it doesnt find it so it never sets <code>smtp_SSL</code> which is why you then get the error"}, {"owner": {"reputation": 27, "user_id": 11068808, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yvXBjWALfOI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNmH9ZTftOzK0EO-hnmszhDXCx6XQ/mo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/11068808/alex"}, "reply_to_user": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "edited": false, "score": 0, "creation_date": 1576704365, "post_id": 59399652, "comment_id": 104989429, "body": "@ChrisDoyle What can I do to solve this issue / what can I look up to find instructions on how to solve this?"}, {"owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "reply_to_user": {"reputation": 27, "user_id": 11068808, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yvXBjWALfOI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNmH9ZTftOzK0EO-hnmszhDXCx6XQ/mo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/11068808/alex"}, "edited": false, "score": 0, "creation_date": 1576704556, "post_id": 59399652, "comment_id": 104989530, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/204508/discussion-between-chris-doyle-and-alex\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 11068808, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yvXBjWALfOI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNmH9ZTftOzK0EO-hnmszhDXCx6XQ/mo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/11068808/alex"}, "edited": false, "score": 0, "creation_date": 1576719932, "post_id": 59400472, "comment_id": 104993485, "body": "Thank you for the help and working through that with me. This was solved by creating a new python env in 3.6"}], "tags": [], "owner": {"reputation": 7801, "user_id": 1212401, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ed478436fcb05fd3ae15da650d2a8cd6?s=128&d=identicon&r=PG", "display_name": "Chris Doyle", "link": "https://stackoverflow.com/users/1212401/chris-doyle"}, "is_accepted": true, "score": 2, "last_activity_date": 1576706099, "creation_date": 1576706099, "answer_id": 59400472, "question_id": 59399652, "link": "https://stackoverflow.com/questions/59399652/solving-for-an-attributeerror-when-attempting-to-send-an-email-with-python/59400472#59400472", "title": "Solving for an AttributeError when attempting to send an email with Python?", "body": "<p>Hi Alex as discussed in comments and chat the reason you get the <code>AttributeError: module 'smtplib' has no attribute 'SMTP_SSL'</code> issue is because you dont have the ssl module installed in your python env. </p>\n\n<p>the smtplib module only loads smtp_SSL if <code>_has_ssl</code> is true. </p>\n\n<pre><code>if _have_ssl:\n\n    class SMTP_SSL(SMTP):\n\n....\n\n\n    __all__.append(\"SMTP_SSL\")\n</code></pre>\n\n<p>the variable <code>_has_ssl</code> is set by trying to import the <code>ssl</code> module. if the import fails then _has_ssl will be set as <code>False</code> other wise its set as true</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>try:\n    import ssl\nexcept ImportError:\n    _have_ssl = False\nelse:\n    _have_ssl = True\n</code></pre>\n\n<p>I would suggest if your python env is not crucial maybe try to reinstall python or create a new python env.</p>\n"}], "owner": {"reputation": 27, "user_id": 11068808, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yvXBjWALfOI/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQNmH9ZTftOzK0EO-hnmszhDXCx6XQ/mo/photo.jpg?sz=128", "display_name": "Alex", "link": "https://stackoverflow.com/users/11068808/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 59400472, "answer_count": 1, "score": 0, "last_activity_date": 1576706099, "creation_date": 1576701388, "last_edit_date": 1576702102, "question_id": 59399652, "link": "https://stackoverflow.com/questions/59399652/solving-for-an-attributeerror-when-attempting-to-send-an-email-with-python", "title": "Solving for an AttributeError when attempting to send an email with Python?", "body": "<p>I'm attempting to send an email using the library 'yagmail', but I'm getting the error \"AttributeError: module 'smtplib' has no attribute 'SMTP_SSL'\". I've successfully done this in the past, so I'm not sure if a code edit or a library update is causing an issue here. The code takes in a csv with a name, email address, and files names, while the user is prompted for this file as well as the email text template and the file containing the attachments.</p>\n\n<p>Other answers for this question were about the file being named \"email.py\", but my file is named \"ResidualsScript.py\", so I don't think that's the issue. Any help is greatly appreciated.</p>\n\n<p>The full error message is below:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:/Users/Name/Desktop/ResidualsScript.py\", line 99, in &lt;module&gt;\n    send_email()\n  File \"C:/Users/Name/Desktop/ResidualsScript.py\", line 91, in send_email\n    contents=[txt, file_list])\n  File \"C:\\Users\\Name\\Anaconda3\\envs\\Miniconda\\lib\\site-packages\\yagmail\\sender.py\", line 147, in send\n    self.login()\n  File \"C:\\Users\\Name\\Anaconda3\\envs\\Miniconda\\lib\\site-packages\\yagmail\\sender.py\", line 246, in login\n    self._login(self.credentials)\n  File \"C:\\Users\\Name\\Anaconda3\\envs\\Miniconda\\lib\\site-packages\\yagmail\\sender.py\", line 192, in _login\n    self.smtp = self.connection(self.host, self.port, **self.kwargs)\n  File \"C:\\Users\\Name\\Anaconda3\\envs\\Miniconda\\lib\\site-packages\\yagmail\\sender.py\", line 76, in connection\n    return smtplib.SMTP_SSL if self.ssl else smtplib.SMTP\nAttributeError: module 'smtplib' has no attribute 'SMTP_SSL'\n</code></pre>\n\n<p>Code Below</p>\n\n<pre><code>import csv\nimport os\n\nimport smtplib\nimport yagmail\n\nimport tkinter as tk\nfrom tkinter import *\nfrom tkinter import simpledialog\nfrom tkinter import filedialog\n\nroot = tk.Tk()\nroot.withdraw()\n\nyour_email = simpledialog.askstring(\"Email\", \"Enter your Email\")\nyour_password = simpledialog.askstring(\"Password\", \"Enter your Password\", show=\"*\")\n\nsubject_line = 'Test'\n\nLNAMES = []\nFNAMES = []\nEMAILS = []\nFILES = []\n\nyag = yagmail.SMTP(your_email, your_password)\n\nemail_data = filedialog.askopenfilename(filetypes=[('.csv', '.csv')],\n                                        title='Select the Email Data file')\n\ntxt_file = filedialog.askopenfilename(filetypes=[('.txt', '.txt')],\n                                      title='Select the EMail Template')\n\ndir_name = filedialog.askdirectory(title='Select Folder Containing Files')\nos.chdir(dir_name)\n\n\nclass EmailAttachmentNotFoundException(Exception):\n    pass\n\n\ndef send_email():\n\n    with open(email_data) as csv_file:\n        csv_reader = csv.reader(csv_file, delimiter=',')\n        line_count = 0\n\n        try:\n            for row in csv_reader:\n                last_name = row[0]\n                first_name = row[1]\n                email = row[2]\n                file1 = row[3]\n                file2 = row[4]\n                file_list = []\n\n                if not os.path.isfile(file1):\n                    raise EmailAttachmentNotFoundException('The attachment file \"{}\" was not found in the directory'\n                                                           .format(file1))\n                if not os.path.isfile(file2):\n                    raise EmailAttachmentNotFoundException('The attachment file \"{}\" was not found in the directory'\n                                                           .format(file2))\n\n                file_list.append(file1)\n                file_list.append(file2)\n\n                LNAMES.append(last_name)\n                FNAMES.append(first_name)\n                EMAILS.append(email)\n                FILES.append(file_list)\n\n                line_count += 1\n\n        except EmailAttachmentNotFoundException as a:\n            print(str(a))\n            input('Press Enter to exit')\n            sys.exit(1)\n\n    with open(txt_file) as f:\n        email_template = f.read()\n\n    try:\n        for first_name, last_name, email, file_list in zip(FNAMES, LNAMES, EMAILS, FILES):\n            txt = email_template.format(first_name=first_name,\n                                        last_name=last_name)\n\n            yag.send(to=email,\n                     subject=subject_line,\n                     contents=[txt, file_list])\n\n    except smtplib.SMTPAuthenticationError:\n        print('Incorrect Email or Password entered')\n        input('Press Enter to exit')\n        sys.exit(1)\n\n\nsend_email()\n\n</code></pre>\n"}, {"tags": ["python", "error-handling", "operating-system"], "comments": [{"owner": {"reputation": 6893, "user_id": 5997596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e957a1791225fee518cc14ff5553a5?s=128&d=identicon&r=PG", "display_name": "Azat Ibrakov", "link": "https://stackoverflow.com/users/5997596/azat-ibrakov"}, "edited": false, "score": 0, "creation_date": 1576701522, "post_id": 59399649, "comment_id": 104988428, "body": "because your script has no access to get stats of <code>C:\\test</code> path"}, {"owner": {"reputation": 537, "user_id": 4953820, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2b3f12e11e10ff518f2bc571a885136?s=128&d=identicon&r=PG&f=1", "display_name": "Kalev Maricq", "link": "https://stackoverflow.com/users/4953820/kalev-maricq"}, "reply_to_user": {"reputation": 6893, "user_id": 5997596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/46e957a1791225fee518cc14ff5553a5?s=128&d=identicon&r=PG", "display_name": "Azat Ibrakov", "link": "https://stackoverflow.com/users/5997596/azat-ibrakov"}, "edited": false, "score": 0, "creation_date": 1576701624, "post_id": 59399649, "comment_id": 104988464, "body": "@AzatIbrakov Why doesn&#39;t it have access if it created the folder?  How do I give it access?"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576701668, "post_id": 59399649, "comment_id": 104988479, "body": "I guess because it is directly under <code>C:\\ </code>. Try another path. Like your user folder. The <code>PermissionError</code> is raised before it is even checked to be a directory"}, {"owner": {"reputation": 537, "user_id": 4953820, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2b3f12e11e10ff518f2bc571a885136?s=128&d=identicon&r=PG&f=1", "display_name": "Kalev Maricq", "link": "https://stackoverflow.com/users/4953820/kalev-maricq"}, "reply_to_user": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1576701863, "post_id": 59399649, "comment_id": 104988541, "body": "@Tomerikoo I get the same result when doing it for C:\\Users\\myusername\\test"}], "answers": [{"comments": [{"owner": {"reputation": 537, "user_id": 4953820, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2b3f12e11e10ff518f2bc571a885136?s=128&d=identicon&r=PG&f=1", "display_name": "Kalev Maricq", "link": "https://stackoverflow.com/users/4953820/kalev-maricq"}, "edited": false, "score": 0, "creation_date": 1576763518, "post_id": 59402619, "comment_id": 105009236, "body": "What if I actually am denied access?  How do I distinguish between the two errors?"}, {"owner": {"reputation": 179, "user_id": 9641460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hp0FJYoqflM/AAAAAAAAAAI/AAAAAAAAAFY/7gqEAzw-wv8/photo.jpg?sz=128", "display_name": "Istvan Szekeres", "link": "https://stackoverflow.com/users/9641460/istvan-szekeres"}, "reply_to_user": {"reputation": 537, "user_id": 4953820, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2b3f12e11e10ff518f2bc571a885136?s=128&d=identicon&r=PG&f=1", "display_name": "Kalev Maricq", "link": "https://stackoverflow.com/users/4953820/kalev-maricq"}, "edited": false, "score": 0, "creation_date": 1576765205, "post_id": 59402619, "comment_id": 105010174, "body": "try to run this against a directory you actually don&#39;t have permissions to, and see what exception you get. ;)"}, {"owner": {"reputation": 537, "user_id": 4953820, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2b3f12e11e10ff518f2bc571a885136?s=128&d=identicon&r=PG&f=1", "display_name": "Kalev Maricq", "link": "https://stackoverflow.com/users/4953820/kalev-maricq"}, "edited": false, "score": 0, "creation_date": 1576771992, "post_id": 59402619, "comment_id": 105013982, "body": "I get WinError 5 and During handling of about exception: WinError 5.  So, what, do I chain the try except if pattern for everything that WinError 5 could mean?"}], "tags": [], "owner": {"reputation": 179, "user_id": 9641460, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hp0FJYoqflM/AAAAAAAAAAI/AAAAAAAAAFY/7gqEAzw-wv8/photo.jpg?sz=128", "display_name": "Istvan Szekeres", "link": "https://stackoverflow.com/users/9641460/istvan-szekeres"}, "is_accepted": false, "score": 0, "last_activity_date": 1576723198, "creation_date": 1576723198, "answer_id": 59402619, "question_id": 59399649, "link": "https://stackoverflow.com/questions/59399649/permissionerror-winerror-5-instead-of-isadirectoryerror/59402619#59402619", "title": "PermissionError: [WinError 5] instead of IsADirectoryError", "body": "<p>The docs (<a href=\"https://docs.python.org/3.8/library/exceptions.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3.8/library/exceptions.html</a>) say IsADirectoryError corresponds to errno=EISDIR, so this is raised iff the OS returned EISDIR. Windows, when removing a directory with os.remove raises WindowsError instead, as Python doesn't get EISDIR from the OS as a response but something else. This can simply be handled:</p>\n\n<pre><code>try:\n    os.remove(r'C:\\test')\nexcept WindowsError as e:\n    if e.winerror == 5: # maybe we tried to remove a directory, so\n        os.rmdir(r'C:\\test')\n    else:\n        raise # we just re-raise whatever the exception was.\n</code></pre>\n"}], "owner": {"reputation": 537, "user_id": 4953820, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e2b3f12e11e10ff518f2bc571a885136?s=128&d=identicon&r=PG&f=1", "display_name": "Kalev Maricq", "link": "https://stackoverflow.com/users/4953820/kalev-maricq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1576780639, "creation_date": 1576701376, "last_edit_date": 1576780639, "question_id": 59399649, "link": "https://stackoverflow.com/questions/59399649/permissionerror-winerror-5-instead-of-isadirectoryerror", "title": "PermissionError: [WinError 5] instead of IsADirectoryError", "body": "<p>According to official documentation for the os module, IsADirectoryError is the exception which is raised when os.remove() is used on a directory.  </p>\n\n<p>I would expect the following code to create and delete a directory, but instead it errors:</p>\n\n<pre><code>&gt;&gt;&gt; os.mkdir(r'C:\\test')\n&gt;&gt;&gt; try:\n...     os.remove(r'C:\\test')\n... except IsADirectoryError:\n...     os.rmdir(r'C:\\test')\n...\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 2, in &lt;module&gt;\nPermissionError: [WinError 5] Access is denied: 'C:\\\\test'\n</code></pre>\n\n<p>Why am I getting a permissions error instead of the expected IsADirectoryError?</p>\n\n<p>Edit: Simply running os.rmdir(r'C:\\test') works, so my script does have the access to delete the folder.</p>\n\n<p>Edit:  It's been proposed that I catch WinError 5 and try dealing with it as a folder and if that doesn't work, continue to handle the other error possibilities for WinError 5.  As can be shown below, this can quickly create ugly code.  Is there a way to distinguish between the different errors raising a WinError 5 exception?  If not, is there a neater way to handle all the possible cases?</p>\n\n<pre><code>try:\n    os.remove(r'C:\\test')\nexcept WindowsError as e:\n    if e.winerror==5: #maybe it's a directory\n        try: \n            os.rmdir(r'C:\\test')\n        except WindowsError as f:\n            if f.winerror==5: #maybe it's read-only\n                try:\n                    os.chmod(r'C:\\test', 0o777)\n                except WindowsError as g:\n                    if f.winerror==5: #maybe we don't have access\n                    ...\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 1, "creation_date": 1576700762, "post_id": 59399493, "comment_id": 104988167, "body": "what have you tried so far? let us help you. Basically, all you need is a double use of <a href=\"https://docs.python.org/3/library/stdtypes.html#str.split\" rel=\"nofollow noreferrer\"><code>split</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 6295, "user_id": 11938023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cca4cf2bdd1880354bec8cbcd73f8189?s=128&d=identicon&r=PG&f=1", "display_name": "oppressionslayer", "link": "https://stackoverflow.com/users/11938023/oppressionslayer"}, "is_accepted": false, "score": 2, "last_activity_date": 1576700833, "creation_date": 1576700833, "answer_id": 59399542, "question_id": 59399493, "link": "https://stackoverflow.com/questions/59399493/how-do-you-turn-a-string-input-into-a-matrix/59399542#59399542", "title": "How do you turn a string input into a matrix?", "body": "<p>np.matrix will do the trick:</p>\n\n<pre><code>np.matrix(\"1,2,3;4,5,6;7,8,9\".replace(\",\",' '))                                                                                                                                     \n\nmatrix([[1, 2, 3],\n        [4, 5, 6],\n        [7, 8, 9]])\n\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 12561039, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDbk2bJOZRCPgOpna-1xXp-LacglupD00s1Jyr3=k-s128", "display_name": "sergon begtas", "link": "https://stackoverflow.com/users/12561039/sergon-begtas"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "closed_date": 1576700678, "answer_count": 1, "score": -3, "last_activity_date": 1576703659, "creation_date": 1576700575, "last_edit_date": 1576703659, "question_id": 59399493, "link": "https://stackoverflow.com/questions/59399493/how-do-you-turn-a-string-input-into-a-matrix", "closed_reason": "Needs more focus", "title": "How do you turn a string input into a matrix?", "body": "<p>I'm having trouble turning my input into a matrix. My input includes the elements of a matrix, separated by commas, and the rows separated by semicolons.</p>\n\n<p>Example input: <code>\"1,2,3;4,5,6;7,8,9\"</code></p>\n\n<p>How could I use this string to construct the related 3x3 matrix?</p>\n"}, {"tags": ["python", "nginx", "flask", "systemd", "apscheduler"], "comments": [{"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1576700623, "post_id": 59399480, "comment_id": 104988100, "body": "You posted this earlier and I didn&#39;t have chance to say; are you stuck with <code>uWSGI</code> or could you use gunicorn with nginx?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1576700723, "post_id": 59399480, "comment_id": 104988140, "body": "I had very similar issues, but you can pass <code>--preload</code> to <code>gunicorn</code> to stop the child threads/processes from trying to do the jobs. For <code>uWSGI</code> I don&#39;t know. You probably shouldn&#39;t switch just on that basis, but maybe that&#39;ll give you a starting point to examine the issue and find an appropriate fix"}, {"owner": {"reputation": 11, "user_id": 6303521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZHqa0.jpg?s=128&g=1", "display_name": "LuPaw", "link": "https://stackoverflow.com/users/6303521/lupaw"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1576700825, "post_id": 59399480, "comment_id": 104988189, "body": "I am free to use whatever I want. I&#39;ve not heard of gunicorn yet. Does it make the task I&#39;m trying to achieve easier?"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1576700944, "post_id": 59399480, "comment_id": 104988240, "body": "I&#39;ve always used <code>gunicorn</code> but <code>--preload</code> was a (seemingly) permanent fix for my <code>APScheduler</code> issues. It&#39;s a 5 min job to launch that way and test it out anyway, I&#39;m not sure about the other things that uWSGI may do that gunicorn does/doesn&#39;t"}], "answers": [{"tags": [], "owner": {"reputation": 308, "user_id": 1177350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8382bb06f382136f176007c844ab3c0?s=128&d=identicon&r=PG", "display_name": "Paul", "link": "https://stackoverflow.com/users/1177350/paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1576803381, "creation_date": 1576803381, "answer_id": 59418685, "question_id": 59399480, "link": "https://stackoverflow.com/questions/59399480/when-i-enable-uwsgi-thread-support-and-start-the-scheduler-the-api-stops-working/59418685#59418685", "title": "When I enable uwsgi thread support and start the scheduler the api stops working", "body": "<p>I hesitate a bit to put this as an answer but here goes...</p>\n\n<p>In uwsgi app.ini after setting processes (5 in your case, I use 4) I also set\n<code>threads = 2</code>. I don't know if this has any direct relation to the <code>--enable-threads</code> option because that seems to be for your app to start it's own threads, but it might help for uwsgi to have its own threads per process. Also the UWSGI documentation points out (somewhere) that more processes are not necessarily better.</p>\n\n<p>Also on that, your logfile shows warnings from the scheduler that the maximum number of running instances being reached. I take this means the job you've given the scheduler is not finishing before the next scheduled run (1 minute later)? If that's the case is it stuck somewhere, blocking everything else?</p>\n\n<p>Finally, if all else fails, something else from the docs (<a href=\"https://uwsgi-docs.readthedocs.io/en/latest/WSGIquickstart.html#security-and-availability\" rel=\"nofollow noreferrer\">UWSGI Security and availability</a>)</p>\n\n<blockquote>\n  <p>A common problem with webapp deployment is \u201cstuck requests\u201d. All of your threads/workers are stuck (blocked on request) and your app cannot accept more requests. To avoid that problem you can set a <strong>harakiri</strong> timer.It is a monitor (managed by the master process) that will destroy processes stuck for more than the specified number of seconds (choose harakiri value carefully).</p>\n</blockquote>\n\n<p>And finally, finally :) there's a top like monitoring tool for uwsgi which might be handy to see what's going on, just </p>\n\n<pre><code>pip install uwsgitop\nuwsgitop 127.0.0.1:9191\n</code></pre>\n\n<p>plus telnetting into that adress:port apparently shows you a lot more info (haven't tried it myself).</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 6303521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZHqa0.jpg?s=128&g=1", "display_name": "LuPaw", "link": "https://stackoverflow.com/users/6303521/lupaw"}, "is_accepted": true, "score": 0, "last_activity_date": 1577983558, "creation_date": 1577983558, "answer_id": 59566990, "question_id": 59399480, "link": "https://stackoverflow.com/questions/59399480/when-i-enable-uwsgi-thread-support-and-start-the-scheduler-the-api-stops-working/59566990#59566990", "title": "When I enable uwsgi thread support and start the scheduler the api stops working", "body": "<p>Okay thanks for the answers. I did not get it to work with your suggested solutions. Therefore I simply decided to run the scheduler as separate systemd service. That way the scheduling does not stop the flask api from working.</p>\n"}], "owner": {"reputation": 11, "user_id": 6303521, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZHqa0.jpg?s=128&g=1", "display_name": "LuPaw", "link": "https://stackoverflow.com/users/6303521/lupaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1447, "favorite_count": 0, "accepted_answer_id": 59566990, "answer_count": 2, "score": 0, "last_activity_date": 1577983558, "creation_date": 1576700521, "last_edit_date": 1576726449, "question_id": 59399480, "link": "https://stackoverflow.com/questions/59399480/when-i-enable-uwsgi-thread-support-and-start-the-scheduler-the-api-stops-working", "title": "When I enable uwsgi thread support and start the scheduler the api stops working", "body": "<p>I'm new to python, flask, nginx and all that stuff.</p>\n\n<p>I have a flask app that acts as API for a frontend. Also when the flask app is started I would like to start a scheduled task with APScheduler.</p>\n\n<p>The problem is that when I enable uwsgi thread support and start the scheduler the api stops working (504 Gateway Time-out). But the scheduler works as seen in the logfile. When i remove the scheduler / thread support the api works but I obviously don't have the scheduler anymore.\nSomehow I suspect the scheduler prevents the flask app from being run properly?</p>\n\n<p>As I am new to those technologies I'll post my setup below. If you need any more file infos please tell me.(The whole thing is run on a raspberry pi and the api is accessed from my pc over lan)</p>\n\n<p><strong>app.service</strong></p>\n\n<pre><code>[Unit]\nDescription=uWSGI instance to serve app\nAfter=network.target\n\n[Service]\nUser=pi\nGroup=www-data\nWorkingDirectory=/home/pi/flask\nEnvironment=\"PATH=/home/pi/flask/appenv/bin\"\nExecStart=/home/pi/flask/appenv/bin/uwsgi --ini app.ini --enable-threads\n\n[Install]\nWantedBy=multi-user.target\n</code></pre>\n\n<p><strong>app.ini</strong></p>\n\n<pre><code>[uwsgi]\nmodule = wsgi:app\n\nmaster = true\nprocesses = 5\n\nsocket = /home/pi/flask/app.sock\nchmod-socket = 660\nvacuum = true\n\ndie-on-term = true\n</code></pre>\n\n<p><strong>app.py</strong></p>\n\n<pre><code>#!/usr/bin/env python3\n\nfrom flask import Flask, request\nfrom apscheduler.schedulers.background import BackgroundScheduler\n\nimport logging\nlogging.basicConfig(filename='logfile.log',level=logging.DEBUG)\n\nfrom api.Controller import Controller\nfrom Handler.Handler import Handler\nfrom apscheduler.executors.pool import ThreadPoolExecutor, ProcessPoolExecutor\n\napi_controller = Controller()\nhandler = Handler()\n\ndef startHandlerJob():\n    handler.ExecuteAllSensors()\n\napp = Flask( __name__ )\n\n\n@app.route('/app')\ndef apiDefinition():\n    return 'API Definition: GetHumidityValues, TODO'\n\n@app.route( \"/app/GetHumidityValues\", methods=[\"GET\"] )\ndef GetHumidityValues():\n    logging.info(\"app.py: API-call GetHumidityValues\")\n    return api_controller.GetHumidityValues()\n\n\nif (__name__ == \"__main__\"):\n    app.run(host='0.0.0.0')\n\nexecutors = {\n    'default': ThreadPoolExecutor(20),\n    'processpool': ProcessPoolExecutor(5)\n}\njob_defaults = {\n    'coalesce': False,\n    'max_instances': 1\n}\n\nscheduler = BackgroundScheduler(daemon=True, executors=executors, job_defaults=job_defaults)\nscheduler.start()\nscheduler.add_job(startHandlerJob,'cron', minute='*')\n</code></pre>\n\n<p><strong>logfile.log</strong></p>\n\n<p>WARNING:apscheduler.scheduler:Execution of job \"startHandlerJob (trigger: cron[minute='<em>'], next run at: 2019-12-18 19:01:00 CET)\" skipped: maximum number of running instances reached (1)\nDEBUG:apscheduler.scheduler:Next wakeup is due at 2019-12-18 19:02:00+01:00 (in 59.980780 seconds)\nDEBUG:apscheduler.scheduler:Looking for jobs to run\nWARNING:apscheduler.scheduler:Execution of job \"startHandlerJob (trigger: cron[minute='</em>'], next run at: 2019-12-18 19:02:00 CET)\" skipped: maximum number of running instances reached (1)\nDEBUG:apscheduler.scheduler:Next wakeup is due at 2019-12-18 19:03:00+01:00 (in 59.979407 seconds)</p>\n\n<p><strong>systemctl status app</strong></p>\n\n<pre><code>* app.service - uWSGI instance to serve app\n   Loaded: loaded (/etc/systemd/system/app.service; enabled; vendor preset: enabled)\n   Active: active (running) since Wed 2019-12-18 18:40:57 CET; 23min ago\n Main PID: 21129 (uwsgi)\n    Tasks: 8 (limit: 2200)\n   Memory: 22.9M\n   CGroup: /system.slice/app.service\n           |-21129 /home/pi/flask/appenv/bin/uwsgi --ini app.ini --enable-threads\n           |-21148 /home/pi/flask/appenv/bin/uwsgi --ini app.ini --enable-threads\n           |-21149 /home/pi/flask/appenv/bin/uwsgi --ini app.ini --enable-threads\n           |-21150 /home/pi/flask/appenv/bin/uwsgi --ini app.ini --enable-threads\n           |-21151 /home/pi/flask/appenv/bin/uwsgi --ini app.ini --enable-threads\n           `-21152 /home/pi/flask/appenv/bin/uwsgi --ini app.ini --enable-threads\n\nDec 18 18:40:57 raspberrypi uwsgi[21129]: mapped 386400 bytes (377 KB) for 5 cores\nDec 18 18:40:57 raspberrypi uwsgi[21129]: *** Operational MODE: preforking ***\nDec 18 18:40:59 raspberrypi uwsgi[21129]: WSGI app 0 (mountpoint='') ready in 2 seconds on interpreter 0xa6f900 pid: 21129 (default app)\nDec 18 18:40:59 raspberrypi uwsgi[21129]: *** uWSGI is running in multiple interpreter mode ***\nDec 18 18:40:59 raspberrypi uwsgi[21129]: spawned uWSGI master process (pid: 21129)\nDec 18 18:40:59 raspberrypi uwsgi[21129]: spawned uWSGI worker 1 (pid: 21148, cores: 1)\nDec 18 18:40:59 raspberrypi uwsgi[21129]: spawned uWSGI worker 2 (pid: 21149, cores: 1)\nDec 18 18:40:59 raspberrypi uwsgi[21129]: spawned uWSGI worker 3 (pid: 21150, cores: 1)\nDec 18 18:40:59 raspberrypi uwsgi[21129]: spawned uWSGI worker 4 (pid: 21151, cores: 1)\nDec 18 18:40:59 raspberrypi uwsgi[21129]: spawned uWSGI worker 5 (pid: 21152, cores: 1)\n</code></pre>\n\n<p>The logfile shows that the scheduler is active. But when I try to use http:/raspberryipaddress/app the answer is a 504 Gateway Time-out response. When I remove the scheduler and disable thread support this call works as desired.</p>\n\n<p>Any help is appreciated. Probably I am missing something obvious, because I am new to all those things.\nThanks!</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1576700550, "post_id": 59399450, "comment_id": 104988073, "body": "can you post a part of the dataset?"}], "answers": [{"tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": true, "score": 2, "last_activity_date": 1576701106, "last_edit_date": 1576701106, "creation_date": 1576700780, "answer_id": 59399527, "question_id": 59399450, "link": "https://stackoverflow.com/questions/59399450/reshaping-data-frame-and-counting-values-based-on-criteria/59399527#59399527", "title": "Reshaping data frame and counting values based on criteria", "body": "<h3>Method 1:</h3>\n\n<p>We can achieve this using <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.crosstab.html\" rel=\"nofollow noreferrer\"><code>pd.crosstab</code></a>, and then using the sum of <code>ProdA</code> and <code>ProdB</code> to <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Series.map.html\" rel=\"nofollow noreferrer\"><code>Series.map</code></a> <code>2 -&gt; Both</code> &amp; <code>1 -&gt; One</code>:</p>\n\n<pre><code>dfn = pd.crosstab(df['customer'], df['item']).reset_index()\ndfn['Type'] = dfn[['ProdA', 'ProdB']].sum(axis=1).map({2:'Both', 1:'One'})\n</code></pre>\n\n<p>Or we can use <code>np.where</code> in the last line to conditionally assign <code>Both</code> or <code>One</code>:</p>\n\n<pre><code>dfn['Type'] = np.where(dfn['ProdA'].eq(1) &amp; dfn['ProdB'].eq(1), 'Both', 'One')\n</code></pre>\n\n<pre><code>item customer  ProdA  ProdB  Type\n0       CustA      1      1  Both\n1       CustB      1      1  Both\n2       CustC      1      0   One\n3       CustD      1      0   One\n</code></pre>\n\n<hr>\n\n<h3>Method 2</h3>\n\n<p>We can also use <code>pd.crosstab</code> more extensively with the <code>margins=True</code> argument:</p>\n\n<pre><code>dfn = pd.crosstab(df['customer'], df['item'], \n                  margins=True, \n                  margins_name='Type').iloc[:-1].reset_index()\n\ndfn['Type'] = dfn['Type'].map({2:'Both', 1:'One'})\n</code></pre>\n\n<pre><code>item customer  ProdA  ProdB  Type\n0       CustA      1      1  Both\n1       CustB      1      1  Both\n2       CustC      1      0   One\n3       CustD      1      0   One\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 2, "last_activity_date": 1576700911, "creation_date": 1576700911, "answer_id": 59399553, "question_id": 59399450, "link": "https://stackoverflow.com/questions/59399450/reshaping-data-frame-and-counting-values-based-on-criteria/59399553#59399553", "title": "Reshaping data frame and counting values based on criteria", "body": "<p>Try using <code>set_index</code>, <code>unstack</code> and <code>np.select</code>:</p>\n\n<pre><code>df_out = df.set_index(['customer', 'item'])['qty'].unstack(fill_value=0)\nSumProd = df_out['ProdA'] + df_out['ProdB']\ndf_out['Type'] = np.select([SumProd==2, SumProd==1, SumProd==0],['Both', 'One', 'None'])\nprint(df_out)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>item      ProdA  ProdB  Type\ncustomer                    \nCustA         1      1  Both\nCustB         1      1  Both\nCustC         1      0   One\nCustD         1      0   One\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 6918164, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-murmNTn41nY/AAAAAAAAAAI/AAAAAAAAADg/vZ3goaI1Urs/photo.jpg?sz=128", "display_name": "David Remus", "link": "https://stackoverflow.com/users/6918164/david-remus"}, "is_accepted": false, "score": 0, "last_activity_date": 1576708527, "creation_date": 1576708527, "answer_id": 59400917, "question_id": 59399450, "link": "https://stackoverflow.com/questions/59399450/reshaping-data-frame-and-counting-values-based-on-criteria/59400917#59400917", "title": "Reshaping data frame and counting values based on criteria", "body": "<p>In addition to the other suggestions, you could skip Pandas entirely:</p>\n\n<pre><code>################################################################################\n## Data ingestion\n################################################################################\nimport csv\nimport StringIO\n\n# Formated to make the example more straightforward.\ninput_data = StringIO.StringIO('''item,customer,qty\nProdA,CustA,1\nProdA,CustB,1\nProdA,CustC,1\nProdA,CustD,1\nProdB,CustA,1\nProdB,CustB,1\n''')\n\nrecords = []\nreader = csv.DictReader(input_data)\nfor row in reader:\n  records.append(row)\n\n################################################################################\n## Data transformation.\n## Makes a Dict-of-Dicts. Each inner Dict contains all data for a single\n## customer. \n################################################################################\nproducts = {'ProdA', 'ProdB'}\ncustomer_data = {}\n\nfor r in records:\n  customer_id = r['customer']\n  if not customer_id in customer_data:\n    customer_data[customer_id] = {}\n  customer_data[customer_id][r['item']] = int(r['qty'])\n\n# Determines the customer type. \nfor c in customer_data:\n  c_data = customer_data[c]\n  missing_product = products.difference(c_data.keys())\n  matching_product = products.intersection(c_data.keys())\n  if missing_product:\n    for missing_p in missing_product:\n      c_data[missing_p] = 0\n    c_data['type'] = 'One'\n  else:\n    c_data['type'] = 'Both'\n\n################################################################################\n## Data display\n################################################################################\nfor i, c in enumerate(customer_data):\n  if i == 0:\n    print('\\t'.join(['ID'] + customer_data[c].keys()))\n  print('\\t'.join([c] + [str(x) for x in customer_data[c].values()]))\n</code></pre>\n\n<p>Which, for me, prints this</p>\n\n<pre><code>ID      ProdA   type    ProdB\nCustC   1       One     0\nCustB   1       Both    1\nCustA   1       Both    1\nCustD   1       One     0\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10837702, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mPmamT8aKnk/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYoCxOHyryKLFvs4i9Y1FYCvUy-RQ/mo/photo.jpg?sz=128", "display_name": "GBL_DO", "link": "https://stackoverflow.com/users/10837702/gbl-do"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 59399527, "answer_count": 3, "score": 0, "last_activity_date": 1576708527, "creation_date": 1576700361, "question_id": 59399450, "link": "https://stackoverflow.com/questions/59399450/reshaping-data-frame-and-counting-values-based-on-criteria", "title": "Reshaping data frame and counting values based on criteria", "body": "<p>I have the data set below. I am trying to determine the type of customer by providing a tag. My excel crashes due to too much data when I attempt, so trying to complete with Python.</p>\n\n<pre><code>item  customer qty\n------------------\nProdA CustA    1 \nProdA CustB    1\nProdA CustC    1\nProdA CustD    1\nProdB CustA    1\nProdB CustB    1\n</code></pre>\n\n<p>In Excel, I would:</p>\n\n<pre><code>1. Create new columns \"ProdA\", \"ProdB\", \"Type\"\n2. Remove duplicates for column \"customer\"\n3. COUNTIF Customer = ProdA, COUNTIF customer = ProdB\n4. IF(AND(ProdA = 1, ProdB = 1), \"Both\", \"One\")\n\n\ncustomer ProdA ProdB Type\n--------------------------\nCustA    1     1     Both\nCustB    1     1     Both\nCustC    1     0     One\nCustD    1     0     One\n</code></pre>\n"}, {"tags": ["python", "tensorflow", "vector", "tf-idf", "tfidfvectorizer"], "comments": [{"owner": {"reputation": 7187, "user_id": 8890604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bwv2A.jpg?s=128&g=1", "display_name": "David S", "link": "https://stackoverflow.com/users/8890604/david-s"}, "edited": false, "score": 0, "creation_date": 1576700831, "post_id": 59399386, "comment_id": 104988195, "body": "what is the third? you mentioned 3 but specified only 2"}], "answers": [{"tags": [], "owner": {"reputation": 9435, "user_id": 6858244, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wfU-doP3Fhc/AAAAAAAAAAI/AAAAAAAACbY/GNmdrBKqDSM/photo.jpg?sz=128", "display_name": "Prayson W. Daniel", "link": "https://stackoverflow.com/users/6858244/prayson-w-daniel"}, "is_accepted": true, "score": 0, "last_activity_date": 1576702602, "creation_date": 1576702602, "answer_id": 59399868, "question_id": 59399386, "link": "https://stackoverflow.com/questions/59399386/tf-idf-vectors-example-help/59399868#59399868", "title": "TF-IDF Vectors Example (HELP)", "body": "<p>The right way is to <code>fit</code> and <code>transform</code> == <code>fit_transform</code> your training data and <strong>only</strong> <code>transform</code> test data.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nfrom sklearn.feature_extraction.text import TfidfVectorizer\n\nvectorizer = TfidfVectorizer()\nxtrain_tfidf = vectorizer.fit_transform(x_train)\nxtest_tfidf = vectorizer.transform(x_test)\nprint(xtrain_tfidf.shape)\nprint(xtest_tfidf.shape)\n\n</code></pre>\n\n<p>You <strong>never</strong> <code>fit_transform</code> test data.</p>\n"}], "owner": {"reputation": 11, "user_id": 12560939, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9d0c059fed8796c02de0ba1258d6112?s=128&d=identicon&r=PG&f=1", "display_name": "JRC_FFC_VPLN", "link": "https://stackoverflow.com/users/12560939/jrc-ffc-vpln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 59399868, "answer_count": 1, "score": -1, "last_activity_date": 1576702602, "creation_date": 1576699966, "last_edit_date": 1576701626, "question_id": 59399386, "link": "https://stackoverflow.com/questions/59399386/tf-idf-vectors-example-help", "title": "TF-IDF Vectors Example (HELP)", "body": "<p>Hey i made 3 different approaches but i can't decide which is the right way to use TF-IDF:</p>\n\n<p>The first code does fit and transform to both x_train and x_test separately giving (5000, 94462)\n(5000, 93007).</p>\n\n<p>The second code uses both train and test which i think is not right because idf is calculated based on the training documents only, giving (5000, 152800) (5000, 152800).</p>\n\n<p>The third code gives (5000, 94462) (5000, 94462).</p>\n\n<h2>For me the third code is right because i used train data only and transform test data based on them.</h2>\n\n<pre><code>from sklearn.feature_extraction.text import TfidfVectorizer\nvectorizer = TfidfVectorizer()\nxtrain_tfidf = vectorizer.fit_transform(x_train)\nxtest_tfidf = vectorizer.fit_transform(x_test)\nprint(xtrain_tfidf.shape)\nprint(xtest_tfidf.shape)\n</code></pre>\n\n<hr>\n\n<pre><code>from sklearn.feature_extraction.text import TfidfVectorizer\nvectorizer = TfidfVectorizer()\nvectorizer.fit(x_train+x_test)\nxtrain_tfidf = vectorizer.transform(x_train)\nxtest_tfidf = vectorizer.transform(x_test)\nprint(xtrain_tfidf.shape)\nprint(xtest_tfidf.shape)\n</code></pre>\n\n<hr>\n\n<pre><code>from sklearn.feature_extraction.text import TfidfVectorizer\nvect = TfidfVectorizer()\nvect.fit(x_train)\nx_test_vectorized = vect.transform(x_test)\n</code></pre>\n\n<hr>\n"}, {"tags": ["python", "git", "azure-devops", "azure-pipelines"], "comments": [{"owner": {"reputation": 4527, "user_id": 8468264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8adc0e0b5afd1ff077dd16a48492c1e0?s=128&d=identicon&r=PG&f=1", "display_name": "d_kennetz", "link": "https://stackoverflow.com/users/8468264/d-kennetz"}, "edited": false, "score": 2, "creation_date": 1576700143, "post_id": 59399368, "comment_id": 104987939, "body": "I gave you an upvote because I think this is a reasonable well thought out question and I don&#39;t like it when people downvote without an explanation."}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 1, "creation_date": 1576700702, "post_id": 59399368, "comment_id": 104988133, "body": "Could you run a bash script to tag it after the build? It would look a bit more manual, but gives you the option to run custom code like you want, and it can use pipeline variables that you can set for the build"}], "answers": [{"comments": [{"owner": {"reputation": 12652, "user_id": 11508192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/irXPM.png?s=128&g=1", "display_name": "Hugh Lin - MSFT", "link": "https://stackoverflow.com/users/11508192/hugh-lin-msft"}, "edited": false, "score": 1, "creation_date": 1577064548, "post_id": 59402284, "comment_id": 105081331, "body": "Thanks for sharing your solution here, if so, would you please accept your solution as the answer? So it would be helpful for other members who get the same issue to find the solution easily. Have a nice day:)"}], "tags": [], "owner": {"reputation": 3980, "user_id": 622276, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/147e3ad2e9870b9e72166a3a093b4cbb?s=128&d=identicon&r=PG", "display_name": "Josh Peak", "link": "https://stackoverflow.com/users/622276/josh-peak"}, "is_accepted": true, "score": 2, "last_activity_date": 1576719885, "creation_date": 1576719885, "answer_id": 59402284, "question_id": 59399368, "link": "https://stackoverflow.com/questions/59399368/tag-git-repo-with-python-package-version-from-azure-pipelines-in-azure-devops-gi/59402284#59402284", "title": "Tag Git repo with Python Package version from Azure Pipelines in Azure DevOps Git repo", "body": "<p>Not happy with this approach but it achieves the outcome.</p>\n\n<p>Thanks @C.Nivs for the suggestion to just have a crack at a Bash script between the wheel successfully building and the task that exports the build artifact.</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code># Get Package Version\nexport PACKAGE_VERSION=\"$(python setup.py --version)\"\necho \"Package Version: v${PACKAGE_VERSION}\"\n\n# Get the body of the last merge commit message\ngit log HEAD~1..HEAD --format=\"RELEASE:v${PACKAGE_VERSION} Notes:%s%n%b\"\nexport TAG_MESSAGE=$(git log HEAD~1..HEAD --format=\"RELEASE:v${PACKAGE_VERSION} Notes:%s%n%b\")\necho $TAG_MESSAGE\n\n# Set the config for the CI to be able to commit a tag\ngit config --global user.email \"ci-pipeline@myorganisation.com\"\ngit config --global user.name \"Azure Pipelines: python-wheel-artifact\"\n\n# Create the tag locally as an annotated tag\n# https://stackoverflow.com/questions/11514075/what-is-the-difference-between-an-annotated-and-unannotated-tag\ngit tag -a \"v$PACKAGE_VERSION\" -m \"$TAG_MESSAGE\"\n\n# Update the push remote as the Personal Access Token URL\n# Inject these values from the Pipeline variables.\ngit remote set-url --push origin \"https://$(tag_push_username):$(tag_push_personal_access_token)@dev.azure.com/&lt;myorganization&gt;/&lt;myproject&gt;/_git/&lt;myreponame&gt;\"\n\n# Ensure the source of truth receives the tag.\ngit push --tags\n</code></pre>\n\n<p><strong>References:</strong></p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/11514075/what-is-the-difference-between-an-annotated-and-unannotated-tag\">What is the difference between an annotated and unannotated tag?</a></li>\n</ul>\n"}], "owner": {"reputation": 3980, "user_id": 622276, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/147e3ad2e9870b9e72166a3a093b4cbb?s=128&d=identicon&r=PG", "display_name": "Josh Peak", "link": "https://stackoverflow.com/users/622276/josh-peak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 1, "accepted_answer_id": 59402284, "answer_count": 1, "score": 1, "last_activity_date": 1576719885, "creation_date": 1576699886, "question_id": 59399368, "link": "https://stackoverflow.com/questions/59399368/tag-git-repo-with-python-package-version-from-azure-pipelines-in-azure-devops-gi", "title": "Tag Git repo with Python Package version from Azure Pipelines in Azure DevOps Git repo", "body": "<h1>Context</h1>\n\n<p>We use Azure DevOps for our Git Repos, Azure Pipelines for our CI/CD and Azure Artifacts for our private hosting of our python packages.</p>\n\n<h1>Goal</h1>\n\n<p>I want to:</p>\n\n<blockquote>\n  <p>Tag a Git repo with Python Package version from Azure Pipelines in Azure DevOps Git repo</p>\n</blockquote>\n\n<p><strong>Example</strong></p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>git tag -a \"$(python setup.py --version)\" -m \"Released version $(python setup.py --version)\"\n</code></pre>\n\n<p>I have read the Azure documentation but it seems they all use the Azure Pipeline variables for build number.</p>\n\n<p>On a build pipeline, there is a check box to tag the repo on successfully building the wheel artifact.</p>\n\n<p><a href=\"https://i.stack.imgur.com/JkyO3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JkyO3.png\" alt=\"Image of &#39;Get Sources Job&#39; option to tag a release on success\"></a></p>\n\n<p>But I'm not sure how to expose the package version as a pipeline variable since this job has no spot for me to escape to perform custom code. I'm sure there is a way to do it but I'm at the point where I need help and the documentation isn't guiding me to the right places based on what I'm querying and reading.</p>\n"}, {"tags": ["python", "html", "pandas", "beautifulsoup"], "comments": [{"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576716073, "post_id": 59399364, "comment_id": 104992759, "body": "Can\u2019t Pandas read HTML tables directly?"}, {"owner": {"reputation": 15659, "user_id": 9448090, "user_type": "registered", "profile_image": "https://graph.facebook.com/600951510246447/picture?type=large", "display_name": "Jack Fleeting", "link": "https://stackoverflow.com/users/9448090/jack-fleeting"}, "edited": false, "score": 0, "creation_date": 1576788631, "post_id": 59399364, "comment_id": 105020812, "body": "Can you post your desired output?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 8501883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c71f0b3536607ad787b43fea6d2270?s=128&d=identicon&r=PG&f=1", "display_name": "qwertytam", "link": "https://stackoverflow.com/users/8501883/qwertytam"}, "edited": false, "score": 0, "creation_date": 1576866528, "post_id": 59402733, "comment_id": 105045535, "body": "Thank you - I went with @GiovaniSalazar response"}, {"owner": {"reputation": 2231, "user_id": 12455879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a81cac450eb5d596c6ba57478e67396c?s=128&d=identicon&r=PG&f=1", "display_name": "dabingsou", "link": "https://stackoverflow.com/users/12455879/dabingsou"}, "reply_to_user": {"reputation": 51, "user_id": 8501883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c71f0b3536607ad787b43fea6d2270?s=128&d=identicon&r=PG&f=1", "display_name": "qwertytam", "link": "https://stackoverflow.com/users/8501883/qwertytam"}, "edited": false, "score": 0, "creation_date": 1577413571, "post_id": 59402733, "comment_id": 105164486, "body": "It&#39;s ok. I just offered another way"}], "tags": [], "owner": {"reputation": 2231, "user_id": 12455879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a81cac450eb5d596c6ba57478e67396c?s=128&d=identicon&r=PG&f=1", "display_name": "dabingsou", "link": "https://stackoverflow.com/users/12455879/dabingsou"}, "is_accepted": false, "score": 1, "last_activity_date": 1576724238, "creation_date": 1576724238, "answer_id": 59402733, "question_id": 59399364, "link": "https://stackoverflow.com/questions/59399364/extract-text-in-between-br-tags-using-beautifulsoup-to-separate-panda-columns/59402733#59402733", "title": "Extract text in between &lt;br/&gt; tags using BeautifulSoup to separate panda columns", "body": "<p>this is a regex + SimplifiedDoc solution</p>\n\n<pre><code>import re\nfrom simplified_scrapy.simplified_doc import SimplifiedDoc \nhtml='''&lt;table cellspacing=\"2\"&gt;&lt;tr valign=\"top\"&gt;&lt;td align=\"right\" class=\"liste_gross\"&gt;548&lt;br/&gt;&lt;/td&gt;&lt;td class=\"liste\"&gt;&lt;nobr&gt;02.01.2018&lt;/nobr&gt;\n&lt;br/&gt;08:45&lt;br/&gt;14:55 &lt;/td&gt;&lt;td class=\"liste_gross\"&gt;&lt;b&gt;MEL&lt;/b&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=\"liste\"&gt;&lt;b&gt;Melbourne&lt;/b&gt;&lt;br/&gt;\nAustralia&lt;br/&gt;Tullamarine&lt;/td&gt;&lt;td class=\"liste_gross\"&gt;&lt;b&gt;HKG&lt;/b&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=\"liste\"&gt;&lt;b&gt;Hong Kong&lt;/b&gt;&lt;br/&gt;\nChina&lt;br/&gt;International&lt;/td&gt;&lt;th align=\"right\" class=\"liste_gross\"&gt;&lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"&gt;\n&lt;tr&gt;&lt;td align=\"right\"&gt;7,420 &lt;/td&gt;&lt;td&gt;km&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=\"right\"&gt;9:25 &lt;/td&gt;&lt;td&gt;h&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;\n&lt;/th&gt;&lt;td class=\"liste\"&gt;Cathay Pacific&lt;br/&gt;CX34&lt;/td&gt;&lt;td class=\"liste\"&gt;A350-900&lt;br/&gt;B-LRR&lt;/td&gt;\n&lt;td class=\"liste\"&gt;32A/Window&lt;br/&gt;&lt;small&gt;EconomyPlus&lt;br/&gt;Passenger&lt;br/&gt;Personal&lt;/small&gt;&lt;/td&gt;&lt;td class=\"liste\"&gt;\n&lt;br/&gt;&lt;select onchange=\"if (this.value != 'NIL') location.href=this.value;\" style=\"width:60px;\"&gt;\n&lt;option value=\"NIL\"&gt;Flight&lt;/option&gt;&lt;option value=\"?go=flugdaten_edit&amp;amp;id=14619399&amp;amp;dbpos=0\"&gt;edit&lt;/option&gt;\n&lt;option value=\"NIL\"&gt;----------&lt;/option&gt;&lt;option value=\"?go=flugdaten_loeschen&amp;amp;id=14619399&amp;amp;dbpos=0\"&gt;delete\n&lt;/option&gt;&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;\n'''\ndoc = SimplifiedDoc(html)\ntable = doc.getElement('table',attr=\"cellspacing\",value=\"2\")\nrows = table.trs # get all rows\ndata = []\nfor row in rows:\n  arr = []\n  # cols = row.tds # get all tds\n  cols = row.children # td and th\n  i = 0\n  while i&lt;len(cols):\n    if i==1: # for example\n      items = re.split('&lt;br\\s*/&gt;',cols[i].html)\n      for item in items:\n        arr.append(doc.removeHtml(item))\n    elif cols[i].tag=='th': # deal it by yourself\n      tds = cols[i].tds\n      print (tds)\n    else:\n      arr.append(cols[i].text)\n    i+=1\n  data.append(arr)\nprint (data) # [['548', '02.01.2018', '08:45', '14:55', 'MEL', 'MelbourneAustraliaTullamarine', 'HKG', 'Hong KongChinaInternational', 'Cathay PacificCX34', 'A350-900B-LRR', '32A/WindowEconomyPlusPassengerPersonal', 'Flightedit----------delete']]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 8501883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c71f0b3536607ad787b43fea6d2270?s=128&d=identicon&r=PG&f=1", "display_name": "qwertytam", "link": "https://stackoverflow.com/users/8501883/qwertytam"}, "edited": false, "score": 0, "creation_date": 1576866480, "post_id": 59403377, "comment_id": 105045523, "body": "Thank you - this got me there. I then added a few more error checking items as a result of artifacts in the original data not present in the example."}], "tags": [], "owner": {"reputation": 1533, "user_id": 10569027, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dPPb9.jpg?s=128&g=1", "display_name": "GiovaniSalazar", "link": "https://stackoverflow.com/users/10569027/giovanisalazar"}, "is_accepted": true, "score": 2, "last_activity_date": 1576730347, "creation_date": 1576730347, "answer_id": 59403377, "question_id": 59399364, "link": "https://stackoverflow.com/questions/59399364/extract-text-in-between-br-tags-using-beautifulsoup-to-separate-panda-columns/59403377#59403377", "title": "Extract text in between &lt;br/&gt; tags using BeautifulSoup to separate panda columns", "body": "<p>Maybe this can help you ...you can use pd.read_html for parse html table like this :</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport pandas as pd\nimport re\n\nsoup = BeautifulSoup(open(\"table.html\"), \"lxml\")\n# Replace &lt;br&gt; by | ...\ns = re.sub('&lt;br\\s*/&gt;','|', str(soup))\n\ndf_table = pd.read_html(s)\n# To dataframe\ndf_table=df_table[0]\ndf_table.columns = ['flightno', 'fulldate','codedept','full_dept', 'countrydept', 'full_arr', 'KM', 'date_plane', 'date_plane_2','date_pass', 'inputcol']\n\n#Split columns using value |\ndf_table[['date','timedept','timearr']] = df_table['fulldate'].str.split('|', expand=True)\ndf_table[['citydept','countrydept','namedept']] = df_table['full_dept'].str.split('|', expand=True)\ndf_table[['cityarr','countryarr','namearr']] = df_table['full_arr'].str.split('|', expand=True)\ndf_table[['airline','flightno']] = df_table['date_plane'].str.split('|', expand=True)\ndf_table[['manuf','type']] = df_table['date_plane_2'].str.split('|', expand=True)\ndf_table[['full_seat','class','pass','reason']] = df_table['date_pass'].str.split('|', expand=True)\ndf_table[['seat', 'loc']] = df_table['full_seat'].str.split('/', expand=True)\n#Drop columns not necessary\ndf_table.drop(['fulldate','full_dept','full_arr','date_plane','date_plane_2','date_pass','full_seat'], axis=1, inplace=True)\n#print(df_table)\ndf_table.to_csv('table_to_csv.csv')\n</code></pre>\n\n<p>table.html contains :</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;body&gt;\n&lt;table  border='1'&gt;\n&lt;tr valign=\"top\"&gt;&lt;td align=\"right\" class=\"liste_gross\"&gt;548&lt;br/&gt;&lt;/td&gt;&lt;td class=\"liste\"&gt;&lt;nobr&gt;02.01.2018&lt;/nobr&gt;\n&lt;br/&gt;08:45&lt;br/&gt;14:55 &lt;/td&gt;&lt;td class=\"liste_gross\"&gt;&lt;b&gt;MEL&lt;/b&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=\"liste\"&gt;&lt;b&gt;Melbourne&lt;/b&gt;&lt;br/&gt;\nAustralia&lt;br/&gt;Tullamarine&lt;/td&gt;&lt;td class=\"liste_gross\"&gt;&lt;b&gt;HKG&lt;/b&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=\"liste\"&gt;&lt;b&gt;Hong Kong&lt;/b&gt;&lt;br/&gt;\nChina&lt;br/&gt;International&lt;/td&gt;&lt;th align=\"right\" class=\"liste_gross\"&gt;&lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"&gt;\n&lt;tr&gt;&lt;td align=\"right\"&gt;7,420 &lt;/td&gt;&lt;td&gt;km&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=\"right\"&gt;9:25 &lt;/td&gt;&lt;td&gt;h&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;\n&lt;/th&gt;&lt;td class=\"liste\"&gt;Cathay Pacific&lt;br/&gt;CX34&lt;/td&gt;&lt;td class=\"liste\"&gt;A350-900&lt;br/&gt;B-LRR&lt;/td&gt;\n&lt;td class=\"liste\"&gt;32A/Window&lt;br/&gt;&lt;small&gt;EconomyPlus&lt;br/&gt;Passenger&lt;br/&gt;Personal&lt;/small&gt;&lt;/td&gt;&lt;td class=\"liste\"&gt;\n&lt;br/&gt;&lt;select onchange=\"if (this.value != 'NIL') location.href=this.value;\" style=\"width:60px;\"&gt;\n&lt;option value=\"NIL\"&gt;Flight&lt;/option&gt;&lt;option value=\"?go=flugdaten_edit&amp;amp;id=14619399&amp;amp;dbpos=0\"&gt;edit&lt;/option&gt;\n&lt;option value=\"NIL\"&gt;----------&lt;/option&gt;&lt;option value=\"?go=flugdaten_loeschen&amp;amp;id=14619399&amp;amp;dbpos=0\"&gt;delete\n&lt;/option&gt;&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 8501883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/57c71f0b3536607ad787b43fea6d2270?s=128&d=identicon&r=PG&f=1", "display_name": "qwertytam", "link": "https://stackoverflow.com/users/8501883/qwertytam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 1, "accepted_answer_id": 59403377, "answer_count": 2, "score": -1, "last_activity_date": 1576730347, "creation_date": 1576699863, "question_id": 59399364, "link": "https://stackoverflow.com/questions/59399364/extract-text-in-between-br-tags-using-beautifulsoup-to-separate-panda-columns", "title": "Extract text in between &lt;br/&gt; tags using BeautifulSoup to separate panda columns", "body": "<p>I have an HTML data table scrape (see example below) that I'm trying to save into a panda df. I can successfully extract each row and parse each HTML <code>&lt;td&gt;</code> column into a separate column in the df (see code below). The issue I'm having, is that in some of the columns, there are multiple data items separated by <code>&lt;br&gt;</code> or <code>&lt;nobr&gt;</code>. Each element that is separated by <code>&lt;br&gt;</code> or <code>&lt;nobr&gt;</code> should go into its own separate df column (see current and desired df columns below). For example, the current code will output the date and time data as <code>09.10.201918:5020:25</code> instead of having the date <code>09.10.2019</code>, departure time <code>18:50</code> and arrival time <code>20:25</code> separated into their own columns in the df.</p>\n\n<p><strong>Sample HTML Row</strong></p>\n\n<pre><code>&lt;tr valign=\"top\"&gt;&lt;td align=\"right\" class=\"liste_gross\"&gt;548&lt;br/&gt;&lt;/td&gt;&lt;td class=\"liste\"&gt;&lt;nobr&gt;02.01.2018&lt;/nobr&gt;\n&lt;br/&gt;08:45&lt;br/&gt;14:55 &lt;/td&gt;&lt;td class=\"liste_gross\"&gt;&lt;b&gt;MEL&lt;/b&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=\"liste\"&gt;&lt;b&gt;Melbourne&lt;/b&gt;&lt;br/&gt;\nAustralia&lt;br/&gt;Tullamarine&lt;/td&gt;&lt;td class=\"liste_gross\"&gt;&lt;b&gt;HKG&lt;/b&gt;&lt;br/&gt;&lt;/td&gt;&lt;td class=\"liste\"&gt;&lt;b&gt;Hong Kong&lt;/b&gt;&lt;br/&gt;\nChina&lt;br/&gt;International&lt;/td&gt;&lt;th align=\"right\" class=\"liste_gross\"&gt;&lt;table border=\"0\" cellpadding=\"0\" cellspacing=\"0\"&gt;\n&lt;tr&gt;&lt;td align=\"right\"&gt;7,420\u00a0&lt;/td&gt;&lt;td&gt;km&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td align=\"right\"&gt;9:25\u00a0&lt;/td&gt;&lt;td&gt;h&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;\n&lt;/th&gt;&lt;td class=\"liste\"&gt;Cathay Pacific&lt;br/&gt;CX34&lt;/td&gt;&lt;td class=\"liste\"&gt;A350-900&lt;br/&gt;B-LRR&lt;/td&gt;\n&lt;td class=\"liste\"&gt;32A/Window&lt;br/&gt;&lt;small&gt;EconomyPlus&lt;br/&gt;Passenger&lt;br/&gt;Personal&lt;/small&gt;&lt;/td&gt;&lt;td class=\"liste\"&gt;\n&lt;br/&gt;&lt;select onchange=\"if (this.value != 'NIL') location.href=this.value;\" style=\"width:60px;\"&gt;\n&lt;option value=\"NIL\"&gt;Flight&lt;/option&gt;&lt;option value=\"?go=flugdaten_edit&amp;amp;id=14619399&amp;amp;dbpos=0\"&gt;edit&lt;/option&gt;\n&lt;option value=\"NIL\"&gt;----------&lt;/option&gt;&lt;option value=\"?go=flugdaten_loeschen&amp;amp;id=14619399&amp;amp;dbpos=0\"&gt;delete\n&lt;/option&gt;&lt;/select&gt;&lt;/td&gt;&lt;/tr&gt;\n</code></pre>\n\n<p><strong>Python Code With Current Column Names</strong></p>\n\n<pre><code>soup = BeautifulSoup(response, 'html.parser') # Parse the response using BeautifulSoup\ntable = soup.find('table', attrs={'cellspacing' : 2}) # Select the only table with this attribute\nrows = table.find_all('tr')\nfor row in rows:\n   cols = row.find_all('td')\n   cols = [ele.text.strip() for ele in cols]\n   data.append([ele for ele in cols if ele]) # Get rid of empty values\n\ndftable = pd.DataFrame(data, columns = ['flightno', 'date.timedept.timearr', 'codedept',\n                                'citydept.countrydept.namedept', 'codearr', 'cityarr.countryarr.namearr',\n                                'dist', 'distunits', 'time', 'timeunits', 'airline.flightno',\n                                'manuf.type.rego', 'seat.loc.class.pass.reason', 'inputcol'])\ndftable = dftable.dropna()  # Drop incomplete rows\n</code></pre>\n\n<p><strong>Desired Column Name List</strong></p>\n\n<pre><code>dftable = pd.DataFrame(data, columns = ['flightno', 'date', 'timedept', 'timearr', 'codedept',\n                                'citydept', 'countrydept', 'namedept', 'codearr', 'cityarr', 'countryarr',\n                                'namearr', 'dist', 'distunits', 'time', 'timeunits', 'airline', 'flightno',\n                                'manuf', 'type', 'rego', 'seat', 'loc', 'class', 'pass', 'reason', 'inputcol'])\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1576700002, "post_id": 59399357, "comment_id": 104987888, "body": "The regex which fails is <code>\\chile\\b</code>. I imagine that is not what you wanted to search for."}, {"owner": {"reputation": 572, "user_id": 11999825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3e97aa20d3eed4377f28754dd888919?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Henrique", "link": "https://stackoverflow.com/users/11999825/luis-henrique"}, "reply_to_user": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1576700067, "post_id": 59399357, "comment_id": 104987911, "body": "I would like it to look up regardless of array order"}, {"owner": {"reputation": 572, "user_id": 11999825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3e97aa20d3eed4377f28754dd888919?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Henrique", "link": "https://stackoverflow.com/users/11999825/luis-henrique"}, "reply_to_user": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 0, "creation_date": 1576700190, "post_id": 59399357, "comment_id": 104987957, "body": "Example: Array 1 -&gt; Line1 == Array2 -&gt; All lines"}, {"owner": {"reputation": 1202, "user_id": 147204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e593ac63e5f25649b701dc25f69d1b7?s=128&d=identicon&r=PG", "display_name": "luis.parravicini", "link": "https://stackoverflow.com/users/147204/luis-parravicini"}, "edited": false, "score": 0, "creation_date": 1576700230, "post_id": 59399357, "comment_id": 104987977, "body": "What is the purpose of the initial `\\\\` ?"}, {"owner": {"reputation": 572, "user_id": 11999825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3e97aa20d3eed4377f28754dd888919?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Henrique", "link": "https://stackoverflow.com/users/11999825/luis-henrique"}, "edited": false, "score": 0, "creation_date": 1576700274, "post_id": 59399357, "comment_id": 104987991, "body": "I&#39;m new to regex, just trying to do it, suggest otherwise?"}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1576702319, "post_id": 59399357, "comment_id": 104988714, "body": "First off, you should use <a href=\"https://docs.python.org/2/library/re.html#re.escape\" rel=\"nofollow noreferrer\"><code>re.escape</code></a> to insert code into your regex. Second off, the first backslash is not needed (and causes your issue), third, use <code>r&#39;&#39;</code>: <code>re.escape(x) + r&#39;\\b&#39;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": false, "score": 2, "last_activity_date": 1576700520, "creation_date": 1576700520, "answer_id": 59399479, "question_id": 59399357, "link": "https://stackoverflow.com/questions/59399357/error-bad-escape-in-python-script-with-regex/59399479#59399479", "title": "Error: bad escape in Python script with regex", "body": "<p>If you <code>zip</code>, you'll only get pairwise matches. Given the nature of your search, you can just join up the haystack into a space-delimited string and join needles into a pattern with alternation and let <code>findall</code> chug away:</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; needles = ['brasil', 'argentina', 'chile', 'canada']\n&gt;&gt;&gt; haystack = ['brasil.sao_paulo', 'chile', 'argentina']\n&gt;&gt;&gt; re.findall(r\"\\b%s\\b\" % \"|\".join(needles), \" \".join(haystack), re.I)\n['brasil', 'chile', 'argentina']\n</code></pre>\n\n<p>The intent behind <code>\\\\</code> in the original regex is unclear, so I assume you want <code>\\b</code> on both sides of the pattern.</p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 6918164, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-murmNTn41nY/AAAAAAAAAAI/AAAAAAAAADg/vZ3goaI1Urs/photo.jpg?sz=128", "display_name": "David Remus", "link": "https://stackoverflow.com/users/6918164/david-remus"}, "is_accepted": true, "score": 4, "last_activity_date": 1576700939, "last_edit_date": 1576700939, "creation_date": 1576700680, "answer_id": 59399513, "question_id": 59399357, "link": "https://stackoverflow.com/questions/59399357/error-bad-escape-in-python-script-with-regex/59399513#59399513", "title": "Error: bad escape in Python script with regex", "body": "<p>If I understand correctly, you don't need regex here.</p>\n\n<pre><code>group_1 = ['brasil','argentina','chile','canada']\ngroup_2 = ['brasil.sao_paulo','chile','argentina']\n\nfor x in group_1:\n    # For group 2 only, this picks out the part of the string that appears before the first \".\".\n  if x in [y.split('.')[0] for y in group_2]:\n    print(\"Match: {}\".format(x))\n  else:\n    print(\"Not match: {}\".format(x))\n</code></pre>\n\n<p>which returns</p>\n\n<pre><code>Match: brasil\nMatch: argentina\nMatch: chile\nNot match: canada\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 278, "user_id": 11263320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4048b6400577f1e5708b1cc7a5024e78?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Chatiskatzi", "link": "https://stackoverflow.com/users/11263320/michael-chatiskatzi"}, "is_accepted": false, "score": 1, "last_activity_date": 1576708975, "last_edit_date": 1576708975, "creation_date": 1576702803, "answer_id": 59399907, "question_id": 59399357, "link": "https://stackoverflow.com/questions/59399357/error-bad-escape-in-python-script-with-regex/59399907#59399907", "title": "Error: bad escape in Python script with regex", "body": "<p>A simple solution with the <code>any</code> method:</p>\n\n<pre><code>array = ['brasil', 'argentina', 'chile', 'canada']\narray2 = ['brasil.sao_paulo', 'chile', 'argentina']\n\nfor x in array:\n    if any(x.casefold() in y.casefold() for y in array2):\n        print(\"Match:\", x)\n    else:\n        print(\"Not match:\", x)\n</code></pre>\n\n<p><a href=\"https://tio.run/##ZcxBCsIwEAXQfU4xdJMGShd1V/AIegEpMrapDcRJSCI0p48mgq04q/nMf2NjWAwdUkLnMMIRLvzm0CvNG@Do7pKCIsxhXJSWZUHCCfnACul2pvVorhaf2vyA7c3A2GwcrKAIiu4ZvEfNgBTrtR3Ry9noqRa5Efc5u/h1nfjIPNYpCnV1wjAufdXAKspJai//SmcT4LEVU3oB\" rel=\"nofollow noreferrer\">Try it online!</a></p>\n\n<p><strong>Edit</strong>: Using <code>casefold()</code> to make it case-insensitive.</p>\n"}], "owner": {"reputation": 572, "user_id": 11999825, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3e97aa20d3eed4377f28754dd888919?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Henrique", "link": "https://stackoverflow.com/users/11999825/luis-henrique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 59399513, "answer_count": 3, "score": 1, "last_activity_date": 1576708975, "creation_date": 1576699822, "last_edit_date": 1576701184, "question_id": 59399357, "link": "https://stackoverflow.com/questions/59399357/error-bad-escape-in-python-script-with-regex", "title": "Error: bad escape in Python script with regex", "body": "<p>I am trying to do a search between lists and return the value when it matches, and when it does not.</p>\n\n<pre><code>import re\n\narray = ['brasil','argentina','chile','canada']\narray2 = ['brasil.sao_paulo','chile','argentina']\n\nfor x,y in zip(array,array2):\n  if re.search('\\\\{}\\\\b'.format(x), y, re.IGNORECASE):\n    print(\"Match: {}\".format(x))\n  else:\n    print(\"Not match: {}\".format(y))\n</code></pre>\n\n<p>Output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Not match: brasil.sao_paulo\nNot match: chile\nTraceback (most recent call last):\n  File \"main.py\", line 7, in &lt;module&gt;\n    if re.search('\\\\{}\\\\b'.format(x), y, re.IGNORECASE):\n  File \"/usr/local/lib/python3.7/re.py\", line 183, in search\nre.error: bad escape \\c at position 0\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Match: brasil\nMatch: argentina\nMatch: chile\nNot match: canada\n</code></pre>\n"}, {"tags": ["python", "pyqt5"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11653746, "user_type": "registered", "profile_image": "https://graph.facebook.com/889238571431280/picture?type=large", "display_name": "Jo&#227;o Pedro Farineli", "link": "https://stackoverflow.com/users/11653746/jo%c3%a3o-pedro-farineli"}, "edited": false, "score": 0, "creation_date": 1576760345, "post_id": 59399788, "comment_id": 105007576, "body": "Thanks so much for the reply S. Nick! Is there a possibility to keep the loop? because I don&#39;t need it for the algorithm to perform a calculation while updating the progress bar."}], "tags": [], "owner": {"reputation": 10411, "user_id": 7767694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DoPOp.png?s=128&g=1", "display_name": "S. Nick", "link": "https://stackoverflow.com/users/7767694/s-nick"}, "is_accepted": false, "score": 0, "last_activity_date": 1576702157, "creation_date": 1576702157, "answer_id": 59399788, "question_id": 59399334, "link": "https://stackoverflow.com/questions/59399334/how-do-i-update-a-progress-bar-while-looping/59399788#59399788", "title": "How do I update a progress bar while looping?", "body": "<p><strong>Never change a module created in Qt Designer.</strong></p>\n\n<p>The <code>while</code> loop freezes the interface. You need to use <code>threading + signals</code> or <code>QTimer</code>.</p>\n\n<p>Try it:</p>\n\n<pre><code>from PyQt5 import QtCore, QtGui, QtWidgets\n\nclass Ui_win_1(object):\n    def setupUi(self, win_1):\n        win_1.setObjectName(\"win_1\")\n        win_1.resize(500, 100)\n        self.pushButton = QtWidgets.QPushButton(win_1)\n        self.pushButton.setGeometry(QtCore.QRect(210, 40, 75, 23))\n        self.pushButton.setObjectName(\"pushButton\")\n        self.retranslateUi(win_1)\n        QtCore.QMetaObject.connectSlotsByName(win_1)\n        self.pushButton.clicked.connect(self.exec_win_2)\n\n    def retranslateUi(self, win_1):\n        _translate = QtCore.QCoreApplication.translate\n        win_1.setWindowTitle(_translate(\"win_1\", \"Win_1\"))\n        self.pushButton.setText(_translate(\"win_1\", \"Run\"))\n    '''\n    def exec_win_2(self):\n        num = 0\n        per = 0\n        win_2.show()\n        while num &lt; 10000000:\n            num += 1\n            if (num/100000).is_integer():\n                per += 1\n                ui2.progressBar.setValue(per)\n        win_2.close()\n    '''\n\n\nclass Ui_win_2(object):\n    def setupUi(self, win_2):\n        win_2.setObjectName(\"win_2\")\n        win_2.resize(400, 120)\n        self.buttonBox = QtWidgets.QDialogButtonBox(win_2)\n        self.buttonBox.setGeometry(QtCore.QRect(25, 85, 341, 32))\n        self.buttonBox.setOrientation(QtCore.Qt.Horizontal)\n        self.buttonBox.setStandardButtons(QtWidgets.QDialogButtonBox.Cancel|QtWidgets.QDialogButtonBox.Ok)\n        self.buttonBox.setObjectName(\"buttonBox\")\n        self.progressBar = QtWidgets.QProgressBar(win_2)\n        self.progressBar.setGeometry(QtCore.QRect(20, 20, 361, 23))\n        self.progressBar.setObjectName(\"progressBar\")\n        self.retranslateUi(win_2)\n        self.buttonBox.accepted.connect(win_2.accept)\n        self.buttonBox.rejected.connect(win_2.reject)\n        QtCore.QMetaObject.connectSlotsByName(win_2)\n\n    def retranslateUi(self, win_2):\n        _translate = QtCore.QCoreApplication.translate\n        win_2.setWindowTitle(_translate(\"win_2\", \"Win_2\"))\n\n\nclass Win_2(QtWidgets.QDialog, Ui_win_2):\n    def __init__(self):\n        super(Win_2, self).__init__()\n        self.setupUi(self)\n\n        self.progressBar.setMinimumWidth(360)\n        self.progressBar.setMinimumHeight(55)\n        self.progressBar.reset()\n        self.progressBar.setMaximum(112)\n        self.progressBar.setAlignment(QtCore.Qt.AlignCenter)\n        self.progressBar.valueChanged.connect(self.qprogressbar_value_changed)\n        self.progressBar.setFormat('percentage completed: %p%, current value: %v, maximum value: %m')   \n\n        # creates a 'QTimer'\n        self.qtimer = QtCore.QTimer()\n        self.qtimer.timeout.connect(self.qtimer_timeout)  \n        # starts QTimer at intervals of 50 milliseconds\n        self.qtimer.start(50)        \n\n    @QtCore.pyqtSlot(int)\n    def qprogressbar_value_changed(self, value):\n        # if the QProgressBar reaches its maximum value\n        if value == self.progressBar.maximum():\n            # stops the 'QTimer'\n            self.qtimer.stop()     \n\n    @QtCore.pyqtSlot()\n    def qtimer_timeout(self):\n        # gets the current value of the 'QProgressBar'\n        value = self.progressBar.value()\n        # adds 1 to the current value of the 'QProgressBar'\n        self.progressBar.setValue(value + 1)\n\n\nclass Win_1(QtWidgets.QDialog, Ui_win_1):\n    def __init__(self):\n        super(Win_1, self).__init__()\n        self.setupUi(self)   \n\n    def exec_win_2(self):\n        self.win_2 = Win_2()\n        self.win_2.show()\n\n\nif __name__ == \"__main__\":\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n\n    w = Win_1()\n    w.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/jcqkE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jcqkE.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1, "user_id": 11653746, "user_type": "registered", "profile_image": "https://graph.facebook.com/889238571431280/picture?type=large", "display_name": "Jo&#227;o Pedro Farineli", "link": "https://stackoverflow.com/users/11653746/jo%c3%a3o-pedro-farineli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "closed_date": 1576709070, "answer_count": 1, "score": -1, "last_activity_date": 1576702157, "creation_date": 1576699719, "last_edit_date": 1576699839, "question_id": 59399334, "link": "https://stackoverflow.com/questions/59399334/how-do-i-update-a-progress-bar-while-looping", "closed_reason": "Duplicate", "title": "How do I update a progress bar while looping?", "body": "<p>I created the post <a href=\"https://stackoverflow.com/questions/59396717/how-do-i-update-a-progress-bar-while-looping-both-in-different-windows\">How do I update a progress bar while looping? (Both in different windows)</a> and checked the related articles but unfortunately the solutions given didn't help me much, especially because they helped me on this issue:</p>\n\n<pre><code>from PyQt5 import QtCore, QtGui, QtWidgets\n\nclass Ui_win_1(object):\n\n    def setupUi(self, win_1):\n        win_1.setObjectName(\"win_1\")\n        win_1.resize(500, 100)\n        self.pushButton = QtWidgets.QPushButton(win_1)\n        self.pushButton.setGeometry(QtCore.QRect(210, 40, 75, 23))\n        self.pushButton.setObjectName(\"pushButton\")\n        self.retranslateUi(win_1)\n        QtCore.QMetaObject.connectSlotsByName(win_1)\n\n        self.pushButton.clicked.connect(self.exec_win_2)\n\n    def retranslateUi(self, win_1):\n        _translate = QtCore.QCoreApplication.translate\n        win_1.setWindowTitle(_translate(\"win_1\", \"Win_1\"))\n        self.pushButton.setText(_translate(\"win_1\", \"Run\"))\n\n    def exec_win_2(self):\n        num = 0\n        per = 0\n        win_2.show()\n        while num &lt; 10000000:\n            num += 1\n            if (num/100000).is_integer():\n                per += 1\n                ui2.progressBar.setValue(per)\n        win_2.close()\n\n\nclass Ui_win_2(object):\n\n    def setupUi(self, win_2):\n\n        win_2.setObjectName(\"win_2\")\n        win_2.resize(400, 100)\n        self.buttonBox = QtWidgets.QDialogButtonBox(win_2)\n        self.buttonBox.setGeometry(QtCore.QRect(20, 60, 341, 32))\n        self.buttonBox.setOrientation(QtCore.Qt.Horizontal)\n        self.buttonBox.setStandardButtons(QtWidgets.QDialogButtonBox.Cancel|QtWidgets.QDialogButtonBox.Ok)\n        self.buttonBox.setObjectName(\"buttonBox\")\n        self.progressBar = QtWidgets.QProgressBar(win_2)\n        self.progressBar.setGeometry(QtCore.QRect(20, 20, 361, 23))\n        self.progressBar.setObjectName(\"progressBar\")\n        self.retranslateUi(win_2)\n        self.buttonBox.accepted.connect(win_2.accept)\n        self.buttonBox.rejected.connect(win_2.reject)\n        QtCore.QMetaObject.connectSlotsByName(win_2)\n\n    def retranslateUi(self, win_2):\n\n        _translate = QtCore.QCoreApplication.translate\n        win_2.setWindowTitle(_translate(\"win_2\", \"Win_2\"))\n\nif __name__ == \"__main__\":\n\n    import sys\n    app = QtWidgets.QApplication(sys.argv)\n    win_1 = QtWidgets.QDialog()\n    win_2 = QtWidgets.QDialog()\n    ui = Ui_win_1()\n    ui.setupUi(win_1)\n    ui2 = Ui_win_2()\n    ui2.setupUi(win_2)\n    win_1.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p>with emphasis on the part:</p>\n\n<pre><code>def exec_win_2(self):\n        num = 0\n        per = 0\n        win_2.show()\n        while num &lt; 10000000:\n            num += 1\n            if (num/100000).is_integer():\n                per += 1\n                ui2.progressBar.setValue(per)\n        win_2.close()\n</code></pre>\n\n<p>I would like the \"win_2\" window to open the moment you click the \"run\" button and the progress updates as the loop progresses in real time, how do I do this?</p>\n"}, {"tags": ["python", "pandas", "date", "matplotlib"], "comments": [{"owner": {"reputation": 146, "user_id": 11108026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBL5B.png?s=128&g=1", "display_name": "AviFS", "link": "https://stackoverflow.com/users/11108026/avifs"}, "edited": false, "score": 0, "creation_date": 1576699945, "post_id": 59399331, "comment_id": 104987854, "body": "I found these two sources: <a href=\"https://stackoverflow.com/questions/44863375/how-to-change-spacing-between-ticks-in-matplotlib\" title=\"how to change spacing between ticks in matplotlib\">stackoverflow.com/questions/44863375/&hellip;</a> and <a href=\"https://subscription.packtpub.com/book/big_data_and_business_intelligence/9781849513265/3/ch03lvl1sec48/controlling-tick-spacing\" rel=\"nofollow noreferrer\">subscription.packtpub.com/book/&hellip;</a>"}, {"owner": {"reputation": 149, "user_id": 11766857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed351a3b00b8254a08cdb087578b5f95?s=128&d=identicon&r=PG&f=1", "display_name": "Caroline", "link": "https://stackoverflow.com/users/11766857/caroline"}, "reply_to_user": {"reputation": 146, "user_id": 11108026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBL5B.png?s=128&g=1", "display_name": "AviFS", "link": "https://stackoverflow.com/users/11108026/avifs"}, "edited": false, "score": 0, "creation_date": 1576700022, "post_id": 59399331, "comment_id": 104987896, "body": "I have seen this post, but I don&#39;t know how to addapt my code."}, {"owner": {"reputation": 2221, "user_id": 3394386, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f36befa47364f055cb5980fc4e14b7a6?s=128&d=identicon&r=PG&f=1", "display_name": "Jody Klymak", "link": "https://stackoverflow.com/users/3394386/jody-klymak"}, "edited": false, "score": 0, "creation_date": 1576702197, "post_id": 59399331, "comment_id": 104988660, "body": "Do the docs help? Just us a MonthLocator as your major locator... <a href=\"https://matplotlib.org/3.1.1/gallery/text_labels_and_annotations/date.html\" rel=\"nofollow noreferrer\">matplotlib.org/3.1.1/gallery/text_labels_and_annotations/&hellip;</a>"}, {"owner": {"reputation": 7187, "user_id": 8890604, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bwv2A.jpg?s=128&g=1", "display_name": "David S", "link": "https://stackoverflow.com/users/8890604/david-s"}, "edited": false, "score": 0, "creation_date": 1576702390, "post_id": 59399331, "comment_id": 104988738, "body": "I couldn&#39;t reproduce the problem, using sample of the data-frame and your code and it worked"}], "answers": [{"comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 2, "creation_date": 1576706096, "post_id": 59400042, "comment_id": 104990056, "body": "The problem OP faces is that they have dates. So this answer is not very helpful in that case. Check the third comment below the question, which says what to do in such case."}, {"owner": {"reputation": 146, "user_id": 11108026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBL5B.png?s=128&g=1", "display_name": "AviFS", "link": "https://stackoverflow.com/users/11108026/avifs"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1576706849, "post_id": 59400042, "comment_id": 104990332, "body": "@ernest Thank you very much for explaining! Sorry for the false advice. Also, I apologize for misspelling your name, how funny that you found it! Perhaps, with some upvotes, this answer could still help other people who search something similar, though. The title  <i>How to change ticks position in Matplotlib (Python)?</i> could certainly attract people who&#39;d still benefit from the answer... even if wasn&#39;t OP&#39;s problem."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 2, "creation_date": 1576707916, "post_id": 59400042, "comment_id": 104990727, "body": "Well, but if they are searching for this kind of answer, they would better be guided to one of the existing threads on that topic, right? (Note that you can always answer old questions as well, if you think existing solutions lack detail - but spreading solutions over different threads is not so nice to future searchers.) You are right that the title is not very suitable here. I edited it, and also closed as duplicate."}], "tags": [], "owner": {"reputation": 146, "user_id": 11108026, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xBL5B.png?s=128&g=1", "display_name": "AviFS", "link": "https://stackoverflow.com/users/11108026/avifs"}, "is_accepted": false, "score": -2, "last_activity_date": 1576705990, "last_edit_date": 1576705990, "creation_date": 1576703541, "answer_id": 59400042, "question_id": 59399331, "link": "https://stackoverflow.com/questions/59399331/change-tick-frequency-for-datetime-axis/59400042#59400042", "title": "Change tick frequency for datetime axis", "body": "<p>I'm not very familiar with pandas data frames. However, I can't see why this wouldn't work with any pyplot:</p>\n\n<p>According the top SO answer on related <a href=\"https://stackoverflow.com/questions/44863375/how-to-change-spacing-between-ticks-in-matplotlib\">post</a> by <em>ImportanceOfBeingErnest</em>:</p>\n\n<blockquote>\n  <p>The spacing between ticklabels is exclusively determined by the space between ticks on the axes.</p>\n</blockquote>\n\n<p>So, to change the distance between ticks, and the labels you can do this:</p>\n\n<p>Suppose a cluttered and base-10 centered person displays the following graph:\n<a href=\"https://i.stack.imgur.com/Yq8sj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Yq8sj.png\" alt=\"Cluttered\"></a></p>\n\n<p>It takes the following code and importing <em>matplotlib.ticker</em>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import numpy as np\nimport matplotlib.pyplot as plt\n# Import this, too\nimport matplotlib.ticker as ticker\n\n\n# Arbitrary graph with x-axis = [-32..32]\nx = np.linspace(-32, 32, 1024)\ny = np.sinc(x)\n\n# -------------------- Look Here --------------------\n# Access plot's axes\naxs = plt.axes()\n# Set distance between major ticks (which always have labels)\naxs.xaxis.set_major_locator(ticker.MultipleLocator(5))\n# Sets distance between minor ticks (which don't have labels)\naxs.xaxis.set_minor_locator(ticker.MultipleLocator(1))\n# -----------------------------------------------------\n\n# Plot and show graph\nplt.plot(x, y)\nplt.show()\n</code></pre>\n\n<p><br><br>\nTo change where the labels are placed, you can change the distance between the 'major ticks'. You can also change the smaller 'minor ticks' in between, which don't have a number attached. E.g., on a clock, the hour ticks have numbers on them and are larger (major ticks) with smaller, unlabeled ones between marking the minutes (minor ticks).</p>\n\n<p>By changing the <code>--- Look Here ---</code> part to:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># -------------------- Look Here --------------------\n# Access plot's axes\naxs = plt.axes()\n# Set distance between major ticks (which always have labels)\naxs.xaxis.set_major_locator(ticker.MultipleLocator(8))\n# Sets distance between minor ticks (which don't have labels)\naxs.xaxis.set_minor_locator(ticker.MultipleLocator(4))\n# -----------------------------------------------------\n</code></pre>\n\n<p>You can generate the cleaner and more elegant graph below:\n<a href=\"https://i.stack.imgur.com/deur0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/deur0.png\" alt=\"Clean\"></a></p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 149, "user_id": 11766857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed351a3b00b8254a08cdb087578b5f95?s=128&d=identicon&r=PG&f=1", "display_name": "Caroline", "link": "https://stackoverflow.com/users/11766857/caroline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1901, "favorite_count": 0, "closed_date": 1576708025, "answer_count": 1, "score": 1, "last_activity_date": 1576707991, "creation_date": 1576699700, "last_edit_date": 1576707991, "question_id": 59399331, "link": "https://stackoverflow.com/questions/59399331/change-tick-frequency-for-datetime-axis", "closed_reason": "Duplicate", "title": "Change tick frequency for datetime axis", "body": "<p>I have the following dataframe:</p>\n\n<pre><code>    Date        Prod_01  Prod_02\n19  2018-03-01  49870    0.0\n20  2018-04-01  47397    0.0\n21  2018-05-01  53752    0.0\n22  2018-06-01  47111    0.0\n23  2018-07-01  53581    0.0\n24  2018-08-01  55692    0.0\n25  2018-09-01  51886    0.0\n26  2018-10-01  56963    0.0\n27  2018-11-01  56732    0.0\n28  2018-12-01  59196    0.0\n29  2019-01-01  57221    5.0\n30  2019-02-01  55495    472.0\n31  2019-03-01  65394    753.0\n32  2019-04-01  59030    1174.0\n33  2019-05-01  64466    2793.0\n34  2019-06-01  58471    4413.0\n35  2019-07-01  64785    6110.0\n36  2019-08-01  63774    8360.0\n37  2019-09-01  64324    9558.0\n38  2019-10-01  65733    11050.0\n</code></pre>\n\n<p>And I need to plot a time series of the 'Prod_01' column.</p>\n\n<p><strong>The 'Date' column is in the pandas datetime format.</strong></p>\n\n<p>So I used the following command:</p>\n\n<pre><code>plt.figure(figsize=(10,4))\nplt.plot('Date', 'Prod_01', data=test, linewidth=2, color='steelblue')\nplt.xticks(rotation=45, horizontalalignment='right');\n</code></pre>\n\n<p>Output:</p>\n\n<p><a href=\"https://i.stack.imgur.com/pkypx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pkypx.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, I want to change the frequency of the xticks to one month, so I get one tick and one label for each month.</p>\n\n<p>I have tried the following command:</p>\n\n<pre><code>plt.figure(figsize=(10,4))\nplt.plot('Date', 'Prod_01', data=test, linewidth=2, color='steelblue')\nplt.xticks(np.arange(1, len(test), 1), test['Date'] ,rotation=45, horizontalalignment='right');\n</code></pre>\n\n<p>But I get this:\n<a href=\"https://i.stack.imgur.com/sxYxo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sxYxo.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I solve this problem?\nThanks in advance.</p>\n"}, {"tags": ["python", "sql-server"], "comments": [{"owner": {"reputation": 4182, "user_id": 6305294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d842cf581efa6591c26bf0e000977d0?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6305294/alex"}, "edited": false, "score": 2, "creation_date": 1576700927, "post_id": 59399330, "comment_id": 104988234, "body": "SQL Server does accept <a href=\"https://docs.microsoft.com/en-us/sql/t-sql/queries/top-transact-sql?view=sql-server-ver15\" rel=\"nofollow noreferrer\">a variable as the <code>TOP</code> quantity</a>, so you should be able to pass it as an argument. Maybe this will help: <a href=\"https://stackoverflow.com/questions/902408/how-to-use-variables-in-sql-statement-in-python\" title=\"how to use variables in sql statement in python\">stackoverflow.com/questions/902408/&hellip;</a>"}, {"owner": {"reputation": 30515, "user_id": 3813116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DeWnw.png?s=128&g=1", "display_name": "Sean Lange", "link": "https://stackoverflow.com/users/3813116/sean-lange"}, "edited": false, "score": 0, "creation_date": 1576701800, "post_id": 59399330, "comment_id": 104988517, "body": "You just need to wrap your ? with parenthesis. distinct top (?)"}, {"owner": {"reputation": 595, "user_id": 2961127, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/807c5a0abb32ce9365b0181020d091ac?s=128&d=identicon&r=PG&f=1", "display_name": "user2961127", "link": "https://stackoverflow.com/users/2961127/user2961127"}, "reply_to_user": {"reputation": 4182, "user_id": 6305294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d842cf581efa6591c26bf0e000977d0?s=128&d=identicon&r=PG&f=1", "display_name": "Alex", "link": "https://stackoverflow.com/users/6305294/alex"}, "edited": false, "score": 0, "creation_date": 1576702632, "post_id": 59399330, "comment_id": 104988826, "body": "@Alex Thank you.Got it."}], "owner": {"reputation": 595, "user_id": 2961127, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/807c5a0abb32ce9365b0181020d091ac?s=128&d=identicon&r=PG&f=1", "display_name": "user2961127", "link": "https://stackoverflow.com/users/2961127/user2961127"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1576701690, "creation_date": 1576699698, "last_edit_date": 1576701228, "question_id": 59399330, "link": "https://stackoverflow.com/questions/59399330/getting-incorrect-syntax-for-sql-statement-in-python", "title": "Getting incorrect syntax for SQL statement in python", "body": "<p>When I run below code which incorporates <code>TOP ?</code> in a <code>select</code> statement and I am unable to resolve.</p>\n\n<p>Code:</p>\n\n<pre><code>cnt = self.getCount()\n#cnt = 2\nquery = \"select distinct top ? id, indicator from [TABLE] ORDER BY id ASC\"\nconnsql = self.sql_connection()\nresultset = connsql.cursor().execute(query, cnt).fetchall()\nconnsql.cursor().commit()\nconnsql.close()\n</code></pre>\n\n<p>I get this syntax error:</p>\n\n<blockquote>\n  <p>pyodbc.ProgrammingError: ('42000', \"[42000] [Microsoft][ODBC SQL Server Driver][SQL Server]Incorrect syntax near '@P1'. (102) (SQLExecDirectW); [42000] [Microsoft][ODBC SQL Server Driver][SQL Server]Statement(s) could not be prepared. (8180)\")</p>\n</blockquote>\n"}, {"tags": ["python", "python-3.x", "pandas", "numpy"], "comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 2, "creation_date": 1576700219, "post_id": 59399302, "comment_id": 104987971, "body": "Can you provide some data for this question?"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1576701396, "post_id": 59399302, "comment_id": 104988391, "body": "What about making up some sample data this way we can give you a complete verifiable solution?"}, {"owner": {"reputation": 1, "user_id": 2875251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c46d7cc1646b0b7ab292d331588e22?s=128&d=identicon&r=PG&f=1", "display_name": "user2875251", "link": "https://stackoverflow.com/users/2875251/user2875251"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1576701859, "post_id": 59399302, "comment_id": 104988538, "body": "Edit: Will do.... Just made one."}, {"owner": {"reputation": 1, "user_id": 2875251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c46d7cc1646b0b7ab292d331588e22?s=128&d=identicon&r=PG&f=1", "display_name": "user2875251", "link": "https://stackoverflow.com/users/2875251/user2875251"}, "reply_to_user": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1576702939, "post_id": 59399302, "comment_id": 104988943, "body": "Added to question.  The CSV doesn&#39;t format well but I copied and pasted successfully into a CSV."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576716198, "post_id": 59399302, "comment_id": 104992775, "body": "What is the actual issue here?"}, {"owner": {"reputation": 1, "user_id": 2875251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c46d7cc1646b0b7ab292d331588e22?s=128&d=identicon&r=PG&f=1", "display_name": "user2875251", "link": "https://stackoverflow.com/users/2875251/user2875251"}, "edited": false, "score": 0, "creation_date": 1576729629, "post_id": 59399302, "comment_id": 104995185, "body": "Hey AMC, how do you display a scatter/line subplot (containing 8  child plots).  I don&#39;t know how to parse the dataframe, filter, average the baseball scores for a player for coach 1 for the 1st point on the line/scatter plot, then average coach 2 for the second point...  I guess I&#39;m lost on grouping/mean.  I can imagine a way to do this with 24 dataframes where I group/mean 1 player on 1 day with a y/x axis of score/coach but that MUST be wrong.  Right?"}], "owner": {"reputation": 1, "user_id": 2875251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20c46d7cc1646b0b7ab292d331588e22?s=128&d=identicon&r=PG&f=1", "display_name": "user2875251", "link": "https://stackoverflow.com/users/2875251/user2875251"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1576994240, "creation_date": 1576699564, "last_edit_date": 1576994240, "question_id": 59399302, "link": "https://stackoverflow.com/questions/59399302/averaging-dataframe-and-subplotting-with-pandas-image-included", "title": "Averaging dataframe and subplotting with pandas (image included)", "body": "<p>Editing to answer a question below:</p>\n\n<p>I'm wondering how to display a scatter/line subplot (containing 8 child plots). I don't know how to parse the dataframe, filter, average the baseball scores for a player for coach 1 for the 1st point on the line/scatter plot, then average coach 2 for the second point... I guess I'm lost on grouping/mean. I can imagine a way to do this with 24 dataframes where I group/mean 1 player on 1 day with a y/x axis of score/coach but that MUST be wrong.</p>\n\n<p>...</p>\n\n<p>Using Pandas (Python 3+), I have a dataframe (imported from a CSV).  It's data from baseball players.  It's broken up into 5 columns with headers- <code>Day, Player_Score, Bat, Coach, Player</code>.</p>\n\n<p><code>Day = 'Sunday', 'Monday', 'Tuesday', 'Wednesday'</code></p>\n\n<p><code>Player_Score = range 0-5</code> (NOT average but a particular score on a particular day with a particular coach)</p>\n\n<p><code>Player = Red, Green, Blue</code></p>\n\n<p><code>Bat = Bat_A or Bat_B</code></p>\n\n<p><code>Coach = 1, 2, 3, 4</code></p>\n\n<p>I am REALLY struggling to use Pandas / matplotlib / numpy.</p>\n\n<p>I need 8 subplots.  <code>fig, ax = plt.subplots(nrows=2, ncols=4)</code></p>\n\n<p>y-axis = average <strong>score</strong> for a particular <strong>bat</strong> for a particular <strong>coach</strong> on a particular <strong>day</strong></p>\n\n<p>Each subplot will be a Bat (A or B) and a Day (Sun-Wed) and their axis is a x='Coach' (1-4), y=average.</p>\n\n<p>average score is NOT in the dataset and must be calculated from half dozen scores.</p>\n\n<p>Any help would be appreciated.</p>\n\n<p><a href=\"https://i.stack.imgur.com/dSnVw.png\" rel=\"nofollow noreferrer\">Baseball Scores Across Players and Days</a></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>Coach,Player,Day,Score_BatA,Score_BatB\n1,Red,Sun,2,2\n2,Green,Mon,3,1\n3,Blue,Tue,1,3\n4,Red,Wed,2,2\n1,Green,Wed,4,1\n2,Blue,Sun,3,2\n3,Red,Mon,3,4\n4,Green,Tue,4,2\n1,Blue,Wed,4,4\n2,Red,Tue,2,5\n3,Green,Sun,3,3\n4,Blue,Mon,1,3\n1,Red,Tue,2,1\n2,Green,Wed,4,2\n3,Blue,Mon,2,4\n4,Red,Sun,3,2\n1,Green,Mon,2,4\n2,Blue,Tue,3,3\n3,Red,Wed,2,3\n4,Green,Sun,3,1\n1,Blue,Sun,1,2\n2,Red,Mon,2,4\n3,Green,Tue,4,2\n4,Blue,Wed,2,5\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "loops", "integer"], "comments": [{"owner": {"reputation": 15007, "user_id": 389289, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33eab2fa999a20910a29e4a2299bc174?s=128&d=identicon&r=PG&f=1", "display_name": "zvone", "link": "https://stackoverflow.com/users/389289/zvone"}, "edited": false, "score": 1, "creation_date": 1576699556, "post_id": 59399256, "comment_id": 104987692, "body": "You can use <code>itertools.chain</code>, if that makes you happier ;)"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 4, "creation_date": 1576699565, "post_id": 59399256, "comment_id": 104987699, "body": "May I ask why you are using Python 2?"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1576699613, "post_id": 59399256, "comment_id": 104987726, "body": "@roganjosh It doesn\u2019t redefine i, no?"}, {"owner": {"reputation": 753, "user_id": 4803555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/987de0ad150cc5d480bde50a580373a4?s=128&d=identicon&r=PG&f=1", "display_name": "Buckeye14Guy", "link": "https://stackoverflow.com/users/4803555/buckeye14guy"}, "edited": false, "score": 0, "creation_date": 1576699683, "post_id": 59399256, "comment_id": 104987754, "body": "<a href=\"https://stackoverflow.com/questions/952914/how-to-make-a-flat-list-out-of-list-of-lists\" title=\"how to make a flat list out of list of lists\">stackoverflow.com/questions/952914/&hellip;</a> to flatten the list and check if the stuff is in there. Might as well make it a set and check if the stuff is in there"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1576700004, "post_id": 59399256, "comment_id": 104987891, "body": "For-loops are perfectly pythonic. This is fine. It would be <i>better</i> to modify your algorithm, so put all the items you are testing for in a <code>set</code> so that your algorithm becomes <i>efficient</i>. But again, for-loops are <b>perfectly Pythonic</b>"}, {"owner": {"reputation": 11092, "user_id": 3066077, "user_type": "registered", "profile_image": "https://graph.facebook.com/1666991815/picture?type=large", "display_name": "DarrylG", "link": "https://stackoverflow.com/users/3066077/darrylg"}, "edited": false, "score": 0, "creation_date": 1576701550, "post_id": 59399256, "comment_id": 104988439, "body": "I would think a loop inside a loop using list-comprehension would be more Pythonic: and simplest i.e. print [i for sublist in mysublist for i in sublist if i in range(11)]"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1576703168, "post_id": 59399256, "comment_id": 104989023, "body": "For-loop vs list comprehension is generally a matter of taste, and the key issue is readability"}, {"owner": {"reputation": 4582, "user_id": 1654143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DiNAr.png?s=128&g=1", "display_name": "Ghoul Fool", "link": "https://stackoverflow.com/users/1654143/ghoul-fool"}, "reply_to_user": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576704030, "post_id": 59399256, "comment_id": 104989316, "body": "@AlexanderC&#233;cile Because I&#39;m the Ghost of Christmas Past"}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576716250, "post_id": 59399256, "comment_id": 104992784, "body": "@GhoulFool Definitely Christmas <i>Past</i>, yes. Somehow that answer leaves me know less than before."}, {"owner": {"reputation": 4582, "user_id": 1654143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DiNAr.png?s=128&g=1", "display_name": "Ghoul Fool", "link": "https://stackoverflow.com/users/1654143/ghoul-fool"}, "reply_to_user": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576743569, "post_id": 59399256, "comment_id": 104999354, "body": "@AMC, I&#39;m actually s-l-o-w-l-y updating all my scripts to Python 3.x, but I&#39;m very aware of using external libraries instead of learning how to solve the problem at hand. Also, Autodesk Maya still uses 2.7 and <i>might</i> upgrade next year. Wahoooo!"}], "answers": [{"comments": [{"owner": {"reputation": 172, "user_id": 9859930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae42bd8027d04bcbcc0977e2354a866?s=128&d=identicon&r=PG&f=1", "display_name": "S. Bender", "link": "https://stackoverflow.com/users/9859930/s-bender"}, "edited": false, "score": 0, "creation_date": 1576699769, "post_id": 59399329, "comment_id": 104987790, "body": "for python 2 use <code>print(&quot;\\n&quot;.join(...))</code>"}, {"owner": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 2, "creation_date": 1576699805, "post_id": 59399329, "comment_id": 104987805, "body": "From the (ex-) Benevolent Dictator For Life himself: <a href=\"https://www.artima.com/weblogs/viewpost.jsp?thread=98196\" rel=\"nofollow noreferrer\">artima.com/weblogs/viewpost.jsp?thread=98196</a>. None of this is pythonic"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1576699939, "post_id": 59399329, "comment_id": 104987849, "body": "This is definitely not very pythonic. Pythonic doesn&#39;t mean &quot;stuff everything into a single, unreadable line&quot;. As for <code>filter</code>/<code>map</code>, you should use a list-comprehension. Guido himself wanted to remove <code>filter</code> and <code>map</code> from the standard library in Python 3, but alas, they remain."}, {"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576716574, "post_id": 59399329, "comment_id": 104992847, "body": "This is nowhere near pythonic, <code>map</code>, <code>filter</code> and the rest should have been killed a decade ago...."}], "tags": [], "owner": {"reputation": 172, "user_id": 9859930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae42bd8027d04bcbcc0977e2354a866?s=128&d=identicon&r=PG&f=1", "display_name": "S. Bender", "link": "https://stackoverflow.com/users/9859930/s-bender"}, "is_accepted": false, "score": 0, "last_activity_date": 1576835409, "last_edit_date": 1576835409, "creation_date": 1576699697, "answer_id": 59399329, "question_id": 59399256, "link": "https://stackoverflow.com/questions/59399256/pythonic-way-of-finding-values-within-values/59399329#59399329", "title": "Pythonic way of finding values within values", "body": "<p><code>filter(lambda i: any(map(lambda sub: i in sub, mysublist)), range(1, 11))</code>\nwould be pretty unpythonic but a one-liner to do the job.\nTo print like you do above use print with sep:</p>\n\n<pre><code>mysublist = [\n  [4,5,6],\n  [8,9],\n  [19,20],\n]\n\n\nprint(*filter(lambda i: any(map(lambda sub: i in sub, mysublist)), range(1, 11)), sep=\"\\n\")\n</code></pre>\n\n<p>There are better and shorter solutions with sets. Use those instead.</p>\n"}, {"comments": [{"owner": {"reputation": 172, "user_id": 9859930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ae42bd8027d04bcbcc0977e2354a866?s=128&d=identicon&r=PG&f=1", "display_name": "S. Bender", "link": "https://stackoverflow.com/users/9859930/s-bender"}, "edited": false, "score": 1, "creation_date": 1576699870, "post_id": 59399346, "comment_id": 104987824, "body": "nums_to_search is not used? Also, <code>{*range(1, 11)}</code>  would be mmore pythonic to geerate the set i think."}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 2, "creation_date": 1576700091, "post_id": 59399346, "comment_id": 104987923, "body": "Why is <code>{*range(1, 11)}</code> more Pythonic than <code>set(range(1, 11))</code>? <i>Explicit is better than implicit.</i>"}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 2, "creation_date": 1576700226, "post_id": 59399346, "comment_id": 104987976, "body": "By the way, <code>itertools.chain.from_iterable(...)</code> is more efficient than <code>reduce(operator.concat, ...)</code>. The latter is unnecessarily O(n^2)."}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "reply_to_user": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1576700563, "post_id": 59399346, "comment_id": 104988078, "body": "@kaya3 - <a href=\"https://stackoverflow.com/a/39493960/4225229\">stackoverflow.com/a/39493960/4225229</a> seems to suggest the opposite. Does the performance vary with input size?"}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 1, "creation_date": 1576700845, "post_id": 59399346, "comment_id": 104988203, "body": "Regarding &quot;pythoninc&quot; - I can never tell if people mean &quot;following the PEPs&quot; or &quot;using the maximum number of magic operators&quot;"}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 3, "creation_date": 1576701591, "post_id": 59399346, "comment_id": 104988455, "body": "@JacobIRR That linked answer is comparing with very small inputs. For 1000 lists of length 1000, I get <code>list(chain.from_iterable(...))</code> being about 70 times faster than <code>reduce</code>. The reason is that <code>chain</code> has a linear time complexity, but <code>reduce(concat, ...)</code> is quadratic."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1576702999, "post_id": 59399346, "comment_id": 104988961, "body": "<code>reduce(concat, ..)</code> is definitely not pythonic, and is unnecessarily inefficient. Pythonic simply means following python idioms. And PEP8 is part of that, sure, but not all. It doesn&#39;t mean trying to cram everything into a single line, it can easily mean the opposite"}], "tags": [], "owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "is_accepted": false, "score": 1, "last_activity_date": 1576702150, "last_edit_date": 1576702150, "creation_date": 1576699766, "answer_id": 59399346, "question_id": 59399256, "link": "https://stackoverflow.com/questions/59399256/pythonic-way-of-finding-values-within-values/59399346#59399346", "title": "Pythonic way of finding values within values", "body": "<p>You could use <code>set</code>, <code>reduce</code>, and <code>concat</code>:</p>\n\n<pre><code>mysublist = [\n  [4,5,6],\n  [8,9],\n  [19,20],\n]\nimport operator\nimport functools \nprint({*range(1,11)}.intersection(set(functools.reduce(operator.concat, mysublist))))\n\n# or : print(set(range(1,11))}.intersection(set(functools.reduce(operator.concat, mysublist))))\n</code></pre>\n\n<blockquote>\n  <p>{4, 5, 6, 8, 9}</p>\n</blockquote>\n\n<p><code>concat</code> and <code>reduce</code> will flatten your nested lists.\nThen you can use <code>setA.intersection(setB)</code> to find the common elements.</p>\n\n<p>*NOTE: kaya3 mentions that itertools.chain is faster for large inputs</p>\n"}, {"tags": [], "owner": {"reputation": 3747, "user_id": 3044825, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1pPyB.png?s=128&g=1", "display_name": "mathfux", "link": "https://stackoverflow.com/users/3044825/mathfux"}, "is_accepted": false, "score": 0, "last_activity_date": 1576700816, "creation_date": 1576700816, "answer_id": 59399537, "question_id": 59399256, "link": "https://stackoverflow.com/questions/59399256/pythonic-way-of-finding-values-within-values/59399537#59399537", "title": "Pythonic way of finding values within values", "body": "<p>You actually need to intersect <code>range(11)</code> with values taken from concatenation of <code>mysublist</code>. Why not to translate this simple idea into this <em>one-liner</em>:</p>\n\n<pre><code>result = set(range(11)) &amp; set(itertools.chain(*mysublist))\n</code></pre>\n\n<p>or </p>\n\n<pre><code>result = set(range(11)) &amp; set(itertools.chain.from_iterable(mysublist))\n</code></pre>\n\n<p>You can <code>list</code> your <code>result</code> with <code>list(result)</code> if you need it.</p>\n"}, {"tags": [], "owner": {"reputation": 21440, "user_id": 225020, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/6ae07ec5b34fce5a6c5437fbdab9f079?s=128&d=identicon&r=PG", "display_name": "Jab", "link": "https://stackoverflow.com/users/225020/jab"}, "is_accepted": false, "score": 2, "last_activity_date": 1576705357, "last_edit_date": 1576705357, "creation_date": 1576702601, "answer_id": 59399867, "question_id": 59399256, "link": "https://stackoverflow.com/questions/59399256/pythonic-way-of-finding-values-within-values/59399867#59399867", "title": "Pythonic way of finding values within values", "body": "<p>Like others have said, you can use <code>set.intersection</code> or just a set comprehension and utilize <code>itertools.chain</code>:</p>\n\n<pre><code>subs = set(chain(*mysublist))\n{i for i in subs if i in range(1, 11)}\n</code></pre>\n\n<p>This is likely less efficient than the other approach although may be more readable and straight forward for some.</p>\n\n<p>Just FYI if you\u2019re just using a range to filter the sub lists then why not just use a conditional check?</p>\n\n<pre><code>{i for i in chain(*mysublist) if 0 &lt; i &lt; 11}\n</code></pre>\n\n<p>This still results in the same output</p>\n"}, {"tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 1, "last_activity_date": 1576703589, "creation_date": 1576703589, "answer_id": 59400053, "question_id": 59399256, "link": "https://stackoverflow.com/questions/59399256/pythonic-way-of-finding-values-within-values/59400053#59400053", "title": "Pythonic way of finding values within values", "body": "<pre><code>&gt;&gt;&gt; {*range(1, 11)} &amp; set().union(*mysublist)\n{4, 5, 6, 8, 9}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 278, "user_id": 11263320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4048b6400577f1e5708b1cc7a5024e78?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Chatiskatzi", "link": "https://stackoverflow.com/users/11263320/michael-chatiskatzi"}, "is_accepted": false, "score": 0, "last_activity_date": 1576703919, "creation_date": 1576703919, "answer_id": 59400106, "question_id": 59399256, "link": "https://stackoverflow.com/questions/59399256/pythonic-way-of-finding-values-within-values/59400106#59400106", "title": "Pythonic way of finding values within values", "body": "<p>Personally, I wouldn't modify it much.</p>\n\n<p>Here is a small modification with the <code>any</code> method to combine the second for loop and the if query:</p>\n\n<pre><code>mysublist = [\n  [4,5,6],\n  [8,9],\n  [19,20],\n]\n\nfor i in range (1, 11):\n    if any(i in y for y in mysublist):\n        print i\n</code></pre>\n"}], "owner": {"reputation": 4582, "user_id": 1654143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/DiNAr.png?s=128&g=1", "display_name": "Ghoul Fool", "link": "https://stackoverflow.com/users/1654143/ghoul-fool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 6, "score": 1, "last_activity_date": 1576835409, "creation_date": 1576699337, "question_id": 59399256, "link": "https://stackoverflow.com/questions/59399256/pythonic-way-of-finding-values-within-values", "title": "Pythonic way of finding values within values", "body": "<p>Quick question to get your Winters bashed!</p>\n\n<p>I'm looping over a range of integers and I need to check to see that they are also contained within a list of lists (mysublist)</p>\n\n<pre><code>mysublist = [\n  [4,5,6],\n  [8,9],\n  [19,20],\n]\n\n\nfor i in range (1, 11):\n  for sub in mysublist:\n    if i in sub:\n      print i\n</code></pre>\n\n<p>Is there a more Pythonic way than doing a loop within a loop to find said values?</p>\n"}, {"tags": ["python", "list", "combinations", "itertools"], "comments": [{"owner": {"reputation": 2479, "user_id": 11301900, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8826c4b7675bd83127fddefc109b7f5d?s=128&d=identicon&r=PG&f=1", "display_name": "AMC", "link": "https://stackoverflow.com/users/11301900/amc"}, "edited": false, "score": 0, "creation_date": 1576699661, "post_id": 59399253, "comment_id": 104987747, "body": "If you can expand on the broader task to do here, we might be able to find a different solution entirely."}], "answers": [{"comments": [{"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1576876933, "post_id": 59399406, "comment_id": 105048805, "body": "Don&#39;t write <code>ret = ret + list(...)</code>; this wastes time by constructing two new lists on each iteration (one explicitly by <code>list</code>, the other implicitly by <code>+</code>). Use <code>ret += ...</code> or <code>ret.extend(...)</code> instead."}, {"owner": {"reputation": 30153, "user_id": 12299000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0pja9.png?s=128&g=1", "display_name": "kaya3", "link": "https://stackoverflow.com/users/12299000/kaya3"}, "edited": false, "score": 0, "creation_date": 1576877180, "post_id": 59399406, "comment_id": 105048864, "body": "Or, use a generator as in the original code instead of returning a list: <code>return chain.from_iterable(...)</code> or <code>yield from ...</code>."}], "tags": [], "owner": {"reputation": 187, "user_id": 12549356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/490607d273aa7a83f1cf88aa64cb6671?s=128&d=identicon&r=PG&f=1", "display_name": "Kavan Doctor", "link": "https://stackoverflow.com/users/12549356/kavan-doctor"}, "is_accepted": true, "score": 1, "last_activity_date": 1576899472, "last_edit_date": 1576899472, "creation_date": 1576700075, "answer_id": 59399406, "question_id": 59399253, "link": "https://stackoverflow.com/questions/59399253/how-would-i-make-it-so-only-some-items-are-able-to-be-used-at-the-same-time-when/59399406#59399406", "title": "How would I make it so only some items are able to be used at the same time when finding all possible combinations of a list", "body": "<p>You could do:</p>\n\n<pre><code>def subsets(l):\n   ret = []\n   for n in range(len(l)+1):\n       ret += list(itertools.combinations(l, n))\n   return ret\n\nbuns = [\"sesame\", \"sourdough\"]\nmeat = [\"ham\" , \"beef\"]\ncondiments = [\"ketchup\",\"mustard\", \"onions\"] \ncombo = []\nfor b in buns:\n   for m in meat:\n       for c in subsets(condiments):\n            x = [b,m]\n            for s in c:\n                x.append(s)\n            combo.append(x)\n</code></pre>\n\n<p>combo would contain all the possible answers</p>\n"}], "owner": {"reputation": 3, "user_id": 12559797, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA9Grjhp97iExsKh9rBMJZpjpVQfdKwsg81u0WjkQ=k-s128", "display_name": "Briar Campbell", "link": "https://stackoverflow.com/users/12559797/briar-campbell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 59399406, "answer_count": 1, "score": -1, "last_activity_date": 1576901679, "creation_date": 1576699331, "last_edit_date": 1576901679, "question_id": 59399253, "link": "https://stackoverflow.com/questions/59399253/how-would-i-make-it-so-only-some-items-are-able-to-be-used-at-the-same-time-when", "title": "How would I make it so only some items are able to be used at the same time when finding all possible combinations of a list", "body": "<p>Sorry for the pretty undescriptive title, this is a pretty weird problem. I'm using this code to find all possible combinations of my list:</p>\n\n<pre><code>from itertools import chain, combinations\ndef powerset(iterable):\n    \"powerset([1,2,3]) --&gt; () (1,) (2,) (3,) (1,2) (1,3) (2,3) (1,2,3)\"\n    s = list(iterable)\n    return chain.from_iterable(combinations(s, r) for r in range(len(s)+1))\n\n\nstuff = ['pretzel', 'sesame', 'sourdough', 'donut', 'waffles', 'beef', 'turkey', 'chicken', 'tuna', 'vegan', 'pork', 'steak', 'bison', 'cheese', 'kethcup', 'mayo', 'pickles', 'mustard', 'lettuce', 'onions', 'tomato', 'bacon', 'bbq', 'hotsauce', 'pb', 'jelly', 'butter', 'jalapeno', 'frenchfry', 'apple', 'honeymustard', 'onionrings', 'ranch', 'macncheese', 'pulledpork', 'avacado', 'mushrooms']\nfor i, combo in enumerate(powerset(stuff), 1):\n    print('combo #{}: {}'.format(i, combo))\n</code></pre>\n\n<p>To be completely honest with you, this is the first hunk of code I found on Google that did pretty much what I wanted. It spits out all of the possible combinations, and even gives each one a number!\nHowever, what I need it to do has changed and I really can't figure out what to do (which isn't really saying much) and so I'm coming here to ask: How would I make it so only some of the items in that list can be used together? For example, I don't want the types of bun or meat to be able to be listed together, but the condiments can be used in any combination (or lack thereof). Thanks in advance.</p>\n\n<p>Edit: What I'm trying to accomplish in the end is that I need to find and list all of the possible combinations of bun, meat, and condiments on a given sandwich. The types of bun and meat in a given option can only be used once, but any combination of any condiments is acceptable (so using them all is an option).</p>\n"}, {"tags": ["python", "android", "kivy", "buildozer"], "comments": [{"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1576702754, "post_id": 59399248, "comment_id": 104988880, "body": "You shouldn&#39;t have to do the download manually, buildozer even says it is downloading the NDK. You should be able to just let it do the download and install."}, {"owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 1, "creation_date": 1576703373, "post_id": 59399248, "comment_id": 104989089, "body": "Within my <code>~&#47;.buildozer&#47;android&#47;platform&#47;</code> directory, I have the directory <code>android-ndk-r17c</code>."}, {"owner": {"reputation": 423, "user_id": 3511520, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/72b0f9860a4efdb557b1c39a73e7cdd9?s=128&d=identicon&r=PG&f=1", "display_name": "Reihaneh Kouhi", "link": "https://stackoverflow.com/users/3511520/reihaneh-kouhi"}, "reply_to_user": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "edited": false, "score": 0, "creation_date": 1576921032, "post_id": 59399248, "comment_id": 105054945, "body": "Thanks. I just make a directory with this name and put all the ndk in it. It fix. great thanks"}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 8507892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92fe8f46a815e8e8fe5bf3c5c80d3fd2?s=128&d=identicon&r=PG&f=1", "display_name": "\u0645\u0631\u062a\u0636\u06cc \u062a\u0645\u0627\u0645", "link": "https://stackoverflow.com/users/8507892/%d9%85%d8%b1%d8%aa%d8%b6%db%8c-%d8%aa%d9%85%d8%a7%d9%85"}, "is_accepted": false, "score": 0, "last_activity_date": 1615539474, "last_edit_date": 1615539474, "creation_date": 1596630301, "answer_id": 63265157, "question_id": 59399248, "link": "https://stackoverflow.com/questions/59399248/ndk-download-and-location-problem-on-ubuntu/63265157#63265157", "title": "NDK download and location problem on ubuntu", "body": "<p>I had the same problem and it turns out that google banned my country\nso I used a VPN and the problem solved.</p>\n"}], "owner": {"reputation": 423, "user_id": 3511520, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/72b0f9860a4efdb557b1c39a73e7cdd9?s=128&d=identicon&r=PG&f=1", "display_name": "Reihaneh Kouhi", "link": "https://stackoverflow.com/users/3511520/reihaneh-kouhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1615539474, "creation_date": 1576699296, "last_edit_date": 1576768929, "question_id": 59399248, "link": "https://stackoverflow.com/questions/59399248/ndk-download-and-location-problem-on-ubuntu", "title": "NDK download and location problem on ubuntu", "body": "<p>I try to use buildozer to make an android app using python, kivy. </p>\n\n<p>When I run the code </p>\n\n<pre><code>buildozer android debug deploy run\n</code></pre>\n\n<p>I got this error:</p>\n\n<pre><code># Recommended android's NDK version by p4a is: 17c\n# Android NDK is missing, downloading\n# Downloading https://dl.google.com/android/repository/android-ndk-r17c-linux-x86_64.zip\n</code></pre>\n\n<p>So, I download NDK- version 17c, manually and move the unzip file into: /.buildozer/android/platform/\nstill, it does not work and have the same error.\nSo, How can I check the exact directory that my ndk should be in there?  Any suggestion to fix this problem? great thanks in advance</p>\n"}, {"tags": ["python", "django", "view"], "comments": [{"owner": {"reputation": 2140, "user_id": 6634060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m8azl.png?s=128&g=1", "display_name": "jozo", "link": "https://stackoverflow.com/users/6634060/jozo"}, "edited": false, "score": 0, "creation_date": 1576705278, "post_id": 59399235, "comment_id": 104989770, "body": "Can you also show how your models look like?"}], "answers": [{"tags": [], "owner": {"reputation": 1336, "user_id": 2785080, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4285a4687dd298ae8a22d6b97168115c?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/2785080/ben"}, "is_accepted": true, "score": 1, "last_activity_date": 1576702905, "creation_date": 1576702905, "answer_id": 59399925, "question_id": 59399235, "link": "https://stackoverflow.com/questions/59399235/python-django-acumulative-variable-with-two-or-more-models/59399925#59399925", "title": "Python/Django - Acumulative variable with two or more models", "body": "<p>based on your code you're probably looking for something like this:</p>\n\n<pre><code>index = 0\n\nif TableA.objects.filter(usuario=request.user).count() == 1:\n    index += 1\n\nif TableB.objects.filter(usuario=request.user).count() == 1:\n    index += 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2140, "user_id": 6634060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/m8azl.png?s=128&g=1", "display_name": "jozo", "link": "https://stackoverflow.com/users/6634060/jozo"}, "is_accepted": false, "score": 1, "last_activity_date": 1576704994, "creation_date": 1576704994, "answer_id": 59400305, "question_id": 59399235, "link": "https://stackoverflow.com/questions/59399235/python-django-acumulative-variable-with-two-or-more-models/59400305#59400305", "title": "Python/Django - Acumulative variable with two or more models", "body": "<pre><code>from django.http import HttpResponse\n\ndef my_view(request):\n    index = 0\n\n    if TableA.objects.filter(usuario=request.user).exists():\n        index += 1\n\n    if TableB.objects.filter(usuario=request.user).exists():\n        index += 1\n\n    return HttpResponse(\"User exists in {} tables\".format(index))\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 12304809, "user_type": "registered", "profile_image": "https://graph.facebook.com/2185369165091223/picture?type=large", "display_name": "Gustavo Lisi", "link": "https://stackoverflow.com/users/12304809/gustavo-lisi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 59399925, "answer_count": 2, "score": 0, "last_activity_date": 1576704994, "creation_date": 1576699246, "question_id": 59399235, "link": "https://stackoverflow.com/questions/59399235/python-django-acumulative-variable-with-two-or-more-models", "title": "Python/Django - Acumulative variable with two or more models", "body": "<p>Im new in python/django and first of all sorry for this dumb question... but I have a view with something like this:</p>\n\n<pre><code>index = 0\n\n    try:\n        TableA.objects.get(usuario=request.user)\n        index = index + 1\n    except TableA.DoesNotExist:\n        index = index + 0\n\n    try:\n        TableB.objects.get(usuario=request.user)\n        index = index + 1\n    except TableB.DoesNotExist:\n        index = index + 0\n\n    [...]\n</code></pre>\n\n<p>I wanted that <code>index</code> was acumlative. I understand why this is not working. But how can i do that?</p>\n"}, {"tags": ["python", "c++", "opencv"], "comments": [{"owner": {"reputation": 20522, "user_id": 11941443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f27a880243178eedf3abdab24898b335?s=128&d=identicon&r=PG&f=1", "display_name": "walnut", "link": "https://stackoverflow.com/users/11941443/walnut"}, "edited": false, "score": 3, "creation_date": 1576701241, "post_id": 59399212, "comment_id": 104988342, "body": "Unrelated to problem: Don&#39;t use <code>final</code> as identifier in C++. It is a keyword since C++11. While it isn&#39;t a reserved identifier outside of the specific syntax where the <code>final</code> keyword applies, using it in other context will be confusing. See for example the syntax highlighting in your question."}, {"owner": {"reputation": 17643, "user_id": 5087436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyXHE.jpg?s=128&g=1", "display_name": "alkasm", "link": "https://stackoverflow.com/users/5087436/alkasm"}, "edited": false, "score": 2, "creation_date": 1576706100, "post_id": 59399212, "comment_id": 104990059, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/15049811/opencv-error-multiplying-2-mats\">opencv error multiplying 2 Mat&#39;s</a>"}], "owner": {"reputation": 103, "user_id": 9136737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fd435cdeae5d93ebe9fc37dffedc6a0?s=128&d=identicon&r=PG&f=1", "display_name": "already puzzled", "link": "https://stackoverflow.com/users/9136737/already-puzzled"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 2, "answer_count": 0, "score": 0, "last_activity_date": 1576701623, "creation_date": 1576699152, "last_edit_date": 1576701623, "question_id": 59399212, "link": "https://stackoverflow.com/questions/59399212/opencv-matrix-math-behavior-change-going-from-python-to-c", "title": "openCV matrix math behavior change going from python to c++", "body": "<p>The big picture is that I am attempting to do a alpha-blend using a gradation contained in a mask. I have a handful of canvas Mat objects and associated alpha_mask Mat objects.\nI alpha-blend the canvas on to the final using the associated alpha_mask, which is the displayed output.</p>\n\n<p>canvas[i] is datatype 16  8-bit unsigned 3 layer\nfinal is datatype 16  8-bit unsigned 3 layer\nalpha_mask[i] is datatype 5  floating point 1 layer</p>\n\n<p>My python code is working:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>final = cv.convertScaleAbs(canvas[i] * alpha_mask[i] + final * (1-alpha_mask[i]))\n</code></pre>\n\n<p>When I try the same with C++ I get a run-time matrix multiplication error (I think):</p>\n\n<pre class=\"lang-c++ prettyprint-override\"><code>convertScaleAbs(canvas[i] * alpha_mask[i] + final * (1.0-alpha_mask[i]), final, 1,0);\n</code></pre>\n\n<p>Here is the error message:</p>\n\n<p>terminate called after throwing an instance of 'cv::Exception'\n  what():  OpenCV(4.1.2) /usr/local/src/opencv/modules/core/src/matmul.dispatch.cpp:337: error: (-215:Assertion failed) type == B.type() in function 'gemm'</p>\n\n<p>What should I do?</p>\n"}, {"tags": ["python", "scikit-learn", "random-forest"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 10224502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c28c100541a3d33f251308ddf6013024?s=128&d=identicon&r=PG&f=1", "display_name": "Ricky", "link": "https://stackoverflow.com/users/10224502/ricky"}, "edited": false, "score": 0, "creation_date": 1576705872, "post_id": 59399798, "comment_id": 104989985, "body": "Thanks! But I want to plot the ROC curve. Would something like this make sense? <code>probas = rfc.oob_decision_function_</code>  <code>fpr, tpr, thresholds = metrics.roc_curve(y_train, probas[:, 1])</code>  <code>plt.plot(fpr, tpr)</code>"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "reply_to_user": {"reputation": 27, "user_id": 10224502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c28c100541a3d33f251308ddf6013024?s=128&d=identicon&r=PG&f=1", "display_name": "Ricky", "link": "https://stackoverflow.com/users/10224502/ricky"}, "edited": false, "score": 0, "creation_date": 1576736867, "post_id": 59399798, "comment_id": 104996977, "body": "yes! this is what you need in any case: <code>rfc.oob_decision_function_</code>"}, {"owner": {"reputation": 27, "user_id": 10224502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c28c100541a3d33f251308ddf6013024?s=128&d=identicon&r=PG&f=1", "display_name": "Ricky", "link": "https://stackoverflow.com/users/10224502/ricky"}, "edited": false, "score": 0, "creation_date": 1576744985, "post_id": 59399798, "comment_id": 104999975, "body": "so just to make sure I understood, <code>rfc.oob_decision_function_</code>returns the prediciton probabilities for the out of bag samples, right?"}], "tags": [], "owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "is_accepted": true, "score": 1, "last_activity_date": 1576748626, "last_edit_date": 1576748626, "creation_date": 1576702205, "answer_id": 59399798, "question_id": 59399188, "link": "https://stackoverflow.com/questions/59399188/is-there-a-way-using-scikit-learn-to-plot-the-oob-roc-curve-for-random-forest/59399798#59399798", "title": "Is there a way, using scikit-learn, to plot the OOB ROC curve for random forest?", "body": "<h2>You need <code>.oob_decision_function_</code>that returns the prediction probabilities for the out of bag samples after fitting.</h2>\n\n<p>P.S: This is available in <code>scikit-learn==0.22</code></p>\n\n<p>Small example:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom sklearn.ensemble import RandomForestClassifier\nfrom sklearn.metrics import plot_roc_curve\nfrom sklearn.datasets import load_wine\nfrom sklearn.model_selection import train_test_split\n\nX, y = load_wine(return_X_y=True)\ny = y == 2\n\nX_train, X_test, y_train, y_test = train_test_split(X, y, random_state=42)\n\nrfc = RandomForestClassifier(n_estimators=10, random_state=42, oob_score=True)\nrfc.fit(X_train, y_train)\n\nfrom sklearn import metrics\npred_train = np.argmax(rfc.oob_decision_function_,axis=1)\nmetrics.roc_auc_score(y_train, pred_train)\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 10224502, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c28c100541a3d33f251308ddf6013024?s=128&d=identicon&r=PG&f=1", "display_name": "Ricky", "link": "https://stackoverflow.com/users/10224502/ricky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "accepted_answer_id": 59399798, "answer_count": 1, "score": 1, "last_activity_date": 1576748626, "creation_date": 1576699007, "question_id": 59399188, "link": "https://stackoverflow.com/questions/59399188/is-there-a-way-using-scikit-learn-to-plot-the-oob-roc-curve-for-random-forest", "title": "Is there a way, using scikit-learn, to plot the OOB ROC curve for random forest?", "body": "<p>Using Python and sklearn I want to plot the ROC curve for the <strong>out-of-bag (oob)</strong> true positive and false positive rates of a random forest classifier.</p>\n\n<p>I know this is possible in R but can't seem to find any information about how to do this in Python.</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5849397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DQXCf.png?s=128&g=1", "display_name": "mbsullivan", "link": "https://stackoverflow.com/users/5849397/mbsullivan"}, "reply_to_user": {"reputation": 787, "user_id": 4110765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4452a8699825258c201dba1594b278d9?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Armstrong", "link": "https://stackoverflow.com/users/4110765/jack-armstrong"}, "edited": false, "score": 0, "creation_date": 1576699475, "post_id": 59399196, "comment_id": 104987660, "body": "Ah, ok. I added an edit for that. I don&#39;t believe that ~/.bash_profile is sourced for graphical terminals. (Rather, ~/.profile is used, and it should read ~/.bashrc.) I still think ~/.bashrc is the right place for this."}], "tags": [], "owner": {"reputation": 19, "user_id": 5849397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DQXCf.png?s=128&g=1", "display_name": "mbsullivan", "link": "https://stackoverflow.com/users/5849397/mbsullivan"}, "is_accepted": false, "score": -1, "last_activity_date": 1576699404, "last_edit_date": 1576699404, "creation_date": 1576699067, "answer_id": 59399196, "question_id": 59399127, "link": "https://stackoverflow.com/questions/59399127/installing-python-3-and-alias-it-on-a-mac/59399196#59399196", "title": "Installing Python 3 and Alias it on a Mac", "body": "<p>To be clear: is this alias within ~/.bash or ~/.bashrc or ~/.bash_profile?</p>\n\n<p>I am not familiar with MacOS but I don't believe that ~/.bash is sourced by default.</p>\n\n<p>.bash_profile is sourced for login shells, but not for graphical terminals.</p>\n\n<p>So try locating the command within ~/.bashrc.</p>\n"}], "owner": {"reputation": 787, "user_id": 4110765, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/4452a8699825258c201dba1594b278d9?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Armstrong", "link": "https://stackoverflow.com/users/4110765/jack-armstrong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576699404, "creation_date": 1576698639, "last_edit_date": 1576699333, "question_id": 59399127, "link": "https://stackoverflow.com/questions/59399127/installing-python-3-and-alias-it-on-a-mac", "title": "Installing Python 3 and Alias it on a Mac", "body": "<p>I was installing python 3 and following this video here on how to do it. <a href=\"https://www.youtube.com/watch?v=YYXdXT2l-Gg\" rel=\"nofollow noreferrer\">video</a> At 4:15 the video says type <code>nano ~/.bash_profile</code> Then alias python3 as python below the declaration of PATH. I did that as follows:</p>\n\n<pre><code>alias python=python3\n</code></pre>\n\n<p>Exactly like in the video. Then I went to check what version of python was loaded and I still have version 2.7.16. </p>\n\n<p>Secondly, all of my <code>$</code> are now <code>%</code> and it is quite weird. Did I do something wrong?</p>\n\n<p>Output:</p>\n\n<pre><code>Jack@Jacks-MBP-2 ~ % python --version\nPython 2.7.16\nJack@Jacks-MBP-2 ~ % python3 --version\nPython 3.8.0\nJack@Jacks-MBP-2 ~ %\n</code></pre>\n\n<p>Within <code>~/.bash_profile</code></p>\n\n<pre><code># Setting PATH for Python 3.8\n# The original version is saved in .bash_profile.pysave\nPATH=\"/Library/Frameworks/Python.framework/Versions/3.8/bin:${PATH}\"\nexport PATH\n\nalias python=python3\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "centos"], "comments": [{"owner": {"reputation": 101, "user_id": 7558991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mMpGw.jpg?s=128&g=1", "display_name": "Ryan Marvin", "link": "https://stackoverflow.com/users/7558991/ryan-marvin"}, "edited": false, "score": 0, "creation_date": 1576710774, "post_id": 59399034, "comment_id": 104991582, "body": "What directory was that Python version 3.6.8 installed to? What do you get when you run <code>which python3</code>?  This issue may be due to how your $PATH is set. Run <code>echo $PATH</code> as well and share the output kindly"}, {"owner": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "reply_to_user": {"reputation": 101, "user_id": 7558991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mMpGw.jpg?s=128&g=1", "display_name": "Ryan Marvin", "link": "https://stackoverflow.com/users/7558991/ryan-marvin"}, "edited": false, "score": 0, "creation_date": 1576720987, "post_id": 59399034, "comment_id": 104993660, "body": "I can&#39;t believe it. I spent hours on it, left it without explanation and swith the computer off. Now that I try again, it just reports correctly... python3 --version = 3.6.8. No idea what could have happen before... Do you know why this could have been?  I was commenting in the answer below about having python3 appearing in too many places now, one of them seeming a duplicate. Output: <a href=\"https://pastebin.com/gMZZ97EJ\" rel=\"nofollow noreferrer\">pastebin.com/gMZZ97EJ</a>  As for the <code>echo $PATH</code> command: <a href=\"https://pastebin.com/EacJAqBr\" rel=\"nofollow noreferrer\">pastebin.com/EacJAqBr</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1576720724, "post_id": 59401702, "comment_id": 104993611, "body": "I can&#39;t believe it. I spent hours on it, left it without explanation and swith the computer off. Now that I try again, it just reports correctly... <code>python3 --version</code> = <code>3.6.8</code>. No idea what could have happen before... Do you know why this could have been?  As for your commands, it reports 4 different entries (no clue why), even 2 are duplicate :S  Output: <a href=\"https://pastebin.com/gMZZ97EJ\" rel=\"nofollow noreferrer\">pastebin.com/gMZZ97EJ</a>"}, {"owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "reply_to_user": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1576740358, "post_id": 59401702, "comment_id": 104998135, "body": "Hmmm sometimes I had similar issues in a shell window and rehashing the search path with <code>hash -r</code> did the trick"}, {"owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "reply_to_user": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "edited": false, "score": 0, "creation_date": 1576743999, "post_id": 59401702, "comment_id": 104999508, "body": "that&#39;s the advantage of type -a it shows the python3 that would be found first, but then it shows the other ones, that were masked by their predecessors"}], "tags": [], "owner": {"reputation": 4401, "user_id": 858675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c51db176e8886a2afbc18edd2233c18b?s=128&d=identicon&r=PG", "display_name": "gelonida", "link": "https://stackoverflow.com/users/858675/gelonida"}, "is_accepted": false, "score": 1, "last_activity_date": 1576743870, "last_edit_date": 1576743870, "creation_date": 1576714343, "answer_id": 59401702, "question_id": 59399034, "link": "https://stackoverflow.com/questions/59399034/python3-not-recognizing-the-correct-python-3-version-installed-centos-7/59401702#59401702", "title": "python3 not recognizing the correct python 3 version installed (Centos 7)", "body": "<p>Under some circumstances the shell is messing up the hashing. Alternatively you might have aliases or shell functions overriding python3.</p>\n\n<p>I propose you type following commands to see whether you had a hashing issue or a shell alias or a shell function which overrides python3:</p>\n\n<pre><code>type -a python3\nwhich -a python3\nhash -r\ntype -a python3\nwhich -a python3\npyenv which python3\npyenv versions\n</code></pre>\n\n<p>If the output is not self explaining, then post the output of above commands here</p>\n\n<p>Addendum. As you typed pyenv in your question I also added a call to pyenv, though I don't think it's a pyenv issue.</p>\n\n<p><code>type -a python3</code> shows in priority order which commands would be candidates for being found when you type <code>python3</code></p>\n\n<p>shell functions and aliases have priority over commands, that can be found in the path. the path is searched from left to right.</p>\n\n<p>The reason why the last python shows up twice is unclear to me (perhaps you added this directory twice to your search path?)</p>\n"}], "owner": {"reputation": 1783, "user_id": 1155105, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5b77026528b6e4cf1e73b7679a9c1fa1?s=128&d=identicon&r=PG", "display_name": "mickael", "link": "https://stackoverflow.com/users/1155105/mickael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1576743870, "creation_date": 1576698032, "question_id": 59399034, "link": "https://stackoverflow.com/questions/59399034/python3-not-recognizing-the-correct-python-3-version-installed-centos-7", "title": "python3 not recognizing the correct python 3 version installed (Centos 7)", "body": "<p>I just installed <code>python 3.6.8</code> in Centos via a <code>sudo yum install python3</code> command and it got installed successfully. However, when I now do <code>python3 --version</code> to check the status, the provided version is 3.6.5. </p>\n\n<p>Do you know why this could be and what I could do to sort it out so that it's reported what's installed, python 3.6.8?</p>\n\n<pre><code>[user@project]$ python3 --version\nPython 3.6.5\n[user@project]$ which python3\n/usr/bin/python3\n[user@project]$ /usr/bin/python3 --version\nPython 3.6.8\n[user@project]$ pyenv uninstall 3.6.5\npyenv: version `3.6.5' not installed\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1576698709, "post_id": 59399028, "comment_id": 104987375, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/35132221/tkinter-optionmenu-how-to-get-the-selected-choice\">TKinter OptionMenu: How to get the selected choice?</a>"}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1576698710, "post_id": 59399028, "comment_id": 104987376, "body": "You get the value from an <code>OptionMenu</code> by calling <code>.get()</code> on the <code>Var</code> associated with it."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1576700503, "post_id": 59399028, "comment_id": 104988067, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/52862893/tkinter-bringing-chosen-option-from-optionmenu-into-a-variable-for-further-use\">Tkinter bringing chosen option from optionMenu into a variable for further use</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 12487930, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZV34FsXXlSmjJic9RpruomXKHLfVI8vI-Bp2MzA=k-s128", "display_name": "Bulbous", "link": "https://stackoverflow.com/users/12487930/bulbous"}, "edited": false, "score": 0, "creation_date": 1576709529, "post_id": 59400019, "comment_id": 104991224, "body": "I get an error saying on_select() takes 0 positional arguments but 3 were given?"}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1576772518, "post_id": 59400019, "comment_id": 105014231, "body": "I get: <b><i><code>input = float(first_number)</code> NameError: name &#39;value&#39; is not defined&quot;</i></b>. Fixing this i get: <b><i>TypeError: <code>on_select()</code> takes 0 positional arguments but 3 were given</i></b>"}, {"owner": {"reputation": 562, "user_id": 7236360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e296355c433577cc7d39fb2c9f4860e0?s=128&d=identicon&r=PG&f=1", "display_name": "ShayneLoyd", "link": "https://stackoverflow.com/users/7236360/shayneloyd"}, "edited": false, "score": 0, "creation_date": 1576801393, "post_id": 59400019, "comment_id": 105024242, "body": "Sorry on_select(*args) the trace returns positional variables that you do not have to use."}], "tags": [], "owner": {"reputation": 562, "user_id": 7236360, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e296355c433577cc7d39fb2c9f4860e0?s=128&d=identicon&r=PG&f=1", "display_name": "ShayneLoyd", "link": "https://stackoverflow.com/users/7236360/shayneloyd"}, "is_accepted": false, "score": -1, "last_activity_date": 1576801460, "last_edit_date": 1576801460, "creation_date": 1576703427, "answer_id": 59400019, "question_id": 59399028, "link": "https://stackoverflow.com/questions/59399028/how-to-extract-information-from-drop-down-menus-in-tkinter/59400019#59400019", "title": "How to extract information from drop down menus in tkinter?", "body": "<p>If you want to run a function when your option changes, you could set a trace on your StringVar() object. <code>value_var.trace(\"w\", on_select)</code> Then you can get the value inside the function using <code>value_var.get()</code>. I have edited this into your code to some degree. I have not ran the code so it may have some issues; although the most common ones have been addressed. Feel free to comment if you have any issues.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import tkinter as tk\nfrom tkinter import *\nfrom PIL import ImageTk, Image\n\nHEIGHT = 600\nWIDTH = 900\n\nh = 6.63e-34\nc = 3.00e+8\n\nvalue_var = tk.StringVar()  # value_var has to be moved ahead of your function\n\ndef on_select(*args):\n    global value_var  # value_var has to be declared as a global in your function\n    value = value_var.get()  # value_var.get() returns the current string.\n    if value == OPTIONS[0]:\n        label_enter_what['text'] = 'Enter wavelength in chosen unit below'\n        label_unit['text'] = 'Enter what unit \\n of wavelength'\n        unit_set.set(OPTIONS_UNITS[1])\n    elif value == OPTIONS[1]:\n        label_enter_what['text'] = 'Enter wavelength in chosen unit below'\n        label_unit['text'] = 'Enter what unit \\n of wavelength'\n        unit_set.set(OPTIONS_UNITS[1])\n    elif value == OPTIONS[2]:\n        label_enter_what['text'] = 'Enter energy in chosen unit below'\n        label_unit['text'] = 'Enter what unit of energy'\n        unit_set.set(OPTIONS_UNITS[3])\n\n\nroot = tk.Tk()\n\nroot.title(\"Photon property calculator\")\n\ncanvas = tk.Canvas(root, height=HEIGHT, width=WIDTH)\ncanvas.pack()\n\nbackground_image = ImageTk.PhotoImage(Image.open('interference.jpg'))\nbackground_label = tk.Label(root, image=background_image)\nbackground_label.place(relheight=1, relwidth=1)\n\nframe = tk.Frame(root, bg='#3E3E3E', bd=5)\nframe.place(relx=0.5, rely=0.1, relheight=0.1, relwidth=0.75, anchor='n')\n\nentry_value = tk.Entry(frame, font=40, bg='white')\nentry_value.place(relx=0.175, rely=0, relheight=1, relwidth=0.4)\n\nframe_upper = tk.Frame(root, bg='#3E3E3E', bd=2.5)\nframe_upper.place(relx=0.5, rely=0.03, relheight=0.06, relwidth=0.75, anchor='n')\n\nlabel_what_to_calc = tk.Label(frame_upper, bg='white', text='Enter what \\n to calculate')\nlabel_what_to_calc.place(relx=0, rely=0, relheight=1, relwidth=0.15)\n\nlabel_enter_what = tk.Label(frame_upper, bg='white', text='Select an option')\nlabel_enter_what.place(relx=0.175, relheight=1, relwidth=0.4)\n\nlabel_unit = tk.Label(frame_upper, bg='white', text='Enter what unit \\n of wavelength')\nlabel_unit.place(relx=0.6, relheight=1, relwidth=0.21)\n\nlower_frame = tk.Frame(root, bg='#60A8FF', bd=10)\nlower_frame.place(relx=0.5, rely=0.3, relheight=0.5, relwidth=0.75, anchor='n')\n\nOPTIONS = [\n    \"Energy\",\n    \"Frequency\",\n    \"Wavelength\"\n]\n\nvalue_var.trace(\"w\", on_select)  # The \"w\" parameter sets it to trigger on write events\n\nvalue_var.set(OPTIONS[0])  # value_var.set() will set the string value but it will also trigger the trace event.\n\ndrop = tk.OptionMenu(frame, value_var, *OPTIONS)\ndrop.place(relx=0, rely=0, relheight=1, relwidth=0.15)\n\nOPTIONS_UNITS = [\"\u03bcm\",\n                 \"nm\",\n                 \"pm\",\n                 \"aJ\",\n                 \"zJ\",\n]\n\nunit_set = tk.StringVar(value=OPTIONS_UNITS[0])\n\ndrop_units = tk.OptionMenu(frame, unit_set, *OPTIONS_UNITS)\ndrop_units.place(relx=0.6, rely=0, relheight=1, relwidth=0.09)\n\n\ndef do_operation():\n    first_number = entry_value.get()\n    try:\n        input = float(first_number)\n        if value == [0] and value1 == [0]:\n            new_num = input*10e-28\n            label['text'] = str(h*c/new_num)\n        elif OPTIONS ==[0] and OPTIONS_UNITS == [1]:\n            label['text'] = str(\"test\")\n    except ValueError:\n        print(\"wrong\")\n\n\nbutton = tk.Button(frame, text='Calculate!', font=40, bg=\"#F96612\", fg='black', command=do_operation)\nbutton.place(relx=0.7, relheight=1, relwidth=0.3)\n\nlabel = tk.Label(lower_frame, bg='white', text='1')\nlabel.place(relheight=1, relwidth=1)\n\nroot.mainloop()\n</code></pre>\n\n<p>Without the trace and the callback set with command.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import tkinter as tk\nfrom tkinter import *\nfrom PIL import ImageTk, Image\n\nHEIGHT = 600\nWIDTH = 900\n\nh = 6.63e-34\nc = 3.00e+8\n\nvalue_var = tk.StringVar()  # value_var has to be moved ahead of your function\n\ndef on_select():\n    global value_var  # value_var has to be declared as a global in your function\n    value = value_var.get()  # value_var.get() returns the current string.\n    if value == OPTIONS[0]:\n        label_enter_what['text'] = 'Enter wavelength in chosen unit below'\n        label_unit['text'] = 'Enter what unit \\n of wavelength'\n        unit_set.set(OPTIONS_UNITS[1])\n    elif value == OPTIONS[1]:\n        label_enter_what['text'] = 'Enter wavelength in chosen unit below'\n        label_unit['text'] = 'Enter what unit \\n of wavelength'\n        unit_set.set(OPTIONS_UNITS[1])\n    elif value == OPTIONS[2]:\n        label_enter_what['text'] = 'Enter energy in chosen unit below'\n        label_unit['text'] = 'Enter what unit of energy'\n        unit_set.set(OPTIONS_UNITS[3])\n\n\nroot = tk.Tk()\n\nroot.title(\"Photon property calculator\")\n\ncanvas = tk.Canvas(root, height=HEIGHT, width=WIDTH)\ncanvas.pack()\n\nbackground_image = ImageTk.PhotoImage(Image.open('interference.jpg'))\nbackground_label = tk.Label(root, image=background_image)\nbackground_label.place(relheight=1, relwidth=1)\n\nframe = tk.Frame(root, bg='#3E3E3E', bd=5)\nframe.place(relx=0.5, rely=0.1, relheight=0.1, relwidth=0.75, anchor='n')\n\nentry_value = tk.Entry(frame, font=40, bg='white')\nentry_value.place(relx=0.175, rely=0, relheight=1, relwidth=0.4)\n\nframe_upper = tk.Frame(root, bg='#3E3E3E', bd=2.5)\nframe_upper.place(relx=0.5, rely=0.03, relheight=0.06, relwidth=0.75, anchor='n')\n\nlabel_what_to_calc = tk.Label(frame_upper, bg='white', text='Enter what \\n to calculate')\nlabel_what_to_calc.place(relx=0, rely=0, relheight=1, relwidth=0.15)\n\nlabel_enter_what = tk.Label(frame_upper, bg='white', text='Select an option')\nlabel_enter_what.place(relx=0.175, relheight=1, relwidth=0.4)\n\nlabel_unit = tk.Label(frame_upper, bg='white', text='Enter what unit \\n of wavelength')\nlabel_unit.place(relx=0.6, relheight=1, relwidth=0.21)\n\nlower_frame = tk.Frame(root, bg='#60A8FF', bd=10)\nlower_frame.place(relx=0.5, rely=0.3, relheight=0.5, relwidth=0.75, anchor='n')\n\nOPTIONS = [\n    \"Energy\",\n    \"Frequency\",\n    \"Wavelength\"\n]\n\n\nvalue_var.set(OPTIONS[0])  # value_var.set() will set the string value but will not trigger an event as the OptionMenu has not been created with the call back yet.\n\ndrop = tk.OptionMenu(frame, value_var, *OPTIONS, command=on_select)\ndrop.place(relx=0, rely=0, relheight=1, relwidth=0.15)\n\nOPTIONS_UNITS = [\"\u03bcm\",\n                 \"nm\",\n                 \"pm\",\n                 \"aJ\",\n                 \"zJ\",\n]\n\nunit_set = tk.StringVar(value=OPTIONS_UNITS[0])\n\ndrop_units = tk.OptionMenu(frame, unit_set, *OPTIONS_UNITS)\ndrop_units.place(relx=0.6, rely=0, relheight=1, relwidth=0.09)\n\n\ndef do_operation():\n    first_number = entry_value.get()\n    try:\n        input = float(first_number)\n        if value == [0] and value1 == [0]:\n            new_num = input*10e-28\n            label['text'] = str(h*c/new_num)\n        elif OPTIONS ==[0] and OPTIONS_UNITS == [1]:\n            label['text'] = str(\"test\")\n    except ValueError:\n        print(\"wrong\")\n\n\nbutton = tk.Button(frame, text='Calculate!', font=40, bg=\"#F96612\", fg='black', command=do_operation)\nbutton.place(relx=0.7, relheight=1, relwidth=0.3)\n\nlabel = tk.Label(lower_frame, bg='white', text='1')\nlabel.place(relheight=1, relwidth=1)\n\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12487930, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAZV34FsXXlSmjJic9RpruomXKHLfVI8vI-Bp2MzA=k-s128", "display_name": "Bulbous", "link": "https://stackoverflow.com/users/12487930/bulbous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 339, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1576801460, "creation_date": 1576698003, "last_edit_date": 1576708379, "question_id": 59399028, "link": "https://stackoverflow.com/questions/59399028/how-to-extract-information-from-drop-down-menus-in-tkinter", "title": "How to extract information from drop down menus in tkinter?", "body": "<p>How do i get information from what a person has selected in the drop down menu? I want the drop down menu to affect what the calculator is calculating. So what i have in mind is checking what they chose, and then use if statements to determine what to calculate. The relevant code is at the bottom, but ignore <code>value</code> and <code>value1</code> as they are just tests. I wanted to see what error and information python would give me.</p>\n\n<pre><code>import tkinter as tk\nfrom tkinter import *\nfrom PIL import ImageTk, Image\n\nHEIGHT = 600\nWIDTH = 900\n\nh = 6.63e-34\nc = 3.00e+8\n\ndef on_select(value):\n    if value == OPTIONS[0]:\n        label_enter_what['text'] = 'Enter wavelength in chosen unit below'\n        label_unit['text'] = 'Enter what unit \\n of wavelength'\n        unit_set.set(OPTIONS_UNITS[1])\n    elif value == OPTIONS[1]:\n        label_enter_what['text'] = 'Enter wavelength in chosen unit below'\n        label_unit['text'] = 'Enter what unit \\n of wavelength'\n        unit_set.set(OPTIONS_UNITS[1])\n    elif value == OPTIONS[2]:\n        label_enter_what['text'] = 'Enter energy in chosen unit below'\n        label_unit['text'] = 'Enter what unit of energy'\n        unit_set.set(OPTIONS_UNITS[3])\n\n\nroot = tk.Tk()\n\nroot.title(\"Photon property calculator\")\n\ncanvas = tk.Canvas(root, height=HEIGHT, width=WIDTH)\ncanvas.pack()\n\nbackground_image = ImageTk.PhotoImage(Image.open('interference.jpg'))\nbackground_label = tk.Label(root, image=background_image)\nbackground_label.place(relheight=1, relwidth=1)\n\nframe = tk.Frame(root, bg='#3E3E3E', bd=5)\nframe.place(relx=0.5, rely=0.1, relheight=0.1, relwidth=0.75, anchor='n')\n\nentry_value = tk.Entry(frame, font=40, bg='white')\nentry_value.place(relx=0.175, rely=0, relheight=1, relwidth=0.4)\n\nframe_upper = tk.Frame(root, bg='#3E3E3E', bd=2.5)\nframe_upper.place(relx=0.5, rely=0.03, relheight=0.06, relwidth=0.75, anchor='n')\n\nlabel_what_to_calc = tk.Label(frame_upper, bg='white', text='Enter what \\n to calculate')\nlabel_what_to_calc.place(relx=0, rely=0, relheight=1, relwidth=0.15)\n\nlabel_enter_what = tk.Label(frame_upper, bg='white', text='Select an option')\nlabel_enter_what.place(relx=0.175, relheight=1, relwidth=0.4)\n\nlabel_unit = tk.Label(frame_upper, bg='white', text='Enter what unit \\n of wavelength')\nlabel_unit.place(relx=0.6, relheight=1, relwidth=0.21)\n\nlower_frame = tk.Frame(root, bg='#60A8FF', bd=10)\nlower_frame.place(relx=0.5, rely=0.3, relheight=0.5, relwidth=0.75, anchor='n')\n\nOPTIONS = [\n    \"Energy\",\n    \"Frequency\",\n    \"Wavelength\"\n]\n\nvalue_var = tk.StringVar(value=OPTIONS[0])\n\ndrop = tk.OptionMenu(frame, value_var, *OPTIONS, command=on_select)\ndrop.place(relx=0, rely=0, relheight=1, relwidth=0.15)\n\nOPTIONS_UNITS = [\"\u03bcm\",\n                 \"nm\",\n                 \"pm\",\n                 \"aJ\",\n                 \"zJ\",\n\n]\n\nunit_set = tk.StringVar(value=OPTIONS_UNITS[0])\n\ndrop_units = tk.OptionMenu(frame, unit_set, *OPTIONS_UNITS)\ndrop_units.place(relx=0.6, rely=0, relheight=1, relwidth=0.09)\n\n\ndef do_operation():\n    first_number = entry_value.get()\n    try:\n        input = float(first_number)\n        if value == [0] and value1 == [0]:\n            new_num = input*10e-28\n            label['text'] = str(h*c/new_num)\n        elif OPTIONS ==[0] and OPTIONS_UNITS == [1]:\n            label['text'] = str(\"test\")\n    except ValueError:\n        print(\"wrong\")\n\n\nbutton = tk.Button(frame, text='Calculate!', font=40, bg=\"#F96612\", fg='black', command=do_operation)\nbutton.place(relx=0.7, relheight=1, relwidth=0.3)\n\nlabel = tk.Label(lower_frame, bg='white', text='1')\nlabel.place(relheight=1, relwidth=1)\n\nroot.mainloop()\n</code></pre>\n"}]