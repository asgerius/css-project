[{"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 32054, "user_id": 6287308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NdmQp.jpg?s=128&g=1", "display_name": "Vaishali", "link": "https://stackoverflow.com/users/6287308/vaishali"}, "is_accepted": false, "score": 1, "last_activity_date": 1488413136, "creation_date": 1488413136, "answer_id": 42544501, "question_id": 42544401, "link": "https://stackoverflow.com/questions/42544401/dynamic-way-to-create-new-columns-as-a-function-of-existing-columns-in-pandas/42544501#42544501", "title": "Dynamic way to create new columns as a function of existing columns in pandas", "body": "<p>You can create column list</p>\n\n<pre><code>cols= list(cols)\ncols['2_sum'] = cols[cols].sum(axis = 1)\ncols['3_sum'] = cols['2_sum'] - cols['Level_2']\ncols['4_sum'] = cols['3_sum'] - cols['Level_3']\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 327, "user_id": 2023479, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0b00a58468cf977d50a82fdaa0a881af?s=128&d=identicon&r=PG", "display_name": "R_Queery", "link": "https://stackoverflow.com/users/2023479/r-queery"}, "edited": false, "score": 0, "creation_date": 1489706998, "post_id": 42544538, "comment_id": 72801519, "body": "Yeah this is really close. But it sums all columns every time, I need to skip the first column in each loop; sum columns 2-15 to create 2_sum, then sum columns 3-15 to create 3_sum etc."}], "tags": [], "owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "is_accepted": false, "score": 3, "last_activity_date": 1488413319, "creation_date": 1488413319, "answer_id": 42544538, "question_id": 42544401, "link": "https://stackoverflow.com/questions/42544401/dynamic-way-to-create-new-columns-as-a-function-of-existing-columns-in-pandas/42544538#42544538", "title": "Dynamic way to create new columns as a function of existing columns in pandas", "body": "<p>Here is an example:</p>\n\n<p>Sample data:</p>\n\n<pre><code>In [147]: df = pd.DataFrame(np.random.rand(3, 15),\n     ...:                   columns=['ID'] + ['Level_{}'.format(x) for x in range(2, 16)])\n     ...:\n\nIn [148]: df\nOut[148]:\n         ID   Level_2   Level_3   Level_4   Level_5   Level_6   Level_7   Level_8   Level_9  Level_10  Level_11  \\\n0  0.851407  0.957810  0.204217  0.848265  0.168324  0.010265  0.191499  0.787552  0.648678  0.424462  0.038888\n1  0.354270  0.442843  0.631624  0.081120  0.357300  0.211621  0.177321  0.316312  0.836935  0.445603  0.267165\n2  0.998240  0.341875  0.590768  0.475935  0.071915  0.720590  0.041327  0.926167  0.671880  0.516845  0.450720\n\n   Level_12  Level_13  Level_14  Level_15\n0  0.465109  0.508491  0.282262  0.848373\n1  0.205415  0.399493  0.537186  0.774417\n2  0.131734  0.554596  0.253658  0.104193\n</code></pre>\n\n<p>Solution:</p>\n\n<pre><code>In [149]: for n in range(15, 1, -1):\n     ...:     df['{}_sum'.format(15-n+2)] = df.filter(regex=r'Level_\\d+').iloc[:, :n].sum(1)\n     ...:\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>In [150]: df\nOut[150]:\n         ID   Level_2   Level_3   Level_4   Level_5   Level_6   Level_7   Level_8   Level_9  Level_10    ...     \\\n0  0.851407  0.957810  0.204217  0.848265  0.168324  0.010265  0.191499  0.787552  0.648678  0.424462    ...\n1  0.354270  0.442843  0.631624  0.081120  0.357300  0.211621  0.177321  0.316312  0.836935  0.445603    ...\n2  0.998240  0.341875  0.590768  0.475935  0.071915  0.720590  0.041327  0.926167  0.671880  0.516845    ...\n\n      6_sum     7_sum     8_sum     9_sum    10_sum    11_sum    12_sum    13_sum    14_sum    15_sum\n0  4.745067  4.279958  4.241070  3.816608  3.167931  2.380379  2.188880  2.178615  2.010292  1.162027\n1  3.973259  3.767844  3.500679  3.055076  2.218140  1.901828  1.724508  1.512887  1.155587  1.074468\n2  4.939755  4.808021  4.357301  3.840456  3.168576  2.242409  2.201082  1.480492  1.408577  0.932643\n\n[3 rows x 29 columns]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 94, "user_id": 7317835, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/748e96a30206b3404cc45b0bfc135e4c?s=128&d=identicon&r=PG&f=1", "display_name": "Weijie Sun", "link": "https://stackoverflow.com/users/7317835/weijie-sun"}, "is_accepted": false, "score": 2, "last_activity_date": 1488413430, "creation_date": 1488413430, "answer_id": 42544561, "question_id": 42544401, "link": "https://stackoverflow.com/questions/42544401/dynamic-way-to-create-new-columns-as-a-function-of-existing-columns-in-pandas/42544561#42544561", "title": "Dynamic way to create new columns as a function of existing columns in pandas", "body": "<p>Hopefully, it can help you</p>\n\n<pre><code>ColsListName = ['3_sum' ... ,'14_sum']\nColsListLevel = ['Level_2','Level_3' ... ,'Level_15']\nsumCols = cols.Level_2 + cols.Level_3 + cols.Level_4 + cols.Level_5 + cols.Level_6 + cols.Level_7 + cols.Level_8 + cols.Level_9 + cols.Level_10 + cols.Level_11 + cols.Level_12 + cols.Level_13 + cols.Level_14 + cols.Level_15\ncols['2_sum'] = sumCols \nfor i in range(len(ColsListLevel)) :\n   cols[ColsListName [i]] = sumCols - cols.ColsListLevel [i]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 327, "user_id": 2023479, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0b00a58468cf977d50a82fdaa0a881af?s=128&d=identicon&r=PG", "display_name": "R_Queery", "link": "https://stackoverflow.com/users/2023479/r-queery"}, "edited": false, "score": 0, "creation_date": 1489706116, "post_id": 42544610, "comment_id": 72801218, "body": "Yeah this is really close. But it sums all columns every time, I need to skip the first column in each loop; sum columns 2-15 to create 2_sum, then sum columns 3-15 to create 3_sum etc."}, {"owner": {"reputation": 974, "user_id": 3898460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/174b86446bf20ba4d87daaccb80eb53f?s=128&d=identicon&r=PG&f=1", "display_name": "gepcel", "link": "https://stackoverflow.com/users/3898460/gepcel"}, "reply_to_user": {"reputation": 327, "user_id": 2023479, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0b00a58468cf977d50a82fdaa0a881af?s=128&d=identicon&r=PG", "display_name": "R_Queery", "link": "https://stackoverflow.com/users/2023479/r-queery"}, "edited": false, "score": 0, "creation_date": 1490058582, "post_id": 42544610, "comment_id": 72932343, "body": "I&#39;m not quite sure I understand. If you mean &quot;Level_2&quot; by &quot;columns 2&quot;, this is the result. If you mean &quot;the second column&quot; by &quot;columns2&quot;, since the DataFrame <code>cols</code> didn&#39;t include the <code>ID</code> column yet, I think it will work if <code>ID</code> is included."}], "tags": [], "owner": {"reputation": 974, "user_id": 3898460, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/174b86446bf20ba4d87daaccb80eb53f?s=128&d=identicon&r=PG&f=1", "display_name": "gepcel", "link": "https://stackoverflow.com/users/3898460/gepcel"}, "is_accepted": false, "score": 0, "last_activity_date": 1488413703, "creation_date": 1488413703, "answer_id": 42544610, "question_id": 42544401, "link": "https://stackoverflow.com/questions/42544401/dynamic-way-to-create-new-columns-as-a-function-of-existing-columns-in-pandas/42544610#42544610", "title": "Dynamic way to create new columns as a function of existing columns in pandas", "body": "<pre><code>import pandas as pd\nimport numpy as np\nnp.random.seed(1)\ncols = pd.DataFrame(np.random.rand(2, 14), \n                    columns=['Level_'+str(i) for i in range(2, 16)])\n</code></pre>\n\n<p>Now the dataframe looks like:</p>\n\n<pre><code>    Level_2     Level_3     Level_4     Level_5     Level_6     Level_7     Level_8     Level_9     Level_10    Level_11    Level_12    Level_13    Level_14    Level_15    2_sum\n0   0.199666    0.285152    0.598139    0.602477    0.004284    0.874587    0.263949    0.527301    0.306443    0.282778    0.181330    0.280506    0.456637    0.998124    5.861371\n1   0.279320    0.508074    0.435350    0.816866    0.691988    0.179261    0.134478    0.949185    0.867022    0.410112    0.139481    0.537539    0.042163    0.366138    6.356977\n</code></pre>\n\n<p>Then:</p>\n\n<pre><code>for i in range(2, 15):\n    cols[str(i)+'_sum'] = cols.loc[:, 'Level_'+str(i):'Level_15'].sum(axis=1)\ncols\n</code></pre>\n\n<p>I think this is what you want.</p>\n"}], "owner": {"reputation": 327, "user_id": 2023479, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/0b00a58468cf977d50a82fdaa0a881af?s=128&d=identicon&r=PG", "display_name": "R_Queery", "link": "https://stackoverflow.com/users/2023479/r-queery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2980, "favorite_count": 2, "answer_count": 4, "score": 3, "last_activity_date": 1488413703, "creation_date": 1488412557, "question_id": 42544401, "link": "https://stackoverflow.com/questions/42544401/dynamic-way-to-create-new-columns-as-a-function-of-existing-columns-in-pandas", "title": "Dynamic way to create new columns as a function of existing columns in pandas", "body": "<p>I'm looking for a more programmatic way of creating multiple new columns as a function of existing columns in a Pandas DataFrame. </p>\n\n<p>I have 14 columns Level_2 - Level_15. I want to iteratively create 14 new columns that sum columns 2-15, then 3-15, then 4-15 and so on. </p>\n\n<p>Right now my code looks something like this</p>\n\n<pre><code>cols['2_sum'] = cols.Level_2 + cols.Level_3 + cols.Level_4 + cols.Level_5 + cols.Level_6 + cols.Level_7 + cols.Level_8 + cols.Level_9 + cols.Level_10 + cols.Level_11 + cols.Level_12 + cols.Level_13 + cols.Level_14 + cols.Level_15\ncols['3_sum'] = cols.Level_3 + cols.Level_4 + cols.Level_5 + cols.Level_6 + cols.Level_7 + cols.Level_8 + cols.Level_9 + cols.Level_10 + cols.Level_11 + cols.Level_12 + cols.Level_13 + cols.Level_14 + cols.Level_15\ncols['4_sum'] = cols.Level_4 + cols.Level_5 + cols.Level_6 + cols.Level_7 + cols.Level_8 + cols.Level_9 + cols.Level_10 + cols.Level_11 + cols.Level_12 + cols.Level_13 + cols.Level_14 + cols.Level_15 \n</code></pre>\n\n<p>Is there a more pandas or pythonic way to do this? </p>\n\n<p>thanks! </p>\n"}, {"tags": ["javascript", "python", "html", "forms"], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 4215820, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1329974549/picture?type=large", "display_name": "Brad Flynn", "link": "https://stackoverflow.com/users/4215820/brad-flynn"}, "edited": false, "score": 0, "creation_date": 1488413194, "post_id": 42544496, "comment_id": 72224689, "body": "In the form? Or in JavaScript?"}], "tags": [], "owner": {"reputation": 126, "user_id": 2971336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5799c076fc47d61f98a0915326de89df?s=128&d=identicon&r=PG&f=1", "display_name": "PresidentPratik", "link": "https://stackoverflow.com/users/2971336/presidentpratik"}, "is_accepted": false, "score": 0, "last_activity_date": 1488413122, "creation_date": 1488413122, "answer_id": 42544496, "question_id": 42544396, "link": "https://stackoverflow.com/questions/42544396/passing-an-array-of-objects-to-javascript/42544496#42544496", "title": "Passing an array of objects to javascript", "body": "<p>Try JSON.serialize(my_array_of_objects)</p>\n"}, {"comments": [{"owner": {"reputation": 135, "user_id": 4215820, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1329974549/picture?type=large", "display_name": "Brad Flynn", "link": "https://stackoverflow.com/users/4215820/brad-flynn"}, "edited": false, "score": 0, "creation_date": 1488413454, "post_id": 42544502, "comment_id": 72224773, "body": "The value still comes up as <code>[&lt;object_type: an_object object&gt;]</code>"}, {"owner": {"reputation": 93, "user_id": 2479413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09f9031628978531757e0f39b4df8a2f?s=128&d=identicon&r=PG", "display_name": "Geeganage", "link": "https://stackoverflow.com/users/2479413/geeganage"}, "reply_to_user": {"reputation": 135, "user_id": 4215820, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1329974549/picture?type=large", "display_name": "Brad Flynn", "link": "https://stackoverflow.com/users/4215820/brad-flynn"}, "edited": false, "score": 0, "creation_date": 1488424639, "post_id": 42544502, "comment_id": 72227889, "body": "Can you please put the sample data for the input value?"}, {"owner": {"reputation": 135, "user_id": 4215820, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1329974549/picture?type=large", "display_name": "Brad Flynn", "link": "https://stackoverflow.com/users/4215820/brad-flynn"}, "edited": false, "score": 0, "creation_date": 1488425578, "post_id": 42544502, "comment_id": 72228143, "body": "I added it in the edit, hopefully this explains it a little better"}, {"owner": {"reputation": 135, "user_id": 4215820, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1329974549/picture?type=large", "display_name": "Brad Flynn", "link": "https://stackoverflow.com/users/4215820/brad-flynn"}, "edited": false, "score": 0, "creation_date": 1488432788, "post_id": 42544502, "comment_id": 72230556, "body": "I feel like it&#39;s getting closer? I&#39;m getting a type error now: <code>&lt;django.db.models.sql.query.Query object at 0x110dd6890&gt; is not JSON serializable</code>"}, {"owner": {"reputation": 93, "user_id": 2479413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09f9031628978531757e0f39b4df8a2f?s=128&d=identicon&r=PG", "display_name": "Geeganage", "link": "https://stackoverflow.com/users/2479413/geeganage"}, "reply_to_user": {"reputation": 135, "user_id": 4215820, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1329974549/picture?type=large", "display_name": "Brad Flynn", "link": "https://stackoverflow.com/users/4215820/brad-flynn"}, "edited": false, "score": 0, "creation_date": 1488433513, "post_id": 42544502, "comment_id": 72230823, "body": "I&#39;m afraid that I won&#39;t be much helpful for that, but have a look on <a href=\"http://stackoverflow.com/a/23169930/2479413\">this post</a>"}], "tags": [], "owner": {"reputation": 93, "user_id": 2479413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09f9031628978531757e0f39b4df8a2f?s=128&d=identicon&r=PG", "display_name": "Geeganage", "link": "https://stackoverflow.com/users/2479413/geeganage"}, "is_accepted": false, "score": 1, "last_activity_date": 1488429465, "last_edit_date": 1495542721, "creation_date": 1488413141, "answer_id": 42544502, "question_id": 42544396, "link": "https://stackoverflow.com/questions/42544396/passing-an-array-of-objects-to-javascript/42544502#42544502", "title": "Passing an array of objects to javascript", "body": "<p>Can't you convert that object into a JSON object and access it.</p>\n\n<pre><code>JSON.parse($('input[name=my_array]').val());\n</code></pre>\n\n<p>I still didn't get that, how you create that list of object. (may be because I don't know much about Python)</p>\n\n<p>By the way, I suggest you to convert your Python object list to a JSON object in the server page.</p>\n\n<pre><code>json.dumps(c.__dict__)\n</code></pre>\n\n<p>I got that line from <a href=\"https://stackoverflow.com/a/7408719/2479413\">here</a>. Then you might able to use <em>JSON.parse</em> in your java script.</p>\n"}], "owner": {"reputation": 135, "user_id": 4215820, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/1329974549/picture?type=large", "display_name": "Brad Flynn", "link": "https://stackoverflow.com/users/4215820/brad-flynn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 778, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1488429465, "creation_date": 1488412522, "last_edit_date": 1488425530, "question_id": 42544396, "link": "https://stackoverflow.com/questions/42544396/passing-an-array-of-objects-to-javascript", "title": "Passing an array of objects to javascript", "body": "<p>I'm trying to view a python list of objects that was a part of some input in an html form:</p>\n\n<pre><code>$('input[name=my_array]').serializeObject()\n</code></pre>\n\n<p>where my input tag would be something like this:</p>\n\n<pre><code>&lt;input type=\"hidden\" name=\"my_array\" value=\"{{ my_array_of_objects }}\"&gt;\n</code></pre>\n\n<p>But I'm just getting something like this:</p>\n\n<pre><code>[&lt;object_type: an_object object&gt;]\n</code></pre>\n\n<p>So I can't access any properties of this object. Is there a way to convert this to where I can view what these are referencing to? I've been able to iterate over them in previous instances, and access their properties in my HTML file:</p>\n\n<pre><code>{% for o in my_array_of_objects %}\n   &lt;li&gt; o.id, o.first_name, o.last_name &lt;/li&gt;\n{% endfor %}\n</code></pre>\n\n<p>So is there a similar way I can access this object in javascript? Sorry if this is noob question. </p>\n\n<p>EDIT: Here is a sample of what I'm trying to pass. I'm using a django rest framework, where my objects are stored in a SQLDB, under python classes like so:</p>\n\n<pre><code>class my_object(models.Model):\n\n  study_id = models.CharField(max_length = 30, blank = True)\n  g1 = models.ForeignKey(G1)\n  g2 = models.ForeignKey(G2)\n\n  title = models.IntegerField(choices = TITLE_CHOICES)\n  family = models.IntegerField(choices = FAMILY_CHOICES)\n</code></pre>\n\n<p>and when a I render some page, I create a list of these objects that I need, let's just call it <code>my_list_of_objects</code>. So, in the HTML form, I have an input:</p>\n\n<pre><code>&lt;input type=\"hidden\" name=\"my_list\" value=\"{{ my_list_of_objects }}\"&gt;\n</code></pre>\n\n<p>and when I try to reference this value on the JavaScript side after I submit my form, all I get is a list of </p>\n\n<pre><code>my_list_of_objects =[&lt;my_object: my_object object&gt;, &lt;my_object: my_object object&gt;, ...]\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "types", "python-2.5"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1488412634, "post_id": 42544377, "comment_id": 72224519, "body": "Maybe something <a href=\"https://docs.python.org/3.5/library/numbers.html\" rel=\"nofollow noreferrer\">here</a> can fit your needs?"}], "answers": [{"comments": [{"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 0, "creation_date": 1488412929, "post_id": 42544439, "comment_id": 72224604, "body": "<code>isinstance(np.int32(1), numbers.Integral) -&gt; False</code>"}, {"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 0, "creation_date": 1488412958, "post_id": 42544439, "comment_id": 72224619, "body": "oh, nice! I tried looking at the base classes of <code>np.float64</code> but somehow all I could find was <code>object</code>. Looks like <code>isinstance(np.float64(123.456), numbers.Real)</code> returns <code>True</code>."}, {"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "reply_to_user": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 0, "creation_date": 1488412990, "post_id": 42544439, "comment_id": 72224622, "body": "oh, @MosesKoledoye found a counterexample. drat. :-("}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 0, "creation_date": 1488413030, "post_id": 42544439, "comment_id": 72224637, "body": "@MosesKoledoye I cannot reproduce that on Python 3.5"}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1488413068, "post_id": 42544439, "comment_id": 72224652, "body": "@juanpa.arrivillaga Python 2.7 it is; which is OP&#39;s version. Seems to work on Python 3 tho"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "reply_to_user": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 0, "creation_date": 1488413167, "post_id": 42544439, "comment_id": 72224678, "body": "@MosesKoledoye I know, but interesting that there is a discrepancy."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1488413177, "post_id": 42544439, "comment_id": 72224684, "body": "Probably depends on NumPy version. The <code>numbers</code> ABCs (and most complex ABCs) can&#39;t automatically tell whether a class implements the corresponding concept; they rely on people explicitly calling <code>numbers.Whatever.register(WhateverElse)</code>."}, {"owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "edited": false, "score": 2, "creation_date": 1488413235, "post_id": 42544439, "comment_id": 72224702, "body": "On python 2.7 (as the question is tagged), and the latest numpy (1.12),  <code>isinstance(np.int32(1), numbers.Integral)</code> -&gt; True"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1488413497, "post_id": 42544439, "comment_id": 72224785, "body": "Yes, as the docs say, <i>New in version 2.6.</i>, so it probably took a bit for the <code>numpy</code> developers to fit the <code>numpy</code> numeric types into the hierarchy."}, {"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 0, "creation_date": 1488413951, "post_id": 42544439, "comment_id": 72224938, "body": "Ah, interesting -- yeah, I&#39;m using numpy 1.11.1 -- gotta try upgrading."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1488414219, "post_id": 42544439, "comment_id": 72225015, "body": "While this might work on recent NumPy builds, it&#39;s not going to be very helpful for any users stuck on releases from before the <a href=\"https://github.com/numpy/numpy/pull/4547\" rel=\"nofollow noreferrer\">patch</a> that added the necessary <code>register</code> calls."}], "tags": [], "owner": {"reputation": 18468, "user_id": 5249307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c640cd731ca8e455d79860519b6b208?s=128&d=identicon&r=PG", "display_name": "donkopotamus", "link": "https://stackoverflow.com/users/5249307/donkopotamus"}, "is_accepted": false, "score": 1, "last_activity_date": 1488413506, "last_edit_date": 1488413506, "creation_date": 1488412778, "answer_id": 42544439, "question_id": 42544377, "link": "https://stackoverflow.com/questions/42544377/polymorphic-dispatch-distinguishing-python-integers-vs-floating-point-numbers/42544439#42544439", "title": "polymorphic dispatch: distinguishing Python integers vs. floating-point numbers vs. strings", "body": "<p>Check if it implements an appropriate abstract base class:</p>\n\n<pre><code>def handleThing(x):\n   import numbers\n   if isinstance(x, numbers.Integral):\n      return handleInteger(x)\n   elif isinstance(x, numbers.Real):\n      return handleFloatingPoint(x)\n   elif isinstance(x, basestring):\n      return handleString(x)\n   raise ValueError('handleThing only handles numbers and strings')\n</code></pre>\n\n<p>Using python 2.7, and numpy 1.12:</p>\n\n<pre><code>&gt;&gt;&gt; all([isinstance(t(1.0), numbers.Integral) for t in (np.int, np.int32, np.uint32, np.int64, numpy.uint64)])\nTrue\n\n&gt;&gt;&gt; all([isinstance(t(1.0), numbers.Real) for t in (float, np.float32, np.float64, np.float128)])\nTrue\n</code></pre>\n\n<p>Note that a <code>complex</code> number is <strong>not</strong> a real number, you should test that against <code>numbers.Complex</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 0, "creation_date": 1488465327, "post_id": 42544758, "comment_id": 72250780, "body": "awesome! How does operator.index &quot;know&quot; about numpy integers?"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 0, "creation_date": 1488468873, "post_id": 42544758, "comment_id": 72253391, "body": "@JasonS: They implement the <a href=\"https://www.python.org/dev/peps/pep-0357/\" rel=\"nofollow noreferrer\"><code>__index__</code></a> method."}, {"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "edited": false, "score": 0, "creation_date": 1488470373, "post_id": 42544758, "comment_id": 72254470, "body": "oh. duh, got it. Thanks! This really helped me a lot."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 1, "last_activity_date": 1488414604, "creation_date": 1488414604, "answer_id": 42544758, "question_id": 42544377, "link": "https://stackoverflow.com/questions/42544377/polymorphic-dispatch-distinguishing-python-integers-vs-floating-point-numbers/42544758#42544758", "title": "polymorphic dispatch: distinguishing Python integers vs. floating-point numbers vs. strings", "body": "<p>For a solution that doesn't rely on classes explicitly <code>register</code>ing themselves with the <code>number</code> ABCs (so it'll work on old NumPy versions and Python 2.5), you can use <a href=\"https://docs.python.org/2/library/operator.html#operator.index\" rel=\"nofollow noreferrer\"><code>operator.index</code></a> to test whether something is supposed to behave as an integer. (This is a wrapper around <code>__index__</code>, the thing you implement to make your objects usable as list indices.)</p>\n\n<pre><code>def handleThing(x):\n    try:\n        operator.index(x)\n    except TypeError:\n        pass\n    else:\n        return handleInteger(x)\n\n    if isinstance(x, basestring):\n        return handleString(x)\n\n    try:\n        # Would give false positive for strings, but we handled those already.\n        float(x)\n    except TypeError:\n        pass\n    else:\n        return handleFloatingPoint(x)\n\n    # You might want TypeError here.\n    raise ValueError('handleThing only handles numbers and strings')\n</code></pre>\n"}], "owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 42544758, "answer_count": 2, "score": 0, "last_activity_date": 1488414604, "creation_date": 1488412384, "last_edit_date": 1488414023, "question_id": 42544377, "link": "https://stackoverflow.com/questions/42544377/polymorphic-dispatch-distinguishing-python-integers-vs-floating-point-numbers", "title": "polymorphic dispatch: distinguishing Python integers vs. floating-point numbers vs. strings", "body": "<p>Suppose I have a function that needs to dispatch between one of three other functions, depending on whether it's \"integer-like\" or \"floating-point-like\" or \"string-like\" (or something else):</p>\n\n<pre><code>def handleThing(x):\n   if is_integer_like(x):\n      return handleInteger(x)\n   if is_floating_point_like(x):\n      return handleFloatingPoint(x)\n   if isinstance(x, basestring):\n      return handleString(x)\n   raise ValueError('handleThing only handles numbers and strings')\n</code></pre>\n\n<p>How can I write <code>is_integer_like</code> and <code>is_floating_point_like</code> to handle the following types, <em>without</em> requiring the use of the <code>numpy</code> library? I'm looking for something like duck-typing but am stumped since there doesn't seem to be a common method that would allow me to distinguish them. </p>\n\n<p>When I do the same sort of thing to identify whether something is a mapping type, in addition to <code>isinstance(x, collections.Mapping)</code> I typically do something like</p>\n\n<pre><code>def ismapping(x):\n   return hasattr(x, 'iteritems')\n</code></pre>\n\n<p>I need to handle:</p>\n\n<ul>\n<li><p>integer-like types:</p>\n\n<ul>\n<li><code>int</code></li>\n<li><code>long</code></li>\n<li>all <code>numpy</code> integer types (<code>np.int</code>, <code>np.int32</code>, <code>np.uint32</code>, etc.)</li>\n</ul></li>\n<li><p>floating-point like types:</p>\n\n<ul>\n<li><code>float</code></li>\n<li><code>complex</code></li>\n<li>all <code>numpy</code> floating-point types (<code>np.float32</code>, <code>np.float64</code>, etc.)</li>\n</ul></li>\n</ul>\n\n<hr>\n\n<p>edit: I'm also curious how to do this in Python 2.5.3 since I'm stuck with that version of Jython.   </p>\n"}, {"tags": ["python", "scrapy", "virtualenv"], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 6152683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XGX4ZHYSVJY/AAAAAAAAAAI/AAAAAAAAH2M/1kkq8TdacXQ/photo.jpg?sz=128", "display_name": "Kannan Ravindran", "link": "https://stackoverflow.com/users/6152683/kannan-ravindran"}, "is_accepted": false, "score": 0, "last_activity_date": 1488413708, "creation_date": 1488413708, "answer_id": 42544612, "question_id": 42544280, "link": "https://stackoverflow.com/questions/42544280/virtualenv-and-scrapy/42544612#42544612", "title": "VirtualEnv and Scrapy", "body": "<p>By default, the python interpreter that occurs first in the paths will be used. You can specifically mention which interpreter to use. Something like this:</p>\n\n<pre><code>$ path_to_dir\\env\\bin\\python runpy.py\n</code></pre>\n"}], "owner": {"reputation": 6433, "user_id": 6591667, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/6632be3bf9dfd9e4275569ebd3a2dacd?s=128&d=identicon&r=PG&f=1", "display_name": "tadm123", "link": "https://stackoverflow.com/users/6591667/tadm123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 419, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1488414078, "creation_date": 1488411819, "last_edit_date": 1488414078, "question_id": 42544280, "link": "https://stackoverflow.com/questions/42544280/virtualenv-and-scrapy", "title": "VirtualEnv and Scrapy", "body": "<p>I'll try to explain this, hopefully it makes sense.</p>\n\n<p>I had installed a virtual env a while ago in the directory: <code>desktop/project_website/test_project/env</code> and activate it to do some websites.</p>\n\n<p>I also pip installed scrapy on the <code>desktop/project_website/test_project/env/Scripts</code> dir</p>\n\n<p>The problem is that whenever I use the command prompt to run scrapy I need to be in this <em>specific</em> directory, so all the files that scrapy creates are made in there, not in the directory where my project is (that is <code>desktop/project_website/Scrapy</code>)</p>\n\n<p>I already tried setting the path of where scrapy was installed into my project directory:</p>\n\n<pre><code>(Test_Project) C:\\Users\\A\\Desktop\\Project_Website\\Scrapy&gt;path\nPATH=%path%;C:\\Users\\A\\Desktop\\Project_Website\\Test_Project\\env\\Scripts\n</code></pre>\n\n<p>And getting this error:</p>\n\n<pre><code>(Test_Project) C:\\Users\\A\\Desktop\\Project_Website\\Scrapy&gt;scrapy\nTraceback (most recent call last):\n  File \"C:\\Python\\Python35\\Lib\\runpy.py\", line 184, in _run_module_as_main\n    \"__main__\", mod_spec)\n  File \"C:\\Python\\Python35\\Lib\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"C:\\Users\\A\\Desktop\\Project_Website\\Test_Project\\env\\Scripts\\scrapy.exe\\__main__.py\", line 9, in &lt;module&gt;\n  File \"c:\\users\\a\\desktop\\project_website\\test_project\\env\\lib\\site-packages\\scrapy\\cmdline.py\", line 108, in execute\n    settings = get_project_settings()\n  File \"c:\\users\\a\\desktop\\project_website\\test_project\\env\\lib\\site-packages\\scrapy\\utils\\project.py\", line 68, in get_project_settings\n    settings.setmodule(settings_module_path, priority='project')\n  File \"c:\\users\\a\\desktop\\project_website\\test_project\\env\\lib\\site-packages\\scrapy\\settings\\__init__.py\", line 292, in setmodule\n    module = import_module(module)\n  File \"c:\\users\\a\\desktop\\project_website\\test_project\\env\\lib\\importlib\\__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 986, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 969, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 953, in _find_and_load_unlocked\nImportError: No module named 'quotes.settings'; 'quotes' is not a package\n</code></pre>\n\n<p>So, in short anyone know what can I do to run scrapy in my project dir? Thanks.</p>\n\n<p><strong>UPDATE  - SOLVED</strong>: \nInstead of using the to virtual env path<code>C:\\Users\\A\\Desktop\\Project_Website\\Test_Project\\env\\Scripts</code> I set it to where I installed scrapy on my PC <code>c:\\python\\python35\\scripts</code> and it's working now.</p>\n"}, {"tags": ["python", "python-3.x", "wheezy-web"], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 6152683, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XGX4ZHYSVJY/AAAAAAAAAAI/AAAAAAAAH2M/1kkq8TdacXQ/photo.jpg?sz=128", "display_name": "Kannan Ravindran", "link": "https://stackoverflow.com/users/6152683/kannan-ravindran"}, "is_accepted": false, "score": 0, "last_activity_date": 1488413923, "creation_date": 1488413923, "answer_id": 42544651, "question_id": 42544276, "link": "https://stackoverflow.com/questions/42544276/how-do-you-install-pythons-wheezy-web-microframework/42544651#42544651", "title": "How do you install Python&#39;s Wheezy.web microframework?", "body": "<p>Install\nWheezy Web requires python version 2.4 to 2.7 or 3.2+. It is independent of operating system. You can install it from pypi site using setuptools:</p>\n\n<pre><code>$ easy_install wheezy.web\n</code></pre>\n\n<p>If you are using virtualenv:</p>\n\n<pre><code>$ virtualenv env\n$ env/bin/easy_install wheezy.web\n</code></pre>\n\n<p>Since Wheezy Web is template engine agnostic, you need specify extra </p>\n\n<p>requirements (per template engine of your choice):</p>\n\n<pre><code>$ env/bin/easy_install wheezy.web[jinja2]\n$ env/bin/easy_install wheezy.web[mako]\n$ env/bin/easy_install wheezy.web[tenjin]\n$ env/bin/easy_install wheezy.web[wheezy.template]\n</code></pre>\n\n<p>Develop\nYou can get the source code using mercurial:</p>\n\n<pre><code>$ hg clone http://bitbucket.org/akorn/wheezy.web\n$ cd wheezy.web\n</code></pre>\n\n<p>Prepare virtualenv environment in env directory</p>\n\n<pre><code>$ make env\n</code></pre>\n\n<p>... and run all tests:</p>\n\n<pre><code>$ make test\n</code></pre>\n\n<p>You can read how to compile from source code different versions of python in the article published on mind reference blog.</p>\n\n<p>You can run certain make targets with specific python version. Here we are going to run doctest with python3.2:</p>\n\n<pre><code>$ make env doctest-cover VERSION=3.2\n</code></pre>\n\n<p>Generate documentation with sphinx:</p>\n\n<pre><code>$ make doc\n</code></pre>\n\n<p>Source: <a href=\"https://pythonhosted.org/wheezy.web/gettingstarted.html#install\" rel=\"nofollow noreferrer\">https://pythonhosted.org/wheezy.web/gettingstarted.html#install</a></p>\n"}, {"tags": [], "owner": {"reputation": 1193, "user_id": 2339466, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rp6CF.jpg?s=128&g=1", "display_name": "Hett", "link": "https://stackoverflow.com/users/2339466/hett"}, "is_accepted": false, "score": 0, "last_activity_date": 1543322318, "creation_date": 1543322318, "answer_id": 53499916, "question_id": 42544276, "link": "https://stackoverflow.com/questions/42544276/how-do-you-install-pythons-wheezy-web-microframework/53499916#53499916", "title": "How do you install Python&#39;s Wheezy.web microframework?", "body": "<p>If it's still actual, you can install wheezy.web just via pip: <code>pip install wheezy.web wheezy.template</code></p>\n"}], "owner": {"reputation": 367, "user_id": 4333199, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100000082542734/picture?type=large", "display_name": "Marcus Holm", "link": "https://stackoverflow.com/users/4333199/marcus-holm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1543322318, "creation_date": 1488411786, "question_id": 42544276, "link": "https://stackoverflow.com/questions/42544276/how-do-you-install-pythons-wheezy-web-microframework", "title": "How do you install Python&#39;s Wheezy.web microframework?", "body": "<p>I tried following the documentation, which can be found here: (<a href=\"https://pythonhosted.org/wheezy.web/gettingstarted.html\" rel=\"nofollow noreferrer\">https://pythonhosted.org/wheezy.web/gettingstarted.html</a>) but I'm too dumb to figure it out.</p>\n"}, {"tags": ["python", "serialization", "apache-kafka", "confluent-platform"], "answers": [{"comments": [{"owner": {"reputation": 1173, "user_id": 6656192, "user_type": "registered", "accept_rate": 5, "profile_image": "https://www.gravatar.com/avatar/150e90089f3fa8767d5a9fe98e3151b7?s=128&d=identicon&r=PG&f=1", "display_name": "NoName", "link": "https://stackoverflow.com/users/6656192/noname"}, "edited": false, "score": 0, "creation_date": 1488478265, "post_id": 42545842, "comment_id": 72259679, "body": "Thank you for your answer! Can you please let me know what are the available serialzers?"}, {"owner": {"reputation": 5765, "user_id": 7028697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hWECt.png?s=128&g=1", "display_name": "amethystic", "link": "https://stackoverflow.com/users/7028697/amethystic"}, "reply_to_user": {"reputation": 1173, "user_id": 6656192, "user_type": "registered", "accept_rate": 5, "profile_image": "https://www.gravatar.com/avatar/150e90089f3fa8767d5a9fe98e3151b7?s=128&d=identicon&r=PG&f=1", "display_name": "NoName", "link": "https://stackoverflow.com/users/6656192/noname"}, "edited": false, "score": 0, "creation_date": 1488495733, "post_id": 42545842, "comment_id": 72269168, "body": "Check <a href=\"https://kafka.apache.org/0102/javadoc/index.html?org/apache/kafka/clients/consumer/KafkaConsumer.html\" rel=\"nofollow noreferrer\">kafka.apache.org/0102/javadoc/index.html?org/apache/kafka/&hellip;</a> for all known implementing subclasses of serdes."}], "tags": [], "owner": {"reputation": 5765, "user_id": 7028697, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hWECt.png?s=128&g=1", "display_name": "amethystic", "link": "https://stackoverflow.com/users/7028697/amethystic"}, "is_accepted": false, "score": -1, "last_activity_date": 1488422378, "creation_date": 1488422378, "answer_id": 42545842, "question_id": 42544221, "link": "https://stackoverflow.com/questions/42544221/confluent-kafka-how-is-serialization-and-partitioning-specified-in-confluent-ka/42545842#42545842", "title": "Confluent Kafka: How is serialization and partitioning specified in confluent-kafka-python client?", "body": "<p>For question #1: Add <code>key.serializer</code> and <code>value.serializer</code> in the config, as show below:  </p>\n\n<pre><code>from confluent_kafka import Producer\nimport socket\nconf = {'bootstrap.servers': \"host1:9092,host2:9092\",\n    'client.id': socket.gethostname(),\n    'key.serializer': 'key serializer classpath',\n    'value.serializer': 'value serializer classpath',\n    'default.topic.config': {'acks': 'all'}}\nproducer = Producer(conf)\n</code></pre>\n\n<p>For question #2: Implement your own ProtobufSerializer class and set {key|value}.serializer to it.</p>\n"}], "owner": {"reputation": 1173, "user_id": 6656192, "user_type": "registered", "accept_rate": 5, "profile_image": "https://www.gravatar.com/avatar/150e90089f3fa8767d5a9fe98e3151b7?s=128&d=identicon&r=PG&f=1", "display_name": "NoName", "link": "https://stackoverflow.com/users/6656192/noname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 937, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1537970530, "creation_date": 1488411457, "last_edit_date": 1537970530, "question_id": 42544221, "link": "https://stackoverflow.com/questions/42544221/confluent-kafka-how-is-serialization-and-partitioning-specified-in-confluent-ka", "title": "Confluent Kafka: How is serialization and partitioning specified in confluent-kafka-python client?", "body": "<p>1) In Java Client, using producer.put() we can add serializers for Integers and Strings. How do we do this for confluent-kafka-python client?\n2) How do we serialize protoBuf records?</p>\n"}, {"tags": ["python", "algorithm", "genetic-algorithm", "mutation"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1488411304, "post_id": 42544150, "comment_id": 72224075, "body": "What&#39;s with <code>type(x[i])(not x[i])</code>...?"}, {"owner": {"reputation": 409, "user_id": 7632116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6497da4ec6febaf4256d3835f6fba2ae?s=128&d=identicon&r=PG&f=1", "display_name": "azeez", "link": "https://stackoverflow.com/users/7632116/azeez"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1488412086, "post_id": 42544150, "comment_id": 72224357, "body": "The value of x[i]"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1488412188, "post_id": 42544150, "comment_id": 72224391, "body": "But why are you doing <code>type(x[i])(...)</code>?"}, {"owner": {"reputation": 409, "user_id": 7632116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6497da4ec6febaf4256d3835f6fba2ae?s=128&d=identicon&r=PG&f=1", "display_name": "azeez", "link": "https://stackoverflow.com/users/7632116/azeez"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1488412464, "post_id": 42544150, "comment_id": 72224469, "body": "I am trying to switch values"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1488412666, "post_id": 42544150, "comment_id": 72224533, "body": "Yes, <i>I understand that</i>. I don&#39;t understand why you are using <b><code>type</code></b>"}, {"owner": {"reputation": 409, "user_id": 7632116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6497da4ec6febaf4256d3835f6fba2ae?s=128&d=identicon&r=PG&f=1", "display_name": "azeez", "link": "https://stackoverflow.com/users/7632116/azeez"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1488413059, "post_id": 42544150, "comment_id": 72224649, "body": "I think this the right functions as I understand from the web page: <a href=\"https://docs.python.org/2/library/functions.html#type\" rel=\"nofollow noreferrer\">docs.python.org/2/library/functions.html#type</a> maybe I am wrong!!!"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1488413092, "post_id": 42544150, "comment_id": 72224656, "body": "Why not just <code>int</code>?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1488413125, "post_id": 42544150, "comment_id": 72224668, "body": "<b>Why</b> , can you explain <b>why</b> you are using <code>type</code>. I know what it does already."}, {"owner": {"reputation": 409, "user_id": 7632116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6497da4ec6febaf4256d3835f6fba2ae?s=128&d=identicon&r=PG&f=1", "display_name": "azeez", "link": "https://stackoverflow.com/users/7632116/azeez"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1488413657, "post_id": 42544150, "comment_id": 72224840, "body": "I don&#39;t know just trying this method"}], "answers": [{"comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1488412233, "post_id": 42544319, "comment_id": 72224401, "body": "I wouldn&#39;t say it is preferable to create a new list rather than mutating an old one... that totally depends on your use-case."}, {"owner": {"reputation": 4719, "user_id": 2958070, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FtkjC.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/2958070/ben"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1488412743, "post_id": 42544319, "comment_id": 72224548, "body": "@juanpa.arrivillaga I guess it is more of an opinion, but unless performance is an issue, I really appreciate functions not messing with the values I put into them without explicit assignment when I call the function."}, {"owner": {"reputation": 409, "user_id": 7632116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6497da4ec6febaf4256d3835f6fba2ae?s=128&d=identicon&r=PG&f=1", "display_name": "azeez", "link": "https://stackoverflow.com/users/7632116/azeez"}, "edited": false, "score": 0, "creation_date": 1488413410, "post_id": 42544319, "comment_id": 72224756, "body": "@Ben I am using Spyder python environment, does it make a difference? for me it returning the same result [0,0,0,0,0]"}, {"owner": {"reputation": 4719, "user_id": 2958070, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FtkjC.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/2958070/ben"}, "reply_to_user": {"reputation": 409, "user_id": 7632116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6497da4ec6febaf4256d3835f6fba2ae?s=128&d=identicon&r=PG&f=1", "display_name": "azeez", "link": "https://stackoverflow.com/users/7632116/azeez"}, "edited": false, "score": 0, "creation_date": 1488413516, "post_id": 42544319, "comment_id": 72224793, "body": "@azeez it shouldn&#39;t... Just to be sure though, close Spyder, start it up again, then paste the code in. That will restart the interpreter and clear away any possible definitions you&#39;ve already made."}, {"owner": {"reputation": 409, "user_id": 7632116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6497da4ec6febaf4256d3835f6fba2ae?s=128&d=identicon&r=PG&f=1", "display_name": "azeez", "link": "https://stackoverflow.com/users/7632116/azeez"}, "edited": false, "score": 0, "creation_date": 1488415399, "post_id": 42544319, "comment_id": 72225366, "body": "@Ben I did but now it gives me an error: NameError: name &#39;random&#39; is not defined"}, {"owner": {"reputation": 409, "user_id": 7632116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6497da4ec6febaf4256d3835f6fba2ae?s=128&d=identicon&r=PG&f=1", "display_name": "azeez", "link": "https://stackoverflow.com/users/7632116/azeez"}, "edited": false, "score": 0, "creation_date": 1488415707, "post_id": 42544319, "comment_id": 72225463, "body": "@Ben sorry I was missing &quot;import random&quot;"}], "tags": [], "owner": {"reputation": 4719, "user_id": 2958070, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FtkjC.jpg?s=128&g=1", "display_name": "Ben", "link": "https://stackoverflow.com/users/2958070/ben"}, "is_accepted": true, "score": 0, "last_activity_date": 1488412895, "last_edit_date": 1488412895, "creation_date": 1488412033, "answer_id": 42544319, "question_id": 42544150, "link": "https://stackoverflow.com/questions/42544150/randomly-flip-one-bit-in-a-binary-list/42544319#42544319", "title": "Randomly flip one bit in a binary list", "body": "<p>Are you sure you're calling the function before printing <code>x</code>:</p>\n\n<pre><code>def mutation(x):\n    # your code without the trailing comma\n\nmutation(x)\nprint(x)\n</code></pre>\n\n<p>In Python, creating a new list is usually preferable to mutating an old one. I would write your first function like this (I converted the integers to booleans because you're just flipping them:</p>\n\n<pre><code>x = [False, False, False, False]\n\n\ndef mutation(x, muta):\n    return [not e if random.random() &lt; muta else e\n            for e in x]\n</code></pre>\n\n<p>Change <code>x</code> by assigning to it again:</p>\n\n<pre><code>x = mutation(x, .5)\n</code></pre>\n\n<p>Your original function is working if you remove the comma after the <code>return</code>:</p>\n\n<pre><code>def mutation(x, muta):\n    for i in range(len(x)):\n        if random.random() &lt; muta:\n            x[i] = type(x[i])(not x[i])\n    return x\nx = [False, False, False, False]\n\n\nmutation(x, .5)\nOut[8]: [False, False, True, False]\n\nmutation(x, .5)\nOut[9]: [True, True, True, False]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 390, "user_id": 771112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7eba08339e2c2c5fc13231471b5f031?s=128&d=identicon&r=PG&f=1", "display_name": "Brendan Cody-Kenny", "link": "https://stackoverflow.com/users/771112/brendan-cody-kenny"}, "is_accepted": false, "score": 0, "last_activity_date": 1488461841, "last_edit_date": 1495541828, "creation_date": 1488461841, "answer_id": 42557001, "question_id": 42544150, "link": "https://stackoverflow.com/questions/42544150/randomly-flip-one-bit-in-a-binary-list/42557001#42557001", "title": "Randomly flip one bit in a binary list", "body": "<p>You could also use python's <a href=\"https://wiki.python.org/moin/BitwiseOperators\" rel=\"nofollow noreferrer\" title=\"XOR operator\">XOR operator</a> to flip bits, which will flip between '1' and '0':</p>\n\n<p><code>x[1] = x[1] ^ 1</code></p>\n\n<p>See also: <a href=\"https://stackoverflow.com/questions/40096616/python-xor-preference-bitwise-operator-vs-boolean-operators?noredirect=1&amp;lq=1\">Python XOR preference: bitwise operator vs. boolean operators</a></p>\n"}], "owner": {"reputation": 409, "user_id": 7632116, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6497da4ec6febaf4256d3835f6fba2ae?s=128&d=identicon&r=PG&f=1", "display_name": "azeez", "link": "https://stackoverflow.com/users/7632116/azeez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1359, "favorite_count": 1, "accepted_answer_id": 42544319, "answer_count": 2, "score": 0, "last_activity_date": 1590598409, "creation_date": 1488411088, "last_edit_date": 1590598409, "question_id": 42544150, "link": "https://stackoverflow.com/questions/42544150/randomly-flip-one-bit-in-a-binary-list", "title": "Randomly flip one bit in a binary list", "body": "<p>I am using python-3.x, and I am trying to do mutation on a binary string that will flip one bit of the elements from 0 to 1 or 1 to 0 by random, I tried some methods but didn't work I don't know where is the problem:</p>\n\n<pre><code>x=[0, 0, 0, 0, 0]\n\ndef mutation (x, muta):\n    for i in range(len(x)):\n        if random.random() &lt; muta:\n            x[i] = type(x[i])(not x[i])\n    return x,\nprint (x)\n</code></pre>\n\n<p>The output for example should be x=[0, 0, 0, 1, 0] or x=[1, 0, 0, 0, 0] and so on....</p>\n\n<p>Also, I tried this one:</p>\n\n<pre><code>MUTATION_RATE = 0.5\nCHROMO_LEN = 6\ndef mutate(x):\n    x = \"\"\n    for i in range(CHROMO_LEN):\n        if (random.random() &lt; MUTATION_RATE):\n            if (x[i] == 1):\n                x += 0\n            else:\n                x += 1\n        else:\n            x += x[i]\n    return x\nprint(x)\n</code></pre>\n\n<p>please any suggestion or advice will be appreciated</p>\n"}, {"tags": ["python", "list", "loops", "for-loop", "indexing"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1488411092, "post_id": 42544131, "comment_id": 72224001, "body": "<code>for i, num in enumerate(xs): &lt;your logic&gt; return i</code>"}, {"owner": {"reputation": 129, "user_id": 7576715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e252c6f9f501d025d53c49fede4adf06?s=128&d=identicon&r=PG&f=1", "display_name": "ocean.1234", "link": "https://stackoverflow.com/users/7576715/ocean-1234"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1488417372, "post_id": 42544131, "comment_id": 72225907, "body": "@juanpa.arrivillaga I cannot use any built in functions, so enumerate will not work."}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 7576715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e252c6f9f501d025d53c49fede4adf06?s=128&d=identicon&r=PG&f=1", "display_name": "ocean.1234", "link": "https://stackoverflow.com/users/7576715/ocean-1234"}, "edited": false, "score": 0, "creation_date": 1488419453, "post_id": 42545199, "comment_id": 72226411, "body": "Okay so I think that is a good set up, but I am still failing tests. For instance,  locate_second_divisor([20,3,5,3,4],12) should return 2, but instead is giving none. @Paul H"}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "reply_to_user": {"reputation": 129, "user_id": 7576715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e252c6f9f501d025d53c49fede4adf06?s=128&d=identicon&r=PG&f=1", "display_name": "ocean.1234", "link": "https://stackoverflow.com/users/7576715/ocean-1234"}, "edited": false, "score": 0, "creation_date": 1488429416, "post_id": 42545199, "comment_id": 72229372, "body": "@ocean.1234 check your indentation. it works as expected for me. Also note that your example is wrong. the second divisor is the second occurrence of 3, which is the 4th element, which is located at index 3,"}, {"owner": {"reputation": 129, "user_id": 7576715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e252c6f9f501d025d53c49fede4adf06?s=128&d=identicon&r=PG&f=1", "display_name": "ocean.1234", "link": "https://stackoverflow.com/users/7576715/ocean-1234"}, "edited": false, "score": 0, "creation_date": 1488467822, "post_id": 42545199, "comment_id": 72252617, "body": "you are correct that my example is wrong. I see that. I still can&#39;t get the function to past the tests though."}, {"owner": {"reputation": 129, "user_id": 7576715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e252c6f9f501d025d53c49fede4adf06?s=128&d=identicon&r=PG&f=1", "display_name": "ocean.1234", "link": "https://stackoverflow.com/users/7576715/ocean-1234"}, "edited": false, "score": 0, "creation_date": 1488468440, "post_id": 42545199, "comment_id": 72253091, "body": "Also @Paul H, it needs to include an else statement that returns none. Here is my updated code:def locate_second_divisor(xs,n): \tcount=0 \tindex=0 \tfor num in xs:  \t\tif (n % num)==0: \t\t\tcount+=1 \t\tif count ==2: \t\t\treturn index \t\telse: \t\t\treturn None"}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "reply_to_user": {"reputation": 129, "user_id": 7576715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e252c6f9f501d025d53c49fede4adf06?s=128&d=identicon&r=PG&f=1", "display_name": "ocean.1234", "link": "https://stackoverflow.com/users/7576715/ocean-1234"}, "edited": false, "score": 0, "creation_date": 1488475034, "post_id": 42545199, "comment_id": 72257712, "body": "@ocean.1234 you don&#39;t need that last <code>else</code> since <code>None</code> is returned by default. See for yourself with: <code>print(locate_second_divisor([20,3,5,3,4], 7))</code>"}, {"owner": {"reputation": 129, "user_id": 7576715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e252c6f9f501d025d53c49fede4adf06?s=128&d=identicon&r=PG&f=1", "display_name": "ocean.1234", "link": "https://stackoverflow.com/users/7576715/ocean-1234"}, "edited": false, "score": 0, "creation_date": 1488477142, "post_id": 42545199, "comment_id": 72258996, "body": "you were right. I didn&#39;t need the last else statement. I removed it but my function is just returning 0 each time. I don&#39;t think it is updating count or something."}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "reply_to_user": {"reputation": 129, "user_id": 7576715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e252c6f9f501d025d53c49fede4adf06?s=128&d=identicon&r=PG&f=1", "display_name": "ocean.1234", "link": "https://stackoverflow.com/users/7576715/ocean-1234"}, "edited": false, "score": 0, "creation_date": 1488479636, "post_id": 42545199, "comment_id": 72260479, "body": "restart your interpreter, check your indentation. my implementation is working as expected for me."}], "tags": [], "owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "is_accepted": true, "score": 2, "last_activity_date": 1488475087, "last_edit_date": 1488475087, "creation_date": 1488417724, "answer_id": 42545199, "question_id": 42544131, "link": "https://stackoverflow.com/questions/42544131/how-to-get-an-index-in-a-list-without-calling-index-function-or-any-built-in-fun/42545199#42545199", "title": "How to get an index in a list without calling index function or ANY built in functions?", "body": "<p>If I understand correctly, you can just track the index the same way you're tacking the count of the times your condition is met.</p>\n\n<pre><code>def locate_second_divisor(xs, n):\n     count = 0\n     index = 0\n     for num in xs:\n        count += (n % num) == 0\n\n        if count == 2:\n            return index\n        else:\n            index += 1 \n\nprint(locate_second_divisor([20,3,5,3,4], 12))\n# 3\n</code></pre>\n\n<p>Fun note:\nSince <code>(n % num) == 0</code> evaluates to <code>True</code> or <code>False</code>, which safely cast to 1 \nand 0, you can simplify your first <code>if</code> block to: <code>count += (n % num) == 0</code></p>\n"}], "owner": {"reputation": 129, "user_id": 7576715, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e252c6f9f501d025d53c49fede4adf06?s=128&d=identicon&r=PG&f=1", "display_name": "ocean.1234", "link": "https://stackoverflow.com/users/7576715/ocean-1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4920, "favorite_count": 0, "accepted_answer_id": 42545199, "answer_count": 1, "score": 1, "last_activity_date": 1488475087, "creation_date": 1488410986, "last_edit_date": 1488468192, "question_id": 42544131, "link": "https://stackoverflow.com/questions/42544131/how-to-get-an-index-in-a-list-without-calling-index-function-or-any-built-in-fun", "title": "How to get an index in a list without calling index function or ANY built in functions?", "body": "<p>I am currently trying to build a function that finds the second divisor of a number (n) and returns the index of the second divisor WITHOUT calling the build-in index function. \nxs is a list and n is the number to be divided\nexample would be: <code>locate_second_divisor([20,3,4,2],12)</code> yields 2</p>\n\n<p>My current code</p>\n\n<pre><code>count=0\ndef locate_second_divisor(xs,n):\n     count=0\n     for num in xs:\n        if n % num==0:\n          count+=1\n        if count==2:\n         return\n</code></pre>\n\n<p>At return, I need to write the index of the second divisor but I can't think of how to do it without calling index.</p>\n\n<p>This is not a duplicate question as I am not allowed to use ANY built in functions. I can only use append, int, float, str, and loops with booleans and operators. I cannot use enumerate like similar questions can. I need some sort of way around the built in functions.</p>\n\n<p>Updated code (only fails because I have to include None if there is no second divisor)</p>\n\n<p>def locate_second_divisor(xs,n):\n    count=0\n    index=0\n    for num in xs: \n        if (n % num)==0:\n            count+=1\n        if count ==2:\n            return index\n        else:\n            return None</p>\n"}, {"tags": ["python", "web-scraping", "scrapy", "instagram", "instagram-api"], "comments": [{"owner": {"reputation": 2234, "user_id": 1149136, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/m8enX.jpg?s=128&g=1", "display_name": "iraj jelodari", "link": "https://stackoverflow.com/users/1149136/iraj-jelodari"}, "edited": false, "score": 0, "creation_date": 1488413270, "post_id": 42544109, "comment_id": 72224708, "body": "I suggest to you using Instagram API instead of using scrapy. you dont have pain of parsing and crawling in pages by using API"}], "answers": [{"comments": [{"owner": {"reputation": 23680, "user_id": 2414957, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0MuAW.jpg?s=128&g=1", "display_name": "Mona Jalal", "link": "https://stackoverflow.com/users/2414957/mona-jalal"}, "edited": false, "score": 1, "creation_date": 1488411845, "post_id": 42544171, "comment_id": 72224268, "body": "confirming that from scrapy.spider import BaseSpider as Spider worked but not the upgrading. <a href=\"http://pastebin.com/6YB0TZRs\" rel=\"nofollow noreferrer\">pastebin.com/6YB0TZRs</a> Thanks!"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 23680, "user_id": 2414957, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0MuAW.jpg?s=128&g=1", "display_name": "Mona Jalal", "link": "https://stackoverflow.com/users/2414957/mona-jalal"}, "edited": false, "score": 2, "creation_date": 1488412244, "post_id": 42544171, "comment_id": 72224403, "body": "@MonaJalal yeah, you basically cannot install the latest scrapy version for some reason. It reports it being installed, but the <code>scrapy</code> command is still &quot;tied&quot; to 0.14.4. Glad the workaround worked, though I would work into making the upgrade possible - 0.14.4 is really, really old - a lot of things changed from that time."}, {"owner": {"reputation": 23680, "user_id": 2414957, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0MuAW.jpg?s=128&g=1", "display_name": "Mona Jalal", "link": "https://stackoverflow.com/users/2414957/mona-jalal"}, "edited": false, "score": 0, "creation_date": 1488422149, "post_id": 42544171, "comment_id": 72227196, "body": "can you please have a look at this question? <a href=\"http://stackoverflow.com/questions/42545020/how-to-get-the-followers-of-a-person-as-well-as-comments-under-the-photos-in-ins\" title=\"how to get the followers of a person as well as comments under the photos in ins\">stackoverflow.com/questions/42545020/&hellip;</a>"}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 3, "last_activity_date": 1488411196, "creation_date": 1488411196, "answer_id": 42544171, "question_id": 42544109, "link": "https://stackoverflow.com/questions/42544109/class-instagramspiderscrapy-spider-attributeerror-module-object-has-no-att/42544171#42544171", "title": "class InstagramSpider(scrapy.Spider): AttributeError: &#39;module&#39; object has no attribute &#39;Spider&#39;", "body": "<p>According to the output, you are using a very-very old Scrapy <code>0.14.4</code>, which did not expose the <code>Spider</code> onto the <code>scrapy</code> namespace.</p>\n\n<p>Either update:</p>\n\n<pre><code>pip install scrapy --upgrade\n</code></pre>\n\n<p>Or, change your import to (not sure this will work as is):</p>\n\n<pre><code>from scrapy.spider import BaseSpider as Spider\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44, "user_id": 7636331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ad9e4a6154bce468bce64c5c1bbf54d?s=128&d=identicon&r=PG&f=1", "display_name": "Saikia81", "link": "https://stackoverflow.com/users/7636331/saikia81"}, "is_accepted": false, "score": 1, "last_activity_date": 1488412441, "last_edit_date": 1488412441, "creation_date": 1488411523, "answer_id": 42544229, "question_id": 42544109, "link": "https://stackoverflow.com/questions/42544109/class-instagramspiderscrapy-spider-attributeerror-module-object-has-no-att/42544229#42544229", "title": "class InstagramSpider(scrapy.Spider): AttributeError: &#39;module&#39; object has no attribute &#39;Spider&#39;", "body": "<p>You might have to upgrade scrapy through your package manager, it seems you use a Linux based OS.</p>\n\n<p>Else try upgrading both with pip2 and pip3, in case you have Python 2, and 3</p>\n"}], "owner": {"reputation": 23680, "user_id": 2414957, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0MuAW.jpg?s=128&g=1", "display_name": "Mona Jalal", "link": "https://stackoverflow.com/users/2414957/mona-jalal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2422, "favorite_count": 0, "accepted_answer_id": 42544171, "answer_count": 2, "score": 3, "last_activity_date": 1488412441, "creation_date": 1488410887, "last_edit_date": 1495540434, "question_id": 42544109, "link": "https://stackoverflow.com/questions/42544109/class-instagramspiderscrapy-spider-attributeerror-module-object-has-no-att", "title": "class InstagramSpider(scrapy.Spider): AttributeError: &#39;module&#39; object has no attribute &#39;Spider&#39;", "body": "<p>How should I fix this error?</p>\n\n<pre><code>mona@pascal:~/computer_vision/instagram/instagram$ scrapy crawl instagramspider\n2017-03-01 17:24:03-0600 [scrapy] INFO: Scrapy 0.14.4 started (bot: instagram)\n2017-03-01 17:24:04-0600 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, MemoryUsage, SpiderState\nTraceback (most recent call last):\n  File \"/usr/bin/scrapy\", line 4, in &lt;module&gt;\n    execute()\n  File \"/usr/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 132, in execute\n    _run_print_help(parser, _run_command, cmd, args, opts)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 97, in _run_print_help\n    func(*a, **kw)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 139, in _run_command\n    cmd.run(args, opts)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/commands/crawl.py\", line 43, in run\n    spider = self.crawler.spiders.create(spname, **opts.spargs)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/command.py\", line 34, in crawler\n    self._crawler.configure()\n  File \"/usr/lib/python2.7/dist-packages/scrapy/crawler.py\", line 36, in configure\n    self.spiders = spman_cls.from_crawler(self)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/spidermanager.py\", line 37, in from_crawler\n    return cls.from_settings(crawler.settings)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/spidermanager.py\", line 33, in from_settings\n    return cls(settings.getlist('SPIDER_MODULES'))\n  File \"/usr/lib/python2.7/dist-packages/scrapy/spidermanager.py\", line 23, in __init__\n    for module in walk_modules(name):\n  File \"/usr/lib/python2.7/dist-packages/scrapy/utils/misc.py\", line 65, in walk_modules\n    submod = __import__(fullpath, {}, {}, [''])\n  File \"/home/mona/computer_vision/instagram/instagram/instagram/spiders/spider.py\", line 7, in &lt;module&gt;\n    class InstagramSpider(scrapy.Spider):\nAttributeError: 'module' object has no attribute 'Spider'\n</code></pre>\n\n<p>More information can be found here:\n<a href=\"https://stackoverflow.com/questions/42542531/from-scraper-user-items-import-useritem-importerror-no-module-named-scraper-use\">From scraper_user.items import UserItem ImportError: No module named scraper_user.items</a></p>\n\n<pre><code>Python 2.7.6 (default, Oct 26 2016, 20:30:19) \n[GCC 4.8.4] on linux2\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; import scrapy\n&gt;&gt;&gt; print scrapy.__file__\n/usr/lib/python2.7/dist-packages/scrapy/__init__.pyc\n&gt;&gt;&gt; print(dir(scrapy))\n['__builtins__', '__doc__', '__file__', '__name__', '__package__', '__path__', '__version__', 'boto', 'optional_features', 'os', 'sys', 'twisted_250_monkeypatches', 'urlparse_monkeypatches', 'version_info', 'warnings', 'xlib']\n&gt;&gt;&gt; print(scrapy.spider)\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'module' object has no attribute 'spider'\n</code></pre>\n"}, {"tags": ["python", "raspberry-pi", "gpio", "smtplib"], "comments": [{"owner": {"reputation": 21, "user_id": 5574541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7eb863dad1ffac5af6f5d69b99b300?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Brown", "link": "https://stackoverflow.com/users/5574541/jim-brown"}, "edited": false, "score": 0, "creation_date": 1488549486, "post_id": 42544080, "comment_id": 72293996, "body": "Fixed,  I moved the while loop to include the msgRoot"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5574541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7eb863dad1ffac5af6f5d69b99b300?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Brown", "link": "https://stackoverflow.com/users/5574541/jim-brown"}, "is_accepted": false, "score": 0, "last_activity_date": 1488553712, "creation_date": 1488553712, "answer_id": 42582322, "question_id": 42544080, "link": "https://stackoverflow.com/questions/42544080/python-rpi-gpio-smtp-code-capture-http-image-save-and-sends/42582322#42582322", "title": "Python RPI GPIO: SMTP Code capture HTTP Image Save and Sends", "body": "<p>Fixed, I moved the while loop to include the msgRoot</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>    # Send an HTML email with an embedded image and a plain text message for\n    # email clients that don't want to display the HTML.\n\n    import datetime\n    import time\n    import smtplib\n    import urllib2\n    import RPi.GPIO as gpio\n    gpio.setmode(gpio.BCM)\n    gpio.setup(17, gpio.IN, pull_up_down = gpio.PUD_DOWN)\n\n\n    from email.MIMEMultipart import MIMEMultipart\n    from email.MIMEText import MIMEText\n    from email.MIMEImage import MIMEImage\n\n    dtnow = datetime.datetime.now().strftime(\"%m-%d-%Y %H:%M:%S\")\n    print 'SMTP Doorbell Application loaded @ ' + dtnow\n\n    smtpServer = 'smtp.server.com'\n    smtpPort = '587'\n\n    smtpUser = 'smtuser@email.com'\n    smtpPass = 'P@ssword1'\n\n    strFrom = 'fromname@email.com'\n    strTo = 'toname@email.com'\n\n while True:\n        input_value = gpio.input(17)\n        if input_value == False:\n\n\n    # Create the root message and fill in the from, to, and subject headers\n    msgRoot = MIMEMultipart('related')\n    msgRoot['Subject'] = 'RPI - Doorbell Alert'\n    msgRoot['From'] = strFrom\n    msgRoot['To'] = strTo\n    msgRoot.preamble = 'This is a multi-part message in MIME format.'\n\n    header = 'From: ' + strFrom + '\\n' + 'To: ' + strTo + '\\n' + 'Subject: RPI - Doorbell Alert' \n\n\n            print(\"\\033c\")\n            dtnow = datetime.datetime.now().strftime(\"%m-%d-%Y %H:%M:%S\")\n            print 'Doorbell has been pressed @ ' + dtnow\n\n                    # Encapsulate the plain and HTML versions of the message body in an\n                    # 'alternative' part, so message agents can decide which they want to display.\n                    msgAlternative = MIMEMultipart('alternative')\n                    msgRoot.attach(msgAlternative)\n\n                    dtnow = datetime.datetime.now().strftime(\"%m-%d-%Y %H:%M:%S\")\n                    msgText = MIMEText('Doorbell Rang @ ' + dtnow)\n                    msgAlternative.attach(msgText)\n\n                    # We reference the image in the IMG SRC attribute by the ID we give it below\n                    msgText = MIMEText('Doorbell Rang @ ' + dtnow + ' &lt;br&gt;&lt;img src=\"cid:image1\"&gt;', 'html')\n                    msgAlternative.attach(msgText)\n\n\n            # Get ReoLink Image\n                    request = urllib2.Request(\n                            r'http://192.168.0.11/cgi-bin/api.cgi?cmd=Snap&amp;channel=0&amp;rs=wuuPhkmUCeI9WG7C&amp;user=admin&amp;password=12345',\n                            headers={'User-Agent':'Mozilla/5.0 (X11; U; Linux i686) Gecko/20071127 firefox/2.0.0.11'})\n                    page = urllib2.urlopen(request)\n                    with open('doorbell.png','wb') as f:\n                            f.write(page.read())\n\n                    # This example assumes the image is in the current directory\n                    fp = open('doorbell.png', 'rb')\n                    msgImage = MIMEImage(fp.read())\n                    fp.close()\n\n                    # Define the image's ID as referenced above\n                    msgImage.add_header('Content-ID', '&lt;image1&gt;')\n                    msgRoot.attach(msgImage)\n\n                    # Send the email (this example assumes SMTP authentication is required)\n                    smtp = smtplib.SMTP(smtpServer, smtpPort)\n\n                    smtp.ehlo()\n                    smtp.starttls()\n                    smtp.ehlo()\n\n                    smtp.login(smtpUser,smtpPass)\n                    smtp.sendmail(strFrom, strTo.split(','), msgRoot.as_string())\n                    time.sleep(15)\n                    smtp.quit()\n\n                print 'SMS sent successful!'\n            print header + '\\n' + 'Message: Doorbell Rang @ ' + dtnow\n\n    while input_value == False:\n                input_value = gpio.input(17)\n</code></pre>\n\n\n"}], "owner": {"reputation": 21, "user_id": 5574541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d7eb863dad1ffac5af6f5d69b99b300?s=128&d=identicon&r=PG&f=1", "display_name": "Jim Brown", "link": "https://stackoverflow.com/users/5574541/jim-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488553712, "creation_date": 1488410752, "question_id": 42544080, "link": "https://stackoverflow.com/questions/42544080/python-rpi-gpio-smtp-code-capture-http-image-save-and-sends", "title": "Python RPI GPIO: SMTP Code capture HTTP Image Save and Sends", "body": "<p>Ok,  I have the below code that runs on a Raspberry Pi.  issue is that the below code works multiple times when I test but after a day or so it runs ie screen print is displayed and no crash or error but it does not sendmail.  I am more a .net programmer so Python is very new to me and wanted to know if there is an obvious bug.  or the best way to debug python.  thanks in advance any help is greatly appreciated.    </p>\n\n<pre><code># Send an HTML email with an embedded image and a plain text message for\n# email clients that don't want to display the HTML.\n\nimport datetime\nimport time\nimport smtplib\nimport urllib2\nimport RPi.GPIO as gpio\ngpio.setmode(gpio.BCM)\ngpio.setup(17, gpio.IN, pull_up_down = gpio.PUD_DOWN)\n\n\nfrom email.MIMEMultipart import MIMEMultipart\nfrom email.MIMEText import MIMEText\nfrom email.MIMEImage import MIMEImage\n\ndtnow = datetime.datetime.now().strftime(\"%m-%d-%Y %H:%M:%S\")\nprint 'SMTP Doorbell Application loaded @ ' + dtnow\n\nsmtpServer = 'smtp.server.com'\nsmtpPort = '587'\n\nsmtpUser = 'smtuser@email.com'\nsmtpPass = 'P@ssword1'\n\nstrFrom = 'fromname@email.com'\nstrTo = 'toname@email.com'\n\n\n# Create the root message and fill in the from, to, and subject headers\nmsgRoot = MIMEMultipart('related')\nmsgRoot['Subject'] = 'RPI - Doorbell Alert'\nmsgRoot['From'] = strFrom\nmsgRoot['To'] = strTo\nmsgRoot.preamble = 'This is a multi-part message in MIME format.'\n\nheader = 'From: ' + strFrom + '\\n' + 'To: ' + strTo + '\\n' + 'Subject: RPI - Doorbell Alert' \n\n\nwhile True:\n    input_value = gpio.input(17)\n    if input_value == False:\n\n        print(\"\\033c\")\n        dtnow = datetime.datetime.now().strftime(\"%m-%d-%Y %H:%M:%S\")\n        print 'Doorbell has been pressed @ ' + dtnow\n\n                # Encapsulate the plain and HTML versions of the message body in an\n                # 'alternative' part, so message agents can decide which they want to display.\n                msgAlternative = MIMEMultipart('alternative')\n                msgRoot.attach(msgAlternative)\n\n                dtnow = datetime.datetime.now().strftime(\"%m-%d-%Y %H:%M:%S\")\n                msgText = MIMEText('Doorbell Rang @ ' + dtnow)\n                msgAlternative.attach(msgText)\n\n                # We reference the image in the IMG SRC attribute by the ID we give it below\n                msgText = MIMEText('Doorbell Rang @ ' + dtnow + ' &lt;br&gt;&lt;img src=\"cid:image1\"&gt;', 'html')\n                msgAlternative.attach(msgText)\n\n\n        # Get ReoLink Image\n                request = urllib2.Request(\n                        r'http://192.168.0.11/cgi-bin/api.cgi?cmd=Snap&amp;channel=0&amp;rs=wuuPhkmUCeI9WG7C&amp;user=admin&amp;password=12345',\n                        headers={'User-Agent':'Mozilla/5.0 (X11; U; Linux i686) Gecko/20071127 firefox/2.0.0.11'})\n                page = urllib2.urlopen(request)\n                with open('doorbell.png','wb') as f:\n                        f.write(page.read())\n\n                # This example assumes the image is in the current directory\n                fp = open('doorbell.png', 'rb')\n                msgImage = MIMEImage(fp.read())\n                fp.close()\n\n                # Define the image's ID as referenced above\n                msgImage.add_header('Content-ID', '&lt;image1&gt;')\n                msgRoot.attach(msgImage)\n\n                # Send the email (this example assumes SMTP authentication is required)\n                smtp = smtplib.SMTP(smtpServer, smtpPort)\n\n                smtp.ehlo()\n                smtp.starttls()\n                smtp.ehlo()\n\n                smtp.login(smtpUser,smtpPass)\n                smtp.sendmail(strFrom, strTo.split(','), msgRoot.as_string())\n                time.sleep(15)\n                smtp.quit()\n\n            print 'SMS sent successful!'\n        print header + '\\n' + 'Message: Doorbell Rang @ ' + dtnow\n\nwhile input_value == False:\n            input_value = gpio.input(17)\n</code></pre>\n\n\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1488410907, "post_id": 42544079, "comment_id": 72223930, "body": "I find your description hard to follow. Perhaps it would be easier if you gave the expected output..."}, {"owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "edited": false, "score": 0, "creation_date": 1488411079, "post_id": 42544079, "comment_id": 72223999, "body": "appending is just done with... <code>my_list.append(my_new_element)</code>. So what is wrong with that?"}], "answers": [{"comments": [{"owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "edited": false, "score": 0, "creation_date": 1488416637, "post_id": 42544211, "comment_id": 72225716, "body": "You can simplify that first line <code>all(term in lst for term in search[0])</code>"}], "tags": [], "owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "is_accepted": false, "score": 1, "last_activity_date": 1488412657, "last_edit_date": 1488412657, "creation_date": 1488411362, "answer_id": 42544211, "question_id": 42544079, "link": "https://stackoverflow.com/questions/42544079/comparing-two-lists-of-lists-with-different-sizes/42544211#42544211", "title": "comparing two lists of lists with different sizes", "body": "<pre><code>[lst for lst in listing if all([True if term in lst else False for term in search[0]])]\n</code></pre>\n\n<p>Result: <code>[['tl.48', 'tl.49', 'tl.57']]</code></p>\n\n<p>This, for each <code>list</code> in <code>listing</code>, checks if each search term is <code>in</code> the <code>list</code>, only appending it if <code>all</code> such terms are there.</p>\n\n<p>Note: search is a list containing a single list, which is why we use <code>search[0]</code>. If it's just the list of elements, use <code>search</code> instead.</p>\n\n<p>Roughly equivalent to (same result, different method):</p>\n\n<pre><code>result = []\nfor lst in listing:\n    valid = True\n    for term in search[0]:\n        if term not in lst:\n            valid = False\n    if valid:\n        result.append(lst)\n</code></pre>\n\n<p>If this is going to be true list comparisons (where <code>search</code> and <code>listing</code> are both lists of lists), you'll need to find a more robust solution.</p>\n"}], "owner": {"reputation": 1, "user_id": 7644228, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b3130ab5f1bd7fb01dab10f09d48540?s=128&d=identicon&r=PG&f=1", "display_name": "user7644228", "link": "https://stackoverflow.com/users/7644228/user7644228"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488412657, "creation_date": 1488410749, "last_edit_date": 1488410936, "question_id": 42544079, "link": "https://stackoverflow.com/questions/42544079/comparing-two-lists-of-lists-with-different-sizes", "title": "comparing two lists of lists with different sizes", "body": "<p>I need to compare elements from individual list of lists. For example here are my two list:</p>\n\n<pre><code>listing = [['tl.48', 'tl.49', 'tl.57'], ['tl.23', 'tl.45', 'tl.12']];\nsearch = [['tl.48','tl.57']]; \n</code></pre>\n\n<p>Now my goal is to look for each item in search into each item in listing and if the two items <code>'tl.48'</code>, <code>'tl.57'</code> matches the items in listing then I choose that item from the listing and append it in an empty list. <code>listing[0]</code> has a size of 3 elements and <code>search[0][0]</code> and <code>search[0][1]</code> are present at <code>listing[0][0]</code> and <code>listing[0][2]</code>. How can I get <code>listing[0]</code> in a separate list and append it. If <code>listing[0]</code> is of size 4 and <code>search[0][0]</code> and <code>search[0][1]</code> are present in <code>listing[0]</code>, I will still add <code>listing[0]</code> to the new list. How can I do it?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "arrays", "list", "python-3.x", "loops"], "comments": [{"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 1, "creation_date": 1488410672, "post_id": 42544046, "comment_id": 72223845, "body": "You are printing the same <i>&#39;array&#39;</i> seven times"}, {"owner": {"reputation": 448, "user_id": 2499645, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Tbsis.gif?s=128&g=1", "display_name": "Peter", "link": "https://stackoverflow.com/users/2499645/peter"}, "edited": false, "score": 0, "creation_date": 1488410865, "post_id": 42544046, "comment_id": 72223916, "body": "Take out the last <code>for</code> loop. You only want to print the output once."}], "answers": [{"tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": true, "score": 0, "last_activity_date": 1488411178, "last_edit_date": 1488411178, "creation_date": 1488410831, "answer_id": 42544097, "question_id": 42544046, "link": "https://stackoverflow.com/questions/42544046/loop-printing-output-multiple-times/42544097#42544097", "title": "Loop printing output multiple times", "body": "<p>With this:</p>\n\n<pre><code>for n in numbers:\n    print(\"\\nYour random lottery number is:\")\n    print(numbers[0],numbers[1],numbers[2],numbers[3],numbers[4],numbers[5],numbers[6])\n</code></pre>\n\n<p>You are printing the entire list in a loop. Either loop over the list or print the whole thing, but don't do both. The easiest way to solve this and produce your desired output is to replace the above code with the following:</p>\n\n<pre><code>print(\"\\nYour random lottery number is:\")\nprint(*numbers)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7644210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d6780cd9048b373f79114de90a05606?s=128&d=identicon&r=PG&f=1", "display_name": "Shamar", "link": "https://stackoverflow.com/users/7644210/shamar"}, "edited": false, "score": 0, "creation_date": 1488426659, "post_id": 42545823, "comment_id": 72228471, "body": "Hello Alan, I really appreciate your response. I am using Python 3.6, so my print statement for that last example looks like this:                                            print(&quot;\\nYour random lottery numbers are:&quot;) print(&quot;, &quot;.join(numbers))                                                                                         However, I got this error stating that .join() expects a string:                                     TypeError: sequence item 0: expected str instance, int found                             Would I have to change numbers=[] to strings?"}, {"owner": {"reputation": 384, "user_id": 1142114, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/6d46d165a6617759c9a478c84a24baf5?s=128&d=identicon&r=PG", "display_name": "Alan DeLonga", "link": "https://stackoverflow.com/users/1142114/alan-delonga"}, "reply_to_user": {"reputation": 13, "user_id": 7644210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d6780cd9048b373f79114de90a05606?s=128&d=identicon&r=PG&f=1", "display_name": "Shamar", "link": "https://stackoverflow.com/users/7644210/shamar"}, "edited": false, "score": 0, "creation_date": 1488579554, "post_id": 42545823, "comment_id": 72311100, "body": "I updated the answer to use map(str, numbers) to convert the array elements to strings, per this post: <a href=\"http://stackoverflow.com/questions/3590165/joining-a-list-that-has-integer-values-with-python\" title=\"joining a list that has integer values with python\">stackoverflow.com/questions/3590165/&hellip;</a>"}], "tags": [], "owner": {"reputation": 384, "user_id": 1142114, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/6d46d165a6617759c9a478c84a24baf5?s=128&d=identicon&r=PG", "display_name": "Alan DeLonga", "link": "https://stackoverflow.com/users/1142114/alan-delonga"}, "is_accepted": false, "score": 0, "last_activity_date": 1488579510, "last_edit_date": 1495542310, "creation_date": 1488422215, "answer_id": 42545823, "question_id": 42544046, "link": "https://stackoverflow.com/questions/42544046/loop-printing-output-multiple-times/42545823#42545823", "title": "Loop printing output multiple times", "body": "<p>As stated by TigerhawkT3 it seems you are confused with how to print out the values once you have pushed them into your array. (<em>Also you would not want to put the initial print statement inside the loop unless you want it to print for every item in the list</em>)</p>\n\n<p><a href=\"https://www.tutorialspoint.com/python/python_for_loop.htm\" rel=\"nofollow noreferrer\">This link</a> shows how to use for loops in different capacities. One way to solve your problem would be:</p>\n\n<pre><code>print(\"\\nYour random lottery numbers are:\")\nfor n in numbers: \n  print n\n</code></pre>\n\n<p>If you want to loop through and print out each value with some kind of string in front of all or 1 item you can use:</p>\n\n<pre><code>print(\"\\nYour random lottery numbers are:\")\nfor index in range(len(numbers)):\n  if index == len(numbers) - 1:\n    print \"power number: \", numbers[index]\n  else:\n    print index, ' : ', numbers[index]\n</code></pre>\n\n<p>Lastly if you are just trying to print all the numbers with a delimiter in one print statement then seems like this maybe a duplicate of <a href=\"https://stackoverflow.com/questions/20129415/python-print-array-in-one-print-function\">this question</a> or <a href=\"https://stackoverflow.com/questions/11178061/print-list-without-brackets-in-a-single-row\">this one</a> where the solution was:</p>\n\n<pre><code> print(\"\\nYour random lottery numbers are:\")\n print ', '.join(map(str, numbers))\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7644210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d6780cd9048b373f79114de90a05606?s=128&d=identicon&r=PG&f=1", "display_name": "Shamar", "link": "https://stackoverflow.com/users/7644210/shamar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4765, "favorite_count": 0, "accepted_answer_id": 42544097, "answer_count": 2, "score": 1, "last_activity_date": 1505086621, "creation_date": 1488410552, "question_id": 42544046, "link": "https://stackoverflow.com/questions/42544046/loop-printing-output-multiple-times", "title": "Loop printing output multiple times", "body": "<p>I created a random lottery number generator for COP1000 that passes a random number 0-9 to an array of 7 integers. However, when I print the array, I get the same output 7 times. It may be a problem with one of the loops but I am unsure of where it is coming from. Any help would be greatly appreciated.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>import random\nprint(\"Seven lucky numbers; are you ready?\")\n\nnumbers = [0,0,0,0,0,0,0]\n\n\n\nindex = 0\nwhile index&lt;len(numbers):\n    numbers[index] = random.randint(0,9)\n    index = index + 1\n\nfor n in numbers:\n    print(\"\\nYour random lottery number is:\")\n          print(numbers[0],numbers[1],numbers[2],numbers[3],numbers[4],numbers[5],numbers[6])\n</code></pre>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 1625, "user_id": 4175590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2629234c95b90ab0868a1f70c9c6b86d?s=128&d=identicon&r=PG&f=1", "display_name": "Oleksandr Dashkov", "link": "https://stackoverflow.com/users/4175590/oleksandr-dashkov"}, "edited": false, "score": 0, "creation_date": 1488410386, "post_id": 42543969, "comment_id": 72223750, "body": "You should pass your row to the method and not every item"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1488410491, "post_id": 42543969, "comment_id": 72223792, "body": "What is <code>first_row</code>?"}, {"owner": {"reputation": 931, "user_id": 1421059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95f39167f6d15c7bd7b0d51e56e0556f?s=128&d=identicon&r=PG", "display_name": "carlosvin", "link": "https://stackoverflow.com/users/1421059/carlosvin"}, "edited": false, "score": 0, "creation_date": 1488412172, "post_id": 42543969, "comment_id": 72224388, "body": "Can you write the expected result?"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488410434, "post_id": 42544002, "comment_id": 72223774, "body": "What about the data row?"}, {"owner": {"reputation": 2224, "user_id": 1887377, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bfe2813109d69271eb59a09a911c9bfd?s=128&d=identicon&r=PG", "display_name": "Quantico", "link": "https://stackoverflow.com/users/1887377/quantico"}, "edited": false, "score": 0, "creation_date": 1488410472, "post_id": 42544002, "comment_id": 72223784, "body": "also what is fieldname, is it in python 2.7?"}, {"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 0, "creation_date": 1488410545, "post_id": 42544002, "comment_id": 72223803, "body": "That&#39;s how to pass the header row. Alternatively, you can use <code>writer.writerow(head)</code>"}], "tags": [], "owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "is_accepted": false, "score": 0, "last_activity_date": 1488410367, "creation_date": 1488410367, "answer_id": 42544002, "question_id": 42543969, "link": "https://stackoverflow.com/questions/42543969/writing-to-csv-breaks-string-to-characters/42544002#42544002", "title": "Writing to csv breaks string to characters", "body": "<p>You are doing it wrong. You can use the for loop when you have a list of lists/rows, and you want to wirte those into your file:</p>\n\n<pre><code>with open('some.csv', 'wb') as f:\n    writer = csv.writer(f, fieldnames=head)\n    writer.writeheader()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1625, "user_id": 4175590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2629234c95b90ab0868a1f70c9c6b86d?s=128&d=identicon&r=PG&f=1", "display_name": "Oleksandr Dashkov", "link": "https://stackoverflow.com/users/4175590/oleksandr-dashkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1488410528, "creation_date": 1488410528, "answer_id": 42544038, "question_id": 42543969, "link": "https://stackoverflow.com/questions/42543969/writing-to-csv-breaks-string-to-characters/42544038#42544038", "title": "Writing to csv breaks string to characters", "body": "<p>You could use this code    </p>\n\n<pre><code>with open('some.csv', 'wb') as f:\n    writer = csv.writer(f)\n    writer.writerow(first_row)\n</code></pre>\n\n<p>Writer iterate your variable and write each element to the next cell.\nWhen you give it string value, writer iterate it.\nSo to write all the lines you could add a loop.</p>\n\n<pre><code>with open('some.csv', 'wb') as f:\n    writer = csv.writer(f)\n    writer.writerow(first_row)\n    list_of_rows = [['1', '2', '3'], ]\n    for row in list_of_rows:\n         writer.writerow(row)\n    # but better to use writerows\n    writer.writerows(list_of_rows)\n</code></pre>\n"}], "owner": {"reputation": 2224, "user_id": 1887377, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/bfe2813109d69271eb59a09a911c9bfd?s=128&d=identicon&r=PG", "display_name": "Quantico", "link": "https://stackoverflow.com/users/1887377/quantico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 42544038, "answer_count": 2, "score": -1, "last_activity_date": 1488412221, "creation_date": 1488410235, "last_edit_date": 1488412221, "question_id": 42543969, "link": "https://stackoverflow.com/questions/42543969/writing-to-csv-breaks-string-to-characters", "title": "Writing to csv breaks string to characters", "body": "<p>I am trying to write into a csv file, I have a hard coded header that I want to write:</p>\n\n<pre><code>head = [\"Q151\", \"item time\", \"deliberativness\", \"deliberativness time\",\n        \"Q153\", \"item time\", \"deliberativness\", \"deliberativness time\"] \n</code></pre>\n\n<p>But when I run the csv writer it is inserting every char into a different column, and every item in the list to a different row. so I am getting</p>\n\n<pre><code>Q 1 5 1 \ni t e m t i m e\n</code></pre>\n\n<p>and not <code>Q151 item time ...</code> </p>\n\n<pre><code>with open('some.csv', 'wb') as f:\n    writer = csv.writer(f)\n    for r in head:\n        writer.writerow(r)\n</code></pre>\n\n<p>I am using a simple <code>writer</code> like in the python docs. What am I doing wrong?</p>\n\n<p>excepted result as I said above Q151 item time ...</p>\n"}, {"tags": ["python", "multithreading", "python-2.7"], "comments": [{"owner": {"reputation": 44820, "user_id": 4492932, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e8938ef2681650e100bc9f83434ef272?s=128&d=identicon&r=PG", "display_name": "DYZ", "link": "https://stackoverflow.com/users/4492932/dyz"}, "edited": false, "score": 0, "creation_date": 1488410451, "post_id": 42543933, "comment_id": 72223779, "body": "Helpful thread termination discussion: <a href=\"http://stackoverflow.com/questions/323972/is-there-any-way-to-kill-a-thread-in-python\" title=\"is there any way to kill a thread in python\">stackoverflow.com/questions/323972/&hellip;</a>"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1488412634, "post_id": 42543933, "comment_id": 72224518, "body": "You&#39;re not creating an instance of your <code>Worker</code> subclass as you probably think you are. See <a href=\"http://stackoverflow.com/questions/15729498/how-to-start-and-stop-thread\"><b><i>How to start and stop thread?</i></b></a> for examples."}], "answers": [{"comments": [{"owner": {"reputation": 51505, "user_id": 741099, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9a7101fe3ba50e621e91ee1edf9d27bb?s=128&d=identicon&r=PG", "display_name": "Nyxynyx", "link": "https://stackoverflow.com/users/741099/nyxynyx"}, "edited": false, "score": 0, "creation_date": 1488410824, "post_id": 42544000, "comment_id": 72223899, "body": "I updated the code in the question to better reflect what I&#39;m trying to do. I&#39;m new to threading in Python. Basically trying to create an object <code>Worker</code> where all its code will run in a different thread, run the <code>doSomething</code> method then terminate the thread."}, {"owner": {"reputation": 51505, "user_id": 741099, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9a7101fe3ba50e621e91ee1edf9d27bb?s=128&d=identicon&r=PG", "display_name": "Nyxynyx", "link": "https://stackoverflow.com/users/741099/nyxynyx"}, "edited": false, "score": 0, "creation_date": 1488410911, "post_id": 42544000, "comment_id": 72223935, "body": "My code was trying to get the function <code>startWorker</code> to run in a new thread"}, {"owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "reply_to_user": {"reputation": 51505, "user_id": 741099, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9a7101fe3ba50e621e91ee1edf9d27bb?s=128&d=identicon&r=PG", "display_name": "Nyxynyx", "link": "https://stackoverflow.com/users/741099/nyxynyx"}, "edited": false, "score": 0, "creation_date": 1488411242, "post_id": 42544000, "comment_id": 72224050, "body": "I read your code. You&#39;re actually confusing various things. 1) Is <code>Worker</code> class supposed to behave like a thread? Or is it supposed to be something non-thread-like and do some work? If it&#39;s the latter, inheriting the <code>Worker</code> class from <code>Thread</code> makes no sense. If it&#39;s the prior, you should say: <code>t = Worker(..)</code> as in the first part of my answer. 2) You are setting the <code>threading.Event</code> but never using it. You should have a loop or something that checks this object. This makes me think may be intend to make Worker thread-like. Look at this answer: <a href=\"http://stackoverflow.com/a/27261365/227884\">stackoverflow.com/a/27261365/227884</a>"}, {"owner": {"reputation": 51505, "user_id": 741099, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9a7101fe3ba50e621e91ee1edf9d27bb?s=128&d=identicon&r=PG", "display_name": "Nyxynyx", "link": "https://stackoverflow.com/users/741099/nyxynyx"}, "edited": false, "score": 0, "creation_date": 1488411979, "post_id": 42544000, "comment_id": 72224320, "body": "Sorry for the confusion. Updated code again with loop and the use of <code>threading.Event()</code>, What I am trying to achieve here is to run <code>Worker.doSomething()</code> asynchronously in a separate thread so the main thread can still do other things"}, {"owner": {"reputation": 51505, "user_id": 741099, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9a7101fe3ba50e621e91ee1edf9d27bb?s=128&d=identicon&r=PG", "display_name": "Nyxynyx", "link": "https://stackoverflow.com/users/741099/nyxynyx"}, "edited": false, "score": 0, "creation_date": 1488412033, "post_id": 42544000, "comment_id": 72224332, "body": "Tried <code>t = Worker(target=startWorker)</code> but it gave an error <code>TypeError: __init__() got an unexpected keyword argument &#39;target&#39;</code>."}, {"owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "reply_to_user": {"reputation": 51505, "user_id": 741099, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9a7101fe3ba50e621e91ee1edf9d27bb?s=128&d=identicon&r=PG", "display_name": "Nyxynyx", "link": "https://stackoverflow.com/users/741099/nyxynyx"}, "edited": false, "score": 0, "creation_date": 1488415544, "post_id": 42544000, "comment_id": 72225410, "body": "@Nyxynyx: I&#39;d suggest you read up on basics of how to inherit classes and pass the super class <code>__init__(..)</code> arguments. You should take <code>target</code> argument in your worker class, and then pass it like: <code>threading.Thread.__init__(self, target=target)</code>. But before anything else, read the answer I linked in the previous comment."}], "tags": [], "owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "is_accepted": false, "score": 0, "last_activity_date": 1488411974, "last_edit_date": 1488411974, "creation_date": 1488410366, "answer_id": 42544000, "question_id": 42543933, "link": "https://stackoverflow.com/questions/42543933/unable-to-call-function-in-object-running-in-a-thread/42544000#42544000", "title": "Unable to call function in object running in a thread", "body": "<p>You have the error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>AttributeError: 'Thread' object has no attribute 'stopThread'\n                 ^^^^^^^^^^^^^^\n</code></pre>\n\n<p>because</p>\n\n<pre><code>t = threading.Thread(target=startWorker)\n</code></pre>\n\n<p>..and  not a <code>Worker</code> object as you intend. </p>\n\n<p>May be say: <code>t = Worker(target=startWorker)</code> ? Of course, you'd have to take keyword arguments as additional parameters and send them to your super class <code>Thread</code>.</p>\n\n<hr>\n\n<p>Or, did you want you say: <code>worker.stopThread()</code> within <code>startWorker()</code>  instead of <code>t.stopThread()</code> outside?</p>\n"}], "owner": {"reputation": 51505, "user_id": 741099, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9a7101fe3ba50e621e91ee1edf9d27bb?s=128&d=identicon&r=PG", "display_name": "Nyxynyx", "link": "https://stackoverflow.com/users/741099/nyxynyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488412210, "creation_date": 1488410047, "last_edit_date": 1488412210, "question_id": 42543933, "link": "https://stackoverflow.com/questions/42543933/unable-to-call-function-in-object-running-in-a-thread", "title": "Unable to call function in object running in a thread", "body": "<p>I am trying to gently terminate a running thread in Python by calling <code>stopThread</code> on the object <code>worker</code> running in another thread.</p>\n\n<p>However doing so is giving me the error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>AttributeError: 'Thread' object has no attribute 'stopThread'\n</code></pre>\n\n<p>How can we fix this issue?</p>\n\n<pre><code>import threading\nimport time\n\nclass Worker(threading.Thread):\n    def __init__(self):\n        threading.Thread.__init__(self)\n        self.stopRequest = threading.Event()\n\n    def doSomething(self):\n        while True:\n            if not self.stopRequest.isSet():\n                print 'Doing something'\n                time.sleep(5)\n\n    def stopThread(self):\n        self.stopRequest.set()\n\n\ndef startWorker():\n    worker = Worker()\n    worker.doSomething()\n\n\n# Start thread\nt = threading.Thread(target=startWorker)\nt.start()\n\n# Stop thread\nt.stopThread()\n</code></pre>\n"}, {"tags": ["python", "ajax", "forms", "django-cms"], "owner": {"reputation": 41, "user_id": 7644080, "user_type": "registered", "profile_image": "https://graph.facebook.com/1242723272441463/picture?type=large", "display_name": "Jack Dub", "link": "https://stackoverflow.com/users/7644080/jack-dub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 318, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1488410123, "creation_date": 1488410045, "last_edit_date": 1488410123, "question_id": 42543931, "link": "https://stackoverflow.com/questions/42543931/the-ajax-form-in-djangocms", "title": "The AJAX form in DjangoCMS", "body": "<p>I am trying to build a simple website using DjangoCMS. Now I want to add a contact form, using jQuery AJAX. </p>\n\n<p>I have a few ideas:</p>\n\n<ol>\n<li>Use a ready-to-use plugin eg. <a href=\"https://github.com/aldryn/aldryn-forms\" rel=\"nofollow noreferrer\" title=\"Aldryn Forms\">Aldryn Forms</a>, and just write some AJAX to post my form</li>\n<li>Create my own app as a Custom Plugin</li>\n<li>Just create [form_name].py, link up the file in urls.py and push my form to this URL</li>\n</ol>\n\n<p>Which is possible and, if more than one, which is most correct?</p>\n"}, {"tags": ["python", "pandas", "datetime"], "comments": [{"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 0, "creation_date": 1488410491, "post_id": 42543896, "comment_id": 72223793, "body": "do you want to convert all rows to the same TZ?"}, {"owner": {"reputation": 171449, "user_id": 5741205, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SG6BE.png?s=128&g=1", "display_name": "MaxU", "link": "https://stackoverflow.com/users/5741205/maxu"}, "edited": false, "score": 3, "creation_date": 1488411179, "post_id": 42543896, "comment_id": 72224033, "body": "<a href=\"http://stackoverflow.com/q/39646898/5741205\">related question</a>?"}, {"owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "edited": false, "score": 0, "creation_date": 1488439260, "post_id": 42543896, "comment_id": 72233341, "body": "This question could greatly be improved with an <a href=\"http://stackoverflow.com/a/20159305/7311767\">MCVE</a>"}], "owner": {"reputation": 1, "user_id": 7644174, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/762cbf617c7cc165cbd785ad941c70c1?s=128&d=identicon&r=PG&f=1", "display_name": "Tiffany325", "link": "https://stackoverflow.com/users/7644174/tiffany325"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488410914, "creation_date": 1488409836, "question_id": 42543896, "link": "https://stackoverflow.com/questions/42543896/converting-column-of-dates-times-to-different-timezone", "title": "Converting column of dates/times to different timezone", "body": "<p>I'm a python newbie and I'm attempting to convert a column of combined dates and times to a different timezone using Pandas and Pytz (although I'm not married to Pytz). My data, called \"data01,\" looks like this:</p>\n\n<pre><code>Activity Date\n2016-10-25T00:40:56Z\n2016-12-12T16:45:35Z\n</code></pre>\n\n<p>I'm able to convert those times individually copy/pasting using pytz, but when I'm trying to convert the entire column it errors out. I presume I need to localize it to UTC and then convert it to the desired timezone. </p>\n\n<p>I've tried things like:</p>\n\n<pre><code>import timezone from pytz\nimport pandas as pd\nfrom datetime import datetime \n\nraw_data01['Activity Date'] = pd.to_datetime(raw_data['Mycol'], format = '%Y:%m:%dT%H:%M:%SZ')\n</code></pre>\n\n<p>Amongst others. I did my code at work and can't recall the 17 different errors nor copy paste it</p>\n"}, {"tags": ["python", "machine-learning", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 679, "user_id": 5947872, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh6.googleusercontent.com/-jgsMcinw23E/AAAAAAAAAAI/AAAAAAAAACQ/SWL6aicRz2A/photo.jpg?sz=128", "display_name": "Dylan Harness", "link": "https://stackoverflow.com/users/5947872/dylan-harness"}, "edited": false, "score": 0, "creation_date": 1488480048, "post_id": 42544476, "comment_id": 72260736, "body": "Good idea! Thanks"}], "tags": [], "owner": {"reputation": 121, "user_id": 6203497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j6kJs.jpg?s=128&g=1", "display_name": "Alldb", "link": "https://stackoverflow.com/users/6203497/alldb"}, "is_accepted": true, "score": 1, "last_activity_date": 1488412978, "last_edit_date": 1495539968, "creation_date": 1488412978, "answer_id": 42544476, "question_id": 42543894, "link": "https://stackoverflow.com/questions/42543894/can-you-save-a-tensorflow-variable-as-a-string-or-to-a-stream/42544476#42544476", "title": "Can you save a Tensorflow variable as a string, or to a stream?", "body": "<p>You can convert any tensor to Numpy array. Then use Numpy array as you wish! for example your model has <code>W_layer1</code> as weights for first layer. You can convert it to Numpy like : <code>W_numpy = W_layer1.eval()</code> which is mentioned also here: <a href=\"https://stackoverflow.com/questions/34097281/how-can-i-convert-a-tensor-into-a-numpy-array-in-tensorflow\">Tensor to Numpy array</a></p>\n"}], "owner": {"reputation": 679, "user_id": 5947872, "user_type": "registered", "accept_rate": 54, "profile_image": "https://lh6.googleusercontent.com/-jgsMcinw23E/AAAAAAAAAAI/AAAAAAAAACQ/SWL6aicRz2A/photo.jpg?sz=128", "display_name": "Dylan Harness", "link": "https://stackoverflow.com/users/5947872/dylan-harness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 1, "accepted_answer_id": 42544476, "answer_count": 1, "score": 1, "last_activity_date": 1488412978, "creation_date": 1488409819, "question_id": 42543894, "link": "https://stackoverflow.com/questions/42543894/can-you-save-a-tensorflow-variable-as-a-string-or-to-a-stream", "title": "Can you save a Tensorflow variable as a string, or to a stream?", "body": "<p>I'm farmilliar with <a href=\"https://www.tensorflow.org/api_docs/python/tf/train/Saver\" rel=\"nofollow noreferrer\">tf.train.Saver</a>, which allows me to save variables to disk.</p>\n\n<p>But is it possible to get them directly as a string? Or write them to an open stream? Something like:</p>\n\n<pre><code>binary_string_rep = saver.save(sess)\ndb.save(binary_string_rep)\n</code></pre>\n\n<p>Or do I have to write to disk, then read it back?</p>\n"}, {"tags": ["python", "nltk", "wordnet"], "comments": [{"owner": {"reputation": 1, "user_id": 6767832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e6c471b93fa74e07beb50675aaba38e?s=128&d=identicon&r=PG&f=1", "display_name": "Artimael", "link": "https://stackoverflow.com/users/6767832/artimael"}, "edited": false, "score": 0, "creation_date": 1488409628, "post_id": 42543853, "comment_id": 72223455, "body": "I forgot to say, the search over all wordnet synsets takes the time :)"}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1488444400, "post_id": 42543853, "comment_id": 72236319, "body": "Can you explain the question clearer? Isolate the part of the code that needs help."}, {"owner": {"reputation": 93705, "user_id": 610569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/0e9087f2672b0e4f28d91266acf9ce57?s=128&d=identicon&r=PG", "display_name": "alvas", "link": "https://stackoverflow.com/users/610569/alvas"}, "edited": false, "score": 0, "creation_date": 1488444475, "post_id": 42543853, "comment_id": 72236369, "body": "BTW, have you tried <a href=\"https://github.com/alvations/pywsd\" rel=\"nofollow noreferrer\">github.com/alvations/pywsd</a> ? (Disclaimer: shameless plug)"}], "owner": {"reputation": 1, "user_id": 6767832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e6c471b93fa74e07beb50675aaba38e?s=128&d=identicon&r=PG&f=1", "display_name": "Artimael", "link": "https://stackoverflow.com/users/6767832/artimael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488409578, "creation_date": 1488409578, "question_id": 42543853, "link": "https://stackoverflow.com/questions/42543853/lesk-nltk-optimize-search", "title": "Lesk nltk optimize search", "body": "<p>I have a code that works perfectly but it's take to much time to execute, here is the code:</p>\n\n<pre><code>result_lesk=[]\nresult=[]\nfor i in range (0,len(texto_palabras)):\n  result_lesk.append(lesk(texto_palabras,texto_palabras[i]))\nprint(result_lesk)\n\nprint (len(result_lesk))\nprint(len(result))\n\n\nfor i in range(0,len(result_lesk)):\n if(result_lesk[i] is not None):\n  result.append(result_lesk[i])\nprint(result)  \n\nresult=set(result)\nresult=list(result)\nprint(result)\n\nfor i in range(0,len(result)):\n  for synset in wn.all_synsets():\n    if(result[i]==synset):\n      best_synset_lemma_names=synset.lemma_names()\n\n\n\nlen_best_synset_lemma_names=len(best_synset_lemma_names)\nfor i in range(0,len(best_synset_lemma_names)):\n  texto_palabras.append(best_synset_lemma_names[i])\n</code></pre>\n\n<p>In short words, I have a text and this i need to disambiguate, then for every synset (lesk result) , I have to search the lemmas names ( synonyms) for adding in other process .\nThe problem is the lesk result is only a string, and I need the synset with the wn.synset.lemma_names()\nAny idea how I optimize ?\nThanks!!</p>\n"}, {"tags": ["python", "compilation"], "comments": [{"owner": {"reputation": 46515, "user_id": 5647260, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oByMV.jpg?s=128&g=1", "display_name": "Andrew Li", "link": "https://stackoverflow.com/users/5647260/andrew-li"}, "edited": false, "score": 0, "creation_date": 1488409627, "post_id": 42543826, "comment_id": 72223454, "body": "Could you actually share the code? Pretty sure because something is erroring out or your program executes and closes immediately,"}, {"owner": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "reply_to_user": {"reputation": 46515, "user_id": 5647260, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/oByMV.jpg?s=128&g=1", "display_name": "Andrew Li", "link": "https://stackoverflow.com/users/5647260/andrew-li"}, "edited": false, "score": 0, "creation_date": 1488409712, "post_id": 42543826, "comment_id": 72223489, "body": "program itself works completely fine... added it in though"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "edited": false, "score": 0, "creation_date": 1488409901, "post_id": 42543865, "comment_id": 72223562, "body": "No error is produced, thats all i get ...<a href=\"https://gyazo.com/08b052a92c1d0e3bcb7f2462f4f056b0\" rel=\"nofollow noreferrer\">gyazo.com/08b052a92c1d0e3bcb7f2462f4f056b0</a>"}, {"owner": {"reputation": 44, "user_id": 7636331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ad9e4a6154bce468bce64c5c1bbf54d?s=128&d=identicon&r=PG&f=1", "display_name": "Saikia81", "link": "https://stackoverflow.com/users/7636331/saikia81"}, "reply_to_user": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "edited": false, "score": 0, "creation_date": 1488410491, "post_id": 42543865, "comment_id": 72223791, "body": "Can you share the compilation output  edit: I can recommend cx_freeze, I&#39;ve had trouble in the past with py2exe and haven&#39;t been able to resolve it. cx_freeze is recommendable as well; I&#39;ll be editing my answer with recommended code"}, {"owner": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "edited": false, "score": 0, "creation_date": 1488410741, "post_id": 42543865, "comment_id": 72223871, "body": "Hm... could you help me converter it with cx_freeze? i believe i have it installed already... my python script is called xCheat.py, Also, you can install extra files like changelogs and such with cx_freeze right? I have a few programs that need to be added in there, specifically a &quot;resource&quot; folder and a png named &quot;mcomain&quot;"}, {"owner": {"reputation": 44, "user_id": 7636331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ad9e4a6154bce468bce64c5c1bbf54d?s=128&d=identicon&r=PG&f=1", "display_name": "Saikia81", "link": "https://stackoverflow.com/users/7636331/saikia81"}, "reply_to_user": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "edited": false, "score": 0, "creation_date": 1488410955, "post_id": 42543865, "comment_id": 72223949, "body": "take a look at the code in my answer, I think it should work"}, {"owner": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "edited": false, "score": 0, "creation_date": 1488411223, "post_id": 42543865, "comment_id": 72224045, "body": "gives me a error despite it being in the correct folder <a href=\"https://gyazo.com/3c3636f73de0232184b7c374a98f1924\" rel=\"nofollow noreferrer\">gyazo.com/3c3636f73de0232184b7c374a98f1924</a>"}, {"owner": {"reputation": 44, "user_id": 7636331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ad9e4a6154bce468bce64c5c1bbf54d?s=128&d=identicon&r=PG&f=1", "display_name": "Saikia81", "link": "https://stackoverflow.com/users/7636331/saikia81"}, "reply_to_user": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "edited": false, "score": 0, "creation_date": 1488411662, "post_id": 42543865, "comment_id": 72224196, "body": "I think you&#39;re in the wrong directory, this error indicates Python can&#39;t find the compile script"}, {"owner": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "edited": false, "score": 0, "creation_date": 1488411925, "post_id": 42543865, "comment_id": 72224298, "body": "Thats what I though as well, I think its broken... <a href=\"https://gyazo.com/b11f1faa0469570a34f6a9332a97ffd9\" rel=\"nofollow noreferrer\">gyazo.com/b11f1faa0469570a34f6a9332a97ffd9</a> its very visibly in the correct directory."}, {"owner": {"reputation": 44, "user_id": 7636331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ad9e4a6154bce468bce64c5c1bbf54d?s=128&d=identicon&r=PG&f=1", "display_name": "Saikia81", "link": "https://stackoverflow.com/users/7636331/saikia81"}, "reply_to_user": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "edited": false, "score": 0, "creation_date": 1488412041, "post_id": 42543865, "comment_id": 72224337, "body": "that&#39;s strange; try opening within Explorer. maybe share &gt; python -v"}, {"owner": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "edited": false, "score": 0, "creation_date": 1488412134, "post_id": 42543865, "comment_id": 72224374, "body": "I changed the name and it executed, I got this error <a href=\"https://gyazo.com/f60151ed4d99c326520f6eb3c500e4bd\" rel=\"nofollow noreferrer\">gyazo.com/f60151ed4d99c326520f6eb3c500e4bd</a>"}, {"owner": {"reputation": 44, "user_id": 7636331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ad9e4a6154bce468bce64c5c1bbf54d?s=128&d=identicon&r=PG&f=1", "display_name": "Saikia81", "link": "https://stackoverflow.com/users/7636331/saikia81"}, "reply_to_user": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "edited": false, "score": 0, "creation_date": 1488412833, "post_id": 42543865, "comment_id": 72224577, "body": "This can be due to file permissions or 64-bit, 32-bit problems  Try installing wx_freeze again, and try to run in a admin command prompt"}, {"owner": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "edited": false, "score": 0, "creation_date": 1488413368, "post_id": 42543865, "comment_id": 72224743, "body": "Finally compiled (I know) Then, Just when i thought it was done... I get this <a href=\"https://gyazo.com/ddd0378c3b2ee3c685239ab9ad0c5441\" rel=\"nofollow noreferrer\">gyazo.com/ddd0378c3b2ee3c685239ab9ad0c5441</a>, Is there any requirements that i need in my code for it to work properly? It works completely fine when I launch it from IDLE..."}, {"owner": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "edited": false, "score": 0, "creation_date": 1488413751, "post_id": 42543865, "comment_id": 72224874, "body": "Fixed it! thank you for all your help! really do appreciate it :)"}], "tags": [], "owner": {"reputation": 44, "user_id": 7636331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ad9e4a6154bce468bce64c5c1bbf54d?s=128&d=identicon&r=PG&f=1", "display_name": "Saikia81", "link": "https://stackoverflow.com/users/7636331/saikia81"}, "is_accepted": true, "score": 1, "last_activity_date": 1488410922, "last_edit_date": 1488410922, "creation_date": 1488409640, "answer_id": 42543865, "question_id": 42543826, "link": "https://stackoverflow.com/questions/42543826/after-compiling-a-script-with-py2exe-program-does-not-launch/42543865#42543865", "title": "After compiling a script with py2exe, program does not launch", "body": "<p>It could be many things, an error report will help with determining the cause.</p>\n\n<p>Run the program in a command prompt and share the output, please.</p>\n\n<p>A good alternative to py2exe is cx_freeze, some example code:</p>\n\n<pre><code># run this code as: compile.py\nimport cx_Freeze\n\nexecutables = [cx_Freeze.Executable(\"xCheat.py\")]\n\ncx_Freeze.setup(\n    name=\"xCheat\",\n    options={\"build_exe\": {\"packages\":[\"LIBRARY_NAME\",],\n                           \"include_files\":[]}},  # accepts directory names\n    executables = executables\n\n)\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 42543865, "answer_count": 1, "score": 0, "last_activity_date": 1488412944, "creation_date": 1488409488, "last_edit_date": 1488412944, "question_id": 42543826, "link": "https://stackoverflow.com/questions/42543826/after-compiling-a-script-with-py2exe-program-does-not-launch", "title": "After compiling a script with py2exe, program does not launch", "body": "<p>After compiling a program with py2exe, It does not launch, the only thing that appears is a command prompt quickly flashing on the screen (Figure 1)</p>\n\n<p>Figure 1:\n<a href=\"https://gyazo.com/088bf4ad71d11d8025ceffb1e3fa67d5\" rel=\"nofollow noreferrer\">https://gyazo.com/088bf4ad71d11d8025ceffb1e3fa67d5</a></p>\n\n<p>This is my py2exe setup script:\n<a href=\"https://gyazo.com/884368e712a402101f3ed5549799e826\" rel=\"nofollow noreferrer\">https://gyazo.com/884368e712a402101f3ed5549799e826</a></p>\n\n<p>All dependencies (like pictures and other things) where added in the folder before I opened it.</p>\n\n<p>EDIT: Sample code</p>\n\n<pre><code>import subprocess\nimport os\nimport platform\nimport sys\nfrom Tkinter import *\nfrom PIL import ImageTk, Image\n\nmenu=Tk()\nmenu.wm_title(\"xCheat\")\n\ndef reset():\n\n    img=ImageTk.PhotoImage(Image.open(\"mcomain.png\"))\n    imglabel=Label(menu, image=img).grid(row=0, column=0,columnspan=2)\n\n    test3=Label(text=\"Coded By Jmilicev\",fg=\"black\",font=\"Arial 10\")\n    test3.grid(row=12,column=0,columnspan=2)\n    test3.grid(sticky=\"WE\")\n\n    resource_dir = os.path.join(os.path.dirname(__file__), 'resources');\n\n    def Button1():\n        os.startfile(os.path.join(resource_dir, 'LastActivityViewer.exe'))\n\n    def Button2():\n        os.startfile(os.path.join(resource_dir, 'pho.exe'))\n\n    def Button3():\n        os.startfile(os.path.join(resource_dir, 'procexp.exe'))\n\n    def Button4():\n        os.startfile(os.path.join(resource_dir, 'IJ.exe'))\n\n    def Button5():\n        os.startfile(os.path.join(resource_dir, 'Br.exe'))\n\n    def Button22():\n        os.startfile(os.path.join(resource_dir, 'sky.bat'))\n\n    def Programs():\n\n        b1=Button(text=\"Last Activity Viewer\",fg=\"red\",bg=\"black\",command=Button1)\n        b1.grid(row=1,column=0)\n        b1.grid(sticky=\"WE,NS\")\n        b1.config(height=4,width=0)\n\n        b2=Button(text=\"Process Hacker\",fg=\"red\",bg=\"black\",command=Button2)\n        b2.grid(row=1,column=1)\n        b2.grid(sticky=\"WE,NS\")\n        b2.config(height=4,width=0)\n\n        b3=Button(text=\"Process Explorer\",fg=\"red\",bg=\"black\",command=Button3)\n        b3.grid(row=2,column=0)\n        b3.grid(sticky=\"WE,NS\")\n        b3.config(height=4,width=0)\n\n        b14=Button(text=\"Search Everything\",fg=\"red\",bg=\"black\",command=Button14)\n        b14.grid(row=2,column=1)\n        b14.grid(sticky=\"WE,NS\")\n        b14.config(height=4,width=0)\n\n\n    menu.mainloop()\n\nreset()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-decorators"], "comments": [{"owner": {"reputation": 5497, "user_id": 969534, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e486349f7b6c6e378e2ae2920690b39?s=128&d=identicon&r=PG", "display_name": "dav1d", "link": "https://stackoverflow.com/users/969534/dav1d"}, "edited": false, "score": 3, "creation_date": 1488409464, "post_id": 42543800, "comment_id": 72223393, "body": "What&#39;s the question?"}, {"owner": {"reputation": 155, "user_id": 3775426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82de26e4b4aad5c904f8fd804277c54f?s=128&d=identicon&r=PG&f=1", "display_name": "pmsuresh", "link": "https://stackoverflow.com/users/3775426/pmsuresh"}, "reply_to_user": {"reputation": 5497, "user_id": 969534, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/8e486349f7b6c6e378e2ae2920690b39?s=128&d=identicon&r=PG", "display_name": "dav1d", "link": "https://stackoverflow.com/users/969534/dav1d"}, "edited": false, "score": 0, "creation_date": 1488411110, "post_id": 42543800, "comment_id": 72224009, "body": "Can I create a variable , say USE_DECORATOR = True in the main.py In that case the decorator is called. If USE_DECORATOR = False the original function is called."}, {"owner": {"reputation": 7183, "user_id": 4497519, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f4a69331bc410268c835393579612bfc?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Guy", "link": "https://stackoverflow.com/users/4497519/andrew-guy"}, "edited": false, "score": 0, "creation_date": 1488414669, "post_id": 42543800, "comment_id": 72225156, "body": "See this answer - <a href=\"http://stackoverflow.com/a/28654546/4497519\">stackoverflow.com/a/28654546/4497519</a> It would be trivial to then toggle using an argument from command line."}], "answers": [{"tags": [], "owner": {"reputation": 13033, "user_id": 4029014, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ndZhu.jpg?s=128&g=1", "display_name": "aghast", "link": "https://stackoverflow.com/users/4029014/aghast"}, "is_accepted": false, "score": 0, "last_activity_date": 1488414935, "creation_date": 1488414935, "answer_id": 42544800, "question_id": 42543800, "link": "https://stackoverflow.com/questions/42543800/how-to-globally-toggle-the-usage-of-a-decorator/42544800#42544800", "title": "How to globally toggle the usage of a decorator?", "body": "<p>Yes. You can pass the value in, or simply reset the decorator.</p>\n\n<p>Resetting the decorator would be something like this:</p>\n\n<pre><code>import timing_module\n\nif NO_USE_DECORATOR:\n    mydecorator = timing_module.empty_decorator\nelse:\n    mydecorator = timing_module.time_md5_comparison\n\n\n@mydecorator\ndef myfunc(args):\n    pass\n</code></pre>\n\n<p>Obviously, you don't have to call it <code>mydecorator</code>. You can reset the <code>time_md5_comparison</code> name instead, to point to whatever you like.</p>\n\n<p>Passing the value as an argument puts the logic in the decorator, which is cleaner:</p>\n\n<pre><code>#module: timing_module\ndef original_time_md5_comparison(fn):\n    \"\"\"Original code of your decorator here\"\"\"\n    # ...\n    pass\n\ndef no_decorator(fn):\n    \"\"\"Decorator no-op. Just use original function.\"\"\"\n    return fn\n\ndef time_md5_comparison(use_decorator = True):\n    if use_decorator:\n        return original_time_md5_comparison\n    else:\n        return no_decorator\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155, "user_id": 3775426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82de26e4b4aad5c904f8fd804277c54f?s=128&d=identicon&r=PG&f=1", "display_name": "pmsuresh", "link": "https://stackoverflow.com/users/3775426/pmsuresh"}, "edited": false, "score": 0, "creation_date": 1488419965, "post_id": 42545172, "comment_id": 72226561, "body": "I&#39;m still not sure why we use the a mutable container, rather than just a variable. Let me try it out to get a better understanding."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 155, "user_id": 3775426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82de26e4b4aad5c904f8fd804277c54f?s=128&d=identicon&r=PG&f=1", "display_name": "pmsuresh", "link": "https://stackoverflow.com/users/3775426/pmsuresh"}, "edited": false, "score": 0, "creation_date": 1488424565, "post_id": 42545172, "comment_id": 72227860, "body": "Took me a little by surprise too, but I believe it&#39;s because built-in boolean values like <code>True</code> and <code>False</code> are immutable, as are strings and integers, so when you pass them to a function their value gets passed, not a reference to them since thay can&#39;t be changed. A <code>list</code>&#39;s contents <i>are</i> mutable, so they&#39;re passed by reference."}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 2, "last_activity_date": 1560357792, "last_edit_date": 1560357792, "creation_date": 1488417470, "answer_id": 42545172, "question_id": 42543800, "link": "https://stackoverflow.com/questions/42543800/how-to-globally-toggle-the-usage-of-a-decorator/42545172#42545172", "title": "How to globally toggle the usage of a decorator?", "body": "<p>Decorators affect the byte-code generated when the function definition following them is executed (which is before and separate from when the compiled function itself runs when it's called). So, short of reloading the whole module with the decorated function in it, probably the only viable approach would be to make the wrapped function execute differently based on the <em>current</em> setting of the flag variable.</p>\n\n<p>Note the toggle variable had to be put in a mutable container\u2014a <code>list</code>\u2014so that the decorated function would refer to its current value rather than what it was when originally decorated.</p>\n\n<hr>\n\n<p><strong><code>main.py</code></strong></p>\n\n<pre><code>from timing_decorator import time_md5_comparison\n\nUSE_DECORATOR = [False]\n\n@time_md5_comparison(USE_DECORATOR)\ndef md5_comparison(a, b):\n    if a==b:\n        return True\n    else:\n        return False\n\nmd5_comparison(3, 4)  # prints nothing\nUSE_DECORATOR[0] = True\nmd5_comparison(5, 6)  # prints timing info\n</code></pre>\n\n<p>Decorators which take arguments other than a single function are essentially <strong><em>decorator factories</em></strong> which must create and return the actual decorator used. This is why the decorator in your question needed to be nested one level deeper.</p>\n\n<hr>\n\n<p><strong><code>timing_decorator.py</code></strong></p>\n\n<pre><code>from functools import wraps\nimport time\n\ndef time_md5_comparison(disabled):\n    def decorator(function):\n        @wraps(function)\n        def wrapped(*args, **kwargs):\n            if disabled[0]:\n                result = function(*args, **kwargs)\n            else:\n                t1 = time.time()\n                result = function(*args, **kwargs)\n                t2 = time.time()\n                print(str(function.__name__)+\"  \"+ str(\"%.6f \" %(t2 - t1)))\n            return result\n\n        return wrapped\n\n    return decorator\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 3775426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82de26e4b4aad5c904f8fd804277c54f?s=128&d=identicon&r=PG&f=1", "display_name": "pmsuresh", "link": "https://stackoverflow.com/users/3775426/pmsuresh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "accepted_answer_id": 42545172, "answer_count": 2, "score": 2, "last_activity_date": 1603638089, "creation_date": 1488409362, "last_edit_date": 1603638089, "question_id": 42543800, "link": "https://stackoverflow.com/questions/42543800/how-to-globally-toggle-the-usage-of-a-decorator", "title": "How to globally toggle the usage of a decorator?", "body": "<p>I'm looking to create a global toggle variable to turn on and off my decoration depending on the argument passed via the command line.</p>\n<p>In the case below, Instead of commenting out the <code>@time_md5_comparison</code> when not needed, I want a global toggle depending on the argument passed.</p>\n<hr />\n<p><strong><code>main.py</code></strong></p>\n<pre><code>from timing_decorator import time_md5_comparison\n\n@time_md5_comparison\ndef md5_comparison(a, b):\n    if a==b:\n        return True\n    else:\n        return False\n</code></pre>\n<hr />\n<p><strong><code>timing_decorator.py</code></strong></p>\n<pre><code>def time_md5_comparison(function):\n    @wraps(function)\n    def wrapper(*args, **kwargs):\n        t1 = time.time()\n        result = function(*args, **kwargs)\n        t2 = time.time()\n        print(str(function.__name__) + &quot;  &quot; + str(&quot;%.6f &quot;%(t2 - t1)))\n        return result\n    return wrapper\n</code></pre>\n<p>Can I create a variable, say <code>USE_DECORATOR = True</code> in the <code>main.py</code>, so that the decorator is called and if it's later set to <code>False</code>, the original function is called?</p>\n"}, {"tags": ["python", "sql-server", "python-3.x", "csv", "pypyodbc"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1488409175, "post_id": 42543721, "comment_id": 72223282, "body": "Try <code>cur.execute(query, *row)</code> or <code>cur.execute(query, tuple(row))</code>. Not sure what the API is."}, {"owner": {"reputation": 45, "user_id": 4879531, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/425eaca2fc77d0aca08f8f5743a904cb?s=128&d=identicon&r=PG&f=1", "display_name": "Partha Mitra", "link": "https://stackoverflow.com/users/4879531/partha-mitra"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1488413824, "post_id": 42543721, "comment_id": 72224903, "body": "Tried.. But still getting same runtime Error."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1488476820, "post_id": 42543721, "comment_id": 72258809, "body": "Add a <code>print(row)</code> before <code>cur.execute</code> to see what it is."}, {"owner": {"reputation": 45, "user_id": 4879531, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/425eaca2fc77d0aca08f8f5743a904cb?s=128&d=identicon&r=PG&f=1", "display_name": "Partha Mitra", "link": "https://stackoverflow.com/users/4879531/partha-mitra"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1488485147, "post_id": 42543721, "comment_id": 72263729, "body": "Added comment, output is provided above."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1488486679, "post_id": 42543721, "comment_id": 72264672, "body": "As the message says, <code>The SQL contains 20 parameter markers, but 21 parameters were supplied</code>. Indeed, <code>len(row) == 21</code> and <code>query.count(&#39;?&#39;) == 20</code>. Add an extra <code>?</code> (parameter marker)."}, {"owner": {"reputation": 45, "user_id": 4879531, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/425eaca2fc77d0aca08f8f5743a904cb?s=128&d=identicon&r=PG&f=1", "display_name": "Partha Mitra", "link": "https://stackoverflow.com/users/4879531/partha-mitra"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1488486680, "post_id": 42543721, "comment_id": 72264673, "body": "I found a solution. I&#39;ll post it in Answer. - Thank you."}, {"owner": {"reputation": 45, "user_id": 4879531, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/425eaca2fc77d0aca08f8f5743a904cb?s=128&d=identicon&r=PG&f=1", "display_name": "Partha Mitra", "link": "https://stackoverflow.com/users/4879531/partha-mitra"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1488487218, "post_id": 42543721, "comment_id": 72264969, "body": "Yes, actually you&#39;re quite correct. This error is related to Column count mismatch. csv file column count was not matching with SQL insert parameters passed in .py script. That was the root cause of the issue. Thanks again fort your help."}], "answers": [{"tags": [], "owner": {"reputation": 180, "user_id": 3658702, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZpBnP.jpg?s=128&g=1", "display_name": "Jacob Turpin", "link": "https://stackoverflow.com/users/3658702/jacob-turpin"}, "is_accepted": false, "score": 0, "last_activity_date": 1488486822, "creation_date": 1488486822, "answer_id": 42565399, "question_id": 42543721, "link": "https://stackoverflow.com/questions/42543721/hy000-the-sql-contains-21-parameter-markers-but-1-parameters-were-supplied/42565399#42565399", "title": "(&#39;HY000&#39;, &#39;The SQL contains 21 parameter markers, but 1 parameters were supplied&#39;)", "body": "<p>You're providing a single list instead of a full set of positional arguments. When you provide those 21 <code>?</code> within your query string but just the <code>row</code> in <code>cur.execute(query, row)</code>, you're effectively saying to stuff that list into the first <code>?</code> and haven't provided any parameters for the remaining twenty. To resolve, you need to provide <code>*args</code> like so:</p>\n\n<pre><code>cur.execute(query, *row)\n</code></pre>\n\n<p>Make sure that your row (i.e. list in this scenario) actually has 21 items in it. Otherwise, you'll still get an error about not providing the correct number of parameters.</p>\n"}, {"tags": [], "owner": {"reputation": 45, "user_id": 4879531, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/425eaca2fc77d0aca08f8f5743a904cb?s=128&d=identicon&r=PG&f=1", "display_name": "Partha Mitra", "link": "https://stackoverflow.com/users/4879531/partha-mitra"}, "is_accepted": true, "score": 1, "last_activity_date": 1488487030, "creation_date": 1488487030, "answer_id": 42565458, "question_id": 42543721, "link": "https://stackoverflow.com/questions/42543721/hy000-the-sql-contains-21-parameter-markers-but-1-parameters-were-supplied/42565458#42565458", "title": "(&#39;HY000&#39;, &#39;The SQL contains 21 parameter markers, but 1 parameters were supplied&#39;)", "body": "<p>Thanks everyone. I fixed the issue by myself. Basically Run Time Error ('HY000', 'The SQL contains 21 parameter markers, but 1 parameters were supplied') comes when csv column count is not same with your insert query parameters. In this case, my cvs file had an Identity Column \"Id\" Mapped which is not suppose to be in csv file because this coulmn suppose to be generated by SQL Server and autoincremented. Removing that Column from csv file fixes the issue. Thanks.</p>\n"}], "owner": {"reputation": 45, "user_id": 4879531, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/425eaca2fc77d0aca08f8f5743a904cb?s=128&d=identicon&r=PG&f=1", "display_name": "Partha Mitra", "link": "https://stackoverflow.com/users/4879531/partha-mitra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9141, "favorite_count": 1, "accepted_answer_id": 42565458, "answer_count": 2, "score": 2, "last_activity_date": 1488487030, "creation_date": 1488408993, "last_edit_date": 1488485245, "question_id": 42543721, "link": "https://stackoverflow.com/questions/42543721/hy000-the-sql-contains-21-parameter-markers-but-1-parameters-were-supplied", "title": "(&#39;HY000&#39;, &#39;The SQL contains 21 parameter markers, but 1 parameters were supplied&#39;)", "body": "<p>I'm trying to read a csv file and upload in SQL. Here is the code. I'm getting this error \"pypyodbc.ProgrammingError: ('HY000', 'The SQL contains 21 parameter markers, but 1 parameters were supplied')\" My csv file has 21 columns. Do you know how to resolve this issue ? </p>\n\n<pre><code>import csv\nimport pypyodbc\nimport traceback\nimport sys\nimport time\nimport os.path\nimport codecs\n\n\n# Create a connection to DataBase\ncon = pypyodbc.connect('DRIVER={SQL Server};SERVER=c1devsql01.XXXXXX.com;DATABASE=Parameters;UID=XXXXXX;PWD=XXXX@1')\n\ncur = con.cursor()\nquery = \"insert into Calc_Rules_Metadata_New (Calc_Set, Calc_Set_Identifier, Dependency, Data_Subset_Keys, Calc_Step, Calc_Variable, Calc_Operator, Calc_Operand, By_Variable, Where_Clause, Source_Tracking_Columns, Source_Tracking_Rows, Revision, Tag, Notes, Updated_By, Updated_On, IsDeleted, Metadata_Type, Calculation_Summary) values(?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\"\n\nfilename = str(sys.argv[1]) \nbasedir = 'C:/RiskClient/InputData/Metadata/Calc'\nfullpath = os.path.join(basedir, filename)\n\nwith open(fullpath, 'r') as csvfile:\n    next(csvfile) # Skip Header \n    reader = csv.reader(csvfile, delimiter=',')\n    for row in reader:\n        #for i in range(len(row)):\n            #if row[i] == '':\n            #    row[i] = None\n        print(row)    \n        cur.execute(query, row)   \n    cur.commit()\n</code></pre>\n\n<p>Runtime Error: </p>\n\n<pre><code>['1', '1', '1b.B: Question Test 1', '', 'PFA_Unique_Identifier, Fund_Unique_Identifier; Business_Date', '1', 'Total_Borrowing', 'SUM', 'Borrowings_Data.Amount', '', \"UPPER(Borrowings_Data.Commitment_Type) IN ('COMMITTED_AND_DRAWN', 'UNCOMMITTED') AND Borrowings_Data.Business_Date = &amp;Rep_Date AND Fund_Unique_Identifier In (select Fund_Unique_Identifier from Fund_Level_Information where Applicable_PF_Sections IS NOT NULL AND PFA_Unique_Identifier = &amp;PFA_UID AND Business_Date = &amp;Rep_Date)\", '', '', '', '', '', '', '', '', 'Test Form', '']\nTraceback (most recent call last):\n  File \"C:\\RiskClient\\InputData\\Metadata\\Calc\\CalcMetadata.py\", line 47, in &lt;module&gt;\n    cur.execute(query, row)\n  File \"C:\\Program Files\\Python3.5.2\\lib\\site-packages\\pypyodbc-1.3.3-py3.5.egg\\pypyodbc.py\", line 1470, in execute\n  File \"C:\\Program Files\\Python3.5.2\\lib\\site-packages\\pypyodbc-1.3.3-py3.5.egg\\pypyodbc.py\", line 1263, in _BindParams\npypyodbc.ProgrammingError: ('HY000', 'The SQL contains 20 parameter markers, but 21 parameters were supplied')\n</code></pre>\n"}, {"tags": ["python", "sql", "django", "performance", "django-models"], "answers": [{"comments": [{"owner": {"reputation": 13493, "user_id": 2607447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd6c05db10236c0b175d26db1b0ce8e?s=128&d=identicon&r=PG", "display_name": "Milano", "link": "https://stackoverflow.com/users/2607447/milano"}, "edited": false, "score": 0, "creation_date": 1488442530, "post_id": 42544906, "comment_id": 72235203, "body": "Thanks. My schema looks little bit different. I&#39;ve added a very simplified models from models.py to the bottom of the question. I don&#39;t have &#39;last_offer&#39; attribute in buyer table. I compute it like buyer.offers.latest(&#39;datetime&#39;)."}, {"owner": {"reputation": 745, "user_id": 3075562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8e36f8b2ba52c2e976c5c00f5f720f?s=128&d=identicon&r=PG&f=1", "display_name": "qwattash", "link": "https://stackoverflow.com/users/3075562/qwattash"}, "reply_to_user": {"reputation": 13493, "user_id": 2607447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd6c05db10236c0b175d26db1b0ce8e?s=128&d=identicon&r=PG", "display_name": "Milano", "link": "https://stackoverflow.com/users/2607447/milano"}, "edited": false, "score": 0, "creation_date": 1488501468, "post_id": 42544906, "comment_id": 72271162, "body": "Added a django translation of the query, I did not test it so it most certainly will break somewhere :D But its value is more to give an idea of what pieces of the django docs to look at."}], "tags": [], "owner": {"reputation": 745, "user_id": 3075562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8e36f8b2ba52c2e976c5c00f5f720f?s=128&d=identicon&r=PG&f=1", "display_name": "qwattash", "link": "https://stackoverflow.com/users/3075562/qwattash"}, "is_accepted": false, "score": 1, "last_activity_date": 1488501368, "last_edit_date": 1488501368, "creation_date": 1488415647, "answer_id": 42544906, "question_id": 42543695, "link": "https://stackoverflow.com/questions/42543695/how-to-decrease-number-575-of-queries-in-a-nested-loop/42544906#42544906", "title": "How to decrease number (575) of queries in a nested loop?", "body": "<p>I believe you can accomplish that with just a query with some joins and sums.</p>\n\n<p>If you provide the schema for your database I can try to elaborate the answer, for now I will assume the following.</p>\n\n<pre><code>create table user (\n    id integer primary key,\n    active boolean);\n\ncreate table product (\n    id integer primary key, \n    user integer non null, \n    price integer non null,\n    foreign key(user) references user(id));\n\ncreate table product_buyer (\n    id integer primary key,\n    product integer,\n    buyer integer,\n    foreign key(product) references product(id),\n    foreign key(buyer) references buyer(id));\n\ncreate table buyer (\n    id integer primary key,\n    active boolean,\n    last_offer integer);\n</code></pre>\n\n<p>You should get what you want from:</p>\n\n<pre><code>select (\n    user.id, \n    sum(case when product.price &gt; buyer.last_offer then 1 end) as expensive, \n    sum(case when product.price = buyer.last_offer then 1 end) as same,\n    sum(case when product.price &lt; buyer.last_offer then 1 end) as cheap)\nfrom \n    user join product on user.id=product.user \n    join product_buyer on product.id=product_buyer.product \n    join buyer on product_buyer.buyer=buyer.id \nwhere user.active=1 and buyer.active=1 \ngroup by user.id;\n</code></pre>\n\n<p>You can have a look at django docs for conditional expressions for the CASE statement <a href=\"https://docs.djangoproject.com/en/1.10/ref/models/conditional-expressions/\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Hope it helps.</p>\n\n<p><strong>Edit:</strong>\nI tried to translate the query to django (untested) with your model.</p>\n\n<pre><code>Product.objects.filter(\n    user=my_user, \n    active=True, \n    buyers__valid=True,\n    buyers__offers__valid=True\n).annotate(\n    max_date=Max(\"buyers__offers__datetime\")\n).filter(\n    datetime=F(\"max_date\")\n).annotate(\n    expensive=Case(\n        When(buyers__a_price__gt=F(\"buyers__offers__eur_price\"),\n             then=Value(1))\n    ), \n    same=Case(\n        When(buyers__a_price=F(\"buyers__offers__eur_price\"),\n             then=Value(1))\n    ),\n    cheap=Case(\n        When(buyers__a_price__lt=F(\"buyers__offers__eur_price\"),\n             then=Value(1))\n    )\n).annotate(\n    n_expensive=Sum(\"expensive\"),\n    n_same=Sum(\"same\"),\n    n_cheap=Sum(\"cheap\")\n).values(\"user\", \"n_expensive\", \"n_same\", \"n_cheap\")\n</code></pre>\n\n<p>I'm not sure if there is a way to write it in a more concise way, this is the furthest I'll go without actually making a django test app to check it out.\nI'll leave the refinement to you since you ultimately have the test model, however given the SQL above the translation process should only be a matter of going through the django docs.</p>\n"}], "owner": {"reputation": 13493, "user_id": 2607447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccd6c05db10236c0b175d26db1b0ce8e?s=128&d=identicon&r=PG", "display_name": "Milano", "link": "https://stackoverflow.com/users/2607447/milano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488501368, "creation_date": 1488408889, "last_edit_date": 1488442406, "question_id": 42543695, "link": "https://stackoverflow.com/questions/42543695/how-to-decrease-number-575-of-queries-in-a-nested-loop", "title": "How to decrease number (575) of queries in a nested loop?", "body": "<p>Part of a function is computing a number of the last valid offers which are lower, equal and higher than <code>a_price</code>. Can't figure out a better way so I use two loops for now. The problem is that this executes 575 queries which is too much.</p>\n\n<p>One product can have many buyers and buyer has many offers (with different datetimes). I tried to add <code>prefetch_related('buyers')</code> but It did not help at all.</p>\n\n<p>EDIT: In this case, there is 32 products and each product has from 0 to 30 buyers.</p>\n\n<pre><code>    reset_queries()\n    products = Product.objects.filter(user=user)\n    my_active_products = products.filter(active=True).prefetch_related('buyers')\n\n    for product in my_active_products:\n        for buyer in product.buyers.filter(valid=True):\n            last_valid_offer = buyer.get_last_valid_offer()\n            a_price = product.a_price\n            if a_price:\n                if a_price &lt; last_valid_offer.eur_price:\n                    cheaper += 1\n                elif a_price &gt; last_valid_offer.eur_price:\n                    more_expensive += 1\n                elif a_price == last_valid_offer.eur_price:\n                    equal += 1\n            else:\n                unknown += 1\n    print len(connection.queries)\n</code></pre>\n\n<p>Do you know what should I do to decrease the number of queries?</p>\n\n<p>EDIT Models.py:</p>\n\n<pre><code>class Product(Model):\n    name... \n    active = BooleanField(...)\n\nclass Buyer(Model):\n    product = ForeignKey('Product',related_name='buyers')\n\n\n    def get_last_valid_offer(self):\n        return self.offers.filter(valid=True).latest('datetime')\n\nclass Offer(Model):\n    buyer = ForeignKey('Buyer', related_name='offers')\n    valid = BooleanField(...)\n    datetime = DateTimeField(...)\n    eur_price = MoneyField(...)\n</code></pre>\n"}, {"tags": ["python", "numpy", "scipy"], "answers": [{"comments": [{"owner": {"reputation": 1037, "user_id": 2932861, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/aed4de86bda84c7b1c5032905775f64d?s=128&d=identicon&r=PG", "display_name": "LostInTheFrequencyDomain", "link": "https://stackoverflow.com/users/2932861/lostinthefrequencydomain"}, "edited": false, "score": 0, "creation_date": 1488560310, "post_id": 42551326, "comment_id": 72301354, "body": "Thanks for responding but I still don&#39;t understand f_old and f_new based on your explanation. Would it be possible to modify your example to use f_old and f_new."}, {"owner": {"reputation": 6394, "user_id": 3327666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/717bb7cd1896b19837f5ab1f4264bc9d?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre de Buyl", "link": "https://stackoverflow.com/users/3327666/pierre-de-buyl"}, "reply_to_user": {"reputation": 1037, "user_id": 2932861, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/aed4de86bda84c7b1c5032905775f64d?s=128&d=identicon&r=PG", "display_name": "LostInTheFrequencyDomain", "link": "https://stackoverflow.com/users/2932861/lostinthefrequencydomain"}, "edited": false, "score": 1, "creation_date": 1488567982, "post_id": 42551326, "comment_id": 72305292, "body": "<code>f_old</code> and <code>f_new</code> are the values of the energy function before and after the <i>proposed</i> update from <code>x_old</code> to <code>x_new</code>. For a plain statistical physics system, this the old energy <code>e_old</code> and the new energy <code>e_new</code> in the Metropolis criterion <code>exp(-(e_old-e_new)&#47;(k_B*T))</code>"}], "tags": [], "owner": {"reputation": 6394, "user_id": 3327666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/717bb7cd1896b19837f5ab1f4264bc9d?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre de Buyl", "link": "https://stackoverflow.com/users/3327666/pierre-de-buyl"}, "is_accepted": true, "score": 1, "last_activity_date": 1488446555, "creation_date": 1488446555, "answer_id": 42551326, "question_id": 42543681, "link": "https://stackoverflow.com/questions/42543681/scipy-basinhopping-accept-test-what-is-f-new-and-f-old/42551326#42551326", "title": "scipy basinhopping accept_test: what is f_new and f_old", "body": "<p>From the documentation <a href=\"https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.basinhopping.html#scipy-optimize-basinhopping\" rel=\"nofollow noreferrer\">https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.basinhopping.html#scipy-optimize-basinhopping</a></p>\n\n<pre><code>accept_test : callable, ``accept_test(f_new=f_new, x_new=x_new, f_old=fold, x_old=x_old)``, optional\n    Define a test which will be used to judge whether or not to accept the\n    step.  This will be used in addition to the Metropolis test based on\n    \"temperature\" ``T``.  The acceptable return values are True,\n    False, or ``\"force accept\"``. If any of the tests return False\n    then the step is rejected. If the latter, then this will override any\n    other tests in order to accept the step. This can be used, for example,\n    to forcefully escape from a local minimum that ``basinhopping`` is\n    trapped in.\n</code></pre>\n\n<p>The information that you can collect from this is, calling the argument <code>a</code>:</p>\n\n<ol>\n<li><code>a</code> is a callable, you can thus provide a function.</li>\n<li><code>a</code> acts as in the decision for the evolution algorithm. The possible return values are True and False, that are used in combination with the Metropolis condition (i.e. the two criteria must return True for the step to be accepted), and \"force accept\". The latter option must be used when you want to force acceptance in situations where Metropolis would reject.</li>\n<li>You can use the values of the current step <code>x_old</code> and <code>f_old</code> (these are values here, not callables) and of the new step <code>x_new</code> and <code>f_new</code> in your custom criterion.</li>\n</ol>\n\n<p>Below, I set up a toy example where the accept_test function forces acceptance when the step is to the right in <em>parameter space</em></p>\n\n<pre><code>def f(x):\n    return x**2\n\ndef a(f_new, x_new, f_old, x_old):\n    if x_new&gt;x_old:\n        return \"force accept\"\n    else:\n        return True\n\nbasinhopping(f, 1, accept_test=a)\n</code></pre>\n"}], "owner": {"reputation": 1037, "user_id": 2932861, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/aed4de86bda84c7b1c5032905775f64d?s=128&d=identicon&r=PG", "display_name": "LostInTheFrequencyDomain", "link": "https://stackoverflow.com/users/2932861/lostinthefrequencydomain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 624, "favorite_count": 0, "accepted_answer_id": 42551326, "answer_count": 1, "score": 1, "last_activity_date": 1488446555, "creation_date": 1488408837, "question_id": 42543681, "link": "https://stackoverflow.com/questions/42543681/scipy-basinhopping-accept-test-what-is-f-new-and-f-old", "title": "scipy basinhopping accept_test: what is f_new and f_old", "body": "<p>I am trying to optimize an antenna placement and orientation problem using simulated annealing. I believe scipy.basinhopping would do what I need but I don't understand the meaning of f_new and f_old in the accept_test function. I don't see an explanation in the documentation. If anybody could enlighten me on the meaning of those kwargs that would be great. The specific callable that I am confused about is:</p>\n\n<pre><code> accept_test : callable, accept_test(f_new=f_new, x_new=x_new, f_old=fold, x_old=x_old), optional\n</code></pre>\n\n<p>Thank you,</p>\n\n<p>Ranga</p>\n"}, {"tags": ["c#", "python", "md5"], "comments": [{"owner": {"reputation": 374, "user_id": 4867299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/IS7hd.jpg?s=128&g=1", "display_name": "DFSFOT", "link": "https://stackoverflow.com/users/4867299/dfsfot"}, "edited": false, "score": 0, "creation_date": 1576489733, "post_id": 42543679, "comment_id": 104903057, "body": "Why is this tagged Python?"}], "answers": [{"tags": [], "owner": {"reputation": 5535, "user_id": 6785695, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9745fd8cd877a80a5992710610eb471?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/6785695/tim"}, "is_accepted": true, "score": 4, "last_activity_date": 1488409015, "creation_date": 1488409015, "answer_id": 42543726, "question_id": 42543679, "link": "https://stackoverflow.com/questions/42543679/get-md5-checksum-of-byte-arrays-conent-in-c/42543726#42543726", "title": "Get MD5 checksum of Byte Arrays&#39; conent in C#", "body": "<p>Here's how you compute the MD5 hash</p>\n\n<pre><code>byte[] hash;\nusing (var md5 = System.Security.Cryptography.MD5.Create()) {\n    md5.TransformFinalBlock(dataByteArray, 0, dataByteArray.Length);\n    hash = md5.Hash;\n}\n</code></pre>\n\n<p>you would then compare that hash (byte by byte) to your known hash</p>\n"}], "owner": {"reputation": 191, "user_id": 6180322, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/1b5c2c3fa11d78b9c7c0bc73975854c6?s=128&d=identicon&r=PG&f=1", "display_name": "CDoc", "link": "https://stackoverflow.com/users/6180322/cdoc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2765, "favorite_count": 0, "accepted_answer_id": 42543726, "answer_count": 1, "score": 1, "last_activity_date": 1488409015, "creation_date": 1488408826, "question_id": 42543679, "link": "https://stackoverflow.com/questions/42543679/get-md5-checksum-of-byte-arrays-conent-in-c", "title": "Get MD5 checksum of Byte Arrays&#39; conent in C#", "body": "<p>I wrote a script in Python which gives me an MD5 checksum for a byte array's content.</p>\n\n<pre><code>strz = xor(dataByteArray, key)\nm = hashlib.md5()\nm.update(strz)\n</code></pre>\n\n<p>I can then compare a hardcoded MD5 with m like so:</p>\n\n<pre><code>if m.hexdigest() == hardCodedHash:\n</code></pre>\n\n<p>Is there a way to do the same thing with C#? The only resources i've found so far are not clear enough.</p>\n"}, {"tags": ["python", "bayesian", "pymc3"], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 7638539, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dupnHLPP3rI/AAAAAAAAAAI/AAAAAAAABGs/eXg8I6UEkYc/photo.jpg?sz=128", "display_name": "David Diaz", "link": "https://stackoverflow.com/users/7638539/david-diaz"}, "edited": false, "score": 0, "creation_date": 1489170352, "post_id": 42622760, "comment_id": 72570248, "body": "When I don&#39;t transpose the y-values, I get this error: <code>ValueError: Input dimension mis-match. (input[0].shape[1] = 239, input[1].shape[1] = 3)</code>. Running into this error is what led me to transposing in the first place."}, {"owner": {"reputation": 33, "user_id": 5635906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5df82c061e15cd52ea24ec79447b747?s=128&d=identicon&r=PG&f=1", "display_name": "Quantic", "link": "https://stackoverflow.com/users/5635906/quantic"}, "reply_to_user": {"reputation": 367, "user_id": 7638539, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dupnHLPP3rI/AAAAAAAAAAI/AAAAAAAABGs/eXg8I6UEkYc/photo.jpg?sz=128", "display_name": "David Diaz", "link": "https://stackoverflow.com/users/7638539/david-diaz"}, "edited": false, "score": 0, "creation_date": 1489572283, "post_id": 42622760, "comment_id": 72725615, "body": "aseyboldt is right you  should care about Ni&gt;observed and your probablity should be in [0,1] I guess. Also maybe you have outlier in your observed that make the convergence difficult."}, {"owner": {"reputation": 367, "user_id": 7638539, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dupnHLPP3rI/AAAAAAAAAAI/AAAAAAAABGs/eXg8I6UEkYc/photo.jpg?sz=128", "display_name": "David Diaz", "link": "https://stackoverflow.com/users/7638539/david-diaz"}, "edited": false, "score": 0, "creation_date": 1489586712, "post_id": 42622760, "comment_id": 72736209, "body": "Probability is defined as a Beta-distributed random variable, which should keep it [0,1]. Haven&#39;t gotten back to re-running this yet, but am hopeful the starting values are the problem (per @aseyboldt), as these seem like solid leads."}], "tags": [], "owner": {"reputation": 33, "user_id": 5635906, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5df82c061e15cd52ea24ec79447b747?s=128&d=identicon&r=PG&f=1", "display_name": "Quantic", "link": "https://stackoverflow.com/users/5635906/quantic"}, "is_accepted": false, "score": 0, "last_activity_date": 1488794906, "creation_date": 1488794906, "answer_id": 42622760, "question_id": 42543673, "link": "https://stackoverflow.com/questions/42543673/pymc3-hierarchical-model-with-multiple-observations-not-calculating-likelihood/42622760#42622760", "title": "pymc3 hierarchical model with multiple observations, not calculating likelihood during MCMC?", "body": "<p>I had a similar problem and it was just  that my observation datas was not in the format <code>number of observations</code> x <code>number of variables</code>.  As a result only the first observation was used.</p>\n\n<p>Try <code>observations = mallard[['y1','y2','y3']]</code>  </p>\n\n<p>If you want to sample your posterior use <code>sample_ppc</code></p>\n"}, {"comments": [{"owner": {"reputation": 367, "user_id": 7638539, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dupnHLPP3rI/AAAAAAAAAAI/AAAAAAAABGs/eXg8I6UEkYc/photo.jpg?sz=128", "display_name": "David Diaz", "link": "https://stackoverflow.com/users/7638539/david-diaz"}, "edited": false, "score": 0, "creation_date": 1489587149, "post_id": 42763468, "comment_id": 72736564, "body": "In this field survey, &quot;length&quot; was how much time was spent at the plot counting birds, and longer survey length would presumably lead to larger counts, all else being equal."}, {"owner": {"reputation": 367, "user_id": 7638539, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dupnHLPP3rI/AAAAAAAAAAI/AAAAAAAABGs/eXg8I6UEkYc/photo.jpg?sz=128", "display_name": "David Diaz", "link": "https://stackoverflow.com/users/7638539/david-diaz"}, "edited": false, "score": 0, "creation_date": 1489587520, "post_id": 42763468, "comment_id": 72736888, "body": "The exponentiation of the linear model to calculate lambda should keep it positive and constrain Ni~Poisson(lambda) positive as well. I do think I should probably provide starting values for Ni that are larger than lambda, though."}, {"owner": {"reputation": 1005, "user_id": 1250948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dff2715003554162c9212d2e703e4b4?s=128&d=identicon&r=PG", "display_name": "aseyboldt", "link": "https://stackoverflow.com/users/1250948/aseyboldt"}, "reply_to_user": {"reputation": 367, "user_id": 7638539, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dupnHLPP3rI/AAAAAAAAAAI/AAAAAAAABGs/eXg8I6UEkYc/photo.jpg?sz=128", "display_name": "David Diaz", "link": "https://stackoverflow.com/users/7638539/david-diaz"}, "edited": false, "score": 0, "creation_date": 1489596462, "post_id": 42763468, "comment_id": 72743989, "body": "Maybe I just don&#39;t understand the model, but I thought Ni are the true population sizes, of which you only observe a proportion prop. Then looking for a longer time should increase prop, not Ni. After all, the number of birds does not increase just because you look harder. But anyway, I don&#39;t see where information about prob should come from. If you had multiple observations for some animals, then I guess this could work (if you start seeing the same animals over and over, then you seem to have exhausted the population)."}, {"owner": {"reputation": 1005, "user_id": 1250948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dff2715003554162c9212d2e703e4b4?s=128&d=identicon&r=PG", "display_name": "aseyboldt", "link": "https://stackoverflow.com/users/1250948/aseyboldt"}, "reply_to_user": {"reputation": 367, "user_id": 7638539, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dupnHLPP3rI/AAAAAAAAAAI/AAAAAAAABGs/eXg8I6UEkYc/photo.jpg?sz=128", "display_name": "David Diaz", "link": "https://stackoverflow.com/users/7638539/david-diaz"}, "edited": false, "score": 0, "creation_date": 1489596537, "post_id": 42763468, "comment_id": 72744044, "body": "Ups, I guess if length is the length of the trail then really the number of animals should be larger for longer trails. Sorry about that."}, {"owner": {"reputation": 367, "user_id": 7638539, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dupnHLPP3rI/AAAAAAAAAAI/AAAAAAAABGs/eXg8I6UEkYc/photo.jpg?sz=128", "display_name": "David Diaz", "link": "https://stackoverflow.com/users/7638539/david-diaz"}, "edited": false, "score": 0, "creation_date": 1489598494, "post_id": 42763468, "comment_id": 72745207, "body": "Prob is the probability of successfully detecting each bird over Ni &quot;tries&quot;, which is how it&#39;s being used in the Binomial distribution for Y_obs. In a more elaborate form of this kind of model, prob could vary based on local environmental covariates (e.g., forest cover %) or time of year. In the version I&#39;ve posted, it would be constant for this species, and could be compared to estimates of prob for other species, for example."}, {"owner": {"reputation": 367, "user_id": 7638539, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dupnHLPP3rI/AAAAAAAAAAI/AAAAAAAABGs/eXg8I6UEkYc/photo.jpg?sz=128", "display_name": "David Diaz", "link": "https://stackoverflow.com/users/7638539/david-diaz"}, "edited": false, "score": 0, "creation_date": 1489599967, "post_id": 42763468, "comment_id": 72746091, "body": "I misspoke earlier about starting values for Ni... What I should&#39;ve said is that I would need to make sure that Ni starts above maximum Y_obs."}], "tags": [], "owner": {"reputation": 1005, "user_id": 1250948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dff2715003554162c9212d2e703e4b4?s=128&d=identicon&r=PG", "display_name": "aseyboldt", "link": "https://stackoverflow.com/users/1250948/aseyboldt"}, "is_accepted": false, "score": 0, "last_activity_date": 1489407438, "creation_date": 1489407438, "answer_id": 42763468, "question_id": 42543673, "link": "https://stackoverflow.com/questions/42543673/pymc3-hierarchical-model-with-multiple-observations-not-calculating-likelihood/42763468#42763468", "title": "pymc3 hierarchical model with multiple observations, not calculating likelihood during MCMC?", "body": "<p>I think you have several problems in your model:</p>\n\n<ul>\n<li><p>Discrete parameters do not work with advi and nuts, and I doubt the metropolis sampler can deal with all those discrete parameters either. In many cases you can marginalize them out, but here you might want to use a continuous variable for the population size instead. Maybe something like this (which also takes care of the fact that population sizes lower than the observed number are impossible)</p>\n\n<pre><code>sd = pm.HalfCauchy('Ni_sd', beta=2.5)\ntrafo = pm.distributions.transforms.lowerbound(observations.max(axis=0))\nNi = pm.Gamma('Ni', mu=lam, sd=sd, shape=num_transects,\n              transform=trafo, testval=observations.max(axis=0) + 1)\n</code></pre></li>\n<li><p>I think your model is unidentifiable: Couldn't you always just increase all population sizes and decrease prop? I can't see how this model could learn anything useful about prop. Where would this information come from?</p></li>\n<li><p>Why would the population size depend on the survey length? Shouldn't this influence prop? Or is it an area?</p></li>\n</ul>\n"}], "owner": {"reputation": 367, "user_id": 7638539, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dupnHLPP3rI/AAAAAAAAAAI/AAAAAAAABGs/eXg8I6UEkYc/photo.jpg?sz=128", "display_name": "David Diaz", "link": "https://stackoverflow.com/users/7638539/david-diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1121, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1489407438, "creation_date": 1488408807, "last_edit_date": 1489170669, "question_id": 42543673, "link": "https://stackoverflow.com/questions/42543673/pymc3-hierarchical-model-with-multiple-observations-not-calculating-likelihood", "title": "pymc3 hierarchical model with multiple observations, not calculating likelihood during MCMC?", "body": "<p>I am trying to fit a hierarchical model using pymc3 and running into trouble where it looks like my priors are being sampled but my likelihood is not. I have tried replicating the approach described <a href=\"https://stackoverflow.com/questions/33661064/pymc3-hierarchical-model-with-multiple-obsesrved-variables\">here</a> that works for multiple observations.</p>\n\n<p>I am using the mallard dataset found in the unmarked package in R, loaded as a pandas dataframe. You can grab the CSV I'm using from my GitHub page <a href=\"https://github.com/d-diaz/SEFS590F_Winter2017/blob/master/mallard.csv\" rel=\"nofollow noreferrer\">here</a>. In brief, each row represents up to three observations (y1, y2, and y3 columns) collected along a single transect. I have tried removing rows with missing data (NaN) in any of the y columns or covariates (elevation, forest cover, survey length), which did not appear to change the issue I'm experiencing.</p>\n\n<pre><code>mallard = pd.read_csv('mallard.csv')\nelev, length, forest = mallard.elev, mallard.length, mallard.forest\n\n# transpose ys to have same shape as series of each covariate (elev, length...)\nobservations = mallard[['y1','y2','y3']].T\nnum_transects = len(mallard)\n\nwith pm.Model() as mallard_model:\n    # priors\n    # detection probability considered constant across all transects and plots\n    prob = pm.Beta('prob', alpha=1, beta=1)\n    # priors for deterministic linear model of local abundance at a transect \n    # that applies to all plots within a transect\n    b0 = pm.Normal('b0', mu=0, sd=10) # intercept\n    b1 = pm.Normal('b1', mu=0, sd=10) # elevation\n    b2 = pm.Normal('b2', mu=0, sd=10) # forest cover\n    b3 = pm.Normal('b3', mu=0, sd=10) # survey length\n\n    # linear model of local abundance using log link\n    lam = pm.Deterministic('lam', pm.math.exp(b0 + b1*elev + b2*forest + b3*length))\n\n    # likelihood of observations\n    # Ni is abundance at a transect, with binomial distribution across \n    # plots within a transect\n\n    Ni = pm.Poisson('Ni', mu=lam, shape=num_transects)\n    Y_obs = pm.Binomial('Y_obs', n=Ni, p=prob, observed=observations)\n\n    # inference, use default step functions for each parameter\n    trace = pm.sample(draws=5000, init='ADVI', n_init=10000)#, step=pm.Metropolis())\n\n    plt.figure(figsize=(7, 7))\n    pm.traceplot(trace[100:]) # leave out first 100 draws as burn-in\n    plt.tight_layout()\n</code></pre>\n\n<p>This is what comes out:<br>\nAssigned NUTS to prob_logodds_<br>\nAssigned NUTS to b0<br>\nAssigned NUTS to b1<br>\nAssigned NUTS to b2<br>\nAssigned NUTS to b3<br>\nAssigned Metropolis to Ni<br>\nAssigned Metropolis to Y_obs_missing<br>\n100%|\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588| 5000/5000 [00:07&lt;00:00, 675.88it/s]</p>\n\n<p><a href=\"https://github.com/d-diaz/SEFS590F_Winter2017/blob/master/mallard.csv\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/K36FE.png\" alt=\"Traceplot\"></a></p>\n\n<p>I noticed there is no initialization output being reported using ADVI, which seems disconcerting.  </p>\n\n<p>I also found that if I force the model to use a particular step function (e.g., the <code>pm.Metropolis()</code> I've commented out in the call to <code>pm.sample</code> above), I do get sampling on some--but not all--parameters. Still no initialization reported either.</p>\n\n<p>Any ideas how to get this working? </p>\n"}, {"tags": ["python", "soap", "zeep"], "comments": [{"owner": {"reputation": 4116, "user_id": 2689383, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/100004839518399/picture?type=large", "display_name": "chfw", "link": "https://stackoverflow.com/users/2689383/chfw"}, "edited": false, "score": 0, "creation_date": 1489420996, "post_id": 42543671, "comment_id": 72651787, "body": "did your documentation tell you what header names to put your keys?"}, {"owner": {"reputation": 997, "user_id": 5439470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a8ff31099463f0885944705a8c088b3d?s=128&d=identicon&r=PG&f=1", "display_name": "jan-seins", "link": "https://stackoverflow.com/users/5439470/jan-seins"}, "edited": false, "score": 0, "creation_date": 1558532273, "post_id": 42543671, "comment_id": 99132878, "body": "did you try the wsse package of zeep <a href=\"https://python-zeep.readthedocs.io/en/master/wsse.html\" rel=\"nofollow noreferrer\">python-zeep.readthedocs.io/en/master/wsse.html</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 13888027, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c00c2033e2d31a2a6a3b8a9590b783d5?s=128&d=identicon&r=PG&f=1", "display_name": "Isaacyip621", "link": "https://stackoverflow.com/users/13888027/isaacyip621"}, "is_accepted": false, "score": 0, "last_activity_date": 1597795973, "creation_date": 1597795973, "answer_id": 63478312, "question_id": 42543671, "link": "https://stackoverflow.com/questions/42543671/zeep-soap-python-trying-to-create-headers/63478312#63478312", "title": "Zeep Soap Python, trying to create headers", "body": "<p>I would reckon passing a lxml element object would be something you can try.</p>\n<p>For example:</p>\n<pre><code>headers = etree.XML('&lt;header&gt;&lt;a&gt;&lt;b/&gt;&lt;/a&gt;&lt;/header&gt;')\n</code></pre>\n<p>then pass the argument into the request</p>\n<pre><code>a.service.Getsomething(_soapheaders=[*headers])\n</code></pre>\n"}], "owner": {"reputation": 593, "user_id": 6709460, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/5690f0e727245b25c629f15db11e251c?s=128&d=identicon&r=PG&f=1", "display_name": "Testing man", "link": "https://stackoverflow.com/users/6709460/testing-man"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 773, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1597795973, "creation_date": 1488408800, "question_id": 42543671, "link": "https://stackoverflow.com/questions/42543671/zeep-soap-python-trying-to-create-headers", "title": "Zeep Soap Python, trying to create headers", "body": "<p>I am using zeep to connect to api.</p>\n\n<p>this api wants authentication in headers.</p>\n\n<p>I have api key and i have secret key, now my question is how to use this with zeep? I somehow just don't understand the logic in Zeep documentation, would anyone please be so nice to explain the logic to me. Thank you.</p>\n\n<pre><code>from zeep import Client\n\nauth_key = '1#something'\nsecret_key = '2#something'\n\na=Client('https://example?WSDL')\na.service.Getsomething()\n\noutput &gt; fail because of wrong auth or secret key\n</code></pre>\n\n<p>I don't understand as well why Signature is not working with Zeep. I needed to instal xmlsec, but I can't because of some errror with p..config file and I already gave up with this... hopefully i do not need signature for this?</p>\n\n<p>thanks</p>\n"}, {"tags": ["python", "dictionary", "flask", "sqlalchemy", "flask-sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 6122023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ea5356bb560a393046a129f10f9b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Novosel", "link": "https://stackoverflow.com/users/6122023/steve-novosel"}, "edited": false, "score": 0, "creation_date": 1488410304, "post_id": 42543900, "comment_id": 72223715, "body": "thank you, I knew I could commit each dictionary but for some reason couldn&#39;t think of the title=post.get(&#39;&#39;) logic that you provided. thank you again"}], "tags": [], "owner": {"reputation": 3609, "user_id": 3763102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2439148d94bddcda4415797c8f6afefa?s=128&d=identicon&r=PG", "display_name": "gipsy", "link": "https://stackoverflow.com/users/3763102/gipsy"}, "is_accepted": true, "score": 1, "last_activity_date": 1488409854, "creation_date": 1488409854, "answer_id": 42543900, "question_id": 42543644, "link": "https://stackoverflow.com/questions/42543644/save-list-of-dictionaries-to-database-using-flask-sqlalchemy/42543900#42543900", "title": "save list of dictionaries to database using flask-sqlalchemy", "body": "<p>You have to construct instances of <code>Favorite</code> from each dict in the final list and then add it to session and commit.</p>\n\n<pre><code>for post in final:\n  fav=Favorite(title=post.get('title'),url=post.get('url'),score=post.get('score'))\n  db.session.add(fav)\n  db.session.commit()\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 6122023, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25ea5356bb560a393046a129f10f9b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Novosel", "link": "https://stackoverflow.com/users/6122023/steve-novosel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1874, "favorite_count": 0, "accepted_answer_id": 42543900, "answer_count": 1, "score": 1, "last_activity_date": 1488409854, "creation_date": 1488408698, "question_id": 42543644, "link": "https://stackoverflow.com/questions/42543644/save-list-of-dictionaries-to-database-using-flask-sqlalchemy", "title": "save list of dictionaries to database using flask-sqlalchemy", "body": "<p>I have a list of dictionaries with three keys in each dictionary (title, url, score).</p>\n\n<p>I would like to save each dictionary as a separate instance of a db model using sqlalchemy (i'm using sqlite3).</p>\n\n<p>My list of dictionaries is saved into a variable called 'final'</p>\n\n<p>Here is my db.Model:</p>\n\n<pre><code>class Favorite(db.Model):\n    id = db.Column(db.Integer, primary_key=True)\n    tile = db.Column(db.String(100))\n    url = db.Column(db.String(150))\n    score = db.Column(db.Integer)\n    user_id = db.Column(db.Integer, db.ForeignKey('user.id'))\n\n    def __init__(self, title, url, score):\n        self.title = title\n        self.url = url\n        self.score = score\n</code></pre>\n\n<p>As for my logic, this is what I have tried so far:</p>\n\n<pre><code>for post in final:\n    db.session.add(post)\n    db.session.commit()\n</code></pre>\n\n<p>I've been getting the following error when running the program with this code:</p>\n\n<pre><code>UnmappedInstanceError: Class '__builtin__.dict' is not mapped\n</code></pre>\n"}, {"tags": ["python", "csv", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "is_accepted": true, "score": 3, "last_activity_date": 1488409293, "creation_date": 1488409293, "answer_id": 42543779, "question_id": 42543602, "link": "https://stackoverflow.com/questions/42543602/how-to-use-python-to-pivot-the-data-in-a-table-from-many-rows-to-only-4-rows/42543779#42543779", "title": "How to use python to pivot the data in a table from many rows to only 4 rows", "body": "<p>You can simply add the columns you want to preserve to the index, stack, then reset the index. </p>\n\n<pre><code>df.set_index(['Month','YEAR']).stack(dropna=False).reset_index()\n</code></pre>\n\n<p><strong>Demo</strong></p>\n\n<pre><code>&gt;&gt;&gt; df\n\n      Month  YEAR  AZ-Phoenix  CA-Los  Angeles  CA-San  Diego  CA-San.1  \\\n0   January  1987       59.33   54.67    46.61   50.20    NaN       NaN   \n1  February  1987       59.65   54.89    46.87   49.96  64.77       NaN   \n\n   Francisco  CO-Denver  DC-Washington  \n0        NaN        NaN            NaN  \n1        NaN        NaN            NaN  \n\n&gt;&gt;&gt; df.set_index(['Month','YEAR']).stack(dropna=False).reset_index()\n\n       Month  YEAR        level_2      0\n0    January  1987     AZ-Phoenix  59.33\n1    January  1987         CA-Los  54.67\n2    January  1987        Angeles  46.61\n3    January  1987         CA-San  50.20\n4    January  1987          Diego    NaN\n5    January  1987       CA-San.1    NaN\n6    January  1987      Francisco    NaN\n7    January  1987      CO-Denver    NaN\n8    January  1987  DC-Washington    NaN\n9   February  1987     AZ-Phoenix  59.65\n10  February  1987         CA-Los  54.89\n11  February  1987        Angeles  46.87\n12  February  1987         CA-San  49.96\n13  February  1987          Diego  64.77\n14  February  1987       CA-San.1    NaN\n15  February  1987      Francisco    NaN\n16  February  1987      CO-Denver    NaN\n17  February  1987  DC-Washington    NaN\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26111, "user_id": 2750492, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fTVM8.jpg?s=128&g=1", "display_name": "AChampion", "link": "https://stackoverflow.com/users/2750492/achampion"}, "is_accepted": false, "score": 2, "last_activity_date": 1488409870, "creation_date": 1488409870, "answer_id": 42543902, "question_id": 42543602, "link": "https://stackoverflow.com/questions/42543602/how-to-use-python-to-pivot-the-data-in-a-table-from-many-rows-to-only-4-rows/42543902#42543902", "title": "How to use python to pivot the data in a table from many rows to only 4 rows", "body": "<p>You can use <code>pd.melt()</code> to basically reverse pivot the table but the order doesn't come out quite the same so you would need to sort it if order mattered:</p>\n\n<pre><code>&gt;&gt;&gt; pd.melt(df, id_vars=['Month', 'YEAR'], var_name='State')\n       Month  YEAR             State  value\n0    January  1987        AZ-Phoenix  59.33\n1   February  1987        AZ-Phoenix  59.65\n2    January  1987    CA-Los Angeles  54.67\n3   February  1987    CA-Los Angeles  54.89\n4    January  1987      CA-San Diego  46.61\n...\n</code></pre>\n"}], "owner": {"reputation": 1040, "user_id": 7529256, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/a9d1fef4c20bf35974ea0c27c96a36d5?s=128&d=identicon&r=PG&f=1", "display_name": "Viv", "link": "https://stackoverflow.com/users/7529256/viv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 267, "favorite_count": 0, "accepted_answer_id": 42543779, "answer_count": 2, "score": 2, "last_activity_date": 1488409870, "creation_date": 1488408498, "question_id": 42543602, "link": "https://stackoverflow.com/questions/42543602/how-to-use-python-to-pivot-the-data-in-a-table-from-many-rows-to-only-4-rows", "title": "How to use python to pivot the data in a table from many rows to only 4 rows", "body": "<p>I have data in a csv like this : </p>\n\n<pre>\n  Month YEAR      AZ-Phoenix  CA-Los Angeles  CA-San Diego    CA-San Francisco    CO-Denver   DC-Washington\n    January 1987            59.33       54.67       46.61           50.20\n    February 1987           59.65       54.89       46.87           49.96       64.77\n</pre>\n\n<p>I want to convert this to 4 column csv instead of x columns like : </p>\n\n<pre>    Month   YEAR     State     Values                          \n    January 1987    AZ-Phoenix\n    January 1987    CA-Los Angeles      59.33\n    January 1987    CA-San Diego        54.67\n    January 1987    CA-San Francisco    46.61\n    January 1987    CO-Denver       50.20..... so on\n</pre>\n\n<p>So far the code written works for only 1 column and cant be extrapolated to 2 columns. How to keep Month and year constant and increase while we pivot the state and values?</p>\n\n<p>Code so far : </p>\n\n<pre><code>    df = df.set_index('YEAR').stack(dropna=False).reset_index()\n    df.columns = ['YEAR','A','B']\n</code></pre>\n\n<p>cant I just add month somewhere and acheive this?</p>\n"}, {"tags": ["python", "list", "dictionary"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1488408680, "post_id": 42543588, "comment_id": 72223064, "body": "It&#39;s not quite clear what you want to achieve. Do the input and output files both have multiple lines?"}, {"owner": {"reputation": 17, "user_id": 7434357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39a962ff92a9358ddc2fd0ee8f50d5be?s=128&d=identicon&r=PG&f=1", "display_name": "burappi", "link": "https://stackoverflow.com/users/7434357/burappi"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1488408800, "post_id": 42543588, "comment_id": 72223118, "body": "The input sometimes does and sometimes doesn&#39;t. The output will have multiple lines."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1488408895, "post_id": 42543588, "comment_id": 72223159, "body": "So <code>someData</code> and <code>someMoreData</code> will be the same in every line? Something like <code>someData|1|someMoreData;someData|2|someMoreData;someData|3|s&zwnj;&#8203;omeMoreData</code>?"}, {"owner": {"reputation": 17, "user_id": 7434357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39a962ff92a9358ddc2fd0ee8f50d5be?s=128&d=identicon&r=PG&f=1", "display_name": "burappi", "link": "https://stackoverflow.com/users/7434357/burappi"}, "reply_to_user": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1488409347, "post_id": 42543588, "comment_id": 72223351, "body": "Yes, that is correct."}], "answers": [{"tags": [], "owner": {"reputation": 443, "user_id": 6317971, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8aQrQ.jpg?s=128&g=1", "display_name": "codehearts", "link": "https://stackoverflow.com/users/6317971/codehearts"}, "is_accepted": false, "score": 0, "last_activity_date": 1488408697, "creation_date": 1488408697, "answer_id": 42543643, "question_id": 42543588, "link": "https://stackoverflow.com/questions/42543588/writing-a-part-of-a-dictionary-into-a-text-file/42543643#42543643", "title": "Writing a part of a dictionary into a text file", "body": "<p>You're casting <code>clientData</code> to a list, it's not a dict. Try accessing <code>clientData</code> by integer indices.</p>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1488409088, "creation_date": 1488409088, "answer_id": 42543739, "question_id": 42543588, "link": "https://stackoverflow.com/questions/42543588/writing-a-part-of-a-dictionary-into-a-text-file/42543739#42543739", "title": "Writing a part of a dictionary into a text file", "body": "<p>You specifically converted your input to a list.  This means that you have to index it with an integer.  Also, your input is in CSV format, not dictionary format.</p>\n\n<p>I won't give you the entire solution, but here's how to debug it and learn a little:</p>\n\n<pre><code>with open('data.txt') as csvfile:\n    reader = csv.DictReader(csvfile,\n                            fieldnames=['name', 'acc1', 'acc2'])\n    print \"READER:\", reader\n    clientData = list(reader)\n    print \"LIST DATA:\", clientData\n</code></pre>\n\n<p>Now that you know how your code sees these things, look up how to use a DictReader to ingest data in the format you want.</p>\n\n<p>Finally, look into looping statements.  I assume that you have multiple lines in this format, and you want to write a separate line of output for each.  You have only one line's worth of output coming from your current code, so you'll need something vaguely like</p>\n\n<pre><code> for input_record in reader:\n     file.write(\"someData|\" + input_record[index] + \"|someMoreData\"\n</code></pre>\n\n<p>I leave that <strong>index</strong> for you to figure out; it should be either \"acc1\" (dictionary format) or <strong>1</strong> (list format).</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 7614164, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Vpx2y.jpg?s=128&g=1", "display_name": "TheCrifix", "link": "https://stackoverflow.com/users/7614164/thecrifix"}, "is_accepted": false, "score": 0, "last_activity_date": 1488409195, "creation_date": 1488409195, "answer_id": 42543763, "question_id": 42543588, "link": "https://stackoverflow.com/questions/42543588/writing-a-part-of-a-dictionary-into-a-text-file/42543763#42543763", "title": "Writing a part of a dictionary into a text file", "body": "<p>The problem you are experiencing is that you are actually <strong>NOT</strong> using dictionaries at all, in fact, you are using Python's lists. There is a significant difference between these two data structures. Here is an example:</p>\n\n<pre><code>list = [1,2,3,4]\ndict = {'one':1, 'two':2, 'three':3, 'four': 4}\n</code></pre>\n\n<p>In this example the following can happen:</p>\n\n<pre><code>list[1]     #Valid\nlist['one'] #Invalid\ndict[1]     #Invalid (Because of a key error)\ndict['one'] #Valid\n</code></pre>\n\n<p>This all happens because of the differences between lists and dictionaries. In a list each <strong>value</strong> has a memory location that can be <strong>indexed</strong> via the square brackets. In a dictionary each <strong>value</strong> has a <strong>key</strong> that it can be accessed by. By value and key I mean the following:</p>\n\n<pre><code>dict = {'one':1, 'two':2, 'three':3, 'four': 4}\n          ^            ^\n         key         value\n</code></pre>\n\n<p>Hope this helped and happy coding!</p>\n"}], "owner": {"reputation": 17, "user_id": 7434357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39a962ff92a9358ddc2fd0ee8f50d5be?s=128&d=identicon&r=PG&f=1", "display_name": "burappi", "link": "https://stackoverflow.com/users/7434357/burappi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1488409195, "creation_date": 1488408460, "question_id": 42543588, "link": "https://stackoverflow.com/questions/42543588/writing-a-part-of-a-dictionary-into-a-text-file", "title": "Writing a part of a dictionary into a text file", "body": "<p>I need to create a text file containing an account number between two fixed sets of data. </p>\n\n<p>The output I need is the following:</p>\n\n<pre><code>someData|acc1|someMoreData\n</code></pre>\n\n<p>The data I need to populate is in a file called data.txt. It looks like this:</p>\n\n<pre><code>name,acc1,acc2\n</code></pre>\n\n<p>I store this data as a list of dictionaries in the code, as I loop through it in another process. </p>\n\n<p>The code I tried is as follows:</p>\n\n<pre><code>import csv, os\n\nwith open('data.txt') as csvfile:\nreader = csv.DictReader(csvfile,\n                        fieldnames=['name', 'acc1', 'acc2'])\nclientData = list(reader)\n\n\nfile = open('textfile.txt', 'w')\nfile.write('someData|')\nfile.write(clientData['acc1'])\nfile.write('|someMoreData')\nfile.close()\n</code></pre>\n\n<p>When I try the code above, I get a TypeError: list indices must be integers or slices, not str. </p>\n\n<p>How can I access the acc1 part and have it written into the text file?</p>\n"}, {"tags": ["python", "scikit-learn", "k-means"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 7140072, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a26e1fc9921ac09a78325ad6e5785d38?s=128&d=identicon&r=PG&f=1", "display_name": "Python Noob", "link": "https://stackoverflow.com/users/7140072/python-noob"}, "edited": false, "score": 0, "creation_date": 1488409965, "post_id": 42543762, "comment_id": 72223589, "body": "Thanks for your reply, I edited the question, perhaps it&#39;s more clear now."}, {"owner": {"reputation": 588, "user_id": 5424594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce513ad19316d19e3690f1abcef2554b?s=128&d=identicon&r=PG&f=1", "display_name": "czr", "link": "https://stackoverflow.com/users/5424594/czr"}, "reply_to_user": {"reputation": 31, "user_id": 7140072, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a26e1fc9921ac09a78325ad6e5785d38?s=128&d=identicon&r=PG&f=1", "display_name": "Python Noob", "link": "https://stackoverflow.com/users/7140072/python-noob"}, "edited": false, "score": 0, "creation_date": 1488412478, "post_id": 42543762, "comment_id": 72224474, "body": "Just create an array with the labels of each data point, respecting the order in the <code>data</code> array. <code>assigned_labels = np.array([&#39;k&#39;, &#39;b&#39;, ...&#39;,k&#39;, ...])</code>. As an example, <code>sum(labels[assigned_labels == &#39;k&#39;] == 0)</code> will return the number of elements with label &#39;k&#39; that were assigned to cluster <code>0</code>."}, {"owner": {"reputation": 31, "user_id": 7140072, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a26e1fc9921ac09a78325ad6e5785d38?s=128&d=identicon&r=PG&f=1", "display_name": "Python Noob", "link": "https://stackoverflow.com/users/7140072/python-noob"}, "edited": false, "score": 0, "creation_date": 1488454303, "post_id": 42543762, "comment_id": 72243024, "body": "I&#39;m not sure what that returns! I tried: labels = np.array([2, 0, 1]) and assigned_labels = np.array([&#39;k&#39;, &#39;b&#39;,&#39;,k&#39;]) , labels[assigned_labels == &#39;k&#39;] returns array([2]) , labels[assigned_labels == &#39;b&#39;] returns array([0])."}, {"owner": {"reputation": 588, "user_id": 5424594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce513ad19316d19e3690f1abcef2554b?s=128&d=identicon&r=PG&f=1", "display_name": "czr", "link": "https://stackoverflow.com/users/5424594/czr"}, "reply_to_user": {"reputation": 31, "user_id": 7140072, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a26e1fc9921ac09a78325ad6e5785d38?s=128&d=identicon&r=PG&f=1", "display_name": "Python Noob", "link": "https://stackoverflow.com/users/7140072/python-noob"}, "edited": false, "score": 0, "creation_date": 1488467070, "post_id": 42543762, "comment_id": 72252048, "body": "These arrays are the cluster labels of elements of type <code>&#39;k&#39;</code> and type <code>&#39;b&#39;</code>. Now you can count then by <code>sum(labels[assigned_labels == &#39;k&#39;] == cluster_label)</code>."}, {"owner": {"reputation": 31, "user_id": 7140072, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a26e1fc9921ac09a78325ad6e5785d38?s=128&d=identicon&r=PG&f=1", "display_name": "Python Noob", "link": "https://stackoverflow.com/users/7140072/python-noob"}, "edited": false, "score": 0, "creation_date": 1488473089, "post_id": 42543762, "comment_id": 72256395, "body": "Well then that simply doesn&#39;t work because A) it ignored the second K, B) I want to retrieve the types in a certain class, not the class of a certain type."}, {"owner": {"reputation": 588, "user_id": 5424594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce513ad19316d19e3690f1abcef2554b?s=128&d=identicon&r=PG&f=1", "display_name": "czr", "link": "https://stackoverflow.com/users/5424594/czr"}, "reply_to_user": {"reputation": 31, "user_id": 7140072, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a26e1fc9921ac09a78325ad6e5785d38?s=128&d=identicon&r=PG&f=1", "display_name": "Python Noob", "link": "https://stackoverflow.com/users/7140072/python-noob"}, "edited": false, "score": 0, "creation_date": 1488477765, "post_id": 42543762, "comment_id": 72259390, "body": "It have not ignored the second <code>k</code>, the second <code>k</code> you gave has a comma in it. Just do the things in the opposite order <code>assigned_labels[labels == 0]</code>."}], "tags": [], "owner": {"reputation": 588, "user_id": 5424594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce513ad19316d19e3690f1abcef2554b?s=128&d=identicon&r=PG&f=1", "display_name": "czr", "link": "https://stackoverflow.com/users/5424594/czr"}, "is_accepted": false, "score": 0, "last_activity_date": 1488409187, "creation_date": 1488409187, "answer_id": 42543762, "question_id": 42543570, "link": "https://stackoverflow.com/questions/42543570/scikit-learn-kmeans-assigning-a-label-to-input-data/42543762#42543762", "title": "Scikit learn Kmeans assigning a label to input data", "body": "<p>You can retrieve the labels with <code>labels = model_.labels_</code>. And you can, for example, count the number of 'lefts' on cluster zero with <code>sum(labels[0:9] == 0)</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 5902, "user_id": 749288, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/352473a156a6dab1bcbc99d9f2f27a01?s=128&d=identicon&r=PG", "display_name": "sergzach", "link": "https://stackoverflow.com/users/749288/sergzach"}, "is_accepted": false, "score": 0, "last_activity_date": 1488540834, "creation_date": 1488540834, "answer_id": 42577820, "question_id": 42543570, "link": "https://stackoverflow.com/questions/42543570/scikit-learn-kmeans-assigning-a-label-to-input-data/42577820#42577820", "title": "Scikit learn Kmeans assigning a label to input data", "body": "<p>If you want to assign letters to rows you can use pandas for example.</p>\n\n<pre><code>&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; indexes = [chr(ord('a') + i) for i in range(data.shape[0])]\n&gt;&gt;&gt; indexes\n['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't']\n&gt;&gt;&gt; data = pd.DataFrame(data, index=indexes) # pass your old data variable\n&gt;&gt;&gt; data\n      0     1     2\na -7.82  4.58 -3.97\nb -6.68  3.16  2.71\nc  4.36 -2.19  2.09\nd  6.72  0.88  2.80\ne -8.64  3.06  3.50\nf -6.87  0.57 -5.45\ng  4.47 -2.62  5.76\nh  6.73 -2.01  4.18\ni -7.71  2.34 -6.33\nj -6.91 -0.49 -5.68\nk  6.18  2.81  5.82\nl  6.72 -0.93 -4.04\nm -6.25 -0.26  0.56\nn -6.94 -1.22  1.13\no  8.09  0.20  2.25\np  6.81  0.17 -4.15\nq -5.19  4.24  4.04\nr -6.38 -1.74  1.43\ns  4.08  1.30  5.33\nt  6.27  0.93 -2.78\n&gt;&gt;&gt; data.loc['a']\n0   -7.82\n1    4.58\n2   -3.97\nName: a, dtype: float64\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 12062925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93d748bac2c90b28fb88b65aae496ac?s=128&d=identicon&r=PG&f=1", "display_name": "erik40021", "link": "https://stackoverflow.com/users/12062925/erik40021"}, "is_accepted": false, "score": 0, "last_activity_date": 1574349896, "creation_date": 1574349896, "answer_id": 58978302, "question_id": 42543570, "link": "https://stackoverflow.com/questions/42543570/scikit-learn-kmeans-assigning-a-label-to-input-data/58978302#58978302", "title": "Scikit learn Kmeans assigning a label to input data", "body": "<p>As the output of models_.labels_ will be exactly in the order of input, you can just create a list that stores additional label information parallely to your input list.</p>\n\n<p>(from <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.cluster.KMeans.html\" rel=\"nofollow noreferrer\">https://scikit-learn.org/stable/modules/generated/sklearn.cluster.KMeans.html</a>)</p>\n\n<pre><code>&gt;&gt;&gt; from sklearn.cluster import KMeans\n&gt;&gt;&gt; import numpy as np\n&gt;&gt;&gt; X = np.array([[1, 2], [1, 4], [1, 0],\n...               [10, 2], [10, 4], [10, 0]])\n&gt;&gt;&gt; kmeans = KMeans(n_clusters=2, random_state=0).fit(X)\n&gt;&gt;&gt; kmeans.labels_\narray([1, 1, 1, 0, 0, 0], dtype=int32)\n</code></pre>\n\n<p>Note that label output matches your input order.</p>\n"}], "owner": {"reputation": 31, "user_id": 7140072, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a26e1fc9921ac09a78325ad6e5785d38?s=128&d=identicon&r=PG&f=1", "display_name": "Python Noob", "link": "https://stackoverflow.com/users/7140072/python-noob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2786, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1574349896, "creation_date": 1488408352, "last_edit_date": 1488473195, "question_id": 42543570, "link": "https://stackoverflow.com/questions/42543570/scikit-learn-kmeans-assigning-a-label-to-input-data", "title": "Scikit learn Kmeans assigning a label to input data", "body": "<p>I want to assign a label to each input data; for example, data[0] is 'k', data[2] is 'b', data [5] is 'j', data[13] is another 'k',....etc. </p>\n\n<p>After doing the clustering displayed here:  <a href=\"https://i.stack.imgur.com/saVU7.png\" rel=\"nofollow noreferrer\">3D plot of 2 clusters</a>, I want to retrieve the type of each \"point label\" in every cluster.</p>\n\n<pre><code>import numpy as np\nfrom sklearn.cluster import KMeans \nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.mplot3d import Axes3D\n\ndata = np.array([[-7.82,4.58,-3.97],[-6.68,3.16,2.71],\n[4.36,-2.19,2.09],[6.72,0.88,2.80],\n[-8.64,3.06,3.50],[-6.87,0.57,-5.45],\n[4.47,-2.62,5.76],[6.73,-2.01,4.18],\n[-7.71,2.34,-6.33],[-6.91,-0.49,-5.68],\n[6.18,2.81,5.82],[6.72,-0.93,-4.04],\n[-6.25,-0.26,0.56],[-6.94,-1.22,1.13],\n[8.09,0.20,2.25],[6.81,0.17,-4.15],\n[-5.19,4.24,4.04],[-6.38,-1.74,1.43],\n[4.08,1.30,5.33],[6.27,0.93,-2.78]])\n\n\ncenters = np.array([[1,1,1],[-1,1,-1]])\nmodel_ = KMeans(n_clusters=2, init = centers, n_init=1).fit(data)\nprint('The labels for Part a are %s' % model_.labels_)\nfig = plt.figure()\nax = Axes3D(fig)\nax.scatter(data[:,0], data[:,1],  data[:,2],c=model_.labels_.astype(float),s=70)\nplt.title('Visualizing Clusters')\nax.set_xlabel('X1', fontsize = 10)\nax.set_ylabel('X2', fontsize = 10)\nax.set_zlabel('X3', fontsize = 10)\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "flask", "sqlalchemy", "flask-sqlalchemy"], "answers": [{"tags": [], "owner": {"reputation": 2478, "user_id": 6682517, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OHEAT.jpg?s=128&g=1", "display_name": "Sergey Shubin", "link": "https://stackoverflow.com/users/6682517/sergey-shubin"}, "is_accepted": true, "score": 0, "last_activity_date": 1488459804, "creation_date": 1488459804, "answer_id": 42556280, "question_id": 42543563, "link": "https://stackoverflow.com/questions/42543563/building-a-select-query-to-scan-specified-columns-by-the-user/42556280#42556280", "title": "building a select query to scan specified columns by the user", "body": "<p>You can just use <a href=\"https://docs.python.org/2/library/functions.html#getattr\" rel=\"nofollow noreferrer\">getattr</a> function. To avoid cases when object has requested attribute but it is not a table column (a method for example) check <code>Restaurant.__table__.c</code> \u2014 collection of table columns:</p>\n\n<pre><code>@app.route('/api/restaurants/search1/',methods=['GET'])\ndef search():\n    col = request.args['col']\n    key = request.args['key']\n    if col in Restaurant.__table__.c:\n        restaurant = Restaurant.query.filter(getattr(Restaurant, col).like(\"%\"+key+\"%\")).all()\n    else:\n        raise RuntimeError('Restaurant table doesn`t have column %s' % col)\n    return jsonify(json_list=[i.serialize for i in restaurant])\n</code></pre>\n"}], "owner": {"reputation": 1209, "user_id": 7617505, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/4b5ae77de718a2c2ac9e34f7de48f696?s=128&d=identicon&r=PG&f=1", "display_name": "Abdul", "link": "https://stackoverflow.com/users/7617505/abdul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 42556280, "answer_count": 1, "score": 1, "last_activity_date": 1488459804, "creation_date": 1488408328, "last_edit_date": 1488408985, "question_id": 42543563, "link": "https://stackoverflow.com/questions/42543563/building-a-select-query-to-scan-specified-columns-by-the-user", "title": "building a select query to scan specified columns by the user", "body": "<p>I am trying to create create an API which allow users to query the database based on whatever columns they wish to use, by passing the column name as parameter.</p>\n\n<pre><code>@app.route('/api/restaurants/search1/',methods=['GET'])\ndef search():\n    col = request.args['col']\n    key = request.args['key']\n    restaurant = Restaurant.query.filter(Restaurant.menu_type.like(\"%\"+key+\"%\")).all()\n    return jsonify(json_list=[i.serialize for i in restaurant])\n</code></pre>\n\n<p>I am trying to replace \"Menu_type\" which is the current column by whatever the user enters for the variable \"col\" any help would be appreciated.</p>\n"}, {"tags": ["python", "python-3.x", "decorator", "python-decorators", "syntactic-sugar"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 2, "creation_date": 1488408944, "post_id": 42543530, "comment_id": 72223178, "body": "At the time a method decorator is evaluated, the class itself does not exist yet, so there&#39;s no way you could look up its <code>__init__</code> method to modify it, even if it had been defined already (which isn&#39;t something you could count on).  However, you could write a decorator that calls the wrapped function only the first time, saves the value in an instance variable, and afterwards just returns the cached value."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1488408986, "post_id": 42543530, "comment_id": 72223204, "body": "Why do you think you need to add code to <code>__init__</code>? You should read up on the <a href=\"https://docs.python.org/3/howto/descriptor.html\" rel=\"nofollow noreferrer\">descriptor protocol</a>."}, {"owner": {"reputation": 27454, "user_id": 1079110, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/07tNg.jpg?s=128&g=1", "display_name": "danijar", "link": "https://stackoverflow.com/users/1079110/danijar"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1488409444, "post_id": 42543530, "comment_id": 72223384, "body": "@jasonharper Couldn&#39;t I get <code>__init__</code> of the same <code>cls</code> and replace it with a patched <code>__init__</code>? Let&#39;s say I&#39;m assuming <code>__init__</code> is always defined before the other methods."}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 2, "creation_date": 1488409663, "post_id": 42543530, "comment_id": 72223469, "body": "What class?  There is no class until the entire body of its definition (including all decorated methods) has completed execution."}, {"owner": {"reputation": 27454, "user_id": 1079110, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/07tNg.jpg?s=128&g=1", "display_name": "danijar", "link": "https://stackoverflow.com/users/1079110/danijar"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1488413561, "post_id": 42543530, "comment_id": 72224812, "body": "@jasonharper Thanks for the clarification. I&#39;d prefer lazy evaluation upon first access of the properties, but the method bodies require resources that are not available at that time anymore. I&#39;d be happy to hear your thoughts on the solution below."}, {"owner": {"reputation": 27454, "user_id": 1079110, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/07tNg.jpg?s=128&g=1", "display_name": "danijar", "link": "https://stackoverflow.com/users/1079110/danijar"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1488413758, "post_id": 42543530, "comment_id": 72224875, "body": "@jonrsharpe Thanks for pointing out descriptors. I don&#39;t see how they can be applied here though, as they don&#39;t allow to run code right after <code>__init__</code>. That&#39;s needed, unfortunately, since the method bodies require resources not available at the time the properties will get accessed."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1488440814, "post_id": 42543530, "comment_id": 72234183, "body": "Your example does not explain why that would even be necessary; could you provide some more appropriate context? This seems like a <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">xyproblem.info</a>"}], "answers": [{"tags": [], "owner": {"reputation": 27454, "user_id": 1079110, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/07tNg.jpg?s=128&g=1", "display_name": "danijar", "link": "https://stackoverflow.com/users/1079110/danijar"}, "is_accepted": false, "score": 0, "last_activity_date": 1488413381, "creation_date": 1488413381, "answer_id": 42544549, "question_id": 42543530, "link": "https://stackoverflow.com/questions/42543530/is-it-possibly-to-patch-code-onto-init-from-within-a-method-decorator/42544549#42544549", "title": "Is it possibly to patch code onto __init__ from within a method decorator?", "body": "<p>We need to sub class <code>property</code> so that we can later find all the cached properties of the object and initialize them after <code>__init__</code>:</p>\n\n<pre><code>class CachedProperty(property):\n\n  pass\n</code></pre>\n\n<p>The actual decorator evaluates the method body when called for the first time, and remembers the result for later accesses:</p>\n\n<pre><code>import functools\n\ndef cached_property(method):\n  attribute = '_cached_' + method.__name__\n\n  @CachedProperty\n  @functools.wraps(method)\n  def wrapper(self, *args, **kwargs):\n    if not hasattr(self, attribute):\n      setattr(self, attribute, method(self))\n    return getattr(self, attribute)\n\n  return wrapper\n</code></pre>\n\n<p>Now we can use a base class to access the cached properties after <code>__init__</code> so that the values will be available from the cache:</p>\n\n<pre><code>class InitCachedProperties:\n\n  def __init_subclass__(cls, **kwargs):\n    super().__init_subclass__(**kwargs)\n    orig_init = cls.__init__\n    def init(self, *args, **kwargs):\n      orig_init(self, *args, **kwargs)\n      for prop in cls.__dict__.values():\n        if isinstance(prop, CachedProperty):\n          prop.__get__(self)\n    cls.__init__ = init\n</code></pre>\n\n<p>To make the example from the question work, we need to let our class inherit from this property initializing base class:</p>\n\n<pre><code>class Foo(InitCachedProperties):\n\n    def __init__(self, value):\n      self.value = value\n\n    @cached_property\n    def foo(self):\n      return self.value + 21\n</code></pre>\n"}], "owner": {"reputation": 27454, "user_id": 1079110, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/07tNg.jpg?s=128&g=1", "display_name": "danijar", "link": "https://stackoverflow.com/users/1079110/danijar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1488413624, "creation_date": 1488408216, "last_edit_date": 1488413624, "question_id": 42543530, "link": "https://stackoverflow.com/questions/42543530/is-it-possibly-to-patch-code-onto-init-from-within-a-method-decorator", "title": "Is it possibly to patch code onto __init__ from within a method decorator?", "body": "<p>I want to create a property decorator that computes the property value once upon object initialization, rather than every time the property is accessed. For example:</p>\n\n<pre><code>class Foo:\n\n  def __init__(self, value):\n    self.value = value\n\n  @cached_property  # How to implement this decorator?\n  def foo(self):\n    return self.value * some_heavy_computation()\n</code></pre>\n\n<p>I'd like this be equivalent to:</p>\n\n<pre><code>class Foo:\n\n  def __init__(self, value):\n    self.value = value\n    self._foo = self.value * some_heavy_computation()\n\n  @property\n  def foo(self):\n    return self._foo\n</code></pre>\n\n<p>Is it possible to somehow add code to <code>__init__()</code> from within the method decorator?</p>\n"}, {"tags": ["python", "algorithm", "python-3.x", "for-loop", "bisection"], "comments": [{"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 0, "creation_date": 1488408666, "post_id": 42543527, "comment_id": 72223059, "body": "Have you at least read the theory behind the bisection method, or, in other words, do you know what&#39;s happening with your code?"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1488408708, "post_id": 42543527, "comment_id": 72223079, "body": "Um, the accepted answer on the page you link to <i>does</i> use a for-loop, no?"}, {"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 0, "creation_date": 1488409212, "post_id": 42543527, "comment_id": 72223299, "body": "Who voted to close this question simply doesn&#39;t understand the topic. It&#39;s very clear what he/she is asking."}, {"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 0, "creation_date": 1488409750, "post_id": 42543527, "comment_id": 72223507, "body": "By the way, in general, you should not check for this condition <code>f(c) == 0</code>, instead you should check that <code>f(c)</code> is close enough to zero, i.e. something like this <code>f(c) &lt; 1e-09</code>. This is because when using floating-point numbers, you get &quot;roundoff&quot; errors, i.e. you lose precision when doing computations with floats, because of the finite nature of computers..."}, {"owner": {"reputation": 56, "user_id": 7616989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90f47bf8b4514aa7069f519eaf235a7?s=128&d=identicon&r=PG&f=1", "display_name": "AVLZ", "link": "https://stackoverflow.com/users/7616989/avlz"}, "reply_to_user": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 0, "creation_date": 1488411749, "post_id": 42543527, "comment_id": 72224219, "body": "@nbro you are totally right and normally I do that using math.isclose(), but in this case I was forced to avoid more sophisticated functions. I tried doing what you suggest (first condition f(c) &lt; 0.000000001), but I get c = -0.25 instead, which got me even more confused!"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1488412931, "post_id": 42543527, "comment_id": 72224608, "body": "@AVLZ Use <code>abs(f(c)) &lt; 0.000000001</code> instead."}, {"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 0, "creation_date": 1488413192, "post_id": 42543527, "comment_id": 72224688, "body": "@AVLZ Yes, Stefan is right, I forgot to specify the absolute value, so it should be <code>abs(f(c)) &lt; 1e-09</code> (for my explanation above)."}], "answers": [{"comments": [{"owner": {"reputation": 12066, "user_id": 3924118, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/abb01e1c2a8e3d9e1534dca14b19b3d8?s=128&d=identicon&r=PG&f=1", "display_name": "nbro", "link": "https://stackoverflow.com/users/3924118/nbro"}, "edited": false, "score": 1, "creation_date": 1488409832, "post_id": 42543835, "comment_id": 72223538, "body": "This doesn&#39;t really explain its special case, but it&#39;s only a general explanation of the method, which isn&#39;t what the OP is asking."}, {"owner": {"reputation": 56, "user_id": 7616989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90f47bf8b4514aa7069f519eaf235a7?s=128&d=identicon&r=PG&f=1", "display_name": "AVLZ", "link": "https://stackoverflow.com/users/7616989/avlz"}, "edited": false, "score": 0, "creation_date": 1488412457, "post_id": 42543835, "comment_id": 72224466, "body": "Thanks, I did notice that with an interval that had zero as its midpoint I would need only 1 iteration (the first condition would be true the first time). While I understand the method on a superficial level and why it ultimately works, I still don&#39;t get why 52 is the answer in this case or 53 in the case of the other interval I mentioned. I&#39;m guessing it has to do with the limited accuracy of floating point on Python, but how exactly?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1488415194, "post_id": 42543835, "comment_id": 72225308, "body": "It&#39;s a matter of when that pure bisection gets sufficiently close to the actual root, which you see in the answer you chose."}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 1, "last_activity_date": 1488410009, "last_edit_date": 1488410009, "creation_date": 1488409527, "answer_id": 42543835, "question_id": 42543527, "link": "https://stackoverflow.com/questions/42543527/understanding-the-number-of-iterations-to-find-a-solution-using-the-bisection-me/42543835#42543835", "title": "Understanding the number of iterations to find a solution using the Bisection method", "body": "<p>With each iteration, you cut the search interval in half.  At each iteration, you check to see whether f(c), the functional value at the midpoint, is 0, within the accuracy of the computer's floating-point representation.</p>\n\n<p>If you were to choose the interval [-101, 99] you would get the solution in only 1 iteration, as that's when you hit c = -1.  The program will stop whenever it gets close enough to the actual root that the evaluation comes up 0.000000</p>\n\n<p>You started with a range of width 5.  What is 5 divided by 2, 52 times?  What is the accuracy of a floating-point number on your implementation?  I'm going to bet that you are close to the minimum difference between two floats.</p>\n\n<p>If you really want to see this in action, add one simple line inside the loop, right at the top:</p>\n\n<pre><code>print a, b, c, f(c)\n</code></pre>\n\n<p>This will show you the progress of finding the root.</p>\n\n<p><strong>print</strong> statements are a low-tech, effective way to trace a program.</p>\n\n<p><strong>COMMENT RESPONSE</strong></p>\n\n<p>Good point: I haven't called out the specific case hard enough.</p>\n\n<p>You finished in 52 iterations because that's how many it took for the program to \"stumble\" across the proper value.  When you changed and made it in 53 iterations with a smaller range ... the simple way is to say that you got a little lucky the first time.  As I <em>did</em> point out, if you start with something that has -1 as its midpoint, such as [-101, 99], then you'll finish in only <em>one</em> iteration, despite having a much larger interval.</p>\n"}, {"comments": [{"owner": {"reputation": 56, "user_id": 7616989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90f47bf8b4514aa7069f519eaf235a7?s=128&d=identicon&r=PG&f=1", "display_name": "AVLZ", "link": "https://stackoverflow.com/users/7616989/avlz"}, "edited": false, "score": 0, "creation_date": 1488414991, "post_id": 42544332, "comment_id": 72225241, "body": "This was exactly what I wanted to understand!! After seeing your answer I re-read the Python Tutorial (15.) and it also helps to understand this question, but I wouldn&#39;t have got there without your explanation. Many thanks! Btw your last example was very useful to understand how the denominator of powers of 2 links to the steps. I checked with [-4000, 1] and guessed the number of additional steps to be around 10 since 2^10 = 1024 ~ 4 * 1000."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 56, "user_id": 7616989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90f47bf8b4514aa7069f519eaf235a7?s=128&d=identicon&r=PG&f=1", "display_name": "AVLZ", "link": "https://stackoverflow.com/users/7616989/avlz"}, "edited": false, "score": 0, "creation_date": 1488419050, "post_id": 42544332, "comment_id": 72226305, "body": "@AVLZ Yeah, I&#39;m quite happy with that last example. Shows quite well how the different parts matter, I think. Here&#39;s a challenge: Guess how many steps it&#39;ll take for function <code>x**2 - 1000000</code> and initial range <code>[999.3, 1000.3]</code>."}, {"owner": {"reputation": 56, "user_id": 7616989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90f47bf8b4514aa7069f519eaf235a7?s=128&d=identicon&r=PG&f=1", "display_name": "AVLZ", "link": "https://stackoverflow.com/users/7616989/avlz"}, "edited": false, "score": 0, "creation_date": 1488474074, "post_id": 42544332, "comment_id": 72257053, "body": "I checked that it&#39;s 41, but I don&#39;t get it. Especially because [999.6, 1000.6] would need 42 steps -&gt; it&#39;s the same range, and the midpoint is closer to the root, yet it needs more tries. Does it have to do with the fact that the midpoint is above and not below the root?"}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 56, "user_id": 7616989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90f47bf8b4514aa7069f519eaf235a7?s=128&d=identicon&r=PG&f=1", "display_name": "AVLZ", "link": "https://stackoverflow.com/users/7616989/avlz"}, "edited": false, "score": 0, "creation_date": 1488477971, "post_id": 42544332, "comment_id": 72259505, "body": "@AVLZ I don&#39;t think there&#39;s a meaningful reason of that 41 vs 42, I think that&#39;s just luck, like the 52 vs 53 in your original examples. But do you understand why you should expect around 42 here?"}, {"owner": {"reputation": 56, "user_id": 7616989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90f47bf8b4514aa7069f519eaf235a7?s=128&d=identicon&r=PG&f=1", "display_name": "AVLZ", "link": "https://stackoverflow.com/users/7616989/avlz"}, "edited": false, "score": 0, "creation_date": 1488493562, "post_id": 42544332, "comment_id": 72268245, "body": "Not really, though I&#39;ve tried to apply the same rationale as in the other function&#39;s examples. Something like the range being 1/4 of length so I should expect 2^2 = 4 steps less? But it doesn&#39;t do the trick."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "reply_to_user": {"reputation": 56, "user_id": 7616989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90f47bf8b4514aa7069f519eaf235a7?s=128&d=identicon&r=PG&f=1", "display_name": "AVLZ", "link": "https://stackoverflow.com/users/7616989/avlz"}, "edited": false, "score": 0, "creation_date": 1488523659, "post_id": 42544332, "comment_id": 72278020, "body": "@AVLZ No, the final value is 1000 and the initial range has size 1. That&#39;s 1/1000, so about 1/(2^10). So to get to 1/(2^52) you only need about 42 bisections."}], "tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": true, "score": 1, "last_activity_date": 1488523840, "last_edit_date": 1488523840, "creation_date": 1488412128, "answer_id": 42544332, "question_id": 42543527, "link": "https://stackoverflow.com/questions/42543527/understanding-the-number-of-iterations-to-find-a-solution-using-the-bisection-me/42544332#42544332", "title": "Understanding the number of iterations to find a solution using the Bisection method", "body": "<p>If you <code>print([a, b])</code> in the loop, you can see the range evolve:</p>\n\n<pre><code>[-4, 1]\n[-1.5, 1]\n[-1.5, -0.25]\n[-1.5, -0.875]\n[-1.1875, -0.875]\n[-1.03125, -0.875]\n...\n...\n...\n[-1.0000000000000284, -0.9999999999999929]\n[-1.0000000000000107, -0.9999999999999929]\n[-1.0000000000000018, -0.9999999999999929]\n[-1.0000000000000018, -0.9999999999999973]\n[-1.0000000000000018, -0.9999999999999996]\n[-1.0000000000000007, -0.9999999999999996]\n</code></pre>\n\n<p>The calculated mean of -1.0000000000000007 and -0.9999999999999996 is exactly -1. Why? Because you've reached the limit of the what floats can represent. Here are the exact values involved:</p>\n\n<pre><code>&gt;&gt;&gt; '%.60f' % -1.0000000000000007\n'-1.000000000000000666133814775093924254179000854492187500000000'\n\n&gt;&gt;&gt; '%.60f' % -0.9999999999999996\n'-0.999999999999999555910790149937383830547332763671875000000000'\n\n&gt;&gt;&gt; '%.60f' % (-1.0000000000000007 + -0.9999999999999996)\n'-2.000000000000000000000000000000000000000000000000000000000000'\n\n&gt;&gt;&gt; '%.60f' % ((-1.0000000000000007 + -0.9999999999999996) / 2)\n'-1.000000000000000000000000000000000000000000000000000000000000'\n</code></pre>\n\n<p>Floats store <a href=\"https://en.wikipedia.org/wiki/Double-precision_floating-point_format\" rel=\"nofollow noreferrer\">52 bits of fraction</a>, meaning 52 bits after the leading 1-bit. Meaning you lose what's smaller than about 1/2<sup>52</sup> of your value. After 52 steps, your initial range of size 5 has become about size 5/2<sup>52</sup>. That's about 1/2<sup>52</sup> of your value -1. So around there, you reach a pretty good chance to stumble upon exactly -1 because of the imprecision.</p>\n\n<p>It could take two or maybe three steps more, because 5/2<sup>52</sup> is still a bit larger than 1/2<sup>52</sup>. You got lucky there. With your other initial range <code>[-2, 1]</code> you just got less lucky. There your range shrinks until <code>[-1.0000000000000002, -0.9999999999999999]</code> before you reach -1.</p>\n\n<p>If you start with <code>[-4000000, 1]</code> instead, then you'll need 72 steps. It's 20 steps more because the initial range is a million times larger, which is about 2<sup>20</sup>.</p>\n\n<p>Another case: If you use function <code>x**2 - 1000000</code> and initial range <code>[999.3, 1000.3]</code>, then it takes 41 steps. Why? The final value (i.e., the root) is 1000 and the initial range has size 1. That's 1/1000, so about 1/2<sup>10</sup>. So to get to 1/2<sup>52</sup> you only need about 42 bisections.</p>\n"}], "owner": {"reputation": 56, "user_id": 7616989, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f90f47bf8b4514aa7069f519eaf235a7?s=128&d=identicon&r=PG&f=1", "display_name": "AVLZ", "link": "https://stackoverflow.com/users/7616989/avlz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1105, "favorite_count": 0, "accepted_answer_id": 42544332, "answer_count": 2, "score": 1, "last_activity_date": 1488523840, "creation_date": 1488408202, "last_edit_date": 1495541828, "question_id": 42543527, "link": "https://stackoverflow.com/questions/42543527/understanding-the-number-of-iterations-to-find-a-solution-using-the-bisection-me", "title": "Understanding the number of iterations to find a solution using the Bisection method", "body": "<p>I was asked to find the root of an equation using the Bisection method and only <code>for</code> loops with Python 3. <a href=\"https://stackoverflow.com/questions/14392208/how-to-do-the-bisection-method-in-python\">This</a> thread shows how to use the method, but not with the explanation for the number in <code>range()</code>.</p>\n\n<p>As an example, I have the function </p>\n\n<blockquote>\n  <p>f(x) = x<sup>2</sup> - 2*x - 3</p>\n</blockquote>\n\n<p>and I want to find its negative root, starting with the interval [-4, 1].</p>\n\n<p>I managed to write the function with a <code>for</code> loop, but I don't understand which range I should use, or how to come up with it. </p>\n\n<p>Here is my code, that solves the problem:</p>\n\n<pre><code>...\na = -4\nb = 1\nc = (a + b)/2\n\nfor i in range(1000):\n    if f(c) == 0:\n        break\n    if f(a) * f(c) &lt; 0:\n        b = c\n    elif f(a) * f(c) &gt; 0:\n        a = c\n    c = (a + b) / 2\n\nreturn c, f(c), i\n</code></pre>\n\n<p>c = -1 (found the negative root), f(c) = 0 confirming that the program works, and i = 52 which indicates that after 52 \"tries\" of bisection, it found the right answer.</p>\n\n<p>I put a very large number in <code>range()</code> to make sure I found the root, but why does it need only 52 iterations? </p>\n\n<p>Plus, if my interval changed to [-2, 1], I would need 53 tries. <strong>Why is that so?</strong></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1488408231, "post_id": 42543499, "comment_id": 72222884, "body": "You can investigate your code with some more <code>print</code>s or e.g. <a href=\"http://pythontutor.com/\" rel=\"nofollow noreferrer\">pythontutor.com</a>. Note that, as with C++ and Java, the <code>while</code> condition isn&#39;t reevaluated <i>during</i> the body of the loop, so it&#39;s not clear why you expected different behaviour."}], "answers": [{"tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 1, "last_activity_date": 1488408251, "creation_date": 1488408251, "answer_id": 42543542, "question_id": 42543499, "link": "https://stackoverflow.com/questions/42543499/python-indexing-explanation/42543542#42543542", "title": "Python indexing explanation", "body": "<p>When you delete <code>l[i]</code>, you shrink the list by one. If you <em>only</em> did <code>del l[i+1]</code> you'd be fine, or if you deleted in reverse order, you'd be fine, but deleting the earlier element first means you're effectively deleting element <code>i+2</code> (based on the original list at the beginning of that loop execution).</p>\n\n<p>Simply flip-flopping to:</p>\n\n<pre><code>        del l[i+1]\n        del l[i]\n</code></pre>\n\n<p>or slightly more efficiently deleting both elements at once:</p>\n\n<pre><code>        del l[i:i+2]\n</code></pre>\n\n<p>will fix the issue.</p>\n\n<p>As illustration, consider <code>[1, 2]</code> (we'll assume your if check passes, I used different values to make it easier to understand). When <code>i</code> is <code>0</code>, you <code>del l[0]</code>, leaving <code>l</code> as <code>[2]</code>, then you <code>del l[1]</code> which is now past the end of the list. If you <code>del l[1]</code> first, you have <code>[1]</code>, and <code>del l[0]</code> works just fine.</p>\n"}, {"tags": [], "owner": {"reputation": 2936, "user_id": 39791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/661c7cc5565e5bc21fb0fc22c0354fef?s=128&d=identicon&r=PG", "display_name": "Joe McMahon", "link": "https://stackoverflow.com/users/39791/joe-mcmahon"}, "is_accepted": false, "score": 0, "last_activity_date": 1488408583, "last_edit_date": 1495535390, "creation_date": 1488408583, "answer_id": 42543621, "question_id": 42543499, "link": "https://stackoverflow.com/questions/42543499/python-indexing-explanation/42543621#42543621", "title": "Python indexing explanation", "body": "<p><a href=\"https://stackoverflow.com/a/42543542/39791\">@ShadowRanger's answer</a> is correct. You can use python at the command line to see the difference:</p>\n\n<pre><code>$ python\nPython 2.7.13 (default, Dec 27 2016, 14:14:52) \n[GCC 4.2.1 Compatible Apple LLVM 8.0.0 (clang-800.0.42.1)] on darwin\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; l = [1,2,3,4]\n&gt;&gt;&gt; i=1\n&gt;&gt;&gt; del l[i]\n&gt;&gt;&gt; del l[i+1]\n&gt;&gt;&gt; l\n[1, 3]   # note that we went one further because the list shrank\n&gt;&gt;&gt; l=[1,2,3,4]\n&gt;&gt;&gt; del l[i+1]\n&gt;&gt;&gt; del l[i]\n&gt;&gt;&gt; l\n[1, 4]   # deleted adjacent items as expected\n&gt;&gt;&gt;\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 5438114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa94ccabd93ceafc4f7ef62bdeb5d4a3?s=128&d=identicon&r=PG&f=1", "display_name": "Buttersnips", "link": "https://stackoverflow.com/users/5438114/buttersnips"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 42543542, "answer_count": 2, "score": -4, "last_activity_date": 1488410953, "creation_date": 1488408082, "last_edit_date": 1488410953, "question_id": 42543499, "link": "https://stackoverflow.com/questions/42543499/python-indexing-explanation", "title": "Python indexing explanation", "body": "<p>I do not understand how the index goes through a loop in Python. </p>\n\n<p>In this fairly simple code why does <code>del l[i+1]</code> gives an index out of bound error? Isn't the check taken care of by the while loop? How do you check to see if you are at the end of the loop?</p>\n\n<pre><code>def getString(str):\n    l = list(str)\n    i=0\n    while i &lt; len(l)-1 and i != len(l)-1:\n        if l[i] == l[i+1]:\n            del l[i]\n            del l[i+1]\n            i=0\n            if len(l) == 0:\n                print(\"Empty String\")\n                break\n        else:\n            i+=1\n    print(l)\n\nstr = \"aabbcc\"\ngetString(str)\n</code></pre>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 1562, "user_id": 4064680, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/11f20fb606b4adeea494774f406b511f?s=128&d=identicon&r=PG&f=1", "display_name": "Ycon", "link": "https://stackoverflow.com/users/4064680/ycon"}, "is_accepted": true, "score": 0, "last_activity_date": 1488414398, "creation_date": 1488414398, "answer_id": 42544723, "question_id": 42543494, "link": "https://stackoverflow.com/questions/42543494/trigger-post-save-signal-on-m2m-field/42544723#42544723", "title": "Trigger Post_save signal on M2M field", "body": "<p>Got it! Was related to the <code>m2m_changed</code>. I needed to create a \"through\" method.</p>\n\n<p>Only change needed was this:</p>\n\n<pre><code>m2m_changed.connect(update_search, sender=Item.tag.through)\n</code></pre>\n"}], "owner": {"reputation": 1562, "user_id": 4064680, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/11f20fb606b4adeea494774f406b511f?s=128&d=identicon&r=PG&f=1", "display_name": "Ycon", "link": "https://stackoverflow.com/users/4064680/ycon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 42544723, "answer_count": 1, "score": 0, "last_activity_date": 1488414398, "creation_date": 1488408058, "last_edit_date": 1488408660, "question_id": 42543494, "link": "https://stackoverflow.com/questions/42543494/trigger-post-save-signal-on-m2m-field", "title": "Trigger Post_save signal on M2M field", "body": "<p>This code should add items to an index every time a new object is created. It works, but does not realise the M2M field is being created.</p>\n\n<p>I believe the signal doesn't \"see\" tags (as it's an M2M field).</p>\n\n<p>In other words:</p>\n\n<ul>\n<li><p>adds the title field only to index when object is \"CREATED\"</p></li>\n<li><p>only adds the M2M relations to index when \"SAVE\" is clicked</p></li>\n</ul>\n\n<p>FWIW, this is indexing for elastic search.</p>\n\n<h1>Models.py</h1>\n\n<pre><code>class Item(models.Model):\n    title = models.CharField(\"Title\", max_length=10000, blank=True)\n    tag = models.ManyToManyField('Tag', blank=True)\n\n    def get_grouped_tags(self):\n        tag = self.tag.order_by('taglevel')\n        grouped_tags = {\n            tag_level: [\n                { 'name': tag_of_level.name, 'taglevel': tag_of_level.taglevel, }\n                for tag_of_level in tags_of_level\n            ] for tag_level, tags_of_level\n            in groupby(tag, lambda tag: tag.taglevel)\n        }\n        return grouped_tags\n\n    def to_search(self):\n        d = {\n            \"tags\": self.grouped_tags(),\n            \"title\": self.title\n        }\n        return ItemIndex(meta={'id': self.id}, **d)\n\n    def indexing(self):\n        obj = ItemIndex(\n            meta={'id': self.id},\n            title=self.title,\n            typeItem=self.get_typeItem_display()\n        )\n        obj.save()\n        return obj.to_dict(include_meta=True)\n\ndef update_search(instance, **kwargs):\n    instance.to_search().save()\n\ndef remove_from_search(instance, **kwargs):\n    instance.to_search().delete()\n\npost_save.connect(update_search, sender=Item)\npost_save.connect(update_search, sender=Tag)\npre_delete.connect(remove_from_search, sender=Item)\npre_delete.connect(remove_from_search, sender=Tag)\nm2m_changed.connect(update_search, sender=Item)\n</code></pre>\n\n<h1>Search.py</h1>\n\n<pre><code>connections.create_connection()\n\nclass ItemIndex(DocType):\n    title = String()\n    class Meta:\n        index = 'Item-index'\n\n\ndef bulk_indexing():\n    ItemIndex.init()\n    es = Elasticsearch()\n    bulk(client=es, actions=(b.indexing() for b in models.Item.objects.all().iterator()))\n\n\ndef _search(title):\n    s = Search().filter('term', title=title.text)\n    response = s.execute()\n    return response\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "numpy", "cython"], "answers": [{"comments": [{"owner": {"reputation": 8909, "user_id": 467366, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/fYQGf.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/467366/paul"}, "edited": false, "score": 0, "creation_date": 1488412525, "post_id": 42544298, "comment_id": 72224485, "body": "This doesn&#39;t account for the fact that <code>bytes[:]</code> does not work."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 8909, "user_id": 467366, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/fYQGf.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/467366/paul"}, "edited": false, "score": 0, "creation_date": 1488427570, "post_id": 42544298, "comment_id": 72228748, "body": "Last year I thought of handling unicode strings as rows of a 2d array,  <code>U5</code> being a 5 column <code>int</code> row."}, {"owner": {"reputation": 8909, "user_id": 467366, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/fYQGf.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/467366/paul"}, "edited": false, "score": 0, "creation_date": 1488430791, "post_id": 42544298, "comment_id": 72229899, "body": "Haven&#39;t had time to look at your edits yet, but if you&#39;re still working on this, there&#39;s no need to focus on the unicode part. I&#39;m fine with using bytestrings if necessary, they are fixed length ASCII identifiers."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 8909, "user_id": 467366, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/fYQGf.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/467366/paul"}, "edited": false, "score": 0, "creation_date": 1488432852, "post_id": 42544298, "comment_id": 72230574, "body": "My best try so far works the same for unicode and bytes - just using <code>int</code> v. <code>uint8</code> (4 bytes v 1 per &#39;elment&#39;)."}, {"owner": {"reputation": 8909, "user_id": 467366, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/fYQGf.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/467366/paul"}, "edited": false, "score": 0, "creation_date": 1488476887, "post_id": 42544298, "comment_id": 72258848, "body": "Yeah, looking at this, it seems like the <code>object</code> version is the best of these, but even abandoning the idea of using <code>memoryview</code> objects, why is there not a version of this that can do something similar to <code>cdef np.ndarray[np.dtype(&#39;a6&#39;)] arr = ...</code>? Treating it as an array of objects rather than an array of fixed-length strings seems like it is throwing away pretty valuable type and memory-layout information."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 3, "last_activity_date": 1488495426, "last_edit_date": 1495540813, "creation_date": 1488411887, "answer_id": 42544298, "question_id": 42543485, "link": "https://stackoverflow.com/questions/42543485/cython-specify-numpy-array-of-fixed-length-strings/42544298#42544298", "title": "Cython specify numpy array of fixed length strings", "body": "<p>In a Python3 session, your <code>a5</code> array contains bytestrings.</p>\n\n<pre><code>In [165]: np.array(['12345', '67890', '22343'], dtype='a5')\nOut[165]: \narray([b'12345', b'67890', b'22343'], \n      dtype='|S5')\n</code></pre>\n\n<p><a href=\"http://cython.readthedocs.io/en/latest/src/tutorial/strings.html\" rel=\"nofollow noreferrer\">http://cython.readthedocs.io/en/latest/src/tutorial/strings.html</a>\nsays that <code>str</code> is unicode string type when compiled with Python3.</p>\n\n<p>I suspect that <code>np.array(['12345', '67890', '22343'], dtype='U5')</code> would be accepted as the input array for your function.  But copying to the <code>a5</code> <code>out_arr</code> would have problems.</p>\n\n<h2>object version</h2>\n\n<p>An object version of this loop works:</p>\n\n<pre><code>cpdef str[:] objcopy(str[:] in_arr):\n    cdef str[:] out_arr = np.zeros(in_arr.shape[0], dtype=object)\n    cdef int N\n    N = in_arr.shape[0]\n    for i in range(N):\n        out_arr[i] = in_arr[i]\n    return out_arr\n\nnarr = np.array(['one','two','three'], dtype=object)\ncpy = objcopy(narr)\nprint(cpy)\nprint(np.array(cpy))\nprint(np.array(objcopy(np.array([None,'one', 23.4]))))\n</code></pre>\n\n<p>These functions return a memoryview, which has to be converted to array to print.</p>\n\n<h2>single char version</h2>\n\n<p>Single byte memoryview copy:</p>\n\n<pre><code>cpdef char[:] chrcopy(char[:] in_arr):\n    cdef char[:] out_arr = np.zeros(in_arr.shape[0], dtype='uint8')\n    cdef int N\n    N = in_arr.shape[0]\n    for i in range(N):\n        out_arr[i] = in_arr[i]\n    return out_arr\nprint(np.array(chrcopy(np.array([b'one',b'two',b'three']).view('S1'))).view('S5'))\n</code></pre>\n\n<p>Uses <code>view</code> to convert strings to single bytes and back.</p>\n\n<h2>2d unicode version</h2>\n\n<p>I looked into this issue last year: <a href=\"https://stackoverflow.com/questions/35698179/cython-storing-unicode-in-numpy-array\">Cython: storing unicode in numpy array</a></p>\n\n<p>This processes unicode strings as though they were rows of a 2d int array; reshape is needed before and after.</p>\n\n<pre><code>cpdef int[:,:] int2dcopy(int[:,:] in_arr):\n    cdef int[:,:] out_arr = np.zeros((in_arr.shape[0], in_arr.shape[1]), dtype=int)\n    cdef int N\n    N = in_arr.shape[0]\n    for i in range(N):\n        out_arr[i,:] = in_arr[i,:]\n    return out_arr\n\nnarr = np.array(['one','two','three', 'four', 'five'], dtype='U5')\ncpy = int2dcopy(narr.view('int').reshape(-1,5))\nprint(cpy)\nprint(np.array(cpy))\nprint(np.array(cpy).view(narr.dtype)) # .reshape(-1)\n</code></pre>\n\n<p>For bytestrings a similar 2d <code>char</code> version should work.</p>\n\n<h2>c struct version</h2>\n\n<pre><code>byte5 = cython.struct(x=cython.char[5])\ncpdef byte5[:] byte5copy(byte5[:] in_arr):\n    cdef byte5[:] out_arr = np.zeros(in_arr.shape[0], dtype='|S5')\n    cdef int N\n    N = in_arr.shape[0]\n    for i in range(N):\n        out_arr[i] = in_arr[i]\n    return out_arr\n\nnarr = np.array(['one','four','six'], dtype='|S5')\ncpy = byte5copy(narr)\nprint(cpy)\nprint(repr(np.array(cpy)))\n# array([b'one', b'four', b'six'], dtype='|S5')\n</code></pre>\n\n<p>The C struct is creating a memoryview with 5 byte elements, which map onto array <code>S5</code> elements.</p>\n\n<p><a href=\"https://github.com/cython/cython/blob/master/tests/memoryview/numpy_memoryview.pyx\" rel=\"nofollow noreferrer\">https://github.com/cython/cython/blob/master/tests/memoryview/numpy_memoryview.pyx</a> also has a structured array example with bytestrings.</p>\n"}], "owner": {"reputation": 8909, "user_id": 467366, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/fYQGf.jpg?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/467366/paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1687, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1488495426, "creation_date": 1488408013, "question_id": 42543485, "link": "https://stackoverflow.com/questions/42543485/cython-specify-numpy-array-of-fixed-length-strings", "title": "Cython specify numpy array of fixed length strings", "body": "<p>I have a function that I'd like to use Cython with that involves processing large numbers of fixed-length strings. For a standard cython function, I can declare the types of arrays like so:</p>\n\n<pre><code>cpdef double[:] g(double[:] in_arr):\n    cdef double[:] out_arr = np.zeros(in_arr.shape, dtype='float64')\n\n    cdef i\n    for i in range(len(in_arr)):\n        out_arr[i] = in_arr[i]\n\n    return out_arr\n</code></pre>\n\n<p>This compiles and works as expected when the dtype is something simple like <code>int32</code>, <code>float</code>, <code>double</code>, etc. However, I cannot figure out how to create a typed memoryview of fixed-length strings - i.e. the equivalent of <code>np.dtype('a5')</code>, for example.</p>\n\n<p>If I use this:</p>\n\n<pre><code>cpdef str[:] f(str[:] in_arr):\n    # arr should be a numpy array of 5-character strings\n    cdef str[:] out_arr = np.zeros(in_arr.shape, dtype='a5')\n\n    cdef i\n    for i in range(len(in_arr)):\n        out_arr[i] = in_arr[i]\n\n    return out_arr\n</code></pre>\n\n<p>The function compiles, but this:</p>\n\n<pre><code>in_arr = np.array(['12345', '67890', '22343'], dtype='a5')\nf(in_arr)\n</code></pre>\n\n<p>Throws the following error:</p>\n\n<blockquote>\n  <p>---> 16 cpdef str[:] f(str[:] in_arr):\n       17     # arr should be a numpy array of 5-character strings\n       18     cdef str[:] out_arr = np.zeros(in_arr.shape, dtype='a5')</p>\n  \n  <p>ValueError: Buffer dtype mismatch, expected 'unicode object' but got a\n  string</p>\n</blockquote>\n\n<p>Similarly if I use <code>bytes[:]</code>, it gives the error \"Buffer dtype mismatch, expected 'bytes object' but got a string\" - and this doesn't even get to the issue with the fact that nowhere am I specifying that these strings have length 6.</p>\n\n<p>Interestingly, I <em>can</em> include fixed-length strings in a structured type as in <a href=\"https://stackoverflow.com/q/21435378/467366\">this question</a>, but I don't think that's the right way to declare the types.</p>\n"}, {"tags": ["python", "dataframe"], "comments": [{"owner": {"reputation": 1723, "user_id": 6580543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c2d26bb59afa57a4a08d5000af6391d?s=128&d=identicon&r=PG&f=1", "display_name": "mitoRibo", "link": "https://stackoverflow.com/users/6580543/mitoribo"}, "edited": false, "score": 0, "creation_date": 1488408610, "post_id": 42543484, "comment_id": 72223038, "body": "can you include an example <code>df</code>?"}], "owner": {"reputation": 21, "user_id": 7644055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6941e4c39acbfaaa6184b7b5238b2f4?s=128&d=identicon&r=PG&f=1", "display_name": "KyleTos", "link": "https://stackoverflow.com/users/7644055/kyletos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1527182985, "creation_date": 1488408013, "question_id": 42543484, "link": "https://stackoverflow.com/questions/42543484/how-to-outline-bins-in-2d-python-histogram-with-color-map", "title": "How to outline bins in 2D python histogram with color map?", "body": "<p>I'm trying to make a 2D plot in python, but I cannot for the life of me figure out how to make the lines go along the outside of the bins, instead of through the bins. I'd like each of the boxes be outlined by lines instead. Below is my code for plotting a dataframe \"df\". Any help would be appreciated!</p>\n\n<pre><code>from matplotlib import cm as cm\nimport matplotlib.pyplot as plt\n\nfig = plt.figure()\nax1 = fig.add_subplot(111)\ncmap = cm.get_cmap('jet', 30) # viridis\ncax = ax1.imshow(df.corr(), interpolation=\"nearest\", cmap=cmap)\nax1.grid(True, which='minor', color='black')\nplt.title('Titanic Feature Correlation')\nlabels = [column for column in df]\nax1.set_xticks(np.arange(len(labels)))\nax1.set_xticklabels(labels,fontsize=5)\nax1.set_yticks(np.arange(len(labels)))\nax1.set_yticklabels(labels,fontsize=5)\nfig.colorbar(cax, ticks=[1, .75, .5, .25, 0, -.25, -.5, -.75, -1])\nplt.show()\n</code></pre>\n"}, {"tags": ["python", "arrays", "callback"], "comments": [{"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 1, "creation_date": 1488407630, "post_id": 42543365, "comment_id": 72222601, "body": "<code>functools.reduce</code>, maybe? I don&#39;t think there&#39;s a &quot;singular way&quot; to do this effectively, at all. Different operations will require different (specific) tools, especially with NumPy."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1488407704, "post_id": 42543365, "comment_id": 72222633, "body": "Or in this case, there&#39;s already a <code>min</code> function that takes a <code>key</code> argument..."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1488408047, "post_id": 42543365, "comment_id": 72222795, "body": "@Mitch: There are tons of general ways to accomplish stuff like this (I&#39;d recommend learning the <code>functools</code> and <code>itertools</code> modules if you want to do more powerful stuff), e.g. the aforementioned <code>reduce</code> function, but when you have more obvious options, it&#39;s best to avoid unnecessary complication."}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "reply_to_user": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1488408062, "post_id": 42543365, "comment_id": 72222807, "body": "@Mitch: very often a &#39;general way&#39; is cleaner and <i>shorter,</i> independent of the language, as long as you hit the right generalization. Something like a &quot;visitor pattern&quot; is one way to think about the OP&#39;s case; &quot;traversable&quot; and &quot;foldable&quot; is another, etc."}, {"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "reply_to_user": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "edited": false, "score": 1, "creation_date": 1488408215, "post_id": 42543365, "comment_id": 72222878, "body": "@9000 That is fair, I suppose I was considering more just NumPy as OP mentioned it, where vectorized routines often require some abstractions that can make a &quot;general way&quot; challenging, depending on how you define &quot;general&quot;."}, {"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 0, "creation_date": 1488414626, "post_id": 42543365, "comment_id": 72225146, "body": "Just use a normal function instead of the multiline lambda. To get access to the darkest_coords variable you can use the <code>nonlocal</code> keyword in Python 3. In Python 2 you have to mutate the list, because the <code>nonlocal</code> keyword is not available.  Also, binding a lambda (a anonymous function) to a name is pointless."}], "answers": [{"comments": [{"owner": {"reputation": 1472, "user_id": 500343, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/29hSZ.jpg?s=128&g=1", "display_name": "CaptainStiggz", "link": "https://stackoverflow.com/users/500343/captainstiggz"}, "edited": false, "score": 1, "creation_date": 1488411113, "post_id": 42543437, "comment_id": 72224012, "body": "Thanks for this. I edited my question to provide a more complex example use-case, along with my interpretation of your answer. Basically, I&#39;m gonna need to pass more arguments to <code>myFancyTraversal</code> and have it actually return something, as there&#39;s no way to have tracked variables like <code>min_value</code> or <code>darkest_avg</code> scope to an inline function as in JS or other languages. So each of my different <code>callback</code> functions needs to accept all those variables as arguments, and return something for <code>myFancyTraversal</code> to return to its calling function."}, {"owner": {"reputation": 1472, "user_id": 500343, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/29hSZ.jpg?s=128&g=1", "display_name": "CaptainStiggz", "link": "https://stackoverflow.com/users/500343/captainstiggz"}, "edited": false, "score": 0, "creation_date": 1488412282, "post_id": 42543437, "comment_id": 72224412, "body": "The beauty of the inline approach available in JS is that it allows me to define a function or module whose only concern is &quot;traversing&quot; or &quot;scanning,&quot; without having to provide any context on what is being done with the scan. But it seems that with <code>myFancyTraversal</code>, and python in general, that context is required. In other words, the <code>myFancyTraversal</code>  actually needs some context about <code>callback</code> in the form of arguments, and needs to actually return something, even though its job is simply to &quot;traverse.&quot; Is that correct?"}, {"owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "reply_to_user": {"reputation": 1472, "user_id": 500343, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/29hSZ.jpg?s=128&g=1", "display_name": "CaptainStiggz", "link": "https://stackoverflow.com/users/500343/captainstiggz"}, "edited": false, "score": 1, "creation_date": 1488428100, "post_id": 42543437, "comment_id": 72228929, "body": "I see, what you need is not a function, and not even a proper procedure with side effects; you want something like a macro that would meld with the code around it, access its local variables, etc. This way, the &quot;callback&quot; needs the context about the place where it would run. I stay away from such approaches because it&#39;s hard (for me) to reason about them or test them; I tend to use proper functions, pure where possible. But the macro-like approach is still attainable, as @skrx shows above."}], "tags": [], "owner": {"reputation": 36902, "user_id": 223424, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e97c628a88337b15e76a4690e916a2cd?s=128&d=identicon&r=PG", "display_name": "9000", "link": "https://stackoverflow.com/users/223424/9000"}, "is_accepted": false, "score": 3, "last_activity_date": 1488407829, "creation_date": 1488407829, "answer_id": 42543437, "question_id": 42543365, "link": "https://stackoverflow.com/questions/42543365/inline-callback-functions-in-python/42543437#42543437", "title": "Inline callback functions in python", "body": "<p>You can totally pass a function to your function, just like in JS.</p>\n\n<pre><code>def myFancyTraversal(data, callback):\n  result = 0\n  for element in data:  # or anything more fancy\n    result = callback(element, result)\n  return result\n</code></pre>\n\n<p>But before reinventing wheels, make sure you're fluent with <a href=\"https://docs.python.org/2/tutorial/datastructures.html#list-comprehensions\" rel=\"nofollow noreferrer\">list comprehensions</a>, <code>map</code>, <code>reduce</code>, and <code>lambda</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4469, "user_id": 6342812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19e9e8f53f02cc9013f635a6bb67647d?s=128&d=identicon&r=PG&f=1", "display_name": "rassar", "link": "https://stackoverflow.com/users/6342812/rassar"}, "is_accepted": false, "score": 2, "last_activity_date": 1488408537, "last_edit_date": 1495539967, "creation_date": 1488408537, "answer_id": 42543613, "question_id": 42543365, "link": "https://stackoverflow.com/questions/42543365/inline-callback-functions-in-python/42543613#42543613", "title": "Inline callback functions in python", "body": "<p>For your case, I would just use the builtin <code>min</code> function:</p>\n\n<pre><code>&gt;&gt;&gt; min([1, 2, 3, 4, 5])\n1\n</code></pre>\n\n<p>But if you wanted to have an inline function, you would use a <a href=\"http://www.secnetix.de/olli/Python/lambda_functions.hawk\" rel=\"nofollow noreferrer\">lambda</a> and a <a href=\"https://stackoverflow.com/questions/10973766/understanding-the-map-function\">map</a>. The <code>map</code> function is essentially a built-in version of your <code>traverse</code> function.</p>\n\n<pre><code>def findMin(arr):\n    m = 100 #Must be a value larger than can be in your list\n    min_func = lambda el: el if el &lt; m else m #Use an inline lambda to declare a function.\n    for val in map(min_func, arr): #Returns the function called on \n                                   #every item in the array\n        m = val #Set m to the new lowest value\n    return m\n</code></pre>\n\n<p>The <code>min_func</code> lambda is equivalent to:</p>\n\n<pre><code>def min_func(el):\n    if el &lt; m:\n        return el\n    return m\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1472, "user_id": 500343, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/29hSZ.jpg?s=128&g=1", "display_name": "CaptainStiggz", "link": "https://stackoverflow.com/users/500343/captainstiggz"}, "edited": false, "score": 1, "creation_date": 1488417466, "post_id": 42544997, "comment_id": 72225927, "body": "<code>nonlocal</code> was the magic touch! Did not know about that one, thanks."}], "tags": [], "owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "is_accepted": true, "score": 4, "last_activity_date": 1488417191, "last_edit_date": 1488417191, "creation_date": 1488416253, "answer_id": 42544997, "question_id": 42543365, "link": "https://stackoverflow.com/questions/42543365/inline-callback-functions-in-python/42544997#42544997", "title": "Inline callback functions in python", "body": "<p>Just use a normal function instead of the multiline lambda. To get access to the <code>darkest_coords</code> variable you can use the <code>nonlocal</code> keyword in Python 3. In Python 2 you have to mutate the list, because the <code>nonlocal</code> keyword is not available.</p>\n\n<pre><code>def darkest_region(image, fsize):\n    \"\"\"Find the coordinates of darkest region.\"\"\"\n    darkest_coords = [0, 0]\n    darkest_avg = 256\n\n    def g(x, y, r):\n        nonlocal darkest_coords\n        # r is an fsize x fsize region\n        avg_darkness = # blah blah, traverse and average pixels\n        if avg_darkness &lt; darkest_avg:\n            darkest_coords = [x, y]\n\n    focus_scan(image, fsize, g)\n    return darkest_coords\n\n\ndef focus_scan(image, fsize, callback):\n    \"\"\"Scan all regions of fsize x fsize.\"\"\"\n    height, width = image.shape[:2]\n    for y in range(0, height - fsize):\n        for x in range(0, width - fsize):\n            focus = image[y:y+fsize, x:x+fsize]\n            callback(x, y, focus)\n</code></pre>\n"}], "owner": {"reputation": 1472, "user_id": 500343, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/29hSZ.jpg?s=128&g=1", "display_name": "CaptainStiggz", "link": "https://stackoverflow.com/users/500343/captainstiggz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4406, "favorite_count": 2, "accepted_answer_id": 42544997, "answer_count": 3, "score": 6, "last_activity_date": 1488418249, "creation_date": 1488407457, "last_edit_date": 1488418249, "question_id": 42543365, "link": "https://stackoverflow.com/questions/42543365/inline-callback-functions-in-python", "title": "Inline callback functions in python", "body": "<p>I'd like to be able to define a python function which does some sort of data structure traversal and performs some operation (defined in a callback) at each step. Here's a simple example to illustrate.</p>\n\n<pre><code>def min_value(list):\n   m = 0\n   for i in range(0, len(list)):\n     if list[i] &lt; m: m = list[i]\n   return m\n</code></pre>\n\n<p>This example is trivial, but becomes more complex if I'm traversing an n-dimension array, a numpy array, or I want to define a more complex method of stepping through the data structure.</p>\n\n<p>I'm looking for a \"pythonic\" analogue to the following JavaScript which does the same thing.</p>\n\n<pre><code>traverse = function(list, callback) {\n   for(i = 0; i &lt; list.length; i++) {\n      callback(list[i])\n   }\n}\n\nmin_value = function(list) {\n   m = 0\n   traverse(list, function(element) {\n      if(element &lt; m) m = element\n   });\n}\n</code></pre>\n\n<p>If I wanted a function <code>max_value(list)</code>, it'd be handy to be able to just adjust the one line to <code>if(element &gt; m) m = element</code> without having to to copy/paste my traversal function. What's the best way to do this in python?</p>\n\n<p><strong>EDIT (THE ANSWER):</strong> Here I use the accepted answer below to show how my original JS example could be written in python 3. There are clearly better ways to find the minimum value of a list of scalars, but this is the pattern I was looking for.</p>\n\n<pre><code>def traverse(list, callback):\n   for i in range(0, len(list)):\n      callback(list[i])\n\ndef min_value(list):\n   m = 0\n\n   def update_min(val):\n      nonlocal m\n      if(val &lt; m): m = val\n\n   traverse(list, update_min)\n   return m\n</code></pre>\n\n<p><strong>EDIT (COMPLEX EXAMPLE):</strong> Here's a more complex and direct example of my use case. I have an image and I want to do some processing on a \"focus region\" of the image. Let's say, for example, I want to find the darkest 10x10, 20x20, 30x30, etc pixel regions of the image. My image is a numpy array. I'll use a \"bastard\" multiline lambda to illustrate what I'd <em>like to do</em>, though as far as I know lambdas cannot be used in this way.  </p>\n\n<p>In python:</p>\n\n<pre><code># find the coordinates and of darkest region\ndef darkest_region(image, fsize):\n   darkest_coords = [0, 0]\n   darkest_avg = 256\n\n   # illegal lambda\n   g = lambda x, y, r:\n      # r is an fsize x fsize region\n      avg_darkness = # blah blah, traverse and average pixels\n      if(avg_darkness &lt; darkest_avg): darkest_coords = [x, y]\n\n   focus_scan(image, fsize, g)\n   return darkest_coords\n\n# scan all regions of fsize x fsize\ndef focus_scan(image, fsize, callback):\n   height, width = image.shape[:2]\n   for y in range(0, height - fsize):\n     for x in range(0, width - fsize):\n        focus = image[y:y+fsize, x:x+fsize]\n        callback(x, y, focus)\n</code></pre>\n\n<p>Given that I can't have a multiline lambda like that, I think what I need to do is get a little fancy with the arguments and return value of <code>focus_scan</code>, in order to accommodate a variety of  possible inputs/outputs. In this example, I could pass focus scan <code>darkest_avg</code> and have it return the coordinates I'm looking for, but I might want to pass it something other than a scalar, or have it return a more complex data structure. I imagine I'll have to do something like:</p>\n\n<pre><code>def focus_scan(image, fsize, callback, args):\n   ... # loopy loops\n      some_result = callback([x, y, focus], args)\n\n   return some_result\n</code></pre>\n\n<p>I like the inline function approach I can use in other programming languages, but it doesn't look like it's a common pattern in python.</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 2, "creation_date": 1488407383, "post_id": 42543338, "comment_id": 72222494, "body": "What do you mean by &quot;the contents of the exe file&quot;?"}, {"owner": {"reputation": 3, "user_id": 7599903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e808bebf8ae4e683e45019b314c1cd8?s=128&d=identicon&r=PG&f=1", "display_name": "Anna A.", "link": "https://stackoverflow.com/users/7599903/anna-a"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1488407498, "post_id": 42543338, "comment_id": 72222545, "body": "@ i am working on windows. I want to read the contents from the bash file and print it out in my python code.I get a retval of 1. Has the file opened correctly?"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1488407569, "post_id": 42543338, "comment_id": 72222575, "body": "Now there&#39;s a bash file? Where&#39;d that come from? What do you have, what do you want to do with it, and what do you want to see?"}, {"owner": {"reputation": 3, "user_id": 7599903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e808bebf8ae4e683e45019b314c1cd8?s=128&d=identicon&r=PG&f=1", "display_name": "Anna A.", "link": "https://stackoverflow.com/users/7599903/anna-a"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1488407666, "post_id": 42543338, "comment_id": 72222617, "body": "I am working on a personal project and I need some help. I want to create a python scriptwhich will query the contents of the data_values.bat and prints out query results in the following format. Format: &lt;task name=&quot;Training/Parameter/ENABLE_K&quot; value=&quot;20&quot; /&gt;  The .bat is located in another folder and the python code is located on the Desktop."}, {"owner": {"reputation": 1663, "user_id": 1239729, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/B42R0.png?s=128&g=1", "display_name": "Alexander Reshytko", "link": "https://stackoverflow.com/users/1239729/alexander-reshytko"}, "edited": false, "score": 0, "creation_date": 1488407704, "post_id": 42543338, "comment_id": 72222634, "body": "<code>with open(&#39;..Path_to_my_exe_file&#39;, &#39;r&#39;) as rf: print(rf.read())</code>. If I understood you correctly. If you want to read the contents of a text file why are you trying to execute it?"}, {"owner": {"reputation": 3, "user_id": 7599903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e808bebf8ae4e683e45019b314c1cd8?s=128&d=identicon&r=PG&f=1", "display_name": "Anna A.", "link": "https://stackoverflow.com/users/7599903/anna-a"}, "edited": false, "score": 0, "creation_date": 1488407791, "post_id": 42543338, "comment_id": 72222684, "body": "@I dont want to open a txt file. It is a bash file that I want to open using my python code. The bash file in windows, prints out data in the format as  &lt;task name=&quot;Training/Parameter/ENABLE_K&quot; value=&quot;20&quot; /&gt;. Thats why i do a os.system() call and I get a value of 1, not sure if it is good."}, {"owner": {"reputation": 1663, "user_id": 1239729, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/B42R0.png?s=128&g=1", "display_name": "Alexander Reshytko", "link": "https://stackoverflow.com/users/1239729/alexander-reshytko"}, "edited": false, "score": 0, "creation_date": 1488407825, "post_id": 42543338, "comment_id": 72222695, "body": "great. but it is <b>also</b> a text file :)"}], "answers": [{"tags": [], "owner": {"reputation": 234, "user_id": 6640606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f918e7cb8ebad2b32f27df02199c04b8?s=128&d=identicon&r=PG", "display_name": "Ninja_Coder", "link": "https://stackoverflow.com/users/6640606/ninja-coder"}, "is_accepted": true, "score": 0, "last_activity_date": 1488415777, "creation_date": 1488415777, "answer_id": 42544930, "question_id": 42543338, "link": "https://stackoverflow.com/questions/42543338/i-get-a-value-of-1-from-the-os-system-is-it-good-has-the-bat-file-opened-co/42544930#42544930", "title": "I get a value of 1 from the os.system(). Is it good? Has the .bat file opened correctly?", "body": "<p>The meaning of the value which os.system() returns depends on the shell you are using. See <a href=\"https://docs.python.org/2/library/os.html#os.system\" rel=\"nofollow noreferrer\">https://docs.python.org/2/library/os.html#os.system</a> for more information. </p>\n\n<p>Judging by the comments however, it seems that you are looking for something different. </p>\n\n<p>To run a batch file in python, and to capture the output of the batch file you can use the following(From: <a href=\"https://stackoverflow.com/questions/842120/piping-batch-file-output-to-a-python-script\">Piping Batch File output to a Python script</a>) </p>\n\n<pre><code>import subprocess\n\noutput= subprocess.Popen(\n    (\"Path to your batch file\", \"an argument\", \"another argument\"),\n    stdout=subprocess.PIPE).stdout\n\nfor line in output:\n    # do your work here\n\noutput.close()\n</code></pre>\n\n<p>To just read the code inside of the batch file, you can do:</p>\n\n<pre><code>batch_code = open(\"Path to your batch file\",'r').read()\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7599903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e808bebf8ae4e683e45019b314c1cd8?s=128&d=identicon&r=PG&f=1", "display_name": "Anna A.", "link": "https://stackoverflow.com/users/7599903/anna-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 42544930, "answer_count": 1, "score": -2, "last_activity_date": 1488415777, "creation_date": 1488407333, "last_edit_date": 1488407441, "question_id": 42543338, "link": "https://stackoverflow.com/questions/42543338/i-get-a-value-of-1-from-the-os-system-is-it-good-has-the-bat-file-opened-co", "title": "I get a value of 1 from the os.system(). Is it good? Has the .bat file opened correctly?", "body": "<p>I ran the following command in python.</p>\n\n<pre><code>retval = os.system(..Path_to_my_exe_file); I get an retval of 1\nprint retval\n</code></pre>\n\n<p>Is there anyway to print the contents of the exe file open in the python code.\nI am relatively new to this and would appreciate any help.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1488407409, "post_id": 42543333, "comment_id": 72222509, "body": "Don&#39;t mix basic indexing (<code>:</code>) and advanced indexing (<code>idx</code>). <a href=\"https://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#combining-advanced-and-basic-indexing\" rel=\"nofollow noreferrer\">It gets messy.</a>"}, {"owner": {"reputation": 807, "user_id": 1322301, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1a1fff802aa27212d66284e72960e263?s=128&d=identicon&r=PG&f=1", "display_name": "eriophora", "link": "https://stackoverflow.com/users/1322301/eriophora"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1488407546, "post_id": 42543333, "comment_id": 72222564, "body": "Oh weird. Thanks!"}], "owner": {"reputation": 807, "user_id": 1322301, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1a1fff802aa27212d66284e72960e263?s=128&d=identicon&r=PG&f=1", "display_name": "eriophora", "link": "https://stackoverflow.com/users/1322301/eriophora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 17, "favorite_count": 0, "closed_date": 1488407471, "answer_count": 0, "score": 0, "last_activity_date": 1488407311, "creation_date": 1488407311, "question_id": 42543333, "link": "https://stackoverflow.com/questions/42543333/equivalent-numpy-array-indexing-returns-different-results", "closed_reason": "Duplicate", "title": "Equivalent Numpy array indexing returns different results", "body": "<p>I'm not sure if these two indexing methods are equivalent, but intuitively they should be.</p>\n\n<p>Say we have</p>\n\n<pre><code>x = np.arange(6).reshape(1, 3, 2)\nidx = np.array([0, 1])\n</code></pre>\n\n<p><code>x</code> is now</p>\n\n<pre><code>array([[[0, 1],\n        [2, 3],\n        [4, 5]]])\n</code></pre>\n\n<p><code>x[0, :, idx]</code> returns (somewhat unexpectedly):</p>\n\n<pre><code>array([[0, 2, 4],\n       [1, 3, 5]])\n</code></pre>\n\n<p>while <code>x[0][:, idx]</code> or equivalently <code>x.squeeze()[:, idx]</code> returns:</p>\n\n<pre><code>array([[0, 1],\n       [2, 3],\n       [4, 5]])\n</code></pre>\n\n<p>Why does this occur? Shouldn't they return equivalent results?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 4164, "user_id": 4831822, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_ceYetsPxZc/AAAAAAAAAAI/AAAAAAAAACQ/WjKu3LiDIH0/photo.jpg?sz=128", "display_name": "Steven Summers", "link": "https://stackoverflow.com/users/4831822/steven-summers"}, "edited": false, "score": 0, "creation_date": 1488407770, "post_id": 42543318, "comment_id": 72222675, "body": "Use two lists instead. I fail to see the point of the while loop. Use some math to calculate the index."}], "answers": [{"comments": [{"owner": {"reputation": 1446, "user_id": 7491302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ed578eeae7d2391579f475bbe86fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/7491302/tristan"}, "edited": false, "score": 0, "creation_date": 1488413928, "post_id": 42543584, "comment_id": 72224933, "body": "@qwop Does this fit for what you wanted to do?"}, {"owner": {"reputation": 23, "user_id": 7644017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c4dcc4591e9284b2b002ff41f06bba5?s=128&d=identicon&r=PG&f=1", "display_name": "qwop", "link": "https://stackoverflow.com/users/7644017/qwop"}, "edited": false, "score": 0, "creation_date": 1488416576, "post_id": 42543584, "comment_id": 72225696, "body": "Thanks for explaining the bisection function. I think I&#39;ve been able to correctly modify this code for summing the random numbers"}], "tags": [], "owner": {"reputation": 1446, "user_id": 7491302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ed578eeae7d2391579f475bbe86fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/7491302/tristan"}, "is_accepted": true, "score": 2, "last_activity_date": 1488409544, "last_edit_date": 1488409544, "creation_date": 1488408441, "answer_id": 42543584, "question_id": 42543318, "link": "https://stackoverflow.com/questions/42543318/counting-frequencies-of-numeric-data-in-range-intervals/42543584#42543584", "title": "Counting frequencies of numeric data in range intervals", "body": "<p>Assuming that the data can always be assigned to one of your intervals (you could pre check), using bisect.bisect() would be an efficient and compact way:</p>\n\n<pre><code>from bisect import bisect\nfrom random import randint\n\nocc1 = [-9 + 1 * i for i in range(19)]\nocc2 = [-180 + 20 * i for i in range(19)]\ndata = [randint(-10, 10) for _ in range(100)]\ncounter1, counter2 = {i: 0 for i in range(20)}, {i: 0 for i in range(20)}\n\nfor idx, element in enumerate(data):\n    if (idx + 1) % 20 == 0:\n        counter2[bisect(occ2, element)] += 1\n    else:\n        counter1[bisect(occ1, element)] += 1\n</code></pre>\n\n<p>The <strong>bisect</strong>() function returns the <em>position</em> where the <em>element</em> should be inserted into an ordered array like <em>occ</em> to maintain the order. With 19 values in occ, there are 20 different positions where a value could be inserted. That is, before the first, between any of the elements or after the last. This corresponds to your 20 intervals.\nThe only thing to mind is, e. g. an element is smaller or larger than the upper or lower bound of your intervals it will still be assigned to the lowest or highest interval. Generating random numbers which respect the interval bounds would prevent that though.</p>\n\n<p>From your question I am not sure if you want to cumulate some random numbers or just check the list of points, where every 20 values a different check is performed.\nThe solution could be easily adapted to cumulate random numbers until 20 iterations are reached:</p>\n\n<pre><code>from bisect import bisect\nfrom random import uniform\n\npoints, value = 100000000, 0\nocc1 = [-9 + 1 * i for i in range(19)]\nocc2 = [-180 + 20 * i for i in range(19)]\ncounter1, counter2 = {i: 0 for i in range(20)}, {i: 0 for i in range(20)}\n\nfor idx in range(points):\n    value += uniform(-10, 10)\n    if (idx + 1) % 20 == 0:\n        counter2[bisect(occ2, value)] += 1\n        value = 0\n    else:\n        counter1[bisect(occ1, value)] += 1\n</code></pre>\n\n<p>This runs in 100 seconds for 100M points on my machine.</p>\n"}], "owner": {"reputation": 23, "user_id": 7644017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c4dcc4591e9284b2b002ff41f06bba5?s=128&d=identicon&r=PG&f=1", "display_name": "qwop", "link": "https://stackoverflow.com/users/7644017/qwop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "accepted_answer_id": 42543584, "answer_count": 1, "score": 2, "last_activity_date": 1488416807, "creation_date": 1488407220, "last_edit_date": 1488416807, "question_id": 42543318, "link": "https://stackoverflow.com/questions/42543318/counting-frequencies-of-numeric-data-in-range-intervals", "title": "Counting frequencies of numeric data in range intervals", "body": "<p>I am trying to improve my code which sorts randomly generated numbers into range intervals for the purpose of analyzing the accuracy of the random number generator. Currently my sorting is performed by 20 elif statements (I only have an introductory knowledge of python) and as a result my code takes a long time to execute. How can I more efficiently sort numeric data into intervals and only save the frequency of numbers in the interval?</p>\n\n<pre><code>from datetime import datetime\nstartTime = datetime.now()\ndef test_rand(points):\n    import random\n    d1,d2,d3,d4,d5,d6,d7,d8,d9,d10,d11,d12,d13,d14,d15,d16,d17,d18,d19,d20 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\n    # these variables will be used to count frequency of numbers into 20 intervals: (-10,-9], (-9,-8] ... etc\n    g1,g2,g3,g4,g5,g6,g7,g8,g9,g10,g11,g12,g13,g14,g15,g16,g17,g18,g19,g20 = 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0\n    # these variables will be used to count frequency of every 20 numbers into 20 intervals: (-200,-180], (-180,-160] ... etc\n    y = 0\n    n = 0\n    for i in range(points):\n        x = random.uniform(-10.0,10.0)\n        while n &lt; 20:\n            y += x\n            n += 1\n            break\n        if n == 20:\n            if y &lt; -180:\n                g1 += 1\n            elif y &lt; -160 and y &gt; -180:\n                g2 += 1\n            elif y &lt; -140 and y &gt; -160:\n                g3 += 1\n            elif y &lt; -120 and y &gt; -140:\n                g4 += 1\n            elif y &lt; -100 and y &gt; -120:\n                g5 += 1\n            elif y &lt; -80 and y &gt; -100:\n                g6 += 1\n            elif y &lt; -60 and y &gt; -80:\n                g7 += 1\n            elif y &lt; -40 and y &gt; -60:\n                g8 += 1\n            elif y &lt; -20 and y &gt; -40:\n                g9 += 1\n            elif y &lt; 0 and y &gt; -20:\n                g10 += 1\n            elif y &lt; 20 and y &gt; 0:\n                g11 += 1\n            elif y &lt; 40 and y &gt; 20:\n                g12 += 1\n            elif y &lt; 60 and y &gt; 40:\n                g13 += 1\n            elif y &lt; 80 and y &gt; 60:\n                g14 += 1\n            elif y &lt; 100 and y &gt; 80:\n                g15 += 1\n            elif y &lt; 120 and y &gt; 100:\n                g16 += 1\n            elif y &lt; 140 and y &gt; 120:\n                g17 += 1\n            elif y &lt; 160 and y &gt; 140:\n                g18 += 1\n            elif y &lt; 180 and y &gt; 160:\n                g19 += 1\n            elif y &gt; 180:\n                g20 += 1\n            y *= 0\n            n *= 0\n\n        if x &lt; -9:\n            d1 += 1\n        elif x &lt; -8 and x &gt; -9:\n            d2 += 1\n        elif x &lt; -7 and x &gt; -8:\n            d3 += 1\n        elif x &lt; -6 and x &gt; -7:\n            d4 += 1\n        elif x &lt; -5 and x &gt; -6:\n            d5 += 1\n        elif x &lt; -4 and x &gt; -5:\n            d6 += 1\n        elif x &lt; -3 and x &gt; -4:\n            d7 += 1\n        elif x &lt; -2 and x &gt; -3:\n            d8 += 1\n        elif x &lt; -1 and x &gt; -2:\n            d9 += 1\n        elif x &lt; 0 and x &gt; -1:\n            d10 += 1\n        elif x &lt; 1 and x &gt; 0:\n            d11 += 1\n        elif x &lt; 2 and x &gt; 1:\n            d12 += 1\n        elif x &lt; 3 and x &gt; 2:\n            d13 += 1\n        elif x &lt; 4 and x &gt; 3:\n            d14 += 1\n        elif x &lt; 5 and x &gt; 4:\n            d15 += 1\n        elif x &lt; 6 and x &gt; 5:\n            d16 += 1\n        elif x &lt; 7 and x &gt; 6:\n            d17 += 1\n        elif x &lt; 8 and x &gt; 7:\n            d18 += 1\n        elif x &lt; 9 and x &gt; 8:\n            d19 += 1\n        elif x &gt; 9:\n            d20 += 1\n\n    return d1,d2,d3,d4,d5,d6,d7,d8,d9,d10,d11,d12,d13,d14,d15,d16,d17,d18,d19,d20,g1,g2,g3,g4,g5,g6,g7,g8,g9,g10,g11,g12,g13,g14,g15,g16,g17,g18,g19,g20\n\nprint(test_rand(100000000))    \n\nprint (datetime.now() - startTime)\n</code></pre>\n\n<p>The code is meant to perform 2 functions with the random numbers. The first is to sort the numbers into 20 intervals (so 5 % of the numbers should be in each interval). The second is to sum every 20 numbers generated and place these into 20 new intervals (a normal curve should be observed)</p>\n\n<p>@tristan I've modified your code for performing the above:</p>\n\n<pre><code>for idx in range(points):\n        val_1 = uniform(-10, 10)\n        val_20 += val_1\n        if (idx + 1) % 20 == 0:\n            counter2[bisect(occ2, val_20)] += 1\n            counter1[bisect(occ1, val_1)] += 1\n            val_20 = 0\n            val_1 = 0\n        else:\n            counter1[bisect(occ1, val_1)] += 1\n            val_1 = 0\n</code></pre>\n\n<p>While this method only saves 6 seconds (1:54 --> 1:48) it is FAR more organized and easier to look at. Thanks for the help!</p>\n"}, {"tags": ["python", "json"], "comments": [{"owner": {"reputation": 954, "user_id": 5709737, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e98c852727ac0cf858868d262bd3d00c?s=128&d=identicon&r=PG&f=1", "display_name": "frederick99", "link": "https://stackoverflow.com/users/5709737/frederick99"}, "edited": false, "score": 0, "creation_date": 1488407320, "post_id": 42543306, "comment_id": 72222463, "body": "You are not searching at all."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 7281196, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/60bf97521f77c1b68e4a51da99b4562a?s=128&d=identicon&r=PG&f=1", "display_name": "Dorothy", "link": "https://stackoverflow.com/users/7281196/dorothy"}, "edited": false, "score": 0, "creation_date": 1488441728, "post_id": 42543434, "comment_id": 72234724, "body": "Thanks, that&#39;s been helpful. I was actually trying to ask how to search for &quot;2&quot;, and return Two."}], "tags": [], "owner": {"reputation": 3072, "user_id": 6725184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40514a449959fa5e76f19afc41436221?s=128&d=identicon&r=PG&f=1", "display_name": "Christian K&#246;nig", "link": "https://stackoverflow.com/users/6725184/christian-k%c3%b6nig"}, "is_accepted": false, "score": 0, "last_activity_date": 1488446824, "last_edit_date": 1488446824, "creation_date": 1488407805, "answer_id": 42543434, "question_id": 42543306, "link": "https://stackoverflow.com/questions/42543306/python-searching-for-specific-entry/42543434#42543434", "title": "Python Searching for Specific Entry", "body": "<p>Assuming js is a valid dict:</p>\n\n<pre><code>js = { \"1\": {\"name\":\"One\"},\n       \"2\": {\"name\":\"Two\"},\n       \"3\": {\"name\":\"Three\"}}\n</code></pre>\n\n<p>You are building a list with all the values of \"name\". If you only want those indexes, where \"name\" equals \"Two\", include it in your list comprehension:</p>\n\n<pre><code>&gt;&gt;&gt; needle = \"Two\"\n&gt;&gt;&gt; names = [\"{} - {}\".format(index, js[index][\"name\"]) for index in js if js[index][\"name\"]==needle]\n\n&gt;&gt;&gt; print(names)\n['2 - Two']\n</code></pre>\n\n<p><strong>EDIT</strong>: Regarding your comment, if you try to get the value \"Two\" for the key \"2\", you can directly access the dict the usual way:</p>\n\n<pre><code>&gt;&gt;&gt; needle=\"2\"\n&gt;&gt;&gt; js[needle][\"name\"]\n'Two'\n</code></pre>\n\n<p>In this specific, simplified case it would be easier to use a flat dictionary:</p>\n\n<pre><code>js = { \"1\": \"One\",\n       \"2\": \"Two\",\n       \"3\": \"Three\"}\n</code></pre>\n\n<p>The access (\"search\") would then be:</p>\n\n<pre><code>&gt;&gt;&gt; js[needle]\n'Two'\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 7281196, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/60bf97521f77c1b68e4a51da99b4562a?s=128&d=identicon&r=PG&f=1", "display_name": "Dorothy", "link": "https://stackoverflow.com/users/7281196/dorothy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488446824, "creation_date": 1488407164, "question_id": 42543306, "link": "https://stackoverflow.com/questions/42543306/python-searching-for-specific-entry", "title": "Python Searching for Specific Entry", "body": "<p>So I have the code;</p>\n\n<pre><code>names= [index + \" - \" + js[index][\"name\"] for index in js]\n</code></pre>\n\n<p>To search through this data:</p>\n\n<pre><code>{ \"1\": {\"name\":\"One\"} },\n{ \"2\": {\"name\":\"Two\"} },\n{ \"3\": {\"name\":\"Three\"} },\n</code></pre>\n\n<p>How could I change it so I could set a variable to 2 earlier in the program and make the code only search for the name of 2?</p>\n"}, {"tags": ["python", "html"], "answers": [{"tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 1, "last_activity_date": 1488407476, "creation_date": 1488407476, "answer_id": 42543370, "question_id": 42543294, "link": "https://stackoverflow.com/questions/42543294/problems-with-python-crawler/42543370#42543370", "title": "Problems with Python Crawler", "body": "<p>I'm not sure where you've found that <code>search_result_title_box</code> class, I'd locate the links inside the elements with <code>search_result</code> class. The following code works for me:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\n\ndef trade_spider(max_pages):\n    \"\"\"Docstring here.\"\"\"\n\n    with requests.Session() as session:\n        session.headers = {\"User-Agent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_3) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/56.0.2924.87 Safari/537.36\"}\n\n        for page in range(1, max_pages):\n            url = 'http://www.rent.ie/houses-to-let/renting_dublin/page_{page}'.format(page=page)\n            response = session.get(url)\n\n            soup = BeautifulSoup(response.content, \"html.parser\")\n            for link in soup.select(\".search_result h2 &gt; a[href]\"):\n                print(link[\"href\"])\n\nif __name__ == '__main__':\n    trade_spider(3)\n</code></pre>\n\n<p>Note the following improvements:</p>\n\n<ul>\n<li>we are using the <a href=\"http://docs.python-requests.org/en/master/user/advanced/#session-objects\" rel=\"nofollow noreferrer\"><code>requests.Session()</code></a> to improve on performance (underlying TCP connection is reused) and to configure common things like HTTP headers</li>\n<li>we are using a real browser's <code>User-Agent</code> string</li>\n<li>we are <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/#specifying-the-parser-to-use\" rel=\"nofollow noreferrer\">explicitly specifying <code>html.parser</code> as an underlying parser used by <code>BeautifulSoup</code></a></li>\n<li><code>.search_result h2 &gt; a[href]</code> is a <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/#css-selectors\" rel=\"nofollow noreferrer\">CSS selector</a> to match the desired links in the search result headers. The <code>&gt;</code> means a direct parent-child relationship.</li>\n</ul>\n"}], "owner": {"reputation": 61, "user_id": 7640916, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049d6de52c52f3ff08b48c1981fa8163?s=128&d=identicon&r=PG&f=1", "display_name": "Dom", "link": "https://stackoverflow.com/users/7640916/dom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 1, "accepted_answer_id": 42543370, "answer_count": 1, "score": 0, "last_activity_date": 1488407476, "creation_date": 1488407109, "question_id": 42543294, "link": "https://stackoverflow.com/questions/42543294/problems-with-python-crawler", "title": "Problems with Python Crawler", "body": "<p>I'm new to python and I am trying to code a crawler, my issue is that I cannot get the <code>href</code> links I am targeting to display in the console. Any help is appreciated, see below.   </p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\ndef trade_spider(max_pages):\n    page = 1\n    while page &lt;= max_pages:\n        url = 'http://www.rent.ie/houses-to-let/renting_dublin/page_'+ str(page)\n        source_code = requests.get(url)\n        plain_text = source_code.text\n        soup = BeautifulSoup(plain_text)\n        special_divs = soup.findAll('div', {'class':'search_result_title_box'}) \n        for link in special_divs:\n            gold = link.findAll('a')\n            for link in gold:\n                href = gold.get(link['href'])\n                print(href)\n        page += 1\n\ntrade_spider(3)\n</code></pre>\n"}, {"tags": ["python", "memory-management", "binding"], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 4, "creation_date": 1488411807, "post_id": 42543741, "comment_id": 72224252, "body": "Sure would be nice if whoever downvoted this left any sort of indication of why they thought it was wrong."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": false, "score": 5, "last_activity_date": 1488409093, "creation_date": 1488409093, "answer_id": 42543741, "question_id": 42543225, "link": "https://stackoverflow.com/questions/42543225/how-is-memory-allocated-for-variables-in-python/42543741#42543741", "title": "How is memory allocated for variables in Python?", "body": "<p>This is all going to be CPython implementation details. Other implementations may behaved differently.</p>\n\n<p>Memory allocation <em>for variables</em> is completely independent of what type of object they refer to. Whether you assign <code>x = []</code>, <code>x = 5</code>, or <code>x = SomeCrazyHugeThing()</code>, the value doesn't affect the memory allocated for <code>x</code>. Local variables are allocated as a <code>PyObject *</code> in a Python stack frame's <code>f_localsplus</code> when the function call is entered; other variables are \"allocated\" as <code>dict</code> entries in the corresponding namespace's dict at time of first assignment. (Crazy metaclasses and <code>exec</code> shenanigans can change this in weird ways, but we're not going to go into that.)</p>\n\n<p>That's for variables. <em>Objects</em>, like the <code>float</code> instance the <code>9.89</code> expression evaluates to in your example code, are allocated differently. Each type is responsible for allocating memory when an instance of the type is created and reallocating or deallocating it as needed when the object grows, shrinks, or is destroyed. The manner in which this is done depends on the type.</p>\n\n<p>Note that the time at which an object is created can be surprising. For example, in <code>x = 9.89</code>, Python creates (and allocates memory for) a <code>float</code> object when the bytecode for that statement is compiled. During bytecode execution, Python just retrieves the existing <code>float</code>; no new <code>float</code> is allocated.</p>\n"}, {"tags": [], "owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "is_accepted": true, "score": 3, "last_activity_date": 1488410710, "last_edit_date": 1495535384, "creation_date": 1488409367, "answer_id": 42543801, "question_id": 42543225, "link": "https://stackoverflow.com/questions/42543225/how-is-memory-allocated-for-variables-in-python/42543801#42543801", "title": "How is memory allocated for variables in Python?", "body": "<p><a href=\"http://www.evanjones.ca/python-memory.html\" rel=\"nofollow noreferrer\">Python Memory Management</a></p>\n\n<blockquote>\n  <p>Python does a lot of allocations and deallocations. All objects,\n  including \"simple\" types like integers and floats, are stored on the\n  heap. Calling malloc and free for each variable would be very slow.\n  Hence, the Python interpreter uses a variety of optimized memory\n  allocation schemes. The most important one is a malloc implementation\n  called <code>pymalloc</code>, designed specifically to handle large numbers of\n  small allocations. Any object that is smaller than 256 bytes uses this\n  allocator, while anything larger uses the system's <code>malloc</code>.</p>\n</blockquote>\n\n<p><a href=\"http://effbot.org/pyfaq/why-doesnt-python-release-the-memory-when-i-delete-a-large-object.htm\" rel=\"nofollow noreferrer\">Why doesn't Python release the memory when I delete a large object?</a></p>\n\n<blockquote>\n  <p>Memory allocation works at several levels in Python. There\u2019s the\n  system\u2019s own allocator, which is what shows up when you check the\n  memory use using the Windows Task Manager or <strong>ps</strong>. Then there\u2019s the C\n  runtime\u2019s memory allocator (<strong>malloc</strong>), which gets memory from the system\n  allocator, and hands it out in smaller chunks to the application.\n  Finally, there\u2019s Python\u2019s own object allocator, which is used for\n  objects up to 256 bytes. This allocator grabs large chunks of memory\n  from the C allocator, and chops them up in smaller pieces using an\n  algorithm carefully tuned for Python.</p>\n</blockquote>\n\n<p>and specifically for floats:</p>\n\n<blockquote>\n  <p>floats also use an immortal &amp; unbounded free list.</p>\n</blockquote>\n\n<p>So no, it would only be allocated if there are no more free <code>float</code> spots in pythons free list, which depends on previous <code>float</code> usage in your program.</p>\n\n<p>Ultimately, python is doing the memory management for you, so even a solid answer to your question won't give you much insight.</p>\n\n<p>Additional discussion can be found at <a href=\"https://stackoverflow.com/q/9617001/3579910\">Python: garbage collection fails?</a></p>\n"}], "owner": {"reputation": 241, "user_id": 6820122, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2f4b4586f5bc7f8a478228f04cc99860?s=128&d=identicon&r=PG&f=1", "display_name": "tpm900", "link": "https://stackoverflow.com/users/6820122/tpm900"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6044, "favorite_count": 0, "closed_date": 1488413336, "accepted_answer_id": 42543801, "answer_count": 2, "score": 2, "last_activity_date": 1488410710, "creation_date": 1488406833, "question_id": 42543225, "link": "https://stackoverflow.com/questions/42543225/how-is-memory-allocated-for-variables-in-python", "closed_reason": "Needs more focus", "title": "How is memory allocated for variables in Python?", "body": "<p>As an example, I have the following Python code:</p>\n\n<pre><code>&gt;&gt;&gt; x = 9.89\n</code></pre>\n\n<p>Now I know the type will be determined as float dynamically during runtime, but I am unsure how memory is allocated. Would memory for the size of a float be allocated dynamically after the type is determined? Is the amount of memory allocated always the same?</p>\n"}, {"tags": ["python", "sqlalchemy"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1488448641, "post_id": 42543223, "comment_id": 72239265, "body": "Could you please also include the actual query you&#39;re trying to use? Your example is also incomplete in the sense that you cannot be using the ORM with those tables, as they lack primary keys, unless you&#39;re passing <i>name</i> as a candidate key in table args."}, {"owner": {"reputation": 15585, "user_id": 147562, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/53nwl.jpg?s=128&g=1", "display_name": "boatcoder", "link": "https://stackoverflow.com/users/147562/boatcoder"}, "reply_to_user": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1488455810, "post_id": 42543223, "comment_id": 72244031, "body": "I had boiled the much larger tables down to the minimum required to demonstrate the problem."}], "answers": [{"comments": [{"owner": {"reputation": 15585, "user_id": 147562, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/53nwl.jpg?s=128&g=1", "display_name": "boatcoder", "link": "https://stackoverflow.com/users/147562/boatcoder"}, "edited": false, "score": 0, "creation_date": 1488455914, "post_id": 42552298, "comment_id": 72244127, "body": "SqlAlchemy seems to NOT do so much automatically (making me call <code>aliased</code> for example) that I had discounted the ability of it to take an unjoined table in the  filter statement."}, {"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "reply_to_user": {"reputation": 15585, "user_id": 147562, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/53nwl.jpg?s=128&g=1", "display_name": "boatcoder", "link": "https://stackoverflow.com/users/147562/boatcoder"}, "edited": false, "score": 0, "creation_date": 1488456147, "post_id": 42552298, "comment_id": 72244293, "body": "In my previous job we were actually &quot;bitten&quot; by implicit table references in <code>filter()</code> causing some hefty implicit cross joins :P. Something to look out for..."}], "tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": true, "score": 4, "last_activity_date": 1542775869, "last_edit_date": 1542775869, "creation_date": 1488449034, "answer_id": 42552298, "question_id": 42543223, "link": "https://stackoverflow.com/questions/42543223/how-do-you-express-a-multi-table-update-update-from-in-sqlalchemy-orm/42552298#42552298", "title": "How do you express a multi table update (UPDATE FROM) in SQLAlchemy ORM?", "body": "<p>Here's how you'd issue your <a href=\"http://docs.sqlalchemy.org/en/latest/core/tutorial.html#multiple-table-updates\" rel=\"nofollow noreferrer\">multi table update</a> using the ORM:</p>\n\n<pre><code>session.query(Bar).\\\n    filter(Bar.status_id != 1,\n           Bar.name == Foo.name,\n           Foo.deleted_at.is_(None)).\\\n    update({Bar.status_id: 1}, synchronize_session=False)\n</code></pre>\n\n<p>The footnote in the <a href=\"http://docs.sqlalchemy.org/en/latest/orm/query.html\" rel=\"nofollow noreferrer\">Query API</a> documentation for update links to the Core multi table update docs:</p>\n\n<blockquote>\n  <p>The SQLAlchemy <code>update()</code> construct supports both of these modes implicitly, by specifying multiple tables in the WHERE clause</p>\n</blockquote>\n\n<p>which expands to the ORM Query API as well, which is no surprise as the ORM is built on top of Core. The resulting query is:</p>\n\n<pre><code>UPDATE bar SET status_id=%(status_id)s\nFROM foo\nWHERE bar.status_id != %(status_id_1)s\n  AND bar.name = foo.name\n  AND foo.deleted_at IS NULL\n</code></pre>\n\n<p>From your error I suspect you have something along the lines of</p>\n\n<pre><code>session.query(Bar).select_from(Foo)...update(...)\n</code></pre>\n\n<p>which as the error states is not accepted. You have to pass the FROM table implicitly in the WHERE clause, e.g. <code>filter()</code> in the Query API.</p>\n\n<p>To achieve</p>\n\n<blockquote>\n  <p>I'm wanting to use the ORM so that the session will be updated with the changes before the update command completes.</p>\n</blockquote>\n\n<p>you'll have to change the <a href=\"http://docs.sqlalchemy.org/en/latest/orm/query.html#sqlalchemy.orm.query.Query.update.params.synchronize_session\" rel=\"nofollow noreferrer\"><code>synchronize_session</code></a> accordingly to either <code>'fetch'</code> or <code>'evaluate'</code>.</p>\n"}], "owner": {"reputation": 15585, "user_id": 147562, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/53nwl.jpg?s=128&g=1", "display_name": "boatcoder", "link": "https://stackoverflow.com/users/147562/boatcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2727, "favorite_count": 1, "accepted_answer_id": 42552298, "answer_count": 1, "score": 3, "last_activity_date": 1542775869, "creation_date": 1488406831, "last_edit_date": 1488449681, "question_id": 42543223, "link": "https://stackoverflow.com/questions/42543223/how-do-you-express-a-multi-table-update-update-from-in-sqlalchemy-orm", "title": "How do you express a multi table update (UPDATE FROM) in SQLAlchemy ORM?", "body": "<pre><code>CREATE TABLE foo (\n    name text NOT NULL,\n    deleted_at timestamp without time zone\n);\n\nCREATE TABLE bar (\n    name text NOT NULL,\n    status_id int\n);\n\nUPDATE bar set status_id=1\nFROM foo\nWHERE status_id &lt;&gt; 1 AND foo.name = bar.name AND foo.deleted_at is null;\n</code></pre>\n\n<p>When I try to do this with the ORM, I end up with this error</p>\n\n<pre><code>InvalidRequestError: Can't call Query.update() or Query.delete() when join(), outerjoin(), select_from(), or from_self() has been called\n</code></pre>\n\n<p>I want to use the ORM so that the session will be updated with the changes before the update command completes.</p>\n"}, {"tags": ["python", "python-3.x", "pandas"], "comments": [{"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 2, "creation_date": 1488407369, "post_id": 42543131, "comment_id": 72222491, "body": "Could you distill this down to a reproducible example? No one else has access to your database or spreadsheet. So any attempt to help will just be speculation."}, {"owner": {"reputation": 6104, "user_id": 6163621, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yyhNK.jpg?s=128&g=1", "display_name": "elPastor", "link": "https://stackoverflow.com/users/6163621/elpastor"}, "edited": false, "score": 2, "creation_date": 1488411669, "post_id": 42543131, "comment_id": 72224201, "body": "Pandas purists may not like this quick fix, but I use <code>pd.read_csv(&#39;file.csv&#39;, dtype = object)</code> and it keeps pandas from converting numbers to floats. I&#39;m fairly certain you can replace <code>read_csv()</code> with other DataFrame creating functions."}, {"owner": {"reputation": 783, "user_id": 7565818, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/baba7f06f1273317cc6e682884711879?s=128&d=identicon&r=PG&f=1", "display_name": "nomad", "link": "https://stackoverflow.com/users/7565818/nomad"}, "reply_to_user": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1488814265, "post_id": 42543131, "comment_id": 72386819, "body": "@PaulH I added a sample."}, {"owner": {"reputation": 783, "user_id": 7565818, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/baba7f06f1273317cc6e682884711879?s=128&d=identicon&r=PG&f=1", "display_name": "nomad", "link": "https://stackoverflow.com/users/7565818/nomad"}, "reply_to_user": {"reputation": 6104, "user_id": 6163621, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yyhNK.jpg?s=128&g=1", "display_name": "elPastor", "link": "https://stackoverflow.com/users/6163621/elpastor"}, "edited": false, "score": 0, "creation_date": 1488814326, "post_id": 42543131, "comment_id": 72386859, "body": "@pshep123. Thanks for your input. It is a .xlsx file and can&#39;t be converted into csv as I get it from somewhere else."}, {"owner": {"reputation": 6104, "user_id": 6163621, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/yyhNK.jpg?s=128&g=1", "display_name": "elPastor", "link": "https://stackoverflow.com/users/6163621/elpastor"}, "edited": false, "score": 0, "creation_date": 1488814475, "post_id": 42543131, "comment_id": 72386977, "body": "No, I&#39;m suggesting you use the <code>dtype = object</code> as a <code>read_excel() </code> param. I haven&#39;t tested, but might be worth a shot."}, {"owner": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1488815533, "post_id": 42543131, "comment_id": 72387757, "body": "@nomad: read through the answers for the question below and try again. this question needs radical revisions on several levels.  <a href=\"http://stackoverflow.com/questions/20109391/how-to-make-good-reproducible-pandas-examples\" title=\"how to make good reproducible pandas examples\">stackoverflow.com/questions/20109391/&hellip;</a>"}, {"owner": {"reputation": 783, "user_id": 7565818, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/baba7f06f1273317cc6e682884711879?s=128&d=identicon&r=PG&f=1", "display_name": "nomad", "link": "https://stackoverflow.com/users/7565818/nomad"}, "reply_to_user": {"reputation": 51822, "user_id": 1552748, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7840b7a3579d2a7065d5c0aa804b5b92?s=128&d=identicon&r=PG", "display_name": "Paul H", "link": "https://stackoverflow.com/users/1552748/paul-h"}, "edited": false, "score": 0, "creation_date": 1488816809, "post_id": 42543131, "comment_id": 72388636, "body": "@PaulH I tried showing the problem in a way you mentioned but that way I issue is not there. But when I read the excel using read_excel, the column is read as dtype: float64."}], "answers": [{"tags": [], "owner": {"reputation": 1663, "user_id": 1239729, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/B42R0.png?s=128&g=1", "display_name": "Alexander Reshytko", "link": "https://stackoverflow.com/users/1239729/alexander-reshytko"}, "is_accepted": false, "score": -1, "last_activity_date": 1488406942, "creation_date": 1488406942, "answer_id": 42543254, "question_id": 42543131, "link": "https://stackoverflow.com/questions/42543131/pandas-automatically-converting-my-string-column-to-float/42543254#42543254", "title": "pandas automatically converting my string column to float", "body": "<p>try this:</p>\n\n<pre><code>df = df.astype(str)\n</code></pre>\n\n<p><em>note that this is VERY ineffective</em></p>\n\n<p>or convert each value to <code>int</code> before insert them into query</p>\n"}, {"tags": [], "owner": {"reputation": 783, "user_id": 7565818, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/baba7f06f1273317cc6e682884711879?s=128&d=identicon&r=PG&f=1", "display_name": "nomad", "link": "https://stackoverflow.com/users/7565818/nomad"}, "is_accepted": true, "score": 4, "last_activity_date": 1488819076, "creation_date": 1488819076, "answer_id": 42631160, "question_id": 42543131, "link": "https://stackoverflow.com/questions/42543131/pandas-automatically-converting-my-string-column-to-float/42631160#42631160", "title": "pandas automatically converting my string column to float", "body": "<p>I found the solution myself, posting here to document it. </p>\n\n<pre><code>df = pd.read_excel(file_name, converters={'Billing Doc.' : str})\nprint(df['Billing Doc.'])\n\n695    3251631331\n696    3252012614\n697           NaN\n698    3252272451\n699    3252359504\n700    3252473894\n701           NaN\n702           NaN\n703           NaN\n704    3252652940\n705           NaN\n706           NaN\n707           NaN\n708           NaN\nName: Billing Doc., dtype: object\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 357, "user_id": 4505301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zko8X.jpg?s=128&g=1", "display_name": "crinix", "link": "https://stackoverflow.com/users/4505301/crinix"}, "is_accepted": false, "score": 0, "last_activity_date": 1600332005, "creation_date": 1600332005, "answer_id": 63934341, "question_id": 42543131, "link": "https://stackoverflow.com/questions/42543131/pandas-automatically-converting-my-string-column-to-float/63934341#63934341", "title": "pandas automatically converting my string column to float", "body": "<p>Something similar happened to me because the index of new column was not matching the index of original dataframe, which resulted in NaNs, which caused automatic broadcasting to float. Therefore, check if:</p>\n<ul>\n<li>index of original dataframe and the new column matches</li>\n<li>new column contains NaNs.</li>\n</ul>\n"}], "owner": {"reputation": 783, "user_id": 7565818, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/baba7f06f1273317cc6e682884711879?s=128&d=identicon&r=PG&f=1", "display_name": "nomad", "link": "https://stackoverflow.com/users/7565818/nomad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5608, "favorite_count": 0, "accepted_answer_id": 42631160, "answer_count": 3, "score": 4, "last_activity_date": 1600332005, "creation_date": 1488406459, "last_edit_date": 1488816985, "question_id": 42543131, "link": "https://stackoverflow.com/questions/42543131/pandas-automatically-converting-my-string-column-to-float", "title": "pandas automatically converting my string column to float", "body": "<p>What can I do to prevent pandas from converting my string values to float. The column <code>Billing Doc.</code> and <code>Sales Order</code> contain number 10-11 digit numbers which are to be stored in MySQL table inside a column which has a datatype of CHAR(15). When I execute the following script, I see <code>.0</code> at the end of each number. I want to treat them as string/char in our db.\nThe <code>Billing Doc.</code> field contains numbers like <code>3206790137, 3209056079, 3209763880, 3209763885, 3206790137</code> who is stored in DB as <code>3206790137.0, 3209056079.0, 3209763880.0, 3209763885.0, 3206790137.0</code>. The column data type for Billing doc in database is <code>CHAR(15)</code>.</p>\n\n<pre><code>def insert_billing(df):\n        df = df.where((pd.notnull(df)), None)\n        for row in df.to_dict(orient=\"records\"):\n            bill_item = row['Bill.Item']\n            bill_qty = row['Billed Qty']\n            bill_doct_date = row['Billi.Doc.Date']\n            bill_doc = row['Billing Doc.']\n            bill_net_value = row['Billi.Net Value']\n            sales_order = row['Sales Order']\n            import_date = DT.datetime.now().strftime('%Y-%m-%d')\n\n\n            query = \"INSERT INTO sap_billing(\" \\\n                    \"bill_item, \" \\\n                    \"bill_qty, \" \\\n                    \"bill_doc_date, \" \\\n                    \"bill_doc, \" \\\n                    \"bill_net_value, \" \\\n                    \"sales_order, \" \\\n                    \"import_date\" \\\n                    \") VALUES (\" \\\n                    \"\\\"{}\\\", \\\"{}\\\", \\\"{}\\\", \\\"{}\\\",\" \\\n                    \"\\\"{}\\\", \\\"{}\\\", \\\"{}\\\"\" \\\n                    \") ON DUPLICATE KEY UPDATE \" \\\n                    \"bill_qty = VALUES(bill_qty), \" \\\n                    \"bill_doc_date = VALUES(bill_doc_date), \" \\\n                    \"bill_net_value = VALUES(bill_net_value), \" \\\n                    \"import_date = VALUES(import_date) \" \\\n                    \"\".format(\n                        bill_item,\n                        bill_qty,\n                        bill_doct_date,\n                        bill_doc,\n                        bill_net_value,\n                        sales_order,\n                        import_date\n                        )\n            query = query.replace('\\\"None\\\"', 'NULL')\n            query = query.replace('(None', '(NULL')\n            query = query.replace('\\\"NaT\\\"', 'NULL')\n            query = query.replace('(NaT', '(NULL')\n\n            try:\n                q1 = gesdb_connection.execute(query)\n            except Exception as e:\n                print(bill_item, bill_doc, sales_order, e)\n\n\n\n    if __name__ == \"__main__\":\n        engine_str = 'mysql+mysqlconnector://root:abc123@localhost/mydb'\n\n        file_name = \"tmp/dataload/so_tracking.XLSX\"\n        df = pd.read_excel(file_name)\n        if df.shape[1] == 35 and compare_columns(list(df.columns.values)) == 1:\n            insert_billing(df)\n        else:\n            print(\"Incorrect column count, column order or column headers.\\n\")\n</code></pre>\n\n<p>When I create a simple df and print it the problem does not show up.</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame({'Sales Order': [1217252835, 1217988754, 1219068439], \n                   'Billing Doc.': [3222102723, 3209781889, 3214305818]})\n    &gt;&gt;&gt; df\n   Billing Doc.  Sales Order\n0    3222102723   1217252835\n1    3209781889   1217988754\n2    3214305818   1219068439\n</code></pre>\n\n<p>However, when I read through excel and then print it, the column is read as float64.</p>\n\n<pre><code> file_name = \"tmp/dataload/so_tracking.XLSX\"\n    df = pd.read_excel(file_name)\n    print(df['Billing Doc.'])\n\n680    3.252170e+09\n681    3.252170e+09\n682    3.252170e+09\n683    3.252170e+09\n684    3.252170e+09\n685    3.252170e+09\n686    3.252170e+09\n687    3.252170e+09\n688    3.252170e+09\n689    3.252170e+09\n690    3.252170e+09\n.\n.\n.\n694    3.251601e+09\n695    3.251631e+09\n696    3.252013e+09\n697             NaN\n698    3.252272e+09\n699    3.252360e+09\n700    3.252474e+09\n.\n.\nName: Billing Doc., dtype: float64\n</code></pre>\n"}, {"tags": ["python", "scipy", "scikit-learn", "dbscan"], "comments": [{"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1488418990, "post_id": 42543125, "comment_id": 72226284, "body": "what is <code>idxs</code> in <code>fit_predict(tfidf[idxs])</code>. Are you using only some values from tfidf?"}, {"owner": {"reputation": 1654, "user_id": 2453555, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i7avC.png?s=128&g=1", "display_name": "Parzival", "link": "https://stackoverflow.com/users/2453555/parzival"}, "reply_to_user": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1488460300, "post_id": 42543125, "comment_id": 72247075, "body": "<code>idxs</code> a list of indices (yes, I&#39;m using only some values from tfidf - it has a total of ~163k documents, but I&#39;m using only ~107k of them)"}, {"owner": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1488461064, "post_id": 42543125, "comment_id": 72247562, "body": "Have you tried updating scipy and scikit version?"}, {"owner": {"reputation": 1654, "user_id": 2453555, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i7avC.png?s=128&g=1", "display_name": "Parzival", "link": "https://stackoverflow.com/users/2453555/parzival"}, "reply_to_user": {"reputation": 28829, "user_id": 3374996, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ijirj.png?s=128&g=1", "display_name": "Vivek Kumar", "link": "https://stackoverflow.com/users/3374996/vivek-kumar"}, "edited": false, "score": 0, "creation_date": 1488462084, "post_id": 42543125, "comment_id": 72248361, "body": "They are both up-to-date (v0.18.1)."}, {"owner": {"reputation": 5902, "user_id": 749288, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/352473a156a6dab1bcbc99d9f2f27a01?s=128&d=identicon&r=PG", "display_name": "sergzach", "link": "https://stackoverflow.com/users/749288/sergzach"}, "edited": false, "score": 0, "creation_date": 1488541339, "post_id": 42543125, "comment_id": 72288480, "body": "What is <code>tfidf</code>? Print <code>type(tfidf)</code> and <code>tfidf.shape</code>."}, {"owner": {"reputation": 1654, "user_id": 2453555, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i7avC.png?s=128&g=1", "display_name": "Parzival", "link": "https://stackoverflow.com/users/2453555/parzival"}, "edited": false, "score": 0, "creation_date": 1488547161, "post_id": 42543125, "comment_id": 72292426, "body": "<code>type(tfidf)</code>: <code>scipy.sparse.csr.csr_matrix</code> <code>tfidf.shape</code>: <code>(163405, 13029)</code>"}, {"owner": {"reputation": 1633, "user_id": 3022712, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/eadc29ffebbca6135b8e45373d159112?s=128&d=identicon&r=PG&f=1", "display_name": "yar", "link": "https://stackoverflow.com/users/3022712/yar"}, "edited": false, "score": 0, "creation_date": 1488827626, "post_id": 42543125, "comment_id": 72395117, "body": "@Parzival did you try to place a breakpoint at the position where the error occurs? Then have a look at the parameters that are passed to the function where the error occurs. They should be strange. I they do not appear strange to you, please post them here."}, {"owner": {"reputation": 1654, "user_id": 2453555, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i7avC.png?s=128&g=1", "display_name": "Parzival", "link": "https://stackoverflow.com/users/2453555/parzival"}, "edited": false, "score": 0, "creation_date": 1488908587, "post_id": 42543125, "comment_id": 72435401, "body": "Ok, took me forever to zero in on it but the cutoff is 65805 - that&#39;s the maximum number of documents I can clusterize without getting that error message. The parameter passed to the <code>toarray()</code> method is a <code>scipy.sparse.coo.coo_matrix</code> with as many rows as documents; it doesn&#39;t look weird at all."}, {"owner": {"reputation": 1654, "user_id": 2453555, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i7avC.png?s=128&g=1", "display_name": "Parzival", "link": "https://stackoverflow.com/users/2453555/parzival"}, "edited": false, "score": 0, "creation_date": 1488909773, "post_id": 42543125, "comment_id": 72436024, "body": "Wait, no, the problematic method is actually a bit further downstream - <code>coo_todense</code>. It receives as parameters <code>M</code> and <code>N</code>, where <code>M</code> is the number of documents and <code>N</code> is <code>M</code> divided by some number that keeps changing (1, 10, or 100); <code>self.row</code>, <code>self.col</code>, and <code>self.data</code>, which together form a distance matrix; <code>B.ravel(&#39;A&#39;)</code>, which I have no idea what it is (it&#39;s a vector of sorts, but I don&#39;t know what it represents); and <code>fortran</code>, which is an <code>int</code> that&#39;s always 0 in my case. None of these arguments look weird, whether I have 65805 documents or more."}, {"owner": {"reputation": 1136, "user_id": 6084245, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/a9d8725b1bb91943421a0615a94839be?s=128&d=identicon&r=PG&f=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/6084245/robin"}, "edited": false, "score": 0, "creation_date": 1489403389, "post_id": 42543125, "comment_id": 72639488, "body": "Could you print the output of: import numpy as np /  print(np.intp)"}, {"owner": {"reputation": 1654, "user_id": 2453555, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i7avC.png?s=128&g=1", "display_name": "Parzival", "link": "https://stackoverflow.com/users/2453555/parzival"}, "edited": false, "score": 0, "creation_date": 1489431925, "post_id": 42543125, "comment_id": 72658421, "body": "&lt;class &#39;numpy.int64&#39;&gt;"}, {"owner": {"reputation": 8288, "user_id": 1939754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4b0c28eb357bb2ad8dee40d974871340?s=128&d=identicon&r=PG", "display_name": "Erich Schubert", "link": "https://stackoverflow.com/users/1939754/erich-schubert"}, "edited": false, "score": 0, "creation_date": 1489758897, "post_id": 42543125, "comment_id": 72824851, "body": "For efficiency reasons, you don&#39;t want it to have to convert to a dense matrix, nor to compute a pairwise distance matrix (which would be 163405 x 153405)"}], "answers": [{"tags": [], "owner": {"reputation": 35343, "user_id": 163740, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/aee56554ec30edfd680e1c937ed4e54d?s=128&d=identicon&r=PG", "display_name": "ogrisel", "link": "https://stackoverflow.com/users/163740/ogrisel"}, "is_accepted": true, "score": 3, "last_activity_date": 1491904342, "last_edit_date": 1491904342, "creation_date": 1491830056, "answer_id": 43324182, "question_id": 42543125, "link": "https://stackoverflow.com/questions/42543125/could-not-convert-integer-scalar-error-when-using-dbscan/43324182#43324182", "title": "&quot;could not convert integer scalar&quot; error when using DBSCAN", "body": "<p>Even if the implementation would allow it, <code>DBSCAN</code> would probably yield bad results on such very high dimensional data (from a statistical point of view, because of the curse of dimensionality).</p>\n\n<p>Instead I would advise you to use the <code>TruncatedSVD</code> class to reduce the dimensionality of your TF-IDF feature vectors down to 50 or 100 components and then to apply <code>DBSCAN</code> on the results.</p>\n"}], "owner": {"reputation": 1654, "user_id": 2453555, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/i7avC.png?s=128&g=1", "display_name": "Parzival", "link": "https://stackoverflow.com/users/2453555/parzival"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 1, "accepted_answer_id": 43324182, "answer_count": 1, "score": 6, "last_activity_date": 1491904342, "creation_date": 1488406434, "last_edit_date": 1495542741, "question_id": 42543125, "link": "https://stackoverflow.com/questions/42543125/could-not-convert-integer-scalar-error-when-using-dbscan", "title": "&quot;could not convert integer scalar&quot; error when using DBSCAN", "body": "<p>I'm trying to use scikit-learn's DBSCAN implementation to clusterize a bunch of documents. First I create the TF-IDF matrix using scikit-learn's TfidfVectorizer (it's a 163405x13029 sparse matrix of type numpy.float64). Then I try to clusterize specific subsets of this matrix. Things work fine when the subset is small (say, up to a few thousand rows). But with large subsets (with tens of thousands of rows) I get <code>ValueError: could not convert integer scalar</code>. </p>\n\n<p>Here's the full traceback (<code>idxs</code> is a list of indices):</p>\n\n<hr>\n\n<pre><code>ValueError                        Traceback (most recent call last)\n&lt;ipython-input-1-73ee366d8de5&gt; in &lt;module&gt;()\n    193     # use descriptions to clusterize items\n    194     ncm_clusterizer = DBSCAN()\n--&gt; 195     ncm_clusterizer.fit_predict(tfidf[idxs])\n    196     idxs_clusters = list(zip(idxs, ncm_clusterizer.labels_))\n    197     for e in idxs_clusters:\n\n/usr/local/lib/python3.4/site-packages/sklearn/cluster/dbscan_.py in fit_predict(self, X, y, sample_weight)\n    294             cluster labels\n    295         \"\"\"\n--&gt; 296         self.fit(X, sample_weight=sample_weight)\n    297         return self.labels_\n\n/usr/local/lib/python3.4/site-packages/sklearn/cluster/dbscan_.py in fit(self, X, y, sample_weight)\n    264         X = check_array(X, accept_sparse='csr')\n    265         clust = dbscan(X, sample_weight=sample_weight,\n--&gt; 266                        **self.get_params())\n    267         self.core_sample_indices_, self.labels_ = clust\n    268         if len(self.core_sample_indices_):\n\n/usr/local/lib/python3.4/site-packages/sklearn/cluster/dbscan_.py in dbscan(X, eps, min_samples, metric, algorithm, leaf_size, p, sample_weight, n_jobs)\n    136         # This has worst case O(n^2) memory complexity\n    137         neighborhoods = neighbors_model.radius_neighbors(X, eps,\n--&gt; 138                                                          return_distance=False)\n    139 \n    140     if sample_weight is None:\n\n/usr/local/lib/python3.4/site-packages/sklearn/neighbors/base.py in radius_neighbors(self, X, radius, return_distance)\n    584             if self.effective_metric_ == 'euclidean':\n    585                 dist = pairwise_distances(X, self._fit_X, 'euclidean',\n--&gt; 586                                           n_jobs=self.n_jobs, squared=True)\n    587                 radius *= radius\n    588             else:\n\n/usr/local/lib/python3.4/site-packages/sklearn/metrics/pairwise.py in pairwise_distances(X, Y, metric, n_jobs, **kwds)\n   1238         func = partial(distance.cdist, metric=metric, **kwds)\n   1239 \n-&gt; 1240     return _parallel_pairwise(X, Y, func, n_jobs, **kwds)\n   1241 \n   1242 \n\n/usr/local/lib/python3.4/site-packages/sklearn/metrics/pairwise.py in _parallel_pairwise(X, Y, func, n_jobs, **kwds)\n   1081     if n_jobs == 1:\n   1082         # Special case to avoid picklability checks in delayed\n-&gt; 1083         return func(X, Y, **kwds)\n   1084 \n   1085     # TODO: in some cases, backend='threading' may be appropriate\n\n/usr/local/lib/python3.4/site-packages/sklearn/metrics/pairwise.py in euclidean_distances(X, Y, Y_norm_squared, squared, X_norm_squared)\n    243         YY = row_norms(Y, squared=True)[np.newaxis, :]\n    244 \n--&gt; 245     distances = safe_sparse_dot(X, Y.T, dense_output=True)\n    246     distances *= -2\n    247     distances += XX\n\n/usr/local/lib/python3.4/site-packages/sklearn/utils/extmath.py in safe_sparse_dot(a, b, dense_output)\n    184         ret = a * b\n    185         if dense_output and hasattr(ret, \"toarray\"):\n--&gt; 186             ret = ret.toarray()\n    187         return ret\n    188     else:\n\n/usr/local/lib/python3.4/site-packages/scipy/sparse/compressed.py in toarray(self, order, out)\n    918     def toarray(self, order=None, out=None):\n    919         \"\"\"See the docstring for `spmatrix.toarray`.\"\"\"\n--&gt; 920         return self.tocoo(copy=False).toarray(order=order, out=out)\n    921 \n    922     ##############################################################\n\n/usr/local/lib/python3.4/site-packages/scipy/sparse/coo.py in toarray(self, order, out)\n    256         M,N = self.shape\n    257         coo_todense(M, N, self.nnz, self.row, self.col, self.data,\n--&gt; 258                     B.ravel('A'), fortran)\n    259         return B\n    260 \n\nValueError: could not convert integer scalar\n</code></pre>\n\n<p>I'm using Python 3.4.3 (on Red Hat), scipy 0.18.1, and scikit-learn 0.18.1.</p>\n\n<p>I tried the monkey patch suggested <a href=\"https://stackoverflow.com/a/31808965/2453555\">here</a> but that didn't work.</p>\n\n<p>Googling around I found a <a href=\"https://github.com/scipy/scipy/pull/4678/files\" rel=\"nofollow noreferrer\">bugfix</a> that apparently solved the same problem for other types of sparse matrices (like csr), but not for coo.</p>\n\n<p>I've tried feeding DBSCAN a sparse radius neighborhood graph (instead of a feature matrix), as suggested <a href=\"http://scikit-learn.org/stable/modules/clustering.html#dbscan\" rel=\"nofollow noreferrer\">here</a>, but the same error happens.</p>\n\n<p>I've tried <a href=\"https://github.com/lmcinnes/hdbscan\" rel=\"nofollow noreferrer\">HDBSCAN</a>, but the same error happens.</p>\n\n<p>How can I fix this or bypass this?</p>\n"}, {"tags": ["python", "django", "django-views"], "answers": [{"comments": [{"owner": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 0, "creation_date": 1488406353, "post_id": 42543081, "comment_id": 72221986, "body": "I do hope the htmls they are rendering for both views are the same"}, {"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "reply_to_user": {"reputation": 71409, "user_id": 3125566, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QcWOt.jpg?s=128&g=1", "display_name": "Moses Koledoye", "link": "https://stackoverflow.com/users/3125566/moses-koledoye"}, "edited": false, "score": 0, "creation_date": 1488406404, "post_id": 42543081, "comment_id": 72222017, "body": "@MosesKoledoye - True, but from their use case description, I can&#39;t see a reason for them not to be (else just set two variables here for the template name)"}], "tags": [], "owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "is_accepted": true, "score": 3, "last_activity_date": 1488406353, "last_edit_date": 1488406353, "creation_date": 1488406235, "answer_id": 42543081, "question_id": 42543053, "link": "https://stackoverflow.com/questions/42543053/how-do-i-show-one-page-to-logged-in-user-and-another-to-a-not-logged-in-user-wit/42543081#42543081", "title": "How do I show one page to logged-in user and another to a not-logged in user with Django?", "body": "<p>It doesn't make sense to have two views, just set the movements dependant on whether you're authenticated in the single view</p>\n\n<pre><code>if request.user.is_authenticated():\n    movements = Movement.objects.filter(author=request.user).order_by('-moved_on')\nelse:\n    movements = Movement.objects.order_by('?')[:10]\n</code></pre>\n"}], "owner": {"reputation": 2974, "user_id": 4351030, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/5wjLY.jpg?s=128&g=1", "display_name": "Steven", "link": "https://stackoverflow.com/users/4351030/steven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 42543081, "answer_count": 1, "score": 2, "last_activity_date": 1488406353, "creation_date": 1488406120, "question_id": 42543053, "link": "https://stackoverflow.com/questions/42543053/how-do-i-show-one-page-to-logged-in-user-and-another-to-a-not-logged-in-user-wit", "title": "How do I show one page to logged-in user and another to a not-logged in user with Django?", "body": "<p>I'm confident that this question has been asked before, but I can't find an answer here.</p>\n\n<p><strong>The goal</strong>: show a user that isn't logged in a random assortment of posts but a user that <em>is</em> logged in all of their own posts.</p>\n\n<p>The two views from views.py:</p>\n\n<pre><code>def movement_random(request):\n    movements = Movement.objects.order_by('?')[:10]\n    return render(request, 'blog/movement_random.html', {'movements': movements})\n\n@login_required\ndef movement_list(request):\n    movements = Movement.objects.filter(author=request.user).order_by('-moved_on')\n    return render(request, 'blog/movement_list.html', {'movements': movements})\n</code></pre>\n\n<p>From urls.py:</p>\n\n<p>from django.conf.urls import url, include\nfrom . import views</p>\n\n<pre><code>urlpatterns = [\n    url(r'^$', views.movement_random, name='index'),\n    url(r'^$', views.movement_list, name='movement_list'), \n    url(r'^movement/(?P&lt;pk&gt;\\d+)/$', views.movement_detail, name='movement_detail'),\n    url(r'^movement/new/$', views.movement_new, name='movement_new'),\n    url(r'^movement/(?P&lt;pk&gt;\\d+)/edit/$', views.movement_edit, name='movement_edit'),\n    url(r'^accounts/', include('registration.backends.hmac.urls')),\n]\n</code></pre>\n\n<p>As it stand right now, the \"homepage\" for the app is, right now, always the first URL, even with a logged-in user.  How do I show the <code>views.movement_list</code> to a logged-in user while the <code>views.movement_random</code> to a non-user?</p>\n"}, {"tags": ["python", "string", "psycopg2", "psql", "jsonb"], "answers": [{"tags": [], "owner": {"reputation": 3438, "user_id": 2205785, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FY5zS.png?s=128&g=1", "display_name": "pbuck", "link": "https://stackoverflow.com/users/2205785/pbuck"}, "is_accepted": false, "score": 0, "last_activity_date": 1488406688, "creation_date": 1488406688, "answer_id": 42543181, "question_id": 42543027, "link": "https://stackoverflow.com/questions/42543027/string-creating-for-jsonb-query-using-psycopg2/42543181#42543181", "title": "string creating for jsonb query using psycopg2", "body": "<p>You're using <code>\"...\".format()</code>, so you should double the literal <code>{}</code> to escape them.</p>\n\n<pre><code>...\nsubmited_jsonb @&gt; '{{\"Type\":[\"New\"]}}'\n...\n</code></pre>\n"}], "owner": {"reputation": 2821, "user_id": 1972924, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e1071145112b4f0fcd83e78cabe98aab?s=128&d=identicon&r=PG", "display_name": "Kush Patel", "link": "https://stackoverflow.com/users/1972924/kush-patel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1488406688, "creation_date": 1488406005, "question_id": 42543027, "link": "https://stackoverflow.com/questions/42543027/string-creating-for-jsonb-query-using-psycopg2", "title": "string creating for jsonb query using psycopg2", "body": "<p>I have following query with works in db</p>\n\n<pre><code>SELECT count(*) as count\nFROM data\nWHERE name ='user' AND\n      dt &gt; date_trunc('month', current_timestamp) AND \n      submited_jsonb @&gt; '{\"Type\":[\"New\"]}'\nGROUP BY mage, date_trunc('day', dt)\n</code></pre>\n\n<p>Now following in my python version where I have to pass just name</p>\n\n<pre><code>query = \"\"\"SELECT count(*) as count\n           FROM data\n           WHERE name ='{0}' AND\n                 dt &gt; date_trunc('month', current_timestamp) AND \n                 submited_jsonb @&gt; '{\"Type\":[\"New\"]}'\n           GROUP BY mage, date_trunc('day', dt)\"\"\".format(user)\n</code></pre>\n\n<p>However above string thowing following error </p>\n\n<pre><code>ERROR:root:An unexpected error occurred while tokenizing input\nThe following traceback may be corrupted or invalid\nThe error message is: ('EOF in multi-line string', (1, 12))\n</code></pre>\n\n<p>I have reduce error to following line \n'{\"Type\":[\"New\"]}' in string. </p>\n\n<p>What should I do ?</p>\n"}, {"tags": ["python", "passwords", "automated-tests", "robotframework", "credentials"], "comments": [{"owner": {"reputation": 1927, "user_id": 4278756, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/4oN7C.png?s=128&g=1", "display_name": "Goralight", "link": "https://stackoverflow.com/users/4278756/goralight"}, "edited": false, "score": 1, "creation_date": 1488445637, "post_id": 42543026, "comment_id": 72237198, "body": "Could just store them in a database somewhere (unencrypted) and pull it like that using the DatabaseLibrary... I mean, it&#39;s not secure but at least you don&#39;t have to store them locally per testing instance... <a href=\"http://franz-see.github.io/Robotframework-Database-Library/api/0.5/DatabaseLibrary.html\" rel=\"nofollow noreferrer\">franz-see.github.io/Robotframework-Database-Library/api/0.5/&zwnj;&#8203;&hellip;</a>"}, {"owner": {"reputation": 1020, "user_id": 4269725, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/931860b057bebbe7cb926856f0fb4684?s=128&d=identicon&r=PG&f=1", "display_name": "Sarada Akurathi", "link": "https://stackoverflow.com/users/4269725/sarada-akurathi"}, "edited": false, "score": 0, "creation_date": 1488518813, "post_id": 42543026, "comment_id": 72276101, "body": "Could store the details in resource file and import that into script as <code>&#39;Resource    ResourceFile&#39;</code>, this can be another solution"}, {"owner": {"reputation": 6256, "user_id": 6152737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33da1278c7af36224a140b18695ade6d?s=128&d=identicon&r=PG&f=1", "display_name": "A. Kootstra", "link": "https://stackoverflow.com/users/6152737/a-kootstra"}, "reply_to_user": {"reputation": 1020, "user_id": 4269725, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/931860b057bebbe7cb926856f0fb4684?s=128&d=identicon&r=PG&f=1", "display_name": "Sarada Akurathi", "link": "https://stackoverflow.com/users/4269725/sarada-akurathi"}, "edited": false, "score": 0, "creation_date": 1488574151, "post_id": 42543026, "comment_id": 72308519, "body": "@SaradaAkurathi whether I use a resource file, or a variable file (as I do today) is from a security point of view the same. They&#39;re both unencrypted, decentralised storage of credentials. Something I&#39;m trying to prevent."}], "owner": {"reputation": 6256, "user_id": 6152737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/33da1278c7af36224a140b18695ade6d?s=128&d=identicon&r=PG&f=1", "display_name": "A. Kootstra", "link": "https://stackoverflow.com/users/6152737/a-kootstra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 644, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1488406005, "creation_date": 1488406005, "question_id": 42543026, "link": "https://stackoverflow.com/questions/42543026/what-is-the-recommended-approach-to-using-and-storing-credentials-for-robot-fram", "title": "What is the recommended approach to using and storing credentials for Robot Framework Tests", "body": "<p>Most tests are run using some kind of credentials or keys to access the system under test. When the same suite of tests is run against several different environments, this management of credentials becomes more important. </p>\n\n<p>Presently we are using a Robot Framework variable file to store them locally. But this requires a file per environment, or a single file with a master switch. This works, but is not a secure solution. For this reason I'm seeking your input. </p>\n\n<p>Several solutions seem to be out there, HashiCorp's Vault being one of them, that help with this management of credentials and seek your feedback on what works for you and why. If possible within the context of Robot Framework but generic solutions with Python will work too.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 5, "creation_date": 1488405850, "post_id": 42542982, "comment_id": 72221756, "body": "Try <code>function(age=200)</code>"}, {"owner": {"reputation": 153, "user_id": 4249399, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/4VQtq.jpg?s=128&g=1", "display_name": "DJSweetness", "link": "https://stackoverflow.com/users/4249399/djsweetness"}, "reply_to_user": {"reputation": 36413, "user_id": 2301450, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/4xgoZ.png?s=128&g=1", "display_name": "vaultah", "link": "https://stackoverflow.com/users/2301450/vaultah"}, "edited": false, "score": 0, "creation_date": 1488405892, "post_id": 42542982, "comment_id": 72221772, "body": "Yep. That&#39;s it. Thank you! I tried NULL and None and just couldn&#39;t think of what it might be."}], "answers": [{"tags": [], "owner": {"reputation": 1661, "user_id": 3646485, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5dcdad9655553f3f4bd76c0bad18add5?s=128&d=identicon&r=PG", "display_name": "Hans", "link": "https://stackoverflow.com/users/3646485/hans"}, "is_accepted": true, "score": 3, "last_activity_date": 1488408452, "last_edit_date": 1488408452, "creation_date": 1488406165, "answer_id": 42543061, "question_id": 42542982, "link": "https://stackoverflow.com/questions/42542982/what-to-put-to-default-first-argument-and-not-second-in-python/42543061#42543061", "title": "What to put to default first argument and not second in python?", "body": "<p>The proper way to call the above function without the <code>name</code> parameter, is to specify the parameter you would like to change the default value of, as is done below. </p>\n\n<pre><code>function(age=200)\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 4249399, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/4VQtq.jpg?s=128&g=1", "display_name": "DJSweetness", "link": "https://stackoverflow.com/users/4249399/djsweetness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 42543061, "answer_count": 1, "score": 0, "last_activity_date": 1488411881, "creation_date": 1488405805, "last_edit_date": 1488411881, "question_id": 42542982, "link": "https://stackoverflow.com/questions/42542982/what-to-put-to-default-first-argument-and-not-second-in-python", "title": "What to put to default first argument and not second in python?", "body": "<p>Let's say I have a function</p>\n\n<pre><code>def function(name=\"Default\", age=16):\n    print(\"My name is\", name, \"and I am\", age)\n</code></pre>\n\n<p>How do I call the function to default the first parameter, but not the second? In the above function, I would like to have name be its default value (<code>\"Default\"</code>), but input the age as <code>200</code>. </p>\n\n<p>I have already tried <code>function(,200)</code>; however, it says <code>SyntaxError: invalid syntax</code>, pointing at the <code>,</code> in the method call. </p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488405787, "post_id": 42542914, "comment_id": 72221725, "body": "Why not just <code>x = well.k</code> and <code>y = well.por</code>?"}, {"owner": {"reputation": 371, "user_id": 4585008, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-dJDHYRnOVFQ/AAAAAAAAAAI/AAAAAAAADNs/f-8lR1mh0i0/photo.jpg?sz=128", "display_name": "fonsi", "link": "https://stackoverflow.com/users/4585008/fonsi"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1488415710, "post_id": 42542914, "comment_id": 72225465, "body": "Yes, that works too. I still have trouble getting ACE to work, though."}, {"owner": {"reputation": 730, "user_id": 1034648, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a49ce3e11cf0488e31d2edd3bf4a3671?s=128&d=identicon&r=PG", "display_name": "MyCarta", "link": "https://stackoverflow.com/users/1034648/mycarta"}, "edited": false, "score": 0, "creation_date": 1503585388, "post_id": 42542914, "comment_id": 78687217, "body": "Did the answer solve your problem?"}, {"owner": {"reputation": 371, "user_id": 4585008, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-dJDHYRnOVFQ/AAAAAAAAAAI/AAAAAAAADNs/f-8lR1mh0i0/photo.jpg?sz=128", "display_name": "fonsi", "link": "https://stackoverflow.com/users/4585008/fonsi"}, "edited": false, "score": 0, "creation_date": 1503675309, "post_id": 42542914, "comment_id": 78728539, "body": "Yes, it did. One issue I am still having is how to evaluate values that are outside the original x-values. i.e. <code>myace.eval([200])</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1766, "user_id": 2626968, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fd9acb85927d46b2a5a370a2fa6824e?s=128&d=identicon&r=PG", "display_name": "davidshinn", "link": "https://stackoverflow.com/users/2626968/davidshinn"}, "is_accepted": true, "score": 2, "last_activity_date": 1495135298, "creation_date": 1495135298, "answer_id": 44056208, "question_id": 42542914, "link": "https://stackoverflow.com/questions/42542914/application-of-python-alternating-conditional-expectation-ace-algorithm/44056208#44056208", "title": "Application of Python Alternating Conditional Expectation (ACE) algorithm", "body": "<p>The <code>x_values</code> argument for <code>build_model_from_xy</code> appears to require an iterator, as if it is iterating through the list of x variables.  So, the following replacement for your last line should work:</p>\n\n<pre><code>myace.build_model_from_xy([x], y)\n</code></pre>\n\n<p>Note that the x from the sample code (<code>wang04.build_sample_ace_problem_wang04(N=200)</code>) is, in fact, a list of arrays.</p>\n"}], "owner": {"reputation": 371, "user_id": 4585008, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh4.googleusercontent.com/-dJDHYRnOVFQ/AAAAAAAAAAI/AAAAAAAADNs/f-8lR1mh0i0/photo.jpg?sz=128", "display_name": "fonsi", "link": "https://stackoverflow.com/users/4585008/fonsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 1, "accepted_answer_id": 44056208, "answer_count": 1, "score": 2, "last_activity_date": 1495135298, "creation_date": 1488405548, "question_id": 42542914, "link": "https://stackoverflow.com/questions/42542914/application-of-python-alternating-conditional-expectation-ace-algorithm", "title": "Application of Python Alternating Conditional Expectation (ACE) algorithm", "body": "<p>I am trying to apply the ACE algorithm outlined here: <a href=\"https://pypi.python.org/pypi/ace/0.3\" rel=\"nofollow noreferrer\">https://pypi.python.org/pypi/ace/0.3</a></p>\n\n<p>Here is the code from the sample page, which works:</p>\n\n<pre><code>from ace.samples import wang04\nx, y = wang04.build_sample_ace_problem_wang04(N=200)\n\nfrom ace import model\nmyace = model.Model()\nmyace.build_model_from_xy(x, y)\n</code></pre>\n\n<p>Here is the code that I am trying to run: </p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nfrom ace import model\n\nfilename = 'G_perm.txt'\n\nwell = pd.read_csv(filename, sep=\"\\s+\", error_bad_lines=False)\nwell.columns = [\"k\", \"por\"]\n\nx = np.zeros(len(well))\ny = np.zeros(len(well))\n\nfor i in range(len(well)):\n    x[i] = well.k[i] \n    y[i] = well.por[i]\n\nmyace = model.Model()\nmyace.build_model_from_xy(x, y)\n</code></pre>\n\n<p>Here is a sample of the txt file, with 162 lines: </p>\n\n<pre><code>k       por\n306.0   26.3\n61.0    25.4\n1059.0  30.9\n1120.0  30.0\n540.0   29.8\n272.0   27.0\n430.0   28.3\n84.0    25.6\n788.0   30.2\n490.0   28.7\n541.0   28.8\n</code></pre>\n\n<p>When I try running the code, I get <code>list index out of range</code> \nHas anyone implemented ACE successfully with Pandas and Numpy?</p>\n"}, {"tags": ["python", "django", "django-migrations"], "comments": [{"owner": {"reputation": 10207, "user_id": 5113242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eead101dcb134792a08d0e4d21e40ebf?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5113242/anonymous"}, "edited": false, "score": 0, "creation_date": 1488411887, "post_id": 42542898, "comment_id": 72224282, "body": "Try running <code>sqlmigrate</code> and see what it says. Sometimes I have random migrations generated when I use something like <code>choices=a_dict.items()</code> and it returns the choices in a different order than before. Until Python 3.6, the order is undefined so this is expected behavior, I use <code>OrderedDict</code> for such things now."}, {"owner": {"reputation": 991, "user_id": 1849805, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4509c5dfb4baf75b4da654ac90d94a4c?s=128&d=identicon&r=PG", "display_name": "Vic Nicethemer", "link": "https://stackoverflow.com/users/1849805/vic-nicethemer"}, "reply_to_user": {"reputation": 10207, "user_id": 5113242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eead101dcb134792a08d0e4d21e40ebf?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/5113242/anonymous"}, "edited": false, "score": 0, "creation_date": 1488442776, "post_id": 42542898, "comment_id": 72235351, "body": "@Anonymous ok, i have choices, but what about ManyToManyField - there is no any choices"}], "answers": [{"tags": [], "owner": {"reputation": 4680, "user_id": 6515755, "user_type": "registered", "profile_image": "https://graph.facebook.com/1064376696971764/picture?type=large", "display_name": "Ryabchenko Alexander", "link": "https://stackoverflow.com/users/6515755/ryabchenko-alexander"}, "is_accepted": false, "score": 2, "last_activity_date": 1544545436, "last_edit_date": 1544545436, "creation_date": 1531162365, "answer_id": 51252271, "question_id": 42542898, "link": "https://stackoverflow.com/questions/42542898/why-django-migration-alter-field-alterfield-that-is-not-touched/51252271#51252271", "title": "Why Django migration alter field (AlterField) that is not touched?", "body": "<p>if you have  choices= parametr in field, you should generate it in \"stable way\" (same order every time), for example with sorted()</p>\n\n<pre><code>TYPES = {\n    'DISTRICT': '\u041e\u043a\u0440\u0443\u0433',\n    'AREA': '\u0420\u0430\u0439\u043e\u043d',\n    'STATION': '\u0421\u0442\u0430\u043d\u0446\u0438\u044f \u043c\u0435\u0442\u0440\u043e',\n}\ntype = models.CharField(\n    max_length=255,\n    choices=sorted(TYPES.items()),\n    default='AREA',\n)\n</code></pre>\n"}], "owner": {"reputation": 991, "user_id": 1849805, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/4509c5dfb4baf75b4da654ac90d94a4c?s=128&d=identicon&r=PG", "display_name": "Vic Nicethemer", "link": "https://stackoverflow.com/users/1849805/vic-nicethemer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1948, "favorite_count": 2, "answer_count": 1, "score": 5, "last_activity_date": 1544545436, "creation_date": 1488405480, "last_edit_date": 1488405887, "question_id": 42542898, "link": "https://stackoverflow.com/questions/42542898/why-django-migration-alter-field-alterfield-that-is-not-touched", "title": "Why Django migration alter field (AlterField) that is not touched?", "body": "<p>When i do migration <code>python manage.py makemigrations wall</code>\ni see in console that Django (1.8.12) tells me a long list of fields that are touched:</p>\n\n<pre><code>Migrations for 'wall':\n  0079_auto_20170302_0024.py:\n    - Add field periodic_task_interval to userproject\n    - Alter field bank_problems on bankireference\n    - Alter field bank_problems_category on bankireference\n    - Alter field bank_products on bankireference\n    - Alter field bank_products_category on bankireference\n    - Alter field extr_category on bankireference\n    - Alter field extr_words on bankireference\n    - Alter field neg_features on bankireference\n    - Alter field neutral_features on bankireference\n    - Alter field pos_features on bankireference\n    - Alter field tonality_category on bankireference\n    - Alter field tonality_words on bankireference\n    - Alter field bank_problems on fbpagepost\n    - Alter field bank_problems_category on fbpagepost\n    - Alter field bank_products on fbpagepost\n    - Alter field bank_products_category on fbpagepost\n    - Alter field extr_category on fbpagepost\n</code></pre>\n\n<p>...... ad so on, near all fileds that is ManyToManyField. I also checked other migrations, looks like random choose of fields, because i see also    <code>tagulous.models.fields.TagField</code> \nand even \n<code>models.TextField</code>.</p>\n\n<p><strong>BUT, i am sure a did not changed that fields, even touched them</strong></p>\n\n<p>This is what in 0079_auto_20170302_0024.py for untouched fields: </p>\n\n<pre><code>......\n    migrations.AlterField(\n        model_name='userproject',\n        name='description',\n        field=models.TextField(default='', verbose_name='Description', blank=True, null=True),\n    ),\n......\n</code></pre>\n\n<p>The only thing i have done is added <code>- Add field periodic_task_interval to userproject</code> so other fields - why they appear in migration?\nCan this effect a long time doing actual migration because of big database?</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 0, "creation_date": 1488405862, "post_id": 42542893, "comment_id": 72221762, "body": "Usually a <code>tf.errors.OutOfRangeError</code> is the result of a failure earlier in the pipeline. Were there any other exceptions in the logs?"}, {"owner": {"reputation": 1, "user_id": 7643851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794b27f5ef2fc2e55240f33bcaf8761a?s=128&d=identicon&r=PG&f=1", "display_name": "Arslan", "link": "https://stackoverflow.com/users/7643851/arslan"}, "reply_to_user": {"reputation": 119710, "user_id": 3574081, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LIW6C.jpg?s=128&g=1", "display_name": "mrry", "link": "https://stackoverflow.com/users/3574081/mrry"}, "edited": false, "score": 0, "creation_date": 1488407062, "post_id": 42542893, "comment_id": 72222324, "body": "I have edited the question with complete error log. Thanks!"}, {"owner": {"reputation": 1702, "user_id": 2505209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rm2Dy.jpg?s=128&g=1", "display_name": "Harsha Pokkalla", "link": "https://stackoverflow.com/users/2505209/harsha-pokkalla"}, "edited": false, "score": 0, "creation_date": 1488413675, "post_id": 42542893, "comment_id": 72224851, "body": "This error occurs when queue has insufficient elements as shown in logs. How many files you have in the folder and what are the values of batch size and min_after_dequeue ??"}, {"owner": {"reputation": 1, "user_id": 7643851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794b27f5ef2fc2e55240f33bcaf8761a?s=128&d=identicon&r=PG&f=1", "display_name": "Arslan", "link": "https://stackoverflow.com/users/7643851/arslan"}, "edited": false, "score": 0, "creation_date": 1488414728, "post_id": 42542893, "comment_id": 72225177, "body": "For quick experimentation I am testing with 25 files, but I don&#39;t think the dearth of elements is the reason. If I just remove the activation paths from the file and only use queues for <b>images</b> and <b>masks</b>, I don&#39;t see any problems. I think it&#39;s the way I am using <b>tf.py_func()</b> that is causing the problem. I am not sure if <b>tf.py_func()</b> can be used as a reader here.  My batch size is 1, and I am not setting min_after_dequeue."}, {"owner": {"reputation": 1, "user_id": 7643851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794b27f5ef2fc2e55240f33bcaf8761a?s=128&d=identicon&r=PG&f=1", "display_name": "Arslan", "link": "https://stackoverflow.com/users/7643851/arslan"}, "edited": false, "score": 0, "creation_date": 1488475635, "post_id": 42542893, "comment_id": 72258087, "body": "I have added a sample code to reproduce the problem at the end of the question."}, {"owner": {"reputation": 5364, "user_id": 852592, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/O5IeE.jpg?s=128&g=1", "display_name": "Lenar Hoyt", "link": "https://stackoverflow.com/users/852592/lenar-hoyt"}, "edited": false, "score": 0, "creation_date": 1504119086, "post_id": 42542893, "comment_id": 78894626, "body": "Did you solve this issue?"}, {"owner": {"reputation": 1, "user_id": 7643851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794b27f5ef2fc2e55240f33bcaf8761a?s=128&d=identicon&r=PG&f=1", "display_name": "Arslan", "link": "https://stackoverflow.com/users/7643851/arslan"}, "reply_to_user": {"reputation": 5364, "user_id": 852592, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/O5IeE.jpg?s=128&g=1", "display_name": "Lenar Hoyt", "link": "https://stackoverflow.com/users/852592/lenar-hoyt"}, "edited": false, "score": 0, "creation_date": 1504206861, "post_id": 42542893, "comment_id": 78937308, "body": "@LenarHoyt Yes, I did. IIRC, this is solved by correctly specifying the type of data to load in <b>load_npz()</b> function.   Change following line in load_npz(): <b>activation = actv_arr[&#39;actv&#39;].astype(np.float32)</b>"}], "owner": {"reputation": 1, "user_id": 7643851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/794b27f5ef2fc2e55240f33bcaf8761a?s=128&d=identicon&r=PG&f=1", "display_name": "Arslan", "link": "https://stackoverflow.com/users/7643851/arslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 340, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488475601, "creation_date": 1488405463, "last_edit_date": 1488475601, "question_id": 42542893, "link": "https://stackoverflow.com/questions/42542893/using-tf-py-func-as-a-reader-on-queues-gives-out-of-range-errors", "title": "Using tf.py_func() as a reader on queues gives out of range errors", "body": "<p>I am trying to create an input pipeline using tf.py_func() as a reader on queues. My data is distributed as following:</p>\n\n<pre><code>/data\n   /images/*.jpg\n   /masks/*.png\n   /activations/*.npz\n</code></pre>\n\n<p>I have a file that contains paths to these data files in the following format:</p>\n\n<pre><code>/path/to/Image_1.jpg /path/to/mask1.png /path/to/activation1.npz\n/path/to/Image_2.jpg /path/to/mask2.png /path/to/activation2.npz\n .                         .                        .            \n</code></pre>\n\n<p>I am creating three queues out of them, and then using readers and decoders to parse the elements in queues. Since tensorflow has defined readers like tf.read_file() and decoders such as tf.image.decode_jpeg() and tf.image.decode_png() for <strong>jpg</strong> and <strong>png</strong> formats but none for <strong>npz</strong> format, so I am using a python wrapper to parse the queue for activations files (third column in the file above):</p>\n\n<pre><code>def load_npz(npz_file):\n    actv_arr = np.load(npz_file)\n    activation = actv_arr['actv']\n    return activation\n</code></pre>\n\n<p>Now, if I try to construct a wrapper using <strong>tf.py_func()</strong> around the python function above and use it to as a reader, I ran into out of range errors:</p>\n\n<pre><code>I tensorflow/core/common_runtime/gpu/gpu_device.cc:975] Creating TensorFlow device (/gpu:0) -&gt; (device: 0, name: TITAN X (Pascal), pci bus id: 0000:01:00.0)\nRestored model parameters from ./snapshots_curriculum_5k_data/model.ckpt-10000\nW tensorflow/core/framework/op_kernel.cc:975] Out of range: FIFOQueue '_3_create_inputs/batch/fifo_queue' is closed and has insufficient elements (requested 1, current size 0)\n     [[Node: create_inputs/batch = QueueDequeueMany[_class=[\"loc:@create_inputs/batch/fifo_queue\"], component_types=[DT_FLOAT, DT_UINT8, DT_FLOAT], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](create_inputs/batch/fifo_queue, create_inputs/batch/n)]]\nW tensorflow/core/framework/op_kernel.cc:975] Out of range: FIFOQueue '_3_create_inputs/batch/fifo_queue' is closed and has insufficient elements (requested 1, current size 0)\n     [[Node: create_inputs/batch = QueueDequeueMany[_class=[\"loc:@create_inputs/batch/fifo_queue\"], component_types=[DT_FLOAT, DT_UINT8, DT_FLOAT], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](create_inputs/batch/fifo_queue, create_inputs/batch/n)]]\nW tensorflow/core/framework/op_kernel.cc:975] Out of range: FIFOQueue '_3_create_inputs/batch/fifo_queue' is closed and has insufficient elements (requested 1, current size 0)\n     [[Node: create_inputs/batch = QueueDequeueMany[_class=[\"loc:@create_inputs/batch/fifo_queue\"], component_types=[DT_FLOAT, DT_UINT8, DT_FLOAT], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](create_inputs/batch/fifo_queue, create_inputs/batch/n)]]\nW tensorflow/core/framework/op_kernel.cc:975] Out of range: FIFOQueue '_3_create_inputs/batch/fifo_queue' is closed and has insufficient elements (requested 1, current size 0)\n     [[Node: create_inputs/batch = QueueDequeueMany[_class=[\"loc:@create_inputs/batch/fifo_queue\"], component_types=[DT_FLOAT, DT_UINT8, DT_FLOAT], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](create_inputs/batch/fifo_queue, create_inputs/batch/n)]]\nTraceback (most recent call last):\n  File \"train_online.py\", line 260, in &lt;module&gt;\n    main()\n  File \"train_online.py\", line 241, in main\n    num_steps=args.num_steps, restore_from=args.restore_from, snapshot_dir=args.snapshot_dir)\n  File \"/home/mac/phd/arslan-repo/tensorflow-deeplab-resnet/distillation.py\", line 290, in main\n    _, l_val = sess.run([accum_grads_op, reduced_loss], feed_dict=feed_dict)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 766, in run\n    run_metadata_ptr)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 964, in _run\n    feed_dict_string, options, run_metadata)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 1014, in _do_run\n    target_list, options, run_metadata)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/client/session.py\", line 1034, in _do_call\n    raise type(e)(node_def, op, message)\ntensorflow.python.framework.errors_impl.OutOfRangeError: FIFOQueue '_3_create_inputs/batch/fifo_queue' is closed and has insufficient elements (requested 1, current size 0)\n     [[Node: create_inputs/batch = QueueDequeueMany[_class=[\"loc:@create_inputs/batch/fifo_queue\"], component_types=[DT_FLOAT, DT_UINT8, DT_FLOAT], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](create_inputs/batch/fifo_queue, create_inputs/batch/n)]]\n\nCaused by op u'create_inputs/batch', defined at:\n  File \"train_online.py\", line 260, in &lt;module&gt;\n    main()\n  File \"train_online.py\", line 241, in main\n    num_steps=args.num_steps, restore_from=args.restore_from, snapshot_dir=args.snapshot_dir)\n  File \"/home/mac/phd/arslan-repo/tensorflow-deeplab-resnet/distillation.py\", line 94, in main\n    image_batch, label_batch, activation_batch = reader.dequeue(BATCH_SIZE)\n  File \"/home/mac/phd/arslan-repo/tensorflow-deeplab-resnet/deeplab_resnet/image_reader_distill.py\", line 195, in dequeue\n    num_elements)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/training/input.py\", line 692, in batch\n    dequeued = queue.dequeue_many(batch_size, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/data_flow_ops.py\", line 458, in dequeue_many\n    self._queue_ref, n=n, component_types=self._dtypes, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/ops/gen_data_flow_ops.py\", line 1099, in _queue_dequeue_many\n    timeout_ms=timeout_ms, name=name)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/op_def_library.py\", line 759, in apply_op\n    op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 2240, in create_op\n    original_op=self._default_original_op, op_def=op_def)\n  File \"/usr/local/lib/python2.7/dist-packages/tensorflow/python/framework/ops.py\", line 1128, in __init__\n    self._traceback = _extract_stack()\n\nOutOfRangeError (see above for traceback): FIFOQueue '_3_create_inputs/batch/fifo_queue' is closed and has insufficient elements (requested 1, current size 0)\n     [[Node: create_inputs/batch = QueueDequeueMany[_class=[\"loc:@create_inputs/batch/fifo_queue\"], component_types=[DT_FLOAT, DT_UINT8, DT_FLOAT], timeout_ms=-1, _device=\"/job:localhost/replica:0/task:0/cpu:0\"](create_inputs/batch/fifo_queue, create_inputs/batch/n)]]\n</code></pre>\n\n<p>Following is the invocation of different readers and decoders on input queues:</p>\n\n<pre><code>def read_data_from_disk(input_queue):\n    img_contents = tf.read_file(input_queue[0])\n    label_contents = tf.read_file(input_queue[1])\n\n    img = tf.image.decode_jpeg(img_contents, channels=3)\n    label = tf.image.decode_png(label_contents, channels=1)\n\n    activation = tf.py_func(load_npz, [input_queue[2]], [tf.float32])\n    activation = tf.to_float(tf.reshape(activation, [tf.shape(img)[0], tf.shape(img)[1], 21]))\n\n    return img, label, activation\n</code></pre>\n\n<p>And ImageReader is defined as:</p>\n\n<pre><code>class ImageReader(object):\n\n        self.data_dir = data_dir\n        self.actv_dir = actv_dir\n        self.data_list = data_list\n        self.input_size = input_size\n        self.coord = coord\n\n        self.image_list, self.label_list, self.actv_list = read_labeled_image_list(self.data_dir, self.actv_dir, self.data_list)\n        self.images = tf.convert_to_tensor(self.image_list, dtype=tf.string)\n        self.labels = tf.convert_to_tensor(self.label_list, dtype=tf.string)\n        self.activations = tf.convert_to_tensor(self.actv_list, dtype=tf.string)\n        self.queue = tf.train.slice_input_producer([self.images, self.labels, self.activations],\\\n                                                   shuffle=input_size is not None) # not shuffling if it is val\n        self.image, self.label, self.activation = read_images_from_disk(self.queue, self.input_size, random_scale, random_mirror) \n\n    def dequeue(self, num_elements):\n        image_batch, label_batch, activation_batch = tf.train.batch([self.image, self.label, self.activation],\n                                                  num_elements)\n        return image_batch, label_batch, activation_batch\n</code></pre>\n\n<p>When I try to call ImageReader.dequeue(1), I ran into out of range error. I think I am not correctly using the python wrapper in this setting. Any suggestions?</p>\n\n<p>Below is a sample code to reproduce the problem:</p>\n\n<pre><code>#! /usr/env/bin python\nimport tensorflow as tf\nimport numpy as np\n\nDATA_DIR = './data'\nDATA_LIST = './list.txt'\nNUM_STEPS = 1\n\ndef load_file(file_path):\n    arr = np.loadtxt(file_path)\n    return arr\n\ndef get_file_list(data_dir, data_list):\n    file_list = []\n    f = open(data_list)\n    for line in f:\n        img = line.strip('\\n')\n        file_list.append(data_dir + img)\n\n    return file_list\n\ndef read_files_from_disk(input_queue):\n    activation = tf.py_func(load_file, [input_queue[0]], [tf.float32])\n    activation = tf.to_float(tf.reshape(activation, [1, 2]))\n    return activation\n\nclass File_Reader(object):\n    def __init__(self, data_dir, data_list):\n        self.data_dir = data_dir\n        self.data_list = data_list\n        self.file_list = get_file_list(self.data_dir, self.data_list)\n        self.files = tf.convert_to_tensor(self.file_list, dtype=tf.string)\n        self.queue = tf.train.slice_input_producer([self.files], shuffle=True)\n        self.file = read_files_from_disk(self.queue)\n\n    def dequeue(self, num_elements):\n        file_batch = tf.train.batch([self.file], num_elements)\n        return file_batch\n\ndef main(data_dir=DATA_DIR, data_list=DATA_LIST, num_steps=NUM_STEPS):\n\n    graph = tf.Graph()\n\n    with graph.as_default():\n        reader = File_Reader(data_dir, data_list)\n        file_contents = reader.dequeue(1)\n\n    with tf.Session(graph=graph) as sess:\n        tf.global_variables_initializer().run()\n\n        coord = tf.train.Coordinator()\n\n        threads = tf.train.start_queue_runners(coord=coord, sess=sess)\n\n        for step in range(num_steps):\n            file_content = sess.run(file_contents)\n            print(file_content)\n\n        coord.request_stop()\n        coord.join(threads)\n\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>where 'list.txt' simply consists of names of 'x' number of files and './data' contains those files. For simplicity I used 'txt' files.</p>\n"}, {"tags": ["python", "boto3", "moto"], "comments": [{"owner": {"reputation": 2514, "user_id": 558397, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7fa6c1e534f989270b9b88dc55dee0bf?s=128&d=identicon&r=PG", "display_name": "abarik", "link": "https://stackoverflow.com/users/558397/abarik"}, "edited": false, "score": 0, "creation_date": 1488405448, "post_id": 42542879, "comment_id": 72221583, "body": "posted the same here <a href=\"https://github.com/spulec/moto/issues/850\" rel=\"nofollow noreferrer\">github.com/spulec/moto/issues/850</a>"}], "answers": [{"tags": [], "owner": {"reputation": 22762, "user_id": 565999, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df1f24dcadec85faaa16c9dc541c0006?s=128&d=identicon&r=PG", "display_name": "Hugo Tavares", "link": "https://stackoverflow.com/users/565999/hugo-tavares"}, "is_accepted": false, "score": 1, "last_activity_date": 1493304928, "creation_date": 1493304928, "answer_id": 43661282, "question_id": 42542879, "link": "https://stackoverflow.com/questions/42542879/moto-mocking-sts-to-get-account-id-throwing-error-notimplementederror-the-get-c/43661282#43661282", "title": "moto mocking sts to get account id throwing error NotImplementedError: The get_caller_identity action has not been implemented", "body": "<p>This was solved in the moto project and released. Any version above 0.4.31 should work. More info at <a href=\"https://github.com/spulec/moto/issues/850\" rel=\"nofollow noreferrer\">https://github.com/spulec/moto/issues/850</a></p>\n\n<p>Please upgrade your moto:</p>\n\n<pre><code>pip install 'moto&gt;=0.4.31'\n</code></pre>\n"}], "owner": {"reputation": 2514, "user_id": 558397, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7fa6c1e534f989270b9b88dc55dee0bf?s=128&d=identicon&r=PG", "display_name": "abarik", "link": "https://stackoverflow.com/users/558397/abarik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1969, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1493304928, "creation_date": 1488405430, "question_id": 42542879, "link": "https://stackoverflow.com/questions/42542879/moto-mocking-sts-to-get-account-id-throwing-error-notimplementederror-the-get-c", "title": "moto mocking sts to get account id throwing error NotImplementedError: The get_caller_identity action has not been implemented", "body": "<p>running on moto with version '0.4.25' on python 2.7, i get the following error: <code>NotImplementedError: The get_caller_identity action has not been implemented</code></p>\n\n<pre><code>import boto3\nfrom moto import mock_sns, mock_sts, mock_sqs\n\n@mock_sts\ndef test_get_caller_identity():\n    sts = boto3.client(\"sts\")\n    identity = sts.get_caller_identity()\n\n    identity['Arn'].should.equal('arn:aws:sts::123456789012:user/moto')\n    identity['UserId'].should.equal('AKIAIOSFODNN7EXAMPLE')\n    identity['Account'].should.equal('123456789012')\n\ndef main():\n    # Testing\n    setup_logger(verbose=True, propagate_lower_levels=True)\n    test_get_caller_identity()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p><strong>how to reproduce the issue</strong>: rerun the above script</p>\n\n<p><strong>what you expected to happen</strong>: expecting to pass the test</p>\n\n<p><strong>what actually happens</strong>:</p>\n\n<pre><code>[botocore.cre] [DEBUG]  Looking for credentials via: env\n[botocore.cre] [DEBUG]  Looking for credentials via: assume-role\n[botocore.cre] [DEBUG]  Looking for credentials via: shared-credentials-file\n[botocore.cre] [DEBUG]  Looking for credentials via: config-file\n[botocore.cre] [DEBUG]  Looking for credentials via: ec2-credentials-file\n[botocore.cre] [DEBUG]  Looking for credentials via: boto-config\n[botocore.cre] [DEBUG]  Looking for credentials via: container-role\n[botocore.cre] [DEBUG]  Looking for credentials via: iam-role\n[botocore.ven] [INFO ]  Starting new HTTP connection (1): 169.254.169.254\n[botocore.ven] [DEBUG]  \"GET /latest/meta-data/iam/security-credentials/ HTTP/1.1\" 200 12\n[botocore.ven] [INFO ]  Starting new HTTP connection (1): 169.254.169.254\n[botocore.ven] [DEBUG]  \"GET /latest/meta-data/iam/security-credentials/default-role HTTP/1.1\" 200 134\n[botocore.cre] [DEBUG]  Found credentials from IAM Role: default-role\n[botocore.loa] [DEBUG]  Loading JSON file: /tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/data/endpoints.json\n[botocore.loa] [DEBUG]  Loading JSON file: /tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/data/sts/2011-06-15/service-2.json\n[botocore.loa] [DEBUG]  Loading JSON file: /tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/data/_retry.json\n[botocore.cli] [DEBUG]  Registering retry handlers for service: sts\n[botocore.hoo] [DEBUG]  Event creating-client-class.sts: calling handler &lt;function add_generate_presigned_url at 0x7fcf8cabf0c8&gt;\n[botocore.arg] [DEBUG]  The s3 config key is not a dictionary type, ignoring its value of: None\n[botocore.end] [DEBUG]  Setting sts timeout as (60, 60)\n[botocore.hoo] [DEBUG]  Event before-parameter-build.sts.GetCallerIdentity: calling handler &lt;function generate_idempotent_uuid at 0x7fcf8ca73a28&gt;\n[botocore.end] [DEBUG]  Making request for OperationModel(name=GetCallerIdentity) (verify_ssl=/tmp/packages/PyAmazonCACerts/PyAmazonCACerts-1.0.2333.874/build/lib/python2.7/site-packages/amazoncerts/internal_and_external_cacerts.pem) with params: {'body': {'Action': u'GetCallerIdentity', 'Version': u'2011-06-15'}, 'url': u'https://sts.amazonaws.com/', 'headers': {'User-Agent': 'Boto3/1.4.4 Python/2.7.8 Linux/3.2.45-0.6.wd.865.49.315.metal1.x86_64 Botocore/1.5.19'}, 'context': {'client_region': u'aws-global', 'has_streaming_input': False, 'client_config': &lt;botocore.config.Config object at 0x7fcf8b9b4210&gt;}, 'query_string': '', 'url_path': '/', 'method': u'POST'}\n[botocore.hoo] [DEBUG]  Event request-created.sts.GetCallerIdentity: calling handler &lt;bound method RequestSigner.handler of &lt;botocore.signers.RequestSigner object at 0x7fcf8b9b4110&gt;&gt;\n[botocore.aut] [DEBUG]  Calculating signature using v4 auth.\n[botocore.aut] [DEBUG]  CanonicalRequest:\nPOST\n/\n\nhost:sts.amazonaws.com\nx-amz-date:20170301T212849Z\nx-amz-security-token:test-session-token\n\nhost;x-amz-date;x-amz-security-token\nab821ae955788b0e33ebd34c208442ccfc2d406e2edc5e7a39bd6458fbb4f843\n[botocore.aut] [DEBUG]  StringToSign:\nAWS4-HMAC-SHA256\n20170301T212849Z\n20170301/us-east-1/sts/aws4_request\n0ed37d6dbf3cd83370ec22b49a11b968f8d4ed0a102165a5a5e6ac7244015a85\n[botocore.aut] [DEBUG]  Signature:\n32e88e133be1cdb6370cda04d99c09d5496dbbc979e949773d846face9d3e637\n[botocore.end] [DEBUG]  Sending http request: &lt;PreparedRequest [POST]&gt;\n[botocore.ven] [INFO ]  Starting new HTTPS connection (1): sts.amazonaws.com\n[botocore.end] [DEBUG]  Exception received when sending HTTP request.\n[botocore.end] [DEBUG]  Exception received when sending HTTP request.\nTraceback (most recent call last):\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/endpoint.py\", line 204, in _get_response\n    proxies=self.proxies, timeout=self.timeout)\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/vendored/requests/sessions.py\", line 573, in send\n    r = adapter.send(request, **kwargs)\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/vendored/requests/adapters.py\", line 370, in send\n    timeout=timeout\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/vendored/requests/packages/urllib3/connectionpool.py\", line 544, in urlopen\n    body=body, headers=headers)\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/vendored/requests/packages/urllib3/connectionpool.py\", line 372, in _make_request\n    httplib_response = conn.getresponse(buffering=True)\n  File \"/opt/tmp/packages/Python27/Python27-1.0.8941.2229/build/lib/python2.7/httplib.py\", line 1065, in getresponse\n    response = self.response_class(*args, **kwds)\n  File \"/opt/tmp/packages/Python27/Python27-1.0.8941.2229/build/lib/python2.7/httplib.py\", line 339, in __init__\n    self.fp = sock.makefile('rb')\n  File \"/tmp/packages/Httpretty/Httpretty-0.6.3.796.161/build/lib/python2.7/site-packages/httpretty/core.py\", line 208, in makefile\n    self._entry.fill_filekind(self.fd)\n  File \"/tmp/packages/Httpretty/Httpretty-0.6.3.796.161/build/lib/python2.7/site-packages/httpretty/core.py\", line 443, in fill_filekind\n    status, headers, self.body = self.callable_body(self.request,self.info.full_url(),headers)\n  File \"/tmp/packages/Python-moto/Python-moto-0.4.x.13.213/build/lib/python2.7/site-packages/moto/core/responses.py\", line 96, in dispatch\n    return cls()._dispatch(*args, **kwargs)\n  File \"/tmp/packages/Python-moto/Python-moto-0.4.x.13.213/build/lib/python2.7/site-packages/moto/core/responses.py\", line 139, in _dispatch\n    return self.call_action()\n  File \"/tmp/packages/Python-moto/Python-moto-0.4.x.13.213/build/lib/python2.7/site-packages/moto/core/responses.py\", line 165, in call_action\n    raise NotImplementedError(\"The {0} action has not been implemented\".format(action))\nNotImplementedError: The get_caller_identity action has not been implemented\n[botocore.hoo] [DEBUG]  Event needs-retry.sts.GetCallerIdentity: calling handler &lt;botocore.retryhandler.RetryHandler object at 0x7fcf8be84490&gt;\nTraceback (most recent call last):\n  File \"/test/test_boto3_helper2.py\", line 20, in &lt;module&gt;\n    main()\n  File \"/test/test_boto3_helper2.py\", line 17, in main\n    test_get_caller_identity()\n  File \"/tmp/packages/Python-moto/Python-moto-0.4.x.13.213/build/lib/python2.7/site-packages/moto/core/models.py\", line 71, in wrapper\n    result = func(*args, **kwargs)\n  File \"/test/test_boto3_helper2.py\", line 8, in test_get_caller_identity\n    identity = sts.get_caller_identity()\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/client.py\", line 253, in _api_call\n    return self._make_api_call(operation_name, kwargs)\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/client.py\", line 530, in _make_api_call\n    operation_model, request_dict)\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/endpoint.py\", line 141, in make_request\n    return self._send_request(request_dict, operation_model)\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/endpoint.py\", line 170, in _send_request\n    success_response, exception):\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/endpoint.py\", line 249, in _needs_retry\n    caught_exception=caught_exception, request_dict=request_dict)\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/hooks.py\", line 227, in emit\n    return self._emit(event_name, kwargs)\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/hooks.py\", line 210, in _emit\n    response = handler(**kwargs)\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/retryhandler.py\", line 183, in __call__\n    if self._checker(attempts, response, caught_exception):\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/retryhandler.py\", line 251, in __call__\n    caught_exception)\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/retryhandler.py\", line 269, in _should_retry\n    return self._checker(attempt_number, response, caught_exception)\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/retryhandler.py\", line 317, in __call__\n    caught_exception)\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/retryhandler.py\", line 223, in __call__\n    attempt_number, caught_exception)\n  File \"/tmp/packages/BotoCore/BotoCore-1.x.249.0/build/lib/python2.7/site-packages/botocore/retryhandler.py\", line 359, in _check_caught_exception\n    raise caught_exception\nNotImplementedError: The get_caller_identity action has not been implemented\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "datetime"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 3, "creation_date": 1488405939, "post_id": 42542866, "comment_id": 72221791, "body": "Does your system actually have more than centisecond resolution for <code>datetime.now()</code>?"}, {"owner": {"reputation": 713, "user_id": 1484481, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3cd050469d0dc673111d90be0c44e820?s=128&d=identicon&r=PG", "display_name": "Prophecies", "link": "https://stackoverflow.com/users/1484481/prophecies"}, "edited": false, "score": 0, "creation_date": 1488406010, "post_id": 42542866, "comment_id": 72221820, "body": "Are you saying that you have different number of entries in <code>tdict</code> compared to <code>vdict</code>?"}, {"owner": {"reputation": 885, "user_id": 5149992, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/10153144427069790/picture?type=large", "display_name": "RBuntu", "link": "https://stackoverflow.com/users/5149992/rbuntu"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1488406059, "post_id": 42542866, "comment_id": 72221841, "body": "@user2357112 How would I check that? Shouldn&#39;t all computers have at least millisecond resolution? Is there another Python package that can get me that kind of time resolution? I dont need precision absolute time, I need precision relative time, like a stopwatch rather than a clock."}, {"owner": {"reputation": 885, "user_id": 5149992, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/10153144427069790/picture?type=large", "display_name": "RBuntu", "link": "https://stackoverflow.com/users/5149992/rbuntu"}, "reply_to_user": {"reputation": 713, "user_id": 1484481, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3cd050469d0dc673111d90be0c44e820?s=128&d=identicon&r=PG", "display_name": "Prophecies", "link": "https://stackoverflow.com/users/1484481/prophecies"}, "edited": false, "score": 0, "creation_date": 1488406124, "post_id": 42542866, "comment_id": 72221869, "body": "@Prophecies Yes, the <code>vdict</code> has voltage values coming from the LabJack data acquisition. Those values look fine, they don&#39;t repeat or anything."}, {"owner": {"reputation": 713, "user_id": 1484481, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3cd050469d0dc673111d90be0c44e820?s=128&d=identicon&r=PG", "display_name": "Prophecies", "link": "https://stackoverflow.com/users/1484481/prophecies"}, "edited": false, "score": 0, "creation_date": 1488406199, "post_id": 42542866, "comment_id": 72221912, "body": "you said <code>lists of values seem to have a lot more numbers than the resolution of my plots is showing</code>. I wanted to know what you meant by that.."}, {"owner": {"reputation": 885, "user_id": 5149992, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/10153144427069790/picture?type=large", "display_name": "RBuntu", "link": "https://stackoverflow.com/users/5149992/rbuntu"}, "reply_to_user": {"reputation": 713, "user_id": 1484481, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3cd050469d0dc673111d90be0c44e820?s=128&d=identicon&r=PG", "display_name": "Prophecies", "link": "https://stackoverflow.com/users/1484481/prophecies"}, "edited": false, "score": 0, "creation_date": 1488406350, "post_id": 42542866, "comment_id": 72221985, "body": "@Prophecies Edited for clarity. Thanks."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 2, "creation_date": 1488406701, "post_id": 42542866, "comment_id": 72222148, "body": "@RBuntu: If you were on Python 3, I would recommend <a href=\"https://docs.python.org/3/library/time.html#time.perf_counter\" rel=\"nofollow noreferrer\"><code>time.perf_counter()</code></a>. Since you&#39;re not, <a href=\"https://docs.python.org/2/library/timeit.html#timeit.default_timer\" rel=\"nofollow noreferrer\"><code>timeit.default_timer()</code></a> is probably your best option for timing."}, {"owner": {"reputation": 2559, "user_id": 5087125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6R64Z.jpg?s=128&g=1", "display_name": "pvg", "link": "https://stackoverflow.com/users/5087125/pvg"}, "edited": false, "score": 0, "creation_date": 1488406781, "post_id": 42542866, "comment_id": 72222189, "body": "You should scroll through the docs of the <code>time</code> module, it&#39;s short and describes various options, none of which are <code>datetime.now()</code>. You get access to better APIs (and ability to query resolution on some of the clocks) if you can use a more recent python (3 and up)."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1488407575, "post_id": 42542866, "comment_id": 72222579, "body": "There have been significant improvements made on clock availability and behavior in the 3.x line thanks to <a href=\"https://www.python.org/dev/peps/pep-0418/\" rel=\"nofollow noreferrer\">PEP 418</a>; it&#39;s possible your system is one of the ones where the old setup sometimes used suboptimal clocks. <code>datetime</code> was updated to use the newer, more correct clocks, so that would help too. Of course, there is no reason to use <code>datetime</code> over the <code>time</code> module for this purpose; <code>time</code> is better for timing code anyway. Have you tried running the same code on modern Python?"}, {"owner": {"reputation": 885, "user_id": 5149992, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/10153144427069790/picture?type=large", "display_name": "RBuntu", "link": "https://stackoverflow.com/users/5149992/rbuntu"}, "reply_to_user": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 0, "creation_date": 1488468983, "post_id": 42542866, "comment_id": 72253476, "body": "@ShadowRanger I have not. I would prefer if I could get it to work on 2.7 anyway. For some reason, it seems to work very rarely, where the difference between 2 values is a one or a couple milliseconds so there has to be a way."}], "answers": [{"comments": [{"owner": {"reputation": 885, "user_id": 5149992, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/10153144427069790/picture?type=large", "display_name": "RBuntu", "link": "https://stackoverflow.com/users/5149992/rbuntu"}, "edited": false, "score": 0, "creation_date": 1488469040, "post_id": 42543210, "comment_id": 72253528, "body": "I tried this with <code>time.time()</code> and for some reason, it worked on the first try but then from the second build onward, it had the same issue as before. Were you getting sub-10ms resolution or do the values start repeating only below 1ms?"}, {"owner": {"reputation": 713, "user_id": 1484481, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3cd050469d0dc673111d90be0c44e820?s=128&d=identicon&r=PG", "display_name": "Prophecies", "link": "https://stackoverflow.com/users/1484481/prophecies"}, "reply_to_user": {"reputation": 885, "user_id": 5149992, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/10153144427069790/picture?type=large", "display_name": "RBuntu", "link": "https://stackoverflow.com/users/5149992/rbuntu"}, "edited": false, "score": 0, "creation_date": 1488469984, "post_id": 42543210, "comment_id": 72254192, "body": "Yes, repeating only below 1ms. In my second test, I was having similar issue as yours though"}, {"owner": {"reputation": 885, "user_id": 5149992, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/10153144427069790/picture?type=large", "display_name": "RBuntu", "link": "https://stackoverflow.com/users/5149992/rbuntu"}, "edited": false, "score": 0, "creation_date": 1488471382, "post_id": 42543210, "comment_id": 72255156, "body": "I downloaded some third party software called &quot;TimerToolV3&quot; that sits in the notification area and increases system clock resolution up to 0.5ms. The code works now, I just wish there was a way to do it in Python 2.7."}], "tags": [], "owner": {"reputation": 713, "user_id": 1484481, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3cd050469d0dc673111d90be0c44e820?s=128&d=identicon&r=PG", "display_name": "Prophecies", "link": "https://stackoverflow.com/users/1484481/prophecies"}, "is_accepted": false, "score": 0, "last_activity_date": 1488407445, "last_edit_date": 1488407445, "creation_date": 1488406780, "answer_id": 42543210, "question_id": 42542866, "link": "https://stackoverflow.com/questions/42542866/why-is-datetime-datetime-skipping-repeating-and-skipping-time-values/42543210#42543210", "title": "Why is datetime.datetime skipping repeating and skipping time values?", "body": "<p>It just looks like each of your loop is being completed in less than minimum resolution of datetime.datetime. I wrote simple script to see if sub-millisecond resolution is recorded. It looks like it is. Also, since you're only measuring time elapsed and don't need advanced formatting, timezones etc, using <code>time.time()</code> will give you better time resolution than <code>datetime</code> module.</p>\n\n<p>TEST 1</p>\n\n<pre><code>import time\nlst1 = list()\nBIG_NUM = 10000\nfor a in range(10):\n    for a in range(BIG_NUM):\n        pass\nlst1.append(time.time())\n</code></pre>\n\n<p>TEST 2</p>\n\n<pre><code>import datetime\nlst2 = list()\nBIG_NUM = 10000\nfor a in range(10):\n    for a in range(BIG_NUM):\n        pass\nlst2.append(datetime.datetime.now().strftime('%S.%f')[:-3])\n</code></pre>\n\n<p>even with a very small BIG_NUM, the times recorded in lst1 were increasing but there were repeated entries in lst2. But if you remove the inner loop altogether, it was possible to have some repeated entries, simply because the operation completed in smaller than the resolution provided by the time.time()</p>\n\n<p>TL;DR: Use <code>time.time()</code>. If there are still repeating entries, the operations inside are happening faster than highest resolution time available to you.</p>\n"}], "owner": {"reputation": 885, "user_id": 5149992, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/10153144427069790/picture?type=large", "display_name": "RBuntu", "link": "https://stackoverflow.com/users/5149992/rbuntu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1488407445, "creation_date": 1488405391, "last_edit_date": 1488406323, "question_id": 42542866, "link": "https://stackoverflow.com/questions/42542866/why-is-datetime-datetime-skipping-repeating-and-skipping-time-values", "title": "Why is datetime.datetime skipping repeating and skipping time values?", "body": "<p>I have a piece of code that takes in data from a LabJack and a proximity sensor. It runs on an infinite loop recording voltage values until the user stops it. </p>\n\n<p>However, I have been noticing something weird where my list of x-axis time values seem to have a lot more numbers than the resolution of my plots is showing. Namely, my x-axis time values seem to plot a point only every 10 milliseconds, but my program is collecting 5000 data points every 3.8 seconds, which should equate to a data point less than every 1 millisecond.</p>\n\n<p>Then I looked at my data and I saw the problem. Below are the first couple dozen numbers in my list of x-axis values.</p>\n\n<p><code>[0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.00999999999999801, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.020000000000003126, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.030000000000001137, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.03999999999999915, 0.04999999999999716, 0.04999999999999716,... etc.</code></p>\n\n<p>For some reason, the code is repeating each time value 10 or more times before increasing the value by 10 milliseconds and doing the same thing. Below is the code loop that records the voltage and time. The relevant lines are the ones where I define <code>self.t0</code>, <code>tcurr</code> and <code>t</code>.</p>\n\n<pre><code>def startData(self):\n    print \"Starting data collection\"\n    self.t0 = float(datetime.now().strftime('%S.%f')[:-3])\n    while True:\n        with self.data_lock:\n            while not self.data_loop:\n                ain0bits, = self.d.getFeedback(u3.AIN(0))\n                tcurr = datetime.now()\n                volts = self.d.binaryToCalibratedAnalogVoltage(ain0bits, isLowVoltage = False, channelNumber = 0)\n                t = float(tcurr.strftime('%S.%f')[:-3]) - self.t0    #note, approximate - will be just after voltage was read.\n                self.tdict.append(t)\n                self.vdict.append(volts)\n                self.i += 1\n</code></pre>\n\n<p>Any help is appreciated!</p>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 4921, "user_id": 7366928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NG2zR.jpg?s=128&g=1", "display_name": "pansen", "link": "https://stackoverflow.com/users/7366928/pansen"}, "edited": false, "score": 0, "creation_date": 1488491888, "post_id": 42542790, "comment_id": 72267488, "body": "The reason why the solution with <code>isin</code> does not work for the given data set seems to be related to a dtype issue, see here fore <a href=\"http://stackoverflow.com/questions/42566737/pandas-isin-dtype-dependency-bug\">more</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "edited": false, "score": 0, "creation_date": 1488407708, "post_id": 42542883, "comment_id": 72222638, "body": "when i run this solution on my larger dataset, the second condition does not gets filtered (although no errors are raised)."}, {"owner": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "edited": false, "score": 0, "creation_date": 1488416620, "post_id": 42542883, "comment_id": 72225709, "body": "i suspect the all(1) instead of any(1) in the second part of the query makes the difference"}, {"owner": {"reputation": 4921, "user_id": 7366928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NG2zR.jpg?s=128&g=1", "display_name": "pansen", "link": "https://stackoverflow.com/users/7366928/pansen"}, "reply_to_user": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "edited": false, "score": 0, "creation_date": 1488439091, "post_id": 42542883, "comment_id": 72233256, "body": "@SirajS. This is a somewhat interesting observation. Do you have an example row which does not get filtered correctly? And note, the &#39;all&#39; is used differently in the example of Divakar because the values 0.1 and 1.2 are checked explicitly one by one to be <b>both</b> unequal (thats why <i>all</i> is used). In contrast, in my example, I simply check if <b>any</b> of those values are present, and then invert the result. Both ways should come to the same result."}, {"owner": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "edited": false, "score": 0, "creation_date": 1488482348, "post_id": 42542883, "comment_id": 72262056, "body": "@pensen, i have added more data in the question. that should allow for replication. please ignore the earlier comment. thankyou"}, {"owner": {"reputation": 4921, "user_id": 7366928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NG2zR.jpg?s=128&g=1", "display_name": "pansen", "link": "https://stackoverflow.com/users/7366928/pansen"}, "reply_to_user": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "edited": false, "score": 0, "creation_date": 1488482880, "post_id": 42542883, "comment_id": 72262389, "body": "@SirajS. Strange enough - I get the correct result with your updated dummy data. Only row 31 gets correctly filtered. What pandas version do you use? Btw, my nick is <i>p<b>a</b>nsen</i> ;-)"}, {"owner": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "edited": false, "score": 0, "creation_date": 1488483238, "post_id": 42542883, "comment_id": 72262618, "body": "sorry for the mis-spell. I am using pandas 0.19.2, the actual dataset has 191 rows (and is multi index, if that helps :)), i am not able to understand, why it works here with a subset but not on the actual data. Most likely there is some corruption with actual data that is not visible to me. thankyou for your time"}, {"owner": {"reputation": 4921, "user_id": 7366928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NG2zR.jpg?s=128&g=1", "display_name": "pansen", "link": "https://stackoverflow.com/users/7366928/pansen"}, "reply_to_user": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "edited": false, "score": 0, "creation_date": 1488483468, "post_id": 42542883, "comment_id": 72262767, "body": "No worries. I&#39;m testing on pandas 0.19.2, too. Multiindex shoudn&#39;t interfere there. However, what happens when you reset it via &#39;reset_index&#39; or remove it completely?"}, {"owner": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "reply_to_user": {"reputation": 4921, "user_id": 7366928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NG2zR.jpg?s=128&g=1", "display_name": "pansen", "link": "https://stackoverflow.com/users/7366928/pansen"}, "edited": false, "score": 0, "creation_date": 1488484224, "post_id": 42542883, "comment_id": 72263239, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/137082/discussion-between-siraj-s-and-pansen\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 4921, "user_id": 7366928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NG2zR.jpg?s=128&g=1", "display_name": "pansen", "link": "https://stackoverflow.com/users/7366928/pansen"}, "is_accepted": false, "score": 4, "last_activity_date": 1488405908, "last_edit_date": 1488405908, "creation_date": 1488405440, "answer_id": 42542883, "question_id": 42542790, "link": "https://stackoverflow.com/questions/42542790/pandas-slice-rows-based-on-joint-condition/42542883#42542883", "title": "pandas slice rows based on joint condition", "body": "<p>You can do the following in short:</p>\n\n<pre><code>df.eq(3.2).any(axis=1) &amp; ~df.isin([0.1, 1.2]).any(axis=1)\n</code></pre>\n\n<p>Or here more explicitly:</p>\n\n<pre><code>contains = df.eq(3.2).any(axis=1)\nnot_contains = ~df.isin([0.1,1.2]).any(axis=1)\n\nprint(df[contains &amp; not_contains])\n   one    two    three    four    five    six    seven    eight\n5  2.1    3.2    0.0      0.0     0.0     0.0    0.0      0.0\n6  2.1    2.3    3.2      4.3     0.0     0.0    0.0      0.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "is_accepted": false, "score": 1, "last_activity_date": 1488405953, "last_edit_date": 1488405953, "creation_date": 1488405496, "answer_id": 42542903, "question_id": 42542790, "link": "https://stackoverflow.com/questions/42542790/pandas-slice-rows-based-on-joint-condition/42542903#42542903", "title": "pandas slice rows based on joint condition", "body": "<p>You could just combine the conditions.</p>\n\n<pre><code>&gt;&gt;&gt; df[(df == 3.2).any(1) &amp; ~df.isin([0.1, 1.2]).any(1)]\n\n   one  two  three  four  five  six   seven  eight\n5  2.1  3.2    0.0   0.0   0.0   0.0    0.0    0.0\n6  2.1  2.3    3.2   4.3   0.0   0.0    0.0    0.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 3, "last_activity_date": 1488405799, "creation_date": 1488405799, "answer_id": 42542980, "question_id": 42542790, "link": "https://stackoverflow.com/questions/42542790/pandas-slice-rows-based-on-joint-condition/42542980#42542980", "title": "pandas slice rows based on joint condition", "body": "<p>For performance, specially since you mentioned large dataset and if you are looking to exclude just two numbers, here's one approach with array data -</p>\n\n<pre><code>a = df.values\ndf_out = df.iloc[(a == 3.2).any(1) &amp; (((a!=0.1) &amp; (a!=1.2)).all(1))]\n</code></pre>\n\n<p>Sample run -</p>\n\n<pre><code>In [43]: a = df.values\n\nIn [44]: df.iloc[(a == 3.2).any(1) &amp; (((a!=0.1) &amp; (a!=1.2)).all(1))]\nOut[44]: \n   one  two  three  four  five  six  seven  eight\n5  2.1  3.2    0.0   0.0     0    0      0      0\n6  2.1  2.3    3.2   4.3     0    0      0      0\n</code></pre>\n"}], "owner": {"reputation": 2563, "user_id": 4695774, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bdc15d346c2f5b951bc99e0150c1a49d?s=128&d=identicon&r=PG&f=1", "display_name": "Siraj S.", "link": "https://stackoverflow.com/users/4695774/siraj-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 42542980, "answer_count": 3, "score": 3, "last_activity_date": 1488486028, "creation_date": 1488405108, "last_edit_date": 1488486028, "question_id": 42542790, "link": "https://stackoverflow.com/questions/42542790/pandas-slice-rows-based-on-joint-condition", "title": "pandas slice rows based on joint condition", "body": "<p>consider the below dataframe -df</p>\n\n<pre><code>    one  two  three  four  five  six  seven  eight\n0   0.1  1.1    2.2   3.3   3.6  4.1    0.0    0.0\n1   0.1  2.1    2.3   3.2   3.7  4.3    0.0    0.0\n2   1.6  0.0    0.0   0.0   0.0  0.0    0.0    0.0\n3   0.1  1.2    2.5   3.7   4.4  0.0    0.0    0.0\n4   1.7  2.1    0.0   0.0   0.0  0.0    0.0    0.0\n5   2.1  3.2    0.0   0.0   0.0  0.0    0.0    0.0\n6   2.1  2.3    3.2   4.3   0.0  0.0    0.0    0.0\n7   2.2  0.0    0.0   0.0   0.0  0.0    0.0    0.0\n8   0.1  1.8    0.0   0.0   0.0  0.0    0.0    0.0\n9   1.6  0.0    0.0   0.0   0.0  0.0    0.0    0.0\n</code></pre>\n\n<p>i want to select all rows where <strong>any</strong> columns value is '3.2' but at the same time the selected rows should not have values '0.1' or '1.2'</p>\n\n<p>I can able to get the first part with the below query</p>\n\n<pre><code>df[df.values == 3.2]\n</code></pre>\n\n<p>but cannot combine this with the second part of the query (the joint != condition)</p>\n\n<p>i also get the following error</p>\n\n<blockquote>\n  <p>DeprecationWarning: elementwise != comparison failed; this will raise an error in the future.</p>\n</blockquote>\n\n<p>on the larger data set (but not on the smaller replica) when trying the below</p>\n\n<pre><code>df[df.values != [0.1,1.2]]\n</code></pre>\n\n<p>//edit:</p>\n\n<p>@pensen, here is the output, rows 1, 15, 27, 35 have values '0.1' though as per the condition they should have been filtered. </p>\n\n<pre><code>contains = df.eq(3.2).any(axis=1)\nnot_contains = ~df.isin([0.1,1.2]).any(axis=1)\nprint(df[contains &amp; not_contains])\n      0    1    2    3    4    5    6    7\n1    0.1  2.1  3.2  0.0  0.0  0.0  0.0  0.0\n15   0.1  1.1  2.2  3.2  3.3  3.6  3.7  0.0\n27   0.1  2.1  2.3  3.2  3.6  3.7  4.3  0.0\n31   3.2  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n35   0.1  1.7  2.1  3.2  3.6  3.7  4.3  0.0\n</code></pre>\n\n<p>here is the original dataset from 0:36 rows to replicate the above output</p>\n\n<pre><code>      0    1    2    3    4    5    6    7\n 0   4.1  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n 1   0.1  2.1  3.2  0.0  0.0  0.0  0.0  0.0\n 2   0.1  2.4  2.5  0.0  0.0  0.0  0.0  0.0\n 3   2.4  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n 4   4.4  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n 5   1.1  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n 6   0.1  2.1  4.1  0.0  0.0  0.0  0.0  0.0\n 7   4.4  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n 8   1.7  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n 9   2.2  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n 10  1.1  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n 11  1.1  4.1  0.0  0.0  0.0  0.0  0.0  0.0\n 12  0.1  2.2  3.3  3.6  0.0  0.0  0.0  0.0\n 13  0.1  1.8  3.3  0.0  0.0  0.0  0.0  0.0\n 14  0.1  1.2  1.3  2.5  3.7  4.2  0.0  0.0\n 15  0.1  1.1  2.2  3.2  3.3  3.6  3.7  0.0\n 16  1.3  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n 17  1.3  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n 18  1.3  2.5  0.0  0.0  0.0  0.0  0.0  0.0\n 19  0.1  1.2  2.5  3.7  4.4  0.0  0.0  0.0\n 20  1.2  4.4  0.0  0.0  0.0  0.0  0.0  0.0\n 21  4.3  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n 22  1.1  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n 23  0.1  2.2  2.4  2.5  3.7  0.0  0.0  0.0\n 24  0.1  2.4  4.3  0.0  0.0  0.0  0.0  0.0\n 25  1.7  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n 26  0.1  1.1  4.1  0.0  0.0  0.0  0.0  0.0\n 27  0.1  2.1  2.3  3.2  3.6  3.7  4.3  0.0\n 28  1.4  2.2  3.6  4.1  0.0  0.0  0.0  0.0\n 29  1.8  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n 30  1.2  4.4  0.0  0.0  0.0  0.0  0.0  0.0\n 31  3.2  0.0  0.0  0.0  0.0  0.0  0.0  0.0\n 32  3.6  4.1  0.0  0.0  0.0  0.0  0.0  0.0\n 33  2.1  2.4  0.0  0.0  0.0  0.0  0.0  0.0\n 34  0.1  1.8  0.0  0.0  0.0  0.0  0.0  0.0\n 35  0.1  1.7  2.1  3.2  3.6  3.7  4.3  0.0\n</code></pre>\n\n<p>here is the <a href=\"https://www.dropbox.com/s/qky9kuqzxotvkvn/eq_universe.h5?dl=0\" rel=\"nofollow noreferrer\">link</a> to the actual dataset</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 0, "creation_date": 1488404960, "post_id": 42542702, "comment_id": 72221301, "body": "What comparison are you trying to perform? Looping is almost certainly not the answer, and that is a <i>very</i> small &quot;almost&quot;."}, {"owner": {"reputation": 4921, "user_id": 7366928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NG2zR.jpg?s=128&g=1", "display_name": "pansen", "link": "https://stackoverflow.com/users/7366928/pansen"}, "edited": false, "score": 0, "creation_date": 1488405017, "post_id": 42542702, "comment_id": 72221335, "body": "Try <code>for idx, (watch, diary) in df.iloc[:, [watchCoo, diaryCol]].iterrows()</code> where idx refers to your index column. But you probably don&#39;t even need to loop."}, {"owner": {"reputation": 4811, "user_id": 1462442, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4da53bea02367ebc6c8fe96f4f825961?s=128&d=identicon&r=PG", "display_name": "user1462442", "link": "https://stackoverflow.com/users/1462442/user1462442"}, "edited": false, "score": 0, "creation_date": 1488405127, "post_id": 42542702, "comment_id": 72221392, "body": "for watch, diary in zip(df.iloc[:, watchCol], df.iloc[:, diaryCol]):  would zip work? Zip packs the two list into a list of tuples"}, {"owner": {"reputation": 1195, "user_id": 1865106, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15dc57110dac17f6bae8187c8a405b11?s=128&d=identicon&r=PG&f=1", "display_name": "SSC", "link": "https://stackoverflow.com/users/1865106/ssc"}, "edited": false, "score": 0, "creation_date": 1488427730, "post_id": 42542702, "comment_id": 72228803, "body": "maybe you can look into <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html\" rel=\"nofollow noreferrer\"><code>numpy.where()</code></a>.  It allows you to set a condition and assign value to it when the condition is true."}], "answers": [{"tags": [], "owner": {"reputation": 335, "user_id": 2867744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40b71d3bbd91c148a6265d989f82e596?s=128&d=identicon&r=PG&f=1", "display_name": "dataflow", "link": "https://stackoverflow.com/users/2867744/dataflow"}, "is_accepted": true, "score": 0, "last_activity_date": 1488429704, "last_edit_date": 1488429704, "creation_date": 1488429313, "answer_id": 42546947, "question_id": 42542702, "link": "https://stackoverflow.com/questions/42542702/how-to-for-each-loop-through-two-columns-in-a-dataframe/42546947#42546947", "title": "How to for each loop through two columns in a dataframe?", "body": "<p>If you're trying to compare entries row by row, try this:</p>\n\n<pre><code>import pandas as pd  \ndf = pd.DataFrame({\"a\": [2, 2, 2, 2, 2], \"b\": [4, 3, 2, 1, 0]})\n\ndf[\"a greater than b\"] = df.apply(lambda x: x.a &gt; x.b, axis=1)\nprint df\n\n   a  b a greater than b\n0  2  4            False\n1  2  3            False\n2  2  2            False\n3  2  1             True\n4  2  0             True\n</code></pre>\n\n<p>That said, if you did want to loop through the elements row by row:</p>\n\n<pre><code>for a, b in zip(df.iloc[:, 0], df.iloc[:, 1]):\n    print a, b\n\n2 4\n2 3\n2 2\n2 1\n2 0\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 7632019, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3c2a93f74a51302400f22ed476eb4c79?s=128&d=identicon&r=PG&f=1", "display_name": "Luciano", "link": "https://stackoverflow.com/users/7632019/luciano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7405, "favorite_count": 0, "accepted_answer_id": 42546947, "answer_count": 1, "score": 0, "last_activity_date": 1488429704, "creation_date": 1488404775, "last_edit_date": 1488421068, "question_id": 42542702, "link": "https://stackoverflow.com/questions/42542702/how-to-for-each-loop-through-two-columns-in-a-dataframe", "title": "How to for each loop through two columns in a dataframe?", "body": "<p>I have a dataframe containing 7 columns and I want to simultaneously loop through two of them to compare the values in each row. This is my for loop header, where watchCol and diaryCol are column numbers:</p>\n\n<pre><code>for watch, diary in df.iloc[:, watchCol], df.iloc[:, diaryCol]:\n</code></pre>\n\n<p>When I run this, I get the following error on that line: </p>\n\n<blockquote>\n  <p>ValueError: too many values to unpack (expected 2)</p>\n</blockquote>\n\n<p>What am I doing wrong?</p>\n\n<p>Thanks</p>\n\n<p>EDIT:</p>\n\n<p>Both columns contain datetimes. I need to compare the two values, and if the difference is within a certain range, I copy the value from the watchCol into another column, otherwise I move to the next row.</p>\n"}, {"tags": ["python", "arrays", "numpy", "indexing", "reshape"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1488472206, "post_id": 42542683, "comment_id": 72255722, "body": "Did the posted solution work for you?"}, {"owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1488472517, "post_id": 42542683, "comment_id": 72255957, "body": "Yes it did thanks! This makes a lot of sense now."}], "answers": [{"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 1, "last_activity_date": 1488404866, "creation_date": 1488404866, "answer_id": 42542732, "question_id": 42542683, "link": "https://stackoverflow.com/questions/42542683/extracting-1d-arrays-from-3d-numpy-array-using-2d-boolean/42542732#42542732", "title": "Extracting 1d arrays from 3d numpy array using 2d boolean", "body": "<p>Simply mask along the last two axes -</p>\n\n<pre><code>arr[:,mask]\n</code></pre>\n"}], "owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "accepted_answer_id": 42542732, "answer_count": 1, "score": 0, "last_activity_date": 1488404866, "creation_date": 1488404686, "question_id": 42542683, "link": "https://stackoverflow.com/questions/42542683/extracting-1d-arrays-from-3d-numpy-array-using-2d-boolean", "title": "Extracting 1d arrays from 3d numpy array using 2d boolean", "body": "<p>Say I have a 3d numpy array:</p>\n\n<pre><code>i, j, k = 10, 3, 4\n\narr = np.arange(120).reshape(i, j, k)\n</code></pre>\n\n<p>and a 2d boolean array:</p>\n\n<pre><code>mask = np.random.random((j, k)) &gt; 0.5\n\nn = mask.sum()\n</code></pre>\n\n<p>I want to be able to extract the 1d arrays from <code>arr</code> along its 1st dimension which correspond with the <code>True</code> values of <code>mask</code>. The result should have shape, <code>(i, n)</code>. How could this be done?</p>\n\n<p>I pulling up some old code and for some reason I was doing <code>arr[mask]</code> but this gives a shape of <code>(n, k)</code> (I'm not sure why) and a warning:</p>\n\n<pre><code>VisibleDeprecationWarning: boolean index did not match indexed array along dimension 0; dimension is 10949 but corresponding boolean dimension is 11\n</code></pre>\n"}, {"tags": ["python", "mongodb", "python-2.7", "pymongo", "capped-collections"], "answers": [{"tags": [], "owner": {"reputation": 21948, "user_id": 618967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Vfh11.jpg?s=128&g=1", "display_name": "A. Jesse Jiryu Davis", "link": "https://stackoverflow.com/users/618967/a-jesse-jiryu-davis"}, "is_accepted": false, "score": 1, "last_activity_date": 1488410233, "creation_date": 1488410233, "answer_id": 42543967, "question_id": 42542646, "link": "https://stackoverflow.com/questions/42542646/specify-max-without-size-when-creating-mongodb-capped-collection/42543967#42543967", "title": "Specify `max` Without `size` when Creating MongoDB Capped Collection", "body": "<p><a href=\"https://docs.mongodb.com/manual/core/capped-collections/\" rel=\"nofollow noreferrer\">As the docs say</a>:</p>\n\n<blockquote>\n  <p>The size argument is always required, even when you specify max number of documents. MongoDB will remove older documents if a collection reaches the maximum size limit before it reaches the maximum document count.</p>\n</blockquote>\n\n<p>MongoDB pre-allocates data files of the requested maximum size, so set that size parameter to something reasonable.</p>\n"}], "owner": {"reputation": 51505, "user_id": 741099, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/9a7101fe3ba50e621e91ee1edf9d27bb?s=128&d=identicon&r=PG", "display_name": "Nyxynyx", "link": "https://stackoverflow.com/users/741099/nyxynyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488410233, "creation_date": 1488404576, "question_id": 42542646, "link": "https://stackoverflow.com/questions/42542646/specify-max-without-size-when-creating-mongodb-capped-collection", "title": "Specify `max` Without `size` when Creating MongoDB Capped Collection", "body": "<p>When trying to create a MongoDB capped collection with only a limit for the max number of documents and not a size limit (not sure how large will all the documents be), <code>pymongo</code> is giving the error</p>\n\n<pre><code>pymongo.errors.OperationFailure: specify size:&lt;n&gt; when capped is true\n</code></pre>\n\n<p>after running </p>\n\n<pre><code>db.create_collection('helloworld', capped=True, max=86400)\n</code></pre>\n\n<p>Is it possible to just define the <code>max</code> parameter?</p>\n\n<p>Otherwise, is there any danger in putting a very large number for <code>size</code>?</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "internet-explorer-11", "selenium-iedriver"], "comments": [{"owner": {"reputation": 2010, "user_id": 3034193, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/iUvK1.png?s=128&g=1", "display_name": "DaniDev", "link": "https://stackoverflow.com/users/3034193/danidev"}, "edited": false, "score": 0, "creation_date": 1488412599, "post_id": 42542571, "comment_id": 72224507, "body": "Could you add the code that you cant get to execute (It does sound like you have hot a security feature in I.E. 10 in which case there not much you can do )"}, {"owner": {"reputation": 359, "user_id": 770404, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/294c7a47292adc5ba812177e87fa8903?s=128&d=identicon&r=PG", "display_name": "derekmw", "link": "https://stackoverflow.com/users/770404/derekmw"}, "reply_to_user": {"reputation": 2010, "user_id": 3034193, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/iUvK1.png?s=128&g=1", "display_name": "DaniDev", "link": "https://stackoverflow.com/users/3034193/danidev"}, "edited": false, "score": 0, "creation_date": 1488415322, "post_id": 42542571, "comment_id": 72225345, "body": "It&#39;s something as simple as:   self.driver.find_element_by_xpath(&quot;//td[text()=&#39;Login&#39;]&quot;).cl&zwnj;&#8203;ick()    this will work fine on Windows 10 for FF and Chrome but not in IE11.  I have tried various alternatives like find_element_by_css_selector, by_id, by_name, etc.  But in all cases, it states that it cannot find the element.  I feel like there has to be something obvious I am not aware of by the fact that no one else seems to have posted this issue."}, {"owner": {"reputation": 359, "user_id": 770404, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/294c7a47292adc5ba812177e87fa8903?s=128&d=identicon&r=PG", "display_name": "derekmw", "link": "https://stackoverflow.com/users/770404/derekmw"}, "reply_to_user": {"reputation": 2010, "user_id": 3034193, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/iUvK1.png?s=128&g=1", "display_name": "DaniDev", "link": "https://stackoverflow.com/users/3034193/danidev"}, "edited": false, "score": 0, "creation_date": 1488520666, "post_id": 42542571, "comment_id": 72276732, "body": "Just to add, I created a very simple test using the sample examples listed for creating a basic selenium script (in this case, a python example).  I see the same behavior.  IE loads and navigates to the URL, but it cannot find any elements.  The script fails saying &quot;unable to find element with id ...&quot;.  Any help here or suggestions would be appreciated."}, {"owner": {"reputation": 5864, "user_id": 2575259, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/577b5db0256da160cf87a4788895b485?s=128&d=identicon&r=PG", "display_name": "Naveen Kumar R B", "link": "https://stackoverflow.com/users/2575259/naveen-kumar-r-b"}, "edited": false, "score": 0, "creation_date": 1488783515, "post_id": 42542571, "comment_id": 72367148, "body": "the solution given here <a href=\"http://stackoverflow.com/a/32624292/2575259\">stackoverflow.com/a/32624292/2575259</a> worked for me for the same environment that you are in."}, {"owner": {"reputation": 359, "user_id": 770404, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/294c7a47292adc5ba812177e87fa8903?s=128&d=identicon&r=PG", "display_name": "derekmw", "link": "https://stackoverflow.com/users/770404/derekmw"}, "edited": false, "score": 0, "creation_date": 1488809973, "post_id": 42542571, "comment_id": 72383582, "body": "Thanks, I never tried the first method (setting initial URL) but have already the registry set.  I just tried adding the capability &#39;initialBrowserUrl&#39; but still no go."}, {"owner": {"reputation": 359, "user_id": 770404, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/294c7a47292adc5ba812177e87fa8903?s=128&d=identicon&r=PG", "display_name": "derekmw", "link": "https://stackoverflow.com/users/770404/derekmw"}, "edited": false, "score": 0, "creation_date": 1488814674, "post_id": 42542571, "comment_id": 72387126, "body": "Quick update for anyone else struggling with this.  I already tried uninstalling any security updates (to rule them out) but nothing has helped.  I finally decided to just create a new VM with fresh Windows 10 and it&#39;s working.  So I cannot say for certain what happened to this original VM but some where along the line, something changed and Selenium stopped working for IE.  it&#39;s frustrating but I feel, after wasting 4 full days trying to get this to work, that it is better to just start fresh and ditch this broken VM."}, {"owner": {"reputation": 957, "user_id": 604131, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acde3f47ffe10bf9d823951fe5e8b284?s=128&d=identicon&r=PG", "display_name": "Mark Lapierre", "link": "https://stackoverflow.com/users/604131/mark-lapierre"}, "edited": false, "score": 0, "creation_date": 1489101276, "post_id": 42542571, "comment_id": 72536410, "body": "For completeness, have you checked every point listed here: <a href=\"https://github.com/SeleniumHQ/selenium/wiki/InternetExplorerDriver#required-configuration\" rel=\"nofollow noreferrer\">github.com/SeleniumHQ/selenium/wiki/&hellip;</a>"}, {"owner": {"reputation": 359, "user_id": 770404, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/294c7a47292adc5ba812177e87fa8903?s=128&d=identicon&r=PG", "display_name": "derekmw", "link": "https://stackoverflow.com/users/770404/derekmw"}, "edited": false, "score": 0, "creation_date": 1489171815, "post_id": 42542571, "comment_id": 72570972, "body": "Yes, that is what I initially followed and since following those did not help, started venturing out and trying other suggestions."}], "answers": [{"comments": [{"owner": {"reputation": 359, "user_id": 770404, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/294c7a47292adc5ba812177e87fa8903?s=128&d=identicon&r=PG", "display_name": "derekmw", "link": "https://stackoverflow.com/users/770404/derekmw"}, "edited": false, "score": 0, "creation_date": 1488988469, "post_id": 42662700, "comment_id": 72476388, "body": "Right, sorry for the term &#39;broken VM&#39;.  I know the VM is not necessarily broken but I suspect some update (whether a patch/security update to OS or Browser) has happened which is causing this.  However, being that I don&#39;t seem to have a way to undo this, I said that.  If you find a way to get it to work, I&#39;m all ears and will be grateful.  I kept this VM in place and am going to do a compare between the two to see if I can isolate it as well."}], "tags": [], "owner": {"reputation": 337, "user_id": 6080394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8ece7c17ffe3a8c525d82dc46e4c43?s=128&d=identicon&r=PG&f=1", "display_name": "Simon N", "link": "https://stackoverflow.com/users/6080394/simon-n"}, "is_accepted": false, "score": 0, "last_activity_date": 1488945223, "last_edit_date": 1495535401, "creation_date": 1488945223, "answer_id": 42662700, "question_id": 42542571, "link": "https://stackoverflow.com/questions/42542571/selenium-3-0-1-with-ie11-not-finding-elements-on-windows-10-works-fine-on-windo/42662700#42662700", "title": "Selenium 3.0.1 with IE11 not finding elements on Windows 10 (Works fine on Windows 7 with IE11)", "body": "<p>Although I'm sure you not that bothered now, I logged the same issue a few days ago and I'm still stuck (<a href=\"https://stackoverflow.com/questions/42619899/cannot-find-any-elements-using-internet-explorer-11-and-selenium-any-version-a\">click here</a>). I have further narrowed down the problem to security. If you increase logging you will see the below lines:</p>\n\n<pre><code>W 2017-03-06 17:27:41:539 Script.cpp(494) -2147024891 [Access is denied.]: Unable to execute code, call to IHTMLWindow2::execScript failed\nW 2017-03-06 17:27:41:540 Script.cpp(180) Cannot create anonymous function\nW 2017-03-06 17:27:41:540 ElementFinder.cpp(98) A JavaScript error was encountered executing the findElement atom. \n</code></pre>\n\n<p>I have tried every security option on/off but to no avail. I'm getting the problem locally and haven't set up my CI environment so hoping that when i spin it up it should just work (fingers crossed).</p>\n\n<p>P.S. I don't think you had a broken VM!!</p>\n"}, {"comments": [{"owner": {"reputation": 359, "user_id": 770404, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/294c7a47292adc5ba812177e87fa8903?s=128&d=identicon&r=PG", "display_name": "derekmw", "link": "https://stackoverflow.com/users/770404/derekmw"}, "edited": false, "score": 0, "creation_date": 1488988387, "post_id": 42663091, "comment_id": 72476312, "body": "Thanks for the suggestion but no, this does not work for IE.  It&#39;s important to note that the simple find element calls work fine in FF and CH.  Just not IE11 on Windows 10."}], "tags": [], "owner": {"reputation": 113, "user_id": 7669487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Lvg41.jpg?s=128&g=1", "display_name": "Chase G.", "link": "https://stackoverflow.com/users/7669487/chase-g"}, "is_accepted": false, "score": 0, "last_activity_date": 1488947620, "creation_date": 1488947620, "answer_id": 42663091, "question_id": 42542571, "link": "https://stackoverflow.com/questions/42542571/selenium-3-0-1-with-ie11-not-finding-elements-on-windows-10-works-fine-on-windo/42663091#42663091", "title": "Selenium 3.0.1 with IE11 not finding elements on Windows 10 (Works fine on Windows 7 with IE11)", "body": "<p>Whenever I stumble across a 'NoSuchElementException' (albeit not on Windows or IE), this has always worked:</p>\n\n<p>Add these imports: </p>\n\n<pre><code>from selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.common.by import By\n</code></pre>\n\n<p>Then to locate the element:</p>\n\n<pre><code>search_field = WebDriverWait(driver, 10).until(EC.presence_of_element_located((By.XPATH, \"\"\"//*[@id=\"lst-ib\"]\"\"\")))\nsearch_field.send_keys('Example')\n</code></pre>\n\n<p>Credit to Web Scraping with Python. I hope this helps, although at the moment I don't have windows or IE to verify this in advance.</p>\n"}], "owner": {"reputation": 359, "user_id": 770404, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/294c7a47292adc5ba812177e87fa8903?s=128&d=identicon&r=PG", "display_name": "derekmw", "link": "https://stackoverflow.com/users/770404/derekmw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1686, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1499655890, "creation_date": 1488404322, "last_edit_date": 1488571687, "question_id": 42542571, "link": "https://stackoverflow.com/questions/42542571/selenium-3-0-1-with-ie11-not-finding-elements-on-windows-10-works-fine-on-windo", "title": "Selenium 3.0.1 with IE11 not finding elements on Windows 10 (Works fine on Windows 7 with IE11)", "body": "<ul>\n<li>OS: Windows 10</li>\n<li>Browser: IE11</li>\n<li>Selenium (Python) package: 3.0.1</li>\n<li>IEWebDriverServer.exe: 3.1.0</li>\n</ul>\n\n<p>We are getting ready to migrate our automation nodes to Windows 10 and during our tests, we found that although our scripts work fine on Win7 on FF, IE, and Chrome, they fail on Windows 10 only for IE (works fine for FF and Chrome).</p>\n\n<p>When running agianst IE, the browser instantiates and webdriver is able to see the browser (I tried a simple command such as driver.back() which returns to previous page).  However, we cannot get any find_element... calls to work.  Whether it be by id, name, css, xpath, etc. The script will just fail stating that no element was found for the given id/name/css/xpath (whatever method I tried to use to find the webelement).</p>\n\n<p>I have seen posts regarding security updates that broke this and suggesting to revert the update.  This was a year ago though and it seems subsequent updates have fixed this issue.</p>\n\n<p>I have also read posts about making sure the protected mode is the same across all zones, a registry value, etc.  None of these suggestions have worked though.</p>\n\n<p>Here is the sample script I am using which (when modified to run in Chrome or Firefox passes) does not work in IE11 only:</p>\n\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.common.keys import Keys\n\ndriver = webdriver.Ie()\ndriver.implicitly_wait(30)\ndriver.maximize_window()\n\n# navigate to the application home page\ndriver.get(\"http://www.google.com\")\n\n# get the search textbox\nsearch_field = driver.find_element_by_id(\"lst-ib\")\n</code></pre>\n\n<p>The error from running this script is:</p>\n\n<pre><code>selenium.common.exceptions.NoSuchElementException: Message: Unable to find element with id == lst-ib\n</code></pre>\n"}, {"tags": ["python", "generator"], "comments": [{"owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "edited": false, "score": 3, "creation_date": 1488404434, "post_id": 42542562, "comment_id": 72220997, "body": "<code>my_gen()</code> creates a new generator. That is, <code>next(p)</code> isn&#39;t equivalent to just calling <code>my_gen()</code> repeatedly."}, {"owner": {"reputation": 3236, "user_id": 6876009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/201968908078a1f1ea776c886d93631a?s=128&d=identicon&r=PG&f=1", "display_name": "f5r5e5d", "link": "https://stackoverflow.com/users/6876009/f5r5e5d"}, "edited": false, "score": 0, "creation_date": 1488406479, "post_id": 42542562, "comment_id": 72222049, "body": "you can just use the generator: <code>print(*my_gen())</code>     <code>0 2 4 6</code>"}], "answers": [{"comments": [{"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 1, "creation_date": 1488404621, "post_id": 42542619, "comment_id": 72221117, "body": "python&#39;s naming of generators / iterators / crazy a** functions is a little broken. It adds great functionality, but the way many of them are explained only confuses people"}, {"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "reply_to_user": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "edited": false, "score": 2, "creation_date": 1488405284, "post_id": 42542619, "comment_id": 72221481, "body": "@aaron can you explain why they are broken?"}, {"owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "reply_to_user": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 1, "creation_date": 1488405783, "post_id": 42542619, "comment_id": 72221723, "body": "@PaulRooney many people refer to generators, iterators, and coroutines (async functions, etc.) interchangably. There are technically individual separate definitions, but the subtle differences can easily confuse those who haven&#39;t poked around in the cPython source to learn what&#39;s actually happening.. This is one aspect I prefer about Lua over python in that there are functions and co-routines and nothing else. (but that&#39;s a little bit apples to oranges)"}], "tags": [], "owner": {"reputation": 170455, "user_id": 149341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/omfTQ.png?s=128&g=1", "display_name": "duskwuff -inactive-", "link": "https://stackoverflow.com/users/149341/duskwuff-inactive"}, "is_accepted": true, "score": 2, "last_activity_date": 1488404518, "creation_date": 1488404518, "answer_id": 42542619, "question_id": 42542562, "link": "https://stackoverflow.com/questions/42542562/why-must-i-use-a-variable-to-get-values-from-a-python-generator/42542619#42542619", "title": "Why must I use a variable to get values from a Python generator?", "body": "<pre><code>print(next(my_gen()))\n</code></pre>\n\n<p>Each time this runs, you're calling <code>next()</code> on a separate (and brand-new) generator returned by <code>my_gen()</code>.</p>\n\n<p>If you want to call <code>next()</code> on the same generator more than once, you'll need some way to keep that generator around for long enough to reuse it.</p>\n"}, {"tags": [], "owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "is_accepted": false, "score": 1, "last_activity_date": 1488405389, "last_edit_date": 1488405389, "creation_date": 1488404982, "answer_id": 42542757, "question_id": 42542562, "link": "https://stackoverflow.com/questions/42542562/why-must-i-use-a-variable-to-get-values-from-a-python-generator/42542757#42542757", "title": "Why must I use a variable to get values from a Python generator?", "body": "<p>just gonna add my $0.02...</p>\n\n<p>this may help clear up some misconceptions:</p>\n\n<pre><code>def function_that_creates_a_generator(n):\n    while n&gt;0:\n        yield n\n        n - 1\n\n# this\nfor x in function_that_creates_a_generator(5):\n    print(x)\n\n#is almost exactly the same as this\ngenerator = function_that_creates_a_generator(5)\nwhile True:\n    try:\n        x = generator.next() #same as: x = next(generator)\n    except StopIteration:\n        break\n    print(x)\n</code></pre>\n\n<p>For loops are really just a prettier way of writing a while loop that continually asks an iterable object for its next element. when you ask an iterable for another object and it has none, it will raise a <code>StopIteration</code> exception that is automatically caught in for loops; signaling a break from the loop. In the while loop we simply break these things out individually instead of having them hidden by the interpreter.</p>\n"}], "owner": {"reputation": 323, "user_id": 5852964, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0d0a84f2aeec2c00c64a7e71bb8541b2?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Dennis", "link": "https://stackoverflow.com/users/5852964/patrick-dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 42542619, "answer_count": 2, "score": 0, "last_activity_date": 1488405389, "creation_date": 1488404298, "question_id": 42542562, "link": "https://stackoverflow.com/questions/42542562/why-must-i-use-a-variable-to-get-values-from-a-python-generator", "title": "Why must I use a variable to get values from a Python generator?", "body": "<p>Why must I use a variable to obtain next() values from a Python generator?</p>\n\n<pre><code>    def my_gen():\n    i = 0\n    while i &lt; 4:\n         yield 2 * i\n         i += 1\n\n#p = my_gen()\n#for i in range(4):\n#    print(next(p))\n\n##for i in range(4):\n##    print(next(my_gen()))\n</code></pre>\n\n<p>In the above, the  #  block works, while the  ##  block returns 4 copies of the first \"yield.\"</p>\n"}, {"tags": ["python", "class"], "comments": [{"owner": {"reputation": 348226, "user_id": 267, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1b11262da6d1cd26b1b0bc99a2620cee?s=128&d=identicon&r=PG", "display_name": "Lasse V. Karlsen", "link": "https://stackoverflow.com/users/267/lasse-v-karlsen"}, "edited": false, "score": 1, "creation_date": 1488404786, "post_id": 42542555, "comment_id": 72221204, "body": "If <code>self</code> is a class, it is unlikely you can &quot;convert&quot; it into a list with this statement: <code>self = []</code>, but it would help if you told us exactly which line number 200 is."}, {"owner": {"reputation": 3, "user_id": 7601116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f2fbb2728675208460f97cc034c9d?s=128&d=identicon&r=PG&f=1", "display_name": "MattxxttaM", "link": "https://stackoverflow.com/users/7601116/mattxxttam"}, "reply_to_user": {"reputation": 348226, "user_id": 267, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1b11262da6d1cd26b1b0bc99a2620cee?s=128&d=identicon&r=PG", "display_name": "Lasse V. Karlsen", "link": "https://stackoverflow.com/users/267/lasse-v-karlsen"}, "edited": false, "score": 0, "creation_date": 1488406023, "post_id": 42542555, "comment_id": 72221825, "body": "Sorry :)  Line 200 is the line listed in the error code        DISPLAYSURF.blit(playerImg[playerspriteframe],(playerx,playe&zwnj;&#8203;ry))  It comes from the master program trying to call the class"}], "answers": [{"tags": [], "owner": {"reputation": 1661, "user_id": 3646485, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5dcdad9655553f3f4bd76c0bad18add5?s=128&d=identicon&r=PG", "display_name": "Hans", "link": "https://stackoverflow.com/users/3646485/hans"}, "is_accepted": true, "score": 0, "last_activity_date": 1488406090, "creation_date": 1488406090, "answer_id": 42543047, "question_id": 42542555, "link": "https://stackoverflow.com/questions/42542555/class-defining-returning-a-object-does-not-support-indexing/42543047#42543047", "title": "Class defining returning a object does not support indexing", "body": "<p>If you want to access your custom class as a list you must implement <a href=\"http://blog.teamtreehouse.com/operator-overloading-python\" rel=\"nofollow noreferrer\">operator overloading</a>, especially <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__getitem__\" rel=\"nofollow noreferrer\">__getitem__</a>:</p>\n\n<p>Sample code: (I implemented a list <code>items</code> to store the items)</p>\n\n<pre><code>import pygame\n\nclass sprite32 (pygame.sprite.Sprite):\n    items = []\n\n    def __init__( self , sprite_sheet_name , x , y , x_total , y_total ):\n        #sprite_sheet_name = original PNG sprite file\n        #x = width of a single sprite frame\n        #y = height of a single sprite frame\n        #x_total = number of sprites columns (width)\n        #y_total = number of sprites rows (height)\n        #self = variable name\n        sprite_sheet_convert = pygame.image.load(sprite_sheet_name)\n        for i in range(x_total - 1):\n            t = i\n            for i in range(y_total - 1):\n                self.items.append(sprite_sheet_convert.subsurface((t,i,x,y)))\n\n    def __getitem__(self, key):\n        return self.items[key]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7601116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b0f2fbb2728675208460f97cc034c9d?s=128&d=identicon&r=PG&f=1", "display_name": "MattxxttaM", "link": "https://stackoverflow.com/users/7601116/mattxxttam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1033, "favorite_count": 0, "accepted_answer_id": 42543047, "answer_count": 1, "score": -1, "last_activity_date": 1488406090, "creation_date": 1488404277, "last_edit_date": 1488405724, "question_id": 42542555, "link": "https://stackoverflow.com/questions/42542555/class-defining-returning-a-object-does-not-support-indexing", "title": "Class defining returning a object does not support indexing", "body": "<p>This is my first attempt at defining a class.  My intention is to provide dimensions of sprites and totals of frames in a sprite page and have the class calculate start and stop points for all of the frames.  Then, it would add them to a tuple containing all of the completed math so it can blit the sprite at the correct time and location to create the animation.  It works if I manually add all of the frame locations to the tuple in the main game program in this way:</p>\n\n<pre><code>    ninjaImg = pygame.image.load('mainp32.png')\n    playerImg[0]=(ninjaImg.subsurface((0,0,32,32)))\n    playerImg[1]=(ninjaImg.subsurface((32,0,32,32)))\n    #and so on....\n</code></pre>\n\n<p>But the above code is gonna get cluttered very quickly and I'd like to use this same class to pull animation frames for other characters later in the game.</p>\n\n<p>I think the math is solid, but I suspect there is something I don't know about lists / tuples that is causing this error.  Any help would be greatly appreciated.  I've read 4 tutorials on lists/tuples, and it just isn't helping me...   </p>\n\n<p>Here is my code:</p>\n\n<pre><code>import pygame\n\nclass sprite32 (pygame.sprite.Sprite):\n    def __init__( self , sprite_sheet_name , x , y , x_total , y_total ):\n        #sprite_sheet_name = original PNG sprite file\n        #x = width of a single sprite frame\n        #y = height of a single sprite frame\n        #x_total = number of sprites columns (width)\n        #y_total = number of sprites rows (height)\n        #self = variable name\n        self = []\n        sprite_sheet_convert = pygame.image.load(sprite_sheet_name)\n        for i in range(x_total - 1):\n            t = i\n            for i in range(y_total - 1):\n                self.append(sprite_sheet_convert.subsurface((t,i,x,y)))\n</code></pre>\n\n<p>and error message:</p>\n\n<pre><code>C:\\Python31&gt;w.py\nTraceback (most recent call last):\n  File \"C:\\Python31\\w.py\", line 200, in &lt;module&gt;\n    DISPLAYSURF.blit(playerImg[playerspriteframe],(playerx,playery))\nTypeError: 'sprite32' object does not support indexing\n</code></pre>\n"}, {"tags": ["python", "scrapy", "instagram", "instagram-api", "scrapy-spider"], "comments": [{"owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "edited": false, "score": 0, "creation_date": 1488404411, "post_id": 42542531, "comment_id": 72220978, "body": "You can display directory structure by using <code>tree</code> command."}, {"owner": {"reputation": 17034, "user_id": 858913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/b5015a60c08feee1d8116be3dd70878d?s=128&d=identicon&r=PG", "display_name": "eLRuLL", "link": "https://stackoverflow.com/users/858913/elrull"}, "edited": false, "score": 0, "creation_date": 1488404492, "post_id": 42542531, "comment_id": 72221030, "body": "you don&#39;t have a <code>scraper_user</code> package (folder)"}, {"owner": {"reputation": 16919, "user_id": 3737009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/1A6EG.png?s=128&g=1", "display_name": "Granitosaurus", "link": "https://stackoverflow.com/users/3737009/granitosaurus"}, "edited": false, "score": 0, "creation_date": 1488404493, "post_id": 42542531, "comment_id": 72221031, "body": "Judging by your tree it should be <code>instragram.items</code> instead of <code>scrapy_user.items</code> shouldn&#39;t it?"}], "answers": [{"tags": [], "owner": {"reputation": 23680, "user_id": 2414957, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0MuAW.jpg?s=128&g=1", "display_name": "Mona Jalal", "link": "https://stackoverflow.com/users/2414957/mona-jalal"}, "is_accepted": false, "score": 0, "last_activity_date": 1488410802, "creation_date": 1488410802, "answer_id": 42544090, "question_id": 42542531, "link": "https://stackoverflow.com/questions/42542531/from-scraper-user-items-import-useritem-importerror-no-module-named-scraper-use/42544090#42544090", "title": "From scraper_user.items import UserItem ImportError: No module named scraper_user.items", "body": "<p>I changed these lines in spider.py:</p>\n\n<pre><code>  3 from instagram.items import UserItem\n  4 from instagram.items import PostItem\n</code></pre>\n\n<p>And these lines in items.py:</p>\n\n<pre><code>  1 import scrapy\n  2 from scrapy.item import Item, Field\n  3 \n  4 class UserItem(Item):\n  5     username = Field()\n  6     follows_count = Field()\n  7     followed_by_count = Field()\n  8     is_verified = Field()\n  9     biography = Field()\n 10     external_link = Field()\n 11     full_name = Field()\n 12     posts_count = Field()\n 13     posts = Field()\n 14 \n 15 \n 16 class PostItem(Item):\n 17     code = Field()\n 18     likes = Field()\n 19     thumbnail = Field()\n 20     caption = Field()\n 21     hashtags = Field()\n~ \n</code></pre>\n\n<p>While it doesn't have the previous error, it has this new error which I didn't know how to fix:</p>\n\n<pre><code>mona@pascal:~/computer_vision/instagram/instagram$ scrapy crawl instagramspider\n2017-03-01 17:24:03-0600 [scrapy] INFO: Scrapy 0.14.4 started (bot: instagram)\n2017-03-01 17:24:04-0600 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, MemoryUsage, SpiderState\nTraceback (most recent call last):\n  File \"/usr/bin/scrapy\", line 4, in &lt;module&gt;\n    execute()\n  File \"/usr/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 132, in execute\n    _run_print_help(parser, _run_command, cmd, args, opts)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 97, in _run_print_help\n    func(*a, **kw)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 139, in _run_command\n    cmd.run(args, opts)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/commands/crawl.py\", line 43, in run\n    spider = self.crawler.spiders.create(spname, **opts.spargs)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/command.py\", line 34, in crawler\n    self._crawler.configure()\n  File \"/usr/lib/python2.7/dist-packages/scrapy/crawler.py\", line 36, in configure\n    self.spiders = spman_cls.from_crawler(self)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/spidermanager.py\", line 37, in from_crawler\n    return cls.from_settings(crawler.settings)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/spidermanager.py\", line 33, in from_settings\n    return cls(settings.getlist('SPIDER_MODULES'))\n  File \"/usr/lib/python2.7/dist-packages/scrapy/spidermanager.py\", line 23, in __init__\n    for module in walk_modules(name):\n  File \"/usr/lib/python2.7/dist-packages/scrapy/utils/misc.py\", line 65, in walk_modules\n    submod = __import__(fullpath, {}, {}, [''])\n  File \"/home/mona/computer_vision/instagram/instagram/instagram/spiders/spider.py\", line 7, in &lt;module&gt;\n    class InstagramSpider(scrapy.Spider):\nAttributeError: 'module' object has no attribute 'Spider'\n</code></pre>\n"}], "owner": {"reputation": 23680, "user_id": 2414957, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0MuAW.jpg?s=128&g=1", "display_name": "Mona Jalal", "link": "https://stackoverflow.com/users/2414957/mona-jalal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 663, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1488411080, "creation_date": 1488404197, "last_edit_date": 1488404619, "question_id": 42542531, "link": "https://stackoverflow.com/questions/42542531/from-scraper-user-items-import-useritem-importerror-no-module-named-scraper-use", "title": "From scraper_user.items import UserItem ImportError: No module named scraper_user.items", "body": "<p>I am following this guide for scraping data from instagram: \n<a href=\"http://www.spataru.at/scraping-instagram-scrapy/\" rel=\"nofollow noreferrer\">http://www.spataru.at/scraping-instagram-scrapy/</a>\nbut I get this error:</p>\n\n<pre><code>mona@pascal:~/computer_vision/instagram/instagram$ ls\ninstagram  scrapy.cfg\nmona@pascal:~/computer_vision/instagram/instagram$ scrapy crawl instagramspider\n2017-03-01 15:30:10-0600 [scrapy] INFO: Scrapy 0.14.4 started (bot: instagram)\n2017-03-01 15:30:10-0600 [scrapy] DEBUG: Enabled extensions: LogStats, TelnetConsole, CloseSpider, WebService, CoreStats, MemoryUsage, SpiderState\nTraceback (most recent call last):\n  File \"/usr/bin/scrapy\", line 4, in &lt;module&gt;\n    execute()\n  File \"/usr/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 132, in execute\n    _run_print_help(parser, _run_command, cmd, args, opts)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 97, in _run_print_help\n    func(*a, **kw)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/cmdline.py\", line 139, in _run_command\n    cmd.run(args, opts)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/commands/crawl.py\", line 43, in run\n    spider = self.crawler.spiders.create(spname, **opts.spargs)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/command.py\", line 34, in crawler\n    self._crawler.configure()\n  File \"/usr/lib/python2.7/dist-packages/scrapy/crawler.py\", line 36, in configure\n    self.spiders = spman_cls.from_crawler(self)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/spidermanager.py\", line 37, in from_crawler\n    return cls.from_settings(crawler.settings)\n  File \"/usr/lib/python2.7/dist-packages/scrapy/spidermanager.py\", line 33, in from_settings\n    return cls(settings.getlist('SPIDER_MODULES'))\n  File \"/usr/lib/python2.7/dist-packages/scrapy/spidermanager.py\", line 23, in __init__\n    for module in walk_modules(name):\n  File \"/usr/lib/python2.7/dist-packages/scrapy/utils/misc.py\", line 65, in walk_modules\n    submod = __import__(fullpath, {}, {}, [''])\n  File \"/home/mona/computer_vision/instagram/instagram/instagram/spiders/spider.py\", line 3, in &lt;module&gt;\n    from scraper_user.items import UserItem\nImportError: No module named scraper_user.items\n</code></pre>\n\n<p>I followed the complete tutorial so I am not sure what's missing or how to fix this?</p>\n\n<p>Here's the folder structure:</p>\n\n<pre><code>mona@pascal:~/computer_vision/instagram/instagram$ tree .\n.\n\u251c\u2500\u2500 instagram\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 __init__.pyc\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 items.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 pipelines.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 settings.py\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 settings.pyc\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 spiders\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 __init__.py\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 __init__.pyc\n\u2502\u00a0\u00a0     \u251c\u2500\u2500 spider.py\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 spider.pyc\n\u2514\u2500\u2500 scrapy.cfg\n\n2 directories, 11 files\n</code></pre>\n\n<p>here's the spider.py code from the tutorial:</p>\n\n<pre><code>  1 import scrapy\n  2 import json\n  3 from scraper_user.items import UserItem\n  4 from scraper_user.items import PostItem\n  5 \n  6 \n  7 class InstagramSpider(scrapy.Spider):\n  8 \n  9     name = 'instagramspider'\n 10     allowed_domains = ['instagram.com']\n 11     start_urls = []\n 12 \n 13     def __init__(self):\n 14         self.start_urls = [\"https://www.instagram.com/_spataru/?__a=1\"]\n 15 \n 16     def parse(self, response):\n 17         #get the json file\n 18         json_response = {}\n 19         try:\n 20             json_response = json.loads(response.body_as_unicode())\n 21         except:\n 22             self.logger.info('%s doesnt exist', response.url)\n 23             pass\n 24         if json_response[\"user\"][\"is_private\"]:\n 25             return;\n 26         #check if the username even worked\n 27         try:\n 28             json_response = json_response[\"user\"]\n 29 \n 30             item = UserItem()\n 31 \n 32             #get User Info\n 33             item[\"username\"] = json_response[\"username\"]\n 34             item[\"follows_count\"] = json_response[\"follows\"][\"count\"]\n 35             item[\"followed_by_count\"] = json_response[\"followed_by\"][\"count\"]\n 36             item[\"is_verified\"] = json_response[\"is_verified\"]\n 37             item[\"biography\"] = json_response.get(\"biography\")\n 38             item[\"external_link\"] = json_response.get(\"external_url\")\n 39             item[\"full_name\"] = json_response.get(\"full_name\")\n 40             item[\"posts_count\"] = json_response.get(\"media\").get(\"count\")\n 41 \n 42             #interate through each post\n 43             item[\"posts\"] = []\n 44 \n 45             json_response = json_response.get(\"media\").get(\"nodes\")\n 46             if json_response:\n 47                 for post in json_response:\n 48                     items_post = PostItem()\n 49                     items_post[\"code\"]=post[\"code\"]\n 50                     items_post[\"likes\"]=post[\"likes\"][\"count\"]\n 51                     items_post[\"caption\"]=post[\"caption\"]\n 52                     items_post[\"thumbnail\"]=post[\"thumbnail_src\"]\n 53                     item[\"posts\"].append(dict(items_post))\n 54 \n 55             return item\n 56         except:\n 57             self.logger.info(\"Error during parsing %s\", response.url)\n</code></pre>\n\n<p>Here's the items.py code:</p>\n\n<pre><code>  1 import scrapy\n  2 \n  3 class UserItem(scrapy.Item):\n  4     username = scrapy.Field()\n  5     follows_count = scrapy.Field()\n  6     followed_by_count = scrapy.Field()\n  7     is_verified = scrapy.Field()\n  8     biography = scrapy.Field()\n  9     external_link = scrapy.Field()\n 10     full_name = scrapy.Field()\n 11     posts_count = scrapy.Field()\n 12     posts = scrapy.Field()\n 13 \n 14 \n 15 class PostItem(scrapy.Item):\n 16     code = scrapy.Field()\n 17     likes = scrapy.Field()\n 18     thumbnail = scrapy.Field()\n 19     caption = scrapy.Field()\n 20     hashtags = scrapy.Field()\n</code></pre>\n"}, {"tags": ["python", "svg", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1488410323, "post_id": 42542503, "comment_id": 72223721, "body": "I just copied your code and ran it in python 2.7. Using matplotlib 2.0, both plots have the same filesize (141kB) and svg figure size. Using matplotlib 1.5, Plot1.svg has 151kB and Plot2.svg has148 kB. But they both have the same figure size in the svg file. Conclusion: I cannot reproduce this issue."}, {"owner": {"reputation": 378, "user_id": 3804434, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cCJV5.jpg?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/3804434/brian"}, "edited": false, "score": 0, "creation_date": 1488477159, "post_id": 42542503, "comment_id": 72259007, "body": "I am also unable to reproduce your issue using python 3.5 and matplotlib 1.5. Is this an issue with loading the svg into Inkscape?"}], "owner": {"reputation": 871, "user_id": 5683778, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/bXLFl.jpg?s=128&g=1", "display_name": "June Skeeter", "link": "https://stackoverflow.com/users/5683778/june-skeeter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1488404127, "creation_date": 1488404127, "question_id": 42542503, "link": "https://stackoverflow.com/questions/42542503/matplotlib-svg-output-exhibits-odd-behavior", "title": "Matplotlib svg output exhibits odd behavior", "body": "<p>I am making a polar plot of wind distribution over a time period and I am saving it in svg format to include it in a figure i'm making in inkscape.</p>\n\n<p>Here is an example of my data:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\nTheta =  np.asanyarray([11.25,  33.75,  56.25,  78.75, 101.25, 123.75, 146.25, 168.75,\n              191.25, 213.75, 236.25, 258.75, 281.25, 303.75, 326.25])\n\nR = np.asanyarray([5.4,2.4,1.2,2.6,5.4,2.3,5.8,5.4,3.3,1.8,1.0,4.0,13.1,7.6,3.2])\n\nfig, axes = plt.subplots(nrows = 1, ncols = 1,subplot_kw={'projection': 'polar'},figsize = (2,2))\n\naxes.set_theta_direction(-1)\naxes.set_theta_offset(0)\naxes.set_theta_zero_location('N')\naxes.set_thetagrids([0,90,180,270],['N','E','S','W'])\naxes.bar((Theta)*np.pi/180,R,width=2*np.pi/Theta.shape[0],edgecolor='black')\nplt.savefig('Plot1.svg')\n</code></pre>\n\n<p>When I just run it like this everything works fine.  However, theta in my data set represents the bin centers, while it is plotted as the bin edges, so I'd like to subtract half the bin width so it aligns with the proper wind direction</p>\n\n<pre><code>fig, axes = plt.subplots(nrows = 1, ncols = 1,subplot_kw={'projection': 'polar'},figsize = (2,2))\naxes.set_theta_direction(-1)\naxes.set_theta_offset(0)\naxes.set_theta_zero_location('N')\naxes.set_thetagrids([0,90,180,270],['N','E','S','W'])\naxes.bar((Theta-11.25)*np.pi/180,R,width=2*np.pi/Theta.shape[0],edgecolor='black')\nplt.savefig('Plot2.svg')\n</code></pre>\n\n<p>The only difference between the two plots is the subtraction of a constant from Plot2.  However, when I import them into inkscape they are very different sizes.    </p>\n\n<p><a href=\"https://i.stack.imgur.com/0kfyH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0kfyH.png\" alt=\"enter image description here\"></a></p>\n\n<p>Plot 1 is (2 in x 2 in) as I specified, but for some reason Plot 2 is (38.357 in x 2 in)?  Additionally, the resulting files are different sizes 147 kb for Plot 1 vs 145 kb for Plot 2.  However, if I save them as .png files instead, they both maintain the proper dimensions and are the same file size.</p>\n\n<p>I can clip it in inkscape and work around the issue, but I'd just like to know why it is happening so I can prevent it in the future??</p>\n"}, {"tags": ["python", "xml", "xslt", "mime-types", "file-extension"], "answers": [{"tags": [], "owner": {"reputation": 3258, "user_id": 1993206, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LhdIi.jpg?s=128&g=1", "display_name": "Aleksey Bilogur", "link": "https://stackoverflow.com/users/1993206/aleksey-bilogur"}, "is_accepted": true, "score": 0, "last_activity_date": 1491101789, "creation_date": 1491101789, "answer_id": 43164148, "question_id": 42542433, "link": "https://stackoverflow.com/questions/42542433/why-does-python-mimetype-guess-xsl-when-passed-an-xml-file/43164148#43164148", "title": "Why does Python mimetype guess XSL when passed an XML file?", "body": "<p>Apparently there are a host of these, and the Python mimetypes module shouldn't generally be relied upon for these kinds of operations. See <a href=\"https://bugs.python.org/issue29823\" rel=\"nofollow noreferrer\">the bug I filed in the Python bug tracker</a> (and from there, the \"superissue\").</p>\n"}], "owner": {"reputation": 3258, "user_id": 1993206, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LhdIi.jpg?s=128&g=1", "display_name": "Aleksey Bilogur", "link": "https://stackoverflow.com/users/1993206/aleksey-bilogur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 43164148, "answer_count": 1, "score": 0, "last_activity_date": 1491101789, "creation_date": 1488403883, "question_id": 42542433, "link": "https://stackoverflow.com/questions/42542433/why-does-python-mimetype-guess-xsl-when-passed-an-xml-file", "title": "Why does Python mimetype guess XSL when passed an XML file?", "body": "<p>When passed a file with a mimetype <code>application/xml</code>, the Python std lib <code>mimetypes.guess_extension</code> method guesses an <code>.xsl</code> extension. This is actually <a href=\"https://svn.python.org/projects/python/trunk/Lib/mimetypes.py\" rel=\"nofollow noreferrer\">hard-coded in</a>. </p>\n\n<p>Why does it do that?</p>\n"}, {"tags": ["python", "json", "network-programming", "remoteobject", "pyro"], "comments": [{"owner": {"reputation": 1974, "user_id": 2453542, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6d8d60dfccbf59f3a924466e2a71d244?s=128&d=identicon&r=PG", "display_name": "James Paterson", "link": "https://stackoverflow.com/users/2453542/james-paterson"}, "edited": false, "score": 0, "creation_date": 1488404022, "post_id": 42542427, "comment_id": 72220762, "body": "Also just a note - yes I could just decode the base64 string but I want to know <i>why</i> it&#39;s doing this (And if I write code to decode base64 and it switches back I&#39;ll have to re-debug it)."}], "answers": [{"tags": [], "owner": {"reputation": 1974, "user_id": 2453542, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6d8d60dfccbf59f3a924466e2a71d244?s=128&d=identicon&r=PG", "display_name": "James Paterson", "link": "https://stackoverflow.com/users/2453542/james-paterson"}, "is_accepted": false, "score": 0, "last_activity_date": 1488406222, "creation_date": 1488406222, "answer_id": 42543080, "question_id": 42542427, "link": "https://stackoverflow.com/questions/42542427/pyro4-encoding-in-json-base64/42543080#42543080", "title": "Pyro4 Encoding in JSON/Base64", "body": "<p>Turns out Pyro doesn't like trying to send raw bytes - It'd rather convert the bytes to base64 then send it as JSON. So to fix, I changed:</p>\n\n<pre><code>def prep(obj):\n    return json.dumps(obj).encode(\"utf-8\");\n</code></pre>\n\n<p>to </p>\n\n<pre><code>def prep(obj):\n    return json.dumps(obj);\n</code></pre>\n\n<p>And put the encode bit in the client. </p>\n"}, {"comments": [{"owner": {"reputation": 1974, "user_id": 2453542, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6d8d60dfccbf59f3a924466e2a71d244?s=128&d=identicon&r=PG", "display_name": "James Paterson", "link": "https://stackoverflow.com/users/2453542/james-paterson"}, "edited": false, "score": 0, "creation_date": 1488478781, "post_id": 42562879, "comment_id": 72259979, "body": "Thanks for the clearer and more detailed answer. The data is later sent over a socket connection (which needs bytes) , so I wanted to do all the processing in a single step."}, {"owner": {"reputation": 2408, "user_id": 4451406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d18767747a91ded9aa995def8e4ab1?s=128&d=identicon&r=PG", "display_name": "Irmen de Jong", "link": "https://stackoverflow.com/users/4451406/irmen-de-jong"}, "reply_to_user": {"reputation": 1974, "user_id": 2453542, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6d8d60dfccbf59f3a924466e2a71d244?s=128&d=identicon&r=PG", "display_name": "James Paterson", "link": "https://stackoverflow.com/users/2453542/james-paterson"}, "edited": false, "score": 0, "creation_date": 1488479147, "post_id": 42562879, "comment_id": 72260204, "body": "Ok, there&#39;s one other thing: why are you json-encoding at all in your server? Just return the response object as-is, and let the client decide what to do with it!"}, {"owner": {"reputation": 1974, "user_id": 2453542, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6d8d60dfccbf59f3a924466e2a71d244?s=128&d=identicon&r=PG", "display_name": "James Paterson", "link": "https://stackoverflow.com/users/2453542/james-paterson"}, "edited": false, "score": 0, "creation_date": 1488482132, "post_id": 42562879, "comment_id": 72261929, "body": "It&#39;s slightly more complicated. I have this server/client configuration, which then sends to another client. Eg: Datastore ---(Pyro)---&gt; Frontend ---(Socket)---&gt; Client, hence why I&#39;m not just using the RMI object directly."}], "tags": [], "owner": {"reputation": 2408, "user_id": 4451406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0d18767747a91ded9aa995def8e4ab1?s=128&d=identicon&r=PG", "display_name": "Irmen de Jong", "link": "https://stackoverflow.com/users/4451406/irmen-de-jong"}, "is_accepted": true, "score": 1, "last_activity_date": 1488478454, "creation_date": 1488478454, "answer_id": 42562879, "question_id": 42542427, "link": "https://stackoverflow.com/questions/42542427/pyro4-encoding-in-json-base64/42562879#42562879", "title": "Pyro4 Encoding in JSON/Base64", "body": "<p>The default serialization protocol that Pyro uses is serpent, and that is a text-based protocol. This means it cannot transmit binary data (bytes) unless it encodes them to a text format, which it does in the way you discovered. </p>\n\n<p>There's a little helper function (<code>serpent.tobytes</code>) available that you could use in your client code that automatically detects and converts the response if needed, see the info box in this paragraph in the manual: <a href=\"https://pythonhosted.org/Pyro4/tipstricks.html?highlight=base64#binary-data-transfer-file-transfer\" rel=\"nofollow noreferrer\">https://pythonhosted.org/Pyro4/tipstricks.html?highlight=base64#binary-data-transfer-file-transfer</a></p>\n\n<p>Ofcourse, if you make the data sent by your server strings in the first place, there's no need for this. (This can't be done if the data really <em>is</em> binary though, such as an image or sound clip or whatever)</p>\n\n<p>In your case with the json text it gets transformed into <em>bytes</em> if you <code>encode</code> it. As you discovered there is no need for this at all, just leave it as a string and you won't run into issues. (which leaves me with the question why you're still doing the encode to utf-8  bytes in your client?)</p>\n"}], "owner": {"reputation": 1974, "user_id": 2453542, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/6d8d60dfccbf59f3a924466e2a71d244?s=128&d=identicon&r=PG", "display_name": "James Paterson", "link": "https://stackoverflow.com/users/2453542/james-paterson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 42562879, "answer_count": 2, "score": 0, "last_activity_date": 1488478454, "creation_date": 1488403854, "question_id": 42542427, "link": "https://stackoverflow.com/questions/42542427/pyro4-encoding-in-json-base64", "title": "Pyro4 Encoding in JSON/Base64", "body": "<p>So I have a simple application using Pyro4 (Python Remote Objects). There is an exposed class <code>API</code>, and I have a file that calls the function <code>api.parse(input,userid)</code>, which returns some JSON dependent on input. However, instead of simply returning the result as a string (which it did previously), it returns <code>{'data': 'eyJlcnJvciI6ICJDb21tYW5kIG5vdCByZWNvZ25pc2VkIn0=', 'encoding': 'base64'}\n</code>, where the base64 is the JSON string that <code>parse</code> should returned.</p>\n\n<p>I'm very confused as to why this is not working - I have tested it previously and there was no issue, the string was just returned with no weird base64 encoding. Only thing I can think of is I have changed networks (School connection to home connection) but I don't think this should be a problem? I have prepared an MVE of some code that indicates the problem.</p>\n\n<h3>testserver.py</h3>\n\n<pre><code>import Pyro4;\nimport json;\n\n@Pyro4.expose\nclass API:\n    def parse(self,buff,userid):\n        return prep({\"error\":\"Command not recognised\"});\n\ndef prep(obj):\n    return json.dumps(obj).encode(\"utf-8\");\n\n# Pyro stuff\ndaemon = Pyro4.Daemon()                # make a Pyro daemon\nns = Pyro4.locateNS()                  # find the name server\nuri = daemon.register(API)   # register the greeting maker as a Pyro object\nns.register(\"testAPI\", uri)   # register the object with a name in the name server\ndaemon.requestLoop()\n</code></pre>\n\n<h3>testclient.py</h3>\n\n<pre><code>import Pyro4;\nimport json;\n\napi = Pyro4.Proxy(\"PYRONAME:testAPI\");\nresp = api.parse(\"whatever\",\"something\");\nprint(resp); # Produces {'data': 'eyJlcnJvciI6ICJDb21tYW5kIG5vdCByZWNvZ25pc2VkIn0=', 'encoding': 'base64'}\n# I just want b'{\"error\":\"Command not recognised\"}'\n</code></pre>\n\n<p>Note - Printing at the stage where <code>prep</code> is applied in <code>parse()</code> gives the expected result <code>b'{\"error\":\"Command not recognised\"}'</code>. I'm using the command <code>python3 -m Pyro4.naming</code> to start the nameserver if that matters as well. I'm thinking there's probably some global setting/constant I haven't set correctly or something - All responses welcome, thankyou!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 9142, "user_id": 1442918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7490251da02084a2e2720e20029d2bff?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/1442918/max"}, "edited": false, "score": 4, "creation_date": 1488403955, "post_id": 42542423, "comment_id": 72220721, "body": "You may need parentheses to clarify the order of operations: <code>if playerChoice == 1 and (CPUChoice == 3 or CPUChoice == 4):</code>"}, {"owner": {"reputation": 7081, "user_id": 789671, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/feaaeb3d021966d84450cbfb24b1824a?s=128&d=identicon&r=PG", "display_name": "glibdud", "link": "https://stackoverflow.com/users/789671/glibdud"}, "edited": false, "score": 1, "creation_date": 1488404117, "post_id": 42542423, "comment_id": 72220823, "body": "What Max said. From a quick glance, it looks like the player will always win if the CPU picks 3, 4, or 5. The CPU should stand a chance if he picks 1 or 2."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 2, "creation_date": 1488404119, "post_id": 42542423, "comment_id": 72220824, "body": "Don&#39;t have a function call itself to start it over, as you are doing in <code>instructions()</code> and <code>getPlayerChoice()</code>.  That&#39;s called recursion and isn&#39;t what you want here.  Instead, use a while loop until you get the response you want."}, {"owner": {"reputation": 14358, "user_id": 3962537, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AI0Bc.png?s=128&g=1", "display_name": "Dan Ma\u0161ek", "link": "https://stackoverflow.com/users/3962537/dan-ma%c5%a1ek"}, "edited": false, "score": 1, "creation_date": 1488404208, "post_id": 42542423, "comment_id": 72220868, "body": "The recursion in <code>getPlayerChoice()</code> looks flawed -- you try again, but end up returning the invalid value. IMHO solving this particular problem with recursion is not a good choice. A simple loop would work fine."}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6110955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4648968aa26cbe2a44159d6c309fa07e?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Taboul", "link": "https://stackoverflow.com/users/6110955/amir-taboul"}, "is_accepted": false, "score": 2, "last_activity_date": 1488404264, "creation_date": 1488404264, "answer_id": 42542549, "question_id": 42542423, "link": "https://stackoverflow.com/questions/42542423/rock-paper-scissors-lizard-spock-python/42542549#42542549", "title": "rock paper scissors lizard spock, Python", "body": "<p>The reason is you are missing parentheses on all of the \"if\" conditions.</p>\n\n<pre><code>if False and True or True # =True\nif False and (True or False) # =False \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18103, "user_id": 6220679, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LK4H1.png?s=128&g=1", "display_name": "skrx", "link": "https://stackoverflow.com/users/6220679/skrx"}, "edited": false, "score": 0, "creation_date": 1488409158, "post_id": 42542797, "comment_id": 72223273, "body": "<i>&quot;if True or True and False --&gt; this basically calculates the True or True part first&quot;</i>  That&#39;s incorrect. <code>and</code> has a higher <a href=\"https://docs.python.org/3/reference/expressions.html\" rel=\"nofollow noreferrer\">operator precedence</a> than <code>or</code>, so <code>True and False</code> is evaluated first and the final result is <code>True</code>."}, {"owner": {"reputation": 3, "user_id": 7643875, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SHXmRYtqkRM/AAAAAAAAAAI/AAAAAAAAABM/GudvjEfzM6w/photo.jpg?sz=128", "display_name": "Trevor Ellis", "link": "https://stackoverflow.com/users/7643875/trevor-ellis"}, "edited": false, "score": 0, "creation_date": 1488418603, "post_id": 42542797, "comment_id": 72226197, "body": "Thank you so much!!! I&#39;m new to programming and kinda get messed up thanks for the advice!!"}], "tags": [], "owner": {"reputation": 1044, "user_id": 6451874, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fcba324f29f2095a65d59ba83dd4bdd?s=128&d=identicon&r=PG&f=1", "display_name": "Ofer Arial", "link": "https://stackoverflow.com/users/6451874/ofer-arial"}, "is_accepted": true, "score": 1, "last_activity_date": 1488405123, "creation_date": 1488405123, "answer_id": 42542797, "question_id": 42542423, "link": "https://stackoverflow.com/questions/42542423/rock-paper-scissors-lizard-spock-python/42542797#42542797", "title": "rock paper scissors lizard spock, Python", "body": "<p>To summarize all of the things you should pay attention to:</p>\n\n<ol>\n<li><p><strong>boolean conditions</strong> - the result changes with the parentheses that are inside the condition. </p>\n\n<p><code>if True or (True and False)</code> --> this basically calculates the <code>True and False</code> part first (like in regular math) and then you have <code>True or False</code> which evaluates to True. </p>\n\n<p><code>if True or True and False</code> --> this basically calculates the <code>True or True</code> part first (like in regular math) and then you have <code>True and False</code> which evaluates to False - <strong>because you don't use parentheses.</strong> </p></li>\n<li><p><strong>Do not call a function within the same function</strong> - this is called <code>recursion</code>, and it's not for the what you need. Use a <code>while</code> loop, that runs as long as <strong>i.e.</strong> -  you didn't get a proper choice input (<code>while choice!='n' and choice!='y':</code>).</p></li>\n<li><p><strong>Your instrcuions choice</strong> - the choice made by the user doesn't really change the flow of the game. the game starts also if the user entered <code>no</code>. You should Add an exit statement in the <code>instructions</code> function.</p></li>\n</ol>\n"}], "owner": {"reputation": 3, "user_id": 7643875, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SHXmRYtqkRM/AAAAAAAAAAI/AAAAAAAAABM/GudvjEfzM6w/photo.jpg?sz=128", "display_name": "Trevor Ellis", "link": "https://stackoverflow.com/users/7643875/trevor-ellis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4774, "favorite_count": 0, "accepted_answer_id": 42542797, "answer_count": 2, "score": 0, "last_activity_date": 1488405123, "creation_date": 1488403841, "question_id": 42542423, "link": "https://stackoverflow.com/questions/42542423/rock-paper-scissors-lizard-spock-python", "title": "rock paper scissors lizard spock, Python", "body": "<p>I am creating a rock paper scissors lizard spock game in Python for my class and i am trying to figure out why whatever choice I make I am always winning even though I set up all my if statements correct. `</p>\n\n<pre><code>import random\n\ndef instructions():\n    play = input(\"Would you like to play Rock, Paper, Scissors, Lizard, Spock(y/n): \").lower()\n    if play == \"y\":\n        print(\"1.Rock\")\n        print(\"2.Paper\")\n        print(\"3.Scissors\")\n        print(\"4.Lizard\")\n        print(\"5.Spock\")\n\n    elif play != \"n\":\n        print(\"error has accured please type y for yes or n for no:\")\n        instructions()\n\n\n\n\ndef getPlayerChoice():\n    choice = int(input(\"What is your choice user?: \"))\n    if choice &gt; 5:\n        print(\"Invalid number please try again....\")\n        getPlayerChoice()\n    elif choice &lt; 1:\n        print(\"Invalid number please try again....\")\n        getPlayerChoice()\n    elif choice == 1:\n        print(\"You picked Rock\")\n    elif choice == 2:\n        print(\"You picked Paper\")\n    elif choice == 3:\n        print(\"You picked Scissors\")\n    elif choice == 4:\n        print(\"You picked Lizard\")\n    elif choice == 5:\n        print(\"You picked Spock\")\n    return choice\n\ndef getCPUChoice():\n    choice = random.randint(1,5)\n    if choice == 1:\n        print(\"CPU picked Rock\")\n    elif choice == 2:\n        print(\"CPU picked Paper\")\n    elif choice == 3:\n        print(\"CPU picked Scissors\")\n    elif choice == 4:\n        print(\"CPU picked Lizard\")\n    elif choice == 5:\n        print(\"CPU picked Spock\")\n    return choice\n\ndef winner(playerChoice, CPUChoice, playerWins, CPUWins, ties):\n    if playerChoice == 1 and CPUChoice == 3 or CPUChoice == 4:\n        print(\"Player wins.\")\n        playerWins = playerWins.append(1) \n    elif playerChoice == 2 and CPUChoice == 1 or CPUChoice == 5:\n        print(\"Player wins.\")\n        playerWins = playerWins.append(1) \n    elif playerChoice == 3 and CPUChoice == 2 or CPUChoice == 4:\n        print(\"Player wins.\")\n        playerWins = playerWins.append(1) \n    elif playerChoice == 4 and CPUChoice == 2 or CPUChoice == 5:\n        print(\"Player wins.\")\n        playerWins = playerWins.append(1)\n    elif playerChoice == 5 and CPUChoice == 1 or CPUChoice == 3:\n        print(\"Player wins.\")\n        playerWins = playerWins.append(1)\n    elif playerChoice == CPUChoice:\n        print(\"Tie\")\n        ties = ties.append(1)\n    else:\n        print(\"CPU won\")\n        CPUWins = CPUWins.append(1) \n    return\n\ndef gameTotal(playerWins, CPUWins, ties):\n    playerWins = sum(playerWins)\n    CPUWins = sum(CPUWins)\n    ties = sum(ties)\n    print(\"Player final score: \", playerWins)\n    print(\"CPU final Score: \", CPUWins)\n    print(\"Total ties: \",ties)\n\ndef main():\n    playerChoice = 0\n    playerWins = []\n    CPUChoice = 0\n    CPUWins = []\n    ties = []\n    finalPlayerWins = 0\n    finalCPUWins = 0\n    finalTies = 0\n    Continue = 'y'\n    instructions()\n    while Continue == 'y':\n        playerChoice = getPlayerChoice()\n        CPUChoice = getCPUChoice()\n        winner(playerChoice,CPUChoice,playerWins, CPUWins, ties)\n        Continue = input(\"Would you like to play again (y/n):\").lower()\n        if Continue == 'n':\n            print(\"Printing final scores.\")\n            break\n    gameTotal(playerWins, CPUWins, ties)\n\n\nmain()\n</code></pre>\n\n<p>`</p>\n"}, {"tags": ["python", "path", "directory"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "edited": false, "score": 0, "creation_date": 1488404415, "post_id": 42542486, "comment_id": 72220985, "body": "So in my case it would be: sys.path.append(os.path.join(os.path.dirname(IJ.exe), &#39;/recources&#39;)) ?? Im not completely understanding, again, Im pretty new to programming"}, {"owner": {"reputation": 46, "user_id": 7625847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90e39bc3339069e261a14d4d09ff8a47?s=128&d=identicon&r=PG&f=1", "display_name": "jnsod", "link": "https://stackoverflow.com/users/7625847/jnsod"}, "reply_to_user": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "edited": false, "score": 0, "creation_date": 1488404604, "post_id": 42542486, "comment_id": 72221100, "body": "with <b>file</b> instead of IJ.exe like above (it does not show the 2 dunder here). This part is for the current directory of the script. I guess without slash before resources"}, {"owner": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "edited": false, "score": 0, "creation_date": 1488404644, "post_id": 42542486, "comment_id": 72221131, "body": "Will try to do it"}], "tags": [], "owner": {"reputation": 46, "user_id": 7625847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90e39bc3339069e261a14d4d09ff8a47?s=128&d=identicon&r=PG&f=1", "display_name": "jnsod", "link": "https://stackoverflow.com/users/7625847/jnsod"}, "is_accepted": false, "score": 0, "last_activity_date": 1488404067, "creation_date": 1488404067, "answer_id": 42542486, "question_id": 42542386, "link": "https://stackoverflow.com/questions/42542386/using-python-2-7-to-call-an-application-in-a-sub-folder-of-the-folder-containing/42542486#42542486", "title": "Using Python 2.7 to call an application in a sub folder of the folder containing the .py", "body": "<p>You have to provide the path and can use the sys module, e.g. like this</p>\n\n<pre><code>import sys\nimport os\nsys.path.append(os.path.join(os.path.dirname(__file__), 'relative_path_to_your_file'))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18942, "user_id": 894328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3db17c5296335f63e856be44aa821bf6?s=128&d=identicon&r=PG", "display_name": "Ahmed Masud", "link": "https://stackoverflow.com/users/894328/ahmed-masud"}, "is_accepted": true, "score": 1, "last_activity_date": 1488404509, "creation_date": 1488404509, "answer_id": 42542615, "question_id": 42542386, "link": "https://stackoverflow.com/questions/42542386/using-python-2-7-to-call-an-application-in-a-sub-folder-of-the-folder-containing/42542615#42542615", "title": "Using Python 2.7 to call an application in a sub folder of the folder containing the .py", "body": "<p>Just add the relative path:</p>\n\n<p><code>.</code> means starting from present-working-directory (usually the location where the program is launched from).</p>\n\n<p>So if you are launching the main program from the same folder that it's in then: </p>\n\n<pre><code>def Button3():\n    os.startfile('./resources/procexp.exe')\ndef Button4():\n    os.startfile('./resources/IJ.exe')\ndef Button5():\n    os.startfile('./resources/Br.exe')\ndef Button6():\n    os.startfile('./resources/Cs.exe')\n</code></pre>\n\n<p>However that's not usually the case, most of the time you would launch the program from wherever you are (either because it's in your PATH environment) or by supplying the full path to it.  In that case you want to figure out where the program is installed and then figure out where you put the resources relative to it:</p>\n\n<p>the special variable  <code>__file__</code> contains where your script is including the path to it.  You can get the directory name by using <code>dirname</code> method in the <code>os.path</code> package:</p>\n\n<pre><code>     program_dir = os.path.dirname(__file__)\n</code></pre>\n\n<p>You can then work relative to that:</p>\n\n<pre><code>     resource_dir = os.path.join(program_dir, 'resources')\n</code></pre>\n\n<p><code>os.path.join</code> is a way to join path bits together in a operating system agonstic way.  </p>\n\n<p>So eventually your program can become:</p>\n\n<pre><code>     resource_dir = os.path.join(os.path.dirname(__file__), 'resources');\n\ndef Button3():\n    os.startfile(os.path.join(resource_dir, 'procexp.exe'))\ndef Button4():\n    os.startfile(os.path.join(resource_dir, 'IJ.exe'))\ndef Button5():\n    os.startfile(os.path.join(resource_dir, 'Br.exe'))\ndef Button6():\n    os.startfile(os.path.join(resource_dir, 'Cs.exe'))\n</code></pre>\n\n<p>etc.</p>\n\n<p>Of course in order to use os.path you need to import it:</p>\n\n<pre><code>  import os;\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 7619556, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-xLhq18vx5zs/AAAAAAAAAAI/AAAAAAAAAnQ/4WuOeNHdviY/photo.jpg?sz=128", "display_name": "Jmilicev", "link": "https://stackoverflow.com/users/7619556/jmilicev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 42542615, "answer_count": 2, "score": 2, "last_activity_date": 1488404509, "creation_date": 1488403700, "question_id": 42542386, "link": "https://stackoverflow.com/questions/42542386/using-python-2-7-to-call-an-application-in-a-sub-folder-of-the-folder-containing", "title": "Using Python 2.7 to call an application in a sub folder of the folder containing the .py", "body": "<p>I was wondering if there was a way to call an external application that is in the sub folder of the existing folder (To look like Figure 1, And not Figure 2). Im aware I can have it open a specific file path, however I need this to work on ANY computer when the folder is in ANY directory, Which simply would not work in when on another computer.</p>\n\n<p>Figure 1:\n<a href=\"https://gyazo.com/4c98428836e03e0b7a3e2c6bf2c0d9e1\" rel=\"nofollow noreferrer\">https://gyazo.com/4c98428836e03e0b7a3e2c6bf2c0d9e1</a></p>\n\n<p>Figure 2:\n<a href=\"https://gyazo.com/8e0263ee7918e2fa26653a1dcc6187c7\" rel=\"nofollow noreferrer\">https://gyazo.com/8e0263ee7918e2fa26653a1dcc6187c7</a></p>\n\n<p>I'm currently using code that looks like this to launch them, But it only works when its in the same folder:</p>\n\n<pre><code>def Button3():\n    os.startfile('procexp.exe')\ndef Button4():\n    os.startfile('IJ.exe')\ndef Button5():\n    os.startfile('Br.exe')\ndef Button6():\n    os.startfile('Cs.exe')\n</code></pre>\n\n<p>Sorry if this seems as a bit of a newbie question, But it would really help me out if I got an answer on this </p>\n"}, {"tags": ["python", "python-2.7", "hash", "string-comparison"], "comments": [{"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1488404130, "post_id": 42542379, "comment_id": 72220833, "body": "Please show examples of <code>results1&#47;2&#47;3</code> so that we can understand their structure and what you&#39;re trying to achieve."}], "answers": [{"comments": [{"owner": {"reputation": 223, "user_id": 1598306, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1e65614030a55bc77d86a36139c7469f?s=128&d=identicon&r=PG", "display_name": "NineTail", "link": "https://stackoverflow.com/users/1598306/ninetail"}, "edited": false, "score": 0, "creation_date": 1488405164, "post_id": 42542677, "comment_id": 72221415, "body": "I think that did it. I will run some tests to confirm but initially looks good."}], "tags": [], "owner": {"reputation": 116, "user_id": 3307764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fa5ac9449f88658f0994ad8cc8a248b?s=128&d=identicon&r=PG&f=1", "display_name": "Milad.H", "link": "https://stackoverflow.com/users/3307764/milad-h"}, "is_accepted": true, "score": 2, "last_activity_date": 1488404667, "creation_date": 1488404667, "answer_id": 42542677, "question_id": 42542379, "link": "https://stackoverflow.com/questions/42542379/three-way-comparison-using-hash/42542677#42542677", "title": "Three way comparison using hash", "body": "<p>You have error in line 3. <strong><em>result3</em></strong> only has a tuple of size 3 and you're unpacking it to 5 values.</p>\n\n<pre><code>for hostname, filename, filehash in results1.values():\n    if hostname in results2 and hostname in results3:\n        _, filename2, filehash2 = results2[hostname]\n        _, filename3, filehash3 = results3[hostname]\n        if filehash != filehash2 or filehash != filehash3:\n            print (\"%s has a change (%s, %s, %s)\" % (\n                hostname, filehash, filehash2, filehash3))\n            print(filename)\n            print(filename2)\n            print(filename3)\n</code></pre>\n"}], "owner": {"reputation": 223, "user_id": 1598306, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1e65614030a55bc77d86a36139c7469f?s=128&d=identicon&r=PG", "display_name": "NineTail", "link": "https://stackoverflow.com/users/1598306/ninetail"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 42542677, "answer_count": 1, "score": -1, "last_activity_date": 1488404667, "creation_date": 1488403667, "last_edit_date": 1488404616, "question_id": 42542379, "link": "https://stackoverflow.com/questions/42542379/three-way-comparison-using-hash", "title": "Three way comparison using hash", "body": "<p>I need a way to compare three hashes based on the hostname I've extracted. I have a function to compare two but looking to combine it to do all three in one function.</p>\n\n<p>All variables have been captured and stored previously. This is just a comparison check.</p>\n\n<p>I do not want to us isdiff or some other function if it can be avoided.</p>\n\n<p>Need to compare three results.</p>\n\n<p>results1 = {'uspn-hs-r3': ('uspn-hs-r3', 'archive\\uspn-hs-r3.cfg', '23d516b3f2f438327b1a19fa63868621a87b8c8b')' etc.....</p>\n\n<p>These values can very, hence the compare. The string is far to long to show it all. However the hostname in this case is uspn-hs-r3 followed by the :, then the directory it was in, followed by the hash.</p>\n\n<p>results2\nresults3</p>\n\n<p><strong>Two Way Comparison:</strong></p>\n\n<pre><code>for hostname, filename, filehash in results1.values():\n        if hostname in results2:\n            _, filename2, filehash2 = results2[hostname]\n            if filehash != filehash2:\n                print (\"%s has a change (%s, %s)\" % (\n                    hostname, filehash, filehash2))\n                print(filename)\n                print(filename2)\n</code></pre>\n\n<p><strong>Failed 3 way:</strong></p>\n\n<pre><code>for hostname, filename, filehash in results1.values():\n    if hostname in results2 and hostname in results3:\n        _, filename2, filehash2, filename3, filehash3 = results3[hostname]\n        if filehash != filehash2 or filehash != filehash3:\n            print (\"%s has a change (%s, %s)\" % (\n                    hostname, filehash, filehash2, filehash3))\n            print(filename)\n            print(filename2)\n            print(filename3)\n</code></pre>\n"}, {"tags": ["python", "django", "forms", "django-forms"], "comments": [{"owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 0, "creation_date": 1488404781, "post_id": 42542358, "comment_id": 72221200, "body": "You should add blank=True, in each field in models.py that you want to let the possiblity to be empty"}, {"owner": {"reputation": 187, "user_id": 4671441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10200347456365342/picture?type=large", "display_name": "WhoKnows", "link": "https://stackoverflow.com/users/4671441/whoknows"}, "reply_to_user": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "edited": false, "score": 1, "creation_date": 1488406092, "post_id": 42542358, "comment_id": 72221861, "body": "I&#39; dont think that it&#39;s a solution - when i leave Contest in ContestForm blank, i expect that ContestForm entry will be deleted."}], "answers": [{"tags": [], "owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "is_accepted": true, "score": 2, "last_activity_date": 1488475537, "creation_date": 1488475537, "answer_id": 42561990, "question_id": 42542358, "link": "https://stackoverflow.com/questions/42542358/django-formset-this-field-is-required/42561990#42561990", "title": "Django form(set) - this field is required", "body": "<p>Did you try to add blank=True ?</p>\n\n<pre><code>class Contest(models.Model):\n    name = models.CharField('Contest Name', max_length=100,blank=True)\n\nclass ContestForms(models.Model):\n    contest = models.ForeignKey(Contest, on_delete=models.CASCADE,blank=True,null=True)\n</code></pre>\n"}], "owner": {"reputation": 187, "user_id": 4671441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10200347456365342/picture?type=large", "display_name": "WhoKnows", "link": "https://stackoverflow.com/users/4671441/whoknows"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1721, "favorite_count": 0, "accepted_answer_id": 42561990, "answer_count": 1, "score": 0, "last_activity_date": 1488475537, "creation_date": 1488403594, "last_edit_date": 1488404133, "question_id": 42542358, "link": "https://stackoverflow.com/questions/42542358/django-formset-this-field-is-required", "title": "Django form(set) - this field is required", "body": "<p>When i am editing my form/formset and remove one ContestForm, in most of times it simply doesnt change and and i see error \"this field is required\"\ne. g. there was \"Form XYZ\", i changed it to \"----\" (blank) and after submitting it shows \"this field is required\" as you can see in the screenshot\n<a href=\"https://i.stack.imgur.com/epYeZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/epYeZ.png\" alt=\"This field is required\"></a>\nViews.py:</p>\n\n<pre><code>def contest_admin(request, contest_slug):\n    contest = get_object_or_404(Contest, slug=contest_slug)\n    ontestFormsFormSet = inlineformset_factory(Contest,\n                                            ContestForms,\n                                            fields=('form', 'main_entry', 'user_modifiable',),\n                                            extra=2,\n                                            )\n    contest_desc = ContestDescForm(request.POST or None, instance=contest)\n    contest_forms = ContestFormsFormSet(request.POST or None, instance=contest)\n    if request.method == 'POST':\n        if contest_desc.is_valid() and contest_forms.is_valid():\n            contest_desc.save()\n            contest_forms.save()\n    context = {\n        ...\n    }\n    template_name = \"contests/admin/_admin.html\"\n    return render(request, template_name, context)\n</code></pre>\n\n<p>Models.py:</p>\n\n<pre><code>class Contest(models.Model):\n    name = models.CharField('Contest Name', max_length=100)\n    slug = models.SlugField(unique=True)\n    capacity = models.IntegerField('Capacity')\n    team_size = models.IntegerField('Team size', default=1)\n    description = models.CharField('Description', max_length=1000)\n    date_opened = models.DateField('Date opened')\n    date_registration_closed = models.DateField('Date registration closed')\n    date_closed = models.DateField('Date closed')\n    forms = models.ManyToManyField(FormEntry, through='ContestForms')\n\nclass ContestForms(models.Model):\n    contest = models.ForeignKey(Contest, on_delete=models.CASCADE)\n    form = models.OneToOneField(FormEntry)\n    main_entry = models.BooleanField('Main entry')\n    user_modifiable = models.BooleanField('Modifiable')\n\n    class Meta:\n        verbose_name_plural = \"ContestForms\"\n</code></pre>\n\n<p>Forms.py:</p>\n\n<pre><code>class ContestDescForm(forms.ModelForm):\n    widget_attrs = {\n    'class': \"form-control\",\n    'type': 'date',\n}\n    description = CharField(widget=forms.Textarea)\n    date_opened = DateField(widget=DateInput(attrs={'type': 'date'}))\n    date_registration_closed = DateField(widget=DateInput(attrs={'type': 'date'}))\n    date_closed = DateField(widget=DateInput(attrs={'type': 'date'}))\n\n    class Meta:\n        model = Contest\n        exclude = ('slug', 'forms',)\n\n\nclass ContestFormsForm(forms.ModelForm):\n    form = ModelChoiceField(required=False, queryset=FormEntry.objects.all())\n\nclass Meta:\n    model = ContestForms\n    exclude = ()\n</code></pre>\n\n<p><strong>EDIT:</strong>\nTemplate:</p>\n\n<pre><code>&lt;form method=\"post\" action=\"\"&gt;\n    {% csrf_token %}\n        {{ contest_desc|bootstrap }}\n            &lt;table&gt;\n            {{ contest_forms|bootstrap_inline }}\n            &lt;/table&gt;\n        &lt;div class=\"form-group\"&gt;\n            &lt;button type=\"submit\" class=\"btn btn-primary\"&gt;Submit&lt;/button&gt;\n        &lt;/div&gt;\n    &lt;/form&gt;\n</code></pre>\n"}, {"tags": ["python", "tweepy"], "answers": [{"comments": [{"owner": {"reputation": 1713, "user_id": 4325994, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/nePfO.png?s=128&g=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/4325994/nate"}, "edited": false, "score": 0, "creation_date": 1488404882, "post_id": 42542410, "comment_id": 72221256, "body": "Thanks a bunch! Is there a way to find all the elements of the object that I can reference with the dot notation? Currently, I&#39;m just looking through the printed output and taking note, but I figure there&#39;s got to be a better way."}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 1713, "user_id": 4325994, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/nePfO.png?s=128&g=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/4325994/nate"}, "edited": false, "score": 0, "creation_date": 1488405085, "post_id": 42542410, "comment_id": 72221369, "body": "@Nate sure, I think the full underlying JSON object is available at <code>status._json</code>.."}, {"owner": {"reputation": 1713, "user_id": 4325994, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/nePfO.png?s=128&g=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/4325994/nate"}, "edited": false, "score": 0, "creation_date": 1488407926, "post_id": 42542410, "comment_id": 72222743, "body": "Thanks again @alecxe. For anyone looking for a quick answer: status._json.keys()"}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 4, "last_activity_date": 1488403794, "creation_date": 1488403794, "answer_id": 42542410, "question_id": 42542327, "link": "https://stackoverflow.com/questions/42542327/how-to-extract-information-from-tweepy-resultset/42542410#42542410", "title": "How to extract information from Tweepy ResultSet", "body": "<p><code>tweepy.ResultSet</code> is a <a href=\"https://github.com/tweepy/tweepy/blob/master/tweepy/models.py#L10\" rel=\"nofollow noreferrer\">subclass of a Python's <code>list</code></a>:</p>\n\n<pre><code>class ResultSet(list):\n    \"\"\"A list like object that holds results from a Twitter API query.\"\"\"\n</code></pre>\n\n<p>The elements in the <code>ResultSet</code> can be of different types - statuses, users, relations etc.</p>\n\n<p>Every element in your particular <code>ResultSet</code> is a <a href=\"https://github.com/tweepy/tweepy/blob/master/tweepy/models.py#L73\" rel=\"nofollow noreferrer\"><code>Status</code> instance</a>, which allows the attribute access (via <em>dot notation</em>) to the twitter status properties:</p>\n\n<pre><code>result_set = api.favorites('twitter')\nstatus = result_set[0]\nprint(status.favorited)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3596, "user_id": 4635388, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/7b32fa670c38de0c71d4aa0ae127e652?s=128&d=identicon&r=PG", "display_name": "Rohan Khude", "link": "https://stackoverflow.com/users/4635388/rohan-khude"}, "is_accepted": false, "score": 0, "last_activity_date": 1513626685, "creation_date": 1513626685, "answer_id": 47875470, "question_id": 42542327, "link": "https://stackoverflow.com/questions/42542327/how-to-extract-information-from-tweepy-resultset/47875470#47875470", "title": "How to extract information from Tweepy ResultSet", "body": "<p>Here i displayed the <code>resultset</code> using <code>for</code> loop. And inside for loop, use the same way as @alecxe mentioned to access each object property</p>\n\n<pre><code># For ex, GET users/lookup API call returns resultset\nusers = api.lookup_users(screen_names=['StackOverflow,StackExchange'])\n# get the length of user and @alecxe mentions\nfor i in range(len(users)):\n    print 'Name - ' + users[i].name\n    print 'Bio - ' + users[i].description\n    print 'Location - ' + users[i].location\n    print 'Joined at - ' + str(users[i].created_at)\n    print 'User ID - ' + users[i].id_str\n    print ''\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Name - TechCrunch\nBio - Breaking technology news, analysis, and opinions from TechCrunch. Home to Disrupt, TC Sessions, and Startup Battlefield. Got a tip? tips@techcrunch.com\nLocation - San Francisco, CA\nJoined at - 2007-03-07 01:27:09\nUser ID - 816653\n\nName - Piwik Analytics\nBio - Piwik is the leading open analytics platform (Web+Mobile). An open alternative to Google Analytics. Privacy is built-in. Tweet about Piwik if you love it!\nLocation - Planet Earth\nJoined at - 2009-06-22 23:47:00\nUser ID - 49813707\n</code></pre>\n"}], "owner": {"reputation": 1713, "user_id": 4325994, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/nePfO.png?s=128&g=1", "display_name": "Nate", "link": "https://stackoverflow.com/users/4325994/nate"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5149, "favorite_count": 3, "accepted_answer_id": 42542410, "answer_count": 2, "score": 7, "last_activity_date": 1513626685, "creation_date": 1488403443, "question_id": 42542327, "link": "https://stackoverflow.com/questions/42542327/how-to-extract-information-from-tweepy-resultset", "title": "How to extract information from Tweepy ResultSet", "body": "<p>How do I interact with the Tweepy Result set? How can I extract information? It kinda looks like a list or a dictionary, but I'm having trouble extracting specific elements of it. </p>\n\n<pre><code>import tweepy\nauth = tweepy.OAuthHandler(consumer_key, consumer_secret)\nauth.set_access_token(access_token, access_token_secret)\n\napi = tweepy.API(auth)\n\nprint(type(api.favorites('twitter')))\nOut[1]: &lt;class 'tweepy.models.ResultSet'&gt;\n\nprint(api.favorites('twitter'))\nOut[2]: Status(favorited=False, source='Twitter for iPhone', in_reply_to_status_id=None, coordinates=None, text='Starting the Twitter chat now. https://t.co[...]\n</code></pre>\n\n<p>I've never dealt with an object like ResultSet before, so I'm not sure how I can extract information from it. I noticed that it works a bit like a list, in that I can get a specific tweet from the list like this:</p>\n\n<pre><code>print(api.favorites('twitter')[1])\n</code></pre>\n\n<p>But I cant get embedded elements like this:</p>\n\n<pre><code>print(api.favorites('twitter')[1][0])\nOut[3]: TypeError: 'Status' object does not support indexing\n</code></pre>\n\n<p>or like this:</p>\n\n<pre><code>print(api.favorites('twitter')[1]['favorited'])\nOut[4]: TypeError: 'Status' object is not subscriptable\n</code></pre>\n\n<p>Any help is appreciated!</p>\n"}, {"tags": ["python", "multithreading", "concurrency"], "comments": [{"owner": {"reputation": 785, "user_id": 79177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb910bcf807aa8f131e568e0612f9941?s=128&d=identicon&r=PG", "display_name": "phyllis diller", "link": "https://stackoverflow.com/users/79177/phyllis-diller"}, "edited": false, "score": 0, "creation_date": 1488403378, "post_id": 42542280, "comment_id": 72220415, "body": "Even adding some pseudocode here would help. Gonna be pretty tough to diagnose otherwise."}, {"owner": {"reputation": 73, "user_id": 4135037, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8a700171a114aea911db9cd4fd203c03?s=128&d=identicon&r=PG&f=1", "display_name": "popopret", "link": "https://stackoverflow.com/users/4135037/popopret"}, "reply_to_user": {"reputation": 785, "user_id": 79177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb910bcf807aa8f131e568e0612f9941?s=128&d=identicon&r=PG", "display_name": "phyllis diller", "link": "https://stackoverflow.com/users/79177/phyllis-diller"}, "edited": false, "score": 0, "creation_date": 1488403949, "post_id": 42542280, "comment_id": 72220720, "body": "@phyllisdiller added"}, {"owner": {"reputation": 785, "user_id": 79177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb910bcf807aa8f131e568e0612f9941?s=128&d=identicon&r=PG", "display_name": "phyllis diller", "link": "https://stackoverflow.com/users/79177/phyllis-diller"}, "edited": false, "score": 0, "creation_date": 1488405418, "post_id": 42542280, "comment_id": 72221569, "body": "When I clean things up a bit, I get thread 1 spinning up and not dying.  But I&#39;m not sure of the intent. You want to essentially have a pool of threads waiting to be assigned tasks, correct?  However, your main function, as well as your worker function (the thing the thread is going to run), activates the thread. You shouldn&#39;t be activating the thread from within the thread."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 2, "creation_date": 1488405542, "post_id": 42542280, "comment_id": 72221625, "body": "Try using a <code>multiprocessing.pool.ThreadPool</code>."}, {"owner": {"reputation": 73, "user_id": 4135037, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8a700171a114aea911db9cd4fd203c03?s=128&d=identicon&r=PG&f=1", "display_name": "popopret", "link": "https://stackoverflow.com/users/4135037/popopret"}, "reply_to_user": {"reputation": 785, "user_id": 79177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb910bcf807aa8f131e568e0612f9941?s=128&d=identicon&r=PG", "display_name": "phyllis diller", "link": "https://stackoverflow.com/users/79177/phyllis-diller"}, "edited": false, "score": 0, "creation_date": 1488405770, "post_id": 42542280, "comment_id": 72221718, "body": "@phyllisdiller that is correct yes. So where would I activate the thread? And is there a need to join?"}], "answers": [{"tags": [], "owner": {"reputation": 785, "user_id": 79177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb910bcf807aa8f131e568e0612f9941?s=128&d=identicon&r=PG", "display_name": "phyllis diller", "link": "https://stackoverflow.com/users/79177/phyllis-diller"}, "is_accepted": false, "score": 0, "last_activity_date": 1488407991, "last_edit_date": 1488407991, "creation_date": 1488407447, "answer_id": 42543362, "question_id": 42542280, "link": "https://stackoverflow.com/questions/42542280/concurrent-threads-waiting-for-tasks/42543362#42543362", "title": "Concurrent threads waiting for tasks", "body": "<p>Okay. I've rejiggered things a bit. Essentially what you want is this order of command:</p>\n\n<ul>\n<li>Construct an ActivePool.  </li>\n<li>Add threads to your ActivePool.</li>\n<li>Call ActivePool.start() to begin the thread. </li>\n<li>The worker threads run the worker function, with shared data protected by the semaphore. </li>\n<li>The main thread awaits the completion of all threads.</li>\n</ul>\n\n<p>You do not need to join the threads.</p>\n\n<p>If you do add a random task, you'd add it to some list (which you'd have to lock on with your semaphore) which the worker function will pull from and perform work on. If the worker sees something in the list, it will pull it off the list and perform the relevant action. If there's nothing to do, have the thread sleep.</p>\n\n<p>You may want to add all your threads to your thread pool before you spin them up (i.e., make a list inside ActivePool, then do pool.activate() and have that activate each thread in turn).</p>\n\n<pre><code>import logging\nimport random\nimport threading\nimport time\n\nlogger = logging.getLogger(\"thread_logger\")\nlogger.setLevel(logging.DEBUG)\n\nclass ActivePool(object):\n    def __init__(self):\n        super(ActivePool, self).__init__()\n\n        self.active = []\n        self.lock = threading.Lock()\n\n    def activate(self, name):\n        with self.lock:\n            self.active.append(name)\n            logger.debug('Running wheel: %s', self.active)\n            t.start()\n\n    def inactive(self, name):\n        with self.lock:\n            self.active.remove(name)\n            logger.debug('Running wheel: %s', self.active)\n\n    def rtime(self):\n        self.rt = random.randint(5, 10)\n        t = threading.Timer(rt, self.revent)\n\n    def join(self):\n        for t in self.active:\n            t.join()\n\n    def check(self):\n        for t in self.active:\n            if t.is_alive():\n                return True\n\ndef worker(s, pool):\n\n    logger.debug('Worker spinning up')\n\n    for x in range(0, 3):\n        with s:\n            logger.debug('Thread ID: ' + str(threading.currentThread().ident) + ' DO WORK: ' + str(x))\n        time.sleep(2)\n\nif __name__ == \"__main__\":\n\n    pool = ActivePool()\n    s = threading.Semaphore()\n\n    for i in range(0, 2):\n        t = threading.Thread(target = worker, name = str(i + 1), args = (s, pool))\n        pool.activate(t)\n\n    while(pool.check()):\n        print(\"Worker thread still workin yo.\")\n        time.sleep(2)\n    logger.debug('Finito.')\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4135037, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/8a700171a114aea911db9cd4fd203c03?s=128&d=identicon&r=PG&f=1", "display_name": "popopret", "link": "https://stackoverflow.com/users/4135037/popopret"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 259, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488407991, "creation_date": 1488403286, "last_edit_date": 1488403936, "question_id": 42542280, "link": "https://stackoverflow.com/questions/42542280/concurrent-threads-waiting-for-tasks", "title": "Concurrent threads waiting for tasks", "body": "<p>I've googled this a lot now and came to no answers - hence why I'm asking.</p>\n\n<p>Been a day now, but I can't get round some threading concepts which is probably why my code is a mess. </p>\n\n<p>I'm spawning 3 threads. Fine. </p>\n\n<p>When thread 2 spawns, thread 1 \"stops\" which I assume means it dies. Same for thread 2 and 3.</p>\n\n<p>I'm putting these threads within an active pool.</p>\n\n<p>What I'm struggling with is, keeping all 3 threads running at the same time and waiting. I'd like to have a method which on random time intervals assigns a thread to a task.</p>\n\n<p>From what I've gathered, the reason my threads are dieing is because my worker class is returning. However, having played with it and put it around a loop (while 1), I still can't get anything working.</p>\n\n<p>Any ideas?</p>\n\n<pre><code>import logging\nimport random\nimport threading\nimport time\n\nlogging.basicConfig(level = logging.DEBUG, format = '(%(threadName)-2s) %(message)s')\n\nclass ActivePool(object):\n    def __init__(self):\n        super(ActivePool, self).__init__()\n\n        self.active = []\n        self.lock = threading.Lock()\n\n    def activate(self, name):\n        with self.lock:\n            self.active.append(name)\n            logging.debug('Running wheel: %s', self.active)\n            self.move(name)\n\n    def move(self, name):\n        while name.is_alive():\n            logging.debug('yes')\n\n    def inactive(self, name):\n        with self.lock:\n            self.active.remove(name)\n            logging.debug('Running wheel: %s', self.active)\n\n    def rtime(self):\n        self.rt = random.randint(5, 10)\n        t = threading.Timer(rt, self.revent)\n\n    def join(self):\n        for t in self.active:\n            t.join()\n\n    def check(self):\n        for t in self.active:\n            if t.is_alive():\n                print t\n\ndef worker(s, pool):\n    logging.debug('Wheel inactive')\n\n    with s:\n        #name = threading.currentThread().getName()\n        thread = threading.currentThread()\n        logging.debug('ACTIVATING')\n        pool.activate(thread)\n        #time.sleep(2)\n        #pool.inactive(thread)\n\nif __name__ == \"__main__\":\n    pool = ActivePool()\n    s = threading.Semaphore()\n\n    for i in range(0, 6):\n        t = threading.Thread(target = worker, name = str(i + 1), args = (s, pool))\n        pool.activate(t)\n        t.start()\n\n    logging.debug('here')\n</code></pre>\n"}, {"tags": ["python", "numpy", "histogram"], "comments": [{"owner": {"reputation": 769, "user_id": 7187106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/084f4df88a7a92fa348f3e619cd2e0ba?s=128&d=identicon&r=PG&f=1", "display_name": "Longwen Ou", "link": "https://stackoverflow.com/users/7187106/longwen-ou"}, "edited": false, "score": 1, "creation_date": 1488403617, "post_id": 42542252, "comment_id": 72220526, "body": "Are you using any matplotlib style? Because I cannot reproduce your problem."}, {"owner": {"reputation": 465, "user_id": 6477678, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c843a358b16226f6077097fae152f487?s=128&d=identicon&r=PG&f=1", "display_name": "Canuck", "link": "https://stackoverflow.com/users/6477678/canuck"}, "reply_to_user": {"reputation": 769, "user_id": 7187106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/084f4df88a7a92fa348f3e619cd2e0ba?s=128&d=identicon&r=PG&f=1", "display_name": "Longwen Ou", "link": "https://stackoverflow.com/users/7187106/longwen-ou"}, "edited": false, "score": 0, "creation_date": 1488403779, "post_id": 42542252, "comment_id": 72220615, "body": "I am importing matplotlib into my notebook. Also i have tried using the %matplotlib command."}, {"owner": {"reputation": 465, "user_id": 6477678, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c843a358b16226f6077097fae152f487?s=128&d=identicon&r=PG&f=1", "display_name": "Canuck", "link": "https://stackoverflow.com/users/6477678/canuck"}, "reply_to_user": {"reputation": 769, "user_id": 7187106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/084f4df88a7a92fa348f3e619cd2e0ba?s=128&d=identicon&r=PG&f=1", "display_name": "Longwen Ou", "link": "https://stackoverflow.com/users/7187106/longwen-ou"}, "edited": false, "score": 0, "creation_date": 1488403895, "post_id": 42542252, "comment_id": 72220690, "body": "Did you run the example in jupyter notebook?"}, {"owner": {"reputation": 769, "user_id": 7187106, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/084f4df88a7a92fa348f3e619cd2e0ba?s=128&d=identicon&r=PG&f=1", "display_name": "Longwen Ou", "link": "https://stackoverflow.com/users/7187106/longwen-ou"}, "edited": false, "score": 0, "creation_date": 1488404027, "post_id": 42542252, "comment_id": 72220768, "body": "Yes, I run it in jupyter notebook. Have you tried to restart the kernel and run the code again?"}], "answers": [{"comments": [{"owner": {"reputation": 465, "user_id": 6477678, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c843a358b16226f6077097fae152f487?s=128&d=identicon&r=PG&f=1", "display_name": "Canuck", "link": "https://stackoverflow.com/users/6477678/canuck"}, "edited": false, "score": 1, "creation_date": 1488404973, "post_id": 42542485, "comment_id": 72221310, "body": "Thanks Nathan! I am still unsure as to why I need to add that command now and before there was no need but if it works it works..."}, {"owner": {"reputation": 4758, "user_id": 1382869, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/a96J8.jpg?s=128&g=1", "display_name": "ngoldbaum", "link": "https://stackoverflow.com/users/1382869/ngoldbaum"}, "reply_to_user": {"reputation": 465, "user_id": 6477678, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c843a358b16226f6077097fae152f487?s=128&d=identicon&r=PG&f=1", "display_name": "Canuck", "link": "https://stackoverflow.com/users/6477678/canuck"}, "edited": false, "score": 4, "creation_date": 1488405395, "post_id": 42542485, "comment_id": 72221556, "body": "The key difference is the use of the <code>ec</code> keyword argument. This is short of <code>edgecolor</code>. In the documentation for <code>plt.hist</code> it says that in addition to all of the listed keyword arguments, <code>plt.hist</code> <i>also</i> takes keyword arguments for the <code>Patch</code> initializer. <code>edgecolor</code> is one of those keyword arguments. That&#39;s why it&#39;s not explicitly listed in the documentation for <code>plt.hist</code>. All of the bars in the plot are an individual <code>Patch</code> object, so you&#39;re saying you want all of the bars to be drawn with a black outline (or <code>edgecolor</code> in matplotlib jargon)."}, {"owner": {"reputation": 1169, "user_id": 3407933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TACR2.png?s=128&g=1", "display_name": "spacetyper", "link": "https://stackoverflow.com/users/3407933/spacetyper"}, "edited": false, "score": 1, "creation_date": 1534877072, "post_id": 42542485, "comment_id": 90860263, "body": "@ngoldbaum Adding your comment into your answer would be very helpful, as your answer itself requires careful comparison to the OP&#39;s question in order to figure out what you did differently. Thanks!"}], "tags": [], "owner": {"reputation": 4758, "user_id": 1382869, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/a96J8.jpg?s=128&g=1", "display_name": "ngoldbaum", "link": "https://stackoverflow.com/users/1382869/ngoldbaum"}, "is_accepted": true, "score": 52, "last_activity_date": 1547153119, "last_edit_date": 1547153119, "creation_date": 1488404065, "answer_id": 42542485, "question_id": 42542252, "link": "https://stackoverflow.com/questions/42542252/cannot-get-histogram-to-show-separated-bins-with-vertical-lines/42542485#42542485", "title": "Cannot get histogram to show separated bins with vertical lines", "body": "<p>Using your example:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nx = np.random.rand((100)) \nbins = np.linspace(0, 2, 40)\nplt.title('Relative Amplitude',fontsize=30)\nplt.xlabel('Random Histogram')\nplt.ylabel('Frequency',fontsize=30)\nplt.hist(x, bins, alpha=0.5, histtype='bar', ec='black')\n\nplt.legend(loc='upper right',fontsize=30)\nplt.xticks(fontsize = 20) \nplt.yticks(fontsize = 20) \nplt.show() \n</code></pre>\n\n<p>Which produces the following image:</p>\n\n<p><a href=\"https://i.stack.imgur.com/PylYk.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/PylYk.png\" alt=\"enter image description here\"></a></p>\n\n<p>The key difference is the use of the <code>ec</code> keyword argument. This is short for \"edgecolor\". In the documentation for <code>plt.hist</code> it says that in addition to all of the listed keyword arguments, <code>plt.hist</code> also takes keyword arguments for the <code>Patch</code> initializer. <code>edgecolor</code> is one of those keyword arguments. That's why it's not explicitly listed in the documentation for <code>plt.hist</code>. All of the bars in the plot are an individual <code>Patch</code> object, so you're saying you want all of the bars to be drawn with a black outline (or <code>edgecolor</code> in matplotlib jargon).</p>\n"}], "owner": {"reputation": 465, "user_id": 6477678, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/c843a358b16226f6077097fae152f487?s=128&d=identicon&r=PG&f=1", "display_name": "Canuck", "link": "https://stackoverflow.com/users/6477678/canuck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32062, "favorite_count": 7, "accepted_answer_id": 42542485, "answer_count": 1, "score": 22, "last_activity_date": 1547153119, "creation_date": 1488403175, "question_id": 42542252, "link": "https://stackoverflow.com/questions/42542252/cannot-get-histogram-to-show-separated-bins-with-vertical-lines", "title": "Cannot get histogram to show separated bins with vertical lines", "body": "<p>Annoying strange problem and I have not been able to find a solution on this site yet (although the question has popped up)</p>\n\n<p>I am trying to make a histogram where the bins have the 'bar style' where vertical lines separate each bin but no matter what I change the histtype constructor to I get a step filled histogram. </p>\n\n<p>Here is my code. Note I am using jupyter notebook installed via anaconda with python version 2.7.6</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\nx = np.random.rand((100)) \nbins = np.linspace(0, 2, 40)\nplt.title('Relative Amplitude',fontsize=30)\nplt.xlabel('Random Histogram')\nplt.ylabel('Frequency',fontsize=30)\nplt.hist(x, bins, alpha=0.5, histtype='bar')\n\nplt.legend(loc='upper right',fontsize=30)\nplt.xticks(fontsize = 20) \nplt.yticks(fontsize = 20) \nplt.show() \n</code></pre>\n\n<p>Thats it and I get a step filled diagram with no vertical lines separating the bars. What is annoying is that I didn't have this problem awhile ago, something clearly has changed and I don't know what.I have tried histype='barstacked' as well. Thank you kindly for your help</p>\n\n<p><a href=\"https://i.stack.imgur.com/yh3AI.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/yh3AI.png\" alt=\"enter image description here\"></a>   </p>\n"}, {"tags": ["python", "python-module", "python-importlib"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1488403654, "post_id": 42542214, "comment_id": 72220546, "body": "Maybe I&#39;m misunderstanding you, but Python&#39;s &quot;globals&quot; are actually module-scoped already - each script&#39;s <code>bld</code> global will automatically be distinct (unless they explicitly import it from another module, or store it into another module)."}, {"owner": {"reputation": 32492, "user_id": 31516, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/SOucS.jpg?s=128&g=1", "display_name": "David Brown", "link": "https://stackoverflow.com/users/31516/david-brown"}, "reply_to_user": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1488403935, "post_id": 42542214, "comment_id": 72220715, "body": "I figured, but I&#39;m not much of a Python programmer, so I just wanted to make that requirement clear in case it had any effect on the answer."}, {"owner": {"reputation": 19105, "user_id": 3005167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t0bMQ.png?s=128&g=1", "display_name": "kazemakase", "link": "https://stackoverflow.com/users/3005167/kazemakase"}, "edited": false, "score": 0, "creation_date": 1488404560, "post_id": 42542214, "comment_id": 72221079, "body": "If you say custom globals, do you want to set them before importing the module?"}, {"owner": {"reputation": 32492, "user_id": 31516, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/SOucS.jpg?s=128&g=1", "display_name": "David Brown", "link": "https://stackoverflow.com/users/31516/david-brown"}, "reply_to_user": {"reputation": 19105, "user_id": 3005167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t0bMQ.png?s=128&g=1", "display_name": "kazemakase", "link": "https://stackoverflow.com/users/3005167/kazemakase"}, "edited": false, "score": 0, "creation_date": 1488404673, "post_id": 42542214, "comment_id": 72221152, "body": "@kazemakase Yes, I want them to be available when the module&#39;s code executes."}, {"owner": {"reputation": 19105, "user_id": 3005167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t0bMQ.png?s=128&g=1", "display_name": "kazemakase", "link": "https://stackoverflow.com/users/3005167/kazemakase"}, "edited": false, "score": 0, "creation_date": 1488406375, "post_id": 42542214, "comment_id": 72222004, "body": "@DavidBrown I don&#39;t think this is possible, but it will be interesting to see how someone may prove me wrong. There are certainly easier ways to achieve your desired functionality without hacking imports. For example, you could define entry functions in the modules that perform all the work after the import is finished. Regarding <code>__pycache__</code>, I think it is <a href=\"https://github.com/python/cpython/blob/6f0eb93183519024cb360162bdd81b9faec97ba6/Python/import.c#L22\" rel=\"nofollow noreferrer\">hard-coded</a> although the definition seems to be unused. Can&#39;t elaborate an answer on the import stuff now; will check back tomorrow."}], "answers": [{"comments": [{"owner": {"reputation": 19105, "user_id": 3005167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t0bMQ.png?s=128&g=1", "display_name": "kazemakase", "link": "https://stackoverflow.com/users/3005167/kazemakase"}, "edited": false, "score": 0, "creation_date": 1488439120, "post_id": 42545218, "comment_id": 72233269, "body": "Interesting solution. I don&#39;t know what you did exactly, but you probably don&#39;t need to use <code>ModuleType</code>. You can add <code>bld</code> directly to the globals  when calling <code>exec</code> on the code object. <code>exec(code, {&#39;bld&#39;: bld})</code>"}], "tags": [], "owner": {"reputation": 32492, "user_id": 31516, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/SOucS.jpg?s=128&g=1", "display_name": "David Brown", "link": "https://stackoverflow.com/users/31516/david-brown"}, "is_accepted": false, "score": 1, "last_activity_date": 1488417878, "creation_date": 1488417878, "answer_id": 42545218, "question_id": 42542214, "link": "https://stackoverflow.com/questions/42542214/how-do-i-load-a-python-module-with-custom-globals-using-importlib/42545218#42545218", "title": "How do I load a Python module with custom globals using importlib?", "body": "<p>I studied <code>importlib</code>'s source code and since I don't intend to make a reusable <code>Loader</code>, it seems like a lot of unnecessary complexity. So I just settled on creating a module with <code>types.ModuleType</code>, adding <code>bld</code> to the module's <code>__dict__</code>, compiling and caching the bytecode with <code>compile</code>, and executing the module with <code>exec</code>. At a low level, that's basically all <code>importutil</code> does anyway.</p>\n"}, {"comments": [{"owner": {"reputation": 32492, "user_id": 31516, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/SOucS.jpg?s=128&g=1", "display_name": "David Brown", "link": "https://stackoverflow.com/users/31516/david-brown"}, "edited": false, "score": 0, "creation_date": 1488467712, "post_id": 42550026, "comment_id": 72252532, "body": "Thanks! I&#39;ll accept this answer, even though it&#39;s not the solution I went with, because it&#39;s probably what most projects <i>should</i> do (and in fact, this is what WAF does). In my case, I wanted <code>bldfile.py</code> to appear more like a configuration file than a script file in the simplest cases. Compiling a library, for example, should be as simple as a single line: <code>bld.lib(&#39;foo&#39;, &#39;foo.cc&#39;)</code>. If I ever decide to make this tool usable outside of my C++ project, I would probably refactor it to use your approach."}], "tags": [], "owner": {"reputation": 19105, "user_id": 3005167, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/t0bMQ.png?s=128&g=1", "display_name": "kazemakase", "link": "https://stackoverflow.com/users/3005167/kazemakase"}, "is_accepted": true, "score": 1, "last_activity_date": 1488447071, "last_edit_date": 1488447071, "creation_date": 1488442509, "answer_id": 42550026, "question_id": 42542214, "link": "https://stackoverflow.com/questions/42542214/how-do-i-load-a-python-module-with-custom-globals-using-importlib/42550026#42550026", "title": "How do I load a Python module with custom globals using importlib?", "body": "<p>Injecting globals into a module before execution is an interesting idea. However, I think it conflicts with several points of the <a href=\"https://www.python.org/dev/peps/pep-0020/#id3\" rel=\"nofollow noreferrer\">Zen of Python</a>. In particular, it requires writing code in the module that depends on global values which are not explicitly defined, imported, or otherwise obtained - unless you know the particular procedure required to call the module.</p>\n\n<p>This may be an obvious or slick solution for the specific use case but it is not very intuitive. In general, (Python) code should be explicit. Therefore, I would go for a solution where parameters are explicitly passed to the executing code. Sounds like functions? Right:</p>\n\n<p><strong>bldfile.py</strong></p>\n\n<pre><code>def exec(bld):\n    print('Working with bld:', bld)\n    # ...\n</code></pre>\n\n<p><strong>calling the module:</strong></p>\n\n<pre><code># set bld\n\n# Option 1: static import\nimport bldfile\nbldfile.exec(bld)\n\n# Option 2: dynamic import if bldfile.py is located dynamically\nimport importlib.util\nspec = importlib.util.spec_from_file_location(\"unique_name\", \"subdir/subsubdir/bldfile.py\")\nmodule = importlib.util.module_from_spec(spec)\nspec.loader.exec_module(module)\nmodule.exec(bld)\n</code></pre>\n\n<p>That way no code (apart from the function definition) is executed when importing the module. The <code>exec</code> function needs to be called explicitly and when looking at the code inside <code>exec</code> it is clear where <code>bld</code> comes from.</p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 2233374, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c5456a655bc1da51e8b3ab3a24b2eba7?s=128&d=identicon&r=PG", "display_name": "Georgii Dernovyi", "link": "https://stackoverflow.com/users/2233374/georgii-dernovyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1593878620, "creation_date": 1593878620, "answer_id": 62731340, "question_id": 42542214, "link": "https://stackoverflow.com/questions/42542214/how-do-i-load-a-python-module-with-custom-globals-using-importlib/62731340#62731340", "title": "How do I load a Python module with custom globals using importlib?", "body": "<p>It is possible to overcome the lack of possibility by using dummy module, which would load its globals .</p>\n<pre><code>#service.py \nmodule = importlib.import_module('userset')\nmodule.user = user \nmodule = importlib.import_module('config')\n\n#config.py\nfrom userset import *\n#now you can use user from service.py \n</code></pre>\n"}], "owner": {"reputation": 32492, "user_id": 31516, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/SOucS.jpg?s=128&g=1", "display_name": "David Brown", "link": "https://stackoverflow.com/users/31516/david-brown"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 718, "favorite_count": 1, "accepted_answer_id": 42550026, "answer_count": 3, "score": 2, "last_activity_date": 1593878620, "creation_date": 1488403044, "question_id": 42542214, "link": "https://stackoverflow.com/questions/42542214/how-do-i-load-a-python-module-with-custom-globals-using-importlib", "title": "How do I load a Python module with custom globals using importlib?", "body": "<p>I'm trying to put together a small build system in Python that generates Ninja files for my C++ project. Its behavior should be similar to CMake; that is, a <code>bldfile.py</code> script defines rules and targets and optionally recurses into one or more directories by calling <code>bld.subdir()</code>. Each <code>bldfile.py</code> script has a corresponding <code>bld.File</code> object. When the <code>bldfile.py</code> script is executing, the <code>bld</code> global should be predefined as that file's <code>bld.File</code> instance, <em>but only in that module's scope</em>.</p>\n\n<p>Additionally, I would like to take advantage of Python's bytecode caching somehow, but the <code>.pyc</code> file should be stored in the build output directory instead of in a <code>__pycache__</code> directory alongside the <code>bldfile.py</code> script.</p>\n\n<p>I know I should use <code>importlib</code> (requiring Python 3.4+ is fine), but I'm not sure how to:</p>\n\n<ol>\n<li>Load and execute a module file with custom globals.</li>\n<li>Re-use the bytecode caching infrastructure.</li>\n</ol>\n\n<p>Any help would be greatly appreciated!</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1488402995, "post_id": 42542154, "comment_id": 72220184, "body": "Is there a pattern on how you are selecting the pairs of elements?"}, {"owner": {"reputation": 2419, "user_id": 5171213, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0aaed7bfc17efce0ded2b6f35fb32fea?s=128&d=identicon&r=PG&f=1", "display_name": "StatsSorceress", "link": "https://stackoverflow.com/users/5171213/statssorceress"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1488403667, "post_id": 42542154, "comment_id": 72220554, "body": "Please see the edit @Divakar, I couldn&#39;t fit my answer in the comments!"}], "answers": [{"tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": false, "score": 0, "last_activity_date": 1488403755, "creation_date": 1488403755, "answer_id": 42542399, "question_id": 42542154, "link": "https://stackoverflow.com/questions/42542154/user-defined-function-for-numpy-outer/42542399#42542399", "title": "User-defined function for numpy outer", "body": "<p>You could just use <a href=\"https://docs.scipy.org/doc/numpy-1.10.0/reference/generated/numpy.ufunc.outer.html\" rel=\"nofollow noreferrer\"><code>np.multiply.outer</code></a> on the <code>cosine</code> computed values -</p>\n\n<pre><code>cos_a = np.cos(arr1)\nout = np.multiply.outer(cos_a, cos_a) # Or simply np.outer()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7276, "user_id": 3220135, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RR7BR.jpg?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/3220135/aaron"}, "is_accepted": true, "score": 0, "last_activity_date": 1488404102, "creation_date": 1488404102, "answer_id": 42542501, "question_id": 42542154, "link": "https://stackoverflow.com/questions/42542154/user-defined-function-for-numpy-outer/42542501#42542501", "title": "User-defined function for numpy outer", "body": "<p>Use numpy <a href=\"https://docs.scipy.org/doc/numpy/user/basics.broadcasting.html\" rel=\"nofollow noreferrer\">broadcasting</a> with ufuncs if you're doing mathematic operations that you want to vectorize.</p>\n\n<pre><code>arr1 = np.array([0.001, 0.02, 0.021])\ncos_a = np.cos(arr1)\nout = cos_a * cos_a[:,None] #rows * cols\n</code></pre>\n"}], "owner": {"reputation": 2419, "user_id": 5171213, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/0aaed7bfc17efce0ded2b6f35fb32fea?s=128&d=identicon&r=PG&f=1", "display_name": "StatsSorceress", "link": "https://stackoverflow.com/users/5171213/statssorceress"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 920, "favorite_count": 0, "accepted_answer_id": 42542501, "answer_count": 2, "score": 5, "last_activity_date": 1488404102, "creation_date": 1488402847, "last_edit_date": 1488403648, "question_id": 42542154, "link": "https://stackoverflow.com/questions/42542154/user-defined-function-for-numpy-outer", "title": "User-defined function for numpy outer", "body": "<p>I have a very long numpy array, but let's say it looks like this:</p>\n\n<pre><code>&gt;&gt;&gt; arr1 = np.array([0.001, 0.02, 0.021])\n</code></pre>\n\n<p>I would like to access two elements at a time all the way down the array and perform an operation on them. For example, I want to do this:</p>\n\n<pre><code>np.cos(arr1[0])*np.cos(arr1[1])\nnp.cos(arr1[0])*np.cos(arr1[2])\nnp.cos(arr1[1])*np.cos(arr1[2])\n</code></pre>\n\n<p>I'm familiar with the function \"outer\", and I can use it for subtraction:</p>\n\n<pre><code>&gt;&gt;&gt; np.subtract.outer(arr1, arr1)\narray([[ 0.   , -0.019, -0.02 ],\n       [ 0.019,  0.   , -0.001],\n       [ 0.02 ,  0.001,  0.   ]])\n</code></pre>\n\n<p>How can I feed my own function into numpy's outer?</p>\n\n<p>EDIT: based on a question in the comments, I'd like the function to return something like this:</p>\n\n<p>I'd like the same pattern as that is returned by numpy's outer function. </p>\n\n<pre><code>array([[ np.cos(arr1[0])*np.cos(arr1[0]), np.cos(arr1[0])*np.cos(arr1[1]), np.cos(arr1[0])*np.cos(arr1[2]) ],\n\n[ np.cos(arr1[1])*np.cos(arr1[0]), np.cos(arr1[1])*np.cos(arr1[1]), np.cos(arr1[1])*np.cos(arr1[2]) ],\n\n[ np.cos(arr1[2])*np.cos(arr1[0]), np.cos(arr1[2])*np.cos(arr1[1]), np.cos(arr1[2])*np.cos(arr1[2]) ]])\n</code></pre>\n"}, {"tags": ["python", "flask", "peewee", "flask-peewee"], "comments": [{"owner": {"reputation": 1632, "user_id": 1032610, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/438f6596cb2c9aea1e6b3d9937261b29?s=128&d=identicon&r=PG", "display_name": "Anubhav Agarwal", "link": "https://stackoverflow.com/users/1032610/anubhav-agarwal"}, "edited": false, "score": 0, "creation_date": 1488403083, "post_id": 42542094, "comment_id": 72220239, "body": "use <a href=\"https://github.com/klen/peewee_migrate\" rel=\"nofollow noreferrer\">github.com/klen/peewee_migrate</a>"}, {"owner": {"reputation": 49, "user_id": 5396959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41d06b579282f657356c2f990e552e0?s=128&d=identicon&r=PG", "display_name": "maximkalga", "link": "https://stackoverflow.com/users/5396959/maximkalga"}, "reply_to_user": {"reputation": 1632, "user_id": 1032610, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/438f6596cb2c9aea1e6b3d9937261b29?s=128&d=identicon&r=PG", "display_name": "Anubhav Agarwal", "link": "https://stackoverflow.com/users/1032610/anubhav-agarwal"}, "edited": false, "score": 0, "creation_date": 1488436606, "post_id": 42542094, "comment_id": 72232079, "body": "<b>Anubhav Agarwal</b>, peewee_migrate not listed in requirements. I need to do it in this stack."}, {"owner": {"reputation": 49, "user_id": 5396959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41d06b579282f657356c2f990e552e0?s=128&d=identicon&r=PG", "display_name": "maximkalga", "link": "https://stackoverflow.com/users/5396959/maximkalga"}, "reply_to_user": {"reputation": 1632, "user_id": 1032610, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/438f6596cb2c9aea1e6b3d9937261b29?s=128&d=identicon&r=PG", "display_name": "Anubhav Agarwal", "link": "https://stackoverflow.com/users/1032610/anubhav-agarwal"}, "edited": false, "score": 0, "creation_date": 1488451954, "post_id": 42542094, "comment_id": 72241495, "body": "\u041e\u041a, I got it. Inside shell I imported init_db() from models.py and run it. No migrations needed."}], "answers": [{"tags": [], "owner": {"reputation": 19577, "user_id": 254346, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/ebd1c4256c1ece3469d2ccf3031cb6c5?s=128&d=identicon&r=PG", "display_name": "coleifer", "link": "https://stackoverflow.com/users/254346/coleifer"}, "is_accepted": false, "score": 1, "last_activity_date": 1488491127, "creation_date": 1488491127, "answer_id": 42566589, "question_id": 42542094, "link": "https://stackoverflow.com/questions/42542094/how-to-init-db-in-peewee/42566589#42566589", "title": "How to init db in Peewee?", "body": "<pre><code>db.create_tables([Table1, Table2, Table3])\n</code></pre>\n\n<p>Docs: <a href=\"http://docs.peewee-orm.com/en/latest/peewee/models.html#creating-model-tables\" rel=\"nofollow noreferrer\">http://docs.peewee-orm.com/en/latest/peewee/models.html#creating-model-tables</a></p>\n"}], "owner": {"reputation": 49, "user_id": 5396959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e41d06b579282f657356c2f990e552e0?s=128&d=identicon&r=PG", "display_name": "maximkalga", "link": "https://stackoverflow.com/users/5396959/maximkalga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1014, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1488491127, "creation_date": 1488402594, "question_id": 42542094, "link": "https://stackoverflow.com/questions/42542094/how-to-init-db-in-peewee", "title": "How to init db in Peewee?", "body": "<p>I'm new in Flask stack. I need to run some project. I created virtualenv and installed all <strong>requirements</strong>:</p>\n\n<pre><code>Flask==0.10.1\nFlask-Login==0.3.1\nFlask-Testing==0.4.2\nFlask-WTF==0.12\nJinja2==2.8\nMarkupSafe==0.23\nWTForms==2.0.2\nWerkzeug==0.10.4\nargparse==1.2.1\nflask-peewee==0.6.6\nfuncsigs==0.4\nitsdangerous==0.24\nmock==1.3.0\nnose==1.3.7\npbr==1.8.0\npeewee==2.6.4\npsycopg2==2.6.1\nrequests==2.7.0\nsix==1.9.0\nwsgiref==0.1.2\nwtf-peewee==0.2.3\n</code></pre>\n\n<p>Also I has <strong>runserver.py</strong> script which starts a project:</p>\n\n<pre><code>from myproject import create_app\napp = create_app()\n\nif __name__ == '__main__':\n    app.run(debug=True, port=5000, host='0.0.0.0')\n</code></pre>\n\n<p>Now I want to init db from <strong>models.py</strong>:</p>\n\n<pre><code>from peewee import Model, CharField, IntegerField, DateTimeField, DecimalField, TextField, datetime as peewee_datetime\nfrom playhouse.pool import PooledPostgresqlExtDatabase\n\nfrom .config import BaseConfig\n\n\ndb = PooledPostgresqlExtDatabase(**BaseConfig.DATABASE)\ndb.commit_select = True\ndb.autorollback = True\n\n\nclass BaseModel(Model):\n    class Meta:\n        database = db\n\n    def save(self, **kwds):\n        with db.transaction():\n            Model.save(self, **kwds)\n\n\nclass Payment(BaseModel):\n    class Meta:\n        db_table = \"payments\"\n\n    card_number = CharField()\n    amount = DecimalField()\n    ....\n\n\ndef init_db():\n    try:\n        db.connect()\n        map(lambda l: db.drop_table(l, True), (Payment,))\n        print \"tables dropped\"\n        map(lambda l: db.create_table(l, True), (Payment,))\n        print \"tables created\"\n    except:\n        db.rollback()\n        raise\n</code></pre>\n\n<p>How can I create tables? Is Peewee has something like Django command \"<em>python manage.py migrate</em>\"?\nAnd how to run python shell inside a project like \"<em>python manage.py shell</em>\" in Django? </p>\n"}, {"tags": ["python", "regex", "org-mode"], "comments": [{"owner": {"reputation": 4052, "user_id": 5180509, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fd701362efce86f71d40e1ebe0254462?s=128&d=identicon&r=PG&f=1", "display_name": "JazZ", "link": "https://stackoverflow.com/users/5180509/jazz"}, "edited": false, "score": 0, "creation_date": 1488403407, "post_id": 42542063, "comment_id": 72220432, "body": "<code>\\*\\* Reading - Health (.*?)(?:\\*\\*|$)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2966, "user_id": 3022310, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f10ec2b45320ee843e539d705c31d08?s=128&d=identicon&r=PG", "display_name": "turbulencetoo", "link": "https://stackoverflow.com/users/3022310/turbulencetoo"}, "edited": false, "score": 0, "creation_date": 1488403059, "post_id": 42542186, "comment_id": 72220221, "body": "regex is great at matching structured data, like a line that always has a specific format. It becomes a lot trickier to use when you have to match a bunch of random text between the lines that you care about, which is why i generally avoid the method you were trying to do."}, {"owner": {"reputation": 2966, "user_id": 3022310, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f10ec2b45320ee843e539d705c31d08?s=128&d=identicon&r=PG", "display_name": "turbulencetoo", "link": "https://stackoverflow.com/users/3022310/turbulencetoo"}, "edited": false, "score": 0, "creation_date": 1488403145, "post_id": 42542186, "comment_id": 72220289, "body": "on second glance, the <code>pattern.match</code> in my answer might also just as well be a <code>line.startswith(&quot;** &quot; + head)</code>"}], "tags": [], "owner": {"reputation": 2966, "user_id": 3022310, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7f10ec2b45320ee843e539d705c31d08?s=128&d=identicon&r=PG", "display_name": "turbulencetoo", "link": "https://stackoverflow.com/users/3022310/turbulencetoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1488402946, "creation_date": 1488402946, "answer_id": 42542186, "question_id": 42542063, "link": "https://stackoverflow.com/questions/42542063/python-regex-get-items-from-orgmode-files/42542186#42542186", "title": "Python regex - get items from orgmode files", "body": "<p>Not certain you need a regex for the entire match. I'd just use a regex to match the <code>**</code> line, and then return lines until you see the next <code>**</code> line.</p>\n\n<p>Something like</p>\n\n<pre><code>pattern = re.compile(\"\\*\\* \"+ head)\n\nstart = False\noutput = []\nfor line in my_file:\n    if pattern.match(line):\n         start = True\n         continue\n    elif line.startswith(\"**\"): # but doesn't match pattern\n        break\n\n    if start:\n        output.append(line)\n\n# now `output` should have the lines you want\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7041, "user_id": 6529098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7Zubl.png?s=128&g=1", "display_name": "Amaury Liet", "link": "https://stackoverflow.com/users/6529098/amaury-liet"}, "is_accepted": false, "score": 1, "last_activity_date": 1488403592, "creation_date": 1488403592, "answer_id": 42542357, "question_id": 42542063, "link": "https://stackoverflow.com/questions/42542063/python-regex-get-items-from-orgmode-files/42542357#42542357", "title": "Python regex - get items from orgmode files", "body": "<p>If you are certain that the character <code>*</code> is not present in your items, you can use:</p>\n\n<pre><code>re.compile(r\"\\*\\* \"+head+r\" \\[\\d+/\\d+\\]\\n([^*]+)\\*?\")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 531, "user_id": 6263092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb2b4f5a51939f8596040cc534fec8da?s=128&d=identicon&r=PG&f=1", "display_name": "daleonpz", "link": "https://stackoverflow.com/users/6263092/daleonpz"}, "edited": false, "score": 0, "creation_date": 1488465089, "post_id": 42542955, "comment_id": 72250613, "body": "thanks, it improved the overall code.. and also regex101.com is an awesome website"}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "reply_to_user": {"reputation": 531, "user_id": 6263092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb2b4f5a51939f8596040cc534fec8da?s=128&d=identicon&r=PG&f=1", "display_name": "daleonpz", "link": "https://stackoverflow.com/users/6263092/daleonpz"}, "edited": false, "score": 0, "creation_date": 1488480981, "post_id": 42542955, "comment_id": 72261293, "body": "@daleonpz: Added a version to return only the selected values."}], "tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": true, "score": 1, "last_activity_date": 1488480957, "last_edit_date": 1488480957, "creation_date": 1488405715, "answer_id": 42542955, "question_id": 42542063, "link": "https://stackoverflow.com/questions/42542063/python-regex-get-items-from-orgmode-files/42542955#42542955", "title": "Python regex - get items from orgmode files", "body": "<p>You could achieve it with</p>\n\n<pre><code>import re\n\nstring = \"\"\"\n** Hardware [0/1]\n - [ ] adapt a programmable motor to a tripod to be used for panning \n** Reading - Technology [1/6]\n - [X] Introduction to Networking - Charles Severance\n - [ ] A Tour of C++ - Bjarne Stroustrup\n - [ ] C++ How to Program - Paul Deitel\n - [X] Computer Systems - Randal Bryant\n - [ ] The C programming language - Brian Kernighan\n - [ ] Beginning Linux Programming -Matthew and Stones\n** Reading - Health [3/4]\n - [ ] Patrick McKeown - The Oxygen Advantage\n - [X] Total Knee Health - Martin Koban\n - [X] Supple Leopard - Kelly Starrett\n - [X] Convict Conditioning 1 and 2  \n \"\"\"\n\ndef getitems(section):\n    rx = re.compile(r'^\\*{2} ' + re.escape(section) + r'.+[\\n\\r](?P&lt;block&gt;(?:(?!^\\*{2})[\\s\\S])+)', re.MULTILINE)\n    try:\n        items = rx.search(string)\n        return items.group('block')\n    except:\n        return None\n\nitems = getitems('Reading - Technology')\nprint(items)\n</code></pre>\n\n<p>See it <a href=\"http://ideone.com/57dzQK\" rel=\"nofollow noreferrer\"><strong>working on ideone.com</strong></a>.<br>\n<hr>\nThe heart of the code is the (condensed) expression:</p>\n\n<pre><code>^\\*{2}.+[\\n\\r]       # match the beginning of the line, followed by two stars, anything else in between and a newline\n(?P&lt;block&gt;           # open group \"block\"\n    (?:              # non-capturing group\n        (?!^\\*{2})   # a neg. lookahead, making sure no ** follows at the beginning of a line\n        [\\s\\S]       # any character...\n    )+               # ...at least once\n)                    # close group \"block\"\n</code></pre>\n\n<p>where your search string is inserted after <code>**</code> in the actual code. See a demo for <code>Reading - Technology</code> on <strong><a href=\"https://regex101.com/r/CHt4Wl/1\" rel=\"nofollow noreferrer\">regex101.com</a></strong>.\n<hr>\nAs a follow-up, you could as well only return the <strong>selected values</strong>, like so:</p>\n\n<pre><code>def getitems(section, selected=None):\n    rx = re.compile(r'^\\*{2} ' + re.escape(section) + r'.+[\\n\\r](?P&lt;block&gt;(?:(?!^\\*{2})[\\s\\S])+)', re.MULTILINE)\n    try:\n        items = rx.search(string).group('block')\n        if selected:\n            rxi = re.compile(r'^ - \\[X\\]\\ (.+)', re.MULTILINE)\n            try:\n                selected_items = rxi.findall(items)\n                return selected_items\n            except:\n                return None\n         return items\n    except:\n        return None\n\nitems = getitems('Reading - Health', selected=True)\nprint(items)\n</code></pre>\n"}], "owner": {"reputation": 531, "user_id": 6263092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb2b4f5a51939f8596040cc534fec8da?s=128&d=identicon&r=PG&f=1", "display_name": "daleonpz", "link": "https://stackoverflow.com/users/6263092/daleonpz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 42542955, "answer_count": 3, "score": 2, "last_activity_date": 1488480957, "creation_date": 1488402404, "last_edit_date": 1488403026, "question_id": 42542063, "link": "https://stackoverflow.com/questions/42542063/python-regex-get-items-from-orgmode-files", "title": "Python regex - get items from orgmode files", "body": "<p>I have the following org-mode syntax:</p>\n\n<pre><code>** Hardware [0/1]\n - [ ] adapt a programmable motor to a tripod to be used for panning \n** Reading - Technology [1/6]\n - [X] Introduction to Networking - Charles Severance\n - [ ] A Tour of C++ - Bjarne Stroustrup\n - [ ] C++ How to Program - Paul Deitel\n - [X] Computer Systems - Randal Bryant\n - [ ] The C programming language - Brian Kernighan\n - [ ] Beginning Linux Programming -Matthew and Stones\n** Reading - Health [3/4]\n - [ ] Patrick McKeown - The Oxygen Advantage\n - [X] Total Knee Health - Martin Koban\n - [X] Supple Leopard - Kelly Starrett\n - [X] Convict Conditioning 1 and 2  \n</code></pre>\n\n<p>and I want to extract the items, such as:</p>\n\n<pre><code> getitems \"Hardware\"\n</code></pre>\n\n<p>I should get:</p>\n\n<pre><code>  - [ ] adapt a programmable motor to a tripod to be used for panning  \n</code></pre>\n\n<p>if I ask for  \"Reading - Health\", I should get:</p>\n\n<pre><code> - [ ] Patrick McKeown - The Oxygen Advantage\n - [X] Total Knee Health - Martin Koban\n - [X] Supple Leopard - Kelly Starrett\n - [X] Convict Conditioning 1 and 2 \n</code></pre>\n\n<p>I am using the following pattern:</p>\n\n<pre><code>   pattern = re.compile(\"\\*\\* \"+ head + \" (.+?)\\*?$\", re.DOTALL)\n</code></pre>\n\n<p>the output when asking for \"Reading - Technology\" is:</p>\n\n<pre><code>  - [X] Introduction to Networking - Charles Severance\n  - [ ] A Tour of C++ - Bjarne Stroustrup\n  - [ ] C++ How to Program - Paul Deitel\n  - [X] Computer Systems - Randal Bryant\n  - [ ] The C programming language - Brian Kernighan\n  - [ ] Beginning Linux Programming -Matthew and Stones\n   ** Reading - Health [3/4]\n  - [ ] Patrick McKeown - The Oxygen Advantage\n  - [X] Total Knee Health - Martin Koban\n  - [X] Supple Leopard - Kelly Starrett\n  - [X] Convict Conditioning 1 and 2  \n</code></pre>\n\n<p>I also tried:</p>\n\n<pre><code>   pattern = re.compile(\"\\*\\* \"+ head + \" (.+?)[\\*|\\z]\", re.DOTALL)\n</code></pre>\n\n<p>this last one works fine for all the headers except for the last one. </p>\n\n<p>output when asking for \"Reading - Health\":</p>\n\n<pre><code> - [ ] Patrick McKeown - The Oxygen Advantage\n - [X] Total Knee Health - Martin Koban\n - [X] Supple Leopard - Kelly Starrett\n</code></pre>\n\n<p>As you can see, it doesn't match the last line.</p>\n\n<p>I'm using python 2.7, and findall.</p>\n"}, {"tags": ["python", "macos", "sublimetext2", "interpreter"], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 6032213, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-WZw8mm2NMUo/AAAAAAAAAAI/AAAAAAAABdI/U5vS7ENmGY0/photo.jpg?sz=128", "display_name": "Iara Ribeiro", "link": "https://stackoverflow.com/users/6032213/iara-ribeiro"}, "is_accepted": false, "score": 2, "last_activity_date": 1488402847, "creation_date": 1488402847, "answer_id": 42542156, "question_id": 42542037, "link": "https://stackoverflow.com/questions/42542037/how-to-run-code-directly-from-python-interpreter-in-sublime-text-2/42542156#42542156", "title": "How to run code directly from python interpreter in Sublime Text 2?", "body": "<p>I don't think sublime support it. I know you can use <a href=\"https://github.com/wuub/SublimeREPL\" rel=\"nofollow noreferrer\">SublimeREPL</a> when you need pass some users inputs.</p>\n"}], "owner": {"reputation": 6473, "user_id": 1446289, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/407d1774cc79b26ca440f2bc1b4103d5?s=128&d=identicon&r=PG", "display_name": "Borealis", "link": "https://stackoverflow.com/users/1446289/borealis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488402847, "creation_date": 1488402312, "question_id": 42542037, "link": "https://stackoverflow.com/questions/42542037/how-to-run-code-directly-from-python-interpreter-in-sublime-text-2", "title": "How to run code directly from python interpreter in Sublime Text 2?", "body": "<p>I'm running a python script using Sublime Text 2. To run the script, I use command B--this works great until I want to explore some variable by typing it into the python interpreter, as the interpreter does not appear to be interactive. Is there any way to be able to input code into Sublime Text 2's interpreter in order to test ideas and code snippets before I add them to the main script?</p>\n"}, {"tags": ["python", "pandas", "dataframe", "subtraction"], "answers": [{"tags": [], "owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "is_accepted": true, "score": 4, "last_activity_date": 1488403145, "creation_date": 1488403145, "answer_id": 42542245, "question_id": 42542026, "link": "https://stackoverflow.com/questions/42542026/subtract-two-dataframes-of-different-size-but-maintain-at-least-the-size-of-the/42542245#42542245", "title": "Subtract two dataframes of different size, but maintain at least the size of the first dataframe", "body": "<p>Fill back the gaps:</p>\n\n<pre><code>(df-df2).combine_first(df).reindex_like(df).astype(int)\nOut[45]: \n          Blue  Dog  Apple\nDate                      \n1/1/2016     0    4      1\n1/1/2015     0    4      1\n1/1/2014     0    4      1\n1/1/2013     3    4      2\n1/1/2012     3    4      2\n1/1/2011     3    4      2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24066, "user_id": 4686625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gsGGS.jpg?s=128&g=1", "display_name": "miradulo", "link": "https://stackoverflow.com/users/4686625/miradulo"}, "is_accepted": false, "score": 4, "last_activity_date": 1488404775, "last_edit_date": 1488404775, "creation_date": 1488403957, "answer_id": 42542452, "question_id": 42542026, "link": "https://stackoverflow.com/questions/42542026/subtract-two-dataframes-of-different-size-but-maintain-at-least-the-size-of-the/42542452#42542452", "title": "Subtract two dataframes of different size, but maintain at least the size of the first dataframe", "body": "<p>Boud already has you covered with a great answer, but piggybacking off of it, you could also just provide a fill value of 0 to <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.subtract.html\" rel=\"nofollow noreferrer\"><code>df.subtract</code></a> and then <a href=\"http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.reindex_like.html\" rel=\"nofollow noreferrer\"><code>reindex_like</code></a>. </p>\n\n<pre><code>&gt;&gt;&gt; df.subtract(df2, fill_value=0).reindex_like(df).astype(int)\n          Blue  Dog  Apple\nDate                      \n1/1/2016     0    4      1\n1/1/2015     0    4      1\n1/1/2014     0    4      1\n1/1/2013     3    4      2\n1/1/2012     3    4      2\n1/1/2011     3    4      2\n</code></pre>\n\n<p>This looks like it is faster from a (<em>rough</em>) benchmark, as we can avoid the <code>combine_first</code> combination. </p>\n\n<pre><code>%timeit df.subtract(df2, fill_value=0).reindex_like(df).astype(int)\n100 loops, best of 3: <b>3.63 ms per loop</b>\n\n%timeit (df-df2).combine_first(df).reindex_like(df).astype(int)\n100 loops, best of 3: <b>8.69 ms per loop</b></code></pre>\n"}], "owner": {"reputation": 549, "user_id": 7390912, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/3eb330777ef0544fd6b328f6550eb66c?s=128&d=identicon&r=PG&f=1", "display_name": "MysterioProgrammer91", "link": "https://stackoverflow.com/users/7390912/mysterioprogrammer91"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1576, "favorite_count": 0, "accepted_answer_id": 42542245, "answer_count": 2, "score": 4, "last_activity_date": 1488404775, "creation_date": 1488402295, "last_edit_date": 1488404164, "question_id": 42542026, "link": "https://stackoverflow.com/questions/42542026/subtract-two-dataframes-of-different-size-but-maintain-at-least-the-size-of-the", "title": "Subtract two dataframes of different size, but maintain at least the size of the first dataframe", "body": "<p>I have a DataFrame df and from there I want to subtract df2.</p>\n\n<p>The caveat is that I want df to maintain the same size, and for every element in df, I want to minus df2 (if there is not such unique index/column in df2), it would just be <code>df(i,j) - 0</code> (as no such index/column found in df2). </p>\n\n<p>Example:</p>\n\n<p><strong>df:</strong></p>\n\n<pre><code>Date    Blue    Dog Apple\n1/1/2016    3   4   2\n1/1/2015    3   4   2\n1/1/2014    3   4   2\n1/1/2013    3   4   2\n1/1/2013    3   4   2\n1/1/2013    3   4   2\n</code></pre>\n\n<p><strong>df2:</strong></p>\n\n<pre><code>Date    Apple   Blue    Cat\n1/1/2017    1   3   2\n1/1/2016    1   3   2\n1/1/2015    1   3   2\n1/1/2014    1   3   2\n</code></pre>\n\n<p>I want df - df2 to look like this:</p>\n\n<pre><code>Date    Blue    Dog Apple\n1/1/2016    0   4   1\n1/1/2015    0   4   1\n1/1/2014    0   4   1\n1/1/2013    3   4   2\n1/1/2012    3   4   2\n1/1/2011    3   4   2\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["python", "matplotlib", "plot", "ipython-notebook"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7643731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f86b41dac791748879954bf6721af1?s=128&d=identicon&r=PG&f=1", "display_name": "shsh-nuekoeln", "link": "https://stackoverflow.com/users/7643731/shsh-nuekoeln"}, "edited": false, "score": 0, "creation_date": 1488442851, "post_id": 42542301, "comment_id": 72235404, "body": "cool! but there&#39;s still one more problem... the return value is always in integer form but i want it as floating point for later use.. any solution allows me to do that?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 11, "user_id": 7643731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f86b41dac791748879954bf6721af1?s=128&d=identicon&r=PG&f=1", "display_name": "shsh-nuekoeln", "link": "https://stackoverflow.com/users/7643731/shsh-nuekoeln"}, "edited": false, "score": 0, "creation_date": 1488444385, "post_id": 42542301, "comment_id": 72236310, "body": "What do you mean by <code>return</code> value? There is no return here. Of course you can cast the values to <code>float</code> like <code>collector[&#39;x&#39;] = float(event.xdata)</code> if that is what you mean."}, {"owner": {"reputation": 11, "user_id": 7643731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f86b41dac791748879954bf6721af1?s=128&d=identicon&r=PG&f=1", "display_name": "shsh-nuekoeln", "link": "https://stackoverflow.com/users/7643731/shsh-nuekoeln"}, "edited": false, "score": 0, "creation_date": 1488461882, "post_id": 42542301, "comment_id": 72248196, "body": "i meant whether it can print out the coordinate of the point i clicked more precisely. If i clicked on x:503.449 y:521.459, i will get x-503 and y=521 instead of original value. is there any way i can avoid this approximation?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 11, "user_id": 7643731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f86b41dac791748879954bf6721af1?s=128&d=identicon&r=PG&f=1", "display_name": "shsh-nuekoeln", "link": "https://stackoverflow.com/users/7643731/shsh-nuekoeln"}, "edited": false, "score": 0, "creation_date": 1488464645, "post_id": 42542301, "comment_id": 72250291, "body": "When I click on the image, it prints <code>{&#39;y&#39;: 267.66354838709674, &#39;x&#39;: 71.209677419354819}</code>. I&#39;m using matplotlib 2.0, this may have been different in previous versions."}, {"owner": {"reputation": 11, "user_id": 7643731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f86b41dac791748879954bf6721af1?s=128&d=identicon&r=PG&f=1", "display_name": "shsh-nuekoeln", "link": "https://stackoverflow.com/users/7643731/shsh-nuekoeln"}, "edited": false, "score": 0, "creation_date": 1488471376, "post_id": 42542301, "comment_id": 72255149, "body": "okay thx! I will try to give a shot on changing a version of matplotlib.."}, {"owner": {"reputation": 11, "user_id": 7643731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f86b41dac791748879954bf6721af1?s=128&d=identicon&r=PG&f=1", "display_name": "shsh-nuekoeln", "link": "https://stackoverflow.com/users/7643731/shsh-nuekoeln"}, "edited": false, "score": 0, "creation_date": 1489422706, "post_id": 42542301, "comment_id": 72652971, "body": "I just checked my matplotlib version. It&#39;s 2.0.0. But it only returns me integers. Any idea? Totally trapped into this problem"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 11, "user_id": 7643731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f86b41dac791748879954bf6721af1?s=128&d=identicon&r=PG&f=1", "display_name": "shsh-nuekoeln", "link": "https://stackoverflow.com/users/7643731/shsh-nuekoeln"}, "edited": false, "score": 0, "creation_date": 1489423085, "post_id": 42542301, "comment_id": 72653216, "body": "Can you reformulate and summarize the problem again? Which code is producing what? Maybe add a screenshot?"}, {"owner": {"reputation": 11, "user_id": 7643731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f86b41dac791748879954bf6721af1?s=128&d=identicon&r=PG&f=1", "display_name": "shsh-nuekoeln", "link": "https://stackoverflow.com/users/7643731/shsh-nuekoeln"}, "edited": false, "score": 0, "creation_date": 1489518251, "post_id": 42542301, "comment_id": 72703476, "body": "<a href=\"http://stackoverflow.com/questions/42794479/converting-matplotlibs-event-coordinates-into-floating-numbers\" title=\"converting matplotlibs event coordinates into floating numbers\">stackoverflow.com/questions/42794479/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 7643731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f86b41dac791748879954bf6721af1?s=128&d=identicon&r=PG&f=1", "display_name": "shsh-nuekoeln", "link": "https://stackoverflow.com/users/7643731/shsh-nuekoeln"}, "edited": false, "score": 0, "creation_date": 1489518274, "post_id": 42542301, "comment_id": 72703485, "body": "check out this page. I formulated the question into a more understandable way."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 0, "last_activity_date": 1488411206, "last_edit_date": 1488411206, "creation_date": 1488403373, "answer_id": 42542301, "question_id": 42541999, "link": "https://stackoverflow.com/questions/42541999/converting-functions-of-matplotlib-notebook-into-python-script/42542301#42542301", "title": "converting functions of %matplotlib notebook into Python script", "body": "<p>In principle there is no need for such event handling, since this is automatically available in the matplotlib plotting window.</p>\n\n<p>The following script </p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nimage = plt.imread(\"image.jpg\")\n\nfig, ax = plt.subplots(figsize=(4,3))\nax.imshow(image)\n\nplt.show()\n</code></pre>\n\n<p>produces this window</p>\n\n<p><a href=\"https://i.stack.imgur.com/hwykS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hwykS.png\" alt=\"enter image description here\"></a></p>\n\n<p>which shows the coordinates of the current mouse position inside the lower status bar.</p>\n\n<p>But of course the functionality can be extended as in the question by using the same event handling mechanism</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\nimage = plt.imread(\"image.jpg\")\n\nfig, ax = plt.subplots(figsize=(4,3))\nax.imshow(image)\n\ncollector = {'x':0,'y':0}\ndef onclick(event):\n    collector['x'] = event.x\n    collector['y'] = event.y\n    print(collector)\n\ncid = fig.canvas.mpl_connect('button_press_event',onclick)\n\nplt.show()\n</code></pre>\n\n<p>Note that this will print the figure coordinate, not the data coordinate. Since the figure coordinate is pretty useless in most cases, it would be better to use the data coordinates, like this.</p>\n\n<pre><code>collector['x'] = event.xdata\ncollector['y'] = event.ydata\n</code></pre>\n\n<p>Also see the <a href=\"http://matplotlib.org/users/event_handling.html\" rel=\"nofollow noreferrer\">event handling article</a> on the matplotlib page.</p>\n"}], "owner": {"reputation": 11, "user_id": 7643731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04f86b41dac791748879954bf6721af1?s=128&d=identicon&r=PG&f=1", "display_name": "shsh-nuekoeln", "link": "https://stackoverflow.com/users/7643731/shsh-nuekoeln"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 152, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1488411206, "creation_date": 1488402153, "question_id": 42541999, "link": "https://stackoverflow.com/questions/42541999/converting-functions-of-matplotlib-notebook-into-python-script", "title": "converting functions of %matplotlib notebook into Python script", "body": "<p>I'm trying to convert several python notebook file into python scripts so that I can create a python package...\nThe problem I'm having now is that in python notebook, there's </p>\n\n<pre><code>%matplotlib notebook\n</code></pre>\n\n<p>magic button that makes user can click on a plot and receive the coordinate of the plot he/she just clicked on. The way to realize it is below:</p>\n\n<pre><code>f = urllib.urlopen(url_link)\nfig = plt.figure(figsize=(3,3))\ncoords = coordinates(my_coord)[1]\nimage = plt.imread(f)\nplt.imshow(image)\n\ncollector = {'x':0,'y':0}\ndef onclick(event):\n    collector['x'] = event.x\n    collector['y'] = event.y\n\ncid = fig.canvas.mpl_connect('button_press_event',onclick)\nprint(collector)\n</code></pre>\n\n<p>Now I would like to make the same function in python script. but in script</p>\n\n<pre><code>%matplotlib notebook\n</code></pre>\n\n<p>is not working. Is there any alternative way that allows my python script do the same thing: showing plot and user can click on and return coordinate user clicked?</p>\n\n<p>Thx in advance!</p>\n"}, {"tags": ["python", "python-multithreading"], "answers": [{"tags": [], "owner": {"reputation": 2821, "user_id": 1092803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3sAr.jpg?s=128&g=1", "display_name": "Gianluca", "link": "https://stackoverflow.com/users/1092803/gianluca"}, "is_accepted": false, "score": 1, "last_activity_date": 1488403749, "creation_date": 1488403749, "answer_id": 42542396, "question_id": 42541997, "link": "https://stackoverflow.com/questions/42541997/python-how-can-i-alter-the-number-of-threads-based-on-the-number-of-incoming-fi/42542396#42542396", "title": "Python: How can I alter the number of threads based on the number of incoming files?", "body": "<p>A simple solution is to count the number of files in the directory with something like</p>\n\n<pre><code> numOfFiles = len([f for f in  os.listdir(\"/home/samples\")])\n</code></pre>\n\n<p>and then decide what to do before the for loop, something like</p>\n\n<pre><code>threadNum = 40 if numOfFiles &gt; 5000 else 2\nfor x in range(threadNum):\n    [your code]\n</code></pre>\n"}], "owner": {"reputation": 1173, "user_id": 6656192, "user_type": "registered", "accept_rate": 5, "profile_image": "https://www.gravatar.com/avatar/150e90089f3fa8767d5a9fe98e3151b7?s=128&d=identicon&r=PG&f=1", "display_name": "NoName", "link": "https://stackoverflow.com/users/6656192/noname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488403749, "creation_date": 1488402148, "question_id": 42541997, "link": "https://stackoverflow.com/questions/42541997/python-how-can-i-alter-the-number-of-threads-based-on-the-number-of-incoming-fi", "title": "Python: How can I alter the number of threads based on the number of incoming files?", "body": "<p>I have a folder (\"/home/samples/\") and files are continuously written to it by another application. My script is:</p>\n\n<pre><code>def multiThreadedSend():\n    for root, subdirs, files in os.walk(\"/home/samples/\"):\n        fileList = sorted(files)\n    queue = Queue.Queue()\n    for x in range(4):\n        worker = Thread(target=send_bytes, args=(queue))\n        worker.daemon = True\n        worker.start()\n    for f in fileList:\n        queue.put(f)\n    queue.join()\n</code></pre>\n\n<p>I want the number of threads to depend on the number of files. For example, If there are too many files in the folder (say 5000), I want the threads to increase to maybe 40 threads. If there are less than 100 files, I want the number of threads to be 2 or less. </p>\n\n<p>How can this be implemented?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "threadpool"], "answers": [{"comments": [{"owner": {"reputation": 4815, "user_id": 5540305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EuHvE.jpg?s=128&g=1", "display_name": "hashcode55", "link": "https://stackoverflow.com/users/5540305/hashcode55"}, "edited": false, "score": 0, "creation_date": 1488402556, "post_id": 42542076, "comment_id": 72219964, "body": "OP is already using the <code>multiprocessing</code> module, which just imitates <code>multithreading</code>."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "reply_to_user": {"reputation": 4815, "user_id": 5540305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EuHvE.jpg?s=128&g=1", "display_name": "hashcode55", "link": "https://stackoverflow.com/users/5540305/hashcode55"}, "edited": false, "score": 0, "creation_date": 1488403398, "post_id": 42542076, "comment_id": 72220429, "body": "The <code>ThreadPool</code> in <code>multiprocessing</code> is not really multiprocessing, it&#39;s just there to match the API of the usual <code>Pool</code> which uses actual processes."}, {"owner": {"reputation": 4815, "user_id": 5540305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EuHvE.jpg?s=128&g=1", "display_name": "hashcode55", "link": "https://stackoverflow.com/users/5540305/hashcode55"}, "edited": false, "score": 0, "creation_date": 1488403715, "post_id": 42542076, "comment_id": 72220578, "body": "I think you are right (+1). It seems to be undocumented and I confused it with just <code>Pool</code>."}, {"owner": {"reputation": 4815, "user_id": 5540305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EuHvE.jpg?s=128&g=1", "display_name": "hashcode55", "link": "https://stackoverflow.com/users/5540305/hashcode55"}, "edited": false, "score": 0, "creation_date": 1488403762, "post_id": 42542076, "comment_id": 72220605, "body": "Sorry for a lazy argument"}, {"owner": {"reputation": 4815, "user_id": 5540305, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EuHvE.jpg?s=128&g=1", "display_name": "hashcode55", "link": "https://stackoverflow.com/users/5540305/hashcode55"}, "edited": false, "score": 0, "creation_date": 1488403788, "post_id": 42542076, "comment_id": 72220619, "body": "@PranitiGupta Yes it is, I was mistaken."}, {"owner": {"reputation": 89, "user_id": 7564940, "user_type": "registered", "profile_image": "https://graph.facebook.com/1392068957499637/picture?type=large", "display_name": "Praniti Gupta", "link": "https://stackoverflow.com/users/7564940/praniti-gupta"}, "edited": false, "score": 0, "creation_date": 1488404708, "post_id": 42542076, "comment_id": 72221167, "body": "If func1() runs a command every x sec (doesn&#39;t terminate until keyboard interruption provided) and if I want to run this function for different objects in parallel, what is the best choice-&gt; multiprocessing or ThreadPool? I am still confused regarding ThreadPool. Does it create a pool of threads or pool of processes?"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "reply_to_user": {"reputation": 89, "user_id": 7564940, "user_type": "registered", "profile_image": "https://graph.facebook.com/1392068957499637/picture?type=large", "display_name": "Praniti Gupta", "link": "https://stackoverflow.com/users/7564940/praniti-gupta"}, "edited": false, "score": 0, "creation_date": 1488404952, "post_id": 42542076, "comment_id": 72221291, "body": "@PranitiGupta a ThreadPool is a pool of threads, as one would expect. The only unexpected thing in terms of names is that it is found in the <code>multiprocessing</code> module. If you are using <code>time.sleep(1)</code> between calls to the command, then one thread will be able to work while the other is sleeping, but if they all sleep at the same time and work at the same time, multiple threads may not help."}, {"owner": {"reputation": 89, "user_id": 7564940, "user_type": "registered", "profile_image": "https://graph.facebook.com/1392068957499637/picture?type=large", "display_name": "Praniti Gupta", "link": "https://stackoverflow.com/users/7564940/praniti-gupta"}, "edited": false, "score": 0, "creation_date": 1488406718, "post_id": 42542076, "comment_id": 72222159, "body": "@AlexHall They all should sleep at the same time. I guess ThreadPool is not the solution. Can you suggest some other method?"}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "edited": false, "score": 0, "creation_date": 1488407111, "post_id": 42542076, "comment_id": 72222348, "body": "Why do you want to run things in parallel to speed them up but also you&#39;re making them sleep? Why not just cycle through the objects to run the function on without using multiple threads or processes?"}, {"owner": {"reputation": 89, "user_id": 7564940, "user_type": "registered", "profile_image": "https://graph.facebook.com/1392068957499637/picture?type=large", "display_name": "Praniti Gupta", "link": "https://stackoverflow.com/users/7564940/praniti-gupta"}, "edited": false, "score": 0, "creation_date": 1488410630, "post_id": 42542076, "comment_id": 72223831, "body": "What I am trying to do is, send request to the URL every x sec and store that result in a file. Since there are multiple URLs, I want to run the func() in parallel. This is for monitoring purpose."}, {"owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "reply_to_user": {"reputation": 89, "user_id": 7564940, "user_type": "registered", "profile_image": "https://graph.facebook.com/1392068957499637/picture?type=large", "display_name": "Praniti Gupta", "link": "https://stackoverflow.com/users/7564940/praniti-gupta"}, "edited": false, "score": 0, "creation_date": 1488477192, "post_id": 42542076, "comment_id": 72259033, "body": "@PranitiGupta threads will work fine for that. One will be able to work while another waits for a response from the URL. In any case it doesn&#39;t sound like it&#39;s time critical so it doesn&#39;t matter if they get in each other&#39;s way a little."}], "tags": [], "owner": {"reputation": 31205, "user_id": 2482744, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/OQPNY.png?s=128&g=1", "display_name": "Alex Hall", "link": "https://stackoverflow.com/users/2482744/alex-hall"}, "is_accepted": true, "score": 2, "last_activity_date": 1488402481, "creation_date": 1488402481, "answer_id": 42542076, "question_id": 42541893, "link": "https://stackoverflow.com/questions/42541893/maximum-pool-size-when-using-threadpool-python/42542076#42542076", "title": "Maximum pool size when using ThreadPool Python", "body": "<p>You cannot use threads for multiprocessing, you can only achieve multithreading. Multiple threads cannot run concurrently in a single Python process because of the GIL and so multithreading is only useful if they are running IO heavy work (e.g. talking to the Internet) where they spend a lot of time waiting, rather than CPU heavy work (e.g. maths) which constantly occupies a core.</p>\n\n<p>So if you have many IO heavy tasks running at once then having that many threads will be useful, even if it's more than the the number of CPU cores. A very large number threads will eventually have a negative impact on performance, but until you actually measure a problem don't worry. Something like 100 threads should be fine.</p>\n"}, {"tags": [], "owner": {"reputation": 625, "user_id": 2018567, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/86ad897f57333bd2d2b741f2867970b9?s=128&d=identicon&r=PG&f=1", "display_name": "Clock ZHONG", "link": "https://stackoverflow.com/users/2018567/clock-zhong"}, "is_accepted": false, "score": 0, "last_activity_date": 1613301587, "creation_date": 1613301587, "answer_id": 66194877, "question_id": 42541893, "link": "https://stackoverflow.com/questions/42541893/maximum-pool-size-when-using-threadpool-python/66194877#66194877", "title": "Maximum pool size when using ThreadPool Python", "body": "<p>No, you needn't  limit the thread pool size be same as the number of CPU cores. If you are using it in IO high throughput situation, you could adjust your thread pool size to a suitable number which help you get the highest IO throughput, and if increasing the threads number, you couldn't get higher IO throughput number.</p>\n<p>(I found that the maximum thread number I could set for threadpool is only around 9000, if higher, the Python3.6 reports error, and Google let me visit your question)</p>\n"}], "owner": {"reputation": 89, "user_id": 7564940, "user_type": "registered", "profile_image": "https://graph.facebook.com/1392068957499637/picture?type=large", "display_name": "Praniti Gupta", "link": "https://stackoverflow.com/users/7564940/praniti-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6603, "favorite_count": 1, "accepted_answer_id": 42542076, "answer_count": 2, "score": 3, "last_activity_date": 1613301587, "creation_date": 1488401791, "question_id": 42541893, "link": "https://stackoverflow.com/questions/42541893/maximum-pool-size-when-using-threadpool-python", "title": "Maximum pool size when using ThreadPool Python", "body": "<p>I am using ThreadPool to achieve multiprocessing. When using multiprocessing, pool size limit should be equivalent to number of CPU cores. \nMy question- When using ThreadPool, should the pool size limit be number of CPU cores?</p>\n\n<p>This is my code</p>\n\n<pre><code>from multiprocessing.pool import ThreadPool as Pool\nclass Subject():\n    def __init__(self, url):\n       #rest of the code\n   def func1(self):\n      #returns something\nif __name__==\"__main__\":\n   pool_size= 11\n   pool= Pool(pool_size)\n   objects= [Subject() for url in all_my_urls]\n   for obj in objects:\n     pool.apply_async(obj.func1, ())\n   pool.close()\n   pool.join()\n</code></pre>\n\n<p>What should be the maximum pool size be? \nThanks in advance. </p>\n"}, {"tags": ["python", "python-3.x", "gmail-api"], "comments": [{"owner": {"reputation": 6485, "user_id": 665023, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/19de47c795aeb4440bcf2097e83e02a4?s=128&d=identicon&r=PG", "display_name": "derek", "link": "https://stackoverflow.com/users/665023/derek"}, "edited": false, "score": 0, "creation_date": 1537674319, "post_id": 42541857, "comment_id": 91867732, "body": "How to import &quot;errors&quot;?"}, {"owner": {"reputation": 1161, "user_id": 1486850, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/74f1f2564d6b51edae1563c1814ba6a7?s=128&d=identicon&r=PG&f=1", "display_name": "JinSnow", "link": "https://stackoverflow.com/users/1486850/jinsnow"}, "reply_to_user": {"reputation": 6485, "user_id": 665023, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/19de47c795aeb4440bcf2097e83e02a4?s=128&d=identicon&r=PG", "display_name": "derek", "link": "https://stackoverflow.com/users/665023/derek"}, "edited": false, "score": 2, "creation_date": 1537684890, "post_id": 42541857, "comment_id": 91869250, "body": "@derek try <code>from apiclient import errors, discovery  #needed for gmail service</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1047, "user_id": 1015882, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1498eb36da9d64507cb84f6567c0f350?s=128&d=identicon&r=PG", "display_name": "G Gill", "link": "https://stackoverflow.com/users/1015882/g-gill"}, "edited": false, "score": 1, "creation_date": 1494886910, "post_id": 42541858, "comment_id": 75008517, "body": "Works for me. Thanks."}], "tags": [], "owner": {"reputation": 1161, "user_id": 1486850, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/74f1f2564d6b51edae1563c1814ba6a7?s=128&d=identicon&r=PG&f=1", "display_name": "JinSnow", "link": "https://stackoverflow.com/users/1486850/jinsnow"}, "is_accepted": false, "score": 11, "last_activity_date": 1488401675, "creation_date": 1488401675, "answer_id": 42541858, "question_id": 42541857, "link": "https://stackoverflow.com/questions/42541857/error-using-gmail-api-tuto-using-python-3-except-errors-httperror-error/42541858#42541858", "title": "error using gmail api tuto using python 3 &quot;except errors.HttpError, error:&quot;", "body": "<p>You must switch the <code>,</code> with a <code>as</code>:</p>\n\n<pre><code>except errors.HttpError as error:\n   print (f'An error occurred: {error}')\n   return None\n</code></pre>\n"}], "owner": {"reputation": 1161, "user_id": 1486850, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/74f1f2564d6b51edae1563c1814ba6a7?s=128&d=identicon&r=PG&f=1", "display_name": "JinSnow", "link": "https://stackoverflow.com/users/1486850/jinsnow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3387, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1599725103, "creation_date": 1488401675, "question_id": 42541857, "link": "https://stackoverflow.com/questions/42541857/error-using-gmail-api-tuto-using-python-3-except-errors-httperror-error", "title": "error using gmail api tuto using python 3 &quot;except errors.HttpError, error:&quot;", "body": "<p>I get an error with the first line:</p>\n\n<pre><code>except errors.HttpError, error:\n   print (f'An error occurred: {error}')\n   return None\n</code></pre>\n\n<p>(The line 2 has been updated for python 3. Only the parenthesis to print are mandatory)</p>\n"}, {"tags": ["python", "excel", "python-2.7", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 1326, "user_id": 719323, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/XgNwH.jpg?s=128&g=1", "display_name": "Jones", "link": "https://stackoverflow.com/users/719323/jones"}, "edited": false, "score": 0, "creation_date": 1488403721, "post_id": 42542247, "comment_id": 72220584, "body": "Your code not presented correctly. Put new line separating code and text."}], "tags": [], "owner": {"reputation": 1, "user_id": 7643868, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/c65d58bb691fe59a18c420da8b2500ac?s=128&d=identicon&r=PG", "display_name": "Paul Lancaster", "link": "https://stackoverflow.com/users/7643868/paul-lancaster"}, "is_accepted": false, "score": 0, "last_activity_date": 1488403158, "creation_date": 1488403158, "answer_id": 42542247, "question_id": 42541824, "link": "https://stackoverflow.com/questions/42541824/trying-to-output-a-list-of-values-from-excel-spreadsheet-but-the-values-keep-ove/42542247#42542247", "title": "Trying to output a list of values from excel spreadsheet but the values keep overiding each other rather than compiling in the output spreadsheet", "body": "<p>You ask for row and col input at the start of your code; however, note that in your final for loop the row and col values are not incremented. So every new calculated value will be written / overwritten in the same cell of the output excel sheet. Overwriting would leave final data in the cell equal to the last calculation:\n    for s in range(n) :\n        sheet = wb.sheet_by_index(s)\n        data=sheet.cell(row,col).value\n        Testsheet.write(index, 0, data)\nAlso, just a side comment not related, but the increment of index at the end appears to be unnecessary and could be deleted.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7220644"}, "edited": false, "score": 0, "creation_date": 1488469211, "post_id": 42542304, "comment_id": 72253647, "body": "even when I indent it it still does not fix my issue"}], "tags": [], "owner": {"reputation": 71, "user_id": 7643429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dbc854adb6292a6d7c069cf31568a47?s=128&d=identicon&r=PG&f=1", "display_name": "Owlette", "link": "https://stackoverflow.com/users/7643429/owlette"}, "is_accepted": false, "score": 0, "last_activity_date": 1488403378, "creation_date": 1488403378, "answer_id": 42542304, "question_id": 42541824, "link": "https://stackoverflow.com/questions/42541824/trying-to-output-a-list-of-values-from-excel-spreadsheet-but-the-values-keep-ove/42542304#42542304", "title": "Trying to output a list of values from excel spreadsheet but the values keep overiding each other rather than compiling in the output spreadsheet", "body": "<p>index = index + 1 is not indented, so its not part of the for loop</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7220644"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1488403378, "creation_date": 1488401557, "last_edit_date": 1488402419, "question_id": 42541824, "link": "https://stackoverflow.com/questions/42541824/trying-to-output-a-list-of-values-from-excel-spreadsheet-but-the-values-keep-ove", "title": "Trying to output a list of values from excel spreadsheet but the values keep overiding each other rather than compiling in the output spreadsheet", "body": "<p>I have included the code below for a python script that retrieves a certain cell value from multiple excel files in a Root directory. Then it is supposed to output these values in a list in the outputted excel file called Test.xls. The problem that I am having is that each time the script runs through a new excel file and calculates a value it replaces the value it had calculated before. This leaves me with an outputted excel spreadsheet that only contains the single value of the last excel spreadsheet it calculated.</p>\n\n<pre><code>import os\nimport xlwt\nimport xlrd\n\nindex = 0\n\nworkbook = xlwt.Workbook()\nTestsheet = workbook.add_sheet('test')\nprint(\"Provide row\")\nrow = int(input())\nprint(\"Provide column\")\ncol = int(input())\npath= 'U:/SWEModelConstruction/Milk'\nfor root,dirs,files in os.walk(path):\n    xlsfiles=[ _ for _ in files if _.endswith('.xls') ]\nfor xlsfile in xlsfiles:\n     wb = xlrd.open_workbook(os.path.join(root,xlsfile))\n     n = len(wb.sheets())\nfor s in range(n) :\n    sheet = wb.sheet_by_index(s)\n    data=sheet.cell(row,col).value\n    Testsheet.write(index, 0, data)\nindex=index+1\n\nworkbook.save('Test.xls')\n</code></pre>\n"}, {"tags": ["python", "scikit-learn", "sparse-matrix", "dimensionality-reduction"], "answers": [{"comments": [{"owner": {"reputation": 1924, "user_id": 1607185, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/BtKvH.jpg?s=128&g=1", "display_name": "Michel Lemay", "link": "https://stackoverflow.com/users/1607185/michel-lemay"}, "edited": false, "score": 1, "creation_date": 1488402197, "post_id": 42541930, "comment_id": 72219783, "body": "I thought it was clear I needed sparse matrices..  todense yields a MemoryError."}], "tags": [], "owner": {"reputation": 270, "user_id": 7096238, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d49344425914bebe014c5d24865d43cb?s=128&d=identicon&r=PG&f=1", "display_name": "CrisH", "link": "https://stackoverflow.com/users/7096238/crish"}, "is_accepted": false, "score": 0, "last_activity_date": 1488401893, "creation_date": 1488401893, "answer_id": 42541930, "question_id": 42541788, "link": "https://stackoverflow.com/questions/42541788/sklearn-tsne-with-sparse-matrix/42541930#42541930", "title": "sklearn tsne with sparse matrix", "body": "<p>I think this should solve your problem:</p>\n\n<pre><code>X = csr_matrix((distances, (row, col)), shape=(3, 3)).todense()\n</code></pre>\n\n<p>If you really ment csr_matrix instead of csc_matrix</p>\n"}], "owner": {"reputation": 1924, "user_id": 1607185, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/BtKvH.jpg?s=128&g=1", "display_name": "Michel Lemay", "link": "https://stackoverflow.com/users/1607185/michel-lemay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1216, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488401893, "creation_date": 1488401423, "question_id": 42541788, "link": "https://stackoverflow.com/questions/42541788/sklearn-tsne-with-sparse-matrix", "title": "sklearn tsne with sparse matrix", "body": "<p>I'm trying to display tsne on a very sparse matrix with precomputed distances values but I'm having trouble with it.</p>\n\n<p>It boils down to this:</p>\n\n<pre><code>row = np.array([0, 2, 2, 0, 1, 2])\ncol = np.array([0, 0, 1, 2, 2, 2])\ndistances = np.array([.1, .2, .3, .4, .5, .6])\nX = csc_matrix((distances, (row, col)), shape=(3, 3))\nY = TSNE(metric='precomputed').fit_transform(X)\n</code></pre>\n\n<p>However, I get this error:</p>\n\n<blockquote>\n  <p>TypeError: A sparse matrix was passed, but dense data is required for\n  method=\"barnes_hut\". Use X.toarray() to convert to a dense numpy array\n  if the array is small enough for it to fit in memory. Otherwise\n  consider dimensionality reduction techniques (e.g. TruncatedSVD)</p>\n</blockquote>\n\n<p>I don't want to perform TruncatedSVD since I already computed distances.</p>\n\n<p>If I change the <code>method='exact'</code>, I get another error (which is somewhat questionable):</p>\n\n<blockquote>\n  <p>NotImplementedError:  >= and &lt;= don't work with 0.</p>\n</blockquote>\n\n<p>NOTE: my distance matrix is about 100k x 100k with approximately 1M non zero values.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["python", "parsing", "selenium"], "comments": [{"owner": {"reputation": 1866, "user_id": 1183506, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2aba83296f9be999e2fab8eab88b4727?s=128&d=identicon&r=PG", "display_name": "mrfreester", "link": "https://stackoverflow.com/users/1183506/mrfreester"}, "edited": false, "score": 1, "creation_date": 1488403384, "post_id": 42541773, "comment_id": 72220418, "body": "Does the <code>id</code> change for this element <code>&#39;&#47;&#47;*[@id=&quot;tr_an-357543&quot;]&#39;</code>? It sounds like you just need some more robust selectors. It&#39;s hard to say what those might look like without seeing any <code>html</code>."}], "answers": [{"tags": [], "owner": {"reputation": 34075, "user_id": 5168011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb70c32e1e533e7c0cb2f9317a6b2aa3?s=128&d=identicon&r=PG&f=1", "display_name": "Guy", "link": "https://stackoverflow.com/users/5168011/guy"}, "is_accepted": true, "score": 0, "last_activity_date": 1488431411, "creation_date": 1488431411, "answer_id": 42547318, "question_id": 42541773, "link": "https://stackoverflow.com/questions/42541773/how-to-solve-nosuchelementexception-error/42547318#42547318", "title": "How to solve &quot;NoSuchElementException&quot; error?", "body": "<p>It seems it takes few seconds for the site to load each page. You can define implicitly wait when you initialize the <code>driver</code> to wait up to the given time for the elements to exist in the DOM when searching for them (one time initialization) </p>\n\n<pre><code>driver = webdriver.Chrome()\ndriver.implicitly_wait(10)\n</code></pre>\n\n<p>Or use explicit wait and <code>expected_conditions</code> in the problematic parts</p>\n\n<pre><code>parentElement = WebDriverWait(driver, 10).until(EC.visibility_of_element_located((By.XPATH, '//*[@id=\"tr_an-357543\"]'))\n</code></pre>\n\n<p>For reference <a href=\"http://selenium-python.readthedocs.io/waits.html\" rel=\"nofollow noreferrer\">waits</a>.</p>\n"}], "owner": {"reputation": 429, "user_id": 7048618, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2e62b3c82a3be871dd9ab5b606f61f61?s=128&d=identicon&r=PG&f=1", "display_name": "Sinchetru", "link": "https://stackoverflow.com/users/7048618/sinchetru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 42547318, "answer_count": 1, "score": 0, "last_activity_date": 1488431411, "creation_date": 1488401355, "question_id": 42541773, "link": "https://stackoverflow.com/questions/42541773/how-to-solve-nosuchelementexception-error", "title": "How to solve &quot;NoSuchElementException&quot; error?", "body": "<p>I've started to wrote a parser for a local real estate site. I've used Selenium to select the page that I need but after a couple of minutes I cannot reach it one more time, it gives me this error:</p>\n\n<pre><code>    NoSuchElementException: Message: no such element: Unable to locate element: {\"method\":\"xpath\",\"selector\":\"//*[@id=\"tr_an-357543\"]\"}\n  (Session info: chrome=55.0.2883.87)\n  (Driver info: chromedriver=2.27.440175 (9bc1d90b8bfa4dd181fbbf769a5eb5e575574320),platform=Linux 4.4.0-21-generic x86_64)\n</code></pre>\n\n<p>This is the piece of code:</p>\n\n<pre><code>driver = webdriver.Chrome()\nurl = \"https://makler.md/md/\"\ndriver.get(url)\ndriver.maximize_window() \n\ndriver.find_element_by_xpath('//*[@id=\"rublist_lev1\"]/li[1]/a').click() # acces Imobiliare\ndriver.find_element_by_link_text(\"V\u00e2nzare apartamente, camere\").click() # acces Apartamente\n\nparentElement = driver.find_element_by_xpath('//*[@id=\"tr_an-357543\"]')\nelementList = parentElement.find_elements_by_tag_name(\"a\")\n\nlinks = []\n\nfor element in driver.find_elements_by_xpath('//article[starts-with(@id, \"tr_an-\")]//a[@class=\"ls-detail_anUrl\"]'):\n    links.append(element.get_attribute('href'))\n\n\npage = driver.get(links[15])\n\ncaracteristici = driver.find_element_by_xpath('//*[@id=\"anItemData\"]/ul[2]')# Selecteaza blocul caracteristici\nprint(caracteristici.text)\n\ndriver.close()\n</code></pre>\n\n<p>when I copy-paste the x path for 'caracteristici' one more time, it's working. How to fix this problem? </p>\n"}, {"tags": ["python", "file-rename"], "comments": [{"owner": {"reputation": 1044, "user_id": 6451874, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fcba324f29f2095a65d59ba83dd4bdd?s=128&d=identicon&r=PG&f=1", "display_name": "Ofer Arial", "link": "https://stackoverflow.com/users/6451874/ofer-arial"}, "edited": false, "score": 1, "creation_date": 1488401387, "post_id": 42541748, "comment_id": 72219265, "body": "Show us your loop code - your attempts to solve it."}, {"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1488401628, "post_id": 42541748, "comment_id": 72219420, "body": "Renaming and moving a file are the same thing."}, {"owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 0, "creation_date": 1488401638, "post_id": 42541748, "comment_id": 72219431, "body": "Use <a href=\"https://docs.python.org/2/library/os.html#os.rename\" rel=\"nofollow noreferrer\"><code>os.rename</code></a> and <a href=\"https://docs.python.org/2/library/shutil.html#shutil.move\" rel=\"nofollow noreferrer\"><code>shutil.move</code></a>"}, {"owner": {"reputation": 116557, "user_id": 918959, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/b9051b2917c3d55d55b3d7042fa49f6c?s=128&d=identicon&r=PG", "display_name": "Antti Haapala", "link": "https://stackoverflow.com/users/918959/antti-haapala"}, "reply_to_user": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 1, "creation_date": 1488401687, "post_id": 42541748, "comment_id": 72219460, "body": "@inspectorG4dget or, just use <code>shutil.move</code> as it does the correct thing anw."}], "answers": [{"tags": [], "owner": {"reputation": 619, "user_id": 3728261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f9216f3adbf85c8b4730bc5929806d0?s=128&d=identicon&r=PG", "display_name": "Mathieu Bour", "link": "https://stackoverflow.com/users/3728261/mathieu-bour"}, "is_accepted": false, "score": 0, "last_activity_date": 1488401582, "creation_date": 1488401582, "answer_id": 42541828, "question_id": 42541748, "link": "https://stackoverflow.com/questions/42541748/rename-and-move-file-with-python/42541828#42541828", "title": "Rename and move file with Python", "body": "<p>Create a Python file in your desired directory and write something like that :</p>\n\n<pre><code>import os\n\nfor filename in os.listdir(\".\"):\n    if(filename ...):\n        newFilename = ...\n        os.rename(filename, newFilename)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1044, "user_id": 6451874, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2fcba324f29f2095a65d59ba83dd4bdd?s=128&d=identicon&r=PG&f=1", "display_name": "Ofer Arial", "link": "https://stackoverflow.com/users/6451874/ofer-arial"}, "is_accepted": false, "score": 3, "last_activity_date": 1576951952, "last_edit_date": 1576951952, "creation_date": 1488401837, "answer_id": 42541913, "question_id": 42541748, "link": "https://stackoverflow.com/questions/42541748/rename-and-move-file-with-python/42541913#42541913", "title": "Rename and move file with Python", "body": "<p>To do both of the operations, you can use the <code>os.rename(src, dest)</code> function.</p>\n\n<p>You should have the wanted directory to save the file in, and the new file name. You can do this for every file you run across in your loop.</p>\n\n<p><strong>For example:</strong></p>\n\n<pre><code># In Windows\ndest_dir = \"tmp\\\\2\"\nnew_name = \"bar.txt\"\ncurrent_file_name = \"tmp\\\\1\\\\foo.txt\"\nos.rename(current_file_name, os.path.join(dest_dir, new_name))\n</code></pre>\n\n<p>The <code>rename</code> function allows you to change the name of the file and it's folder at the same time.</p>\n\n<p>To prevent any errors in renaming and moving of the file, use <a href=\"https://docs.python.org/3/library/shutil.html#shutil.move\" rel=\"nofollow noreferrer\">shutil.move</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 811, "user_id": 1831325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lfuPR.jpg?s=128&g=1", "display_name": "norman_h", "link": "https://stackoverflow.com/users/1831325/norman-h"}, "edited": false, "score": 0, "creation_date": 1611195939, "post_id": 42541917, "comment_id": 116375515, "body": "As per the docs, shutil.move only copies if the src &amp; dest are on different file systems."}, {"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "reply_to_user": {"reputation": 811, "user_id": 1831325, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lfuPR.jpg?s=128&g=1", "display_name": "norman_h", "link": "https://stackoverflow.com/users/1831325/norman-h"}, "edited": false, "score": 0, "creation_date": 1611196208, "post_id": 42541917, "comment_id": 116375564, "body": "@norman_h: Umm... That&#39;s paraphrasing what my answer says? It atomic renames when possible, and falls back to copy-then-delete when they&#39;re not on the same file system."}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 21, "last_activity_date": 1488401846, "creation_date": 1488401846, "answer_id": 42541917, "question_id": 42541748, "link": "https://stackoverflow.com/questions/42541748/rename-and-move-file-with-python/42541917#42541917", "title": "Rename and move file with Python", "body": "<p><code>os.rename</code> (and <code>os.replace</code>) won't work if the source and target locations are on different partitions/drives/devices. If that's the case, you need to <a href=\"https://docs.python.org/3/library/shutil.html#shutil.move\" rel=\"noreferrer\">use <code>shutil.move</code></a>, which will use atomic renaming if possible, and fallback to copy-then-delete if the destination is not on the same file system. It's perfectly happy to both move and rename in the same operation; the operation is the same regardless.</p>\n"}, {"tags": [], "owner": {"reputation": 386, "user_id": 7207334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c535131fd2875083ee85a165a5c6696?s=128&d=identicon&r=PG&f=1", "display_name": "Danny", "link": "https://stackoverflow.com/users/7207334/danny"}, "is_accepted": false, "score": 27, "last_activity_date": 1549312488, "last_edit_date": 1549312488, "creation_date": 1488402938, "answer_id": 42542180, "question_id": 42541748, "link": "https://stackoverflow.com/questions/42541748/rename-and-move-file-with-python/42542180#42542180", "title": "Rename and move file with Python", "body": "<p>Yes you can do this. In python you can use the <em>move</em> function in <a href=\"https://docs.python.org/2/library/shutil.html\" rel=\"noreferrer\">shutil</a> library to achieve this.</p>\n\n<p>Lets say on linux, you have a file in /home/user/Downloads folder named \"test.txt\" and you want to move it to /home/user/Documents and also change the name to \"useful_name.txt\". You can do both things in the same line of code: </p>\n\n<pre><code>import shutil\n\nshutil.move('/home/user/Downloads/test.txt', '/home/user/Documents/useful_name.txt')\n</code></pre>\n\n<p>In your case you can do this:</p>\n\n<pre><code>import shutil\n\nshutil.move('oldname', 'renamedfiles/newname')\n</code></pre>\n\n<p>Cheers.</p>\n"}], "owner": {"reputation": 331, "user_id": 3245251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb707c8463a8c2a5d936c9b10699c40a?s=128&d=identicon&r=PG&f=1", "display_name": "Zipper1365", "link": "https://stackoverflow.com/users/3245251/zipper1365"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54349, "favorite_count": 4, "accepted_answer_id": 42541917, "answer_count": 4, "score": 22, "last_activity_date": 1576951952, "creation_date": 1488401261, "last_edit_date": 1559029378, "question_id": 42541748, "link": "https://stackoverflow.com/questions/42541748/rename-and-move-file-with-python", "title": "Rename and move file with Python", "body": "<p>I have python script that compares existing file names in a folder to a reference table and then determines if it needs to be renamed or not.</p>\n\n<p>As it loops through each filename:</p>\n\n<pre><code>'oldname' = the current file name\n\n'newname' = what it needs to be renamed to\n</code></pre>\n\n<p>I want rename the file and move it to a new folder \"..\\renamedfiles\"</p>\n\n<p>Can I do the rename and the move at the same time as it iterates through the loop?</p>\n\n<p>Update:\nApologies, I'm fairly green with scrpting in general but this appears to be pretty basic. <strong>shutil.move</strong> is exactly what I needed THANKS- I just didn't know to look for it.  Successful test below. Now to work it into the script.</p>\n\n<pre><code>import shutil\nos.chdir('C:\\Users\\me\\Desktop\\New folder')\nrenFolder= 'Renamed'\noldname = 'Test.txt'\nnewname= 'renTest.txt'\nshutil.move(oldname, renFolder+'/'+newname)\n</code></pre>\n"}, {"tags": ["python", "datetime", "time"], "comments": [{"owner": {"reputation": 9938, "user_id": 5015569, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/FC40Y.jpg?s=128&g=1", "display_name": "blacksite", "link": "https://stackoverflow.com/users/5015569/blacksite"}, "edited": false, "score": 2, "creation_date": 1488401290, "post_id": 42541698, "comment_id": 72219201, "body": "Yes. Now you just need to code it."}, {"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1488401465, "post_id": 42541698, "comment_id": 72219315, "body": "Consider <a href=\"https://docs.python.org/2/library/datetime.html#time-objects\" rel=\"nofollow noreferrer\"><code>datetime.time</code></a>"}], "answers": [{"tags": [], "owner": {"reputation": 8289, "user_id": 391806, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/88a2ea78dadbdaf73e1033fe7cbdeb73?s=128&d=identicon&r=PG", "display_name": "Dale Wilson", "link": "https://stackoverflow.com/users/391806/dale-wilson"}, "is_accepted": true, "score": 0, "last_activity_date": 1488401599, "creation_date": 1488401599, "answer_id": 42541838, "question_id": 42541698, "link": "https://stackoverflow.com/questions/42541698/how-can-a-python-script-determine-when-the-current-time-is-between-two-given-dai/42541838#42541838", "title": "How can a Python script determine when the current time is between two given daily times?", "body": "<p>Construct two datetime objects from your arguments + today's date.</p>\n\n<p>If the \"later\" one is less then the earlier one then add one day to the later time.  It should now be greater than the early time.</p>\n\n<p>Then compare the current time to see if it is greater than the early time and less than the later time.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 7643429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dbc854adb6292a6d7c069cf31568a47?s=128&d=identicon&r=PG&f=1", "display_name": "Owlette", "link": "https://stackoverflow.com/users/7643429/owlette"}, "is_accepted": false, "score": 0, "last_activity_date": 1488405035, "creation_date": 1488405035, "answer_id": 42542773, "question_id": 42541698, "link": "https://stackoverflow.com/questions/42541698/how-can-a-python-script-determine-when-the-current-time-is-between-two-given-dai/42542773#42542773", "title": "How can a Python script determine when the current time is between two given daily times?", "body": "<p>start and end can be represented as tuples:</p>\n\n<pre><code>start = (9, 0)\nend = (17,0)\n\nnow = datetime.datetime.utcnow().timetuple()[3:5] # gives you (hour,min)\nprint start &lt;= now &lt;= end\n</code></pre>\n"}], "owner": {"reputation": 1116, "user_id": 7558518, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/be20f42d5d1949818638c7370d5af667?s=128&d=identicon&r=PG&f=1", "display_name": "BlandCorporation", "link": "https://stackoverflow.com/users/7558518/blandcorporation"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 42541838, "answer_count": 2, "score": -2, "last_activity_date": 1488405035, "creation_date": 1488401091, "question_id": 42541698, "link": "https://stackoverflow.com/questions/42541698/how-can-a-python-script-determine-when-the-current-time-is-between-two-given-dai", "title": "How can a Python script determine when the current time is between two given daily times?", "body": "<p>I'm writing a Python script that is to run continuously, performing some of its functionality only if it determines that the current time is between two daily times. Specifically, the script is given two command line arguments that are both of the form HHMM, where HH is the daily starting hour and MM is minutes and UTC is assumed.</p>\n\n<p>So, for example, the script might be told to run through the day (0900, 1700), or it might be told to run through the night (2200, 0700).</p>\n\n<p>Given such arguments -- that specify times that can be in the current day and the following day -- is there some straightforward way (perhaps using the <code>datetime</code> module) for the script to know if the current time is between these two times?</p>\n"}, {"tags": ["python", "rabbitmq", "tornado", "pika"], "answers": [{"tags": [], "owner": {"reputation": 815, "user_id": 1066801, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1cd721ca93dac6dd0c9ce1376607fd38?s=128&d=identicon&r=PG", "display_name": "M07", "link": "https://stackoverflow.com/users/1066801/m07"}, "is_accepted": true, "score": 0, "last_activity_date": 1488467273, "last_edit_date": 1488467273, "creation_date": 1488465332, "answer_id": 42558243, "question_id": 42541680, "link": "https://stackoverflow.com/questions/42541680/how-to-detect-a-queue-has-been-deleted/42558243#42558243", "title": "How to detect a queue has been deleted?", "body": "<p>I have found a workaround. \nI checking every X sec if my PikaClient has consumed messages. If not I restart the application that will create automatically a queue.</p>\n\n<p>If you have a better solution, I am still open for suggestions.</p>\n\n<pre><code>def __init__(self):\n    ...\n    self.have_messages_been_consumed = False\n\ndef on_connected(self, connection):\n    self.logger.info('PikaClient: connected to RabbitMQ')\n    self.connected = True\n    self.connection = connection\n    self.connection.add_timeout(X, self.check_if_messages_have_been_consumed)\n    self.connection.channel(self.on_channel_open)\n\ndef check_if_messages_have_been_consumed(self):\n    if self.have_messages_been_consumed:\n        self.have_messages_been_consumed = False\n        self.connection.add_timeout(X, self.check_if_messages_have_been_consumed)\n    else:\n        # close_and_restart will set to False have_messages_been_consumed\n        self.close_and_restart()\n\ndef on_message(self, channel, basic_deliver, header, body):\n    self.have_messages_been_consumed = True\n    ...\n</code></pre>\n"}], "owner": {"reputation": 815, "user_id": 1066801, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1cd721ca93dac6dd0c9ce1376607fd38?s=128&d=identicon&r=PG", "display_name": "M07", "link": "https://stackoverflow.com/users/1066801/m07"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 42558243, "answer_count": 1, "score": 0, "last_activity_date": 1488467273, "creation_date": 1488401010, "question_id": 42541680, "link": "https://stackoverflow.com/questions/42541680/how-to-detect-a-queue-has-been-deleted", "title": "How to detect a queue has been deleted?", "body": "<p>When I manually delete the queue that my PikaClient consumes, nothing happen. I can recreate the queue with the same name but the channel has stopped to consume the queue (normal because I have deleted it). But I would like to receive an event when the consumed queue has been deleted.</p>\n\n<p>I expected that the channel would be automatically closed but \u00abon_channel_close_callback\u00bb is never called.\n\u00ab<a href=\"http://pika.readthedocs.io/en/0.10.0/modules/channel.html#pika.channel.Channel.basic_consume\" rel=\"nofollow noreferrer\">basic_consume</a>\u00bb does not provide  any callback on close. \nAn additional important point, I have to use the TornadoConnection. </p>\n\n<p>Pika: 0.10.0\nPython: 2.7\nTornado: 4.3</p>\n\n<p>Thank you, for your help.</p>\n\n<pre><code>class PikaClient(object):\n\n    def __init__(self):\n        # init everything here\n\n    def connect(self):\n        pika.adapters.tornado_connection.TornadoConnection(connection_param, on_open_callback=self.on_connected)\n\n    def on_connected(self, connection):\n        self.logger.info('PikaClient: connected to RabbitMQ')\n        self.connected = True\n        self.connection = connection\n        self.connection.channel(self.on_channel_open)\n\n    def on_open_error_callback(self, *args):\n        self.logger.error(\"on_open_error_callback\")\n\n    def on_channel_open(self, channel):\n        channel.add_on_close_callback(self.on_channel_close_callback)\n\n        channel.basic_consume(self.on_message, queue=self.queue_name, no_ack=True)\n\n    def on_channel_close_callback(self, reply_code, reply_text):\n        self.logger.error(\"Consumer was cancelled remotely, shutting down\", reply_code=reply_code, reply_text=reply_text)\n</code></pre>\n"}, {"tags": ["python", "regex", "excel"], "answers": [{"comments": [{"owner": {"reputation": 1698, "user_id": 7231526, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1326dc7779cdb7364af2b50b063dce36?s=128&d=identicon&r=PG&f=1", "display_name": "theprowler", "link": "https://stackoverflow.com/users/7231526/theprowler"}, "edited": false, "score": 0, "creation_date": 1488401466, "post_id": 42541738, "comment_id": 72219317, "body": "Ok so that does what I asked perfectly, and I&#39;ll &#39;check off&#39; your answer when I can in 7minutes. But while I have you here: now that I have captured <code>a: [&#39; JUN 11 2013 Unnamed: 1  \\\\&#39;]</code> is it easy enough to now isolate and capture/export the <code>JUN</code>, <code>11</code>, and <code>2013</code> pieces individually?"}, {"owner": {"reputation": 2003, "user_id": 6414203, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b25f1c657b4306a0d459c874e859789?s=128&d=identicon&r=PG&f=1", "display_name": "Alan", "link": "https://stackoverflow.com/users/6414203/alan"}, "edited": false, "score": 2, "creation_date": 1488401598, "post_id": 42541738, "comment_id": 72219399, "body": "Instead of regex, you can use <code>datetime.strptime</code> which will give you a datetime object, which understands what parts are months etc. See <a href=\"http://stackoverflow.com/questions/466345/converting-string-into-datetime\" title=\"converting string into datetime\">stackoverflow.com/questions/466345/&hellip;</a>"}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "reply_to_user": {"reputation": 1698, "user_id": 7231526, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1326dc7779cdb7364af2b50b063dce36?s=128&d=identicon&r=PG&f=1", "display_name": "theprowler", "link": "https://stackoverflow.com/users/7231526/theprowler"}, "edited": false, "score": 1, "creation_date": 1488401751, "post_id": 42541738, "comment_id": 72219509, "body": "@theprowler: It is <a href=\"https://regex101.com/r/pzQVuT/2\" rel=\"nofollow noreferrer\"><b>possible</b></a> but as Alan points out, there are better ways to achieve this."}, {"owner": {"reputation": 1698, "user_id": 7231526, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1326dc7779cdb7364af2b50b063dce36?s=128&d=identicon&r=PG&f=1", "display_name": "theprowler", "link": "https://stackoverflow.com/users/7231526/theprowler"}, "edited": false, "score": 0, "creation_date": 1488402093, "post_id": 42541738, "comment_id": 72219722, "body": "Ohhhhh damn I didn&#39;t even know you could do that. I thought since I didn&#39;t have a full month name that I couldn&#39;t do something like that since trying <code>parser.parse()</code> from <code>dateutil</code> failed. Thanks guys, I appreciate you helping a beginner like myself"}, {"owner": {"reputation": 1698, "user_id": 7231526, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1326dc7779cdb7364af2b50b063dce36?s=128&d=identicon&r=PG&f=1", "display_name": "theprowler", "link": "https://stackoverflow.com/users/7231526/theprowler"}, "edited": false, "score": 0, "creation_date": 1488402331, "post_id": 42541738, "comment_id": 72219840, "body": "Umm real quick: I got <code>ValueError: time data &quot;[&#39; JUN 11 2013 Unnamed: 1  \\\\\\\\&#39;]&quot; does not match format &#39;%b %d %Y %I:%M%p&#39;</code> when trying that <code>strptime()</code> function. Should I fix the RegEx to capture less, or alter the <code>%</code>s as the second argument?"}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "reply_to_user": {"reputation": 1698, "user_id": 7231526, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1326dc7779cdb7364af2b50b063dce36?s=128&d=identicon&r=PG&f=1", "display_name": "theprowler", "link": "https://stackoverflow.com/users/7231526/theprowler"}, "edited": false, "score": 1, "creation_date": 1488403094, "post_id": 42541738, "comment_id": 72220246, "body": "@theprowler: Where does the <code>Unnamed</code> come from? Please post a follow-up question and link from here to it. Comments section is kind of nasty."}, {"owner": {"reputation": 1698, "user_id": 7231526, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1326dc7779cdb7364af2b50b063dce36?s=128&d=identicon&r=PG&f=1", "display_name": "theprowler", "link": "https://stackoverflow.com/users/7231526/theprowler"}, "edited": false, "score": 0, "creation_date": 1488465697, "post_id": 42541738, "comment_id": 72251027, "body": "I just posted the new question: <a href=\"http://stackoverflow.com/questions/42558338/trouble-using-datetime-strptime\" title=\"trouble using datetime strptime\">stackoverflow.com/questions/42558338/&hellip;</a>    Also, I&#39;m not sure what <code>Unnamed</code> is or why it gets captured, it&#39;s not in the excel file"}], "tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": true, "score": 1, "last_activity_date": 1488401236, "creation_date": 1488401236, "answer_id": 42541738, "question_id": 42541643, "link": "https://stackoverflow.com/questions/42541643/capture-date-from-excel-sheet-with-regex/42541738#42541738", "title": "Capture date from Excel sheet with RegEx", "body": "<p>Make your expression case insensitive (ie <code>LISTING</code> != <code>Listing</code>):</p>\n\n<pre><code>pattern = re.compile(r'Listing(.+?)(?=\\n)', re.IGNORECASE)\n</code></pre>\n\n<p>Besides, a lookahead for a newline in this situation comes down to the equal expression:</p>\n\n<pre><code>pattern = re.compile(r'Listing(.+)', re.IGNORECASE)\n</code></pre>\n\n<p>See your <a href=\"https://regex101.com/r/pzQVuT/1\" rel=\"nofollow noreferrer\"><strong>working pattern here</strong></a>.</p>\n"}], "owner": {"reputation": 1698, "user_id": 7231526, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/1326dc7779cdb7364af2b50b063dce36?s=128&d=identicon&r=PG&f=1", "display_name": "theprowler", "link": "https://stackoverflow.com/users/7231526/theprowler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 42541738, "answer_count": 1, "score": 1, "last_activity_date": 1488401236, "creation_date": 1488400897, "question_id": 42541643, "link": "https://stackoverflow.com/questions/42541643/capture-date-from-excel-sheet-with-regex", "title": "Capture date from Excel sheet with RegEx", "body": "<p>I know capturing a date is usually a simple enough RegEx task, but I need this to be so specific that I'm struggling.</p>\n\n<p><code>\n1 SUSTAINABLE HARVEST SECTOR | QUOTA LISTING JUN 11 2013\n2 QUOTA\n3 TRADE ID    AVAILABLE STOCK    AMOUNT    PRICE\n4 130196      COD GBW            10,000    $0.60\n5 130158      HADDOCK GBE        300       $0.60</code></p>\n\n<p>That is what the beginning of my Excel spreadsheet looks like, and what 100's more look like, with the date and the data changing but the format staying the same. </p>\n\n<p>My thoughts were to capture everything that follows <code>LISTING</code> up until the newline... then place the non numbers (<code>JUN</code>) in my Trade Month column, place the first captured number (<code>11</code>) in my Trade Day column, and place the last captured number (<code>2013</code>) in my Trade Year column... but I can't figure out how to. Here's what I have so far:</p>\n\n<pre><code>pattern = re.compile(r'Listing(.+?)(?=\\n)')\ndf = pd.read_excel(file_path)\n        print(\"df is:\", df)\n        a = pattern.findall(str(df))\n        print(\"a:\", a)\n</code></pre>\n\n<p>but that returns nothing. Any help solving this problem, which I know is probably super simple, is appreciated. Thanks.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 26457, "user_id": 624829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95e50fdfbe4cb4f3715d82a2e7e46cb8?s=128&d=identicon&r=PG", "display_name": "Boud", "link": "https://stackoverflow.com/users/624829/boud"}, "edited": false, "score": 0, "creation_date": 1488401496, "post_id": 42541630, "comment_id": 72219339, "body": "Have you looked at pd.melt?"}, {"owner": {"reputation": 2311, "user_id": 3423035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81ef0e19d543aa8b3a24b05bcf4ac317?s=128&d=identicon&r=PG", "display_name": "Jan Trienes", "link": "https://stackoverflow.com/users/3423035/jan-trienes"}, "edited": false, "score": 1, "creation_date": 1488402285, "post_id": 42541630, "comment_id": 72219817, "body": "Hacky but works: <code>df.unstack().reorder_levels([0,3,2,1]).unstack(level=[3,2])</code>"}, {"owner": {"reputation": 450, "user_id": 3868056, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1204125864/picture?type=large", "display_name": "Michael Johnson", "link": "https://stackoverflow.com/users/3868056/michael-johnson"}, "edited": false, "score": 0, "creation_date": 1488435822, "post_id": 42541630, "comment_id": 72231727, "body": "Thanks Jan. Any hope of re-ordering that one section of &#39;depths&#39;?"}], "answers": [{"tags": [], "owner": {"reputation": 450, "user_id": 3868056, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1204125864/picture?type=large", "display_name": "Michael Johnson", "link": "https://stackoverflow.com/users/3868056/michael-johnson"}, "is_accepted": true, "score": 0, "last_activity_date": 1488449825, "creation_date": 1488449825, "answer_id": 42552614, "question_id": 42541630, "link": "https://stackoverflow.com/questions/42541630/munging-a-dict-into-a-pandas-dataframe-containing-hierarchical-index-and-columns/42552614#42552614", "title": "Munging a dict into a Pandas DataFrame containing Hierarchical index and columns", "body": "<pre><code>df = df.unstack().reorder_levels([0,3,2,1]).unstack(level=[3,2])\n\ndfB = df[[\"B\"]].sort_index(axis=1, ascending=False)\ndfS = df[[\"S\"]]\n\ndf = pd.concat([dfB, dfS], axis=1)\n</code></pre>\n\n<p>50% of credit goes to Jan who commented with the unstack() solution.</p>\n\n<p>Gives:</p>\n\n<pre><code>                              B                     S\n                         Depth3 Depth2 Depth1  Depth1  Depth2  Depth3\nMarket1 actionIndicator       B      B      B       S       S       S\n        limit               555    557    558     560     561     562\n        quantity         18.474  8.355  8.286   0.626  17.101  17.576\nMarket2 actionIndicator       B      B      B       S       S       S\n        limit               475    477    478     479     480     481\n        quantity         30.156  8.329  8.182  37.483  84.416  37.659\nMarket3 actionIndicator       B      B      B       S       S       S\n        limit               583    586    587     589     590     591\n        quantity         39.548  8.382   8.18  55.181  17.289  17.689\n</code></pre>\n"}], "owner": {"reputation": 450, "user_id": 3868056, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/1204125864/picture?type=large", "display_name": "Michael Johnson", "link": "https://stackoverflow.com/users/3868056/michael-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 42552614, "answer_count": 1, "score": 1, "last_activity_date": 1488449825, "creation_date": 1488400845, "last_edit_date": 1488440920, "question_id": 42541630, "link": "https://stackoverflow.com/questions/42541630/munging-a-dict-into-a-pandas-dataframe-containing-hierarchical-index-and-columns", "title": "Munging a dict into a Pandas DataFrame containing Hierarchical index and columns", "body": "<p>I'm attempting to munge the dictionary below into a preferable DataFrame format for easy on the eyes viewing. That data dict was created after accessing an api and parsing XML so i'm certainly willing to put the data together differently to make the process easier.</p>\n\n<p>The format I have is this (with the other two markets not shown placed horizontally beside each other):</p>\n\n<pre><code>                    Market1\n                          B                      S\n                     Depth1 Depth2  Depth3  Depth1  Depth2  Depth3\nactionIndicator           B      B       B       S       S       S\nlimit                   589    588     586     591     592     593\nquantity            185.121  8.121  32.216  34.805  16.037  36.099 \n</code></pre>\n\n<p>The format I want is (the two markets not shown should be vertically stacked and note re-ordering of depths):</p>\n\n<pre><code>                                  B                      S\n                             Depth3 Depth2  Depth1  Depth1  Depth2  Depth3\nMarket1    actionIndicator        B      B       B       S       S       S\n           limit                587    588     589     591     592     593\n           quantity         185.121  8.121  32.216  34.805  16.037  36.099\n</code></pre>\n\n<p>Code:    </p>\n\n<pre><code>from pandas import DataFrame\n\n\ndata = {\n 'Market1': {'B': {'Depth1': {'actionIndicator': 'B',\n    'limit': '558',\n    'quantity': '8.286'},\n   'Depth2': {'actionIndicator': 'B', 'limit': '557', 'quantity': '8.355'},\n   'Depth3': {'actionIndicator': 'B', 'limit': '555', 'quantity': '18.474'}},\n  'S': {'Depth1': {'actionIndicator': 'S',\n    'limit': '560',\n    'quantity': '0.626'},\n   'Depth2': {'actionIndicator': 'S', 'limit': '561', 'quantity': '17.101'},\n   'Depth3': {'actionIndicator': 'S', 'limit': '562', 'quantity': '17.576'}}},\n 'Market2': {'B': {'Depth1': {'actionIndicator': 'B',\n    'limit': '478',\n    'quantity': '8.182'},\n   'Depth2': {'actionIndicator': 'B', 'limit': '477', 'quantity': '8.329'},\n   'Depth3': {'actionIndicator': 'B', 'limit': '475', 'quantity': '30.156'}},\n  'S': {'Depth1': {'actionIndicator': 'S',\n    'limit': '479',\n    'quantity': '37.483'},\n   'Depth2': {'actionIndicator': 'S', 'limit': '480', 'quantity': '84.416'},\n   'Depth3': {'actionIndicator': 'S', 'limit': '481', 'quantity': '37.659'}}},\n 'Market3': {'B': {'Depth1': {'actionIndicator': 'B',\n    'limit': '587',\n    'quantity': '8.18'},\n   'Depth2': {'actionIndicator': 'B', 'limit': '586', 'quantity': '8.382'},\n   'Depth3': {'actionIndicator': 'B', 'limit': '583', 'quantity': '39.548'}},\n  'S': {'Depth1': {'actionIndicator': 'S',\n    'limit': '589',\n    'quantity': '55.181'},\n   'Depth2': {'actionIndicator': 'S', 'limit': '590', 'quantity': '17.289'},\n   'Depth3': {'actionIndicator': 'S', 'limit': '591', 'quantity': '17.689'}}},\n}\n\ndf = DataFrame.from_dict(\n        {(k1, k2, k3): data[k1][k2][k3] for k1 in data.keys() for k2 in\n         data[k1].keys() for k3 in data[k1][k2].keys()}, orient=\"columns\")\n\nprint(df)\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "dictionary", "text"], "comments": [{"owner": {"reputation": 619, "user_id": 3728261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f9216f3adbf85c8b4730bc5929806d0?s=128&d=identicon&r=PG", "display_name": "Mathieu Bour", "link": "https://stackoverflow.com/users/3728261/mathieu-bour"}, "edited": false, "score": 0, "creation_date": 1488400997, "post_id": 42541626, "comment_id": 72219038, "body": "I don&#39;t understand. Can you give a concrete example of the string you want to convert?"}, {"owner": {"reputation": 1446, "user_id": 7491302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ed578eeae7d2391579f475bbe86fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/7491302/tristan"}, "edited": false, "score": 1, "creation_date": 1488401021, "post_id": 42541626, "comment_id": 72219050, "body": "A nested dict can be used like {1: {&#39;A&#39;: 10.68, &#39;B&#39;: 11.82}, 2: {&#39;Z&#39;: 68, &#39;S&#39;: 182}}. Access it like column[1][&#39;A&#39;]."}, {"owner": {"reputation": 607, "user_id": 5556400, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/422727bc526bd176e4267acf69e5196a?s=128&d=identicon&r=PG&f=1", "display_name": "Clement Attlee", "link": "https://stackoverflow.com/users/5556400/clement-attlee"}, "reply_to_user": {"reputation": 1446, "user_id": 7491302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ed578eeae7d2391579f475bbe86fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/7491302/tristan"}, "edited": false, "score": 0, "creation_date": 1488401088, "post_id": 42541626, "comment_id": 72219092, "body": "@Tristan Yes, that seems a very useful structure."}, {"owner": {"reputation": 3919, "user_id": 3169961, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/42c9a71949249cac6172502dfce7da7d?s=128&d=identicon&r=PG", "display_name": "sabbahillel", "link": "https://stackoverflow.com/users/3169961/sabbahillel"}, "reply_to_user": {"reputation": 1446, "user_id": 7491302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55ed578eeae7d2391579f475bbe86fa8?s=128&d=identicon&r=PG&f=1", "display_name": "Tristan", "link": "https://stackoverflow.com/users/7491302/tristan"}, "edited": false, "score": 0, "creation_date": 1488401177, "post_id": 42541626, "comment_id": 72219143, "body": "@Tristan You should make this an answer rather than a comment."}, {"owner": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1488401436, "post_id": 42541626, "comment_id": 72219296, "body": "<a href=\"https://stackoverflow.com\">Stack Overflow</a> is not a code writing service. Please review <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and show us what you&#39;ve tried to solve the issue."}, {"owner": {"reputation": 607, "user_id": 5556400, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/422727bc526bd176e4267acf69e5196a?s=128&d=identicon&r=PG&f=1", "display_name": "Clement Attlee", "link": "https://stackoverflow.com/users/5556400/clement-attlee"}, "reply_to_user": {"reputation": 6424, "user_id": 3579910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoMjv.jpg?s=128&g=1", "display_name": "TemporalWolf", "link": "https://stackoverflow.com/users/3579910/temporalwolf"}, "edited": false, "score": 0, "creation_date": 1488401629, "post_id": 42541626, "comment_id": 72219421, "body": "@TemporalWolf I know I could split the text based on spaces, but there is an ambiguity with regards to distinguishing between a header and its elements. They are only different in the way they are indented."}], "answers": [{"comments": [{"owner": {"reputation": 607, "user_id": 5556400, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/422727bc526bd176e4267acf69e5196a?s=128&d=identicon&r=PG&f=1", "display_name": "Clement Attlee", "link": "https://stackoverflow.com/users/5556400/clement-attlee"}, "edited": false, "score": 0, "creation_date": 1488401250, "post_id": 42541725, "comment_id": 72219185, "body": "I don&#39;t want the algorithm to be dependent on the keyword COLUMN"}, {"owner": {"reputation": 27359, "user_id": 1516286, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/36f74e0d3318a630af9ce0e356182040?s=128&d=identicon&r=PG", "display_name": "Vor", "link": "https://stackoverflow.com/users/1516286/vor"}, "reply_to_user": {"reputation": 607, "user_id": 5556400, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/422727bc526bd176e4267acf69e5196a?s=128&d=identicon&r=PG&f=1", "display_name": "Clement Attlee", "link": "https://stackoverflow.com/users/5556400/clement-attlee"}, "edited": false, "score": 1, "creation_date": 1488401352, "post_id": 42541725, "comment_id": 72219239, "body": "Then split it by <code>:</code> and check if value is <code>&quot;&quot;</code> - this would be your <code>COLUMN</code>"}, {"owner": {"reputation": 607, "user_id": 5556400, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/422727bc526bd176e4267acf69e5196a?s=128&d=identicon&r=PG&f=1", "display_name": "Clement Attlee", "link": "https://stackoverflow.com/users/5556400/clement-attlee"}, "edited": false, "score": 0, "creation_date": 1488401527, "post_id": 42541725, "comment_id": 72219356, "body": "Sorry for the confusion I didn&#39;t clearly explain. Please see the updated question."}, {"owner": {"reputation": 27359, "user_id": 1516286, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/36f74e0d3318a630af9ce0e356182040?s=128&d=identicon&r=PG", "display_name": "Vor", "link": "https://stackoverflow.com/users/1516286/vor"}, "reply_to_user": {"reputation": 607, "user_id": 5556400, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/422727bc526bd176e4267acf69e5196a?s=128&d=identicon&r=PG&f=1", "display_name": "Clement Attlee", "link": "https://stackoverflow.com/users/5556400/clement-attlee"}, "edited": false, "score": 0, "creation_date": 1488401685, "post_id": 42541725, "comment_id": 72219458, "body": "If you don&#39;t like above splitting  approach, then check if <code>line.strip() and line[0].isspace()</code>"}, {"owner": {"reputation": 607, "user_id": 5556400, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/422727bc526bd176e4267acf69e5196a?s=128&d=identicon&r=PG&f=1", "display_name": "Clement Attlee", "link": "https://stackoverflow.com/users/5556400/clement-attlee"}, "edited": false, "score": 0, "creation_date": 1488402180, "post_id": 42541725, "comment_id": 72219777, "body": "<code>key, value = line.split(&#39;:&#39;) ValueError: not enough values to unpack (expected 2, got 1) </code>"}], "tags": [], "owner": {"reputation": 27359, "user_id": 1516286, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/36f74e0d3318a630af9ce0e356182040?s=128&d=identicon&r=PG", "display_name": "Vor", "link": "https://stackoverflow.com/users/1516286/vor"}, "is_accepted": false, "score": 0, "last_activity_date": 1488401871, "last_edit_date": 1488401871, "creation_date": 1488401205, "answer_id": 42541725, "question_id": 42541626, "link": "https://stackoverflow.com/questions/42541626/converting-information-from-string-to-dict/42541725#42541725", "title": "Converting information from string to dict", "body": "<p>You can create nested dict like this:</p>\n\n<pre><code>q = '''\nCOLUMN 1:\n    A:                         10.68\n    B:                         11.82\n    C:                         12.93\n    d:                         50.2\nCOLUMN 2:\n    Z:                         68\n    S:                         182\n    W:                         13\n    E:                         50\n'''\n\nresult = {}\nfor line in q.split('\\n'):\n  if line.strip() and not line[0].isspace():\n      col = line.strip()[:-1]\n      result[col] = {}\n  elif line.strip():\n      key, value = line.split(':')\n      result[col][key.strip()] = value.strip()\n\nprint result\n</code></pre>\n\n<p>result:</p>\n\n<pre><code>{'COLUMN 2': {'S': '182', 'Z': '68', 'E': '50', 'W': '13'}, 'COLUMN 1': {'A': '10.68', 'C': '12.93', 'B': '11.82', 'd': '50.2'}}\n</code></pre>\n\n<p>Alternatively if order matters, you can make <code>COLUMN x</code> - lists and append items there in order</p>\n"}, {"tags": [], "owner": {"reputation": 5433, "user_id": 841339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0c6d669eb872c414d81490f00a2e626?s=128&d=identicon&r=PG", "display_name": "Mauro Baraldi", "link": "https://stackoverflow.com/users/841339/mauro-baraldi"}, "is_accepted": true, "score": 1, "last_activity_date": 1488404689, "last_edit_date": 1495535390, "creation_date": 1488403932, "answer_id": 42542442, "question_id": 42541626, "link": "https://stackoverflow.com/questions/42541626/converting-information-from-string-to-dict/42542442#42542442", "title": "Converting information from string to dict", "body": "<p>Inspired in <a href=\"https://stackoverflow.com/users/1516286/vor\">@Vor</a>'s answer.</p>\n\n<pre><code>result, root = {}, None\n\nfor i in q.split('\\n'):\n    if i.strip().endswith(':'):\n        root = i.strip()\n        result[root] = {}\n    elif i:\n        val = list(map(lambda x: x.strip(), i.split(':')))\n        result[root].update({val[0]: val[1]})\n\nprint(result)\n</code></pre>\n\n<p>Following the rules:</p>\n\n<ul>\n<li>Headers ends with <code>:</code></li>\n<li>Items delimiter is <code>:</code></li>\n<li>No empty lines</li>\n</ul>\n\n<p>The change is that you could store each root key, <code>Column X</code> in a var, and check all lines above this root key, and iterate and update this key.</p>\n"}, {"comments": [{"owner": {"reputation": 607, "user_id": 5556400, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/422727bc526bd176e4267acf69e5196a?s=128&d=identicon&r=PG&f=1", "display_name": "Clement Attlee", "link": "https://stackoverflow.com/users/5556400/clement-attlee"}, "edited": false, "score": 0, "creation_date": 1488406227, "post_id": 42542558, "comment_id": 72221927, "body": "Please edit your answer to make it work for Python3. This code only works in Python2.x. See my last comment under Vor&#39;s answer."}], "tags": [], "owner": {"reputation": 71, "user_id": 7643429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9dbc854adb6292a6d7c069cf31568a47?s=128&d=identicon&r=PG&f=1", "display_name": "Owlette", "link": "https://stackoverflow.com/users/7643429/owlette"}, "is_accepted": false, "score": 0, "last_activity_date": 1488404285, "creation_date": 1488404285, "answer_id": 42542558, "question_id": 42541626, "link": "https://stackoverflow.com/questions/42541626/converting-information-from-string-to-dict/42542558#42542558", "title": "Converting information from string to dict", "body": "<p>similar with slight tweak:</p>\n\n<pre><code>res = {}\nfor row in data.split('\\n'):\n    if row[:4] != '    ':\n        res[row.strip(':')] = sub = {}\n    else:\n        k,v = row.split(':')\n        sub[k.strip()] =v.strip()\n\nprint res\n</code></pre>\n\n<p>Output is:</p>\n\n<pre><code>{'C 2': {'S': '182', 'Z': '68', 'E': '50', 'W': '13'}, 'COLUMN 1': {'A': '10.68', 'C': '12.93', 'B': '11.82', 'D': '50.2'}}\n</code></pre>\n\n<p>If order matters, use ordered_dict instead</p>\n"}], "owner": {"reputation": 607, "user_id": 5556400, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/422727bc526bd176e4267acf69e5196a?s=128&d=identicon&r=PG&f=1", "display_name": "Clement Attlee", "link": "https://stackoverflow.com/users/5556400/clement-attlee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 42542442, "answer_count": 3, "score": 1, "last_activity_date": 1488404689, "creation_date": 1488400830, "last_edit_date": 1488404114, "question_id": 42541626, "link": "https://stackoverflow.com/questions/42541626/converting-information-from-string-to-dict", "title": "Converting information from string to dict", "body": "<p>I have a string like this:</p>\n\n<pre><code>COLUMN 1:\n    A:                         10.68\n    B:                         11.82\n    C:                         12.93\n    D:                         50.2\nC 2:\n    Z:                         68\n    S:                         182\n    W:                         13\n    E:                         50    \n</code></pre>\n\n<p>What is a good way to preserve this information in a data structure like a dictionary?</p>\n\n<p>UPDATE: The problem is, the headers don't necessarily start with COLUMN in my actual text, and the number of elements under each header could be different from the other. The only distinguishing element is that under each header, elements are indented with 4 spaces. </p>\n"}, {"tags": ["python", "python-3.x", "cx-freeze", "python-3.6"], "comments": [{"owner": {"reputation": 40221, "user_id": 7311767, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/13Fpq.png?s=128&g=1", "display_name": "Stephen Rauch", "link": "https://stackoverflow.com/users/7311767/stephen-rauch"}, "edited": false, "score": 1, "creation_date": 1488437150, "post_id": 42541623, "comment_id": 72232309, "body": "Pyinstaller 3.6 support is rapidly improving.  You might trying using the <a href=\"https://github.com/pyinstaller/pyinstaller/wiki/How-to-Report-Bugs#before-submitting-a-report\" rel=\"nofollow noreferrer\">development tip</a>."}], "answers": [{"comments": [{"owner": {"reputation": 316, "user_id": 4544072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-gIfRlyuHqmU/AAAAAAAAAAI/AAAAAAAAEG8/msnGLFkNydc/photo.jpg?sz=128", "display_name": "pickarooney", "link": "https://stackoverflow.com/users/4544072/pickarooney"}, "edited": false, "score": 1, "creation_date": 1488971174, "post_id": 42667127, "comment_id": 72463812, "body": "unfortunately I am unable to run the EXE on another PC, even by copying the whole dist folder. When I run it from CMD on the second PC it looks for a load of python files. Basically you need to install python in exactly the same structure as on the development PC or it won&#39;t work. This is very disappointing... I&#39;m not sure how anyone is supposed to develop python programs for public distribution on windows."}, {"owner": {"reputation": 316, "user_id": 4544072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-gIfRlyuHqmU/AAAAAAAAAAI/AAAAAAAAEG8/msnGLFkNydc/photo.jpg?sz=128", "display_name": "pickarooney", "link": "https://stackoverflow.com/users/4544072/pickarooney"}, "edited": false, "score": 0, "creation_date": 1488971789, "post_id": 42667127, "comment_id": 72464233, "body": "I tried using pyinstaller as an alternative but that doesn&#39;t support python 3.6 and crashes out."}, {"owner": {"reputation": 316, "user_id": 4544072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-gIfRlyuHqmU/AAAAAAAAAAI/AAAAAAAAEG8/msnGLFkNydc/photo.jpg?sz=128", "display_name": "pickarooney", "link": "https://stackoverflow.com/users/4544072/pickarooney"}, "edited": false, "score": 0, "creation_date": 1488972491, "post_id": 42667127, "comment_id": 72464737, "body": "The dev version 3.3 runs without errors but does nto create an EXE, rather a .pyc file which of course cannot be run on a PC without Python installed"}], "tags": [], "owner": {"reputation": 316, "user_id": 4544072, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh4.googleusercontent.com/-gIfRlyuHqmU/AAAAAAAAAAI/AAAAAAAAEG8/msnGLFkNydc/photo.jpg?sz=128", "display_name": "pickarooney", "link": "https://stackoverflow.com/users/4544072/pickarooney"}, "is_accepted": false, "score": 0, "last_activity_date": 1488965028, "last_edit_date": 1488965028, "creation_date": 1488964171, "answer_id": 42667127, "question_id": 42541623, "link": "https://stackoverflow.com/questions/42541623/how-do-i-convert-my-code-from-python3-6-to-exe-using-cxfreeze/42667127#42667127", "title": "How do I convert my code from python3.6 to exe using cxfreeze?", "body": "<p>I'm not allowed to comment for some reason, so this isn't really an answer, but for my part I installed cx_Freeze from <a href=\"https://pypi.python.org/pypi/cx_Freeze\" rel=\"nofollow noreferrer\">https://pypi.python.org/pypi/cx_Freeze</a></p>\n\n<p>When you install it, there's an extra step that's not documented. Using the Windows CMD shell, go to your python installation directory, into the Scripts sub-directory and you will find a few files called cxfreeze...</p>\n\n<p>You need to create the batch file by typing <strong>python cxfreeze-postinstall</strong> </p>\n\n<p>A file called cxfreeze.bat will be created which you can move into your main python folder or wherever your python program is located.</p>\n\n<p>Then type <strong>cxfreeze mypythonprogram.py --target-dir dist</strong></p>\n\n<p>This <em>should</em> create a working exe in the dist directory. However, it doesn't work for me as I get an error in the finder.py file which is part of the cxfreeze installation so I don't know if I've done something wrong or this version is completely buggy.</p>\n\n<p>edit: by commenting out line 561 in the finder.py file (C:\\Python\\Python36-32\\Lib\\site-packages\\cx_Freeze\\finder.py on my system) I was able to run it and Generate the EXE which appears to run OK.</p>\n"}], "owner": {"reputation": 83, "user_id": 4121469, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1ad4bb3cf288e98fc176ac3a8e552ac?s=128&d=identicon&r=PG&f=1", "display_name": "ArandomUserNameEG", "link": "https://stackoverflow.com/users/4121469/arandomusernameeg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3711, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1488965028, "creation_date": 1488400816, "last_edit_date": 1495535402, "question_id": 42541623, "link": "https://stackoverflow.com/questions/42541623/how-do-i-convert-my-code-from-python3-6-to-exe-using-cxfreeze", "title": "How do I convert my code from python3.6 to exe using cxfreeze?", "body": "<p>NOTE: Before marking this as duplicate please read the whole post first</p>\n\n<p>I'm trying for hours to convert my python 3.6 code to exe, I've searched everywhere and tried everything, the most helpful place was there:\n<a href=\"https://stackoverflow.com/questions/41570359/best-method-of-converting-py-to-exe-for-python-3-6\">Best method of converting .py to .exe for Python 3.6?</a></p>\n\n<p>So apparently there are only 3 ways of converting py to exe:</p>\n\n<ol>\n<li>PyInstaller</li>\n<li>Py2exe</li>\n<li>Cxfreeze</li>\n</ol>\n\n<p>Pyinstaller doesn't support Python 3.6, and py2exe is very outdated.</p>\n\n<p>As for cxfreeze, it sounds like it supports Python 3.6, so that's the route that I've taken.</p>\n\n<p>I've searched everywhere on how to use cxfreeze, unfortunately, all guides that I have found seem to be outdated:</p>\n\n<p><a href=\"http://cx-freeze.readthedocs.io/en/latest/overview.html\" rel=\"nofollow noreferrer\">http://cx-freeze.readthedocs.io/en/latest/overview.html</a> this guide for example has three routes, two of which doesn't work (The first gives me a .spec file that i dont know what to do with it and the second gives me an error because i dont have the cxfreeze.util module) and the 3rd is too complicated for my tastes</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9895636/how-do-i-use-cx-freeze\">How do I use cx_freeze?</a> this uses the second route, still it doesn't work</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 16399, "user_id": 4016285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SvSVV.png?s=128&g=1", "display_name": "B. M.", "link": "https://stackoverflow.com/users/4016285/b-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1488404488, "last_edit_date": 1488404488, "creation_date": 1488404118, "answer_id": 42542502, "question_id": 42541603, "link": "https://stackoverflow.com/questions/42541603/subest-a-dataframe-using-value-pairs-in-another-dataframe/42542502#42542502", "title": "Subest a dataframe using value pairs in another dataframe", "body": "<p>You can do it with a merge operation.</p>\n\n<pre><code>df=pd.DataFrame({'q1':randint(0,3,26),'q2':randint(0,3,26),\n'state':[chr(i+ord('a')) for i in range(26)]})\n\ncnts=df.groupby(['q1','q2']).count()&gt;4\n\ndf['ok']=df.merge(cnts,left_on=cnts.index.names,right_index=True).state_y\nresult=df[df.ok]\n</code></pre>\n\n<p>For, on this example:</p>\n\n<pre><code>    q1  q2   state      ok\n0    2   1       a    True\n2    2   1       c    True\n9    2   1       j    True\n22   2   1       w    True\n24   2   1       y    True\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4921, "user_id": 7366928, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NG2zR.jpg?s=128&g=1", "display_name": "pansen", "link": "https://stackoverflow.com/users/7366928/pansen"}, "is_accepted": false, "score": 0, "last_activity_date": 1488404545, "creation_date": 1488404545, "answer_id": 42542629, "question_id": 42541603, "link": "https://stackoverflow.com/questions/42541603/subest-a-dataframe-using-value-pairs-in-another-dataframe/42542629#42542629", "title": "Subest a dataframe using value pairs in another dataframe", "body": "<p>You may use a merge here:</p>\n\n<pre><code># define min count\nmin_count = 2\n\n# setup dummy data\ncolumns = [\"Question 1\", \"Question 2\"]\ndata = [[\"Q1\", \"Q2\"],\n        [\"Q1\", \"Q2\"],\n        [\"Q1\", \"Q2\"],\n        [\"Q3\", \"Q4\"],\n        [\"Q3\", \"Q4\"],\n        [\"Q1\", \"Q4\"]]\n\ndf = pd.DataFrame(data, columns=columns)\nprint(df)\n\n  Question 1 Question 2\n0         Q1         Q2\n1         Q1         Q2\n2         Q1         Q2\n3         Q3         Q4\n4         Q3         Q4\n5         Q1         Q4\n\n# get counts\ncounts = df.groupby(columns).size()\ncounts = counts[counts &gt;= min_count].reset_index().rename(columns={0:\"Counts\"})\n\n# final merge\nsubset = pd.merge(df, counts, on=columns, how=\"right\")\n\nprint(subset)\n\n  Question 1 Question 2  Counts\n0         Q1         Q2       3\n1         Q1         Q2       3\n2         Q1         Q2       3\n3         Q3         Q4       2\n4         Q3         Q4       2\n</code></pre>\n"}], "owner": {"reputation": 3843, "user_id": 2735009, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/38a795fbd4a70b92d3ea5596dc8beb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Patthebug", "link": "https://stackoverflow.com/users/2735009/patthebug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 42542502, "answer_count": 2, "score": 1, "last_activity_date": 1488478701, "creation_date": 1488400749, "last_edit_date": 1488478701, "question_id": 42541603, "link": "https://stackoverflow.com/questions/42541603/subest-a-dataframe-using-value-pairs-in-another-dataframe", "title": "Subest a dataframe using value pairs in another dataframe", "body": "<p>I have a <code>DataFrame</code> called <code>IncorrectQuestions_df</code> which looks like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/FO7tX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/FO7tX.png\" alt=\"enter image description here\"></a></p>\n\n<p>These questions pairs can repeat many, many times in this <code>DataFrame</code>. There are a total of about 50 Million records in this <code>DataFrame</code>. </p>\n\n<p>I create another <code>DataFrame</code> using this the existing one, which calculates the total number of question pairs. Here's the code I used:</p>\n\n<pre><code>IncorrectQuestions_count = pd.DataFrame(IncorrectQuestions_df.groupby(['Question1', 'Question2'])\n                                    .size()\n                                    ,columns=['Count'])\n</code></pre>\n\n<p>Now I wanted to only keep the pairs which occur atleast 5 times, so I subset using the following code:</p>\n\n<pre><code>IncorrectQuestions_count = IncorrectQuestions_count[IncorrectQuestions_count['Count'] &gt;= 5]\nIncorrectQuestions_count.reset_index(inplace=True)\n</code></pre>\n\n<p>which gives me the following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/IT17T.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IT17T.png\" alt=\"enter image description here\"></a> </p>\n\n<p><code>IncorrectQuestions_count</code> has about 80,000 pairs. I would like to subset <code>IncorrectQuestion_df</code> to only contain the pairs present in <code>IncorrectQuestions_count</code>. If I write 2 <code>for</code> loops to do this, it will take a large amount of time to finish, so I was wondering if there's a more pythonic way to achieve this?</p>\n\n<p>Any pointers would be appreciated.</p>\n\n<p>TIA.</p>\n"}, {"tags": ["python", "html", "csv", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6395609, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh5.googleusercontent.com/-AvCw6jb7FJU/AAAAAAAAAAI/AAAAAAAAAHQ/QfWL4WDQIrg/photo.jpg?sz=128", "display_name": "JakubM", "link": "https://stackoverflow.com/users/6395609/jakubm"}, "edited": false, "score": 0, "creation_date": 1488401327, "post_id": 42541618, "comment_id": 72219223, "body": "Thank you, unfortunately I got not what i want because file include: &quot;&#39;21:00&#39;,&#39;\\r\\n\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t\\t&zwnj;&#8203;\\t\\t\\t\\t\\t\\r\\n\\t\\t\\t&zwnj;&#8203;\\t\\t\\t\\t\\t\\t\\t\\r\\n\\t&zwnj;&#8203;\\t\\t\\t\\t\\t\\t\\t\\t\\t\\r&zwnj;&#8203;\\n\\t\\t\\t\\t\\t\\t\\t\\t\\t&zwnj;&#8203;\\t\\t11/2017\\r\\n\\t\\t\\&zwnj;&#8203;t\\t\\t\\t\\t\\t\\t\\t\\r\\n\\&zwnj;&#8203;t\\t\\t\\t\\t\\t\\t\\t\\t\\r\\&zwnj;&#8203;n\\t\\t\\t\\t\\t\\t\\t\\t\\r\\&zwnj;&#8203;n\\t\\t\\t\\t\\t\\t\\t\\t\\r\\&zwnj;&#8203;n\\t\\t\\t\\t\\t\\t\\t\\r\\n\\&zwnj;&#8203;t\\t\\t\\t\\t\\t&#39;,&#39;\\n\\nTe&zwnj;&#8203;rmo2Power &quot;"}, {"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "reply_to_user": {"reputation": 23, "user_id": 6395609, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh5.googleusercontent.com/-AvCw6jb7FJU/AAAAAAAAAAI/AAAAAAAAAHQ/QfWL4WDQIrg/photo.jpg?sz=128", "display_name": "JakubM", "link": "https://stackoverflow.com/users/6395609/jakubm"}, "edited": false, "score": 0, "creation_date": 1488401383, "post_id": 42541618, "comment_id": 72219263, "body": "@JakubMedon that&#39;s now a different problem which may be solved by stripping the cell values: <code>row = [str(elem.get_text(strip=True).encode(&#39;utf-8&#39;))[1:] for elem in tds[:12]]</code>."}], "tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 1, "last_activity_date": 1488400787, "creation_date": 1488400787, "answer_id": 42541618, "question_id": 42541591, "link": "https://stackoverflow.com/questions/42541591/python-parse-html-from-url-with-attributeerror-bytes-object-has-no-attribute/42541618#42541618", "title": "python parse html from url with AttributeError: &#39;bytes&#39; object has no attribute &#39;find_all&#39;", "body": "<p>Judging by the API usage, it looks like you meant to initialize the <code>BeautifulSoup</code> object:</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\n# ...\n\nsoup = BeautifulSoup(page, \"html.parser\")\n\nwith open('listing.csv', 'w') as f:\n    writer = csv.writer(f)\n\n    for tr in soup.find_all('tr'):\n        tds = tr.find_all('td')\n        row = [str(elem.text.encode('utf-8'))[1:] for elem in tds[:12]]\n\n        writer.writerow(row)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 6395609, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh5.googleusercontent.com/-AvCw6jb7FJU/AAAAAAAAAAI/AAAAAAAAAHQ/QfWL4WDQIrg/photo.jpg?sz=128", "display_name": "JakubM", "link": "https://stackoverflow.com/users/6395609/jakubm"}, "edited": false, "score": 0, "creation_date": 1488401223, "post_id": 42541620, "comment_id": 72219166, "body": "Thank you for quick answer. I got error &quot;FeatureNotFound: Couldn&#39;t find a tree builder with the features you requested: html5lib. Do you need to install a parser library?&quot;"}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "reply_to_user": {"reputation": 23, "user_id": 6395609, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh5.googleusercontent.com/-AvCw6jb7FJU/AAAAAAAAAAI/AAAAAAAAAHQ/QfWL4WDQIrg/photo.jpg?sz=128", "display_name": "JakubM", "link": "https://stackoverflow.com/users/6395609/jakubm"}, "edited": false, "score": 0, "creation_date": 1488401310, "post_id": 42541620, "comment_id": 72219216, "body": "Yup: <code>pip install bs4 html5lib</code> on the console."}, {"owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "reply_to_user": {"reputation": 23, "user_id": 6395609, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh5.googleusercontent.com/-AvCw6jb7FJU/AAAAAAAAAAI/AAAAAAAAAHQ/QfWL4WDQIrg/photo.jpg?sz=128", "display_name": "JakubM", "link": "https://stackoverflow.com/users/6395609/jakubm"}, "edited": false, "score": 0, "creation_date": 1488403281, "post_id": 42541620, "comment_id": 72220366, "body": "@JakubMedon: Then change it to <code>soup = BeautifulSoup(page, &quot;lxml&quot;)</code> and install <code>lxml</code> via <code>pip install lxml</code>."}], "tags": [], "owner": {"reputation": 37822, "user_id": 1231450, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/b9c98b4ce12bf9fd925d8c35c8861bb2?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/1231450/jan"}, "is_accepted": false, "score": 1, "last_activity_date": 1488400803, "creation_date": 1488400803, "answer_id": 42541620, "question_id": 42541591, "link": "https://stackoverflow.com/questions/42541591/python-parse-html-from-url-with-attributeerror-bytes-object-has-no-attribute/42541620#42541620", "title": "python parse html from url with AttributeError: &#39;bytes&#39; object has no attribute &#39;find_all&#39;", "body": "<p>You will likely need a parser, ie <code>BeautifulSoup</code>:</p>\n\n<pre><code>from bs4 import BeautifulSoup\n</code></pre>\n\n<p>Then after</p>\n\n<pre><code>page = urllib.request.urlopen(url).read()\n</code></pre>\n\n<p>comes</p>\n\n<pre><code>soup = BeautifulSoup(page, 'html5lib')\n</code></pre>\n\n<p>and</p>\n\n<pre><code>with open('listing.csv', 'w') as f:\n    writer = csv.writer(f)\n    for tr in soup.find_all('tr'):\n    # --------^^^^---------------\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6395609, "user_type": "registered", "accept_rate": 29, "profile_image": "https://lh5.googleusercontent.com/-AvCw6jb7FJU/AAAAAAAAAAI/AAAAAAAAAHQ/QfWL4WDQIrg/photo.jpg?sz=128", "display_name": "JakubM", "link": "https://stackoverflow.com/users/6395609/jakubm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1644, "favorite_count": 0, "accepted_answer_id": 42541618, "answer_count": 2, "score": 0, "last_activity_date": 1488400803, "creation_date": 1488400679, "question_id": 42541591, "link": "https://stackoverflow.com/questions/42541591/python-parse-html-from-url-with-attributeerror-bytes-object-has-no-attribute", "title": "python parse html from url with AttributeError: &#39;bytes&#39; object has no attribute &#39;find_all&#39;", "body": "<p>I want to parse html table from ur to csv but I get error in code: page.find_all('tr'):</p>\n\n<p>AttributeError: 'bytes' object has no attribute 'find_all'</p>\n\n<pre><code>import urllib\nimport os\nimport csv\n\ncwd = os.getcwd()\nmyFolder=cwd+\"\\In\"\nurl=\"http://biznes.pap.pl/pl/reports/espi/all,0,0,0,1\"\npage = urllib.request.urlopen(url).read()\n\nwith open('listing.csv', 'w') as f:\n   writer = csv.writer(f)\n    for tr in page.find_all('tr'):\n     tds = tr.find_all('td')\n     row = [str(elem.text.encode('utf-8'))[1:] for elem in tds[:12]]\n     writer.writerow(row)\n\nprint(\"Creating listing.csv file... \") \nprint(\"Done... \") \n</code></pre>\n\n<p>I think its something other in this urls.</p>\n\n<p>Thank you for help</p>\n"}, {"tags": ["python", "scipy", "statistics", "statistics-bootstrap"], "comments": [{"owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "edited": false, "score": 0, "creation_date": 1488416325, "post_id": 42541421, "comment_id": 72225642, "body": "why do you need the EDF? you should just sample (with replacement) from your data, these will be your bootstrap samples"}], "answers": [{"comments": [{"owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "edited": false, "score": 0, "creation_date": 1488416291, "post_id": 42544938, "comment_id": 72225637, "body": "the EDF is by <b>definition</b> steppy !"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "edited": false, "score": 0, "creation_date": 1488417073, "post_id": 42544938, "comment_id": 72225843, "body": "@maxymoo Yes I know that. But typically one is not really interested in the edf for its own sake but as a device to estimate the &quot;true&quot; distribution. And one may have good reasons to assume that the true distribution is smooth. Also, depending on what you use your new samples for, sampling from a discrete distribution where the true distribution is smooth may well lead to artifacts."}, {"owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "edited": false, "score": 0, "creation_date": 1488418015, "post_id": 42544938, "comment_id": 72226054, "body": "this is interesting  ... do you often smooth your bootstraps?"}, {"owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "reply_to_user": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "edited": false, "score": 0, "creation_date": 1488418674, "post_id": 42544938, "comment_id": 72226209, "body": "@maxymoo Luckily, my day-to-day life doesn&#39;t require much statistics. Why, do you have any principled objections? I&#39;m always happy to listen to superior knowledge."}, {"owner": {"reputation": 29554, "user_id": 839957, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3ac5824c6cc4817a754a186d6a45a08b?s=128&d=identicon&r=PG", "display_name": "maxymoo", "link": "https://stackoverflow.com/users/839957/maxymoo"}, "edited": false, "score": 0, "creation_date": 1488513625, "post_id": 42544938, "comment_id": 72274505, "body": "lol &quot;luckily&quot; no i definitely don&#39;t have superior knowledge or any principled objections, i&#39;ve learned something here, and will keep the smoothing trick in mind in future if i observe artefacts in my bootstraps."}], "tags": [], "owner": {"reputation": 47088, "user_id": 7207392, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/dadc9567dde5f02b09a29695eca1ce40?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Panzer", "link": "https://stackoverflow.com/users/7207392/paul-panzer"}, "is_accepted": false, "score": 2, "last_activity_date": 1488415811, "creation_date": 1488415811, "answer_id": 42544938, "question_id": 42541421, "link": "https://stackoverflow.com/questions/42541421/how-to-make-a-sample-from-the-empirical-distribution-function/42544938#42544938", "title": "How to make a sample from the empirical distribution function", "body": "<p>The edf you get by sorting the samples:</p>\n\n<pre><code>N = samples.size\nss = np.sort(samples) # these are the x-values of the edf\n                      # the y-values are 1/(2N), 3/(2N), 5/(2N) etc.\nedf = lambda x: np.searchsorted(ss, x) / N\n</code></pre>\n\n<p>However, if you only want to resample then you simply draw from your sample with equal probability and replacement.</p>\n\n<p>If this is too \"steppy\" for your liking, you can probably use some kind of interpolation to get a smooth distribution.</p>\n"}], "owner": {"reputation": 103, "user_id": 6632903, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-bj-jxsPLXRc/AAAAAAAAAAI/AAAAAAAAAWg/yt9wZSsVt5U/photo.jpg?sz=128", "display_name": "bastak", "link": "https://stackoverflow.com/users/6632903/bastak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1879, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1488415811, "creation_date": 1488400089, "question_id": 42541421, "link": "https://stackoverflow.com/questions/42541421/how-to-make-a-sample-from-the-empirical-distribution-function", "title": "How to make a sample from the empirical distribution function", "body": "<p>I'm trying to implement the nonparametric bootstrapping on Python. It requires to take a sample, build an empirical distribution function from it and then to generate a bunch of samples from this edf. How can I do it?\nIn scipy I found only how to make your own distribution function if you know the exact formula describing it, but I have only an edf.</p>\n"}, {"tags": ["python", "html", "css", "django", "twitter-bootstrap"], "answers": [{"tags": [], "owner": {"reputation": 6952, "user_id": 5644965, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J9KaA.jpg?s=128&g=1", "display_name": "Lemayzeur", "link": "https://stackoverflow.com/users/5644965/lemayzeur"}, "is_accepted": false, "score": 0, "last_activity_date": 1488404002, "creation_date": 1488404002, "answer_id": 42542464, "question_id": 42541416, "link": "https://stackoverflow.com/questions/42541416/change-multiple-form-sizes-django-bootstrap/42542464#42542464", "title": "Change Multiple Form Sizes Django Bootstrap", "body": "<p>You can define your own width: 20% for 5 cells, 14,28% for 7 cells</p>\n\n<pre><code>.col-xs-20, .col-sm-20, .col-md-20,.col-lg-20,/* 5 Cells */{\n    position: relative;\n    min-height: 1px;\n    padding-right: 10px;\n    padding-left: 10px;\n}\n.col-xs-20{\n    width: 20%;\n    float: left;\n }\n.col-sm-20{\n  width: 20%;\n  float: left;\n}\n.col-md-20{\n  width: 20%;\n  float: left;\n}\n.col-lg-20{\n  width: 20%;\n  float: left;\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 428, "user_id": 2079061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wOibF.png?s=128&g=1", "display_name": "rubick", "link": "https://stackoverflow.com/users/2079061/rubick"}, "is_accepted": false, "score": 1, "last_activity_date": 1488406665, "creation_date": 1488406665, "answer_id": 42543175, "question_id": 42541416, "link": "https://stackoverflow.com/questions/42541416/change-multiple-form-sizes-django-bootstrap/42543175#42543175", "title": "Change Multiple Form Sizes Django Bootstrap", "body": "<p>The easiest way to solve this is to use <a href=\"http://django-crispy-forms.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">Crispy forms</a>, which has support for rendering Bootstrap compatible layout. You can easily define divs and their classes in form's helper. Here's an example with two text fields in one row:</p>\n\n<pre><code>class SampleForm(Form):\n\n    name = CharField()\n    surname = CharField()\n\n    helper = FormHelper()\n    helper.layout = layout(\n        Div(\n            Div('name', css_class='col-sm-6'),\n            Div('surname', css_class='col-sm-6'),\n            css_class='row'\n        )\n    )\n</code></pre>\n"}], "owner": {"reputation": 166, "user_id": 5434276, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/01c59de1bec7a7bd15f8423b257efa14?s=128&d=identicon&r=PG&f=1", "display_name": "Mark Barrett", "link": "https://stackoverflow.com/users/5434276/mark-barrett"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1488406665, "creation_date": 1488400081, "last_edit_date": 1488403821, "question_id": 42541416, "link": "https://stackoverflow.com/questions/42541416/change-multiple-form-sizes-django-bootstrap", "title": "Change Multiple Form Sizes Django Bootstrap", "body": "<p>I'm trying to style my Django forms using CSS. I want it so that I can have multiple fields on the one line and different widths, but also have some fields that stretch the whole width of the container. I'm finding it difficult to do.</p>\n\n<p>I've tried using Bootstrap's grid system but I can't specify which div to put around which form element. I've also tried using a few answers I've seen here with TextAreas, and specifying the number of rows and cols like so:</p>\n\n<pre><code>widget=forms.Textarea(attrs={'cols': 8, 'rows': 1})\n</code></pre>\n\n<p>I was wondering is there a way I can add divs around particular inputs without having to use lots of if else statements in the template.</p>\n\n<p>I could specify a template with the divs already in it but I'm fairly sure I can only use one form template?</p>\n"}, {"tags": ["python", "function", "fizzbuzz"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1488400176, "post_id": 42541348, "comment_id": 72218589, "body": "See <a href=\"http://stackoverflow.com/questions/14329176/python-loops-extra-print/14329269\">here</a> and <a href=\"http://stackoverflow.com/questions/7053652/random-none-output-from-basic-python-function\">here</a>."}, {"owner": {"reputation": 44047, "user_id": 1400793, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7VxVK.png?s=128&g=1", "display_name": "Paul Hankin", "link": "https://stackoverflow.com/users/1400793/paul-hankin"}, "edited": false, "score": 0, "creation_date": 1488401240, "post_id": 42541348, "comment_id": 72219180, "body": "<a href=\"https://ericlippert.com/2014/03/05/how-to-debug-small-programs/\" rel=\"nofollow noreferrer\">ericlippert.com/2014/03/05/how-to-debug-small-programs</a>"}], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 7427942, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/--iUqFIlLa1U/AAAAAAAAAAI/AAAAAAAABS4/GW-nhMxvDME/photo.jpg?sz=128", "display_name": "Alex Vincent", "link": "https://stackoverflow.com/users/7427942/alex-vincent"}, "edited": false, "score": 0, "creation_date": 1488400178, "post_id": 42541394, "comment_id": 72218592, "body": "Thank you very much"}], "tags": [], "owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "is_accepted": true, "score": 1, "last_activity_date": 1488399979, "creation_date": 1488399979, "answer_id": 42541394, "question_id": 42541348, "link": "https://stackoverflow.com/questions/42541348/beginner-creating-fizzbuzz-function/42541394#42541394", "title": "Beginner creating fizzbuzz function", "body": "<pre><code>            print(\"buzz\")\n        n = n + 1\n    return number\n\nprint(fizzbuzz(number))\n</code></pre>\n\n<p>Here's your problem. Don't return the number, and don't print the return value of the function.</p>\n\n<pre><code>            print(\"buzz\")\n        n = n + 1\n\nfizzbuzz(number)\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 7427942, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/--iUqFIlLa1U/AAAAAAAAAAI/AAAAAAAABS4/GW-nhMxvDME/photo.jpg?sz=128", "display_name": "Alex Vincent", "link": "https://stackoverflow.com/users/7427942/alex-vincent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 1, "accepted_answer_id": 42541394, "answer_count": 1, "score": -1, "last_activity_date": 1488401016, "creation_date": 1488399830, "question_id": 42541348, "link": "https://stackoverflow.com/questions/42541348/beginner-creating-fizzbuzz-function", "title": "Beginner creating fizzbuzz function", "body": "<p>This code is supposed to output fizz if number is divisible by 3, buzz if divisible by 5 and fizzbuzz if divisible by 3 and 5. Although I'm a bit unfamiliar with defining my own function and using the return appropriately. How do I remove the last 16 if the user inputs the number 16?</p>\n\n<pre><code>number = int(input(\"Enter a number: \"))\n\n\ndef fizzbuzz(number):\n    n = 1\n    while n &lt;= number:\n        if n % 3 != 0 and n % 5 != 0:\n            print(n)\n        elif n % 3 == 0 and n % 5 == 0:\n            print(\"fizzbuzz\")\n        elif n % 3 == 0:\n            print(\"fizz\")\n        elif n % 5 == 0:\n            print(\"buzz\")\n        n = n + 1\n    return number\n\nprint(fizzbuzz(number))\n</code></pre>\n\n<p>If number = 16 it outputs</p>\n\n<pre><code>Enter a number: 16\n1\n2\nfizz\n4\nbuzz\nfizz\n7\n8\nfizz\nbuzz\n11\nfizz\n13\n14\nfizzbuzz\n16\n16\n</code></pre>\n\n<p>How do I get I remove the last number 16, as it isn't supposed to be there</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1488399820, "post_id": 42541303, "comment_id": 72218389, "body": "zip it with a range array?"}, {"owner": {"reputation": 5221, "user_id": 2955541, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/fmqg5.png?s=128&g=1", "display_name": "slaw", "link": "https://stackoverflow.com/users/2955541/slaw"}, "reply_to_user": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1488400698, "post_id": 42541303, "comment_id": 72218873, "body": "@Divakar Can you provide an example? You can assume that the 2D array is a view and exceptionally large and so a copy is not a solution."}, {"owner": {"reputation": 13675, "user_id": 5046896, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7GplC.jpg?s=128&g=1", "display_name": "GoingMyWay", "link": "https://stackoverflow.com/users/5046896/goingmyway"}, "edited": false, "score": 0, "creation_date": 1527256346, "post_id": 42541303, "comment_id": 88073397, "body": "Hi, have you solved this problem?"}, {"owner": {"reputation": 4801, "user_id": 1021819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pGNtf.png?s=128&g=1", "display_name": "jtlz2", "link": "https://stackoverflow.com/users/1021819/jtlz2"}, "edited": false, "score": 0, "creation_date": 1581935191, "post_id": 42541303, "comment_id": 106590200, "body": "@slaw Is this still a non-starter!? Crazy"}], "answers": [{"comments": [{"owner": {"reputation": 5221, "user_id": 2955541, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/fmqg5.png?s=128&g=1", "display_name": "slaw", "link": "https://stackoverflow.com/users/2955541/slaw"}, "edited": false, "score": 0, "creation_date": 1488400901, "post_id": 42541593, "comment_id": 72218980, "body": "Good to know. I&#39;m obligated to ask but is there a method that is a speed solution?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 5221, "user_id": 2955541, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/fmqg5.png?s=128&g=1", "display_name": "slaw", "link": "https://stackoverflow.com/users/2955541/slaw"}, "edited": false, "score": 0, "creation_date": 1488401127, "post_id": 42541593, "comment_id": 72219114, "body": "I added a whole array solution"}, {"owner": {"reputation": 13675, "user_id": 5046896, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7GplC.jpg?s=128&g=1", "display_name": "GoingMyWay", "link": "https://stackoverflow.com/users/5046896/goingmyway"}, "edited": false, "score": 0, "creation_date": 1527260210, "post_id": 42541593, "comment_id": 88075908, "body": "Hi, in <code>np.apply_along_axis(some_func, 1, x)</code>  what is <code>some_func</code>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 13675, "user_id": 5046896, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/7GplC.jpg?s=128&g=1", "display_name": "GoingMyWay", "link": "https://stackoverflow.com/users/5046896/goingmyway"}, "edited": false, "score": 0, "creation_date": 1527281794, "post_id": 42541593, "comment_id": 88085547, "body": "@going, see the question post."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 0, "last_activity_date": 1488400940, "last_edit_date": 1488400940, "creation_date": 1488400684, "answer_id": 42541593, "question_id": 42541303, "link": "https://stackoverflow.com/questions/42541303/numpy-apply-along-axis-and-get-row-index/42541593#42541593", "title": "Numpy Apply Along Axis and Get Row Index", "body": "<p>For a 2d array with axis=1, <code>apply_along_axis</code> is the same as iteration of the rows of the array</p>\n\n<pre><code>In [149]: np.apply_along_axis(some_func, 1, x)\nOut[149]: \narray([[2, 0],\n       [3, 1],\n       [4, 2],\n       [5, 3]])\nIn [151]: np.array([some_func(i) for i in x])\nOut[151]: \narray([[2, 0],\n       [3, 1],\n       [4, 2],\n       [5, 3]])\n</code></pre>\n\n<p>For axis=0 we could iterate on <code>x.T</code>. <code>apply_along_axis</code> is more useful when the array is 3d, and we want to iterate on all dimensions except one.  Then it saves on some tedium.  But it isn't a speed solution.</p>\n\n<p>With your revised function, we can use standard <code>enumerate</code> to get both row and index:</p>\n\n<pre><code>In [153]: np.array([some_func(v,i) for i,v in enumerate(x)])\nOut[153]: \narray([[0, 2, 0],\n       [1, 3, 1],\n       [2, 4, 2],\n       [3, 5, 3]])\n</code></pre>\n\n<p>or with a simple range iteration:</p>\n\n<pre><code>In [157]: np.array([some_func(x[i],i) for i in range(x.shape[0])])\nOut[157]: \narray([[0, 2, 0],\n       [1, 3, 1],\n       [2, 4, 2],\n       [3, 5, 3]])\n</code></pre>\n\n<p>There are various tools for getting the indexing for higher dimenions, things like <code>ndenumerate</code> and <code>ndindex</code>.</p>\n\n<p>The fast solution - work on all rows at once:</p>\n\n<pre><code>In [158]: np.column_stack((np.arange(4), x[:,2], x[:,0]))\nOut[158]: \narray([[0, 2, 0],\n       [1, 3, 1],\n       [2, 4, 2],\n       [3, 5, 3]])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4801, "user_id": 1021819, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pGNtf.png?s=128&g=1", "display_name": "jtlz2", "link": "https://stackoverflow.com/users/1021819/jtlz2"}, "edited": false, "score": 1, "creation_date": 1581935172, "post_id": 43885699, "comment_id": 106590188, "body": "Is there really no way to access the row/column index in the way the OP wanted!?"}], "tags": [], "owner": {"reputation": 594, "user_id": 3947487, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HafAV.png?s=128&g=1", "display_name": "nanangarsyad", "link": "https://stackoverflow.com/users/3947487/nanangarsyad"}, "is_accepted": false, "score": 0, "last_activity_date": 1494404372, "last_edit_date": 1494404372, "creation_date": 1494400172, "answer_id": 43885699, "question_id": 42541303, "link": "https://stackoverflow.com/questions/42541303/numpy-apply-along-axis-and-get-row-index/43885699#43885699", "title": "Numpy Apply Along Axis and Get Row Index", "body": "<p>Here's an alternative solution, while waiting for the real feature got implemented.\nThis is gonna be a bit untidy. But enough to tackle your problem at the moment, maybe. :)</p>\n\n<pre><code># create global variable\nIn [247]: global counter  \n\n# Initialize it to your need\nIn [248]: counter = 0 \n\n# create your function callback, lambda also could be used\nIn [252]: def funct(row): \n     ...:     # reference to global variable created before hand \n     ...:     global counter   \n     ...:     counter += 1 # increment the counter\n     ...:     # return something, or else \n     ...:     # will raise a 'NoneType' has no len() exception\n     ...:     return counter\n\nIn [260]: np.apply_along_axis(funct, 1, np.array([[0],[0],[0]]))\nOut[260]: array([1, 2, 3])\n\n# revert counter to initial state or the counter will keep raising afterward\nIn [261]: counter = 0 \n\n# or you could just delete it if you had no use for it anymore\nIn [262]: del counter \n</code></pre>\n\n<p>Hoped, could be some help for you :)</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 10297152, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210015924313541/picture?type=large", "display_name": "Nathaniel Mahowald", "link": "https://stackoverflow.com/users/10297152/nathaniel-mahowald"}, "is_accepted": false, "score": 1, "last_activity_date": 1561575359, "creation_date": 1561575359, "answer_id": 56779404, "question_id": 42541303, "link": "https://stackoverflow.com/questions/42541303/numpy-apply-along-axis-and-get-row-index/56779404#56779404", "title": "Numpy Apply Along Axis and Get Row Index", "body": "<p>I had this problem for a 3 dimensional tensor, so I thought it'd be worthwhile to post a solution that generalizes, which was to use <code>np.ndenumerate</code>.</p>\n\n<pre><code>    f = lambda indices: #(whatever you'd like to do)\n\n    output = np.empty(M.shape)\n    for i, x in np.ndenumerate(M):\n        output(i) = f(i)\n</code></pre>\n"}], "owner": {"reputation": 5221, "user_id": 2955541, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/fmqg5.png?s=128&g=1", "display_name": "slaw", "link": "https://stackoverflow.com/users/2955541/slaw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3920, "favorite_count": 2, "answer_count": 3, "score": 11, "last_activity_date": 1606116488, "creation_date": 1488399681, "last_edit_date": 1488400744, "question_id": 42541303, "link": "https://stackoverflow.com/questions/42541303/numpy-apply-along-axis-and-get-row-index", "title": "Numpy Apply Along Axis and Get Row Index", "body": "<p>I have a 2D array (it is actually very large and a view of another array):</p>\n\n<pre><code>x = np.array([[0, 1, 2],\n          [1, 2, 3],\n          [2, 3, 4],\n          [3, 4, 5]]\n        )\n</code></pre>\n\n<p>And I have a function that processes each row of the array:</p>\n\n<pre><code>def some_func(a):\n    \"\"\"\n    Some function that does something funky with a row of numbers\n    \"\"\"\n    return [a[2], a[0]]  # This is not so funky\n\nnp.apply_along_axis(some_func, 1, x)\n</code></pre>\n\n<p>What I'm looking for is some way to call the <code>np.apply_along_axis</code> function so that I have access to the row index (for the row being processed) and then be able to process each row with this function:</p>\n\n<pre><code>def some_func(a, idx):\n    \"\"\"\n    I plan to use the index for some logic on which columns to\n    return. This is only an example\n    \"\"\"\n    return [idx, a[2], a[0]]  # This is not so funky\n</code></pre>\n"}]