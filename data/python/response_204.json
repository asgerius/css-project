[{"tags": ["javascript", "python"], "comments": [{"owner": {"reputation": 796429, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1544054547, "post_id": 53642615, "comment_id": 94144593, "body": "What Python server framework are you using? You need to access the POST parameters; see its documentation."}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1544054560, "post_id": 53642615, "comment_id": 94144598, "body": "any errors in <code>console</code>?"}, {"owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1544054718, "post_id": 53642615, "comment_id": 94144631, "body": "The page doesn&#39;t move because you&#39;re making an AJAX request. If you want the page to move, you need to submit a POST <code>&lt;form&gt;</code>."}, {"owner": {"reputation": 91, "user_id": 10680996, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZJZvIjEQo00/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gURRKBMSG-8vRpJqMKHjNLGjMLbA/mo/photo.jpg?sz=128", "display_name": "\uc784\uc9c0\uc6c5", "link": "https://stackoverflow.com/users/10680996/%ec%9e%84%ec%a7%80%ec%9b%85"}, "reply_to_user": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1544056108, "post_id": 53642615, "comment_id": 94144974, "body": "@PedroLobito no errors in console.."}, {"owner": {"reputation": 91, "user_id": 10680996, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZJZvIjEQo00/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gURRKBMSG-8vRpJqMKHjNLGjMLbA/mo/photo.jpg?sz=128", "display_name": "\uc784\uc9c0\uc6c5", "link": "https://stackoverflow.com/users/10680996/%ec%9e%84%ec%a7%80%ec%9b%85"}, "reply_to_user": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1544056142, "post_id": 53642615, "comment_id": 94144983, "body": "@ChrisG I know how to use post method in &lt;form&gt; want to know how to do it from ajax"}, {"owner": {"reputation": 91, "user_id": 10680996, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZJZvIjEQo00/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gURRKBMSG-8vRpJqMKHjNLGjMLbA/mo/photo.jpg?sz=128", "display_name": "\uc784\uc9c0\uc6c5", "link": "https://stackoverflow.com/users/10680996/%ec%9e%84%ec%a7%80%ec%9b%85"}, "reply_to_user": {"reputation": 796429, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1544056266, "post_id": 53642615, "comment_id": 94145005, "body": "@SLaks Using Flask framework, yeah i saw documentation and other answers googling, but dont know the difference."}, {"owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1544056291, "post_id": 53642615, "comment_id": 94145009, "body": "@\uc784\uc9c0\uc6c5 What exactly do you mean by &quot;page does not move&quot;? If you want something to happen after your POST request, you need to add a <code>success</code> callback to your <code>$.post()</code>"}, {"owner": {"reputation": 91, "user_id": 10680996, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZJZvIjEQo00/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gURRKBMSG-8vRpJqMKHjNLGjMLbA/mo/photo.jpg?sz=128", "display_name": "\uc784\uc9c0\uc6c5", "link": "https://stackoverflow.com/users/10680996/%ec%9e%84%ec%a7%80%ec%9b%85"}, "edited": false, "score": 0, "creation_date": 1544056517, "post_id": 53642615, "comment_id": 94145059, "body": "problem is when I post to &#39;/user&#39;, i dont think it goes to &#39;/user&#39;"}, {"owner": {"reputation": 91, "user_id": 10680996, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZJZvIjEQo00/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gURRKBMSG-8vRpJqMKHjNLGjMLbA/mo/photo.jpg?sz=128", "display_name": "\uc784\uc9c0\uc6c5", "link": "https://stackoverflow.com/users/10680996/%ec%9e%84%ec%a7%80%ec%9b%85"}, "reply_to_user": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1544056976, "post_id": 53642615, "comment_id": 94145163, "body": "@ChrisG moving to /user shouldn&#39;t my page pop up &#39;id&#39; with white page? Also using return render_template it does not work"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1544058259, "post_id": 53642615, "comment_id": 94145480, "body": "AJAX doesn&#39;t update the page by itself. You need to provide a callback function in <code>$.post()</code> that updates the page with the result."}, {"owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "edited": false, "score": 0, "creation_date": 1544058342, "post_id": 53642615, "comment_id": 94145501, "body": "Like I said, if you want to see the id on a white page, you have to submit a POST form. Whether you do this by clicking a submit button or by submitting it using JS doesn&#39;t matter, but AJAX is the wrong tool here. An AJAX request will not navigate away from the current page, that&#39;s the whole point of AJAX, the reason why it is available in the first place. I don&#39;t know what else to tell you."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": true, "score": 1, "last_activity_date": 1544058398, "creation_date": 1544058398, "answer_id": 53643138, "question_id": 53642615, "link": "https://stackoverflow.com/questions/53642615/data-from-javascript-to-pythonusing-post/53643138#53643138", "title": "Data from javascript to python(using post)", "body": "<p>You need to provide a callback function in <code>$.post</code></p>\n\n<pre><code>$('ABC').on(\"click\", function() {\n  $.post('/user', {\n    user: 'here'\n  }, function(response) {\n    $(\"#result\").html(response);\n  });\n});\n</code></pre>\n\n<p>You can also abbreviate this to the <code>.load()</code> method:</p>\n\n<pre><code>$('ABC').on(\"click\", function() {\n  $(\"#result\").load('/user', {\n    user: 'here'\n  });\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7845, "user_id": 5734311, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7iVq7.jpg?s=128&g=1", "display_name": "Chris G", "link": "https://stackoverflow.com/users/5734311/chris-g"}, "is_accepted": false, "score": -2, "last_activity_date": 1544058971, "creation_date": 1544058971, "answer_id": 53643203, "question_id": 53642615, "link": "https://stackoverflow.com/questions/53642615/data-from-javascript-to-pythonusing-post/53643203#53643203", "title": "Data from javascript to python(using post)", "body": "<p>From what I understand, you're looking for this:</p>\n\n<pre><code>$('ABC').on(\"click\", function() {\n  var $form = $(\"&lt;form&gt;\").attr(\"action\", \"/post\").attr(\"method\", \"post\");\n  $form.append($(\"&lt;input&gt;\").attr(\"type\", \"hidden\").attr(\"name\", \"user\").val(\"here\"));\n  $(\"body\").append($form);\n  $form.submit();\n  return false;\n});\n</code></pre>\n\n<p>This will create a hidden POST form, populate it, append it to <code>&lt;body&gt;</code> and submit it.</p>\n"}], "owner": {"reputation": 91, "user_id": 10680996, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZJZvIjEQo00/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gURRKBMSG-8vRpJqMKHjNLGjMLbA/mo/photo.jpg?sz=128", "display_name": "\uc784\uc9c0\uc6c5", "link": "https://stackoverflow.com/users/10680996/%ec%9e%84%ec%a7%80%ec%9b%85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 53643138, "answer_count": 2, "score": 1, "last_activity_date": 1544058971, "creation_date": 1544054218, "question_id": 53642615, "link": "https://stackoverflow.com/questions/53642615/data-from-javascript-to-pythonusing-post", "title": "Data from javascript to python(using post)", "body": "<p>I am trying to give data from javascript to python, using post </p>\n\n<p>On my Javascript</p>\n\n<pre><code>$('ABC').on(\"click\", function(){\n    $.post( '/user',\n        {\n            user: 'here'\n        }\n    )});\n</code></pre>\n\n<p>And giving this to python</p>\n\n<pre><code>@app.route(\"/user\", methods=['GET', 'POST'])\ndef user():\n    id = user\n    return id\n</code></pre>\n\n<p>Above code should show html with just user.</p>\n\n<p>But page does not move when on click..</p>\n\n<p>Any idea?</p>\n"}, {"tags": ["python", "regex", "python-3.x", "python-3.6", "python-3.7"], "comments": [{"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 1, "creation_date": 1544054927, "post_id": 53642571, "comment_id": 94144691, "body": "I must say the new 3.7 behavior makes no sense to me."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1544059564, "post_id": 53642571, "comment_id": 94145710, "body": "Very cool <code>sed</code> project. If you find a magic <code>sed</code> sometimes ya just gotta use it!"}], "answers": [{"comments": [{"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1544054822, "post_id": 53642646, "comment_id": 94144656, "body": "That only fixes the second example, not the first."}], "tags": [], "owner": {"reputation": 414, "user_id": 6669864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zqzj7.jpg?s=128&g=1", "display_name": "Aaron Klein", "link": "https://stackoverflow.com/users/6669864/aaron-klein"}, "is_accepted": false, "score": 1, "last_activity_date": 1544054415, "creation_date": 1544054415, "answer_id": 53642646, "question_id": 53642571, "link": "https://stackoverflow.com/questions/53642571/retrieving-python-3-6-handling-of-re-sub-with-zero-length-matches-in-python-3/53642646#53642646", "title": "Retrieving python 3.6 handling of re.sub() with zero length matches in python 3.7", "body": "<p>According to the 3.7 What's New,</p>\n\n<blockquote>\n  <p>The previous behavior can be restored by changing the pattern to <code>r'.+'</code>.</p>\n</blockquote>\n\n<p>See <a href=\"https://docs.python.org/3/whatsnew/3.7.html\" rel=\"nofollow noreferrer\">https://docs.python.org/3/whatsnew/3.7.html</a> under \"Changes in the Python API\". It seems that the solution would therefore be to modify such a regex; it doesn't seem like there's a flag you can pass to <code>re</code> to request this behavior.</p>\n"}, {"comments": [{"owner": {"reputation": 2601, "user_id": 380018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b28004dc11595eada3f99107d9325dc?s=128&d=identicon&r=PG", "display_name": "Gilles Arcas", "link": "https://stackoverflow.com/users/380018/gilles-arcas"}, "edited": false, "score": 0, "creation_date": 1544132826, "post_id": 53643060, "comment_id": 94178584, "body": "As I understand, V0 means compatibility with the current python version, V1 means extra functionalities brought by regex. In both cases, for 3.7, this does not give back the behavior of 3.6. Thanks for suggestion anyway."}], "tags": [], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "is_accepted": false, "score": 2, "last_activity_date": 1544064565, "last_edit_date": 1544064565, "creation_date": 1544057683, "answer_id": 53643060, "question_id": 53642571, "link": "https://stackoverflow.com/questions/53642571/retrieving-python-3-6-handling-of-re-sub-with-zero-length-matches-in-python-3/53643060#53643060", "title": "Retrieving python 3.6 handling of re.sub() with zero length matches in python 3.7", "body": "<p>Your solution may be in the <a href=\"https://pypi.org/project/regex/\" rel=\"nofollow noreferrer\">regex egg</a>:</p>\n\n<p><strong>Regex Egg Introduction</strong></p>\n\n<blockquote>\n  <p>This regex implementation is backwards-compatible with the standard\n  \u2018re\u2019 module, but offers additional functionality.\n  The re module\u2019s behaviour with zero-width matches changed in Python\n  3.7, and this module will follow that behaviour when compiled for Python 3.7.</p>\n</blockquote>\n\n<hr>\n\n<p><strong>Installation:</strong>   </p>\n\n<pre><code>pip install regex\n</code></pre>\n\n<hr>\n\n<p><strong>Usage:</strong>   </p>\n\n<p>With <a href=\"https://pypi.org/project/regex/\" rel=\"nofollow noreferrer\"><code>regex</code></a>, you can specify the version (<code>V0</code>, <code>V1</code>) which regex pattern will be compiled with, i.e.:</p>\n\n<pre><code># Python 3.7 and later\nimport regex\n&gt;&gt;&gt; regex.sub('.*', 'x', 'test')\n'xx'\n&gt;&gt;&gt; regex.sub('.*?', '|', 'test')\n'|||||||||'\n\n# Python 3.6 and earlier\nimport regex\n&gt;&gt;&gt; regex.sub('(?V0).*', 'x', 'test')\n'x'\n&gt;&gt;&gt; regex.sub('(?V1).*', 'x', 'test')\n'xx'\n&gt;&gt;&gt; regex.sub('(?V0).*?', '|', 'test')\n'|t|e|s|t|'\n&gt;&gt;&gt; regex.sub('(?V1).*?', '|', 'test')\n'|||||||||'\n</code></pre>\n\n<hr>\n\n<p>Note:  </p>\n\n<blockquote>\n  <p>Version can be indicated by <code>VERSION0</code> or <code>V0</code> flag, or <code>(?V0)</code> in the\n  pattern.</p>\n</blockquote>\n\n<hr>\n\n<p>Sources:</p>\n\n<p><a href=\"https://bugs.python.org/issue2636\" rel=\"nofollow noreferrer\">Regex thread - issue2636</a><br>\n<a href=\"https://pypi.org/project/regex/\" rel=\"nofollow noreferrer\">regex 2018.11.22</a></p>\n"}, {"tags": [], "owner": {"reputation": 16381, "user_id": 1176601, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/YCkL9.jpg?s=128&g=1", "display_name": "Aprillion", "link": "https://stackoverflow.com/users/1176601/aprillion"}, "is_accepted": false, "score": 0, "last_activity_date": 1546642098, "creation_date": 1546642098, "answer_id": 54047194, "question_id": 53642571, "link": "https://stackoverflow.com/questions/53642571/retrieving-python-3-6-handling-of-re-sub-with-zero-length-matches-in-python-3/54047194#54047194", "title": "Retrieving python 3.6 handling of re.sub() with zero length matches in python 3.7", "body": "<p>PCRE (including Python 3.7+) that satisfies the original examples would be:</p>\n\n<pre><code>^a*|a+|(?&lt;!a)$\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/zTpV1t/3\" rel=\"nofollow noreferrer\">https://regex101.com/r/zTpV1t/3</a></p>\n\n<p>However, <code>bbaacc</code> would get substituted to <code>xbbxccx</code> (instead of the Python 3.6- version of <code>a*</code> which produced <code>xbxbxcxcx</code>) - it might still be good enough for some people.</p>\n"}], "owner": {"reputation": 2601, "user_id": 380018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b28004dc11595eada3f99107d9325dc?s=128&d=identicon&r=PG", "display_name": "Gilles Arcas", "link": "https://stackoverflow.com/users/380018/gilles-arcas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 532, "favorite_count": 0, "answer_count": 3, "score": 6, "last_activity_date": 1547743022, "creation_date": 1544053973, "last_edit_date": 1547743022, "question_id": 53642571, "link": "https://stackoverflow.com/questions/53642571/retrieving-python-3-6-handling-of-re-sub-with-zero-length-matches-in-python-3", "title": "Retrieving python 3.6 handling of re.sub() with zero length matches in python 3.7", "body": "<p>handling of zero length matches has changed with python 3.7. Consider the following with python 3.6 (and previous):</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; print(re.sub('a*', 'x', 'bac'))\nxbxcx\n&gt;&gt;&gt; print(re.sub('.*', 'x', 'bac'))\nx\n</code></pre>\n\n<p>We get the following with python 3.7:</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; print(re.sub('a*', 'x', 'bac'))\nxbxxcx\n&gt;&gt;&gt; print(re.sub('.*', 'x', 'bac'))\nxx\n</code></pre>\n\n<p>I understand this is the standard behavior of PCRE. Furthermore, re.finditer() seems to have always detected the additional match:</p>\n\n<pre><code>&gt;&gt;&gt; for m in re.finditer('a*', 'bac'):\n...     print(m.start(0), m.end(0), m.group(0))\n...\n0 0\n1 2 a\n2 2\n3 3\n</code></pre>\n\n<p>That said, I'm interested in retrieving the behavior of python 3.6 (this is for a hobby project implementing <a href=\"https://github.com/GillesArcas/PythonSed\" rel=\"nofollow noreferrer\">sed in python</a>).</p>\n\n<p>I can come with the following solution:</p>\n\n<pre><code>def sub36(regex, replacement, string):\n\n    compiled = re.compile(regex)\n\n    class Match(object):\n        def __init__(self):\n            self.prevmatch = None\n        def __call__(self, match):\n            try:\n                if match.group(0) == '' and self.prevmatch and match.start(0) == self.prevmatch.end(0):\n                    return ''\n                else:\n                    return re._expand(compiled, match, replacement)\n            finally:\n                self.prevmatch = match\n\n    return compiled.sub(Match(), string)\n</code></pre>\n\n<p>which gives:</p>\n\n<pre><code>&gt;&gt;&gt; print(re.sub('a*', 'x', 'bac'))\nxbxxcx\n&gt;&gt;&gt; print(sub36('a*', 'x', 'bac'))\nxbxcx\n&gt;&gt;&gt; print(re.sub('.*', 'x', 'bac'))\nxx\n&gt;&gt;&gt; print(sub36('.*', 'x', 'bac'))\nx\n</code></pre>\n\n<p>However, this seems very crafted for these examples.</p>\n\n<p>What would be the right way to implement python 3.6 behavior for re.sub() zero length matches with python 3.7?</p>\n"}, {"tags": ["python", "performance", "math"], "comments": [{"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1544055367, "post_id": 53642569, "comment_id": 94144805, "body": "I wonder if <code>yield</code> would be faster than <code>list.append</code>? You also might try reversing the string instead of the list."}, {"owner": {"reputation": 69, "user_id": 10719740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0857d6d51c516daa050f5fbdbc1255ac?s=128&d=identicon&r=PG&f=1", "display_name": "phdgroupA", "link": "https://stackoverflow.com/users/10719740/phdgroupa"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1544057827, "post_id": 53642569, "comment_id": 94145393, "body": "@Mark Ransom: Thanks. Concerning reversing: I guess you mean the statement &quot;return digits[::-1]&quot; in the function <i>numberToBase(n, b)</i>. There is no string: The parameter &quot;n&quot; is an integer. Or do mean something else?"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1544058895, "post_id": 53642569, "comment_id": 94145595, "body": "Sorry, I didn&#39;t realize at first that your desired output was a list rather than a string of digits. By the time I realized my mistake it was too late to edit the comment."}, {"owner": {"reputation": 69, "user_id": 10719740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0857d6d51c516daa050f5fbdbc1255ac?s=128&d=identicon&r=PG&f=1", "display_name": "phdgroupA", "link": "https://stackoverflow.com/users/10719740/phdgroupa"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1544060642, "post_id": 53642569, "comment_id": 94145929, "body": "@Mark Ransom: No problem, your hints are welcome.  Concerning yield vs append in <i>numberToBase()</i>: Could you please show us the code how to do that?"}, {"owner": {"reputation": 2338, "user_id": 3080953, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fe6bc2a51d294b0d1d65fa203e496c7a?s=128&d=identicon&r=PG&f=1", "display_name": "c2huc2hu", "link": "https://stackoverflow.com/users/3080953/c2huc2hu"}, "edited": false, "score": 0, "creation_date": 1544061751, "post_id": 53642569, "comment_id": 94146169, "body": "numpy won&#39;t work for this problem because it doesn&#39;t support arbitrary precision ints"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 1, "creation_date": 1544066043, "post_id": 53642569, "comment_id": 94147141, "body": "I get different results from <code>numberToBase(n, 3)</code> and <code>step2(n, 3, 3)</code> for <code>n = 10**30000 + 1</code>,  <code>n = 10**80000 + 1</code> and other large values; the answers have different lengths.  I think there is a bug in how you assemble the result in the <code>convsteps == 3</code> code, because a visual inspection of the digits at the beginning  and end of the results shows they agree."}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1544069616, "post_id": 53642569, "comment_id": 94147926, "body": "@WarrenWeckesser you&#39;re right, there&#39;s a bug. If there are leading zeros in any of the intermediate results they&#39;ll get dropped."}, {"owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 2, "creation_date": 1544069824, "post_id": 53642569, "comment_id": 94147983, "body": "I&#39;d try one of the bignum library wrappers like <code>gmpy2</code>; something like <code>gmpy2.digits(your_num, 3)</code> should beat even well-designed pure Python alternatives by several orders of magnitude."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "reply_to_user": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "edited": false, "score": 0, "creation_date": 1544071122, "post_id": 53642569, "comment_id": 94148283, "body": "@DSM, yup.  With <code>n = 10**1500000 + 1</code>,  <code>gmpy2.digits(n, 3)</code> takes about 162 milliseconds on my laptop."}, {"owner": {"reputation": 69, "user_id": 10719740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0857d6d51c516daa050f5fbdbc1255ac?s=128&d=identicon&r=PG&f=1", "display_name": "phdgroupA", "link": "https://stackoverflow.com/users/10719740/phdgroupa"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1544100622, "post_id": 53642569, "comment_id": 94161760, "body": "@Mark Ransom: You wrote, that if there are leading zeros in any of the intermediate results, they&#39;ll get dropped. How could this be fixed?"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1544106238, "post_id": 53642569, "comment_id": 94165336, "body": "I&#39;m not sure how it could be fixed, because the structure of your loop stops when the leading digits are zero; there&#39;s no indication you need to go any further."}], "answers": [{"comments": [{"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1544067409, "post_id": 53644080, "comment_id": 94147419, "body": "Hey Mark, I want to see how this compares to the recursive version that I&#39;m hacking on, but <code>base_recurse</code> is not defined. \u2639\ufe0f  Looks like it should just be <code>number_to_base</code>, correct?"}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1544067810, "post_id": 53644080, "comment_id": 94147512, "body": "That fixes it, and let&#39;s me know that your code is 3 - 4 times faster than mine.  \ud83d\udc4d"}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1544069081, "post_id": 53644080, "comment_id": 94147800, "body": "@WarrenWeckesser sorry about that, I was experimenting with a few variations and some old code got mixed in with the new. In a minute I might have an even simpler (and faster?) version."}, {"owner": {"reputation": 92118, "user_id": 1217358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d2aafb97833979e3668c61d36e697bfc?s=128&d=identicon&r=PG", "display_name": "Warren Weckesser", "link": "https://stackoverflow.com/users/1217358/warren-weckesser"}, "edited": false, "score": 0, "creation_date": 1544070363, "post_id": 53644080, "comment_id": 94148113, "body": "Nice.  I improved mine, but it is still slower, and I suspect further refinements will just converge to something like your code."}, {"owner": {"reputation": 69, "user_id": 10719740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0857d6d51c516daa050f5fbdbc1255ac?s=128&d=identicon&r=PG&f=1", "display_name": "phdgroupA", "link": "https://stackoverflow.com/users/10719740/phdgroupa"}, "edited": false, "score": 0, "creation_date": 1544100341, "post_id": 53644080, "comment_id": 94161578, "body": "@MarkRansom: For n=10**1500000+1, I compared the runtime of your <i>number_to_base()</i> to <i>numberToBase()</i>. There is no real performance difference on my PC: Yours took 4:17 min; the <i>numberToBase()</i> took 4:14 min."}, {"owner": {"reputation": 69, "user_id": 10719740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0857d6d51c516daa050f5fbdbc1255ac?s=128&d=identicon&r=PG&f=1", "display_name": "phdgroupA", "link": "https://stackoverflow.com/users/10719740/phdgroupa"}, "edited": false, "score": 0, "creation_date": 1544112947, "post_id": 53644080, "comment_id": 94169537, "body": "@MarkRansom: For n=10**1500000+1, I did some more tests. Your version of <i>number_to_base()</i> consumes the same time as <i>numberToBase()</i> -- independently whether within <i>step2()</i> the parameter convsteps is 1 or 3. So Mark&#39;s version is to be to preferred and there is no need for step2() any more."}, {"owner": {"reputation": 3898, "user_id": 6221024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JHtD0ON5o_w/AAAAAAAAAAI/AAAAAAAAABw/1B5Y7p2C-g4/photo.jpg?sz=128", "display_name": "Dillon Davis", "link": "https://stackoverflow.com/users/6221024/dillon-davis"}, "edited": false, "score": 3, "creation_date": 1544129738, "post_id": 53644080, "comment_id": 94177347, "body": "Just wanted to add, I did some benchmarking and for base 10, and after ~ <code>n=10**1000000</code>, this function begins to outperform <code>str(n)</code>, which ultimately boils down to <code>long_to_decimal_string_internal()</code> that uses TAOCP, Knuth - Vol. 2 Sect. 4.4 Method 1b. This includes the time for <code>&quot;&quot;.join(map(str, ... ))</code>. For <code>n=10**10000000</code> it is 2x as fast as the builtin conversion. Tested on Python 3.6.4 on Windows 10."}, {"owner": {"reputation": 69, "user_id": 10719740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0857d6d51c516daa050f5fbdbc1255ac?s=128&d=identicon&r=PG&f=1", "display_name": "phdgroupA", "link": "https://stackoverflow.com/users/10719740/phdgroupa"}, "reply_to_user": {"reputation": 3898, "user_id": 6221024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JHtD0ON5o_w/AAAAAAAAAAI/AAAAAAAAABw/1B5Y7p2C-g4/photo.jpg?sz=128", "display_name": "Dillon Davis", "link": "https://stackoverflow.com/users/6221024/dillon-davis"}, "edited": false, "score": 0, "creation_date": 1544463019, "post_id": 53644080, "comment_id": 94275956, "body": "@DillonDavis: Could you please elaborate what you compared when you wrote &quot;begins to outperform str(n)&quot;? Where did numberToBase() or number_to_base() use a str(n)? Or is it a general remark. If so, yes, for huge integers len(str(int)) and str(int) is getting low."}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 69, "user_id": 10719740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0857d6d51c516daa050f5fbdbc1255ac?s=128&d=identicon&r=PG&f=1", "display_name": "phdgroupA", "link": "https://stackoverflow.com/users/10719740/phdgroupa"}, "edited": false, "score": 0, "creation_date": 1544464838, "post_id": 53644080, "comment_id": 94276778, "body": "@phdgroupA he was comparing <code>number_to_base</code> with a base of 10 followed by a conversion of the list to string with Python&#39;s <code>str(n)</code>. I just tried it myself with your 1.5 million digit integer and it was 8.5 seconds vs. 34.1 seconds, and both strings compared equal."}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 3898, "user_id": 6221024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JHtD0ON5o_w/AAAAAAAAAAI/AAAAAAAAABw/1B5Y7p2C-g4/photo.jpg?sz=128", "display_name": "Dillon Davis", "link": "https://stackoverflow.com/users/6221024/dillon-davis"}, "edited": false, "score": 0, "creation_date": 1544487638, "post_id": 53644080, "comment_id": 94285632, "body": "@DillonDavis you can speed up the conversion to string: <code>&#39;&#39;.join(&#39;0123456789&#39;[x] for x in seq)</code>. My tests with 10**1500000+1 are atypical because most of the digits are zero."}, {"owner": {"reputation": 3898, "user_id": 6221024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JHtD0ON5o_w/AAAAAAAAAAI/AAAAAAAAABw/1B5Y7p2C-g4/photo.jpg?sz=128", "display_name": "Dillon Davis", "link": "https://stackoverflow.com/users/6221024/dillon-davis"}, "edited": false, "score": 0, "creation_date": 1544491321, "post_id": 53644080, "comment_id": 94286346, "body": "@MarkRansom I actually tested mine with &#39;7**N&#39; for some N that gave a value of the same order of magnitude for that exact reason."}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "reply_to_user": {"reputation": 3898, "user_id": 6221024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JHtD0ON5o_w/AAAAAAAAAAI/AAAAAAAAABw/1B5Y7p2C-g4/photo.jpg?sz=128", "display_name": "Dillon Davis", "link": "https://stackoverflow.com/users/6221024/dillon-davis"}, "edited": false, "score": 0, "creation_date": 1544768238, "post_id": 53644080, "comment_id": 94400080, "body": "@DillonDavis it appears Python&#39;s <code>str</code> method is O(n**2), I&#39;ve both looked at the source and did some timings. I&#39;m seriously considering submitting a patch, but I don&#39;t know how hard it will be or if it&#39;s likely to be accepted."}, {"owner": {"reputation": 3898, "user_id": 6221024, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-JHtD0ON5o_w/AAAAAAAAAAI/AAAAAAAAABw/1B5Y7p2C-g4/photo.jpg?sz=128", "display_name": "Dillon Davis", "link": "https://stackoverflow.com/users/6221024/dillon-davis"}, "edited": false, "score": 0, "creation_date": 1544792594, "post_id": 53644080, "comment_id": 94411718, "body": "@MarkRansom I do think it would be worthwhile to submit a patch, or create a ticket about it at least. Beyond just being asymptotically faster, it is also a more generalizable algorithm-  the same code works for all bases, but just base 10. This would open the door for supporting other base number systems in the future."}], "tags": [], "owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "is_accepted": false, "score": 7, "last_activity_date": 1544070558, "last_edit_date": 1544070558, "creation_date": 1544066036, "answer_id": 53644080, "question_id": 53642569, "link": "https://stackoverflow.com/questions/53642569/speedily-calculate-base-3-value-of-real-huge-integer-number-with-python-3/53644080#53644080", "title": "Speedily calculate base 3 value of real huge integer number with Python 3", "body": "<p>Here's a method that expands on your <code>convsteps</code> solution by recursing with the base squaring with each call. Some extra work is required to remove leading zeros.</p>\n\n<pre><code>def number_to_base(n, b):\n    if n &lt; b:\n        return [n]\n    else:\n        digits = [d for x in number_to_base(n, b*b) for d in divmod(x, b)]\n        return digits if digits[0] else digits[1:]\n</code></pre>\n\n<p>My quick timing test shows that it's the same as your <code>step2</code> within the margin of error. But it's simpler and probably has fewer bugs.</p>\n"}], "owner": {"reputation": 69, "user_id": 10719740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0857d6d51c516daa050f5fbdbc1255ac?s=128&d=identicon&r=PG&f=1", "display_name": "phdgroupA", "link": "https://stackoverflow.com/users/10719740/phdgroupa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1544114772, "creation_date": 1544053936, "question_id": 53642569, "link": "https://stackoverflow.com/questions/53642569/speedily-calculate-base-3-value-of-real-huge-integer-number-with-python-3", "title": "Speedily calculate base 3 value of real huge integer number with Python 3", "body": "<p>We have a large number like (10**1500000)+1, and want to convert it to base 3. \nBelow is running code with the fastest way we found with normal Python (without using numpy or CAS libraries).</p>\n\n<p>How could the performance of base conversion (to base 3) be accelerated?</p>\n\n<p>We'd like to know how this could be done in both of the following ways:</p>\n\n<ol>\n<li>Using only built-in functions of Python 3 (no numpy)?</li>\n<li>Using numpy (or another CAS library) from within a normal Python 3 program?</li>\n</ol>\n\n<p>Any help is very welcome. Here is our current code:</p>\n\n<pre><code>#### --- Convert a huge integer to base 3 --- ####\n\n# Convert decimal number n to a sequence of list elements\n# with integer values in the range 0 to base-1.\n# With divmod, it's ca. 1/3 faster than using n%b and then n//=b.\ndef numberToBase(n, b):\n    digits = []\n    while n:\n        n, rem = divmod(n, b)\n        digits.append(rem)\n    return digits[::-1]\n\n# Step 2: Convert given integer to another base\n# With convsteps == 3, it's about 50-100 times faster than\n# with with convsteps == 1, where numberToBase() is called only once.\ndef step2(n, b, convsteps):\n    nList = []\n    if convsteps == 3:  # Here the conversion is done in 3 steps\n        expos = 10000, 300\n        base_a = b ** expos[0]\n        base_b = b ** expos[1]\n        nList1 = numberToBase(n, base_a)  # time killer in this part\n        nList2 = [numberToBase(ll, base_b) for ll in nList1]\n        nList3 = [numberToBase(mm, b) for ll in nList2 for mm in ll]\n        nList = [mm for ll in nList3 for mm in ll]\n    else: # Do conversion in one bulk\n        nList = numberToBase(n, b)  # that's the time killer in this part\n    return nList\n\n\nif __name__ == '__main__':\n\n    int_value = (10**1500000)+1  # sample huge numbers\n                          # expected begin: [2, 2, 0, 1, 1, 1, 1, 0, 2, 0]\n                          # expected time: 4 min with convsteps=3\n    base = 3\n\n    # Convert int_value to list of numbers of given base\n    # -- two variants of step2() using different convsteps params\n    numList = step2(int_value, base, convsteps=1)\n    print('   3-1: numList begin:', numList[:10])\n\n    # A value of '3' for the parameter \"convsteps\" makes\n    # step2() much faster than a value of '1'\n    numList = step2(int_value, base, convsteps=3)\n    print('   3-3: numList begin:', numList[:10])\n</code></pre>\n\n<p>In <a href=\"https://stackoverflow.com/questions/53530091/how-to-calculate-as-quick-as-possible-the-base-3-value-of-an-integer-which-is-gi\">How to calculate as quick as possible the base 3 value of an integer which is given as a huge sequence of decimal digits (more than one million)?</a>\nwas a similar question with some more steps before the base conversion. In this question here, we concentrate on that part, which consumed by far the major part of the time, and for which we didn't get an answer yet.</p>\n\n<p>Also in <a href=\"https://stackoverflow.com/questions/28361742/convert-a-base-10-number-to-a-base-3-number\">Convert a base 10 number to a base 3 number</a>, the performance aspect of HUGE numbers was not dealt with.</p>\n"}, {"tags": ["python", "database", "sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10752031, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5LIOl4wlIlo/AAAAAAAAAAI/AAAAAAAAAMY/rSpZga_kquQ/photo.jpg?sz=128", "display_name": "simon bonnedahl", "link": "https://stackoverflow.com/users/10752031/simon-bonnedahl"}, "edited": false, "score": 0, "creation_date": 1544086170, "post_id": 53642971, "comment_id": 94153581, "body": "Tried that one, the thing is that I need to access the column value of a specific entity, not the name/key. Its another way to iterate the column names though. Can mapper.attrs give out the column.value and can you filter the character by id?"}], "tags": [], "owner": {"reputation": 1776, "user_id": 820059, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/2rPRF.jpg?s=128&g=1", "display_name": "Ashfaque Ali Solangi", "link": "https://stackoverflow.com/users/820059/ashfaque-ali-solangi"}, "is_accepted": false, "score": 0, "last_activity_date": 1544057028, "creation_date": 1544057028, "answer_id": 53642971, "question_id": 53642549, "link": "https://stackoverflow.com/questions/53642549/sqlalchemy-can-you-get-out-a-specific-entitiys-column-value-in-one-single-quer/53642971#53642971", "title": "SQLAlchemy, Can you get out a specific entitiy&#39;s column value in one single query (using column.name)?", "body": "<p>I think you are looking for sqlalchemy columns iterate have a look at <a href=\"https://docs.sqlalchemy.org/en/latest/orm/mapping_api.html#sqlalchemy.orm.mapper.Mapper.attrs\" rel=\"nofollow noreferrer\">Mapper.attrs</a></p>\n\n<pre><code>from sqlalchemy import inspect\nmapper = inspect(Character)\nfor column in mapper.attrs:\n    print column.key\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10752031, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-5LIOl4wlIlo/AAAAAAAAAAI/AAAAAAAAAMY/rSpZga_kquQ/photo.jpg?sz=128", "display_name": "simon bonnedahl", "link": "https://stackoverflow.com/users/10752031/simon-bonnedahl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544057028, "creation_date": 1544053763, "question_id": 53642549, "link": "https://stackoverflow.com/questions/53642549/sqlalchemy-can-you-get-out-a-specific-entitiys-column-value-in-one-single-quer", "title": "SQLAlchemy, Can you get out a specific entitiy&#39;s column value in one single query (using column.name)?", "body": "<p>Im using Python 3 and SQLAlchemy and my question is if there is a way I can get out a specific entitiy's(character in my case) column value in one single query (maybe using column.name)?</p>\n\n<p>Right now there is a way for me doing this.</p>\n\n<pre><code>character = session.query(Character).filter_by(id=1).first()\nprint(character.level)\n&gt;&gt;&gt; 10\n</code></pre>\n\n<p>What I want do be able to do is something like this where I dont know which column value I want:</p>\n\n<pre><code>character = session.query(Character).filter_by(id=1).first()\nfor i, column in enumerate(character.__table__.columns):\n    if i == 3:\n        #Not sure about this query\n        someColumnValue = session.query(character).load_only(column.name)\n        # Lets say its the level column\n        someColumnValue += 1\n        session.commit()\n        #And the character.level will now be 10 + 1 stored in the database\n        print(someColumnValue)\n&gt;&gt;&gt; 11\n</code></pre>\n\n<p>Maybe there is now way to do this or maybe there is a smarter way for me to get my result, maybe iterating in another way or so.</p>\n"}, {"tags": ["python", "python-3.x", "numpy"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1544062685, "post_id": 53642542, "comment_id": 94146363, "body": "Unpacking is a basic Python syntax process.  Py3 extended the syntax from Py2.  Py3.5 generalizations: <a href=\"https://docs.python.org/3/whatsnew/3.5.html#whatsnew-pep-448\" rel=\"nofollow noreferrer\">docs.python.org/3/whatsnew/3.5.html#whatsnew-pep-448</a>"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1544062895, "post_id": 53642542, "comment_id": 94146420, "body": "Python <code>range</code> only works with integer steps. But you could easily write a list comprehension that."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1544062994, "post_id": 53642542, "comment_id": 94146441, "body": "If you are setting all <code>fr#</code> in the unpacking, why set them to <code>0</code> earlier?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1544064182, "post_id": 53642542, "comment_id": 94146734, "body": "Why use unpacking?  Why not just iterate on <code>enumerate(ret_list)</code>?  <code>print(&quot;.fr{}.{}&quot;.format(i,x))</code> for each line."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1544064645, "post_id": 53642542, "comment_id": 94146825, "body": "<code>unpacking</code> makes sense when you have a known number of distinct values with special meanings.  It shouldn&#39;t be used as alternative to list iteration.  Variables with names like &#39;$0&#39;,&#39;$1&#39;,&#39;$2&#39; belong in crude shell languages, not Python."}, {"owner": {"reputation": 2024, "user_id": 1315171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/081b87a82980b9c47ce10d65653ffe57?s=128&d=identicon&r=PG", "display_name": "Zakir", "link": "https://stackoverflow.com/users/1315171/zakir"}, "reply_to_user": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1544139484, "post_id": 53642542, "comment_id": 94180916, "body": "@hpaulj: Thanks for your response! The size of <code>ret_list</code> is dependent on <code>n</code>.. I will have no way to set the last few frequencies (if n&lt;5) to 0.."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1544144339, "post_id": 53642542, "comment_id": 94181959, "body": "I wouldn&#39;t try to do anything fancy.  There&#39;s nothing wrong with doing some padding <code>if n&lt;5:</code>  It&#39;s not going to run any slower.  And if it looks ugly, just hide it in a function."}], "owner": {"reputation": 2024, "user_id": 1315171, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/081b87a82980b9c47ce10d65653ffe57?s=128&d=identicon&r=PG", "display_name": "Zakir", "link": "https://stackoverflow.com/users/1315171/zakir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544053703, "creation_date": 1544053703, "question_id": 53642542, "link": "https://stackoverflow.com/questions/53642542/refactor-python-code-dynamic-unpacking-of-list", "title": "Refactor python code: dynamic unpacking of list", "body": "<p>I am given a frequency range <code>start</code>,<code>end</code> and an integer <code>n:1&lt;=n&lt;=5</code>. The task is to print all 5 linear-spaced mid points in a certain format (for other tools downstream to process it further .. this part is not imp here)\nIn case <code>n</code> is lesser than 5 the last frequency variables should be defaulted to <code>0</code> in the print. I have a working code given below.. I wanted to get more \"pythonic\" refactoring. Parts of the snippet that I particularly dislike:</p>\n\n<ol>\n<li>No inherent support for dynamic unpacking of list into lesser no of variables. I have used a solution from <a href=\"https://codereview.stackexchange.com/a/144396/186398\">here</a> - which is over 2 yrs old so looking for a fresh perspective</li>\n<li>I don't like having to convert np array to list .. Can np be bye-passed altogether .. is there a standard library range/linspace  equivalent?</li>\n</ol>\n\n<p>Code snippet:-</p>\n\n<pre><code>import sys\nimport numpy as np\n\nmax = 5\nn=int(sys.argv[1])\nif n&gt;max:\n  print(\"No of frequency larger than \"+ str(max) + \" ..resetting\")\n  n=max\n\nif n&lt;1:\n  print(\"No of frequency less than 1 resetting to 1\")\n  n=1\n\nfr1=0\nfr2=0\nfr3=0\nfr4=0\nfr5=0\n\nstart = 5060000\nend   = 6165000\nrange = end-start\ninc   = range/(n+1)\n\nret_list = np.arange(start+inc,end,inc).tolist()[:n]\nret_list = ret_list + [0]*(max-n)\nfr1,fr2,fr3,fr4,fr5 = ret_list\n\nprint(\".fr1.\",fr1, sep = '')\nprint(\".fr2.\",fr2, sep = '')\nprint(\".fr3.\",fr3, sep = '')\nprint(\".fr4.\",fr4, sep = '')\nprint(\".fr5.\",fr5, sep = '')\n</code></pre>\n"}, {"tags": ["python", "tkinter"], "comments": [{"owner": {"reputation": 3125, "user_id": 2878796, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8bxWv.png?s=128&g=1", "display_name": "UnholySheep", "link": "https://stackoverflow.com/users/2878796/unholysheep"}, "edited": false, "score": 2, "creation_date": 1544053687, "post_id": 53642529, "comment_id": 94144353, "body": "Don&#39;t post links to code and don&#39;t post images of code - provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> in your question"}], "answers": [{"tags": [], "owner": {"reputation": 5091, "user_id": 2077386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49bce27bde92d6ee5970ef7259c09bb3?s=128&d=identicon&r=PG", "display_name": "rrauenza", "link": "https://stackoverflow.com/users/2077386/rrauenza"}, "is_accepted": true, "score": 0, "last_activity_date": 1544055245, "last_edit_date": 1544055245, "creation_date": 1544054403, "answer_id": 53642644, "question_id": 53642529, "link": "https://stackoverflow.com/questions/53642529/python-problem-regarding-of-creation-of-objects-using-loop/53642644#53642644", "title": "python problem regarding of creation of objects using loop", "body": "<p>This is really a question about the implementation of Tkinter.</p>\n\n<p>You are correct that the GC would collect the object on the next iteration, <em>UNLESS</em> something else is also referencing that object.  My assumption without reading the Tkinter code base is that when you pass <code>win</code> to <code>Radiobutton()</code>, the object is adding itself to <code>win</code>, which now retains a reference to your object.</p>\n\n<p>This additional reference prevents the GC from collecting your object.</p>\n\n<p>The beauty of OpenSource is you can look for yourself:</p>\n\n<p><a href=\"https://github.com/python/cpython/blob/e42b705188271da108de42b55d9344642170aa2b/Lib/tkinter/__init__.py#L2285\" rel=\"nofollow noreferrer\">https://github.com/python/cpython/blob/e42b705188271da108de42b55d9344642170aa2b/Lib/tkinter/<strong>init</strong>.py#L2285</a></p>\n\n<p>The last thing <code>BaseWidget</code> does in <code>__init__</code> is the following (<code>self.master</code> is your <code>win</code> argument):</p>\n\n<pre><code>self.master.children[self._name] = self\n</code></pre>\n\n<p>This would be similar to:</p>\n\n<pre><code>foo = []\n\nfor x in range(3):\n    tmp = dict(bar=x)\n    foo.append(tmp)\n</code></pre>\n\n<p><code>tmp</code> gets reassigned, but the underlying object's reference has been added to <code>foo</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 3349090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8af04f29a983b4a70761256cc5ef938e?s=128&d=identicon&r=PG&f=1", "display_name": "user3349090", "link": "https://stackoverflow.com/users/3349090/user3349090"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 53642644, "answer_count": 1, "score": -2, "last_activity_date": 1544055245, "creation_date": 1544053614, "last_edit_date": 1544054888, "question_id": 53642529, "link": "https://stackoverflow.com/questions/53642529/python-problem-regarding-of-creation-of-objects-using-loop", "title": "python problem regarding of creation of objects using loop", "body": "<p>I am new to python and while I was studying a book named python GUI cookbook,\nI ran into a piece of code I do not fully understand: </p>\n\n<p><a href=\"https://i.stack.imgur.com/9Chir.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9Chir.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>In Line 95 to 98 the author creates a loop for making objects of radio button from Tkinter library.  </p>\n\n<p>In a previous lessons I learned about garbage collection.  I would therefore expect in the next iteration of the loop, when the radio button is replaced, that the previous button would be reclaimed by garbage collection.</p>\n\n<p>How do all three of them keep existing if they are reclaimed by garbage collection? </p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "multilabel-classification"], "owner": {"reputation": 2742, "user_id": 779837, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/660a68471be96a93c4f08be69eb01bcb?s=128&d=identicon&r=PG", "display_name": "Joey Carson", "link": "https://stackoverflow.com/users/779837/joey-carson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1544054290, "creation_date": 1544053040, "last_edit_date": 1544054290, "question_id": 53642458, "link": "https://stackoverflow.com/questions/53642458/can-i-implement-the-classifier-chains-algorithm-using-tensorflow", "title": "Can I implement the classifier-chains algorithm using TensorFlow?", "body": "<p>I'm learning about multi-label classification and want to implement the <a href=\"https://www.cs.waikato.ac.nz/~eibe/pubs/chains.pdf\" rel=\"nofollow noreferrer\">Classifier Chains</a> algorithm.  I have implemented a Binary-Relevance model using TensorFlow using ResNet-50 pretrained on ImageNet.  </p>\n\n<p>I'm interested in extending this approach to use Classifier-Chains, which concatenates each feature vector with the outputs of all previous binary classifiers and trains on that.  </p>\n\n<p>At the moment, my input feature vector shape is (?,3,224,224).  So how would I go about concatenating the outputs of the previous classifiers while maintaining a compatible shape?  I'm using a custom tf.estimator.Estimator, so \nI would need to update my input pipeline to support this as well.</p>\n\n<p>For instance, would I need to maybe flatten the input shape and append a vector representing the previous predictions of classifiers along the chain?  Does this have performance implications?  I am building on a GPU and to my knowledge, it requires channels_first shape.</p>\n\n<p>I'm sure that it's probably relevant to ask even if classifier chains are suitable for use with high dimensional data like images.</p>\n"}, {"tags": ["python", "queue", "priority-queue"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1544056025, "post_id": 53642435, "comment_id": 94144958, "body": "I think you&#39;re mixing up high and low. Also, unless you&#39;re using this for communication between threads, you should probably go with <code>heapq</code> instead of <code>PriorityQueue</code> - the <code>Queue</code> module is specifically designed for thread synchronization, and it makes a number of design decisions that are awkward or inefficient for general use."}, {"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 1, "creation_date": 1544071102, "post_id": 53642435, "comment_id": 94148275, "body": "To drop the lowest priority X tasks, you&#39;ll have to build a new priority queue with the highest priority N-X tasks. If you want to drop older tasks, you&#39;ll have to iterate over the existing priority queue, and build a new queue that excludes those old tasks."}], "owner": {"reputation": 217, "user_id": 5495698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f915ec301abeab538a262288f1b1db44?s=128&d=identicon&r=PG", "display_name": "random_dsp_guy", "link": "https://stackoverflow.com/users/5495698/random-dsp-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544069127, "creation_date": 1544052882, "last_edit_date": 1544069127, "question_id": 53642435, "link": "https://stackoverflow.com/questions/53642435/python-priorityqueue-drop-the-lowest-n-tasks", "title": "Python PriorityQueue: Drop the lowest N tasks", "body": "<p>A <a href=\"https://docs.python.org/2/library/queue.html\" rel=\"nofollow noreferrer\">PriorityQueue</a> in python allows you pop the highest priority entry first. I have a case where my queue gets filled with lower priority tasks. Once the queue reaches size N, I'd like to drop the lowest X tasks to keep my queue small. Is this possible? I'd also like to drop stale entries older than X seconds.</p>\n\n<p>I've looked at the source of /usr/lib64/python2.7/Queue.py and don't see anything like this.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1544052457, "post_id": 53642360, "comment_id": 94144019, "body": "Are you asking how to modify a list? All you&#39;ve done is print things..."}, {"owner": {"reputation": 49, "user_id": 10682175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c2005be9b484b9512f6791bd2c753fe?s=128&d=identicon&r=PG&f=1", "display_name": "Maverick ", "link": "https://stackoverflow.com/users/10682175/maverick"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1544052733, "post_id": 53642360, "comment_id": 94144114, "body": "Yes. I&#39;m trying to modify the list using a function by adding &#39;the Great&#39; to each name. Should I be doing something different than &quot;print(names + &quot; the Great&quot;) after the &#39;for&#39; loop?"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1544053085, "post_id": 53642360, "comment_id": 94144210, "body": "Yes. <code>print</code> doesn&#39;t modify anything. It simply prints a value to the standard output. Likely, your console here."}], "answers": [{"comments": [{"owner": {"reputation": 6861, "user_id": 1594286, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1c31013ccab64b0efbc9b18236d80ac1?s=128&d=identicon&r=PG", "display_name": "Shadow", "link": "https://stackoverflow.com/users/1594286/shadow"}, "edited": false, "score": 1, "creation_date": 1544052855, "post_id": 53642422, "comment_id": 94144147, "body": "Nitpick: This does not modify the list, but rather creates a new list with the expected values. If this is an assignment, this may not be an acceptable solution."}, {"owner": {"reputation": 49, "user_id": 10682175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c2005be9b484b9512f6791bd2c753fe?s=128&d=identicon&r=PG&f=1", "display_name": "Maverick ", "link": "https://stackoverflow.com/users/10682175/maverick"}, "edited": false, "score": 0, "creation_date": 1544052979, "post_id": 53642422, "comment_id": 94144183, "body": "And then what would be the argument when I call the make_great() function?"}], "tags": [], "owner": {"reputation": 1122, "user_id": 4724240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1xpq.jpg?s=128&g=1", "display_name": "Axel Puig", "link": "https://stackoverflow.com/users/4724240/axel-puig"}, "is_accepted": false, "score": -1, "last_activity_date": 1544052806, "creation_date": 1544052806, "answer_id": 53642422, "question_id": 53642360, "link": "https://stackoverflow.com/questions/53642360/python3-passing-a-list-to-a-function/53642422#53642422", "title": "Python3 - Passing a list to a function", "body": "<p>If you want the <code>make_great</code> function to return the list you want, you can do:</p>\n\n<pre><code>def make_great(names):\n    return [name + \" the Great\" for name in names]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 3, "last_activity_date": 1544052841, "creation_date": 1544052841, "answer_id": 53642427, "question_id": 53642360, "link": "https://stackoverflow.com/questions/53642360/python3-passing-a-list-to-a-function/53642427#53642427", "title": "Python3 - Passing a list to a function", "body": "<p>To modify a list in-place, you should reference each item of the list by its index:</p>\n\n<pre><code>def make_great(names):\n    for i in range(len(names)):\n        names[i] += \" the Great\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1544054087, "last_edit_date": 1544054087, "creation_date": 1544053189, "answer_id": 53642480, "question_id": 53642360, "link": "https://stackoverflow.com/questions/53642360/python3-passing-a-list-to-a-function/53642480#53642480", "title": "Python3 - Passing a list to a function", "body": "<p>It's idiomatic in Python to loop over lists with <code>enumerate()</code> when you need the index. It will give you both the value and in the index into the list so you can:</p>\n\n<pre><code>def make_great(names):\n    for i, name in enumerate(names):\n        names[i] = f'{name} the Great'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 99, "user_id": 10725940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3muAf.jpg?s=128&g=1", "display_name": "alpharoz", "link": "https://stackoverflow.com/users/10725940/alpharoz"}, "is_accepted": false, "score": 0, "last_activity_date": 1544057264, "last_edit_date": 1544057264, "creation_date": 1544056352, "answer_id": 53642870, "question_id": 53642360, "link": "https://stackoverflow.com/questions/53642360/python3-passing-a-list-to-a-function/53642870#53642870", "title": "Python3 - Passing a list to a function", "body": "<p>You could also do something like this with <code>newNames</code> defined globally:</p>\n\n<pre><code>newNames = []\ndef make_great(names):\n    for name in names:\n        name += \" the Great\"\n        newNames.append(name)\n</code></pre>\n\n<p>Then you can go ahead and print your new list by calling your function with <code>newNames</code> as your argument.</p>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 10682175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c2005be9b484b9512f6791bd2c753fe?s=128&d=identicon&r=PG&f=1", "display_name": "Maverick ", "link": "https://stackoverflow.com/users/10682175/maverick"}, "edited": false, "score": 0, "creation_date": 1544217518, "post_id": 53643010, "comment_id": 94211782, "body": "Wow! Super helpful. Thank you!"}], "tags": [], "owner": {"reputation": 1418, "user_id": 8569905, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x8uQj.jpg?s=128&g=1", "display_name": "Banghua Zhao", "link": "https://stackoverflow.com/users/8569905/banghua-zhao"}, "is_accepted": false, "score": 1, "last_activity_date": 1544057336, "creation_date": 1544057336, "answer_id": 53643010, "question_id": 53642360, "link": "https://stackoverflow.com/questions/53642360/python3-passing-a-list-to-a-function/53643010#53643010", "title": "Python3 - Passing a list to a function", "body": "<p>Here is the method in one line. The basic idea is to use list comprehension and modify all the elements of the list by slicing <code>[:]</code>. </p>\n\n<pre><code>def make_great(names):\n    \"\"\"Adding 'the Great' to each magician\"\"\"\n    names[:] = [name + ' the Great' for name in names]\n</code></pre>\n\n<p>The <code>show_magicians</code> function is to just print <code>magicians</code> since <code>magicians</code> variable is in the global scope.</p>\n\n<pre><code>def show_magicians():\n    print(magicians)\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>&gt;&gt;&gt; make_great(magicians)\n&gt;&gt;&gt; show_magicians()\n['larry the Great', 'mo the Great', 'curly the Great', 'nate the Great']\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 10682175, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c2005be9b484b9512f6791bd2c753fe?s=128&d=identicon&r=PG&f=1", "display_name": "Maverick ", "link": "https://stackoverflow.com/users/10682175/maverick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2193, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1544057336, "creation_date": 1544052392, "last_edit_date": 1544052725, "question_id": 53642360, "link": "https://stackoverflow.com/questions/53642360/python3-passing-a-list-to-a-function", "title": "Python3 - Passing a list to a function", "body": "<p>In Python 3, I'm currently trying to modify a list using a function. (By the way, VERY new to Python :) )  </p>\n\n<p>I'll show the directions for the problem, just as reference. </p>\n\n<p>\"Write a function called make_great() that modifies the list of magicians by adding the phrase 'the Great' to each magician's name. Call show_magicians() to see that the list has actually been modified.\"</p>\n\n<pre><code>magicians = ['larry', 'mo', 'curly', 'nate']\n\ndef printing_magicians(names):\n    \"\"\"Printing the magicians names\"\"\"\n    for name in names:\n        print(name.title())\n\nprinting_magicians(magicians)\n\ndef make_great(names):\n    \"\"\"Adding 'the Great' to each magician\"\"\"\n    for name in names:\n        print(names + \" the Great\")\n</code></pre>\n\n<p>I'm not sure where to go from here. I don't understand what argument to call for the make_great() function, and then I don't understand how to apply a show_magicians() function to see the list that has been modified. Any help would be awesome! Thanks in advance. </p>\n"}, {"tags": ["python", "list", "dictionary"], "answers": [{"tags": [], "owner": {"reputation": 1122, "user_id": 4724240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1xpq.jpg?s=128&g=1", "display_name": "Axel Puig", "link": "https://stackoverflow.com/users/4724240/axel-puig"}, "is_accepted": true, "score": 2, "last_activity_date": 1544052498, "creation_date": 1544052498, "answer_id": 53642378, "question_id": 53642345, "link": "https://stackoverflow.com/questions/53642345/how-do-you-find-which-list-values-in-a-dictionary-has-the-most-elements-in-pytho/53642378#53642378", "title": "How do you find which list values in a dictionary has the most elements in python?", "body": "<p>You can use the <code>max</code> function, and use the <code>key</code> argument to extract the value interesting you for the maximum:</p>\n\n<pre><code>max(dict.items(), key=lambda item: len(item[1][1]))\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10752032, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4V7yo.png?s=128&g=1", "display_name": "queen of hearts", "link": "https://stackoverflow.com/users/10752032/queen-of-hearts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 53642378, "answer_count": 1, "score": 1, "last_activity_date": 1544052498, "creation_date": 1544052280, "question_id": 53642345, "link": "https://stackoverflow.com/questions/53642345/how-do-you-find-which-list-values-in-a-dictionary-has-the-most-elements-in-pytho", "title": "How do you find which list values in a dictionary has the most elements in python?", "body": "<p>So say there are list values in the second values of a dictionary: Dict[int, Tuple[int, List[int]]]. A list can have different elements, but how do I know which list has the most elements? I know you'll need to loop through the keys of the dictionary so that looks like:\nfor k in dictionary:</p>\n\n<p>but then what do you do? I know I will also need a variable to count the number of elements for each list, so that looks something like: n = len(dictionary[k][1])</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 1, "creation_date": 1544052512, "post_id": 53642339, "comment_id": 94144039, "body": "For starters, move the <code>main</code> function to the end of the script. You&#39;re calling a function which is only declared later. <code>php</code> let you do that, but not <code>python</code>."}], "answers": [{"tags": [], "owner": {"reputation": 951, "user_id": 249882, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/14613d036fbc7e7e8deee43c58b0dfcb?s=128&d=identicon&r=PG", "display_name": "Ice Phoenix", "link": "https://stackoverflow.com/users/249882/ice-phoenix"}, "is_accepted": true, "score": 2, "last_activity_date": 1559499766, "last_edit_date": 1559499766, "creation_date": 1544052410, "answer_id": 53642367, "question_id": 53642339, "link": "https://stackoverflow.com/questions/53642339/program-to-calculate-and-compare-the-area-of-two-rectangles/53642367#53642367", "title": "Program to calculate and compare the area of two rectangles", "body": "<p>You're calling a function called <code>compute_area</code> but you defined the function as <code>compute_Area()</code>.</p>\n\n<p>Also if you're passing in <code>length1</code> and <code>width1</code> into the function, you need to declare in your function declaration that you're passing in 2 variables.</p>\n"}, {"tags": [], "owner": {"reputation": 518, "user_id": 7268121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c558b80efdf5e3f18fb0719f66726be?s=128&d=identicon&r=PG&f=1", "display_name": "sarbot", "link": "https://stackoverflow.com/users/7268121/sarbot"}, "is_accepted": false, "score": 1, "last_activity_date": 1544054999, "creation_date": 1544054999, "answer_id": 53642710, "question_id": 53642339, "link": "https://stackoverflow.com/questions/53642339/program-to-calculate-and-compare-the-area-of-two-rectangles/53642710#53642710", "title": "Program to calculate and compare the area of two rectangles", "body": "<p>Not an answer to your question but a hint for lazy people ;)\nOften if you have to write the exact same line many times, it can be done simpler..</p>\n\n<p>instead of:</p>\n\n<pre><code>def comparison_area():\n    if area1 &gt; area2:\n        print()\n        print('The area of rectangle one is: ', area1)\n        print('The area of rectangle two is: ', area2)\n        print('Rectangle one\\'s area is greater.')\n    elif area1 &lt; area2:\n        print()\n        print('The area of rectangle one is: ', area1)\n        print('The area of rectangle two is: ', area2)\n        print('Rectangle two\\'s area is greater.')\n    elif area1 == area2:\n        print()\n        print('The area of rectangle one is: ', area1)\n        print('The area of rectangle two is: ', area2)\n        print('Rectangle\\'s areas are equal.')\n</code></pre>\n\n<p>you could also just write:</p>\n\n<pre><code>def comparison_area():\n    print()\n    print('The area of rectangle one is: ', area1)\n    print('The area of rectangle two is: ', area2)\n    if area1 &gt; area2:\n        print('Rectangle one\\'s area is greater.')\n    elif area1 &lt; area2:\n        print('Rectangle two\\'s area is greater.')\n    elif area1 == area2:\n        print('Rectangle\\'s areas are equal.')\n</code></pre>\n\n<p>The second function is doing exactly the same.</p>\n"}], "owner": {"reputation": 35, "user_id": 10752025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3567cc9c72ea37e2d0f6ff9a8f281895?s=128&d=identicon&r=PG&f=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/10752025/martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1104, "favorite_count": 1, "accepted_answer_id": 53642367, "answer_count": 2, "score": 0, "last_activity_date": 1559499766, "creation_date": 1544052226, "question_id": 53642339, "link": "https://stackoverflow.com/questions/53642339/program-to-calculate-and-compare-the-area-of-two-rectangles", "title": "Program to calculate and compare the area of two rectangles", "body": "<p>I have to write a program for school and so far I have the code below but when I try to run it it says there was an error and that compute_Area was not defined. </p>\n\n<pre><code># This program will calculate and compare the areas of\n# two rectangles and display which is the greater area\ndef main():\n    length1 = int(input('Length of rectangle one: '))\n    width1 = int(input('Width of rectangle one: '))\n    area1 = compute_area(length1, width1)\n    length2 = int(input('Length of rectangle two: '))\n    width2 = int(input('Width of rectangle two: '))\n    area2 = compute_Area(length2, width2)\n    comparison_Area(area1, area2)\nmain()\n\ndef compute_Area():\n    area = length * width\n    return area\n\ndef comparison_Area():\n    if area1 &gt; area2:\n        print()\n        print('The area of rectangle one is: ', area1)\n        print('The area of rectangle two is: ', area2)\n        print('Rectangle one\\'s area is greater.')\n    elif area1 &lt; area2:\n        print()\n        print('The area of rectangle one is: ', area1)\n        print('The area of rectangle two is: ', area2)\n        print('Rectangle two\\'s area is greater.')\n    elif area1 == area2:\n        print()\n        print('The area of rectangle one is: ', area1)\n        print('The area of rectangle two is: ', area2)\n        print('Rectangle\\'s areas are equal.')\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1544052371, "post_id": 53642328, "comment_id": 94143991, "body": "What are the values of dst, mac and src?"}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1544053041, "post_id": 53642328, "comment_id": 94144197, "body": "To fix what? I don&#39;t see any error."}, {"owner": {"reputation": 105, "user_id": 9817511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RPBMm.jpg?s=128&g=1", "display_name": "Tiffany", "link": "https://stackoverflow.com/users/9817511/tiffany"}, "reply_to_user": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1544053501, "post_id": 53642328, "comment_id": 94144312, "body": "@DanielMesejo I get the value from sniffing the packet using scapy and i put it the ip dst,  mac dst and ip src to the list"}, {"owner": {"reputation": 105, "user_id": 9817511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RPBMm.jpg?s=128&g=1", "display_name": "Tiffany", "link": "https://stackoverflow.com/users/9817511/tiffany"}, "reply_to_user": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1544053561, "post_id": 53642328, "comment_id": 94144320, "body": "@PedroLobito yes there is no error but the output is not like what i want.  Thats why im asking"}], "answers": [{"tags": [], "owner": {"reputation": 6400, "user_id": 786593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02ca3156e5785370494410fc80f28a79?s=128&d=identicon&r=PG", "display_name": "wp-overwatch.com", "link": "https://stackoverflow.com/users/786593/wp-overwatch-com"}, "is_accepted": true, "score": 0, "last_activity_date": 1544054315, "last_edit_date": 1544054315, "creation_date": 1544052914, "answer_id": 53642440, "question_id": 53642328, "link": "https://stackoverflow.com/questions/53642328/add-a-new-item-to-a-list-of-dictionaries-and-increase-the-item-value-for-duplica/53642440#53642440", "title": "Add a new item to a list of dictionaries and increase the item value for duplicate items", "body": "<p>Instead of looping over all of the items in the dictionary each time you get a new packet, you can use a dictionary to keep track of the count of each destination + source + mac.</p>\n\n<pre><code>counts = {}\n</code></pre>\n\n<p>And then whenever you get a new item, you would simply need to increment the corresponding value in the counts dictionary, and you'll have your item's count.</p>\n\n<pre><code>dst_src_mac = item[\"ipdst\"] + item[\"macdst\"] + item[\"ipsrc\"]\nif (dst_src_mac in counts):\n    counts[dst_src_mac] += 1\nelse:\n    counts[dst_src_mac] = 1\n\nitem['count'] = counts[dst_src_mac]\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 9817511, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RPBMm.jpg?s=128&g=1", "display_name": "Tiffany", "link": "https://stackoverflow.com/users/9817511/tiffany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 53642440, "answer_count": 1, "score": 0, "last_activity_date": 1544055587, "creation_date": 1544052194, "last_edit_date": 1544055587, "question_id": 53642328, "link": "https://stackoverflow.com/questions/53642328/add-a-new-item-to-a-list-of-dictionaries-and-increase-the-item-value-for-duplica", "title": "Add a new item to a list of dictionaries and increase the item value for duplicate items", "body": "<p>I want to count ARP reply packet using python.\nAssume that I have the list</p>\n\n<p><code>list=[{\"ipdst\":\"192.168.1.1\",\"macdst\":\"aa:aa:aa\",\"ipsrc\":\"192.168.1.2\",count:1},\n{\"ipdst\":\"192.168.1.4\",\"macdst\":\"cc:cc:cc\",\"ipsrc\":\"192.168.1.5\",count:1}</code></p>\n\n<p>and I want to add an item which has a different ipdst, macdst, and ipsrc in my list (for a new packet that has not been recorded in the list). If there is a packet with the same ipdst, macdst and ipsrc in the list I want to add count +1 because I want to count how many packets from the destination is sent to the source.\nI've tried </p>\n\n<pre><code>for item in list \n    if item[\"ipdst\"]==dst and item[\"macdst\"]==mac and item[\"ipsrc\"]=src:\n        item[\"count\"]+=1\n    else \n        list.append([\"ipdst\"]==dst,[\"macdst\"]==mac,[\"ipsrc\"]==src\n</code></pre>\n\n<p>but the output is</p>\n\n<pre><code>    [{\"ipdst\":\"192.168.1.1\",\"macdst\":\"aa:aa:aa\",\"ipsrc\":\"192.168.1.2\",count:1},\n{\"ipdst\":\"192.168.1.4\",\"macdst\":\"cc:cc:cc\",\"ipsrc\":\"192.168.1.5\",count:1},{\"ipdst\":\"192.168.1.1\",\"macdst\":\"aa:aa:aa\",\"ipsrc\":\"192.168.1.2\",count:2},{\"ipdst\":\"192.168.1.4\",\"macdst\":\"cc:cc:cc\",\"ipsrc\":\"192.168.1.5\",count:1}]\n</code></pre>\n\n<p>I expected the output to be</p>\n\n<pre><code>{\"ipdst\":\"192.168.1.4\",\"macdst\":\"cc:cc:cc\",\"ipsrc\":\"192.168.1.5\",count:2\"}\n</code></pre>\n\n<p>(for a destination that sent 2 packet to the source)</p>\n\n<p>How can I do this?</p>\n"}, {"tags": ["python", "json", "pandas", "dataframe", "grafana"], "comments": [{"owner": {"reputation": 518, "user_id": 7268121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c558b80efdf5e3f18fb0719f66726be?s=128&d=identicon&r=PG&f=1", "display_name": "sarbot", "link": "https://stackoverflow.com/users/7268121/sarbot"}, "edited": false, "score": 2, "creation_date": 1544053997, "post_id": 53642302, "comment_id": 94144443, "body": "The data variable seems not to be valid json or python dict. Did you mean  <code>data = [ {&quot;name&quot;: &quot;john&quot;, &quot;class&quot;: &quot;fifth&quot;},  {&quot;name&quot;: &quot;emma&quot;,&quot;class&quot;:&quot;sixth&quot;}]</code>"}, {"owner": {"reputation": 19, "user_id": 10649121, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-etHOGg1pakc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBfUOM70ggjST3Ei9Zqf6bykYEjFw/mo/photo.jpg?sz=128", "display_name": "rohit rocckz", "link": "https://stackoverflow.com/users/10649121/rohit-rocckz"}, "reply_to_user": {"reputation": 518, "user_id": 7268121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c558b80efdf5e3f18fb0719f66726be?s=128&d=identicon&r=PG&f=1", "display_name": "sarbot", "link": "https://stackoverflow.com/users/7268121/sarbot"}, "edited": false, "score": 1, "creation_date": 1544055096, "post_id": 53642302, "comment_id": 94144735, "body": "@sarbot there is no comma after first JSON object. how do make these multiple json&#39;s into one json and make a dataframe out of it as keys as columns and values as rows?"}, {"owner": {"reputation": 518, "user_id": 7268121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c558b80efdf5e3f18fb0719f66726be?s=128&d=identicon&r=PG&f=1", "display_name": "sarbot", "link": "https://stackoverflow.com/users/7268121/sarbot"}, "edited": false, "score": 1, "creation_date": 1544055245, "post_id": 53642302, "comment_id": 94144772, "body": "I think there should be.. I&#39;m not an json expert but it&#39;s no valid python (and i think also no valid json). Where do you got the json data from? Do you want to load many json objects or files? Than I would add a code example to my answer"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 10649121, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-etHOGg1pakc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBfUOM70ggjST3Ei9Zqf6bykYEjFw/mo/photo.jpg?sz=128", "display_name": "rohit rocckz", "link": "https://stackoverflow.com/users/10649121/rohit-rocckz"}, "edited": false, "score": 0, "creation_date": 1544055391, "post_id": 53642553, "comment_id": 94144814, "body": "in your code the json is ina structure but in , my case i have multiple json objetcts. I dont have comma after each json object"}, {"owner": {"reputation": 518, "user_id": 7268121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c558b80efdf5e3f18fb0719f66726be?s=128&d=identicon&r=PG&f=1", "display_name": "sarbot", "link": "https://stackoverflow.com/users/7268121/sarbot"}, "reply_to_user": {"reputation": 19, "user_id": 10649121, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-etHOGg1pakc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBfUOM70ggjST3Ei9Zqf6bykYEjFw/mo/photo.jpg?sz=128", "display_name": "rohit rocckz", "link": "https://stackoverflow.com/users/10649121/rohit-rocckz"}, "edited": false, "score": 1, "creation_date": 1544055832, "post_id": 53642553, "comment_id": 94144917, "body": "I&#39;ve never used grafana, do you read the data as string or from file. Are the objects seperated by linebreaks? than you could simply use <code>data.split(&#39;\\n&#39;)</code> or <code>readlines()</code> for files..."}, {"owner": {"reputation": 19, "user_id": 10649121, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-etHOGg1pakc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBfUOM70ggjST3Ei9Zqf6bykYEjFw/mo/photo.jpg?sz=128", "display_name": "rohit rocckz", "link": "https://stackoverflow.com/users/10649121/rohit-rocckz"}, "edited": false, "score": 0, "creation_date": 1544056111, "post_id": 53642553, "comment_id": 94144975, "body": "the grafana format should be like this                                                                                    <a href=\"https://grafana.com/plugins/grafana-simple-json-datasource\" rel=\"nofollow noreferrer\">grafana.com/plugins/grafana-simple-json-datasource</a> check for  json to table format in that link"}, {"owner": {"reputation": 518, "user_id": 7268121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c558b80efdf5e3f18fb0719f66726be?s=128&d=identicon&r=PG&f=1", "display_name": "sarbot", "link": "https://stackoverflow.com/users/7268121/sarbot"}, "reply_to_user": {"reputation": 19, "user_id": 10649121, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-etHOGg1pakc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBfUOM70ggjST3Ei9Zqf6bykYEjFw/mo/photo.jpg?sz=128", "display_name": "rohit rocckz", "link": "https://stackoverflow.com/users/10649121/rohit-rocckz"}, "edited": false, "score": 0, "creation_date": 1544056680, "post_id": 53642553, "comment_id": 94145100, "body": "ok, so you have way more data than given in your question.. I think I got your &quot;problem&quot; now ;)"}, {"owner": {"reputation": 518, "user_id": 7268121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c558b80efdf5e3f18fb0719f66726be?s=128&d=identicon&r=PG&f=1", "display_name": "sarbot", "link": "https://stackoverflow.com/users/7268121/sarbot"}, "reply_to_user": {"reputation": 19, "user_id": 10649121, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-etHOGg1pakc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBfUOM70ggjST3Ei9Zqf6bykYEjFw/mo/photo.jpg?sz=128", "display_name": "rohit rocckz", "link": "https://stackoverflow.com/users/10649121/rohit-rocckz"}, "edited": false, "score": 0, "creation_date": 1544057385, "post_id": 53642553, "comment_id": 94145279, "body": "updated the answer again, if this is not what you want, you need to give me a full example of the input data and the final dataframe (table) you want to create."}], "tags": [], "owner": {"reputation": 518, "user_id": 7268121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c558b80efdf5e3f18fb0719f66726be?s=128&d=identicon&r=PG&f=1", "display_name": "sarbot", "link": "https://stackoverflow.com/users/7268121/sarbot"}, "is_accepted": false, "score": 1, "last_activity_date": 1544057265, "last_edit_date": 1544057265, "creation_date": 1544053827, "answer_id": 53642553, "question_id": 53642302, "link": "https://stackoverflow.com/questions/53642302/how-to-write-a-grafana-simple-json-to-table-query-from-a-json-in-python/53642553#53642553", "title": "how to write a grafana simple json to table query from a json in python", "body": "<p>You could use the <code>pandas.DataFrame.from_dict(data)</code> method. <a href=\"https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.from_dict.html\" rel=\"nofollow noreferrer\">Docs</a></p>\n\n<p>An example could look like this:</p>\n\n<pre><code>import pandas as pd\ndata = [{\"name\":\"john\",\"class\":\"fifth\"},\n       {\"name\":\"emma\",\"class\":\"sixth\"}]\ndf = pd.DataFrame.from_dict(data)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>   class  name\n0  fifth  john\n1  sixth  emma\n</code></pre>\n\n<p>In this case data is already a list of dictionaries (I assume this is what you mean in your question). If you have the data in JSON-Strings/Files you can use <code>json.loads(data_string)</code> / <code>json.load(data_file)</code> from the <a href=\"https://docs.python.org/2/library/json.html\" rel=\"nofollow noreferrer\">json module</a>.</p>\n\n<h2>Update</h2>\n\n<p>For the grafana table data structure like this:</p>\n\n<pre><code>data = [\n  {\n    \"columns\":[\n      {\"text\":\"Time\",\"type\":\"time\"},\n      {\"text\":\"Country\",\"type\":\"string\"},\n      {\"text\":\"Number\",\"type\":\"number\"}\n    ],\n    \"rows\":[\n      [1234567,\"SE\",123],\n      [1234567,\"DE\",231],\n      [1234567,\"US\",321]\n    ],\n    \"type\":\"table\"\n  }\n]\n</code></pre>\n\n<p>A pandas dataframe can be created:</p>\n\n<pre><code>keys = [d['text'] for d in data[0]['columns']]\npd.DataFrame(data=data[0]['rows'], columns=keys)\n</code></pre>\n\n<p>For a result like:</p>\n\n<pre><code>   Time     Country  Number\n0  1234567  \"SE\"     123\n1  1234567  \"DE\"     231\n2  1234567  \"US\"     312\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10649121, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-etHOGg1pakc/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbBfUOM70ggjST3Ei9Zqf6bykYEjFw/mo/photo.jpg?sz=128", "display_name": "rohit rocckz", "link": "https://stackoverflow.com/users/10649121/rohit-rocckz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2680, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1544057606, "creation_date": 1544052065, "question_id": 53642302, "link": "https://stackoverflow.com/questions/53642302/how-to-write-a-grafana-simple-json-to-table-query-from-a-json-in-python", "title": "how to write a grafana simple json to table query from a json in python", "body": "<p>how to convert that data(json) to pandas Dataframe so that it can populate the \"keys\" as columns and \"values\" as rows in a grafana simple json to table dynamically. actually, it's not in a perfect array format how do I manipulate it to work as data frame? help would be greatly appreciated. </p>\n\n<pre><code>data = {\"name\":\"john\",\"class\":\"fifth\"}\n       {\"name\":\"emma\",\"class\":\"sixth\"}\n</code></pre>\n\n<p>I want to populate keys as columns and rows as values dynamically no matter how many json's we have.</p>\n"}, {"tags": ["python", "string", "nameerror"], "answers": [{"tags": [], "owner": {"reputation": 5405, "user_id": 2400117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mFJ22.jpg?s=128&g=1", "display_name": "Diogo Rocha", "link": "https://stackoverflow.com/users/2400117/diogo-rocha"}, "is_accepted": false, "score": 0, "last_activity_date": 1544052457, "creation_date": 1544052457, "answer_id": 53642374, "question_id": 53642299, "link": "https://stackoverflow.com/questions/53642299/difference-between-nameerror-and-syntaxerror/53642374#53642374", "title": "Difference between NameError and SyntaxError", "body": "<p>You could find all information <a href=\"https://docs.python.org/2/library/exceptions.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<blockquote>\n  <p><em>exception</em> <strong>SyntaxError</strong>\n  Raised when the parser encounters a syntax error. This may occur in an import statement, in an exec statement, in a call to the built-in function <code>eval()</code> or <code>input()</code>, or when reading the initial script or standard input (also interactively).\n  Instances of this class have attributes <code>filename</code>, <code>lineno</code>, <code>offset</code> and <code>text</code> for easier access to the details. <code>str()</code> of the exception instance returns only the message.</p>\n  \n  <p><em>exception</em> <strong>NameError</strong>\n  Raised when a local or global name is not found. This applies only to unqualified names. The associated value is an error message that includes the name that could not be found.</p>\n</blockquote>\n"}], "owner": {"reputation": 11, "user_id": 10714265, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OG2cwXmVrKQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-h9Xkg330J2AShBveH_MNumvHWVDw/mo/photo.jpg?sz=128", "display_name": "Indominus", "link": "https://stackoverflow.com/users/10714265/indominus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1436, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1544052457, "creation_date": 1544052059, "question_id": 53642299, "link": "https://stackoverflow.com/questions/53642299/difference-between-nameerror-and-syntaxerror", "title": "Difference between NameError and SyntaxError", "body": "<p>I am aware that strings have to be surrounded by quotes (\" \") for a variable to be defined or else a SyntaxError will occur.</p>\n\n<p>Therefore, I am a little bit confused on what the difference is between a SyntaxError and NameError when it comes to variables not being defined.</p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["python", "ctypes", "pywin32"], "comments": [{"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1544053184, "post_id": 53642294, "comment_id": 94144231, "body": "The windows service may not have the appropriate permissions to interact with desktop."}, {"owner": {"reputation": 364, "user_id": 4047271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2I4JJ.jpg?s=128&g=1", "display_name": "Freddy Garcia Cala", "link": "https://stackoverflow.com/users/4047271/freddy-garcia-cala"}, "reply_to_user": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1544056859, "post_id": 53642294, "comment_id": 94145135, "body": "I already tried setting a domain administrator to run the service, but didn&#39;t work"}, {"owner": {"reputation": 28355, "user_id": 4788546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2jWn.jpg?s=128&g=1", "display_name": "CristiFati", "link": "https://stackoverflow.com/users/4788546/cristifati"}, "edited": false, "score": 1, "creation_date": 1544169549, "post_id": 53642294, "comment_id": 94188488, "body": "You don&#39;t check function return values. That leads to code that&#39;s likely not to work &quot;without reason&quot;. Have you considered <i>GetLastError</i> to find out more about the error?"}], "answers": [{"tags": [], "owner": {"reputation": 364, "user_id": 4047271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2I4JJ.jpg?s=128&g=1", "display_name": "Freddy Garcia Cala", "link": "https://stackoverflow.com/users/4047271/freddy-garcia-cala"}, "is_accepted": true, "score": 1, "last_activity_date": 1544401235, "creation_date": 1544401235, "answer_id": 53698044, "question_id": 53642294, "link": "https://stackoverflow.com/questions/53642294/user32-switchdesktop-only-works-in-debug-mode-python-windows-service/53698044#53698044", "title": "user32.SwitchDesktop only works in debug mode - Python Windows service", "body": "<p>I added the error check and noticed an <code>Access denied</code> error. The error only occurred when I tried to <code>OpenDesktop</code> with the permission <code>DESKTOP_SWITCHDESKTOP</code>. <a href=\"https://stackoverflow.com/a/4713694/4047271\">Turns out</a> a service can't interact with the user's desktop:</p>\n\n<blockquote>\n  <p>... Services now run their own session with their own workstation and desktop ... Getting access to the user desktop is no longer possible. It is a security feature, it prevents shatter attacks.</p>\n</blockquote>\n\n<p>So I turned my script to a Windows application with <a href=\"http://www.pyinstaller.org/\" rel=\"nofollow noreferrer\">Pyinstaller</a> and added the shortcut in the Startup folder, now I have the same functionality without using a Windows service</p>\n"}], "owner": {"reputation": 364, "user_id": 4047271, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2I4JJ.jpg?s=128&g=1", "display_name": "Freddy Garcia Cala", "link": "https://stackoverflow.com/users/4047271/freddy-garcia-cala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 53698044, "answer_count": 1, "score": 1, "last_activity_date": 1544401235, "creation_date": 1544052017, "last_edit_date": 1544052669, "question_id": 53642294, "link": "https://stackoverflow.com/questions/53642294/user32-switchdesktop-only-works-in-debug-mode-python-windows-service", "title": "user32.SwitchDesktop only works in debug mode - Python Windows service", "body": "<p>I'm trying to create a Windows Service (from a Python script) that logs everytime the user locks and unlocks the workstation.</p>\n\n<p>When I run the service in debug mode with <code>python WinLockUnlock.py debug</code> the service works as expected.</p>\n\n<p>But if I start the service with <code>python WinLockUnlock.py start</code> The <code>result</code> variable (<code>SwitchDesktop(hDesktop)</code>) is always 0. The problem is only with the user32 functions, the service writes to the log file without any problem.</p>\n\n<p>So, why the functions of user32 only work in debug mode?</p>\n\n<p>(I already tried running the service with an administrator account but that didn't work)</p>\n\n<p>The code in <strong><code>WinLockUnlock.py</code>:</strong></p>\n\n<pre><code>import time\nfrom ctypes import WinDLL\nfrom SMWinService import SMWinService\n\n\nclass WinLockUnlock(SMWinService):\n    _svc_name_ = 'LockUnlock'\n    _svc_display_name_ = 'Lock Unlock Script'\n    _svc_description_ = 'Script que registra cuando se bloquea/desbloquea la sesi\u00f3n del usuario'\n\n    def start(self):\n        self.isrunning = True\n        self.session_status = True\n        self.writemsg('Service started')\n\n    def stop(self):\n        self.isrunning = False\n        self.writemsg('Service stopped')\n\n    def main(self):\n        user32 = WinDLL('user32', use_last_error=True)\n        OpenDesktop = user32.OpenDesktopW\n        SwitchDesktop = user32.SwitchDesktop\n        DESKTOP_SWITCHDESKTOP = 0x0100\n        while self.isrunning:\n            hDesktop = OpenDesktop('default', 0, False, DESKTOP_SWITCHDESKTOP)\n            result = SwitchDesktop(hDesktop)\n            self.writemsg('Test Result: {0}'.format(result))\n            if result:\n                if self.session_status == False:\n                    self.session_status = True\n                    self.writemsg('----------UNLOCKED----------')\n            else:\n                if self.session_status == True:\n                    self.session_status = False\n                    self.writemsg('----------LOCKED----------')\n            time.sleep(2)\n\n    def writemsg(self, msg):\n        _date = time.strftime('%Y-%m-%d')\n        _time = time.strftime('%H:%M:%S')\n        filename = 'D:/Temp/TestPython/pyserv{0}.txt'.format(_date)\n        with open(filename, 'a', newline='', encoding='utf-8') as file:\n            file.write('{0} {1}: {2}\\r\\n'.format(_date, _time, msg))\n\n\nif __name__ == '__main__':\n    WinLockUnlock.parse_command_line()\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 1067, "user_id": 311381, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6cb33c48bb858ba027b3450b8bc07bb1?s=128&d=identicon&r=PG", "display_name": "dhasenan", "link": "https://stackoverflow.com/users/311381/dhasenan"}, "edited": false, "score": 0, "creation_date": 1544053176, "post_id": 53642258, "comment_id": 94144229, "body": "Probably shouldn&#39;t have the #d tag on this question? It&#39;s about Python and not about the D programming language."}], "answers": [{"comments": [{"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1544052267, "post_id": 53642326, "comment_id": 94143970, "body": "The <code>.keys()</code> is not needed, looping through a <code>dict</code> will loop through the keys on its own, so do this <code>for key in Ability_Score_Modifiers: #etc...</code>"}, {"owner": {"reputation": 13, "user_id": 10752007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc3212c4d05b5fa6cef8b06896e4e399?s=128&d=identicon&r=PG&f=1", "display_name": "3d6-dm", "link": "https://stackoverflow.com/users/10752007/3d6-dm"}, "edited": false, "score": 1, "creation_date": 1544052475, "post_id": 53642326, "comment_id": 94144023, "body": "No dice thus far, but it very well could be a problem with running this on pythonfiddle.com. Might be a few days before I can test this in IDLE proper."}, {"owner": {"reputation": 663, "user_id": 7222499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222af46733a9cd6067d60ab81f304f3?s=128&d=identicon&r=PG&f=1", "display_name": "KuboMD", "link": "https://stackoverflow.com/users/7222499/kubomd"}, "edited": false, "score": 0, "creation_date": 1544052521, "post_id": 53642326, "comment_id": 94144043, "body": "Give me a moment, I&#39;ll test on my machine and report back."}, {"owner": {"reputation": 13, "user_id": 10752007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc3212c4d05b5fa6cef8b06896e4e399?s=128&d=identicon&r=PG&f=1", "display_name": "3d6-dm", "link": "https://stackoverflow.com/users/10752007/3d6-dm"}, "edited": false, "score": 0, "creation_date": 1544052725, "post_id": 53642326, "comment_id": 94144110, "body": "@ Ethan - It&#39;s a Debug test, if it can find it I want a visual. I will append the loop to print &quot;Modifier : (value)&quot; once I know the code works."}, {"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "reply_to_user": {"reputation": 13, "user_id": 10752007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc3212c4d05b5fa6cef8b06896e4e399?s=128&d=identicon&r=PG&f=1", "display_name": "3d6-dm", "link": "https://stackoverflow.com/users/10752007/3d6-dm"}, "edited": false, "score": 0, "creation_date": 1544052812, "post_id": 53642326, "comment_id": 94144138, "body": "@3d6-dm I am not sure that I understand. My changes make the code work <b>the same</b>."}, {"owner": {"reputation": 663, "user_id": 7222499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222af46733a9cd6067d60ab81f304f3?s=128&d=identicon&r=PG&f=1", "display_name": "KuboMD", "link": "https://stackoverflow.com/users/7222499/kubomd"}, "reply_to_user": {"reputation": 13, "user_id": 10752007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc3212c4d05b5fa6cef8b06896e4e399?s=128&d=identicon&r=PG&f=1", "display_name": "3d6-dm", "link": "https://stackoverflow.com/users/10752007/3d6-dm"}, "edited": false, "score": 0, "creation_date": 1544053626, "post_id": 53642326, "comment_id": 94144333, "body": "@3d6-dm Take a look :)"}, {"owner": {"reputation": 13, "user_id": 10752007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc3212c4d05b5fa6cef8b06896e4e399?s=128&d=identicon&r=PG&f=1", "display_name": "3d6-dm", "link": "https://stackoverflow.com/users/10752007/3d6-dm"}, "reply_to_user": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1544054810, "post_id": 53642326, "comment_id": 94144651, "body": "@EthanK I think pythonfiddle.com doesn&#39;t like this script confined inside a def. I was able to return the same variables if this code is alone, but not if I add it into a def. Thank you for pointing me in the right direction though."}, {"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "reply_to_user": {"reputation": 13, "user_id": 10752007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc3212c4d05b5fa6cef8b06896e4e399?s=128&d=identicon&r=PG&f=1", "display_name": "3d6-dm", "link": "https://stackoverflow.com/users/10752007/3d6-dm"}, "edited": false, "score": 0, "creation_date": 1544055513, "post_id": 53642326, "comment_id": 94144852, "body": "@3d6-dm No, <code>def</code> statements work differently because of <a href=\"https://stackoverflow.com/questions/291978/short-description-of-the-scoping-rules\">python scopes</a>."}, {"owner": {"reputation": 13, "user_id": 10752007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc3212c4d05b5fa6cef8b06896e4e399?s=128&d=identicon&r=PG&f=1", "display_name": "3d6-dm", "link": "https://stackoverflow.com/users/10752007/3d6-dm"}, "edited": false, "score": 0, "creation_date": 1544055988, "post_id": 53642326, "comment_id": 94144947, "body": "Update: I switch to prel.it and got it to work. Thank you again."}, {"owner": {"reputation": 13, "user_id": 10752007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc3212c4d05b5fa6cef8b06896e4e399?s=128&d=identicon&r=PG&f=1", "display_name": "3d6-dm", "link": "https://stackoverflow.com/users/10752007/3d6-dm"}, "edited": false, "score": 0, "creation_date": 1544056024, "post_id": 53642326, "comment_id": 94144957, "body": "@KuboMD - Excellent addition, but I have additional variables I have to account for like Race, which adjusts the Strength Value, and then the Modifier"}, {"owner": {"reputation": 13, "user_id": 10752007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc3212c4d05b5fa6cef8b06896e4e399?s=128&d=identicon&r=PG&f=1", "display_name": "3d6-dm", "link": "https://stackoverflow.com/users/10752007/3d6-dm"}, "edited": false, "score": 0, "creation_date": 1544057294, "post_id": 53642326, "comment_id": 94145252, "body": "Hey KuboMD, in your code, why do the outputs print twice?"}], "tags": [], "owner": {"reputation": 663, "user_id": 7222499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222af46733a9cd6067d60ab81f304f3?s=128&d=identicon&r=PG&f=1", "display_name": "KuboMD", "link": "https://stackoverflow.com/users/7222499/kubomd"}, "is_accepted": true, "score": 1, "last_activity_date": 1544092007, "last_edit_date": 1544092007, "creation_date": 1544052182, "answer_id": 53642326, "question_id": 53642258, "link": "https://stackoverflow.com/questions/53642258/check-value-of-randomly-generated-list-against-keys-in-dictionary-and-return-dic/53642326#53642326", "title": "Check Value of Randomly Generated List against Keys in Dictionary and return Dictionaries Value", "body": "<p>Okay, so what I'm getting is:\nYou're generating a random strength score. You want to compare it to the dictionary which dictates the relationship between the static score and the modifier.\nShould be simple enough. Try this:</p>\n\n<pre><code>for key in Ability_Score_Modifiers:\n        if Ability_Score_Modifiers[key] == Ability_Score_Modifiers[int(str_score)]:\n            print('True', value)\n</code></pre>\n\n<p>This works because what we're saying is that initially, we're looping through every key (left side) in the modifier dictionary. If the <strong><em>right</em></strong> side of the current key is equal to the right side of the key which is equal strength score, print True. Functionally, I'm not sure why you want to test the boolean equality but either way this should do. Let me know if it works!</p>\n\n<h2>Updated</h2>\n\n<p>Here's some code:</p>\n\n<pre><code>import random\nstr_score = str(random.randint(3,18))\n\nAbility_Score_Modifiers = {'1' : '-5', '2' : '-4', '3' : '-4', '4' : '-3', '5' : '-3', '6' : '-2', '7' : '-2', '8' : '-1', '9' : '-1', '10' : '0', '11' : '0', '12' : '+1', '13' : '+1', '14' : '+2', '15' : '+2', '16' : '+3', '17' : '+3', '18' : '+4', '19' : '+4', '20' : '+5', '21' : '+5', '22' : '+6', '23' : '+6', '24' : '+7', '25' : '+7', '26' : '+8', '27' : '+8', '28' : '+9', '29' : '+9', '30' : '+10'}\nfor key in Ability_Score_Modifiers:\n        if Ability_Score_Modifiers[key] == Ability_Score_Modifiers[str_score]:\n            print(\"True\")\n            print(\"Stat score of {} grants a modifier of {}\".format(str_score, Ability_Score_Modifiers[str_score]))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>True\nStat score of 15 grants a modifier of +2\nTrue\nStat score of 15 grants a modifier of +2\n</code></pre>\n\n<h2>Just Having Fun</h2>\n\n<p>Maybe this will come in handy later!</p>\n\n<pre><code>import random\n#Generate our Str, Dex, Con, Int, Wis, Cha\nAbility_Scores = {}\nfor n in ['Str', 'Dex', 'Con', 'Int', 'Wis', 'Cha']:\n    Ability_Scores[n] = str(random.randint(3,18))\n\nAbility_Score_Modifiers = {'1' : '-5', '2' : '-4', '3' : '-4', '4' : '-3', '5' : '-3', '6' : '-2', '7' : '-2', '8' : '-1', '9' : '-1', '10' : '0', '11' : '0', '12' : '+1', '13' : '+1', '14' : '+2', '15' : '+2', '16' : '+3', '17' : '+3', '18' : '+4', '19' : '+4', '20' : '+5', '21' : '+5', '22' : '+6', '23' : '+6', '24' : '+7', '25' : '+7', '26' : '+8', '27' : '+8', '28' : '+9', '29' : '+9', '30' : '+10'}\nfor score in Ability_Scores:\n            print(\"{} score of {} grants a modifier of {}\".format(score, Ability_Scores[score], Ability_Score_Modifiers[Ability_Scores[score]]))\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Str score of 7 grants a modifier of -2\nDex score of 12 grants a modifier of +1\nCon score of 17 grants a modifier of +3\nInt score of 8 grants a modifier of -1\nWis score of 12 grants a modifier of +1\nCha score of 5 grants a modifier of -3\n</code></pre>\n\n<h1>Edited</h1>\n\n<p>Turns out its even simpler than we thought!</p>\n\n<pre><code>import random\nstr_score = str(random.randint(3,18))\n\nAbility_Score_Modifiers = {'1' : '-5', '2' : '-4', '3' : '-4', '4' : '-3', '5' : '-3', '6' : '-2', '7' : '-2', '8' : '-1', '9' : '-1', '10' : '0', '11' : '0', '12' : '+1', '13' : '+1', '14' : '+2', '15' : '+2', '16' : '+3', '17' : '+3', '18' : '+4', '19' : '+4', '20' : '+5', '21' : '+5', '22' : '+6', '23' : '+6', '24' : '+7', '25' : '+7', '26' : '+8', '27' : '+8', '28' : '+9', '29' : '+9', '30' : '+10'}\nfor key in Ability_Score_Modifiers:\n        if key == str_score:\n            print(\"True\")\n            print(\"Stat score of {} grants a modifier of {}\".format(str_score, Ability_Score_Modifiers[str_score]))\nTrue\nStat score of 3 grants a modifier of -4\n</code></pre>\n\n<p>So when doing the If statement, you don't even need to compare using the dictionary indexing. You can just use \"key\" from the iterator and compare it to the ability score.</p>\n"}], "owner": {"reputation": 13, "user_id": 10752007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc3212c4d05b5fa6cef8b06896e4e399?s=128&d=identicon&r=PG&f=1", "display_name": "3d6-dm", "link": "https://stackoverflow.com/users/10752007/3d6-dm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 53642326, "answer_count": 1, "score": 1, "last_activity_date": 1544092007, "creation_date": 1544051767, "last_edit_date": 1544065843, "question_id": 53642258, "link": "https://stackoverflow.com/questions/53642258/check-value-of-randomly-generated-list-against-keys-in-dictionary-and-return-dic", "title": "Check Value of Randomly Generated List against Keys in Dictionary and return Dictionaries Value", "body": "<p>Playing with Python, and to test my skills, I wanted to build a Python Script that is centered on the rules for creating a character in D&amp;D 5E. \nScript so far:  </p>\n\n<hr>\n\n<pre><code>for x in range (1):\n    strength.append(random.randint(3,18))\nstr_score = strength\n\n\nAbility_Score_Modifiers = {'1' : '-5',\n                           '2' : '-4',\n                           '3' : '-4',\n                           '4' : '-3',\n                           '5' : '-3',\n                           '6' : '-2',\n                           '7' : '-2',\n                           '8' : '-1',\n                           '9' : '-1',\n                           '10' : '0',\n                           '11' : '0',\n                           '12' : '+1',\n                           '13' : '+1',\n                           '14' : '+2',\n                           '15' : '+2',\n                           '16' : '+3',\n                           '17' : '+3',\n                           '18' : '+4',\n                           '19' : '+4',\n                           '20' : '+5',\n                           '21' : '+5',\n                           '22' : '+6',\n                           '23' : '+6',\n                           '24' : '+7',\n                           '25' : '+7',\n                           '26' : '+8',\n                           '27' : '+8',\n                           '28' : '+9',\n                           '29' : '+9',\n                           '30' : '+10'}\n\nfor keys in Ability_Score_Modifiers.keys() and str_score:\n        if Ability_Score_Modifiers.keys([str_score]) == Ability_Score_Modifiers.keys():\n            print ('True', value)\n        else:\n            pass\n</code></pre>\n\n<hr>\n\n<p>The problem I am having is getting the Script to look at the value generated by the skill and check it against my dictionary and then return the value for the respective key that matches the number returned for the skill.</p>\n\n<p>This is a snippet the source is here <a href=\"http://pythonfiddle.com/5e-character-creator-_-python-edition\" rel=\"nofollow noreferrer\">5E Character creator - python edition</a></p>\n\n<p>I've been at this for about a day and a half and I'm coming up blank. Of course, I'm using pythonfiddle to practice while at work so I am not getting my logic errors.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "list", "nested", "flatten"], "comments": [{"owner": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1544051751, "post_id": 53642222, "comment_id": 94143833, "body": "So if the nested list have more than two elements you don&#39;t want to flatten it?"}, {"owner": {"reputation": 1173, "user_id": 340841, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b5a47004d9d3cd2ca51c33b225654223?s=128&d=identicon&r=PG", "display_name": "Yonathan", "link": "https://stackoverflow.com/users/340841/yonathan"}, "reply_to_user": {"reputation": 43491, "user_id": 4001592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HWyjo.jpg?s=128&g=1", "display_name": "Dani Mesejo", "link": "https://stackoverflow.com/users/4001592/dani-mesejo"}, "edited": false, "score": 0, "creation_date": 1544051820, "post_id": 53642222, "comment_id": 94143851, "body": "No, it is an artifact of the ingested data. If it would be something like <code>[[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;], &#39;d&#39;]</code> it should not be flattened, its a very exact case."}], "answers": [{"tags": [], "owner": {"reputation": 1122, "user_id": 4724240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1xpq.jpg?s=128&g=1", "display_name": "Axel Puig", "link": "https://stackoverflow.com/users/4724240/axel-puig"}, "is_accepted": false, "score": 0, "last_activity_date": 1544052061, "creation_date": 1544052061, "answer_id": 53642301, "question_id": 53642222, "link": "https://stackoverflow.com/questions/53642222/flatten-nested-lists-when-list-contains-1-single-item-which-is-another-list/53642301#53642301", "title": "Flatten nested lists when list contains 1 single item which is another list", "body": "<p>A recursive function can do this:</p>\n\n<pre><code>def flatten(l: list):\n    if len(l) == 1:\n        if isinstance(l[0], list):\n            l = l[0]\n    for i, elem in enumerate(l):\n        if isinstance(type(elem), list):\n            l[i] = flatten(elem)\n    return l\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 2, "last_activity_date": 1544052068, "creation_date": 1544052068, "answer_id": 53642303, "question_id": 53642222, "link": "https://stackoverflow.com/questions/53642222/flatten-nested-lists-when-list-contains-1-single-item-which-is-another-list/53642303#53642303", "title": "Flatten nested lists when list contains 1 single item which is another list", "body": "<p>You can use a recursive function that specifically tests if there's only one item in the given list and if that one item is a list, and if so, skips yielding that list:</p>\n\n<pre><code>def simplify(l):\n    if len(l) == 1 and isinstance(l[0], list):\n        yield from simplify(l[0])\n    else:\n        for i in l:\n            yield list(simplify(i)) if isinstance(i, list) else i\n</code></pre>\n\n<p>so that:</p>\n\n<pre><code>list(simplify([['a', 'b', 'c', [['d', 'e', 'f']]]]))\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code>['a', 'b', 'c', ['d', 'e', 'f']]\n</code></pre>\n"}], "owner": {"reputation": 1173, "user_id": 340841, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b5a47004d9d3cd2ca51c33b225654223?s=128&d=identicon&r=PG", "display_name": "Yonathan", "link": "https://stackoverflow.com/users/340841/yonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1544052068, "creation_date": 1544051585, "question_id": 53642222, "link": "https://stackoverflow.com/questions/53642222/flatten-nested-lists-when-list-contains-1-single-item-which-is-another-list", "title": "Flatten nested lists when list contains 1 single item which is another list", "body": "<p>Basically what I am trying is seeing if I can flatten down nested lists when the list contains 1 single item which is another list. For example take this data structure:</p>\n\n<pre><code>[['a', 'b', 'c', [['d', 'e', 'f']]]]\n</code></pre>\n\n<p>The ideal format of the data would be:</p>\n\n<pre><code>['a', 'b', 'c', ['d', 'e', 'f']]\n</code></pre>\n\n<p>This nesting can go any amount of levels deep but just need to flatten out single list data. Anyone know a way of doing this? The closest I got with answers on SO was: <a href=\"https://stackoverflow.com/questions/12472338/flattening-a-list-recursively\">Flattening a list recursively</a> But this completely flattens the list as a whole.</p>\n"}, {"tags": ["python", "file-access", "python-os"], "answers": [{"comments": [{"owner": {"reputation": 152, "user_id": 8310504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462a6dbf3a5233f0b0712d5ea33a7448?s=128&d=identicon&r=PG&f=1", "display_name": "K. Nielson", "link": "https://stackoverflow.com/users/8310504/k-nielson"}, "edited": false, "score": 0, "creation_date": 1544101474, "post_id": 53642251, "comment_id": 94162274, "body": "Thanks for the sanity check.  Do you know if there is a recommended way (in python) to mitigate this risk?  (Or is it as seemingly hopeless as <a href=\"https://stackoverflow.com/questions/9532499/\">validating file names</a>?)"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "reply_to_user": {"reputation": 152, "user_id": 8310504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462a6dbf3a5233f0b0712d5ea33a7448?s=128&d=identicon&r=PG&f=1", "display_name": "K. Nielson", "link": "https://stackoverflow.com/users/8310504/k-nielson"}, "edited": false, "score": 1, "creation_date": 1544120171, "post_id": 53642251, "comment_id": 94173182, "body": "@K.Nielson: I&#39;m not sure. It mostly matters with setuid scripts, which are <a href=\"https://unix.stackexchange.com/questions/364/allow-setuid-on-shell-scripts/2910#2910\">kind of a security/compatibility mess already</a>, and I&#39;m not sure what the best practices are for such scripts even when the OS supports them. I think you&#39;re probably supposed to use <a href=\"https://docs.python.org/3/library/os.html#os.seteuid\" rel=\"nofollow noreferrer\"><code>os.seteuid</code></a> to temporarily set the effective user id to the real user id while opening and reading the file, then set it back afterwards. I don&#39;t know if that&#39;s fully secure, though."}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 5, "last_activity_date": 1544051732, "creation_date": 1544051732, "answer_id": 53642251, "question_id": 53642117, "link": "https://stackoverflow.com/questions/53642117/how-does-the-code-example-in-the-python-os-module-documentation-create-a-securit/53642251#53642251", "title": "How does the code example in the python os module documentation create a security hole?", "body": "<p>While the <code>access</code>-using code is unsafe, the second code snippet doesn't solve the security issues. These docs should be changed.</p>\n\n<p>The purpose of <code>os.access</code> is to test whether the real user id has permission to access a file when the real and effective user ids are different. The danger with the <code>os.access</code> snippet is that the user could place a file <code>access</code> returns <code>True</code> for in the location being tested, then swap it out for a file <code>access</code> would have returned <code>False</code> for, bypassing the check. Since <code>open</code> uses the effective user id, the <code>open</code> call can still work, bypassing the <code>access</code> check.</p>\n\n<p>The second snippet doesn't solve this problem. Now the user doesn't even need to go through the switcheroo. No part of the second snippet checks the real user id.</p>\n"}], "owner": {"reputation": 152, "user_id": 8310504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/462a6dbf3a5233f0b0712d5ea33a7448?s=128&d=identicon&r=PG&f=1", "display_name": "K. Nielson", "link": "https://stackoverflow.com/users/8310504/k-nielson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 1, "accepted_answer_id": 53642251, "answer_count": 1, "score": 5, "last_activity_date": 1544063676, "creation_date": 1544050967, "last_edit_date": 1544063676, "question_id": 53642117, "link": "https://stackoverflow.com/questions/53642117/how-does-the-code-example-in-the-python-os-module-documentation-create-a-securit", "title": "How does the code example in the python os module documentation create a security hole?", "body": "<p>The <a href=\"https://docs.python.org/3/library/os.html#os.access\" rel=\"nofollow noreferrer\">documentation</a> for the <code>os</code> module makes the following assertion:</p>\n\n<hr>\n\n<p>Note</p>\n\n<p>Using access() to check if a user is authorized to e.g. open a file before actually doing so using open() creates a security hole, because the user might exploit the short time interval between checking and opening the file to manipulate it. It\u2019s preferable to use <a href=\"https://docs.python.org/3/glossary.html#term-eafp\" rel=\"nofollow noreferrer\">EAFP</a> techniques. For example:</p>\n\n<pre><code>if os.access(\"myfile\", os.R_OK):\n    with open(\"myfile\") as fp:\n    return fp.read()\nreturn \"some default data\"`\n</code></pre>\n\n<p>is better written as:</p>\n\n<pre><code>try:\n    fp = open(\"myfile\")\nexcept PermissionError:\n    return \"some default data\"\nelse:\n    with fp:\n        return fp.read()\n</code></pre>\n\n<hr>\n\n<p>I don't understand how a user \"might exploit\" the interval.  If <code>open</code> was going to raise an exception, I'm not sure how <code>os.access</code> would prevent that exception from being raised.  Likewise, if the user manipulate the file somehow, why not perform the file manipulation prior to the EAFP version's <code>open</code> command?</p>\n\n<p>I do understand that the second version may be more robust, since <code>os.access</code> may fail to correctly recognize a condition that could raise a <code>PermissionError</code>, but I don't see how the <a href=\"https://docs.python.org/3/glossary.html#term-lbyl\" rel=\"nofollow noreferrer\">LBYL</a> version is less <em>secure</em>.  Can someone explain this?</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "webdriver"], "comments": [{"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1544051621, "post_id": 53642090, "comment_id": 94143796, "body": "That error means that you can&#39;t call <code>.click()</code>, you would get the same error if you replaced <code>.click()</code> with <code>.fsghudghur()</code>. Whatever <code>find_element_by_link_text</code> returns had no <code>click()</code> function."}, {"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1544051724, "post_id": 53642090, "comment_id": 94143825, "body": "Try running <code>type(driver.find_element_by_link_text(&quot;MyFilters &quot;))</code>. See if what is returned is what you want. Also try printing it with <code>print(driver.find_element_by_link_text(&quot;MyFilters &quot;))</code>. Is that good as well?"}, {"owner": {"reputation": 85, "user_id": 6878945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8777471f87666e301490ae74476bf97e?s=128&d=identicon&r=PG&f=1", "display_name": "Chen W", "link": "https://stackoverflow.com/users/6878945/chen-w"}, "reply_to_user": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1544052569, "post_id": 53642090, "comment_id": 94144063, "body": "@EthanK I added those in my code, but I didn&#39;t see anything on the console. So the method of link_text won&#39;t work here?"}, {"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1544052742, "post_id": 53642090, "comment_id": 94144117, "body": "Well, if you didn&#39;t see anything then it didn&#39;t run or you are not looking at the console. And if you got that error, <code>.click()</code> won&#39;t just not work here, but <code>.click()</code> won&#39;t work <b>anywhere</b>. Check the documentation to make sure <code>.click()</code> exists, if not then make sure you are using the right version."}, {"owner": {"reputation": 85, "user_id": 6878945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8777471f87666e301490ae74476bf97e?s=128&d=identicon&r=PG&f=1", "display_name": "Chen W", "link": "https://stackoverflow.com/users/6878945/chen-w"}, "reply_to_user": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1544053585, "post_id": 53642090, "comment_id": 94144324, "body": "@EthanK .click() is definitely working. Because preceding this I had to click buttons to log in. Actually I see this in the console=&gt;&gt; selenium.common.exceptions.NoSuchElementException: Message: no such element: Unable to locate element: {&quot;method&quot;:&quot;link text&quot;,&quot;selector&quot;:&quot;MyFilters &quot;}"}, {"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1544053689, "post_id": 53642090, "comment_id": 94144356, "body": "So whatever <code>type(driver.find_element_by_link_text(&quot;MyFilters &quot;))</code> is will be different then the <code>type()</code> of whatever <code>.click()</code> worked for. But for all objects like this one, <code>.click()</code> will never work."}, {"owner": {"reputation": 85, "user_id": 6878945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8777471f87666e301490ae74476bf97e?s=128&d=identicon&r=PG&f=1", "display_name": "Chen W", "link": "https://stackoverflow.com/users/6878945/chen-w"}, "reply_to_user": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1544053790, "post_id": 53642090, "comment_id": 94144391, "body": "@EthanK Do you by any chance know why it&#39;s not working for that one? Or how else can I click on the button?"}, {"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1544055384, "post_id": 53642090, "comment_id": 94144813, "body": "Not really, I don&#39;t know anything about <a href=\"https://stackoverflow.com/questions/tagged/selenium\">selenium</a>, only how python works with functions like <code>.click()</code>. I do know that the type of object in this case <b>is different</b> then the objects that this <i>did</i> work for."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 6878945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8777471f87666e301490ae74476bf97e?s=128&d=identicon&r=PG&f=1", "display_name": "Chen W", "link": "https://stackoverflow.com/users/6878945/chen-w"}, "edited": false, "score": 0, "creation_date": 1544060556, "post_id": 53643032, "comment_id": 94145905, "body": "Okay, so this works! But it will not work if I place it right after my &#39;sign in&#39; click. However, if I sandwich another find_element command between them then the second one will work. Could it be that it is trying to click while the page is loading?"}, {"owner": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "reply_to_user": {"reputation": 85, "user_id": 6878945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8777471f87666e301490ae74476bf97e?s=128&d=identicon&r=PG&f=1", "display_name": "Chen W", "link": "https://stackoverflow.com/users/6878945/chen-w"}, "edited": false, "score": 0, "creation_date": 1544061148, "post_id": 53643032, "comment_id": 94146051, "body": "It probably is, I would use things like <code>WebDriverWait</code> conditions, to make sure your element is visible first. <a href=\"https://stackoverflow.com/questions/26566799/wait-until-page-is-loaded-with-selenium-webdriver-for-python\">THIS</a> post would be helpful with that issue, but it sounds like the click is fixed! So that&#39;s good."}], "tags": [], "owner": {"reputation": 1633, "user_id": 8791722, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/98WuV.png?s=128&g=1", "display_name": "PixelEinstein", "link": "https://stackoverflow.com/users/8791722/pixeleinstein"}, "is_accepted": true, "score": 2, "last_activity_date": 1544057479, "creation_date": 1544057479, "answer_id": 53643032, "question_id": 53642090, "link": "https://stackoverflow.com/questions/53642090/selenium-python-find-element-by-link-text-not-sure-whats-wrong/53643032#53643032", "title": "Selenium - Python - find_element_by_link_text not sure what&#39;s wrong", "body": "<p>Link text is sometimes very picky about what you send to it, and I have found that you have to match what the actual link is showing, and not the value following href. Since the site shows <code>MyFilters</code>, try doing this instead:</p>\n\n<pre><code>driver.find_element_by_link_text('MyFilters').click()\n</code></pre>\n\n<p>Without the space after <strong><em>Filters</em></strong>. I tested on my side and it seems to work.</p>\n\n<p>Also, the error does not match what you have given as an example, it would throw <code>NoSuchElementException</code>, before it would throw that <code>NoneType</code> has no <em>click()</em> event. Either way the above should work for you.</p>\n"}], "owner": {"reputation": 85, "user_id": 6878945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8777471f87666e301490ae74476bf97e?s=128&d=identicon&r=PG&f=1", "display_name": "Chen W", "link": "https://stackoverflow.com/users/6878945/chen-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1622, "favorite_count": 1, "accepted_answer_id": 53643032, "answer_count": 1, "score": 0, "last_activity_date": 1544057479, "creation_date": 1544050829, "question_id": 53642090, "link": "https://stackoverflow.com/questions/53642090/selenium-python-find-element-by-link-text-not-sure-whats-wrong", "title": "Selenium - Python - find_element_by_link_text not sure what&#39;s wrong", "body": "<p>This is my first time with both Python and Selenium, and I'm trying to select and click on an element of the navigation bar of this website - stockfetcher.com</p>\n\n<p>I would like to click on the MyFilters tab on the navigation bar. After inspecting the element, I see that the HTML code for that element is</p>\n\n<p><code>&lt;a href=\"/myfilters\"&gt;\n  \"MyFilters \"\n  &lt;span class=\"tab-pill\"&gt;&lt;/span&gt;\n&lt;/a&gt;</code></p>\n\n<p>And here's what I trying to do</p>\n\n<p><code>driver.find_element_by_link_text(\"MyFilters \").click()</code></p>\n\n<p>And I get this error</p>\n\n<p><code>AttributeError: 'NoneType' object has no attribute 'click'</code></p>\n\n<p>Any idea what's wrong? Most examples I watched online did not have \"\" around whatever is inside the  tag. Is that what's messing me up?</p>\n"}, {"tags": ["c#", "python", ".net", "overloading", "python.net"], "comments": [{"owner": {"reputation": 4957, "user_id": 2230844, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b0e722a4823f29c56d7a97bc6500ccc?s=128&d=identicon&r=PG", "display_name": "denfromufa", "link": "https://stackoverflow.com/users/2230844/denfromufa"}, "edited": false, "score": 0, "creation_date": 1544392258, "post_id": 53642088, "comment_id": 94249424, "body": "did you try forcing method signature via <code>Overloads</code> or Reflection? <a href=\"http://pythonnet.github.io/\" rel=\"nofollow noreferrer\">pythonnet.github.io</a>"}, {"owner": {"reputation": 4957, "user_id": 2230844, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1b0e722a4823f29c56d7a97bc6500ccc?s=128&d=identicon&r=PG", "display_name": "denfromufa", "link": "https://stackoverflow.com/users/2230844/denfromufa"}, "edited": false, "score": 0, "creation_date": 1544392364, "post_id": 53642088, "comment_id": 94249454, "body": "<a href=\"https://github.com/pythonnet/pythonnet/issues/265\" rel=\"nofollow noreferrer\">github.com/pythonnet/pythonnet/issues/265</a>"}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 10746128, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IDsXNt-rAvc/AAAAAAAAAAI/AAAAAAAAAHA/3KW-cr5QM78/photo.jpg?sz=128", "display_name": "Jack Devins", "link": "https://stackoverflow.com/users/10746128/jack-devins"}, "is_accepted": false, "score": -1, "last_activity_date": 1544720016, "creation_date": 1544720016, "answer_id": 53766628, "question_id": 53642088, "link": "https://stackoverflow.com/questions/53642088/python-using-pythonnet-to-call-a-dll-function-c-which-expects-type-arraylis/53766628#53766628", "title": "(Python) Using pythonnet to call a DLL function (C#) which expects Type ArrayList", "body": "<p>Solution was to use python to call a function which was written in a C# DLL which takes the types and functions from the first dll.</p>\n\n<p>Annoying but not sure how else to reference custom types created in C# dlls from python. </p>\n"}], "owner": {"reputation": 19, "user_id": 10746128, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-IDsXNt-rAvc/AAAAAAAAAAI/AAAAAAAAAHA/3KW-cr5QM78/photo.jpg?sz=128", "display_name": "Jack Devins", "link": "https://stackoverflow.com/users/10746128/jack-devins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 796, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1544720016, "creation_date": 1544050820, "last_edit_date": 1544392181, "question_id": 53642088, "link": "https://stackoverflow.com/questions/53642088/python-using-pythonnet-to-call-a-dll-function-c-which-expects-type-arraylis", "title": "(Python) Using pythonnet to call a DLL function (C#) which expects Type ArrayList", "body": "<p>I am trying to run a function named \"functionName\" from a DLL while calling it from a python project. I already have control over many of the DLL's functions but when running \"functionName\" I believe I have issues with pythonnet's List implementation of C#'s Array List.</p>\n\n<p>The line from the DLL which I am trying to call</p>\n\n<pre><code>public int functionName(ArrayList data)\n</code></pre>\n\n<p>Currently I have tried to create a python ArrayList through:</p>\n\n<pre><code>from System import Int32\nfrom System import Array\n\ndata1 = [Int32(x) for x in data1]                # data1 is a list\ndata1 = Array[Int32](data1)                      # ArrayList Expecting 8x Arrays to be added\n\nimport clr\nclr.AddReference('System.Collections')\nfrom System.Collections.Generic import List      # Avoids Deprecation\n\nPy_Array = System.Collections.Generic.List[Array[Int32]]()\nPy_Array.Add(data1)\n...\nPy_Array.Add(data1)                              # 8 times total\n\nDLL.functionName(Py_Array)\n</code></pre>\n\n<p>The outcome has always been:</p>\n\n<pre><code>TypeError:  No method matches given arguments\n</code></pre>\n\n<p>I have tried a lot of different ways to fix this, and I believe the issue may belong to System.Collections.Generic.List does not match the expected type of ArrayList for C#.</p>\n\n<p>Any help would be appreciated. </p>\n\n<p><strong>Edit #1</strong></p>\n\n<p>I found that there is also a:</p>\n\n<pre><code>System.Collections.ArrayList()\n</code></pre>\n\n<p>But this has no solved the issue for Method Matching giving Arguments</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 1, "creation_date": 1544051640, "post_id": 53642083, "comment_id": 94143797, "body": "you can set <code>x</code> and <code>y</code> location for the <code>suptitle</code> with additional argument  e.g. color font fontsize etc. <a href=\"https://matplotlib.org/api/_as_gen/matplotlib.pyplot.suptitle.html\" rel=\"nofollow noreferrer\">matplotlib.org/api/_as_gen/matplotlib.pyplot.suptitle.html</a>. probably <code>y=0.91</code> is a better location than the default value of 0.98"}, {"owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "reply_to_user": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 0, "creation_date": 1544474625, "post_id": 53642083, "comment_id": 94281233, "body": "@KhalilAlHooti could you post as an answer?"}], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 4, "last_activity_date": 1544052162, "creation_date": 1544052162, "answer_id": 53642319, "question_id": 53642083, "link": "https://stackoverflow.com/questions/53642083/matplotlib-tight-layout-gridspec-fig-suptitle-looks-bad/53642319#53642319", "title": "matplotlib tight_layout + gridspec + fig.suptitle looks bad", "body": "<p><code>tight_layout()</code> does not take figure level artists into account.</p>\n\n<h2>Use constrained_layout</h2>\n\n<p>However, there is a relatively new alternative, called <a href=\"https://matplotlib.org/tutorials/intermediate/constrainedlayout_guide.html\" rel=\"nofollow noreferrer\"><code>constrained_layout</code></a>. Using this, the figure title will be included. Note that for this to work you need to supply the figure to the <code>GridSpec</code> via it's <code>figure</code> argument.</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport matplotlib.gridspec as gridspec\n\ndef example(tl):\n    fig = plt.figure(figsize=(14,8), constrained_layout=tl)\n    hr = [3,3,3,1,1]\n    wr = [3,1]\n    ny = len(hr)\n    nx = len(wr)\n    gs = gridspec.GridSpec(ny,nx, figure=fig,\n                        height_ratios=hr,\n                        width_ratios=wr,\n                        hspace=0.08, wspace=0.1)\n    for j in range(nx):\n        ax = [fig.add_subplot(gs[0,j])]\n        ax += [fig.add_subplot(gs[i,j], sharex=ax[0]) for i in range(1,ny)]\n        for axi in ax:\n              axi.plot([0,1,2],[0,1,4])    \n    fig.suptitle('The quick brown fox jumps over the lazy dog.')\n\n\nexample(True)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/i1OPU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/i1OPU.png\" alt=\"enter image description here\"></a></p>\n\n<h2>Update top margin</h2>\n\n<p>Alternatively you can update the top margin <em>after</em> calling <code>tight_layout</code>. E.g. as</p>\n\n<pre><code>gs.update(top=0.95)\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport matplotlib.gridspec as gridspec\n\ndef example(tl):\n    fig = plt.figure(figsize=(14,8))\n    hr = [3,3,3,1,1]\n    wr = [3,1]\n    ny = len(hr)\n    nx = len(wr)\n    gs = gridspec.GridSpec(ny,nx, figure=fig,\n                        height_ratios=hr,\n                        width_ratios=wr,\n                        hspace=0.08, wspace=0.1)\n    for j in range(nx):\n        ax = [fig.add_subplot(gs[0,j])]\n        ax += [fig.add_subplot(gs[i,j], sharex=ax[0]) for i in range(1,ny)]\n        for axi in ax:\n              axi.plot([0,1,2],[0,1,4])    \n    fig.suptitle('The quick brown fox jumps over the lazy dog.')\n    if tl:\n        gs.tight_layout(fig)\n        gs.update(top=0.95)\n\n\nexample(True)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/IQAzO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/IQAzO.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 170705, "user_id": 44330, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/dd5a7ef1476fb01998a215b1642dfd07?s=128&d=identicon&r=PG", "display_name": "Jason S", "link": "https://stackoverflow.com/users/44330/jason-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1549, "favorite_count": 1, "accepted_answer_id": 53642319, "answer_count": 1, "score": 2, "last_activity_date": 1544052162, "creation_date": 1544050792, "question_id": 53642083, "link": "https://stackoverflow.com/questions/53642083/matplotlib-tight-layout-gridspec-fig-suptitle-looks-bad", "title": "matplotlib tight_layout + gridspec + fig.suptitle looks bad", "body": "<p>I have a very nice GridSpec graph using Matplotlib 2.2.2 but I can't make a pretty title for the figure as a whole. Example:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport matplotlib.gridspec as gridspec\nimport numpy as np\n%matplotlib inline\n\ndef example(tl):\n    fig = plt.figure(figsize=(14,8))\n    hr = [3,3,3,1,1]\n    wr = [3,1]\n    ny = len(hr)\n    nx = len(wr)\n    gs = gridspec.GridSpec(ny,nx,\n                        height_ratios=hr,\n                        width_ratios=wr,\n                        hspace=0.08, wspace=0.1)\n    for j in xrange(nx):\n        ax = [fig.add_subplot(gs[0,j])]\n        ax += [fig.add_subplot(gs[i,j], sharex=ax[0]) for i in xrange(1,ny)]\n        for axi in ax:\n              axi.plot([0,1,2],[0,1,4])    \n    fig.suptitle('The quick brown fox jumps over the lazy dog.')\n    if tl:\n        gs.tight_layout(fig)\n</code></pre>\n\n<p>If I run <code>example(False)</code> for no tight layout I get a huge amount of space above the figures:</p>\n\n<p><a href=\"https://i.stack.imgur.com/5S8ST.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5S8ST.png\" alt=\"enter image description here\"></a></p>\n\n<p>If I run <code>example(True)</code> for a tight layout I get negative space:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ajHfW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ajHfW.png\" alt=\"enter image description here\"></a></p>\n\n<p>How can I fix this and get a figure-level title with a proper amount of margin from the subplots?</p>\n"}, {"tags": ["python", "cookies", "python-requests", "http-post", "http-get"], "comments": [{"owner": {"reputation": 2568, "user_id": 9380694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HF6fu.jpg?s=128&g=1", "display_name": "KC.", "link": "https://stackoverflow.com/users/9380694/kc"}, "edited": false, "score": 0, "creation_date": 1544073936, "post_id": 53642079, "comment_id": 94148945, "body": "change to <code>json=payload</code>, and it seems you need to login otherwise you will get 403 even though it said <code>invalid csrf token</code>."}, {"owner": {"reputation": 1, "user_id": 10251525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1372bbec9d5a9de5faa0e92c3256917f?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Gupta", "link": "https://stackoverflow.com/users/10251525/rajat-gupta"}, "reply_to_user": {"reputation": 2568, "user_id": 9380694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HF6fu.jpg?s=128&g=1", "display_name": "KC.", "link": "https://stackoverflow.com/users/9380694/kc"}, "edited": false, "score": 0, "creation_date": 1544081895, "post_id": 53642079, "comment_id": 94151559, "body": "I implemented the given code   <code>with requests.Session() as session:</code>      <code>initial_response  = session.get(initial_url,auth=HTTPBasicAuth(&#39;user&#39;, &#39;password&#39;))       h[&#39;X-XSRF-TOKEN&#39;] = initial_response.cookies[&#39;XSRF-TOKEN&#39;]       response = session.post(url, headers=h, json=payload)</code>"}, {"owner": {"reputation": 1, "user_id": 10251525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1372bbec9d5a9de5faa0e92c3256917f?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Gupta", "link": "https://stackoverflow.com/users/10251525/rajat-gupta"}, "reply_to_user": {"reputation": 2568, "user_id": 9380694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HF6fu.jpg?s=128&g=1", "display_name": "KC.", "link": "https://stackoverflow.com/users/9380694/kc"}, "edited": false, "score": 0, "creation_date": 1544082933, "post_id": 53642079, "comment_id": 94152029, "body": "@kcorlidy   But I am still getting <code>&#39;{&quot;error&quot;:&quot;Login required.&quot;,&quot;code&quot;:401}&#39;</code>    The following code <code>from requests.auth import HTTPBasicAuth sess = requests.Session() sess.get(&#39;https:&#47;&#47;paytm.com&#47;nearby&#39;, auth=HTTPBasicAuth(&#39;user&#39;, &#39;password&#39;))</code>   gives <code>&lt;Response [200]&gt;</code>"}, {"owner": {"reputation": 2568, "user_id": 9380694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HF6fu.jpg?s=128&g=1", "display_name": "KC.", "link": "https://stackoverflow.com/users/9380694/kc"}, "edited": false, "score": 0, "creation_date": 1544085528, "post_id": 53642079, "comment_id": 94153215, "body": "You can access <code>https:&#47;&#47;paytm.com&#47;nearby</code>, but it doesnt mean you logged in. I am not sure that you can login with auth. May be you should try to login through login form."}, {"owner": {"reputation": 2568, "user_id": 9380694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HF6fu.jpg?s=128&g=1", "display_name": "KC.", "link": "https://stackoverflow.com/users/9380694/kc"}, "edited": false, "score": 0, "creation_date": 1544086703, "post_id": 53642079, "comment_id": 94153871, "body": "And i found paytm API. check <a href=\"https://developer.paytm.com/docs/refund-api/\" rel=\"nofollow noreferrer\">developer.paytm.com/docs/refund-api</a> and <a href=\"https://developer.paytm.com/docs/transaction-status-api/\" rel=\"nofollow noreferrer\">developer.paytm.com/docs/transaction-status-api</a>"}, {"owner": {"reputation": 1, "user_id": 10251525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1372bbec9d5a9de5faa0e92c3256917f?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Gupta", "link": "https://stackoverflow.com/users/10251525/rajat-gupta"}, "reply_to_user": {"reputation": 2568, "user_id": 9380694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HF6fu.jpg?s=128&g=1", "display_name": "KC.", "link": "https://stackoverflow.com/users/9380694/kc"}, "edited": false, "score": 0, "creation_date": 1544092711, "post_id": 53642079, "comment_id": 94157267, "body": "I am not using the paytm API officially, the APIs mentioned in the previous comment can not get the merchant data. So I am left with the option of making the HTTP request look like as it made through the browser."}, {"owner": {"reputation": 1, "user_id": 10251525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1372bbec9d5a9de5faa0e92c3256917f?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Gupta", "link": "https://stackoverflow.com/users/10251525/rajat-gupta"}, "reply_to_user": {"reputation": 2568, "user_id": 9380694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HF6fu.jpg?s=128&g=1", "display_name": "KC.", "link": "https://stackoverflow.com/users/9380694/kc"}, "edited": false, "score": 0, "creation_date": 1544093253, "post_id": 53642079, "comment_id": 94157598, "body": "@kcorlidy I tried to login by using the code provided in <a href=\"https://stackoverflow.com/questions/52574908\">stackoverflow.com/questions/52574908</a> but I got the <code>&lt;Response [403]&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10251525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1372bbec9d5a9de5faa0e92c3256917f?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Gupta", "link": "https://stackoverflow.com/users/10251525/rajat-gupta"}, "edited": false, "score": 0, "creation_date": 1544103788, "post_id": 53650756, "comment_id": 94163767, "body": "Thanks a ton! Your code seems to work fine but there is only one issue left that after running this code, paytm sends an OTP for verification. I do not know if this issue can be addressed by python code so that paytm do not send the OTP, during manual login it does not require any verification by OTP. Any thoughts on that will be really appreciable."}, {"owner": {"reputation": 2568, "user_id": 9380694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HF6fu.jpg?s=128&g=1", "display_name": "KC.", "link": "https://stackoverflow.com/users/9380694/kc"}, "reply_to_user": {"reputation": 1, "user_id": 10251525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1372bbec9d5a9de5faa0e92c3256917f?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Gupta", "link": "https://stackoverflow.com/users/10251525/rajat-gupta"}, "edited": false, "score": 0, "creation_date": 1544105911, "post_id": 53650756, "comment_id": 94165120, "body": "You means when you login through Python, paytm send an OTP to your phone or mailbox? honestly i just only knew the reason is server found you are using script, but i can not figure out what leads to this, because it happened after inputed correct user&amp;password. Btw, you can save cookie to file, and load it from file again when you need."}, {"owner": {"reputation": 1, "user_id": 10251525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1372bbec9d5a9de5faa0e92c3256917f?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Gupta", "link": "https://stackoverflow.com/users/10251525/rajat-gupta"}, "edited": false, "score": 0, "creation_date": 1544118486, "post_id": 53650756, "comment_id": 94172449, "body": "It sends the OTP to my phone, the possible reason for the server found out is that the login request is made in no time by the python script."}], "tags": [], "owner": {"reputation": 2568, "user_id": 9380694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HF6fu.jpg?s=128&g=1", "display_name": "KC.", "link": "https://stackoverflow.com/users/9380694/kc"}, "is_accepted": false, "score": 0, "last_activity_date": 1544097132, "last_edit_date": 1544097132, "creation_date": 1544096776, "answer_id": 53650756, "question_id": 53642079, "link": "https://stackoverflow.com/questions/53642079/python-requests-logging-into-paytm-to-scrap-the-merchant-data/53650756#53650756", "title": "Python requests: logging into paytm to scrap the merchant data", "body": "<p>Different website have different way to login, learning how to use fiddler to watch request structure is very useful. The code below is imitated from browser request. But i cann't make code work perfectly because i dont have an account(even register)</p>\n\n<pre><code>from requests import Session\nfrom bs4 import BeautifulSoup\nimport re\n\nurl = 'https://paytm.com/v1/api/getnearbysellers?child_site_id=1&amp;site_id=1'\n\ninitial_url = 'https://paytm.com/nearby'\n\nauth_code_url = r\"https://accounts.paytm.com/oauth2/authorize?theme=mp-web&amp;redirect_uri=https%3A%2F%2Fpaytm.com%2Fv1%2Fapi%2Fauthresponse&amp;is_verification_excluded=false&amp;client_id=paytm-web-secure&amp;type=web_server&amp;scope=paytm&amp;response_type=code\"\nlogin_ = \"https://accounts.paytm.com/oauth2/authorize?client_id=paytm-web-secure&amp;scope=paytm&amp;response_type=code&amp;redirect_uri=https://paytm.com/v1/api/authresponse&amp;theme=mp-web&amp;state=null&amp;is_verification_excluded=false&amp;isSignup=true\"\n\nwith Session() as sess:\n    #sess.verify = False\n    sess.headers = {\"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) HeadlessChrome/69.0.3494.0 Safari/537.36\"\n        }\n    resp = sess.get(auth_code_url)\n    auth_code = BeautifulSoup(resp.content,\"lxml\").find(\"div\",{\"id\":\"main-container\"}).get(\"ng-init\")\n    auth_code = re.findall(r\"(?&lt;=authState.{4})(.*?)(?=\\'|\\\")\",auth_code)[0]\n    print(auth_code)\n    login_data = {\n        \"fakeusernameremembered\":\"\",\n        \"fakepasswordremembered\":\"\",\n        \"username\":\"xxxx\", #your username\n        \"password\":\"xxxx\", #your password\n        \"AUTH_STATE\":auth_code\n\n    }\n    login = sess.post(login_,data = login_data)\n    print(login.text)\n\n    payload = {\"distance\":10,\"endLimit\":20,\"latitude\":26.8467088,\"longitude\":80.9461592,\n       \"searchFilter\":[{\"filterType\":\"SERVICE\",\"value\":\"PAYMENT_POINT\"}],\n       \"sortBy\":{\"DISTANCE_WISE_SORT\":\"ASC\"},\"startLimit\":20,\"channel\":\"web\",\"version\":2}\n\n    resp = sess.get(initial_url)\n    print(resp.cookies['XSRF-TOKEN'])\n    sess.headers['X-XSRF-TOKEN'] = resp.cookies['XSRF-TOKEN']\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10251525, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1372bbec9d5a9de5faa0e92c3256917f?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Gupta", "link": "https://stackoverflow.com/users/10251525/rajat-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544097132, "creation_date": 1544050770, "question_id": 53642079, "link": "https://stackoverflow.com/questions/53642079/python-requests-logging-into-paytm-to-scrap-the-merchant-data", "title": "Python requests: logging into paytm to scrap the merchant data", "body": "<p>I am trying to use the python requests library to login into the paytm and scrap the data of paytm merchants from its website by using the paytm nearby. But I am not able to do this, I have a lot of questions like do I need to login or the cookies do the job for me, do I need to put a get request before the post request.</p>\n\n<p>Code I used-</p>\n\n<pre><code>payload = {\"distance\":10,\"endLimit\":20,\"latitude\":26.8467088,\"longitude\":80.9461592,\n       \"searchFilter\":[{\"filterType\":\"SERVICE\",\"value\":\"PAYMENT_POINT\"}],\n       \"sortBy\":{\"DISTANCE_WISE_SORT\":\"ASC\"},\"startLimit\":20,\"channel\":\"web\",\"version\":2}\npp = {\"method\":\"get\",\"channel\":\"web\",\"version\":2}\nh={'Content-type': 'application/json', 'Accept': 'application/json, text/plain, */*',\n    'User-Agent': 'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.77 Safari/537.36'\n,'Accept-Encoding': 'gzip, deflate, br','Accept-Language': 'en-US,en;q=0.9','Connection': 'keep-alive'\n         #,'Content-Length': '222'\n}\n\nurl = 'https://paytm.com/v1/api/getnearbysellers?child_site_id=1&amp;site_id=1'\n\ninitial_url = 'https://paytm.com/nearby'\n\nwith requests.Session() as session:\n    initial_response  = session.get(initial_url)\n\n    response = session.post(url, headers=h, data=payload)\n\n\nresponse.text\n</code></pre>\n\n<p>Response i got-</p>\n\n<pre><code>{\"error\":\"invalid json\",\"code\":400}\n</code></pre>\n\n<p>The things I got by using the network monitoring tool in Chrome</p>\n\n<pre><code>General-\n\nRequest URL: https://paytm.com/v1/api/getnearbysellers?                                child_site_id=1&amp;site_id=1\nRequest Method: POST\nStatus Code: 200 OK\nRemote Address: 13.251.31.44:443\nReferrer Policy: no-referrer-when-downgrade\n\nResponse Headers-\nHTTP/1.1 200 OK\nContent-Encoding: gzip\nContent-Type: application/json;charset=UTF-8\nDate: Mon, 03 Dec 2018 08:07:10 GMT\nServer: openresty\nset-cookie: JSESSIONID=66BC9F5E7F355200029AF2316C4E546B; Path=/; secure; HttpOnlyservice/; HttpOnly\nstrict-transport-security: max-age=31536000\nVary: Accept-Encoding\nvary: Accept-Encoding\nx-content-type-options: nosniff\nx-frame-options: SAMEORIGIN\nx-paytm-srv-id: pawslmktshopapp22\nX-Powered-By: Express\nx-server-time: 1543824430.635\nx-xss-protection: 1; mode=block\nContent-Length: 2606\nConnection: keep-alive\n\nRequest Headers-\nPOST /v1/api/getnearbysellers?child_site_id=1&amp;site_id=1 HTTP/1.1\nHost: paytm.com\nConnection: keep-alive\nContent-Length: 222\nAccept: application/json, text/plain, */*\nOrigin: https://paytm.com\nX-XSRF-TOKEN: LZAiRpku-aptONqCm7Ellab6SEeDAnqZRvuM\nUser-Agent: Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.77 Safari/537.36\nContent-type: application/json\nReferer: https://paytm.com/nearby\nAccept-Encoding: gzip, deflate, br\nAccept-Language: en-US,en;q=0.9\nCookie: referrer=; secure=true; returning_usr=1; _ga=GA1.2.938904971.1543763520; _gid=GA1.2.1467864151.1543763520; tvc_vid=11543763520802; referrer=; _vwo_uuid_v2=D4CB7C24D54981ADADF33AED06E04E853|54a0ddcfd4724496a7f9ce8ab7cded2a; _vis_opt_s=1%7C; _vis_opt_test_cookie=1; connect.sid=s%3A__KFlRc2nU_bImjL6OajuBL9cUygnrBi.h1hRCkhz0p5%2FAcoVmArbMXYlUtiv87HJnIueXnr3gSA; _gcl_au=1.1.1598196666.1543771833; _parsely_session={%22sid%22:1%2C%22surl%22:%22https://blog.paytm.com/10-things-you-didnt-know-you-could-do-on-paytm-62a1b200faa6?gi=a3bf13aea45%22%2C%22sref%22:%22https://www.google.co.in/%22%2C%22sts%22:1543823267357%2C%22slts%22:0}; _parsely_visitor={%22id%22:%22pid=a45f5e3ede4fdfe39b8544a91a36ad17%22%2C%22session_count%22:1%2C%22last_session_ts%22:1543823267357}; X-MW-TOKEN=0ac55a86-4b9e-4eaf-8188-71a8c4a705be; X-DM-TOKEN=7f417f58-b33f-4580-a6e3-348f8a324d5c; market-onboard.sid=s%3A8oCGyIrKg-0SsuWTyZ0e6UY3kf89fgnk.SvkZbJub6a%2BG9dZlKMf0rBP80VXFejnCkQiuEdCa27E; AWSELB=97B3358B1C150AC96AC74F39ED34D289809132006F1D0627F111BA7DAB6F4B4A64D171E96C5345A5110C0ECD2E0D82F0BD18BA748DF362808AF3F805565A609A67DC7BF11D; queenoftarts=pawslmktshopapp22; _gat_UA-36768858-14=1; XSRF-TOKEN=LZAiRpku-aptONqCm7Ellab6SEeDAnqZRvuM; _gat=1; _dc_gtm_UA-36768858-14=1; JSESSIONID=9C42AB42BC1AF0240183C02730E3754F\n\n\nQuery String Parameter-\n\nchild_site_id=1&amp;site_id=1\n\n\nRequest Payload- \n {\"distance\":10,\"endLimit\":20,\"latitude\":26.8467088,\"longitude\":80.9461592,\"searchFilter\":[{\"filterType\":\"SERVICE\",\"value\":\"PAYMENT_POINT\"}],\"sortBy\":{\"DISTANCE_WISE_SORT\":\"ASC\"},\"startLimit\":20,\"channel\":\"web\",\"version\":2}\n\nResponse-\n{\"requestGuid\":null,\"orderId\":null,\"status\":\"SUCCESS\",\"statusCode\":\"SS_0001\",\"statusMessage\":\"Request Successfully fullfilled.\",\"response\":[{\"cashPointsDetail\":{\"terminalId\":8507407,\"terminalType\":\"User\",\"businessName\":\"\",\"contactPerson\":[\"Vijay Kumar\"],\"address\":[\"1\",\"\",\"Aasayana Aasayana\"],\"state\":\"Uttar Pradesh\",\"city\":\"Lucknow\",\"category\":\"Retail And Shopping\",\"subCategory\":\"Books\",\"location\":{\"lat\":26.846227,\"lon\":80.946663},\"contactNo\":[\"8587932548\"],\"displayName\":\"The Book Service\",\"fax\":null,\"startTime\":\"10:00\",\"endTime\":\"20:00\",\"saturdayStartTime\":null,\"saturdayEndTime\":null,\"rating\":null,\"monday\":null,\"tuesday\":null,\"wednesday\":null,\"thurday\":null,\"friday\":null,\"saturday\":null,\"sunday\":null,\"landMark\":null,\"pinCode\":\"226012\",\"servicesOffered\":[\"PAYMENT_POINT\"],\"terminalCode\":\"6283495\",\"establishmentDate\":null,\"emailId\":null,\"logoUrl\":\"https://assetscdn.paytm.com/images/catalog/pg/Retail%20&amp;%20Shopping.jpg\",\"tagLine\":null,\"storeId\":null,\"merchantId\":\"6283495\",\"address1\":\"1\",\"address2\":\"\",\"address3\":\"Aasayana Aasayana\",\"editAble\":true},\"currentCashPointStatus\":\"open\",\"isFavorite\":false,\"distanceFromLocation\":0.07760059905591597,\"offerText\":null,\"dealUrl\":null},.........\n</code></pre>\n\n<p>I am not sure what I am doing wrong and how to proceed with this problem. Any assistance is appreciated!</p>\n"}, {"tags": ["java", "python", "arrays", "sorting", "comparator"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9027578, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Do3jyfj-n5k/AAAAAAAAAAI/AAAAAAAAAwA/fWi3KSiZv_M/photo.jpg?sz=128", "display_name": "Pallavi Reddy Palwai", "link": "https://stackoverflow.com/users/9027578/pallavi-reddy-palwai"}, "edited": false, "score": 0, "creation_date": 1544064709, "post_id": 53642269, "comment_id": 94146840, "body": "<code>Arrays.sort(nums, Comparator.comparingDouble((Integer x) -&gt; x&#47;((double)Math.pow(10, x.toString().length())-1)).reversed());</code>   Slight change to your code worked for me.... Thank you :)"}, {"owner": {"reputation": 49855, "user_id": 5862071, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/II4q8.jpg?s=128&g=1", "display_name": "Ousmane D.", "link": "https://stackoverflow.com/users/5862071/ousmane-d"}, "reply_to_user": {"reputation": 31, "user_id": 9027578, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Do3jyfj-n5k/AAAAAAAAAAI/AAAAAAAAAwA/fWi3KSiZv_M/photo.jpg?sz=128", "display_name": "Pallavi Reddy Palwai", "link": "https://stackoverflow.com/users/9027578/pallavi-reddy-palwai"}, "edited": false, "score": 0, "creation_date": 1544064962, "post_id": 53642269, "comment_id": 94146892, "body": "@PallaviReddyPalwai btw if you&#39;re using <code>Comparator.comparingDouble</code> you don&#39;t need to cast <code>(double)</code>, <code>Arrays.sort(arr, Comparator.comparingDouble((Integer x) -&gt; x&#47;(Math.pow(10, x.toString().length()-1))).reversed());</code>"}], "tags": [], "owner": {"reputation": 49855, "user_id": 5862071, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/II4q8.jpg?s=128&g=1", "display_name": "Ousmane D.", "link": "https://stackoverflow.com/users/5862071/ousmane-d"}, "is_accepted": true, "score": 1, "last_activity_date": 1544051860, "creation_date": 1544051860, "answer_id": 53642269, "question_id": 53642064, "link": "https://stackoverflow.com/questions/53642064/sorting-based-on-a-criteria-java-custom-sort/53642269#53642269", "title": "Sorting based on a criteria Java (Custom Sort)", "body": "<p>For example, sake, let's assume <code>arr</code> is defined as:</p>\n\n<pre><code>Integer[] arr = new Integer[]{1,2,3,4,5}\n</code></pre>\n\n<p>You could acheive the Java equivalent with:</p>\n\n<pre><code>Arrays.sort(arr, Comparator.comparingInt((Integer x) -&gt; x/((int)Math.pow(10, x.toString().length()-1))).reversed());\n</code></pre>\n\n<p>if <code>arr</code> is a <code>List&lt;Integer&gt;</code> then you can do:</p>\n\n<pre><code>arr.sort(Comparator.comparingInt((Integer x) -&gt; x/((int)Math.pow(10, x.toString().length()-1))).reversed());\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 34704, "user_id": 1746118, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/a4a3P.png?s=128&g=1", "display_name": "Naman", "link": "https://stackoverflow.com/users/1746118/naman"}, "is_accepted": false, "score": 1, "last_activity_date": 1544068629, "creation_date": 1544068629, "answer_id": 53644432, "question_id": 53642064, "link": "https://stackoverflow.com/questions/53642064/sorting-based-on-a-criteria-java-custom-sort/53644432#53644432", "title": "Sorting based on a criteria Java (Custom Sort)", "body": "<p>Alternatively if you don't want to modify the existing array <code>arr</code>, you can use :</p>\n\n<pre><code>int[] sortedArr = Arrays.stream(arr)\n        .boxed()\n        .sorted(Comparator.comparingDouble(\n                (Integer x) -&gt; x / (Math.pow(10, x.toString().length() - 1))).reversed())\n        .mapToInt(i -&gt; i)\n        .toArray();\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9027578, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Do3jyfj-n5k/AAAAAAAAAAI/AAAAAAAAAwA/fWi3KSiZv_M/photo.jpg?sz=128", "display_name": "Pallavi Reddy Palwai", "link": "https://stackoverflow.com/users/9027578/pallavi-reddy-palwai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 53642269, "answer_count": 2, "score": 1, "last_activity_date": 1544068629, "creation_date": 1544050686, "last_edit_date": 1544064852, "question_id": 53642064, "link": "https://stackoverflow.com/questions/53642064/sorting-based-on-a-criteria-java-custom-sort", "title": "Sorting based on a criteria Java (Custom Sort)", "body": "<p>How do I sort an Array based on a criteria?</p>\n\n<p>In Python I can do something like this </p>\n\n<pre><code>arr.sort(key=lambda x: x/(10**len(str(x))-1),reverse=True)\n</code></pre>\n\n<p>Example :</p>\n\n<p>arr=[3,30,34,5,9]</p>\n\n<p>After Sorting</p>\n\n<p>arr=[9,5,34,3,30]</p>\n\n<p>How to implement the same using Java?</p>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 755, "user_id": 2926779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nISxg.jpg?s=128&g=1", "display_name": "Madison Courto", "link": "https://stackoverflow.com/users/2926779/madison-courto"}, "edited": false, "score": 0, "creation_date": 1544050440, "post_id": 53642003, "comment_id": 94143407, "body": "Please take a look at <a href=\"https://stackoverflow.com/questions/19468438/beautifulsoup-scraping-using-their-name-and-their-id\" title=\"beautifulsoup scraping using their name and their id\">stackoverflow.com/questions/19468438/&hellip;</a>"}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1544051505, "post_id": 53642003, "comment_id": 94143766, "body": "Use the <code>get()</code> method."}], "answers": [{"tags": [], "owner": {"reputation": 755, "user_id": 2926779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nISxg.jpg?s=128&g=1", "display_name": "Madison Courto", "link": "https://stackoverflow.com/users/2926779/madison-courto"}, "is_accepted": false, "score": 0, "last_activity_date": 1544050594, "creation_date": 1544050594, "answer_id": 53642050, "question_id": 53642003, "link": "https://stackoverflow.com/questions/53642003/using-python-beautifulsoup-to-scrap-html-tag-identifier-values/53642050#53642050", "title": "Using Python &amp; BeautifulSoup to scrap HTML tag identifier values", "body": "<p>Please look at the link in the comment I posted but what I think you are trying to do is something like this;</p>\n\n<pre><code>soup.find(\"a\", {\"uniqueID\": \"someValue\"})\n</code></pre>\n\n<p>If you were to post an example of your code I could tailor this but as you haven't it's rather generic.</p>\n"}, {"comments": [{"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1544051324, "post_id": 53642156, "comment_id": 94143701, "body": "Care to comment the down-vote?"}, {"owner": {"reputation": 755, "user_id": 2926779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nISxg.jpg?s=128&g=1", "display_name": "Madison Courto", "link": "https://stackoverflow.com/users/2926779/madison-courto"}, "edited": false, "score": 0, "creation_date": 1544051470, "post_id": 53642156, "comment_id": 94143756, "body": "You made the edit, I was in the process of commenting. Worth noting he hasn&#39;t explicitly requested to find_all."}], "tags": [], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "is_accepted": true, "score": 0, "last_activity_date": 1544051153, "creation_date": 1544051153, "answer_id": 53642156, "question_id": 53642003, "link": "https://stackoverflow.com/questions/53642003/using-python-beautifulsoup-to-scrap-html-tag-identifier-values/53642156#53642156", "title": "Using Python &amp; BeautifulSoup to scrap HTML tag identifier values", "body": "<p>To get the <code>attributes</code> of an <code>element</code>, you can use the <code>.get()</code> method (<code>python3</code>), i.e.:</p>\n\n<pre><code>&lt;A CLASS=\"someClass\" uniqueID=\"someValue\" anotherID=\"someOtherValue\"&gt;\nHere is the data I can scrape right now.\n&lt;/A&gt;\n</code></pre>\n\n<p>...</p>\n\n<pre><code>_as = xmlSoup.find_all('a')\n\nfor a in _as :\n    print(a.get('CLASS'))\n    print(a.get('uniqueID'))\n    print(a.get('anotherID'))\n    print(a.text))\n</code></pre>\n\n<p>The above will loop all <code>a</code> tags in the html and print the specified attributes of each one.</p>\n"}], "owner": {"reputation": 23, "user_id": 8028013, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IgVmT.jpg?s=128&g=1", "display_name": "deetoo", "link": "https://stackoverflow.com/users/8028013/deetoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 0, "closed_date": 1545071176, "accepted_answer_id": 53642156, "answer_count": 2, "score": 2, "last_activity_date": 1544051153, "creation_date": 1544050337, "question_id": 53642003, "link": "https://stackoverflow.com/questions/53642003/using-python-beautifulsoup-to-scrap-html-tag-identifier-values", "closed_reason": "Duplicate", "title": "Using Python &amp; BeautifulSoup to scrap HTML tag identifier values", "body": "<p>I'm still learning Python, and have been scraping some web data with BeautifulSoup, my question: is it possible to scrape tag ID values?</p>\n\n<p>Maybe it's better to give an example, the HTML code I'm working with looks like this:</p>\n\n<pre><code>&lt;A CLASS=\"someClass\" uniqueID=\"someValue\" anotherID=\"someOtherValue\"&gt;\nHere is the data I can scrape right now.\n&lt;/A&gt;\n</code></pre>\n\n<p>So from the above example, I can successfully scrape whats between the A tag, but I don't know how to grab the value of \"uniqueID\" and \"anotherID\" that exists <em>inside the A tag</em>.</p>\n\n<p>Thanks for any pointers!</p>\n"}, {"tags": ["python", "string", "python-3.x", "escaping"], "comments": [{"owner": {"reputation": 1291, "user_id": 6225617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoIIF.jpg?s=128&g=1", "display_name": "Kian", "link": "https://stackoverflow.com/users/6225617/kian"}, "edited": false, "score": 0, "creation_date": 1544050414, "post_id": 53641996, "comment_id": 94143397, "body": "replace<code>\\n</code> with <code>\\\\n</code>"}], "answers": [{"tags": [], "owner": {"reputation": 176, "user_id": 2591460, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uEr1W.jpg?s=128&g=1", "display_name": "Zino", "link": "https://stackoverflow.com/users/2591460/zino"}, "is_accepted": false, "score": 0, "last_activity_date": 1544050633, "creation_date": 1544050633, "answer_id": 53642056, "question_id": 53641996, "link": "https://stackoverflow.com/questions/53641996/write-newline-value-to-python-file-without-it-making-a-new-line/53642056#53642056", "title": "Write newline value to python file without it making a new line", "body": "<p>Try escaping your backslashes. Right now your backslashes escape the \"n\" characters so that it's interpreted as a newline. You want to escape that whole thing again so what you get is for instance:</p>\n\n<pre><code>    header  = 'From: %s\\\\n' % from_addr\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 182, "user_id": 10177310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3uzY.png?s=128&g=1", "display_name": "Evan Edwards", "link": "https://stackoverflow.com/users/10177310/evan-edwards"}, "edited": false, "score": 1, "creation_date": 1544050813, "post_id": 53642062, "comment_id": 94143523, "body": "This fixed it + other issues in my code! Thank you so much. I&#39;ll accept this as the answer when I can."}, {"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "reply_to_user": {"reputation": 182, "user_id": 10177310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3uzY.png?s=128&g=1", "display_name": "Evan Edwards", "link": "https://stackoverflow.com/users/10177310/evan-edwards"}, "edited": false, "score": 0, "creation_date": 1544050965, "post_id": 53642062, "comment_id": 94143578, "body": "@EvanEdwards You can always accept an answer (to my knowledge). Why can&#39;t you?"}, {"owner": {"reputation": 182, "user_id": 10177310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3uzY.png?s=128&g=1", "display_name": "Evan Edwards", "link": "https://stackoverflow.com/users/10177310/evan-edwards"}, "reply_to_user": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "edited": false, "score": 0, "creation_date": 1544051062, "post_id": 53642062, "comment_id": 94143608, "body": "@EthanK there is a certain amount of time you need to wait before you can (~10 mins.)"}, {"owner": {"reputation": 698, "user_id": 10236724, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Eb946207", "link": "https://stackoverflow.com/users/10236724/eb946207"}, "reply_to_user": {"reputation": 182, "user_id": 10177310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3uzY.png?s=128&g=1", "display_name": "Evan Edwards", "link": "https://stackoverflow.com/users/10177310/evan-edwards"}, "edited": false, "score": 1, "creation_date": 1544051121, "post_id": 53642062, "comment_id": 94143630, "body": "Oh. I didn&#39;t know that. Thanks @EvanEdwards!"}], "tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1544050672, "creation_date": 1544050672, "answer_id": 53642062, "question_id": 53641996, "link": "https://stackoverflow.com/questions/53641996/write-newline-value-to-python-file-without-it-making-a-new-line/53642062#53642062", "title": "Write newline value to python file without it making a new line", "body": "<p>If you don't want Python to process backslash escapes in a string literal, prefix it with <code>r</code>:</p>\n\n<pre><code>f.write(r'''\n...\n''')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1544050934, "post_id": 53642071, "comment_id": 94143566, "body": "That&#39;s going to replace the newlines that are supposed to be newlines, too."}], "tags": [], "owner": {"reputation": 4301, "user_id": 10749432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wviv6.png?s=128&g=1", "display_name": "trsvchn", "link": "https://stackoverflow.com/users/10749432/trsvchn"}, "is_accepted": false, "score": 0, "last_activity_date": 1544050730, "creation_date": 1544050730, "answer_id": 53642071, "question_id": 53641996, "link": "https://stackoverflow.com/questions/53641996/write-newline-value-to-python-file-without-it-making-a-new-line/53642071#53642071", "title": "Write newline value to python file without it making a new line", "body": "<p>Try to <code>replace</code>  <code>\\n</code> to <code>\\\\n</code></p>\n\n<pre><code>f = open('email.py','r+')\nreadcontent = f.read()\nf.seek(0, 0)\nf.write('''\\\ndef sendemail(from_addr, to_addr_list, cc_addr_list, subject, message, login, password, smtpserver='smtp.gmail.com:587'):\n    header  = 'From: %s\\n' % from_addr\n    header += 'To: %s\\n' % ','.join(to_addr_list)\n    header += 'Cc: %s\\n' % ','.join(cc_addr_list)\n    header += 'Subject: %s\\n' % subject\n    message = header + message\n\n    server = smtplib.SMTP(smtpserver)\n    server.starttls()\n    server.login(login,password)\n    problems = server.sendmail(from_addr, to_addr_list, message)\n    server.quit()\n'''.replace('\\n', '\\\\n'))    \nf.close()\n</code></pre>\n"}], "owner": {"reputation": 182, "user_id": 10177310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w3uzY.png?s=128&g=1", "display_name": "Evan Edwards", "link": "https://stackoverflow.com/users/10177310/evan-edwards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 53642062, "answer_count": 3, "score": 3, "last_activity_date": 1544050885, "creation_date": 1544050300, "last_edit_date": 1544050885, "question_id": 53641996, "link": "https://stackoverflow.com/questions/53641996/write-newline-value-to-python-file-without-it-making-a-new-line", "title": "Write newline value to python file without it making a new line", "body": "<p>I have a bit of an odd question but I'm trying to fix an issue I've been having. I have a python script that writes another stored python script to a new file. Problem is the script that it writes contains newline values (\\n.) Instead of writing \\n, it puts it in a new line. Any way around this?</p>\n\n<pre><code>f = open('email.py','r+')\nreadcontent = f.read()\nf.seek(0, 0)\nf.write('''\\\ndef sendemail(from_addr, to_addr_list, cc_addr_list, subject, message, login, password, smtpserver='smtp.gmail.com:587'):\n    header  = 'From: %s\\n' % from_addr\n    header += 'To: %s\\n' % ','.join(to_addr_list)\n    header += 'Cc: %s\\n' % ','.join(cc_addr_list)\n    header += 'Subject: %s\\n' % subject\n    message = header + message\n\n    server = smtplib.SMTP(smtpserver)\n    server.starttls()\n    server.login(login,password)\n    problems = server.sendmail(from_addr, to_addr_list, message)\n    server.quit()\n''')    \nf.close()\n</code></pre>\n\n<p>I tried this but it didn't work:</p>\n\n<pre><code>f = open('email.py','r+',newline=None)\n</code></pre>\n\n<p>Any suggestions?</p>\n"}, {"tags": ["python", "post", "python-requests", "google-forms"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9393842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c7f376e181457b1f01be213ad6fd0ef?s=128&d=identicon&r=PG", "display_name": "GinTora", "link": "https://stackoverflow.com/users/9393842/gintora"}, "edited": false, "score": 0, "creation_date": 1544061098, "post_id": 53642227, "comment_id": 94146035, "body": "Thanks a lot! It did work! But why don&#39;t I need to send headers? Because I&#39;v seen other stackoverflows on that and they did include a header. Curious to know : P Thanks again !"}, {"owner": {"reputation": 518, "user_id": 7268121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c558b80efdf5e3f18fb0719f66726be?s=128&d=identicon&r=PG&f=1", "display_name": "sarbot", "link": "https://stackoverflow.com/users/7268121/sarbot"}, "reply_to_user": {"reputation": 23, "user_id": 9393842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c7f376e181457b1f01be213ad6fd0ef?s=128&d=identicon&r=PG", "display_name": "GinTora", "link": "https://stackoverflow.com/users/9393842/gintora"}, "edited": false, "score": 0, "creation_date": 1544092189, "post_id": 53642227, "comment_id": 94156968, "body": "of cause you can send the header as well, just wanted to give a minimal working example."}], "tags": [], "owner": {"reputation": 518, "user_id": 7268121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3c558b80efdf5e3f18fb0719f66726be?s=128&d=identicon&r=PG&f=1", "display_name": "sarbot", "link": "https://stackoverflow.com/users/7268121/sarbot"}, "is_accepted": true, "score": 2, "last_activity_date": 1544053463, "last_edit_date": 1544053463, "creation_date": 1544051601, "answer_id": 53642227, "question_id": 53641994, "link": "https://stackoverflow.com/questions/53641994/sending-a-post-request-to-google-forms-in-python/53642227#53642227", "title": "Sending a POST request to google forms in Python", "body": "<h2>Update:</h2>\n\n<p>I've been wrong. The error is not caused by missing or invalid data of your session. The code example below (the use of session) is not required! I just changed the URL from your code example to the link from your question and it worked for me:</p>\n\n<pre><code>import requests\nurl = 'https://docs.google.com/forms/d/e/1FAIpQLSeI3-jkg0oedRXECibaxbGZiFyOHGYjvNiOXcADBK9Qq__gUg/formResponse'\nform_data = {\"entry.386860893\":\"Python\",\"fvv\":1,\"draftResponse\":'[]',\"pageHistory\":0,\"fbzx\":-6718008993703688486}\nrequests.post(url, data=form_data)  # response [200]\n</code></pre>\n\n<h2>Original answer:</h2>\n\n<p>Probably you need to fetch a token or something first. For interactive communication with a website I'd recommend using <code>requests.Session()</code> to handle interactions with a webpage.\n<a href=\"http://docs.python-requests.org/en/master/user/advanced/\" rel=\"nofollow noreferrer\">http://docs.python-requests.org/en/master/user/advanced/</a>\nIf I use the link from your code example I get bad request error as well, but using the link from your question this works:</p>\n\n<pre><code>url1 = 'https://docs.google.com/forms/d/e/1FAIpQLSeI3-jkg0oedRXECibaxbGZiFyOHGYjvNiOXcADBK9Qq__gUg/viewform'\nurl2 = 'https://docs.google.com/forms/d/e/1FAIpQLSeI3-jkg0oedRXECibaxbGZiFyOHGYjvNiOXcADBK9Qq__gUg/formResponse'\nform_data = {\"entry.386860893\":\"Python\",\"fvv\":1,\"draftResponse\":'[]',\"pageHistory\":0,\"fbzx\":-6718008993703688486}\n\ns = requests.Session()\ns.get(url)\nr = s.post(url2, data=form_data)\nprint(r)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1539, "user_id": 11616717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12cdbe1b931109671227d3261ffe4cfe?s=128&d=identicon&r=PG&f=1", "display_name": "Axois", "link": "https://stackoverflow.com/users/11616717/axois"}, "is_accepted": false, "score": 0, "last_activity_date": 1594119025, "creation_date": 1594119025, "answer_id": 62773578, "question_id": 53641994, "link": "https://stackoverflow.com/questions/53641994/sending-a-post-request-to-google-forms-in-python/62773578#62773578", "title": "Sending a POST request to google forms in Python", "body": "<p>A little late but, I found out that one of the possible reason why you are getting a response error of 400 is because when using the <code>requests</code> module, the posted data is automatically url encoded. Hence posting options that contains characters such as &quot;+&quot;, &quot;@&quot; ..etc will cause a bad form error (google form replaces whitespaces by +).</p>\n<p>Hence, one way you can work around this is to have the request post http URL instead by passing a string.</p>\n<pre><code>url = &quot;https://docs.google.com/forms/xxx/formResponse&quot;\nstring = &quot;entry.xxx=Option+1&amp;entry.xxx=option2&quot;\nr = requests.post(url, params = string)\n</code></pre>\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 23, "user_id": 9393842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c7f376e181457b1f01be213ad6fd0ef?s=128&d=identicon&r=PG", "display_name": "GinTora", "link": "https://stackoverflow.com/users/9393842/gintora"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3145, "favorite_count": 0, "accepted_answer_id": 53642227, "answer_count": 2, "score": 2, "last_activity_date": 1594119025, "creation_date": 1544050281, "question_id": 53641994, "link": "https://stackoverflow.com/questions/53641994/sending-a-post-request-to-google-forms-in-python", "title": "Sending a POST request to google forms in Python", "body": "<p>So I created a google form, here's the link : <a href=\"https://docs.google.com/forms/d/e/1FAIpQLSeI3-jkg0oedRXECibaxbGZiFyOHGYjvNiOXcADBK9Qq__gUg/viewform\" rel=\"nofollow noreferrer\">https://docs.google.com/forms/d/e/1FAIpQLSeI3-jkg0oedRXECibaxbGZiFyOHGYjvNiOXcADBK9Qq__gUg/viewform</a></p>\n\n<p>I want to answer with Python from Python, I tried but it returns 400, bad request.</p>\n\n<p>This is my code :</p>\n\n<pre><code>\nimport requests\ndef f():\n  url = 'https://docs.google.com/forms/d/e/1FAIpQLSedKV-pzCYZjnp-tAm6Ww9HMoosYPucSL2y9usEIz6yBizbFg/formResponse'\n  form_data = {\"entry.386860893\":\"Python\",\"fvv\":1,\"draftResponse\":'[]',\"pageHistory\":0,\"fbzx\":-6718008993703688486}\n  user_agent = {'Refer':'https://docs.google.com/forms/d/e/1FAIpQLSeI3-jkg0oedRXECibaxbGZiFyOHGYjvNiOXcADBK9Qq__gUg/viewform?fbzx=-6860115379139697000','User-Agent':'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.110 Safari/537.36'}\n  r = requests.post(url, data=form_data, headers=user_agent)\n  print(r)\n\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 20969, "user_id": 2314737, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/RF6KX.jpg?s=128&g=1", "display_name": "user2314737", "link": "https://stackoverflow.com/users/2314737/user2314737"}, "edited": false, "score": 2, "creation_date": 1544051458, "post_id": 53641975, "comment_id": 94143751, "body": "You should post an excerpt from your file (and include it in the question as text) and the desired transformed dataset. This will not only help us answering but it will make the question potentially useful for future readers (see also <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>)."}, {"owner": {"reputation": 1547, "user_id": 1531637, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/c20fe0c775af7924867bda25632c928b?s=128&d=identicon&r=PG", "display_name": "Plasma", "link": "https://stackoverflow.com/users/1531637/plasma"}, "edited": false, "score": 0, "creation_date": 1544087643, "post_id": 53641975, "comment_id": 94154358, "body": "Forgive me if I&#39;ve misunderstood your code, but if you&#39;re simply finding values equalling 1000 and replacing them with the values from the previous row, you could replace your values == 1000 with NaNs, and use some sort of filling to replace the NaNs (either <code>fillna()</code> or <code>interpolate()</code>). E.g.: <code>df[&quot;Value&quot;].replace(1000, np.NaN, inplace=True); df[&quot;Value&quot;].interpolate(method=&quot;values&quot;, inplace=True)</code>"}, {"owner": {"reputation": 1, "user_id": 10751593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5DbiW0Dw8wU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gIYZk9XdzYqUUbuaO2LFGmHuw1Fw/mo/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/10751593/justin"}, "edited": false, "score": 0, "creation_date": 1544094020, "post_id": 53641975, "comment_id": 94158055, "body": "I am finding values with 1000, however im not replacing them with the last found value of that rows object_id. Im using the other object_id&#39;s to fill in the gap by looking how much they have risen/dropped in %."}], "answers": [{"tags": [], "owner": {"reputation": 2861, "user_id": 596841, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/9f4e5364ebc28bbbb6744e50e08e1447?s=128&d=identicon&r=PG", "display_name": "pookie", "link": "https://stackoverflow.com/users/596841/pookie"}, "is_accepted": false, "score": 0, "last_activity_date": 1544136557, "creation_date": 1544136557, "answer_id": 53660860, "question_id": 53641975, "link": "https://stackoverflow.com/questions/53641975/python-what-to-use-instead-of-itterrows-in-this-case/53660860#53660860", "title": "Python, what to use instead of itterrows in this case?", "body": "<p>I cannot tell from your explanation what exactly you want to achieve. I assume that </p>\n\n<ul>\n<li>1) you want to find all rows where the value of <code>Value</code> (you must use another name here...) is <code>equal to 1000</code>, because it represents an error reading. </li>\n<li>2) that you then want to replace the <code>1000</code> with something more representative, for example, by using interpolation. </li>\n</ul>\n\n<p>I will work from those two assumptions. I use the <code>temp</code> column to represent your <code>value</code> column.</p>\n\n<pre><code>import pandas as pd\nimport numpy as np\nfrom datetime import datetime, timedelta\n\n# seed for reproducibility\nnp.random.seed(seed=1111)\n\n# generate a dataframe with random datetimes and values\ndate_today = datetime.now()\ndays = pd.date_range(date_today, date_today + timedelta(1000), freq='D')\ndata = np.random.randint(1, high=100, size=len(days))\ndf = pd.DataFrame({'the_date': days, 'temp': data})\ndf = df.set_index('the_date')\n\nprint(df)\n\n# get all the indicies of the temp column where the value equals 23. Change it to 1000 for your data.\nselect_indices = list(np.where(df[\"temp\"] == 23)[0])\n\n# replace all values in the temp column that equal 23 with NAN. Change 23 to 1000 for your data.\ndf.loc[df['temp'] == 23] = np.nan\n\n# interpolate the data and replace the NAN's\ninterpolated_df = df.interpolate(method='linear', axis=0).ffill().bfill()\n\n# get the interpolated rows, just to see what values the NAN's were replaced with\ninterpolated_rows = interpolated_df.iloc[select_indices]\n\nprint(interpolated_rows)\n</code></pre>\n\n<p>Hopefully this helps.</p>\n"}], "owner": {"reputation": 1, "user_id": 10751593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5DbiW0Dw8wU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gIYZk9XdzYqUUbuaO2LFGmHuw1Fw/mo/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/10751593/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 226, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544136557, "creation_date": 1544050200, "question_id": 53641975, "link": "https://stackoverflow.com/questions/53641975/python-what-to-use-instead-of-itterrows-in-this-case", "title": "Python, what to use instead of itterrows in this case?", "body": "<p>im trying to speed up my program, im fairly new to python and pandas and i just used this code to see if it worked and it does, however is there a way to speed it up. I know itterrows is very slow and maybe the .apply function is faster but i have no clue how to use it when i want to use the current row position in it. Maybe one of u can help me out.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>for i, row in df.iterrows():\n    if df.iloc[i, 2] == 1000:\n        list = []\n        datum = df.iloc[i, 0]\n        id = df.iloc[i, 1]\n        for j, row in df.iterrows():\n            if df.iloc[j, 0] == datum:\n                if df.iloc[j, 0] != id:\n                    waarde = df.iloc[j, 2]\n                    if waarde != 1000:\n                        waarde2 = df.iloc[j-1, 2]\n                        respectivelijk = waarde / waarde2\n                        # print(waarde)\n                        # print(waarde2)\n                        # print(respectivelijk)\n                        list.append(respectivelijk)\n        # print(list)\n        gem = sum(list) / len(list)\n        # print(gem)\n        # print(df.iloc[i-1, 2])\n        correcte_waarde = (gem * df.iloc[i-1, 2])\n        # print(correcte_waarde)\n        df.set_value(i, 'water_level', correcte_waarde)\n</code></pre>\n\n<p>My dataframe looks like this:\n<a href=\"https://gyazo.com/0fdce9cbac81562195e4f24d55eac9a9\" rel=\"nofollow noreferrer\">https://gyazo.com/0fdce9cbac81562195e4f24d55eac9a9</a>\nI am using this code to replace the errors(value 1000) with a value based on the changes in value of the other objects. For example if all other objects rise 50% in the hour missing i can presume/estimate the missing value will rise 50% aswell.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1544051660, "post_id": 53641965, "comment_id": 94143806, "body": "It is not clear what you want."}, {"owner": {"reputation": 37954, "user_id": 905902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a18869332564b1c3dfad9586d37095b2?s=128&d=identicon&r=PG", "display_name": "wildplasser", "link": "https://stackoverflow.com/users/905902/wildplasser"}, "edited": false, "score": 0, "creation_date": 1544057899, "post_id": 53641965, "comment_id": 94145409, "body": "maybe <code>zzz = &#39; &#39;.join(table)</code> ?"}], "owner": {"reputation": 27, "user_id": 10732538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c8a73857e21ed0d1be0e335f269b424?s=128&d=identicon&r=PG&f=1", "display_name": "what_in", "link": "https://stackoverflow.com/users/10732538/what-in"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 295, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544051099, "creation_date": 1544050146, "last_edit_date": 1544051099, "question_id": 53641965, "link": "https://stackoverflow.com/questions/53641965/how-do-i-add-space-between-elements-in-list-comprehension-python-3", "title": "How do I add space between elements in list comprehension? Python 3", "body": "<p>I've created a matrix with this: </p>\n\n<pre><code>table = [list('*'*4) for i in range(4)]\n</code></pre>\n\n<p>how do I add empty spaces between every element ('*')?</p>\n"}, {"tags": ["python", "django"], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 9748259, "user_type": "registered", "profile_image": "https://graph.facebook.com/665057240492533/picture?type=large", "display_name": "Mauricio Kalfelz", "link": "https://stackoverflow.com/users/9748259/mauricio-kalfelz"}, "edited": false, "score": 0, "creation_date": 1544106164, "post_id": 53643250, "comment_id": 94165283, "body": "it worked fine, but now when it saves and stays on the same page the checkout = models.DateTimeField (null = True, blank = True) does not update with the data, only if I exit and enter the page"}], "tags": [], "owner": {"reputation": 703, "user_id": 9155483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8fbecdf5520003b90560619a6e4c0b30?s=128&d=identicon&r=PG&f=1", "display_name": "rchurch4", "link": "https://stackoverflow.com/users/9155483/rchurch4"}, "is_accepted": false, "score": 0, "last_activity_date": 1544059336, "creation_date": 1544059336, "answer_id": 53643250, "question_id": 53641959, "link": "https://stackoverflow.com/questions/53641959/when-saving-form-i-need-it-to-save-and-continue-on-the-same-page/53643250#53643250", "title": "when saving form I need it to save and continue on the same page", "body": "<p>The problem lies in here:</p>\n\n<pre><code>    if request.method == 'POST':\n        if form.is_valid():\n            form.save()\n            return redirect('core_lista_movrotativos')\n</code></pre>\n\n<p>On the last line there, you redirect to <code>core_lista_movrotativos</code></p>\n\n<p>You should, just like when it's not a POST method, redirect to the current page:\n<code>render(request, 'core/update_movrotativos.html', data)</code>.</p>\n"}], "owner": {"reputation": 79, "user_id": 9748259, "user_type": "registered", "profile_image": "https://graph.facebook.com/665057240492533/picture?type=large", "display_name": "Mauricio Kalfelz", "link": "https://stackoverflow.com/users/9748259/mauricio-kalfelz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544059336, "creation_date": 1544050121, "last_edit_date": 1544050665, "question_id": 53641959, "link": "https://stackoverflow.com/questions/53641959/when-saving-form-i-need-it-to-save-and-continue-on-the-same-page", "title": "when saving form I need it to save and continue on the same page", "body": "<p>I need to save the form, it stays on the same page with the updated form that was saved that does not go to core_list_movrotative but stays in 'core / update_movrotativos.html'   </p>\n\n<pre><code>@login_required    \n    def movrotativos_update(request, id):\n        data = {}\n        mov_rotativo = MovRotativo.objects.get(id=id)\n        form = MovRotativoForm(request.POST or None, instance=mov_rotativo)\n        data['mov_rotativo'] = mov_rotativo\n        data['form'] = form\n\n         if request.method == 'POST':\n            if form.is_valid():\n                form.save()\n                return redirect('core_lista_movrotativos')\n        else:\n            return render(request, 'core/update_movrotativos.html', data)\n</code></pre>\n"}, {"tags": ["python", "class", "methods", "arguments"], "comments": [{"owner": {"reputation": 4743, "user_id": 141789, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/57fdd140f26a1d683a056e11250451e4?s=128&d=identicon&r=PG", "display_name": "Karl", "link": "https://stackoverflow.com/users/141789/karl"}, "edited": false, "score": 2, "creation_date": 1544050738, "post_id": 53641945, "comment_id": 94143506, "body": "Yes that is an entirely valid approach. In fact, that is exactly what instance attributes are there for. They are there to store the <code>state</code> of your instance. In this case, your function updates the state of <code>self.x</code>to <code>&quot;yes &quot; + str(x)</code>. (I&#39;m not sure what you want to achieve with the <code>try</code>, <code>except</code> clauses, but I presume that isn&#39;t important here)"}, {"owner": {"reputation": 59, "user_id": 9674112, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rattja", "link": "https://stackoverflow.com/users/9674112/rattja"}, "reply_to_user": {"reputation": 4743, "user_id": 141789, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/57fdd140f26a1d683a056e11250451e4?s=128&d=identicon&r=PG", "display_name": "Karl", "link": "https://stackoverflow.com/users/141789/karl"}, "edited": false, "score": 0, "creation_date": 1544054611, "post_id": 53641945, "comment_id": 94144612, "body": "Well the <code>try</code>,<code>except</code> is there for the first two times it is called and <code>self.x</code> is not yet defined. Without it I&#39;d end up with an <code>AttributeError</code>. I was mainly looking for a way to avoid those lines, and looks like Taras Savchyn&#39;s answer provided me with just that."}, {"owner": {"reputation": 4743, "user_id": 141789, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/57fdd140f26a1d683a056e11250451e4?s=128&d=identicon&r=PG", "display_name": "Karl", "link": "https://stackoverflow.com/users/141789/karl"}, "edited": false, "score": 0, "creation_date": 1544093656, "post_id": 53641945, "comment_id": 94157846, "body": "If Taras Savchyn&#39;s answer solves your problem, then please mark it as the accepted answer!"}], "answers": [{"tags": [], "owner": {"reputation": 4301, "user_id": 10749432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wviv6.png?s=128&g=1", "display_name": "trsvchn", "link": "https://stackoverflow.com/users/10749432/trsvchn"}, "is_accepted": true, "score": 0, "last_activity_date": 1544052874, "creation_date": 1544052874, "answer_id": 53642431, "question_id": 53641945, "link": "https://stackoverflow.com/questions/53641945/is-there-a-better-way-of-remembering-previously-given-optional-method-arguments/53642431#53642431", "title": "Is there a better way of remembering previously given optional method arguments in Python?", "body": "<p>You can also do that using class attributes. Here we used class attribute <code>x</code> to store our default value first, and then to store previously entered value:</p>\n\n<p>Code:</p>\n\n<pre><code>class someclass:\n    x = None\n    def test(self, x=x):\n        if x:\n            someclass.x = \"yes \" + str(x)\n        if someclass.x:\n            print(someclass.x)\n\na = someclass()\n\na.test()\na.test()\na.test(5)\na.test()\na.test()\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 9674112, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rattja", "link": "https://stackoverflow.com/users/9674112/rattja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 53642431, "answer_count": 1, "score": 0, "last_activity_date": 1544052874, "creation_date": 1544050037, "question_id": 53641945, "link": "https://stackoverflow.com/questions/53641945/is-there-a-better-way-of-remembering-previously-given-optional-method-arguments", "title": "Is there a better way of remembering previously given optional method arguments in Python?", "body": "<p>So I've been fiddeling around with classes as I try to make sense of them, and came across the need to have my methods remember previously given arguments. This was because I wanted to trigger a method without passing new arguments, and instead just use the same arguments from before.\nSince I was triggering this from somewhere else I thought it would be easier to try and make the class remember the variables and use the memory if no new arguments was passed.</p>\n\n<p>What I ended up with was basically this:</p>\n\n<pre><code>class someclass:\n    def test(self, x=None):\n        if x:\n            self.x = \"yes \" + str(x)\n        try:\n            print(self.x)\n        except AttributeError:\n            pass\n\na = someclass()\n\na.test()\na.test()\na.test(5)\na.test()\na.test()\n</code></pre>\n\n<p>So the first two times it is called, <code>self.x</code> is not yet defined so it passes. Any time after that it remembers the 5 that was given only once.</p>\n\n<p>So my question is mainly if there is a simpler/better way of writing this block, but also if this is somehow bad practice that will cause me problems later.</p>\n"}, {"tags": ["python", "pandas", "numpy"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 10751958, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hJKhc7hdTNc/AAAAAAAAAAI/AAAAAAAAFiQ/JmsuQRx1tGA/photo.jpg?sz=128", "display_name": "Bernardo Falcao", "link": "https://stackoverflow.com/users/10751958/bernardo-falcao"}, "edited": false, "score": 0, "creation_date": 1544055876, "post_id": 53641989, "comment_id": 94144928, "body": "Hi @Axel,  Thank you for your help.     I tried your suggestion, but it happens to create list from row 1 to 249 and then from 250 to 499, instead of 1 to 249, 2 to 250, 3 to 251 and so on. Here&#39;s what I wrote with your suggestion:               step = 250 prices_list = [prices[i:i + step] for i in range(0, len(prices), step)]"}, {"owner": {"reputation": 1122, "user_id": 4724240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1xpq.jpg?s=128&g=1", "display_name": "Axel Puig", "link": "https://stackoverflow.com/users/4724240/axel-puig"}, "reply_to_user": {"reputation": 27, "user_id": 10751958, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hJKhc7hdTNc/AAAAAAAAAAI/AAAAAAAAFiQ/JmsuQRx1tGA/photo.jpg?sz=128", "display_name": "Bernardo Falcao", "link": "https://stackoverflow.com/users/10751958/bernardo-falcao"}, "edited": false, "score": 0, "creation_date": 1544056375, "post_id": 53641989, "comment_id": 94145027, "body": "Oh sorry. Corrected."}, {"owner": {"reputation": 27, "user_id": 10751958, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hJKhc7hdTNc/AAAAAAAAAAI/AAAAAAAAFiQ/JmsuQRx1tGA/photo.jpg?sz=128", "display_name": "Bernardo Falcao", "link": "https://stackoverflow.com/users/10751958/bernardo-falcao"}, "edited": false, "score": 0, "creation_date": 1544059284, "post_id": 53641989, "comment_id": 94145667, "body": "Perfect, it worked. Thank you.   Is there any way to refer directly to, for instance, the 45th iteration?"}, {"owner": {"reputation": 1122, "user_id": 4724240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1xpq.jpg?s=128&g=1", "display_name": "Axel Puig", "link": "https://stackoverflow.com/users/4724240/axel-puig"}, "reply_to_user": {"reputation": 27, "user_id": 10751958, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hJKhc7hdTNc/AAAAAAAAAAI/AAAAAAAAFiQ/JmsuQRx1tGA/photo.jpg?sz=128", "display_name": "Bernardo Falcao", "link": "https://stackoverflow.com/users/10751958/bernardo-falcao"}, "edited": false, "score": 0, "creation_date": 1544060579, "post_id": 53641989, "comment_id": 94145909, "body": "With the first solution, of course: <code>dataframe_list[45]</code>, but with the generator, it is not possible (or you have to do a loop with the <code>next</code> function, very inefficient). If you need it, you can just write <code>dataframe[45:45 + step]</code>"}], "tags": [], "owner": {"reputation": 1122, "user_id": 4724240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1xpq.jpg?s=128&g=1", "display_name": "Axel Puig", "link": "https://stackoverflow.com/users/4724240/axel-puig"}, "is_accepted": true, "score": 2, "last_activity_date": 1544056383, "last_edit_date": 1544056383, "creation_date": 1544050250, "answer_id": 53641989, "question_id": 53641927, "link": "https://stackoverflow.com/questions/53641927/python-slice-dataframe-in-several-smaller-dataframes/53641989#53641989", "title": "Python - Slice Dataframe in several smaller dataframes", "body": "<p>You can create a list of these dataframes this way:</p>\n\n<pre><code>step = 250\ndataframe_list = [dataframe[i:i + step] for i in range(len(dataframe) - step)]\n</code></pre>\n\n<p>if you want to use this in a loop only once, you can use a generator to use less memory.</p>\n\n<pre><code>dataframe_generator = (dataframe[i:i + step] for i in range(len(dataframe) - step))\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 10751958, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hJKhc7hdTNc/AAAAAAAAAAI/AAAAAAAAFiQ/JmsuQRx1tGA/photo.jpg?sz=128", "display_name": "Bernardo Falcao", "link": "https://stackoverflow.com/users/10751958/bernardo-falcao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 53641989, "answer_count": 1, "score": 1, "last_activity_date": 1544062204, "creation_date": 1544049959, "last_edit_date": 1544062204, "question_id": 53641927, "link": "https://stackoverflow.com/questions/53641927/python-slice-dataframe-in-several-smaller-dataframes", "title": "Python - Slice Dataframe in several smaller dataframes", "body": "<p>I have a dataframe with 3000 rows, sorted by date, and 5 columns.</p>\n\n<p>I need to slice this dataframe in several ones, of 251 days, using a loop. So the first one will have from day 1 to day 251, the 2nd one from day 2 to 252, and so on.</p>\n\n<p>Then, I want to save it, so then I can iterate a function over it.</p>\n\n<p>Can you please help me?\nThanks in advance.</p>\n\n<p>[SOLVED]</p>\n"}, {"tags": ["python", "sqlalchemy", "migration", "alembic"], "answers": [{"comments": [{"owner": {"reputation": 2935, "user_id": 2225054, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/25a347064db0e32e2ac22c21d950f7c9?s=128&d=identicon&r=PG&f=1", "display_name": "Alfonso P&#233;rez", "link": "https://stackoverflow.com/users/2225054/alfonso-p%c3%a9rez"}, "edited": false, "score": 0, "creation_date": 1549410355, "post_id": 54541984, "comment_id": 95890311, "body": "This is what I feared was the only solution. Thank you!"}, {"owner": {"reputation": 192, "user_id": 1958544, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1f90f2721c70a3db5a1088312ebedffc?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Albrycht", "link": "https://stackoverflow.com/users/1958544/micha%c5%82-albrycht"}, "edited": false, "score": 0, "creation_date": 1599654953, "post_id": 54541984, "comment_id": 112839493, "body": "This answer is great. But please change <code>transactions_per_migration</code> to <code>transaction_per_migration</code> as this is valid param name. I was looking for that name in my code and couldn&#39;t find because of that typo."}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 192, "user_id": 1958544, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1f90f2721c70a3db5a1088312ebedffc?s=128&d=identicon&r=PG", "display_name": "Micha\u0142 Albrycht", "link": "https://stackoverflow.com/users/1958544/micha%c5%82-albrycht"}, "edited": false, "score": 0, "creation_date": 1599682562, "post_id": 54541984, "comment_id": 112852490, "body": "@Micha\u0142Albrycht: oops, thanks for spotting that! Corrected."}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": false, "score": 4, "last_activity_date": 1599682548, "last_edit_date": 1599682548, "creation_date": 1549396076, "answer_id": 54541984, "question_id": 53641912, "link": "https://stackoverflow.com/questions/53641912/how-to-disable-ddl-transaction-in-an-alembic-migration/54541984#54541984", "title": "How to disable DDL transaction in an alembic migration", "body": "<p>Alembic has two modes of using transactions:</p>\n<ul>\n<li>One transaction for the whole migration command. If there are multiple versions to apply, then they all run in that single transaction.</li>\n<li>Use a separate transaction per migration step.</li>\n</ul>\n<p>By default a single transaction is used, but you can call <code>context.configure()</code> in your <code>env.py</code> script to set <a href=\"https://alembic.sqlalchemy.org/en/latest/api/runtime.html#alembic.runtime.environment.EnvironmentContext.configure.params.transaction_per_migration\" rel=\"nofollow noreferrer\"><code>transaction_per_migration</code></a> to true to use separate transactions.</p>\n<p>The first and default option, to use a single transaction, is executed in the <code>env.py</code> file that Alembic generates for you, in the <code>run_migrations_online()</code> function in that file:</p>\n<pre><code>try:\n    with context.begin_transaction():\n        context.run_migrations()\nfinally:\n    connection.close()\n</code></pre>\n<p>You could either just edit that file to remove the <code>with context.begin_transaction():</code> context manager, or use the <a href=\"https://alembic.sqlalchemy.org/en/latest/cookbook.html#conditional-migration-elements\" rel=\"nofollow noreferrer\"><code>context.get_x_argument()</code> feature</a> to toggle transactions on the basis of a command-line switch:</p>\n<pre><code>try:\n    # Python 3.7+\n    from contextlib import nullcontext\nexcept ImportError:\n    # Earlier Python versions\n    from contextlib import contextmanager\n    @contextmanager\n    def nullcontext():\n        yield\n\n# ...\n\ndef run_migrations_online():\n    # ...\n    if context.get_x_argument(as_dictionary=True).get('no-transaction', False):\n        transaction_cm = nullcontext()\n    else:\n        transaction_cm = context.begin_transaction()\n    try:\n        with transaction_cm:\n            context.run_migrations()\n    finally:\n        connection.close()\n</code></pre>\n<p>Unfortunately, it is not easy to disable transactions <em>per migration step</em>. You'd have do disable transactions entirely (just don't use <code>context.begin_transaction()</code> in <code>env.py</code>), then explicitly use a transaction per <code>upgrade()</code> or <code>downgrade()</code> step:</p>\n<pre><code>def run_migrations_online():\n    # ...\n\n    try:\n        # no with context.begin_transaction() here\n        context.run_migrations()\n    finally:\n        connection.close()\n</code></pre>\n<p>and in each migration step:</p>\n<pre><code>def upgrade():\n    with context.begin_transaction():\n        # ### commands auto generated by Alembic - please adjust! ###\n        op.create_table(\n            # ...\n        )\n        # etc.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 787, "user_id": 1162903, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e645c4d21d9b74b07b105648cad42d5a?s=128&d=identicon&r=PG", "display_name": "yoz", "link": "https://stackoverflow.com/users/1162903/yoz"}, "is_accepted": false, "score": 4, "last_activity_date": 1589393720, "creation_date": 1589393720, "answer_id": 61781932, "question_id": 53641912, "link": "https://stackoverflow.com/questions/53641912/how-to-disable-ddl-transaction-in-an-alembic-migration/61781932#61781932", "title": "How to disable DDL transaction in an alembic migration", "body": "<p>This can be done using an autocommit block:</p>\n\n<pre><code>with op.get_context().autocommit_block():\n  op.execute(...)\n</code></pre>\n\n<p><a href=\"https://alembic.sqlalchemy.org/en/latest/api/runtime.html#alembic.runtime.migration.MigrationContext.autocommit_block\" rel=\"nofollow noreferrer\">https://alembic.sqlalchemy.org/en/latest/api/runtime.html#alembic.runtime.migration.MigrationContext.autocommit_block</a></p>\n\n<blockquote>\n  <p>This special directive is intended to support the occasional database DDL or system operation that specifically has to be run outside of any kind of transaction block. The PostgreSQL database platform is the most common target for this style of operation, as many of its DDL operations must be run outside of transaction blocks, even though the database overall supports transactional DDL.</p>\n</blockquote>\n\n<p>Note that there are some caveats:</p>\n\n<blockquote>\n  <p>Warning: <strong>As is necessary, the database transaction preceding the block is unconditionally committed.</strong> This means that the run of migrations preceding the operation will be committed, before the overall migration operation is complete.\n  It is recommended that when an application includes migrations with \u201cautocommit\u201d blocks, that <code>EnvironmentContext.transaction_per_migration</code> be used so that the calling environment is tuned to expect short per-file migrations whether or not one of them has an autocommit block.</p>\n</blockquote>\n"}], "owner": {"reputation": 31, "user_id": 10751902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b105bd3aac36047c30a6cda3461bba66?s=128&d=identicon&r=PG&f=1", "display_name": "JamesC", "link": "https://stackoverflow.com/users/10751902/jamesc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1835, "favorite_count": 2, "answer_count": 2, "score": 3, "last_activity_date": 1599682548, "creation_date": 1544049894, "last_edit_date": 1549412266, "question_id": 53641912, "link": "https://stackoverflow.com/questions/53641912/how-to-disable-ddl-transaction-in-an-alembic-migration", "title": "How to disable DDL transaction in an alembic migration", "body": "<p>I am trying to run an alembic transaction. However, all migrations run in a transaction whenever transactions are supported (see <a href=\"https://stackoverflow.com/questions/22095039/run-alembic-upgrade-migrations-in-a-transaction\">Run alembic upgrade migrations in a transaction</a>). How do I disable transaction for a specific migration?</p>\n"}, {"tags": ["python", "numpy", "multidimensional-array"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1544049959, "post_id": 53641835, "comment_id": 94143242, "body": "It&#39;s difficult to understand what you&#39;re asking.  But if you&#39;re trying to make a jagged numpy array, just don&#39;t.  numpy isn&#39;t meant to deal with that."}, {"owner": {"reputation": 85, "user_id": 8509499, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wmoky2FLxbU/AAAAAAAAAAI/AAAAAAAAAAA/do1CyLQBM8w/photo.jpg?sz=128", "display_name": "wwwwwwwwww", "link": "https://stackoverflow.com/users/8509499/wwwwwwwwww"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1544132892, "post_id": 53641835, "comment_id": 94178617, "body": "Yes, I was trying to make a jagged numpy array.  Thank you for your help :)"}], "owner": {"reputation": 85, "user_id": 8509499, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wmoky2FLxbU/AAAAAAAAAAI/AAAAAAAAAAA/do1CyLQBM8w/photo.jpg?sz=128", "display_name": "wwwwwwwwww", "link": "https://stackoverflow.com/users/8509499/wwwwwwwwww"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544049469, "creation_date": 1544049469, "question_id": 53641835, "link": "https://stackoverflow.com/questions/53641835/how-to-make-a-numpy-3d-array-with-different-length-in-the-2nd-dimension", "title": "How to make a Numpy 3D array with different length in the 2nd dimension?", "body": "<p>I have some code that constructs a 3D numpy array (x_3d) on the fly using values from a 2D numpy array (x) in a forloop</p>\n\n<pre><code>x_3d = np.empty((0, 20, 10))\nfor i in range(num_samples):\n    x_3d = np.append(x_3d, [x[i*20:(i+1)*20, :]],\n                     axis=0)         \n</code></pre>\n\n<p>The resulting shape of the 3D array is (num_samples, 20, 10).  </p>\n\n<p>If I want to take slices of different length from the 2D array so that the number of rows varies how can I do that?  I have looked at this <a href=\"https://stackoverflow.com/questions/52024847/how-to-index-several-2d-numpy-arrays-with-different-number-of-rows-in-a-3d-array\">post</a>.  By storing the 2D arrays initially in a list, and then transform the list back to an array gave me the shape of (num_samples, ), while each element is a 2D numpy array it is not a 3D numpy array with the shape of (num_samples, length_varies, 10).   </p>\n"}, {"tags": ["python", "list", "sorting"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 5, "creation_date": 1544049508, "post_id": 53641813, "comment_id": 94143084, "body": "<code>list.sort()</code> sorts the list in place \u2013 but it is a function, and it does not return the list. It&#39;s kinda of mentioned in <a href=\"https://docs.python.org/3/library/stdtypes.html#list.sort\" rel=\"nofollow noreferrer\">the official documentation</a> \u2013 always a good place to check, I must add."}, {"owner": {"reputation": 3047, "user_id": 10388629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/My8T3.png?s=128&g=1", "display_name": "Pika the Master of the Whales", "link": "https://stackoverflow.com/users/10388629/pika-the-master-of-the-whales"}, "edited": false, "score": 2, "creation_date": 1544049671, "post_id": 53641813, "comment_id": 94143134, "body": "BTW, you should not use <code>list</code> as a variable name."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1544049675, "post_id": 53641813, "comment_id": 94143137, "body": "The other place to check would be a Google search: &quot;why does list.sort() return None&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 3115, "user_id": 2887760, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dcfc142aa3e67502448a0f91e40d08df?s=128&d=identicon&r=PG&f=1", "display_name": "Athena", "link": "https://stackoverflow.com/users/2887760/athena"}, "is_accepted": false, "score": 5, "last_activity_date": 1544049499, "creation_date": 1544049499, "answer_id": 53641841, "question_id": 53641813, "link": "https://stackoverflow.com/questions/53641813/python-sort-list-of-strings-when-its-a-list-of-numbers/53641841#53641841", "title": "python: sort list of strings when it&#39;s a list of numbers", "body": "<p><code>list.sort()</code> mutates the list in place, instead of returning a new list.</p>\n\n<pre><code>&gt;&gt;&gt; list = ['296098', '12805', '10445635', '11679960']\n&gt;&gt;&gt; list.sort()\n&gt;&gt;&gt; list\n['10445635', '11679960', '12805', '296098']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3036, "user_id": 5491375, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/acb34dbd1c452d932e5d116561d6ee26?s=128&d=identicon&r=PG&f=1", "display_name": "aydow", "link": "https://stackoverflow.com/users/5491375/aydow"}, "is_accepted": false, "score": 1, "last_activity_date": 1544049508, "creation_date": 1544049508, "answer_id": 53641844, "question_id": 53641813, "link": "https://stackoverflow.com/questions/53641813/python-sort-list-of-strings-when-its-a-list-of-numbers/53641844#53641844", "title": "python: sort list of strings when it&#39;s a list of numbers", "body": "<p><code>list.sort</code> sorts the <code>list</code> in place. Some Python programmers would prefer <code>sorted</code> which will return a sorted <code>list</code> and leave the initial <code>list</code> untouched</p>\n\n<pre><code>In [2]: l=['296098', '12805', '10445635', '11679960']\n\nIn [3]: sorted(l, key=float)\nOut[3]: ['12805', '296098', '10445635', '11679960']\n\nIn [4]: l.sort(key=float)\n\nIn [5]: l\nOut[5]: ['12805', '296098', '10445635', '11679960']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "is_accepted": false, "score": 3, "last_activity_date": 1544049570, "creation_date": 1544049570, "answer_id": 53641859, "question_id": 53641813, "link": "https://stackoverflow.com/questions/53641813/python-sort-list-of-strings-when-its-a-list-of-numbers/53641859#53641859", "title": "python: sort list of strings when it&#39;s a list of numbers", "body": "<p>Firstly, <code>list.sort()</code> manipulate the list in place, which means when you call it, the list is already sorted, and the default return value is <code>None</code></p>\n\n<pre><code>list = ['296098', '12805', '10445635', '11679960']\nlist.sort()\nlist\nOut[4]: ['10445635', '11679960', '12805', '296098']\n</code></pre>\n\n<p>Secondly, above is sort by string value, you want to sort by the numerical value, you can use <code>key=int</code>. Remember you can replace int with any custom methods:</p>\n\n<pre><code>list.sort(key=int)\nlist\nOut[6]: ['12805', '296098', '10445635', '11679960']\n</code></pre>\n\n<p>Last but not least, you should not use <code>list</code> as a variable name, as it's builtin function name already.</p>\n"}], "owner": {"reputation": 14023, "user_id": 1545308, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/f029a60367f0dc043566adc3320c9db5?s=128&d=identicon&r=PG", "display_name": "etayluz", "link": "https://stackoverflow.com/users/1545308/etayluz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 479, "favorite_count": 0, "closed_date": 1544049609, "answer_count": 3, "score": 0, "last_activity_date": 1544049841, "creation_date": 1544049363, "last_edit_date": 1544049723, "question_id": 53641813, "link": "https://stackoverflow.com/questions/53641813/python-sort-list-of-strings-when-its-a-list-of-numbers", "closed_reason": "Duplicate", "title": "python: sort list of strings when it&#39;s a list of numbers", "body": "<p>Newbie here with the python interpreter.</p>\n\n<p>Why am I not able to sort this list of strings?</p>\n\n<pre><code>&gt;&gt;&gt; list = ['296098', '12805', '10445635', '11679960']\n&gt;&gt;&gt; print list.sort()\nNone\n&gt;&gt;&gt; print list.sort(key=float)\nNone\n</code></pre>\n\n<p>Why isn't python able to sort this list of string for me?</p>\n"}, {"tags": ["python", "regex", "regex-lookarounds"], "comments": [{"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1544049917, "post_id": 53641808, "comment_id": 94143228, "body": "&quot;Date formats also differ.&quot; By how much? It&#39;s kind of hard to propose something that could work for <i>any</i> kind of date formatting."}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1544050002, "post_id": 53641808, "comment_id": 94143260, "body": "By the way, your &quot;Start:&quot; and &quot;End:&quot; criteria are both only the <i>first</i> word before the date, not &quot;2 words preceding the date&quot;. Please correct either that sentence and your title, or your example."}, {"owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "edited": false, "score": 0, "creation_date": 1544050380, "post_id": 53641808, "comment_id": 94143382, "body": "<code>[^ ]+: [^ ]+ </code>"}, {"owner": {"reputation": 103, "user_id": 10387268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73ae7cce61f8d188bbb0e77203896e88?s=128&d=identicon&r=PG&f=1", "display_name": "orangecodelife", "link": "https://stackoverflow.com/users/10387268/orangecodelife"}, "reply_to_user": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1544050530, "post_id": 53641808, "comment_id": 94143430, "body": "@usr2564301 examples : &#39;01/Dec/2000&#39; &#39;01/15/2000&#39;  &#39;november 23 2019&#39; &#39;Mar 11, 2016&#39;  etc"}, {"owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "edited": false, "score": 0, "creation_date": 1544050652, "post_id": 53641808, "comment_id": 94143475, "body": "Ouch. Best idea: make a long OR sequence. Something like <code>(?:\\d+&#47;\\w+&#47;\\d{4}|\\d+&#47;\\d+&#47;\\d{4}|...</code> \u2013 you might have to hardcode all of the month names and abbreviations in this."}], "answers": [{"tags": [], "owner": {"reputation": 1721, "user_id": 9070959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3fc72be4dddc4ff4156a7d875912d67?s=128&d=identicon&r=PG&f=1", "display_name": "emsimpson92", "link": "https://stackoverflow.com/users/9070959/emsimpson92"}, "is_accepted": false, "score": 0, "last_activity_date": 1544049708, "creation_date": 1544049708, "answer_id": 53641880, "question_id": 53641808, "link": "https://stackoverflow.com/questions/53641808/regex-lookback-get-the-first-word/53641880#53641880", "title": "regex lookback get the first word", "body": "<p>I suppose you're looking for something like this? <code>(?i)start:\\s*(?&lt;start&gt;\\d\\d-\\w+-\\d{4}).*end:\\s*(?&lt;end&gt;\\d\\d-\\w+-\\d{4})</code></p>\n\n<p><a href=\"https://regex101.com/r/c9ScEu/2\" rel=\"nofollow noreferrer\">Demo</a></p>\n"}, {"tags": [], "owner": {"reputation": 20968, "user_id": 2564301, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a6b5734cdcb5ce19598ccf9a7d8cc1ff?s=128&d=identicon&r=PG&f=1", "display_name": "Jongware", "link": "https://stackoverflow.com/users/2564301/jongware"}, "is_accepted": true, "score": 1, "last_activity_date": 1544049852, "creation_date": 1544049852, "answer_id": 53641907, "question_id": 53641808, "link": "https://stackoverflow.com/questions/53641808/regex-lookback-get-the-first-word/53641907#53641907", "title": "regex lookback get the first word", "body": "<p>This seems to do it:</p>\n\n<pre><code>re.findall(r'\\b\\S+\\s+\\d\\d?-[A-Za-z]{3}-\\d{4}\\b', text)\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code>['Start: 01-Oct-2018', 'End: 30-Sep-2019']\n</code></pre>\n\n<p>The <code>\\b</code> at the start forces a start-of-word (word break), followed by a string of not-spaces and one or more spaces, then followed by your date expression.</p>\n"}, {"tags": [], "owner": {"reputation": 74488, "user_id": 797495, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/BKD7l.jpg?s=128&g=1", "display_name": "Pedro Lobito", "link": "https://stackoverflow.com/users/797495/pedro-lobito"}, "is_accepted": false, "score": 0, "last_activity_date": 1544050224, "creation_date": 1544050224, "answer_id": 53641980, "question_id": 53641808, "link": "https://stackoverflow.com/questions/53641808/regex-lookback-get-the-first-word/53641980#53641980", "title": "regex lookback get the first word", "body": "<p>Late answer, but here's a way to do it:</p>\n\n<pre><code>[^ ]+: [^ ]+\n</code></pre>\n\n<hr>\n\n<pre><code>import re\ntext = 'blah blah Start: 01-Oct-2018 blah blah End: 30-Sep-2019'\nresult = re.findall(\"[^ ]+: [^ ]+\", text)\n# ['Start: 01-Oct-2018', 'End: 30-Sep-2019']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1661, "user_id": 2311619, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/73RqC.jpg?s=128&g=1", "display_name": "protoproto", "link": "https://stackoverflow.com/users/2311619/protoproto"}, "is_accepted": false, "score": 0, "last_activity_date": 1544050914, "creation_date": 1544050914, "answer_id": 53642108, "question_id": 53641808, "link": "https://stackoverflow.com/questions/53641808/regex-lookback-get-the-first-word/53642108#53642108", "title": "regex lookback get the first word", "body": "<p>Use this Regex to match all of the type of month (number or abbreviation):</p>\n\n<pre><code>import re\n\nregex = r\"(\\S+\\s*\\d{2}-\\w+-\\d{4})\"\n\ntest_str = \"blah blah Start: 01-Oct-2018 blah blah End: 30-Sep-2019\"\n# test_str = \"test test Start:01-06-2018 blah blah End: 30-08-2019\"\n\nmatch = re.findall(regex,test_str)\nprint(match)\n# ['Start: 01-Oct-2018', 'End: 30-Sep-2019']\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 10387268, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73ae7cce61f8d188bbb0e77203896e88?s=128&d=identicon&r=PG&f=1", "display_name": "orangecodelife", "link": "https://stackoverflow.com/users/10387268/orangecodelife"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 53641907, "answer_count": 4, "score": 0, "last_activity_date": 1544050914, "creation_date": 1544049339, "last_edit_date": 1544050690, "question_id": 53641808, "link": "https://stackoverflow.com/questions/53641808/regex-lookback-get-the-first-word", "title": "regex lookback get the first word", "body": "<p>I am looking to get the first word back from a date value using regex. There isn't an exact pattern of words but I am just looking to obtain the first word preceding the date (not the entire string). </p>\n\n<p>what I have so far:</p>\n\n<pre><code>regexDate = r'.*(?=)[w]*\\d{2}\\/\\d{2}\\/\\d{4}|.*(?=)[a-zA-Z]+\\s[0-9][0-9],?\\s[0-9][0-9][0-9][0-9]|.*(?=)\\d{2}-\\d{2}-\\d{4}|\\d{2}/\\w*/\\d{4}|.*(?=)\\d{2}-\\w*-\\d{4}|.*(?=)\\d{2}.\\w*.\\d{4}|.*(?=)\\d{4}/\\d{2}/\\d{2}|.*(?=)\\d{2}-\\w*-\\d{2}|.*(?=)\\d{2}/\\d{2}/\\d{2}'\n\ntext = 'blah blah Start: 01-Oct-2018 blah blah End: 30-Sep-2019'\n\nfind =  re.findall(regexDate, text)\n</code></pre>\n\n<p>result: </p>\n\n<pre><code>['blah blah Start: 01-Oct-2018 blah blah End: 30-Sep-2019']\n</code></pre>\n\n<p>In this case, I'm just looking to get 'Start: 01-Oct-2018' and 'End: 30-Sep-2019'. </p>\n\n<p><strong>Note:</strong> Start and End may be a different set of words in other circumstances. Date formats also differ. </p>\n\n<p>I did try wrapping <code>.*(?=)</code> around the possibilities but it would just return 30-Sep-2019. maybe someone can suggest a cleaner version as well? </p>\n"}, {"tags": ["python", "optimization", "pyomo"], "answers": [{"tags": [], "owner": {"reputation": 562, "user_id": 9002568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21015a00f084d658638c454ce6cd1feb?s=128&d=identicon&r=PG&f=1", "display_name": "kur ag", "link": "https://stackoverflow.com/users/9002568/kur-ag"}, "is_accepted": false, "score": 0, "last_activity_date": 1544110163, "creation_date": 1544110163, "answer_id": 53654661, "question_id": 53641762, "link": "https://stackoverflow.com/questions/53641762/problems-in-providing-upper-and-lower-bounds-to-a-constraint-in-pyomo/53654661#53654661", "title": "Problems in providing upper and lower bounds to a constraint in Pyomo", "body": "<p>Your rxlambdaConstraintUpper for 2, 3 is infeasible. </p>\n\n<pre><code>      2 :   0.5 : 0.1 * x[2] :   0.9 :   True\n      3 :   0.5 : 0.2 * x[3] :   0.9 :   True \n</code></pre>\n\n<p>if x[2] and x[3] takes 0 or 1, they will be less than 0.5 (their lower bound). Therefore if you change line </p>\n\n<pre><code> return  (0.5, model.r[i]*model.x[i], 0.9 )   \n</code></pre>\n\n<p>as </p>\n\n<pre><code> return  (0, model.r[i]*model.x[i], 0.9 ) \n</code></pre>\n\n<p>you can reach the working model and result. </p>\n"}], "owner": {"reputation": 1, "user_id": 10748996, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0ac5f53f7111a48dd00d9102d4055c2?s=128&d=identicon&r=PG&f=1", "display_name": "Nafiz H", "link": "https://stackoverflow.com/users/10748996/nafiz-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 990, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544110163, "creation_date": 1544049072, "question_id": 53641762, "link": "https://stackoverflow.com/questions/53641762/problems-in-providing-upper-and-lower-bounds-to-a-constraint-in-pyomo", "title": "Problems in providing upper and lower bounds to a constraint in Pyomo", "body": "<p>I am new to Pyomo. In the code section below, I am trying to minimize a function such that two other constraints are satisfied. <strong>I have problem with particulary one constraint where I am trying to provide a range by specifying the upper and lower bounds.</strong> The format of the dictionary is,\n<strong>dict[key]=[d,r,p]; 'p' is not used here.</strong> \nThe decision variable \"x\" is binary. The objective is to find out the item(only one) to choose from, such that \"d\" is minimum for a range of  \"r\" values. This range of \"r\" values is given by the \"constraint rxlambda_constraint_rule_upper\".\n <strong>So, the objective is to find out the item among the three dictionary items (from dict), so that the value of \"d\" is minimum for a range of \"r\" values.T</strong>he expected output as I understand should be the first item (as I have put here), as in [2, 0.8 ,0.3] , r =0.8 which less that 0.9 and greater than 0.5 and in this range , d = 2 is the only minimum. However, I don't understand the cause of this error and have attached the error messege along with the code. I am using 'cplex' through neos server.</p>\n\n# Code\n\n<pre><code>import pyomo.environ as pyo\n\nfrom pyomo.opt import SolverFactory\n\nfrom pyomo.core import *\n\nfrom pyomo.environ import *\n\ndict ={((1,2),(2,4)): [2, 0.8 ,0.3],((1,2),(2,3)): [3, 0.2 ,0.3], ((1,2),(2,5)): [3, 0.1,0.3] }\n\nmodel = ConcreteModel()\n\nmodel.I = Param(initialize =1)\n\nmodel.J= Param(initialize = len(dict))\n\nmodel.m = RangeSet(1,model.I)\n\nmodel.n = RangeSet(1, model.J)\n\nd_list =[]\n\nr_list = []\n\nfor key in dict:\n\n    dict_value = dict.get(key)\n    d_list.append(dict_value[0])\n\n    r_list.append(dict_value[1])\n\nd_dict ={}\n\nr_dict={}\n\n\nfor i in range(len(dict)):\n\n    d_dict[i+1]=d_list[i]\n\n    r_dict[i+1]=r_list[i]\n\n\n\nmodel.x = Var(model.n, within = Binary)\n\n\nmodel.d = Param(model.n, initialize =d_dict )\n\nmodel.r = Param(model.n, within=NonNegativeReals,initialize = r_dict)\n\n\ndef ObjRule(model):\n\n    return summation(model.d, model.x)\n\n\nmodel.OBJ =  Objective( rule =ObjRule  ,sense = minimize)\n\ndef rxlambda_constraint_rule_upper(model,i):\n\n    return  (0.5, model.r[i]*model.x[i], 0.9 ) \n\nmodel.rxlambdaConstraintUpper = Constraint(model.n, rule=rxlambda_constraint_rule_upper)\n\n\n\ndef sumx_constraint_rule(model,i):\n\n    value = sum(model.x[i] for i in model.n)\n    return value ==1\nmodel.sumxConstraint = Constraint(model.n, rule = sumx_constraint_rule)\n\n\n\nmodel.pprint()\n\ninstance = model.create()\n\nopt = SolverFactory(\"cplex\")\n\nsolver_manager = SolverManagerFactory('neos')\n\nresults = solver_manager.solve(instance, opt=opt, tee=True)\n\nmodel.pprint()\n\ninstance.display()\n\n\nfor v in instance.component_objects(Var, active=True):\n\n    varobject = getattr(instance, str(v))\n\n    for index in varobject:\n        print (index, varobject[index].value)\n</code></pre>\n\n<p><strong>###### The  Error log is: #####</strong></p>\n\n<pre><code>2 RangeSet Declarations\n\n    m : Dim=0, Dimen=1, Size=1, Domain=Integers, Ordered=True, Bounds=(1, 1)\n        Virtual\n    n : Dim=0, Dimen=1, Size=3, Domain=Integers, Ordered=True, Bounds=(1, 3)\n        Virtual\n\n4 Param Declarations\n\n    I : Size=1, Index=None, Domain=Any, Default=None, Mutable=False\n        Key  : Value\n        None :     1\n\n    J : Size=1, Index=None, Domain=Any, Default=None, Mutable=False\n        Key  : Value\n        None :     3\n\n    d : Size=3, Index=n, Domain=Any, Default=None, Mutable=False\n        Key : Value\n          1 :     2\n          2 :     3\n          3 :     3\n\n    r : Size=3, Index=n, Domain=NonNegativeReals, Default=None, Mutable=False\n        Key : Value\n          1 :   0.8\n          2 :   0.1\n          3 :   0.2\n\n1 Var Declarations\n\n    x : Size=3, Index=n\n\n        Key : Lower : Value : Upper : Fixed : Stale : Domain\n          1 :     0 :  None :     1 : False :  True : Binary\n          2 :     0 :  None :     1 : False :  True : Binary\n          3 :     0 :  None :     1 : False :  True : Binary\n\n1 Objective Declarations\n\n    OBJ : Size=1, Index=None, Active=True\n\n        Key  : Active : Sense    : Expression\n        None :   True : minimize : 2*x[1] + 3*x[2] + 3*x[3]\n\n2 Constraint Declarations\n\n    rxlambdaConstraintUpper : Size=3, Index=n, Active=True\n\n        Key : Lower : Body       : Upper : Active\n          1 :   0.5 : 0.8 * x[1] :   0.9 :   True\n          2 :   0.5 : 0.1 * x[2] :   0.9 :   True\n          3 :   0.5 : 0.2 * x[3] :   0.9 :   True\n\n    sumxConstraint : Size=3, Index=n, Active=True\n\n        Key : Lower : Body               : Upper : Active\n          1 :   1.0 : x[1] + x[2] + x[3] :   1.0 :   True\n          2 :   1.0 : x[1] + x[2] + x[3] :   1.0 :   True\n          3 :   1.0 : x[1] + x[2] + x[3] :   1.0 :   True\n\n10 Declarations: I J m n x d r OBJ rxlambdaConstraintUpper sumxConstraint\n\nWARNING: DEPRECATION WARNING: the Model.create() method is deprecated.  Call\n    Model.create_instance() to create a concrete instance from an abstract\n    model.  You do not need to call Model.create() for a concrete model.\nWARNING: DEPRECATED: Cannot call Model.create_instance() on a constructed\n    model; returning a clone of the current model instance.\nJob \"xxxxx\" submitted to NEOS, password='xxxxx'\nCheck the following URL for progress report :\n\"link deleted\"\nJob \"xxxxx\" dispatched\npassword: \"XXXXX\"\n---------- Begin Solver Output -----------\nCondor submit: 'neos.submit'\nCondor submit: 'watchdog.submit'\nJob submitted to NEOS HTCondor pool.\nWARNING: Loading a SolverResults object with a warning status into\n    model=unknown;\n        message from solver=CPLEX 12.7.0.0\\x3a integer infeasible.; 0 MIP\n        simplex iterations; 0 branch-and-bound nodes; No basis.\n\n2 RangeSet Declarations\n\n    m : Dim=0, Dimen=1, Size=1, Domain=Integers, Ordered=True, Bounds=(1, 1)\n        Virtual\n    n : Dim=0, Dimen=1, Size=3, Domain=Integers, Ordered=True, Bounds=(1, 3)\n        Virtual\n\n4 Param Declarations\n\n    I : Size=1, Index=None, Domain=Any, Default=None, Mutable=False\n        Key  : Value\n        None :     1\n    J : Size=1, Index=None, Domain=Any, Default=None, Mutable=False\n        Key  : Value\n        None :     3\n    d : Size=3, Index=n, Domain=Any, Default=None, Mutable=False\n        Key : Value\n          1 :     2\n          2 :     3\n          3 :     3\n    r : Size=3, Index=n, Domain=NonNegativeReals, Default=None, Mutable=False\n        Key : Value\n          1 :   0.8\n          2 :   0.1\n          3 :   0.2\n\n1 Var Declarations\n\n    x : Size=3, Index=n\n\n        Key : Lower : Value : Upper : Fixed : Stale : Domain\n          1 :     0 :  None :     1 : False :  True : Binary\n          2 :     0 :  None :     1 : False :  True : Binary\n          3 :     0 :  None :     1 : False :  True : Binary\n\n1 Objective Declarations\n\n    OBJ : Size=1, Index=None, Active=True\n\n        Key  : Active : Sense    : Expression\n        None :   True : minimize : 2*x[1] + 3*x[2] + 3*x[3]\n\n2 Constraint Declarations\n\n    rxlambdaConstraintUpper : Size=3, Index=n, Active=True\n\n        Key : Lower : Body       : Upper : Active\n          1 :   0.5 : 0.8 * x[1] :   0.9 :   True\n          2 :   0.5 : 0.1 * x[2] :   0.9 :   True\n          3 :   0.5 : 0.2 * x[3] :   0.9 :   True\n\n    sumxConstraint : Size=3, Index=n, Active=True\n\n        Key : Lower : Body               : Upper : Active\n          1 :   1.0 : x[1] + x[2] + x[3] :   1.0 :   True\n          2 :   1.0 : x[1] + x[2] + x[3] :   1.0 :   True\n          3 :   1.0 : x[1] + x[2] + x[3] :   1.0 :   True\n\n10 Declarations: I J m n x d r OBJ rxlambdaConstraintUpper sumxConstraint\n\nModel unknown\n\n  Variables:\n\n    x : Size=3, Index=n\n\n        Key : Lower : Value : Upper : Fixed : Stale : Domain\n          1 :     0 :  None :     1 : False :  True : Binary\n          2 :     0 :  None :     1 : False :  True : Binary\n          3 :     0 :  None :     1 : False :  True : Binary\n\n  Objectives:\n\n    OBJ : Size=1, Index=None, Active=True\nERROR: evaluating expression: No value for uninitialized NumericValue object\n    x[1]\n        (expression: 2*x[1] + 3*x[2] + 3*x[3])\nERROR: evaluating object as numeric value: OBJ\n        (object: &lt;class 'pyomo.core.base.objective.SimpleObjective'&gt;)\n    No value for uninitialized NumericValue object x[1]\n        Key : Active : Value\n        None :   None :  None\n\n  Constraints:\n\n    rxlambdaConstraintUpper : Size=3\n\nERROR: evaluating expression: No value for uninitialized NumericValue object\n    x[1]\n        (expression: 0.8 * x[1])\nERROR: evaluating expression: No value for uninitialized NumericValue object\n    x[2]\n        (expression: 0.1 * x[2])\nERROR: evaluating expression: No value for uninitialized NumericValue object\n    x[3]\n        (expression: 0.2 * x[3])\n        Key : Lower : Body : Upper\n          1 :  None : None :  None\n          2 :  None : None :  None\n          3 :  None : None :  None\n\n    sumxConstraint : Size=3\n\nERROR: evaluating expression: No value for uninitialized NumericValue object\n    x[1]\n\n        (expression: x[1] + x[2] + x[3])\n\nERROR: evaluating expression: No value for uninitialized NumericValue object\n    x[1]\n\n        (expression: x[1] + x[2] + x[3])\n\nERROR: evaluating expression: No value for uninitialized NumericValue object\n    x[1]\n\n        (expression: x[1] + x[2] + x[3])\n\n        Key : Lower : Body : Upper\n          1 :  None : None :  None\n          2 :  None : None :  None\n          3 :  None : None :  None\n(1, None)\n(2, None)\n(3, None)\n\n\u200b\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1544049358, "post_id": 53641751, "comment_id": 94143038, "body": "What is your python version?"}, {"owner": {"reputation": 15836, "user_id": 9299259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7A5cq.jpg?s=128&g=1", "display_name": "YOLO", "link": "https://stackoverflow.com/users/9299259/yolo"}, "edited": false, "score": 0, "creation_date": 1544049750, "post_id": 53641751, "comment_id": 94143173, "body": "I think in second row, you are doing this <code>655&#47;(2288378+256575)*100</code> = <code>655&#47;superbignumber</code>"}, {"owner": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "reply_to_user": {"reputation": 15836, "user_id": 9299259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7A5cq.jpg?s=128&g=1", "display_name": "YOLO", "link": "https://stackoverflow.com/users/9299259/yolo"}, "edited": false, "score": 0, "creation_date": 1544050015, "post_id": 53641751, "comment_id": 94143267, "body": "@YOLO I wouldn&#39;t consider 2 million is a super big number"}, {"owner": {"reputation": 15836, "user_id": 9299259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7A5cq.jpg?s=128&g=1", "display_name": "YOLO", "link": "https://stackoverflow.com/users/9299259/yolo"}, "reply_to_user": {"reputation": 1678, "user_id": 6750211, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tmOvh.gif?s=128&g=1", "display_name": "Kevin Fang", "link": "https://stackoverflow.com/users/6750211/kevin-fang"}, "edited": false, "score": 0, "creation_date": 1544050365, "post_id": 53641751, "comment_id": 94143372, "body": "@KevinFang actually it is 655/254495300"}, {"owner": {"reputation": 339, "user_id": 6856253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c578a774a1f4f6f7afca8739073074?s=128&d=identicon&r=PG&f=1", "display_name": "Doe", "link": "https://stackoverflow.com/users/6856253/doe"}, "reply_to_user": {"reputation": 15836, "user_id": 9299259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7A5cq.jpg?s=128&g=1", "display_name": "YOLO", "link": "https://stackoverflow.com/users/9299259/yolo"}, "edited": false, "score": 0, "creation_date": 1544050868, "post_id": 53641751, "comment_id": 94143546, "body": "@yolo Just posted an update."}, {"owner": {"reputation": 15836, "user_id": 9299259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7A5cq.jpg?s=128&g=1", "display_name": "YOLO", "link": "https://stackoverflow.com/users/9299259/yolo"}, "edited": false, "score": 0, "creation_date": 1544052071, "post_id": 53641751, "comment_id": 94143921, "body": "@Doe can you do (655/(2288378+256575))*100"}], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 0, "last_activity_date": 1544049678, "creation_date": 1544049678, "answer_id": 53641875, "question_id": 53641751, "link": "https://stackoverflow.com/questions/53641751/decimal-numbers-in-numpy/53641875#53641875", "title": "Decimal numbers in Numpy", "body": "<p>The column display is a result of the rendering function <code>__repr__</code> for a data frame.  This one happens to default to a single digit after the decimal point.  See the PANDAS documentation for details on changing this.</p>\n\n<p>Your <code>print</code> statement uses the Python rendering for floats.  In this case, the rendering program recognizes that the last non-zero digit is in the 1000ths place, and truncates the display at that point.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10741389, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6925abb553fd36a956612d4eba7dffa0?s=128&d=identicon&r=PG&f=1", "display_name": "hockletock", "link": "https://stackoverflow.com/users/10741389/hockletock"}, "is_accepted": false, "score": 0, "last_activity_date": 1544065130, "last_edit_date": 1544065130, "creation_date": 1544063750, "answer_id": 53643786, "question_id": 53641751, "link": "https://stackoverflow.com/questions/53641751/decimal-numbers-in-numpy/53643786#53643786", "title": "Decimal numbers in Numpy", "body": "<p>You can pass a float formatter function as an argument to a dataframe's to_string method:</p>\n\n<pre><code>print(df.to_string(float_format=lambda f: '{:3.2e}%'.format(100 * f)))\n</code></pre>\n\n<p>would output <code>2.57e-04%</code>, while using <code>{:.4}%</code> would print <code>0.0003%</code>. The function above is a brief usable choice but you can make it as elaborate as you wish if you want to print e.g. '1.23%' for most values but use exponential notation for values beneath one hundredth of a percent.</p>\n"}, {"tags": [], "owner": {"reputation": 1977, "user_id": 2934048, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/24c2bb41b630dd1c2d92a2acc0796375?s=128&d=identicon&r=PG&f=1", "display_name": "DalyaG", "link": "https://stackoverflow.com/users/2934048/dalyag"}, "is_accepted": false, "score": 0, "last_activity_date": 1562243359, "creation_date": 1562243359, "answer_id": 56887997, "question_id": 53641751, "link": "https://stackoverflow.com/questions/53641751/decimal-numbers-in-numpy/56887997#56887997", "title": "Decimal numbers in Numpy", "body": "<p>From <a href=\"https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.set_printoptions.html\" rel=\"nofollow noreferrer\">numpy docs</a> - </p>\n\n<pre><code>import numpy as np\nnp.set_printoptions(suppress=True)\n</code></pre>\n\n<p>will make sure that \"always print floating point numbers using fixed point notation, in which case numbers equal to zero in the current precision will print as zero\"</p>\n\n<pre><code>In[2]: import numpy as np\n\nIn[3]: np.array([1/50000000])\nOut[3]: array([2.e-08])\n\nIn[4]: np.set_printoptions(suppress=True)\nIn[5]: np.array([1/50000000])\nOut[5]: array([0.00000002])\n\nIn[6]: np.set_printoptions(precision=6)\nIn[7]: np.array([1/50000000])\nOut[7]: array([0.])\n</code></pre>\n"}], "owner": {"reputation": 339, "user_id": 6856253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89c578a774a1f4f6f7afca8739073074?s=128&d=identicon&r=PG&f=1", "display_name": "Doe", "link": "https://stackoverflow.com/users/6856253/doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1562243359, "creation_date": 1544048998, "last_edit_date": 1544051177, "question_id": 53641751, "link": "https://stackoverflow.com/questions/53641751/decimal-numbers-in-numpy", "title": "Decimal numbers in Numpy", "body": "<p>I have a dataframe that looks like this - </p>\n\n<pre><code>     ID     NoNotifications NotificationsNot    total   Percent of people\n    2544        272500          762              117         0.0\n    2415        2288378        256575            655         0.0\n    2558        192505         470610             7          0.0\n</code></pre>\n\n<p>I am running - </p>\n\n<pre><code>for index, row in percent.iterrows():\n   print((117/300000)*100)\n   row['Percent of people'] = row['total']/(row['NoNotifications'] + row['NotificationsNot'])*100\n</code></pre>\n\n<p>Why is it that the print statement is printing a decimal value with at least 3 precision points. For example, <code>0.039</code> but the second statement is only outputting <code>0.0</code> to <code>Percent of people</code> column. </p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I tried <code>row['Percent of people'] = (655/254495300*100)</code> and I am still getting a bunch of <code>0.0</code> in <code>Percent of people</code> column</p>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>Also, tried <code>repr((Decimal(655)/254495300*100))</code> and still the same thing. </p>\n"}, {"tags": ["python", "tensorflow", "pycharm", "regression", "data-visualization"], "owner": {"reputation": 105, "user_id": 9582712, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6ffz35Kh0KQ/AAAAAAAAAAI/AAAAAAAAAKM/omVKtPaKaG0/photo.jpg?sz=128", "display_name": "Shounak Ray", "link": "https://stackoverflow.com/users/9582712/shounak-ray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1544048978, "creation_date": 1544048978, "question_id": 53641747, "link": "https://stackoverflow.com/questions/53641747/table-visualizations-not-appearing-in-tensorflow-pycharm-ide", "title": "Table Visualizations not appearing in Tensorflow-PyCharm IDE", "body": "<p>I am using PyCharm Community Edition and Python 3.7. Via Anaconda, I have installed the Tensorflow machine learning package.</p>\n\n<p>I am following the Google Tensorflow Regression tutorial <a href=\"https://www.tensorflow.org/tutorials/keras/basic_regression\" rel=\"nofollow noreferrer\">here</a>, but I am getting limited output. Only the numerical results and the <code>plt</code> are are being displayed on the output console and a separate window respectively.</p>\n\n<p>The data table mentioned in the attached link, coded as:\n<code># Prints the stored data table in a formatted fashion (ERROR)\ndf = pd.DataFrame(train_data, columns = column_names)\ndf.head()\n</code>\ndoesn't seem to generate its own window, as suggested by the link. How do I display this table in a new window, just like the <code>plt</code> is displayed?</p>\n\n<p>Here is my main.py:</p>\n\n<pre><code># Importing the different libraries and packages\n# Machine Learning is mainly executed by the TENSORFLOW LIBRARY\n\nfrom __future__ import absolute_import, division, print_function\nimport tensorflow as tf\nfrom tensorflow import keras\nimport numpy as np\nimport pandas as pd\n\nTFVersion = tf.__version__\nnewline = \"\\n\"\n\nprint(newline)\nprint(\"Current version of TensorFlow: \", TFVersion)\n\n# Downloading the Boston Housing Data Set - it is already present in the keras\n# NOTE: This will be referred to as the \"BHD\"\nboston_housing = keras.datasets.boston_housing\n\n# Initializing the training + testing data and labels as per the information suggested in the BHD\n(train_data, train_labels), (test_data, test_labels) = boston_housing.load_data()\n\n# Shuffle the training set in order to assure randomness - this condition is required for any statistical analysis\norder = np.argsort(np.random.random(train_labels.shape))\ntrain_data = train_data[order]\ntrain_labels = train_labels[order]\n\n# Printing the training and testing data sets (the .shape member function gets the examples and feature frequency\n# from the train_data vector instance)\nprint(\"Training set: {}\".format(train_data.shape))  # 404 examples, 13 features\nprint(\"Testing set:  {}\".format(test_data.shape))   # 102 examples, 13 features\n\n# Initializing the variables/attributes for the data-set\ncolumn_names = ['CRIM', 'ZN', 'INDUS', 'CHAS', 'NOX', 'RM', 'AGE', 'DIS', 'RAD',\n                'TAX', 'PTRATIO', 'B', 'LSTAT']\n\n# Prints the stored data table in a formatted fashion (ERROR)\ndf = pd.DataFrame(train_data, columns = column_names)\ndf.head()\n\n# Display first 10 entries\nprint(train_labels[0:10])\n\n# TEST DATA is *not* used when calculating the mean and std\n# Normalize data - these are basically z-scores\nmean = train_data.mean(axis = 0)\nstd = train_data.std(axis = 0)\ntrain_data = (train_data - mean)/std\ntest_data = (test_data - mean)/std\n\nprint(train_data[0])  # First training sample, normalized\n\ndef build_model():\n    model = keras.Sequential([\n        keras.layers.Dense(64, activation = tf.nn.relu,\n                               input_shape = (train_data.shape[1],)),\n        keras.layers.Dense(64, activation = tf.nn.relu),\n        keras.layers.Dense(1)\n    ])\n\n    optimizer = tf.train.RMSPropOptimizer(0.001)\n\n    model.compile(loss='mse',\n                  optimizer=optimizer,\n                  metrics=['mae'])\n    return model\n\n\nmodel = build_model()\nmodel.summary()\n\n\n# Display training progress by printing a single dot for each completed epoch\nclass PrintDot(keras.callbacks.Callback):\n    def on_epoch_end(self, epoch, logs):\n        if epoch % 100 == 0: print('')\n        print('.', end='')\n\n\nEPOCHS = 500\n\n# Store training stats\nhistory = model.fit(train_data, train_labels, epochs=EPOCHS,\n                    validation_split=0.2, verbose=0,\n                    callbacks=[PrintDot()])\n\nimport matplotlib.pyplot as plt\n\nplt.interactive(False)\n\ndef plot_history(history):\n    plt.figure()\n    plt.xlabel('Epoch')\n    plt.ylabel('Mean Abs Error [1000$]')\n    plt.plot(history.epoch, np.array(history.history['mean_absolute_error']),\n             label='Train Loss')\n    plt.plot(history.epoch, np.array(history.history['val_mean_absolute_error']),\n             label='Val loss')\n    plt.legend()\n    plt.ylim([0, 5])\n\n\nplot_history(history)\n\n[loss, mae] = model.evaluate(test_data, test_labels, verbose=0)\n\nprint(\"Testing set Mean Abs Error: ${:7.2f}\".format(mae * 1000))\n\ntest_predictions = model.predict(test_data).flatten()\n\nplt.scatter(test_labels, test_predictions)\nplt.xlabel('True Values [1000$]')\nplt.ylabel('Predictions [1000$]')\nplt.axis('equal')\nplt.xlim(plt.xlim())\nplt.ylim(plt.ylim())\n_ = plt.plot([-100, 100], [-100, 100])\n\nerror = test_predictions - test_labels\nplt.hist(error, bins=50)\nplt.xlabel(\"Prediction Error [1000$]\")\n_ = plt.ylabel(\"Count\")\n\nplt.show()\n# https://www.youtube.com/watch?v=voLSnXi4hAI\n</code></pre>\n"}, {"tags": ["python", "arrays"], "answers": [{"tags": [], "owner": {"reputation": 511, "user_id": 3088597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564c69ffc414b878d3a2f641337cded4?s=128&d=identicon&r=PG", "display_name": "srattigan", "link": "https://stackoverflow.com/users/3088597/srattigan"}, "is_accepted": false, "score": 0, "last_activity_date": 1544050919, "last_edit_date": 1544050919, "creation_date": 1544050111, "answer_id": 53641958, "question_id": 53641727, "link": "https://stackoverflow.com/questions/53641727/error-in-converting-array-with-decimals-into-array-with-binaries-in-python/53641958#53641958", "title": "Error in converting array with decimals into array with binaries in python", "body": "<p>You will have to store them as strings representing binary numbers.</p>\n\n<pre><code>&gt;&gt;&gt; x=0x1011   # hex\n&gt;&gt;&gt; x\n4113           #just another number under the hood\n&gt;&gt;&gt; x=0b1011\n&gt;&gt;&gt; x\n11\n&gt;&gt;&gt; x=str(0b1011)\n&gt;&gt;&gt; x\n'11'\n&gt;&gt;&gt; x=str(bin(11))\n&gt;&gt;&gt; x\n'0b1011'\n&gt;&gt;&gt;\n\nbin_list = []\nfor each in range(64):\n    bin_rep = str(bin(each))\n    bin_rep = bin_rep[:2] + bin_rep[2:].zfill(6)\n    bin_list.append(bin_rep)\n\nprint(bin_list)\n</code></pre>\n\n<p>Not as concise as another comment but possibly more easy to follow for someone new to Python... Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 6204748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EnYex.jpg?s=128&g=1", "display_name": "mr_orange", "link": "https://stackoverflow.com/users/6204748/mr-orange"}, "is_accepted": true, "score": 0, "last_activity_date": 1544054936, "last_edit_date": 1544054936, "creation_date": 1544054490, "answer_id": 53642657, "question_id": 53641727, "link": "https://stackoverflow.com/questions/53641727/error-in-converting-array-with-decimals-into-array-with-binaries-in-python/53642657#53642657", "title": "Error in converting array with decimals into array with binaries in python", "body": "<p>Using Python 3:\n Initialize the g array first, then append it in the loop.</p>\n\n<pre><code>g = '{0:06b}'.format(0)\n\nfor x in range(1,64,1):\n    g=np.append(g,'{0:06b}'.format(x))\n\nprint(g)\n</code></pre>\n\n<p><strong>extra:</strong> Python is very well <a href=\"https://stackoverflow.com/questions/7687928/convert-dec-number-to-6-bit-binary-number\">documented</a></p>\n\n<p>hth</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7475343"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 53642657, "answer_count": 2, "score": 0, "last_activity_date": 1544054936, "creation_date": 1544048884, "question_id": 53641727, "link": "https://stackoverflow.com/questions/53641727/error-in-converting-array-with-decimals-into-array-with-binaries-in-python", "title": "Error in converting array with decimals into array with binaries in python", "body": "<p>I am trying to covert and array filed with decimals from 0 to 63 , x=[0 1 2 ... 63] into an array with the equal binaries, but I get the following error:\n\"invalid literal for int() with base 10: '0b0'\". My code is the following (in Python) :</p>\n\n<pre><code>g=np.arange(0,64,1)\nfor x in range(0,64,1):\n    g[x]=bin(g[x])\n</code></pre>\n\n<p>I am new to python, so if anyone can find my mistake (logic or syntax) I would appreciate any help. <strong>extra</strong>: Is there any way to make the binaries 6 bits that get put in the array?</p>\n"}, {"tags": ["python", "django", "django-forms", "django-admin"], "comments": [{"owner": {"reputation": 9336, "user_id": 1199464, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c46065552123344aa8fb40f4366790f3?s=128&d=identicon&r=PG", "display_name": "markwalker_", "link": "https://stackoverflow.com/users/1199464/markwalker"}, "edited": false, "score": 0, "creation_date": 1544054256, "post_id": 53641689, "comment_id": 94144505, "body": "Have you created your own form for your admin class so that it uses the widget you want?"}, {"owner": {"reputation": 19001, "user_id": 255918, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/41839babd74e711f20f3415f0417f082?s=128&d=identicon&r=PG", "display_name": "Jordan Reiter", "link": "https://stackoverflow.com/users/255918/jordan-reiter"}, "reply_to_user": {"reputation": 9336, "user_id": 1199464, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c46065552123344aa8fb40f4366790f3?s=128&d=identicon&r=PG", "display_name": "markwalker_", "link": "https://stackoverflow.com/users/1199464/markwalker"}, "edited": false, "score": 0, "creation_date": 1544130117, "post_id": 53641689, "comment_id": 94177499, "body": "The code above describes a standalone custom field used by many different applications in this website -- and indeed across a number of other websites I&#39;ve developed. It also is used by other people. So the solution has to be contained somehow within the custom field itself."}], "answers": [{"comments": [{"owner": {"reputation": 19001, "user_id": 255918, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/41839babd74e711f20f3415f0417f082?s=128&d=identicon&r=PG", "display_name": "Jordan Reiter", "link": "https://stackoverflow.com/users/255918/jordan-reiter"}, "edited": false, "score": 0, "creation_date": 1544130163, "post_id": 53643860, "comment_id": 94177522, "body": "This is a custom field that is used not only across several different admins but over several different apps and websites. So requiring it to have a custom ModelAdmin each time is not a solution."}], "tags": [], "owner": {"reputation": 39590, "user_id": 2696165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dd17c045c8c39de4f41c3f3ded5d0ca?s=128&d=identicon&r=PG&f=1", "display_name": "ruddra", "link": "https://stackoverflow.com/users/2696165/ruddra"}, "is_accepted": false, "score": 0, "last_activity_date": 1544064871, "last_edit_date": 1544064871, "creation_date": 1544064432, "answer_id": 53643860, "question_id": 53641689, "link": "https://stackoverflow.com/questions/53641689/how-to-i-prevent-django-admin-for-overriding-the-custom-widget-for-a-custom-fiel/53643860#53643860", "title": "How to I prevent Django Admin for overriding the custom widget for a custom field?", "body": "<p>In your model admin, you need to add those widgets in <code>formfield_overrides</code>. For example like this:</p>\n\n<pre><code>class BaseModelAdmin(admin.ModelAdmin):\n    formfield_overrides = {\n        models.CharField: {'widget': forms.Textarea},\n    }\n</code></pre>\n\n<p>Now you can sub-class all of your model admins from this class and don't have to write redundant code for overrides.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 11287296, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XvvgorLxMA8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfR2lTwkoMHw4f2mRYhNNhaD83wDg/mo/photo.jpg?sz=128", "display_name": "Dave Alan", "link": "https://stackoverflow.com/users/11287296/dave-alan"}, "is_accepted": false, "score": 2, "last_activity_date": 1615227664, "creation_date": 1615227664, "answer_id": 66535130, "question_id": 53641689, "link": "https://stackoverflow.com/questions/53641689/how-to-i-prevent-django-admin-for-overriding-the-custom-widget-for-a-custom-fiel/66535130#66535130", "title": "How to I prevent Django Admin for overriding the custom widget for a custom field?", "body": "<p>Try this (I added the second line from the bottom to your code):</p>\n<pre><code>class SandwichField(models.PositiveIntegerField):\n\n    def formfield(self, *args, **kwargs):\n        defaults={'form_class': SandwichFormField}\n        defaults.update(kwargs)\n        defaults['widget'] = SandwichFormField.widget\n        return super(SandwichField, self).formfield(*args, **defaults)\n</code></pre>\n<p>The admin code is passing you a kwargs that has their own widget, so you have\nto override it.</p>\n"}], "owner": {"reputation": 19001, "user_id": 255918, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/41839babd74e711f20f3415f0417f082?s=128&d=identicon&r=PG", "display_name": "Jordan Reiter", "link": "https://stackoverflow.com/users/255918/jordan-reiter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1615227664, "creation_date": 1544048620, "last_edit_date": 1544054183, "question_id": 53641689, "link": "https://stackoverflow.com/questions/53641689/how-to-i-prevent-django-admin-for-overriding-the-custom-widget-for-a-custom-fiel", "title": "How to I prevent Django Admin for overriding the custom widget for a custom field?", "body": "<p>I have a model field, a form field, and a widget that I am using in an app. The details of the code don't matter. The key is that the field correctly renders in regular forms but is overridden in admin.</p>\n\n<p>Here is some pseudo-code of what the field basically looks like:</p>\n\n<pre><code>class SandwichWidget(forms.Widget):\n    template_name = 'sandwichfield/widgets/sandwichfield.html'\n\n    def __init__(self, attrs=None, date_format=None, time_format=None):\n        widgets = (\n            NumberInput(),\n            Select(choices=FILLING_CHOICES),\n            NumberInput(),\n        )\n        super(SandwichWidget, self).__init__(widgets, attrs)\n\n    def decompress(self, value):\n        if value:\n            value = Sandwich(value)\n            return [\n                value.top,\n                value.middle,\n                value.bottom\n            ]\n        return [None, None, None]\n\n\nclass SandwichFormField(forms.MultiValueField):\n    widget = SandwichWidget\n\n    def __init__(self, input_date_formats=None, input_time_formats=None, *args, **kwargs):\n        fields = (\n            forms.IntegerField(),\n            forms.CharField(),\n            forms.IntegerField(),\n        )\n        super(SandwichFormField, self).__init__(fields, *args, **kwargs)\n\n\nclass SandwichField(models.PositiveIntegerField):\n\n    def get_internal_type(self):\n        return 'IntegerField'\n\n    def formfield(self, *args, **kwargs):\n        defaults={'form_class': SandwichFormField}\n        defaults.update(kwargs)\n        return super(SandwichField, self).formfield(*args, **defaults)\n</code></pre>\n\n<p>It apparently happens because of <a href=\"https://github.com/django/django/blob/2.1.4/django/contrib/admin/options.py#L89\" rel=\"nofollow noreferrer\">this line in <code>django/contrib/admin/options.py</code></a> which specifies the override of the <code>models.IntegerField</code> should be <code>widgets.AdminIntegerFieldWidget</code>. Because <code>models.PositiveIntegerField</code> inherits from <code>models.IntegerField</code>, and because <a href=\"https://github.com/django/django/blob/2.1.4/django/contrib/admin/options.py#L181\" rel=\"nofollow noreferrer\">line 181</a> loops over all subclasses of the field, it seems like there is no way to prevent the widget from being overridden in admin.</p>\n\n<p>This is a real problem, because I use this custom field, with its custom widget, all over my site and throughout admin, and I do not want to have put in a custom value for <code>override_fields</code> every time I want to use the field. Ideally, developers should be able to use the custom field without having to provide a custom admin each time.</p>\n\n<p>Currently I'm inheriting from <code>forms.PositiveIntegerField</code> because when stored and retrieved from the database, it is a positive integer, and I want to take advantage of all of the coding already in place for handling positive integer values.</p>\n\n<p>Currently it looks like the <em>only</em> solution is changing my field to inherit from <code>models.Field</code> and then copying and pasting all of the <code>PositiveIntegerField</code> and <code>IntegerField</code> functionality from the django code. Is there an alternative to this?</p>\n\n<p>Of course, I can always have my formfield ignore whatever widget is sent to it and always use the custom widget, but this raises a problem when I actively <em>want</em> to override the widget, which absolutely could happen. I just don't want admin to override my widget.</p>\n"}, {"tags": ["python", "python-3.x", "windows", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9553503, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9mY5ajuIb5k/AAAAAAAAAAI/AAAAAAAAACk/-5kQTYHJJ5U/photo.jpg?sz=128", "display_name": "Marcel Barlik", "link": "https://stackoverflow.com/users/9553503/marcel-barlik"}, "edited": false, "score": 0, "creation_date": 1544126353, "post_id": 53647256, "comment_id": 94175776, "body": "Thank you! That&#39;s great and just how I wanted it!"}], "tags": [], "owner": {"reputation": 4980, "user_id": 3185884, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ec42f40d221bfa844d551f3eaa8ae87f?s=128&d=identicon&r=PG&f=1", "display_name": "James Kent", "link": "https://stackoverflow.com/users/3185884/james-kent"}, "is_accepted": true, "score": 1, "last_activity_date": 1544084632, "creation_date": 1544084632, "answer_id": 53647256, "question_id": 53641648, "link": "https://stackoverflow.com/questions/53641648/tkinter-python-3-moving-a-borderless-window/53647256#53647256", "title": "Tkinter python 3 - Moving a borderless window", "body": "<p>a complete example that uses a class to wrap all the functionality:</p>\n\n<pre><code>from tkinter import *\n\nclass Grip:\n    ''' Makes a window dragable. '''\n    def __init__ (self, parent, disable=None, releasecmd=None) :\n        self.parent = parent\n        self.root = parent.winfo_toplevel()\n\n        self.disable = disable\n        if type(disable) == 'str':\n            self.disable = disable.lower()\n\n        self.releaseCMD = releasecmd\n\n        self.parent.bind('&lt;Button-1&gt;', self.relative_position)\n        self.parent.bind('&lt;ButtonRelease-1&gt;', self.drag_unbind)\n\n    def relative_position (self, event) :\n        cx, cy = self.parent.winfo_pointerxy()\n        geo = self.root.geometry().split(\"+\")\n        self.oriX, self.oriY = int(geo[1]), int(geo[2])\n        self.relX = cx - self.oriX\n        self.relY = cy - self.oriY\n\n        self.parent.bind('&lt;Motion&gt;', self.drag_wid)\n\n    def drag_wid (self, event) :\n        cx, cy = self.parent.winfo_pointerxy()\n        d = self.disable\n        x = cx - self.relX\n        y = cy - self.relY\n        if d == 'x' :\n            x = self.oriX\n        elif d == 'y' :\n            y = self.oriY\n        self.root.geometry('+%i+%i' % (x, y))\n\n    def drag_unbind (self, event) :\n        self.parent.unbind('&lt;Motion&gt;')\n        if self.releaseCMD != None :\n            self.releaseCMD()\n\ndef main():\n    root = Tk()\n    root.geometry(\"200x200\")\n    root.resizable(0, 0)\n    root.overrideredirect(1)\n\n    back = Frame(root, bg=\"grey\")\n    back.pack_propagate(0)\n    back.pack(fill=BOTH, expand=1)\n\n    top_Frame = Frame(back, bg=\"#505050\")\n    top_Frame.place(x=0, y=0, anchor=\"nw\", width=200, height=20)\n    '''Would Be great if it could be specified to only be moved\n    when dragging with the Frame above.'''\n    grip = Grip(top_Frame)\n\n    Ext_but = Button(top_Frame, text=\"X\", bg=\"#FF6666\", fg=\"white\", command=lambda: exit())\n    Ext_but.place(x=170, y=0, anchor=\"nw\", width=30, height=20)\n\n    root.mainloop()\n\nmain()\n</code></pre>\n\n<p>note there are some extra bits in this class (I copied it from what I'd done before) as it can be used to restrict which direction it can be dragged (the disable flag) and trigger a callback when the drag stops.</p>\n"}], "owner": {"reputation": 23, "user_id": 9553503, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9mY5ajuIb5k/AAAAAAAAAAI/AAAAAAAAACk/-5kQTYHJJ5U/photo.jpg?sz=128", "display_name": "Marcel Barlik", "link": "https://stackoverflow.com/users/9553503/marcel-barlik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 742, "favorite_count": 0, "accepted_answer_id": 53647256, "answer_count": 1, "score": -1, "last_activity_date": 1544084632, "creation_date": 1544048464, "question_id": 53641648, "link": "https://stackoverflow.com/questions/53641648/tkinter-python-3-moving-a-borderless-window", "title": "Tkinter python 3 - Moving a borderless window", "body": "<p><br><br>This post is practically with the same question as <a href=\"https://stackoverflow.com/questions/4055267/python-tkinter-mouse-drag-a-window-without-borders-eg-overridedirect1\">this</a>, but instead of Python 2 in Python 3 and the fact that it would also be good if you can precisely say which frame dragging actually moves like desired (like \"top_Frame\" in the example code).\n<br><br>Example code:<br></p>\n\n<pre><code>from tkinter import *\n\ndef main():\n    root = Tk()\n    root.geometry(\"200x200\")\n    root.resizable(0, 0)\n    root.overrideredirect(1)\n\n    back = Frame(root, bg=\"grey\")\n    back.pack_propagate(0)\n    back.pack(fill=BOTH, expand=1)\n\n    top_Frame = Frame(back, bg=\"#505050\")\n    top_Frame.place(x=0, y=0, anchor=\"nw\", width=200, height=20)\n    '''Would Be great if it could be specified to only be moved\n    when dragging with the Frame above.'''\n\n    Ext_but = Button(top_Frame, text=\"X\", bg=\"#FF6666\", fg=\"white\", command=lambda: exit())\n    Ext_but.place(x=170, y=0, anchor=\"nw\", width=30, height=20)\n\n    root.mainloop()\n\nmain()\n</code></pre>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 0, "creation_date": 1544049113, "post_id": 53641644, "comment_id": 94142954, "body": "<code>np.random.rand</code> will generate random uniform numbers in the range 0-1. `np.random.rand(10, 10)*2&#39; will change the range to 0-2."}, {"owner": {"reputation": 4197, "user_id": 6068294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-87QvRBEGz-U/AAAAAAAAAAI/AAAAAAAAKmA/840m-7K_5xU/photo.jpg?sz=128", "display_name": "Adrian Tompkins", "link": "https://stackoverflow.com/users/6068294/adrian-tompkins"}, "reply_to_user": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 0, "creation_date": 1544107498, "post_id": 53641644, "comment_id": 94166197, "body": "thanks, yes, that is the idea of the reproducible example, I have data ranging 0-1 but want to plot with a larger range. My actually problem involves a large number of maps I want to compare using the same colorbar on each map, hence the question."}], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 10, "last_activity_date": 1544050145, "creation_date": 1544050145, "answer_id": 53641964, "question_id": 53641644, "link": "https://stackoverflow.com/questions/53641644/set-colorbar-range-with-contourf/53641964#53641964", "title": "set colorbar range with contourf", "body": "<p><code>contourf</code> indeed works a bit differently than other <code>ScalarMappable</code>s. If you specify the number of levels (20 in this case) it will take them between the minimum and maximum data (approximately). If you want to have <code>n</code> levels between two specific values <code>vmin</code> and <code>vmax</code> you would need to supply those to the contouring function</p>\n\n<pre><code>levels = np.linspace(vmin, vmax, n+1)\nplt.contourf(fld,levels=levels,cmap='coolwarm')\n</code></pre>\n\n<p>Complete code:</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfld=np.random.rand(10,10)\nlevels = np.linspace(0,2,21)\nimg=plt.contourf(fld,levels=levels,cmap='coolwarm')\nplt.colorbar(img)\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/kyQ6f.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/kyQ6f.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 4197, "user_id": 6068294, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-87QvRBEGz-U/AAAAAAAAAAI/AAAAAAAAKmA/840m-7K_5xU/photo.jpg?sz=128", "display_name": "Adrian Tompkins", "link": "https://stackoverflow.com/users/6068294/adrian-tompkins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4852, "favorite_count": 3, "accepted_answer_id": 53641964, "answer_count": 1, "score": 10, "last_activity_date": 1544050145, "creation_date": 1544048425, "question_id": 53641644, "link": "https://stackoverflow.com/questions/53641644/set-colorbar-range-with-contourf", "title": "set colorbar range with contourf", "body": "<p>This would appear to be a duplicate of this question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3373256/set-colorbar-range-in-matplotlib\">Set Colorbar Range in matplotlib</a></p>\n\n<p>Essentially I want to set the colorbar range to set limits, e.g. 0 to 2.  When I use vmin and vmax, the range of colors in contourf is correctly set, but colorbar only shows the clipped range, i.e. the solution in the link doesn't seem to work when using contourf.  Am I missing something obvious?</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfld=np.random.rand(10,10)\nimg=plt.contourf(fld,20,cmap='coolwarm',vmin=0,vmax=2)\nplt.colorbar(img)\n</code></pre>\n\n<p>Resulting in </p>\n\n<p><a href=\"https://i.stack.imgur.com/YNfov.jpg\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/YNfov.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>How can I force the colorbar range to be 0 to 2 with contourf?</p>\n"}, {"tags": ["python", "arrays", "numpy", "matrix"], "answers": [{"tags": [], "owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "is_accepted": true, "score": 1, "last_activity_date": 1544049637, "last_edit_date": 1544049637, "creation_date": 1544049190, "answer_id": 53641786, "question_id": 53641640, "link": "https://stackoverflow.com/questions/53641640/select-entry-that-satisfies-condition/53641786#53641786", "title": "Select entry that satisfies condition", "body": "<p>The issue with your current attempt is that your indexing your <em>entire</em> array using a boolean mask that is only the size of the slice you have selected, which results in your <code>IndexError</code>.</p>\n\n<p>Check out the shapes for yourself:</p>\n\n<pre><code>&gt;&gt;&gt; Pl.shape\n(7, 2, 7)\n&gt;&gt;&gt; x = 2\n&gt;&gt;&gt; (Pl[x] &lt; 5).shape\n(2, 7)\n&gt;&gt;&gt; Pl[Pl[x] &lt; 5]\nIndexError: boolean index did not match indexed array along dimension 0; dimension is 7\nbut corresponding boolean dimension is 2\n</code></pre>\n\n<hr>\n\n<p>Instead, you want to only apply your boolean mask to the dimension you have selected:</p>\n\n<pre><code>print(Pl[x])\n</code></pre>\n\n<p></p>\n\n<pre><code>array([[0., 0., 0., 1., 0., 0., 0.],\n       [0., 1., 0., 0., 0., 0., 0.]])\n</code></pre>\n\n<p></p>\n\n<pre><code>e = 0.5\nPl[x, Pl[x] &lt; e]\n</code></pre>\n\n<p></p>\n\n<pre><code>array([0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0., 0.])\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 6312751, "user_type": "registered", "profile_image": "https://graph.facebook.com/1338337746181529/picture?type=large", "display_name": "Diogo Redin", "link": "https://stackoverflow.com/users/6312751/diogo-redin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 53641786, "answer_count": 1, "score": 0, "last_activity_date": 1544049637, "creation_date": 1544048412, "question_id": 53641640, "link": "https://stackoverflow.com/questions/53641640/select-entry-that-satisfies-condition", "title": "Select entry that satisfies condition", "body": "<p>I'm using numPy and have the following structure:</p>\n\n<pre><code>self.P = np.zeros((self.nS, self.nA, self.nS))\n</code></pre>\n\n<p>One instance of this structure could be for example:</p>\n\n<pre><code>Pl = np.zeros((7,2,7))\nPl[0,0,1]=1\nPl[1,0,2]=1\nPl[2,0,3]=1\nPl[3,0,4]=1\nPl[4,0,5]=1\nPl[5,0,6]=0.9\nPl[5,0,5]=0.1\nPl[6,0,6]=1\nPl[0,1,0]=1\nPl[1,1,1]=0\nPl[1,1,0]=1\nPl[2,1,1]=1\nPl[3,1,2]=1\nPl[4,1,3]=1\nPl[5,1,4]=1\nPl[6,1,5]=1\n</code></pre>\n\n<p>Now what I want to do is that given a number e, select <em>one</em> entry where the assigned value is &lt; e.</p>\n\n<p>Another condition is that I know the first entry (nS or x in the example) but the two other can vary.</p>\n\n<p>I tried implementing it this way:</p>\n\n<pre><code>self.P[self.P[x,:,:] &lt; e]\n</code></pre>\n\n<p>But it gives me this error: </p>\n\n<pre><code>IndexError: boolean index did not match indexed array along dimension 0; dimension is 7 but corresponding boolean dimension is 2\n</code></pre>\n\n<p>Any help is really appreciated.</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 4743, "user_id": 141789, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/57fdd140f26a1d683a056e11250451e4?s=128&d=identicon&r=PG", "display_name": "Karl", "link": "https://stackoverflow.com/users/141789/karl"}, "is_accepted": false, "score": 1, "last_activity_date": 1544048615, "creation_date": 1544048615, "answer_id": 53641688, "question_id": 53641608, "link": "https://stackoverflow.com/questions/53641608/not-sure-how-to-turn-this-into-a-loop-in-python-3/53641688#53641688", "title": "Not sure how to turn this into a loop in python 3", "body": "<pre><code>import time\n\norder_status = None\n\nwhile not order_status == \"Awaiting Payment\":\n    data = json.loads(self.rfile.read( length ).decode('utf-8'))\n    order_status = data['order_status']['name']\n    time.sleep(10) # sleep for 10 seconds\n\n# do more stuff here\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 6460941, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/60fd61c385a9b028ff17e8d1c33448ba?s=128&d=identicon&r=PG&f=1", "display_name": "adam g", "link": "https://stackoverflow.com/users/6460941/adam-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "closed_date": 1544049883, "answer_count": 1, "score": -1, "last_activity_date": 1544048615, "creation_date": 1544048258, "question_id": 53641608, "link": "https://stackoverflow.com/questions/53641608/not-sure-how-to-turn-this-into-a-loop-in-python-3", "closed_reason": "Duplicate", "title": "Not sure how to turn this into a loop in python 3", "body": "<p>Im very new to python and am a bit stuck. I have a variable called data that is json that I need to access. The problem is I get the json but it has values that end up changing due to the system processing payment information. I need to access the json after its been updated. Id like to run a loop that checks that variable.</p>\n\n<p>code:</p>\n\n<pre><code>data = json.loads(self.rfile.read( length ).decode('utf-8'))\norder_status = data['order_status']['name']\n\nif not order_status == \"Awaiting Payment\":\n    data = json.loads(self.rfile.read( length ).decode('utf-8'))\n</code></pre>\n\n<p>I want a loop that keeps checking order_status-> name and once its no longer saying \"Awaiting Payment\" set the data variable\nIm not really sure how to do that</p>\n"}, {"tags": ["python", "animation", "3d", "gif"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 10730202, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S8TEhPeiW4Q/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hOwnk8yTAywEZoekeqgpYtPYdaaw/mo/photo.jpg?sz=128", "display_name": "Sam", "link": "https://stackoverflow.com/users/10730202/sam"}, "edited": false, "score": 0, "creation_date": 1544050498, "post_id": 53641883, "comment_id": 94143421, "body": "Thank you! That&#39;s very helpful and makes a lot of sense to me."}], "tags": [], "owner": {"reputation": 1266, "user_id": 8535035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89a11115f9fdc4e0c9bec73ed48ca636?s=128&d=identicon&r=PG&f=1", "display_name": "caverac", "link": "https://stackoverflow.com/users/8535035/caverac"}, "is_accepted": true, "score": 3, "last_activity_date": 1544049721, "creation_date": 1544049721, "answer_id": 53641883, "question_id": 53641598, "link": "https://stackoverflow.com/questions/53641598/make-a-rotating-sphere-in-python/53641883#53641883", "title": "Make a Rotating Sphere in Python", "body": "<p>Change the last part of your code to generate a set of figures (see below). In this case I create <code>num = 10</code> frames, you can change this number if you want. Then open a terminal and type</p>\n\n<pre><code>convert m4_l4*.png m4_l4.gif\n</code></pre>\n\n<p>And this is the result</p>\n\n<p><a href=\"https://i.stack.imgur.com/KN4pK.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KN4pK.gif\" alt=\"enter image description here\"></a></p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib import cm, colors\nfrom mpl_toolkits.mplot3d import Axes3D\nfrom scipy.special import sph_harm     #import package to calculate spherical harmonics\n\ntheta = np.linspace(0, 2*np.pi, 100)   #setting range for theta\nphi = np.linspace(0, np.pi, 100)       #setting range for phi\nphi, theta = np.meshgrid(phi, theta)   #setting the grid for phi and theta\n\n#Setting the cartesian coordinates of the unit sphere\n#Converting phi, theta, z to cartesian coordinates\nx = np.sin(phi)*np.cos(theta)\ny = np.sin(phi)*np.sin(theta)\nz = np.cos(phi)\n\nm, l = 4, 4   #m and l control the mode of pulsation and overall appearance of the figure\n\n#Calculating the spherical harmonic Y(l,m) and normalizing it\nfigcolors = sph_harm(m, l, theta, phi).real\nfigmax, figmin = figcolors.max(), figcolors.min()\nfigcolors = (figcolors-figmin)/(figmax-figmin)\n\n#Setting the aspect ratio to 1 which makes the sphere look spherical and not elongated\nfig = plt.figure(figsize=plt.figaspect(1.))    #aspect ratio\naxes = fig.add_subplot(111, projection='3d')   #sets figure to 3d\n\n#Sets the plot surface and colors of the figure where seismic is the color scheme\naxes.plot_surface(x, y, z,  rstride=1, cstride=1,  facecolors=cm.autumn(figcolors))\n#yellow zones are cooler and compressed, red zones are warmer and expanded\n\naxes.set_axis_off()\nfig.suptitle('m=4   l=4', fontsize=18, x=0.52, y=.85)\n\nfor idx, angle in enumerate(np.linspace(0, 360, 10)):\n\n    axes.view_init(30, angle)\n    plt.draw()\n\n    #Turn off the axis planes so only the sphere is visible\n\n\n    plt.savefig('m4_l4-%04d.png' % idx)          #saves a .png file of my figure\nplt.show()  \n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 10730202, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S8TEhPeiW4Q/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hOwnk8yTAywEZoekeqgpYtPYdaaw/mo/photo.jpg?sz=128", "display_name": "Sam", "link": "https://stackoverflow.com/users/10730202/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1321, "favorite_count": 0, "accepted_answer_id": 53641883, "answer_count": 1, "score": 2, "last_activity_date": 1544049721, "creation_date": 1544048195, "question_id": 53641598, "link": "https://stackoverflow.com/questions/53641598/make-a-rotating-sphere-in-python", "title": "Make a Rotating Sphere in Python", "body": "<p>I have made this code that applies the spherical harmonics in a spherical manner as I am trying to model stellar pulsation modes.  Ideally, I'd like to be able to have an image that rotates that can be saved as a gif image.  I have found a few examples of code for doing this but none of it seems to apply to my code or uses python packages that aren't available to me.  I'm not sure if this is too far out of my range of skills in python as I'm very much a beginner.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom matplotlib import cm, colors\nfrom mpl_toolkits.mplot3d import Axes3D\nfrom scipy.special import sph_harm     #import package to calculate spherical harmonics\n\ntheta = np.linspace(0, 2*np.pi, 100)   #setting range for theta\nphi = np.linspace(0, np.pi, 100)       #setting range for phi\nphi, theta = np.meshgrid(phi, theta)   #setting the grid for phi and theta\n\n#Setting the cartesian coordinates of the unit sphere\n#Converting phi, theta, z to cartesian coordinates\nx = np.sin(phi)*np.cos(theta)\ny = np.sin(phi)*np.sin(theta)\nz = np.cos(phi)\n\nm, l = 4, 4   #m and l control the mode of pulsation and overall appearance of the figure\n\n#Calculating the spherical harmonic Y(l,m) and normalizing it\nfigcolors = sph_harm(m, l, theta, phi).real\nfigmax, figmin = figcolors.max(), figcolors.min()\nfigcolors = (figcolors-figmin)/(figmax-figmin)\n\n#Setting the aspect ratio to 1 which makes the sphere look spherical and not elongated\nfig = plt.figure(figsize=plt.figaspect(1.))    #aspect ratio\naxes = fig.add_subplot(111, projection='3d')   #sets figure to 3d\n\n#Sets the plot surface and colors of the figure where seismic is the color scheme\naxes.plot_surface(x, y, z,  rstride=1, cstride=1,  facecolors=cm.autumn(figcolors))\n#yellow zones are cooler and compressed, red zones are warmer and expanded\n\n#Turn off the axis planes so only the sphere is visible\naxes.set_axis_off()\nfig.suptitle('m=4   l=4', fontsize=18, x=0.52, y=.85)\n\nplt.savefig('m4_l4.png')          #saves a .png file of my figure\nplt.show()                        #Plots the figure\n\n#figure saved for m=1, 2, 3, 4 and l=2, 3, 5, 6 respectively then all 6 were put together to form a single figure\n</code></pre>\n\n<p>I've also got an image showing what my code outputs currently.  It's just a still sphere, of course. Thank you in advance! <a href=\"https://i.stack.imgur.com/2Yd6B.png\" rel=\"nofollow noreferrer\">sphere4_4</a></p>\n"}, {"tags": ["python", "user-interface", "tkinter", "grid"], "comments": [{"owner": {"reputation": 3763, "user_id": 8653690, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ukq3.jpg?s=128&g=1", "display_name": "Miraj50", "link": "https://stackoverflow.com/users/8653690/miraj50"}, "edited": false, "score": 0, "creation_date": 1544123928, "post_id": 53641568, "comment_id": 94174786, "body": "Probably <a href=\"https://github.com/Miraj50/Awesome-Tkinter-Apps/tree/master/Movie%20Booking\" rel=\"nofollow noreferrer\">this</a> was something, you were looking for earlier."}, {"owner": {"reputation": 31, "user_id": 7994133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af0cfdf363c11e3741a1ec0102f8f4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Viston", "link": "https://stackoverflow.com/users/7994133/viston"}, "reply_to_user": {"reputation": 3763, "user_id": 8653690, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ukq3.jpg?s=128&g=1", "display_name": "Miraj50", "link": "https://stackoverflow.com/users/8653690/miraj50"}, "edited": false, "score": 0, "creation_date": 1544138286, "post_id": 53641568, "comment_id": 94180592, "body": "@Miraj50 Thank you very much mate! That was exactly what I was looking for!"}], "answers": [{"tags": [], "owner": {"reputation": 3763, "user_id": 8653690, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/9ukq3.jpg?s=128&g=1", "display_name": "Miraj50", "link": "https://stackoverflow.com/users/8653690/miraj50"}, "is_accepted": true, "score": 1, "last_activity_date": 1544069630, "creation_date": 1544069630, "answer_id": 53644572, "question_id": 53641568, "link": "https://stackoverflow.com/questions/53641568/cant-move-object-with-grid/53644572#53644572", "title": "Can&#39;t move object with grid", "body": "<p>Yes, empty rows and columns have zero size. So, without the help of any other options, your widget will be placed at the corner of the window. But with the help of options like <code>padx</code>, <code>pady</code>, <code>sticky</code> and functions like <code>grid_columnconfigure()</code> and <code>grid_rowconfigure()</code>, you can achieve what you want. As an example, look at this:</p>\n\n<pre><code>from tkinter import *\n\nclass Application:\n    def __init__(self, master):\n        frame = Frame(master)\n        b = Button(text=\"This is a button\")\n        b.grid(row=0, column=0, pady=(20,0))\n        master.grid_columnconfigure(0, weight=1)\n\nroot = Tk()\nroot.geometry('{}x{}'.format(500, 300))\napp = Application(root)\nroot.mainloop()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ckVUn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ckVUn.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 31, "user_id": 7994133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af0cfdf363c11e3741a1ec0102f8f4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Viston", "link": "https://stackoverflow.com/users/7994133/viston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 53644572, "answer_count": 1, "score": 0, "last_activity_date": 1544069630, "creation_date": 1544048067, "last_edit_date": 1544048468, "question_id": 53641568, "link": "https://stackoverflow.com/questions/53641568/cant-move-object-with-grid", "title": "Can&#39;t move object with grid", "body": "<p>I've researched this issue, and found people with similar problem. However, the answers are not clear for me.</p>\n\n<p>I'm trying to freely move my objects into X rows and columns. Right now, regardless of what value I put into <code>column</code> or <code>row</code> my object won't change position, it's always on the top-left corner.</p>\n\n<p>According to other people's answers, empty <code>rows</code> and <code>columns</code> have zero size. How can I change that?</p>\n\n<p>This is my current code:</p>\n\n<pre><code>from tkinter import *\n\nclass Application:\n    def __init__(self, master):\n        frame = Frame(master)\n\n        b = Button(text=\"This is a button\")\n        b.grid(row=2, column=3)\n\nroot = Tk()\nroot.geometry('{}x{}'.format(500, 300))\napp = Application(root)\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 1122, "user_id": 4724240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1xpq.jpg?s=128&g=1", "display_name": "Axel Puig", "link": "https://stackoverflow.com/users/4724240/axel-puig"}, "is_accepted": true, "score": 0, "last_activity_date": 1544049902, "last_edit_date": 1544049902, "creation_date": 1544049139, "answer_id": 53641778, "question_id": 53641566, "link": "https://stackoverflow.com/questions/53641566/dictionary-sorting-issue-python/53641778#53641778", "title": "Dictionary sorting issue - python", "body": "<p>From the beginning, you can transform your dictionnary in a list.</p>\n\n<pre><code>movie_list = movieDict.items()\n</code></pre>\n\n<p>Then, to sort it, you can use the <code>sorted</code> function, and use the <code>key</code> argument to specify what value you want to sort your array by:</p>\n\n<pre><code>movie_sorted = sorted(movie_list, key=lambda row: row[1][0]) \n# The 1 corresponds to the value of a row, and the 0 corresponds to the year.\n</code></pre>\n\n<p>Then if you want to sort by director, just adapt the code ;-)</p>\n\n<p><strong>Details:</strong> the <code>key</code> argument must be a function which takes a row and returns the value to use for sorting. <code>lambda [argument]: [return value]</code> is useful to create a simple function like this.</p>\n"}], "owner": {"reputation": 23, "user_id": 10739656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d1e3a6d53fe28134ca46c9ebc726885?s=128&d=identicon&r=PG&f=1", "display_name": "iHatePythonButIDoItAnyway", "link": "https://stackoverflow.com/users/10739656/ihatepythonbutidoitanyway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 53641778, "answer_count": 1, "score": 2, "last_activity_date": 1544049902, "creation_date": 1544048053, "question_id": 53641566, "link": "https://stackoverflow.com/questions/53641566/dictionary-sorting-issue-python", "title": "Dictionary sorting issue - python", "body": "<p>I've been working on a project for school but I've hit a small bump in the road.  Almost everything is working as intended, but I am having an issue with the output in an undesired order.  I want the program to sort by year as well as director if the user decides to sort by director.  Theoretically I would like for the order of output to always have the earliest year first and the most recent year last.  You don't need to write out the code, just aim me in the right direction! Thank you in advance!</p>\n\n<pre><code> movieDict = {\"Munich\":[2005, \"Steven Spielberg\"],\n    \"The Prestige\": [2006, \"Christopher Nolan\"],\n    \"The Departed\": [2006, \"Martin Scorsese\"],\n    \"Into the Wild\": [2007, \"Sean Penn\"],\n    \"The Dark Knight\": [2008, \"Christopher Nolan\"],\n    \"Mary and Max\": [2009, \"Adam Elliot\"],\n    \"The King\\'s Speech\": [2010, \"Tom Hooper\"],\n    \"The Artist\": [2011, \"Michel Hazanavicius\"],\n    \"The Help\": [2011, \"Tate Taylor\"],\n    \"Argo\": [2012, \"Ben Affleck\"],\n    \"12 Years a Slave\": [2013, \"Steve McQueen\"],\n    \"Birdman\": [2014, \"Alejandro G. Inarritu\"],\n    \"Spotlight\": [2015, \"Tom McCarthy\"],\n    \"The BFG\": [2016, \"Steven Spielberg\"]}\n\naskYear = True\nsorted(movieDict.values())\n\nwhile askYear:\n    year = int(input(\"Enter a year between 2005 and 2016:\\n\"))     \n    if year&lt;2005 or year&gt;2016:\n        print(\"N/A\")   \n    else:\n        for key, value in movieDict.items():\n            if value[0] == year:\n                print(key + \", \" + str(value[1]) )\n        askYear = False \n\nmenu = \"MENU\" \\\n        \"\\nSort by:\" \\\n        \"\\ny - Year\" \\\n        \"\\nd - Director\" \\\n        \"\\nt - Movie title\" \\\n        \"\\nq - Quit\\n\"\n\nprompt = True\nfirstRun = True  #this helps for spacing after 1st run through, whitespace\n\nwhile prompt:\n    if firstRun == True:\n        print()\n        firstRun = False\n    print(menu)\n    userChoice = input(\"Choose an option:\\n\")\n    if userChoice == \"q\":   #quits\n        prompt = False  #ends program if user quits\n\n    elif userChoice==\"y\":   #sorts by year\n        yearDict = {}            \n        for key, value in sorted(movieDict.items(), key=lambda item: (item[1], item[0])):\n            year = value[0]\n            title = key\n            director = value[1]\n            if year not in yearDict:\n                yearDict[year] = [[title, director]]\n            else:\n                yearDict[year].append([title, director])            \n        for year in sorted(yearDict):\n            print (year,end=':\\n')\n            movies = yearDict[year]\n            for movie in sorted(movies, key = lambda x:x[0]):\n                print(\"\\t\"+movie[0] + \", \" + movie[1])\n            print()\n\n    elif userChoice == \"d\":   #sorts by director\n        directorDict = {}    \n\n        for key, value in sorted(movieDict.items(), key=lambda item: (item[1],item[1])):\n            year = value[0]\n            title = key\n            director = value[1]\n            if director not in directorDict:\n                directorDict[director] = [[title, year]]\n            else:\n                directorDict[director].append([title, year])            \n        for director in sorted(directorDict):\n            print (director,end=':\\n')\n            movies = directorDict[director]\n            for movie in sorted(movies, key = lambda x:x[0]):\n                print(\"\\t\"+movie[0] + \", \" + str(movie[1]))            \n            print()\n\n    elif userChoice == \"t\":   #sorts by title\n        for key, value in sorted(movieDict.items(), key=lambda item: (item[0], item[1])):\n            print(key,end=':\\n')\n            print(\"\\t\" + str(value[1]) + \", \" + str(value[0])+\"\\n\")\n    else:\n        print(\"Invalid input\") \n</code></pre>\n"}, {"tags": ["python", "python-3.x", "python-2.7", "list", "dictionary"], "comments": [{"owner": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "edited": false, "score": 0, "creation_date": 1544048115, "post_id": 53641543, "comment_id": 94142609, "body": "do the orders match up as in your example. Like are you trying to match <code>dict1[i]</code> with <code>dict2[i]</code> always?"}, {"owner": {"reputation": 145, "user_id": 9254801, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Z9eoxDHo_z4/AAAAAAAAAAI/AAAAAAAAAj8/d8Zs292u52g/photo.jpg?sz=128", "display_name": "Tuhin Sah", "link": "https://stackoverflow.com/users/9254801/tuhin-sah"}, "reply_to_user": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "edited": false, "score": 0, "creation_date": 1544819560, "post_id": 53641543, "comment_id": 94424587, "body": "That is the case, for now."}], "answers": [{"tags": [], "owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "is_accepted": true, "score": 4, "last_activity_date": 1544049086, "last_edit_date": 1544049086, "creation_date": 1544048099, "answer_id": 53641573, "question_id": 53641543, "link": "https://stackoverflow.com/questions/53641543/pythonic-way-of-merging-2-lists-of-dicts-based-on-common-keys/53641573#53641573", "title": "Pythonic way of merging 2 lists of dicts based on common keys", "body": "<p>Assuming the merging-candidates from the two lists are the dicts from the same position, you can zip your lists together, employ a list comprehension and use the <a href=\"https://stackoverflow.com/a/26853961/3620003\"><code>**</code>-syntax idiom</a> for merging two dicts.</p>\n\n<pre><code>&gt;&gt;&gt; dicts1 = [{\"a\":1, \"b\":2, \"c\":1295}, {\"a\":2, \"b\":5, \"c\":6274}, {\"a\":3, \"b\":1, \"c\":5337}]\n&gt;&gt;&gt; dicts2 = [{\"a\":1, \"b\":2, \"d\":1884}, {\"a\":2, \"b\":5, \"d\":2049}, {\"a\":3, \"b\":3, \"d\":1086}]\n&gt;&gt;&gt; \n&gt;&gt;&gt; [{**d1, **d2} for d1, d2 in zip(dicts1, dicts2) if all(d1[k] == d2[k] for k in ('a', 'b'))]\n[{'a': 1, 'b': 2, 'c': 1295, 'd': 1884},\n {'a': 2, 'b': 5, 'c': 6274, 'd': 2049}]\n</code></pre>\n\n<hr>\n\n<p>Bonus <code>pandas</code> solution:</p>\n\n<pre><code>&gt;&gt;&gt; df1 = pd.DataFrame(dicts1)\n&gt;&gt;&gt; df2 = pd.DataFrame(dicts2)\n&gt;&gt;&gt; \n&gt;&gt;&gt; df1\n   a  b     c\n0  1  2  1295\n1  2  5  6274\n2  3  1  5337\n&gt;&gt;&gt; \n&gt;&gt;&gt; df2\n   a  b     d\n0  1  2  1884\n1  2  5  2049\n2  3  3  1086\n&gt;&gt;&gt; \n&gt;&gt;&gt; pd.merge(df1, df2, on=['a', 'b']).to_dict(orient='records')\n[{'a': 1, 'b': 2, 'c': 1295, 'd': 1884},\n {'a': 2, 'b': 5, 'c': 6274, 'd': 2049}]\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 9254801, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Z9eoxDHo_z4/AAAAAAAAAAI/AAAAAAAAAj8/d8Zs292u52g/photo.jpg?sz=128", "display_name": "Tuhin Sah", "link": "https://stackoverflow.com/users/9254801/tuhin-sah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 53641573, "answer_count": 1, "score": 1, "last_activity_date": 1544049086, "creation_date": 1544047936, "last_edit_date": 1544048908, "question_id": 53641543, "link": "https://stackoverflow.com/questions/53641543/pythonic-way-of-merging-2-lists-of-dicts-based-on-common-keys", "title": "Pythonic way of merging 2 lists of dicts based on common keys", "body": "<p>I have 2 lists of dictionaries:</p>\n\n<pre><code>dict1 = [{\"a\":1, \"b\":2, \"c\":1295}, {\"a\":2, \"b\":5, \"c\":6274}, {\"a\":3, \"b\":1, \"c\":5337}]\n</code></pre>\n\n<p>and</p>\n\n<pre><code>dict2 = `[{\"a\":1, \"b\":2, \"d\":1884}, {\"a\":2, \"b\":5, \"d\":2049}, {\"a\":3, \"b\":3, \"d\":1086}]\n</code></pre>\n\n<p>The first list of dicts has the keys <code>\"a\"</code>, <code>\"b\"</code> and <code>\"c\"</code>, while the second list has keys <code>\"a\"</code>, <code>\"b\"</code> and <code>\"d\"</code>.</p>\n\n<p>I want to create a list of merged dicts having all 4 keys. Only the dicts with equal values for <code>\"a\"</code> and <code>\"b\"</code> need to be merged.</p>\n\n<p>The expected result looks like this: </p>\n\n<pre><code>[{\"a\":1, \"b\":2, \"c\":1295, \"d\":1884}, {\"a\":2, \"b\":5, \"c\":6274, \"d\":2049}]\n</code></pre>\n\n<p>I am looking for a Pythonic way of doing this.</p>\n"}, {"tags": ["python", "mysql", "django"], "comments": [{"owner": {"reputation": 9336, "user_id": 1199464, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c46065552123344aa8fb40f4366790f3?s=128&d=identicon&r=PG", "display_name": "markwalker_", "link": "https://stackoverflow.com/users/1199464/markwalker"}, "edited": false, "score": 0, "creation_date": 1544049005, "post_id": 53641541, "comment_id": 94142915, "body": "Looks like the system doesn&#39;t have mysql. <code>mysql_config</code> is a system config file relating to the local mysql server."}], "answers": [{"tags": [], "owner": {"reputation": 7007, "user_id": 10195153, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VnLka.jpg?s=128&g=1", "display_name": "danblack", "link": "https://stackoverflow.com/users/10195153/danblack"}, "is_accepted": true, "score": 17, "last_activity_date": 1544049093, "last_edit_date": 1544049093, "creation_date": 1544048955, "answer_id": 53641741, "question_id": 53641541, "link": "https://stackoverflow.com/questions/53641541/why-pip-install-mysqlclient-not-working-in-ubuntu-18-04-lts/53641741#53641741", "title": "why &#39;pip install mysqlclient&#39; not working in ubuntu 18.04 LTS", "body": "<p><code>mysqlclient</code> has a dependency on the mysql client &amp; dev packages being installed.  In order to fix this on ubuntu, you have to use <code>apt-get</code> to install a couple of mysql packages.</p>\n\n<p>In your case, it looks like the missing <code>mysql_config</code> might be missing on your system.  You can fix that by installing <code>libmysqlclient-dev</code> on ubuntu bionic.</p>\n"}, {"comments": [{"owner": {"reputation": 5077, "user_id": 5476209, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/SKMHP.jpg?s=128&g=1", "display_name": "TapanHP", "link": "https://stackoverflow.com/users/5476209/tapanhp"}, "edited": false, "score": 1, "creation_date": 1596605392, "post_id": 59868899, "comment_id": 111861171, "body": "This answer is working perfectly in my case, the Last step is important"}, {"owner": {"reputation": 1725, "user_id": 4286327, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/0UomC.jpg?s=128&g=1", "display_name": "Hardik Raval", "link": "https://stackoverflow.com/users/4286327/hardik-raval"}, "edited": false, "score": 0, "creation_date": 1610371929, "post_id": 59868899, "comment_id": 116103730, "body": "Thanks, brother! it worked."}], "tags": [], "owner": {"reputation": 678, "user_id": 8271728, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--EJn8rTnwGk/AAAAAAAAAAI/AAAAAAAADn4/Ol5IopseS2Y/photo.jpg?sz=128", "display_name": "Steve Mapes", "link": "https://stackoverflow.com/users/8271728/steve-mapes"}, "is_accepted": false, "score": 5, "last_activity_date": 1612920866, "last_edit_date": 1612920866, "creation_date": 1579730559, "answer_id": 59868899, "question_id": 53641541, "link": "https://stackoverflow.com/questions/53641541/why-pip-install-mysqlclient-not-working-in-ubuntu-18-04-lts/59868899#59868899", "title": "why &#39;pip install mysqlclient&#39; not working in ubuntu 18.04 LTS", "body": "<p>In order to correctly install MySQLClient on a fresh Ubuntu 18.04 LTS you need to install each of the following:</p>\n<pre class=\"lang-sh prettyprint-override\"><code># Replace python3.6 with which ever version of Python3 you are using\nsudo apt-get install python3.6-dev \nsudo apt-get install mysql-client\nsudo apt-get install libmysqlclient-dev\nsudo apt-get install libssl-dev\n</code></pre>\n<p>The last one is often missed on answers but is required now.</p>\n<p>Only then can  you install it via pip. Also make sure to update pip so you are not using version 9 if that installs into your vevn.</p>\n"}, {"tags": [], "owner": {"reputation": 303, "user_id": 8585150, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mWJT0.jpg?s=128&g=1", "display_name": "Naveen Nirban Yadav", "link": "https://stackoverflow.com/users/8585150/naveen-nirban-yadav"}, "is_accepted": false, "score": 0, "last_activity_date": 1603603792, "last_edit_date": 1603603792, "creation_date": 1603603456, "answer_id": 64520620, "question_id": 53641541, "link": "https://stackoverflow.com/questions/53641541/why-pip-install-mysqlclient-not-working-in-ubuntu-18-04-lts/64520620#64520620", "title": "why &#39;pip install mysqlclient&#39; not working in ubuntu 18.04 LTS", "body": "<p>Check if you have already installed <strong>setuptools</strong>.\nAfter that\nin terminal</p>\n<pre><code>sudo apt-get install libmysqlclient-dev\n</code></pre>\n<p>Then(Keeping in mind to activate the <em><strong>virtual</strong></em> enviroment)</p>\n<pre><code>sudo pip3 install mysqlclient\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 7701005, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef75bf3ca396b5f6118bc2c86fe52212?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Thompson", "link": "https://stackoverflow.com/users/7701005/ryan-thompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7978, "favorite_count": 2, "accepted_answer_id": 53641741, "answer_count": 3, "score": 5, "last_activity_date": 1612920866, "creation_date": 1544047928, "last_edit_date": 1544048920, "question_id": 53641541, "link": "https://stackoverflow.com/questions/53641541/why-pip-install-mysqlclient-not-working-in-ubuntu-18-04-lts", "title": "why &#39;pip install mysqlclient&#39; not working in ubuntu 18.04 LTS", "body": "<p>I have just created a virtual environment on my machine (I am running on ubuntu 18.04 LTS). I have the python version of 3.6.7 and now I want to install mysqlclient into my virtual environment.</p>\n\n<p>After I do <code>pip install mysqlclient</code> it didn't work, instead it gave me errors saying; </p>\n\n<blockquote>\n  <p>Command \"python.py egg_info\" failed with error code 1 in /tmp/pip-install-zd21vfb3/mysqlclient/', and that the msql_config file is not found. </p>\n</blockquote>\n\n<p>My setup tools are all up to date.</p>\n"}, {"tags": ["python", "matplotlib", "primes"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1544048928, "post_id": 53641523, "comment_id": 94142879, "body": "You are plotting random numbers, not prime numbers. So I&#39;m a bit lost on what the problem is, other than actually <i>using</i> the prime numbers previously calculated."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10071389"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1544048974, "post_id": 53641523, "comment_id": 94142903, "body": "The example is using random numbers, but I want to use the list of prime numbers generated AND fit it inside of a large grid."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10071389"}, "edited": false, "score": 0, "creation_date": 1544050856, "post_id": 53641672, "comment_id": 94143541, "body": "The function currently being used is faster than eulerlib&#39;s. Tested on a variety of number ranges (100-1,000,000)"}], "tags": [], "owner": {"reputation": 9, "user_id": 5702319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9f494dddc95896a0800a50d8f5c80572?s=128&d=identicon&r=PG&f=1", "display_name": "user5702319", "link": "https://stackoverflow.com/users/5702319/user5702319"}, "is_accepted": false, "score": -1, "last_activity_date": 1544048527, "creation_date": 1544048527, "answer_id": 53641672, "question_id": 53641523, "link": "https://stackoverflow.com/questions/53641523/creating-grid-based-on-prime-numbers/53641672#53641672", "title": "Creating grid based on prime numbers", "body": "<p>For the primer numbers generation you could use eulerlib:   <a href=\"https://pypi.org/project/eulerlib/\" rel=\"nofollow noreferrer\">https://pypi.org/project/eulerlib/</a>\nThis library is very useful when dealing with prime numbers.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10071389"}, "edited": false, "score": 0, "creation_date": 1544052273, "post_id": 53642188, "comment_id": 94143971, "body": "This is the solution. Though I am curious if there is a way to increase the speed of the program. Doing large numbers starts to take a &quot;lot&quot; of time. The numbers also seem to get cut off if the digits stretch too far."}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1544052320, "post_id": 53642188, "comment_id": 94143978, "body": "For large numbers of <code>n</code>, please remove the <code>ax.text</code>-part... this is only for illustration."}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 2, "last_activity_date": 1544051310, "creation_date": 1544051310, "answer_id": 53642188, "question_id": 53641523, "link": "https://stackoverflow.com/questions/53641523/creating-grid-based-on-prime-numbers/53642188#53642188", "title": "Creating grid based on prime numbers", "body": "<p>I guess the idea would be to create an array of zeros (the value for \"not a prime number\") and set those values in it to 1 where you have a prime number. Then you need to reshape the array to an NxN grid. </p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\n\ndef all_prime(n):\n    # https://stackoverflow.com/questions/2068372/fastest-way-to-list-all-\n    #primes-below-n-in-python/3035188#3035188\n    \"\"\" Returns  a list of primes &lt; n \"\"\"\n    sieve = [True] * n\n    for i in range(3,int(n**0.5)+1,2):\n        if sieve[i]:\n            sieve[i*i::2*i]=[False]*((n-i*i-1)//(2*i)+1)\n    return [2] + [i for i in range(3,n,2) if sieve[i]]\n\ndef prime_plot(n):\n    '''\n    Takes on argument (n), which is a number &gt; 2 and produces a list of all primes up to n.\n    Will then show on a plot the primes vs all numbers in range n.\n    '''\n    N = int(np.sqrt(n))\n    if N*N != n:\n        raise ValueError(\"Need a square grid.\")\n\n    primes = np.array(all_prime(n)).astype(int)\n    data = np.zeros(n)\n    data[primes] = 1\n    data = data.reshape(N,N)\n\n    fig, ax = plt.subplots()\n    ax.imshow(data, cmap=\"gray_r\")\n\n    for p in primes:\n        ax.text(p%N, p//N, p, color=\"w\", ha=\"center\", va=\"center\")\n\n    plt.show()\n\nprime_plot(100)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/xN5Mf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/xN5Mf.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10071389"}, "edited": false, "score": 0, "creation_date": 1544418248, "post_id": 53689484, "comment_id": 94254397, "body": "This is an interesting take on it! I wonder how long it takes turtles to draw this all out. (Especially for really large grids)"}, {"owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "edited": false, "score": 0, "creation_date": 1544477031, "post_id": 53689484, "comment_id": 94282206, "body": "@JacobPox, wrapping the <code>try</code> clause with a <code>screen.tracer(True)</code> ... <code>screen.tracer(False)</code> for speed, tossing the number writing part, reducing the square size to 2 x 2 pixels, I was able to produce a 500 x 500 square in about 7 seconds."}], "tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1544331515, "last_edit_date": 1544331515, "creation_date": 1544331014, "answer_id": 53689484, "question_id": 53641523, "link": "https://stackoverflow.com/questions/53641523/creating-grid-based-on-prime-numbers/53689484#53689484", "title": "Creating grid based on prime numbers", "body": "<blockquote>\n  <p>Large grids seem to look really messy with matplotlib.</p>\n</blockquote>\n\n<p>Just for fun, I decided to try to implement your program using Python turtle.  Also, for programming practice, I turned <code>all_prime()</code> into a generator:</p>\n\n<pre><code>from turtle import Screen, Turtle\n\nLIMIT = 100\nSQUARE_SIZE = 40\n\ndef all_prime(n):\n    \"\"\" Returns  a list of primes &lt; n \"\"\"\n\n    # https://stackoverflow.com/questions/2068372/fastest-way-to-list-all-\n    # primes-below-n-in-python/3035188#3035188\n\n    yield 2\n\n    sieve = [True] * n\n\n    for i in range(3, int(n ** 0.5) + 1, 2):\n        if sieve[i]:\n            sieve[i * i::2 * i] = [False] * ((n - i * i - 1) // (2 * i) + 1)\n\n    yield from (i for i in range(3, n, 2) if sieve[i])\n\nFONT_SIZE = SQUARE_SIZE // 2\nFONT = ('Arial', FONT_SIZE, 'normal')\nCURSOR_SIZE = 20\nBORDER = SQUARE_SIZE\nROOT = int(LIMIT ** 0.5)\n\nscreen = Screen()\nscreen.setup(ROOT * SQUARE_SIZE + BORDER * 2, ROOT * SQUARE_SIZE + BORDER * 2)\nscreen.setworldcoordinates(-1, ROOT + 1, ROOT + 1, -1)\n\nturtle = Turtle(\"square\", visible=False)\nturtle.penup()\nturtle.goto((ROOT + 2) / 2 - 1, (ROOT + 2) / 2 - 1)\n\nturtle.shapesize((ROOT * SQUARE_SIZE) / CURSOR_SIZE)\nturtle.color(\"black\", \"white\")\nturtle.stamp()  # border\n\nturtle.shapesize(SQUARE_SIZE / CURSOR_SIZE)\nturtle.color(\"white\", \"black\")\n\nprimes = all_prime(LIMIT)\n\ntry:\n    prime = next(primes)\n\n    for y in range(ROOT):\n\n        if not prime:\n            break\n\n        for x in range(ROOT):\n\n            if prime == (y * ROOT) + x:\n                turtle.goto(x + 0.5, y + 0.5)\n                turtle.stamp()\n\n                turtle.sety(y + 0.5 + FONT_SIZE / SQUARE_SIZE / 2)\n                turtle.write(prime, align=\"center\", font=FONT)\n\n                prime = next(primes)\n\nexcept StopIteration:\n    pass\n\nscreen.mainloop()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/0mUPh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0mUPh.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10071389"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 1, "accepted_answer_id": 53642188, "answer_count": 3, "score": 1, "last_activity_date": 1544331515, "creation_date": 1544047829, "last_edit_date": 1544049205, "question_id": 53641523, "link": "https://stackoverflow.com/questions/53641523/creating-grid-based-on-prime-numbers", "title": "Creating grid based on prime numbers", "body": "<p>I'm working on plotting a 1,000 x 1,000 grid where a white square represents a non-prime number, and a black square represents a prime number.</p>\n\n<p>What it should look like is a large grid displaying numbers 0-1,000,000 and blackening any square where a prime is (so on the first and second square it is white (0 and 1) and the third and fourth square is black (2 and 3), etc). All the way up to 1,000,000</p>\n\n<h1>My code so far:</h1>\n\n<p><strong>Imports</strong></p>\n\n<pre><code>from math import sqrt, ceil\nimport matplotlib.pyplot as plt\nfrom matplotlib import colors\nimport numpy as np\n</code></pre>\n\n<p><strong>Generating list of primes</strong></p>\n\n<pre><code>def all_prime(n):\n    # https://stackoverflow.com/questions/2068372/fastest-way-to-list-all-primes-below-n-in-python/3035188#3035188\n    \"\"\" Returns  a list of primes &lt; n \"\"\"\n    sieve = [True] * n\n    for i in range(3,int(n**0.5)+1,2):\n        if sieve[i]:\n            sieve[i*i::2*i]=[False]*((n-i*i-1)//(2*i)+1)\n    return [2] + [i for i in range(3,n,2) if sieve[i]]\n</code></pre>\n\n<p><strong>Actual plotting</strong></p>\n\n<pre><code>def prime_plot(n):\n    '''\n    Takes on argument (n), which is a number &gt; 2 and produces a list of all primes up to n.\n    Will then show on a plot the primes vs all numbers in range n.\n    '''\n\n    x = all_prime(n)\n    y = list(range(n))\n\n    data = np.random.rand(10, 10) * 20\n\n    cmap = colors.ListedColormap(['white', 'black'])\n    bounds = [0,10,20]\n    norm = colors.BoundaryNorm(bounds, cmap.N)\n\n    fig, ax = plt.subplots()\n    ax.imshow(data, cmap=cmap, norm=norm)\n\n    # draw gridlines\n    ax.grid(which='major', axis='both', linestyle='-', color='k', linewidth=2)\n    ax.set_xticks(np.arange(0, 10, 1));\n    ax.set_yticks(np.arange(0, 10, 1));\n\n    plt.show()\n\nprime_plot(100)  \n</code></pre>\n\n<p>Although my intention is to generate a grid of size m x m (where m is sqrt(len(n)), I want to start by making a static sized grid.</p>\n\n<p>How can I modify the above code to create what I want. Large grids seem to look really messy with matplotlib. </p>\n\n<p><strong>When changing data to use the lists</strong> I get TypeError: Image data cannot be converted to float</p>\n\n<pre><code>data = (x, y)\n</code></pre>\n\n<p>How do I need to convert the lists of x and y into what I need (instead of randomly generated numbers)?</p>\n"}, {"tags": ["python", "pandas", "pandas-groupby"], "comments": [{"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 1, "creation_date": 1544047931, "post_id": 53641513, "comment_id": 94142548, "body": "Can you please include the desired output and explain a bit more clearly the logic by which you arrive there?"}, {"owner": {"reputation": 15836, "user_id": 9299259, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7A5cq.jpg?s=128&g=1", "display_name": "YOLO", "link": "https://stackoverflow.com/users/9299259/yolo"}, "edited": false, "score": 0, "creation_date": 1544048664, "post_id": 53641513, "comment_id": 94142789, "body": "I don&#39;t understand your question."}, {"owner": {"reputation": 339, "user_id": 10750541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v70VD.jpg?s=128&g=1", "display_name": "Newbielp", "link": "https://stackoverflow.com/users/10750541/newbielp"}, "edited": false, "score": 2, "creation_date": 1544048960, "post_id": 53641513, "comment_id": 94142893, "body": "I am trying to update it. New to this and pressed something that actually posted it before I finish it."}, {"owner": {"reputation": 1016, "user_id": 2412335, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBfPf.jpg?s=128&g=1", "display_name": "digijay", "link": "https://stackoverflow.com/users/2412335/digijay"}, "edited": false, "score": 0, "creation_date": 1544049930, "post_id": 53641513, "comment_id": 94143234, "body": "There is a comma missing behind the last-but-one vector of <code>my_list</code> btw."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1544051265, "post_id": 53641513, "comment_id": 94143682, "body": "@Newbielp shouldn&#39;t the row <code>0, &#39;B&#39;, 8, 10, 14</code> be in your desired output?  8 is in the minimum for group <code>(0, &#39;B&#39;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 339, "user_id": 10750541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v70VD.jpg?s=128&g=1", "display_name": "Newbielp", "link": "https://stackoverflow.com/users/10750541/newbielp"}, "edited": false, "score": 0, "creation_date": 1544049884, "post_id": 53641856, "comment_id": 94143214, "body": "But then I get row[3] -starting from [0]- which has info [0, &#39;A&#39;, 9, 13, 17, 10, 8, 2], which I do not want, because 9 &lt; 10 and 9 &gt; 8, so it should not be in the output."}, {"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 2, "creation_date": 1544050098, "post_id": 53641856, "comment_id": 94143292, "body": "@ScottBoston you can replace the <code>lambda x: x.max() - x.min()</code> with just <code>np.ptp</code>"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1544064472, "post_id": 53641856, "comment_id": 94146796, "body": "@user3483203 Oh.  nice.  Thanks.    I wasn&#39;t aware of such a simple numpy method."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 339, "user_id": 10750541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v70VD.jpg?s=128&g=1", "display_name": "Newbielp", "link": "https://stackoverflow.com/users/10750541/newbielp"}, "edited": false, "score": 0, "creation_date": 1544065353, "post_id": 53641856, "comment_id": 94146981, "body": "@Newbielp  I think I understand what you are asking for now.  Filter rows in the dataframe for max and min values with in each group."}, {"owner": {"reputation": 339, "user_id": 10750541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v70VD.jpg?s=128&g=1", "display_name": "Newbielp", "link": "https://stackoverflow.com/users/10750541/newbielp"}, "edited": false, "score": 0, "creation_date": 1544171117, "post_id": 53641856, "comment_id": 94189155, "body": "@Scott, thanks Scott, I try to work on your suggestion. I am getting some errors.  Error with first option: Cannot sort by duplicate column id, str(x), .sort_values([&#39;id&#39;,&#39;quality&#39;])  Error with second option: Cannot sort by duplicate column id,str(x), .sort_values([&#39;id&#39;,&#39;quality&#39;])  But I will find examples with &quot;transform&quot; to work on it."}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 1, "last_activity_date": 1544065235, "last_edit_date": 1592644375, "creation_date": 1544049554, "answer_id": 53641856, "question_id": 53641513, "link": "https://stackoverflow.com/questions/53641513/python-code-in-order-to-groupby-and-return-all-occurences-that-are-found-in-the/53641856#53641856", "title": "Python code in order to groupby and return all occurences that are found in the data", "body": "<h2>Updated solution, I think you need this:</h2>\n<pre><code>my_frame[my_frame.groupby(['id','quality'])['grade']\\\n                 .transform(lambda x: (x == x.min()) | (x == x.max()))]\\\n                 .sort_values(['id','quality'])\n</code></pre>\n<p>Output:</p>\n<pre><code>    id quality  grade  characteristic 1  characteristic 2\n0    0       A     10                12                14\n1    0       A     10                13                15\n2    0       A      8                12                13\n4    0       A      8                11                15\n6    0       B     11                 5                 9\n7    0       B      8                 7                 8\n9    0       B      8                10                14\n8    1       A     11                14                 9\n11   1       A     10                 5                 9\n10   1       B     11                 6                 6\n12   1       B      9                 6                 6\n</code></pre>\n<p>And, converted to 2d array:</p>\n<pre><code>my_frame[my_frame.groupby(['id','quality'])['grade']\\\n                 .transform(lambda x: (x == x.min()) | (x == x.max()))]\\\n                 .sort_values(['id','quality']).values.tolist()\n           \n</code></pre>\n<p>Output:</p>\n<pre><code>[[0, 'A', 10, 12, 14],\n [0, 'A', 10, 13, 15],\n [0, 'A', 8, 12, 13],\n [0, 'A', 8, 11, 15],\n [0, 'B', 11, 5, 9],\n [0, 'B', 8, 7, 8],\n [0, 'B', 8, 10, 14],\n [1, 'A', 11, 14, 9],\n [1, 'A', 10, 5, 9],\n [1, 'B', 11, 6, 6],\n [1, 'B', 9, 6, 6]]\n</code></pre>\n<hr />\n<p>IIUC, you want to join back the results of your groupby aggregation to your original dataframe:</p>\n<pre><code>my_frame.merge(my_frame.groupby(['id','quality'])['grade']\n                       .agg(['max','min', lambda x: x.max()-x.min()]), \n               left_on=['id','quality'], \n               right_index=True).values.tolist()\n</code></pre>\n<p>Output:</p>\n<pre><code>[[0, 'A', 10, 12, 14, 10, 8, 2],\n [0, 'A', 10, 13, 15, 10, 8, 2],\n [0, 'A', 8, 12, 13, 10, 8, 2],\n [0, 'A', 9, 13, 17, 10, 8, 2],\n [0, 'A', 8, 11, 15, 10, 8, 2],\n [0, 'B', 9, 5, 7, 11, 8, 3],\n [0, 'B', 11, 5, 9, 11, 8, 3],\n [0, 'B', 8, 7, 8, 11, 8, 3],\n [0, 'B', 8, 10, 14, 11, 8, 3],\n [1, 'A', 11, 14, 9, 11, 11, 0],\n [1, 'B', 11, 6, 6, 11, 11, 0]]\n</code></pre>\n"}], "owner": {"reputation": 339, "user_id": 10750541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v70VD.jpg?s=128&g=1", "display_name": "Newbielp", "link": "https://stackoverflow.com/users/10750541/newbielp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 53641856, "answer_count": 1, "score": 1, "last_activity_date": 1544065235, "creation_date": 1544047795, "last_edit_date": 1544049259, "question_id": 53641513, "link": "https://stackoverflow.com/questions/53641513/python-code-in-order-to-groupby-and-return-all-occurences-that-are-found-in-the", "title": "Python code in order to groupby and return all occurences that are found in the data", "body": "<p>Assume that my data is:</p>\n\n<pre><code>my_list=[[0,'A',10,12,14],\n         [0,'A',10,13,15],\n         [0,'A',8,12,13],\n         [0,'A',9,13,17],\n         [0,'A',8,11,15],\n         [0,'B',9,5,7],\n         [0,'B',11,5,9],\n         [0,'B',8,7,8],\n         [1,'A',11,14,9],\n         [0,'B',8,10,14],\n         [1,'B',11,6,6],\n         [1,'A',10,5,9]\n         [1,'B',9,6,6]]\n\nmy_frame=pd.DataFrame(my_list, columns=['id','quality','grade','characteristic 1','characteristic 2'])\n</code></pre>\n\n<p>My aim is to group my data by 'id' and 'quality' using the grade as the max and min value of interest. So I code:</p>\n\n<pre><code>my_group=np.array(my_frame.groupby(['id','quality'])['grade']\n         .agg([\"max grade\", max],[\"min grade\", min])\n         .reset_index())\n</code></pre>\n\n<p>So far so good, but I have not figured out how to deal with what I really need as information:</p>\n\n<p>I would like to group and get all cases that grade max and min occurs, with all the information of the row. In other words, the code that currently works for me gives me this:</p>\n\n<pre><code>print(my_group)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[[0,'A',10,8],\n [0,'B',11,8],\n [1,'A',11,10],\n [1,'B',11,9]]\n</code></pre>\n\n<p>However, what I am interested in is to bring this kind of output:</p>\n\n<pre><code>[[0,'A',10,12,14],\n [0,'A',10,13,15],\n [0,'A',8,12,13],\n [0,'A',8,11,15],\n [0,'B',11,5,9],\n [0,'B',8,7,8],\n [0,'B',8,10,14],\n [1,'A',11,14,9],\n [1,'A',10,5,9],\n [1,'B',11,6,6],\n [1,'B',9,6,6]]\n</code></pre>\n\n<p>To make it as clear as possible, the groupby will bring me the max and the min 'grade' per 'id' and per 'quality', but I actually need to know the rest of the information ('characteristic 1' and 'characteristic 2') that I get this max and min 'grade', regardless how many times the max 'grade' and min 'grade' appear.</p>\n\n<p>Could you please guide me through this? I hope my question is clear.</p>\n"}, {"tags": ["python", "try-catch"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 2, "creation_date": 1544047807, "post_id": 53641505, "comment_id": 94142498, "body": "Why don&#39;t you use the <code>with</code> context manager form of <code>open</code>?"}, {"owner": {"reputation": 355, "user_id": 8061009, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ff5b697d05361175a3d6008176bcead?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/8061009/will"}, "edited": false, "score": 0, "creation_date": 1544048285, "post_id": 53641505, "comment_id": 94142667, "body": "relevant <a href=\"https://stackoverflow.com/q/9282967/8061009\">stackoverflow.com/q/9282967/8061009</a> to what jonrsharpe suggested."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9946249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14199333b816fac4f12f81fd7bb6cf2?s=128&d=identicon&r=PG&f=1", "display_name": "user9946249", "link": "https://stackoverflow.com/users/9946249/user9946249"}, "edited": false, "score": 0, "creation_date": 1544048267, "post_id": 53641565, "comment_id": 94142660, "body": "1. good, that&#39;s what I wanted. So is there any difference between raising this in the try block or before?"}, {"owner": {"reputation": 1122, "user_id": 4724240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1xpq.jpg?s=128&g=1", "display_name": "Axel Puig", "link": "https://stackoverflow.com/users/4724240/axel-puig"}, "reply_to_user": {"reputation": 1, "user_id": 9946249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14199333b816fac4f12f81fd7bb6cf2?s=128&d=identicon&r=PG&f=1", "display_name": "user9946249", "link": "https://stackoverflow.com/users/9946249/user9946249"}, "edited": false, "score": 0, "creation_date": 1544048326, "post_id": 53641565, "comment_id": 94142681, "body": "If you raise the exception in the try block, the code in the <code>finally:</code> part will be executed. Else it will not."}, {"owner": {"reputation": 1, "user_id": 9946249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14199333b816fac4f12f81fd7bb6cf2?s=128&d=identicon&r=PG&f=1", "display_name": "user9946249", "link": "https://stackoverflow.com/users/9946249/user9946249"}, "edited": false, "score": 0, "creation_date": 1544048739, "post_id": 53641565, "comment_id": 94142815, "body": "Not sure I understood. If I wrote it before the try, it means it won&#39;t get to the finally part?"}, {"owner": {"reputation": 1122, "user_id": 4724240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1xpq.jpg?s=128&g=1", "display_name": "Axel Puig", "link": "https://stackoverflow.com/users/4724240/axel-puig"}, "reply_to_user": {"reputation": 1, "user_id": 9946249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14199333b816fac4f12f81fd7bb6cf2?s=128&d=identicon&r=PG&f=1", "display_name": "user9946249", "link": "https://stackoverflow.com/users/9946249/user9946249"}, "edited": false, "score": 0, "creation_date": 1544049345, "post_id": 53641565, "comment_id": 94143035, "body": "Yes, like any other exception, it stops the code. If you want to run the <code>finally</code> part, the exception must be raised in the <code>try</code> part. (That&#39;s the role of <code>try</code>: doing something specific if an exception is raised.)"}, {"owner": {"reputation": 1, "user_id": 9946249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14199333b816fac4f12f81fd7bb6cf2?s=128&d=identicon&r=PG&f=1", "display_name": "user9946249", "link": "https://stackoverflow.com/users/9946249/user9946249"}, "edited": false, "score": 0, "creation_date": 1544078927, "post_id": 53641565, "comment_id": 94150449, "body": "@Alex Pluig I see it now. In my code, I opend the files in the <code>try</code> part, therefore if the strings are empty it won&#39;t open them anyway (I checked it before the <code>try</code> part), so I guess it doesn&#39;t matter if it gets to the <code>finally</code> part"}], "tags": [], "owner": {"reputation": 1122, "user_id": 4724240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1xpq.jpg?s=128&g=1", "display_name": "Axel Puig", "link": "https://stackoverflow.com/users/4724240/axel-puig"}, "is_accepted": false, "score": 0, "last_activity_date": 1544048047, "creation_date": 1544048047, "answer_id": 53641565, "question_id": 53641505, "link": "https://stackoverflow.com/questions/53641505/raising-an-error-in-try-except-finally-model-code/53641565#53641565", "title": "raising an error in try/except/finally model code", "body": "<ol>\n<li>You can, but the exception will be raised and the code will stop.</li>\n<li>You can do that, but if there is an error in the try portion, the code will stop if you don't have a <code>except:</code>. However it will execute the <code>finally:</code> part before stopping.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 153, "user_id": 9712352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjuEp.png?s=128&g=1", "display_name": "jxpp", "link": "https://stackoverflow.com/users/9712352/jxpp"}, "is_accepted": false, "score": 1, "last_activity_date": 1544048325, "creation_date": 1544048325, "answer_id": 53641619, "question_id": 53641505, "link": "https://stackoverflow.com/questions/53641505/raising-an-error-in-try-except-finally-model-code/53641619#53641619", "title": "raising an error in try/except/finally model code", "body": "<p>Python has something called 'context managers' which help you with what you're trying to do.</p>\n\n<pre><code>def function(file_1, file_2):\n    if file_1 == '' or file_2 == '':\n        raise ValueError(\"Invalid input\")\n\n    with open(file_1) as f1, open(file_2) as f2:\n        ... # here goes the code that handles the files\n</code></pre>\n\n<p>Files will be opened at the start of the <code>with</code> block and will be closed appropriately when exiting the block.</p>\n\n<blockquote>\n  <p>Can I raise a ValueError before the \"try\" block of the code?</p>\n</blockquote>\n\n<p>Yes, you can. However, it will abort the execution of the program if there's no <code>except</code> block to catch it.</p>\n\n<blockquote>\n  <p>Is it OK to write the code only with \"try\" and \"finally\"?</p>\n</blockquote>\n\n<p>Yes, you can. But it's more correct to use context managers for this, as I described above.</p>\n"}], "owner": {"reputation": 1, "user_id": 9946249, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a14199333b816fac4f12f81fd7bb6cf2?s=128&d=identicon&r=PG&f=1", "display_name": "user9946249", "link": "https://stackoverflow.com/users/9946249/user9946249"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544048325, "creation_date": 1544047744, "question_id": 53641505, "link": "https://stackoverflow.com/questions/53641505/raising-an-error-in-try-except-finally-model-code", "title": "raising an error in try/except/finally model code", "body": "<p>I'm writing a code that uses files.\nI want to check if the name of the files are empty string, and if so to raise a ValueError. Moreover, I want to close all the files, no matter what </p>\n\n<ol>\n<li>Can I raise a ValueError before the \"try\" block of the code?</li>\n<li><p>Is it OK to write the code only with \"try\" and \"finally\"?</p>\n\n<p>`def functio(file_1, file_2):</p>\n\n<pre><code>if file_1 == '' or file_2 == '':\n        raise ValueError(\"Invalid input\")\ntry:\n   ~rest of the code~\n\nfinally:\n   if file_1 =! None or file_2 != None:\n     file_1.close()\n     file_2.close()`\n</code></pre></li>\n</ol>\n"}, {"tags": ["python", "openstreetmap", "shapely"], "comments": [{"owner": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 0, "creation_date": 1544050279, "post_id": 53641498, "comment_id": 94143350, "body": "maybe this helps <a href=\"https://gis.stackexchange.com/questions/246655/how-to-create-line-polygon-shapefiles-from-geojson-using-gdal-in-python\" title=\"how to create line polygon shapefiles from geojson using gdal in python\">gis.stackexchange.com/questions/246655/&hellip;</a>"}], "owner": {"reputation": 1756, "user_id": 1008588, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ijUnZ.jpg?s=128&g=1", "display_name": "Nicolaesse", "link": "https://stackoverflow.com/users/1008588/nicolaesse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3210, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544048416, "creation_date": 1544047707, "last_edit_date": 1544048416, "question_id": 53641498, "link": "https://stackoverflow.com/questions/53641498/python-3-x-shapely-polygon-loaded-from-geojson", "title": "Python 3.X Shapely Polygon loaded from GeoJSON", "body": "<p>I'd like to use <strong>Shapely</strong> package to define a <strong>Polygon</strong> with the point coming from OpenStreetMap. Let's see an example.</p>\n\n<p>From OpenStreetMap I have downloaded the following <code>export.geojson</code> that contains the points of the boundaries of NYC Hell's kitchen neightbourhood.</p>\n\n<pre><code>{\n  \"type\": \"FeatureCollection\",\n  \"generator\": \"overpass-ide\",\n  \"copyright\": \"The data included in this document is from www.openstreetmap.org. The data is made available under ODbL.\",\n  \"timestamp\": \"2018-12-05T21:48:03Z\",\n  \"features\": [\n    {\n      \"type\": \"Feature\",\n      \"properties\": {\n        \"@id\": \"relation/8398096\",\n        \"admin_level\": \"10\",\n        \"alt_name\": \"Midtown West\",\n        \"boundary\": \"administrative\",\n        \"name\": \"Hell's Kitchen\",\n        \"place\": \"neighbourhood\",\n        \"type\": \"boundary\",\n        \"wikidata\": \"Q840133\"\n      },\n      \"geometry\": {\n        \"type\": \"Polygon\",\n        \"coordinates\": [\n          [\n            [\n              -73.996317,\n              40.7533999\n            ],\n            [\n              -73.9926276,\n              40.7584281\n            ],\n            [\n              -73.9897925,\n              40.7572376\n            ],\n            [\n              -73.9865711,\n              40.7616564\n            ],\n            [\n              -73.9828759,\n              40.7667118\n            ],\n            [\n              -73.9857128,\n              40.7679195\n            ],\n            [\n              -73.9847606,\n              40.7692277\n            ],\n            [\n              -73.993569,\n              40.7729369\n            ],\n            [\n              -73.9939928,\n              40.7733086\n            ],\n            [\n              -73.9941524,\n              40.7733787\n            ],\n            [\n              -73.9960903,\n              40.7742003\n            ],\n            [\n              -73.9963692,\n              40.7738002\n            ],\n            [\n              -73.9940733,\n              40.7727927\n            ],\n            [\n              -73.9942235,\n              40.7725956\n            ],\n            [\n              -73.99616,\n              40.7733838\n            ],\n            [\n              -73.9964068,\n              40.7730913\n            ],\n            [\n              -73.9946607,\n              40.7723438\n            ],\n            [\n              -73.9948565,\n              40.7720959\n            ],\n            [\n              -73.9969674,\n              40.7729836\n            ],\n            [\n              -73.9973322,\n              40.7725205\n            ],\n            [\n              -73.9952078,\n              40.7716166\n            ],\n            [\n              -73.995409,\n              40.7713606\n            ],\n            [\n              -73.995975,\n              40.7716003\n            ],\n            [\n              -73.9961976,\n              40.7712915\n            ],\n            [\n              -73.9959508,\n              40.771188\n            ],\n            [\n              -73.9959937,\n              40.771129\n            ],\n            [\n              -73.9956531,\n              40.7709889\n            ],\n            [\n              -73.9958328,\n              40.7707451\n            ],\n            [\n              -73.9959213,\n              40.7707878\n            ],\n            [\n              -73.9962056,\n              40.7704465\n            ],\n            [\n              -73.996093,\n              40.7703896\n            ],\n            [\n              -73.9963827,\n              40.7699692\n            ],\n            [\n              -73.9987564,\n              40.7709279\n            ],\n            [\n              -73.9991614,\n              40.7703917\n            ],\n            [\n              -73.9968413,\n              40.769376\n            ],\n            [\n              -73.9971685,\n              40.7689454\n            ],\n            [\n              -73.9995879,\n              40.7699773\n            ],\n            [\n              -74.0000251,\n              40.7694248\n            ],\n            [\n              -73.9967179,\n              40.7680576\n            ],\n            [\n              -73.9972463,\n              40.7673263\n            ],\n            [\n              -74.0005133,\n              40.7687077\n            ],\n            [\n              -74.0009397,\n              40.7681714\n            ],\n            [\n              -73.9976245,\n              40.7667697\n            ],\n            [\n              -73.998,\n              40.76627\n            ],\n            [\n              -73.9982522,\n              40.766268\n            ],\n            [\n              -74.0013501,\n              40.7675681\n            ],\n            [\n              -74.0019402,\n              40.7668043\n            ],\n            [\n              -73.9987242,\n              40.7654147\n            ],\n            [\n              -73.9989388,\n              40.7652502\n            ],\n            [\n              -73.9988717,\n              40.7649861\n            ],\n            [\n              -73.9991775,\n              40.7649556\n            ],\n            [\n              -74.0021253,\n              40.7661115\n            ],\n            [\n              -74.0026027,\n              40.765498\n            ],\n            [\n              -74.0024284,\n              40.7654066\n            ],\n            [\n              -74.0025812,\n              40.7650897\n            ],\n            [\n              -73.9995718,\n              40.7638444\n            ],\n            [\n              -74.000001,\n              40.7636087\n            ],\n            [\n              -74.0031847,\n              40.7649516\n            ],\n            [\n              -74.0034664,\n              40.764594\n            ],\n            [\n              -74.003225,\n              40.7644721\n            ],\n            [\n              -74.0033671,\n              40.764273\n            ],\n            [\n              -74.0012401,\n              40.7633487\n            ],\n            [\n              -74.0014815,\n              40.7630358\n            ],\n            [\n              -74.0036756,\n              40.7639541\n            ],\n            [\n              -74.0040135,\n              40.7635214\n            ],\n            [\n              -74.0018356,\n              40.7625787\n            ],\n            [\n              -74.0023103,\n              40.7619571\n            ],\n            [\n              -74.0045071,\n              40.7628672\n            ],\n            [\n              -74.004837,\n              40.7624447\n            ],\n            [\n              -74.0025732,\n              40.7614573\n            ],\n            [\n              -74.0028682,\n              40.761051\n            ],\n            [\n              -73.9964148,\n              40.7583347\n            ],\n            [\n              -73.9979787,\n              40.7561892\n            ],\n            [\n              -73.9991507,\n              40.754582\n            ],\n            [\n              -73.996317,\n              40.7533999\n            ]\n          ]\n        ]\n      },\n      \"id\": \"relation/8398096\"\n    },\n    {\n      \"type\": \"Feature\",\n      \"properties\": {\n        \"@id\": \"node/158852213\",\n        \"@relations\": [\n          {\n            \"role\": \"label\",\n            \"rel\": 8398096,\n            \"reltags\": {\n              \"admin_level\": \"10\",\n              \"alt_name\": \"Midtown West\",\n              \"boundary\": \"administrative\",\n              \"name\": \"Hell's Kitchen\",\n              \"place\": \"neighbourhood\",\n              \"type\": \"boundary\",\n              \"wikidata\": \"Q840133\"\n            }\n          }\n        ]\n      },\n      \"geometry\": {\n        \"type\": \"Point\",\n        \"coordinates\": [\n          -73.9923918,\n          40.7644228\n        ]\n      },\n      \"id\": \"node/158852213\"\n    }\n  ]\n}\n</code></pre>\n\n<p>Based on the <strong>Integration</strong> section of the <a href=\"https://shapely.readthedocs.io/en/stable/project.html\" rel=\"nofollow noreferrer\">documentation</a> and the page 89 of <a href=\"https://books.google.it/books?id=ivBZDwAAQBAJ&amp;printsec=frontcover&amp;hl=it#v=onepage&amp;q&amp;f=false\" rel=\"nofollow noreferrer\">this book</a>, I get the following Python snippet to define the <code>Polygon</code> with the shape of Hell's kitchen:</p>\n\n<pre><code>from shapely.geometry import mapping, shape\nI=shape(json.loads(open('/Users/MyUsername/Downloads/export.geojson').read()))\nI.is_valid\n</code></pre>\n\n<p>but I am getting the following error:</p>\n\n<blockquote>\n  <p>Traceback (most recent call last):   File \"\", line 1, in\n  \n      I.is_valid() NameError: name 'I' is not defined</p>\n  \n  <blockquote>\n    <blockquote>\n      <blockquote>\n        <p>I.is_valid Traceback (most recent call last):   File \"\", line 1, in \n            I.is_valid NameError: name 'I' is not defined\n        Does anybody have an idea on how to fix it?</p>\n      </blockquote>\n    </blockquote>\n  </blockquote>\n</blockquote>\n\n<p>I don't think this is a duplicate question because <a href=\"https://stackoverflow.com/questions/40655863/how-to-create-geometrycollection-from-geojson-with-python-shapely\">this quesion</a> is not about an external file in GeoJSON format.</p>\n"}, {"tags": ["python", "list", "average"], "comments": [{"owner": {"reputation": 16602, "user_id": 8060120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gejWm.jpg?s=128&g=1", "display_name": "Brown Bear", "link": "https://stackoverflow.com/users/8060120/brown-bear"}, "edited": false, "score": 1, "creation_date": 1544047893, "post_id": 53641456, "comment_id": 94142533, "body": "do you mean the <code>highest_turnout</code> is the method of the class <code>County</code>?"}, {"owner": {"reputation": 11, "user_id": 10708267, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HyoAoVHftBQ/AAAAAAAAAAI/AAAAAAAAKjY/7qfNtlqzu1s/photo.jpg?sz=128", "display_name": "Andrew Francis", "link": "https://stackoverflow.com/users/10708267/andrew-francis"}, "reply_to_user": {"reputation": 16602, "user_id": 8060120, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/gejWm.jpg?s=128&g=1", "display_name": "Brown Bear", "link": "https://stackoverflow.com/users/8060120/brown-bear"}, "edited": false, "score": 0, "creation_date": 1544047970, "post_id": 53641456, "comment_id": 94142560, "body": "yes, just not sure how to implement it."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4879159, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc8633f100bd4a1ba3ca0e6d03c864ff?s=128&d=identicon&r=PG&f=1", "display_name": "rabbithole", "link": "https://stackoverflow.com/users/4879159/rabbithole"}, "is_accepted": false, "score": 0, "last_activity_date": 1566359518, "creation_date": 1566359518, "answer_id": 57584204, "question_id": 53641456, "link": "https://stackoverflow.com/questions/53641456/iterating-over-set-of-lists-to-find-highest-average-in-python/57584204#57584204", "title": "Iterating over set of lists to find highest average in Python", "body": "<p>Your class <code>County</code> is defined correctly.\nHowever, function <code>county</code> is not correct.</p>\n\n<p>When passing data in the function <code>highest_turnout</code>, you have to first calculate the percentage of voters in the first <code>County</code> of the list - it is positioned at <code>data[0]</code>.\nThen we set \u201chighest\u201d to be the country name of the 1st <code>County</code>, we assume that the 1st in the <code>data</code> list is the highest one we have seen.</p>\n\n<p>Next, we use a <code>for</code> loop to start iterating over all the <code>County</code> objects in the list <code>data</code> in order to pass in each <code>County</code> object. </p>\n\n<p>The variable <code>pct</code> gives us the percentage of voters in the <code>County</code> that is running in the current step. The <code>if</code> function compares it to the highest percentage stored in the variable <code>pct</code>. If the new percentage is higher than <code>pct</code> (returns True), we update the highest percentage variable <code>pct</code> and hence update the county name.</p>\n\n<pre><code>def highest_turnout(data) :\n\n  highest_pct = data[0].voters / data[0].population\n  highest = data[0].name\n\n  for county in data :\n    pct = county.voters / county.population\n    if pct &gt; highest_pct :\n      highest_pct = pct\n      highest = county.name\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 10708267, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-HyoAoVHftBQ/AAAAAAAAAAI/AAAAAAAAKjY/7qfNtlqzu1s/photo.jpg?sz=128", "display_name": "Andrew Francis", "link": "https://stackoverflow.com/users/10708267/andrew-francis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 209, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1566359518, "creation_date": 1544047444, "question_id": 53641456, "link": "https://stackoverflow.com/questions/53641456/iterating-over-set-of-lists-to-find-highest-average-in-python", "title": "Iterating over set of lists to find highest average in Python", "body": "<p>How to create function which iterates over each county, calculating voter turnout percentage?</p>\n\n<pre><code>class County:  \n    def __init__(self, init_name, init_population, init_voters) :  \n        self.name = init_name  \n        self.population = init_population  \n        self.voters = init_voters   \n\ndef highest_turnout(data) :  \n\n    100 * (self.voters / self.population)\n\nallegheny = County(\"allegheny\", 1000490, 645469)  \nphiladelphia = County(\"philadelphia\", 1134081, 539069)  \nmontgomery = County(\"montgomery\", 568952, 399591)  \nlancaster = County(\"lancaster\", 345367, 230278)  \ndelaware = County(\"delaware\", 414031, 284538)  \nchester = County(\"chester\", 319919, 230823)  \nbucks = County(\"bucks\", 444149, 319816)  \ndata = [allegheny, philadelphia, montgomery, lancaster, delaware, chester, bucks]  \n</code></pre>\n"}, {"tags": ["python", "datetime", "matplotlib"], "answers": [{"tags": [], "owner": {"reputation": 1183, "user_id": 1862861, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ab2dbf246bd94ac4d398961cbd25c63?s=128&d=identicon&r=PG", "display_name": "Matt Pitkin", "link": "https://stackoverflow.com/users/1862861/matt-pitkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1544048113, "creation_date": 1544048113, "answer_id": 53641579, "question_id": 53641430, "link": "https://stackoverflow.com/questions/53641430/matplotlibs-get-ticklabels-not-working-with-custom-string-labels/53641579#53641579", "title": "Matplotlib&#39;s get_ticklabels not working with custom string labels", "body": "<p>The following should work:</p>\n\n<pre><code>ax = plt.axes()\n\npos = np.arange(len(vals))\nax.bar(pos, vals)\n\nax.set_xticks(pos[::50])\nax.set_xticklabels(np.array(dates)[::50], rotation=90)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": false, "score": 1, "last_activity_date": 1544048183, "creation_date": 1544048183, "answer_id": 53641593, "question_id": 53641430, "link": "https://stackoverflow.com/questions/53641430/matplotlibs-get-ticklabels-not-working-with-custom-string-labels/53641593#53641593", "title": "Matplotlib&#39;s get_ticklabels not working with custom string labels", "body": "<p>You try to set every 50th label visible. But all the others are visible anyways, so all are visible, plus those you set visible. Of course you could instead set some <strong>in</strong>visible; but maybe a better solution is to not even create the labels in the first place?</p>\n\n<p>To tick and label every 50th entry you can slice the lists of ticks and labels.</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom datetime import datetime, date\nimport numpy as np\n\nvals = [10, 11, ....]\ndates =['05/01/2018', '05/02/2018', ....]\nxticks = np.arange(len(vals))\n\nax = plt.axes()\nax.bar(xticks,vals)\n\nplt.xticks(xticks[::50], dates[::50], rotation=90)\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/k82r0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/k82r0.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note however, that just plotting the dates as datetimes would give you some very nice formatting automatically.</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom datetime import datetime\n\nvals = [10, 11, ..., 1]\ndates =['05/01/2018', '05/02/2018', ..., '12/05/2018']\ndates = [datetime.strptime(s, \"%m/%d/%Y\") for s in dates]\n\nax = plt.axes()\nax.bar(dates,vals)\n\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/kyoFt.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kyoFt.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 45, "user_id": 4058664, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2072baa921224939281a19c542dda547?s=128&d=identicon&r=PG&f=1", "display_name": "Maria", "link": "https://stackoverflow.com/users/4058664/maria"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 53641579, "answer_count": 2, "score": 1, "last_activity_date": 1544048183, "creation_date": 1544047302, "question_id": 53641430, "link": "https://stackoverflow.com/questions/53641430/matplotlibs-get-ticklabels-not-working-with-custom-string-labels", "title": "Matplotlib&#39;s get_ticklabels not working with custom string labels", "body": "<p>I would like to plot only every 50th item from \"dates\" as a tick on the x axis. When I comment out the line \"plt.xticks(xticks, dates)\", it works fine (top figure), but when I attempt to replace the numbers with the actual date strings, it puts ALL the dates instead of only every 50th ones (bottom figure). </p>\n\n<p>Can someone tell me what I'm doing wrong? Thanks!</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom datetime import datetime, date\nimport numpy as np\n\nvals = [10, 11, 10, 6, 7, 4, 4, 6, 2, 3, 11, 11, 8, 8, 6, 9, 8, 8, 6, 6, 5, 2, 3, 5, 2, 3, 5, 6, 4, 6, 4, 1, 3, 4, 5, 5, 5, 7, 4, 4, 3, 5, 4, 5, 6, 4, 5, 3, 2, 4, 4, 4, 2, 2, 1, 7, 4, 8, 5, 3, 1, 3, 4, 6, 3, 7, 3, 3, 4, 5, 8, 6, 4, 2, 2, 4, 3, 2, 6, 4, 9, 6, 6, 5, 14, 17, 13, 11, 5, 7, 11, 7, 9, 6, 3, 7, 5, 4, 5, 7, 5, 4, 3, 4, 4, 2, 1, 2, 2, 2, 1, 1, 3, 4, 2, 2, 1, 2, 2, 2, 1, 3, 1, 1, 2, 1, 1, 2, 5, 1, 2, 1, 1, 1, 2, 2, 1, 1, 1, 2, 1, 2, 4, 5, 4, 3, 3, 2, 4, 3, 3, 3, 2, 1, 1, 3, 5, 4, 4, 4, 5, 6, 5, 3, 2, 3, 2, 2, 2, 2, 1, 1, 1, 2, 3, 2, 2, 3, 3, 2, 2, 2, 1, 1, 2, 2, 1, 1, 1, 2, 2, 1, 1, 1, 1, 1, 1, 1, 1, 3, 8, 1]\n\ndates =['05/01/2018', '05/02/2018', '05/03/2018', '05/04/2018', '05/05/2018', '05/06/2018', '05/07/2018', '05/08/2018', '05/09/2018', '05/10/2018', '05/11/2018', '05/12/2018', '05/13/2018', '05/14/2018', '05/15/2018', '05/16/2018', '05/17/2018', '05/18/2018', '05/19/2018', '05/20/2018', '05/21/2018', '05/22/2018', '05/23/2018', '05/24/2018', '05/25/2018', '05/26/2018', '05/27/2018', '05/28/2018', '05/29/2018', '05/30/2018', '05/31/2018', '06/01/2018', '06/02/2018', '06/03/2018', '06/04/2018', '06/05/2018', '06/06/2018', '06/07/2018', '06/08/2018', '06/09/2018', '06/10/2018', '06/11/2018', '06/12/2018', '06/13/2018', '06/14/2018', '06/15/2018', '06/16/2018', '06/17/2018', '06/18/2018', '06/19/2018', '06/20/2018', '06/21/2018', '06/22/2018', '06/23/2018', '06/24/2018', '06/25/2018', '06/26/2018', '06/27/2018', '06/28/2018', '06/29/2018', '06/30/2018', '07/01/2018', '07/02/2018', '07/03/2018', '07/04/2018', '07/05/2018', '07/06/2018', '07/07/2018', '07/08/2018', '07/09/2018', '07/10/2018', '07/11/2018', '07/12/2018', '07/13/2018', '07/14/2018', '07/15/2018', '07/16/2018', '07/17/2018', '07/18/2018', '07/19/2018', '07/20/2018', '07/21/2018', '07/22/2018', '07/23/2018', '07/24/2018', '07/25/2018', '07/26/2018', '07/27/2018', '07/28/2018', '07/29/2018', '07/30/2018', '07/31/2018', '08/01/2018', '08/02/2018', '08/03/2018', '08/04/2018', '08/05/2018', '08/06/2018', '08/07/2018', '08/08/2018', '08/09/2018', '08/10/2018', '08/11/2018', '08/12/2018', '08/13/2018', '08/14/2018', '08/15/2018', '08/16/2018', '08/17/2018', '08/18/2018', '08/19/2018', '08/21/2018', '08/22/2018', '08/23/2018', '08/24/2018', '08/25/2018', '08/26/2018', '08/27/2018', '08/28/2018', '08/29/2018', '08/30/2018', '08/31/2018', '09/01/2018', '09/06/2018', '09/07/2018', '09/08/2018', '09/09/2018', '09/10/2018', '09/11/2018', '09/12/2018', '09/13/2018', '09/14/2018', '09/15/2018', '09/16/2018', '09/17/2018', '09/18/2018', '09/19/2018', '09/20/2018', '09/21/2018', '09/22/2018', '09/23/2018', '09/24/2018', '09/25/2018', '09/26/2018', '09/27/2018', '09/28/2018', '09/29/2018', '09/30/2018', '10/01/2018', '10/02/2018', '10/03/2018', '10/04/2018', '10/05/2018', '10/06/2018', '10/07/2018', '10/08/2018', '10/09/2018', '10/10/2018', '10/11/2018', '10/12/2018', '10/13/2018', '10/14/2018', '10/15/2018', '10/16/2018', '10/17/2018', '10/18/2018', '10/19/2018', '10/20/2018', '10/21/2018', '10/22/2018', '10/23/2018', '10/24/2018', '10/25/2018', '10/28/2018', '10/29/2018', '10/30/2018', '10/31/2018', '11/01/2018', '11/02/2018', '11/03/2018', '11/04/2018', '11/05/2018', '11/06/2018', '11/07/2018', '11/08/2018', '11/09/2018', '11/10/2018', '11/11/2018', '11/12/2018', '11/13/2018', '11/14/2018', '11/15/2018', '11/16/2018', '11/22/2018', '11/23/2018', '11/25/2018', '11/26/2018', '11/27/2018', '11/29/2018', '12/01/2018', '12/02/2018', '12/05/2018']\n    xticks = np.arange(len(vals))\n\n    ax = plt.axes()\n    ax.bar(xticks,vals)\n    plt.xticks(rotation=90)\n    plt.xticks(xticks, dates)\n    for label in ax.xaxis.get_ticklabels()[::50]:\n        label.set_visible(True)\n\n    plt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/9gygH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9gygH.png\" alt=\"Here, works fine when the ticks are just the numbers and line is commented out. \"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/MPabv.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MPabv.png\" alt=\"Here, the selection of only every 50th tick does not work and all dates are shown when we add back the conversion from number to date\"></a></p>\n"}, {"tags": ["python", "arrays", "numpy", "text"], "comments": [{"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 2, "creation_date": 1544047458, "post_id": 53641413, "comment_id": 94142389, "body": "Review docs for <code>loadtxt</code> (or <code>genfromtxt</code>).  Pay attention to <code>delimiter</code>, <code>usecols</code>, <code>dtype</code>, and <code>skipheader</code> (or what ever its called).  The shorted initial line will cause problems.  You may want to skip it.  Remember, the result should be a 2d array with a consistent number of columns."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1544047666, "post_id": 53641413, "comment_id": 94142449, "body": "<code>loadtxt</code> as you use it returns one string per line.  <code>float</code> only works with one string representing one number.  You can read the file line by line yourself, but then you have to split it on the delimiter, convert resulting list of strings into a list of numbers, and join those.  That&#39;s not hard."}, {"owner": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 0, "creation_date": 1544047834, "post_id": 53641413, "comment_id": 94142512, "body": "first row has 3 columns while the rest has 6 columns! would you like to skip first row??!!"}, {"owner": {"reputation": 729, "user_id": 10541940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27b27664e2738f269f925ae0e984ae22?s=128&d=identicon&r=PG&f=1", "display_name": "Landon G", "link": "https://stackoverflow.com/users/10541940/landon-g"}, "reply_to_user": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "edited": false, "score": 0, "creation_date": 1544047896, "post_id": 53641413, "comment_id": 94142535, "body": "Yes @KhalilAlHooti , its not my original file"}], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": false, "score": 1, "last_activity_date": 1544048148, "creation_date": 1544048148, "answer_id": 53641585, "question_id": 53641413, "link": "https://stackoverflow.com/questions/53641413/loading-txt-file-data-into-a-numpy-array-getting-an-error/53641585#53641585", "title": "Loading txt file data into a numpy array / getting an error", "body": "<pre><code>In [498]: f = open('stack53641413.txt','r')\nIn [501]: alist = [[int(x) for x in line.split(',')] for line in f]\nIn [502]: alist\nOut[502]: \n[[6, 50, 36],\n [2, 0, 1, 3, 0, 1],\n [1, 2, 1, 2, 1, 2],\n [2, 1, 2, 1, 0, 1],\n [0, 2, 0, 2, 2, 3],\n [0, 3, 3, 3, 1, 4],\n [2, 3, 2, 3, 1, 3]]\nIn [504]: np.array(alist[1:])\nOut[504]: \narray([[2, 0, 1, 3, 0, 1],\n       [1, 2, 1, 2, 1, 2],\n       [2, 1, 2, 1, 0, 1],\n       [0, 2, 0, 2, 2, 3],\n       [0, 3, 3, 3, 1, 4],\n       [2, 3, 2, 3, 1, 3]])\n</code></pre>\n\n<p>What you do with <code>alist[0]</code> is your business.</p>\n\n<p><code>loadtxt</code> skipping the difficult first line:</p>\n\n<pre><code>In [507]: np.loadtxt(f, dtype='int', delimiter=',',skiprows=1)\nOut[507]: \narray([[2, 0, 1, 3, 0, 1],\n       [1, 2, 1, 2, 1, 2],\n       [2, 1, 2, 1, 0, 1],\n       [0, 2, 0, 2, 2, 3],\n       [0, 3, 3, 3, 1, 4],\n       [2, 3, 2, 3, 1, 3]])\n</code></pre>\n"}], "owner": {"reputation": 729, "user_id": 10541940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27b27664e2738f269f925ae0e984ae22?s=128&d=identicon&r=PG&f=1", "display_name": "Landon G", "link": "https://stackoverflow.com/users/10541940/landon-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544048288, "creation_date": 1544047211, "question_id": 53641413, "link": "https://stackoverflow.com/questions/53641413/loading-txt-file-data-into-a-numpy-array-getting-an-error", "title": "Loading txt file data into a numpy array / getting an error", "body": "<p>I'm trying to load a txt file data into a numpy array. It's throwing the following error:</p>\n\n<pre><code>ValueError: could not convert string to float: '6,50,36'\n</code></pre>\n\n<p>The txt file I am trying to upload into the array is this (this is the full file):</p>\n\n<pre><code>6,50,36\n2,0,1,3,0,1\n1,2,1,2,1,2\n2,1,2,1,0,1\n0,2,0,2,2,3\n0,3,3,3,1,4\n2,3,2,3,1,3\n</code></pre>\n\n<p>I've did some research and thought that the \"np.loadtxt()\" would be an easy solution to load this txt into an array, so this is what I've tried so far:</p>\n\n<pre><code>import numpy as np\nfrom numpy import loadtxt\n\nf = open('DataNumbers.txt','r')\ndata_array = float(np.loadtxt(f))  # I thought using 'float' would work for this issue\n</code></pre>\n\n<p>I'm wondering if  the reason this isn't working is because the file contains two blank spaces after 36 on the first line of the txt file?</p>\n\n<p>How can I get this data from the txt file loaded into an array and get rid of this error?</p>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["python", "multithreading", "performance", "queue", "python-multithreading"], "answers": [{"comments": [{"owner": {"reputation": 346, "user_id": 9465588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47aff6d21c7afd79ed02d054dc94d2b?s=128&d=identicon&r=PG&f=1", "display_name": "DGoiko", "link": "https://stackoverflow.com/users/9465588/dgoiko"}, "edited": false, "score": 0, "creation_date": 1544180823, "post_id": 53662278, "comment_id": 94194019, "body": "Thanks for the in-depth answer. I use in average, 500 WorkersGenericos distributed across 25 computers, and they&#39;ve different worker functions, thats why i enveloped&#39;em with such that interface, in order for my pool class to be able to handle them easily. They&#39;re also used with different frameworks (some tasks that are only local are executed as standard python threads, while heavy loads are in dispycos tasks, some of which are started at the same time than the task and others are started on startup (heavy init methods) and run for hours receiving short-time tasks over network."}, {"owner": {"reputation": 346, "user_id": 9465588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47aff6d21c7afd79ed02d054dc94d2b?s=128&d=identicon&r=PG&f=1", "display_name": "DGoiko", "link": "https://stackoverflow.com/users/9465588/dgoiko"}, "edited": false, "score": 0, "creation_date": 1544180875, "post_id": 53662278, "comment_id": 94194047, "body": "And yeah, I know that with such project size it would definetly not be Python, but I had to set-up a one-year project in 2 months, doing this in C++ woul&#39;ve been impossible in time..."}, {"owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "reply_to_user": {"reputation": 346, "user_id": 9465588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47aff6d21c7afd79ed02d054dc94d2b?s=128&d=identicon&r=PG&f=1", "display_name": "DGoiko", "link": "https://stackoverflow.com/users/9465588/dgoiko"}, "edited": false, "score": 0, "creation_date": 1544192247, "post_id": 53662278, "comment_id": 94199960, "body": "@DGoiko I see, quite complex. But why not just the Pool class for handling queues and the pure worker class? You may take a look at the source for <code>multiprocessing.pool.Pool</code> for ideas. It&#39;s written in Python. You will also find <code>ThreadPool</code> there, which inherits from <code>Pool</code>."}, {"owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "reply_to_user": {"reputation": 346, "user_id": 9465588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47aff6d21c7afd79ed02d054dc94d2b?s=128&d=identicon&r=PG&f=1", "display_name": "DGoiko", "link": "https://stackoverflow.com/users/9465588/dgoiko"}, "edited": false, "score": 0, "creation_date": 1544192294, "post_id": 53662278, "comment_id": 94199989, "body": "@DGoiko Certainly won&#39;t blame you for using Python :-) FYI, e.g. facebook also uses Python with multiprocessing/-threading, so I guess project size is not a limitation."}, {"owner": {"reputation": 346, "user_id": 9465588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47aff6d21c7afd79ed02d054dc94d2b?s=128&d=identicon&r=PG&f=1", "display_name": "DGoiko", "link": "https://stackoverflow.com/users/9465588/dgoiko"}, "edited": false, "score": 0, "creation_date": 1544281578, "post_id": 53662278, "comment_id": 94224363, "body": "thanks, I&#39;ll take a look at it. Right now, when I&#39;ve to initialize a node&#39;s computation I send the init data (big loads expected on production) once to the node, which calculates the special data structure it needs from the data and distributes it amongs its own threads. However, some system events trigger the renewal of the init data and recalculation, which is handled in the same way than init. It looked the most natural to me to spawn the needed processes (whith option to expand) and then feed&#39;em with compuitations the same way than init, and give results back via the same pipe"}, {"owner": {"reputation": 346, "user_id": 9465588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47aff6d21c7afd79ed02d054dc94d2b?s=128&d=identicon&r=PG&f=1", "display_name": "DGoiko", "link": "https://stackoverflow.com/users/9465588/dgoiko"}, "edited": false, "score": 0, "creation_date": 1544281842, "post_id": 53662278, "comment_id": 94224420, "body": "but I see your point, I could initialize the node master thread and then use python&#39;s native Pool to generate as many processes as I can locally on demand, using globals to present the data. I&#39;m not sure, though, if the class I&#39;m using to store data and operate with it is thread safe. It should, though. I&#39;d still have to handle node load in the master to calculate which node to send the loads to (at this point i&#39;m sending it to the one with most threads in waiting state, as every task consumes more or less the same CPU/MEM amount, the only thing that varies is the duration of the task)"}, {"owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "reply_to_user": {"reputation": 346, "user_id": 9465588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47aff6d21c7afd79ed02d054dc94d2b?s=128&d=identicon&r=PG&f=1", "display_name": "DGoiko", "link": "https://stackoverflow.com/users/9465588/dgoiko"}, "edited": false, "score": 0, "creation_date": 1544283963, "post_id": 53662278, "comment_id": 94224965, "body": "@DGoiko I&#39;ve you&#39;re operating on a cluster you probably should take a look at <a href=\"http://docs.dask.org/en/latest/why.html\" rel=\"nofollow noreferrer\">dask</a>. I should also mention <code>multiprocessing.Manager</code> for sharing data in a cluster.  Regarding thread-safety of your data, any operation spanning multiple Python-bytecode instructions (check out <code>dis</code> module to see bytecode) needs to be made atomic (thread-safe) by using a lock if multiple threads operate on that same data. For example already <code>x += 1</code>  is not thread-safe without a lock around, because it needs multiple bytecode instructions."}, {"owner": {"reputation": 346, "user_id": 9465588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47aff6d21c7afd79ed02d054dc94d2b?s=128&d=identicon&r=PG&f=1", "display_name": "DGoiko", "link": "https://stackoverflow.com/users/9465588/dgoiko"}, "edited": false, "score": 0, "creation_date": 1544284160, "post_id": 53662278, "comment_id": 94225025, "body": "YEah, I know. The classes I use are, theoretically, read-only, however, I&#39;m not use if they use any internal mutable index, and if they provide methods to request index in a per-thread basis (i.e., local to search function) or not. For instance, one of my clases is an ahocorasick search algorithm, which uses trie structures. By definition, it needs an internal index to perform searches, however, if that index is implemented as a class attribute it would make it thread unsafe, while if its created locally when a search is performed, then there should be no problems."}, {"owner": {"reputation": 346, "user_id": 9465588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47aff6d21c7afd79ed02d054dc94d2b?s=128&d=identicon&r=PG&f=1", "display_name": "DGoiko", "link": "https://stackoverflow.com/users/9465588/dgoiko"}, "edited": false, "score": 0, "creation_date": 1544288439, "post_id": 53662278, "comment_id": 94226221, "body": "btw, is there any python class that can properly handle communication via TCP between computers? Ideally, I&#39;d like to have one concurrent listening TCP port in a cluster which recieves communication from several nodes, and those nodes should have their own receiving ports. Some class that can guarantee me a &quot;true&quot; when delivered or &quot;false&quot; if not, with retries timeouts and ability to choose between blocking and non-blocking. Something like queue.Queue but omn network. With dispycos it is task.deliver(), but dispycos is not very reliable, according to my tests. I mean a RELIABLE class."}, {"owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "reply_to_user": {"reputation": 346, "user_id": 9465588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47aff6d21c7afd79ed02d054dc94d2b?s=128&d=identicon&r=PG&f=1", "display_name": "DGoiko", "link": "https://stackoverflow.com/users/9465588/dgoiko"}, "edited": false, "score": 0, "creation_date": 1544289402, "post_id": 53662278, "comment_id": 94226512, "body": "@DGoiko Check out the <a href=\"https://docs.python.org/3.7/library/multiprocessing.html\" rel=\"nofollow noreferrer\">docs</a> for <code>multiprocessing.Manager</code> &quot;Using a remote manager&quot; and also read &quot;Listeners and Clients&quot;  there, think this will serve your purpose."}, {"owner": {"reputation": 346, "user_id": 9465588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47aff6d21c7afd79ed02d054dc94d2b?s=128&d=identicon&r=PG&f=1", "display_name": "DGoiko", "link": "https://stackoverflow.com/users/9465588/dgoiko"}, "edited": false, "score": 0, "creation_date": 1544359613, "post_id": 53662278, "comment_id": 94240465, "body": "Thanks! I&#39;m revieewing it, and I think I could inherit from Process instead of threading.Thread in order to adapt my ode quickly, however, it looks like a single node (computer) framework. Dispy looked OK on single computer test, however, when ran on Google Cloud I couldn&#39;t make it reliable. I&#39;m still needing a framework like Pyro (<a href=\"https://pythonhosted.org/Pyro4/\" rel=\"nofollow noreferrer\">pythonhosted.org/Pyro4</a>) or something like that, or stick to my own implemented node communication, am I right?"}, {"owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "reply_to_user": {"reputation": 346, "user_id": 9465588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47aff6d21c7afd79ed02d054dc94d2b?s=128&d=identicon&r=PG&f=1", "display_name": "DGoiko", "link": "https://stackoverflow.com/users/9465588/dgoiko"}, "edited": false, "score": 0, "creation_date": 1544366269, "post_id": 53662278, "comment_id": 94242184, "body": "@DGoiko A ready disributed computing framework or implementing your own is certainly needed for your cluster,  unfortunately I cannot advice you which framework to pick because I have no experience with them yet.  I would generally try to keep things as simple as possible and prefer using established frameworks over trying to build my own."}], "tags": [], "owner": {"reputation": 13858, "user_id": 9059420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qaO9g.jpg?s=128&g=1", "display_name": "Darkonaut", "link": "https://stackoverflow.com/users/9059420/darkonaut"}, "is_accepted": true, "score": 2, "last_activity_date": 1544148567, "creation_date": 1544148567, "answer_id": 53662278, "question_id": 53641407, "link": "https://stackoverflow.com/questions/53641407/python-multi-thread-communication-efficiency/53662278#53662278", "title": "Python multi-thread communication efficiency", "body": "<p>Your queue is not really <em>stored</em> in the thread. Assuming  CPython here, all objects are stored on the heap and threads only have a private stack. Objects on the heap are shared across all threads in the same process.</p>\n\n<blockquote>\n  <p>Memory management in Python involves a private heap containing all Python objects and data structures. The management of this private heap is ensured internally by the Python memory manager. The Python memory manager has different components which deal with various dynamic storage management aspects, like sharing, segmentation, preallocation or caching. <a href=\"https://docs.python.org/3.7/c-api/memory.html\" rel=\"nofollow noreferrer\">docs</a></p>\n</blockquote>\n\n<p>From this follows that it's not a question <em>where</em> your object (your queue) is located, because it's always on the heap. Variables (names) in Python are just <em>references</em> to these objects. </p>\n\n<p>The things here, which affect your runtime are how many call frames you add to your stacks by nesting function / method calls and how ~many bytecode instructions you need. So what impact on timings does this have? </p>\n\n<hr>\n\n<p><strong>Benchmark</strong></p>\n\n<p>Consider the following dummy setup for a queue and a worker. The dummy-worker is not threaded here for simplicity because threading it doesn't affect timings in a scenario where we pretend to just drain a pre-filled queue.</p>\n\n<pre><code>class Queue:\n    def get(self):\n        return 1\n\nclass Worker:\n    def __init__(self, queue):\n        self.queue = queue\n        self.quick_get = self.queue.get # a reference to a method as instance attribute\n\n    def get(self):\n        return self.queue.get()\n\n    def quick_get_method(self):\n        return self.quick_get()\n</code></pre>\n\n<p>How you can see, <code>Worker</code> has two versions of get-methods, <code>get</code> in a way how <em>you</em> define it and <code>quick_get_method</code>, which is one bytecode instruction shorter how we'll see later. The worker instance not only holds a reference to the <code>queue</code> instance, but also directly to <code>queue.get</code> via <code>self.quick_get</code>, which is where we spare one instruction.</p>\n\n<p>Now the timings for benchmarking all possibilities to <code>.get()</code> from the fake-queue within an IPython session:</p>\n\n<pre><code>q = Queue()\nw = Worker(q)\n\n%timeit q.get()\n285 ns \u00b1 1.9 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n%timeit w.get()\n609 ns \u00b1 2.9 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n%timeit w.quick_get()\n286 ns \u00b1 0.756 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n%timeit w.quick_get_method()\n555 ns \u00b1 0.855 ns per loop (mean \u00b1 std. dev. of 7 runs, 1000000 loops each)\n</code></pre>\n\n<p>Note that there is no difference in timings between <code>q.get()</code> and <code>w.quick_get()</code>.\nAlso note the improved timing of <code>w.quick_get_method()</code> compared to the traditional <code>w.get()</code>. Using a <code>Worker-method</code> to call <code>get()</code> on the queue still nearly doubles the timings compared to <code>q.get()</code> and <code>w.quick_get()</code>. Why is that?</p>\n\n<p>It's possible to get a human readable version of the Python bytecode instructions the interpreter is working on, by using the <code>dis</code> module.</p>\n\n<pre><code>import dis\n\ndis.dis(q.get)\n  3           0 LOAD_CONST               1 (1)\n              2 RETURN_VALUE\n\ndis.dis(w.get)\n  8           0 LOAD_FAST                0 (self)\n              2 LOAD_ATTR                0 (queue)\n              4 LOAD_METHOD              1 (get)\n              6 CALL_METHOD              0\n              8 RETURN_VALUE\n\ndis.dis(w.quick_get)\n  3           0 LOAD_CONST               1 (1)\n              2 RETURN_VALUE\n\ndis.dis(w.quick_get_method)\n 11           0 LOAD_FAST                0 (self)\n              2 LOAD_METHOD              0 (quick_get)\n              4 CALL_METHOD              0\n              6 RETURN_VALUE\n</code></pre>\n\n<p>Keep in mind our dummy <code>Queue.get</code> here is just returning 1. You see that <code>q.get</code> is just the same as <code>w.quick_get</code>, what is also reflected in the timings we saw before. Note that <code>w.quick_get_method</code> directly loads <code>quick_get</code>, which is just another name / variable for the object <code>queue.get</code> is referencing.</p>\n\n<p>You can also get the depth of the stack printed with the help of the <code>dis</code> module:</p>\n\n<pre><code>def print_stack_depth(f):\n    print(*[s for s in dis.code_info(f).split('\\n') if\n            s.startswith('Stack size:')]\n    )\n\nprint_stack_depth(q.get)\nStack size:        1 \nprint_stack_depth(w.get)\nStack size:        2\nprint_stack_depth(w.quick_get)\nStack size:        1\nprint_stack_depth(w.quick_get_method)\nStack size:        2\n</code></pre>\n\n<p>Bytecode and timing differences between the different approaches imply (less surprising), that adding another frame (by adding another method) accounts for the biggest performance hit.</p>\n\n<hr>\n\n<p><strong>Review</strong></p>\n\n<p>The analysis above is not an implicit plea for not using extra Worker-methods to call methods on referenced objects (queue.get). For readability, logging and easier debugging doing this is just the right thing to do. Optimizations like <code>Worker.quick_get_method</code> you will, for example, also find in Stdlib's <code>multiprocessing.pool.Pool</code>, which also uses queues internally.</p>\n\n<p>To put the timings from the benchmark into perspective, a few hundred nanoseconds is not much (for Python). In Python 3 the default maximum time interval a thread can hold the <a href=\"https://wiki.python.org/moin/GlobalInterpreterLock\" rel=\"nofollow noreferrer\">GIL</a> and hence, execute bytecode at a stretch, is 5 milliseconds. That's 5*1000*1000 nanoseconds.</p>\n\n<p>A few hundred nanoseconds is also small compared to the overhead multi-threading introduces anyway. I found, for example, that adding a 20 \u03bcs sleep after a <code>queue.put(integer)</code> in one thread and just reading from the queue in another thread, led to an additional overhead of about 64.0 \u03bcs <strong>per iteration on average</strong> (the 20 \u03bcs sleep <em>not</em> included) over a range of 100k (Python 3.7.1, Ubuntu 18.04).</p>\n\n<hr>\n\n<p><strong>Design</strong></p>\n\n<p>Regarding your question about design preference, I would definitely pick Method A here over Method B. Even more in case your queues are not used across multiple threads anyway. IMO your mixed creation in the last snippet is unnecessarily complicating things / understanding in a case where you just use <strong>one</strong> <code>WorkerGenerico</code> instance internally (not a pool of worker-threads). Contrary to Method A, the \"threadiness\" of your worker here is also buried deep inside another class.</p>\n"}], "owner": {"reputation": 346, "user_id": 9465588, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c47aff6d21c7afd79ed02d054dc94d2b?s=128&d=identicon&r=PG&f=1", "display_name": "DGoiko", "link": "https://stackoverflow.com/users/9465588/dgoiko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 1, "accepted_answer_id": 53662278, "answer_count": 1, "score": 1, "last_activity_date": 1544193485, "creation_date": 1544047190, "last_edit_date": 1544193485, "question_id": 53641407, "link": "https://stackoverflow.com/questions/53641407/python-multi-thread-communication-efficiency", "title": "Python multi-thread communication efficiency", "body": "<p>I'm new to python multitasking. I'm doing it in old-fashioned way:</p>\n\n<p>I'm inheriting from threading.Thread and using queue.Queue queues to send messages to/from the main thread.</p>\n\n<p>This is my base threaded class:</p>\n\n<pre><code>class WorkerGenerico(threading.Thread):\n    def __init__(self, task_id, input_q=None, output_q=None, keep_alive=300):\n        super(WorkerGenerico, self).__init__()\n        self._task_id = task_id\n        if input_q is None:\n            self._input_q = queue.Queue()\n        else:\n            if isinstance(input_q, queue.Queue):\n                self._input_q = input_q\n            else:\n                raise TypeError(\"input_q debe ser del tipo queue.Queue\")\n        if output_q is None:\n            self._output_q = queue.Queue()\n        else:\n            if isinstance(output_q, queue.Queue):\n                self._output_q = output_q\n            else:\n                raise TypeError(\"input_q debe ser del tipo queue.Queue\")\n        if not isinstance(keep_alive, int):\n            raise TypeError(\"El valor de keep_alive debe der un int.\")\n        self._keep_alive = keep_alive\n        self.stoprequest = threading.Event()\n\n    # def run(self):\n    #    Implement a loop in subclases which checks if self.has_orden_parada() is true in order to stop.\n\n    def join(self, timeout=None):\n        self.stoprequest.set()\n        super(WorkerGenerico, self).join(timeout)\n\n    def gracefull_stop(self):\n        self.stoprequest.set()\n\n    def has_orden_parada(self):\n        return self.stoprequest.is_set()\n\n    def put(self,texto, block=True, timeout=None):\n        return self._input_q.put(texto, block=block, timeout=timeout)\n\n    def get(self, block=True, timeout=None):\n        return self._output_q.get(block=block, timeout=timeout)\n</code></pre>\n\n<p>My question is how expensive it is to call WorkerGenerico.get() from the outside, as oposed to storing que queue in the main thread and using Queue.get(). <strong>Both methods look similar in performance with small non-frequent control messages</strong>, however, I guess that very frequent calls would make method B worth the usage.:</p>\n\n<p>I guess mode A is more resource-consuming (it has to somehow call the method from an outer thread and pass the queue definition back, I guess that the loss depends on Python implementation), however, final code is more readable and intuitive.</p>\n\n<p><strong>If I had to tell from experience with other languages, I'd say method B is much better, an I right?</strong></p>\n\n<p>Method A:</p>\n\n<pre><code>def main()\n    worker = WorkerGenerico(task_id=1)\n    worker.start()\n    print(worker.get())\n</code></pre>\n\n<p>Method B:</p>\n\n<pre><code>def main()\n    input_q = Queue()\n    output_q = Queue()\n    worker = WorkerGenerico(task_id=1, input_q=input_q, output_q=output_q)\n    worker.start()\n    print(output_q.get())\n</code></pre>\n\n<p>BTW: For completeness, I'd like to share the way I'm doing it now. Its a mixture of both methods which offers a nice envelope to threads:</p>\n\n<pre><code>class EnvoltorioWorker:\n    def __init__(self, task_id, input_q=None, output_q=None, keep_alive=300):\n        if input_q is None:\n            self._input_q = queue.Queue()\n        else:\n            if isinstance(input_q, queue.Queue):\n                self._input_q = input_q\n            else:\n                raise TypeError(\"input_q debe ser del tipo queue.Queue\")\n        if output_q is None:\n            self._output_q = queue.Queue()\n        else:\n            if isinstance(output_q, queue.Queue):\n                self._output_q = output_q\n            else:\n                raise TypeError(\"input_q debe ser del tipo queue.Queue\")\n        self.worker = WorkerGenerico(task_id, input_q, output_q, keep_alive)\n\n    def put(self, elem, block=True, timeout=None):\n        return self._input_q.put(elem, block=block, timeout=timeout)\n\n    def get(self, block=True, timeout=None):\n        return self._output_q.get(block=block, timeout=timeout)\n</code></pre>\n\n<p>I use EnvoltorioWorker.worker.* to call joins or other outher control methods and EnvoltorioWorker.get / EnvoltorioWorker.put to communicate with the inner class properly, just like this:</p>\n\n<pre><code>def main()\n    worker_container = EnvoltorioWorker(task_id=1)\n    worker_container.worker.start()\n    print(worker_container.get())\n</code></pre>\n\n<p>Normally I also make interfaces for start(), join() and nonwait_stop() in EnvoltorioWorker if no other access to worker is needed.</p>\n\n<p>It may look dummy, and there are probably better ways to achieve this, so:</p>\n\n<p><strong>Which method (A or B) is a better practise? Is inheriting from Thread the proper way to handle threads in Python?.</strong> I'm using dispycos for distributed environments and similar envelopes to communicate with my threads</p>\n\n<p>EDIT: Just noticed I forgot to translate comments and some strings in classes, but they're simple enough so I think it is readable. I'll edit it when I've time.</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["python", "python-3.x", "list", "dictionary"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 4, "creation_date": 1544047233, "post_id": 53641399, "comment_id": 94142302, "body": "What&#39;s your question? Why don&#39;t you just use them <i>from the dictionary</i>?"}, {"owner": {"reputation": 13, "user_id": 9969429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nOGRN.jpg?s=128&g=1", "display_name": "DB_65", "link": "https://stackoverflow.com/users/9969429/db-65"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1544047715, "post_id": 53641399, "comment_id": 94142470, "body": "I can&#39;t index over the value list in a dictionary. Or a least I didn&#39;t know of a way to do the math between key a:value[0] and key b:value[0].  if there&#39;s a better way, I&#39;m open to suggestions."}, {"owner": {"reputation": 4743, "user_id": 141789, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/57fdd140f26a1d683a056e11250451e4?s=128&d=identicon&r=PG", "display_name": "Karl", "link": "https://stackoverflow.com/users/141789/karl"}, "edited": false, "score": 0, "creation_date": 1544049115, "post_id": 53641399, "comment_id": 94142955, "body": "Here is some math: <code>dict_a[&quot;a&quot;][0] - dict_a[&quot;b&quot;][0]</code> , <code>dict_a[&quot;a&quot;][789] * dict_a[&quot;b&quot;][789]</code>,  <code>dict_a[&quot;a&quot;][42]  + dict_a[&quot;b&quot;][42]</code>. All valid (presuming you have over 1000 values)"}, {"owner": {"reputation": 1291, "user_id": 6225617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LoIIF.jpg?s=128&g=1", "display_name": "Kian", "link": "https://stackoverflow.com/users/6225617/kian"}, "edited": false, "score": 0, "creation_date": 1544049512, "post_id": 53641399, "comment_id": 94143087, "body": "@DB_65 double check your calculation. all the output values of <code>round(abs(p1[i]-p2[i])&#47;p2[i]*100</code> are <code>0.0</code>"}, {"owner": {"reputation": 13, "user_id": 9969429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nOGRN.jpg?s=128&g=1", "display_name": "DB_65", "link": "https://stackoverflow.com/users/9969429/db-65"}, "edited": false, "score": 0, "creation_date": 1544050535, "post_id": 53641399, "comment_id": 94143433, "body": "ok, thanks Karl, I hadn&#39;t thought of doing it like that. but I just tried it that way without converting first to a list and it works.  doh!"}, {"owner": {"reputation": 631, "user_id": 2692704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d719c39fe3b8aa28294a1dc9527b4e25?s=128&d=identicon&r=PG", "display_name": "foobarna", "link": "https://stackoverflow.com/users/2692704/foobarna"}, "edited": false, "score": 0, "creation_date": 1544051202, "post_id": 53641399, "comment_id": 94143657, "body": "Get rid of the <code>for</code> loop with <code>exec</code>, and instead of <code>result = deltaCalc(a, b)</code> write <code>result = deltaCalc(dict_a[&#39;a&#39;], dict_a[&#39;b&#39;])</code>. Isn&#39;t this what you want/need?"}], "owner": {"reputation": 13, "user_id": 9969429, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nOGRN.jpg?s=128&g=1", "display_name": "DB_65", "link": "https://stackoverflow.com/users/9969429/db-65"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544047236, "creation_date": 1544047151, "last_edit_date": 1544047236, "question_id": 53641399, "link": "https://stackoverflow.com/questions/53641399/how-to-convert-python-dictionary-value-to-a-list-with-key-being-name-of-each-lis", "title": "How to convert Python Dictionary value to a list with key being name of each list", "body": "<p>I have a routine that collects a lot of values in which I put them into a dictionary mostly because it was easier to have a dynamic key in a dictionary while creating the value list for that key then to create a dynamic variable. </p>\n\n<pre><code>dict_a = {'a':[1,4,5,6,7,8,9], 'b':[3,5,7,9,13,15,17]}\n\nfor k, v in dict_a.items():\n    exec(\"%s=%s\" % (k,v))  \n\ndef deltaCalc(p1, p2):\nresult=[]\n    for i in range(len(p1)):\n        result.append(round(abs(p1[i]-p2[i])/p2[i]*100))\n    return result\nresult = deltaCalc(a,b)\nprint(result)\n\n[67, 20, 29, 33, 46, 47, 47]\n</code></pre>\n\n<p>I know the 'exec' function is not good python and it's also not working with my list, at least in my case it's not.\nHow can I use the key name as the list name and the value-list for that key used as the elements of that list.  My dictionary should only contain 2 keys. but both keys have a value-list that can be more then 1000 values.  I'm trying to calculate the percentage difference between two performance curves to show code performance improvement of software builds. </p>\n"}, {"tags": ["python", "tensorflow", "keras", "keras-layer"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9933346, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-xZQL7D1kZPA/AAAAAAAAAAI/AAAAAAAAQDw/MmHoWe2z3m8/photo.jpg?sz=128", "display_name": "\u6797\u9091\u64b0", "link": "https://stackoverflow.com/users/9933346/%e6%9e%97%e9%82%91%e6%92%b0"}, "is_accepted": false, "score": 0, "last_activity_date": 1544512998, "last_edit_date": 1544512998, "creation_date": 1544509806, "answer_id": 53718581, "question_id": 53641389, "link": "https://stackoverflow.com/questions/53641389/how-to-embed-my-customised-tensorflow-layer-into-keras-model/53718581#53718581", "title": "How to embed my customised tensorflow layer into keras model", "body": "<p>Sorry, I am not too familiar with Recurrent Model.</p>\n\n<p>But I think the problem is input size.</p>\n\n<p>The size into custom layer (?, 8, 32)\nbut tf.nn.static_rnn require list like</p>\n\n<p><a href=\"https://i.stack.imgur.com/LN3KL.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LN3KL.png\" alt=\"enter image description here\"></a></p>\n\n<p>so you need to change the input size then problem will fix.</p>\n\n<pre><code>import numpy as np\nimport tensorflow as tf\nfrom tensorflow.keras.models import Sequential\nfrom tensorflow.keras.layers import LSTM, Flatten, Dense\n\nclass MyLayer(tf.keras.layers.Layer):\n\n    def __init__(self, **kwargs):\n        super(MyLayer, self).__init__(**kwargs)\n\n    def build(self, input_shape):\n        self.cell = tf.nn.rnn_cell.BasicRNNCell(32)\n        super(MyLayer, self).build(input_shape)\n\n    def call(self, x):\n        \"Some other tf function will be put at here\"\n        rnn_inputs = tf.unstack(x, axis=1)\n        outputs, state = tf.nn.static_rnn(self.cell, rnn_inputs, dtype=tf.float32)\n        for i in range(len(outputs)):\n            outputs[i] = tf.expand_dims(outputs[i], axis=1)\n        outputs = tf.concat(outputs, axis=1)\n        return outputs\n\n    def compute_output_shape(self, input_shape):\n        return input_shape\n\ndef get_model(timesteps, data_dim):\n    model = Sequential()\n    model.add(LSTM(32, return_sequences=True, input_shape=(timesteps, data_dim)))\n    model.add(LSTM(32, return_sequences=True))\n    model.add(MyLayer())  # this is my layer\n\n    model.add(Flatten())\n    model.add(Dense(10, activation='softmax'))\n    return model\n\ndef run_demo():\n    data_dim = 16\n    timesteps = 8\n    num_classes = 10\n\n    model = get_model(timesteps, data_dim)\n    model.compile(loss='categorical_crossentropy', optimizer='rmsprop', metrics=['accuracy'])\n    \"\"\"Generate the traning and validation data\"\"\"\n    x_train = np.random.random((1000, timesteps, data_dim))\n    y_train = np.random.random((1000, num_classes))\n    x_val = np.random.random((100, timesteps, data_dim))\n    y_val = np.random.random((100, num_classes))\n\n    model.fit(x_train, y_train, batch_size=64, epochs=5, validation_data=(x_val, y_val))\n\nif __name__ == \"__main__\":\n    run_demo()\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 6847038, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e4f8aa32bdf4b383c47757ea083b2802?s=128&d=identicon&r=PG&f=1", "display_name": "void", "link": "https://stackoverflow.com/users/6847038/void"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 373, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544512998, "creation_date": 1544047112, "last_edit_date": 1544086046, "question_id": 53641389, "link": "https://stackoverflow.com/questions/53641389/how-to-embed-my-customised-tensorflow-layer-into-keras-model", "title": "How to embed my customised tensorflow layer into keras model", "body": "<p>Following is the code of one simple example for what I want to implement:</p>\n\n<p><strong>Error</strong>: raise TypeError(\"inputs must be a sequence\"), TypeError: inputs must be a sequence</p>\n\n<p>How to solve this to make the program can work? Any help will be appreciated.</p>\n\n<pre><code>from keras.models import Sequential\nfrom keras.layers import LSTM, Dense, Flatten\nimport numpy as np\nfrom keras.engine.topology import Layer\nimport tensorflow as tf\n\n\nclass MyLayer(Layer):\n\n    def __init__(self, **kwargs):\n        super(MyLayer, self).__init__(**kwargs)\n\n    def build(self, input_shape):\n        super(MyLayer, self).build(input_shape)  \n\n    def call(self, x):\n        \"Some other tf function will be put at here\"\n        outputs, state = tf.contrib.rnn.static_rnn(tf.contrib.rnn.LSTMBlockCell(32), x, dtype=tf.float32)\n        return outputs\n\n    def compute_output_shape(self, input_shape):\n        return input_shape\n\n\ndef get_model(timesteps, data_dim):\n    model = Sequential()\n    model.add(LSTM(32, return_sequences=True, input_shape=(timesteps, data_dim)))\n    model.add(LSTM(32, return_sequences=True))\n    model.add(MyLayer())  # this is my layer\n\n    model.add(Flatten())\n    model.add(Dense(10, activation='softmax'))\n    return model\n\n\ndef run_demo():\n    data_dim = 16\n    timesteps = 8\n    num_classes = 10\n\n    model = get_model(timesteps, data_dim)\n    model.compile(loss='categorical_crossentropy', optimizer='rmsprop', metrics=['accuracy'])\n    \"\"\"Generate the traning and validation data\"\"\"\n    x_train = np.random.random((1000, timesteps, data_dim))\n    y_train = np.random.random((1000, num_classes))\n    x_val = np.random.random((100, timesteps, data_dim))\n    y_val = np.random.random((100, num_classes))\n\n    model.fit(x_train, y_train, batch_size=64, epochs=5, validation_data=(x_val, y_val))\n\n\nif __name__ == \"__main__\":\n    run_demo()\n</code></pre>\n"}, {"tags": ["python", "ansible"], "answers": [{"tags": [], "owner": {"reputation": 520, "user_id": 5334744, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208027319109184/picture?type=large", "display_name": "Anant Naugai", "link": "https://stackoverflow.com/users/5334744/anant-naugai"}, "is_accepted": false, "score": 0, "last_activity_date": 1544063936, "creation_date": 1544063936, "answer_id": 53643804, "question_id": 53641374, "link": "https://stackoverflow.com/questions/53641374/passing-a-dictionary-variable-to-a-custom-module/53643804#53643804", "title": "Passing a Dictionary Variable to a Custom Module", "body": "<p>This works:</p>\n\n<ol>\n<li><p>Pass ansible_facts piping it to <code>to_json</code> filter in your play.</p>\n\n<pre><code>- name: run tests   \n  degoss:\n  # ...\n  facts: \"{{ ansible_facts | to_json }}\"\n</code></pre></li>\n<li><p>In your python module decode the json using <strong>either</strong> <code>json.loads</code> or <code>ast.literal_eval</code></p>\n\n<pre><code>import json\nimport ast\n...\nfacts = json.loads(module.params.get('facts'))\nfacts = ast.literal_eval(module.params.get('facts'))\n...\n</code></pre></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 580, "user_id": 4140973, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uD699.jpg?s=128&g=1", "display_name": "fraff", "link": "https://stackoverflow.com/users/4140973/fraff"}, "is_accepted": false, "score": 0, "last_activity_date": 1569591585, "creation_date": 1569591585, "answer_id": 58135730, "question_id": 53641374, "link": "https://stackoverflow.com/questions/53641374/passing-a-dictionary-variable-to-a-custom-module/58135730#58135730", "title": "Passing a Dictionary Variable to a Custom Module", "body": "<p>As described <a href=\"https://docs.ansible.com/ansible/latest/dev_guide/developing_program_flow_modules.html#type\" rel=\"nofollow noreferrer\">here</a>, you can specify what type ansible can expect.</p>\n\n<pre><code>AnsibleModule(argument_spec=dict(\n  # ...\n  facts=dict(required=False, default={}, type=dict),\n), ...)\n</code></pre>\n\n<p>Then 'facts' will be a dictionary</p>\n"}], "owner": {"reputation": 74982, "user_id": 128967, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/e6ce48656d5e39227a10b37a51754134?s=128&d=identicon&r=PG", "display_name": "Naftuli Kay", "link": "https://stackoverflow.com/users/128967/naftuli-kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1039, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1607403564, "creation_date": 1544047029, "question_id": 53641374, "link": "https://stackoverflow.com/questions/53641374/passing-a-dictionary-variable-to-a-custom-module", "title": "Passing a Dictionary Variable to a Custom Module", "body": "<p>I have <a href=\"https://github.com/naftulikay/ansible-role-degoss/pull/36\" rel=\"nofollow noreferrer\">a custom module for Ansible written in Python</a> that I maintain, and I need to be able to pass in all detected Ansible facts as a dictionary into this module.</p>\n\n<p>Currently, I'm attempting to do this like so:</p>\n\n<pre><code>- name: run tests\n  degoss:\n    # ...\n    facts: \"{{ ansible_facts }}\"\n</code></pre>\n\n<p>My module's argument spec looks like this:</p>\n\n<pre><code>AnsibleModule(argument_spec=dict(\n  # ...\n  facts=dict(required=False, default={}),\n), ...)\n</code></pre>\n\n<p>My module documentation also specifies this:</p>\n\n<pre><code>DOCUMENTATION=\"\"\"\n# ...\noptions:\n  facts:\n    required: false\n    default: empty dictionary\n    description: A dictionary of Ansible facts.\n\"\"\"\n</code></pre>\n\n<p>However, as I do input sanitization and validation, I receive a <code>str</code> instead of a dictionary:</p>\n\n<pre><code>if not isinstance(self.facts, dict):\n    self.fail(\"The 'facts' parameter to this module must be a dictionary, not a {}\".format(type(self.facts)))\n</code></pre>\n\n<p>This is thrown at runtime:</p>\n\n<pre><code>The 'facts' parameter to this module must be a dictionary, not a &lt;type 'str'&gt;\n</code></pre>\n\n<p>Is there a specific syntax I need to use to pass a value as a dictionary, or do I need to treat dictionary variables as JSON and attempt to deserialize them?</p>\n"}, {"tags": ["python", "console", "helper"], "answers": [{"comments": [{"owner": {"reputation": 788, "user_id": 10680954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05559c6476d35e28aeb918770465f81f?s=128&d=identicon&r=PG&f=1", "display_name": "zwithouta", "link": "https://stackoverflow.com/users/10680954/zwithouta"}, "edited": false, "score": 0, "creation_date": 1544102922, "post_id": 53641458, "comment_id": 94163167, "body": "This does not work for Windows does it? Do you have an idea how to solve this problem when you are using the Python Console in PyCharm?"}, {"owner": {"reputation": 153, "user_id": 9712352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjuEp.png?s=128&g=1", "display_name": "jxpp", "link": "https://stackoverflow.com/users/9712352/jxpp"}, "reply_to_user": {"reputation": 788, "user_id": 10680954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05559c6476d35e28aeb918770465f81f?s=128&d=identicon&r=PG&f=1", "display_name": "zwithouta", "link": "https://stackoverflow.com/users/10680954/zwithouta"}, "edited": false, "score": 0, "creation_date": 1544107496, "post_id": 53641458, "comment_id": 94166196, "body": "@zwithouta I couldn&#39;t say. Haven&#39;t tried using Pycharm. However, here&#39;s the <code>less</code> manual: <a href=\"http://man7.org/linux/man-pages/man1/less.1.html\" rel=\"nofollow noreferrer\">man7.org/linux/man-pages/man1/less.1.html</a> . You could try some commands to see if they work inside of help text."}], "tags": [], "owner": {"reputation": 153, "user_id": 9712352, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RjuEp.png?s=128&g=1", "display_name": "jxpp", "link": "https://stackoverflow.com/users/9712352/jxpp"}, "is_accepted": false, "score": 0, "last_activity_date": 1544047468, "creation_date": 1544047468, "answer_id": 53641458, "question_id": 53641365, "link": "https://stackoverflow.com/questions/53641365/is-it-possible-to-automatically-jump-to-the-beginning-of-the-help-function-outpu/53641458#53641458", "title": "Is it possible to automatically jump to the beginning of the help function output within the python console?", "body": "<p>You press the letter <code>g</code>.</p>\n\n<p>The bindings for the python help text can be found in the <code>less</code> command manual, in the <code>COMMANDS</code> section. You can access this manual by running <code>man less</code> in a shell if you're running Linux.</p>\n"}], "owner": {"reputation": 788, "user_id": 10680954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05559c6476d35e28aeb918770465f81f?s=128&d=identicon&r=PG&f=1", "display_name": "zwithouta", "link": "https://stackoverflow.com/users/10680954/zwithouta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 17, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1544047468, "creation_date": 1544046962, "question_id": 53641365, "link": "https://stackoverflow.com/questions/53641365/is-it-possible-to-automatically-jump-to-the-beginning-of-the-help-function-outpu", "title": "Is it possible to automatically jump to the beginning of the help function output within the python console?", "body": "<p>Every time I use the help function in the python console, I have to scroll up and look for the exact place where the help text starts. </p>\n\n<p>Is there a way to make the cursor jump directly to this position?</p>\n"}, {"tags": ["python", "matplotlib", "seaborn", "image-resizing"], "answers": [{"tags": [], "owner": {"reputation": 1275, "user_id": 5024514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4015d630fb725145f4565d322334e08?s=128&d=identicon&r=PG", "display_name": "ShlomiF", "link": "https://stackoverflow.com/users/5024514/shlomif"}, "is_accepted": true, "score": 3, "last_activity_date": 1544047136, "creation_date": 1544047136, "answer_id": 53641395, "question_id": 53641287, "link": "https://stackoverflow.com/questions/53641287/off-center-x-axis-in-seaborn/53641395#53641395", "title": "Off-center X-Axis in Seaborn", "body": "<p>It's hard to tell without an <a href=\"https://stackoverflow.com/help/mcve\">MCVE</a>, But I'm guessing it's because you're using two categorical variables; <code>x</code>, and <code>hue</code>. This creates a so called <a href=\"https://seaborn.pydata.org/generated/seaborn.boxplot.html\" rel=\"nofollow noreferrer\">\"nested\"</a> (search for the key-word \"smoke\") box-plot, and if one of the categories is empty in some sense might cause the observed off-set.<br>\nAgain, only guessing 'cause that's what you gave us.<br>\nGood luck!</p>\n"}], "owner": {"reputation": 17, "user_id": 10751819, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Zv_ko13z7cQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jyoxKAmusUi9ChlSOZztpPOR-S4A/mo/photo.jpg?sz=128", "display_name": "Connor McCourtney", "link": "https://stackoverflow.com/users/10751819/connor-mccourtney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 306, "favorite_count": 0, "accepted_answer_id": 53641395, "answer_count": 1, "score": 0, "last_activity_date": 1544060917, "creation_date": 1544046648, "last_edit_date": 1544060917, "question_id": 53641287, "link": "https://stackoverflow.com/questions/53641287/off-center-x-axis-in-seaborn", "title": "Off-center X-Axis in Seaborn", "body": "<p>I'm having an issue getting my boxplot to align with my x axis labels. I've tried adjusting the size of the chart, but the data points still look a little off. I appreciate any help!</p>\n\n<p>This is the current chart:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Jpq31.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Jpq31.png\" alt=\"Current Chart\"></a></p>\n"}, {"tags": ["python", "pandas", "dataframe", "time-series", "pandas-groupby"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 10404053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/441d5ae9cbf8905cf3cdf3c3a60b0a9f?s=128&d=identicon&r=PG&f=1", "display_name": "Basileus", "link": "https://stackoverflow.com/users/10404053/basileus"}, "edited": false, "score": 0, "creation_date": 1544125531, "post_id": 53641711, "comment_id": 94175421, "body": "Since I need where to have cyclonic activity occurred repeatedly within a one-month time frame, should I not apply the merge on Latitude and Longitude for the same location."}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "reply_to_user": {"reputation": 149, "user_id": 10404053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/441d5ae9cbf8905cf3cdf3c3a60b0a9f?s=128&d=identicon&r=PG&f=1", "display_name": "Basileus", "link": "https://stackoverflow.com/users/10404053/basileus"}, "edited": false, "score": 0, "creation_date": 1544125667, "post_id": 53641711, "comment_id": 94175475, "body": "@Basileus I&#39;m not doing any merging on latitude or longitude. I&#39;m simply merging on <code>Disaster</code>, which in this case only creates every single pair-wise combination of two cyclones, regardless of anything else. So if you have a <code>DataFrame</code> with 900 cyclones, the resulting merge will be 810,000 rows. You can see in my output <code>DataFrame</code> the latitude and longitudes of the two cyclones are very different."}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "reply_to_user": {"reputation": 149, "user_id": 10404053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/441d5ae9cbf8905cf3cdf3c3a60b0a9f?s=128&d=identicon&r=PG&f=1", "display_name": "Basileus", "link": "https://stackoverflow.com/users/10404053/basileus"}, "edited": false, "score": 0, "creation_date": 1544125862, "post_id": 53641711, "comment_id": 94175575, "body": "Also, your comment indicates that what you actually want may be very different from how you worded your question title. If you simply need to figure out if more than one cyclone happened in <code>November 2012</code> then that&#39;s far easier. But doing a calendar month rolling operation is much harder. It becomes very easy if you instead specify a month as say 31 days."}], "tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": false, "score": 1, "last_activity_date": 1544107094, "last_edit_date": 1544107094, "creation_date": 1544048769, "answer_id": 53641711, "question_id": 53641280, "link": "https://stackoverflow.com/questions/53641280/filter-the-dataframe-by-having-only-the-rows-that-are-month-apart-from-each-othe/53641711#53641711", "title": "Filter the dataframe by having only the rows that are month apart from each other", "body": "<p>If you have the memory, <code>merge</code> with itself and then filter after the merge to only those cyclones that occur within 1 month. Use <code>pd.offsets.DateOffset</code> to get the same logic as <code>relativedelta</code></p>\n\n<pre><code>import pandas as pd\n\ndf['Date'] = pd.to_datetime(df.Date)\ndf = df[df.Disaster=='Cyclone'].reset_index()  # Need index to deduplicate later\n\nmerged = df.merge(df, on='Disaster', suffixes=['_1', '_2'])\n\nmask = ((merged.index_1 &gt; merged.index_2)  # Remove self merges and AB-BA duplicates\n        &amp; merged.Date_1.between(merged.Date_2 - pd.offsets.DateOffset(months=1), \n                                merged.Date_2 + pd.offsets.DateOffset(months=1)))\n\nmerged = merged[mask].drop(columns=['index_1', 'index_2'])\n</code></pre>\n\n<h3>Output: <code>merged</code></h3>\n\n<pre><code>       Date_1  Latitude_1  Longitude_1 Disaster     Date_2  Latitude_2  Longitude_2\n5  2011-02-09       45.01        79.24  Cyclone 2011-01-10       56.79        89.90\n15 2010-12-19       66.78       125.35  Cyclone 2011-01-10       56.79        89.90\n17 2010-12-19       66.78       125.35  Cyclone 2010-11-20       34.08        69.92\n</code></pre>\n\n<hr>\n\n<p>If you truly just need the rows from the original DataFrame and the pairings are useless, then don't drop <code>['index_1', 'index_2']</code> and use the unique values to subset the original <code>DataFrame</code>, or use <code>pd.wide_to_long</code> on <code>merged</code> + <code>drop_duplicates</code> to format it back to how the original looked.</p>\n"}], "owner": {"reputation": 149, "user_id": 10404053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/441d5ae9cbf8905cf3cdf3c3a60b0a9f?s=128&d=identicon&r=PG&f=1", "display_name": "Basileus", "link": "https://stackoverflow.com/users/10404053/basileus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544107094, "creation_date": 1544046623, "last_edit_date": 1544055515, "question_id": 53641280, "link": "https://stackoverflow.com/questions/53641280/filter-the-dataframe-by-having-only-the-rows-that-are-month-apart-from-each-othe", "title": "Filter the dataframe by having only the rows that are month apart from each other", "body": "<pre><code>Date    Latitude    Longitude   Disaster\n2011-01-10  56.79   89.90   Cyclone\n2011-02-09  45.01   79.24   Cyclone\n2010-11-20  34.08   69.92   Cyclone\n2010-12-19  66.78   125.35  Cyclone\n2017-09-10  56.99   98.22   Cyclone\n</code></pre>\n\n<p>I have a dataframe that I need to filter it so that it <strong>contains data about where have cyclonic activity occurred repeatedly within a one-month time frame</strong>.<br>\nI used merge operation to find pairs of cyclones occurring in the same location-</p>\n\n<pre><code>merged_df = df.merge(df, on= [\"Longitude\",\"Latitude\"], how =\"inner\")\n</code></pre>\n\n<p>I was able to find the data within a month for a particular date, say: 2002-01-01, using</p>\n\n<p><code>df[dt['Date'] &gt;= date(2002,1,1)  &amp; df['Date'] &lt; date(2002,1,1) + relativedelta(months=1)].count()</code>. </p>\n\n<p>but am unable to figure out how should I apply it to the entire dataframe so that it gives me information about where have cyclonic activity occurred repeatedly within a one-month time frame. Can somebody help me achieve this?</p>\n"}, {"tags": ["python", "cython"], "comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 1, "creation_date": 1544047297, "post_id": 53641278, "comment_id": 94142331, "body": "The last sentence of your question suggests you are hoping that by using your Cython typedef but then passing a Python function as <code>f</code>, you will somehow get a speedup of the pure-Python code in <code>f</code>.  That isn&#39;t going to work.  If a user writes a Python function and passes it to your <code>cy_fmyfunc</code>, Cython isn&#39;t going to speed it up just because you&#39;re calling it from within a <code>cdef</code>.  As suggested by deets below, you&#39;re probably better off not trying to specify any C-level type for <code>f</code>."}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 1, "creation_date": 1544047331, "post_id": 53641278, "comment_id": 94142345, "body": "And why the solution/link proposed in this comment to your original question <a href=\"https://stackoverflow.com/questions/53619438/how-to-call-a-cython-cdef-function-that-contains-as-a-parameter-a-function-in#comment94105070_53619438\" title=\"how to call a cython cdef function that contains as a parameter a function in%23comment94105070_53619438\">stackoverflow.com/questions/53619438/&hellip;</a> doesn\u2019t solve your problem?"}, {"owner": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1544047509, "post_id": 53641278, "comment_id": 94142403, "body": "Basically you need jit compilation of some boilerplate code for this to work - that is what ctypes is able to do for you."}, {"owner": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "reply_to_user": {"reputation": 26689, "user_id": 5769463, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/71a28b5fac23ee656a32cc7ea6df54ec?s=128&d=identicon&r=PG&f=1", "display_name": "ead", "link": "https://stackoverflow.com/users/5769463/ead"}, "edited": false, "score": 0, "creation_date": 1544048187, "post_id": 53641278, "comment_id": 94142631, "body": "@ead ctypes has nothing to do with that. It does not JIT anything. Mostly PyPy does. And some more arcane things in the scientific computing world."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "reply_to_user": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "edited": false, "score": 0, "creation_date": 1544048286, "post_id": 53641278, "comment_id": 94142669, "body": "@deets ctypes can generate a small &quot;JIT&quot; function around a Python callable, which allows you to translate that callable into a C function pointer. That&#39;s impossible to do without runtime code generation."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1544048692, "post_id": 53641278, "comment_id": 94142795, "body": "@marcos <a href=\"https://stackoverflow.com/a/42887656/4657412\">this answer</a> gives you a couple of other options if you&#39;re prepared to change the signature... Either way it&#39;d be good to know why the link I gave on your other question isn&#39;t suitable"}, {"owner": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "reply_to_user": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1544099135, "post_id": 53641278, "comment_id": 94160846, "body": "@DavidW I find this a stretch of the term JIT. But I understand what you mean. However within this context here, this is still not helping, as all it does is moving the PyObject_Call-Semantics just one step further away. It&#39;s then not cython generating that boilerplate, it&#39;s ctypes with cython immediately delegating to it."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "reply_to_user": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "edited": false, "score": 0, "creation_date": 1544100563, "post_id": 53641278, "comment_id": 94161731, "body": "@deets It isn&#39;t elegant or quick (or pure Cython), but it does solve the problem of turning a Python callable into a C function pointer. If the C interface is fixed then it&#39;s the only viable solution I know. If OP is able to change the C interface (e.g. to accept a PyObject* arguement) then I agree that there are better options."}], "answers": [{"tags": [], "owner": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "is_accepted": true, "score": 0, "last_activity_date": 1544046890, "creation_date": 1544046890, "answer_id": 53641346, "question_id": 53641278, "link": "https://stackoverflow.com/questions/53641278/how-to-pass-a-python-function-to-a-cython-function-that-accepts-a-function-as-a/53641346#53641346", "title": "How to pass a python function to a cython function that accepts a function as a parameter?", "body": "<p>I haven't tinkered with cython in a while. But conceptually your approach is flawed. By hard-coding a C-type function that can ever only be a simple pointer-value, you limited yourself too much. A python function can never be that. It will ALWAYS be represented by a Py_Object, as any callable.</p>\n\n<p>Just <em>don't</em> declare f as a ftype, but instead a normal python object (or no type at all), and then just call it. You need the full semantics of a passed Py_Object* anyways, as cython has no way to guarantee that the passed function is not completely different callable.</p>\n"}], "owner": {"reputation": 127, "user_id": 4167295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93578f77ef72c62d38ba7dee722ab17e?s=128&d=identicon&r=PG&f=1", "display_name": "marcos", "link": "https://stackoverflow.com/users/4167295/marcos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 53641346, "answer_count": 1, "score": -1, "last_activity_date": 1544046890, "creation_date": 1544046608, "question_id": 53641278, "link": "https://stackoverflow.com/questions/53641278/how-to-pass-a-python-function-to-a-cython-function-that-accepts-a-function-as-a", "title": "How to pass a python function to a cython function that accepts a function as a parameter?", "body": "<p><strong>I am rephrasing my original <a href=\"https://stackoverflow.com/questions/53619438/how-to-call-a-cython-cdef-function-that-contains-as-a-parameter-a-function-in\">question</a> based on some of the comments (I recognized that when posted the question was not as precise as it could have been) in the hopes to find a answer.</strong></p>\n\n<p>I have the following <strong>cdef</strong> function that among various other parameters accepts an <strong>f()</strong> function defined as an <em>ftype</em> as shown below,  </p>\n\n<pre><code>%%cython\nctypedef double (*ftype) (double)\n\ncdef cy_myfunc(int a,..., double x, ftype f):\n  ...\n  cdef double result\n  result = f(x)\n  return result\n</code></pre>\n\n<p>and I define a python function such as this:</p>\n\n<pre><code>def py_myfunc(a,..., x, f):\n    return cy_myfunc(a,...,x,f)\n</code></pre>\n\n<p>I want to be able to call <strong>py_myfunc()</strong> and pass a user python function as the f parameter (the only prerequisite of the python function is that is should accept a double and return double). Is this possible? if so how can this be achieved in cython? The <strong>f()</strong> function is used repeatedly within a loop so I would like for it to be as quick as possible.</p>\n"}, {"tags": ["python", "google-api", "google-drive-api", "google-oauth", "google-api-python-client"], "comments": [{"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1544046746, "post_id": 53641206, "comment_id": 94142147, "body": "I do not see in your code where you are refreshing the token. Your code is for authentication / authorization. Review this link for refreshing tokens: <a href=\"https://developers.google.com/identity/protocols/OAuth2WebServer#offline\" rel=\"nofollow noreferrer\">developers.google.com/identity/protocols/&hellip;</a>"}, {"owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1544084452, "post_id": 53641206, "comment_id": 94152699, "body": "1. Do you personally have access to this drive account.  If so you sould be using a service account.  2. If not one you should be requesting offline access then you will have a refresh token which you can use to request a new access token when the access token expires"}, {"owner": {"reputation": 963, "user_id": 1542093, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dRwFe.jpg?s=128&g=1", "display_name": "lordlabakdas", "link": "https://stackoverflow.com/users/1542093/lordlabakdas"}, "edited": false, "score": 0, "creation_date": 1544084507, "post_id": 53641206, "comment_id": 94152722, "body": "I do have access to this drive account"}, {"owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1544094641, "post_id": 53641206, "comment_id": 94158397, "body": "Then you should look into this <a href=\"https://developers.google.com/api-client-library/python/auth/service-accounts\" rel=\"nofollow noreferrer\">developers.google.com/api-client-library/python/auth/&hellip;</a>"}, {"owner": {"reputation": 18863, "user_id": 1000753, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/23634e7a38e353cca12bb72a4205615b?s=128&d=identicon&r=PG", "display_name": "pinoyyid", "link": "https://stackoverflow.com/users/1000753/pinoyyid"}, "edited": false, "score": 0, "creation_date": 1544126563, "post_id": 53641206, "comment_id": 94175871, "body": "<a href=\"https://stackoverflow.com/questions/19766912/how-do-i-authorise-an-app-web-or-installed-without-user-intervention/19766913#19766913\" title=\"how do i authorise an app web or installed without user intervention\">stackoverflow.com/questions/19766912/&hellip;</a>"}], "owner": {"reputation": 963, "user_id": 1542093, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/dRwFe.jpg?s=128&g=1", "display_name": "lordlabakdas", "link": "https://stackoverflow.com/users/1542093/lordlabakdas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1544084494, "creation_date": 1544046315, "last_edit_date": 1544084494, "question_id": 53641206, "link": "https://stackoverflow.com/questions/53641206/not-able-to-regenerate-token-while-in-server-environment-for-oauth2-0-google-dri", "title": "Not able to regenerate token while in server environment for Oauth2.0 Google Drive API", "body": "<p>I would like to regenerate a token while having no access to a browser on a server side environment.</p>\n\n<p>I am having difficulties generating a new token when the current token expires during the Oauth2.0 authorization with the Google Drive API. </p>\n\n<p>I have got to a point where my code provides a URL which we would need to GET to get access to a code that needs to be filled back on the server.</p>\n\n<p>I have tried looking around on StackOverflow but have been unsuccessful in finding a solution. Given below is the current state of my code:</p>\n\n<pre><code>def get_latest_token():\n    store = file.Storage('token.json')\n    creds = store.get()\n    token_params = load_json_as_dict('token.json')\n    if not creds or creds.access_token_expired:\n        flow = client.flow_from_clientsecrets('credentials.json', 'https://www.googleapis.com/auth/drive')                                                                                                                                                                                                                           \n        flags = tools.argparser.parse_args(args=[])\n        creds = tools.run_flow(flow, store, flags)\n    bearer_token = \"Bearer \" + load_json_as_dict('token.json')[\"access_token\"]                                                                                                                                                                                                                                        \n    return bearer_token\n</code></pre>\n\n<p>Any help appreciated.</p>\n"}, {"tags": ["python", "arrays"], "comments": [{"owner": {"reputation": 3919, "user_id": 9794932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c604d07b333e9e546b495273a179cd53?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Bricheno", "link": "https://stackoverflow.com/users/9794932/rob-bricheno"}, "edited": false, "score": 0, "creation_date": 1544046484, "post_id": 53641202, "comment_id": 94142066, "body": "What does the text file look like? What have you tried so far?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 2, "creation_date": 1544046983, "post_id": 53641202, "comment_id": 94142230, "body": "What delimits one paragraph from another?"}], "answers": [{"tags": [], "owner": {"reputation": 457, "user_id": 5940809, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fFaMG.png?s=128&g=1", "display_name": "echefede", "link": "https://stackoverflow.com/users/5940809/echefede"}, "is_accepted": true, "score": 2, "last_activity_date": 1544046550, "creation_date": 1544046550, "answer_id": 53641266, "question_id": 53641202, "link": "https://stackoverflow.com/questions/53641202/how-to-read-from-text-file-into-array-paragraph-by-paragraph/53641266#53641266", "title": "How to read from text file into array paragraph by paragraph?", "body": "<p>You want this: <code>my_list = my_string.splitlines()</code>\n<a href=\"https://docs.python.org/3/library/stdtypes.html#str.splitlines\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/stdtypes.html#str.splitlines</a></p>\n"}, {"tags": [], "owner": {"reputation": 180, "user_id": 10543188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p3kap.jpg?s=128&g=1", "display_name": "Iulian", "link": "https://stackoverflow.com/users/10543188/iulian"}, "is_accepted": false, "score": 0, "last_activity_date": 1544048367, "creation_date": 1544048367, "answer_id": 53641630, "question_id": 53641202, "link": "https://stackoverflow.com/questions/53641202/how-to-read-from-text-file-into-array-paragraph-by-paragraph/53641630#53641630", "title": "How to read from text file into array paragraph by paragraph?", "body": "<p>Like @martineau suggested you need a delimiter for separate different paragraphs.\nThis can even be a new line character (\\n) and after you have it you read all content of the file and split it by the defined delimiter.\nDoing so you generate a list of elements with each one being a paragraph.\nSome example code:</p>\n\n<pre><code>delimiter = \"\\n\"\nwith open(\"paragraphs.txt\", \"r\") as paragraphs_file:\n    all_content = paragraphs_file.read() #reading all the content in one step\n    #using the string methods we split it\n    paragraphs = all_content.split(delimiter)\n</code></pre>\n\n<p>This approach has some drawbacks like the fact that read all the content and if the file is big you fill the memory with thing that you don't need now, at the moment of the story.</p>\n\n<p>Looking at your text example and knowing that you will continuously print the retrieved text, reading one line a time could be a better solution:</p>\n\n<pre><code>with open(\"paragraphs.txt\", \"r\") as paragraphs_file:\n   for paragraph in paragraphs_file: #one line until the end of file\n       if paragraph != \"\\n\":\n          print(paragraph)\n</code></pre>\n\n<p>Obviously add some logic control where you need it.</p>\n"}], "owner": {"reputation": 3, "user_id": 10751798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2b54ed7078675dbbf74a6882ec024395?s=128&d=identicon&r=PG&f=1", "display_name": "Tonyp123", "link": "https://stackoverflow.com/users/10751798/tonyp123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1453, "favorite_count": 0, "accepted_answer_id": 53641266, "answer_count": 2, "score": 0, "last_activity_date": 1544048367, "creation_date": 1544046290, "question_id": 53641202, "link": "https://stackoverflow.com/questions/53641202/how-to-read-from-text-file-into-array-paragraph-by-paragraph", "title": "How to read from text file into array paragraph by paragraph?", "body": "<p>Making a text based game and want to read from the story text file via paragraph rather than printing a certain amount of characters?</p>\n\n<pre><code>You wake up from a dazed slumber to find yourself in a deep dank cave with moonlight casting upon the entrance...\n\nYou see a figure approaching towards you... Drawing nearer you hear him speak...\n</code></pre>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 1226, "user_id": 10655190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73b7c2dbf23b847b212feadae80d8042?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Steinberg", "link": "https://stackoverflow.com/users/10655190/roger-steinberg"}, "edited": false, "score": 0, "creation_date": 1544046624, "post_id": 53641246, "comment_id": 94142113, "body": "what does &#39;.cat&#39; , &#39;.codes&#39; and &#39;Bins -&#39; represent?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 1226, "user_id": 10655190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73b7c2dbf23b847b212feadae80d8042?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Steinberg", "link": "https://stackoverflow.com/users/10655190/roger-steinberg"}, "edited": false, "score": 0, "creation_date": 1544046678, "post_id": 53641246, "comment_id": 94142128, "body": "@RogerSteinberg <code>pd.qcut</code> returns a categorical column of intervals. These categories are internally represented by integer codes ranging from 0-4 (for 5 bins). I leveraged this, and subtracted from 5 to get your expected output."}, {"owner": {"reputation": 1226, "user_id": 10655190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73b7c2dbf23b847b212feadae80d8042?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Steinberg", "link": "https://stackoverflow.com/users/10655190/roger-steinberg"}, "edited": false, "score": 0, "creation_date": 1544047173, "post_id": 53641246, "comment_id": 94142285, "body": "So this code acts as NTILE in sql? Dividing in quintiles?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 1226, "user_id": 10655190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73b7c2dbf23b847b212feadae80d8042?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Steinberg", "link": "https://stackoverflow.com/users/10655190/roger-steinberg"}, "edited": false, "score": 1, "creation_date": 1544047761, "post_id": 53641246, "comment_id": 94142486, "body": "@RogerSteinberg Not sure what NTILE is (or what it does), but yes this would divide your data into N quantiles (quintiles?) and then label them."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 3, "last_activity_date": 1544046833, "last_edit_date": 1544046833, "creation_date": 1544046460, "answer_id": 53641246, "question_id": 53641191, "link": "https://stackoverflow.com/questions/53641191/separate-dataframe-into-n-almost-equal-segments/53641246#53641246", "title": "Separate DataFrame into N (almost) equal segments", "body": "<p>Actually, you were closer to the answer than you think. This will work regardless of whether <code>len(df)</code> is a multiple of 5 or not.</p>\n\n<pre><code>bins = 5\ndf['Segment'] = bins - pd.qcut(df['Id'], bins).cat.codes\n\ndf\n   Id  ColA  Segment\n0   1     2        5\n1   2     2        5\n2   3     3        4\n3   4     5        4\n4   5    10        3\n5   6    12        3\n6   7    18        2\n7   8    20        2\n8   9    25        1\n9  10    26        1\n</code></pre>\n\n<p>Where,</p>\n\n<pre><code>pd.qcut(df['Id'], bins).cat.codes\n\n0    0\n1    0\n2    1\n3    2\n4    3\n5    4\n6    4\ndtype: int8\n</code></pre>\n\n<p>Represents the categorical intervals returned by <code>pd.qcut</code> as integer values.</p>\n\n<hr>\n\n<p>Another example, for a DataFrame with <strong>7</strong> rows.</p>\n\n<pre><code>df = df.head(7).copy()\ndf['Segment'] = bins - pd.qcut(df['Id'], bins).cat.codes\n\ndf\n\n   Id  ColA  Segment\n0   1     2        5\n1   2     2        5\n2   3     3        4\n3   4     5        3\n4   5    10        2\n5   6    12        1\n6   7    18        1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1122, "user_id": 4724240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1xpq.jpg?s=128&g=1", "display_name": "Axel Puig", "link": "https://stackoverflow.com/users/4724240/axel-puig"}, "is_accepted": false, "score": 1, "last_activity_date": 1544047002, "last_edit_date": 1544047002, "creation_date": 1544046637, "answer_id": 53641285, "question_id": 53641191, "link": "https://stackoverflow.com/questions/53641191/separate-dataframe-into-n-almost-equal-segments/53641285#53641285", "title": "Separate DataFrame into N (almost) equal segments", "body": "<p>This should work:</p>\n\n<pre><code>df['segment'] = np.linspace(1, 6, len(df), False, dtype=int)\n</code></pre>\n\n<p>It creates a list of int between 1 and 5 of the size of your array. If you want from 5 to 1, just add <code>[::-1]</code> at the end of the line.</p>\n"}], "owner": {"reputation": 1226, "user_id": 10655190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73b7c2dbf23b847b212feadae80d8042?s=128&d=identicon&r=PG&f=1", "display_name": "Roger Steinberg", "link": "https://stackoverflow.com/users/10655190/roger-steinberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "accepted_answer_id": 53641246, "answer_count": 2, "score": 2, "last_activity_date": 1544047002, "creation_date": 1544046216, "last_edit_date": 1544046708, "question_id": 53641191, "link": "https://stackoverflow.com/questions/53641191/separate-dataframe-into-n-almost-equal-segments", "title": "Separate DataFrame into N (almost) equal segments", "body": "<p>Say I have a data frame that looks like this:</p>\n\n<pre><code>Id  ColA\n1   2           \n2   2        \n3   3        \n4   5        \n5   10       \n6   12       \n7   18       \n8   20       \n9   25       \n10  26          \n</code></pre>\n\n<p>I would like my code to create a new column at the end of the DataFrame that divides the total # of obvservations by 5 ranging from 5 to 1.</p>\n\n<pre><code>Id  ColA    Segment\n1   2        5  \n2   2        5\n3   3        4\n4   5        4\n5   10       3\n6   12       3\n7   18       2\n8   20       2\n9   25       1\n10  26       1  \n</code></pre>\n\n<p>I tried the following code but doesn't work:</p>\n\n<pre><code>df['segment'] = pd.qcut(df['Id'],5)\n</code></pre>\n\n<p>I also want to know what would happpen if the total of my observations was not dividable by 5.</p>\n"}, {"tags": ["python", "python-3.x", "peewee"], "answers": [{"comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1544048840, "post_id": 53641520, "comment_id": 94142850, "body": "See <a href=\"https://github.com/coleifer/peewee/blob/master/peewee.py#L5352\" rel=\"nofollow noreferrer\">github.com/coleifer/peewee/blob/master/peewee.py#L5352</a>. It looks like the metaclass of <code>pw.Model</code> removes <code>Meta</code> from the dict used to construct the class."}], "tags": [], "owner": {"reputation": 3919, "user_id": 9794932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c604d07b333e9e546b495273a179cd53?s=128&d=identicon&r=PG&f=1", "display_name": "Rob Bricheno", "link": "https://stackoverflow.com/users/9794932/rob-bricheno"}, "is_accepted": false, "score": 0, "last_activity_date": 1544047813, "creation_date": 1544047813, "answer_id": 53641520, "question_id": 53641180, "link": "https://stackoverflow.com/questions/53641180/access-peewees-meta-subclass-in-models-outer-class-method/53641520#53641520", "title": "Access peewee&#39;s Meta subclass in Model&#39;s outer class method", "body": "<p>I don't know exactly why you are having this problem, and I'd be interested in the full answer.</p>\n\n<p>The problem is with the name <code>Meta</code>. I'm guessing there's something by that name defined in <code>pw.Model</code> but I haven't been through it all yet.</p>\n\n<p>That said, this (for example) works:</p>\n\n<pre><code>import peewee as pw\nclass BaseModel(pw.Model):\n    class MyMeta:\n        database = pw.Proxy()\n\n    @classmethod\n    def configure_proxy(cls, database: pw.Database):\n        cls.MyMeta.database.initialize(database)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19577, "user_id": 254346, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/ebd1c4256c1ece3469d2ccf3031cb6c5?s=128&d=identicon&r=PG", "display_name": "coleifer", "link": "https://stackoverflow.com/users/254346/coleifer"}, "is_accepted": true, "score": 1, "last_activity_date": 1544124130, "creation_date": 1544124130, "answer_id": 53658282, "question_id": 53641180, "link": "https://stackoverflow.com/questions/53641180/access-peewees-meta-subclass-in-models-outer-class-method/53658282#53658282", "title": "Access peewee&#39;s Meta subclass in Model&#39;s outer class method", "body": "<p>Peewee transforms the inner \"Meta\" class into an object accessible at \"ModelClass._meta\" after the class is constructed:</p>\n\n<p>Change \".Meta\" to \"._meta\":</p>\n\n<pre><code>class BaseModel(pw.Model):\n    class Meta:\n        database = pw.Proxy()\n\n    @classmethod\n    def configure_proxy(cls, database: pw.Database):\n        cls._meta.database.initialize(database)\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 8417855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4ef9cced573f5608b1c0c58498f5d0c?s=128&d=identicon&r=PG&f=1", "display_name": "subli", "link": "https://stackoverflow.com/users/8417855/subli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 53658282, "answer_count": 2, "score": 1, "last_activity_date": 1544187518, "creation_date": 1544046188, "last_edit_date": 1544187518, "question_id": 53641180, "link": "https://stackoverflow.com/questions/53641180/access-peewees-meta-subclass-in-models-outer-class-method", "title": "Access peewee&#39;s Meta subclass in Model&#39;s outer class method", "body": "<p>I'm trying to wrap peewee models and classes into other interface and i want to dynamically assign model to database. I'm using peewee.Proxy class for this, but i don't want to use global variable for making initialization of this proxy available. I wanted to make class method for changing Meta (inner) class of base model, but i get following error:</p>\n\n<pre><code>AttributeError: type object 'BaseModel' has no attribute 'Meta'\n</code></pre>\n\n<p>Code that i have:</p>\n\n<pre><code>import peewee as pw\nclass BaseModel(pw.Model):\n    class Meta:\n        database = pw.Proxy()\n\n    @classmethod\n    def configure_proxy(cls, database: pw.Database):\n        cls.Meta.database.initialize(database)\n</code></pre>\n\n<p>Of course i could access this variable by calling BaseModel.Meta.database but it is less intuitive in my opinion.</p>\n\n<p>Have you got any suggestions?</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "edited": false, "score": 1, "creation_date": 1544046219, "post_id": 53641151, "comment_id": 94141956, "body": "I think your <code>hstack</code> lines should be of the form <code>np.hstack((A, np.zeros((A.shape[0], B.shape[1] - A.shape[1]))))</code>. You seem to have the rows and columns swapped."}, {"owner": {"reputation": 1004, "user_id": 3691040, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/518938941/picture?type=large", "display_name": "Joe Healey", "link": "https://stackoverflow.com/users/3691040/joe-healey"}, "reply_to_user": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "edited": false, "score": 0, "creation_date": 1544047548, "post_id": 53641151, "comment_id": 94142423, "body": "Oh that was it! I knew it would be something stupid like this. Feel free to move this to an answer."}, {"owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "edited": false, "score": 0, "creation_date": 1544107043, "post_id": 53641151, "comment_id": 94165891, "body": "Done! And I&#39;m glad it helped."}], "answers": [{"tags": [], "owner": {"reputation": 3329, "user_id": 6814154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e235219baaddb83f38d12e6665fbc?s=128&d=identicon&r=PG&f=1", "display_name": "Khalil Al Hooti", "link": "https://stackoverflow.com/users/6814154/khalil-al-hooti"}, "is_accepted": false, "score": 0, "last_activity_date": 1544046700, "creation_date": 1544046700, "answer_id": 53641297, "question_id": 53641151, "link": "https://stackoverflow.com/questions/53641151/coercing-numpy-arrays-to-same-dimensions/53641297#53641297", "title": "Coercing numpy arrays to same dimensions", "body": "<p>Try <code>b[:a.shape[0], :a.shape[1]] = b[:a.shape[0], :a.shape[1]]+a</code> where b the larger array</p>\n\n<p>Example below</p>\n\n<pre><code>import numpy as np\n\na = np.arange(12).reshape(3, 4)\n\nprint(\"a\\n\", a)\n\nb = np.arange(16).reshape(4, 4)\n\nprint(\"b original\\n\", b)\n\nb[:a.shape[0], :a.shape[1]] = b[:a.shape[0], :a.shape[1]]+a\n\n\nprint(\"b new\\n\",b)\n</code></pre>\n\n<p>output</p>\n\n<pre><code>a\n [[ 0  1  2  3]\n [ 4  5  6  7]\n [ 8  9 10 11]]\nb original\n [[ 0  1  2  3]\n [ 4  5  6  7]\n [ 8  9 10 11]\n [12 13 14 15]]\nb new\n [[ 0  2  4  6]\n [ 8 10 12 14]\n [16 18 20 22]\n [12 13 14 15]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 450, "user_id": 9873654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/se9mk.png?s=128&g=1", "display_name": "SalvadorViramontes", "link": "https://stackoverflow.com/users/9873654/salvadorviramontes"}, "is_accepted": false, "score": 1, "last_activity_date": 1544047191, "creation_date": 1544047191, "answer_id": 53641408, "question_id": 53641151, "link": "https://stackoverflow.com/questions/53641151/coercing-numpy-arrays-to-same-dimensions/53641408#53641408", "title": "Coercing numpy arrays to same dimensions", "body": "<p>Yes, indeed. You should swap (B.shape[1] - A.shape[1], A.shape[0]) to (A.shape[0], B.shape[1] - A.shape[1]) and so on, because you need to have the same numbers of rows to stack them horizontally.</p>\n"}, {"comments": [{"owner": {"reputation": 1004, "user_id": 3691040, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/518938941/picture?type=large", "display_name": "Joe Healey", "link": "https://stackoverflow.com/users/3691040/joe-healey"}, "edited": false, "score": 0, "creation_date": 1544047760, "post_id": 53641409, "comment_id": 94142485, "body": "Jeez... I searched google God knows how many times for variations of &quot;padding numpy matrices&quot; and never turned up <code>np.pad</code> but knew something like that must exist. So to make it relative (since the dims can change) <code>(0,2)</code> should become something like <code>(0, A.shape[0] - B.shape[0])</code>?"}], "tags": [], "owner": {"reputation": 16399, "user_id": 4016285, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SvSVV.png?s=128&g=1", "display_name": "B. M.", "link": "https://stackoverflow.com/users/4016285/b-m"}, "is_accepted": false, "score": 2, "last_activity_date": 1544077126, "last_edit_date": 1544077126, "creation_date": 1544047192, "answer_id": 53641409, "question_id": 53641151, "link": "https://stackoverflow.com/questions/53641151/coercing-numpy-arrays-to-same-dimensions/53641409#53641409", "title": "Coercing numpy arrays to same dimensions", "body": "<p>Just use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.pad.html\" rel=\"nofollow noreferrer\"><code>np.pad</code></a> :</p>\n\n<pre><code>np.pad(A,((0,2),(0,3)),'constant') # 2 is 5-3, 3 is 10-7\n\n[[0 1 1 0 1 0 0 0 0 0]\n [1 0 0 1 0 1 0 0 0 0]\n [1 0 1 0 0 0 0 0 0 0]\n [0 0 0 0 0 0 0 0 0 0]\n [0 0 0 0 0 0 0 0 0 0]]\n</code></pre>\n\n<p>But  the 4 pads width must be computed; so an another simple \n method to pad the 2 array in any case is :</p>\n\n<pre><code>A = np.ones((3, 7),int)\nB = np.ones((5, 2),int)\n\nma,na = A.shape\nmb,nb = B.shape\nm,n = max(ma,mb) , max(na,nb)\n\nnewA = np.zeros((m,n),A.dtype)\nnewA[:ma,:na]=A\n\nnewB = np.zeros((m,n),B.dtype)\nnewB[:mb,:nb]=B\n</code></pre>\n\n<p>For :</p>\n\n<pre><code>[[1 1 1 1 1 1 1]\n [1 1 1 1 1 1 1]\n [1 1 1 1 1 1 1]\n [0 0 0 0 0 0 0]\n [0 0 0 0 0 0 0]] \n\n[[1 1 0 0 0 0 0]\n [1 1 0 0 0 0 0]\n [1 1 0 0 0 0 0]\n [1 1 0 0 0 0 0]\n [1 1 0 0 0 0 0]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1004, "user_id": 3691040, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/518938941/picture?type=large", "display_name": "Joe Healey", "link": "https://stackoverflow.com/users/3691040/joe-healey"}, "edited": false, "score": 0, "creation_date": 1544108371, "post_id": 53653735, "comment_id": 94166797, "body": "I\u2019ve accepted this as it answered the question as posed,but I do like the <code>np.pad()</code> solution too."}], "tags": [], "owner": {"reputation": 10237, "user_id": 2464597, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/12eaebfe8c9ae6c3a29aefe69ebcb4bd?s=128&d=identicon&r=PG", "display_name": "Engineero", "link": "https://stackoverflow.com/users/2464597/engineero"}, "is_accepted": true, "score": 1, "last_activity_date": 1544107020, "creation_date": 1544107020, "answer_id": 53653735, "question_id": 53641151, "link": "https://stackoverflow.com/questions/53641151/coercing-numpy-arrays-to-same-dimensions/53653735#53653735", "title": "Coercing numpy arrays to same dimensions", "body": "<p>I think your <code>hstack</code> lines should be of the form</p>\n\n<pre><code>np.hstack((A, np.zeros((A.shape[0], B.shape[1] - A.shape[1]))))\n</code></pre>\n\n<p>You seem to have the rows and columns swapped.</p>\n"}], "owner": {"reputation": 1004, "user_id": 3691040, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/518938941/picture?type=large", "display_name": "Joe Healey", "link": "https://stackoverflow.com/users/3691040/joe-healey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 53653735, "answer_count": 4, "score": 1, "last_activity_date": 1544107020, "creation_date": 1544045981, "question_id": 53641151, "link": "https://stackoverflow.com/questions/53641151/coercing-numpy-arrays-to-same-dimensions", "title": "Coercing numpy arrays to same dimensions", "body": "<p>I have 2 matrices, and I want to perform a 'cell-wise' addition, however the matrices aren't the same size. I want to <em>preserve the cells relative positions</em> during the calculation (i.e. their 'co-ordinates' from the top left), so a simple (if maybe not the best) solution, seems to be to pad the smaller matrix's x and y with zeros.</p>\n\n<p><a href=\"https://stackoverflow.com/a/30244726/3691040\">This thread</a> has a perfectly satisfactory answer for concatenating vertically, and this does work with my data, and following the suggestion in the answer, I also threw in the <code>hstack</code> but at the moment, it's complaining that the dimensions (excluding concatenation axis) need to match exactly. Perhaps hstack doesnt work as I anticipate or exactly equivalently to vstack, but I'm at a bit of a loss now.</p>\n\n<p>This is what <code>hstack</code> throws at me, meanwhile  <code>vstack</code> seems to have no problem.</p>\n\n<pre><code>ValueError: all the input array dimensions except for the concatenation axis must match exactly\n</code></pre>\n\n<p>Essentially the code checks which of a pair of matrices is the shorter and/or wider, and then pads the smaller matrix with zeros to match.</p>\n\n<p>Here's the code I have:</p>\n\n<pre><code>import numpy as np\nA = np.random.randint(2, size = (3, 7))\nB = np.random.randint(2, size = (5, 10))\n\n\n# If the arrays have different row numbers:\nif A.shape[0] &lt; B.shape[0]:                      # Is A shorter than B?\n    A = np.vstack((A, np.zeros((B.shape[0] - A.shape[0], A.shape[1]))))\nelif A.shape[0] &gt; B.shape[0]:                    # or is A longer than B?\n    B = np.vstack((B, np.zeros((A.shape[0] - B.shape[0], B.shape[1]))))\n\n# If they have different column numbers\nif A.shape[1] &lt; B.shape[1]:                      # Is A narrower than B?\n    A = np.hstack((A, np.zeros((B.shape[1] - A.shape[1], A.shape[0]))))\nelif A.shape[1] &gt; B.shape[1]:                    # or is A wider than B?\n    B = np.hstack((B, np.zeros((A.shape[1] - B.shape[1], B.shape[0]))))\n</code></pre>\n\n<p>It's getting late so its possible I've just missed something obvious  with <code>hstack</code> but I can't see my logic error at the moment.</p>\n"}, {"tags": ["python", "python-2.7", "unit-testing", "user-interface", "tkinter"], "comments": [{"owner": {"reputation": 4528, "user_id": 3386310, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MnYbO.jpg?s=128&g=1", "display_name": "Taher Ahmed Ghaleb", "link": "https://stackoverflow.com/users/3386310/taher-ahmed-ghaleb"}, "edited": false, "score": 0, "creation_date": 1544312217, "post_id": 53641112, "comment_id": 94232648, "body": "Can&#39;t you check the <code>state()</code> of the window?"}, {"owner": {"reputation": 1373, "user_id": 3981290, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aCFOr.png?s=128&g=1", "display_name": "Michael G", "link": "https://stackoverflow.com/users/3981290/michael-g"}, "reply_to_user": {"reputation": 4528, "user_id": 3386310, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MnYbO.jpg?s=128&g=1", "display_name": "Taher Ahmed Ghaleb", "link": "https://stackoverflow.com/users/3386310/taher-ahmed-ghaleb"}, "edited": false, "score": 0, "creation_date": 1544436282, "post_id": 53641112, "comment_id": 94261340, "body": "@TeeKea Can you explain this further? I am unaware of the function <code>state</code> and cannot seem to find any info on it: <code>&gt;&gt;&gt; import tkinter   &gt;&gt;&gt; help(&quot;state&quot;)   no Python documentation found for &#39;state&#39;</code>"}, {"owner": {"reputation": 4528, "user_id": 3386310, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/MnYbO.jpg?s=128&g=1", "display_name": "Taher Ahmed Ghaleb", "link": "https://stackoverflow.com/users/3386310/taher-ahmed-ghaleb"}, "edited": false, "score": 0, "creation_date": 1544450404, "post_id": 53641112, "comment_id": 94268946, "body": "Please have a look at the following link. I guess you can check if the is <code>state()</code> is <code>&#39;normal</code>. Can you show some of your code you used for creating the top level window?&#39; <a href=\"http://effbot.org/tkinterbook/wm.htm#Tkinter.Wm.state-method\" rel=\"nofollow noreferrer\">effbot.org/tkinterbook/wm.htm#Tkinter.Wm.state-method</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7744776"}, "edited": false, "score": 0, "creation_date": 1544607941, "post_id": 53641112, "comment_id": 94332921, "body": "what does your start_GUI() function do? does it create an object? if so: why not test the type of the object, if it&#39;s a &lt;class &#39;tkinter.Tk&#39;&gt; then you know it started a tk window at the very least. for example, typing following command in a python interpreter window will output above mentioned result.: &quot;import tkinter as tk; root=tk.Tk(); type(root)&quot;"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7744776"}, "edited": false, "score": 0, "creation_date": 1544608482, "post_id": 53641112, "comment_id": 94333211, "body": "above comment was getting bulky: in suggested command I implicitly created the root object as a tkinter window, then called type() to confirm the type of my root object. if your function creates a tkinter window as an object, you should be able to check it&#39;s type, confirming it was created."}], "answers": [{"comments": [{"owner": {"reputation": 1373, "user_id": 3981290, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aCFOr.png?s=128&g=1", "display_name": "Michael G", "link": "https://stackoverflow.com/users/3981290/michael-g"}, "edited": false, "score": 1, "creation_date": 1544818992, "post_id": 53754522, "comment_id": 94424381, "body": "Thanks for this sophisticated answer. I will need some time to understand it all."}], "tags": [], "owner": {"reputation": 9307, "user_id": 705086, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbeee3d76a35f9de8847f36ee51c28a2?s=128&d=identicon&r=PG", "display_name": "Dima Tisnek", "link": "https://stackoverflow.com/users/705086/dima-tisnek"}, "is_accepted": true, "score": 3, "last_activity_date": 1544670862, "creation_date": 1544670862, "answer_id": 53754522, "question_id": 53641112, "link": "https://stackoverflow.com/questions/53641112/unittest-for-invoking-a-tkinter-gui/53754522#53754522", "title": "Unittest for invoking a TKinter GUI", "body": "<p>It can be argued that you'd need a <strong>functional</strong> test rather than a <strong>unit</strong> test, but let's try this anyway!</p>\n\n<p>While it's possible to test launch script as is via <code>exec()</code>, it's considered bad practice. Let's refactor it:</p>\n\n<pre><code>def main():\n    import sys, os\n    sys.path.append(os.path.join(os.path.dirname(__file__), '..', 'MyPackage'))\n    import TkOps\n    TkOps.start_GUI()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>Then let's establish what the unit test should test, for example:</p>\n\n<ul>\n<li><code>sys.path</code> is updated with the correct path for <code>MyPackage</code></li>\n<li><code>start_GUI</code> is called</li>\n</ul>\n\n<p>Then a <strong>mokist</strong> [1] unit test could look like this:</p>\n\n<pre><code>@mock.patch(\"sys.path\", copy.copy(sys.path))\n@mock.patch.dict(sys.modules, TkOps=mock.MagicMock())\ndef test_main():\n    main()\n    # minimal validation of sys.path side effect\n    # ideally this would check that path bit points to real directory\n    assert any(p.endswith(\"/MyPackage\") for p in sys.path)\n    # validation of expected call\n    assert sys.modules[\"TkOps\"].start_GUI.called\n</code></pre>\n\n<p>A <strong>classical</strong> unit test would require an escape hatch in the GUI, for example:</p>\n\n<pre><code>def start_GUI(dry_run=False):\n    import tk\n    ...\n    if not dry_run: tk.foobar()\n</code></pre>\n\n<p>[1] <a href=\"https://agilewarrior.wordpress.com/2015/04/18/classical-vs-mockist-testing/\" rel=\"nofollow noreferrer\">https://agilewarrior.wordpress.com/2015/04/18/classical-vs-mockist-testing/</a></p>\n"}], "owner": {"reputation": 1373, "user_id": 3981290, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/aCFOr.png?s=128&g=1", "display_name": "Michael G", "link": "https://stackoverflow.com/users/3981290/michael-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 905, "favorite_count": 0, "accepted_answer_id": 53754522, "answer_count": 1, "score": 6, "last_activity_date": 1544670862, "creation_date": 1544045756, "last_edit_date": 1544090208, "question_id": 53641112, "link": "https://stackoverflow.com/questions/53641112/unittest-for-invoking-a-tkinter-gui", "title": "Unittest for invoking a TKinter GUI", "body": "<p>Assume a script that initiates a TKinter GUI (e.g., <code>scripts/launch_GUI.py</code>) and is part of a PyPI package (e.g., <code>MyPackage</code>).</p>\n\n<pre><code>.\n\u251c\u2500\u2500 appveyor.yml\n\u251c\u2500\u2500 MyPackage\n\u2502   \u251c\u2500\u2500 TkOps.py\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 CoreFunctions.py\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 requirements.txt\n\u251c\u2500\u2500 scripts\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 launch_CLI.py\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 launch_GUI.py\n\u251c\u2500\u2500 setup.py\n\u2514\u2500\u2500 tests\n    \u2514\u2500\u2500 MyPackage_test.py\n</code></pre>\n\n<p>The launch script is very minimalistic:</p>\n\n<pre><code>#!/usr/bin/env python2\nif __name__ == '__main__':\n    import sys, os\n    sys.path.append(os.path.join(os.path.dirname(__file__), '..', 'MyPackage'))\n    import TkOps\n    TkOps.start_GUI()\n</code></pre>\n\n<p>What <em>unittest</em> would you recommend to evaluate if the TKinter GUI is properly started upon initiating <code>launch_GUI.py</code>? </p>\n\n<p><strong>Note</strong>: I only wish to evaluate if the launch script does its work and launches the GUI, not if a user can interact with the GUI.</p>\n"}, {"tags": ["python", "selenium", "threadpool", "threadpoolexecutor", "urllib3"], "answers": [{"comments": [{"owner": {"reputation": 2610, "user_id": 1935987, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5eff26f68653c98d8b443b107c7de43b?s=128&d=identicon&r=PG", "display_name": "user1935987", "link": "https://stackoverflow.com/users/1935987/user1935987"}, "edited": false, "score": 0, "creation_date": 1544099072, "post_id": 53644606, "comment_id": 94160814, "body": "I don&#39;t really think the problem here is with the executor itself. Reason - i&#39;ve just tried another approach with instantiating a <code>webdriver</code> in the same class as <code>ThreadPoolExecutor</code> and it is working."}], "tags": [], "owner": {"reputation": 15697, "user_id": 458214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef09f4a6e7e0803825d17212d2dba67?s=128&d=identicon&r=PG", "display_name": "ewwink", "link": "https://stackoverflow.com/users/458214/ewwink"}, "is_accepted": false, "score": 0, "last_activity_date": 1544069903, "creation_date": 1544069903, "answer_id": 53644606, "question_id": 53641068, "link": "https://stackoverflow.com/questions/53641068/connection-pool-is-full-discarding-connection-with-threadpoolexecutor-and-multi/53644606#53644606", "title": "Connection pool is full, discarding connection with ThreadPoolExecutor and multiple headless browsers through Selenium and Python", "body": "<p>please see your error</p>\n\n<pre><code>ProtocolError('Connection aborted.', \n  RemoteDisconnected('Remote end closed connection without response',))\n\n'NewConnectionError('&lt;urllib3.connection.HTTPConnection object at &gt;: \n   Failed to establish a new connection: [Errno 111] Connection refused',)':\n</code></pre>\n\n<p>The error come because you are doing multiple connection too fast, it can be server down or server block your request. </p>\n"}, {"comments": [{"owner": {"reputation": 2610, "user_id": 1935987, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5eff26f68653c98d8b443b107c7de43b?s=128&d=identicon&r=PG", "display_name": "user1935987", "link": "https://stackoverflow.com/users/1935987/user1935987"}, "edited": false, "score": 0, "creation_date": 1544098730, "post_id": 53647709, "comment_id": 94160609, "body": "Hi! Thanks for a detailed response. However if look at my post again - i tried to submit a single instance and the outcome is the same. In addition - even if i submit more instances than <code>max_workers</code> parameter limit, <code>ThreadPoolExecutor</code> suppose to process it is as a queue with the <code>max_workers</code> number of instances executing simultaneously."}, {"owner": {"reputation": 2610, "user_id": 1935987, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5eff26f68653c98d8b443b107c7de43b?s=128&d=identicon&r=PG", "display_name": "user1935987", "link": "https://stackoverflow.com/users/1935987/user1935987"}, "edited": false, "score": 0, "creation_date": 1544099570, "post_id": 53647709, "comment_id": 94161116, "body": "Updated the question"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 2610, "user_id": 1935987, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5eff26f68653c98d8b443b107c7de43b?s=128&d=identicon&r=PG", "display_name": "user1935987", "link": "https://stackoverflow.com/users/1935987/user1935987"}, "edited": false, "score": 0, "creation_date": 1544107047, "post_id": 53647709, "comment_id": 94165893, "body": "@user1935987 I have added an answer update. Let me know the status."}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 3, "last_activity_date": 1544106845, "last_edit_date": 1544106845, "creation_date": 1544086504, "answer_id": 53647709, "question_id": 53641068, "link": "https://stackoverflow.com/questions/53641068/connection-pool-is-full-discarding-connection-with-threadpoolexecutor-and-multi/53647709#53647709", "title": "Connection pool is full, discarding connection with ThreadPoolExecutor and multiple headless browsers through Selenium and Python", "body": "<p>This error message...</p>\n\n<pre><code>WARNING|05/Dec/2018 17:33:11|connectionpool|_put_conn|274|Connection pool is full, discarding connection: 127.0.0.1\nWARNING|05/Dec/2018 17:33:11|connectionpool|urlopen|662|Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ProtocolError('Connection aborted.', RemoteDisconnected('Remote end closed connection without response',))': /session/119df5b95710793a0421c13ec3a83847/url\nWARNING|05/Dec/2018 17:33:11|connectionpool|urlopen|662|Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('&lt;urllib3.connection.HTTPConnection object at 0x7fcee7ada048&gt;: Failed to establish a new connection: [Errno 111] Connection refused',)': /session/119df5b95710793a0421c13ec3a83847/url\n</code></pre>\n\n<p>...seems to be an issue in <code>urllib3</code>'s connection pooling which raised these <strong>WARNING</strong> while executing the <code>def _put_conn(self, conn)</code> method in <strong>connectionpool.py</strong>.</p>\n\n<pre><code>def _put_conn(self, conn):\n    \"\"\"\n    Put a connection back into the pool.\n\n    :param conn:\n        Connection object for the current host and port as returned by\n        :meth:`._new_conn` or :meth:`._get_conn`.\n\n    If the pool is already full, the connection is closed and discarded\n    because we exceeded maxsize. If connections are discarded frequently,\n    then maxsize should be increased.\n\n    If the pool is closed, then the connection will be closed and discarded.\n    \"\"\"\n    try:\n        self.pool.put(conn, block=False)\n        return  # Everything is dandy, done.\n    except AttributeError:\n        # self.pool is None.\n        pass\n    except queue.Full:\n        # This should never happen if self.block == True\n        log.warning(\n            \"Connection pool is full, discarding connection: %s\",\n            self.host)\n\n    # Connection never got put back into the pool, close it.\n    if conn:\n        conn.close()\n</code></pre>\n\n<hr>\n\n<h2><a href=\"https://docs.python.org/3/library/concurrent.futures.html\" rel=\"nofollow noreferrer\">ThreadPoolExecutor</a></h2>\n\n<p><a href=\"https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.ThreadPoolExecutor\" rel=\"nofollow noreferrer\">ThreadPoolExecutor</a> is an <a href=\"https://docs.python.org/3/library/concurrent.futures.html#concurrent.futures.Executor\" rel=\"nofollow noreferrer\">Executor</a> subclass that uses a pool of threads to execute calls asynchronously. Deadlocks can occur when the callable associated with a Future waits on the results of another Future.</p>\n\n<pre><code>class concurrent.futures.ThreadPoolExecutor(max_workers=None, thread_name_prefix='', initializer=None, initargs=())\n</code></pre>\n\n<ul>\n<li>An Executor subclass that uses a pool of at most max_workers threads to execute calls asynchronously.</li>\n<li>initializer is an optional callable that is called at the start of each worker thread; initargs is a tuple of arguments passed to the initializer. Should initializer raise an exception, all currently pending jobs will raise a BrokenThreadPool, as well as any attempt to submit more jobs to the pool.</li>\n<li>From version 3.5 onwards: If max_workers is None or not given, it will default to the number of processors on the machine, multiplied by 5, assuming that ThreadPoolExecutor is often used to overlap I/O instead of CPU work and the number of workers should be higher than the number of workers for ProcessPoolExecutor.</li>\n<li>From version 3.6 onwards: The thread_name_prefix argument was added to allow users to control the threading.Thread names for worker threads created by the pool for easier debugging.</li>\n<li>From version 3.7: Added the initializer and initargs arguments.</li>\n</ul>\n\n<p>As per your question as you are trying to launch 10-20 instances the <em>default connection pool size</em> of <strong>10</strong> seems not to be enough in your case which is hardcoded in <a href=\"https://github.com/requests/requests/blob/master/requests/adapters.py\" rel=\"nofollow noreferrer\"><strong>adapters.py</strong></a>. </p>\n\n<p>Moreover, @EdLeafe in the discussion <a href=\"https://github.com/pycontribs/pyrax/issues/378#issuecomment-44694033\" rel=\"nofollow noreferrer\">Getting error: Connection pool is full, discarding connection</a> mentions:</p>\n\n<blockquote>\n  <p>It looks like within the requests code, None objects are normal. If <code>_get_conn()</code> gets <strong>None</strong> from the pool, it simply creates a new connection. It seems odd, though, that it should start with all those None objects, and that _put_conn() isn't smart enough to replace None with the connection.</p>\n</blockquote>\n\n<p>However the merge <a href=\"https://github.com/influxdata/influxdb-python/pull/534\" rel=\"nofollow noreferrer\">Add pool size parameter to client constructor</a> have fixed this issue. </p>\n\n<h2>Solution</h2>\n\n<p>Increasing the <em>default connection pool size</em> of <strong>10</strong> which was earlier hardcoded in <a href=\"https://github.com/requests/requests/blob/master/requests/adapters.py\" rel=\"nofollow noreferrer\"><strong>adapters.py</strong></a> and now configurable will solve your issue.</p>\n\n<hr>\n\n<h2>Update</h2>\n\n<p>As per your comment update <em>...submit a single instance and the outcome is the same...</em>. as per @meferguson84 within the discussion <a href=\"https://github.com/pycontribs/pyrax/issues/378#issuecomment-44678896\" rel=\"nofollow noreferrer\">Getting error: Connection pool is full, discarding connection</a>:</p>\n\n<blockquote>\n  <p>I stepped into the code to the point where it mounts the adapter just to play with the pool size and see if it made a difference. What I found was that the queue is full of NoneType objects with the actual upload connection being the last item in the list. The list is 10 items long (which makes sense). What doesn't make sense is that the unfinished_tasks parameter for the pool is 11. How can this be when the queue itself is only 11 items? Also, is it normal for the queue to be full of NoneType objects with the connection we are using being the last item on the list?</p>\n</blockquote>\n\n<p>That sounds like a possible cause in your <em>usecase</em> as well. It may sound redundant but you may still perform a couple of ad-hoc steps as follows:</p>\n\n<ul>\n<li><em>Clean</em> your <em>Project Workspace</em> through your <em>IDE</em> and <em>Rebuild</em> your project with required dependencies only.</li>\n<li>(<em>WindowsOS only</em>) Use <a href=\"https://www.ccleaner.com/ccleaner\" rel=\"nofollow noreferrer\"><em>CCleaner</em></a> tool to wipe off all the OS chores before and after the execution of your <em>Test Suite</em>.</li>\n<li>(<em>LinuxOS only</em>) <a href=\"http://www.yourownlinux.com/2013/10/how-to-free-up-release-unused-cached-memory-in-linux.html\" rel=\"nofollow noreferrer\">Free Up and Release the Unused/Cached Memory in Ubuntu/Linux Mint</a> before and after the execution of your <em>Test Suite</em>.</li>\n</ul>\n"}], "owner": {"reputation": 2610, "user_id": 1935987, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/5eff26f68653c98d8b443b107c7de43b?s=128&d=identicon&r=PG", "display_name": "user1935987", "link": "https://stackoverflow.com/users/1935987/user1935987"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8959, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1544106845, "creation_date": 1544045490, "last_edit_date": 1544099544, "question_id": 53641068, "link": "https://stackoverflow.com/questions/53641068/connection-pool-is-full-discarding-connection-with-threadpoolexecutor-and-multi", "title": "Connection pool is full, discarding connection with ThreadPoolExecutor and multiple headless browsers through Selenium and Python", "body": "<p>I'm writing some automation software using <code>selenium==3.141.0</code>, <code>python 3.6.7</code>, <code>chromedriver 2.44</code>.</p>\n\n<p>Most of the the logic is ok to be executed by the single browser instance, but for some part i have to launch 10-20 instances to have a decent execution speed.</p>\n\n<p>Once it comes to the part which is executed by <code>ThreadPoolExecutor</code>, browser interactions start throwing this error:</p>\n\n<pre><code>WARNING|05/Dec/2018 17:33:11|connectionpool|_put_conn|274|Connection pool is full, discarding connection: 127.0.0.1\nWARNING|05/Dec/2018 17:33:11|connectionpool|urlopen|662|Retrying (Retry(total=2, connect=None, read=None, redirect=None, status=None)) after connection broken by 'ProtocolError('Connection aborted.', RemoteDisconnected('Remote end closed connection without response',))': /session/119df5b95710793a0421c13ec3a83847/url\nWARNING|05/Dec/2018 17:33:11|connectionpool|urlopen|662|Retrying (Retry(total=1, connect=None, read=None, redirect=None, status=None)) after connection broken by 'NewConnectionError('&lt;urllib3.connection.HTTPConnection object at 0x7fcee7ada048&gt;: Failed to establish a new connection: [Errno 111] Connection refused',)': /session/119df5b95710793a0421c13ec3a83847/url\n</code></pre>\n\n<p><strong>browser setup:</strong></p>\n\n<pre><code>def init_chromedriver(cls):\n    try:\n        chrome_options = webdriver.ChromeOptions()\n        chrome_options.add_argument('--headless')\n        chrome_options.add_argument(f\"user-agent={Utils.get_random_browser_agent()}\")\n        prefs = {\"profile.managed_default_content_settings.images\": 2}\n        chrome_options.add_experimental_option(\"prefs\", prefs)\n\n        driver = webdriver.Chrome(driver_paths['chrome'],\n                                       chrome_options=chrome_options,\n                                       service_args=['--verbose', f'--log-path={bundle_dir}/selenium/chromedriver.log'])\n        driver.implicitly_wait(10)\n\n        return driver\n    except Exception as e:\n        logger.error(e)\n</code></pre>\n\n<p><strong>relevant code:</strong></p>\n\n<p><code>ProfileParser</code> instantiates a webdriver and execute a few page interactions. I suppose the interactions themselves are not relevant because everything works without <code>ThreadPoolExecutor</code>.\nHowever, in short:</p>\n\n<pre><code>class ProfileParser(object):\n    def __init__(self, acc):\n        self.driver = Utils.init_chromedriver()\n    def __exit__(self, exc_type, exc_val, exc_tb):\n        Utils.shutdown_chromedriver(self.driver)\n        self.driver = None\n\n    collect_user_info(post_url)\n           self.driver.get(post_url)\n           profile_url = self.driver.find_element_by_xpath('xpath_here')]').get_attribute('href')\n</code></pre>\n\n<p>While runs in <code>ThreadPoolExecutor</code>, the error above appears at this point <code>self.driver.find_element_by_xpath</code> or at <code>self.driver.get</code></p>\n\n<p><strong>this is working:</strong></p>\n\n<pre><code>with ProfileParser(acc) as pparser:\n        pparser.collect_user_info(posts[0])\n</code></pre>\n\n<p><strong>these options are not working:</strong> (<code>connectionpool errors</code>)</p>\n\n<pre><code>futures = []\n#one worker, one future\nwith ThreadPoolExecutor(max_workers=1) as executor:\n        with ProfileParser(acc) as pparser:\n            futures.append(executor.submit(pparser.collect_user_info, posts[0]))\n\n#10 workers, multiple futures\nwith ThreadPoolExecutor(max_workers=10) as executor:\n    for p in posts:\n        with ProfileParser(acc) as pparser:\n            futures.append(executor.submit(pparser.collect_user_info, p))\n</code></pre>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I found a temporal solution (which does not invalidate this initial question) - to instantiate a <code>webdriver</code> outside of <code>ProfileParser</code> class. Don't know why it works but the initial does not. I suppose the cause in some language specifics?\nThanks for answers, however it doesn't seem like the problem is with the <code>ThreadPoolExecutor</code> <code>max_workers</code> limit - as you see in one of the options i tried to submit a single instance and it is still didn't work.</p>\n\n<p>current workaround:</p>\n\n<pre><code>futures = []\nwith ThreadPoolExecutor(max_workers=10) as executor:\n    for p in posts:\n        driver = Utils.init_chromedriver()\n        futures.append({\n            'future': executor.submit(collect_user_info, driver, acc, p),\n            'driver': driver\n        })\n\nfor f in futures:\n    f['future'].done()\n    Utils.shutdown_chromedriver(f['driver'])\n</code></pre>\n"}, {"tags": ["python", "bash", "virtualenv"], "comments": [{"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 3, "creation_date": 1544047441, "post_id": 53641055, "comment_id": 94142385, "body": "Ignoring whatever problem is causing those errors, why do you need to source <code>.bashrc</code> in the first place? It was already sourced when you started your interactive shell, and if there&#39;s something in there you need for a <i>noninteractive</i> shell, then you should move that somewhere else."}, {"owner": {"reputation": 27241, "user_id": 5320906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NOdNo.jpg?s=128&g=1", "display_name": "snakecharmerb", "link": "https://stackoverflow.com/users/5320906/snakecharmerb"}, "edited": false, "score": 0, "creation_date": 1544298055, "post_id": 53641055, "comment_id": 94229007, "body": "Possibly related <a href=\"https://askubuntu.com/a/186817\">askubuntu.com/a/186817</a>"}], "owner": {"reputation": 170, "user_id": 10725316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64ba8ae36ec84483dfa15f18164d1a7b?s=128&d=identicon&r=PG&f=1", "display_name": "parvaneh", "link": "https://stackoverflow.com/users/10725316/parvaneh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 181, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544045385, "creation_date": 1544045385, "question_id": 53641055, "link": "https://stackoverflow.com/questions/53641055/error-in-source-bashrc-for-activating-virtual-env", "title": "Error in source bashrc for activating virtual env", "body": "<p>I want to activate my python virtual_env created by conda. So, I need these three commands: </p>\n\n<pre><code>source ~/.bashrc\nexport PATH=~/anaconda3/bin:$PATH\nsource activate my_env\n</code></pre>\n\n<p>but with source ~/.bashrc I get the following errors:</p>\n\n<pre><code>bash: groups: command not found\nbash: awk: command not found\nbash: whoami: command not found\n</code></pre>\n\n<p>what is the solution?</p>\n"}, {"tags": ["python", "python-3.x", "alias", "python-import", "standards"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1544045418, "post_id": 53641032, "comment_id": 94141626, "body": "what about <code>import os as o</code> ? this is a personal coding style. There are no guidelines about <i>that</i>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1544050604, "post_id": 53641032, "comment_id": 94143459, "body": "I&#39;ve never seen <code>import math as m</code>. I would personally not use it ever. Single-letter module names are.... not good in my opinion."}, {"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 2, "creation_date": 1544050677, "post_id": 53641032, "comment_id": 94143480, "body": "The one I find most helpful is <code>import datetime as dt</code> since the module and the class both have the same name. <code>datetime.datetime</code> is too verbose."}, {"owner": {"reputation": 745, "user_id": 7470925, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YxVDude9eeE/AAAAAAAAAAI/AAAAAAAABTM/i60VX3LXLQQ/photo.jpg?sz=128", "display_name": "jeannej", "link": "https://stackoverflow.com/users/7470925/jeannej"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1544109572, "post_id": 53641032, "comment_id": 94167508, "body": "@juanpa.arrivillaga Yes that seemed a bit extreme. Yet it can be too long to keep <code>math</code> when there are a lot of trigonometry for instance. <code>math.sin</code>, <code>math.cos</code> and so on. Would you use <code>mt</code> instead ?"}, {"owner": {"reputation": 4763, "user_id": 2329988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9ab817073f9499496b464905713e6a3?s=128&d=identicon&r=PG", "display_name": "en_Knight", "link": "https://stackoverflow.com/users/2329988/en-knight"}, "edited": false, "score": 0, "creation_date": 1544133695, "post_id": 53641032, "comment_id": 94178928, "body": "@jeannej I think the math example is really trying to find the line between &quot;best practice&quot; and personal style, like what JFF was getting at. Personally, I don&#39;t think that &quot;math&quot; is too long to write, but I often also just &quot;from math import sin, cos&quot;. It&#39;s true those two have common collisions, but you just need other good practices in that case - if I&#39;m using numpy arrays, I won&#39;t import cos from math, I&#39;d just import it from numpy. IMO, you&#39;re trading a little readibility for typing speed if you do &quot;mt&quot; - I would be a tiny bit confused if I saw &quot;mt.cos&quot; somewhere"}], "answers": [{"comments": [{"owner": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1544050541, "post_id": 53641923, "comment_id": 94143435, "body": "<code>import numpy as np</code> abbreviates a PEP compatible short name, but seems to be common anyway."}, {"owner": {"reputation": 4763, "user_id": 2329988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9ab817073f9499496b464905713e6a3?s=128&d=identicon&r=PG", "display_name": "en_Knight", "link": "https://stackoverflow.com/users/2329988/en-knight"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1544050948, "post_id": 53641923, "comment_id": 94143573, "body": "@MarkRansom yup, and that one is definitely &quot;standard&quot; in some sense. Should I change some part of the answer to clarify that? I would consider numpy an exceptional (though certainly not unique) case, I wouldn&#39;t personally want to start extending that to the &quot;time&quot; module, &quot;os&quot; module, and other PEP-compliant ones, including similar numpy-stack family members like &quot;scipy&quot; and &quot;sympy&quot;."}, {"owner": {"reputation": 4763, "user_id": 2329988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9ab817073f9499496b464905713e6a3?s=128&d=identicon&r=PG", "display_name": "en_Knight", "link": "https://stackoverflow.com/users/2329988/en-knight"}, "reply_to_user": {"reputation": 269348, "user_id": 5987, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2a1f9f4986b58015691eb2014e78869f?s=128&d=identicon&r=PG", "display_name": "Mark Ransom", "link": "https://stackoverflow.com/users/5987/mark-ransom"}, "edited": false, "score": 0, "creation_date": 1544051026, "post_id": 53641923, "comment_id": 94143597, "body": "Okay, added what I think is a clarification in terms of numpy"}, {"owner": {"reputation": 745, "user_id": 7470925, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YxVDude9eeE/AAAAAAAAAAI/AAAAAAAABTM/i60VX3LXLQQ/photo.jpg?sz=128", "display_name": "jeannej", "link": "https://stackoverflow.com/users/7470925/jeannej"}, "edited": false, "score": 0, "creation_date": 1544109453, "post_id": 53641923, "comment_id": 94167431, "body": "@en_Knight thanks for this answer, I read it thouroughly and it was very interesting. I understand the &quot;coding style&quot; argument, but I still wish there was a list out there for the community. The PEP 8 link is very interesting, I didn&#39;t know standard library and related third party imports should be separated for clarity. What are the &quot;third-tier libraries&quot; you mentioned ? What are the differences with &quot;third-party libraries&quot; ?"}, {"owner": {"reputation": 4763, "user_id": 2329988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9ab817073f9499496b464905713e6a3?s=128&d=identicon&r=PG", "display_name": "en_Knight", "link": "https://stackoverflow.com/users/2329988/en-knight"}, "reply_to_user": {"reputation": 745, "user_id": 7470925, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YxVDude9eeE/AAAAAAAAAAI/AAAAAAAABTM/i60VX3LXLQQ/photo.jpg?sz=128", "display_name": "jeannej", "link": "https://stackoverflow.com/users/7470925/jeannej"}, "edited": false, "score": 1, "creation_date": 1544110734, "post_id": 53641923, "comment_id": 94168158, "body": "@jeannej glad you found it interesting :) Feel free to make a list (certainly don&#39;t let <i>me</i> stop you) - I would just recommend not making it on SO, since it doesn&#39;t seem like the right place to me (related): <a href=\"https://meta.stackexchange.com/questions/158809/why-are-shopping-list-questions-bad\" title=\"why are shopping list questions bad\">meta.stackexchange.com/questions/158809/&hellip;</a>). A personal blog or that reddit post I linked might be more appropriate, but up to you."}, {"owner": {"reputation": 4763, "user_id": 2329988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9ab817073f9499496b464905713e6a3?s=128&d=identicon&r=PG", "display_name": "en_Knight", "link": "https://stackoverflow.com/users/2329988/en-knight"}, "edited": false, "score": 1, "creation_date": 1544111084, "post_id": 53641923, "comment_id": 94168364, "body": "I&#39;ll edit for clarity on the third-teir thing when I get some time; I just meant, very informally, not built in and not as canonical as numpy. &quot;third-party&quot; means not part of core python (if you just download python it doesn&#39;t come with matplotlib, which is made by someone else. Some python distros, like anaconda, may bundle it). The phrase &quot;can&#39;t possibly&quot; was too strong :)"}], "tags": [], "owner": {"reputation": 4763, "user_id": 2329988, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9ab817073f9499496b464905713e6a3?s=128&d=identicon&r=PG", "display_name": "en_Knight", "link": "https://stackoverflow.com/users/2329988/en-knight"}, "is_accepted": true, "score": 7, "last_activity_date": 1544119046, "last_edit_date": 1544119046, "creation_date": 1544049929, "answer_id": 53641923, "question_id": 53641032, "link": "https://stackoverflow.com/questions/53641032/are-there-standard-aliases-for-modules-in-python/53641923#53641923", "title": "Are there standard aliases for modules in Python?", "body": "<p><strong>No, there is no complete list of module acronyms</strong></p>\n\n<p>There is no canonical list, and I wouldn't advise making one here (SO isn't really the place for that IMO). Style guidlines, including naming conventions are defined in PEP8 for python and the section on importing is <a href=\"https://www.python.org/dev/peps/pep-0008/#imports\" rel=\"nofollow noreferrer\">here</a>. Good and helpful advice, but not an enumerated list of import aliases.</p>\n\n<p>There are a lot of good rules and advice on naming, some of which applies to imported names too. <a href=\"https://stackoverflow.com/questions/2853531/how-do-you-pep-8-name-a-class-whose-name-is-an-acronym\">This post</a>, for example, I think, can get us at the not-so-surprising etymology of \"Math Plotting Library\" to \"mpl\". Following the <a href=\"https://www.python.org/dev/peps/pep-0008/#package-and-module-names\" rel=\"nofollow noreferrer\">PEP8 on module names</a> can help us not need acronyms at all.</p>\n\n<p>Note that you've mixed <a href=\"https://docs.python.org/3/library/\" rel=\"nofollow noreferrer\">built-in modules</a> (\"<code>time</code>\") with standard but third-party libraries (\"<code>numpy</code>\", which is ubiquitous but <a href=\"https://en.wikipedia.org/wiki/NumPy\" rel=\"nofollow noreferrer\">Guido declined in 2006 to add to the core</a> and must be installed separately) and general third-party libraries (\"<code>matplotlib</code>\")<sup>6</sup>. You <em>might</em> find a list for built-in and extremely common libraries (or an indirect one through tutorials), but third-party libraries being included seems far less likely; I would advise <em>letting the authors of packages decide their standard abbreviations</em>. Numpy is a good example of a library who's authors use \"np\" in their own tutorials and have \"standardized\" their libraries usage syntax.</p>\n\n<p>FWIW, I don't like calling math \"m\" (or as one commenter suggests, \"os as o\"); one-name variables are a recipe for disaster for clumsy programmers like me... </p>\n\n<hr>\n\n<p>I'd also point you to the <a href=\"https://www.python.org/dev/peps/pep-0221/#rationale\" rel=\"nofollow noreferrer\">rationale for including the \"as\" syntax in the first place</a>, which justifies it by eliminating possible name clashes (if you import <code>cos</code> from <code>scipy</code> and from <code>sympy</code>, you might have a bad time). Using it to abbreviate names that adhere to the PEP naming standard already (are short and readable, to start), doesn't sound like it should be officially endorsed even if convenient.</p>\n\n<p>In an amusing example: <a href=\"https://github.com/quantifiedcode/python-anti-patterns/issues/96\" rel=\"nofollow noreferrer\">here</a>, <code>sympy</code> and <code>scipy</code> both tried to use the same abbreviation for a short while, <a href=\"https://tvtropes.org/pmwiki/pmwiki.php/Main/SelfFulfillingProphecy\" rel=\"nofollow noreferrer\">causing the exact problem we hoped to avoid</a> (although <code>scipy</code> now advises not using an acronym at all, <a href=\"https://stackoverflow.com/questions/36014733/official-abbreviation-for-import-scipy-as-sp-sc\">evidently</a>)</p>\n\n<hr>\n\n<p><strong>Footnotes</strong></p>\n\n<ol>\n<li>Google also has a style guide; <a href=\"http://google.github.io/styleguide/pyguide.html#22-imports\" rel=\"nofollow noreferrer\">they suggest</a> using <code>import...as</code>  \"only when [it's] a standard abbreviation (e.g., <code>np</code> for <code>numpy</code>)\". Sorry, they defer too :)</li>\n<li>Not to nitpick, but your question states \"I am changing <strong>all</strong> the... [import statements]\" (emphasis mine). To be clear, the question you link says \"The choice between one or the other then, should be based on coding style instead.\" There are times when importing a function or class directly is perfectly unambiguous, imo. For example, the <a href=\"https://scikit-learn.org/stable/auto_examples/gaussian_process/plot_gpr_noisy.html\" rel=\"nofollow noreferrer\"><code>sklearn</code> tutorial</a> example that includes an import of \"GaussianProcessRegressor\" doesn't need to do any namespacing or abbreviations. Only you can know for your application, but it's safe in most cases to assume that that name is sufficiently unique</li>\n<li>This can also be used <a href=\"https://stackoverflow.com/a/46807230/2329988\">as a versioning hack</a>. I sometimes use it this way, but I'm not sure how recommended this strategy is</li>\n<li>Some people get technical about conversational <a href=\"https://stackoverflow.com/a/42459966/2329988\">use of the word \"alias\"</a></li>\n<li><a href=\"https://www.reddit.com/r/learnpython/comments/9f1h9f/is_there_a_list_of_common_package_abbreviations/\" rel=\"nofollow noreferrer\">Reddit doesn't have a list either</a></li>\n<li>To clarify question from the comments, the line between \"third party but standard\" and \"third party\" is very informal and not meant to be sacred</li>\n</ol>\n"}], "owner": {"reputation": 745, "user_id": 7470925, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YxVDude9eeE/AAAAAAAAAAI/AAAAAAAABTM/i60VX3LXLQQ/photo.jpg?sz=128", "display_name": "jeannej", "link": "https://stackoverflow.com/users/7470925/jeannej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2341, "favorite_count": 2, "accepted_answer_id": 53641923, "answer_count": 1, "score": 6, "last_activity_date": 1544119046, "creation_date": 1544045256, "question_id": 53641032, "link": "https://stackoverflow.com/questions/53641032/are-there-standard-aliases-for-modules-in-python", "title": "Are there standard aliases for modules in Python?", "body": "<p>Following the guidelines proposed in <a href=\"https://softwareengineering.stackexchange.com/questions/187403/import-module-vs-from-module-import-function/187471\">this post</a>, I am changing all the</p>\n\n<pre><code>from module import function\nfunction(agt)\n</code></pre>\n\n<p>by:</p>\n\n<pre><code>import module as mdl\nmdl.function(agt)\n</code></pre>\n\n<p>in my codes. I am trying to use commonly used aliases rather than personal ones. Is there a list of some kind on the internet summing-up all well-used aliases ?</p>\n\n<p>For instance, these appear to be pretty common:</p>\n\n<pre><code>import numpy as np\nimport math as m\nimport matplotlib.pyplot as plt\n</code></pre>\n\n<p>What about aliases for <code>scipy.linalg</code>, <code>time</code>, <code>scipy.io</code>, <code>cmath</code> and so on ? Which do you use ? Feel free to give other aliases, if no such list exist yet, I am willing to propose one (I will update this post).</p>\n"}, {"tags": ["python", "asynchronous", "python-asyncio", "discord.py"], "comments": [{"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1544082364, "post_id": 53640988, "comment_id": 94151773, "body": "You could try <code>atexit.register(lambda: asyncio.get_event_loop().run_until_complete(canv.shutdown())&zwnj;&#8203;)</code>. For that to work, you will need to remove <code>loop.close()</code> from the top-level block. (The program is exiting anyway, so you don&#39;t gain anything by explicitly closing the loop.)"}, {"owner": {"reputation": 647, "user_id": 1486262, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6f966ed16d86f9c752cf894ad9f8e254?s=128&d=identicon&r=PG", "display_name": "watersnake", "link": "https://stackoverflow.com/users/1486262/watersnake"}, "reply_to_user": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1544133149, "post_id": 53640988, "comment_id": 94178702, "body": "@user4815162342 The event loop is closed by then. <code>RuntimeError: Event loop is closed</code>. It seems that by the time <code>atexit</code> calls, the object is already deleted."}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1544133414, "post_id": 53640988, "comment_id": 94178820, "body": "That&#39;s why the second sentence of my comment says &quot;For that to work, you will need to remove <code>loop.close()</code>...&quot;, and goes on to explain why it is ok to do so."}, {"owner": {"reputation": 647, "user_id": 1486262, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6f966ed16d86f9c752cf894ad9f8e254?s=128&d=identicon&r=PG", "display_name": "watersnake", "link": "https://stackoverflow.com/users/1486262/watersnake"}, "reply_to_user": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1544134643, "post_id": 53640988, "comment_id": 94179304, "body": "I removed the <code>loop.close()</code> from the end of my code, and that didn&#39;t have any impact."}], "answers": [{"comments": [{"owner": {"reputation": 647, "user_id": 1486262, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6f966ed16d86f9c752cf894ad9f8e254?s=128&d=identicon&r=PG", "display_name": "watersnake", "link": "https://stackoverflow.com/users/1486262/watersnake"}, "edited": false, "score": 0, "creation_date": 1544131338, "post_id": 53654008, "comment_id": 94177964, "body": "Yeah, I want these things to happen on shutdown regardless of how that shutdown happened. I learned that the <code>Client</code> was suppressing <code>Exceptions</code>, so I tried to fix that by adding a <code>raise</code>, as suggested <a href=\"https://discordpy.readthedocs.io/en/latest/api.html#discord.on_error\" rel=\"nofollow noreferrer\">here</a>, but this <i>still</i> doesn&#39;t trigger the except/finally clauses."}], "tags": [], "owner": {"reputation": 27029, "user_id": 1113207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UWak6.jpg?s=128&g=1", "display_name": "Mikhail Gerasimov", "link": "https://stackoverflow.com/users/1113207/mikhail-gerasimov"}, "is_accepted": false, "score": 1, "last_activity_date": 1544131772, "last_edit_date": 1544131772, "creation_date": 1544107868, "answer_id": 53654008, "question_id": 53640988, "link": "https://stackoverflow.com/questions/53640988/is-there-a-way-to-run-an-asyncio-coroutine-using-atexit/53654008#53654008", "title": "Is there a way to run an asyncio coroutine using atexit?", "body": "<p>Try:</p>\n\n<pre><code>try:\n    bot.loop.run_until_complete(bot.start(TOKEN))\nfinally:\n    bot.loop.run_until_complete(canv.shutdown())\n    bot.loop.close()\n</code></pre>\n\n<p>You want to delete channels and close db on every kind of script shutdown, not only on crash, right?</p>\n\n<p>Otherwise, try:</p>\n\n<pre><code>try:\n    bot.loop.run_until_complete(bot.start(TOKEN))\nexcept Exception:\n    bot.loop.run_until_complete(canv.shutdown())\n    raise\nfinally:\n    bot.loop.close()\n</code></pre>\n\n<p><strong>Upd:</strong></p>\n\n<p>According to link you provided:</p>\n\n<blockquote>\n  <p>The information of the exception rasied and the exception itself can\n  be retreived with a standard call to sys.exc_info().</p>\n</blockquote>\n\n<p>Let's try it out:</p>\n\n<pre><code>import sys\n\ntry:\n    bot.loop.run_until_complete(bot.start(TOKEN))\nfinally:\n    if sys.exc_info() != (None, None, None):\n        bot.loop.run_until_complete(canv.shutdown())\n    bot.loop.close()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2853, "user_id": 129550, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/816090617fd1d1123eca2d47e880a2ee?s=128&d=identicon&r=PG", "display_name": "fuzzyTew", "link": "https://stackoverflow.com/users/129550/fuzzytew"}, "edited": false, "score": 0, "creation_date": 1609948222, "post_id": 61067369, "comment_id": 115980917, "body": "<code>RuntimeError: Event loop is closed</code> when ctrl-c is pressed during <code>asyncio.run(main())</code> .  Solution is to not use <code>syncio.run()</code>."}], "tags": [], "owner": {"reputation": 21, "user_id": 6806915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c82eb954d3d741be51fe0b0baa28dc1?s=128&d=identicon&r=PG", "display_name": "Nelson J Perez", "link": "https://stackoverflow.com/users/6806915/nelson-j-perez"}, "is_accepted": false, "score": 2, "last_activity_date": 1586200837, "creation_date": 1586200837, "answer_id": 61067369, "question_id": 53640988, "link": "https://stackoverflow.com/questions/53640988/is-there-a-way-to-run-an-asyncio-coroutine-using-atexit/61067369#61067369", "title": "Is there a way to run an asyncio coroutine using atexit?", "body": "<p>You can try something like this</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import asyncio\nimport atexit\n\n\n@atexit.register\ndef shutdown(self):\n    print(\"Shutting down Canvas...\")\n    loop = asyncio.get_event_loop()\n    loop.run_until_complete(await_delete_channels())\n    self.db.close()\n\n\nasync def await_delete_channels(self):\n    # # Works but it is better to do it asynchronously\n    # for ch in self.active_channels:\n    #    await client.delete_channel(ch)\n    #\n    # Doing delete_channels() asynchronously\n    delete_channels = [client.delete_channel(ch) for ch in self.active_channels]\n    await asyncio.wait(delete_channels, return_when=asyncio.ALL_COMPLETED)\n</code></pre>\n"}], "owner": {"reputation": 647, "user_id": 1486262, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6f966ed16d86f9c752cf894ad9f8e254?s=128&d=identicon&r=PG", "display_name": "watersnake", "link": "https://stackoverflow.com/users/1486262/watersnake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1314, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1586200837, "creation_date": 1544045056, "question_id": 53640988, "link": "https://stackoverflow.com/questions/53640988/is-there-a-way-to-run-an-asyncio-coroutine-using-atexit", "title": "Is there a way to run an asyncio coroutine using atexit?", "body": "<p>I'm working on a bot using `discord.py. The bot makes/deletes several channels, and connects to a SQLite database. If the bot were to crash, I want it to </p>\n\n<ol>\n<li>Destroy all temporary voice channels it created.</li>\n<li>Disconnect from the SQL database.</li>\n</ol>\n\n<p>Here's the shutdown coroutine:</p>\n\n<pre><code>async def shutdown(self):\n    print(\"Shutting down Canvas...\")\n    for ch in self.active_channels:\n        await client.delete_channel(ch)\n    self.db.close()\n</code></pre>\n\n<p>Things I've tried:</p>\n\n<pre><code># Canv is the interface between the bot and the data we're collecting\natexit.register(canv.shutdown) \nbot.run(TOKEN)\n</code></pre>\n\n<hr>\n\n<pre><code>try:\n    bot.loop.run_until_complete(bot.start(TOKEN))\nexcept KeyboardInterrupt or InterruptedError:\n    bot.loop.run_until_complete(canv.shutdown())\nfinally:\n    bot.loop.close()\n</code></pre>\n\n<hr>\n\n<pre><code>from async_generator import asynccontextmanager\n\n@asynccontextmanager\nasync def cleanup_context_manager():\n    try:\n        yield\n    finally:\n        await canv.shutdown()\n\nwith cleanup_context_manager():\n    bot.run(TOKEN)\n</code></pre>\n\n<p>None of these run <code>canv.shutdown()</code>, which is an <code>asyncio.coroutine</code>. How do ensure this code gets run on <em>every</em> type of exit?</p>\n\n<p>I used <a href=\"https://stackoverflow.com/questions/37433157/asynchronous-context-manager\">this post</a> for some info, and I think it's the closest to what I want. </p>\n"}, {"tags": ["python", "selenium", "xpath", "webdriverwait", "staleelementreferenceexception"], "comments": [{"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "edited": false, "score": 0, "creation_date": 1544046899, "post_id": 53640973, "comment_id": 94142201, "body": "What is your scenario? What is expected output?"}, {"owner": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "edited": false, "score": 0, "creation_date": 1544052968, "post_id": 53640973, "comment_id": 94144179, "body": "once you <code>click()</code>, it loads a new page (with a new DOM). so  2nd iteration of your loop the elements are stale."}], "answers": [{"comments": [{"owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "edited": false, "score": 1, "creation_date": 1544081839, "post_id": 53641511, "comment_id": 94151538, "body": "Cleanest approach as usual."}, {"owner": {"reputation": 234, "user_id": 8143104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9em2v.jpg?s=128&g=1", "display_name": "Mariah Akinbi", "link": "https://stackoverflow.com/users/8143104/mariah-akinbi"}, "edited": false, "score": 0, "creation_date": 1544085530, "post_id": 53641511, "comment_id": 94153216, "body": "@andersson this worked beautifully! Thank you! how did you know that &#39;a &gt; span#pagnNextString&#39; is the appropriate css selector? When I inspect the next button and copy the css selector it shows up as &#39;#pagnNextString&#39;. Also, thank you for explaining implicitly_wait()!"}, {"owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "reply_to_user": {"reputation": 234, "user_id": 8143104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9em2v.jpg?s=128&g=1", "display_name": "Mariah Akinbi", "link": "https://stackoverflow.com/users/8143104/mariah-akinbi"}, "edited": false, "score": 1, "creation_date": 1544085813, "post_id": 53641511, "comment_id": 94153361, "body": "@MariahAkinbi , Note that on last page Next button (span with <code>id=&quot;pagnNextString&quot;</code>) is not a child of anchor (<code>a</code>), but Selenium (for some reason) still &quot;think&quot; that it is clickable. So to break the loop on the last iteration we should explicitly specify that we need <i>a link with <code>&quot;pagnNextString&quot;</code> child, but not just element <code>&quot;pagnNextString&quot;</code></i>"}], "tags": [], "owner": {"reputation": 46903, "user_id": 4549554, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/Vxi1i.jpg?s=128&g=1", "display_name": "Andersson", "link": "https://stackoverflow.com/users/4549554/andersson"}, "is_accepted": false, "score": 3, "last_activity_date": 1544048098, "last_edit_date": 1544048098, "creation_date": 1544047791, "answer_id": 53641511, "question_id": 53640973, "link": "https://stackoverflow.com/questions/53640973/staleelementexception-when-iterating-with-python/53641511#53641511", "title": "StaleElementException when iterating with Python", "body": "<p>If you just want your script to iterate over all the result pages, you don't need any complicated logic - just make a click on Next button while it's possible:</p>\n\n<pre><code>from selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.support.ui import WebDriverWait as wait\nfrom selenium.common.exceptions import TimeoutException\n\ndriver = webdriver.Chrome()\n\ndriver.get('https://www.amazon.com/s/ref=nb_sb_noss_1?url=search-alias%3Daps&amp;field-keywords=sonicare+toothbrush')\n\nwhile True:\n    try:\n        wait(driver, 10).until(EC.element_to_be_clickable((By.CSS_SELECTOR, 'a &gt; span#pagnNextString'))).click()\n    except TimeoutException:\n        break\n</code></pre>\n\n<p>P.S. Also note that <code>implicitly_wait(10)</code> should not wait <em>full 10 seconds</em>, but <em>wait up to 10 seconds for element to appear in HTML DOM</em>. So if element is found within 1 or 2 seconds then wait is done and you will not wait rest 8-9 seconds...</p>\n"}, {"comments": [{"owner": {"reputation": 234, "user_id": 8143104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9em2v.jpg?s=128&g=1", "display_name": "Mariah Akinbi", "link": "https://stackoverflow.com/users/8143104/mariah-akinbi"}, "edited": false, "score": 1, "creation_date": 1544085633, "post_id": 53646047, "comment_id": 94153266, "body": "this works great!!! Thank you! What is the purpose of the second WebDriverWait line?"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 234, "user_id": 8143104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9em2v.jpg?s=128&g=1", "display_name": "Mariah Akinbi", "link": "https://stackoverflow.com/users/8143104/mariah-akinbi"}, "edited": false, "score": 1, "creation_date": 1544085872, "post_id": 53646047, "comment_id": 94153394, "body": "@MariahAkinbi First <code>WebDriverWait</code> for the <i>current_page_number_element</i> to be <b>visible</b> before we attempt to scroll. Once we have already scrolled second <code>WebDriverWait</code> for the <code>element_to_be_clickable</code> so that our solution works flawless cross platform."}, {"owner": {"reputation": 234, "user_id": 8143104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9em2v.jpg?s=128&g=1", "display_name": "Mariah Akinbi", "link": "https://stackoverflow.com/users/8143104/mariah-akinbi"}, "edited": false, "score": 1, "creation_date": 1544086190, "post_id": 53646047, "comment_id": 94153595, "body": "okay, makes sense! If the element is visible, doesn&#39;t that mean it&#39;s clickable? Or I could skip the visible wait and only use the clickable wait - because all that matters is if it&#39;s clickable?"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 234, "user_id": 8143104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9em2v.jpg?s=128&g=1", "display_name": "Mariah Akinbi", "link": "https://stackoverflow.com/users/8143104/mariah-akinbi"}, "edited": false, "score": 1, "creation_date": 1544086713, "post_id": 53646047, "comment_id": 94153879, "body": "No, if the element is <b>visible</b> doesn&#39;t guarantees it&#39;s <b>clickable</b>. Ideally, if you are not clicking <i>visible wait</i> is sufficient but before you attempt to click, <i>click wait</i> is needed to make your program flawless cross platform."}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 3, "last_activity_date": 1594417395, "last_edit_date": 1594417395, "creation_date": 1544079315, "answer_id": 53646047, "question_id": 53640973, "link": "https://stackoverflow.com/questions/53640973/staleelementexception-when-iterating-with-python/53646047#53646047", "title": "StaleElementException when iterating with Python", "body": "<p>This error message...</p>\n<pre><code>StaleElementReferenceException: Message: The element reference of &lt;span class=&quot;pagnCur&quot;&gt; is stale; either the element is no longer attached to the DOM, it is not in the current frame context, or the document has been refreshed\n</code></pre>\n<p>...implies that the previous reference of the element is now stale and the element reference is no longer present on the DOM of the page.</p>\n<p>The common reasons behind this this issue are:</p>\n<ul>\n<li><em>The element have changed position within the HTML.</em></li>\n<li><em>The element is no longer attached to the DOM TREE.</em></li>\n<li><em>The webpage on which the element was part of has been refreshed.</em></li>\n<li><em>The previous instance of element has been refreshed by a <em>JavaScript</em> or an <em>AjaxCall</em>.</em></li>\n</ul>\n<hr />\n<h2>This usecase</h2>\n<p>Preserving your concept of <em>scrolling</em> through <code>scrollIntoView()</code> and <em>printing</em> a couple of helpful debug messages, I have made some minor adjustments inducing <em>WebDriverWait</em> and you can use the following solution:</p>\n<ul>\n<li><p>Code Block:</p>\n<pre><code>from selenium import webdriver\nfrom selenium.webdriver.chrome.options import Options\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n\noptions = Options()\noptions.add_argument(&quot;start-maximized&quot;)\noptions.add_argument('disable-infobars')\noptions.add_argument(&quot;--disable-extensions&quot;)\ndriver = webdriver.Chrome(chrome_options=options, executable_path=r'C:\\Utility\\BrowserDrivers\\chromedriver.exe')\ndriver.get(&quot;https://www.amazon.com/s/ref=nb_sb_noss_1?url=search-alias%3Daps&amp;field-keywords=sonicare+toothbrush&quot;)\nwhile True:\n    try:\n        current_page_number_element = WebDriverWait(driver, 20).until(EC.visibility_of_element_located((By.CSS_SELECTOR, &quot;span.pagnCur&quot;)))\n        driver.execute_script(&quot;arguments[0].scrollIntoView(true);&quot;, current_page_number_element)\n        current_page_number = current_page_number_element.get_attribute(&quot;innerHTML&quot;)\n        WebDriverWait(driver, 10).until(EC.element_to_be_clickable((By.CSS_SELECTOR, &quot;span.pagnNextArrow&quot;))).click()\n        print(&quot;page # {} : going to next page&quot;.format(current_page_number))\n    except:\n        print(&quot;page # {} : error, no more pages&quot;.format(current_page_number))\n        break\ndriver.quit()\n</code></pre>\n</li>\n<li><p>Console Output:</p>\n<pre><code>page # 1 : going to next page\npage # 2 : going to next page\npage # 3 : going to next page\npage # 4 : going to next page\npage # 5 : going to next page\npage # 6 : going to next page\npage # 7 : going to next page\npage # 8 : going to next page\npage # 9 : going to next page\npage # 10 : going to next page\npage # 11 : going to next page\npage # 12 : going to next page\npage # 13 : going to next page\npage # 14 : going to next page\npage # 15 : going to next page\npage # 16 : going to next page\npage # 17 : going to next page\npage # 18 : going to next page\npage # 19 : going to next page\npage # 20 : error, no more pages\n</code></pre>\n</li>\n</ul>\n"}], "owner": {"reputation": 234, "user_id": 8143104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9em2v.jpg?s=128&g=1", "display_name": "Mariah Akinbi", "link": "https://stackoverflow.com/users/8143104/mariah-akinbi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 616, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1594417395, "creation_date": 1544044986, "last_edit_date": 1544079216, "question_id": 53640973, "link": "https://stackoverflow.com/questions/53640973/staleelementexception-when-iterating-with-python", "title": "StaleElementException when iterating with Python", "body": "<p>I'm trying to create a basic web scraper for Amazon results. As I'm iterating through results, I sometimes get to page 5 (sometimes only page 2) of the results and then a <code>StaleElementException</code> is thrown. When I look at the browser after the exception is thrown, I can see that the driver/page did not scroll down to where the page numbers are (bottom bar).</p>\n\n<p>My code:</p>\n\n<pre><code>driver.get('https://www.amazon.com/s/ref=nb_sb_noss_1?url=search-alias%3Daps&amp;field-keywords=sonicare+toothbrush')\n\nfor page in range(1,last_page_number +1):\n\n    driver.implicitly_wait(10)\n\n    bottom_bar = driver.find_element_by_class_name('pagnCur')\n    driver.execute_script(\"arguments[0].scrollIntoView(true);\", bottom_bar)\n\n    current_page_number = int(driver.find_element_by_class_name('pagnCur').text)\n\n    if page == current_page_number:\n        next_page = driver.find_element_by_xpath('//div[@id=\"pagn\"]/span[@class=\"pagnLink\"]/a[text()=\"{0}\"]'.format(current_page_number+1))\n        next_page.click()\n        print('page #',page,': going to next page')\n    else:\n        print('page #: ', page,'error')\n</code></pre>\n\n<p>I've looked at this <a href=\"https://stackoverflow.com/questions/44373619/staleelementexception-when-clicking-on-a-tablerow-in-an-angular-webpage\">question</a>, and I'm guessing that a similar fix can be applied, but I'm not sure how to find something on the page that disappears. Also, based on how quickly the print statements are occurring, I can see that the <code>implicitly_wait(10)</code> isn't actually waiting a full 10 seconds.</p>\n\n<p>The exception is pointing to the line that starts with \"driver.execute_script\". This is the exception:</p>\n\n<pre><code>StaleElementReferenceException: Message: The element reference of &lt;span class=\"pagnCur\"&gt; is stale; either the element is no longer attached to the DOM, it is not in the current frame context, or the document has been refreshed\n</code></pre>\n\n<p>Sometimes I'll get a ValueError: </p>\n\n<pre><code>ValueError: invalid literal for int() with base 10: ''\n</code></pre>\n\n<p>So these errors/exceptions lead me to believe that there is something going on with waiting for the page to refresh completely.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 8342, "user_id": 6942527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d97c46958116a2a923d03f109876355?s=128&d=identicon&r=PG&f=1", "display_name": "busybear", "link": "https://stackoverflow.com/users/6942527/busybear"}, "edited": false, "score": 0, "creation_date": 1544045734, "post_id": 53640971, "comment_id": 94141758, "body": "<code>np.where(np.diff(np.sign(a2)), 1, 0)</code> will do the trick. You may want to add a <code>0</code> at the beginning though. It depends on how you want to treat the sign of <code>0</code> though."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1544045776, "post_id": 53640971, "comment_id": 94141779, "body": "Title and body seems confusing, but <code>np.r_[0,np.diff(np.array(a2)&gt;=0)]</code> seems to do it."}], "answers": [{"tags": [], "owner": {"reputation": 1122, "user_id": 4724240, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c1xpq.jpg?s=128&g=1", "display_name": "Axel Puig", "link": "https://stackoverflow.com/users/4724240/axel-puig"}, "is_accepted": true, "score": 5, "last_activity_date": 1544046225, "last_edit_date": 1544046225, "creation_date": 1544045828, "answer_id": 53641123, "question_id": 53640971, "link": "https://stackoverflow.com/questions/53640971/python-how-to-find-out-if-an-unknown-element-exists-in-a-list/53641123#53641123", "title": "Python: How to find out if an unknown element exists in a list?", "body": "<p>To get the array you want, you can do:</p>\n\n<pre><code>a2 = [1, 2, 1, 1, 0, -3, -4, 7, 8, 9, 10, -2, 1, -3, 5, 6, 7, -10]\nsigns = np.sign(a2)\ncrossings = np.where(np.diff(signs), 1, 0)\n</code></pre>\n\n<p>The first zero is missing (because the first number of <code>crossings</code> corresponds to the crossing of the first and the second number of <code>a2</code>), so you can add it with this:</p>\n\n<pre><code>crossings = np.insert(crossings, 0, 0)\n</code></pre>\n"}], "owner": {"reputation": 193, "user_id": 6483314, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/dc1a77e90d1a719256c58ff34e0ce090?s=128&d=identicon&r=PG&f=1", "display_name": "HumanTorch", "link": "https://stackoverflow.com/users/6483314/humantorch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 535, "favorite_count": 0, "accepted_answer_id": 53641123, "answer_count": 1, "score": 1, "last_activity_date": 1544046225, "creation_date": 1544044981, "question_id": 53640971, "link": "https://stackoverflow.com/questions/53640971/python-how-to-find-out-if-an-unknown-element-exists-in-a-list", "title": "Python: How to find out if an unknown element exists in a list?", "body": "<p><code>zero_crossings2</code> basically detects sign changes. \nIf there is a <code>zero_crossings2</code> I want to append <code>1</code> to crossing_list, otherwise I want to append a <code>0</code> to crossing_list. \nThe code <code>np.where(np.diff(np.sign(a2)))[0]</code> can determine the index of the sign change. So if it returns a result I want to return a \"1\" at that specific position and a \"0\" everywhere it does not detect a sign change.</p>\n\n<p>Here is the current state of my code:</p>\n\n<pre><code>import numpy as np\ncrossing_list = []\na2 = [1, 2, 1, 1, 0, -3, -4, 7, 8, 9, 10, -2, 1, -3, 5, 6, 7, -10]\nzero_crossings2 = np.where(np.diff(np.sign(a2)))[0]\n\n\nfor i in range(len(a2)):\n    if X in zero_crossings2[i]:\n        crossing_list.append('1')\n    else:\n        crossing_list.append('0')\n\ncrossing_list_new = np.array(crossing_list)\n</code></pre>\n\n<p>What I am having trouble with is in the if-statement, the \"X\" is unknown so I do not know which element is in the list.</p>\n\n<p>My expected output is:</p>\n\n<pre><code>[0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1, 1, 1, 1, 0, 0, 1]\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1544045048, "post_id": 53640968, "comment_id": 94141443, "body": "<code>data.loc[data[&#39;country&#39;] == &#39;USA&#39;, [&#39;country&#39;, &#39;time with timestamp&#39;]]</code> works."}, {"owner": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1544045060, "post_id": 53640968, "comment_id": 94141453, "body": "What is <code>data</code>?"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1544045138, "post_id": 53640968, "comment_id": 94141494, "body": "And then, <code>df2 = df2.sort_values(&quot;time with timestamp&quot;)</code>"}, {"owner": {"reputation": 79, "user_id": 10739063, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fycSTzOiT5g/AAAAAAAAAAI/AAAAAAAAAAs/mRPXOQXQA5Q/photo.jpg?sz=128", "display_name": "Freedom illusions", "link": "https://stackoverflow.com/users/10739063/freedom-illusions"}, "reply_to_user": {"reputation": 64040, "user_id": 3620003, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/QnqtZ.jpg?s=128&g=1", "display_name": "timgeb", "link": "https://stackoverflow.com/users/3620003/timgeb"}, "edited": false, "score": 0, "creation_date": 1544078109, "post_id": 53640968, "comment_id": 94150132, "body": "@timgeb Now it works <code>df2 = df.loc[df[&#39;country&#39;] == &#39;USA&#39;, [&#39;country&#39;, &#39;time with timestamp&#39;]]</code>"}, {"owner": {"reputation": 79, "user_id": 10739063, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fycSTzOiT5g/AAAAAAAAAAI/AAAAAAAAAAs/mRPXOQXQA5Q/photo.jpg?sz=128", "display_name": "Freedom illusions", "link": "https://stackoverflow.com/users/10739063/freedom-illusions"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1544078239, "post_id": 53640968, "comment_id": 94150183, "body": "@coldspeed Ok, really thank you, it was my mistake. I should use df instead of data. All works fine! <code>3     USA  2018-12-03 15:57:54.850205+00:00 0     USA  2018-12-03 16:02:06.948083+00:00 1     USA  2018-12-03 16:10:25.625414+00:00</code>   Now I see that indexes remained old. (3,0,1)   Can I specify new indexes in order?"}, {"owner": {"reputation": 79, "user_id": 10739063, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fycSTzOiT5g/AAAAAAAAAAI/AAAAAAAAAAs/mRPXOQXQA5Q/photo.jpg?sz=128", "display_name": "Freedom illusions", "link": "https://stackoverflow.com/users/10739063/freedom-illusions"}, "edited": false, "score": 0, "creation_date": 1544078352, "post_id": 53640968, "comment_id": 94150224, "body": "I think i should create a new dataframe from filter?"}, {"owner": {"reputation": 79, "user_id": 10739063, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fycSTzOiT5g/AAAAAAAAAAI/AAAAAAAAAAs/mRPXOQXQA5Q/photo.jpg?sz=128", "display_name": "Freedom illusions", "link": "https://stackoverflow.com/users/10739063/freedom-illusions"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1544079217, "post_id": 53640968, "comment_id": 94150574, "body": "@coldspeed I already found solution <code>df3 = df3.reset_index(drop=True)</code>"}, {"owner": {"reputation": 88791, "user_id": 134204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vwnA5.jpg?s=128&g=1", "display_name": "Panagiotis Kanavos", "link": "https://stackoverflow.com/users/134204/panagiotis-kanavos"}, "edited": false, "score": 0, "creation_date": 1544109183, "post_id": 53640968, "comment_id": 94167277, "body": "@Freedomillusions if you found a solution post it as an answer. Don&#39;t edit the question"}, {"owner": {"reputation": 79, "user_id": 10739063, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fycSTzOiT5g/AAAAAAAAAAI/AAAAAAAAAAs/mRPXOQXQA5Q/photo.jpg?sz=128", "display_name": "Freedom illusions", "link": "https://stackoverflow.com/users/10739063/freedom-illusions"}, "edited": false, "score": 0, "creation_date": 1544127032, "post_id": 53640968, "comment_id": 94176122, "body": "I can&#39;t answer, it&#39;s blocked."}], "owner": {"reputation": 79, "user_id": 10739063, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-fycSTzOiT5g/AAAAAAAAAAI/AAAAAAAAAAs/mRPXOQXQA5Q/photo.jpg?sz=128", "display_name": "Freedom illusions", "link": "https://stackoverflow.com/users/10739063/freedom-illusions"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "closed_date": 1544045122, "answer_count": 0, "score": 0, "last_activity_date": 1544078478, "creation_date": 1544044970, "last_edit_date": 1544078478, "question_id": 53640968, "link": "https://stackoverflow.com/questions/53640968/how-to-sort-in-pandas-column-by-date", "closed_reason": "Duplicate", "title": "How to sort in Pandas column by date?", "body": "<p>I have Pandas data</p>\n\n<pre><code>df = pd.DataFrame({\n'country': ['USA', 'USA', 'Belarus', 'USA'],\n'population': [17.04, 143.5, 9.5, 45.5],\n'square': [2724902, 17125191, 207600, 603628],\n'time with timestamp': ['2018-12-03 16:02:06.948083+00:00', '2018-12-03 16:10:25.625414+00:00', '2018-12-03 15:57:54.850205+00:00', '2018-12-03 15:57:54.850205+00:00']\n})\ndf2 = data[data['country'] == 'USA']['country', 'time with timestamp']\nprint(df2)\n</code></pre>\n\n<ol>\n<li>Why filter by country doesn't work? </li>\n<li>Do I have some method for sort all columns by data?\nMy target: GET all columns by name USA + sort all columns in chronological order\nGood luck and new victories!\nP.S. Solution</li>\n</ol>\n\n<p>`</p>\n\n<pre><code>df = pd.DataFrame({\n'country': ['USA', 'USA', 'Belarus', 'USA'],\n'population': [17.04, 143.5, 9.5, 45.5],\n'square': [2724902, 17125191, 207600, 603628],\n'time with timestamp': ['2018-12-03 16:02:06.948083+00:00', '2018-12-03 16:10:25.625414+00:00', '2018-12-03 15:57:54.850205+00:00', '2018-12-03 15:57:54.850205+00:00']\n})\ndf2 = df.loc[df['country'] == 'USA', ['country', 'time with timestamp']]\ndf3 = df2.sort_values(\"time with timestamp\")\nprint(df3)\nprint(df3.loc[:, ['country', 'time with timestamp']])\n</code></pre>\n\n<p>`</p>\n"}, {"tags": ["python", "matrix"], "answers": [{"comments": [{"owner": {"reputation": 399, "user_id": 9332433, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1u5xDb7LA4M/AAAAAAAAAAI/AAAAAAAAAA4/gfl-SgZI9qo/photo.jpg?sz=128", "display_name": "Michal Adamaszek", "link": "https://stackoverflow.com/users/9332433/michal-adamaszek"}, "reply_to_user": {"reputation": 123, "user_id": 8544621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1165e6ae507a2c288042e87100610f13?s=128&d=identicon&r=PG&f=1", "display_name": "Alex_P", "link": "https://stackoverflow.com/users/8544621/alex-p"}, "edited": false, "score": 0, "creation_date": 1544047579, "post_id": 53641218, "comment_id": 94142429, "body": "@Alex_P It doesn&#39;t use any API. The link contains a mathematical formulation, the last one in that section you can of course implement in Fusion. It is a cone and some linear constraints."}], "tags": [], "owner": {"reputation": 399, "user_id": 9332433, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1u5xDb7LA4M/AAAAAAAAAAI/AAAAAAAAAA4/gfl-SgZI9qo/photo.jpg?sz=128", "display_name": "Michal Adamaszek", "link": "https://stackoverflow.com/users/9332433/michal-adamaszek"}, "is_accepted": false, "score": 1, "last_activity_date": 1544046381, "creation_date": 1544046381, "answer_id": 53641218, "question_id": 53640871, "link": "https://stackoverflow.com/questions/53640871/converting-objective-function-optimizer/53641218#53641218", "title": "Converting Objective function Optimizer", "body": "<p>You need to make a reformulation in the style of <a href=\"https://docs.mosek.com/modeling-cookbook/cqo.html#maximizing-the-sharpe-ratio\" rel=\"nofollow noreferrer\">https://docs.mosek.com/modeling-cookbook/cqo.html#maximizing-the-sharpe-ratio</a></p>\n"}], "owner": {"reputation": 123, "user_id": 8544621, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1165e6ae507a2c288042e87100610f13?s=128&d=identicon&r=PG&f=1", "display_name": "Alex_P", "link": "https://stackoverflow.com/users/8544621/alex-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544451003, "creation_date": 1544044600, "last_edit_date": 1544451003, "question_id": 53640871, "link": "https://stackoverflow.com/questions/53640871/converting-objective-function-optimizer", "title": "Converting Objective function Optimizer", "body": "<p>I am using optimizer to do mean variance portfolio optimization. Here in my code my objective function is <code>M.objective('obj', ObjectiveSense.Maximize, Expr.sub(dot,Expr.mul(alpha,m)))</code>  </p>\n\n<p>but go the below error. </p>\n\n<p>error: <code>unsupported operand type(s) for /: 'int' and 'Expr</code></p>\n"}, {"tags": ["python", "python-3.x", "integral"], "comments": [{"owner": {"reputation": 567, "user_id": 9221467, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7617a21b1802c874e04be0db0f58ea0b?s=128&d=identicon&r=PG&f=1", "display_name": "SRT HellKitty", "link": "https://stackoverflow.com/users/9221467/srt-hellkitty"}, "edited": false, "score": 0, "creation_date": 1544044886, "post_id": 53640859, "comment_id": 94141372, "body": "<a href=\"https://stackoverflow.com/questions/17602076/how-do-i-integrate-two-1-d-data-arrays-in-python\">duplicate question?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 41182, "user_id": 6671176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/4DvZ4.png?s=128&g=1", "display_name": "sacuL", "link": "https://stackoverflow.com/users/6671176/sacul"}, "is_accepted": true, "score": 4, "last_activity_date": 1544046283, "last_edit_date": 1544046283, "creation_date": 1544045270, "answer_id": 53641038, "question_id": 53640859, "link": "https://stackoverflow.com/questions/53640859/how-to-integrate-curve-from-data/53641038#53641038", "title": "How to integrate curve from data", "body": "<p>You can start out by finding the indices of your <code>x</code> array that are within your integral limits:</p>\n\n<pre><code>idx = np.where((np.array(x)&gt;=2672.6) &amp; (np.array(x)&lt;=30005.3))[0]\n</code></pre>\n\n<p>And then either using <code>np.trapz</code> to integrate using the trapezoidal rule:</p>\n\n<pre><code>np.trapz(x=np.array(x)[idx],y=np.array(y)[idx])\n</code></pre>\n\n<p>or one of <a href=\"https://docs.scipy.org/doc/scipy/reference/tutorial/integrate.html\" rel=\"nofollow noreferrer\">scipy's integration methods for integrating with fixed samples</a>:</p>\n\n<pre><code># same as numpy.trapz\nsp.integrate.trapz(x=np.array(x)[idx],y=np.array(y)[idx])\n# example using simpson's rule\nsp.integrate.simps(x=np.array(x)[idx],y=np.array(y)[idx])\n</code></pre>\n\n<h1>output:</h1>\n\n<pre><code>import scipy as sp\nimport numpy as np\n\nidx = np.where((np.array(x)&gt;=2672.6) &amp; (np.array(x)&lt;=30005.3))[0]\n\n&gt;&gt;&gt; np.trapz(x=np.array(x)[idx],y=np.array(y)[idx])\n1.4913432492153544\n&gt;&gt;&gt; sp.integrate.trapz(x=np.array(x)[idx],y=np.array(y)[idx])\n1.4913432492153544\n&gt;&gt;&gt; sp.integrate.simps(x=np.array(x)[idx],y=np.array(y)[idx])\n1.4892436835956682\n</code></pre>\n\n<p>Representing the integral:</p>\n\n<p><a href=\"https://i.stack.imgur.com/I5ktu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/I5ktu.png\" alt=\"enter image description here\"></a></p>\n\n<p>Note, from your data, I suspect you meant the upper limit to be 3005.3 rather than 30005.3, but that's for you to decide :-)</p>\n"}], "owner": {"reputation": 141, "user_id": 10118071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9651c37d58cbf0242311f11fe614b4cb?s=128&d=identicon&r=PG&f=1", "display_name": "D.Kim", "link": "https://stackoverflow.com/users/10118071/d-kim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 53641038, "answer_count": 1, "score": 0, "last_activity_date": 1544046283, "creation_date": 1544044528, "last_edit_date": 1544046167, "question_id": 53640859, "link": "https://stackoverflow.com/questions/53640859/how-to-integrate-curve-from-data", "title": "How to integrate curve from data", "body": "<p>Here are my x-values: </p>\n\n<pre><code>[2600.2 2601.2 2602.2 2603.1 2604.1 2605.1 2606.  2607.  2607.9 2608.9\n 2609.9 2610.8 2611.8 2612.8 2613.7 2614.7 2615.7 2616.6 2617.6 2618.6\n 2619.5 2620.5 2621.4 2622.4 2623.4 2624.3 2625.3 2626.3 2627.2 2628.2\n 2629.2 2630.1 2631.1 2632.1 2633.  2634.  2635.  2635.9 2636.9 2637.8\n 2638.8 2639.8 2640.7 2641.7 2642.7 2643.6 2644.6 2645.6 2646.5 2647.5\n 2648.5 2649.4 2650.4 2651.3 2652.3 2653.3 2654.2 2655.2 2656.2 2657.1\n 2658.1 2659.1 2660.  2661.  2662.  2662.9 2663.9 2664.9 2665.8 2666.8\n 2667.7 2668.7 2669.7 2670.6 2671.6 2672.6 2673.5 2674.5 2675.5 2676.4\n 2677.4 2678.4 2679.3 2680.3 2681.2 2682.2 2683.2 2684.1 2685.1 2686.1\n 2687.  2688.  2689.  2689.9 2690.9 2691.9 2692.8 2693.8 2694.7 2695.7\n 2696.7 2697.6 2698.6 2699.6 2700.5 2701.5 2702.5 2703.4 2704.4 2705.4\n 2706.3 2707.3 2708.3 2709.2 2710.2 2711.1 2712.1 2713.1 2714.  2715.\n 2716.  2716.9 2717.9 2718.9 2719.8 2720.8 2721.8 2722.7 2723.7 2724.6\n 2725.6 2726.6 2727.5 2728.5 2729.5 2730.4 2731.4 2732.4 2733.3 2734.3\n 2735.3 2736.2 2737.2 2738.2 2739.1 2740.1 2741.  2742.  2743.  2743.9\n 2744.9 2745.9 2746.8 2747.8 2748.8 2749.7 2750.7 2751.7 2752.6 2753.6\n 2754.5 2755.5 2756.5 2757.4 2758.4 2759.4 2760.3 2761.3 2762.3 2763.2\n 2764.2 2765.2 2766.1 2767.1 2768.1 2769.  2770.  2770.9 2771.9 2772.9\n 2773.8 2774.8 2775.8 2776.7 2777.7 2778.7 2779.6 2780.6 2781.6 2782.5\n 2783.5 2784.4 2785.4 2786.4 2787.3 2788.3 2789.3 2790.2 2791.2 2792.2\n 2793.1 2794.1 2795.1 2796.  2797.  2797.9 2798.9 2799.9 2800.8 2801.8\n 2802.8 2803.7 2804.7 2805.7 2806.6 2807.6 2808.6 2809.5 2810.5 2811.5\n 2812.4 2813.4 2814.3 2815.3 2816.3 2817.2 2818.2 2819.2 2820.1 2821.1\n 2822.1 2823.  2824.  2825.  2825.9 2826.9 2827.8 2828.8 2829.8 2830.7\n 2831.7 2832.7 2833.6 2834.6 2835.6 2836.5 2837.5 2838.5 2839.4 2840.4\n 2841.4 2842.3 2843.3 2844.2 2845.2 2846.2 2847.1 2848.1 2849.1 2850.\n 2851.  2852.  2852.9 2853.9 2854.9 2855.8 2856.8 2857.7 2858.7 2859.7\n 2860.6 2861.6 2862.6 2863.5 2864.5 2865.5 2866.4 2867.4 2868.4 2869.3\n 2870.3 2871.2 2872.2 2873.2 2874.1 2875.1 2876.1 2877.  2878.  2879.\n 2879.9 2880.9 2881.9 2882.8 2883.8 2884.8 2885.7 2886.7 2887.6 2888.6\n 2889.6 2890.5 2891.5 2892.5 2893.4 2894.4 2895.4 2896.3 2897.3 2898.3\n 2899.2 2900.2 2901.1 2902.1 2903.1 2904.  2905.  2906.  2906.9 2907.9\n 2908.9 2909.8 2910.8 2911.8 2912.7 2913.7 2914.7 2915.6 2916.6 2917.5\n 2918.5 2919.5 2920.4 2921.4 2922.4 2923.3 2924.3 2925.3 2926.2 2927.2\n 2928.2 2929.1 2930.1 2931.  2932.  2933.  2933.9 2934.9 2935.9 2936.8\n 2937.8 2938.8 2939.7 2940.7 2941.7 2942.6 2943.6 2944.5 2945.5 2946.5\n 2947.4 2948.4 2949.4 2950.3 2951.3 2952.3 2953.2 2954.2 2955.2 2956.1\n 2957.1 2958.1 2959.  2960.  2960.9 2961.9 2962.9 2963.8 2964.8 2965.8\n 2966.7 2967.7 2968.7 2969.6 2970.6 2971.6 2972.5 2973.5 2974.4 2975.4\n 2976.4 2977.3 2978.3 2979.3 2980.2 2981.2 2982.2 2983.1 2984.1 2985.1\n 2986.  2987.  2988.  2988.9 2989.9 2990.8 2991.8 2992.8 2993.7 2994.7\n 2995.7 2996.6 2997.6 2998.6 2999.5 3000.5 3001.5 3002.4 3003.4 3004.3\n 3005.3 3006.3 3007.2 3008.2 3009.2 3010.1 3011.1 3012.1 3013.  3014.\n 3015.  3015.9 3016.9 3017.9 3018.8 3019.8]\n</code></pre>\n\n<p>and y-values:</p>\n\n<pre><code>[-7.44466803e-04 -6.38664122e-04 -5.34609823e-04 -4.42448211e-04\n -3.41690555e-04 -2.42654847e-04 -1.54987591e-04 -5.91990560e-05\n  2.55600336e-05  1.18132985e-04  2.09025991e-04  2.89400351e-04\n  3.77124735e-04  4.63193491e-04  5.39246590e-04  6.22192168e-04\n  7.03505639e-04  7.75298863e-04 -2.01875984e-04  9.30157920e-04\n -5.76584966e-05  1.59295034e-05  8.08012121e-05  1.51379342e-04\n  2.20383942e-04  2.81148660e-04  3.47183293e-04  4.11664999e-04\n -5.85919853e-04 -5.24369726e-04 -4.64352721e-04 -4.11642743e-04\n -3.54520443e-04 -2.98912259e-04 -2.50154195e-04 -1.97405361e-04\n -1.46152432e-04 -1.01298756e-04 -5.28713359e-05 -1.05509367e-05\n  3.50723226e-05  7.92280634e-05  1.17718164e-04 -8.94084909e-04\n -8.54153425e-04 -8.19451625e-04 -7.82263155e-04 -7.46510819e-04\n -7.15557404e-04 -6.82519783e-04 -6.50903801e-04 -6.23660938e-04\n -5.94732888e-04 -5.69901563e-04  5.09541266e-04 -5.18787274e-04\n -4.97608457e-04 -4.75397944e-04 -4.54574454e-04  6.16170144e-04\n  6.34369460e-04  6.51193332e-04  6.65161962e-04  6.79382903e-04\n  6.92239181e-04  7.02645966e-04  7.12919040e-04  7.21837433e-04\n  7.28708431e-04  7.35061830e-04  7.39629406e-04  7.43428919e-04\n -3.07297461e-04  7.46958864e-04  7.46880284e-04  7.45469661e-04\n  7.43063292e-04  7.39128670e-04 -3.19316915e-04 -3.25181546e-04\n  7.20233508e-04  7.11143871e-04  7.01837339e-04  6.90247525e-04\n  6.78693826e-04  6.64610321e-04  6.49216731e-04  6.34243638e-04\n  6.16365002e-04  5.97180431e-04  5.78798777e-04  5.57136288e-04\n  5.34171219e-04  5.12389754e-04  4.86952378e-04  4.60214976e-04\n  4.35040369e-04  4.05834757e-04  3.78439674e-04  3.46767714e-04\n  3.13798203e-04  2.83016440e-04  2.47582168e-04  2.10850784e-04\n  1.76683478e-04  1.37487404e-04  9.69938540e-05  5.94400641e-05\n  1.64803804e-05 -2.77779379e-05 -6.87212380e-05 -1.15448651e-04\n -1.63476655e-04 -2.07814574e-04 -2.58316150e-04 -3.04881898e-04\n -3.57860800e-04 -4.12145285e-04 -4.62118682e-04 -5.18887480e-04\n -5.76965937e-04 -6.30357620e-04 -6.90928891e-04 -7.52814695e-04\n -8.09637384e-04 -8.74026019e-04 -9.39734858e-04 -1.00000336e-03\n -1.39302040e-05 -7.64653255e-05 -1.47211271e-04 -2.19288563e-04\n -2.85298568e-04 -3.59912644e-04 -4.35865855e-04 -5.05371076e-04\n -5.83876630e-04 -6.63729907e-04 -7.36752757e-04 -8.19175452e-04\n -9.02955255e-04 -9.79520230e-04 -1.06588804e-03 -1.15362314e-03\n -1.23375682e-03 -2.68690973e-04 -3.51178179e-04 -4.44143508e-04\n -5.38494735e-04 -6.24599214e-04 -7.21595167e-04 -8.19989322e-04\n -9.09743181e-04 -1.01080619e-03 -1.11328051e-03 -1.20671793e-03\n -1.31188675e-03 -1.41848077e-03 -4.59113905e-04 -5.68429590e-04\n -6.68044666e-04 -7.80100637e-04 -8.93606563e-04 -9.97006096e-04\n -1.11328198e-03 -1.23102384e-03 -2.80608069e-04 -4.01151072e-04\n -5.23176860e-04 -6.34272793e-04 -7.59132433e-04 -8.85492469e-04\n  5.82568375e-05 -7.09712713e-05 -2.01718186e-04 -3.20694386e-04\n -4.54345109e-04  4.83937944e-04  3.47359177e-04  2.09229380e-04\n  8.35806570e-05 -5.75154297e-05 -2.00183075e-04  7.31074418e-04\n  5.85400722e-04  4.38134142e-04  1.36636107e-03  1.21604716e-03\n  1.06411824e-03  9.25994929e-04  1.83424021e-03  1.69332288e-03\n  1.53518486e-03  2.43978952e-03  2.29455679e-03  2.13160111e-03\n  3.03249801e-03  2.88288661e-03  2.71504221e-03  3.61216191e-03\n  3.45810648e-03  4.35310574e-03  4.17857074e-03  5.08895105e-03\n  4.91110676e-03  5.81963759e-03  5.63845053e-03  6.52672784e-03\n  6.36053995e-03  7.24657091e-03  8.13195214e-03  7.96106363e-03\n  8.84414958e-03  9.72656200e-03  9.55089781e-03  1.04309645e-02\n  1.13103332e-02  1.22091471e-02  1.20067872e-02  1.28830348e-02\n  1.37792517e-02  1.46542196e-02  1.55495062e-02  1.64231655e-02\n  1.72960620e-02  1.81898177e-02  1.90613600e-02  2.10232224e-02\n  2.19165774e-02  2.27871255e-02  2.47527537e-02  2.56456629e-02\n  2.76146667e-02  2.95864701e-02  3.04801022e-02  3.24552956e-02\n  3.44570839e-02  3.64381330e-02  3.73090546e-02  3.93176951e-02\n  4.01883136e-02  3.99413472e-02  3.97172410e-02  3.83507327e-02\n  3.69832945e-02  3.45288224e-02  3.31609323e-02  3.06840301e-02\n  2.71317309e-02  2.46628156e-02  2.21965029e-02  2.08567884e-02\n  1.94892933e-02  1.81480845e-02  1.78733224e-02  1.75962456e-02\n  1.62501951e-02  1.59686819e-02  1.67795042e-02  1.65219970e-02\n  1.62336140e-02  1.59428341e-02  1.56790710e-02  1.53836971e-02\n  1.50858840e-02  1.48157546e-02  1.45132663e-02  1.53347956e-02\n  1.39316877e-02  1.36219595e-02  1.33410446e-02  1.30265037e-02\n  1.27094074e-02  1.24218231e-02  1.20998289e-02  1.06805433e-02\n  1.03861716e-02  1.00565924e-02  9.72436664e-03  8.32959359e-03\n  7.99229514e-03  7.68642420e-03  6.25169507e-03  5.90654091e-03\n  5.59355915e-03  5.24318304e-03  4.89003437e-03  3.47870860e-03\n  3.12024578e-03  2.75896150e-03  2.43137920e-03  2.06468706e-03\n  1.69512373e-03  1.36004754e-03  9.84981135e-04  6.06993019e-04\n  2.64291109e-04 -1.19296827e-04 -4.67067393e-04 -8.56319352e-04\n -1.57470803e-04 -5.13089904e-04 -9.11112209e-04 -1.31219422e-03\n -5.83499839e-04 -9.90445890e-04 -1.40050508e-03 -6.78741650e-04\n -1.09476716e-03 -4.19269184e-04 -7.99266490e-04 -1.28638967e-04\n -5.14130274e-04  1.51560600e-04 -2.83100227e-04  4.21200445e-04\n  1.07979970e-03  6.35578391e-04  1.33364405e-03  1.98499815e-03\n  1.53105139e-03  2.22274354e-03  1.76233437e-03  1.29849487e-03\n  1.98245206e-03  1.51203930e-03  1.03813746e-03  6.08625763e-04\n  1.28038297e-04 -3.07523898e-04 -7.94871439e-04 -1.28580703e-03\n -1.73073413e-03 -2.22854468e-03 -2.73000414e-03 -2.07887167e-03\n -2.58732249e-03 -1.99267690e-03 -2.45681242e-03 -1.86804972e-03\n -1.71336659e-04  4.66408985e-04  2.16330903e-03  2.79823358e-03\n  3.37734816e-03  3.95383298e-03  5.70282896e-03  6.27564610e-03\n  5.72281539e-03  6.34484289e-03  5.78445904e-03  5.22006708e-03\n  4.70866859e-03  3.01363377e-03  2.43748942e-03  7.93751865e-04\n -9.10645379e-04 -2.55893384e-03 -4.26871417e-03 -4.86473696e-03\n -5.40475552e-03 -6.00879559e-03 -5.49914640e-03 -4.93107329e-03\n -4.42706670e-03 -3.92612623e-03 -3.36556562e-03 -2.87038286e-03\n -1.25156694e-03 -6.97404716e-04 -2.09949744e-04  1.40618052e-03\n  1.95380580e-03  2.43337333e-03  2.97583880e-03  3.44934833e-03\n  3.91956988e-03  4.45395838e-03  4.91800203e-03  4.23648918e-03\n  4.76133123e-03  4.07090402e-03  3.37574816e-03  2.74604376e-03\n  2.04183294e-03  1.33281906e-03  1.83408931e-03  1.11587836e-03\n  4.65318351e-04 -2.62183596e-04 -9.94613493e-04 -1.65803553e-03\n -2.39990105e-03 -2.00195122e-03 -2.67843498e-03 -2.28875480e-03\n -3.05028833e-03 -2.59258856e-03 -2.21508630e-03 -1.84142275e-03\n -1.39322682e-03 -1.02679037e-03 -6.64262378e-04  9.30989361e-04\n  1.28749758e-03  1.72095891e-03  2.07002683e-03  3.57853978e-03\n  4.00338438e-03  4.34221377e-03  3.50941007e-03  3.92274433e-03\n  3.07950391e-03  3.39963667e-03  2.63098462e-03  1.77161722e-03\n  9.06633181e-04  1.23321618e-04 -7.52413122e-04 -3.75171969e-04\n -1.26176158e-03 -2.15410634e-03 -1.79051506e-03 -1.52085428e-03\n -2.43005406e-03 -2.07895302e-03 -1.82355060e-03 -2.74985271e-03\n -2.41145220e-03 -2.17054397e-03 -1.93425688e-03 -4.24643055e-04\n -1.95669324e-04  2.86093317e-05  3.45181395e-04  5.60606434e-04]\n</code></pre>\n\n<p>How would you integrate the curve from x = 2672.6 to 30005.3 in Python? </p>\n"}, {"tags": ["python", "tensorflow", "keras", "deep-learning", "linear-regression"], "comments": [{"owner": {"reputation": 1275, "user_id": 5024514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4015d630fb725145f4565d322334e08?s=128&d=identicon&r=PG", "display_name": "ShlomiF", "link": "https://stackoverflow.com/users/5024514/shlomif"}, "edited": false, "score": 0, "creation_date": 1544044926, "post_id": 53640858, "comment_id": 94141384, "body": "<a href=\"https://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>. People can usually only help if they can follow and debug."}], "answers": [{"comments": [{"owner": {"reputation": 662, "user_id": 1626431, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/8Xs9p.jpg?s=128&g=1", "display_name": "iedmrc", "link": "https://stackoverflow.com/users/1626431/iedmrc"}, "edited": false, "score": 0, "creation_date": 1595510864, "post_id": 53641825, "comment_id": 111504884, "body": "The first item solved my problem. I had <code>NaN</code> values in my dataset that I didn&#39;t notice. Thanks!"}], "tags": [], "owner": {"reputation": 534, "user_id": 4995844, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Fy1BLWKorNg/AAAAAAAAAAI/AAAAAAAAACw/Lq5HQbhi9j8/photo.jpg?sz=128", "display_name": "Reza Behzadpour", "link": "https://stackoverflow.com/users/4995844/reza-behzadpour"}, "is_accepted": true, "score": 2, "last_activity_date": 1616689456, "last_edit_date": 1616689456, "creation_date": 1544049418, "answer_id": 53641825, "question_id": 53640858, "link": "https://stackoverflow.com/questions/53640858/loss-nan-in-keras-while-performing-regression/53641825#53641825", "title": "Loss: NaN in Keras while performing regression", "body": "<p>These are the steps that you can take to find the cause of your problem:</p>\n<ol>\n<li><p>Make sure that your dataset is what it should be:</p>\n<ul>\n<li>Look for any <strong>nan</strong>/<strong>inf</strong> in your dataset and fix it.</li>\n<li>Incorrect encoding (convert it to <strong>UTF-8</strong>).</li>\n<li>Invalid values in your column or rows.</li>\n</ul>\n</li>\n<li><p>Normalize your model using <strong>Dropout</strong>, <strong>BatchNormalization</strong>, <strong>L1</strong>/<strong>L2</strong> <strong>regularization</strong>, change your <strong>batch_size</strong>, or scale your data to other ranges (e.g. <strong>[-1, 1]</strong>).</p>\n</li>\n<li><p>Reduce the size of your network.</p>\n</li>\n<li><p>Change other hyper-parameters (e.g. <strong>optimizer</strong> or <strong>activation function</strong>).</p>\n</li>\n</ol>\n<p>You can check <a href=\"https://stackoverflow.com/questions/37232782/nan-loss-when-training-regression-network\">this</a> and <a href=\"https://github.com/keras-team/keras/issues/2134\" rel=\"nofollow noreferrer\">this</a> link to get extra help.</p>\n"}, {"tags": [], "owner": {"reputation": 3336, "user_id": 1269942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abc009c30029c8f5ccf64388cfb088f9?s=128&d=identicon&r=PG", "display_name": "user1269942", "link": "https://stackoverflow.com/users/1269942/user1269942"}, "is_accepted": false, "score": 1, "last_activity_date": 1616689393, "last_edit_date": 1616689393, "creation_date": 1544055476, "answer_id": 53642763, "question_id": 53640858, "link": "https://stackoverflow.com/questions/53640858/loss-nan-in-keras-while-performing-regression/53642763#53642763", "title": "Loss: NaN in Keras while performing regression", "body": "<p>Sometimes one gets nan loss when the learning rate is too high. One solution could be to lessen it. Replace this code:</p>\n<pre><code># Construct the neural network inside of TensorFlow\nmodel.compile(loss='mean_squared_error', optimizer='Adam')\n</code></pre>\n<p>with:</p>\n<pre><code>from keras.optimizers import Adam #maybe put this at the top of your file\nopt = Adam(lr=0.0001) #0.001 was the default, so try a smaller one\nmodel.compile(optimizer=opt, loss='mean_squared_error')\n</code></pre>\n<p>See if that helps.  I would also try with one hidden layer first and see how it goes.</p>\n"}, {"comments": [{"owner": {"reputation": 315, "user_id": 1998320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eLsud.jpg?s=128&g=1", "display_name": "Andrey Kurnikovs", "link": "https://stackoverflow.com/users/1998320/andrey-kurnikovs"}, "edited": false, "score": 1, "creation_date": 1609697993, "post_id": 65410110, "comment_id": 115898049, "body": "True that! <code>df.isnull().sum()</code>"}], "tags": [], "owner": {"reputation": 100, "user_id": 11980301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbb95933fc4b552e1f26a12f8e5a2919?s=128&d=identicon&r=PG&f=1", "display_name": "Marlon Teixeira", "link": "https://stackoverflow.com/users/11980301/marlon-teixeira"}, "is_accepted": false, "score": 1, "last_activity_date": 1616689414, "last_edit_date": 1616689414, "creation_date": 1608646032, "answer_id": 65410110, "question_id": 53640858, "link": "https://stackoverflow.com/questions/53640858/loss-nan-in-keras-while-performing-regression/65410110#65410110", "title": "Loss: NaN in Keras while performing regression", "body": "<p><code>NaN</code> in the input data frame. Before getting the data frame values, the <code>NaN</code> values should be replaced. Otherwise, it will explode the gradient.</p>\n"}], "owner": {"reputation": 89, "user_id": 6136725, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154075091966972/picture?type=large", "display_name": "Erez Ben-Moshe", "link": "https://stackoverflow.com/users/6136725/erez-ben-moshe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6003, "favorite_count": 1, "accepted_answer_id": 53641825, "answer_count": 3, "score": 3, "last_activity_date": 1616689484, "creation_date": 1544044520, "last_edit_date": 1616689484, "question_id": 53640858, "link": "https://stackoverflow.com/questions/53640858/loss-nan-in-keras-while-performing-regression", "title": "Loss: NaN in Keras while performing regression", "body": "<p>I am trying to predict a continuous value (using a Neural Network for the first time). I have normalized the input data. I can't figure out why I am getting a <code>loss: nan</code> output starting with the first epoch.</p>\n<p>I read and tried many suggestions from previous answers to the same question but that none of them helped me.  My training data shape is: <code>(201917, 64)</code>. Here's my code:</p>\n<pre><code>model = Sequential()\nmodel.add(Dense(100, input_dim=X.shape[1], activation='relu'))\nmodel.add(Dense(100, activation='relu'))\nmodel.add(Dense(100, activation='relu'))\n\n# Output layer\nmodel.add(Dense(1, activation='linear'))\n\n# Construct the neural network inside of TensorFlow\nmodel.compile(loss='mean_squared_error', optimizer='Adam')\n\n# train the model\nmodel.fit(X_train, y_train, epochs=10, batch_size=32,\nshuffle=True, verbose=2)\n</code></pre>\n"}, {"tags": ["python", "unicode", "ascii"], "comments": [{"owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 2, "creation_date": 1544052792, "post_id": 53640856, "comment_id": 94144133, "body": "You can use a regular expression to find which substrings have the character class <code>Letter</code> or <code>Number</code> but not <code>Latin</code>."}, {"owner": {"reputation": 407, "user_id": 7275290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c579a18ea23398d5e34cb67e63d8e64?s=128&d=identicon&r=PG&f=1", "display_name": "ltt", "link": "https://stackoverflow.com/users/7275290/ltt"}, "reply_to_user": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "edited": false, "score": 0, "creation_date": 1544114961, "post_id": 53640856, "comment_id": 94170597, "body": "Thanks for taking the time to answer the question. I do want to accept the Latin  character class because I want to include letters with accents. So I can now use a regex that only accepts letters, numbers and latin characters instead of using unidecode - I didn&#39;t know there was a latin character class so that helped a lot. If you wish, you can add an answer to this question stating that I should  use regex including letter, numbers and latin character class and I&#39;ll accept it."}], "answers": [{"tags": [], "owner": {"reputation": 12194, "user_id": 4474419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04ce27f0ebe4713b51911cd8475c3b42?s=128&d=identicon&r=PG", "display_name": "Davislor", "link": "https://stackoverflow.com/users/4474419/davislor"}, "is_accepted": true, "score": 1, "last_activity_date": 1544115425, "creation_date": 1544115425, "answer_id": 53656266, "question_id": 53640856, "link": "https://stackoverflow.com/questions/53640856/removal-of-foreign-letters-while-keeping-english-letters-with-accents-in-python/53656266#53656266", "title": "Removal of foreign letters while keeping english letters with accents in python", "body": "<p>Modern regular-expression engines support a character class <code>Latin</code> or <code>isLatin</code>, which will match accented or unaccented Latin letters.</p>\n\n<p>A regular expression matching only what you want would be a little more complicated. You <strong>do not</strong> want to simply match <code>Letter</code> or <code>Number</code>, as those will match letters and numbers from other scripts.  Neither do you want to include or exclude all combining accents: you want small Latin letter a + combining acute accent to show up as \u00e1, but an accented Greek letter not to.  So, you would want to match something like <code>(\\p{Latin}\\p{Mark}*)|\\p{Punctuation}|\\p{Separator}</code>.</p>\n"}], "owner": {"reputation": 407, "user_id": 7275290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c579a18ea23398d5e34cb67e63d8e64?s=128&d=identicon&r=PG&f=1", "display_name": "ltt", "link": "https://stackoverflow.com/users/7275290/ltt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 1, "accepted_answer_id": 53656266, "answer_count": 1, "score": -1, "last_activity_date": 1544115443, "creation_date": 1544044509, "last_edit_date": 1544115443, "question_id": 53640856, "link": "https://stackoverflow.com/questions/53640856/removal-of-foreign-letters-while-keeping-english-letters-with-accents-in-python", "title": "Removal of foreign letters while keeping english letters with accents in python", "body": "<p>Is there any way to remove foreign letters but keep english letters with accents in python? </p>\n\n<p>e.g. I would want Pic d\u2019\u00d3s to be converted to Pic d'Os but not have \u9a6c\u8428\u7eb3 converted to Ma Sa Na - ideally I would want it converted to a blank string.</p>\n\n<p>I have used unidecode but unidecode converts foreign letters to ascii as well. </p>\n\n<p>Thanks for looking into this.</p>\n"}, {"tags": ["python", "nlp", "countvectorizer"], "comments": [{"owner": {"reputation": 2978, "user_id": 5755357, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OIpYiRYdxjU/AAAAAAAAAAI/AAAAAAAAAEc/VPiHlIZsMnE/photo.jpg?sz=128", "display_name": "willk", "link": "https://stackoverflow.com/users/5755357/willk"}, "edited": false, "score": 0, "creation_date": 1544044750, "post_id": 53640817, "comment_id": 94141320, "body": "Is <code>CountVectorizer.get_feature_names()</code> what you are looking for? <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html#sklearn.feature_extraction.text.CountVectorizer.get_feature_names\" rel=\"nofollow noreferrer\">This method</a> maps from the integer indices to the feature names."}, {"owner": {"reputation": 88, "user_id": 8731625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0204a6b424f72b854884ab4fc74539e9?s=128&d=identicon&r=PG&f=1", "display_name": "Lucien Ledune", "link": "https://stackoverflow.com/users/8731625/lucien-ledune"}, "reply_to_user": {"reputation": 2978, "user_id": 5755357, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OIpYiRYdxjU/AAAAAAAAAAI/AAAAAAAAAEc/VPiHlIZsMnE/photo.jpg?sz=128", "display_name": "willk", "link": "https://stackoverflow.com/users/5755357/willk"}, "edited": false, "score": 0, "creation_date": 1544045117, "post_id": 53640817, "comment_id": 94141479, "body": "Perfect ! Thanks a lot :)"}, {"owner": {"reputation": 2978, "user_id": 5755357, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-OIpYiRYdxjU/AAAAAAAAAAI/AAAAAAAAAEc/VPiHlIZsMnE/photo.jpg?sz=128", "display_name": "willk", "link": "https://stackoverflow.com/users/5755357/willk"}, "edited": false, "score": 0, "creation_date": 1544048365, "post_id": 53640817, "comment_id": 94142696, "body": "No problem, glad this helped!"}], "owner": {"reputation": 88, "user_id": 8731625, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0204a6b424f72b854884ab4fc74539e9?s=128&d=identicon&r=PG&f=1", "display_name": "Lucien Ledune", "link": "https://stackoverflow.com/users/8731625/lucien-ledune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544044355, "creation_date": 1544044355, "question_id": 53640817, "link": "https://stackoverflow.com/questions/53640817/scikitlearn-textual-countvectorizer-csr-matrix-to-dictionary", "title": "Scikitlearn (textual) CountVectorizer (csr_matrix) to dictionary?", "body": "<p>I used scikit-learn CountVectorizer function to count word frequency in raw text, and it seems to be working when printed, but i can't find how to convert it to a dictionary or an array i could work with. </p>\n\n<p>I tried .toarray() but this only returns the values, not the word position associated with it. </p>\n\n<pre><code>bowChapters = []\nfor i in range(0,27):\n    countV = CountVectorizer(max_features=50) #top 50 words for the chapter \n    chapter = [temp2[i]]\n    bowChapters.append(countV.fit_transform(chapter))\n\nprint(bowChapters[0]) #Prints correctly in console \n</code></pre>\n\n<p>the output of print is :</p>\n\n<pre><code> (0, 29)       11\n (0, 35)       29\n (0, 22)       12\n (0, 18)       8\n</code></pre>\n\n<p>I'd like to get a dictionary where i can see the tuples assiciated with values but couldn't find the right function in the doc</p>\n"}, {"tags": ["python", "spatial", "correlation", "statsmodels", "autoregressive-models"], "owner": {"reputation": 28, "user_id": 5745022, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XZ8qP.jpg?s=128&g=1", "display_name": "Loukas Kt.", "link": "https://stackoverflow.com/users/5745022/loukas-kt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 661, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544448002, "creation_date": 1544044280, "last_edit_date": 1544448002, "question_id": 53640799, "link": "https://stackoverflow.com/questions/53640799/python-spatial-autoregressive-model", "title": "Python Spatial Autoregressive model", "body": "<p>I have set up in Python a Cyclostationary Autoregressive Process of order 1 (AR-1) in order to generate multiple future wind speed time series. Until now, obviously, I examine the temporal auto-correlation of my wind speed data having a univariate case just for one single pixel.</p>\n\n<p>Assuming that I have time series for multiple pixels (wind speed patterns) and I want to extend this procedure in space in order to generate artificial time series not only correlated in time but also in space. Which is the most appropriate and \"easily\" handled methodology?</p>\n\n<p>I am not an expert on this kind of statistical methods so I am a bit lost and I apologize for any mistakes. I studied for Space-Time Autoregressive models (STAR - <a href=\"https://pysal.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">PySAL</a>), Vector Autoregressive (VAR) models, Gaussian Random Fields (<a href=\"https://scikit-learn.org/stable/modules/gaussian_process.html\" rel=\"nofollow noreferrer\">SkiKit-Learn</a>) etc. but I see that the most appropriate methodology for this kind of autoregression is mostly based on: </p>\n\n<ul>\n<li>Vector Autoregressive models (VAR) using <a href=\"https://www.statsmodels.org/stable/index.html\" rel=\"nofollow noreferrer\">statsmodels</a> where my Multivariate case is based on all neighboring pixels time series is that correct?</li>\n</ul>\n\n<p>I am just trying to find which is the most appropriate procedure to study Spatial Autocorrelation in an Autoregressive process considering that I am not an expert in this kind of analysis. I have already seen this <a href=\"https://stats.stackexchange.com/questions/47202/var-vs-star-for-space-time-autoregression-in-python\">answer</a> but I couldn't figure out which one is the best option.</p>\n"}, {"tags": ["python", "anaconda", "jupyter-notebook", "networkx"], "comments": [{"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1544044390, "post_id": 53640792, "comment_id": 94141160, "body": "is networkx installed?"}, {"owner": {"reputation": 45, "user_id": 10438753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0021c5b6e3bed8464800cb4fcb52be05?s=128&d=identicon&r=PG&f=1", "display_name": "Xi N", "link": "https://stackoverflow.com/users/10438753/xi-n"}, "reply_to_user": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1544044673, "post_id": 53640792, "comment_id": 94141278, "body": "yes, this is why it&#39;s bizarre"}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1544045263, "post_id": 53640792, "comment_id": 94141552, "body": "when you start the Jupyter Notebook you can select the version of python ? have you tried to see if you have multiple versions ?"}, {"owner": {"reputation": 45, "user_id": 10438753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0021c5b6e3bed8464800cb4fcb52be05?s=128&d=identicon&r=PG&f=1", "display_name": "Xi N", "link": "https://stackoverflow.com/users/10438753/xi-n"}, "reply_to_user": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1544045466, "post_id": 53640792, "comment_id": 94141643, "body": "I have Python 2 and 3, both of them work fine."}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1544045596, "post_id": 53640792, "comment_id": 94141698, "body": "Can you type <code>import sys</code> and <code>sys.executable</code> and let me what you get ?"}, {"owner": {"reputation": 45, "user_id": 10438753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0021c5b6e3bed8464800cb4fcb52be05?s=128&d=identicon&r=PG&f=1", "display_name": "Xi N", "link": "https://stackoverflow.com/users/10438753/xi-n"}, "reply_to_user": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1544046775, "post_id": 53640792, "comment_id": 94142156, "body": "import sys works fine. sys.executable gives (/Documents/anaconda3/bin/python&#39;)"}, {"owner": {"reputation": 17226, "user_id": 2966723, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e40a62626d129d5df080d4d57c22b53d?s=128&d=identicon&r=PG&f=1", "display_name": "Joel", "link": "https://stackoverflow.com/users/2966723/joel"}, "edited": false, "score": 0, "creation_date": 1544049192, "post_id": 53640792, "comment_id": 94142977, "body": "what version of networkx?  Was it recently updated?"}, {"owner": {"reputation": 45, "user_id": 10438753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0021c5b6e3bed8464800cb4fcb52be05?s=128&d=identicon&r=PG&f=1", "display_name": "Xi N", "link": "https://stackoverflow.com/users/10438753/xi-n"}, "edited": false, "score": 0, "creation_date": 1544063861, "post_id": 53640792, "comment_id": 94146660, "body": "I upgraded networkx using <code>pip install --upgrade networkx</code> and it didn&#39;t work."}, {"owner": {"reputation": 22382, "user_id": 5025009, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7KIA9.png?s=128&g=1", "display_name": "seralouk", "link": "https://stackoverflow.com/users/5025009/seralouk"}, "edited": false, "score": 0, "creation_date": 1544087317, "post_id": 53640792, "comment_id": 94154194, "body": "If you type the same commands in the terminal, do you get the same path ? (/Documents/anaconda3/bin/python&#39;)"}, {"owner": {"reputation": 45, "user_id": 10438753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0021c5b6e3bed8464800cb4fcb52be05?s=128&d=identicon&r=PG&f=1", "display_name": "Xi N", "link": "https://stackoverflow.com/users/10438753/xi-n"}, "edited": false, "score": 0, "creation_date": 1544326723, "post_id": 53640792, "comment_id": 94234762, "body": "yes, I get the path as <code>~&#47;Documents&#47;anaconda3&#47;bin&#47;python</code> Now I figured out something, If I created ipynb file in my desktop <code>import networkx</code> works fine, but  If I created ipynb file  in my project folder it gives the same error in the top."}], "owner": {"reputation": 45, "user_id": 10438753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0021c5b6e3bed8464800cb4fcb52be05?s=128&d=identicon&r=PG&f=1", "display_name": "Xi N", "link": "https://stackoverflow.com/users/10438753/xi-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 699, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1544047081, "creation_date": 1544044247, "last_edit_date": 1544047081, "question_id": 53640792, "link": "https://stackoverflow.com/questions/53640792/error-when-running-networkx-on-jupyter-notebook", "title": "Error when running networkx on Jupyter Notebook", "body": "<p>Today without doing anything this error appeared to me and to my friend at a university. Everything was working normally. I'm using Anaconda and Jupyter Notebook.</p>\n\n<p>I ran python on Terminal and the error didn't appear.</p>\n\n<p>I didn't change Anaconda directory.</p>\n\n<p>Networkx is installed.</p>\n\n<p>this is the error</p>\n\n<pre><code>---------------------------------------------------------------------------\nModuleNotFoundError                       Traceback (most recent call last)\n&lt;ipython-input-2-f59024e867bc&gt; in &lt;module&gt;()\n----&gt; 1 import networkx as nx\n      2 import networkx as net\n      3 \n      4 import pandas as pd\n      5 \n\n~/Desktop/xxxxxxx/networkx.py in &lt;module&gt;()\n     13 import matplotlib.pyplot\n     14 import matplotlib.pyplot as plt\n---&gt; 15 from networkx.drawing.layout import shell_layout,circular_layout,spectral_layout,spring_layout,random_layout\n     16 \n     17 import random\n\nModuleNotFoundError: No module named 'networkx.drawing'; 'networkx' is not a package\n</code></pre>\n\n<p>Did some networkx got deleted or infected or what?</p>\n"}, {"tags": ["python", "keras", "neural-network", "keras-layer"], "answers": [{"tags": [], "owner": {"reputation": 134, "user_id": 9060826, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nqpPF.jpg?s=128&g=1", "display_name": "Amin Golnari", "link": "https://stackoverflow.com/users/9060826/amin-golnari"}, "is_accepted": false, "score": 0, "last_activity_date": 1544079359, "last_edit_date": 1544079359, "creation_date": 1544046919, "answer_id": 53641355, "question_id": 53640785, "link": "https://stackoverflow.com/questions/53640785/keras-functional-api-error-in-output-layer-shape/53641355#53641355", "title": "Keras Functional API error in output layer shape", "body": "<p>you must reshape Conv2D Layer from shape (H,W,1) to (H*W*1,)</p>\n\n<pre><code>import numpy as np\n</code></pre>\n\n<p>then</p>\n\n<pre><code>x = keras.layers.concatenate([x1, x2])\n# add this lines to code\ndim = np.prod(x._shape[1:])\nx = keras.layers.Reshape([dim.value,])(x)\nx = Dense(64, activation='relu')(x)\n</code></pre>\n\n<p><strong>or</strong></p>\n\n<pre><code>x = Dense(64, activation='relu')(x)\n# add this lines to code\ndim = np.prod(x._shape[1:])\nx = keras.layers.Reshape([dim.value,])(x)\npredictions = Dense(1, activation='sigmoid')(x)\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10751659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa75d22833af68ebdaa9f8723e548708?s=128&d=identicon&r=PG&f=1", "display_name": "pcrace97", "link": "https://stackoverflow.com/users/10751659/pcrace97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 501, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544079359, "creation_date": 1544044211, "last_edit_date": 1544048969, "question_id": 53640785, "link": "https://stackoverflow.com/questions/53640785/keras-functional-api-error-in-output-layer-shape", "title": "Keras Functional API error in output layer shape", "body": "<p>So I'm building a neural network that will take in 2 inputs (images) and return a binary output (0 or 1).</p>\n\n<p>I already have my labels and inputs.</p>\n\n<p>Shapes of the labels and inputs are the following:</p>\n\n<pre><code>--------Labels--------\n\n(8281,)\n\n--------Images--------\n\n(8281, 500, 500, 1) \n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>input_front_images1 = Input(shape=(500, 500, 1))\ninput_front_images2 = Input(shape=(500, 500, 1))\n\nx1=Conv2D(32, kernel_size=3,activation='relu')(input_front_images1)\nx2=Conv2D(32, kernel_size=3,activation='relu')(input_front_images2)\n\nx = keras.layers.concatenate([x1, x2])\nx = Dense(64, activation='relu')(x)\npredictions = Dense(1, activation='sigmoid')(x)\nmodel = Model(inputs=[input_front_images1,input_front_images2], \noutputs=predictions)\n\n\nmodel.compile( optimizer= 'rmsprop' , loss='categorical_crossentropy' , \nmetrics=['accuracy'])\nmodel.summary()\nmodel.fit([image_front_pairs1,image_front_pairs2], \n[labels_front_pairs],epochs=2,batch_size=64) \n</code></pre>\n\n<p>It gives me this error:</p>\n\n<pre><code>ValueError: Error when checking target: expected dense_39 to have 4 dimensions, but got array with shape (8281, 1)\n</code></pre>\n"}, {"tags": ["python", "subprocess", "gtk3", "python-multithreading"], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 4339119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70d72e0d7d415cedf793a65a89f37bf?s=128&d=identicon&r=PG", "display_name": "Danial Behzadi", "link": "https://stackoverflow.com/users/4339119/danial-behzadi"}, "edited": false, "score": 0, "creation_date": 1544108100, "post_id": 53644104, "comment_id": 94166604, "body": "Great way. I changed the function like <a href=\"https://gitlab.com/tractor-team/carburetor/blob/67e50debe4af6b150ea7d3dcb95170044996b674/carburetor#L93\" rel=\"nofollow noreferrer\">this</a> and there is some improvements in overall code, but the feed function still works after the process is done and just prints the first line of the whole output. Have you any idea about that? I think there is a malfunction in when IO_IN is triggered."}, {"owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "reply_to_user": {"reputation": 151, "user_id": 4339119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70d72e0d7d415cedf793a65a89f37bf?s=128&d=identicon&r=PG", "display_name": "Danial Behzadi", "link": "https://stackoverflow.com/users/4339119/danial-behzadi"}, "edited": false, "score": 0, "creation_date": 1544116749, "post_id": 53644104, "comment_id": 94171547, "body": "You may want to try <code>task = Popen([command,  &quot;start&quot;], stdout=PIPE, stderr = STDOUT)</code>."}, {"owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "reply_to_user": {"reputation": 151, "user_id": 4339119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70d72e0d7d415cedf793a65a89f37bf?s=128&d=identicon&r=PG", "display_name": "Danial Behzadi", "link": "https://stackoverflow.com/users/4339119/danial-behzadi"}, "edited": false, "score": 0, "creation_date": 1544116797, "post_id": 53644104, "comment_id": 94171563, "body": "I know I have seen the problem that you are describing myself, but it was a long time ago and I forget how I fixed it."}, {"owner": {"reputation": 151, "user_id": 4339119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70d72e0d7d415cedf793a65a89f37bf?s=128&d=identicon&r=PG", "display_name": "Danial Behzadi", "link": "https://stackoverflow.com/users/4339119/danial-behzadi"}, "edited": false, "score": 0, "creation_date": 1544311201, "post_id": 53644104, "comment_id": 94232441, "body": "I fixed it by flushing the buffer after each print in the source app via setting <code>flush=True</code> in <code>print</code> commands."}], "tags": [], "owner": {"reputation": 3049, "user_id": 6150775, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f16a0c1701c5debb928d96fa22ba0582?s=128&d=identicon&r=PG&f=1", "display_name": "theGtknerd", "link": "https://stackoverflow.com/users/6150775/thegtknerd"}, "is_accepted": true, "score": 1, "last_activity_date": 1544066207, "creation_date": 1544066207, "answer_id": 53644104, "question_id": 53640759, "link": "https://stackoverflow.com/questions/53640759/realtime-output-from-program-in-python-in-gui/53644104#53644104", "title": "realtime output from program in python in GUI", "body": "<p>Here is a small example for you to learn from. So in my Python file I have:</p>\n\n<pre><code>#!/usr/bin/env python3\n\nimport gi\ngi.require_version('Gtk', '3.0')\nfrom gi.repository import Gtk, GLib, GObject\nfrom subprocess import Popen, PIPE, STDOUT\nimport os, sys\n\n\nclass GUI:\n    def __init__(self):\n\n        window = Gtk.Window()\n        self.label = Gtk.Label()\n        window.add(self.label)\n        window.show_all()\n        window.connect(\"destroy\", self.on_window_destroy)\n\n        p = Popen(['./long_run.sh'], stdout = PIPE,stderr = STDOUT,stdin = PIPE)\n        self.io_id = GObject.io_add_watch(p.stdout, GObject.IO_IN, self.feed)\n        GObject.io_add_watch(p.stdout, GObject.IO_HUP, self.thread_finished)\n\n    def feed (self, stdout, condition):\n        line = stdout.readline()\n        line = line.decode(encoding=\"utf-8\", errors=\"strict\")\n        self.label.set_label(line)\n        return True\n\n    def thread_finished (self, stdout, condition):\n        GObject.source_remove(self.io_id)\n        stdout.close()\n        self.label.set_label(\"Hurray, all done!\")\n\n    def on_window_destroy(self, window):\n        Gtk.main_quit()\n        print (\"shutdown\")\n\ndef main():\n    app = GUI()\n    Gtk.main()\n\nif __name__ == \"__main__\":\n    sys.exit(main())\n</code></pre>\n\n<p>And in the file long_run.sh I have:</p>\n\n<pre><code>#!/bin/bash\n\necho \"Loading, please wait...\"\nsleep 5\necho \"10%\"\nsleep 5\necho \"20%\"\nsleep 5\necho \"30%\"\nsleep 5\necho \"40%\"\nsleep 5\necho \"50%\"\nsleep 5\necho \"60%\"\nsleep 5\necho \"70%\"\nsleep 5\necho \"80%\"\nsleep 5\necho \"90%\"\nsleep 5\necho \"100%\"\nsleep 5\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 4339119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b70d72e0d7d415cedf793a65a89f37bf?s=128&d=identicon&r=PG", "display_name": "Danial Behzadi", "link": "https://stackoverflow.com/users/4339119/danial-behzadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 316, "favorite_count": 0, "accepted_answer_id": 53644104, "answer_count": 1, "score": 2, "last_activity_date": 1544138081, "creation_date": 1544044097, "last_edit_date": 1544138081, "question_id": 53640759, "link": "https://stackoverflow.com/questions/53640759/realtime-output-from-program-in-python-in-gui", "title": "realtime output from program in python in GUI", "body": "<p>i am writing a graphical shell for a command-line program in python using GTK. The main program has output like this:</p>\n\n<pre><code>Starting Tractor:\n\nDec 04 22:10:34.000 [notice] Bootstrapped 0%: Starting\nDec 04 22:10:34.000 [notice] Bootstrapped 80%: Connecting to the Tor network\nDec 04 22:10:35.000 [notice] Bootstrapped 85%: Finishing handshake with first hop\nDec 04 22:10:36.000 [notice] Bootstrapped 90%: Establishing a Tor circuit\nDec 04 22:10:37.000 [notice] Bootstrapped 100%: Done\nTractor is conneted.\n</code></pre>\n\n<p>I have a start button which starts the program via subprocess. since I want the main window to be operative during the start process, I used thrading for that. Here is my code:</p>\n\n<pre><code>def on_start_clicked(self, button):\n    spinner = Gtk.Spinner()\n    self.props.icon_widget = spinner\n    spinner.start()\n    self.show_all()\n    header_bar = self.get_parent()\n    if self.is_running():\n        def task_thread():\n            task = Popen(command + \"stop\", stdout=PIPE, shell=True)\n            task.wait()\n            spinner.stop()\n            header_bar.show_progress_button(False)\n            self.update_label()\n    else:\n        def task_thread():\n            header_bar.show_progress_button(True)\n            task = Popen(command + \"start\", stdout=PIPE, shell=True)\n            while True:\n                output = task.stdout.readline().decode(\"utf-8\")\n                if output == '' and task.poll() is not None:\n                    break\n                if output and '%' in output:\n                    print(output.split()[5][:-2])\n            task.wait()\n            spinner.stop()\n            self.update_label()\n\n    thread = Thread(target=task_thread)\n    thread.daemon = True\n    thread.start()\n</code></pre>\n\n<p>The problem is that the log output is not realtime, but it waits until the whole process to be complete and then prints the whole output altogether!</p>\n\n<p>I want the actual percentage at the time, in order to pass it to a progress bar, showing how much of the task is done. How can I accomplish that?</p>\n\n<h1>EDIT</h1>\n\n<p>I changed the code as following thanks to <a href=\"https://stackoverflow.com/users/6150775/thegtknerd\">theGtknerd</a>, but the feed function still works after the process is done and just prints the first line of the whole output. I think here is a malfunction in when IO_IN is triggered.</p>\n\n<pre><code>def thread_finished (self, stdout, condition):\n    GLib.source_remove(self.io_id)\n    stdout.close()\n    self.spinner.stop()\n    self.update_label()\n    print(\"heeey\")\n    return False\n\ndef feed (self, stdout, condition):\n    line = stdout.readline()\n    line = line.decode(\"utf-8\")\n    print(line)\n    return True\n\ndef on_start_clicked(self, button):\n    self.spinner = Gtk.Spinner()\n    self.props.icon_widget = self.spinner\n    self.spinner.start()\n    self.show_all()\n    header_bar = self.get_parent()\n    if self.is_running():\n        header_bar.show_progress_button(False)\n        task = Popen(command + \"stop\", stdout=PIPE, shell=True)\n    else:\n        header_bar.show_progress_button(True)\n        task = Popen(command + \"start\", stdout=PIPE, shell=True)\n    self.io_id = GLib.io_add_watch(task.stdout, GLib.IO_IN, self.feed)\n    GLib.io_add_watch(task.stdout, GLib.IO_HUP, self.thread_finished)\n</code></pre>\n"}, {"tags": ["python", "pandas", "dictionary", "dataframe", "pyarrow"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1544044319, "post_id": 53640738, "comment_id": 94141129, "body": "Why did you set <code>preserve_index=False</code> if you <i>wanted</i> to preserve the index?"}], "answers": [{"tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 3, "last_activity_date": 1544045149, "last_edit_date": 1544045149, "creation_date": 1544044484, "answer_id": 53640842, "question_id": 53640738, "link": "https://stackoverflow.com/questions/53640738/preserve-index-when-loading-pyarrow-parquet-from-pandas-dataframe/53640842#53640842", "title": "Preserve index when loading pyarrow parquet from pandas DataFrame", "body": "<p>If you wanted to preserve the index, then you should've specified as such; set <code>preserve_index=True</code>:</p>\n\n<pre><code>table = pa.Table.from_pandas(df, preserve_index=True)\n</code></pre>\n\n<hr>\n\n<pre><code>pq.write_table(table, 'file.parquet', flavor='spark')\npq.read_table('file.parquet').to_pandas()  # Index is preserved.\n\n     2018-12-06  2018-12-07\nKEY       250.0       234.0\n</code></pre>\n"}], "owner": {"reputation": 848, "user_id": 1125805, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/llbKa.jpg?s=128&g=1", "display_name": "unixeO", "link": "https://stackoverflow.com/users/1125805/unixeo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 975, "favorite_count": 0, "accepted_answer_id": 53640842, "answer_count": 1, "score": 0, "last_activity_date": 1544045604, "creation_date": 1544044025, "last_edit_date": 1544045604, "question_id": 53640738, "link": "https://stackoverflow.com/questions/53640738/preserve-index-when-loading-pyarrow-parquet-from-pandas-dataframe", "title": "Preserve index when loading pyarrow parquet from pandas DataFrame", "body": "<p>I need to convert a dict with dict values to parquet, I have data that look like this: </p>\n\n<p><code>{\"KEY\":{\"2018-12-06\":250.0,\"2018-12-07\":234.0}}</code></p>\n\n<p>I'm converting to pandas dataframe and then writing to pyarrow table: </p>\n\n<pre><code>import pandas as pd\nimport pyarrow as pa\nimport pyarrow.parquet as pq\n\ndata = {\"KEY\":{\"2018-12-06\":250.0,\"2018-12-07\":234.0}}\ndf = pd.DataFrame.from_dict(data, orient='index')\ntable = pa.Table.from_pandas(df, preserve_index=False)\npq.write_table(table, 'file.parquet', flavor='spark')\n</code></pre>\n\n<p>I end up with data, that only have dates and values, but without the key of the dict.:</p>\n\n<pre><code>{\"2018-12-06\":250.0,\"2018-12-07\":234.0}\n</code></pre>\n\n<p>What I need is to also have the key of the data:</p>\n\n<pre><code>{\"KEY\": {\"2018-12-06\":250.0,\"2018-12-07\":234.0}}\n</code></pre>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 0, "creation_date": 1546807796, "post_id": 53640734, "comment_id": 94964796, "body": "Was this answered?"}], "answers": [{"tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": false, "score": 2, "last_activity_date": 1544047212, "creation_date": 1544047212, "answer_id": 53641414, "question_id": 53640734, "link": "https://stackoverflow.com/questions/53640734/cant-get-the-desired-text-in-beautifulsoup/53641414#53641414", "title": "Can&#39;t Get the Desired Text in Beautifulsoup", "body": "<p>You want to use next_sibling</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\nhtml = '''\n&lt;div class=\"col1 client\"&gt;\n   &lt;a name=\"12345\"&gt;&lt;/a&gt;\n   \"Jane Doe\"\n   &lt;div class=\"request\"&gt;&lt;i&gt;insurance claim&lt;/i&gt;&lt;/div&gt;        \n&lt;/div&gt;\n'''\n\nsoup = BeautifulSoup(html, 'lxml')\nfor item in soup.select(\".col1.client a\"):\n    print(item.next_sibling)\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>print([item.next_sibling.strip() for item in soup.select(\".col1.client a\")])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 207, "user_id": 7180194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tnExZ.jpg?s=128&g=1", "display_name": "MITHU", "link": "https://stackoverflow.com/users/7180194/mithu"}, "is_accepted": false, "score": 0, "last_activity_date": 1544081244, "creation_date": 1544081244, "answer_id": 53646463, "question_id": 53640734, "link": "https://stackoverflow.com/questions/53640734/cant-get-the-desired-text-in-beautifulsoup/53646463#53646463", "title": "Can&#39;t Get the Desired Text in Beautifulsoup", "body": "<p>Another usage might be the following:</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\nhtmldocs = \"\"\"\n&lt;div class=\"col1 client\"&gt;\n   &lt;a name=\"12345\"&gt;&lt;/a&gt;\n   \"Jane Doe\"\n   &lt;div class=\"request\"&gt;&lt;i&gt;insurance claim&lt;/i&gt;&lt;/div&gt;        \n&lt;/div&gt;\n\"\"\"\nsoup = BeautifulSoup(htmldocs, 'html5lib')\nfor item in soup.select(\".request\"):\n    print(item.previous_sibling.strip())\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 3877978, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6976355527ab567e3132dce78b7fb060?s=128&d=identicon&r=PG&f=1", "display_name": "jdgalaway", "link": "https://stackoverflow.com/users/3877978/jdgalaway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1544081244, "creation_date": 1544044014, "question_id": 53640734, "link": "https://stackoverflow.com/questions/53640734/cant-get-the-desired-text-in-beautifulsoup", "title": "Can&#39;t Get the Desired Text in Beautifulsoup", "body": "<p>Sorry if the below formatting is incorrect.  I'm trying to scrape just the \"Jane Doe\" section of the below html</p>\n\n<pre><code>&lt;div class=\"col1 client\"&gt;\n   &lt;a name=\"12345\"&gt;&lt;/a&gt;\n   \"Jane Doe\"\n   &lt;div class=\"request\"&gt;&lt;i&gt;insurance claim&lt;/i&gt;&lt;/div&gt;        \n&lt;/div&gt;\n</code></pre>\n\n<p>My code at the bottom will output both \"Jane Doe\" and <em>insurance claim</em>.  How can I just get the \"Jane Doe\" text?  Thank you in advance for your help.  </p>\n\n<pre><code>soup = BeautifulSoup(page.content, 'html.parser')\nlistings = soup.find(id=\"listings\")\nlisting_items = listings.find_all(class_=\"col1 client\")\n</code></pre>\n"}, {"tags": ["python", "pandas", "optimization"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1544044074, "post_id": 53640727, "comment_id": 94141000, "body": "This statement takes 138 &#181;s to run on my old 2013 Mac. What exactly is the problem with it?"}, {"owner": {"reputation": 119, "user_id": 9988003, "user_type": "registered", "profile_image": "https://graph.facebook.com/2140593302623652/picture?type=large", "display_name": "\u0141ukasz Szymankiewicz", "link": "https://stackoverflow.com/users/9988003/%c5%81ukasz-szymankiewicz"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1544044210, "post_id": 53640727, "comment_id": 94141071, "body": "Honestly, i have no idea. After running this code I get performance above 0.6 seconds. It is totally strange because in other place of this DataFrame I perform very similiar division and it is made in no-time."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1544044284, "post_id": 53640727, "comment_id": 94141109, "body": "What Python and Pandas versions?"}, {"owner": {"reputation": 119, "user_id": 9988003, "user_type": "registered", "profile_image": "https://graph.facebook.com/2140593302623652/picture?type=large", "display_name": "\u0141ukasz Szymankiewicz", "link": "https://stackoverflow.com/users/9988003/%c5%81ukasz-szymankiewicz"}, "edited": false, "score": 0, "creation_date": 1544044338, "post_id": 53640727, "comment_id": 94141138, "body": "Python 3.6.3 Anaconda custom(64-bit) and 0.22.0 pandas"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1544044385, "post_id": 53640727, "comment_id": 94141157, "body": "I get about 0.002 seconds on repl.it, which is painfully slow already, but nowhere near the absurdly atrocious 0.7 second timing you report."}, {"owner": {"reputation": 119, "user_id": 9988003, "user_type": "registered", "profile_image": "https://graph.facebook.com/2140593302623652/picture?type=large", "display_name": "\u0141ukasz Szymankiewicz", "link": "https://stackoverflow.com/users/9988003/%c5%81ukasz-szymankiewicz"}, "edited": false, "score": 0, "creation_date": 1544044658, "post_id": 53640727, "comment_id": 94141273, "body": "I couldn<code>t belive it either. After compiling it at repl.it I get somewhere similiar results (0.002s). I</code>m so confused by this."}, {"owner": {"reputation": 232, "user_id": 10101463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1jcR.jpg?s=128&g=1", "display_name": "MisterMonk", "link": "https://stackoverflow.com/users/10101463/mistermonk"}, "edited": false, "score": 0, "creation_date": 1544044684, "post_id": 53640727, "comment_id": 94141286, "body": "418 &#181;s &#177; 76.2 &#181;s per loop (mean &#177; std. dev. of 7 runs, 1000 loops each) in my Juypter"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1544045005, "post_id": 53640727, "comment_id": 94141426, "body": "Can you just work with the <code>ndarray</code>: <code>df.rand.values&#47;2</code>?"}, {"owner": {"reputation": 119, "user_id": 9988003, "user_type": "registered", "profile_image": "https://graph.facebook.com/2140593302623652/picture?type=large", "display_name": "\u0141ukasz Szymankiewicz", "link": "https://stackoverflow.com/users/9988003/%c5%81ukasz-szymankiewicz"}, "reply_to_user": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1544045314, "post_id": 53640727, "comment_id": 94141587, "body": "It works! Thanks @ALollz! But still, i can`t really tell what creates this strange behavior."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1544047147, "post_id": 53640727, "comment_id": 94142277, "body": "Tried again locally, with pandas 0.22.0 and Python 3.6.3. 0.0008314 seconds. No sign of whatever&#39;s happening on your end."}], "owner": {"reputation": 119, "user_id": 9988003, "user_type": "registered", "profile_image": "https://graph.facebook.com/2140593302623652/picture?type=large", "display_name": "\u0141ukasz Szymankiewicz", "link": "https://stackoverflow.com/users/9988003/%c5%81ukasz-szymankiewicz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 306, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1555935348, "creation_date": 1544043991, "last_edit_date": 1555935348, "question_id": 53640727, "link": "https://stackoverflow.com/questions/53640727/very-slow-performance-of-pandas-dataframe-division", "title": "Very slow performance of pandas DataFrame division", "body": "<p>I`m currently working on some simple DataFrame and after measuring its performance I have encountered some weird behavior. Here are the problematic code snippet:</p>\n\n<pre><code>import pandas as pd\nimport time\n\ndf = pd.DataFrame(0, index=list(range(6)), columns=['rand', 'result'])\ndf['rand'] = [0.15, 0.07, 0.74, 0.37, 0.54, 0.07]\n\ntime_start = time.time()\ndf['result'] = df['rand'] / 2 #Here lays the problem\ntime_end = time.time()\nprint ('Generating calulation took: %.7f sec' % (time_end - time_start))\n</code></pre>\n\n<p>Everything works well but the performance is worse than bad. It takes about 0.7 second to pefrorm this simple calulation. For single useage this could be bearable but its part of many-instance class constructor, so it is totally unacceptable. Any ideas to optimize this code?</p>\n"}, {"tags": ["python", "pygame", "sprite"], "answers": [{"tags": [], "owner": {"reputation": 3902, "user_id": 10302746, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5ySG.png?s=128&g=1", "display_name": "Lev M.", "link": "https://stackoverflow.com/users/10302746/lev-m"}, "is_accepted": false, "score": 1, "last_activity_date": 1544046515, "creation_date": 1544046515, "answer_id": 53641257, "question_id": 53640718, "link": "https://stackoverflow.com/questions/53640718/moving-sprites-across-a-screen/53641257#53641257", "title": "Moving Sprites across a screen", "body": "<p>Your problem is in the <code>BulletGroup</code> class: you keep appending the same object to the list, so instead of having a list with 5 bullets like you expect, you actually have a list of 5 references to the same bullet.</p>\n\n<p>When you run over this list and change the coordinates, you are changing the same bullet and drawing the same bullet.</p>\n\n<p>You should use <a href=\"https://docs.python.org/2/library/copy.html\" rel=\"nofollow noreferrer\"><code>copy</code></a> to duplicate your first bullet.</p>\n"}, {"comments": [{"owner": {"reputation": 287, "user_id": 10469711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JgZmE.png?s=128&g=1", "display_name": "Eleeza the Character Wizard", "link": "https://stackoverflow.com/users/10469711/eleeza-the-character-wizard"}, "edited": false, "score": 0, "creation_date": 1544133254, "post_id": 53647272, "comment_id": 94178759, "body": "I just realised - I should probably create the l o g i c first when doing a project. :| Well, at least I learned that. This answer worked really well, and I can just about understand it. I&#39;m using this as a base for the full project. It should only take some modifications. Thanks so much for the help :)"}, {"owner": {"reputation": 287, "user_id": 10469711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JgZmE.png?s=128&g=1", "display_name": "Eleeza the Character Wizard", "link": "https://stackoverflow.com/users/10469711/eleeza-the-character-wizard"}, "edited": false, "score": 0, "creation_date": 1544272070, "post_id": 53647272, "comment_id": 94221955, "body": "Just one thing - I tried to make it so the opponent shoots while stationery (so the stage 1 opponent (Minty) doesn&#39;t actually move) so I took out the code which is used to make the sprite move but it just makes the bullets not shoot. How do I fix this?"}, {"owner": {"reputation": 91141, "user_id": 142637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9SiZh.png?s=128&g=1", "display_name": "sloth", "link": "https://stackoverflow.com/users/142637/sloth"}, "reply_to_user": {"reputation": 287, "user_id": 10469711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JgZmE.png?s=128&g=1", "display_name": "Eleeza the Character Wizard", "link": "https://stackoverflow.com/users/10469711/eleeza-the-character-wizard"}, "edited": false, "score": 1, "creation_date": 1544287749, "post_id": 53647272, "comment_id": 94226035, "body": "@eleeza I would keep the code intact and just set the path to a single value, e.g. <code>self.path = itertools.cycle(((445, 30), ))</code>"}, {"owner": {"reputation": 287, "user_id": 10469711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JgZmE.png?s=128&g=1", "display_name": "Eleeza the Character Wizard", "link": "https://stackoverflow.com/users/10469711/eleeza-the-character-wizard"}, "edited": false, "score": 0, "creation_date": 1545517815, "post_id": 53647272, "comment_id": 94644987, "body": "How would I switch bullet patterns? I&#39;ve tried a lot of things but it doesn&#39;t seem to be working. I&#39;ve reverted back to this code."}], "tags": [], "owner": {"reputation": 91141, "user_id": 142637, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/9SiZh.png?s=128&g=1", "display_name": "sloth", "link": "https://stackoverflow.com/users/142637/sloth"}, "is_accepted": true, "score": 3, "last_activity_date": 1544089775, "last_edit_date": 1544089775, "creation_date": 1544084678, "answer_id": 53647272, "question_id": 53640718, "link": "https://stackoverflow.com/questions/53640718/moving-sprites-across-a-screen/53647272#53647272", "title": "Moving Sprites across a screen", "body": "<p>You should use the <code>Sprite</code> class as intended: define at least an <code>image</code> and <code>rect</code> property, and put the logic of each game object into the <code>update</code> method. No need to handle drawing yourself.</p>\n\n<p>Then your main loop will become very clear and a classical three part loop, where you do, in order, the following:  </p>\n\n<ul>\n<li>event handling  </li>\n<li>update game state  </li>\n<li>draw everything  </li>\n</ul>\n\n<p>Here's how it could look like (note the comments where I explain some stuff):</p>\n\n<pre><code>import pygame\nimport itertools\npygame.init()\n\nSCREENWIDTH = 1000\nSCREENHEIGHT = 650\nscreen = pygame.display.set_mode([SCREENWIDTH, SCREENHEIGHT])\n\nscreen.fill((255, 123, 67))\npygame.draw.rect(screen, (0, 255, 188), (50, 50, 900, 575), 0)\n# let's create a background surface that we can reuse instead of\n# drawing manually to the screen\nbackground = screen.copy()\n\nclock = pygame.time.Clock()\n\nclass Player(pygame.sprite.Sprite):\n\n    # the player sprite is constant, so let's use a class variable\n    sprite = pygame.image.load(\"Sprites/player.png\")\n\n    def __init__(self, *groups):\n        # we want to use sprites, so we have to call __init__ of the Sprite class\n        # groups is a list of groups we want this sprite to add to\n        super().__init__(*groups)\n        # the image of the sprite needs to be in an attribute called 'image'\n        self.image = Player.sprite\n        # for pygame to know where to draw the sprite, we need a 'rect' attribute\n        self.rect = self.image.get_rect(topleft=(445, 550))\n\n    def update(self):\n        # moving by keyboard is unique to the player class, so let's to this here\n        key = pygame.key.get_pressed()\n        dist = 3\n        # we just update our rect's position to move the sprite\n        # we should use vectors here, too, but for now this is good enough\n        if key[pygame.K_DOWN]:\n            self.rect.y += dist\n        elif key[pygame.K_UP]:\n            self.rect.y -= dist\n        if key[pygame.K_RIGHT]:\n            self.rect.x += dist\n        elif key[pygame.K_LEFT]:\n            self.rect.x -= dist\n\nclass Opponent(pygame.sprite.Sprite):\n\n    def __init__(self, sprite, *groups):\n        super().__init__(*groups)\n        self.image = sprite\n        self.rect = self.image.get_rect(topleft=(445, 30))\n        # we keep an additional attribute 'pos' to store the postion\n        # it's a vector so we can use some vector math\n        self.pos = pygame.Vector2(self.rect.topleft)\n        # we want to move the Opponent in a specific pattern\n        # so let's keep a list of points we want to move to\n        # 'cycle' will generate and \"endless loop\" of this points\n        self.path = itertools.cycle(((445, 30), (345, 235), (90, 115), (490, 80), (850, 250), (745, 110)))\n        # we can use 'next' to get the next position\n        self.next_point = pygame.Vector2(next(self.path))\n        # maybe we want to change the speed of the opponent\n        self.speed = 1\n        # we use ticks to store the milliseconds since the game started later\n        # this allows us to do thing over time\n        self.ticks = 1000\n        # a list of bullets we want to shoot later\n        self.queue = []\n\n    def update(self):\n        # so we want to move to a specific point\n        # we use some vector math to get the direction we have to move to\n        move = self.next_point - self.pos\n        move_length = move.length()\n        if move_length != 0:\n            # since 'move' is the vector between 'pos' and 'next_point'\n            # we have to normalize it so it just points into the right\n            # direction at a certain length instead of all the way from\n            # 'pos' and 'next_point'\n            move.normalize_ip()\n            move = move * self.speed\n            self.pos += move\n\n        # if we are already at the target position (or overshoot it)\n        # we take the next position from 'path'\n        if move.length() == 0 or move_length &lt; self.speed:\n            self.next_point = pygame.Vector2(next(self.path))\n\n        # we update the 'rect' position so pygame draws the sprite at the right position on the screen\n        self.rect.topleft = self.pos\n\n        # so let's count some time. Every 3000ms passed, we want to shoot some bullets\n        if pygame.time.get_ticks() - self.ticks &gt; 3000:\n            self.ticks = pygame.time.get_ticks()\n            self.shoot()\n\n        # see how much time passed since the last shooting\n        time_gone = pygame.time.get_ticks() - self.ticks\n        for bullet in self.queue:\n            # the first value of the tuples in the 'queue' describes when to shoot the bullet\n            if bullet[0] &lt;= time_gone:\n                # create the bullet and add them to the 'sprites' and 'bullets' groups\n                # 'bullets' isn't used yet, but you can use it later for collision detection\n                Bullet(self.rect.center, bullet[1], sprites, bullets)\n\n        # now remove all bullets that have been fired\n        self.queue = [bullet for bullet in self.queue if bullet[0] &gt; time_gone]\n\n    def shoot(self):\n        bullet_speed = 4\n        # this list describes the pattern of the attack\n        # the first value is the time when to shoot the bullet (afer X ms)\n        # the second value is the movement vector of the bullet\n        pattern = ((0, pygame.Vector2(-0.5, 1) * bullet_speed),\n            (0, pygame.Vector2( 0, 1) * bullet_speed),\n            (0, pygame.Vector2(0.5, 1) * bullet_speed),\n            (150, pygame.Vector2(-0.5, 1) * bullet_speed),\n            (150, pygame.Vector2( 0, 1) * bullet_speed),\n            (150, pygame.Vector2(0.5, 1) * bullet_speed),\n            (300, pygame.Vector2(-0.5, 1) * bullet_speed),\n            (300, pygame.Vector2( 0, 1) * bullet_speed),\n            (300, pygame.Vector2(0.5, 1) * bullet_speed))\n        self.queue = pattern\n\nclass Bullet(pygame.sprite.Sprite):\n\n    sprite = pygame.image.load(\"Sprites/purple-glowey.png\")\n\n    def __init__(self, pos, direction, *groups):\n        super().__init__(*groups)\n        self.image = Bullet.sprite\n        self.rect = self.image.get_rect(topleft=pos)\n        self.direction = direction\n        self.pos = pygame.Vector2(self.rect.topleft)\n\n    def update(self):\n        # just move along the direction \n        self.pos += self.direction\n        self.rect.topleft = (self.pos.x, self.pos.y)\n        # if no longer on screen, remove from all groups\n        if not screen.get_rect().colliderect(self.rect):\n            self.kill()\n\nsprites = pygame.sprite.Group()\nbullets = pygame.sprite.Group()\n\nplayer = Player(sprites)\nMinty = Opponent(pygame.image.load(\"Sprites/minty.png\"), sprites)\n\ndef main():        \n    running = True\n    while running:   \n        for events in pygame.event.get():\n            if events.type == pygame.QUIT:\n                return\n\n        # update all sprites, a.k.a. game logic\n        sprites.update()\n\n        # draw everything\n        screen.blit(background, (0, 0))\n        sprites.draw(screen)\n        pygame.display.update()\n\n        clock.tick(60)\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/0wENk.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0wENk.gif\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 287, "user_id": 10469711, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JgZmE.png?s=128&g=1", "display_name": "Eleeza the Character Wizard", "link": "https://stackoverflow.com/users/10469711/eleeza-the-character-wizard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 827, "favorite_count": 1, "accepted_answer_id": 53647272, "answer_count": 2, "score": 1, "last_activity_date": 1544089775, "creation_date": 1544043927, "last_edit_date": 1544079366, "question_id": 53640718, "link": "https://stackoverflow.com/questions/53640718/moving-sprites-across-a-screen", "title": "Moving Sprites across a screen", "body": "<p>So I'm back at making a game and I was coding in the gameplay mechanics (it's a dodge-the-bullet, I was making the bullets) The bullets should keep generating from the top sprite (Minty) and keep spreading out(trust me, I've spent a lot of time reading up and googling stuff.) This is how it was <em>supposed</em> to look: (the top sprite is the opponent, the little white square is player, the purple circles are the bullets by the way)</p>\n\n<p>how it should be:</p>\n\n<p><a href=\"https://i.stack.imgur.com/zSmRI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zSmRI.png\" alt=\"enter image description here\"></a></p>\n\n<p>but here's how it is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/EKOo8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EKOo8.png\" alt=\"enter image description here\"></a></p>\n\n<p>And I just don't understand why it's happening?</p>\n\n<p>Here's my code:</p>\n\n<pre><code>import sys\nimport time\nimport pygame\nfrom pygame.locals import *\n\npygame.init()\n#INITIALISE THE WINDOW.\n#CONSTANTS ARE CAPITAL, VARIABLES ARE LOWERCASE\nSCREENWIDTH = 1000\nSCREENHEIGHT = 650\nSCREENSIZE = [SCREENWIDTH, SCREENHEIGHT]\nscreen = pygame.display.set_mode(SCREENSIZE)\nBG_COL = [255, 123, 67]\nS1_COL = (0, 255, 188)\nclock = pygame.time.Clock()\nscreen.fill(BG_COL)\npygame.draw.rect(screen, S1_COL,(50, 50, 900, 575), 0)\npygame.display.update()\nclock.tick(60)\n\nclass Player(pygame.sprite.Sprite):\n    def __init__(self, sprite):\n        self.sprite = sprite\n        self.x = 445\n        self.y = 550\n\nclass Opponent(pygame.sprite.Sprite):\n    def __init__(self, sprite):\n        self.sprite = sprite\n        self.x = 445\n        self.y = 30\n\nclass Bullet:\n    def __init__(self, sprite, length, width):\n        self.sprite = sprite\n        self.x = 460\n        self.y = 50\n        self.length = length\n        self.width = width\n        self.area = self.sprite.get_rect(x=self.x, y=self.y)\n        self.area.clamp_ip((50, 50, 900, 575))\n\nclass BulletGroup(pygame.sprite.Group):\n    def __init__(self, typeof, numof):\n        self.typeof = typeof\n        self.numof = numof\n        self.listof = []\n        for i in range(0, self.numof):\n            self.listof.append(typeof)\n\nplayer = Player(pygame.image.load(\"Sprites/player.png\"))\nMinty = Opponent(pygame.image.load(\"Sprites/minty.png\"))\npurple_glow = Bullet(pygame.image.load(\"Sprites/purple-glowey.png\"), 70, 65)\ntest_bullets = BulletGroup(purple_glow, 5)\n\n#make functions\ndef background(colour): #to make it easier to draw the background each time\n    screen.fill(BG_COL)\n    pygame.draw.rect(screen, colour,(50, 50, 900, 575), 0)\n\ndef handle_keys():\n    \"\"\" Handles Keys \"\"\"\n    key = pygame.key.get_pressed()\n    dist = 2 \n    if key[pygame.K_DOWN]: # down key\n        player.y += dist # move down\n    elif key[pygame.K_UP]: # up key\n        player.y -= dist # move up\n    if key[pygame.K_RIGHT]: # right key\n        player.x += dist # move right\n    elif key[pygame.K_LEFT]: # left key\n        player.x -= dist # move left\n\n#MAIN GAME LOOP\nrunning = True\nwhile running:   \n    for events in pygame.event.get():\n        if events.type == QUIT:\n            pygame.quit()\n            exit()\n            running = False\n        if events.type == KEYDOWN:\n            background(S1_COL)\n\n    #BULLETS:\n    def move_bullets(bullets, xchange, ychange):\n        #MOVE THE CLONED BULLETS IN ONE CONSTANT DIRECTION\n        for b in bullets.listof:\n            b.x += xchange\n            b.y += ychange\n            screen.blit(b.sprite, (b.x, b.y))\n            pygame.draw.rect(screen, S1_COL, b.area, 0)\n            xchange += 10\n            pygame.time.delay(50)\n\n    #STAGE1 MAKE\n            screen.blit(pygame.transform.scale(Minty.sprite, (130, 140)), [Minty.x, Minty.y])\n    for events in pygame.event.get():\n        screen.blit(pygame.transform.scale(Minty.sprite, (130, 140)), [Minty.x, Minty.y]) #i'm going to change image size on phone later on\n\n\n    print(test_bullets.listof[0].x)\n    print(test_bullets.listof[0].y)\n    #IF KEY PRESSED\n    #MOVE PLAYER SPRITE\n    screen.blit(player.sprite, (player.x, player.y))\n    handle_keys()\n    move_bullets(test_bullets, -10, 10)\n    pygame.display.update()\n</code></pre>\n\n<p>Any feedback, explanation, edit suggests or something like that would be greatly appreciated.</p>\n"}, {"tags": ["python", "try-except"], "comments": [{"owner": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "edited": false, "score": 1, "creation_date": 1544043879, "post_id": 53640640, "comment_id": 94140921, "body": "You are not using your input, but instead again ask for input. That&#39;s a mistake. Just fall out of your function and let the outer while loop do the work."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1544043927, "post_id": 53640640, "comment_id": 94140936, "body": "As written, you never use <code>break</code> to get out of the infinite retry loop. Whether an exception is raised or not, you go back tot he top of that loop."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 1, "creation_date": 1544044139, "post_id": 53640640, "comment_id": 94141035, "body": "But as deets points out, <code>check_correct</code> is doing far too much. It should check the value, output a description of whether the guess is too high or too low, then return True or False. <code>guess</code> is the only function that should actually be taking user input."}], "answers": [{"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 0, "last_activity_date": 1544044785, "creation_date": 1544044785, "answer_id": 53640918, "question_id": 53640640, "link": "https://stackoverflow.com/questions/53640640/python-guess-the-number-with-try-except/53640918#53640918", "title": "Python - Guess the number with try/except", "body": "<p>The only thing <code>check_correct</code> should do is return True if the guess is correct, and False otherwise. It can also output a message describing the result of the comparison.</p>\n\n<pre><code>import random  # Never use from &lt;whatever import *\nprint('Guess the number')\n\ndef check_correct(u_guess, num):\n    if u_guess &lt; num:           # You had the roles of u_guess and num reversed\n        print('Guess is low!')\n        return False\n    elif u_guess &gt; num:\n        print('Guess is high')\n        return False\n    else:  # u_guess == num\n        print('You got it!')\n        return True\n</code></pre>\n\n<p><code>guess</code> handles all user input, calling <code>check_correct</code> to determine if\nthe outer loop should terminate. The inner loop continues until <code>int(uguess)</code> does <em>not</em> raise an exception.</p>\n\n<pre><code>def guess():\n    num = random.randint(1, 5)\n    while True:\n        while True:\n            u_guess = input('What number do you think it is? (Between 1 and 5)')\n            try:\n                u_guess = int(u_guess)\n                break\n            except ValueError:\n                print('Invalid number, try again!')\n        if check_correct(u_guess, num):\n            break\n\nguess()\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 10652974, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AwMGVYLaO5k/AAAAAAAAAAI/AAAAAAAAAPQ/mv6Ez1BKu7o/photo.jpg?sz=128", "display_name": "Roberto Bautista", "link": "https://stackoverflow.com/users/10652974/roberto-bautista"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 314, "favorite_count": 0, "accepted_answer_id": 53640918, "answer_count": 1, "score": 0, "last_activity_date": 1544044785, "creation_date": 1544043560, "question_id": 53640640, "link": "https://stackoverflow.com/questions/53640640/python-guess-the-number-with-try-except", "title": "Python - Guess the number with try/except", "body": "<p>Hi i'm new in python and i searched for some mini challenges to practice and learn more, now i'm doing a 'Guess the number' script, it worked but now i want to add to it a try/except block when the user enters not an integer, this is the code i have now:</p>\n\n<pre><code>from random import *\nprint('Guess the number')\n\ndef check_correct(u_guess, num):\n    while True:\n        if u_guess &lt; num:\n            print('Guess is high!')\n            while True:\n                try:\n                    u_guess = int(input('What number do you think is? (Between 1 and 5): '))\n                except ValueError:\n                    print('Invalid number try again!')\n        elif u_guess &gt; num:\n            print('Guess is low!')\n            while True:\n                try:\n                    u_guess = int(input('What number do you think is? (Between 1 and 5): '))\n                except ValueError:\n                    print('Invalid number try again!')\n        elif u_guess == num:\n            print('You got it!')\n            break\n\ndef guess():\n    num = randint(1, 5)\n    u_guess = None\n    while u_guess == None:\n        try:\n            u_guess = int(input('What number do you think is? (Between 1 and 5): '))\n            check_correct(u_guess, num)\n        except ValueError:\n            print('Invalid number try again!')\nguess()\n</code></pre>\n\n<p>And this is the output i have:</p>\n\n<pre><code>$ python Project2.py\n\n    Guess the number\n    What number do you think is? (Between 1 and 5): 1\n    Guess is high!\n    What number do you think is? (Between 1 and 5): 2\n    What number do you think is? (Between 1 and 5): 2\n    What number do you think is? (Between 1 and 5):\n    Invalid number try again!\n    What number do you think is? (Between 1 and 5): Traceback (most recent call last):\n      File \"Project2.py\", line 35, in &lt;module&gt;\n        guess()\n      File \"Project2.py\", line 31, in guess\n        check_correct(u_guess, num)\n      File \"Project2.py\", line 11, in check_correct\n        u_guess = int(input('What number do you think is? (Between 1 and 5): '))\n    EOFError\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 232, "user_id": 10101463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1jcR.jpg?s=128&g=1", "display_name": "MisterMonk", "link": "https://stackoverflow.com/users/10101463/mistermonk"}, "edited": false, "score": 0, "creation_date": 1544043845, "post_id": 53640639, "comment_id": 94140901, "body": "You are probably searching for Interpolation? <a href=\"https://pandas.pydata.org/pandas-docs/stable/missing_data.html#interpolation\" rel=\"nofollow noreferrer\">pandas.pydata.org/pandas-docs/stable/&hellip;</a>"}, {"owner": {"reputation": 6368, "user_id": 3489155, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HJKwi.jpg?s=128&g=1", "display_name": "Sander van den Oord", "link": "https://stackoverflow.com/users/3489155/sander-van-den-oord"}, "edited": false, "score": 0, "creation_date": 1544044029, "post_id": 53640639, "comment_id": 94140980, "body": "Hi Justin, what numbers would you expect for the two Nan that you have in your example?"}, {"owner": {"reputation": 1, "user_id": 10751593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5DbiW0Dw8wU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gIYZk9XdzYqUUbuaO2LFGmHuw1Fw/mo/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/10751593/justin"}, "edited": false, "score": 0, "creation_date": 1544044333, "post_id": 53640639, "comment_id": 94141135, "body": "the values in here are made up, the values will respond the same to the change as the other objects are, so if object 2 goes up 50% in an hour i expect object 1 to do that aswell. I would like to take the average of all other objects who have data and then use that to estimate what the value would be"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10751593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5DbiW0Dw8wU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gIYZk9XdzYqUUbuaO2LFGmHuw1Fw/mo/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/10751593/justin"}, "edited": false, "score": 0, "creation_date": 1544044231, "post_id": 53640717, "comment_id": 94141078, "body": "its imported alright i just made a quick draft of how the data looks, the gap is to big(nearly a year) to just interpolate for in this case. I want to estimate the values looking at similair measurement points"}, {"owner": {"reputation": 1792, "user_id": 6672746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba91b391da1f42e87437934cdd764a67?s=128&d=identicon&r=PG&f=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/6672746/evan"}, "reply_to_user": {"reputation": 1, "user_id": 10751593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5DbiW0Dw8wU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gIYZk9XdzYqUUbuaO2LFGmHuw1Fw/mo/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/10751593/justin"}, "edited": false, "score": 0, "creation_date": 1544044341, "post_id": 53640717, "comment_id": 94141139, "body": "OK. Can you post data that is more representative of your actual data, and/or clarify your question? For example, include the output you&#39;d like to see."}, {"owner": {"reputation": 232, "user_id": 10101463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x1jcR.jpg?s=128&g=1", "display_name": "MisterMonk", "link": "https://stackoverflow.com/users/10101463/mistermonk"}, "edited": false, "score": 1, "creation_date": 1544044487, "post_id": 53640717, "comment_id": 94141208, "body": "You are missing a year? Thats an tough task to accomplish"}, {"owner": {"reputation": 1, "user_id": 10751593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5DbiW0Dw8wU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gIYZk9XdzYqUUbuaO2LFGmHuw1Fw/mo/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/10751593/justin"}, "edited": false, "score": 0, "creation_date": 1544044560, "post_id": 53640717, "comment_id": 94141234, "body": "<a href=\"https://gyazo.com/d17904b4f69ce7cacabca47fd9a08b7a\" rel=\"nofollow noreferrer\">gyazo.com/d17904b4f69ce7cacabca47fd9a08b7a</a> these are the values, the values of 1 object will respond the same to the change as the other objects, so if object 2 goes up 50% in an hour i expect object 1 to do that aswell. I would like to take the average of all other objects who have data and then use that to estimate what the value would be of the missing value \u2013"}], "tags": [], "owner": {"reputation": 1792, "user_id": 6672746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba91b391da1f42e87437934cdd764a67?s=128&d=identicon&r=PG&f=1", "display_name": "Evan", "link": "https://stackoverflow.com/users/6672746/evan"}, "is_accepted": false, "score": 1, "last_activity_date": 1544043926, "creation_date": 1544043926, "answer_id": 53640717, "question_id": 53640639, "link": "https://stackoverflow.com/questions/53640639/python-filling-in-missing-values-with-other-data/53640717#53640717", "title": "Python Filling in missing values, with other data", "body": "<p>You may need to do a little munging to make sure your NaNs are seen correctly by pandas.</p>\n\n<pre><code>\"\"\"\ntimestamp,id,value\n2016-01-01 01:00:00,1,10\n2016-01-01 02:00:00,1,15\n2016-01-01 03:00:00,1,12\n2016-01-01 04:00:00,1,nan\n2016-01-01 05:00:00,1,nan\n2016-01-01 06:00:00,1,7\n\"\"\"\n\nimport pandas as pd\nimport numpy as np\n\ndf = pd.read_clipboard(sep=\",\")\ndf.value = df.value.astype(float)\ndf.interpolate(method=\"linear\")\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code>0    10.000000\n1    15.000000\n2    12.000000\n3    10.333333\n4     8.666667\n5     7.000000\nName: value, dtype: float64\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10751593, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-5DbiW0Dw8wU/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gIYZk9XdzYqUUbuaO2LFGmHuw1Fw/mo/photo.jpg?sz=128", "display_name": "Justin", "link": "https://stackoverflow.com/users/10751593/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "closed_date": 1544043907, "answer_count": 1, "score": 0, "last_activity_date": 1544045331, "creation_date": 1544043554, "last_edit_date": 1544045331, "question_id": 53640639, "link": "https://stackoverflow.com/questions/53640639/python-filling-in-missing-values-with-other-data", "closed_reason": "Duplicate", "title": "Python Filling in missing values, with other data", "body": "<p>Currently im working on a script to fill in missing values in a timeline. The dataframe is looking thusfar, values are examples:</p>\n\n<pre><code>timestamp   id  value\n2016-01-01 01:00:00 1   10\n2016-01-01 02:00:00 1   15\n2016-01-01 03:00:00 1   12\n2016-01-01 04:00:00 1   NAN\n2016-01-01 05:00:00 1   NAN\n2016-01-01 06:00:00 1   7\n2016-01-01 07:00:00 1   9\n2016-01-01 01:00:00 2   10\n2016-01-01 02:00:00 2   12\n2016-01-01 03:00:00 2   14\n2016-01-01 04:00:00 2   16\n2016-01-01 05:00:00 2   8\n2016-01-01 06:00:00 2   11\n2016-01-01 07:00:00 2   14\n2016-01-01 01:00:00 3   10\n2016-01-01 02:00:00 3   12\n2016-01-01 03:00:00 3   14\n2016-01-01 04:00:00 3   12\n2016-01-01 05:00:00 3   8\n2016-01-01 06:00:00 3   9\n2016-01-01 07:00:00 3   12\n</code></pre>\n\n<p>What i would like is to fill in the NAN values by looking at the rise in values by the other object's.\nSo for example if object id 2 and 3 rise 50% on average from 3:00:00 to 4:00:00 i can use the value 12 in this example and multiply it by 1.5. Im working in python at the moment using pandas. </p>\n\n<p>I can run a function through the column 'value' checking if its NAN. But im sorta stuck how to go from there.</p>\n\n<p>Basicly i want a function that when it finds a missing value to take the timestamp, then for that timestamp find the values the other objects. So in this example its missing data at 4:00:00, it will grab 16 of object 2 and 12 of object 3. Once it done that it will compare the found value to the value before this timestamp and divide by this. So 16/14 and 12/14. the average of this is 1, which i want multiplied by the value before the missing value. So 1.00 * 12.00. It has then filled in the timestamp at 4:00:00 and continue at 5:00:00</p>\n"}, {"tags": ["python", "matplotlib"], "comments": [{"owner": {"reputation": 529, "user_id": 5583866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/838545019600422/picture?type=large", "display_name": "Paul Rousseau", "link": "https://stackoverflow.com/users/5583866/paul-rousseau"}, "edited": false, "score": 0, "creation_date": 1544043765, "post_id": 53640619, "comment_id": 94140865, "body": "What do you mean by &#39;visual format&#39;  and &#39;bin&#39;? None of these aspects appear in your code."}, {"owner": {"reputation": 347, "user_id": 4633301, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dbd090173e1c6b4234f7a795203db332?s=128&d=identicon&r=PG&f=1", "display_name": "Veejay", "link": "https://stackoverflow.com/users/4633301/veejay"}, "reply_to_user": {"reputation": 529, "user_id": 5583866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/838545019600422/picture?type=large", "display_name": "Paul Rousseau", "link": "https://stackoverflow.com/users/5583866/paul-rousseau"}, "edited": false, "score": 0, "creation_date": 1544043836, "post_id": 53640619, "comment_id": 94140897, "body": "Apologies, what I meant is having text on top of the bar for a saying &quot;a=3468&quot;"}, {"owner": {"reputation": 1275, "user_id": 5024514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4015d630fb725145f4565d322334e08?s=128&d=identicon&r=PG", "display_name": "ShlomiF", "link": "https://stackoverflow.com/users/5024514/shlomif"}, "edited": false, "score": 0, "creation_date": 1544043862, "post_id": 53640619, "comment_id": 94140913, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/39519609/annotate-bars-with-values-on-pandas-on-seaborn-factorplot-bar-plot?rq=1\" title=\"annotate bars with values on pandas on seaborn factorplot bar plot\">stackoverflow.com/questions/39519609/&hellip;</a>"}], "owner": {"reputation": 347, "user_id": 4633301, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/dbd090173e1c6b4234f7a795203db332?s=128&d=identicon&r=PG&f=1", "display_name": "Veejay", "link": "https://stackoverflow.com/users/4633301/veejay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "closed_date": 1544043699, "answer_count": 0, "score": 0, "last_activity_date": 1544043456, "creation_date": 1544043456, "question_id": 53640619, "link": "https://stackoverflow.com/questions/53640619/displaying-the-value-of-each-bin-in-a-bar-chart-python", "closed_reason": "Duplicate", "title": "Displaying the Value of Each bin in a bar chart - Python", "body": "<p>I am working to create a simple bar chart that displays the number of each of the 9 items listed in a visual format. The goal here is to give a high level summary of the numbers by just glancing at the chart. </p>\n\n<p>With my current code I am able to create a simple bar chart but I would like to have the frequency for each bin printed on top of each bar. How would I proceed to do that.</p>\n\n<p>Here is the code and the current output:</p>\n\n<pre><code># Graphing the dataset findings\n\nheight = [a_counter, b_counter, c_counter, d_counter, e_counter, f_counter, g_counter, h_counter, i_counter]\n\n\n#print (height)\n\nlabel = ['a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i']\n\n#print (label)\ndef plot_bar_x():\n    # this is for plotting purpose\n    index = np.arange(len(label))\n    plt.bar(index, height)\n    plt.xlabel('Classes', fontsize=25)\n    plt.ylabel('Frequency', fontsize=25)\n    plt.xticks(index, label, fontsize=10, rotation=20)\n    plt.title('Class Distribution for Current Network')\n    plt.show()\n\n\nplot_bar_x()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/ZKIaU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZKIaU.png\" alt=\"output image for above code\"></a></p>\n"}, {"tags": ["python", "python-3.x", "algorithm"], "comments": [{"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 3, "creation_date": 1544043724, "post_id": 53640606, "comment_id": 94140837, "body": "Why do you think that a condition on <code>total</code> is necessary and sufficient for something to be a permutation? You lose all sorts of information when you form a sum. <code>1+3 = 2+2</code>, so your idea seems to be a non-starter. Why not just sort?"}, {"owner": {"reputation": 31945, "user_id": 3386109, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zt9UL.png?s=128&g=1", "display_name": "user3386109", "link": "https://stackoverflow.com/users/3386109/user3386109"}, "edited": false, "score": 1, "creation_date": 1544044192, "post_id": 53640606, "comment_id": 94141062, "body": "Note that if any <code>A[i]</code> is greater than <code>N</code>, then you can immediately return 0. All you need is an array of size <code>N</code>. Initialize every entry with 0. Scan the input array and increment the <code>array[A[i]]</code>. If <code>array[A[i]]</code> is 2, immediately return 0."}, {"owner": {"reputation": 98, "user_id": 6741838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caedc428bc3525179e1382dc9cb271e2?s=128&d=identicon&r=PG&f=1", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/6741838/harpreet-singh"}, "reply_to_user": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1544050839, "post_id": 53640606, "comment_id": 94143534, "body": "@JohnColeman I thought that <code>total</code> will be different than sum of first N integer <code>formula_total</code> but clearly that is not the case."}, {"owner": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1544095414, "post_id": 53640606, "comment_id": 94158823, "body": "@HarpreetSingh It says right there in the description of the test what &quot;antiSum&quot; is: total sum is correct, but it is not a permutation, N &lt;= 10. This is exactly made for your kind of algorithm, which is wrong because <code>[2, 2, 2]</code> will return true with your code."}, {"owner": {"reputation": 98, "user_id": 6741838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caedc428bc3525179e1382dc9cb271e2?s=128&d=identicon&r=PG&f=1", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/6741838/harpreet-singh"}, "reply_to_user": {"reputation": 2799, "user_id": 1485311, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/sNWZV.jpg?s=128&g=1", "display_name": "ChatterOne", "link": "https://stackoverflow.com/users/1485311/chatterone"}, "edited": false, "score": 0, "creation_date": 1544104823, "post_id": 53640606, "comment_id": 94164416, "body": "@ChatterOne Thanks for the explanation.  Checking <code>len(set(A)) == len(A)</code> condition solves the issue of &quot;antiSum&quot; in my code."}], "answers": [{"comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1544048973, "post_id": 53640910, "comment_id": 94142902, "body": "I believe that this fails if given an internally damaged array, such as <code>[1, 2, 2, 4]</code>.  We&#39;re not guaranteed that the input values are already unique."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1544050615, "post_id": 53640910, "comment_id": 94143464, "body": "No this won&#39;t fail for your given scenario because it won&#39;t pass the <code>len(set(A)) == len(A)</code> test, which is exactly there to make sure that the input values are unique."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 2, "creation_date": 1544050722, "post_id": 53640910, "comment_id": 94143500, "body": "OOPS!  I scanned right past the <code>set</code> call.  Thanks."}, {"owner": {"reputation": 98, "user_id": 6741838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caedc428bc3525179e1382dc9cb271e2?s=128&d=identicon&r=PG&f=1", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/6741838/harpreet-singh"}, "edited": false, "score": 0, "creation_date": 1544057581, "post_id": 53640910, "comment_id": 94145326, "body": "thanks I add <code>if len(set(A)) != len(A): return 0 </code> in my and my function is running on all test cases."}, {"owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "reply_to_user": {"reputation": 98, "user_id": 6741838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caedc428bc3525179e1382dc9cb271e2?s=128&d=identicon&r=PG&f=1", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/6741838/harpreet-singh"}, "edited": false, "score": 0, "creation_date": 1544058152, "post_id": 53640910, "comment_id": 94145458, "body": "@HarpreetSingh I&#39;ve updated my answer with a solution to return <code>1</code> and <code>0</code> instead if that&#39;s what you&#39;re looking for. Can you mark this answer as accepted if you find it to be correct? (Click on the grey check mark next to the answer.)"}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": false, "score": 5, "last_activity_date": 1544058093, "last_edit_date": 1544058093, "creation_date": 1544044745, "answer_id": 53640910, "question_id": 53640606, "link": "https://stackoverflow.com/questions/53640606/best-way-to-find-if-an-array-is-a-permutation/53640910#53640910", "title": "best way to find if an array is a permutation", "body": "<p>You can then check if the minimum value of the list is 1 and if the maximum value is equal to the length of the list. You can then convert the list to a set to check if the length is equal, and if so, all items in the list are unique and therefore the list is what you consider a permutation:</p>\n\n<pre><code>def solution(A):\n    return min(A) == 1 and max(A) == len(A) == len(set(A))\n</code></pre>\n\n<p>so that:</p>\n\n<pre><code>print(solution([4,2,1,3]))\nprint(solution([4,1,3]))\nprint(solution([4,2,1,4]))\nprint(solution([4,2,5,3]))\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>True\nFalse\nFalse\nFalse\n</code></pre>\n\n<p>If you want <code>1</code> and <code>0</code> as the returning value you can pass the Boolean value to the <code>int()</code> constructor instead:</p>\n\n<pre><code>def solution(A):\n    return int(min(A) == 1 and max(A) == len(A) == len(set(A)))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": false, "score": 4, "last_activity_date": 1544049311, "creation_date": 1544049311, "answer_id": 53641804, "question_id": 53640606, "link": "https://stackoverflow.com/questions/53640606/best-way-to-find-if-an-array-is-a-permutation/53641804#53641804", "title": "best way to find if an array is a permutation", "body": "<p>This is simply a version of the anagram problem.  Sort the input array.  Compare it for equality against an array of elements 1 through N.  Return the Boolean result of that comparison.</p>\n\n<p>If you need a linear solution, then declare <code>seen</code>, a Boolean array of size N.  Iterate through the input array.  Count the elements as you process them.</p>\n\n<p>For each element A</p>\n\n<ul>\n<li>if A not in range 1-N return failure</li>\n<li>if <code>seen[A]</code> return failure</li>\n<li><code>seen[A]</code> = True</li>\n</ul>\n\n<p>At the end, return <code>count == N</code>.  In other words, if <code>count == N</code>, we've found one of each integer; return True.  Otherwise, return False (count would be less than <code>N</code> in that case).</p>\n"}, {"comments": [{"owner": {"reputation": 45920, "user_id": 4996248, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IUaWZ.jpg?s=128&g=1", "display_name": "John Coleman", "link": "https://stackoverflow.com/users/4996248/john-coleman"}, "edited": false, "score": 0, "creation_date": 1544109317, "post_id": 53645027, "comment_id": 94167362, "body": "Conceptually I like this (+1) but I suspect that the <code>set()</code> -based solution will be more efficient in CPython since a function written in C does the heavy lifting rather than the interpreter running a loop."}], "tags": [], "owner": {"reputation": 11761, "user_id": 4964822, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oTZqV.jpg?s=128&g=1", "display_name": "nice_dev", "link": "https://stackoverflow.com/users/4964822/nice-dev"}, "is_accepted": false, "score": 1, "last_activity_date": 1544073201, "creation_date": 1544073201, "answer_id": 53645027, "question_id": 53640606, "link": "https://stackoverflow.com/questions/53640606/best-way-to-find-if-an-array-is-a-permutation/53645027#53645027", "title": "best way to find if an array is a permutation", "body": "<pre><code>def getMax(A):\n    max_ele = 0\n    for each_integer in A:\n        max_ele = max(max_ele,each_integer)\n    return max_ele\n\ndef restoreArray(A):\n    for idx, val in enumerate(A):\n        A[idx] = abs(A[idx])\n\ndef solution(A):\n    max_ele = getMax(A)\n    if len(A) != max_ele:\n        return False\n    for idx, val in enumerate(A):\n        if A[abs(A[idx]) - 1] &lt; 0:\n            # restore the array back   \n            restoreArray(A)\n            return False\n        else:\n            A[abs(A[idx]) - 1] = -A[abs(A[idx]) - 1]\n\n    # restore the array back   \n    restoreArray(A)\n    return True\n\n\nprint(solution([4,2,1,3]))\nprint(solution([4,1,3]))\nprint(solution([4,2,1,4]))\nprint(solution([4,2,5,3]))\nprint(solution([1,2,3,4]))\nprint(solution([1,2,3,4,6,7,2]))\nprint(solution([9,2,3,4,6,7,5,8,1]))\nprint(solution([9,2,3,4,6,7,5,8,1,10,6]))\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>True\nFalse\nFalse\nFalse\nTrue\nFalse\nTrue\nFalse\n</code></pre>\n\n<p><strong>Algorithm:</strong></p>\n\n<ul>\n<li>We can take advantage of the constraint that all the elements are positive.</li>\n<li>Hence, we loop over the array and mark indexes as visited by making the integer at a particular index negative. </li>\n<li>Now, if we come across an index which points to another index that is already negative, we return <code>False</code>.</li>\n<li>If we never come across such situation, it surely is a permutation and we return <code>True</code>. </li>\n<li>We do restore the array back so that we don't modify it in place. </li>\n<li>Time Complexity: <strong>O(n)</strong>, Space Complexity: <strong>O(1)</strong>.</li>\n<li>You can make this solution more pythonic(since I ain't a python enthusiast) which I leave as an exercise to you.</li>\n</ul>\n"}], "owner": {"reputation": 98, "user_id": 6741838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/caedc428bc3525179e1382dc9cb271e2?s=128&d=identicon&r=PG&f=1", "display_name": "Harpreet Singh", "link": "https://stackoverflow.com/users/6741838/harpreet-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1236, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1544073201, "creation_date": 1544043384, "last_edit_date": 1544050676, "question_id": 53640606, "link": "https://stackoverflow.com/questions/53640606/best-way-to-find-if-an-array-is-a-permutation", "title": "best way to find if an array is a permutation", "body": "<p>A non-empty array <code>A</code> consisting of <code>N</code> integers is given.</p>\n\n<p>A permutation is a sequence containing each element from 1 to <code>N</code>  exactly once each.\nFor example, <code>[4,2,1,3]</code>\nis a permutation, but <code>[4,1,3]</code> \nis not a permutation, because value <code>2</code> is missing.</p>\n\n<p>The goal is to check whether the input array <code>A</code> is a permutation.</p>\n\n<p><strong>constraints</strong></p>\n\n<ul>\n<li>N is an integer within the range [1..100,000];</li>\n<li>Each element of <code>A</code> is an integer within the range [1..1,000,000,000].</li>\n</ul>\n\n<p>My code:</p>\n\n<pre><code># 1 = permutation 0 = not a permutation\ndef solution(A):\n    total = sum(A)\n\n    formula_total = (len(A)*(len(A)+1))/(2)\n\n    if total == formula_total:\n\n        return 1\n\n    return 0\n</code></pre>\n\n<p>my solution is failing on Antisum (I don't know what that is )</p>\n"}, {"tags": ["python", "machine-learning", "keras"], "comments": [{"owner": {"reputation": 45172, "user_id": 4685471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327dc718c142e3ea70e5db4b38050a36?s=128&d=identicon&r=PG", "display_name": "desertnaut", "link": "https://stackoverflow.com/users/4685471/desertnaut"}, "edited": false, "score": 0, "creation_date": 1546697622, "post_id": 53640596, "comment_id": 94939852, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/52205315/plot-loss-evolution-during-a-single-epoch-in-keras\">Plot loss evolution during a single epoch in Keras</a>"}], "answers": [{"comments": [{"owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 1, "creation_date": 1544046942, "post_id": 53640890, "comment_id": 94142220, "body": "Thank you for your answer. But in fact I would like to log these informations <i>explicitly after each epoch</i>. Thus the need for a callback. Why? Because sometimes the training doesn&#39;t finish until the last epoch (for example because the GPU cloud computing is expensive and I want to stop before the last epoch has finished, or because the server has crashed or connection has been interrupted). Thus the return value <code>hist</code> might not be reached."}, {"owner": {"reputation": 45172, "user_id": 4685471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327dc718c142e3ea70e5db4b38050a36?s=128&d=identicon&r=PG", "display_name": "desertnaut", "link": "https://stackoverflow.com/users/4685471/desertnaut"}, "reply_to_user": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1544048594, "post_id": 53640890, "comment_id": 94142767, "body": "@Basj I think it will - give it a try: do an experiment where you artificially break the execution, and see what is contained in <code>hist</code> ;)"}, {"owner": {"reputation": 45172, "user_id": 4685471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327dc718c142e3ea70e5db4b38050a36?s=128&d=identicon&r=PG", "display_name": "desertnaut", "link": "https://stackoverflow.com/users/4685471/desertnaut"}, "reply_to_user": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "edited": false, "score": 0, "creation_date": 1544048943, "post_id": 53640890, "comment_id": 94142884, "body": "@Basj see the general callback entry in the <a href=\"https://keras.io/callbacks/#callback\" rel=\"nofollow noreferrer\">docs</a> - the relevant info is actually passed directly from the logs at the end of each epoch, so even if interrupted prematurely, the info will still be there (I would demonstrate it as part of the answer, but I don&#39;t have access right now)..."}], "tags": [], "owner": {"reputation": 45172, "user_id": 4685471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/327dc718c142e3ea70e5db4b38050a36?s=128&d=identicon&r=PG", "display_name": "desertnaut", "link": "https://stackoverflow.com/users/4685471/desertnaut"}, "is_accepted": false, "score": 1, "last_activity_date": 1544045749, "last_edit_date": 1544045749, "creation_date": 1544044650, "answer_id": 53640890, "question_id": 53640596, "link": "https://stackoverflow.com/questions/53640596/custom-callback-after-each-epoch-to-log-certain-information/53640890#53640890", "title": "Custom callback after each epoch to log certain information", "body": "<p>Actually, you don't need to define a function (or even use an explicit callback) for this, as such info is automatically returned by the <code>fit</code> method; from the <a href=\"https://keras.io/callbacks/#history\" rel=\"nofollow noreferrer\">docs</a>:</p>\n\n<blockquote>\n  <p><strong>History</strong></p>\n  \n  <p><code>keras.callbacks.History()</code></p>\n  \n  <p>Callback that records events into a <code>History</code> object.</p>\n  \n  <p>This callback is automatically applied to every Keras model. The\n  <code>History</code> object gets returned by the <code>fit</code> method of models.</p>\n</blockquote>\n\n<p>You don't even need to explicitly import anything; what you need is just:</p>\n\n<pre><code>hist = model.fit(X, Y, batch_size=4, epochs=32, verbose=1, callbacks=[savemodel]) # no other specific callback\n</code></pre>\n\n<p>and <code>hist.history</code> will contain the loss and any other metrics of interest you may have defined (e.g. accuracy), for the training and validation (if exists) sets, at the end of each epoch, which you can subsequently save into a file.</p>\n\n<p>See <a href=\"https://machinelearningmastery.com/display-deep-learning-model-training-history-in-keras/\" rel=\"nofollow noreferrer\">here</a> for detailed examples.</p>\n"}, {"comments": [{"owner": {"reputation": 193, "user_id": 8030107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a6JUW.jpg?s=128&g=1", "display_name": "aspiring1", "link": "https://stackoverflow.com/users/8030107/aspiring1"}, "edited": false, "score": 2, "creation_date": 1561527822, "post_id": 53653154, "comment_id": 100087945, "body": "I see at some places <code>logs={}</code> i.e, a dictionary and <code>logs=None</code> as in the example you&#39;ve provided, Can you explain the <code>logs</code> argument and how in your example it is able to get the loss using <code>logs[&#39;loss&#39;]</code>?"}], "tags": [], "owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "is_accepted": true, "score": 3, "last_activity_date": 1544107430, "last_edit_date": 1544107430, "creation_date": 1544105068, "answer_id": 53653154, "question_id": 53640596, "link": "https://stackoverflow.com/questions/53640596/custom-callback-after-each-epoch-to-log-certain-information/53653154#53653154", "title": "Custom callback after each epoch to log certain information", "body": "<p>Here is the solution, by subclassing <code>Callback</code>:</p>\n\n<pre><code>from keras.callbacks import Callback\n\nclass MyLogger(Callback):\n    def on_epoch_end(self, epoch, logs=None):\n        with open('log.txt', 'a+') as f:\n            f.write('%02d %.3f\\n' % (epoch, logs['loss']))\n</code></pre>\n\n<p>then</p>\n\n<pre><code>mylogger = MyLogger()\nmodel.fit(X, Y, batch_size=32, epochs=32, verbose=1, callbacks=[mylogger])\n</code></pre>\n\n<p>or even </p>\n\n<pre><code>model.fit(X, Y, batch_size=32, epochs=32, verbose=1, callbacks=[MyLogger()])\n</code></pre>\n"}], "owner": {"reputation": 28647, "user_id": 1422096, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/da3871bf5450fa726f20557fa3f18f51?s=128&d=identicon&r=PG", "display_name": "Basj", "link": "https://stackoverflow.com/users/1422096/basj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2438, "favorite_count": 0, "accepted_answer_id": 53653154, "answer_count": 2, "score": 3, "last_activity_date": 1544107430, "creation_date": 1544043331, "last_edit_date": 1544044768, "question_id": 53640596, "link": "https://stackoverflow.com/questions/53640596/custom-callback-after-each-epoch-to-log-certain-information", "title": "Custom callback after each epoch to log certain information", "body": "<p>I know how to <a href=\"https://keras.rstudio.com/reference/callback_model_checkpoint.html\" rel=\"nofollow noreferrer\">save the model after every epoch</a>:</p>\n\n<pre><code>savemodel = ModelCheckpoint(filepath='models/model_{epoch:02d}-{loss:.2f}.h5')\nmodel.fit(X, Y, batch_size=4, epochs=32, verbose=1, callbacks=[savemodel])\n</code></pre>\n\n<p>How to have a custom callback function to log certain informations:</p>\n\n<pre><code>def write_metrics(): \n    with open('log.txt', 'a') as f:  # append to the log file\n        f.write('{epoch:02d}: loss = {loss:.1f}')\n\nmodel.fit(X, Y, batch_size=4, epochs=32, verbose=1, callbacks=[savemodel, write_metrics])\n</code></pre>\n\n<p>?</p>\n\n<p>With this code it won't work because <code>{loss}</code> and <code>{epoch}</code> are not defined in <code>f.write('{epoch:02d}: loss = {loss:.1f}')</code>.</p>\n"}, {"tags": ["python", "regex", "string"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1544045443, "post_id": 53640589, "comment_id": 94141636, "body": "<code>(?s)fun5((?=\\()(?:(?=.*?\\((?!.*?\\2)(.*\\)(?!.*\\3).*))(?=.*?\\)&zwnj;&#8203;(?!.*?\\3)(.*)).)+?.*&zwnj;&#8203;?(?=\\2)[^(]*(?=\\3$))</code> where group 1 contains the function parameters enclosed in paren&#39;s. i.e. <code>(hello union fun1(param1) union fun2(param2))</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1544045749, "post_id": 53640589, "comment_id": 94141766, "body": "<a href=\"https://regex101.com/r/PPPAVy/1\" rel=\"nofollow noreferrer\">regex101.com/r/PPPAVy/1</a>"}], "answers": [{"tags": [], "owner": {"reputation": 600, "user_id": 4408877, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ze9JszoZToM/AAAAAAAAAAI/AAAAAAAAAo0/vmU-RnMz7_4/photo.jpg?sz=128", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4408877/jeff"}, "is_accepted": false, "score": 0, "last_activity_date": 1544044532, "creation_date": 1544044532, "answer_id": 53640862, "question_id": 53640589, "link": "https://stackoverflow.com/questions/53640589/extract-string-content-between-parenthesis-for-eg-function-nameparam1-pa/53640862#53640862", "title": "extract string content between parenthesis -&gt; for eg: function_name((param1),(param2)) should give (param1),(param2)", "body": "<p>How about this <code>.*fun5\\((.*\\(.*\\))\\)</code></p>\n"}, {"tags": [], "owner": {"reputation": 156940, "user_id": 416467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/32cad7487ccecc3740a62e797fc326dc?s=128&d=identicon&r=PG", "display_name": "kindall", "link": "https://stackoverflow.com/users/416467/kindall"}, "is_accepted": true, "score": 3, "last_activity_date": 1544045936, "last_edit_date": 1544045936, "creation_date": 1544044823, "answer_id": 53640929, "question_id": 53640589, "link": "https://stackoverflow.com/questions/53640589/extract-string-content-between-parenthesis-for-eg-function-nameparam1-pa/53640929#53640929", "title": "extract string content between parenthesis -&gt; for eg: function_name((param1),(param2)) should give (param1),(param2)", "body": "<p>It's possible, but tricky, to write a regular expression if you know the parentheses won't go any deeper than some finite number (2 in your examples). This is because regular expressions simply aren't designed for handling nested patterns. Some regex engines have extensions to allow arbitrary nesting of patterns, or to match text in nested parentheses specifically, but Python's doesn't.</p>\n\n<p>So if you might have to deal with an arbitrary nesting depth, you can instead use a non-regex solution like the one below. Here, we find the first opening parenthesis, then scan character by character. Each time we find an opening parentheses, we increment the depth. Each time we find a closing parenthesis, we decrement the depth and check to see if we're at level 0. If we are, we have found the closing parenthesis that matched the opening parenthesis, and so return the result.</p>\n\n<pre><code>def deparen(text):\n    start = text.find(\"(\")\n    if start &lt; 0:\n        raise ValueError(\"no opening parenthesis\")\n    depth = 0\n    for i in range(start, len(text)):\n        if text[i] == \"(\":\n            depth += 1\n        elif text[i] == \")\":\n            depth -= 1\n            if not depth:\n                return text[start+1:i]\n    raise ValueError(\"too few closing parentheses\")\n</code></pre>\n\n<p>Note that this doesn't handle quoted parentheses. For example, if there might be quoted strings in the text, those might contain opening and/or closing parentheses, which <em>should not count</em> in the nesting. The key to handling this is to detect the quoting characters and skip any characters inside quotes. But the quotes might be escaped and so you have to detect that, too... at some point it becomes easier to use an actual parser.</p>\n"}], "owner": {"reputation": 641, "user_id": 9302655, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/984d6b4e8ea8052988f483e00ed9486a?s=128&d=identicon&r=PG&f=1", "display_name": "zubug55", "link": "https://stackoverflow.com/users/9302655/zubug55"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 53640929, "answer_count": 2, "score": 0, "last_activity_date": 1552490854, "creation_date": 1544043298, "last_edit_date": 1552490854, "question_id": 53640589, "link": "https://stackoverflow.com/questions/53640589/extract-string-content-between-parenthesis-for-eg-function-nameparam1-pa", "title": "extract string content between parenthesis -&gt; for eg: function_name((param1),(param2)) should give (param1),(param2)", "body": "<p>I want to get the whole string which is inside function fun5. For eg:</p>\n\n<pre><code>1.) fun5(hello union fun1(param1) union fun2(param2)) union fun3(param3) union fun4(param4)\n</code></pre>\n\n<p>should return -> <code>hello union fun1(param1) union fun2(param2)</code></p>\n\n<pre><code>2.) fun3(param3) union fun4(param4) union fun5(hello union fun1(param1) union fun2(param2))\n</code></pre>\n\n<p>should return -> <code>hello union fun1(param1) union fun2(param2)</code></p>\n\n<p>I tried using below regexp:</p>\n\n<pre><code>import re\nstr = \"fun5(hello union fun1(param1) union fun2(param2)) union fun3(param3) union fun4(param4)\"\n\nif re.search(r'(:?\\W|^)(:?fun5)\\(', str, re.IGNORECASE):\n    exp = re.search(fun5\\((.*?)\\)', str, re.IGNORECASE).group(1)\n    print(exp)\n</code></pre>\n\n<p>But it doesn't work because of nested parenthesis inside.</p>\n"}, {"tags": ["python", "web", "cors", "bottle"], "answers": [{"comments": [{"owner": {"reputation": 2109, "user_id": 1008636, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ccc21c214b56f40fa518bedf7dd02819?s=128&d=identicon&r=PG", "display_name": "user1008636", "link": "https://stackoverflow.com/users/1008636/user1008636"}, "edited": false, "score": 0, "creation_date": 1544117139, "post_id": 53654088, "comment_id": 94171733, "body": "Thanks, yes that of course is a workable that I&#39;d rather avoid, as it makes it look ugly and defeats the after_request hook."}, {"owner": {"reputation": 14447, "user_id": 593047, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ZTl2D.jpg?s=128&g=1", "display_name": "ron rothman", "link": "https://stackoverflow.com/users/593047/ron-rothman"}, "reply_to_user": {"reputation": 2109, "user_id": 1008636, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ccc21c214b56f40fa518bedf7dd02819?s=128&d=identicon&r=PG", "display_name": "user1008636", "link": "https://stackoverflow.com/users/1008636/user1008636"}, "edited": false, "score": 0, "creation_date": 1544117225, "post_id": 53654088, "comment_id": 94171783, "body": "Why do you feel it&#39;s important to have an <code>after_request</code> hook? (In my experience, Bottle plugins work much better. But why do you need either in this case?)"}, {"owner": {"reputation": 2109, "user_id": 1008636, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ccc21c214b56f40fa518bedf7dd02819?s=128&d=identicon&r=PG", "display_name": "user1008636", "link": "https://stackoverflow.com/users/1008636/user1008636"}, "edited": false, "score": 0, "creation_date": 1544125253, "post_id": 53654088, "comment_id": 94175285, "body": "Many similar bottle servers running, setting the same kind of headers again and again does not seem like a good practice."}, {"owner": {"reputation": 14447, "user_id": 593047, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ZTl2D.jpg?s=128&g=1", "display_name": "ron rothman", "link": "https://stackoverflow.com/users/593047/ron-rothman"}, "reply_to_user": {"reputation": 2109, "user_id": 1008636, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ccc21c214b56f40fa518bedf7dd02819?s=128&d=identicon&r=PG", "display_name": "user1008636", "link": "https://stackoverflow.com/users/1008636/user1008636"}, "edited": false, "score": 0, "creation_date": 1544130756, "post_id": 53654088, "comment_id": 94177749, "body": "Yeah, I see your point - in that case you might want to consider using a plugin. Here&#39;s an <a href=\"https://stackoverflow.com/a/21785056/593047\">example plugin</a> that you might be able to adapt."}], "tags": [], "owner": {"reputation": 14447, "user_id": 593047, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/ZTl2D.jpg?s=128&g=1", "display_name": "ron rothman", "link": "https://stackoverflow.com/users/593047/ron-rothman"}, "is_accepted": true, "score": 0, "last_activity_date": 1544108148, "creation_date": 1544108148, "answer_id": 53654088, "question_id": 53640565, "link": "https://stackoverflow.com/questions/53640565/returning-httpresponse-object-in-bottle-loses-response-headers/53654088#53654088", "title": "Returning HTTPResponse object in bottle loses response headers", "body": "<p>Try setting the headers in the new object that you're returning, like this:</p>\n\n<pre><code>return HTTPResponse(status=200, body=json.dumps({'body': 'my body'}, headers={'Access-Control-Allow-Origin': '*'})\n</code></pre>\n\n<p>My guess is that the <code>after_request</code> hook is operating on the \"magic\" response object that Bottle manages for you - so when you create and return a <em>new</em> one, its headers aren't modified.</p>\n"}], "owner": {"reputation": 2109, "user_id": 1008636, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ccc21c214b56f40fa518bedf7dd02819?s=128&d=identicon&r=PG", "display_name": "user1008636", "link": "https://stackoverflow.com/users/1008636/user1008636"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 53654088, "answer_count": 1, "score": 0, "last_activity_date": 1544108148, "creation_date": 1544043182, "last_edit_date": 1544046164, "question_id": 53640565, "link": "https://stackoverflow.com/questions/53640565/returning-httpresponse-object-in-bottle-loses-response-headers", "title": "Returning HTTPResponse object in bottle loses response headers", "body": "<p>I have a bottle server (whose underlying http server has been swapped out with a multi-threaded CherryPy) in which one of my routes (a 'POST')returns an HTTP response instead of a json dictionary directly, eg:</p>\n\n<pre><code>return HTTPResponse(status=200,body=json.dumps({'body':'my body'})\n</code></pre>\n\n<p>Now, I have added '<code>after_request'</code> hook to my bottle app so that it will set headers on the response to handle CORS, eg, in my <code>after_request</code> hook I have:</p>\n\n<pre><code>bottle.response.set_header('Access-Control-Allow-Origin', '*')\n</code></pre>\n\n<p>And I can confirm the <code>after_request</code> function runs and sets the headers successfully on <code>bottle.response</code>.</p>\n\n<p>BUT, my route function returns BEFORE the after_request function runs, and so my browser still sees none of those headers in the response message.</p>\n\n<p>However, if I just modify my route function to return a simple json dict, instead of <code>HTTPResponse</code>, eg:</p>\n\n<pre><code>return json.dumps({'body':'my body'}\n</code></pre>\n\n<p>Then suddenly, the browser sees the headers set by my after_request hook. Even though the rest of my code is unchanged.</p>\n\n<p>What gives? Why does returning <code>HTTPResponse</code> makes me lose all the headers, but returning just a simple json does not?</p>\n"}, {"tags": ["python", "pymysql"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8128927"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1544043531, "post_id": 53640547, "comment_id": 94140746, "body": "Testing now @roganjosh. Thank you."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8128927"}, "reply_to_user": {"reputation": 10847, "user_id": 4799172, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/17539586d5bb4e528d94f3bc4131e6c0?s=128&d=identicon&r=PG&f=1", "display_name": "roganjosh", "link": "https://stackoverflow.com/users/4799172/roganjosh"}, "edited": false, "score": 0, "creation_date": 1544043721, "post_id": 53640547, "comment_id": 94140836, "body": "<code>ProgrammingError: (1064, u&quot;You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near &#39;&#39; at line 2&quot;</code>"}, {"owner": {"reputation": 5872, "user_id": 84308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7c27e514504f90a63edaefd74248a461?s=128&d=identicon&r=PG", "display_name": "deets", "link": "https://stackoverflow.com/users/84308/deets"}, "edited": false, "score": 3, "creation_date": 1544043751, "post_id": 53640547, "comment_id": 94140855, "body": "You are missing a closing brace."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8128927"}, "edited": false, "score": 0, "creation_date": 1544043965, "post_id": 53640700, "comment_id": 94140947, "body": "Thank you fixing the multi-string and adding the closing paren has resolved the issue."}], "tags": [], "owner": {"reputation": 27342, "user_id": 899344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b510e9cb741e4f4e1aed1c4642f21066?s=128&d=identicon&r=PG", "display_name": "Conner", "link": "https://stackoverflow.com/users/899344/conner"}, "is_accepted": true, "score": 0, "last_activity_date": 1544043831, "creation_date": 1544043831, "answer_id": 53640700, "question_id": 53640547, "link": "https://stackoverflow.com/questions/53640547/parametrize-insert-python-pymysql/53640700#53640700", "title": "Parametrize insert Python pymysql", "body": "<p>You are missing a close paren <code>)</code> at the end of your <code>VALUES()</code>.</p>\n\n<p>You are also using a multi-line string incorrectly. Try this:</p>\n\n<pre><code>sql = \"\"\"INSERT INTO Sample (SampleName, TransferStatus, ClientSid, ClientSubjectId, ClientName, ProjectId, ProjectName, ExecutionId, Deleted)\n          VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s)\"\"\"\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8128927"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 53640700, "answer_count": 1, "score": 0, "last_activity_date": 1544043831, "creation_date": 1544043099, "last_edit_date": 1544043810, "question_id": 53640547, "link": "https://stackoverflow.com/questions/53640547/parametrize-insert-python-pymysql", "title": "Parametrize insert Python pymysql", "body": "<p>I have the following block of code</p>\n\n<pre><code>def write_metadata(self):\n    try:\n        with self.sql_writer.cursor as cursor:\n            for data in self.input_data:\n                sql = (\"\"\"INSERT INTO Sample (SampleName, TransferStatus, ClientSid, ClientSubjectId, ClientName, ProjectId, ProjectName, ExecutionId, Deleted)\n                    VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s\"\"\")\n                package_data = (data.sample_name, 0, 'client_sid', \"Testing\", data.client_name, data.project_id, data.project_name, '12345', '0')\n                cursor.execute(sql, package_data)\n            self.sql_writer.conn.commit()\n    finally:\n       self.sql_writer.conn.close()\n</code></pre>\n\n<p>the error that I am getting is</p>\n\n<pre><code>\"errorMessage\": \"(1064, u\\\"You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' at line 1\\\")\"\n</code></pre>\n\n<p>Is there an issue with my parametrize  of the sql?\nIs the issue because some of the values are numbers and %s is for string?\nIs the issue because some of the values are None?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "python-3.x", "function", "if-statement"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1544043403, "post_id": 53640519, "comment_id": 94140692, "body": "&quot;When the function calls, it returns just what ever is under else. despite the if statement is fulfilled.&quot; That is not true. What is almost certainly true is that you are mistaken about what your if statement is doing."}, {"owner": {"reputation": 931, "user_id": 1578967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9v0y.jpg?s=128&g=1", "display_name": "Haramoz", "link": "https://stackoverflow.com/users/1578967/haramoz"}, "edited": false, "score": 1, "creation_date": 1544043550, "post_id": 53640519, "comment_id": 94140753, "body": "Your if statement and elif statements are returning the same values, what is the point of them having there if I may ask? how do you know for sure that your if statement is not being called even when full filled,  could you please share such input and output when that happens."}, {"owner": {"reputation": 931, "user_id": 1578967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9v0y.jpg?s=128&g=1", "display_name": "Haramoz", "link": "https://stackoverflow.com/users/1578967/haramoz"}, "edited": false, "score": 0, "creation_date": 1544044597, "post_id": 53640519, "comment_id": 94141249, "body": "I think I got the problem here. I ran your code and found the issue with the else statement. I posted a answer, should help you fix the issue now. Cheers!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user10307643"}, "reply_to_user": {"reputation": 1487, "user_id": 3901060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f386743bd29ff8c0ab6e1637938a795?s=128&d=identicon&r=PG&f=1", "display_name": "FamousJameous", "link": "https://stackoverflow.com/users/3901060/famousjameous"}, "edited": false, "score": 0, "creation_date": 1544355898, "post_id": 53640519, "comment_id": 94239594, "body": "@FamousJameous You are wrong. Notice the python-3.x tag."}], "answers": [{"comments": [{"owner": {"reputation": 429, "user_id": 10295907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z31fH.jpg?s=128&g=1", "display_name": "Pavel.D", "link": "https://stackoverflow.com/users/10295907/pavel-d"}, "edited": false, "score": 0, "creation_date": 1544045227, "post_id": 53640857, "comment_id": 94141536, "body": "Thanks for clarifying the problem and explaining debug of for-loop and if statement. But unfortunately it does not help fixing my problem. There should be a way to run for-loop without jumping at first time and return even values when Error message shows up something like <code>R = xxx</code> and <code>i = 99</code>."}, {"owner": {"reputation": 931, "user_id": 1578967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9v0y.jpg?s=128&g=1", "display_name": "Haramoz", "link": "https://stackoverflow.com/users/1578967/haramoz"}, "reply_to_user": {"reputation": 429, "user_id": 10295907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z31fH.jpg?s=128&g=1", "display_name": "Pavel.D", "link": "https://stackoverflow.com/users/10295907/pavel-d"}, "edited": false, "score": 0, "creation_date": 1544045916, "post_id": 53640857, "comment_id": 94141839, "body": "That&#39;s impossible to use return like that, Then I would solve your problem like this. How about adding the for loop inside your main body, and call fun inside it. Should solve your problem that way? You can return after each run. i think this is the only option you have now. Let me know if you got the idea"}, {"owner": {"reputation": 931, "user_id": 1578967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9v0y.jpg?s=128&g=1", "display_name": "Haramoz", "link": "https://stackoverflow.com/users/1578967/haramoz"}, "reply_to_user": {"reputation": 429, "user_id": 10295907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z31fH.jpg?s=128&g=1", "display_name": "Pavel.D", "link": "https://stackoverflow.com/users/10295907/pavel-d"}, "edited": false, "score": 1, "creation_date": 1544046195, "post_id": 53640857, "comment_id": 94141950, "body": "I edited and added the demo answer, do you like it now ? i commented the Qt codes, i don&#39;t have them."}, {"owner": {"reputation": 429, "user_id": 10295907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z31fH.jpg?s=128&g=1", "display_name": "Pavel.D", "link": "https://stackoverflow.com/users/10295907/pavel-d"}, "edited": false, "score": 0, "creation_date": 1544048197, "post_id": 53640857, "comment_id": 94142637, "body": "I have got the point by rewritning the above code, as you proposed, smart. returns every single run. but that is not how I want it, I am afraid, it does not fit to my exercise. Thanks any way."}], "tags": [], "owner": {"reputation": 931, "user_id": 1578967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/e9v0y.jpg?s=128&g=1", "display_name": "Haramoz", "link": "https://stackoverflow.com/users/1578967/haramoz"}, "is_accepted": false, "score": 1, "last_activity_date": 1544046134, "last_edit_date": 1544046134, "creation_date": 1544044510, "answer_id": 53640857, "question_id": 53640519, "link": "https://stackoverflow.com/questions/53640519/function-return-with-different-conditional-statement/53640857#53640857", "title": "Function return with different conditional statement", "body": "<p>I see the problem here, thanks to Tim B, Though he did not add how to fix it. So your <code>if</code> statements are working fine. Just what is happening here is that you are having a <code>return</code> statement at the end of all the <code>if elif else</code>. So for the very first run with <code>i = 0, R = 0</code> and it will go to else and return a value. WHEN that happens the for loop stops executing. So basically all your code is just running one time with R = 0 values. </p>\n\n<p>What you probably want to do is remove the <code>return</code> statement from <code>else</code> clause. Or instead of returning the result save the results in two list or arrays. I hope this help you solve the issue. </p>\n\n<pre><code>def fun( x, y, z):\nX = x\nY = y\nZ = z\nresults = []\nrelated_indexes = []\nR = i * X/Y\nprint(R)\nif R == 10:\n    return R, i\nelif 10 &lt; R &lt;= 45:\n    return R, i\nelse:\n    print('Error') \n    #app = QtWidgets.QApplication([])\n    #error_dialog = QtWidgets.QErrorMessage()\n    #error_dialog.showMessage('Error!! change values')\n    #app.exec_() \n    return R, i\nx,y,z = (10, 60, 100)\n\nfor i in range(0,z):\n    result,prod = fun(x,y,z)\n    print(result, prod)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 429, "user_id": 10295907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z31fH.jpg?s=128&g=1", "display_name": "Pavel.D", "link": "https://stackoverflow.com/users/10295907/pavel-d"}, "edited": false, "score": 0, "creation_date": 1544380653, "post_id": 53689683, "comment_id": 94246209, "body": "Thanks a lot. your solution is a great help for me."}], "tags": [], "owner": {"reputation": 8750, "user_id": 8505817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53eb392d7acc9829ca94ef2bb495ab7f?s=128&d=identicon&r=PG&f=1", "display_name": "igrinis", "link": "https://stackoverflow.com/users/8505817/igrinis"}, "is_accepted": true, "score": 1, "last_activity_date": 1544355563, "last_edit_date": 1544355563, "creation_date": 1544333668, "answer_id": 53689683, "question_id": 53640519, "link": "https://stackoverflow.com/questions/53640519/function-return-with-different-conditional-statement/53689683#53689683", "title": "Function return with different conditional statement", "body": "<p>Try</p>\n\n<pre><code>def fun( x, y, z):\n   X = x\n   Y = y\n   Z = z\n\n   R, i = 0, 0  # &lt;- if Z&lt;1 you will not enter the loop at all, and your original function will not return anything. \n   for i in range(0,Z):\n       R = i * X/Y\n\n       if R == 10:\n           return R, i\n       elif 10 &lt; R &lt;= 45:\n           return R, i\n\n   print('Error') \n   app = QtWidgets.QApplication([])\n   error_dialog = QtWidgets.QErrorMessage()\n   error_dialog.showMessage('Error!! change values')\n   app.exec_() \n   return R, i\n</code></pre>\n\n<p>Your <code>else</code> statement should be applied to <code>for</code>, and not to <code>if</code>. You intention is to run over all possible values in the loop, and if the condition is not met on <strong>all</strong> possible values in the loop, only then raise an error.  </p>\n\n<p>By the way, it is not a good style to place all <code>returns</code> inside <code>ifs</code>. This way you can overlook some rare cases and get an undesired behavior. This is exactly why you get <code>TypeError: 'NoneType' object is not iterable</code>. You expect to get a tuple from the function, but receive nothing, as the program exits the function without returning a value at all.</p>\n"}], "owner": {"reputation": 429, "user_id": 10295907, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z31fH.jpg?s=128&g=1", "display_name": "Pavel.D", "link": "https://stackoverflow.com/users/10295907/pavel-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1936, "favorite_count": 0, "accepted_answer_id": 53689683, "answer_count": 2, "score": 1, "last_activity_date": 1544355563, "creation_date": 1544042949, "last_edit_date": 1544043825, "question_id": 53640519, "link": "https://stackoverflow.com/questions/53640519/function-return-with-different-conditional-statement", "title": "Function return with different conditional statement", "body": "<p>I have a simple function, which I do like to call and return some values. Inside that function there is a if, elif and else statement, purpose is when if condition is met, return some values, it is when if and elif are not fulfilled, run and display what ever is under else statement. I have used a widget alert to flag and state the problem.</p>\n\n<p>The problem is:</p>\n\n<p>1- When the function calls, it returns just what ever is under else. despite the if statement is fulfilled. </p>\n\n<p>2- Remove all codelines under else, just run if and elif, return some value if the conditions are met, otherwise returns <code>TypeError: 'NoneType' object is not iterable</code>. </p>\n\n<p><strong>The code:</strong></p>\n\n<pre><code>from PyQt5 import QtCore, QtWidgets, QtGui\n\ndef fun( x, y, z):\n    X = x\n    Y = y\n    Z = z\n\n    for i in range(0,Z):\n        R = i * X/Y\n\n        if R == 10:\n            return R, i\n        elif 10 &lt; R &lt;= 45:\n            return R, i\n        else:\n            print('Error') \n            app = QtWidgets.QApplication([])\n            error_dialog = QtWidgets.QErrorMessage()\n            error_dialog.showMessage('Error!! change values')\n            app.exec_() \n            return R, i\n</code></pre>\n\n<p>Using these values to fulfill conditions.</p>\n\n<pre><code>result, prod = fun(10, 60, 100)\nresult, prod = fun(105, 60, 100)\nresult, prod = fun(10, 600, 100)\n</code></pre>\n\n<p>Input with else statement:</p>\n\n<pre><code>result, prod = fun(10, 60, 100)\nprint( result, prod)\n</code></pre>\n\n<p>Output with else statement:</p>\n\n<pre><code>Error window shows up\n\nError\n0.0 0\n</code></pre>\n\n<p>Input without else statement:</p>\n\n<pre><code>result, prod = fun(10, 60, 100)\nprint( result, prod)\n</code></pre>\n\n<p>Output without else statement:</p>\n\n<pre><code>10.0 60\n</code></pre>\n\n<p>I want to keep the statements and return values as it is desired. Thanks for your help</p>\n"}, {"tags": ["python", "string", "search"], "answers": [{"comments": [{"owner": {"reputation": 505, "user_id": 3075765, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/6bb22510b6d01f72790a8d77828656c5?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/3075765/mihir"}, "edited": false, "score": 0, "creation_date": 1544045968, "post_id": 53641062, "comment_id": 94141867, "body": "thank you very much, can you please explain your code? if you don&#39;t mind?"}], "tags": [], "owner": {"reputation": 329, "user_id": 8902486, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf6cd4aac154c1e72f684e29b8f8fc14?s=128&d=identicon&r=PG&f=1", "display_name": "ATK7474", "link": "https://stackoverflow.com/users/8902486/atk7474"}, "is_accepted": true, "score": 1, "last_activity_date": 1544045427, "creation_date": 1544045427, "answer_id": 53641062, "question_id": 53640513, "link": "https://stackoverflow.com/questions/53640513/searching-string-on-two-text-files-using-python/53641062#53641062", "title": "searching string on two text files using python", "body": "<p>Not the prettiest thing in the world, but should get the job done:</p>\n\n<pre><code>from collections import Counter\n\nwith open('a.txt', 'r') as a:\n    a_list = []\n    for line in a:\n        groups = line.split(':')[1]\n        groups = groups.split('[')[1].split(']')[0]\n        groups = groups.split(', ')\n        a_list.append(groups)\n\nwith open('b.txt', 'r') as b:\n    b_list = []\n    for line in b:\n        groups = line.split(':')[1]\n        groups = groups.split('[')[1].split(']')[0]\n        groups = groups.split(', ')\n        b_list.append(groups)\n\nwith open('output.txt', 'w') as output:\n    a_counter = [Counter(i) for i in a_list]\n    for group in b_list:\n        if Counter(group) in a_counter:\n            output.write(f\"GROUP :{group}\\n\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 4794057, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-9eCSXTlVRnM/AAAAAAAAAAI/AAAAAAAAKsc/jLKb3pGWzTk/photo.jpg?sz=128", "display_name": "apapillon", "link": "https://stackoverflow.com/users/4794057/apapillon"}, "is_accepted": false, "score": 1, "last_activity_date": 1544048081, "last_edit_date": 1544048081, "creation_date": 1544046990, "answer_id": 53641369, "question_id": 53640513, "link": "https://stackoverflow.com/questions/53640513/searching-string-on-two-text-files-using-python/53641369#53641369", "title": "searching string on two text files using python", "body": "<p>With regex and re module :</p>\n\n<pre><code>import re\n\ngrp_tmpl = list()\n\n# Register all groups\nf = open('b.txt', 'r')\nfor line in f.readlines():\n    grp_tmpl.append(sorted(re.findall('\\d+', line)))\n\n# Find groups\nout = open('output.txt', 'w')\nf = open('a.txt', 'r')\nfor line in f.readlines():\n    for t in grp_tmpl:\n        if t == sorted(re.findall('\\d+', line)):\n            out.write(line)\n</code></pre>\n"}], "owner": {"reputation": 505, "user_id": 3075765, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/6bb22510b6d01f72790a8d77828656c5?s=128&d=identicon&r=PG&f=1", "display_name": "Mihir", "link": "https://stackoverflow.com/users/3075765/mihir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 53641062, "answer_count": 2, "score": -1, "last_activity_date": 1544048081, "creation_date": 1544042923, "question_id": 53640513, "link": "https://stackoverflow.com/questions/53640513/searching-string-on-two-text-files-using-python", "title": "searching string on two text files using python", "body": "<p>Using python, How can I process two text files.\nfor example: a.txt has 5 groups and b.txt also have 4 groups.\nb.txt will look for group available on a.txt. If found, write it to output.txt and if not found, do not write it on output.txt.\nnumbers in the group should be matching but order it is not important.</p>\n\n<p>a.txt</p>\n\n<pre><code>GROUP :[11111, 22222, 33333]\nGROUP :[22222, 11111]\nGROUP :[46098]\nGROUP :[66666, 55555, 44444]\nGROUP :[55555, 44444]\n</code></pre>\n\n<p>b.txt</p>\n\n<pre><code>GROUP :[11111, 33333]\nGROUP :[46098]\nGROUP :[22222, 11111]\nGROUP :[44444, 55555, 66666]\n</code></pre>\n\n<p>output.txt</p>\n\n<pre><code>GROUP :[22222, 11111]\nGROUP :[46098]\nGROUP :[44444, 55555, 66666]\n</code></pre>\n"}]