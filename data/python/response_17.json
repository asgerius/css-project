[{"tags": ["python", "math", "scikit-learn", "cluster-analysis", "data-mining"], "comments": [{"owner": {"reputation": 70452, "user_id": 1060350, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/XCkw7.jpg?s=128&g=1", "display_name": "Has QUIT--Anony-Mousse", "link": "https://stackoverflow.com/users/1060350/has-quit-anony-mousse"}, "edited": false, "score": 1, "creation_date": 1431032866, "post_id": 30089675, "comment_id": 48334197, "body": "Have you tried hierarchical clustering? This sounds exactly what you are attempting, hierarchical agglomerative clustering."}], "answers": [{"comments": [{"owner": {"reputation": 957, "user_id": 1430038, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0886a77705db1c5e5455041dc37c4945?s=128&d=identicon&r=PG", "display_name": "Stefan D", "link": "https://stackoverflow.com/users/1430038/stefan-d"}, "edited": false, "score": 1, "creation_date": 1431008260, "post_id": 30093501, "comment_id": 48318751, "body": "Both the KMeans algorithm and SpectralClustering assume that the number of clusters is known. In my problem the number of clusters is not known, and cannot be estimated reliably. But thanks for pointing me to the sklearn clustering algorithms. I tried them all, Affinity Propagation gives the best results. I may try to optimize it or try to create a Python module for FLAME clustering: <a href=\"https://en.wikipedia.org/wiki/FLAME_clustering\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/FLAME_clustering</a>"}, {"owner": {"reputation": 1303, "user_id": 870683, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/iIgMZ.png?s=128&g=1", "display_name": "Ashkan", "link": "https://stackoverflow.com/users/870683/ashkan"}, "reply_to_user": {"reputation": 957, "user_id": 1430038, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0886a77705db1c5e5455041dc37c4945?s=128&d=identicon&r=PG", "display_name": "Stefan D", "link": "https://stackoverflow.com/users/1430038/stefan-d"}, "edited": false, "score": 1, "creation_date": 1431046156, "post_id": 30093501, "comment_id": 48338868, "body": "I see. you want to do the clustering without specifying the number of clusters. I will add one other example of such clustering algorithms to my answer now other than the Affinity Propagation your are using just in case."}, {"owner": {"reputation": 1303, "user_id": 870683, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/iIgMZ.png?s=128&g=1", "display_name": "Ashkan", "link": "https://stackoverflow.com/users/870683/ashkan"}, "reply_to_user": {"reputation": 957, "user_id": 1430038, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0886a77705db1c5e5455041dc37c4945?s=128&d=identicon&r=PG", "display_name": "Stefan D", "link": "https://stackoverflow.com/users/1430038/stefan-d"}, "edited": false, "score": 0, "creation_date": 1431046629, "post_id": 30093501, "comment_id": 48338974, "body": "Also, could you tell me why the diagonal is confusing you? It is reasonable that the similarity of an element to itself be the maximum value 1."}, {"owner": {"reputation": 957, "user_id": 1430038, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0886a77705db1c5e5455041dc37c4945?s=128&d=identicon&r=PG", "display_name": "Stefan D", "link": "https://stackoverflow.com/users/1430038/stefan-d"}, "edited": false, "score": 3, "creation_date": 1431050113, "post_id": 30093501, "comment_id": 48339942, "body": "Thank you! This worked, although not as straightforward. DBSCAN assumes distance between items, while cosine similarity is the exact opposite. To make it work I had to convert my cosine similarity matrix to distances (i.e. subtract from 1.00). Then I had to tweak the eps parameter. It achieves OK results now."}, {"owner": {"reputation": 484, "user_id": 2253546, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/eb73845f7e02190e5f049d88c62292e8?s=128&d=identicon&r=PG", "display_name": "user2253546", "link": "https://stackoverflow.com/users/2253546/user2253546"}, "edited": false, "score": 1, "creation_date": 1486973620, "post_id": 30093501, "comment_id": 71560261, "body": "@Leo-T Just a small correction to your post concerning how spectral clustering works. It is stated that &quot;The algorithm takes the top k eigenvectors of the input matrix corresponding to the largest eigenvalues ...&quot;, however, it does just the opposite. It returns the first k eigenvectors of the Laplacian corresponding to the k smallest eigenvalues."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8510273"}, "reply_to_user": {"reputation": 957, "user_id": 1430038, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0886a77705db1c5e5455041dc37c4945?s=128&d=identicon&r=PG", "display_name": "Stefan D", "link": "https://stackoverflow.com/users/1430038/stefan-d"}, "edited": false, "score": 0, "creation_date": 1504582888, "post_id": 30093501, "comment_id": 79052879, "body": "@StefanD I also have a similar problem like yours. Thanks for the wonderful question. Can&#39;t we use cosine similarity matrix straightly for DBSCAN, without using cosine distance?"}, {"owner": {"reputation": 944, "user_id": 5005052, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/7tG04.jpg?s=128&g=1", "display_name": "Bill Ancalagon the black", "link": "https://stackoverflow.com/users/5005052/bill-ancalagon-the-black"}, "edited": false, "score": 0, "creation_date": 1525460938, "post_id": 30093501, "comment_id": 87380536, "body": "0 down vote I wish to use a specific cut-off-threshold of cosine similarity to cluster the data. Is there any lib that can do this ? For example, if two vectors cosine similarity &lt; 0.1, then put them into the same cluster."}, {"owner": {"reputation": 1303, "user_id": 870683, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/iIgMZ.png?s=128&g=1", "display_name": "Ashkan", "link": "https://stackoverflow.com/users/870683/ashkan"}, "reply_to_user": {"reputation": 484, "user_id": 2253546, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/eb73845f7e02190e5f049d88c62292e8?s=128&d=identicon&r=PG", "display_name": "user2253546", "link": "https://stackoverflow.com/users/2253546/user2253546"}, "edited": false, "score": 0, "creation_date": 1539957731, "post_id": 30093501, "comment_id": 92700545, "body": "@user2253546 are you sure? I am certain it is the largest eigenvalues! Can you point me to some resources?"}], "tags": [], "owner": {"reputation": 1303, "user_id": 870683, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/iIgMZ.png?s=128&g=1", "display_name": "Ashkan", "link": "https://stackoverflow.com/users/870683/ashkan"}, "is_accepted": true, "score": 21, "last_activity_date": 1534895839, "last_edit_date": 1534895839, "creation_date": 1430980259, "answer_id": 30093501, "question_id": 30089675, "link": "https://stackoverflow.com/questions/30089675/clustering-cosine-similarity-matrix/30093501#30093501", "title": "Clustering cosine similarity matrix", "body": "<p>You can easily do this using spectral clustering. You can use the ready implementations such as the one in sklearn or implement it yourself. It is rather an easy algorithm.</p>\n\n<p>Here is a piece of code doing it in python using sklearn:</p>\n\n<pre><code>import numpy as np\nfrom sklearn.cluster import SpectralClustering\nmat = np.matrix([[1.,.1,.6,.4],[.1,1.,.1,.2],[.6,.1,1.,.7],[.4,.2,.7,1.]])\nSpectralClustering(2).fit_predict(mat)\n&gt;&gt;&gt; array([0, 1, 0, 0], dtype=int32)\n</code></pre>\n\n<p>As you can see it returns the clustering you have mentioned.</p>\n\n<p>The algorithm takes the top k eigenvectors of the input matrix corresponding to the largest eigenvalues, then runs the k-mean algorithm on the new matrix. Here is a simple code that does this for your matrix:</p>\n\n<pre><code>from sklearn.cluster import KMeans\neigen_values, eigen_vectors = np.linalg.eigh(mat)\nKMeans(n_clusters=2, init='k-means++').fit_predict(eigen_vectors[:, 2:4])\n&gt;&gt;&gt; array([0, 1, 0, 0], dtype=int32)\n</code></pre>\n\n<p>Note that the implementation of the algorithm in the sklearn library may differ from mine. The example I gave is the simplest way of doing it. There are some good tutorial available online describing the spectral clustering algorithm in depth.</p>\n\n<p>For the cases you want the algorithm to figure out the number of clusters by itself, you can use <strong>Density Based Clustering Algorithms</strong> like <strong>DBSCAN</strong>:</p>\n\n<pre><code>from sklearn.cluster import DBSCAN\nDBSCAN(min_samples=1).fit_predict(mat)\narray([0, 1, 2, 2])\n</code></pre>\n"}], "owner": {"reputation": 957, "user_id": 1430038, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/0886a77705db1c5e5455041dc37c4945?s=128&d=identicon&r=PG", "display_name": "Stefan D", "link": "https://stackoverflow.com/users/1430038/stefan-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18356, "favorite_count": 10, "accepted_answer_id": 30093501, "answer_count": 1, "score": 17, "last_activity_date": 1534895839, "creation_date": 1430956696, "last_edit_date": 1431032832, "question_id": 30089675, "link": "https://stackoverflow.com/questions/30089675/clustering-cosine-similarity-matrix", "title": "Clustering cosine similarity matrix", "body": "<p>A few questions on stackoverflow mention this problem, but I haven't found a concrete solution.</p>\n\n<p>I have a square matrix which consists of cosine similarities (values between 0 and 1), for example:</p>\n\n<pre><code>  |  A  |  B  |  C  |  D\nA | 1.0 | 0.1 | 0.6 |  0.4\nB | 0.1 | 1.0 | 0.1 |  0.2\nC | 0.6 | 0.1 | 1.0 |  0.7\nD | 0.4 | 0.2 | 0.7 |  1.0\n</code></pre>\n\n<p>The square matrix can be of any size. I want to get clusters (I don't know how many) which maximize the values between the elements in the cluster. I.e. for the above example I should get two clusters:</p>\n\n<ol>\n<li>B</li>\n<li>A, C, D</li>\n</ol>\n\n<p>The reason being because C &amp; D have the highest value between them, and A &amp; C also have the highest value between them.</p>\n\n<p>An item can be in only one cluster.</p>\n\n<p>Recall is not that important for this problem, but precision is very important. It is acceptable to output three clusters: 1) B, 2) A, 3) C, D . But it is not acceptable to output any solution where B is in a cluster with another element.</p>\n\n<p>I think the diagonal (1.0) is confusing me. My data is guaranteed to have at least one cluster of 2+ elements, and I want to find as many clusters as possible without sacrificing precision.</p>\n\n<p>I will have to implement this in Python.</p>\n"}, {"tags": ["python", "django", "postgresql"], "answers": [{"comments": [{"owner": {"reputation": 684, "user_id": 1265614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd82e4c0f86835d2815830f75c11a51b?s=128&d=identicon&r=PG", "display_name": "bmhkim", "link": "https://stackoverflow.com/users/1265614/bmhkim"}, "edited": false, "score": 0, "creation_date": 1430960046, "post_id": 30090011, "comment_id": 48293135, "body": "I don&#39;t think this will work as I believe only the primary key may be auto incremented. Unless kevins is okay with globally unique version numbers across all documents."}, {"owner": {"reputation": 12640, "user_id": 3583500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4ce1d8bc75165d4a798eea02c091e91?s=128&d=identicon&r=PG&f=1", "display_name": "khampson", "link": "https://stackoverflow.com/users/3583500/khampson"}, "reply_to_user": {"reputation": 684, "user_id": 1265614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd82e4c0f86835d2815830f75c11a51b?s=128&d=identicon&r=PG", "display_name": "bmhkim", "link": "https://stackoverflow.com/users/1265614/bmhkim"}, "edited": false, "score": 0, "creation_date": 1430964758, "post_id": 30090011, "comment_id": 48294261, "body": "From a <i>Postgres</i> perspective, any field can be auto-incremented. The same is true in Django, where a field can be made an <code>AutoField</code> and doesn&#39;t have to be the primary key (<a href=\"https://docs.djangoproject.com/en/1.8/ref/models/fields/#django.db.models.AutoField\" rel=\"nofollow noreferrer\">docs.djangoproject.com/en/1.8/ref/models/fields/&hellip;</a>)."}, {"owner": {"reputation": 472, "user_id": 1170550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d5ff438bada706ce727b16c1b4546f3e?s=128&d=identicon&r=PG", "display_name": "kevins", "link": "https://stackoverflow.com/users/1170550/kevins"}, "edited": false, "score": 0, "creation_date": 1431126200, "post_id": 30090011, "comment_id": 48378172, "body": "Yeah, I don&#39;t think this will work. I want my version numbers to reset for each Draft. So, first DraftVersion for a Draft is 1, then 2, then 3.. Also the point of my question is to move the logic into the database. What I have shown works fine for the same purpose, only the calculation is done in Python and first you have to fetch the highest version number from the DB."}, {"owner": {"reputation": 12640, "user_id": 3583500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4ce1d8bc75165d4a798eea02c091e91?s=128&d=identicon&r=PG&f=1", "display_name": "khampson", "link": "https://stackoverflow.com/users/3583500/khampson"}, "edited": false, "score": 0, "creation_date": 1431130464, "post_id": 30090011, "comment_id": 48379150, "body": "By &quot;reset&quot; it sounds from your example you mean auto-increment, so in that case I&#39;m not sure why setting it as <code>AutoField</code> wouldn&#39;t work... Then it is <i>Postgres</i> handling the version number each time you create a new <code>DraftVersion</code>, which you would presumably do with each new <code>Draft</code>."}], "tags": [], "owner": {"reputation": 12640, "user_id": 3583500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4ce1d8bc75165d4a798eea02c091e91?s=128&d=identicon&r=PG&f=1", "display_name": "khampson", "link": "https://stackoverflow.com/users/3583500/khampson"}, "is_accepted": false, "score": 1, "last_activity_date": 1430964992, "last_edit_date": 1430964992, "creation_date": 1430959210, "answer_id": 30090011, "question_id": 30089671, "link": "https://stackoverflow.com/questions/30089671/using-django-f-expressions-or-extra-sql-to-increment-value-of-field-based-on-o/30090011#30090011", "title": "Using Django F expressions or &quot;extra&quot; SQL to increment value of field based on other related objects", "body": "<p>I don't think that <code>F</code> expressions are necessary in this case. It sounds like this could be accomplished from within <em>Postgres</em> as follows:</p>\n\n<ol>\n<li>Create a <code>Version</code> model which tracks the versions; it's primary key field will be an auto-incrementing sequence you can use as the version number</li>\n<li>You can <code>save</code> a new version through the model in your Django code when you want to create a new version (or do so through pure SQL)</li>\n<li>Change <code>DraftVersion</code>'s <code>version</code> field to <code>ForeignKey</code> to your <code>Version</code> model</li>\n<li>If you want to <em>preview</em> the next version number, it would then be a matter of querying the <code>Version</code> model for its max and then adding one, e.g. <code>Version.objects.all().aggregate(Max('version')) + 1</code></li>\n</ol>\n\n<p><strong>Edit:</strong></p>\n\n<p>Another option, which may be easier/more flexible, depending on your requirements:</p>\n\n<p>Make the <code>version</code> field of the <code>DraftVersion</code> model <a href=\"https://docs.djangoproject.com/en/1.8/ref/models/fields/#django.db.models.AutoField\" rel=\"nofollow\"><code>AutoField</code></a> instead of <code>PositiveSmallIntegerField</code>. You can make it a primary key or not, depending on which better fits your needs.</p>\n"}], "owner": {"reputation": 472, "user_id": 1170550, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/d5ff438bada706ce727b16c1b4546f3e?s=128&d=identicon&r=PG", "display_name": "kevins", "link": "https://stackoverflow.com/users/1170550/kevins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1430964992, "creation_date": 1430956688, "question_id": 30089671, "link": "https://stackoverflow.com/questions/30089671/using-django-f-expressions-or-extra-sql-to-increment-value-of-field-based-on-o", "title": "Using Django F expressions or &quot;extra&quot; SQL to increment value of field based on other related objects", "body": "<p>So, I'm wondering if there is a way to avoid doing the work in Python and use the DB to do the work with the following models:</p>\n\n<pre><code>class Draft(models.Model):\n    # identity fields\n    current_version = models.OneToOneField('app.models.DraftVersion')\n\nclass DraftVersion(models.Model):\n    # fields which change from version to version\n    objects = DraftVersionManager()\n    draft = models.ForeignKey(Draft)\n    version = models.PositiveSmallIntegerField(default=1)\n\n    class Meta:\n        unique_together = ('draft', 'version')\n\n\nclass DraftVersionManager(models.Manager):\n    def get_next_version_number(self, draft):\n        try:\n            return self.filter(draft=draft).order_by('-version')[0].version + 1\n        except IndexError:\n            return 1\n</code></pre>\n\n<p>So.. Is it possible to do the logic in get_next_version_number inside the db instead of in Python? As shown here for a much simpler example?<a href=\"https://docs.djangoproject.com/en/1.7/ref/models/queries/#f-expressions\" rel=\"nofollow\">https://docs.djangoproject.com/en/1.7/ref/models/queries/#f-expressions</a> </p>\n"}, {"tags": ["python", "class"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 3, "creation_date": 1430956902, "post_id": 30089661, "comment_id": 48292337, "body": "just out of curiousity why would you want to do this? that said it is kind of an interesting question I havent ever seen."}, {"owner": {"reputation": 48698, "user_id": 836407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U5R3Y.png?s=128&g=1", "display_name": "chown", "link": "https://stackoverflow.com/users/836407/chown"}, "edited": false, "score": 3, "creation_date": 1430956921, "post_id": 30089661, "comment_id": 48292346, "body": "If you&#39;re using iPython: <code>%reset -f</code>... but why would you ever <i>need</i> to remove the class from <code>object.__subclasses__</code> in the first place?"}, {"owner": {"reputation": 1323, "user_id": 1994049, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/89dd1dc549479a30a603d975dd902338?s=128&d=identicon&r=PG", "display_name": "wolverdude", "link": "https://stackoverflow.com/users/1994049/wolverdude"}, "edited": false, "score": 0, "creation_date": 1431158538, "post_id": 30089661, "comment_id": 48384250, "body": "I&#39;m using <code>__subclasses__()</code> to get a list of children from a base class for use in the <a href=\"https://sourcemaking.com/design_patterns/strategy\" rel=\"nofollow noreferrer\">strategy pattern</a> so that I can dynamically select one based on a string identifier. I&#39;m writing tests for it, but I don&#39;t want the classes defined in one test to leak into other tests, so I&#39;d like to clean them up if possible."}, {"owner": {"reputation": 18146, "user_id": 646619, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/bd61a0f309ebc135d2661710c2faf379?s=128&d=identicon&r=PG", "display_name": "Colonel Thirty Two", "link": "https://stackoverflow.com/users/646619/colonel-thirty-two"}, "edited": false, "score": 0, "creation_date": 1435842572, "post_id": 30089661, "comment_id": 50376377, "body": "Can you provide a bit more context? Usually, you don&#39;t need the strategy pattern in Python because functions are first class values, so you can simply pass the function rather than needing a class."}], "answers": [{"comments": [{"owner": {"reputation": 3546, "user_id": 738505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a0c1dc8ad0ad006d99e97596c88cdab4?s=128&d=identicon&r=PG", "display_name": "letitbee", "link": "https://stackoverflow.com/users/738505/letitbee"}, "edited": false, "score": 1, "creation_date": 1430957273, "post_id": 30089743, "comment_id": 48292446, "body": "There is a reference to it, reachable by <code>object.__subclasses__()</code>. Obviously <code>gc.collect</code> won&#39;t help."}, {"owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "reply_to_user": {"reputation": 3546, "user_id": 738505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a0c1dc8ad0ad006d99e97596c88cdab4?s=128&d=identicon&r=PG", "display_name": "letitbee", "link": "https://stackoverflow.com/users/738505/letitbee"}, "edited": false, "score": 1, "creation_date": 1430957385, "post_id": 30089743, "comment_id": 48292487, "body": "@letitbee Why don&#39;t you just try it? Also, <code>object.__subclasses__()</code> is a method, it does not reference the class. (The returned value does but only as long as it exists.)"}, {"owner": {"reputation": 3546, "user_id": 738505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a0c1dc8ad0ad006d99e97596c88cdab4?s=128&d=identicon&r=PG", "display_name": "letitbee", "link": "https://stackoverflow.com/users/738505/letitbee"}, "edited": false, "score": 0, "creation_date": 1430957742, "post_id": 30089743, "comment_id": 48292588, "body": "You are right, it helps - must be a weakref somewhere. The argument that &#39;method does not reference the class&#39; though just does not make any sense..."}, {"owner": {"reputation": 8889, "user_id": 4538344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746edd669e07914179feb9f6957a06e3?s=128&d=identicon&r=PG", "display_name": "StenSoft", "link": "https://stackoverflow.com/users/4538344/stensoft"}, "reply_to_user": {"reputation": 3546, "user_id": 738505, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a0c1dc8ad0ad006d99e97596c88cdab4?s=128&d=identicon&r=PG", "display_name": "letitbee", "link": "https://stackoverflow.com/users/738505/letitbee"}, "edited": false, "score": 0, "creation_date": 1430958290, "post_id": 30089743, "comment_id": 48292718, "body": "@letitbee The method is built-in (implemented in C). There does not need to be any weakref."}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": false, "score": 1, "last_activity_date": 1430957139, "creation_date": 1430957139, "answer_id": 30089743, "question_id": 30089661, "link": "https://stackoverflow.com/questions/30089661/is-it-possible-to-delete-not-just-unlink-a-class/30089743#30089743", "title": "Is it possible to delete (not just unlink) a class?", "body": "<p>You can use <a href=\"https://docs.python.org/2/library/gc.html\" rel=\"nofollow\">gc.collect</a> after deleting:</p>\n\n<pre><code>del A\nfrom gc import collect\ncollect()\nprint( object.__subclasses__()) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48698, "user_id": 836407, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U5R3Y.png?s=128&g=1", "display_name": "chown", "link": "https://stackoverflow.com/users/836407/chown"}, "is_accepted": true, "score": 3, "last_activity_date": 1430958813, "last_edit_date": 1430958813, "creation_date": 1430958433, "answer_id": 30089909, "question_id": 30089661, "link": "https://stackoverflow.com/questions/30089661/is-it-possible-to-delete-not-just-unlink-a-class/30089909#30089909", "title": "Is it possible to delete (not just unlink) a class?", "body": "<p>Weak references to <code>A</code> will stick around after you <code>del A</code>.  One reason this is necessary is to allow cyclic references without preventing garbage collection.  Try this to see what is still referencing it (this is specific to the python interpreter, may vary if you run as a script file):</p>\n\n<pre><code>&gt;&gt;&gt; class A(object):\n...     pass\n...\n&gt;&gt;&gt; A\n&lt;class '__main__.A'&gt;\n&gt;&gt;&gt; del A\n&gt;&gt;&gt; A\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nNameError: name 'A' is not defined\n\n&gt;&gt;&gt; object.__subclasses__()[-2]\n&lt;class '__main__.A'&gt;\n\n&gt;&gt;&gt; # using weakref\n&gt;&gt;&gt; import weakref\n&gt;&gt;&gt; weakref.getweakrefs(object.__subclasses__()[-2])\n[&lt;weakref at 0x800fa4ba8; to 'type' at 0x800f9d420 (A)&gt;]\n\n&gt;&gt;&gt; # Another method using gc to see the referrers:\n&gt;&gt;&gt; import gc\n&gt;&gt;&gt; gc.collect()\n&gt;&gt;&gt; gc.get_referrers(object.__subclasses__()[-2])\n[&lt;__main__.A object at 0x800face90&gt;, (&lt;class '__main__.A'&gt;, &lt;type 'object'&gt;), &lt;attribute '__dict__' of 'A' objects&gt;, &lt;attribute '__weakref__' of 'A' objects&gt;]\n\n&gt;&gt;&gt; # See the referents\n&gt;&gt;&gt; print '\\n'.join(map(str, gc.get_referents(object.__subclasses__()[-2])))\n{'__dict__': &lt;attribute '__dict__' of 'A' objects&gt;, '__module__': '__main__', '__weakref__': &lt;attribute '__weakref__' of 'A' objects&gt;, '__doc__': None}\n(&lt;class '__main__.A'&gt;, &lt;type 'object'&gt;)\n(&lt;type 'object'&gt;,)\n&lt;type 'object'&gt;\n</code></pre>\n\n<p>More reading on the subject:</p>\n\n<p><a href=\"http://pymotw.com/2/weakref/\" rel=\"nofollow\">http://pymotw.com/2/weakref/</a><br>\n<a href=\"https://docs.python.org/2/library/gc.html\" rel=\"nofollow\">https://docs.python.org/2/library/gc.html</a><br>\n<a href=\"https://docs.python.org/2.7/library/weakref.html\" rel=\"nofollow\">https://docs.python.org/2.7/library/weakref.html</a><br>\n<a href=\"https://www.python.org/dev/peps/pep-0205/\" rel=\"nofollow\">https://www.python.org/dev/peps/pep-0205/</a><br>\n<a href=\"https://docs.python.org/release/2.6.4/library/stdtypes.html#class.__subclasses__\" rel=\"nofollow\">https://docs.python.org/release/2.6.4/library/stdtypes.html#class.<strong>subclasses</strong></a></p>\n"}], "owner": {"reputation": 1323, "user_id": 1994049, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/89dd1dc549479a30a603d975dd902338?s=128&d=identicon&r=PG", "display_name": "wolverdude", "link": "https://stackoverflow.com/users/1994049/wolverdude"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 30089909, "answer_count": 2, "score": 3, "last_activity_date": 1435842298, "creation_date": 1430956638, "last_edit_date": 1435842298, "question_id": 30089661, "link": "https://stackoverflow.com/questions/30089661/is-it-possible-to-delete-not-just-unlink-a-class", "title": "Is it possible to delete (not just unlink) a class?", "body": "<p>Suppose I define a class.</p>\n\n<pre><code>&gt;&gt;&gt; class A(object):\n&gt;&gt;&gt;     pass\n</code></pre>\n\n<p>Then I want to delete that class. I can use <code>del</code> to unlink it from the variable <code>A</code>.</p>\n\n<pre><code>&gt;&gt;&gt; del A\n&gt;&gt;&gt; A\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nNameError: name 'A' is not defined\n</code></pre>\n\n<p>But <code>del</code> does not actually remove the class itself. I can tell this because it's still listed among <code>object</code>'s subclasses.</p>\n\n<pre><code>&gt;&gt;&gt; object.__subclasses__()\n[..., &lt;class '__main__.A'&gt;]\n</code></pre>\n\n<p>Not that I think this will work, but...</p>\n\n<pre><code>&gt;&gt;&gt; del object.__subclasses__()[-1]\n&gt;&gt;&gt; object.__subclasses__()\n[..., &lt;class '__main__.A'&gt;]\n</code></pre>\n\n<p>Is there a way to actually remove the class so that it is no longer in <code>object.__subclasses__()</code>?</p>\n"}, {"tags": ["python", "mysql", "raspberry-pi"], "comments": [{"owner": {"reputation": 759, "user_id": 4505389, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ZRLuW_vW5eg/AAAAAAAAAAI/AAAAAAAAAAA/p0QCaY0DzHU/photo.jpg?sz=128", "display_name": "S. Adam Nissley", "link": "https://stackoverflow.com/users/4505389/s-adam-nissley"}, "edited": false, "score": 0, "creation_date": 1431004335, "post_id": 30089648, "comment_id": 48315478, "body": "Please post your crontab."}, {"owner": {"reputation": 1552, "user_id": 944230, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/44c259f4e05a5631a40695841c7fd01c?s=128&d=identicon&r=PG", "display_name": "Pixou", "link": "https://stackoverflow.com/users/944230/pixou"}, "edited": false, "score": 0, "creation_date": 1431015102, "post_id": 30089648, "comment_id": 48324054, "body": "when you say &quot;If i delete the mysql access the script (with cron) work&quot;, it means that you remove the SQL connection in this script ? You should first test it before adding it to the CRON (which, btw, is not the best place to be sure that it is launched at start: CRON is for launching job at regular times, not at start time, for which you should use /etc/init.d/ as adivsed <a href=\"http://stackoverflow.com/questions/12973777/how-to-run-a-shell-script-at-startup\" title=\"how to run a shell script at startup\">stackoverflow.com/questions/12973777/&hellip;</a> But first launch your script alone, you&#39;ll probably get an error"}], "answers": [{"tags": [], "owner": {"reputation": 1490, "user_id": 1016819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d97006f8aa326ac2660052f8283084?s=128&d=identicon&r=PG", "display_name": "MacHala", "link": "https://stackoverflow.com/users/1016819/machala"}, "is_accepted": false, "score": 0, "last_activity_date": 1431204973, "creation_date": 1431204973, "answer_id": 30144934, "question_id": 30089648, "link": "https://stackoverflow.com/questions/30089648/raspberry-pi-script-python-and-crontab/30144934#30144934", "title": "Raspberry-pi: script Python and Crontab", "body": "<p>If you run it at startup, it's possible that it attempts to run before the mysqld starts. </p>\n\n<p>Anyway, just wrap the connection to mysql into try .. except block and log whatever error it returns</p>\n"}], "owner": {"reputation": 11, "user_id": 4855752, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206847110446497/picture?type=large", "display_name": "Silvio Andrea Christopher Matt", "link": "https://stackoverflow.com/users/4855752/silvio-andrea-christopher-matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 365, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1431204973, "creation_date": 1430956546, "last_edit_date": 1431203017, "question_id": 30089648, "link": "https://stackoverflow.com/questions/30089648/raspberry-pi-script-python-and-crontab", "title": "Raspberry-pi: script Python and Crontab", "body": "<p>I write a script python that access to Mysql Database and switch on/off some led.</p>\n\n<p>I want it to start at boot of raspberry but not work.\nIf i delete the mysql access the script (with cron) work. Why?</p>\n\n<p>It is the script:</p>\n\n<pre><code>import RPi.GPIO as gpio\nimport _mysql\n\ngpio.setmode(gpio.BCM)\ngpio.setwarnings(False)\n\nrele_luci=17;\nfotoresistenza=4;\n\ngpio.setup(fotoresistenza,gpio.IN) #fotoresistenza\ngpio.setup(rele_luci,gpio.OUT) #rele-luci-giardino\n\nconnessione = _mysql.connect(\"localhost\",\"residente\",\"pinkrabbits\",\"domotica\")\ncomando = \"SELECT attivo FROM casa WHERE id_stanza = 1\"\n\n\nwhile 1==1:\n        query = connessione.query(comando)\n        risultato = connessione.store_result()\n        attivo = int(risultato.fetch_row()[0][0])\n\n        if (attivo == 0):\n\n                valore=gpio.input(fotoresistenza)\n                if valore == 0:\n                        gpio.output(rele_luci,1)\n                        comando2 = \"UPDATE casa SET luci=1 WHERE id_stanza=1\"\n                else:\n                        gpio.output(rele_luci,0)\n                        comando2 = \"UPDATE casa SET luci=0 WHERE id_stanza=1\"\n                query = connessione.query(comando2)\n</code></pre>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "edited": false, "score": 1, "creation_date": 1430956569, "post_id": 30089637, "comment_id": 48292240, "body": "read a basic tutorial."}], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 2, "last_activity_date": 1430956673, "last_edit_date": 1430956673, "creation_date": 1430956530, "answer_id": 30089643, "question_id": 30089637, "link": "https://stackoverflow.com/questions/30089637/dynamic-dictionary-in-python/30089643#30089643", "title": "Dynamic dictionary in Python", "body": "<p>this is known as a dictionary comprehension</p>\n\n<p>it was introduced in python 2.7 </p>\n\n<p>see: <a href=\"https://docs.python.org/2/tutorial/datastructures.html#dictionaries\" rel=\"nofollow\">https://docs.python.org/2/tutorial/datastructures.html#dictionaries</a></p>\n\n<p>there are also set comprehensions, list comprehensions, generator statements...</p>\n\n<p>however you are right you cannot just write arbitrary code and expect it to work</p>\n\n<p>ie <code>print(x) for x in key_list</code> is indeed a syntax error</p>\n"}], "owner": {"reputation": 2792, "user_id": 3934374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2b98f7433e91e8fd6e1d603bce042f?s=128&d=identicon&r=PG", "display_name": "Tate Thurston", "link": "https://stackoverflow.com/users/3934374/tate-thurston"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1513834418, "creation_date": 1430956468, "last_edit_date": 1513834418, "question_id": 30089637, "link": "https://stackoverflow.com/questions/30089637/dynamic-dictionary-in-python", "title": "Dynamic dictionary in Python", "body": "<p>Python v3.4.2</p>\n\n<p>I've created a dictionary from a list of keys and stored the number of times the key occurs.</p>\n\n<p>My code works as intended, but I'm unsure WHY it works: </p>\n\n<p>count_dict = {key: key_list.count(key) for key in key_list}</p>\n\n<p>I see that for every key in key_list, I'm adding 'key' and 'count' value pairs to the dictionary. But why does this syntax work? I would expect to need to declare an empty dictionary and then add the key value pairs within a for..in.. loop.</p>\n\n<p>It appears to work for lists as well. But when I try something such as:</p>\n\n<p>print(x) for x in key_list</p>\n\n<p>I get a syntax error.</p>\n"}, {"tags": ["python", "time-series", "statsmodels"], "answers": [{"tags": [], "owner": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "is_accepted": false, "score": 8, "last_activity_date": 1430957747, "creation_date": 1430957747, "answer_id": 30089823, "question_id": 30089591, "link": "https://stackoverflow.com/questions/30089591/freq-argument-options-in-statsmodels-tsa-ar-and-arma-models/30089823#30089823", "title": "freq argument options in statsmodels tsa AR and ARMA models", "body": "<p>It is documented in their super class <a href=\"https://github.com/statsmodels/statsmodels/blob/master/statsmodels/tsa/base/tsa_model.py\" rel=\"noreferrer\"><code>statsmodels.tsa.base.tsa_model.TimeSeriesModel</code></a>.</p>\n\n<pre><code>\"\"\"\nTimeseries model base class\n\nParameters\n----------\nendog\nexog\ndates\nfreq : str {'B','D','W','M','A', 'Q'}\n    'B' - business day, ie., Mon. - Fri.\n    'D' - daily\n    'W' - weekly\n    'M' - monthly\n    'A' - annual\n    'Q' - quarterly\n\n\"\"\"\n</code></pre>\n"}], "owner": {"reputation": 155, "user_id": 3297752, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/hCFlN.png?s=128&g=1", "display_name": "Noah Motion", "link": "https://stackoverflow.com/users/3297752/noah-motion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2472, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1430957747, "creation_date": 1430956207, "question_id": 30089591, "link": "https://stackoverflow.com/questions/30089591/freq-argument-options-in-statsmodels-tsa-ar-and-arma-models", "title": "freq argument options in statsmodels tsa AR and ARMA models", "body": "<p>In the statsmodels time series analysis <a href=\"http://statsmodels.sourceforge.net/devel/generated/statsmodels.tsa.ar_model.AR.html#statsmodels.tsa.ar_model.AR\" rel=\"nofollow\">AR</a> and <a href=\"http://statsmodels.sourceforge.net/devel/generated/statsmodels.tsa.arima_model.ARMA.html#statsmodels.tsa.arima_model.ARMA\" rel=\"nofollow\">ARMA</a> models, the <code>freq</code> argument can be \"a Pandas offset or \u2018B\u2019, \u2018D\u2019, \u2018W\u2019, \u2018M\u2019, \u2018A\u2019, or \u2018Q\u2019.\"</p>\n\n<p>What do \u2018B\u2019, \u2018D\u2019, \u2018W\u2019, \u2018M\u2019, \u2018A\u2019, and \u2018Q\u2019 mean? I'm guessing that D is 'daily', W is 'weekly', M is 'monthly', A is 'annually', and that Q is 'quarterly', but I can't figure out what B is, and I can't find any documentation that confirms (or disconfirms) my guesses.</p>\n"}, {"tags": ["python", "excel", "openpyxl"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430956490, "post_id": 30089563, "comment_id": 48292221, "body": "Well, you start at A4, then, for each row, for each cell in the row, you increment that 4. So, if the sheet is 10x10, you&#39;ll eventually be asking for A104. Which doesn&#39;t exist, because the sheet is 10x10, not 104xsomething. How did you <i>expect</i> this to work?"}, {"owner": {"reputation": 10312, "user_id": 1681480, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/0wsSK.jpg?s=128&g=1", "display_name": "beroe", "link": "https://stackoverflow.com/users/1681480/beroe"}, "edited": false, "score": 0, "creation_date": 1430959689, "post_id": 30089563, "comment_id": 48293033, "body": "show a bit of the organization of the sheet: A4 says Project 1. Are the values you want in the same row, stretching across, and if so, how far?"}, {"owner": {"reputation": 3, "user_id": 4015742, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MmmChips", "link": "https://stackoverflow.com/users/4015742/mmmchips"}, "edited": false, "score": 0, "creation_date": 1431015630, "post_id": 30089563, "comment_id": 48324393, "body": "I only want to print values from column A but there are some  values in other columns. I only specifically want values from column A"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4015742, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MmmChips", "link": "https://stackoverflow.com/users/4015742/mmmchips"}, "edited": false, "score": 0, "creation_date": 1431017951, "post_id": 30093733, "comment_id": 48325804, "body": "I&#39;m trying to get values from only column A. Thank you for the information"}], "tags": [], "owner": {"reputation": 14362, "user_id": 2385133, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3a93c5a0f975385738c1f27848f3b50a?s=128&d=identicon&r=PG", "display_name": "Charlie Clark", "link": "https://stackoverflow.com/users/2385133/charlie-clark"}, "is_accepted": false, "score": 0, "last_activity_date": 1431072993, "last_edit_date": 1431072993, "creation_date": 1430981067, "answer_id": 30093733, "question_id": 30089563, "link": "https://stackoverflow.com/questions/30089563/python-openpyxl-read-an-excel-file-and-set-null-for-blank-cells/30093733#30093733", "title": "Python openpyxl - Read an Excel file and set null for blank cells", "body": "<p>I'm not sure what you're trying to do but you should probably look at using the <code>get_squared_range()</code> method of the worksheet to get a range of cells such as A4:D10 to work with.</p>\n\n<p>FWIW as the traceback shows the error is coming from looking up the value of a cell before it has been created. Use <code>ws.cell()</code> if you want to look up cells programmatically.</p>\n\n<p>To get all the cells from column A:\n<code>ws.get_squared_range(min_col=1, min_row=1, max_col=1, max_row=ws.max_row)</code></p>\n\n<p>To get just some: <code>ws['A1':'A10']</code></p>\n"}], "owner": {"reputation": 3, "user_id": 4015742, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "MmmChips", "link": "https://stackoverflow.com/users/4015742/mmmchips"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2787, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1431072993, "creation_date": 1430956046, "question_id": 30089563, "link": "https://stackoverflow.com/questions/30089563/python-openpyxl-read-an-excel-file-and-set-null-for-blank-cells", "title": "Python openpyxl - Read an Excel file and set null for blank cells", "body": "<pre><code>from openpyxl import load_workbook\nimport json\n\nwb = load_workbook(filename='Deployment Plan_2015.xlsx',read_only=True)\nws = wb['Deployment Plan']\nx = 4\ndata = []\n\nfor row in ws.rows:\n    for cell in row:\n            if not cell.value:\n                    print('null')\n                    x = x+1\n            else:\n                    print(ws['A'+str(x)].value)\n                    data.append(ws['A'+str(x)].value)\n                    x = x+1\n\nprint(json.JSONEncoder(data).encode(data))\n</code></pre>\n\n<p>It only reads the first the first cell(there are 4 more projects after Project 1) then prints everything as null:</p>\n\n<pre><code>Project 1\nnull\nnull\n</code></pre>\n\n<p>It continues for a few more nulls it ends with:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\Maynor\\Documents\\Python\\projects\\DPprojectlister.py\", line 15, in &lt;module&gt;\n    print(ws['A'+str(x)].value)\n  File \"C:\\Python34\\lib\\site-packages\\openpyxl-2.2.2-py3.4.egg\\openpyxl\\worksheet\\worksheet.py\", line 400, in __getitem__\n    return self._get_cell(key)\n  File \"C:\\Python34\\lib\\site-packages\\openpyxl-2.2.2-py3.4.egg\\openpyxl\\worksheet\\iter_worksheet.py\", line 168, in _get_cell\ncell = tuple(self.get_squared_range(col, row, col, row))[0]\nIndexError: tuple index out of range\n</code></pre>\n\n<p>It's suppose to print the data encoded in JSON after it reaches the end of the column</p>\n"}, {"tags": ["python", "pandas", "time-series"], "answers": [{"tags": [], "owner": {"reputation": 58812, "user_id": 2137255, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/zzmt4.png?s=128&g=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/2137255/zero"}, "is_accepted": false, "score": 1, "last_activity_date": 1430972955, "creation_date": 1430972955, "answer_id": 30091945, "question_id": 30089542, "link": "https://stackoverflow.com/questions/30089542/how-to-find-temporal-overlap-in-a-time-indexed-dataframe/30091945#30091945", "title": "How to find temporal overlap in a time-indexed DataFrame", "body": "<p>Here's on way to do.</p>\n\n<p>Pass two-column combinations to the <code>overlap</code> function. What this does is</p>\n\n<pre><code>def overlap(cols):\n    v = c[cols[0]].fillna(c[cols[1]]).notnull()\n    days = (v[v].index.max() - v[v].index.min()).days + 1\n    length = len(v[v])\n    return 'Overlap' if length == days else 'No'\n</code></pre>\n\n<p>It will fill <code>NaN</code> values from <code>cols[0]</code> with <code>cols[1]</code>, <code>c[cols[0]].fillna(c[cols[1]])</code> and then extract non-null values only using <code>notnul()</code></p>\n\n<p>After which, find the <code>max</code> and <code>min</code> dates to get the date range  i.e <code>days</code>. And, then find out if length of the overlap series matches with <code>days</code></p>\n\n<hr>\n\n<p>Now, iterate over the column combination with <code>overlap(cols)</code></p>\n\n<pre><code>In [14]: for cols in list(combinations(c.columns, 2)):\n   ....:     print cols, overlap(cols)                \n   ....:                                              \n('A', 'B') Overlap                                    \n('A', 'C') No                                         \n('A', 'D') No                                         \n('B', 'C') No                                         \n('B', 'D') No\n('C', 'D') Overlap \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9004, "user_id": 4077912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fc64252865700f1bf9ff46eb76b399d?s=128&d=identicon&r=PG&f=1", "display_name": "Primer", "link": "https://stackoverflow.com/users/4077912/primer"}, "is_accepted": true, "score": 1, "last_activity_date": 1430982535, "creation_date": 1430982535, "answer_id": 30094163, "question_id": 30089542, "link": "https://stackoverflow.com/questions/30089542/how-to-find-temporal-overlap-in-a-time-indexed-dataframe/30094163#30094163", "title": "How to find temporal overlap in a time-indexed DataFrame", "body": "<p>Not sure what is wrong with using <code>.first_valid_index()</code> - looks slick enough to me:</p>\n\n<pre><code>periods = pd.Series([pd.date_range(c[col].first_valid_index(), \n                                   c[col].last_valid_index(), freq='D') \n                     for col in c.columns.tolist()], index=c.columns)\noverlaps = periods.apply(lambda x: periods.apply(lambda y: x.isin(y).any()))\nprint overlaps\n</code></pre>\n\n<p>Gives an easy to use overlap matrix:</p>\n\n<pre><code>       A      B      C      D\nA   True   True  False  False\nB   True   True  False  False\nC  False  False   True   True\nD  False  False   True   True\n</code></pre>\n\n<p>Where it is trivial to check for overlap:</p>\n\n<pre><code>print overlaps.loc['A','B']\n# True\nprint overlaps.loc['A','C']\n# False\n</code></pre>\n\n<p>Or convert it to series:</p>\n\n<pre><code>overlaps = overlaps.stack()\nprint overlaps\n\nA  A     True\n   B     True\n   C    False\n   D    False\nB  A     True\n   B     True\n   C    False\n   D    False\nC  A    False\n   B    False\n   C     True\n   D     True\nD  A    False\n   B    False\n   C     True\n   D     True\ndtype: bool\n</code></pre>\n\n<p>And access it without <code>.loc</code>:</p>\n\n<pre><code>print overlaps['A','B']\n# True\nprint overlaps['A','C']\n# False\n</code></pre>\n"}], "owner": {"reputation": 1187, "user_id": 3730522, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/9ef5288346524a2a9ca82f73cb24ebf1?s=128&d=identicon&r=PG&f=1", "display_name": "Charlie_M", "link": "https://stackoverflow.com/users/3730522/charlie-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 30094163, "answer_count": 2, "score": 0, "last_activity_date": 1430982535, "creation_date": 1430955912, "question_id": 30089542, "link": "https://stackoverflow.com/questions/30089542/how-to-find-temporal-overlap-in-a-time-indexed-dataframe", "title": "How to find temporal overlap in a time-indexed DataFrame", "body": "<p>I have a DataFrame in which the index is a date_time and the data in the columns is interleaved over time. Perhaps the best explanation would be to show this DF: </p>\n\n<pre><code>&gt;&gt;&gt; c\n                     A           B          C          D\n2015-01-01  0.09607408         NaN        NaN        NaN\n2015-01-02         NaN  0.03582221        NaN        NaN\n2015-01-03   0.2750026         NaN        NaN        NaN\n2015-01-04         NaN    0.892619        NaN        NaN\n2015-01-05   0.8574456         NaN        NaN        NaN\n2015-01-06         NaN  0.08720886        NaN        NaN\n2015-01-07   0.7091732         NaN        NaN        NaN\n2015-01-08         NaN  0.09354087        NaN        NaN\n2015-01-09     0.60924         NaN        NaN        NaN\n2015-01-10         NaN   0.1966458        NaN        NaN\n2015-01-11         NaN         NaN  0.5135616        NaN\n2015-01-12         NaN         NaN        NaN  0.3015004\n2015-01-13         NaN         NaN  0.5717249        NaN\n2015-01-14         NaN         NaN        NaN  0.5416951\n2015-01-15         NaN         NaN  0.1031428        NaN\n2015-01-16         NaN         NaN        NaN  0.2944353\n2015-01-17         NaN         NaN   0.642031        NaN\n2015-01-18         NaN         NaN        NaN  0.2546383\n2015-01-19         NaN         NaN  0.6536632        NaN\n2015-01-20         NaN         NaN        NaN  0.9877289\n2015-01-21         NaN         NaN        NaN        NaN\n</code></pre>\n\n<p>Now, because columns A and B are interleaved through a period of time with substantial overlap, I will treat those as comparable for analysis purposes. </p>\n\n<p>Likewise, C and D data both occur over a time period of substantial overlap with each other, but zero overlap with the A/B time period. </p>\n\n<p>I'm trying to come up with a slick way to identify A/B and C/D as pairs that go together. I could envision doing it with c.A.first_valid_index(), etc.... and this is all very algebraic if I go that way. I'm wondering if there is a slick way to do it using some built in \"overlap\" function from the time series tools. I could not find any such thing - hope it exists though. TIA </p>\n\n<p>The code to make the contrived example DF above is: </p>\n\n<pre><code>t = pd.date_range('20150101',periods=21)\nti = t.to_datetime()\n\nc = pd.DataFrame(index = ti, columns=['A','B','C','D'])\n\nc.A[0:10:2] = np.random.rand(5)\nc.B[1:11:2] = np.random.rand(5)\nc.C[10:20:2] = np.random.rand(5)\nc.D[11:21:2] = np.random.rand(5)\n</code></pre>\n"}, {"tags": ["python", "django", "django-forms", "django-1.8"], "answers": [{"comments": [{"owner": {"reputation": 314, "user_id": 1321456, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/4bd54ccbccbb1bb894075339e4f3a42f?s=128&d=identicon&r=PG", "display_name": "shinriyo", "link": "https://stackoverflow.com/users/1321456/shinriyo"}, "edited": false, "score": 0, "creation_date": 1431131412, "post_id": 30093694, "comment_id": 48379310, "body": "I wanted to create selection list. So, I must check clean_FIELDNAME() but, I also create the list."}], "tags": [], "owner": {"reputation": 86, "user_id": 1428235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b8bf37c10b7b199c3cdaf74fb9e135b?s=128&d=identicon&r=PG", "display_name": "mikeser", "link": "https://stackoverflow.com/users/1428235/mikeser"}, "is_accepted": false, "score": 0, "last_activity_date": 1430980916, "last_edit_date": 1495542604, "creation_date": 1430980916, "answer_id": 30093694, "question_id": 30089460, "link": "https://stackoverflow.com/questions/30089460/how-to-max-and-min-value-of-birthday-in-forms-modelform-of-django/30093694#30093694", "title": "How to max and min value of birthday in forms.ModelForm of Django?", "body": "<p>To validate a form field, you could use a clean_FIELDNAME() method inside your form class. Check out the <a href=\"https://docs.djangoproject.com/en/1.8/ref/forms/validation/#cleaning-a-specific-field-attribute\" rel=\"nofollow noreferrer\">documentation</a> and <a href=\"https://stackoverflow.com/a/7948998/1428235\">this answer</a>. </p>\n"}], "owner": {"reputation": 314, "user_id": 1321456, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/4bd54ccbccbb1bb894075339e4f3a42f?s=128&d=identicon&r=PG", "display_name": "shinriyo", "link": "https://stackoverflow.com/users/1321456/shinriyo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1050, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430989837, "creation_date": 1430955322, "last_edit_date": 1430989837, "question_id": 30089460, "link": "https://stackoverflow.com/questions/30089460/how-to-max-and-min-value-of-birthday-in-forms-modelform-of-django", "title": "How to max and min value of birthday in forms.ModelForm of Django?", "body": "<p>I use Django 1.8 version.</p>\n\n<p>my model has birthday column.</p>\n\n<pre><code>class UserProfile(models.Model):\n    user = models.OneToOneField(User)\n    birthday = models.DateField (verbose_name=u'birthday')\n    # ...\n</code></pre>\n\n<p>it is form for model.</p>\n\n<pre><code>class UserProfileForm(forms.ModelForm):\n    slug_field = 'user_slug'\n\n    class Meta:\n        model = UserProfile\n        fields = (\n            'birthday',\n        )\n</code></pre>\n\n<p>I'd like to set who are 10-100 age person.</p>\n\n<p>I guess I should use <code>SelectDateWidget</code>.</p>\n\n<pre><code>import datetime\nfrom django.forms import extras\n\nclass UserProfileForm(forms.ModelForm):\n    slug_field = 'user_slug'\n    now = datetime.datetime.now()\n    DOY = tuple(n for n in range(now.year-100, now.year-9))\n    birthday = forms.DateField(widget=extras.SelectDateWidget(years = DOY))\n</code></pre>\n\n<p>Is it good way? or Could you tell me nice idea?</p>\n"}, {"tags": ["python", "arrays", "loops", "slice", "empty-list"], "comments": [{"owner": {"reputation": 4181, "user_id": 1128662, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/PnQer.jpg?s=128&g=1", "display_name": "BHendricks", "link": "https://stackoverflow.com/users/1128662/bhendricks"}, "edited": false, "score": 0, "creation_date": 1430955838, "post_id": 30089446, "comment_id": 48292019, "body": "You probably want to show more code, as vorticity_array_850mb doesn&#39;t seem to be initialized anywhere in the code you are showing"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1430955843, "post_id": 30089446, "comment_id": 48292020, "body": "First, that print outside the loop doesn&#39;t establish anything useful. Just because the slice from <code>[0:46, 0:32]</code> is non-empty doesn&#39;t mean the slice from <code>[138:184, 96:128]</code> is. What if the shape is, say, <code>(138, 96)</code>?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430955917, "post_id": 30089446, "comment_id": 48292041, "body": "Meanwhile, can you turn this into a <a href=\"http://stackoverflow.com/help/mcve\">minimal, complete, verifiable example</a> that other people can test without needing to get a copy of your 850MB file and all your code and read through probably hundreds of lines of debugging output? (If you can&#39;t, your odds of getting an answer are not that good.)"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430956031, "post_id": 30089446, "comment_id": 48292071, "body": "Meanwhile, why is this tagged [empty-list] and [loops]?"}, {"owner": {"reputation": 1, "user_id": 4872635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2757b76fabeb30e034848363cf94a7?s=128&d=identicon&r=PG&f=1", "display_name": "lulu_tech", "link": "https://stackoverflow.com/users/4872635/lulu-tech"}, "edited": false, "score": 0, "creation_date": 1430957889, "post_id": 30089446, "comment_id": 48292623, "body": "Thank you abarnert I think that maybe part of the problem"}], "owner": {"reputation": 1, "user_id": 4872635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c2757b76fabeb30e034848363cf94a7?s=128&d=identicon&r=PG&f=1", "display_name": "lulu_tech", "link": "https://stackoverflow.com/users/4872635/lulu-tech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430955612, "creation_date": 1430955242, "last_edit_date": 1430955612, "question_id": 30089446, "link": "https://stackoverflow.com/questions/30089446/issues-with-slicing-and-retrieving-maximum-of-slice-array-is-empty", "title": "Issues with slicing and retrieving maximum of slice. Array is empty?", "body": "<p>So I am trying to loop 16 times through the code below. The error message says</p>\n\n<blockquote>\n  <p>ValueError: zero-size array to reduction operation maximum which has\n  no identity</p>\n</blockquote>\n\n<p>I printed the vorticity_array_850mb before the loop with numbers instead of variables started and it worked:</p>\n\n<blockquote>\n  <p>print 'the vorticity array slice is',\n  vorticity_array_850mb[0:46,0:32]</p>\n</blockquote>\n\n<p>But when I took the max of the sliced value within the loop it did not work, because the vorticity_array_850mb is supposedly empty:</p>\n\n<pre><code>  print 'the vorticity array slice is', vorticity_array_850mb[0:46,0:32]\n  for row_start in range(0,128, 32):  \n     for column_start in range(0,184, 46):\n        print vorticity_array_850mb[column_start: column_start+46,row_start:row_start+32]\n        max_value = np.amax(vorticity_array_850mb[column_start:column_start+46, row_start:row_start+32])\n        vor_max_list.append(max_value)\n</code></pre>\n\n<p>Can you please give a reason why the array is empty? And how can possibly fix it?</p>\n"}, {"tags": ["python", "jinja2", "pelican"], "answers": [{"tags": [], "owner": {"reputation": 2074, "user_id": 2368033, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ITuWO.jpg?s=128&g=1", "display_name": "anthony-dandrea", "link": "https://stackoverflow.com/users/2368033/anthony-dandrea"}, "is_accepted": true, "score": 4, "last_activity_date": 1431022702, "creation_date": 1431022702, "answer_id": 30108785, "question_id": 30089429, "link": "https://stackoverflow.com/questions/30089429/pelican-plugin-how-to-add-context-variables/30108785#30108785", "title": "Pelican Plugin - How to add context variables?", "body": "<p>What I needed was</p>\n\n<pre><code>generator.context['foo'] = 'bar'\n</code></pre>\n"}], "owner": {"reputation": 2074, "user_id": 2368033, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ITuWO.jpg?s=128&g=1", "display_name": "anthony-dandrea", "link": "https://stackoverflow.com/users/2368033/anthony-dandrea"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 30108785, "answer_count": 1, "score": 5, "last_activity_date": 1431022702, "creation_date": 1430955127, "question_id": 30089429, "link": "https://stackoverflow.com/questions/30089429/pelican-plugin-how-to-add-context-variables", "title": "Pelican Plugin - How to add context variables?", "body": "<p>I am making a pelican plugin and I'm having trouble adding variables to the templates.</p>\n\n<p>For example in my plugin's code:</p>\n\n<pre><code>def baz(generator):\n    generator.foo = 'bar'\n\ndef register():\n    signals.generator_init.connect(baz)\n</code></pre>\n\n<p>And in my templates I have:</p>\n\n<pre><code>&lt;h1&gt;lorem - {{foo}}&lt;/h1&gt;\n</code></pre>\n\n<p>And I would expect <code>lorem - bar</code> to show in the <code>&lt;h1&gt;</code>.</p>\n\n<p>I have been looking at <a href=\"https://github.com/getpelican/pelican/blob/807b3bced38bff7b83a2efa2ce8cda9d644ebad3/pelican/generators.py\" rel=\"noreferrer\">https://github.com/getpelican/pelican/blob/807b3bced38bff7b83a2efa2ce8cda9d644ebad3/pelican/generators.py</a> trying to see how I can add this as an environment variable to no avail. Any help is much appreciated. </p>\n"}, {"tags": ["python", "linked-list"], "answers": [{"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": false, "score": 1, "last_activity_date": 1430954325, "creation_date": 1430954325, "answer_id": 30089291, "question_id": 30089282, "link": "https://stackoverflow.com/questions/30089282/how-to-use-a-linked-list-defined-in-another-class-in-python/30089291#30089291", "title": "how to use a linked list defined in another class in python", "body": "<p>You should add</p>\n\n<pre><code>self.head = head\n</code></pre>\n\n<p>in your <code>__init__</code> of <code>Solution</code> class.</p>\n\n<p>Inside <code>Print</code> function, you try to make <code>tmp = self.head</code>, but you never defined self.head.</p>\n\n<p>Or, you could make <code>tmp = head</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 3, "last_activity_date": 1430954601, "creation_date": 1430954601, "answer_id": 30089337, "question_id": 30089282, "link": "https://stackoverflow.com/questions/30089282/how-to-use-a-linked-list-defined-in-another-class-in-python/30089337#30089337", "title": "how to use a linked list defined in another class in python", "body": "<p>The problem is that your <code>Solution</code> class doesn't have <em>any</em> attributes, <code>head</code> or otherwise. And there's no obvious attributes it <em>should</em> have. (It's not really a class in any useful way; it's just a collection of functions written for no good reason as methods.)</p>\n\n<p>If you want to access the <code>head</code> that you were passed as a parameter, just do that. Change this line:</p>\n\n<pre><code>tmp = self.head\n</code></pre>\n\n<p>\u2026 to this:</p>\n\n<pre><code>tmp = head\n</code></pre>\n\n<p>And now your code will work.</p>\n"}], "owner": {"reputation": 91, "user_id": 4434728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7cc2d921f308ed64aeed5a6442fb89?s=128&d=identicon&r=PG&f=1", "display_name": "celtspirit", "link": "https://stackoverflow.com/users/4434728/celtspirit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 703, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1430954601, "creation_date": 1430954259, "question_id": 30089282, "link": "https://stackoverflow.com/questions/30089282/how-to-use-a-linked-list-defined-in-another-class-in-python", "title": "how to use a linked list defined in another class in python", "body": "<p>This is a  simple swap nodes in linked list code</p>\n\n<pre><code>__author__ = 'kingsley'\n\n# Definition for singly-linked list.\nclass ListNode:\n     def __init__(self, x):\n         self.val = x\n         self.next = None\n\n\nclass LinkedList:\n    def __init__(self, head):\n        self.head = None\n    def add( self, data ) :\n        node = ListNode( data )\n        if self.head == None :\n            self.head = node\n        else :\n            node.next = self.head\n            node.next.prev = node\n            self.head = node\ndef Print(self):\n    temp = self.head\n    while temp is not None:\n        print(temp.val, end=' ')\n        temp = temp.next\n\n\nclass Solution:\n    # @param {ListNode} head\n    # @return {ListNode}\n    def swapPairs(self, head):\n        if head == None or head.next == None:\n            return head\n        dummy = ListNode(0)\n        dummy.next = head\n        p = dummy\n        while p.next and p.next.next:\n            tmp = p.next.next\n            p.next.next = tmp.next\n            tmp.next = p.next\n            p.next = tmp\n            p = p.next.next\n    def Print(self, head):\n        tmp = self.head\n        while tmp is not None:\n            print(tmp.val)\n            tmp = tmp.next\n\n\nif __name__ == '__main__':\n    list = LinkedList(None)\n    for i in range(1,11):\n        list.add(i)\n    list.Print();\n    swap = Solution()\n    swap.swapPairs(list.head);\n    swap.Print(list.head);\n</code></pre>\n\n<p>The error is like this\nAttributeError: 'Solution' object has no attribute 'head'\nwhat is the problem here\nhow can I use a linked list defined in another class</p>\n"}, {"tags": ["python", "input", "types", "exception-handling", "filenames"], "comments": [{"owner": {"reputation": 46776, "user_id": 1014938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FqCGF.png?s=128&g=1", "display_name": "Zero Piraeus", "link": "https://stackoverflow.com/users/1014938/zero-piraeus"}, "edited": false, "score": 0, "creation_date": 1430954183, "post_id": 30089239, "comment_id": 48291533, "body": "<a href=\"https://docs.python.org/3/library/os.path.html#os.path.splitext\" rel=\"nofollow noreferrer\">docs.python.org/3/library/os.path.html#os.path.splitext</a>"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430954919, "post_id": 30089239, "comment_id": 48291745, "body": "I don&#39;t think you want a <code>try</code> here. If you want to raise an exception, you don&#39;t to immediately catch the same exception, or what&#39;s the point? (But if you <i>do</i> want a <code>try</code>, then you need at least one <code>except</code> or a <code>finally</code>. If you can&#39;t think of what you&#39;d want to put there\u2026 then you shouldn&#39;t have a <code>try</code>.)"}], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 4843081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4308384f7618e4a7f01c3e098eb5655b?s=128&d=identicon&r=PG&f=1", "display_name": "JesseTrevve", "link": "https://stackoverflow.com/users/4843081/jessetrevve"}, "edited": false, "score": 0, "creation_date": 1430955126, "post_id": 30089273, "comment_id": 48291798, "body": "Whoah! I never knew python has a &quot;endswith()&quot; string method! For others checking out this post, see <a href=\"https://docs.python.org/2/library/stdtypes.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/stdtypes.html</a> Thanks!"}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 283, "user_id": 4843081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4308384f7618e4a7f01c3e098eb5655b?s=128&d=identicon&r=PG&f=1", "display_name": "JesseTrevve", "link": "https://stackoverflow.com/users/4843081/jessetrevve"}, "edited": false, "score": 0, "creation_date": 1430955189, "post_id": 30089273, "comment_id": 48291817, "body": "@JesseTrevve, no worries, you&#39;re welcome. You can pass a single string or a tuple of strings to check against."}, {"owner": {"reputation": 283, "user_id": 4843081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4308384f7618e4a7f01c3e098eb5655b?s=128&d=identicon&r=PG&f=1", "display_name": "JesseTrevve", "link": "https://stackoverflow.com/users/4843081/jessetrevve"}, "edited": false, "score": 0, "creation_date": 1430958854, "post_id": 30089273, "comment_id": 48292853, "body": "Another quick question: How can I use the file I&#39;ve entered into my code? Previously, I was using <code>filename</code>, but now it throws an error. Surely <code>filename = raw_input()</code> should define that value throughout the code, even if it is in a function."}, {"owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "reply_to_user": {"reputation": 283, "user_id": 4843081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4308384f7618e4a7f01c3e098eb5655b?s=128&d=identicon&r=PG&f=1", "display_name": "JesseTrevve", "link": "https://stackoverflow.com/users/4843081/jessetrevve"}, "edited": false, "score": 0, "creation_date": 1430986184, "post_id": 30089273, "comment_id": 48302777, "body": "You need to use the filename returned fron the function"}], "tags": [], "owner": {"reputation": 159774, "user_id": 2141635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/f6yNV.jpg?s=128&g=1", "display_name": "Padraic Cunningham", "link": "https://stackoverflow.com/users/2141635/padraic-cunningham"}, "is_accepted": true, "score": 2, "last_activity_date": 1430955250, "last_edit_date": 1430955250, "creation_date": 1430954216, "answer_id": 30089273, "question_id": 30089239, "link": "https://stackoverflow.com/questions/30089239/exception-handling-only-accept-specific-file-inputs/30089273#30089273", "title": "Exception handling, only accept specific file inputs", "body": "<p>If you want to keep asking until the user enters a filename with the correct extension using <a href=\"https://docs.python.org/2/library/stdtypes.html#str.endswith\" rel=\"nofollow\">str.endswith</a>:</p>\n\n<pre><code>def fileName():\n   while True:\n       filename = raw_input(\"Please enter .txt or .csv file: \")\n       if filename.endswith((\".csv\",\".txt\"))\n          return filename\n       else:\n            print(\"Extension must be .csv or .txt\")\n</code></pre>\n\n<p>If you actually want to just verify the input and raise an error on bad input:</p>\n\n<pre><code>   def fileName():\n       filename = raw_input(\"Please enter .txt or .csv file: \")\n       if filename.endswith((\".csv\",\".txt\")):\n           return filename\n       raise ValueError(\"Extension must be .csv or .txt\")\n</code></pre>\n\n<p>You don't need a try/except to check the last four  characters are either <code>.txt</code> or <code>.csv</code> but just because the filename may end with the correct extension does not mean it is a valid file or won't cause an error when opening, you should worry about catching exceptions when and if you actually open the file.</p>\n"}, {"tags": [], "owner": {"reputation": 2114, "user_id": 165164, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/GCuan.jpg?s=128&g=1", "display_name": "Anne Gunn", "link": "https://stackoverflow.com/users/165164/anne-gunn"}, "is_accepted": false, "score": 2, "last_activity_date": 1430954442, "creation_date": 1430954442, "answer_id": 30089303, "question_id": 30089239, "link": "https://stackoverflow.com/questions/30089239/exception-handling-only-accept-specific-file-inputs/30089303#30089303", "title": "Exception handling, only accept specific file inputs", "body": "<p>Python has great resources for doing all sorts of path manipulations. This is a good time to go ahead and get familiar with them. </p>\n\n<p>See the documentation for <a href=\"https://docs.python.org/2/library/os.path.html\" rel=\"nofollow\">os.path</a> and specifically, for <code>os.path.splitext(path)</code> \nwhich returns a pair (root, ext) so you can test the ext (extension) value.</p>\n"}], "owner": {"reputation": 283, "user_id": 4843081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4308384f7618e4a7f01c3e098eb5655b?s=128&d=identicon&r=PG&f=1", "display_name": "JesseTrevve", "link": "https://stackoverflow.com/users/4843081/jessetrevve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 584, "favorite_count": 1, "accepted_answer_id": 30089273, "answer_count": 2, "score": 1, "last_activity_date": 1430955250, "creation_date": 1430954014, "question_id": 30089239, "link": "https://stackoverflow.com/questions/30089239/exception-handling-only-accept-specific-file-inputs", "title": "Exception handling, only accept specific file inputs", "body": "<p>This is a bit above my pay grade, so I thought I would ask on here. </p>\n\n<p>My simple Python code prompts the user to enter the name of a file. However, it must be a specific type of file, or else I would like to throw an error. In this case, the files entered must be a text or CSV file, i.e. filename extensions must be <code>.txt</code> or <code>.csv</code></p>\n\n<pre><code>filename = raw_input(\"Please enter .txt or .csv file: \")\n</code></pre>\n\n<p>I have no idea how to test for that. You begin with something like</p>\n\n<pre><code>def fileName():\n   while True:\n       try: \n           filename = raw_input(\"Please enter .txt or .csv file: \")\n</code></pre>\n\n<p>and then use an if statement check whether the last four characters are <code>.txt</code> or <code>.csv</code>. </p>\n\n<p>What is the standard way to do this?</p>\n"}, {"tags": ["python", "arrays", "numpy", "vectorization"], "answers": [{"comments": [{"owner": {"reputation": 9063, "user_id": 2118, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/558f6300806bd61b6fc860289ebe37c7?s=128&d=identicon&r=PG", "display_name": "AnnanFay", "link": "https://stackoverflow.com/users/2118/annanfay"}, "edited": false, "score": 0, "creation_date": 1511175674, "post_id": 30089254, "comment_id": 81733806, "body": "It seems this method would also work with subtraction, so why does <code>diff</code> exist?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 9063, "user_id": 2118, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/558f6300806bd61b6fc860289ebe37c7?s=128&d=identicon&r=PG", "display_name": "AnnanFay", "link": "https://stackoverflow.com/users/2118/annanfay"}, "edited": false, "score": 0, "creation_date": 1511175770, "post_id": 30089254, "comment_id": 81733861, "body": "@Annan Probably because most users prefer a builtin in most scenarios. But a slicing based one would be more performant."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 4, "last_activity_date": 1430954469, "last_edit_date": 1430954469, "creation_date": 1430954086, "answer_id": 30089254, "question_id": 30089213, "link": "https://stackoverflow.com/questions/30089213/how-to-take-n-th-order-discrete-sum-of-numpy-array-sum-equivalent-of-numpy-diff/30089254#30089254", "title": "How to take n-th order discrete sum of numpy array (sum equivalent of numpy.diff)", "body": "<p><code>A[i+1]</code> for <code>for i in range(N-1)</code> would be covered by <code>A[1:]</code> and similarly <code>A[i]</code> for the same iteration means <code>A[:-1]</code>. So, basically you can sum these two versions of the input array to have a vectorized output in <code>B</code>, like so -</p>\n\n<pre><code>B = A[:-1] + A[1:]\n</code></pre>\n"}], "owner": {"reputation": 12365, "user_id": 2593236, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4858dc5268d1e9c5a376a2762a5bc495?s=128&d=identicon&r=PG", "display_name": "pbreach", "link": "https://stackoverflow.com/users/2593236/pbreach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1228, "favorite_count": 0, "accepted_answer_id": 30089254, "answer_count": 1, "score": 4, "last_activity_date": 1433048924, "creation_date": 1430953844, "last_edit_date": 1433048924, "question_id": 30089213, "link": "https://stackoverflow.com/questions/30089213/how-to-take-n-th-order-discrete-sum-of-numpy-array-sum-equivalent-of-numpy-diff", "title": "How to take n-th order discrete sum of numpy array (sum equivalent of numpy.diff)", "body": "<p>I know that it is possible to take the n-th order discrete difference of a numpy array by using the numpy function <code>numpy.diff()</code>, but is there a way to do the same with the n-th order discrete sum?</p>\n\n<p>Let's say we have a numpy array, <code>A = np.arange(10)</code>. The expected result for the 1st order discrete sum would be:</p>\n\n<pre><code>array([  1.,   3.,   5.,   7.,   9.,  11.,  13.,  15.,  17.]) \n</code></pre>\n\n<p>which I can get from doing:</p>\n\n<pre><code>N = A.shape[0]\nB = np.zeros(N-1)\n\nfor i in range(N-1):\n    B[i] = A[i+1] + A[i]\n</code></pre>\n\n<p>But is there a function available to avoid having to use a for loop? </p>\n"}, {"tags": ["python", "file"], "answers": [{"comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430953882, "post_id": 30089096, "comment_id": 48291429, "body": "I&#39;m 90% sure SOH stands for &quot;Start of Heading&quot;, not &quot;Start of Header&quot;, but\u2026 Wikipedia clearly says &quot;Header&quot;, and I&#39;m too lazy to look further, so OK. :)"}, {"owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "edited": false, "score": 0, "creation_date": 1430972192, "post_id": 30089096, "comment_id": 48296217, "body": "Yes, dana, I mean Start of Header. Your code works for me, thank you very much!"}], "tags": [], "owner": {"reputation": 14884, "user_id": 315689, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/GkAk0.png?s=128&g=1", "display_name": "dana", "link": "https://stackoverflow.com/users/315689/dana"}, "is_accepted": true, "score": 4, "last_activity_date": 1430953108, "creation_date": 1430953108, "answer_id": 30089096, "question_id": 30089003, "link": "https://stackoverflow.com/questions/30089003/how-to-write-unreadable-a-into-output-file-in-python/30089096#30089096", "title": "how to write unreadable ^A into output file in Python?", "body": "<p>If you know the character code, you can output it using the <code>chr()</code> function.  For example:</p>\n\n<pre><code>&gt;&gt;&gt; chr(97)\n'a'\n</code></pre>\n\n<p>Do you mean the <a href=\"http://en.wikipedia.org/wiki/ASCII\" rel=\"nofollow noreferrer\">Start of Header</a> character?  </p>\n\n<p><img src=\"https://i.stack.imgur.com/sspjH.png\" alt=\"enter image description here\">  </p>\n\n<p>If so, then use this:</p>\n\n<pre><code>chr(1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14884, "user_id": 315689, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/GkAk0.png?s=128&g=1", "display_name": "dana", "link": "https://stackoverflow.com/users/315689/dana"}, "edited": false, "score": 0, "creation_date": 1430953460, "post_id": 30089116, "comment_id": 48291306, "body": "Interesting... Ya, that works too: <code>print &quot;\\1&quot; == chr(1)</code> returns <code>True</code>."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 2, "creation_date": 1430953722, "post_id": 30089116, "comment_id": 48291373, "body": "I find that <code>u&#39;\\u0001&#39;.encode(&#39;cp861&#39;)</code> gives your code a nice Icelandic feel."}], "tags": [], "owner": {"reputation": 809, "user_id": 4753681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49d62d0f7debf9c7ab3a24f697d4a254?s=128&d=identicon&r=PG&f=1", "display_name": "Martin E. Zulliger", "link": "https://stackoverflow.com/users/4753681/martin-e-zulliger"}, "is_accepted": false, "score": 3, "last_activity_date": 1430953229, "creation_date": 1430953229, "answer_id": 30089116, "question_id": 30089003, "link": "https://stackoverflow.com/questions/30089003/how-to-write-unreadable-a-into-output-file-in-python/30089116#30089116", "title": "how to write unreadable ^A into output file in Python?", "body": "<p>Another way to do it is '\\1'. Cheers!</p>\n"}], "owner": {"reputation": 8211, "user_id": 1850923, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/f4c516ea2a612cdca29a5b48e9805cd9?s=128&d=identicon&r=PG", "display_name": "Lin Ma", "link": "https://stackoverflow.com/users/1850923/lin-ma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 1, "accepted_answer_id": 30089096, "answer_count": 2, "score": 2, "last_activity_date": 1430953229, "creation_date": 1430952480, "question_id": 30089003, "link": "https://stackoverflow.com/questions/30089003/how-to-write-unreadable-a-into-output-file-in-python", "title": "how to write unreadable ^A into output file in Python?", "body": "<p>Wondering how to write unreadable ^A into a file using Python. For unreadable ^A, I mean when we use command \"set list\" in vi, we can see unreadable character like ^I for '\\t', $ for '\\n'.</p>\n\n<p>thanks in advance,\nLin</p>\n"}, {"tags": ["python", "c++", "ipc", "fifo"], "comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 1, "creation_date": 1430952237, "post_id": 30088928, "comment_id": 48290902, "body": "Tangent: why not just pass <code>pipename.c_str()</code> to <code>unlink</code> and <code>mkfifo</code>? The code as you&#39;ve written it needlessly allocates memory (and then forgets to deallocate it)."}, {"owner": {"reputation": 165665, "user_id": 721269, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/346ca03edfbde2a468adc289867ab975?s=128&d=identicon&r=PG", "display_name": "David Schwartz", "link": "https://stackoverflow.com/users/721269/david-schwartz"}, "edited": false, "score": 1, "creation_date": 1430953444, "post_id": 30088928, "comment_id": 48291297, "body": "<code>if(!read(fd, buf, MAX_BUF))</code> -- You throw away the result of <code>read</code>, so you have no idea how much data you read. There&#39;s no possible way the code could work."}], "answers": [{"comments": [{"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1430952887, "post_id": 30089058, "comment_id": 48291127, "body": "This should work even if there are embedded nulls. A <code>std::string</code> can contain arbitrary data."}, {"owner": {"reputation": 27450, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1430953171, "post_id": 30089058, "comment_id": 48291218, "body": "@Brian, True.  But the constructor he&#39;s using assumes a C-style string is the input data. (I&#39;m admittedly assuming <code>buf</code> is defined as <code>char *</code> or <code>char []</code>.)"}, {"owner": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1430953340, "post_id": 30089058, "comment_id": 48291266, "body": "I mean, your code uses the correct constructor, so it doesn&#39;t suffer from the same problem. Or am I misunderstanding something?"}, {"owner": {"reputation": 27450, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "reply_to_user": {"reputation": 91345, "user_id": 481267, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/DMvoo.png?s=128&g=1", "display_name": "Brian Bi", "link": "https://stackoverflow.com/users/481267/brian-bi"}, "edited": false, "score": 0, "creation_date": 1430953634, "post_id": 30089058, "comment_id": 48291352, "body": "I used the constructor that specifies the length of the input string.  I don&#39;t recall offhand what happens if a <code>&#39;\\0&#39;</code> is embedded in such a string with that constructor.  That&#39;s why I said it &quot;may still fail&quot;.  But it does prevent overruns, which the original code did not.  Per <a href=\"http://www.cplusplus.com/reference/string/string/string/\" rel=\"nofollow noreferrer\">cplusplus.com/reference/string/string/string</a>, the <code>string( const char *, size_t )</code> constructor copies the specified number of bytes.  So it should work.  But I don&#39;t remember ever using that constructor."}, {"owner": {"reputation": 1152, "user_id": 4541974, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152538725216326/picture?type=large", "display_name": "Luis Cruz", "link": "https://stackoverflow.com/users/4541974/luis-cruz"}, "edited": false, "score": 0, "creation_date": 1430960546, "post_id": 30089058, "comment_id": 48293259, "body": "So just to be clear... my python code should not send the &#39;\\0&#39; character?"}], "tags": [], "owner": {"reputation": 27450, "user_id": 4756299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38adc5559df095cfe10c664916e8ffa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew Henle", "link": "https://stackoverflow.com/users/4756299/andrew-henle"}, "is_accepted": false, "score": 1, "last_activity_date": 1430953405, "last_edit_date": 1430953405, "creation_date": 1430952807, "answer_id": 30089058, "question_id": 30088928, "link": "https://stackoverflow.com/questions/30088928/loss-of-data-in-a-fifo-pipe/30089058#30089058", "title": "Loss of data in a FIFO pipe?", "body": "<p><code>buf</code> is not guaranteed to be terminated, nor is it guaranteed to not have <code>'\\0'</code> characters embedded in it from the code you posted.  This should work better, but may still fail if the Python code embeds a <code>'\\0'</code> in the data it writes:</p>\n\n<pre><code>while( running_threads )\n{\n    ssize_t bytesRead = read(fd, buf, MAX_BUF);\n    if ( bytesRead &lt; 0 )\n         break;\n    else if ( bytesRead == 0 )\n         continue;\n\n    string line( buf, static_cast&lt;size_t&gt;(bytesRead) );\n</code></pre>\n\n<p>And your code doesn't properly handle an error condition should <code>read()</code> return -1.</p>\n"}], "owner": {"reputation": 1152, "user_id": 4541974, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152538725216326/picture?type=large", "display_name": "Luis Cruz", "link": "https://stackoverflow.com/users/4541974/luis-cruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 401, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430953405, "creation_date": 1430951996, "last_edit_date": 1430952131, "question_id": 30088928, "link": "https://stackoverflow.com/questions/30088928/loss-of-data-in-a-fifo-pipe", "title": "Loss of data in a FIFO pipe?", "body": "<p>I have a python process writing to a named pipe, and a C++ program reads it. (I create the pipes in C++). Well, it seems to work fine. However, sometimes I notice that there's loss of data. The data is not detected by the reader! Am I doing something wrong?</p>\n\n<p>Here's how I am creating the pipes:</p>\n\n<pre><code>void create_pipes(string pipename){\n\n    char * cstr1 = new char [pipename.length()+1];\n    strcpy (cstr1, pipename.c_str());\n\n    cout &lt;&lt; \"Creating \" &lt;&lt; pipename &lt;&lt; \" pipe...\" &lt;&lt; endl;\n    unlink (cstr1); // Delete pipe\n    int result = mkfifo (cstr1, S_IRUSR| S_IWUSR);  // Create Pipe\n    if( result == -1 ){\n         cout &lt;&lt; \"There was en error creating the pipe! \" &lt;&lt; result &lt;&lt; endl;\n         //return 0;\n    }\n    else\n        cout &lt;&lt; \"Pipe created!\" &lt;&lt; endl;\n}\n</code></pre>\n\n<p>Now, I have a thread that reads the pipe like this:</p>\n\n<pre><code>     int fd = open(cstr1, O_RDONLY);  // Open the pipe\n\n\n    while( running_threads ){\n\n        if(!read(fd, buf, MAX_BUF))\n            continue;\n        string line(buf);\n        if( buf != \"\" ){\n            //cout &lt;&lt; line;\n            pipe_r.DECODE_PIPE_DATA(line);\n        }\n    }\n\n    cout &lt;&lt; \"Thread terminated\" &lt;&lt; endl;\n\n    close(fd);\n</code></pre>\n\n<p>In python I'm simply writing the data to the pipe by doing this:</p>\n\n<pre><code>def write_pipe(file_string):\n    while True:\n        try:\n            pipe.write(file_string)\n            pipe.flush()\n            break\n        except:\n            print \"Error while writing to pipe\"\n            continue\n</code></pre>\n\n<p>What could be causing my problem? The python program writes the data into the pipe successfully; But the c++ program sometimes will not read the pipe. Can this be caused by the python process writing data faster than the c++ program before it could actually read it? What should I do?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 36, "user_id": 4610702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bC7t1H25YYw/AAAAAAAAAAI/AAAAAAAAABQ/lTGbTh3Vj5Q/photo.jpg?sz=128", "display_name": "Sergey Sozonov", "link": "https://stackoverflow.com/users/4610702/sergey-sozonov"}, "edited": false, "score": 0, "creation_date": 1430954665, "post_id": 30089286, "comment_id": 48291678, "body": "it closes the connection but changed the output, it doens&#39;t work as a chat anymore. The host has to send msg before receiving the msg from the client and its all mixed up"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 36, "user_id": 4610702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bC7t1H25YYw/AAAAAAAAAAI/AAAAAAAAABQ/lTGbTh3Vj5Q/photo.jpg?sz=128", "display_name": "Sergey Sozonov", "link": "https://stackoverflow.com/users/4610702/sergey-sozonov"}, "edited": false, "score": 0, "creation_date": 1430954841, "post_id": 30089286, "comment_id": 48291724, "body": "@SergeySozonov: As I said, there are other very big problems in your design and code. It was <i>already</i> true that the host has to send a message before receiving from the client, and it&#39;s still true. It was also already true that you can only exchange messages one-by-one; you can&#39;t send two messages without waiting for a reply in between. And that your <code>request</code> can end up with multiple messages concatenated together, or half a message (which will also break the <code>quit</code> handling). And so on. My fixes for these 4 problems don&#39;t fix all those other problems."}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 4, "last_activity_date": 1430954292, "creation_date": 1430954292, "answer_id": 30089286, "question_id": 30088915, "link": "https://stackoverflow.com/questions/30088915/quit-python-app-with-raw-input/30089286#30089286", "title": "Quit PYTHON app with raw_input()", "body": "<p>You have multiple problems here.</p>\n\n<ul>\n<li>The remote user can't quit by typing <code>'quit'</code> because you're checking for <code>'exit'</code> instead of <code>'quit'</code>.</li>\n<li>You're not checking <code>request</code>, which is his actual request; you're checking <code>exit</code>, which is a function object, which is never going to be equal to any string.</li>\n<li>You call <code>client_socket.close()</code>, but you don't <code>break</code> out of the loop, so it'll just go right back around to the top of the loop.</li>\n<li>Although you claim that checking <code>raw_input</code> is \"exactly what I've done\", you're not doing it. The is the only place you call <code>raw_input</code> is in <code>client_socket.send(raw_input('\\n'))</code>, and you're clearly not checking anything there.</li>\n</ul>\n\n<p>So, to fix all of those problems:</p>\n\n<pre><code>while True:\n    msg = raw_input('\\n')\n    if msg == \"quit\":\n        break\n    client_socket.send(msg)\n    request = client_socket.recv(1024)\n    print \"[*] Received: %s\" % request    \n    if request == \"quit\":\n        break\nclient_socket.close()\n</code></pre>\n\n<p>There are other very big problems in your design and code, but fixing these 4 will at least get you to the next one.</p>\n"}], "owner": {"reputation": 36, "user_id": 4610702, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bC7t1H25YYw/AAAAAAAAAAI/AAAAAAAAABQ/lTGbTh3Vj5Q/photo.jpg?sz=128", "display_name": "Sergey Sozonov", "link": "https://stackoverflow.com/users/4610702/sergey-sozonov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1430954292, "creation_date": 1430951912, "last_edit_date": 1430952635, "question_id": 30088915, "link": "https://stackoverflow.com/questions/30088915/quit-python-app-with-raw-input", "title": "Quit PYTHON app with raw_input()", "body": "<p>I've made a console app that allows me to talk with someone else on a personal chat. I want to allow both user to end the connection when they type quit. </p>\n\n<p>Mind that even when the user close the terminal the port is still listening.</p>\n\n<pre><code>import socket\nimport threading\n\nbind_ip = \"0.0.0.0\"\nbind_port = 8887\n\nserver = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n\nserver.bind((bind_ip,bind_port))\n\nserver.listen(5)\n\nprint \"[*] Listening on %s:%d\" % (bind_ip, bind_port)\n\ndef handle_client(client_socket):\n\n    while True:\n\n        client_socket.send(raw_input('\\n'))\n        request = client_socket.recv(1024)\n        print \"[*] Received: %s\" % request\n\n        if exit == \"exit\":\n            client_socket.close()\n\nwhile True:\n\n    client, addr = server.accept()\n\n    print \"[*] Accepted connection from %s:%d\" % (addr[0], addr[1])\n\n    client_handler = threading.Thread(target=handle_client,args=(client,))\n    client_handler.start()\n</code></pre>\n"}, {"tags": ["python", "python-2.7"], "answers": [{"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1430952004, "post_id": 30088899, "comment_id": 48290813, "body": "He&#39;s doing <code>for vowel in vowels</code>, though, which should be providing strings to <code>find()</code>."}, {"owner": {"reputation": 108, "user_id": 4867781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6QC8.jpg?s=128&g=1", "display_name": "The_Guy", "link": "https://stackoverflow.com/users/4867781/the-guy"}, "edited": false, "score": 0, "creation_date": 1430952058, "post_id": 30088899, "comment_id": 48290836, "body": "I thought since I was iterating through a list it would treat <code>word.find(vowel)</code> as <code>word.find(&#39;a&#39;)</code>, then as <code>word.find(&#39;e&#39;)</code>, etc.. Why is that not the case?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1430952064, "post_id": 30088899, "comment_id": 48290837, "body": "@TigerhawkT3: Oh, right, he&#39;s just expecting the actual value to be somehow <code>&lt; -1</code>\u2026"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1430952891, "post_id": 30088899, "comment_id": 48291129, "body": "@TigerhawkT3: Fixed and undeleted, since br1ckb0t broke his answer\u2026"}, {"owner": {"reputation": 108, "user_id": 4867781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6QC8.jpg?s=128&g=1", "display_name": "The_Guy", "link": "https://stackoverflow.com/users/4867781/the-guy"}, "edited": false, "score": 1, "creation_date": 1430953157, "post_id": 30088899, "comment_id": 48291214, "body": "Your solution worked, thank you. So as soon as it didn&#39;t find one of the vowels it was set to -1 and lower than any possible position in the word."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "reply_to_user": {"reputation": 108, "user_id": 4867781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6QC8.jpg?s=128&g=1", "display_name": "The_Guy", "link": "https://stackoverflow.com/users/4867781/the-guy"}, "edited": false, "score": 0, "creation_date": 1430953325, "post_id": 30088899, "comment_id": 48291260, "body": "@The_Guy: Exactly. (And sorry for my initial confusion and incorrect answer.)"}], "tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": true, "score": 3, "last_activity_date": 1430952781, "last_edit_date": 1495540262, "creation_date": 1430951839, "answer_id": 30088899, "question_id": 30088862, "link": "https://stackoverflow.com/questions/30088862/str-find-outputs-1-when-given-a-list/30088899#30088899", "title": "str.find() outputs &#39;-1&#39; when given a list", "body": "<p>As <a href=\"https://stackoverflow.com/a/30088938/908494]\">br1ckb0t's answer</a> explains, the problem is that -1 is <em>smaller</em> than all indices. So, by correctly returning the lowest index found, you're returning -1 unless <em>all</em> of them are found, instead of only if <em>none</em> of them are found.</p>\n\n<p>You can fix this easily. Just change this line:</p>\n\n<pre><code>if aLow &lt; low:\n</code></pre>\n\n<p>\u2026 to:</p>\n\n<pre><code>if aLow != -1 and aLow &lt; low:\n</code></pre>\n\n<hr>\n\n<p>There are other ways you could fix this. </p>\n\n<hr>\n\n<p>For example, you could wrap the <code>find</code> in a function that pushes <code>-1</code> to the end:</p>\n\n<pre><code>def darn_minus_one(n):\n    return sys.max_int if n==-1 else n\n\n# ...\n\naLow = darn_minus_one(word.find(vowel))\n</code></pre>\n\n<p>That seems kind of silly, until you realize that it allows you to replace your entire function with:</p>\n\n<pre><code>def darn_minus_one(n):\n    return len(word) if n==-1 else n\nreturn min((word.find(c) for c in chars), key=darn_minus_one)\n</code></pre>\n\n<hr>\n\n<p>Or you could not use <code>find</code> at all, and instead look up each letter in the set of vowels:</p>\n\n<pre><code>vowels = set(vowels)\nfor i, c in enumerate(word):\n    if c in vowels:\n        return i\nreturn -1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430952107, "post_id": 30088938, "comment_id": 48290853, "body": "It&#39;ll always be -1 unless <i>all</i> of the vowels are found, in which case it actually <i>will</i> find the first one\u2026"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430952478, "post_id": 30088938, "comment_id": 48290985, "body": "Your suggested version will find the <i>last</i> vowel, not the <i>first</i>. All you need to do to fix his code is change <code>aLow &lt; low</code> to <code>aLow &lt; low and low != -1</code> or similar."}, {"owner": {"reputation": 108, "user_id": 4867781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6QC8.jpg?s=128&g=1", "display_name": "The_Guy", "link": "https://stackoverflow.com/users/4867781/the-guy"}, "edited": false, "score": 0, "creation_date": 1430952534, "post_id": 30088938, "comment_id": 48291011, "body": "So when it cant find the given letter it outputs -1 and it was not find &#39;u&#39;, the last letter in the list, in all of the test words (because I didn&#39;t use &#39;u&#39; i guess)?"}], "tags": [], "owner": {"reputation": 1674, "user_id": 1628796, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c05c34fed1e570e052e94f565f400362?s=128&d=identicon&r=PG", "display_name": "rickcnagy", "link": "https://stackoverflow.com/users/1628796/rickcnagy"}, "is_accepted": false, "score": 1, "last_activity_date": 1430953035, "last_edit_date": 1430953035, "creation_date": 1430952035, "answer_id": 30088938, "question_id": 30088862, "link": "https://stackoverflow.com/questions/30088862/str-find-outputs-1-when-given-a-list/30088938#30088938", "title": "str.find() outputs &#39;-1&#39; when given a list", "body": "<p>Ok, so the issue is stemming from:</p>\n\n<pre><code>if aLow &lt; low:\n    low = aLow\n</code></pre>\n\n<p>So this means that when <code>aLow</code> is <code>-1</code>, <code>low</code> gets set to <code>-1</code>, and then stays there because no indices are less than <code>-1</code>.</p>\n\n<p>So no matter what <code>aLow</code> is, the output will always be the lowest index, <code>-1</code>, unless all the vowels are found, at which point it'll be 0.</p>\n\n<p>Instead, I would avoid the structure you have of starting <code>low</code> and <code>len(word)</code> and then finding indices less than it. Instead, maybe try something like this:</p>\n\n<pre><code>vowels = ['a','e','i','o','u']\n\nwhile True:\n    letters = []\n    pGWord = \"\"\n\n    word = raw_input(\"Type word to 'Pig Latin' it: \")\n    low = -1\n\n    for vowel in vowels:\n        aLow = word.find(vowel)\n        if aLow != -1 and aLow &lt; low:\n            low = aLow\n\n    if low == -1:\n        low = len(word)\n\n    print low\n</code></pre>\n\n<p>Which gives:</p>\n\n<pre><code>Type word to 'Pig Latin' it: Stack\n&gt;&gt;&gt; 2\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430952395, "post_id": 30088974, "comment_id": 48290960, "body": "No, that doesn&#39;t actually fix his problem, and it adds a new one."}], "tags": [], "owner": {"reputation": 901, "user_id": 3749292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5UptT.jpg?s=128&g=1", "display_name": "Jerry Ajay", "link": "https://stackoverflow.com/users/3749292/jerry-ajay"}, "is_accepted": false, "score": -1, "last_activity_date": 1430953003, "last_edit_date": 1430953003, "creation_date": 1430952220, "answer_id": 30088974, "question_id": 30088862, "link": "https://stackoverflow.com/questions/30088862/str-find-outputs-1-when-given-a-list/30088974#30088974", "title": "str.find() outputs &#39;-1&#39; when given a list", "body": "<p>The most simplest answer is to add a <code>continue</code>:</p>\n\n<pre><code>if aLow &lt; 0:\n      continue\n\nif aLow &lt; low:\n      low = aLow\n</code></pre>\n\n<p>Reason:</p>\n\n<p>The search needs to <code>continue</code> if no match is found without altering the <code>low</code> variable. </p>\n"}], "owner": {"reputation": 108, "user_id": 4867781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6QC8.jpg?s=128&g=1", "display_name": "The_Guy", "link": "https://stackoverflow.com/users/4867781/the-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 30088899, "answer_count": 3, "score": 0, "last_activity_date": 1430953035, "creation_date": 1430951639, "question_id": 30088862, "link": "https://stackoverflow.com/questions/30088862/str-find-outputs-1-when-given-a-list", "title": "str.find() outputs &#39;-1&#39; when given a list", "body": "<p>I'm trying to find the position of the first vowel in a word but it keeps outputting '-1'.  When I change <code>aLow = word.find(vowel)</code> to <code>aLow = word.find(\"a\")</code>, it works correctly.</p>\n\n<pre><code>vowels = ['a','e','i','o','u']\n\nwhile True:\n    letters = []\n    pGWord = \"\"\n\n    word = raw_input(\"Type word to 'Pig Latin' it: \")\n    low = len(word)\n\n    for vowel in vowels:\n        aLow = word.find(vowel)\n        if aLow &lt; low:\n            low = aLow\n\n    print low\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430955085, "post_id": 30088858, "comment_id": 48291785, "body": "Do you really want to parse this with regex? It looks like it&#39;s just HTML with the angle brackets changed into square brackets and the quotes escaped, and <a href=\"http://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\">the same reasons that make regex bad for HTML</a> will almost certainly make regex bad for this language."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430955145, "post_id": 30088858, "comment_id": 48291801, "body": "Actually, from a comment, it sounds like what you have really <i>is</i> just HTML."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 1804659, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/fmT0F.png?s=128&g=1", "display_name": "Eran", "link": "https://stackoverflow.com/users/1804659/eran"}, "edited": false, "score": 0, "creation_date": 1430952641, "post_id": 30088921, "comment_id": 48291048, "body": "hey it works great but just a little thing im having trouble to solve, the original [, ] are &lt;, &gt;. couldnt write it in the post. can you rewrite the regex please?"}, {"owner": {"reputation": 115, "user_id": 1804659, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/fmT0F.png?s=128&g=1", "display_name": "Eran", "link": "https://stackoverflow.com/users/1804659/eran"}, "edited": false, "score": 0, "creation_date": 1430953211, "post_id": 30088921, "comment_id": 48291228, "body": "works perfect, but when i run it on the whole text, it just gives me the first result.. i need to take all those texts and write them into a string or list of strings"}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 115, "user_id": 1804659, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/fmT0F.png?s=128&g=1", "display_name": "Eran", "link": "https://stackoverflow.com/users/1804659/eran"}, "edited": false, "score": 0, "creation_date": 1430953237, "post_id": 30088921, "comment_id": 48291235, "body": "Use <code>finditer</code>, I have updated the <b>EDIT</b> section and the links to the corresponding demo programs."}, {"owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 115, "user_id": 1804659, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/fmT0F.png?s=128&g=1", "display_name": "Eran", "link": "https://stackoverflow.com/users/1804659/eran"}, "edited": false, "score": 0, "creation_date": 1430953669, "post_id": 30088921, "comment_id": 48291361, "body": ":-D Always glad to help people out. Time to go to bed for me. Happy programming!"}], "tags": [], "owner": {"reputation": 481647, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1430953302, "last_edit_date": 1430953302, "creation_date": 1430951973, "answer_id": 30088921, "question_id": 30088858, "link": "https://stackoverflow.com/questions/30088858/advanced-string-parsing-in-python/30088921#30088921", "title": "Advanced string parsing in python", "body": "<p>This pattern should fetch you the string, just grab the Group 1 value:</p>\n\n<pre><code>r'\\[span\\b[^]]*class=[\\\\\"\\']*review-title\\b[^]]*][^[]*\\[/span\\]\\s*([^[]*)\\[div\\b'\n</code></pre>\n\n<p>Or a more generic one that does not check the <code>class=\"review-link\"</code>:</p>\n\n<pre><code>r'\\[span\\b[^]]*][^[]*\\[/span\\]\\s*([^[]*)\\[div\\b'\n</code></pre>\n\n<p>Sample code at <a href=\"http://ideone.com/YD1hlA\" rel=\"nofollow\">IDEONE</a>:</p>\n\n<pre><code>import re\np = re.compile(ur'\\[span\\b[^]]*][^[]*\\[/span\\]\\s*([^[]*)\\[div\\b')\ntest_str = u\"[span class=\\\"review-title\\\"]Wont open[/span] I have the GS5 and the game wont open. I got this game when i got the first droid. The fact that people havent been able to play since almost 2013 is bull. Please fix this or there isnt a point in even having the game on the server. [div class=\\\"review-link\\\" \"\nprint re.search(p, test_str).group(1)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>I have the GS5 and the game wont open. I got this game when i got the first droid. The fact that people havent been able to play since almost 2013 is bull. Please fix this or there isnt a point in even having the game on the server.\n</code></pre>\n\n<p><strong>EDIT</strong>: Since the <code>[</code>s and <code>]</code>s are in fact <code>&lt;</code>s and <code>&gt;</code>s, here is <a href=\"http://ideone.com/YD1hlA\" rel=\"nofollow\">an updated regex and code</a>:</p>\n\n<pre><code>import re\np = re.compile(ur'&lt;span\\b[^&gt;]*&gt;[^&lt;]*&lt;/span&gt;\\s*([^&lt;]*)&lt;div\\b')\ntest_str = u\"&lt;span class=\\\"review-title\\\"&gt;Wont open&lt;/span&gt; I have the GS5 and the game wont open. I got this game when i got the first droid. The fact that people havent been able to play since almost 2013 is bull. Please fix this or there isnt a point in even having the game on the server. &lt;div class=\\\"review-link\\\" \"\nprint [x.group(1) for x in re.finditer(p, test_str)]\n</code></pre>\n\n<p>A <a href=\"http://ideone.com/4KZhTp\" rel=\"nofollow\">more specific regex</a> to account for the <code>class</code> attribute:</p>\n\n<pre><code>p = re.compile(ur'&lt;span\\b[^&gt;]*class\\s*=\\s*[\\\\\\'\"]*review-title[^&gt;]*&gt;[^&lt;]*&lt;/span&gt;\\s*([^&lt;]*)&lt;div\\b')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4551, "user_id": 3790360, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ef9805061faba2c8d3d95a1929702294?s=128&d=identicon&r=PG&f=1", "display_name": "Andie2302", "link": "https://stackoverflow.com/users/3790360/andie2302"}, "is_accepted": false, "score": 0, "last_activity_date": 1430952456, "last_edit_date": 1430952456, "creation_date": 1430952123, "answer_id": 30088958, "question_id": 30088858, "link": "https://stackoverflow.com/questions/30088858/advanced-string-parsing-in-python/30088958#30088958", "title": "Advanced string parsing in python", "body": "<p>It seems that you need just this regex:</p>\n\n<pre><code>(?&lt;=\\[/span\\])[\\s\\S]*?(?=\\[div)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "is_accepted": false, "score": 1, "last_activity_date": 1430955341, "last_edit_date": 1495542514, "creation_date": 1430955341, "answer_id": 30089464, "question_id": 30088858, "link": "https://stackoverflow.com/questions/30088858/advanced-string-parsing-in-python/30089464#30089464", "title": "Advanced string parsing in python", "body": "<p>From your comments (\"im having trouble to solve, the original <code>[</code>, <code>]</code> are <code>&lt;</code>, <code>&gt;</code>\"), it's pretty clear that what you have is HTML.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\">Do not try to parse HTML with regex</a>.</p>\n\n<p>What you want here is an HTML parser. For example:</p>\n\n<pre><code>from bs4 import BeautifulSoup\n\nsoup = BeautifulSoup(huge_string)\nfor span in soup.find_all('span', class='review-title'):\n    text = span.next_sibling\n    print(text)\n</code></pre>\n\n<p>Even if what you have is HTML escaped in some way (backslash-escaped quotes, angle brackets turned into square brackets, etc.), you still don't want to parse it with regex. In that case, at most, you might want to use a regex as the preprocessor to turn it back into HTML to feed to an HTML parser.</p>\n"}], "owner": {"reputation": 115, "user_id": 1804659, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/fmT0F.png?s=128&g=1", "display_name": "Eran", "link": "https://stackoverflow.com/users/1804659/eran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 294, "favorite_count": 0, "accepted_answer_id": 30088921, "answer_count": 3, "score": 0, "last_activity_date": 1430955341, "creation_date": 1430951624, "last_edit_date": 1430953010, "question_id": 30088858, "link": "https://stackoverflow.com/questions/30088858/advanced-string-parsing-in-python", "title": "Advanced string parsing in python", "body": "<p>I've encountered a problem while trying to parse a complicated string. The string is really long and full of patterns but lets focus on what i need to take (and only that).</p>\n\n<p>A substring from the huge string is: </p>\n\n<blockquote>\n  <p>... [span class=\\\"review-title\\\"]Wont open[/span] <strong><em>I have the GS5\n  and the game    wont open. I got this game when i got the first droid.\n  The fact that people havent been able to play since almost 2013 is\n  bull. Please fix this or there isnt a point in even having the game on\n  the server.</em></strong> [div class=\\\"review-link\\\" ...</p>\n</blockquote>\n\n<p>Now I want to take the bold italic text, and i have the pattern, starts with [span class = ..]*[/span] <strong><em>desired text</em></strong> [div ... ] and this pattern repeates through the whole string.</p>\n\n<p>How exactly do I take this specific text from the whole string and write it line after line?</p>\n"}, {"tags": ["python", "python-3.x", "argparse"], "answers": [{"comments": [{"owner": {"reputation": 234, "user_id": 320351, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50e397a2f5b8fed5589762a525d6f4da?s=128&d=identicon&r=PG", "display_name": "Quanteek", "link": "https://stackoverflow.com/users/320351/quanteek"}, "edited": false, "score": 0, "creation_date": 1431001840, "post_id": 30090922, "comment_id": 48313548, "body": "Your explanation works but do you know why it stops at 35 and do not go after (even with 120 or any large number) ?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 234, "user_id": 320351, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50e397a2f5b8fed5589762a525d6f4da?s=128&d=identicon&r=PG", "display_name": "Quanteek", "link": "https://stackoverflow.com/users/320351/quanteek"}, "edited": false, "score": 1, "creation_date": 1431012899, "post_id": 30090922, "comment_id": 48322463, "body": "Actual help postion is <code>min(self._action_max_length + 2,  self._max_help_position)</code>.  I&#39;m guessing the 33 is the length of your longest <code>action</code>."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 1, "last_activity_date": 1430980808, "last_edit_date": 1430980808, "creation_date": 1430965709, "answer_id": 30090922, "question_id": 30088857, "link": "https://stackoverflow.com/questions/30088857/how-to-change-the-format-of-subparser-with-argparse/30090922#30090922", "title": "How to change the format of subparser with argparse", "body": "<p>You correctly note that there is a <code>max_help_position</code> that controls the indent for <code>help</code> lines.   The default value in the <code>HelpFormatter</code> <code>__init__</code> is <code>24</code>.</p>\n\n<p>But the trick is to change that.</p>\n\n<p>One way is to subclass <code>HelpFormatter</code> (or the Raw... one if you need that).</p>\n\n<pre><code>class MyFormatter(argparse.HelpFormatter):\n    def __init__(self,prog):\n        super(MyFormatter,self).__init__(prog,max_help_position=55)\nparser=argparse.ArgumentParser(formatter_class=MyFormatter)\n</code></pre>\n\n<p>In theory you could create or modify a <code>formatter</code> with:</p>\n\n<pre><code>formatter = argparse.HelpFormatter(`prog`, max_help_position=40)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>formatter = argparse.HelpFormatter('prog')\nformatter._max_help_position = 45\n</code></pre>\n\n<p>But to do that you'd have to tweak some place within this calling tree:</p>\n\n<pre><code>`-h`\nparser.print_help()\n    parser.format_help()\n        parser._get_formatter()\n            parser.formatter_class(prog=self.prog)\n</code></pre>\n\n<p>(check my edit history if you think I removed something useful).</p>\n"}], "owner": {"reputation": 234, "user_id": 320351, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50e397a2f5b8fed5589762a525d6f4da?s=128&d=identicon&r=PG", "display_name": "Quanteek", "link": "https://stackoverflow.com/users/320351/quanteek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1206, "favorite_count": 0, "accepted_answer_id": 30090922, "answer_count": 1, "score": 2, "last_activity_date": 1443700179, "creation_date": 1430951624, "question_id": 30088857, "link": "https://stackoverflow.com/questions/30088857/how-to-change-the-format-of-subparser-with-argparse", "title": "How to change the format of subparser with argparse", "body": "<p>I know there is max_help_position for the main parser created with the constructor but how to change subparsers format since I have some times very long command name and I want the help message to be aligned with it.</p>\n\n<pre><code>#!/usr/bin/env python\n\nimport argparse\nimport subprocess\n\nparser = argparse.ArgumentParser(description=\"example\",\n                                 formatter_class=argparse.RawDescriptionHelpFormatter)\n\nsubparsers = parser.add_subparsers(title=\"available commands\",metavar=\"command [options ...]\")\n\nparser1 = subparsers.add_parser('short-cmd', help='help message')\nparser1.add_argument('--path')\n\nparser2 = subparsers.add_parser('very-long-long-name-for-a-command', help='help message')\nparser2.add_argument('--path')\n\nargs = parser.parse_args()\n</code></pre>\n\n<p>output :</p>\n\n<pre><code>usage: test.py [-h] command [options ...] ...\n\nexample\n\noptional arguments:\n  -h, --help            show this help message and exit\n\navailable commands:\n  command [options ...]\n    short-cmd           create a directory for database\n    very-long-long-name-for-a-command\n                        create a directory for database\n</code></pre>\n\n<p>what i want :</p>\n\n<pre><code>usage: test.py [-h] command [options ...] ...\n\nexample\n\noptional arguments:\n  -h, --help            show this help message and exit\n\navailable commands:\n  command [options ...]\n    short-cmd                          create a directory for database\n    very-long-long-name-for-a-command  create a directory for database\n</code></pre>\n"}, {"tags": ["python", "pandas", "hdf5"], "answers": [{"tags": [], "owner": {"reputation": 13452, "user_id": 170005, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6f798bceabf532bf6654f760d4d44552?s=128&d=identicon&r=PG", "display_name": "fixxxer", "link": "https://stackoverflow.com/users/170005/fixxxer"}, "is_accepted": true, "score": 1, "last_activity_date": 1430969343, "creation_date": 1430969343, "answer_id": 30091418, "question_id": 30088843, "link": "https://stackoverflow.com/questions/30088843/adding-a-row-to-a-pandas-dataframe-that-would-duplicate-index/30091418#30091418", "title": "Adding a row to a Pandas DataFrame that would duplicate index", "body": "<p>Create a list of lists and making a dataframe of that will be faster than append. Since you are already creating data frames of small chunks, why not create it in one go:</p>\n\n<pre><code>In [1303]: pd.DataFrame([[0,1], [1,2], [2,3]], index=[pd.datetime.today()] * 3)\nOut[1303]: \n                            0  1\n2015-05-07 09:02:30.327473  0  1\n2015-05-07 09:02:30.327473  1  2\n2015-05-07 09:02:30.327473  2  3\n</code></pre>\n"}], "owner": {"reputation": 1075, "user_id": 3842102, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/77359feb1e248ccf2543f5bdb45237d2?s=128&d=identicon&r=PG&f=1", "display_name": "baconwichsand", "link": "https://stackoverflow.com/users/3842102/baconwichsand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1166, "favorite_count": 0, "accepted_answer_id": 30091418, "answer_count": 1, "score": 1, "last_activity_date": 1430969343, "creation_date": 1430951543, "question_id": 30088843, "link": "https://stackoverflow.com/questions/30088843/adding-a-row-to-a-pandas-dataframe-that-would-duplicate-index", "title": "Adding a row to a Pandas DataFrame that would duplicate index", "body": "<p>I have a DataFrame with an index of type datetime objects. I am ultimately going to write this DataFrame to an HDF5 file using HDFStore.append. I am adding a lot of rows that need to be written to this HDF5 file. If i use HDFStore.append for every row, this takes way too long. If I collect everything in a DataFrame first, I run out of memory. So I need to chunk and write to HDF5 intermittently.</p>\n\n<pre><code>df = DataFrame([['Bob','Mary']], columns=['Boy', 'Girl'], index=[datetime.today()])\n</code></pre>\n\n<p>Now i would like to add another row to this WITH THE SAME INDEX</p>\n\n<pre><code>row = ['John', 'Sue']\n</code></pre>\n\n<p>Using .loc or .ix replaces the existing row</p>\n\n<pre><code>df.loc[datetime.today()] = row\n</code></pre>\n\n<p>Using append works, but for my purposes is WAY TOO SLOW</p>\n\n<pre><code>new_df = DataFrame([row], columns=df.columns, index=[datetime.today()])\ndf.append(new_df)\n</code></pre>\n\n<p>Is there a better way to do this ?</p>\n"}, {"tags": ["python", "tiff", "scikit-image"], "comments": [{"owner": {"reputation": 181, "user_id": 608717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58cd1d9cad6b2f6db68cceda044120e4?s=128&d=identicon&r=PG", "display_name": "Kosig", "link": "https://stackoverflow.com/users/608717/kosig"}, "edited": false, "score": 0, "creation_date": 1447450756, "post_id": 30088841, "comment_id": 55176448, "body": "I&#39;m having the exact same issue. Did you work through it?"}, {"owner": {"reputation": 103, "user_id": 1946589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/svmbZ.jpg?s=128&g=1", "display_name": "Nik Hartman", "link": "https://stackoverflow.com/users/1946589/nik-hartman"}, "reply_to_user": {"reputation": 181, "user_id": 608717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58cd1d9cad6b2f6db68cceda044120e4?s=128&d=identicon&r=PG", "display_name": "Kosig", "link": "https://stackoverflow.com/users/608717/kosig"}, "edited": false, "score": 0, "creation_date": 1447463576, "post_id": 30088841, "comment_id": 55180400, "body": "@Kosig I submitted this as a bug. You can follow what happened to it here: <a href=\"https://github.com/scikit-image/scikit-image/issues/1496\" rel=\"nofollow noreferrer\">github.com/scikit-image/scikit-image/issues/1496</a> Check with those guys if you think it is still a problem."}, {"owner": {"reputation": 181, "user_id": 608717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/58cd1d9cad6b2f6db68cceda044120e4?s=128&d=identicon&r=PG", "display_name": "Kosig", "link": "https://stackoverflow.com/users/608717/kosig"}, "edited": false, "score": 0, "creation_date": 1447469053, "post_id": 30088841, "comment_id": 55181382, "body": "Thanks for the link."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 1946589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/svmbZ.jpg?s=128&g=1", "display_name": "Nik Hartman", "link": "https://stackoverflow.com/users/1946589/nik-hartman"}, "edited": false, "score": 0, "creation_date": 1430952370, "post_id": 30088942, "comment_id": 48290949, "body": "Am I wrong in thinking tifffile is already being used as the default plugin by skimage?  Either way, calling it explicitly with imread( .... , plugin=&#39;tifffile&#39;) produces the same problems."}, {"owner": {"reputation": 6487, "user_id": 214686, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b30b909765488cf4cf9de4a496f9a408?s=128&d=identicon&r=PG", "display_name": "Stefan van der Walt", "link": "https://stackoverflow.com/users/214686/stefan-van-der-walt"}, "edited": false, "score": 0, "creation_date": 1430956854, "post_id": 30088942, "comment_id": 48292323, "body": "In this case, the conversation to gray should fail--so I think that is a legitimate bug you can report."}], "tags": [], "owner": {"reputation": 29539, "user_id": 1221924, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f54c6896f32653516c994bfcb12b704a?s=128&d=identicon&r=PG", "display_name": "Dan Allan", "link": "https://stackoverflow.com/users/1221924/dan-allan"}, "is_accepted": true, "score": 2, "last_activity_date": 1430952058, "creation_date": 1430952058, "answer_id": 30088942, "question_id": 30088841, "link": "https://stackoverflow.com/questions/30088841/skimage-io-imread-returns-incorrect-dimensions-for-tiff-import/30088942#30088942", "title": "skimage.io.imread returns incorrect dimensions for TIFF import", "body": "<p>I think it's fair to call this a bug in the flattening feature of <code>imread</code>, so it would probably be appropriate to open an issue there.</p>\n\n<p>I don't think it clear which order is \"correct.\" There's a difference of performance. If you are looping through color channels, (3, M, N) is faster. If you are looping through rows or columns, (M, N, 3) is faster. But it is clear that <code>flatten</code> and <code>as_grey</code> are failing to detect the dimensions properly.</p>\n\n<p>The workaround here is obviously straightforward, but you could also look at tifffile, installable by pip or from the soft-matter conda channel like <code>conda install -c soft-matter tifffile</code>.</p>\n"}], "owner": {"reputation": 103, "user_id": 1946589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/svmbZ.jpg?s=128&g=1", "display_name": "Nik Hartman", "link": "https://stackoverflow.com/users/1946589/nik-hartman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1241, "favorite_count": 0, "accepted_answer_id": 30088942, "answer_count": 1, "score": 1, "last_activity_date": 1430952058, "creation_date": 1430951540, "question_id": 30088841, "link": "https://stackoverflow.com/questions/30088841/skimage-io-imread-returns-incorrect-dimensions-for-tiff-import", "title": "skimage.io.imread returns incorrect dimensions for TIFF import", "body": "<p>Importing a TIFF image using skimage.io.imread returns an array with shape (3,M,N) instead of (M,N,3).</p>\n\n<pre><code>In [1]: im = skimage.io.imread('image.tif')\n\nIn [2]: im.shape\nOut[2]: (3, 768, 1024)\n\nIn [3]: im = skimage.io.imread('image.tif', as_grey = True)\n\nIn [4]: im.shape\nOut[4]: (3, 768)\n\nIn [5]: im = skimage.io.imread('image.tif', flatten = True)\n\nIn [6]: im.shape\nOut[6]: (3, 768)\n</code></pre>\n"}, {"tags": ["python", "django", "postgresql", "deployment", "web-deployment"], "answers": [{"comments": [{"owner": {"reputation": 333, "user_id": 857695, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7eae7d9dca7cffcd0813397e2f465da0?s=128&d=identicon&r=PG", "display_name": "Poka Yoke", "link": "https://stackoverflow.com/users/857695/poka-yoke"}, "edited": false, "score": 0, "creation_date": 1430976866, "post_id": 30089080, "comment_id": 48297837, "body": "Can I create a package that includes a virrtual machine with everything on it?"}, {"owner": {"reputation": 2752, "user_id": 1400353, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4cd4ee3e568a3c800702be035491231a?s=128&d=identicon&r=PG&f=1", "display_name": "Othman", "link": "https://stackoverflow.com/users/1400353/othman"}, "reply_to_user": {"reputation": 333, "user_id": 857695, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7eae7d9dca7cffcd0813397e2f465da0?s=128&d=identicon&r=PG", "display_name": "Poka Yoke", "link": "https://stackoverflow.com/users/857695/poka-yoke"}, "edited": false, "score": 0, "creation_date": 1431010031, "post_id": 30089080, "comment_id": 48320123, "body": "@PokaYoke you can create a shell script which can create the environment get the packages from your git repo and install dependency."}], "tags": [], "owner": {"reputation": 2752, "user_id": 1400353, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4cd4ee3e568a3c800702be035491231a?s=128&d=identicon&r=PG&f=1", "display_name": "Othman", "link": "https://stackoverflow.com/users/1400353/othman"}, "is_accepted": false, "score": 0, "last_activity_date": 1430953007, "creation_date": 1430953007, "answer_id": 30089080, "question_id": 30088815, "link": "https://stackoverflow.com/questions/30088815/deploying-websites-in-django-virtual-machine/30089080#30089080", "title": "Deploying websites in django virtual machine", "body": "<p>From my point of view, database always should be created before deployment. And the information of the database must be posted to the <code>settings.py</code></p>\n\n<p>for the application it self, I think <code>virtualenv</code> can be very helpful in these cases with <code>requirements.txt</code></p>\n\n<p>You run the application in your virtual environment and then export your dependencies using </p>\n\n<p><code>pip freeze &gt; requirements.txt</code></p>\n\n<p>Then in the new server you create the database, and insert the configuration in your settings, then install dependences </p>\n\n<p><code>pip install -r /path/to/requirements.txt</code></p>\n\n<p>Run migrations, and you are done. </p>\n"}, {"comments": [{"owner": {"reputation": 333, "user_id": 857695, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7eae7d9dca7cffcd0813397e2f465da0?s=128&d=identicon&r=PG", "display_name": "Poka Yoke", "link": "https://stackoverflow.com/users/857695/poka-yoke"}, "edited": false, "score": 0, "creation_date": 1430994960, "post_id": 30096665, "comment_id": 48308724, "body": "Thanks it looks really interesting, I&#39;ll try it out and if it satisfies what I need, I&#39;ll mark your answer."}], "tags": [], "owner": {"reputation": 4378, "user_id": 4358680, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KGQtt.jpg?s=128&g=1", "display_name": "Meghdeep Ray", "link": "https://stackoverflow.com/users/4358680/meghdeep-ray"}, "is_accepted": true, "score": 0, "last_activity_date": 1430989967, "creation_date": 1430989967, "answer_id": 30096665, "question_id": 30088815, "link": "https://stackoverflow.com/questions/30088815/deploying-websites-in-django-virtual-machine/30096665#30096665", "title": "Deploying websites in django virtual machine", "body": "<p>virtualenv is a really good tool but I think Vagrant is what you're looking for.\n<a href=\"https://www.vagrantup.com/\" rel=\"nofollow\">https://www.vagrantup.com/</a></p>\n\n<p>It should enable you to easily set up your system regardless of the platform and it's free as well and quite well documented. I'd suggest you give it a look over !</p>\n"}], "owner": {"reputation": 333, "user_id": 857695, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/7eae7d9dca7cffcd0813397e2f465da0?s=128&d=identicon&r=PG", "display_name": "Poka Yoke", "link": "https://stackoverflow.com/users/857695/poka-yoke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 1, "accepted_answer_id": 30096665, "answer_count": 2, "score": 0, "last_activity_date": 1430989967, "creation_date": 1430951415, "question_id": 30088815, "link": "https://stackoverflow.com/questions/30088815/deploying-websites-in-django-virtual-machine", "title": "Deploying websites in django virtual machine", "body": "<p>Sorry I'm new to this specific topic.\nI have a website implemented in django and AskBot it also has a DB (postgreSQL). I want to create a deployment package which can be distributed to any customer; such that this customer can have their own server. Taking into consideration that the deployment package should be platform independent; so it should work on all operating systems.\nCan you tell me what are the available tools to achieve this?</p>\n"}, {"tags": ["python", "mysql", "django", "orm", "connection"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4590089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adb1f1ee752999d5191ef11e80e6ca79?s=128&d=identicon&r=PG&f=1", "display_name": "calizarr", "link": "https://stackoverflow.com/users/4590089/calizarr"}, "edited": false, "score": 0, "creation_date": 1431028052, "post_id": 30096236, "comment_id": 48331517, "body": "The query id gets all the adjacency results that contain the query_id in gene_id_a and different gene_ids in gene_id_b. Afterwards, the gene_id_b result is used to query the metrics table. So, I need the results from adjacency to query the results from metrics several times. Something like: <code>adj=CO2_Low_Adj.objects.filter(gene_id_A=&#39;Traes_1AL_00A8A203&zwnj;&#8203;0&#39; metrics = CO2_Low_Metrics.objects.get(pk=adj[0].gene_id_b)</code>  Then join those together and display that in a table for each result in adj."}, {"owner": {"reputation": 579, "user_id": 2273107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sq2Mk.png?s=128&g=1", "display_name": "Karolis Ryselis", "link": "https://stackoverflow.com/users/2273107/karolis-ryselis"}, "reply_to_user": {"reputation": 1, "user_id": 4590089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adb1f1ee752999d5191ef11e80e6ca79?s=128&d=identicon&r=PG&f=1", "display_name": "calizarr", "link": "https://stackoverflow.com/users/4590089/calizarr"}, "edited": false, "score": 0, "creation_date": 1431093357, "post_id": 30096236, "comment_id": 48360827, "body": "Are you using Django admin or some custom view?"}, {"owner": {"reputation": 1, "user_id": 4590089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adb1f1ee752999d5191ef11e80e6ca79?s=128&d=identicon&r=PG&f=1", "display_name": "calizarr", "link": "https://stackoverflow.com/users/4590089/calizarr"}, "edited": false, "score": 0, "creation_date": 1431358991, "post_id": 30096236, "comment_id": 48450055, "body": "Not exactly sure what you mean by that, but I&#39;m using django-tables2 to display the list of dictionaries that are generated from the raw sql query.  Unfortunately, that also means no more filtering can be done without the ORM once I have the raw sql query."}], "tags": [], "owner": {"reputation": 579, "user_id": 2273107, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sq2Mk.png?s=128&g=1", "display_name": "Karolis Ryselis", "link": "https://stackoverflow.com/users/2273107/karolis-ryselis"}, "is_accepted": false, "score": 0, "last_activity_date": 1430988726, "creation_date": 1430988726, "answer_id": 30096236, "question_id": 30088787, "link": "https://stackoverflow.com/questions/30088787/django-join-two-tables-while-keeping-orm/30096236#30096236", "title": "Django join two tables while keeping ORM", "body": "<p>Django does not have a way to perform JOIN queries without foreign keys. This is why <code>prefetch_related</code> and <code>select_related</code> will not work - they work on foreign keys. </p>\n\n<p>I am not sure what are you trying to achieve. Since your <code>gene_id</code> is unique, there will be only one <code>CO2_Low_Metrics</code> instance and a list of adj instances:</p>\n\n<pre><code>adj = CO2_Low_Adj.objects.filter(gene_id_A='Traes_1AL_00A8A2030') \nmetrics = CO2_Low_Metrics.objects.get(pk='Traes_1AL_00A8A2030')\n</code></pre>\n\n<p>and then work on a separate list.</p>\n"}], "owner": {"reputation": 1, "user_id": 4590089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/adb1f1ee752999d5191ef11e80e6ca79?s=128&d=identicon&r=PG&f=1", "display_name": "calizarr", "link": "https://stackoverflow.com/users/4590089/calizarr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1430988726, "creation_date": 1430951287, "question_id": 30088787, "link": "https://stackoverflow.com/questions/30088787/django-join-two-tables-while-keeping-orm", "title": "Django join two tables while keeping ORM", "body": "<p>Using Django, I am trying to fetch this specific result view from the database using Django:</p>\n\n<pre><code>select * from CO2_Low_Adj a JOIN CO2_Low_Metrics b on a.gene_id_B = b.gene_id where a.gene_id_A='Traes_1AL_00A8A2030'\n</code></pre>\n\n<p>I know I can do it using connections, cursor, fetchall and get back a list of dictionaries. However, I am wondering if there is a way to do this in Django while keeping the ORM.</p>\n\n<p>The tables look like this:</p>\n\n<pre><code>class Co2LowMetrics(models.Model):\n    gene_id = models.CharField(primary_key=True, max_length=24)\n    modular_k = models.FloatField()\n    modular_k_rank = models.IntegerField()\n    modular_mean_exp_rank = models.IntegerField()\n    module = models.IntegerField()\n    k = models.FloatField()\n    k_rank = models.IntegerField()\n    mean_exp = models.FloatField()\n    mean_exp_rank = models.IntegerField()\n    gene_gene = models.ForeignKey(Co2LowGene, db_column='Gene_gene_id')  # Field name made lowercase.\n\n    class Meta:\n        managed = False\n        db_table = 'CO2_Low_Metrics'\n\nclass Co2LowGene(models.Model):\n    gene_id = models.CharField(primary_key=True, max_length=24)\n    entry = models.IntegerField(unique=True)\n    gene_gene_id = models.CharField(db_column='Gene_gene_id', max_length=24)  # Field name made lowercase.\n\n    class Meta:\n        managed = False\n        db_table = 'CO2_Low_Gene'\n\nclass Co2LowAdj(models.Model):\n    gene_id_a = models.CharField(db_column='gene_id_A', max_length=24)  # Field name made lowercase.\n    edge_number = models.IntegerField(unique=True)\n    gene_id_b = models.CharField(db_column='gene_id_B', max_length=24)  # Field name made lowercase.\n    value = models.FloatField()\n    gene_gene_id_a = models.ForeignKey('Co2LowGene', db_column='Gene_gene_id_A')  # Field name made lowercase.\n    gene_gene_id_b = models.ForeignKey('Co2LowGene', db_column='Gene_gene_id_B')  # Field name made lowercase.\n\n    class Meta:\n        managed = False\n        db_table = 'CO2_Low_Adj'\n</code></pre>\n\n<p>The database table descriptions are:</p>\n\n<pre><code>mysql&gt; describe CO2_Low_Metrics;\n+-----------------------+-------------+------+-----+---------+-------+\n| Field                 | Type        | Null | Key | Default | Extra |\n+-----------------------+-------------+------+-----+---------+-------+\n| gene_id               | varchar(24) | NO   | PRI | NULL    |       |\n| modular_k             | double      | NO   |     | NULL    |       |\n| modular_k_rank        | int(8)      | NO   |     | NULL    |       |\n| modular_mean_exp_rank | int(8)      | NO   |     | NULL    |       |\n| module                | int(8)      | NO   |     | NULL    |       |\n| k                     | double      | NO   |     | NULL    |       |\n| k_rank                | int(8)      | NO   |     | NULL    |       |\n| mean_exp              | double      | NO   |     | NULL    |       |\n| mean_exp_rank         | int(8)      | NO   |     | NULL    |       |\n| Gene_gene_id          | varchar(24) | NO   | MUL | NULL    |       |\n+-----------------------+-------------+------+-----+---------+-------+\n\nmysql&gt; describe CO2_Low_Gene;\n+--------------+-------------+------+-----+---------+----------------+\n| Field        | Type        | Null | Key | Default | Extra          |\n+--------------+-------------+------+-----+---------+----------------+\n| gene_id      | varchar(24) | NO   | PRI | NULL    |                |\n| entry        | int(8)      | NO   | UNI | NULL    | auto_increment |\n| Gene_gene_id | varchar(24) | NO   |     | NULL    |                |\n+--------------+-------------+------+-----+---------+----------------+\n\nmysql&gt; describe CO2_Low_Adj;\n+----------------+-------------+------+-----+---------+----------------+\n| Field          | Type        | Null | Key | Default | Extra          |\n+----------------+-------------+------+-----+---------+----------------+\n| gene_id_A      | varchar(24) | NO   | MUL | NULL    |                |\n| edge_number    | int(9)      | NO   | PRI | NULL    | auto_increment |\n| gene_id_B      | varchar(24) | NO   | MUL | NULL    |                |\n| value          | double      | NO   |     | NULL    |                |\n| Gene_gene_id_A | varchar(24) | NO   | MUL | NULL    |                |\n| Gene_gene_id_B | varchar(24) | NO   | MUL | NULL    |                |\n+----------------+-------------+------+-----+---------+----------------+\n</code></pre>\n\n<p>Assume that I do not have the ability to change the underlying database schema. That may change and if a suggestion can help in making it easier to use Django's ORM then I can attempt to get it changed.</p>\n\n<p>However, I have been trying to use prefetch_related and select_related but I'm doing something wrong and am not getting everything back right.</p>\n\n<p>With my SQL query I get essentially with the described tables in order CO2_Low_Adj then CO2_Low_Metrics where gene_id_A is the same as gene_gene_id_A ('Traes_1AL_00A8A2030') and gene_id_B is the same as gene_gene_id_B. CO2_Low_Gene does not seem to be used at all with the SQL query.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "argparse"], "comments": [{"owner": {"reputation": 4833, "user_id": 509839, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nzm8B.jpg?s=128&g=1", "display_name": "Don Cruickshank", "link": "https://stackoverflow.com/users/509839/don-cruickshank"}, "edited": false, "score": 0, "creation_date": 1430951602, "post_id": 30088739, "comment_id": 48290689, "body": "It would be helpful if you included the code you have that relates to the argument parsers."}], "answers": [{"tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 3, "last_activity_date": 1430964576, "creation_date": 1430964576, "answer_id": 30090766, "question_id": 30088739, "link": "https://stackoverflow.com/questions/30088739/multiple-level-argparse-subparsers/30090766#30090766", "title": "Multiple level argparse subparsers", "body": "<p>To get the help for a subparser, use a command like <code>python prog.py cmd1 -h</code>.  To get the help for a sub-subparser, <code>python prog.py cmd1 cmd12 -h</code> should work.</p>\n\n<p>There isn't a means, with the default help mechanism, to show the help for the main parser and all the subparsers (and sub-subparsers) with one command.  It just gets too complicated.</p>\n\n<p>I'd suggest custom usage and description.  That includes titles and descriptions for the subparsers, etc.</p>\n"}], "owner": {"reputation": 1065, "user_id": 401175, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8fd163e1404928dd939e01b68f258e99?s=128&d=identicon&r=PG", "display_name": "Euphorbium", "link": "https://stackoverflow.com/users/401175/euphorbium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "accepted_answer_id": 30090766, "answer_count": 1, "score": 1, "last_activity_date": 1430964576, "creation_date": 1430951030, "question_id": 30088739, "link": "https://stackoverflow.com/questions/30088739/multiple-level-argparse-subparsers", "title": "Multiple level argparse subparsers", "body": "<p>I have multiple levels of subparsers within subparsers, but when I run the program with help flag, I see help messages and choices only for top level options. How can I see help for all suboptions, or for specific suboption in deeper level?</p>\n"}, {"tags": ["python", "arrays", "numpy"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1430952842, "post_id": 30088697, "comment_id": 48291118, "body": "Have you taken a look at this? <a href=\"http://stackoverflow.com/questions/2706605/sorting-a-2d-numpy-array-by-multiple-axes\" title=\"sorting a 2d numpy array by multiple axes\">stackoverflow.com/questions/2706605/&hellip;</a> Maybe it helps"}], "answers": [{"tags": [], "owner": {"reputation": 1041, "user_id": 2934915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a29bc32b5466dba4eec982cec1c660a1?s=128&d=identicon&r=PG", "display_name": "cosmoscalibur", "link": "https://stackoverflow.com/users/2934915/cosmoscalibur"}, "is_accepted": false, "score": 0, "last_activity_date": 1430969582, "creation_date": 1430969582, "answer_id": 30091463, "question_id": 30088697, "link": "https://stackoverflow.com/questions/30088697/4-1-2-numpy-array-sort-clockwise/30091463#30091463", "title": "(4,1,2) Numpy Array Sort Clockwise", "body": "<p>If you need such you show in your example</p>\n\n<pre><code>new_array = my_array[[1,0,3,2]]\n</code></pre>\n\n<p>Or exactly clockwise (and in general, not only for 4 points)</p>\n\n<pre><code>n = len(my_array)\norder = [i for i in range(0, n-2)]\norder.insert(0, n-1)\nnew_array = my_array[order]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "edited": false, "score": 0, "creation_date": 1430986249, "post_id": 30092136, "comment_id": 48302809, "body": "Note to OP: If the input array is of shape <code>4 x 1 x 2</code>, it could be squeezed to a shape of <code>4 x 2</code> at the start before proceeding with the rest of the code. So, <code>A = np.squeeze(A)</code> at the start could be used in such a case."}, {"owner": {"reputation": 440, "user_id": 1619356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5606391f7a3c047e48af4d211ecd76a?s=128&d=identicon&r=PG", "display_name": "Luis Enrique", "link": "https://stackoverflow.com/users/1619356/luis-enrique"}, "edited": false, "score": 0, "creation_date": 1431001243, "post_id": 30092136, "comment_id": 48313122, "body": "It works great but I need to change the tolerance for some matrices like A = np.float32([[281., 147.],[213. ,170.],[239. ,242.], [307. ,219.]]), so I made a variable tolerance, any advise how to pick this tolerance given the points?"}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 440, "user_id": 1619356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5606391f7a3c047e48af4d211ecd76a?s=128&d=identicon&r=PG", "display_name": "Luis Enrique", "link": "https://stackoverflow.com/users/1619356/luis-enrique"}, "edited": false, "score": 0, "creation_date": 1431010827, "post_id": 30092136, "comment_id": 48320798, "body": "@LuisEnrique Check out the edits please. Now, it uses eucl. dist., so must be more robust."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 4, "last_activity_date": 1432275841, "last_edit_date": 1432275841, "creation_date": 1430974036, "answer_id": 30092136, "question_id": 30088697, "link": "https://stackoverflow.com/questions/30088697/4-1-2-numpy-array-sort-clockwise/30092136#30092136", "title": "(4,1,2) Numpy Array Sort Clockwise", "body": "<p>You could do something like this -</p>\n\n<pre><code>import numpy as np\nfrom scipy.spatial import distance\n\ndef sortpts_clockwise(A):\n    # Sort A based on Y(col-2) coordinates\n    sortedAc2 = A[np.argsort(A[:,1]),:]\n\n    # Get top two and bottom two points\n    top2 = sortedAc2[0:2,:]\n    bottom2 = sortedAc2[2:,:]\n\n    # Sort top2 points to have the first row as the top-left one\n    sortedtop2c1 = top2[np.argsort(top2[:,0]),:]\n    top_left = sortedtop2c1[0,:]\n\n    # Use top left point as pivot &amp; calculate sq-euclidean dist against\n    # bottom2 points &amp; thus get bottom-right, bottom-left sequentially\n    sqdists = distance.cdist(top_left[None], bottom2, 'sqeuclidean')\n    rest2 = bottom2[np.argsort(np.max(sqdists,0))[::-1],:]\n\n    # Concatenate all these points for the final output\n    return np.concatenate((sortedtop2c1,rest2),axis =0)\n</code></pre>\n\n<p>Sample input, output -</p>\n\n<pre><code>In [85]: A\nOut[85]: \narray([[ 281.,  147.],\n       [ 213.,  170.],\n       [ 239.,  242.],\n       [ 307.,  219.]], dtype=float32)\n\nIn [86]: sortpts_clockwise(A)\nOut[86]: \narray([[ 213.,  170.],\n       [ 281.,  147.],\n       [ 307.,  219.],\n       [ 239.,  242.]], dtype=float32)\n</code></pre>\n"}], "owner": {"reputation": 440, "user_id": 1619356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5606391f7a3c047e48af4d211ecd76a?s=128&d=identicon&r=PG", "display_name": "Luis Enrique", "link": "https://stackoverflow.com/users/1619356/luis-enrique"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2136, "favorite_count": 0, "accepted_answer_id": 30092136, "answer_count": 2, "score": 3, "last_activity_date": 1432275841, "creation_date": 1430950855, "last_edit_date": 1495542290, "question_id": 30088697, "link": "https://stackoverflow.com/questions/30088697/4-1-2-numpy-array-sort-clockwise", "title": "(4,1,2) Numpy Array Sort Clockwise", "body": "<p>I have a numpy array as the following:</p>\n\n<pre><code>my_array = np.float32([[[ 323. , 143.]], [[ 237. , 143.]], [[ 227. , 230.]], [[ 318. , 233.]]])\n</code></pre>\n\n<p>This 4 points represent the vertices of a rectangle that lies on a image, I need to reorder them clockwise and save it to a new np array, (top-left-> top-right -> bottom - right -> bottom - left). In my example it will be:</p>\n\n<pre><code>[237,  143] -&gt; [323, 143] -&gt; [318, 233] -&gt; [227, 230]\n</code></pre>\n\n<p>I have read <a href=\"https://stackoverflow.com/questions/6989100/sort-points-in-clockwise-order\">this</a> but my skills on numpy aren't as good to implement it... </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "django", "serialization", "django-rest-framework", "django-serializer"], "comments": [{"owner": {"reputation": 36599, "user_id": 359284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3260a8f331e6869fbf075666eb3b387a?s=128&d=identicon&r=PG", "display_name": "Kevin Brown", "link": "https://stackoverflow.com/users/359284/kevin-brown"}, "edited": false, "score": 0, "creation_date": 1430954274, "post_id": 30088664, "comment_id": 48291563, "body": "The issue is in your <code>for</code> loop, you are only creating new songs instead of checking to see if they already exist first."}, {"owner": {"reputation": 475, "user_id": 1819581, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/aa220d2f2b61536c1c7f79740993a2ae?s=128&d=identicon&r=PG", "display_name": "jwv", "link": "https://stackoverflow.com/users/1819581/jwv"}, "reply_to_user": {"reputation": 36599, "user_id": 359284, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3260a8f331e6869fbf075666eb3b387a?s=128&d=identicon&r=PG", "display_name": "Kevin Brown", "link": "https://stackoverflow.com/users/359284/kevin-brown"}, "edited": false, "score": 0, "creation_date": 1430964768, "post_id": 30088664, "comment_id": 48294263, "body": "How can I check whether the song exists? It has no ID because its autogenerated by DRF."}], "owner": {"reputation": 475, "user_id": 1819581, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/aa220d2f2b61536c1c7f79740993a2ae?s=128&d=identicon&r=PG", "display_name": "jwv", "link": "https://stackoverflow.com/users/1819581/jwv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 533, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1430964925, "creation_date": 1430950748, "last_edit_date": 1430964925, "question_id": 30088664, "link": "https://stackoverflow.com/questions/30088664/django-rest-framework-def-update-is-duplicating-objects", "title": "Django Rest Framework def update is duplicating objects", "body": "<p>I'm using this method to handle updates in a nested serialisation of a many to many relationship. </p>\n\n<pre><code>def update(self, instance, validated_data):\n    songs = validated_data.pop('suggested_songs')\n    updated_instance = super(MessagesSerializer, self).update(instance, validated_data) \n    updated_instance.save()\n    for song_data in songs:\n        s = Song(**song_data)\n        s.save()\n        updated_instance.suggested_songs.add(s)\n</code></pre>\n\n<p>But I've noticed that when trying to update the data duplicates of songs occur as opposed to editing the existing ones. </p>\n\n<p>I figured one method would to clear \"suggested_songs\" before add new ones, but ideally I would to edit the existing data correctly, how can I achieve this?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>My second attempt which doesn't work unless I specify the ID:</p>\n\n<pre><code>def update(self, instance, validated_data):\n    suggested_songs_data = validated_data.pop('suggested_songs')\n    updated_instance = super(MessagesSerializer, self).update(instance, validated_data)\n    updated_instance.save()\n    for song_data in suggested_songs_data:\n        #songID = song_data.pop('id') # Grabbing the song ID so that we can check if the ID already exists. \n        #print(songID)\n        s = Song(**song_data)\n        print(song_data)\n        print(instance)\n        print(\"HELLO\")\n        print(suggested_songs_data)\n    # If the song already exists we want to edit  \n        print(\"+++ DEBUG ------------------------- DEBUG +++\")\n        s.id = '20'\n        print(s.id)\n        print(s.title)\n        if Song.objects.filter(id = s.id).exists():\n            print(\"FOUND OBJECT\")\n            # If the object exists, then we should edit it. \n            foundSong = Song.objects.get(id=s.id)\n            print(foundSong.title)\n        # We should be editing song. \n            foundSong.title = s.title\n            foundSong.artist = s.artist\n            foundSong.album = s.album\n            foundSong.albumId = s.albumId\n            foundSong.num_votes = s.num_votes\n            foundSong.cleared = s.cleared\n            foundSong.save()\n        else:\n            # no object satisfying query exists, so lets create a new one. \n            s.save()\n            updated_instance.suggested_songs.add(s)\n    return updated_instance\n</code></pre>\n"}, {"tags": ["python", "python-2.7", "infinite", "getattr"], "comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 1, "creation_date": 1430951082, "post_id": 30088640, "comment_id": 48290496, "body": "<code>getattr(self, &#39;x&#39;)</code> is exactly equivalent to <code>self.x</code> - it doesn&#39;t go directly to the default attribute lookup mechanism or do anything at all different from <code>self.x</code>. You&#39;ve probably misunderstood what <code>hasattr</code> and <code>getattr</code> do."}], "answers": [{"comments": [{"owner": {"reputation": 862, "user_id": 1401328, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/028e87d9ce85ac61731deeca61c369df?s=128&d=identicon&r=PG", "display_name": "loganasherjones", "link": "https://stackoverflow.com/users/1401328/loganasherjones"}, "edited": false, "score": 0, "creation_date": 1430999764, "post_id": 30088698, "comment_id": 48312035, "body": "Thank you very much for you response. This makes sense now. Its interesting that hasattr is implemented like that, but I suppose it makes sense. I&#39;ll accept your answer and I&#39;m going to write an implementation that does work below.  Thanks!"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 4, "last_activity_date": 1430954540, "last_edit_date": 1430954540, "creation_date": 1430950855, "answer_id": 30088698, "question_id": 30088640, "link": "https://stackoverflow.com/questions/30088640/infinite-loop-using-getattr-and-getattr/30088698#30088698", "title": "Infinite loop using __getattr__ and getattr", "body": "<p><code>hasattr()</code> is implemented as a call to <code>getattr()</code> and returns <code>False</code> if an exception was raised.</p>\n\n<p><code>__getattr__</code> is only called if your instance doesn't have the attribute; it is a fallback. Using <code>hasattr()</code> in <code>__getattr__</code> is entirely pointless.</p>\n\n<p>Since <code>f.x</code> exists, <code>Foo.__getattr__</code> is never called. <code>f.y</code> does not exist, so <code>Foo.__getattr__(f, 'y')</code> is called, which calls <code>hasattr(f, 'y')</code> which calls <code>getattr(f, 'y')</code> which calls <code>Foo.__getattr__(f, 'y')</code> because the <code>y</code> attribute doesn't exist, etc.</p>\n\n<p>From the <a href=\"https://docs.python.org/2/reference/datamodel.html#object.__getattr__\" rel=\"nofollow\"><code>object.__getatt__()</code> documentation</a>:</p>\n\n<blockquote>\n  <p>Called when an attribute lookup has not found the attribute in the usual places (i.e. it is not an instance attribute nor is it found in the class tree for self).</p>\n</blockquote>\n\n<p>and from the <a href=\"https://docs.python.org/2/library/functions.html#hasattr\" rel=\"nofollow\"><code>hasattr()</code> function documentation</a>:</p>\n\n<blockquote>\n  <p>(This is implemented by calling <code>getattr(object, name)</code> and seeing whether it raises an exception or not.)</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 862, "user_id": 1401328, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/028e87d9ce85ac61731deeca61c369df?s=128&d=identicon&r=PG", "display_name": "loganasherjones", "link": "https://stackoverflow.com/users/1401328/loganasherjones"}, "is_accepted": false, "score": 0, "last_activity_date": 1431000718, "last_edit_date": 1431000718, "creation_date": 1431000239, "answer_id": 30100557, "question_id": 30088640, "link": "https://stackoverflow.com/questions/30088640/infinite-loop-using-getattr-and-getattr/30100557#30100557", "title": "Infinite loop using __getattr__ and getattr", "body": "<p>I'm going to post a working implementation of my snake/camelCase problem that I spoke of at the beginning. Check out @Martijn's answer for an explanation as to why this works and the old one fails. </p>\n\n<pre><code>class Foo(object):\n\ndef __init__(self, x):\n  self.x = x\n\ndef __getattr__(self, name):\n  #if hasattr(self, name)     # As Martijn pointed out, this call is completely\n  #  getattr(self, name)      # useless in this context because the only reason\n                              # you are even in __getattr__ is because self\n                              # does not have the attribute. This call is what\n                              # was causing the infinite loop.\n  components = name.split('_')\n  camel_case = components[0] + \"\".join(x.title() for x in components[1:])\n  if hasattr(self, camel_case):\n    return getattr(self, camel_case)\n  else:\n    raise AttributeError, name\n</code></pre>\n"}], "owner": {"reputation": 862, "user_id": 1401328, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/028e87d9ce85ac61731deeca61c369df?s=128&d=identicon&r=PG", "display_name": "loganasherjones", "link": "https://stackoverflow.com/users/1401328/loganasherjones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1461, "favorite_count": 1, "accepted_answer_id": 30088698, "answer_count": 2, "score": 1, "last_activity_date": 1431000718, "creation_date": 1430950657, "question_id": 30088640, "link": "https://stackoverflow.com/questions/30088640/infinite-loop-using-getattr-and-getattr", "title": "Infinite loop using __getattr__ and getattr", "body": "<p>Okay, I'm having a bit of a problem and I'm not quite sure why its occurring the way that it is. What I'm trying to do is allow access to attributes on an object via snake_case or camelCase in python 2.7.X I thought that <code>__getattr__</code> was the correct way to do this, but clearly I'm mistaken and I'm not ex</p>\n\n<p>So here's my simplified implementation. In this scenario, no matter what attribute you access, I want <code>foo.x</code> to be returned. </p>\n\n<pre><code>class Foo(object):\n  def __init__(self, x):\n    self.x = x\n\n  def __getattr__(self, name):\n    if hasattr(self, name):\n      return getattr(self, name)\n    elif hasattr(self, 'x'):\n      return getattr(self, 'x')\n    else:\n      raise AttributeError, n\n</code></pre>\n\n<p>Now if I do:</p>\n\n<pre><code>f = Foo('myX')\nf.x             \n# =&gt; \"myX\"\n</code></pre>\n\n<p>However, I don't understand why:</p>\n\n<pre><code>f.y\n</code></pre>\n\n<p>Loops forever. Interestingly, when I put <code>print \"__getattr__ called with : %s\" % name</code> at the first line of the <code>__getattr__</code>, it appears that when <code>f.y</code> gets called, the <code>getattr(self, 'x')</code> line does actually get called, but then it doesn't look like getattr is ever actually called with 'x' instead, <code>__getattr__</code> still says that it is getting called with \"y.\"  </p>\n\n<p>I've been looking around, and I think it has something to do with my misunderstanding of how the <code>getattr</code> works. Any advice or documentation that you all have to point me to would be very beneficial. Thanks in advance.</p>\n"}, {"tags": ["python", "flask", "pagination", "sqlalchemy", "flask-sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 2168, "user_id": 2990084, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/95161cd0df9535c6ca69dad655e0b194?s=128&d=identicon&r=PG&f=1", "display_name": "user2990084", "link": "https://stackoverflow.com/users/2990084/user2990084"}, "edited": false, "score": 0, "creation_date": 1430953119, "post_id": 30088910, "comment_id": 48291206, "body": "What do you think about this way: <a href=\"http://codepad.org/rIasrULq\" rel=\"nofollow noreferrer\">codepad.org/rIasrULq</a> I think that will work"}], "tags": [], "owner": {"reputation": 4979, "user_id": 2676531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc88aa76113d738e11685389a1409a26?s=128&d=identicon&r=PG", "display_name": "Celeo", "link": "https://stackoverflow.com/users/2676531/celeo"}, "is_accepted": false, "score": 1, "last_activity_date": 1430951890, "creation_date": 1430951890, "answer_id": 30088910, "question_id": 30088630, "link": "https://stackoverflow.com/questions/30088630/find-page-for-a-specific-item-in-paginate-sqlalchemy/30088910#30088910", "title": "Find page for a specific item in paginate() SQLAlchemy", "body": "<p>From <a href=\"https://pythonhosted.org/Flask-SQLAlchemy/api.html#flask.ext.sqlalchemy.Pagination\" rel=\"nofollow\">the docs</a>, the <code>Pagination</code> class has <code>.items</code> and <code>.has_next</code> properties and a <code>.next</code> method we can use:</p>\n\n<pre><code>page_number = 0\nsearch = Comment.query.get(15)\nquery = Comment.query.filter(Comment.id&lt;40)\nfor num in range(1, query.paginate(1).pages + 1):\n    if search in query.paginate(num).items:\n        page_number = num\n        break\n</code></pre>\n\n<p>or</p>\n\n<pre><code>page_number = 0\nsearch = Comment.query.get(15)\npag = Comment.query.filter(Comment.id&lt;40).paginate(1)\nwhile pag.has_next:\n    if search in pag.items:\n        page_number = num\n        break\n    pag.next()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 10421110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-nIJqz-yedkw/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUsDQ2G-mHzHEkXGYKzT6gjsv8xcw/mo/photo.jpg?sz=128", "display_name": "ClassY", "link": "https://stackoverflow.com/users/10421110/classy"}, "is_accepted": false, "score": 0, "last_activity_date": 1588349097, "last_edit_date": 1588349097, "creation_date": 1583690683, "answer_id": 60590509, "question_id": 30088630, "link": "https://stackoverflow.com/questions/30088630/find-page-for-a-specific-item-in-paginate-sqlalchemy/60590509#60590509", "title": "Find page for a specific item in paginate() SQLAlchemy", "body": "<p>As far as I know, Celeo's answer won't work. For example, what <code>pag.next()</code> does in his code, based on documentations is:</p>\n\n<blockquote>\n  <p>Returns a Pagination object for the next page.</p>\n</blockquote>\n\n<p>So, basically, it's doing nothing unless you update your variable; and I recommend you to not create a new query since you already have the comment_id so:</p>\n\n<pre><code>comment_id=request.args.get('comment_id')\nif comment_id and comment_id.isdigit():\n            comment_id = int(comment_id )\n            page_number = -1\n            index = 1 # page numbers are 1 indexed in Pagination Object\n            while comments_pagination_object.has_next:\n                for comment in comments_pagination_object.items:\n                    if comment.id == comment_id :\n                        page_number = index\n                        break\n                if page_number != -1:\n                    break\n                index += 1\n                product_items = product_items.next()\n</code></pre>\n\n<p>Then, in the URL, you will have something like:</p>\n\n<pre><code>/comments?comment_id=2\n</code></pre>\n\n<p>and the part <code>product_items.next()</code> is changing the PaginationObject's page till one of it's items (which in this case is a type of <code>class Comment</code>) has the same id as your request args.</p>\n"}], "owner": {"reputation": 2168, "user_id": 2990084, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/95161cd0df9535c6ca69dad655e0b194?s=128&d=identicon&r=PG&f=1", "display_name": "user2990084", "link": "https://stackoverflow.com/users/2990084/user2990084"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 872, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1588349097, "creation_date": 1430950611, "last_edit_date": 1430950954, "question_id": 30088630, "link": "https://stackoverflow.com/questions/30088630/find-page-for-a-specific-item-in-paginate-sqlalchemy", "title": "Find page for a specific item in paginate() SQLAlchemy", "body": "<p>I am usign Flask-SQLAlchemy\u2019s <code>paginate()</code>. Now I need to find what is the page for a specific comment id.</p>\n\n<p>For example, this will work, if I have all comments in the same page:</p>\n\n<pre><code>new_dict['url'] = '/comments#comment_' + str(comment.id)\n</code></pre>\n\n<p>However in my case I need this structure:</p>\n\n<pre><code>/comments?page=1#comment_73\n</code></pre>\n\n<p>How can I find what is the page?</p>\n"}, {"tags": ["python", "pandas", "row", "names"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1430949988, "post_id": 30088432, "comment_id": 48290046, "body": "Are the column name lengths always 3 characters long?"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1430950312, "post_id": 30088432, "comment_id": 48290187, "body": "For instance is <code>df.append(dict(zip(df.columns, [col[1] for col in df])), ignore_index=True)</code> what you want?"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1431017007, "post_id": 30088432, "comment_id": 48325235, "body": "If my answer answered your question could you accept it, there will be an empty tick mark at the top left of my answer, thanks"}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 4586306, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0f4f34fd3040a58ae5c56b8db5598e5c?s=128&d=identicon&r=PG&f=1", "display_name": "akaras222", "link": "https://stackoverflow.com/users/4586306/akaras222"}, "edited": false, "score": 0, "creation_date": 1430951600, "post_id": 30088659, "comment_id": 48290688, "body": "Yes that works great!!!  though is there a way for me to specify which parts of the column name string I want, each of my actual column names are longer than in the example and I want to make a new string composed of pieces of the column name like : columname[0][6:7]+columname[0][7:11]+columname[0][24:25] = new columnname to be appended to each row entry"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "reply_to_user": {"reputation": 81, "user_id": 4586306, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0f4f34fd3040a58ae5c56b8db5598e5c?s=128&d=identicon&r=PG&f=1", "display_name": "akaras222", "link": "https://stackoverflow.com/users/4586306/akaras222"}, "edited": false, "score": 0, "creation_date": 1430951855, "post_id": 30088659, "comment_id": 48290773, "body": "You just edit the list comprehension but you need to be careful that you don&#39;t index out of range but yes that would still work: <code>df.append(dict(zip(df.columns, [col[0]+col[6:7] +col[0]+col[7:11] +col[0]+col[24:25] for col in df])), ignore_index=True)</code>"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "reply_to_user": {"reputation": 81, "user_id": 4586306, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0f4f34fd3040a58ae5c56b8db5598e5c?s=128&d=identicon&r=PG&f=1", "display_name": "akaras222", "link": "https://stackoverflow.com/users/4586306/akaras222"}, "edited": false, "score": 0, "creation_date": 1430975573, "post_id": 30088659, "comment_id": 48297397, "body": "Please accept my answer if it answered your question, there will be an empty tick mark to the top left of my answer"}], "tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": false, "score": 3, "last_activity_date": 1430950736, "creation_date": 1430950736, "answer_id": 30088659, "question_id": 30088432, "link": "https://stackoverflow.com/questions/30088432/python-create-new-row-based-on-column-names-in-dataframe/30088659#30088659", "title": "Python: create new row based on column names in DataFrame", "body": "<p>I'm assuming this is what you want as you've not responded, we can <code>append</code> a new row by creating a dict from zipping the df columns and a list comprehension of the middle character (assuming that column name lengths are 3):</p>\n\n<pre><code>In [126]:\n\ndf.append(dict(zip(df.columns, [col[1] for col in df])), ignore_index=True)\nOut[126]:\n          abx         bbx        cbx        acx         bcx\n0   -0.373421  -0.1005462 -0.8280985 -0.1593167    1.335307\n1    1.324328  -0.6189612  -0.743703  0.9419248    1.282682\n2   0.3730312 -0.06697892   1.113707 -0.9691056    1.779643\n3  -0.6644958    1.379606 -0.3751724  -1.135034   0.3287292\n4   0.4406139  -0.5767996 -0.2267589  -1.384412 -0.03038372\n5   -1.242734   -0.838923 -0.6724592   1.405247  -0.3716862\n6   -1.682637    -1.69309  -1.291833   1.781704   0.6321988\n7  -0.5793783  -0.6809975    1.03502 -0.6498381   -1.124236\n8    1.589016    1.272961  -1.968225  0.5515182   0.3058628\n9   -2.275342    2.892237   2.076253 -0.1422845 -0.09776171\n10          b           b          b          c           c\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 379, "user_id": 5438657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ddfcbebfecefed4c2d4c1c5077c464da?s=128&d=identicon&r=PG&f=1", "display_name": "the curious mind", "link": "https://stackoverflow.com/users/5438657/the-curious-mind"}, "is_accepted": false, "score": 0, "last_activity_date": 1544039917, "last_edit_date": 1544039917, "creation_date": 1446338142, "answer_id": 33458076, "question_id": 30088432, "link": "https://stackoverflow.com/questions/30088432/python-create-new-row-based-on-column-names-in-dataframe/33458076#33458076", "title": "Python: create new row based on column names in DataFrame", "body": "<p><strong>ix</strong> --- lets you read the entire row-- you just say which ever row you want. \nthen you get your columns and assign them to the raw you want. </p>\n\n<p>See the example below. </p>\n\n<pre><code>virData = DataFrame(df)\n\nvirData.columns = virData.ix[1].values\n\nvirData.columns\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 4586306, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0f4f34fd3040a58ae5c56b8db5598e5c?s=128&d=identicon&r=PG&f=1", "display_name": "akaras222", "link": "https://stackoverflow.com/users/4586306/akaras222"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3720, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1544039917, "creation_date": 1430949790, "last_edit_date": 1430950355, "question_id": 30088432, "link": "https://stackoverflow.com/questions/30088432/python-create-new-row-based-on-column-names-in-dataframe", "title": "Python: create new row based on column names in DataFrame", "body": "<p>I would like to know how to make a new row based on the column names row in a python dataframe, and append it to the same dataframe.</p>\n\n<p>example</p>\n\n<pre><code>df = pd.DataFrame(np.random.randn(10, 5),columns=['abx', 'bbx', 'cbx', 'acx', 'bcx'])\n</code></pre>\n\n<p>I want to create a new row based on the column names that gives: \n <code>b |  b  |  b | c  | c |</code>by taking the middle char of the column name.</p>\n\n<p>the idea is to use that new row, later, for multi-indexing the columns.</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 892, "user_id": 4848447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ga5L4.jpg?s=128&g=1", "display_name": "CiscoKidx", "link": "https://stackoverflow.com/users/4848447/ciscokidx"}, "edited": false, "score": 1, "creation_date": 1431016864, "post_id": 30088495, "comment_id": 48325140, "body": "It&#39;s important to point out that -i must immediately follow python. It cannot be after the script name."}], "tags": [], "owner": {"reputation": 8679, "user_id": 181337, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/471b3ac93ac8da3a68c8dd72c9225fcd?s=128&d=identicon&r=PG", "display_name": "Facundo Casco", "link": "https://stackoverflow.com/users/181337/facundo-casco"}, "is_accepted": true, "score": 7, "last_activity_date": 1430950021, "creation_date": 1430950021, "answer_id": 30088495, "question_id": 30088390, "link": "https://stackoverflow.com/questions/30088390/how-to-load-python-script-in-interactive-shell/30088495#30088495", "title": "how to load python script in interactive shell", "body": "<p>From the docs:</p>\n\n<pre><code>$ python --help\nusage: /usr/bin/python2.7 [option] ... [-c cmd | -m mod | file | -] [arg] ...\nOptions and arguments (and corresponding environment variables):\n-B     : don't write .py[co] files on import; also PYTHONDONTWRITEBYTECODE=x\n-c cmd : program passed in as string (terminates option list)\n-d     : debug output from parser; also PYTHONDEBUG=x\n-E     : ignore PYTHON* environment variables (such as PYTHONPATH)\n-h     : print this help message and exit (also --help)\n-i     : inspect interactively after running script; forces a prompt even\n         if stdin does not appear to be a terminal; also PYTHONINSPECT=x\n</code></pre>\n\n<p>use <code>-i</code> option</p>\n"}], "owner": {"reputation": 892, "user_id": 4848447, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Ga5L4.jpg?s=128&g=1", "display_name": "CiscoKidx", "link": "https://stackoverflow.com/users/4848447/ciscokidx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 0, "accepted_answer_id": 30088495, "answer_count": 1, "score": 2, "last_activity_date": 1430971152, "creation_date": 1430949628, "question_id": 30088390, "link": "https://stackoverflow.com/questions/30088390/how-to-load-python-script-in-interactive-shell", "title": "how to load python script in interactive shell", "body": "<p>I am trying <code>sudo python get_gps.py -c</code> and expecting it to load the script and then present the interactive shell to debug the script live as opposed to typing it in manually.</p>\n"}, {"tags": ["python", "list", "element"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4872507, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A6M2yqhFeQo/AAAAAAAAAAI/AAAAAAAAArM/YEZmTwHAkwI/photo.jpg?sz=128", "display_name": "kangshimeng", "link": "https://stackoverflow.com/users/4872507/kangshimeng"}, "edited": false, "score": 0, "creation_date": 1430950104, "post_id": 30088470, "comment_id": 48290091, "body": "Ok cool. That brings me closer.  However, if I add an else statement along the lines of &quot;You do not have 4 of a kind&quot; it will trigger that for every value that I do not have 4 of a kind for. So, now i have all my 4&#39;s in &quot;discard&quot; but it is also printing &quot;Do not have 4 of a kind&quot; 5 times. What should I put in my else statement? What I want is IF there is 4 of a kind then I want those values appended, and if there is not then I want the else statement triggered"}, {"owner": {"reputation": 3, "user_id": 4872507, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A6M2yqhFeQo/AAAAAAAAAAI/AAAAAAAAArM/YEZmTwHAkwI/photo.jpg?sz=128", "display_name": "kangshimeng", "link": "https://stackoverflow.com/users/4872507/kangshimeng"}, "edited": false, "score": 0, "creation_date": 1430950239, "post_id": 30088470, "comment_id": 48290154, "body": "Should I not do a for-loop then and just stick to an if-statement?"}, {"owner": {"reputation": 3, "user_id": 4872507, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A6M2yqhFeQo/AAAAAAAAAAI/AAAAAAAAArM/YEZmTwHAkwI/photo.jpg?sz=128", "display_name": "kangshimeng", "link": "https://stackoverflow.com/users/4872507/kangshimeng"}, "edited": false, "score": 0, "creation_date": 1430950799, "post_id": 30088470, "comment_id": 48290380, "body": "The thing is that I do not want it to say if I have 4 of a kind for each number. I just want it to look at my list. See if I have 4 of a kind of any of the distinct elements in it. If there are then I want to append those 4 of a kind to discard. If there isnt then I want it to continue reading the code below. It might help to know that I am practicing programming by coding the Go-Fish card game."}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "reply_to_user": {"reputation": 3, "user_id": 4872507, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A6M2yqhFeQo/AAAAAAAAAAI/AAAAAAAAArM/YEZmTwHAkwI/photo.jpg?sz=128", "display_name": "kangshimeng", "link": "https://stackoverflow.com/users/4872507/kangshimeng"}, "edited": false, "score": 0, "creation_date": 1430950870, "post_id": 30088470, "comment_id": 48290415, "body": "Then just remove the <code>else</code> part, and the code will do exactly what you want! :)"}, {"owner": {"reputation": 3, "user_id": 4872507, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A6M2yqhFeQo/AAAAAAAAAAI/AAAAAAAAArM/YEZmTwHAkwI/photo.jpg?sz=128", "display_name": "kangshimeng", "link": "https://stackoverflow.com/users/4872507/kangshimeng"}, "edited": false, "score": 0, "creation_date": 1430951018, "post_id": 30088470, "comment_id": 48290466, "body": "Awesome. Thank you. I was under the impression that every if-statement must have an else statement."}], "tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 0, "last_activity_date": 1430950426, "last_edit_date": 1430950426, "creation_date": 1430949915, "answer_id": 30088470, "question_id": 30088361, "link": "https://stackoverflow.com/questions/30088361/moving-similar-elements-from-one-list-to-another/30088470#30088470", "title": "Moving similar elements from one list to another", "body": "<p>You are iterating over a <code>set</code>.</p>\n\n<p>Set objects does not allow multiple items, so if you have your list <code>[4,5,6,4,5,3,4,5,4]</code> , the resulting set will be <code>[3,4,5,6]</code>.\nYou are then iterating over <code>[3,4,5,6]</code>, so that's why it will only get into the <code>if</code> statement once: only when <code>i == 4</code>.</p>\n\n<p>I don't know what you intend to do there, but if you wish to append all four elements from <code>human_hand</code> into <code>discard</code>, an easier way would be not to iterate over the set:</p>\n\n<pre><code>for i in human_hand:\n    if human_hand.count(i) == 4:\n        discard.append(i)\n</code></pre>\n\n<h3>Edit</h3>\n\n<p>If you want to append 4 times do <code>discard</code> list, but only notice once the user if there are not 4 of the number, you can use:</p>\n\n<pre><code>for i in set(human_hand):\n    if human_hand.count(i) == 4:\n        discard.extend([i]*4)\n    else:\n        print \"There aren't 4 of a kind for the number \", i\n</code></pre>\n\n<p>That will append to discard list the list <code>[4,4,4,4]</code> but only notice once if there are no 4 items of other numbers.</p>\n"}, {"tags": [], "owner": {"reputation": 1452, "user_id": 467427, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YIze7.jpg?s=128&g=1", "display_name": "Adam Ashwal", "link": "https://stackoverflow.com/users/467427/adam-ashwal"}, "is_accepted": false, "score": 0, "last_activity_date": 1430949962, "creation_date": 1430949962, "answer_id": 30088481, "question_id": 30088361, "link": "https://stackoverflow.com/questions/30088361/moving-similar-elements-from-one-list-to-another/30088481#30088481", "title": "Moving similar elements from one list to another", "body": "<p>When calling <code>for i in set(human_hand)</code>you are iterating over a set, so each number is only represented once. If you want to append each time 4 appears in the original, simply iterate over <code>for i in human_hand</code></p>\n"}], "owner": {"reputation": 3, "user_id": 4872507, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A6M2yqhFeQo/AAAAAAAAAAI/AAAAAAAAArM/YEZmTwHAkwI/photo.jpg?sz=128", "display_name": "kangshimeng", "link": "https://stackoverflow.com/users/4872507/kangshimeng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 30088470, "answer_count": 2, "score": 0, "last_activity_date": 1430951569, "creation_date": 1430949500, "last_edit_date": 1430951569, "question_id": 30088361, "link": "https://stackoverflow.com/questions/30088361/moving-similar-elements-from-one-list-to-another", "title": "Moving similar elements from one list to another", "body": "<p>In short, I am trying to detect if there are 4 of a kind of one element in a list and then move all 4 of those elements to another list. So far I have:</p>\n\n<pre><code>human_hand = [4,5,6,4,5,3,4,5,4]\ndiscard = [] \n\n\nfor i in set(human_hand):\n    if human_hand.count(i) == 4:\n        discard.append(i)\n\nprint discard\n</code></pre>\n\n<p>However, my issue is that once the first one gets appended the boolean is not triggered any longer. New to python and stumped. I also realize I do not have an else statement right now. </p>\n"}, {"tags": ["python", "ubuntu", "virtualbox", "kerberos"], "answers": [{"comments": [{"owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "edited": false, "score": 0, "creation_date": 1430961962, "post_id": 30090348, "comment_id": 48293610, "body": "Please don&#39;t make a link-only answer - copy the relevant snippets into your own answer."}, {"owner": {"reputation": 183, "user_id": 2835701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c477c32efaece114a37c27018f0eb2ad?s=128&d=identicon&r=PG", "display_name": "Mike McCoy", "link": "https://stackoverflow.com/users/2835701/mike-mccoy"}, "edited": false, "score": 0, "creation_date": 1431470323, "post_id": 30090348, "comment_id": 48510750, "body": "I didn&#39;t need (and <code>apt-get</code> couldn&#39;t find) the final module <code>libsasl2-modules-gssapi-mit</code>. Otherwise, these dependencies solved my problem."}], "tags": [], "owner": {"reputation": 777, "user_id": 1234419, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/44b28a82e9785233801ad999b57770a2?s=128&d=identicon&r=PG", "display_name": "Vaibhav Chauhan", "link": "https://stackoverflow.com/users/1234419/vaibhav-chauhan"}, "is_accepted": false, "score": 6, "last_activity_date": 1431037528, "last_edit_date": 1431037528, "creation_date": 1430961670, "answer_id": 30090348, "question_id": 30088355, "link": "https://stackoverflow.com/questions/30088355/kerberos-installation-error-error-setup-script-exited-with-error-command-i68/30090348#30090348", "title": "Kerberos installation error, error: Setup script exited with error: command &#39;i686-linux-gnu-gcc&#39; failed with exit status 1", "body": "<p>I had to install a few pre-reqs</p>\n\n<pre><code>krb5-config\nlibkrb5-dev\nlibssl-dev\nlibsasl2-dev\nlibsasl2-modules-gssapi-mit\n</code></pre>\n\n<p>Credit: Sonal and Romain,\nplease follow the link below, to get all information.\n<a href=\"https://groups.google.com/a/cloudera.org/forum/#!topic/hue-user/6pXQWH9OSO4\" rel=\"noreferrer\">https://groups.google.com/a/cloudera.org/forum/#!topic/hue-user/6pXQWH9OSO4</a></p>\n"}, {"comments": [{"owner": {"reputation": 777, "user_id": 1234419, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/44b28a82e9785233801ad999b57770a2?s=128&d=identicon&r=PG", "display_name": "Vaibhav Chauhan", "link": "https://stackoverflow.com/users/1234419/vaibhav-chauhan"}, "edited": false, "score": 0, "creation_date": 1430962712, "post_id": 30090400, "comment_id": 48293789, "body": "re-factored the answer looks like I was missing a few dependencies."}], "tags": [], "owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "is_accepted": true, "score": 18, "last_activity_date": 1430962049, "creation_date": 1430962049, "answer_id": 30090400, "question_id": 30088355, "link": "https://stackoverflow.com/questions/30088355/kerberos-installation-error-error-setup-script-exited-with-error-command-i68/30090400#30090400", "title": "Kerberos installation error, error: Setup script exited with error: command &#39;i686-linux-gnu-gcc&#39; failed with exit status 1", "body": "<p>Based on the output here:</p>\n\n<pre><code>i686-linux-gnu-gcc: error: sh:: No such file or directory\ni686-linux-gnu-gcc: error: 1:: No such file or directory\ni686-linux-gnu-gcc: error: krb5-config:: No such file or directory\ni686-linux-gnu-gcc: error: not: No such file or directory\ni686-linux-gnu-gcc: error: found: No such file or directory\n</code></pre>\n\n<p>it looks like you're missing <code>krb5-config</code>. You can install it from the <code>libkrb5-dev</code> package in Ubuntu or Debian.</p>\n"}, {"comments": [{"owner": {"reputation": 377, "user_id": 613024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tj3gR.jpg?s=128&g=1", "display_name": "Andrei Draganescu", "link": "https://stackoverflow.com/users/613024/andrei-draganescu"}, "edited": false, "score": 0, "creation_date": 1608465293, "post_id": 54167543, "comment_id": 115587098, "body": ".Thank you! I wanted to add that one may find themselves in this position following an <code>apt-get autoremove</code> that was a bit too zealous."}], "tags": [], "owner": {"reputation": 5486, "user_id": 4181509, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/HQDxN.jpg?s=128&g=1", "display_name": "Yuval Pruss", "link": "https://stackoverflow.com/users/4181509/yuval-pruss"}, "is_accepted": false, "score": 8, "last_activity_date": 1547371604, "creation_date": 1547371604, "answer_id": 54167543, "question_id": 30088355, "link": "https://stackoverflow.com/questions/30088355/kerberos-installation-error-error-setup-script-exited-with-error-command-i68/54167543#54167543", "title": "Kerberos installation error, error: Setup script exited with error: command &#39;i686-linux-gnu-gcc&#39; failed with exit status 1", "body": "<p>Just install the package (Ubuntu):</p>\n\n<pre><code>apt-get install libkrb5-dev\n</code></pre>\n\n<p>Short and sweet.</p>\n"}, {"tags": [], "owner": {"reputation": 17205, "user_id": 1004046, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/69274ae3dbbe8030e2ee21b1e35b0dfb?s=128&d=identicon&r=PG", "display_name": "Pigueiras", "link": "https://stackoverflow.com/users/1004046/pigueiras"}, "is_accepted": false, "score": 0, "last_activity_date": 1616065220, "creation_date": 1616065220, "answer_id": 66689734, "question_id": 30088355, "link": "https://stackoverflow.com/questions/30088355/kerberos-installation-error-error-setup-script-exited-with-error-command-i68/66689734#66689734", "title": "Kerberos installation error, error: Setup script exited with error: command &#39;i686-linux-gnu-gcc&#39; failed with exit status 1", "body": "<p>If you are using RHEL8 you need to install <code>krb5-devel</code></p>\n<pre><code>sudo dnf install krb5-devel\n</code></pre>\n<p>which provides <code>krb5-config</code>.</p>\n"}], "owner": {"reputation": 777, "user_id": 1234419, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/44b28a82e9785233801ad999b57770a2?s=128&d=identicon&r=PG", "display_name": "Vaibhav Chauhan", "link": "https://stackoverflow.com/users/1234419/vaibhav-chauhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14155, "favorite_count": 0, "accepted_answer_id": 30090400, "answer_count": 4, "score": 10, "last_activity_date": 1616065220, "creation_date": 1430949474, "last_edit_date": 1430949564, "question_id": 30088355, "link": "https://stackoverflow.com/questions/30088355/kerberos-installation-error-error-setup-script-exited-with-error-command-i68", "title": "Kerberos installation error, error: Setup script exited with error: command &#39;i686-linux-gnu-gcc&#39; failed with exit status 1", "body": "<p>I am trying to install python kerbos library, setup.py fails with following. I have already done sudo apt-get update and sudo apt-get install python-dev(in that order). Here is the complete trackback of the process. </p>\n\n<pre><code>vaibhav@vaibhav-UCVN:~/Downloads/requests-kerberos-master$ sudo ./setup.py install\nrunning install\nrunning bdist_egg\nrunning egg_info\nwriting requirements to requests_kerberos.egg-info/requires.txt\nwriting requests_kerberos.egg-info/PKG-INFO\nwriting top-level names to requests_kerberos.egg-info/top_level.txt\nwriting dependency_links to requests_kerberos.egg-info/dependency_links.txt\nreading manifest file 'requests_kerberos.egg-info/SOURCES.txt'\nreading manifest template 'MANIFEST.in'\nwriting manifest file 'requests_kerberos.egg-info/SOURCES.txt'\ninstalling library code to build/bdist.linux-i686/egg\nrunning install_lib\nrunning build_py\ncreating build/bdist.linux-i686/egg\ncreating build/bdist.linux-i686/egg/requests_kerberos\ncopying build/lib.linux-i686-2.7/requests_kerberos/compat.py -&gt; build/bdist.linux-i686/egg/requests_kerberos\ncopying build/lib.linux-i686-2.7/requests_kerberos/__init__.py -&gt; build/bdist.linux-i686/egg/requests_kerberos\ncopying build/lib.linux-i686-2.7/requests_kerberos/exceptions.py -&gt; build/bdist.linux-i686/egg/requests_kerberos\ncopying build/lib.linux-i686-2.7/requests_kerberos/kerberos_.py -&gt; build/bdist.linux-i686/egg/requests_kerberos\nbyte-compiling build/bdist.linux-i686/egg/requests_kerberos/compat.py to compat.pyc\nbyte-compiling build/bdist.linux-i686/egg/requests_kerberos/__init__.py to __init__.pyc\nbyte-compiling build/bdist.linux-i686/egg/requests_kerberos/exceptions.py to exceptions.pyc\nbyte-compiling build/bdist.linux-i686/egg/requests_kerberos/kerberos_.py to kerberos_.pyc\ncreating build/bdist.linux-i686/egg/EGG-INFO\ncopying requests_kerberos.egg-info/PKG-INFO -&gt; build/bdist.linux-i686/egg/EGG-INFO\ncopying requests_kerberos.egg-info/SOURCES.txt -&gt; build/bdist.linux-i686/egg/EGG-INFO\ncopying requests_kerberos.egg-info/dependency_links.txt -&gt; build/bdist.linux-i686/egg/EGG-INFO\ncopying requests_kerberos.egg-info/requires.txt -&gt; build/bdist.linux-i686/egg/EGG-INFO\ncopying requests_kerberos.egg-info/top_level.txt -&gt; build/bdist.linux-i686/egg/EGG-INFO\nzip_safe flag not set; analyzing archive contents...\ncreating 'dist/requests_kerberos-0.7.0-py2.7.egg' and adding 'build/bdist.linux-i686/egg' to it\nremoving 'build/bdist.linux-i686/egg' (and everything under it)\nProcessing requests_kerberos-0.7.0-py2.7.egg\nRemoving /usr/local/lib/python2.7/dist-packages/requests_kerberos-0.7.0-py2.7.egg\nCopying requests_kerberos-0.7.0-py2.7.egg to /usr/local/lib/python2.7/dist-packages\nrequests-kerberos 0.7.0 is already the active version in easy-install.pth\n\nInstalled /usr/local/lib/python2.7/dist-packages/requests_kerberos-0.7.0-py2.7.egg\nProcessing dependencies for requests-kerberos==0.7.0\nSearching for kerberos==1.1.1\nReading https://pypi.python.org/simple/kerberos/\nBest match: kerberos 1.1.1\nDownloading https://pypi.python.org/packages/source/k/kerberos/kerberos-1.1.1.tar.gz#md5=09ff604748b8c32dc9698e714f32b8a5\nProcessing kerberos-1.1.1.tar.gz\nWriting /tmp/easy_install-CEXP8g/kerberos-1.1.1/setup.cfg\nRunning kerberos-1.1.1/setup.py -q bdist_egg --dist-dir /tmp/easy_install-CEXP8g/kerberos-1.1.1/egg-dist-tmp-snGH08\ni686-linux-gnu-gcc: error: sh:: No such file or directory\ni686-linux-gnu-gcc: error: 1:: No such file or directory\ni686-linux-gnu-gcc: error: krb5-config:: No such file or directory\ni686-linux-gnu-gcc: error: not: No such file or directory\ni686-linux-gnu-gcc: error: found: No such file or directory\nerror: Setup script exited with error: command 'i686-linux-gnu-gcc' failed with exit status 1\n</code></pre>\n"}, {"tags": ["python", "psycopg2"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 0, "creation_date": 1430949326, "post_id": 30088254, "comment_id": 48289708, "body": "What version of Psycopg2 is this?"}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 170485, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/KR6N8.jpg?s=128&g=1", "display_name": "Timothy Grant", "link": "https://stackoverflow.com/users/170485/timothy-grant"}, "edited": false, "score": 0, "creation_date": 1431008851, "post_id": 30088336, "comment_id": 48319176, "body": "Thank you so very very much!"}], "tags": [], "owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "is_accepted": true, "score": 3, "last_activity_date": 1430949411, "creation_date": 1430949411, "answer_id": 30088336, "question_id": 30088254, "link": "https://stackoverflow.com/questions/30088254/python-thinks-that-psycopg2-dictrow-is-list-at-least-thats-what-it-looks-like/30088336#30088336", "title": "Python thinks that psycopg2 DictRow is list (At least that&#39;s what it looks like)", "body": "<p>The <code>DictRow</code> class is a subclass of <code>list</code>, and <a href=\"https://github.com/psycopg/psycopg2/commit/0ad7483a2bff6dd76843b31aa592877d96d6ea39\" rel=\"nofollow\">until version 2.3.0</a> you could not use it to assign to elements by name.</p>\n\n<p>You can work around this by looking up the column index directly:</p>\n\n<pre><code>title[title._index['name']] = foo\n</code></pre>\n\n<p>or, for your augmented assignment:</p>\n\n<pre><code>title[title._index['name']] += 'x'\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 170485, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/KR6N8.jpg?s=128&g=1", "display_name": "Timothy Grant", "link": "https://stackoverflow.com/users/170485/timothy-grant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1265, "favorite_count": 0, "accepted_answer_id": 30088336, "answer_count": 1, "score": 1, "last_activity_date": 1430949411, "creation_date": 1430949018, "question_id": 30088254, "link": "https://stackoverflow.com/questions/30088254/python-thinks-that-psycopg2-dictrow-is-list-at-least-thats-what-it-looks-like", "title": "Python thinks that psycopg2 DictRow is list (At least that&#39;s what it looks like)", "body": "<p>I have some code that originally looked like this (it's part of a for loop that iterates through the results of a query):</p>\n\n<pre><code>title['name'] += 'x'\n</code></pre>\n\n<p>I sometimes get the following exception (always on the same row):</p>\n\n<pre><code>&lt;class 'psycopg2.extras.DictRow'&gt;\nTraceback (most recent call last):\n  File \"rtk_film_nos.py\", line 231, in &lt;module&gt;\n    main()\n  File \"rtk_film_nos.py\", line 150, in main\n    title['name'] += 'x'\nTypeError: list indices must be integers, not str\n</code></pre>\n\n<p>I changed the code to be more verbose:</p>\n\n<pre><code>foo = title['name']\nfoo += 'x'\nprint type(title)\ntitle['name'] = foo\n</code></pre>\n\n<p>The exception changed to:</p>\n\n<pre><code>&lt;class 'psycopg2.extras.DictRow'&gt;\nTraceback (most recent call last):\n  File \"rtk_film_nos.py\", line 231, in &lt;module&gt;\n    main()\n  File \"rtk_film_nos.py\", line 150, in main\n    title['name'] = foo\nTypeError: list indices must be integers, not str\n</code></pre>\n\n<p>If I wrap the code in a try/except it will quite happily print the contents of title['name'].</p>\n\n<p>I'm at a loss as to what I'm doing wrong. It seems that for some reason python (v2.6.6) is deciding to treat the dict as a list but I have no idea why.</p>\n"}, {"tags": ["javascript", "php", "python"], "answers": [{"comments": [{"owner": {"reputation": 369, "user_id": 4725211, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/81d26c8d9e2b4b15ae67cefb05e80280?s=128&d=identicon&r=PG&f=1", "display_name": "Brammz", "link": "https://stackoverflow.com/users/4725211/brammz"}, "edited": false, "score": 0, "creation_date": 1430983466, "post_id": 30088448, "comment_id": 48301111, "body": "Would writing to and reading from a file not slow down the communication compared to maybe other solutions? It should react immediatly when there is a change."}, {"owner": {"reputation": 275, "user_id": 4821555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7QTQ.png?s=128&g=1", "display_name": "InfiniteLooper", "link": "https://stackoverflow.com/users/4821555/infinitelooper"}, "reply_to_user": {"reputation": 369, "user_id": 4725211, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/81d26c8d9e2b4b15ae67cefb05e80280?s=128&d=identicon&r=PG&f=1", "display_name": "Brammz", "link": "https://stackoverflow.com/users/4725211/brammz"}, "edited": false, "score": 0, "creation_date": 1431023969, "post_id": 30088448, "comment_id": 48329213, "body": "Have you checked the linked about sockets ? It looks like that it works. I don&#39;t know your answer but I would be interested in your solution :)"}], "tags": [], "owner": {"reputation": 275, "user_id": 4821555, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7QTQ.png?s=128&g=1", "display_name": "InfiniteLooper", "link": "https://stackoverflow.com/users/4821555/infinitelooper"}, "is_accepted": false, "score": 0, "last_activity_date": 1430949839, "creation_date": 1430949839, "answer_id": 30088448, "question_id": 30088213, "link": "https://stackoverflow.com/questions/30088213/send-to-python-script-from-php-javascript/30088448#30088448", "title": "Send to Python script from PHP/JavaScript", "body": "<p>Maybe you can write something in a file in your Rasperry Pi.</p>\n\n<p>I found this on the Web : <a href=\"http://jj09.net/interprocess-communication-python-java/\" rel=\"nofollow\">interprocess python/java</a></p>\n"}, {"tags": [], "owner": {"reputation": 369, "user_id": 4725211, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/81d26c8d9e2b4b15ae67cefb05e80280?s=128&d=identicon&r=PG&f=1", "display_name": "Brammz", "link": "https://stackoverflow.com/users/4725211/brammz"}, "is_accepted": true, "score": 1, "last_activity_date": 1432114923, "creation_date": 1432114923, "answer_id": 30345991, "question_id": 30088213, "link": "https://stackoverflow.com/questions/30088213/send-to-python-script-from-php-javascript/30345991#30345991", "title": "Send to Python script from PHP/JavaScript", "body": "<p>I solved it using Flask, a Python framework.</p>\n\n<p>Instead of the console.log(), it is now an ajax-function that calls a method in the Python code, where the serial port can stay open.</p>\n\n<pre><code>$.ajax({\n    url: \"{{ url_for('move') }}\", // This is Flask code that call a Python function\n    method: \"POST\",\n    data: {\n        move: currentMove\n    },\n    success: function() {\n        console.log('move: ' + currentMove);\n    }\n});\n</code></pre>\n"}], "owner": {"reputation": 369, "user_id": 4725211, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/81d26c8d9e2b4b15ae67cefb05e80280?s=128&d=identicon&r=PG&f=1", "display_name": "Brammz", "link": "https://stackoverflow.com/users/4725211/brammz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 30345991, "answer_count": 2, "score": 0, "last_activity_date": 1432898846, "creation_date": 1430948839, "last_edit_date": 1432898846, "question_id": 30088213, "link": "https://stackoverflow.com/questions/30088213/send-to-python-script-from-php-javascript", "title": "Send to Python script from PHP/JavaScript", "body": "<p>I'm working on a project where I send data to an Arduino from an Apache running on a Raspberry Pi.</p>\n\n<p>Sending data to the Arduino requires the Raspberry Pi to execute a Python script.</p>\n\n<p>The controls are detected and acted upon in JavaScript.</p>\n\n<p>I have found several ways to start the Python script from the JavaScript code. However, I can't find how I can then send data to the Python script from the JavaScript code so that the Python code can send data to the Arduino.</p>\n\n<p>Any help is appreciated!</p>\n"}, {"tags": ["python", "input"], "comments": [{"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 2, "creation_date": 1430948797, "post_id": 30088166, "comment_id": 48289444, "body": "How are you running it?"}, {"owner": {"reputation": 45741, "user_id": 744178, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3193139ea494c45e63752504f5ff1f2?s=128&d=identicon&r=PG", "display_name": "jwodder", "link": "https://stackoverflow.com/users/744178/jwodder"}, "edited": false, "score": 0, "creation_date": 1430948818, "post_id": 30088166, "comment_id": 48289449, "body": "How are you running this code?  It looks like standard input is closed immediately."}, {"owner": {"reputation": 15387, "user_id": 2588818, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/0PpNx.jpg?s=128&g=1", "display_name": "Two-Bit Alchemist", "link": "https://stackoverflow.com/users/2588818/two-bit-alchemist"}, "edited": false, "score": 6, "creation_date": 1430948999, "post_id": 30088166, "comment_id": 48289554, "body": "You think you are using Python 3 but you are not. This error happens when you use Python 2 because <code>input</code> automatically tries to <code>eval</code> whatever you give it, so if you hit return it gets nothing and produces <code>EOFError</code>. Everyone I tell this to swears they are really using Python 3, but I&#39;m always right. You can prove it to yourself by calling <code>raw_input</code> instead. This will fix your problem if you are really on Python 2, but cause <code>NameError</code> on Python 3. :)"}, {"owner": {"reputation": 24609, "user_id": 1974224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/rQQMq.png?s=128&g=1", "display_name": "Cristik", "link": "https://stackoverflow.com/users/1974224/cristik"}, "edited": false, "score": 0, "creation_date": 1430949090, "post_id": 30088166, "comment_id": 48289604, "body": "Are you using an IDE when running the script, or are you launching it via a shell?"}, {"owner": {"reputation": 241, "user_id": 4872437, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PGxTz.png?s=128&g=1", "display_name": "Brady W", "link": "https://stackoverflow.com/users/4872437/brady-w"}, "edited": false, "score": 0, "creation_date": 1430949229, "post_id": 30088166, "comment_id": 48289667, "body": "I figured out the error. When I was working on this project at school I didn&#39;t have a python IDE, so I had to use an online one. I fixed that error, but I need help with another error:"}, {"owner": {"reputation": 241, "user_id": 4872437, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PGxTz.png?s=128&g=1", "display_name": "Brady W", "link": "https://stackoverflow.com/users/4872437/brady-w"}, "edited": false, "score": 0, "creation_date": 1430949287, "post_id": 30088166, "comment_id": 48289691, "body": "Traceback (most recent call last):   File &quot;C:/Users/Brady/Desktop/Python Programs/Calorie Calculator.py&quot;, line 52, in &lt;module&gt;     answer = calories / (weight * exercise) TypeError: can&#39;t multiply sequence by non-int of type &#39;str&#39;"}, {"owner": {"reputation": 241, "user_id": 4872437, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PGxTz.png?s=128&g=1", "display_name": "Brady W", "link": "https://stackoverflow.com/users/4872437/brady-w"}, "edited": false, "score": 0, "creation_date": 1430949320, "post_id": 30088166, "comment_id": 48289707, "body": "I removed the part of the code that changes the calories and weight to 0 if they were 0"}, {"owner": {"reputation": 3248, "user_id": 24198, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4b80409214c6edebc65dc6975e3d38d8?s=128&d=identicon&r=PG", "display_name": "Fuu", "link": "https://stackoverflow.com/users/24198/fuu"}, "edited": false, "score": 0, "creation_date": 1430949846, "post_id": 30088166, "comment_id": 48289972, "body": "it&#39;s bad form to re-use variables like you do with exercise and calories. That error is probably caused by the code dropping through all if clauses without a match and not converting the variable to a number type."}, {"owner": {"reputation": 3248, "user_id": 24198, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4b80409214c6edebc65dc6975e3d38d8?s=128&d=identicon&r=PG", "display_name": "Fuu", "link": "https://stackoverflow.com/users/24198/fuu"}, "edited": false, "score": 0, "creation_date": 1430950399, "post_id": 30088166, "comment_id": 48290225, "body": "Check and make sure all variables are numbers at the point when you want to do math with them. It&#39;s more likely to be the case if the variables used for math have never been anything else than numbers."}, {"owner": {"reputation": 3248, "user_id": 24198, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4b80409214c6edebc65dc6975e3d38d8?s=128&d=identicon&r=PG", "display_name": "Fuu", "link": "https://stackoverflow.com/users/24198/fuu"}, "edited": false, "score": 0, "creation_date": 1430950613, "post_id": 30088166, "comment_id": 48290299, "body": "Also, since you figured out the answer to the original question by yourself, you should answer your own question so that this question becomes useful for those that come here because they saw the same error as you did. :)"}, {"owner": {"reputation": 241, "user_id": 4872437, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PGxTz.png?s=128&g=1", "display_name": "Brady W", "link": "https://stackoverflow.com/users/4872437/brady-w"}, "edited": false, "score": 0, "creation_date": 1430950670, "post_id": 30088166, "comment_id": 48290335, "body": "I changed all of the if statements after the first one to elifs, and put an else at the end which changes them to 1. I get this error:    Traceback (most recent call last):   File &quot;C:/Users/Brady/Desktop/Python Programs/Calorie Calculator.py&quot;, line 56, in &lt;module&gt;     answer = calories / (weight * exercise) TypeError: can&#39;t multiply sequence by non-int of type &#39;float&#39;"}, {"owner": {"reputation": 3248, "user_id": 24198, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4b80409214c6edebc65dc6975e3d38d8?s=128&d=identicon&r=PG", "display_name": "Fuu", "link": "https://stackoverflow.com/users/24198/fuu"}, "edited": false, "score": 0, "creation_date": 1430950934, "post_id": 30088166, "comment_id": 48290436, "body": "do: print(calories + &quot; / ( &quot; + weight + &quot; * &quot; + exercise + &quot;)&quot; ) to see what is a string. you can coerce variables to numbers with int() and float()"}, {"owner": {"reputation": 8679, "user_id": 181337, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/471b3ac93ac8da3a68c8dd72c9225fcd?s=128&d=identicon&r=PG", "display_name": "Facundo Casco", "link": "https://stackoverflow.com/users/181337/facundo-casco"}, "edited": false, "score": 2, "creation_date": 1430951090, "post_id": 30088166, "comment_id": 48290502, "body": "@BradyW please update the question or make a new one. That way is easier to look at the code and give you an answer"}, {"owner": {"reputation": 3248, "user_id": 24198, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4b80409214c6edebc65dc6975e3d38d8?s=128&d=identicon&r=PG", "display_name": "Fuu", "link": "https://stackoverflow.com/users/24198/fuu"}, "edited": false, "score": 0, "creation_date": 1430951281, "post_id": 30088166, "comment_id": 48290574, "body": "Because &quot;abc&quot; * 3 = &quot;abcabcabc&quot;, multiplying string with integer is valid action. However, you can&#39;t multiply &quot;abc&quot; with 1.5 (a float), thus the error that seems unintuitive."}, {"owner": {"reputation": 241, "user_id": 4872437, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PGxTz.png?s=128&g=1", "display_name": "Brady W", "link": "https://stackoverflow.com/users/4872437/brady-w"}, "reply_to_user": {"reputation": 3248, "user_id": 24198, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/4b80409214c6edebc65dc6975e3d38d8?s=128&d=identicon&r=PG", "display_name": "Fuu", "link": "https://stackoverflow.com/users/24198/fuu"}, "edited": false, "score": 0, "creation_date": 1430951640, "post_id": 30088166, "comment_id": 48290705, "body": "@Fuu would I do float(weight) and float(calories) to assign the variables and where would I put them in the code?"}], "answers": [{"comments": [{"owner": {"reputation": 2266, "user_id": 1938911, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Epvar.jpg?s=128&g=1", "display_name": "Colin Schoen", "link": "https://stackoverflow.com/users/1938911/colin-schoen"}, "edited": false, "score": 0, "creation_date": 1430952255, "post_id": 30088879, "comment_id": 48290905, "body": "Thank you for taking the time to answer your own question and help the community!"}], "tags": [], "owner": {"reputation": 241, "user_id": 4872437, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PGxTz.png?s=128&g=1", "display_name": "Brady W", "link": "https://stackoverflow.com/users/4872437/brady-w"}, "is_accepted": true, "score": 3, "last_activity_date": 1430951730, "creation_date": 1430951730, "answer_id": 30088879, "question_id": 30088166, "link": "https://stackoverflow.com/questions/30088166/why-does-this-python-3-code-throw-eoferror-error-when-run/30088879#30088879", "title": "Why does this Python 3 code throw EOFError error when run?", "body": "<p>The answer to the original question is that I wasn't using the right IDE and the Python version was 2 instead of 3.</p>\n"}], "owner": {"reputation": 241, "user_id": 4872437, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/PGxTz.png?s=128&g=1", "display_name": "Brady W", "link": "https://stackoverflow.com/users/4872437/brady-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 30088879, "answer_count": 1, "score": 1, "last_activity_date": 1430961087, "creation_date": 1430948661, "last_edit_date": 1430961087, "question_id": 30088166, "link": "https://stackoverflow.com/questions/30088166/why-does-this-python-3-code-throw-eoferror-error-when-run", "title": "Why does this Python 3 code throw EOFError error when run?", "body": "<p>I'm trying to make a calculator that converts calories, weight, and exercises, to amount of time you need to exercise for my school project. It gives me the error below on the first line that is not a comment.</p>\n\n<p>I need to know why it gives me this error and also how to fix it.</p>\n\n<p>I would also like to know any other errors and how to fix those.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>#Imports\n#Variables\n#Functions\n#Game\n\ncalories = input(\"How many calories or what food item ? : \")\nweight = input(\"How much do you weigh? : \")\nexercise = input(\"Enter your exercise or calories burned per pound per minute : \")\n\nif calories &lt; 0 :\n    calories = 0\nif weight &lt; 0 :\n    weight = 0\n\nif exercise == \"sitting\" :\n    exercise = .009\nif exercise == \"basketball\" :\n    exercise = .063\nif exercise == \"walking\" :\n    exercise = .019\nif exercise == \"softball\" :\n    exercise = .0038\nif exercise == \"weight training\" :\n    exercise = .039\nif exercise == \"jogging\" :\n    exercise = .063\nif exercise == \"bowling\" :\n    exercise = .023\nif exercise == \"fast biking\" :\n    exercise = .045\nif exercise == \"swimming\" :\n    exercise = .064\nif exercise == \"slow biking\" :\n    exercise = .029\nif exercise == \"ice skating\" :\n    exercise = .53\nif exercise == \"soccer\" :\n    exercise = .076\nif exercise == \"golf\" :\n    exercise = .033\nif exercise == \"sitting\" :\n    exercise = .009\nif exercise == \"tennis\" :\n    exercise = .061\nif exercise == \"jump rope\" :\n    exercise = .083\n\nif calories == \"big mac\" :\n    calories = 550\nif calories == \"large fries\" :\n    calories = 500\nif calories == \"large coca-cola\" :\n    calories = 310\nif calories == \"salad no dressing\" :\n    calories = 20\n\nanswer = calories / (weight * exercise)\nminuteanswer = answer\nhouranswer = 60 / minuteanswer\ndayanswer = 24 / houranswer\n\nprint(\"It will take you \" + minuteanswer + \" minutes, \" + houranswer + \" hours, or \" + dayanswer + \" days to burn off those calories with your chosen execise.\")\n\nprint(\"TA-DA!!!!!!\")\n</code></pre>\n\n<p>Here is the error:</p>\n\n<pre><code>How many calories or what food item ? : Traceback (most recent call last):\n  Line 6, in &lt;module&gt;\n    calories = input(\"How many calories or what food item ? : \")\nEOFError\n</code></pre>\n\n<p>Here is the updated code after fixing all errors:</p>\n\n<pre><code>#Imports\n#Variables\n#Functions\n#Game\n\ncalories = input(\"What food item ? : \")\nweight = input(\"How much do you weigh? : \")\nexercise = input(\"Enter your exercise : \")\n\nif exercise == \"sitting\" :\n    exercise = 0.009\nelif exercise == \"basketball\" :\n    exercise = 0.063\nelif exercise == \"walking\" :\n    exercise = 0.019\nelif exercise == \"softball\" :\n    exercise = 0.0038\nelif exercise == \"weight training\" :\n    exercise = 0.039\nelif exercise == \"jogging\" :\n    exercise = 0.063\nelif exercise == \"bowling\" :\n    exercise = 0.023\nelif exercise == \"fast biking\" :\n    exercise = 0.045\nelif exercise == \"swimming\" :\n    exercise = 0.064\nelif exercise == \"slow biking\" :\n    exercise = 0.029\nelif exercise == \"ice skating\" :\n    exercise = 0.53\nelif exercise == \"soccer\" :\n    exercise = 0.076\nelif exercise == \"golf\" :\n    exercise = 0.033\nelif exercise == \"sitting\" :\n    exercise = 0.009\nelif exercise == \"tennis\" :\n    exercise = 0.061\nelif exercise == \"jump rope\" :\n    exercise = 0.083\nelse :\n    exercise = .009\n\nif calories == \"big mac\" :\n    calories = 550.0\nelif calories == \"large fries\" :\n    calories = 500.0\nelif calories == \"large coca-cola\" :\n    calories = 310.0\nelif calories == \"salad no dressing\" :\n    calories = 20.0\nelse :\n    calories = 550\n\nanswer = calories / (float(weight) * exercise)\nminuteanswer = answer\nhouranswer = 60 / minuteanswer\n\nprint(\"It will take you \" ,minuteanswer ,\" minutes or \" ,houranswer ,\" hours to burn off those calories with your chosen execise.\")\n\nprint(\"TA-DA!!!!!!\")\n</code></pre>\n"}, {"tags": ["python", "json", "sqlalchemy"], "comments": [{"owner": {"reputation": 68601, "user_id": 315168, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fbcd3f115ce33ea2380f5a2dae0cf6d2?s=128&d=identicon&r=PG", "display_name": "Mikko Ohtamaa", "link": "https://stackoverflow.com/users/315168/mikko-ohtamaa"}, "edited": false, "score": 0, "creation_date": 1450372958, "post_id": 30088089, "comment_id": 56422623, "body": "Please see this MutableDict recipe if you want to nested changes automatically to propagate in SQLAlchemy <a href=\"http://variable-scope.com/posts/mutation-tracking-in-nested-json-structures-using-sqlalchemy\" rel=\"nofollow noreferrer\">variable-scope.com/posts/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 1577985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aead9df0aedff66e65f6faef4957a1d?s=128&d=identicon&r=PG", "display_name": "sofx", "link": "https://stackoverflow.com/users/1577985/sofx"}, "is_accepted": false, "score": 1, "last_activity_date": 1449665809, "creation_date": 1449665809, "answer_id": 34179403, "question_id": 30088089, "link": "https://stackoverflow.com/questions/30088089/sqlalchemy-json-typedecorator-not-saving-correctly-issues-with-session-commit/34179403#34179403", "title": "SQLAlchemy JSON TypeDecorator not saving correctly, issues with session.commit()", "body": "<p>I just ran into the same problem, seems SQLAlchemy's update won't be executed if json filed is of the same id in python. </p>\n\n<p>So my solution is to assign a new object to json filed. Below codes should work:</p>\n\n<pre><code>job.workers = job.workers + [2, ]\ndb_session.add(job)\ndb_session.save()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6149, "user_id": 1860561, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3rmIX.jpg?s=128&g=1", "display_name": "gitsitgo", "link": "https://stackoverflow.com/users/1860561/gitsitgo"}, "edited": false, "score": 1, "creation_date": 1450372002, "post_id": 34339963, "comment_id": 56422026, "body": "Thanks for answering Allen, can you add a summary of the answer from the link reference? It helps your answer remain useful in case of the link breaking."}, {"owner": {"reputation": 68601, "user_id": 315168, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fbcd3f115ce33ea2380f5a2dae0cf6d2?s=128&d=identicon&r=PG", "display_name": "Mikko Ohtamaa", "link": "https://stackoverflow.com/users/315168/mikko-ohtamaa"}, "edited": false, "score": 1, "creation_date": 1450372902, "post_id": 34339963, "comment_id": 56422586, "body": "Please see this MutableDict recipe if you need to deal with nested dictionary and lists in Python <a href=\"http://variable-scope.com/posts/mutation-tracking-in-nested-json-structures-using-sqlalchemy\" rel=\"nofollow noreferrer\">variable-scope.com/posts/&hellip;</a>"}, {"owner": {"reputation": 2502, "user_id": 695804, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/IJJhh.jpg?s=128&g=1", "display_name": "watsonic", "link": "https://stackoverflow.com/users/695804/watsonic"}, "reply_to_user": {"reputation": 68601, "user_id": 315168, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fbcd3f115ce33ea2380f5a2dae0cf6d2?s=128&d=identicon&r=PG", "display_name": "Mikko Ohtamaa", "link": "https://stackoverflow.com/users/315168/mikko-ohtamaa"}, "edited": false, "score": 0, "creation_date": 1524091606, "post_id": 34339963, "comment_id": 86836122, "body": "@MikkoOhtamaa your link is broken. Best to post the info in an answer"}], "tags": [], "owner": {"reputation": 1629, "user_id": 4599914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10152945884120617/picture?type=large", "display_name": "allenlin1992", "link": "https://stackoverflow.com/users/4599914/allenlin1992"}, "is_accepted": false, "score": 14, "last_activity_date": 1450379153, "last_edit_date": 1450379153, "creation_date": 1450370783, "answer_id": 34339963, "question_id": 30088089, "link": "https://stackoverflow.com/questions/30088089/sqlalchemy-json-typedecorator-not-saving-correctly-issues-with-session-commit/34339963#34339963", "title": "SQLAlchemy JSON TypeDecorator not saving correctly, issues with session.commit()", "body": "<p>SQLAlchemy has issues persisting JSON that's been updated. I had this exact same frustrating issue but found the answer here :</p>\n\n<p><a href=\"https://bashelton.com/2014/03/updating-postgresql-json-fields-via-sqlalchemy/\" rel=\"noreferrer\">https://bashelton.com/2014/03/updating-postgresql-json-fields-via-sqlalchemy/</a></p>\n\n<p>In summary, use 'flag_modified' method from sqlalchemy.orm.attributes</p>\n\n<pre><code>from sqlalchemy.orm.attributes import flag_modified    \n\njobs.workers.append(2)\nflag_modified(jobs, \"workers\")\ndb_session.commit()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2166, "user_id": 2599942, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RRHJ7.png?s=128&g=1", "display_name": "Kedar.Aitawdekar", "link": "https://stackoverflow.com/users/2599942/kedar-aitawdekar"}, "edited": false, "score": 0, "creation_date": 1547535095, "post_id": 38749289, "comment_id": 95214960, "body": "I tried with <code>deepcopy</code> but no success. Can see nested data even after <code>.add(&lt;var&gt;)</code> operation but not after <code>.commit()</code>"}], "tags": [], "owner": {"reputation": 6925, "user_id": 320036, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/CdvdX.jpg?s=128&g=1", "display_name": "z0r", "link": "https://stackoverflow.com/users/320036/z0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1470242392, "creation_date": 1470242392, "answer_id": 38749289, "question_id": 30088089, "link": "https://stackoverflow.com/questions/30088089/sqlalchemy-json-typedecorator-not-saving-correctly-issues-with-session-commit/38749289#38749289", "title": "SQLAlchemy JSON TypeDecorator not saving correctly, issues with session.commit()", "body": "<p>In my app, I got around this by copying the data first:</p>\n\n<pre><code>import copy\n\nworkers = copy.deepcopy(job.workers)\nworkers.append(2)\njob.workers = workers\n</code></pre>\n\n<p>I used <a href=\"https://docs.python.org/3.5/library/copy.html\" rel=\"nofollow\">deepcopy</a>, because my data is a more complex object.</p>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 8544967, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-9gpGnIBWohU/AAAAAAAAAAI/AAAAAAAAAVs/qSZX6W9sNF4/photo.jpg?sz=128", "display_name": "Alexey Yunoshev", "link": "https://stackoverflow.com/users/8544967/alexey-yunoshev"}, "is_accepted": false, "score": 1, "last_activity_date": 1535742068, "creation_date": 1535742068, "answer_id": 52121377, "question_id": 30088089, "link": "https://stackoverflow.com/questions/30088089/sqlalchemy-json-typedecorator-not-saving-correctly-issues-with-session-commit/52121377#52121377", "title": "SQLAlchemy JSON TypeDecorator not saving correctly, issues with session.commit()", "body": "<p>This is what helped me.</p>\n\n<pre><code>from flask import Flask\nfrom flask_sqlalchemy import SQLAlchemy\nfrom sqlalchemy.ext.mutable import MutableDict # &lt;--- !\n\napp = Flask(__name__)\ndb = SQLAlchemy(app)\n\nclass SomeModel(db.Model):\nid = db.Column(db.Integer, primary_key=True)\ndata = db.Column(MutableDict.as_mutable(db.JSON)) # &lt;--- !\n</code></pre>\n"}], "owner": {"reputation": 519, "user_id": 981372, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/b1e3306f4b7b657aeffd75a9c0da725a?s=128&d=identicon&r=PG", "display_name": "Luis Naranjo", "link": "https://stackoverflow.com/users/981372/luis-naranjo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1914, "favorite_count": 3, "answer_count": 4, "score": 10, "last_activity_date": 1535742068, "creation_date": 1430948399, "question_id": 30088089, "link": "https://stackoverflow.com/questions/30088089/sqlalchemy-json-typedecorator-not-saving-correctly-issues-with-session-commit", "title": "SQLAlchemy JSON TypeDecorator not saving correctly, issues with session.commit()", "body": "<p>My models.py file has two models, User and Job.</p>\n\n<p>Each job will have multiple Users associated with it.</p>\n\n<p>A user can be associated with multiple jobs.</p>\n\n<p>I need to be able to do something like job.getUsers() --> list of User objects</p>\n\n<p>I tried to use TypeDecorators to store a JSON int array in my Job table. Each int represents a User's pk, which I can later use to find the correct row in the db.</p>\n\n<p>At first glance, this was working fine, but I'm getting some weird bugs (bottom of post, after my code).</p>\n\n<pre><code>class Json(TypeDecorator):\n\n    impl = String\n\n    def process_bind_param(self, value, dialect):\n        return json.dumps(value)\n\n    def process_result_value(self, value, dialect):\n        return json.loads(value)\n\n\nclass Job(Base):\n    __tablename__ = 'jobs'\n    id = Column(Integer, primary_key=True)\n    date = Column(Date)\n    workers = Column(Json(128))\n\n    def __init__(self):\n        self.workers = []\n</code></pre>\n\n<p>Here is my weird output</p>\n\n<pre><code>&gt;&gt;&gt; db_session = scoped_session(sessionmaker(autocommit=False, autoflush=True, bind=engine))\n\n&gt;&gt;&gt; job = Job()\n&gt;&gt;&gt; job.workers\n[]\n&gt;&gt;&gt; job.workers.append(1)\n&gt;&gt;&gt; job.workers\n[1]\n&gt;&gt;&gt; db_session.add(job)\n&gt;&gt;&gt; job.workers\n[1]\n&gt;&gt;&gt; db_session.commit()\n&gt;&gt;&gt; job.workers\n[1]\n&gt;&gt;&gt; job = Job.query.filter(Job.id == 1).first()\n&gt;&gt;&gt; job.workers\n[1]\n</code></pre>\n\n<p>At this point, it looks like everything ok. When I try adding a second item to the list, things start to go wrong.</p>\n\n<pre><code>&gt;&gt;&gt; job.workers.append(2) # let's try adding another item to the list.\n&gt;&gt;&gt; job.workers\n[1, 2]\n&gt;&gt;&gt; db_session.add(job) # is this necessary? added for debugging purposes, seems to have no effect on anything\n&gt;&gt;&gt; job.workers\n[1, 2]\n&gt;&gt;&gt; db_session.commit() # autoflush is on\n&gt;&gt;&gt; job.workers\n[1] # !!!!!!!!!!!!!!!!!!!??????????????????????/\n</code></pre>\n\n<p>Please let me know if you have any idea what I'm doing wrong. Alternatively, let me know if there is a better way to do this instead of a JSON TypeDecorator. Thanks!</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1430948553, "post_id": 30088074, "comment_id": 48289343, "body": "Isn&#39;t that what <code>some_series = other_series</code> will do?"}, {"owner": {"reputation": 4257, "user_id": 1577110, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ca96cc231c44d10d8f78d1a7df698368?s=128&d=identicon&r=PG", "display_name": "Mark Graph", "link": "https://stackoverflow.com/users/1577110/mark-graph"}, "edited": false, "score": 0, "creation_date": 1430948722, "post_id": 30088074, "comment_id": 48289411, "body": "Are you using update because the span of the index is different for the two series? If not, I would just use some_series = other_series.copy()"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "reply_to_user": {"reputation": 4257, "user_id": 1577110, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ca96cc231c44d10d8f78d1a7df698368?s=128&d=identicon&r=PG", "display_name": "Mark Graph", "link": "https://stackoverflow.com/users/1577110/mark-graph"}, "edited": false, "score": 0, "creation_date": 1430948865, "post_id": 30088074, "comment_id": 48289478, "body": "@MarkGraph I don&#39;t think the explicit call to <code>copy()</code> is necessary here, I tested it and it does create a reference to the other series"}, {"owner": {"reputation": 12269, "user_id": 916907, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cdbc1ee25fbf94cebfafba312de489ee?s=128&d=identicon&r=PG", "display_name": "Dun Peal", "link": "https://stackoverflow.com/users/916907/dun-peal"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1430948866, "post_id": 30088074, "comment_id": 48289479, "body": "@EdChum: doesn&#39;t seem so: <code>some_series = Series([1, 2]); other_series = Series([None]); some_series = other_series #=&gt; (0   None)</code>. What I need is <code>(0   None, 1   2)</code>."}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1430949109, "post_id": 30088074, "comment_id": 48289609, "body": "I don&#39;t understand how you&#39;d expect that kind of result as it looks like you want something like <code>pd.concat([other_series, some_series], ignore_index=True)</code> rather than trying to overwrite the lhs"}, {"owner": {"reputation": 4257, "user_id": 1577110, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ca96cc231c44d10d8f78d1a7df698368?s=128&d=identicon&r=PG", "display_name": "Mark Graph", "link": "https://stackoverflow.com/users/1577110/mark-graph"}, "edited": false, "score": 0, "creation_date": 1430949132, "post_id": 30088074, "comment_id": 48289619, "body": "Where did the zero in your desired concatenation come from?"}, {"owner": {"reputation": 12269, "user_id": 916907, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cdbc1ee25fbf94cebfafba312de489ee?s=128&d=identicon&r=PG", "display_name": "Dun Peal", "link": "https://stackoverflow.com/users/916907/dun-peal"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1430949360, "post_id": 30088074, "comment_id": 48289730, "body": "@EdChum: sorry for the confusion, check the edited question description for an exact definition of the behavior I expect."}, {"owner": {"reputation": 12269, "user_id": 916907, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cdbc1ee25fbf94cebfafba312de489ee?s=128&d=identicon&r=PG", "display_name": "Dun Peal", "link": "https://stackoverflow.com/users/916907/dun-peal"}, "reply_to_user": {"reputation": 4257, "user_id": 1577110, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ca96cc231c44d10d8f78d1a7df698368?s=128&d=identicon&r=PG", "display_name": "Mark Graph", "link": "https://stackoverflow.com/users/1577110/mark-graph"}, "edited": false, "score": 0, "creation_date": 1430949387, "post_id": 30088074, "comment_id": 48289739, "body": "@MarkGraph: sorry for being unclear, see updated description."}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1430949745, "post_id": 30088074, "comment_id": 48289915, "body": "One way that would work would be <code>some_series.loc[other_series.index] = other_series</code>"}], "answers": [{"comments": [{"owner": {"reputation": 12269, "user_id": 916907, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cdbc1ee25fbf94cebfafba312de489ee?s=128&d=identicon&r=PG", "display_name": "Dun Peal", "link": "https://stackoverflow.com/users/916907/dun-peal"}, "edited": false, "score": 0, "creation_date": 1430949683, "post_id": 30088344, "comment_id": 48289880, "body": "Thanks, but I actually don&#39;t want any labels on <code>t</code> that aren&#39;t in <code>s</code> to be in <code>res</code>. In other words, all I want is to override values in <code>s</code> with their corresponding (by label) <code>t</code> values."}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "reply_to_user": {"reputation": 12269, "user_id": 916907, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cdbc1ee25fbf94cebfafba312de489ee?s=128&d=identicon&r=PG", "display_name": "Dun Peal", "link": "https://stackoverflow.com/users/916907/dun-peal"}, "edited": false, "score": 1, "creation_date": 1430950445, "post_id": 30088344, "comment_id": 48290246, "body": "@DunPeal updated (use intersection rather than union)"}], "tags": [], "owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "is_accepted": false, "score": 1, "last_activity_date": 1430950427, "last_edit_date": 1430950427, "creation_date": 1430949448, "answer_id": 30088344, "question_id": 30088074, "link": "https://stackoverflow.com/questions/30088074/series-update-that-also-uses-na-values/30088344#30088344", "title": "Series.update() that also uses NA values?", "body": "<p>I'm not sure this is the nicest way, but here's one way. You have to ensure that the Series you want to update includes that of the other (e.g. with reindex).</p>\n\n<pre><code>In [11]: s\nOut[11]:\n0    1\n1    2\ndtype: int64\n\nIn [12]: t\nOut[12]:\n1   NaN\n2     3\n3     4\ndtype: float64\n\nIn [13]: res = s.reindex(s.index.union(t.index))\n</code></pre>\n\n<p><em>Note: without this stage, if you just try to update s, you'll get a KeyError.</em></p>\n\n<pre><code>In [14]: res.loc[t.index] = t\n\nIn [25]: res\nOut[25]:\n0     1\n1   NaN\n2     3\n3     4\ndtype: float64\n</code></pre>\n\n<hr>\n\n<p>To update <em>just</em> the index of s use the intersection:</p>\n\n<pre><code>In [21]: ind = t.index.intersection(s.index)\n\nIn [22]: s.loc[ind] = t.loc[ind]\n\nIn [23]: s\nOut[23]:\n0     1\n1   NaN\ndtype: float64\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12269, "user_id": 916907, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cdbc1ee25fbf94cebfafba312de489ee?s=128&d=identicon&r=PG", "display_name": "Dun Peal", "link": "https://stackoverflow.com/users/916907/dun-peal"}, "edited": false, "score": 0, "creation_date": 1430950022, "post_id": 30088434, "comment_id": 48290062, "body": "Thanks!  What do you mean by &quot;The loc is acutally unneccessary in this case&quot;?"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "reply_to_user": {"reputation": 12269, "user_id": 916907, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cdbc1ee25fbf94cebfafba312de489ee?s=128&d=identicon&r=PG", "display_name": "Dun Peal", "link": "https://stackoverflow.com/users/916907/dun-peal"}, "edited": false, "score": 0, "creation_date": 1430950173, "post_id": 30088434, "comment_id": 48290124, "body": "I mean that <code>some_series[other_series.index] = other_series</code> would also work"}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "edited": false, "score": 0, "creation_date": 1430951506, "post_id": 30088434, "comment_id": 48290658, "body": "If <code>other_series</code> includes indices outside of <code>some_series</code> this is a KeyError! :("}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "reply_to_user": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "edited": false, "score": 0, "creation_date": 1430951610, "post_id": 30088434, "comment_id": 48290696, "body": "@AndyHayden true but this is so ill-defined that I&#39;ve given up polishing this any further, plus I&#39;m watching 30rock and deciding how to waste my vote tomorrow"}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "edited": false, "score": 0, "creation_date": 1430956480, "post_id": 30088434, "comment_id": 48292217, "body": "@EdChum ha, you call this one ill-defined - (I <a href=\"http://stackoverflow.com/q/29938321/1240268\">raise</a>)! ...not looking forward to waking up to that result. Fingers crossed aye."}], "tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": true, "score": 1, "last_activity_date": 1430949796, "creation_date": 1430949796, "answer_id": 30088434, "question_id": 30088074, "link": "https://stackoverflow.com/questions/30088074/series-update-that-also-uses-na-values/30088434#30088434", "title": "Series.update() that also uses NA values?", "body": "<p>the following would work, this uses <code>loc</code> and the other series index to mask the elements we want to overwrite:</p>\n\n<pre><code>In [106]:\n\nsome_series = pd.Series([1, 2])\nother_series = pd.Series([None])\nsome_series.loc[other_series.index] = other_series\nsome_series\nOut[106]:\n0   NaN\n1     2\ndtype: float64\n</code></pre>\n\n<p>The <code>loc</code> is acutally unneccessary in this case</p>\n"}, {"tags": [], "owner": {"reputation": 4257, "user_id": 1577110, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ca96cc231c44d10d8f78d1a7df698368?s=128&d=identicon&r=PG", "display_name": "Mark Graph", "link": "https://stackoverflow.com/users/1577110/mark-graph"}, "is_accepted": false, "score": 0, "last_activity_date": 1430949811, "creation_date": 1430949811, "answer_id": 30088442, "question_id": 30088074, "link": "https://stackoverflow.com/questions/30088074/series-update-that-also-uses-na-values/30088442#30088442", "title": "Series.update() that also uses NA values?", "body": "<pre><code>some_series[other_series.index] = other_series\n</code></pre>\n"}], "owner": {"reputation": 12269, "user_id": 916907, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cdbc1ee25fbf94cebfafba312de489ee?s=128&d=identicon&r=PG", "display_name": "Dun Peal", "link": "https://stackoverflow.com/users/916907/dun-peal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 30088434, "answer_count": 3, "score": 2, "last_activity_date": 1430950427, "creation_date": 1430948342, "last_edit_date": 1430949308, "question_id": 30088074, "link": "https://stackoverflow.com/questions/30088074/series-update-that-also-uses-na-values", "title": "Series.update() that also uses NA values?", "body": "<p><code>some_series.update(other_series)</code> will overwrite all values on <code>some_series</code> with their matching (by index) values from <code>other_series</code>. However, it does skip all NA values like None.</p>\n\n<p>What should I use if I want to update <code>some_series</code> in place from <code>other_series</code>, but also have the NA values apply?</p>\n\n<p>To clarify, this is what I want:</p>\n\n<pre><code>In [197]: some_series\nOut[197]: \n0    1\n1    2\ndtype: int64\n\nIn [198]: other_series\nOut[198]: \n0    None\ndtype: object\n\nIn [203]: some_series  # after overriding it with other_series:\nOut[203]: \n0    None\n1       2\ndtype: object\n</code></pre>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 2393, "user_id": 844823, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/86950f2a6167e3cced55b2fa6c6a407c?s=128&d=identicon&r=PG", "display_name": "Shashank Agarwal", "link": "https://stackoverflow.com/users/844823/shashank-agarwal"}, "edited": false, "score": 1, "creation_date": 1430948606, "post_id": 30088073, "comment_id": 48289365, "body": "Why not use <code>reg = re.compile(&#39;\\d{5}&#39;)</code> with <code>reg.findall(address)</code>?"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 2, "creation_date": 1430948926, "post_id": 30088073, "comment_id": 48289515, "body": "There is no &#39;trucmuche&#39; street in the 9e arr."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2555451"}, "is_accepted": false, "score": 4, "last_activity_date": 1430948635, "creation_date": 1430948635, "answer_id": 30088157, "question_id": 30088073, "link": "https://stackoverflow.com/questions/30088073/how-to-extract-zipcode-in-the-middle-of-a-string/30088157#30088157", "title": "How to extract zipcode in the middle of a string?", "body": "<p>A named capture group in Python must start with <code>?</code>:</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; address = \"35 rue de trucmuche, 75009 PARIS\"\n&gt;&gt;&gt; re.match('^.*(?P&lt;zipcode&gt;\\d{5}).*$', address).groupdict()['zipcode']\n'75009'\n</code></pre>\n\n<p>Otherwise, you will be trying to match the literal text <code>P&lt;zipcode&gt;</code>.</p>\n\n<hr>\n\n<p>Also, the <code>.groupdict()</code> method returns a normal Python dictionary:</p>\n\n<pre><code>&gt;&gt;&gt; type(re.match('^.*(?P&lt;zipcode&gt;\\d{5}).*$', address).groupdict())\n&lt;class 'dict'&gt;\n</code></pre>\n\n<p>This means that you will need to access the zipcode value as <code>dct['zipcode']</code>, not <code>dct.zipcode</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 4551, "user_id": 3790360, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ef9805061faba2c8d3d95a1929702294?s=128&d=identicon&r=PG&f=1", "display_name": "Andie2302", "link": "https://stackoverflow.com/users/3790360/andie2302"}, "is_accepted": true, "score": 5, "last_activity_date": 1430949258, "creation_date": 1430949258, "answer_id": 30088303, "question_id": 30088073, "link": "https://stackoverflow.com/questions/30088073/how-to-extract-zipcode-in-the-middle-of-a-string/30088303#30088303", "title": "How to extract zipcode in the middle of a string?", "body": "<p>You are just missing the ? in the named capturing group:</p>\n\n<pre><code>^.*(?P&lt;zipcode&gt;\\d{5}).*$\n</code></pre>\n\n<hr>\n\n<pre><code>reg = re.compile('^.*(?P&lt;zipcode&gt;\\d{5}).*$')\nmatch = reg.match(address)\nmatch.groupdict().zipcode # should be 75009\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 616, "user_id": 1731397, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a7aae7e1ac4dfb036cf05806b790f93?s=128&d=identicon&r=PG", "display_name": "nik", "link": "https://stackoverflow.com/users/1731397/nik"}, "is_accepted": false, "score": 0, "last_activity_date": 1430949973, "creation_date": 1430949973, "answer_id": 30088483, "question_id": 30088073, "link": "https://stackoverflow.com/questions/30088073/how-to-extract-zipcode-in-the-middle-of-a-string/30088483#30088483", "title": "How to extract zipcode in the middle of a string?", "body": "<p>Your regex is wrong. That is why it won't match, it returns <code>None</code>, and complains that <code>None</code> doesn't have a <code>groupdict()</code>.</p>\n\n<p>In fact there are two mistakes as far as I can see. </p>\n\n<pre><code>reg = re.compile('^.*(?P&lt;zipcode&gt;\\d{5}).*$')\n</code></pre>\n\n<p>------------------------------------^---------------------\n(needs a '?' in front of 'P')</p>\n\n<p>and the other mistake that will come up is that <code>groupdict()</code> nees to be accessed like a normal <code>dict</code>, that is </p>\n\n<pre><code>match.groupdict()['zipcode']\n</code></pre>\n\n<p>You should probably also put a check to see that the match matches, e.g.</p>\n\n<pre><code>if match:\n     match.groupdict()['zipcode']\n</code></pre>\n\n<p>as according to <a href=\"https://docs.python.org/2/library/re.html#match-objects\" rel=\"nofollow\">https://docs.python.org/2/library/re.html#match-objects</a> the match object will return <code>True</code> if it exists.</p>\n"}], "owner": {"reputation": 8255, "user_id": 2255491, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1fd43fc2f1c211b0701bed602b18cc2a?s=128&d=identicon&r=PG", "display_name": "David D.", "link": "https://stackoverflow.com/users/2255491/david-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3474, "favorite_count": 0, "accepted_answer_id": 30088303, "answer_count": 3, "score": 2, "last_activity_date": 1430949973, "creation_date": 1430948340, "last_edit_date": 1430948838, "question_id": 30088073, "link": "https://stackoverflow.com/questions/30088073/how-to-extract-zipcode-in-the-middle-of-a-string", "title": "How to extract zipcode in the middle of a string?", "body": "<p>Here is an address:</p>\n\n<pre><code>address = \"35 rue de trucmuche, 75009 PARIS\"\n</code></pre>\n\n<p>I want to extract the zipcode (<code>75009</code>) in the address using a Regex.</p>\n\n<p>I tried this:</p>\n\n<pre><code>reg = re.compile('^.*(P&lt;zipcode&gt;\\d{5}).*$')\nmatch = reg.match(address)\nmatch.groupdict().zipcode # should be 75009\n</code></pre>\n\n<p>I get a:</p>\n\n<p><code>AttributeError: 'NoneType' object has no attribute 'groupdict'</code></p>\n\n<p>I think my Regex is wrong. I can't understand why.</p>\n"}, {"tags": ["python", "unit-testing", "testing"], "comments": [{"owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "edited": false, "score": 1, "creation_date": 1430950582, "post_id": 30088059, "comment_id": 48290287, "body": "This might be more suited to <a href=\"https://programmers.stackexchange.com/\">programmers.SE</a>."}, {"owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "edited": false, "score": 0, "creation_date": 1430950809, "post_id": 30088059, "comment_id": 48290384, "body": "Also: this doesn&#39;t answer your question, but --  <code>extract_primes = partial(filter, is_prime)</code>"}, {"owner": {"reputation": 23, "user_id": 4816155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b18f14cfafd5b1e4237b2fb6023679d?s=128&d=identicon&r=PG&f=1", "display_name": "Carmen Bianca Bakker", "link": "https://stackoverflow.com/users/4816155/carmen-bianca-bakker"}, "reply_to_user": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "edited": false, "score": 0, "creation_date": 1430951884, "post_id": 30088059, "comment_id": 48290784, "body": "@tzaman I&#39;m well aware. I just needed example code. The actual code is much more difficult to quickly explain in a question. Everybody knows what primes are; so I&#39;ll use a question on primes."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 4816155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b18f14cfafd5b1e4237b2fb6023679d?s=128&d=identicon&r=PG&f=1", "display_name": "Carmen Bianca Bakker", "link": "https://stackoverflow.com/users/4816155/carmen-bianca-bakker"}, "edited": false, "score": 0, "creation_date": 1430950862, "post_id": 30088625, "comment_id": 48290407, "body": "Of course a class can be its own user. Java does this all the time with getters and setters. And consider a class <code>ChessBoard</code> which has the methods <code>do_move</code> and <code>is_move_legal</code>, both of which are public. The <code>do_move</code> method calls <code>is_move_legal</code>, because the board cannot perform an illegal move. But I&#39;m not even using a class in the above example; only procedural code."}, {"owner": {"reputation": 6532, "user_id": 919578, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/VaAKB.jpg?s=128&g=1", "display_name": "Benjy Kessler", "link": "https://stackoverflow.com/users/919578/benjy-kessler"}, "reply_to_user": {"reputation": 23, "user_id": 4816155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b18f14cfafd5b1e4237b2fb6023679d?s=128&d=identicon&r=PG&f=1", "display_name": "Carmen Bianca Bakker", "link": "https://stackoverflow.com/users/4816155/carmen-bianca-bakker"}, "edited": false, "score": 0, "creation_date": 1430950911, "post_id": 30088625, "comment_id": 48290431, "body": "Again getters and setters are almost always indicators of bad design. It is pretty much a less offensive way of declaring your members public."}, {"owner": {"reputation": 6532, "user_id": 919578, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/VaAKB.jpg?s=128&g=1", "display_name": "Benjy Kessler", "link": "https://stackoverflow.com/users/919578/benjy-kessler"}, "reply_to_user": {"reputation": 23, "user_id": 4816155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b18f14cfafd5b1e4237b2fb6023679d?s=128&d=identicon&r=PG&f=1", "display_name": "Carmen Bianca Bakker", "link": "https://stackoverflow.com/users/4816155/carmen-bianca-bakker"}, "edited": false, "score": 0, "creation_date": 1430951023, "post_id": 30088625, "comment_id": 48290471, "body": "Your chess board example is also problematic. Why do both users of your class and your class itself have to validate the move? It would be better if is_move_legal were private and do_move would throw an exception if the move was illegal. But again this should be judged on a case by case basis and you might have a compelling reason but in most cases you won&#39;t."}, {"owner": {"reputation": 23, "user_id": 4816155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b18f14cfafd5b1e4237b2fb6023679d?s=128&d=identicon&r=PG&f=1", "display_name": "Carmen Bianca Bakker", "link": "https://stackoverflow.com/users/4816155/carmen-bianca-bakker"}, "edited": false, "score": 0, "creation_date": 1430951775, "post_id": 30088625, "comment_id": 48290749, "body": "I&#39;m sorry, what? Are you insane? Getters and setters are incredibly <i>good</i> design in Java. If you have a class <code>Point</code>, you <i>want</i> it to have a <code>getX()</code> and <code>getY()</code>. And the <code>ChessBoard</code> example is absolutely fine. I <i>want</i> to expose the ability to verify whether a move is legal to the user, because it&#39;s a damn handy convenience function. It&#39;s better than <code>try { board.do_move(); } catch { legal = False; } else { legal = True; board.undo_move(); }</code> to verify whether a move is legal in any case."}, {"owner": {"reputation": 6532, "user_id": 919578, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/VaAKB.jpg?s=128&g=1", "display_name": "Benjy Kessler", "link": "https://stackoverflow.com/users/919578/benjy-kessler"}, "reply_to_user": {"reputation": 23, "user_id": 4816155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b18f14cfafd5b1e4237b2fb6023679d?s=128&d=identicon&r=PG&f=1", "display_name": "Carmen Bianca Bakker", "link": "https://stackoverflow.com/users/4816155/carmen-bianca-bakker"}, "edited": false, "score": 0, "creation_date": 1430951939, "post_id": 30088625, "comment_id": 48290797, "body": "Point is different. Point is just a structure for aggregating the members. It&#39;s functionality is just getX and getY. Let&#39;s say ChessBoard has a private array of squares providing a user with access to it is an egregious violation of encapsulation. Regarding the is_legal you are right it is useful functionality but should be in a different class there is no reason for the board to know the rules of chess. And yes, quite insane :)"}, {"owner": {"reputation": 42073, "user_id": 113632, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f0aa6977c75f54ca9033d4f4d0244023?s=128&d=identicon&r=PG", "display_name": "dimo414", "link": "https://stackoverflow.com/users/113632/dimo414"}, "reply_to_user": {"reputation": 23, "user_id": 4816155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b18f14cfafd5b1e4237b2fb6023679d?s=128&d=identicon&r=PG&f=1", "display_name": "Carmen Bianca Bakker", "link": "https://stackoverflow.com/users/4816155/carmen-bianca-bakker"}, "edited": false, "score": 1, "creation_date": 1430952401, "post_id": 30088625, "comment_id": 48290964, "body": "@CarmenBiancaBakker While I agree &quot;<i>getters and setters are almost always indicators of bad design</i>&quot; sounds a little harsh, there&#39;s no need to call people insane.  Broadly speaking, Benjy&#39;s right, e.g. there&#39;s <i>likely</i> no need to expose a method like <code>is_move_legal</code> to callers.  Your try/catch example is somewhat contrived; callers wouldn&#39;t need to &quot;undo&quot; the board, that&#39;s the board&#39;s job.  In any case, data-structure design decisions are tangential to this question.  The point, that you might want to re-examine earlier decisions when you run into testing difficulty, is sound."}, {"owner": {"reputation": 23, "user_id": 4816155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b18f14cfafd5b1e4237b2fb6023679d?s=128&d=identicon&r=PG&f=1", "display_name": "Carmen Bianca Bakker", "link": "https://stackoverflow.com/users/4816155/carmen-bianca-bakker"}, "reply_to_user": {"reputation": 42073, "user_id": 113632, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f0aa6977c75f54ca9033d4f4d0244023?s=128&d=identicon&r=PG", "display_name": "dimo414", "link": "https://stackoverflow.com/users/113632/dimo414"}, "edited": false, "score": 0, "creation_date": 1430952998, "post_id": 30088625, "comment_id": 48291167, "body": "@dimo414 Callers <i>would</i> need to undo the board, because the <code>do_move</code> method successfully executed and the move was therefore legal. But now they ended up with a modified board, which isn&#39;t what they wanted when they tried to verify the legality of the move, so they have to undo the move. Note that I wrapped it up in an <code>else</code> statement, not a <code>finally</code> statement, where <code>else</code> equals &quot;execute this if and only if no error was raised&quot;. In any case, the decision to make <code>is_move_legal</code> public isn&#39;t insane by any stretch of the imagination. And if the example prime code in the question should(c)"}, {"owner": {"reputation": 23, "user_id": 4816155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b18f14cfafd5b1e4237b2fb6023679d?s=128&d=identicon&r=PG&f=1", "display_name": "Carmen Bianca Bakker", "link": "https://stackoverflow.com/users/4816155/carmen-bianca-bakker"}, "edited": false, "score": 0, "creation_date": 1430953116, "post_id": 30088625, "comment_id": 48291204, "body": "(c) be re-examined, those are some insane coding standards. The example code in this question is absolutely fine, and a regular example of how pure functions (static methods) are called in normal code bases. In this case it was a needless convenience function, but you might imagine a different function that will have some special case for prime numbers, and needs a function to be able to verify whether a given integer is a prime number."}, {"owner": {"reputation": 6532, "user_id": 919578, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/VaAKB.jpg?s=128&g=1", "display_name": "Benjy Kessler", "link": "https://stackoverflow.com/users/919578/benjy-kessler"}, "edited": false, "score": 0, "creation_date": 1430953243, "post_id": 30088625, "comment_id": 48291237, "body": "I think this discussion has digressed quite a bit but if we are discussing the ChessBoard, I would suggest having a board in charge of actually storing the pieces and a ChessGame class which knows which moves are legal based on  the rules of the game. But again as I said loosely coupled functions is a good design practice. But all design rules apply better in certain cases than others. IMHO the case in your question is a classic example of needlessly coupling list filtering with primality testing."}, {"owner": {"reputation": 42073, "user_id": 113632, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f0aa6977c75f54ca9033d4f4d0244023?s=128&d=identicon&r=PG", "display_name": "dimo414", "link": "https://stackoverflow.com/users/113632/dimo414"}, "reply_to_user": {"reputation": 23, "user_id": 4816155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b18f14cfafd5b1e4237b2fb6023679d?s=128&d=identicon&r=PG&f=1", "display_name": "Carmen Bianca Bakker", "link": "https://stackoverflow.com/users/4816155/carmen-bianca-bakker"}, "edited": false, "score": 1, "creation_date": 1430953319, "post_id": 30088625, "comment_id": 48291257, "body": "@CarmenBiancaBakker I would be happy to debate <code>ChessBoard</code> design decisions with you if you&#39;d like to post a question about that.  However for the purpose of this question suffice to say you <i>could</i> successfully implement a <code>ChessBoard</code> class without exposing <code>is_move_legal</code> to callers.  What Benjy and I are suggesting is that such a design might be easier to test.  Seeing as you&#39;re coming here asking for help on how to test things, maybe take that suggestion a little more seriously.  And the only one throwing around &quot;insane&quot; here is you.  Please stop."}, {"owner": {"reputation": 23, "user_id": 4816155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b18f14cfafd5b1e4237b2fb6023679d?s=128&d=identicon&r=PG&f=1", "display_name": "Carmen Bianca Bakker", "link": "https://stackoverflow.com/users/4816155/carmen-bianca-bakker"}, "edited": false, "score": 0, "creation_date": 1430953892, "post_id": 30088625, "comment_id": 48291435, "body": "The point of the <code>ChessBoard</code> example was not to debate the actual design of a chess game; the point was to illustrate that it&#39;s completely normal to rely on a public method within your own class. A different example, then. We have a <code>Circle</code> that has a <code>getRadius</code> getter. We could add a <code>getDiameter</code> getter that <i>depends</i> on the already-public <code>getRadius</code> method. Or we have a <code>Game</code> class where the public <code>start</code> method depends on its public <code>resetSound</code>. There is absolutely nothing wrong with a public method depending on a another public method of its own class, as @BenjyKessler suggested."}, {"owner": {"reputation": 42073, "user_id": 113632, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f0aa6977c75f54ca9033d4f4d0244023?s=128&d=identicon&r=PG", "display_name": "dimo414", "link": "https://stackoverflow.com/users/113632/dimo414"}, "reply_to_user": {"reputation": 23, "user_id": 4816155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b18f14cfafd5b1e4237b2fb6023679d?s=128&d=identicon&r=PG&f=1", "display_name": "Carmen Bianca Bakker", "link": "https://stackoverflow.com/users/4816155/carmen-bianca-bakker"}, "edited": false, "score": 0, "creation_date": 1430954610, "post_id": 30088625, "comment_id": 48291658, "body": "@CarmenBiancaBakker <i>It depends</i>.  As we&#39;ve been saying, if you run into difficulty testing your code, interdependency could be part of the problem.  We&#39;re speaking in generalities and you&#39;re coming back with absolutes.  If you&#39;re looking for an absolute answer, I&#39;m afraid their isn&#39;t one."}, {"owner": {"reputation": 16853, "user_id": 4101725, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dGwoPMFb_tM/AAAAAAAAAAI/AAAAAAAABks/tMMqc6E9REg/photo.jpg?sz=128", "display_name": "Michele d&#39;Amico", "link": "https://stackoverflow.com/users/4101725/michele-damico"}, "edited": false, "score": 1, "creation_date": 1431035978, "post_id": 30088625, "comment_id": 48335711, "body": "When you need to test <i>private</i> method there 95% chance that this method should be a public method of a private collaborator. Maybe <code>is_move_legal</code> is a public method of <code>ChessRules()</code> class used as <code>ChessBoard</code>&#39;s collaborator. Single responsibility principle rule... when a class do too much works split it and maybe your design will be improved and become more testable."}], "tags": [], "owner": {"reputation": 6532, "user_id": 919578, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/VaAKB.jpg?s=128&g=1", "display_name": "Benjy Kessler", "link": "https://stackoverflow.com/users/919578/benjy-kessler"}, "is_accepted": false, "score": 1, "last_activity_date": 1430951108, "last_edit_date": 1430951108, "creation_date": 1430950593, "answer_id": 30088625, "question_id": 30088059, "link": "https://stackoverflow.com/questions/30088059/how-do-i-make-sure-that-the-function-under-test-is-the-only-function-being-calle/30088625#30088625", "title": "How do I make sure that the function under test is the only function being called?", "body": "<p>In general it is a good rule of thumb that when you reach a point where the best practices don't work for you then the problem occurred much earlier than that point. In your case you don't know what to do because you have two public methods calling one another. This is usually indicative of the fact that they don't belong in the same class. For instance a function that filters a list based on a predicate doesn't really have anything to do with prime numbers. This shouldn't be functionality provided by this class. If this is something that you are doing very often then you can create a list utils class that has a filter method. I think that testing the two methods, <code>is_prime</code> and <code>filter_list</code>, should be very easy.</p>\n\n<p>In general classes should be designed to provide a set of functionality to a user. A class shouldn't be it's own user. That creates many problems not the least of which is the problem you encountered. Of course there are exceptions to this rule and the best design should be judged on a case by case basis but I find this to be a good rule of thumb.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 4816155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b18f14cfafd5b1e4237b2fb6023679d?s=128&d=identicon&r=PG&f=1", "display_name": "Carmen Bianca Bakker", "link": "https://stackoverflow.com/users/4816155/carmen-bianca-bakker"}, "edited": false, "score": 0, "creation_date": 1430953392, "post_id": 30088914, "comment_id": 48291284, "body": "I kind of understand, but I&#39;m still kind of puzzled. This is especially confusing because so much of unit testing instructions are extremely OOP-bound, and Python code mixes all sorts of styles really easily. <a href=\"http://misko.hevery.com/2008/12/15/static-methods-are-death-to-testability/\" rel=\"nofollow noreferrer\">This blog post</a> describes the issue relatively clearly. If I have a function that calls a function that calls two more functions, it becomes incredibly difficult to test the first function. And because all of the functions are pure functions, there&#39;s no dependency injection to be done other than live patching."}, {"owner": {"reputation": 42073, "user_id": 113632, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f0aa6977c75f54ca9033d4f4d0244023?s=128&d=identicon&r=PG", "display_name": "dimo414", "link": "https://stackoverflow.com/users/113632/dimo414"}, "reply_to_user": {"reputation": 23, "user_id": 4816155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b18f14cfafd5b1e4237b2fb6023679d?s=128&d=identicon&r=PG&f=1", "display_name": "Carmen Bianca Bakker", "link": "https://stackoverflow.com/users/4816155/carmen-bianca-bakker"}, "edited": false, "score": 0, "creation_date": 1430953726, "post_id": 30088914, "comment_id": 48291375, "body": "@CarmenBiancaBakker The core point I&#39;m trying to get at is &quot;don&#39;t worry whether your function calls other functions unless you have to.&quot;  If you need to expose <code>is_prime</code> and <code>extract_primes</code> functions, then you should have tests for both of them.  If you find yourself writing a lot of redundant tests, change detectors, or flaky tests, that&#39;s a strong suggestion you should revisit your design, such that you can provide both behaviors without them being so dependent on each other.  For the example you&#39;ve provided, defining a generic filter method and testing that would be cleaner."}], "tags": [], "owner": {"reputation": 42073, "user_id": 113632, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/f0aa6977c75f54ca9033d4f4d0244023?s=128&d=identicon&r=PG", "display_name": "dimo414", "link": "https://stackoverflow.com/users/113632/dimo414"}, "is_accepted": false, "score": 1, "last_activity_date": 1431450926, "last_edit_date": 1431450926, "creation_date": 1430951911, "answer_id": 30088914, "question_id": 30088059, "link": "https://stackoverflow.com/questions/30088059/how-do-i-make-sure-that-the-function-under-test-is-the-only-function-being-calle/30088914#30088914", "title": "How do I make sure that the function under test is the only function being called?", "body": "<p>Unfortunately, there's no easy answer, short of \"write really well structured code\", which of course, is hard.  I'll try to help shed some light on the subject by going through your question piece by piece.</p>\n\n<blockquote>\n  <p>As I understand it, a unit test is a test of the smallest portion of code that is relevant to a single use case. Often times this is a single function or method.</p>\n</blockquote>\n\n<p>This is broadly correct, but the primary goal is to test the <em>interface</em> of that code; that is to say, given certain inputs, do you get the expected outputs.  You don't want to care about <em>how</em> that block of code does what you want (if you do, you start writing <a href=\"http://googletesting.blogspot.com/2015/01/testing-on-toilet-change-detector-tests.html\" rel=\"nofollow\">change detector</a> tests).</p>\n\n<blockquote>\n  <p>I do not want to test any functions that [my function is] calling.</p>\n</blockquote>\n\n<p>Not quite; you don't want to care about what functions the code being tested calls.  As far as your test is concerned, you don't care if it is a hard-coded mapping of inputs to outputs, or if it goes out and does a Google search* and parses the first result, as long as the behavior is what you expect.</p>\n\n<p>Notice that your <code>is_prime</code> function depends on the behavior of other \"functions\" too - <code>&lt;=</code>, <code>range()</code>, <code>%</code>, and <code>==</code> all have to behave a certain way for your <code>is_prime</code> function to work correctly.  That isn't a bad thing!  You can be confident the functionality <code>is_prime</code> depends on is working correctly because Python has already tested it.  Whether they're tested at the same time or not doesn't really matter.</p>\n\n<blockquote>\n  <p>I'm just implicitly testing whether <code>is_prime</code> is doing its work correctly.</p>\n</blockquote>\n\n<p>Not really.  There's nothing about <code>extract_primes()</code> that requires it use <code>is_prime()</code>, in fact you might very well discover a better algorithm for this behavior later and want to swap it out.  You want to test these two functions separately because otherwise your tests only work on the assumption that <code>extract_primes()</code> calls <code>is_prime()</code>.</p>\n\n<p>If there <em>is</em> some reason in your actual use case that <code>extract_primes()</code> must rely on <code>is_prime()</code>, then you are likely over-coupling your code.  Consider, as others have suggested, separating your predicate-like behavior from your filter-like behavior, so that the filtering works on any predicate.  </p>\n\n<blockquote>\n  <p>when <code>is_prime</code> has a bug, it will also cause the test for <code>extract_primes</code> to fail, which beats the point of unit tests, where you want to quickly spot the single point of failure.</p>\n</blockquote>\n\n<p>Very true, and this is generally something you want to try to avoid.  But all code is built upon other code, and it's impossible to always have one and only one test fail.  If something deep in your code breaks, everything that depends on it will break too.  One solution is to have layers of tests; unit and integration tests at a minimum, but you can also have layers inside of that, e.g. test your utility code first, and only test dependant code once those tests all pass.</p>\n\n<blockquote>\n  <p>[Injecting functions] is tiresome and inflexible at best.</p>\n</blockquote>\n\n<p>Definitely.  Don't do that (normally).  In fact, a pretty good sniff-test of your code is \"Do I have to do strange, cumbersome things with my code in order to write good tests?\"  If so, your design probably merits revisiting.</p>\n\n<p>Of course, this isn't always possible.  You've seen mocking, stubbing, monkey patching and dependency injection, all of which are tools for dealing with difficult-to-test code, but these are all tools for when you can't reliably <em>just test the interface</em>.</p>\n\n<p>In other words, first try to write clean, loosely coupled code.  Then, try to test the interface of each component in isolation.  When you can't reliably do that, start looking at mocking and dependency injection and so on.</p>\n\n<p><sub>*You certainly might care about this from a performance or test stability perspective, but that's a separate issue.  As far as that individual test is concerned, it doesn't care.</sub></p>\n"}, {"tags": [], "owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "is_accepted": true, "score": 2, "last_activity_date": 1430952571, "creation_date": 1430952571, "answer_id": 30089014, "question_id": 30088059, "link": "https://stackoverflow.com/questions/30088059/how-do-i-make-sure-that-the-function-under-test-is-the-only-function-being-calle/30089014#30089014", "title": "How do I make sure that the function under test is the only function being called?", "body": "<p>Generally speaking: It depends entirely on your design, but your initial attempt seems reasonable. </p>\n\n<p>Assuming <code>is_prime</code> and <code>extract_primes</code> are both part of your class / module's public interface, they should both be tested. At that point, you want to test <code>extract_primes</code> as a black-box, i.e. just ensuring that it <em>fulfills its contract</em>: give it a list and it returns the primes. The fact that it's using <code>is_prime</code> internally is an implementation detail your unit test code shouldn't concern itself with. </p>\n\n<p>The point of unit tests isn't necessarily that ONLY the earliest failure should trigger (of course, it's great if you can manage that); it's quite possible that a lot of dependent things fail if you break something high enough upstream. If <code>is_prime</code> is broken, then it's perfectly valid to see a test failure for <code>extract_primes</code> too, but just looking at the list of test failures is enough to immediately identify the root cause. </p>\n\n<p>Also, this way you can do things like: try out other prime-testing functions, replace the list comprehension with a generator expression, or other refactors etc. under the hood <em>without</em> needing to change your test code. </p>\n\n<p>Mocking should be reserved for <em>external</em> dependencies; patching every call that any function makes is ridiculously verbose, ties test code to implementation far too tightly, and doesn't really get you anything.   </p>\n"}], "owner": {"reputation": 23, "user_id": 4816155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b18f14cfafd5b1e4237b2fb6023679d?s=128&d=identicon&r=PG&f=1", "display_name": "Carmen Bianca Bakker", "link": "https://stackoverflow.com/users/4816155/carmen-bianca-bakker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 30089014, "answer_count": 3, "score": 1, "last_activity_date": 1431450926, "creation_date": 1430948304, "last_edit_date": 1430949573, "question_id": 30088059, "link": "https://stackoverflow.com/questions/30088059/how-do-i-make-sure-that-the-function-under-test-is-the-only-function-being-calle", "title": "How do I make sure that the function under test is the only function being called?", "body": "<p>I'm using Python, if that's relevant.</p>\n\n<p>As I understand it, a unit test is a test of the smallest portion of code that is relevant to a single use case. Often times this is a single function or method.</p>\n\n<p>So when I'm testing my function, I do not want to test any functions that it's calling. When writing tests, that's reasonably easy to do: Just concern yourself with the logic that your function is doing.</p>\n\n<p>But when I have the following situation:</p>\n\n<pre><code>def is_prime(number):\n    if number &lt;= 1:\n        return False\n\n    for element in range(2, number):\n        if number % element == 0:\n            return False\n\n    return True\n\ndef extract_primes(lst):\n    return [item for item in list if is_prime(item)]\n</code></pre>\n\n<p>I'm confused about how a test for <code>extract_primes</code> would look like.</p>\n\n<pre><code>def test_extract_primes():\n    lst = [0, 1, 2]\n    result = extract_primes_from_list(lst)\n    assert result == [2]\n    # and some more similar tests for empty lists, lists with only primes\n    # and lists with no primes\n</code></pre>\n\n<p>But now I'm just implicitly testing whether <code>is_prime</code> is doing its work correctly. And when <code>is_prime</code> has a bug, it will also cause the test for <code>extract_primes</code> to fail, which beats the point of unit tests, where you want to quickly spot the single point of failure.</p>\n\n<p>So it seems to me, that I shouldn't be calling <code>is_prime</code> in the first place. So I end up with something like this:</p>\n\n<pre><code>@unittest.mock.patch(\"path.to.module.is_prime\")\ndef test_extract_primes(mock_is_prime):\n    mock_is_prime.return_value = True\n    lst = list(range(10))\n    result = extract_primes(lst)\n    assert result == lst\n    for i in lst:\n        assert mock_is_prime.called_with(i)  # not sure if correct method name\n</code></pre>\n\n<p>But this is tiresome and inflexible at best. I cannot cause <code>mock_is_prime</code> to return different values inside of the same test, unless I create a construct like:</p>\n\n<pre><code>bool_list = [True, False, True]\nmock_is_prime.side_effect = lambda x: next(bool_list)\n</code></pre>\n\n<p>But that gets <em>even more</em> verbose. And as the number of function calls within the function under test increases, so does the stupid amount of boilerplate code to patch away those functions.</p>\n\n<p>When I try to look for answers on the internet, I mostly get Java/C# dependency injection instructions, where they tell you to pass the correct needed object as parameter, and just create a dummy of that object for the method you're testing. Or I get debates about whether or not to test private methods. And that's fine, I understand those things. But I can't for the life of me figure out what to do with functions that depend on other function calls. Should I simply inject those functions?</p>\n\n<pre><code>def extract_primes(lst, is_prime_function=is_prime):\n    return [item for item in list if is_prime_function(item)]\n</code></pre>\n\n<p>And pass a dummy <code>is_prime</code> function into <code>extract_primes</code> under test? That just looks stupid and litters the function signature with weird parameters. And it's practically no different from patching the function away in the amount of work required. It just removes a single <code>@patch</code> statement from the test.</p>\n\n<p>So should I not be patching away functions in the first place? And if not, at what point does a function become worth patching away anyway? Only when it's manipulating the system? Or also when it's from a completely separate module?</p>\n\n<p>I'm a little lost.</p>\n"}, {"tags": ["python", "input", "types"], "answers": [{"comments": [{"owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "reply_to_user": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1430949387, "post_id": 30088201, "comment_id": 48289740, "body": "@ShanZhengYang Please mark as answer if this is useful to you with the check on the side."}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1430959477, "post_id": 30088201, "comment_id": 48292988, "body": "At the moment, my intValue is inside a function. How can I use what I have entered into the input() later on in the code? At the moment, using <code>intValue</code> later on results in an error."}, {"owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "reply_to_user": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 1, "creation_date": 1430959707, "post_id": 30088201, "comment_id": 48293037, "body": "<code>return</code> the value you wish and assign the returned value to a variable."}, {"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 0, "creation_date": 1430961351, "post_id": 30088201, "comment_id": 48293468, "body": "Place <code>return</code> outside of the first <code>while</code> loop and then assign that value to the variable I wish to use later on? So <code>return intValue</code> and then <code>value = intValue</code>? I will try that"}], "tags": [], "owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "is_accepted": true, "score": 0, "last_activity_date": 1430949148, "last_edit_date": 1430949148, "creation_date": 1430948783, "answer_id": 30088201, "question_id": 30088057, "link": "https://stackoverflow.com/questions/30088057/enter-inputs-only-power-of-2/30088201#30088201", "title": "Enter inputs only power of 2", "body": "<p>Just use a logarithm of base 2 to do so, and check if the number is whole:</p>\n\n<pre><code>float.is_integer(math.log(x, 2)) # test if number is whole\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2393, "user_id": 844823, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/86950f2a6167e3cced55b2fa6c6a407c?s=128&d=identicon&r=PG", "display_name": "Shashank Agarwal", "link": "https://stackoverflow.com/users/844823/shashank-agarwal"}, "is_accepted": false, "score": 0, "last_activity_date": 1430949091, "last_edit_date": 1430949091, "creation_date": 1430948840, "answer_id": 30088214, "question_id": 30088057, "link": "https://stackoverflow.com/questions/30088057/enter-inputs-only-power-of-2/30088214#30088214", "title": "Enter inputs only power of 2", "body": "<p>How about if you check if the <code>log2</code> of the entered <code>intValue</code> is an integer -</p>\n\n<pre><code>import math\nif int(math.log2(intValue)) == math.log2(intValue):\n    return(\"The value is equal to \" + str(intValue) )\nelse:\n    # print error...\n</code></pre>\n\n<p>Example, in case of <code>intValue</code> being 32, you'll get <code>True</code>, but for 33, you'll get a <code>False</code>.</p>\n\n<p>Additionally, you can also check if <code>math.log2(intValue)</code> is less than or equal to 13 to satisfy your other constraint of the value being between less than <code>8192</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2234, "user_id": 2757226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VwnbH.jpg?s=128&g=1", "display_name": "chapelo", "link": "https://stackoverflow.com/users/2757226/chapelo"}, "is_accepted": false, "score": 0, "last_activity_date": 1430949161, "creation_date": 1430949161, "answer_id": 30088283, "question_id": 30088057, "link": "https://stackoverflow.com/questions/30088057/enter-inputs-only-power-of-2/30088283#30088283", "title": "Enter inputs only power of 2", "body": "<p>You can test:</p>\n\n<pre><code>(math.log(n,2)).is_integer()\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "edited": false, "score": 1, "creation_date": 1430952016, "post_id": 30088316, "comment_id": 48290820, "body": "This was the easiest implementation. Thank you!"}], "tags": [], "owner": {"reputation": 71, "user_id": 1157549, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5e8cb2b3b3fd3b1d8646b7ad103d8369?s=128&d=identicon&r=PG", "display_name": "user1157549", "link": "https://stackoverflow.com/users/1157549/user1157549"}, "is_accepted": false, "score": 1, "last_activity_date": 1430949323, "creation_date": 1430949323, "answer_id": 30088316, "question_id": 30088057, "link": "https://stackoverflow.com/questions/30088057/enter-inputs-only-power-of-2/30088316#30088316", "title": "Enter inputs only power of 2", "body": "<p>How about this?</p>\n\n<pre><code>def checkValue():\n    maxValue = 8192\n    while True:\n        try:\n            intValue = int(input('Please enter integer: '))\n        except ValueError:\n            print(\"Value must be an integer!\")\n            continue\n        else:\n            if intValue in [1, 2, 4, 8, 16, 32]:\n                return(\"The value is equal to \" + str(intValue))\n            elif intValue &lt; 1:\n                print(\"Value cannot be less than 1\")\n                continue\n            elif intValue &gt; 8192: \n                print(\"Value cannot be greater than 8192\")\n                continue\n            else:\n                return(\"Error\")\n</code></pre>\n"}], "owner": {"reputation": 12268, "user_id": 4596596, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b00c839c9e28eb73aeb299bf3ef69a76?s=128&d=identicon&r=PG&f=1", "display_name": "ShanZhengYang", "link": "https://stackoverflow.com/users/4596596/shanzhengyang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 30088201, "answer_count": 4, "score": 1, "last_activity_date": 1430949323, "creation_date": 1430948295, "question_id": 30088057, "link": "https://stackoverflow.com/questions/30088057/enter-inputs-only-power-of-2", "title": "Enter inputs only power of 2", "body": "<p>This is an easy question, but I'm stuck. </p>\n\n<p>I am writing a simple program to take an input value which is a distinct multiple of <code>2</code>. That is, it must be of the form <code>2^x</code>, including <code>1</code> which is <code>2^0=1</code>. </p>\n\n<p>So, the ONLY valid inputs are <code>1, 2, 4, 8, 16, 32,</code> etc. If the user types input <code>3</code>, my program will throw an error. I am also limiting inputs from <code>1</code> to <code>8192</code> (where <code>8192 = 2**13</code>). If the user types <code>10000</code> or <code>-3</code> or <code>0</code>, I throw an error. </p>\n\n<p>This is what I have so far. </p>\n\n<pre><code>def checkValue():\nmaxValue = 8192\nwhile True:\n    try:\n        intValue = int(input('Please enter integer: '))\n    except ValueError:\n        print(\"Value must be an integer!\")\n        continue\n    else:\n        if intValue &lt; 1:\n            print(\"Value cannot be less than 1\")\n            continue\n        elif intValue &gt; 8192: \n            print(\"Value cannot be greater than 8192\")\n            continue\n        else:\n            return(\"The value is equal to \" + str(intValue) )\n</code></pre>\n\n<p>There must be an easy way to test that the input is a power of <code>2</code>. I'm not sure how to incorporate such a test in my current code though. As there are only <code>14</code> values I am accepting as valid inputs (i.e 1 and values up to <code>2**13</code>), perhaps this is the most efficient test? </p>\n\n<p>Any advice is appreciated. Thank you.</p>\n"}, {"tags": ["python", "signal-processing", "fft"], "comments": [{"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1430948825, "post_id": 30088040, "comment_id": 48289452, "body": "Surely this breaks at <code>thresh-20</code>, since thresh is a <code>list</code>, not an <code>np.array</code>?"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1430948984, "post_id": 30088040, "comment_id": 48289545, "body": "<i>&quot;unsure is just a placeholder because...&quot;</i> - the convention here would be to use <code>xsig, ysig, _ = magnitude_spectrum...</code>, ie an underscore for unwanted values"}, {"owner": {"reputation": 37, "user_id": 3953351, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e293678bc0b146bcf5a30e5fa20798e?s=128&d=identicon&r=PG&f=1", "display_name": "Clayton Pipkin", "link": "https://stackoverflow.com/users/3953351/clayton-pipkin"}, "reply_to_user": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1430949396, "post_id": 30088040, "comment_id": 48289746, "body": "@Eric - it doesn&#39;t break. Though I didn&#39;t even realize that could have been a problem. And thanks for the convention tip! I&#39;ll change my code accordingly."}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1430949875, "post_id": 30088040, "comment_id": 48289985, "body": "I missed the <code>[1]</code>. Are you sure you don&#39;t want <code>[0]</code>, if you&#39;ve come from matlab. <code>indices(x_tiny, lambda y: y &gt; 1000)[1]</code> is better spelt <code>x_tiny[x_tiny &gt; 1000][1]</code>"}, {"owner": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1430950239, "post_id": 30088040, "comment_id": 48290155, "body": "Or the slightly faster version, <code>x_tiny[nonzero(x_tiny &gt; 1000)[1]]</code>"}, {"owner": {"reputation": 2850, "user_id": 3358223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ce1db7b10e0b2cca9ef29e1067799537?s=128&d=identicon&r=PG", "display_name": "nicoguaro", "link": "https://stackoverflow.com/users/3358223/nicoguaro"}, "edited": false, "score": 0, "creation_date": 1430962464, "post_id": 30088040, "comment_id": 48293728, "body": "Can you plot the two signals?"}, {"owner": {"reputation": 18834, "user_id": 13565, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/988a493e16f0e454c3585aed95db5e23?s=128&d=identicon&r=PG", "display_name": "Hannes Ovr&#233;n", "link": "https://stackoverflow.com/users/13565/hannes-ovr%c3%a9n"}, "edited": false, "score": 0, "creation_date": 1431012579, "post_id": 30088040, "comment_id": 48322198, "body": "It seems to me that <code>onesec</code> is not 1 second long since you do not take the starting index into acount. Did you mean <code>onesec = x[thresh_start-1:thresh_start-1+one_sec]</code>?"}, {"owner": {"reputation": 37, "user_id": 3953351, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e293678bc0b146bcf5a30e5fa20798e?s=128&d=identicon&r=PG&f=1", "display_name": "Clayton Pipkin", "link": "https://stackoverflow.com/users/3953351/clayton-pipkin"}, "reply_to_user": {"reputation": 18834, "user_id": 13565, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/988a493e16f0e454c3585aed95db5e23?s=128&d=identicon&r=PG", "display_name": "Hannes Ovr&#233;n", "link": "https://stackoverflow.com/users/13565/hannes-ovr%c3%a9n"}, "edited": false, "score": 0, "creation_date": 1431022696, "post_id": 30088040, "comment_id": 48328471, "body": "Thanks @HannesOvr&#233;n , that&#39;s it!"}, {"owner": {"reputation": 37, "user_id": 3953351, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e293678bc0b146bcf5a30e5fa20798e?s=128&d=identicon&r=PG&f=1", "display_name": "Clayton Pipkin", "link": "https://stackoverflow.com/users/3953351/clayton-pipkin"}, "reply_to_user": {"reputation": 86654, "user_id": 102441, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cf1b41a0f134b54597bf8a618be7880f?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/102441/eric"}, "edited": false, "score": 0, "creation_date": 1431093678, "post_id": 30088040, "comment_id": 48361075, "body": "@Eric I tried using thresh = x_tiny[x_tiny &gt; 1000][1] but it returns 1148, when it should be 11304. I also tried thresh = x_tiny[nonzero(x_tiny &gt; 1000)[1]] but it tells me &quot;IndexError: tuple index out of range&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 3953351, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e293678bc0b146bcf5a30e5fa20798e?s=128&d=identicon&r=PG&f=1", "display_name": "Clayton Pipkin", "link": "https://stackoverflow.com/users/3953351/clayton-pipkin"}, "edited": false, "score": 0, "creation_date": 1431022715, "post_id": 30105676, "comment_id": 48328489, "body": "Thanks @tzaman - that&#39;s really helpful. Do you know of any sites that i can read to learn  more about slice notations? I used code academy to get as far as I did... but it obviously didn&#39;t stick if they talked about it."}, {"owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "reply_to_user": {"reputation": 37, "user_id": 3953351, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e293678bc0b146bcf5a30e5fa20798e?s=128&d=identicon&r=PG&f=1", "display_name": "Clayton Pipkin", "link": "https://stackoverflow.com/users/3953351/clayton-pipkin"}, "edited": false, "score": 0, "creation_date": 1431023396, "post_id": 30105676, "comment_id": 48328893, "body": "@ClaytonPipkin you&#39;re welcome! Just read through the <a href=\"https://docs.python.org/3/tutorial/\" rel=\"nofollow noreferrer\">official tutorial</a>, it&#39;s pretty good."}], "tags": [], "owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "is_accepted": true, "score": 2, "last_activity_date": 1431012926, "creation_date": 1431012926, "answer_id": 30105676, "question_id": 30088040, "link": "https://stackoverflow.com/questions/30088040/python-fft-magnitude-spectrum-of-two-similar-signals-have-different-frequencie/30105676#30105676", "title": "Python FFT &amp; Magnitude Spectrum of two similar signals have different frequencies", "body": "<p>I'm guessing your signals aren't actually the same length. If you're thresholding them independently, your <code>thresh_start</code> value won't be the same, so: </p>\n\n<pre><code>onesec = x[thresh_start-1:one_sec]\n</code></pre>\n\n<p>will give you different-length arrays for the two files. You can either calculate the <code>threshold</code> value separately and then provide that number to this module as a constant, or make your <code>onesec</code> array be the same length from the start of <em>each</em> threshold value:</p>\n\n<pre><code>onesec = x[thresh_start-1:one_sec+thresh_start-1]\n</code></pre>\n\n<p>(Remember that slice notations is <code>[start:stop]</code>, not <code>[start:length]</code>)</p>\n"}], "owner": {"reputation": 37, "user_id": 3953351, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/7e293678bc0b146bcf5a30e5fa20798e?s=128&d=identicon&r=PG&f=1", "display_name": "Clayton Pipkin", "link": "https://stackoverflow.com/users/3953351/clayton-pipkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1744, "favorite_count": 0, "accepted_answer_id": 30105676, "answer_count": 1, "score": 1, "last_activity_date": 1431012926, "creation_date": 1430948205, "last_edit_date": 1431012248, "question_id": 30088040, "link": "https://stackoverflow.com/questions/30088040/python-fft-magnitude-spectrum-of-two-similar-signals-have-different-frequencie", "title": "Python FFT &amp; Magnitude Spectrum of two similar signals have different frequencies", "body": "<p>My goal is to compare the FFT of similar signals. For some reason, when I take the magnitude spectrum of two signals of the same length, the frequencies are different... I can't do a simple side by side comparison of two signals because of this. Anyone have any tips on how to get the same FFT on the signals?</p>\n\n<p>So for instance Signal1 provides the following:</p>\n\n<p><img src=\"https://i.stack.imgur.com/zDpu5.png\" alt=\"Signal 1\"> <img src=\"https://i.stack.imgur.com/B2AOi.png\" alt=\"Signal 2\"></p>\n\n<p>Update: Here's the two signals plotted from 0-400Hz\n<img src=\"https://i.stack.imgur.com/n9kdz.png\" alt=\"Plotted signals\"></p>\n\n<p>Here's my code:\nThe logic behind the code is to import the signal, find where the sound starts, chop the signal to be 1 second in length, perform FFT on signal for comparison.</p>\n\n<pre><code>import numpy as np\nfrom scipy.io.wavfile import read\nfrom pylab import plot\nfrom pylab import plot, psd, magnitude_spectrum\nimport matplotlib.pyplot as plt\n\n#Hello Signal!!!\n(fs, x) = read('C:\\Desktop\\Spectral Work\\EB_AB_1_2.wav') \n\n#Remove silence out of beginning of signal with threshold of 1000 \n\ndef indices(a, func):\n    #This allows to use the lambda function for equivalent of find() in matlab\n    return [i for (i, val) in enumerate(a) if func(val)]\n\n#Make the signal smaller so it uses less resources\nx_tiny = x[0:100000]\n#threshold is 1000, 0 is calling the first index greater than 1000\nthresh = indices(x_tiny, lambda y: y &gt; 1000)[1]\n# backs signal up 20 bins, so to not ignore the initial pluck sound...\nthresh_start = thresh-20\n#starts at threshstart ends at end of signal (-1 is just a referencing thing)\nanalysis_signal = x[thresh_start-1:] \n\n#Split signal so it is 1 second long\none_sec = 1*fs\nonesec = x[thresh_start-1:one_sec]\n\n#***unsure is just a placeholder because it spits out a weird error if I don't use\n#a third variable\n(xsig, ysig, unsure) = magnitude_spectrum(onesec, Fs=fs)\n</code></pre>\n\n<p>xsig is the amplitude and ysig is the Frequencies. </p>\n\n<p>Here's links to the .wav files if you're interested in trying it out yourself:\n<a href=\"https://drive.google.com/file/d/0BxHc4PVaRU7obTZ5TDlhTXdMNW8/view?usp=sharing\" rel=\"nofollow noreferrer\" title=\"wav1\">.wav1</a>\n<a href=\"https://drive.google.com/file/d/0BxHc4PVaRU7oWE5YZGttU3lhcEU/view?usp=sharing\" rel=\"nofollow noreferrer\" title=\"wav2\">.wav2</a>\nNote: originally i uploaded the wrong .wav1 file... the correct one is now up.</p>\n"}, {"tags": ["python", "json", "python-2.7", "pandas"], "comments": [{"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "edited": false, "score": 1, "creation_date": 1430948233, "post_id": 30088006, "comment_id": 48289178, "body": "You have additional data in the file that isn&#39;t part of the JSON object."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1430948326, "post_id": 30088006, "comment_id": 48289238, "body": "What does the last few lines of the json file look like?"}, {"owner": {"reputation": 8047, "user_id": 2704619, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/AJKrC.png?s=128&g=1", "display_name": "Gary Walker", "link": "https://stackoverflow.com/users/2704619/gary-walker"}, "edited": false, "score": 0, "creation_date": 1430948653, "post_id": 30088006, "comment_id": 48289383, "body": "While the json you show is valid, what you should do first is run <a href=\"http://jsonlint.com/\" rel=\"nofollow noreferrer\">jsonlint.com</a> (or similar tool) before you waste time on invalid data."}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "edited": false, "score": 2, "creation_date": 1430949627, "post_id": 30088006, "comment_id": 48289849, "body": "This example reads in fine for me in pandas 0.16.0. What version of pandas are you using?"}, {"owner": {"reputation": 1324, "user_id": 2307804, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/9971ee14af0dfc89076d95e86fbba3b8?s=128&d=identicon&r=PG", "display_name": "user62198", "link": "https://stackoverflow.com/users/2307804/user62198"}, "reply_to_user": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "edited": false, "score": 0, "creation_date": 1430950161, "post_id": 30088006, "comment_id": 48290118, "body": "@AndyHayden: pd.__version__  is &#39;0.14.0&#39;"}, {"owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "edited": false, "score": 1, "creation_date": 1430950252, "post_id": 30088006, "comment_id": 48290157, "body": "@user62198 update to 0.16.0, there&#39;s been some fixes to read_json."}, {"owner": {"reputation": 1324, "user_id": 2307804, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/9971ee14af0dfc89076d95e86fbba3b8?s=128&d=identicon&r=PG", "display_name": "user62198", "link": "https://stackoverflow.com/users/2307804/user62198"}, "reply_to_user": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "edited": false, "score": 0, "creation_date": 1431005130, "post_id": 30088006, "comment_id": 48316108, "body": "@AndyHayden, thanks I am going to do it."}, {"owner": {"reputation": 862, "user_id": 1155333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dcec13071dd7747b48798a80a6fa59b?s=128&d=identicon&r=PG", "display_name": "Cornel Ghiban", "link": "https://stackoverflow.com/users/1155333/cornel-ghiban"}, "edited": false, "score": 0, "creation_date": 1431006030, "post_id": 30088006, "comment_id": 48316870, "body": "you load the whole file or each line individually? From the edited post it&#39;s clear that you shouuld parse each line individually or alter your json file to be like this: [ {...}, {..}, {...} ]"}, {"owner": {"reputation": 1324, "user_id": 2307804, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/9971ee14af0dfc89076d95e86fbba3b8?s=128&d=identicon&r=PG", "display_name": "user62198", "link": "https://stackoverflow.com/users/2307804/user62198"}, "reply_to_user": {"reputation": 862, "user_id": 1155333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5dcec13071dd7747b48798a80a6fa59b?s=128&d=identicon&r=PG", "display_name": "Cornel Ghiban", "link": "https://stackoverflow.com/users/1155333/cornel-ghiban"}, "edited": false, "score": 1, "creation_date": 1431006214, "post_id": 30088006, "comment_id": 48317032, "body": "@Cornel Ghiban, I can load the whole file or read in an individual line. It seems converting into the format you mentioned might be a bit difficult as there are over 5 million such records."}], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 6047866, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed3577f50498c8341c9619bd37aca223?s=128&d=identicon&r=PG&f=1", "display_name": "ngoduyvu", "link": "https://stackoverflow.com/users/6047866/ngoduyvu"}, "edited": false, "score": 0, "creation_date": 1503222662, "post_id": 31458385, "comment_id": 78518720, "body": "Hi, I am trying to read un json file and store into dataframe. However, when I used your code, I got an error : &quot;TypeError: sequence item 0: expected str instance, bytes found&quot;. Do you know what wrong with it ?"}, {"owner": {"reputation": 347, "user_id": 10704977, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-gJD8VR5j_g8/AAAAAAAAAAI/AAAAAAAAAHo/vB6gPIaznKw/photo.jpg?sz=128", "display_name": "Steven Barnard", "link": "https://stackoverflow.com/users/10704977/steven-barnard"}, "edited": false, "score": 0, "creation_date": 1611085785, "post_id": 31458385, "comment_id": 116335936, "body": "change &#39;rb&#39; in line 4 to &#39;r&#39; and you should not get the bytes error."}], "tags": [], "owner": {"reputation": 467, "user_id": 4959258, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2a72a3ddf122160b091efedcb80780b4?s=128&d=identicon&r=PG", "display_name": "Artem", "link": "https://stackoverflow.com/users/4959258/artem"}, "is_accepted": false, "score": 33, "last_activity_date": 1437060223, "creation_date": 1437060223, "answer_id": 31458385, "question_id": 30088006, "link": "https://stackoverflow.com/questions/30088006/loading-a-file-with-more-than-one-line-of-json-into-pandas/31458385#31458385", "title": "Loading a file with more than one line of JSON into Pandas", "body": "<p>You have to read it line by line. For example, you can use the following code provided by <a href=\"http://www.reddit.com/user/ryptophan\" rel=\"noreferrer\">ryptophan</a> on <a href=\"http://www.reddit.com/r/MachineLearning/comments/33eglq/python_help_jsoncsv_pandas/\" rel=\"noreferrer\">reddit</a>:</p>\n\n<pre><code>import pandas as pd\n\n# read the entire file into a python array\nwith open('your.json', 'rb') as f:\n    data = f.readlines()\n\n# remove the trailing \"\\n\" from each line\ndata = map(lambda x: x.rstrip(), data)\n\n# each element of 'data' is an individual JSON object.\n# i want to convert it into an *array* of JSON objects\n# which, in and of itself, is one large JSON object\n# basically... add square brackets to the beginning\n# and end, and have all the individual business JSON objects\n# separated by a comma\ndata_json_str = \"[\" + ','.join(data) + \"]\"\n\n# now, load it into pandas\ndata_df = pd.read_json(data_json_str)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3067, "user_id": 2254228, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/badc8662de3d4d713e2685e329c2c964?s=128&d=identicon&r=PG", "display_name": "Chuck", "link": "https://stackoverflow.com/users/2254228/chuck"}, "edited": false, "score": 0, "creation_date": 1489405855, "post_id": 41226605, "comment_id": 72640924, "body": "Any idea how to get a workaround of this issue relevant to the <code>lines</code> argument? <a href=\"https://github.com/pandas-dev/pandas/issues/15132\" rel=\"nofollow noreferrer\">github.com/pandas-dev/pandas/issues/15132</a>"}], "tags": [], "owner": {"reputation": 6306, "user_id": 918, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/348a0a30fb73f56178ece8295e99f1ff?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/918/andrew"}, "is_accepted": true, "score": 274, "last_activity_date": 1482163462, "creation_date": 1482163462, "answer_id": 41226605, "question_id": 30088006, "link": "https://stackoverflow.com/questions/30088006/loading-a-file-with-more-than-one-line-of-json-into-pandas/41226605#41226605", "title": "Loading a file with more than one line of JSON into Pandas", "body": "<p>From version 0.19.0 of Pandas you can use the <code>lines</code> parameter, like so:</p>\n\n<pre><code>import pandas as pd\n\ndata = pd.read_json('/path/to/file.json', lines=True)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 10255848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e3060775b54a4389681bc530e261e63?s=128&d=identicon&r=PG&f=1", "display_name": "Triguna", "link": "https://stackoverflow.com/users/10255848/triguna"}, "is_accepted": false, "score": 4, "last_activity_date": 1578746264, "last_edit_date": 1578746264, "creation_date": 1557409834, "answer_id": 56060958, "question_id": 30088006, "link": "https://stackoverflow.com/questions/30088006/loading-a-file-with-more-than-one-line-of-json-into-pandas/56060958#56060958", "title": "Loading a file with more than one line of JSON into Pandas", "body": "<p>The following code helped me to load <code>JSON</code> content into a <code>dataframe</code>:</p>\n\n<pre><code>import json\nimport pandas as pd\n\nwith open('Appointment.json', encoding=\"utf8\") as f:\n    data = f.readlines()\n    data = [json.loads(line) for line in data] #convert string to dict format\ndf = pd.read_json(data) # Load into dataframe\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1747, "user_id": 1236326, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19364e9fcedf07efd137d751295402d2?s=128&d=identicon&r=PG", "display_name": "ProGirlXOXO", "link": "https://stackoverflow.com/users/1236326/progirlxoxo"}, "edited": false, "score": 1, "creation_date": 1598386275, "post_id": 56653602, "comment_id": 112441245, "body": "It&#39;s silly that it gives a <code>ValueError: Trailing data</code> when it should give a <code>FileNotFound</code>. This happened to me as well."}], "tags": [], "owner": {"reputation": 2534, "user_id": 3681451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49bae9e93b61c1bbe365fb70df02cc26?s=128&d=identicon&r=PG&f=1", "display_name": "szeitlin", "link": "https://stackoverflow.com/users/3681451/szeitlin"}, "is_accepted": false, "score": 1, "last_activity_date": 1562950293, "last_edit_date": 1562950293, "creation_date": 1560875957, "answer_id": 56653602, "question_id": 30088006, "link": "https://stackoverflow.com/questions/30088006/loading-a-file-with-more-than-one-line-of-json-into-pandas/56653602#56653602", "title": "Loading a file with more than one line of JSON into Pandas", "body": "<p>I had a similar problem.</p>\n\n<p>It turns out that <code>pd.read_json(myfile.json)</code> will search in the parent folder automatically, but it returns this 'trailing data' error if you're not in the same folder as the file.</p>\n\n<p>I figured it out, because when I tried to do it with <code>open('myfile.json', 'r')</code>, and I got a <code>FileNotFound</code> error, so I checked the paths.</p>\n\n<p>I had failed to move myfile.json into the same folder as my notebook.</p>\n\n<p>Changing it to <code>pd.read_json('../myfile.json')</code> just worked.</p>\n"}, {"tags": [], "owner": {"reputation": 104, "user_id": 8961443, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mAxDWWx-abE/AAAAAAAAAAI/AAAAAAAAABo/HluPP2VlEEo/photo.jpg?sz=128", "display_name": "Hosein Basafa", "link": "https://stackoverflow.com/users/8961443/hosein-basafa"}, "is_accepted": false, "score": 1, "last_activity_date": 1610018650, "creation_date": 1610018650, "answer_id": 65611460, "question_id": 30088006, "link": "https://stackoverflow.com/questions/30088006/loading-a-file-with-more-than-one-line-of-json-into-pandas/65611460#65611460", "title": "Loading a file with more than one line of JSON into Pandas", "body": "<p>I've also faced same problem. It happens when your data is written in lines separated by endlines like '\\n'; You need to first read them in lines, then convert each line to python built-in types.\nI solved it in this way:</p>\n<pre><code>with open(&quot;/path/to/file&quot;) as f:\n    content = f.readlines()\n\ndata = [eval(c) for c in content]\ndata = pd.DataFrame(data)\n\n</code></pre>\n<p>Good luck!</p>\n"}], "owner": {"reputation": 1324, "user_id": 2307804, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/9971ee14af0dfc89076d95e86fbba3b8?s=128&d=identicon&r=PG", "display_name": "user62198", "link": "https://stackoverflow.com/users/2307804/user62198"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101586, "favorite_count": 21, "accepted_answer_id": 41226605, "answer_count": 5, "score": 103, "last_activity_date": 1610018650, "creation_date": 1430948079, "last_edit_date": 1564009279, "question_id": 30088006, "link": "https://stackoverflow.com/questions/30088006/loading-a-file-with-more-than-one-line-of-json-into-pandas", "title": "Loading a file with more than one line of JSON into Pandas", "body": "<p>I am trying to read in a JSON file into Python pandas (0.14.0) data frame. Here is the first line line of the JSON file:</p>\n\n<pre><code>{\"votes\": {\"funny\": 0, \"useful\": 0, \"cool\": 0}, \"user_id\": \"P_Mk0ygOilLJo4_WEvabAA\", \"review_id\": \"OeT5kgUOe3vcN7H6ImVmZQ\", \"stars\": 3, \"date\": \"2005-08-26\", \"text\": \"This is a pretty typical cafe.  The sandwiches and wraps are good but a little overpriced and the food items are the same.  The chicken caesar salad wrap is my favorite here but everything else is pretty much par for the course.\", \"type\": \"review\", \"business_id\": \"Jp9svt7sRT4zwdbzQ8KQmw\"}\n</code></pre>\n\n<p>I am trying do the following:<code>df = pd.read_json(path)</code>.</p>\n\n<p>I am getting the following error (with full traceback):</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/Users/d/anaconda/lib/python2.7/site-packages/pandas/io/json.py\", line 198, in read_json\n    date_unit).parse()\n  File \"/Users/d/anaconda/lib/python2.7/site-packages/pandas/io/json.py\", line 266, in parse\n    self._parse_no_numpy()\n  File \"/Users/d/anaconda/lib/python2.7/site-packages/pandas/io/json.py\", line 483, in _parse_no_numpy\n    loads(json, precise_float=self.precise_float), dtype=None)\nValueError: Trailing data\n</code></pre>\n\n<p>What is the <code>Trailing data</code> error? How do I read it into a data frame?</p>\n\n<p>Following some suggestions, here are few lines of the .json file:</p>\n\n<pre><code>{\"votes\": {\"funny\": 0, \"useful\": 0, \"cool\": 0}, \"user_id\": \"P_Mk0ygOilLJo4_WEvabAA\", \"review_id\": \"OeT5kgUOe3vcN7H6ImVmZQ\", \"stars\": 3, \"date\": \"2005-08-26\", \"text\": \"This is a pretty typical cafe.  The sandwiches and wraps are good but a little overpriced and the food items are the same.  The chicken caesar salad wrap is my favorite here but everything else is pretty much par for the course.\", \"type\": \"review\", \"business_id\": \"Jp9svt7sRT4zwdbzQ8KQmw\"}\n{\"votes\": {\"funny\": 0, \"useful\": 0, \"cool\": 0}, \"user_id\": \"TNJRTBrl0yjtpAACr1Bthg\", \"review_id\": \"qq3zF2dDUh3EjMDuKBqhEA\", \"stars\": 3, \"date\": \"2005-11-23\", \"text\": \"I agree with other reviewers - this is a pretty typical financial district cafe.  However, they have fantastic pies.  I ordered three pies for an office event (apple, pumpkin cheesecake, and pecan) - all were delicious, particularly the cheesecake.  The sucker weighed in about 4 pounds - no joke.\\n\\nNo surprises on the cafe side - great pies and cakes from the catering business.\", \"type\": \"review\", \"business_id\": \"Jp9svt7sRT4zwdbzQ8KQmw\"}\n{\"votes\": {\"funny\": 0, \"useful\": 0, \"cool\": 0}, \"user_id\": \"H_mngeK3DmjlOu595zZMsA\", \"review_id\": \"i3eQTINJXe3WUmyIpvhE9w\", \"stars\": 3, \"date\": \"2005-11-23\", \"text\": \"Decent enough food, but very overpriced. Just a large soup is almost $5. Their specials are $6.50, and with an overpriced soda or juice, it's approaching $10. A bit much for a cafe lunch!\", \"type\": \"review\", \"business_id\": \"Jp9svt7sRT4zwdbzQ8KQmw\"}\n</code></pre>\n\n<p>This .json file I am using contains one JSON object in each line as per the specification.</p>\n\n<p>I tried the <a href=\"http://jsonlint.com\" rel=\"noreferrer\">jsonlint.com</a> website as suggested and it gives the following error:</p>\n\n<pre><code>Parse error on line 14:\n...t7sRT4zwdbzQ8KQmw\"}{    \"votes\": {\n----------------------^\nExpecting 'EOF', '}', ',', ']'\n</code></pre>\n"}, {"tags": ["python", "django", "postgresql", "django-queryset"], "answers": [{"tags": [], "owner": {"reputation": 2752, "user_id": 1400353, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4cd4ee3e568a3c800702be035491231a?s=128&d=identicon&r=PG&f=1", "display_name": "Othman", "link": "https://stackoverflow.com/users/1400353/othman"}, "is_accepted": false, "score": 1, "last_activity_date": 1430950365, "last_edit_date": 1430950365, "creation_date": 1430949995, "answer_id": 30088488, "question_id": 30087943, "link": "https://stackoverflow.com/questions/30087943/django-1-7-6-bug-with-datetimefieldauto-now-true-and-update-queries/30088488#30088488", "title": "Django 1.7.6 BUG with DateTimeField(auto_now=True) AND .update queries?", "body": "<blockquote>\n  <p>Realize that update() does an update at the SQL level and, thus, does\n  not call any save() methods on your models, nor does it emit the\n  pre_save or post_save signals (which are a consequence of calling\n  Model.save()). If you want to update a bunch of records for a model\n  that has a custom save() method, loop over them and call save(), like\n  this:</p>\n</blockquote>\n\n<pre><code>for m in YourModel.objects.filter(....):\n    m.first_name = \"First Name\"\n    m.save()\n</code></pre>\n\n<p>You should also know that if you have a customer <code>save</code> method inside you model it will not be called. be in the safe area.</p>\n"}], "owner": {"reputation": 839, "user_id": 3015074, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/zwfmQ.jpg?s=128&g=1", "display_name": "chabislav", "link": "https://stackoverflow.com/users/3015074/chabislav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430950365, "creation_date": 1430947895, "last_edit_date": 1430948154, "question_id": 30087943, "link": "https://stackoverflow.com/questions/30087943/django-1-7-6-bug-with-datetimefieldauto-now-true-and-update-queries", "title": "Django 1.7.6 BUG with DateTimeField(auto_now=True) AND .update queries?", "body": "<p>I encountered a pretty serous bug, that took me a few hours to figure out why I couldn't connect all the dots in Postgres Database. </p>\n\n<p>I have a model in my django app which has this field:</p>\n\n<pre><code>last_modified_on = models.DateTimeField(auto_now=True)\n</code></pre>\n\n<p>At one point in my code I use </p>\n\n<pre><code>members.update(first_name=first_name,.....)\n</code></pre>\n\n<p>Everything works fine and updates fine EXCEPT one field: </p>\n\n<pre><code>last_modified_on\n</code></pre>\n\n<p>After doing some research, I found <a href=\"https://code.djangoproject.com/ticket/15566\" rel=\"nofollow\">this</a>, but version and date of that fix are very questionable. </p>\n\n<p>Does anyone know what's up and what's the best way to resolve it? </p>\n"}, {"tags": ["python", "django"], "answers": [{"tags": [], "owner": {"reputation": 39782, "user_id": 548165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iMkYl.jpg?s=128&g=1", "display_name": "catavaran", "link": "https://stackoverflow.com/users/548165/catavaran"}, "is_accepted": true, "score": 0, "last_activity_date": 1430948914, "creation_date": 1430948914, "answer_id": 30088228, "question_id": 30087909, "link": "https://stackoverflow.com/questions/30087909/django-foreign-key-does-not-change/30088228#30088228", "title": "Django Foreign Key does not change", "body": "<p><code>todos</code> is a list-like queryset but not a real list. Every time you access <code>todos[ind]</code> you get the hit into db and load new model instance.</p>\n\n<p>So change you code to:</p>\n\n<pre><code>todo = todos[ind]\n\nprint(todo.list)\nprint(newList)\ntodo.list = newList\nprint(todo.list)\ntodo.save()\nprint(todo.list)\n</code></pre>\n\n<p>Or you can cache the queryset into list and then access to the instances by index like you did in your question:</p>\n\n<pre><code>todos = list(Todo.objects.filter(list=ls))\n\nprint(todos[ind].list)\ntodos[ind].list = newList\nprint(todos[ind].list)\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 3541386, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/65c31dbec11d3e4c768346745c7c6a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user3541386", "link": "https://stackoverflow.com/users/3541386/user3541386"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 30088228, "answer_count": 1, "score": 0, "last_activity_date": 1430948914, "creation_date": 1430947779, "question_id": 30087909, "link": "https://stackoverflow.com/questions/30087909/django-foreign-key-does-not-change", "title": "Django Foreign Key does not change", "body": "<p>I have a funny(!) problem in Django.\nI want to change a Foreign key. my code:</p>\n\n<pre><code>print(todos[ind].list)\nprint(newList)\ntodos[ind].list = newList\nprint(todos[ind].list)\ntodos[ind].save()\nprint(todos[ind].list)\n</code></pre>\n\n<p>it's output:</p>\n\n<pre><code>oldList\nnewList\noldList\noldList\n</code></pre>\n\n<p>My Model:</p>\n\n<pre><code>class Todo(models.Model):\n    name = models.CharField(max_length=255)\n    list = models.ForeignKey(TodoList)\n\n    def __str__(self):\n        return str(self.name)\n</code></pre>\n\n<p>and todos list def:</p>\n\n<pre><code>todos = Todo.objects.filter(list = ls)\n</code></pre>\n\n<p>Where, ls and newList is:</p>\n\n<pre><code>ls = TodoList.objects.get(pk = list_id)\nnewList = TodoList.objects.get(pk = 1)\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["python", "python-2.7", "import", "python-import"], "comments": [{"owner": {"reputation": 46776, "user_id": 1014938, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FqCGF.png?s=128&g=1", "display_name": "Zero Piraeus", "link": "https://stackoverflow.com/users/1014938/zero-piraeus"}, "edited": false, "score": 0, "creation_date": 1430951701, "post_id": 30087908, "comment_id": 48290726, "body": "Obvious suggestions: 1. Circular import; 2. One module shadowing another with the same name."}, {"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1430966757, "post_id": 30087908, "comment_id": 48294797, "body": "If you start Python interactively, run <code>import data</code>, and then <code>print data.__file__</code>, does it show you the path you expect?"}, {"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1430966967, "post_id": 30087908, "comment_id": 48294846, "body": "If you start with an empty directory, can you create a simple reproducer for this behavior?  Using your samples here everything seems to work with errors."}], "answers": [{"tags": [], "owner": {"reputation": 385, "user_id": 4267132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20f7946210bcd4da86d57d8a9d2e2447?s=128&d=identicon&r=PG&f=1", "display_name": "huapito", "link": "https://stackoverflow.com/users/4267132/huapito"}, "is_accepted": false, "score": 0, "last_activity_date": 1430972999, "creation_date": 1430972999, "answer_id": 30091960, "question_id": 30087908, "link": "https://stackoverflow.com/questions/30087908/cant-import-python-file-holding-data-to-use-as-a-function-importerror/30091960#30091960", "title": "Can&#39;t Import Python File Holding Data To Use As A Function - ImportError", "body": "<p>Have you tried adding the folder to the pythonpath?\nIn the console:</p>\n\n<pre><code>export PYTHONPATH=/path/to/folder/\npython /path/to/folder/x.py\n</code></pre>\n\n<p>where /path/to/folder is the path of the folder where your files are.</p>\n"}], "owner": {"reputation": 1, "user_id": 4872381, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c376ec51c0f7e7568418e70ddaaf9c1?s=128&d=identicon&r=PG&f=1", "display_name": "micgoetz", "link": "https://stackoverflow.com/users/4872381/micgoetz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 364, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430972999, "creation_date": 1430947776, "last_edit_date": 1430965995, "question_id": 30087908, "link": "https://stackoverflow.com/questions/30087908/cant-import-python-file-holding-data-to-use-as-a-function-importerror", "title": "Can&#39;t Import Python File Holding Data To Use As A Function - ImportError", "body": "<p>I have two python files, x.py and data.py, both of which are in the same directory.  The <i>only thing</i> that data.py contains is the following: </p>\n\n<pre><code>def get_data():\n  data = [{'h': hashID, 'x': x_position, 'y': y_position}, .... ]\n  return data\n</code></pre>\n\n<p>In my other x.py python file, I'm trying to use this function to get the data like so:</p>\n\n<pre><code>from data import get_data\n....\n....\ndate = get_data()\nfor i in range(0, len(date)):\n  XPos = date[i]['x']\n  YPos = date[i]['y']\n....\n</code></pre>\n\n<p>However, whenever I try to run x.py, I get the following:\nImportError: cannot import name get_data</p>\n\n<p>I've tried placing the import inside the function that I'm calling it from, rearranging the import call, and even trying:</p>\n\n<pre><code>import os\nimport sys\nscriptpath = \"...\\data.py\"\n# Add the directory containing your module to the Python path (wants absolute paths)\nsys.path.append(os.path.abspath(scriptpath))\nimport data\n</code></pre>\n\n<p>These tricks usually have me get a \"AttributeError: 'module' object has no attribute 'get_data'\", or \"TypeError: object of type 'module' has no len().\"</p>\n\n<p>Does anyone have any other ideas?</p>\n"}, {"tags": ["python", "windows", "permissions", "registry"], "comments": [{"owner": {"reputation": 29355, "user_id": 205580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460e6e299e385fd46df156c85a1dd55f?s=128&d=identicon&r=PG", "display_name": "Eryk Sun", "link": "https://stackoverflow.com/users/205580/eryk-sun"}, "edited": false, "score": 0, "creation_date": 1430989082, "post_id": 30087880, "comment_id": 48304572, "body": "Possibly you&#39;re using 32-bit Python, so it runs 32-bit regini and registry access gets redirected to <code>HKLM\\SOFTWARE\\Wow6432Node</code>. In that case you can explicitly run the 64-bit version instead. Use <code>output = subprocess.check_output(r&#39;%s\\Sysnative\\regini.exe perm.txt&#39; % os.environ[&#39;SystemRoot&#39;], stderr=subprocess.STDOUT)</code>. Don&#39;t use <code>shell=True</code>."}], "owner": {"reputation": 11, "user_id": 4872399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b967eb6172885565a045e998777280be?s=128&d=identicon&r=PG&f=1", "display_name": "Eichornj", "link": "https://stackoverflow.com/users/4872399/eichornj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1501148666, "creation_date": 1430947667, "question_id": 30087880, "link": "https://stackoverflow.com/questions/30087880/running-regini-from-python", "title": "Running regini from python", "body": "<p>The following is all using python as the scripting language. Ok I made a txt file and am attempting to use regini to make changes to two registry key permissions from a python script that is going to automate an install process for some techs at my office. The script is called perm.txt. Here is what I have tried.</p>\n\n<pre><code>pr = subprocess.Popen(\"regini perm.txt\", shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)\n\nos.system(\"regini perm.txt\")\n\npr = subprocess.Popen(\"reg.bat\", shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)\n\nos.system(\"reg.bat\")\n</code></pre>\n\n<p>the reg.bat file contains</p>\n\n<pre><code>@echo off\nregini perm.txt\n</code></pre>\n\n<p>perm.txt contains\nHKLM\\SOFTWARE\\Microsoft\\Windows NT\\CurrentVersion\\Winlogon [1 5 7 17]</p>\n\n<p>when I run the reg.bat file myself by clicking on it or calling it in command prompt the permissions change perfectly, same thing happens when I run \"regini perm.txt\". However when I run any of these through python the permissions don't change. I don't get any errors it just does not affect the permissions. I shouldn't get any errors because I know the command regini and the batch file both work perfectly when I run them manually. I am pulling at straws here and have tried tons a different ways to make this work, if anyone knows of a better way to change the permissions through python or make these commands work please let me know. I have looked at winreg but cannot seem to find a way to use it to change registry permissions. </p>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 10175, "user_id": 848277, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/d5cdc781dc896e21c88f1cd5ad1cc6b1?s=128&d=identicon&r=PG", "display_name": "pyCthon", "link": "https://stackoverflow.com/users/848277/pycthon"}, "edited": false, "score": 1, "creation_date": 1430947581, "post_id": 30087815, "comment_id": 48288860, "body": "try printing <code>line</code> and see what you get"}, {"owner": {"reputation": 262567, "user_id": 748858, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/17gYz.png?s=128&g=1", "display_name": "mgilson", "link": "https://stackoverflow.com/users/748858/mgilson"}, "edited": false, "score": 1, "creation_date": 1430948028, "post_id": 30087815, "comment_id": 48289085, "body": "Is it possible that the file has a final (empty) line with no fields?  Perhaps:  <code>if line and line[16] == &#39;S&#39;: ...</code>"}, {"owner": {"reputation": 5, "user_id": 4872364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a3a40b71e1f52474b5f9f7c44470265?s=128&d=identicon&r=PG&f=1", "display_name": "Prison Feed", "link": "https://stackoverflow.com/users/4872364/prison-feed"}, "edited": false, "score": 0, "creation_date": 1430948486, "post_id": 30087815, "comment_id": 48289314, "body": "I added a printed line. Thanks."}, {"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1430950096, "post_id": 30087815, "comment_id": 48290086, "body": "I find it interesting that your <code>reader</code> object is preserving quotes in the data.  I thought <code>quoting=csv.QUOTE_ALL</code> is a directive to <code>csv.writer</code> objects and was ignored by <code>csv.reader</code> objects. Something is fishy here."}], "answers": [{"tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": false, "score": 0, "last_activity_date": 1430947755, "creation_date": 1430947755, "answer_id": 30087901, "question_id": 30087815, "link": "https://stackoverflow.com/questions/30087815/parsing-csv-files-with-python-if-specific-data-exists/30087901#30087901", "title": "Parsing CSV files with Python IF specific data exists", "body": "<p><a href=\"http://pandas.pydata.org/\" rel=\"nofollow\"><code>pandas</code></a> can do this easily:</p>\n\n<pre><code>In [52]:\n# read the csv into a dataframe\ndf = pd.read_csv(r'c:\\data\\sample.txt', quotechar=\"\\\"\", header=None)\ndf\nOut[52]:\n     0   1   2     3  4  5   6   7  8   9   10  11  12  13  14  15 16\n0  2015  21   2  RICK  D  w   1   1  f   8 NaN   0 NaN NaN NaN NaN  S\n1  2015  56   5  RICK  E  g   1   1  k   8 NaN  15 NaN NaN NaN NaN  F\nIn [55]:\n# we can filter the values and then call count()\ndf.loc[df[16] == 'S',16].count()\nOut[55]:\n1\nIn [56]:\n# we can also show the count for all unique values\ndf[16].value_counts()\nOut[56]:\nS    1\nF    1\ndtype: int64\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1430948006, "post_id": 30087944, "comment_id": 48289074, "body": "That would be a <code>SyntaxError</code>.  My guess is that the OP&#39;s original code doesn&#39;t have that error."}, {"owner": {"reputation": 5, "user_id": 4872364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a3a40b71e1f52474b5f9f7c44470265?s=128&d=identicon&r=PG&f=1", "display_name": "Prison Feed", "link": "https://stackoverflow.com/users/4872364/prison-feed"}, "edited": false, "score": 0, "creation_date": 1430948758, "post_id": 30087944, "comment_id": 48289421, "body": "Correct Steven, my typo here. Sorry. Nice catch though haifzhan!"}, {"owner": {"reputation": 5, "user_id": 4872364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a3a40b71e1f52474b5f9f7c44470265?s=128&d=identicon&r=PG&f=1", "display_name": "Prison Feed", "link": "https://stackoverflow.com/users/4872364/prison-feed"}, "edited": false, "score": 0, "creation_date": 1430949634, "post_id": 30087944, "comment_id": 48289854, "body": "I tried your code 100%. I still get:     if line[16] == &quot;S&quot;: IndexError: list index out of range. If you print line, does it look like mine?"}, {"owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "edited": false, "score": 0, "creation_date": 1430949975, "post_id": 30087944, "comment_id": 48290040, "body": "you might have 1) empty lines  2) lines contains more than or less than 17 columns. the code works if the input is the 2 lines you provided in the question"}], "tags": [], "owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1430949893, "last_edit_date": 1430949893, "creation_date": 1430947895, "answer_id": 30087944, "question_id": 30087815, "link": "https://stackoverflow.com/questions/30087815/parsing-csv-files-with-python-if-specific-data-exists/30087944#30087944", "title": "Parsing CSV files with Python IF specific data exists", "body": "<p><code>=</code>Assigns values from right side operands to left side operand</p>\n\n<p><code>if line[16] = \"S\":</code>  should be <code>if line[16] == \"S\":</code></p>\n\n<pre><code>hzhang@dell-work ~ $ cat sample.csv \n\"2015\",\"21\",\"2\",\"RICK\",\"D\",\"w\",\"1\",\"1\",\"f\",\"8\",\"\",\"00\",\"\",\"\",\"\",\"\",\"S\"\n\"2015\",\"56\",\"5\",\"RICK\",\"E\",\"g\",\"1\",\"1\",\"k\",\"8\",\"\",\"15\",\"\",\"\",\"\",\"\",\"F\"\nhzhang@dell-work ~ $ cat test.py \nimport csv\nwith open(\"sample.csv\", \"rb\") as csvfile:\n    csvreader = csv.reader(csvfile, delimiter=\",\")\n    total = 0\n    for line in csvreader:\n        if line[16] ==\"S\":\n            total = total + int(line[2])\n\n    print \"total is:{}\".format(total)\nhzhang@dell-work ~ $ python test.py \ntotal is:2\n</code></pre>\n\n<p>Based on your code:</p>\n\n<pre><code>import csv\nfile = open(\"sample.csv\")\ntotal = 0\nfor line in csv.reader(file, quotechar='\"', delimiter=',', quoting=csv.QUOTE_ALL, skipinitialspace=True):\n    if line[16] == \"S\":\n        total = total + int(line[2])\n\nfile.close()\nprint \"total:{}\".format(total)\nhzhang@dell-work ~ $ python test.py \ntotal:2\n</code></pre>\n\n<p>Please makes sure all your input lines have 17 fields, and converts 3rd column of each before you sum them up.</p>\n\n<p>to check which lines do not have 17 fields.\n    if len(line) != 17:\n        print line</p>\n"}, {"comments": [{"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 1, "creation_date": 1430948115, "post_id": 30087998, "comment_id": 48289130, "body": "&quot;The root cause of your problem is assuming that line has been split on white space.&quot;  On what basis do you make that claim?  I don&#39;t see it."}, {"owner": {"reputation": 880, "user_id": 116090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cea41095c8bd38891c836f07fbcc9c5?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/116090/erik"}, "reply_to_user": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1430948248, "post_id": 30087998, "comment_id": 48289188, "body": "I see, yes, I hurried to get the answer out. I&#39;ll rephrase that."}, {"owner": {"reputation": 880, "user_id": 116090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cea41095c8bd38891c836f07fbcc9c5?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/116090/erik"}, "reply_to_user": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1430948655, "post_id": 30087998, "comment_id": 48289384, "body": "Dang, it get&#39;s worse. My answer was based on my bug.  My suggestion for negative indices stands though :)  I&#39;ll edit my answer."}, {"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1430949438, "post_id": 30087998, "comment_id": 48289769, "body": "Using negative indices in this context may mask bugs in the data.  A line with only 4 fields would pass silently."}, {"owner": {"reputation": 880, "user_id": 116090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cea41095c8bd38891c836f07fbcc9c5?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/116090/erik"}, "reply_to_user": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1430964634, "post_id": 30087998, "comment_id": 48294243, "body": "Very true; adding or subtracting  columns is an excellent way to expose the fragility of parsing non-self-descriptive data.  In my own experience data is more likely to grow a column than shrink one, thank you for sharing your experience."}], "tags": [], "owner": {"reputation": 880, "user_id": 116090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cea41095c8bd38891c836f07fbcc9c5?s=128&d=identicon&r=PG", "display_name": "Erik", "link": "https://stackoverflow.com/users/116090/erik"}, "is_accepted": false, "score": -1, "last_activity_date": 1430948789, "last_edit_date": 1430948789, "creation_date": 1430948048, "answer_id": 30087998, "question_id": 30087815, "link": "https://stackoverflow.com/questions/30087815/parsing-csv-files-with-python-if-specific-data-exists/30087998#30087998", "title": "Parsing CSV files with Python IF specific data exists", "body": "<p>You might consider using negative array indices to access items from the ends of arrays:</p>\n\n<pre><code>total = 0\nfor line in cvs.reader(...):\n    if line[-1] == \"S\":\n        total += int(line[2])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "edited": false, "score": 0, "creation_date": 1430949570, "post_id": 30088046, "comment_id": 48289824, "body": "line[2] is string, you have to convert it to integer before sum them up"}, {"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "reply_to_user": {"reputation": 23980, "user_id": 1735756, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/SloZJ.jpg?s=128&g=1", "display_name": "Haifeng Zhang", "link": "https://stackoverflow.com/users/1735756/haifeng-zhang"}, "edited": false, "score": 0, "creation_date": 1430949700, "post_id": 30088046, "comment_id": 48289894, "body": "@haifzhan:  Fair enough, but that&#39;s not the bug in question."}, {"owner": {"reputation": 5, "user_id": 4872364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a3a40b71e1f52474b5f9f7c44470265?s=128&d=identicon&r=PG&f=1", "display_name": "Prison Feed", "link": "https://stackoverflow.com/users/4872364/prison-feed"}, "edited": false, "score": 0, "creation_date": 1430950222, "post_id": 30088046, "comment_id": 48290144, "body": "Sure enough. haifzhan wrote good code, but I somehow added an extra line with 2 spaces in the middle of the 150,000 lines of my CSV file. Your code found the error, which I have added to the start of the program, so a bad line will never cause this problem again. THANK YOU BOTH!!!"}], "tags": [], "owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "is_accepted": true, "score": 0, "last_activity_date": 1430949822, "last_edit_date": 1430949822, "creation_date": 1430948228, "answer_id": 30088046, "question_id": 30087815, "link": "https://stackoverflow.com/questions/30087815/parsing-csv-files-with-python-if-specific-data-exists/30088046#30088046", "title": "Parsing CSV files with Python IF specific data exists", "body": "<p>It's possible that the file does not consistently have 17 columns.  One way for this to happen would be if there is an extra newline at the end of the file.</p>\n\n<p>Here's how to detect which line causes the problem.</p>\n\n<pre><code>reader = csv.reader(file, quotechar='\"', delimiter=',', quoting=csv.QUOTE_ALL, skipinitialspace=True)\nfor line_num, line in enumerate(reader, start=1):\n    try:\n        if line[16] == \"S\":\n            total = total + line[2]\n    except IndexError:\n        # show offending line\n        print(line_num, line)\n        # reraise to halt execution\n        raise\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 4872364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a3a40b71e1f52474b5f9f7c44470265?s=128&d=identicon&r=PG&f=1", "display_name": "Prison Feed", "link": "https://stackoverflow.com/users/4872364/prison-feed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 30088046, "answer_count": 4, "score": 0, "last_activity_date": 1430949893, "creation_date": 1430947472, "last_edit_date": 1430948295, "question_id": 30087815, "link": "https://stackoverflow.com/questions/30087815/parsing-csv-files-with-python-if-specific-data-exists", "title": "Parsing CSV files with Python IF specific data exists", "body": "<p>The data files look like this:</p>\n\n<pre><code>\"2015\",\"21\",\"2\",\"RICK\",\"D\",\"w\",\"1\",\"1\",\"f\",\"8\",\"\",\"00\",\"\",\"\",\"\",\"\",\"S\"\n\"2015\",\"56\",\"5\",\"RICK\",\"E\",\"g\",\"1\",\"1\",\"k\",\"8\",\"\",\"15\",\"\",\"\",\"\",\"\",\"F\"\n</code></pre>\n\n<p>I need to add the third field to total only IF the last field is \"S\". Otherwise, the line is just skipped. </p>\n\n<p>I tried importing CSV and using the following:</p>\n\n<pre><code>for line in csv.reader(file, quotechar='\"', delimiter=',', quoting=csv.QUOTE_ALL, skipinitialspace=True):\nif line[16] == \"S\":\n    total = total + line[2]\n</code></pre>\n\n<p>This tells me \"IndexError: list index out of range\". Maybe there is a better way. I thought Import CSV would do most the work for me. What's the best way? At this point, I would take any way that works. </p>\n\n<p>Printing a line displays the following:</p>\n\n<pre><code>['\"2015\"', '\"43\"', '\"2\"', '\"ZETA\"', '\"W\"', '\"x\"', '\"1\"', '\"1\"', '\"d\"', '\"2\"', '\"\"', '\"31\"', '\"\"', '\"\"', '\"\"', '\"\"', '\"N\"']\n</code></pre>\n"}, {"tags": ["python", "django", "postgresql"], "comments": [{"owner": {"reputation": 15350, "user_id": 286432, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a3fa5eb649a60d9ee569ca2fe1917b32?s=128&d=identicon&r=PG", "display_name": "Reto Aebersold", "link": "https://stackoverflow.com/users/286432/reto-aebersold"}, "edited": false, "score": 0, "creation_date": 1430947362, "post_id": 30087725, "comment_id": 48288748, "body": "In your database config is an empty field called <code>PASSWORD</code>"}], "answers": [{"comments": [{"owner": {"reputation": 729, "user_id": 3097157, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/307f1b481f07f044893ce9b39e2e2820?s=128&d=identicon&r=PG&f=1", "display_name": "Ambidextrous", "link": "https://stackoverflow.com/users/3097157/ambidextrous"}, "edited": false, "score": 0, "creation_date": 1430950225, "post_id": 30087923, "comment_id": 48290146, "body": "which password? the db i created - vader, has no password"}, {"owner": {"reputation": 2752, "user_id": 1400353, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4cd4ee3e568a3c800702be035491231a?s=128&d=identicon&r=PG&f=1", "display_name": "Othman", "link": "https://stackoverflow.com/users/1400353/othman"}, "reply_to_user": {"reputation": 729, "user_id": 3097157, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/307f1b481f07f044893ce9b39e2e2820?s=128&d=identicon&r=PG&f=1", "display_name": "Ambidextrous", "link": "https://stackoverflow.com/users/3097157/ambidextrous"}, "edited": false, "score": 0, "creation_date": 1430950289, "post_id": 30087923, "comment_id": 48290178, "body": "@BeginnersClub the root password. You should have a user and a password."}, {"owner": {"reputation": 729, "user_id": 3097157, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/307f1b481f07f044893ce9b39e2e2820?s=128&d=identicon&r=PG&f=1", "display_name": "Ambidextrous", "link": "https://stackoverflow.com/users/3097157/ambidextrous"}, "edited": false, "score": 0, "creation_date": 1430952814, "post_id": 30087923, "comment_id": 48291102, "body": "yes i created a user root, but without any password. ex: createuser root"}, {"owner": {"reputation": 2752, "user_id": 1400353, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4cd4ee3e568a3c800702be035491231a?s=128&d=identicon&r=PG&f=1", "display_name": "Othman", "link": "https://stackoverflow.com/users/1400353/othman"}, "reply_to_user": {"reputation": 729, "user_id": 3097157, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/307f1b481f07f044893ce9b39e2e2820?s=128&d=identicon&r=PG&f=1", "display_name": "Ambidextrous", "link": "https://stackoverflow.com/users/3097157/ambidextrous"}, "edited": false, "score": 0, "creation_date": 1430953000, "post_id": 30087923, "comment_id": 48291168, "body": "Try to create a user other than root and give it the privileges to use the database, then paste the new information in you settings"}], "tags": [], "owner": {"reputation": 2752, "user_id": 1400353, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4cd4ee3e568a3c800702be035491231a?s=128&d=identicon&r=PG&f=1", "display_name": "Othman", "link": "https://stackoverflow.com/users/1400353/othman"}, "is_accepted": false, "score": 1, "last_activity_date": 1430947829, "creation_date": 1430947829, "answer_id": 30087923, "question_id": 30087725, "link": "https://stackoverflow.com/questions/30087725/unable-to-apply-django-migrations-to-postgres-database/30087923#30087923", "title": "Unable to apply django migrations to postgres database", "body": "<p>You need to add your database user password to your <code>settings.py</code></p>\n\n<pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.postgresql_psycopg2',\n        'NAME': 'vader',\n        'USER': 'root',\n\n        # Add password here \n        'PASSWORD': '',\n\n\n        'HOST': 'localhost',\n        'PORT': '5432',\n    }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7019641, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/a2cc5ad25bae25af617291707195f9c2?s=128&d=identicon&r=PG", "display_name": "Xip47", "link": "https://stackoverflow.com/users/7019641/xip47"}, "is_accepted": false, "score": 1, "last_activity_date": 1476454205, "creation_date": 1476454205, "answer_id": 40045270, "question_id": 30087725, "link": "https://stackoverflow.com/questions/30087725/unable-to-apply-django-migrations-to-postgres-database/40045270#40045270", "title": "Unable to apply django migrations to postgres database", "body": "<p>You need to remove <code>PASSWORD</code>, <code>HOST</code> and <code>PORT</code> like this:</p>\n\n<pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.postgresql_psycopg2',\n        'NAME': 'vader',\n        'USER': 'root'\n    }\n}\n</code></pre>\n\n<p>Then do the migrate again.</p>\n"}], "owner": {"reputation": 729, "user_id": 3097157, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/307f1b481f07f044893ce9b39e2e2820?s=128&d=identicon&r=PG&f=1", "display_name": "Ambidextrous", "link": "https://stackoverflow.com/users/3097157/ambidextrous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3944, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1476454205, "creation_date": 1430947140, "last_edit_date": 1430950601, "question_id": 30087725, "link": "https://stackoverflow.com/questions/30087725/unable-to-apply-django-migrations-to-postgres-database", "title": "Unable to apply django migrations to postgres database", "body": "<p>My django project earlier used sqlite, but now we have changed it to use Postgresql. Here are the new settings:</p>\n\n<pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.postgresql_psycopg2',\n        'NAME': 'vader',\n        'USER': 'root',\n        'PASSWORD': '',\n        'HOST': 'localhost',\n        'PORT': '5432',\n    }\n}\n</code></pre>\n\n<p>I have created a db vader and user root as its owner. Now, when I try to apply migrations with: </p>\n\n<pre><code>python manage.py migrate\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>(env1)sushil@Linux-Machine:~/Adomattic/Vader$ python manage.py migrate\n    [profile] heap size is 22.5\u00a0MB\nTraceback (most recent call last):\n  File \"manage.py\", line 10, in &lt;module&gt;\n    execute_from_command_line(sys.argv)\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/core/management/__init__.py\", line 385, in execute_from_command_line\n    utility.execute()\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/core/management/__init__.py\", line 377, in execute\n    self.fetch_command(subcommand).run_from_argv(self.argv)\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/core/management/base.py\", line 288, in run_from_argv\n    self.execute(*args, **options.__dict__)\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/core/management/base.py\", line 338, in execute\n    output = self.handle(*args, **options)\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/core/management/commands/migrate.py\", line 63, in handle\n    executor = MigrationExecutor(connection, self.migration_progress_callback)\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/db/migrations/executor.py\", line 17, in __init__\n    self.loader = MigrationLoader(self.connection)\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/db/migrations/loader.py\", line 49, in __init__\n    self.build_graph()\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/db/migrations/loader.py\", line 184, in build_graph\n    self.applied_migrations = recorder.applied_migrations()\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/db/migrations/recorder.py\", line 59, in applied_migrations\n    self.ensure_schema()\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/db/migrations/recorder.py\", line 49, in ensure_schema\n    if self.Migration._meta.db_table in self.connection.introspection.get_table_list(self.connection.cursor()):\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/db/backends/__init__.py\", line 165, in cursor\n    cursor = self.make_debug_cursor(self._cursor())\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/db/backends/__init__.py\", line 138, in _cursor\n    self.ensure_connection()\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/db/backends/__init__.py\", line 133, in ensure_connection\n    self.connect()\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/db/utils.py\", line 94, in __exit__\n    six.reraise(dj_exc_type, dj_exc_value, traceback)\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/db/backends/__init__.py\", line 133, in ensure_connection\n    self.connect()\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/db/backends/__init__.py\", line 122, in connect\n    self.connection = self.get_new_connection(conn_params)\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py\", line 134, in get_new_connection\n    return Database.connect(**conn_params)\n  File \"/home/sushil/Adomattic/env1/local/lib/python2.7/site-packages/psycopg2/__init__.py\", line 164, in connect\n    conn = _connect(dsn, connection_factory=connection_factory, async=async)\ndjango.db.utils.OperationalError: fe_sendauth: no password supplied\n</code></pre>\n\n<p>It is saying no password supplied, but I am not sure where to pass the password. Any ideas what I can do to fix this?</p>\n"}, {"tags": ["python", "performance", "numpy", "dictionary", "financial"], "answers": [{"tags": [], "owner": {"reputation": 705380, "user_id": 190597, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/aabc98d5c6482ca0e1405ec97710f30a?s=128&d=identicon&r=PG&f=1", "display_name": "unutbu", "link": "https://stackoverflow.com/users/190597/unutbu"}, "is_accepted": true, "score": 10, "last_activity_date": 1430947699, "last_edit_date": 1430947699, "creation_date": 1430947214, "answer_id": 30087748, "question_id": 30087636, "link": "https://stackoverflow.com/questions/30087636/what-is-the-most-efficient-way-to-get-log-returns-in-numpy/30087748#30087748", "title": "What is the most efficient way to get log returns in numpy", "body": "<pre><code>f_logR = lambda ri, rf: np.log(rf) - np.log(ri)\nlogR = np.asarray([f_logR(ar[i], rf) for i,rf in enumerate(ar[1:])])\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>logR = np.diff(np.log(ar))\n</code></pre>\n\n<p><a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.log.html\" rel=\"noreferrer\"><code>np.log</code></a> takes the log of every value in <code>ar</code>, and <a href=\"http://docs.scipy.org/doc/numpy/reference/generated/numpy.diff.html\" rel=\"noreferrer\"><code>np.diff</code></a> takes the difference between every consecutive pair of values.</p>\n"}], "owner": {"reputation": 8680, "user_id": 4013571, "user_type": "registered", "accept_rate": 82, "profile_image": "https://lh4.googleusercontent.com/-G_CrKyh2orQ/AAAAAAAAAAI/AAAAAAAAADA/d4aRKztH0r4/photo.jpg?sz=128", "display_name": "Alexander McFarlane", "link": "https://stackoverflow.com/users/4013571/alexander-mcfarlane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6053, "favorite_count": 2, "accepted_answer_id": 30087748, "answer_count": 1, "score": 4, "last_activity_date": 1531398845, "creation_date": 1430946817, "last_edit_date": 1531398845, "question_id": 30087636, "link": "https://stackoverflow.com/questions/30087636/what-is-the-most-efficient-way-to-get-log-returns-in-numpy", "title": "What is the most efficient way to get log returns in numpy", "body": "<p>What is the fastest and most elegant solution to building a sequence of log returns?</p>\n\n<p>The problem is mainly around mapping a function that takes the i'th and (i+1)'th elements as inputs for every element in the array.</p>\n\n<p>for a function and simple array I can define the log returns as follows:</p>\n\n<pre><code>import numpy as np\nar = np.random.rand(10)\nf_logR = lambda ri, rf: np.log(rf) - np.log(ri)\n\nlogR = np.asarray([f_logR(ar[i], rf) for i,rf in enumerate(ar[1:])])\n</code></pre>\n\n<p>However, I am building a list from individual numpy elements and then converting it back into a numpy array again. </p>\n\n<p>I am also accessing the elements in a fairly brutish way as I have little experience with generator functions or numpy internals.</p>\n"}, {"tags": ["python", "matplotlib", "colormap"], "answers": [{"tags": [], "owner": {"reputation": 10567, "user_id": 4680533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tee8v.jpg?s=128&g=1", "display_name": "Ed Smith", "link": "https://stackoverflow.com/users/4680533/ed-smith"}, "is_accepted": true, "score": 6, "last_activity_date": 1430947094, "creation_date": 1430947094, "answer_id": 30087713, "question_id": 30087594, "link": "https://stackoverflow.com/questions/30087594/scatter-plot-colors-corresponding-to-a-value/30087713#30087713", "title": "Scatter plot colors corresponding to a value", "body": "<p>You need to set the minimum and maximum colour manually using vmin and vmax arguments. For your case, this is,</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom matplotlib import cm\nfrom math import sin\n\nx=range(10)\ny=[sin(i) for i in x]\n#colors=np.linspace(0,1,10)\nB=[1.29,1.27,1.46,0.91,0.56,0.99,1.00,0.37,1.24,1.23]\n\ncs = plt.scatter(x,y,c=B,cmap=cm.jet,vmin=0.,vmax=2.)\nplt.colorbar(cs)\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 4446272, "user_type": "registered", "profile_image": "https://graph.facebook.com/1253645466/picture?type=large", "display_name": "Greenfire", "link": "https://stackoverflow.com/users/4446272/greenfire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5442, "favorite_count": 1, "accepted_answer_id": 30087713, "answer_count": 1, "score": 4, "last_activity_date": 1430947094, "creation_date": 1430946677, "question_id": 30087594, "link": "https://stackoverflow.com/questions/30087594/scatter-plot-colors-corresponding-to-a-value", "title": "Scatter plot colors corresponding to a value", "body": "<p>In all the colormap posts I have not found this answer, or maybe did not understand it.</p>\n\n<p>I want to make a scatter plot with colors. </p>\n\n<p>I have a list B:</p>\n\n<pre><code>[1.29,\n 1.27,\n 1.46,\n 0.91,\n 0.56,\n 0.99,\n 1.00,\n 0.37,\n 1.24,\n 1.23]\n</code></pre>\n\n<p>I will just use a stupid example, if you do:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom matplotlib import cm\nfrom math import sin\n\nx=range(10)\ny=[sin(i) for i in x]\ncolors=np.linspace(0,1,10)\n\nplt.scatter(x,y,c=colors,cmap=cm.jet)\n</code></pre>\n\n<p>You get points with different colors, nice.\n<img src=\"https://i.stack.imgur.com/GGnfK.png\" alt=\"enter image description here\"></p>\n\n<p>BUT ! I do not want to only get nicely colored points ! I want the points to be colored according to the \"intensity\" of the values in B.</p>\n\n<p>Here is my stupid attempt:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nfrom matplotlib import cm\nfrom math import sin\n\nx=range(10)\ny=[sin(i) for i in x]\n#colors=np.linspace(0,1,10)\nB=[1.29,1.27,1.46,0.91,0.56,0.99,1.00,0.37,1.24,1.23]\n\nplt.scatter(x,y,c=B,cmap=cm.jet)\n</code></pre>\n\n<p>You get points colored according to the intensity of the values in B, very nice:\n<img src=\"https://i.stack.imgur.com/aZH2Y.png\" alt=\"enter image description here\"></p>\n\n<p>BUT !! I would like to change the \"scale\" of colors to have deep blue at 0 and deep red at 2. In which case the third point (associated with <code>B[2]=1.46</code>) should be orange and not deep red ! How should I do this? </p>\n"}, {"tags": ["python", "mysql", "django"], "answers": [{"comments": [{"owner": {"reputation": 1371, "user_id": 3326925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/pT1A1.jpg?s=128&g=1", "display_name": "Shrikant Kakani", "link": "https://stackoverflow.com/users/3326925/shrikant-kakani"}, "edited": false, "score": 0, "creation_date": 1430946947, "post_id": 30087629, "comment_id": 48288551, "body": "Actually I got the answer using &quot;ABC.objects.values(&#39;A&#39;, &#39;B&#39;).exclude(B__isnull=True)&quot;. Could you tell me which approach is better and why?"}, {"owner": {"reputation": 6894, "user_id": 1517648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8WbTx.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/1517648/steve"}, "reply_to_user": {"reputation": 1371, "user_id": 3326925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/pT1A1.jpg?s=128&g=1", "display_name": "Shrikant Kakani", "link": "https://stackoverflow.com/users/3326925/shrikant-kakani"}, "edited": false, "score": 1, "creation_date": 1430947895, "post_id": 30087629, "comment_id": 48289024, "body": "<code>exclude</code> is basically a <code>filter</code> with NOT in front of it."}], "tags": [], "owner": {"reputation": 6894, "user_id": 1517648, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8WbTx.jpg?s=128&g=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/1517648/steve"}, "is_accepted": false, "score": 2, "last_activity_date": 1430947860, "last_edit_date": 1430947860, "creation_date": 1430946797, "answer_id": 30087629, "question_id": 30087536, "link": "https://stackoverflow.com/questions/30087536/django-select-query-to-get-multiple-columns-with-condition/30087629#30087629", "title": "Django Select Query to get multiple columns with condition", "body": "<p>Try using the <a href=\"https://docs.djangoproject.com/en/dev/ref/models/querysets/#django.db.models.query.QuerySet.filter\" rel=\"nofollow\"><code>filter</code></a> method:</p>\n\n<pre><code>ABC.objects.filter(B__isnull=False).values('A', 'B')\n</code></pre>\n\n<p>As you mention it is also possible to use <code>exclude</code>:</p>\n\n<pre><code>ABC.objects.exclude(B__isnull=True).values('A', 'B')\n</code></pre>\n\n<p>The <a href=\"https://docs.djangoproject.com/en/dev/ref/models/querysets/#exclude\" rel=\"nofollow\">exclude</a> method is the same as a filter, it just puts a <code>not</code> around the condition that is matched.  They're the perfect opposites, it's just the code will read better with filter in some circumstances, and exclude with other conditions.</p>\n\n<p>There is <a href=\"https://docs.djangoproject.com/en/1.8/ref/models/querysets/#values\" rel=\"nofollow\">one minor note</a> in the docs about when the ordering of calls like <code>exclude</code> and <code>values</code>, but it doesn't make a logical difference:</p>\n\n<blockquote>\n  <p>Finally, note that a ValuesQuerySet is a subclass of QuerySet and it implements most of the same methods. You can call filter() on it, order_by(), etc. That means that these two calls are identical:</p>\n</blockquote>\n\n<pre><code>Blog.objects.values().order_by('id')\nBlog.objects.order_by('id').values()\n</code></pre>\n\n<blockquote>\n  <p>The people who made Django prefer to put all the SQL-affecting methods first, followed (optionally) by any output-affecting methods (such as values()), but it doesn\u2019t really matter. This is your chance to really flaunt your individualism.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1371, "user_id": 3326925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/pT1A1.jpg?s=128&g=1", "display_name": "Shrikant Kakani", "link": "https://stackoverflow.com/users/3326925/shrikant-kakani"}, "is_accepted": true, "score": 3, "last_activity_date": 1430946887, "creation_date": 1430946887, "answer_id": 30087655, "question_id": 30087536, "link": "https://stackoverflow.com/questions/30087536/django-select-query-to-get-multiple-columns-with-condition/30087655#30087655", "title": "Django Select Query to get multiple columns with condition", "body": "<p>Nevermind, I got it :)</p>\n\n<pre><code>ABC.objects.values('A', 'B').exclude(B__isnull=True)\n</code></pre>\n"}], "owner": {"reputation": 1371, "user_id": 3326925, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/pT1A1.jpg?s=128&g=1", "display_name": "Shrikant Kakani", "link": "https://stackoverflow.com/users/3326925/shrikant-kakani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4527, "favorite_count": 0, "accepted_answer_id": 30087655, "answer_count": 2, "score": 1, "last_activity_date": 1430947860, "creation_date": 1430946478, "question_id": 30087536, "link": "https://stackoverflow.com/questions/30087536/django-select-query-to-get-multiple-columns-with-condition", "title": "Django Select Query to get multiple columns with condition", "body": "<p>I've a table/model 'ABC' that has two column fields 'A' and 'B'. I want to query the above table as follows:</p>\n\n<pre><code>select A, B from ABC where B is not null;\n</code></pre>\n\n<p>I'm able to do </p>\n\n<pre><code>select A, B from ABC;\n</code></pre>\n\n<p>but I don't know how to introduce the null check condition.\nI've tried the following with no success:</p>\n\n<pre><code>ABC.objects.values('A', 'B')  # which is getting all the tuples including null valued 'B' column\nABC.objects.values('A', 'B', 'B__isnull=False')  # which is incorrect\nABC.objects.values('A', 'B__isnull=False')  # which is incorrect again.\n</code></pre>\n\n<p>Can someone provide the correct format/query which I can use?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "progress-bar", "subprocess", "event-driven"], "comments": [{"owner": {"reputation": 1329, "user_id": 4067206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/744808f16c60746bdad874140156c809?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/4067206/mario"}, "edited": false, "score": 1, "creation_date": 1430946539, "post_id": 30087506, "comment_id": 48288362, "body": "Spawn a thread, use a callback"}, {"owner": {"reputation": 77965, "user_id": 2073595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ugcXJ.jpg?s=128&g=1", "display_name": "dano", "link": "https://stackoverflow.com/users/2073595/dano"}, "edited": false, "score": 1, "creation_date": 1430946959, "post_id": 30087506, "comment_id": 48288561, "body": "What GUI framework are you using? The right way to do this is somewhat dependent on that."}, {"owner": {"reputation": 43, "user_id": 3461771, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/75401896/picture?type=large", "display_name": "nima_santur", "link": "https://stackoverflow.com/users/3461771/nima-santur"}, "edited": false, "score": 0, "creation_date": 1430950711, "post_id": 30087506, "comment_id": 48290345, "body": "I&#39;m using tkinter for the GUI"}, {"owner": {"reputation": 43, "user_id": 3461771, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/75401896/picture?type=large", "display_name": "nima_santur", "link": "https://stackoverflow.com/users/3461771/nima-santur"}, "reply_to_user": {"reputation": 1329, "user_id": 4067206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/744808f16c60746bdad874140156c809?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/4067206/mario"}, "edited": false, "score": 0, "creation_date": 1430950870, "post_id": 30087506, "comment_id": 48290416, "body": "@Mario , can you be more specific? I&#39;m researching and it turns out I can spawn a process using &quot;Process&quot; &amp; &quot;Queue&quot;. Is that what you mean. something like this:      q = Queue()     p1 = Process(target=someFunction, args=(q,))     p1.start()"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1431185618, "post_id": 30087506, "comment_id": 48392160, "body": "what is your OS? You don&#39;t need threads; you could handle <code>SIGCHLD</code> signal (write to an fd to trigger I/O event in the signal handler or use OS interface such as <code>signalfd</code> directly (subscribe using <code>tk.createfilehandler</code> to listen for I/O events) )."}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1431189281, "post_id": 30087506, "comment_id": 48393367, "body": "btw, you don&#39;t need a <code>while</code> loop to poll the subprocess, here&#39;s <a href=\"https://gist.github.com/zed/4067619\" rel=\"nofollow noreferrer\">working code example</a>"}, {"owner": {"reputation": 43, "user_id": 3461771, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/75401896/picture?type=large", "display_name": "nima_santur", "link": "https://stackoverflow.com/users/3461771/nima-santur"}, "reply_to_user": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1431373234, "post_id": 30087506, "comment_id": 48458516, "body": "Thanks @J.F.Sebastian . The example works.   However, it still relies on a loop to listen to &quot;self.process.poll(), right? I was looking for more like a callback method. Where you specify the system command you want to execute and have it call a function upon completion and pass the return code.  Something like this, would be most ideal, but not sure if it&#39;s possible. <a href=\"https://docs.python.org/2/library/multiprocessing.html\" rel=\"nofollow noreferrer\">docs.python.org/2/library/multiprocessing.html</a> 16.6.2.9. Process Pools .... apply_async"}, {"owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "edited": false, "score": 0, "creation_date": 1431375916, "post_id": 30087506, "comment_id": 48459919, "body": "To avoid polling, you could use a signal handler as I&#39;ve suggested above. It won&#39;t work on Windows. A portable solution is to use threads (or a thread pool: <code>multiprocessing.pool.ThreadPool</code>, <code>concurrent.futures.ThreadPoolExecutor</code> -- they probably have callback interfaces already)."}], "answers": [{"tags": [], "owner": {"reputation": 343905, "user_id": 4279, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d92ce60d3a4cbe03598e27c2e8dee69d?s=128&d=identicon&r=PG", "display_name": "jfs", "link": "https://stackoverflow.com/users/4279/jfs"}, "is_accepted": true, "score": 1, "last_activity_date": 1436702485, "last_edit_date": 1436702485, "creation_date": 1431812909, "answer_id": 30281111, "question_id": 30087506, "link": "https://stackoverflow.com/questions/30087506/event-driven-system-call-in-python/30281111#30281111", "title": "Event Driven System Call in Python", "body": "<p>To avoid polling subprocess' status, you could use <code>SIGCHLD</code> signal on Unix. To combine it with tkinter's event loop, you could use <a href=\"http://cr.yp.to/docs/selfpipe.html\" rel=\"nofollow\">the self-pipe trick</a>. It also workarounds <a href=\"https://mail.python.org/pipermail/tkinter-discuss/2011-January/002737.html\" rel=\"nofollow\">the possible tkinter + signal issue</a> without the need to wake the event loop periodically.</p>\n\n<pre><code>#!/usr/bin/env python3\nimport logging\nimport os\nimport signal\nimport subprocess\nimport tkinter\n\ninfo = logging.getLogger(__name__).info\n\ndef on_signal(pipe, mask, count=[0]):\n    try:\n        signals = os.read(pipe, 512)\n    except BlockingIOError:\n        return # signals have been already dealt with\n\n    # from asyncio/unix_events.py\n    #+start\n    # Because of signal coalescing, we must keep calling waitpid() as\n    # long as we're able to reap a child.\n    while True:\n        try:\n            pid, status = os.waitpid(-1, os.WNOHANG)\n        except ChildProcessError:\n            info('No more child processes exist.')\n            return\n        else:\n            if pid == 0:\n                info('A child process is still alive. signals=%r%s',\n                     signals, ' SIGCHLD'*(any(signum == signal.SIGCHLD\n                                              for signum in signals)))\n                return\n            #+end\n            # you could call your callback here\n            info('{pid} child exited with status {status}'.format(**vars()))\n            count[0] += 1\n            if count[0] == 2:\n                root.destroy() # exit GUI\n\n\nlogging.basicConfig(format=\"%(asctime)-15s %(message)s\", datefmt='%F %T',\n                    level=logging.INFO)\nroot = tkinter.Tk()\nroot.withdraw() # hide GUI\n\nr, w = os.pipe2(os.O_NONBLOCK | os.O_CLOEXEC) \nsignal.set_wakeup_fd(w) \nroot.createfilehandler(r, tkinter.READABLE, on_signal)\nsignal.signal(signal.SIGCHLD, lambda signum, frame: None) # enable SIGCHLD\nsignal.siginterrupt(signal.SIGCHLD, False) # restart interrupted syscalls automatically\ninfo('run children')\np = subprocess.Popen('sleep 4', shell=True)\nsubprocess.Popen('sleep 1', shell=True)\nroot.after(2000, p.send_signal, signal.SIGSTOP) # show that SIGCHLD may be delivered\nroot.after(3000, p.send_signal, signal.SIGCONT) # while the child is still alive\nroot.after(5000, lambda: p.poll() is None and p.kill()) # kill it\nroot.mainloop()\ninfo('done')\n</code></pre>\n\n<h3>Output</h3>\n\n<pre><code>2015-05-20 23:39:50 run children\n2015-05-20 23:39:51 16991 child exited with status 0\n2015-05-20 23:39:51 A child process is still alive. signals=b'\\x11' SIGCHLD\n2015-05-20 23:39:52 A child process is still alive. signals=b'\\x11' SIGCHLD\n2015-05-20 23:39:53 A child process is still alive. signals=b'\\x11' SIGCHLD\n2015-05-20 23:39:54 16989 child exited with status 0\n2015-05-20 23:39:54 No more child processes exist.\n2015-05-20 23:39:54 done\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 3461771, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/75401896/picture?type=large", "display_name": "nima_santur", "link": "https://stackoverflow.com/users/3461771/nima-santur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 637, "favorite_count": 1, "accepted_answer_id": 30281111, "answer_count": 1, "score": 1, "last_activity_date": 1436702485, "creation_date": 1430946340, "question_id": 30087506, "link": "https://stackoverflow.com/questions/30087506/event-driven-system-call-in-python", "title": "Event Driven System Call in Python", "body": "<p>I'm trying to implement an event driven process with system call or subprocess. Basically I want to launch a non-blocking system command and upon completion of that system call, I want a function to be called. \nThis is so that I can start a GUI progress bar, launch a system command and have the progress bar continue, and when the system call finishes, have the progress bar stop. </p>\n\n<p>What I want to absolutely NOT DO, is to spawn a process, get its process ID and keep checking for the completion of that process in a while loop. </p>\n\n<p>Below is just an example of how I imagine this should work (All of these are inside a class)</p>\n\n<pre><code>def launchTool(self):\n\n    self.progressbar.config(mode = 'indeterminate')\n    self.progressbar.start(20)\n    self.launchButton.config(state = 'disabled')\n    self.configCombobox.config(state = 'disabled')\n\n    ##  here the \"onCompletion\" is a pointer to a function\n    call(\"/usr/bin/make psf2_dcf\", shell=True, onCompletion = self.toolCompleted)\n\n\ndef onCompletion(self):\n\n    print('DONE running Tool')\n\n    self.progressbar.stop()\n    self.launchButton.config(state = 'normal')\n    self.configCombobox.config(state = 'normal')\n</code></pre>\n"}, {"tags": ["python", "regex", "path"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1430946545, "post_id": 30087486, "comment_id": 48288364, "body": "Why do you have a capture group in your regexp if you&#39;re not doing a replacement? And there&#39;s no need to put <code>[ ]</code> around <code>&#47;</code>."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 1, "creation_date": 1430948895, "post_id": 30087486, "comment_id": 48289495, "body": "Please do not call local variables <code>list</code>. You mask the builtin <code>list()</code> constructor."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4616044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e5f3f229bff21a1afce5340c7e99c39?s=128&d=identicon&r=PG&f=1", "display_name": "MgMh", "link": "https://stackoverflow.com/users/4616044/mgmh"}, "edited": false, "score": 0, "creation_date": 1431030997, "post_id": 30087556, "comment_id": 48333173, "body": "awsome that did the job too :)"}], "tags": [], "owner": {"reputation": 12977, "user_id": 4453262, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b98c905b863b482c3d1d6616d3482b54?s=128&d=identicon&r=PG&f=1", "display_name": "karthik manchala", "link": "https://stackoverflow.com/users/4453262/karthik-manchala"}, "is_accepted": true, "score": 0, "last_activity_date": 1430946542, "creation_date": 1430946542, "answer_id": 30087556, "question_id": 30087486, "link": "https://stackoverflow.com/questions/30087486/generating-a-regex-for-path/30087556#30087556", "title": "generating a regex for path", "body": "<p>You can use the following regex to match the desired output:</p>\n\n<pre><code>(^.*?\\/(?:Accept|Integrate))$\n</code></pre>\n\n<p>If you want to remove the unnecessary paths.. you can use the following:</p>\n\n<pre><code>(^.*?\\/(?:Accept|Integrate))(?!$).*\n</code></pre>\n\n<p>Python code:</p>\n\n<pre><code>def filtre(list):\n    for i,item in enumerate(list):\n        matchObject=re.search(r\"(^.*?\\/(?:Accept|Integrate))(?!$).*\", item)\n        if matchObject :\n            list.remove(item)   \n        else:\n            i=i+1\n    return list\n</code></pre>\n\n<p>See <a href=\"https://regex101.com/r/yL9mF8/3\" rel=\"nofollow\">DEMO</a></p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 4616044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e5f3f229bff21a1afce5340c7e99c39?s=128&d=identicon&r=PG&f=1", "display_name": "MgMh", "link": "https://stackoverflow.com/users/4616044/mgmh"}, "edited": false, "score": 0, "creation_date": 1431031266, "post_id": 30088115, "comment_id": 48333321, "body": "good idea working with a temp list but deleting entries from the same list decrease some processor treatments because the drive I&#39;m working on is a server replicate a size of 430Gb of nodes"}, {"owner": {"reputation": 146, "user_id": 4825612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7644c60fe42953f1a1e085ccd9ab4229?s=128&d=identicon&r=PG&f=1", "display_name": "GCord", "link": "https://stackoverflow.com/users/4825612/gcord"}, "reply_to_user": {"reputation": 3, "user_id": 4616044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e5f3f229bff21a1afce5340c7e99c39?s=128&d=identicon&r=PG&f=1", "display_name": "MgMh", "link": "https://stackoverflow.com/users/4616044/mgmh"}, "edited": false, "score": 0, "creation_date": 1431090066, "post_id": 30088115, "comment_id": 48358584, "body": "But you just can&#39;t delete entries while iterating on your list, it can cause undefined behavior... on my laptop the solution you&#39;ve accepted gives the wrong result because the loop skips the next item after you&#39;ve removed one:   <code>c:&#47;project1&#47;main&#47;Node&#47;Accept&#47;testCase2&#47;navigate.c c:&#47;project1&#47;main&#47;Node&#47;Accept&#47;testCase4&#47;search.c c:&#47;project1&#47;main&#47;Node&#47;Accept c:&#47;project1&#47;main&#47;Node&#47;Integrate c:&#47;project1&#47;main&#47;Tree&#47;Integrate&#47;testCase1&#47;Browse.c c:&#47;project1&#47;main&#47;Tree&#47;Integrate</code>   See this post... <a href=\"http://stackoverflow.com/questions/6022764/python-removing-list-element-while-iterating-over-list\" title=\"python removing list element while iterating over list\">stackoverflow.com/questions/6022764/&hellip;</a>"}, {"owner": {"reputation": 3, "user_id": 4616044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e5f3f229bff21a1afce5340c7e99c39?s=128&d=identicon&r=PG&f=1", "display_name": "MgMh", "link": "https://stackoverflow.com/users/4616044/mgmh"}, "edited": false, "score": 0, "creation_date": 1431117885, "post_id": 30088115, "comment_id": 48375093, "body": "you were right i did a debug ,it seems that it skips some lines but i get the expected result by chance :) I&#39;ll try yours and give a feedback thanks"}], "tags": [], "owner": {"reputation": 146, "user_id": 4825612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7644c60fe42953f1a1e085ccd9ab4229?s=128&d=identicon&r=PG&f=1", "display_name": "GCord", "link": "https://stackoverflow.com/users/4825612/gcord"}, "is_accepted": false, "score": 0, "last_activity_date": 1430948489, "creation_date": 1430948489, "answer_id": 30088115, "question_id": 30087486, "link": "https://stackoverflow.com/questions/30087486/generating-a-regex-for-path/30088115#30088115", "title": "generating a regex for path", "body": "<p>Instead of matching for what you don't want, you can match what you want, with:\n<code>^.*/(Accept|Integrate)$</code></p>\n\n<p>Now there is another problem with your loop: you can't remove items from a list you're iterating on! You need to work on a temporary result list. </p>\n\n<p>Since you seem to want to filter the list \"in place\" you can use this:\n<code>list[:] = tmp</code></p>\n\n<p>Here's the code: </p>\n\n<pre><code>import re\n\ndef filtre(list):\n    tmp = []\n    for item in list:\n        # matchObject=re.search(r\"Accept/.*/]\", item) or re.search(r\"(Integrate/.*/])\", item)\n        if re.match(r\"^.*/(Accept|Integrate)$\", item):\n            tmp.append(item)\n    list[:] = tmp\n\n\ninput = [\"c:/project1/main/Node/Accept/testCase1/Browse.c\",\n\"c:/project1/main/Node/Accept/testCase2/navigate.c\",\n\"c:/project1/main/Node/Accept/testCase2/save.c\",\n\"c:/project1/main/Node/Accept/testCase4/search.c\",\n\"c:/project1/main/Node/Accept\",\n\"c:/project1/main/Node/Integrate\",\n\"c:/project1/main/Node/Accept/destroy/fullCoverage/remove.py\",\n\"c:/project1/main/Tree/Integrate/testCase1/Browse.c\",\n\"c:/project1/main/Tree/Integrate\"\n]\n\nfiltre(input)\nprint '\\n'.join(input)\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>c:/project1/main/Node/Accept\nc:/project1/main/Node/Integrate\nc:/project1/main/Tree/Integrate\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 0, "last_activity_date": 1430948523, "creation_date": 1430948523, "answer_id": 30088125, "question_id": 30087486, "link": "https://stackoverflow.com/questions/30087486/generating-a-regex-for-path/30088125#30088125", "title": "generating a regex for path", "body": "<p>You can use this regex:</p>\n\n<pre><code>^\\S+?(?:Accept|Integrate)\\s*$\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/mY3jK3/1\" rel=\"nofollow\">Demo</a></p>\n\n<p>In Python:</p>\n\n<pre><code>txt='''\\\nc:/project1/main/Node/Accept/testCase1/Browse.c\nc:/project1/main/Node/Accept/testCase2/navigate.c\nc:/project1/main/Node/Accept/testCase2/save.c\nc:/project1/main/Node/Accept/testCase4/search.c\nc:/project1/main/Node/Accept\nc:/project1/main/Node/Integrate\nc:/project1/main/Node/Accept/destroy/fullCoverage/remove.py\nc:/project1/main/Tree/Integrate/testCase1/Browse.c\nc:/project1/main/Tree/Integrate'''\n\n&gt;&gt;&gt; re.findall(r'^\\S+?(?:Accept|Integrate)\\s*$', txt, re.M)\n['c:/project1/main/Node/Accept', 'c:/project1/main/Node/Integrate', 'c:/project1/main/Tree/Integrate']\n</code></pre>\n\n<p>If your source is a list of strings rather than a single string, use <a href=\"https://docs.python.org/2/library/functions.html#filter\" rel=\"nofollow\">filter</a> with the same regex:</p>\n\n<pre><code>&gt;&gt;&gt; filter(lambda s: re.search(r'^\\S+?(?:Accept|Integrate)\\s*$', s), txt.splitlines())\n['c:/project1/main/Node/Accept', 'c:/project1/main/Node/Integrate', 'c:/project1/main/Tree/Integrate']\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4616044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e5f3f229bff21a1afce5340c7e99c39?s=128&d=identicon&r=PG&f=1", "display_name": "MgMh", "link": "https://stackoverflow.com/users/4616044/mgmh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 30087556, "answer_count": 3, "score": 0, "last_activity_date": 1430948523, "creation_date": 1430946261, "last_edit_date": 1430946300, "question_id": 30087486, "link": "https://stackoverflow.com/questions/30087486/generating-a-regex-for-path", "title": "generating a regex for path", "body": "<p>I'm trying to write a function that delete unwanted paths  from a list of paths, those unwanted ones have the same pattern for example c:/project1/main/Node/Accept/*something\nthis is my code</p>\n\n<pre><code>def filtre(list):\n    for i,item in enumerate(list):\n        matchObject=re.search(r\"(Accept/.*[/])\", item) or re.search(r\"(Integrate/.*[/])\", item)\n        if matchObject :\n            list.remove(item)   \n        else:\n            i=i+1\n    return list\n</code></pre>\n\n<p>and this an example of my global list:(Input)</p>\n\n<pre><code>c:/project1/main/Node/Accept/testCase1/Browse.c\nc:/project1/main/Node/Accept/testCase2/navigate.c\nc:/project1/main/Node/Accept/testCase2/save.c\nc:/project1/main/Node/Accept/testCase4/search.c\nc:/project1/main/Node/Accept\nc:/project1/main/Node/Integrate\nc:/project1/main/Node/Accept/destroy/fullCoverage/remove.py\nc:/project1/main/Tree/Integrate/testCase1/Browse.c\nc:/project1/main/Tree/Integrate\n</code></pre>\n\n<p>desired output:</p>\n\n<pre><code>c:/project1/main/Node/Accept\nc:/project1/main/Node/Integrate\nc:/project1/main/Tree/Integrate\n</code></pre>\n\n<p>I hope that is clear ,remove every path followed by more child nodes after the nodes Accept and Integrate.</p>\n"}, {"tags": ["python", "django", "unicode", "format"], "comments": [{"owner": {"reputation": 496598, "user_id": 18936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6f1bea81a68b2f1cfe3efbb9be94bc?s=128&d=identicon&r=PG", "display_name": "bobince", "link": "https://stackoverflow.com/users/18936/bobince"}, "edited": false, "score": 0, "creation_date": 1430948054, "post_id": 30087437, "comment_id": 48289099, "body": "Apart from the problem of non-ASCII <code>str</code> being passed to <code>unicode.format()</code>, you also appear to be injecting raw strings into HTML markup, which likely represents a XSS security hole. When you create HTML from plain text variables you need to HTML-escape them before adding them to the markup string, for example using <code>django.utils.html.escape</code>."}, {"owner": {"reputation": 107, "user_id": 1391438, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf80a6a798e84c34adb907f205a44817?s=128&d=identicon&r=PG", "display_name": "Dalbenn", "link": "https://stackoverflow.com/users/1391438/dalbenn"}, "reply_to_user": {"reputation": 496598, "user_id": 18936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6f1bea81a68b2f1cfe3efbb9be94bc?s=128&d=identicon&r=PG", "display_name": "bobince", "link": "https://stackoverflow.com/users/18936/bobince"}, "edited": false, "score": 0, "creation_date": 1431026560, "post_id": 30087437, "comment_id": 48330641, "body": "Thats a good point. thank you."}], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 1391438, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf80a6a798e84c34adb907f205a44817?s=128&d=identicon&r=PG", "display_name": "Dalbenn", "link": "https://stackoverflow.com/users/1391438/dalbenn"}, "edited": false, "score": 0, "creation_date": 1431027062, "post_id": 30087587, "comment_id": 48330921, "body": "Thanks for the explanation...the reason is sooo stupid, but the traceback specifically said that the string that could not be encoded was the name. I used get_absolute_url instead of get_absolute_url()."}], "tags": [], "owner": {"reputation": 32227, "user_id": 2337736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77aacbcecad375ad6d8c45cfe43afbc5?s=128&d=identicon&r=PG", "display_name": "Peter DeGlopper", "link": "https://stackoverflow.com/users/2337736/peter-deglopper"}, "is_accepted": false, "score": 0, "last_activity_date": 1430947269, "last_edit_date": 1430947269, "creation_date": 1430946652, "answer_id": 30087587, "question_id": 30087437, "link": "https://stackoverflow.com/questions/30087437/python-format-unicodedecodeerror/30087587#30087587", "title": "Python format UnicodeDecodeError", "body": "<p>One of your <code>user</code> lookups is returning an encoded bytestring rather than a Unicode object. </p>\n\n<p>When Python 2.x is asked to concatenate Unicode and encoded bytestrings, it does so by decoding the bytestring into Unicode using the default encoding, which is <code>ascii</code> unless you go to some effort to change it. The <code># -*- coding: utf-8 -*-</code> directive sets the encoding for your source code, but not the system default encoding.</p>\n\n<p>From testing <code>format</code>, it looks like it tries to convert the argument to match the type of the left-hand side.</p>\n\n<p>Under 2.x, things will work fine as long as the bytestring you're using can be decoded using <code>ascii</code>:</p>\n\n<pre><code>&gt;&gt;&gt; u'test\\u270c {0}'.format('bar')\nu'test\\u270c bar'\n</code></pre>\n\n<p>Or of course you're formatting in another Unicode object:</p>\n\n<pre><code>&gt;&gt;&gt; u'test\\u270c {0}'.format(u'bar\\u270d')\nu'test\\u270c bar\\u270d'\n</code></pre>\n\n<p>If you omit the <code>u</code> before your format, you'll get a <code>UnicodeEncodeError</code>:</p>\n\n<pre><code>&gt;&gt;&gt; 'foo {0}'.format(u'test\\u270c')\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nUnicodeEncodeError: 'ascii' codec can't encode character u'\\u270c' in position 4: ordinal not in range(128)\n</code></pre>\n\n<p>Conversely, if you format an encoded string with non-ascii bytes into a Unicode object, you'll get a <code>UnicodeDecodeError</code>:</p>\n\n<pre><code>&gt;&gt;&gt; u'foo {0}'.format(test.encode('utf-8'))\nTraceback (most recent call last):\n  File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nUnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 4: ordinal not in range(128)\n</code></pre>\n\n<p>I'd start by checking the <code>get_absolute_url</code> implementation. Valid URLs can never contain unescaped non-ascii characters, so they should always be decodable by ascii, but if you're using things built from standard Django models <code>first_name</code> and <code>last_name</code> should be Unicode objects so I'd bet on a buggy implementation of <code>get_absolute_url</code> at first.</p>\n"}, {"tags": [], "owner": {"reputation": 1073, "user_id": 169809, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/41ce46781c23e21c819cfc4e3d76bd63?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/169809/chris"}, "is_accepted": false, "score": 0, "last_activity_date": 1430947012, "creation_date": 1430947012, "answer_id": 30087689, "question_id": 30087437, "link": "https://stackoverflow.com/questions/30087437/python-format-unicodedecodeerror/30087689#30087689", "title": "Python format UnicodeDecodeError", "body": "<p>Check the type of the arguments to format, I guess they are 'str', not 'unicode'.\nBefore using them, encode them apropriatly, e.g.:</p>\n\n<pre><code>url = request.user.get_absolute_url\nif isinstance(url, str):\n    print 'url was str'\n    a = url.decode('utf-8')\nmsg = u'U\u017eivatel &lt;a href=\"{0}\"&gt;...&lt;/a&gt;').format(url)\n</code></pre>\n\n<p>(The <code>if</code> and <code>print</code> statement is just for demonstration purpose)\nUse the other values accordingly.</p>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 1391438, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf80a6a798e84c34adb907f205a44817?s=128&d=identicon&r=PG", "display_name": "Dalbenn", "link": "https://stackoverflow.com/users/1391438/dalbenn"}, "is_accepted": true, "score": 0, "last_activity_date": 1431027311, "creation_date": 1431027311, "answer_id": 30110133, "question_id": 30087437, "link": "https://stackoverflow.com/questions/30087437/python-format-unicodedecodeerror/30110133#30110133", "title": "Python format UnicodeDecodeError", "body": "<p>The solution is pretty simple, I used <code>get_absolute_url</code>instead of <code>get_absolute_url()</code>. Sorry to bother you. </p>\n"}], "owner": {"reputation": 107, "user_id": 1391438, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cf80a6a798e84c34adb907f205a44817?s=128&d=identicon&r=PG", "display_name": "Dalbenn", "link": "https://stackoverflow.com/users/1391438/dalbenn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 840, "favorite_count": 0, "accepted_answer_id": 30110133, "answer_count": 3, "score": 0, "last_activity_date": 1431027311, "creation_date": 1430946085, "question_id": 30087437, "link": "https://stackoverflow.com/questions/30087437/python-format-unicodedecodeerror", "title": "Python format UnicodeDecodeError", "body": "<p>Hello I want to save string into variable like this:</p>\n\n<pre><code>  msg=_(u'U\u017eivatel &lt;a href=\"{0}\"&gt;{1} {3}&lt;/a&gt;').format(request.user.get_absolute_url, request.user.first_name, request.user.last_name)\n</code></pre>\n\n<p>But since the inserted variables contain characters with accents such as \u0161 I get UnicodeDecodeError even though I have set the encoding by<code># -*- coding: utf-8 -*-</code></p>\n\n<p>It is weird (IMHO) that it was working when I was creating this string by concatenating the variables like this: </p>\n\n<pre><code>msg=u'U\u017eivatel &lt;a href=\"' + request.user.get_absolute_url + ...\n</code></pre>\n\n<p>I have no clue why it shouldn't be working since its running project and I had to use such statements many times.</p>\n\n<p>If you have any advice how to solve this I will be very grateful. </p>\n"}, {"tags": ["python", "google-app-engine", "webapp2"], "comments": [{"owner": {"reputation": 5359, "user_id": 246801, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/54ac1ed63d1eb6bfc3eb0d89a8c2e135?s=128&d=identicon&r=PG", "display_name": "Zach Young", "link": "https://stackoverflow.com/users/246801/zach-young"}, "edited": false, "score": 1, "creation_date": 1430947682, "post_id": 30087428, "comment_id": 48288898, "body": "Is there a reason you&#39;re not writing the whole file at once?  Also, have you verified, maybe with <code>logging</code>, that you&#39;ve properly received the file with the content length you expect from the POST?"}, {"owner": {"reputation": 1717, "user_id": 2771609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5aacbf9faf22d6128971878220c4682d?s=128&d=identicon&r=PG&f=1", "display_name": "user2771609", "link": "https://stackoverflow.com/users/2771609/user2771609"}, "edited": false, "score": 0, "creation_date": 1430959955, "post_id": 30087428, "comment_id": 48293106, "body": "Ah, I remember you from your prev question. You seem dead set on uploading to your webapp2 handler. Just stop. You are doing this wrong. USE THE BLOBSTORE.  Yes. You use the blobstore to get the file to GCS. You really should just read up the whole blobstore overview. I&#39;m not sure you are going to get any help here if you don&#39;t do the basic steps."}, {"owner": {"reputation": 7058, "user_id": 541106, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/o2wqV.jpg?s=128&g=1", "display_name": "Andrea Sindico", "link": "https://stackoverflow.com/users/541106/andrea-sindico"}, "reply_to_user": {"reputation": 5359, "user_id": 246801, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/54ac1ed63d1eb6bfc3eb0d89a8c2e135?s=128&d=identicon&r=PG", "display_name": "Zach Young", "link": "https://stackoverflow.com/users/246801/zach-young"}, "edited": false, "score": 0, "creation_date": 1430977553, "post_id": 30087428, "comment_id": 48298087, "body": "@Zachary I have already checked the file is uploaded by verifying self.request.POST.multi[&#39;file&#39;].filename actually returns the expected string. I hope this means the content is uploaded as well. I have also tried gcs_file.write(inFile.read()) but still get 0 bytes"}, {"owner": {"reputation": 7058, "user_id": 541106, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/o2wqV.jpg?s=128&g=1", "display_name": "Andrea Sindico", "link": "https://stackoverflow.com/users/541106/andrea-sindico"}, "reply_to_user": {"reputation": 5359, "user_id": 246801, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/54ac1ed63d1eb6bfc3eb0d89a8c2e135?s=128&d=identicon&r=PG", "display_name": "Zach Young", "link": "https://stackoverflow.com/users/246801/zach-young"}, "edited": false, "score": 0, "creation_date": 1430978558, "post_id": 30087428, "comment_id": 48298543, "body": "@Zachary I have verified the byte is correctly uploaded as the uploaded size is correct. But there something wrong with that loop as it enters only once (and the readline returns null). How should I read the file contents?"}, {"owner": {"reputation": 5359, "user_id": 246801, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/54ac1ed63d1eb6bfc3eb0d89a8c2e135?s=128&d=identicon&r=PG", "display_name": "Zach Young", "link": "https://stackoverflow.com/users/246801/zach-young"}, "edited": false, "score": 0, "creation_date": 1431013002, "post_id": 30087428, "comment_id": 48322541, "body": "@Sindico: Hm, you haven&#39;t shown creating <code>filename</code> (with the correct bucket name), but if you&#39;re getting a file at all, albeit empty, then I assume <code>filename</code> is correct. And you&#39;ve attempted to just write a static string, e.g., <code>gcs_file.write(&#39;some boring text&#39;)</code>?"}, {"owner": {"reputation": 5359, "user_id": 246801, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/54ac1ed63d1eb6bfc3eb0d89a8c2e135?s=128&d=identicon&r=PG", "display_name": "Zach Young", "link": "https://stackoverflow.com/users/246801/zach-young"}, "edited": false, "score": 0, "creation_date": 1431013486, "post_id": 30087428, "comment_id": 48322891, "body": "Looks like you&#39;ve copied the sample code here: <a href=\"https://cloud.google.com/appengine/docs/python/googlecloudstorageclient/retryparams_class\" rel=\"nofollow noreferrer\">cloud.google.com/appengine/docs/python/googlecloudstoragecli&zwnj;&#8203;ent/&hellip;</a>?"}, {"owner": {"reputation": 5359, "user_id": 246801, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/54ac1ed63d1eb6bfc3eb0d89a8c2e135?s=128&d=identicon&r=PG", "display_name": "Zach Young", "link": "https://stackoverflow.com/users/246801/zach-young"}, "reply_to_user": {"reputation": 1717, "user_id": 2771609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5aacbf9faf22d6128971878220c4682d?s=128&d=identicon&r=PG&f=1", "display_name": "user2771609", "link": "https://stackoverflow.com/users/2771609/user2771609"}, "edited": false, "score": 1, "creation_date": 1431014472, "post_id": 30087428, "comment_id": 48323635, "body": "@user2771609: &quot;I&#39;m not sure you are going to get any help here if you don&#39;t do the basic steps.&quot;... Google provides this API, so, it&#39;s valid. Even if Sindico didn&#39;t really need to bypass Blobstore and just wanted to do it this way, this is still a solution that&#39;s well enough (for GAE) documented."}, {"owner": {"reputation": 1717, "user_id": 2771609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5aacbf9faf22d6128971878220c4682d?s=128&d=identicon&r=PG&f=1", "display_name": "user2771609", "link": "https://stackoverflow.com/users/2771609/user2771609"}, "reply_to_user": {"reputation": 5359, "user_id": 246801, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/54ac1ed63d1eb6bfc3eb0d89a8c2e135?s=128&d=identicon&r=PG", "display_name": "Zach Young", "link": "https://stackoverflow.com/users/246801/zach-young"}, "edited": false, "score": 0, "creation_date": 1431016301, "post_id": 30087428, "comment_id": 48324783, "body": "@ZacharyYoung I&#39;m pointing out that there is a better solution to his problem if he breaks out of this mold of uploading to his handler. He is working under some misconceptions. His update to the questions displays it clearly. He seems to believe that encrypting the file in his handler is somehow better than sending the file to the blobstore then encrypting it and saving to GCS. I think a good answer should point out the misconceptions that are apparent in the question, instead of letting him go down a suboptimal path."}], "answers": [{"tags": [], "owner": {"reputation": 1717, "user_id": 2771609, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5aacbf9faf22d6128971878220c4682d?s=128&d=identicon&r=PG&f=1", "display_name": "user2771609", "link": "https://stackoverflow.com/users/2771609/user2771609"}, "is_accepted": false, "score": 1, "last_activity_date": 1431019621, "last_edit_date": 1431019621, "creation_date": 1430949367, "answer_id": 30088324, "question_id": 30087428, "link": "https://stackoverflow.com/questions/30087428/google-app-engine-store-uploaded-file-in-google-cloud-storage/30088324#30088324", "title": "Google App Engine: store uploaded file in Google Cloud Storage", "body": "<p>The recommended way to upload a file to GCS in a Google App Engine application seems to be to use the blobstore with a gcs bucket backing.</p>\n\n<p><a href=\"https://cloud.google.com/appengine/docs/python/blobstore/#Python_Using_the_Blobstore_API_with_Google_Cloud_Storage\" rel=\"nofollow\">https://cloud.google.com/appengine/docs/python/blobstore/#Python_Using_the_Blobstore_API_with_Google_Cloud_Storage</a></p>\n\n<p>There are many reasons why you should not upload directly to your webapp2 handler. </p>\n\n<ol>\n<li>Limitations in file size.</li>\n<li>Limitations in request duration.</li>\n<li>Additional charges since you are billed when your handler is running.</li>\n</ol>\n\n<p>to name a few...</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>To address the update to the question: You should STILL upload to the blobstore. Do this in 3 steps:</p>\n\n<ol>\n<li>Upload to blobstore.</li>\n<li>Read from blobstore, and write encrypted to GCS.</li>\n<li>Delete from blobstore.</li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 5359, "user_id": 246801, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/54ac1ed63d1eb6bfc3eb0d89a8c2e135?s=128&d=identicon&r=PG", "display_name": "Zach Young", "link": "https://stackoverflow.com/users/246801/zach-young"}, "reply_to_user": {"reputation": 7058, "user_id": 541106, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/o2wqV.jpg?s=128&g=1", "display_name": "Andrea Sindico", "link": "https://stackoverflow.com/users/541106/andrea-sindico"}, "edited": false, "score": 0, "creation_date": 1431040502, "post_id": 30106755, "comment_id": 48337274, "body": "@Sindico: you&#39;re very welcome. I&#39;m very curious, what was your fix?"}, {"owner": {"reputation": 7058, "user_id": 541106, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/o2wqV.jpg?s=128&g=1", "display_name": "Andrea Sindico", "link": "https://stackoverflow.com/users/541106/andrea-sindico"}, "edited": false, "score": 0, "creation_date": 1431063430, "post_id": 30106755, "comment_id": 48343509, "body": "I made a silly mistake. The encryption left the input file at the EOF position."}], "tags": [], "owner": {"reputation": 5359, "user_id": 246801, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/54ac1ed63d1eb6bfc3eb0d89a8c2e135?s=128&d=identicon&r=PG", "display_name": "Zach Young", "link": "https://stackoverflow.com/users/246801/zach-young"}, "is_accepted": true, "score": 1, "last_activity_date": 1431016804, "last_edit_date": 1431016804, "creation_date": 1431016057, "answer_id": 30106755, "question_id": 30087428, "link": "https://stackoverflow.com/questions/30087428/google-app-engine-store-uploaded-file-in-google-cloud-storage/30106755#30106755", "title": "Google App Engine: store uploaded file in Google Cloud Storage", "body": "<p>I've successfully POST'ed a file to GCS with the following method:</p>\n\n<pre><code>def post(self):\n    write_retry_params = gcs.RetryParams(backoff_factor=1.1)\n    filename = '/{MY-BUCKET-NAME}/static.txt'\n\n    gcs_file = gcs.open(\n        filename,\n        'w',\n        content_type='text/plain',\n        options={'x-goog-meta-foo': 'foo',\n                 'x-goog-meta-bar': 'bar'},\n        retry_params=write_retry_params)\n\n    inFile = self.request.POST.multi['file'].file\n    while 1:\n        line = inFile.readline()\n        if not line:\n            break\n        gcs_file.write(line)\n        logging.info('Wrote line: {}'.format(line))\n\n    gcs_file.close()\n</code></pre>\n\n<p>Here's the little log message from Console:</p>\n\n<pre><code>I 09:20:32.979 2015-05-07  200      84 B   1.13s /static\n    76.176.106.172 - - [07/May/2015:09:20:32 -0700] \"POST /static HTTP/1.1\" 200 84 - \"curl/7.37.1\" \"{MY-APP}\" ms=1131 cpu_ms=1355 cpm_usd=0.000009 loading_request=1 instance=00c61b117cee89e66d34a42c5bbe3cf2b0bb06b5 app_engine_release=1.9.20\nI 09:20:32.832 Wrote line: stack\nI 09:20:32.833 Wrote line: overflow\n</code></pre>\n\n<p>Here's the <code>test.txt</code> file I uploaded:</p>\n\n<pre><code>stack\noverflow\n</code></pre>\n\n<p>And the cURL command I used:</p>\n\n<pre><code>curl -F\"file=@/Users/{name}/test.txt\" http://{MY-APP}/videostatic\n</code></pre>\n\n<p>If you're still getting 0 bytes from <code>readline()</code> or <code>read()</code> I'm going to have to assume that your client is not sending the correct multipart message.</p>\n"}], "owner": {"reputation": 7058, "user_id": 541106, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/o2wqV.jpg?s=128&g=1", "display_name": "Andrea Sindico", "link": "https://stackoverflow.com/users/541106/andrea-sindico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 30106755, "answer_count": 2, "score": 2, "last_activity_date": 1431019621, "creation_date": 1430946054, "last_edit_date": 1430977140, "question_id": 30087428, "link": "https://stackoverflow.com/questions/30087428/google-app-engine-store-uploaded-file-in-google-cloud-storage", "title": "Google App Engine: store uploaded file in Google Cloud Storage", "body": "<p>I have managed to create a file in GCS in the post method of a webapp2 handler of a Google App Engine application. I can't see how to copy the content of a posted file in the file created in GCS.\nHere is my code</p>\n\n<pre><code> inFile =  self.request.POST.multi['file'].file\n gcs_file = gcs.open(filename,\n                    'w',\n                    content_type='text/plain',\n                    options={'x-goog-meta-foo': 'foo',\n                             'x-goog-meta-bar': 'bar'},\n                    retry_params=write_retry_params)\n  while 1:\n        line = inFile.readline()\n        if not line: break\n        gcs_file.write(line)\n  gcs_file.close()\n</code></pre>\n\n<p>At the end of the process the file in GCS is 0 byte</p>\n\n<p><strong>UPDATE</strong>\nThere is a reason why I am not using the blobstore. When using the Blobstore you have to create an url and sand it back to the client. it is the client that performs the actual upload. \nINSTEAD I need to encrypt the file on the server before to put it in the GCS. Thus I need to receive the file from the client, encrypt it on the server and store it in the GCS.</p>\n"}, {"tags": ["python", "scikit-learn", "predict"], "answers": [{"tags": [], "owner": {"reputation": 23147, "user_id": 676634, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/84f619d24e0f165f2ee36db34a911c4a?s=128&d=identicon&r=PG", "display_name": "Andreas Mueller", "link": "https://stackoverflow.com/users/676634/andreas-mueller"}, "is_accepted": true, "score": 2, "last_activity_date": 1430953440, "creation_date": 1430953440, "answer_id": 30089141, "question_id": 30087420, "link": "https://stackoverflow.com/questions/30087420/display-only-the-top-n-results-from-classifier-predict-probax/30089141#30089141", "title": "Display only the top n results from classifier.predict_proba(X)", "body": "<p>There is no parameter to do that, but you can simply do an argsort:</p>\n\n<pre><code>np.argsort(classifier.predict_proba(X), axis=1)[-5:]\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 4229101, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/fa10c18b838cc9d93b736c5ee6f3afba?s=128&d=identicon&r=PG", "display_name": "krzna", "link": "https://stackoverflow.com/users/4229101/krzna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 722, "favorite_count": 1, "accepted_answer_id": 30089141, "answer_count": 1, "score": 2, "last_activity_date": 1430956191, "creation_date": 1430946025, "last_edit_date": 1430956191, "question_id": 30087420, "link": "https://stackoverflow.com/questions/30087420/display-only-the-top-n-results-from-classifier-predict-probax", "title": "Display only the top n results from classifier.predict_proba(X)", "body": "<p>Can I make sklearn's <code>classifier.predict_proba(X)</code> to display only the top n probabilities that are above m% instead of displaying the probabilities for each and every class? Is there an option/parameter that allows me to do this?</p>\n"}, {"tags": ["python", "keypress", "kivy", "keyboard-events"], "comments": [{"owner": {"reputation": 6723, "user_id": 618895, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bb58ac95332a6e8d0cdc03397f5da9b0?s=128&d=identicon&r=PG", "display_name": "bj0", "link": "https://stackoverflow.com/users/618895/bj0"}, "edited": false, "score": 0, "creation_date": 1431016756, "post_id": 30087369, "comment_id": 48325065, "body": "The code you posted does not execute.  You have an indentation problem in <code>build(self)</code> and you are referencing attributes that don&#39;t exist."}, {"owner": {"reputation": 1386, "user_id": 1991697, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/wHS5t.png?s=128&g=1", "display_name": "karlitos", "link": "https://stackoverflow.com/users/1991697/karlitos"}, "reply_to_user": {"reputation": 6723, "user_id": 618895, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bb58ac95332a6e8d0cdc03397f5da9b0?s=128&d=identicon&r=PG", "display_name": "bj0", "link": "https://stackoverflow.com/users/618895/bj0"}, "edited": false, "score": 0, "creation_date": 1431069304, "post_id": 30087369, "comment_id": 48346092, "body": "There was a wrong indentation at the end of the build() method caused by the stackoverflow editor. I already fixed it."}], "answers": [{"comments": [{"owner": {"reputation": 1386, "user_id": 1991697, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/wHS5t.png?s=128&g=1", "display_name": "karlitos", "link": "https://stackoverflow.com/users/1991697/karlitos"}, "edited": false, "score": 0, "creation_date": 1431069226, "post_id": 30107553, "comment_id": 48346041, "body": "Thank you very much for your effort but sadly your suggestion did not helt me. The esc key is still not recognized propperly - could it be caused by the fact, that I am running kivy on Raspberry Pi ? The print statements do not sho any valid output when esc is pressed, only those characters [^[^[^[^[^... And the picture is still not changing on key-press."}, {"owner": {"reputation": 6723, "user_id": 618895, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bb58ac95332a6e8d0cdc03397f5da9b0?s=128&d=identicon&r=PG", "display_name": "bj0", "link": "https://stackoverflow.com/users/618895/bj0"}, "reply_to_user": {"reputation": 1386, "user_id": 1991697, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/wHS5t.png?s=128&g=1", "display_name": "karlitos", "link": "https://stackoverflow.com/users/1991697/karlitos"}, "edited": false, "score": 0, "creation_date": 1431103005, "post_id": 30107553, "comment_id": 48367400, "body": "It might be a Pi thing, I tried it on Ubuntu on my desktop and it worked as you described."}, {"owner": {"reputation": 1386, "user_id": 1991697, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/wHS5t.png?s=128&g=1", "display_name": "karlitos", "link": "https://stackoverflow.com/users/1991697/karlitos"}, "edited": false, "score": 0, "creation_date": 1431108938, "post_id": 30107553, "comment_id": 48370643, "body": "And you are right ... sadly. I installed the newest version from the ubuntu PPA and the change of the image works as expected. The esc key is recognized as well. I will try to update the R-Pi system and see if this will bring something."}, {"owner": {"reputation": 1386, "user_id": 1991697, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/wHS5t.png?s=128&g=1", "display_name": "karlitos", "link": "https://stackoverflow.com/users/1991697/karlitos"}, "edited": false, "score": 0, "creation_date": 1431124761, "post_id": 30107553, "comment_id": 48377765, "body": "No change even after update to the newest 1.9.0 version of kivy so I opened a issue on github. Thank everyone for your kindly help !"}], "tags": [], "owner": {"reputation": 6723, "user_id": 618895, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bb58ac95332a6e8d0cdc03397f5da9b0?s=128&d=identicon&r=PG", "display_name": "bj0", "link": "https://stackoverflow.com/users/618895/bj0"}, "is_accepted": false, "score": 0, "last_activity_date": 1431018424, "creation_date": 1431018424, "answer_id": 30107553, "question_id": 30087369, "link": "https://stackoverflow.com/questions/30087369/change-image-and-label-on-keypress-in-kivy/30107553#30107553", "title": "Change image and label on keypress in kivy", "body": "<p>If you uncomment your print statements, you'll see the information you are looking for is in <code>keycode</code>, not <code>text</code>.  <code>text</code> will only match lettered keys, for special keys (escape, up, down, etc) it will not.  Try changing it such that:</p>\n\n<pre><code>def _on_keyboard_down(self, keyboard, keycode, text, modifiers):\n    print('### ----------------------------------- ###')\n    print('The key', keycode, 'have been pressed')\n    print(' - text is %r' % text)\n    print(' - modifiers are %r' % modifiers)\n\n    key = keycode[1]\n    if key == 'escape':\n        App.get_running_app().stop()\n        #keyboard.release()\n    elif key == 'q':\n        App.get_running_app().stop()\n        #keyboard.release()\n    elif key == 'up':\n        self.image.source = 'test2.png'\n        self.label.text = 'No text'\n        #keyboard.release()\n    elif key == 'down':\n        self.image.source = 'test2.png'\n        self.label.text = 'No text'\n        #keyboard.release()\n    return True\n</code></pre>\n"}], "owner": {"reputation": 1386, "user_id": 1991697, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/wHS5t.png?s=128&g=1", "display_name": "karlitos", "link": "https://stackoverflow.com/users/1991697/karlitos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1641, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1431068882, "creation_date": 1430945818, "last_edit_date": 1431068882, "question_id": 30087369, "link": "https://stackoverflow.com/questions/30087369/change-image-and-label-on-keypress-in-kivy", "title": "Change image and label on keypress in kivy", "body": "<p>I am learning using kivy right now on my Raspberry-Pi. I installed the most recent kivypie image and I do want to make a simle app, which changes an image content and some label on buttonpress and keypress.</p>\n\n<p>The buttonpress works as expected, but the after pressing uo/down keys on the keyboard only the label text changes and no image is being displayed.</p>\n\n<p>Also I can quit the App pressing the q button but not the escape button as I would like.</p>\n\n<p>Here is my current code:</p>\n\n<pre><code>from kivy.app import App\nfrom kivy.uix.widget import Widget\nfrom kivy.uix.button import Button\nfrom kivy.uix.label import Label\nfrom kivy.uix.boxlayout import BoxLayout\nfrom kivy.uix.image import Image\nfrom kivy.core.window import Window\n\n\nclass MyApp(App):\n\n    def build(self):\n        self._keyboard = Window.request_keyboard(self._keyboard_closed, self)\n        self._keyboard.bind(on_key_down=self._on_keyboard_down)\n\n        root = BoxLayout(orientation='vertical')\n        self.image = Image(source='test.png',\n                       allow_stretch=True,\n                       keep_ratio=True)\n        root.add_widget(self.image)\n        self.label = Label(text='Some long and very explanatory text. This is a representation of a custom image description'\n                      ' coming with the image. This text can split over several lines and will fit in a box'\n                      'defined by the text_size property.',\n                      font_size=28,\n                      text_size=(600, None),\n                      color=(0, 1, 1, 1),\n                      size_hint=(1, .2))\n        root.add_widget(self.label)\n        button = Button(text=\"Change\",\n                    size_hint=(1, .07))\n        button.bind(on_press=self.callback)\n\n        root.add_widget(button)\n\n        return root\n\n    def callback(self, value):\n        self.image.source = 'test.jpg'\n        self.label.text = 'No text'\n\n    def _keyboard_closed(self):\n        self._keyboard.unbind(on_key_down=self._on_keyboard_down)\n        self._keyboard = None\n\n    def _on_keyboard_down(self, keyboard, keycode, text, modifiers):\n        #print('### ----------------------------------- ###')\n        #print('The key', keycode, 'have been pressed')\n        #print(' - text is %r' % text)\n        #print(' - modifiers are %r' % modifiers)\n\n        if text == 'escape':\n            App.get_running_app().stop()\n            #keyboard.release()\n        elif text == 'q':\n            App.get_running_app().stop()\n            #keyboard.release()\n        elif text == 'up':\n            self.image.source = 'test.jpg'\n            self.label.text = 'No text'\n            #keyboard.release()\n        elif text == 'down':\n            self.image.source = 'test.jpg'\n            self.label.text = 'No text'\n            #keyboard.release()\n        return True\n\n\nif __name__ == '__main__':\n    MyApp().run()\n</code></pre>\n"}, {"tags": ["python", "pymongo"], "answers": [{"comments": [{"owner": {"reputation": 842, "user_id": 8741562, "user_type": "registered", "accept_rate": 30, "profile_image": "https://i.stack.imgur.com/T9hRd.jpg?s=128&g=1", "display_name": "Navi", "link": "https://stackoverflow.com/users/8741562/navi"}, "edited": false, "score": 0, "creation_date": 1597074461, "post_id": 30089057, "comment_id": 112008188, "body": "How to process with datetime?"}, {"owner": {"reputation": 173, "user_id": 13272900, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/II1dS.jpg?s=128&g=1", "display_name": "JediJesus", "link": "https://stackoverflow.com/users/13272900/jedijesus"}, "edited": false, "score": 0, "creation_date": 1597076120, "post_id": 30089057, "comment_id": 112008954, "body": "can i use this in a pipeline to aggregate?"}, {"owner": {"reputation": 15854, "user_id": 682308, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/bbe3dad6ff4846853b1b09c1bdd67bb0?s=128&d=identicon&r=PG", "display_name": "MFB", "link": "https://stackoverflow.com/users/682308/mfb"}, "edited": false, "score": 0, "creation_date": 1597116507, "post_id": 30089057, "comment_id": 112021670, "body": "@AuturBraga can you use datatimes in aggregation?  Yes."}], "tags": [], "owner": {"reputation": 15854, "user_id": 682308, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/bbe3dad6ff4846853b1b09c1bdd67bb0?s=128&d=identicon&r=PG", "display_name": "MFB", "link": "https://stackoverflow.com/users/682308/mfb"}, "is_accepted": true, "score": 16, "last_activity_date": 1430952804, "creation_date": 1430952804, "answer_id": 30089057, "question_id": 30087355, "link": "https://stackoverflow.com/questions/30087355/how-to-query-using-isodate-in-pymongo/30089057#30089057", "title": "how to query using isodate in pymongo", "body": "<p>Dates are stored as ISODates in MongoDB but, when you're using Pymongo, dates are converted to Python Datetime objects.  So, using Pymongo, your query should look like this:</p>\n\n<pre><code>test_range = agents.coll.find({ \"created_at\": {\"$gte\" : datetime(2015, 3, 1), \"$lt\": datetime(2015, 3, 30)}})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 940, "user_id": 1480817, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-v05E1ptsojk/AAAAAAAAAAI/AAAAAAAAAjs/M1ZnPfYzoLE/photo.jpg?sz=128", "display_name": "Jamie Ivanov", "link": "https://stackoverflow.com/users/1480817/jamie-ivanov"}, "edited": false, "score": 0, "creation_date": 1528487615, "post_id": 37002316, "comment_id": 88542515, "body": ".isoformat() dates the datetime object and converts it into an ISO-formatted string. Will that work when querying ISODate fields through PyMongo?"}], "tags": [], "owner": {"reputation": 945, "user_id": 121139, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/w1ZO7.png?s=128&g=1", "display_name": "Fred Campos", "link": "https://stackoverflow.com/users/121139/fred-campos"}, "is_accepted": false, "score": 1, "last_activity_date": 1462273338, "creation_date": 1462273338, "answer_id": 37002316, "question_id": 30087355, "link": "https://stackoverflow.com/questions/30087355/how-to-query-using-isodate-in-pymongo/37002316#37002316", "title": "how to query using isodate in pymongo", "body": "<p>Use <code>isoformat()</code>. Example <code>dt = datetime.datetime.now().isoformat()</code>.</p>\n"}], "owner": {"reputation": 6397, "user_id": 1472743, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f205382e9fa00ee4bdf653ec92a34679?s=128&d=identicon&r=PG", "display_name": "dwstein", "link": "https://stackoverflow.com/users/1472743/dwstein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15733, "favorite_count": 2, "accepted_answer_id": 30089057, "answer_count": 2, "score": 8, "last_activity_date": 1469434917, "creation_date": 1430945738, "last_edit_date": 1430946201, "question_id": 30087355, "link": "https://stackoverflow.com/questions/30087355/how-to-query-using-isodate-in-pymongo", "title": "how to query using isodate in pymongo", "body": "<p>I have a mongodb query that works in the mongo shell:</p>\n\n<pre><code>db.collection.find({ created_at:  { $gte : ISODate(\"2015-03-01T00:00:00.000Z\"), $lt : ISODate(\"2015-03-30T00:00:00.00Z\") } })\n</code></pre>\n\n<p>I'm trying the following pymongo:</p>\n\n<pre><code>test_range = agents.coll.find({ \"created_at\" :  { \"$gte\" : \"ISODate('2015-03-01T00:00:00.000Z')\", \"$lt\" : \"ISODate('2015-03-30T00:00:00.00Z')\" } })\n</code></pre>\n\n<p>and I'm getting <code>SyntaxError: invalid syntax</code></p>\n\n<p>What the correct way to handle ISODate in pymongo query?</p>\n"}, {"tags": ["python", "loops"], "answers": [{"tags": [], "owner": {"reputation": 35319, "user_id": 871910, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f073f5ca74b61813e689bbda8d12ba2b?s=128&d=identicon&r=PG", "display_name": "zmbq", "link": "https://stackoverflow.com/users/871910/zmbq"}, "is_accepted": false, "score": 1, "last_activity_date": 1430945817, "creation_date": 1430945817, "answer_id": 30087367, "question_id": 30087345, "link": "https://stackoverflow.com/questions/30087345/how-to-create-a-number-of-variables-from-a-number-entered-by-user/30087367#30087367", "title": "How to create a number of variables from a number entered by user", "body": "<p>Just use a list - with an element for each number.</p>\n"}, {"tags": [], "owner": {"reputation": 10567, "user_id": 4680533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tee8v.jpg?s=128&g=1", "display_name": "Ed Smith", "link": "https://stackoverflow.com/users/4680533/ed-smith"}, "is_accepted": false, "score": 0, "last_activity_date": 1430946068, "creation_date": 1430946068, "answer_id": 30087430, "question_id": 30087345, "link": "https://stackoverflow.com/questions/30087345/how-to-create-a-number-of-variables-from-a-number-entered-by-user/30087430#30087430", "title": "How to create a number of variables from a number entered by user", "body": "<p>You can define variables in the workspace using</p>\n\n<pre><code>for i in input_SetNum:\n    vars()[\"var%s=value\" % (i)] = value\n</code></pre>\n\n<p>You will probably want to put this inside a class in the long term, where the variables for the class are defined by,</p>\n\n<pre><code>class SomeObj:\n    def __init__(self, input_SetNum, values):\n        for i in input_SetNum:\n            vars(self)[\"var%s=value\" % (i)] = values[i]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 1810514, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/905d5ea9b4ebe355da28674bd9765d93?s=128&d=identicon&r=PG", "display_name": "user1810514", "link": "https://stackoverflow.com/users/1810514/user1810514"}, "edited": false, "score": 0, "creation_date": 1430946952, "post_id": 30087434, "comment_id": 48288556, "body": "Thank you this was very helpful! I have two questions though. 1. i am getting an error about how line 5 &quot;cant convert int object to str implicitly&quot;. and  2. As the for loop goes on can i ask the user to input the file location of their csv data file? I updated to code up top to show what i mean. Any help is appreciated thank you again."}, {"owner": {"reputation": 3291, "user_id": 4087357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3GqlU.jpg?s=128&g=1", "display_name": "michaelpri", "link": "https://stackoverflow.com/users/4087357/michaelpri"}, "reply_to_user": {"reputation": 47, "user_id": 1810514, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/905d5ea9b4ebe355da28674bd9765d93?s=128&d=identicon&r=PG", "display_name": "user1810514", "link": "https://stackoverflow.com/users/1810514/user1810514"}, "edited": false, "score": 0, "creation_date": 1430947076, "post_id": 30087434, "comment_id": 48288624, "body": "@user1810514 Which version of Python are you using?"}], "tags": [], "owner": {"reputation": 3291, "user_id": 4087357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3GqlU.jpg?s=128&g=1", "display_name": "michaelpri", "link": "https://stackoverflow.com/users/4087357/michaelpri"}, "is_accepted": true, "score": 2, "last_activity_date": 1430948958, "last_edit_date": 1430948958, "creation_date": 1430946075, "answer_id": 30087434, "question_id": 30087345, "link": "https://stackoverflow.com/questions/30087345/how-to-create-a-number-of-variables-from-a-number-entered-by-user/30087434#30087434", "title": "How to create a number of variables from a number entered by user", "body": "<p>You could use a dictionary. </p>\n\n<pre><code>data_sets = {}\nfor i in range(1, input_SetNum+1):\n    data_sets[i] = # data set value here\n</code></pre>\n\n<p><strong>Edit:</strong></p>\n\n<p>If you are using Python 3, then you full code should be:</p>\n\n<pre><code>input_SetNum = input(\"How many data sets are you comparing: \")\nprint (\"You entered \" + input_SetNum) \n\ndata_sets = {}\nfor i in range(1, int(input_SetNum)+1):\n    data_sets[i] = input(\"Please enter the file path a data set: \")\n\nprint(data_sets)\n</code></pre>\n\n<p>Printing <code>data_sets</code> will produce this result when 3 is inputted:</p>\n\n<pre><code>{1: '/path/file1', 2: '/path/file2', 3: '/path/file3'}\n</code></pre>\n\n<p>If you are using Python 2.7, then you should replace all of the <code>input()</code>s with <code>raw_input</code>s.</p>\n\n<hr>\n\n<p><strong>Edit 2:</strong></p>\n\n<p>To open CSV files based on their paths, you can use code like this under what you've already done.</p>\n\n<pre><code>for key in data_sets:\n    with open(data_sets[key]) as current_file:\n        # do stuff here\n</code></pre>\n\n<p>It may also be possible to instead use <code>open()</code> on the <code>input()</code> you used before for the file path. </p>\n\n<pre><code>data_sets[i] = open(input(\"Please enter the file path a data set: \"))\n</code></pre>\n\n<p>I am not 100% sure if this will work, as I am not very familiar with CSV files, but it can't hurt and if it does work, it would be easier to compare the data sets.</p>\n"}, {"tags": [], "owner": {"reputation": 3055, "user_id": 1843248, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/63X0V.jpg?s=128&g=1", "display_name": "Doug R.", "link": "https://stackoverflow.com/users/1843248/doug-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1430962311, "last_edit_date": 1430962311, "creation_date": 1430947837, "answer_id": 30087926, "question_id": 30087345, "link": "https://stackoverflow.com/questions/30087345/how-to-create-a-number-of-variables-from-a-number-entered-by-user/30087926#30087926", "title": "How to create a number of variables from a number entered by user", "body": "<p>You're definitely on the right path.  Your code isn't that different than what I would generate for this same task.  Most of my changes are a matter of preference, mainly that I'd use a list instead of a dictionary, since there doesn't appear to be any overwhelming reason to use a dictionary in this case; you appear to mainly be using it in the same way you'd use an array in another language, or as a list that you don't need to explicitly <code>.append()</code> or <code>.extend()</code> new items to.</p>\n\n<pre><code># Python 3.  For Python 2, change `input` to `raw_input` and modify the\n# `print` statement.\nwhile True:  # Validate that we're getting a valid number.\n    num_sets = input('How many data sets are you comparing?  ')\n\n    try:\n        num_sets = int(num_sets)\n\n    except ValueError:\n        print('Please enter a number!  ', end='')\n\n    else:\n        break\n\ndata_sets = []\n\n# Get the correct number of sets.  These will be stored in the list,\n# starting with `data_sets[0]`.\nfor _ in range(num_sets):\n    path = input('Please enter the file path a data set:  ')\n    data_sets.append(path)\n</code></pre>\n\n<p>If you entered <code>3</code> for the number of sets, this would set <code>data_sets</code> equal to</p>\n\n<pre><code>['data_set_0', 'data_set_2', 'data_set_3']\n</code></pre>\n\n<p>for the appropriate input.</p>\n"}], "owner": {"reputation": 47, "user_id": 1810514, "user_type": "registered", "accept_rate": 11, "profile_image": "https://www.gravatar.com/avatar/905d5ea9b4ebe355da28674bd9765d93?s=128&d=identicon&r=PG", "display_name": "user1810514", "link": "https://stackoverflow.com/users/1810514/user1810514"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 30087434, "answer_count": 4, "score": 1, "last_activity_date": 1430962311, "creation_date": 1430945709, "last_edit_date": 1430946731, "question_id": 30087345, "link": "https://stackoverflow.com/questions/30087345/how-to-create-a-number-of-variables-from-a-number-entered-by-user", "title": "How to create a number of variables from a number entered by user", "body": "<p>I am creating a script that asks the user how many data sets they would want to compare. </p>\n\n<p>The user enters a number and I was wondering if there is a way, using loops, to creating a number of variables for the number the user entered. </p>\n\n<pre><code>input_SetNum = input(\"How many data sets are you comparing: \")\nprint (\"You entered \" + input_SetNum) \n\ndata_sets = {}\nfor i in range(1, input_SetNum+1):\ndata_sets[i] = input(\"Please enter the file path a data set: \")\n</code></pre>\n"}, {"tags": ["python", "pygame"], "answers": [{"comments": [{"owner": {"reputation": 149, "user_id": 4055933, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e1a70aa33a3b7d970458f81eb1115aab?s=128&d=identicon&r=PG&f=1", "display_name": "pta2002", "link": "https://stackoverflow.com/users/4055933/pta2002"}, "edited": false, "score": 0, "creation_date": 1430947122, "post_id": 30087393, "comment_id": 48288639, "body": "Thanks so much! By the way, could you give me a link to the documentation about those division semantics?"}], "tags": [], "owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "is_accepted": false, "score": 1, "last_activity_date": 1430945902, "creation_date": 1430945902, "answer_id": 30087393, "question_id": 30087256, "link": "https://stackoverflow.com/questions/30087256/problems-getting-the-position-of-a-click-in-a-custom-pygame-grid/30087393#30087393", "title": "Problems getting the position of a click in a custom PyGame grid", "body": "<p>Such code does not need <code>for</code> loops or <code>if</code>conditionals at all - \nsimple arithmetic can give you an straight answer:</p>\n\n<pre><code>from __future__ import division\n\ndef getGridPos(rows, cols, display, pos):\n    width, height = display.get_size()\n    x, y = pos \n    return (pos[0] // (width / cols), pos[1] // (height/rows))\n</code></pre>\n\n<p>(I just get the division semantics from Python 3 with the <code>from __future__</code> line so there is no need to worry about converting values to float prior to dividing - which is possible what is actually wrong with your original code, besides it being a lot more complex than it should)</p>\n"}], "owner": {"reputation": 149, "user_id": 4055933, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e1a70aa33a3b7d970458f81eb1115aab?s=128&d=identicon&r=PG&f=1", "display_name": "pta2002", "link": "https://stackoverflow.com/users/4055933/pta2002"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430945902, "creation_date": 1430945342, "question_id": 30087256, "link": "https://stackoverflow.com/questions/30087256/problems-getting-the-position-of-a-click-in-a-custom-pygame-grid", "title": "Problems getting the position of a click in a custom PyGame grid", "body": "<p>So, basically what I am trying to do is a customizable version of Tic-Tac-Toe. I have a function that can perfectly display a grid, with a specific amount of rows and columns, but now I am trying to make a function that would get the position in that grid. This is the code I am using:</p>\n\n<pre><code>def getGridPos(rows, cols, display, pos):\n    x, y = pos\n    width, height = display.get_size()\n    xPos, yPos = (0, 0)\n    for yCount in range(rows):\n        if y &lt;= height / rows * yCount and y &gt;= height / rows * (yCount+1):\n            xPos = yCount\n    for xCount in range(rows):\n        if x &lt;= width / cols * xCount and x &gt;= x &lt;= width / cols * (xCount+1):\n            yPos = xCount\n\n    return (xPos, yPos)\n</code></pre>\n\n<p>And in case I am just being derpy when printing it out:</p>\n\n<pre><code>print(\"You pressed the left mouse button at (%d, %d)\" % getGridPos(3, 3, display, event.pos))\n</code></pre>\n\n<p>So, basically what is happening here is that when I press a cell in the first and second columns, it is gonna return (0, 2), but on the third column, it returns (0, 0). I don't know what is going on here, but I am going to try with some other sizes and then I will update this.</p>\n\n<h2><strong>UPDATE</strong></h2>\n\n<p>So, I tried it out with some more configurations and this is my conclusion:</p>\n\n<ul>\n<li>When pressed in the first 7 columns in a 10x10 layout, it is gonna return (0, 2)</li>\n<li>When pressed in the last 7 columns in a 10x10 layout, it is gonna return (0, 0)</li>\n</ul>\n"}, {"tags": ["python", "vagrant", "virtualbox", "virtualenv", "pycharm"], "owner": {"reputation": 1986, "user_id": 4180276, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/f34129a97d735e6e19247c911626cb9a?s=128&d=identicon&r=PG&f=1", "display_name": "nadermx", "link": "https://stackoverflow.com/users/4180276/nadermx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 0, "score": 5, "last_activity_date": 1488708626, "creation_date": 1430945158, "last_edit_date": 1488708626, "question_id": 30087210, "link": "https://stackoverflow.com/questions/30087210/setting-up-a-virtual-environment-on-pycharm-vagrant-box", "title": "Setting up a virtual environment on pycharm vagrant box", "body": "<p>I am currently trying to set up a new virtual environment for a project.  I have a vagrant/virtualbox set up with pycharm.</p>\n\n<p>It appears that even though I have the remote interpreter set up correctly, I still have to use a local interpreter to set up a virtual environment.  Is there any way to use the remote virtual environment instead of using a local one?</p>\n"}, {"tags": ["python", "scikit-learn", "linear-regression", "statsmodels"], "answers": [{"tags": [], "owner": {"reputation": 1882, "user_id": 2114861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9c384eeb4af67247f8d01a2ef35041?s=128&d=identicon&r=PG", "display_name": "Ando Saabas", "link": "https://stackoverflow.com/users/2114861/ando-saabas"}, "is_accepted": true, "score": 1, "last_activity_date": 1430947586, "creation_date": 1430947586, "answer_id": 30087858, "question_id": 30087110, "link": "https://stackoverflow.com/questions/30087110/series-object-not-callable-with-linear-regression-in-python/30087858#30087858", "title": "series object not callable with linear regression in python", "body": "<p>Try</p>\n\n<pre><code>lm.params\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>lm.params()\n</code></pre>\n\n<p>The latter tries to call the params as a function (which it isn't)</p>\n"}], "owner": {"reputation": 335, "user_id": 3120266, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ee4599475048dbd4cc97fcef19b3318d?s=128&d=identicon&r=PG&f=1", "display_name": "user3120266", "link": "https://stackoverflow.com/users/3120266/user3120266"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1769, "favorite_count": 0, "accepted_answer_id": 30087858, "answer_count": 1, "score": 0, "last_activity_date": 1430947586, "creation_date": 1430944839, "question_id": 30087110, "link": "https://stackoverflow.com/questions/30087110/series-object-not-callable-with-linear-regression-in-python", "title": "series object not callable with linear regression in python", "body": "<p>I am new to Python and I am trying to build a simple linear regression model. I am able to build the model and see the results, but when I try to look at the parameters I get an error and I am not sure where I am going wrong. </p>\n\n<p>Code:</p>\n\n<pre><code>import statsmodels.formula.api as smf\nfrom sklearn.linear_model import LinearRegression\nlm = LinearRegression()\nlm = smf.ols(formula='medv ~ lstat', data=data).fit()\nlm.describe\n</code></pre>\n\n<p>produces results</p>\n\n<pre><code>Dep. Variable:  medv    R-squared:  0.544\nModel:  OLS Adj. R-squared: 0.543\nMethod: Least Squares   F-statistic:    601.6\nDate:   Wed, 06 May 2015    Prob (F-statistic): 5.08e-88\nTime:   15:01:03    Log-Likelihood: -1641.5\nNo. Observations:   506 AIC:    3287.\nDf Residuals:   504 BIC:    3295.\nDf Model:   1   \n</code></pre>\n\n<p>But when I try to call the parameters</p>\n\n<pre><code>lm.params()\n</code></pre>\n\n<p>I receive this</p>\n\n<pre><code>Series object is not callable\n</code></pre>\n\n<p>I must be missing something but I am not sure what it is. The model is being produced correctly.\nThanks!</p>\n"}, {"tags": ["python", "py2exe", "py2app"], "comments": [{"owner": {"reputation": 6315, "user_id": 1555990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a743aed2f5b809958ebb17d4d952b7b2?s=128&d=identicon&r=PG", "display_name": "That1Guy", "link": "https://stackoverflow.com/users/1555990/that1guy"}, "edited": false, "score": 0, "creation_date": 1430945258, "post_id": 30087026, "comment_id": 48287705, "body": "What is the rest of your code?"}], "answers": [{"tags": [], "owner": {"reputation": 1920, "user_id": 4841832, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/hD1nI.jpg?s=128&g=1", "display_name": "Jsevillamol", "link": "https://stackoverflow.com/users/4841832/jsevillamol"}, "is_accepted": false, "score": 0, "last_activity_date": 1430945350, "last_edit_date": 1495542514, "creation_date": 1430945350, "answer_id": 30087260, "question_id": 30087026, "link": "https://stackoverflow.com/questions/30087026/py2app-returning-main-error-with-raw-input/30087260#30087260", "title": "Py2app returning main error with raw_input", "body": "<p>raw_input() tries to read user input from the <strong>console</strong>, which you won't have available when developing with py2app.</p>\n\n<p>You will have to research other way of gathering input, such as Python standard GUI (Graphical User Interface), <a href=\"https://wiki.python.org/moin/TkInter\" rel=\"nofollow noreferrer\">TkInter</a>.</p>\n\n<p>EDIT: Exactly the same question as <a href=\"https://stackoverflow.com/questions/4711589/python-raw-input-causing-eoferror-after-creating-app-with-py2app\">here</a>.</p>\n"}], "owner": {"reputation": 11, "user_id": 4871964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45237b0174d7a7e596755a0aca3f8f97?s=128&d=identicon&r=PG&f=1", "display_name": "samwise12", "link": "https://stackoverflow.com/users/4871964/samwise12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "closed_date": 1430948134, "answer_count": 1, "score": 0, "last_activity_date": 1430945350, "creation_date": 1430944567, "last_edit_date": 1430945178, "question_id": 30087026, "link": "https://stackoverflow.com/questions/30087026/py2app-returning-main-error-with-raw-input", "closed_reason": "Duplicate", "title": "Py2app returning main error with raw_input", "body": "<p>For school, I needed to make a basic Python application. This application ran off of user inputs (<code>raw_input</code>) and used <code>if</code> statements which would then link to another function. I need to turn this into a standalone application using py2app. The only issue is when I click to open the application I get:</p>\n\n<pre><code>EOF error: EOF when reading a line**.\n</code></pre>\n\n<p>This happens immediately after the line: </p>\n\n<pre><code>name = raw_input (\"What is your name? &gt;&gt;\")\n</code></pre>\n\n<p>I have heard that py2app has some difficulty with using <code>raw_input</code> but I need some way to allow for the user to input responses in a fairly simple manner, which will also work with py2app.</p>\n\n<p>Mac OSX 10.10.3 </p>\n"}, {"tags": ["python", "ubuntu", "python-3.x", "ipython", "ipython-notebook"], "comments": [{"owner": {"reputation": 35559, "user_id": 434217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f1ae3f14fd5b87c2c3f7b36014e185c?s=128&d=identicon&r=PG", "display_name": "Thomas K", "link": "https://stackoverflow.com/users/434217/thomas-k"}, "edited": false, "score": 1, "creation_date": 1430947794, "post_id": 30087011, "comment_id": 48288965, "body": "Try opening a new terminal - it looks like it may have cached the path. If it can&#39;t find it, ensure that <code>&#47;home&#47;vco&#47;.local&#47;bin</code> is on $PATH."}, {"owner": {"reputation": 1852, "user_id": 3130747, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5b9df374982831838fda1c5abb634781?s=128&d=identicon&r=PG&f=1", "display_name": "baxx", "link": "https://stackoverflow.com/users/3130747/baxx"}, "reply_to_user": {"reputation": 35559, "user_id": 434217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f1ae3f14fd5b87c2c3f7b36014e185c?s=128&d=identicon&r=PG", "display_name": "Thomas K", "link": "https://stackoverflow.com/users/434217/thomas-k"}, "edited": false, "score": 0, "creation_date": 1430947865, "post_id": 30087011, "comment_id": 48289001, "body": "hey @ThomasK you&#39;re right - if I run it from the path that it&#39;s in (<code>~&#47;.local&#47;bin</code>) it works fine (python 3 version) so I can just make a bash alias for that I guess... cheers :)"}, {"owner": {"reputation": 35559, "user_id": 434217, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f1ae3f14fd5b87c2c3f7b36014e185c?s=128&d=identicon&r=PG", "display_name": "Thomas K", "link": "https://stackoverflow.com/users/434217/thomas-k"}, "edited": false, "score": 1, "creation_date": 1430959306, "post_id": 30087011, "comment_id": 48292959, "body": "Or you can add it to <code>$PATH</code> in <code>~&#47;.bashrc</code> - <code>export PATH=&quot;&#47;home&#47;vco&#47;.local&#47;bin:$PATH</code>. That way it works for anything you pip install with <code>--user</code>."}, {"owner": {"reputation": 905, "user_id": 425031, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/q5fLW.jpg?s=128&g=1", "display_name": "Luke Barker", "link": "https://stackoverflow.com/users/425031/luke-barker"}, "edited": false, "score": 0, "creation_date": 1431476160, "post_id": 30087011, "comment_id": 48512401, "body": "Is it that you are missing sudo - sudo pip install etc...? I got it installed easy using Anaconda (worth checking out) which was just a straight download."}, {"owner": {"reputation": 1852, "user_id": 3130747, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5b9df374982831838fda1c5abb634781?s=128&d=identicon&r=PG&f=1", "display_name": "baxx", "link": "https://stackoverflow.com/users/3130747/baxx"}, "edited": false, "score": 0, "creation_date": 1431476206, "post_id": 30087011, "comment_id": 48512416, "body": "Sudo pip is a no no :)"}], "owner": {"reputation": 1852, "user_id": 3130747, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5b9df374982831838fda1c5abb634781?s=128&d=identicon&r=PG&f=1", "display_name": "baxx", "link": "https://stackoverflow.com/users/3130747/baxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1586, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1430944509, "creation_date": 1430944509, "question_id": 30087011, "link": "https://stackoverflow.com/questions/30087011/install-ipython3-notebook-ubuntu", "title": "Install iPython3 notebook Ubuntu", "body": "<p>I'm having trouble installing ipython3 notebook in Ubuntu 14.04</p>\n\n<h2>pip3 install :</h2>\n\n<pre><code>vco@geoHP:~/Programming/python/BrandonRhodes/pycon-pandas-tutorial-1.0$ pip3 install --user ipython[notebook]\nRequirement already satisfied (use --upgrade to upgrade): ipython[notebook] in /home/vco/.local/lib/python3.4/site-packages\n  Installing extra requirements: 'notebook'\nCleaning up...\nvco@geoHP:~/Programming/python/BrandonRhodes/pycon-pandas-tutorial-1.0$\n</code></pre>\n\n<p>upgrading iPython notebook :</p>\n\n<pre><code>vco@geoHP:~/Programming/python/BrandonRhodes/pycon-pandas-tutorial-1.0$ pip3 install --user \"ipython[all]\"\nRequirement already satisfied (use --upgrade to upgrade): ipython[all] in /home/vco/.local/lib/python3.4/site-packages\n  Installing extra requirements: 'all'\nCleaning up...\n</code></pre>\n\n<p>Trying to run notebook</p>\n\n<pre><code>vco@geoHP:~/Programming/python/BrandonRhodes/pycon-pandas-tutorial-1.0$ ipython notebook\n-bash: /usr/bin/ipython: No such file or directory\n</code></pre>\n\n<p>I'm not sure what I'm doing wrong here</p>\n\n<p>I can use the version from the Ubuntu repo - but that is for Python 2. If I try and run the file that I want to work on (<a href=\"http://paste.ubuntu.com/10999391/\" rel=\"nofollow\">link to file</a>) it gives me an error about JSON 3 instead of 4. </p>\n\n<p>Since trying to run that file I've removed ipython from the system with <code>sudo apt-remove ipython</code> and reinstalled using <code>pip3</code>. </p>\n\n<p>cheers</p>\n"}, {"tags": ["python", "list", "probability"], "comments": [{"owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "edited": false, "score": 1, "creation_date": 1430945075, "post_id": 30087004, "comment_id": 48287607, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/3679694/a-weighted-version-of-random-choice\">A weighted version of random.choice</a>"}, {"owner": {"reputation": 19, "user_id": 4504112, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677155e45fc5c0a95ec1498b14fee307?s=128&d=identicon&r=PG&f=1", "display_name": "noodle", "link": "https://stackoverflow.com/users/4504112/noodle"}, "reply_to_user": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "edited": false, "score": 0, "creation_date": 1430946106, "post_id": 30087004, "comment_id": 48288153, "body": "@tzaman does&#39;nt explain how to use floats or ensure probability in list can only = 1 or 10, which is my question"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 4504112, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677155e45fc5c0a95ec1498b14fee307?s=128&d=identicon&r=PG&f=1", "display_name": "noodle", "link": "https://stackoverflow.com/users/4504112/noodle"}, "edited": false, "score": 0, "creation_date": 1430947275, "post_id": 30087534, "comment_id": 48288706, "body": "i didn&#39;t want to search a probability i wanted the code to output one of the numbers depending on the probability associated  with it. Also ensuring collectively the probabilities only sum to 1"}, {"owner": {"reputation": 901, "user_id": 3749292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5UptT.jpg?s=128&g=1", "display_name": "Jerry Ajay", "link": "https://stackoverflow.com/users/3749292/jerry-ajay"}, "reply_to_user": {"reputation": 19, "user_id": 4504112, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677155e45fc5c0a95ec1498b14fee307?s=128&d=identicon&r=PG&f=1", "display_name": "noodle", "link": "https://stackoverflow.com/users/4504112/noodle"}, "edited": false, "score": 0, "creation_date": 1430947548, "post_id": 30087534, "comment_id": 48288843, "body": "The second part is taken care of in the code. I still can&#39;t understand the first part: what do you mean by &quot;output one of the numbers depending on the probability associated with it.&quot;?"}, {"owner": {"reputation": 19, "user_id": 4504112, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677155e45fc5c0a95ec1498b14fee307?s=128&d=identicon&r=PG&f=1", "display_name": "noodle", "link": "https://stackoverflow.com/users/4504112/noodle"}, "edited": false, "score": 0, "creation_date": 1430950090, "post_id": 30087534, "comment_id": 48290084, "body": "For example if outcomes entered are 1,2,3,4 and probabilities enetered are 0.1,0.1, 0.1 and 0.7, it is most likely the program will return a 4 as it highest probability. The code should return/print 1 outcome entered."}, {"owner": {"reputation": 19, "user_id": 4504112, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677155e45fc5c0a95ec1498b14fee307?s=128&d=identicon&r=PG&f=1", "display_name": "noodle", "link": "https://stackoverflow.com/users/4504112/noodle"}, "edited": false, "score": 0, "creation_date": 1430950137, "post_id": 30087534, "comment_id": 48290100, "body": "which my code does, i just can&#39;t make it so that you can only enter probabilities which sum to 10, so if it goes over 10 itll give an error message."}], "tags": [], "owner": {"reputation": 901, "user_id": 3749292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5UptT.jpg?s=128&g=1", "display_name": "Jerry Ajay", "link": "https://stackoverflow.com/users/3749292/jerry-ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1430946473, "creation_date": 1430946473, "answer_id": 30087534, "question_id": 30087004, "link": "https://stackoverflow.com/questions/30087004/how-to-ensure-output-is-based-on-number-entered-python/30087534#30087534", "title": "How to ensure output is based on number entered python", "body": "<p>This is the code that you require:</p>\n\n<pre><code>pos_values = []\nprobability = []\nmaxLengthList = 5\n\nwhile len(pos_values) &lt; maxLengthList:\n    number = input(\"Enter a number: \")\n    pos_values.append(number)\n    prob = input(\"Enter a probability: \")\n    probability.append(prob)\n\nall_values = list(zip(pos_values, probability))\n\nprint all_values\n\nprob = [cnt for val, cnt in all_values]\nif sum(prob) &gt; 1.0:\n    print \"Error in probabilities\"\nelse:\n    lookup = input(\"Enter probability to search: \")\n    for val, cnt in all_values:\n        if cnt == lookup:\n            print val\n</code></pre>\n\n<p>Now, a quick analysis of your code:</p>\n\n<ul>\n<li><p>You can't range over a float, as in, <code>range(cnt)</code></p></li>\n<li><p><code>range(1)</code> always outputs <code>0</code>, hence no point using it in your code.\nIn fact, I wonder what's the rational behind using it in a loop.</p></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 4504112, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677155e45fc5c0a95ec1498b14fee307?s=128&d=identicon&r=PG&f=1", "display_name": "noodle", "link": "https://stackoverflow.com/users/4504112/noodle"}, "edited": false, "score": 0, "creation_date": 1430947356, "post_id": 30087538, "comment_id": 48288745, "body": "I wanted it so the user could enter the outcomes and probabilties @jsevillamol"}, {"owner": {"reputation": 1920, "user_id": 4841832, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/hD1nI.jpg?s=128&g=1", "display_name": "Jsevillamol", "link": "https://stackoverflow.com/users/4841832/jsevillamol"}, "reply_to_user": {"reputation": 19, "user_id": 4504112, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677155e45fc5c0a95ec1498b14fee307?s=128&d=identicon&r=PG&f=1", "display_name": "noodle", "link": "https://stackoverflow.com/users/4504112/noodle"}, "edited": false, "score": 0, "creation_date": 1431002996, "post_id": 30087538, "comment_id": 48314393, "body": "@noodle First check that the input lies between the values. Then get the cumulative_probability. If it ever surpases 1 or 10 (I&#39;n not seeing why you would like a probability weighted over 10, but whatever) raise an error."}], "tags": [], "owner": {"reputation": 1920, "user_id": 4841832, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/hD1nI.jpg?s=128&g=1", "display_name": "Jsevillamol", "link": "https://stackoverflow.com/users/4841832/jsevillamol"}, "is_accepted": false, "score": 0, "last_activity_date": 1430946501, "creation_date": 1430946501, "answer_id": 30087538, "question_id": 30087004, "link": "https://stackoverflow.com/questions/30087004/how-to-ensure-output-is-based-on-number-entered-python/30087538#30087538", "title": "How to ensure output is based on number entered python", "body": "<p>The problem lies in the list comprehension. The argument of range must be a integer, or else it will throw a error.</p>\n\n<p>A simpler, more pythonic way of achieving the effect you want is the following:</p>\n\n<pre><code>    def returnRandom(probability_distribution):\n        r = random.random()\n        for value, prob in probability_distribution:\n            r -= prob\n            if r &lt;= 0: return value\n        print(\"Error! The total probability was less than one!\")\n</code></pre>\n\n<p>You could also format the probabilities on the list to store the cumulative probability instead, and then the code will simplify itself:</p>\n\n<pre><code>    def returnRandom(probability_distribution):\n        r = random.random()\n        for value, cum_prob in probability_distribution:\n            if r &lt;= cum_prob: return value\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4504112, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/677155e45fc5c0a95ec1498b14fee307?s=128&d=identicon&r=PG&f=1", "display_name": "noodle", "link": "https://stackoverflow.com/users/4504112/noodle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1525185254, "creation_date": 1430944489, "last_edit_date": 1525185254, "question_id": 30087004, "link": "https://stackoverflow.com/questions/30087004/how-to-ensure-output-is-based-on-number-entered-python", "title": "How to ensure output is based on number entered python", "body": "<p>I am trying to create a program that accepts two lists. The first list being any number, the second list being the probability of the number being output. The program will ask for input on the number and then probability. The program then merges these two so they map each other. The program should then return one number based on the probability entered.</p>\n\n<p>I have created this program and it does this, I just have one question, how can I get it so that for to probability list, you can enter floats (0.1, 0.2). I can do this but then other parts of the code return errors. Also how can I get it so the probability that the user enters can only add up to 1 if floats are used (0.5, 0.5) or 10 if floats aren't used?</p>\n\n<pre><code>pos_values = [] \nprobability = []\nmaxLengthList = 5\n\nwhile len(pos_values) &lt; maxLengthList:\n        number = input(\"Enter a number: \")\n        pos_values.append(number)\n        prob = input(\"Enter a probability: \")\n        probability.append(prob)\n\ncumulative_probability = list(zip(pos_values, probability))\n\nprob = [val for val, cnt in cumulative_probability for i in range(cnt)]\noutcome = []\nfor i in range (1):\n    outcome.append(random.choice(prob))\n\nprint('Possible outcome returned is: ', outcome)\n</code></pre>\n\n<p>My code does exactly what i want it to, my question is how can i make so that the sum of the probabilities entered can't go over 1 or 10. </p>\n"}, {"tags": ["python", "sqlalchemy"], "answers": [{"comments": [{"owner": {"reputation": 9289, "user_id": 2572431, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2ad85f81981e5365a21d94114f3926b2?s=128&d=identicon&r=PG", "display_name": "augurar", "link": "https://stackoverflow.com/users/2572431/augurar"}, "edited": false, "score": 0, "creation_date": 1430948303, "post_id": 30087263, "comment_id": 48289222, "body": "Good answer, but you might also want to explain why the ternary operator doesn&#39;t work.  The reason is that when using <code>if</code>/<code>else</code>, Python tries to evaluate the branch condition while the query is being defined, which doesn&#39;t make sense.  Using <code>case()</code> adds the conditional to the SQL of the query."}], "tags": [], "owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "is_accepted": true, "score": 3, "last_activity_date": 1430945365, "creation_date": 1430945365, "answer_id": 30087263, "question_id": 30086977, "link": "https://stackoverflow.com/questions/30086977/using-a-ternary-operator-in-a-sqlalchemy-filter-statement/30087263#30087263", "title": "Using a ternary operator in a sqlalchemy filter statement", "body": "<p>You need to use a <a href=\"http://docs.sqlalchemy.org/en/latest/core/sqlelement.html#sqlalchemy.sql.expression.case\" rel=\"nofollow\"><code>CASE</code></a> statement:</p>\n\n<pre><code>case([\n    (extract('hour', Child.end_time) &lt; extract('hour', Hours.start_time), extract('hour', Child.end_time))\n], else_=extract('hour', Child.end_time) + 24)\n</code></pre>\n"}], "owner": {"reputation": 1326, "user_id": 1005909, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d90997d0eb87121af6b24407d90d9a55?s=128&d=identicon&r=PG", "display_name": "user1005909", "link": "https://stackoverflow.com/users/1005909/user1005909"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 503, "favorite_count": 0, "accepted_answer_id": 30087263, "answer_count": 1, "score": 0, "last_activity_date": 1430945365, "creation_date": 1430944371, "question_id": 30086977, "link": "https://stackoverflow.com/questions/30086977/using-a-ternary-operator-in-a-sqlalchemy-filter-statement", "title": "Using a ternary operator in a sqlalchemy filter statement", "body": "<p>Let's say I have a one to many relationship defined in sqlalchemy.</p>\n\n<p>My parent table has a bunch of children. And those children have start and end times attached to them. The times are datetime.time objects in which the hours must be between 0 and 23. When the end time occurs before the start time (like starting at 8:00 and ending at 01:00), a simple query like <code>(Children.start_time &lt;= search_time) &amp; (search_time &gt;= Children.end_time)</code> doesn't work.</p>\n\n<p>Is there a way to make this statement work?</p>\n\n<pre><code>        parent_query = Parents.join(Parents.children).filter(\n                (Child.start_time &lt;= search_time) &amp;\\\n                (\n                    (\n                        extract('hour', Child.end_time) if\\ \n                        extract('hour', Child.end_time) &lt; extract('hour', Hours.start_time) else\\\n                        extract('hour', Child.end_time) + 24\n                    )\n                    &gt;= search_hour\n                ) &amp;\\\n                (Child.end_time.minute &gt;= search_minute)\n                )\n</code></pre>\n\n<p>I'm getting a <code>TypeError: Boolean value of this clause is not defined</code></p>\n"}, {"tags": ["python", "string", "numpy", "types"], "answers": [{"comments": [{"owner": {"reputation": 4424, "user_id": 5452008, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-305SHYPJuxE/AAAAAAAAAAI/AAAAAAAAABE/re8EZA9WuXs/photo.jpg?sz=128", "display_name": "S&#246;ren", "link": "https://stackoverflow.com/users/5452008/s%c3%b6ren"}, "edited": false, "score": 0, "creation_date": 1548876923, "post_id": 30087350, "comment_id": 95705401, "body": "I think <code>str</code> can be used in numpy arrays. I just have an error because of that. One array returns <code>type(X[0])</code> <code>str</code> the other array returns <code>numpy.str_</code>."}, {"owner": {"reputation": 3358, "user_id": 852385, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5c0eac51aaa99541fb966854b5dcb131?s=128&d=identicon&r=PG", "display_name": "Helin Wang", "link": "https://stackoverflow.com/users/852385/helin-wang"}, "edited": false, "score": 1, "creation_date": 1578779261, "post_id": 30087350, "comment_id": 105552149, "body": "Wonder why numpy uses np.string_ instead of np.string? Why &#39;_&#39; in the end?"}, {"owner": {"reputation": 401, "user_id": 12808884, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U2Xug.png?s=128&g=1", "display_name": "Leland Hepworth", "link": "https://stackoverflow.com/users/12808884/leland-hepworth"}, "reply_to_user": {"reputation": 3358, "user_id": 852385, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/5c0eac51aaa99541fb966854b5dcb131?s=128&d=identicon&r=PG", "display_name": "Helin Wang", "link": "https://stackoverflow.com/users/852385/helin-wang"}, "edited": false, "score": 0, "creation_date": 1599851290, "post_id": 30087350, "comment_id": 112913557, "body": "@HelinWang check out the following question: <a href=\"https://stackoverflow.com/questions/6205020/numpy-types-with-underscore-int-float-etc\" title=\"numpy types with underscore int float etc\">stackoverflow.com/questions/6205020/&hellip;</a>"}], "tags": [], "owner": {"reputation": 130643, "user_id": 3923281, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CNpoa.jpg?s=128&g=1", "display_name": "Alex Riley", "link": "https://stackoverflow.com/users/3923281/alex-riley"}, "is_accepted": true, "score": 26, "last_activity_date": 1430949582, "last_edit_date": 1430949582, "creation_date": 1430945722, "answer_id": 30087350, "question_id": 30086936, "link": "https://stackoverflow.com/questions/30086936/what-is-the-difference-between-the-types-type-numpy-string-and-type-str/30087350#30087350", "title": "What is the difference between the types &lt;type &#39;numpy.string_&#39;&gt; and &lt;type &#39;str&#39;&gt;?", "body": "<p><code>numpy.string_</code> is the NumPy datatype used for arrays containing fixed-width byte strings. On the other hand, <code>str</code> is a native Python type and can not be used as a datatype for NumPy arrays*.</p>\n\n<p>If you create a NumPy array containing strings, the array will use the <code>numpy.string_</code> type (or the <code>numpy.unicode_</code> type in Python 3). More precisely, the array will use a sub-datatype of <code>np.string_</code>:</p>\n\n<pre><code>&gt;&gt;&gt; a = np.array(['abc', 'xy'])\n&gt;&gt;&gt; a\narray(['abc', 'xy'], dtype='&lt;S3')\n&gt;&gt;&gt; np.issubdtype('&lt;S3', np.string_)\nTrue\n</code></pre>\n\n<p>In this case the datatype is <code>'&lt;S3'</code>: the <code>&lt;</code> denotes the byte-order (little-endian), <code>S</code> denotes the string type and <code>3</code> indicates that each value in the array holds up to three characters (or bytes).</p>\n\n<p>One property that <code>np.string_</code> and <code>str</code> share is immutability. Trying to increase the length of a Python <code>str</code> object will create a new object in memory. Similarly, if you want fixed-width NumPy array to hold more characters, a new larger array will have to be created in memory.</p>\n\n<hr>\n\n<p>* Note that it is possible to create a NumPy <code>object</code> array which contains <em>references</em> to Python <code>str</code> objects, but such arrays behave quite differently to normal arrays.</p>\n"}], "owner": {"reputation": 429, "user_id": 4285244, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b3c7039883feae6425a7d6dd360a2643?s=128&d=identicon&r=PG&f=1", "display_name": "Blunt", "link": "https://stackoverflow.com/users/4285244/blunt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31393, "favorite_count": 4, "accepted_answer_id": 30087350, "answer_count": 1, "score": 21, "last_activity_date": 1489051344, "creation_date": 1430944228, "last_edit_date": 1489051344, "question_id": 30086936, "link": "https://stackoverflow.com/questions/30086936/what-is-the-difference-between-the-types-type-numpy-string-and-type-str", "title": "What is the difference between the types &lt;type &#39;numpy.string_&#39;&gt; and &lt;type &#39;str&#39;&gt;?", "body": "<p>Is there a difference between the types <code>&lt;type 'numpy.string_'&gt;</code> and <code>&lt;type 'str'&gt;</code>?</p>\n"}, {"tags": ["javascript", "php", "python", "html", "ajax"], "comments": [{"owner": {"reputation": 452, "user_id": 3874760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d8932b7b299757ddfcb65f34de697f35?s=128&d=identicon&r=PG&f=1", "display_name": "Eric E", "link": "https://stackoverflow.com/users/3874760/eric-e"}, "edited": false, "score": 1, "creation_date": 1430944202, "post_id": 30086874, "comment_id": 48287106, "body": "Could it be because the argument to your shell_exec() does not execute it from the root directory? Try     echo shell_exec(&quot;/usr/bin/python pytest.py&quot;);"}, {"owner": {"reputation": 6315, "user_id": 1555990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a743aed2f5b809958ebb17d4d952b7b2?s=128&d=identicon&r=PG", "display_name": "That1Guy", "link": "https://stackoverflow.com/users/1555990/that1guy"}, "edited": false, "score": 2, "creation_date": 1430944260, "post_id": 30086874, "comment_id": 48287147, "body": "<code>I am very new to PHP</code> - Run! Run away! Run like your life depends on it!"}, {"owner": {"reputation": 7175, "user_id": 4098311, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/5UMNm.png?s=128&g=1", "display_name": "Halayem Anis", "link": "https://stackoverflow.com/users/4098311/halayem-anis"}, "reply_to_user": {"reputation": 6315, "user_id": 1555990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a743aed2f5b809958ebb17d4d952b7b2?s=128&d=identicon&r=PG", "display_name": "That1Guy", "link": "https://stackoverflow.com/users/1555990/that1guy"}, "edited": false, "score": 2, "creation_date": 1430944319, "post_id": 30086874, "comment_id": 48287179, "body": "@That1Guy : Run To or From PHP ? :)"}, {"owner": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "edited": false, "score": 1, "creation_date": 1430944326, "post_id": 30086874, "comment_id": 48287185, "body": "You use PHP to run Python? I think I&#39;m about to break down and cry. :-( In .htaccess you can tell Python to execute .py files as CGI scripts. Then add the <a href=\"http://en.wikipedia.org/wiki/Shebang_%28Unix%29\" rel=\"nofollow noreferrer\">shebang</a> <code>#!&#47;usr&#47;bin&#47;python2.7</code> (or whatever version) to the top of the file."}, {"owner": {"reputation": 8169, "user_id": 2602732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aFcDy.png?s=128&g=1", "display_name": "cmorrissey", "link": "https://stackoverflow.com/users/2602732/cmorrissey"}, "edited": false, "score": 1, "creation_date": 1430944418, "post_id": 30086874, "comment_id": 48287241, "body": "<code>May  6 18:22:01 machine abrt: detected unhandled Python exception in &#39;pytest.py&#39;</code> you need to debug your python script, handle the exception to see what the error is."}, {"owner": {"reputation": 2596, "user_id": 1249267, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/86d167bf675611a3a0cb2d5c928302d7?s=128&d=identicon&r=PG&f=1", "display_name": "sudhishkr", "link": "https://stackoverflow.com/users/1249267/sudhishkr"}, "reply_to_user": {"reputation": 8169, "user_id": 2602732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aFcDy.png?s=128&g=1", "display_name": "cmorrissey", "link": "https://stackoverflow.com/users/2602732/cmorrissey"}, "edited": false, "score": 0, "creation_date": 1430944474, "post_id": 30086874, "comment_id": 48287268, "body": "@cmorrissey - thats a good tip - let me put an exception check in python."}, {"owner": {"reputation": 2596, "user_id": 1249267, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/86d167bf675611a3a0cb2d5c928302d7?s=128&d=identicon&r=PG&f=1", "display_name": "sudhishkr", "link": "https://stackoverflow.com/users/1249267/sudhishkr"}, "reply_to_user": {"reputation": 452, "user_id": 3874760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d8932b7b299757ddfcb65f34de697f35?s=128&d=identicon&r=PG&f=1", "display_name": "Eric E", "link": "https://stackoverflow.com/users/3874760/eric-e"}, "edited": false, "score": 0, "creation_date": 1430944512, "post_id": 30086874, "comment_id": 48287287, "body": "@EricE - I have tried what you have told already"}, {"owner": {"reputation": 2596, "user_id": 1249267, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/86d167bf675611a3a0cb2d5c928302d7?s=128&d=identicon&r=PG&f=1", "display_name": "sudhishkr", "link": "https://stackoverflow.com/users/1249267/sudhishkr"}, "reply_to_user": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "edited": false, "score": 0, "creation_date": 1430944557, "post_id": 30086874, "comment_id": 48287312, "body": "@Kay - can you point me to an example ?"}, {"owner": {"reputation": 452, "user_id": 3874760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d8932b7b299757ddfcb65f34de697f35?s=128&d=identicon&r=PG&f=1", "display_name": "Eric E", "link": "https://stackoverflow.com/users/3874760/eric-e"}, "edited": false, "score": 1, "creation_date": 1430944639, "post_id": 30086874, "comment_id": 48287364, "body": "@Suddev Try what Exceen had mentioned in his answer. Also by any chance does you python script require sudo access to run?"}, {"owner": {"reputation": 2596, "user_id": 1249267, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/86d167bf675611a3a0cb2d5c928302d7?s=128&d=identicon&r=PG&f=1", "display_name": "sudhishkr", "link": "https://stackoverflow.com/users/1249267/sudhishkr"}, "reply_to_user": {"reputation": 452, "user_id": 3874760, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d8932b7b299757ddfcb65f34de697f35?s=128&d=identicon&r=PG&f=1", "display_name": "Eric E", "link": "https://stackoverflow.com/users/3874760/eric-e"}, "edited": false, "score": 0, "creation_date": 1430945223, "post_id": 30086874, "comment_id": 48287681, "body": "@EricE - Tried Exceen&#39;s suggestion it did not work. And python script works fine as is on the server machine without sudo. any other suggestions?"}], "answers": [{"comments": [{"owner": {"reputation": 2596, "user_id": 1249267, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/86d167bf675611a3a0cb2d5c928302d7?s=128&d=identicon&r=PG&f=1", "display_name": "sudhishkr", "link": "https://stackoverflow.com/users/1249267/sudhishkr"}, "edited": false, "score": 0, "creation_date": 1430944826, "post_id": 30086968, "comment_id": 48287472, "body": "Thanks for this - I just made this correction ... and my python scripts are in /var/www/html , i even tried an another location and it does not work"}, {"owner": {"reputation": 689, "user_id": 3571933, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3e2920d3c672a228428882227a1a2798?s=128&d=identicon&r=PG", "display_name": "Exceen", "link": "https://stackoverflow.com/users/3571933/exceen"}, "reply_to_user": {"reputation": 2596, "user_id": 1249267, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/86d167bf675611a3a0cb2d5c928302d7?s=128&d=identicon&r=PG&f=1", "display_name": "sudhishkr", "link": "https://stackoverflow.com/users/1249267/sudhishkr"}, "edited": false, "score": 1, "creation_date": 1430992332, "post_id": 30086968, "comment_id": 48306861, "body": "If your scripts are in /var/www/html, did you try <code>&quot;&#47;usr&#47;bin&#47;python &#47;var&#47;www&#47;html&#47;pytest.py&quot;</code> already? And what&#39;s the error message when you try this? (or is it still the same?)"}, {"owner": {"reputation": 2596, "user_id": 1249267, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/86d167bf675611a3a0cb2d5c928302d7?s=128&d=identicon&r=PG&f=1", "display_name": "sudhishkr", "link": "https://stackoverflow.com/users/1249267/sudhishkr"}, "edited": false, "score": 0, "creation_date": 1431032668, "post_id": 30086968, "comment_id": 48334088, "body": "I tried &quot;/usr/bin/python /var/www/html/pytest.py&quot; - does NOT work - complains saying pytest.py cannot be found. BUT, when I try &quot;/usr/bin/python pytest.py&quot; - it works. I am losing my head :("}, {"owner": {"reputation": 2596, "user_id": 1249267, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/86d167bf675611a3a0cb2d5c928302d7?s=128&d=identicon&r=PG&f=1", "display_name": "sudhishkr", "link": "https://stackoverflow.com/users/1249267/sudhishkr"}, "edited": false, "score": 0, "creation_date": 1431075536, "post_id": 30086968, "comment_id": 48349508, "body": "your comments were helpful I have something working. I have moved the python scripts to /var/www/html .. and now I am able to get it to work."}, {"owner": {"reputation": 2596, "user_id": 1249267, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/86d167bf675611a3a0cb2d5c928302d7?s=128&d=identicon&r=PG&f=1", "display_name": "sudhishkr", "link": "https://stackoverflow.com/users/1249267/sudhishkr"}, "edited": false, "score": 0, "creation_date": 1431075571, "post_id": 30086968, "comment_id": 48349536, "body": "It will be nice to have it working on any python script in any folder"}], "tags": [], "owner": {"reputation": 689, "user_id": 3571933, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/3e2920d3c672a228428882227a1a2798?s=128&d=identicon&r=PG", "display_name": "Exceen", "link": "https://stackoverflow.com/users/3571933/exceen"}, "is_accepted": true, "score": 3, "last_activity_date": 1430944340, "creation_date": 1430944340, "answer_id": 30086968, "question_id": 30086874, "link": "https://stackoverflow.com/questions/30086874/cant-execute-python-script-from-php-in-the-client-side/30086968#30086968", "title": "cant execute python script from php, in the client side", "body": "<p>Try placing the full path to your file. In your case you just say <code>'pytest.py'</code>, so replace it with the full path.</p>\n\n<p>Doing so, this would result in something like this:</p>\n\n<pre><code>&lt;?php\n    echo shell_exec(\"/usr/bin/python /home/username/scripts/pytest.py\");\n?&gt;\n</code></pre>\n\n<p>(Also, you missed one <code>/</code> in front of <code>usr/bin/python</code>)</p>\n"}], "owner": {"reputation": 2596, "user_id": 1249267, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/86d167bf675611a3a0cb2d5c928302d7?s=128&d=identicon&r=PG&f=1", "display_name": "sudhishkr", "link": "https://stackoverflow.com/users/1249267/sudhishkr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1704, "favorite_count": 1, "accepted_answer_id": 30086968, "answer_count": 1, "score": 3, "last_activity_date": 1430944861, "creation_date": 1430944015, "last_edit_date": 1430944861, "question_id": 30086874, "link": "https://stackoverflow.com/questions/30086874/cant-execute-python-script-from-php-in-the-client-side", "title": "cant execute python script from php, in the client side", "body": "<p>I am very new to PHP &amp; Apache.</p>\n\n<p>I am building a small webpage - which can run some python code on the server on click of a button from a client computer. To do this, I have read a few articles on the web which tell PHP is the way to do it. I also read that I wouldn't need AJAX. My understanding of PHP, AJAX and related technologies are at a beginner level.</p>\n\n<p>I have an Apache server running on my RHEL 6.5 machine. \nI have PHP v5.3.3, Python v2.6.</p>\n\n<p><strong>PHP script (script.php) :</strong></p>\n\n<pre><code>&lt;?php\necho shell_exec(\"python pytest.py\");\n?&gt;\n</code></pre>\n\n<ul>\n<li><p>Location : /var/www/html/script.php</p></li>\n<li><p>Permissions : chmod 777 script.php</p></li>\n</ul>\n\n<p><strong>Python Script (pytest.py) :</strong> </p>\n\n<pre><code>import os\nos.remove(\"/&lt;path&gt;/hon.txt\")\n</code></pre>\n\n<ul>\n<li><p>Location : /var/www/html/pytest.py</p></li>\n<li><p>Permissions : chmod 777 pytest.py</p></li>\n</ul>\n\n<p><strong>Index HTML (index.html) :</strong> </p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n\n&lt;header&gt;\n&lt;title&gt;Python Run&lt;/title&gt;&lt;/header&gt;\n&lt;body&gt;\n\n&lt;p&gt;\n&lt;b&gt;&lt;font size=\"10\" color=\"red\"&gt;&lt;div align=\"center\"&gt;Run Python Jobs&lt;/div&gt;&lt;/font&gt;&lt;/b&gt;\n&lt;/p&gt;\n\n&lt;table style=\"width:100%\"&gt;\n  &lt;tr&gt;\n    &lt;td&gt;Script1&lt;/td&gt;\n    &lt;td&gt;Description&lt;/td&gt;\n    &lt;td&gt;\n                &lt;form action=\"script.php\" method=\"get\"&gt;\n                        &lt;input type=\"submit\" value=\"Run Py Script\"&gt;\n                &lt;/form&gt;\n    &lt;/td&gt;\n  &lt;/tr&gt;\n&lt;/table&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p><strong>Other things/tests done :</strong> </p>\n\n<ul>\n<li>The Python script works standalone, its a simple python script to delete a file.</li>\n<li>The PHP script also works standalone on the machine running the Apache server.</li>\n<li><p>When I try the button click from HTML, the PHP script does not seem to work.</p></li>\n<li><p>I have checked the log messages from </p>\n\n<pre><code>cd /var/log/\ntail messages -f\n\nMay  6 18:22:01 machine abrt: detected unhandled Python exception in 'pytest.py'\n</code></pre></li>\n<li><p>I was not sure if this could be because of permissions, so I did a </p>\n\n<pre><code>chmod 777 -R /var/www \n</code></pre>\n\n<p>Even then I had the same problems</p></li>\n<li><p>I was not sure where things were going wrong, so I made 2 more changes to the PHP script (script.php) : </p>\n\n<pre><code>&lt;?php\necho shell_exec(\"/usr/bin/python /&lt;path&gt;/pytest.py\");\necho shell_exec(\"ls\");\n?&gt;\n</code></pre>\n\n<p>Over here - the second line works from browser, the first one does not. Which means my python portion is not getting executed.</p></li>\n</ul>\n\n<p>I read somewhere if this is a problem because my Apache server is not run with root privileges. Being new - I don't know how to check that. </p>\n\n<p>If any more information is needed - I can provide details in successive edits.</p>\n"}, {"tags": ["python", "mysql", "input", "insert"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 1, "creation_date": 1528190750, "post_id": 30086868, "comment_id": 88402330, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/902408/how-to-use-variables-in-sql-statement-in-python\">How to use variables in SQL statement in Python?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2314, "user_id": 1990165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1251b9c56361d84d3fd9558dee3a459d?s=128&d=identicon&r=PG", "display_name": "ODiogoSilva", "link": "https://stackoverflow.com/users/1990165/odiogosilva"}, "is_accepted": false, "score": -2, "last_activity_date": 1430944230, "creation_date": 1430944230, "answer_id": 30086937, "question_id": 30086868, "link": "https://stackoverflow.com/questions/30086868/insert-a-value-in-a-mysql-database-using-python/30086937#30086937", "title": "Insert a value in a Mysql database using Python", "body": "<p>Use string formatting to provide the Value variable</p>\n\n<pre><code>cursor.execute(\"\"\"INSERT INTO test VALUES ('Number', %s)\"\"\" % Value)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16285, "user_id": 425313, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2fd9754b62b3a6953874f4ef42978e4d?s=128&d=identicon&r=PG", "display_name": "Brad Koch", "link": "https://stackoverflow.com/users/425313/brad-koch"}, "is_accepted": true, "score": 1, "last_activity_date": 1430946193, "creation_date": 1430946193, "answer_id": 30087470, "question_id": 30086868, "link": "https://stackoverflow.com/questions/30086868/insert-a-value-in-a-mysql-database-using-python/30087470#30087470", "title": "Insert a value in a Mysql database using Python", "body": "<p>Use <a href=\"http://dev.mysql.com/doc/connector-python/en/connector-python-api-mysqlcursor-execute.html\" rel=\"nofollow\"><code>cursor.execute</code></a> to bind <code>Value</code> into your query.</p>\n\n<pre><code>cursor.execute(\"INSERT INTO test VALUES ('Number', %s)\", (Value,)) \n</code></pre>\n\n<p>This is preferable over the other answers because it protects against SQL injection.</p>\n"}], "owner": {"reputation": 149, "user_id": 4872167, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/74657cfbe77a7e7df63f583c195e6195?s=128&d=identicon&r=PG&f=1", "display_name": "Asdalud", "link": "https://stackoverflow.com/users/4872167/asdalud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1899, "favorite_count": 0, "accepted_answer_id": 30087470, "answer_count": 2, "score": 2, "last_activity_date": 1459213948, "creation_date": 1430943996, "question_id": 30086868, "link": "https://stackoverflow.com/questions/30086868/insert-a-value-in-a-mysql-database-using-python", "title": "Insert a value in a Mysql database using Python", "body": "<p>I am trying to insert values typed from me to a MySQL database. I am using python 3.4 and mysql.connector. Here is the part of the script:</p>\n\n<pre><code>Value = int(input(\"Type a number between 1 and 10: \"))\ncursor.execute(\"\"\"INSERT INTO test VALUES ('Number', Value )\"\"\")\n</code></pre>\n\n<p>I am actually trying to find out how to get what i am inserting from my keyboard into the second field of the test table. As it is right now it gives me a SQL syntax error. Please help. Thanks in advance.</p>\n"}, {"tags": ["python", "performance", "profiler"], "comments": [{"owner": {"reputation": 1252, "user_id": 3308231, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/42317f4d6b2cfa14e8fa8b8637f4ea87?s=128&d=identicon&r=PG&f=1", "display_name": "ryan", "link": "https://stackoverflow.com/users/3308231/ryan"}, "edited": false, "score": 2, "creation_date": 1430944237, "post_id": 30086851, "comment_id": 48287130, "body": "Is yours slower? 100 loops at 5.99 ms per loop is 599 ms total, 10000 loops at 103 microseconds is 1030 ms total. Perhaps I&#39;m confused by the timing results?"}, {"owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "reply_to_user": {"reputation": 1252, "user_id": 3308231, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/42317f4d6b2cfa14e8fa8b8637f4ea87?s=128&d=identicon&r=PG&f=1", "display_name": "ryan", "link": "https://stackoverflow.com/users/3308231/ryan"}, "edited": false, "score": 1, "creation_date": 1430946256, "post_id": 30086851, "comment_id": 48288232, "body": "@ryan The time per loop is what matters, not the overall time spent running the benchmark. The number of iterations just gives you an idea of a confidence interval."}, {"owner": {"reputation": 12398, "user_id": 1310566, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/5qiMO.jpg?s=128&g=1", "display_name": "Simon Forsberg", "link": "https://stackoverflow.com/users/1310566/simon-forsberg"}, "reply_to_user": {"reputation": 18939, "user_id": 2756409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UIrGI.jpg?s=128&g=1", "display_name": "TylerH", "link": "https://stackoverflow.com/users/2756409/tylerh"}, "edited": false, "score": 4, "creation_date": 1431030729, "post_id": 30086851, "comment_id": 48333034, "body": "@TylerH With 9 upvotes and no close votes until now, it seems like this is an acceptable question on Stack Overflow. Some questions can be on-topic on both sites. It is also not a very good Code Review question as it includes a bit about understanding some other code."}, {"owner": {"reputation": 10086, "user_id": 3198973, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cPPKQ.png?s=128&g=1", "display_name": "RubberDuck", "link": "https://stackoverflow.com/users/3198973/rubberduck"}, "reply_to_user": {"reputation": 18939, "user_id": 2756409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UIrGI.jpg?s=128&g=1", "display_name": "TylerH", "link": "https://stackoverflow.com/users/2756409/tylerh"}, "edited": false, "score": 5, "creation_date": 1431031009, "post_id": 30086851, "comment_id": 48333181, "body": "<i>Sigh</i>, then please use an actual close reason. Being on topic somewhere else doesn&#39;t make it off topic here. Saying it belongs somewhere else is not a close reason @TylerH."}, {"owner": {"reputation": 18939, "user_id": 2756409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UIrGI.jpg?s=128&g=1", "display_name": "TylerH", "link": "https://stackoverflow.com/users/2756409/tylerh"}, "reply_to_user": {"reputation": 10086, "user_id": 3198973, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/cPPKQ.png?s=128&g=1", "display_name": "RubberDuck", "link": "https://stackoverflow.com/users/3198973/rubberduck"}, "edited": false, "score": 0, "creation_date": 1431031078, "post_id": 30086851, "comment_id": 48333223, "body": "@RubberDuck Unfortunately we are not capable of changing our CV reasons even in light of new information, so I&#39;m unable to do that."}, {"owner": {"reputation": 38606, "user_id": 23771, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/NeuGc.jpg?s=128&g=1", "display_name": "Mike Dunlavey", "link": "https://stackoverflow.com/users/23771/mike-dunlavey"}, "edited": false, "score": 0, "creation_date": 1431541358, "post_id": 30086851, "comment_id": 48548818, "body": "You can depend on people to say, from eyeballing the code, that &quot;the problem is Foo&quot;. They might be right. The probability they are right is something, perhaps as much as 20%. Can you depend on that? The way to find out what takes time is not eyeballing, but <a href=\"http://stackoverflow.com/a/4299378/23771\"><i>this method</i></a>, and it&#39;s never wrong."}], "answers": [{"tags": [], "owner": {"reputation": 305833, "user_id": 68587, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/7d9fd158e03cbde94f7e0b33b78222af?s=128&d=identicon&r=PG", "display_name": "John Kugelman", "link": "https://stackoverflow.com/users/68587/john-kugelman"}, "is_accepted": false, "score": 3, "last_activity_date": 1430946217, "creation_date": 1430946217, "answer_id": 30087475, "question_id": 30086851, "link": "https://stackoverflow.com/questions/30086851/why-is-my-newbie-code-so-slow/30087475#30087475", "title": "Why is my (newbie) code so slow?", "body": "<p>The culprit looks to be this line:</p>\n\n<pre><code>neighbor = tuple(np.add( (x,y), (xo,yo) ))\n</code></pre>\n\n<p>Changing it to this shows a huge speedup:</p>\n\n<pre><code>neighbor = (x + xo, y + yo)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": true, "score": 8, "last_activity_date": 1431010798, "last_edit_date": 1431010798, "creation_date": 1430946242, "answer_id": 30087482, "question_id": 30086851, "link": "https://stackoverflow.com/questions/30086851/why-is-my-newbie-code-so-slow/30087482#30087482", "title": "Why is my (newbie) code so slow?", "body": "<p>Don't use <code>np.add</code>, just use <code>neighbor = (x+xo, y+yo)</code>. That should make it much faster (10x faster in my little test).</p>\n\n<p>You can also...</p>\n\n<ul>\n<li>ask <code>if neighbor in self.agents:</code> without the <code>.keys()</code></li>\n<li>leave out the <code>list</code></li>\n<li>check <code>xo or yo</code> and not have an empty if-block</li>\n<li>avoid the double-lookup of neighbor in self-agents</li>\n</ul>\n\n<p>Result:</p>\n\n<pre><code>for xo, yo in itertools.product([-1,0,1],[-1,0,1]):\n    if xo or yo:\n        neighbor = self.agents.get((x+xo, y+yo))\n        if neighbor is not None:\n            if neighbor == thisRace:\n                count_same += 1\n            else:\n                count_other += 1\n</code></pre>\n\n<p>And you can add</p>\n\n<pre><code>self.neighbor_deltas = tuple(set(itertools.product([-1,0,1],[-1,0,1])) - {(0, 0)})\n</code></pre>\n\n<p>to the class initializer and then your function can just use those pre-computed deltas:</p>\n\n<pre><code>for xo, yo in self.neighbor_deltas:\n    neighbor = self.agents.get((x+xo, y+yo))\n    if neighbor is not None:\n        if neighbor == thisRace:\n            count_same += 1\n        else:\n            count_other += 1\n</code></pre>\n\n<p>Congrats for deciding to improve that author's ridiculously repetitive code, btw.</p>\n"}], "owner": {"reputation": 9097, "user_id": 368311, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5db52f950caf13b2702499daab09ddfe?s=128&d=identicon&r=PG&f=1", "display_name": "itzy", "link": "https://stackoverflow.com/users/368311/itzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 2, "accepted_answer_id": 30087482, "answer_count": 2, "score": 9, "last_activity_date": 1431540516, "creation_date": 1430943931, "last_edit_date": 1431540516, "question_id": 30086851, "link": "https://stackoverflow.com/questions/30086851/why-is-my-newbie-code-so-slow", "title": "Why is my (newbie) code so slow?", "body": "<p>I'm learning python and came across <a href=\"https://www.binpress.com/tutorial/introduction-to-agentbased-models-an-implementation-of-schelling-model-in-python/144\" rel=\"nofollow\">this example</a> of a simulation of a model I've seen before. One of the functions looked unnecessarily long, so I thought it would be good practice to try to make it more efficient. My attempt, while requiring less code, is about 1/60th as fast. Yes, I made it 60 times worse. </p>\n\n<p>My question is, where have I gone wrong? I've tried timing individual parts of the function and don't see where the bottleneck is.</p>\n\n<p>Here's the original function. It's for a model where people live on a grid and their happiness depends on whether they're the same race as most of their neighbors. (It's Schelling's <a href=\"http://en.wikipedia.org/wiki/Tipping_point_(sociology)\" rel=\"nofollow\">segregation model</a>.) So we give it an x,y coordinate for a person and determine their happiness by checking the race of each of their neighbors.</p>\n\n<pre><code>def is_unhappy(self, x, y):\n\n    race = self.agents[(x,y)]\n    count_similar = 0\n    count_different = 0\n\n    if x &gt; 0 and y &gt; 0 and (x-1, y-1) not in self.empty_houses:\n        if self.agents[(x-1, y-1)] == race:\n            count_similar += 1\n        else:\n            count_different += 1\n    if y &gt; 0 and (x,y-1) not in self.empty_houses:\n        if self.agents[(x,y-1)] == race:\n            count_similar += 1\n        else:\n            count_different += 1\n    if x &lt; (self.width-1) and y &gt; 0 and (x+1,y-1) not in self.empty_houses:\n        if self.agents[(x+1,y-1)] == race:\n            count_similar += 1\n        else:\n            count_different += 1\n    if x &gt; 0 and (x-1,y) not in self.empty_houses:\n        if self.agents[(x-1,y)] == race:\n            count_similar += 1\n        else:\n            count_different += 1        \n    if x &lt; (self.width-1) and (x+1,y) not in self.empty_houses:\n        if self.agents[(x+1,y)] == race:\n            count_similar += 1\n        else:\n            count_different += 1\n    if x &gt; 0 and y &lt; (self.height-1) and (x-1,y+1) not in self.empty_houses:\n        if self.agents[(x-1,y+1)] == race:\n            count_similar += 1\n        else:\n            count_different += 1        \n    if x &gt; 0 and y &lt; (self.height-1) and (x,y+1) not in self.empty_houses:\n        if self.agents[(x,y+1)] == race:\n            count_similar += 1\n        else:\n            count_different += 1        \n    if x &lt; (self.width-1) and y &lt; (self.height-1) and (x+1,y+1) not in self.empty_houses:\n        if self.agents[(x+1,y+1)] == race:\n            count_similar += 1\n        else:\n            count_different += 1\n\n    if (count_similar+count_different) == 0:\n        return False\n    else:\n        return float(count_similar)/(count_similar+count_different) &lt; self.similarity_threshold \n</code></pre>\n\n<p>And here is my code, which, as I said, is MUCH slower. I wanted to avoid having all the if statements above by just creating a list of \"offsets\" to add to each person's coordinates to determine the locations of possible neighbors, check if that is a valid position, and then check the neighbor's race.</p>\n\n<pre><code>def is_unhappy2(self, x, y):\n    thisRace = self.agents[(x,y)]\n    count_same = 0\n    count_other = 0\n\n    for xo, yo in list(itertools.product([-1,0,1],[-1,0,1])):\n        if xo==0 and yo==0:\n            # do nothing for case of no offset\n            next\n        else:\n            # check if there's a neighbor at the offset of (xo, yo)\n            neighbor = tuple(np.add( (x,y), (xo,yo) ))\n            if neighbor in self.agents.keys():\n                if self.agents[neighbor] == thisRace:\n                    count_same += 1\n                else:\n                    count_other += 1\n    if count_same+count_other == 0:\n        return False\n    else:\n        return float(count_same) / (count_same + count_other) &lt; self.similarity threshold\n</code></pre>\n\n<p>(The rest of the code that creates the class is <a href=\"https://www.binpress.com/tutorial/introduction-to-agentbased-models-an-implementation-of-schelling-model-in-python/144\" rel=\"nofollow\">on the site</a> where the example comes from.)</p>\n\n<p>Here are the timing results:</p>\n\n<pre><code>%timeit s.is_unhappy2(49,42)\n100 loops, best of 3: 5.99 ms per loop\n\n%timeit s.is_unhappy(49,42)\n10000 loops, best of 3: 103 \u00b5s per loop\n</code></pre>\n\n<p>I'm hoping someone with python knowledge can see immediately what I'm doing wrong without having to get into the nitty-gritty of the rest of the code. Can you see why my code is so much worse than the original?</p>\n"}, {"tags": ["python", "matplotlib", "plot", "3d"], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 4872230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/94331ee27e7686ece09f852aa2d820ef?s=128&d=identicon&r=PG&f=1", "display_name": "Qutaiba", "link": "https://stackoverflow.com/users/4872230/qutaiba"}, "edited": false, "score": 0, "creation_date": 1430947004, "post_id": 30087130, "comment_id": 48288586, "body": "Thank you :) , but when i run the modified code, the 3D space appear for about 0.5 second and the disappear and get this error : <a href=\"https://www.imageupload.co.uk/images/2015/05/06/Capture1.png\" rel=\"nofollow noreferrer\">imageupload.co.uk/images/2015/05/06/Capture1.png</a>"}, {"owner": {"reputation": 23035, "user_id": 401828, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ea104f2947e580667d15b7403829b1ec?s=128&d=identicon&r=PG", "display_name": "heltonbiker", "link": "https://stackoverflow.com/users/401828/heltonbiker"}, "reply_to_user": {"reputation": 145, "user_id": 4872230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/94331ee27e7686ece09f852aa2d820ef?s=128&d=identicon&r=PG&f=1", "display_name": "Qutaiba", "link": "https://stackoverflow.com/users/4872230/qutaiba"}, "edited": false, "score": 0, "creation_date": 1430948241, "post_id": 30087130, "comment_id": 48289184, "body": "Oh, sorry... I had reintroduced a typo of yours: you were using <code>x.append(count)</code> three times (instead of adding to x, y and z). I corrected my code and now it seems to work."}], "tags": [], "owner": {"reputation": 23035, "user_id": 401828, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ea104f2947e580667d15b7403829b1ec?s=128&d=identicon&r=PG", "display_name": "heltonbiker", "link": "https://stackoverflow.com/users/401828/heltonbiker"}, "is_accepted": true, "score": 1, "last_activity_date": 1430948275, "last_edit_date": 1430948275, "creation_date": 1430944899, "answer_id": 30087130, "question_id": 30086804, "link": "https://stackoverflow.com/questions/30086804/continuous-3d-plotting-using-matplotlib/30087130#30087130", "title": "continuous 3d plotting using matplotlib", "body": "<p>I don't know why it didn't work the way you coded, but I could get it to work like this:</p>\n\n<pre><code>import matplotlib as mpl\nfrom mpl_toolkits.mplot3d import Axes3D\nimport matplotlib.pyplot as plt\nimport time\nimport numpy\n\n\ncount=0\nfig = plt.figure()\nax = fig.gca(projection='3d')\nz = [0]\nx = [0]\ny = [0]\n\nplt.ion()    ###\n\nplt.show()\nwhile True:\n    count +=1\n    x.append(count)\n    y.append(count**2) #\n    z.append(count**3) # just for eye-candy\n\n    ax.plot(numpy.array(x),    ###\n            numpy.array(y),    ###\n            numpy.array(z))    ###\n\n    time.sleep(1)\n    plt.draw()\n</code></pre>\n\n<p>The <code>ion</code> part makes sense, but converting your sequences to arrays was necessary here, because I was getting an error due to (apparently) matrix multiplication being impossible with simple sequences:</p>\n\n<pre><code>(...)\nFile \"C:\\Python27\\lib\\site-packages\\mpl_toolkits\\mplot3d\\proj3d.py\", line     158, in proj_transform_vec\n    vecw = np.dot(M, vec)\nTypeError: can't multiply sequence by non-int of type 'float'\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 4872230, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/94331ee27e7686ece09f852aa2d820ef?s=128&d=identicon&r=PG&f=1", "display_name": "Qutaiba", "link": "https://stackoverflow.com/users/4872230/qutaiba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1037, "favorite_count": 0, "accepted_answer_id": 30087130, "answer_count": 1, "score": 2, "last_activity_date": 1558346172, "creation_date": 1430943787, "last_edit_date": 1558346172, "question_id": 30086804, "link": "https://stackoverflow.com/questions/30086804/continuous-3d-plotting-using-matplotlib", "title": "continuous 3d plotting using matplotlib", "body": "<p>I am working on a project that require a continuous 3D plotting using matplotlib.\nthe whole project is complex, but i summarized the problem with this simple example:</p>\n\n<pre><code>import matplotlib as mpl\nfrom mpl_toolkits.mplot3d import Axes3D\nimport matplotlib.pyplot as plt\nimport time\n\n\ncount=0\nfig = plt.figure()\nax = fig.gca(projection='3d')\nz = [0]\nx = [0]\ny = [0]\nplt.show()\nwhile True:\n    count +=1\n    x.append(count)\n    x.append(count)\n    x.append(count)\n    ax.plot(x, y, z)\n    time.sleep(1)\n    plt.draw()\n</code></pre>\n\n<p>in this code, I am trying to redraw the 3D line with new x,y,z values. but nothing happens!</p>\n"}, {"tags": ["python", "tkinter", "labels"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1430943774, "post_id": 30086757, "comment_id": 48286855, "body": "I see several ways in which this code would not work, including improper indentation and concatenating <code>str</code> objects with <code>Label</code> objects. Please ensure that the indentation in this code is as it appears in your actual program, and then clarify what sort of problems you&#39;re seeing."}, {"owner": {"reputation": 63, "user_id": 3275869, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d9c3c32466f97789ea6f5bde956d9ac?s=128&d=identicon&r=PG&f=1", "display_name": "FpRoT", "link": "https://stackoverflow.com/users/3275869/fprot"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1430943802, "post_id": 30086757, "comment_id": 48286866, "body": "I was correcting the indentation as you were writting your comment. The problem I have is that the label stays white and no text is displayed"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1430944582, "post_id": 30086757, "comment_id": 48287328, "body": "Apart from missing the <code>import</code> statements, you refer to undefined methods like <code>setLabel()</code>, you never actually call <code>horayfecha()</code>, and the statement assigning <code>a&#241;o</code> is incorrectly indented. Also, you <code>format()</code> a string with no changes, your <code>if</code> structure is not good, and there&#39;s at least one typo (<code>&#39;stiembre&#39;</code>). Please read about how to make an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>."}, {"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1430945788, "post_id": 30086757, "comment_id": 48287990, "body": "Also, <code>fecha</code> starts out as an instance of a label, then you use the same variable name in a function to refer to a date."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 3275869, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d9c3c32466f97789ea6f5bde956d9ac?s=128&d=identicon&r=PG&f=1", "display_name": "FpRoT", "link": "https://stackoverflow.com/users/3275869/fprot"}, "edited": false, "score": 0, "creation_date": 1430950717, "post_id": 30087395, "comment_id": 48290351, "body": "thank you, I actually didn&#39;t know there were so many problems, and excuse my lack of knowledge, I am just starting to learn python"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 63, "user_id": 3275869, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d9c3c32466f97789ea6f5bde956d9ac?s=128&d=identicon&r=PG&f=1", "display_name": "FpRoT", "link": "https://stackoverflow.com/users/3275869/fprot"}, "edited": false, "score": 1, "creation_date": 1430950850, "post_id": 30087395, "comment_id": 48290404, "body": "Glad to help. I highly recommend reading up on <code>tkinter</code> on <a href=\"http://effbot.org/tkinterbook/\" rel=\"nofollow noreferrer\">Effbot</a>."}], "tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": true, "score": 0, "last_activity_date": 1430945903, "creation_date": 1430945903, "answer_id": 30087395, "question_id": 30086757, "link": "https://stackoverflow.com/questions/30086757/python-tkinter-setting-label-text-from-function/30087395#30087395", "title": "Python tkinter setting label text from function", "body": "<p>Your code had many problems, including missing imports, indentation, style, non-unique variable names, mixing up which variables refer to which objects, spelling errors (yes, those count, because they bother the user almost as much as crashing bugs), poor widget placement, strange string formatting, failure to call defined functions, function results that are thrown away instead of returned, and possibly more that I'm forgetting.</p>\n\n<p>Here is a cleaned-up version of your code that works properly:</p>\n\n<pre><code>from tkinter import *\nimport time\n\nroot = Tk()\nroot.title(\"Tarea Programada 2\")\nroot.geometry(\"800x700+350+100\")\n\nfecha = Label(root, text=\" \", font=('times',10), fg= 'black', bg= 'white', width = 50, height = 1)\nfecha.place(x=350,y=100)\n\ndef horayfecha():\n    d\u00eda, fecha, mes, a\u00f1o = time.strftime(\"%A %m %B %Y\").split()\n\n    d\u00edas = {'Monday':'Lunes', 'Tuesday':'Martes', 'Wednesday':'Mi\u00e9rcoles',\n            'Thursday':'Jueves', 'Friday':'Viernes', 'Saturday':'S\u00e1bado', 'Sunday':'Domingo'}\n\n    meses = {'January':'Enero', 'February':'Febrero', 'March':'Marzo', 'April':'Abril', 'May':'Mayo',\n             'June':'Junio', 'July':'Julio', 'August':'Agosto', 'September':'Setiembre', 'October':'Octubre',\n             'November':'Noviembre', 'December':'Diciembre'}\n\n    return ' '.join([\"San Jos\u00e9, Costa Rica\", d\u00edas.get(d\u00eda), fecha, \"de\", meses.get(mes), \"de\", a\u00f1o])\n\nfecha.config(text=horayfecha())\nroot.mainloop()\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 3275869, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d9c3c32466f97789ea6f5bde956d9ac?s=128&d=identicon&r=PG&f=1", "display_name": "FpRoT", "link": "https://stackoverflow.com/users/3275869/fprot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1475, "favorite_count": 0, "accepted_answer_id": 30087395, "answer_count": 1, "score": 0, "last_activity_date": 1430945903, "creation_date": 1430943627, "last_edit_date": 1430943774, "question_id": 30086757, "link": "https://stackoverflow.com/questions/30086757/python-tkinter-setting-label-text-from-function", "title": "Python tkinter setting label text from function", "body": "<p>I have a label in a tkinter window and a function which outputs the current date in spanish. I am trying to set the label text to the date given by the function but it doesnt work.</p>\n\n<p>the code is the following:</p>\n\n<pre><code>root = Tk()\nroot.title(\"Tarea Programada 2\")\nroot.geometry(\"800x700+350+100\")\nfecha = Label(root, text=\" \", font=('times',10), fg= 'black', bg= 'white', width = 30, height = 1)\nfecha.place(x=551,y=100)\n\ndef horayfecha():\n   dia = time.strftime(\"%A\")\n   fecha = time.strftime(\"%m\")\n   mes = time.strftime(\"%B\")\n      a\u00f1o = time.strftime(\"%Y\")\n   if dia == \"Monday\":\n       dia = \"Lunes\"\n   if dia == \"Tuesday\":\n       dia = \"Martes\"\n   if dia == \"Wednesday\":\n       dia = \"Miercoles\"\n   if dia == \"Thursday\":\n       dia = \"Jueves\"\n   if dia == \"Friday\":\n       dia = \"Viernes\"\n   if dia == \"Satuday\":\n       dia = \"Sabado\"\n   if dia == \"Sunday\":\n       dia = \"Domingo\"\n   if mes == \"January\":\n       mes = \"enero\"\n   if mes == \"February\":\n       mes = \"febrero\"\n   if mes == \"March\":\n       mes = \"marzo\"\n   if mes == \"April\":\n       mes = \"abril\"\n   if mes == \"May\":\n       mes = \"mayo\"\n   if mes == \"June\":\n       mes = \"junio\"\n   if mes == \"July\":\n       mes = \"julio\"\n   if mes == \"August\":\n       mes = \"agosto\"\n   if mes == \"September\":\n       mes = \"stiembre\"\n   if mes == \"October\":\n       mes = \"octubre\"\n   if mes == \"November\":\n       mes = \"noviembre\"\n   if mes == \"December\":\n       mes = \"diciembre\"\n   comp = (\"San Jos\u00e9, Costa Rica \" + dia + \" \" + fecha + \" de \" + mes + \" de \" + a\u00f1o)\n   fecha.setLabel(\"{}\".format(comp))\n\nroot.mainloop()\n</code></pre>\n\n<p>Can anyone help me with this?</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["python", "google-bigquery"], "comments": [{"owner": {"reputation": 113, "user_id": 4784845, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/e07cc08300a8fb28ab3f6731a5137b53?s=128&d=identicon&r=PG&f=1", "display_name": "David Lee", "link": "https://stackoverflow.com/users/4784845/david-lee"}, "edited": false, "score": 0, "creation_date": 1430957349, "post_id": 30086745, "comment_id": 48292473, "body": "Having continued to try and figure this out I see now that this is not JSON formating but rather represents a Python dictionary structure.  However, when I &#39;type&#39; the output, it identifies it as a string.  I would still like to figure out how to output the desired value, although now knowing it is a string I could apply string functions to strip it down to what I need."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 4784845, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/e07cc08300a8fb28ab3f6731a5137b53?s=128&d=identicon&r=PG&f=1", "display_name": "David Lee", "link": "https://stackoverflow.com/users/4784845/david-lee"}, "edited": false, "score": 0, "creation_date": 1431032579, "post_id": 30091565, "comment_id": 48334041, "body": "Thanks Michael.  You&#39;re correct.  I was looking for a way to pull out just the value from the Python object.  Of course, I had to first understand the object, which took me a bit, since I&#39;m a novice when it comes to Python.  I&#39;ve finally got it working.  Given my novice skills this was a good learning exercise."}], "tags": [], "owner": {"reputation": 1877, "user_id": 1371484, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4aK4h.png?s=128&g=1", "display_name": "Michael Sheldon", "link": "https://stackoverflow.com/users/1371484/michael-sheldon"}, "is_accepted": true, "score": 2, "last_activity_date": 1430970506, "creation_date": 1430970506, "answer_id": 30091565, "question_id": 30086745, "link": "https://stackoverflow.com/questions/30086745/how-can-i-generate-a-bigquery-result-without-json-formatting/30091565#30091565", "title": "How can I generate a BigQuery result without JSON formatting?", "body": "<p>I believe you want something like this:</p>\n\n<pre><code>for page in paging(service,\n                   service.jobs().getQueryResults,\n                   num_retries=num_retries,\n                   **query_job['jobReference']):\n  for row in page['rows']:\n    # Each row is a dict with fields, 'f', containing\n    # an array of table cells, one for each column\n    # of the query output. Each cell is a dict\n    # containing a value, 'v'.\n    yield row['f'][0]['v']  # This query generates 1 column.\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 4784845, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/e07cc08300a8fb28ab3f6731a5137b53?s=128&d=identicon&r=PG&f=1", "display_name": "David Lee", "link": "https://stackoverflow.com/users/4784845/david-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 880, "favorite_count": 0, "accepted_answer_id": 30091565, "answer_count": 1, "score": 0, "last_activity_date": 1430970506, "creation_date": 1430943566, "question_id": 30086745, "link": "https://stackoverflow.com/questions/30086745/how-can-i-generate-a-bigquery-result-without-json-formatting", "title": "How can I generate a BigQuery result without JSON formatting?", "body": "<p>I've been adapting the asynch_query.py script found at the <a href=\"https://github.com/GoogleCloudPlatform/bigquery-samples-python/blob/master/python/samples/async_query.py\" rel=\"nofollow\">bigquery-python-samples github repository</a> to return data from google bigquery.  As written the section of code that returns the results produces a list of items in JSON format.</p>\n\n<pre><code>def run(project_id, query_string, batch, num_retries, interval):\nservice = get_service()query_job = async_query(service,\n                        project_id,\n                        query_string,\n                        batch,\n                        num_retries)\n\npoll_job(service,\n         query_job['jobReference']['projectId'],\n         query_job['jobReference']['jobId'],\n         interval,\n         num_retries)\n\n\nfor page in paging(service,\n                   service.jobs().getQueryResults,\n                   num_retries=num_retries,\n                   **query_job['jobReference']):\n\n    yield json.dumps(page['rows'])` \n</code></pre>\n\n<p>My query returns a single item: MAX value of one field. I want to change the script to return a string object so the results can be concatenated to another string object.  With the code above I get a value like this: [&lt;\"f\": [&lt;\"v\": \"ga_sessions_20150505\">]>].  </p>\n\n<p>I need it to return just the query result: \"ga_sessions_20150505\" without the JSON ornamentation.  I've been unsuccessful in adjusting the script to produce this outcome.  My goal is to create a function that can be called from another python script and assign the result to a variable for further use.  Can someone provide some assistance or point me to a resource that will help?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 798, "user_id": 3692177, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EJrNt.jpg?s=128&g=1", "display_name": "SebasSBM", "link": "https://stackoverflow.com/users/3692177/sebassbm"}, "edited": false, "score": 0, "creation_date": 1430943867, "post_id": 30086729, "comment_id": 48286896, "body": "It can be done, but the regexp itself would depend on how you want to gather the data. Are you skilled with regexps? In any case, are you asking if regexps are a good way to do it, or HOW to do it?"}, {"owner": {"reputation": 5121, "user_id": 1267398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11a3478094313188e9a5ab263858e8f4?s=128&d=identicon&r=PG", "display_name": "sleepycal", "link": "https://stackoverflow.com/users/1267398/sleepycal"}, "reply_to_user": {"reputation": 798, "user_id": 3692177, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EJrNt.jpg?s=128&g=1", "display_name": "SebasSBM", "link": "https://stackoverflow.com/users/3692177/sebassbm"}, "edited": false, "score": 0, "creation_date": 1430944001, "post_id": 30086729, "comment_id": 48286988, "body": "Although I can construct and understand some regex, I wouldn&#39;t say it is one of my strong points, for example I don&#39;t understand how negation matches work. I&#39;m asking whether or not regex would be a good solution, and if so, what the regex would be."}, {"owner": {"reputation": 798, "user_id": 3692177, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EJrNt.jpg?s=128&g=1", "display_name": "SebasSBM", "link": "https://stackoverflow.com/users/3692177/sebassbm"}, "edited": false, "score": 0, "creation_date": 1430944187, "post_id": 30086729, "comment_id": 48287095, "body": "Perhaps you want to fragment the regexp match and store each fragment in its own variable. This can be done in just a few lines. Do you want an example?"}, {"owner": {"reputation": 5121, "user_id": 1267398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11a3478094313188e9a5ab263858e8f4?s=128&d=identicon&r=PG", "display_name": "sleepycal", "link": "https://stackoverflow.com/users/1267398/sleepycal"}, "reply_to_user": {"reputation": 798, "user_id": 3692177, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EJrNt.jpg?s=128&g=1", "display_name": "SebasSBM", "link": "https://stackoverflow.com/users/3692177/sebassbm"}, "edited": false, "score": 0, "creation_date": 1430944313, "post_id": 30086729, "comment_id": 48287173, "body": "Sure, any pointers in the right direction would be appreciated."}], "answers": [{"comments": [{"owner": {"reputation": 5121, "user_id": 1267398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11a3478094313188e9a5ab263858e8f4?s=128&d=identicon&r=PG", "display_name": "sleepycal", "link": "https://stackoverflow.com/users/1267398/sleepycal"}, "edited": false, "score": 1, "creation_date": 1430945398, "post_id": 30087164, "comment_id": 48287783, "body": "Thank you for having a shot at this, voted up for the effort. Though it seems that the answer from @kasra does exactly what I was looking for"}, {"owner": {"reputation": 798, "user_id": 3692177, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EJrNt.jpg?s=128&g=1", "display_name": "SebasSBM", "link": "https://stackoverflow.com/users/3692177/sebassbm"}, "reply_to_user": {"reputation": 5121, "user_id": 1267398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11a3478094313188e9a5ab263858e8f4?s=128&d=identicon&r=PG", "display_name": "sleepycal", "link": "https://stackoverflow.com/users/1267398/sleepycal"}, "edited": false, "score": 0, "creation_date": 1430945761, "post_id": 30087164, "comment_id": 48287979, "body": "I parsed the regexp rushing, so it was wrong before. I&#39;ve corrected it"}], "tags": [], "owner": {"reputation": 798, "user_id": 3692177, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/EJrNt.jpg?s=128&g=1", "display_name": "SebasSBM", "link": "https://stackoverflow.com/users/3692177/sebassbm"}, "is_accepted": false, "score": 1, "last_activity_date": 1452741730, "last_edit_date": 1495540324, "creation_date": 1430945018, "answer_id": 30087164, "question_id": 30086729, "link": "https://stackoverflow.com/questions/30086729/regex-to-extract-multiline-hash-comments/30087164#30087164", "title": "Regex to extract multiline hash comments", "body": "<p>Let's say, for example, you want to take some specific data from a multiline string on each line with a single regexp (for example, hashtags):</p>\n\n<pre><code>#!/usr/bin/env python\n# coding: utf-8\n\nimport re\n\n# the regexp isn't 100% accurate, but you'll get the point\n# groups followed by '?' match if repeated 0 or 1 times.\nregexp = re.compile('^.*(#[a-z]*).*(#[a-z]*)?$')\n\nmultiline_string = '''\n                     The awesomeness of #MotoGP is legendary. #Bikes rock!\n                     Awesome racing car #HeroComesHome epic\n'''\n\niterable_list = multiline_string.splitlines()\n\nfor line in iterable_list:\n    '''\n    Keep in mind:   if group index is out of range,\n                    execution will crash with an error.\n                    You can prevent it with try/except blocks\n    '''\n    fragments = regexp.match(line)\n    frag_in_str = fragments.group(1)\n\n    # Example to prevent a potential IndexError:\n    try:\n        some_other_subpattern = fragments.group(2)\n    except IndexError:\n        some_other_subpattern = ''\n\n    entire_match = fragments.group(0)\n</code></pre>\n\n<p>Every group inside parenthesis may be extracted this way.</p>\n\n<p>A good example to negate patterns has been posted here:\n<a href=\"https://stackoverflow.com/questions/1240275/how-to-negate-specific-word-in-regex\">How to negate specific word in regex?</a></p>\n"}, {"comments": [{"owner": {"reputation": 5121, "user_id": 1267398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11a3478094313188e9a5ab263858e8f4?s=128&d=identicon&r=PG", "display_name": "sleepycal", "link": "https://stackoverflow.com/users/1267398/sleepycal"}, "edited": false, "score": 1, "creation_date": 1430945450, "post_id": 30087168, "comment_id": 48287814, "body": "I have absolutely no idea how this works, but it works perfectly. Nice work, thank you for spending time on this, very appreciated."}, {"owner": {"reputation": 829, "user_id": 1447466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f83ca814f0538a4e959af987c6f78a9?s=128&d=identicon&r=PG", "display_name": "SanD", "link": "https://stackoverflow.com/users/1447466/sand"}, "edited": false, "score": 0, "creation_date": 1430945457, "post_id": 30087168, "comment_id": 48287819, "body": "But that would not work if there are three lines of comments in a row, would it?"}, {"owner": {"reputation": 5121, "user_id": 1267398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11a3478094313188e9a5ab263858e8f4?s=128&d=identicon&r=PG", "display_name": "sleepycal", "link": "https://stackoverflow.com/users/1267398/sleepycal"}, "edited": false, "score": 0, "creation_date": 1430945786, "post_id": 30087168, "comment_id": 48287989, "body": "Ah yeah, it breaks if there is more than 2 lines. Is that a fairly easy thing to fix?"}, {"owner": {"reputation": 829, "user_id": 1447466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f83ca814f0538a4e959af987c6f78a9?s=128&d=identicon&r=PG", "display_name": "SanD", "link": "https://stackoverflow.com/users/1447466/sand"}, "reply_to_user": {"reputation": 5121, "user_id": 1267398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11a3478094313188e9a5ab263858e8f4?s=128&d=identicon&r=PG", "display_name": "sleepycal", "link": "https://stackoverflow.com/users/1267398/sleepycal"}, "edited": false, "score": 0, "creation_date": 1430946212, "post_id": 30087168, "comment_id": 48288208, "body": "@sleepycal I&#39;d say it&#39;s impossible using this method"}], "tags": [], "owner": {"reputation": 94141, "user_id": 2867928, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/a8DM1.jpg?s=128&g=1", "display_name": "kasravnd", "link": "https://stackoverflow.com/users/2867928/kasravnd"}, "is_accepted": true, "score": 2, "last_activity_date": 1430947782, "last_edit_date": 1430947782, "creation_date": 1430945032, "answer_id": 30087168, "question_id": 30086729, "link": "https://stackoverflow.com/questions/30086729/regex-to-extract-multiline-hash-comments/30087168#30087168", "title": "Regex to extract multiline hash comments", "body": "<p>You can use <code>re.findall</code> with following regex :</p>\n\n<pre><code>&gt;&gt;&gt; m= re.findall(r'\\s*#(.*)\\s*#(.*)|#(.*)[^#]*',s,re.MULTILINE)\n[(' Some information about field 1', ' on multiple lines', ''), ('', '', ' Some more info on a single line')]\n</code></pre>\n\n<p>And for print you can do :</p>\n\n<pre><code>&gt;&gt;&gt; for i,j in enumerate(m):\n...   print ('group {}:{}'.format(i,\" &amp; \".join([i for i in j if i])))\n... \ngroup 0: Some information about field 1 &amp;  on multiple lines\ngroup 1: Some more info on a single line\n</code></pre>\n\n<p>But as a more general way for comment lines more that 2 you can use <code>itertools.groupby</code> :</p>\n\n<pre><code>s=\"\"\"{\n  \"data\": {\n    # Some information about field 1\n    # on multiple lines\n    # threeeeeeeeecomment\n    \"field1\": \"XXXXXXXXXX\"\n\n    # Some more info on a single line\n    \"field2\": \"XXXXXXXXXXX\",\n\n    \"field3\": \"#this would be ignored\"\n  }\n}\"\"\"\nfrom itertools import groupby\n\ncomments =[[i for i in j if i.strip().startswith('#')] for _,j in groupby(s.split('\\n'),lambda x: x.strip().startswith('#'))]\n\nfor i,j in enumerate([m for m in comments if m],1):\n        l=[t.strip(' #') for t in j]\n        print 'group {} :{}'.format(i,' &amp; '.join(l))\n</code></pre>\n\n<p>result :</p>\n\n<pre><code>group 1 :Some information about field 1 &amp; on multiple lines &amp; threeeeeeeeecomment\ngroup 2 :Some more info on a single line\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5121, "user_id": 1267398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11a3478094313188e9a5ab263858e8f4?s=128&d=identicon&r=PG", "display_name": "sleepycal", "link": "https://stackoverflow.com/users/1267398/sleepycal"}, "edited": false, "score": 0, "creation_date": 1431033963, "post_id": 30087528, "comment_id": 48334761, "body": "Thank you for spending time on this, I&#39;ve already accepted another answer above but this is a good solution too. Upvoting."}], "tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 1, "last_activity_date": 1430947413, "last_edit_date": 1430947413, "creation_date": 1430946452, "answer_id": 30087528, "question_id": 30086729, "link": "https://stackoverflow.com/questions/30086729/regex-to-extract-multiline-hash-comments/30087528#30087528", "title": "Regex to extract multiline hash comments", "body": "<p>You can use a <a href=\"https://docs.python.org/2/library/collections.html#collections.deque\" rel=\"nofollow\">deque</a> to keep two lines and add some logic to partition the comments in blocks:</p>\n\n<pre><code>src='''\\\n{\n  \"data\": {\n    # Some information about field 1\n    # on multiple lines\n    \"field1\": \"XXXXXXXXXX\",\n\n    # Some more info on a single line\n    \"field2\": \"XXXXXXXXXXX\",\n\n\n    # multiple line comments\n    # supported\n    # as well \n    \"field3\": \"#this would be ignored\"\n\n  }\n}\n'''\n\nfrom collections import deque\nd=deque([], 2)\nblocks=[]\nfor line in src.splitlines():\n    d.append(line.strip())\n    if d[-1].startswith('#'):        \n        comment=line.partition('#')[2]\n        if d[0].startswith('#'):\n            block.append(comment)\n        else:\n            block=[comment]\n    elif d[0].startswith('#'):\n        blocks.append(block)\n\nfor i, b in enumerate(blocks):\n    print 'block {}: \\n{}'.format(i, '\\n'.join(b))  \n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>block 0: \n Some information about field 1\n on multiple lines\nblock 1: \n Some more info on a single line\nblock 2: \n multiple line comments\n supported\n as well \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5121, "user_id": 1267398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11a3478094313188e9a5ab263858e8f4?s=128&d=identicon&r=PG", "display_name": "sleepycal", "link": "https://stackoverflow.com/users/1267398/sleepycal"}, "edited": false, "score": 1, "creation_date": 1431034012, "post_id": 30088271, "comment_id": 48334783, "body": "Nice solution, I&#39;ve already accepted a different answer but I appreciate you spending time on this, upvoting."}], "tags": [], "owner": {"reputation": 829, "user_id": 1447466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f83ca814f0538a4e959af987c6f78a9?s=128&d=identicon&r=PG", "display_name": "SanD", "link": "https://stackoverflow.com/users/1447466/sand"}, "is_accepted": false, "score": 1, "last_activity_date": 1430949097, "creation_date": 1430949097, "answer_id": 30088271, "question_id": 30086729, "link": "https://stackoverflow.com/questions/30086729/regex-to-extract-multiline-hash-comments/30088271#30088271", "title": "Regex to extract multiline hash comments", "body": "<p>It's impossible to do purely with regexes, but you can get away with a one-liner)</p>\n\n<pre><code>import re\n\nstr = \"\"\"{\n  \"data\": {\n    # Some information about field 1\n    # on multiple lines\n    \"field1\": \"XXXXXXXXXX\",\n\n    # Some more info on a single line\n    \"field2\": \"XXXXXXXXXXX\"\n    # Some information about field 1\n    # on multiple lines\n    # Some information about field 1\n    # on multiple lines\n    \"field3\": \"#this would be ignored\"\n  }\n}\"\"\"\n\nrex = re.compile(\"(^(?!\\s*#.*?[\\r\\n]+)(.*?)([\\r\\n]+|$)|[\\r\\n]*^\\s*#\\s*)+\", re.MULTILINE)    \nprint rex.sub(\"\\n\", str).strip().split('\\n\\n')\n</code></pre>\n\n<p>Outputs:</p>\n\n<pre><code>['Some information about field 1\\non multiple lines', 'Some more info on a single line', 'Some information about field 1\\non multiple lines\\nSome information about field 1\\non multiple lines']\n</code></pre>\n"}], "owner": {"reputation": 5121, "user_id": 1267398, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/11a3478094313188e9a5ab263858e8f4?s=128&d=identicon&r=PG", "display_name": "sleepycal", "link": "https://stackoverflow.com/users/1267398/sleepycal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 0, "accepted_answer_id": 30087168, "answer_count": 4, "score": 3, "last_activity_date": 1452741730, "creation_date": 1430943519, "last_edit_date": 1431034201, "question_id": 30086729, "link": "https://stackoverflow.com/questions/30086729/regex-to-extract-multiline-hash-comments", "title": "Regex to extract multiline hash comments", "body": "<p>Currently suffering from writers block trying to come up with an elegant solution to this problem.</p>\n\n<p>Take the following example:</p>\n\n<pre><code>{\n  \"data\": {\n    # Some information about field 1\n    # on multiple lines\n    \"field1\": \"XXXXXXXXXX\",\n\n    # Some more info on a single line\n    \"field2\": \"XXXXXXXXXXX\",\n\n    \"field3\": \"#this would be ignored\"\n  }\n}\n</code></pre>\n\n<p>From the above, I'd like to extract the code comments together as a group, rather than individually. This grouping would happen if a line was commented right after another line. Comments will always start with whitespace followed by a #.</p>\n\n<p>Example result:</p>\n\n<pre><code>Capture group 1: Some information about field 1\\n on multiple lines\nCapture group 2: Some more info on a single line\n</code></pre>\n\n<p>I could step over the lines and evaluate in code, but it would be nice to use a regex if possible. If you feel like a regex is not the correct solution for this problem, please explain your reasons why.</p>\n\n<p>SUMMARY:</p>\n\n<p>Thank you to everyone for submitting various solutions to this problem, this is a prime example of just how helpful the SO community can be. I will be spending an hour of my own time answering other tickets to make up for the collective time spent on this.</p>\n\n<p>Hopefully this thread will help others in future too.</p>\n"}, {"tags": ["python", "chemistry", "pymol"], "answers": [{"tags": [], "owner": {"reputation": 6776, "user_id": 2571620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vz8ql.jpg?s=128&g=1", "display_name": "Mehdi Nellen", "link": "https://stackoverflow.com/users/2571620/mehdi-nellen"}, "is_accepted": true, "score": 2, "last_activity_date": 1432908936, "creation_date": 1432908936, "answer_id": 30531894, "question_id": 30086701, "link": "https://stackoverflow.com/questions/30086701/in-pymol-how-can-i-make-the-resi-selection-work-with-variables/30531894#30531894", "title": "In PyMOL, how can I make the &quot;resi&quot; selection work with variables?", "body": "<p>The following is equivalent to <code>select pep, (resi 10)</code>:</p>\n\n<pre><code>a=10\ncmd.select(\"pep\", \"resi \" + str(a))\n</code></pre>\n\n<p>or </p>\n\n<pre><code>cmd.select(\"pep\", \"resi %i\"%(a))\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4732150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffc129f24760ffe3e7b586a01fc26d31?s=128&d=identicon&r=PG&f=1", "display_name": "Isaac", "link": "https://stackoverflow.com/users/4732150/isaac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 848, "favorite_count": 0, "accepted_answer_id": 30531894, "answer_count": 1, "score": 0, "last_activity_date": 1432912432, "creation_date": 1430943421, "last_edit_date": 1432912432, "question_id": 30086701, "link": "https://stackoverflow.com/questions/30086701/in-pymol-how-can-i-make-the-resi-selection-work-with-variables", "title": "In PyMOL, how can I make the &quot;resi&quot; selection work with variables?", "body": "<p>If I want to select a residue on a protein (let's say the tenth residue), when writing a PyMOL script,  I can use the following code to assign it to a variable \"pep\"</p>\n\n<pre><code>select pep, (resi 10) \n</code></pre>\n\n<p>However, if I try to use a predefined variable in place of the numbers in the selection, no atoms are assigned to the selection.</p>\n\n<pre><code>    a=10\n    select pep, (resi a)\n</code></pre>\n\n<p>No error is returned and no atoms are assigned to the selection. I've tried typecasting the variable as a string and as an integer, but neither one has worked. If I use the variable <code>a</code> elsewhere, such as a print statement or addition, it works perfectly fine. <strong>Does anyone know how to make the <code>resi</code> selection work with variables?</strong> I'm trying to use this to color amino acids differently based on some data we collected and I don't want to hard code the residues each time I analyze a new set of data. </p>\n"}, {"tags": ["python", "linux", "amazon-web-services", "amazon-elastic-beanstalk"], "comments": [{"owner": {"reputation": 8169, "user_id": 2602732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aFcDy.png?s=128&g=1", "display_name": "cmorrissey", "link": "https://stackoverflow.com/users/2602732/cmorrissey"}, "edited": false, "score": 0, "creation_date": 1430943439, "post_id": 30086691, "comment_id": 48286647, "body": "how does <code>php</code> come into play here ?"}, {"owner": {"reputation": 105, "user_id": 3029730, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/1c6a033e5c69b2a12859ae62c1c4459e?s=128&d=identicon&r=PG", "display_name": "jjf", "link": "https://stackoverflow.com/users/3029730/jjf"}, "reply_to_user": {"reputation": 8169, "user_id": 2602732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aFcDy.png?s=128&g=1", "display_name": "cmorrissey", "link": "https://stackoverflow.com/users/2602732/cmorrissey"}, "edited": false, "score": 0, "creation_date": 1430943829, "post_id": 30086691, "comment_id": 48286878, "body": "BTW I ran &quot;aws configure&quot; before &quot;eb init&quot; because if I run &quot;eb init&quot; before &quot;aws configure&quot; I get the same problem as: <a href=\"http://stackoverflow.com/questions/27259915/elastic-beanstalk-could-not-find-any-platforms\" title=\"elastic beanstalk could not find any platforms\">stackoverflow.com/questions/27259915/&hellip;</a>"}, {"owner": {"reputation": 105, "user_id": 3029730, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/1c6a033e5c69b2a12859ae62c1c4459e?s=128&d=identicon&r=PG", "display_name": "jjf", "link": "https://stackoverflow.com/users/3029730/jjf"}, "reply_to_user": {"reputation": 8169, "user_id": 2602732, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aFcDy.png?s=128&g=1", "display_name": "cmorrissey", "link": "https://stackoverflow.com/users/2602732/cmorrissey"}, "edited": false, "score": 0, "creation_date": 1430943923, "post_id": 30086691, "comment_id": 48286936, "body": "cmorrissey,  Im trying to make an app in php.  Should I remove the php tag?"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 3029730, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/1c6a033e5c69b2a12859ae62c1c4459e?s=128&d=identicon&r=PG", "display_name": "jjf", "link": "https://stackoverflow.com/users/3029730/jjf"}, "edited": false, "score": 0, "creation_date": 1430945862, "post_id": 30086941, "comment_id": 48288029, "body": "How I can &quot;add the permissions to the instance profile using IAM.&quot;?"}, {"owner": {"reputation": 12794, "user_id": 2434234, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27abf47fb5737a73fe93464a8e77c758?s=128&d=identicon&r=PG", "display_name": "Nick Humrich", "link": "https://stackoverflow.com/users/2434234/nick-humrich"}, "reply_to_user": {"reputation": 105, "user_id": 3029730, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/1c6a033e5c69b2a12859ae62c1c4459e?s=128&d=identicon&r=PG", "display_name": "jjf", "link": "https://stackoverflow.com/users/3029730/jjf"}, "edited": false, "score": 0, "creation_date": 1430948994, "post_id": 30086941, "comment_id": 48289551, "body": "@jjf Are you the account owner or is your account managed by someone else? Your aws account that is."}, {"owner": {"reputation": 105, "user_id": 3029730, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/1c6a033e5c69b2a12859ae62c1c4459e?s=128&d=identicon&r=PG", "display_name": "jjf", "link": "https://stackoverflow.com/users/3029730/jjf"}, "edited": false, "score": 0, "creation_date": 1430949302, "post_id": 30086941, "comment_id": 48289699, "body": "I&#39;m the account owner."}, {"owner": {"reputation": 105, "user_id": 3029730, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/1c6a033e5c69b2a12859ae62c1c4459e?s=128&d=identicon&r=PG", "display_name": "jjf", "link": "https://stackoverflow.com/users/3029730/jjf"}, "edited": false, "score": 0, "creation_date": 1430949729, "post_id": 30086941, "comment_id": 48289903, "body": "When I click on the ec2 instance in the EC2 dashboard, it says that the instance has &quot;aws-elasticbeanstalk-ec2-role&quot; as its IAM Role.  Then I go to IAM Dashboard and click: Roles -&gt; aws-elasticbeanstalk-ec2-role -&gt; Attach Policy-&gt; AWSElasticBeanstalkFullAccess.   After these steps, does the ec2 instance has all the permisson needed to use Elastic Bean Stalk?"}, {"owner": {"reputation": 12794, "user_id": 2434234, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27abf47fb5737a73fe93464a8e77c758?s=128&d=identicon&r=PG", "display_name": "Nick Humrich", "link": "https://stackoverflow.com/users/2434234/nick-humrich"}, "reply_to_user": {"reputation": 105, "user_id": 3029730, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/1c6a033e5c69b2a12859ae62c1c4459e?s=128&d=identicon&r=PG", "display_name": "jjf", "link": "https://stackoverflow.com/users/3029730/jjf"}, "edited": false, "score": 0, "creation_date": 1430949748, "post_id": 30086941, "comment_id": 48289917, "body": "<a href=\"http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/AWSEC2/latest/UserGuide/&hellip;</a> but use the <code>AWSElasticBeanstalkFullAccess</code> policy."}, {"owner": {"reputation": 12794, "user_id": 2434234, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27abf47fb5737a73fe93464a8e77c758?s=128&d=identicon&r=PG", "display_name": "Nick Humrich", "link": "https://stackoverflow.com/users/2434234/nick-humrich"}, "reply_to_user": {"reputation": 105, "user_id": 3029730, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/1c6a033e5c69b2a12859ae62c1c4459e?s=128&d=identicon&r=PG", "display_name": "jjf", "link": "https://stackoverflow.com/users/3029730/jjf"}, "edited": false, "score": 0, "creation_date": 1430949773, "post_id": 30086941, "comment_id": 48289933, "body": "Yes, adding the policy to the role/profile should do the trick."}, {"owner": {"reputation": 12794, "user_id": 2434234, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27abf47fb5737a73fe93464a8e77c758?s=128&d=identicon&r=PG", "display_name": "Nick Humrich", "link": "https://stackoverflow.com/users/2434234/nick-humrich"}, "reply_to_user": {"reputation": 105, "user_id": 3029730, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/1c6a033e5c69b2a12859ae62c1c4459e?s=128&d=identicon&r=PG", "display_name": "jjf", "link": "https://stackoverflow.com/users/3029730/jjf"}, "edited": false, "score": 0, "creation_date": 1430949804, "post_id": 30086941, "comment_id": 48289945, "body": "@jjf but not im curious, why are you running the beanstalk CLI on a beanstalk instance?"}, {"owner": {"reputation": 105, "user_id": 3029730, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/1c6a033e5c69b2a12859ae62c1c4459e?s=128&d=identicon&r=PG", "display_name": "jjf", "link": "https://stackoverflow.com/users/3029730/jjf"}, "edited": false, "score": 0, "creation_date": 1430954562, "post_id": 30086941, "comment_id": 48291644, "body": "Ok.  I added the AWSElasticBeanstalkFullAccess policy to aws-elasticbeanstalk-ec2-role using the IAM Dashboard.  Then I created a new EB EC2 instance using the EB Dash Board(selected aws-elasticbeanstalk-ec2-role in Permissions).After the instance was created, I selected my region(configuration -&gt; Scaling -&gt; Custom Availability Zones).   Now it works!!  Thanks Man!"}, {"owner": {"reputation": 105, "user_id": 3029730, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/1c6a033e5c69b2a12859ae62c1c4459e?s=128&d=identicon&r=PG", "display_name": "jjf", "link": "https://stackoverflow.com/users/3029730/jjf"}, "edited": false, "score": 0, "creation_date": 1430954752, "post_id": 30086941, "comment_id": 48291705, "body": "Nick Humrich &quot;why are you running the beanstalk CLI on a beanstalk instance?&quot;.  Is there an easier way of deploying a web service with multiple php&#39;s and html&#39;s with Elastic BeanStalk?"}, {"owner": {"reputation": 12794, "user_id": 2434234, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27abf47fb5737a73fe93464a8e77c758?s=128&d=identicon&r=PG", "display_name": "Nick Humrich", "link": "https://stackoverflow.com/users/2434234/nick-humrich"}, "reply_to_user": {"reputation": 105, "user_id": 3029730, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/1c6a033e5c69b2a12859ae62c1c4459e?s=128&d=identicon&r=PG", "display_name": "jjf", "link": "https://stackoverflow.com/users/3029730/jjf"}, "edited": false, "score": 0, "creation_date": 1430954878, "post_id": 30086941, "comment_id": 48291735, "body": "@jjf The CLI is the best way to deploy. But my question is why are you deploying from a beanstalk instance to another beanstalk instance? Why dont you just use the CLI and deploy directly from your own machine?"}, {"owner": {"reputation": 105, "user_id": 3029730, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/1c6a033e5c69b2a12859ae62c1c4459e?s=128&d=identicon&r=PG", "display_name": "jjf", "link": "https://stackoverflow.com/users/3029730/jjf"}, "reply_to_user": {"reputation": 12794, "user_id": 2434234, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27abf47fb5737a73fe93464a8e77c758?s=128&d=identicon&r=PG", "display_name": "Nick Humrich", "link": "https://stackoverflow.com/users/2434234/nick-humrich"}, "edited": false, "score": 0, "creation_date": 1430955665, "post_id": 30086941, "comment_id": 48291973, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/77134/discussion-between-jjf-and-nick-humrich\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 12794, "user_id": 2434234, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/27abf47fb5737a73fe93464a8e77c758?s=128&d=identicon&r=PG", "display_name": "Nick Humrich", "link": "https://stackoverflow.com/users/2434234/nick-humrich"}, "is_accepted": true, "score": 4, "last_activity_date": 1430944244, "creation_date": 1430944244, "answer_id": 30086941, "question_id": 30086691, "link": "https://stackoverflow.com/questions/30086691/aws-elastic-beanstalk-eb-init-error/30086941#30086941", "title": "AWS Elastic BeanStalk &quot;eb init&quot; Error", "body": "<p>My guess is that the region in your aws profile is invalid.</p>\n\n<p>Run <code>eb init -i</code> and select a region.</p>\n\n<p>You said running <code>aws configure</code> gave you a \"no solution stacks found\" error, which would mean you do not have permissions. It looks like you are using the cli on an ec2 instance directly. In order to get the correct permissions on an ec2 instance you need to add the permissions to the instance profile using IAM.</p>\n"}], "owner": {"reputation": 105, "user_id": 3029730, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/1c6a033e5c69b2a12859ae62c1c4459e?s=128&d=identicon&r=PG", "display_name": "jjf", "link": "https://stackoverflow.com/users/3029730/jjf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4746, "favorite_count": 1, "accepted_answer_id": 30086941, "answer_count": 1, "score": 3, "last_activity_date": 1430944244, "creation_date": 1430943374, "last_edit_date": 1430944137, "question_id": 30086691, "link": "https://stackoverflow.com/questions/30086691/aws-elastic-beanstalk-eb-init-error", "title": "AWS Elastic BeanStalk &quot;eb init&quot; Error", "body": "<p>I created an Elastic Beanstalk Environment using the console. Then I logged in to the EB EC2 instance and\ninstalled awsebcli:</p>\n\n<pre><code>sudo pip install awsebcli\n</code></pre>\n\n<p>I configured aws:</p>\n\n<pre><code>aws configure \n</code></pre>\n\n<p>and ran \"eb init\":</p>\n\n<pre><code>eb init\n</code></pre>\n\n<p>Then I get the following error:</p>\n\n<pre><code>2015-05-06 20:09:41,678 (ERROR) ebcli.lib.aws : Error while contacting Elastic Beanstalk Service\nERROR: ('Connection aborted.', gaierror(-2, 'Name or service not known'))\n</code></pre>\n\n<p>This is the output of eb init --debug:</p>\n\n<pre><code>2015-05-06 20:11:37,681 (DEBUG) eb : logging initialized for 'eb' using LoggingLogHandler\n2015-05-06 20:11:37,681 (DEBUG) cement.ext.ext_plugin : plugin config dir /etc/eb/plugins.d does not exist.\n2015-05-06 20:11:37,681 (DEBUG) cement.ext.ext_plugin : plugin config dir /home/ec2-user/.eb/plugins.d does not exist.\n2015-05-06 20:11:37,684 (DEBUG) eb : collecting arguments/commands for &lt;ebcli.core.base.EbBaseController object at 0x7f5877138ed0&gt;\n2015-05-06 20:11:37,690 (DEBUG) eb : collecting arguments/commands for &lt;ebcli.controllers.initialize.InitController object at 0x7f587714fa10&gt;\n-- EBCLI Version: 3.3.2\n-- Python Version: 2.7.9 (default, Apr  1 2015, 18:18:03) \n[GCC 4.8.2 20140120 (Red Hat 4.8.2-16)]\n2015-05-06 20:11:37,696 (DEBUG) ebcli.core.fileoperations : Project root found at: /home/ec2-user/awsebtutorial\n2015-05-06 20:11:37,697 (DEBUG) ebcli.core.fileoperations : Project root found at: /home/ec2-user/awsebtutorial\n2015-05-06 20:11:37,697 (DEBUG) ebcli.core.fileoperations : Project root found at: /home/ec2-user/awsebtutorial\n2015-05-06 20:11:37,697 (DEBUG) ebcli.core.fileoperations : Project root found at: /home/ec2-user/awsebtutorial\n2015-05-06 20:11:37,697 (DEBUG) ebcli.core.fileoperations : Project root found at: /home/ec2-user/awsebtutorial\n2015-05-06 20:11:37,698 (DEBUG) ebcli.core.fileoperations : Project root found at: /home/ec2-user/awsebtutorial\n2015-05-06 20:11:37,698 (DEBUG) ebcli.core.fileoperations : Project root found at: /home/ec2-user/awsebtutorial\n2015-05-06 20:11:37,698 (DEBUG) ebcli.core.fileoperations : Project root found at: /home/ec2-user/awsebtutorial\n2015-05-06 20:11:37,699 (DEBUG) ebcli.core.fileoperations : Project root found at: /home/ec2-user/awsebtutorial\n2015-05-06 20:11:37,699 (DEBUG) ebcli.core.fileoperations : Project root found at: /home/ec2-user/awsebtutorial\n2015-05-06 20:11:37,699 (DEBUG) ebcli.lib.elasticbeanstalk : Inside get_available_solution_stacks api wrapper\n2015-05-06 20:11:37,699 (DEBUG) ebcli.lib.aws : Creating new Botocore Session\n2015-05-06 20:11:37,699 (DEBUG) ebcli.lib.aws : Botocore version: 0.93eb\n2015-05-06 20:11:37,701 (DEBUG) ebcli.lib.aws : Creating new Botocore Client for elasticbeanstalk\n2015-05-06 20:11:37,702 (DEBUG) ebcli.lib.elasticbeanstalk : Inside get_available_solution_stacks api wrapper\n2015-05-06 20:11:37,702 (DEBUG) ebcli.lib.aws : Creating new Botocore Session\n2015-05-06 20:11:37,702 (DEBUG) ebcli.lib.aws : Botocore version: 0.93eb\n2015-05-06 20:11:37,703 (DEBUG) ebcli.lib.aws : Creating new Botocore Client for elasticbeanstalk\n2015-05-06 20:11:37,742 (DEBUG) ebcli.lib.aws : Successfully created session for elasticbeanstalk\n2015-05-06 20:11:37,742 (DEBUG) ebcli.lib.aws : Making api call: (elasticbeanstalk, list_available_solution_stacks) to region: default with args:{}\n2015-05-06 20:11:50,679 (ERROR) ebcli.lib.aws : Error while contacting Elastic Beanstalk Service\n2015-05-06 20:11:50,679 (DEBUG) ebcli.lib.aws : error:('Connection aborted.', gaierror(-2, 'Name or service not known'))\nTraceback (most recent call last):\n  File \"/usr/local/bin/eb\", line 9, in &lt;module&gt;\n    load_entry_point('awsebcli==3.3.2', 'console_scripts', 'eb')()\n  File \"/usr/local/lib/python2.7/site-packages/ebcli/core/ebcore.py\", line 144, in main\n    app.run()\n  File \"/usr/local/lib/python2.7/site-packages/cement/core/foundation.py\", line 694, in run\n    self.controller._dispatch()\n  File \"/usr/local/lib/python2.7/site-packages/cement/core/controller.py\", line 455, in _dispatch\n    return func()\n  File \"/usr/local/lib/python2.7/site-packages/cement/core/controller.py\", line 461, in _dispatch\n    return func()\n  File \"/usr/local/lib/python2.7/site-packages/ebcli/core/abstractcontroller.py\", line 57, in default\n    self.do_command()\n  File \"/usr/local/lib/python2.7/site-packages/ebcli/controllers/initialize.py\", line 59, in do_command\n    self.set_up_credentials()\n  File \"/usr/local/lib/python2.7/site-packages/ebcli/controllers/initialize.py\", line 133, in set_up_credentials\n    profile = self.check_credentials(profile)\n  File \"/usr/local/lib/python2.7/site-packages/ebcli/controllers/initialize.py\", line 122, in check_credentials\n    return self.check_credentials(profile)\n  File \"/usr/local/lib/python2.7/site-packages/ebcli/controllers/initialize.py\", line 107, in check_credentials\n    initializeops.credentials_are_valid()\n  File \"/usr/local/lib/python2.7/site-packages/ebcli/operations/initializeops.py\", line 24, in credentials_are_valid\n    elasticbeanstalk.get_available_solution_stacks()\n  File \"/usr/local/lib/python2.7/site-packages/ebcli/lib/elasticbeanstalk.py\", line 234, in get_available_solution_stacks\n    result = _make_api_call('list_available_solution_stacks')\n  File \"/usr/local/lib/python2.7/site-packages/ebcli/lib/elasticbeanstalk.py\", line 38, in _make_api_call\n    **operation_options)\n  File \"/usr/local/lib/python2.7/site-packages/ebcli/lib/aws.py\", line 256, in make_api_call\n    raise ServiceError(error)\nebcli.objects.exceptions.ServiceError: ('Connection aborted.', gaierror(-2, 'Name or service not known'))\n</code></pre>\n\n<p>Does someone know how I can solve this error?</p>\n"}, {"tags": ["python", "matplotlib", "anaconda"], "comments": [{"owner": {"reputation": 23058, "user_id": 1599111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3147a010e5a5d4796739e9a3a47ad2?s=128&d=identicon&r=PG", "display_name": "Lukas Graf", "link": "https://stackoverflow.com/users/1599111/lukas-graf"}, "edited": false, "score": 1, "creation_date": 1430943348, "post_id": 30086663, "comment_id": 48286585, "body": "Are you sure it&#39;s <code>plt.show()</code> that hangs and not the import? Because there&#39;s an issue with the font cache on OS X which is addressed in the answer to <a href=\"http://stackoverflow.com/questions/17490444/import-matplotlib-pyplot-hangs\">this question</a>."}, {"owner": {"reputation": 3359, "user_id": 938325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e59953fe8dee7fcde01424896eb41eb?s=128&d=identicon&r=PG", "display_name": "James Atwood", "link": "https://stackoverflow.com/users/938325/james-atwood"}, "reply_to_user": {"reputation": 23058, "user_id": 1599111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3147a010e5a5d4796739e9a3a47ad2?s=128&d=identicon&r=PG", "display_name": "Lukas Graf", "link": "https://stackoverflow.com/users/1599111/lukas-graf"}, "edited": false, "score": 1, "creation_date": 1430943871, "post_id": 30086663, "comment_id": 48286899, "body": "The import works fine, and so far as I can tell, so does everything else.  The hang definitely happens with <code>plt.show()</code>"}, {"owner": {"reputation": 4602, "user_id": 625350, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/qzA9A.jpg?s=128&g=1", "display_name": "titusjan", "link": "https://stackoverflow.com/users/625350/titusjan"}, "edited": false, "score": 0, "creation_date": 1430950585, "post_id": 30086663, "comment_id": 48290289, "body": "It runs fine with me, it took a few seconds before the window popped up. Do you use interactive or non-interactive mode? And what is your back-end? Do you run these lines from a script in the command line, or do you type them in the python interpreter? In my experience with OS-X, windows created from the command line often do not rise to the front. Could it be that the plot window is created behind other windows or hidden in a corner?"}, {"owner": {"reputation": 3359, "user_id": 938325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e59953fe8dee7fcde01424896eb41eb?s=128&d=identicon&r=PG", "display_name": "James Atwood", "link": "https://stackoverflow.com/users/938325/james-atwood"}, "edited": false, "score": 1, "creation_date": 1430963141, "post_id": 30086663, "comment_id": 48293878, "body": "Nope - no window anywhere.  The backend is &#39;MacOSX&#39;.  Definitely hangs."}, {"owner": {"reputation": 23058, "user_id": 1599111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3147a010e5a5d4796739e9a3a47ad2?s=128&d=identicon&r=PG", "display_name": "Lukas Graf", "link": "https://stackoverflow.com/users/1599111/lukas-graf"}, "reply_to_user": {"reputation": 4602, "user_id": 625350, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/qzA9A.jpg?s=128&g=1", "display_name": "titusjan", "link": "https://stackoverflow.com/users/625350/titusjan"}, "edited": false, "score": 1, "creation_date": 1431029156, "post_id": 30086663, "comment_id": 48332153, "body": "Ah, @titusjan makes an excellent point. Now that he mentioned the backend, I remember that I once had a similar issue that was resolved once I changed the backed to <code>backend: TkAgg</code> in my <code>~&#47;.matplotlib&#47;matplotlibrc</code>. You may want to give that a shot as well if using <code>pythonw</code> isn&#39;t too convenient for you."}], "answers": [{"comments": [{"owner": {"reputation": 3359, "user_id": 938325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e59953fe8dee7fcde01424896eb41eb?s=128&d=identicon&r=PG", "display_name": "James Atwood", "link": "https://stackoverflow.com/users/938325/james-atwood"}, "edited": false, "score": 0, "creation_date": 1431028391, "post_id": 30109873, "comment_id": 48331732, "body": "I don&#39;t know why this worked, but it did.  Thank you!"}, {"owner": {"reputation": 75386, "user_id": 161801, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0383e4cae325f65a1bbd906be4be2276?s=128&d=identicon&r=PG", "display_name": "asmeurer", "link": "https://stackoverflow.com/users/161801/asmeurer"}, "reply_to_user": {"reputation": 3359, "user_id": 938325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e59953fe8dee7fcde01424896eb41eb?s=128&d=identicon&r=PG", "display_name": "James Atwood", "link": "https://stackoverflow.com/users/938325/james-atwood"}, "edited": false, "score": 3, "creation_date": 1431110196, "post_id": 30109873, "comment_id": 48371298, "body": "On OS X, you need to use <code>pythonw</code> whenever you use something that hooks into the OS X windowing system (such as matplotlib), as it needs to &quot;trick&quot; OS X into thinking it is a Framework (using the <code>python.app</code> package that you&#39;ll find in the <code>anaconda</code> directory)."}, {"owner": {"reputation": 75386, "user_id": 161801, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0383e4cae325f65a1bbd906be4be2276?s=128&d=identicon&r=PG", "display_name": "asmeurer", "link": "https://stackoverflow.com/users/161801/asmeurer"}, "reply_to_user": {"reputation": 3359, "user_id": 938325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e59953fe8dee7fcde01424896eb41eb?s=128&d=identicon&r=PG", "display_name": "James Atwood", "link": "https://stackoverflow.com/users/938325/james-atwood"}, "edited": false, "score": 1, "creation_date": 1431110231, "post_id": 30109873, "comment_id": 48371321, "body": "Another thing that should work is to use <code>ipython</code>, as it uses python.app automatically."}, {"owner": {"reputation": 1395, "user_id": 2452770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/51b5bf4c4cb903b771436b3629825f25?s=128&d=identicon&r=PG", "display_name": "A.Wan", "link": "https://stackoverflow.com/users/2452770/a-wan"}, "edited": false, "score": 0, "creation_date": 1446676666, "post_id": 30109873, "comment_id": 54848434, "body": "Using <code>ipython</code> worked for me, thanks @asmeurer. For scripts, I changed the hashbang line to <code>#!&#47;usr&#47;bin&#47;env ipython</code> and it works like a charm."}], "tags": [], "owner": {"reputation": 75386, "user_id": 161801, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0383e4cae325f65a1bbd906be4be2276?s=128&d=identicon&r=PG", "display_name": "asmeurer", "link": "https://stackoverflow.com/users/161801/asmeurer"}, "is_accepted": true, "score": 12, "last_activity_date": 1431026387, "creation_date": 1431026387, "answer_id": 30109873, "question_id": 30086663, "link": "https://stackoverflow.com/questions/30086663/plt-show-hangs-on-osx-with-anaconda-python/30109873#30109873", "title": "plt.show() hangs on OSX with Anaconda Python", "body": "<p>Try starting Python using <code>pythonw</code> instead of <code>python</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6332573, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/b86c8d1ea832b3cb7fb75e031ef820c2?s=128&d=identicon&r=PG", "display_name": "Ahmad", "link": "https://stackoverflow.com/users/6332573/ahmad"}, "is_accepted": false, "score": -1, "last_activity_date": 1463177432, "last_edit_date": 1463177432, "creation_date": 1463177006, "answer_id": 37219971, "question_id": 30086663, "link": "https://stackoverflow.com/questions/30086663/plt-show-hangs-on-osx-with-anaconda-python/37219971#37219971", "title": "plt.show() hangs on OSX with Anaconda Python", "body": "<p>Add this in the beginning of your iPython:</p>\n\n<pre><code>% pylab inline\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 709, "user_id": 996514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb6a0ef47210f1d2c02ed761a44a1c9a?s=128&d=identicon&r=PG", "display_name": "wordsmith", "link": "https://stackoverflow.com/users/996514/wordsmith"}, "is_accepted": false, "score": 0, "last_activity_date": 1477052119, "creation_date": 1477052119, "answer_id": 40176442, "question_id": 30086663, "link": "https://stackoverflow.com/questions/30086663/plt-show-hangs-on-osx-with-anaconda-python/40176442#40176442", "title": "plt.show() hangs on OSX with Anaconda Python", "body": "<p>This is most likely an issue with your backend setting. If you want your plots to show up inline (inside of your notebook) import with this added line:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n%matplotlib inline\n</code></pre>\n\n<p>To have your plots show up interactively inline (inside your notebook) import with this line instead:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n%matplotlib notebook\n</code></pre>\n\n<p>To have your plots show up outside of your notebook (in a new window), import with this line instead:</p>\n\n<pre><code>import matplotlib.pyplot as plt\n%matplotlib qt\n</code></pre>\n\n<p><strong>NOTE:</strong> You need to restart the kernel to switch between inline notebook and outside qt to avoid the error: <em>Warning: Cannot change to a different GUI toolkit</em></p>\n\n<p>Finally, if issues persist, the following might help uncover what is going on:</p>\n\n<pre><code>import matplotlib\nmatplotlib.get_backend()\n</code></pre>\n\n<p>If using any of the options above, it should output one of the following:</p>\n\n<ul>\n<li>'module://ipykernel.pylab.backend_inline' </li>\n<li>'nbAgg'</li>\n<li>'Qt4Agg'</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 5575, "user_id": 1383356, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/ff4815322d5181071783e771ac21d978?s=128&d=identicon&r=PG", "display_name": "Ari", "link": "https://stackoverflow.com/users/1383356/ari"}, "is_accepted": false, "score": 0, "last_activity_date": 1570660550, "creation_date": 1570660550, "answer_id": 58313155, "question_id": 30086663, "link": "https://stackoverflow.com/questions/30086663/plt-show-hangs-on-osx-with-anaconda-python/58313155#58313155", "title": "plt.show() hangs on OSX with Anaconda Python", "body": "<p>Modify <code>matplotlib.pyplot</code> import to:</p>\n\n<pre><code>import matplotlib\nmatplotlib.use('TkAgg') #----&gt; Specify the backend\nimport matplotlib.pyplot as plt\n</code></pre>\n"}], "owner": {"reputation": 3359, "user_id": 938325, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4e59953fe8dee7fcde01424896eb41eb?s=128&d=identicon&r=PG", "display_name": "James Atwood", "link": "https://stackoverflow.com/users/938325/james-atwood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3781, "favorite_count": 0, "accepted_answer_id": 30109873, "answer_count": 4, "score": 11, "last_activity_date": 1570660550, "creation_date": 1430943297, "question_id": 30086663, "link": "https://stackoverflow.com/questions/30086663/plt-show-hangs-on-osx-with-anaconda-python", "title": "plt.show() hangs on OSX with Anaconda Python", "body": "<pre><code>import matplotlib.pyplot as plt\nplt.figure()\nplt.show()\n</code></pre>\n\n<p>...crickets.  The interpreter hangs and I can't seem to interrupt it.</p>\n\n<p>This is with Python 2.7.9 and Anaconda 2.2.0 (x86_64) on OSX.</p>\n\n<p>Does this happen for anyone else?  How can I solve this problem?</p>\n"}, {"tags": ["python", "json", "web-scraping", "scrapy"], "comments": [{"owner": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "edited": false, "score": 2, "creation_date": 1430943530, "post_id": 30086651, "comment_id": 48286702, "body": "The is no <code>print()</code> in your code."}, {"owner": {"reputation": 73, "user_id": 3530067, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001392740224/picture?type=large", "display_name": "Prathmesh", "link": "https://stackoverflow.com/users/3530067/prathmesh"}, "reply_to_user": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "edited": false, "score": 0, "creation_date": 1430943655, "post_id": 30086651, "comment_id": 48286775, "body": "I&#39;m calling it through terminal...&quot;scrapy crawl dmoz -o items.json&quot;...why would I need print?...it should output all items into the file items.json"}, {"owner": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "edited": false, "score": 0, "creation_date": 1430943890, "post_id": 30086651, "comment_id": 48286913, "body": "To solve this sort of problem you put a lot of <code>print()</code> statements into your code to bisect where is information is lost. Without that you don&#39;t know if maybe <code>scrapy.Request()</code> stalls, if you mistakenly swapped the start and end of the range, if <code>response.body_as_unicode()</code> stalls or what ever the problem is. First find the point that is not reached, then comment again."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 3530067, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001392740224/picture?type=large", "display_name": "Prathmesh", "link": "https://stackoverflow.com/users/3530067/prathmesh"}, "edited": false, "score": 0, "creation_date": 1430944868, "post_id": 30086871, "comment_id": 48287498, "body": "When I take off the CrawlSpider inheritance I get an error:   raise NotImplementedError exceptions.NotImplementedError:"}, {"owner": {"reputation": 73, "user_id": 3530067, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001392740224/picture?type=large", "display_name": "Prathmesh", "link": "https://stackoverflow.com/users/3530067/prathmesh"}, "edited": false, "score": 0, "creation_date": 1430945033, "post_id": 30086871, "comment_id": 48287589, "body": "And when I change parse into say parse_site (or anything else) I get the error: exceptions.AttributeError: &#39;DmozSpider&#39; object has no attribute &#39;parse_site&#39;"}, {"owner": {"reputation": 7598, "user_id": 2842884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/093fa30f7d60dbe70075149dbdfe4583?s=128&d=identicon&r=PG&f=1", "display_name": "bosnjak", "link": "https://stackoverflow.com/users/2842884/bosnjak"}, "reply_to_user": {"reputation": 73, "user_id": 3530067, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001392740224/picture?type=large", "display_name": "Prathmesh", "link": "https://stackoverflow.com/users/3530067/prathmesh"}, "edited": false, "score": 0, "creation_date": 1430955024, "post_id": 30086871, "comment_id": 48291768, "body": "You need to change the function also: <code>def parse()</code> to <code>def parse_site()</code>. And for the NotImplementedError, I need to see the stack trace."}], "tags": [], "owner": {"reputation": 7598, "user_id": 2842884, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/093fa30f7d60dbe70075149dbdfe4583?s=128&d=identicon&r=PG&f=1", "display_name": "bosnjak", "link": "https://stackoverflow.com/users/2842884/bosnjak"}, "is_accepted": true, "score": 1, "last_activity_date": 1430944004, "creation_date": 1430944004, "answer_id": 30086871, "question_id": 30086651, "link": "https://stackoverflow.com/questions/30086651/trying-to-parse-json-files-using-scrapy/30086871#30086871", "title": "Trying to parse JSON files using Scrapy", "body": "<p>When using <code>CrawlSpider</code> you should <strong>not</strong> override the <code>parse()</code> method:</p>\n\n<blockquote>\n  <p>When writing crawl spider rules, avoid using parse as callback, since\n  the CrawlSpider uses the parse method itself to implement its logic.\n  So if you override the parse method, the crawl spider will no longer\n  work.\n  (<a href=\"http://doc.scrapy.org/en/latest/topics/spiders.html#scrapy.contrib.spiders.Rule\" rel=\"nofollow\">source</a>)</p>\n</blockquote>\n\n<p>But since you are customizing your spider manually, and not using the <code>CrawlSpider</code> functionality anyway, I would suggest that you don't inherit from it. Instead, inherit from <code>scrapy.Spider</code>:</p>\n\n<pre><code>class DmozSpider(scrapy.Spider):\n    ...\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 3530067, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001392740224/picture?type=large", "display_name": "Prathmesh", "link": "https://stackoverflow.com/users/3530067/prathmesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 30086871, "answer_count": 1, "score": 0, "last_activity_date": 1430945955, "creation_date": 1430943244, "question_id": 30086651, "link": "https://stackoverflow.com/questions/30086651/trying-to-parse-json-files-using-scrapy", "title": "Trying to parse JSON files using Scrapy", "body": "<p>I'm trying to parse files much like <a href=\"http://proadvisorservice.intuit.com/v1/search?latitude=39&amp;longitude=-91&amp;radius=100&amp;pageNumber=1&amp;pageSize=&amp;sortBy=distance\" rel=\"nofollow\">this</a> one, but for a lot of longitudes and latitudes. The crawler loops through all of the webpages, but doesn't output anything.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>import scrapy\nimport json\n\nfrom tutorial.items import DmozItem\nfrom scrapy.http import Request\nfrom scrapy.contrib.spiders import CrawlSpider, Rule\n\nclass DmozSpider(CrawlSpider):\n    name = \"dmoz\"\n    allowed_domains = [\"proadvisorservice.intuit.com\"]\n\n    min_lat = 35\n    max_lat = 40\n    min_long = -100\n    max_long = -90\n\n    def start_requests(self):\n        for i in range(self.min_lat, self.max_lat):\n            for j in range(self.min_long, self.max_long):\n                yield scrapy.Request('http://proadvisorservice.intuit.com/v1/search?latitude=%d&amp;longitude=%d&amp;radius=100&amp;pageNumber=1&amp;pageSize=&amp;sortBy=distance' % (i, j), \n                    meta={'index':(i, j)},\n                    callback=self.parse)\n\n    def parse(self, response):\n        jsonresponse = json.loads(response.body_as_unicode())\n\n        for x in jsonresponse['searchResults']:\n            item = DmozItem()\n\n            item['firstName'] = x['firstName']\n            item['lastName'] = x['lastName']\n            item['phoneNumber'] = x['phoneNumber']\n            item['email'] = x['email']\n            item['companyName'] = x['companyName']\n            item['qbo'] = x['qbopapCertVersions']\n            item['qbd'] = x['papCertVersions']\n\n            yield item\n</code></pre>\n"}, {"tags": ["javascript", "python", "ajax", "json", "parsing"], "comments": [{"owner": {"reputation": 368, "user_id": 4777622, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IFAZZ.jpg?s=128&g=1", "display_name": "Dendromaniac", "link": "https://stackoverflow.com/users/4777622/dendromaniac"}, "edited": false, "score": 0, "creation_date": 1430943288, "post_id": 30086636, "comment_id": 48286542, "body": "One quick note, I believe you mean <code>scraping</code>, not <code>scrapping</code>"}, {"owner": {"reputation": 3734, "user_id": 3496038, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/MdpH5.jpg?s=128&g=1", "display_name": "Zach Gates", "link": "https://stackoverflow.com/users/3496038/zach-gates"}, "edited": false, "score": 0, "creation_date": 1430944111, "post_id": 30086636, "comment_id": 48287041, "body": "How is the response being returned? What type of object? A string?"}, {"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1430944152, "post_id": 30086636, "comment_id": 48287073, "body": "The response is in valid Python syntax... I wonder if <code>ast.parse</code> would be useful here at all."}, {"owner": {"reputation": 802, "user_id": 1599964, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0843ef80b66fb5b5838f263e92febe6a?s=128&d=identicon&r=PG", "display_name": "user1599964", "link": "https://stackoverflow.com/users/1599964/user1599964"}, "reply_to_user": {"reputation": 3734, "user_id": 3496038, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/MdpH5.jpg?s=128&g=1", "display_name": "Zach Gates", "link": "https://stackoverflow.com/users/3496038/zach-gates"}, "edited": false, "score": 0, "creation_date": 1430944224, "post_id": 30086636, "comment_id": 48287121, "body": "@ZachGates : Response is got using br.open(url).get_data(), where br = mechanize.Browser()"}], "answers": [{"comments": [{"owner": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 2, "creation_date": 1430943756, "post_id": 30086782, "comment_id": 48286849, "body": "I think he&#39;s receiving the response, not generating it. So he can&#39;t easily change the &quot;=&quot;s to &quot;:&quot;s without some serious parsing."}, {"owner": {"reputation": 802, "user_id": 1599964, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0843ef80b66fb5b5838f263e92febe6a?s=128&d=identicon&r=PG", "display_name": "user1599964", "link": "https://stackoverflow.com/users/1599964/user1599964"}, "reply_to_user": {"reputation": 69452, "user_id": 953482, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/T3HH6.png?s=128&g=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/953482/kevin"}, "edited": false, "score": 0, "creation_date": 1430944133, "post_id": 30086782, "comment_id": 48287053, "body": "@Kevin : Yeah right. Receiving response. In the answer given, I would have to change &#39;=&#39; -&gt; &#39;:&#39;  as well as &#39;;&#39; -&gt; &#39;,&#39;. Direct replacing might break the response though."}], "tags": [], "owner": {"reputation": 1, "user_id": 3409664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f405e01bbf5ca2ab0beecc73b0c6400e?s=128&d=identicon&r=PG&f=1", "display_name": "tMitusis", "link": "https://stackoverflow.com/users/3409664/tmitusis"}, "is_accepted": false, "score": 0, "last_activity_date": 1430943703, "creation_date": 1430943703, "answer_id": 30086782, "question_id": 30086636, "link": "https://stackoverflow.com/questions/30086636/how-to-parse-this-type-of-text/30086782#30086782", "title": "How to parse this type of text?", "body": "<p>Just wrap your response in a JSON object like so: </p>\n\n<p>JSON Response : </p>\n\n<pre><code>{\n    d1:[[\"m11\",\"m12\",\"m13\"],[\"m21\",\"m22\",\"m23\"]],\n    d2:[[\"x11\", \"x12\"],[\"x21\", \"x22\"],[\"x31\", \"x32\"]]\n};\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 802, "user_id": 1599964, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0843ef80b66fb5b5838f263e92febe6a?s=128&d=identicon&r=PG", "display_name": "user1599964", "link": "https://stackoverflow.com/users/1599964/user1599964"}, "edited": false, "score": 0, "creation_date": 1430945124, "post_id": 30086999, "comment_id": 48287634, "body": "One question. Is the output that you have shown a proper json object ? Trying it on jsonlint.com to see correctness suggests otherwise."}, {"owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "reply_to_user": {"reputation": 802, "user_id": 1599964, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0843ef80b66fb5b5838f263e92febe6a?s=128&d=identicon&r=PG", "display_name": "user1599964", "link": "https://stackoverflow.com/users/1599964/user1599964"}, "edited": false, "score": 1, "creation_date": 1430946019, "post_id": 30086999, "comment_id": 48288100, "body": "@user1599964: no, the output I&#39;ve shown is a Python dictionary.  If you want to encode that as json, simply bind it to something (say <code>d</code>) and then do <code>json.dumps(d)</code>."}], "tags": [], "owner": {"reputation": 288763, "user_id": 487339, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wbe4o.png?s=128&g=1", "display_name": "DSM", "link": "https://stackoverflow.com/users/487339/dsm"}, "is_accepted": true, "score": 3, "last_activity_date": 1430944464, "creation_date": 1430944464, "answer_id": 30086999, "question_id": 30086636, "link": "https://stackoverflow.com/questions/30086636/how-to-parse-this-type-of-text/30086999#30086999", "title": "How to parse this type of text?", "body": "<p>As Kevin notes, this is close enough to Python that we can leverage the <code>ast</code> module (in particular, <code>ast.parse</code> and <code>ast.literal_eval</code>).  For example:</p>\n\n<pre><code>&gt;&gt;&gt; import ast\n&gt;&gt;&gt; s = '''d1=[[\"m11\",\"m12\",\"m13\"],[\"m21\",\"m22\",\"m23\"]];d2=[[\"x11\", \"x12\"],[\"x21\", \"x22\"],[\"x31\", \"x32\"]]'''\n&gt;&gt;&gt; {b.targets[0].id: ast.literal_eval(b.value) for b in ast.parse(s).body}\n{'d2': [['x11', 'x12'], ['x21', 'x22'], ['x31', 'x32']], \n 'd1': [['m11', 'm12', 'm13'], ['m21', 'm22', 'm23']]}\n</code></pre>\n"}], "owner": {"reputation": 802, "user_id": 1599964, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/0843ef80b66fb5b5838f263e92febe6a?s=128&d=identicon&r=PG", "display_name": "user1599964", "link": "https://stackoverflow.com/users/1599964/user1599964"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 30086999, "answer_count": 2, "score": 2, "last_activity_date": 1460312794, "creation_date": 1430943173, "last_edit_date": 1460312794, "question_id": 30086636, "link": "https://stackoverflow.com/questions/30086636/how-to-parse-this-type-of-text", "title": "How to parse this type of text?", "body": "<p><em>Note</em> : I am new to python, javascript and scraping.</p>\n\n<p>I am scraping a website in python, using beautiful soup and mechanize.\nSome of the data is loaded through ajax requests.\nI am having trouble in scraping the response.</p>\n\n<p><strong>Sample Ajax request URL</strong> : <a href=\"http://example.com/getJSData/?file=/data/js/GetData.js&amp;cmd=GETDATA&amp;rc=BGAN\" rel=\"nofollow\">http://example.com/getJSData/?file=/data/js/GetData.js&amp;cmd=GETDATA&amp;rc=BGAN</a></p>\n\n<p><strong>Sample Response</strong> : d1=[[\"m11\",\"m12\",\"m13\"],[\"m21\",\"m22\",\"m23\"]];d2=[[\"x11\", \"x12\"],[\"x21\", \"x22\"],[\"x31\", \"x32\"]]</p>\n\n<p>Though the whole repsonse is not a proper json object, the values of each of d1 and d2 is a valid JSON object, that I can parse using some json parser in python. But how to parse the whole response ?</p>\n\n<p>The obvious way is to search for all the \"=\" in the response and extract the json object, and then parse it using json parser.</p>\n\n<p>But I feel there must be a more elegant way of doing this (Parsing the whole response). Can you please guide?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["python", "pytest"], "answers": [{"comments": [{"owner": {"reputation": 2015, "user_id": 611873, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/UsO0s.jpg?s=128&g=1", "display_name": "aaragon", "link": "https://stackoverflow.com/users/611873/aaragon"}, "edited": false, "score": 0, "creation_date": 1430943394, "post_id": 30086613, "comment_id": 48286621, "body": "I tried that, but the code still fails inside the library for which I provided the test, as inside the library there&#39;s also an <code>import nlopt</code> that raises an exception if it can&#39;t find the module."}, {"owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "reply_to_user": {"reputation": 2015, "user_id": 611873, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/UsO0s.jpg?s=128&g=1", "display_name": "aaragon", "link": "https://stackoverflow.com/users/611873/aaragon"}, "edited": false, "score": 0, "creation_date": 1430943601, "post_id": 30086613, "comment_id": 48286746, "body": "You can move that <code>import</code> inside the functions that actually use it, instead of having it be top-level."}, {"owner": {"reputation": 2015, "user_id": 611873, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/UsO0s.jpg?s=128&g=1", "display_name": "aaragon", "link": "https://stackoverflow.com/users/611873/aaragon"}, "edited": false, "score": 0, "creation_date": 1430943685, "post_id": 30086613, "comment_id": 48286800, "body": "You mean on the library side or on the test side?"}, {"owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "reply_to_user": {"reputation": 2015, "user_id": 611873, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/UsO0s.jpg?s=128&g=1", "display_name": "aaragon", "link": "https://stackoverflow.com/users/611873/aaragon"}, "edited": false, "score": 0, "creation_date": 1430943771, "post_id": 30086613, "comment_id": 48286854, "body": "On the library side. What does the library code do presently when <code>nlopt</code> isn&#39;t found?"}, {"owner": {"reputation": 2015, "user_id": 611873, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/UsO0s.jpg?s=128&g=1", "display_name": "aaragon", "link": "https://stackoverflow.com/users/611873/aaragon"}, "edited": false, "score": 0, "creation_date": 1430943940, "post_id": 30086613, "comment_id": 48286946, "body": "I have modified my post to show you what the library currently does. It seems ugly but I don&#39;t know a better way to accomplish that. Ideally, I would like the library to work, even if the module isn&#39;t installed in the computer."}, {"owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "reply_to_user": {"reputation": 2015, "user_id": 611873, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/UsO0s.jpg?s=128&g=1", "display_name": "aaragon", "link": "https://stackoverflow.com/users/611873/aaragon"}, "edited": false, "score": 0, "creation_date": 1430944150, "post_id": 30086613, "comment_id": 48287070, "body": "Well, if the library itself is raising <code>ImportError</code>, just change your skip: <code>my_library = pytest.importorskip(my_library)</code>. If you want your code to still work when <code>nlopt</code> is not present, you could just set something like <code>NO_NLOPT=True</code> in the <code>except ImportError</code> block, don&#39;t raise, and then have alternate code paths that do whatever workaround you need."}, {"owner": {"reputation": 2015, "user_id": 611873, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/UsO0s.jpg?s=128&g=1", "display_name": "aaragon", "link": "https://stackoverflow.com/users/611873/aaragon"}, "edited": false, "score": 0, "creation_date": 1430944899, "post_id": 30086613, "comment_id": 48287518, "body": "I understand what you&#39;re suggesting. I&#39;ll give it a try."}, {"owner": {"reputation": 15970, "user_id": 210945, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/20cb8dcc17ad4334c0f8cb1ddc28bcd0?s=128&d=identicon&r=PG", "display_name": "naught101", "link": "https://stackoverflow.com/users/210945/naught101"}, "edited": false, "score": 0, "creation_date": 1589505324, "post_id": 30086613, "comment_id": 109328860, "body": "The link in the answer is now broken."}], "tags": [], "owner": {"reputation": 41878, "user_id": 257465, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/882a999c825707d8bfa799ee20bda1f2?s=128&d=identicon&r=PG", "display_name": "tzaman", "link": "https://stackoverflow.com/users/257465/tzaman"}, "is_accepted": true, "score": 2, "last_activity_date": 1589544402, "last_edit_date": 1589544402, "creation_date": 1430943080, "answer_id": 30086613, "question_id": 30086558, "link": "https://stackoverflow.com/questions/30086558/py-test-fails-due-to-missing-module/30086613#30086613", "title": "py.test fails due to missing module", "body": "<p>Use the <a href=\"https://docs.pytest.org/en/latest/skipping.html#skipping-on-a-missing-import-dependency\" rel=\"nofollow noreferrer\">conditional import machinery</a> pytest provides:</p>\n\n<pre><code>nlopt = pytest.importorskip('nlopt')\n</code></pre>\n\n<p>Put that line inside the specific test function that uses <code>nlopt</code> (or in the setup method for a set of functions) and it will only skip those when it can't do the import.</p>\n"}], "owner": {"reputation": 2015, "user_id": 611873, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/UsO0s.jpg?s=128&g=1", "display_name": "aaragon", "link": "https://stackoverflow.com/users/611873/aaragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1432, "favorite_count": 0, "accepted_answer_id": 30086613, "answer_count": 1, "score": 0, "last_activity_date": 1589544402, "creation_date": 1430942904, "last_edit_date": 1430943888, "question_id": 30086558, "link": "https://stackoverflow.com/questions/30086558/py-test-fails-due-to-missing-module", "title": "py.test fails due to missing module", "body": "<p>I would like to write a test, but this test will pass only if the <code>nlopt</code> module is installed. Since this module is <em>optional</em>, I was wondering if there's a way to write a test that won't prevent py.test to fail completely if the module is not present. at this point, py.test stops as it can't find the <code>nlopt</code> module:</p>\n\n<pre><code>$ make test\npy.test --exitfirst tests/\n============================================================= test session starts =============================================================\nplatform darwin -- Python 3.4.2 -- py-1.4.26 -- pytest-2.6.4\ncollecting 0 items / 1 errors\n=================================================================== ERRORS ====================================================================\n_____________________________________________ ERROR collecting tests/unit/fem/test_simulation.py ______________________________________________\ntests/unit/fem/test_simulation.py:5: in &lt;module&gt;\n    from hybrida.fem import Simulation, Step, Eigenvalue\nsrc/hybrida/__init__.py:4: in &lt;module&gt;\n    from . import geometry\nsrc/hybrida/geometry/__init__.py:3: in &lt;module&gt;\n    from . import distance\nsrc/hybrida/geometry/distance.py:9: in &lt;module&gt;\n    import nlopt\nE   ImportError: No module named 'nlopt'\n--------------------------------------------------------------- Captured stdout ---------------------------------------------------------------\n nlopt does not seem to be installed. \n=========================================================== short test summary info ===========================================================\nERROR tests/unit/fem/test_simulation.py\n!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! Interrupted: stopping after 1 failures !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!\n=========================================================== 1 error in 0.67 seconds ===========================================================\nmake: *** [test] Error 2\n</code></pre>\n\n<p>I tried to add a <code>try-except</code> block in the beginning of the test file but this didn't help:</p>\n\n<pre><code>try:\n    import nlopt\n    import numpy as np\n\nexcept ImportError:\n    print(\"\"\"nlopt does not seem to be installed\"\"\")\n</code></pre>\n\n<p>The <code>nlopt</code> module is used inside the library for which I'm writing a test. Currently, the library raises an exception if the module is not found. At the top level of a file that uses the module:</p>\n\n<pre><code>try:\n    import nlopt\n\nexcept ImportError:\n    print(\"\"\"\\033[91m nlopt does not seem to be installed. Please install it by downloading nlopt, and installing it using\n        $ ./configure --enable-shared\n        $ make\n        $ make install\n        and adding /usr/local/lib/Python3.4/site-packages to the PYTHONPATH\n        (or wherever nlopt has been installed):\n        export PYTHONPATH=$PYTHONPATH:/usr/local/lib/Python3.4/site-packages\n\n        Note: although Homebrew provides nlopt, it does not install the Python interface.\\033[0m\"\"\")\n    raise\n</code></pre>\n"}, {"tags": ["python", "module"], "comments": [{"owner": {"reputation": 3291, "user_id": 4087357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3GqlU.jpg?s=128&g=1", "display_name": "michaelpri", "link": "https://stackoverflow.com/users/4087357/michaelpri"}, "edited": false, "score": 1, "creation_date": 1430942652, "post_id": 30086427, "comment_id": 48286136, "body": "What is the code for <code>custom_module</code>?"}, {"owner": {"reputation": 3291, "user_id": 4087357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3GqlU.jpg?s=128&g=1", "display_name": "michaelpri", "link": "https://stackoverflow.com/users/4087357/michaelpri"}, "edited": false, "score": 1, "creation_date": 1430942855, "post_id": 30086427, "comment_id": 48286272, "body": "Could you edit it into your question?"}, {"owner": {"reputation": 18703, "user_id": 2912340, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/ddQ02.jpg?s=128&g=1", "display_name": "\u0141ukasz Rogalski", "link": "https://stackoverflow.com/users/2912340/%c5%81ukasz-rogalski"}, "edited": false, "score": 0, "creation_date": 1430943251, "post_id": 30086427, "comment_id": 48286513, "body": "Cannot reproduce. What I&#39;m getting is <code>UnboundLocalError: local variable &#39;counter&#39; referenced before assignment</code>, not AttributeError. Please fix your question."}, {"owner": {"reputation": 121, "user_id": 4872151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f938fa3e25d9f1ed903db8db0ce6174?s=128&d=identicon&r=PG&f=1", "display_name": "Monoandale", "link": "https://stackoverflow.com/users/4872151/monoandale"}, "edited": false, "score": 0, "creation_date": 1430943362, "post_id": 30086427, "comment_id": 48286600, "body": "I removed &quot;counter&quot;, it was basically vestigial code from the tutorial I was following. It was not fundamental, I can&#39;t use the class at all anyway."}, {"owner": {"reputation": 3291, "user_id": 4087357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3GqlU.jpg?s=128&g=1", "display_name": "michaelpri", "link": "https://stackoverflow.com/users/4087357/michaelpri"}, "edited": false, "score": 0, "creation_date": 1430943499, "post_id": 30086427, "comment_id": 48286692, "body": "In the first part, it says that you have <code>custom_module</code> and <code>Custom_class</code>. (well <code>custom_Class</code>) in your actual code. After the edit, it say <code>custommodule</code> and <code>Customclass</code>. Could you please verify which is correct."}, {"owner": {"reputation": 121, "user_id": 4872151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f938fa3e25d9f1ed903db8db0ce6174?s=128&d=identicon&r=PG&f=1", "display_name": "Monoandale", "link": "https://stackoverflow.com/users/4872151/monoandale"}, "edited": false, "score": 0, "creation_date": 1430943696, "post_id": 30086427, "comment_id": 48286808, "body": "Sorry for the confusion. I removed the old code."}, {"owner": {"reputation": 3291, "user_id": 4087357, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3GqlU.jpg?s=128&g=1", "display_name": "michaelpri", "link": "https://stackoverflow.com/users/4087357/michaelpri"}, "edited": false, "score": 1, "creation_date": 1430944137, "post_id": 30086427, "comment_id": 48287059, "body": "I can&#39;t reproduce this. Are you sure that all of the files are accessible, ie: <code>custommodule</code> is in the same folder as the file you are working in?"}, {"owner": {"reputation": 2821, "user_id": 1092803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3sAr.jpg?s=128&g=1", "display_name": "Gianluca", "link": "https://stackoverflow.com/users/1092803/gianluca"}, "edited": false, "score": 1, "creation_date": 1430944138, "post_id": 30086427, "comment_id": 48287060, "body": "Try to execute, in the python interpreter, the command <code>dir (custommodule)</code> after you import <code>custommodule</code>, it should print what you just imported. The code you posted seems good and it work as expected"}, {"owner": {"reputation": 121, "user_id": 4872151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f938fa3e25d9f1ed903db8db0ce6174?s=128&d=identicon&r=PG&f=1", "display_name": "Monoandale", "link": "https://stackoverflow.com/users/4872151/monoandale"}, "edited": false, "score": 0, "creation_date": 1430944318, "post_id": 30086427, "comment_id": 48287177, "body": "import custommodule works, i.e. does not return errors"}, {"owner": {"reputation": 121, "user_id": 4872151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f938fa3e25d9f1ed903db8db0ce6174?s=128&d=identicon&r=PG&f=1", "display_name": "Monoandale", "link": "https://stackoverflow.com/users/4872151/monoandale"}, "edited": false, "score": 0, "creation_date": 1430944409, "post_id": 30086427, "comment_id": 48287235, "body": "Gianluca, this is the result:  <code>&gt;&gt;&gt; import custommodule  &gt;&gt;&gt; dir (custommodule)  [&#39;__builtins__&#39;, &#39;__doc__&#39;, &#39;__file__&#39;, &#39;__name__&#39;, &#39;__package__&#39;, &#39;__path__&#39;]</code>"}, {"owner": {"reputation": 121, "user_id": 4872151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f938fa3e25d9f1ed903db8db0ce6174?s=128&d=identicon&r=PG&f=1", "display_name": "Monoandale", "link": "https://stackoverflow.com/users/4872151/monoandale"}, "edited": false, "score": 0, "creation_date": 1430944448, "post_id": 30086427, "comment_id": 48287255, "body": "michaelpri, I am using the interpreter from the Desktop. The module is in:  ~/Library/Python/2.7/lib/python/site-packages/custommodule"}, {"owner": {"reputation": 2821, "user_id": 1092803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3sAr.jpg?s=128&g=1", "display_name": "Gianluca", "link": "https://stackoverflow.com/users/1092803/gianluca"}, "edited": false, "score": 1, "creation_date": 1430944536, "post_id": 30086427, "comment_id": 48287300, "body": "Then you are importing something wrong, it should be (given your code example) <code>[&#39;Customclass&#39;, &#39;__builtins__&#39;, &#39;__cached__&#39;, &#39;__doc__&#39;, &#39;__file__&#39;, &#39;__loader__&#39;, &#39;__name__&#39;, &#39;__package__&#39;, &#39;__spec__&#39;]</code> which is what I get trying your code"}, {"owner": {"reputation": 121, "user_id": 4872151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f938fa3e25d9f1ed903db8db0ce6174?s=128&d=identicon&r=PG&f=1", "display_name": "Monoandale", "link": "https://stackoverflow.com/users/4872151/monoandale"}, "edited": false, "score": 0, "creation_date": 1430944730, "post_id": 30086427, "comment_id": 48287416, "body": "To create the module I am putting custommodule.py in its own folder in  ~/Library/Python/2.7/lib/python/site-packages/  and adding <b>init</b>.py  Is there any step I left out?"}, {"owner": {"reputation": 759, "user_id": 3578820, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/VNwE8.jpg?s=128&g=1", "display_name": "JGerulskis", "link": "https://stackoverflow.com/users/3578820/jgerulskis"}, "edited": false, "score": 1, "creation_date": 1430945439, "post_id": 30086427, "comment_id": 48287810, "body": "<code>from custom_module import CustomClass</code>? and then <code>new = CustomClass(&#39;foo&#39;)</code>?"}, {"owner": {"reputation": 121, "user_id": 4872151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f938fa3e25d9f1ed903db8db0ce6174?s=128&d=identicon&r=PG&f=1", "display_name": "Monoandale", "link": "https://stackoverflow.com/users/4872151/monoandale"}, "edited": false, "score": 0, "creation_date": 1430945529, "post_id": 30086427, "comment_id": 48287857, "body": "&gt;&gt;&gt; import custommodule  &gt;&gt;&gt; from custommodule import Customclass   Traceback (most recent call last):     File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;   ImportError: cannot import name Customclass"}], "answers": [{"comments": [{"owner": {"reputation": 121, "user_id": 4872151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f938fa3e25d9f1ed903db8db0ce6174?s=128&d=identicon&r=PG&f=1", "display_name": "Monoandale", "link": "https://stackoverflow.com/users/4872151/monoandale"}, "edited": false, "score": 0, "creation_date": 1430946228, "post_id": 30087364, "comment_id": 48288215, "body": "Hi, Thanks, I am not familiar with Pycharm.  My modules on Mac OS are in PYTHONPATH. And I can load them without errors (they are found), but that&#39;s the only things that works.    Maybe there is something wrong in the way I am organising files? Maybe I need something more than <b>init</b>.py?"}, {"owner": {"reputation": 759, "user_id": 3578820, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/VNwE8.jpg?s=128&g=1", "display_name": "JGerulskis", "link": "https://stackoverflow.com/users/3578820/jgerulskis"}, "reply_to_user": {"reputation": 121, "user_id": 4872151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f938fa3e25d9f1ed903db8db0ce6174?s=128&d=identicon&r=PG&f=1", "display_name": "Monoandale", "link": "https://stackoverflow.com/users/4872151/monoandale"}, "edited": false, "score": 1, "creation_date": 1430946263, "post_id": 30087364, "comment_id": 48288236, "body": "Which IDE are you using? And your classes are created properly. It is probably something to do with the organization."}, {"owner": {"reputation": 121, "user_id": 4872151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f938fa3e25d9f1ed903db8db0ce6174?s=128&d=identicon&r=PG&f=1", "display_name": "Monoandale", "link": "https://stackoverflow.com/users/4872151/monoandale"}, "edited": false, "score": 0, "creation_date": 1430946389, "post_id": 30087364, "comment_id": 48288285, "body": "I never used an IDE. I just use Textwrangler on Mac."}, {"owner": {"reputation": 759, "user_id": 3578820, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/VNwE8.jpg?s=128&g=1", "display_name": "JGerulskis", "link": "https://stackoverflow.com/users/3578820/jgerulskis"}, "reply_to_user": {"reputation": 121, "user_id": 4872151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f938fa3e25d9f1ed903db8db0ce6174?s=128&d=identicon&r=PG&f=1", "display_name": "Monoandale", "link": "https://stackoverflow.com/users/4872151/monoandale"}, "edited": false, "score": 0, "creation_date": 1430947104, "post_id": 30087364, "comment_id": 48288632, "body": "That&#39;s very strange. Firstly, I&#39;d highly recommenced an IDE like pycharm. Secondly, I&#39;m stumped!"}], "tags": [], "owner": {"reputation": 759, "user_id": 3578820, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/VNwE8.jpg?s=128&g=1", "display_name": "JGerulskis", "link": "https://stackoverflow.com/users/3578820/jgerulskis"}, "is_accepted": false, "score": 1, "last_activity_date": 1430946142, "last_edit_date": 1430946142, "creation_date": 1430945802, "answer_id": 30087364, "question_id": 30086427, "link": "https://stackoverflow.com/questions/30086427/python-cannot-load-class-from-my-module/30087364#30087364", "title": "Python: cannot load class from my module", "body": "<p>For me, at least, this works <code>from mod_name import ClassName</code>\n<img src=\"https://i.stack.imgur.com/IwrN7.png\" alt=\"mod2\">\n<img src=\"https://i.stack.imgur.com/kxy2Z.png\" alt=\"mod1\">\n<img src=\"https://i.stack.imgur.com/U6biY.png\" alt=\"Runs fine\"></p>\n\n<p>When I run this code I don't get any errors. Hope this helped</p>\n\n<p>EDIT: also make sure that the module you want to import is in the project directory. If you view the left panel in the images both modules are in <code>Stack</code>. I hope this is obvious but, the class needs to be in the module you import as well. Make sure that the class you're importing does not import the class your importing in because then you get circular dependencies.</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 4872151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f938fa3e25d9f1ed903db8db0ce6174?s=128&d=identicon&r=PG&f=1", "display_name": "Monoandale", "link": "https://stackoverflow.com/users/4872151/monoandale"}, "edited": false, "score": 0, "creation_date": 1430947804, "post_id": 30087743, "comment_id": 48288969, "body": "This is strange. I tried doing the import from the same directory (customodule itself!) and it worked, but it doesn&#39;t work with what you suggested.    &gt;&gt;&gt; from .custommodule import CustomClass   Traceback (most recent call last):   File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt; ValueError: Attempted relative import in non-package &gt;&gt;&gt; import custommodule &gt;&gt;&gt; from custommodule import Customclass"}, {"owner": {"reputation": 2821, "user_id": 1092803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3sAr.jpg?s=128&g=1", "display_name": "Gianluca", "link": "https://stackoverflow.com/users/1092803/gianluca"}, "reply_to_user": {"reputation": 121, "user_id": 4872151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f938fa3e25d9f1ed903db8db0ce6174?s=128&d=identicon&r=PG&f=1", "display_name": "Monoandale", "link": "https://stackoverflow.com/users/4872151/monoandale"}, "edited": false, "score": 0, "creation_date": 1430948701, "post_id": 30087743, "comment_id": 48289403, "body": "You cannot do this way, since a relative import seems to be allowed only in a package. the line <code>from .custommodule import CustomClass</code> is in the <code>__init__.py</code> file, you cannot use it from the interpreter"}], "tags": [], "owner": {"reputation": 2821, "user_id": 1092803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/s3sAr.jpg?s=128&g=1", "display_name": "Gianluca", "link": "https://stackoverflow.com/users/1092803/gianluca"}, "is_accepted": false, "score": 1, "last_activity_date": 1430947201, "creation_date": 1430947201, "answer_id": 30087743, "question_id": 30086427, "link": "https://stackoverflow.com/questions/30086427/python-cannot-load-class-from-my-module/30087743#30087743", "title": "Python: cannot load class from my module", "body": "<p>Try this way</p>\n\n<p>File <em>custommodule.py</em> in the directory custommodule</p>\n\n<pre><code>class Customclass:\n    def __init__(self, name):\n        self.name = name\n</code></pre>\n\n<p>File <code>__init__.py</code> int he custommodule directory</p>\n\n<pre><code>from .custommodule import CustomClass\n</code></pre>\n\n<p>Note the dot <em>before</em> custommodule. This force the init to load the module from the same directory.</p>\n\n<p>Without the dot, it work under python2 but not under python3</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 4872151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f938fa3e25d9f1ed903db8db0ce6174?s=128&d=identicon&r=PG&f=1", "display_name": "Monoandale", "link": "https://stackoverflow.com/users/4872151/monoandale"}, "edited": false, "score": 0, "creation_date": 1430948306, "post_id": 30087979, "comment_id": 48289224, "body": "&gt;&gt;&gt; from utils1.utils1 import helloFoo &gt;&gt;&gt; helloFoo() foo  This just worked!!!!!!!!"}, {"owner": {"reputation": 121, "user_id": 4872151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f938fa3e25d9f1ed903db8db0ce6174?s=128&d=identicon&r=PG&f=1", "display_name": "Monoandale", "link": "https://stackoverflow.com/users/4872151/monoandale"}, "edited": false, "score": 0, "creation_date": 1430948672, "post_id": 30087979, "comment_id": 48289394, "body": "THANKS! I didn&#39;t realise that I had to specify the package as well. Now ALL my modules work and I can call functions and classes correctly!"}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": true, "score": 1, "last_activity_date": 1430948009, "creation_date": 1430948009, "answer_id": 30087979, "question_id": 30086427, "link": "https://stackoverflow.com/questions/30086427/python-cannot-load-class-from-my-module/30087979#30087979", "title": "Python: cannot load class from my module", "body": "<p>With this file layout</p>\n\n<pre><code>site-packages/custommodule/__init__.py\nsite-packages/custommodule/custommodule.py\n</code></pre>\n\n<p>you are creating a package named <code>custommodule</code> that contains a module <em>also</em> named <code>custommodule</code>. Your code needs to look like</p>\n\n<pre><code>import custommodule\n# or more specifically,\n# import custommodule.custommodule\nnew = custommodule.custommodule.Customclass('foo')\n</code></pre>\n\n<p>or</p>\n\n<pre><code>from custommmodule import custommodule\nnew = custommodule.Customclass('foo')\n</code></pre>\n\n<p>You can also put <code>custommodule.py</code> directly in <code>site-packages</code> to avoid creating the package, in which case your original code should work.</p>\n"}], "owner": {"reputation": 121, "user_id": 4872151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f938fa3e25d9f1ed903db8db0ce6174?s=128&d=identicon&r=PG&f=1", "display_name": "Monoandale", "link": "https://stackoverflow.com/users/4872151/monoandale"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 600, "favorite_count": 1, "accepted_answer_id": 30087979, "answer_count": 3, "score": 0, "last_activity_date": 1431342024, "creation_date": 1430942456, "last_edit_date": 1431342024, "question_id": 30086427, "link": "https://stackoverflow.com/questions/30086427/python-cannot-load-class-from-my-module", "title": "Python: cannot load class from my module", "body": "<p>EDIT:\nI couldn't use my own modules. It was a stupid waste of time. If you ever have the same problem, try reading this first:\n<a href=\"http://docs.python-guide.org/en/latest/writing/structure/\" rel=\"nofollow\">http://docs.python-guide.org/en/latest/writing/structure/</a></p>\n\n<p>I just started OOP with Python and I am confused by modules and classes.</p>\n\n<p>I work with a Mac and I can write my own modules and load them from the site-packages folder.</p>\n\n<p>Now I would like to create modules with useful classes.\n<code>import custom_module</code> works.\nBut if <code>custom_module</code> has a class <code>Custom_class</code>, things don't work.</p>\n\n<p>I tried doing:\n(EDIT: I am sorry, I am removing old code which was made up, this is what I just used and doesn't work)</p>\n\n<p>in custommodule.py:</p>\n\n<pre><code>class Customclass:\n    def __init__(self, name):\n        self.name = name\n</code></pre>\n\n<p>This module loads without errors.\nThen I get:</p>\n\n<pre><code>new = custommodule.Customclass('foo')\nTraceback (most recent call last):\nFile \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\nAttributeError: 'module' object has no attribute 'Customclass'\n</code></pre>\n\n<p>BTW, I started trying to do this using code from this <a href=\"http://en.wikibooks.org/wiki/A_Beginner%27s_Python_Tutorial/Classes\" rel=\"nofollow\">tutorial</a></p>\n\n<p>I was not able to get over this. Please advise, I must be doing something wrong.</p>\n"}, {"tags": ["python", "lxml", "feedparser", "libuv"], "comments": [{"owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1430942902, "post_id": 30086424, "comment_id": 48286296, "body": "The <code>bozo_exception</code> error is returned by <code>feedparser.parse()</code>.  If you modify <code>parse_feed</code> to print the value of <code>_feed</code> before calling <code>feedparser.parse</code>, is it receiving what you think it&#39;s receiving?"}, {"owner": {"reputation": 889, "user_id": 1477118, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ziXaw.jpg?s=128&g=1", "display_name": "nickbusted", "link": "https://stackoverflow.com/users/1477118/nickbusted"}, "reply_to_user": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "edited": false, "score": 0, "creation_date": 1430943015, "post_id": 30086424, "comment_id": 48286372, "body": "@larsks thanks. yes, it prints the url from the list."}], "answers": [{"tags": [], "owner": {"reputation": 191222, "user_id": 147356, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b9506717d24256a090524dd5505d3207?s=128&d=identicon&r=PG", "display_name": "larsks", "link": "https://stackoverflow.com/users/147356/larsks"}, "is_accepted": false, "score": 0, "last_activity_date": 1430944156, "creation_date": 1430944156, "answer_id": 30086916, "question_id": 30086424, "link": "https://stackoverflow.com/questions/30086424/feedparser-typeerrora-float-is-required/30086916#30086916", "title": "Feedparser - TypeError(&#39;a float is required&#39;,)", "body": "<p>I'm not able to install the <code>guv</code> module locally, so I can't test your code verbatim, but if I use <code>eventlet.greenpool.GreenPool</code> instead everything works fine:</p>\n\n<pre><code>import feedparser\nimport eventlet.greenpool\n\ndef parse_feed(_feed):  \n    print 'PARSE:', _feed\n    return feedparser.parse(_feed)\n\ndef main():\n    urls = [\"http://feeds.bbci.co.uk/news/rss.xml\"]\n    pool = eventlet.greenpool.GreenPool()\n    results = pool.starmap(parse_feed, zip(urls))\n    for resp in results:\n        print resp\n\nmain()\n</code></pre>\n\n<p>I also see correct behavior with <code>itertools.starmap()</code>.  Is it possible you're seeing some sort of transient error?</p>\n"}], "owner": {"reputation": 889, "user_id": 1477118, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ziXaw.jpg?s=128&g=1", "display_name": "nickbusted", "link": "https://stackoverflow.com/users/1477118/nickbusted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430949631, "creation_date": 1430942446, "last_edit_date": 1430949631, "question_id": 30086424, "link": "https://stackoverflow.com/questions/30086424/feedparser-typeerrora-float-is-required", "title": "Feedparser - TypeError(&#39;a float is required&#39;,)", "body": "<p>I am using <code>guv</code> and <code>feedparser</code> to parse multiple feeds simultaneously. The following is my code:</p>\n\n<pre><code>guv.monkey_patch(time=True, socket=True)\n\ndef parse_feed(_feed):  \n    return feedparser.parse(_feed)\n\ndef main():\n    urls = [\"http://feeds.bbci.co.uk/news/rss.xml\"]\n    pool = guv.GreenPool()\n    results = pool.starmap(parse_feed, zip(urls))\n    for resp in results:\n        print(str(resp)) \n</code></pre>\n\n<p>However, I get the following output:</p>\n\n<pre><code>{'bozo_exception': TypeError('a float is required',), 'bozo': 1, 'feed': {}, 'entries': []}\n</code></pre>\n\n<p>I have the similar problem using <code>Eventlet</code>, but not with native Python 3 <code>threading</code> library.</p>\n"}, {"tags": ["python", "class", "typeerror"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 1, "creation_date": 1430942549, "post_id": 30086384, "comment_id": 48286070, "body": "<code>Player</code> takes a <code>name</code> parameter, but you don&#39;t pass it anything."}, {"owner": {"reputation": 15161, "user_id": 4338920, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/AHhiC.png?s=128&g=1", "display_name": "Malik Brahimi", "link": "https://stackoverflow.com/users/4338920/malik-brahimi"}, "edited": false, "score": 0, "creation_date": 1430942686, "post_id": 30086384, "comment_id": 48286159, "body": "Exactly, you pass the implied <code>self</code> argument but not the <code>name</code> argument."}, {"owner": {"reputation": 399, "user_id": 2604166, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/01fce28c28a28514f7760f23ec388374?s=128&d=identicon&r=PG", "display_name": "mee", "link": "https://stackoverflow.com/users/2604166/mee"}, "edited": false, "score": 0, "creation_date": 1430942779, "post_id": 30086384, "comment_id": 48286219, "body": "Later on in the text file I actually do x = Player(&quot;string&quot;) and then proceed from there. I just forgot to include that bit here"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 2, "creation_date": 1430942803, "post_id": 30086384, "comment_id": 48286230, "body": "The two questions you linked explain the problem perfectly. Not sure how you didn&#39;t figure it out from there..."}, {"owner": {"reputation": 8010, "user_id": 2623899, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/83ad78df36161a34b886c5b230098416?s=128&d=identicon&r=PG", "display_name": "dbliss", "link": "https://stackoverflow.com/users/2623899/dbliss"}, "edited": false, "score": 0, "creation_date": 1430947346, "post_id": 30086384, "comment_id": 48288740, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/25805194/init-takes-exactly-2-arguments-1-given\">__init__() takes exactly 2 arguments (1 given)?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "is_accepted": false, "score": 2, "last_activity_date": 1430942412, "creation_date": 1430942412, "answer_id": 30086411, "question_id": 30086384, "link": "https://stackoverflow.com/questions/30086384/python-typeerror-init-takes-exactly-2-arguments-1-given/30086411#30086411", "title": "Python: TypeError: __init__() takes exactly 2 arguments (1 given)", "body": "<p>The problem is that the Class <code>Player</code>'s <code>__init__</code> function accepts a <code>name</code> argument while you are initializing the Class instance. The first argument, <code>self</code> is automatically handled when you create a class instance. So you have to change </p>\n\n<pre><code>player = Player()\n</code></pre>\n\n<p>to</p>\n\n<pre><code>player = Player('somename')\n</code></pre>\n\n<p>to get the program up and running.</p>\n"}, {"comments": [{"owner": {"reputation": 399, "user_id": 2604166, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/01fce28c28a28514f7760f23ec388374?s=128&d=identicon&r=PG", "display_name": "mee", "link": "https://stackoverflow.com/users/2604166/mee"}, "edited": false, "score": 0, "creation_date": 1430943644, "post_id": 30086432, "comment_id": 48286768, "body": "Instead of typing Player(&quot;George&quot;) in the Food class, how can I make it so that Player(name) works and gets the value for name which I enter when I run the actual Player class with an argument?"}, {"owner": {"reputation": 2048, "user_id": 4453200, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0RK5d.jpg?s=128&g=1", "display_name": "Tenzin", "link": "https://stackoverflow.com/users/4453200/tenzin"}, "reply_to_user": {"reputation": 399, "user_id": 2604166, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/01fce28c28a28514f7760f23ec388374?s=128&d=identicon&r=PG", "display_name": "mee", "link": "https://stackoverflow.com/users/2604166/mee"}, "edited": false, "score": 0, "creation_date": 1430944253, "post_id": 30086432, "comment_id": 48287137, "body": "@mee I also don&#39;t fully understand what you are trying to do. Do you want to make a variable called &quot;name&quot; that can be used trough all classes? If yes, you make a variable a global variable. Then every class/definition can use it. Or you can pass th variable on to another class by using inheritence."}, {"owner": {"reputation": 399, "user_id": 2604166, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/01fce28c28a28514f7760f23ec388374?s=128&d=identicon&r=PG", "display_name": "mee", "link": "https://stackoverflow.com/users/2604166/mee"}, "edited": false, "score": 0, "creation_date": 1430944299, "post_id": 30086432, "comment_id": 48287168, "body": "In the complete file, at the end I have these lines: x = Player(&quot;string&quot;)  print x.name  print x.health  x.eat(&#39;apple&#39;)  print x.health Is there a way for me to initialize Player in the Food class without having to write &quot;string&quot; a second time, but to use the value of x = Player(&quot;string&quot;)? I hope its clearer now"}], "tags": [], "owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "is_accepted": false, "score": 2, "last_activity_date": 1430942471, "creation_date": 1430942471, "answer_id": 30086432, "question_id": 30086384, "link": "https://stackoverflow.com/questions/30086384/python-typeerror-init-takes-exactly-2-arguments-1-given/30086432#30086432", "title": "Python: TypeError: __init__() takes exactly 2 arguments (1 given)", "body": "<p><code>__init__()</code> is the function called when the class is instantiated. So, any arguments required by <code>__init__</code> need to be passed when creating an instance. So, instead of </p>\n\n<pre><code>player = Player()\n</code></pre>\n\n<p>use</p>\n\n<pre><code>player = Player(\"George\")\n</code></pre>\n\n<p>The first argument is the implicit <code>self</code>, which doesn't need to be included when instantiating. <code>name</code>, however, is required. You were getting the error because you weren't including it.</p>\n"}, {"comments": [{"owner": {"reputation": 901, "user_id": 3749292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5UptT.jpg?s=128&g=1", "display_name": "Jerry Ajay", "link": "https://stackoverflow.com/users/3749292/jerry-ajay"}, "edited": false, "score": 3, "creation_date": 1430943066, "post_id": 30086507, "comment_id": 48286399, "body": "Why the down vote? The question was to get the two classes working and this is the most simplest answer possible."}, {"owner": {"reputation": 40613, "user_id": 4099593, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zweIW.png?s=128&g=1", "display_name": "Bhargav Rao", "link": "https://stackoverflow.com/users/4099593/bhargav-rao"}, "edited": false, "score": 0, "creation_date": 1430943234, "post_id": 30086507, "comment_id": 48286503, "body": "I too disagree with the downvote but ... Henceforth 1. Explain why he should do so 2. DONT use sms language while answering 3. Have some meaningful names. Correct these 3, the downvoter will surely remove his downvote"}, {"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 1, "creation_date": 1430943690, "post_id": 30086507, "comment_id": 48286802, "body": "When you hover over the downvote button, the popup text says &quot;<i>This answer is not useful.</i>&quot; Some possible reasons: 1) you&#39;re using txt-speak, which some people find very annoying and ignorant, 2) you don&#39;t explain anything, just say &quot;<i>do this and it will work</i>&quot;, and 3) it was posted well after two other answers were, both of which explained the reason for the error and how to fix it."}, {"owner": {"reputation": 901, "user_id": 3749292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5UptT.jpg?s=128&g=1", "display_name": "Jerry Ajay", "link": "https://stackoverflow.com/users/3749292/jerry-ajay"}, "edited": false, "score": 0, "creation_date": 1430943921, "post_id": 30086507, "comment_id": 48286935, "body": "Ok. I edited my answer to be slightly more descriptive. Thanks for both your feedbacks."}], "tags": [], "owner": {"reputation": 901, "user_id": 3749292, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5UptT.jpg?s=128&g=1", "display_name": "Jerry Ajay", "link": "https://stackoverflow.com/users/3749292/jerry-ajay"}, "is_accepted": true, "score": 5, "last_activity_date": 1430943770, "last_edit_date": 1430943770, "creation_date": 1430942754, "answer_id": 30086507, "question_id": 30086384, "link": "https://stackoverflow.com/questions/30086384/python-typeerror-init-takes-exactly-2-arguments-1-given/30086507#30086507", "title": "Python: TypeError: __init__() takes exactly 2 arguments (1 given)", "body": "<p>The code you used is as follows:</p>\n\n<pre><code>player = Player()\n</code></pre>\n\n<p>This is an issue since the <code>__init__</code> must be supplied by one parameter called <code>name</code> according to your code. Therefore, to solve your issue, just supply a name to the Player constructor and you are all set:</p>\n\n<pre><code>player = Player('sdfasf')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 0, "creation_date": 1430943279, "post_id": 30086537, "comment_id": 48286534, "body": "How does this answer the question?"}, {"owner": {"reputation": 2048, "user_id": 4453200, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0RK5d.jpg?s=128&g=1", "display_name": "Tenzin", "link": "https://stackoverflow.com/users/4453200/tenzin"}, "reply_to_user": {"reputation": 89500, "user_id": 1426065, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/476e67c92121154e7910301e56cdfc4c?s=128&d=identicon&r=PG", "display_name": "MattDMo", "link": "https://stackoverflow.com/users/1426065/mattdmo"}, "edited": false, "score": 1, "creation_date": 1430943419, "post_id": 30086537, "comment_id": 48286635, "body": "It exmplains where the error &quot;__init__() takes exactly 2 arguments (1 given)?&quot; is comming from. And why it is giving that error. That was the initial question before the topic starter post got edited."}], "tags": [], "owner": {"reputation": 2048, "user_id": 4453200, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0RK5d.jpg?s=128&g=1", "display_name": "Tenzin", "link": "https://stackoverflow.com/users/4453200/tenzin"}, "is_accepted": false, "score": 0, "last_activity_date": 1430943335, "last_edit_date": 1430943335, "creation_date": 1430942845, "answer_id": 30086537, "question_id": 30086384, "link": "https://stackoverflow.com/questions/30086384/python-typeerror-init-takes-exactly-2-arguments-1-given/30086537#30086537", "title": "Python: TypeError: __init__() takes exactly 2 arguments (1 given)", "body": "<p>Your code know expects that you input something in <code>__init__</code> which you don't. <br>\nI have made a simple example below that does give you an idea where the error <code>__init__() takes exactly 2 arguments (1 given)</code> is coming from. <br> \nWhat I did is I made a definition where I give input to <code>useless</code>. <br> \nAnd I am calling that definition from <code>__init__</code>. </p>\n\n<p>Example code: </p>\n\n<pre><code>class HelloWorld():\n    def __init__(self):\n        self.useThis(1)\n    def useThis(self, useless):\n        self.useless = useless\n        print(useless)\n\n# Run class \nHelloWorld()\n</code></pre>\n\n<p>If you have a definition like <code>def exampleOne(self)</code> it doesn't expect any input. It just looks a t itself. <br> But <code>def exampleTwo(self, hello, world)</code> expects two inputs. <br>\nSo to call these two you need: </p>\n\n<pre><code>self.exampleOne()\nself.exampleTwo('input1', 'input2')\n</code></pre>\n"}], "owner": {"reputation": 399, "user_id": 2604166, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/01fce28c28a28514f7760f23ec388374?s=128&d=identicon&r=PG", "display_name": "mee", "link": "https://stackoverflow.com/users/2604166/mee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52434, "favorite_count": 0, "accepted_answer_id": 30086507, "answer_count": 4, "score": 4, "last_activity_date": 1430944642, "creation_date": 1430942315, "last_edit_date": 1495541887, "question_id": 30086384, "link": "https://stackoverflow.com/questions/30086384/python-typeerror-init-takes-exactly-2-arguments-1-given", "title": "Python: TypeError: __init__() takes exactly 2 arguments (1 given)", "body": "<p>I know this question has been asked several times, but none have managed to provide me with a solution to my issue. I read these:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/25805194/init-takes-exactly-2-arguments-1-given\">__init__() takes exactly 2 arguments (1 given)?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/24599253/class-init-takes-exactly-2-arguments-1-given\">class __init__() takes exactly 2 arguments (1 given)</a></p>\n\n<p>All I am trying to do is create two classes for a \"survival game\" much like a very crappy version of minecraft. Bellow is the full code for the two classes:</p>\n\n<pre><code>class Player:\n    '''\n    Actions directly relating to the player/character.\n    '''\n    def __init__(self, name):\n        self.name = name\n        self.health = 10\n        self.shelter = False\n\n    def eat(self, food):\n        self.food = Food\n        if (food == 'apple'):\n            Food().apple()\n\n        elif (food == 'pork'):\n            Food().pork()\n\n        elif (food == 'beef'):\n            Food().beef()\n\n        elif (food == 'stew'):\n            Food().stew()\n\nclass Food:\n    '''\n    Available foods and their properties.\n    '''\n    player = Player()\n\n    def __init__(self):\n        useless = 1\n        Amount.apple = 0\n        Amount.pork = 0\n        Amount.beef = 0\n        Amount.stew = 0\n\n    class Amount:   \n        def apple(self):\n            player.health += 10\n\n        def pork(self):\n            player.health += 20\n\n        def beef(self):\n            player.health += 30\n\n        def stew(self):\n            player.health += 25      \n</code></pre>\n\n<p>And now for the full error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File    \"/home/promitheas/Desktop/programming/python/pygame/Survive/survive_classe  s.py\", line 26, in &lt;module&gt;\n    class Food:\n  File     \"/home/promitheas/Desktop/programming/python/pygame/Survive/survive_classe    s.py\", line 30, in Food\n    player = Player()\nTypeError: __init__() takes exactly 2 arguments (1 given)\n</code></pre>\n\n<p>I just want to make the classes work. </p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 23445, "user_id": 416224, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/8dc3ac9987d21288deea853f47d8dd6e?s=128&d=identicon&r=PG&f=1", "display_name": "kay", "link": "https://stackoverflow.com/users/416224/kay"}, "is_accepted": true, "score": 0, "last_activity_date": 1430943125, "creation_date": 1430943125, "answer_id": 30086626, "question_id": 30086353, "link": "https://stackoverflow.com/questions/30086353/print-same-position-in-soccer-table-if-the-points-are-the-same/30086626#30086626", "title": "Print same position in soccer table if the points are the same", "body": "<p>Just memorize the previous team:</p>\n\n<pre><code>old_position, old_team = 0, None\nfor position, team in enumerate(teamData, 1):\n    # I use enumerate() so I can change the position variable.\n\n    if old_position and '''old_team and team compare to the same rank''':\n        position = old_position\n    else:\n        old_position, old_team = position, team\n\n    print(position, team, sep=': ')\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4495363, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/774ce9f0dd50953c1d523ad312db703a?s=128&d=identicon&r=PG&f=1", "display_name": "fnoren17", "link": "https://stackoverflow.com/users/4495363/fnoren17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 30086626, "answer_count": 1, "score": 0, "last_activity_date": 1430943125, "creation_date": 1430942207, "last_edit_date": 1430942236, "question_id": 30086353, "link": "https://stackoverflow.com/questions/30086353/print-same-position-in-soccer-table-if-the-points-are-the-same", "title": "Print same position in soccer table if the points are the same", "body": "<p>I work on a soccer table program and the user should be able to write some scores and then print a table for it. All the teams and their data (like how many matches they have played and how many points they have etc.) are objects in a list. This list is sorted by how many points the team have before it prints it out. If the points are the same, it sorts by some other stuff and last by their name: </p>\n\n<pre><code>teamData.sort(key = lambda x: (-x.points, -x.goalDifference, -x.goalsForward, x.name))\n</code></pre>\n\n<p>This works exactly like I want. When I print the list I do like this:</p>\n\n<pre><code>position = 1\nfor team in teamData:\n    print(position, end = \": \")\n    print(team)\n    position += 1\n</code></pre>\n\n<p>(<code>teamData</code> is the variable that stores all the team objects)</p>\n\n<p>the output can look like this:</p>\n\n<pre><code>    1: TeamA,1,1,0,0,2,0,2,3\n    2: TeamB,1,1,0,0,2,0,2,3\n    3: TeamC,1,0,1,1,0,0,0,1\n</code></pre>\n\n<p>The problem is that (in this case) <code>teamA</code> and <code>teamB</code> have exactly the same data, and therefore, I want the output to look like this:</p>\n\n<pre><code>    1: TeamA,1,1,0,0,2,0,2,3\n    1: TeamB,1,1,0,0,2,0,2,3\n    3: TeamC,1,0,1,1,0,0,0,1\n</code></pre>\n"}, {"tags": ["python", "numpy", "scikit-learn", "vectorization"], "comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1430942210, "post_id": 30086307, "comment_id": 48285836, "body": "Might be good to ask this on Code Review instead."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1430945588, "post_id": 30086307, "comment_id": 48287895, "body": "Without any knowledge of what <code>K</code> is, you&#39;re not going to do much better than nested loops."}, {"owner": {"reputation": 144, "user_id": 2519334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0nzRi.png?s=128&g=1", "display_name": "dimstudio", "link": "https://stackoverflow.com/users/2519334/dimstudio"}, "edited": false, "score": 0, "creation_date": 1430946032, "post_id": 30086307, "comment_id": 48288106, "body": "Unfortunately K is passed as parameter. It&#39;s sad, because it&#39;s really slow this implementation, but so far is the only one that works."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1430949676, "post_id": 30086307, "comment_id": 48289878, "body": "This is a basic <code>numpy</code> how-to question; it will get more answers here than on Code Review."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1430949925, "post_id": 30086307, "comment_id": 48290014, "body": "This has been asked before a number of times.  As long as <code>K</code> is a black-box that only takes scalars there isn&#39;t much you can do to improve the speed.  But for a start, compare the times for a typical <code>K</code> with times for the simplest possible <code>K</code>.  How much time is spent in iteration, and how time in evaluating <code>K</code> a zillion times?"}], "answers": [{"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1430945260, "post_id": 30087120, "comment_id": 48287706, "body": "What&#39;s your <code>k</code> here? I don&#39;t think applying <code>vectorize</code> this way actually preserves the original semantics."}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1430945346, "post_id": 30087120, "comment_id": 48287747, "body": "@user2357112 It&#39;s defined in the last line of the answer. It&#39;s just a scalar function (since this is what the OP seems to use)."}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1430945478, "post_id": 30087120, "comment_id": 48287828, "body": "I don&#39;t think it&#39;s supposed to be a scalar function. In the usual definition of &quot;Gram matrix&quot;, the function is an inner product."}, {"owner": {"reputation": 144, "user_id": 2519334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0nzRi.png?s=128&g=1", "display_name": "dimstudio", "link": "https://stackoverflow.com/users/2519334/dimstudio"}, "edited": false, "score": 0, "creation_date": 1430945938, "post_id": 30087120, "comment_id": 48288068, "body": "@Bakuriu Thanks. Unfortunately this doesn&#39;t work in my code  <code>gram_matrix[i] = vect(x, Y) ValueError: could not broadcast input array from shape (600,2) into shape (600)</code>"}], "tags": [], "owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "is_accepted": false, "score": 1, "last_activity_date": 1430944878, "creation_date": 1430944878, "answer_id": 30087120, "question_id": 30086307, "link": "https://stackoverflow.com/questions/30086307/efficient-element-wise-function-computation-in-python/30087120#30087120", "title": "Efficient element-wise function computation in Python", "body": "<p>You can surely at least vectorize the inner loop:</p>\n\n<pre><code>def proxy_kernel_vect(X, Y, K):\n    K_vect = np.vectorize(K)\n    gram_matrix = np.zeros((X.shape[0], Y.shape[0]))\n    for i, x in enumerate(X):\n        gram_matrix[i] = K_vect(x, Y)\n    return gram_matrix\n</code></pre>\n\n<p>This yields a nice improvement with relatively long arrays:</p>\n\n<pre><code>In [15]: a = np.array(range(1000))\n    ...: b = np.array(range(1000))\n    ...: \n\nIn [16]: %timeit proxy_kernel(a, b, k)\n1 loops, best of 3: 665 ms per loop\n\nIn [17]: %timeit proxy_kernel_vect(a, b, k)\n1 loops, best of 3: 266 ms per loop\n</code></pre>\n\n<p>where <code>k</code> is just <code>lambda x, y: x+y</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1430962235, "post_id": 30088791, "comment_id": 48293685, "body": "Given the name <code>gram_matrix</code>, I&#39;m pretty sure <code>K</code> is supposed to be a function of two vectors, not two scalars."}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "reply_to_user": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 0, "creation_date": 1431238169, "post_id": 30088791, "comment_id": 48404396, "body": "On CR he references machine learning kernel functions; But he&#39;s still unclear about the dimensions; <a href=\"http://codereview.stackexchange.com/questions/90005/efficient-element-wise-function-computation-in-python\" title=\"efficient element wise function computation in python\">codereview.stackexchange.com/questions/90005/&hellip;</a>"}, {"owner": {"reputation": 3438, "user_id": 1807163, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/93aa58bf0daa20afd1725bfcf1acdd7f?s=128&d=identicon&r=PG", "display_name": "rasen58", "link": "https://stackoverflow.com/users/1807163/rasen58"}, "edited": false, "score": 0, "creation_date": 1539296268, "post_id": 30088791, "comment_id": 92461966, "body": "Why does using vectorize give any speedup? I thought vectorize just makes the code prettier but is still just a for loop internally?"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1539304201, "post_id": 30088791, "comment_id": 92463621, "body": "I don&#39;t know in this case.  <code>vectorize</code> uses <code>frompyfunc</code>.  <code>frompyfunc</code> often tests 2x faster than an explicit loop, but <code>vectorize</code> has more overhead and often is a bit slower.  But I don&#39;t dwell too much on 2x differences eitherway.  What we want at the 10x differences that <code>np.arctan2</code> provides."}], "tags": [], "owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "is_accepted": true, "score": 1, "last_activity_date": 1431372984, "last_edit_date": 1495539823, "creation_date": 1430951303, "answer_id": 30088791, "question_id": 30086307, "link": "https://stackoverflow.com/questions/30086307/efficient-element-wise-function-computation-in-python/30088791#30088791", "title": "Efficient element-wise function computation in Python", "body": "<p><code>np.vectorize</code> does make some improvement in speed - about 2x  (here I'm using <code>math.atan2</code> as an black box function that takes 2 scalar arguments).</p>\n\n<pre><code>In [486]: X=np.linspace(0,1,100)\nIn [487]: K_vect=np.vectorize(math.atan2)\n\nIn [488]: timeit proxy_kernel(X,X,math.atan2)\n100 loops, best of 3: 7.84 ms per loop\n\nIn [489]: timeit K_vect(X[:,None],X)\n100 loops, best of 3: 3.49 ms per loop\n\nIn [502]: timeit np.arctan2(X[:,None],X)  # numpy compiled loop\n1000 loops, best of 3: 871 \u00b5s per loop\n</code></pre>\n\n<p>where</p>\n\n<pre><code>def proxy_kernel(X,Y,K):\n    gram_matrix = np.zeros((X.shape[0], Y.shape[0]))\n    for i, x in enumerate(X):\n            for j, y in enumerate(Y):\n                    gram_matrix[i, j] = K(x, y)\n    return gram_matrix\n</code></pre>\n\n<p>As long as <code>K</code> is a black box, you are limited by the time it takes to invoke <code>K</code> the <code>X.shape[0]*Y.shape[0]</code> times.  You can try to minimize the iteration time, but you are still limited by all those function calls.</p>\n\n<hr>\n\n<p><a href=\"https://stackoverflow.com/a/29733040/901925\">https://stackoverflow.com/a/29733040/901925</a> speeds up the calculation with a Gausian kernel, by taking advantage of the <code>axis</code> parameter of the <code>np.linalg.norm</code> function.</p>\n"}, {"tags": [], "owner": {"reputation": 4968, "user_id": 74342, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/97ad503773d85d025b7c2dbc498539c4?s=128&d=identicon&r=PG", "display_name": "btel", "link": "https://stackoverflow.com/users/74342/btel"}, "is_accepted": false, "score": 0, "last_activity_date": 1431377803, "creation_date": 1431377803, "answer_id": 30177500, "question_id": 30086307, "link": "https://stackoverflow.com/questions/30086307/efficient-element-wise-function-computation-in-python/30177500#30177500", "title": "Efficient element-wise function computation in Python", "body": "<p>You can also try <code>vectorize</code> decorator from <a href=\"http://numba.pydata.org/numba-doc/0.15.1/ufuncs.html\" rel=\"nofollow\">numba</a> module.</p>\n\n<p>You particular problem is easily solved using <code>vectorize</code> and numpy <a href=\"http://docs.scipy.org/doc/numpy/user/basics.broadcasting.html\" rel=\"nofollow\">broadcasting</a>:</p>\n\n<pre><code>from numba import vectorize\n\n@vectorize(['float64(float64, float64)'])\ndef K(x,y):\n    return x + y\n\na = np.arange(1000)\nb = np.arange(1000)\n\ngram_array = K(a[None,:], b[:, None])\n</code></pre>\n"}], "owner": {"reputation": 144, "user_id": 2519334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0nzRi.png?s=128&g=1", "display_name": "dimstudio", "link": "https://stackoverflow.com/users/2519334/dimstudio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1560, "favorite_count": 1, "accepted_answer_id": 30088791, "answer_count": 3, "score": 1, "last_activity_date": 1431377803, "creation_date": 1430942064, "last_edit_date": 1431376561, "question_id": 30086307, "link": "https://stackoverflow.com/questions/30086307/efficient-element-wise-function-computation-in-python", "title": "Efficient element-wise function computation in Python", "body": "<p>I have the following optimization problem. Given two np.arrays <code>X</code>,<code>Y</code> and a function <code>K</code> I would like to compute as fast as possible the matrix incidence gram_matrix where the <code>(i,j)-th</code> element is computed as <code>K(X[i],Y[j])</code>. </p>\n\n<p>Here there an implementation using nested for-loops, which are acknowledged to be the slowest to solve these kind of problems.</p>\n\n<pre><code>def proxy_kernel(X,Y,K):\n    gram_matrix = np.zeros((X.shape[0], Y.shape[0]))\n    for i, x in enumerate(X):\n        for j, y in enumerate(Y):\n            gram_matrix[i, j] = K(x, y)\n    return gram_matrix\n</code></pre>\n\n<p>Any help is truly appreciated. </p>\n"}, {"tags": ["python", "pygame", "python-imaging-library"], "comments": [{"owner": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "edited": false, "score": 0, "creation_date": 1431004362, "post_id": 30086127, "comment_id": 48315504, "body": "You should add what O.S. you are using (windows/linux/os x) - anyway, I think you way out will be reporting this as a bug against pygame itself."}, {"owner": {"reputation": 391, "user_id": 4872099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fb364272966c092f667b6e280ad1aa2?s=128&d=identicon&r=PG&f=1", "display_name": "harandk", "link": "https://stackoverflow.com/users/4872099/harandk"}, "reply_to_user": {"reputation": 76206, "user_id": 108205, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ef459127edc89cc575d80a73cd8c567a?s=128&d=identicon&r=PG", "display_name": "jsbueno", "link": "https://stackoverflow.com/users/108205/jsbueno"}, "edited": false, "score": 1, "creation_date": 1431364125, "post_id": 30086127, "comment_id": 48453284, "body": "I have sent a but report on this issue. In the meantime I tried a workaround by using a bitmap font, which works quite well."}], "owner": {"reputation": 391, "user_id": 4872099, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6fb364272966c092f667b6e280ad1aa2?s=128&d=identicon&r=PG&f=1", "display_name": "harandk", "link": "https://stackoverflow.com/users/4872099/harandk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1600473382, "creation_date": 1430941425, "last_edit_date": 1431016754, "question_id": 30086127, "link": "https://stackoverflow.com/questions/30086127/pygame-headless-no-font", "title": "pygame headless no font", "body": "<p>When I'm in pygame headless mode with </p>\n\n<pre><code>os.environ[\"SDL_VIDEODRIVER\"] = \"dummy\"\n</code></pre>\n\n<p>the surface has no rendered fonts, only black filled rectangles. (I only tried it on a linux pc.)</p>\n\n<p>when I turn off headless mode everything works perfectly.</p>\n\n<p>Code:</p>\n\n<pre><code>self.screen = pygame.display.set_mode((self.WIDTH, self.HEIGHT))\n.....drawing on the surface.....\n...\ndata = pygame.image.tostring(self.screen, 'RGB')\nimg = Image.fromstring('RGB', (128,64), data).convert()\nimg.show()\nimg.save('./img/out.png')\n</code></pre>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["python", "variable-assignment"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 1, "creation_date": 1430941177, "post_id": 30086020, "comment_id": 48285174, "body": "your function has 3 parameters defined, but when you call it, you&#39;re only passing in ONE argument, so <code>ABC</code> gets assigned to <code>a</code> in the function, and b,c are left undefined."}, {"owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "edited": false, "score": 1, "creation_date": 1430941391, "post_id": 30086020, "comment_id": 48285302, "body": "For fun, try <code>function2(*&quot;ABC&quot;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "is_accepted": false, "score": 9, "last_activity_date": 1430942298, "last_edit_date": 1430942298, "creation_date": 1430941236, "answer_id": 30086070, "question_id": 30086020, "link": "https://stackoverflow.com/questions/30086020/what-is-the-different-between-assignment-and-parameter-passing/30086070#30086070", "title": "What is the different between assignment and parameter passing?", "body": "<p>The compiler sees a comma-separated list on the LHS and emits bytecode to iterate over the RHS for you. With the function call it sees a single value and so sends it as a single argument. You need to tell it to split the sequence explicitly:</p>\n\n<pre><code>&gt;&gt;&gt; function2(*\"ABC\")\nA\nB\nC\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 108, "user_id": 4867781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l6QC8.jpg?s=128&g=1", "display_name": "The_Guy", "link": "https://stackoverflow.com/users/4867781/the-guy"}, "is_accepted": false, "score": 0, "last_activity_date": 1430941357, "creation_date": 1430941357, "answer_id": 30086105, "question_id": 30086020, "link": "https://stackoverflow.com/questions/30086020/what-is-the-different-between-assignment-and-parameter-passing/30086105#30086105", "title": "What is the different between assignment and parameter passing?", "body": "<p>The function you created takes 3 parameters a, b, and c. But when you're calling the function you only provide one parameter.</p>\n\n<p>To correctly call your function, you would need to do something like</p>\n\n<pre><code>function2(\"A\",\"B\",\"C\")\n</code></pre>\n\n<p>and it would print\n    A\n    B\n    C</p>\n"}, {"comments": [{"owner": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 1, "creation_date": 1430942079, "post_id": 30086220, "comment_id": 48285746, "body": "I think you mean &quot;Python opts for the first choice&quot;."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "reply_to_user": {"reputation": 209114, "user_id": 1427416, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/QWHKg.png?s=128&g=1", "display_name": "BrenBarn", "link": "https://stackoverflow.com/users/1427416/brenbarn"}, "edited": false, "score": 0, "creation_date": 1430943081, "post_id": 30086220, "comment_id": 48286413, "body": "I originally had the two choices reversed, and forgot to update that sentence."}], "tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 0, "last_activity_date": 1430943058, "last_edit_date": 1430943058, "creation_date": 1430941805, "answer_id": 30086220, "question_id": 30086020, "link": "https://stackoverflow.com/questions/30086020/what-is-the-different-between-assignment-and-parameter-passing/30086220#30086220", "title": "What is the different between assignment and parameter passing?", "body": "<p>Functions can have optional parameters, specified as parameters with default argument values. Consider the function</p>\n\n<pre><code>def function2(a, b=None, c=None):\n   print a\n   print b\n   print c\n</code></pre>\n\n<p>Which of the following should <code>function2(\"ABC\")</code> output?</p>\n\n<pre><code>ABC\nNone\nNone\n</code></pre>\n\n<p>or</p>\n\n<pre><code>A\nB\nC\n</code></pre>\n\n<p>Python opts for the first choice, instead of examining whether some of the parameters have default values, where an iterable value is treated as a single value for argument passing, and the special syntax</p>\n\n<pre><code>function2(*\"ABC\")\n</code></pre>\n\n<p>provides the second.</p>\n"}, {"tags": [], "owner": {"reputation": 662, "user_id": 3998520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d77a6e0a246452554f23ba41d0245bf?s=128&d=identicon&r=PG&f=1", "display_name": "Matthew", "link": "https://stackoverflow.com/users/3998520/matthew"}, "is_accepted": false, "score": 0, "last_activity_date": 1430942153, "creation_date": 1430942153, "answer_id": 30086333, "question_id": 30086020, "link": "https://stackoverflow.com/questions/30086020/what-is-the-different-between-assignment-and-parameter-passing/30086333#30086333", "title": "What is the different between assignment and parameter passing?", "body": "<p>Since no one's mentioned this yet, the <code>a, b, c = \"ABC\"</code> assigns a = \"A\", b = \"B\" and c = \"C\" as a string also functions as an iterator of sorts, that is, you can loop over it, check for characters in it just like checking elements of a list etc etc.</p>\n\n<p>It's similar to the code</p>\n\n<pre><code>a, b = 1, 2\n</code></pre>\n\n<p>Python interprets that as </p>\n\n<pre><code>(a, b) = (1, 2)\n</code></pre>\n\n<p>and the compiler detects 2 variables and so makes 2 assignments. When you pass 3 to a length 3 string, it works the same:</p>\n\n<pre><code>(a, b, c) = (\"A\", \"B\", \"C\")\n</code></pre>\n\n<p>However, as the others have said, in a function parameter passing, <code>function2(a, b, c)</code> must take 3 arguments, and \"ABC\" is only one object: a string, and so assigns <code>a = \"ABC\"</code> and then raises and error on <code>b</code> and <code>c</code>. To get the same behavior as <code>a, b, c = (\"A\", \"B\", \"C\")</code>, you parse it with a <code>*</code>, that is</p>\n\n<pre><code>function2(*\"ABC\") # is the same as function2(\"A\", \"B\", \"C\")\n</code></pre>\n\n<p>The <code>*</code> parser works for any iterable: lists, (strings), dict (keys) etc</p>\n"}], "owner": {"reputation": 261, "user_id": 4014471, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11dd32945cca987dc57d50ded05c44e5?s=128&d=identicon&r=PG&f=1", "display_name": "samba", "link": "https://stackoverflow.com/users/4014471/samba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1430943058, "creation_date": 1430941100, "last_edit_date": 1430942980, "question_id": 30086020, "link": "https://stackoverflow.com/questions/30086020/what-is-the-different-between-assignment-and-parameter-passing", "title": "What is the different between assignment and parameter passing?", "body": "<p>I can assign a sequence like this in python: </p>\n\n<pre><code>a,b,c=\"ABC\"\n</code></pre>\n\n<p>But I am unable to pass this sequence to a function as a parameter. i.e </p>\n\n<pre><code>def function2(a,b,c):\n    print a\n    print b\n    print c\nfunction2(\"ABC\")\n</code></pre>\n\n<p>The above statement is raising an error.</p>\n\n<p>Can any one tell me the difference between assignment and argument passing in python?</p>\n"}, {"tags": ["python", "theano"], "answers": [{"comments": [{"owner": {"reputation": 3608, "user_id": 887074, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/da9c9afc19776841b62f8980a40c02ec?s=128&d=identicon&r=PG", "display_name": "Erotemic", "link": "https://stackoverflow.com/users/887074/erotemic"}, "edited": false, "score": 0, "creation_date": 1431445264, "post_id": 30157136, "comment_id": 48496241, "body": "This is just a dummy example. I&#39;m trying to make sure that the values are within a specific range. I&#39;m not going to have these enabled permanently. I guess using a separate function is an ok workaround."}], "tags": [], "owner": {"reputation": 1579, "user_id": 3979919, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/H11F1.jpg?s=128&g=1", "display_name": "Nima Mousavi", "link": "https://stackoverflow.com/users/3979919/nima-mousavi"}, "is_accepted": false, "score": 1, "last_activity_date": 1431295489, "creation_date": 1431295489, "answer_id": 30157136, "question_id": 30085991, "link": "https://stackoverflow.com/questions/30085991/how-do-i-print-the-value-of-a-theano-variable-whenever-it-is-evaluated/30157136#30157136", "title": "How do I print the value of a theano variable whenever it is evaluated?", "body": "<p>Unfortunately I can't help you with the printing approach since\nI have never used the print myself. But.. wouldn't it\nbe possible to return G together with the ave_loss.\nThen you can look at the contents...</p>\n\n<p>something like: </p>\n\n<pre><code>def loss_function(self, G, Y_):\n    ...\n    G = dbgfunc()\n    ...\n    return ave_loss, G\n\n\nG = T.matrix('G') \nY_ = T.matrix('Y')\n\nave_loss, G_prime = loss_function(G, Y_)\n\nf = function([G, _Y], [ave_loss, G_prime])\n\nprint( f(...) )\n</code></pre>\n\n<p>EDIT:</p>\n\n<p>I just saw that the contents of <strong>G</strong> don't seem to be changing.\nWhy do you want to print it anyways. Since the print also prevents\nTheano from some optimisations if I remember correctly.</p>\n"}], "owner": {"reputation": 3608, "user_id": 887074, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/da9c9afc19776841b62f8980a40c02ec?s=128&d=identicon&r=PG", "display_name": "Erotemic", "link": "https://stackoverflow.com/users/887074/erotemic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1431295489, "creation_date": 1430941011, "question_id": 30085991, "link": "https://stackoverflow.com/questions/30085991/how-do-i-print-the-value-of-a-theano-variable-whenever-it-is-evaluated", "title": "How do I print the value of a theano variable whenever it is evaluated?", "body": "<p>I'm using lasagne and theano to build a convolutional neural network, and I'm having issues trying to follow the printdebugging examples in <a href=\"http://deeplearning.net/software/theano/tutorial/debug_faq.html#how-do-i-step-through-a-compiled-function\" rel=\"nofollow\">http://deeplearning.net/software/theano/tutorial/debug_faq.html#how-do-i-step-through-a-compiled-function</a></p>\n\n<p>My function looks like this with G and Y being theano tensors</p>\n\n<pre><code>def loss_function(self, G, Y_):\n    # Split batch into pairs\n    G1, G2 = G[0::2], G[1::2]\n    Y = Y_[:G.shape[0] // 2]\n    # Energy of training pairs\n    E = T.abs_((G1 - G2)).sum(axis=1)\n    Q = 2\n    genuine_loss = (1 - Y) * (2 / Q) * (E ** 2)\n    imposter_loss = (Y) * 2 * Q * T.exp((-2.77 * E) / Q)\n    loss = genuine_loss + imposter_loss\n    avg_loss = T.mean(loss)\n    return ave_loss\n</code></pre>\n\n<p>so the output ave_loss should be a symbolic expression that when compiled and executed with input data will result in computing the average loss over a batch of training images. </p>\n\n<p>What I want to do is put a symbolic print expression in here so that whenever the ave_loss is computed it prints the contents of G. </p>\n\n<p>But right now I'm stuck just trying to get something to print before and after </p>\n\n<pre><code>def loss_function(self, G, Y_):\n\n    # Inject a symbolic expression to print something before and after G is used. \n\n    def pre_func(i, node, fn):\n        print('Before')\n\n    def post_func(i, node, fn):\n        print('After')\n\n    dbgfunc = theano.function([G], [G],\n                              mode=theano.compile.MonitorMode(\n                                  pre_func=pre_func,\n                                  post_func=post_func))\n    G = dbgfunc()\n\n    # Split batch into pairs\n    G1, G2 = G[0::2], G[1::2]\n    Y = Y_[:G.shape[0] // 2]\n    # Energy of training pairs\n    E = T.abs_((G1 - G2)).sum(axis=1)\n    Q = 2\n    genuine_loss = (1 - Y) * (2 / Q) * (E ** 2)\n    imposter_loss = (Y) * 2 * Q * T.exp((-2.77 * E) / Q)\n    loss = genuine_loss + imposter_loss\n    avg_loss = T.mean(loss)\n    return ave_loss\n</code></pre>\n\n<p>The above code does not work, and I'm not really sure how to manipulate theano.function to make it work. </p>\n\n<p>What I'm attempting to do is create an identity function that accepts G and returns G without modifying it, but prints pre_func and post_func along the way. </p>\n\n<p>How to you use theano.function (or theano.printing.Print) to acomplish this?</p>\n"}, {"tags": ["python", "tkinter", "loading", "typeerror"], "comments": [{"owner": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1430941320, "post_id": 30085950, "comment_id": 48285251, "body": "<code>command=self.load_user</code> calls <code>self.load_user()</code> when called. It needs an argument. <code>command=(lambda u=username: self.load_user(u))</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4867808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a4e8374b4078ff7257080b52543a1e?s=128&d=identicon&r=PG&f=1", "display_name": "4lph", "link": "https://stackoverflow.com/users/4867808/4lph"}, "edited": false, "score": 0, "creation_date": 1430941266, "post_id": 30086043, "comment_id": 48285221, "body": "If I pass it an argument, it executes the callback function on startup, as opposed to only doing so when the button is pressed."}, {"owner": {"reputation": 161, "user_id": 4100881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84629e15a8aec93dfc32ce1e7fa88869?s=128&d=identicon&r=PG&f=1", "display_name": "davissandefur", "link": "https://stackoverflow.com/users/4100881/davissandefur"}, "reply_to_user": {"reputation": 11, "user_id": 4867808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a4e8374b4078ff7257080b52543a1e?s=128&d=identicon&r=PG&f=1", "display_name": "4lph", "link": "https://stackoverflow.com/users/4867808/4lph"}, "edited": false, "score": 0, "creation_date": 1430941425, "post_id": 30086043, "comment_id": 48285320, "body": "Use a lambda expression"}], "tags": [], "owner": {"reputation": 161, "user_id": 4100881, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84629e15a8aec93dfc32ce1e7fa88869?s=128&d=identicon&r=PG&f=1", "display_name": "davissandefur", "link": "https://stackoverflow.com/users/4100881/davissandefur"}, "is_accepted": false, "score": 0, "last_activity_date": 1430941163, "creation_date": 1430941163, "answer_id": 30086043, "question_id": 30085950, "link": "https://stackoverflow.com/questions/30085950/tkinter-button-callback-missing-an-argument-that-it-contains/30086043#30086043", "title": "Tkinter button callback missing an argument that it contains", "body": "<pre><code> command=self.load_user\n</code></pre>\n\n<p>Is your callback, but you're not passing any arguments to the function, even though it requires one.</p>\n"}, {"comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 2, "creation_date": 1430941425, "post_id": 30086102, "comment_id": 48285322, "body": "The second variation is preferable IMO. It&#39;s pointless to pass information to a routine that the routine has easy access to."}, {"owner": {"reputation": 11, "user_id": 4867808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a4e8374b4078ff7257080b52543a1e?s=128&d=identicon&r=PG&f=1", "display_name": "4lph", "link": "https://stackoverflow.com/users/4867808/4lph"}, "edited": false, "score": 0, "creation_date": 1430941725, "post_id": 30086102, "comment_id": 48285520, "body": "&quot;name &#39;username&#39; is parameter and global&quot; Error when declaring it global inside load_user, so I may use the lambda instead. Thanks!"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 0, "creation_date": 1430941829, "post_id": 30086102, "comment_id": 48285583, "body": "Did you remove the <code>username</code> parameter from the function definition?"}, {"owner": {"reputation": 11, "user_id": 4867808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a4e8374b4078ff7257080b52543a1e?s=128&d=identicon&r=PG&f=1", "display_name": "4lph", "link": "https://stackoverflow.com/users/4867808/4lph"}, "edited": false, "score": 0, "creation_date": 1430941898, "post_id": 30086102, "comment_id": 48285624, "body": "Ah I see, I didn&#39;t. Works perfectly now, thanks again."}], "tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": true, "score": 3, "last_activity_date": 1430941352, "creation_date": 1430941352, "answer_id": 30086102, "question_id": 30085950, "link": "https://stackoverflow.com/questions/30085950/tkinter-button-callback-missing-an-argument-that-it-contains/30086102#30086102", "title": "Tkinter button callback missing an argument that it contains", "body": "<p>The function has actually not been passed the username by the user. Your following code:</p>\n\n<pre><code>load_game = Button(master, text=\"Load Game\",\n                   fg=\"black\",command=self.load_user)\n</code></pre>\n\n<p>basically calls <code>self.load_user()</code> - with no arguments - when the <code>load_game</code> button is clicked. You can fix this in two ways:</p>\n\n<ol>\n<li>Turn the <code>command</code> into a <code>lambda</code> function:</li>\n</ol>\n\n<hr>\n\n<pre><code>load_game = Button(master, text=\"Load Game\",\n                   fg=\"black\",command=lambda: self.load_user(username.get()))\n</code></pre>\n\n<ol start=\"2\">\n<li>Eliminate the function's <code>username</code> parameter and simply have it access that global variable:</li>\n</ol>\n\n<hr>\n\n<pre><code>def load_user(self):\n        print(\"...\")\n        global username\n        jj = open(\"data_\"+str(username.get())+\".txt\",\"r\")\n        ...\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4867808, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a4e8374b4078ff7257080b52543a1e?s=128&d=identicon&r=PG&f=1", "display_name": "4lph", "link": "https://stackoverflow.com/users/4867808/4lph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 533, "favorite_count": 0, "closed_date": 1430941527, "accepted_answer_id": 30086102, "answer_count": 2, "score": -1, "last_activity_date": 1430941352, "creation_date": 1430940868, "last_edit_date": 1430941349, "question_id": 30085950, "link": "https://stackoverflow.com/questions/30085950/tkinter-button-callback-missing-an-argument-that-it-contains", "closed_reason": "Duplicate", "title": "Tkinter button callback missing an argument that it contains", "body": "<p>In an attempt to make a program that takes a username and password given by the user and then loads that document, I've encountered an odd error\n    <code>load_user() missing 1 required positional argument: 'username'</code> but it has been passed this by the user. I'll include the full code below, but the area where the issue may lie is the unfinished load function, I think:</p>\n\n<pre><code>def load_user(self,username):\n    print(\"...\")\n    jj = open(\"data_\"+str(username)+\".txt\",\"r\")\n    lines = jj.readlines()\n    user = str(lines[2])\n    passw = str(lines[4])\n    print(\"...\")\n    if password == passw:\n        print(\"Loaded save of \"+user)\n</code></pre>\n\n<p>Like I say, the entire body of the class is included below just in case it is an issue in another area. </p>\n\n<p>All help is appreciated, thanks!</p>\n\n<p><strong>EDIT:</strong> To clarify, I need the command to execute when the button is pressed, so passing self.load_user(...) doesn't work, as it executes when Tkinter opens.</p>\n\n<pre><code>from tkinter import *\nget = 0\n\nclass Menu_F:\n    def __init__(self,master):\n\n        frame = Frame(master)\n        frame.grid()\n\n        title_username = Label(master, text=\"User Name\")\n        title_username.grid(row=0, column=0)\n\n        title_password = Label(master, text=\"Password\")\n        title_password.grid(row=1, column=0)\n\n        global username\n        username = Entry(master, bd=5)\n        username.grid(row=0, column=1)\n\n        global password\n        password = Entry(master, bd=5, show=\"*\")\n        password.grid(row=1, column=1)\n\n        load_game = Button(master, text=\"Load Game\",\n                           fg=\"black\",command=self.load_user)\n        load_game.grid(row=3, column=1)\n\n        new_game = Button(master, text=\"New Game\",\n                          fg=\"black\",command=self.new_user)\n        new_game.grid(row=3, column=0)\n\n        confirm_username = Button(master, text=\"Done\",\n                                  fg=\"black\",command=self.get_username)\n        confirm_username.grid(row=0, column=2)\n\n        confirm_password = Button(master, text=\"Done\",\n                                  fg=\"black\",command=self.get_password)\n        confirm_password.grid(row=1, column=2)\n\n    def get_username(self):\n        get = 1\n        global username\n        username = username.get()\n        print(\"Username is: \"+username)\n\n    def get_password(self):\n        global password\n        password = password.get()\n        print(\"Password is: \"+password)\n\n    def load_user(self,username):\n        print(\"...\")\n        jj = open(\"data_\"+str(username)+\".txt\",\"r\")\n        lines = jj.readlines()\n        user = str(lines[2])\n        passw = str(lines[4])\n        print(\"...\")\n        if password == passw:\n            print(\"Loaded save of \"+user)\n\n    def save_user(self,username,password,progress):\n        ss = open(\"data_\"+str(username)+\".txt\",\"w\")\n        ss.write(\"\"\"_-_-_\n-_-_-\n\"\"\"+str(username)+\"\"\"\n_-_-_\n\"\"\"+str(password)+\"\"\"\n-_-_-\n\"\"\"+int(progress))\n\n    def new_user(self,username,password):\n        nn = open(\"data_\"+str(username)+\".txt\",\"w\")\n        nn.write(\"\"\"_-_-_\n-_-_-\n\"\"\"+str(username)+\"\"\"\n_-_-_\n\"\"\"+str(password)+\"\"\"\n-_-_-\n0\"\"\")\n\nroot = Tk()\nroot.resizable(width=FALSE, height=FALSE)\napp = Menu_F(root)\nmainloop()\n</code></pre>\n"}, {"tags": ["python", "unicode", "sqlite"], "comments": [{"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 0, "creation_date": 1430940476, "post_id": 30085815, "comment_id": 48284783, "body": "Both lists are exactly the same."}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "edited": false, "score": 1, "creation_date": 1430940499, "post_id": 30085815, "comment_id": 48284799, "body": "Also, <code>line = u&#39;73::Mis&#233;rables, Les&#39;</code>."}, {"owner": {"reputation": 15260, "user_id": 1968182, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/E5nF2.jpg?s=128&g=1", "display_name": "Ulrich Eckhardt", "link": "https://stackoverflow.com/users/1968182/ulrich-eckhardt"}, "edited": false, "score": 0, "creation_date": 1430940654, "post_id": 30085815, "comment_id": 48284907, "body": "Why are you using the ancient Python 2? A bunch of things changed for the better with Python 3, where strings are by default Unicode-capable, for example."}, {"owner": {"reputation": 21, "user_id": 4872000, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tu22j8s6_rA/AAAAAAAAAAI/AAAAAAAAAaw/ZS79miILsNw/photo.jpg?sz=128", "display_name": "jslu", "link": "https://stackoverflow.com/users/4872000/jslu"}, "edited": false, "score": 0, "creation_date": 1430940677, "post_id": 30085815, "comment_id": 48284926, "body": "Shouldn&#39;t the SQL INSERT statement be: INSERT INTO movie Values (73,&#39;Mis&#233;rables, Les&#39;) and not INSERT INTO movie Values (73,&#39;Mis\\xe9rables, Les&#39;)"}, {"owner": {"reputation": 2830, "user_id": 2109512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z89zA.png?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/2109512/paul"}, "edited": false, "score": 0, "creation_date": 1430940680, "post_id": 30085815, "comment_id": 48284927, "body": "<a href=\"https://docs.python.org/3.4/library/sqlite3.html\" rel=\"nofollow noreferrer\">docs.python.org/3.4/library/sqlite3.html</a> has some information about this.  search for text_factory."}], "answers": [{"tags": [], "owner": {"reputation": 142870, "user_id": 8747, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b1ee0402d24625f555c25ea8511aad31?s=128&d=identicon&r=PG", "display_name": "Rob\u1d69", "link": "https://stackoverflow.com/users/8747/rob%e1%b5%a9"}, "is_accepted": false, "score": 0, "last_activity_date": 1430955677, "last_edit_date": 1430955677, "creation_date": 1430950891, "answer_id": 30088701, "question_id": 30085815, "link": "https://stackoverflow.com/questions/30085815/inserting-unicode-into-sqlite3/30088701#30088701", "title": "Inserting UNICODE into sqlite3", "body": "<p>Your program inserts data into the db perfectly. It subsequently retrieves the correct data. Your problem is when you display the result.</p>\n\n<p>When you print a tuple, the system displays the <code>repr()</code> of each item, not the <code>str()</code> of each item. Thus you see <code>\\xe9</code> instead of <code>\u00e9</code> in the output.</p>\n\n<p>To get what you want, try replacing the loop at the end of your program:</p>\n\n<pre><code>for record in cur:\n    print record[0], record[1]\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4872000, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tu22j8s6_rA/AAAAAAAAAAI/AAAAAAAAAaw/ZS79miILsNw/photo.jpg?sz=128", "display_name": "jslu", "link": "https://stackoverflow.com/users/4872000/jslu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 308, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1430955677, "creation_date": 1430940367, "question_id": 30085815, "link": "https://stackoverflow.com/questions/30085815/inserting-unicode-into-sqlite3", "title": "Inserting UNICODE into sqlite3", "body": "<p>I am trying to read a file, parse the data using python 2.7, and import the data into sqlite3. However, I'm running into a problem when inserting the data. After I parse a line from the file, the \u00e9 in my string is replaced with \\xe9. After I split the line from my file, I want a list that contains [73,'Mis\u00e9rables, Les'] but instead I'm getting [73,'Mis\\xe9rables, Les'] which is screwing up the SQL INSERT statement. How can I fix this? </p>\n\n<pre><code>#!/usr/bin/python\n# -*- coding: latin-1 -*-\nimport sqlite3\nline = '73::Mis\u00e9rables, Les'.decode('latin-1')\nvals = line.split(\"::\")\n\ncon = sqlite3.connect('myDb.db')\ncur = con.cursor()\ncur.execute(\"DROP TABLE IF EXISTS movie\")\ncur.execute('CREATE TABLE movie (id INT, title TEXT)')\nsql = 'INSERT INTO movie VALUES (?,?)'\ncur.execute(sql,tuple(vals))\n\ncur.execute('SELECT * FROM movie')\nfor record in cur:\n    print record\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 3, "creation_date": 1430940284, "post_id": 30085781, "comment_id": 48284673, "body": "Please post raw data, code, pandas, numpy and python version, thanks"}, {"owner": {"reputation": 12269, "user_id": 916907, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cdbc1ee25fbf94cebfafba312de489ee?s=128&d=identicon&r=PG", "display_name": "Dun Peal", "link": "https://stackoverflow.com/users/916907/dun-peal"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1430942873, "post_id": 30085781, "comment_id": 48286279, "body": "@EdChum: I dove into the code and apparently there&#39;s a line that simply reassigns the index: <code>some_df[&#39;some_column] = some_series</code>. How broken is this?"}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1430942948, "post_id": 30085781, "comment_id": 48286325, "body": "Sorry I&#39;m assuming this is <i>your</i> code as opposed to some bug in pandas?"}, {"owner": {"reputation": 12269, "user_id": 916907, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cdbc1ee25fbf94cebfafba312de489ee?s=128&d=identicon&r=PG", "display_name": "Dun Peal", "link": "https://stackoverflow.com/users/916907/dun-peal"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1430943070, "post_id": 30085781, "comment_id": 48286403, "body": "@EdChum: yup, it is 3rd party code doing this reassignment, not pandas code. I&#39;m just wondering how correct it is, how likely it is to cause problems, etc."}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1430943264, "post_id": 30085781, "comment_id": 48286526, "body": "Well it depends, I tried assigning a series which had a float index to a df column which had an int index and the index remained untouched, you still need to post raw input data and minimum code and library versions, otherwise no one can verify that they are seeing the same as what you&#39;re seeing"}, {"owner": {"reputation": 12269, "user_id": 916907, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cdbc1ee25fbf94cebfafba312de489ee?s=128&d=identicon&r=PG", "display_name": "Dun Peal", "link": "https://stackoverflow.com/users/916907/dun-peal"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1430947353, "post_id": 30085781, "comment_id": 48288744, "body": "@EdChum: thanks, I was mostly looking for design-level advice - whether reassigning indices on columns in a <code>DataFrame</code> is an anti-pattern that must be avoided. I think you thought I was looking for a bug in Pandas, or whether this behavior can cause a bug."}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1430947527, "post_id": 30085781, "comment_id": 48288830, "body": "But what you posted was assignment to a column with another column/series this should not overwrite the index, if you overwrite the index that still should not cause a problem but you&#39;re not showing this in your code snippets"}, {"owner": {"reputation": 12269, "user_id": 916907, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cdbc1ee25fbf94cebfafba312de489ee?s=128&d=identicon&r=PG", "display_name": "Dun Peal", "link": "https://stackoverflow.com/users/916907/dun-peal"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1430947797, "post_id": 30085781, "comment_id": 48288967, "body": "@EdChum: woops!  See correction, it&#39;s <code>some_df[&#39;some_column].index = some_df[&#39;another_column&#39;]</code>, i.e. reassignment of the index, not the entire series. I can&#39;t edit my comment since that time window has elapsed."}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 0, "creation_date": 1430947934, "post_id": 30085781, "comment_id": 48289041, "body": "Well that does nothing on pandas <code>0.16.0</code>, but <code>some_df.index = some_df[&#39;&#39;another_column&#39;]</code> will overwrite it"}], "answers": [{"tags": [], "owner": {"reputation": 287228, "user_id": 1240268, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/RN9Mw.jpg?s=128&g=1", "display_name": "Andy Hayden", "link": "https://stackoverflow.com/users/1240268/andy-hayden"}, "is_accepted": false, "score": 0, "last_activity_date": 1430950216, "creation_date": 1430950216, "answer_id": 30088540, "question_id": 30085781, "link": "https://stackoverflow.com/questions/30085781/column-extracted-from-dataframe-has-a-different-index/30088540#30088540", "title": "Column extracted from DataFrame has a different index", "body": "<p>It's unclear whether this is a bug, though perhaps assigning to the Series index should raise (it may be quite tricky to get this behaviour)... You should definitely not be doing this!</p>\n\n<p>To confirm that this is indeed the case:</p>\n\n<pre><code>In [11]: df = pd.DataFrame([[1, 2], [3, 4]], columns=['A', 'B'])\n\nIn [12]: df\nOut[12]:\n   A  B\n0  1  2\n1  3  4\n\nIn [13]: df['A'].index\nOut[13]: Int64Index([0, 1], dtype='int64')\n\nIn [14]: df['A'].index = [7., 8.]\n\nIn [15]: df['A'].index\nOut[15]: Float64Index([7.0, 8.0], dtype='float64')\n\nIn [16]: df\nOut[16]:\n   A  B\n0  1  2\n1  3  4\n</code></pre>\n\n<p>So whilst this is apparently valid, you're going to get some surprising (potentially undefined) behaviour... </p>\n\n<p>For example:</p>\n\n<pre><code>In [21]: df.groupby(\"A\").sum()\nOut[21]:\nEmpty DataFrame\nColumns: [B]\nIndex: []\n</code></pre>\n"}], "owner": {"reputation": 12269, "user_id": 916907, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/cdbc1ee25fbf94cebfafba312de489ee?s=128&d=identicon&r=PG", "display_name": "Dun Peal", "link": "https://stackoverflow.com/users/916907/dun-peal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1430950216, "creation_date": 1430940199, "last_edit_date": 1430947724, "question_id": 30085781, "link": "https://stackoverflow.com/questions/30085781/column-extracted-from-dataframe-has-a-different-index", "title": "Column extracted from DataFrame has a different index", "body": "<p>I'm encountering the following situation:</p>\n\n<pre><code>some_df.index                 #=&gt; Int64Index([0, 1], dtype='int64')\nsome_df['some_column'].index  #=&gt; Float64Index([7.0, 5.0], dtype='object')\n</code></pre>\n\n<p>Why is this happening?  Does this mean there was something wrong in the way <code>some_df</code> was constructed?  Finally, what's the best way to ensure that columns I extract from <code>some_df</code> all use the same index as <code>some_df</code> itself?</p>\n\n<p>EDIT: I dove deeper into the code and apparently there's a line that simply reassigns the index: <code>some_df['some_column].index = some_df['another_column']</code>. How broken is this?</p>\n"}, {"tags": ["python", "nlp", "nltk"], "comments": [{"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 4, "creation_date": 1430940054, "post_id": 30085694, "comment_id": 48284524, "body": "anything wrong with <code>&#39; &#39;.join(words).split(&#39; &#39;)</code>?"}, {"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "reply_to_user": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "edited": false, "score": 1, "creation_date": 1430940155, "post_id": 30085694, "comment_id": 48284600, "body": "@EdChum thats a pretty good answer i think"}, {"owner": {"reputation": 745, "user_id": 3075562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba8e36f8b2ba52c2e976c5c00f5f720f?s=128&d=identicon&r=PG&f=1", "display_name": "qwattash", "link": "https://stackoverflow.com/users/3075562/qwattash"}, "edited": false, "score": 0, "creation_date": 1430940342, "post_id": 30085694, "comment_id": 48284705, "body": "The only other solution I can think of is tokenize each item separately and joining back the results. I think your solution is better."}], "answers": [{"comments": [{"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "reply_to_user": {"reputation": 39811, "user_id": 1322401, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/JlaPg.jpg?s=128&g=1", "display_name": "Steven Rumbalski", "link": "https://stackoverflow.com/users/1322401/steven-rumbalski"}, "edited": false, "score": 0, "creation_date": 1430941426, "post_id": 30085746, "comment_id": 48285324, "body": "You have a good point: in my version, <code>word</code> might not actually be a word. I&#39;ll change it."}], "tags": [], "owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "is_accepted": false, "score": 10, "last_activity_date": 1430941525, "last_edit_date": 1430941525, "creation_date": 1430940074, "answer_id": 30085746, "question_id": 30085694, "link": "https://stackoverflow.com/questions/30085694/python-convert-list-of-multiple-words-to-single-words/30085746#30085746", "title": "Python convert list of multiple words to single words", "body": "<pre><code>words = ['one','two','three four','five','six seven']\n</code></pre>\n\n<p>With a loop:</p>\n\n<pre><code>words_result = []\nfor item in words:\n    for word in item.split():\n        words_result.append(word)\n</code></pre>\n\n<p>or as a comprehension:</p>\n\n<pre><code>words = [word for item in words for word in item.split()]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1493, "user_id": 4793408, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fb7d7edb54e267a249a656c94451a3cb?s=128&d=identicon&r=PG&f=1", "display_name": "GNMO11", "link": "https://stackoverflow.com/users/4793408/gnmo11"}, "edited": false, "score": 0, "creation_date": 1430940193, "post_id": 30085757, "comment_id": 48284615, "body": "This looks great, nice solution!"}, {"owner": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 2, "creation_date": 1430940629, "post_id": 30085757, "comment_id": 48284897, "body": "Trivial suggestion: you could call <code>split()</code> with no argument to save three characters."}, {"owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "reply_to_user": {"reputation": 44584, "user_id": 2617068, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/0nSBO.png?s=128&g=1", "display_name": "TigerhawkT3", "link": "https://stackoverflow.com/users/2617068/tigerhawkt3"}, "edited": false, "score": 1, "creation_date": 1430940697, "post_id": 30085757, "comment_id": 48284937, "body": "@TigerhawkT3 Hmm. I thought I did try that and it failed but it does actually work, will update thanks"}], "tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": true, "score": 9, "last_activity_date": 1430940704, "last_edit_date": 1430940704, "creation_date": 1430940110, "answer_id": 30085757, "question_id": 30085694, "link": "https://stackoverflow.com/questions/30085694/python-convert-list-of-multiple-words-to-single-words/30085757#30085757", "title": "Python convert list of multiple words to single words", "body": "<p>You can join using a space separator and then split again:</p>\n\n<pre><code>In [22]:\n\nwords = ['one','two','three four','five','six seven']\n' '.join(words).split()\nOut[22]:\n['one', 'two', 'three', 'four', 'five', 'six', 'seven']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 4134960, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D0x6b.jpg?s=128&g=1", "display_name": "Alex Boklin", "link": "https://stackoverflow.com/users/4134960/alex-boklin"}, "is_accepted": false, "score": 1, "last_activity_date": 1430943984, "creation_date": 1430943984, "answer_id": 30086866, "question_id": 30085694, "link": "https://stackoverflow.com/questions/30085694/python-convert-list-of-multiple-words-to-single-words/30086866#30086866", "title": "Python convert list of multiple words to single words", "body": "<p>Here's a solution with a slight use of regular expressions:</p>\n\n<pre><code>import re\n\nwords = ['one','two','three four','five','six seven']\nresult = re.findall(r'[a-zA-Z]+', str(words))\n</code></pre>\n"}], "owner": {"reputation": 1493, "user_id": 4793408, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/fb7d7edb54e267a249a656c94451a3cb?s=128&d=identicon&r=PG&f=1", "display_name": "GNMO11", "link": "https://stackoverflow.com/users/4793408/gnmo11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1920, "favorite_count": 0, "accepted_answer_id": 30085757, "answer_count": 3, "score": 4, "last_activity_date": 1430943984, "creation_date": 1430939878, "last_edit_date": 1430940237, "question_id": 30085694, "link": "https://stackoverflow.com/questions/30085694/python-convert-list-of-multiple-words-to-single-words", "title": "Python convert list of multiple words to single words", "body": "<p>I have a list of words for example:</p>\n\n<p><code>words = ['one','two','three four','five','six seven']</code> # quote was missing</p>\n\n<p>And I am trying to create a new list where each item in the list is just one word so I would have:</p>\n\n<p><code>words = ['one','two','three','four','five','six','seven']</code></p>\n\n<p>Would the best thing to do be join the entire list into a string and then tokenize the string? Something like this:</p>\n\n<p><code>word_string = ' '.join(words)\ntokenize_list = nltk.tokenize(word_string)</code></p>\n\n<p>Or is there a better option?</p>\n"}, {"tags": ["python", "html", "sql-server", "stored-procedures", "cheetah"], "comments": [{"owner": {"reputation": 1991, "user_id": 3419300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9cf631b630a0426b92f184746586409?s=128&d=identicon&r=PG", "display_name": "Paolo Costa", "link": "https://stackoverflow.com/users/3419300/paolo-costa"}, "edited": false, "score": 0, "creation_date": 1431003446, "post_id": 30085609, "comment_id": 48314756, "body": "Was my answer useful? Can I have a feedback?"}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 4606651, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/77e88a8fbb4c69aa0b3a4b9f55d12bb7?s=128&d=identicon&r=PG&f=1", "display_name": "Benedict Lee", "link": "https://stackoverflow.com/users/4606651/benedict-lee"}, "edited": false, "score": 0, "creation_date": 1431009960, "post_id": 30087064, "comment_id": 48320063, "body": "Thanks and sorry for the late reply. So i will need a identity column in my database to keep track of which button is being clicked?  One more question, what if i use <code>input type=&quot;button&quot;</code>?   I am really new to this front-end development."}, {"owner": {"reputation": 1991, "user_id": 3419300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9cf631b630a0426b92f184746586409?s=128&d=identicon&r=PG", "display_name": "Paolo Costa", "link": "https://stackoverflow.com/users/3419300/paolo-costa"}, "reply_to_user": {"reputation": 59, "user_id": 4606651, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/77e88a8fbb4c69aa0b3a4b9f55d12bb7?s=128&d=identicon&r=PG&f=1", "display_name": "Benedict Lee", "link": "https://stackoverflow.com/users/4606651/benedict-lee"}, "edited": false, "score": 0, "creation_date": 1431011271, "post_id": 30087064, "comment_id": 48321157, "body": "Type submit will automatically submit the form to the backend (it means it will start a post request against the url you set in the form action attribute, the one that I substituted with dots) If you use type button you will have to manually submit it in javascript"}, {"owner": {"reputation": 1991, "user_id": 3419300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9cf631b630a0426b92f184746586409?s=128&d=identicon&r=PG", "display_name": "Paolo Costa", "link": "https://stackoverflow.com/users/3419300/paolo-costa"}, "reply_to_user": {"reputation": 59, "user_id": 4606651, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/77e88a8fbb4c69aa0b3a4b9f55d12bb7?s=128&d=identicon&r=PG&f=1", "display_name": "Benedict Lee", "link": "https://stackoverflow.com/users/4606651/benedict-lee"}, "edited": false, "score": 0, "creation_date": 1431011335, "post_id": 30087064, "comment_id": 48321199, "body": "For the first part, I guess you have a primary key in your database, you just have to put the value in hidden field in order to know in the backend what element was clicked."}, {"owner": {"reputation": 59, "user_id": 4606651, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/77e88a8fbb4c69aa0b3a4b9f55d12bb7?s=128&d=identicon&r=PG&f=1", "display_name": "Benedict Lee", "link": "https://stackoverflow.com/users/4606651/benedict-lee"}, "edited": false, "score": 0, "creation_date": 1431011849, "post_id": 30087064, "comment_id": 48321567, "body": "Awesome. Thanks Paolo. That solve part of the problem. But I still need to figure a way to passing variable among from html to python. I am able to passing variable from python to html, but not the other way around."}, {"owner": {"reputation": 1991, "user_id": 3419300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9cf631b630a0426b92f184746586409?s=128&d=identicon&r=PG", "display_name": "Paolo Costa", "link": "https://stackoverflow.com/users/3419300/paolo-costa"}, "reply_to_user": {"reputation": 59, "user_id": 4606651, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/77e88a8fbb4c69aa0b3a4b9f55d12bb7?s=128&d=identicon&r=PG&f=1", "display_name": "Benedict Lee", "link": "https://stackoverflow.com/users/4606651/benedict-lee"}, "edited": false, "score": 0, "creation_date": 1431012176, "post_id": 30087064, "comment_id": 48321845, "body": "Unfortunately I don&#39;t know Python. On other technologies (like ASP or ASP.NET that I know) you can read the values passed on a POST request by means of code like this <code>Request.Form[&quot;Id&quot;]</code>"}], "tags": [], "owner": {"reputation": 1991, "user_id": 3419300, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9cf631b630a0426b92f184746586409?s=128&d=identicon&r=PG", "display_name": "Paolo Costa", "link": "https://stackoverflow.com/users/3419300/paolo-costa"}, "is_accepted": true, "score": 0, "last_activity_date": 1431003642, "last_edit_date": 1431003642, "creation_date": 1430944669, "answer_id": 30087064, "question_id": 30085609, "link": "https://stackoverflow.com/questions/30085609/execute-stored-procedure-when-a-button-is-clicked-on-python-web/30087064#30087064", "title": "Execute stored procedure when a button is clicked on python web", "body": "<p>I don't know Python, but I think you can create a form for each row and add a hidden field with the id of the displayed row. </p>\n\n<p>When the user clicks on the submit button, it will be easy for you to read the value of the hidden field for the request form collection and pass it to the stored procedure:</p>\n\n<pre><code>#for $i in range(0,$rows.__len__())\n    &lt;tr&gt;\n        &lt;form action = \"....\"&gt;\n           &lt;input type=\"hidden\" name=\"id\" value=\"$rows[i].get('Id')\"&gt; \n           &lt;td&gt;$rows[i].get('JobstreamName')&lt;/td&gt;\n           &lt;td&gt;$rows[i].get('Date')&lt;/td&gt;\n           &lt;td&gt;$rows[i].get('ServerName')&lt;/td&gt;\n           &lt;td&gt;$rows[i].get('RequestTime')&lt;/td&gt;\n           &lt;td&gt;$rows[i].get('Status')&lt;/td&gt;\n           &lt;td&gt;$rows[i].get('StepStatus')&lt;/td&gt;\n           &lt;td&gt;$rows[i].get('LastUpdate')&lt;/td&gt;\n           &lt;td&gt;&lt;input type=\"submit\" value=\"Delete\"/&gt;&lt;/td&gt;\n        &lt;/form&gt;\n    &lt;/tr&gt;\n#end for\n</code></pre>\n\n<p>The code above assumes there is an <code>id</code> field in your data.</p>\n"}], "owner": {"reputation": 59, "user_id": 4606651, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/77e88a8fbb4c69aa0b3a4b9f55d12bb7?s=128&d=identicon&r=PG&f=1", "display_name": "Benedict Lee", "link": "https://stackoverflow.com/users/4606651/benedict-lee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 856, "favorite_count": 0, "accepted_answer_id": 30087064, "answer_count": 1, "score": 1, "last_activity_date": 1431010797, "creation_date": 1430939566, "last_edit_date": 1431010797, "question_id": 30085609, "link": "https://stackoverflow.com/questions/30085609/execute-stored-procedure-when-a-button-is-clicked-on-python-web", "title": "Execute stored procedure when a button is clicked on python web", "body": "<p>I am creating a webpage that displays a list of object that exist in a database/table. I have a stored procedure which retrieves the data from the table and associates with each column the data will be parse into a table. </p>\n\n<pre><code>&lt;table id=\"fileTable\" class=\"display\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Jobstream Id&lt;/th&gt;\n            &lt;th&gt;Date&lt;/th&gt;\n            &lt;th&gt;Server Name&lt;/th&gt;\n            &lt;th&gt;Request Time&lt;/th&gt;\n            &lt;th&gt;Status&lt;/th&gt;\n            &lt;th&gt;StepStatus&lt;/th&gt;\n            &lt;th&gt;LastUpdate&lt;/th&gt;\n            &lt;th&gt;DeleteJob&lt;/th&gt;\n        &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tbody&gt;\n    #for $i in range(0,$rows.__len__())\n        &lt;tr&gt;\n            &lt;td&gt;$rows[i].get('JobstreamName')&lt;/td&gt;\n            &lt;td&gt;$rows[i].get('Date')&lt;/td&gt;\n            &lt;td&gt;$rows[i].get('ServerName')&lt;/td&gt;\n            &lt;td&gt;$rows[i].get('RequestTime')&lt;/td&gt;\n            &lt;td&gt;$rows[i].get('Status')&lt;/td&gt;\n            &lt;td&gt;$rows[i].get('StepStatus')&lt;/td&gt;\n            &lt;td&gt;$rows[i].get('LastUpdate')&lt;/td&gt;\n            &lt;td&gt;&lt;input type=\"submit\" value=\"Delete\"/&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n    #end for\n    &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>There will be a \"Delete\" button at the end of each row, which serves the purpose of deleting whichever row (<strong>in the database</strong>) that the user wishes. The deletion of row should be run in a stored procedure. \nI do have a function in python that would execute the stored-procedure. </p>\n\n<p>However, I have no idea how to connect the button which will return the \"JobStream Id\" and \"Date\" that serves as a parameter in executing a stored-procedure. </p>\n\n<p>I am using Cheetah as a web development tools to run the python code.\nAppreciate any help I could get, Thanks in advance. </p>\n\n<p><strong>EDIT:</strong>\nLet me rephrase myself here. So, the data of the table that is produce in the webpage is being pulled from the database using a stored-procedure. I am trying to add a feature (end of each row there is a delete button) that allow the user to delete any row. Therefore I will need to <strong>pass the html variable to my python variable</strong> to run another stored-procedure, but i am unable to do so. Hope this clarify most of the confusion. Thanks</p>\n\n<p>Here is the full code:</p>\n\n<pre><code>def getJobStreamStatus(Delete):\n    Delete = 'Just a random string'\n    user,pwd,server,db =  SPCaller.parseLogin('DMClient@gpdevdb81\\\\dmresrchdbdev.EquityData')\n    db =  DB.dbConn(computerName=server,databaseName=db,userName=user,password=pwd)\n    #results = SPCaller.readSPReturnDict('getJobStreamRerunStatus',None, 'DMClient@gpdevdb81\\\\dmresrchdbdev.EquityData')\n    cols, rs = db.getResultSetFromSP('getJobStreamRerunStatus',None)\n    #html = []\n    definition = \"\"\"&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;HR&gt;$title \n    &lt;table id=\"fileTable\" class=\"display\"&gt;\n        &lt;thead&gt;\n            &lt;tr&gt;\n                &lt;th&gt;Jobstream Id&lt;/th&gt;\n                &lt;th&gt;Date&lt;/th&gt;\n                &lt;th&gt;Server Name&lt;/th&gt;\n                &lt;th&gt;Request Time&lt;/th&gt;\n                &lt;th&gt;Status&lt;/th&gt;\n                &lt;th&gt;StepStatus&lt;/th&gt;\n                &lt;th&gt;LastUpdate&lt;/th&gt;\n                &lt;th&gt;DeleteJob&lt;/th&gt;\n            &lt;/tr&gt;\n        &lt;/thead&gt;\n        &lt;tbody&gt;\n        #for $i in range(0,$rows.__len__())\n            &lt;tr&gt;\n            &lt;td&gt;$rows[i].get('JobstreamName')&lt;/td&gt;\n            &lt;td&gt;$rows[i].get('Date')&lt;/td&gt;\n            &lt;td&gt;$rows[i].get('ServerName')&lt;/td&gt;\n            &lt;td&gt;$rows[i].get('RequestTime')&lt;/td&gt;\n            &lt;td&gt;$rows[i].get('Status')&lt;/td&gt;\n            &lt;td&gt;$rows[i].get('StepStatus')&lt;/td&gt;\n            &lt;td&gt;$rows[i].get('LastUpdate')&lt;/td&gt;\n            &lt;td&gt;&lt;input type=\"button\" value=\"Delete\" name='btnEdit' class='btnEdits' /&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        #end for\n        &lt;/tbody&gt;\n    &lt;/table&gt;\n    \"\"\" \n\n    return str(Template(definition, searchList=[{'cols':cols, 'rows':arrToDict(cols,rs),'Delete':Delete,'title':'Showing all jobs in the rerun queue with status &lt;b&gt;waiting: 0, running: 2, and failed: 3&lt;/b&gt;&lt;br&gt;&lt;br&gt;'}]))\n</code></pre>\n"}, {"tags": ["python", "algorithm"], "comments": [{"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430939804, "post_id": 30085594, "comment_id": 48284362, "body": "Unless <code>netaddr</code> has some kind of &quot;set of discontinguous networks&quot; class, this seems like the obvious, Pythonic way to do it."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430939921, "post_id": 30085594, "comment_id": 48284440, "body": "You could of course write your own set of discontiguous networks class, and if you&#39;re going to do this 1000 times it might be a good idea\u2026 but ultimately its <code>__contains__</code> method is going to have the same loop in it."}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430940059, "post_id": 30085594, "comment_id": 48284527, "body": "I guess you could do some clever stuff, like if you have <code>1.0.0.0&#47;8</code>, &#39;2.0.0.0/8<code>, </code>3.0.0.0/8<code>, you could store that as </code>0.0.0.0/10 - 0.0.0.0/8` and collapse 4 checks into 2, but I wouldn&#39;t write that unless this was a performance bottleneck or something, because I can&#39;t imagine the end result would be easier to understand."}, {"owner": {"reputation": 442, "user_id": 2738698, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2b3636449a3be6f6b4df3471dad6238c?s=128&d=identicon&r=PG&f=1", "display_name": "user2738698", "link": "https://stackoverflow.com/users/2738698/user2738698"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430940269, "post_id": 30085594, "comment_id": 48284662, "body": "@abarnert: I think that you&#39;re right that I have to manipulate the data before I do this search, thanks.    I think maybe I&#39;ll expand each network into its individual addresses, and make a super large set for easy look up then"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430940574, "post_id": 30085594, "comment_id": 48284852, "body": "Expanding each network into its individual addresses may mean a set of up to 2^32 elements. Is that actually acceptable for your use case? (Even if it is, what happens when you expand to include IPv6?)"}, {"owner": {"reputation": 442, "user_id": 2738698, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2b3636449a3be6f6b4df3471dad6238c?s=128&d=identicon&r=PG&f=1", "display_name": "user2738698", "link": "https://stackoverflow.com/users/2738698/user2738698"}, "reply_to_user": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430941008, "post_id": 30085594, "comment_id": 48285082, "body": "I guess we&#39;ll see; luckily, at any point in time, the list of networks isn&#39;t greater than maybe 50?  Still, that&#39;s 50 * 2 ^ 32 in the worst case huh?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430945046, "post_id": 30085594, "comment_id": 48287596, "body": "The advantage of using an explicit set is that you could just union the 50 sets into one (so you only need one set lookup, not 50), so it&#39;s still 2^32. And that just gave me a thought: you might want to look and see if any of the interval-set/range-set libraries on PyPI or elsewhere can handle this. An interval-set is basically just a sparse set represented as a discontiguous set of ranges over the domain, which is exactly what your networks are. They should be able to merge adjacent sets, etc. automatically, and possibly even convert to a dense set representation."}], "answers": [{"comments": [{"owner": {"reputation": 442, "user_id": 2738698, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2b3636449a3be6f6b4df3471dad6238c?s=128&d=identicon&r=PG&f=1", "display_name": "user2738698", "link": "https://stackoverflow.com/users/2738698/user2738698"}, "edited": false, "score": 1, "creation_date": 1430939727, "post_id": 30085643, "comment_id": 48284316, "body": "doesn&#39;t that still use a for loop?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 1, "creation_date": 1430939745, "post_id": 30085643, "comment_id": 48284326, "body": "This is still effectively using a <code>for</code> loop. It may be more readable and a few % faster, but it&#39;s basically the same algorithm."}, {"owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "reply_to_user": {"reputation": 442, "user_id": 2738698, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2b3636449a3be6f6b4df3471dad6238c?s=128&d=identicon&r=PG&f=1", "display_name": "user2738698", "link": "https://stackoverflow.com/users/2738698/user2738698"}, "edited": false, "score": 0, "creation_date": 1430939783, "post_id": 30085643, "comment_id": 48284348, "body": "@user2738698: It uses a genex, which has the &quot;for&quot; keyword, but it is not an explicit <code>for</code> loop. <b>Something</b> must loop; you can&#39;t get around that."}, {"owner": {"reputation": 442, "user_id": 2738698, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2b3636449a3be6f6b4df3471dad6238c?s=128&d=identicon&r=PG&f=1", "display_name": "user2738698", "link": "https://stackoverflow.com/users/2738698/user2738698"}, "edited": false, "score": 0, "creation_date": 1430939876, "post_id": 30085643, "comment_id": 48284416, "body": "I see, well, the optimizations certainly improves performance, thanks; but there&#39;s no escaping the for loop, huh?"}, {"owner": {"reputation": 310996, "user_id": 908494, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7e41acaa8f6a0e0f5a7c645e93add55a?s=128&d=identicon&r=PG", "display_name": "abarnert", "link": "https://stackoverflow.com/users/908494/abarnert"}, "edited": false, "score": 0, "creation_date": 1430940506, "post_id": 30085643, "comment_id": 48284802, "body": "@IgnacioVazquez-Abrams: It is an explicit <code>for</code> loop by most reasonable standards. It&#39;s explicitly using the <code>for</code> keyword. It has the same semantics. It compiles to a bytecode <code>FOR_ITER</code> loop, etc. It&#39;s not a <code>for</code> <i>statement</i>, but that just means it&#39;s a different explicit <code>for</code> loop syntax than a <code>for</code> statement is."}], "tags": [], "owner": {"reputation": 695068, "user_id": 20862, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2343ae368d3241278581ce6c87f62a25?s=128&d=identicon&r=PG", "display_name": "Ignacio Vazquez-Abrams", "link": "https://stackoverflow.com/users/20862/ignacio-vazquez-abrams"}, "is_accepted": false, "score": 1, "last_activity_date": 1430939742, "last_edit_date": 1430939742, "creation_date": 1430939667, "answer_id": 30085643, "question_id": 30085594, "link": "https://stackoverflow.com/questions/30085594/how-to-check-if-an-ip-address-is-in-any-of-the-networks-in-a-list-of-networks-in/30085643#30085643", "title": "How to check if an IP Address is in any of the networks in a list of networks in python?", "body": "<pre><code>if any(IPAddress(address) in IPNetwork(network) for network in networks):\n   ...\n</code></pre>\n\n<p>Optimization can be done by only instantiating the <code>IPAddress</code> once, and by storing <code>IPNetwork</code>s in the list.</p>\n"}, {"tags": [], "owner": {"reputation": 3784, "user_id": 1086871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3b5ca501c8756c075f442808d148729?s=128&d=identicon&r=PG", "display_name": "G. Bach", "link": "https://stackoverflow.com/users/1086871/g-bach"}, "is_accepted": false, "score": 0, "last_activity_date": 1430951283, "creation_date": 1430951283, "answer_id": 30088785, "question_id": 30085594, "link": "https://stackoverflow.com/questions/30085594/how-to-check-if-an-ip-address-is-in-any-of-the-networks-in-a-list-of-networks-in/30088785#30088785", "title": "How to check if an IP Address is in any of the networks in a list of networks in python?", "body": "<p>(None of this is specific to Python, so in case this question really is about syntax and coding style, this answer contributes nothing to that. Basically, it expands a little on what I think abarnert was suggesting in comments.)</p>\n\n<p>Here's something that does not require looping over all ranges at the cost of making a basic assumption and constructing a search tree: assuming the ranges you want to check are non-overlapping (i.e. no two ranges contain some shared IP), you can construct a search tree for your ranges, and then search for the IP (or even ranges) in <code>O(log n)</code> in your ordered set of ranges once you adjust the search function of the tree suitably, which is pretty straightforward.</p>\n\n<p>In case you have overlapping ranges, you may want to have a look at interval trees, which you should be able to apply to that case pretty easily.</p>\n\n<p>Both will only be useful if you want to query lots of times with a nontrivial number of networks to maintain. If you actually only have to handle 50 networks at any time, that should be trivial and work within an instant with the list thing.</p>\n"}], "owner": {"reputation": 442, "user_id": 2738698, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2b3636449a3be6f6b4df3471dad6238c?s=128&d=identicon&r=PG&f=1", "display_name": "user2738698", "link": "https://stackoverflow.com/users/2738698/user2738698"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1430951283, "creation_date": 1430939505, "last_edit_date": 1430944736, "question_id": 30085594, "link": "https://stackoverflow.com/questions/30085594/how-to-check-if-an-ip-address-is-in-any-of-the-networks-in-a-list-of-networks-in", "title": "How to check if an IP Address is in any of the networks in a list of networks in python?", "body": "<p>So, for singular search:</p>\n\n<pre><code>from netaddr import IPAddress, IPNetwork\nif IPAddress( address ) in IPNetwork( network ):\n    print( 'in' )\n</code></pre>\n\n<p>But what if you're given a list of networks?  Is it possible to do it without using a for loop?  What is a pythonic way to do this task? ...preferably readable, then faster.</p>\n\n<pre><code>from netaddr import IPAddress, IPNetwork\nnetworks = [\n    '1.0.0.0\\8',\n    '2.0.0.0\\8',\n    # ...\n    '21.22.14.0\\24' # something random\n]\n\nfor network in networks:\n    if IPAddress( address ) in IPNetwork( network ):\n        print( 'in' )\n        break\n</code></pre>\n\n<p>EDIT: For anyone interested, I took my given list of networks, and expanded each network to its list of addresses.  Then I took that list of addresses and made a set from it.  Given that sets have O(1) lookup, I figured it would help.  </p>\n\n<p>The time it took to complete with the for loop ( no set ) was 24 minutes.<br>\nThe time it took to use:</p>\n\n<pre><code>address_set = set()\n\nfor network in networks:\n    for address in IPNetwork( network ).subnet( 32 ):\n        non_CIDR_address = str( address ).split( '/' )[ 0 ]\n        address_set.add( non_CIDR_address )\n\nif query_address in address_set:\n    print( 'in' )\nif address in address_set:\n    print( 'in' )\n</code></pre>\n\n<p>...was 2 minutes and 37 seconds.</p>\n\n<p>GO SETS!</p>\n\n<p><strong>BEWARE</strong>: expanding the networks can be memory expensive.</p>\n"}, {"tags": ["python", "function", "dynamic"], "comments": [{"owner": {"reputation": 6107, "user_id": 7851470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d10f0dc1bc1f340708d6f6b4c8ec3866?s=128&d=identicon&r=PG&f=1", "display_name": "Georgy", "link": "https://stackoverflow.com/users/7851470/georgy"}, "edited": false, "score": 0, "creation_date": 1596282745, "post_id": 30085561, "comment_id": 111766030, "body": "Does this answer your question? <a href=\"https://stackoverflow.com/questions/2295290/what-do-lambda-function-closures-capture\">What do (lambda) function closures capture?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "is_accepted": false, "score": 2, "last_activity_date": 1430939614, "creation_date": 1430939614, "answer_id": 30085628, "question_id": 30085561, "link": "https://stackoverflow.com/questions/30085561/dynamic-function-creation-and-function-body-evaluation/30085628#30085628", "title": "Dynamic function creation and function body evaluation", "body": "<p>I cant speak to #1 ... except to say I am sure that is intentional and desirable behaviour for some definition of intentional and desirable</p>\n\n<p>but WRT #2 </p>\n\n<pre><code>res = []\nfor a in range(3) :\n    res.append(lambda n,b=a : n + b)\n\nres[0](0)\n</code></pre>\n\n<p>this will evaluate <code>a</code> as the default 2nd argument while inside the for loop(instead of after exiting) ...</p>\n\n<p>of coarse this leaves it open to something like</p>\n\n<pre><code>res[0](0,8)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1430943652, "post_id": 30085724, "comment_id": 48286774, "body": "That makes it a two-argument function, though. Not so clean."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1430945098, "post_id": 30085724, "comment_id": 48287617, "body": "@StefanPochmann: Not really, as illustrated by the sample calls to the functions at the end. This is because values for arguments  with default values are optional."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1430945385, "post_id": 30085724, "comment_id": 48287775, "body": "Yes, it&#39;s optional, but it&#39;s still there."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1430946232, "post_id": 30085724, "comment_id": 48288218, "body": "@StefanPochmann: You&#39;re entitled to your own minority opinion, of course, but this is a common Python idiom to deal with issues like this and is very lightweight."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1430949756, "post_id": 30085724, "comment_id": 48289922, "body": "Ok, thanks, I tested it and it&#39;s indeed smaller and faster than mine. I&#39;ll keep it in mind."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1430950075, "post_id": 30085724, "comment_id": 48290079, "body": "Just one more thing: You say his functions are using the final value that <code>a</code> had at the end of the loop. While technically correct, I think this is misleading. They&#39;re only using that value because that&#39;s still the value <code>a</code> has when they&#39;re called. If you increase <code>a</code> further, even after having used the functions after the loop, then the functions use the new value, not the one it had at the end of the loop."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1430968899, "post_id": 30085724, "comment_id": 48295332, "body": "@StefanPochmann: That&#39;s exactly why I updated my answer to say that the dynamic functions <i>refer</i> to the <code>a</code> variable...implying that they will pick up whatever value it has each time they&#39;re called."}, {"owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1431011497, "post_id": 30085724, "comment_id": 48321314, "body": "I just think many won&#39;t get that but just understand and remember the <i>&quot;the value it had at the end of the loop&quot;</i> part."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "edited": false, "score": 0, "creation_date": 1431017330, "post_id": 30085724, "comment_id": 48325422, "body": "@StefanPochmann: Well, if they follow the &quot;not so clean&quot; suggestion in my answer, it won&#39;t matter what value the loop variable has except when each function is defined."}], "tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 3, "last_activity_date": 1430945784, "last_edit_date": 1430945784, "creation_date": 1430940000, "answer_id": 30085724, "question_id": 30085561, "link": "https://stackoverflow.com/questions/30085561/dynamic-function-creation-and-function-body-evaluation/30085724#30085724", "title": "Dynamic function creation and function body evaluation", "body": "<p>Because of <a href=\"http://en.wikipedia.org/wiki/Closure_%28computer_programming%29\" rel=\"nofollow\">closure</a> the dynamic functions referencing variable <code>a</code> and using the final value it had at the end of the <code>for</code> loop when they execute.</p>\n\n<p>You can prevent that by making it an function argument with a default value so it doesn't need to be provided on calls. The value of <code>a</code> at the time each dynamic function is defined will become the value used. This is what I mean:</p>\n\n<pre><code>res = []\nfor a in range(3) :\n    res.append(lambda n, a=a: n + a)\n\nprint(res[0](0))  # -&gt; 0\nprint(res[1](2))  # -&gt; 3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14728, "user_id": 2142577, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/820c611835bb6eea4851c318a3b73345?s=128&d=identicon&r=PG", "display_name": "laike9m", "link": "https://stackoverflow.com/users/2142577/laike9m"}, "is_accepted": false, "score": 0, "last_activity_date": 1430942164, "creation_date": 1430942164, "answer_id": 30086337, "question_id": 30085561, "link": "https://stackoverflow.com/questions/30085561/dynamic-function-creation-and-function-body-evaluation/30086337#30086337", "title": "Dynamic function creation and function body evaluation", "body": "<p>This would also work, if you don't want to use <code>lambda</code>:</p>\n\n<pre><code>&gt;&gt;&gt; from functools import partial\n&gt;&gt;&gt; for a in range(3) :\n    def f(a, n):\n        return n + a\n    f = partial(f, a)\n    res.append(f)\n\n&gt;&gt;&gt; res[0](0)\n0\n&gt;&gt;&gt; res[1](2)\n3\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 24179, "user_id": 1672429, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0815eb7d4e9dd58022d51ba2011b9c0a?s=128&d=identicon&r=PG", "display_name": "Stefan Pochmann", "link": "https://stackoverflow.com/users/1672429/stefan-pochmann"}, "is_accepted": false, "score": 0, "last_activity_date": 1430944304, "last_edit_date": 1430944304, "creation_date": 1430942807, "answer_id": 30086524, "question_id": 30085561, "link": "https://stackoverflow.com/questions/30085561/dynamic-function-creation-and-function-body-evaluation/30086524#30086524", "title": "Dynamic function creation and function body evaluation", "body": "<p>This gives you clean functions which just have one argument:</p>\n\n<pre><code>res = []\nfor a in range(3) :\n    res.append((lambda a: lambda n: n+a)(a))\n</code></pre>\n\n<p>Might be better for readability and efficiency to do it this way, though:</p>\n\n<pre><code>def adder(amount):\n    return lambda n: n + amount\n\nres = []\nfor a in range(3) :\n    res.append(adder(a))\n</code></pre>\n\n<p>Also, your <em>\"The evaluation is performed at the exit of the for statement\"</em> is wrong. Try printing after the loop, then increase <code>a</code> further, then print again. You'll see that the functions now use the further increased value of <code>a</code> (only with your version, of course, not with mine). That's because your functions don't have their own <code>a</code> but use the same global <code>a</code>, and evaluate it whenever they're called.</p>\n"}], "owner": {"reputation": 379, "user_id": 1749328, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b50ba2c2d5650c076af799b042908629?s=128&d=identicon&r=PG", "display_name": "Samuele Giraudo", "link": "https://stackoverflow.com/users/1749328/samuele-giraudo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 302, "favorite_count": 2, "accepted_answer_id": 30085724, "answer_count": 4, "score": 4, "last_activity_date": 1430992365, "creation_date": 1430939365, "last_edit_date": 1430947397, "question_id": 30085561, "link": "https://stackoverflow.com/questions/30085561/dynamic-function-creation-and-function-body-evaluation", "title": "Dynamic function creation and function body evaluation", "body": "<p>Consider the following Python 3 instructions</p>\n\n<pre><code>res = []\nfor a in range(3) :\n    res.append(lambda n : n + a)\n</code></pre>\n\n<p>with the aim of building a list <code>res</code> of three functions <code>res[0]</code>, <code>res[1]</code>, and <code>res[2]</code> such that <code>res[i](n)</code> returns <code>n + i</code>, for all <code>i</code> in <code>[0, 1, 2]</code>.</p>\n\n<p>Nevertheless, one obtains</p>\n\n<pre><code>&gt;&gt;&gt; res[0](0)\n2\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>&gt;&gt;&gt; res[0](0)\n0\n</code></pre>\n\n<p>One also have</p>\n\n<pre><code>&gt;&gt;&gt; res[1](2)\n4\n</code></pre>\n\n<p>The explanation of this behavior is that in the expression <code>n + a</code> in the body of any dynamically generated anonymous function of the example, the symbol <code>a</code> is not evaluated at the creation of the function. The evaluation is performed at the exit of the for statement, explaining why all functions <code>res[0]</code>, <code>res[1]</code>, and <code>res[2]</code> return the value of their argument plus <code>2\u00e8 (because</code>a<code>browses</code>range(3)<code>and</code>2` is its last value).</p>\n\n<p>Notice that the problem does not lie in the fact that we use anonymous functions. Indeed, the instructions</p>\n\n<pre><code>res = []\nfor a in range(3) :\n    def f(n) :\n        return n + a\n    res.append(f)\n</code></pre>\n\n<p>lead to the same behavior.</p>\n\n<p>Notice also that we can meet the objective set out above by using the function <code>eval</code> of Python:</p>\n\n<pre><code>res = []\nfor a in range(3) :\n    s = \"lambda n : n + %s\" %(a)\n    res.append(eval(s))\n</code></pre>\n\n<p>The trick lies on the fact that the dynamic value of <code>a</code> is considered for the creation of each function of <code>res</code>.</p>\n\n<p>Now my questions are</p>\n\n<ol>\n<li>is this a bug or a feature?</li>\n<li>is there an other way not passing by <code>eval</code> to obtain the expected behavior?</li>\n</ol>\n"}, {"tags": ["python", "logging", "flask"], "answers": [{"comments": [{"owner": {"reputation": 6683, "user_id": 2578042, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aHYi1.jpg?s=128&g=1", "display_name": "ZekeDroid", "link": "https://stackoverflow.com/users/2578042/zekedroid"}, "edited": false, "score": 0, "creation_date": 1430963125, "post_id": 30086809, "comment_id": 48293874, "body": "Right the thing is that by setting the level in the app to ERROR, although it removes the INFO logs from Flask, it doesn&#39;t allow for me to have DEBUG level logs without seeing the INFO, right? I would have to turn all my DEBUG logs to ERROR, at least, to get it working. Even if I use the getLogger function, it still seems like Flask logs the INFO logs to my logger..."}, {"owner": {"reputation": 11557, "user_id": 228489, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/a257035de28cbb48e9d1d4a918058e74?s=128&d=identicon&r=PG", "display_name": "amccormack", "link": "https://stackoverflow.com/users/228489/amccormack"}, "edited": false, "score": 0, "creation_date": 1431032690, "post_id": 30086809, "comment_id": 48334098, "body": "Did you create a custom logger as describe by @foobarto? And that is reporting both your custom logs and flask logs?"}], "tags": [], "owner": {"reputation": 384, "user_id": 4872190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8dbcbd00bc3606b7b62531a5c4ff05c3?s=128&d=identicon&r=PG", "display_name": "foobarto", "link": "https://stackoverflow.com/users/4872190/foobarto"}, "is_accepted": true, "score": 21, "last_activity_date": 1430943807, "creation_date": 1430943807, "answer_id": 30086809, "question_id": 30085538, "link": "https://stackoverflow.com/questions/30085538/change-flask-logs-from-info-to-debug/30086809#30086809", "title": "Change Flask logs from INFO to DEBUG", "body": "<p>I'm not sure about a way to downgrade log level of requests (as it usually is stated explicitly in the code like logging.info(\"...\")) but the following may help you to reduce the verbosity of Flask itself.</p>\n\n<p>Python allows you to have multiple loggers, each with its own log level.\nYou can modify any existing logger if you know the module name it is in or the name it was registered with as described <a href=\"https://docs.python.org/2/library/logging.html#logger-objects\" rel=\"noreferrer\">here</a>.</p>\n\n<p>For example:</p>\n\n<pre><code>import logging\nlogger = logging.getLogger(\"mypackage.mymodule\")  # or __name__ for current module\nlogger.setLevel(logging.ERROR)\n</code></pre>\n\n<p>The above can be done for any python module. Flask provides a logger per app. You can get a reference to it like this:</p>\n\n<pre><code>import logging\nfrom flask import Flask\napp = Flask(__name__)  # or instead of __name__ provide the name of the module\napp.logger.setLevel(logging.ERROR)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25157, "user_id": 450917, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e09fd547c9c17163d34a1e97ed744639?s=128&d=identicon&r=PG", "display_name": "Gringo Suave", "link": "https://stackoverflow.com/users/450917/gringo-suave"}, "edited": false, "score": 1, "creation_date": 1497288514, "post_id": 44197327, "comment_id": 76004121, "body": "This is the right answer, not a clumsy work-around like the other."}], "tags": [], "owner": {"reputation": 1330, "user_id": 1945742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb011c179fc6342d04b05b098f3f16bf?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr \u0106wiek", "link": "https://stackoverflow.com/users/1945742/piotr-%c4%86wiek"}, "is_accepted": false, "score": 10, "last_activity_date": 1495788438, "creation_date": 1495788438, "answer_id": 44197327, "question_id": 30085538, "link": "https://stackoverflow.com/questions/30085538/change-flask-logs-from-info-to-debug/44197327#44197327", "title": "Change Flask logs from INFO to DEBUG", "body": "<p>In fact, there is a way to downgrade a log record from INFO to DEBUG (even if it was already emitted using a call such as <code>info()</code>). This can be achieved using a filter attached to a logger. According to the <a href=\"https://docs.python.org/3/library/logging.html#logging.Filter.filter\" rel=\"noreferrer\">docs</a> a filter checks:</p>\n\n<blockquote>\n  <p>Is the specified record to be logged? Returns zero for no, nonzero for\n  yes. <strong>If deemed appropriate, the record may be modified in-place</strong> by\n  this method.</p>\n</blockquote>\n\n<p>So a filter may change the level of a log record (<em>levelno</em> and <em>levelname</em> attributes). Later on, a handler may then allow or drop this record based on the new level.</p>\n"}, {"comments": [{"owner": {"reputation": 1132, "user_id": 2241241, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/DEZDz.jpg?s=128&g=1", "display_name": "fbence", "link": "https://stackoverflow.com/users/2241241/fbence"}, "edited": false, "score": 1, "creation_date": 1555935823, "post_id": 51397133, "comment_id": 98257600, "body": "Python buffers the <code>print</code> function, probably that is why you see it that way. You can get around it a few ways, see here in more detail: <a href=\"https://stackoverflow.com/questions/107705/disable-output-buffering\" title=\"disable output buffering\">stackoverflow.com/questions/107705/disable-output-buffering</a>"}], "tags": [], "owner": {"reputation": 71, "user_id": 2905510, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32e98fed4c347119823def187713fd1a?s=128&d=identicon&r=PG&f=1", "display_name": "Elixander Chen", "link": "https://stackoverflow.com/users/2905510/elixander-chen"}, "is_accepted": false, "score": 2, "last_activity_date": 1531902569, "creation_date": 1531902569, "answer_id": 51397133, "question_id": 30085538, "link": "https://stackoverflow.com/questions/30085538/change-flask-logs-from-info-to-debug/51397133#51397133", "title": "Change Flask logs from INFO to DEBUG", "body": "<p>Just in case anyone visits this place,</p>\n\n<p>I'm facing the same issue as well. It seems that print calls have the tendency to 'not run'. But if you use the logger instead of print you will find that codes are actually still running.</p>\n\n<p>Not quite sure what the reason is, but when other sections of my code starts running suddenly all the old prints will appear.</p>\n\n<p>tldr; don't use print, use logger</p>\n"}], "owner": {"reputation": 6683, "user_id": 2578042, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/aHYi1.jpg?s=128&g=1", "display_name": "ZekeDroid", "link": "https://stackoverflow.com/users/2578042/zekedroid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 18501, "favorite_count": 1, "accepted_answer_id": 30086809, "answer_count": 3, "score": 14, "last_activity_date": 1531902569, "creation_date": 1430939284, "question_id": 30085538, "link": "https://stackoverflow.com/questions/30085538/change-flask-logs-from-info-to-debug", "title": "Change Flask logs from INFO to DEBUG", "body": "<p>Flask by default will log things like GET and POST requests directly with an INFO tag. When implementing a custom logger, these are posted to the same logger and clutter my INFO layer. Is there a way to downgrade them to another layer like DEBUG?</p>\n\n<p>This is the logger I use:</p>\n\n<pre><code># create logger\nFORMAT = '%(asctime)s - %(module)s - %(levelname)s - Thread_name: %(threadName)s - %(message)s'\nlogging.basicConfig(\n    format=FORMAT, datefmt='%m/%d/%Y %I:%M:%S %p',\n    filename='wizard/logs/example.log', level=logging.DEBUG)\n</code></pre>\n"}, {"tags": ["python", "python-3.4"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 4848372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b775322b8bf5c6592de9dc3717c093?s=128&d=identicon&r=PG&f=1", "display_name": "tolbiac", "link": "https://stackoverflow.com/users/4848372/tolbiac"}, "edited": false, "score": 0, "creation_date": 1430941387, "post_id": 30085450, "comment_id": 48285297, "body": "Thanks, sorry I should have thought to use this before."}], "tags": [], "owner": {"reputation": 5833, "user_id": 4616655, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d900d7c15130c5fd4464aed9baa6af25?s=128&d=identicon&r=PG", "display_name": "MasterOdin", "link": "https://stackoverflow.com/users/4616655/masterodin"}, "is_accepted": true, "score": 1, "last_activity_date": 1430939028, "creation_date": 1430939028, "answer_id": 30085450, "question_id": 30085360, "link": "https://stackoverflow.com/questions/30085360/using-os-path-join-with-os-path-getsize-returning-filenotfounderror/30085450#30085450", "title": "Using os.path.join with os.path.getsize, returning FileNotFoundError", "body": "<p>When you're reading in a file, you need to be aware of how the data is being seperated. In this case, the read-in file has a filename once per line seperated out by that <code>\\n</code> operator. Need to strip it then before you use it.</p>\n\n<pre><code>for file_name in file_lines:\n    file_name = file_name.strip()\n    # rest of for loop\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 4848372, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b775322b8bf5c6592de9dc3717c093?s=128&d=identicon&r=PG&f=1", "display_name": "tolbiac", "link": "https://stackoverflow.com/users/4848372/tolbiac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 908, "favorite_count": 0, "accepted_answer_id": 30085450, "answer_count": 1, "score": 1, "last_activity_date": 1430939049, "creation_date": 1430938753, "question_id": 30085360, "link": "https://stackoverflow.com/questions/30085360/using-os-path-join-with-os-path-getsize-returning-filenotfounderror", "title": "Using os.path.join with os.path.getsize, returning FileNotFoundError", "body": "<p>In conjunction with my <a href=\"https://stackoverflow.com/questions/30041837/how-to-open-multiple-files-one-by-one-and-print-the-contents-in-python\">last question</a>, I'm onto printing the filenames with their sizes next to them in a sort of list. Basically I am reading filenames from one file (which are added by the user), taking the filename and putting it in the path of the working directory to print it's size one-by-one, however I'm having an issue with the following block:</p>\n\n<pre><code>print(\"\\n--- Stats ---\\n\")\n\nwith open('userdata/addedfiles', 'r') as read_files:\n        file_lines = read_files.readlines()\n\n        # get path for each file and find in trackedfiles\n        # use path to get size\n\n        print(len(file_lines), \"files\\n\")\n\n        for file_name in file_lines:\n        # the actual files should be in the same working directory\n            cwd = os.getcwd() \n\n            fpath = os.path.join(cwd, file_name)\n            fsize = os.path.getsize(fpath)\n\n            print(file_name.strip(), \"-- size:\", fsize)\n</code></pre>\n\n<p>which is returning this error:</p>\n\n<pre><code>tolbiac wpm-public \u2192 ./main.py --filestatus\n\n--- Stats ---\n\n1 files\n\nTraceback (most recent call last):\n  File \"./main.py\", line 332, in &lt;module&gt;\n    main()\n  File \"./main.py\", line 323, in main\n    parseargs()\n  File \"./main.py\", line 317, in parseargs\n    tracking()\n  File \"./main.py\", line 204, in tracking\n    fsize = os.path.getsize(fpath)\n  File \"/usr/lib/python3.4/genericpath.py\", line 50, in getsize\n    return os.stat(filename).st_size\nFileNotFoundError: [Errno 2] No such file or directory: '/home/tolbiac/code/wpm-public/file.txt\\n'\ntolbiac wpm-public \u2192 \n</code></pre>\n\n<p>So it looks like something is adding a \\n to the end of file_name, I'm not sure if thats something used in the getsize module, I tried this with os.stat, but it did the same thing. </p>\n\n<p>Any suggestions? Thanks.</p>\n"}, {"tags": ["python", "random"], "comments": [{"owner": {"reputation": 6178, "user_id": 4420934, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a512a390a9af72bcac92dcb903e5cdeb?s=128&d=identicon&r=PG&f=1", "display_name": "syntonym", "link": "https://stackoverflow.com/users/4420934/syntonym"}, "edited": false, "score": 0, "creation_date": 1430938230, "post_id": 30085150, "comment_id": 48283376, "body": "So your problem is not speed but how pythonic your solution is?"}], "answers": [{"comments": [{"owner": {"reputation": 12710, "user_id": 2653390, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ArNxx.jpg?s=128&g=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/2653390/shashank"}, "reply_to_user": {"reputation": 19590, "user_id": 1099876, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zMyTV.jpg?s=128&g=1", "display_name": "ndpu", "link": "https://stackoverflow.com/users/1099876/ndpu"}, "edited": false, "score": 1, "creation_date": 1430938647, "post_id": 30085271, "comment_id": 48283644, "body": "@ndpu The problem with random.sample is that it samples without replacement. You will not be able to generate strings like &#39;aa&#39;."}, {"owner": {"reputation": 4406, "user_id": 890610, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/eddf21571b25e3b31d7aeb62a749519c?s=128&d=identicon&r=PG", "display_name": "drjrm3", "link": "https://stackoverflow.com/users/890610/drjrm3"}, "edited": false, "score": 0, "creation_date": 1430939446, "post_id": 30085271, "comment_id": 48284138, "body": "This is actually much slower. Why would that be? I am looking for a line of length 60, if it matters. It takes maybe twice as long."}, {"owner": {"reputation": 12710, "user_id": 2653390, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ArNxx.jpg?s=128&g=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/2653390/shashank"}, "reply_to_user": {"reputation": 4406, "user_id": 890610, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/eddf21571b25e3b31d7aeb62a749519c?s=128&d=identicon&r=PG", "display_name": "drjrm3", "link": "https://stackoverflow.com/users/890610/drjrm3"}, "edited": false, "score": 1, "creation_date": 1430940578, "post_id": 30085271, "comment_id": 48284856, "body": "@Laurbert515 There are several reasons why it could be slower, so I&#39;m not sure. Benchmarks are often difficult to explain without rigorous testing and source code analysis. Instead of using <code>random.choice</code>, you could try <code>n = len(x) - 1; &#39;&#39;.join(x[randint(0, n)] for _ in xrange(N))</code> Who knows, it could be faster or slower than other methods. Or just use np.random.choice from the other answer."}], "tags": [], "owner": {"reputation": 12710, "user_id": 2653390, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ArNxx.jpg?s=128&g=1", "display_name": "Shashank", "link": "https://stackoverflow.com/users/2653390/shashank"}, "is_accepted": false, "score": 2, "last_activity_date": 1430938560, "last_edit_date": 1430938560, "creation_date": 1430938474, "answer_id": 30085271, "question_id": 30085150, "link": "https://stackoverflow.com/questions/30085150/fast-method-to-generate-random-string-sequence/30085271#30085271", "title": "Fast method to generate random string sequence", "body": "<p>Try using <a href=\"https://docs.python.org/2/library/random.html#random.choice\" rel=\"nofollow\"><code>random.choice</code></a> with <a href=\"https://docs.python.org/2/library/stdtypes.html#str.join\" rel=\"nofollow\"><code>str.join</code></a>.</p>\n\n<pre><code>&gt;&gt;&gt; x = 'abcd'\n&gt;&gt;&gt; ''.join(random.choice(x) for _ in range(10))\n'aabbdbadbc'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 289239, "user_id": 704848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f9be2c2958e208c8d9b629ac43c9c42?s=128&d=identicon&r=PG", "display_name": "EdChum", "link": "https://stackoverflow.com/users/704848/edchum"}, "is_accepted": false, "score": 0, "last_activity_date": 1430938532, "creation_date": 1430938532, "answer_id": 30085291, "question_id": 30085150, "link": "https://stackoverflow.com/questions/30085150/fast-method-to-generate-random-string-sequence/30085291#30085291", "title": "Fast method to generate random string sequence", "body": "<p>You can use <code>np.random.choice</code>:</p>\n\n<pre><code>In [13]:\n\nimport random\na = np.array(list('abcd'))\n%timeit ''.join(np.random.choice(a, 10000))\n\u200b\ndef gen_line(N):\n  tline = \"\"\n  for i in range(N):\n    xrand = random.random()\n    if( xrand &lt; 0.25 ):\n      ch = \"A\" \n    elif( xrand &lt; 0.50 ):\n      ch = \"B\" \n    elif( xrand &lt; 0.75 ):\n      ch = \"C\" \n    elif( xrand &lt; 1.00 ):\n      ch = \"D\" \n    else:\n      print(\"ERROR: xrand = %f\"%( xrand ))\n    tline = tline+ch\n  return tline\n\u200b\n%timeit gen_line(10000)\n100 loops, best of 3: 6.39 ms per loop\n100 loops, best of 3: 11.7 ms per loop\n</code></pre>\n"}], "owner": {"reputation": 4406, "user_id": 890610, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/eddf21571b25e3b31d7aeb62a749519c?s=128&d=identicon&r=PG", "display_name": "drjrm3", "link": "https://stackoverflow.com/users/890610/drjrm3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 370, "favorite_count": 0, "closed_date": 1430938340, "answer_count": 2, "score": 0, "last_activity_date": 1430939928, "creation_date": 1430938078, "last_edit_date": 1430939530, "question_id": 30085150, "link": "https://stackoverflow.com/questions/30085150/fast-method-to-generate-random-string-sequence", "closed_reason": "Duplicate", "title": "Fast method to generate random string sequence", "body": "<p>I have a function which returns a string of size <code>N</code> containing a random sequence of characters form a small set <code>{A,B,C,D}</code>. I generate this line as:</p>\n\n<pre><code>def gen_line(N):\n  tline = \"\"\n  for i in range(N):\n    xrand = random.random()\n    if( xrand &lt; 0.25 ):\n      ch = \"A\" \n    elif( xrand &lt; 0.50 ):\n      ch = \"B\" \n    elif( xrand &lt; 0.75 ):\n      ch = \"C\" \n    elif( xrand &lt; 1.00 ):\n      ch = \"D\" \n    else:\n      print \"ERROR: xrand = %f\"%( xrand )\n    tline = tline+ch\n  return tline\n</code></pre>\n\n<p>but this is, no doubt, a very inefficient way to do things. Is there a better, more pythonic, way to accomplish this?</p>\n"}, {"tags": ["python", "vagrant", "fabric"], "comments": [{"owner": {"reputation": 26589, "user_id": 1032785, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/30816b3d787c2bd9d6f036318304f225?s=128&d=identicon&r=PG", "display_name": "jordanm", "link": "https://stackoverflow.com/users/1032785/jordanm"}, "edited": false, "score": 0, "creation_date": 1430938489, "post_id": 30085000, "comment_id": 48283543, "body": "<code>127.0.0.1</code> is going to be wrong if you are trying to login to the VM. Take a look at <code>vagrant ssh-config</code>."}], "answers": [{"tags": [], "owner": {"reputation": 215643, "user_id": 50552, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/200c020bef60e4d9c4c4ba1c85442026?s=128&d=identicon&r=PG", "display_name": "Andomar", "link": "https://stackoverflow.com/users/50552/andomar"}, "is_accepted": false, "score": -1, "last_activity_date": 1430938870, "creation_date": 1430938870, "answer_id": 30085401, "question_id": 30085000, "link": "https://stackoverflow.com/questions/30085000/how-to-run-fabric-commands-on-vagrant/30085401#30085401", "title": "How to run Fabric commands on Vagrant", "body": "<p><a href=\"http://docs.vagrantup.com/v2/vagrantfile/ssh_settings.html\" rel=\"nofollow\">By default Vagrant</a> seems to forward tcp port 22 (ssh) to localhost port 4567.</p>\n\n<p>To listen on port 2222 instead, include this in your <code>Vagrantfile</code>:</p>\n\n<pre><code>config.vm.network \"forwarded_port\", guest: 22, host: 2222, id: 'ssh'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 215643, "user_id": 50552, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/200c020bef60e4d9c4c4ba1c85442026?s=128&d=identicon&r=PG", "display_name": "Andomar", "link": "https://stackoverflow.com/users/50552/andomar"}, "edited": false, "score": 0, "creation_date": 1431009638, "post_id": 30091274, "comment_id": 48319776, "body": "This looks like it would work!  But why would you regex parse the output of <code>vagrant ssh-config</code> when you can specify the port in the Vagrantfile?"}, {"owner": {"reputation": 50130, "user_id": 247542, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c125f576c3a08c0c1d4330bc565ae28c?s=128&d=identicon&r=PG", "display_name": "Cerin", "link": "https://stackoverflow.com/users/247542/cerin"}, "reply_to_user": {"reputation": 215643, "user_id": 50552, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/200c020bef60e4d9c4c4ba1c85442026?s=128&d=identicon&r=PG", "display_name": "Andomar", "link": "https://stackoverflow.com/users/50552/andomar"}, "edited": false, "score": 0, "creation_date": 1431023765, "post_id": 30091274, "comment_id": 48329098, "body": "I couldn&#39;t get Vagrant to work that way. Nothing was running on my local machine at the ports Vagrant claims to be forwarding on."}], "tags": [], "owner": {"reputation": 50130, "user_id": 247542, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c125f576c3a08c0c1d4330bc565ae28c?s=128&d=identicon&r=PG", "display_name": "Cerin", "link": "https://stackoverflow.com/users/247542/cerin"}, "is_accepted": false, "score": 2, "last_activity_date": 1430968330, "creation_date": 1430968330, "answer_id": 30091274, "question_id": 30085000, "link": "https://stackoverflow.com/questions/30085000/how-to-run-fabric-commands-on-vagrant/30091274#30091274", "title": "How to run Fabric commands on Vagrant", "body": "<p>Apparently, vagrant doesn't actually setup a port-forwarder, so the only way to connect to the VM is to get it's IP from <code>vagrant ssh-config</code> and then connect using that. So the correct vagrant Fabric task looks like:</p>\n\n<pre><code>@task\ndef vagrant():\n    result = local('vagrant ssh-config', capture=True)\n\n    hostname = re.findall(r'HostName\\s+([^\\n]+)', result)[0]\n    port = re.findall(r'Port\\s+([^\\n]+)', result)[0]\n    env.hosts = ['%s:%s' % (hostname, port)]\n\n    env.user = re.findall(r'User\\s+([^\\n]+)', result)[0]\n    env.key_filename = re.findall(r'IdentityFile\\s+([^\\n]+)', result)[0]\n</code></pre>\n"}], "owner": {"reputation": 50130, "user_id": 247542, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c125f576c3a08c0c1d4330bc565ae28c?s=128&d=identicon&r=PG", "display_name": "Cerin", "link": "https://stackoverflow.com/users/247542/cerin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1571, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1430968330, "creation_date": 1430937590, "question_id": 30085000, "link": "https://stackoverflow.com/questions/30085000/how-to-run-fabric-commands-on-vagrant", "title": "How to run Fabric commands on Vagrant", "body": "<p>How do you use <a href=\"http://www.fabfile.org/\" rel=\"nofollow\">Fabric</a> to script commands on <a href=\"https://www.vagrantup.com/\" rel=\"nofollow\">Vagrant-managed</a> VMs?</p>\n\n<p>I thought it was as simple as <a href=\"http://sysadminpy.com/sysadmin/2011/04/30/use-fabric-on-vagrant-instances/\" rel=\"nofollow\">this example</a>, but I can't get it to work.</p>\n\n<p>Vagrant by itself is working fine. I can run:</p>\n\n<pre><code>vagrant init\nvagrant up --provider=libvirt\nvagrant ssh\n</code></pre>\n\n<p>and connect through ssh just fine. However, using the Fabric example, if I try and run:</p>\n\n<pre><code>fab vagrant uname\n</code></pre>\n\n<p>it fails to connect with the error:</p>\n\n<pre><code>[127.0.0.1:2222] Executing task 'test_dev_env'\n[127.0.0.1:2222] run: uname -a\n\nFatal error: Low level socket error connecting to host 127.0.0.1 on port 2222: Connection refused (tried 1 time)\n\nUnderlying exception:\n    Connection refused\n\nAborting.\n</code></pre>\n\n<p>What is causing this error? As far as I know, <code>vagrant ssh</code> should be running the same ssh command as Fabric. But sure enough, even if I manually run the ssh command:</p>\n\n<pre><code>ssh -i /myproject/.vagrant/machines/default/libvirt/private_key -p 2222 vagrant@127.0.0.1\n</code></pre>\n\n<p>I also get the error:</p>\n\n<pre><code>ssh: connect to host 127.0.0.1 port 2222: Connection refused\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}]