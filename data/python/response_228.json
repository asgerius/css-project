[{"tags": ["python", "web.py"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5960531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/247cc075cdad197438ba48719712868d?s=128&d=identicon&r=PG", "display_name": "Evan", "link": "https://stackoverflow.com/users/5960531/evan"}, "edited": false, "score": 0, "creation_date": 1558644556, "post_id": 56266454, "comment_id": 99179410, "body": "That worked, combined with the edit I&#39;ve made to the original post. Thanks!"}], "tags": [], "owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "is_accepted": true, "score": 3, "last_activity_date": 1558638315, "last_edit_date": 1558638315, "creation_date": 1558569781, "answer_id": 56266454, "question_id": 56266419, "link": "https://stackoverflow.com/questions/56266419/how-to-read-txt-file-without-readlines-replace-utf-8-newline-character-wit/56266454#56266454", "title": "How to read .txt file without .readlines() / replace UTF-8 newline character with \\n?", "body": "<p>Your file already contains newlines (<code>'\\x0a'</code> is an escape for the exact same character that <code>'\\n'</code> produces). I'm assuming your renderer is sending out HTML though, and HTML doesn't care about newlines in the text (outside of <code>pre</code> blocks, and other blocks styled similarly).</p>\n\n<p>So either wrap the data in a <code>pre</code> block, or replace the <code>'\\n'</code> with <code>&lt;br&gt;</code> tags (which are how HTML says \"No, really, I want a line break\"), e.g.:</p>\n\n<pre><code>from_text = from_text.replace(\"\\n\", \"&lt;br&gt;\\n\")\n</code></pre>\n\n<p>Leaving in the newlines may be handy to people viewing the source, so I replaced with both the <code>&lt;br&gt;</code> tag and a newline (Python won't replace in a replacement, so don't worry about infinite replacement just because the newline was part of the replacement).</p>\n"}], "owner": {"reputation": 73, "user_id": 5960531, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/247cc075cdad197438ba48719712868d?s=128&d=identicon&r=PG", "display_name": "Evan", "link": "https://stackoverflow.com/users/5960531/evan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 251, "favorite_count": 0, "accepted_answer_id": 56266454, "answer_count": 1, "score": 0, "last_activity_date": 1558644403, "creation_date": 1558569515, "last_edit_date": 1558644403, "question_id": 56266419, "link": "https://stackoverflow.com/questions/56266419/how-to-read-txt-file-without-readlines-replace-utf-8-newline-character-wit", "title": "How to read .txt file without .readlines() / replace UTF-8 newline character with \\n?", "body": "<p>I have some AI-generated nonsense in a .txt file that looks like this:</p>\n\n<pre><code>MENENIUS:\nI have been they prayers of the reason,\nAnd away to friends than the state pointer;\nThe words that shall can virtue to your head.\n</code></pre>\n\n<p>I have some Python code (using <a href=\"http://webpy.org/tutorial3.en\" rel=\"nofollow noreferrer\">web.py</a>) that looks like this:</p>\n\n<pre><code>class index(object):\n    def GET(self):\n        text = open(\"menenius.txt\", \"r\").read() \n        return render.index(text)\n</code></pre>\n\n<p>When I view it in localhost, it looks like this:</p>\n\n<pre><code>MENENIUS: I have been they prayers of the reason, And away to friends than the state pointer; The words that shall can virtue to your head.\n</code></pre>\n\n<p>Menenius' little speech is actually just one clipping of a much larger .txt file, so I don't want to use <code>.readlines()</code> as going over the list will be memory-intensive. If that weren't an issue, in a normal script I'd be able to just print the list that <code>.readlines()</code> generates, but the fact that I'm using web.py and need to get this into <code>render.index()</code> complicates things.</p>\n\n<h2>What I've Tried</h2>\n\n<p>My first thought was to use the <code>.replace()</code> method in the script that generates menenius.txt to replace every instance of the invisible UTF-8 newline character with <code>\\n</code>. Since <code>.read()</code> gives you the entire .txt file as a single string, I thought that would work but doing this:</p>\n\n<pre><code>from_text = open(\"menenius.txt\", \"r\").read()\nfrom_text.replace(0x0A, \"\\n\")\n</code></pre>\n\n<p>Gets me this error, referring to the line with <code>.replace()</code>:</p>\n\n<pre><code>TypeError: expected a character buffer object\n</code></pre>\n\n<p>Which I've googled, but none of it seems very applicable or very clear. I'm just starting out with Python and I've been going around in circles with this for a couple of hours, so I feel like there's something really obvious here that I don't know about.</p>\n\n<hr>\n\n<p>As I mentioned I've also tried returning the list that <code>.readlines()</code> generates, but that's going to get memory-intensive and I'm not sure how to fit that output into <code>render.index()</code> anyway.</p>\n\n<h2>Edit: The Solution</h2>\n\n<p>So the answer below works, but after I made that change I was still having the same issue. ShadowRanger's \"I'm assuming your renderer is sending out HTML\" got me thinking, and I opened up localhost and got into the web inspector to see that all the text was in quotation marks within its <code>p</code> tags, like so:</p>\n\n<pre><code>&lt;p&gt;\n\"MENENIUS: I have been they prayers of the reason, And away to friends than the state pointer; The words that shall can virtue to your head.\"\n&lt;/p&gt;\n</code></pre>\n\n<p>I came back to this after a few hours having realised something. In the <code>index.html</code> file the content was being sent to, it looked like this:</p>\n\n<pre><code>&lt;p&gt;\n$content\n&lt;/p&gt;\n</code></pre>\n\n<p>I had a suspicion, checked the <a href=\"http://webpy.org/tutorial3.en\" rel=\"nofollow noreferrer\">web.py intro tutorial</a> again and found this:</p>\n\n<blockquote>\n  <p>As you can see, the templates look a lot like Python files except for the def with statement at the top (saying what the template gets called with) and the $s placed in front of any code. Currently, template.py requires the $def statement to be the first line of the file. Also, note that web.py automatically escapes any variables used here, so that if for some reason name is set to a value containing some HTML, it will get properly escaped and appear as plain text. If you want to turn this off, write $:name instead of $name.</p>\n</blockquote>\n\n<p>I changed <code>$content</code> to <code>$:content</code>, and suddenly the text is being rendered as HTML rather than as a string.</p>\n"}, {"tags": ["python", "optimization", "gurobi", "quadratic-programming"], "comments": [{"owner": {"reputation": 2127, "user_id": 3453768, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RpSGc.png?s=128&g=1", "display_name": "LarrySnyder610", "link": "https://stackoverflow.com/users/3453768/larrysnyder610"}, "edited": false, "score": 1, "creation_date": 1558575243, "post_id": 56266418, "comment_id": 99149901, "body": "Some of the quadratic constraints in your model are not convex, so your <code>Q</code> matrix is not positive semidefinite. You won&#39;t be able to &quot;trick&quot; it into being PSD by rewriting the constraints."}, {"owner": {"reputation": 35, "user_id": 11537523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a122aaa15c5e996bdc5c942dccb8ac4?s=128&d=identicon&r=PG&f=1", "display_name": "Engineering45", "link": "https://stackoverflow.com/users/11537523/engineering45"}, "reply_to_user": {"reputation": 2127, "user_id": 3453768, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RpSGc.png?s=128&g=1", "display_name": "LarrySnyder610", "link": "https://stackoverflow.com/users/3453768/larrysnyder610"}, "edited": false, "score": 0, "creation_date": 1558590068, "post_id": 56266418, "comment_id": 99152602, "body": "So if I change these non-convex constraints to convex constraints (by replacing them), the entire Q matrix will become positive semi-definite? Or can I restrict the bounds of the non-convex quadratic equations to regions of convexity?"}, {"owner": {"reputation": 10888, "user_id": 5625534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d4mCF.jpg?s=128&g=1", "display_name": "Erwin Kalvelagen", "link": "https://stackoverflow.com/users/5625534/erwin-kalvelagen"}, "edited": false, "score": 1, "creation_date": 1558594183, "post_id": 56266418, "comment_id": 99154004, "body": "This is a tiny problem, so you could feed this easily into a global solver (e.g. Antigone, Baron or Couenne)."}, {"owner": {"reputation": 2127, "user_id": 3453768, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/RpSGc.png?s=128&g=1", "display_name": "LarrySnyder610", "link": "https://stackoverflow.com/users/3453768/larrysnyder610"}, "reply_to_user": {"reputation": 10888, "user_id": 5625534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d4mCF.jpg?s=128&g=1", "display_name": "Erwin Kalvelagen", "link": "https://stackoverflow.com/users/5625534/erwin-kalvelagen"}, "edited": false, "score": 0, "creation_date": 1558612740, "post_id": 56266418, "comment_id": 99163927, "body": "I agree. Just to add to @ErwinKalvelagen&#39;s point, those solvers can handle nonconvex problems. They are generally much slower than convex solvers like Gurobi, but since your problem is very small, they have a chance of working. I don&#39;t know offhand whether these solvers can handle <i>general</i> integer (x = 0, 1, 2, 3, 4...) variables -- do you know Erwin?"}, {"owner": {"reputation": 10888, "user_id": 5625534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d4mCF.jpg?s=128&g=1", "display_name": "Erwin Kalvelagen", "link": "https://stackoverflow.com/users/5625534/erwin-kalvelagen"}, "edited": false, "score": 1, "creation_date": 1558613935, "post_id": 56266418, "comment_id": 99164526, "body": "Yes, these global solvers can handle general integers and more general non-linear expressions. I think the model still needs some work. (I suspect the model will select only one class and not a mix). Of course, a scalar model with x1,x2,x3 is not really what we want to see."}, {"owner": {"reputation": 35, "user_id": 11537523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a122aaa15c5e996bdc5c942dccb8ac4?s=128&d=identicon&r=PG&f=1", "display_name": "Engineering45", "link": "https://stackoverflow.com/users/11537523/engineering45"}, "reply_to_user": {"reputation": 10888, "user_id": 5625534, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/d4mCF.jpg?s=128&g=1", "display_name": "Erwin Kalvelagen", "link": "https://stackoverflow.com/users/5625534/erwin-kalvelagen"}, "edited": false, "score": 0, "creation_date": 1558989629, "post_id": 56266418, "comment_id": 99271080, "body": "@ErwinKalvelagen, I finally obtained a license for BARON and it worked. Thanks a ton for the suggestion, you really helped me out!"}], "owner": {"reputation": 35, "user_id": 11537523, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a122aaa15c5e996bdc5c942dccb8ac4?s=128&d=identicon&r=PG&f=1", "display_name": "Engineering45", "link": "https://stackoverflow.com/users/11537523/engineering45"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 339, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1558582047, "creation_date": 1558569510, "last_edit_date": 1558582047, "question_id": 56266418, "link": "https://stackoverflow.com/questions/56266418/how-can-i-re-write-my-constraints-to-be-positive-semi-definite-in-my-optimizatio", "title": "How can I re-write my constraints to be Positive Semi-Definite in my Optimization code?", "body": "<p>I'm currently writing an optimization algorithm for a seating layout on a boeing 777x but using gurobi through python, but in order to do the quadratic optimization, my constraints need to be a positive semi-definite matrix (Q). How can I rewrite my simple constraints to be positive definite or positive semi-definite? Any help is welcome!</p>\n\n<p>I have already tried deleting and altering the constraints to no success.</p>\n\n<pre><code># !/usr/bin/python\nfrom gurobipy import *\n\n# Create the model to be used in the terminal\nm = Model(\"777x Optimization\")\n\n# Name and Create the variables\nx1 = m.addVar(name=\"First-Class Seat Pitch [in]\")\nx2 = m.addVar(name=\"First-Class Seat Width [in]\")\nx3 = m.addVar(name=\"First-Class Seat Thickness [in]\")\nx4 = m.addVar(name=\"Premium-Economy Seat Pitch [in]\")\nx5 = m.addVar(name=\"Premium-Economy Seat Width [in]\")\nx6 = m.addVar(name=\"Premium-Economy Seat Thickness [in]\")\nx7 = m.addVar(name=\"Number of First-Class Rows\")\nx8 = m.addVar(name=\"Number of Premium-Economy Rows\")\nx9 = m.addVar(name=\"Number of First-Class Seats Per Row\")\nx10 = m.addVar(name=\"Number of Premium-Economy Seats per Row\")\n\n# Set objective: f(x1,x2,x3,x4,x5,x6,x7,x8,x9,x10)\nobj = x7*(x1+x2+x3) + x8*(x4+x5+x6)\nm.setObjective(obj, GRB.MINIMIZE)\n\n# Add constraints\n# m.addConstr((x7*x1*x2)+(x4*x5*x8) &lt;= 342625, \"Area Constraint\")\nm.addConstr(-1512*x8*x10 - 5410*x7*x9 &lt;= -202182, \"Ticket Revenue     Constraint\")\nm.addConstr(0.25*-x5 + 0.35*-x6 +0.4*-x4 &lt;= -18.6975, \"Premium-    Economy Comfort Level Constraint\")\nm.addConstr(0.25*-x2 + 0.35*-x3 +0.4*-x1 &lt;= -29.16, \"First-Class     Economy Comfort Constraint\")\nm.addConstr(-x8*x10 + 1.4*x7*x9 &lt;= 0 , \"Ratio of First Class to     Economy Class Seats Constraint\")\nm.addConstr(-x1 &lt;= -57, \"Minimum First-Class Pitch Constraint\")\nm.addConstr(-x2 &lt;= -25, \"Minimum First-Class Width Constraint\")\nm.addConstr(-x3 &lt;= -3, \"Minimum First-Class Thickness Constraint\")\nm.addConstr(-x4 &lt;= -36, \"Minimum Premium-Economy Pitch Constraint\")\nm.addConstr(-x5 &lt;= -18.5, \"Minimum Premium-Economy Width Constraint\")\nm.addConstr(-x6 &lt;= -1.5, \"Minimum Premium-Economy Thickness Constraint\")\nm.addConstr(x7*x1 + x8*x4 &lt;= 1470, \"Rows Constraint\")\nm.addConstr(x9*x2 &lt;= 163.128, \"Seats Per Row Constraint First-Class\")\nm.addConstr(x10*x5 &lt;= 163.128, \"Seats Per Row Constraint Premium-Economy\")\nm.optimize()\n\nfor v in m.getVars():\n     print('%s %g' % (v.varName, v.x))\n\nprint('Obj: %g' % obj.getValue())\n\n\n\nGurobiError: Q matrix is not positive semi-definite (PSD)\n\nOptimize a model with 8 rows, 10 columns and 12 nonzeros\nModel has 6 quadratic objective terms\nModel has 5 quadratic constraints\nCoefficient statistics:\n  Matrix range     [2e-01, 1e+00]\n  QMatrix range    [1e+00, 5e+03]\n  Objective range  [0e+00, 0e+00]\n  QObjective range [2e+00, 2e+00]\n  Bounds range     [0e+00, 0e+00]\n  RHS range        [2e+00, 6e+01]\n  QRHS range       [2e+02, 2e+05]\nPresolve removed 8 rows and 2 columns\n</code></pre>\n"}, {"tags": ["python", "windows", "pyinstaller", "python-3.7", "pyexcel"], "answers": [{"tags": [], "owner": {"reputation": 141, "user_id": 11326823, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyKzRQlo5YA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcO5JZvJsm_mM8zacKdjUxHuiLRZg/mo/photo.jpg?sz=128", "display_name": "Gabriel Pena", "link": "https://stackoverflow.com/users/11326823/gabriel-pena"}, "is_accepted": false, "score": 0, "last_activity_date": 1558620880, "creation_date": 1558620880, "answer_id": 56277205, "question_id": 56266399, "link": "https://stackoverflow.com/questions/56266399/writing-to-excel-files-with-pyexcel-not-working-on-pyinstaller-bundled-exe-wind/56277205#56277205", "title": "Writing to Excel files with PyExcel not working on PyInstaller bundled exe (Windows), writes empty-corrupt files", "body": "<p>I got this working simply by EXPLICITLY importing the plugins on the code. </p>\n\n<pre><code>import pyexcel_xlsx\nimport pyexcel_ods\n</code></pre>\n\n<p>This seems kinda ugly though..</p>\n"}], "owner": {"reputation": 141, "user_id": 11326823, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-pyKzRQlo5YA/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcO5JZvJsm_mM8zacKdjUxHuiLRZg/mo/photo.jpg?sz=128", "display_name": "Gabriel Pena", "link": "https://stackoverflow.com/users/11326823/gabriel-pena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 635, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558620880, "creation_date": 1558569325, "last_edit_date": 1558589427, "question_id": 56266399, "link": "https://stackoverflow.com/questions/56266399/writing-to-excel-files-with-pyexcel-not-working-on-pyinstaller-bundled-exe-wind", "title": "Writing to Excel files with PyExcel not working on PyInstaller bundled exe (Windows), writes empty-corrupt files", "body": "<p>I was using PyExcel with its ODS and XLSX plugins to write data to LibreOffice and Excel sheets. The program worked perfectly fine when executed on the Python interpreter, but I just found it's not working when I execute the program from a PyInstaller executable (I'm working on Windows 10). To be more specific, the files are created but they seem to be corrupt (0kB file with unrecognized format), but no error messages are shown neither on the output console or the PyInstaller build process. I managed to create a minimal example that shows exactly what the problem is. </p>\n\n<p>To begin with, this uses Python 3.7.3, PyInstaller 3.4, and the last PyExcel version with its plugins. Also, I needed pywin32 library in order to get PyInstaller working. I'm copying here the code of the minimal example, including the console script I used to build the exe file. As told, works perfectly on the Python interpreter, but the built executable only writes corrupt files.</p>\n\n<p>-- open_dialog.py --</p>\n\n<pre><code>from tkinter import filedialog\n\n\ndef open_dialog():\n    file = filedialog.asksaveasfile(mode='wb',\n                                       title='Export',\n                                       defaultextension='xlsx',\n                                       filetypes=([(\"XLSX\", \".xlsx\"),\n                                         (\"ODS\", \".ods\"),\n                                         (\"All files\", \".*\")])\n                                       )\n    if file is None:\n        raise Exception()\n\n    return file\n</code></pre>\n\n<p>-- main.py --</p>\n\n<pre><code>from collections import OrderedDict\n\nimport pyexcel\n\nfrom open_dialog import open_dialog\n\ntry:\n    with open_dialog() as file:\n\n        sheet_1 = []\n        sheet_1.append(['Sheet 1'])\n        sheet_1.append([''])\n\n        sheet_2 = []\n        sheet_2.append(['Sheet 2'])\n        sheet_2.append([''])\n\n        book = OrderedDict()\n        book[\"Sheet 1\"] = sheet_1\n        book[\"Sheet 2\"] = sheet_2\n        book_excel = pyexcel.get_book(bookdict=book)\n\n        book_excel.save_as(file.name)\n\nexcept Exception:\n    print(\"Failed to write file\")\n</code></pre>\n\n<p>-- build_windows.bat --</p>\n\n<pre><code>set PYTHONPATH=.\nPyInstaller \"main.py\" ^\n--name \"test\" ^\n--clean ^\n--distpath \"exe\" ^\n--hidden-import pyexcel ^\n--hidden-import pyexcel.plugins.renderers.excel ^\n--hidden-import pyexcel.plugins.renderers._texttable ^\n--hidden-import pyexcel.plugins.parsers.excel ^\n--hidden-import pyexcel.plugins.sources.http ^\n--hidden-import pyexcel.plugins.sources.file_input ^\n--hidden-import pyexcel.plugins.sources.memory_input ^\n--hidden-import pyexcel.plugins.sources.file_output ^\n--hidden-import pyexcel.plugins.sources.output_to_memory ^\n--hidden-import pyexcel.plugins.sources.pydata.bookdict ^\n--hidden-import pyexcel.plugins.sources.pydata.dictsource ^\n--hidden-import pyexcel.plugins.sources.pydata.arraysource ^\n--hidden-import pyexcel.plugins.sources.pydata.records ^\n--hidden-import pyexcel_io ^\n--hidden-import pyexcel_io.readers ^\n--hidden-import pyexcel_io.writers ^\n--hidden-import pyexcel_io.database ^\n--hidden-import pyexcel_io ^\n--hidden-import pyexcel_ods ^\n--hidden-import pyexcel_ods.odsw ^\n--hidden-import pyexcel_xlsx ^\n--hidden-import pyexcel_xlsx.xlsxw ^\n</code></pre>\n\n<p>I'm not sure if I'm missing some important hidden import or what is really going on. It'd be really useful if someone can help me crack this. Thanks in advance.</p>\n\n<p><em>EDIT</em>: adding the line</p>\n\n<p><code>traceback.print_exc()</code></p>\n\n<p>inside the <em>except</em> block, showed that there's actually an exception being raised:</p>\n\n<pre><code>pyexcel_io.exceptions.SupportingPluginAvailableButNotInstalled: Please install one of these plugins for write data in 'xlsx': pyexcel-xlsx,pyexcel-xlsxw\n</code></pre>\n\n<p>So, it's actually not detecting the plugins, even though I am indicating the hidden imports. I'm pretty confused.</p>\n"}, {"tags": ["python", "python-3.x", "salesforce"], "comments": [{"owner": {"reputation": 1, "user_id": 11542112, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FYAfD1MTUzs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcWG3_tviAjli2qIPuIUYMvuMc8Ig/mo/photo.jpg?sz=128", "display_name": "Jack Atkinson-Willes", "link": "https://stackoverflow.com/users/11542112/jack-atkinson-willes"}, "edited": false, "score": 0, "creation_date": 1558569150, "post_id": 56266375, "comment_id": 99148841, "body": "I&#39;m using Windows as my OS"}, {"owner": {"reputation": 788, "user_id": 7165525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wFCXH.jpg?s=128&g=1", "display_name": "matoneski", "link": "https://stackoverflow.com/users/7165525/matoneski"}, "edited": false, "score": 0, "creation_date": 1558573750, "post_id": 56266375, "comment_id": 99149645, "body": "Hi Jack, to keep your code readable - make sure you put it into code blocks format which will help with someone finding a solution faster for you. Also, when editing, update the question with an edit label."}], "answers": [{"tags": [], "owner": {"reputation": 1697, "user_id": 1159783, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ilvZZ.jpg?s=128&g=1", "display_name": "David Reed", "link": "https://stackoverflow.com/users/1159783/david-reed"}, "is_accepted": false, "score": 0, "last_activity_date": 1558571354, "creation_date": 1558571354, "answer_id": 56266615, "question_id": 56266375, "link": "https://stackoverflow.com/questions/56266375/downloading-images-from-salesforce-url-using-python/56266615#56266615", "title": "Downloading images from Salesforce URL using Python", "body": "<p><code>simple_salesforce</code> is the right package to access Salesforce, but the way you're using it doesn't really fit with the typical pathway. You don't need to touch <code>SalesforceLogin</code> or <code>SFType</code>; those are mostly internal. Just do</p>\n\n<pre><code>sf = Salesforce(username=username, password=password, security_token=security_token, sandbox=False)\n</code></pre>\n\n<p>Then, query for your records</p>\n\n<pre><code>records = sf.query(\"SELECT Id, Name,C_digo_del_Usuario__c,Tratamiento_IPA__c,Estado__c,Municipio__c,Comunidad__c, URL_Fotograf_a_Cliente__c FROM Contact WHERE Tratamiento_IPA__c IN ('x', 'y', 'z')\")\nfor r in records.get(\"records\"):\n    url = record[\"URL_Fotograf_a_Cliente__c\"]\n    # Now, download the image and save it.\n    # other record details are available as, e.g., `record[\"Name\"]`\n</code></pre>\n\n<p>How exactly you download the image depends on whether it's hosted on Salesforce and requires authentication to access or not. I'm assuming it's simply an external URL, in which case you can use <code>requests</code> or your library of choice to make a request for the data and save it to disk.</p>\n"}, {"tags": [], "owner": {"reputation": 12459, "user_id": 313628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65cc4bfb516d8733f4d98d07ad82a458?s=128&d=identicon&r=PG", "display_name": "eyescream", "link": "https://stackoverflow.com/users/313628/eyescream"}, "is_accepted": false, "score": 0, "last_activity_date": 1558591501, "creation_date": 1558591501, "answer_id": 56268939, "question_id": 56266375, "link": "https://stackoverflow.com/questions/56266375/downloading-images-from-salesforce-url-using-python/56268939#56268939", "title": "Downloading images from Salesforce URL using Python", "body": "<p>I've never written a line of Python code in my life but hopefully between this and David's answer you'll get somewhere.</p>\n\n<p>Are the images uploaded to Salesforce? They're most likely in <a href=\"https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_objects_attachment.htm\" rel=\"nofollow noreferrer\">Attachment</a> or File (<a href=\"https://developer.salesforce.com/docs/atlas.en-us.api.meta/api/sforce_api_objects_contentversion.htm\" rel=\"nofollow noreferrer\">ContentVersion</a>) table. You could try to inspect the URL. All attachment record ids start with <code>00P</code>.</p>\n\n<p>I'mnot sure what your package uses, SOAP or REST API. In SOAP API you can get the body directly, as base64-encoded string. In REST API you can get a direct download URL.</p>\n\n<pre><code>SELECT Id, Name, Body, BodyLength, ContentType\nFROM Attachment\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/3ymGB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3ymGB.png\" alt=\"Query results from developer console (REST API)\"></a></p>\n\n<p>So you'd base64-decode it, rename &amp; save...</p>\n\n<p>If something was uploaded to Files then it's similar process, just different table. This blog post looks like good start: <a href=\"https://crmcog.com/retrieve-sfdc-attachments-using-rest/\" rel=\"nofollow noreferrer\">https://crmcog.com/retrieve-sfdc-attachments-using-rest/</a></p>\n"}], "owner": {"reputation": 1, "user_id": 11542112, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FYAfD1MTUzs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcWG3_tviAjli2qIPuIUYMvuMc8Ig/mo/photo.jpg?sz=128", "display_name": "Jack Atkinson-Willes", "link": "https://stackoverflow.com/users/11542112/jack-atkinson-willes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 700, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1558591501, "creation_date": 1558569043, "last_edit_date": 1558577211, "question_id": 56266375, "link": "https://stackoverflow.com/questions/56266375/downloading-images-from-salesforce-url-using-python", "title": "Downloading images from Salesforce URL using Python", "body": "<p>I have a csv of a series of contacts from Salesforce with the name, location and a URL that opens an image which I need to download</p>\n\n<p>Thus far I have only been able to access my Salesforce instance using Python but am struggling to find a means of using a python package to not only open the URL, but also download the image in .jpg format and rename it with the name and location of the client. </p>\n\n<p>Is there any package available that would allow my to do this. I've tried using <code>simple-salesforce</code> but I don't think it has this capability.</p>\n\n<p>Below is the code i have so far showing a query that returns all the contacts that I need to download the URL link for (<code>URL_Fotograf_a_Cliente__c</code>), but I haven't got any further than that</p>\n\n<pre><code>from simple_salesforce import Salesforce, SFType, SalesforceLogin\nimport pandas as pd\nimport json\nfrom pprint import pprint as pp\n\nsession_id, instance = SalesforceLogin(username= username, password=password, security_token=security_token, sandbox=False)\n\nprint(session_id,instance)\n\nsf = Salesforce(instance= instance, session_id=session_id)\n\nSOQL= \"SELECT Id, Name,C_digo_del_Usuario__c,Tratamiento_IPA__c,Estado__c,Municipio__c,Comunidad__c, URL_Fotograf_a_Cliente__c FROM Contact WHERE Tratamiento_IPA__c IN ('x', 'y', 'z')\"\n\npp(sf.query(query = SOQL))\n</code></pre>\n"}, {"tags": ["python", "apache-spark", "pyspark", "apache-kafka", "spark-streaming"], "owner": {"reputation": 11, "user_id": 11542113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eba0b868ebfe6e5dffa32ebf65f5a9c0?s=128&d=identicon&r=PG&f=1", "display_name": "Amlan", "link": "https://stackoverflow.com/users/11542113/amlan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1558570748, "creation_date": 1558569015, "last_edit_date": 1558570748, "question_id": 56266371, "link": "https://stackoverflow.com/questions/56266371/how-to-join-three-dstreams-in-spark-streaming-using-python", "title": "How to join three DStreams in Spark streaming using Python", "body": "<p>I have three kafka producers which are sending data streams on the same topic at random intervals between 5-10 seconds. There is a  Spark consumer (python based ) which is consuming the data. </p>\n\n<p>The requirement is to first separate the incoming stream into 3 separate streams in the consumer and then join them on the basis of a column. The producers are developed using Python. </p>\n\n<p>I have been successfully able to divide the incoming datastream into 3 separate streams in Python. However, I face the issue in joining all 3 back together based on a key, which is the first value in the incoming data stream. </p>\n\n<p>When I am joining 2 streams, the join is working as expected. \nHowever, when I am joining all 3 streams, I am not getting any output.</p>\n\n<pre><code>P1.LeftOuterJoin(P2) # works\nP1.LeftOuterJoin(P3) # works\nP2.Join(P3) # works\n\nP1.LeftOuterJoin(P2.Join(P3)) # no output coming up\n</code></pre>\n"}, {"tags": ["python", "operating-system"], "answers": [{"tags": [], "owner": {"reputation": 10628, "user_id": 4565947, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e5b166ea39cc61a22e0c04a67ef53bd7?s=128&d=identicon&r=PG&f=1", "display_name": "Julien", "link": "https://stackoverflow.com/users/4565947/julien"}, "is_accepted": true, "score": 2, "last_activity_date": 1558597641, "last_edit_date": 1558597641, "creation_date": 1558569291, "answer_id": 56266396, "question_id": 56266369, "link": "https://stackoverflow.com/questions/56266369/how-to-make-a-for-loop-read-files-using-a-specific-pattern/56266396#56266396", "title": "How to make a for loop read files using a specific pattern", "body": "<p>Check this out:</p>\n\n<pre><code>my_list = [\"frame1.jpg\", \"frame10.jpg\", \"frame101.jpg\", \"frame102.jpg\", \"frame11.jpg\", \"frame12.jpg\", \"frame2.jpg\"]\nmy_list.sort(key=lambda name: int(name[5:-4]))\nprint(my_list)\n</code></pre>\n\n<p>Explanation: </p>\n\n<pre><code>key=lambda name: int(name[5:-4])\n</code></pre>\n\n<p>is the the function that is used to sort, it extracts the part of the name string that correspond to the number of your frame and converts it to <code>int</code>.</p>\n\n<p>Now you just need to plug in <code>my_list = os.listdir(\"./images1\")</code>, sort it, and iterate over it.</p>\n"}, {"tags": [], "owner": {"reputation": 56, "user_id": 6484158, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uoc-Al7rb-Q/AAAAAAAAAAI/AAAAAAAAAEM/F1RBJGXWbjM/photo.jpg?sz=128", "display_name": "Nithin Reddy", "link": "https://stackoverflow.com/users/6484158/nithin-reddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1558571028, "creation_date": 1558571028, "answer_id": 56266586, "question_id": 56266369, "link": "https://stackoverflow.com/questions/56266369/how-to-make-a-for-loop-read-files-using-a-specific-pattern/56266586#56266586", "title": "How to make a for loop read files using a specific pattern", "body": "<p>If you know the path exactly then you can also try this:</p>\n\n<pre><code>folder_path = \"&lt;insert folder location&gt;\" \n\nfor i in range(1, no_of_frames):\n     file_name = f\"{folder_path}/frame{i}.jpg\"\n     do what you want here\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 11253732, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43cd95ffb9151cfab84f846c1eaffecc?s=128&d=identicon&r=PG&f=1", "display_name": "Juan Ramos", "link": "https://stackoverflow.com/users/11253732/juan-ramos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 56266396, "answer_count": 2, "score": 0, "last_activity_date": 1558597641, "creation_date": 1558569004, "question_id": 56266369, "link": "https://stackoverflow.com/questions/56266369/how-to-make-a-for-loop-read-files-using-a-specific-pattern", "title": "How to make a for loop read files using a specific pattern", "body": "<p>I extracted a lot of images from a video and now I have folder that has the following names:</p>\n\n<ol>\n<li><p>frame1.jpg</p></li>\n<li><p>frame2.jpg </p></li>\n<li>.... </li>\n<li><p>frame10.jpg</p></li>\n<li><p>frame11.jpg</p></li>\n<li>frame12.jpg</li>\n<li>....</li>\n<li>frame101.jpg</li>\n<li>frame102.jpg</li>\n<li>....</li>\n</ol>\n\n<p>I used this code to try and transform each image:</p>\n\n<pre><code> `for files in os.listdir(\"./images1\"):\n          do something to tranform`\n</code></pre>\n\n<p>I printed the file names and they were not coming out in order. They were coming out like this <code>1,10,100,1000,1000</code> then <code>11,12,13,14</code>. I would like an output of,<code>1,2,3,4,5...</code> since it's a video and chronological order is important. </p>\n"}, {"tags": ["python", "capitalization", "capitalize"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11426584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1acc3368463a6e4578f692a0490b224?s=128&d=identicon&r=PG&f=1", "display_name": "kevinSmith", "link": "https://stackoverflow.com/users/11426584/kevinsmith"}, "edited": false, "score": 1, "creation_date": 1558571624, "post_id": 56266426, "comment_id": 99149295, "body": "Thanks, this worked great! I dont use list as a variable name, just changed it for demonstration :-)"}], "tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 1, "last_activity_date": 1558569604, "creation_date": 1558569604, "answer_id": 56266426, "question_id": 56266360, "link": "https://stackoverflow.com/questions/56266360/how-to-capitalize-certain-index-of-a-string-in-a-list/56266426#56266426", "title": "How to capitalize certain index of a string in a list?", "body": "<p>If they all start that way, then I think this would do what you want.</p>\n\n<p><code>list_ = [i[:3] + i[3:].capitalize() for i in list_]</code></p>\n\n<p>Note that you shouldn't use the built in keyword <code>list</code> as a variable name (it covers over its purpose in the code).</p>\n"}, {"tags": [], "owner": {"reputation": 1669, "user_id": 9042078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6avg1.jpg?s=128&g=1", "display_name": "Vasu Deo.S", "link": "https://stackoverflow.com/users/9042078/vasu-deo-s"}, "is_accepted": false, "score": 1, "last_activity_date": 1558569635, "creation_date": 1558569635, "answer_id": 56266431, "question_id": 56266360, "link": "https://stackoverflow.com/questions/56266360/how-to-capitalize-certain-index-of-a-string-in-a-list/56266431#56266431", "title": "How to capitalize certain index of a string in a list?", "body": "<p>TRY:-</p>\n\n<pre><code>list1 = [ \"* [context......\", \"* [context1......\" ]\n\nfor x in list1:\n\n    print(x[:3] + x[3].capitalize() + x[4:])\n</code></pre>\n\n<p>OUTPUT:-</p>\n\n<pre><code>* [Context......\n* [Context1......\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 958, "user_id": 3685175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccabaa010b177df93aac835a2cf6ed5f?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/3685175/simon"}, "is_accepted": false, "score": 1, "last_activity_date": 1558569716, "creation_date": 1558569716, "answer_id": 56266444, "question_id": 56266360, "link": "https://stackoverflow.com/questions/56266360/how-to-capitalize-certain-index-of-a-string-in-a-list/56266444#56266444", "title": "How to capitalize certain index of a string in a list?", "body": "<p>Here's an example using <code>upper()</code> instead of capitalize. Reference from <a href=\"https://stackoverflow.com/questions/1228299/change-one-character-in-a-string\">here</a></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>test = ['* [context......', '* [bontext......', '* [zontext......']\n\ntest = [i[:3] + i[3:4].upper() + i[4:] for i in test]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": false, "score": 2, "last_activity_date": 1558570750, "creation_date": 1558570750, "answer_id": 56266562, "question_id": 56266360, "link": "https://stackoverflow.com/questions/56266360/how-to-capitalize-certain-index-of-a-string-in-a-list/56266562#56266562", "title": "How to capitalize certain index of a string in a list?", "body": "<p>The easiest way is to use <code>.title()</code> which ignores non-alphabetical characters:</p>\n\n<pre><code>&gt;&gt;&gt; my_list = ['* [foo]', '* [bar]']\n&gt;&gt;&gt; map(lambda s: s.title(), my_list)\n['* [Foo]', '* [Bar]']\n</code></pre>\n\n<p>or using a list comprehension:</p>\n\n<pre><code>&gt;&gt;&gt; [s.title() for s in my_list]\n['* [Foo]', '* [Bar]']\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11426584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1acc3368463a6e4578f692a0490b224?s=128&d=identicon&r=PG&f=1", "display_name": "kevinSmith", "link": "https://stackoverflow.com/users/11426584/kevinsmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 447, "favorite_count": 0, "accepted_answer_id": 56266426, "answer_count": 4, "score": 0, "last_activity_date": 1558571067, "creation_date": 1558568901, "last_edit_date": 1558571067, "question_id": 56266360, "link": "https://stackoverflow.com/questions/56266360/how-to-capitalize-certain-index-of-a-string-in-a-list", "title": "How to capitalize certain index of a string in a list?", "body": "<p>I have a list containing multiple stings. \nThe strings all start with a \"*\" and then a \"[\" with a space in between. Like this: </p>\n\n<pre><code>* [context......\n</code></pre>\n\n<p>Now i would like to capitalize \"c\". \nIn other words, i would like to capitalize the first letter of all the strings. But since i use symbols first. the Capitalize() function wont work. </p>\n\n<p>What i have tried is to capitalize the index like this: </p>\n\n<pre><code>list = [i[3].capitalize() for i in list]\n</code></pre>\n\n<p>The output of this, is just the capitalized letters. And not the rest of the string. </p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 2753, "user_id": 10878733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pwhdv.jpg?s=128&g=1", "display_name": "Shubham Panchal", "link": "https://stackoverflow.com/users/10878733/shubham-panchal"}, "edited": false, "score": 0, "creation_date": 1558590918, "post_id": 56266359, "comment_id": 99152870, "body": "As far as I know in gradient descent ( backpropogation ), we require the activations of all the hidden layers to calculate the gradients. TensorFlow also stored the activations for each layer so as to use them while back propagation."}, {"owner": {"reputation": 6608, "user_id": 867889, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/766cbf5cffe9872f58f00c994cd34a3f?s=128&d=identicon&r=PG", "display_name": "y.selivonchyk", "link": "https://stackoverflow.com/users/867889/y-selivonchyk"}, "reply_to_user": {"reputation": 2753, "user_id": 10878733, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pwhdv.jpg?s=128&g=1", "display_name": "Shubham Panchal", "link": "https://stackoverflow.com/users/10878733/shubham-panchal"}, "edited": false, "score": 0, "creation_date": 1558631585, "post_id": 56266359, "comment_id": 99174124, "body": "@ShubhamPanchal thank you for your insight. This is close to what I suspected. How do you think, does the same hold for activation/max_pooling/batch_norm layers or only for layers with matrix multiplications?"}], "owner": {"reputation": 6608, "user_id": 867889, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/766cbf5cffe9872f58f00c994cd34a3f?s=128&d=identicon&r=PG", "display_name": "y.selivonchyk", "link": "https://stackoverflow.com/users/867889/y-selivonchyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1558568895, "creation_date": 1558568895, "question_id": 56266359, "link": "https://stackoverflow.com/questions/56266359/which-activations-are-stored-until-backpropagation-in-tensorflow", "title": "Which activations are stored until backpropagation in TensorFlow?", "body": "<p>Is there a way to tell, which forward-pass activations will be cached/saved until backpropagation in Tensorflow?</p>\n\n<p>I am trying to identify which layers have the greatest memory impact and limit my training capacity.</p>\n"}, {"tags": ["python", "python-3.x", "debugging", "logging", "dependencies"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11120772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/697b6384c840e4a5f66a98c9d1c993b0?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik Blom", "link": "https://stackoverflow.com/users/11120772/fredrik-blom"}, "edited": false, "score": 0, "creation_date": 1562853937, "post_id": 56266437, "comment_id": 100516719, "body": "Thank you! Been searching for this for a while now"}], "tags": [], "owner": {"reputation": 4469, "user_id": 6342812, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/19e9e8f53f02cc9013f635a6bb67647d?s=128&d=identicon&r=PG&f=1", "display_name": "rassar", "link": "https://stackoverflow.com/users/6342812/rassar"}, "is_accepted": true, "score": 0, "last_activity_date": 1558569667, "creation_date": 1558569667, "answer_id": 56266437, "question_id": 56266311, "link": "https://stackoverflow.com/questions/56266311/how-to-reinstall-logging-library-for-python-3/56266437#56266437", "title": "How to reinstall logging library for python 3?", "body": "<p>You should be using <code>levelname</code> in your format string, not <code>Levelname</code>: </p>\n\n<pre><code>&gt;&gt;&gt; import logging as l\n&gt;&gt;&gt; LOG_FORMAT=\"%(levelname)s %(asctime)s - %(funcName)s - %(message)s\"\n&gt;&gt;&gt; l.basicConfig(filename=\"mailExtractor.log\", \n                  format=LOG_FORMAT, level=l.DEBUG, filemode=\"w\")\n&gt;&gt;&gt; l.info(\"hej\")\n</code></pre>\n\n<p>Showing the file gives:</p>\n\n<pre><code>\u26a1 cat mailExtractor.log \nINFO 2019-05-22 20:00:23,465 - &lt;module&gt; - hej\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11120772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/697b6384c840e4a5f66a98c9d1c993b0?s=128&d=identicon&r=PG&f=1", "display_name": "Fredrik Blom", "link": "https://stackoverflow.com/users/11120772/fredrik-blom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 56266437, "answer_count": 1, "score": 0, "last_activity_date": 1558569667, "creation_date": 1558568466, "question_id": 56266311, "link": "https://stackoverflow.com/questions/56266311/how-to-reinstall-logging-library-for-python-3", "title": "How to reinstall logging library for python 3?", "body": "<p>I get an error while doing the simplest of logging in python 3. Am I doing anything wrong or is there a way of reinstalling the logging module? </p>\n\n<p>I've updated from 3.6.5 to 3.7.3, but have the same problem. Been trying different logging levels but no luck there either. </p>\n\n<pre><code>In [2]: import logging as l\n   ...:\n   ...: #create and configure l\n   ...: LOG_FORMAT=\"%(Levelname)s %(asctime)s - %(funcName)s - %(message)s\"\n   ...: l.basicConfig(filename=\"mailExtractor.log\",\n   ...:         format=LOG_FORMAT,\n   ...:         level=l.DEBUG,\n   ...:         filemode=\"w\")\n   ...:\n   ...:\n\nIn [3]: l.info(\"hej\")\n--- Logging error ---\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/logging/__init__.py\", line 1034, in emit\n    msg = self.format(record)\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/logging/__init__.py\", line 880, in format\n    return fmt.format(record)\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/logging/__init__.py\", line 622, in format\n    s = self.formatMessage(record)\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/logging/__init__.py\", line 591, in formatMessage\n    return self._style.format(record)\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/logging/__init__.py\", line 433, in format\n    return self._fmt % record.__dict__\nKeyError: 'Levelname'\nCall stack:\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/bin/ipython\", line 10, in &lt;module&gt;\n    sys.exit(start_ipython())\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/IPython/__init__.py\", line 125, in start_ipython\n    return launch_new_instance(argv=argv, **kwargs)\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/traitlets/config/application.py\", line 658, in launch_instance\n    app.start()\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/IPython/terminal/ipapp.py\", line 356, in start\n    self.shell.mainloop()\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/IPython/terminal/interactiveshell.py\", line 498, in mainloop\n    self.interact()\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/IPython/terminal/interactiveshell.py\", line 489, in interact\n    self.run_cell(code, store_history=True)\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/IPython/core/interactiveshell.py\", line 2848, in run_cell\n    raw_cell, store_history, silent, shell_futures)\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/IPython/core/interactiveshell.py\", line 2874, in _run_cell\n    return runner(coro)\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/IPython/core/async_helpers.py\", line 67, in _pseudo_sync_runner\n    coro.send(None)\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/IPython/core/interactiveshell.py\", line 3049, in run_cell_async\n    interactivity=interactivity, compiler=compiler, result=result)\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/IPython/core/interactiveshell.py\", line 3220, in run_ast_nodes\n    if (yield from self.run_code(code, result)):\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/site-packages/IPython/core/interactiveshell.py\", line 3296, in run_code\n    exec(code_obj, self.user_global_ns, self.user_ns)\n  File \"&lt;ipython-input-3-a98b50bae629&gt;\", line 1, in &lt;module&gt;\n    l.info(\"hej\")\nMessage: 'hej'\nArguments: ()\n</code></pre>\n"}, {"tags": ["python", "html", "web-scraping", "beautifulsoup"], "comments": [{"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1558571380, "post_id": 56266292, "comment_id": 99149243, "body": "You should include some example html that has tags you want and tags you want to exclude."}, {"owner": {"reputation": 51, "user_id": 11451702, "user_type": "registered", "profile_image": "https://graph.facebook.com/790909391288992/picture?type=large", "display_name": "Erich Callahan", "link": "https://stackoverflow.com/users/11451702/erich-callahan"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1558572057, "post_id": 56266292, "comment_id": 99149353, "body": "What do you mean? I&#39;ve stated the tags that I need."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1558572269, "post_id": 56266292, "comment_id": 99149390, "body": "I mean that you should include a sample of the html you are parsing so that we can test your solution and any solution we may come up with. Preferably the sample html will have tags you want to keep and some you want to exclude - something we can copy from your question.. please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 51, "user_id": 11451702, "user_type": "registered", "profile_image": "https://graph.facebook.com/790909391288992/picture?type=large", "display_name": "Erich Callahan", "link": "https://stackoverflow.com/users/11451702/erich-callahan"}, "reply_to_user": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1558572830, "post_id": 56266292, "comment_id": 99149479, "body": "For my particular question, its a bit difficult to show the key parts, Its really best for someone to look at it themselves."}], "answers": [{"tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": false, "score": 0, "last_activity_date": 1558578509, "last_edit_date": 1558578509, "creation_date": 1558578099, "answer_id": 56267270, "question_id": 56266292, "link": "https://stackoverflow.com/questions/56266292/how-to-scrape-on-only-certain-tags-that-are-all-in-the-same-class/56267270#56267270", "title": "How to scrape on only certain tags that are all in the same class?", "body": "<p>You can use the following</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup as bs\n\nr = requests.get('https://www.usgamer.net/articles/15-11-2017-skyrim-guide-for-xbox-one-and-ps4-which-races-and-character-builds-are-the-best')\nsoup = bs(r.content, 'lxml')\n\n#one  list of tuples\nrace_info = [ (item.text, item.next_sibling) for item in soup.select('h2 ~ ul strong')]\n# separate lists\nraces, abilities = zip(*[ (item.text, item.next_sibling) for item in soup.select('h2 ~ ul strong')])\n</code></pre>\n\n<p>A dictionary might be nicer in which case you can do</p>\n\n<pre><code>race_info = [ (item.text, item.next_sibling) for item in soup.select('h2 ~ ul strong')]\nrace_info = dict(race_info)\n</code></pre>\n\n<p>The <code>~</code> is a <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/CSS_Selectors#Combinators\" rel=\"nofollow noreferrer\">general sibling combinator</a>: </p>\n\n<blockquote>\n  <p>The ~ combinator selects siblings. This means that the second element\n  follows the first (though not necessarily immediately), and both share\n  the same parent.</p>\n</blockquote>\n"}], "owner": {"reputation": 51, "user_id": 11451702, "user_type": "registered", "profile_image": "https://graph.facebook.com/790909391288992/picture?type=large", "display_name": "Erich Callahan", "link": "https://stackoverflow.com/users/11451702/erich-callahan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1558578509, "creation_date": 1558568288, "last_edit_date": 1558578419, "question_id": 56266292, "link": "https://stackoverflow.com/questions/56266292/how-to-scrape-on-only-certain-tags-that-are-all-in-the-same-class", "title": "How to scrape on only certain tags that are all in the same class?", "body": "<p>Im creating this program which allows me to scrape all the names and abilities of characters from this website. The tags (li) which contain the information I need are mixed in with other li tags that are not needed.</p>\n\n<p>I have tried selecting different classes but that wont work. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>import bs4, requests, lxml, re, time, os\nfrom bs4 import BeautifulSoup as soup\n\ndef webscrape():\n    res = requests.get('https://www.usgamer.net/articles/15-11-2017-skyrim-guide-for-xbox-one-and-ps4-which-races-and-character-builds-are-the-best')\n    soup = bs4.BeautifulSoup(res.text, 'lxml')\n    races_list = soup.find_all(\"li &lt; strong\")\n    races_list_text = [f.text.strip() for f in races_list]\n    print(races_list_text)\n    time.sleep(1)\nwebscrape()\n</code></pre>\n\n<p>It is expected to print out all the races and their corresponding information.</p>\n"}, {"tags": ["python", "html", "flask", "http-status-code-405"], "answers": [{"tags": [], "owner": {"reputation": 1054, "user_id": 9837329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r4OiO.jpg?s=128&g=1", "display_name": "ASSILI Taher", "link": "https://stackoverflow.com/users/9837329/assili-taher"}, "is_accepted": true, "score": 0, "last_activity_date": 1558576451, "creation_date": 1558576451, "answer_id": 56267115, "question_id": 56266285, "link": "https://stackoverflow.com/questions/56266285/flask-method-not-allowed/56267115#56267115", "title": "Flask Method Not Allowed", "body": "<p>The index view did not allow post method.</p>\n\n<p>You need to replace</p>\n\n<pre><code>&lt;form method=\"post\" action='{{url_for('index')}}'&gt;\n</code></pre>\n\n<p>by</p>\n\n<pre><code>&lt;form method=\"post\" action='{{url_for('homepage')}}'&gt;\n</code></pre>\n\n<p>If you want to execute post method in the index url, you need to add methods=['GET', 'POST'] to your index view like below:</p>\n\n<pre><code>@app.route('/index', methods=['GET', 'POST'])\ndef index():\n    # write your code here\n    return render_template('index.html')\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 8637941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a21099b9488d41d4c000059695027a6?s=128&d=identicon&r=PG&f=1", "display_name": "Orgenplop", "link": "https://stackoverflow.com/users/8637941/orgenplop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "closed_date": 1558618811, "accepted_answer_id": 56267115, "answer_count": 1, "score": -1, "last_activity_date": 1558576451, "creation_date": 1558568242, "question_id": 56266285, "link": "https://stackoverflow.com/questions/56266285/flask-method-not-allowed", "closed_reason": "Duplicate", "title": "Flask Method Not Allowed", "body": "<p>I'm working on a flask project and getting a method not found error. I am simply trying to go from my homepage to my game page at the press of submit button. I can't figure out where I am going wrong. </p>\n\n<p>I know this question has been asked several times already but I have tried everything in those questions and am still getting an error. </p>\n\n<p>Here is my routes file:</p>\n\n<pre><code>from flask import render_template\nfrom app import app\nfrom app.forms import LoginForm\n\n@app.route('/')\n@app.route('/homepage', methods=['GET', 'POST'])\ndef homepage():\n    form = LoginForm()\n    if form.validate_on_submit():\n        return redirect(url_for('index'))\n    return render_template('homepage.html', title='Welcome', form=form)\n\n@app.route('/index')\ndef index():\n\n    return render_template('index.html')\n</code></pre>\n\n<p>Here is my html code on the homepage containing the button:</p>\n\n<pre><code>&lt;html&gt;\n    &lt;head&gt;\n        {% if title %}\n            &lt;title&gt;{{ title }} - CatanAI&lt;/title&gt;\n        {% else %}\n            &lt;title&gt;CatanAI&lt;/title&gt;\n        {% endif %}\n    &lt;/head&gt;\n        &lt;h1&gt;Welcome to Settlers of Catan AI&lt;/h1&gt;\n    &lt;body&gt;\n\n        &lt;form method=\"post\" action='{{url_for('index')}}'&gt;\n\n        &lt;p&gt;{{ form.submit() }}&lt;/p&gt;\n        &lt;/form&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>And here is the html for the code I am trying to route to:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n    &lt;head&gt;\n        &lt;meta charset=\"UTF-8\"&gt;\n        &lt;title&gt;Catan&lt;/title&gt;\n        &lt;script src=\"{{ url_for('static', filename=\"css/main.css\")}}\"&gt;&lt;/script&gt;\n    &lt;/head&gt;\n    &lt;body&gt;\n\n        &lt;canvas id=\"canvas\" &gt;&lt;/canvas&gt;\n        &lt;script src=\"{{ url_for('static', filename=\"js/board.js\")}}\"&gt;&lt;/script&gt;\n        &lt;script src=\"{{ url_for('static', filename=\"js/game.js\")}}\"&gt;&lt;/script&gt;\n        &lt;script src=\"{{ url_for('static', filename=\"js/location.js\")}}\"&gt;&lt;/script&gt;\n        &lt;script src=\"{{ url_for('static', filename=\"js/main.js\")}}\"&gt;&lt;/script&gt;\n        &lt;script src=\"{{ url_for('static', filename=\"js/player.js\")}}\"&gt;&lt;/script&gt;\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>When I press the button I am getting the 405 method not allowed. I appreciate any help.</p>\n"}, {"tags": ["python", "numpy", "textures", "glcm"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 9638490, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q4TESXxG35M/AAAAAAAAAAI/AAAAAAAAABk/txvwfiS40jI/photo.jpg?sz=128", "display_name": "KAnouar", "link": "https://stackoverflow.com/users/9638490/kanouar"}, "edited": false, "score": 0, "creation_date": 1558644065, "post_id": 56277927, "comment_id": 99179225, "body": "This way is better than my way, But the difference is about 40ms not a much difference , thank you. I believe u need initialize<code>first</code> and <code>second</code> variables.  and I have already use skimages in my project but when I got the features vectors and use it to evaluate my machine I got only 0.29 precision (29% of the correct) to compare between two vectore I calculate the <b>Distance</b> with <code>np.linalg.norm( featuresVector1- featuresVector2)</code>. my dataSet is good , i got 0.78 precision with <b>KNN</b> and 0.89 with <b>Color Histograme</b>,  I don&#39;t know why i goot only 0.29 with <b>GLCM</b>,  any Idea"}, {"owner": {"reputation": 11305, "user_id": 6160119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlM4b.jpg?s=128&g=1", "display_name": "Tonechas", "link": "https://stackoverflow.com/users/6160119/tonechas"}, "reply_to_user": {"reputation": 27, "user_id": 9638490, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q4TESXxG35M/AAAAAAAAAAI/AAAAAAAAABk/txvwfiS40jI/photo.jpg?sz=128", "display_name": "KAnouar", "link": "https://stackoverflow.com/users/9638490/kanouar"}, "edited": false, "score": 1, "creation_date": 1558656249, "post_id": 56277927, "comment_id": 99182365, "body": "I agree that a 15% drop in computing time is not sufficient for you application (but it&#39;s a significant improvement anyways). I don&#39;t think it&#39;s necessary to initialize <code>first</code> and <code>second</code>. My code had a bug, though, because I was not using parameter <code>distance</code> (thanks to @Noureim for the edit). And last, you are more likely to get help with this issue if you ask a new question."}], "tags": [], "owner": {"reputation": 11305, "user_id": 6160119, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JlM4b.jpg?s=128&g=1", "display_name": "Tonechas", "link": "https://stackoverflow.com/users/6160119/tonechas"}, "is_accepted": false, "score": 1, "last_activity_date": 1558654880, "last_edit_date": 1592644375, "creation_date": 1558623229, "answer_id": 56277927, "question_id": 56266276, "link": "https://stackoverflow.com/questions/56266276/extract-glcm-matrix-using-numpy/56277927#56277927", "title": "extract glcm matrix using numpy", "body": "<p>There is a bug in your code. You need to change the initialization of the gray level co-occurrence matrix to <code>glcm = np.zeros((256, 256), dtype=int)</code>, otherwise if the image to process contains some pixels with the intensity level <code>255</code>, the function <code>getGLCM</code> will throw an error.</p>\n<p>Here's a pure NumPy implementation that improves performance through vectorization:</p>\n<pre><code>def vectorized_glcm(image, distance, direction):\n\n    img = np.array(image)\n\n    glcm = np.zeros((256, 256), dtype=int)\n    \n    if direction == 1:\n        first = img[distance:, :]\n        second = img[:-distance, :]\n    elif direction == 2:\n        first = img[distance:, :-distance]\n        second = img[:-distance, distance:]\n    elif direction == 3:\n        first = img[:, :-distance]\n        second = img[:, distance:]\n    elif direction == 4:\n        first = img[:-distance, :-distance]\n        second = img[distance:, distance:]\n    \n    for i, j in zip(first.ravel(), second.ravel()):\n        glcm[i, j] += 1\n        \n    return glcm\n</code></pre>\n<p>If you are open to use other packages, I would strongly recommend you to utilize scikit-image's <a href=\"https://scikit-image.org/docs/dev/api/skimage.feature.html#skimage.feature.greycomatrix\" rel=\"nofollow noreferrer\">greycomatrix</a>. As shown below, this speeds up the calculation by two orders of magnitude.</p>\n<h3>Demo</h3>\n<pre><code>In [93]: from skimage import data\n\nIn [94]: from skimage.feature import greycomatrix\n\nIn [95]: img = data.camera()\n\nIn [96]: a = getGLCM(img, 1, 1)\n\nIn [97]: b = vectorized_glcm(img, 1, 1)\n\nIn [98]: c = greycomatrix(img, distances=[1], angles=[-np.pi/2], levels=256)\n\nIn [99]: np.array_equal(a, b)\nOut[99]: True\n\nIn [100]: np.array_equal(a, c[:, :, 0, 0])\nOut[100]: True\n\nIn [101]: %timeit getGLCM(img, 1, 1)\n240 ms \u00b1 1.16 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n\nIn [102]: %timeit vectorized_glcm(img, 1, 1)\n203 ms \u00b1 3.11 ms per loop (mean \u00b1 std. dev. of 7 runs, 1 loop each)\n\nIn [103]: %timeit greycomatrix(img, distances=[1], angles=[-np.pi/2], levels=256)\n1.46 ms \u00b1 15.5 \u00b5s per loop (mean \u00b1 std. dev. of 7 runs, 1000 loops each)\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 9638490, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Q4TESXxG35M/AAAAAAAAAAI/AAAAAAAAABk/txvwfiS40jI/photo.jpg?sz=128", "display_name": "KAnouar", "link": "https://stackoverflow.com/users/9638490/kanouar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 751, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1558654880, "creation_date": 1558568159, "question_id": 56266276, "link": "https://stackoverflow.com/questions/56266276/extract-glcm-matrix-using-numpy", "title": "extract glcm matrix using numpy", "body": "<p>I want to find the GLCM matrix using python (numpy)\nI've written this code and it gave me a correct result from the four angles but it very slow , to processes 1000 picture with demonsion 128x128 it take about 35min</p>\n\n<pre><code>def getGLCM(image, distance, direction):\n\n    npPixel = np.array(image) // image as numpy array\n\n    glcm = np.zeros((255, 255), dtype=int)\n    if direction == 1:  # direction 90\u00b0 up \u2191\n        for i in range(distance, npPixel.shape[0]):\n            for j in range(0, npPixel.shape[1]):\n                glcm[npPixel[i, j], npPixel[i-distance, j]] += 1\n    elif direction == 2:  # direction 45\u00b0 up-right \u2197\n        for i in range(distance, npPixel.shape[0]):\n            for j in range(0, npPixel.shape[1] - distance):\n                glcm[npPixel[i, j], npPixel[i - distance, j + distance]] += 1\n    elif direction == 3:  # direction 0\u00b0 right \u2192\n        for i in range(0, npPixel.shape[0]):\n            for j in range(0, npPixel.shape[1] - distance):\n                glcm[npPixel[i, j], npPixel[i, j + distance]] += 1\n    elif direction == 4:  # direction -45\u00b0 down-right \u2198\n        for i in range(0, npPixel.shape[0] - distance):\n            for j in range(0, npPixel.shape[1] - distance):\n                glcm[npPixel[i, j], npPixel[i + distance, j + distance]] += 1\n\n    return glcm\n</code></pre>\n\n<p>I need help to make this code faster\nThanks.</p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 3487, "user_id": 6843153, "user_type": "registered", "accept_rate": 90, "profile_image": "https://graph.facebook.com/10207079768572690/picture?type=large", "display_name": "HuLu ViCa", "link": "https://stackoverflow.com/users/6843153/hulu-vica"}, "edited": false, "score": 0, "creation_date": 1558568257, "post_id": 56266259, "comment_id": 99148697, "body": "This error occurs when you set an app in your INSTALLED_APPS variable of your <b>settings.py</b>, and such app has not been created. Can you share the directories tree of your project?"}, {"owner": {"reputation": 1511, "user_id": 9177173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HcDbS.jpg?s=128&g=1", "display_name": "ohlr", "link": "https://stackoverflow.com/users/9177173/ohlr"}, "edited": false, "score": 0, "creation_date": 1558568415, "post_id": 56266259, "comment_id": 99148719, "body": "Your app webapp is not installed in your <code>settings.py</code> <code>INSTALLED_APPS</code> list. I recommend you follow a tutorial such as <a href=\"https://developer.mozilla.org/en-US/docs/Learn/Server-side/Django/Tutorial_local_library_website\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Learn/Server-side/Django/&hellip;</a> to get it right"}, {"owner": {"reputation": 1, "user_id": 11542019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2861e0a61b8690b588397a7b54783e29?s=128&d=identicon&r=PG&f=1", "display_name": "Caroline Samaha", "link": "https://stackoverflow.com/users/11542019/caroline-samaha"}, "edited": false, "score": 0, "creation_date": 1558570226, "post_id": 56266259, "comment_id": 99149062, "body": "here is my settings.py INSTALLED_APPS = [     &#39;webapp&#39; ,     &#39;Personal&#39; ,     &#39;django.contrib.admin&#39;,     &#39;django.contrib.auth&#39;,     &#39;django.contrib.contenttypes&#39;,     &#39;django.contrib.sessions&#39;,     &#39;django.contrib.messages&#39;,     &#39;django.contrib.staticfiles&#39;, ]"}], "owner": {"reputation": 1, "user_id": 11542019, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2861e0a61b8690b588397a7b54783e29?s=128&d=identicon&r=PG&f=1", "display_name": "Caroline Samaha", "link": "https://stackoverflow.com/users/11542019/caroline-samaha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1558570671, "creation_date": 1558567885, "question_id": 56266259, "link": "https://stackoverflow.com/questions/56266259/probelm-with-django-manage-py-runserver-provides-errors", "title": "Probelm with Django manage.py runserver provides errors", "body": "<p>I am new to Python and Django. I am trying to run my manage.py but i have this problem </p>\n\n<pre><code>enter code here\nTraceback (most recent call last):\nFile \"manage.py\", line 10, in &lt;module&gt;\nexecute_from_command_line(sys.argv)\nFile \"C:\\Users\\Nouha\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site- \npackages\\django\\core\\management\\__init__.py\", line 381, in \nexecute_from_command_line\nutility.execute()\nFile \"C:\\Users\\Nouha\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site- \npackages\\django\\core\\management\\__init__.py\", line 357, in execute\ndjango.setup()\nFile \"C:\\Users\\Nouha\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site- \npackages\\django\\__init__.py\", line 24, in setup\napps.populate(settings.INSTALLED_APPS)\nFile \"C:\\Users\\Nouha\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site- \npackages\\django\\apps\\registry.py\", line 91, in populate\napp_config = AppConfig.create(entry)\n File \"C:\\Users\\Nouha\\AppData\\Local\\Programs\\Python\\Python37-32\\lib\\site- \npackages\\django\\apps\\config.py\", line 90, in create\n module = import_module(entry)\nFile \"C:\\Users\\Nouha\\AppData\\Local\\Programs\\Python\\Python37- \n32\\lib\\importlib\\__init__.py\", line 127, in import_module\nreturn _bootstrap._gcd_import(name[level:], package, level)\nFile \"&lt;frozen importlib._bootstrap&gt;\", line 1006, in _gcd_import\nFile \"&lt;frozen importlib._bootstrap&gt;\", line 983, in _find_and_load\nFile \"&lt;frozen importlib._bootstrap&gt;\", line 965, in \n _find_and_load_unlocked\n ModuleNotFoundError: No module named 'webapp'\n</code></pre>\n\n<p>I tried all solutions in stackoverflow but I still have the same problem :( \nCan anyone help me please ?!</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 11542012, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GcPEq0-MZiE/AAAAAAAAAAI/AAAAAAAAPJ0/9bymmZg4ZTw/photo.jpg?sz=128", "display_name": "Vadino", "link": "https://stackoverflow.com/users/11542012/vadino"}, "edited": false, "score": 0, "creation_date": 1558569351, "post_id": 56266269, "comment_id": 99148873, "body": "The problem is I need it to be True when three of them are &#39;X&#39; and those just function like an or(if one of them is true then true) I could do if boarda[1] == &#39;X&#39; and boarda[2] == &#39;X&#39; and boarda[3] == &#39;X&#39; but that&#39;d be way too long for all the cases(8 possible winning cases) isn&#39;t there a shorter way? Thanks for replying so fast"}, {"owner": {"reputation": 53, "user_id": 11542012, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GcPEq0-MZiE/AAAAAAAAAAI/AAAAAAAAPJ0/9bymmZg4ZTw/photo.jpg?sz=128", "display_name": "Vadino", "link": "https://stackoverflow.com/users/11542012/vadino"}, "edited": false, "score": 0, "creation_date": 1558569806, "post_id": 56266269, "comment_id": 99148971, "body": "Great! Thanks a lot, the fourth will do it for me, it&#39;s about the same length as what I was using, but the correct syntax of course"}], "tags": [], "owner": {"reputation": 6521, "user_id": 7583953, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w0Jkd.jpg?s=128&g=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/7583953/alec"}, "is_accepted": true, "score": 1, "last_activity_date": 1558569617, "last_edit_date": 1558569617, "creation_date": 1558567983, "answer_id": 56266269, "question_id": 56266258, "link": "https://stackoverflow.com/questions/56266258/how-can-i-reference-more-than-one-variable-in-an-if-condition/56266269#56266269", "title": "How can I reference more than one variable in an if condition", "body": "<p>Well, you could always do the intuitive </p>\n\n<pre><code>if boarda[1] == 'X' or boarda[2] == 'X' or boarda[3] == 'X'\n</code></pre>\n\n<p>But a far better way to approach this is to use the <code>in</code> operator:</p>\n\n<pre><code>if 'X' in (boarda[1], boarda[2], boarda[3])\n</code></pre>\n\n<p>For a long list you'd probably want a list comprehension:</p>\n\n<pre><code>if 'X' in [boarda[x] for x in range(1, 4)]\n</code></pre>\n\n<p>For checking against <code>and</code>, it's even easier:</p>\n\n<pre><code>if boarda[1] == boarda[2] == boarda[3] == 'X'\n</code></pre>\n\n<p>For arbitrary types:</p>\n\n<pre><code>vals = (boarda[1], boarda[2], boarda[3])\nif all(v == 'X' for v in vals)\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 11542012, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GcPEq0-MZiE/AAAAAAAAAAI/AAAAAAAAPJ0/9bymmZg4ZTw/photo.jpg?sz=128", "display_name": "Vadino", "link": "https://stackoverflow.com/users/11542012/vadino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "closed_date": 1558567979, "accepted_answer_id": 56266269, "answer_count": 1, "score": -1, "last_activity_date": 1558569668, "creation_date": 1558567885, "last_edit_date": 1558569668, "question_id": 56266258, "link": "https://stackoverflow.com/questions/56266258/how-can-i-reference-more-than-one-variable-in-an-if-condition", "closed_reason": "Duplicate", "title": "How can I reference more than one variable in an if condition", "body": "<p>I'm a newbie and I'm doing the classic Tic Tac Toe exercise on Python,\nI wanted to use more than one variable in an if, like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>if boarda[1],boarda[2],boarda[3]='X':\n   print ('player X wins)\n</code></pre>\n\n<p>The output is Syntax error, is it possible to do this? and if it is how can I write it? Big thanks</p>\n\n<p>I want to check against <code>and</code> and <code>or</code>, so the duplicate is invalid.</p>\n"}, {"tags": ["python", "anaconda"], "comments": [{"owner": {"reputation": 2264, "user_id": 3848207, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/dd7ca7300cf6cc34291660db34152ff4?s=128&d=identicon&r=PG&f=1", "display_name": "user3848207", "link": "https://stackoverflow.com/users/3848207/user3848207"}, "edited": false, "score": 0, "creation_date": 1569931843, "post_id": 56266229, "comment_id": 102748572, "body": "Speaking from personal experience, I have deleted all files in the pkgs folder and have not encountered any problems. However, if you are in doubt, just leave the files alone. I&#39;m sharing my own experience here and cannot guarantee you will not encounter problems if you do the same.  I am using Windows 10."}, {"owner": {"reputation": 219, "user_id": 7690011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d08bb7ed27f6e025788c301242bda7?s=128&d=identicon&r=PG&f=1", "display_name": "Clumsy cat", "link": "https://stackoverflow.com/users/7690011/clumsy-cat"}, "edited": false, "score": 0, "creation_date": 1591080313, "post_id": 56266229, "comment_id": 109912026, "body": "Just wanted to note that I have also deleted all the files in pkgs, with no noticeable issues. This is on a cluster running some kind of Debian, with only one conda env in use. It absolutely does free up space - we have strict quota limits and it&#39;s very useful"}, {"owner": {"reputation": 20439, "user_id": 1709088, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc4597c8aedf386296097d025d0c1c78?s=128&d=identicon&r=PG", "display_name": "user781486", "link": "https://stackoverflow.com/users/1709088/user781486"}, "reply_to_user": {"reputation": 219, "user_id": 7690011, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25d08bb7ed27f6e025788c301242bda7?s=128&d=identicon&r=PG&f=1", "display_name": "Clumsy cat", "link": "https://stackoverflow.com/users/7690011/clumsy-cat"}, "edited": false, "score": 1, "creation_date": 1591092485, "post_id": 56266229, "comment_id": 109917829, "body": "@Clumsy cat, I did it many times. No problem at all."}], "answers": [{"comments": [{"owner": {"reputation": 20439, "user_id": 1709088, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc4597c8aedf386296097d025d0c1c78?s=128&d=identicon&r=PG", "display_name": "user781486", "link": "https://stackoverflow.com/users/1709088/user781486"}, "edited": false, "score": 2, "creation_date": 1558580887, "post_id": 56267494, "comment_id": 99150855, "body": "Oh dear. I just deleted all the files in pkgs folder. So far, I can still use conda python normally without hiccups. I suspect this is because I do not use virtual environments. I only have 1 single conda base environment. So, deleting the files shouldn&#39;t matter if I only have one base environment?"}, {"owner": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "reply_to_user": {"reputation": 20439, "user_id": 1709088, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc4597c8aedf386296097d025d0c1c78?s=128&d=identicon&r=PG", "display_name": "user781486", "link": "https://stackoverflow.com/users/1709088/user781486"}, "edited": false, "score": 1, "creation_date": 1558581232, "post_id": 56267494, "comment_id": 99150909, "body": "@user781486 interesting to see if everything still works. Perhaps <b>base</b> also has other links elsewhere of which I am unaware. If you really want to save space, consider <a href=\"https://stackoverflow.com/q/56050217/570918\">migrating to Miniconda</a>. In your case, you probably don&#39;t even want to export a YAML, since it sounds like you only have Anaconda. You could just list the packages you actually use, and start making new envs."}, {"owner": {"reputation": 20439, "user_id": 1709088, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc4597c8aedf386296097d025d0c1c78?s=128&d=identicon&r=PG", "display_name": "user781486", "link": "https://stackoverflow.com/users/1709088/user781486"}, "edited": false, "score": 0, "creation_date": 1558581599, "post_id": 56267494, "comment_id": 99150980, "body": "<a href=\"https://groups.google.com/a/continuum.io/forum/#!topic/anaconda/xV1BiGPmgao\" rel=\"nofollow noreferrer\">groups.google.com/a/continuum.io/forum/#!topic/anaconda/&hellip;</a> Seems like ok but don&#39;t quite understand the downside. Can you help? &quot;conda was designed in a way that the &#39;pkgs&#39; directory is a download cache, as well as a place where the downloaded conda packages get extracted.  The files from the extracted tarballs then get (hard) linked into conda environments.  So while removing the entire &#39;pkgs&#39; directory is possible, the downside is that when you create new environments, the shared files from existing packages (in other environments) will no longer share the hard links. &quot;"}, {"owner": {"reputation": 20439, "user_id": 1709088, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc4597c8aedf386296097d025d0c1c78?s=128&d=identicon&r=PG", "display_name": "user781486", "link": "https://stackoverflow.com/users/1709088/user781486"}, "edited": false, "score": 0, "creation_date": 1558581675, "post_id": 56267494, "comment_id": 99150999, "body": "No longer share the hard links mean when you create new env in future, the library files will be re-downloaded? So, future virtual env will result in huge disk space increase, is it?"}, {"owner": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 2, "creation_date": 1558581754, "post_id": 56267494, "comment_id": 99151013, "body": "I think even the base environment hard links the files from the pkgs directory into the appropriate location depending on your OS. Hence, you didn&#39;t run into any problems."}, {"owner": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "reply_to_user": {"reputation": 20439, "user_id": 1709088, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc4597c8aedf386296097d025d0c1c78?s=128&d=identicon&r=PG", "display_name": "user781486", "link": "https://stackoverflow.com/users/1709088/user781486"}, "edited": false, "score": 0, "creation_date": 1558582130, "post_id": 56267494, "comment_id": 99151075, "body": "@user781486 &quot;<i>when you create new env in future, the library files will be re-dowloaded</i>&quot; That&#39;s what I&#39;d expect, but I don&#39;t know if Conda has an alternate mechanism for keeping track of what is physically there, outside of checking what is in <code>pkgs</code>. You could easily test this. Try creating a new env, and make one of your existing packages (including build specification) a requirement. Does it attempt a redownload?"}, {"owner": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "reply_to_user": {"reputation": 13412, "user_id": 2449192, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/62cb5b405dc090d45eed0498dec02f52?s=128&d=identicon&r=PG", "display_name": "darthbith", "link": "https://stackoverflow.com/users/2449192/darthbith"}, "edited": false, "score": 0, "creation_date": 1558582456, "post_id": 56267494, "comment_id": 99151137, "body": "@darthbith which also means that the OP didn&#39;t save any space after all :|"}, {"owner": {"reputation": 20439, "user_id": 1709088, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc4597c8aedf386296097d025d0c1c78?s=128&d=identicon&r=PG", "display_name": "user781486", "link": "https://stackoverflow.com/users/1709088/user781486"}, "edited": false, "score": 0, "creation_date": 1558582663, "post_id": 56267494, "comment_id": 99151174, "body": "If I don&#39;t create new virtual environment, I still get to save space."}, {"owner": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "reply_to_user": {"reputation": 20439, "user_id": 1709088, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc4597c8aedf386296097d025d0c1c78?s=128&d=identicon&r=PG", "display_name": "user781486", "link": "https://stackoverflow.com/users/1709088/user781486"}, "edited": false, "score": 2, "creation_date": 1558583323, "post_id": 56267494, "comment_id": 99151272, "body": "@user781486 I doubt you have saved any physical space, but instead have only created the appearance of doing so. I still strongly believe that if you did save space, you likely broke something. You&#39;ve also potentially created a situation where Conda may no longer be able to reuse the packages you currently have when creating new envs. But you&#39;d need to run something like the test I suggested to verify that."}, {"owner": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "reply_to_user": {"reputation": 20439, "user_id": 1709088, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc4597c8aedf386296097d025d0c1c78?s=128&d=identicon&r=PG", "display_name": "user781486", "link": "https://stackoverflow.com/users/1709088/user781486"}, "edited": false, "score": 2, "creation_date": 1607024525, "post_id": 56267494, "comment_id": 115149975, "body": "@user781486 after reviewing what was posted in <a href=\"https://stackoverflow.com/a/64005961/570918\">this answer</a>, I&#39;ve decided to edit my answer. I think it would be appropriate for you to change the accepted answer to that one instead of mine. Fortunately, I think I erred on the side of caution, but I still must fess up: I was wrong and I apologize for misleading you."}], "tags": [], "owner": {"reputation": 41290, "user_id": 570918, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/27ce5101af57acecf9a5fe563b6192b1?s=128&d=identicon&r=PG", "display_name": "merv", "link": "https://stackoverflow.com/users/570918/merv"}, "is_accepted": false, "score": 6, "last_activity_date": 1607024089, "last_edit_date": 1607024089, "creation_date": 1558580307, "answer_id": 56267494, "question_id": 56266229, "link": "https://stackoverflow.com/questions/56266229/is-it-safe-to-manually-delete-all-files-in-pkgs-folder-in-anaconda-python/56267494#56267494", "title": "Is it safe to manually delete all files in pkgs folder in anaconda python?", "body": "<h2>Edit Commentary</h2>\n<p>After reviewing the documentation pointed out <a href=\"https://stackoverflow.com/a/64005961/570918\">in @Robert's answer</a>, I must admit my initial response was overly alarmist and, in parts, blatantly incorrect. My apologies for the misleading response.</p>\n<p>Nevertheless, I do believe some of what I raised still has some merit for this thread, and so I am deciding to retain the answer with amendments. In particular, I think it worth emphasizing that deleting the <code>pkgs</code> directory may not actually achieve what OP was hoping for (to save space) and that removing the package cache undermines Conda's redundancy minimization strategy going forward by making it impossible to share already installed packages.</p>\n<p>Instead, my final recommendation concurs with what @Robert suggested, namely, use <code>conda clean -p</code> to delete unused packages, but keep the cache (<code>pkgs</code> dir) so that future environments can still leverage hardlinks. One last point to note, is that some tools, such as <code>conda-pack</code>, rely on the integrity of the package cache in order work, so deleting <code>pkgs</code> will prevent their use.</p>\n<hr />\n<h2>Amended Original Response</h2>\n<p><strike>No, it is definitely not safe, and in fact the only way you would actually free disk space is if you broke your <strong>base</strong> env.</strike> The issue is that all envs use hardlinks to the <code>pkgs</code> directory, so even if you delete the <em>link</em> located in the <code>pkgs</code> directory, the ones in the envs will still be there and so you won't delete any physical files on the disk.  <strike>The only real deletion you might do is something that is only referenced by <strong>base</strong>, i.e., the only copy is in <code>pkgs</code>, hence the potential for a breaking <strong>base</strong>.</strike></p>\n<blockquote>\n<p><strong>Correction</strong>: The <strong>base</strong> env still links packages to other locations, so deleting <code>pkgs</code> will not impact <strong>base</strong> as I originally concluded.</p>\n</blockquote>\n<p>I'd highly recommend looking at <a href=\"https://stackoverflow.com/q/55566419/570918\">this other post on estimating the real disk usage of Conda</a>. You may be overestimating how much space is really being used. For most files in <code>pkgs</code>, there is only one <em>physical</em> copy, so there isn't any additional manual optimization to be done.</p>\n"}, {"comments": [{"owner": {"reputation": 20439, "user_id": 1709088, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc4597c8aedf386296097d025d0c1c78?s=128&d=identicon&r=PG", "display_name": "user781486", "link": "https://stackoverflow.com/users/1709088/user781486"}, "edited": false, "score": 0, "creation_date": 1600776268, "post_id": 64005961, "comment_id": 113188796, "body": "I use Anaconda under Windows. I routinely delete all files in pkgs folder. No problem at all so far."}], "tags": [], "owner": {"reputation": 600, "user_id": 4340584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f64f203c38ecda1383ab2ecfc9e8046a?s=128&d=identicon&r=PG&f=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/4340584/robert"}, "is_accepted": true, "score": 9, "last_activity_date": 1600767668, "last_edit_date": 1600767668, "creation_date": 1600763692, "answer_id": 64005961, "question_id": 56266229, "link": "https://stackoverflow.com/questions/56266229/is-it-safe-to-manually-delete-all-files-in-pkgs-folder-in-anaconda-python/64005961#64005961", "title": "Is it safe to manually delete all files in pkgs folder in anaconda python?", "body": "<p>Actually, under certain conditions it is an option to have the <code>pkgs</code> subdirs removed. As stated <a href=\"https://groups.google.com/a/continuum.io/g/anaconda/c/xV1BiGPmgao?pli=1\" rel=\"noreferrer\">here</a> by Anaconda Community Support &quot;the <code>pkgs</code> directory is only a cache.  You can remove it completely is you want to.\nHowever, when creating new environments, it is more efficient to leave whatever packages are in the cache around.&quot;</p>\n<p>According to the <a href=\"https://docs.conda.io/projects/conda/en/latest/commands/clean.html\" rel=\"noreferrer\">documentation</a> you can use <code>conda clean --packages</code> to remove unused packages in <code>pkgs</code> (which will move them to <code>pkgs/.trash</code> from which you can then safely delete them). While this does not check for packages installed using symlinks back to the package cache, this is not a topic if you don't use such environments or work under Windows. I guess that's why <code>conda clean --packages</code> is included in <code>conda clean --all</code>.</p>\n<p>To more aggressively save space you can use <code>conda clean --force-pkgs-dirs</code> to remove <em>all</em> writable package caches (with the same caveat that there could be environments linked to these dirs). If you don't use environments or use Anaconda under Windows, you're probably safe. Personally, I use this option without issues.</p>\n"}], "owner": {"reputation": 20439, "user_id": 1709088, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/dc4597c8aedf386296097d025d0c1c78?s=128&d=identicon&r=PG", "display_name": "user781486", "link": "https://stackoverflow.com/users/1709088/user781486"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10076, "favorite_count": 3, "accepted_answer_id": 64005961, "answer_count": 2, "score": 14, "last_activity_date": 1607024089, "creation_date": 1558567623, "last_edit_date": 1558568118, "question_id": 56266229, "link": "https://stackoverflow.com/questions/56266229/is-it-safe-to-manually-delete-all-files-in-pkgs-folder-in-anaconda-python", "title": "Is it safe to manually delete all files in pkgs folder in anaconda python?", "body": "<p>I ran this command to release disk space on anaconda</p>\n\n<pre><code>$ conda clean -all\n</code></pre>\n\n<p>However, there are still some big files that remain in <code>pkgs</code> folder in anaconda python.</p>\n\n<p>Is it safe to manually delete all the files in <code>pkgs</code> folder? Any risk of corrupting my anaconda environment? What are some side effects, if any?</p>\n\n<p>I am using anaconda 2018 on windows 10.</p>\n"}, {"tags": ["python", "python-3.x", "pycharm"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11541840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c13f8daae4da2a22f46ab68b7fef8d2?s=128&d=identicon&r=PG&f=1", "display_name": "rignpm04", "link": "https://stackoverflow.com/users/11541840/rignpm04"}, "edited": false, "score": 0, "creation_date": 1558568191, "post_id": 56266244, "comment_id": 99148692, "body": "Sorry I&#39;ve never used grep before. Where would I utilize that in my code? Thank you for helping"}, {"owner": {"reputation": 253, "user_id": 11343425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRr7l.png?s=128&g=1", "display_name": "SurpriseDog", "link": "https://stackoverflow.com/users/11343425/surprisedog"}, "reply_to_user": {"reputation": 21, "user_id": 11541840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c13f8daae4da2a22f46ab68b7fef8d2?s=128&d=identicon&r=PG&f=1", "display_name": "rignpm04", "link": "https://stackoverflow.com/users/11541840/rignpm04"}, "edited": false, "score": 0, "creation_date": 1558568338, "post_id": 56266244, "comment_id": 99148710, "body": "If you are running linux (or cygwin inside windows), grep is a terminal program that will do simple search operations like this. You can then pipe the output into your python program."}], "tags": [], "owner": {"reputation": 253, "user_id": 11343425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRr7l.png?s=128&g=1", "display_name": "SurpriseDog", "link": "https://stackoverflow.com/users/11343425/surprisedog"}, "is_accepted": false, "score": 2, "last_activity_date": 1558567775, "creation_date": 1558567775, "answer_id": 56266244, "question_id": 56266208, "link": "https://stackoverflow.com/questions/56266208/how-to-print-multiple-lines-with-line-strip/56266244#56266244", "title": "How to print multiple lines with line.strip()", "body": "<p>An easier solution would be to use grep to do the exact same thing:</p>\n\n<pre><code>grep -i -A 10 \"Background:yellow;\" &lt;filename&gt;\n</code></pre>\n\n<p>-A 10 will print the 10 lines after the matching line.</p>\n"}, {"tags": [], "owner": {"reputation": 30832, "user_id": 459745, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/08a2c6f16c0d4dad20d169d9d76848ac?s=128&d=identicon&r=PG", "display_name": "Hai Vu", "link": "https://stackoverflow.com/users/459745/hai-vu"}, "is_accepted": false, "score": 1, "last_activity_date": 1558569581, "creation_date": 1558569581, "answer_id": 56266424, "question_id": 56266208, "link": "https://stackoverflow.com/questions/56266208/how-to-print-multiple-lines-with-line-strip/56266424#56266424", "title": "How to print multiple lines with line.strip()", "body": "<p>Here is my approach:</p>\n\n<ol>\n<li>Read the file, line by line</li>\n<li>If we find what we are looking for on that line, set a counter to 11 (that means this line, plus 10 more to follow)</li>\n<li>Then, if the counter is greater than 0, print that line and decrease the counter</li>\n</ol>\n\n<p>Code:</p>\n\n<pre><code>counter = 0\nwith open('data.txt') as f:\n    for line in f:\n        if 'Background:yellow;' in line:\n            counter = 11\n            print()  # Optional: Put out an empty line\n        if counter &gt; 0:\n            print(line, end='')\n            counter -= 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 9607657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DZvpt.jpg?s=128&g=1", "display_name": "Ronald Rodrigues", "link": "https://stackoverflow.com/users/9607657/ronald-rodrigues"}, "is_accepted": false, "score": 0, "last_activity_date": 1558571215, "creation_date": 1558571215, "answer_id": 56266599, "question_id": 56266208, "link": "https://stackoverflow.com/questions/56266208/how-to-print-multiple-lines-with-line-strip/56266599#56266599", "title": "How to print multiple lines with line.strip()", "body": "<p>Complementing the @benjamin answer, if you want to retrieve the <code>grep</code> output inside of python:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nimport subprocess\n\noutput = subprocess.check_output(\n    'grep -i -A 10 \"Background:yellow;\" &lt;filename&gt;',\n    stderr=subprocess.STDOUT,\n    shell=True).decode()\n\nlines = output.split('\\n')\nprint(lines)\n</code></pre>\n\n<p>The first line: <code>lines[0]</code>, is your matched line.</p>\n"}], "owner": {"reputation": 21, "user_id": 11541840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c13f8daae4da2a22f46ab68b7fef8d2?s=128&d=identicon&r=PG&f=1", "display_name": "rignpm04", "link": "https://stackoverflow.com/users/11541840/rignpm04"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 926, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1558571215, "creation_date": 1558567497, "last_edit_date": 1558567936, "question_id": 56266208, "link": "https://stackoverflow.com/questions/56266208/how-to-print-multiple-lines-with-line-strip", "title": "How to print multiple lines with line.strip()", "body": "<p>I'm working on a data mining program that is looking for the keyword <code>Background:yellow;</code>. I want to find it and print the line it appears on and the ten lines that come afterwards. so far I have my program printing the ling that the keyword appears on and the line number, but I can't get it to print the next few lines. My code is below:</p>\n\n<p>I've tried to use <code>print(\"line{}: {}\".format{cnt, line[int:int])</code>, but it hasn't worked. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nimport sys\n\nsys.stdout = open('results', 'a')\nprint(sys.stdout)\n\n\nfilepath = 'test'\n\nwith open(filepath) as fp:\n    line = fp.readline(5)\n    cnt = 1\n    while line:\n\n\n        line = fp.readline()\n        cnt += 1\n\n        if str(\"Background:yellow;\") not in line:\n            continue\n\n        elif str(\"Background:yellow;\")  in line:\n\n            print(\"\"\"\n\n                        FOUND\n\n                        \"\"\")\n            print(\"line{}: {}\".format(cnt, line.strip()))\n</code></pre>\n"}, {"tags": ["python", "pyqt", "pyqt5", "qgraphicspixmapitem"], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 11318326, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-e0auHiW-3Vo/AAAAAAAAAAI/AAAAAAAAAAc/S2RXfRnCNro/photo.jpg?sz=128", "display_name": "Black Mage", "link": "https://stackoverflow.com/users/11318326/black-mage"}, "edited": false, "score": 0, "creation_date": 1558569613, "post_id": 56266347, "comment_id": 99148925, "body": "how does the paint method know where the bounding rect is if there is no QRect defined? Doesn&#39;t make sense to me. I&#39;ve been programming with PyQt within just this week, so all this is really new to me."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 47, "user_id": 11318326, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-e0auHiW-3Vo/AAAAAAAAAAI/AAAAAAAAAAc/S2RXfRnCNro/photo.jpg?sz=128", "display_name": "Black Mage", "link": "https://stackoverflow.com/users/11318326/black-mage"}, "edited": false, "score": 0, "creation_date": 1558569713, "post_id": 56266347, "comment_id": 99148950, "body": "@BlackMage All QGraphicsItem has boundingRect defined, in the case of QGraphicsPixmapItem is the rectangle that occupies the pixmap. I recommend you read <a href=\"https://doc.qt.io/qt-5/graphicsview.html\" rel=\"nofollow noreferrer\">doc.qt.io/qt-5/graphicsview.html</a>"}, {"owner": {"reputation": 47, "user_id": 11318326, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-e0auHiW-3Vo/AAAAAAAAAAI/AAAAAAAAAAc/S2RXfRnCNro/photo.jpg?sz=128", "display_name": "Black Mage", "link": "https://stackoverflow.com/users/11318326/black-mage"}, "edited": false, "score": 0, "creation_date": 1558569849, "post_id": 56266347, "comment_id": 99148980, "body": "Alright, thanks! But one more thing is that the width in my image are different in the right and down borders, they are more thin. That would be because of my base code/pixmap?"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 47, "user_id": 11318326, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-e0auHiW-3Vo/AAAAAAAAAAI/AAAAAAAAAAc/S2RXfRnCNro/photo.jpg?sz=128", "display_name": "Black Mage", "link": "https://stackoverflow.com/users/11318326/black-mage"}, "edited": false, "score": 0, "creation_date": 1558569966, "post_id": 56266347, "comment_id": 99149002, "body": "@BlackMage How big is your image?"}, {"owner": {"reputation": 47, "user_id": 11318326, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-e0auHiW-3Vo/AAAAAAAAAAI/AAAAAAAAAAc/S2RXfRnCNro/photo.jpg?sz=128", "display_name": "Black Mage", "link": "https://stackoverflow.com/users/11318326/black-mage"}, "edited": false, "score": 0, "creation_date": 1558570074, "post_id": 56266347, "comment_id": 99149027, "body": "it is a 16x16 png image and scaled to 32x32 in my program."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 47, "user_id": 11318326, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-e0auHiW-3Vo/AAAAAAAAAAI/AAAAAAAAAAc/S2RXfRnCNro/photo.jpg?sz=128", "display_name": "Black Mage", "link": "https://stackoverflow.com/users/11318326/black-mage"}, "edited": false, "score": 0, "creation_date": 1558570109, "post_id": 56266347, "comment_id": 99149035, "body": "Try with my update, what happens is that the QPen takes the inner edge on the top-left sides and the outer edge of the botton-right"}, {"owner": {"reputation": 47, "user_id": 11318326, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-e0auHiW-3Vo/AAAAAAAAAAI/AAAAAAAAAAc/S2RXfRnCNro/photo.jpg?sz=128", "display_name": "Black Mage", "link": "https://stackoverflow.com/users/11318326/black-mage"}, "edited": false, "score": 0, "creation_date": 1558578345, "post_id": 56266347, "comment_id": 99150427, "body": "Sorry for extending this comment, but how would I also paint an arbitrary QRect in the same code? I tried painting the bounding rect with the code, but also another rect and couldn&#39;t. Even replacing r for any QRect wouldn&#39;t paint anything. So it just works for the bounding rect for me."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 47, "user_id": 11318326, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-e0auHiW-3Vo/AAAAAAAAAAI/AAAAAAAAAAc/S2RXfRnCNro/photo.jpg?sz=128", "display_name": "Black Mage", "link": "https://stackoverflow.com/users/11318326/black-mage"}, "edited": false, "score": 0, "creation_date": 1558579601, "post_id": 56266347, "comment_id": 99150632, "body": "@BlackMage The QRectf that could be painted should have an intersection with the boundingRect, because if there is not, it will not be painted, the boundingRect is like a painter&#39;s canvas. I recommend reading the link I have provided in one of my comments since QGraphicsView and QGraphicsView handle many coordinate systems. Read the documentation, and review the examples of Qt, or the examples that abound on the internet because otherwise you will complicate too much, this is not learned from one day to the next."}], "tags": [], "owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "is_accepted": true, "score": 1, "last_activity_date": 1558570055, "last_edit_date": 1558570055, "creation_date": 1558568776, "answer_id": 56266347, "question_id": 56266185, "link": "https://stackoverflow.com/questions/56266185/painting-qgraphicspixmapitem-border-on-hover/56266347#56266347", "title": "Painting QGraphicsPixmapItem border on hover", "body": "<p>The QGraphicsItem do not have the paintEvent method but the <a href=\"https://doc.qt.io/qt-5/qgraphicsitem.html#paint\" rel=\"nofollow noreferrer\">paint()</a> method:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from PyQt5 import QtCore, QtGui, QtWidgets\n\n\nclass PixmapItem(QtWidgets.QGraphicsPixmapItem):\n    def __init__(self, pixmap, parent=None):\n        super().__init__(pixmap, parent)\n        self.setAcceptHoverEvents(True)\n        self._is_hovered = False\n\n    def hoverEnterEvent(self, event):\n        self._is_hovered = True\n        self.update()\n        super().hoverEnterEvent(event)\n\n    def hoverLeaveEvent(self, event):\n        self._is_hovered = False\n        self.update()\n        super().hoverLeaveEvent(event)\n\n    def paint(self, painter, option, widget=None):\n        super().paint(painter, option, widget)\n        if self._is_hovered:\n            painter.save()\n            pen = QtGui.QPen(QtGui.QColor(\"black\"))\n            pen.setWidth(4)\n            painter.setPen(pen)\n            painter.drawRect(self.boundingRect())\n            painter.restore()\n\n\nif __name__ == \"__main__\":\n    import sys\n\n    app = QtWidgets.QApplication(sys.argv)\n\n    scene = QtWidgets.QGraphicsScene()\n    view = QtWidgets.QGraphicsView(scene)\n    item = PixmapItem(QtGui.QPixmap(\"image.png\"))\n    scene.addItem(item)\n    view.resize(640, 480)\n    view.show()\n    sys.exit(app.exec_())\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def paint(self, painter, option, widget=None):\n    super().paint(painter, option, widget)\n    if self._is_hovered:\n        painter.save()\n        pen = QtGui.QPen(QtGui.QColor(\"black\"))\n        pen.setWidth(4)\n        painter.setPen(pen)\n        r = self.boundingRect()\n        r.adjust(0, 0, -pen.width()/2, -pen.width()/2)\n        painter.drawRect(r)\n        painter.restore()\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 11318326, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-e0auHiW-3Vo/AAAAAAAAAAI/AAAAAAAAAAc/S2RXfRnCNro/photo.jpg?sz=128", "display_name": "Black Mage", "link": "https://stackoverflow.com/users/11318326/black-mage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "accepted_answer_id": 56266347, "answer_count": 1, "score": 2, "last_activity_date": 1558570055, "creation_date": 1558567263, "last_edit_date": 1558568903, "question_id": 56266185, "link": "https://stackoverflow.com/questions/56266185/painting-qgraphicspixmapitem-border-on-hover", "title": "Painting QGraphicsPixmapItem border on hover", "body": "<p>I'm trying to create my own QGraphicsPixmapItem where I can active on hover mode and I want to paint a black border when I hover over the rect of the item, and go back to normal when I leave the rect space.</p>\n\n<p>I started this code, but don't know what to do next. Also wanted to do a paintEvent, but QGraphicsPixmapItems doesn't have that. So am even more confused as don't think the paint method would be the same.</p>\n\n<pre><code>class PixmapItem(QGraphicsPixmapItem):\n    def __init__(self, pixmap, rect, parent=None):\n        super().__init__(parent)\n        self.pixmap = pixmap\n        self.setPixmap(self.pixmap)\n        self.rect = rect\n        self.setAcceptHoverEvents(True)\n\n    def hoverEnterEvent(self, *args, **kwargs):\n        pass\n</code></pre>\n\n<p>I could make the hover print 'hello' but can't do anything else, even with some examples, because those are with paintEvent and other type of items.</p>\n\n<p>I would like to maintain the type of item if possible and paint the border as i said. But also don't know if it would be a better approach that's also simple.</p>\n"}, {"tags": ["python", "arrays", "pandas", "parquet"], "answers": [{"tags": [], "owner": {"reputation": 104532, "user_id": 653364, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/7a7a675bc479a30c1389d4c64f612a95?s=128&d=identicon&r=PG", "display_name": "joris", "link": "https://stackoverflow.com/users/653364/joris"}, "is_accepted": true, "score": 2, "last_activity_date": 1558686648, "creation_date": 1558686648, "answer_id": 56288696, "question_id": 56266147, "link": "https://stackoverflow.com/questions/56266147/save-a-pandas-dataframe-with-a-column-with-2d-arrays-as-a-parquet-file-in-python/56288696#56288696", "title": "Save a pandas dataframe with a column with 2d arrays as a parquet file in python", "body": "<p>It's correct that pyarrow / parquet has this limitation of not storing 2D arrays. </p>\n\n<p>But, parquet (and arrow) support nested lists, and you could represent a 2D array as a list of lists (or in python an array of arrays or list of arrays is also fine). So one option could be to convert your 2D arrays to such format.</p>\n\n<p>Example that such nested lists/arrays work:</p>\n\n<pre><code>In [2]: df = pd.DataFrame(\n   ...:      {'a': [[np.array([1, 2, 3]), np.array([4, 5, 6])],\n   ...:             [np.array([3, 4, 5]), np.array([6, 7, 8])]]})\n\nIn [3]: df.to_parquet('test_nested_list.parquet') \n\nIn [4]: res = pd.read_parquet('test_nested_list.parquet')\n\nIn [5]: res['a']\nOut[5]: \n0    [[1, 2, 3], [4, 5]]\n1    [[1, 2], [3, 4, 5]]\nName: a, dtype: object\n\nIn [6]: res['a'].values\nOut[6]: \narray([array([array([1, 2, 3]), array([4, 5, 6])], dtype=object),\n       array([array([3, 4, 5]), array([6, 7, 8])], dtype=object)],\n      dtype=object)\n</code></pre>\n"}], "owner": {"reputation": 411, "user_id": 4793599, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/f74f222baedd7689e9bd81bd2b3bbafb?s=128&d=identicon&r=PG&f=1", "display_name": "Amir Hossein F", "link": "https://stackoverflow.com/users/4793599/amir-hossein-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2181, "favorite_count": 0, "accepted_answer_id": 56288696, "answer_count": 1, "score": 1, "last_activity_date": 1596209889, "creation_date": 1558566961, "question_id": 56266147, "link": "https://stackoverflow.com/questions/56266147/save-a-pandas-dataframe-with-a-column-with-2d-arrays-as-a-parquet-file-in-python", "title": "Save a pandas dataframe with a column with 2d arrays as a parquet file in python", "body": "<p>I'm trying to save a pandas dataframe to a parquet file using <code>pd.to_parquet(df)</code>.<code>df</code> is a dataframe with multiple columns and one of the columns is filled with 2d arrays in each row. As I do this, I receive an error from <code>pyarrow</code> complaining that only 1-d arrays are supported. I googled and it seems there is no solution. I just wanted to confirm that in fact there is no solution to this and I have to somehow represent my 2-d array with a 1-d array.</p>\n"}, {"tags": ["python", "json", "discord", "discord.py", "discord.py-rewrite"], "comments": [{"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1558566964, "post_id": 56266124, "comment_id": 99148463, "body": "You save json in <code>CONFIG</code>\u2026seem like you should be looking in that for the token and owner."}], "answers": [{"tags": [], "owner": {"reputation": 579, "user_id": 2873090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6ca02599d836c10ad5420f740311ef9?s=128&d=identicon&r=PG&f=1", "display_name": "catleeball", "link": "https://stackoverflow.com/users/2873090/catleeball"}, "is_accepted": false, "score": 1, "last_activity_date": 1559336960, "last_edit_date": 1559336960, "creation_date": 1558567283, "answer_id": 56266191, "question_id": 56266124, "link": "https://stackoverflow.com/questions/56266124/fixing-typeerror-io-textiowrapper-object-is-not-subscriptable-in-python-sc/56266191#56266191", "title": "Fixing &quot;TypeError: &#39;_io.TextIOWrapper&#39; object is not subscriptable&quot; in python script", "body": "<p>You're trying to call the file handle as a dictionary instead of the JSON dictionary stored in <code>CONFIG</code>. Instead, try:</p>\n\n<pre><code>with open(\"config.json\", \"r\") as infile:\n    try:\n        CONFIG = json.load(infile)\n        token = CONFIG[\"token\"]\n        owner = CONFIG[\"owner\"]\n\n    except (KeyError, FileNotFoundError):\n        raise EnvironmentError(\n            \"Your config.json file is either missing, or incomplete. Check your config.json and ensure it has the keys 'token' and 'owner_id'\"\n        )\n</code></pre>\n\n<p>Note also that underscores are usually used as variable names if they won't be used anywhere, and that the underscore would be assigned to <code>CONFIG['token']</code>, then immediately reassigned to <code>CONFIG['owner']</code> in your case. I gave them some new unique variable names if you're planning to use them later.</p>\n"}], "owner": {"reputation": 13, "user_id": 11079212, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q9TNHnDyZNw/AAAAAAAAAAI/AAAAAAAAHP8/pTWPhQDLYMc/photo.jpg?sz=128", "display_name": "Alexander Bisono", "link": "https://stackoverflow.com/users/11079212/alexander-bisono"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1751, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1559336960, "creation_date": 1558566806, "question_id": 56266124, "link": "https://stackoverflow.com/questions/56266124/fixing-typeerror-io-textiowrapper-object-is-not-subscriptable-in-python-sc", "title": "Fixing &quot;TypeError: &#39;_io.TextIOWrapper&#39; object is not subscriptable&quot; in python script", "body": "<p>I'm trying to store some data in a config.json for a bot that I'm working on, but I keep getting the same error every time I attempt to run it.</p>\n\n<p>I'm running Python 3.7.3, latest version of the rewrite. I've attempted moving around the config.json file around to no avail. I'm probably missing something incredibly obvious, but I don't know what.</p>\n\n<p>Where the exception is being raised:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>with open(\"config.json\", \"r\") as infile:\n    try:\n        CONFIG = json.load(infile)\n        _ = infile[\"token\"]\n        _ = infile[\"owner\"]\n\n    except (KeyError, FileNotFoundError):\n        raise EnvironmentError(\n            \"Your config.json file is either missing, or incomplete. Check your config.json and ensure it has the keys 'token' and 'owner_id'\"\n        )\n</code></pre>\n\n<p>Expected Result: Code pulls <code>token</code> and <code>owner</code> from the file, and proceeds to run the bot.</p>\n\n<p>Actual Result: Bot doesn't get launched. Traceback output -</p>\n\n<pre><code>  File \"/Users/prismarine/Desktop/Project_Prismarine/core.py\", line 11, in &lt;module&gt;\n    _ = infile[\"token\"]\nTypeError: '_io.TextIOWrapper' object is not subscriptable\n</code></pre>\n"}, {"tags": ["python", "html", "django", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 4503, "user_id": 895279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cc8354b6c084f50364db5bd2cfe9904?s=128&d=identicon&r=PG", "display_name": "Mate", "link": "https://stackoverflow.com/users/895279/mate"}, "edited": false, "score": 0, "creation_date": 1558567249, "post_id": 56266107, "comment_id": 99148528, "body": "you need to know episodes qty, then you could set  col-md-<b>X</b> where x = 12/episodes qty ... in the example qty = 3 then use col-md-<b>4</b>"}, {"owner": {"reputation": 167, "user_id": 11524931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e0708da5c9ee94447a24181c14e1ff2?s=128&d=identicon&r=PG&f=1", "display_name": "rosababy", "link": "https://stackoverflow.com/users/11524931/rosababy"}, "reply_to_user": {"reputation": 4503, "user_id": 895279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cc8354b6c084f50364db5bd2cfe9904?s=128&d=identicon&r=PG", "display_name": "Mate", "link": "https://stackoverflow.com/users/895279/mate"}, "edited": false, "score": 0, "creation_date": 1558631355, "post_id": 56266107, "comment_id": 99174036, "body": "@Mate I dont understand what u mean"}, {"owner": {"reputation": 4503, "user_id": 895279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cc8354b6c084f50364db5bd2cfe9904?s=128&d=identicon&r=PG", "display_name": "Mate", "link": "https://stackoverflow.com/users/895279/mate"}, "edited": false, "score": 0, "creation_date": 1558644095, "post_id": 56266107, "comment_id": 99179242, "body": "How many sections do you need?"}], "owner": {"reputation": 167, "user_id": 11524931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e0708da5c9ee94447a24181c14e1ff2?s=128&d=identicon&r=PG&f=1", "display_name": "rosababy", "link": "https://stackoverflow.com/users/11524931/rosababy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1558566719, "creation_date": 1558566719, "question_id": 56266107, "link": "https://stackoverflow.com/questions/56266107/how-to-for-loop-the-bootstrap-grid", "title": "how to for loop the bootstrap grid", "body": "<p>I'm trying to make it like the following: <a href=\"https://getbootstrap.com/docs/4.3/examples/pricing/\" rel=\"nofollow noreferrer\">https://getbootstrap.com/docs/4.3/examples/pricing/</a>\nit shows the screen divided into three section\nso it should be like this I think...</p>\n\n<pre><code> &lt;div class=\"row mb-2\"&gt;\n            &lt;div class=\"col-4 bg-danger\"&gt;\n                .col-4\n            &lt;/div&gt;\n            &lt;div class=\"col-4 bg-warning\"&gt;\n                .col-4\n            &lt;/div&gt;\n            &lt;div class=\"col-4 bg-success\"&gt;\n                .col-4\n            &lt;/div&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>But the problem is I am using django jinja template and for loop. so it groups the whole content.</p>\n\n<p>This is my code but it won't do what's like in the link</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-6 col-md-4\"&gt;\n        &lt;div class=\"card\"&gt;\n        {% for all_episode in episode %}\n        &lt;a href=\"{% url 'episode_detail' slug=all_episode.slug %}\"&gt;&lt;img class=\"card-img-top\" src='{{all_episode.image.url}}'&gt;&lt;/a&gt;\n            &lt;div class=\"card-body\"&gt;\n                &lt;h5 class=\"card-title\"&gt;\n                  &lt;a href=\"{% url 'episode_detail' slug=all_episode.slug %}\"&gt;{{ all_episode.title }}&lt;/a&gt;\n                &lt;/h5&gt;\n                &lt;p class=\"card-text\"&gt;{{ all_episode.story |slice:\":100\" }}...&lt;/p&gt;\n            &lt;/div&gt;\n\n&lt;div class=\"card-footer\"&gt;\n                &lt;small class=\"text-muted\"&gt;\n                  &lt;span class=\"h5\"&gt;\n                  &lt;a href=\"{% url 'series_detail' slug=all_episode.series.slug %}\"&gt;{{ all_episode.series }}&lt;/a&gt;\n                &lt;/span&gt; / \n            &lt;span class=\"h6\"&gt;&lt;a href=\"{% url 'season_detail' slug=all_episode.season.slug %}\"&gt;{{ all_episode.season }}&lt;/a&gt;&lt;/span&gt;&lt;/small&gt;\n            &lt;/div&gt;\n        {% endfor %}\n\n\n\n\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["python", "dynamic", "pickle"], "owner": {"reputation": 23, "user_id": 4823076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b20804329924e037c5ec3df0eec8dc4d?s=128&d=identicon&r=PG&f=1", "display_name": "datameddler", "link": "https://stackoverflow.com/users/4823076/datameddler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1558566715, "creation_date": 1558566715, "question_id": 56266106, "link": "https://stackoverflow.com/questions/56266106/error-when-pickling-dynamically-defined-extension-of-an-abstract-base-class", "title": "Error when pickling dynamically defined extension of an abstract base class", "body": "<p>I would like to persist an object that is created from a dynamically defined class that extends an abstract base class. I have tried to achieve this by pickling the object. I am using Python 3.6.8</p>\n\n<p>The error message suggests that pickle is trying to look for the class I have created within the abc module and is unable to find it there. I have tried to pickle by creating the class within the main module (by defining class_factory inside test.py) but I get the same error message.</p>\n\n<p>objmodel.py</p>\n\n<pre><code>from abc import ABC, abstractmethod\n\nclass mtype(ABC):\n    def __init__(self):\n        super().__init__()\n\n    @abstractmethod\n    def set_someattrib(self, attrval):\n        pass\n\n\n@classmethod\ndef set_attrib1(cls, aval):\n    cls.attrib = aval\n</code></pre>\n\n<p>utils.py</p>\n\n<pre><code>from objmodel import *\n\n\ndef class_factory(mname, aval):\n    c1 = type(mname, (mtype,), {\"set_someattrib\": set_attrib1})\n    c1.set_someattrib(aval)\n    return c1\n</code></pre>\n\n<p>test.py</p>\n\n<pre><code>from utils import class_factory\nimport pickle\n\nc1 = class_factory('C', 1)\nprint(c1.attrib)\nm = c1()\nfh = open('objtest', 'wb')\npickle.dump(m, fh)\n</code></pre>\n\n<p>I get the following error:\n_pickle.PicklingError: Can't pickle : attribute lookup C on abc failed</p>\n"}, {"tags": ["python", "python-3.x", "apache-spark", "pyspark", "rdd"], "answers": [{"comments": [{"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1558619424, "post_id": 56266131, "comment_id": 99167826, "body": "It can also be mapped to a <code>tuple</code>."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1558622027, "post_id": 56266131, "comment_id": 99169417, "body": "@pault That&#39;s right. I suggested <code>frozensets</code> first because I assumed they wanted to do something with sets (rather than just collect the result after)."}], "tags": [], "owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "is_accepted": true, "score": 2, "last_activity_date": 1558622083, "last_edit_date": 1558622083, "creation_date": 1558566831, "answer_id": 56266131, "question_id": 56266045, "link": "https://stackoverflow.com/questions/56266045/how-to-return-distinct-sets-in-a-pyspark-rdd/56266131#56266131", "title": "How to return distinct sets in a PySpark RDD?", "body": "<p>Convert to <code>frozenset</code> because these can be hashed. You can then call <code>distinct</code> as usual:</p>\n\n<pre><code>example.map(frozenset).distinct().map(set).collect()\n# [{1}, {2}, {3}]\n</code></pre>\n\n<p>As pault suggested, you can also convert the sets to <code>tuple</code> before dropping duplicates.</p>\n"}], "owner": {"reputation": 65, "user_id": 8915712, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1923c5d879610847cc8aa0adcf22ca2?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Dhanasetty", "link": "https://stackoverflow.com/users/8915712/abhishek-dhanasetty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "accepted_answer_id": 56266131, "answer_count": 1, "score": 2, "last_activity_date": 1558622083, "creation_date": 1558566117, "last_edit_date": 1558619838, "question_id": 56266045, "link": "https://stackoverflow.com/questions/56266045/how-to-return-distinct-sets-in-a-pyspark-rdd", "title": "How to return distinct sets in a PySpark RDD?", "body": "<p>I have an RDD, with a different set of values, and I want to return all the distinct sets from the original RDD. Is there any key term such as distinct?</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>example = sc.parallelize([{1}, {2}, {3}, {1}])\nexample.collect()\n</code></pre>\n\n<p>This outputs:</p>\n\n<pre><code>[{1}, {2}, {3}, {1}]\n</code></pre>\n\n<p>I tried <code>example.distinct().collect()</code> and the answer I was expecting is an RDD with distinct sets:</p>\n\n<pre><code>[{1}, {2}, {3}]  # expected result\n</code></pre>\n\n<p>Is there any way to do it?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 10593, "user_id": 4621513, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/uCfJK.png?s=128&g=1", "display_name": "mkrieger1", "link": "https://stackoverflow.com/users/4621513/mkrieger1"}, "edited": false, "score": 0, "creation_date": 1558566208, "post_id": 56266032, "comment_id": 99148299, "body": "What was the problem when you tried to do that?"}, {"owner": {"reputation": 38630, "user_id": 1324033, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/PaonW.png?s=128&g=1", "display_name": "Sayse", "link": "https://stackoverflow.com/users/1324033/sayse"}, "edited": false, "score": 0, "creation_date": 1558566250, "post_id": 56266032, "comment_id": 99148310, "body": "Append returns none, you don&#39;t need to assign it back"}, {"owner": {"reputation": 47, "user_id": 10463016, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HkLJTIsCju4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW1UkoghAPBgSHz2iCN4SUH2FWrdw/mo/photo.jpg?sz=128", "display_name": "Ardy", "link": "https://stackoverflow.com/users/10463016/ardy"}, "edited": false, "score": 0, "creation_date": 1558567878, "post_id": 56266032, "comment_id": 99148642, "body": "I am very new can you tell me how I can assign it back"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 10463016, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HkLJTIsCju4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW1UkoghAPBgSHz2iCN4SUH2FWrdw/mo/photo.jpg?sz=128", "display_name": "Ardy", "link": "https://stackoverflow.com/users/10463016/ardy"}, "edited": false, "score": 0, "creation_date": 1558612411, "post_id": 56266639, "comment_id": 99163750, "body": "Perfect!! Thanks, Nithin"}, {"owner": {"reputation": 47, "user_id": 10463016, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HkLJTIsCju4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW1UkoghAPBgSHz2iCN4SUH2FWrdw/mo/photo.jpg?sz=128", "display_name": "Ardy", "link": "https://stackoverflow.com/users/10463016/ardy"}, "edited": false, "score": 0, "creation_date": 1558785216, "post_id": 56266639, "comment_id": 99219806, "body": "Your answer works just fine. But can I assign it a new data frame? something   dfnew == df[df[&quot;Activity Name&quot;].str.contains(selected_text)]"}, {"owner": {"reputation": 56, "user_id": 6484158, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uoc-Al7rb-Q/AAAAAAAAAAI/AAAAAAAAAEM/F1RBJGXWbjM/photo.jpg?sz=128", "display_name": "Nithin Reddy", "link": "https://stackoverflow.com/users/6484158/nithin-reddy"}, "reply_to_user": {"reputation": 47, "user_id": 10463016, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HkLJTIsCju4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW1UkoghAPBgSHz2iCN4SUH2FWrdw/mo/photo.jpg?sz=128", "display_name": "Ardy", "link": "https://stackoverflow.com/users/10463016/ardy"}, "edited": false, "score": 0, "creation_date": 1559050927, "post_id": 56266639, "comment_id": 99292227, "body": "<code>==</code> will compare the two items. you can try df_new = df[df[&quot;Activity Name&quot;].str.contains(selected_text)].copy()"}], "tags": [], "owner": {"reputation": 56, "user_id": 6484158, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uoc-Al7rb-Q/AAAAAAAAAAI/AAAAAAAAAEM/F1RBJGXWbjM/photo.jpg?sz=128", "display_name": "Nithin Reddy", "link": "https://stackoverflow.com/users/6484158/nithin-reddy"}, "is_accepted": true, "score": 1, "last_activity_date": 1558571594, "creation_date": 1558571594, "answer_id": 56266639, "question_id": 56266032, "link": "https://stackoverflow.com/questions/56266032/creating-a-new-column-from-existing-column-in-the-data-frame-based-on-the-criter/56266639#56266639", "title": "Creating a new column from existing column in the data frame based on the criteria", "body": "<p>So if i understand correctly. You have a column <code>Activity Name</code> in your dataframe and you want to write a method which would each time print a subset of a dataframe which has a particular keyword.</p>\n\n<p>If my understanding is right then.</p>\n\n<pre><code>def update_text(df, selected_text):\n    return df[df[\"Activity Name\"].str.contains(selected_text)]\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 10463016, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-HkLJTIsCju4/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DW1UkoghAPBgSHz2iCN4SUH2FWrdw/mo/photo.jpg?sz=128", "display_name": "Ardy", "link": "https://stackoverflow.com/users/10463016/ardy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 56266639, "answer_count": 1, "score": -2, "last_activity_date": 1580479999, "creation_date": 1558566042, "last_edit_date": 1580479999, "question_id": 56266032, "link": "https://stackoverflow.com/questions/56266032/creating-a-new-column-from-existing-column-in-the-data-frame-based-on-the-criter", "title": "Creating a new column from existing column in the data frame based on the criteria", "body": "<p>Create a new column based on the below criteria. Data Type for column A is String</p>\n\n<p>If there exists a text in column A string.  Create column B which contains only the string. \neg:  Column A: This product is used for pipefitter\n     Desired: if column A contains pipefitter\n     Column B = pipefitter</p>\n\n<pre><code>\"\"\"df[\"New_text\"] = []\ndef update_text(selected_text):\n    for text in df['Activity Name']:\n        if selected_text in text:\n            df['New_text'] = df['New_text'].append('text')\"\"\"\n</code></pre>\n"}, {"tags": ["python", "scikit-learn", "one-hot-encoding"], "comments": [{"owner": {"reputation": 5550, "user_id": 7389608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QKeuI.jpg?s=128&g=1", "display_name": "giser_yugang", "link": "https://stackoverflow.com/users/7389608/giser-yugang"}, "edited": false, "score": 0, "creation_date": 1558576228, "post_id": 56266011, "comment_id": 99150071, "body": "Try <code>np.argmax(results,axis=-1)</code> to return single column."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 9189692, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qJ7PZEQApjQ/AAAAAAAAAAI/AAAAAAAAAGM/xCBipc6xn2E/photo.jpg?sz=128", "display_name": "\u042e\u043b\u0438\u044f \u0422\u0432\u0435\u0440\u0434\u043e\u0445\u043b\u0435\u0431", "link": "https://stackoverflow.com/users/9189692/%d0%ae%d0%bb%d0%b8%d1%8f-%d0%a2%d0%b2%d0%b5%d1%80%d0%b4%d0%be%d1%85%d0%bb%d0%b5%d0%b1"}, "edited": false, "score": 0, "creation_date": 1558598253, "post_id": 56268280, "comment_id": 99155949, "body": "Thanks, That&#39;s exacty what i needed!!"}], "tags": [], "owner": {"reputation": 22919, "user_id": 7093741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9cJi0.jpg?s=128&g=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/7093741/chris"}, "is_accepted": true, "score": 5, "last_activity_date": 1611493177, "last_edit_date": 1611493177, "creation_date": 1558587347, "answer_id": 56268280, "question_id": 56266011, "link": "https://stackoverflow.com/questions/56266011/how-to-go-back-from-one-hot-encoded-labels-to-single-column-using-sklearn/56268280#56268280", "title": "How to go back from ONE-HOT-ENCODED labels to single column using sklearn?", "body": "<p>Use <code>inverse_transform</code> of <code>LabelEncoder</code> and <code>OneHotEncoder</code>:</p>\n<pre><code>import pandas as pd\nfrom sklearn.preprocessing import LabelEncoder, OneHotEncoder\n\ns = pd.Series(['a', 'b', 'c'])\nle = LabelEncoder()\nohe = OneHotEncoder(sparse=False)\ns1 = le.fit_transform(s)\ns2 = ohe.fit_transform(s.to_numpy().reshape(-1, 1))\n</code></pre>\n<p>What you have:</p>\n<pre><code># s1 from LabelEncoder\narray([0, 1, 2])\n\n# s2 from OneHotEncoder\narray([[1., 0., 0.],\n       [0., 1., 0.],\n       [0., 0., 1.]])\n</code></pre>\n<p>What you should do:</p>\n<pre><code>inv_s1 = le.inverse_transform(s1)\ninv_s2 = ohe.inverse_transform(s2).ravel()\n</code></pre>\n<p>Output:</p>\n<pre><code># inv_s1 == inv_s2 == s\narray(['a', 'b', 'c'], dtype=object)\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 9189692, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qJ7PZEQApjQ/AAAAAAAAAAI/AAAAAAAAAGM/xCBipc6xn2E/photo.jpg?sz=128", "display_name": "\u042e\u043b\u0438\u044f \u0422\u0432\u0435\u0440\u0434\u043e\u0445\u043b\u0435\u0431", "link": "https://stackoverflow.com/users/9189692/%d0%ae%d0%bb%d0%b8%d1%8f-%d0%a2%d0%b2%d0%b5%d1%80%d0%b4%d0%be%d1%85%d0%bb%d0%b5%d0%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1380, "favorite_count": 0, "accepted_answer_id": 56268280, "answer_count": 1, "score": 2, "last_activity_date": 1611493177, "creation_date": 1558565828, "question_id": 56266011, "link": "https://stackoverflow.com/questions/56266011/how-to-go-back-from-one-hot-encoded-labels-to-single-column-using-sklearn", "title": "How to go back from ONE-HOT-ENCODED labels to single column using sklearn?", "body": "<p>I have predicted some data using model and getting this kind of results </p>\n\n<pre><code>[[0 0 0 ... 0 0 1]\n [0 0 0 ... 0 0 0]\n [0 0 0 ... 0 0 0]\n ...\n [0 0 0 ... 0 0 0]\n [0 0 0 ... 0 0 1]\n [0 0 0 ... 0 0 0]]\n</code></pre>\n\n<p>which are basically one-hot encoded labels of target column.\nNow I want to go somehow back to a single column of original values.\nI used these lines to do my encoding.\nHow can I go back to sinle column?</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>le_candidate = LabelEncoder()\ndf['candidate_encoded'] = le_candidate.fit_transform(df.Candidate)\ncandidate_ohe = OneHotEncoder()\nY = candidate_ohe.fit_transform(df.candidate_encoded.values.reshape(-1, 1)).toarray()\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 6003, "user_id": 3063243, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a88a5195a59ff5fd55255f185f518fdc?s=128&d=identicon&r=PG&f=1", "display_name": "phi", "link": "https://stackoverflow.com/users/3063243/phi"}, "edited": false, "score": 0, "creation_date": 1558565711, "post_id": 56265940, "comment_id": 99148208, "body": "In the first snippet, your decorator cough_dec returns a function <code>return func_wrapper</code>, in the second snippet your decorator c_dec return the-ouput of the function <code>return func_wrapper()</code> which is None"}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 11428102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9d81f71591bd60673618f1d2bf9bad?s=128&d=identicon&r=PG&f=1", "display_name": "Conor Retra", "link": "https://stackoverflow.com/users/11428102/conor-retra"}, "is_accepted": false, "score": 1, "last_activity_date": 1558566053, "creation_date": 1558566053, "answer_id": 56266035, "question_id": 56265940, "link": "https://stackoverflow.com/questions/56265940/whats-the-difference-between-the-two-code-snippets-below-to-me-they-look-almo/56266035#56266035", "title": "What&#39;s the difference between the two code snippets below. To me, they look almost identical, but they behave completely different", "body": "<p>Your <code>wrapper_func()</code> function does not return anything. Therefore , when you try to return the result of <code>wrapper_func()</code>, you get an error. In your first code snippet, you are returning the function <em>object</em> instead of the result of the function.</p>\n\n<p>See this very similar question: <a href=\"https://stackoverflow.com/questions/9768865/python-nonetype-object-is-not-callable-beginner\">Python NoneType object is not callable (beginner)</a></p>\n"}, {"tags": [], "owner": {"reputation": 6521, "user_id": 7583953, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/w0Jkd.jpg?s=128&g=1", "display_name": "Alec", "link": "https://stackoverflow.com/users/7583953/alec"}, "is_accepted": false, "score": 0, "last_activity_date": 1558566814, "creation_date": 1558566814, "answer_id": 56266127, "question_id": 56265940, "link": "https://stackoverflow.com/questions/56265940/whats-the-difference-between-the-two-code-snippets-below-to-me-they-look-almo/56266127#56266127", "title": "What&#39;s the difference between the two code snippets below. To me, they look almost identical, but they behave completely different", "body": "<p>There is a very big difference between referencing a function object and calling said function. Parentheses induce a function call. If no return statement is present in the function, the function returns <code>None</code>.</p>\n\n<p>As one would expect, <code>None</code> is not callable, but a function object is!</p>\n"}], "owner": {"reputation": 1, "user_id": 11541945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb815ebd070908b86d7d32dafb202755?s=128&d=identicon&r=PG&f=1", "display_name": "jimmyjobindi", "link": "https://stackoverflow.com/users/11541945/jimmyjobindi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1558566825, "creation_date": 1558565372, "last_edit_date": 1558566825, "question_id": 56265940, "link": "https://stackoverflow.com/questions/56265940/whats-the-difference-between-the-two-code-snippets-below-to-me-they-look-almo", "title": "What&#39;s the difference between the two code snippets below. To me, they look almost identical, but they behave completely different", "body": "<p>I have two code snippets that look almost identical to one another.  However, when I run them, the first code snippet works perfectly.  When I run the second script, I get the error:  <code>TypeError: 'NoneType' object is not callable</code></p>\n\n<p>Why???</p>\n\n<p>I've tried renaming the functions.  I've tried changing the text in the functions. </p>\n\n<pre><code>def cough_dec(func):\n    def func_wrapper():\n        print(\"*cough*\")\n        func()\n        print(\"*cough*\")\n\n    return func_wrapper\n\n\n@cough_dec\ndef question():\n    print('can you give me a discount on that?')\n\n\n@cough_dec\ndef answer():\n    print(\"it's only 50p, you cheapskate\")\n\n\nquestion()\nanswer()\n\n=============================================\n\ndef c_dec(func):\n\n    def wrapper_func():\n        print('something')\n        func()\n        print('anything')\n\n    return wrapper_func()\n\n\n@c_dec\ndef say_hello():\n    print(\"Hello World!\")\n\n\n@c_dec\ndef bye():\n    print(\"Goodbye World!\")\n\n\nsay_hello()\nbye()\n</code></pre>\n\n<p>If I remove the parentheses in the second snippet, everything works great, but why?  </p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 958, "user_id": 3685175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccabaa010b177df93aac835a2cf6ed5f?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/3685175/simon"}, "edited": false, "score": 0, "creation_date": 1558567040, "post_id": 56265935, "comment_id": 99148486, "body": "Hello, please follow <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">stackoverflow.com/help/minimal-reproducible-example</a> this example here, it is difficult to actual understand what you&#39;re trying to achieve. Your example isn&#39;t minimal or and barely readable. More importantly it isn&#39;t verifiable. Please provide an example of what you expect the data to look like."}], "answers": [{"tags": [], "owner": {"reputation": 958, "user_id": 3685175, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccabaa010b177df93aac835a2cf6ed5f?s=128&d=identicon&r=PG&f=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/3685175/simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1558567472, "creation_date": 1558567472, "answer_id": 56266204, "question_id": 56265935, "link": "https://stackoverflow.com/questions/56265935/how-to-use-group-by-to-get-max-min-sum-values-from-pandas/56266204#56266204", "title": "How to use group by to get MAX, MIN, SUM values from Pandas", "body": "<p>I'm not entirely sure what you're asking for so I'll try my best until you can provide verification:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>hrly_df = {'dateTime': ['2019-05-21 01:00:00', '2019-05-21 02:00:00', '2019-05-21 03:00:00', '2019-05-21 01:00:00', '2019-05-21 02:00:00'],\n           'field id': [40238, 40238, 40238, 3402, 3402],\n           'HourlyPrecipIn': [0.0, 0.0, 0.0, 0.0, 0.0],\n           'HourlyRH': [73.8, 77.0, 79.9, 73.9, 77.1],\n           'HourlyTempF': [48.4, 46.8, 47.0, 48.4, 46.8]}\n\nhrly_df = pd.DataFrame(hrly_df)\n# Gets you max 'HourlyTempF' per 'field id'\ntemp_max = hrly_df[['field id', 'HourlyTempF']].groupby('field id').max()\n# Gets you min 'HourlyTempF' per 'field id'\ntemp_min = hrly_df[['field id', 'HourlyTempF']].groupby('field id').min()\n# Gets you sum of 'HourlyPrecipIn' per 'field id'\nprecip_sum = hrly_df[['field id', 'HourlyPrecipIn']].groupby('field id').sum()\n\nprint(temp_max)\nprint(temp_min)\nprint(precip_sum)\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 0, "last_activity_date": 1558569089, "creation_date": 1558569089, "answer_id": 56266380, "question_id": 56265935, "link": "https://stackoverflow.com/questions/56265935/how-to-use-group-by-to-get-max-min-sum-values-from-pandas/56266380#56266380", "title": "How to use group by to get MAX, MIN, SUM values from Pandas", "body": "<p>You can do with <code>agg</code> with function list </p>\n\n<pre><code>hrly_df.groupby('field id')['HourlyTempF'].agg(['min','max','sum'])\nOut[313]: \n           min   max    sum\nfield id                   \n3402      46.8  48.4   95.2\n40238     46.8  48.4  142.2\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 10969760, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-tDNIUx7OvFg/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMgAmP403OCYgINhA1DwS-53C5XwA/mo/photo.jpg?sz=128", "display_name": "gwest", "link": "https://stackoverflow.com/users/10969760/gwest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1558569089, "creation_date": 1558565316, "last_edit_date": 1558567796, "question_id": 56265935, "link": "https://stackoverflow.com/questions/56265935/how-to-use-group-by-to-get-max-min-sum-values-from-pandas", "title": "How to use group by to get MAX, MIN, SUM values from Pandas", "body": "<p>I have a data frame below and I would like to get the MAX hourly temp, MIN hourly temp, and SUM hourly precip.  Here is my current code.  I want to print the MAX value for each <code>field id</code>.  What needs to be changed in my code to accomplish this?   Currently the code does not print the max value.  It prints the last value for <code>23:00</code>.  I would like for my output to look like this</p>\n\n<p><a href=\"https://i.stack.imgur.com/DvpIp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DvpIp.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>import pandas\nimport pd as pandas\n\nhrly_df = pd.DataFrame({'dateTime' :[t], 'field id': [id_], 'HourlyPrecipIn': [aPreVJ],'HourlyRH' : [aHumidVJ], 'HourlyTempF' : [aTempVJ]})\n\ntempMax = hrly_df.loc[hrly_df.groupby('field id')['HourlyTempF'].idxmax()]\n</code></pre>\n\n<p><code>dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 01:00:00    40238             0.0      73.8         48.4\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 02:00:00    40238             0.0      77.0         46.8\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 03:00:00    40238             0.0      79.9         47.0\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 04:00:00    40238             0.0      80.6         46.8\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 05:00:00    40238             0.0      82.6         45.2\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 06:00:00    40238             0.0      85.8         45.3\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 07:00:00    40238             0.0      80.2         46.9\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 08:00:00    40238             0.0      71.3         50.1\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 09:00:00    40238             0.0      69.8         50.8\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 10:00:00    40238             0.0      62.7         53.6\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 11:00:00    40238             0.0      62.2         54.2\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 12:00:00    40238             0.0      52.4         55.6\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 13:00:00    40238             0.0      50.9         57.2\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 14:00:00    40238             0.0      46.7         58.8\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 15:00:00    40238             0.0      47.8         57.6\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 16:00:00    40238            0.01      47.1         55.9\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 17:00:00    40238            0.04      61.1         52.4\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 18:00:00    40238            0.03      80.0         48.7\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 19:00:00    40238            0.04      88.1         46.9\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 20:00:00    40238            0.08      93.8         45.3\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 21:00:00    40238            0.07      93.0         45.2\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 22:00:00    40238            0.08      93.0         45.2\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 23:00:00    40238            0.09      92.7         45.1\nStarting import of field id: 3402\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 01:00:00     3402             0.0      73.9         48.4\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 02:00:00     3402             0.0      77.1         46.8\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 03:00:00     3402             0.0      79.9         47.0\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 04:00:00     3402             0.0      80.6         46.8\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 05:00:00     3402             0.0      82.6         45.3\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 06:00:00     3402             0.0      85.6         45.4\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 07:00:00     3402             0.0      80.2         47.0\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 08:00:00     3402             0.0      71.3         50.1\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 09:00:00     3402             0.0      69.7         50.8\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 10:00:00     3402             0.0      62.8         53.6\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 11:00:00     3402             0.0      62.2         54.2\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 12:00:00     3402             0.0      52.6         55.6\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 13:00:00     3402             0.0      50.9         57.2\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 14:00:00     3402             0.0      46.8         58.8\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 15:00:00     3402             0.0      47.8         57.6\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 16:00:00     3402            0.01      47.2         55.9\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 17:00:00     3402            0.03      61.1         52.5\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 18:00:00     3402            0.03      79.9         48.8\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 19:00:00     3402            0.04      88.2         46.9\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 20:00:00     3402            0.08      93.7         45.3\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 21:00:00     3402            0.07      93.0         45.2\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 22:00:00     3402            0.07      93.0         45.2\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 23:00:00     3402            0.08      92.7         45.1\nStarting import of field id: 45883\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 01:00:00    45883             0.0      75.4         48.4\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 02:00:00    45883             0.0      77.6         47.1\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 03:00:00    45883             0.0      79.6         47.3\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 04:00:00    45883             0.0      80.2         47.0\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 05:00:00    45883             0.0      82.5         45.7\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 06:00:00    45883             0.0      84.7         45.8\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 07:00:00    45883             0.0      79.2         47.2\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 08:00:00    45883             0.0      71.9         50.0\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 09:00:00    45883             0.0      68.9         51.4\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 10:00:00    45883             0.0      63.0         53.7\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 11:00:00    45883             0.0      61.8         54.6\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 12:00:00    45883             0.0      52.9         56.1\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 13:00:00    45883             0.0      50.9         57.4\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 14:00:00    45883             0.0      48.4         58.7\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 15:00:00    45883             0.0      48.3         57.8\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 16:00:00    45883            0.02      48.2         55.9\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 17:00:00    45883            0.07      63.0         52.4\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 18:00:00    45883            0.02      79.8         48.9\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 19:00:00    45883            0.05      89.4         47.1\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 20:00:00    45883            0.08      93.4         45.8\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 21:00:00    45883            0.07      93.2         45.6\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 22:00:00    45883            0.04      92.8         45.7\n              dateTime field id  HourlyPrecipIn  HourlyRH  HourlyTempF\n0  2019-05-21 23:00:00    45883             0.1      92.3         45.6</code></p>\n"}, {"tags": ["python", "file", "directory", "filenames"], "answers": [{"tags": [], "owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "is_accepted": true, "score": 1, "last_activity_date": 1558565622, "creation_date": 1558565622, "answer_id": 56265970, "question_id": 56265928, "link": "https://stackoverflow.com/questions/56265928/processing-filenames-in-python/56265970#56265970", "title": "Processing filenames in Python", "body": "<p>If I understand correctly, you are asking about <a href=\"https://www.tutorialspoint.com/python/os_walk.htm\" rel=\"nofollow noreferrer\">the <code>os</code> module's <code>.walk()</code> functionality</a>. Where an example would look like:</p>\n\n<pre><code>import os\nfor root, dirs, files in os.walk(\".\", topdown=False): # \".\" uses current folder\n    # change it to a pathway if you want to process files not where your script is located\n    for name in files:\n        print(os.path.join(root, name))\n</code></pre>\n\n<p>With filename outputs which can be fed to your <code>fixDat()</code> function such as:</p>\n\n<pre><code>./tmp/test.py\n./amrood.tar.gz\n./httpd.conf\n./www.tar.gz\n./mysql.tar.gz\n./test.py\n</code></pre>\n\n<p>Note that these are all strings so you could change the script to:</p>\n\n<pre><code>import os\nfor root, dirs, files in os.walk(\".\", topdown=False):\n    for name in files:\n        if name.endswith('.dat'): # or some other extension\n            print(os.path.join(root, name))\n            fixDat(os.path.join(root, name))\n</code></pre>\n"}], "owner": {"reputation": 1055, "user_id": 8322295, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/mx0gd.jpg?s=128&g=1", "display_name": "Jim421616", "link": "https://stackoverflow.com/users/8322295/jim421616"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 56265970, "answer_count": 1, "score": 0, "last_activity_date": 1558565622, "creation_date": 1558565289, "question_id": 56265928, "link": "https://stackoverflow.com/questions/56265928/processing-filenames-in-python", "title": "Processing filenames in Python", "body": "<p>I've written a function to strip double spaces out of my raw data files:</p>\n\n<pre><code>def fixDat(file):\n    '''\n    Removes extra spaces in the data files. Replaces original file with new\n    and renames original to \"...._original.dat\".\n    '''\n    import os\n\n    import re\n    with open(file+'.dat', 'r') as infile:\n        with open(file+'_fixed.dat', 'w') as outfile:\n            lines = infile.readlines()\n            for line in lines:\n                fixed = re.sub(\"\\s\\s+\" , \" \", line)\n                outfile.write(fixed)\n\n    os.rename(file+'.dat', file+'_original.dat')\n    os.rename(file+'_fixed.dat', file+'.dat')\n</code></pre>\n\n<p>I have 19 files in a folder that I need to process with this function, but I'm not sure how to parse the filenames and pass them to the function. Something like</p>\n\n<pre><code>for filename in folder:\n    fixDat(filename)\n</code></pre>\n\n<p>but how do I code <code>filename</code> and <code>folder</code> in Python?</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1558572057, "post_id": 56265887, "comment_id": 99149354, "body": "Should <code>company3</code> be in <code>dict3</code>?"}, {"owner": {"reputation": 419, "user_id": 10360845, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S5socgsgDdw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOUvNYK86DGflX2rZtBL3PL8z4WBw/mo/photo.jpg?sz=128", "display_name": "Vamsi Nimmala", "link": "https://stackoverflow.com/users/10360845/vamsi-nimmala"}, "reply_to_user": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1558574563, "post_id": 56265887, "comment_id": 99149782, "body": "Yes, company3 should be in the dict3, My bad. I will edit."}, {"owner": {"reputation": 419, "user_id": 10360845, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S5socgsgDdw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOUvNYK86DGflX2rZtBL3PL8z4WBw/mo/photo.jpg?sz=128", "display_name": "Vamsi Nimmala", "link": "https://stackoverflow.com/users/10360845/vamsi-nimmala"}, "reply_to_user": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "edited": false, "score": 0, "creation_date": 1558574900, "post_id": 56265887, "comment_id": 99149847, "body": "I added a company4 in the input  dict1, The &#39;age&#39; key don&#39;t match between compay4 of dict1 and dict2, it should not be in dict3. Thanks"}], "answers": [{"tags": [], "owner": {"reputation": 5701, "user_id": 35812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e663162cefd6ac833e0555933b8583f?s=128&d=identicon&r=PG", "display_name": "Chris Charley", "link": "https://stackoverflow.com/users/35812/chris-charley"}, "is_accepted": true, "score": 1, "last_activity_date": 1558581849, "last_edit_date": 1558581849, "creation_date": 1558576228, "answer_id": 56267098, "question_id": 56265887, "link": "https://stackoverflow.com/questions/56265887/check-the-values-in-complex-dict-of-dicts-with-another-dict-of-dicts-and-save-it/56267098#56267098", "title": "Check the values in complex dict of dicts with another dict of dicts and save it a third dictionary", "body": "<p>This solution might be better done using some other method more succinctly. However, it accomplishes the desired result.</p>\n\n<pre><code>from pprint import pprint\n\ndict3 = dict()\n\ndict1 = {'company1':[{'age':27,'weight':200,'name':'john'},{'age':23,'weight':180,'name':'peter'}],\n         'company2':[{'age':30,'weight':190,'name':'sam'},{'age':32,'weight':210,'name':'clove'},{'age':21,'weight':170,'name':'steve'}],\n         'company3':[{'age':36,'weight':175,'name':'shaun'},{'age':40,'weight':205,'name':'dany'},{'age':25,'weight':160,'name':'mark'}],\n         'company4':[{'age':36,'weight':155,'name':'lina'},{'age':40,'weight':215,'name':'sammy'},{'age':25,'weight':190,'name':'matt'}]\n        }\n\ndict2 = {'company2':[{'age':30},{'age':45},{'age':52}],\n         'company4':[{'age':43},{'age':67},{'age':22},{'age':34},{'age':42}]\n        }\n\nfor company, array in dict1.items():\n    if company not in dict2:\n        dict3[company] = array\n    else:\n        # all the ages for this company in dict1\n        ages = set(map(lambda x: x['age'], array))\n\n        for dictref in dict2[company]:\n            if dictref['age'] in ages:\n                dict3[company] = array\n                break\npprint(dict3)\n</code></pre>\n\n<p>Output was</p>\n\n<pre><code>{'company1': [{'age': 27, 'name': 'john', 'weight': 200},\n              {'age': 23, 'name': 'peter', 'weight': 180}],\n 'company2': [{'age': 30, 'name': 'sam', 'weight': 190},\n              {'age': 32, 'name': 'clove', 'weight': 210},\n              {'age': 21, 'name': 'steve', 'weight': 170}],\n 'company3': [{'age': 36, 'name': 'shaun', 'weight': 175},\n              {'age': 40, 'name': 'dany', 'weight': 205},\n              {'age': 25, 'name': 'mark', 'weight': 160}]}\n</code></pre>\n"}], "owner": {"reputation": 419, "user_id": 10360845, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S5socgsgDdw/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaOUvNYK86DGflX2rZtBL3PL8z4WBw/mo/photo.jpg?sz=128", "display_name": "Vamsi Nimmala", "link": "https://stackoverflow.com/users/10360845/vamsi-nimmala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "accepted_answer_id": 56267098, "answer_count": 1, "score": 0, "last_activity_date": 1558581849, "creation_date": 1558564942, "last_edit_date": 1558575875, "question_id": 56265887, "link": "https://stackoverflow.com/questions/56265887/check-the-values-in-complex-dict-of-dicts-with-another-dict-of-dicts-and-save-it", "title": "Check the values in complex dict of dicts with another dict of dicts and save it a third dictionary", "body": "<p>The input dictionary of dictionaries are dict1 and dict2.</p>\n\n<pre><code>dict1 = {company1:[{'age':27,'weight':200,'name':'john'},{'age':23,'weight':180,'name':'peter'}],\n         company2:[{'age':30,'weight':190,'name':'sam'},{'age':32,'weight':210,'name':'clove'},{'age':21,'weight':170,'name':'steve'}],\n         company3:[{'age':36,'weight':175,'name':'shaun'},{'age':40,'weight':205,'name':'dany'},{'age':25,'weight':160,'name':'mark'}]\n         company4:[{'age':36,'weight':155,'name':'lina'},{'age':40,'weight':215,'name':'sammy'},{'age':25,'weight':190,'name':'matt'}]\n        }\n\ndict2 = {company2:[{'age':30},{'age':45},{'age':52}],\n         company4:[{'age':43},{'age':67},{'age':22},{'age':34},{'age':42}]\n        }\n</code></pre>\n\n<p>I am trying to write a logic where I can check inner key ('age') of each compay key in dict2 exist in same company key dict1, even if one value of inner key 'age' matches with inner key ('age') in dict1 of same company key, then save it to a third dictionary. Please check the below example</p>\n\n<p><strong>Example</strong>:</p>\n\n<pre><code>company2:[{'age':30}]\n</code></pre>\n\n<p>matches with</p>\n\n<pre><code>company2:[{'age':30,'weight':190,'name':'sam'}, ...]\n</code></pre>\n\n<p>Also I want to save the key:values of dict1 which doesn't appered in dict2 to the dict3, As we can see in the below example company1 key does not apper in dict2.</p>\n\n<p><strong>Example</strong>:</p>\n\n<pre><code>company1:[{'age':27,'weight':200,'name':'john'},{'age':23,'weight':180,'name':'peter'}]\n</code></pre>\n\n<p>and</p>\n\n<pre><code>company3:[{'age':36,'weight':175,'name':'shaun'},{'age':40,'weight':205,'name':'dany'},{'age':25,'weight':160,'name':'mark'}]\n</code></pre>\n\n<p>Expected Output:</p>\n\n<pre><code>dict3 = {company1:[{'age':27,'weight':200,'name':'john'},{'age':23,'weight':180,'name':'peter'}],\n         company2:[{'age':30,'weight':190,'name':'sam'},{'age':32,'weight':210,'name':'clove'},{'age':21,'weight':170,'name':'steve'}]\n         company3:[{'age':36,'weight':175,'name':'shaun'},{'age':40,'weight':205,'name':'dany'},{'age':25,'weight':160,'name':'mark'}]}\n</code></pre>\n\n<p>pardon my explanation!</p>\n"}, {"tags": ["python", "pandas", "time-series"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10329832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af43990bfe96338654b53d44c7e13f8?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/10329832/lucas"}, "edited": false, "score": 0, "creation_date": 1558566114, "post_id": 56265932, "comment_id": 99148287, "body": "Thanks mark. I thought I couldn&#39;t have the int_how_many_consecutive_to_fill value to be based on row value(it should be the durations of the bookings). But I&#39;ll have a closer look."}, {"owner": {"reputation": 2029, "user_id": 6539531, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c6c0305da694dac3194f7d78c890b694?s=128&d=identicon&r=PG&f=1", "display_name": "sometimesiwritecode", "link": "https://stackoverflow.com/users/6539531/sometimesiwritecode"}, "reply_to_user": {"reputation": 63, "user_id": 10329832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af43990bfe96338654b53d44c7e13f8?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/10329832/lucas"}, "edited": false, "score": 0, "creation_date": 1558566572, "post_id": 56265932, "comment_id": 99148370, "body": "i will edit my answer to do this for a dynamic row value now."}, {"owner": {"reputation": 2029, "user_id": 6539531, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c6c0305da694dac3194f7d78c890b694?s=128&d=identicon&r=PG&f=1", "display_name": "sometimesiwritecode", "link": "https://stackoverflow.com/users/6539531/sometimesiwritecode"}, "reply_to_user": {"reputation": 63, "user_id": 10329832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af43990bfe96338654b53d44c7e13f8?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/10329832/lucas"}, "edited": false, "score": 0, "creation_date": 1558568913, "post_id": 56265932, "comment_id": 99148804, "body": "done, let me know if anything isnt clear or if i misunderstood"}, {"owner": {"reputation": 63, "user_id": 10329832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af43990bfe96338654b53d44c7e13f8?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/10329832/lucas"}, "edited": false, "score": 1, "creation_date": 1558603476, "post_id": 56265932, "comment_id": 99158871, "body": "Hi mark, thanks a lot for the elaborate answer.  You opened my eyes on my need to learn more about interpolation :)"}], "tags": [], "owner": {"reputation": 2029, "user_id": 6539531, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/c6c0305da694dac3194f7d78c890b694?s=128&d=identicon&r=PG&f=1", "display_name": "sometimesiwritecode", "link": "https://stackoverflow.com/users/6539531/sometimesiwritecode"}, "is_accepted": false, "score": 1, "last_activity_date": 1558568089, "last_edit_date": 1558568089, "creation_date": 1558565308, "answer_id": 56265932, "question_id": 56265884, "link": "https://stackoverflow.com/questions/56265884/how-to-create-a-timeseries-from-a-dataframe-of-event-durations/56265932#56265932", "title": "How to create a timeseries from a dataframe of event durations?", "body": "<p>I think to \"forward-fill the dataframe\" you should use pandas interpolate method. Documentation can be found here:</p>\n\n<p><a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.interpolate.html\" rel=\"nofollow noreferrer\">https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.interpolate.html</a></p>\n\n<p>you can do something like this:</p>\n\n<pre><code>int_how_many_consecutive_to_fill = 3\ndf2 = df2.interpolate(axis=0, limit=int_how_many_consecutive_to_fill, limit_direction='forward')\n</code></pre>\n\n<p>look at the specific documentation for interpolate, there is a lot of custom functionality you can add with flags to the method. </p>\n\n<p>EDIT:</p>\n\n<p>to do this using the row value in the duration column for each interpolation, this is a bit messy but I think it should work (there may be a less hacky, cleaner solution using some functionality in pandas or another library i am unaware of):</p>\n\n<pre><code>#get rows with nans in them:\nnans_df =  df2[df2.isnull()]\n#get rows without nans in them:\nnon_nans_df =  df2[~df2.isnull()]\n\n#list of dfs we will concat vertically at the end to get final dataframe.\ndfs = []\n\n#iterate through each row that contains NaNs.\nfor nan_index, nan_row in nans_df.iterrows():\n    previous_day = nan_index - pd.DateOffset(1)\n    #this checks if the previous day to this NaN row is a day where we have non nan values, if the previous day is a nan day just skip this loop. This is mostly here to handle the case where the first row is a NaN one.\n    if previous_day not in non_nans_df.index:\n        continue\n\n    date_offset = 0\n    #here we are checking how many sequential rows there are after this one with all nan values in it, this will be stored in the date_offset variable.\n    while (nan_index + pd.DateOffset(date_offset)) in nans_df.index:\n        date_offset += 1\n\n    #this gets us the last date in the sequence of continuous days with all nan values after this current one. \n    end_sequence_date = nan_index + pd.DateOffset(date_offset)\n\n    #this gives us a dataframe where the first row in it is the previous day to this one(nan_index), confirmed to be non NaN by the first if statement in this for loop. It then combines this non NaN row with all the sequential nan rows after it into the variable df_to_interpolate. \n    df_to_interpolate = non_nans_df.iloc[previous_day].append(nans_df.iloc[nan_index:end_sequence_date]) \n\n    # now we pull the duration value for the first row in our  df_to_interpolate dataframe. \n    limit_val = int(df_to_interpolate['duration'][0])\n\n    #here we interpolate the dataframe using the limit_val\n    df_to_interpolate = df_to_interpolate.interpolate(axis=0, limit=limit_val, limit_direction='forward')\n\n    #append df_to_interpolate to our list that gets combined at the end.\n    dfs.append(df_to_interpolate)\n\n #gives us our final dataframe, interpolated forward using a dynamic limit value based on the most recent duration value. \n final_df = pd.concat(dfs)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "is_accepted": true, "score": 1, "last_activity_date": 1558569755, "last_edit_date": 1558569755, "creation_date": 1558568228, "answer_id": 56266283, "question_id": 56265884, "link": "https://stackoverflow.com/questions/56265884/how-to-create-a-timeseries-from-a-dataframe-of-event-durations/56266283#56266283", "title": "How to create a timeseries from a dataframe of event durations?", "body": "<pre><code>filluntil = ts['check-out'].ffill()\nm = ts.index &lt; filluntil.values\n\n#reshaping the mask to be shame shape as ts\nm = np.repeat(m, ts.shape[1]).reshape(ts.shape)\n\nts = ts.ffill().where(m)\n</code></pre>\n\n<p>First we create a series where the dates are ffilled. Then we create a mask where the index is less than the filled values. Then we fill based on our mask.</p>\n\n<p>If you want to include the row with the check out date, change m from &lt; to &lt;=</p>\n"}], "owner": {"reputation": 63, "user_id": 10329832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2af43990bfe96338654b53d44c7e13f8?s=128&d=identicon&r=PG&f=1", "display_name": "Lucas", "link": "https://stackoverflow.com/users/10329832/lucas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 56266283, "answer_count": 2, "score": 2, "last_activity_date": 1558569755, "creation_date": 1558564909, "question_id": 56265884, "link": "https://stackoverflow.com/questions/56265884/how-to-create-a-timeseries-from-a-dataframe-of-event-durations", "title": "How to create a timeseries from a dataframe of event durations?", "body": "<p>I have a dataframe full of bookings for one room (rows: booking_id, check-in date and check-out date that I want to transform into a timeseries indexed by all year days (index: days of year, feature: booked or not).</p>\n\n<p>I have calculated the duration of the bookings, and reindexed the dataframe daily.\nNow I need to forward-fill the dataframe, but only a limited number of times: the duration of each booking.</p>\n\n<p>Tried iterating through each row with ffill but it applies to the entire dataframe, not to selected rows.\nAny idea how I can do that?</p>\n\n<p>Here is my code:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\n#create dataframe\ndata=[[1, '2019-01-01', '2019-01-02', 1],\n      [2, '2019-01-03', '2019-01-07', 4], \n      [3, '2019-01-10','2019-01-13', 3]]\ndf = pd.DataFrame(data, columns=['booking_id', 'check-in', 'check-out', 'duration'])\n\n#cast dates to datetime formats\ndf['check-in'] = pd.to_datetime(df['check-in'])\ndf['check-out'] = pd.to_datetime(df['check-out'])\n\n#create timeseries indexed on check-in date\ndf2 = df.set_index('check-in')\n\n#create new index and reindex timeseries\nidx = pd.date_range(min(df['check-in']), max(df['check-out']), freq='D')\nts = df2.reindex(idx)\n</code></pre>\n\n<p>I have this:</p>\n\n<pre><code>    booking_id  check-out   duration\n2019-01-01  1.0     2019-01-02  1.0\n2019-01-02  NaN     NaT     NaN\n2019-01-03  2.0     2019-01-07  4.0\n2019-01-04  NaN     NaT     NaN\n2019-01-05  NaN     NaT     NaN\n2019-01-06  NaN     NaT     NaN\n2019-01-07  NaN     NaT     NaN\n2019-01-08  NaN     NaT     NaN\n2019-01-09  NaN     NaT     NaN\n2019-01-10  3.0     2019-01-13  3.0\n2019-01-11  NaN     NaT     NaN\n2019-01-12  NaN     NaT     NaN\n2019-01-13  NaN     NaT     NaN\n</code></pre>\n\n<p>I expect to have:</p>\n\n<pre><code>    booking_id  check-out   duration\n2019-01-01  1.0     2019-01-02  1.0\n2019-01-02  1.0     2019-01-02      1.0\n2019-01-03  2.0     2019-01-07  4.0\n2019-01-04  2.0     2019-01-07  4.0\n2019-01-05  2.0     2019-01-07  4.0\n2019-01-06  2.0     2019-01-07  4.0\n2019-01-07  NaN     NaT     NaN\n2019-01-08  NaN     NaT     NaN\n2019-01-09  NaN     NaT     NaN\n2019-01-10  3.0     2019-01-13  3.0\n2019-01-11  3.0     2019-01-13  3.0\n2019-01-12  3.0     2019-01-13  3.0\n2019-01-13  NaN     NaT     NaN\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1558564910, "post_id": 56265823, "comment_id": 99148026, "body": "Where are all your filenames? Are they in a list? In a file? Also, do they all start with <code>C:&#47;Users&#47;Documents&#47;</code>?"}, {"owner": {"reputation": 13, "user_id": 10849722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdebd9459d6a8271d2005d52ca21cb7?s=128&d=identicon&r=PG", "display_name": "fskilnik", "link": "https://stackoverflow.com/users/10849722/fskilnik"}, "reply_to_user": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1558565131, "post_id": 56265823, "comment_id": 99148066, "body": "All filenames are exactly in the format shown in my example. Please take into account that the stock names are already being extracted successfully. The problem is with the number after the expression file_name, only.  Thanks! (Now I understand your comment. I will correct the example... sorry.)"}, {"owner": {"reputation": 1669, "user_id": 9042078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6avg1.jpg?s=128&g=1", "display_name": "Vasu Deo.S", "link": "https://stackoverflow.com/users/9042078/vasu-deo-s"}, "edited": false, "score": 0, "creation_date": 1558565211, "post_id": 56265823, "comment_id": 99148083, "body": "so you just want to output the filename without the forward slashes?"}, {"owner": {"reputation": 13, "user_id": 10849722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdebd9459d6a8271d2005d52ca21cb7?s=128&d=identicon&r=PG", "display_name": "fskilnik", "link": "https://stackoverflow.com/users/10849722/fskilnik"}, "edited": false, "score": 0, "creation_date": 1558565252, "post_id": 56265823, "comment_id": 99148092, "body": "I could not edit my post. The real strings are like that: file_name1 = &#39;C:/Users/SomeName/Documents/AnotherName/PETR4_daily_22May19&zwnj;&#8203;.csv&#39;"}, {"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1558565309, "post_id": 56265823, "comment_id": 99148109, "body": "Sorry if I wasn&#39;t clear, that&#39;s not exactly what I&#39;m asking \u2014 you have all these paths \u2014 a collection a strings. How are they stored in your program? Do you have a list? -- <code>someList = [&#39;C:&#47;Users&#47;Documents&#47;PETR4_daily_22May19.csv&#39;, &#39;C:&#47;Users&#47;Documents&#47;VALE3_daily_22May19.csv&#39;]</code>? A bunch of individual variables? Are you reading these from a file or from a directory listing?"}, {"owner": {"reputation": 13, "user_id": 10849722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdebd9459d6a8271d2005d52ca21cb7?s=128&d=identicon&r=PG", "display_name": "fskilnik", "link": "https://stackoverflow.com/users/10849722/fskilnik"}, "edited": false, "score": 0, "creation_date": 1558565441, "post_id": 56265823, "comment_id": 99148133, "body": "Hi, Mark. Thanks for the help. It is just a sequence of lines in Jupyter notebook. There are approximately 20 file_names, that&#180;s it!"}, {"owner": {"reputation": 1601, "user_id": 5900093, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac3f1e0e212aabaefe01f2eaeb4b408f?s=128&d=identicon&r=PG&f=1", "display_name": "Bird", "link": "https://stackoverflow.com/users/5900093/bird"}, "edited": false, "score": 0, "creation_date": 1558566714, "post_id": 56265823, "comment_id": 99148406, "body": "This seems very different from your original question. What is your expected output now? Not the word preceding the underscore (e.g. &#39;PETR4&#39;)?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 10849722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdebd9459d6a8271d2005d52ca21cb7?s=128&d=identicon&r=PG", "display_name": "fskilnik", "link": "https://stackoverflow.com/users/10849722/fskilnik"}, "edited": false, "score": 0, "creation_date": 1558565912, "post_id": 56265968, "comment_id": 99148244, "body": "Hi, Vasu. I got your idea, but I need something much more elementary... I will edit my question so that only the essential needed is presented. Sorry for the misunderstanding!"}, {"owner": {"reputation": 1669, "user_id": 9042078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6avg1.jpg?s=128&g=1", "display_name": "Vasu Deo.S", "link": "https://stackoverflow.com/users/9042078/vasu-deo-s"}, "reply_to_user": {"reputation": 13, "user_id": 10849722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdebd9459d6a8271d2005d52ca21cb7?s=128&d=identicon&r=PG", "display_name": "fskilnik", "link": "https://stackoverflow.com/users/10849722/fskilnik"}, "edited": false, "score": 0, "creation_date": 1558566055, "post_id": 56265968, "comment_id": 99148272, "body": "I just edited my answer, see if it works now?"}, {"owner": {"reputation": 13, "user_id": 10849722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdebd9459d6a8271d2005d52ca21cb7?s=128&d=identicon&r=PG", "display_name": "fskilnik", "link": "https://stackoverflow.com/users/10849722/fskilnik"}, "edited": false, "score": 0, "creation_date": 1558566525, "post_id": 56265968, "comment_id": 99148360, "body": "Hi @Bird. Thanks for the help, but the problem was not extracting the names of the stocks, as mentioned... it was just a problem of dealing with a string with &quot;file_name&quot; always present, then a variable number (1, 2, ...) and then another part &quot;.split(&#39;/&#39;)&quot; also present in all strings..."}, {"owner": {"reputation": 13, "user_id": 10849722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdebd9459d6a8271d2005d52ca21cb7?s=128&d=identicon&r=PG", "display_name": "fskilnik", "link": "https://stackoverflow.com/users/10849722/fskilnik"}, "edited": false, "score": 0, "creation_date": 1558566708, "post_id": 56265968, "comment_id": 99148404, "body": "Hi, Vasu. Perfect, thanks a lot!   I will keep the question as it is now, because Prune sent a link to another very similar situation. I didn&#180;t find that post before, by the way."}], "tags": [], "owner": {"reputation": 1669, "user_id": 9042078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6avg1.jpg?s=128&g=1", "display_name": "Vasu Deo.S", "link": "https://stackoverflow.com/users/9042078/vasu-deo-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1558566309, "last_edit_date": 1558566309, "creation_date": 1558565604, "answer_id": 56265968, "question_id": 56265823, "link": "https://stackoverflow.com/questions/56265823/string-formation-using-loop-and-split-function/56265968#56265968", "title": "String formation using loop and split function", "body": "<p><strong>If you want the filenames</strong>:-</p>\n\n<pre><code>list_containing_filenames = ['C:/Users/Documents/VALE3_daily_22May19.csv', 'C:/Users/Something/Documents/AnotherSomething/PETR4_daily_22May19.csv']\n\nfor x in list_containing_filenames:\n    print(*\"{}\".format(x).split('/')[-1:])\n</code></pre>\n\n<p><strong>OUTPUT:-</strong></p>\n\n<pre><code>VALE3_daily_22May19.csv\nPETR4_daily_22May19.csv\n</code></pre>\n\n<p>Add your file_path's inside the list, and get their filenames.</p>\n\n<p><strong>If you want names of the stocks</strong>:-</p>\n\n<pre><code>list_containing_filenames = ['C:/Users/Documents/VALE3_daily_22May19.csv', 'C:/Users/Something/Documents/AnotherSomething/PETR4_daily_22May19.csv']\n\nfor x in list_containing_filenames:\n    print(\"\".join(\"{}\".format(x).split('/')[-1:]).split(\"_\")[0])\n</code></pre>\n\n<p><strong>OUTPUT:-</strong></p>\n\n<pre><code>VALE3\nPETR4\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1558565766, "post_id": 56265993, "comment_id": 99148221, "body": "Yeah, that&#39;s better than a regex."}, {"owner": {"reputation": 13, "user_id": 10849722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdebd9459d6a8271d2005d52ca21cb7?s=128&d=identicon&r=PG", "display_name": "fskilnik", "link": "https://stackoverflow.com/users/10849722/fskilnik"}, "edited": false, "score": 0, "creation_date": 1558566996, "post_id": 56265993, "comment_id": 99148474, "body": "Thanks, Bird. It also worked! (I could not vote for the solutions because I still don&#180;t have points for them...)  Sorry.  (Now I see I cannot put the right mark for both solutions, either. That&#180;s a pitty.)"}], "tags": [], "owner": {"reputation": 1601, "user_id": 5900093, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ac3f1e0e212aabaefe01f2eaeb4b408f?s=128&d=identicon&r=PG&f=1", "display_name": "Bird", "link": "https://stackoverflow.com/users/5900093/bird"}, "is_accepted": false, "score": 1, "last_activity_date": 1558565863, "last_edit_date": 1558565863, "creation_date": 1558565724, "answer_id": 56265993, "question_id": 56265823, "link": "https://stackoverflow.com/questions/56265823/string-formation-using-loop-and-split-function/56265993#56265993", "title": "String formation using loop and split function", "body": "<p>This should work to extract the text in the filename preceding the underscore:</p>\n\n<pre><code>import os\nfiles = ['C:/Users/Documents/PETR4_daily_22May19.csv', 'C:/Users/Documents/VALE3_daily_22May19.csv']\nfor file in files:\n    x = os.path.basename(file).split('_')[0]\n    print(x)\n</code></pre>\n\n<p>Explanation: <code>os.path.basename</code> gets just the filename (without the file path), then <code>.split('_')</code> splits that filename on underscores, and the <code>[0]</code> returns the 0th (first) element of the list returned by split.</p>\n"}], "owner": {"reputation": 13, "user_id": 10849722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdebd9459d6a8271d2005d52ca21cb7?s=128&d=identicon&r=PG", "display_name": "fskilnik", "link": "https://stackoverflow.com/users/10849722/fskilnik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "closed_date": 1558565786, "accepted_answer_id": 56265968, "answer_count": 2, "score": -1, "last_activity_date": 1558566309, "creation_date": 1558564331, "last_edit_date": 1558566277, "question_id": 56265823, "link": "https://stackoverflow.com/questions/56265823/string-formation-using-loop-and-split-function", "closed_reason": "Duplicate", "title": "String formation using loop and split function", "body": "<p>I have (let\u00b4s suppose only) two file_names:</p>\n\n<pre><code>file_name1 = 'stock1'\nfile_name2 = 'stock2'\n</code></pre>\n\n<p>The code below does what we expect:</p>\n\n<pre><code>for i in range(1,3,1):\n    string_name = 'file_name{}'.format(i)\n    print(string_name) \n</code></pre>\n\n<p>Question: how should I change the string_name line above if my initial file_names are not:</p>\n\n<pre><code>file_name1 = 'stock1'\nfile_name2 = 'stock2'\n</code></pre>\n\n<p>but they are:</p>\n\n<pre><code>file_name1 = 'stock1.split('/')'\nfile_name2 = 'stock2.split('/)'\n</code></pre>\n\n<p>where the split is there for other purposes that do not present any trouble?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "tensorflow", "bazel"], "comments": [{"owner": {"reputation": 6651, "user_id": 996815, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2058dcdbff2ea9ea04aa1b42217a1fce?s=128&d=identicon&r=PG&f=1", "display_name": "Vertexwahn", "link": "https://stackoverflow.com/users/996815/vertexwahn"}, "edited": false, "score": 0, "creation_date": 1558599350, "post_id": 56265810, "comment_id": 99156524, "body": "Did you set the <code>BAZEL_SH</code> to the path of the MSYS2 Bash (e.g. <code>c:\\msys64\\usr\\bin\\bash.exe</code>)? Did you follow these installation instructions: <a href=\"https://docs.bazel.build/versions/0.25.0/install-windows.html\" rel=\"nofollow noreferrer\">docs.bazel.build/versions/0.25.0/install-windows.html</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11138547"}, "reply_to_user": {"reputation": 6651, "user_id": 996815, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2058dcdbff2ea9ea04aa1b42217a1fce?s=128&d=identicon&r=PG&f=1", "display_name": "Vertexwahn", "link": "https://stackoverflow.com/users/996815/vertexwahn"}, "edited": false, "score": 0, "creation_date": 1558632448, "post_id": 56265810, "comment_id": 99174495, "body": "Yeah I actually just figured it out."}, {"owner": {"reputation": 6651, "user_id": 996815, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2058dcdbff2ea9ea04aa1b42217a1fce?s=128&d=identicon&r=PG&f=1", "display_name": "Vertexwahn", "link": "https://stackoverflow.com/users/996815/vertexwahn"}, "edited": false, "score": 0, "creation_date": 1558695107, "post_id": 56265810, "comment_id": 99194616, "body": "Did this solve your issue?"}], "owner": {"user_type": "does_not_exist", "display_name": "user11138547"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1179, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1558564229, "creation_date": 1558564229, "question_id": 56265810, "link": "https://stackoverflow.com/questions/56265810/issue-with-installing-bazel-for-tensorflow", "title": "Issue with installing Bazel for TensorFlow", "body": "<p>I am trying to build TensorFlow from source but run into an issue. Once I have everything installed and need to configure TensorFlow, I run the command \"python ./configure.py\" in VS2015 x64 Native Tools Command Prompt but it says that it cannot find Bazel and that I need to install it. The problem is that I did download it, changed the binary to bazel.exe and changed the %PATH% for it to C:\\bazel which is where I put it. I also added the other requirements for %PATH% in my environment variables. Why is it giving me this error?</p>\n"}, {"tags": ["python", "regex"], "comments": [{"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 0, "creation_date": 1558564144, "post_id": 56265786, "comment_id": 99147836, "body": "If you run <code>re.findall()</code> don&#39;t you get both?"}, {"owner": {"reputation": 3, "user_id": 11541889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDrKmhqdekRPTCRKLt7CULwVxQ_1_42lAJ1_L2uZA=k-s128", "display_name": "Diego C&#225;ceres Herrera", "link": "https://stackoverflow.com/users/11541889/diego-c%c3%a1ceres-herrera"}, "reply_to_user": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 0, "creation_date": 1558565372, "post_id": 56265786, "comment_id": 99148121, "body": "I get both but if one of them is not on the text (&#39;archivo&#39; or &#39;Transaction Report&#39;) it will still match because the &#39;or&#39; logic. Remember the table : True or False = True , True or True = True, False or True = True. What I need is True and True"}, {"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 0, "creation_date": 1558565936, "post_id": 56265786, "comment_id": 99148251, "body": "Does this work? <code>[\\d]+-[\\d]+-[\\d]+ [\\d]+:[\\d]+:[\\d]+ INFO ReporteClaro:[\\d]+ - Termino de procesar (archivo|Transaction Report)+</code> ?  (Added a plus at the end)"}], "answers": [{"tags": [], "owner": {"reputation": 3272, "user_id": 3990806, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ad3e7b2553397335b7aab5fcebbd343b?s=128&d=identicon&r=PG&f=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/3990806/adam"}, "is_accepted": true, "score": 1, "last_activity_date": 1558567064, "last_edit_date": 1558567064, "creation_date": 1558565167, "answer_id": 56265911, "question_id": 56265786, "link": "https://stackoverflow.com/questions/56265786/regex-strictly-match-two-lines-with-different-endings/56265911#56265911", "title": "Regex strictly match two lines with different endings", "body": "<p>If \"archivo\" and \"Transaction Report\" are the only values that you expect after \"Termino de procesar\" i.e. there is nothing like \"Termino de procesar Something Else\". You could simply do the following.</p>\n\n<p><code>r\"^.+Termino de procesar.+$\"gm</code></p>\n\n<p><a href=\"https://regex101.com/r/IHlgax/2\" rel=\"nofollow noreferrer\">demo</a></p>\n\n<p>Effectively this will get everything from the beginning of the line till the end only if they have the phrase \"Termino de procesar\" in it.</p>\n\n<p>In the case that there is other log entries that have \"Termino de procesar\" in them and something you don't want you can use the following.</p>\n\n<p><code>r\"^.+Termino de procesar archivo.*$|^.+Termino de procesar Transaction Report.*$\"gm</code></p>\n\n<p><a href=\"https://regex101.com/r/OY3jqL/2\" rel=\"nofollow noreferrer\">demo2</a></p>\n\n<p>I find simplicity to usually be the best solution. No need to explicitly select the datetime stuff or \"ReporteClaro\" simply use the catch all before to grab it. Easier to understand the regex imo.</p>\n\n<p>Edit:\nYou need the <code>gm</code> modifiers unless you're reading it line by line.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 1, "last_activity_date": 1558566181, "creation_date": 1558566181, "answer_id": 56266053, "question_id": 56265786, "link": "https://stackoverflow.com/questions/56265786/regex-strictly-match-two-lines-with-different-endings/56266053#56266053", "title": "Regex strictly match two lines with different endings", "body": "<p>This will get them as a group, and everything in-between.  </p>\n\n<pre><code>(?s)[\\d]+-[\\d]+-[\\d]+[ ][\\d]+:[\\d]+:[\\d]+[ ]INFO[ ]ReporteClaro:[\\d]+[ ]-[ ]Termino[ ]de[ ]procesar[ ](?:archivo|Transaction[ ]Report)(?:.*?[\\d]+-[\\d]+-[\\d]+[ ][\\d]+:[\\d]+:[\\d]+[ ]INFO[ ]ReporteClaro:[\\d]+[ ]-[ ]Termino[ ]de[ ]procesar[ ](?:archivo|Transaction[ ]Report))*  \n</code></pre>\n\n<p>Readable version  </p>\n\n<pre><code> (?s)\n\n [\\d]+ - [\\d]+ - [\\d]+ [ ] [\\d]+ : [\\d]+ : [\\d]+ [ ] INFO [ ] ReporteClaro: \n [\\d]+ [ ] - [ ] Termino [ ] de [ ] procesar [ ] \n (?: archivo | Transaction [ ] Report )\n\n (?:\n      .*? [\\d]+ - [\\d]+ - [\\d]+ [ ] [\\d]+ : [\\d]+ : [\\d]+ [ ] INFO [ ] ReporteClaro: \n      [\\d]+ [ ] - [ ] Termino [ ] de [ ] procesar [ ] \n      (?: archivo | Transaction [ ] Report )\n )*\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11541889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDrKmhqdekRPTCRKLt7CULwVxQ_1_42lAJ1_L2uZA=k-s128", "display_name": "Diego C&#225;ceres Herrera", "link": "https://stackoverflow.com/users/11541889/diego-c%c3%a1ceres-herrera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 56265911, "answer_count": 2, "score": 0, "last_activity_date": 1558568207, "creation_date": 1558564015, "last_edit_date": 1558568207, "question_id": 56265786, "link": "https://stackoverflow.com/questions/56265786/regex-strictly-match-two-lines-with-different-endings", "title": "Regex strictly match two lines with different endings", "body": "<p>I'm trying to match the following text of a logfile:</p>\n\n<pre><code>2019-05-22 03:40:01 INFO  ReporteClaro:194 - Termino de procesar archivo\n\n2019-05-22 03:40:01 INFO  ReporteClaro:208 - Termino de procesar Transaction Report\n</code></pre>\n\n<p>It contains the same words except for those at the end (<code>archivo</code>) and (<code>Payment Report</code>).</p>\n\n<p>I've tried this:</p>\n\n<pre><code>[\\d]+-[\\d]+-[\\d]+ [\\d]+:[\\d]+:[\\d]+ INFO  ReporteClaro:[\\d]+ - Termino de procesar (archivo|Transaction Report)\n</code></pre>\n\n<p>But that is an optional match due to the <code>|</code> operator. It means it will match the first or the second line but I strictly need regex to match both of them. I thought something like this but obviously will not run:</p>\n\n<pre><code>[\\d]+-[\\d]+-[\\d]+ [\\d]+:[\\d]+:[\\d]+ INFO  ReporteClaro:[\\d]+ - Termino de procesar (archivo&amp;Transaction Report)\n</code></pre>\n\n<p>PD: I've tried another solution using \\n but is there any way to achieve this same result without repeating?:</p>\n\n<pre><code>[\\d]+-[\\d]+-[\\d]+ [\\d]+:[\\d]+:[\\d]+ INFO  ReporteClaro:[\\d]+ - Termino de procesar archivo\\n\n\n[\\d]+-[\\d]+-[\\d]+ [\\d]+:[\\d]+:[\\d]+ INFO  ReporteClaro:[\\d]+ - Termino de procesar Transaction Report\n</code></pre>\n"}, {"tags": ["python", "csv"], "comments": [{"owner": {"reputation": 5007, "user_id": 10924296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483c21a8a3f03bbf92cb99539ec97dbc?s=128&d=identicon&r=PG&f=1", "display_name": "Reedinationer", "link": "https://stackoverflow.com/users/10924296/reedinationer"}, "edited": false, "score": 0, "creation_date": 1558565267, "post_id": 56265778, "comment_id": 99148096, "body": "It would be best to include the first few lines of your csv file too, as well as an expected output so those wanting to answer can test their code before posting it."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 11428102, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e9d81f71591bd60673618f1d2bf9bad?s=128&d=identicon&r=PG&f=1", "display_name": "Conor Retra", "link": "https://stackoverflow.com/users/11428102/conor-retra"}, "is_accepted": false, "score": 0, "last_activity_date": 1558566734, "creation_date": 1558566734, "answer_id": 56266110, "question_id": 56265778, "link": "https://stackoverflow.com/questions/56265778/reading-and-using-cell-values-from-csv-file-with-python/56266110#56266110", "title": "Reading and using cell values from CSV file with Python", "body": "<p>It's tough to understand the problem without the .csv file sample or a better understanding of the output you would like, but DictReader should use the first row to label the columns automatically per the documentation: <a href=\"https://docs.python.org/3/library/csv.html#csv.DictReader\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/csv.html#csv.DictReader</a>.</p>\n\n<p>So, if all you want is the text column to be appended, you should be able to change your </p>\n\n<pre><code>dict_list.append(l)\n</code></pre>\n\n<p>line to </p>\n\n<pre><code>dict_list.append(l['text'])\n</code></pre>\n\n<p>and achieve the results you are looking for. </p>\n"}], "owner": {"reputation": 11, "user_id": 11401129, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TuhHWHRYlFE/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcdirtJ9DALtaMRNNyvyZ20gAdBZw/mo/photo.jpg?sz=128", "display_name": "xxx", "link": "https://stackoverflow.com/users/11401129/xxx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558566734, "creation_date": 1558563960, "last_edit_date": 1558565161, "question_id": 56265778, "link": "https://stackoverflow.com/questions/56265778/reading-and-using-cell-values-from-csv-file-with-python", "title": "Reading and using cell values from CSV file with Python", "body": "<p>I have a CSV with column header in the first row, and ID on the first left column. I want to make a Python script that will take the text inside the table cell and put in a variable. I was think using loop to with increment of 1 to iterate with the id, the problem is the id is not in order i.e. 7,17,20,25,34 very random. *Note I can not change this as it is the identifier for another file. But I think I still need to use a loop as it is a large CSV file.</p>\n\n<p>The column header I have is id, name, and text. I want a way to go through the text column of every rows on the file. Is there a way I can approach this?\nPS. the variable I am putting the text in, will have other text appended it it later </p>\n\n<p>I tried using the DictReader to import the CSV into Python. But I am not sure what to do next or if there is an alternative method</p>\n\n<pre><code>import csv\nimport os\nimport pprint\n\nreader = csv.DictReader(open('test.csv','rb'))\n\ndict_list = []\nfor l in reader:\n    dict_list.append(l)\n\npprint.pprint(dict_list)\n</code></pre>\n"}, {"tags": ["python", "matlab", "pyinstaller"], "comments": [{"owner": {"reputation": 4897, "user_id": 6700019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ba979f781d106a9db9b35fc6ff518b2?s=128&d=identicon&r=PG", "display_name": "Masoud Rahimi", "link": "https://stackoverflow.com/users/6700019/masoud-rahimi"}, "edited": false, "score": 0, "creation_date": 1558712275, "post_id": 56265710, "comment_id": 99203916, "body": "Have you tried <code>--hidden-import=matlab.engine</code> when building your app?"}, {"owner": {"reputation": 1, "user_id": 11478227, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Rx0_Cvaqvmo/AAAAAAAAAAI/AAAAAAAAA6Q/DJn7vLOOjUE/photo.jpg?sz=128", "display_name": "Ross Taylor", "link": "https://stackoverflow.com/users/11478227/ross-taylor"}, "reply_to_user": {"reputation": 4897, "user_id": 6700019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ba979f781d106a9db9b35fc6ff518b2?s=128&d=identicon&r=PG", "display_name": "Masoud Rahimi", "link": "https://stackoverflow.com/users/6700019/masoud-rahimi"}, "edited": false, "score": 0, "creation_date": 1558728226, "post_id": 56265710, "comment_id": 99210114, "body": "I did give this a shot. It doesn&#39;t seem to do much in the way of finding the engine. What i find peculiar is it keeps looking at the temp folder for a specific file that is not there. Even if i create that folder and put the appropriate file there is has a different name it is looking for when i re-run pyinstaller."}, {"owner": {"reputation": 4897, "user_id": 6700019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ba979f781d106a9db9b35fc6ff518b2?s=128&d=identicon&r=PG", "display_name": "Masoud Rahimi", "link": "https://stackoverflow.com/users/6700019/masoud-rahimi"}, "edited": false, "score": 0, "creation_date": 1558761825, "post_id": 56265710, "comment_id": 99215460, "body": "Add the missing files by <a href=\"https://pyinstaller.readthedocs.io/en/v3.3.1/spec-files.html#adding-data-files\" rel=\"nofollow noreferrer\"><code>--add-data</code></a>."}], "owner": {"reputation": 1, "user_id": 11478227, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Rx0_Cvaqvmo/AAAAAAAAAAI/AAAAAAAAA6Q/DJn7vLOOjUE/photo.jpg?sz=128", "display_name": "Ross Taylor", "link": "https://stackoverflow.com/users/11478227/ross-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 218, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1558563468, "creation_date": 1558563468, "question_id": 56265710, "link": "https://stackoverflow.com/questions/56265710/how-to-fix-pyinstaller-unable-to-find-matlab-files-when-creating-exe-file-from-s", "title": "How to fix pyinstaller unable to find matlab files when creating exe file from script", "body": "<p>I am attempting to make an EXE from my python script so i can use a GUI on a machine that does not have python installed. Currently my file works well calling a matlab script and sending a JSON object. My issue is when I attempt to make an EXE file from the python script. I get a series of errors that make me believe that pyinstaller is having trouble finding the correct files to interface with matlab. </p>\n\n<p>I have tried adding the path to the matlab engine folder and other matlab folders to the pathex variable in the .spec file, but to no avail. </p>\n\n<p>my warn file:</p>\n\n<pre><code>missing module named resource - imported by posix (top-level), C:\\Users\\taylorr\\PythonScripts\\EAST_GUI.py (top-level)\nmissing module named posix - imported by os (conditional, optional), C:\\Users\\taylorr\\PythonScripts\\EAST_GUI.py (top-level)\nmissing module named _posixsubprocess - imported by subprocess (conditional), C:\\Users\\taylorr\\PythonScripts\\EAST_GUI.py (top-level)\nmissing module named org - imported by pickle (optional), C:\\Users\\taylorr\\PythonScripts\\EAST_GUI.py (top-level)\nmissing module named readline - imported by cmd (delayed, conditional, optional), code (delayed, conditional, optional), pdb (delayed, optional), C:\\Users\\taylorr\\PythonScripts\\EAST_GUI.py (top-level)\nexcluded module named _frozen_importlib - imported by importlib (optional), importlib.abc (optional), C:\\Users\\taylorr\\PythonScripts\\EAST_GUI.py (top-level)\nmissing module named _frozen_importlib_external - imported by importlib._bootstrap (delayed), importlib (optional), importlib.abc (optional), C:\\Users\\taylorr\\PythonScripts\\EAST_GUI.py (top-level)\nmissing module named _winreg - imported by platform (delayed, optional), C:\\Users\\taylorr\\PythonScripts\\EAST_GUI.py (top-level)\nmissing module named _scproxy - imported by urllib.request (conditional)\nmissing module named java - imported by platform (delayed), C:\\Users\\taylorr\\PythonScripts\\EAST_GUI.py (top-level)\nmissing module named 'java.lang' - imported by platform (delayed, optional), C:\\Users\\taylorr\\PythonScripts\\EAST_GUI.py (top-level), xml.sax._exceptions (conditional)\nmissing module named vms_lib - imported by platform (delayed, conditional, optional), C:\\Users\\taylorr\\PythonScripts\\EAST_GUI.py (top-level)\nmissing module named termios - imported by tty (top-level), C:\\Users\\taylorr\\PythonScripts\\EAST_GUI.py (top-level), getpass (optional)\nmissing module named grp - imported by shutil (optional), tarfile (optional), C:\\Users\\taylorr\\PythonScripts\\EAST_GUI.py (top-level)\nmissing module named 'org.python' - imported by copy (optional), C:\\Users\\taylorr\\PythonScripts\\EAST_GUI.py (top-level), xml.sax (delayed, conditional)\nmissing module named pwd - imported by posixpath (delayed, conditional), shutil (optional), tarfile (optional), http.server (delayed, optional), webbrowser (delayed), C:\\Users\\taylorr\\PythonScripts\\EAST_GUI.py (top-level), netrc (delayed, conditional), getpass (delayed)\nmissing module named _dummy_threading - imported by dummy_threading (optional), C:\\Users\\taylorr\\PythonScripts\\EAST_GUI.py (top-level)\nmissing module named StringIO - imported by matlab.engine.matlabengine (optional)\nmissing module named matlab.engine.MatlabExecutionError - imported by matlab.engine (top-level), matlab.engine.matlabengine (top-level)\nmissing module named matlab.engine.CancelledError - imported by matlab.engine (top-level), matlab.engine.matlabfuture (top-level)\nmissing module named matlab.engine.TimeoutError - imported by matlab.engine (top-level), matlab.engine.matlabfuture (top-level), matlab.engine.fevalfuture (top-level)\n</code></pre>\n\n<p>my output from debug in the command prompt:</p>\n\n<pre><code>import 'mlexceptions' # &lt;_frozen_importlib_external.SourcelessFileLoader object\nat 0x0000000002C5BF60&gt;\nimport 'matlab' # &lt;_frozen_importlib_external.SourcelessFileLoader object at 0x0\n000000002C09908&gt;\n# matlab.engine not found in PYZ\n# code object from 'C:\\\\Users\\\\taylorr\\\\AppData\\\\Local\\\\Temp\\\\_MEI97562\\\\matlab\\\n\\engine\\\\__init__.pyc'\nimport 'atexit' # &lt;class '_frozen_importlib.BuiltinImporter'&gt;\n# threading not found in PYZ\n# code object from 'C:\\\\Users\\\\taylorr\\\\AppData\\\\Local\\\\Temp\\\\_MEI97562\\\\threadi\nng.pyc'\nimport 'time' # &lt;class '_frozen_importlib.BuiltinImporter'&gt;\n# traceback not found in PYZ\n# linecache not found in PYZ\n# tokenize not found in PYZ\n# code object from 'C:\\\\Users\\\\taylorr\\\\AppData\\\\Local\\\\Temp\\\\_MEI97562\\\\tokeniz\ne.pyc'\n# token not found in PYZ\n# code object from 'C:\\\\Users\\\\taylorr\\\\AppData\\\\Local\\\\Temp\\\\_MEI97562\\\\token.p\nyc'\nimport 'token' # &lt;_frozen_importlib_external.SourcelessFileLoader object at 0x00\n00000002C8E208&gt;\nimport 'tokenize' # &lt;_frozen_importlib_external.SourcelessFileLoader object at 0\nx0000000002C80AC8&gt;\nimport linecache # loaded from Zip C:\\Users\\taylorr\\AppData\\Local\\Temp\\_MEI97562\n\\base_library.zip\\linecache.pyc\nimport traceback # loaded from Zip C:\\Users\\taylorr\\AppData\\Local\\Temp\\_MEI97562\n\\base_library.zip\\traceback.pyc\nimport 'threading' # &lt;_frozen_importlib_external.SourcelessFileLoader object at\n0x0000000002C63908&gt;\n# matlabengineforpython3_6 not found in PYZ\nTraceback (most recent call last):\n  File \"c:\\python\\lib\\site-packages\\matlab\\engine\\__init__.py\", line 43, in &lt;mod\nule&gt;\n    pythonengine = importlib.import_module(\"matlabengineforpython\"+_PYTHONVERSIO\nN)\n  File \"c:\\python\\lib\\importlib\\__init__.py\", line 126, in import_module\n    return _bootstrap._gcd_import(name[level:], package, level)\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 994, in _gcd_import\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 971, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 953, in _find_and_load_unlocked\nModuleNotFoundError: No module named 'matlabengineforpython3_6'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"c:\\python\\lib\\site-packages\\matlab\\engine\\__init__.py\", line 46, in &lt;mod\nule&gt;\n    _arch_file = open(_arch_filename,'r')\nFileNotFoundError: [Errno 2] No such file or directory: 'C:\\\\Users\\\\taylorr\\\\App\nData\\\\Local\\\\Temp\\\\_MEI97562\\\\matlab\\\\engine\\\\_arch.txt'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"EAST_GUI.py\", line 10, in &lt;module&gt;\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 971, in _find_and_load\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 955, in _find_and_load_unlocked\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 665, in _load_unlocked\n  File \"&lt;frozen importlib._bootstrap_external&gt;\", line 678, in exec_module\n  File \"&lt;frozen importlib._bootstrap&gt;\", line 219, in _call_with_frames_removed\n  File \"c:\\python\\lib\\site-packages\\matlab\\engine\\__init__.py\", line 62, in &lt;mod\nule&gt;\n    'MathWorks Technical Support for assistance: %s' % e)\nOSError: Please reinstall MATLAB Engine for Python or contact MathWorks Technica\nl Support for assistance: [Errno 2] No such file or directory: 'C:\\\\Users\\\\taylo\nrr\\\\AppData\\\\Local\\\\Temp\\\\_MEI97562\\\\matlab\\\\engine\\\\_arch.txt'\n[5724] Failed to execute script EAST_GUI\n[5724] LOADER: OK.\n[5724] LOADER: Cleaning up Python interpreter.\n</code></pre>\n\n<p>I expected this would show me what the issue is, but i can only see it telling me that i need to re-install the python api for matlab, which doesn't seem to do anything.</p>\n"}, {"tags": ["python"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10619915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d95a5bc700d3a18d3f72a6cb1d3df4f7?s=128&d=identicon&r=PG&f=1", "display_name": "Wayne Kenney", "link": "https://stackoverflow.com/users/10619915/wayne-kenney"}, "edited": false, "score": 0, "creation_date": 1558579445, "post_id": 56267072, "comment_id": 99150605, "body": "Wow! Thank you! I&#39;d vote your answer up, but I don&#39;t have enough reputation points yet.. =/"}, {"owner": {"reputation": 3, "user_id": 10619915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d95a5bc700d3a18d3f72a6cb1d3df4f7?s=128&d=identicon&r=PG&f=1", "display_name": "Wayne Kenney", "link": "https://stackoverflow.com/users/10619915/wayne-kenney"}, "edited": false, "score": 0, "creation_date": 1558621838, "post_id": 56267072, "comment_id": 99169303, "body": "Thanks again for figuring out what I was trying to do! Thanks B!"}], "tags": [], "owner": {"reputation": 734, "user_id": 11064535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u7DNH.jpg?s=128&g=1", "display_name": "B. Shefter", "link": "https://stackoverflow.com/users/11064535/b-shefter"}, "is_accepted": true, "score": 1, "last_activity_date": 1558576029, "creation_date": 1558576029, "answer_id": 56267072, "question_id": 56265693, "link": "https://stackoverflow.com/questions/56265693/find-between-function-with-indexed-output/56267072#56267072", "title": "Find_between function with indexed output?", "body": "<p>A few things in your code appear to need addressing:</p>\n\n<ol>\n<li>The value of <code>x</code> is set outside (before) your <code>while</code> loop, so the loop increments the index <code>n</code> but prints the same text over and over because <code>x</code> never changes.</li>\n<li><code>find_between()</code> returns only a single match, and you want all matches.</li>\n<li>Your <code>while</code> loop never ends.</li>\n</ol>\n\n<p>Suggestions:</p>\n\n<ol>\n<li>Put the call to <code>find_between()</code> inside the <code>while</code> loop.</li>\n<li>Each successive time you call <code>find_between()</code>, pass it only the portion of the text following the previous match.</li>\n<li>Exit the <code>while</code> loop when <code>find_between()</code> finds no match.</li>\n</ol>\n\n<p>Something like this:</p>\n\n<pre><code>text_to_search = response.content\nwhile(True):\n    # Find between value of 'x' sources between two tags\n    x = find_between(text_to_search, '/&gt;&lt;/a&gt;&lt;a href=\"/host/', '\"&gt;---')\n    if not x:\n        break\n\n    # Wait one second before continuing...\n    sleep(1)\n\n    # Increment 'n' for index value of item on page\n    n = n + 1\n\n    # Display find_between data in 'x'\n    print \"\\nindex: %s\\n\\n%s\\n\" % (n, x)\n\n    # Remove text already searched\n    found_text_pos = text_to_search.index(x) + len(x)\n    text_to_search = text_to_search[found_text_pos:]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10619915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d95a5bc700d3a18d3f72a6cb1d3df4f7?s=128&d=identicon&r=PG&f=1", "display_name": "Wayne Kenney", "link": "https://stackoverflow.com/users/10619915/wayne-kenney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 1, "accepted_answer_id": 56267072, "answer_count": 1, "score": 0, "last_activity_date": 1558585438, "creation_date": 1558563403, "last_edit_date": 1558585438, "question_id": 56265693, "link": "https://stackoverflow.com/questions/56265693/find-between-function-with-indexed-output", "title": "Find_between function with indexed output?", "body": "<p>I'd like to use the <code>find_between</code> function to retrieve index-able values from a specific web server.</p>\n\n<p>I'm using the <code>requests</code> module to gather some source code from a specific website seen on line 18:</p>\n\n<pre><code>response = requests.get(\"https://www.shodan.io/search?query=Server%3A+SQ-WEBCAM\")\n</code></pre>\n\n<p>and I'd like to call the <code>find_between</code> function to retrieve all the values (all items on page each item represented by the incrementing value of 'n') with the specified <code>find_between</code> parameters:</p>\n\n<pre><code>x = find_between(response.content,'/&gt;&lt;/a&gt;&lt;a href=\"/host/','\"&gt;---')\n</code></pre>\n\n<p>Anyone know how to pull this off?</p>\n\n<pre><code>import sys\nimport requests\nfrom time import sleep\n\n# Find between page tags on page.\ndef find_between( s, tag1, tag2 ):\n    try:\n        start = s.index( tag1 ) + len( tag1 )\n        end = s.index( tag2, start )\n        return s[start:end]\n    except ValueError:\n        return \"\"\n\ndef main():\n    # Default value for 'n' index value (item on page) is 0\n    n = 0\n\n    # Enter the command 'go' to start\n    cmd = raw_input(\"Enter Command: \")\n    if cmd == \"go\":\n        print \"go!\"\n\n        # Go to this page for page item gathering.\n        response = requests.get(\"https://www.shodan.io/search?query=Server%3A+SQ-WEBCAM\")\n\n        # Initial source output...\n        print response.content\n\n        # Find between value of 'x' sources between two tags\n        x = find_between(response.content,'/&gt;&lt;/a&gt;&lt;a href=\"/host/','\"&gt;---')\n        while(True):\n\n            # Wait one second before continuing...\n            sleep(1)\n            n = n + 1\n\n            # Display find_between data in 'x'\n            print \"\\nindex: %s\\n\\n%s\\n\" % (n, x)\n\n    # Enter 'exit' to exit script\n    if cmd == \"exit\":\n        sys.exit()\n\n# Recursive function call\nwhile(True):\n    main()\n</code></pre>\n"}, {"tags": ["python", "matplotlib", "plot"], "comments": [{"owner": {"reputation": 31711, "user_id": 4932316, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OL5Si.png?s=128&g=1", "display_name": "Sheldore", "link": "https://stackoverflow.com/users/4932316/sheldore"}, "edited": false, "score": 1, "creation_date": 1558568480, "post_id": 56265688, "comment_id": 99148725, "body": "Please read <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4815156, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42a862473c4a923f6da6505a3ae3a1cf?s=128&d=identicon&r=PG&f=1", "display_name": "noob123", "link": "https://stackoverflow.com/users/4815156/noob123"}, "is_accepted": false, "score": 0, "last_activity_date": 1558568622, "creation_date": 1558568622, "answer_id": 56266331, "question_id": 56265688, "link": "https://stackoverflow.com/questions/56265688/multiple-boxplots-in-the-same-figure-matplotlib-python/56266331#56266331", "title": "Multiple boxplots in the same figure Matplotlib python", "body": "<p>This might be a possible duplicate of <a href=\"https://stackoverflow.com/questions/2682144/matplotlib-analog-of-rs-pairs\">matplotlib analog of R&#39;s `pairs`</a></p>\n\n<p>Here's another choice for you to go about it as well:\n<a href=\"https://seaborn.pydata.org/generated/seaborn.pairplot.html\" rel=\"nofollow noreferrer\">https://seaborn.pydata.org/generated/seaborn.pairplot.html</a></p>\n"}], "owner": {"reputation": 180, "user_id": 6179895, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e5a605298ccd45e66a16199b9a8af78b?s=128&d=identicon&r=PG", "display_name": "Coderhhz", "link": "https://stackoverflow.com/users/6179895/coderhhz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 424, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558568622, "creation_date": 1558563332, "question_id": 56265688, "link": "https://stackoverflow.com/questions/56265688/multiple-boxplots-in-the-same-figure-matplotlib-python", "title": "Multiple boxplots in the same figure Matplotlib python", "body": "<p>My data has 12 columns. Columns F1, F2, ..., F11) are features. Column 12 contains the label of these features either yes or no. </p>\n\n<p>I would like to plot a boxplot of all these 11 features against the label, but separate by yes or no. </p>\n\n<p>My code so far is:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>names=['f1','f2',......'f11']\nfor i in range(11):\n    yes = df[df['class']=='YES'][names[i]]\n    no = df[df['class']=='NO'][names[i]]\n    fig,axes = plt.subplots(figsize=(8,8))\n    bp = axes.boxplot([yes,no], labels=['YES', 'NO'],patch_artist=True)\n    for box in bp['boxes']:\n        box.set(color='#7570b3', linewidth=2)\n        box.set(facecolor = '#FF0000')\n</code></pre>\n\n<p>My question is: How to show F2, F3, ..., F11 against the label in one graph with some gap in between? </p>\n\n<p>as in the question linked for R (<a href=\"https://stackoverflow.com/questions/14604439/plot-multiple-boxplot-in-one-graph\">Plot multiple boxplot in one graph</a>)</p>\n"}, {"tags": ["python", "scipy", "signal-processing"], "comments": [{"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 0, "creation_date": 1558563599, "post_id": 56265644, "comment_id": 99147710, "body": "Your code is incomplete, what is <code>dt</code>? Is <code>yWhitenoise</code> the same as <code>y</code>?"}, {"owner": {"reputation": 1512, "user_id": 1581390, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/075f8e33addc4f7aa47494e8121c8879?s=128&d=identicon&r=PG", "display_name": "user1581390", "link": "https://stackoverflow.com/users/1581390/user1581390"}, "reply_to_user": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 0, "creation_date": 1558582239, "post_id": 56265644, "comment_id": 99151096, "body": "@Dan: fixed, tnx!"}, {"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 0, "creation_date": 1558603744, "post_id": 56265644, "comment_id": 99159031, "body": "Have you tried varying values for <code>dt</code>? Maybe random noise at 1Hz intervals doesn&#39;t have nice properties. See if changing the frequency to something significantly higher makes the chart appear more low pass?"}], "answers": [{"tags": [], "owner": {"reputation": 2874, "user_id": 1207193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7185bb03c994eb9bb9cc15e4b1443c19?s=128&d=identicon&r=PG", "display_name": "eusoubrasileiro", "link": "https://stackoverflow.com/users/1207193/eusoubrasileiro"}, "is_accepted": false, "score": 0, "last_activity_date": 1559053513, "last_edit_date": 1559053513, "creation_date": 1559049330, "answer_id": 56343142, "question_id": 56265644, "link": "https://stackoverflow.com/questions/56265644/butterworth-lowpass-filter/56343142#56343142", "title": "Butterworth Lowpass Filter", "body": "<p>Your problem is whith the param <code>analog=True</code> remove it and it will work. </p>\n\n<p><code>lfilter()</code> can only use a digital filter. It doesn't make sense to filter a digital signal (your white noise assumed regularly sampled) with an analog filter. </p>\n"}], "owner": {"reputation": 1512, "user_id": 1581390, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/075f8e33addc4f7aa47494e8121c8879?s=128&d=identicon&r=PG", "display_name": "user1581390", "link": "https://stackoverflow.com/users/1581390/user1581390"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 96, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1559053513, "creation_date": 1558563005, "last_edit_date": 1558582129, "question_id": 56265644, "link": "https://stackoverflow.com/questions/56265644/butterworth-lowpass-filter", "title": "Butterworth Lowpass Filter", "body": "<p>I am not getting the desired output, it is cutting off the lower freq. no matter if I set it to 'low' or 'high'.</p>\n\n<pre><code>import numpy as np\nfrom scipy import signal\nimport matplotlib.pyplot as plt\n\ndef butter_filter(data, butterCutoffFreq, order=1):\n    b, a = signal.butter(order, butterCutoffFreq, 'low', analog=True)\n    y = signal.lfilter(b, a, data)\n    return y\n\n\"\"\"\n    White noise\n\"\"\"\nN = 1024\ndt = np.float64(1)\ny = np.random.normal(loc=0.0, scale=1.0, size=N)\nt = np.arange(start=0, stop=N, step=dt)\nbutterCutoffFreq = 0.5 * 1/dt\n\namps = np.fft.rfft(y)\nfreqs = np.fft.rfftfreq(y.size, dt)\n#plt.plot(freqs, np.abs(amps), color='b')\n\nampsFiltered = butter_filter(y, butterCutoffFreq)\nampsFiltered = np.fft.rfft(ampsFiltered)\n\nplt.plot(freqs, np.abs(ampsFiltered), color='g')\nplt.show()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/dEHJ7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/dEHJ7.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "sorting", "bubble-sort"], "comments": [{"owner": {"reputation": 42640, "user_id": 1553851, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/ad333c218c8f2fb917cf506919fc95f4?s=128&d=identicon&r=PG", "display_name": "shmosel", "link": "https://stackoverflow.com/users/1553851/shmosel"}, "edited": false, "score": 0, "creation_date": 1558563009, "post_id": 56265641, "comment_id": 99147553, "body": "Don&#39;t tag spam."}, {"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 1, "creation_date": 1558563110, "post_id": 56265641, "comment_id": 99147582, "body": "Wouldn&#39;t the maximum be infinite?"}, {"owner": {"reputation": 43423, "user_id": 1011724, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/2JAXi.jpg?s=128&g=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/1011724/dan"}, "edited": false, "score": 1, "creation_date": 1558563331, "post_id": 56265641, "comment_id": 99147634, "body": "You forgot to ask a question. Google &quot;counting inversions&quot;."}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1558563755, "post_id": 56265641, "comment_id": 99147752, "body": "The proper Python idiom for directly swapping two values (in-place, using tuple assignment, no need for <code>temp</code>) is <code>ratings[i], ratings[t] = ratings[t], ratings[i]</code>"}, {"owner": {"reputation": 25595, "user_id": 202229, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6cc1d82c11563b440c57280ad587ee47?s=128&d=identicon&r=PG", "display_name": "smci", "link": "https://stackoverflow.com/users/202229/smci"}, "edited": false, "score": 0, "creation_date": 1558563890, "post_id": 56265641, "comment_id": 99147780, "body": "Also, why are you calling the function <code>minimumSwaps()</code>, really it should be called <code>count_inversions()</code>? I don&#39;t see what&#39;s minimum about it."}], "answers": [{"tags": [], "owner": {"reputation": 2192, "user_id": 3106565, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/59de4b3d6299b5b375e072efd690870d?s=128&d=identicon&r=PG&f=1", "display_name": "Osman Mamun", "link": "https://stackoverflow.com/users/3106565/osman-mamun"}, "is_accepted": false, "score": 0, "last_activity_date": 1558564667, "creation_date": 1558564667, "answer_id": 56265854, "question_id": 56265641, "link": "https://stackoverflow.com/questions/56265641/count-number-of-swaps-to-sort-a-list-in-descending-order/56265854#56265854", "title": "Count number of swaps to sort a list in descending order", "body": "<p>I wrote a bubble sorting code some time ago, it might help you</p>\n\n<pre><code>def bubble_sort(arr, reversed=False):\n    swap_cnt = 0\n    i = len(arr) - 1\n    while i &gt; 0:\n        for j in range(i):\n            if not reversed:\n                if arr[j] &gt; arr[j+1]:\n                    arr[j], arr[j+1] = arr[j+1], arr[j]\n                    swap_cnt += 1\n            if reversed:\n                if arr[j] &lt; arr[j+1]:\n                    arr[j], arr[j+1] = arr[j+1], arr[j]\n                    swap_cnt += 1\n        i -= 1\n    print('Number of swaps: {}'.format(swap_cnt))\n    return arr\n\nif __name__ == \"__main__\":\n    print(bubble_sort([2, 4, 8, 5, 1, 9, 4]))\n    print(bubble_sort([2, 4, 8, 5, 1, 9, 4], reversed=True))\n</code></pre>\n"}], "owner": {"reputation": 80, "user_id": 7616879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ed185ed3336407594d4927bcb7e178e?s=128&d=identicon&r=PG&f=1", "display_name": "Steve Okay", "link": "https://stackoverflow.com/users/7616879/steve-okay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1249, "favorite_count": 0, "closed_date": 1558565015, "answer_count": 1, "score": -1, "last_activity_date": 1558564667, "creation_date": 1558562988, "last_edit_date": 1558564048, "question_id": 56265641, "link": "https://stackoverflow.com/questions/56265641/count-number-of-swaps-to-sort-a-list-in-descending-order", "closed_reason": "Duplicate", "title": "Count number of swaps to sort a list in descending order", "body": "<p>I am trying to sort list in decreasing order and get the number of swaps required to sort the list in decreasing order [3, 1, 2] \u2192 [3, 2, 1]. i.e from the highest element of the list to the lowest using python. The function i have is sorting the list in increasing order i.e [3, 1, 2] \u2192 [1, 2, 3] . How would i sort it in decreasing order and get the number of swaps it took to sort the list?</p>\n\n<pre><code>            def count_inversions(ratings):\n                swap = 0;\n                for i in range(len(ratings)):\n                    if(i + 1 != ratings[i]):\n                        t = i \n                        while(ratings[t] != i+1):\n                            t++\n                        temp = ratings[t]\n                        ratings[t] = ratings[i]\n                        ratings[i] = temp\n                        swap = swap + 1\n\n                return swap\n</code></pre>\n"}, {"tags": ["python", "python-import", "pep8", "flake8"], "answers": [{"comments": [{"owner": {"reputation": 253, "user_id": 11343425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRr7l.png?s=128&g=1", "display_name": "SurpriseDog", "link": "https://stackoverflow.com/users/11343425/surprisedog"}, "edited": false, "score": 0, "creation_date": 1558567491, "post_id": 56265896, "comment_id": 99148576, "body": "Is it considered bad form to leave in the &quot;from generic_functions import *&quot; line when you use all of the functions? I&#39;ve searched this question online and see a lot of hate for star imports."}, {"owner": {"reputation": 6802, "user_id": 9609843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9ceb913f05e91861333b367e0379a8e?s=128&d=identicon&r=PG&f=1", "display_name": "sanyassh", "link": "https://stackoverflow.com/users/9609843/sanyassh"}, "reply_to_user": {"reputation": 253, "user_id": 11343425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRr7l.png?s=128&g=1", "display_name": "SurpriseDog", "link": "https://stackoverflow.com/users/11343425/surprisedog"}, "edited": false, "score": 1, "creation_date": 1558567953, "post_id": 56265896, "comment_id": 99148659, "body": "You maybe interested in this topic: <a href=\"https://stackoverflow.com/questions/2386714/why-is-import-bad\">stackoverflow.com/questions/2386714/why-is-import-bad</a>. I would say that sometimes it is not so bad to have <code>import *</code> if changing it to <code>import name1, name2, ...</code> will lead to a huge number of imports."}], "tags": [], "owner": {"reputation": 6802, "user_id": 9609843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9ceb913f05e91861333b367e0379a8e?s=128&d=identicon&r=PG&f=1", "display_name": "sanyassh", "link": "https://stackoverflow.com/users/9609843/sanyassh"}, "is_accepted": true, "score": 3, "last_activity_date": 1558565008, "creation_date": 1558565008, "answer_id": 56265896, "question_id": 56265620, "link": "https://stackoverflow.com/questions/56265620/make-flake8-differentiate-between-undefined-functions-and-star-imports/56265896#56265896", "title": "Make flake8 differentiate between undefined functions and star imports", "body": "<p>You can do the following:</p>\n\n<ol>\n<li>Leave your import as <code>from generic_functions import *</code></li>\n<li>Run flake8 as <code>flake8 --ignore=F405 file.py</code>. I really don't know why <code># noqa</code> doesn't work, but <code>--ignore</code> does.</li>\n<li>Test the rest of possible errors with pylint. Pylint is able to determine that <code>&lt;function&gt;</code> is defined and imported from <code>generic_functions</code>.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 253, "user_id": 11343425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRr7l.png?s=128&g=1", "display_name": "SurpriseDog", "link": "https://stackoverflow.com/users/11343425/surprisedog"}, "is_accepted": false, "score": 0, "last_activity_date": 1618502851, "last_edit_date": 1618502851, "creation_date": 1618501454, "answer_id": 67111668, "question_id": 56265620, "link": "https://stackoverflow.com/questions/56265620/make-flake8-differentiate-between-undefined-functions-and-star-imports/67111668#67111668", "title": "Make flake8 differentiate between undefined functions and star imports", "body": "<p>You can use <a href=\"https://www.pylint.org/#install\" rel=\"nofollow noreferrer\">pylint</a> to determine which functions are required and which ones are not. I wrote a function to automate this process. It works as follows:</p>\n<ol>\n<li>Run pylint on a script and match all of the <code>W0614: Unused import</code> errors.</li>\n<li>Get the list of variables in the target module with vars()</li>\n<li>Take the difference of those sets and only return things that can be imported.</li>\n</ol>\n<hr />\n<pre><code>import subprocess, types\n\ndef scrape_wildcard(filename, modvars):\n    &quot;Get variables imported from module in wild * import&quot;\n    error = &quot;W0614: Unused import &quot;\n    unused = []\n    for line in quickrun(['pylint', filename]):\n        if error in line:\n            unused.append(line.split(error)[1].split()[0])\n\n    out = dict()\n    for name in set(modvars.keys()) - set(unused):\n        if not name.startswith('__'):\n            func = modvars[name]\n            if not isinstance(func, types.ModuleType):\n                out[name] = modvars[name]\n    return out\n\n\ndef quickrun(cmd, check=False, encoding='utf-8', errors='replace'):\n    ret = subprocess.run(cmd, stdout=subprocess.PIPE, check=check)\n    return ret.stdout.decode(encoding=encoding, errors=errors).splitlines()\n\n\nimport ????? as mymod\nfilename = &quot;?????&quot;\nprint('from', mymod.__name__, 'import', ', '.join(scrape_wildcard(filename, vars(mymod)).keys()))\n'''\n</code></pre>\n<p>Replace the ????? with your module name and the filename of the module, respectively.</p>\n"}], "owner": {"reputation": 253, "user_id": 11343425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tRr7l.png?s=128&g=1", "display_name": "SurpriseDog", "link": "https://stackoverflow.com/users/11343425/surprisedog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1025, "favorite_count": 1, "accepted_answer_id": 56265896, "answer_count": 2, "score": 2, "last_activity_date": 1618502851, "creation_date": 1558562888, "question_id": 56265620, "link": "https://stackoverflow.com/questions/56265620/make-flake8-differentiate-between-undefined-functions-and-star-imports", "title": "Make flake8 differentiate between undefined functions and star imports", "body": "<p>I have a rather large project that I'm trying to clean up before posting, but when I run flake8 I get tons of </p>\n\n<pre><code>'F405 &lt;function&gt; may be undefined, or defined from star imports: generic_functions`\n</code></pre>\n\n<p>I could avoid this by replacing the line:</p>\n\n<pre><code>from generic_functions import *\n</code></pre>\n\n<p>at the start of my file, but:</p>\n\n<ol>\n<li><p>I literally use all of the functions in there, so I don't understand how it's more pythonic to exceed the 80 character limit typing out every single function:</p>\n\n<pre><code> from generic_functions import (function1, function2, function3, function4, function5, function6, function7...)\n</code></pre></li>\n<li><p>Doing the above would be tedious, especially if I need to add or remove from the dozens of functions in generic_functions.py</p></li>\n</ol>\n\n<p>The other option would be to disable the F405 warning, but what if the function is truly undefined? It would be nice to allow star imports while still catching anything undefined. Is there a way to do this? I tried adding # noqa to the import line, but it doesn't seem to help.</p>\n"}, {"tags": ["python", "logging", "flask"], "answers": [{"comments": [{"owner": {"reputation": 610, "user_id": 2066083, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6026a80c57f6d1d949cee04bcd1ad817?s=128&d=identicon&r=PG", "display_name": "Katie", "link": "https://stackoverflow.com/users/2066083/katie"}, "edited": false, "score": 0, "creation_date": 1558566340, "post_id": 56266005, "comment_id": 99148326, "body": "Probably my question wasn&#39;t clear, but: I want to write a function that takes a parameter that determines which handler is invoked. This function would be called in the exception. I don&#39;t want the handler type to be determined by the exception class. But maybe you&#39;re suggesting that I could catch and reraise the exception as a custom Exception type to direct it?  That&#39;s an interesting idea, but I think it will result in messier code than just having multiple logger objects (maybe I am less stuck than I thought).    I&#39;ve seen that page in the Flask docs, but thanks for the pointer!"}, {"owner": {"reputation": 1728, "user_id": 4967694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6bb32e6094783ec9fc40f63e24ef2b1?s=128&d=identicon&r=PG", "display_name": "djnz", "link": "https://stackoverflow.com/users/4967694/djnz"}, "reply_to_user": {"reputation": 610, "user_id": 2066083, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6026a80c57f6d1d949cee04bcd1ad817?s=128&d=identicon&r=PG", "display_name": "Katie", "link": "https://stackoverflow.com/users/2066083/katie"}, "edited": false, "score": 0, "creation_date": 1558567420, "post_id": 56266005, "comment_id": 99148569, "body": "I see what you&#39;re saying, you should be able to create a catch-all (<code>@app.errorhandler(Exception)</code>), and send additional data to this when you raise an exception in your code via kwargs."}], "tags": [], "owner": {"reputation": 1728, "user_id": 4967694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6bb32e6094783ec9fc40f63e24ef2b1?s=128&d=identicon&r=PG", "display_name": "djnz", "link": "https://stackoverflow.com/users/4967694/djnz"}, "is_accepted": false, "score": 0, "last_activity_date": 1558565778, "creation_date": 1558565778, "answer_id": 56266005, "question_id": 56265605, "link": "https://stackoverflow.com/questions/56265605/direct-a-log-to-a-specific-handler-but-not-others-in-python-logging/56266005#56266005", "title": "direct a log to a specific handler, but not others, in Python logging", "body": "<p>You can register your own error handlers as outlined <a href=\"http://flask.pocoo.org/docs/1.0/errorhandling/#registering\" rel=\"nofollow noreferrer\">here</a>, which mentions </p>\n\n<blockquote>\n  <p>Handlers can be registered for any exception class, not just HTTPException subclasses or HTTP status codes. Handlers can be registered for a specific class, or for all subclasses of a parent class.</p>\n</blockquote>\n\n<p>So you have the ability to define and register your own exception classes as you desire.</p>\n\n<p>As for handling errors through built in logging, I would suggest you get familiar with the <a href=\"http://flask.pocoo.org/docs/1.0/logging/#logging\" rel=\"nofollow noreferrer\">Flask docs here</a> which outlines how you can either customise handlers (for example, using <code>SMTPHandler</code>), or remove default handlers altogether.</p>\n"}], "owner": {"reputation": 610, "user_id": 2066083, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/6026a80c57f6d1d949cee04bcd1ad817?s=128&d=identicon&r=PG", "display_name": "Katie", "link": "https://stackoverflow.com/users/2066083/katie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558565778, "creation_date": 1558562778, "question_id": 56265605, "link": "https://stackoverflow.com/questions/56265605/direct-a-log-to-a-specific-handler-but-not-others-in-python-logging", "title": "direct a log to a specific handler, but not others, in Python logging", "body": "<p>I have a Flask application for which I would like to write a <code>global_error_handler</code> method that takes parameters like <code>email_admin</code> and only emails the admins when this parameter is <code>True</code>.</p>\n\n<p>If I wanted to use Python's built in logging functionality (instead of, for example, getting the exception information from <code>sys.exc_info</code> and formatting an email myself, what are my options for how to go about this?  What I'm really stuck on is: it doesn't seems like I can say at the time the exception is raised, please direct this to this particular logging handler, and not to another.   Do I need to write more than one logger, each with a particular handler, and have different error log destinations that way?</p>\n"}, {"tags": ["python", "django", "backend"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 10605113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe7852d15dac5b8a801dc8001cc4165?s=128&d=identicon&r=PG&f=1", "display_name": "user10605113", "link": "https://stackoverflow.com/users/10605113/user10605113"}, "edited": false, "score": 0, "creation_date": 1558563037, "post_id": 56265608, "comment_id": 99147560, "body": "Thanks for reply. Now in template where I have <code>{{ following_topics }}</code> - return empty list, but I have some data there."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 181, "user_id": 10605113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe7852d15dac5b8a801dc8001cc4165?s=128&d=identicon&r=PG&f=1", "display_name": "user10605113", "link": "https://stackoverflow.com/users/10605113/user10605113"}, "edited": false, "score": 0, "creation_date": 1558563088, "post_id": 56265608, "comment_id": 99147576, "body": "@user10605113: there was a problem with your query as well, you wrote <code>followers=request.user.is_authenticated</code>. I fixed that now. Does this help?"}, {"owner": {"reputation": 181, "user_id": 10605113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe7852d15dac5b8a801dc8001cc4165?s=128&d=identicon&r=PG&f=1", "display_name": "user10605113", "link": "https://stackoverflow.com/users/10605113/user10605113"}, "edited": false, "score": 0, "creation_date": 1558563140, "post_id": 56265608, "comment_id": 99147591, "body": "Yes. Thanks a lot :) +1"}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 1, "last_activity_date": 1558563057, "last_edit_date": 1558563057, "creation_date": 1558562785, "answer_id": 56265608, "question_id": 56265585, "link": "https://stackoverflow.com/questions/56265585/value-error-dictionary-update-sequence-element-0-has-length-1-2-is-required/56265608#56265608", "title": "Value error dictionary update sequence element #0 has length 1; 2 is required", "body": "<p>I think you misunderstood how to write a context processor. As the <a href=\"https://docs.djangoproject.com/en/2.2/ref/templates/api/#writing-your-own-context-processors\" rel=\"nofollow noreferrer\">documentation [Django-doc]</a> says:</p>\n\n<blockquote>\n  <p>A context processor has a very simple interface: It's a <strong>Python function that takes one argument</strong>, an <code>HttpRequest</code> object, and <strong>returns a dictionary</strong> that gets added to the template context. Each context processor must return a dictionary.</p>\n</blockquote>\n\n<p>So you should simply write this as:</p>\n\n<pre><code>def following_issues(request):\n    if request.user.is_authenticated:\n        return {\n            'following_topics': Issue.objects.filter(followers=request.user)\n        }\n    else:\n        return {\n            'following_topics': Issue.objects.none()\n        }</code></pre>\n\n<p>We thus can simply return a dictionary here where we map <code>following_topics</code> on <code>Issue.objects.filter(..)</code> expression.</p>\n\n<p>Furthermore you can not specify <code>followers=request.user.is_authenticated</code>, since that is a boolean, and you probably, given I understand the modeling correctly, filter on the user. Here I wrote that in case the user is not authenticated, we return an empty <code>QuerySet</code>.</p>\n"}], "owner": {"reputation": 181, "user_id": 10605113, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fe7852d15dac5b8a801dc8001cc4165?s=128&d=identicon&r=PG&f=1", "display_name": "user10605113", "link": "https://stackoverflow.com/users/10605113/user10605113"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 0, "accepted_answer_id": 56265608, "answer_count": 1, "score": 1, "last_activity_date": 1558563057, "creation_date": 1558562585, "question_id": 56265585, "link": "https://stackoverflow.com/questions/56265585/value-error-dictionary-update-sequence-element-0-has-length-1-2-is-required", "title": "Value error dictionary update sequence element #0 has length 1; 2 is required", "body": "<p>I want to write a context processor, so that the list can be seen anywhere in the application in django (version 2.1).\nI'm getting an error:</p>\n\n<pre><code>ValueError at /\n\ndictionary update sequence element #0 has length 1; 2 is required\n</code></pre>\n\n<pre><code>def following_issues(request):\n    request_context = RequestContext(request)\n    request_context.push({'following_issues': Issue.objects.filter(followers=request.user.is_authenticated)})\n    return request_context\n</code></pre>\n\n<p>In my settings:</p>\n\n<pre><code>TEMPLATES = [\n    {\n        'BACKEND': 'django.template.backends.django.DjangoTemplates',\n        'DIRS': [os.path.join(BASE_DIR, 'templates')],\n        'APP_DIRS': True,\n        'OPTIONS': {\n            'context_processors': [\n                'django.template.context_processors.request',\n                'django.template.context_processors.debug',\n                'django.contrib.auth.context_processors.auth',\n                'django.contrib.messages.context_processors.messages',\n                'base.context_processors.following_issues',\n            ],\n        },\n    },\n]\n</code></pre>\n"}, {"tags": ["python", "django", "django-templates"], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 7915754, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wqnVX6rslvY/AAAAAAAAAAI/AAAAAAAAAC4/Z50n8ijzyBY/photo.jpg?sz=128", "display_name": "David Black", "link": "https://stackoverflow.com/users/7915754/david-black"}, "edited": false, "score": 0, "creation_date": 1558649776, "post_id": 56266086, "comment_id": 99181112, "body": "that was it! just needed to change the template to <code>project.teams.users.all</code> ! thank you!"}], "tags": [], "owner": {"reputation": 41, "user_id": 9267832, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qw-FU4RW2mU/AAAAAAAAAAI/AAAAAAAAAAs/4c3yaFHZ5zA/photo.jpg?sz=128", "display_name": "Pedro Mendes", "link": "https://stackoverflow.com/users/9267832/pedro-mendes"}, "is_accepted": true, "score": 1, "last_activity_date": 1558566523, "creation_date": 1558566523, "answer_id": 56266086, "question_id": 56265578, "link": "https://stackoverflow.com/questions/56265578/display-user-teams-in-template/56266086#56266086", "title": "Display User teams in template", "body": "<p>im not sure but i think related_name are missed used in this situation:</p>\n\n<pre><code>class Team(models.Model):\n# Relationship Fields\nproject = models.OneToOneField(\n    'projects.Project',\n    on_delete=models.CASCADE, related_name=\"projects\", \n)\n</code></pre>\n\n<p>this means that in one object of the class Project will have an attribute with the name projects that will be a reference to the teams. I believe you want:</p>\n\n<pre><code>class Team(models.Model):\n# Relationship Fields\nproject = models.OneToOneField(\n    'projects.Project',\n    on_delete=models.CASCADE, related_name=\"team\", \n)\n</code></pre>\n\n<p>So you will be able to call project.team.</p>\n\n<p>Changing your code:</p>\n\n<pre><code># project/users/models.py\n\nclass CustomUser(AbstractUser):\n    name = models.CharField(max_length=255)\n\n    # Relationship Fields\n    team = models.ManyToManyField(\n        'users.Team',\n        related_name=\"customers\",\n    )\n\nclass Team(models.Model):\n    # Relationship Fields\n    project = models.OneToOneField(\n        'projects.Project',\n        on_delete=models.CASCADE, related_name=\"team\", \n    )\n\nclass Project(models.Model):\n    name = models.CharField(max_length=255)\n</code></pre>\n\n<p>So in the template now you could:</p>\n\n<pre><code>{% for user in project.team.customers.all %}\n    {{ user.name }}\n{% endfor %}\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 7915754, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wqnVX6rslvY/AAAAAAAAAAI/AAAAAAAAAC4/Z50n8ijzyBY/photo.jpg?sz=128", "display_name": "David Black", "link": "https://stackoverflow.com/users/7915754/david-black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 56266086, "answer_count": 1, "score": 0, "last_activity_date": 1558566523, "creation_date": 1558562557, "question_id": 56265578, "link": "https://stackoverflow.com/questions/56265578/display-user-teams-in-template", "title": "Display User teams in template", "body": "<p>I have 3 models - Project, Team and a CustomUser model. I'm trying to display a list of teams which a user is part of on the user's detail page, and display a list of users who are part of the project team on the project's detail page but I'm at a stand-still. </p>\n\n<pre><code># project/users/models.py\n\nclass CustomUser(AbstractUser):\n    name = models.CharField(max_length=255)\n\n    # Relationship Fields\n    team = models.ManyToManyField(\n        'users.Team',\n        related_name=\"teams\",\n    )\n\nclass Team(models.Model):\n    # Relationship Fields\n    project = models.OneToOneField(\n        'projects.Project',\n        on_delete=models.CASCADE, related_name=\"projects\", \n    )\n</code></pre>\n\n<pre><code># project/projects/models.py\n\nclass Project(models.Model):\n    name = models.CharField(max_length=255)\n</code></pre>\n\n<h1>project/projects/templates/projects/project_detail.html</h1>\n\n<pre><code>{% for user in project.team.user.all %}\n    {{ user.name }}\n{% endfor %}\n</code></pre>\n\n<p>I've tried variations of the above such as</p>\n\n<pre><code>{% for user in users.teams.projects.all %}\n    {{ user.name }}\n{% endfor %}\n</code></pre>\n\n<p>but I can't seem to make anything show. I think I'm doing something simple wrong - I've read through the docs for displaying ManyToManyFields but I'm at a loss! Can anybody point me in the right direction?</p>\n"}, {"tags": ["python", "c++", "python-3.x"], "comments": [{"owner": {"reputation": 884, "user_id": 9238288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbf252a32c63647e64ea7b1a534be4a?s=128&d=identicon&r=PG&f=1", "display_name": "jackw11111", "link": "https://stackoverflow.com/users/9238288/jackw11111"}, "edited": false, "score": 0, "creation_date": 1558573803, "post_id": 56265562, "comment_id": 99149656, "body": "These lines seem extraneous: <code>Py_SetPythonHome(const_cast&lt;wchar_t*&gt;(L&quot;C:\\\\Anaconda3\\\\envs\\&zwnj;&#8203;\\Deep_Learning&quot;));</code>     <code>PyRun_SimpleString(&quot;import sys&quot;);</code>     <code>PyRun_SimpleString(&quot;sys.path.append(\\&quot;C:\\\\python_files\\&quot;)&quot;);</code>  Add the directory of your python files to your <code>PYTHONPATH</code>, this answer is helpful (<a href=\"https://stackoverflow.com/a/4855685/9238288\">stackoverflow.com/a/4855685/9238288</a>)"}, {"owner": {"reputation": 11, "user_id": 11477327, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-p_Mvjz48w_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfrhDbbDyW7T1OwmUBBQ68TI8cn8g/mo/photo.jpg?sz=128", "display_name": "Soumya Mohanty", "link": "https://stackoverflow.com/users/11477327/soumya-mohanty"}, "reply_to_user": {"reputation": 884, "user_id": 9238288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbf252a32c63647e64ea7b1a534be4a?s=128&d=identicon&r=PG&f=1", "display_name": "jackw11111", "link": "https://stackoverflow.com/users/9238288/jackw11111"}, "edited": false, "score": 0, "creation_date": 1558705126, "post_id": 56265562, "comment_id": 99200070, "body": "@jackw11111 If I add my directory to PYTHONPATH then Py_Initialize() doesnt work. Nor does it solve this problem. The reason for Py_Initialize not working properly with PYTHONPATH and PYTHONHOME is explained here: <a href=\"https://stackoverflow.com/questions/5694706/py-initialize-fails-unable-to-load-the-file-system-codec\" title=\"py initialize fails unable to load the file system codec\">stackoverflow.com/questions/5694706/&hellip;</a>. Please see the third answer."}, {"owner": {"reputation": 11, "user_id": 11477327, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-p_Mvjz48w_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfrhDbbDyW7T1OwmUBBQ68TI8cn8g/mo/photo.jpg?sz=128", "display_name": "Soumya Mohanty", "link": "https://stackoverflow.com/users/11477327/soumya-mohanty"}, "reply_to_user": {"reputation": 884, "user_id": 9238288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dbf252a32c63647e64ea7b1a534be4a?s=128&d=identicon&r=PG&f=1", "display_name": "jackw11111", "link": "https://stackoverflow.com/users/9238288/jackw11111"}, "edited": false, "score": 1, "creation_date": 1558705699, "post_id": 56265562, "comment_id": 99200383, "body": "I managed to find a fix. But I am still uncertain about the cause of this error.  In the python program if we give the full path like &quot;C:\\\\python_files\\\\filename. Then it works fine. Same goes for loading pre-trained models in the python program as well.  This is unusual because if python can run a program successfully then, once we embed that program in C++ it should work as well. But in this case just giving the file-name (when file is in same directory as the python program) works for python, but not when it is embedded in C++."}], "owner": {"reputation": 11, "user_id": 11477327, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-p_Mvjz48w_s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfrhDbbDyW7T1OwmUBBQ68TI8cn8g/mo/photo.jpg?sz=128", "display_name": "Soumya Mohanty", "link": "https://stackoverflow.com/users/11477327/soumya-mohanty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 381, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1558573263, "creation_date": 1558562474, "last_edit_date": 1558572594, "question_id": 56265562, "link": "https://stackoverflow.com/questions/56265562/how-to-openfile-path-rb-in-a-a-python-file-that-is-embedded-in-c", "title": "How to open(&#39;file-path&#39;, &#39;rb&#39;) in a a python file that is embedded in C++?", "body": "<p>I have some C++ code which is calling a function inside a python file. If I try to read a pickled file in the python code then I get the following error:</p>\n\n<pre><code>Exception ignored in: &lt;module 'threading' from 'C:\\\\Anaconda3\\\\envs\\\\Deep_Learning\\\\lib\\\\threading.py'&gt;\nTraceback (most recent call last):\n  File \"C:\\Anaconda3\\envs\\Deep_Learning\\lib\\threading.py\", line 1289, in _shutdown\n    assert tlock.locked()\nSystemError: &lt;built-in method locked of _thread.lock object at 0x000002328D1EAAA8&gt; returned a result with an error set\n</code></pre>\n\n<p><strong>Python file:</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def test():\n    print(\"In function test of pyemb.py file \\n\")    \n    import pickle\n    with open('filepath', 'rb') as f_in:\n        C = pickle.load(f_in)\n</code></pre>\n\n<p><strong>C++ (This file is calling the python file)</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include &lt;conio.h&gt;\n#include &lt;pyhelper.hpp&gt;\n\n#include &lt;iostream&gt;\n\nint main()\n{\n    CPyInstance hInstance;\n\n\n    CPyObject pName = PyUnicode_FromString(\"pyemb\");\n    CPyObject pModule = PyImport_Import(pName);       //importing the file\n\n    if (pModule) \n    {\n        std::cout &lt;&lt; \"Module load successful\" &lt;&lt; std::endl;\n\n        CPyObject pFunc1 = PyObject_GetAttrString(pModule, \"test\"); //passing name of function to be called\n        if (pFunc1 &amp;&amp; PyCallable_Check(pFunc1)) // checking if not null and callable\n        {\n            PyObject_CallObject(pFunc1, NULL); \n        }\n        else\n        {\n            printf(\"ERROR: function test didn't run as intended\\n\");\n        }\n    }\n    else\n    {\n        printf_s(\"ERROR: Module not imported\\n\");\n    }\n    return 0;\n}\n</code></pre>\n\n<p><strong>C++(pyhelper.hpp to handle Py_Initialize ,Py_Finalize etc)</strong></p>\n\n<pre><code>#ifndef PYHELPER_HPP\n#define PYHELPER_HPP\n#pragma once\n\n#include &lt;Python.h&gt;\n\n// This will take care of closing the session when CPyInstance scope ends,\n// as destructor will be implicitly called to close the Py instance\nclass CPyInstance\n{\npublic:\n    CPyInstance()\n    {\n        // Setting Python home path for reading lib and bin\n        Py_SetPythonHome(const_cast&lt;wchar_t*&gt;(L\"C:\\\\Anaconda3\\\\envs\\\\Deep_Learning\"));\n\n        // Initializing Python interpreter\n        Py_Initialize(); \n\n        // Setting path for python to find our python model files \n        PyRun_SimpleString(\"import sys\");\n        PyRun_SimpleString(\"sys.path.append(\\\"C:\\\\python_files\\\")\");\n    }\n\n    ~CPyInstance()\n    {\n        Py_Finalize(); // closes the python interpreter instance\n    }\n};\n\n...More code for other stuff...\n</code></pre>\n\n<p>How can I fix this?</p>\n\n<p>Please help.</p>\n"}, {"tags": ["python", "tensorflow", "shapes", "tensorflow-datasets"], "answers": [{"tags": [], "owner": {"reputation": 426, "user_id": 9675583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71ddab7c917337819fe37efdadc16d75?s=128&d=identicon&r=PG&f=1", "display_name": "DMolony", "link": "https://stackoverflow.com/users/9675583/dmolony"}, "is_accepted": false, "score": 1, "last_activity_date": 1558572253, "creation_date": 1558572253, "answer_id": 56266698, "question_id": 56265534, "link": "https://stackoverflow.com/questions/56265534/tensorflow-how-to-batch-with-a-dataset-constructed-with-numpy-arrays/56266698#56266698", "title": "Tensorflow: how to batch with a dataset constructed with numpy arrays?", "body": "<p>In order to take batch size into account you need to change the following </p>\n\n<pre><code>dataset.batch(batch_size)\n</code></pre>\n\n<p>to </p>\n\n<pre><code>dataset = dataset.batch(batch_size)\n</code></pre>\n"}], "owner": {"reputation": 451, "user_id": 8762321, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/149f5e28677d62ff7a70011ec1f539de?s=128&d=identicon&r=PG&f=1", "display_name": "TFdoe", "link": "https://stackoverflow.com/users/8762321/tfdoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558587190, "creation_date": 1558562231, "last_edit_date": 1558587190, "question_id": 56265534, "link": "https://stackoverflow.com/questions/56265534/tensorflow-how-to-batch-with-a-dataset-constructed-with-numpy-arrays", "title": "Tensorflow: how to batch with a dataset constructed with numpy arrays?", "body": "<p>I am trying to understand the behavior of <code>Dataset.batch</code>. Here is the code I have used to try to set up iterators on batched data through a <code>Dataset</code> based on <code>numpy</code> arrays.</p>\n\n<pre><code>    ## experiment with a numpy dataset\n    sample_size = 100000\n    ncols = 15\n    batch_size = 1000\n    xarr = np.ones([sample_size, ncols]) * [i for i in range(ncols)]\n    xarr = xarr + np.random.normal(scale = 0.5, size = xarr.shape)\n    yarr = np.sum(xarr, axis = 1)\n    self.x_placeholder = tf.placeholder(xarr.dtype, [None, ncols])\n    self.y_placeholder = tf.placeholder(yarr.dtype, [None, 1])\n\n    dataset = tf.data.Dataset.from_tensor_slices((self.x_placeholder, self.y_placeholder))\n    dataset.batch(batch_size)\n    self.iterator  = dataset.make_initializable_iterator()\n\n    X, y  = self.iterator.get_next()\n</code></pre>\n\n<p>However, when I check the shapes of X and y they are</p>\n\n<pre><code>(Pdb) X.shape\nTensorShape([Dimension(15)])\n(Pdb) y.shape\nTensorShape([Dimension(1)])\n</code></pre>\n\n<p>This is confusing to me because it does not appear that my batch size has been taken into account. It also causes problems downstream when building a model because I expect X and y to have two dimensions, the first dimension being the number of examples in the batch. </p>\n\n<p>Question: Why are the outputs of the iterator one dimensional? How should I batch properly?</p>\n\n<p>Here is what I have tried:</p>\n\n<ul>\n<li>The <code>shapes</code> of <code>X</code> and <code>y</code> are the same regardless of whether I apply the <code>batch</code> function to the dataset.</li>\n<li>Changing the shape I feed into the placeholders (say by replacing <code>None</code> with <code>batch_size</code>) does not change the behavior either.</li>\n</ul>\n\n<p>Thanks for suggestions/corrections, etc.</p>\n"}, {"tags": ["python", "python-3.x", "columnsorting"], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 11540716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52ee2ef1f4e030b2024e8cc86451a629?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/11540716/patrick"}, "edited": false, "score": 0, "creation_date": 1558562790, "post_id": 56265539, "comment_id": 99147484, "body": "Maybe I didn&#39;t describe it propperly.  In this column, there are 11 different &#39;device_id&#39; s and to make it more accessible i&#39;m trying to export each row to with the matching device_id to the matching file so that i don&#39;t have to scroll through 18k lines of data."}], "tags": [], "owner": {"reputation": 615, "user_id": 6674235, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ca7cf4273c241fc6ba012a8dac9399ee?s=128&d=identicon&r=PG&f=1", "display_name": "James Steele", "link": "https://stackoverflow.com/users/6674235/james-steele"}, "is_accepted": true, "score": 2, "last_activity_date": 1558562945, "last_edit_date": 1558562945, "creation_date": 1558562245, "answer_id": 56265539, "question_id": 56265498, "link": "https://stackoverflow.com/questions/56265498/im-trying-to-sort-split-a-csv-in-python/56265539#56265539", "title": "I&#39;m trying to sort/split a csv in python", "body": "<p>if you have installed pandas, this will read the file and write out all rows with the same 'device_id' to a separate file with the name of the file being the 'device_id'.</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.read_csv('Data.csv')\n\nEDIT:\nfor id in df['device_id'].unique():\n    df[df['device_id'] == id].to_csv(f\"{id}.csv\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9302, "user_id": 8300135, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eaa9ded8087b3af42dd463c95696733?s=128&d=identicon&r=PG&f=1", "display_name": "SpghttCd", "link": "https://stackoverflow.com/users/8300135/spghttcd"}, "is_accepted": false, "score": 0, "last_activity_date": 1558585942, "creation_date": 1558585942, "answer_id": 56268103, "question_id": 56265498, "link": "https://stackoverflow.com/questions/56265498/im-trying-to-sort-split-a-csv-in-python/56268103#56268103", "title": "I&#39;m trying to sort/split a csv in python", "body": "<p>I think the most convenient way is to use pandas' <code>groupby</code>, because it provides both the unique id's and their corresponding sub dataframes:</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.read_csv('Data.csv')\n\nfor id, group in df.groupby('device_id'):\n      group.to_csv(f'{id}.csv')\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 11540716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52ee2ef1f4e030b2024e8cc86451a629?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick", "link": "https://stackoverflow.com/users/11540716/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 56265539, "answer_count": 2, "score": 1, "last_activity_date": 1558585942, "creation_date": 1558561918, "question_id": 56265498, "link": "https://stackoverflow.com/questions/56265498/im-trying-to-sort-split-a-csv-in-python", "title": "I&#39;m trying to sort/split a csv in python", "body": "<p>I got a .csv file with 18k lines of data from 11 different measuring devices. I'm trying to copy/write a file for each measuring devices so I can plot them later, get averages easier. However, with this code, I put together, scrambled together from YT tutorials and web sources the only thing that's being written in these files are the \"fieldnames\"/the names of the columns(whatever the right name for those things are. \nIt just stops after inserting the first line of the .csv instead of looking for the right value in each line and inserting it into the new .csv files</p>\n\n<p>I've tried to use a for loop which has 11 different if/elif conditions in it which I thought would filter the column of the device_id to the right device file. </p>\n\n<pre><code>import csv\nwith open('Data.csv', 'r') as Data_puntenOG:\n    Data_punten = csv.DictReader(Data_puntenOG)\n    for line in Data_punten:\n        if line['device_id'] == 'prototype01':\n            with open('HS361.csv', 'w') as HS361:        \n                csv_HS361 = csv.writer(HS361)\n                csv_HS361.writerow(line)\n        elif line['device_id'] == \"prototype02\":\n            with open('MinID8.csv', 'w') as MinID8:\n                csv_MinID8 = csv.writer(MinID8)\n                csv_MinID8.writerow(line)\n</code></pre>\n\n<p>and then 9 more of the same elif lines with different names/ conditions from prototype03 until prototype12 with the exception of 9, because that one was not in the .csv file</p>\n\n<p>11 files with only the first line of the .csv\n(id,device_id,measurement_type,measurement_value,timestamp)\ninstead of a large pile of lines with data from the .csv file</p>\n"}, {"tags": ["python", "bokeh"], "answers": [{"tags": [], "owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "is_accepted": false, "score": 0, "last_activity_date": 1558566424, "creation_date": 1558566424, "answer_id": 56266076, "question_id": 56265491, "link": "https://stackoverflow.com/questions/56265491/bokeh-unable-to-update-columndatasource-upon-change-in-dropdown-menu/56266076#56266076", "title": "Bokeh - unable to update ColumnDataSource upon change in dropdown menu", "body": "<p>The circles are not updating because you are not actually configuring the call to circle to use the source:</p>\n\n<pre><code>p.circle(x=source_error.data[\"base\"][i], y=sec, color=colors[i])\n</code></pre>\n\n<p>When you pass actual lists/arrays as <code>x</code>, <code>y</code>, etc, as you are doing above, then Bokeh creates a new CDS to use internally. If you want a glyph to utilize a source you pass in, you actually have to pass it in, and the coordinates should only refer to the column names of that source:</p>\n\n<pre><code>my_source = ColumnDataSource(data=dict(foo=[...], bar=[...]))\np.circle(x=\"foo\", y=\"bar\", source=my_source)\n</code></pre>\n\n<p>Additionally, the format of data in your CDS is not correct for this usage:</p>\n\n<pre><code>{'base': [[1, 2, 3, 4, 5, 6], [7, 8, 9, 10, 11, 12]]}\n</code></pre>\n\n<p>As the name suggests, the ColumnDataSource contains <em>columns</em>. The value of each column needs to be a <em>one-dimensional</em> array or list, not a list of lists as you have here (a handful of \"multi\"-glyphs accept this, but not circle, etc). I.e. you will need to have a separate column for every circle, not one column with \"sublists\" for each circle. </p>\n"}], "owner": {"reputation": 11, "user_id": 8383217, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-IaGvHpFDw3Y/AAAAAAAAAAI/AAAAAAAAAAA/i2hvz4WvpO0/photo.jpg?sz=128", "display_name": "jonathan erikson", "link": "https://stackoverflow.com/users/8383217/jonathan-erikson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 145, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558566424, "creation_date": 1558561865, "question_id": 56265491, "link": "https://stackoverflow.com/questions/56265491/bokeh-unable-to-update-columndatasource-upon-change-in-dropdown-menu", "title": "Bokeh - unable to update ColumnDataSource upon change in dropdown menu", "body": "<p>I'm having issues with updating an underlying ColumnDataSource when selecting a new value from a dropdown. In the \"update_data\" section, I am changing the values of the underlying ColumnDataSource for my plot.  The error bars get updated on the plot, but the plotted data does not change.  I've simplified the code below.  Any idea how to update all of the data, and not just the error bars?</p>\n\n<pre><code>from bokeh.layouts import row, column\nfrom bokeh.models import ColumnDataSource\nfrom bokeh.models.widgets import Slider, TextInput\nfrom bokeh.plotting import figure\nfrom bokeh.io import output_file, show\nfrom bokeh.models.widgets import Dropdown\nimport pandas as pd\nimport numpy as np\nfrom bokeh.io import output_file, show, curdoc\nfrom bokeh.layouts import row, column, widgetbox\nfrom bokeh.models import (\n    ColumnDataSource,\n    HoverTool,\n    LinearColorMapper,\n    BasicTicker,\n    PrintfTickFormatter,\n    ColorBar,\n    Legend,\n    Whisker,\n)\nfrom bokeh.models.widgets import PreText, Select, RadioGroup, TextInput\nfrom bokeh.plotting import figure\nfrom bokeh.transform import dodge, factor_cmap\nimport bokeh.plotting\nfrom bokeh.models import ColumnDataSource, CustomJS\nfrom bokeh.models.widgets import Button\nimport io\nimport base64\nimport random\nimport statistics as stat\nfrom bokeh.models.tickers import SingleIntervalTicker\nfrom bokeh.plotting import figure, show\n\n\n\n\ndef sectionize(df, rows, cols):\n    rowWise = df.stack()\n    colWise = df.transpose().stack()\n    rowData = []\n    colData = []\n    for x in rows:\n        rowData.append(list(rowWise[x]))\n    for x in range(1, (cols + 1)):\n        colData.append(list(colWise[x]))\n    print(\"sectionize has occured\")\n    return rowData, colData\n\ndef getLowerUpper(data):\n    lower, upper = [], []\n    for x in data:\n        if x:\n            mean = stat.mean(x)\n            std = stat.stdev(x)\n            lower.append(mean - std)\n            upper.append(mean + std)\n        else:\n            lower.append(0)\n            upper.append(0)\n    return lower, upper\n\ndef sectionizePlot(source, source_error, type, base):\n    print(\"sectionize plot created with typ: \" + type)\n    colors = []\n    for x in range(0, len(base)):\n        colors.append(getRandomColor())\n    title = type + \"-wise Intensity Distribution\"\n    p = figure(plot_width=600, plot_height=300, title=title)\n    p.add_layout(\n        Whisker(source=source_error, base=\"base\", upper=\"upper\", lower=\"lower\"))\n    for i, sec in enumerate(source.data['base']):\n        p.circle(x=source_error.data[\"base\"][i], y=sec, color=colors[i])\n    p.xaxis.axis_label = type\n    p.yaxis.axis_label = \"Intensity\"\n    if (type.split()[-1] == \"Row\"):\n        print(\"hit a row\")\n        conv = dict(enumerate(list(\"nABCDEFGHIJKLMNOP\")))\n        conv.pop(0)\n        p.xaxis.major_label_overrides = conv\n    p.xaxis.ticker = SingleIntervalTicker(interval=1)\n    print(\"sectionizePlot changed\")\n    return p\n\ndef getRandomColor():\n    colors = ['aqua', 'aquamarine', 'black', 'blue', 'blueviolet', 'brown', 'burlywood', 'cadetblue', 'chartreuse', 'chocolate',\n         'coral', 'cornflowerblue', 'crimson', 'cyan', 'darkblue', 'darkcyan', 'darkgoldenrod', 'darkgray', 'darkgreen',\n         'darkgrey', 'darkkhaki', 'darkmagenta', 'darkolivegreen', 'darkorange', 'darkorchid', 'darkred', 'darksalmon',\n         'darkseagreen', 'darkslateblue', 'darkslategray', 'darkslategrey', 'darkturquoise', 'darkviolet', 'deeppink',\n         'deepskyblue', 'dimgray', 'dimgrey', 'dodgerblue', 'firebrick', 'forestgreen', 'fuchsia', 'gold', 'goldenrod',\n         'gray', 'green', 'greenyellow', 'grey', 'hotpink', 'indianred', 'indigo', 'khaki', 'lavender', 'lawngreen', 'lime',\n         'limegreen', 'magenta', 'maroon', 'mediumaquamarine', 'mediumblue', 'mediumorchid', 'mediumpurple',\n         'mediumseagreen', 'mediumslateblue', 'mediumspringgreen', 'mediumturquoise', 'mediumvioletred', 'midnightblue',\n         'navy', 'olive', 'olivedrab', 'orange', 'orangered', 'orchid', 'peachpuff', 'peru', 'pink', 'plum', 'powderblue',\n         'purple', 'red', 'rosybrown', 'royalblue', 'saddlebrown', 'salmon', 'sandybrown', 'seagreen', 'sienna', 'silver',\n         'skyblue', 'slateblue', 'slategray', 'slategrey', 'springgreen', 'steelblue', 'tan', 'teal', 'thistle', 'tomato',\n              'turquoise', 'violet', 'yellow', 'yellowgreen']\n    return colors[random.randint(0, 101)]\n\n\ncolBase = list(range(1, 3))\ncolData = [[1,2,3,4,5,6], [7, 8, 9, 10, 11, 12]]\ncolData_lower, colData_upper = getLowerUpper(colData)\ncolSectTotSource = ColumnDataSource(data=dict(base=[]))\ncolSectTotSource_error = ColumnDataSource(data=dict(base=[], lower=[], upper=[]))\ncolSectTotSource.data = dict(base=colData)\ncolSectTotSource_error.data = dict(base=colBase, lower=colData_lower, upper=colData_upper)\n\nmenu = [(\"A\", \"A\"), (\"B\", \"B\")]\ndropdown = Dropdown(label=\"Dropdown button\", button_type=\"warning\", menu=menu)\ncolPlot = sectionizePlot(colSectTotSource, colSectTotSource_error, \"Column\", colBase)\n\ndef update_data(attrname, old, new):\n    d = dropdown.value\n    if(d == \"B\"):\n        colData = [[11,12,13,14,15,16], [17,18,19,20,21,22]]\n    else:\n        colData = [[1, 2, 3, 4, 5, 6], [7, 8, 9, 10, 11, 12]]\n\n    colData_lower, colData_upper = getLowerUpper(colData)\n    #colSectTotSource = ColumnDataSource(data=dict(base=[]))\n    colSectTotSource.data = dict(base=colData)\n    colSectTotSource_error.data = dict(base=colBase, lower=colData_lower, upper=colData_upper)\n\nfor w in [dropdown]:\n    w.on_change('value', update_data)\n\ninputs = column(dropdown)\ncurdoc().add_root(row(inputs, colPlot, width=800))\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1990, "user_id": 5775341, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/67f9c208584c05ef9918d544e0d4b95f?s=128&d=identicon&r=PG&f=1", "display_name": "quicklikerabbit", "link": "https://stackoverflow.com/users/5775341/quicklikerabbit"}, "edited": false, "score": 1, "creation_date": 1558562393, "post_id": 56265487, "comment_id": 99147382, "body": "Can you share with us what you have tried so far?"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7051585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/873d9e5a9d4c4cfc8b4422468b893d04?s=128&d=identicon&r=PG&f=1", "display_name": "Abhay", "link": "https://stackoverflow.com/users/7051585/abhay"}, "edited": false, "score": 0, "creation_date": 1558589727, "post_id": 56265753, "comment_id": 99152500, "body": "thank you for your reply. but I got this error NameError: name &#39;nrows&#39; is not defined"}, {"owner": {"reputation": 186, "user_id": 11011236, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213388968780557/picture?type=large", "display_name": "Andrew Bowling", "link": "https://stackoverflow.com/users/11011236/andrew-bowling"}, "reply_to_user": {"reputation": 1, "user_id": 7051585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/873d9e5a9d4c4cfc8b4422468b893d04?s=128&d=identicon&r=PG&f=1", "display_name": "Abhay", "link": "https://stackoverflow.com/users/7051585/abhay"}, "edited": false, "score": 0, "creation_date": 1558644843, "post_id": 56265753, "comment_id": 99179537, "body": "Apologies - I forgot to actually import the excel sheet as an object (so I couldn&#39;t use the nrows or cell methods). I&#39;ve edited the code. Let me know if it works!"}], "tags": [], "owner": {"reputation": 186, "user_id": 11011236, "user_type": "registered", "profile_image": "https://graph.facebook.com/10213388968780557/picture?type=large", "display_name": "Andrew Bowling", "link": "https://stackoverflow.com/users/11011236/andrew-bowling"}, "is_accepted": true, "score": 0, "last_activity_date": 1558644792, "last_edit_date": 1558644792, "creation_date": 1558563838, "answer_id": 56265753, "question_id": 56265487, "link": "https://stackoverflow.com/questions/56265487/search-exel-sheet-for-specific-value-and-return-corresponding-cell-value-with-py/56265753#56265753", "title": "Search exel sheet for specific value and return corresponding cell value with python", "body": "<p>Try using the xlrd library, and iterate through the rows.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import xlrd \n\nfilepath = r'C:\\Desktop\\example.xlsx'\ntextstring = \"foo\"\nwb = xlrd.openworkbook(filepath)\nws = wb.sheet_by_index(0)\n\nfor row in range(ws.nrows):\n     target = str(ws.cell(row, 0).value)\n     if target == textstring:\n          print(target)\n          print(row)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7051585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/873d9e5a9d4c4cfc8b4422468b893d04?s=128&d=identicon&r=PG&f=1", "display_name": "Abhay", "link": "https://stackoverflow.com/users/7051585/abhay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 56265753, "answer_count": 1, "score": 0, "last_activity_date": 1558644792, "creation_date": 1558561845, "question_id": 56265487, "link": "https://stackoverflow.com/questions/56265487/search-exel-sheet-for-specific-value-and-return-corresponding-cell-value-with-py", "title": "Search exel sheet for specific value and return corresponding cell value with python", "body": "<p>I have an exel file, I need to search only column \"A\" in the Excel sheet until it matches a text string. When the script finds that match, I would like to see the corresponding cell value.Thanks for your helps in advance!</p>\n"}, {"tags": ["python", "apache-spark", "pyspark", "window-functions", "ranking"], "comments": [{"owner": {"reputation": 22506, "user_id": 7579547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e064cb6036830f4883abb0450f6afd7e?s=128&d=identicon&r=PG", "display_name": "Shaido", "link": "https://stackoverflow.com/users/7579547/shaido"}, "edited": false, "score": 0, "creation_date": 1558592313, "post_id": 56265467, "comment_id": 99153322, "body": "I think it&#39;s necessary to have two separate passes through the data as you suggested."}, {"owner": {"reputation": 1382, "user_id": 1857125, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/247ee5061b93a3cfd724b862e6a0590f?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/1857125/kenny"}, "reply_to_user": {"reputation": 22506, "user_id": 7579547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e064cb6036830f4883abb0450f6afd7e?s=128&d=identicon&r=PG", "display_name": "Shaido", "link": "https://stackoverflow.com/users/7579547/shaido"}, "edited": false, "score": 0, "creation_date": 1558617199, "post_id": 56265467, "comment_id": 99166440, "body": "Is there a ranking operation that combine the two. As far as I see it, it&#39;s like the combination of normal rank and <b>dense_rank</b>, only that this <b>dense_rank</b> use the result of normal ranking. My dataset is huge and this operation is repeated for every feature, I would want to optimize as much as possible. Doing 2 times sort seems costly."}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1558619022, "post_id": 56265467, "comment_id": 99167561, "body": "@Kenny do you want both <code>colA_rank</code> and <code>colA_rank_mean</code> in the output?"}, {"owner": {"reputation": 1382, "user_id": 1857125, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/247ee5061b93a3cfd724b862e6a0590f?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/1857125/kenny"}, "reply_to_user": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1558619976, "post_id": 56265467, "comment_id": 99168131, "body": "Nope, @pault. I can afford to lose <b>colA_rank</b>. Final <b>colA_rank_mean</b> is good enough."}, {"owner": {"reputation": 1382, "user_id": 1857125, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/247ee5061b93a3cfd724b862e6a0590f?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/1857125/kenny"}, "edited": false, "score": 0, "creation_date": 1558620381, "post_id": 56265467, "comment_id": 99168401, "body": "While we&#39;re at it, just a passing thought if we have to keep multiple passes. Do you think the following approach is more efficient, although it seems more steps :  1/ <b>colA_rank</b>, then 2/ <b>colA_dense_rank</b>, then 3/ instead of <b>partitionBy(&quot;colA&quot;)</b>, use partition by <b>colA_dense_rank</b>. My theory is that dense_rank at this time would be integer-based, hence less costly for partitionBy(&quot;an-integer-column&quot;), than sort and partitionBy(&quot;a-column-with-decimal-precision&quot;) ?"}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1558620872, "post_id": 56265467, "comment_id": 99168677, "body": "I&#39;m not sure if I fully understand what  you&#39;re trying to do. Why isn&#39;t dense rank sufficient for you? Why are the last five entries in <code>colA_rank_mean</code> all the same value (<code>11</code>)? I think it would be helpful if you could explain why you&#39;re doing this as well- there may be alternative methods."}, {"owner": {"reputation": 1382, "user_id": 1857125, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/247ee5061b93a3cfd724b862e6a0590f?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/1857125/kenny"}, "edited": false, "score": 0, "creation_date": 1558623667, "post_id": 56265467, "comment_id": 99170401, "body": "For ties, I am taking the mean of the normal rank, instead of assigning the <b>dense_rank</b>. Ties for value 9 has rank 2, 3, so mean rank is 2.5. Ties for 0 have ranks from 9-13, hence mean rank is 11. This is trying to replicate the strange ranking process in SAS. Don&#39;t ask me why SAS did it that way. It&#39;s always a mystery :)"}, {"owner": {"reputation": 1382, "user_id": 1857125, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/247ee5061b93a3cfd724b862e6a0590f?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/1857125/kenny"}, "edited": false, "score": 0, "creation_date": 1559322105, "post_id": 56265467, "comment_id": 99396647, "body": "Any comments on the solution ?"}], "owner": {"reputation": 1382, "user_id": 1857125, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/247ee5061b93a3cfd724b862e6a0590f?s=128&d=identicon&r=PG", "display_name": "Kenny", "link": "https://stackoverflow.com/users/1857125/kenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1558596448, "creation_date": 1558561673, "last_edit_date": 1558596448, "question_id": 56265467, "link": "https://stackoverflow.com/questions/56265467/pyspark-ranking-column-replacing-ranking-of-ties-by-mean-of-rank", "title": "Pyspark - ranking column replacing ranking of ties by Mean of rank", "body": "<p>Consider a data set with ranking</p>\n\n<pre><code> +--------+----+-----------+--------------+\n |    colA|colB|colA_rank  |colA_rank_mean|\n +--------+----+-----------+--------------+\n |      21|  50|          1|             1|\n |       9|  23|          2|           2.5|\n |       9|  21|          3|           2.5|\n |       8|  21|          4|             3|        \n |       2|  21|          5|           5.5|      \n |       2|   5|          6|           5.5|       \n |       1|   5|          7|           7.5|     \n |       1|   4|          8|           7.5|     \n |       0|   4|          9|            11|    \n |       0|   3|         10|            11|  \n |       0|   3|         11|            11| \n |       0|   2|         12|            11|\n |       0|   2|         13|            11|\n +--------+----+-----------+--------------+\n</code></pre>\n\n<p><code>colA_rank</code> is a normal ranking, while with <code>colA_rank_mean</code> I would like to resolve ties by replacing the ranking with the mean rank of the ties. Is it achievable with a single pass and some particular ranking method ?</p>\n\n<p>Currently I am thinking of 2 passes but that would seem to require ordering the dataset twice on <code>colA</code>, one without partition and one with partition. </p>\n\n<pre><code>#Step 1: normal rank\ndf = df.withColumn(\"colA_rank\",F.row_number().over(Window.orderBy(\"colA\")))\n#Step 2 : solve ties :\ndf = df.withColumn(\"colA_rank_mean\",F.mean(colA_rank).over(Window.partitionBy(\"colA\"))\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 21991, "user_id": 75103, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/7dfc20ceb7d6e1686d9be8f68469afa7?s=128&d=identicon&r=PG", "display_name": "thebjorn", "link": "https://stackoverflow.com/users/75103/thebjorn"}, "edited": false, "score": 0, "creation_date": 1558561766, "post_id": 56265434, "comment_id": 99147211, "body": "You haven&#39;t defined the <code>icsfile</code> variable. (you really ought to provide the entire traceback!)"}], "answers": [{"tags": [], "owner": {"reputation": 1952, "user_id": 10065049, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NTJEi.png?s=128&g=1", "display_name": "Stevy", "link": "https://stackoverflow.com/users/10065049/stevy"}, "is_accepted": true, "score": 0, "last_activity_date": 1558563579, "creation_date": 1558563579, "answer_id": 56265719, "question_id": 56265434, "link": "https://stackoverflow.com/questions/56265434/upload-a-file-and-then-display-contents-django/56265719#56265719", "title": "Upload a file and then display contents, django", "body": "<p>You defined the file as <code>myfile</code></p>\n\n<p>Try replacing</p>\n\n<pre><code>filename = fs.save(icsfile.name, icsfile)\n</code></pre>\n\n<p>With</p>\n\n<pre><code>filename = fs.save(myfile.name, icsfile)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8637557, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-sTy5cRdLHjE/AAAAAAAAAAI/AAAAAAAADQ8/zKWkE9ORFRE/photo.jpg?sz=128", "display_name": "Elma", "link": "https://stackoverflow.com/users/8637557/elma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 56265719, "answer_count": 1, "score": 1, "last_activity_date": 1558563579, "creation_date": 1558561483, "question_id": 56265434, "link": "https://stackoverflow.com/questions/56265434/upload-a-file-and-then-display-contents-django", "title": "Upload a file and then display contents, django", "body": "<p>I will preface this by noting I'm a python beginner.</p>\n\n<p>I'm trying to build a very simple app where the user uploads an ics file, and upon submit, the file is parsed and the app displays the contents in a legible format. </p>\n\n<p>I'm trying to use FileSystemStorage(), but I can't seem to set it up correctly. </p>\n\n<p>This is what my views.py and template looks like. </p>\n\n<pre><code># views.py\n\nfrom django.core.files.storage import FileSystemStorage\nfrom django.views.decorators.clickjacking import xframe_options_exempt\nfrom icalendar import Calendar, Event\nfrom pytz import UTC\n\n\n@xframe_options_exempt\ndef index(request):\n    if request.method == 'POST' and request.FILES['icsfile']:\n        myfile = request.FILES['icsfile']\n        fs = FileSystemStorage()\n        filename = fs.save(icsfile.name, icsfile)\n        uploaded_file_url = fs.url(filename)\n        g = open(uploaded_file_url, 'rb')\n        gcal = Calendar.from_ical(g.read())\n        for component in gcal.walk():\n            if component.name == \"VEVENT\":\n                summary = component.get('summary')\n                description = component.get('description')\n                start_time = component.get('dtstart')\n                end_time = component.get('dtend')\n        g.close()\n\n        return render(request, 'ics_parser/index.html', {\n            'uploaded_file_url': uploaded_file_url,\n            'summary': summary,\n            'description': description,\n            'dtstart': dtstart,\n            'dtend': dtend,\n        })\n    return render(request, 'ics_parser/index.html', {})\n\n\n# index.html\n\n &lt;div class=\"ics-formatter\"&gt;&lt;/div&gt;\n    &lt;div class=\"row\"&gt;\n        &lt;div class=\"col-sm-6\"&gt;\n            &lt;form method=\"post\" enctype=\"multipart/form-data\"&gt;\n                {% csrf_token %}\n                &lt;input type=\"file\" name=\"icsfile\"&gt;\n                &lt;button type=\"submit\"&gt;Upload&lt;/button&gt;\n            &lt;/form&gt;\n        &lt;/div&gt;\n        &lt;div class=\"col-sm-6\"&gt;\n            {% if uploaded_file_url %}\n            &lt;p&gt;{{description}}&lt;/p&gt;\n            {% endif %}\n        &lt;/div&gt;\n    &lt;/div&gt;\n\n\n</code></pre>\n\n<p>This is the error I'm getting: </p>\n\n<p>Exception Type: NameError\nException Value:<br>\nname 'icsfile' is not defined</p>\n"}, {"tags": ["python", "python-3.x"], "answers": [{"tags": [], "owner": {"reputation": 472, "user_id": 2360257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b0a0c3c2730a12e8a33895f7a9a53e1?s=128&d=identicon&r=PG", "display_name": "mway", "link": "https://stackoverflow.com/users/2360257/mway"}, "is_accepted": false, "score": 3, "last_activity_date": 1558561965, "creation_date": 1558561965, "answer_id": 56265502, "question_id": 56265401, "link": "https://stackoverflow.com/questions/56265401/python3-os-rename-wont-rename-files-with-the-word-copy-in-name/56265502#56265502", "title": "python3 os.rename() won&#39;t rename files with the word &#39;Copy&#39; in name", "body": "<p>You're only assigning <code>directory</code> once. You need to update it by calling <code>listdir</code> again.</p>\n\n<pre><code>directory = os.listdir(os.getcwd())\n\n\nfor i in directory:\n    if not \"py\" in i:   #so it won't rename this file\n        os.rename(i, str(how_many_digits(4)) + str(os.path.splitext(i)[1]))\n\nupdated_directory = os.listdir(os.getcwd()) # NEW\n\nfor i in updated_directory:\n    print(i)  #why does this print the old names instead of the new ones?!!\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 46136, "user_id": 3890632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hNkgF.png?s=128&g=1", "display_name": "khelwood", "link": "https://stackoverflow.com/users/3890632/khelwood"}, "is_accepted": false, "score": 12, "last_activity_date": 1558562156, "creation_date": 1558562156, "answer_id": 56265527, "question_id": 56265401, "link": "https://stackoverflow.com/questions/56265401/python3-os-rename-wont-rename-files-with-the-word-copy-in-name/56265527#56265527", "title": "python3 os.rename() won&#39;t rename files with the word &#39;Copy&#39; in name", "body": "<p>It won't rename files with <code>Copy</code> in the name because of this check:</p>\n\n<pre><code>if not \"py\" in i:   #so it won't rename this file\n</code></pre>\n\n<p>If <code>Copy</code> is in the name, then <code>py</code> is in the name.</p>\n\n<p>Maybe you should have</p>\n\n<pre><code>if not i.endswith('.py'):\n</code></pre>\n\n<p>instead.</p>\n\n<p>If you want an updated directory listing, you have to call <code>listdir</code> again.</p>\n\n<pre><code>directory = os.listdir(os.getcwd()) # get updated contents\n\nfor i in directory:\n    print(i)  \n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 5661621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nOOck.jpg?s=128&g=1", "display_name": "xSabotagex", "link": "https://stackoverflow.com/users/5661621/xsabotagex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1558563414, "creation_date": 1558561288, "last_edit_date": 1558563414, "question_id": 56265401, "link": "https://stackoverflow.com/questions/56265401/python3-os-rename-wont-rename-files-with-the-word-copy-in-name", "title": "python3 os.rename() won&#39;t rename files with the word &#39;Copy&#39; in name", "body": "<p>I'm trying to rename a bunch of files in one of my folders using python 3.7.3 and it won't rename the ones that have the word \"Copy\" in them.. it also prints the old file names for the ones it does rename after renaming them!!</p>\n\n<p>I thought it was because they had white spaces or hyphens or letters in them so I added some to other files' names but it did rename them.. for example: it would rename:</p>\n\n<pre><code>'10 60'\n'54 - 05'\n'9200 d' \n</code></pre>\n\n<p>but it won't rename:</p>\n\n<p>'7527 Copy' </p>\n\n<p>this is one of the file names I started with that it won't rename (just to be extra clear): </p>\n\n<pre><code>'6576348885058201279439757037938886093203209992672224485458953892 - Copy'\n</code></pre>\n\n<p>Here's my code:</p>\n\n<pre><code>import os\nfrom random import randint\n\ndef how_many_digits(n):\n    range_start = 10**(n-1)\n    range_end = (10**n)-1\n    return randint(range_start, range_end)\n\n\ndirectory = os.listdir(os.getcwd())\n\n\nfor i in directory:\n    if not \"py\" in i:   #so it won't rename this file\n        os.rename(i, str(how_many_digits(4)) + str(os.path.splitext(i)[1]))\n\n\nfor i in directory:\n    print(i)  #why does this print the old names instead of the new ones?!!\n</code></pre>\n\n<p>EDIT: this is my first question ever on here and I have no idea what I'm doing so bear with me</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1558561296, "post_id": 56265381, "comment_id": 99147096, "body": "<code>df.drop(df.z.diff().le(0))</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": false, "score": 1, "last_activity_date": 1558562537, "creation_date": 1558562537, "answer_id": 56265573, "question_id": 56265381, "link": "https://stackoverflow.com/questions/56265381/cutting-every-nth-row-in-dataframe-in-python/56265573#56265573", "title": "Cutting every nth row in dataframe in Python", "body": "<p>Try:</p>\n\n<pre><code>df[~(df.z.diff(-1) &lt; 0)]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   x   y     z\n0  1  10  20.0\n1  2  10  18.0\n2  3  11  16.5\n4  5  12  23.0\n5  6  11  21.0\n7  8  10  26.0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1558569675, "post_id": 56265744, "comment_id": 99148941, "body": "Check your output.  I think the 19 should be eliminated."}], "tags": [], "owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "is_accepted": true, "score": 2, "last_activity_date": 1558563793, "creation_date": 1558563793, "answer_id": 56265744, "question_id": 56265381, "link": "https://stackoverflow.com/questions/56265381/cutting-every-nth-row-in-dataframe-in-python/56265744#56265744", "title": "Cutting every nth row in dataframe in Python", "body": "<p>We can use <code>shift</code> to look one row back and take the reverse with <code>~</code>:</p>\n\n<pre><code>df[~(df['z'].shift() &lt; df['z'])]\n\n   x   y     z\n0  1  10  20.0\n1  2  10  18.0\n2  3  11  16.5\n3  4  11  12.0\n5  6  11  21.0\n6  7  10  19.0\n</code></pre>\n"}], "owner": {"reputation": 1553, "user_id": 8378885, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/10159144384065441/picture?type=large", "display_name": "HelloToEarth", "link": "https://stackoverflow.com/users/8378885/hellotoearth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 56265744, "answer_count": 2, "score": -1, "last_activity_date": 1558563793, "creation_date": 1558561199, "question_id": 56265381, "link": "https://stackoverflow.com/questions/56265381/cutting-every-nth-row-in-dataframe-in-python", "title": "Cutting every nth row in dataframe in Python", "body": "<p>I have a dataframe with columns like so:</p>\n\n<pre><code>x   y   z\n1   10  20\n2   10  18\n3   11  16.5\n4   11  12\n5   12  23\n6   11  21\n7   10  19\n8   10  26\n.\n.\n</code></pre>\n\n<p>Every time z_n+1 is greater than z_n I want to cut that z_n.</p>\n\n<p>The output would be:</p>\n\n<pre><code>x   y   z\n1   10  20\n2   10  18\n3   11  16.5\n5   12  23\n6   11  21\n8   10  26\n.\n.\n</code></pre>\n\n<p>It doesn't occur every x-many times - the index of each change from smaller to larger z_n is not 'regular'.</p>\n\n<p>Is there an easy way to do this?</p>\n"}, {"tags": ["python", "ctypes"], "comments": [{"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1558587370, "post_id": 56265380, "comment_id": 99151944, "body": "What line is the error?  Provide the traceback.  Also what how is <code>zk</code> declared?  You don&#39;t have to wrap your byte strings in <code>c_char_p</code>.  Declaring the <code>argtypes</code> wil handle that, so <code>zk.SetDeviceData(handler,b&#39;user&#39;,&#39;pin=999\\t...2010523&#39;,b&#39;&#39;)</code> should be fine.  <code>options</code>, since blank, might be <code>None</code> if <code>NULL</code> is allowed in the C API."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1558587692, "post_id": 56265380, "comment_id": 99152008, "body": "Also, delete the <code>try&#47;except</code> to see the full traceback."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1558587760, "post_id": 56265380, "comment_id": 99152025, "body": "What are the full C declarations of all three function?"}, {"owner": {"reputation": 57, "user_id": 10328222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/74VKW.png?s=128&g=1", "display_name": "Erick Y. Carreno", "link": "https://stackoverflow.com/users/10328222/erick-y-carreno"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1558621795, "post_id": 56265380, "comment_id": 99169273, "body": "I&#39;ve added the traceback and the rest of the DLL functions to the main post(All the info i have on the functions are what I posted and a brief explanation of the parameters). zk is loaded on the first line with <code>windll</code>(i&#39;ve also tried with <code>cdll</code> as some other people have used).This line gives the error <code>zk.SetDeviceData(handler,table,user,options)</code>"}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1558643056, "post_id": 56265380, "comment_id": 99178808, "body": "On 64-bit, cdll/windll don&#39;t matter, but if using 32-bit Python only use windll if the function is declared __stdcall calling convention.  Why does the C definition of <code>Connect</code> return an <code>int</code> but <code>Disconnect</code> take a <code>HANDLE</code>?  That&#39;s not how the Python code declares it so I assume a typo?  Otherwise the code looks correct.  Oh, and <code>zk.Disconnect.restypes = None</code> not <code>c_void_p</code>. Does passing <i>the same</i> parameters in C code work correctly?"}, {"owner": {"reputation": 57, "user_id": 10328222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/74VKW.png?s=128&g=1", "display_name": "Erick Y. Carreno", "link": "https://stackoverflow.com/users/10328222/erick-y-carreno"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1558645224, "post_id": 56265380, "comment_id": 99179698, "body": "On the documentation it does return an <code>int</code>, on another post someone had mentioned setting restpye to <code>HANDLER</code>, i changed it back but the problem continues. I have the code working on C#:          <code>public static extern IntPtr Connect(string ConnectHandler);                             public static extern int SetDeviceData(IntPtr id, string table, string data, string options);                                  public static extern int DeleteDeviceData(IntPtr id, string table, string data, string options);</code>. I havent tried on C."}, {"owner": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1558649309, "post_id": 56265380, "comment_id": 99180996, "body": "<code>int</code> and <code>HANDLE</code> aren&#39;t the same size on 64-bit Python.  That could be the root of the problem.  Your C# code uses IntPtr for the Connect return and as input to the other functions, which agrees."}, {"owner": {"reputation": 57, "user_id": 10328222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/74VKW.png?s=128&g=1", "display_name": "Erick Y. Carreno", "link": "https://stackoverflow.com/users/10328222/erick-y-carreno"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1558649867, "post_id": 56265380, "comment_id": 99181136, "body": "I just tried changing both the argtypes and the connect restype to both int and Handle, also i have found a bit of code from some software running in python 2.6 that doesnt seem to set the argtypes and restypes: <code>def update_data(self, table, data, options):         ptable = create_string_buffer(table)         str_buf = create_string_buffer(data)          ret = self.commpro.SetDeviceData(self.hcommpro, ptable, str_buf, options)          del ptable         del str_buf         return {&#39;result&#39;: ret, &#39;data&#39;: &#39;&#39;}</code>"}, {"owner": {"reputation": 57, "user_id": 10328222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/74VKW.png?s=128&g=1", "display_name": "Erick Y. Carreno", "link": "https://stackoverflow.com/users/10328222/erick-y-carreno"}, "reply_to_user": {"reputation": 131156, "user_id": 235698, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KjvlE.png?s=128&g=1", "display_name": "Mark Tolonen", "link": "https://stackoverflow.com/users/235698/mark-tolonen"}, "edited": false, "score": 0, "creation_date": 1558728647, "post_id": 56265380, "comment_id": 99210257, "body": "I ran the same code in Python 2.6.6 and it worked without a problem, not sure what changed specifically that caused this issue"}], "answers": [{"tags": [], "owner": {"reputation": 57, "user_id": 10328222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/74VKW.png?s=128&g=1", "display_name": "Erick Y. Carreno", "link": "https://stackoverflow.com/users/10328222/erick-y-carreno"}, "is_accepted": true, "score": 0, "last_activity_date": 1608074839, "creation_date": 1608074839, "answer_id": 65315144, "question_id": 56265380, "link": "https://stackoverflow.com/questions/56265380/python-access-violation-writing-using-zkteco-sdk/65315144#65315144", "title": "Python Access Violation Writing using ZKteco SDK", "body": "<p>It seems that there were some issues with how the <code>handle</code> was being generated on python 3.7 .</p>\n<p>I tested other versions and it seems that after version 3.5 the error occurs, any version below that seems to work as intended.</p>\n"}], "owner": {"reputation": 57, "user_id": 10328222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/74VKW.png?s=128&g=1", "display_name": "Erick Y. Carreno", "link": "https://stackoverflow.com/users/10328222/erick-y-carreno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 65315144, "answer_count": 1, "score": 0, "last_activity_date": 1608074839, "creation_date": 1558561198, "last_edit_date": 1558621317, "question_id": 56265380, "link": "https://stackoverflow.com/questions/56265380/python-access-violation-writing-using-zkteco-sdk", "title": "Python Access Violation Writing using ZKteco SDK", "body": "<p>I've been trying to set some data to a device using the SDK provided by the manufacturer(ZKTECO). Some functions such as connecting, disconnecting, modifying IP address work without any issues but when I try to update data to an internal table I get the following error: <code>exception: access violation writing 0x000000000205A040</code>. From what I have researched the most common issue has to do with setting the proper <em>argtypes</em> and <em>restypes</em>, which I have applied to my understanding. As extra information im using python 3.7 along with Windows 10 pro 64-bit.</p>\n\n<p>Function from document:</p>\n\n<pre><code>int SetDeviceData(HANDLE handle,const char *TableName, const char *Data, const char *Options)\n\nint Connect(const char *Parameters)\n\nVoid Disconnect(HANDLE handle)\n</code></pre>\n\n<p>Code I have so far:</p>\n\n<pre><code>import ctypes\nfrom ctypes import cdll, windll, create_string_buffer, c_char_p, c_void_p\nfrom ctypes.wintypes import HANDLE\n\nzk = windll.LoadLibrary(\"C:/Windows/System32/plcommpro.dll\")\n\nzk.Connect.argtypes = [c_char_p]\nzk.Connect.restype = HANDLE\n\nzk.SetDeviceData.argtypes = (HANDLE, c_char_p, c_char_p, c_char_p)\nzk.SetDeviceData.restypes = ctypes.c_int\n\nzk.Disconnect.argtypes = [HANDLE]\nzk.Disconnect.restypes = c_void_p\n\n\nparams = b\"protocol=TCP,ipaddress=192.168.100.178,port=4370,timeout=2000,passwd=\"\nparams_buf = c_char_p(params)\n\nhandler = zk.Connect(params_buf)\n\nstring = \"Handler is: {0}\\n\".format(handler)\nprint(string)\n\n\ntry:\n    table = b\"user\"\n    data = b\"Pin=9999\\tPassword=1793\\tName=Test\\tStartTime=20190522\\tEndTime=2010523\"\n    options = b\"\"\n\n    table_buf = c_char_p(table)\n    data_buf = c_char_p(data)\n\n    ret = zk.SetDeviceData(handler, table_buf, data_buf, options)\n\n    del table_buf\n    del data_buf\n\n    result = \"Result: {0}\".format(ret)\n    print(result)\n\nexcept Exception as e:\n    print(e)\n\nzk.Disconnect(handler)\n</code></pre>\n\n<p>TraceBack:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"tmpdll.py\", line 35, in &lt;module&gt;\n    ret = zk.SetDeviceData(handler, table, data, options)\nOSError: exception: access violation writing 0x000000005EF65040\n</code></pre>\n"}, {"tags": ["python", "django", "django-queryset"], "comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 1, "creation_date": 1558561272, "post_id": 56265364, "comment_id": 99147084, "body": "You should use a different order, so <code>Settings.objects.values_list(&#39;bb_bonus_qualify&#39;, flat=True).last()</code>, but probably I do not understand it properly."}, {"owner": {"reputation": 1059, "user_id": 10796680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rgfvm.jpg?s=128&g=1", "display_name": "David Alford", "link": "https://stackoverflow.com/users/10796680/david-alford"}, "reply_to_user": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "edited": false, "score": 0, "creation_date": 1558561376, "post_id": 56265364, "comment_id": 99147119, "body": "That worked. I found it all in <a href=\"https://docs.djangoproject.com/en/2.2/ref/models/querysets/#values-list\" rel=\"nofollow noreferrer\">docs</a>! Thank you!"}], "answers": [{"comments": [{"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 1059, "user_id": 10796680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rgfvm.jpg?s=128&g=1", "display_name": "David Alford", "link": "https://stackoverflow.com/users/10796680/david-alford"}, "edited": false, "score": 0, "creation_date": 1558563220, "post_id": 56265449, "comment_id": 99147612, "body": "@DavidAlford: are you sure?  I&#39;ve tested this with a <code>QuerySet</code> with one element, and it looked ok."}, {"owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "reply_to_user": {"reputation": 1059, "user_id": 10796680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rgfvm.jpg?s=128&g=1", "display_name": "David Alford", "link": "https://stackoverflow.com/users/10796680/david-alford"}, "edited": false, "score": 0, "creation_date": 1558563534, "post_id": 56265449, "comment_id": 99147685, "body": "@DavidAlford: the <code>__str__</code> method normally does not change anything, but I can not reproduce your problem locally anyway."}], "tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 3, "last_activity_date": 1558561571, "creation_date": 1558561571, "answer_id": 56265449, "question_id": 56265364, "link": "https://stackoverflow.com/questions/56265364/how-to-retrieve-value-from-queryset-in-django/56265449#56265449", "title": "How to retrieve value from queryset in django?", "body": "<p>The problem here is that your <code>.last()</code> will retrieve the <em>last</em> <code>Settings</code> object. You thus will call <code>.values('bb_bonus')</code> on the <code>Settings</code> object. Since a model has no <code>.values(..)</code> method, it will thus not return anything.</p>\n\n<p>You can however retrieve the value of a certain column from a queryset, with:</p>\n\n<pre><code>Settings.objects<b>.values_list('bb_bonus_qualify', flat=True)</b>.last()</code></pre>\n\n<p>We here thus use <a href=\"https://docs.djangoproject.com/en/dev/ref/models/querysets/#values-list\" rel=\"nofollow noreferrer\"><strong><code>.values_list(..)</code></strong> [Django-doc]</a>, this accepts the names of the columns as parameters. It will then usually return a <code>QuerySet</code> of lists with these values. But if you specify <em>one</em> column; then, as the documentation says:</p>\n\n<blockquote>\n  <p>If you only pass in a single field, you can also pass in the <code>flat</code> parameter. If <strong><code>True</code>, this will mean the returned results are single values</strong>, rather than one-tuples.</p>\n</blockquote>\n\n<p>So that means we create a <code>QuerySet</code> of singular values, and we then will retrieve the last entry of that queryset. Note that we do <em>not</em> fetch all the elements from the queryset, the <code>.last()</code> is \"injected\" in the query we perform on the database, so the result is the scalar value of that column for the last record.</p>\n\n<p>The <code>.values_list(..)</code> thus needs to be performed <em>before</em> the <code>.last()</code>, since otherwise you are talking to a <code>Settings</code> object, not to a <code>QuerySet</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 48006, "user_id": 96588, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/425fed56a46504d37ec907d99b09ecde?s=128&d=identicon&r=PG", "display_name": "l0b0", "link": "https://stackoverflow.com/users/96588/l0b0"}, "is_accepted": false, "score": 1, "last_activity_date": 1558561573, "creation_date": 1558561573, "answer_id": 56265450, "question_id": 56265364, "link": "https://stackoverflow.com/questions/56265364/how-to-retrieve-value-from-queryset-in-django/56265450#56265450", "title": "How to retrieve value from queryset in django?", "body": "<p>AFAIK <code>__str__</code> has nothing to do with <code>.values()</code> - the problem here is that you need to specify the values <em>before</em> getting a specific item, rather than the other way round:</p>\n\n<pre><code>Settings.objects.values('bb_bonus').last()\n</code></pre>\n"}], "owner": {"reputation": 1059, "user_id": 10796680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rgfvm.jpg?s=128&g=1", "display_name": "David Alford", "link": "https://stackoverflow.com/users/10796680/david-alford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3277, "favorite_count": 1, "accepted_answer_id": 56265449, "answer_count": 2, "score": 4, "last_activity_date": 1607120930, "creation_date": 1558561111, "last_edit_date": 1607120930, "question_id": 56265364, "link": "https://stackoverflow.com/questions/56265364/how-to-retrieve-value-from-queryset-in-django", "title": "How to retrieve value from queryset in django?", "body": "<p>I am trying to retrieve different <code>.values()</code> from query sets but am having an issue with it returning the proper values. How to write my <code>model</code> so that I can retrieve attributes using the <code>.values()</code> method?</p>\n\n<p>I have tried to change the model's <code>__str__</code> method to return a dictionary but that does not work or I am doing it wrong.</p>\n\n<pre><code>class Settings(models.Model):\n    bb_bonus_qualify = models.CharField(max_length=16, default=38.00)\n    service_breakpoint = models.CharField(max_length=16, default=1700.00)\n\n    def __str__(self):\n        return '%s: %s, %s: %s' % (\n            'bb_bonus', self.bb_bonus_qualify, 'service_breakpoint', self.service_breakpoint)\n</code></pre>\n\n<p>I would like to say <code>Settings.objects.last().values('bb_bonus')</code> and be returned the value which is <code>self.bb_bonus_qualify</code>. The common error I seem to get is: <code>AttributeError: 'Settings' object has no attribute 'values'</code></p>\n"}, {"tags": ["python", "shell", "parallel-processing"], "comments": [{"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1558561524, "post_id": 56265352, "comment_id": 99147162, "body": "How could Python make it single-threaded? The GIL is an internal attribute of the Python interpreter. Subprocesses are across a process boundary; they&#39;re completely unaffected."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1558561593, "post_id": 56265352, "comment_id": 99147178, "body": "(I also wouldn&#39;t call a go executable a &quot;shell command&quot; at all; if you&#39;re doing it right, with <code>shell=False</code>, there&#39;s no shell involved anywhere, just the Python interpreter <code>fork()</code>ing itself and <code>execve()</code>ing the Go program -- and even if you&#39;re doing it wrong and using <code>shell=True</code>, the shell that the Python interpreter <code>fork()</code>s and <code>exec()</code>s is just <code>fork()</code>ing off a copy of <i>itself</i> and using <code>execve()</code> to replace that copy with the Go executable&#39;s process image)."}], "answers": [{"comments": [{"owner": {"reputation": 174, "user_id": 1328232, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5f006e84f89c80697cbe879aa3f30e22?s=128&d=identicon&r=PG", "display_name": "Chintan Pathak", "link": "https://stackoverflow.com/users/1328232/chintan-pathak"}, "edited": false, "score": 0, "creation_date": 1558659709, "post_id": 56265423, "comment_id": 99182925, "body": "I was able to test that the subprocess runs in parallel if it wants to."}], "tags": [], "owner": {"reputation": 36, "user_id": 11541747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b714fe2d33e8bf9b061e4135e4559fa?s=128&d=identicon&r=PG&f=1", "display_name": "tsuyoku", "link": "https://stackoverflow.com/users/11541747/tsuyoku"}, "is_accepted": true, "score": 1, "last_activity_date": 1558561435, "creation_date": 1558561435, "answer_id": 56265423, "question_id": 56265352, "link": "https://stackoverflow.com/questions/56265352/can-we-launch-a-parallel-shell-command-from-python/56265423#56265423", "title": "Can we launch a parallel shell command from python?", "body": "<p>If you are using <code>subprocess.run()</code> then your program, <code>timescaledb-parallel-copy</code> will execute as if you had called it from the shell.  It will still be in parallel.  The python script will not be, and will wait on <code>timescaledb-parallel-copy</code> to return.</p>\n"}, {"tags": [], "owner": {"reputation": 367, "user_id": 6057198, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dcf4b2b1b94dd6f45a574c05dbc8079?s=128&d=identicon&r=PG&f=1", "display_name": "azb_", "link": "https://stackoverflow.com/users/6057198/azb"}, "is_accepted": false, "score": 0, "last_activity_date": 1558561448, "creation_date": 1558561448, "answer_id": 56265428, "question_id": 56265352, "link": "https://stackoverflow.com/questions/56265352/can-we-launch-a-parallel-shell-command-from-python/56265428#56265428", "title": "Can we launch a parallel shell command from python?", "body": "<p>Yes, I believe it will be. By launching the program as a subprocess,  you are running the program as it originally would be, with no interference from python. </p>\n"}], "owner": {"reputation": 174, "user_id": 1328232, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5f006e84f89c80697cbe879aa3f30e22?s=128&d=identicon&r=PG", "display_name": "Chintan Pathak", "link": "https://stackoverflow.com/users/1328232/chintan-pathak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 56265423, "answer_count": 2, "score": 1, "last_activity_date": 1558561448, "creation_date": 1558561061, "question_id": 56265352, "link": "https://stackoverflow.com/questions/56265352/can-we-launch-a-parallel-shell-command-from-python", "title": "Can we launch a parallel shell command from python?", "body": "<p>I want to use a <code>go</code> executable: <a href=\"https://github.com/timescale/timescaledb-parallel-copy\" rel=\"nofollow noreferrer\">timescaledb-parallel-copy</a> to insert data into database from a csv file. However, I plan to use Python for reading in the filename and lookup the appropriate table name for insertion. If I then launch <code>timescaledb-parallel-copy</code> as a Python subprocess to execute on shell, will it still be parallel? I do not need Python to make it parallel, it is parallel by default. I just do not want Python to make it single-threaded.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11541773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08debb538f65ed427ea67fe6a9fc2f6b?s=128&d=identicon&r=PG&f=1", "display_name": "python_chad69", "link": "https://stackoverflow.com/users/11541773/python-chad69"}, "edited": false, "score": 0, "creation_date": 1558563190, "post_id": 56265518, "comment_id": 99147606, "body": "Thanks for this :) So would I replace &quot;your_string&quot; with &quot;(signed)&quot;?  For example, two rows in the warehouse data look like:  TITLE // STOCK And Time Folds // 3  And Time Folds (signed) // 1"}, {"owner": {"reputation": 1, "user_id": 11541773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08debb538f65ed427ea67fe6a9fc2f6b?s=128&d=identicon&r=PG&f=1", "display_name": "python_chad69", "link": "https://stackoverflow.com/users/11541773/python-chad69"}, "edited": false, "score": 0, "creation_date": 1558563519, "post_id": 56265518, "comment_id": 99147679, "body": "Getting the following error:      30 signed = []      31 for row in IBS_combined.iterrows(): ---&gt; 32     if row[&#39;Product&#39;].find(signed) != -1:      33         signed.append(row[&#39;Product&#39;].replace(signed,&#39;&#39;))      34 for item in signed: TypeError: tuple indices must be integers or slices, not str"}], "tags": [], "owner": {"reputation": 69, "user_id": 8855704, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0ab1f9e760bf8d957c97db31dd3df?s=128&d=identicon&r=PG&f=1", "display_name": "Panda", "link": "https://stackoverflow.com/users/8855704/panda"}, "is_accepted": false, "score": 0, "last_activity_date": 1558562099, "creation_date": 1558562099, "answer_id": 56265518, "question_id": 56265347, "link": "https://stackoverflow.com/questions/56265347/add-value-from-one-row-to-another-row-if-rows-have-matching-substrings-in-pandas/56265518#56265518", "title": "Add value from one row to another row if rows have matching substrings in Pandas dataframe", "body": "<p>You could do something like :</p>\n\n<pre><code>signed = []\nfor row in IBS_combined.iterrows():\n    if row['TITLE'].find(your_string) != -1:\n        signed.append(row['TITLE'].replace(your_string,''))\n</code></pre>\n\n<p>Then you can loop through signed and add the amounts</p>\n\n<pre><code>for item in signed:\n    IBS_combined[IBS_combined['TITLE']==item]['SIGNED'] = IBS_combined[IBS_combined['TITLE']==item]['SIGNED'] +1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11518, "user_id": 9510729, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HbuuPS6a5d4/AAAAAAAAAAI/AAAAAAAAAvQ/8hLG9Jvhyzc/photo.jpg?sz=128", "display_name": "jxc", "link": "https://stackoverflow.com/users/9510729/jxc"}, "is_accepted": false, "score": 0, "last_activity_date": 1558570782, "creation_date": 1558570782, "answer_id": 56266567, "question_id": 56265347, "link": "https://stackoverflow.com/questions/56265347/add-value-from-one-row-to-another-row-if-rows-have-matching-substrings-in-pandas/56266567#56266567", "title": "Add value from one row to another row if rows have matching substrings in Pandas dataframe", "body": "<p>You can split the dataframe into two dfs with rows having signed, unsigned only respectively and then merge the result. Below is an example (Assumed <em>ISBN</em> is the unique key to identify a book and the same book should not have more than 1 entries for either signed or unsigned stocks):</p>\n\n<ol>\n<li><p>Setup sample data which contain ISBNs with:</p>\n\n<ul>\n<li>1 signed and 1 unsigned entries</li>\n<li>1 signed stock entry only</li>\n<li><p>1 unsigned stock entry only</p>\n\n<pre><code>str=\"\"\"ISBN // TITLE // STOCK\n1 // A song of ice and fire // 5\n1 // A song of ice and fire (signed) // 1\n2 // another book // 10\n2 // another book (signed) // 2\n3 // 2nd book // 3\n4 // 3rd book (signed) // 1\"\"\"\n\ndf = pd.read_csv(pd.io.common.StringIO(str), sep=' // ', engine='python')\n</code></pre></li>\n</ul></li>\n<li><p>split the dataframe into two dataframes based on the below mask <code>m</code>:</p>\n\n<ul>\n<li>df_signed: <code>df[m]</code></li>\n<li><p>df_unsigned: <code>df[~m]</code></p>\n\n<pre><code>m = df.TITLE.str.contains('\\(signed\\)')\n</code></pre></li>\n</ul></li>\n<li><p>format df_signed (set <code>ISBN</code> as index, rename column and remove the substring '(signed)' from TITLE column):</p>\n\n<pre><code>df_signed = df[m].set_index('ISBN')\\\n                 .rename(columns={'STOCK':'SIGNED_STOCK'}) \\\n                 .replace('\\s*\\(signed\\)', '', regex=True)\nprint(df_signed)\n#                       TITLE  SIGNED_STOCK\n#ISBN\n#1     A song of ice and fire             1\n#2               another book             2\n#4                   3rd book             1\n</code></pre></li>\n<li><p>setup df_unsigned and use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.combine_first.html\" rel=\"nofollow noreferrer\">DataFrame.combine_first()</a> to join with df_signed</p>\n\n<pre><code>df_new = df[~m].set_index('ISBN') \\\n               .combine_first(df_signed) \\\n               .fillna(0, downcast='infer') \\\n               .reset_index() \nprint(df_new)\n#   ISBN  SIGNED_STOCK  STOCK                   TITLE\n#0     1             1      5  A song of ice and fire\n#1     2             2     10            another book\n#2     3             0      3                2nd book\n#3     4             1      0                3rd book\n</code></pre></li>\n<li><p>rearrange the order of columns:</p>\n\n<pre><code>cols = ['TITLE', 'ISBN', 'STOCK', 'SIGNED_STOCK']\ndf_new = df_new[cols]\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 11541773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/08debb538f65ed427ea67fe6a9fc2f6b?s=128&d=identicon&r=PG&f=1", "display_name": "python_chad69", "link": "https://stackoverflow.com/users/11541773/python-chad69"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1558574396, "creation_date": 1558561044, "last_edit_date": 1558574396, "question_id": 56265347, "link": "https://stackoverflow.com/questions/56265347/add-value-from-one-row-to-another-row-if-rows-have-matching-substrings-in-pandas", "title": "Add value from one row to another row if rows have matching substrings in Pandas dataframe", "body": "<p>I'm working with dataframes in pandas with an example of a book distributor.</p>\n\n<p>The warehouse produces .csv files that treat signed and unsigned (by the author) copies of books with the same titles as different rows, eg:</p>\n\n<pre><code>TITLE      //                      STOCK\n\nA song of ice and fire     //       5\n\nA song of ice and fire (signed)  //  1\n</code></pre>\n\n<p>However, I want each title to be a single row, but with an extra column for signed stock, eg:</p>\n\n<pre><code>TITLE            //                STOCK  //   SIGNED STOCK\n\nA song of ice and fire      //       5       //     1\n</code></pre>\n\n<p>I've successfully read in the CSV to a pandas dataframe and added a blank column called <code>SIGNED STOCK</code>, padded with zeros. I've also cleaned the code and got rid of blanks and <code>NaN</code>s\nHowever, I don't know how to search through the rows for titles with the substring <code>(signed)</code> and then add the stock there to the relevant <code>SIGNED STOCK</code> column of the relevant title. Any help much appreciated! :)</p>\n\n<pre><code>IBS_combined = pd.read_csv(\"IBS_21_05_19.csv\",usecols=[3,12,21],encoding='latin-1')\n\nIBS_combined.columns= ['Product', 'ISBN','Stock']\n\nIBS_combined['Signed Stock']='0'\n\nIBS_combined.replace(['Product'], np.nan, inplace=True)\n\nIBS_combined.dropna(subset=['Product'], inplace=True)\n</code></pre>\n"}, {"tags": ["python", "pandas", "networkx"], "answers": [{"comments": [{"owner": {"reputation": 678, "user_id": 9403338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9509b669f167b10edf15932e6c012ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Costa.Gustavo", "link": "https://stackoverflow.com/users/9403338/costa-gustavo"}, "edited": false, "score": 0, "creation_date": 1558635179, "post_id": 56265726, "comment_id": 99175596, "body": "How do I draw the edges with thickness according to the weight? Also, is it possible to put just one caption for the two distinct types of nodes?"}, {"owner": {"reputation": 7946, "user_id": 11227781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hW5DF.jpg?s=128&g=1", "display_name": "vurmux", "link": "https://stackoverflow.com/users/11227781/vurmux"}, "reply_to_user": {"reputation": 678, "user_id": 9403338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9509b669f167b10edf15932e6c012ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Costa.Gustavo", "link": "https://stackoverflow.com/users/9403338/costa-gustavo"}, "edited": false, "score": 0, "creation_date": 1558637646, "post_id": 56265726, "comment_id": 99176634, "body": "1. <code>linewidths</code> attribute (similar to <code>colors</code>). 2. No, it is not possible without questinable bad code."}, {"owner": {"reputation": 678, "user_id": 9403338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9509b669f167b10edf15932e6c012ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Costa.Gustavo", "link": "https://stackoverflow.com/users/9403338/costa-gustavo"}, "edited": false, "score": 0, "creation_date": 1558646268, "post_id": 56265726, "comment_id": 99180071, "body": "I&#39;m trying this, without sucessfull:   linewidth = [1.0 if df_ciclos_diretos[&#39;peso&#39;][i] == 1.0 else 5.0 if df_ciclos_diretos[&#39;peso&#39;][i] == 5.0             else 10.0 if df_ciclos_diretos[&#39;peso&#39;][i] == 10.0 for i in df_ciclos_diretos[&#39;peso&#39;]]"}], "tags": [], "owner": {"reputation": 7946, "user_id": 11227781, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hW5DF.jpg?s=128&g=1", "display_name": "vurmux", "link": "https://stackoverflow.com/users/11227781/vurmux"}, "is_accepted": true, "score": 0, "last_activity_date": 1558563647, "creation_date": 1558563647, "answer_id": 56265726, "question_id": 56265339, "link": "https://stackoverflow.com/questions/56265339/graphs-with-different-types-of-nodes/56265726#56265726", "title": "Graphs with different types of nodes", "body": "<ol>\n<li>Add a <code>'type_'</code> attribute for all nodes that represents is it <code>id_emp</code> or <code>name_dep</code> (replace the existing lines of code, don't add them!):</li>\n</ol>\n\n<pre><code># Add id_emp nodes\nG.add_nodes_from(df['id_emp'], type_='id_emp')\n...\n# Add name_dep nodes\nG.add_nodes_from(df['name_dep'], type_='name_dep')\n</code></pre>\n\n<ol start=\"2\">\n<li>Set <code>colors</code> list for further node coloring:</li>\n</ol>\n\n<pre><code>colors = ['#0000FF' if G.nodes[n]['type_'] == 'id_emp' else '#FF0000' for n in G.nodes]\n</code></pre>\n\n<ol start=\"3\">\n<li>Set <code>pos</code> dict for further node positioning (needs <code>random</code> module and returns not an ideal results; if you want to draw nodes/edges better, you need a more complicated graph analysis):</li>\n</ol>\n\n<pre><code>pos = {\n    n: (\n        random.random(),\n        0 if G.nodes[n]['type_'] == 'id_emp' else 1\n    )\n    for n in G.nodes\n}\n</code></pre>\n\n<ol start=\"4\">\n<li>Draw the graph:</li>\n</ol>\n\n<pre><code>nx.draw(\n    G,\n    pos=pos,\n    node_color=colors,\n    with_labels=True\n)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/pELMh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pELMh.png\" alt=\"enter image description here\"></a></p>\n\n<p>You can read more about <code>networkx</code> graph drawing <a href=\"https://networkx.github.io/documentation/stable/reference/generated/networkx.drawing.nx_pylab.draw_networkx.html#networkx.drawing.nx_pylab.draw_networkx\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 678, "user_id": 9403338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9509b669f167b10edf15932e6c012ef0?s=128&d=identicon&r=PG&f=1", "display_name": "Costa.Gustavo", "link": "https://stackoverflow.com/users/9403338/costa-gustavo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "accepted_answer_id": 56265726, "answer_count": 1, "score": -1, "last_activity_date": 1558563647, "creation_date": 1558560993, "question_id": 56265339, "link": "https://stackoverflow.com/questions/56265339/graphs-with-different-types-of-nodes", "title": "Graphs with different types of nodes", "body": "<p>I have the following pandas dateframe:</p>\n\n<pre><code>df = pd.DataFrame({\n'id_emp':[13524791000109, 12053850000137, 4707821000113],\n'name_emp': [\n    'JL Consultores',\n    'GRAAL OURINHOS',\n    'SOJA COMERCIO DE DERIVADOS DE PETROLEO LTDA'\n],\n'name_dep': [\n    'DIONILSO MATEUS MARCON',\n    'JOSE AUGUSTO ROSA',\n    'LUCIO ANTONIO MOSQUINI'\n],\n'donnated_value': [ 750.00, 5000.00, 27350.00],\n'donnated_amount': [1,1,1],\n'reimbursed_value':[36000.00,410.55, 241.22],\n'amount_reimbursed': [1,2,1],\n'roi':[4800.00, 8.21,0.88]\n})\n</code></pre>\n\n<p>From this Dataframe, I plot a graph with the code below:</p>\n\n<pre><code># Create graph\nG = nx.Graph()\n# Add id_emp nodes\nG.add_nodes_from(df['id_emp'])\n# Set 'name_emp' attribute for 'name_emp' column values\nfor node in G.nodes:\n   G.nodes[node]['name_emp'] = df.loc[df['id_emp'] == node]['name_emp'].values[0]\n# Add name_dep nodes\nG.add_nodes_from(df['name_dep'])\n# Create the new column with transformed 'roi' values\ndf['roi_new'] = df['roi'].apply(\nlambda x: 1 if x &lt; 100 else 2 if 100 &lt;= x &lt; 1000 else 3)\n# Add weighted edges\nG.add_weighted_edges_from(df[['id_emp', 'name_dep', 'roi_new']].values)\n</code></pre>\n\n<p>I need to improve the visualization of this graph. For this I would like the nodes from df ['id_emp' and df ['name_dep'] to be in different color and format. In addition, ideally each type of node would be on separate sides. Example: The df nodes ['id_emp] would stay at the top of the figure, while the others would stay at the bottom. Every help is welcome.</p>\n"}, {"tags": ["python", "networking", "psutil"], "answers": [{"tags": [], "owner": {"reputation": 1086, "user_id": 7619353, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e4d2a067a2026b3805e1f2f6a6ac48d0?s=128&d=identicon&r=PG&f=1", "display_name": "tyleax", "link": "https://stackoverflow.com/users/7619353/tyleax"}, "is_accepted": false, "score": 0, "last_activity_date": 1558629584, "creation_date": 1558629584, "answer_id": 56279643, "question_id": 56265323, "link": "https://stackoverflow.com/questions/56265323/python-psutil-net-io-counters-returning-invalid-results/56279643#56279643", "title": "python psutil.net_io_counters() returning invalid results", "body": "<p>Found out the stats are the total stats, not stats per second. Need psutil.net_io_counters() twice with a 1 second sleep between to calculate the stats per second.</p>\n"}], "owner": {"reputation": 1086, "user_id": 7619353, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/e4d2a067a2026b3805e1f2f6a6ac48d0?s=128&d=identicon&r=PG&f=1", "display_name": "tyleax", "link": "https://stackoverflow.com/users/7619353/tyleax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 129, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1558629584, "creation_date": 1558560875, "question_id": 56265323, "link": "https://stackoverflow.com/questions/56265323/python-psutil-net-io-counters-returning-invalid-results", "title": "python psutil.net_io_counters() returning invalid results", "body": "<p>I'm using <code>psutil</code> library to obtain some system network information. Unfortunately it seems the values I'm getting are in-correct. I know for a fact that the bytes received and sent on ethernet 4 is not 556MB/71MB. When I view performance from task manager, the Ethernet is stilling at 0 - 30 Kbps. Why am I getting such large values?</p>\n\n<pre><code>Interface Name - Ethernet 4\nBytes Receive - 556.203 MB\nBytes Sent - 71.558 MB\nDrop In - 9447\nDrop out - 0\nError In - 0\nError Out - 0\nPackets Received - 7702423\nPackets Sent - 395453\n</code></pre>\n"}, {"tags": ["python", "audio", "pyaudio", "wave"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10061206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/253e0ada45d607001309889a7c11d1f0?s=128&d=identicon&r=PG&f=1", "display_name": "juniorcl", "link": "https://stackoverflow.com/users/10061206/juniorcl"}, "edited": false, "score": 0, "creation_date": 1558634858, "post_id": 56265494, "comment_id": 99175474, "body": "Thank you. The first and second option did not work. But I succeeded by using the third."}], "tags": [], "owner": {"reputation": 27886, "user_id": 636626, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b18fc48caab5bf7c3e2a15292972f05b?s=128&d=identicon&r=PG", "display_name": "Nils Werner", "link": "https://stackoverflow.com/users/636626/nils-werner"}, "is_accepted": true, "score": 0, "last_activity_date": 1558591922, "last_edit_date": 1558591922, "creation_date": 1558561889, "answer_id": 56265494, "question_id": 56265316, "link": "https://stackoverflow.com/questions/56265316/how-to-play-infinitely-a-wav-file-using-python/56265494#56265494", "title": "How to play infinitely a &quot;.wav&quot; file using python", "body": "<p>Your data comparison should be</p>\n\n<pre><code>while data != b'':\n    ...\n</code></pre>\n\n<p>or the simpler variant (empty strings cast to <code>False</code>):</p>\n\n<pre><code>while data:\n    ...\n</code></pre>\n\n<p>Also, you really should reuse <code>wf</code>, <code>stream</code>, and <code>p</code> inbetween loops:</p>\n\n<pre><code>import pyaudio\nimport wave\n\nCHUNK = 2 ** 11\n\nwf = wave.open('Metano_Ref_Lockin=SR830_mod=0.460V_freq=3936_PP=20_NP=100.wav', 'rb')\n\np = pyaudio.PyAudio()\nstream = p.open(format=pyaudio.paInt16,\n        channels=wf.getnchannels(),\n        rate=wf.getframerate(),\n        output=True)\n\n\nwhile True:\n    wf.rewind()\n\n    data = wf.readframes(CHUNK)\n    while data:\n        stream.write(data)\n        data = wf.readframes(CHUNK)\n\nwf.close()\nstream.stop_stream()\nstream.close()\np.terminate()\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10061206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/253e0ada45d607001309889a7c11d1f0?s=128&d=identicon&r=PG&f=1", "display_name": "juniorcl", "link": "https://stackoverflow.com/users/10061206/juniorcl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 56265494, "answer_count": 1, "score": 0, "last_activity_date": 1558591922, "creation_date": 1558560840, "question_id": 56265316, "link": "https://stackoverflow.com/questions/56265316/how-to-play-infinitely-a-wav-file-using-python", "title": "How to play infinitely a &quot;.wav&quot; file using python", "body": "<p>I'm trying to play the \".wav\" file infinitely to use in my experiment.</p>\n\n<p>I'm using the script of the pyaudio website (<a href=\"http://people.csail.mit.edu/hubert/pyaudio/\" rel=\"nofollow noreferrer\">http://people.csail.mit.edu/hubert/pyaudio/</a>), however it plays for only 5 seconds.</p>\n\n<p>I tried to use the code below, but it plays for some seconds.</p>\n\n<pre><code>import pyaudio\nimport wave\n\nwhile True:\n    CHUNK = 20*100\n\n    wf = \n    wave.open('Metano_Ref_Lockin=SR830_mod=0.460V_freq=3936_PP=20_NP=100.wav', 'rb')\n    data = wf.readframes(CHUNK)\n\n   p = pyaudio.PyAudio()\n\n   stream = p.open(format=pyaudio.paInt16,\n            channels=wf.getnchannels(),\n            rate=wf.getframerate(),\n            output_device_index=4,\n            output=True)\n\n\n   while data != '':\n      stream.write(data)\n      data = wf.readframes(CHUNK)\n\n   stream.stop_stream()\n   stream.close()\n   p.terminate()\n</code></pre>\n\n<p>On the other hand, this code works, nevertheless, the signal is not uniform (some noises appear).</p>\n\n<pre><code>import pyaudio\nimport wave\n\nCHUNK = 20*100\n\nwf = wave.open('Metano_Ref_Lockin=SR830_mod=0.460V_freq=3936_PP=20_NP=100.wav', 'rb')\ndata = wf.readframes(CHUNK)\n\np = pyaudio.PyAudio()\n\nstream = p.open(format=pyaudio.paInt16,\n            channels=wf.getnchannels(),\n            rate=wf.getframerate(),\n            output_device_index=4,\n            output=True)\n\nwhile data != '':\n    stream.write(data)\n\nstream.stop_stream()\nstream.close()\np.terminate()\n</code></pre>\n\n<p>I expect a uniform signal to be reproduced infinitely.\nThanks.</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver", "web-scraping", "drop-down-menu"], "answers": [{"tags": [], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "is_accepted": false, "score": 0, "last_activity_date": 1558563263, "creation_date": 1558563263, "answer_id": 56265676, "question_id": 56265289, "link": "https://stackoverflow.com/questions/56265289/python-and-selenium-web-scraping-ebay-dropdown-boxes-text/56265676#56265676", "title": "python and selenium web scraping ebay dropdown boxes text", "body": "<p>Here is the logic that will print the desired output.</p>\n\n<pre><code>url = \"https://www.ebay.co.uk/itm/UK-Women-Off-Shoulder-Floral-Bodycon-Backless-Ladies-Summer-Beach-Midi-Sun-Dress/254198776097?hash=item3b2f6d8121:m:m9B15WsfVx5zTh_73LlzBGA\"\ndriver.get(url)\ncolors = len(driver.find_elements_by_xpath(\"//select[@name='Colour']/option\"))\nfor colNum in range(colors):\n    #select color\n    colorEle = driver.find_element_by_xpath(\"(//select[@name='Colour']/option)[\" + str(colNum+1) + \"]\")\n    color = colorEle.text\n    colorEle.click()\n\n    # get the sizes\n    sizes = len(driver.find_elements_by_xpath(\"//select[@name='Size']/option\"))\n    for sizeNum in range(sizes):\n        # select color\n        sizeEle = driver.find_element_by_xpath(\"(//select[@name='Size']/option)[\" + str(sizeNum + 1) + \"]\")\n        size = sizeEle.text\n        sizeEle.click()\n        price = driver.find_element_by_xpath(\"//span[@id='prcIsum']\").text\n        print (\"Color:\" + color)\n        print( \"size:\" + size)\n        print(\"Price: \"+ price)\n        print (\"----------------------------------------\")\n</code></pre>\n\n<p>Here is the output:</p>\n\n<p>Color:- Select -\nsize:- Select -</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:- Select -\nsize:6</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:- Select -\nsize:8</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:- Select -\nsize:10</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:- Select -\nsize:12</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:- Select -\nsize:14</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:- Select -\nsize:16</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:- Select -\nsize:S</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:- Select -\nsize:M</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:- Select -\nsize:L</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:- Select -\nsize:XL</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:White\nsize:- Select -</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:White\nsize:6</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:White\nsize:8</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:White\nsize:10</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:White\nsize:12</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:White\nsize:14</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:White\nsize:16</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:White\nsize:S</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:White\nsize:M</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:White\nsize:L</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:White\nsize:XL</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Blue\nsize:- Select -</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Blue\nsize:6</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Blue\nsize:8</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Blue\nsize:10</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Blue\nsize:12</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Blue\nsize:14</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Blue\nsize:16</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Blue\nsize:S</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Blue\nsize:M</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Blue\nsize:L</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Blue\nsize:XL</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Light Green\nsize:- Select -</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Light Green\nsize:6</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Light Green\nsize:8</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Light Green\nsize:10</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Light Green\nsize:12</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Light Green\nsize:14</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Light Green\nsize:16</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Light Green\nsize:S</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Light Green\nsize:M</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Light Green\nsize:L</p>\n\n<h2>Price: \u00a36.99</h2>\n\n<p>Color:Light Green\nsize:XL</p>\n\n<h2>Price: \u00a36.99</h2>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 8799871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0486f994840bc129daa3d07fada256c?s=128&d=identicon&r=PG&f=1", "display_name": "MVR", "link": "https://stackoverflow.com/users/8799871/mvr"}, "is_accepted": false, "score": 0, "last_activity_date": 1558567965, "creation_date": 1558567965, "answer_id": 56266267, "question_id": 56265289, "link": "https://stackoverflow.com/questions/56265289/python-and-selenium-web-scraping-ebay-dropdown-boxes-text/56266267#56266267", "title": "python and selenium web scraping ebay dropdown boxes text", "body": "<p>@cod<a href=\"https://stackoverflow.com/users/11525601/codeisfun1234\">eisfun1234</a>, You can make use of the <a href=\"https://seleniumhq.github.io/selenium/docs/api/py/webdriver_support/selenium.webdriver.support.select.html\" rel=\"nofollow noreferrer\">options</a> as follows:</p>\n\n<pre><code>for sel_opt,selx_opt in zip(sel.options,selx.options):\n     if \"Select\" not in sel_opt.text:\n         print(\"{}, {}: {}\".format(sel_opt.text,selx_opt.text, browser.find_element_by_xpath(\"//span[@id='prcIsum']\").text))\n</code></pre>\n\n<p>Here is the output:</p>\n\n<pre><code># 1 Lion, M: \u00a37.49\n# 2 Lion, L: \u00a37.49\n# 3 Lion, XL: \u00a37.49\nWolf, XXL: \u00a37.49\nDeer, XXXL: \u00a37.49\n</code></pre>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 11, "user_id": 11525601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639180c2de449454fa974e6d2ea60821?s=128&d=identicon&r=PG&f=1", "display_name": "codeisfun1234", "link": "https://stackoverflow.com/users/11525601/codeisfun1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1558567965, "creation_date": 1558560711, "question_id": 56265289, "link": "https://stackoverflow.com/questions/56265289/python-and-selenium-web-scraping-ebay-dropdown-boxes-text", "title": "python and selenium web scraping ebay dropdown boxes text", "body": "<p>I am trying to output text of drop down on ebay. I want to output the text and then the price of the item as different drop down options are selected (which is why i don't want to scrape a list of dropdown values all at once). I have a code which works only with 1 drop down box and price . I want it to work with 2 drop down menus +.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from selenium import webdriver\nimport csv\nbrowser = webdriver.Chrome(executable_path='C:\\Users\\user\\PycharmProjects\\seleniumTest\\drivers\\chromedriver.exe')\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.support.ui import Select\nimport sys\nreload(sys)\nsys.setdefaultencoding('utf-8')\nfrom selenium.webdriver.support.select import Select\n\n\n\nfrom selenium import webdriver\nimport csv\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.support.ui import Select\n\nbrowser.get('https://www.ebay.co.uk/itm/Wooden-Box-Coins-Coin-Capsules-Display-Storage-Case-for-Collectible-50-100-New/392274824564')\nfrom selenium.webdriver.support.select import Select\n\nsel = Select(browser.find_element_by_xpath(\"//select[@id='msku-sel-1']\"))\n\nfor index in range(1, len(sel.options)):\n    # skipping index 0 because it is not valid option\n    sel.select_by_index(index)\n    print(\"{}: {}\".format(sel.first_selected_option.text, browser.find_element_by_xpath(\"//span[@id='prcIsum']\").text))\n</code></pre>\n\n<p>Output = </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>S: \u00a36.35\nL: \u00a310.25\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nfrom selenium import webdriver\nimport csv\nbrowser = webdriver.Chrome(executable_path='C:\\Users\\userman\\PycharmProjects\\seleniumTest\\drivers\\chromedriver.exe')\nfrom selenium.webdriver.common.keys import Keys\nfrom selenium.webdriver.support.ui import Select\nimport sys\nreload(sys)\nsys.setdefaultencoding('utf-8')\nfrom selenium.webdriver.support.select import Select\n\n\n\n\nbrowser.get('https://www.ebay.co.uk/itm/Men-3D-Print-Summer-Short-Sleeve-Casual-Slim-Fit-T-Shirts-Graphic-Tee-Shirt-Tops/312545780841?_trkparms=aid%3D333200%26algo%3DCOMP.MBE%26ao%3D1%26asc%3D20171012094517%26meid%3D5e2ad1383afb40b6ad90bb05a8161ad3%26pid%3D100008%26rk%3D2%26rkt%3D12%26sd%3D183776732599%26itm%3D312545780841&amp;_trksid=p2047675.c100008.m2219')\n\nsel = Select(browser.find_element_by_xpath(\"//select[@id='msku-sel-1']\"))\nselx = Select(browser.find_element_by_xpath(\"//select[@id='msku-sel-2']\"))\n\nfor index in range(1, len(sel.options)):\n    # skipping index 0 because it is not valid option\n    sel.select_by_index(index)\n    print(\"{}: {}\".format(sel.first_selected_option.text, browser.find_element_by_xpath(\"//span[@id='prcIsum']\").text))\n\n\nfor index in range(1, len(selx.options)):\n    # skipping index 0 because it is not valid option\n    selx.select_by_index(index) &amp; sel.select_by_index(index)\n\n    print(\"{}: {}\".format(selx.first_selected_option.text, browser.find_element_by_xpath(\"//span[@id='prcIsum']\").text),browser.find_element_by_xpath(\"//select[@id='msku-sel-2']\").text)\n\n\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>Traceback (most recent call last):\n  File \"C:/Users/userman/PycharmProjects/seleniumTest/test/test310.py\", line 27, in &lt;module&gt;\n    selx.select_by_index(index) &amp; sel.select_by_index(index)\nTypeError: unsupported operand type(s) for &amp;: 'NoneType' and 'NoneType'\n\n</code></pre>\n\n<p><a href=\"https://www.ebay.co.uk/itm/UK-Women-Off-Shoulder-Floral-Bodycon-Backless-Ladies-Summer-Beach-Midi-Sun-Dress/254198776097?hash=item3b2f6d8121:m:m9B15WsfVx5zTh_73LlzBGA\" rel=\"nofollow noreferrer\">https://www.ebay.co.uk/itm/UK-Women-Off-Shoulder-Floral-Bodycon-Backless-Ladies-Summer-Beach-Midi-Sun-Dress/254198776097?hash=item3b2f6d8121:m:m9B15WsfVx5zTh_73LlzBGA</a>\nI want the output to be e.g Color: Red, Size: S Price:\u00a324.99</p>\n"}, {"tags": ["python", "visual-studio-code", "conda"], "answers": [{"comments": [{"owner": {"reputation": 4171, "user_id": 2333593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaef5354ed4a50d7c5d78f008956484?s=128&d=identicon&r=PG", "display_name": "Peter Schott", "link": "https://stackoverflow.com/users/2333593/peter-schott"}, "edited": false, "score": 0, "creation_date": 1558562042, "post_id": 56265410, "comment_id": 99147283, "body": "No luck. Still get the same message about the environment not being activated."}, {"owner": {"reputation": 35, "user_id": 8028344, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8PNfoKY6EB0/AAAAAAAAAAI/AAAAAAAAAJc/J8RcUNy-1lc/photo.jpg?sz=128", "display_name": "Vijay Karthik", "link": "https://stackoverflow.com/users/8028344/vijay-karthik"}, "reply_to_user": {"reputation": 4171, "user_id": 2333593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaef5354ed4a50d7c5d78f008956484?s=128&d=identicon&r=PG", "display_name": "Peter Schott", "link": "https://stackoverflow.com/users/2333593/peter-schott"}, "edited": false, "score": 0, "creation_date": 1558563304, "post_id": 56265410, "comment_id": 99147629, "body": "Delete current terminal and press <code>Ctrl +  backquote</code>. Does this open up a new terminal with and run the command <code>conda activate &lt;yourenv&gt;</code> ?"}, {"owner": {"reputation": 4171, "user_id": 2333593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaef5354ed4a50d7c5d78f008956484?s=128&d=identicon&r=PG", "display_name": "Peter Schott", "link": "https://stackoverflow.com/users/2333593/peter-schott"}, "edited": false, "score": 0, "creation_date": 1558564725, "post_id": 56265410, "comment_id": 99147989, "body": "Ctrl+` just opens a windows terminal.  I have no issues running &quot;conda activate env&quot;  For some reason I get that error when launching a Python console or using Shift+Enter to run highlighted code."}], "tags": [], "owner": {"reputation": 35, "user_id": 8028344, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-8PNfoKY6EB0/AAAAAAAAAAI/AAAAAAAAAJc/J8RcUNy-1lc/photo.jpg?sz=128", "display_name": "Vijay Karthik", "link": "https://stackoverflow.com/users/8028344/vijay-karthik"}, "is_accepted": false, "score": 0, "last_activity_date": 1558561350, "creation_date": 1558561350, "answer_id": 56265410, "question_id": 56265278, "link": "https://stackoverflow.com/questions/56265278/conda-environment-activation-fails-in-vs-code/56265410#56265410", "title": "Conda environment activation fails in VS Code", "body": "<p>Please check if you have this setting in your <code>settings.json</code> file,</p>\n\n<pre><code>\"python.pythonPath\": \"&lt;anacondapath&gt;\\\\envs\\\\&lt;yourenv&gt;\\\\python.exe\",\n</code></pre>\n\n<p>This should automatically load the conda environment for you.</p>\n"}], "owner": {"reputation": 4171, "user_id": 2333593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaef5354ed4a50d7c5d78f008956484?s=128&d=identicon&r=PG", "display_name": "Peter Schott", "link": "https://stackoverflow.com/users/2333593/peter-schott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1333, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558561350, "creation_date": 1558560662, "question_id": 56265278, "link": "https://stackoverflow.com/questions/56265278/conda-environment-activation-fails-in-vs-code", "title": "Conda environment activation fails in VS Code", "body": "<p>When I launch a Python terminal or use Shift+Enter to run code from my Python Files through VS Code on Windows, I get a message:</p>\n\n<blockquote>\n  <p>This Python interpreter is in a conda environment, but the environment\n  has not been activated.  Libraries may fail to load.  To activate this\n  environment please see <a href=\"https://conda.io/activation\" rel=\"nofollow noreferrer\">https://conda.io/activation</a>.</p>\n</blockquote>\n\n<p>I get a Python prompt. The code runs as expected.  If I exit() that prompt and run \"conda activate myenv\", the environment activates and I can then run python using the desired environment. However, I can't seem to figure out why it's not activating by default.</p>\n\n<p>I have the MS Python module loaded. Conda is up to date and in my system path. I've installed Conda into cmd and powershell. And the expect \"activate\" command works if I quit python and type it in. Any ideas what I might be missing?</p>\n"}, {"tags": ["python", "for-loop"], "comments": [{"owner": {"reputation": 5380, "user_id": 10618540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Od4aq.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/10618540/paritosh-singh"}, "edited": false, "score": 6, "creation_date": 1558560697, "post_id": 56265264, "comment_id": 99146905, "body": "could you provide <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> please? Some of the data or a dummy version of it to better see what you&#39;re working with."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1558561956, "post_id": 56265264, "comment_id": 99147258, "body": "use <code>print()</code> to check what you have in variables - ie. in <code>listWP</code>, <code>dataGA</code>, <code>row</code>, <code>i</code>, <code>url</code>. Maybe they have something different than you expect."}, {"owner": {"reputation": 5416, "user_id": 360826, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/7CZNr.png?s=128&g=1", "display_name": "jason m", "link": "https://stackoverflow.com/users/360826/jason-m"}, "edited": false, "score": 0, "creation_date": 1558566661, "post_id": 56265264, "comment_id": 99148391, "body": "FWIW I don&#39;t think this deserves a down-vote."}, {"owner": {"reputation": 19, "user_id": 11541761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/142b87c34b84663352b1272505ce270f?s=128&d=identicon&r=PG&f=1", "display_name": "jarmand", "link": "https://stackoverflow.com/users/11541761/jarmand"}, "edited": false, "score": 0, "creation_date": 1558578798, "post_id": 56265264, "comment_id": 99150507, "body": "i didn&#39;t see an easy way to link a csv file. first time on posting on stack overflow sorry if it is easy"}, {"owner": {"reputation": 19, "user_id": 11541761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/142b87c34b84663352b1272505ce270f?s=128&d=identicon&r=PG&f=1", "display_name": "jarmand", "link": "https://stackoverflow.com/users/11541761/jarmand"}, "edited": false, "score": 0, "creation_date": 1558578821, "post_id": 56265264, "comment_id": 99150514, "body": "i did use print() and the variables are what i expected them to be, thanks for the tip though"}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1558566122, "creation_date": 1558566122, "answer_id": 56266046, "question_id": 56265264, "link": "https://stackoverflow.com/questions/56265264/for-loop-does-not-properly-iterate-through-array/56266046#56266046", "title": "For loop does not properly iterate through array", "body": "<p><code>csv.reader()</code> returns a generator. The first time you iterate through it you process all the elements. All the subsequent times get nothing, since there are no more elements to iterate through. You should convert it to a list.</p>\n\n<pre><code>dataGA = list(csv.reader(f_GA, delimiter = ','))\n</code></pre>\n\n<p>However, it would probably be better if you redesigned your data structures. Instead of all those nested loops, convert the contents of <code>dataGA</code> to a <code>set</code> and then just use <code>if url in url_set:</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 11541761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/142b87c34b84663352b1272505ce270f?s=128&d=identicon&r=PG&f=1", "display_name": "jarmand", "link": "https://stackoverflow.com/users/11541761/jarmand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1558566122, "creation_date": 1558560584, "question_id": 56265264, "link": "https://stackoverflow.com/questions/56265264/for-loop-does-not-properly-iterate-through-array", "title": "For loop does not properly iterate through array", "body": "<p>When I run my code, only the first item in the array \"listWP\" checks whether it is in \"dataGA.\" Tried a bunch of things, same problem. New to coding apologize for ignorance</p>\n\n<pre><code>import csv\n\nf_GA = open('MS_GA.csv', 'rt')\nf_WP = open('MS_WP.csv', 'rt')\ndataGA = csv.reader(f_GA, delimiter=',') \ndataWP = csv.reader(f_WP, delimiter=',')\nlistWP = []\nfor row in dataWP:\n    for i in row:\n        b = i[29:]\n        listWP.append(b)\nfor url in listWP:\n    for row in dataGA:\n        for i in row:\n            if url in i:\n                print (i + \" ||is top site\")\n</code></pre>\n\n<p>Current output is the first item of the array listWP checked through dataGA, i would obviously like it to be all items</p>\n"}, {"tags": ["python", "oracle", "database-connection", "oracle-sqldeveloper"], "comments": [{"owner": {"reputation": 6003, "user_id": 4799035, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuyZM.jpg?s=128&g=1", "display_name": "Christopher Jones", "link": "https://stackoverflow.com/users/4799035/christopher-jones"}, "edited": false, "score": 0, "creation_date": 1558564301, "post_id": 56265238, "comment_id": 99147885, "body": "Do you have a question about the instructions on the link? They tell you what to download and where to get it.  You may also want to read the cx_Oracle installation instructions <a href=\"https://cx-oracle.readthedocs.io/en/latest/installation.html\" rel=\"nofollow noreferrer\">cx-oracle.readthedocs.io/en/latest/installation.html</a> which contain the same info."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 12049470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1abe88363886586b185a5354055227e0?s=128&d=identicon&r=PG", "display_name": "psteohi", "link": "https://stackoverflow.com/users/12049470/psteohi"}, "is_accepted": false, "score": 1, "last_activity_date": 1568165860, "last_edit_date": 1568165860, "creation_date": 1568163692, "answer_id": 57879791, "question_id": 56265238, "link": "https://stackoverflow.com/questions/56265238/oracle-db-connection-error-with-python-cx-oracle-cannot-locate-a-32-bit-oracl/57879791#57879791", "title": "Oracle DB connection error with Python - cx_Oracle: cannot locate a 32-bit Oracle Client library", "body": "<ol>\n<li>Your python is 32bit &amp; looking for 32bit cx_Oracle.</li>\n<li>You need to install Visual Studio &amp; cx_Oracle.<br>\nRefer to <a href=\"https://www.cs.utexas.edu/~scohen/cs327e_spr15/cx_Oracle/windows.html\" rel=\"nofollow noreferrer\">this site</a> and download the 32 bit cx_oracle <code>.zip</code> &amp; the VS <code>.exe</code>.</li>\n<li>Install the VS <code>.exe</code> (double click to install).</li>\n<li><p>Unzip the cx_oracle zip, put it into your python installation folder, eg. </p>\n\n<pre><code>C:\\Python\\Python37-32\\Lib\\site-packages\\\n</code></pre>\n\n<p>to get to this directory </p>\n\n<pre><code>C:\\Python\\Python37-32\\Lib\\site-packages\\instantclient_19_3\\\n</code></pre></li>\n<li><p>Set your computer/machine <code>PATH</code> in \"environment variable\" to include </p>\n\n<pre><code>C:\\Python\\Python37-32\\Lib\\site-packages\\instantclient_19_3\n</code></pre></li>\n<li><p>Restart your machine.</p></li>\n</ol>\n"}], "owner": {"reputation": 21, "user_id": 9785328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hvHbi.jpg?s=128&g=1", "display_name": "\u0414\u043c\u0438\u0442\u0440\u0438\u0439 \u0418\u0432\u0430\u043d\u043e\u0432", "link": "https://stackoverflow.com/users/9785328/%d0%94%d0%bc%d0%b8%d1%82%d1%80%d0%b8%d0%b9-%d0%98%d0%b2%d0%b0%d0%bd%d0%be%d0%b2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 662, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1568165860, "creation_date": 1558560457, "question_id": 56265238, "link": "https://stackoverflow.com/questions/56265238/oracle-db-connection-error-with-python-cx-oracle-cannot-locate-a-32-bit-oracl", "title": "Oracle DB connection error with Python - cx_Oracle: cannot locate a 32-bit Oracle Client library", "body": "<p>After trying to connect to DB with cx_Oracle.connect(...) I get the following exception: cx_Oracle.DatabaseError: DPI-1047: Cannot locate a 32-bit Oracle Client Library: \"...path\" is not the correct architecture.\nI am also given a link where there are some info about the libraries and about the fact that Oracle Client libraries \"require the presence of the correct Visual Studio redistributable\".\nThe thing is that the only thing I have (where I actually create the DB itself) is Oracle SqlDeveloper. \nSo.. do I really need to install smth to get it to work?</p>\n"}, {"tags": ["python", "python-3.x", "input", "pascals-triangle"], "comments": [{"owner": {"reputation": 1804, "user_id": 7571673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GASUB.jpg?s=128&g=1", "display_name": "qmeeus", "link": "https://stackoverflow.com/users/7571673/qmeeus"}, "edited": false, "score": 0, "creation_date": 1558561052, "post_id": 56265220, "comment_id": 99147017, "body": "And what about a nested loop then? Doesn&#39;t that solve the problem?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11541745"}, "reply_to_user": {"reputation": 1804, "user_id": 7571673, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GASUB.jpg?s=128&g=1", "display_name": "qmeeus", "link": "https://stackoverflow.com/users/7571673/qmeeus"}, "edited": false, "score": 0, "creation_date": 1558562567, "post_id": 56265220, "comment_id": 99147426, "body": "how would it solve it?"}], "answers": [{"tags": [], "owner": {"reputation": 1669, "user_id": 9042078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6avg1.jpg?s=128&g=1", "display_name": "Vasu Deo.S", "link": "https://stackoverflow.com/users/9042078/vasu-deo-s"}, "is_accepted": true, "score": 0, "last_activity_date": 1558563096, "creation_date": 1558563096, "answer_id": 56265654, "question_id": 56265220, "link": "https://stackoverflow.com/questions/56265220/number-triangle-using-user-input/56265654#56265654", "title": "Number Triangle using user input", "body": "<p><strong>Change This In Your Code:-</strong></p>\n\n<pre><code>for item in PrintingList:\n  print (*item)\n</code></pre>\n\n<p>Here we unpacked each element of the list using an List Unpacking Operator <code>*</code>. This got us rid of those brackets, in the beginning and end of each row.</p>\n\n<p>This Gives us Output:-</p>\n\n<pre><code>1\n\n2 5\n\n5 7 8\n\n9 15 2 3\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11541745"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 56265654, "answer_count": 1, "score": 0, "last_activity_date": 1558563096, "creation_date": 1558560283, "last_edit_date": 1558560976, "question_id": 56265220, "link": "https://stackoverflow.com/questions/56265220/number-triangle-using-user-input", "title": "Number Triangle using user input", "body": "<p>Trying to create a number triangle using user input for each individual part of the triangle. I figured out how to put each row into a list and get user input for each individual number but I need help doing it without having each row in a list.</p>\n\n<pre><code>rows = int(dataLines) # --&gt; convert user input to an integer\ndef triangle(rows):\n    PrintingList = list()\n    for rownum in range (1, rows + 1): # use colon after control structure to denote the beginning of block of code\n        PrintingList.append([]) # append a row\n        for iteration in range (rownum):\n            newValue = input(\"Please enter the next number:\")\n            PrintingList[rownum - 1].append(int(newValue))\n            print()\n\n    for item in PrintingList:\n      print (item)\ntriangle(rows)\n</code></pre>\n\n<p>This only got me lists for each row.\nDesired output would be something like</p>\n\n<p>1</p>\n\n<p>2  5 </p>\n\n<p>5  7  8 </p>\n\n<p>9  15  2  3  </p>\n\n<p>using user input for each individual number</p>\n"}, {"tags": ["python", "google-app-engine"], "comments": [{"owner": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "edited": false, "score": 0, "creation_date": 1558620620, "post_id": 56265208, "comment_id": 99168545, "body": "what does &quot;can&#39;t see the image&quot; mean exactly? 404? Not displayed in the browser? Something else?"}, {"owner": {"reputation": 1, "user_id": 11541662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa911dfd688f7877484d3f69f40f7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/11541662/fred"}, "reply_to_user": {"reputation": 37127, "user_id": 4495081, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/OuWYd.jpg?s=128&g=1", "display_name": "Dan Cornilescu", "link": "https://stackoverflow.com/users/4495081/dan-cornilescu"}, "edited": false, "score": 0, "creation_date": 1558638817, "post_id": 56265208, "comment_id": 99177131, "body": "a broken image icon shows up and if you right click on the icon and copy the image address and paste on the search bar you would get 404"}], "answers": [{"tags": [], "owner": {"reputation": 136, "user_id": 9661522, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sEnzK.png?s=128&g=1", "display_name": "Renzo", "link": "https://stackoverflow.com/users/9661522/renzo"}, "is_accepted": false, "score": 0, "last_activity_date": 1558592390, "last_edit_date": 1558592390, "creation_date": 1558588299, "answer_id": 56268417, "question_id": 56265208, "link": "https://stackoverflow.com/questions/56265208/google-app-engine-python-doesnt-show-image/56268417#56268417", "title": "Google app engine (python) doesn&#39;t show image", "body": "<p>Your app.yaml is all good. </p>\n\n<p>You can test further to see if the image is uploaded.</p>\n\n<ol>\n<li><p>Once deployed, inspect your page with a link like project-id.appspot.com</p>\n\n<ul>\n<li><p>If it returns a <code>404</code> response, the image path can be wrong or the \n<code>logo.png</code> file is missing </p></li>\n<li><p>Check the <em>Sources</em> tab if the <code>image</code> folder is present together with the file.</p></li>\n</ul></li>\n<li><p>Verify if the image folder is in proper place as well as the <code>logo.png</code> does exist.</p></li>\n<li>Check the html file if the <code>img src</code> is correct. Sometimes, it's just typo error on their link or file name</li>\n</ol>\n\n<p>You can also add try to edit then deploy this <a href=\"https://github.com/GoogleCloudPlatform/python-docs-samples/tree/master/appengine/standard_python37/building-an-app/building-an-app-1\" rel=\"nofollow noreferrer\">sample code</a> and simply add an images folder. It worked for me.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11541662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa911dfd688f7877484d3f69f40f7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/11541662/fred"}, "is_accepted": true, "score": 0, "last_activity_date": 1563047620, "creation_date": 1563047620, "answer_id": 57022377, "question_id": 56265208, "link": "https://stackoverflow.com/questions/56265208/google-app-engine-python-doesnt-show-image/57022377#57022377", "title": "Google app engine (python) doesn&#39;t show image", "body": "<p>For some reason when you deploy the app, you will be able to see the images also even if the app is not deployed if you pass a link address to the src attribute instead of a relative path it would still work.</p>\n"}], "owner": {"reputation": 1, "user_id": 11541662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/afa911dfd688f7877484d3f69f40f7dd?s=128&d=identicon&r=PG&f=1", "display_name": "Fred", "link": "https://stackoverflow.com/users/11541662/fred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 57022377, "answer_count": 2, "score": 0, "last_activity_date": 1563047620, "creation_date": 1558560212, "last_edit_date": 1558562857, "question_id": 56265208, "link": "https://stackoverflow.com/questions/56265208/google-app-engine-python-doesnt-show-image", "title": "Google app engine (python) doesn&#39;t show image", "body": "<p>I have <code>&lt;p&gt;&lt;img src=\"/images/logo.png\"&gt;&lt;/p&gt;</code> in my html file.</p>\n\n<p>I have added an image handler to my app.yaml and checked that the order of handlers are fine.</p>\n\n<p>The image is in the images folder under the root directory, but still can't see the image. Could someone help please?</p>\n\n<p>This is my app.yaml</p>\n\n<pre><code>runtime: python37\n\nhandlers:\n\n- url: /static\n\n  static_dir: static\n\n- url: /images\n\n  static_dir: images\n\n  mime_type: image/png\n\n- url: /.*\n\n  script: auto\n</code></pre>\n"}, {"tags": ["python", "python-asyncio"], "answers": [{"comments": [{"owner": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "edited": false, "score": 0, "creation_date": 1558560540, "post_id": 56265239, "comment_id": 99146854, "body": "well yeah, I know it&#39;s the task, but it seems weird that <code>await</code> changes its behaviour if it&#39;s a task?"}, {"owner": {"reputation": 36, "user_id": 11541747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b714fe2d33e8bf9b061e4135e4559fa?s=128&d=identicon&r=PG&f=1", "display_name": "tsuyoku", "link": "https://stackoverflow.com/users/11541747/tsuyoku"}, "reply_to_user": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "edited": false, "score": 0, "creation_date": 1558560783, "post_id": 56265239, "comment_id": 99146935, "body": "Could you clarify how you think it&#39;s behavior changes? <code>await</code> makes main wait until the async function <code>say_after</code> returns."}, {"owner": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "edited": false, "score": 0, "creation_date": 1558575335, "post_id": 56265239, "comment_id": 99149916, "body": "the coroutine doesn&#39;t start until <code>await task1</code>, so it&#39;s not like <code>thread.join</code>"}, {"owner": {"reputation": 36, "user_id": 11541747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b714fe2d33e8bf9b061e4135e4559fa?s=128&d=identicon&r=PG&f=1", "display_name": "tsuyoku", "link": "https://stackoverflow.com/users/11541747/tsuyoku"}, "reply_to_user": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "edited": false, "score": 0, "creation_date": 1558576578, "post_id": 56265239, "comment_id": 99150128, "body": "It starts at <code>asyncio.create_task(say_after(1, &#39;hello&#39;))</code>, when the task is created. try running the code without the <code>await</code> lines you will find that the program prints out <code>hello world</code> still."}, {"owner": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "edited": false, "score": 0, "creation_date": 1558576647, "post_id": 56265239, "comment_id": 99150144, "body": "Have a look at my latest update, it prints <code>Received word</code> after printing <code>Started timestamp</code>"}, {"owner": {"reputation": 102109, "user_id": 1600898, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/01377f8b31f24b0265854666b29d0c03?s=128&d=identicon&r=PG", "display_name": "user4815162342", "link": "https://stackoverflow.com/users/1600898/user4815162342"}, "edited": false, "score": 0, "creation_date": 1558763252, "post_id": 56265239, "comment_id": 99215670, "body": "The <code>say_after</code> function doesn&#39;t start running at <code>create_task</code>, it starts running at the next entry into the event loop. This is what happens (usually) at the next <code>await</code>, regardless of what is being awaited."}], "tags": [], "owner": {"reputation": 36, "user_id": 11541747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b714fe2d33e8bf9b061e4135e4559fa?s=128&d=identicon&r=PG&f=1", "display_name": "tsuyoku", "link": "https://stackoverflow.com/users/11541747/tsuyoku"}, "is_accepted": false, "score": 1, "last_activity_date": 1558560581, "last_edit_date": 1558560581, "creation_date": 1558560460, "answer_id": 56265239, "question_id": 56265166, "link": "https://stackoverflow.com/questions/56265166/python-asyncio-confused-about-await-and-tasks/56265239#56265239", "title": "Python asyncio confused about await and tasks", "body": "<p>Your understanding of await is correct.  It does pause the execution of the main function.</p>\n\n<p>The key is that <code>asyncio.create_task()</code> creates a task and schedules it. </p>\n\n<p>So the <code>say_after</code> function starts running here:</p>\n\n<pre><code>task1 = asyncio.create_task(\n        say_after(1, 'hello'))\n\n    task2 = asyncio.create_task(\n        say_after(2, 'world'))\n</code></pre>\n\n<p>and not when you await.</p>\n\n<p>See here: <a href=\"https://docs.python.org/3/library/asyncio-task.html#asyncio.create_task\" rel=\"nofollow noreferrer\">https://docs.python.org/3/library/asyncio-task.html#asyncio.create_task</a></p>\n"}, {"comments": [{"owner": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "edited": false, "score": 0, "creation_date": 1558575219, "post_id": 56265464, "comment_id": 99149895, "body": "<code>create_task()</code> does not start the coroutine immediately, it only starts until <code>await task1</code>, but my understanding is that <code>awake task1</code> should block executing <code>await task2</code> until <code>task1</code> is finished."}, {"owner": {"reputation": 128, "user_id": 4936749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b2e3a455135cf5ec88fcf045b15b51?s=128&d=identicon&r=PG&f=1", "display_name": "Fanto", "link": "https://stackoverflow.com/users/4936749/fanto"}, "reply_to_user": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "edited": false, "score": 0, "creation_date": 1558596327, "post_id": 56265464, "comment_id": 99154984, "body": "I think that your understanding is correct but just in the view of the function that call the await, in a global point of view the await just switch the execution to another task, that&#39;s why the multitasking with coroutine is cooperative and not preemptive."}, {"owner": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "edited": false, "score": 0, "creation_date": 1558989860, "post_id": 56265464, "comment_id": 99271137, "body": "I just cannot get pass that fact that <code>await task1</code> blocks start executing <code>await task2</code>, if <code>await task2</code> is not executed in the current function context then how can <code>task2</code> run concurrently with <code>task1</code>."}], "tags": [], "owner": {"reputation": 128, "user_id": 4936749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b2e3a455135cf5ec88fcf045b15b51?s=128&d=identicon&r=PG&f=1", "display_name": "Fanto", "link": "https://stackoverflow.com/users/4936749/fanto"}, "is_accepted": true, "score": 1, "last_activity_date": 1558562096, "last_edit_date": 1558562096, "creation_date": 1558561657, "answer_id": 56265464, "question_id": 56265166, "link": "https://stackoverflow.com/questions/56265166/python-asyncio-confused-about-await-and-tasks/56265464#56265464", "title": "Python asyncio confused about await and tasks", "body": "<p>When you encapsulate a coroutine in a Task (or Future) object the coroutine is ready to work, so when the event loop start running on the first await, both task1 and task2 are running.<br></p>\n\n<p>Trying to make it clearer, to execute a coroutine you need two things:<br>\n1) a coroutine incapsulated in a future object(Task) to make it awaitable<br>\n2) a running event loop</p>\n\n<p>In your example the execution works like this:<br>\n1 - create_task1<br>\n2 - create_task2<br>\n3 - await task1<br>\n4 - await sleep of task1<br>\n5 - await sleep of task2<br></p>\n\n<p>now both task1   and task2 are sleeping so, suppose task1 is the first to finish  (sleep some time)</p>\n\n<p>6 - print of task1 <br>\n7 - await task2<br>\n8 - print of task2<br></p>\n\n<p>now the loop end</p>\n\n<p>As you said when you got an await the execution stops, but let me say that stops just in the current \"execution flow\", when you create a future(Task) you create another exucution flow, and the await just switch to the current execution flow.\nThis last explanation is not completely correct in sens of terms but help to make it clearer.</p>\n\n<p>I hope i was clear.\nP.S.: sorry for my bad english.</p>\n"}, {"tags": [], "owner": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "is_accepted": false, "score": 0, "last_activity_date": 1558997297, "creation_date": 1558997297, "answer_id": 56333177, "question_id": 56265166, "link": "https://stackoverflow.com/questions/56265166/python-asyncio-confused-about-await-and-tasks/56333177#56333177", "title": "Python asyncio confused about await and tasks", "body": "<p>OK Both @tsuyoku and @Fanto answers are correct, this answer is just to compliment the existing answers, the important bit for me that I could not grasp was the execution started on <code>create_task()</code>:</p>\n\n<pre><code>import asyncio\nimport time\n\nasync def say_after(delay, what):\n    print('Received {}'.format(what))\n    await asyncio.sleep(delay)\n    print(what)\n\nasync def main():\n    task1 = asyncio.create_task(\n        say_after(1, 'hello')\n    )\n\n    task2 = asyncio.create_task(\n        say_after(2, 'world')\n    )\n\n    print(f\"started at {time.strftime('%X')}\")\n    await asyncio.sleep(10)\n\n    # Wait until both tasks are completed (should take\n    # around 2 seconds.)\n    await task2\n    print('task 2 finished')\n    await task1\n    print('task 1 finished')\n\n    print(f\"finished at {time.strftime('%X')}\")\n\nasyncio.run(main())\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>started at 10:42:10\nReceived hello\nReceived world\nhello\nworld\ntask 2 finished\ntask 1 finished\nfinished at 10:42:20\n</code></pre>\n\n<p>the original misunderstanding is that stuff takes a bit of time to run the tasks, and the original print out in my question misguided me to think the task doesn't run until the <code>await</code> statement.</p>\n"}], "owner": {"reputation": 19827, "user_id": 342553, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/zjZ6d.jpg?s=128&g=1", "display_name": "James Lin", "link": "https://stackoverflow.com/users/342553/james-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 1, "accepted_answer_id": 56265464, "answer_count": 3, "score": 1, "last_activity_date": 1558997297, "creation_date": 1558559992, "last_edit_date": 1558996117, "question_id": 56265166, "link": "https://stackoverflow.com/questions/56265166/python-asyncio-confused-about-await-and-tasks", "title": "Python asyncio confused about await and tasks", "body": "<p>Complete newb here, reading about <a href=\"https://docs.python.org/3/library/asyncio-task.html#asyncio.Task\" rel=\"nofollow noreferrer\">Asycnio Tasks</a> which has this example:</p>\n\n<pre><code>import asyncio\nimport time\n\nasync def say_after(delay, what):\n    await asyncio.sleep(delay)\n    print(what)\n\nasync def main():\n    task1 = asyncio.create_task(\n        say_after(1, 'hello'))\n\n    task2 = asyncio.create_task(\n        say_after(2, 'world'))\n\n    print(f\"started at {time.strftime('%X')}\")\n\n    # Wait until both tasks are completed (should take\n    # around 2 seconds.)\n    await task1\n    await task2\n\n    print(f\"finished at {time.strftime('%X')}\")\n\nasyncio.run(main())\n</code></pre>\n\n<p>My original understanding of <code>await</code> is that it blocks the execution of current function and wait for the async function to return.</p>\n\n<p>But in this case both coroutines are executed concurrently, it doesn't fit well my understanding of <code>await</code>. Could someone please explain?</p>\n\n<p>Further investigation, by adding extra <code>print</code> in <code>say_after</code>, it seems to me the coroutine doesn't start until <code>await</code> happens...</p>\n\n<pre><code>import asyncio\nimport time\n\nasync def say_after(delay, what):\n    print('Received {}'.format(what))\n    await asyncio.sleep(delay)\n    print(what)\n\nasync def main():\n    task1 = asyncio.create_task(\n        say_after(1, 'hello'))\n\n    task2 = asyncio.create_task(\n        say_after(2, 'world'))\n\n    print(f\"started at {time.strftime('%X')}\")\n\n    # Wait until both tasks are completed (should take\n    # around 2 seconds.)\n    await task1\n    await task2\n\n    print(f\"finished at {time.strftime('%X')}\")\n\nasyncio.run(main())\n</code></pre>\n\n<p>prints</p>\n\n<pre><code>started at 13:41:23\nReceived hello\nReceived world\nhello\nworld\nfinished at 13:41:25\n</code></pre>\n"}, {"tags": ["python", "azure-data-factory", "incremental-load"], "comments": [{"owner": {"reputation": 20458, "user_id": 8198946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oRGKD.png?s=128&g=1", "display_name": "Jay Gong", "link": "https://stackoverflow.com/users/8198946/jay-gong"}, "edited": false, "score": 0, "creation_date": 1558662374, "post_id": 56265151, "comment_id": 99183319, "body": "Hi,any updates? Does my answer helps you/"}], "answers": [{"tags": [], "owner": {"reputation": 20458, "user_id": 8198946, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oRGKD.png?s=128&g=1", "display_name": "Jay Gong", "link": "https://stackoverflow.com/users/8198946/jay-gong"}, "is_accepted": false, "score": 0, "last_activity_date": 1558604607, "creation_date": 1558604607, "answer_id": 56272420, "question_id": 56265151, "link": "https://stackoverflow.com/questions/56265151/azuredatafactory-incremental-load-using-python/56272420#56272420", "title": "AzureDataFactory Incremental Load using Python", "body": "<p>According to this <a href=\"https://azure.microsoft.com/en-us/blog/incrementally-copy-new-files-by-lastmodifieddate-with-azure-data-factory/\" rel=\"nofollow noreferrer\">blog</a>, you could only get the Incremental Load feature from ADF SDK by setting <code>modifiedDatetimeStart</code> and <code>modifiedDatetimeEnd</code> properties.</p>\n\n<p>You could set the above properties in the <code>additional_properties</code> of azure_blob_dataset class.</p>\n\n<p><a href=\"https://i.stack.imgur.com/UoYEK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UoYEK.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 568, "user_id": 11103905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c6b87080a7d8d195f7cfd3905dd8559f?s=128&d=identicon&r=PG&f=1", "display_name": "MartinJaffer-MSFT", "link": "https://stackoverflow.com/users/11103905/martinjaffer-msft"}, "is_accepted": false, "score": 0, "last_activity_date": 1561677243, "last_edit_date": 1561677243, "creation_date": 1558629834, "answer_id": 56279704, "question_id": 56265151, "link": "https://stackoverflow.com/questions/56265151/azuredatafactory-incremental-load-using-python/56279704#56279704", "title": "AzureDataFactory Incremental Load using Python", "body": "<p>My investigations suggest that the Python SDK has not yet implemented this feature.  I used the SDK to connect to my existing instance and fetched two example datasets.  I did not find anything that looked like the 'last modified date'.  I tried <code>dataset.serialize()</code> , <code>dataset.__dict__</code> , <code>dataset.properties.__dict__</code> .  I also tried <code>.__slots__</code> .</p>\n\n<p>Trying <code>serialize()</code> is significant because there <em>ought</em> to be parity between the JSON generated in the GUI and the JSON generated by the Python.  The lack of parity suggests the SDK version lags behind the GUI version.</p>\n\n<p>UPDATE: The SDK's are being updated.</p>\n"}], "owner": {"reputation": 6005, "user_id": 207817, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/bf618da338aada19265d866cb9a4af9e?s=128&d=identicon&r=PG", "display_name": "Radhi", "link": "https://stackoverflow.com/users/207817/radhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 219, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577086754, "creation_date": 1558559931, "last_edit_date": 1577086754, "question_id": 56265151, "link": "https://stackoverflow.com/questions/56265151/azuredatafactory-incremental-load-using-python", "title": "AzureDataFactory Incremental Load using Python", "body": "<p>How do I create azure datafactory for incremental load using python?\nWhere should I mention file load option(Incremental Load:LastModifiedOn) while creating activity or pipeline??</p>\n\n<p>We can do that using UI by selecting File Load Option. But how to do the same pragmatically using python?</p>\n\n<p>Does python api for datafactory support this or not?</p>\n"}, {"tags": ["python", "python-3.x", "ubuntu"], "comments": [{"owner": {"reputation": 1603, "user_id": 5879698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d578a2912894d68ed1f822ab5c9c4?s=128&d=identicon&r=PG&f=1", "display_name": "William D. Irons", "link": "https://stackoverflow.com/users/5879698/william-d-irons"}, "edited": false, "score": 1, "creation_date": 1558560143, "post_id": 56265127, "comment_id": 99146715, "body": "Maybe a duplicate of <a href=\"https://stackoverflow.com/questions/9387928/whats-the-difference-between-dist-packages-and-site-packages\" title=\"whats the difference between dist packages and site packages\">stackoverflow.com/questions/9387928/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "reply_to_user": {"reputation": 1603, "user_id": 5879698, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/564d578a2912894d68ed1f822ab5c9c4?s=128&d=identicon&r=PG&f=1", "display_name": "William D. Irons", "link": "https://stackoverflow.com/users/5879698/william-d-irons"}, "edited": false, "score": 0, "creation_date": 1558560290, "post_id": 56265127, "comment_id": 99146766, "body": "I don&#39;t think that question talks about 2.7 vs 3.x tho?"}, {"owner": {"reputation": 11412, "user_id": 617159, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc43cf2d76ce0981a21c0e5a817f96f5?s=128&d=identicon&r=PG", "display_name": "Lambda Fairy", "link": "https://stackoverflow.com/users/617159/lambda-fairy"}, "edited": false, "score": 0, "creation_date": 1559359877, "post_id": 56265127, "comment_id": 99405405, "body": "What is the output of <code>pip3 show gunicorn</code>?"}, {"owner": {"reputation": 972, "user_id": 8351621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mdWPH.jpg?s=128&g=1", "display_name": "David Sidarous", "link": "https://stackoverflow.com/users/8351621/david-sidarous"}, "edited": false, "score": 0, "creation_date": 1559567269, "post_id": 56265127, "comment_id": 99450499, "body": "What distribution are you using? did you build Python yourself?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "edited": false, "score": 0, "creation_date": 1559582511, "post_id": 56265127, "comment_id": 99458361, "body": "I installed just like the OP says"}, {"owner": {"reputation": 1564, "user_id": 2468201, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NCQu7.jpg?s=128&g=1", "display_name": "Ohad the Lad", "link": "https://stackoverflow.com/users/2468201/ohad-the-lad"}, "edited": false, "score": 0, "creation_date": 1559660779, "post_id": 56265127, "comment_id": 99486673, "body": "Exec updatedb ?"}], "answers": [{"tags": [], "owner": {"reputation": 1487, "user_id": 3386820, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002589395458/picture?type=large", "display_name": "Konstantin Svintsov", "link": "https://stackoverflow.com/users/3386820/konstantin-svintsov"}, "is_accepted": false, "score": 1, "last_activity_date": 1559660583, "creation_date": 1559660583, "answer_id": 56446536, "question_id": 56265127, "link": "https://stackoverflow.com/questions/56265127/the-site-packages-folder-exists-for-python2-but-not-python3/56446536#56446536", "title": "The site-packages folder exists for python2 but not python3", "body": "<p>It seems to be Debian feature with dist-packages instead of site-packages.\nYou can check the path for your pip3 installed packages: <code>python3 -c \"import wheel;print(wheel.__file__)\"</code></p>\n"}, {"tags": [], "owner": {"reputation": 770, "user_id": 10378736, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/evugz.jpg?s=128&g=1", "display_name": "nightgaunt", "link": "https://stackoverflow.com/users/10378736/nightgaunt"}, "is_accepted": false, "score": 1, "last_activity_date": 1559899186, "last_edit_date": 1559899186, "creation_date": 1559897872, "answer_id": 56491123, "question_id": 56265127, "link": "https://stackoverflow.com/questions/56265127/the-site-packages-folder-exists-for-python2-but-not-python3/56491123#56491123", "title": "The site-packages folder exists for python2 but not python3", "body": "<p>If your goal is to find where the python is installing your packages, then read on.</p>\n\n<ol>\n<li>Just open the python console using <code>python3</code>.</li>\n<li>Check whether you can import your package directly. (When I say directly, I mean without any virtualenv etc) <code>import gunicorn</code></li>\n<li>Now, in the console if it is working without errors, that means your python3 can find the package.</li>\n<li>If you think where the python looks for packages, the obvious solution to occur would be to use <code>sys.path</code></li>\n<li>So <code>import sys</code> and then <code>print(sys.path)</code> That should give you a list of folders not more than 10. Just navigate through the folders and you will find the path where packages are installed by default.</li>\n</ol>\n\n<p><strong>OR</strong> \nSimply run <code>python3 -m site</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5047085"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "answer_count": 2, "score": 10, "last_activity_date": 1559899186, "creation_date": 1558559777, "question_id": 56265127, "link": "https://stackoverflow.com/questions/56265127/the-site-packages-folder-exists-for-python2-but-not-python3", "title": "The site-packages folder exists for python2 but not python3", "body": "<p>As the root user I see:</p>\n\n<pre><code>root@5d6f29f1d4e9:/usr/local/lib/python2.7# ls -a\n.  ..  dist-packages  site-packages\nroot@5d6f29f1d4e9:/usr/local/lib/python3.6# ls -a\n.  ..  dist-packages\n</code></pre>\n\n<p>and when I run this:</p>\n\n<pre><code>find / -type d -name 'site-packages'\n</code></pre>\n\n<p>the only result is:</p>\n\n<pre><code>/usr/local/lib/python2.7/site-packages\n</code></pre>\n\n<p>does anyone know why I wouldn't see site-packages in 3.6?</p>\n\n<p>I installed python3 with:</p>\n\n<pre><code> apt install -y build-essential libssl-dev libffi-dev python3-dev\n apt install -y python3-pip\n</code></pre>\n\n<p>and then installed a bunch of python package using:</p>\n\n<pre><code> pip3 install gunicorn\n pip3 install wheel\n ...etc...\n</code></pre>\n\n<p>maybe  I didn't install python3 well?  </p>\n"}, {"tags": ["python", "pandas", "matplotlib", "data-visualization"], "answers": [{"tags": [], "owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "is_accepted": false, "score": 1, "last_activity_date": 1558560021, "creation_date": 1558560021, "answer_id": 56265173, "question_id": 56265099, "link": "https://stackoverflow.com/questions/56265099/remove-annotations-on-stacked-barplot-where-value-is-zero/56265173#56265173", "title": "Remove annotations on stacked barplot where value is zero", "body": "<p>One way is to add a condition to the annotation step:</p>\n\n<pre><code>if height &gt; 0:\n    ax_three.annotate('{:.2f} %'.format(height),\n                      (i.get_x()+.15*width,\n                       i.get_y()+.5*height),\n                      rotation=90)\n</code></pre>\n\n<p>Side note: have you tried a line plot instead of a bar plot? Showing changes over time using a line makes more sense to me and might look less busy, but there's no hard answer to that.</p>\n"}], "owner": {"reputation": 1604, "user_id": 7158458, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209106524837718/picture?type=large", "display_name": "Emm", "link": "https://stackoverflow.com/users/7158458/emm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558560021, "creation_date": 1558559589, "last_edit_date": 1558559842, "question_id": 56265099, "link": "https://stackoverflow.com/questions/56265099/remove-annotations-on-stacked-barplot-where-value-is-zero", "title": "Remove annotations on stacked barplot where value is zero", "body": "<p>I have created a stacked barplot showing % of occurrences between 2 classes of objects over a period of time. I have done a visualisation to show this, but I would like to remove annotations where the value of class 1 is = 0.</p>\n\n<p>Here is the visualisation I have at the moment</p>\n\n<p><a href=\"https://i.stack.imgur.com/bisLP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bisLP.png\" alt=\"Visualisation\"></a></p>\n\n<p>If you notice on the picture above, on 29 and 31 (x-axis values) 0.00 appears where the xticks are supposed to be. I would like to remove these annotations in particular.</p>\n\n<p>This is the code I wrote to create the visualisation:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>dat_grouped = dat.groupby(['Hours','Class'])['Amount'].sum()\nax_three = dat_grouped.groupby(level=0).apply(lambda x:round(100*x/x.sum(),3)).unstack().plot.bar(stacked=True)\nfor i in ax_three.patches:\n    width,height=i.get_width(),i.get_height()\n    x,y = i.get_xy()\n    horiz_offset=1\n    vert_offset=2\n    ax_three.legend(bbox_to_anchor=(horiz_offset,vert_offset))\n    ax_three.annotate('{:.2f} %'.format(height),(i.get_x()+.15*width,i.get_y()+.5*height),rotation=90)\n</code></pre>\n"}, {"tags": ["python", "plugins", "gstreamer"], "answers": [{"comments": [{"owner": {"reputation": 2046, "user_id": 2534876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3f8612c2df3a70139f03fd59a38967?s=128&d=identicon&r=PG", "display_name": "JDong", "link": "https://stackoverflow.com/users/2534876/jdong"}, "edited": false, "score": 0, "creation_date": 1567532780, "post_id": 57765964, "comment_id": 101988072, "body": "Possible. I remember trying to compile from source, but on debian perhaps this bug affected me. Thanks, I&#39;ll approve this if I ever get around to working on the python binding again."}], "tags": [], "owner": {"reputation": 23, "user_id": 4723409, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/00334512a8a72d672c12f57a75e3d366?s=128&d=identicon&r=PG", "display_name": "John McMaster", "link": "https://stackoverflow.com/users/4723409/john-mcmaster"}, "is_accepted": false, "score": 2, "last_activity_date": 1567491415, "creation_date": 1567491415, "answer_id": 57765964, "question_id": 56265072, "link": "https://stackoverflow.com/questions/56265072/cannot-load-python-gstreamer-elements/57765964#57765964", "title": "Cannot load python gstreamer elements", "body": "<p>Maybe you have the same issue as me: <a href=\"https://bugs.launchpad.net/ubuntu/+source/gst-python1.0/+bug/1739966\" rel=\"nofollow noreferrer\">https://bugs.launchpad.net/ubuntu/+source/gst-python1.0/+bug/1739966</a></p>\n\n<p>I'm working around by compiling from source.</p>\n"}, {"tags": [], "owner": {"reputation": 1667, "user_id": 1329739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41830c0600e277c0c3e0c956eb1716cb?s=128&d=identicon&r=PG", "display_name": "dturvene", "link": "https://stackoverflow.com/users/1329739/dturvene"}, "is_accepted": false, "score": 4, "last_activity_date": 1584659271, "creation_date": 1584659271, "answer_id": 60766341, "question_id": 56265072, "link": "https://stackoverflow.com/questions/56265072/cannot-load-python-gstreamer-elements/60766341#60766341", "title": "Cannot load python gstreamer elements", "body": "<p>Yes, I hit this same problem on a clean gstreamer install (inside a docker container.) To fix, I cloned <code>gst-python</code> and built it:</p>\n\n<pre><code>cd /home/ml/gst-python\nexport PYTHON=/usr/bin/python3\n./autogen.sh --disable-gtk-doc --noconfigure\n./configure --prefix=/usr --with-libpython-dir=/usr/lib/x86_64-linux-gnu\nmake\nsudo make install\n\necho \"check install\"\nexport GST_PLUGIN_PATH=/usr/lib/gstreamer-1.0\ngst-inspect-1.0 python\n</code></pre>\n\n<p>I then put the python <code>identity_py</code> plugin in a work area under <code>plugins/python</code> and tested:</p>\n\n<pre><code>cd /home/work/gstreamer\n\n# all python plugins are under $PWD/plugins/python\nexport GST_PLUGIN_PATH=$GST_PLUGIN_PATH:$PWD/plugins\n\ngst-inspect-1.0 identity_py\nGST_DEBUG=python:4 gst-launch-1.0 fakesrc num-buffers=10 ! identity_py ! fakesink\n</code></pre>\n\n<p>Quite the little rabbit hole! BTW, I think I could have used the <code>appsink</code> plugin to achieve my purpose.</p>\n"}], "owner": {"reputation": 2046, "user_id": 2534876, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ba3f8612c2df3a70139f03fd59a38967?s=128&d=identicon&r=PG", "display_name": "JDong", "link": "https://stackoverflow.com/users/2534876/jdong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1246, "favorite_count": 1, "answer_count": 2, "score": 4, "last_activity_date": 1584659271, "creation_date": 1558559443, "last_edit_date": 1558565609, "question_id": 56265072, "link": "https://stackoverflow.com/questions/56265072/cannot-load-python-gstreamer-elements", "title": "Cannot load python gstreamer elements", "body": "<p>I'm following a guide at <a href=\"https://mathieuduponchelle.github.io/2018-02-01-Python-Elements.html?gi-language=undefined\" rel=\"nofollow noreferrer\">https://mathieuduponchelle.github.io/2018-02-01-Python-Elements.html?gi-language=undefined</a> to create a sample gstreamer element in Python. However, I can't get GStreamer to load it. I've been fiddling with the <code>GST_PLUGIN_PATH</code> but I can't get my python files to be found. I can get GStreamer to find compiled .so elements, but the python elements seem to evade the plugin loader.</p>\n\n<p>I've installed gstreamer1.0, pygobject, and gst-python to the best of my ability onto Debian 9.8, <code>Linux fe34e822e54e 4.18.0-17-generic #18~18.04.1-Ubuntu SMP Fri Mar 15 15:27:12 UTC 2019 x86_64</code>:</p>\n\n<pre><code>apt install gstreamer1.0-tools\napt install python3-gst-1.0 python-gst-1.0  # install python bindings for gstreamer\napt install python3-gi python3-gi-cairo gir1.2-gtk-3.0  # Install PyGObject as per https://pygobject.readthedocs.io/en/latest/getting_started.html#ubuntu-getting-started\n</code></pre>\n\n<p>I root in <code>/tmp/my_gtest</code>:</p>\n\n<pre><code>$ ls\npython\n$ ls python/\nsrcelement.py\n$ GST_PLUGIN_PATH=$GST_PLUGIN_PATH:$PWD gst-inspect-1.0 audiotestsrc_py\nNo such element or plugin 'audiotestsrc_py'\n$ GST_PLUGIN_PATH=$GST_PLUGIN_PATH:$PWD GST_DEBUG=4 gst-inspect-1.0 --gst-plugin-path=/tmp/g/ audiotestsrc_py\n0:00:00.000117317   900 0x560506a39a00 INFO                GST_INIT gst.c:510:init_pre: Initializing GStreamer Core Library version 1.10.4\n0:00:00.000236545   900 0x560506a39a00 INFO                GST_INIT gst.c:511:init_pre: Using library installed in /usr/lib/x86_64-linux-gnu\n0:00:00.000264897   900 0x560506a39a00 INFO                GST_INIT gst.c:522:init_pre: Linux fe34e822e54e 4.18.0-17-generic #18~18.04.1-Ubuntu SMP Fri Mar 15 15:27:12 UTC 2019 x86_64\n0:00:00.000422525   900 0x560506a39a00 INFO                GST_INIT gst.c:427:add_path_func: Adding plugin path: \"/tmp/my_gtest/\", will scan later\n0:00:00.001049692   900 0x560506a39a00 INFO                GST_INIT gstmessage.c:126:_priv_gst_message_initialize: init messages\n0:00:00.002382651   900 0x560506a39a00 INFO                GST_INIT gstcontext.c:83:_priv_gst_context_initialize: init contexts\n0:00:00.002634936   900 0x560506a39a00 INFO      GST_PLUGIN_LOADING gstplugin.c:316:_priv_gst_plugin_initialize: registering 0 static plugins\n0:00:00.002687971   900 0x560506a39a00 INFO      GST_PLUGIN_LOADING gstplugin.c:224:gst_plugin_register_static: registered static plugin \"staticelements\"\n0:00:00.002695054   900 0x560506a39a00 INFO      GST_PLUGIN_LOADING gstplugin.c:226:gst_plugin_register_static: added static plugin \"staticelements\", result: 1\n0:00:00.002703860   900 0x560506a39a00 INFO            GST_REGISTRY gstregistry.c:1738:ensure_current_registry: reading registry cache: /root/.cache/gstreamer-1.0/registry.x86_64.bin\n0:00:00.007377882   900 0x560506a39a00 INFO            GST_REGISTRY gstregistrybinary.c:619:priv_gst_registry_binary_read_cache: loaded /root/.cache/gstreamer-1.0/registry.x86_64.bin in 0.004664 seconds\n0:00:00.007421588   900 0x560506a39a00 INFO            GST_REGISTRY gstregistry.c:1594:scan_and_update_registry: Validating plugins from registry cache: /root/.cache/gstreamer-1.0/registry.x86_64.bin\n0:00:00.007427719   900 0x560506a39a00 INFO            GST_REGISTRY gstregistry.c:1606:scan_and_update_registry: Scanning plugin path: \"/tmp/my_gtest/\"\n0:00:00.008249182   900 0x560506a39a00 INFO            GST_REGISTRY gstregistry.c:1696:scan_and_update_registry: Registry cache has not changed\n0:00:00.008255509   900 0x560506a39a00 INFO            GST_REGISTRY gstregistry.c:1773:ensure_current_registry: registry reading and updating done, result = 1\n0:00:00.008277874   900 0x560506a39a00 INFO                GST_INIT gst.c:720:init_post: GLib runtime version: 2.50.3\n0:00:00.008282666   900 0x560506a39a00 INFO                GST_INIT gst.c:722:init_post: GLib headers version: 2.50.3\n0:00:00.008286452   900 0x560506a39a00 INFO                GST_INIT gst.c:723:init_post: initialized GStreamer successfully\nNo such element or plugin 'audiotestsrc_py'\n</code></pre>\n\n<p>A hunch is that gst-python isn't properly installed, or my gstreamer wasn't compiled properly (can't trust those packages?). However, the python binding seems fine, as when I run <code>python3</code>:</p>\n\n<pre><code>&gt;&gt;&gt; import gi\n&gt;&gt;&gt; gi.require_version('Gst', '1.0')\n&gt;&gt;&gt; from gi.repository import GObject, Gst\n&gt;&gt;&gt; GObject.threads_init()\n&gt;&gt;&gt; Gst.init(None)\n&gt;&gt;&gt; Gst.ElementFactory.make(\"tee\")\n&lt;__gi__.GstTee object at 0x7f438eef1318 (GstTee at 0x564f28de8000)&gt;\n&gt;&gt;&gt; Gst.ElementFactory.make(\"audiotestsrc_py\")\n&gt;&gt;&gt; \n</code></pre>\n\n<p>You see the same behaviour where the <code>audiotestsrc_py</code> can't be found.</p>\n\n<p>Not sure what to try next, probably going to have to develop the gst plugin in C.</p>\n"}, {"tags": ["python", "tensorflow", "keras", "recommendation-engine", "autoencoder"], "comments": [{"owner": {"reputation": 910, "user_id": 6651736, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKKcx.jpg?s=128&g=1", "display_name": "Benjamin Breton", "link": "https://stackoverflow.com/users/6651736/benjamin-breton"}, "edited": false, "score": 0, "creation_date": 1558560059, "post_id": 56265052, "comment_id": 99146689, "body": "try decreasing the learning rate"}, {"owner": {"reputation": 55, "user_id": 3276720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7143e9ce9ff605acda0d3aee1d87db9b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/3276720/mohammad"}, "reply_to_user": {"reputation": 910, "user_id": 6651736, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKKcx.jpg?s=128&g=1", "display_name": "Benjamin Breton", "link": "https://stackoverflow.com/users/6651736/benjamin-breton"}, "edited": false, "score": 0, "creation_date": 1558598305, "post_id": 56265052, "comment_id": 99155972, "body": "@BenjaminBreton Ok, i tried with <code>Adam(lr=0.00001)</code> and <code>Adam(lr=0.0001)</code> form <code>epochs=800</code> to <code>epochs=8000</code> but still i can not get output from input, and accuracy is about 0.5 which means it rolls a dice for them..."}], "owner": {"reputation": 55, "user_id": 3276720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7143e9ce9ff605acda0d3aee1d87db9b?s=128&d=identicon&r=PG&f=1", "display_name": "Mohammad", "link": "https://stackoverflow.com/users/3276720/mohammad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1558559328, "creation_date": 1558559328, "question_id": 56265052, "link": "https://stackoverflow.com/questions/56265052/how-to-encode-one-row-with-auto-encoder-in-keras", "title": "how to encode one row with auto-encoder in keras", "body": "<p>first of all, i downloaded <a href=\"https://grouplens.org/datasets/movielens/100k/\" rel=\"nofollow noreferrer\">movielens-100K</a> which contains u.data (rating matrix) file.</p>\n\n<p>This code simply read this file and create a sparse tensor for it:</p>\n\n<pre><code>import numpy as np\nimport pandas as pd\nimport tensorflow as tf\nfrom tensorflow import SparseTensor\nfrom tensorflow.python.keras import Input, Model\nfrom tensorflow.python.keras.layers import Dense\n\nencoding_dim = 40\n\nuser_count = 943\nmovie_count = 1682\nrate_count = 100_000\n\nrate_matrix = pd.read_csv('u.data', sep='\\t', names=['user id', 'item id', 'rating', 'timestamp'])\nrate_matrix_indices = [[x - 1, y - 1] for x, y in rate_matrix[['user id', 'item id']].to_numpy().astype(int)]\nrate_matrix_value = rate_matrix['rating'].to_numpy().astype(float)\n\nsparse_rate_tensor = SparseTensor(\n    indices=rate_matrix_indices,\n    values=rate_matrix_value,\n    dense_shape=[user_count, movie_count]\n)\n\nrate_tensor = tf.sparse_tensor_to_dense(sparse_rate_tensor, default_value=0, validate_indices=False, name='rate_tensor')\n</code></pre>\n\n<p>After creating <code>rate_tensor</code> i simply want to fit an AutoEncoder for first column of it which is the rate's of first movie.</p>\n\n<p>i wrote this code for it:</p>\n\n<pre><code>input = Input(shape=(user_count,))\nencoded = Dense(encoding_dim, input_dim=(user_count,), activation=tf.keras.activations.sigmoid)(input)\ndecoded = Dense(user_count, activation=tf.keras.activations.relu)(encoded)\n\nautoencoder = Model(input, decoded)\nautoencoder.summary()\n\nautoencoder.compile(\n    optimizer=tf.keras.optimizers.Adam(),\n    loss=tf.keras.losses.binary_crossentropy,\n    metrics=['accuracy'])\n\nmovie_rates = tf.slice(rate_tensor, [0, 0], [user_count, 1])\nmovie_rates = tf.transpose(movie_rates)\n\nhistory = autoencoder.fit(movie_rates,\n                          movie_rates,\n                          steps_per_epoch=1,\n                          batch_size=1,\n                          epochs=100,\n                          shuffle=True)\n</code></pre>\n\n<p>And here is the output:</p>\n\n<pre><code>Epoch 98/100\n1/1 [==============================] - 0s 2ms/step - loss: -3.1201 - acc: 0.5270\nEpoch 99/100\n1/1 [==============================] - 0s 2ms/step - loss: -3.1274 - acc: 0.5270\nEpoch 100/100\n1/1 [==============================] - 0s 2ms/step - loss: -3.1740 - acc: 0.5270\n</code></pre>\n\n<p>After this progress, i tried to do this simple task by my own and i found out it literally learned nothing !!</p>\n\n<p>This is the code:</p>\n\n<pre><code>encoder = autoencoder.get_weights()[0]\nhidden = np.matmul(movie_rates, encoder)\ndecoder = autoencoder.get_weights()[2]\noutput = np.matmul(hidden, decoder)\ndif = np.sum(output - movie_rates)\n</code></pre>\n\n<p>And the output is : <code>1262.012...</code></p>\n\n<p>Ok, There are two problems here:</p>\n\n<p>first: Why loss is a negative number? what does it mean? (-3.1740)</p>\n\n<p>second: Why didn't it learn anything from that (943, 1) matrix?</p>\n\n<p>Any Help?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "mysql", "scrapy"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1558562300, "post_id": 56265046, "comment_id": 99147368, "body": "python has problem with <code>self.cursor</code> but I don&#39;t see <code>self.cursor</code> in code. Maybe you have two files - one with <code>self.cursor</code> which is used by scraper and second with <code>self.curr</code> which you show here."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11150619, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-88O8kDLCpd4/AAAAAAAAAAI/AAAAAAAAAmw/gK5ZJfXfOWg/photo.jpg?sz=128", "display_name": "how to change", "link": "https://stackoverflow.com/users/11150619/how-to-change"}, "edited": false, "score": 0, "creation_date": 1558654553, "post_id": 56267875, "comment_id": 99182101, "body": "thanks ! I never worked with this before so i sometimes forget stuff like this, much appreciated !"}], "tags": [], "owner": {"reputation": 3401, "user_id": 408951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f82eda1711eeafd65c59205a5454458e?s=128&d=identicon&r=PG", "display_name": "Thiago Curvelo", "link": "https://stackoverflow.com/users/408951/thiago-curvelo"}, "is_accepted": true, "score": 1, "last_activity_date": 1558583741, "creation_date": 1558583741, "answer_id": 56267875, "question_id": 56265046, "link": "https://stackoverflow.com/questions/56265046/error-attributing-items-from-scrapy-into-a-database/56267875#56267875", "title": "error attributing items from scrapy into a database", "body": "<p>You defined the constructor as <code>_init_</code> instead of <code>__init__</code></p>\n"}], "owner": {"reputation": 3, "user_id": 11150619, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-88O8kDLCpd4/AAAAAAAAAAI/AAAAAAAAAmw/gK5ZJfXfOWg/photo.jpg?sz=128", "display_name": "how to change", "link": "https://stackoverflow.com/users/11150619/how-to-change"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 56267875, "answer_count": 1, "score": -1, "last_activity_date": 1558583741, "creation_date": 1558559302, "last_edit_date": 1558560188, "question_id": 56265046, "link": "https://stackoverflow.com/questions/56265046/error-attributing-items-from-scrapy-into-a-database", "title": "error attributing items from scrapy into a database", "body": "<p>am trying to insert items scraped through scrapy into a MySQL database (create a new database if none is present before), I followed an online tutorial since I have no idea how to do this but an error keeps happening.</p>\n\n<p>am trying to store an item that contains 5 text fields into a database</p>\n\n<p>here's my pipeline</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># -*- coding: utf-8 -*-\n\n# Define your item pipelines here\n#\n# Don't forget to add your pipeline to the ITEM_PIPELINES setting\n# See: https://doc.scrapy.org/en/latest/topics/item-pipeline.html\n\n\nimport mysql.connector\n\n\nclass LinkPipeline(object):\n\n    def _init_(self):\n        self.create_connection()\n        self.create_table()\n\n    def create_connection(self):\n        self.conn = mysql.connector.connect(\n            host = 'localhost',\n            user = 'root',\n            passwd = 'facebook123',\n            database = 'link'\n        )\n        self.curr = self.conn.cursor()\n\n    def create_table(self):\n        self.curr.execute(\"\"\"DROP TABLE IF EXISTS link_tb\"\"\")\n        self.curr.execute(\"\"\"create table link_tb(\n                        profile text,\n                        post_url text,\n                        action text,\n                        url text,\n                        date text\n                        )\"\"\")\n\n    def process_item(self,item, spider):\n        self.store_db(item)\n        return(item)\n\n    def store_db(self, item):\n        self.curr.execute(\"\"\"insert into link_tb values (%s,%s,%s,%s,%s)\"\"\", (\n            item['profile'][0],\n            item['post_url'][0],\n            item['action'][0],\n            item['url'][0],\n            item['date'][0]\n        ))\n        self.conn.commit()\n\n</code></pre>\n\n<p>here's a part of my spider </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>        if response.meta['flag'] == 'init':\n            #parse root comment\n            for root in response.xpath('//div[contains(@id,\"root\")]/div/div/div[count(@id)!=1 and contains(\"0123456789\", substring(@id,1,1))]'): \n                new = ItemLoader(item=LinkItem(),selector=root)\n                new.context['lang'] = self.lang\n                new.add_xpath('profile', \"substring-before(.//h3/a/@href, concat(substring('&amp;', 1 div contains(.//h3/a/@href, 'profile.php')), substring('?', 1 div not(contains(.//h3/a/@href, 'profile.php')))))\")\n                new.add_xpath('action','.//div[1]//text()')\n                new.add_xpath('date','.//abbr/text()')\n                new.add_value('post_url',response.meta['link_url'])\n                new.add_value('url',response.url)\n                yield new.load_item()\n</code></pre>\n\n<p>I expect the item to be stored in my \"link\" database but I keep running into this error \n\" self.cursor.execute(\"\"\"insert into link_tb values (%s,%s,%s,%s,%s)\"\"\", (\nAttributeError: 'LinkPipeline' object has no attribute 'cursor'\"</p>\n"}, {"tags": ["python", "scikit-learn", "distance", "mesh"], "comments": [{"owner": {"reputation": 2142, "user_id": 3308951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUOnA.png?s=128&g=1", "display_name": "SyntaxVoid supports Monica", "link": "https://stackoverflow.com/users/3308951/syntaxvoid-supports-monica"}, "edited": false, "score": 0, "creation_date": 1558559446, "post_id": 56265017, "comment_id": 99146465, "body": "In my experiences, I&#39;ve only encountered SIGSEGV when I try to use too much RAM. Can you split up the task at all?"}, {"owner": {"reputation": 1778, "user_id": 7034613, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8554ce8fd53af4a582599b00b5ebfe64?s=128&d=identicon&r=PG&f=1", "display_name": "DsCpp", "link": "https://stackoverflow.com/users/7034613/dscpp"}, "reply_to_user": {"reputation": 2142, "user_id": 3308951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUOnA.png?s=128&g=1", "display_name": "SyntaxVoid supports Monica", "link": "https://stackoverflow.com/users/3308951/syntaxvoid-supports-monica"}, "edited": false, "score": 1, "creation_date": 1558559634, "post_id": 56265017, "comment_id": 99146541, "body": "Unfortunately no, both because &quot;hiding&quot; more faces would make the answer irrelevant, and because mesh with 5000 faces is considered small, I know that those computations can be much bigger."}], "owner": {"reputation": 1778, "user_id": 7034613, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8554ce8fd53af4a582599b00b5ebfe64?s=128&d=identicon&r=PG&f=1", "display_name": "DsCpp", "link": "https://stackoverflow.com/users/7034613/dscpp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 509, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1558559540, "creation_date": 1558559149, "last_edit_date": 1558559540, "question_id": 56265017, "link": "https://stackoverflow.com/questions/56265017/geodesic-distance-on-3d-triangular-mesh-using-scikit-fmm-or-gdist", "title": "geodesic distance on 3d triangular mesh using scikit-fmm or gdist", "body": "<p>I'm trying to evaluate a geodesic distance matrix on the TOSCA dataset.\ne.g. the following 3d mesh-<br>\n<a href=\"https://i.stack.imgur.com/CofTU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CofTU.png\" alt=\"enter image description here\"></a></p>\n\n<p>I've tried using two python implementations.</p>\n\n<ol>\n<li>The first one is the <a href=\"https://github.com/scikit-fmm/scikit-fmm\" rel=\"nofollow noreferrer\">scikit-fmm</a>, which does not seems to work on 3d structures at all (am I right?) hence not suitable to the task.</li>\n<li><p>The other one is the <a href=\"https://github.com/the-virtual-brain/tvb-geodesic\" rel=\"nofollow noreferrer\">gdist</a> package, which Unfortunatlly works on the toy example they provide, but does not work on my mesh, which is only 10,000 faces and 5000 vertices.<br>\nWhen using the gdist library I have the following error:</p>\n\n<pre><code>Process finished with exit code 139 (interrupted by signal 11: SIGSEGV)\n--------CODE SNIPPET----------\nc = sio.loadmat('raw_data/TOSCA/cat0.mat')\nc = c['surface'][0][0]\nX = c[0]\nY = c[1]\nZ = c[2]\nTRIV = c[3].astype(np.int32)\nvertices = np.array(zip(X, Y, Z)).astype(np.float64)\nvertices = np.reshape(vertices, (vertices.shape[0], 3))\nsrc = np.array([1], dtype=np.int32)\ntrg = np.array([2], dtype=np.int32)\n\nnp.random.shuffle(TRIV)\n\na = gdist.compute_gdist(vertices,TRIV[:5000], source_indices = src, target_indices = trg)\n</code></pre></li>\n</ol>\n\n<p>Is there another solution? Am I using gdist or scikit-fmm the wrong way?\n<br></p>\n"}, {"tags": ["python", "pip", "shapely"], "comments": [{"owner": {"reputation": 591, "user_id": 10381765, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VTP3h.png?s=128&g=1", "display_name": "Matt M", "link": "https://stackoverflow.com/users/10381765/matt-m"}, "edited": false, "score": 0, "creation_date": 1559217164, "post_id": 56264988, "comment_id": 99355922, "body": "<code>cd</code> into your Downloads folder and <code>pip install Shapely-1.6.4.post1-cp37-cp37m-win_amd64.whl</code>"}], "answers": [{"tags": [], "owner": {"reputation": 972, "user_id": 8351621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mdWPH.jpg?s=128&g=1", "display_name": "David Sidarous", "link": "https://stackoverflow.com/users/8351621/david-sidarous"}, "is_accepted": false, "score": 0, "last_activity_date": 1558559551, "creation_date": 1558559551, "answer_id": 56265091, "question_id": 56264988, "link": "https://stackoverflow.com/questions/56264988/cant-donwload-shapely-package/56265091#56265091", "title": "Can&#39;t donwload shapely package", "body": "<p>Make sure you specify the full path to the wheel file <code>Shapely-1.6.4.post1-cp37-cp37m-win_amd64.whl</code> in the install command and try again.</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 9012160, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35d9fab7c18ef0fa6afb185aabd091a4?s=128&d=identicon&r=PG&f=1", "display_name": "trideset3", "link": "https://stackoverflow.com/users/9012160/trideset3"}, "is_accepted": false, "score": 0, "last_activity_date": 1567514257, "creation_date": 1567514257, "answer_id": 57771928, "question_id": 56264988, "link": "https://stackoverflow.com/questions/56264988/cant-donwload-shapely-package/57771928#57771928", "title": "Can&#39;t donwload shapely package", "body": "<p>Make sure  you download the right wheel for your Python version, cp37 won't work on any other Python version than 3.7. Also locate the destionation where Python is installed, navigate to venv->scripts and copy the whl there. Then cd to the same location and pip install that wheel.</p>\n"}], "owner": {"reputation": 81, "user_id": 9905291, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Jo&#227;o Pedro Voga", "link": "https://stackoverflow.com/users/9905291/jo%c3%a3o-pedro-voga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 390, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1567514257, "creation_date": 1558558983, "question_id": 56264988, "link": "https://stackoverflow.com/questions/56264988/cant-donwload-shapely-package", "title": "Can&#39;t donwload shapely package", "body": "<p>I need to download shapely, but I always get an error.</p>\n\n<p>At first I tried using:</p>\n\n<pre><code>pip install shapely\n</code></pre>\n\n<p>It did not work, so I searched for it on the internet, and I was told to go here to down load the file: <a href=\"https://www.lfd.uci.edu/~gohlke/pythonlibs/#shapely\" rel=\"nofollow noreferrer\">https://www.lfd.uci.edu/~gohlke/pythonlibs/#shapely</a> and I downloaded the file called Shapely\u20111.6.4.post1\u2011cp37\u2011cp37m\u2011win_amd64.whl, as my windows is 64 bits and this was the latest one. I tried again and it did not work. What I found in this question(<a href=\"https://gis.stackexchange.com/questions/62925/why-is-shapely-not-installing-correctly\">https://gis.stackexchange.com/questions/62925/why-is-shapely-not-installing-correctly</a>) told me to try this:</p>\n\n<pre><code>pip install Shapely-1.6.4.post1-cp37-cp37m-win_amd64\n</code></pre>\n\n<p>It also did not work, but the error message was different.</p>\n\n<p>Here are the error messages I got:</p>\n\n<pre><code>C:\\Users\\Jo\u00e3o Pedro&gt;pip install Shapely\nCollecting Shapely\n  Using cached https://files.pythonhosted.org/packages/a2/fb/7a7af9ef7a35d16fa23\nb127abee272cfc483ca89029b73e92e93cdf36e6b/Shapely-1.6.4.post2.tar.gz\n    ERROR: Complete output from command python setup.py egg_info:\n    ERROR: Traceback (most recent call last):\n      File \"&lt;string&gt;\", line 1, in &lt;module&gt;\n      File \"C:\\Users\\JOOPED~1\\AppData\\Local\\Temp\\pip-install-1wjtbq19\\Shapely\\se\ntup.py\", line 80, in &lt;module&gt;\n        from shapely._buildcfg import geos_version_string, geos_version, \\\n      File \"C:\\Users\\JOOPED~1\\AppData\\Local\\Temp\\pip-install-1wjtbq19\\Shapely\\sh\napely\\_buildcfg.py\", line 200, in &lt;module&gt;\n        lgeos = CDLL(\"geos_c.dll\")\n      File \"c:\\users\\jo\u00e3o pedro\\appdata\\local\\programs\\python\\python37\\lib\\ctype\ns\\__init__.py\", line 356, in __init__\n        self._handle = _dlopen(self._name, mode)\n    OSError: [WinError 126] N\u00e3o foi poss\u00edvel encontrar o m\u00f3dulo especificado\n    ----------------------------------------\nERROR: Command \"python setup.py egg_info\" failed with error code 1 in C:\\Users\\JOOPED~1\\AppData\\Local\\Temp\\pip-install-1wjtbq19\\Shapely\\\n\n\n\n\n\n\nC:\\Users\\Jo\u00e3o Pedro&gt;pip install Shapely-1.6.4.post1-cp37-cp37m-win_amd64\nERROR: Invalid requirement: 'Shapely-1.6.4.post1-cp37-cp37m-win_amd64'\n\n\n\n\n\n\nC:\\Users\\Jo\u00e3o Pedro&gt;python -m pip install Downloads\\Shapely-1.6.4.post1-cp37-cp37m-win_amd64.whl\nWARNING: Requirement 'Downloads\\\\Shapely-1.6.4.post1-cp37-cp37m-win_amd64.whl' looks like a filename, but the file does not exist\nERROR: Shapely-1.6.4.post1-cp37-cp37m-win_amd64.whl is not a valid wheel filename.\n\n\n\n\n\n\nC:\\Users\\Jo\u00e3o Pedro&gt;pip install Downloads\\Shapely-1.6.4.post1-cp37-cp37m-win_amd64.whl\nWARNING: Requirement 'Downloads\\\\Shapely-1.6.4.post1-cp37-cp37m-win_amd64.whl' looks like a filename, but the file does not exist\nERROR: Shapely-1.6.4.post1-cp37-cp37m-win_amd64.whl is not a valid wheel filename.\n</code></pre>\n\n<p>I also have the geos module, because in the PyPI page i says that you need it to have shapely installed.</p>\n"}, {"tags": ["python", "pandas", "datetime"], "comments": [{"owner": {"reputation": 970, "user_id": 10620028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e9c6ed74b548534059fec223fcc94?s=128&d=identicon&r=PG&f=1", "display_name": "iamchoosinganame", "link": "https://stackoverflow.com/users/10620028/iamchoosinganame"}, "edited": false, "score": 2, "creation_date": 1558559156, "post_id": 56264960, "comment_id": 99146344, "body": "I would guess that the try statement is failing. If try fails and except is triggered then your function doesn&#39;t return anything, which is why you&#39;re getting None. If you add a return statement after except that could help. You could put <code>return(&#39;NaN&#39;)</code> instead of just &#39;Nan&#39;"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1558559285, "post_id": 56264960, "comment_id": 99146400, "body": "This is a very good illustration of why you shouldn&#39;t just put a blanket try/except block in your code. If you run it without, the <code>ValueError</code> returned leads you toward your answer"}, {"owner": {"reputation": 910, "user_id": 6651736, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKKcx.jpg?s=128&g=1", "display_name": "Benjamin Breton", "link": "https://stackoverflow.com/users/6651736/benjamin-breton"}, "edited": false, "score": 1, "creation_date": 1558559293, "post_id": 56264960, "comment_id": 99146405, "body": "Your function iterates on row when you <b>apply</b> it. no need to loop. your <b>element</b> here is actually one character of the date, not the whole date."}, {"owner": {"reputation": 92, "user_id": 10689374, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XbfqyQgfd1U/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iTIgqATeBkGbtHu--bA8t25dWkRw/mo/photo.jpg?sz=128", "display_name": "John Ketterer", "link": "https://stackoverflow.com/users/10689374/john-ketterer"}, "edited": false, "score": 0, "creation_date": 1558568826, "post_id": 56264960, "comment_id": 99148782, "body": "Learned a big lesson today, I use pythontutor.com to analyze small pieces of my code sometimes. The program doesn&#39;t support pandas so I used lists. When returning the function to the script I overlooked the for loop. Got some insight on those return statements also. I had to add an IndexError with ValueError and its running smooth."}], "answers": [{"tags": [], "owner": {"reputation": 910, "user_id": 6651736, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xKKcx.jpg?s=128&g=1", "display_name": "Benjamin Breton", "link": "https://stackoverflow.com/users/6651736/benjamin-breton"}, "is_accepted": false, "score": 1, "last_activity_date": 1558559394, "creation_date": 1558559394, "answer_id": 56265064, "question_id": 56264960, "link": "https://stackoverflow.com/questions/56264960/adjusting-the-unusual-format-in-a-dataframe-function-continues-to-return-none/56265064#56265064", "title": "Adjusting the unusual format in a DataFrame, function continues to return None", "body": "<p>You should try:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df = pd.DataFrame({violation_time: ['+.98P','1037A', '0231P', '1206A', \n'0315P', '7824A']})\n\ndef time_converter(time):\n    \"\"\"Converts format of violation_time from HHMMP and HHMMA to datetime, assigns NaN\"\"\"\n    try:\n        if time[-1] == 'A':\n            hour = int(time[0:2])\n            minutes = int(time[2:4])  \n            result = datetime.time(hour, minutes)\n        elif time[-1] =='P':\n            hour = int(time[0:2]) + 12\n            minutes = int(time[2:4]) \n            result = datetime.time(hour, minutes)\n        else:\n            result = 'NaN' \n        return result\n  except ValueError:\n       'NaN'\n\n\ndf['time'] = df.violation_time.apply(time_converter) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1676, "user_id": 8796240, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Frmc2F7AVDs/AAAAAAAAAAI/AAAAAAAAQLM/B_xiXHfq_Ss/photo.jpg?sz=128", "display_name": "yaho cho", "link": "https://stackoverflow.com/users/8796240/yaho-cho"}, "is_accepted": true, "score": 1, "last_activity_date": 1558559417, "creation_date": 1558559417, "answer_id": 56265068, "question_id": 56264960, "link": "https://stackoverflow.com/questions/56264960/adjusting-the-unusual-format-in-a-dataframe-function-continues-to-return-none/56265068#56265068", "title": "Adjusting the unusual format in a DataFrame, function continues to return None", "body": "<p>Is it correct result as following:</p>\n\n<pre><code>  violation_time      time\n0          +.98P      None\n1          1037A  10:37:00\n2          0231P  14:31:00\n3          1206A  12:06:00\n4          0315P  15:15:00\n5          7824A      None\n</code></pre>\n\n<p>I applied <code>lambda</code> as <code>df.violation_time.apply(lambda x: time_converter(x))</code>.\nAnd, You do not need <code>for loop</code> in <code>time_converter</code> function.</p>\n\n<p>Please see the full code as following:</p>\n\n<pre><code>import datetime as datetime\nimport pandas as pd\n\ndf = pd.DataFrame({'violation_time': ['+.98P','1037A', '0231P', '1206A', '0315P', '7824A']})\n\ndef time_converter(times):\n    \"\"\"Converts format of violation_time from HHMMP and HHMMA to datetime, assigns NaN\"\"\"\n    try:\n        element = times\n        if element[-1] == 'A':\n            hour = int(element[0:2])\n            minutes = int(element[2:4])  \n            result = datetime.time(hour, minutes)\n        elif element[-1] =='P':\n            hour = int(element[0:2]) + 12\n            minutes = int(element[2:4]) \n            result = datetime.time(hour, minutes)\n        else:\n            result = 'NaN' \n        return result\n    except ValueError:\n        'NaN'\n\n\ndf['time'] = df.violation_time.apply(lambda x: time_converter(x))  \nprint (df)\n</code></pre>\n"}], "owner": {"reputation": 92, "user_id": 10689374, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-XbfqyQgfd1U/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iTIgqATeBkGbtHu--bA8t25dWkRw/mo/photo.jpg?sz=128", "display_name": "John Ketterer", "link": "https://stackoverflow.com/users/10689374/john-ketterer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 56265068, "answer_count": 2, "score": 1, "last_activity_date": 1558559417, "creation_date": 1558558855, "question_id": 56264960, "link": "https://stackoverflow.com/questions/56264960/adjusting-the-unusual-format-in-a-dataframe-function-continues-to-return-none", "title": "Adjusting the unusual format in a DataFrame, function continues to return None", "body": "<p>I have a pandas dataframe and am runnning this function to adjust the format of the time. Time is formatted in unique ways with some garbage values. </p>\n\n<p>I have tried different return statements, assigning different values to understand how it works and went through all the documentation but still can't figure out why this function keeps returning None.</p>\n\n<pre><code>df = pd.DataFrame({violation_time: ['+.98P','1037A', '0231P', '1206A', \n'0315P', '7824A']}\n\ndef time_converter(times):\n    \"\"\"Converts format of violation_time from HHMMP and HHMMA to datetime, assigns NaN\"\"\"\n    try:\n        for element in times:\n            if element[-1] == 'A':\n                hour = int(element[0:2])\n                minutes = int(element[2:4])  \n                result = datetime.time(hour, minutes)\n            elif element[-1] =='P':\n                hour = int(element[0:2]) + 12\n                minutes = int(element[2:4]) \n                result = datetime.time(hour, minutes)\n            else:\n                result = 'NaN' \n        return result\n    except ValueError:\n        'NaN'\n\n\ndf['time'] = df.violation_time.apply(time_converter)    \n</code></pre>\n\n<p>I expect to have a new series with garbage values eliminated and times formatted as such:\n[10:37,02:31, 00:26, 15:15]\nI am able to get these values outside of pandas by appending to lists, how does differ from pandas?</p>\n"}, {"tags": ["python", "tensorflow", "keras", "callback", "tensorboard"], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 6309590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-fr0O4KaSDFY/AAAAAAAAAAI/AAAAAAAAABI/x9DgpuPJGNg/photo.jpg?sz=128", "display_name": "Squish", "link": "https://stackoverflow.com/users/6309590/squish"}, "edited": false, "score": 0, "creation_date": 1559514236, "post_id": 56409518, "comment_id": 99434332, "body": "I tried your method and it returns a type error since tf.summary.scalar does not have data and step as parameters. What did I do wrong here? TypeError: scalar() got an unexpected keyword argument &#39;step&#39;"}, {"owner": {"reputation": 367, "user_id": 6309590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-fr0O4KaSDFY/AAAAAAAAAAI/AAAAAAAAABI/x9DgpuPJGNg/photo.jpg?sz=128", "display_name": "Squish", "link": "https://stackoverflow.com/users/6309590/squish"}, "edited": false, "score": 0, "creation_date": 1559515021, "post_id": 56409518, "comment_id": 99434436, "body": "And also as you can see from my code above, I have tried using tf_med = tf.summary.scalar(&#39;med&#39;, tf_med_ph) and tf_nmed = tf.summary.scalar(&#39;nmed&#39;, tf_nmed_ph). Is it because I am missing something important like an import maybe? please let me know, I am still struggling even until now."}, {"owner": {"reputation": 10041, "user_id": 5140223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IFV3f.jpg?s=128&g=1", "display_name": "rvinas", "link": "https://stackoverflow.com/users/5140223/rvinas"}, "reply_to_user": {"reputation": 367, "user_id": 6309590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-fr0O4KaSDFY/AAAAAAAAAAI/AAAAAAAAABI/x9DgpuPJGNg/photo.jpg?sz=128", "display_name": "Squish", "link": "https://stackoverflow.com/users/6309590/squish"}, "edited": false, "score": 0, "creation_date": 1559554401, "post_id": 56409518, "comment_id": 99443943, "body": "We might be using different TF versions. I&#39;ve updated my answer. Could you please try this new way?"}, {"owner": {"reputation": 367, "user_id": 6309590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-fr0O4KaSDFY/AAAAAAAAAAI/AAAAAAAAABI/x9DgpuPJGNg/photo.jpg?sz=128", "display_name": "Squish", "link": "https://stackoverflow.com/users/6309590/squish"}, "edited": false, "score": 0, "creation_date": 1559635231, "post_id": 56409518, "comment_id": 99472881, "body": "By using summ_writer do you mean declaring a new FileWriter variable like so? summ_writer = tf.summary.FileWriter(os.path.join(&#39;summaries&#39;), session.graph). If so, this creates a new instance of summary instead of sending it together with the session as you can see in function train(). Is there any way to send the summary to the sess.run instead so that there is no multiple summary?"}, {"owner": {"reputation": 10041, "user_id": 5140223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IFV3f.jpg?s=128&g=1", "display_name": "rvinas", "link": "https://stackoverflow.com/users/5140223/rvinas"}, "reply_to_user": {"reputation": 367, "user_id": 6309590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-fr0O4KaSDFY/AAAAAAAAAAI/AAAAAAAAABI/x9DgpuPJGNg/photo.jpg?sz=128", "display_name": "Squish", "link": "https://stackoverflow.com/users/6309590/squish"}, "edited": false, "score": 0, "creation_date": 1559663814, "post_id": 56409518, "comment_id": 99488323, "body": "Could you try declaring the summary writer outside <code>show_edit_distance</code>? I believe it should be declared only once. Also, you should use the same session all the time"}], "tags": [], "owner": {"reputation": 10041, "user_id": 5140223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IFV3f.jpg?s=128&g=1", "display_name": "rvinas", "link": "https://stackoverflow.com/users/5140223/rvinas"}, "is_accepted": false, "score": 0, "last_activity_date": 1559554298, "last_edit_date": 1559554298, "creation_date": 1559414847, "answer_id": 56409518, "question_id": 56264958, "link": "https://stackoverflow.com/questions/56264958/how-to-visualize-mean-edit-distance-in-tensorboard-using-keras-callback/56409518#56409518", "title": "How to visualize mean edit distance in Tensorboard using Keras callback?", "body": "<p>You could modify <code>show_edit_distance</code> to add the summaries every time this function is being called:</p>\n\n<pre><code>def show_edit_distance(self, num, epoch):\n    ...\n    summary = tf.Summary()\n    summary.value.add(tag='mean_ed', simple_value=mean_ed)\n    summ_writer.add_summary(summary, epoch)\n\n    summary = tf.Summary()\n    summary.value.add(tag='mean_norm_ed', simple_value=mean_norm_ed)\n    summ_writer.add_summary(summary, epoch)\n    ...\n</code></pre>\n\n<p>Note that you will need an extra argument <code>epoch</code>:</p>\n\n<pre><code>def on_epoch_end(self, epoch, logs={}):\n    ...\n    self.show_edit_distance(256, epoch)\n    ...\n</code></pre>\n\n<p>The Tensorboard callback should automatically pick up these summaries, as they're being added to the <code>GraphKeys.SUMMARIES</code> collection.</p>\n\n<p><strong>NOTE:</strong> Unfortunately, I couldn't test the solution. Please let me know if there is something I am missing.</p>\n"}], "owner": {"reputation": 367, "user_id": 6309590, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-fr0O4KaSDFY/AAAAAAAAAAI/AAAAAAAAABI/x9DgpuPJGNg/photo.jpg?sz=128", "display_name": "Squish", "link": "https://stackoverflow.com/users/6309590/squish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 437, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1559554298, "creation_date": 1558558843, "last_edit_date": 1559514548, "question_id": 56264958, "link": "https://stackoverflow.com/questions/56264958/how-to-visualize-mean-edit-distance-in-tensorboard-using-keras-callback", "title": "How to visualize mean edit distance in Tensorboard using Keras callback?", "body": "<p>So far, I have been experimenting with Tensorflow and Keras. I took a code from <a href=\"https://github.com/keras-team/keras/blob/master/examples/image_ocr.py\" rel=\"nofollow noreferrer\">image_ocr.py</a> which allowed me to train printed text ocr. I want to see the training progress as it goes and have successfuly visualized the accuracy and loss of the training model. However, from what I have heard OCR RNN does not take accuracy as a validation but using mean edit distance instead to validate the accuracy of the words. In this case, I have been trying to get a variable called <strong>mean_ed</strong> and <strong>mean_norm_ed</strong> to be visualized in Tensorboard from class <strong><em>VizCallback</em></strong>. I have tried the method from this <a href=\"https://stackoverflow.com/questions/52285501/how-can-i-create-a-custom-callback-in-keras\">link</a> but it still does not work. Can anyone help me with visualizing the mean edit distance variables? Here are the code snippets from my code:</p>\n\n<pre><code>class VizCallback(keras.callbacks.Callback):\n\ndef __init__(self, run_name, test_func, text_img_gen, num_display_words=6):\n    self.test_func = test_func\n    self.output_dir = os.path.join(\n        OUTPUT_DIR, run_name)\n    self.text_img_gen = text_img_gen\n    self.num_display_words = num_display_words\n    if not os.path.exists(self.output_dir):\n        os.makedirs(self.output_dir)\n\ndef on_train_begin(self, logs={}):\n    self.med = []\n    self.nmed = []\n\ndef show_edit_distance(self, num, logs={}):\n    num_left = num\n    mean_norm_ed = 0.0\n    mean_ed = 0.0\n    while num_left &gt; 0:\n        word_batch = next(self.text_img_gen)[0]\n        num_proc = min(word_batch['the_input'].shape[0], num_left)\n        decoded_res = decode_batch(self.test_func, word_batch['the_input'][0:num_proc])\n        for j in range(num_proc):\n            edit_dist = editdistance.eval(decoded_res[j], word_batch['source_str'][j])\n            mean_ed += float(edit_dist)\n            mean_norm_ed += float(edit_dist) / len(word_batch['source_str'][j])\n        num_left -= num_proc\n    mean_norm_ed = mean_norm_ed / num\n    mean_ed = mean_ed / num\n    #Create scalar summaries for both mean edit distance and normalized mean edit distance\n    tf_med_ph = tf.placeholder(tf.float32,shape=None,name='med_summary')\n    tf_nmed_ph = tf.placeholder(tf.float32,shape=None,name='nmed_summary')\n    tf_med = tf.summary.scalar('med', tf_med_ph)\n    tf_nmed = tf.summary.scalar('nmed', tf_nmed_ph)\n    performance_summaries = tf.summary.merge([tf_med,tf_nmed])\n\n    #Create a session for displaying the summary\n    config = tf.ConfigProto(allow_soft_placement=True)\n    session = tf.InteractiveSession(config=config)\n    summ_writer = tf.summary.FileWriter(os.path.join('summaries','first'), session.graph)\n\n    # Execute the summaries defined above\n    summ = session.run(performance_summaries, feed_dict={tf_med_ph:mean_ed, tf_nmed_ph:mean_norm_ed})\n\n    # Write the obtained summaries to the file, so it can be displayed in the TensorBoard\n    summ_writer.add_summary(summ, epoch)\n\n    session.close()\n    print('\\nOut of %d samples:  Mean edit distance: %.3f Mean normalized edit distance: %0.3f'\n          % (num, mean_ed, mean_norm_ed))\n\ndef on_epoch_end(self, epoch, logs={}):\n    self.model.save_weights(os.path.join(self.output_dir, 'weights%02d.h5' % (epoch)))\n    self.show_edit_distance(256)\n    word_batch = next(self.text_img_gen)[0]\n    res = decode_batch(self.test_func, word_batch['the_input'][0:self.num_display_words])\n    if word_batch['the_input'][0].shape[0] &lt; 256:\n        cols = 2\n    else:\n        cols = 1\n    for i in range(self.num_display_words):\n        plt.subplot(self.num_display_words // cols, cols, i + 1)\n        if K.image_data_format() == 'channels_first':\n            the_input = word_batch['the_input'][i, 0, :, :]\n        else:\n            the_input = word_batch['the_input'][i, :, :, 0]\n        plt.imshow(the_input.T, cmap='Greys_r')\n        plt.xlabel('Truth = \\'%s\\'\\nDecoded = \\'%s\\'' % (word_batch['source_str'][i], res[i]))\n    fig = plt.gcf()\n    fig.set_size_inches(10, 13)\n    plt.savefig(os.path.join(self.output_dir, 'e%02d.png' % (epoch)))\n    plt.close()\n\ndef train(run_name, start_epoch, stop_epoch, img_w):\n# Input Parameters\nimg_h = 64\nwords_per_epoch = 16000\nval_split = 0.2\nval_words = int(words_per_epoch * (val_split))\n\n# Network parameters\nconv_filters = 16\nkernel_size = (3, 3)\npool_size = 2\ntime_dense_size = 32\nrnn_size = 512\nminibatch_size = 32\n\nif K.image_data_format() == 'channels_first':\n    input_shape = (1, img_w, img_h)\nelse:\n    input_shape = (img_w, img_h, 1)\n\nfdir = os.path.dirname(get_file('wordlists.tgz',\n                                origin='http://test.com/wordlist.tgz', untar=True))\n\nimg_gen = TextImageGenerator(monogram_file=os.path.join(fdir, 'wordlist_mono_clean.txt'),\n                             bigram_file=os.path.join(fdir, 'wordlist_bi_clean.txt'),\n                             minibatch_size=minibatch_size,\n                             img_w=img_w,\n                             img_h=img_h,\n                             downsample_factor=(pool_size ** 2),\n                             val_split=words_per_epoch - val_words\n                             )\nact = 'relu'\ninput_data = Input(name='the_input', shape=input_shape, dtype='float32')\ninner = Conv2D(conv_filters, kernel_size, padding='same',\n               activation=act, kernel_initializer='he_normal',\n               name='conv1')(input_data)\ninner = MaxPooling2D(pool_size=(pool_size, pool_size), name='max1')(inner)\ninner = Conv2D(conv_filters, kernel_size, padding='same',\n               activation=act, kernel_initializer='he_normal',\n               name='conv2')(inner)\ninner = MaxPooling2D(pool_size=(pool_size, pool_size), name='max2')(inner)\n\nconv_to_rnn_dims = (img_w // (pool_size ** 2), (img_h // (pool_size ** 2)) * conv_filters)\ninner = Reshape(target_shape=conv_to_rnn_dims, name='reshape')(inner)\n\n# cuts down input size going into RNN:\ninner = Dense(time_dense_size, activation=act, name='dense1')(inner)\n\n# Two layers of bidirectional GRUs\n# GRU seems to work as well, if not better than LSTM:\n\ngru_1 = GRU(rnn_size, return_sequences=True, kernel_initializer='he_normal', name='gru1')(inner)\ngru_1b = GRU(rnn_size, return_sequences=True, go_backwards=True, kernel_initializer='he_normal', name='gru1_b')(inner)\ngru1_merged = add([gru_1, gru_1b])\ngru_2 = GRU(rnn_size, return_sequences=True, kernel_initializer='he_normal', name='gru2')(gru1_merged)\ngru_2b = GRU(rnn_size, return_sequences=True, go_backwards=True, kernel_initializer='he_normal', name='gru2_b')(gru1_merged)\n\n# transforms RNN output to character activations:\ninner = Dense(img_gen.get_output_size(), kernel_initializer='he_normal',\n              name='dense2')(concatenate([gru_2, gru_2b]))\ny_pred = Activation('softmax', name='softmax')(inner)\nModel(inputs=input_data, outputs=y_pred).summary()\n\nlabels = Input(name='the_labels', shape=[img_gen.absolute_max_string_len], dtype='float32')\ninput_length = Input(name='input_length', shape=[1], dtype='int64')\nlabel_length = Input(name='label_length', shape=[1], dtype='int64')\n# Keras doesn't currently support loss funcs with extra parameters\n# so CTC loss is implemented in a lambda layer\nloss_out = Lambda(ctc_lambda_func, output_shape=(1,), name='ctc')([y_pred, labels, input_length, label_length])\n\n# clipnorm seems to speeds up convergence\nsgd = SGD(lr=0.01, decay=1e-6, momentum=0.9, nesterov=True, clipnorm=5)\n\nmodel = Model(inputs=[input_data, labels, input_length, label_length], outputs=loss_out)\n\n#Make tensorboard instance\ninit_op = tf.initialize_all_variables()\n\nsess = tf.Session()\nsess.run(init_op)\ntbname=\"tensorboard-of-{}\".format(int(time.time()))\ntensorboard = keras.callbacks.TensorBoard(\nlog_dir=\"logs/{}\".format(tbname),\nhistogram_freq=0,\nwrite_images=True)\n\n# the loss calc occurs elsewhere, so use a dummy lambda func for the loss\nmodel.compile(loss={'ctc': lambda y_true, y_pred: y_pred}, optimizer=sgd,\n          metrics=['accuracy'])\nif start_epoch &gt; 0:\n    weight_file = os.path.join(OUTPUT_DIR, os.path.join(run_name, 'weights%02d.h5' % (start_epoch - 1)))\n    model.load_weights(weight_file)\n# captures output of softmax so we can decode the output during visualization\ntest_func = K.function([input_data], [y_pred])\n\nviz_cb = VizCallback(run_name, test_func, img_gen.next_val())\n\nmodel.fit_generator(generator=img_gen.next_train(),\n                    steps_per_epoch=(words_per_epoch - val_words) // minibatch_size,\n                    epochs=stop_epoch,\n                    validation_data=img_gen.next_val(),\n                    validation_steps=val_words // minibatch_size,\n                    callbacks=[tensorboard,viz_cb, img_gen],\n                    initial_epoch=start_epoch)\n</code></pre>\n\n<p>Any help would be much appriciated. Thank you!</p>\n\n<p><strong>P.S.</strong> I am using Tensorflow 1.9.0 and Python 3.6.8</p>\n\n<p><strong>UPDATE</strong>\nnow it is just a matter of passing the variable performance_summaries from the VizCallbak class towards the metrics in the train function. Any help here?</p>\n"}, {"tags": ["python", "matplotlib", "pyspark", "jupyter-notebook", "amazon-emr"], "comments": [{"owner": {"reputation": 864, "user_id": 7697190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a914c2d6c6a301848a5ee455cf9d3649?s=128&d=identicon&r=PG&f=1", "display_name": "DaRkMaN", "link": "https://stackoverflow.com/users/7697190/darkman"}, "edited": false, "score": 0, "creation_date": 1558850880, "post_id": 56264957, "comment_id": 99231898, "body": "From the image posted by @FoxanNg, I could see that the jupyter instance is using a conda env(which could a virtualenv created for Jupyter). Could we try installing <code>matplotlib</code> using <code>conda</code> instead of <code>pip</code>, in the bootstrap and give it a try."}, {"owner": {"reputation": 4552, "user_id": 1953819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25db8a5e9cebb4eb3d3046f14d997c96?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1953819/matt"}, "reply_to_user": {"reputation": 864, "user_id": 7697190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a914c2d6c6a301848a5ee455cf9d3649?s=128&d=identicon&r=PG&f=1", "display_name": "DaRkMaN", "link": "https://stackoverflow.com/users/7697190/darkman"}, "edited": false, "score": 0, "creation_date": 1558968315, "post_id": 56264957, "comment_id": 99263928, "body": "When trying to invoke conda in my bootstrap file it does not know where to find it (it gets a command not found error.)"}, {"owner": {"reputation": 864, "user_id": 7697190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a914c2d6c6a301848a5ee455cf9d3649?s=128&d=identicon&r=PG&f=1", "display_name": "DaRkMaN", "link": "https://stackoverflow.com/users/7697190/darkman"}, "edited": false, "score": 0, "creation_date": 1558968746, "post_id": 56264957, "comment_id": 99264128, "body": "I am not sure how the cluster is setup. But from the image looks like `/opt/conda/bin/conda&#39;. Can we use the full path to install?"}, {"owner": {"reputation": 4552, "user_id": 1953819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25db8a5e9cebb4eb3d3046f14d997c96?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1953819/matt"}, "reply_to_user": {"reputation": 864, "user_id": 7697190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a914c2d6c6a301848a5ee455cf9d3649?s=128&d=identicon&r=PG&f=1", "display_name": "DaRkMaN", "link": "https://stackoverflow.com/users/7697190/darkman"}, "edited": false, "score": 0, "creation_date": 1559087219, "post_id": 56264957, "comment_id": 99307630, "body": "it doesn&#39;t think conda is installed at bootstrap: <code>&#47;opt&#47;conda&#47;bin&#47;conda: command not found</code>"}, {"owner": {"reputation": 864, "user_id": 7697190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a914c2d6c6a301848a5ee455cf9d3649?s=128&d=identicon&r=PG&f=1", "display_name": "DaRkMaN", "link": "https://stackoverflow.com/users/7697190/darkman"}, "edited": false, "score": 0, "creation_date": 1559128501, "post_id": 56264957, "comment_id": 99322057, "body": "Started an EMR cluster, and found that it doesn&#39;t provide conda support by default. Could you confirm if we are not installing Conda via bootstrap?"}, {"owner": {"reputation": 4552, "user_id": 1953819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25db8a5e9cebb4eb3d3046f14d997c96?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1953819/matt"}, "reply_to_user": {"reputation": 864, "user_id": 7697190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a914c2d6c6a301848a5ee455cf9d3649?s=128&d=identicon&r=PG&f=1", "display_name": "DaRkMaN", "link": "https://stackoverflow.com/users/7697190/darkman"}, "edited": false, "score": 0, "creation_date": 1559167087, "post_id": 56264957, "comment_id": 99340725, "body": "We are not installing conda during bootstrap"}, {"owner": {"reputation": 6547, "user_id": 4522780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa0b7f88da44e626b9f09934afcad97?s=128&d=identicon&r=PG&f=1", "display_name": "Nizam Mohamed", "link": "https://stackoverflow.com/users/4522780/nizam-mohamed"}, "edited": false, "score": 0, "creation_date": 1559237138, "post_id": 56264957, "comment_id": 99366035, "body": "The <code>%</code> commands are IPython or Jupyter magic commands. Run <code>%lsmagic</code> and check <code>%matplotlib</code> is among them. If <code>%matplotlib</code> is found, run <code>%matplotlib -l</code> to list available backends. You can explicitly require a specific backend by running <code>%matplotlib &lt;backend name&gt;</code>"}, {"owner": {"reputation": 6547, "user_id": 4522780, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa0b7f88da44e626b9f09934afcad97?s=128&d=identicon&r=PG&f=1", "display_name": "Nizam Mohamed", "link": "https://stackoverflow.com/users/4522780/nizam-mohamed"}, "edited": false, "score": 0, "creation_date": 1559237335, "post_id": 56264957, "comment_id": 99366123, "body": "If you can&#39;t see <code>%matplotlib</code> among the output of <code>%lsmagic</code>, try <code>%pylab</code>. It justs imports <code>matplotlib</code> and <code>numpy</code> . If you want help for a particular magic command try <code>%command?</code>"}, {"owner": {"reputation": 814, "user_id": 1725415, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/JTIv1.jpg?s=128&g=1", "display_name": "Aman Mundra", "link": "https://stackoverflow.com/users/1725415/aman-mundra"}, "edited": false, "score": 0, "creation_date": 1560017752, "post_id": 56264957, "comment_id": 99605070, "body": "@Matt Install matplotlb like this and then try:  sudo python3 -m pip install matplotlib"}], "answers": [{"comments": [{"owner": {"reputation": 4552, "user_id": 1953819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25db8a5e9cebb4eb3d3046f14d997c96?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1953819/matt"}, "edited": false, "score": 3, "creation_date": 1558559697, "post_id": 56265016, "comment_id": 99146575, "body": "I appreciate the attempted solution. I tried to address this in the question but this fails on the line <code>%matplotlib inline</code> with this error (I&#39;ll add the error to the original question): unknown magic command &#39;matplotlib&#39; UnknownMagic: unknown magic command &#39;matplotlib&#39;"}, {"owner": {"reputation": 556, "user_id": 10671246, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RGCjZMD-Fno/AAAAAAAAAAI/AAAAAAAAPdQ/adV6fj4Rs8U/photo.jpg?sz=128", "display_name": "Prachiti Prakash Prabhu", "link": "https://stackoverflow.com/users/10671246/prachiti-prakash-prabhu"}, "reply_to_user": {"reputation": 4552, "user_id": 1953819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25db8a5e9cebb4eb3d3046f14d997c96?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1953819/matt"}, "edited": false, "score": 3, "creation_date": 1558560607, "post_id": 56265016, "comment_id": 99146880, "body": "okay..one more attempt..could you try <code>get_ipython().magic(u&#39;matplotlib inline&#39;)</code> instead of <code>%matplotlib inline</code>"}, {"owner": {"reputation": 4552, "user_id": 1953819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25db8a5e9cebb4eb3d3046f14d997c96?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1953819/matt"}, "edited": false, "score": 1, "creation_date": 1558560815, "post_id": 56265016, "comment_id": 99146945, "body": "Thanks, but unfortunately <code>get_ipython()</code> returns <code>None</code> and thus <code>get_ipython().magic()</code> fails :("}, {"owner": {"reputation": 171, "user_id": 1585486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mR7HK.jpg?s=128&g=1", "display_name": "Pablo Adames", "link": "https://stackoverflow.com/users/1585486/pablo-adames"}, "reply_to_user": {"reputation": 4552, "user_id": 1953819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25db8a5e9cebb4eb3d3046f14d997c96?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1953819/matt"}, "edited": false, "score": 0, "creation_date": 1600176481, "post_id": 56265016, "comment_id": 113000651, "body": "Using @Matt recommendation I get <code>name &#39;get_ipython&#39; is not defined</code>"}], "tags": [], "owner": {"reputation": 556, "user_id": 10671246, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RGCjZMD-Fno/AAAAAAAAAAI/AAAAAAAAPdQ/adV6fj4Rs8U/photo.jpg?sz=128", "display_name": "Prachiti Prakash Prabhu", "link": "https://stackoverflow.com/users/10671246/prachiti-prakash-prabhu"}, "is_accepted": false, "score": 2, "last_activity_date": 1558559140, "creation_date": 1558559140, "answer_id": 56265016, "question_id": 56264957, "link": "https://stackoverflow.com/questions/56264957/how-do-i-make-matplotlib-work-in-aws-emr-jupyter-notebook/56265016#56265016", "title": "How do I make matplotlib work in AWS EMR Jupyter notebook?", "body": "<p>The following should work:</p>\n\n<pre><code>import matplotlib\n%matplotlib inline\nimport matplotlib.pyplot as plt\nplt.plot([1,2,3,4])\n</code></pre>\n\n<p>Run the entire script in one cell</p>\n"}, {"comments": [{"owner": {"reputation": 4552, "user_id": 1953819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25db8a5e9cebb4eb3d3046f14d997c96?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1953819/matt"}, "edited": false, "score": 1, "creation_date": 1558640634, "post_id": 56266613, "comment_id": 99177858, "body": "This answer makes the first cell (where I put <code>%%local</code>) run much more quickly but adding any additional imports (such as tensorflow) fails despite being installed and working previously. Upvoting because it technically makes the code snippet run, but not accepting because it renders the notebook nearly unusable."}, {"owner": {"reputation": 1495, "user_id": 6246107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/139889820052d02ab40c3a3db5aa3f33?s=128&d=identicon&r=PG&f=1", "display_name": "Kenry Sanchez", "link": "https://stackoverflow.com/users/6246107/kenry-sanchez"}, "edited": false, "score": 0, "creation_date": 1559190515, "post_id": 56266613, "comment_id": 99345397, "body": "is not there a way to install matplotlib in that docker container??. I mean, maybe with <code>conda</code>"}, {"owner": {"reputation": 1495, "user_id": 6246107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/139889820052d02ab40c3a3db5aa3f33?s=128&d=identicon&r=PG&f=1", "display_name": "Kenry Sanchez", "link": "https://stackoverflow.com/users/6246107/kenry-sanchez"}, "edited": false, "score": 0, "creation_date": 1559190577, "post_id": 56266613, "comment_id": 99345407, "body": "<a href=\"https://docs.aws.amazon.com/emr/latest/ReleaseGuide/emr-jupyterhub-install-kernels-libs.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/emr/latest/ReleaseGuide/&hellip;</a>"}, {"owner": {"reputation": 171, "user_id": 1585486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mR7HK.jpg?s=128&g=1", "display_name": "Pablo Adames", "link": "https://stackoverflow.com/users/1585486/pablo-adames"}, "edited": false, "score": 1, "creation_date": 1600184327, "post_id": 56266613, "comment_id": 113004959, "body": "This answer may be applicable to other contexts but it is not working on an AWS Jupyter notebook connected to an EMR cluster running the Sparkmagic (PySpark) kernel."}], "tags": [], "owner": {"reputation": 5889, "user_id": 2684954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/710b8a0f42fcce74e358d1749d587795?s=128&d=identicon&r=PG", "display_name": "Foxan Ng", "link": "https://stackoverflow.com/users/2684954/foxan-ng"}, "is_accepted": false, "score": 5, "last_activity_date": 1558571337, "creation_date": 1558571337, "answer_id": 56266613, "question_id": 56264957, "link": "https://stackoverflow.com/questions/56264957/how-do-i-make-matplotlib-work-in-aws-emr-jupyter-notebook/56266613#56266613", "title": "How do I make matplotlib work in AWS EMR Jupyter notebook?", "body": "<p>As you mentioned, <code>matplotlib</code> is not installed on the EMR cluster, therefore such error will occur:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Shz4W.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/Shz4W.png\" alt=\"error\"></a></p>\n\n<p>However, it is actually available in the managed Jupyter notebook instance (the docker container). Using the <code>%%local</code> magic will allow you to run the cell locally:</p>\n\n<p><a href=\"https://i.stack.imgur.com/lCxat.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/lCxat.png\" alt=\"local\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 171, "user_id": 1585486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mR7HK.jpg?s=128&g=1", "display_name": "Pablo Adames", "link": "https://stackoverflow.com/users/1585486/pablo-adames"}, "edited": false, "score": 0, "creation_date": 1600176778, "post_id": 58087756, "comment_id": 113000836, "body": "This does not work on an AWS Sagemaker jupyter notebook running the Sparkmagic (PySpark) kernel."}], "tags": [], "owner": {"reputation": 1, "user_id": 7014772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68319c04f5893fac41dbd1590a215789?s=128&d=identicon&r=PG&f=1", "display_name": "vinay", "link": "https://stackoverflow.com/users/7014772/vinay"}, "is_accepted": false, "score": -1, "last_activity_date": 1569357614, "last_edit_date": 1569357614, "creation_date": 1569357256, "answer_id": 58087756, "question_id": 56264957, "link": "https://stackoverflow.com/questions/56264957/how-do-i-make-matplotlib-work-in-aws-emr-jupyter-notebook/58087756#58087756", "title": "How do I make matplotlib work in AWS EMR Jupyter notebook?", "body": "<p>Try below code. FYI we have matplotlib 3.1.1 installed in Python3.6 on emr-5.26.0 and i used PySpark Kernel.\nMake sure that \"%matplotlib inline\" is first line in cell </p>\n\n<pre><code>%matplotlib inline\n\nimport matplotlib\nimport matplotlib.pyplot as plt\nplt.plot([1,2,3,4])\nplt.show()\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 435, "user_id": 5825268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8gQj1.png?s=128&g=1", "display_name": "00schneider", "link": "https://stackoverflow.com/users/5825268/00schneider"}, "is_accepted": false, "score": 2, "last_activity_date": 1574527530, "last_edit_date": 1574527530, "creation_date": 1574253056, "answer_id": 58954434, "question_id": 56264957, "link": "https://stackoverflow.com/questions/56264957/how-do-i-make-matplotlib-work-in-aws-emr-jupyter-notebook/58954434#58954434", "title": "How do I make matplotlib work in AWS EMR Jupyter notebook?", "body": "<p>Import matplotlib as </p>\n\n<pre><code>import matplotlib.pyplot as plt\n</code></pre>\n\n<p>and use the magic command <code>%matplot plt</code> instead as shown in the tutorial here: <a href=\"https://aws.amazon.com/de/blogs/big-data/install-python-libraries-on-a-running-cluster-with-emr-notebooks/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/de/blogs/big-data/install-python-libraries-on-a-running-cluster-with-emr-notebooks/</a></p>\n"}, {"comments": [{"owner": {"reputation": 171, "user_id": 1585486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mR7HK.jpg?s=128&g=1", "display_name": "Pablo Adames", "link": "https://stackoverflow.com/users/1585486/pablo-adames"}, "edited": false, "score": 0, "creation_date": 1600176889, "post_id": 60969284, "comment_id": 113000898, "body": "This is the command that shows the plot. Finally, an answer from someone that was having the same use case of the original question and mine, an AWS Sagemaker Jupyter notebook connected to a Sparkmagic (PySpark) kernel"}, {"owner": {"reputation": 460, "user_id": 2571607, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/de7e509064c3bb4dc31163a8885a4c27?s=128&d=identicon&r=PG", "display_name": "Yue Y", "link": "https://stackoverflow.com/users/2571607/yue-y"}, "edited": false, "score": 0, "creation_date": 1612483877, "post_id": 60969284, "comment_id": 116788757, "body": "When I run %matplot plt after the plot I get error: UsageError: Cell magic <code>%%matplot</code> not found."}, {"owner": {"reputation": 3591, "user_id": 5539715, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1057110085/picture?type=large", "display_name": "Nic Scozzaro", "link": "https://stackoverflow.com/users/5539715/nic-scozzaro"}, "edited": false, "score": 0, "creation_date": 1616091746, "post_id": 60969284, "comment_id": 117901844, "body": "For me that just outputs a really long string that is maybe a base64 representation of the image."}], "tags": [], "owner": {"reputation": 73, "user_id": 2661097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zAmxb.jpg?s=128&g=1", "display_name": "Madaditya", "link": "https://stackoverflow.com/users/2661097/madaditya"}, "is_accepted": false, "score": 5, "last_activity_date": 1585738559, "creation_date": 1585738559, "answer_id": 60969284, "question_id": 56264957, "link": "https://stackoverflow.com/questions/56264957/how-do-i-make-matplotlib-work-in-aws-emr-jupyter-notebook/60969284#60969284", "title": "How do I make matplotlib work in AWS EMR Jupyter notebook?", "body": "<p>The answer by @00schneider actually works.</p>\n\n<pre><code>import matplotlib.pyplot as plt\n\n# plot data here\nplt.show()\n</code></pre>\n\n<p>after </p>\n\n<blockquote>\n  <p>plt.show()</p>\n</blockquote>\n\n<p>re-run the magic cell that contains the below, and you will see a plot on your AWS EMR Jupyter PySpark notebook</p>\n\n<pre><code>%matplot plt\n</code></pre>\n"}], "owner": {"reputation": 4552, "user_id": 1953819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/25db8a5e9cebb4eb3d3046f14d997c96?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1953819/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4548, "favorite_count": 3, "answer_count": 5, "score": 23, "last_activity_date": 1585738559, "creation_date": 1558558814, "last_edit_date": 1558559914, "question_id": 56264957, "link": "https://stackoverflow.com/questions/56264957/how-do-i-make-matplotlib-work-in-aws-emr-jupyter-notebook", "title": "How do I make matplotlib work in AWS EMR Jupyter notebook?", "body": "<p>This is very close to this question, but I have added a few details specific to my question:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/55444934/matplotlib-plotting-using-aws-emr-jupyter-notebook\">Matplotlib Plotting using AWS-EMR jupyter notebook</a></p>\n\n<p>I would like to find a way to use matplotlib inside my Jupyter notebook. Here is the code-snippet in error, it's fairly simple:</p>\n\n<p><strong>notebook</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import matplotlib\nmatplotlib.use(\"agg\")\nimport matplotlib.pyplot as plt\nplt.plot([1,2,3,4])\nplt.show()\n</code></pre>\n\n<p>I chose this snippet because this line alone fails as it tries to use TKinter (which is not installed on an AWS EMR cluster): </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import matplotlib.pyplot as plt\n</code></pre>\n\n<p>When I run the full notebook snippet, the result is no runtime error but also nothing happens (no graph is shown.) My understanding on one way this can work is by adding either of the following snips: </p>\n\n<p><strong>pyspark magic notation</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>%matplotlib inline\n</code></pre>\n\n<p>results</p>\n\n<pre><code>unknown magic command 'matplotlib'\nUnknownMagic: unknown magic command 'matplotlib'\n</code></pre>\n\n<p><strong>IPython explicit magic call</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from IPython import get_ipython\nget_ipython().run_line_magic('matplotlib', 'inline')\n</code></pre>\n\n<p>results</p>\n\n<pre><code>'NoneType' object has no attribute 'run_line_magic'\nTraceback (most recent call last):\nAttributeError: 'NoneType' object has no attribute 'run_line_magic'\n\n</code></pre>\n\n<p>to my notebook which invokes a spark magic command which inlines matplotlib plots (at least that's my interpretation.) I have tried both of these after using a bootstrap action:</p>\n\n<p><strong>EMR bootstrap</strong></p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>sudo pip install matplotlib\nsudo pip install ipython\n</code></pre>\n\n<p>Even with these added, I still get an error that there is no magic for matplotlib. So my question is definitely:</p>\n\n<p><strong>Question</strong></p>\n\n<p>How do I make matplotlib work in an AWS EMR Jupyter notebook? </p>\n\n<p>(Or how do I view graphs and plot images in AWS EMR Jupyter notebook?)</p>\n"}, {"tags": ["python", "pandas", "time-series"], "comments": [{"owner": {"reputation": 682, "user_id": 9994799, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153733992696150/picture?type=large", "display_name": "ai.jennetta", "link": "https://stackoverflow.com/users/9994799/ai-jennetta"}, "edited": false, "score": 0, "creation_date": 1558558938, "post_id": 56264935, "comment_id": 99146257, "body": "@BenPap what do you mean by &quot;then take the mean of the rest&quot;? I will get too many intervals, how do I get rid of the unwanted intervals?"}, {"owner": {"reputation": 682, "user_id": 9994799, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153733992696150/picture?type=large", "display_name": "ai.jennetta", "link": "https://stackoverflow.com/users/9994799/ai-jennetta"}, "reply_to_user": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1558558977, "post_id": 56264935, "comment_id": 99146280, "body": "@QuangHoang yes that is precisely my question."}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1558559105, "post_id": 56264935, "comment_id": 99146325, "body": "I mean if <code>&#39;00:00:00-04:59:59&#39;</code> is the first block, then <code>20:00:00-23:59:59</code> the last block?"}, {"owner": {"reputation": 682, "user_id": 9994799, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153733992696150/picture?type=large", "display_name": "ai.jennetta", "link": "https://stackoverflow.com/users/9994799/ai-jennetta"}, "reply_to_user": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1558559189, "post_id": 56264935, "comment_id": 99146356, "body": "@QuangHoang that&#39;s not what I want. I think I worded it pretty clearly in my question. I want 1 5 hour time interval per day."}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1558559366, "post_id": 56264935, "comment_id": 99146427, "body": "Does it have to start from <code>10:00:00</code> or from <code>00:00:00</code> works?"}, {"owner": {"reputation": 682, "user_id": 9994799, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153733992696150/picture?type=large", "display_name": "ai.jennetta", "link": "https://stackoverflow.com/users/9994799/ai-jennetta"}, "reply_to_user": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1558559578, "post_id": 56264935, "comment_id": 99146516, "body": "it will take the mean of all the data between 10:00-15:00 every day"}], "answers": [{"comments": [{"owner": {"reputation": 682, "user_id": 9994799, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153733992696150/picture?type=large", "display_name": "ai.jennetta", "link": "https://stackoverflow.com/users/9994799/ai-jennetta"}, "edited": false, "score": 0, "creation_date": 1558559637, "post_id": 56265027, "comment_id": 99146543, "body": "thanks so much for the answer, however when I ran this I didn&#39;t get what I want. It gives me the mean for every fifth hour. What I want is the mean for all the data between hours 10 and 15."}, {"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "reply_to_user": {"reputation": 682, "user_id": 9994799, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153733992696150/picture?type=large", "display_name": "ai.jennetta", "link": "https://stackoverflow.com/users/9994799/ai-jennetta"}, "edited": false, "score": 0, "creation_date": 1558559844, "post_id": 56265027, "comment_id": 99146626, "body": "<code>df = df[(df[&#39;Time&#39;].dt.hour &gt;= 10)&amp;(df[&#39;Time&#39;].dt.hour &lt;= 15)].copy()</code> you can filter it to get the times you want first, then run my above answer."}, {"owner": {"reputation": 682, "user_id": 9994799, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153733992696150/picture?type=large", "display_name": "ai.jennetta", "link": "https://stackoverflow.com/users/9994799/ai-jennetta"}, "edited": false, "score": 0, "creation_date": 1558560131, "post_id": 56265027, "comment_id": 99146712, "body": "same problem, except now its isolated to the mean for the 10th hour and the mean for the 15th hour. I need the mean for all the time between 10:00 and 15:00."}, {"owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "reply_to_user": {"reputation": 682, "user_id": 9994799, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153733992696150/picture?type=large", "display_name": "ai.jennetta", "link": "https://stackoverflow.com/users/9994799/ai-jennetta"}, "edited": false, "score": 0, "creation_date": 1558560768, "post_id": 56265027, "comment_id": 99146929, "body": "change the 15 to a 14 on my comment&#39;s code. I was accidentally pulling an extra hour."}], "tags": [], "owner": {"reputation": 2424, "user_id": 10286422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8eee83d47bbcbfaf55bb18f7077890?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Pap", "link": "https://stackoverflow.com/users/10286422/ben-pap"}, "is_accepted": false, "score": 0, "last_activity_date": 1558559498, "last_edit_date": 1558559498, "creation_date": 1558559181, "answer_id": 56265027, "question_id": 56264935, "link": "https://stackoverflow.com/questions/56264935/pandas-resampling-for-for-nighttime-hours/56265027#56265027", "title": "pandas resampling for for nighttime hours", "body": "<pre><code>df.groupby([df['Time'].dt.month, df['Time'].dt.day]).apply(lambda x: x.set_index('Time').resample('5H').mean())\n</code></pre>\n\n<p>You will have to group by the month and day of your time column first, then apply a resampling to your Time column in 5H (5 hours), followed by <code>.mean()</code> which will take the mean of your other columns.</p>\n\n<p>The reason for the groupby is that you dont want 5 hr intervals for all day every day, only for the times each day. As long as your times are within 5hrs you will only get one interval a day.</p>\n"}, {"comments": [{"owner": {"reputation": 682, "user_id": 9994799, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153733992696150/picture?type=large", "display_name": "ai.jennetta", "link": "https://stackoverflow.com/users/9994799/ai-jennetta"}, "edited": false, "score": 0, "creation_date": 1558560703, "post_id": 56265157, "comment_id": 99146907, "body": "I have a feeling this will work, but im currently getting the error &#39; AttributeError: &#39;DatetimeIndex&#39; object has no attribute &#39;dt&#39;&#39;"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1558560768, "post_id": 56265157, "comment_id": 99146928, "body": "<code>DatetimeIndex</code> objects don&#39;t need to access via <code>dt</code>."}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 0, "creation_date": 1558560772, "post_id": 56265157, "comment_id": 99146931, "body": "I forgot that your time is indexed. Just remove all <code>.dt</code> as @piRSquared says. Let me update."}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": true, "score": 2, "last_activity_date": 1558561087, "last_edit_date": 1558561087, "creation_date": 1558559942, "answer_id": 56265157, "question_id": 56264935, "link": "https://stackoverflow.com/questions/56264935/pandas-resampling-for-for-nighttime-hours/56265157#56265157", "title": "pandas resampling for for nighttime hours", "body": "<p>First I would filter the time period I want and groupby day:</p>\n\n<pre><code># mask the hours we want\nhours = df.index.hour\nmask = (hours &gt;= 10) &amp; (hours &lt;=14)\n\n# groupby\ndf[mask].groupby(df[mask].index.floor('D')).mean()\n</code></pre>\n\n<p>Toy data:</p>\n\n<pre><code>Times = pd.date_range('2016-01-11', '2016-01-14', freq='10s')\n\nnp.random.seed(1)\ndf = pd.DataFrame({'Time': Times,\n                   'Value': np.random.randint(1,10, len(Times))})\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>            Value\nTime    \n2016-01-11  4.993333\n2016-01-12  5.030556\n2016-01-13  5.012778\n</code></pre>\n"}], "owner": {"reputation": 682, "user_id": 9994799, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153733992696150/picture?type=large", "display_name": "ai.jennetta", "link": "https://stackoverflow.com/users/9994799/ai-jennetta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 0, "accepted_answer_id": 56265157, "answer_count": 2, "score": 1, "last_activity_date": 1558561143, "creation_date": 1558558754, "question_id": 56264935, "link": "https://stackoverflow.com/questions/56264935/pandas-resampling-for-for-nighttime-hours", "title": "pandas resampling for for nighttime hours", "body": "<p>I have a multivariate time series array. The timeseries is currently aggregated in 10 second intervals:</p>\n\n<pre><code>**Time**\n2016-01-11 17:00:00\n2016-01-11 17:00:10\n2016-01-11 17:00:20\n</code></pre>\n\n<p>I want to resample so that I get a 5 hour timeframe per day (it doesn't matter how the time is shown in the data frame, just matters that its being aggregated properly). I am resampling by the mean values.</p>\n\n<pre><code>**Time**\n2016-01-11 10:00:00-15:00:00\n2016-01-12 10:00:00-15:00:00\n2016-01-13 10:00:00-15:00:00\n</code></pre>\n\n<p>How would one do this?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 41, "user_id": 5730847, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mWsiOCAIgc0/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZZwE5lE3AgBharDe-lCEbHMoh5og/mo/photo.jpg?sz=128", "display_name": "dungeon", "link": "https://stackoverflow.com/users/5730847/dungeon"}, "edited": false, "score": 1, "creation_date": 1558559553, "post_id": 56264834, "comment_id": 99146508, "body": "I had to also replace content.replace(word,user_input), with content.replace(word,user_input,1) so that it replaces noun&#39;s correctly"}], "answers": [{"tags": [], "owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "is_accepted": true, "score": 2, "last_activity_date": 1558558729, "last_edit_date": 1558558729, "creation_date": 1558558390, "answer_id": 56264865, "question_id": 56264834, "link": "https://stackoverflow.com/questions/56264834/automate-the-boring-stuff-with-python-chapter-8-madlibs/56264865#56264865", "title": "Automate the boring stuff with python chapter_8 MadLibs", "body": "<p>You need to change <code>content</code>, but because you aren't, it's overwriting your changes until the very last word:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for word in matches:\n    user_input = input('Enter %s: ' % word)\n    content = content.replace(word,user_input)  # overwrite content here\n\nprint(content)\n</code></pre>\n\n<p>Or, if you prefer to keep <code>content</code> the same:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>new_content = content \n\nfor word in matches:\n    user_input = input('Enter %s: ' % word)\n    new_content = new_content.replace(word,user_input)  # overwrite new_content here\n\nprint(new_content)\n</code></pre>\n\n<p>Strings in python are immutable, meaning that they will not be changed in-place, and instead must be re-assigned:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>somestring = \"this is a string\"\n\nfor word in [\"is\", \"a\"]:\n    newstring = somestring.replace(word, \"aaaa\")\n\nprint(newstring)\n# this is aaaa string\n\nprint(somestring)\n# this is a string\n</code></pre>\n\n<p>Note that <code>somestring</code> is still the original value. The first <code>replace</code> <em>did</em> happen, it just was overwritten when the result of <code>somestring.replace(\"a\", \"aaaa\")</code> was reassigned.</p>\n\n<p>Broken into steps:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>somestring = \"this is a string\"\n\nnewstring = somestring.replace(\"is\", \"aaaa\")\n# this aaaa a string\n\nnewstring = somestring.replace(\"a\", \"aaaa\")\n# this is aaaa string\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 5730847, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-mWsiOCAIgc0/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcZZwE5lE3AgBharDe-lCEbHMoh5og/mo/photo.jpg?sz=128", "display_name": "dungeon", "link": "https://stackoverflow.com/users/5730847/dungeon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "accepted_answer_id": 56264865, "answer_count": 1, "score": 1, "last_activity_date": 1558559424, "creation_date": 1558558233, "last_edit_date": 1558559424, "question_id": 56264834, "link": "https://stackoverflow.com/questions/56264834/automate-the-boring-stuff-with-python-chapter-8-madlibs", "title": "Automate the boring stuff with python chapter_8 MadLibs", "body": "<p>Hello this exercise says: \nCreate a Mad Libs program that reads in text files and lets the user add their own text anywhere the word ADJECTIVE, NOUN, ADVERB, or VERB appears in the text file.</p>\n\n<p>textfile = The ADJECTIVE panda walked to the NOUN and then VERB. A nearby NOUN was \nunnafected by these events.</p>\n\n<p>What I have so far is :</p>\n\n<pre><code>import re\n#filename = input('Input the Filename: ')\n\nwith open('madlibs.txt') as file:\n    content = file.read()\nfile.close()\n\nregex = re.compile(r'ADJECTIVE|NOUN|VERB|ADVERB')\n#regex = re.compile('[A-Z]{3,}')\nmatches = regex.findall(content)\n#newWord = []\n\nfor word in matches:\n    user_input = input('Enter %s: ' % word)\n  # newWord.append(user_input)\n    new_content = content.replace(word,user_input,1)\nprint(new_content)\n</code></pre>\n\n<p>My input is:</p>\n\n<pre><code>Enter ADJECTIVE: heavy\nEnter NOUN: whale\nEnter VERB: runs\nEnter NOUN: door\n</code></pre>\n\n<p>And my output:</p>\n\n<pre><code>The ADJECTIVE panda walked to the door and then VERB. A nearby door was\nunnafected by these events.\n</code></pre>\n\n<p>Can someone explain to me what I'm doing wrong? It seems that I can't change ADJECTIVE and VERB for some reason, i also tried the commented regex with uppercase and it does the same so the problem is somewhere else. </p>\n"}, {"tags": ["python", "pyside2", "qsettings"], "comments": [{"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1558559791, "post_id": 56264810, "comment_id": 99146608, "body": "what is the value of <code>item_list</code>?"}, {"owner": {"reputation": 375, "user_id": 10281572, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N0oYg7hgGGM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMlsLl0oVPj1OXarJx8eTDBbo40sg/mo/photo.jpg?sz=128", "display_name": "Teh Ki", "link": "https://stackoverflow.com/users/10281572/teh-ki"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1558560091, "post_id": 56264810, "comment_id": 99146700, "body": "The values are something as follows: <code>[u&#39;541e-fe83-430d-9428-8595&#39;, u&#39;b569-e7bb-4a4d-a8f6-4ed0&#39;]</code>"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1558568718, "post_id": 56264810, "comment_id": 99148769, "body": "In PyQt, <a href=\"https://www.riverbankcomputing.com/static/Docs/PyQt5/pyqt_qsettings.html\" rel=\"nofollow noreferrer\">there is a third argument to <code>value</code></a> for specifying the type, but <a href=\"https://doc.qt.io/qtforpython/PySide2/QtCore/QSettings.html#PySide2.QtCore.PySide2.QtCore.QSettings.value\" rel=\"nofollow noreferrer\">PySide doesn&#39;t support it</a>. In C++ this isn&#39;t needed because the type can be specified via <code>QVariant</code>. But PySide doesn&#39;t support that either, so I would say this is a bug. Without one or the other, there is no way to distinguish between a single element list and a string."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1558585138, "post_id": 56264810, "comment_id": 99151546, "body": "@ekhumoro You&#39;re right, it&#39;s another bug from PySide2"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1558586268, "post_id": 56264810, "comment_id": 99151733, "body": "I should also point out this only affects lists of <i>strings</i>. So a possible work-around is to put the list inside another list (e.g. <code>[[&#39;foo&#39;]]</code>) and then read it with <code>settings.value(&#39;ids&#39;, [[]])[0]</code>. It seems that the PySide devs are aware of the problem, because their docs show a similar kind of problem when storing an <code>int</code>. However, this does not happen on Windows because (by default) the registry is used to store the values. I think it is only when ini files are used that this issue arises."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1558586931, "post_id": 56264810, "comment_id": 99151871, "body": "@ekhumoro In Windows you do not have that problem? Could you link the PySide documentation that you point out? If you check the .ini it is saved as csv: <code>ids=a,b,c</code>, and when it saves a list with a single string element it saves it as: <code>ids=a</code> causing the problem. On the other hand I have reported it <a href=\"https://bugreports.qt.io/browse/PYSIDE-1010\" rel=\"nofollow noreferrer\">bugreports.qt.io/browse/PYSIDE-1010</a>"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1558588281, "post_id": 56264810, "comment_id": 99152137, "body": "@eyllanesc See the warning <a href=\"https://doc.qt.io/qtforpython/PySide2/QtCore/QSettings.html#PySide2.QtCore.PySide2.QtCore.QSettings.value\" rel=\"nofollow noreferrer\">here</a>. I haven&#39;t actually tested any of this on Windows with PySide, so I&#39;m not sure of the exact current behaviour. But the Registry should behave differently. I don&#39;t know what happens on Mac. But to be clear: this problem is only guaranteed to occur on all platforms when using INI files (which is the default on Linux)."}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "reply_to_user": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "edited": false, "score": 0, "creation_date": 1558588558, "post_id": 56264810, "comment_id": 99152195, "body": "@ekhumoro I see that the problem is caused because in the case of string it uses csv format , however when using another type of data it uses QDataStream to store it, for example in the case of <code>[1]</code> it saves it as <code>ids=@Variant(\\0\\0\\0\\t\\0\\0\\0\\x1\\0\\0\\0\\x4\\0\\0\\0\\0\\0\\0\\0\\x1)</code>, instead with <code>[&quot;1&quot;]</code> it saves it as <code>ids=1</code> which is the same format used for a string <code>&quot;1&quot;</code>"}, {"owner": {"reputation": 97291, "user_id": 984421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9J30.png?s=128&g=1", "display_name": "ekhumoro", "link": "https://stackoverflow.com/users/984421/ekhumoro"}, "reply_to_user": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 0, "creation_date": 1558589108, "post_id": 56264810, "comment_id": 99152333, "body": "@eyllanesc The real issue is that PySide cannot return a <code>QVariant</code>. In C++,  you must always explicitly convert the value to whatever type you want. But in PySide, the value is automatically converted to a python type before it is returned. This is unpythonic, because it is effectively guessing when faced with ambiguous values."}, {"owner": {"reputation": 375, "user_id": 10281572, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N0oYg7hgGGM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMlsLl0oVPj1OXarJx8eTDBbo40sg/mo/photo.jpg?sz=128", "display_name": "Teh Ki", "link": "https://stackoverflow.com/users/10281572/teh-ki"}, "edited": false, "score": 0, "creation_date": 1559005068, "post_id": 56264810, "comment_id": 99274029, "body": "Hi all, thank you for the suggestions and sorry for not getting back on this. In the end, I tried to &#39;cheat&#39; for a single item, by using <code>isinstance</code>. If it is <code>unicode</code>, I convert it into a list item eg. <code>[singleItem]</code> so as to get by with the issue."}], "owner": {"reputation": 375, "user_id": 10281572, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-N0oYg7hgGGM/AAAAAAAAAAI/AAAAAAAAAAA/APUIFaMlsLl0oVPj1OXarJx8eTDBbo40sg/mo/photo.jpg?sz=128", "display_name": "Teh Ki", "link": "https://stackoverflow.com/users/10281572/teh-ki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1558585132, "creation_date": 1558558132, "last_edit_date": 1558559731, "question_id": 56264810, "link": "https://stackoverflow.com/questions/56264810/save-list-items-in-qsettings", "title": "Save list items in QSettings", "body": "<p>I am trying to save a list using <code>QSettings</code>, in which I code it as follows: <code>settings.setValue('ids', id_list)</code></p>\n\n<p>However, if there is only 1 item in the id_list, as I relaunch my code, the to-be-loaded settings for <code>ids</code> are capturing it as a string value instead of a list.</p>\n\n<p>The following is how I have coded to store the values:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>settings = QtCore.QSettings('MyTest', 'Itemize')\nid_list = []\nfor item_id in item_list:\n    id_list.append(item_id)\nsettings.setValue('ids', id_list)\n</code></pre>\n\n<p>When I tried to rewrite it as: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>settings.value('ids', [], 'QStringList')\n</code></pre>\n\n<p>I got an error:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>TypeError: PySide2.QtCore.QSettings.value(): too many arguments # \n</code></pre>\n"}, {"tags": ["python", "pandas", "matplotlib", "plot"], "comments": [{"owner": {"reputation": 1415, "user_id": 2314391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7e52c232ca81d0d7bf28f2609e15d1?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/2314391/will"}, "edited": false, "score": 1, "creation_date": 1558557841, "post_id": 56264722, "comment_id": 99145816, "body": "What error is it giving? I don&#39;t see any matplotlib etc. initialisation or setup..."}, {"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 0, "creation_date": 1558557865, "post_id": 56264722, "comment_id": 99145829, "body": "If you just run just <code>plot = df.plot()</code> do you get a plot as output?"}, {"owner": {"reputation": 89, "user_id": 11530141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd8b89af908c1c39b7f3ddc46fa7b90?s=128&d=identicon&r=PG&f=1", "display_name": "is0707", "link": "https://stackoverflow.com/users/11530141/is0707"}, "edited": false, "score": 0, "creation_date": 1558558013, "post_id": 56264722, "comment_id": 99145893, "body": "error -&gt;        plot.get_figure().savefig(&#39;FrTq50mmCircleT3A_100&#39;+&quot;-all.png&quot;&zwnj;&#8203;, dpi=200)               --&gt;  plot.show()     --&gt;AttributeError: &#39;AxesSubplot&#39; object has no attribute &#39;show&#39;"}, {"owner": {"reputation": 89, "user_id": 11530141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd8b89af908c1c39b7f3ddc46fa7b90?s=128&d=identicon&r=PG&f=1", "display_name": "is0707", "link": "https://stackoverflow.com/users/11530141/is0707"}, "reply_to_user": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 0, "creation_date": 1558558189, "post_id": 56264722, "comment_id": 99145957, "body": "@JuanC I am not getting pop up with plot= df.plot()"}, {"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 0, "creation_date": 1558558391, "post_id": 56264722, "comment_id": 99146040, "body": "Could you post some sample data from your <code>df</code> ? Your figure is correctly saving, right? Where are you running python?"}, {"owner": {"reputation": 89, "user_id": 11530141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd8b89af908c1c39b7f3ddc46fa7b90?s=128&d=identicon&r=PG&f=1", "display_name": "is0707", "link": "https://stackoverflow.com/users/11530141/is0707"}, "reply_to_user": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 0, "creation_date": 1558558700, "post_id": 56264722, "comment_id": 99146152, "body": "@JuanC one row of input is --&gt; &quot;0x0&quot;,&quot;1&quot;,&quot;4453511&quot;,&quot;-0.34659&quot;,&quot;0.445821&quot;,&quot;0.851698&quot;,&quot;-0.048&zwnj;&#8203;046&quot;,&quot;0.122712&quot;,&quot;-0.&zwnj;&#8203;057828&quot;,&quot;Feb 21, 2019 3:50:39:0 PM&quot;. I am running my Python on Canopy."}, {"owner": {"reputation": 747, "user_id": 6926444, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qGNab.jpg?s=128&g=1", "display_name": "N. Arunoprayoch", "link": "https://stackoverflow.com/users/6926444/n-arunoprayoch"}, "edited": false, "score": 0, "creation_date": 1558600694, "post_id": 56264722, "comment_id": 99157327, "body": "If you&#39;re running with &lt;script&gt;.py, you may want to include &#39;#%%&#39; at the beginner of your code. Finally, use &#39;plt.show()&#39; to display a graph."}], "owner": {"reputation": 89, "user_id": 11530141, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bcd8b89af908c1c39b7f3ddc46fa7b90?s=128&d=identicon&r=PG&f=1", "display_name": "is0707", "link": "https://stackoverflow.com/users/11530141/is0707"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1558558655, "creation_date": 1558557741, "last_edit_date": 1558558655, "question_id": 56264722, "link": "https://stackoverflow.com/questions/56264722/how-to-get-the-output-plot", "title": "How to get the output plot", "body": "<p>I have a 3 dataframes for which I need the plot output. I am able to save the output but I need that It should pop up the output anytime the code runs.</p>\n\n<pre><code>plot = df.plot()\nplot.legend(loc=2, prop={'size': 15})\nplot.set_xlabel(\"Time\", fontsize=20)\nplot.set_ylabel(\"Force/Torque\", fontsize=20)\nplot.get_figure().savefig(\"xyz\", dpi=200)\n</code></pre>\n\n<p>I tried using plot.show() but its giving an error.\nActually there is one main program when I am writing this piece of code I am getting the output pop up as well as the files were getting saved. But when I moved this code into another program and passing the dataframe from the main program then I am not getting the pop up output just the files are getting saved?</p>\n"}, {"tags": ["python", "python-2.7", "installation"], "comments": [{"owner": {"reputation": 10166, "user_id": 962190, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sxvRS.png?s=128&g=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/962190/arne"}, "edited": false, "score": 0, "creation_date": 1558558151, "post_id": 56264712, "comment_id": 99145941, "body": "Using deprecated APIs does still work, why exactly don&#39;t you want to use it?"}, {"owner": {"reputation": 670, "user_id": 784433, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/fLuSB.png?s=128&g=1", "display_name": "Abolfazl", "link": "https://stackoverflow.com/users/784433/abolfazl"}, "reply_to_user": {"reputation": 10166, "user_id": 962190, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sxvRS.png?s=128&g=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/962190/arne"}, "edited": false, "score": 0, "creation_date": 1558558310, "post_id": 56264712, "comment_id": 99146004, "body": "I can not import the package. I added the import error. I cant also <code>import scipy.weave</code>, <code>import weave</code> works."}, {"owner": {"reputation": 10166, "user_id": 962190, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sxvRS.png?s=128&g=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/962190/arne"}, "edited": false, "score": 0, "creation_date": 1558558395, "post_id": 56264712, "comment_id": 99146042, "body": "Ah, then the word is &quot;dropped functionality&quot;, not &quot;deprecated&quot;. Deprecated implies that it&#39;s still there, and just raises DeprecationWarnings when used."}, {"owner": {"reputation": 255, "user_id": 9655789, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97901d8344f5de4b932381af5a12c63a?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/9655789/david"}, "edited": false, "score": 0, "creation_date": 1558558409, "post_id": 56264712, "comment_id": 99146050, "body": "Virtual environment"}, {"owner": {"reputation": 10166, "user_id": 962190, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/sxvRS.png?s=128&g=1", "display_name": "Arne", "link": "https://stackoverflow.com/users/962190/arne"}, "edited": false, "score": 0, "creation_date": 1558560032, "post_id": 56264712, "comment_id": 99146679, "body": "How do you install pydelay? It&#39;s not on pipy."}, {"owner": {"reputation": 670, "user_id": 784433, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/fLuSB.png?s=128&g=1", "display_name": "Abolfazl", "link": "https://stackoverflow.com/users/784433/abolfazl"}, "edited": false, "score": 0, "creation_date": 1558560161, "post_id": 56264712, "comment_id": 99146721, "body": "No it has a setup.py file. I doubted about the stupid solution that I tried. Yes it works by just replacing scipy.weave by weave!"}], "owner": {"reputation": 670, "user_id": 784433, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/fLuSB.png?s=128&g=1", "display_name": "Abolfazl", "link": "https://stackoverflow.com/users/784433/abolfazl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1558560444, "creation_date": 1558557710, "last_edit_date": 1558560444, "question_id": 56264712, "link": "https://stackoverflow.com/questions/56264712/how-to-use-packages-that-still-use-deprecated-package-scipy-wave", "title": "How to use packages that still use deprecated package scipy.wave?", "body": "<p>Some old packages need deprecated <code>scipy.weave</code> package, like <code>pydelay</code>.\nInstalling weave from pip does not work for them.\nWhat is the solution?</p>\n\n<p>Edit:</p>\n\n<pre><code>In [1]: import pydelay\n---------------------------------------------------------------------------\nImportError                               Traceback (most recent call last)\n&lt;ipython-input-1-b743be9b35c7&gt; in &lt;module&gt;()\n----&gt; 1 import pydelay\n\n/usr/local/lib/python2.7/dist-packages/pydelay/__init__.py in &lt;module&gt;()\n      7 Last update: 23.10.2009\n      8 \"\"\"\n----&gt; 9 from _dde23 import dde23\n     10 #from constantStepper import dde3\n     11 __all__ = ['dde23', 'gen_disconts']\n\n/usr/local/lib/python2.7/dist-packages/pydelay/_dde23.py in &lt;module&gt;()\n     30 \n     31 import numpy as np\n---&gt; 32 from scipy import weave\n     33 from scipy.interpolate import splrep, splev, spalde\n     34 import math\n\nImportError: cannot import name weave\n</code></pre>\n\n<p><a href=\"https://github.com/scipy/weave\" rel=\"nofollow noreferrer\">Here is mentioned that :</a>\nWeave is the stand-alone version of the deprecated Scipy submodule <code>scipy.weave</code>.</p>\n\n<p><strong>Solution:</strong>\nI removed the package, replaced the scipy.weave by weave in files and reinstalled by <code>setup.py</code> file. that's all.</p>\n"}, {"tags": ["python", "sqlalchemy"], "comments": [{"owner": {"reputation": 535, "user_id": 9205369, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HpU4t.png?s=128&g=1", "display_name": "Matija Lukic", "link": "https://stackoverflow.com/users/9205369/matija-lukic"}, "edited": false, "score": 0, "creation_date": 1558591847, "post_id": 56264650, "comment_id": 99153172, "body": "If I understood correctly, you want to get info which email had user when he/she checked in, and also get info which email had user when he/she checked out. I think that this is not possible with your model structure. Why don&#39;t you just create two tables and two models Checkin and Checkout, and you know exactly which email had user when a user checked in or checked out?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 4237781, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5da0111939024f8b9b02e7d1e6bbc7da?s=128&d=identicon&r=PG&f=1", "display_name": "Tookmund", "link": "https://stackoverflow.com/users/4237781/tookmund"}, "edited": false, "score": 0, "creation_date": 1558627487, "post_id": 56268647, "comment_id": 99172373, "body": "So despite foreign_keys being a list, I should only use one column? odd. Thanks for your help."}, {"owner": {"reputation": 535, "user_id": 9205369, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HpU4t.png?s=128&g=1", "display_name": "Matija Lukic", "link": "https://stackoverflow.com/users/9205369/matija-lukic"}, "reply_to_user": {"reputation": 33, "user_id": 4237781, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5da0111939024f8b9b02e7d1e6bbc7da?s=128&d=identicon&r=PG&f=1", "display_name": "Tookmund", "link": "https://stackoverflow.com/users/4237781/tookmund"}, "edited": false, "score": 0, "creation_date": 1558785019, "post_id": 56268647, "comment_id": 99219759, "body": "For the situation in your question, you should use one element list (as you can see in docs). But, you&#39;re right, it is pretty odd that there is a list,  I didn&#39;t have a situation where I used more than one element in the foreign_keys list."}], "tags": [], "owner": {"reputation": 535, "user_id": 9205369, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HpU4t.png?s=128&g=1", "display_name": "Matija Lukic", "link": "https://stackoverflow.com/users/9205369/matija-lukic"}, "is_accepted": true, "score": 0, "last_activity_date": 1558589807, "creation_date": 1558589807, "answer_id": 56268647, "question_id": 56264650, "link": "https://stackoverflow.com/questions/56264650/ambiguousforeignkeyserror-even-after-specifying-foreign-keys/56268647#56268647", "title": "AmbiguousForeignKeysError even after specifying foreign_keys", "body": "<p>Try to change your Checkout model definition:</p>\n\n<pre><code>class Checkout(Base):\n    __tablename__ = \"Checkouts\"\n\n    what = Column(Integer, ForeignKey(HW.id))\n    hardware = relationship(HW, foreign_keys=[what])\n\n    id = Column(Integer, primary_key=True)\n    out_auth_id = Column(Integer, ForeignKey(User.id))\n    out_auth_email = Column(String, ForeignKey(User.email)) \n\n    in_auth_id = Column(Integer, ForeignKey(User.id))\n    in_auth_email = Column(String, ForeignKey(User.email))\n\n    out_auth_user = relationship('User', foreign_keys=[out_auth_id])\n    in_auth_user = relationship('User', foreign_keys=[in_auth_id])\n\n    out_auth_user_by_email = relationship('User', foreign_keys=[out_auth_email])\n    in_auth_user_by_email = relationship('User', foreign_keys=[in_auth_email])\n</code></pre>\n\n<p>Documentation: <a href=\"https://docs.sqlalchemy.org/en/13/orm/join_conditions.html#handling-multiple-join-paths\" rel=\"nofollow noreferrer\">https://docs.sqlalchemy.org/en/13/orm/join_conditions.html#handling-multiple-join-paths</a></p>\n"}], "owner": {"reputation": 33, "user_id": 4237781, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5da0111939024f8b9b02e7d1e6bbc7da?s=128&d=identicon&r=PG&f=1", "display_name": "Tookmund", "link": "https://stackoverflow.com/users/4237781/tookmund"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 56268647, "answer_count": 1, "score": 0, "last_activity_date": 1558589807, "creation_date": 1558557458, "last_edit_date": 1558569365, "question_id": 56264650, "link": "https://stackoverflow.com/questions/56264650/ambiguousforeignkeyserror-even-after-specifying-foreign-keys", "title": "AmbiguousForeignKeysError even after specifying foreign_keys", "body": "<p>I'm setting up some table objects for SQLAlchemy.\nI have a user and checkout tables. I want to associate a user object with the checkin and the checkout, which are both recorded in the same checkout object, so I have an in_user and out_user associated with each checkout object.</p>\n\n<p>I've run into a <code>sqlalchemy.exc.AmbiguousForeignKeysError</code></p>\n\n<p>To quote the exact error message:</p>\n\n<pre><code>sqlalchemy.exc.AmbiguousForeignKeysError: Could not determine join condition between parent/child tables on relationship Checkout.out_auth_user - there are multiple foreign key paths linking the tables.  Specify the 'foreign_keys' argument, providing a list of those columns which should be counted as containing a foreign key reference to the parent table.\n</code></pre>\n\n<p>I've done as the error message requests (see below), but the error still occurs.</p>\n\n<p>I originally only specified user email because I wanted to be able to remove users in the future without corrupting historical data. However, I tried to add user id, but still got the same error.</p>\n\n<p>There are many similar questions on StackOverflow, but I couldn't find one that addressed my problem and most of them are working with much older versions of sqlalchemy that did not support the <code>foreign_keys</code> argument to relationship. It seems like this often occurs with backreferences, but I'm not using those as far as I'm aware. This is a simple one-way link from a checkout object to two user objects.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/29044173/flask-foreign-keys-still-shows-ambiguousforeignkeyserror\">Flask foreign_keys still shows AmbiguousForeignKeysError</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/26965983/sqlalchemy-ambiguousforeignkeyserror\">sqlalchemy , AmbiguousForeignKeysError</a></p>\n\n<p>The full code is on github at <a href=\"https://github.com/ACMWM/hwcheckout\" rel=\"nofollow noreferrer\">https://github.com/ACMWM/hwcheckout</a></p>\n\n<p>Below is an MRE</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from sqlalchemy import create_engine\nfrom sqlalchemy.orm import scoped_session, sessionmaker\nfrom sqlalchemy.ext.declarative import declarative_base\n\nfrom sqlalchemy import Column, Boolean, Integer, String, ForeignKey, DateTime\nfrom sqlalchemy.orm import relationship\n\ndb = \"sqlite:///mre.db\"\nengine = create_engine(db, convert_unicode=True)\ndb_session = scoped_session(sessionmaker(autocommit=False,\n                                         autoflush=False,\n                                         bind=engine))\n\nBase = declarative_base()\nBase.query = db_session.query_property()\n\nclass User(Base):\n    __tablename__ = \"users\"\n    id = Column(Integer, primary_key=True)\n    email = Column(String)\n\nclass HW(Base):\n    __tablename__ = \"HW\"\n    id = Column(Integer, primary_key=True)\n\nclass Checkout(Base):\n    __tablename__ = \"Checkouts\"\n\n    what = Column(Integer, ForeignKey(HW.id))\n    hardware = relationship(HW, foreign_keys=[what])\n\n    id = Column(Integer, primary_key=True)\n    out_auth_id = Column(Integer, ForeignKey(User.id))\n    out_auth_email = Column(String, ForeignKey(User.email))\n    out_auth_user = relationship(User, foreign_keys=[out_auth_id, out_auth_email])\n\n    in_auth_id = Column(Integer, ForeignKey(User.id))\n    in_auth_email = Column(String, ForeignKey(User.email))\n    in_auth_user = relationship(User, foreign_keys=[in_auth_id, in_auth_email])\n\nBase.metadata.create_all(bind=engine, checkfirst=True)\n\nu = User(email=\"test@example.com\")\nchk = Checkout(out_auth_user_id=u.id,out_auth_user_email=u.email)\n\n</code></pre>\n\n<p>I'm using SQLAlchemy        1.3.3   </p>\n\n<p>EDIT: Remove double import of models. Same error still occurs</p>\n\n<p>EDIT again: Got the MRE to reproduce the error</p>\n\n<p>Postgres EDIT: Don't know if this helps, but when I tried to move my code to a real database, I got this error:</p>\n\n<pre><code>sqlalchemy.exc.ProgrammingError: (psycopg2.errors.InvalidForeignKey) there is no unique constraint matching given keys for referenced table \"users\"\n[SQL:\n CREATE TABLE \"Checkouts\" (\n         id SERIAL NOT NULL,\n         outdate TIMESTAMP WITHOUT TIME ZONE,\n         returndate TIMESTAMP WITHOUT TIME ZONE,\n         who VARCHAR,\n         reason VARCHAR,\n         quantity INTEGER,\n         what INTEGER,\n         out_auth_id INTEGER,\n         out_auth_email VARCHAR,\n         in_auth_id INTEGER,\n         in_auth_email VARCHAR,\n         PRIMARY KEY (id),\n         UNIQUE (id),\n         FOREIGN KEY(what) REFERENCES \"HW\" (id),\n         FOREIGN KEY(out_auth_id) REFERENCES users (id),\n         FOREIGN KEY(out_auth_email) REFERENCES users (email),\n         FOREIGN KEY(in_auth_id) REFERENCES users (id),\n         FOREIGN KEY(in_auth_email) REFERENCES users (email)\n )\n]\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 5978, "user_id": 10967204, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iPFcP.jpg?s=128&g=1", "display_name": "ncica", "link": "https://stackoverflow.com/users/10967204/ncica"}, "edited": false, "score": 6, "creation_date": 1558557400, "post_id": 56264618, "comment_id": 99145627, "body": "what is your low high and list?"}, {"owner": {"reputation": 9079, "user_id": 7867968, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6976c101b7e5d81ad398cedf6a2ab9b?s=128&d=identicon&r=PG&f=1", "display_name": "C.Nivs", "link": "https://stackoverflow.com/users/7867968/c-nivs"}, "edited": false, "score": 9, "creation_date": 1558557537, "post_id": 56264618, "comment_id": 99145687, "body": "don&#39;t use <code>list</code> as a variable name, shadowing builtins can yield some unsavory results"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 5, "creation_date": 1558557755, "post_id": 56264618, "comment_id": 99145776, "body": "Please provide the full error traceback, as well as samples of your inputs"}, {"owner": {"reputation": 7468, "user_id": 2695448, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/074d0d3f1001c26d04edefb317f03059?s=128&d=identicon&r=PG&f=1", "display_name": "mad_", "link": "https://stackoverflow.com/users/2695448/mad"}, "edited": false, "score": 0, "creation_date": 1558558017, "post_id": 56264618, "comment_id": 99145895, "body": "is the type of list here is <code>dict</code>?"}, {"owner": {"reputation": 1, "user_id": 11541611, "user_type": "registered", "profile_image": "https://graph.facebook.com/2500897869944529/picture?type=large", "display_name": "Bruno Teglas", "link": "https://stackoverflow.com/users/11541611/bruno-teglas"}, "edited": false, "score": 0, "creation_date": 1558595498, "post_id": 56264618, "comment_id": 99154567, "body": "ncica: here is what low and high are.     low = 0     high = (item - 1)"}], "owner": {"reputation": 1, "user_id": 11541611, "user_type": "registered", "profile_image": "https://graph.facebook.com/2500897869944529/picture?type=large", "display_name": "Bruno Teglas", "link": "https://stackoverflow.com/users/11541611/bruno-teglas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 449, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1558595738, "creation_date": 1558557280, "last_edit_date": 1558595738, "question_id": 56264618, "link": "https://stackoverflow.com/questions/56264618/typeerror-not-supported-between-instances-of-int-and-dict", "title": "TypeError: &#39;&lt;=&#39; not supported between instances of &#39;int&#39; and &#39;dict&#39;", "body": "<p>I get the error: <code>while (low &lt;= high) and list[low] &lt;= x &lt;= list[high]:\nTypeError: '&lt;=' not supported between instances of 'int' and 'dict'</code></p>\n\n<pre><code>while low &lt;= high and list[low] &lt;= x &lt;= list[high]:\n    critical_op += 1\n    if low == high:\n        if list[low] == x:\n            return low\n        return -1\n</code></pre>\n\n<p>low = 0 \nhigh = (item - 1)</p>\n"}, {"tags": ["python", "double", "runtime-error"], "comments": [{"owner": {"reputation": 13, "user_id": 10992357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PgUuTrxuVAs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMfVd_UOXwFJWczEe6A6HLgECvLlQ/mo/photo.jpg?sz=128", "display_name": "Joseph Kelsey", "link": "https://stackoverflow.com/users/10992357/joseph-kelsey"}, "edited": false, "score": 0, "creation_date": 1558557524, "post_id": 56264615, "comment_id": 99145679, "body": "I printed out the test array which stores all the values for Tu each time &quot;a&quot; changes (0.1,0.2,0.3 etc) with b=0.9 and c=0.9 and got the following results: [ 0.         70.930719   71.83187034 72.70561282 73.55386582 74.37834424  75.18058716 75.96198164 76.72378251 77.46712907] So Tu is zero the first time around which doesn&#39;t make sense to me."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1558558493, "post_id": 56264615, "comment_id": 99146079, "body": "Helpful debugging output belongs in the question, not a comment.  Comments get very little formatting, and aren&#39;t as obviously related to the problem description."}, {"owner": {"reputation": 1415, "user_id": 2314391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7e52c232ca81d0d7bf28f2609e15d1?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/2314391/will"}, "edited": false, "score": 0, "creation_date": 1558558580, "post_id": 56264615, "comment_id": 99146108, "body": "Kinda hard to tell without knowing what Tu and Te etc, are"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1558558594, "post_id": 56264615, "comment_id": 99146115, "body": "Welcome to StackOverflow. Please read and follow the posting guidelines in the help documentation, as suggested when you created this account. <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, complete, verifiable example</a> applies here. We cannot effectively help you until you post your MCVE code and accurately specify the problem. We should be able to paste your posted code into a text file and reproduce the problem you specified.  Your current code has undefined symbols.  Also, include the <i>entire</i> error message, including trace-back."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1558558618, "post_id": 56264615, "comment_id": 99146124, "body": "You still haven&#39;t tracked the offending values ... that would be a good place to start."}], "owner": {"reputation": 13, "user_id": 10992357, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PgUuTrxuVAs/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQMfVd_UOXwFJWczEe6A6HLgECvLlQ/mo/photo.jpg?sz=128", "display_name": "Joseph Kelsey", "link": "https://stackoverflow.com/users/10992357/joseph-kelsey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1558627468, "creation_date": 1558557270, "last_edit_date": 1558627468, "question_id": 56264615, "link": "https://stackoverflow.com/questions/56264615/how-to-solve-runtimewarning-invalid-value-encountered-in-double-scalars-and", "title": "How to solve &quot;Runtimewarning: invalid value encountered in double_scalars&quot; and &quot;Runtimewarning: divide by zero encountered in power&quot;?", "body": "<p>I am getting the error </p>\n\n<blockquote>\n  <p>RuntimeWarning: divide by zero encountered in power</p>\n</blockquote>\n\n<p>and </p>\n\n<blockquote>\n  <p>RuntimeWarning: invalid value encountered in double_scalars</p>\n</blockquote>\n\n<p>consecutively on one of the calculations for two values in my for loop. The two values are Tu and n_u_com but it is not consistent for which one causes the error. </p>\n\n<p>I have tried printing all the values in the calculation to see if any \"0\"s or \"nan\" are present and haven't found anything.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nimport csv\n\n#Constants specific to problem\ndel_e = 0.4      \nm_e = 9.10938356*10**-31  #[kg]\nm_i = 3.34449439655*10**-27  #deutrium [kg]\nko_e = 2000       #stangeby page 394      [Electron conduction coefficient\nko_i = 58.9         #Ion conduction coefficient\nk_b = 1.381e-23 #Boltzmans constant [J/K]\nK_ev = 11604.525    #ev to kelvin conversion factor\ne = 1.6e-19         #coulombs\n\ndef main():\nTi_Te_ratio = int(input(\"Select Ti/Te ratio: \\n[1]-Ti/Te=1 \\n[2]-Ti/Te=2 \\n[3]-Ti/Te=3 \\n[4]-Ti/Te=4 \\n[5]-Ti/Te=5\\n\"))\ny = int(input(\"1.Complex gamma \\n2.gamma = 7\\n\"))\n\nTe_t=np.zeros(26,dtype=float)\nTi_t=np.zeros(26,dtype=float)\nn_t=np.zeros(26,dtype=float)\nL=np.zeros(26,dtype=float)\ngamma=np.zeros(26,dtype=float)\nc_s=np.zeros(26,dtype=float)\nTu=np.zeros(26,dtype=float)\nq_par=np.zeros(26,dtype=float)\nn_u_simp=np.zeros(26,dtype=float)\nn_u_com=np.zeros(26,dtype=float)\nTe_u_div=np.zeros(26,dtype=float)\nTi_u_div=np.zeros(26,dtype=float)\nn_u_div=np.zeros(26,dtype=float)\nq_par_div=np.zeros(26,dtype=float)\nTu_div=np.zeros(26,dtype=float)\nc_s_div=np.zeros(26,dtype=float)\n\ntest=np.zeros(10,dtype=float)\ns=0\n#factor={}\n#print(Ti_Te_ratio)\ni=0\n#z=0    \n\n\nif (Ti_Te_ratio == 1):\n    data_file = open('Ti=Te.csv')\n    csv_f = csv.reader(data_file)\n\nif (Ti_Te_ratio == 2):\n    data_file = open('Ti=2Te.csv')\n    csv_f = csv.reader(data_file)\n\nif (Ti_Te_ratio == 3):\n    data_file = open('Ti=3Te.csv')\n    csv_f = csv.reader(data_file)\n\nif (Ti_Te_ratio == 4):\n    data_file = open('Ti=4Te.csv')\n    csv_f = csv.reader(data_file)\n\nif (Ti_Te_ratio == 5):\n    data_file = open('Ti=5Te.csv')\n    csv_f = csv.reader(data_file)\n\nfor row in csv_f:\n\n    if i == 26:\n        #print(\"end\")\n        break\n    else:\n        #print(i)\n        Te_t[i] = float(row[3])\n        Ti_t[i] = float(row[4])\n        n_t[i] = float(row[5])\n        L[i] = float(row[10])\n        Te_u_div[i] = float(row[6])\n        Ti_u_div[i] =  float(row[7])\n        n_u_div[i] = float(row[8])\n        q_par_div[i] = float(row[9])\n        Tu_div[i] = float(Te_u_div[i]+Ti_u_div[i])\n        c_s_div[i] = float(row[11])\n        #print(Ti_t[i])\n        i = i+1\n\n\nf_cond=np.linspace(.1,.9,9)     \nf_pow=np.linspace(.1,.9,9)\nf_mom=np.linspace(.1,.9,9)\n\nfor a in f_cond:\n    s=s+1\n    for b in f_pow:\n        for c in f_mom:\n            #factor[z]=[a,b,c]\n            #print(factor[z])\n            #z=z+1  \n\n            if y ==1:      \n                for x in range(0, len(Te_t)):\n                    gamma[x] = 2.5*Ti_t[x]/Te_t[x]+2/(1-del_e)-0.5*np.log((2*np.pi*m_e/m_i)*(1+Ti_t[x]/Te_t[x])*(1-del_e)**-2)+.05        #[int] Sheath heat transmission coefficient Stangeby pg. 649\n                    #print(gamma[x])\n                    c_s[x] = np.power([k_b*(Ti_t[x]+Te_t[x])*K_ev/(m_e+m_i)] , 0.5)\n                    #print(c_s[x])\n                    q_par[x] = gamma[x]*n_t[x]*k_b*K_ev*(Ti_t[x]+Te_t[x])*c_s[x]*(1-b)\n                    #print(\"x=\",x,\"Ti_t=\",Ti_t[x],\"Te_t=\",Te_t[x],\"f_cond=\",a,\"q_par=\",q_par[x],\"L=\",L[x])\n                    Tu[x] = np.power(np.power(Ti_t[x]+Te_t[x], (7/2))+(7/2)*a*q_par[x]*L[x]/ko_e , (2/7))\n                    test[s]=Tu[0]\n                    #print(\"a=\",a,\"b=\",b,\"c=\",c)\n                    #print(\"x=\",x)\n                    #print(Tu[x])\n                    n_u_simp[x] = 2*n_t[x]*(Ti_t[x]+Te_t[x])/(c*Tu[x])\n                    n_u_com[x] = np.power(m_i/(2*e*(Ti_t[x]+Te_t[x]))*4*np.power(q_par[x], 2)*np.power((7/2)*q_par[x]*L[x]/ko_e, (-4/7))/(np.power(gamma[x], 2)*e**2), 0.5)/c\n</code></pre>\n\n<p>Below is a copy of one of the errors for n_u_comp.</p>\n\n<pre><code>a= 0.1 b= 0.1 c= 0.1\nx= 19\n10.326673193174681\na= 0.1 b= 0.1C:/.AA_UT Skewl/Plasma Work/Masters Thesis-Two Point Model/TPM with DIVIMP input wtih correction factors.py:120: RuntimeWarning: divide by zero encountered in power\n  n_u_com[x] = np.power(m_i/(2*e*(Ti_t[x]+Te_t[x]))*4*np.power(q_par[x], 2)*np.power((7/2)*q_par[x]*L[x]/ko_e, (-4/7))/(np.power(gamma[x], 2)*e**2), 0.5)/c\nC:/.AA_UT Skewl/Plasma Work/Masters Thesis-Two Point Model/TPM with DIVIMP input wtih correction factors.py:120: RuntimeWarning: invalid value encountered in double_scalars\n  n_u_com[x] = np.power(m_i/(2*e*(Ti_t[x]+Te_t[x]))*4*np.power(q_par[x], 2)*np.power((7/2)*q_par[x]*L[x]/ko_e, (-4/7))/(np.power(gamma[x], 2)*e**2), 0.5)/c\n c= 0.1\nx= 20\n12.535269603652413\na= 0.1 b= 0.1 c= 0.1\n</code></pre>\n\n<p>I printed out the test array which stores all the values for Tu each time \"a\" changes (0.1,0.2,0.3 etc) with b=0.9 and c=0.9 and got the following results: [ 0. 70.930719 71.83187034 72.70561282 73.55386582 74.37834424 75.18058716 75.96198164 76.72378251 77.46712907] So Tu is zero the first time around which doesn't make sense to me</p>\n"}, {"tags": ["python", "html", "beautifulsoup"], "comments": [{"owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "edited": false, "score": 1, "creation_date": 1558598361, "post_id": 56264573, "comment_id": 99155997, "body": "Could you add a some sample HTML to your question that recreates the problem?"}, {"owner": {"reputation": 393, "user_id": 1082438, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0de65f380a7e1cb28d4f0c9c5f93fdde?s=128&d=identicon&r=PG", "display_name": "LazyCat", "link": "https://stackoverflow.com/users/1082438/lazycat"}, "reply_to_user": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "edited": false, "score": 0, "creation_date": 1558622972, "post_id": 56264573, "comment_id": 99169974, "body": "Ha, there was html code, but it was processed and showed as new lines! I&#39;ve commented it to make it visible. So basically, any text separated by that html code shows up on different lines in html, but my python code simply removes it, hence I get no new lines."}, {"owner": {"reputation": 37454, "user_id": 4985733, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/r7daF.jpg?s=128&g=1", "display_name": "Martin Evans", "link": "https://stackoverflow.com/users/4985733/martin-evans"}, "edited": false, "score": 0, "creation_date": 1558642377, "post_id": 56264573, "comment_id": 99178548, "body": "You could try and use <code>for text in soup.strings:</code> to iterate over each text block but a <code>&lt;br&gt;</code> on its own will probably still get missed."}], "owner": {"reputation": 393, "user_id": 1082438, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0de65f380a7e1cb28d4f0c9c5f93fdde?s=128&d=identicon&r=PG", "display_name": "LazyCat", "link": "https://stackoverflow.com/users/1082438/lazycat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1558622855, "creation_date": 1558557044, "last_edit_date": 1558622855, "question_id": 56264573, "link": "https://stackoverflow.com/questions/56264573/parsing-new-lines-with-beautifulsoup", "title": "parsing new lines with beautifulsoup", "body": "<p>When parsing an html doc with BeautifulSoup, sometimes new lines are produced by html code, e.g. </p>\n\n<p><code>&lt;div style=\"line-height:120%;text-align:left;font-size:10pt;\"&gt;&lt;font style=\"font-family:inherit;font-size:10pt;\"&gt;&lt;br&gt;&lt;/font&gt;&lt;/div&gt;&lt;div style=\"line-height:120%;text-align:left;font-size:10pt;\"&gt;&lt;font style=\"font-family:inherit;font-size:10pt;font-weight:bold;\"&gt;</code></p>\n\n<p>so when I extract text I miss a new line: </p>\n\n<pre><code>page = open(fname)\ntry:\n    soup = BeautifulSoup(page, 'html.parser')\nexcept:\n    sys.exit(\"cannot parse %s\" % fname)\nsoup.prettify(formatter=lambda s: s.replace(u'\\xa0', ' '))\n\nfor script in soup([\"script\", \"style\"]):\n    script.extract()    # rip it out\nif not soup.body:\n    return\ntext = soup.body.get_text(separator = ' ')\nlines = (clean_str(line) for line in text.splitlines())\nchunks = (phrase.strip() for line in lines for phrase in line.split(\"  \"))\ntext = '\\n'.join(chunk for chunk in chunks if chunk)\n</code></pre>\n\n<p>Is there an adjustment I can add, that would break the text into lines correctly?</p>\n"}, {"tags": ["python", "fabric"], "answers": [{"tags": [], "owner": {"reputation": 593, "user_id": 4632971, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1048181f53e97b685e092f5781a8ba76?s=128&d=identicon&r=PG&f=1", "display_name": "Ph33ly", "link": "https://stackoverflow.com/users/4632971/ph33ly"}, "is_accepted": false, "score": 0, "last_activity_date": 1558562606, "creation_date": 1558562606, "answer_id": 56265587, "question_id": 56264563, "link": "https://stackoverflow.com/questions/56264563/how-to-wait-for-a-shell-script-reboot-in-fabric-2/56265587#56265587", "title": "How to wait for a shell script reboot in Fabric 2", "body": "<p>So a workaround has been to run the task with the -w flag which will enable warn_only and give me the desired functionality. It would be more preferable to be able to set this property in the code though.  </p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 2912543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a6f85fd09fbdf0336ffcc2bc914dbe6?s=128&d=identicon&r=PG&f=1", "display_name": "calve", "link": "https://stackoverflow.com/users/2912543/calve"}, "is_accepted": false, "score": 0, "last_activity_date": 1592409527, "last_edit_date": 1592409527, "creation_date": 1592408368, "answer_id": 62432885, "question_id": 56264563, "link": "https://stackoverflow.com/questions/56264563/how-to-wait-for-a-shell-script-reboot-in-fabric-2/62432885#62432885", "title": "How to wait for a shell script reboot in Fabric 2", "body": "<p>Looks like you can use the <code>config</code> argument to the connection class instead of the <code>with settings()</code> construction, and <code>warn_only</code> as been renamed to <code>warn</code>;</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>with Connection(host=host, user=\"user\", connect_kwargs={\"password\": \"password\"}) as c:\n    c.run(\"./shell_script.sh\", warn=True)\n</code></pre>\n\n<p>More generally, you can get upgrade documentation at <a href=\"https://www.fabfile.org/upgrading.html#run\" rel=\"nofollow noreferrer\">https://www.fabfile.org/upgrading.html#run</a></p>\n"}], "owner": {"reputation": 593, "user_id": 4632971, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1048181f53e97b685e092f5781a8ba76?s=128&d=identicon&r=PG&f=1", "display_name": "Ph33ly", "link": "https://stackoverflow.com/users/4632971/ph33ly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1592409527, "creation_date": 1558556990, "question_id": 56264563, "link": "https://stackoverflow.com/questions/56264563/how-to-wait-for-a-shell-script-reboot-in-fabric-2", "title": "How to wait for a shell script reboot in Fabric 2", "body": "<p>I'm using Fabric 2 and I'm trying to run a shell script on a number of hosts sequentially. In the script, it configures a few settings and reboots that host. When I run my task however it ends after the script has run on the first host (I'm guessing because the SSH connection terminates due to the reboot). I tried looking into setting 'warn_only' to True, but I don't see where to set this value on Fabric 2. </p>\n\n<p>Adding:</p>\n\n<pre><code>with settings(warn_only=True):\n</code></pre>\n\n<p>throws a \"NameError: global name 'settings' is not defined\" error. </p>\n\n<p>Is there a correct format to warn_only? If not possible yet in Fabric 2, is there a way to continue running my task regardless of this reboot?</p>\n\n<p>My script:</p>\n\n<pre><code>from fabric import *\nimport time\nimport csv\n\n@task\ndef test(ctx):\n\n    hosts = ['1.1.1.1', '2.2.2.2']\n\n    for host in hosts:\n        c = Connection(host=host, user=\"user\", connect_kwargs={\"password\": \"password\"})\n\n        c.run(\"./shell_script.sh\")\n\n        configured = False\n\n        while not configured:\n            result = c.run(\"cat /etc/hostname\")\n            if result != \"default\": configured = True\n            time.sleep(10)\n</code></pre>\n"}, {"tags": ["python", "pandas", "wkhtmltopdf"], "comments": [{"owner": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1558557848, "post_id": 56264534, "comment_id": 99145820, "body": "Two suggestions come to mind: 1. save the DataFrame in Excel or CSV format on the EC2 instance, then copy it to your local machine via SCP (using either command-line scp or a GUI client such as WinSCP, FileZilla, or CuberDuck). 2. connect from your local machine to the Jupyter server running on the EC2 instance via SSH tunneling (probably helpful: <a href=\"https://gist.github.com/jakechen/faf0500132d46d83517004bbfedbe5de\" rel=\"nofollow noreferrer\">gist.github.com/jakechen/faf0500132d46d83517004bbfedbe5de</a>)"}, {"owner": {"reputation": 67, "user_id": 11541558, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OIzv0AB1jdU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd436H6YcPn97o0QDe84JnxG35jgQ/mo/photo.jpg?sz=128", "display_name": "NoobsterNoob", "link": "https://stackoverflow.com/users/11541558/noobsternoob"}, "reply_to_user": {"reputation": 7529, "user_id": 8008776, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NZFTW.jpg?s=128&g=1", "display_name": "Peter Leimbigler", "link": "https://stackoverflow.com/users/8008776/peter-leimbigler"}, "edited": false, "score": 0, "creation_date": 1558560857, "post_id": 56264534, "comment_id": 99146955, "body": "Thanks for the suggestion.  I&#39;m currently doing something along those lines (manually transferring the file), but I&#39;m trying to get the images to generate automatically, via crontab or similar.  I guess I should have noted that in the question!"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 11541558, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OIzv0AB1jdU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd436H6YcPn97o0QDe84JnxG35jgQ/mo/photo.jpg?sz=128", "display_name": "NoobsterNoob", "link": "https://stackoverflow.com/users/11541558/noobsternoob"}, "edited": false, "score": 0, "creation_date": 1558560580, "post_id": 56264622, "comment_id": 99146872, "body": "Wow, that worked when running it manually.  My question now is, how do I get it to work in a crontab?  The error persists if I run it in the crontab.  Is that possible?"}, {"owner": {"reputation": 556, "user_id": 10671246, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RGCjZMD-Fno/AAAAAAAAAAI/AAAAAAAAPdQ/adV6fj4Rs8U/photo.jpg?sz=128", "display_name": "Prachiti Prakash Prabhu", "link": "https://stackoverflow.com/users/10671246/prachiti-prakash-prabhu"}, "reply_to_user": {"reputation": 67, "user_id": 11541558, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OIzv0AB1jdU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd436H6YcPn97o0QDe84JnxG35jgQ/mo/photo.jpg?sz=128", "display_name": "NoobsterNoob", "link": "https://stackoverflow.com/users/11541558/noobsternoob"}, "edited": false, "score": 0, "creation_date": 1558561687, "post_id": 56264622, "comment_id": 99147192, "body": "I&#39;m not very experienced with crontab but I have added another solution, which I feel may be of help. You could try that! :) Also, if this solution worked for you in the context of the question, please upvote and/or accept this answer :)"}], "tags": [], "owner": {"reputation": 556, "user_id": 10671246, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RGCjZMD-Fno/AAAAAAAAAAI/AAAAAAAAPdQ/adV6fj4Rs8U/photo.jpg?sz=128", "display_name": "Prachiti Prakash Prabhu", "link": "https://stackoverflow.com/users/10671246/prachiti-prakash-prabhu"}, "is_accepted": true, "score": 1, "last_activity_date": 1558557293, "creation_date": 1558557293, "answer_id": 56264622, "question_id": 56264534, "link": "https://stackoverflow.com/questions/56264534/could-not-connect-to-display-on-ec2-server/56264622#56264622", "title": "&quot;Could not connect to display&quot; on EC2 Server", "body": "<p>try doing <code>echo $DISPLAY</code> on your remote host. If it turns out empty, it means you are not connected to any display screen and hence, the output will not be displayed.</p>\n\n<p>If that's the case try doing <code>export DISPLAY=localhost:10.0</code> and then re-run your original command</p>\n\n<p>Note: when connecting to the remote server use <code>ssh -X</code></p>\n"}, {"comments": [{"owner": {"reputation": 67, "user_id": 11541558, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OIzv0AB1jdU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd436H6YcPn97o0QDe84JnxG35jgQ/mo/photo.jpg?sz=128", "display_name": "NoobsterNoob", "link": "https://stackoverflow.com/users/11541558/noobsternoob"}, "edited": false, "score": 0, "creation_date": 1558563187, "post_id": 56265484, "comment_id": 99147604, "body": "I think this did it.  Thanks a lot for the help, I really appreciate it."}], "tags": [], "owner": {"reputation": 556, "user_id": 10671246, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RGCjZMD-Fno/AAAAAAAAAAI/AAAAAAAAPdQ/adV6fj4Rs8U/photo.jpg?sz=128", "display_name": "Prachiti Prakash Prabhu", "link": "https://stackoverflow.com/users/10671246/prachiti-prakash-prabhu"}, "is_accepted": false, "score": 2, "last_activity_date": 1572257348, "last_edit_date": 1572257348, "creation_date": 1558561831, "answer_id": 56265484, "question_id": 56264534, "link": "https://stackoverflow.com/questions/56264534/could-not-connect-to-display-on-ec2-server/56265484#56265484", "title": "&quot;Could not connect to display&quot; on EC2 Server", "body": "<p>One solution would be to run this:</p>\n\n<pre><code>from pyvirtualdisplay import Display\ndisplay = Display(visible=0, size=(600,600))\ndisplay.start()\nimgkit.from_file(\"filename.html\", outputfile, options=imgkitoptions)\n</code></pre>\n\n<p>&nbsp;</p>\n"}], "owner": {"reputation": 67, "user_id": 11541558, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-OIzv0AB1jdU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd436H6YcPn97o0QDe84JnxG35jgQ/mo/photo.jpg?sz=128", "display_name": "NoobsterNoob", "link": "https://stackoverflow.com/users/11541558/noobsternoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1655, "favorite_count": 1, "accepted_answer_id": 56264622, "answer_count": 2, "score": 3, "last_activity_date": 1572257348, "creation_date": 1558556883, "last_edit_date": 1558557209, "question_id": 56264534, "link": "https://stackoverflow.com/questions/56264534/could-not-connect-to-display-on-ec2-server", "title": "&quot;Could not connect to display&quot; on EC2 Server", "body": "<p>I'm trying to export some pandas dataframe tables as images.  I looked at many solutions, and found what seemed like the best bet.  I followed the directions on <a href=\"https://medium.com/@andy.lane/convert-pandas-dataframes-to-images-using-imgkit-5da7e5108d55\" rel=\"nofollow noreferrer\">this site</a>, and everything worked fine locally.</p>\n\n<p>However, when trying to get this python script to run on an EC2 server, I get the following error:</p>\n\n<pre><code>OSError: wkhtmltoimage exited with non-zero code 1. error:\nqt.qpa.screen: QXcbConnection: Could not connect to display \nCould not connect to any X display.\n\n\nYou need to install xvfb(sudo apt-get install xvfb, yum install xorg-x11-server-Xvfb, etc), then add option: {\"xvfb\": \"\"}.\n</code></pre>\n\n<p>I tried install to xfvb as directed, but that doesn't work (I imagine because wkhtmltopdf is being called from another library).  I spun up a new server to re-install everything from scratch to eliminate that potential issue.  Still nothing.</p>\n\n<p>I Googled the issue and tried some random suggestions, but no dice.</p>\n\n<p>My goal is to produce an SVG file from a pandas dataframe (converted to html).  Is this possible to do form a cloud server with no monitor?  Is there a better way to produce table images for PDF reports from pandas?</p>\n\n<p>Some code:</p>\n\n<pre><code>import pandas\ndata = pandas.read_csv(open(\"biostats.csv\", \"r\"))\n\ncss = \"\"\"\n&lt;style type=\\\"text/css\\\"&gt;\ntable {\ncolor: #333;\nfont-family: Helvetica, Arial, sans-serif;\nwidth: 640px;\nborder-collapse:\ncollapse; \nborder-spacing: 0;\n}\"\"\"\n\ntext_file = open(\"filename.html\", \"a\")\n# write the CSS\ntext_file.write(css)\n# write the HTML-ized Pandas DataFrame\ntext_file.write(data.to_html())\n\nimgkitoptions = {\"format\": \"svg\"}\nimgkit.from_file(\"filename.html\", outputfile, options=imgkitoptions)\ntext_file.close()\n</code></pre>\n"}, {"tags": ["python", "numpy", "vectorization"], "answers": [{"comments": [{"owner": {"reputation": 213, "user_id": 3491987, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dcd00a67d408f4d7abd9508e79d660d8?s=128&d=identicon&r=PG&f=1", "display_name": "DIY-DS", "link": "https://stackoverflow.com/users/3491987/diy-ds"}, "edited": false, "score": 0, "creation_date": 1558558231, "post_id": 56264558, "comment_id": 99145970, "body": "hm.. this looks like should work.. my numpy is out-dated... looks like the <code>np.take_along_axis</code> is very new."}, {"owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "reply_to_user": {"reputation": 213, "user_id": 3491987, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dcd00a67d408f4d7abd9508e79d660d8?s=128&d=identicon&r=PG&f=1", "display_name": "DIY-DS", "link": "https://stackoverflow.com/users/3491987/diy-ds"}, "edited": false, "score": 0, "creation_date": 1558560046, "post_id": 56264558, "comment_id": 99146685, "body": "@user3491987 Upon further inspection, it revealed that you are selecting rows off the input. So, needed few changes. Please check out the edits on those."}], "tags": [], "owner": {"reputation": 203214, "user_id": 3293881, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/6ZYnq.jpg?s=128&g=1", "display_name": "Divakar", "link": "https://stackoverflow.com/users/3293881/divakar"}, "is_accepted": true, "score": 1, "last_activity_date": 1558559987, "last_edit_date": 1558559987, "creation_date": 1558556958, "answer_id": 56264558, "question_id": 56264456, "link": "https://stackoverflow.com/questions/56264456/bootstrap-numpy-2d-array/56264558#56264558", "title": "bootstrap numpy 2D array", "body": "<p>Here's one vectorized approach -</p>\n\n<pre><code>m,n = base.shape\nidx = np.random.randint(0,m,(m,nsample))\nout = base[idx].swapaxes(1,2)\n</code></pre>\n\n<p>Basic idea is that we generate all the possible indices with <code>np.random.randint</code> as <code>idx</code>. That would an array of shape <code>(m,nsample)</code>. We use this array to index into the input array along the first axis. Thus, it selects random rows off <code>base</code>. To get the final output with a shape <code>(m,n,nsample)</code>, we need to swap last two axes.</p>\n"}, {"tags": [], "owner": {"reputation": 88, "user_id": 4092392, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebdf39466e8390ac8c49e24e4feed8c0?s=128&d=identicon&r=PG&f=1", "display_name": "IshanD", "link": "https://stackoverflow.com/users/4092392/ishand"}, "is_accepted": false, "score": 0, "last_activity_date": 1558557169, "creation_date": 1558557169, "answer_id": 56264597, "question_id": 56264456, "link": "https://stackoverflow.com/questions/56264456/bootstrap-numpy-2d-array/56264597#56264597", "title": "bootstrap numpy 2D array", "body": "<p>You can use the <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.stack.html\" rel=\"nofollow noreferrer\">stack</a> function from numpy. Your code would then look like:</p>\n\n<pre><code>base=np.array([[20,30],[50,60],[70,80],[10,30]])\nprint(np.shape(base))\nnsample=10\ntmp = []\nfor i in range(nsample):\n    id_pick = np.random.choice(np.shape(base)[0], size=(np.shape(base)[0]))\n    print(id_pick)\n    boot1=base[id_pick,:]\n    tmp.append(boot1)\ntmp = np.stack(tmp, axis=-1)\nprint(tmp)\n</code></pre>\n"}], "owner": {"reputation": 213, "user_id": 3491987, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/dcd00a67d408f4d7abd9508e79d660d8?s=128&d=identicon&r=PG&f=1", "display_name": "DIY-DS", "link": "https://stackoverflow.com/users/3491987/diy-ds"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1684, "favorite_count": 0, "accepted_answer_id": 56264558, "answer_count": 2, "score": 3, "last_activity_date": 1558559987, "creation_date": 1558556531, "last_edit_date": 1558558692, "question_id": 56264456, "link": "https://stackoverflow.com/questions/56264456/bootstrap-numpy-2d-array", "title": "bootstrap numpy 2D array", "body": "<p>I am trying to sample with replacement a <code>base</code> 2D numpy array with shape of (4,2) by rows, say 10 times. The final output should be a 3D numpy array.</p>\n\n<p>Have tried the code below, it works. But is there a way to do it without the for loop?</p>\n\n<pre><code>base=np.array([[20,30],[50,60],[70,80],[10,30]])\nprint(np.shape(base))\nnsample=10\ntmp=np.zeros((np.shape(base)[0],np.shape(base)[1],10))\nfor i in range(nsample):\n    id_pick = np.random.choice(np.shape(base)[0], size=(np.shape(base)[0]))\n    print(id_pick)\n    boot1=base[id_pick,:]\n    tmp[:,:,i]=boot1\nprint(tmp)\n</code></pre>\n"}, {"tags": ["python", "json", "python-3.x", "encoding", "byte"], "comments": [{"owner": {"reputation": 1415, "user_id": 2314391, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b7e52c232ca81d0d7bf28f2609e15d1?s=128&d=identicon&r=PG", "display_name": "Will", "link": "https://stackoverflow.com/users/2314391/will"}, "edited": false, "score": 0, "creation_date": 1558557669, "post_id": 56264449, "comment_id": 99145737, "body": "which line throws the error?"}], "answers": [{"tags": [], "owner": {"reputation": 476, "user_id": 11500265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/249c8bee3df73f631b724e416b6fee75?s=128&d=identicon&r=PG&f=1", "display_name": "Olaf", "link": "https://stackoverflow.com/users/11500265/olaf"}, "is_accepted": true, "score": 7, "last_activity_date": 1558558847, "creation_date": 1558558847, "answer_id": 56264959, "question_id": 56264449, "link": "https://stackoverflow.com/questions/56264449/typeerror-object-of-type-bytes-is-not-json-serializable/56264959#56264959", "title": "&quot;TypeError: Object of type bytes is not JSON serializable&quot;", "body": "<p>The problem is that <code>base64.b64encode(bytes(fk, 'utf-8'))</code> in <code>encrypt_dict</code> returns a byte-string (<code>b'NGtUbnNEc2hXZTlsOE1tcWVoVkNOUjMtWVIxcVZrWGV1WlBVcjJ2WkhHST0='</code>) while encrypt_string returns a normal string (no leading b). The JSON format only supports unicode strings. </p>\n\n<p>This can be fixed by replacing line 16 in <code>encrypt_dict</code> with </p>\n\n<pre><code>ed['fk'] = base64.b64encode(bytes(fk, 'utf-8')).decode(\"ascii\")\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 10821757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LAt3x.png?s=128&g=1", "display_name": "Pero", "link": "https://stackoverflow.com/users/10821757/pero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9982, "favorite_count": 2, "accepted_answer_id": 56264959, "answer_count": 1, "score": 3, "last_activity_date": 1558558847, "creation_date": 1558556516, "last_edit_date": 1558558702, "question_id": 56264449, "link": "https://stackoverflow.com/questions/56264449/typeerror-object-of-type-bytes-is-not-json-serializable", "title": "&quot;TypeError: Object of type bytes is not JSON serializable&quot;", "body": "<p>Trying to dump a dictionary in a JSON file gives me the error \"TypeError: a bytes-like object is required, not 'str'\"</p>\n\n<p>I already tried to remove the bytes conversion part of the \"encrypt_string\" function but it gives me the error \"TypeError: a bytes-like object is required, not 'str'\"</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#!/usr/bin/python3\n\n# Imports\nimport json\nimport base64\nfrom cryptography.fernet import Fernet\n\n# Save\ndef encrypt_string(string, f):\n    return str(f.encrypt(base64.b64encode(bytes(string,'utf-8'))).decode('utf-8'))\n\ndef encrypt_dict(dict):\n    fk = Fernet.generate_key().decode('utf-8')\n    f = Fernet(fk)\n    ed = {}\n    ed['fk'] = base64.b64encode(bytes(fk, 'utf-8'))\n    for key, value in dict.items():\n        ekey = encrypt_string(key, f)\n        evalue = encrypt_string(value, f)\n        ed[ekey[::-1]] = evalue[::-1]\n    return ed\n\ndef save_game(slot, savename):\n    print(\"Saving file...\")\n    path = 'saves/savegame{0}.json'.format(slot)\n    data = {\n        'game': 'Game name here',\n        'version': 'Version here',\n        'author': 'Author here',\n        'savename': str(savename),\n    }\n    data = encrypt_dict(data)\n    with open(path, 'w') as f:\n        json.dump(data, f)\n        f.close()\n    print('Data saved in', path)\n\n# Main\nimport gamemodule as gm\n\ndef main():\n    print(\"Running...\")\n    gm.save_game(1, 'test')\n    input(\"Press any button to continue...\")\n</code></pre>\n\n<p>I expected the file the program to save the game data but it just returns the \"TypeError: a bytes-like object is required, not 'str'\" error</p>\n\n<p>I think that it's related to me encoding the variables in the encrypt_dict function but I'm not sure, I've browsed other problems similar to this one but I didn't find anything that fixed my error</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 3, "creation_date": 1558556410, "post_id": 56264356, "comment_id": 99145175, "body": "This is not how you do multiple conditionals in python"}, {"owner": {"reputation": 3730, "user_id": 1291935, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6c0d80f8d0f580c5e1fcb208c02874d?s=128&d=identicon&r=PG", "display_name": "DrCord", "link": "https://stackoverflow.com/users/1291935/drcord"}, "edited": false, "score": 0, "creation_date": 1558556612, "post_id": 56264356, "comment_id": 99145287, "body": "not sure why this was downvoted, it is a duplicate but that shouldn&#39;t merit downvotes, is perfectly fine question as far as I can tell..."}, {"owner": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "edited": false, "score": 0, "creation_date": 1558556755, "post_id": 56264356, "comment_id": 99145362, "body": "what if the input is <code>&#39;yEs&#39;</code>? if all you care about is yes/no, then prompt the user to enter yes/no. ignore case by doing <code>if Check.lower().strip()[0] == &#39;y&#39;</code> and consider <i>anything</i> else to be a &quot;no&quot; response."}], "answers": [{"comments": [{"owner": {"reputation": 1853, "user_id": 3029274, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/678505a60d20e850fb26b7bc12a440a0?s=128&d=identicon&r=PG&f=1", "display_name": "Maddy", "link": "https://stackoverflow.com/users/3029274/maddy"}, "edited": false, "score": 0, "creation_date": 1558556538, "post_id": 56264419, "comment_id": 99145246, "body": "reason for downvote?"}, {"owner": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "edited": false, "score": 1, "creation_date": 1558556637, "post_id": 56264419, "comment_id": 99145301, "body": "<code>if check in (&quot;yes&quot;,&quot;yah&quot;, ...)</code> also probably a good idea to <code>lower().strip()</code> the input to reduce the number of comparisons you need to make, or since we&#39;re talking about y/n responses, just take the <code>check[0]</code> and test if it&#39;s <code>&#39;y&#39;</code>."}, {"owner": {"reputation": 1853, "user_id": 3029274, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/678505a60d20e850fb26b7bc12a440a0?s=128&d=identicon&r=PG&f=1", "display_name": "Maddy", "link": "https://stackoverflow.com/users/3029274/maddy"}, "reply_to_user": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "edited": false, "score": 0, "creation_date": 1558556735, "post_id": 56264419, "comment_id": 99145353, "body": "@DavidZemens, that is valid but not sure if the OP wants the program to run that way. checking for <code>check[0]</code> is a great solution."}, {"owner": {"reputation": 51083, "user_id": 1467082, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/ZPeMR.jpg?s=128&g=1", "display_name": "David Zemens", "link": "https://stackoverflow.com/users/1467082/david-zemens"}, "edited": false, "score": 1, "creation_date": 1558557055, "post_id": 56264419, "comment_id": 99145486, "body": "not sure, but pretty sure OP doesn&#39;t know how he wants the program to run based on the snippets of code provided. <code>Search1</code> through <code>Search5</code> instead of storing several searches in a list? Upper-case names?  99% of the time you&#39;d want to treat &quot;Yes&quot; == &quot;yes&quot; == [any other variation on casing of that word, plus whitespace], so the <code>lower().strip()</code> helps foolproof your user-input. But the <code>in</code> test is almost certainly better than a succession of <code>or</code> statements and it&#39;s objectively more readable."}], "tags": [], "owner": {"reputation": 1853, "user_id": 3029274, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/678505a60d20e850fb26b7bc12a440a0?s=128&d=identicon&r=PG&f=1", "display_name": "Maddy", "link": "https://stackoverflow.com/users/3029274/maddy"}, "is_accepted": false, "score": 0, "last_activity_date": 1558556646, "last_edit_date": 1558556646, "creation_date": 1558556403, "answer_id": 56264419, "question_id": 56264356, "link": "https://stackoverflow.com/questions/56264356/how-to-stop-if-function-from-reaction/56264419#56264419", "title": "How to stop &quot;If&quot; function from reaction", "body": "<p>Make sure you are entering everything correctly, it is case sensitive. \nAlso, your if condition is not correct. The correct way to check multiple if condition is : \n<code>itemToCheck == valueToCheck or itemToCheck == anotherValueToCheck</code> and so on.</p>\n\n<pre><code>def main():\n  check = input(\"Enter\")\n  if (check == \"yes\" or check == \"yah\"): &lt;-- you can include more items here\n    print(Search1, \",\", Search2, \",\")\n  elif (check == \"no\"):\n    print(\"ok\")\n\nmain()\n</code></pre>\n"}], "owner": {"reputation": 52, "user_id": 11541497, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dk_C02U6uQs/AAAAAAAAAAI/AAAAAAAAADM/qf-q9Kca9B8/photo.jpg?sz=128", "display_name": "TheOneNinja X", "link": "https://stackoverflow.com/users/11541497/theoneninja-x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "closed_date": 1558556420, "answer_count": 1, "score": -2, "last_activity_date": 1558556646, "creation_date": 1558556153, "last_edit_date": 1558556379, "question_id": 56264356, "link": "https://stackoverflow.com/questions/56264356/how-to-stop-if-function-from-reaction", "closed_reason": "Duplicate", "title": "How to stop &quot;If&quot; function from reaction", "body": "<p>So I'm testing out a Search History program on Python and its pretty basic, you search 5 different things one after another and then it asks whether or not you would like to show your Browsing History, so if you type in \"yes\" it displays it, but if I put \"no\" it still displays it.</p>\n\n<p>So I have added several different \"ifs, elif, and else\" functions but none have worked</p>\n\n<pre><code>print \"Check Browsing History?\"\n\nCheck = raw_input()\n\nif Check == \"Yes\" or \"Yeah\" or \"Sure\" or \"yes\" or \"yeah\" or \"sure\":\n\n    print Search1 + \",\" ,\n    print Search2 + \",\" , \n    print Search3 + \",\" , \n    print Search4 + \",\" , \n    print Search5 + \".\"\nelse:\n    if Check == \"No\" or \"Nope\":\n\n        print\"OK\"\n</code></pre>\n\n<p>When its \"yes\" it's supposed to display the 5 recent Search History and when its \"no\" it just says \"ok\" and the program ends.</p>\n\n<p>Instead, when you type \"yes\" it does display the 5 recent Search History's but it does the same thing if you type \"no\"</p>\n\n<p>There are no Error messages because the program \"works\"</p>\n"}, {"tags": ["python", "ruby", "boolean-logic"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 3, "creation_date": 1558555899, "post_id": 56264246, "comment_id": 99144943, "body": "Which values in Ruby would you expect to evaluate to <code>true</code> and which to <code>false</code>? Ruby and Python don&#39;t agree on this question (consider not just <code>0</code>, but the empty string, array, range, etc.), so if you want something that behaves like Python you&#39;ll need to write it yourself."}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 2, "creation_date": 1558555922, "post_id": 56264246, "comment_id": 99144956, "body": "<a href=\"https://stackoverflow.com/q/3028243/1126841\">stackoverflow.com/q/3028243/1126841</a> may be relevant."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1558556099, "post_id": 56264246, "comment_id": 99145035, "body": "I wonder if <code>bool(1) #=&gt; true</code> implies that you would expect <code>bool(0) #=&gt; false</code>? What is <code>true</code> or <code>false</code>? What is the expected output or other inputs? Can you please elaborate on this?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1558568625, "post_id": 56264246, "comment_id": 99148752, "body": "Take a look at <a href=\"https://stackoverflow.com/a/35092232/128421\">stackoverflow.com/a/35092232/128421</a> for a breakdown of how we look at Ruby truth/false."}], "answers": [{"tags": [], "owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "is_accepted": true, "score": 9, "last_activity_date": 1558556184, "creation_date": 1558556184, "answer_id": 56264364, "question_id": 56264246, "link": "https://stackoverflow.com/questions/56264246/does-ruby-have-a-bool-function-like-python/56264364#56264364", "title": "Does Ruby have a `bool` function like Python?", "body": "<p>There's always the classic</p>\n\n<pre><code>!!a\n</code></pre>\n\n<p>This also works in Javascript, C++, and (using <code>not</code> instead of <code>!</code>) Python.</p>\n\n<p>Bear in mind that Ruby has different notions of truthiness than Python. In Python, a lot of \"empty\" objects are falsy, and custom classes can have their truthiness determined by a magic method. In Ruby, <em>only</em> <code>nil</code> and <code>false</code> are falsy, and <em>all</em> other values (including numbers, strings, lists, and any user-defined class) are truthy.</p>\n"}, {"comments": [{"owner": {"reputation": 380, "user_id": 3838537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4dbf714fa6d6114f49582dd36fd6d886?s=128&d=identicon&r=PG", "display_name": "seeker", "link": "https://stackoverflow.com/users/3838537/seeker"}, "edited": false, "score": 0, "creation_date": 1558560515, "post_id": 56264724, "comment_id": 99146840, "body": "Neat custom function, I\u2019ll be sure to use it"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 380, "user_id": 3838537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4dbf714fa6d6114f49582dd36fd6d886?s=128&d=identicon&r=PG", "display_name": "seeker", "link": "https://stackoverflow.com/users/3838537/seeker"}, "edited": false, "score": 1, "creation_date": 1558570307, "post_id": 56264724, "comment_id": 99149079, "body": "@seeker worth looking at the <code>blank?</code> and <code>present?</code> functions provided by activesupport (in rails) as wel"}], "tags": [], "owner": {"reputation": 4688, "user_id": 6241184, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1022848011119215/picture?type=large", "display_name": "Vinicius Brasil", "link": "https://stackoverflow.com/users/6241184/vinicius-brasil"}, "is_accepted": false, "score": 3, "last_activity_date": 1558558054, "last_edit_date": 1558558054, "creation_date": 1558557748, "answer_id": 56264724, "question_id": 56264246, "link": "https://stackoverflow.com/questions/56264246/does-ruby-have-a-bool-function-like-python/56264724#56264724", "title": "Does Ruby have a `bool` function like Python?", "body": "<p>If what you want is to <code>1 == true</code> and <code>0 == false</code>, you should explicitly compare the values, such as:</p>\n\n<pre><code>if x == 1\n  # do something\nend\n</code></pre>\n\n<p>That's because, in Ruby, only <code>false</code> and <code>nil</code> are falsy. The rest evaluates to <code>true</code>.</p>\n\n<p>In other words:</p>\n\n<pre><code>def to_bool(x)\n  !!x\nend\n\nto_bool(1)          #=&gt; true\nto_bool(0)          #=&gt; true\nto_bool(\"0\")        #=&gt; true\nto_bool(\"1\")        #=&gt; true\nto_bool(Object.new) #=&gt; true\n\nto_bool(nil)        #=&gt; false\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 380, "user_id": 3838537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4dbf714fa6d6114f49582dd36fd6d886?s=128&d=identicon&r=PG", "display_name": "seeker", "link": "https://stackoverflow.com/users/3838537/seeker"}, "edited": false, "score": 0, "creation_date": 1558560412, "post_id": 56264743, "comment_id": 99146808, "body": "Thanks, handy to know"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1558595962, "post_id": 56264743, "comment_id": 99154781, "body": "There&#39;s also <code>zero?</code> / <code>nonzero?</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1558596731, "post_id": 56264743, "comment_id": 99155189, "body": "@Stefan: Thanks. It might be confusing to OP though, since <code>nonzero?</code> isn&#39;t the negation of <code>zero?</code>."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 3, "last_activity_date": 1558596574, "last_edit_date": 1558596574, "creation_date": 1558557849, "answer_id": 56264743, "question_id": 56264246, "link": "https://stackoverflow.com/questions/56264246/does-ruby-have-a-bool-function-like-python/56264743#56264743", "title": "Does Ruby have a `bool` function like Python?", "body": "<p>If you know which type you'll use, you could try to mimick Python's logic in Ruby.</p>\n\n<p>An empty list, hash or string are truthy in Ruby, so you'll need to check if they're not empty:</p>\n\n<pre><code>![].empty?\n# =&gt; false\n![3].empty?\n# =&gt; true\n!\"\".empty?\n# =&gt; false\n!\"foo\".empty?\n# =&gt; true\n</code></pre>\n\n<p>Likewise, you could check that an integer is not zero:</p>\n\n<pre><code>0 != 0\n#=&gt; false\n1 != 0\n#=&gt; true\n3.14 != 0\n#=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 380, "user_id": 3838537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4dbf714fa6d6114f49582dd36fd6d886?s=128&d=identicon&r=PG", "display_name": "seeker", "link": "https://stackoverflow.com/users/3838537/seeker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "accepted_answer_id": 56264364, "answer_count": 3, "score": 2, "last_activity_date": 1558596574, "creation_date": 1558555633, "last_edit_date": 1558568186, "question_id": 56264246, "link": "https://stackoverflow.com/questions/56264246/does-ruby-have-a-bool-function-like-python", "title": "Does Ruby have a `bool` function like Python?", "body": "<p>In Python I can determine the boolean value an expression evaluates to if I use the <code>bool</code> function. For example:</p>\n\n<pre><code>bool(1)\n#=&gt; True\n</code></pre>\n\n<p>Does such a construct exist in Ruby? I can't seem to find evidence that it does. I'm currently having to use equivalence tests to determine boolean values and was wondering if there was more a convenient way of doing this.</p>\n"}, {"tags": ["python", "selenium", "web-scraping", "beautifulsoup", "screen-scraping"], "comments": [{"owner": {"reputation": 1037, "user_id": 4374150, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ODuVG.jpg?s=128&g=1", "display_name": "Paula Livingstone", "link": "https://stackoverflow.com/users/4374150/paula-livingstone"}, "edited": false, "score": 1, "creation_date": 1558556056, "post_id": 56264230, "comment_id": 99145019, "body": "what do you get?"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1558556264, "post_id": 56264230, "comment_id": 99145107, "body": "The site appears to load asynchronously and dynamically, so requests and BS4 won;t be able to get the page elements. Please include what you&#39;ve tried in selenium, as that will likely be a better route to take"}, {"owner": {"reputation": 23, "user_id": 11541283, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kwmQkqCgNj4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdFgyhT4-UyUhAeR7kI3oU2Fics6w/mo/photo.jpg?sz=128", "display_name": "muntazir nawani", "link": "https://stackoverflow.com/users/11541283/muntazir-nawani"}, "edited": false, "score": 0, "creation_date": 1558556270, "post_id": 56264230, "comment_id": 99145112, "body": "i get page source of the site but not the headlines. which is something i want to scrap"}, {"owner": {"reputation": 23, "user_id": 11541283, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kwmQkqCgNj4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdFgyhT4-UyUhAeR7kI3oU2Fics6w/mo/photo.jpg?sz=128", "display_name": "muntazir nawani", "link": "https://stackoverflow.com/users/11541283/muntazir-nawani"}, "edited": false, "score": 0, "creation_date": 1558556418, "post_id": 56264230, "comment_id": 99145179, "body": "here is the selenium code"}, {"owner": {"reputation": 23, "user_id": 11541283, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kwmQkqCgNj4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdFgyhT4-UyUhAeR7kI3oU2Fics6w/mo/photo.jpg?sz=128", "display_name": "muntazir nawani", "link": "https://stackoverflow.com/users/11541283/muntazir-nawani"}, "edited": false, "score": 0, "creation_date": 1558556430, "post_id": 56264230, "comment_id": 99145184, "body": "<code>import time from selenium import webdriver from bs4 import  BeautifulSoup driver = webdriver.Chrome(&#39;C:&#47;Users&#47;MUNTAZIR&#47;Downloads&#47;Compressed&#47;chr&zwnj;&#8203;omedriver_win32&#47;chro&zwnj;&#8203;medriver.exe&#39;) time.sleep(5) site_url = &quot;https:&#47;&#47;www.accesswire.com&#47;newsroom&#47;&quot; time.sleep(5) print(site_url) soup = BeautifulSoup(driver.page_source, &#39;lxml&#39;) print(soup) </code>"}, {"owner": {"reputation": 23, "user_id": 11541283, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kwmQkqCgNj4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdFgyhT4-UyUhAeR7kI3oU2Fics6w/mo/photo.jpg?sz=128", "display_name": "muntazir nawani", "link": "https://stackoverflow.com/users/11541283/muntazir-nawani"}, "edited": false, "score": 0, "creation_date": 1558556492, "post_id": 56264230, "comment_id": 99145222, "body": "it output this result"}, {"owner": {"reputation": 23, "user_id": 11541283, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kwmQkqCgNj4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdFgyhT4-UyUhAeR7kI3oU2Fics6w/mo/photo.jpg?sz=128", "display_name": "muntazir nawani", "link": "https://stackoverflow.com/users/11541283/muntazir-nawani"}, "edited": false, "score": 0, "creation_date": 1558556495, "post_id": 56264230, "comment_id": 99145226, "body": "<a href=\"https://www.accesswire.com/newsroom/\" rel=\"nofollow noreferrer\">accesswire.com/newsroom</a> &lt;html xmlns=&quot;<a href=\"http://www.w3.org/1999/xhtml&quot;&gt;&lt;head&gt;&lt;/head&gt;&lt;body&gt;&lt;/body&gt;&lt;/html\" rel=\"nofollow noreferrer\">w3.org/1999/xhtml&quot;&gt;&lt;head&gt;&lt;/&hellip;</a>&gt;  Process finished with exit code 0"}], "answers": [{"tags": [], "owner": {"reputation": 1587, "user_id": 3520965, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31fd95e9573fb19ea05a8f928d905f39?s=128&d=identicon&r=PG&f=1", "display_name": "Dalvenjia", "link": "https://stackoverflow.com/users/3520965/dalvenjia"}, "is_accepted": true, "score": 0, "last_activity_date": 1558556361, "creation_date": 1558556361, "answer_id": 56264403, "question_id": 56264230, "link": "https://stackoverflow.com/questions/56264230/cannot-get-headlines-content-while-scraping/56264403#56264403", "title": "Cannot get headlines content while scraping", "body": "<p>If pull and parse is not working is because the content is dynamic, you will need selenium for the actual browser to generate the content for you</p>\n\n<pre><code>from selenium import webdriver\n\ndriver = webdriver.Firefox()\ndriver.get('https://www.accesswire.com/newsroom/')\nheadline_links = driver.find_elements_by_css_selector('a.headlinelink')\nheadlines = [link.get_attribute('textContent') for link in headline_links]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 11541283, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kwmQkqCgNj4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdFgyhT4-UyUhAeR7kI3oU2Fics6w/mo/photo.jpg?sz=128", "display_name": "muntazir nawani", "link": "https://stackoverflow.com/users/11541283/muntazir-nawani"}, "edited": false, "score": 0, "creation_date": 1558558285, "post_id": 56264728, "comment_id": 99145993, "body": "can you please suggest any good tutorial/docs on  how to improve the speed of scraping  @dalvenjia"}, {"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "reply_to_user": {"reputation": 23, "user_id": 11541283, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kwmQkqCgNj4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdFgyhT4-UyUhAeR7kI3oU2Fics6w/mo/photo.jpg?sz=128", "display_name": "muntazir nawani", "link": "https://stackoverflow.com/users/11541283/muntazir-nawani"}, "edited": false, "score": 0, "creation_date": 1558558621, "post_id": 56264728, "comment_id": 99146126, "body": "use an API as shown above should be first choice. Other than that a lot will be about choosing the right tool for the job, the optimal selector method/selector path, correct and optimal use of waits where required; code structure...... I am sure you can google for these. I mostly pick up by Google. I am new to python so would look to experienced pythonistas to see how they structure their code and what syntax they use. The above I would say is pretty efficient."}, {"owner": {"reputation": 23, "user_id": 11541283, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kwmQkqCgNj4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdFgyhT4-UyUhAeR7kI3oU2Fics6w/mo/photo.jpg?sz=128", "display_name": "muntazir nawani", "link": "https://stackoverflow.com/users/11541283/muntazir-nawani"}, "edited": false, "score": 0, "creation_date": 1558558925, "post_id": 56264728, "comment_id": 99146251, "body": "Thank you sir for the help"}, {"owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "edited": false, "score": 1, "creation_date": 1558560949, "post_id": 56264728, "comment_id": 99146980, "body": "Another awesome approach yet again @QHarr."}], "tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": false, "score": 2, "last_activity_date": 1558558755, "last_edit_date": 1558558755, "creation_date": 1558557781, "answer_id": 56264728, "question_id": 56264230, "link": "https://stackoverflow.com/questions/56264230/cannot-get-headlines-content-while-scraping/56264728#56264728", "title": "Cannot get headlines content while scraping", "body": "<p>You don't need selenium. Just use the more efficient requests and the API which the page uses</p>\n\n<pre><code>import re\nimport requests\nfrom bs4 import BeautifulSoup as bs\n\nr = requests.get('https://www.accesswire.com/api/newsroom.ashx')\np = re.compile(r\" \\$\\('#newslist'\\)\\.after\\('(.*)\\);\")\nhtml = p.findall(r.text)[0]\nsoup = bs(html, 'lxml')\nheadlines = [(item.text, item['href']) for item in soup.select('a.headlinelink')]\nprint(headlines)\n</code></pre>\n\n<hr>\n\n<p>Regex explanation:</p>\n\n<p><img src=\"https://i.stack.imgur.com/gKWyX.png\" width=\"500\"></p>\n\n<p>Try regex <a href=\"https://regex101.com/r/A4fDOT/1\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 23, "user_id": 11541283, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-kwmQkqCgNj4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdFgyhT4-UyUhAeR7kI3oU2Fics6w/mo/photo.jpg?sz=128", "display_name": "muntazir nawani", "link": "https://stackoverflow.com/users/11541283/muntazir-nawani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 56264403, "answer_count": 2, "score": 1, "last_activity_date": 1608591273, "creation_date": 1558555576, "last_edit_date": 1608591273, "question_id": 56264230, "link": "https://stackoverflow.com/questions/56264230/cannot-get-headlines-content-while-scraping", "title": "Cannot get headlines content while scraping", "body": "<p>I am new to scraping but I have tried every method to solve this problem but not getting the desired results. I want to scrape this site <a href=\"https://www.accesswire.com/newsroom/\" rel=\"nofollow noreferrer\">https://www.accesswire.com/newsroom/</a> and I want to scrape all the headlines, headlines show up when I inspect them in browser but after scraping with bs4 or selenium, I do not get the full page-Source code and also don't get the headlines as well.</p>\n<p>I have tried <code>time.sleep(10)</code> but that is also not working out for me. I used selenium to get the page but that also wouldn't work for me as well.\ndiv.column-15 w-col w-col-9\nthis is the class, div where headlines reside</p>\n<pre><code>ua     = UserAgent()\nheader = {'user-agent':ua.chrome}\nurl = &quot;https://www.accesswire.com/newsroom/&quot;\nresponse = requests.get(url, headers=header)\ntime.sleep(12)\nsoup = BeautifulSoup(response.content, 'html.parser')\ntime.sleep(12)\nheadline_Div = soup.find(&quot;div&quot;,{&quot;class&quot;:&quot;column-15 w-col w-col-9&quot;})\nprint(headline_Div)\n</code></pre>\n<p>I just want to get all the headlines and headlines links on this page\nor at least a full page-source should be displayed so that I can manipulate it by myself.</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "neural-network", "gradient-descent"], "comments": [{"owner": {"reputation": 1860, "user_id": 7943474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d47ce5c2efa9b8f5ac5f5af032625fac?s=128&d=identicon&r=PG&f=1", "display_name": "Neb", "link": "https://stackoverflow.com/users/7943474/neb"}, "edited": false, "score": 0, "creation_date": 1558565698, "post_id": 56264225, "comment_id": 99148206, "body": "How can you expect the same weights if the input variables change at each fold?."}, {"owner": {"reputation": 51, "user_id": 11480031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fbf4655069715886db1d226fd31f654?s=128&d=identicon&r=PG&f=1", "display_name": "najib", "link": "https://stackoverflow.com/users/11480031/najib"}, "reply_to_user": {"reputation": 1860, "user_id": 7943474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d47ce5c2efa9b8f5ac5f5af032625fac?s=128&d=identicon&r=PG&f=1", "display_name": "Neb", "link": "https://stackoverflow.com/users/7943474/neb"}, "edited": false, "score": 0, "creation_date": 1558594477, "post_id": 56264225, "comment_id": 99154123, "body": "Because the weights are printed at the beginning of the fold, before any input is passed to the optimizer @Neb"}], "answers": [{"tags": [], "owner": {"reputation": 1860, "user_id": 7943474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d47ce5c2efa9b8f5ac5f5af032625fac?s=128&d=identicon&r=PG&f=1", "display_name": "Neb", "link": "https://stackoverflow.com/users/7943474/neb"}, "is_accepted": false, "score": 0, "last_activity_date": 1558693046, "creation_date": 1558693046, "answer_id": 56290625, "question_id": 56264225, "link": "https://stackoverflow.com/questions/56264225/initialize-neural-network-weights-with-tensorflow/56290625#56290625", "title": "Initialize neural network weights with Tensorflow", "body": "<p>I guess that what's happening is the following. Suppose you set the initial seed at 42, at the beginning of your script:</p>\n\n<pre><code>set_seed(42)\n</code></pre>\n\n<p>Then, you sample a random number:</p>\n\n<pre><code>sample()\n&gt;&gt;&gt; 0.875\n</code></pre>\n\n<p>Now, you sample again:</p>\n\n<pre><code>sample()\n&gt;&gt;&gt; 0.311\n</code></pre>\n\n<p>It is different. It's not a bug. The <code>set_seed()</code> function tells the system to sample \"random\" number starting from position 42 (in the sequence of pseudorandom numbers) <strong>every time you run your program</strong>, not every time the <code>sample</code> function is called. Try to run your program multiple times. You'll see that the weights of your parameters will be different between folds, but will be the same throughout multiple runs, i.e. in all runs, at fold 1, weights will be always initialized to the same value.</p>\n\n<hr>\n\n<h3>Now, how to solve this?</h3>\n\n<p>Sample a random initialization once, at the beginning of the script and initialize your weight with it at the beginning of each fold:</p>\n\n<pre><code>w = tf.Variable(..., initializer=YOUR_NUMPY_ARRAY)\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 11480031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fbf4655069715886db1d226fd31f654?s=128&d=identicon&r=PG&f=1", "display_name": "najib", "link": "https://stackoverflow.com/users/11480031/najib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 912, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1558693046, "creation_date": 1558555549, "last_edit_date": 1558595213, "question_id": 56264225, "link": "https://stackoverflow.com/questions/56264225/initialize-neural-network-weights-with-tensorflow", "title": "Initialize neural network weights with Tensorflow", "body": "<p>I am developing a neural network model using Tensorflow. In the LOSO cross validation, I need to train a model for 10 folds, since I have data from 10 different subjects.</p>\n\n<p>Taking this into account, I need to reset the optimizer and the network weights at the start of every cross-validation fold. I defined the weights as follows:</p>\n\n<pre><code>weights = {\n    'w1' : tf.Variable(tf.random_uniform(shape = [100, 10],seed =   0)),\n\n    'w2' : tf.Variable(tf.random_uniform(shape = [10, 100],seed = 0))}\n</code></pre>\n\n<p>and I reset the Optimizer and the weights by reinitializing all global variables as follows:</p>\n\n<pre><code># Start session to run Tensors and Operations\nwith tf.Session() as sess:\n    # Optimizer\n    optimizer = tf.train.GradientDescentOptimizer(lr).minimize(loss)\n    # Variables initializer\n    init = tf.global_variables_initializer()\n    # Loop over the 10 cross-validation subjects\n    for subject in range(0,10):\n        # Initialize global variables and optimizer\n        sess.run(init)\n        # Print initialized weights (should be always the same)\n        print(sess.run(weights['w1']))\n        # Loop over epochs to train the model\n        for epoch in range(epochs):         \n            # Run network optimizer for the current epoch\n            _,cost = sess.run([optimizer,loss], feed_dict ={X:x_train[subject,:], Y:y_train[subject,:]})\n</code></pre>\n\n<p>However, in every iteration of the loop I get printed different values for the weights, like the Operation seed I set to 0 is not doing its job. Does anyone know what I am missing?</p>\n"}, {"tags": ["python", "apache-spark"], "comments": [{"owner": {"reputation": 1539, "user_id": 11363596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f37f85a4f09c7ad798a028a153d18dc?s=128&d=identicon&r=PG&f=1", "display_name": "vb_rises", "link": "https://stackoverflow.com/users/11363596/vb-rises"}, "edited": false, "score": 0, "creation_date": 1558565685, "post_id": 56264211, "comment_id": 99148204, "body": "what is the output of <code>ls -l &#47;usr&#47;local&#47;opt&#47;python-spark-tutorial&#47;rdd&#47;testingCode.py</code> from the linux terminal?"}], "owner": {"reputation": 49, "user_id": 11541018, "user_type": "registered", "profile_image": "https://graph.facebook.com/2354301514628677/picture?type=large", "display_name": "Hunter Mitchell", "link": "https://stackoverflow.com/users/11541018/hunter-mitchell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1014, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1558557656, "creation_date": 1558555518, "last_edit_date": 1558557656, "question_id": 56264211, "link": "https://stackoverflow.com/questions/56264211/how-to-fix-errno-2-no-such-file-or-directory-error-in-apache-spark", "title": "How to fix &#39;[errno 2] no such file or directory&#39; error in apache-spark", "body": "<p>I am trying to set up apache-spark with python and visual studio code. I followed a tutorial up to this point and am not getting any errors with my code but when I try to run the code </p>\n\n<pre><code>spark-submit rdd/testingCode.py \n</code></pre>\n\n<p>I get a long list of errors and warnings. It also says </p>\n\n<pre><code>can't open file '/usr/local/opt/python-spark-tutorial/rdd/testingCode.py': [Errno 2] No such file or directory' \n</code></pre>\n\n<p>although the file does exist with this path! </p>\n\n<p>I believe it may have to do with my python path? Help please! </p>\n\n<p>Here is the code I am trying to run:</p>\n\n<pre><code>from pyspark import SparkContext, SparkConf\n\nconf = SparkConf().setAppName(\"word count\").setMaster(\"local[3]\")\nsc = SparkContext(conf = conf)\n\ninputIntegers = list(range(1,6))\nintegerRdd = sc.parallelize(inputIntegers)\nfor x in integerRdd.collect():\n    print(x)\n</code></pre>\n\n<p>And here is the error: </p>\n\n<pre><code>WARNING: An illegal reflective access operation has occurred\nWARNING: Illegal reflective access by \norg.apache.hadoop.security.authentication.util.KerberosUtil \n(file:/usr/local/opt/spark/spark-2.3.3-bin-hadoop2.7/jars/hadoop- \nauth-2.7.3.jar) to method sun.security.krb5.Config.getInstance()\nWARNING: Please consider reporting this to the maintainers of \norg.apache.hadoop.security.authentication.util.KerberosUtil\nWARNING: Use --illegal-access=warn to enable warnings of further \nillegal reflective access operations\nWARNING: All illegal access operations will be denied in a future release\n2019-05-22 12:17:13 WARN  NativeCodeLoader:62 - Unable to load \nnative-hadoop library for your platform... using builtin-java \nclasses where applicable\n</code></pre>\n\n<p>/usr/local/Cellar/python@2/2.7.15_1/Frameworks/Python.framework/Versions/2.7/Resources/Python.app/Contents/MacOS/Python:</p>\n\n<pre><code>can't open file '/usr/local/opt/python-spark- \ntutorial/rdd/testingCode.py': [Errno 2] No such file or directory\n2019-05-22 12:17:13 INFO  ShutdownHookManager:54 - Shutdown hook \ncalled\n2019-05-22 12:17:13 INFO  ShutdownHookManager:54 - Deleting \ndirectory \n/private/var/folders/fn/mf51ynh97v71r4609l_l1j4m0000gn/T/spark-bdd580eb-468c-430e-bc27-8a2ca7d89697\n</code></pre>\n"}, {"tags": ["python", "mysql"], "answers": [{"tags": [], "owner": {"reputation": 1339, "user_id": 3117592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fXUjs.jpg?s=128&g=1", "display_name": "ozcanyarimdunya", "link": "https://stackoverflow.com/users/3117592/ozcanyarimdunya"}, "is_accepted": false, "score": 1, "last_activity_date": 1558556194, "creation_date": 1558556194, "answer_id": 56264366, "question_id": 56264199, "link": "https://stackoverflow.com/questions/56264199/unable-to-create-mysql-database-python-cant-connect-to-server-localhost/56264366#56264366", "title": "Unable to create mysql database python (&quot;can&#39;t connect to server localhost&quot;)", "body": "<p>You should give proper keyword including database</p>\n\n<pre><code>mysql.connector.connect(user='user', password='password',\n                              host='127.0.0.1',\n                              database='db_name')\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 8679724, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/fSQEx.jpg?s=128&g=1", "display_name": "Josh Flori", "link": "https://stackoverflow.com/users/8679724/josh-flori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558556194, "creation_date": 1558555488, "question_id": 56264199, "link": "https://stackoverflow.com/questions/56264199/unable-to-create-mysql-database-python-cant-connect-to-server-localhost", "title": "Unable to create mysql database python (&quot;can&#39;t connect to server localhost&quot;)", "body": "<p>I am simply following this example <a href=\"https://www.w3schools.com/python/python_mysql_create_db.asp\" rel=\"nofollow noreferrer\">https://www.w3schools.com/python/python_mysql_create_db.asp</a></p>\n\n<p>using this code</p>\n\n<pre><code>import mysql.connector\n\nmydb = mysql.connector.connect(\n  host=\"localhost\",\n  user=\"yourusername\",\n  passwd=\"yourpassword\"\n)\n</code></pre>\n\n<p>I leave localhost unchanged, but set the user/pass to be my personal user/password I use to log into the computer. I am getting</p>\n\n<pre><code>mysql.connector.errors.DatabaseError: 2003 (HY000): Can't connect to MySQL server on 'localhost' (61)\n</code></pre>\n\n<p>but am surprised to find no clear explanation as to why online. It seems like such a simple line of code... I don't know what I'm doing wrong. What am I doing wrong?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 1, "creation_date": 1558555344, "post_id": 56264160, "comment_id": 99144709, "body": "string <i>is</i> an object in pandas. Sorry."}, {"owner": {"reputation": 83, "user_id": 9837743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a3c74ddd6059e18fb0fead3a01966d?s=128&d=identicon&r=PG&f=1", "display_name": "Mike P.", "link": "https://stackoverflow.com/users/9837743/mike-p"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1558557487, "post_id": 56264160, "comment_id": 99145666, "body": "So is there no way of declaring this column as a string exclusively? I&#39;m trying to get the dataframe to see this entire column as a string so I don&#39;t run into any problems using a regular expression match on it"}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1558557540, "post_id": 56264160, "comment_id": 99145688, "body": "<code>df.astype(str)</code> will do it. But the column type will still be object."}, {"owner": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1558557548, "post_id": 56264160, "comment_id": 99145691, "body": "If you want specific string types, use numpy."}, {"owner": {"reputation": 83, "user_id": 9837743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a3c74ddd6059e18fb0fead3a01966d?s=128&d=identicon&r=PG&f=1", "display_name": "Mike P.", "link": "https://stackoverflow.com/users/9837743/mike-p"}, "reply_to_user": {"reputation": 268354, "user_id": 4909087, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/LmD3e.png?s=128&g=1", "display_name": "cs95", "link": "https://stackoverflow.com/users/4909087/cs95"}, "edited": false, "score": 0, "creation_date": 1558557715, "post_id": 56264160, "comment_id": 99145763, "body": "Oh okay, thank you"}], "owner": {"reputation": 83, "user_id": 9837743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0a3c74ddd6059e18fb0fead3a01966d?s=128&d=identicon&r=PG&f=1", "display_name": "Mike P.", "link": "https://stackoverflow.com/users/9837743/mike-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "closed_date": 1558555380, "answer_count": 0, "score": 0, "last_activity_date": 1558555292, "creation_date": 1558555292, "question_id": 56264160, "link": "https://stackoverflow.com/questions/56264160/cannot-change-data-type-of-dataframe", "closed_reason": "Duplicate", "title": "Cannot change data type of dataframe", "body": "<p>For some reason, I am having trouble converting my dataframe's column to datatype string.</p>\n\n<p>As an example I was playing around with a simple dataframe of numbers 1 through 7 as strings. I have tried converting this column to an integer with df.astype() and it worked for both 'int32' and 'int64', so I believe there is something I'm missing but I'm not sure what. Whenever I try using df.astype('str') or df.astype(str) in any regard, it fails to work and keeps the column as type 'object'</p>\n\n<pre><code>df = pd.DataFrame({'A': ['1','2','3','4','5','6','7']})\n\ndf.astype('str')\nprint(df.dtypes)\n</code></pre>\n\n<p>The expected result would be 'string' here but it still views this column as type 'object' when I run this code. I'm really not sure what is going wrong here and would appreciate any help</p>\n"}, {"tags": ["python", "python-3.x", "python-import", "importerror"], "comments": [{"owner": {"reputation": 4010, "user_id": 1015495, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XL7y1.jpg?s=128&g=1", "display_name": "Mike G", "link": "https://stackoverflow.com/users/1015495/mike-g"}, "edited": false, "score": 1, "creation_date": 1558555554, "post_id": 56264134, "comment_id": 99144801, "body": "To ask a potentially very obvious question, are you <i>running</i> the code in your virtual environment?"}, {"owner": {"reputation": 1, "user_id": 11541332, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156274259311846/picture?type=large", "display_name": "Soap89", "link": "https://stackoverflow.com/users/11541332/soap89"}, "reply_to_user": {"reputation": 4010, "user_id": 1015495, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XL7y1.jpg?s=128&g=1", "display_name": "Mike G", "link": "https://stackoverflow.com/users/1015495/mike-g"}, "edited": false, "score": 0, "creation_date": 1558585086, "post_id": 56264134, "comment_id": 99151537, "body": "Yes I am running the code in my virtual environment"}], "owner": {"reputation": 1, "user_id": 11541332, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156274259311846/picture?type=large", "display_name": "Soap89", "link": "https://stackoverflow.com/users/11541332/soap89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1558559204, "creation_date": 1558555200, "last_edit_date": 1558559204, "question_id": 56264134, "link": "https://stackoverflow.com/questions/56264134/i-have-tornado-installed-but-i-cant-run-my-script-i-keep-getting-importerror", "title": "I have Tornado installed, but i can&#39;t run my script. I keep getting &#39;ImportError: No module named tornado&#39;", "body": "<p>I am new here.\nI am currently running a virtual environment, however I can't seem to run the script that I am testing. </p>\n\n<p>I have tornado 4.4.2 installed in my virtual environment.</p>\n\n<p>Please refer my snippet code as follwing:</p>\n\n<pre><code>from tornado import httpserver, httpclient, ioloop, web, websocket, gen\n</code></pre>\n\n<p>But, I keep getting this error as following:</p>\n\n<pre><code>\"C:\\Users\\User\\.\\main.py\"line 7, in &lt;module&gt;\n    from tornado import httpserver, httpclient, ioloop, web, websocket, gen\nImportError: No module named tornado\"\n</code></pre>\n"}, {"tags": ["python", "pyspark", "databricks"], "answers": [{"tags": [], "owner": {"reputation": 20467, "user_id": 4989676, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jP8H6.jpg?s=128&g=1", "display_name": "Peter Pan", "link": "https://stackoverflow.com/users/4989676/peter-pan"}, "is_accepted": false, "score": 0, "last_activity_date": 1558596562, "creation_date": 1558596562, "answer_id": 56270136, "question_id": 56264129, "link": "https://stackoverflow.com/questions/56264129/set-axis-range-in-databricks-plot/56270136#56270136", "title": "Set axis range in databricks plot", "body": "<p>Be sure that there are not any other options, only except <code>Plot Options</code> as the figure below can help to customize plot simply.</p>\n\n<p><a href=\"https://i.stack.imgur.com/RT1nI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RT1nI.png\" alt=\"enter image description here\"></a></p>\n\n<p>And according to the offical document, the only way to customize plot as you wish is to follow <a href=\"https://docs.azuredatabricks.net/user-guide/visualizations/html-d3-and-svg.html\" rel=\"nofollow noreferrer\">HTML, D3, and SVG in Notebooks</a> to customize plot by <a href=\"https://docs.azuredatabricks.net/user-guide/visualizations/index.html#displayhtml-function\" rel=\"nofollow noreferrer\"><code>displayHTML</code> function</a>. If you have to show the original point in your plot, you can refer to a D3 sample <a href=\"https://observablehq.com/@d3/line-chart\" rel=\"nofollow noreferrer\"><code>Line Chart</code></a> to draw it via <code>displayHTML</code>.</p>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 302, "user_id": 4901058, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1826d3df04ea20da72b29b50be6a054a?s=128&d=identicon&r=PG&f=1", "display_name": "tormond", "link": "https://stackoverflow.com/users/4901058/tormond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 376, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1558596562, "creation_date": 1558555184, "last_edit_date": 1558590870, "question_id": 56264129, "link": "https://stackoverflow.com/questions/56264129/set-axis-range-in-databricks-plot", "title": "Set axis range in databricks plot", "body": "<p>I have a dataframe with dates and counts.  I want to create a plot in databricks of this which is easy enough.  However, the y-axis does not start at 0, rather the min seems to be picked automatically.  I think this is misleading on my dataset and would like to set the axis to 0.</p>\n\n<p>However, there is no information in the docs or anything and the plot options are very limited.</p>\n\n<p>Is there some option that I can trigger that allows this?  Thanks.</p>\n\n<pre><code>\ndf = spark.createDataFrame([Row(_c0=1, _c1='169476969'),\n Row(_c0=2, _c1='172966662'),\n Row(_c0=3, _c1='166889786'),\n Row(_c0=4, _c1='127088937'),\n Row(_c0=5, _c1='118771203')]).toDF('Instance', 'Volume')\n</code></pre>\n\n<p>Plot Output</p>\n\n<p><a href=\"https://i.stack.imgur.com/83wAm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/83wAm.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 44000, "user_id": 535275, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/Ft2Mw.jpg?s=128&g=1", "display_name": "Scott Hunter", "link": "https://stackoverflow.com/users/535275/scott-hunter"}, "edited": false, "score": 0, "creation_date": 1558555196, "post_id": 56264102, "comment_id": 99144624, "body": "If this isn&#39;t the output you want, what <i>do</i> you want?  If it is, why are you here?"}, {"owner": {"reputation": 970, "user_id": 10620028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b76e9c6ed74b548534059fec223fcc94?s=128&d=identicon&r=PG&f=1", "display_name": "iamchoosinganame", "link": "https://stackoverflow.com/users/10620028/iamchoosinganame"}, "edited": false, "score": 0, "creation_date": 1558555209, "post_id": 56264102, "comment_id": 99144631, "body": "How about <code>&#39;,&#39;.join(l)+&#39;.&#39;</code>?"}, {"owner": {"reputation": 6432, "user_id": 2625090, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PKELS.png?s=128&g=1", "display_name": "arielnmz", "link": "https://stackoverflow.com/users/2625090/arielnmz"}, "edited": false, "score": 1, "creation_date": 1558555263, "post_id": 56264102, "comment_id": 99144663, "body": "<code>&#39;,&#39;.join(l)+&#39;.&#39;</code>"}, {"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1558555292, "post_id": 56264102, "comment_id": 99144676, "body": "Read the comment in the code you provided. That explains the behavior"}], "answers": [{"tags": [], "owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "is_accepted": false, "score": 2, "last_activity_date": 1558555208, "creation_date": 1558555208, "answer_id": 56264136, "question_id": 56264102, "link": "https://stackoverflow.com/questions/56264102/determining-if-item-in-list-is-last-item-in-list/56264136#56264136", "title": "Determining if item in list is last item in list", "body": "<p>You can use <code>join</code> to put a <code>,</code> between each string and then just concatenate the last dot:</p>\n\n<pre><code>print(\",\".join(l) + \".\")\n</code></pre>\n\n<p>If you did want to loop manually, one way would be to use <code>enumerate</code>:</p>\n\n<pre><code>for index, item in enumerate(l):\n    if index == len(l)-1:\n        # this is the last item\n    else:\n        # it's not the last item\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47115, "user_id": 235354, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097d761861529df52a6800744f1074d2?s=128&d=identicon&r=PG", "display_name": "jspcal", "link": "https://stackoverflow.com/users/235354/jspcal"}, "is_accepted": false, "score": 1, "last_activity_date": 1558555241, "creation_date": 1558555241, "answer_id": 56264143, "question_id": 56264102, "link": "https://stackoverflow.com/questions/56264102/determining-if-item-in-list-is-last-item-in-list/56264143#56264143", "title": "Determining if item in list is last item in list", "body": "<p>perhaps use <code>join</code>:</p>\n\n<pre><code>names=['rob', 'jack', 'rob']\n','.join(names) + '.'\n# 'rob,jack,rob.'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 1, "last_activity_date": 1558555556, "creation_date": 1558555556, "answer_id": 56264228, "question_id": 56264102, "link": "https://stackoverflow.com/questions/56264102/determining-if-item-in-list-is-last-item-in-list/56264228#56264228", "title": "Determining if item in list is last item in list", "body": "<p>Your attempt doesn't work when you have duplicates of the last item in the list, since you're checking the item's value, not its actual place in the list. You could use <code>enumerate()</code> to get the item's index as well as its value.</p>\n\n<pre><code>for index, item in enumerate(l):\n    if index = len(l)-1:\n        print(item + \".\", end=\"\")\n    else:\n        print(item + \",\", end=\"\")\n</code></pre>\n\n<p>But the other suggestions to use <code>join</code> are the more pythonic solutions.</p>\n"}, {"tags": [], "owner": {"reputation": 24329, "user_id": 5237560, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CO92P.png?s=128&g=1", "display_name": "Alain T.", "link": "https://stackoverflow.com/users/5237560/alain-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1558557380, "creation_date": 1558557380, "answer_id": 56264637, "question_id": 56264102, "link": "https://stackoverflow.com/questions/56264102/determining-if-item-in-list-is-last-item-in-list/56264637#56264637", "title": "Determining if item in list is last item in list", "body": "<p>You could print all the items except the last one using a for loop and then handle the last one outside of the loop:</p>\n\n<pre><code>for item in l[:-1]:\n    print(item, end=\",\")\nprint(l[-1]+\".\")\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 3084010, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/153e4aa93fac2489ae2927cd7cb2c6bf?s=128&d=identicon&r=PG&f=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/3084010/justin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1558557380, "creation_date": 1558555051, "question_id": 56264102, "link": "https://stackoverflow.com/questions/56264102/determining-if-item-in-list-is-last-item-in-list", "title": "Determining if item in list is last item in list", "body": "<p>I have a function <code>printListAsSentence(l)</code> where <code>l</code> should be a <code>list</code>. This function should print the items in a list separated by a comma, unless it is the last item in the list, then it should end with a period. I thought I could use <code>l[-1]</code>, but that is not working. Here is my attempt: </p>\n\n<pre><code>def printListAsSentence(l):\n    for item in l:\n        if item == l[-1]: #This compares the value of the strings. Only will work if there is no duplicate values.\n            print(item + \".\", end=\"\")\n        else:\n            print(item + \",\", end=\"\")\n</code></pre>\n\n<p>An example:</p>\n\n<pre><code>names = ['rob', 'jack', 'rob']\nprintListAsSentence(names)\n</code></pre>\n\n<p>Would output:</p>\n\n<pre><code>\"rob.jack,rob.\"\n</code></pre>\n"}, {"tags": ["python", "iteration", "os.walk"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1558556110, "post_id": 56264100, "comment_id": 99145037, "body": "Please fix your indentation. <code>gatherLots(iniLotParts)</code> needs to be at the same indentation as <code>for root</code> or <code>for file</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1558556208, "post_id": 56264100, "comment_id": 99145073, "body": "Why should it loop it only once? It should go through it for each file in <code>files</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1558556254, "post_id": 56264100, "comment_id": 99145100, "body": "Can you show an example of the file hierarchy, what you expect to get, and what you&#39;re getting instead?"}, {"owner": {"reputation": 1, "user_id": 4991264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3LJWcVujsqg/AAAAAAAAAAI/AAAAAAAANis/ZfsjDVrkQec/photo.jpg?sz=128", "display_name": "ada43952", "link": "https://stackoverflow.com/users/4991264/ada43952"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1558556546, "post_id": 56264100, "comment_id": 99145254, "body": "@Barmar yes, it should go through for each file in file, but it&#39;s doing it three times. A simple directory structure would be... TaxMaps    Lots       TWP1         file1.pdf         file2.pdf       TWP2          file1.pdf          file2.pdf"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1558556589, "post_id": 56264100, "comment_id": 99145279, "body": "What&#39;s happening is that the same filename exists in three different directories. <code>os.walk()</code> processes each directory, and the directory will be in <code>root</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1558556762, "post_id": 56264100, "comment_id": 99145366, "body": "It won&#39;t make a difference in the results, but you should move the code that calculates <code>parts</code> and tests <code>parts[2] == &quot;Lots&quot;</code> outside the <code>for file in files:</code> loop, since it doesn&#39;t change for each file."}, {"owner": {"reputation": 233489, "user_id": 14122, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5e2861b08f37fa306fbf5384994af688?s=128&d=identicon&r=PG", "display_name": "Charles Duffy", "link": "https://stackoverflow.com/users/14122/charles-duffy"}, "edited": false, "score": 0, "creation_date": 1558557840, "post_id": 56264100, "comment_id": 99145815, "body": "A good place to start would be logging <code>root</code>, <code>subdir</code> and <code>files</code> for every tuple <code>os.walk()</code> yields. That should go a long ways towards making it clear if the yielded values are surprising you, or the behavior of your code when processing those values is surprising you."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4991264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3LJWcVujsqg/AAAAAAAAAAI/AAAAAAAANis/ZfsjDVrkQec/photo.jpg?sz=128", "display_name": "ada43952", "link": "https://stackoverflow.com/users/4991264/ada43952"}, "is_accepted": false, "score": 0, "last_activity_date": 1558643151, "creation_date": 1558643151, "answer_id": 56282466, "question_id": 56264100, "link": "https://stackoverflow.com/questions/56264100/os-walk-for-loop-is-executing-code-with-each-iteration-what-am-i-doing-wrong/56282466#56282466", "title": "os.walk for loop is executing code with each iteration, what am I doing wrong?", "body": "<p>Okay, I figured it out! As it turns out I didn't quit understand how using the a \"for\" loop with os.walk worked. I thought it stayed within the loop for all of the elements of the loop (i.e. root, subdir, &amp; files).  So I collected my items within my list then made a function call out side of my loop when I thought all was collected.  What I found out was, that function call was made each time it looped through an element, specifically each sub-directory. So I changed up my code a bit based on some of the feedback I received and place my function calls more appropriately within the for loop. I also added an additional section for a different document I needed to collect.  What I finally ended up with is as follows:</p>\n\n<pre><code>def gatherData(rootdir):\n    try:\n        r=[]\n        subdirs = [x[0] for x in os.walk(rootdir)]\n\n        for subdir in subdirs:\n            iniLotParts = []\n            iniSecParts = []\n            iniMuniParts = []\n            drive, path_and_file = os.path.splitdrive(subdir)\n            parts = path_and_file.split(\"\\\\\")\n            files = os.walk(subdir).next()[2]\n            if (len(parts) == 4):\n                if parts[2] == \"Lots\":                    \n                    for file in files:\n                        lotPart = [parts[1], parts[2], parts[3], file]\n                        iniLotParts.append(lotPart)\n                    gatherLots(iniLotParts)\n                if parts[2] == \"Section\":\n                    for file in files:\n                        secPart = [parts[1], parts[2], parts[3], file]\n                        iniSecParts.append(secPart)\n                    gatherSecs(iniSecParts) \n    except Exception as e:\n        print(\"type error: for gather data \" + str(e))\n        print(traceback.format_exc())\n</code></pre>\n\n<p>Thanks everyone that contributed!</p>\n"}], "owner": {"reputation": 1, "user_id": 4991264, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3LJWcVujsqg/AAAAAAAAAAI/AAAAAAAANis/ZfsjDVrkQec/photo.jpg?sz=128", "display_name": "ada43952", "link": "https://stackoverflow.com/users/4991264/ada43952"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1558643151, "creation_date": 1558555044, "last_edit_date": 1558556313, "question_id": 56264100, "link": "https://stackoverflow.com/questions/56264100/os-walk-for-loop-is-executing-code-with-each-iteration-what-am-i-doing-wrong", "title": "os.walk for loop is executing code with each iteration, what am I doing wrong?", "body": "<p>I'm trying to collect files in a list from a directory to create links for a web page, but when the \"for\" loop completes, it executes the append function with each iteration. So I'm getting the same data triplicated, I'm guessing for each part of the loop (root, subdir, and files) iteration. What am I doing wrong or how should I do this differently?</p>\n\n<p>I'm pretty sure I've run this code or code like this before and not had the data triplicate so i'm at a loss as to why it's doing it now.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\n    try:\n        for root, subdir, files in os.walk(rootdir):\n               for file in files:\n                  drive, path_and_file = os.path.splitdrive(root)\n                  parts = path_and_file.split(\"\\\\\")\n                  if parts[2] == \"Lots\":\n                     lotPart = [parts[1], parts[2], parts[3], file]\n                     iniLotParts.append(lotPart)\n\n         gatherLots(iniLotParts)\n\n    except Exception as e:\n       print(\"type error: for gather data \" + str(e))\n       print(traceback.format_exc())\n\n</code></pre>\n\n<p>It seems it's going through my 'if parts[2] == \"Lots\":' loop multiple times. I'd expect it only to loop through it once.</p>\n"}]