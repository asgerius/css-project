[{"tags": ["python", "list"], "comments": [{"owner": {"reputation": 1336, "user_id": 8763097, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07748010c90ca48d262a588483d84367?s=128&d=identicon&r=PG&f=1", "display_name": "PeptideWitch", "link": "https://stackoverflow.com/users/8763097/peptidewitch"}, "edited": false, "score": 0, "creation_date": 1565222614, "post_id": 57403584, "comment_id": 101288685, "body": "Your code already appears to do what you want, with the caveat that the desired output is slightly out of order: <code>[[&#39;cs&#39;, &#39;kdddd&#39;, &#39;wwww&#39;], [&#39;a&#39;, &#39;papa&#39;, &#39;lsl&#39;], [&#39;akdf&#39;, &#39;ffff&#39;, &#39;pep8&#39;]]</code>. Did it not work for you?"}, {"owner": {"reputation": 1997, "user_id": 7836530, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f11697069f27f74c1f2af72df755ef95?s=128&d=identicon&r=PG&f=1", "display_name": "JamesHudson81", "link": "https://stackoverflow.com/users/7836530/jameshudson81"}, "reply_to_user": {"reputation": 1336, "user_id": 8763097, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07748010c90ca48d262a588483d84367?s=128&d=identicon&r=PG&f=1", "display_name": "PeptideWitch", "link": "https://stackoverflow.com/users/8763097/peptidewitch"}, "edited": false, "score": 0, "creation_date": 1565222712, "post_id": 57403584, "comment_id": 101288707, "body": "It did not worked because it did not generated the whole list of sublists"}, {"owner": {"reputation": 1336, "user_id": 8763097, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07748010c90ca48d262a588483d84367?s=128&d=identicon&r=PG&f=1", "display_name": "PeptideWitch", "link": "https://stackoverflow.com/users/8763097/peptidewitch"}, "edited": false, "score": 0, "creation_date": 1565222829, "post_id": 57403584, "comment_id": 101288732, "body": "Are you only showing a portion of the lists of lists? Because as it stands, your code performs exactly what you want it to with the specified lists and lists_of_lists"}, {"owner": {"reputation": 1997, "user_id": 7836530, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f11697069f27f74c1f2af72df755ef95?s=128&d=identicon&r=PG&f=1", "display_name": "JamesHudson81", "link": "https://stackoverflow.com/users/7836530/jameshudson81"}, "reply_to_user": {"reputation": 1336, "user_id": 8763097, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07748010c90ca48d262a588483d84367?s=128&d=identicon&r=PG&f=1", "display_name": "PeptideWitch", "link": "https://stackoverflow.com/users/8763097/peptidewitch"}, "edited": false, "score": 0, "creation_date": 1565222902, "post_id": 57403584, "comment_id": 101288749, "body": "Sorry I simplified the code because the list is massive"}, {"owner": {"reputation": 1336, "user_id": 8763097, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07748010c90ca48d262a588483d84367?s=128&d=identicon&r=PG&f=1", "display_name": "PeptideWitch", "link": "https://stackoverflow.com/users/8763097/peptidewitch"}, "edited": false, "score": 1, "creation_date": 1565222944, "post_id": 57403584, "comment_id": 101288756, "body": "Ok. Maybe get rid of the break command - that could terminate the loop prematurely before everything has been checked."}, {"owner": {"reputation": 1336, "user_id": 8763097, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07748010c90ca48d262a588483d84367?s=128&d=identicon&r=PG&f=1", "display_name": "PeptideWitch", "link": "https://stackoverflow.com/users/8763097/peptidewitch"}, "edited": false, "score": 0, "creation_date": 1565223228, "post_id": 57403584, "comment_id": 101288822, "body": "Thank you! You can also mark as accepted answer if you like :)"}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 11893426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/071c6fbbba985a7ecce8474faa9d3055?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/11893426/andrew"}, "edited": false, "score": 1, "creation_date": 1565230482, "post_id": 57403668, "comment_id": 101290075, "body": "Note you can also do this elegantly with a list comprehension: <code>[sublist for item in list1 for sublist in list_of_list1 if item in sublist]</code>"}], "tags": [], "owner": {"reputation": 1336, "user_id": 8763097, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07748010c90ca48d262a588483d84367?s=128&d=identicon&r=PG&f=1", "display_name": "PeptideWitch", "link": "https://stackoverflow.com/users/8763097/peptidewitch"}, "is_accepted": true, "score": 1, "last_activity_date": 1565223648, "last_edit_date": 1565223648, "creation_date": 1565223109, "answer_id": 57403668, "question_id": 57403584, "link": "https://stackoverflow.com/questions/57403584/generate-a-lists-of-list-based-on-the-elements-of-a-list/57403668#57403668", "title": "generate a lists of list based on the elements of a list", "body": "<p>Looks like the <code>break</code> command was prematurely stopping your list checking from iterating through list1.</p>\n\n<p>To reconfigure your code:</p>\n\n<pre><code>for sublist in list_of_list1:\n    for valores in list1:\n        if valores in sublist:\n            list_with_structures.append(sublist)\n</code></pre>\n\n<p>For readability, I'd recommend:</p>\n\n<pre><code>for item in list1:\n    for sublist in list_of_list1:\n        if item in sublist:\n            list_with_structures.append(sublist)\n</code></pre>\n"}], "owner": {"reputation": 1997, "user_id": 7836530, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f11697069f27f74c1f2af72df755ef95?s=128&d=identicon&r=PG&f=1", "display_name": "JamesHudson81", "link": "https://stackoverflow.com/users/7836530/jameshudson81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 57403668, "answer_count": 1, "score": 1, "last_activity_date": 1565223648, "creation_date": 1565222373, "last_edit_date": 1565222868, "question_id": 57403584, "link": "https://stackoverflow.com/questions/57403584/generate-a-lists-of-list-based-on-the-elements-of-a-list", "title": "generate a lists of list based on the elements of a list", "body": "<p>So I have a list1 and a list_of_list1, for this example I will simplify it to:</p>\n\n<pre><code>list1=['a','cs','akdf']\nlist_of_list1=[['cs','kdddd','wwww'],['a','papa','lsl'],['jdk','asas'],['akdf', 'ffff','pep8']]\n</code></pre>\n\n<p>I would like to check if the elements in list1 are in any of the list_of_list1\nthen append that sublist to a new list called list_with_structures.</p>\n\n<p>The desired output would be:</p>\n\n<pre><code>[['a','papa','lsl'],['cs','kdddd','wwww'],['akdf', 'ffff','pep8']]\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>list_with_structures=[]\nfor sublist in list_of_list1:\n    for valores in list1:\n        if valores in sublist:\n            list_with_structures.append(sublist)\n            break\nlist_with_structures\n</code></pre>\n\n<p>NOTE: The n\u00ba of elements in list1 is much greater than the lists in list_of_list1</p>\n"}, {"tags": ["python", "kivy"], "comments": [{"owner": {"reputation": 1358, "user_id": 9194639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcKsd.png?s=128&g=1", "display_name": "new QOpenGLWidget", "link": "https://stackoverflow.com/users/9194639/new-qopenglwidget"}, "edited": false, "score": 0, "creation_date": 1565222263, "post_id": 57403568, "comment_id": 101288618, "body": "Please explain."}, {"owner": {"reputation": 87, "user_id": 11247230, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qaPzXQBkhUE/AAAAAAAAAAI/AAAAAAAAABs/nlSD6aXnZcg/photo.jpg?sz=128", "display_name": "Laurent", "link": "https://stackoverflow.com/users/11247230/laurent"}, "reply_to_user": {"reputation": 1358, "user_id": 9194639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcKsd.png?s=128&g=1", "display_name": "new QOpenGLWidget", "link": "https://stackoverflow.com/users/9194639/new-qopenglwidget"}, "edited": false, "score": 0, "creation_date": 1565222623, "post_id": 57403568, "comment_id": 101288688, "body": "if you make a popup and you want to close it, you write &quot;on_release: root.dismiss()&quot;. The problem is that before closing it, I need to set a value in an array. So I need to call a function in another class. I just want to know what would be the command to call a function from another class (let&#39;s say &quot;Main&quot;). I thought it was &quot;Main.function()&quot; but it doesn&#39;t work."}, {"owner": {"reputation": 1358, "user_id": 9194639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcKsd.png?s=128&g=1", "display_name": "new QOpenGLWidget", "link": "https://stackoverflow.com/users/9194639/new-qopenglwidget"}, "edited": false, "score": 0, "creation_date": 1565222758, "post_id": 57403568, "comment_id": 101288719, "body": "Well what about OtherClass.function()?"}, {"owner": {"reputation": 87, "user_id": 11247230, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qaPzXQBkhUE/AAAAAAAAAAI/AAAAAAAAABs/nlSD6aXnZcg/photo.jpg?sz=128", "display_name": "Laurent", "link": "https://stackoverflow.com/users/11247230/laurent"}, "reply_to_user": {"reputation": 1358, "user_id": 9194639, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xcKsd.png?s=128&g=1", "display_name": "new QOpenGLWidget", "link": "https://stackoverflow.com/users/9194639/new-qopenglwidget"}, "edited": false, "score": 0, "creation_date": 1565222964, "post_id": 57403568, "comment_id": 101288759, "body": "It says: name &#39;OtherClass&#39; in not defined. Of course, I used the real class name, not &#39;OtherClass&#39;"}, {"owner": {"reputation": 185819, "user_id": 6622587, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gAYS0.jpg?s=128&g=1", "display_name": "eyllanesc", "link": "https://stackoverflow.com/users/6622587/eyllanesc"}, "edited": false, "score": 1, "creation_date": 1565223011, "post_id": 57403568, "comment_id": 101288773, "body": "@Laurent provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 11247230, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qaPzXQBkhUE/AAAAAAAAAAI/AAAAAAAAABs/nlSD6aXnZcg/photo.jpg?sz=128", "display_name": "Laurent", "link": "https://stackoverflow.com/users/11247230/laurent"}, "edited": false, "score": 0, "creation_date": 1565292572, "post_id": 57413575, "comment_id": 101318391, "body": "Thank you so much John. Exactly what I needed!"}], "tags": [], "owner": {"reputation": 20381, "user_id": 7254633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XCPaMN6qzA0/AAAAAAAAAAI/AAAAAAAAADs/o9igiVGFyK0/photo.jpg?sz=128", "display_name": "John Anderson", "link": "https://stackoverflow.com/users/7254633/john-anderson"}, "is_accepted": true, "score": 2, "last_activity_date": 1565270250, "creation_date": 1565270250, "answer_id": 57413575, "question_id": 57403568, "link": "https://stackoverflow.com/questions/57403568/is-it-possible-to-call-a-function-from-another-class-in-the-kv-file/57413575#57413575", "title": "Is it possible to call a function from another class in the kv file?", "body": "<p>In your <code>kv</code> you can reference <code>app</code>, <code>self</code>, or <code>root</code>. See <a href=\"https://kivy.org/doc/stable/api-kivy.lang.html#value-expressions-on-property-expressions-ids-and-reserved-keywords\" rel=\"nofollow noreferrer\">documentation</a>. So, if you have a reference to <code>OtherClass</code> in any of those, you can use that reference in <code>kv</code>. For example, if in your <code>App</code> class you include a line:</p>\n\n<pre><code>self.otherClassRef = OtherClass()\n</code></pre>\n\n<p>then in your <code>kv</code> you can use</p>\n\n<pre><code>on_release: app.otherClassRef.someMethod()\n</code></pre>\n\n<p>Regardless, you must have a reference to an instance of <code>OtherClass</code> to access instance methods.</p>\n\n<p>You can access static methods using</p>\n\n<pre><code>on_release: OtherClass.someStaticMethod()\n</code></pre>\n\n<p>or an instance method using</p>\n\n<pre><code>on_release: OtherClass().someMethod()\n</code></pre>\n\n<p>but you will likely need to import <code>OtherClass</code> in your <code>kv</code>. Something like</p>\n\n<pre><code>#:import OtherClass OtherClassFileName.OtherClass\n</code></pre>\n\n<p>Note that if you do <code>OtherClass().someMethod()</code> you are creating a new instance of <code>OtherClass</code>, not using any currently existing instance.</p>\n"}], "owner": {"reputation": 87, "user_id": 11247230, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-qaPzXQBkhUE/AAAAAAAAAAI/AAAAAAAAABs/nlSD6aXnZcg/photo.jpg?sz=128", "display_name": "Laurent", "link": "https://stackoverflow.com/users/11247230/laurent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 595, "favorite_count": 0, "accepted_answer_id": 57413575, "answer_count": 1, "score": 0, "last_activity_date": 1565270250, "creation_date": 1565222187, "question_id": 57403568, "link": "https://stackoverflow.com/questions/57403568/is-it-possible-to-call-a-function-from-another-class-in-the-kv-file", "title": "Is it possible to call a function from another class in the kv file?", "body": "<p>I have a popup window that I created with a class. In this popup, I have 2 buttons. Depending on the button you press, it has to call a function which is in the main class.</p>\n\n<p>If you call a function in the kv file with \"on_release:\" which is in the same class, you write \"root....()\". What should I write if I want to call one of the functions from another class?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 9243, "user_id": 1318181, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1ZfAE.png?s=128&g=1", "display_name": "kylieCatt", "link": "https://stackoverflow.com/users/1318181/kyliecatt"}, "edited": false, "score": 2, "creation_date": 1565221753, "post_id": 57403522, "comment_id": 101288508, "body": "Is this all of your code? Do you have a variable/function somewhere else that is named <code>enumerate</code>?"}, {"owner": {"reputation": 19, "user_id": 11810988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a78a28d31950e95083a818b7327001b9?s=128&d=identicon&r=PG&f=1", "display_name": "programmer", "link": "https://stackoverflow.com/users/11810988/programmer"}, "reply_to_user": {"reputation": 9243, "user_id": 1318181, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1ZfAE.png?s=128&g=1", "display_name": "kylieCatt", "link": "https://stackoverflow.com/users/1318181/kyliecatt"}, "edited": false, "score": 0, "creation_date": 1565221812, "post_id": 57403522, "comment_id": 101288520, "body": "no there are no variables/function named enumerate."}, {"owner": {"reputation": 12923, "user_id": 1530508, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fG8z0.png?s=128&g=1", "display_name": "ApproachingDarknessFish", "link": "https://stackoverflow.com/users/1530508/approachingdarknessfish"}, "edited": false, "score": 1, "creation_date": 1565221950, "post_id": 57403522, "comment_id": 101288544, "body": "Try printing <code>enumerate</code> and <code>type(enumerate)</code>."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1565222083, "post_id": 57403522, "comment_id": 101288574, "body": "I cannot reproduce this, although, you haven&#39;t even tried to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 19, "user_id": 11810988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a78a28d31950e95083a818b7327001b9?s=128&d=identicon&r=PG&f=1", "display_name": "programmer", "link": "https://stackoverflow.com/users/11810988/programmer"}, "edited": false, "score": 0, "creation_date": 1565222168, "post_id": 57403522, "comment_id": 101288591, "body": "the output in python3 shell is:  &lt;class &#39;type&#39;&gt;"}, {"owner": {"reputation": 19, "user_id": 11810988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a78a28d31950e95083a818b7327001b9?s=128&d=identicon&r=PG&f=1", "display_name": "programmer", "link": "https://stackoverflow.com/users/11810988/programmer"}, "edited": false, "score": 0, "creation_date": 1565222191, "post_id": 57403522, "comment_id": 101288599, "body": "do you want more code"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1565222412, "post_id": 57403522, "comment_id": 101288634, "body": "No, we want a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 9243, "user_id": 1318181, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1ZfAE.png?s=128&g=1", "display_name": "kylieCatt", "link": "https://stackoverflow.com/users/1318181/kyliecatt"}, "edited": false, "score": 0, "creation_date": 1565222663, "post_id": 57403522, "comment_id": 101288699, "body": "@programmer did you import all your files in the shell when you ran that?"}, {"owner": {"reputation": 19, "user_id": 11810988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a78a28d31950e95083a818b7327001b9?s=128&d=identicon&r=PG&f=1", "display_name": "programmer", "link": "https://stackoverflow.com/users/11810988/programmer"}, "reply_to_user": {"reputation": 9243, "user_id": 1318181, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1ZfAE.png?s=128&g=1", "display_name": "kylieCatt", "link": "https://stackoverflow.com/users/1318181/kyliecatt"}, "edited": false, "score": 0, "creation_date": 1565223198, "post_id": 57403522, "comment_id": 101288816, "body": "@kylie.a I did import all files"}, {"owner": {"reputation": 9243, "user_id": 1318181, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1ZfAE.png?s=128&g=1", "display_name": "kylieCatt", "link": "https://stackoverflow.com/users/1318181/kyliecatt"}, "edited": false, "score": 0, "creation_date": 1565223533, "post_id": 57403522, "comment_id": 101288874, "body": "What is the output of <code>help(enumerate)</code>"}, {"owner": {"reputation": 19, "user_id": 11810988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a78a28d31950e95083a818b7327001b9?s=128&d=identicon&r=PG&f=1", "display_name": "programmer", "link": "https://stackoverflow.com/users/11810988/programmer"}, "edited": false, "score": 0, "creation_date": 1565223711, "post_id": 57403522, "comment_id": 101288907, "body": "output is: class enumerate(object)  |  enumerate(iterable, start=0)  |    |  Return an enumerate object.  |    |    iterable  |      an object supporting iteration  |    |  The enumerate object yields pairs containing a count (from start, which  |  defaults to zero) and a value yielded by the iterable argument.  |    |  enumerate is useful for obtaining an indexed list:  |      (0, seq[0]), (1, seq[1]), (2, seq[2]), ...  |    |  Methods defined here:  |    |  __getattribute__(self, name, /)  |      Return getattr(self, name)."}, {"owner": {"reputation": 9243, "user_id": 1318181, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1ZfAE.png?s=128&g=1", "display_name": "kylieCatt", "link": "https://stackoverflow.com/users/1318181/kyliecatt"}, "edited": false, "score": 0, "creation_date": 1565223865, "post_id": 57403522, "comment_id": 101288938, "body": "It would appear at least in the context of your shell the symbol <code>enumerate</code> is pointing to the correct object. If you set a breakpoint before <code>enumerate</code> is called while the code is running is the output of <code>type&#47;help</code> the same?"}, {"owner": {"reputation": 19, "user_id": 11810988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a78a28d31950e95083a818b7327001b9?s=128&d=identicon&r=PG&f=1", "display_name": "programmer", "link": "https://stackoverflow.com/users/11810988/programmer"}, "edited": false, "score": 0, "creation_date": 1565224479, "post_id": 57403522, "comment_id": 101289051, "body": "i can post all code if youd like"}, {"owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "edited": false, "score": 5, "creation_date": 1565231006, "post_id": 57403522, "comment_id": 101290170, "body": "And <i>this</i> is why you <b><i>don&#39;t use <code>import *</code></i></b>."}], "answers": [{"comments": [{"owner": {"reputation": 74843, "user_id": 2988730, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/ZOX7t.jpg?s=128&g=1", "display_name": "Mad Physicist", "link": "https://stackoverflow.com/users/2988730/mad-physicist"}, "edited": false, "score": 0, "creation_date": 1565231430, "post_id": 57403555, "comment_id": 101290257, "body": "But that&#39;s not the entire code, is it?"}, {"owner": {"reputation": 19, "user_id": 11810988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a78a28d31950e95083a818b7327001b9?s=128&d=identicon&r=PG&f=1", "display_name": "programmer", "link": "https://stackoverflow.com/users/11810988/programmer"}, "edited": false, "score": 0, "creation_date": 1565231603, "post_id": 57403555, "comment_id": 101290286, "body": "no there&#39;s much more"}], "tags": [], "owner": {"reputation": 596, "user_id": 10837503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OVTQZ.jpg?s=128&g=1", "display_name": "Parijat Bhatt", "link": "https://stackoverflow.com/users/10837503/parijat-bhatt"}, "is_accepted": false, "score": 0, "last_activity_date": 1565222041, "creation_date": 1565222041, "answer_id": 57403555, "question_id": 57403522, "link": "https://stackoverflow.com/questions/57403522/enumerate-takes-0-positional-arguments-but-1-was-given/57403555#57403555", "title": "enumerate() takes 0 positional arguments but 1 was given", "body": "<p>Check your code; you may be having a function with the same name. I ran the following code and it did not throw error</p>\n\n<pre><code>menu = [[4.5,3.5]]\n\nw = 3.5\nh=2.6\n\nfor idx, row in enumerate(menu):\n\n        x  = w//2 - len(row)//2\n        y = h//2 - len(menu)//2 + idx\n        ax = w//3\n        i += 1\n\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 213464, "user_id": 2357112, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/3f80897d57525afe9eac4fb8c8318052?s=128&d=identicon&r=PG", "display_name": "user2357112 supports Monica", "link": "https://stackoverflow.com/users/2357112/user2357112-supports-monica"}, "is_accepted": true, "score": 4, "last_activity_date": 1565231118, "creation_date": 1565231118, "answer_id": 57404388, "question_id": 57403522, "link": "https://stackoverflow.com/questions/57403522/enumerate-takes-0-positional-arguments-but-1-was-given/57404388#57404388", "title": "enumerate() takes 0 positional arguments but 1 was given", "body": "<p><code>threading</code> has a <a href=\"https://docs.python.org/3/library/threading.html#threading.enumerate\" rel=\"nofollow noreferrer\"><code>threading.enumerate</code> function</a> that returns a list of the Thread objects for all live threads. Your <code>import *</code> imports that, hiding the builtin.</p>\n\n<p>Stop using <code>import *</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 11810988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a78a28d31950e95083a818b7327001b9?s=128&d=identicon&r=PG&f=1", "display_name": "programmer", "link": "https://stackoverflow.com/users/11810988/programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 879, "favorite_count": 1, "closed_date": 1565248957, "accepted_answer_id": 57404388, "answer_count": 2, "score": 0, "last_activity_date": 1565231118, "creation_date": 1565221576, "last_edit_date": 1565230444, "question_id": 57403522, "link": "https://stackoverflow.com/questions/57403522/enumerate-takes-0-positional-arguments-but-1-was-given", "closed_reason": "Not suitable for this site", "title": "enumerate() takes 0 positional arguments but 1 was given", "body": "<p>I get this error: TypeError: enumerate() takes 0 positional arguments but 1 was given.</p>\n\n<p>I have tried len(menu) but i get an error.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import socket\nimport urllib.request\nimport os\nimport curses\nimport time\nimport subprocess\nfrom threading import *\nfrom queue import Queue\n\nmenu = ['Play','Score','Help','Exit']\nfor idx, row in enumerate(menu):\n    x  = w//2 - len(row)//2\n    y = h//2 - len(menu)//2 + idx\n    ax = w//3\n    i += 1\n    if idx == select_row:\n       stdscr.attron(curses.color_pair(2))\n       stdscr.addstr(y,ax, '-&gt;')\n       stdscr.attroff(curses.color_pair(2))\n\n       stdscr.attron(curses.color_pair(1))\n       stdscr.addstr(y,x,row)\n       stdscr.attroff(curses.color_pair(1))\n    else:\n       stdscr.addstr(y,x,row)\n\n       stdscr.refresh()\n</code></pre>\n"}, {"tags": ["python", "amazon-web-services", "tensorflow", "amazon-s3", "amazon-sagemaker"], "comments": [{"owner": {"reputation": 1612, "user_id": 5753035, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-go_UWpUd2rk/AAAAAAAAAAI/AAAAAAAAHdU/sbSvIGtQWxA/photo.jpg?sz=128", "display_name": "Pramesh Bajracharya", "link": "https://stackoverflow.com/users/5753035/pramesh-bajracharya"}, "edited": false, "score": 0, "creation_date": 1576131777, "post_id": 57403510, "comment_id": 104801071, "body": "For future readers, In my case I had to mention <code>py_version=&#39;py2&#39;</code> to get it to work."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11875994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb35d0c9e2d5215747fc8832bd1a84d?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan Yuan", "link": "https://stackoverflow.com/users/11875994/bryan-yuan"}, "edited": false, "score": 0, "creation_date": 1565369136, "post_id": 57428948, "comment_id": 101346244, "body": "Thank you very much! After I removed the <code>py_version=&#39;py3&#39;</code>, the deployment can now start, but I get this error then: <code>UnexpectedStatusException: Error hosting endpoint sagemaker-tensorflow-2019-08-09-16-29-57-306: Failed. Reason:  The primary container for production variant AllTraffic did not pass the ping health check. Please check CloudWatch logs for this endpoint.</code>"}, {"owner": {"reputation": 165, "user_id": 4147810, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-e-Asl17ANyM/AAAAAAAAAAI/AAAAAAAAACM/tUOSo0c6Gdg/photo.jpg?sz=128", "display_name": "James Sanders", "link": "https://stackoverflow.com/users/4147810/james-sanders"}, "edited": false, "score": 0, "creation_date": 1565934503, "post_id": 57428948, "comment_id": 101506309, "body": "That&#39;s a step in the right direction, but as the error says, I would try checking the logs in your CloudWatch. If you cannot discern what is going on, paste the logs here and maybe we can help. Or try reaching out to support..."}], "tags": [], "owner": {"reputation": 560, "user_id": 4592183, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000088195212/picture?type=large", "display_name": "Ujjwal Bhardwaj", "link": "https://stackoverflow.com/users/4592183/ujjwal-bhardwaj"}, "is_accepted": false, "score": 2, "last_activity_date": 1565349527, "creation_date": 1565349527, "answer_id": 57428948, "question_id": 57403510, "link": "https://stackoverflow.com/questions/57403510/valueerror-while-deploying-tensorflow-model-to-amazon-sagemaker/57428948#57428948", "title": "ValueError while deploying tensorflow model to Amazon SageMaker", "body": "<p><a href=\"https://github.com/aws/sagemaker-python-sdk/issues/912#issuecomment-510226311\" rel=\"nofollow noreferrer\">https://github.com/aws/sagemaker-python-sdk/issues/912#issuecomment-510226311</a></p>\n\n<p>As mentioned in the issue</p>\n\n<p>Python 3 isn't supported using the TensorFlowModel object, as the container uses the TensorFlow serving api library in conjunction with the GRPC client to handle making inferences, however the TensorFlow serving api isn't supported in Python 3 officially, so there are only Python 2 versions of the containers when using the TensorFlowModel object.</p>\n\n<p>If you need Python 3 then you will need to use the Model object defined in\u00a0#2\u00a0above. The inference script format will change if you need to handle pre and post processing.\u00a0<a href=\"https://github.com/aws/sagemaker-tensorflow-serving-container#prepost-processing\" rel=\"nofollow noreferrer\">https://github.com/aws/sagemaker-tensorflow-serving-container#prepost-processing</a>.</p>\n"}], "owner": {"reputation": 1, "user_id": 11875994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffb35d0c9e2d5215747fc8832bd1a84d?s=128&d=identicon&r=PG&f=1", "display_name": "Bryan Yuan", "link": "https://stackoverflow.com/users/11875994/bryan-yuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565349527, "creation_date": 1565221512, "last_edit_date": 1565225896, "question_id": 57403510, "link": "https://stackoverflow.com/questions/57403510/valueerror-while-deploying-tensorflow-model-to-amazon-sagemaker", "title": "ValueError while deploying tensorflow model to Amazon SageMaker", "body": "<p>I want to deploy my trained tensorflow model to the amazon sagemaker, I am following the official guide here: <a href=\"https://aws.amazon.com/blogs/machine-learning/deploy-trained-keras-or-tensorflow-models-using-amazon-sagemaker/\" rel=\"nofollow noreferrer\">https://aws.amazon.com/blogs/machine-learning/deploy-trained-keras-or-tensorflow-models-using-amazon-sagemaker/</a> to deploy my model using jupyter notebook.</p>\n\n<p>But when I try to use code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>predictor = sagemaker_model.deploy(initial_instance_count=1, instance_type='ml.t2.medium')\n</code></pre>\n\n<p>It gives me the following error message:</p>\n\n<blockquote>\n  <p>ValueError: Error hosting endpoint sagemaker-tensorflow-2019-08-07-22-57-59-547: Failed Reason:  The image '520713654638.dkr.ecr.us-west-1.amazonaws.com/sagemaker-tensorflow:1.12-cpu-py3 ' does not exist.</p>\n</blockquote>\n\n<p>I think the tutorial does not tell me to create an image, and I do not know what to do.</p>\n\n<pre><code>import boto3, re\nfrom sagemaker import get_execution_role\n\nrole = get_execution_role()\n\n# make a tar ball of the model data files\nimport tarfile\nwith tarfile.open('model.tar.gz', mode='w:gz') as archive:\n    archive.add('export', recursive=True)\n\n# create a new s3 bucket and upload the tarball to it\nimport sagemaker\n\nsagemaker_session = sagemaker.Session()\ninputs = sagemaker_session.upload_data(path='model.tar.gz', key_prefix='model')\n\nfrom sagemaker.tensorflow.model import TensorFlowModel\nsagemaker_model = TensorFlowModel(model_data = 's3://' + sagemaker_session.default_bucket() + '/model/model.tar.gz',\n                                  role = role,\n                                  framework_version = '1.12',\n                                  entry_point = 'train.py',\n                                  py_version='py3')\n\n%%time\n#here I fail to deploy the model and get the error message\npredictor = sagemaker_model.deploy(initial_instance_count=1,\n                                   instance_type='ml.m4.xlarge')\n\n</code></pre>\n"}, {"tags": ["python", "python-unittest"], "answers": [{"comments": [{"owner": {"reputation": 621, "user_id": 1392897, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/77a81abd065fa0dc8e572021aad71ec2?s=128&d=identicon&r=PG", "display_name": "user1392897", "link": "https://stackoverflow.com/users/1392897/user1392897"}, "edited": false, "score": 0, "creation_date": 1565223070, "post_id": 57403622, "comment_id": 101288786, "body": "Yes the second example is exactly what I was trying to do thanks"}], "tags": [], "owner": {"reputation": 778, "user_id": 10833207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9gsE.png?s=128&g=1", "display_name": "Saritus", "link": "https://stackoverflow.com/users/10833207/saritus"}, "is_accepted": true, "score": 3, "last_activity_date": 1565222699, "creation_date": 1565222699, "answer_id": 57403622, "question_id": 57403502, "link": "https://stackoverflow.com/questions/57403502/unit-testing-with-external-data-file-in-python/57403622#57403622", "title": "Unit testing with external data file in Python", "body": "<p>Your complete test case should be wrapped inside a function. I'm not completely sure what you're trying to do with a function definition inside a for loop, but moving <code>def test_0(self)</code> to the top of your classing does the trick.</p>\n\n<pre><code>class TestIsEquivalent(unittest.TestCase):\n    def test_0(self):\n\n        filename = os.getcwd() + '\\\\data\\\\test-data.txt'\n\n        with open(filename) as f:\n            testdata = f.readlines()\n\n        for value in testdata:\n            print(value)\n\n            result = isEquivalent(value, value, 0)\n            self.assertEqual(result, True)\n</code></pre>\n\n<p>But if you want to create multiple test cases that all you the values inside of testdata, and you dont want to read the file multiple times, you can use the <code>setUpClass</code> function that is executed once at the start of all unittests inside a class. The result would look like this.</p>\n\n<pre><code>class TestIsEquivalent(unittest.TestCase):\n\n    @classmethod\n    def setUpClass(cls):\n        filename = os.getcwd() + '\\\\data\\\\test-data.txt'\n\n        with open(filename) as f:\n            cls.testdata = f.readlines()\n\n    def test_0(self):\n        for value in self.testdata:\n            print(value)\n\n            result = isEquivalent(value, value, 0)\n            self.assertEqual(result, True)\n</code></pre>\n"}], "owner": {"reputation": 621, "user_id": 1392897, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/77a81abd065fa0dc8e572021aad71ec2?s=128&d=identicon&r=PG", "display_name": "user1392897", "link": "https://stackoverflow.com/users/1392897/user1392897"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 57403622, "answer_count": 1, "score": -1, "last_activity_date": 1565222699, "creation_date": 1565221478, "last_edit_date": 1565222089, "question_id": 57403502, "link": "https://stackoverflow.com/questions/57403502/unit-testing-with-external-data-file-in-python", "title": "Unit testing with external data file in Python", "body": "<p>I am new to python and am trying to run unit tests injected with data from an external file:</p>\n\n<pre><code>class TestIsEquivalent(unittest.TestCase):\n\n    filename = os.getcwd() + '\\\\data\\\\test-data.txt'\n\n    with open(filename) as f:\n        testdata = f.readlines()\n\n    for value in testdata:\n        print(value)\n\n        def test_0(self):\n            result = isEquivalent(value, value, 0)\n            self.assertEqual(result, True)\n</code></pre>\n\n<p>I am getting the following error on line isEquivalent() is called with in the test function:</p>\n\n<pre><code>NameError: name 'value' is not defined \n</code></pre>\n\n<p>This would seem to suggest a scoping issue but I cannot figure out how to pass the value in the for loop into the test method. Any suggestions would be much appreciated.</p>\n"}, {"tags": ["python", "python-3.x", "jupyter-notebook", "output", "jupyter"], "comments": [{"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1565222389, "post_id": 57403493, "comment_id": 101288633, "body": "<a href=\"https://stackoverflow.com/help/how-to-ask\">How to ask a good question</a> &amp; <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, Reproducible Example</a>"}, {"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1565222521, "post_id": 57403493, "comment_id": 101288658, "body": "<a href=\"https://realpython.com/fast-flexible-pandas/#prevent-reprocessing-with-hdfstore\" rel=\"nofollow noreferrer\">Prevent Reprocessing with HDFStore</a>"}, {"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1565222914, "post_id": 57403493, "comment_id": 101288750, "body": "<a href=\"https://machinelearningmastery.com/save-load-machine-learning-models-python-scikit-learn/\" rel=\"nofollow noreferrer\">Save and Load Machine Learning Models in Python with scikit-learn</a>"}], "owner": {"reputation": 45, "user_id": 10029680, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/176b453a78131c499d7775e996e04b94?s=128&d=identicon&r=PG&f=1", "display_name": "Triansan", "link": "https://stackoverflow.com/users/10029680/triansan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 268, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565225910, "creation_date": 1565221374, "last_edit_date": 1565225910, "question_id": 57403493, "link": "https://stackoverflow.com/questions/57403493/loss-of-data-after-restarting-jupyter-notebook", "title": "Loss of data after restarting Jupyter notebook", "body": "<p>I restarted Jupyter notebook from the terminal, and after waiting for the kernel to be successfully reconnected, I wanted to run a new cell below a previously ran program. While my new cell required functions defined in above cells and data output previously ran. The pre-ran program took a long time to output the data and results so I don't want to rerun it. Currently, the cell is still loading to run as it reveals this <code>[*]</code> sign.</p>\n\n<p>Referencing to previous experiences that after I restarted Jupyter, and reloaded a certain program file, I'll always lose my previously ran data, as the output of a new cell will often prompt me to define certain functions that I previously defined in above cells. So, I'm afraid that I already lost the data I previously trained in this current program. </p>\n\n<p>Example of a previous program that had lost predefined function when running a new cell:</p>\n\n<blockquote>\n  <p>NameError                                 Traceback (most recent call last)\n   in \n  ----> 1 interp.plot_confusion_matrix(figsize=(10,10), dpi=60)</p>\n  \n  <p>NameError: name 'interp' is not defined</p>\n</blockquote>\n\n<p>For my current running cell, I restarted Jupyter and reconnected to kernel but I haven't reloaded the program file. So, Jupyter didn't report errors about missing function or variable definitions. </p>\n\n<p>Is there a way for me quickly output the cell from the preran program? </p>\n\n<p>Can anyone provide some strategies to save the data ran in Jupyter instead of having to rerun everything when re-accessing the file? </p>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 2, "creation_date": 1565228490, "post_id": 57403491, "comment_id": 101289740, "body": "What&#39;s in <code>polls.urls</code>?"}, {"owner": {"reputation": 43, "user_id": 8575983, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/145db6effefaa2396f5d5e9a731543ae?s=128&d=identicon&r=PG&f=1", "display_name": "nemesis", "link": "https://stackoverflow.com/users/8575983/nemesis"}, "reply_to_user": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1565256299, "post_id": 57403491, "comment_id": 101298955, "body": "That was the culprit:  <code>python from django.urls import path  from . import views  urlpatterns = { \t  path(&#39;&#39;, views.index, name=&#39;index&#39;), } </code>  I switched from {} to [] and now everything works. Didn&#39;t realize that this app would also break the site admin interface. Thank you!"}], "owner": {"reputation": 43, "user_id": 8575983, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/145db6effefaa2396f5d5e9a731543ae?s=128&d=identicon&r=PG&f=1", "display_name": "nemesis", "link": "https://stackoverflow.com/users/8575983/nemesis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565221363, "creation_date": 1565221363, "question_id": 57403491, "link": "https://stackoverflow.com/questions/57403491/django-tutorial-error-typeerror-at-admin-set-object-is-not-reversible", "title": "Django tutorial error: &quot;TypeError at /admin/ - &#39;set&#39; object is not reversible&quot;", "body": "<p>I am going through an official Django tutorial called \"Writing your first Django app\" and am currently at part 2. Here is the URL: <a href=\"https://docs.djangoproject.com/en/2.2/intro/tutorial02/\" rel=\"nofollow noreferrer\">https://docs.djangoproject.com/en/2.2/intro/tutorial02/</a> </p>\n\n<p>When trying to access the admin panel at <a href=\"http://127.0.0.1:8000/admin/\" rel=\"nofollow noreferrer\">http://127.0.0.1:8000/admin/</a>, as per the instructions, I receive the following error:</p>\n\n<pre><code>Environment:\n\nRequest Method: GET\nRequest URL: http://localhost:8000/admin/\n\nDjango Version: 2.2.4\nPython Version: 3.7.3\nInstalled Applications:\n['polls.apps.PollsConfig',\n 'django.contrib.admin',\n 'django.contrib.auth',\n 'django.contrib.contenttypes',\n 'django.contrib.sessions',\n 'django.contrib.messages',\n 'django.contrib.staticfiles']\nInstalled Middleware:\n['django.middleware.security.SecurityMiddleware',\n 'django.contrib.sessions.middleware.SessionMiddleware',\n 'django.middleware.common.CommonMiddleware',\n 'django.middleware.csrf.CsrfViewMiddleware',\n 'django.contrib.auth.middleware.AuthenticationMiddleware',\n 'django.contrib.messages.middleware.MessageMiddleware',\n 'django.middleware.clickjacking.XFrameOptionsMiddleware']\n\n\n\nTraceback:\n\nFile \"/usr/local/lib/python3.7/site-packages/django/core/handlers/exception.py\" in inner\n  34.             response = get_response(request)\n\nFile \"/usr/local/lib/python3.7/site-packages/django/core/handlers/base.py\" in _get_response\n  115.                 response = self.process_exception_by_middleware(e, request)\n\nFile \"/usr/local/lib/python3.7/site-packages/django/core/handlers/base.py\" in _get_response\n  113.                 response = wrapped_callback(request, *callback_args, **callback_kwargs)\n\nFile \"/usr/local/lib/python3.7/site-packages/django/contrib/admin/sites.py\" in wrapper\n  241.                 return self.admin_view(view, cacheable)(*args, **kwargs)\n\nFile \"/usr/local/lib/python3.7/site-packages/django/utils/decorators.py\" in _wrapped_view\n  142.                     response = view_func(request, *args, **kwargs)\n\nFile \"/usr/local/lib/python3.7/site-packages/django/views/decorators/cache.py\" in _wrapped_view_func\n  44.         response = view_func(request, *args, **kwargs)\n\nFile \"/usr/local/lib/python3.7/site-packages/django/contrib/admin/sites.py\" in inner\n  213.                 if request.path == reverse('admin:logout', current_app=self.name):\n\nFile \"/usr/local/lib/python3.7/site-packages/django/urls/base.py\" in reverse\n  58.                 app_list = resolver.app_dict[ns]\n\nFile \"/usr/local/lib/python3.7/site-packages/django/urls/resolvers.py\" in app_dict\n  512.             self._populate()\n\nFile \"/usr/local/lib/python3.7/site-packages/django/urls/resolvers.py\" in _populate\n  463.                     url_pattern._populate()\n\nFile \"/usr/local/lib/python3.7/site-packages/django/urls/resolvers.py\" in _populate\n  446.             for url_pattern in reversed(self.url_patterns):\n\nException Type: TypeError at /admin/\nException Value: 'set' object is not reversible\n</code></pre>\n\n<p>I am on a Mac with Python 3 installed. I looked up all other similar questions for this error and none of the answers there heleped me, as my code seems to be correct</p>\n\n<p>Here is my urls.py code </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from django.contrib import admin\nfrom django.urls import include, path\n\nurlpatterns = [\n  path('admin/', admin.site.urls),\n  path('polls/', include('polls.urls'))\n]\n</code></pre>\n\n<p>And here is the app list from settings.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>INSTALLED_APPS = [\n    'polls.apps.PollsConfig',\n    'django.contrib.admin',\n    'django.contrib.auth',\n    'django.contrib.contenttypes',\n    'django.contrib.sessions',\n    'django.contrib.messages',\n    'django.contrib.staticfiles',\n]\n</code></pre>\n\n<p>Do you know what could be wrong here?</p>\n"}, {"tags": ["python", "excel", "sqlite", "flask", "typeerror"], "comments": [{"owner": {"reputation": 581, "user_id": 3565744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CyVT.jpg?s=128&g=1", "display_name": "waynetech", "link": "https://stackoverflow.com/users/3565744/waynetech"}, "edited": false, "score": 0, "creation_date": 1565240097, "post_id": 57403483, "comment_id": 101291886, "body": "<code>return excel.make_response_from_query_sets(query_sets, column_names, &quot;xls&quot;, file_name=&quot;export_data&quot;)</code> without <code>render_template(&#39;updatePrint.html&#39;)</code>"}, {"owner": {"reputation": 11, "user_id": 11898950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a1362d8c8c1768018784e7be06c7ecf?s=128&d=identicon&r=PG&f=1", "display_name": "wtfreely", "link": "https://stackoverflow.com/users/11898950/wtfreely"}, "reply_to_user": {"reputation": 581, "user_id": 3565744, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CyVT.jpg?s=128&g=1", "display_name": "waynetech", "link": "https://stackoverflow.com/users/3565744/waynetech"}, "edited": false, "score": 1, "creation_date": 1565281519, "post_id": 57403483, "comment_id": 101313768, "body": "Hi folks, the solution to this issue was to provide <code>excel.init_excel(app)</code> at the beginning of this app.  Woops."}], "answers": [{"tags": [], "owner": {"reputation": 51795, "user_id": 495455, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/b0VBC.jpg?s=128&g=1", "display_name": "Jeremy Thompson", "link": "https://stackoverflow.com/users/495455/jeremy-thompson"}, "is_accepted": false, "score": 0, "last_activity_date": 1578533588, "creation_date": 1578533588, "answer_id": 59656052, "question_id": 57403483, "link": "https://stackoverflow.com/questions/57403483/excel-make-response-from-query-sets-returning-typeerror-none/59656052#59656052", "title": "excel.make_response_from_query_sets returning TypeError None", "body": "<p>Works by initialising it at the top:</p>\n\n<pre><code>app = Flask(__name__)\nexcel.init_excel(app)\n</code></pre>\n\n<p>Doesn't work inside a function with the error stated:</p>\n\n<pre><code>@app.route('/export', methods=['GET'])\ndef Export():\n    excel.init_excel(app)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11898950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a1362d8c8c1768018784e7be06c7ecf?s=128&d=identicon&r=PG&f=1", "display_name": "wtfreely", "link": "https://stackoverflow.com/users/11898950/wtfreely"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1578533588, "creation_date": 1565221321, "question_id": 57403483, "link": "https://stackoverflow.com/questions/57403483/excel-make-response-from-query-sets-returning-typeerror-none", "title": "excel.make_response_from_query_sets returning TypeError None", "body": "<p>I'm attempting to have my flask project export a simple SQLite database query into an XLS excel file.  The rest of the script works quite handily and without issue, but I seem to be misunderstanding the parameters for this.</p>\n\n<p>I've closely examined the flask-excel documentation and believe that my implementation should be working fine, however, execution of the code provides a TypeError.</p>\n\n<p>Full disclosure, this is my second day working with Python and I am a bit beyond my capabilities it seems!</p>\n\n<p>The function in question is as follows:</p>\n\n<pre><code>@app.route(\"/updatePrint\", methods=['GET'])\ndef updatePrint():\n    query_sets = session.query(Products).all()\n    column_names = ['title', 'type', 'components', 'region', 'producer', 'blurb', 'desc1', 'desc2', 'pairing','pretax','posttax']\n    return excel.make_response_from_query_sets(query_sets, column_names, \"xls\", file_name=\"export_data\") , render_template('updatePrint.html')\n</code></pre>\n\n<p>As mentioned, the script returns the following type error</p>\n\n<pre><code>TypeError: The view function did not return a valid response. The function either returned None or ended without a return statement.\n</code></pre>\n\n<p>I am not sure why this is seemingly returning nothing (I assume that's what's happening).  I'm happy to provide further code if necessary.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "regex", "iptables", "python-iptables"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1565221548, "post_id": 57403459, "comment_id": 101288464, "body": "Please include the expected output."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 8234880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f59eb68f7bd98b4930d1671e87554bd?s=128&d=identicon&r=PG&f=1", "display_name": "dmrpy", "link": "https://stackoverflow.com/users/8234880/dmrpy"}, "edited": false, "score": 0, "creation_date": 1565271027, "post_id": 57403621, "comment_id": 101307669, "body": "hi this works fine, [[&#39;Aug 13 17:16:33 app-srv01 kernel: newConnection -&#39;], [&#39;IN&#39;, &#39;eth0&#39;], [&#39;OUT&#39;, &#39;&#39;], [&#39;MAC&#39;, &#39;56:00:01:a1:5c:b7:fe:00:01:a1:5c:b7:08:00&#39;], [&#39;SRC&#39;, &#39;91.103.125.80&#39;], [&#39;DST&#39;, &#39;45.33.223.166&#39;], [&#39;LEN&#39;, &#39;52&#39;], [&#39;TOS&#39;, &#39;0x00&#39;], [&#39;PREC&#39;, &#39;0x00&#39;], [&#39;TTL&#39;, &#39;113&#39;], [&#39;ID&#39;, &#39;21200 DF&#39;], [&#39;PROTO&#39;, &#39;TCP&#39;], [&#39;SPT&#39;, &#39;55743&#39;], [&#39;DPT&#39;, &#39;445&#39;], [&#39;WINDOW&#39;, &#39;8192&#39;], [&#39;RES&#39;, &#39;0x00 SYN&#39;], [&#39;URGP&#39;, &#39;0&#39;]].. But is possible separe date &quot;Aug 13 17:16:33&quot; of  app-srv01 kernel: newConnection - ? Because date is one key for me. the others params like app-srv01 and newconnection not is most important"}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "reply_to_user": {"reputation": 49, "user_id": 8234880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f59eb68f7bd98b4930d1671e87554bd?s=128&d=identicon&r=PG&f=1", "display_name": "dmrpy", "link": "https://stackoverflow.com/users/8234880/dmrpy"}, "edited": false, "score": 0, "creation_date": 1565280727, "post_id": 57403621, "comment_id": 101313392, "body": "@dmrpy: yes do it &quot;by hand&quot; in a second time."}], "tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": 0, "last_activity_date": 1565223761, "last_edit_date": 1565223761, "creation_date": 1565222681, "answer_id": 57403621, "question_id": 57403459, "link": "https://stackoverflow.com/questions/57403459/regex-code-to-parse-full-iptables-log-python/57403621#57403621", "title": "Regex code to parse full Iptables log Python", "body": "<p>You can do that with re.split, using a space before a <em>abc=def</em> as separator, then you split a second time each item on the equal sign:</p>\n\n<pre><code>[x.split('=') for x in re.split(r' (?=\\S+=)', s)]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 8234880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f59eb68f7bd98b4930d1671e87554bd?s=128&d=identicon&r=PG&f=1", "display_name": "dmrpy", "link": "https://stackoverflow.com/users/8234880/dmrpy"}, "edited": false, "score": 0, "creation_date": 1565271147, "post_id": 57406686, "comment_id": 101307759, "body": "hi, is possible separate date too from the other params, because date is key for me."}, {"owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "reply_to_user": {"reputation": 49, "user_id": 8234880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f59eb68f7bd98b4930d1671e87554bd?s=128&d=identicon&r=PG&f=1", "display_name": "dmrpy", "link": "https://stackoverflow.com/users/8234880/dmrpy"}, "edited": false, "score": 0, "creation_date": 1565271257, "post_id": 57406686, "comment_id": 101307843, "body": "@dmrpy Do you want to exclude the date from <code>Aug 13 17:16:33 app-srv01 kernel: newConnection - IN</code>? What should/does it look like?"}, {"owner": {"reputation": 49, "user_id": 8234880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f59eb68f7bd98b4930d1671e87554bd?s=128&d=identicon&r=PG&f=1", "display_name": "dmrpy", "link": "https://stackoverflow.com/users/8234880/dmrpy"}, "edited": false, "score": 0, "creation_date": 1565271578, "post_id": 57406686, "comment_id": 101308050, "body": "Not, i need the data separated into one group, because the date is key for me. I put an expected output."}], "tags": [], "owner": {"reputation": 91458, "user_id": 5424988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b4f91c20dcd87cbd58dd351455198c?s=128&d=identicon&r=PG&f=1", "display_name": "The fourth bird", "link": "https://stackoverflow.com/users/5424988/the-fourth-bird"}, "is_accepted": true, "score": 0, "last_activity_date": 1565300696, "last_edit_date": 1565300696, "creation_date": 1565246915, "answer_id": 57406686, "question_id": 57403459, "link": "https://stackoverflow.com/questions/57403459/regex-code-to-parse-full-iptables-log-python/57406686#57406686", "title": "Regex code to parse full Iptables log Python", "body": "<p>If you want the date at the start (and the other 2 are not the most important as in the comments) and you want the matches from your current pattern, you might use an <a href=\"https://www.regular-expressions.info/alternation.html\" rel=\"nofollow noreferrer\">alternation</a>:</p>\n\n<pre><code>^([a-zA-Z]+ \\d{1,2} \\d{1,2}:\\d{1,2}:\\d{1,2})|([^ ]+)=([^ ]+)\n</code></pre>\n\n<ul>\n<li><code>^</code> Start of the string</li>\n<li><code>([a-zA-Z]+ \\d{1,2} \\d{1,2}:\\d{1,2}:\\d{1,2})</code> Capture group 1, match a \"date like\" pattern</li>\n<li><code>|</code> Or</li>\n<li><code>([^ ]+)=([^ ]+)</code> Your initial pattern capturing the values in group 2 and group 3</li>\n</ul>\n\n<p><a href=\"https://regex101.com/r/MywxGE/1\" rel=\"nofollow noreferrer\">Regex demo</a> | <a href=\"https://ideone.com/BTxSRr\" rel=\"nofollow noreferrer\">Python demo</a></p>\n\n<p>For example</p>\n\n<pre><code>import re\nregex = r\"^([a-zA-Z]+ \\d{1,2} \\d{1,2}:\\d{1,2}:\\d{1,2})|([^ ]+)=([^ ]+)\"     \ntest_str = \"Aug 13 17:16:33 app-srv01 kernel: newConnection - IN=eth0 OUT= MAC=56:00:01:a1:5c:b7:fe:00:01:a1:5c:b7:08:00 SRC=91.103.125.80 DST=45.33.223.166 LEN=52 TOS=0x00 PREC=0x00 TTL=113 ID=21200 DF PROTO=TCP SPT=55743 DPT=445 WINDOW=8192 RES=0x00 SYN URGP=0\"\n\nprint(list(map(lambda x: tuple(filter(None, x)), re.findall(regex, test_str))))\n</code></pre>\n\n<p>Result</p>\n\n<blockquote>\n  <p>[('Aug 13 17:16:33',), ('IN', 'eth0'), ('MAC',\n  '56:00:01:a1:5c:b7:fe:00:01:a1:5c:b7:08:00'), ('SRC',\n  '91.103.125.80'), ('DST', '45.33.223.166'), ('LEN', '52'), ('TOS',\n  '0x00'), ('PREC', '0x00'), ('TTL', '113'), ('ID', '21200'), ('PROTO',\n  'TCP'), ('SPT', '55743'), ('DPT', '445'), ('WINDOW', '8192'), ('RES',\n  '0x00'), ('URGP', '0')]</p>\n</blockquote>\n"}], "owner": {"reputation": 49, "user_id": 8234880, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f59eb68f7bd98b4930d1671e87554bd?s=128&d=identicon&r=PG&f=1", "display_name": "dmrpy", "link": "https://stackoverflow.com/users/8234880/dmrpy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 57406686, "answer_count": 2, "score": 1, "last_activity_date": 1565300696, "creation_date": 1565221180, "last_edit_date": 1565281562, "question_id": 57403459, "link": "https://stackoverflow.com/questions/57403459/regex-code-to-parse-full-iptables-log-python", "title": "Regex code to parse full Iptables log Python", "body": "<p>I have this string bellow on iptables logs, i want parse full content.\nMy actual regex parse 90% but i need the all content logs.</p>\n\n<p>My python regex:</p>\n\n<pre><code>regex = re.compile('([^ ]+)=([^ ]+)')\n</code></pre>\n\n<p>I need this parameters too:</p>\n\n<pre><code>Aug 13 17:16:33 app-srv01 kernel: newConnection -\n</code></pre>\n\n<p>Regex Result:</p>\n\n<pre><code>[('IN', 'eth0'), ('MAC', '56:00:01:a1:5c:b7:fe:00:01:a1:5c:b7:08:00'), ('SRC', '91.103.125.80'), ('DST', '45.33.223.166'), ('LEN', '52'), ('TOS', '0x00'), ('PREC', '0x00'), ('TTL', '113'), ('ID', '21200'), ('PROTO', 'TCP'), ('SPT', '55743'), ('DPT', '445'), ('WINDOW', '8192'), ('RES', '0x00'), ('URGP', '0')] \n</code></pre>\n\n<p>Log String:</p>\n\n<blockquote>\n  <p>Aug 13 17:16:33 app-srv01 kernel: newConnection - IN=eth0 OUT=\n  MAC=56:00:01:a1:5c:b7:fe:00:01:a1:5c:b7:08:00 SRC=91.103.125.80\n  DST=45.33.223.166 LEN=52 TOS=0x00 PREC=0x00 TTL=113 ID=21200 DF\n  PROTO=TCP SPT=55743 DPT=445 WINDOW=8192 RES=0x00 SYN URGP=0</p>\n</blockquote>\n\n<p>Output expected:</p>\n\n<pre><code>[('Aug 13 17:16:33'), ('app-srv01 kernel:'), ('newConnection -'), \n('IN', 'eth0'), ('MAC', '56:00:01:a1:5c:b7:fe:00:01:a1:5c:b7:08:00'), ('SRC', \n'91.103.125.80'), ('DST', '45.33.223.166'), ('LEN', '52'), ('TOS', '0x00'), ('PREC', \n'0x00'), ('TTL', '113'), ('ID', '21200'), ('PROTO', 'TCP'), ('SPT', '55743'), ('DPT', \n'445'), ('WINDOW', '8192'), ('RES', '0x00'), ('URGP', '0')] \n</code></pre>\n\n<p>Some can help. I'm using python3 Thanks</p>\n"}, {"tags": ["python", "dictionary", "get"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1565221379, "post_id": 57403456, "comment_id": 101288428, "body": "have you tried <code>print(userInput)</code>? or better yet, <code>print(repr(userInput))</code>? I suspect there is trailing whitespace you aren&#39;t handling correctly."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1565221487, "post_id": 57403456, "comment_id": 101288453, "body": "There is a trailing <code>\\n</code>."}, {"owner": {"reputation": 21, "user_id": 10743479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e995124f96b6d865a4937fda16ec4c26?s=128&d=identicon&r=PG&f=1", "display_name": "IDoNotKnowHowToProgram", "link": "https://stackoverflow.com/users/10743479/idonotknowhowtoprogram"}, "edited": false, "score": 0, "creation_date": 1565222522, "post_id": 57403456, "comment_id": 101288659, "body": "How can I handle the trailing \\n?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1565222771, "post_id": 57403456, "comment_id": 101288720, "body": "<code>text = text.rstrip(&#39;\\n&#39;)</code> to remove all <code>\\n</code> on the right side. Or if you always get text with <code>\\n</code> at the end <code>text = text[:-1]</code>"}, {"owner": {"reputation": 131, "user_id": 11893426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/071c6fbbba985a7ecce8474faa9d3055?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/11893426/andrew"}, "edited": false, "score": 0, "creation_date": 1565230801, "post_id": 57403456, "comment_id": 101290133, "body": "Note that the <code>.get</code> method already lets you specify a default value if the key you supplied is not in the dictionary.  So, for you case, you can use <code>print(dictionary.get(userInput, &quot;Word not in dictionary&quot;))</code> instead of your <code>if ... else ...</code> block."}, {"owner": {"reputation": 21, "user_id": 10743479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e995124f96b6d865a4937fda16ec4c26?s=128&d=identicon&r=PG&f=1", "display_name": "IDoNotKnowHowToProgram", "link": "https://stackoverflow.com/users/10743479/idonotknowhowtoprogram"}, "edited": false, "score": 0, "creation_date": 1565234601, "post_id": 57403456, "comment_id": 101290809, "body": "Thanks everyone! Got it to work; the newline was the issue."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 10743479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e995124f96b6d865a4937fda16ec4c26?s=128&d=identicon&r=PG&f=1", "display_name": "IDoNotKnowHowToProgram", "link": "https://stackoverflow.com/users/10743479/idonotknowhowtoprogram"}, "is_accepted": true, "score": 0, "last_activity_date": 1565234949, "creation_date": 1565234949, "answer_id": 57404801, "question_id": 57403456, "link": "https://stackoverflow.com/questions/57403456/python-3-dictionary-get-function-not-working-with-sys-stdin/57404801#57404801", "title": "Python 3 dictionary.get() function not working with sys.stdin", "body": "<p>A trailing '\\n' was the issue. <code>string = string.rstrip('\\n')</code> fixed this for me.</p>\n"}], "owner": {"reputation": 21, "user_id": 10743479, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e995124f96b6d865a4937fda16ec4c26?s=128&d=identicon&r=PG&f=1", "display_name": "IDoNotKnowHowToProgram", "link": "https://stackoverflow.com/users/10743479/idonotknowhowtoprogram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 57404801, "answer_count": 1, "score": 0, "last_activity_date": 1565234949, "creation_date": 1565221154, "question_id": 57403456, "link": "https://stackoverflow.com/questions/57403456/python-3-dictionary-get-function-not-working-with-sys-stdin", "title": "Python 3 dictionary.get() function not working with sys.stdin", "body": "<p>I am currently writing a dictionary program that allows the user to enter in two words: an English word and its foreign translation. Then, the user should be able to input a foreign word and retrieve the English word; however, I am required to use sys.stdin for the second half.</p>\n\n<pre><code>import sys\n\ndictionary = dict()\nuserInput = input()\nwhile userInput != \"\":\n    buf = userInput.split()\n    english = buf[0]\n    foreign = buf[1]\n    dictionary[foreign] = english\n    userInput = input()\n\nfor userInput in sys.stdin:\n    print(type(userInput))\n    if userInput in dictionary:\n        print(dictionary.get(userInput))\n    else:\n        print(\"Word not in dictionary.\")\n</code></pre>\n\n<p>When I use sys.stdin, the dictionary.get() function is not functioning properly. When I simply use the normal input() function instead of sys.stdin, the dictionary is able to function properly. Why is this and how can I get sys.stdin to properly work with the dictionary search?</p>\n\n<p>This code seems to work, but once again... it used input() instead of sys.stdin:</p>\n\n<pre><code>import sys\n\ndictionary = dict()\nuserInput = input()\nwhile userInput != \"\":\n    buf = userInput.split()\n\n    english = buf[0]\n    foreign = buf[1]\n\n    dictionary[foreign] = english\n    userInput = input()\n\nuserInput = input()\nwhile userInput != \"\":\n    if userInput in dictionary:\n        print(dictionary.get(userInput))\n    else:\n        print(\"Word not in dictionary\")\n\n    userInput = input()\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565221310, "post_id": 57403451, "comment_id": 101288413, "body": "Have you tried anything yet?"}, {"owner": {"reputation": 3457, "user_id": 2284490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba571b7d2f77a33c9b92af6c767677bb?s=128&d=identicon&r=PG", "display_name": "Cireo", "link": "https://stackoverflow.com/users/2284490/cireo"}, "edited": false, "score": 0, "creation_date": 1565221482, "post_id": 57403451, "comment_id": 101288452, "body": "<code>any(&#39;0&#39;&lt;=c&lt;=&#39;9&#39; for c in s)</code>"}, {"owner": {"reputation": 9307, "user_id": 705086, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/fbeee3d76a35f9de8847f36ee51c28a2?s=128&d=identicon&r=PG", "display_name": "Dima Tisnek", "link": "https://stackoverflow.com/users/705086/dima-tisnek"}, "edited": false, "score": 0, "creation_date": 1565241556, "post_id": 57403451, "comment_id": 101292267, "body": "<code>set(&quot;dfgsdh&quot;) &amp; set(string.digits)</code> or <code>re.match(&#39;[0-9]&#39;, input)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 446, "user_id": 11524813, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SLdyU8SbZMU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3ref3U-gZfn3pxcPa5XtOputeVj_mQ/mo/photo.jpg?sz=128", "display_name": "\u05d1\u05e0\u05d9\u05de\u05d9\u05df \u05db\u05d4\u05df", "link": "https://stackoverflow.com/users/11524813/%d7%91%d7%a0%d7%99%d7%9e%d7%99%d7%9f-%d7%9b%d7%94%d7%9f"}, "is_accepted": false, "score": -1, "last_activity_date": 1565221310, "creation_date": 1565221310, "answer_id": 57403481, "question_id": 57403451, "link": "https://stackoverflow.com/questions/57403451/iterate-through-string-of-characters-and-look-for-int/57403481#57403481", "title": "Iterate through string of characters and look for int?", "body": "<p>This will create a list of bool values for each character in the string. <code>isdigit</code> return <code>True</code> if the character is a digit, <code>False</code> otherwise. So if any of the bool values (or any the characters is a digit), it will return <code>True</code></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>has_digits = any(i.isdigit() for i in text)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 320, "user_id": 10729196, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/W7UtP.jpg?s=128&g=1", "display_name": "Andressa Cabistani", "link": "https://stackoverflow.com/users/10729196/andressa-cabistani"}, "is_accepted": true, "score": 0, "last_activity_date": 1565221864, "creation_date": 1565221864, "answer_id": 57403542, "question_id": 57403451, "link": "https://stackoverflow.com/questions/57403451/iterate-through-string-of-characters-and-look-for-int/57403542#57403542", "title": "Iterate through string of characters and look for int?", "body": "<p>You can write a function that returns True when find at least one digit using the <code>isdigit()</code> method. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def has_digit(str):\n    for letter in str:\n        if letter.isdigit():\n            return True\n    return False\n\nif __name__ == '__main__':\n    print(has_digit('abcdef'))\n    print(has_digit('abd5e'))\n\n</code></pre>\n\n<p>The output is:</p>\n\n<pre><code>False\nTrue\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11791503"}, "is_accepted": false, "score": 0, "last_activity_date": 1565222811, "creation_date": 1565222811, "answer_id": 57403635, "question_id": 57403451, "link": "https://stackoverflow.com/questions/57403451/iterate-through-string-of-characters-and-look-for-int/57403635#57403635", "title": "Iterate through string of characters and look for int?", "body": "<p>You can write a function or not as you like. You can also write a ready string or you can use <code>input</code> function:</p>\n\n<pre><code>x = 'Jack77'\n\nfor i in x:\n    if i.isdigit():\n        print(True)\n    else:\n        print(False)\n\n#==================\n\ndef checking_digits(x):\n    for i in x:\n        if i.isdigit():\n            return True\n    return False\nprint(checking_digits(x))\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 11843229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/453acf7742c44f33cbc40e1ee74de89a?s=128&d=identicon&r=PG&f=1", "display_name": "personX", "link": "https://stackoverflow.com/users/11843229/personx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1565249815, "accepted_answer_id": 57403542, "answer_count": 3, "score": -2, "last_activity_date": 1565222811, "creation_date": 1565221085, "question_id": 57403451, "link": "https://stackoverflow.com/questions/57403451/iterate-through-string-of-characters-and-look-for-int", "closed_reason": "Needs more focus", "title": "Iterate through string of characters and look for int?", "body": "<p>I need to iterate through a string with a mixture of letters and numbers. If it finds at least one number, it returns True, else, it returns false. How can I do this?</p>\n"}, {"tags": ["python", "function", "optimization", "solver"], "comments": [{"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565221407, "post_id": 57403441, "comment_id": 101288435, "body": "I suggest you to post your existing efforts so that we can comment on them."}, {"owner": {"reputation": 111, "user_id": 7329742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/372c44d722ca6a8f3f46c33425245739?s=128&d=identicon&r=PG&f=1", "display_name": "Roshan", "link": "https://stackoverflow.com/users/7329742/roshan"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565226200, "post_id": 57403441, "comment_id": 101289363, "body": "The things I have done are extremely self-explanatory. The things I face - when using nested loops there is a huge number of iterations which god knows when it&#39;ll complete and the second is when using solvers i don&#39;t know how to insert contraints and neither do I know all the parameters that I should include."}], "owner": {"reputation": 111, "user_id": 7329742, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/372c44d722ca6a8f3f46c33425245739?s=128&d=identicon&r=PG&f=1", "display_name": "Roshan", "link": "https://stackoverflow.com/users/7329742/roshan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565220989, "creation_date": 1565220989, "question_id": 57403441, "link": "https://stackoverflow.com/questions/57403441/roots-of-a-function-with-5-variables-by-code", "title": "Roots of a function with 5 variables by code", "body": "<p><strong>Function</strong> : (((a+b-c+10-d)/2)-((3/2)<em>((((a-c)</em>(a-c))/(a+e-c))+(((b-d)*(b-d))/(b+10-e-d)))))<br>\n<strong>Objective</strong> : Function = 0, find roots.<br>\n<strong>Constraints</strong> :   b &lt; a , d &lt; c , e &lt; c , b &lt; e , d > a<br>\n<strong>Bounds</strong> :  </p>\n\n<pre><code>0 &lt; b &lt; 10  \n0 &lt; c &lt; 10  \n0 &lt; d &lt; 10  \n0 &lt; e &lt; 10  \n</code></pre>\n\n<p>I initially coded 5 nested loops in python iterating from 0 to 10 with 0.1 steps but I couldn't see the program finishing any time after waiting 5 hours, I then tried using sympy's solve but only got equations consisting of symbols which was of no use to me. I have looked at scipy's fsolve but it absolutely makes no sense to me a there are so many options. The two main problems I face are : the time constraints/problem size and that most solvers don't allow you to enter constraints or boundaries.   </p>\n\n<p>I would really appreciate any help in solving this.</p>\n"}, {"tags": ["python", "machine-learning"], "comments": [{"owner": {"reputation": 36576, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1565221053, "post_id": 57403430, "comment_id": 101288360, "body": "But don&#39;t you already <i>have</i> the complete story? Isn&#39;t it just the last string in the array?"}, {"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "reply_to_user": {"reputation": 36576, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1565221083, "post_id": 57403430, "comment_id": 101288369, "body": "@ObsidianAge No since, some strings have extra information"}, {"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "reply_to_user": {"reputation": 36576, "user_id": 2341603, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZTHIr.jpg?s=128&g=1", "display_name": "Obsidian Age", "link": "https://stackoverflow.com/users/2341603/obsidian-age"}, "edited": false, "score": 0, "creation_date": 1565221110, "post_id": 57403430, "comment_id": 101288374, "body": "My idea is to get the most appearing parts, the extra information won&#39;t be common"}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565221603, "post_id": 57403430, "comment_id": 101288477, "body": "I think you have to think more on the problem description. How do you define &quot;extra information&quot;? If they all start at the same place, will the longest one always have some extra information? What about the second longest?"}, {"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565221690, "post_id": 57403430, "comment_id": 101288495, "body": "@Selcuk I have 40 strings, like I said in the description, some are longer then the needed string and some are shorter. The longer ones have gibberish at the end, and each longer one has different gibberish (if they had the same gibberish it would be part of the story)"}, {"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565221719, "post_id": 57403430, "comment_id": 101288499, "body": "@Selcuk It won&#39;t be the second longest either, i hope what i said above makes sense ^"}, {"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565221829, "post_id": 57403430, "comment_id": 101288523, "body": "@selcuk i have updated the description to match your question."}], "answers": [{"comments": [{"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "edited": false, "score": 0, "creation_date": 1565222872, "post_id": 57403611, "comment_id": 101288743, "body": "Thanks! I&#39;m going to test it on my data I&#39;ll let you know the results in a few min"}, {"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "edited": false, "score": 0, "creation_date": 1565223288, "post_id": 57403611, "comment_id": 101288833, "body": "Thank you so much, it worked with 100% accuracy on my data :)"}, {"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "edited": false, "score": 0, "creation_date": 1565225403, "post_id": 57403611, "comment_id": 101289213, "body": "your new answer gives an empty string with my data.. I&#39;ve used it in the same way. I think its because my data also has some extra gibberish strings that have nothing to do with anything in it"}, {"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "edited": false, "score": 0, "creation_date": 1565225475, "post_id": 57403611, "comment_id": 101289221, "body": "Keep this answer, as it answers the question the best, but i&#39;ll use your old one for my purposes"}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "reply_to_user": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "edited": false, "score": 0, "creation_date": 1565225761, "post_id": 57403611, "comment_id": 101289282, "body": "Hmm, I believe that could only happen if you have a very long string consisting of only whitespace. Is that the case?"}, {"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "edited": false, "score": 1, "creation_date": 1565225896, "post_id": 57403611, "comment_id": 101289305, "body": "Nope.. I have 40 normal strings, and then 3 strings that are 10 words long that are just random"}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "reply_to_user": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "edited": false, "score": 1, "creation_date": 1565225974, "post_id": 57403611, "comment_id": 101289325, "body": "Oh, but in this case the code works as expected. Your strings have no common start words, so the result is an empty string. My original code must&#39;ve worked by accident."}, {"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "edited": false, "score": 0, "creation_date": 1565226035, "post_id": 57403611, "comment_id": 101289332, "body": "Running the older one on those strings did work, interesting I guess"}, {"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "edited": false, "score": 0, "creation_date": 1565226100, "post_id": 57403611, "comment_id": 101289344, "body": "I&#39;ll try it on another one of my data sets."}], "tags": [], "owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "is_accepted": true, "score": 1, "last_activity_date": 1565224361, "last_edit_date": 1565224361, "creation_date": 1565222586, "answer_id": 57403611, "question_id": 57403430, "link": "https://stackoverflow.com/questions/57403430/how-to-find-complete-string-given-multiple-substrings-of-that-string/57403611#57403611", "title": "How to find complete string given multiple substrings of that string", "body": "<p>This should do it (sentences shortened for readability):</p>\n\n<pre><code>stories = [\n    \"Lorem ipsum\",\n    \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. This is some extra text i don't care about\",\n    \"Lorem ipsum dolor sit amet, consectetur adipiscing elit. A different gibberish this time.\",\n    \"Lorem ipsum dolor sit amet, consectetur\",\n    \"Lorem ipsum dolor sit amet, consectetur adipiscing elit.\", # This is the full story\n]\n\nstories.sort(key=lambda s: len(s))\n\nstory = \"\"\nfor i, short_story in enumerate(stories[:-1]):\n    for long_story in stories[i+1:]:\n        if not long_story.startswith(short_story):\n            break\n    else:\n        story = short_story\n\nprint(story)\n</code></pre>\n\n<p>output:</p>\n\n<blockquote>\n  <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>\n</blockquote>\n\n<p>Note that this code assumes that there is at least one story with gibberish at the end, otherwise it wouldn't work for the sample input in your question.</p>\n"}, {"comments": [{"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "edited": false, "score": 0, "creation_date": 1565223504, "post_id": 57403686, "comment_id": 101288871, "body": "I upvoted this answer since it is a short way to achieve this, however this only got 160/239 words on my data. This is a very good solution, but it is probably related to my data that it isn&#39;t working. I have tried this with other samples and it works well"}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 1, "creation_date": 1565223975, "post_id": 57403686, "comment_id": 101288962, "body": "This is a cool way of doing it, but I guess it won&#39;t work if some gibberish parts start with the same words."}, {"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565224019, "post_id": 57403686, "comment_id": 101288967, "body": "@Selcuk I think that&#39;s why it didn&#39;t work as well on my data, looks like a few of the gibberish do start with the same words"}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565224259, "post_id": 57403686, "comment_id": 101289009, "body": "Yes, test with this input, for example: <code>strings = [&quot;Full story&quot;, &quot;Full story foo bar&quot;, &quot;Full story foo baz&quot;, &quot;Full story bar&quot;]</code>. My answer had an issue with this example too, by the way (for a different reason), which should&#39;ve been fixed now."}, {"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565225053, "post_id": 57403686, "comment_id": 101289148, "body": "@Selcuk Did you mean to put the else with the if?"}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "reply_to_user": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "edited": false, "score": 0, "creation_date": 1565225079, "post_id": 57403686, "comment_id": 101289150, "body": "@SheshankS. No, it&#39;s a <code>for..else</code> block (it&#39;s a weird Python thing)."}, {"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 1, "creation_date": 1565225133, "post_id": 57403686, "comment_id": 101289157, "body": "@Selcuk Oh interesting, I&#39;ve never seen that before, I&#39;m looking up how that works now"}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "reply_to_user": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565229905, "post_id": 57403686, "comment_id": 101289963, "body": "@selcuk; @shesank-s please change the following condition from the question: &quot;Each one of the longer ones extra information is unique (if it wasn&#39;t unique then it would be counted as part of the story)&quot;."}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565230040, "post_id": 57403686, "comment_id": 101289997, "body": "@ipaleka I would still call them unique if they start with the same word(s) but the rest is different."}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1565230119, "post_id": 57403686, "comment_id": 101290014, "body": "That makes them by definition the parts of the story."}, {"owner": {"reputation": 45099, "user_id": 2011147, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FGRgf.jpg?s=128&g=1", "display_name": "Selcuk", "link": "https://stackoverflow.com/users/2011147/selcuk"}, "edited": false, "score": 0, "creation_date": 1565230240, "post_id": 57403686, "comment_id": 101290040, "body": "@ipaleka Not necessarily, if there is a third story that has a different (completely unique) gibberish text."}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 1, "creation_date": 1565230655, "post_id": 57403686, "comment_id": 101290103, "body": "That what you are saying is common sense, but even as such it doesn&#39;t pass given condition. I&#39;m not trying to convince you that my answer is good, the only thing I want is that the condition changes and so enables passing of your common sense approach."}], "tags": [], "owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "is_accepted": false, "score": 0, "last_activity_date": 1565223695, "last_edit_date": 1565223695, "creation_date": 1565223296, "answer_id": 57403686, "question_id": 57403430, "link": "https://stackoverflow.com/questions/57403430/how-to-find-complete-string-given-multiple-substrings-of-that-string/57403686#57403686", "title": "How to find complete string given multiple substrings of that string", "body": "<p>Sort them by ascending  size and do:</p>\n\n<pre><code>diff = strings[-1]\nfor part in strings[:-1]:\n    diff = diff.lstrip(part)\nprint(strings[-1].rstrip(diff))\n</code></pre>\n"}], "owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 1, "accepted_answer_id": 57403611, "answer_count": 2, "score": 2, "last_activity_date": 1565224361, "creation_date": 1565220856, "last_edit_date": 1565221806, "question_id": 57403430, "link": "https://stackoverflow.com/questions/57403430/how-to-find-complete-string-given-multiple-substrings-of-that-string", "title": "How to find complete string given multiple substrings of that string", "body": "<p>I have a list of substrings of a story. They all start at the same place, but end at different points. This is my example input:</p>\n\n<pre><code>[\n\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud\", \n\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu\",\n\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\", \n\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. This is some extra text i don't care about\"\n]\n</code></pre>\n\n<p>It is like that except I have around 40 of them. My goal is to use machine learning and try and come up with one string that has the entire story, in this case this:</p>\n\n<pre><code>\"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.\"\n</code></pre>\n\n<p>It doesn't need to be exact, I just need a way to extract it with the best accuracy.</p>\n\n<p>I have tried just finding the longest substrings for each one of them, and trying to piece together those, but it wasn't successful. I need an algorithm of some sorts that will try and find what its guess of the story is.</p>\n\n<p>I cannot just use the last string, since some strings have extra information in it as well. </p>\n\n<p>Of the 40 strings I have, some are longer than the needed story and some are shorter. The shorter ones start from the beginning and end in the middle of the story. The longer ones start from the beginning, have the full story, and then at the end have other extra information that isn't needed. Each one of the longer ones extra information is unique (if it wasn't unique then it would be counted as part of the story)</p>\n"}, {"tags": ["python", "json", "dictionary", "indentation"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 3, "creation_date": 1565221146, "post_id": 57403424, "comment_id": 101288378, "body": "it is not correct JSON data. It is three JSON data in one file. Correctly it should be list with directories separated by comma - [ {...}, {...}, {...} ], and indent-formatting has nothing to do with your problem."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4443129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82cba21cfd8f7d86302aca270296225c?s=128&d=identicon&r=PG&f=1", "display_name": "konstantin", "link": "https://stackoverflow.com/users/4443129/konstantin"}, "edited": false, "score": 0, "creation_date": 1565293083, "post_id": 57403458, "comment_id": 101318606, "body": "thank you. yes - ultimately this was a problem with my storing of json in the first place and was much easier resolved there by putting all incoming dictionaries in an array to maintain the structure you&#39;ve described."}, {"owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "reply_to_user": {"reputation": 3, "user_id": 4443129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82cba21cfd8f7d86302aca270296225c?s=128&d=identicon&r=PG&f=1", "display_name": "konstantin", "link": "https://stackoverflow.com/users/4443129/konstantin"}, "edited": false, "score": 0, "creation_date": 1565321617, "post_id": 57403458, "comment_id": 101325226, "body": "@konstantin Your welcome! If it helped, please accept it by pressing the green check mark to the left of the answer"}], "tags": [], "owner": {"reputation": 2382, "user_id": 9414889, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7r4JaWADqA/AAAAAAAAAAI/AAAAAAAAFYw/DV7r38djnk4/photo.jpg?sz=128", "display_name": "Sheshank S.", "link": "https://stackoverflow.com/users/9414889/sheshank-s"}, "is_accepted": true, "score": 3, "last_activity_date": 1565221179, "creation_date": 1565221179, "answer_id": 57403458, "question_id": 57403424, "link": "https://stackoverflow.com/questions/57403424/how-to-read-an-indent-formatted-json-into-a-dictionary/57403458#57403458", "title": "how to read an indent-formatted json into a dictionary", "body": "<p>Say you have the contents of the file in as the variable <code>contents</code>. You should be able to convert it into a json decodable way:</p>\n\n<pre><code>contents = \"[\" + contents.replace(\"}{\", \"},{\") + \"]\"\n</code></pre>\n\n<p>and then do a <code>json.load</code>. Your error is happening because there isn't a comma in between each of the array elements, and there isn't brackets around the array. The indent formatting has nothing to do with it; <code>json.load</code> works with indents.</p>\n"}], "owner": {"reputation": 3, "user_id": 4443129, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82cba21cfd8f7d86302aca270296225c?s=128&d=identicon&r=PG&f=1", "display_name": "konstantin", "link": "https://stackoverflow.com/users/4443129/konstantin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 57403458, "answer_count": 1, "score": 0, "last_activity_date": 1565221179, "creation_date": 1565220806, "question_id": 57403424, "link": "https://stackoverflow.com/questions/57403424/how-to-read-an-indent-formatted-json-into-a-dictionary", "title": "how to read an indent-formatted json into a dictionary", "body": "<p>i'm trying to read a json file that's formatted in a human-readable way, with indentations and line splits. Something like this:</p>\n\n<pre><code>{\n    \"a\":1, \n    \"b\":2, \n    \"c\":3\n}{\n    \"d\":4, \n    \"e\":5, \n    \"f\":6\n}{\n    \"g\":7, \n    \"h\":8, \n    \"i\":9\n}\n</code></pre>\n\n<p>Going the standard way of</p>\n\n<p><code>json.load(file)</code></p>\n\n<p>results in </p>\n\n<p><code>JSONDecodeError: Extra data error</code></p>\n\n<p>Could someone please suggest a way to read this without reformatting the original file?</p>\n"}, {"tags": ["python", "loops"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565220861, "post_id": 57403414, "comment_id": 101288318, "body": "instead of <code>for i in range(0,1):</code> (which is useless) use <code>while True:</code> and it will repeat it again and again. To exit this endless-loop use <code>break</code>. Now I see that other things you would have to also put inside this loop."}, {"owner": {"reputation": 614, "user_id": 3526083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62ccf9e14a0738d582cbecc2983d48be?s=128&d=identicon&r=PG&f=1", "display_name": "Nath", "link": "https://stackoverflow.com/users/3526083/nath"}, "edited": false, "score": 0, "creation_date": 1565220886, "post_id": 57403414, "comment_id": 101288323, "body": "Whats the issue with putting the whole thing in a big <code>while True:</code>  loop?"}], "owner": {"reputation": 13, "user_id": 11752124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c444edc7aa8023834f521ae153037ac6?s=128&d=identicon&r=PG&f=1", "display_name": "Learningcoding13", "link": "https://stackoverflow.com/users/11752124/learningcoding13"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565220715, "creation_date": 1565220715, "question_id": 57403414, "link": "https://stackoverflow.com/questions/57403414/how-to-continue-running-a-loop-in-python", "title": "How to continue running a loop in Python", "body": "<p>I am trying to create a phone book and I have everything except I need to run the entire code over and over instead an individual if statement. I am not sure how to continue any advice?</p>\n\n<p>I have used a while loop.</p>\n\n<pre><code> #Intro\n print(\"Address book to store friends contact\")\n print(\"-\" * 50)\n print(\"-\" * 50)\n\n #Display of options\n print(\"Select an option: \")\n print(\"1-Add/Update contact\")\n print(\"2- Display all contacts\")\n print(\"3- Search\")\n print(\"4- Delete contact\")\n print(\"5- Quit\")\n\n #Selection\n option = input(\"Select which one you would like to choose. Ex. Select an \n option. Type here:  \")\n\n #Map\n contacts = {}\n\n #Main program\n for i in range(0,1):\n     if option == \"Add/Update contact\":\n         person_added = input(\"Who would you like to be updated or added\")\n         next_question = input(\"What is there contact information\")\n     #The code below will add the person to the list or update them\n         contacts [person_added] = next_question\n\n     elif option == \"Display all contacts\":\n         print(contacts)\n\n     elif option == \"Search\":\n         search_question = input(\"Who are you looking for: \")\n         for search in contacts.items():\n             if search == search_question:\n                 print(\"I found\" + search)\n             else:\n                 print(\"Contact not found\")\n\n     elif option == \"Delete contact\":\n         person_deleted = input(\"Who would you like to be deleted \")\n         del(contacts[person_deleted])\n\n     else:\n         print(\"Thank You! Goodbye\")\n</code></pre>\n"}, {"tags": ["python", "django", "django-polymorphic"], "answers": [{"tags": [], "owner": {"reputation": 3963, "user_id": 1189656, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/faf01748088cd4ae4c46fc0ce6bffcee?s=128&d=identicon&r=PG", "display_name": "ikkuh", "link": "https://stackoverflow.com/users/1189656/ikkuh"}, "is_accepted": false, "score": 0, "last_activity_date": 1565256930, "last_edit_date": 1565256930, "creation_date": 1565256379, "answer_id": 57409324, "question_id": 57403350, "link": "https://stackoverflow.com/questions/57403350/how-do-i-retrieve-a-field-from-a-many-to-many-table/57409324#57409324", "title": "How do I retrieve a field from a Many-To-Many table?", "body": "<blockquote>\n  <p>I've tried using: <code>toy.parts.all().first().part_no</code></p>\n</blockquote>\n\n<p>The <code>part_no</code> field is declared on the model <code>ToyParts</code>. You therefore need to get an instance of <code>ToyParts</code> to access this field. Assuming you have a <code>Toy</code> instance you can use the reverse relation to <code>ToyParts</code>, which defaults to <code>toyparts_set</code>, as follows:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>toy.toyparts_set.first().part_no\n</code></pre>\n\n<blockquote>\n  <p>How would I be able to get <code>part_no</code> without querying ToyParts directly?</p>\n</blockquote>\n\n<p>You can't. If you want to reduce the number of queries you can use <code>select_related</code>:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for tp in toy.toyparts_set.select_related('part').all():\n    print(tp.part_no, tp.part.id)\n</code></pre>\n\n<p>In this example <code>tp.part</code> doesn't require an extra query as the part instance is already fetched by <code>select_related</code>.</p>\n"}], "owner": {"reputation": 108, "user_id": 9651468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c800d981897a23c06f902302bf025956?s=128&d=identicon&r=PG&f=1", "display_name": "Mikko", "link": "https://stackoverflow.com/users/9651468/mikko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565256930, "creation_date": 1565220178, "last_edit_date": 1565256901, "question_id": 57403350, "link": "https://stackoverflow.com/questions/57403350/how-do-i-retrieve-a-field-from-a-many-to-many-table", "title": "How do I retrieve a field from a Many-To-Many table?", "body": "<p>I need to retrieve a value from a Many-To-Many query. Let's say I have 3 models: Toy, Part, and ToyParts</p>\n\n<p>ToyParts has a field called \"part_no\". I need to be able to get the value of this.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class Toy(models.Model):\n    parts = models.ManyToManyField(Part, through=\"ToyParts\")\n\nclass Part(models.Model):\n    pass\n\nclass ToyParts(models.Model):\n    toy = models.ForeignKey(Toy, ...)\n    part = models.ForeignKey(Part, ...)\n    part_no = models.CharField(...)\n</code></pre>\n\n<p>I've tried using:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>toy.parts.all().first().part_no\n</code></pre>\n\n<p>which obviously doesn't work as Part does not have a field called \"part_no\"</p>\n\n<p>I've also tried just simply using:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>ToyParts.objects.filter(toy=..., part=...)\n</code></pre>\n\n<p>but that adds additional queries.</p>\n\n<p>How would I be able to get <code>part_no</code> without querying ToyParts directly?</p>\n"}, {"tags": ["python", "command-line", "subprocess"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565220393, "post_id": 57403340, "comment_id": 101288235, "body": "did you try to run <code>&quot;cmd.exe dir&quot;</code> in command line to see how it works ? You can also check <code>&quot;cmd.exe --help&quot;</code> - probably it should show what options you can use with <code>&quot;cmd.exe&quot;</code>"}, {"owner": {"reputation": 21, "user_id": 11870288, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-s76Vdftaf90/AAAAAAAAAAI/AAAAAAAACRE/-tyXKw1RT8k/photo.jpg?sz=128", "display_name": "Zane Benson", "link": "https://stackoverflow.com/users/11870288/zane-benson"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565221503, "post_id": 57403340, "comment_id": 101288457, "body": "&quot;FileNotFoundError: [WinError 2] The system cannot find the file specified&quot; was the error I received when I tried that."}], "answers": [{"tags": [], "owner": {"reputation": 778, "user_id": 10833207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9gsE.png?s=128&g=1", "display_name": "Saritus", "link": "https://stackoverflow.com/users/10833207/saritus"}, "is_accepted": false, "score": 2, "last_activity_date": 1565221488, "creation_date": 1565221488, "answer_id": 57403506, "question_id": 57403340, "link": "https://stackoverflow.com/questions/57403340/program-to-open-command-prompt/57403506#57403506", "title": "Program to open command prompt", "body": "<p>Instead of explicitly using <code>cmd.exe</code> inside of Popen, you could use <code>shell=True</code>, which basically does the same (and is way better considering you might want to execute your script on different operating systems).</p>\n\n<p>If you want to get the results of your executed command, you can redirect the output with the <code>stdout</code> and <code>stderr</code> parameter to <code>subprocess.PIPE</code>, which than can be grabbed with <code>p.stdout.readlines()</code>.</p>\n\n<p>So your required solution would be</p>\n\n<pre><code>import subprocess\n\np = subprocess.Popen('dir', shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)\nfor line in p.stdout.readlines():\n    print(line)\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11870288, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-s76Vdftaf90/AAAAAAAAAAI/AAAAAAAACRE/-tyXKw1RT8k/photo.jpg?sz=128", "display_name": "Zane Benson", "link": "https://stackoverflow.com/users/11870288/zane-benson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565221488, "creation_date": 1565220079, "question_id": 57403340, "link": "https://stackoverflow.com/questions/57403340/program-to-open-command-prompt", "title": "Program to open command prompt", "body": "<p>I'm attempting to write a python script that will open the command prompt and change directories to a git initialized folder and return the git status. For right now I'd like help with how to just show the current directories so I can try and work through the solution myself. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import subprocess\n\np = subprocess.Popen(['cmd.exe','dir'])\n\n</code></pre>\n\n<p>I expected this to show me my current directories but it just returns what I normally see when  I open the command prompt. What would be the proper way to do this and pass on multiple commands?</p>\n"}, {"tags": ["python", "python-3.x", "firebase", "firebase-cloud-messaging"], "owner": {"reputation": 163, "user_id": 5863087, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-OU_PHD07i8s/AAAAAAAAAAI/AAAAAAABJTo/1tyRwVXRv4E/photo.jpg?sz=128", "display_name": "Devin Matt&#233;", "link": "https://stackoverflow.com/users/5863087/devin-matt%c3%a9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1565274434, "creation_date": 1565220030, "last_edit_date": 1565274434, "question_id": 57403332, "link": "https://stackoverflow.com/questions/57403332/send-a-notification-from-python-to-firebase-with-token", "title": "Send a Notification from Python to Firebase with Token", "body": "<p>I collected a token from the Firebase Javascript SDK and pass it back to my backend. I then use the below function to attempt to send a notification</p>\n\n<p>I have authenticated properly and I am getting message ids when I print out the response but have never received a notification</p>\n\n<p>I've tried to follow the documentation on firebase's site for <a href=\"https://firebase.google.com/docs/cloud-messaging/js/first-message\" rel=\"nofollow noreferrer\">sending your first message</a> and I have not been able to figure out how to deliver a notification with the below content to myself despite having the token.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def packet_signed_notification(token, signer):\n    message = messaging.Message(\n        token=token,\n        webpush=messaging.WebpushConfig(\n            notification=messaging.WebpushNotification(\n                title='New Packet Signature!',\n                body=signer + ' signed your packet! Congrats or I\\'m Sorry',\n                icon='https://exmaple.com/image/' + signer,\n            ),\n        )\n    )\n    response = messaging.send(message)\n    print('Successfully sent message:', response)\n</code></pre>\n"}, {"tags": ["python", "asp.net", "raspberry-pi", "network-programming", "signalr"], "owner": {"reputation": 11, "user_id": 11705444, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaa3e066d80638803e24c4143e96d3c0?s=128&d=identicon&r=PG&f=1", "display_name": "Nate32", "link": "https://stackoverflow.com/users/11705444/nate32"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565219869, "creation_date": 1565219869, "question_id": 57403318, "link": "https://stackoverflow.com/questions/57403318/how-can-i-create-a-socket-connection-from-the-python-signalr-client-to-an-asp-ne", "title": "How can I create a socket connection from the python signalr client to an ASP.NET web application?", "body": "<p>I'm creating an ASP.NET web application that runs on a networked raspberry pi. \nI have also begun working on a tactile interface for the application and therefore need a connection between signalr and the server to make the app respond to commands from my tactile interface. \nRight now, I'm having trouble creating this connection between signalr and the host.</p>\n\n<pre><code>from requests import Session\nfrom signalr import Connection\nwith Session() as session:\n    connection = Connection(\"[link to web app]\", session)\n    connection.start()\n</code></pre>\n\n<p>Error 405: Method not allowed</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 43, "user_id": 11897472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d33b5d259895fbf8fd7fcf1617944688?s=128&d=identicon&r=PG&f=1", "display_name": "vedufa", "link": "https://stackoverflow.com/users/11897472/vedufa"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565221097, "post_id": 57403316, "comment_id": 101288372, "body": "oh yes, I&#39;m sorry and also edited my question"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565222253, "post_id": 57403316, "comment_id": 101288614, "body": "always put full error messamge, not only last line. There are useful information like which line of code makes problem, from what module is this function, is there file with wrong name, etc."}], "owner": {"reputation": 43, "user_id": 11897472, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d33b5d259895fbf8fd7fcf1617944688?s=128&d=identicon&r=PG&f=1", "display_name": "vedufa", "link": "https://stackoverflow.com/users/11897472/vedufa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565221053, "creation_date": 1565219845, "last_edit_date": 1592644375, "question_id": 57403316, "link": "https://stackoverflow.com/questions/57403316/aiohttp-asyncio-and-runtimeerror-session-is-closed", "title": "aiohttp, asyncio and RuntimeError: Session is closed", "body": "<p>I'm trying to parse and put JSON's async but getting:</p>\n<blockquote>\n<p>raise RuntimeError('Session is closed')</p>\n<p>RuntimeError: Session is closed</p>\n</blockquote>\n<pre><code>import asyncio\nfrom aiohttp import ClientSession\nfrom datetime import datetime\nimport time\n\nstart_time = datetime.now()\n\nasync def fetch(url, session):\n    async with session.get(url) as response:\n        DATA = response.read()\n        return await response.read() \n\n\nasync def bound_fetch(sem, url, session):\n    async with sem:\n        await fetch(url, session)\n\n\nasync def put(url, session, data):\n    async with session.put(url, data) as response:\n        return await response.status()\n\nasync def bound_put(sem, url, session, data):\n    async with sem:\n        await put(url, session, data)\n\nasync def run(r):\n    url_get = &quot;https://api.vk.com/method/photos.get?album_id=profile&amp;rev=1&amp;count=1&amp;uid={}&amp;access_token=qwerty&amp;v=5.60&quot;\n    url_put = &quot;http://127.0.0.1:5984/photosget/{}&quot;\n    tasks_get = []\n    tasks_put = []\n\n    sem = asyncio.Semaphore(1000)\n\n    async with ClientSession() as session:\n        for i in range(r):\n            task_get = asyncio.ensure_future(bound_fetch(sem, url_get.format(i), session))\n            tasks_get.append(task_get)\n\n            task_put = asyncio.ensure_future(bound_put(sem, url_put.format(i), session, DATA))\n            tasks_put.append(task_put)\n\n        responses_get = asyncio.gather(*tasks_get)\n        responses_put = asyncio.gather(*tasks_put)\n        await responses_get\n        await responses_put\n\nnumber = 1000\nloop = asyncio.get_event_loop()\n\nfuture = asyncio.ensure_future(run(number))\nloop.run_until_complete(future)\nprint(datetime.now() - start_time)\n</code></pre>\n<p>I also tried to parse and put in one function but this doesn't work.</p>\n<p>How I could use aiohttp and asyncio properly? Thanks for any advices.</p>\n<p>Also in traceback more useful information:</p>\n<pre><code> File &quot;async.py&quot;, line 50, in run\n    task_put = asyncio.ensure_future(bound_put(sem, url_put.format(i), session, DATA))\nNameError: name 'DATA' is not defined\n</code></pre>\n<p>But if I define it global after imports like <code>DATA = &quot;&quot;</code> I got:</p>\n<pre><code>TypeError: put() takes 2 positional arguments but 3 were given\n</code></pre>\n"}, {"tags": ["python", "regex", "python-3.x", "pycharm"], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 6705125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5762c59dbc2394598b963923ce0d8b9?s=128&d=identicon&r=PG&f=1", "display_name": "Ben Yarmis", "link": "https://stackoverflow.com/users/6705125/ben-yarmis"}, "is_accepted": true, "score": 2, "last_activity_date": 1565220088, "creation_date": 1565220088, "answer_id": 57403341, "question_id": 57403303, "link": "https://stackoverflow.com/questions/57403303/can-you-spot-the-problem-with-this-regex-statement/57403341#57403341", "title": "Can you spot the problem with this REGEX statement?", "body": "<p>Your regular expression (<code>religion\\s=\\s(.*)\\s</code>) requires that there be a trailing whitespace (the last <code>\\s</code> there).  Since your string doesn't have one, it doesn't find anything when searching thus <code>re.search</code> returns <code>None</code>.</p>\n\n<p>You should either:</p>\n\n<ol>\n<li>Change your regex to be <code>r\"religion\\s=\\s(.*)\"</code> or</li>\n<li>Change the string you're searching to have a trailing whitespace (i.e <code>'religion = catholic'</code> to <code>'religion = catholic '</code>)</li>\n</ol>\n"}], "owner": {"reputation": 125, "user_id": 11600922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc543f4b1ec8229e35576fa6f4851e40?s=128&d=identicon&r=PG", "display_name": "MagicGAT", "link": "https://stackoverflow.com/users/11600922/magicgat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 57403341, "answer_count": 1, "score": 0, "last_activity_date": 1565271519, "creation_date": 1565219680, "last_edit_date": 1565271519, "question_id": 57403303, "link": "https://stackoverflow.com/questions/57403303/can-you-spot-the-problem-with-this-regex-statement", "title": "Can you spot the problem with this REGEX statement?", "body": "<p>Im running .txt files through a <code>for</code> loop which should slice out keywords and <code>.append</code> them into lists. For some reason my REGEX statements are returning really odd results. </p>\n\n<p>My first statement which iterates through the full filenames and slices out the keyword works well.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code># Creates a workflow list of file names within target directory for further iteration\nstack = os.listdir(\n  \"/Users/me/Documents/software_development/my_python_code/random/countries\"\n)\n\n# declares list, to be filled, and their associated regular expression,       to be used,\n# in the primary loop\nnames = []\nname_pattern = r\"-\\s(.*)\\.txt\"\n\n# PRIMARY LOOP\nfor entry in stack:\n  if entry == \".DS_Store\":\n    continue\n\n# extraction of country name from file name into `names` list\n  name_match = re.search(name_pattern, entry)\n  name = name_match.group(1)\n  names.append(name)\n</code></pre>\n\n<p>This works fine and creates the list that I expect</p>\n\n<p>However, once I move on to a similar process with the actual contents of files, it no longer works.</p>\n\n<pre><code>religions = []\nreli_pattern = r\"religion\\s=\\s(.+).\"\n\n# PRIMARY LOOP\nfor entry in stack:\n  if entry == \".DS_Store\":\n    continue\n# opens and reads file within `contents` variable\n  file_path = (\n  \"/Users/me/Documents/software_development/my_python_code/random/countries\" + \"/\" + entry\n  )\n  selection = open(file_path, \"rb\")\n  contents = str(selection.read())\n\n# extraction of religion type and placement into `religions` list\n  reli_match = re.search(reli_pattern, contents)\n  religion = reli_match.group(1)\n  religions.append(religion)\n</code></pre>\n\n<p>The results should be something like: <code>\"therevada\", \"catholic\", \"sunni\"</code> etc.\nInstead i'm getting seemingly random pieces of text from the document which have nothing to do with my <code>REGEX</code> like ruler names and stat values that do not contain the word <code>\"religion\"</code>\nTo try and figure this out I isolated some of the code in the following way: </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>contents = \"religion = catholic\"\nreli_pattern = r\"religion\\s=\\s(.*)\\s\"\n\nreli_match = re.search(reli_pattern, contents)\n\nprint(reli_match)\n</code></pre>\n\n<p>And <code>None</code> is printed to the console so I am assuming the problem is with my <code>REGEX</code>. What silly mistake am I making which is causing this?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 2507, "user_id": 2741091, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2f5b0db70a69308bba55f416f78f9fc9?s=128&d=identicon&r=PG", "display_name": "ifly6", "link": "https://stackoverflow.com/users/2741091/ifly6"}, "edited": false, "score": 1, "creation_date": 1565219845, "post_id": 57403278, "comment_id": 101288117, "body": "You mean get the last present value for each column? Also, please output <code>your_df.to_dict(&#39;index&#39;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11898870, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--4NT0KQUyPY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdSFV4l-ysKShwzLMf7ORfZ76yKbg/photo.jpg?sz=128", "display_name": "Dave C", "link": "https://stackoverflow.com/users/11898870/dave-c"}, "edited": false, "score": 0, "creation_date": 1565281068, "post_id": 57403364, "comment_id": 101313558, "body": "This did it - thanks.  I did have to replace empty &#39;&#39; lines with numpy.nan - and then this did the trick."}], "tags": [], "owner": {"reputation": 2507, "user_id": 2741091, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2f5b0db70a69308bba55f416f78f9fc9?s=128&d=identicon&r=PG", "display_name": "ifly6", "link": "https://stackoverflow.com/users/2741091/ifly6"}, "is_accepted": false, "score": 1, "last_activity_date": 1565220660, "last_edit_date": 1565220660, "creation_date": 1565220281, "answer_id": 57403364, "question_id": 57403278, "link": "https://stackoverflow.com/questions/57403278/how-to-create-a-summary-row-in-pandas-from-audit-fields/57403364#57403364", "title": "How to create a summary row in Pandas from audit fields", "body": "<p>You can get it as a list like so:</p>\n\n<pre><code>&gt;&gt;&gt; [df[s][df[s].last_valid_index()] for s in df]\n['x', 'y', 2, 3, 'h']\n</code></pre>\n\n<p>If you need it as appended or something with a name, then you need to provide it with an index and then append it, like so:</p>\n\n<pre><code>df.append(pd.Series(temp, index=df.columns, name='total'))\n# note, this returns a new object\n# where 'temp' is the output of the code above\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 11898870, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--4NT0KQUyPY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdSFV4l-ysKShwzLMf7ORfZ76yKbg/photo.jpg?sz=128", "display_name": "Dave C", "link": "https://stackoverflow.com/users/11898870/dave-c"}, "edited": false, "score": 0, "creation_date": 1565281163, "post_id": 57404080, "comment_id": 101313600, "body": "I went with the last_valid_index approach - but your answer clued me in to the replacing &#39;&#39; with NaN.  Thanks for the help"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 0, "last_activity_date": 1565227475, "creation_date": 1565227475, "answer_id": 57404080, "question_id": 57403278, "link": "https://stackoverflow.com/questions/57403278/how-to-create-a-summary-row-in-pandas-from-audit-fields/57404080#57404080", "title": "How to create a summary row in Pandas from audit fields", "body": "<p>You can just try </p>\n\n<pre><code>#df=df.replace({'':np.nan})\ndf.ffill().iloc[[-1],:]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11898870, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--4NT0KQUyPY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdSFV4l-ysKShwzLMf7ORfZ76yKbg/photo.jpg?sz=128", "display_name": "Dave C", "link": "https://stackoverflow.com/users/11898870/dave-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1565227475, "creation_date": 1565219497, "question_id": 57403278, "link": "https://stackoverflow.com/questions/57403278/how-to-create-a-summary-row-in-pandas-from-audit-fields", "title": "How to create a summary row in Pandas from audit fields", "body": "<p>I am trying to derive a single row based on original input and then various changes to individual column values at different points in time.  I have simplified the list below.</p>\n\n<pre>\nI have read in some data into my dataframe as so:\n\n    A    B    C  D   E\n\n0   h    h    h  h   h \n1   x\n2        y       1    \n3             2  3\n\n\nrow 0 - \"h\" represents my original record.\nrows 1 - 3 are changes over time to a specific column\n\nI would like to create a single \"result row\" that would look something like:\n\n'x', 'y, '2', '3' 'h'\n</pre>\n\n<p>Is there a simple way to do this with Pandas and Python with out excessive looping?</p>\n"}, {"tags": ["python", "pkcs#11", "nitrokey"], "answers": [{"tags": [], "owner": {"reputation": 1262, "user_id": 1039462, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e900d325da026737779c7e4fd790d3ab?s=128&d=identicon&r=PG", "display_name": "mat", "link": "https://stackoverflow.com/users/1039462/mat"}, "is_accepted": false, "score": 0, "last_activity_date": 1565366447, "creation_date": 1565366447, "answer_id": 57433657, "question_id": 57403255, "link": "https://stackoverflow.com/questions/57403255/pkcs11-module-path-to-a-file/57433657#57433657", "title": "PKCS11_MODULE path to a file", "body": "<p>At least the Nitrokey Pro can be used with <code>opensc-pkcs11.so</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 11917308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6dab8ff2332c710d5d80f239db0ac101?s=128&d=identicon&r=PG&f=1", "display_name": "szszsz at Nitrokey", "link": "https://stackoverflow.com/users/11917308/szszsz-at-nitrokey"}, "is_accepted": false, "score": 3, "last_activity_date": 1565608334, "last_edit_date": 1565608334, "creation_date": 1565607935, "answer_id": 57460010, "question_id": 57403255, "link": "https://stackoverflow.com/questions/57403255/pkcs11-module-path-to-a-file/57460010#57460010", "title": "PKCS11_MODULE path to a file", "body": "<p>According to this <a href=\"https://python-pkcs11.readthedocs.io/en/latest/opensc.html#using-with-smartcard-hsm-nitrokey-hsm\" rel=\"nofollow noreferrer\">pkcs11 page</a> on Nitrokey HSM, the standard OpenSC module can be used:</p>\n\n<blockquote>\n  <p>The OpenSC PKCS #11 module is opensc-pkcs11.so.</p>\n</blockquote>\n\n<p>Alternative is to use the HSM smart card vendor's module <code>libsc-hsm-pkcs11.so</code>:</p>\n\n<ul>\n<li>Code: <a href=\"https://github.com/CardContact/sc-hsm-embedded\" rel=\"nofollow noreferrer\">https://github.com/CardContact/sc-hsm-embedded</a></li>\n<li>Documentation: <a href=\"https://github.com/CardContact/sc-hsm-embedded/wiki/PKCS11\" rel=\"nofollow noreferrer\">https://github.com/CardContact/sc-hsm-embedded/wiki/PKCS11</a></li>\n</ul>\n\n<p>For more information please look at these:</p>\n\n<ul>\n<li><a href=\"https://github.com/OpenSC/OpenSC/wiki/SmartCardHSM\" rel=\"nofollow noreferrer\">https://github.com/OpenSC/OpenSC/wiki/SmartCardHSM</a></li>\n<li><a href=\"https://www.smartcard-hsm.com/opensource.html\" rel=\"nofollow noreferrer\">https://www.smartcard-hsm.com/opensource.html</a></li>\n<li><a href=\"https://www.smartcard-hsm.com/support.html\" rel=\"nofollow noreferrer\">https://www.smartcard-hsm.com/support.html</a></li>\n</ul>\n"}], "owner": {"reputation": 21, "user_id": 11898871, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51755148ec0964632bacbd29d55ca200?s=128&d=identicon&r=PG", "display_name": "Anoy", "link": "https://stackoverflow.com/users/11898871/anoy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 755, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1565608334, "creation_date": 1565219158, "last_edit_date": 1565371174, "question_id": 57403255, "link": "https://stackoverflow.com/questions/57403255/pkcs11-module-path-to-a-file", "title": "PKCS11_MODULE path to a file", "body": "<p>I am working on a test program using the Nitrokey HSM:</p>\n\n<pre><code>import pkcs11\n\nlib = pkcs11.lib(os.environ['PKCS11_MODULE'])\ntoken = lib.get_token(token_label='smartcard')\n    with token.open() as session:\n\nprint(session)\n</code></pre>\n\n<p>Question: what can be the pkcs11 library file name? I guessed <code>opensc-hsm.so</code>, and defined PKCS11_MODULE to that path, but was not successful.\nSo, what can be the name of a pkcs11 library to be loaded?\nThanks</p>\n"}, {"tags": ["python", "python-3.x", "vector", "cython"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user11107827"}, "edited": false, "score": 0, "creation_date": 1565256561, "post_id": 57408729, "comment_id": 101299131, "body": "Can i do <code>stringVect.push_back(&#39;Hi&#39;)</code> ?"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1565256610, "post_id": 57408729, "comment_id": 101299159, "body": "Yes - this will create a <code>std::string</code> copy of &#39;Hi&#39;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11107827"}, "edited": false, "score": 0, "creation_date": 1565257123, "post_id": 57408729, "comment_id": 101299481, "body": "How about object from a cdef class?"}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1565257221, "post_id": 57408729, "comment_id": 101299539, "body": "No. Again a <code>PyObject*</code> and therefore needs reference counting so incompatible with C++ vectors."}, {"owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "edited": false, "score": 0, "creation_date": 1565262161, "post_id": 57408729, "comment_id": 101302249, "body": "An example of what? A vector of a <code>cdef class</code>, which I just told you that you can&#39;t do?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11107827"}, "edited": false, "score": 0, "creation_date": 1565262237, "post_id": 57408729, "comment_id": 101302281, "body": "cdef class, i don&#39;t know how to reference PyObject"}], "tags": [], "owner": {"reputation": 23048, "user_id": 4657412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4915a27d01efa79d81d322511ee517a9?s=128&d=identicon&r=PG&f=1", "display_name": "DavidW", "link": "https://stackoverflow.com/users/4657412/davidw"}, "is_accepted": true, "score": 0, "last_activity_date": 1565254438, "creation_date": 1565254438, "answer_id": 57408729, "question_id": 57403251, "link": "https://stackoverflow.com/questions/57403251/making-a-vector-that-contains-python-string-in-cython/57408729#57408729", "title": "Making a vector that contains Python string in Cython", "body": "<p>Assuming you do mean a C++ vector (I'm not sure what else it could mean): no you can't. Python strings end up being represented as <code>PyObject*</code>, and these need careful handling to ensure the reference count is correct. A C++ <code>vector&lt;PyObject*&gt;</code> is not set up to do this reference counting and so would end up leaking the memory.</p>\n\n<p>Practically, to make it work you'd have to write a C++ wrapper to hold the pointers and do the reference counting. This is getting beyond the scope of what you can do purely in Cython.</p>\n\n<p>Your best option would be to wrap a C++ vector of C++ strings. Cython can automatically convert these from Python strings (at the cost of a copying operation) so the code is very easy to write:</p>\n\n<pre><code>from libcpp.vector cimport vector\nfrom libcpp.string cimport string\n\ncdef vector[string] x = ['hello', 'aaaaa']  # autoconversion from list of strings to vector\n</code></pre>\n\n<hr>\n\n<p>I suspect you may be trying to do this as a way of approximating a \"typed list of strings\" (which you can't represent directly in Cython). The cost of copying to and from the C++ datatypes makes this pointless in most cases - if you have to work with pure Python types such as <code>list</code> then just work with the Python types - don't invent complicated typing schemes to force Cython to do things that aren't really supported.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11107827"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 57408729, "answer_count": 1, "score": 0, "last_activity_date": 1565254438, "creation_date": 1565219090, "question_id": 57403251, "link": "https://stackoverflow.com/questions/57403251/making-a-vector-that-contains-python-string-in-cython", "title": "Making a vector that contains Python string in Cython", "body": "<p>Is there a way to make a Cython vector store a Python string? because when i do this:</p>\n\n<pre><code>cdef vector[str] vectStr\n</code></pre>\n\n<p>It gives an error when i try to compile it</p>\n"}, {"tags": ["python", "arrays", "loops", "numpy", "updates"], "comments": [{"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 0, "creation_date": 1565219579, "post_id": 57403239, "comment_id": 101288063, "body": "<code>np.concatenate</code> returns a new array, and <code>array</code> is just reassigned to that array. The contents (i.e. the ndarrays in <code>arraylist</code>) are not modified. You could always do it by index--change the <code>for</code> loop to <code>for i in range(len(arraylist)):</code> and change <code>array</code> to <code>arraylist[i]</code>."}, {"owner": {"reputation": 778, "user_id": 10833207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9gsE.png?s=128&g=1", "display_name": "Saritus", "link": "https://stackoverflow.com/users/10833207/saritus"}, "reply_to_user": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 0, "creation_date": 1565219921, "post_id": 57403239, "comment_id": 101288136, "body": "@PyNoob this would not work, because to look at the results, he uses the <code>arr01</code> variable again, which is unaffected by any <code>arraylist[i]</code> changes"}, {"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "reply_to_user": {"reputation": 778, "user_id": 10833207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9gsE.png?s=128&g=1", "display_name": "Saritus", "link": "https://stackoverflow.com/users/10833207/saritus"}, "edited": false, "score": 0, "creation_date": 1565220110, "post_id": 57403239, "comment_id": 101288173, "body": "@Saritus That&#39;s true, but this could be averted by printing <code>arraylist[0]</code>. If <code>ndarray</code> methods are desired, I don&#39;t know how else I would do it."}, {"owner": {"reputation": 778, "user_id": 10833207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9gsE.png?s=128&g=1", "display_name": "Saritus", "link": "https://stackoverflow.com/users/10833207/saritus"}, "reply_to_user": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 0, "creation_date": 1565220286, "post_id": 57403239, "comment_id": 101288206, "body": "@PyNoob Maybe something like <code>arr01, arr02, arr99 = arraylist</code> after the iteration, so all changes inside <code>arraylist</code> are copied back to the original variables"}, {"owner": {"reputation": 173469, "user_id": 901925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bbd70aaeb3a97d0087daf93c2be8804?s=128&d=identicon&r=PG", "display_name": "hpaulj", "link": "https://stackoverflow.com/users/901925/hpaulj"}, "edited": false, "score": 0, "creation_date": 1565224701, "post_id": 57403239, "comment_id": 101289096, "body": "You can&#39;t do this in a Python loop.   You have to use <code>arr02 = np.concatenate((np.zeros(3, int), arr02))</code>  for each named array.  Once you start down the &#39;arr01, arr02,...&#39; route, you are stuck with it."}], "answers": [{"comments": [{"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 0, "creation_date": 1565220015, "post_id": 57403283, "comment_id": 101288154, "body": "OP&#39;s version made <code>array</code> a <code>numpy.ndarray</code> object, but <code>array[:]</code> keeps it as a <code>list</code> object, which may be an unintended side effect and something for others to keep in mind."}, {"owner": {"reputation": 57, "user_id": 11813563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17819217d6be1747e81496c2704b87cd?s=128&d=identicon&r=PG&f=1", "display_name": "epe", "link": "https://stackoverflow.com/users/11813563/epe"}, "edited": false, "score": 0, "creation_date": 1565236884, "post_id": 57403283, "comment_id": 101291201, "body": "Outstanding answer. Such a small change fixed the problem completely!"}, {"owner": {"reputation": 57, "user_id": 11813563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17819217d6be1747e81496c2704b87cd?s=128&d=identicon&r=PG&f=1", "display_name": "epe", "link": "https://stackoverflow.com/users/11813563/epe"}, "edited": false, "score": 0, "creation_date": 1565294257, "post_id": 57403283, "comment_id": 101319037, "body": "Quick update... I realized when I feed numpy arrays in, instead of lists, then I had to adopt the other solution proposed jointly by PyNoob and Saritus, as follows:     arraylist = [arr01, arr02, arr99]     for i in range(len(arraylist)):         arraylist[i] = np.concatenate((np.zeros(3, dtype=int), arraylist[i]))         print(&#39;array being modified inside the loop&#39;, arraylist[i])     arr01, arr02, arr99 = arraylist"}], "tags": [], "owner": {"reputation": 778, "user_id": 10833207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/l9gsE.png?s=128&g=1", "display_name": "Saritus", "link": "https://stackoverflow.com/users/10833207/saritus"}, "is_accepted": true, "score": 0, "last_activity_date": 1565219946, "last_edit_date": 1565219946, "creation_date": 1565219547, "answer_id": 57403283, "question_id": 57403239, "link": "https://stackoverflow.com/questions/57403239/how-to-update-multiple-numpy-arrays-in-a-loop/57403283#57403283", "title": "How to update multiple Numpy arrays in a loop", "body": "<p><code>array = np.concatenate((np.zeros(3, dtype=int), array))</code> does not change the current array but creates a new one and stores it inside the variable <code>array</code>. So for the solution you have to change the values of the array itself, which can be done with <code>array[:]</code>.</p>\n\n<p>That means the only change you would have to make is replacing this one line</p>\n\n<pre><code>array[:] = np.concatenate((np.zeros(3, dtype=int), array))\n</code></pre>\n\n<p>So your correct solution would be</p>\n\n<pre><code>import numpy as np\narr01 = [1,2,3]\narr02 = [4,5,6]\narr99 = [7,8,9]\nprint('initial arr01', arr01)\narraylist = [arr01, arr02, arr99]\nfor array in arraylist:\n    array[:] = np.concatenate((np.zeros(3, dtype=int), array))\n    print('array being modified inside the loop', array)\nprint('final arr01', arr01)\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 11813563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17819217d6be1747e81496c2704b87cd?s=128&d=identicon&r=PG&f=1", "display_name": "epe", "link": "https://stackoverflow.com/users/11813563/epe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 0, "accepted_answer_id": 57403283, "answer_count": 1, "score": 0, "last_activity_date": 1565219946, "creation_date": 1565218993, "question_id": 57403239, "link": "https://stackoverflow.com/questions/57403239/how-to-update-multiple-numpy-arrays-in-a-loop", "title": "How to update multiple Numpy arrays in a loop", "body": "<p>I would like to update (prepend each one with additional elements) many numpy arrays in a loop, without having to repeat the code for each one.</p>\n\n<p>I tried creating a list of all the arrays and looping through the items in that list and updating each one, but that doesn't change the original array.</p>\n\n<pre><code>import numpy as np\narr01 = [1,2,3]\narr02 = [4,5,6]\narr99 = [7,8,9]\nprint('initial arr01', arr01)\narraylist = [arr01, arr02, arr99]\nfor array in arraylist:\n    array = np.concatenate((np.zeros(3, dtype=int), array))\n    print('array being modified inside the loop', array)\nprint('final arr01', arr01)\n</code></pre>\n\n<p>In the sample code, I expected arr01, arr02, arr03 to all be modified with the prepended zeros.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 3, "creation_date": 1565219168, "post_id": 57403228, "comment_id": 101288001, "body": "I think your editor converted your tab at the bottom to spaces. When I replaced it with a tab character, I got <code>[&#39;\\t&#39;]</code> as a return."}, {"owner": {"reputation": 81, "user_id": 11783775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O79TX.png?s=128&g=1", "display_name": "DustyPanda", "link": "https://stackoverflow.com/users/11783775/dustypanda"}, "reply_to_user": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 0, "creation_date": 1565219744, "post_id": 57403228, "comment_id": 101288092, "body": "Ah yes definitely. I did the same and it worked now! Thank you"}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 3, "creation_date": 1565219786, "post_id": 57403228, "comment_id": 101288103, "body": "<code>\\t</code> or Tab isn&#39;t a shortcut for multiple spaces, it&#39;s an ASCII character,  just like <code>\\n</code> (Return), &quot;a&quot; or &quot;1&quot; are."}], "answers": [{"tags": [], "owner": {"reputation": 87, "user_id": 11477736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c887e9f6951a89231239b33207dffea?s=128&d=identicon&r=PG&f=1", "display_name": "lvzxy", "link": "https://stackoverflow.com/users/11477736/lvzxy"}, "is_accepted": true, "score": 1, "last_activity_date": 1565219555, "creation_date": 1565219555, "answer_id": 57403286, "question_id": 57403228, "link": "https://stackoverflow.com/questions/57403228/what-does-t-match-to-in-python-regular-expression-objects/57403286#57403286", "title": "What does &#39;\\t&#39; match to in python regular expression objects?", "body": "<p><code>\\t</code> is for matching <code>tabs</code>, which are different from spaces. If you append a\\t\\t\\tb, you will get:</p>\n\n<pre><code>a b\na  b\na   b\na    b\na     b\na      b\na       b\na        b\na         b\na          b\na           b\na            b\na             b\na              b\na               b\na                b\na           b\n</code></pre>\n\n<p>Note that the spacing may vary depending on your IDE's settings. I may be erroneously assuming you're using spaces based on your first few output lines as they don't equate to the length of a tab, but as PyNoob's comment suggests your editor may be converting tabs.</p>\n"}], "owner": {"reputation": 81, "user_id": 11783775, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O79TX.png?s=128&g=1", "display_name": "DustyPanda", "link": "https://stackoverflow.com/users/11783775/dustypanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 57403286, "answer_count": 1, "score": 1, "last_activity_date": 1565219555, "creation_date": 1565218880, "question_id": 57403228, "link": "https://stackoverflow.com/questions/57403228/what-does-t-match-to-in-python-regular-expression-objects", "title": "What does &#39;\\t&#39; match to in python regular expression objects?", "body": "<p>I was reading through a previous answer to a stackoverflow question (<a href=\"https://stackoverflow.com/a/38162461/11783775\">https://stackoverflow.com/a/38162461/11783775</a>), where the '\\t' regular expression code was mentioned, i.e. something that matches a tab. For my own curiousity, I wanted to make a regular expression object to see what exactly '\\t' matches, i.e. how many spaces, but I have found nothing on my own. </p>\n\n<p>Here is the regex object:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>tabTesterRegex = re.compile(r'''\n    (\\t)\n''', re.VERBOSE)\n</code></pre>\n\n<p>Here is some of the text I was testing with (the bottom line represents a keyboard tab space between 'a' and 'b'.)</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>text = '''\na b\na  b\na   b\na    b\na     b\na      b\na       b\na        b\na         b\na          b\na           b\na            b\na             b\na              b\na               b\na                b\na   b\n'''\n</code></pre>\n\n<p>Here is the code for finding matches and appending them to a list.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>matchList = []\nfor match in tabTesterRegex.findall(text):\n    matchList.append(match)\n\nprint(matchList)\n</code></pre>\n\n<p>The output that I recieve is an empty list, but I would have assumed that '\\t' would match to a specific number of spaces.  </p>\n\n<p>Thank you</p>\n"}, {"tags": ["python", "python-3.x", "jupyter-notebook", "jupyter", "pytorch"], "answers": [{"tags": [], "owner": {"reputation": 835, "user_id": 8821969, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1nm4H1-4WaM/AAAAAAAAAAI/AAAAAAAACPo/zmpqlWDMyWg/photo.jpg?sz=128", "display_name": "Daniel Schneider", "link": "https://stackoverflow.com/users/8821969/daniel-schneider"}, "is_accepted": false, "score": 0, "last_activity_date": 1565229297, "last_edit_date": 1565229297, "creation_date": 1565228934, "answer_id": 57404200, "question_id": 57403213, "link": "https://stackoverflow.com/questions/57403213/how-to-train-pytorch-transfer-learning-tutorial-with-more-then-1-gpu/57404200#57404200", "title": "How to train PyTorch transfer learning tutorial with more then 1 GPU", "body": "<p>IMO, it is easiest to use <strong>Horovod</strong> to do multi GPU training. Here is an example of a distributed training script with GPU using Horovod: <a href=\"https://github.com/horovod/horovod/blob/master/examples/pytorch_mnist.py\" rel=\"nofollow noreferrer\">https://github.com/horovod/horovod/blob/master/examples/pytorch_mnist.py</a></p>\n\n<p>You will need to have <strong>OpenMPI</strong> installed (likely already on the box), and you will need to have Horovod installed in the python enviroment (<code>pip install horovod</code> -- full install instructions are here <a href=\"https://github.com/horovod/horovod#install\" rel=\"nofollow noreferrer\">https://github.com/horovod/horovod#install</a>). </p>\n\n<p>Then you would start your job with <code>horovodrun -np 4 python pytorch_mnist.py</code> (Here some docs on how to start a Horovod run: <a href=\"https://horovod.readthedocs.io/en/latest/mpirun.html\" rel=\"nofollow noreferrer\">https://horovod.readthedocs.io/en/latest/mpirun.html</a>)</p>\n\n<p>This will enable you to train not only on one node with multiple GPUs, but also across multiple nodes (e.g. across 2 nodes with 4 GPUs each).</p>\n\n<p>The salient points for distributed training with Horovod are:</p>\n\n<ul>\n<li>Horovod will start as many processes as you instruct it to, so in your case 4. Each process will run the same script that will only differ in the Horovod/MPI rank. The rank is then used to get the corresponding cuda device:</li>\n</ul>\n\n<pre><code>    # Horovod: pin GPU to local rank.\n    torch.cuda.set_device(hvd.local_rank())\n    torch.cuda.manual_seed(args.seed)\n</code></pre>\n\n<ul>\n<li>A <code>DistributedSampler</code> is used to divide the data up across the different nodes. <code>hvd.rank()</code> is used to make sure different partitions of the data are used by each of the processes and <code>hvd.size()</code> captures how many processes there are in total.</li>\n</ul>\n\n<pre><code>    train_sampler = torch.utils.data.distributed.DistributedSampler(\n    train_dataset, num_replicas=hvd.size(), rank=hvd.rank())\n</code></pre>\n\n<ul>\n<li>Wrap your optimizer with a <code>DistributedOptimizer</code> -- that will take care of aggregating the gradients across the processes at the end of each minibatch:</li>\n</ul>\n\n<pre><code>    # Horovod: wrap optimizer with DistributedOptimizer.\n    optimizer = hvd.DistributedOptimizer(optimizer,\n                                         named_parameters=model.named_parameters(),\n                                         compression=compression)\n</code></pre>\n\n<ul>\n<li>Most importantly, you don't have to modify your actual model and training loop, which is pretty neat.</li>\n</ul>\n\n<p>There are a few more interesting things in the sample (e.g. growing the learning rate with the number or processes, broadcasting your parameters at the start). </p>\n"}], "owner": {"reputation": 11, "user_id": 4213935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/623ec1a44101d9f6592a0bf0f06cb628?s=128&d=identicon&r=PG&f=1", "display_name": "RichCode", "link": "https://stackoverflow.com/users/4213935/richcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 466, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565229297, "creation_date": 1565218733, "last_edit_date": 1565220728, "question_id": 57403213, "link": "https://stackoverflow.com/questions/57403213/how-to-train-pytorch-transfer-learning-tutorial-with-more-then-1-gpu", "title": "How to train PyTorch transfer learning tutorial with more then 1 GPU", "body": "<p>I am currently following the PyTorch transfer learning tutorial in: <a href=\"https://pytorch.org/tutorials/beginner/transfer_learning_tutorial.html\" rel=\"nofollow noreferrer\">https://pytorch.org/tutorials/beginner/transfer_learning_tutorial.html</a></p>\n\n<p>I have been able to complete tutorial and train on both a CPU and 1 GPU.</p>\n\n<p>I am utilising Google Cloud Platform Notebook Instances and using 4 NVIDIA Tesla k80 x 4 GPU. It is here that I run into a Server Connection Error (invalid response: 504) error when I train the network on more than 1 GPU</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>model_ft = models.resnet18(pretrained=True)\nnum_ftrs = model_ft.fc.in_features\nmodel_ft.fc = nn.Linear(num_ftrs, 2)\n\ndevice = torch.device(\"cuda:0\" if torch.cuda.is_available() else \"cpu\")\n\n## Using 4 GPUs\nif torch.cuda.device_count() &gt; 1:\n    model_ft = nn.DataParallel(model_ft)\nmodel_ft = model_ft.to(device)\n\ncriterion = nn.CrossEntropyLoss()\n\noptimizer_ft = optim.SGD(model_ft.parameters(), lr=0.001, momentum=0.9)\n\nexp_lr_scheduler = lr_scheduler.StepLR(optimizer_ft, step_size=7, gamma=0.1)\n\nmodel_ft = train_model(model_ft, criterion, optimizer_ft, exp_lr_scheduler, num_epochs=25)\n</code></pre>\n\n<p>The idea was to utilise the data parallelism function to utilise all available GPU (which is 4) to train the network.</p>\n\n<p>Am I missing something in the implementation, please advice.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "datetime", "timezone", "pytz"], "comments": [{"owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "edited": false, "score": 0, "creation_date": 1565222065, "post_id": 57403209, "comment_id": 101288567, "body": "Note that in most cases, this is a mistake.  The people in the Pacific time zone do not actually have a choice unto themselves whether they use PST or PDT.  That is part of the definition of being in the Pacific time zone.  Perhaps this was handed to you as a requirement? If so, the right thing to do is to learn about time zones and then provide those learnings to whomever handed you the requirement.  Implementing it as asked is deliberately implementing a bug.  (I&#39;m presuming a lot here, apologies if that is not the case, just you are not the first to ask and it usually the response.)"}, {"owner": {"reputation": 195413, "user_id": 634824, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/889cf720c96957e615463b5c903a5e18?s=128&d=identicon&r=PG", "display_name": "Matt Johnson-Pint", "link": "https://stackoverflow.com/users/634824/matt-johnson-pint"}, "edited": false, "score": 0, "creation_date": 1565222217, "post_id": 57403209, "comment_id": 101288604, "body": "The exception would be if by PST you are referring to <a href=\"https://www.timeanddate.com/time/zone/pitcairn\" rel=\"nofollow noreferrer\">Pitcairn Standard Time</a>, used in Pitcairn Islands only, which is UTC-8 year round.  But I don&#39;t think that&#39;s what you meant."}], "answers": [{"tags": [], "owner": {"reputation": 684, "user_id": 8885874, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/6c5495f1e76e3179ad0755db8b6e84d2?s=128&d=identicon&r=PG&f=1", "display_name": "\u0395\u03c5\u03ac\u03b3\u03b3\u03b5\u03bb\u03bf\u03c2 \u0393\u03c1\u03b7\u03b3\u03bf\u03c1\u03cc\u03c0\u03bf\u03c5\u03bb\u03bf\u03c2", "link": "https://stackoverflow.com/users/8885874/%ce%95%cf%85%ce%ac%ce%b3%ce%b3%ce%b5%ce%bb%ce%bf%cf%82-%ce%93%cf%81%ce%b7%ce%b3%ce%bf%cf%81%cf%8c%cf%80%ce%bf%cf%85%ce%bb%ce%bf%cf%82"}, "is_accepted": false, "score": 0, "last_activity_date": 1565220000, "creation_date": 1565220000, "answer_id": 57403329, "question_id": 57403209, "link": "https://stackoverflow.com/questions/57403209/converting-to-a-non-daylight-savings-timezone/57403329#57403329", "title": "Converting to a non-daylight savings timezone", "body": "<pre><code>from datetime import datetime, timezone\n\nutc_dt = \"enter here UTC time \"\n\nutc_dt.replace(tzinfo=timezone.utc).astimezone(tz=None)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 159, "user_id": 2611761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/495885e92c23accbd03731786b3da97f?s=128&d=identicon&r=PG", "display_name": "user2611761", "link": "https://stackoverflow.com/users/2611761/user2611761"}, "edited": false, "score": 0, "creation_date": 1565280539, "post_id": 57403464, "comment_id": 101313279, "body": "This is great thanks!  The last thing I need then is a method to get the timedelta hours for a named timezone.  This function below does that step:                                                    def get_standard_time_offset(tz_name):         t = timezone(tz_name)         offset = t.utcoffset(datetime(2010,1,1))         hrsoffset = offset.total_seconds()/3600         return hrsoffset"}], "tags": [], "owner": {"reputation": 12321, "user_id": 9958942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cbfa5b660283a00f1c8b9a6ce8d67e1d?s=128&d=identicon&r=PG&f=1", "display_name": "benvc", "link": "https://stackoverflow.com/users/9958942/benvc"}, "is_accepted": true, "score": 1, "last_activity_date": 1565292961, "last_edit_date": 1565292961, "creation_date": 1565221204, "answer_id": 57403464, "question_id": 57403209, "link": "https://stackoverflow.com/questions/57403209/converting-to-a-non-daylight-savings-timezone/57403464#57403464", "title": "Converting to a non-daylight savings timezone", "body": "<p>You can specify the UTC offset for a specific time zone that does not change with daylight savings. Following example converts UTC to Pacific Standard Time (PST).</p>\n\n<pre><code>from datetime import datetime, timedelta, timezone\n\nutc = datetime(2019, 8, 7, 10, 30, tzinfo=timezone.utc)\npst = utc.astimezone(timezone(-timedelta(hours=8)))\nprint(utc)\n# 2019-08-07 10:30:00+00:00\nprint(pst)\n# 2019-08-07 02:30:00-08:00\n</code></pre>\n\n<p>To obtain the number of hours of offset for a named time zone:</p>\n\n<pre><code>import pytz                                         \ndef get_standard_time_offset(tz_name):\n    t = pytz.timezone(tz_name)\n    # DATE HERE IS AN ARBITRARY WINTER DATE THAT WOULDN'T WORK IN THE SOUTHERN HEMISPHERE\n    offset = t.utcoffset(datetime(2010,1,1))\n    hrsoffset = offset.total_seconds()/3600\n    return hrsoffset\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 2611761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/495885e92c23accbd03731786b3da97f?s=128&d=identicon&r=PG", "display_name": "user2611761", "link": "https://stackoverflow.com/users/2611761/user2611761"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 57403464, "answer_count": 2, "score": 1, "last_activity_date": 1565292961, "creation_date": 1565218651, "last_edit_date": 1565221252, "question_id": 57403209, "link": "https://stackoverflow.com/questions/57403209/converting-to-a-non-daylight-savings-timezone", "title": "Converting to a non-daylight savings timezone", "body": "<p>In python, I am trying to convert a bunch of UTC datetimes into a localized timezone but STANDARD time year round. For example, for pacific time, I need PST year round, not PDT and PST switching from summer to winter.  Or to rephrase my question, is there a way to specify 'Standard' time for a timezone?</p>\n"}, {"tags": ["python", "mysql"], "comments": [{"owner": {"reputation": 30756, "user_id": 5389997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d227900a17ca5c34bad6d2b27122c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5389997/shadow"}, "edited": false, "score": 0, "creation_date": 1565219544, "post_id": 57403200, "comment_id": 101288055, "body": "As a start I would print out the final sql query after the substitutions have been made."}, {"owner": {"reputation": 30756, "user_id": 5389997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d227900a17ca5c34bad6d2b27122c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5389997/shadow"}, "edited": false, "score": 0, "creation_date": 1565219820, "post_id": 57403200, "comment_id": 101288108, "body": "You also seem to be missing a closing parenthesis after <code>age</code>, it should be <code>age=values(age)</code>"}, {"owner": {"reputation": 19192, "user_id": 5193536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZGlox.png?s=128&g=1", "display_name": "nbk", "link": "https://stackoverflow.com/users/5193536/nbk"}, "edited": false, "score": 0, "creation_date": 1565219880, "post_id": 57403200, "comment_id": 101288123, "body": "age=VALUES(age must be age=VALUES(age) but your string doesn&#39;t look like the parameterized mysql i come to know"}, {"owner": {"reputation": 30756, "user_id": 5389997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d227900a17ca5c34bad6d2b27122c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5389997/shadow"}, "reply_to_user": {"reputation": 19192, "user_id": 5193536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZGlox.png?s=128&g=1", "display_name": "nbk", "link": "https://stackoverflow.com/users/5193536/nbk"}, "edited": false, "score": 0, "creation_date": 1565219966, "post_id": 57403200, "comment_id": 101288142, "body": "@nbk this is not a parametrized query, this is string interpolation."}, {"owner": {"reputation": 30756, "user_id": 5389997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d227900a17ca5c34bad6d2b27122c7f?s=128&d=identicon&r=PG&f=1", "display_name": "Shadow", "link": "https://stackoverflow.com/users/5389997/shadow"}, "edited": false, "score": 0, "creation_date": 1565220091, "post_id": 57403200, "comment_id": 101288167, "body": "You are also missing <code>height</code> from the field list, while you have it in the update section."}, {"owner": {"reputation": 19192, "user_id": 5193536, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZGlox.png?s=128&g=1", "display_name": "nbk", "link": "https://stackoverflow.com/users/5193536/nbk"}, "edited": false, "score": 0, "creation_date": 1565220104, "post_id": 57403200, "comment_id": 101288172, "body": "i know, but the nonsense on this page is to use parametrized statement sql imnjection and all that. besides it is easier to read"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565223181, "post_id": 57403200, "comment_id": 101288811, "body": "You can&#39;t use <code>VALUES(height)</code> if <code>height</code> isn&#39;t one of the columns you&#39;re inserting into."}], "answers": [{"tags": [], "owner": {"reputation": 458695, "user_id": 20860, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/iavmP.jpg?s=128&g=1", "display_name": "Bill Karwin", "link": "https://stackoverflow.com/users/20860/bill-karwin"}, "is_accepted": true, "score": 1, "last_activity_date": 1565237258, "last_edit_date": 1565237258, "creation_date": 1565221492, "answer_id": 57403507, "question_id": 57403200, "link": "https://stackoverflow.com/questions/57403200/use-on-duplicate-key-update-from-python/57403507#57403507", "title": "Use ON DUPLICATE KEY UPDATE from python", "body": "<p>The correct way to use parameters with Python is to pass the values in the <code>execute()</code> call, not to interpolate the values into the SQL query. </p>\n\n<p>Except for identifiers like the table name in your case.</p>\n\n<pre><code>sql_select_Query = \"\"\"\nINSERT `{0}`  (age, city, gender, UniqueId)\nVALUES (%s, %s, %s, %s)\nON DUPLICATE KEY UPDATE\n  age=VALUES(age), city=VALUES(city), gender=VALUES(gender)\n\"\"\".format(table_name)\n\ncursor.execute(sql_select_Query, ('877', '2', '1', '2898989'))\n</code></pre>\n\n<p>See also <a href=\"https://stackoverflow.com/questions/775296/mysql-parameterized-queries\">MySQL parameterized queries</a></p>\n\n<p>You forgot the <code>)</code> after <code>VALUES(age</code>. Maybe that was just a typo you made transcribing the question into Stack Overflow. I've fixed it in the example above.</p>\n\n<p>Your INSERT statement sets the <code>height</code> column, but it's not part of the tuple you insert. I removed it in the example above. If you want <code>height</code> in the UPDATE clause, then you need to include it in the tuple and pass a value in the parameters.</p>\n\n<p>Also I put back-quotes around the table name, just in case the table name is a reserved keyword or contains a space or something.</p>\n"}], "owner": {"reputation": 6193, "user_id": 4544413, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e76680e93b59e0f38238f5a0c47d1ca3?s=128&d=identicon&r=PG&f=1", "display_name": "Luis Ramon Ramirez Rodriguez", "link": "https://stackoverflow.com/users/4544413/luis-ramon-ramirez-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 57403507, "answer_count": 1, "score": 1, "last_activity_date": 1565237258, "creation_date": 1565218543, "question_id": 57403200, "link": "https://stackoverflow.com/questions/57403200/use-on-duplicate-key-update-from-python", "title": "Use ON DUPLICATE KEY UPDATE from python", "body": "<p>I'm trying to use this code to update a table on mySQL, but I'm getting error with the update part </p>\n\n<pre><code>table_name = 'my_table'\nsql_select_Query = \"\"\" \nINSERT {0}  (age, city, gender,UniqueId)\nVALUES ({1},{2},{3},{4})\nON DUPLICATE KEY UPDATE \n  age=VALUES(age,city=VALUES(city),gender=VALUES(gender),height=VALUES(height)\n\"\"\".format(table_name,  '877','2','1','2898989')\n\n    cursor = mySQLconnection .cursor()\n    cursor.execute(sql_select_Query)\n    mySQLconnection.commit()\n</code></pre>\n\n<p>For example, to update the city I get: </p>\n\n<pre><code>Unknow columns '877'\n</code></pre>\n\n<p>Hence it seems it is taking the value as a column name and search for then in my_table.</p>\n"}, {"tags": ["python", "r"], "comments": [{"owner": {"reputation": 276, "user_id": 8895717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4NRZT.jpg?s=128&g=1", "display_name": "Samantha Miller", "link": "https://stackoverflow.com/users/8895717/samantha-miller"}, "edited": false, "score": 1, "creation_date": 1565218486, "post_id": 57403177, "comment_id": 101287862, "body": "Could you extract the steps from the instructions that are relevant to your question so that we don&#39;t have to click on the link and read the entire thing?"}, {"owner": {"reputation": 55, "user_id": 10095248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eb46f300a11c417c0f134e294905069?s=128&d=identicon&r=PG&f=1", "display_name": "fargoboyDC", "link": "https://stackoverflow.com/users/10095248/fargoboydc"}, "reply_to_user": {"reputation": 276, "user_id": 8895717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4NRZT.jpg?s=128&g=1", "display_name": "Samantha Miller", "link": "https://stackoverflow.com/users/8895717/samantha-miller"}, "edited": false, "score": 0, "creation_date": 1565228270, "post_id": 57403177, "comment_id": 101289704, "body": "Great point! just specified"}, {"owner": {"reputation": 55, "user_id": 10095248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eb46f300a11c417c0f134e294905069?s=128&d=identicon&r=PG&f=1", "display_name": "fargoboyDC", "link": "https://stackoverflow.com/users/10095248/fargoboydc"}, "reply_to_user": {"reputation": 276, "user_id": 8895717, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4NRZT.jpg?s=128&g=1", "display_name": "Samantha Miller", "link": "https://stackoverflow.com/users/8895717/samantha-miller"}, "edited": false, "score": 0, "creation_date": 1565228356, "post_id": 57403177, "comment_id": 101289715, "body": "@SamanthaMiller I am basically unsure how to download these files in a way that I can access them in my  R console. IE do I need to set up a conda environment to install properly or something"}], "owner": {"reputation": 55, "user_id": 10095248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eb46f300a11c417c0f134e294905069?s=128&d=identicon&r=PG&f=1", "display_name": "fargoboyDC", "link": "https://stackoverflow.com/users/10095248/fargoboydc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565228258, "creation_date": 1565218304, "last_edit_date": 1565228258, "question_id": 57403177, "link": "https://stackoverflow.com/questions/57403177/how-to-properly-set-up-r-workspace-given-the-following-instructions", "title": "How to properly set up R workspace given the following instructions", "body": "<p>Help here would be AMAZING</p>\n\n<p>This is a specific question regarding using the following python and R libraries:</p>\n\n<p><a href=\"https://github.com/armbrustlab/popcycle/wiki/SeaFlow-data-analysis-tutorial\" rel=\"nofollow noreferrer\">https://github.com/armbrustlab/popcycle/wiki/SeaFlow-data-analysis-tutorial</a></p>\n\n<p>I am really struggling to follow the steps to get my R project running properly. I think I am just not setting things up properly... like initial downloads.</p>\n\n<p>I download and setup the python files in the terminal of my R project and then am able to access the <code>library(popcycle)</code> in R. However, I get errors when trying to run the following codes:</p>\n\n<p>I run:\n<code>save.sfl(db, cruise, sfl.file=sfl.file)</code>\nand I am told <code>In save.sfl(db, cruise, sfl.file = sfl.file) : Could not run seaflowpy</code></p>\n\n<p>I run:\n<code>seaflowpy_filter(db, cruise, evt.dir, opp.dir, process.count=4, width=0.5, offset=0)</code>\nand I am told <code>could not find function \"seaflowpy_filter\"</code></p>\n\n<p>I run:\n<code>save.filter.params(db)</code>\nand I am told <code>argument \"filter.params\" is missing, with no default</code></p>\n\n<p>Also, I checked and found that the python path being used in my R console is different to the one being used in my terminal... I tried writing <code>Sys.setenv(PATH=paste(\"/Users/&lt;username&gt;/anaconda2/bin/python\", Sys.getenv(\"PATH\"), sep=\":\"))</code> but that didn't change the path in the console...</p>\n\n<p>Here are the instructions I am struggling to do correctly, I think I need to do them in an environment maybe?:</p>\n\n<pre><code>First we need to satisfy some dependencies. Make sure Python 2.7 is installed with Anaconda. Then install the seaflowpy Python package:\n\ngit clone https://github.com/armbrustlab/seaflowpy\ncd seaflowpy\npython setup.py install\n# To test your installation\npython setup.py test\n</code></pre>\n\n<pre><code>Now download and install the popcycle R library\n\ngit clone https://github.com/uwescience/popcycle\ncd popcycle\n# This will install popcycle and automatically run some tests\nRscript setup.R\n</code></pre>\n"}, {"tags": ["python", "pytorch"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11897610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S9OsrWEHwrI/AAAAAAAAAAI/AAAAAAAAADM/oScOzOOp3Ys/photo.jpg?sz=128", "display_name": "Timmy Kwok", "link": "https://stackoverflow.com/users/11897610/timmy-kwok"}, "edited": false, "score": 0, "creation_date": 1565282116, "post_id": 57404426, "comment_id": 101314039, "body": "Thank you for helping; however, it is still remind the same problems as I showed on my Expected Image and Output Image. I am wondering that what should be the tensor shape looks like in both training images and label images."}, {"owner": {"reputation": 1, "user_id": 11897610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S9OsrWEHwrI/AAAAAAAAAAI/AAAAAAAAADM/oScOzOOp3Ys/photo.jpg?sz=128", "display_name": "Timmy Kwok", "link": "https://stackoverflow.com/users/11897610/timmy-kwok"}, "edited": false, "score": 0, "creation_date": 1565297786, "post_id": 57404426, "comment_id": 101320367, "body": "My Label image tensor is [1,1,388,388], and how can i convert to [1,183,388,388] which is  Batch,Classes,H,W"}, {"owner": {"reputation": 760, "user_id": 5027315, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q3m_s4YunKg/AAAAAAAAAAI/AAAAAAAAACo/3uRkBGYDvPY/photo.jpg?sz=128", "display_name": "asymptote", "link": "https://stackoverflow.com/users/5027315/asymptote"}, "reply_to_user": {"reputation": 1, "user_id": 11897610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S9OsrWEHwrI/AAAAAAAAAAI/AAAAAAAAADM/oScOzOOp3Ys/photo.jpg?sz=128", "display_name": "Timmy Kwok", "link": "https://stackoverflow.com/users/11897610/timmy-kwok"}, "edited": false, "score": 0, "creation_date": 1565320491, "post_id": 57404426, "comment_id": 101325068, "body": "@TimmyKwok instead of doing  this, which is space-expensive, I would suggest to use <a href=\"https://pytorch.org/docs/master/nn.html#torch.nn.NLLLoss\" rel=\"nofollow noreferrer\"><code>nn.NLLLoss</code></a>."}, {"owner": {"reputation": 1, "user_id": 11897610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S9OsrWEHwrI/AAAAAAAAAAI/AAAAAAAAADM/oScOzOOp3Ys/photo.jpg?sz=128", "display_name": "Timmy Kwok", "link": "https://stackoverflow.com/users/11897610/timmy-kwok"}, "edited": false, "score": 0, "creation_date": 1565373361, "post_id": 57404426, "comment_id": 101347841, "body": "Not Working as Well. I used it"}], "tags": [], "owner": {"reputation": 760, "user_id": 5027315, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q3m_s4YunKg/AAAAAAAAAAI/AAAAAAAAACo/3uRkBGYDvPY/photo.jpg?sz=128", "display_name": "asymptote", "link": "https://stackoverflow.com/users/5027315/asymptote"}, "is_accepted": false, "score": 0, "last_activity_date": 1565231447, "creation_date": 1565231447, "answer_id": 57404426, "question_id": 57403149, "link": "https://stackoverflow.com/questions/57403149/pytorch-image-segmentation-problems-bceloss/57404426#57404426", "title": "Pytorch Image Segmentation Problems BCELoss", "body": "<p><code>nn.BCELoss</code> expects that we have already applied sigmoid activation over logits, while <code>nn.BCEWithLogitsLoss</code> expects logits as inputs and internally applies sigmoid activation over logits before calculating binary cross entropy loss. You can have a look at this <a href=\"https://discuss.pytorch.org/t/bceloss-vs-bcewithlogitsloss/33586/4\" rel=\"nofollow noreferrer\">discussion</a>.</p>\n\n<p>So, if you want to go with <code>nn.BCELoss</code> make sure you apply activation function to logits before sending them to <code>loss_func</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 11897610, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-S9OsrWEHwrI/AAAAAAAAAAI/AAAAAAAAADM/oScOzOOp3Ys/photo.jpg?sz=128", "display_name": "Timmy Kwok", "link": "https://stackoverflow.com/users/11897610/timmy-kwok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 749, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565231447, "creation_date": 1565218073, "last_edit_date": 1565231022, "question_id": 57403149, "link": "https://stackoverflow.com/questions/57403149/pytorch-image-segmentation-problems-bceloss", "title": "Pytorch Image Segmentation Problems BCELoss", "body": "<p>Currently I am creating an Unet in order to do Image Segmentation.\nIn my Unet, the last output channel is 183 which is the classes size.\nWhen I was doing the train, It shows the following error.\nI tried the BCEWithLogitsLoss function which works for me, but it does not shows me the right output images and it slowly train to a black image, instead of GrayScale Classes Image.\n<a href=\"https://i.stack.imgur.com/zsh1S.png\" rel=\"nofollow noreferrer\">Expected image</a><a href=\"https://i.stack.imgur.com/4OSYQ.png\" rel=\"nofollow noreferrer\">OutPut Image</a></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    def Append_files():\n\n        train_folder = \"train/\"\n\n        train_label_folder = \"train_label/\"\n\n        root_dir = \"data/Train_Data/\"\n\n        ext_cond = lambda filename:filename.endswith('.png')\n        train_data = os.path.join(root_dir,train_folder)\n        train_data_path = lambda filename: True\n        train_data_label = os.path.join(root_dir,train_label_folder)\n        train_data_label_path = lambda filename: True\n        filtered_train_data = []\n        filtered_train_label_data = []\n\n        for path, _, files in os.walk(train_data):\n              files.sort()\n              for file in files:\n                  if train_data_path(file) and ext_cond(file):\n                        full_file_path = os.path.join(path,file)\n                        filtered_train_data.append(full_file_path)\n\n        for path,_,files in os.walk(train_data_label):\n              files.sort()\n              for file in files:\n                    if train_data_label_path(file) and ext_cond(file):\n                            full_file_path = os.path.join(path,file)\n                            filtered_train_label_data.append(full_file_path)\n    return filtered_train_data, filtered_train_label_data\n\ndef open_image(train_data,train_data_label):\n\n    data = Image.open(train_data)\n    data = np.array(data)\n    label = Image.open(train_data_label)\n    label = np.array(label)\n\n    return data,label\n\ndef load_dataset(train_data,train_label_data):\n\n    train_set_loader = transforms.Compose([transforms.ToPILImage(),transforms.CenterCrop(size=(572,572)),transforms.ToTensor()])\n    train_label_set_loader = transforms.Compose([transforms.ToPILImage(),transforms.CenterCrop(size=(388,388)),transforms.ToTensor()])\n\n    train_set = train_set_loader(train_data)\n    train_label_set = train_label_set_loader(train_label_data)\n\n    return train_set, train_label_set\n\n\n\n### Main\nif __name__ == '__main__':\n\n    epochs = 100\n    loss = 0\n    train_data,train_label_data = Append_files()\n    data_len = len(train_data)\n\n    model = UNet(3,183).to(device)\n\n    #loss_func = nn.BCEWithLogitsLoss()\n    loss_func = nn.BCELoss()\n    get_optimizer = torch.optim.Adam(model.parameters(),0.001,betas=(0.9,0.999),eps=0.1,weight_decay = 0,amsgrad=False)\n\n    for epoch in range(epochs):\n        print ('starting epoch{}/{}.'.format(epoch+1,epochs))\n        for i in range(data_len):\n\n            data, label = open_image(train_data[i],train_label_data[i])\n\n            train, label = load_dataset(data,label)\n\n            train = Variable(train).to(device)\n            label = Variable(label).to(device)\n\n\n            train = train.unsqueeze(0)\n            label = label.unsqueeze(0)\n\n            get_optimizer.zero_grad()                #train.shape = 1,1,388,388\n            train_real_image = model.forward(train)  #train_real_image.shape = 1,1,388,388  \n                                                     #I can change it to 1,183,388 where 183 is the class size\n\n\n        #Loss Function\n            #Label.shape = 1,1,388,388\n            loss = loss_func(train_real_image,label)\n            print (loss)\n            loss.backward()\n            get_optimizer.step()\n\n</code></pre>\n\n<pre><code>/opt/conda/conda-bld/pytorch_1556653183467/work/aten/src/THCUNN/BCECriterion.cu:42: Acctype bce_functor&lt;Dtype, Acctype&gt;::operator()(Tuple) [with Tuple = thrust::detail::tuple_of_iterator_references&lt;thrust::device_reference&lt;float&gt;, thrust::device_reference&lt;float&gt;, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type&gt;, Dtype = float, Acctype = float]: block: [23,0,0], thread: [28,0,0] Assertion `input &gt;= 0. &amp;&amp; input &lt;= 1.` failed.\n/opt/conda/conda-bld/pytorch_1556653183467/work/aten/src/THCUNN/BCECriterion.cu:42: Acctype bce_functor&lt;Dtype, Acctype&gt;::operator()(Tuple) [with Tuple = thrust::detail::tuple_of_iterator_references&lt;thrust::device_reference&lt;float&gt;, thrust::device_reference&lt;float&gt;, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type&gt;, Dtype = float, Acctype = float]: block: [23,0,0], thread: [29,0,0] Assertion `input &gt;= 0. &amp;&amp; input &lt;= 1.` failed.\n/opt/conda/conda-bld/pytorch_1556653183467/work/aten/src/THCUNN/BCECriterion.cu:42: Acctype bce_functor&lt;Dtype, Acctype&gt;::operator()(Tuple) [with Tuple = thrust::detail::tuple_of_iterator_references&lt;thrust::device_reference&lt;float&gt;, thrust::device_reference&lt;float&gt;, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type, thrust::null_type&gt;, Dtype = float, Acctype = float]: block: [23,0,0], thread: [31,0,0] Assertion `input &gt;= 0. &amp;&amp; input &lt;= 1.` failed.\n\nRuntimeError: reduce failed to synchronize: device-side assert triggered\n</code></pre>\n"}, {"tags": ["python", "django", "django-forms", "formset"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11784202, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zJTWHcfYR40/AAAAAAAAAAI/AAAAAAAACnA/8172DIvtSkA/photo.jpg?sz=128", "display_name": "mythric", "link": "https://stackoverflow.com/users/11784202/mythric"}, "edited": false, "score": 0, "creation_date": 1565234977, "post_id": 57403465, "comment_id": 101290875, "body": "Okay thank you for the help! I will try this fix and see what happens, and update - thanks!"}], "tags": [], "owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "is_accepted": false, "score": 0, "last_activity_date": 1565221206, "creation_date": 1565221206, "answer_id": 57403465, "question_id": 57403087, "link": "https://stackoverflow.com/questions/57403087/django-modelformset-clicking-submit-saves-form-but-does-not-update-to-database/57403465#57403465", "title": "Django ModelFormSet clicking &quot;Submit&quot; saves form but does not update to database", "body": "<p>Not sure if something else is also wrong, but your view doesn't instantiate your formset well. Try with the following code:</p>\n\n<pre><code>EntryFormSet = modelformset_factory(Entry, EntryForm, extra=0)    \nif request.method == 'POST':\n    entry_formset=EntryFormSet(data=request.POST)\n    if entry_formset.is_valid():\n        entry_formset.save()  # this will save all the instances\nelse:\n    set_obj=Set.objects.get(id=set_id)      \n    entry_list = set_obj.entry_set.order_by(\"term\")\n    entry_formset=EntryFormSet(queryset=entry_list)\n\nreturn render(request, 'dictTemplates/editEntries.html', {'entry_formset': entry_formset})\n</code></pre>\n\n<p>If you want you may assign return value to formset save like <code>instances = entry_formset.save()</code> and debug which instances are saved (that returned value will be a list of those that are saved to database) by passing it to template together with formset in context and show the value in template.</p>\n"}], "owner": {"reputation": 11, "user_id": 11784202, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-zJTWHcfYR40/AAAAAAAAAAI/AAAAAAAACnA/8172DIvtSkA/photo.jpg?sz=128", "display_name": "mythric", "link": "https://stackoverflow.com/users/11784202/mythric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565221206, "creation_date": 1565217571, "question_id": 57403087, "link": "https://stackoverflow.com/questions/57403087/django-modelformset-clicking-submit-saves-form-but-does-not-update-to-database", "title": "Django ModelFormSet clicking &quot;Submit&quot; saves form but does not update to database", "body": "<p><b>Background:</b>\nI'm building a personal dictionary web-application, and have a queryset of terms and definitions. In my web app, I have an edit page, where I want to show a ModelFormSet that allows the user to edit any/all entries, and delete them if needed - the form has a delete button for each row and a submit button to save changes to the form.</p>\n\n<p>The <b>current issue is that when I click on a set to edit, the formset shows up correctly, and when I change a term and hit \"Submit\" the form updates to show the change. However, when I go back to my \"View Set\" page, the term hasn't been updated, which I assume means the change didn't go through to the actual database - the form itself was simply submitted</b>. This is what I would like to currently fix, and I also want to make it so that the delete button deletes the entry. </p>\n\n<p><b>What I've Tried:</b>\nI've gone through every StackOverflow question I could find relating to the topic, and various solutions were: add an instance parameter when passing in \"request.POST\", re-initialize the formset after saving, change the \"action\" url in the HTML page, etc., but every solution I try either results in another error or doesn't change anything.</p>\n\n<p>I also checked the documentation but the examples provided were for simpler examples, and I'm not sure where exactly my error is in this case.</p>\n\n<p>Finally, I also used {{ form.errors }} to see if the forms were being validated, and this resulted in an empty bracket and no issues, so I <em>think</em> I know for sure that the form is being validated, and the POST request is working.</p>\n\n<p><b>Code:</b>\nMODELS.PY</p>\n\n<pre><code>class Set(models.Model):\n    title = models.CharField(max_length = 64, null = False, blank = False)\n    description = models.CharField(max_length = 255, null = False, blank = True)\n\n    def __str__(self):\n        return self.title \n\n\nclass Entry(models.Model):\n    set = models.ForeignKey(Set, on_delete=models.CASCADE)\n    term = models.TextField()\n    definition = models.TextField()\n\n    def __str__(self):\n        return self.term\n</code></pre>\n\n<p>FORMS.PY </p>\n\n<pre><code>from django.forms import ModelForm\nfrom django.forms.models import modelformset_factory\nfrom .models import Set, Entry\n\nclass SetForm(ModelForm):       # Form that maps to Set\n\n    class Meta: \n        model = Set\n        fields = ['title', 'description']\n\nclass EntryForm(ModelForm):\n    class Meta: \n        model = Entry\n        fields = ['set', 'term', 'definition']\n</code></pre>\n\n<p>VIEWS.PY</p>\n\n<pre><code>def editEntry(request, set_id):\n        EntryFormSet = modelformset_factory(Entry, EntryForm, extra=0)\n        set_obj=Set.objects.get(id=set_id)      \n        entry_list = set_obj.entry_set.order_by(\"term\")\n        entry_formset=EntryFormSet(queryset=entry_list)\n\n        if request.method == 'POST':\n            instances=entry_formset.save()\n                for instance in instances:\n                        instance.save()\n                        entry_formset = EntryFormSet(queryset=instances)\n        else: \n            entry_formset = EntryFormSet(queryset=entry_list)#formset_factory(entry_form)\n        return render (request, 'dictTemplates/editEntries.html', {'entry_formset': entry_formset})\n</code></pre>\n\n<p>EDIT ENTRIES.HTML</p>\n\n<pre><code>&lt;h1 style=\"text-align:center\"&gt;&lt;strong&gt;&lt;/center&gt;Edit Entries Page&lt;/strong&gt;&lt;/h1&gt;\n\n\n        &lt;form method=\"POST\" action = \"\"&gt;\n            {% csrf_token %}\n\n            {{ entry_formset.management_form }}\n        &lt;center&gt;&lt;table id=\"entriesFormSet\" class=\"table\"&gt; \n                &lt;input type =\"submit\" value =\"Submit Form\"&gt;\n                &lt;tr&gt;\n                    &lt;th&gt;&lt;h3&gt;Terms&lt;/h3&gt;&lt;/th&gt;\n                    &lt;th&gt;&lt;h3&gt;Definitions&lt;/h3&gt;&lt;/th&gt;\n                &lt;/tr&gt;\n                &lt;tbody&gt;\n                        {% for form in entry_formset %}\n                            &lt;tr&gt;\n                                &lt;td&gt;{{ form.term }}&lt;/td&gt;\n                                &lt;td&gt;{{ form.definition }}&lt;/td&gt;\n                                &lt;td class=\"delete-entry-button\"&gt;&lt;input type = \"submit\" value = \"Delete Term\"&gt;&lt;/td&gt;\n                            &lt;/tr&gt;\n                        {% endfor %}\n                &lt;/tbody&gt;\n            &lt;/table&gt;&lt;/center&gt;\n        &lt;/form&gt;\n</code></pre>\n\n<p>URLS.PY</p>\n\n<pre><code>urlpatterns = [\n    path('', views.home, name='Home'),\n    path('about/', views.about, name='About'),\n    path('sets/', views.sets, name='Sets'),\n    path('sets/create/', views.createSet, name='createSet'),\n    path('sets/edit/(?P&lt;set_id&gt;[\\d]+)', views.editSet, name='editSet'),\n    path('sets/delete/(?P&lt;set_id&gt;[\\d]+)', views.deleteSet, name='deleteSet'), \n    path('sets/view/(?P&lt;set_id&gt;[\\d]+)', views.viewSet, name='viewSet'),\n    path('entrys/create/(?P&lt;set_id&gt;[\\d]+)', views.createEntry, name='createEntry'),\n    path('entrys/edit/(?P&lt;set_id&gt;[\\d]+)', views.editEntry, name='editEntry'),\n    path('entrys/delete/(?P&lt;entry_id&gt;[\\d]+)', views.deleteEntry, name='deleteEntry'),\n]\n</code></pre>\n\n<p>The desired result is that clicking \"Submit\" results in an updated form plus changes in the database, but right now, clicking \"Submit\" only results in an updated form at that moment - clicking to another page or any other action makes the form revert to the original state. </p>\n\n<p><b>I think the problem is that my Submit button somehow isn't \"mapping\" to saving the form into the database, that there's a missing connection there somewhere, but I'm not sure how to find it.</b></p>\n\n<p>Please let me know if I should format/post this question differently, as it's my first SO question. Thank you so much!! Any help would be very much appreciated!</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1565217494, "post_id": 57403056, "comment_id": 101287641, "body": "include your desired output so we are clear on what you want"}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 1, "creation_date": 1565217546, "post_id": 57403056, "comment_id": 101287656, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/35491274/pandas-split-column-of-lists-into-multiple-columns\">Pandas split column of lists into multiple columns</a>"}, {"owner": {"reputation": 31306, "user_id": 9081267, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/1knzv.jpg?s=128&g=1", "display_name": "Erfan", "link": "https://stackoverflow.com/users/9081267/erfan"}, "edited": false, "score": 1, "creation_date": 1565217676, "post_id": 57403056, "comment_id": 101287687, "body": "Dont use <code>apply(pd.Series)</code>. It&#39;s really slow. Use; <code>df.iloc[:, :1].join(pd.DataFrame(df[&#39;location&#39;].values.tolist()))</code>"}], "answers": [{"tags": [], "owner": {"reputation": 561, "user_id": 5012385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gcadm.jpg?s=128&g=1", "display_name": "Djaballah DJEDID", "link": "https://stackoverflow.com/users/5012385/djaballah-djedid"}, "is_accepted": true, "score": 0, "last_activity_date": 1565217471, "creation_date": 1565217471, "answer_id": 57403080, "question_id": 57403056, "link": "https://stackoverflow.com/questions/57403056/apply-pd-series-by-saving-another-column/57403080#57403080", "title": "Apply pd.Series by saving another column", "body": "<pre><code>df = pd.concat([df, b], axis=1)\ndf = df.drop(labels=['location'], axis=1)\n</code></pre>\n"}], "owner": {"reputation": 874, "user_id": 11852936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9f4ecd4e5383310dffcf36f8076b56e?s=128&d=identicon&r=PG&f=1", "display_name": "Mamed", "link": "https://stackoverflow.com/users/11852936/mamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 57403080, "answer_count": 1, "score": 1, "last_activity_date": 1565219036, "creation_date": 1565217302, "question_id": 57403056, "link": "https://stackoverflow.com/questions/57403056/apply-pd-series-by-saving-another-column", "title": "Apply pd.Series by saving another column", "body": "<p>My initial df is:</p>\n\n<p>df = </p>\n\n<pre><code>    ID  location\n0   141     [(45.1024, 7.7498), (45.1027, 7.75), (45.1072,...\n1   403     [(45.0595, 7.6829), (45.0595, 7.6829), (45.056...\n2   920     [(45.0695, 7.5454), (44.9727, 7.666), (44.9726..\n</code></pre>\n\n<p>after applying <code>b = df['location'].apply(pd.Series)</code> I get </p>\n\n<pre><code>1                   2                   3                    4\n(45.1024, 7.7498)   (45.1027, 7.75)     (45.1072, 7.7568)   (45.1076, 7.7563)\n...\n</code></pre>\n\n<p>I get partially what I want. But I'm loosing my column 'ID'. How I can save it and apply <code>pd.Series</code>?</p>\n"}, {"tags": ["python", "python-3.x", "csv", "itertools"], "comments": [{"owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1565217588, "post_id": 57403048, "comment_id": 101287666, "body": "You&#39;re probably best writing two loops instead of trying to filter the products."}, {"owner": {"reputation": 111, "user_id": 11417917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ac31b966f02710a98bc7999e7de945b?s=128&d=identicon&r=PG&f=1", "display_name": "Uki.", "link": "https://stackoverflow.com/users/11417917/uki"}, "reply_to_user": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "edited": false, "score": 0, "creation_date": 1565217724, "post_id": 57403048, "comment_id": 101287702, "body": "It&#39;s the same thing, not working if I use two for loops like in other programming languages."}], "answers": [{"tags": [], "owner": {"reputation": 21133, "user_id": 1084416, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/RLhZZ.jpg?s=128&g=1", "display_name": "Peter Wood", "link": "https://stackoverflow.com/users/1084416/peter-wood"}, "is_accepted": false, "score": 1, "last_activity_date": 1565217766, "creation_date": 1565217766, "answer_id": 57403108, "question_id": 57403048, "link": "https://stackoverflow.com/questions/57403048/is-there-a-way-to-skip-a-value-from-itertools-product-loop-in-python/57403108#57403108", "title": "Is there a way to skip a value from itertools.product loop in Python?", "body": "<p>Just write two loops and break out of the inner loop to continue the outer loop:</p>\n\n<pre><code>addresses1 = [\"Address1\", \"Address2\", \"Address3\", \"Address4\"]\naddresses2 = [\"compAddress1\", \"compAddress2\", \"compAddress3\", \"compAddress4\", \"compAddress5\"]\n\nfor a in addresses1:\n    for b in addresses2:\n        BLOCK OF CODE WITH GEOLOCATIONS\n\n        if(distance == 1km):\n            print(\"Addresses are within 1km from each other, move on next one\")\n            break\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 11417917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ac31b966f02710a98bc7999e7de945b?s=128&d=identicon&r=PG&f=1", "display_name": "Uki.", "link": "https://stackoverflow.com/users/11417917/uki"}, "edited": false, "score": 0, "creation_date": 1565218068, "post_id": 57403114, "comment_id": 101287784, "body": "Finally working. Really unbelievable... I cannot imagine how a stupid miss."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "reply_to_user": {"reputation": 111, "user_id": 11417917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ac31b966f02710a98bc7999e7de945b?s=128&d=identicon&r=PG&f=1", "display_name": "Uki.", "link": "https://stackoverflow.com/users/11417917/uki"}, "edited": false, "score": 1, "creation_date": 1565223790, "post_id": 57403114, "comment_id": 101288919, "body": "Most of us <i>can</i> imagine -- we&#39;ve been there.  How do you think I recognized this one?  :-)"}], "tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1565217799, "creation_date": 1565217799, "answer_id": 57403114, "question_id": 57403048, "link": "https://stackoverflow.com/questions/57403048/is-there-a-way-to-skip-a-value-from-itertools-product-loop-in-python/57403114#57403114", "title": "Is there a way to skip a value from itertools.product loop in Python?", "body": "<p>You missed the applicable solution from the duplicate you cited.  You need to <code>break</code> the inner loop; this will naturally continue the outer loop:</p>\n\n<pre><code>for a in addresses_1:\n    for b in addresses_2:\n        if distance(a, b) &lt;= 1.00:\n            print(a, b, \"are within 1 km\")\n            break\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 11417917, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ac31b966f02710a98bc7999e7de945b?s=128&d=identicon&r=PG&f=1", "display_name": "Uki.", "link": "https://stackoverflow.com/users/11417917/uki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 57403114, "answer_count": 2, "score": 0, "last_activity_date": 1565223311, "creation_date": 1565217232, "last_edit_date": 1565223311, "question_id": 57403048, "link": "https://stackoverflow.com/questions/57403048/is-there-a-way-to-skip-a-value-from-itertools-product-loop-in-python", "title": "Is there a way to skip a value from itertools.product loop in Python?", "body": "<p>I'm making a script which compares the distance between two addresses, those addresses are stored in two different .csv files together combined with <code>itertools.product</code>. </p>\n\n<p>Comparing is an <code>if</code> condition which checks if addresses are 1km away from each other. </p>\n\n<p>Every address from <code>addresses1</code> needs to be compared with every address from <code>addresses2</code>. </p>\n\n<p>If the address in <code>addresses1</code> is 1km away from the address in <code>addresses2</code> it <strong>needs to move on the next comparing.</strong> Because the lists are too long, it's wasting of time to wait to move on the next one. - And that's the problem.</p>\n\n<p>I tried with <code>continue</code> but it's not working.</p>\n\n<p>Let's say I have two lists of addresses:</p>\n\n<pre><code>addresses1 = [\"Address1\",\"Address2\",\"Address3\",\"Address4\"]\naddresses2 = [\"compAddress1\",\"compAddress2,\"compAddress3\",\"compAddress4\",\"compAddress5\"]\n\nproducted_list = list(itertools.product(addresses1, addresses2))\n\nfor a,b in producted_list:\n    BLOCK OF CODE WITH GEOLOCATIONS\n\n    if(distance == 1km):\n        print(\"Addresses are within 1km from each other, move on next one\")\n        continue\n\n</code></pre>\n\n<p>Let's see how it's comparing:</p>\n\n<pre><code>a[0] -&gt; b[0]\na[0] -&gt; b[1]\na[0] -&gt; b[2]\na[0] -&gt; b[3]\na[0] -&gt; b[4]\n\na[1] -&gt; b[0]\na[1] -&gt; b[1]\na[1] -&gt; b[2]\na[1] -&gt; b[3]\na[1] -&gt; b[4]\n\na[2] -&gt; b[0]\na[2] -&gt; b[1]\na[2] -&gt; b[2]\na[2] -&gt; b[3]\na[2] -&gt; b[4]\n.\n.\n.\n</code></pre>\n\n<p>Let's say that <code>a[1]</code> is matched with <code>b[0]</code>, I want to immediately move on the <code>a[2]</code> without continuing with <code>a[1]</code> comparing with the rest of <code>b[]</code></p>\n\n<p>I've tried to use the code from Eric <a href=\"https://stackoverflow.com/a/14829934/11417917\">https://stackoverflow.com/a/14829934/11417917</a></p>\n\n<p>with </p>\n\n<pre><code>for a in b:\n    def doWork():\n        for c in d:\n                if somecondition:\n                    return # &lt;continue the for a in b loop?&gt;\n    doWork()\n</code></pre>\n\n<p>But it's not working, it interrupts, either it needs changing.</p>\n"}, {"tags": ["python", "web-scraping", "request", "python-requests"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565217395, "post_id": 57403037, "comment_id": 101287618, "body": "it is good to set user-agent header from real browser. Normally request sends text &quot;Python...&quot; so it is easy to recognize bot/script and block it. It is also good to execute <code>session.get(...)</code> at start (like human would do) to get new cookies from server."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565217478, "post_id": 57403037, "comment_id": 101287638, "body": "different pages may use different methods to block scripts/bots. Sometimes they use so many JavaScript that it is much easier to use Selenium."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1565217924, "post_id": 57403037, "comment_id": 101287746, "body": "and more important - send correct FIELDS to correct URL. In your code both are incorrect. Use <code>DevTools</code> in Chrome/Firefox to see all requests from browser to server."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11898771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720b7e96be7e42950b4c936c400d59ee?s=128&d=identicon&r=PG&f=1", "display_name": "gautham_ram_p", "link": "https://stackoverflow.com/users/11898771/gautham-ram-p"}, "edited": false, "score": 0, "creation_date": 1565218728, "post_id": 57403179, "comment_id": 101287919, "body": "Hey thanks. This worked. And yeah I noticed that I had absent-mindedly used  the id  of the field instead of the name. May I know where you got the actual URL from. Because usually to make use of the site, I use the URL I specified and thought it&#39;d be the same."}, {"owner": {"reputation": 13, "user_id": 11898771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720b7e96be7e42950b4c936c400d59ee?s=128&d=identicon&r=PG&f=1", "display_name": "gautham_ram_p", "link": "https://stackoverflow.com/users/11898771/gautham-ram-p"}, "edited": false, "score": 0, "creation_date": 1565219241, "post_id": 57403179, "comment_id": 101288014, "body": "Never mind, just found it in the action in the form tag. Thanks anyways for pointing out where I went wrong. Since you mentioned Selenium, is there any way to scrape a data of a user using the credentials without them knowing that the data is scraped, like without the web driver opening in their windows."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 13, "user_id": 11898771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720b7e96be7e42950b4c936c400d59ee?s=128&d=identicon&r=PG&f=1", "display_name": "gautham_ram_p", "link": "https://stackoverflow.com/users/11898771/gautham-ram-p"}, "edited": false, "score": 0, "creation_date": 1565219332, "post_id": 57403179, "comment_id": 101288024, "body": "I used DevTools which is built-in in Chrome/Firefox. In tab &quot;Network&quot; it shows all requests send from client to server. And responses"}, {"owner": {"reputation": 172, "user_id": 7730795, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/SxxsT.png?s=128&g=1", "display_name": "Chakma", "link": "https://stackoverflow.com/users/7730795/chakma"}, "edited": false, "score": 0, "creation_date": 1594362089, "post_id": 57403179, "comment_id": 111104398, "body": "for <code>url = (&#39;https:&#47;&#47;fantasy.premierleague.com&#47;api&#47;my-team&#47;{teamid}&#47;&#39;)</code> I am can&#39;t access the json. it says, <code>credentials are not provided</code>. Does it mean I have not logged in yet? But I used the above code to get response 200. How can i solve it?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1594375670, "post_id": 57403179, "comment_id": 111110588, "body": "response 200 means only that server recognized URL and it know how to send answer - it doens&#39;t mean you are logged in. You should rather check if there in some element in HTML which exists only when you logged in - ie. your name or login"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1594378127, "post_id": 57403179, "comment_id": 111111735, "body": "BTW: few days ago was question <a href=\"https://stackoverflow.com/questions/62521126/table-web-scraping-issues-with-python/\">Table Web Scraping Issues with Python</a> for the same page"}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 0, "last_activity_date": 1594377596, "last_edit_date": 1594377596, "creation_date": 1565218323, "answer_id": 57403179, "question_id": 57403037, "link": "https://stackoverflow.com/questions/57403037/how-to-overcome-405-error-on-logging-in-a-site-from-python-requests/57403179#57403179", "title": "How to overcome 405 error on logging in a site from Python requests", "body": "<p>Your problem is that you send wrong <code>FIELDS</code> to wrong <code>URL</code>.</p>\n<p>Using <code>DevTools</code> in Chrome/Firefox you can see that browser sends fields <code>login</code>, <code>password</code> (instead of <code>loginUsername</code>, <code>loginPassword</code>) to <code>https://users.premierleague.com/accounts/login/</code></p>\n<pre><code>import requests\n\nsession = requests.Session()\n\n#session.headers.update({'user-agent': 'Mozilla/5.0'})\n\ndata = {\n     &quot;login&quot; : &quot;james.bond@mi6.com&quot;, \n     &quot;password&quot; : &quot;007&quot;, \n     &quot;app&quot; : &quot;plfpl-web&quot;, \n     &quot;redirect_uri&quot; : &quot;https://fantasy.premierleague.com&quot;\n}\n\n#url = &quot;https://fantasy.premierleague.com&quot;\n#r = session.get(url)\n#print(r.status_code)\n\nurl = &quot;https://users.premierleague.com/accounts/login/&quot;\nr = session.post(url, data=data)\nprint(r.status_code) # 200\n#print(r.text)\n</code></pre>\n<p>Many times it is good to use User-Agent header from real browser - or at least <code>'Mozilla/5.0'</code> and get main page to get fresh cookies. For this pages it wasn't needed but I keep code in comments.</p>\n<hr />\n<p><strong>EDIT:</strong> (2020.07.10)</p>\n<p>Code to login.</p>\n<p>BTW: After correct login server redirects to different URL so I use this fact to check if I'm logged in.</p>\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nsession = requests.Session()\n#session.headers.update({'user-agent': 'Mozilla/5.0'})\n\nlogin_url = &quot;https://users.premierleague.com/accounts/login/&quot;\n\n# GET page with form\nr = session.get(login_url, data=data)\nsoup = BeautifulSoup(r.content)\n\ndata = {\n     &quot;login&quot; : &quot;your_login&quot;, \n     &quot;password&quot; : &quot;your_password&quot;, \n}\n\n# get values from form (except empty places for login and password)\nfor item in soup.find_all('input'):\n    key = item['name']\n    value = item.get('value') # I use get('value') instead of ['value'] to get None instead of error when there is no value like for login and password.\n    if value:\n        data[key] = value\n    print(key, '=', value)\n    \n# POST form data to login\nr = session.post(login_url, data=data)\n\n# check if url is different\nprint(r.url)\nprint(r.url != login_url)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11898771, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720b7e96be7e42950b4c936c400d59ee?s=128&d=identicon&r=PG&f=1", "display_name": "gautham_ram_p", "link": "https://stackoverflow.com/users/11898771/gautham-ram-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 57403179, "answer_count": 1, "score": 1, "last_activity_date": 1594377596, "creation_date": 1565217117, "question_id": 57403037, "link": "https://stackoverflow.com/questions/57403037/how-to-overcome-405-error-on-logging-in-a-site-from-python-requests", "title": "How to overcome 405 error on logging in a site from Python requests", "body": "<p>I've been trying to scrape data from Fantasy Premier League (<a href=\"https://fantasy.premierleague.com\" rel=\"nofollow noreferrer\">https://fantasy.premierleague.com</a>) and when I try to login through requests module in Python, I get the 405 error. </p>\n\n<p>To get the data I need, first I need to log-in to the site. So, I manually entered my username and password in a json format after getting the ids from the webpage. I also included the hidden fields the form required. I created a Session variable and sent a post request to the the site with this data variable for the data parameter, </p>\n\n<pre><code>import requests\n\nsession = requests.Session()\ndata = {\n            \"loginUsername\" : \"username\", \n            \"loginPassword\" : \"password\", \n            \"app\" : \"plfpl-web\", \n            \"redirect_uri\" : \"https://fantasy.premierleague.com/\"\n       }\n\nurl = \"https://fantasy.premierleague.com/\"\n\nlogin = session.post(url, data = data)\n\nprint(login.text)\n</code></pre>\n\n<p>And I get the following output</p>\n\n<pre><code>&lt;html&gt;\n&lt;head&gt;&lt;title&gt;405 Not Allowed&lt;/title&gt;&lt;/head&gt;\n&lt;body bgcolor=\"white\"&gt;\n&lt;center&gt;&lt;h1&gt;405 Not Allowed&lt;/h1&gt;&lt;/center&gt;\n&lt;hr&gt;&lt;center&gt;nginx/1.13.5&lt;/center&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I tried the same method for different sites, such as Twitter and got either 405 or 403 error message like above. </p>\n\n<p>What can I change to get the request successfully?\nI know I can use Selenium, but I'm planning on making a small project and distributing to others and I want the data scraping to happen without the browser drivers.</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 394, "user_id": 8228233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rn5Oy.png?s=128&g=1", "display_name": "Jeremy Hue", "link": "https://stackoverflow.com/users/8228233/jeremy-hue"}, "edited": false, "score": 0, "creation_date": 1565217192, "post_id": 57403025, "comment_id": 101287570, "body": "Have you tried doing <code>cs.execute</code> on a single triple-quote string? That gives you a bit more flexibility in using single/double quotes in the query itself."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1565217197, "post_id": 57403025, "comment_id": 101287576, "body": "Are you sure this is your real query?  You have <code>select * from FROM ...</code>"}, {"owner": {"reputation": 647, "user_id": 6083404, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/TJY7F.jpg?s=128&g=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/6083404/ravi"}, "edited": false, "score": 0, "creation_date": 1565217410, "post_id": 57403025, "comment_id": 101287623, "body": "I am not sure how to use the single triple-quote string in this case"}, {"owner": {"reputation": 647, "user_id": 6083404, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/TJY7F.jpg?s=128&g=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/6083404/ravi"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1565217444, "post_id": 57403025, "comment_id": 101287627, "body": "@JohnGordon Fixed the type, yes this is the actual query, i just removed the column names"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565219679, "post_id": 57403025, "comment_id": 101288079, "body": "Change <code>LIKE &#39;W_%&#39;</code> to <code>LIKE &#39;W_%%&#39;</code> and <code>NOT LIKE &#39;%@%&#39; to </code>NOT LIKE &#39;%%@%%&#39;`"}], "owner": {"reputation": 647, "user_id": 6083404, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/TJY7F.jpg?s=128&g=1", "display_name": "Ravi", "link": "https://stackoverflow.com/users/6083404/ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "closed_date": 1565219596, "answer_count": 0, "score": 0, "last_activity_date": 1565219496, "creation_date": 1565217028, "last_edit_date": 1565217376, "question_id": 57403025, "link": "https://stackoverflow.com/questions/57403025/python-sql-throws-error-for-single-quote-like", "closed_reason": "Duplicate", "title": "Python SQL throws error for single quote like", "body": "<p>I am executing a query in python using cs.execute() and I have a bunch of like clauses which is throwing an error. Below is the query:</p>\n\n<pre><code>cs.execute(\"select * from \"\n\"production.finance.invoice_transactions a \"\n\"inner join production.core.merchant_info b \"\n\"WHERE  a.status IN ( 'refundSettledSuccessfully', 'returnedItem' ) \"\n\"AND b.mid_partner_id in (%s) \"\n\"AND a.customer_profile_id LIKE 'W_%' \"\n\"AND a.customer_profile_id NOT LIKE '%@%' \"\n\"AND to_date(settle_time_local) between %s and %s \"\n\"AND to_date(b.created_at) = %s \", (id, dt1, dt2, dt1))\n</code></pre>\n\n<p>I am getting the error at the lines where I have the like clause. I have confirmed this by removing the like clause and the query executes successfully. I am not sure how I can resolve this error. The error specifically says its due to the single quotes. Below is the error.</p>\n\n<p><code>ValueError: unsupported format character ''' (0x27) at index 1754</code></p>\n"}, {"tags": ["python", "python-3.x", "math"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 1, "creation_date": 1565219675, "post_id": 57403000, "comment_id": 101288076, "body": "Why not use Euclid&#39;s algorithm? And you&#39;ve computed the answer as a list, just take the last element and you&#39;re done, no? Or don&#39;t bother creating a list, just save the latest factor you&#39;ve found and you&#39;re done. Best yet, use <code>from fractions import gcd</code> and <code>gcd(10, 20)</code>. See <a href=\"https://stackoverflow.com/a/11175154/6243352\">this</a>."}, {"owner": {"reputation": 11, "user_id": 11832308, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ywE6D16IEU4/AAAAAAAAAAI/AAAAAAAAACA/E28K82RQdRk/photo.jpg?sz=128", "display_name": "SSJGOLEM", "link": "https://stackoverflow.com/users/11832308/ssjgolem"}, "reply_to_user": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1565219869, "post_id": 57403000, "comment_id": 101288121, "body": "I tried printing list_fac[-1] at the very end, but still it returned 2 and then 10, i think it is in some sort of loop."}, {"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1565220018, "post_id": 57403000, "comment_id": 101288155, "body": "Works fine for me. <a href=\"https://repl.it/repls/EmotionalSubstantialMolecule\" rel=\"nofollow noreferrer\">repl.it/repls/EmotionalSubstantialMolecule</a>. The Euclid algorithm is a three-liner though and far more efficient, or just use the builtin. Recommend."}, {"owner": {"reputation": 11, "user_id": 11832308, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ywE6D16IEU4/AAAAAAAAAAI/AAAAAAAAACA/E28K82RQdRk/photo.jpg?sz=128", "display_name": "SSJGOLEM", "link": "https://stackoverflow.com/users/11832308/ssjgolem"}, "reply_to_user": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1565220465, "post_id": 57403000, "comment_id": 101288246, "body": "I figured it out, my program loops, instead waiting to file through all the factors, as soon as it finds a factor that is a factor of both numbers, it prints. I just have to get the program to loop until it process all factors. Thanks ggorlen"}], "answers": [{"tags": [], "owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "is_accepted": false, "score": -1, "last_activity_date": 1565223774, "last_edit_date": 1565223774, "creation_date": 1565221227, "answer_id": 57403469, "question_id": 57403000, "link": "https://stackoverflow.com/questions/57403000/my-gcf-gcd-program-is-returning-an-extra-number/57403469#57403469", "title": "My GCF/GCD program is returning an extra number", "body": "<p>This code is essentially correct. You have your answer at <code>list_fac[-1]</code>, if it isn't 1. You can fix this by iterating from <code>range(1, x + 1)</code>:</p>\n\n<pre><code>def gcf(num1, num2):\n    list_fac = []\n    x = max(num1, num2)\n    y = min(num1, num2)\n\n    for i in range(1, x + 1):\n        if x % i == 0:\n            list_fac.append(i)\n\n            for t in list_fac:\n                if y % t != 0:\n                    list_fac.remove(t)\n\n    return list_fac[-1] if list_fac else 0\n\nif __name__ == \"__main__\":\n    print(gcf(10, 20)) # =&gt; 10\n</code></pre>\n\n<p>However, the code is inefficient and difficult to follow. For example, the inner loop does not need to iterate twice over <code>list_fac</code> (<code>list.remove()</code> traverses the whole list). </p>\n\n<p>You only need consider whether the last element added is also divisible by zero. Nor is it necessary to keep the entire list in memory since we only care about the last thing added (largest element so far):</p>\n\n<pre><code>def gcf(num1, num2):\n    greatest = 0\n    x = max(num1, num2)\n    y = min(num1, num2)\n\n    for i in range(1, x + 1):\n        if x % i == 0 and y % i == 0:\n            greatest = i\n\n    return greatest\n</code></pre>\n\n<p>I recommend using the <a href=\"https://en.wikipedia.org/wiki/Euclidean_algorithm\" rel=\"nofollow noreferrer\">Euclidean Algorithm</a> as follows (see the linked article or <a href=\"https://stackoverflow.com/questions/3980416/time-complexity-of-euclids-algorithm\">this thread</a> for details on why the complexity is an improvement on linear):</p>\n\n<pre><code>def gcd(a, b):\n    while b:\n        a, b = b, a % b\n\n    return a\n</code></pre>\n\n<p>Even easier, the folks at Python have a builtin:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Python 3.7.2 (default, Mar 11 2019, 20:44:31)\n[GCC 4.8.4] on linux\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from math import gcd\n&gt;&gt;&gt; gcd(10, 20)\n10\n</code></pre>\n\n<pre class=\"lang-none prettyprint-override\"><code>Python 3.4.3 (v3.4.3:9b73f1c3e601, Feb 24 2015, 22:43:06) [MSC v.1600 32 bit (Intel)] on win32\nType \"help\", \"copyright\", \"credits\" or \"license\" for more information.\n&gt;&gt;&gt; from fractions import gcd\n&gt;&gt;&gt; gcd(10, 20)\n10\n</code></pre>\n\n<p>Here's a quick test validating your routine:</p>\n\n<pre><code>from random import randint\nfrom math import gcd\n\ndef gcf(num1, num2):\n    list_fac = []\n    x = max(num1, num2)\n    y = min(num1, num2)\n\n    for i in range(1, x + 1):\n        if x % i == 0:\n            list_fac.append(i)\n\n            for t in list_fac:\n                if y % t != 0:\n                    list_fac.remove(t)\n\n    return list_fac[-1] if list_fac else 0\n\nif __name__ == \"__main__\":\n    passes = 0\n    tests = 10000\n\n    for i in range(tests):\n        a, b = randint(0, 100), randint(0, 100)\n\n        if gcd(a, b) == gcf(a, b):\n            passes += 1\n\n    print(f\"{passes}/{tests} passed\") # =&gt; 10000/10000 passed\n</code></pre>\n\n<p>Quick benchmark:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>gcd 0.7560891520042787\ngcf 39.11557542099763\ngcf improved 32.58505471699755\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>import timeit\nfrom math import gcd\n\ndef gcf(num1, num2):\n    list_fac = []\n    x = max(num1, num2)\n    for i in range(2,x + 1):\n        if x % i == 0:\n            list_fac.append(i)\n            y = min(num1, num2)\n            for t in list_fac:\n                if y % t != 0:\n                    list_fac.remove(t)\n\ndef gcf2(num1, num2):\n    greatest = 0\n    x = max(num1, num2)\n    y = min(num1, num2)\n\n    for i in range(1, x + 1):\n        if x % i == 0 and y % i == 0:\n            greatest = i\n\n    return greatest\n\ndef a(): gcd(20, 125)\ndef b(): gcf(20, 125)\ndef c(): gcf2(20, 125)\n\nif __name__ == '__main__':    \n    print(\"gcd\", timeit.timeit(\"a()\", setup=\"from __main__ import a\"))\n    print(\"gcf\", timeit.timeit(\"b()\", setup=\"from __main__ import b\"))\n    print(\"gcf improved\", timeit.timeit(\"c()\", setup=\"from __main__ import c\"))\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11832308, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ywE6D16IEU4/AAAAAAAAAAI/AAAAAAAAACA/E28K82RQdRk/photo.jpg?sz=128", "display_name": "SSJGOLEM", "link": "https://stackoverflow.com/users/11832308/ssjgolem"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1616370172, "creation_date": 1565216870, "last_edit_date": 1616370172, "question_id": 57403000, "link": "https://stackoverflow.com/questions/57403000/my-gcf-gcd-program-is-returning-an-extra-number", "title": "My GCF/GCD program is returning an extra number", "body": "<p>I want my program only to return the greatest common factor but instead it returns a bunch of random factors and finally the answer.</p>\n\n<p>I tried using a a website that shows the steps of your code.   </p>\n\n<pre><code>list_fac = []\ndef gcf(num1, num2):\n    x = max(num1, num2)\n    for i in range(2,x + 1):\n        if x % i == 0:\n            list_fac.append(i)\n\n\n            y = min(num1, num2)\n            for t in list_fac:\n                if y % t != 0:\n                    list_fac.remove(t)\n                    print(max(list_fac))\n</code></pre>\n\n<p>I want it to return a single answer but it returns some factors then an answer.</p>\n\n<pre><code>gcf(10,20)\n</code></pre>\n\n<p>expected:</p>\n\n<pre><code>10\n</code></pre>\n\n<p>actual:</p>\n\n<pre><code>2\n10\n</code></pre>\n"}, {"tags": ["python", "firebase", "ubuntu", "google-cloud-firestore", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 233128, "user_id": 807126, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xpNqK.jpg?s=128&g=1", "display_name": "Doug Stevenson", "link": "https://stackoverflow.com/users/807126/doug-stevenson"}, "edited": false, "score": 2, "creation_date": 1565218150, "post_id": 57402977, "comment_id": 101287798, "body": "You might want to consider using something like Cloud Functions if you want to automatically do some work whenever a document is created, removed, or updated."}, {"owner": {"reputation": 13209, "user_id": 7414759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b272ce66c7c245c6cbe9a830691daddc?s=128&d=identicon&r=PG&f=1", "display_name": "stovfl", "link": "https://stackoverflow.com/users/7414759/stovfl"}, "edited": false, "score": 0, "creation_date": 1565255036, "post_id": 57402977, "comment_id": 101298261, "body": "Read <a href=\"https://stackoverflow.com/questions/18499497/how-to-process-sigterm-signal-gracefully\">how-to-process-sigterm-signal-gracefully</a>"}, {"owner": {"reputation": 1212, "user_id": 2834295, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1ab5839bfa69a7282cae53b15097bcfc?s=128&d=identicon&r=PG&f=1", "display_name": "mr.bjerre", "link": "https://stackoverflow.com/users/2834295/mr-bjerre"}, "edited": false, "score": 0, "creation_date": 1594628885, "post_id": 57402977, "comment_id": 111180765, "body": "while True: pass loop?"}], "owner": {"reputation": 533, "user_id": 1053076, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/54ba13c1999c4f89899887139c88d746?s=128&d=identicon&r=PG&f=1", "display_name": "unicornication", "link": "https://stackoverflow.com/users/1053076/unicornication"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 320, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565216669, "creation_date": 1565216669, "question_id": 57402977, "link": "https://stackoverflow.com/questions/57402977/how-to-keep-firebase-python-script-running-all-the-time", "title": "How to keep Firebase Python script running all the time?", "body": "<p>I am running a Python script to intercept new Firebase documents, and update a paramter, and then keep listening. </p>\n\n<p>I am hoping to keep it running 24/7 and doing this continuously. Here is the code I am running:</p>\n\n<pre><code>import datetime\nimport time\nfrom time import sleep\nfrom google.cloud import firestore\nimport google.cloud.exceptions\nimport firebase_admin\nfrom firebase_admin import credentials\nfrom firebase_admin import firestore \nfrom pprint import pprint\nimport os\nos.environ[\"GOOGLE_APPLICATION_CREDENTIALS\"]=\"fbkey.json\"\n\n# Use a service account\ncred = credentials.Certificate('fbkey.json')\nfirebase_admin.initialize_app(cred)\n\ndb = firestore.client()\n\ndef setAsReady(docId):\n    ref = db.collection(u'tasks').document(docId)\n    ref.update({u'status': 'READY'})\n\ndef on_snapshot(col_snapshot, changes, read_time):\n    for doc in changes:\n        newDocId = doc.document.id\n        print(newDocId)\n        setAsReady(newDocId)\n\ncol_query = db.collection(u'tasks').where(u'status', u'==', u'NEW')\nquery_watch = col_query.on_snapshot(on_snapshot)\n\ntime.sleep(500000000)\n</code></pre>\n\n<p>Right now I am using <code>time.sleep(5000000000)</code> to keep the script running, though, I assume this is a bad idea.</p>\n\n<p>I want to run this script an Ubuntu server, and so I put this in a <code>screen</code> window, and it runs well for half an hour or so, though later I get this error:</p>\n\n<pre><code>  File \"/usr/local/lib/python3.5/dist-packages/grpc/_channel.py\", line 358, in _next\n    raise self\ngrpc._channel._Rendezvous: &lt;_Rendezvous of RPC that terminated with:\n        status = StatusCode.INTERNAL\n        details = \"Received RST_STREAM with error code 0\"\n        debug_error_string = \"{\"created\":\"@1565213741.785723473\",\"description\":\"Error received from peer ipv4:172.217.14.202:443\",\"file\":\"src/core/lib/surface/call.cc\",\"file_line\":1052,\"grpc_message\":\"Received RST_STREAM with error code 0\",\"grpc_status\":13}\"\n&gt;\nException in thread Thread-OnRpcTerminated:\nTraceback (most recent call last):\n  File \"/usr/lib/python3.5/threading.py\", line 914, in _bootstrap_inner\n    self.run()\n  File \"/usr/lib/python3.5/threading.py\", line 862, in run\n    self._target(*self._args, **self._kwargs)\n  File \"/usr/local/lib/python3.5/dist-packages/google/cloud/firestore_v1/watch.py\", line 290, in close\n    raise reason\ngoogle.api_core.exceptions.InternalServerError: 500 Received RST_STREAM with error code 0\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "algorithm", "performance", "hashmap"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 5, "creation_date": 1565216874, "post_id": 57402968, "comment_id": 101287504, "body": "&quot;and everything seems to be working OK, I&#39;m not sure though, and I&#39;d like to see some views to improve it or if there might be any problem or edge cases?&quot; Frankly, that seems better suited for <a href=\"https://codereview.stackexchange.com/\">CodeReview</a> instead of StackOverflow"}, {"owner": {"reputation": 5380, "user_id": 10618540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Od4aq.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/10618540/paritosh-singh"}, "edited": false, "score": 1, "creation_date": 1565353267, "post_id": 57402968, "comment_id": 101337656, "body": "I&#39;m voting to close this question as off-topic because this questions asks for opinions on working code, and thus should belong on <a href=\"https://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1565223960, "post_id": 57403601, "comment_id": 101288958, "body": "I suspect he knows that. He&#39;s doing this as an exercise to implement it himself."}], "tags": [], "owner": {"reputation": 35094, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "is_accepted": true, "score": 1, "last_activity_date": 1565222485, "creation_date": 1565222485, "answer_id": 57403601, "question_id": 57402968, "link": "https://stackoverflow.com/questions/57402968/hash-map-using-hash-method/57403601#57403601", "title": "Hash Map using hash() Method", "body": "<p>I am bugged that <code>hahsmap_size</code> is misspelled.  Otherwise this seems to be a working implementation of what Python natively provides as a dictionary.</p>\n\n<p>That is, this code:</p>\n\n<pre><code>hm = HashMap()\nhm.set_key_value('A', '1')\nhm.set_key_value('A', '2')\nhm.set_key_value('B', '1')\nhm.set_key_value('A', '3')\nhm.set_key_value('A', '4')\nhm.set_key_value('C', '1')\nhm.set_key_value('D', '1')\nhm.set_key_value('E', '1')\nhm.set_key_value('E', '2')\nhm.remove_key('A')\nhm.remove_key('B')\nhm.remove_key('B')\nhm.print_hashmap()\n</code></pre>\n\n<p>is equivalent to but slower than this:</p>\n\n<pre><code>hm = {}\nhm['A'] = '1'\nhm['A'] = '2'\nhm['B'] = '1'\nhm['A'] = '3'\nhm['A'] = '4'\nhm['C'] = '1'\nhm['D'] = '1'\nhm['E'] = '1'\nhm['E'] = '2'\nhm.pop('A', None)\nhm.pop('B', None)\nhm.pop('B', None)\nprint(hm)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "closed_date": 1565363517, "accepted_answer_id": 57403601, "answer_count": 1, "score": -1, "last_activity_date": 1565222485, "creation_date": 1565216605, "last_edit_date": 1592644375, "question_id": 57402968, "link": "https://stackoverflow.com/questions/57402968/hash-map-using-hash-method", "closed_reason": "Not suitable for this site", "title": "Hash Map using hash() Method", "body": "<p>Based on some tutorial, I've applied a <code>HashMap</code> class, and just used a <code>__get_hash_mod_size()</code> method,</p>\n<pre><code>def __get_hash_mod_size(self, key):\n    hash_key_var = hash(key+str(self.hahsmap_size*0.01))\n    return hash_key_var % self.hahsmap_size\n</code></pre>\n<p>and everything seems to be working OK, I'm not sure though, and I'd like to see some views to improve it or if there might be any problem or edge cases?</p>\n<h3>HashMap</h3>\n<pre><code>class HashMap():\n    def __init__(self):\n        self.hahsmap_size = 32\n        self.hashmap_data = [None] * self.hahsmap_size\n\n    def __get_hash_mod_size(self, key):\n        hash_key_var = hash(key+str(self.hahsmap_size*0.01))\n        return hash_key_var % self.hahsmap_size\n\n    def set_key_value(self, key, value):\n        key_var = self.__get_hash_mod_size(key)\n        key_value_list = [key, value]\n\n        if self.hashmap_data[key_var] is None:\n            self.hashmap_data[key_var] = list([key_value_list])\n            return True\n        else:\n            for pair in self.hashmap_data[key_var]:\n                print(pair)\n                if pair[0] == key:\n                    pair[1] = value\n                    return True\n            self.hashmap_data[key_var].append(key_value_list)\n            return True\n\n    def get_key(self, key):\n        key_var = self.__get_hash_mod_size(key)\n        if self.hashmap_data[key_var] is not None:\n            for pair in self.hashmap_data[key_var]:\n                if pair[0] == key:\n                    return pair[1]\n            return None\n    \n    def remove_key(self, key):\n        key_var = self.__get_hash_mod_size(key)\n\n        if self.hashmap_data[key_var] is not None:\n            return False\n        for i in range(len(self.hashmap_data[key_var])):\n            if self.hashmap_data[key_var][i][0] == key:\n                self.hashmap_data[key_var].pop(i)\n                return True\n    def print_hashmap(self):\n        for item in self.hashmap_data:\n            if item is not None:\n                print(item)\n\n\nhm = HashMap()\nhm.set_key_value('A', '1')\nhm.set_key_value('A', '2')\nhm.set_key_value('B', '1')\nhm.set_key_value('A', '3')\nhm.set_key_value('A', '4')\nhm.set_key_value('C', '1')\nhm.set_key_value('D', '1')\nhm.set_key_value('E', '1')\nhm.set_key_value('E', '2')\nhm.remove_key('A')\nhm.remove_key('B')\nhm.remove_key('B')\nhm.print_hashmap()\n</code></pre>\n"}, {"tags": ["python", "macos", "opencv", "osx-elcapitan"], "comments": [{"owner": {"reputation": 2684, "user_id": 4551945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tphYr.jpg?s=128&g=1", "display_name": "Matt L.", "link": "https://stackoverflow.com/users/4551945/matt-l"}, "edited": false, "score": 1, "creation_date": 1565216610, "post_id": 57402954, "comment_id": 101287433, "body": "Looks like you have Anaconda. Have you tried installing via conda install?"}, {"owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "edited": false, "score": 0, "creation_date": 1565259306, "post_id": 57402954, "comment_id": 101300744, "body": "<code>_clock_gettime</code> is available only in MacOS 10.12 and later, so you won&#39;t be able to install recent versions of <code>opencv</code> - install the pre-4 version: <code>pip install &quot;opencv-python&lt;4&quot;</code> or <code>conda install &quot;opencv&lt;4&quot;</code> etc."}, {"owner": {"reputation": 21, "user_id": 11787942, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CVKuf1Em7PU/AAAAAAAAAAI/AAAAAAAABKI/Uin_m_KQQ5k/photo.jpg?sz=128", "display_name": "Ethan Seidenberg", "link": "https://stackoverflow.com/users/11787942/ethan-seidenberg"}, "edited": false, "score": 0, "creation_date": 1565297757, "post_id": 57402954, "comment_id": 101320356, "body": "Yeah I&#39;ve tried with conda install. Doesn&#39;t seem to work. Frankly, I don&#39;t actually use anaconda for anything; I&#39;m new to all of this and just installed it because someone I knew told me it would be useful."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 11787942, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CVKuf1Em7PU/AAAAAAAAAAI/AAAAAAAABKI/Uin_m_KQQ5k/photo.jpg?sz=128", "display_name": "Ethan Seidenberg", "link": "https://stackoverflow.com/users/11787942/ethan-seidenberg"}, "edited": false, "score": 1, "creation_date": 1565298164, "post_id": 57402979, "comment_id": 101320489, "body": "The second one seemed to work--I had to make an environment with python 2 instead of 3 for whatever reason. Thanks so much!"}], "tags": [], "owner": {"reputation": 1524, "user_id": 8677101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fc326aa192c0fbfd14442cfff6288fd4?s=128&d=identicon&r=PG&f=1", "display_name": "BPDESILVA", "link": "https://stackoverflow.com/users/8677101/bpdesilva"}, "is_accepted": false, "score": 0, "last_activity_date": 1565356634, "last_edit_date": 1565356634, "creation_date": 1565216695, "answer_id": 57402979, "question_id": 57402954, "link": "https://stackoverflow.com/questions/57402954/install-opencv-python-mac-osx-10-11/57402979#57402979", "title": "install opencv python mac osx 10.11?", "body": "<p>Try conda install :</p>\n\n<pre><code>conda install --channel https://conda.anaconda.org/menpo opencv3\n</code></pre>\n\n<p>OR </p>\n\n<pre><code>conda install -c menpo opencv \n</code></pre>\n\n<p>Then import </p>\n\n<pre><code>import cv2\n</code></pre>\n\n<p>There seems to be a problem with the brew installation according to <a href=\"https://github.com/Homebrew/homebrew-science/issues/3024\" rel=\"nofollow noreferrer\">https://github.com/Homebrew/homebrew-science/issues/3024</a> but you can try the below too </p>\n\n<p>---------- OR ----------</p>\n\n<p>First, create a <code>venv</code> (Virtual Enviorment)</p>\n\n<pre><code>python3 -m venv /path/to/new/virtual/environment\n</code></pre>\n\n<p>Then using brew : </p>\n\n<pre><code>brew uninstall opencv\nbrew install opencv3\n</code></pre>\n\n<p><strong>OR</strong></p>\n\n<p>Then using pip : </p>\n\n<pre><code>pip3 install opencv-python\n</code></pre>\n\n<p>Finally, import using :</p>\n\n<pre><code>import cv2\n</code></pre>\n\n<p>This should work but in the case doesn't it might mean that you've installed anaconda with python in that case try:</p>\n\n<pre><code>conda install -c menpo opencv \n</code></pre>\n\n<p>Finally, import using :</p>\n\n<pre><code>import cv2\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 11787942, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-CVKuf1Em7PU/AAAAAAAAAAI/AAAAAAAABKI/Uin_m_KQQ5k/photo.jpg?sz=128", "display_name": "Ethan Seidenberg", "link": "https://stackoverflow.com/users/11787942/ethan-seidenberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 990, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1565356634, "creation_date": 1565216460, "last_edit_date": 1565258993, "question_id": 57402954, "link": "https://stackoverflow.com/questions/57402954/install-opencv-python-mac-osx-10-11", "title": "install opencv python mac osx 10.11?", "body": "<p>I'm trying to install opencv so I can use it in a python program. My computer is a little old and I can't update osx past 10.11. Is it still possible to install opencv? I don't need it to be opencv4 if that's an issue.</p>\n\n<p>I've tried using pip, pip3, and homebrew. They all download it and then it won't actually import in python correctly. Everything eventually says that it needs to be osx 10.12.</p>\n\n<p>Here's the exact error I'm getting:</p>\n\n<pre><code>File \"&lt;stdin&gt;\", line 1, in &lt;module&gt;\n  File \"/anaconda3/lib/python3.7/site-packages/cv2/__init__.py\", line 3, in &lt;module&gt;\n    from .cv2 import *\nImportError: dlopen(/anaconda3/lib/python3.7/site-packages/cv2/cv2.cpython-37m-darwin.so, 2): Symbol not found: _clock_gettime\n  Referenced from: /anaconda3/lib/python3.7/site-packages/cv2/.dylibs/libavutil.56.22.100.dylib (which was built for Mac OS X 10.12)\n  Expected in: /usr/lib/libSystem.B.dylib\n in /anaconda3/lib/python3.7/site-packages/cv2/.dylibs/libavutil.56.22.100.dylib\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "edited": false, "score": 0, "creation_date": 1565217112, "post_id": 57402981, "comment_id": 101287555, "body": "My frame index is actually a timestamp. I could not figure out how to convert it to some integer sequence or something like that"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "edited": false, "score": 1, "creation_date": 1565226798, "post_id": 57402981, "comment_id": 101289473, "body": "@Luca that is why I am using .iloc which is by position not by index value"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 4, "last_activity_date": 1565216696, "creation_date": 1565216696, "answer_id": 57402981, "question_id": 57402932, "link": "https://stackoverflow.com/questions/57402932/iterate-over-pandas-data-frame-from-a-specific-row-index/57402981#57402981", "title": "iterate over pandas data frame from a specific row index", "body": "<p>You do not need additional <code>if</code> to control </p>\n\n<pre><code>index_to_start = 100\nfor _, row in frame.iloc[index_to_start:,:].iterrows():\n    #do something\n</code></pre>\n\n<p>Also , in pandas we usually do not iterrows. </p>\n\n<p>You can do <code>np.where</code></p>\n\n<pre><code>np.where(df.reset_index().index&lt;100, 'nothing', ' do someting')\n</code></pre>\n"}], "owner": {"reputation": 8130, "user_id": 2713740, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1f024ede163fdaebe61807ad5c88f1e?s=128&d=identicon&r=PG&f=1", "display_name": "Luca", "link": "https://stackoverflow.com/users/2713740/luca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 57402981, "answer_count": 1, "score": 1, "last_activity_date": 1565216696, "creation_date": 1565216321, "last_edit_date": 1565216677, "question_id": 57402932, "link": "https://stackoverflow.com/questions/57402932/iterate-over-pandas-data-frame-from-a-specific-row-index", "title": "iterate over pandas data frame from a specific row index", "body": "<p>I can iterate over a pandas dataframe using the <code>iterrows</code> function but I wonder how one can iterate over the rows from a given index?</p>\n\n<p>I know one can do something like:</p>\n\n<pre><code>index_to_start = 100\ncurrent = 0\nfor _, row in frame.iterrows():\n    if current &lt; index_to_start:\n        continue\n    # Do something \n</code></pre>\n\n<p>However, this seems a bit ugly and I wonder if there is a clearer and more straight forward way to do this?</p>\n"}, {"tags": ["python", "arrays", "numpy", "scikit-learn"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11898557, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214998776504348/picture?type=large", "display_name": "Efi Kir", "link": "https://stackoverflow.com/users/11898557/efi-kir"}, "edited": false, "score": 0, "creation_date": 1565218776, "post_id": 57403009, "comment_id": 101287929, "body": "What an unexpected problem I had. My mind was miles away. Thanks!"}], "tags": [], "owner": {"reputation": 471, "user_id": 6801991, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MGoA91yGouk/AAAAAAAAAAI/AAAAAAAABmQ/XdaNdU--HxE/photo.jpg?sz=128", "display_name": "hilton92", "link": "https://stackoverflow.com/users/6801991/hilton92"}, "is_accepted": true, "score": 0, "last_activity_date": 1565216912, "creation_date": 1565216912, "answer_id": 57403009, "question_id": 57402918, "link": "https://stackoverflow.com/questions/57402918/valueerror-expected-2d-array-got-1d-array-instead-insists-after-converting-1d/57403009#57403009", "title": "ValueError: Expected 2D array, got 1D array instead insists after converting 1D array to 2D", "body": "<p>Its often useful to look at the signature and docstrings for functions you use. <code>model.score</code> for example has</p>\n\n<pre><code>Parameters\n----------\nX : array-like, shape = (n_samples, n_features)\n    Test samples.\n\ny : array-like, shape = (n_samples) or (n_samples, n_outputs)\n    True labels for X.\n</code></pre>\n\n<p>in the docstrings to show you the exact type of input you should give it.</p>\n\n<p>Here you would do <code>model.score(X_test, y_test)</code></p>\n\n<p><code>model.score</code> will do both the prediction from <code>X_test</code> and the comparison with <code>y_test</code></p>\n"}], "owner": {"reputation": 3, "user_id": 11898557, "user_type": "registered", "profile_image": "https://graph.facebook.com/10214998776504348/picture?type=large", "display_name": "Efi Kir", "link": "https://stackoverflow.com/users/11898557/efi-kir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 57403009, "answer_count": 1, "score": 0, "last_activity_date": 1565216912, "creation_date": 1565216201, "question_id": 57402918, "link": "https://stackoverflow.com/questions/57402918/valueerror-expected-2d-array-got-1d-array-instead-insists-after-converting-1d", "title": "ValueError: Expected 2D array, got 1D array instead insists after converting 1D array to 2D", "body": "<p>I looked into other answers but still cannot understand why the problem insists.</p>\n\n<p>Classic machine learning practice with Iris dataset.</p>\n\n<p>Code:</p>\n\n<pre><code>dataset=load_iris()\n\nX = np.array(dataset.data)\ny = np.array(dataset.target)\n\nX_train, X_test, y_train, y_test = train_test_split(X, y, test_size=0.3)\n\nmodel = KNeighborsClassifier()\nmodel.fit(X_train, y_train)\n\nprediction=model.predict(X_test)\n</code></pre>\n\n<p>The shapes of all arrays:</p>\n\n<ol>\n<li>X shape:  (150, 4)</li>\n<li>y shape:  (150,)</li>\n<li>X_train:  (105, 4)</li>\n<li>X_test:  (45, 4)</li>\n<li>y_train:  (105,)</li>\n<li>y_test (45,)</li>\n<li>prediction:  (45,)</li>\n</ol>\n\n<p>Trying to print this <strong>model.score(y_test, prediction)</strong> and I get the error.\nI tried to convert y_test and prediction into 2D arrays by using .reshape(-1,1) and I get another error: query data dimension must match training data dimension.</p>\n\n<p>It's not only about the solution, it's about understanding what's wrong.</p>\n"}, {"tags": ["python", "sorting", "slice"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 2, "creation_date": 1565216953, "post_id": 57402909, "comment_id": 101287526, "body": "Do not use list-comprehensions for side-effects. That is not Pythonic."}], "answers": [{"comments": [{"owner": {"reputation": 107137, "user_id": 364696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7eBCp.jpg?s=128&g=1", "display_name": "ShadowRanger", "link": "https://stackoverflow.com/users/364696/shadowranger"}, "edited": false, "score": 1, "creation_date": 1565221373, "post_id": 57403161, "comment_id": 101288425, "body": "It could be replaced with <code>[l[i+1], l[i]]</code> to achieve the same effect without the accidental index wraparound; you only needed two elements after all. Alternatively, you could use <code>l[i:i+2][::-1]</code>, which has symmetry with the other use (you just add the canonical reversing slice after, <code>[::-1]</code>)."}], "tags": [], "owner": {"reputation": 9372, "user_id": 4585963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8Yzwc.jpg?s=128&g=1", "display_name": "hilberts_drinking_problem", "link": "https://stackoverflow.com/users/4585963/hilberts-drinking-problem"}, "is_accepted": true, "score": 1, "last_activity_date": 1565218152, "creation_date": 1565218152, "answer_id": 57403161, "question_id": 57402909, "link": "https://stackoverflow.com/questions/57402909/bubble-sort-using-slice-and-setitem-methods/57403161#57403161", "title": "Bubble Sort using Slice and __setitem__ Methods", "body": "<p>When <code>i == 0</code>, <code>l[i +  1:i - 1:-1]</code> evaluates to <code>[]</code> so you end up shortening your list mid iteration.</p>\n"}], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 57403161, "answer_count": 1, "score": 1, "last_activity_date": 1565218152, "creation_date": 1565216131, "question_id": 57402909, "link": "https://stackoverflow.com/questions/57402909/bubble-sort-using-slice-and-setitem-methods", "title": "Bubble Sort using Slice and __setitem__ Methods", "body": "<p>Based on <a href=\"https://stackoverflow.com/a/57358986/6553328\">Paul's answer</a>, I've tried to run the following bubble sort algorithm, which uses <code>slice</code> and <code>__setitem__</code> methods; I'm positive that there'd be something simple that I'm not doing right, not sure what that might be?</p>\n\n<h3>Code</h3>\n\n<pre><code>def bubblesort(l):\n    [l.__setitem__(slice(i, i + 2), (l[i:i + 2] if l[i] &lt; l[i + 1] else l[i +  1:i - 1:-1])) for j in range(0, len(l)) for i in range(0, len(l) - 1)]\n    return l\n\nl = [1,5,-5,0,10,100]\nbubblesort(l)\nprint(l)\n</code></pre>\n\n<h3>Desired Output</h3>\n\n<pre><code>[-5, 0, 1, 5, 10, 100]\n</code></pre>\n"}, {"tags": ["python", "google-bigquery", "google-cloud-datalab"], "answers": [{"tags": [], "owner": {"reputation": 2589, "user_id": 3684203, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7dMfn.jpg?s=128&g=1", "display_name": "nbermudezs", "link": "https://stackoverflow.com/users/3684203/nbermudezs"}, "is_accepted": false, "score": 1, "last_activity_date": 1565219053, "creation_date": 1565219053, "answer_id": 57403247, "question_id": 57402905, "link": "https://stackoverflow.com/questions/57402905/format-of-query-params-for-bigquery-datalab/57403247#57403247", "title": "Format of query_params for BigQuery DataLab", "body": "<p>I finally got it to work based on <a href=\"https://github.com/richkadel/google-cloud-python/commit/92e5119e9fa414f395974541a10f1fe30efecaf8\" rel=\"nofollow noreferrer\">this PR</a>.</p>\n\n<p>The expected format is </p>\n\n<pre><code>query_params = [\n  {\n    'name': 'field',\n    'parameterType': {'type': 'STRING'},\n    'parameterValue': {'value': field}\n  }\n]\n</code></pre>\n"}], "owner": {"reputation": 2589, "user_id": 3684203, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7dMfn.jpg?s=128&g=1", "display_name": "nbermudezs", "link": "https://stackoverflow.com/users/3684203/nbermudezs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565219053, "creation_date": 1565216114, "question_id": 57402905, "link": "https://stackoverflow.com/questions/57402905/format-of-query-params-for-bigquery-datalab", "title": "Format of query_params for BigQuery DataLab", "body": "<p>Hi there SO community,</p>\n\n<p>So I've been trying to get this parameterized query to work on a DataLab notebook. Since I plan to execute the query multiple assignments of such parameters I cannot use the <code>%%bq execute</code> syntax. Instead I've been trying to use <code>.execute(query_params=query_params)</code> but I cannot figure out the appropriate format of the <code>query_params</code> data.</p>\n\n<p>For completeness, this is a simplified version of what I have:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>%%bq query -n myq\nSELECT *\nFROM `some_table`\nWHERE some_field = @field\n</code></pre>\n\n<pre class=\"lang-py prettyprint-override\"><code>query_params = [{'name': 'field', 'type': 'STRING', 'value': 'POTATO'}]\nmyq.execute(query_params=query_params).result().to_dataframe()\n</code></pre>\n\n<p>I figured the <code>query_params</code> argument had to be a list by following <a href=\"https://github.com/googledatalab/pydatalab/blob/master/google/datalab/utils/_http.py\" rel=\"nofollow noreferrer\">this</a> and figured that each element should be a dictionary with those keys because of <a href=\"https://googleapis.github.io/google-cloud-python/latest/bigquery/generated/google.cloud.bigquery.query.ScalarQueryParameter.html#google.cloud.bigquery.query.ScalarQueryParameter\" rel=\"nofollow noreferrer\">this</a>. </p>\n\n<p>Nonetheless, when I execute this on my DataLab notebook I get an error indicating the parameter type is missing. See part of the error stacktrace below. </p>\n\n<pre><code>/usr/local/envs/py3env/lib/python3.5/site-packages/google/datalab/bigquery/_query.py in execute_async(self, output_options, sampling, context, query_params)\n    268                                            allow_large_results=output_options.allow_large_results,\n    269                                            table_definitions=self.data_sources,\n--&gt; 270                                            query_params=query_params)\n    271     except Exception as e:\n    272       raise e\n\n/usr/local/envs/py3env/lib/python3.5/site-packages/google/datalab/bigquery/_api.py in jobs_insert_query(self, sql, table_name, append, overwrite, dry_run, use_cache, batch, allow_large_results, table_definitions, query_params)\n    200       query_config['queryParameters'] = query_params\n    201 \n--&gt; 202     return google.datalab.utils.Http.request(url, data=data, credentials=self.credentials)\n    203 \n    204   def jobs_query_results(self, job_id, project_id, page_size, timeout, start_index=0):\n\n/usr/local/envs/py3env/lib/python3.5/site-packages/google/datalab/utils/_http.py in request(url, args, data, headers, method, credentials, raw_response, stats)\n    156           return json.loads(str(content, encoding='UTF-8'))\n    157       else:\n--&gt; 158         raise RequestException(response.status, content)\n    159     except ValueError:\n    160       raise Exception('Failed to process HTTP response.')\n\nRequestException: HTTP request failed: Missing query parameter type\n\n</code></pre>\n\n<p>Any idea what am I missing here? I've search everywhere trying to find the appropriate format for this query_params thing and no luck so far.</p>\n\n<p>Thanks for the help.</p>\n"}, {"tags": ["python", "opencv", "image-processing", "scikit-image"], "comments": [{"owner": {"reputation": 17033, "user_id": 2393191, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/mFcLT.jpg?s=128&g=1", "display_name": "Micka", "link": "https://stackoverflow.com/users/2393191/micka"}, "edited": false, "score": 2, "creation_date": 1565232505, "post_id": 57402903, "comment_id": 101290439, "body": "your centroid brute force should be ok as an initialization  for iterative closest points, I guess."}], "owner": {"reputation": 267, "user_id": 3784752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b1c8a855422da6574b68ca297c8fabd?s=128&d=identicon&r=PG&f=1", "display_name": "ltab", "link": "https://stackoverflow.com/users/3784752/ltab"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1565217616, "creation_date": 1565216108, "last_edit_date": 1565217616, "question_id": 57402903, "link": "https://stackoverflow.com/questions/57402903/finding-the-transformation-between-two-matched-shapes", "title": "Finding the transformation between two matched shapes", "body": "<p>Given two images with similar blobs, is there a simple way to find the transformation between them? As an example, I have two images like the following:</p>\n\n<p><a href=\"https://i.stack.imgur.com/o59K2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o59K2.png\" alt=\"One\"></a> <a href=\"https://i.stack.imgur.com/4fIjZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4fIjZ.png\" alt=\"Two\"></a></p>\n\n<p>The right is the output of a neural network, while the left is an approximate truth (from a shape perspective only). I'm looking to find the transformation to move the left image to best match the position and orientation of the right. In this case, a rotation of some 150-160 degrees CC, and a translation up and right.</p>\n\n<p>This seems to be a shape matching problem with some added constraints, but I'm wondering if there is a way to do it without having to perform a bunch of test transformations/sliding window. Most of the examples I've found have been for classification, and the positional ones are not rotation tolerant.</p>\n\n<p>Ideas I have had so far... I've looked at Hu moments and openCV's matchShapes, which seem like they would get me the similarity (and mirroring, which is a possibility in the data and thus desirable), but I'm not sure how to use them  without still using some sort of window. Another option would be SIFT or another feature based approach, but I don't think it would be particularly good given the low information volume of the data and the less similar shapes (Hough transform as a base?). Another brute force method might be to calculate the difference in the centroids, move the left image over the right and then rotate until I find the orientation with the maximum Jaccard index (or use the moments to find the rotation?), but that's the same kind of thing I'm trying to avoid (and it would always be a bit off given the inaccuracy of the NN predictions).</p>\n\n<p>My first instinct is just to make a neural network to do it, but I feel like there is a better answer that I'm just missing.</p>\n"}, {"tags": ["python", "android", "kivy", "pyjnius"], "comments": [{"owner": {"reputation": 25731, "user_id": 2469283, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3271ba34d6b680ed1103b4d4aeda9d6d?s=128&d=identicon&r=PG", "display_name": "inclement", "link": "https://stackoverflow.com/users/2469283/inclement"}, "edited": false, "score": 0, "creation_date": 1565284955, "post_id": 57402896, "comment_id": 101315260, "body": "<code>autoclass(&#39;org.renpy.android.PythonActivity&#39;)</code> is the first mistake, it should be <code>autoclass(&#39;org.kivy.android.PythonActivity&#39;)</code>. I don&#39;t know how many other issues there are though."}], "owner": {"reputation": 21, "user_id": 11321289, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oE1dV6qwRO4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd88JnvRXNz1FZ7Pqk5yxuoUJ-kiA/mo/photo.jpg?sz=128", "display_name": "PabloG", "link": "https://stackoverflow.com/users/11321289/pablog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 194, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1565216253, "creation_date": 1565216002, "last_edit_date": 1565216253, "question_id": 57402896, "link": "https://stackoverflow.com/questions/57402896/open-date-setting-in-kivy-android-app-with-jnius", "title": "Open date setting in Kivy/Android app with jnius", "body": "<p>I'm trying to translate this Java code</p>\n\n<pre><code>startActivity(new Intent(android.provider.Settings.ACTION_DATE_SETTINGS));\n</code></pre>\n\n<p>to Kivy, so I can open the Android date settings dialog. So far, I tried with</p>\n\n<pre><code>from jnius import autoclass\nfrom jnius import cast\n\nfrom jnius import autoclass\nfrom jnius import cast\n\nPythonActivity = autoclass('org.renpy.android.PythonActivity')\nintent = autoclass(\"android.provider.Settings\")\ncurrentActivity = cast('android.app.Activity', PythonActivity.mActivity)\ncurrentActivity.startActivity(intent.ACTION_DATE_SETTINGS)\n</code></pre>\n\n<p>but I'm getting</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"main.py\", line 282, in read_queue\n    ...\n  File \"&lt;string&gt;\", line 7, in &lt;module&gt;\n  File \"jnius/jnius_export_class.pxi\", line 900, in jnius.jnius.JavaMultipleMethod.__call__ (jnius/jnius.c:27749)\nJavaException: No methods matching your arguments\n</code></pre>\n\n<p>I tried several alternatives with <code>setAction</code> and <code>setData</code> but none works so far</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 2, "creation_date": 1565216303, "post_id": 57402867, "comment_id": 101287359, "body": "<code>dict</code> overwrites a builtin function. Pick a different name for your dictionary. <code>dict[row[0]] = ...</code> just overwrites the existing object with a new one. If it exists, add a new property on it."}, {"owner": {"reputation": 410, "user_id": 6164776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ece2e4f14f13e208684b8e9bc9ff02c8?s=128&d=identicon&r=PG&f=1", "display_name": "Safder", "link": "https://stackoverflow.com/users/6164776/safder"}, "reply_to_user": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1565216341, "post_id": 57402867, "comment_id": 101287372, "body": "Should&#39;ve been more clear, I just wrote that example. I&#39;ll change the name."}], "answers": [{"comments": [{"owner": {"reputation": 410, "user_id": 6164776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ece2e4f14f13e208684b8e9bc9ff02c8?s=128&d=identicon&r=PG&f=1", "display_name": "Safder", "link": "https://stackoverflow.com/users/6164776/safder"}, "edited": false, "score": 0, "creation_date": 1565216311, "post_id": 57402908, "comment_id": 101287361, "body": "I didn&#39;t know about set default that was what I was looking for. Thank you!"}, {"owner": {"reputation": 185, "user_id": 11866157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd185700814bb9612ebe513e80b7074f?s=128&d=identicon&r=PG&f=1", "display_name": "snamef", "link": "https://stackoverflow.com/users/11866157/snamef"}, "reply_to_user": {"reputation": 410, "user_id": 6164776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ece2e4f14f13e208684b8e9bc9ff02c8?s=128&d=identicon&r=PG&f=1", "display_name": "Safder", "link": "https://stackoverflow.com/users/6164776/safder"}, "edited": false, "score": 0, "creation_date": 1565216347, "post_id": 57402908, "comment_id": 101287373, "body": "oh yes and you should not call the valiable dict cause it overwrites the dict type"}], "tags": [], "owner": {"reputation": 185, "user_id": 11866157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd185700814bb9612ebe513e80b7074f?s=128&d=identicon&r=PG&f=1", "display_name": "snamef", "link": "https://stackoverflow.com/users/11866157/snamef"}, "is_accepted": true, "score": 2, "last_activity_date": 1565216124, "creation_date": 1565216124, "answer_id": 57402908, "question_id": 57402867, "link": "https://stackoverflow.com/questions/57402867/nested-dictionaries-from-file-in-python/57402908#57402908", "title": "Nested dictionaries from file in Python", "body": "<p>Yes, cause <code>dict[row[0]] =</code> is <code>dict[1] =</code> what overwrites previous <code>dict[1]</code> value \nYou should use :</p>\n\n<pre><code>dict.setdefault(row[0],{})[row[1]] = row[2]\n</code></pre>\n\n<p>remember there must be no duplicates for row[1] then</p>\n\n<p>or </p>\n\n<pre><code>dict.setdefault(row[0],{}).update({row[1]:row[2]})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 2, "creation_date": 1565216409, "post_id": 57402936, "comment_id": 101287390, "body": "No need for <code>== None</code> (switch the statements in the blocks), and it&#39;s best practice to use <code>is None</code> if you do need to compare against None. Correct answer though, thanks!"}], "tags": [], "owner": {"reputation": 4617, "user_id": 1388233, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ybszb.jpg?s=128&g=1", "display_name": "Guilherme Lopes", "link": "https://stackoverflow.com/users/1388233/guilherme-lopes"}, "is_accepted": false, "score": 0, "last_activity_date": 1565216352, "creation_date": 1565216352, "answer_id": 57402936, "question_id": 57402867, "link": "https://stackoverflow.com/questions/57402867/nested-dictionaries-from-file-in-python/57402936#57402936", "title": "Nested dictionaries from file in Python", "body": "<pre><code>if dict[row[0]] == None:\n    dict[row[0]] = {row[1]:row[2]}\nelse:\n    dict[row[0]][row[1]] = row[2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 561, "user_id": 5012385, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gcadm.jpg?s=128&g=1", "display_name": "Djaballah DJEDID", "link": "https://stackoverflow.com/users/5012385/djaballah-djedid"}, "is_accepted": false, "score": 0, "last_activity_date": 1565216735, "creation_date": 1565216735, "answer_id": 57402987, "question_id": 57402867, "link": "https://stackoverflow.com/questions/57402867/nested-dictionaries-from-file-in-python/57402987#57402987", "title": "Nested dictionaries from file in Python", "body": "<p>you can use defaultdict, which is similaire to the built-in dictionaries, but will create dictionaries with a default values, in your case a default value will be a dictionary</p>\n\n<pre><code>from collections import  defaultdict\nres = defaultdict(dict)\n</code></pre>\n\n<p>with this code we are creating a defaultdict, with it's values default value being of type dict, so next we would do</p>\n\n<pre><code>for row in l:\n    res[row[0]][row[1]] = row[2]\n</code></pre>\n"}], "owner": {"reputation": 410, "user_id": 6164776, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ece2e4f14f13e208684b8e9bc9ff02c8?s=128&d=identicon&r=PG&f=1", "display_name": "Safder", "link": "https://stackoverflow.com/users/6164776/safder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "accepted_answer_id": 57402908, "answer_count": 3, "score": 0, "last_activity_date": 1565216735, "creation_date": 1565215792, "last_edit_date": 1565216353, "question_id": 57402867, "link": "https://stackoverflow.com/questions/57402867/nested-dictionaries-from-file-in-python", "title": "Nested dictionaries from file in Python", "body": "<p>So I'm trying to create a nested dictionary but I can't seem to wrap my head around the logic.</p>\n\n<p>So say I have input coming in from a csv:</p>\n\n<pre><code>1,2,3\n2,3,4\n1,4,5\n</code></pre>\n\n<p>Now'd like to create a dictionary as follows:</p>\n\n<pre><code>d ={1:{2:3,4:5}, 2:{3:4}}\n</code></pre>\n\n<p>Such that for the first being some ID column that we create keys in the sub dictionary corresponding to second value.</p>\n\n<p>The way I tried it was to go:</p>\n\n<pre><code>d[row[0]] = {row[1]:row[2]}\n</code></pre>\n\n<p>But that overwrites the first instead of appending/pushing to it, how would I go about this problem? I can't seem to wrap my mind around what keys to use.</p>\n\n<p>Any guidance is appreciated.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1565215999, "post_id": 57402851, "comment_id": 101287297, "body": "Can you show us some sample data ?"}, {"owner": {"reputation": 785, "user_id": 1390268, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b73af5bf0df1830e5ead60e6eca3632c?s=128&d=identicon&r=PG", "display_name": "mythander889", "link": "https://stackoverflow.com/users/1390268/mythander889"}, "reply_to_user": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "edited": false, "score": 0, "creation_date": 1565216453, "post_id": 57402851, "comment_id": 101287401, "body": "Absolutely! Sorry about that - I should have included that to start"}], "answers": [{"comments": [{"owner": {"reputation": 785, "user_id": 1390268, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b73af5bf0df1830e5ead60e6eca3632c?s=128&d=identicon&r=PG", "display_name": "mythander889", "link": "https://stackoverflow.com/users/1390268/mythander889"}, "edited": false, "score": 0, "creation_date": 1565217338, "post_id": 57402922, "comment_id": 101287605, "body": "This did the trick! Thank you very much. I&#39;m curious about whether Grouper supports it, but that&#39;s mostly academic at this point"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": true, "score": 0, "last_activity_date": 1565216214, "creation_date": 1565216214, "answer_id": 57402922, "question_id": 57402851, "link": "https://stackoverflow.com/questions/57402851/pandas-grouper-with-zero-values/57402922#57402922", "title": "Pandas Grouper with zero values", "body": "<p>If you do need that missing timestamp, here is one way using <code>resample</code> but with apply </p>\n\n<pre><code>df.groupby('foo').\\\n     apply(lambda x : x.set_index('LocalDateTime').resample('H').count())['foo'].\\\n       reset_index(name='count')\n</code></pre>\n"}], "owner": {"reputation": 785, "user_id": 1390268, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b73af5bf0df1830e5ead60e6eca3632c?s=128&d=identicon&r=PG", "display_name": "mythander889", "link": "https://stackoverflow.com/users/1390268/mythander889"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 57402922, "answer_count": 1, "score": 0, "last_activity_date": 1565216437, "creation_date": 1565215684, "last_edit_date": 1565216437, "question_id": 57402851, "link": "https://stackoverflow.com/questions/57402851/pandas-grouper-with-zero-values", "title": "Pandas Grouper with zero values", "body": "<p>I'm hoping to get a count of the number of events by hour of the day. I followed the instructions <a href=\"https://stackoverflow.com/questions/47362530/python-pandas-group-datetimes-by-hour-and-count-row?rq=1\">here</a> to come up with a list of counts,  but wanted to include hours with zero events as well</p>\n\n<p>Here's some sample data:</p>\n\n<pre><code>0   2017-10-06 13:21:37 foo\n1   2017-10-06 13:21:39 foo\n2   2017-10-06 13:21:42 foo\n</code></pre>\n\n<p>Here's the code I have:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>counts = df.groupby([pd.Grouper(key='LocalDateTime',freq='H'),df.foo]).size().reset_index(name='count')\n</code></pre>\n\n<p>My output looks like this:</p>\n\n<pre><code>0   2017-10-06 12:00:00 foo 2\n1   2017-10-06 14:00:00 foo 2\n</code></pre>\n\n<p>I would like it to look like this</p>\n\n<pre><code>0   2017-10-06 12:00:00 foo 2\n1   2017-10-06 13:00:00 foo 0\n2   2017-10-06 14:00:00 foo 2\n</code></pre>\n\n<p>I checked the <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.Grouper.html\" rel=\"nofollow noreferrer\">Grouper</a> docs but didn't see any information on how to fill in missing times. What's the best way to do this?</p>\n\n<p>Thank you for your help!</p>\n"}, {"tags": ["python", "scipy", "statistics"], "answers": [{"comments": [{"owner": {"reputation": 1394, "user_id": 6811893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JI66j.jpg?s=128&g=1", "display_name": "Hyrial", "link": "https://stackoverflow.com/users/6811893/hyrial"}, "edited": false, "score": 0, "creation_date": 1565269090, "post_id": 57403378, "comment_id": 101306329, "body": "Is there a metric that would see those two arrays as different observations? (as order is important)"}, {"owner": {"reputation": 312, "user_id": 11579705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73bed681d2cdd5132556ba2c64fe400c?s=128&d=identicon&r=PG&f=1", "display_name": "zfabian", "link": "https://stackoverflow.com/users/11579705/zfabian"}, "reply_to_user": {"reputation": 1394, "user_id": 6811893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JI66j.jpg?s=128&g=1", "display_name": "Hyrial", "link": "https://stackoverflow.com/users/6811893/hyrial"}, "edited": false, "score": 0, "creation_date": 1565285275, "post_id": 57403378, "comment_id": 101315412, "body": "You could calculate Wasserstein-distance in each coordinates separately (as separate 1D distributions), I am not sure if it&#39;d make sense in your problem."}], "tags": [], "owner": {"reputation": 312, "user_id": 11579705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73bed681d2cdd5132556ba2c64fe400c?s=128&d=identicon&r=PG&f=1", "display_name": "zfabian", "link": "https://stackoverflow.com/users/11579705/zfabian"}, "is_accepted": true, "score": 1, "last_activity_date": 1565220391, "creation_date": 1565220391, "answer_id": 57403378, "question_id": 57402842, "link": "https://stackoverflow.com/questions/57402842/why-is-the-wasserstein-distance-between-0-1-and-1-0-zero/57403378#57403378", "title": "Why is the Wasserstein distance between [0, 1] and [1, 0] zero?", "body": "<p>It is because </p>\n\n<pre><code>scipy.stats.wasserstein_distance\n</code></pre>\n\n<p>expects 1D distributions in the first and second argument. It doesn't matter in which order you obtained the (same) observations, the distribution is the same.\nCheck that for instance</p>\n\n<pre><code>scipy.stats.wasserstein_distance([3, 1, 2, 4, 5], [1 ,4 ,5 ,3 ,2])\n</code></pre>\n\n<p>is also </p>\n\n<pre><code>0.0\n</code></pre>\n\n<p>for the same reason.</p>\n"}], "owner": {"reputation": 1394, "user_id": 6811893, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JI66j.jpg?s=128&g=1", "display_name": "Hyrial", "link": "https://stackoverflow.com/users/6811893/hyrial"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 57403378, "answer_count": 1, "score": 0, "last_activity_date": 1565220391, "creation_date": 1565215624, "question_id": 57402842, "link": "https://stackoverflow.com/questions/57402842/why-is-the-wasserstein-distance-between-0-1-and-1-0-zero", "title": "Why is the Wasserstein distance between [0, 1] and [1, 0] zero?", "body": "<p>Isn't the Wasserstein distance supposed to be a non-zero number since the probabilities are not equivalent?</p>\n\n<pre><code>In [1]: scipy.stats.wasserstein_distance([0, 1], [1, 0])\nOut[1]: 0.0\n</code></pre>\n"}, {"tags": ["python", "rest", "api", "tableau-api"], "comments": [{"owner": {"reputation": 371, "user_id": 10508583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/855634f43a89157d6646f992c8486df4?s=128&d=identicon&r=PG&f=1", "display_name": "Luke B", "link": "https://stackoverflow.com/users/10508583/luke-b"}, "edited": false, "score": 0, "creation_date": 1565285495, "post_id": 57402840, "comment_id": 101315498, "body": "Are you authenticated? What is the message/code in the exception? Does the new owner have access to the site or project containing the workbook?"}, {"owner": {"reputation": 497, "user_id": 1552698, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6e826487e5cba93a74003c2e4e7bc712?s=128&d=identicon&r=PG", "display_name": "user1552698", "link": "https://stackoverflow.com/users/1552698/user1552698"}, "reply_to_user": {"reputation": 371, "user_id": 10508583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/855634f43a89157d6646f992c8486df4?s=128&d=identicon&r=PG&f=1", "display_name": "Luke B", "link": "https://stackoverflow.com/users/10508583/luke-b"}, "edited": false, "score": 0, "creation_date": 1565287158, "post_id": 57402840, "comment_id": 101316182, "body": "Yes, I can authenticate successfully. New user has access to the server/project. I tried different users but no luck. Exception says &quot;400000: Bad request. Payload is either malformed or incomplete&quot;"}, {"owner": {"reputation": 371, "user_id": 10508583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/855634f43a89157d6646f992c8486df4?s=128&d=identicon&r=PG&f=1", "display_name": "Luke B", "link": "https://stackoverflow.com/users/10508583/luke-b"}, "edited": false, "score": 0, "creation_date": 1565291310, "post_id": 57402840, "comment_id": 101317874, "body": "Can you save it without making changes? Are you able to read fields from it after getting it, to make sure it was retrieved properly?"}, {"owner": {"reputation": 497, "user_id": 1552698, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6e826487e5cba93a74003c2e4e7bc712?s=128&d=identicon&r=PG", "display_name": "user1552698", "link": "https://stackoverflow.com/users/1552698/user1552698"}, "reply_to_user": {"reputation": 371, "user_id": 10508583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/855634f43a89157d6646f992c8486df4?s=128&d=identicon&r=PG&f=1", "display_name": "Luke B", "link": "https://stackoverflow.com/users/10508583/luke-b"}, "edited": false, "score": 0, "creation_date": 1565647017, "post_id": 57402840, "comment_id": 101410487, "body": "Even this simple code is failing: <code>single_workbook = server.workbooks.get_by_id(workbook_id)                 server.workbooks.update(single_workbook)</code> It is failing with same error &quot;tableauserverclient.server.endpoint.exceptions.ServerRespon&zwnj;&#8203;seError: 400000: Bad Request Payload is either malformed or incomplete&quot;"}, {"owner": {"reputation": 371, "user_id": 10508583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/855634f43a89157d6646f992c8486df4?s=128&d=identicon&r=PG&f=1", "display_name": "Luke B", "link": "https://stackoverflow.com/users/10508583/luke-b"}, "edited": false, "score": 0, "creation_date": 1565710154, "post_id": 57402840, "comment_id": 101433482, "body": "What does <code>print(single_workbook.name)</code> show if you put it right before the update() call?"}, {"owner": {"reputation": 497, "user_id": 1552698, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6e826487e5cba93a74003c2e4e7bc712?s=128&d=identicon&r=PG", "display_name": "user1552698", "link": "https://stackoverflow.com/users/1552698/user1552698"}, "reply_to_user": {"reputation": 371, "user_id": 10508583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/855634f43a89157d6646f992c8486df4?s=128&d=identicon&r=PG&f=1", "display_name": "Luke B", "link": "https://stackoverflow.com/users/10508583/luke-b"}, "edited": false, "score": 0, "creation_date": 1565730714, "post_id": 57402840, "comment_id": 101441825, "body": "Shows the name of the workbook retrieved"}, {"owner": {"reputation": 497, "user_id": 1552698, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6e826487e5cba93a74003c2e4e7bc712?s=128&d=identicon&r=PG", "display_name": "user1552698", "link": "https://stackoverflow.com/users/1552698/user1552698"}, "reply_to_user": {"reputation": 371, "user_id": 10508583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/855634f43a89157d6646f992c8486df4?s=128&d=identicon&r=PG&f=1", "display_name": "Luke B", "link": "https://stackoverflow.com/users/10508583/luke-b"}, "edited": false, "score": 0, "creation_date": 1565976712, "post_id": 57402840, "comment_id": 101523760, "body": "any help anyone :("}, {"owner": {"reputation": 541, "user_id": 6446879, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f8f81650e235bb6b99146abce830e9a?s=128&d=identicon&r=PG&f=1", "display_name": "Mattia Fantoni", "link": "https://stackoverflow.com/users/6446879/mattia-fantoni"}, "edited": false, "score": 0, "creation_date": 1590070566, "post_id": 57402840, "comment_id": 109545511, "body": "I would suggest you to check logs from /var/opt/tableau/tableau_server/data/tabsvc/logs/vizportal/v&zwnj;&#8203;izportal_node1-0.log it happened to me that API we returning a general error and inside the log I was able to retrieve the full error"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6290272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e4e2891b64ac026c9a818df799d47e9?s=128&d=identicon&r=PG&f=1", "display_name": "pred", "link": "https://stackoverflow.com/users/6290272/pred"}, "edited": false, "score": 0, "creation_date": 1594285753, "post_id": 62811214, "comment_id": 111074727, "body": "just tried the update on our tableau server 2020.2.. works like a charm! so i guess i ll just leave it and wait for our tableau server to get upgraded :)"}], "tags": [], "owner": {"reputation": 13, "user_id": 6290272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e4e2891b64ac026c9a818df799d47e9?s=128&d=identicon&r=PG&f=1", "display_name": "pred", "link": "https://stackoverflow.com/users/6290272/pred"}, "is_accepted": false, "score": 0, "last_activity_date": 1594285315, "creation_date": 1594285315, "answer_id": 62811214, "question_id": 57402840, "link": "https://stackoverflow.com/questions/57402840/tsc-payload-is-either-malformed-or-incomplete/62811214#62811214", "title": "TSC Payload is either malformed or incomplete", "body": "<p>I just encountered the same issue. Looking at logs (C:\\Tableau Server\\data\\tabsvc\\logs\\vizportal\\vizportal-0.log for Windows), I see the error:</p>\n<pre><code>Caused by: com.sun.istack.internal.SAXParseException2; lineNumber: 1; columnNumber: 238; unexpected element (uri:&quot;&quot;, local:&quot;dataAccelerationConfig&quot;). Expected elements are &lt;{}owner&gt;,&lt;{}site&gt;,&lt;{}project&gt;,&lt;{}connections&gt;,&lt;{}connectionCredentials&gt;,&lt;{}views&gt;,&lt;{}tags&gt;\n</code></pre>\n<p>The error specifically happens at generating the XML here:\n<a href=\"https://github.com/tableau/server-client-python/blob/188be71e0fbe9d87ac36628af21d2f63af32d020/tableauserverclient/server/endpoint/workbooks_endpoint.py#L103\" rel=\"nofollow noreferrer\">https://github.com/tableau/server-client-python/blob/188be71e0fbe9d87ac36628af21d2f63af32d020/tableauserverclient/server/endpoint/workbooks_endpoint.py#L103</a></p>\n<p>Upon checking whats happening in that request, I see its adding a section in xml for data_acceleration_config which I think is a new feature starting in very recent versions, 2019.4 maybe:\n<a href=\"https://github.com/tableau/server-client-python/blob/188be71e0fbe9d87ac36628af21d2f63af32d020/tableauserverclient/server/request_factory.py#L485\" rel=\"nofollow noreferrer\">https://github.com/tableau/server-client-python/blob/188be71e0fbe9d87ac36628af21d2f63af32d020/tableauserverclient/server/request_factory.py#L485</a></p>\n<p>Unfortunately the API doesnt handle this properly, yet! I am trying to tweak my code to not generate that xml element; will update again if I get to a solution.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 8964926, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dyORmR2hPtA/AAAAAAAAAAI/AAAAAAAAAxs/LBFjuAxRakk/photo.jpg?sz=128", "display_name": "Willy Chen", "link": "https://stackoverflow.com/users/8964926/willy-chen"}, "is_accepted": false, "score": 0, "last_activity_date": 1595820848, "creation_date": 1595820848, "answer_id": 63108316, "question_id": 57402840, "link": "https://stackoverflow.com/questions/57402840/tsc-payload-is-either-malformed-or-incomplete/63108316#63108316", "title": "TSC Payload is either malformed or incomplete", "body": "<p>I'm using tableauserverclient version 0.12 and have face the similar issues; However when I downgrade to version 0.10, I didn't encounter this issue when update workbook project.</p>\n"}], "owner": {"reputation": 497, "user_id": 1552698, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6e826487e5cba93a74003c2e4e7bc712?s=128&d=identicon&r=PG", "display_name": "user1552698", "link": "https://stackoverflow.com/users/1552698/user1552698"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 584, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1595820848, "creation_date": 1565215606, "question_id": 57402840, "link": "https://stackoverflow.com/questions/57402840/tsc-payload-is-either-malformed-or-incomplete", "title": "TSC Payload is either malformed or incomplete", "body": "<p>I am using TableauServerClient to update the owner of a report on Tableau server. Here is my simple code:</p>\n\n<pre><code>Try:\n                single_workbook = server.workbooks.get_by_id(workbook_id)       #default ownerid of fsg_tableaureporting\n                single_workbook.owner_id = ownerid\n\n                if (server.workbooks.update(single_workbook)):\n                    print('Workbook owner has been updated successfully')\n\n                else:\n                    print('Workbook owner could not be updated. Please try again. Exiting..')\n\n            except Exception as e:\n                print('Exceptions occured while changing the owner.')\n                print(e)\n</code></pre>\n\n<p>I get the exception at the statement server.workbooks.update(single_workbook).\nAnyone have any suggestions?    </p>\n\n<p>Python: 3.7.3<br>\nTSC: 0.8.1<br>\nTableau server: 2019.1.3 (20191.19.0417.1429) 64-bit Windows</p>\n"}, {"tags": ["python", "plot", "group-by", "categorical-data"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 7617805, "user_type": "registered", "profile_image": "https://graph.facebook.com/1407778092579213/picture?type=large", "display_name": "Maciej", "link": "https://stackoverflow.com/users/7617805/maciej"}, "edited": false, "score": 0, "creation_date": 1565226251, "post_id": 57403171, "comment_id": 101289375, "body": "Hi Anna, thanks for this. However, in my real dataset I have as many as 12 subcategories, so I think I would be happier with a solution that is not hard coded. Thank you for the brokenaxes link!"}, {"owner": {"reputation": 101, "user_id": 10012830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a995b7ca69a9c63bb2c4904616e205d8?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaB", "link": "https://stackoverflow.com/users/10012830/annab"}, "reply_to_user": {"reputation": 89, "user_id": 7617805, "user_type": "registered", "profile_image": "https://graph.facebook.com/1407778092579213/picture?type=large", "display_name": "Maciej", "link": "https://stackoverflow.com/users/7617805/maciej"}, "edited": false, "score": 0, "creation_date": 1565321886, "post_id": 57403171, "comment_id": 101325261, "body": "Okay, I will see if I can include a method to get those too. What form is your current data in? Is it in like a pandas data frame?"}], "tags": [], "owner": {"reputation": 101, "user_id": 10012830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a995b7ca69a9c63bb2c4904616e205d8?s=128&d=identicon&r=PG&f=1", "display_name": "AnnaB", "link": "https://stackoverflow.com/users/10012830/annab"}, "is_accepted": false, "score": 0, "last_activity_date": 1565219134, "last_edit_date": 1565219134, "creation_date": 1565218251, "answer_id": 57403171, "question_id": 57402833, "link": "https://stackoverflow.com/questions/57402833/python-how-to-plot-counts-of-values-grouped-by-two-columns/57403171#57403171", "title": "Python: How to plot counts of values grouped by two columns?", "body": "<p>I hard coded a few things just to get right to the plotting, so first you will want to create what I have called \"cat1\"-\"cat5\" from your columns of data.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\n\n# data to plot\nn_groups = 3  #number of subcategories\ncat1 = (10,15,16)\ncat2 = (2,8,12)\ncat3 = (33,0,23)\ncat4 = (0,3,0)\ncat5 = (2,0,0)\n\n# create plot\nfig, ax = plt.subplots()\nindex = np.arange(n_groups)\nbar_width = 0.1\n\nrects1 = plt.bar(index, cat1, bar_width, label='1')\nrects2 = plt.bar(index + bar_width, cat2, bar_width, label='2')\nrects3 = plt.bar(index + 2*bar_width, cat3, bar_width, label='3')\nrects4 = plt.bar(index + 3*bar_width, cat4, bar_width, label='4')\nrects5 = plt.bar(index + 4*bar_width, cat5, bar_width, label='5')\n\nplt.xlabel('Subcategory')\nplt.ylabel('Count')\nplt.title('Count by Category')\nplt.xticks(index + bar_width, ('1', '2', '3'))\nplt.legend()\n\nplt.tight_layout()\nplt.show()\n</code></pre>\n\n<p>To answer your second question check out the brokenaxes package: <a href=\"https://github.com/bendichter/brokenaxes\" rel=\"nofollow noreferrer\">https://github.com/bendichter/brokenaxes</a></p>\n"}], "owner": {"reputation": 89, "user_id": 7617805, "user_type": "registered", "profile_image": "https://graph.facebook.com/1407778092579213/picture?type=large", "display_name": "Maciej", "link": "https://stackoverflow.com/users/7617805/maciej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 487, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565219134, "creation_date": 1565215539, "question_id": 57402833, "link": "https://stackoverflow.com/questions/57402833/python-how-to-plot-counts-of-values-grouped-by-two-columns", "title": "Python: How to plot counts of values grouped by two columns?", "body": "<p>I have some data grouped by two columns, with a count column:</p>\n\n<pre><code>  Category  Subcategory  Count\n0        1            1     10\n1        1            2     15\n2        1            3     16\n3        2            1      2\n4        2            2      8\n5        2            3     12\n6        3            1     33\n7        3            3     23\n8        4            2      3\n9        5            1      2\n</code></pre>\n\n<p>I would like to plot a clustered column chart based on the above data.\nNot all categories contain all subcategories, so for these the plot should show 0. I would like to show values as counts of subcategory within a category, as percentage of the category.</p>\n\n<p>Here is an example chart that Has 2 categories and multiple subcategories as separate clusters. I would like to achieve a similar result.</p>\n\n<p><img src=\"https://imge.to/i/AVUiY\" alt=\"x\"> </p>\n\n<p><a href=\"https://imge.to/i/AVUiY\" rel=\"nofollow noreferrer\">https://imge.to/i/AVUiY</a></p>\n\n<p>Additional question: is it possible to get a break in the scale at the Y axis, so that the outlier columns (high values) become smaller, and the small values become more visible?</p>\n"}, {"tags": ["python", "docker-compose"], "comments": [{"owner": {"reputation": 2562, "user_id": 2956135, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceded73393903c6da2bd362a630de60b?s=128&d=identicon&r=PG&f=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/2956135/emma"}, "edited": false, "score": 1, "creation_date": 1565216357, "post_id": 57402798, "comment_id": 101287377, "body": "docker will exit when main process finishes. In your case, app.py is a simple script which ends immediately. If you are intended to make a web app, you need to make app.py to not terminating the main process. You can use any python web framework to do so for easiness."}, {"owner": {"reputation": 5089, "user_id": 125629, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/268e1289a09200334b832839bde8afa7?s=128&d=identicon&r=PG", "display_name": "John Keyes", "link": "https://stackoverflow.com/users/125629/john-keyes"}, "edited": false, "score": 0, "creation_date": 1565218291, "post_id": 57402798, "comment_id": 101287823, "body": "A minimal example to test this would be to change your CMD to <code>[ &quot;python&quot;, &quot;-m&quot;, &quot;http.server&quot;, &quot;5000&quot; ]</code>."}], "owner": {"reputation": 180, "user_id": 7788937, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-4YQkpIO26Cw/AAAAAAAAAAI/AAAAAAAAGJE/NuWFFIbrx-g/photo.jpg?sz=128", "display_name": "Marcos Di Paolo", "link": "https://stackoverflow.com/users/7788937/marcos-di-paolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565215762, "creation_date": 1565215284, "last_edit_date": 1565215762, "question_id": 57402798, "link": "https://stackoverflow.com/questions/57402798/python-and-docker-compose-container-stops", "title": "Python and docker-compose - container stops", "body": "<p>I'm trying to build a hello world app in python with <code>docker-compose</code> and web container won't stay running, it stops on build.</p>\n\n<p><strong>Dockerfile</strong></p>\n\n<pre><code>FROM python:3.7-alpine\n\nADD . /code\nWORKDIR /code\n\nRUN pip install -r requirements.txt\n\nCMD [ \"python\", \"./app.py\" ]\n</code></pre>\n\n<p><strong>docker-compose.yml</strong></p>\n\n<pre><code>version: '3'\nservices:\n    web:\n        build: .\n        ports:\n            - \"5000:5000\"\n        volumes:\n            - \".:/code\"\n</code></pre>\n\n<p><strong>app.py</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>x = 1\nif x == 1:\n    # indented four spaces\n    print(\"x is 1.\")\n</code></pre>\n"}, {"tags": ["python", "pandas", "numpy"], "comments": [{"owner": {"reputation": 2851, "user_id": 8003790, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/439b528b13c53ea231f24bb46136c0a1?s=128&d=identicon&r=PG&f=1", "display_name": "IMCoins", "link": "https://stackoverflow.com/users/8003790/imcoins"}, "edited": false, "score": 0, "creation_date": 1565215472, "post_id": 57402767, "comment_id": 101287146, "body": "This is complicated. Your <code>np,array</code> is a 2 dimensional array, whereas the Series is designed to be a 1 dimensional &quot;&quot;array&quot;&quot;. Using a DataFrame would be possible though, on certain conditions."}], "answers": [{"tags": [], "owner": {"reputation": 491, "user_id": 10338927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3f2364e9386ceda6a5277b75161adad?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/10338927/david"}, "is_accepted": false, "score": 0, "last_activity_date": 1565220619, "last_edit_date": 1565220619, "creation_date": 1565219613, "answer_id": 57403295, "question_id": 57402767, "link": "https://stackoverflow.com/questions/57402767/select-values-in-series-based-on-indices-from-values-in-array/57403295#57403295", "title": "Select values in series based on indices from values in array", "body": "<p>Here is my solution, consisted of first flattening the 2dim array to 1dim, and then recovering the original shape.</p>\n\n<pre class=\"lang-python prettyprint-override\"><code>import pandas as pd\nimport numpy as np\n\nmySeries = pd.Series(range(1, 100, 1))\nmyArray = np.array([[3, 10],[6, 9]])\n\nflatArray = np.asarray(mySeries[myArray.ravel()])\nresultArray = flatArray.reshape(myArray.shape)\n\n# Output results\nprint(resultArray)\n</code></pre>\n\n<p>Which outputs:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>[[ 4 11]\n [ 7 10]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 5418183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ca93bc0ab97ad17630da198407c08b1?s=128&d=identicon&r=PG&f=1", "display_name": "Abdullah Saleh", "link": "https://stackoverflow.com/users/5418183/abdullah-saleh"}, "is_accepted": false, "score": 0, "last_activity_date": 1565220835, "creation_date": 1565220835, "answer_id": 57403428, "question_id": 57402767, "link": "https://stackoverflow.com/questions/57402767/select-values-in-series-based-on-indices-from-values-in-array/57403428#57403428", "title": "Select values in series based on indices from values in array", "body": "<pre><code>resultArray = np.empty(shape=len(myArray), dtype=np.ndarray)\nfor i in range(len(myArray)):\n    row = np.empty(shape=len(myArray[i]))\n    for k in range(len(myArray[i])):\n        v = mySeries[myArray[i,k]]\n        row[k] = v\n    resultArray[i] = row\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 11893426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/071c6fbbba985a7ecce8474faa9d3055?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/11893426/andrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1565233129, "creation_date": 1565233129, "answer_id": 57404601, "question_id": 57402767, "link": "https://stackoverflow.com/questions/57402767/select-values-in-series-based-on-indices-from-values-in-array/57404601#57404601", "title": "Select values in series based on indices from values in array", "body": "<p>Here's an alternative approach that I think is slightly cleaner:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; newArray = mySeries[myArray.flatten()].values\n&gt;&gt;&gt; newArray.shape = myArray.shape\n&gt;&gt;&gt; newArray\narray([[ 4, 11],\n       [ 7, 10]], dtype=int64)\n</code></pre>\n"}], "owner": {"reputation": 535, "user_id": 3862109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27127dd6d7b0b3d971f7637f002bb52e?s=128&d=identicon&r=PG&f=1", "display_name": "AAA", "link": "https://stackoverflow.com/users/3862109/aaa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1565278509, "creation_date": 1565215045, "last_edit_date": 1565278509, "question_id": 57402767, "link": "https://stackoverflow.com/questions/57402767/select-values-in-series-based-on-indices-from-values-in-array", "title": "Select values in series based on indices from values in array", "body": "<p>Say I have a series like</p>\n\n<pre><code>mySeries = pd.Series(range(1, 100, 1))\nmyArray = np.array([[3, 10],[6, 9]])\n</code></pre>\n\n<p>How to use values in <code>myArray</code> as indices to select <code>mySeries</code>?</p>\n\n<p>I would like the resulting array to be <code>np.array([[4,11],[7, 10]])</code>.</p>\n\n<p>For example, the (1,1) element in <code>myArray</code> is 3, so i would like the (1,1) element in my resulting array to be the 3rd element in <code>mySeries</code>, which is 4.</p>\n"}, {"tags": ["python", "dictionary"], "comments": [{"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 0, "creation_date": 1565215682, "post_id": 57402765, "comment_id": 101287194, "body": "Your dict is the exact opposite of what you really need here.  If it was something like <code>{&#39;SAM&#39;: &#39;NICE, &#39;MAIK&#39;, &#39;NICE&#39;, ...</code> you could simply do <code>[dict1[name] for name in arr1]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 791, "user_id": 1532172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f854e6ae20716feee1d28df9633360?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/1532172/brian"}, "is_accepted": false, "score": 1, "last_activity_date": 1565215410, "creation_date": 1565215410, "answer_id": 57402812, "question_id": 57402765, "link": "https://stackoverflow.com/questions/57402765/assign-values-based-on-a-dict/57402812#57402812", "title": "assign values based on a dict", "body": "<p>I think you need the <code>items()</code> function for dictionaries here. For each name, iterate over all of the dictionary pairs and stop when a match is found, adding the corresponding adjective to your list.</p>\n\n<pre><code>lista = []\nfor name in list1:\n    for adjective, names in dict1.items():\n        if name in names:\n            lista.append(adjective)\n            break\nreturn lista\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "edited": false, "score": 1, "creation_date": 1565216335, "post_id": 57402857, "comment_id": 101287369, "body": "Simple and beautiful. I forgot you can make a nested loop in a comprehension."}], "tags": [], "owner": {"reputation": 69906, "user_id": 6890912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d291e4dfbf14dcc8874bd4fa620fac23?s=128&d=identicon&r=PG&f=1", "display_name": "blhsing", "link": "https://stackoverflow.com/users/6890912/blhsing"}, "is_accepted": true, "score": 5, "last_activity_date": 1565215728, "creation_date": 1565215728, "answer_id": 57402857, "question_id": 57402765, "link": "https://stackoverflow.com/questions/57402765/assign-values-based-on-a-dict/57402857#57402857", "title": "assign values based on a dict", "body": "<p>You can create an intermediate dict that maps names to their keys in <code>dict1</code>:</p>\n\n<pre><code>categories = {name: category for category, names in dict1.items() for name in names}\n</code></pre>\n\n<p>so that you can map the names in <code>list1</code> to their respective keys efficiently with:</p>\n\n<pre><code>[categories[name] for name in list1]\n</code></pre>\n\n<p>which returns:</p>\n\n<pre><code>['NICE', 'BAD', 'BAD']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127, "user_id": 11898067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9d0d453f4adeff7eca092de597f00d85?s=128&d=identicon&r=PG&f=1", "display_name": "Blonded", "link": "https://stackoverflow.com/users/11898067/blonded"}, "is_accepted": false, "score": 0, "last_activity_date": 1565215836, "creation_date": 1565215836, "answer_id": 57402873, "question_id": 57402765, "link": "https://stackoverflow.com/questions/57402765/assign-values-based-on-a-dict/57402873#57402873", "title": "assign values based on a dict", "body": "<p>I believe the following will give you your desired output:</p>\n\n<pre><code>    L = [\"SAM\",\"TOM\",\"LOUIS\"]\n    D = {\"NICE\": [\"SAM\", \"MAIK\", \"CARL\", \"LAURA\", \"MARTH\"]\n    , \"BAD\": [\"LOUIS\", \"TOM\", \"KEVIN\"]\n    , \"GOOD\": [\"BILL\", \"JEN\", \"ALEX\"]}\n\n    lista = []\n    for key in D.keys():\n        for name in L:\n            if name in D[key]:\n                lista.append(key)\n    print(lista)\n</code></pre>\n\n<p>The <em>D.keys()</em> part gives you a list of the keys in a friendly manner (e.g, <strong>[\"NICE\", \"BAD\", \"GOOD\"]</strong>). </p>\n\n<p>You iterate over this and then look for each name from L (in order) in the dictionary. </p>\n\n<p>This is not the most efficient way to do this, however, it's a more straightforward approach.</p>\n"}, {"tags": [], "owner": {"reputation": 12014, "user_id": 1658617, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/ba6gt.jpg?s=128&g=1", "display_name": "Bharel", "link": "https://stackoverflow.com/users/1658617/bharel"}, "is_accepted": false, "score": 1, "last_activity_date": 1565216176, "last_edit_date": 1565216176, "creation_date": 1565215875, "answer_id": 57402878, "question_id": 57402765, "link": "https://stackoverflow.com/questions/57402765/assign-values-based-on-a-dict/57402878#57402878", "title": "assign values based on a dict", "body": "<p>There are 2 ways to achieve your result.</p>\n\n<p>The way you intended was to use dict1.items(). Unfortunately, that way is computationally slow, so for the sake of completeness I'll add the the more efficient way:</p>\n\n<pre><code># First, convert the dict to a different representation:\nfrom itertools import chain, repeat\n\n# Change {k: [v1,v2], k2: [v3,v4]} to {v1: k, v2: k, v3: k2, v4: k2}\nname_to_adjective = dict(chain.from_iterable(zip(v, repeat(k)) for k, v in a.items()))\n</code></pre>\n\n<p>Name_to_adjective is now equal to this:</p>\n\n<pre><code>{'ALEX': 'GOOD',\n 'BILL': 'GOOD',\n 'CARL': 'NICE',\n 'JEN': 'GOOD',\n 'KEVIN': 'BAD',\n 'LAURA': 'NICE',\n 'LOUIS': 'BAD',\n 'MAIK': 'NICE',\n 'MARTH': 'NICE',\n 'SAM': 'NICE',\n 'TOM': 'BAD'}\n</code></pre>\n\n<p>Then, you can get your result in one run:</p>\n\n<pre><code>result = [name_to_adjective[name] for name in list1]\n</code></pre>\n"}], "owner": {"reputation": 1997, "user_id": 7836530, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f11697069f27f74c1f2af72df755ef95?s=128&d=identicon&r=PG&f=1", "display_name": "JamesHudson81", "link": "https://stackoverflow.com/users/7836530/jameshudson81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 57402857, "answer_count": 4, "score": 3, "last_activity_date": 1565216176, "creation_date": 1565215035, "question_id": 57402765, "link": "https://stackoverflow.com/questions/57402765/assign-values-based-on-a-dict", "title": "assign values based on a dict", "body": "<p>I have a list1  with names:</p>\n\n<pre><code>   [\"SAM\",\"TOM\",\"LOUIS\"]\n</code></pre>\n\n<p>And I have a dict1 like this (where in the list of values there are no repeated names:</p>\n\n<pre><code>{\"NICE\": [\"SAM\", \"MAIK\", \"CARL\", \"LAURA\", \"MARTH\"],\n \"BAD\": [\"LOUIS\", \"TOM\", \"KEVIN\"],\n \"GOOD\": [\"BILL\", \"JEN\", \"ALEX\"]}\n</code></pre>\n\n<p>How could I iterate throught the list1 so that if any of the names appear in any of the lists of the dict1 it assigns the corresponding key of the dict?</p>\n\n<p>I am looking forward to generate the following output:</p>\n\n<pre><code>[\"NICE\",\"BAD\",\"BAD\"]\n</code></pre>\n\n<p>which would correspond to the keys of the values that appear in the list : SAM, TOM , LOUIS .</p>\n\n<p>This is what I thought about:</p>\n\n<pre><code>lista=[]\nfor k,v in dict1:\n    for values in arr1:\n        if values in v:\n            lista.append(v)\nlista\n</code></pre>\n\n<p>However not sure how to iterate over the different <code>v</code>,  how can I get the desired output in an efficient manner?</p>\n"}, {"tags": ["python", "azure", "azure-data-factory", "databricks"], "comments": [{"owner": {"reputation": 2854, "user_id": 1041953, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c5ceabce974045a89c88d2809580d161?s=128&d=identicon&r=PG", "display_name": "Imran Arshad", "link": "https://stackoverflow.com/users/1041953/imran-arshad"}, "edited": false, "score": 0, "creation_date": 1565216009, "post_id": 57402746, "comment_id": 101287299, "body": "Have you considered azure functions (blob trigger) ? For new file coming into blob you can trigger server less function (Azure Function) that will process and insert the data into your SQL data base. For existing files you can use Azure durable functions and run hundreds of parallel jobs to process those files. All out of box without infra structure worry. Having said that there are few limitations like how much longer you can run the function (10mins in consumption plan).  <a href=\"https://docs.microsoft.com/en-us/azure/azure-functions/functions-create-storage-blob-triggered-function\" rel=\"nofollow noreferrer\">docs.microsoft.com/en-us/azure/azure-functions/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "edited": false, "score": 0, "creation_date": 1565443835, "post_id": 57403063, "comment_id": 101361296, "body": "Thanks.  This helped a lot.  I am on my way now!!"}], "tags": [], "owner": {"reputation": 1873, "user_id": 11833061, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Q8nQv7NqxDE/AAAAAAAAAAI/AAAAAAAAAA4/iOIUdDJ8jvk/photo.jpg?sz=128", "display_name": "Adam Marczak", "link": "https://stackoverflow.com/users/11833061/adam-marczak"}, "is_accepted": true, "score": 1, "last_activity_date": 1565217350, "creation_date": 1565217350, "answer_id": 57403063, "question_id": 57402746, "link": "https://stackoverflow.com/questions/57402746/what-is-the-easiest-way-to-pull-data-from-a-blob-and-load-it-into-a-table-in-sql/57403063#57403063", "title": "What is the easiest way to pull data from a blob and load it into a table in SQL Server?", "body": "<p>I would create Azure Logic App that would</p>\n\n<ol>\n<li>HTTP trigger (this will be manually ran)</li>\n<li>Iterate through all blobs present on storage account</li>\n<li>For each element use blob connector which has action called Extract archive to extract zipped files into blob</li>\n<li>Use Azure SQL BCP to pull this, if this is different format than CSV then use Azure Data Factory</li>\n</ol>\n\n<p>Later if you expect new blobs do similar flow except use New or modified blob trigger. </p>\n\n<p>For Azure SQL BCP from BLOB example with Logic Apps check this article <a href=\"https://marczak.io/posts/azure-loading-csv-to-sql/\" rel=\"nofollow noreferrer\">https://marczak.io/posts/azure-loading-csv-to-sql/</a></p>\n\n<p>And if you want general intro into Azure Logic Apps check this video <a href=\"https://youtu.be/ZvsOzji_8ow\" rel=\"nofollow noreferrer\">https://youtu.be/ZvsOzji_8ow</a> In here there is also new blob trigger demo.</p>\n\n<p>In case you need data factory feel free to check this video. It has blob to sql demo too. Also you can trigger data factory from logic apps too.\n<a href=\"https://youtu.be/EpDkxTHAhOs\" rel=\"nofollow noreferrer\">https://youtu.be/EpDkxTHAhOs</a></p>\n"}], "owner": {"reputation": 15100, "user_id": 5212614, "user_type": "registered", "accept_rate": 32, "profile_image": "https://i.stack.imgur.com/tITr9.jpg?s=128&g=1", "display_name": "ASH", "link": "https://stackoverflow.com/users/5212614/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 1, "accepted_answer_id": 57403063, "answer_count": 1, "score": 1, "last_activity_date": 1565217350, "creation_date": 1565214846, "question_id": 57402746, "link": "https://stackoverflow.com/questions/57402746/what-is-the-easiest-way-to-pull-data-from-a-blob-and-load-it-into-a-table-in-sql", "title": "What is the easiest way to pull data from a blob and load it into a table in SQL Server?", "body": "<p>I have hundreds of zipped files sitting in different folders, which I can access using MS Storage Explorer.  I just setup a SQL Server DB in Azure.  Now I am trying to figure out how I can pull data from each file in each folder, unzip it, parse it, and load it into tables.  The data is coming in daily, so the folders are named '1', '2', '3', etc. '31', for the days of the month.  Also, I have monthly folders '1' through '12', for the 12 months of the year.  Finally, I have folders named '2017', '2018', and '2019'.  I could ask some people on my team to write Python code to do the work, but it seems like there should be an easier way.  I would like to avoid writing thousands of lines of Python code, if there is a simpler way to do this kind of thing.  TIA.</p>\n"}, {"tags": ["python", "ssl", "flask"], "comments": [{"owner": {"reputation": 625, "user_id": 9868018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1MZWb.png?s=128&g=1", "display_name": "Alex Hawking", "link": "https://stackoverflow.com/users/9868018/alex-hawking"}, "edited": false, "score": 0, "creation_date": 1565217856, "post_id": 57402743, "comment_id": 101287736, "body": "Can you add the actual error to your answer?"}, {"owner": {"reputation": 789, "user_id": 9181998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27b69d5d455bc8303be9f4195a68ea43?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/9181998/andre"}, "reply_to_user": {"reputation": 625, "user_id": 9868018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1MZWb.png?s=128&g=1", "display_name": "Alex Hawking", "link": "https://stackoverflow.com/users/9868018/alex-hawking"}, "edited": false, "score": 0, "creation_date": 1565248908, "post_id": 57402743, "comment_id": 101295155, "body": "It doesn&#39;t give any error. When I try to reach the server from any browser it produces the error"}], "owner": {"reputation": 789, "user_id": 9181998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27b69d5d455bc8303be9f4195a68ea43?s=128&d=identicon&r=PG&f=1", "display_name": "Andre", "link": "https://stackoverflow.com/users/9181998/andre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 281, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565214833, "creation_date": 1565214833, "question_id": 57402743, "link": "https://stackoverflow.com/questions/57402743/why-does-flask-produce-a-err-connection-reset", "title": "Why does Flask produce a ERR_CONNECTION_RESET?", "body": "<p>Python code on sever:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from flask import *\nfrom flask_cors import CORS\n\napp = Flask(__name__)\nCORS(app)\n\n@app.route('/')\ndef index():\n    return Response('Index')\nif __name__ == '__main__':\n    app.run(debug=True, host='***.***.***.***', port=80, ssl_context=('certificates/cert.pem', 'certificates/key.pem'))\n</code></pre>\n\n<p>the cert.pem and key.pem files have been generated using:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>openssl req -x509 -newkey rsa:4096 -nodes -out cert.pem -keyout key.pem -days 365\n</code></pre>\n\n<p>and the tutorial available <a href=\"http://openssl%20req%20-x509%20-newkey%20rsa:4096%20-nodes%20-out%20cert.pem%20-keyout%20key.pem%20-days%20365\" rel=\"nofollow noreferrer\">here</a> and they will be soon updated using certbot.</p>\n\n<p>I also tried to check with <code>curl</code> the output using:\n<code>curl -i https://***.***.***.***:80 -k &gt;&gt; CurlOutput.txt</code>\nbut the file is empty.</p>\n\n<p>Is there a way to keep the current certificate until certbot's certificate is ready and also to solve the connection problem?</p>\n"}, {"tags": ["python", "tensorflow", "machine-learning", "keras"], "comments": [{"owner": {"reputation": 4403, "user_id": 3987085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iORQY.jpg?s=128&g=1", "display_name": "gorjan", "link": "https://stackoverflow.com/users/3987085/gorjan"}, "edited": false, "score": 0, "creation_date": 1565215288, "post_id": 57402728, "comment_id": 101287101, "body": "What is the shape of <code>y_true</code> and <code>y_pred</code>?"}, {"owner": {"reputation": 350, "user_id": 6118662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BZg9.jpg?s=128&g=1", "display_name": "linSESH", "link": "https://stackoverflow.com/users/6118662/linsesh"}, "reply_to_user": {"reputation": 4403, "user_id": 3987085, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iORQY.jpg?s=128&g=1", "display_name": "gorjan", "link": "https://stackoverflow.com/users/3987085/gorjan"}, "edited": false, "score": 0, "creation_date": 1565215429, "post_id": 57402728, "comment_id": 101287137, "body": "y_true shape=(?, ?, ?) y_pred shape=(?, 72, 7)"}], "answers": [{"tags": [], "owner": {"reputation": 646, "user_id": 4935621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b958a3597d92affcdcc6fd2e95142eb3?s=128&d=identicon&r=PG&f=1", "display_name": "alexey", "link": "https://stackoverflow.com/users/4935621/alexey"}, "is_accepted": true, "score": 1, "last_activity_date": 1565222041, "creation_date": 1565222041, "answer_id": 57403556, "question_id": 57402728, "link": "https://stackoverflow.com/questions/57402728/modifying-the-tensor-in-a-custom-keras-loss-function/57403556#57403556", "title": "Modifying the tensor in a custom Keras loss function", "body": "<p>there are numerous ways to do it. I would rather go for concatenating of <code>diff[:, :, 6]</code> and  <code>tf.minimum</code> output: </p>\n\n<pre><code>def custom_mean_squared_loss(y_true, y_pred):\n    diff = tf.abs(y_true - y_pred)\n    angle_diff = tf.minimum(diff[:, :, 6:], 360 - diff[:, :, 6:])\n    error = tf.concat([diff[:, :, :6], angle_diff], axis=-1)\n    return tf.mean(error ** 2, axis=-1)\n</code></pre>\n\n<p>you can use <code>tf.while_loop</code> for passing modified tensors through loop steps. but in your case, loops aren't required and could be replaced with tensor operations</p>\n"}], "owner": {"reputation": 350, "user_id": 6118662, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1BZg9.jpg?s=128&g=1", "display_name": "linSESH", "link": "https://stackoverflow.com/users/6118662/linsesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 57403556, "answer_count": 1, "score": 0, "last_activity_date": 1565222041, "creation_date": 1565214691, "question_id": 57402728, "link": "https://stackoverflow.com/questions/57402728/modifying-the-tensor-in-a-custom-keras-loss-function", "title": "Modifying the tensor in a custom Keras loss function", "body": "<p>I am currently trying to modify how the error of one of the variables' my network is trying to predict is computed. I still want to use MSE but I would like to modify the \"difference\" part of the equation (because the variable represents angle degrees). </p>\n\n<p>I have tried a few things, but none has worked yet :</p>\n\n<p>I first tried in a some naive iterative fashion</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def custom_mean_squared_loss(y_true, y_pred):\n  for sample in range(35):\n      for timestep in range(data_shape[1]):\n          error1 = tf.abs(diff[sample][timestep][6])\n          error2 = 360 - error1\n          corrected_err = tf.minimum(error1, error2)\n          test = tf.gather_nd(diff, [[sample, timestep, 6]])\n          test.assign(corrected_err)\n</code></pre>\n\n<p>But as far as I understand, tensorflow needs to have operations clearly \"stated\" in order to evaluate them and compute the gradient of the loss function, so I tried to remove the loops and let it to the job :</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>diff = y_true - y_pred\ndata_shape = y_pred.get_shape()\nerror1 = tf.abs(diff[:][:][6])\nerror2 = 360 - error1\ncorrected_err = tf.minimum(error1, error2)\ndiff[:][:][6].assign(corrected_err)\nreturn tf.mean(tf.square(diff), axis=-1)\n\n</code></pre>\n\n<p>However, I can't manage to make the assignment line compile :</p>\n\n<pre><code>ValueError: Sliced assignment is only supported for variables\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "parsing", "pyparsing"], "comments": [{"owner": {"reputation": 403, "user_id": 1002226, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bb479f56ffc59643498464b5f277e79d?s=128&d=identicon&r=PG", "display_name": "Skaperen", "link": "https://stackoverflow.com/users/1002226/skaperen"}, "edited": false, "score": 1, "creation_date": 1565215304, "post_id": 57402727, "comment_id": 101287102, "body": "i think we&#39;d need to <i>see</i> your parser to advise how to modify it."}, {"owner": {"reputation": 403, "user_id": 1002226, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bb479f56ffc59643498464b5f277e79d?s=128&d=identicon&r=PG", "display_name": "Skaperen", "link": "https://stackoverflow.com/users/1002226/skaperen"}, "edited": false, "score": 1, "creation_date": 1565215855, "post_id": 57402727, "comment_id": 101287255, "body": "why are you not using <code>eval()</code>?"}, {"owner": {"reputation": 403, "user_id": 1002226, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bb479f56ffc59643498464b5f277e79d?s=128&d=identicon&r=PG", "display_name": "Skaperen", "link": "https://stackoverflow.com/users/1002226/skaperen"}, "edited": false, "score": 1, "creation_date": 1565216127, "post_id": 57402727, "comment_id": 101287319, "body": "i do not see where that error message came.  did your code produce it?"}, {"owner": {"reputation": 403, "user_id": 1002226, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bb479f56ffc59643498464b5f277e79d?s=128&d=identicon&r=PG", "display_name": "Skaperen", "link": "https://stackoverflow.com/users/1002226/skaperen"}, "edited": false, "score": 1, "creation_date": 1565216603, "post_id": 57402727, "comment_id": 101287429, "body": "what is <code>NumericStringParser()</code> and where does it come from?"}, {"owner": {"reputation": 403, "user_id": 1002226, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/bb479f56ffc59643498464b5f277e79d?s=128&d=identicon&r=PG", "display_name": "Skaperen", "link": "https://stackoverflow.com/users/1002226/skaperen"}, "edited": false, "score": 1, "creation_date": 1565216998, "post_id": 57402727, "comment_id": 101287535, "body": "this makes me want to go write my own parser in python.  the one i wrote in C back before i started using python does handle tuples or lists."}], "answers": [{"comments": [{"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "reply_to_user": {"reputation": 1225, "user_id": 10525903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2yESx.png?s=128&g=1", "display_name": "TheOneMusic", "link": "https://stackoverflow.com/users/10525903/theonemusic"}, "edited": false, "score": 2, "creation_date": 1565224389, "post_id": 57402806, "comment_id": 101289032, "body": "@TheOneMusic: please don&#39;t do that. If you want to ask a specific question about specific code, put the specific code into your question (as code-formatted text, not as an image nor a link), ideally having reduced it to a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. Once the question is asked, don&#39;t modify it -- or, if you do, expect people who answered (or were working on answers) to the original question to get annoyed and quite possibly become reluctant to work on your future questions. SO is not an interactive debugging/code-writing assistance service. It seeks to be a repository of useful answers to specific questions."}], "tags": [], "owner": {"reputation": 154, "user_id": 9086577, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qo9ql.png?s=128&g=1", "display_name": "NerdyGinger", "link": "https://stackoverflow.com/users/9086577/nerdyginger"}, "is_accepted": false, "score": 1, "last_activity_date": 1565215349, "creation_date": 1565215349, "answer_id": 57402806, "question_id": 57402727, "link": "https://stackoverflow.com/questions/57402727/python-pyparsing-how-to-parse-functions-containing-tuples/57402806#57402806", "title": "python - pyparsing - How to parse functions containing tuples?", "body": "<p>If you would like to pass in a variable number of parameters in python, you will need to use the <code>args</code> keyword. <a href=\"https://stackoverflow.com/questions/919680/can-a-variable-number-of-arguments-be-passed-to-a-function\">This</a> question explains how to do that, but I'll copy the code from the answer here: </p>\n\n<pre><code>  print \"I was called with\", len(arg), \"arguments:\", arg\n\n&gt;&gt;&gt; manyArgs(1)\nI was called with 1 arguments: (1,)\n&gt;&gt;&gt; manyArgs(1, 2,3)\nI was called with 3 arguments: (1, 2, 3)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "edited": false, "score": 2, "creation_date": 1565260748, "post_id": 57404702, "comment_id": 101301564, "body": "Parsing of tuples is actually covered in several examples on the pyparsing GitHub repo.<a href=\"https://github.com/pyparsing/pyparsing\" rel=\"nofollow noreferrer\">github.com/pyparsing/pyparsing</a>."}], "tags": [], "owner": {"reputation": 55852, "user_id": 165216, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U7Xse.jpg?s=128&g=1", "display_name": "PaulMcG", "link": "https://stackoverflow.com/users/165216/paulmcg"}, "is_accepted": true, "score": 2, "last_activity_date": 1565234108, "creation_date": 1565234108, "answer_id": 57404702, "question_id": 57402727, "link": "https://stackoverflow.com/questions/57402727/python-pyparsing-how-to-parse-functions-containing-tuples/57404702#57404702", "title": "python - pyparsing - How to parse functions containing tuples?", "body": "<p>Here is the answer to this and all future \"how do I add Feature X to my parser?\" questions:</p>\n\n<ol>\n<li>Write the pyparsing expression for Feature X.</li>\n<li>Write some test strings for Feature X and make sure they work, using runTests().</li>\n<li>Figure out where it fits into the NumericStringParser. Hint: look for where similar items are used, and where they reside.</li>\n<li>Write some more tests of over-all strings using Feature X.</li>\n<li>Insert Feature X into the parser and run your tests. Make sure all your previous tests still pass too.</li>\n</ol>\n\n<p>If this problem is too challenging for you, then you have more learning to do than to just copy-paste code from Google. StackOverflow is for answering specific questions, not broad questions that are actually the topic of semester courses in CS.</p>\n"}], "owner": {"reputation": 1225, "user_id": 10525903, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2yESx.png?s=128&g=1", "display_name": "TheOneMusic", "link": "https://stackoverflow.com/users/10525903/theonemusic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 57404702, "answer_count": 2, "score": -1, "last_activity_date": 1595246475, "creation_date": 1565214690, "last_edit_date": 1595246475, "question_id": 57402727, "link": "https://stackoverflow.com/questions/57402727/python-pyparsing-how-to-parse-functions-containing-tuples", "title": "python - pyparsing - How to parse functions containing tuples?", "body": "<p>So I am making a parser, but the program doesn't parse functions that have tuples as arguments. For example, when I use the <code>dist</code> function defined as below:</p>\n<pre class=\"lang-py prettyprint-override\"><code>def dist(p, q):\n    &quot;&quot;&quot;Returns the Euclidean distance between two points p and q, each given as a sequence (or iterable) of coordinates. The two points must have the same dimension.&quot;&quot;&quot;\n    if not isinstance(p, tuple):\n        p = p,\n    if not isinstance(q, tuple):\n        q = q,\n    if not p or not q:\n        raise TypeError\n    if len(p)!=len(q):\n        raise ValueError\n    return math.sqrt(sum((px - qx) ** 2.0 for px, qx in zip(p, q)))\n</code></pre>\n<p>Here is the result:</p>\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt; evaluate(&quot;dist(5, 2)&quot;)\n3\n\n&gt;&gt; evaluate(&quot;dist((5, 2), (3, 4))&quot;)\nSyntaxError: Expected end of text, found '('  (at char 4), (line:1, col:5)\n</code></pre>\n<p>How can I modify the parser to accept tuple function arguments, so that <code>evaluate(&quot;dist((5, 2), (3, 4))&quot;)</code> returns <code>2.8284271247461903</code>?</p>\n"}, {"tags": ["python", "python-3.x", "macos", "bundle"], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 8109137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8650133a0df84762873e1f79b2d353?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Haberkorn", "link": "https://stackoverflow.com/users/8109137/sam-haberkorn"}, "edited": false, "score": 0, "creation_date": 1565275090, "post_id": 57402706, "comment_id": 101310229, "body": "This works great, but I have run into issues adding multiple images. Do you have any experience with this?"}, {"owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "reply_to_user": {"reputation": 67, "user_id": 8109137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8650133a0df84762873e1f79b2d353?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Haberkorn", "link": "https://stackoverflow.com/users/8109137/sam-haberkorn"}, "edited": false, "score": 0, "creation_date": 1565281334, "post_id": 57402706, "comment_id": 101313679, "body": "Yep, so what I usually do is create a sub directory which stores all dependencies for your app. You need to add it to the analysis section of the spec sheet. Read the adding data section on <a href=\"https://pyinstaller.readthedocs.io/en/stable/spec-files.html\" rel=\"nofollow noreferrer\">this page</a> and that will get you started."}], "tags": [], "owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "is_accepted": true, "score": 1, "last_activity_date": 1565214523, "creation_date": 1565214523, "answer_id": 57402706, "question_id": 57402681, "link": "https://stackoverflow.com/questions/57402681/how-to-create-a-mac-app-from-python-files/57402706#57402706", "title": "How to create a mac app from python files", "body": "<p>Use PyInstaller to build your package. I do not think they have an actual installer, but you could build your own GUI installer by using some CMD commands and something like tkinter. </p>\n"}, {"tags": [], "owner": {"reputation": 677, "user_id": 955487, "user_type": "registered", "accept_rate": 35, "profile_image": "https://i.stack.imgur.com/a2bC6.png?s=128&g=1", "display_name": "Max00355", "link": "https://stackoverflow.com/users/955487/max00355"}, "is_accepted": false, "score": 0, "last_activity_date": 1565215554, "creation_date": 1565215554, "answer_id": 57402836, "question_id": 57402681, "link": "https://stackoverflow.com/questions/57402681/how-to-create-a-mac-app-from-python-files/57402836#57402836", "title": "How to create a mac app from python files", "body": "<p>I have used py2app for this in the past (<a href=\"https://py2app.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\">https://py2app.readthedocs.io/en/latest/</a>)</p>\n\n<p>This article does a good job of explaining how to use it (<a href=\"https://www.metachris.com/2015/11/create-standalone-mac-os-x-applications-with-python-and-py2app/\" rel=\"nofollow noreferrer\">https://www.metachris.com/2015/11/create-standalone-mac-os-x-applications-with-python-and-py2app/</a>)</p>\n\n<p>Basically you install the library and create a setup.py file that looks something like this</p>\n\n<pre><code>from setuptools import setup\n\nAPP = ['Sandwich.py']\nAPP_NAME = \"SuperSandwich\"\nDATA_FILES = []\n\nOPTIONS = {\n    'argv_emulation': True,\n    'iconfile': 'app.icns',\n    'plist': {\n        'CFBundleName': APP_NAME,\n        'CFBundleDisplayName': APP_NAME,\n        'CFBundleGetInfoString': \"Making Sandwiches\",\n        'CFBundleIdentifier': \"com.metachris.osx.sandwich\",\n        'CFBundleVersion': \"0.1.0\",\n        'CFBundleShortVersionString': \"0.1.0\",\n        'NSHumanReadableCopyright': u\"Copyright \u00a9 2015, Chris Hager, All Rights Reserved\"\n    }\n}\n\nsetup(\n    name=APP_NAME,\n    app=APP,\n    data_files=DATA_FILES,\n    options={'py2app': OPTIONS},\n    setup_requires=['py2app'],\n)\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 8109137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f8650133a0df84762873e1f79b2d353?s=128&d=identicon&r=PG&f=1", "display_name": "Sam Haberkorn", "link": "https://stackoverflow.com/users/8109137/sam-haberkorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 57402706, "answer_count": 2, "score": 1, "last_activity_date": 1565215554, "creation_date": 1565214378, "question_id": 57402681, "link": "https://stackoverflow.com/questions/57402681/how-to-create-a-mac-app-from-python-files", "title": "How to create a mac app from python files", "body": "<p>I currently have a python application that runs perfectly from the CLI and when I run it from an IDE. I want to make it into an application that will launch in 1 click from any mac computer. (Like any desktop application). Ideally, I can send someone the file, they do a simple install, then the program works. I have tried using platypus (works great for 1 file programs) and other methods of bundling apps. But none of them seem to work as the program is kinda complex.</p>\n\n<p>Program Requirements:</p>\n\n<ul>\n<li><p>Python3</p></li>\n<li><p>Python Libraries tkinter, socket, threading, PIL etc</p></li>\n<li><p>~8 individual python files (controlled by 1 main menu)</p></li>\n<li><p>Lots of images</p></li>\n</ul>\n\n<p>I would like to have an install process, where you click next a bunch of times and agree to things, but if this isn't possible I can live without it.</p>\n\n<p>Any help is greatly appreciated!</p>\n"}, {"tags": ["python", "twitter", "data-cleaning"], "comments": [{"owner": {"reputation": 791, "user_id": 1532172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f854e6ae20716feee1d28df9633360?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/1532172/brian"}, "edited": false, "score": 1, "creation_date": 1565214561, "post_id": 57402652, "comment_id": 101286911, "body": "I&#39;d recommend using regular expressions to match the specific hex codes or URLs you&#39;d like to remove. Then use <code>replace()</code> to remove them."}, {"owner": {"reputation": 463, "user_id": 9758284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wuapn.jpg?s=128&g=1", "display_name": "Tino", "link": "https://stackoverflow.com/users/9758284/tino"}, "edited": false, "score": 0, "creation_date": 1565214686, "post_id": 57402652, "comment_id": 101286947, "body": "Try <code>tweet_text.encode(&#39;ascii&#39;, &#39;ignore&#39;).decode(&#39;ascii&#39;)</code>"}], "owner": {"reputation": 1, "user_id": 11898539, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156007877006371/picture?type=large", "display_name": "Cody Kane", "link": "https://stackoverflow.com/users/11898539/cody-kane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565217051, "creation_date": 1565214188, "last_edit_date": 1565217051, "question_id": 57402652, "link": "https://stackoverflow.com/questions/57402652/removing-emoji-image-hexcodes-from-twitter-data", "title": "Removing emoji/image hexcodes from twitter data", "body": "<p>I've downloaded a set of tweets as a csv file. I'm doing my EDA, but there are hexcodes in the data for emojis, and/or image links. How can I remove them across the entire dataset? </p>\n\n<p>Below is what I did to replace the apostrophe hex code with an actual apostrophe, but that won't work because the emoji codes are different and I want to remove not replace them. The df is new_tweets, and just has the index and the text column. Each row in the text column is a tweet. Some examples(url shorteners don't pass thru S.O.'s spam filter so read it as such) : \n\"'gratitude and happiness best describe what my wife means to me. I'm deeply grateful and purely happy \\xf0\\x9f\\x98\\x8a'\" </p>\n\n<p>\"'set in Goudy font, from Chicago <em>url shortener</em>'\"</p>\n\n<p>Any ideas on how to remove the emojis (first example) or links (second example) from all the tweets in my dataframe? </p>\n\n<pre><code>new_tweets['text'] = new_tweets['text'].apply(lambda x:x.replace('\\\\xe2\\\\x80\\\\x99',\"'\"))\n</code></pre>\n"}, {"tags": ["python", "string", "for-loop", "list-comprehension", "string-matching"], "comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1565213663, "post_id": 57402555, "comment_id": 101286642, "body": "<code>a.extend(term)</code> =&gt; <code>a.append(term)</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1565213723, "post_id": 57402555, "comment_id": 101286662, "body": "or <code>a = [term for t in b for term in terms if t in term]</code>"}, {"owner": {"reputation": 171, "user_id": 10997663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/330c5a163127d70da71236b19dd30765?s=128&d=identicon&r=PG&f=1", "display_name": "sheth7", "link": "https://stackoverflow.com/users/10997663/sheth7"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1565218823, "post_id": 57402555, "comment_id": 101287940, "body": "Thank you. This worked."}], "answers": [{"tags": [], "owner": {"reputation": 486, "user_id": 3769076, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/567542871/picture?type=large", "display_name": "solbs", "link": "https://stackoverflow.com/users/3769076/solbs"}, "is_accepted": true, "score": -1, "last_activity_date": 1565281896, "last_edit_date": 1565281896, "creation_date": 1565213805, "answer_id": 57402595, "question_id": 57402555, "link": "https://stackoverflow.com/questions/57402555/selecting-strings-containing-at-least-one-string-as-substring/57402595#57402595", "title": "selecting strings containing at least one string as substring", "body": "<p>Use <code>append</code> instead of <code>extend</code> -- google the difference :-)</p>\n\n<p>A nice pythonic solution is this double list-comprehension with a conditional:</p>\n\n<pre><code>[t for w in b for t in terms if w in t]\n</code></pre>\n\n<p>Output: </p>\n\n<pre><code>[\n 'materi advers effect',\n 'mani factor',\n 'materi advers impact',\n 'materi impact',\n 'materi advers affect',\n 'materi affect',\n 'market risk'\n]\n</code></pre>\n\n<p>Does that get you what you're after?</p>\n"}], "owner": {"reputation": 171, "user_id": 10997663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/330c5a163127d70da71236b19dd30765?s=128&d=identicon&r=PG&f=1", "display_name": "sheth7", "link": "https://stackoverflow.com/users/10997663/sheth7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 57402595, "answer_count": 1, "score": 0, "last_activity_date": 1565283192, "creation_date": 1565213561, "last_edit_date": 1565283192, "question_id": 57402555, "link": "https://stackoverflow.com/questions/57402555/selecting-strings-containing-at-least-one-string-as-substring", "title": "selecting strings containing at least one string as substring", "body": "<p>I have a list of terms: </p>\n\n<pre><code>terms = [\n     'mani factor',\n     'manner',\n     'manufactur',\n     'manufactur distribut',\n     'manufactur facil',\n     'manufactur oper',\n     'manufactur process',\n     'march',\n     'margin',\n     'market advers',\n     'market condit',\n     'market disrupt',\n     'market price',\n     'market product',\n     'market result',\n     'market risk',\n     'market sale',\n     'market share',\n     'market valu',\n     'materi advers',\n     'materi advers affect',\n     'materi advers effect',\n     'materi advers impact',\n     'materi affect',\n     'materi impact'\n]\n</code></pre>\n\n<p>and another set of terms b:</p>\n\n<pre><code>b = set(['risk','factor','effect','affect','impact'])\n</code></pre>\n\n<p>I want to find terms that contain at least one of the terms in b. I tried the following:</p>\n\n<pre><code>for t in b:\n    for term in terms:\n        if t in term:\n            a.extend(term)\n</code></pre>\n\n<p>It leads to this output:</p>\n\n<pre><code>'a', 'n', 'i', ' ', 'f', 'a', 'c', 't', 'o', 'r', 'e', 'c', 'o', 'n', 'o', 'm', ' ', 'f', 'a', 'c', 't', 'o', 'r', 'f', 'a', 'c', 't', 'o', 'r', ' ', 'a', 'f', 'f', 'e', 'c', 't', 'f', 'a', 'c', 't', 'o', 'r', ' ', 'c', 'a', 'u', 's', 'f', 'a', 'c', 't', 'o', 'r', ' ', 'c', 'o', 'n', 't', 'r', 'o\n</code></pre>\n"}, {"tags": ["python", "html", "django"], "comments": [{"owner": {"reputation": 5089, "user_id": 125629, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/268e1289a09200334b832839bde8afa7?s=128&d=identicon&r=PG", "display_name": "John Keyes", "link": "https://stackoverflow.com/users/125629/john-keyes"}, "edited": false, "score": 0, "creation_date": 1565218623, "post_id": 57402536, "comment_id": 101287901, "body": "The absolute URL shouldn&#39;t change for a resource. It should always remain the same. What that URL returns can change though. In your <code>post-detail</code> view you can check to see if the article has been reviewed. If it has return the article, if it has not you can display the under-review content."}, {"owner": {"reputation": 330, "user_id": 7355857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c88203da4ee7e6f4f9458a0795c63b?s=128&d=identicon&r=PG&f=1", "display_name": "Max Loyd", "link": "https://stackoverflow.com/users/7355857/max-loyd"}, "reply_to_user": {"reputation": 5089, "user_id": 125629, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/268e1289a09200334b832839bde8afa7?s=128&d=identicon&r=PG", "display_name": "John Keyes", "link": "https://stackoverflow.com/users/125629/john-keyes"}, "edited": false, "score": 0, "creation_date": 1565293597, "post_id": 57402536, "comment_id": 101318790, "body": "@JohnKeyes Ah that sounds exactly what I need. Would you be able to post an answer to this question showing me an example on how I would do this, as I am a little lost on how to do that. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 5089, "user_id": 125629, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/268e1289a09200334b832839bde8afa7?s=128&d=identicon&r=PG", "display_name": "John Keyes", "link": "https://stackoverflow.com/users/125629/john-keyes"}, "is_accepted": true, "score": 1, "last_activity_date": 1565302676, "creation_date": 1565302676, "answer_id": 57421317, "question_id": 57402536, "link": "https://stackoverflow.com/questions/57402536/i-need-my-django-get-absolute-url-to-do-two-different-things/57421317#57421317", "title": "I need my Django get_absolute_url to do two different things", "body": "<p>I'm going to make some assumptions here but it should be enough to steer you in the correct direction. The following is some pseudo code, you can adapt as you need.</p>\n\n<p>Let's say you have an <code>Article</code> model like:</p>\n\n<pre><code>class Article(models.Model):\n    is_reviewed = models.BooleanField()\n</code></pre>\n\n<p>Then your <code>post-detail</code> view can check this field:</p>\n\n<pre><code>def get_post_detail(request, article_id):\n    article = Article.objects.get(id=article_id)\n    if post.is_reviewed:\n        return render(request, 'myapp/article.html', {'article': article}) \n    return render(request, 'myapp/under_review.html', {'article': article}) \n\n</code></pre>\n"}], "owner": {"reputation": 330, "user_id": 7355857, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6c88203da4ee7e6f4f9458a0795c63b?s=128&d=identicon&r=PG&f=1", "display_name": "Max Loyd", "link": "https://stackoverflow.com/users/7355857/max-loyd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 57421317, "answer_count": 1, "score": -1, "last_activity_date": 1565302676, "creation_date": 1565213474, "question_id": 57402536, "link": "https://stackoverflow.com/questions/57402536/i-need-my-django-get-absolute-url-to-do-two-different-things", "title": "I need my Django get_absolute_url to do two different things", "body": "<p>So I have a small issue with one of my models when I want to fire <code>get_absolute_url</code>.</p>\n\n<p>When someone create's an article on my site I would like it to return them to the 'under-review' page to tell them that there page is currently under review. But the  issue is that my sitemap is showing that every article comes up as <code>www.example.com/under-review/</code> instead of <code>www.example.com/post/example-slug</code></p>\n\n<p>I would normally use <code>return reverse('post-detail', kwargs={'slug': self.slug})</code> for that which fixes the problem. But then brings up the issue that when someone creates the article, it takes them straight to the page instead of the <code>under-review</code> page.</p>\n\n<p>Model:</p>\n\n<pre><code>def get_absolute_url(self):\n        # return reverse('post-detail', kwargs={'slug': self.slug})\n        return reverse('under-review')\n</code></pre>\n\n<p>Ideally I would have it so when someone posts a post, it takes them to the <code>under-review</code> page up at the same time serves the <code>return reverse('post-detail', kwargs={'slug': self.slug})</code> so it shows up correctly in my sitemap.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["python", "matplotlib", "axes", "colorbar", "divider"], "comments": [{"owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "edited": false, "score": 0, "creation_date": 1565213662, "post_id": 57402528, "comment_id": 101286641, "body": "This looks like a <a href=\"https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a> to me. Maybe you could tell us more about what you are trying to achieve with this complicated setup. Maybe a better idea is to prevent the colorbar from resizing the Axes in the first place?"}, {"owner": {"reputation": 369, "user_id": 3401634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yXq0R.jpg?s=128&g=1", "display_name": "Max16hr", "link": "https://stackoverflow.com/users/3401634/max16hr"}, "reply_to_user": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "edited": false, "score": 0, "creation_date": 1565214111, "post_id": 57402528, "comment_id": 101286783, "body": "Yes, I have a complex case with many axes in a Gridspec (2x4). Some of them will get a colorbar, others will not. I need to change the size of those axes having a colorbar, so that axes+colorbar has the same size like axes without colorbar. Later, I am removing some color bars again and I want the axes beeing back in their original size and position. This does not happen."}], "answers": [{"tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 2, "last_activity_date": 1565223462, "creation_date": 1565223462, "answer_id": 57403704, "question_id": 57402528, "link": "https://stackoverflow.com/questions/57402528/matplotlib-how-to-remove-a-color-bar-the-proper-way/57403704#57403704", "title": "Matplotlib: How to remove a color bar the proper way?", "body": "<p><code>make_axes_locatable</code> sets the axes locator to a new locator. To reverse this step you need to keep track of the old locator (<code>original_loc = ax.get_axes_locator()</code>) and reset it to the axes (<code>ax.set_axes_locator(original_loc)</code>) after you removed the colorbar.</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.axes_grid1 import make_axes_locatable\n\n# Init figure\nfig, ax = plt.subplots()\nax.set_aspect(1)\n\n# Create some random stuff\nimage = ax.imshow(np.random.random((10, 10)))\nplt.pause(2)\n\n# Add a color bar to the axes\noriginal_loc = ax.get_axes_locator()\ncax = make_axes_locatable(ax).append_axes(\"right\", size=\"5%\", pad=0.05)\ncolorBar = fig.colorbar(image, cax=cax)\ncolorBar.ax.tick_params(length=0, labelright=False)\nplt.pause(2)\n\n# Remove the color bar\ncolorBar.remove()\nax.set_axes_locator(original_loc)\nplt.pause(0.0001)\n\nplt.show()\n</code></pre>\n"}], "owner": {"reputation": 369, "user_id": 3401634, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yXq0R.jpg?s=128&g=1", "display_name": "Max16hr", "link": "https://stackoverflow.com/users/3401634/max16hr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 458, "favorite_count": 0, "accepted_answer_id": 57403704, "answer_count": 1, "score": 2, "last_activity_date": 1565223462, "creation_date": 1565213413, "last_edit_date": 1565217051, "question_id": 57402528, "link": "https://stackoverflow.com/questions/57402528/matplotlib-how-to-remove-a-color-bar-the-proper-way", "title": "Matplotlib: How to remove a color bar the proper way?", "body": "<p>I want to remove a color bar from an axes in that way that the axes will return to its default position.</p>\n\n<p>To make it clear, have a look at this code (or better run it):</p>\n\n<pre><code>import numpy as np\nimport matplotlib.pyplot as plt\nfrom mpl_toolkits.axes_grid1 import make_axes_locatable\n\n# Init figure\nfigure, axes = plt.subplots()\naxes.set_aspect(1)\n\n# Create some random stuff\nimage = axes.imshow(np.random.random((10, 10)))\nplt.pause(2)\n\n# Add a color bar to the axes\ncax = make_axes_locatable(axes).append_axes(\"right\", size=\"5%\", pad=0.05)\ncolorBar = figure.colorbar(image, cax=cax)\ncolorBar.ax.tick_params(length=0, labelright=False)\nplt.pause(2)\n\n# Remove the color bar\ncolorBar.remove()\n\nplt.show()\n</code></pre>\n\n<p>As you see, the following happens: In that moment I add the color bar to the axes, the axes itself is changing its position a litte bit. It is moving to the left to create some space for the color bar. In a more complex case, e.g. in a Gridspec, it might also change its size a bit.</p>\n\n<p>What I want to get: In that moment I am removing the colorbar again, I want to get the axes back in its original position (and its original size).</p>\n\n<p>This does not happen automatically when I remove the color bar. The axes is still on its left position and not back in the center.\nHow do I achieve that?</p>\n\n<p>I need something like the inverse of <code>make_axes_locateable</code>.</p>\n\n<p>Thanks a lot :)</p>\n"}, {"tags": ["python", "python-3.x", "google-cloud-platform", "gcloud"], "comments": [{"owner": {"reputation": 296, "user_id": 11883274, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-KDbjq05eDkY/AAAAAAAAAAI/AAAAAAAAAAc/WPFLMOtCJXs/photo.jpg?sz=128", "display_name": "Unicorn Tears", "link": "https://stackoverflow.com/users/11883274/unicorn-tears"}, "edited": false, "score": 2, "creation_date": 1565216157, "post_id": 57402506, "comment_id": 101287327, "body": "Do you mean you want to know what changed in the versions as the package moved from gcloud to google-cloud (and then on to google-cloud-*)? My guess would be that is in the git change history, does that give any indication?"}], "answers": [{"tags": [], "owner": {"reputation": 180, "user_id": 8191648, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-7ncbrIZgm8w/AAAAAAAAAAI/AAAAAAABN5E/qm95P2pnMaw/photo.jpg?sz=128", "display_name": "Ryan Joseph", "link": "https://stackoverflow.com/users/8191648/ryan-joseph"}, "is_accepted": true, "score": 2, "last_activity_date": 1565220191, "creation_date": 1565220191, "answer_id": 57403353, "question_id": 57402506, "link": "https://stackoverflow.com/questions/57402506/whats-the-difference-between-the-gcloud-and-google-cloud-modules-in-python/57403353#57403353", "title": "Whats the difference between the gcloud and google-cloud modules in python", "body": "<p>It went from <a href=\"https://pypi.org/project/gcloud/\" rel=\"nofollow noreferrer\">gcloud</a> to <a href=\"https://pypi.org/project/google-cloud/\" rel=\"nofollow noreferrer\">google-cloud</a> and later to google-cloud-* </p>\n\n<p>It is now strongly recommended to install the <a href=\"https://github.com/googleapis/google-cloud-python\" rel=\"nofollow noreferrer\">specific</a> <a href=\"https://github.com/googleapis/google-api-python-client\" rel=\"nofollow noreferrer\">google cloud</a> package you would like to use with your application, as the google-cloud package has been deprecated.</p>\n\n<p><a href=\"https://cloud.google.com/sdk/gcloud/\" rel=\"nofollow noreferrer\">gcloud</a> is now a command-line tool that comes with the <a href=\"https://cloud.google.com/sdk/\" rel=\"nofollow noreferrer\">Cloud SDK</a></p>\n"}], "owner": {"reputation": 4110, "user_id": 3810748, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/H7MEA.png?s=128&g=1", "display_name": "AlanSTACK", "link": "https://stackoverflow.com/users/3810748/alanstack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 57403353, "answer_count": 1, "score": 1, "last_activity_date": 1565220191, "creation_date": 1565213303, "question_id": 57402506, "link": "https://stackoverflow.com/questions/57402506/whats-the-difference-between-the-gcloud-and-google-cloud-modules-in-python", "title": "Whats the difference between the gcloud and google-cloud modules in python", "body": "<p>As the title says,</p>\n\n<p>Can someone explain to me what the difference between these two modules are?</p>\n\n<pre><code>python -m pip install gcloud\n</code></pre>\n\n<p>vs </p>\n\n<pre><code>python -m pip install google-cloud\n</code></pre>\n"}, {"tags": ["python", "string", "dictionary", "parsing"], "answers": [{"comments": [{"owner": {"reputation": 463, "user_id": 9758284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wuapn.jpg?s=128&g=1", "display_name": "Tino", "link": "https://stackoverflow.com/users/9758284/tino"}, "reply_to_user": {"reputation": 23, "user_id": 11810315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03ecaedbc6de7997563ec094720ec70e?s=128&d=identicon&r=PG&f=1", "display_name": "aapg07", "link": "https://stackoverflow.com/users/11810315/aapg07"}, "edited": false, "score": 0, "creation_date": 1565215666, "post_id": 57402544, "comment_id": 101287191, "body": "@aapg07 Try following: <code>res_data = response.json()</code>"}, {"owner": {"reputation": 463, "user_id": 9758284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wuapn.jpg?s=128&g=1", "display_name": "Tino", "link": "https://stackoverflow.com/users/9758284/tino"}, "reply_to_user": {"reputation": 23, "user_id": 11810315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03ecaedbc6de7997563ec094720ec70e?s=128&d=identicon&r=PG&f=1", "display_name": "aapg07", "link": "https://stackoverflow.com/users/11810315/aapg07"}, "edited": false, "score": 0, "creation_date": 1565216904, "post_id": 57402544, "comment_id": 101287509, "body": "First of all you should&#39;ve included it in your question. But still. Try printing data and take a look at it&#39;s structure, then adjust your conditions."}, {"owner": {"reputation": 23, "user_id": 11810315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03ecaedbc6de7997563ec094720ec70e?s=128&d=identicon&r=PG&f=1", "display_name": "aapg07", "link": "https://stackoverflow.com/users/11810315/aapg07"}, "edited": false, "score": 0, "creation_date": 1565218912, "post_id": 57402544, "comment_id": 101287954, "body": "This worked for me..  thank you!"}], "tags": [], "owner": {"reputation": 463, "user_id": 9758284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wuapn.jpg?s=128&g=1", "display_name": "Tino", "link": "https://stackoverflow.com/users/9758284/tino"}, "is_accepted": true, "score": 0, "last_activity_date": 1565213501, "creation_date": 1565213501, "answer_id": 57402544, "question_id": 57402504, "link": "https://stackoverflow.com/questions/57402504/how-to-parse-particular-values-from-string-of-dictionaries/57402544#57402544", "title": "How to parse particular values from string of dictionaries", "body": "<pre><code>output = []\nfor item in items:\n    if item['channel'] == 44:\n        output.append(item['name'], item['channel'])\n\n</code></pre>\n\n<p>Where <strong>items</strong> is your list of dicts.\nAll the data you need will be in <strong>output</strong></p>\n"}, {"tags": [], "owner": {"reputation": 359, "user_id": 11190396, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OwMmr.jpg?s=128&g=1", "display_name": "Joshua Loader", "link": "https://stackoverflow.com/users/11190396/joshua-loader"}, "is_accepted": false, "score": 0, "last_activity_date": 1565213673, "creation_date": 1565213673, "answer_id": 57402570, "question_id": 57402504, "link": "https://stackoverflow.com/questions/57402504/how-to-parse-particular-values-from-string-of-dictionaries/57402570#57402570", "title": "How to parse particular values from string of dictionaries", "body": "<pre class=\"lang-py prettyprint-override\"><code>dictionary = [\n  {\n    \"name\": \"abc\",  \n    \"channel\": 44,\n    \"band\": 12 \n    }, \n  {\n    \"name\": \"abcd\",  \n    \"channel\": 45, \n    \"band\": 1\n    },\n  {\n    \"name\": \"ab\",  \n    \"channel\": 46,\n    \"band\": 4 \n    },\n  {\n    \"name\": \"abc1\",  \n    \"channel\": 44, \n     \"band\": 15\n    },\n {\n    \"name\": \"abc12\",  \n    \"channel\": 44, \n     \"band\": 11\n    }\n]\n\n\nfor element in dictionary:\n    if element['channel'] == 44:\n        print('\\'name\\': {0}, \\'channel\\': {1}'.format(element['name'], element['channel']))\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11810315, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03ecaedbc6de7997563ec094720ec70e?s=128&d=identicon&r=PG&f=1", "display_name": "aapg07", "link": "https://stackoverflow.com/users/11810315/aapg07"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "closed_date": 1565213623, "accepted_answer_id": 57402544, "answer_count": 2, "score": -1, "last_activity_date": 1565213673, "creation_date": 1565213300, "question_id": 57402504, "link": "https://stackoverflow.com/questions/57402504/how-to-parse-particular-values-from-string-of-dictionaries", "closed_reason": "Duplicate", "title": "How to parse particular values from string of dictionaries", "body": "<p>I'm Unable to parse items out of a string of dictionaries using python:</p>\n\n<pre><code>[\n  {\n    \"name\": \"abc\",  \n    \"channel\": 44,\n    \"band\": 12 \n    }, \n  {\n    \"name\": \"abcd\",  \n    \"channel\": 45, \n    \"band\": 1\n    },\n  {\n    \"name\": \"ab\",  \n    \"channel\": 46,\n    \"band\": 4 \n    },\n  {\n    \"name\": \"abc1\",  \n    \"channel\": 44, \n     \"band\": 15\n    },\n {\n    \"name\": \"abc12\",  \n    \"channel\": 44, \n     \"band\": 11\n    },\n.\n.\n\n</code></pre>\n\n<p>looking to fetch channel &amp; name only from dictionaries whose channel =44</p>\n\n<p>expected output:</p>\n\n<pre><code>'name': 'abc', 'channel': 44\n'name': 'abc1', 'channel': 44\n'name': 'abc12', 'channel': 44\n</code></pre>\n\n<p>Kindly help!</p>\n"}, {"tags": ["python", "python-3.x", "package", "installation", "python-embedding"], "comments": [{"owner": {"reputation": 463, "user_id": 9758284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wuapn.jpg?s=128&g=1", "display_name": "Tino", "link": "https://stackoverflow.com/users/9758284/tino"}, "edited": false, "score": 1, "creation_date": 1565214068, "post_id": 57402503, "comment_id": 101286769, "body": "Have you tried <a href=\"https://github.com/palash1992/GEM#install\" rel=\"nofollow noreferrer\">github.com/palash1992/GEM#install</a> ?"}, {"owner": {"reputation": 21, "user_id": 11018040, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BNIbpR6Ydog/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO1qHWNuQIXYTemyYhyNCzAEAJV3w/mo/photo.jpg?sz=128", "display_name": "Laya.A", "link": "https://stackoverflow.com/users/11018040/laya-a"}, "reply_to_user": {"reputation": 463, "user_id": 9758284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wuapn.jpg?s=128&g=1", "display_name": "Tino", "link": "https://stackoverflow.com/users/9758284/tino"}, "edited": false, "score": 0, "creation_date": 1566248478, "post_id": 57402503, "comment_id": 101589442, "body": "I solved the issue installing                                                                                       1.git software on my system and                                                                           2.add git.exe and cmd file in windows path.                                                                                          3.then typing this command in my cmd prompt:                                                           &quot;pip install git+<a href=\"https://github.com/palash1992/GEM\" rel=\"nofollow noreferrer\">github.com/palash1992/GEM</a>&quot;                                                           but thanks for contributions."}], "answers": [{"tags": [], "owner": {"reputation": 117, "user_id": 11780961, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6SkvhpdQHh4/AAAAAAAAAAI/AAAAAAAAAAg/WlysG-KmeMQ/photo.jpg?sz=128", "display_name": "DjoleRkc", "link": "https://stackoverflow.com/users/11780961/djolerkc"}, "is_accepted": false, "score": 0, "last_activity_date": 1565215125, "creation_date": 1565215125, "answer_id": 57402779, "question_id": 57402503, "link": "https://stackoverflow.com/questions/57402503/how-to-install-gem-package-availble-for-python-in-github/57402779#57402779", "title": "how to install GEM package availble for python in GitHub?", "body": "<p>As @Tino said, your answer could be in the GitHub readme file. Here are the instructions:</p>\n\n<p>The package uses setuptools, which is a common way of installing python modules. To install in your home directory, use:</p>\n\n<pre><code>    python setup.py install --user\n</code></pre>\n\n<p>Just copy and paste the above line into your command prompt and you should be fine.</p>\n"}], "owner": {"reputation": 21, "user_id": 11018040, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BNIbpR6Ydog/AAAAAAAAAAI/AAAAAAAAAAA/ACevoQO1qHWNuQIXYTemyYhyNCzAEAJV3w/mo/photo.jpg?sz=128", "display_name": "Laya.A", "link": "https://stackoverflow.com/users/11018040/laya-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 147, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1565215125, "creation_date": 1565213296, "question_id": 57402503, "link": "https://stackoverflow.com/questions/57402503/how-to-install-gem-package-availble-for-python-in-github", "title": "how to install GEM package availble for python in GitHub?", "body": "<p>I want to install a python package availble in GitHub (<a href=\"https://github.com/palash1992/GEM\" rel=\"nofollow noreferrer\">https://github.com/palash1992/GEM</a>) named GEM (graph embedding methods). but I dont know how and from which point should I start. Can anyone give a step by step installing instruction? I dont have git on my computer. Should I have install it first? For more information I have python 3.7 version on my system.</p>\n\n<ol>\n<li>I already tried using: pip install GEM command in cmd.</li>\n<li>pip install git+git://github.com/palash1992/GEM.</li>\n</ol>\n\n<p>Non of them worked.</p>\n"}, {"tags": ["python", "python-3.x", "blockchain"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 1, "creation_date": 1565213232, "post_id": 57402476, "comment_id": 101286488, "body": "<a href=\"https://stackoverflow.com/questions/1132941/least-astonishment-and-the-mutable-default-argument\" title=\"least astonishment and the mutable default argument\">stackoverflow.com/questions/1132941/&hellip;</a> and/or <a href=\"http://stackoverflow.com/questions/1680528/how-do-i-avoid-having-python-class-data-shared-among-instances\" title=\"how do i avoid having python class data shared among instances\">stackoverflow.com/questions/1680528/&hellip;</a>. Basically none of your state is actually instance-level."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1565214642, "post_id": 57402476, "comment_id": 101286936, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/1680528/how-to-avoid-having-class-data-shared-among-instances\">How to avoid having class data shared among instances?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "is_accepted": true, "score": 1, "last_activity_date": 1565213493, "creation_date": 1565213493, "answer_id": 57402541, "question_id": 57402476, "link": "https://stackoverflow.com/questions/57402476/items-appended-to-objects-list-append-to-every-objects-list/57402541#57402541", "title": "Items appended to object&#39;s list append to every object&#39;s list", "body": "<p>The <code>transactions</code> attribute is a class attribute for all instances of the class. When you instantiate the class, you should create an instance variable instead. You also shouldn\u2019t use a mutable default argument. </p>\n\n<pre><code>class Block:\n    ...\n    def __init__(self, txlist=None, prev_hash=''):\n        self.transactions = []\n        txlist = txlist or []\n        self.previous_hash = prev_hash\n        for tx in txlist:\n            self.addTransaction(tx)\n        self.timeStamp = datetime.timestamp(datetime.now())\n        self.nonce = 1\n        self.calculateHash()\n</code></pre>\n\n<p>Function defaults are only evaluated once so each instance uses the same default argument unless you give it another one. This only happens to mutable objects as re-assigning them doesn\u2019t copy them. </p>\n"}], "owner": {"reputation": 13, "user_id": 10923320, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-uS9WbQ8EHNg/AAAAAAAAAAI/AAAAAAAAAB8/qmaWi_Rtes4/photo.jpg?sz=128", "display_name": "Reece Mathieson", "link": "https://stackoverflow.com/users/10923320/reece-mathieson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 57402541, "answer_count": 1, "score": 0, "last_activity_date": 1565215664, "creation_date": 1565213121, "last_edit_date": 1565215664, "question_id": 57402476, "link": "https://stackoverflow.com/questions/57402476/items-appended-to-objects-list-append-to-every-objects-list", "title": "Items appended to object&#39;s list append to every object&#39;s list", "body": "<p>I'm building a simple blockchain/cryptocurrency to learn about python and blockchain programming.</p>\n\n<p>I've run into an issue regarding appending transaction objects to the list variable 'transactions' in my Block objects.</p>\n\n<p>For whatever reason, when adding a transaction to a block, it is added to every block on the chain.</p>\n\n<p>I have uploaded my code to a github repo:\nThe project consists of 3 class files: Blockchain.py, Block.py &amp; Transaction.py\nI also have a testing file 'test1.py' which reproduces the error.</p>\n\n<p><a href=\"https://github.com/swooperior/blockchain-py\" rel=\"nofollow noreferrer\">https://github.com/swooperior/blockchain-py</a></p>\n\n<p>I suspect the issue is in the Block class file:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#Not intended behaviour.  addTransaction seems to add to every block in self.chain\n\nfrom datetime import datetime\nimport hashlib\nclass Block:\n    hash = ''\n    txIndex = 0\n    transactions = []\n    timeStamp = ''\n    previous_hash = ''\n    nonce = 0\n\n    def calculateHash(self):\n        self.hash = str(hashlib.sha256(repr([self.transactions,self.previous_hash,self.nonce]).encode('utf-8')).hexdigest())\n\n    def getHash(self):\n        return self.hash\n\n\n\n\n    def addTransaction(self,tx):\n        #Validate transaction, then pass to transactions list\n        tx.id = self.txIndex\n        self.transactions.append(tx)\n        self.txIndex += 1\n\n    def printDetails(self):\n        print('Block Hash: '+self.getHash())\n        print('Nonce: '+str(self.nonce))\n        print('Created: '+ str(datetime.fromtimestamp(self.timeStamp)))\n        print('Prev_hash: '+self.previous_hash)\n        print('Transactions ('+str(len(self.transactions))+'):')\n        self.printTransactions()\n\n    def printTransactions(self):\n        c = 1\n        for tx in self.transactions:\n            print('Transaction:'+ str(c))\n            tx.printDetails()\n            c += 1\n\n    def __init__(self,txlist=[],prev_hash=''):\n        self.txIndex = 0\n        self.previous_hash = prev_hash\n        for tx in txlist:\n            self.addTransaction(tx)\n        self.timeStamp = datetime.timestamp(datetime.now())\n        self.nonce = 1\n        self.calculateHash()\n        #print(self.printDetails())\n</code></pre>\n"}, {"tags": ["python", "anaconda"], "answers": [{"tags": [], "owner": {"reputation": 4150, "user_id": 213683, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/46daeb030f91a4ea1b5f9c56ba0171f8?s=128&d=identicon&r=PG", "display_name": "pms", "link": "https://stackoverflow.com/users/213683/pms"}, "is_accepted": false, "score": 1, "last_activity_date": 1565213841, "creation_date": 1565213841, "answer_id": 57402599, "question_id": 57402458, "link": "https://stackoverflow.com/questions/57402458/a-package-installed-in-an-environment-is-also-available-in-other-environments-w/57402599#57402599", "title": "A package installed in an environment is also available in other environments, why?", "body": "<p>It turns out that <code>joblib</code> is installed by default in Anaconda 3, but not in Anaconda 2. Thus, indeed <code>conda install</code> installs the package only in the env <code>py27</code>, but the package is available in all Python 3.7 environments, because it's added by Anaconda 3 distribution.</p>\n"}], "owner": {"reputation": 4150, "user_id": 213683, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/46daeb030f91a4ea1b5f9c56ba0171f8?s=128&d=identicon&r=PG", "display_name": "pms", "link": "https://stackoverflow.com/users/213683/pms"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565213841, "creation_date": 1565212945, "last_edit_date": 1565213332, "question_id": 57402458, "link": "https://stackoverflow.com/questions/57402458/a-package-installed-in-an-environment-is-also-available-in-other-environments-w", "title": "A package installed in an environment is also available in other environments, why?", "body": "<p>I'm trying to understand the logic behind <code>conda install</code> in various environments based on the following two cases. </p>\n\n<p>On the <strong>first machine</strong>, I've installed fresh Anaconda 3 with Python 3.7, created new envs <code>py27</code> and <code>py37</code> for Python 2.7 and 3.7, both with default Anaconda packages, and added only one new <code>joblib</code> package to <code>py27</code> env:</p>\n\n<pre><code>conda install -n py27 joblib\n</code></pre>\n\n<p>After this operation, <code>joblib</code> is available in all three environments. Why not only in `py27?</p>\n\n<p>On the <strong>second machine</strong>, I've installed fresh Anaconda 2 with Python 2.7, created new envs <code>py27</code> and <code>py37</code> for Python 2.7 and 3.7, both with default Anaconda packages, and added only one new <code>joblib</code> package to <code>py27</code> env, this time using a slightly different command:</p>\n\n<pre><code>conda activate py27\nconda install joblib\n</code></pre>\n\n<p>This time, <code>joblib</code> is available in <code>py27</code> and <code>py37</code>, but not the base env. Why not in the base?</p>\n\n<p>The <strong>question:</strong> the two commands are supposed to be equivalent, but the result in both cases is surprising to me. I'd expect that in each of these two cases <code>joblib</code> is installed only in the <code>py27</code> env. Clearly, I'm missing some information. I couldn't find anything about this in Anaconda docs, nor online.</p>\n"}, {"tags": ["python", "json", "pandas", "dataframe"], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 10826803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b49a3c6be09350a5f11ca7224315598?s=128&d=identicon&r=PG&f=1", "display_name": "poweredbygt", "link": "https://stackoverflow.com/users/10826803/poweredbygt"}, "edited": false, "score": 0, "creation_date": 1565656438, "post_id": 57404885, "comment_id": 101412270, "body": "I want now when I add the children I want to do an if there if the exits==1 first add True and then the child and if it&#39;s not then first add the child and then add False. Can I achieve this in this loop?"}, {"owner": {"reputation": 131, "user_id": 11893426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/071c6fbbba985a7ecce8474faa9d3055?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/11893426/andrew"}, "reply_to_user": {"reputation": 63, "user_id": 10826803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b49a3c6be09350a5f11ca7224315598?s=128&d=identicon&r=PG&f=1", "display_name": "poweredbygt", "link": "https://stackoverflow.com/users/10826803/poweredbygt"}, "edited": false, "score": 0, "creation_date": 1565656860, "post_id": 57404885, "comment_id": 101412332, "body": "I&#39;m not sure I quite understand what you&#39;re asking. What do you want the &quot;children&quot; to look like in each case?"}, {"owner": {"reputation": 63, "user_id": 10826803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b49a3c6be09350a5f11ca7224315598?s=128&d=identicon&r=PG&f=1", "display_name": "poweredbygt", "link": "https://stackoverflow.com/users/10826803/poweredbygt"}, "edited": false, "score": 0, "creation_date": 1565657433, "post_id": 57404885, "comment_id": 101412444, "body": "the parent i.e. &#39;PLC2hrOGTT&#39; should have &quot;cues&quot;: True and then &quot;cues&quot;: &quot;Age&quot; because &quot;exits&quot;: is &quot;1&quot; in &#39;PLC2hrOGTT&#39;. I think I managed to explain, if otherwise pls let me know."}], "tags": [], "owner": {"reputation": 131, "user_id": 11893426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/071c6fbbba985a7ecce8474faa9d3055?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/11893426/andrew"}, "is_accepted": true, "score": 1, "last_activity_date": 1565236063, "last_edit_date": 1565236063, "creation_date": 1565235702, "answer_id": 57404885, "question_id": 57402430, "link": "https://stackoverflow.com/questions/57402430/manipulating-a-pandas-dataframe-to-a-desired-output/57404885#57404885", "title": "Manipulating a pandas dataframe to a desired output", "body": "<p>Given a row of your DataFrame (which is a Series whose indices are your column names), this functions will extract a tree like you've shown:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; def row_to_tree(row):\n...     out = {}\n...     pos = [out]\n...     for cues, directions, thresholds, exits in zip(*map(lambda x: x.split(\";\"), row[[\"cues\", \"directions\", \"thresholds\", \"exits\"]].values)):\n...             pos = pos[0]\n...             pos[\"cues\"] = cues\n...             pos[\"directions\"] = directions\n...             pos[\"thresholds\"] = thresholds\n...             pos[\"exits\"] = exits\n...             pos[\"children\"] = [{\"cues\":True}]\n...             pos = pos[\"children\"]\n...     pos.append({\"cues\": False})\n...     return out\n</code></pre>\n\n<p>This works by taking the sequence of strings in your row <code>row[[\"cues\", \"directions\", \"thresholds\", \"exits\"]].values</code>, and splitting each string at the \";\".  This is accomplished by mapping the function <code>lambda x: x.split(\";\")</code> to each string.  This results in a list where each element is a list from one of your columns (e.g. the first list is the list of cues from that row).  Then, zipping these lists is sort of like taking the transpose of that 2-D list.  Then, we iterate over the values, adding them to a dictionary, and finally adding a new dictionary for the children.</p>\n\n<p>Then, you simply need to apply this function to each row to give you your trees:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; trees = [row_to_tree(row) for i, row in df.iterrows()]\n&gt;&gt;&gt; print(json.dumps(trees[0], indent=2))\n{\n  \"cues\": \"PLC2hrOGTT\",\n  \"directions\": \"&gt;\",\n  \"thresholds\": \"126\",\n  \"exits\": \"1\",\n  \"children\": [\n    {\n      \"cues\": \"Age\",\n      \"directions\": \"&gt;\",\n      \"thresholds\": \"29\",\n      \"exits\": \"0\",\n      \"children\": [\n        {\n          \"cues\": \"BMI\",\n          \"directions\": \"&gt;\",\n          \"thresholds\": \"29.7\",\n          \"exits\": \"1\",\n          \"children\": [\n            {\n              \"cues\": \"TimesPregnant\",\n              \"directions\": \"&gt;\",\n              \"thresholds\": \"6\",\n              \"exits\": \"0.5\",\n              \"children\": [\n                {\n                  \"cues\": true\n                },\n                {\n                  \"cues\": false\n                }\n              ]\n            }\n          ]\n        }\n      ]\n    }\n  ]\n}\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 10826803, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b49a3c6be09350a5f11ca7224315598?s=128&d=identicon&r=PG&f=1", "display_name": "poweredbygt", "link": "https://stackoverflow.com/users/10826803/poweredbygt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 57404885, "answer_count": 1, "score": 0, "last_activity_date": 1565659226, "creation_date": 1565212728, "last_edit_date": 1565659226, "question_id": 57402430, "link": "https://stackoverflow.com/questions/57402430/manipulating-a-pandas-dataframe-to-a-desired-output", "title": "Manipulating a pandas dataframe to a desired output", "body": "<p>I have attempted different methods and have yet to reach a solution.</p>\n\n<p>The question is: how do I convert cues, directions, thresholds, exitsinto a hierarchical JSON structure to be used for a D3 visualization? There are an unknown number of levels, so it has to be dynamic.</p>\n\n<p>I have a dataframe with five columns and 8 rows, each row corresponds to one tree in my case:</p>\n\n<pre><code>    tree       cues                        directions   thresholds   exits\n     1   PLC2hrOGTT;Age;BMI;TimesPregnant   &gt;;&gt;;&gt;;&gt;   126;29;29.7;6  1;0;1;0.5\n     2   PLC2hrOGTT;Age;BMI                 &gt;;&gt;;&gt;     126;29;29.7    0;1;0.5\n     3   PLC2hrOGTT;Age;BMI;TimesPregnant   &gt;;&gt;;&gt;;&gt;   126;29;29.7;6  1;0;0;0.5\n     4   PLC2hrOGTT;Age;BMI;TimesPregnant   &gt;;&gt;;&gt;;&gt;   126;29;29.7;6  1;1;0;0.5\n     5   PLC2hrOGTT;Age;BMI;TimesPregnant   &gt;;&gt;;&gt;;&gt;   126;29;29.7;6  0;1;0;0.5\n     6   PLC2hrOGTT;Age;BMI                 &gt;;&gt;;&gt;     126;29;29.7    0;0;0.5 \n     7   PLC2hrOGTT;Age;BMI;TimesPregnant   &gt;;&gt;;&gt;;&gt;   126;29;29.7;6  1;1;1;0.5\n     8   PLC2hrOGTT;Age;BMI;TimesPregnant   &gt;;&gt;;&gt;;&gt;   126;29;29.7;6  0;0;0;0.5\n</code></pre>\n\n<p><strong>Desired Output Snapshot (example: 1st row):</strong></p>\n\n<pre><code>  \"cues\": \"PLC2hrOGTT\",\n  \"directions\": \"&gt;\",\n  \"thresholds\": \"126\",\n  \"exits\": \"1\",\n  \"children\": [\n    {\n      \"cues\": \"Age\",\n      \"directions\": \"&gt;\",\n      \"thresholds\": \"29\",\n      \"exits\": \"0\",\n      \"children\": [\n        {\n          \"cues\": \"BMI\",\n          \"directions\": \"&gt;\",\n          \"thresholds\": \"29.7\",\n          \"exits\": \"1\",\n          \"children\": [\n            {\n              \"cues\": \"TimesPregnant\",\n              \"directions\": \"&gt;\",\n              \"thresholds\": \"6\",\n              \"exits\": \"0.5\",\n              \"children\": [\n                {\n                  \"cues\": \"True\",\n                },\n                {\n                  \"cues\": \"False\"\n                }\n              ]\n</code></pre>\n\n<p>for the last node in the tree always true and false are given as children, (hence the 0.5 in exits columns)</p>\n\n<p><strong>EDIT</strong> The desired if exits==1 then first 'True' and the 'cue' else the 'cue' and 'False'</p>\n\n<pre><code>{\n    \"cues\": \"PLC2hrOGTT\",\n    \"directions\": \"&gt;\",\n    \"thresholds\": \"126\",\n    \"exits\": \"1\",\n    \"children\": [\n      {\n        \"cues\": \"True\",\n      },\n      {\n        \"cues\": \"Age\",\n        \"directions\": \"&gt;\",\n        \"thresholds\": \"29\",\n        \"exits\": \"0\",\n        \"children\": [\n          {\n            \"cues\": \"BMI\",\n            \"directions\": \"&gt;\",\n            \"thresholds\": \"29.7\",\n            \"exits\": \"1\",\n            \"children\": [\n              {\n                \"cues\": \"True\",\n              },\n              {\n                \"cues\": \"TimesPregnant\",\n                \"directions\": \"&gt;\",\n                \"thresholds\": \"6\",\n                \"exits\": \"0.5\",\n                \"children\":[\n                  {\n                    \"cues\": \"True\"\n                  },\n                  {\n                    \"cues\": \"False\"\n                  }\n                ]\n              }\n            ]\n          },\n          {\n            \"cues\": \"False\"\n          }\n        ]\n      }\n    ]\n    }\n</code></pre>\n"}, {"tags": ["python", "django"], "comments": [{"owner": {"reputation": 1588, "user_id": 1899494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8bff769c85b3fc72eec038070928ff?s=128&d=identicon&r=PG", "display_name": "hugo", "link": "https://stackoverflow.com/users/1899494/hugo"}, "edited": false, "score": 0, "creation_date": 1565213228, "post_id": 57402422, "comment_id": 101286486, "body": "<code>localhost:8000&#47;topics&#47;1</code> You&#39;re not forgetting the trailing slash?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user11898513"}, "reply_to_user": {"reputation": 1588, "user_id": 1899494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8bff769c85b3fc72eec038070928ff?s=128&d=identicon&r=PG", "display_name": "hugo", "link": "https://stackoverflow.com/users/1899494/hugo"}, "edited": false, "score": 0, "creation_date": 1565213679, "post_id": 57402422, "comment_id": 101286646, "body": "sorry, yes I am."}], "answers": [{"tags": [], "owner": {"reputation": 1588, "user_id": 1899494, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8bff769c85b3fc72eec038070928ff?s=128&d=identicon&r=PG", "display_name": "hugo", "link": "https://stackoverflow.com/users/1899494/hugo"}, "is_accepted": false, "score": 0, "last_activity_date": 1565214025, "creation_date": 1565214025, "answer_id": 57402625, "question_id": 57402422, "link": "https://stackoverflow.com/questions/57402422/django-reverse-resolution-of-url-throws-noreversematch/57402625#57402625", "title": "Django - Reverse resolution of URL throws &#39;NoReverseMatch&#39;", "body": "<p>So you've <strong>forgotten the trailing slash</strong> at the end of your URL, hence why it's not matching.</p>\n\n<p>You could remove the slash from the regex, but that would shift the problem: it wouldn't work if you put a slash.</p>\n\n<p>I guess you could end the pattern with <code>/?$</code>, but here's a solution that's probably more robust: <a href=\"https://stackoverflow.com/a/1596600/1899494\">Jiaaro's answer to: django urls without a trailing slash do not redirect</a></p>\n\n<p>Basically:</p>\n\n<blockquote>\n  <p>check your <strong>APPEND_SLASH</strong> setting in the settings.py file</p>\n</blockquote>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user11898513"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565382965, "creation_date": 1565212688, "last_edit_date": 1565382965, "question_id": 57402422, "link": "https://stackoverflow.com/questions/57402422/django-reverse-resolution-of-url-throws-noreversematch", "title": "Django - Reverse resolution of URL throws &#39;NoReverseMatch&#39;", "body": "<p>I have <code>url(r'^topics/(?P&lt;topic_id&gt;\\d+)/$', views.topic, name='topic')</code> in urls.py but when I try to go to localhost:8000/topics/1 it tells me that it tried one pattern: <code>topics/(?P&lt;topic_id&gt;**\\\\**d+)/$</code>\nI would think it would be <code>topics/(?P&lt;topic_id&gt;**\\**d+)/$</code></p>\n\n<p>I'm using a book called <strong>The Python Crash Course</strong> (1st edition)(ch. 18).\nThis is a local server using Django 1.11 with Python. I've tried a lot of reformatting on the url pattern but I am new at this so I don't know what else to do.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>...\nurlpatterns = [\n    url(r'^$', views.index, name='index'),\n\n    # Show all topics.\n    url(r'^topics/$', views.topics, name='topics'),\n\n    # Detail page for a single topic.\n    url(r'^topics/(?P&lt;topic_id&gt;\\d+)/$', views.topic, name='topic'),\n]\n</code></pre>\n\n<p>I expected it to pop up with the correct page but it always says '<strong><em>NoReverseMatch at /topics/01/</em></strong>'</p>\n"}, {"tags": ["python", "selenium", "xpath", "css-selectors", "webdriverwait"], "comments": [{"owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "edited": false, "score": 0, "creation_date": 1565212662, "post_id": 57402409, "comment_id": 101286313, "body": "Can you post a link to the page you are trying to scrape please?"}, {"owner": {"reputation": 35, "user_id": 11616779, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6redmyEuNhI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcp2QvvQEubFZPf_plQzUOGH1PHcw/mo/photo.jpg?sz=128", "display_name": "Rafael Schettini", "link": "https://stackoverflow.com/users/11616779/rafael-schettini"}, "reply_to_user": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "edited": false, "score": 0, "creation_date": 1565212743, "post_id": 57402409, "comment_id": 101286339, "body": "I can&#39;t send the link because its a Tableau Dashboard then I need to send user and password."}, {"owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "edited": false, "score": 0, "creation_date": 1565212861, "post_id": 57402409, "comment_id": 101286381, "body": "Okay, well my guess is that what you are after is dynamically generated. Load the page, and then right click view source. Then hit ctrl-f and paste in &#39;tabComboBoxName&#39; and tell me if it finds it in the source code."}, {"owner": {"reputation": 35, "user_id": 11616779, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6redmyEuNhI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcp2QvvQEubFZPf_plQzUOGH1PHcw/mo/photo.jpg?sz=128", "display_name": "Rafael Schettini", "link": "https://stackoverflow.com/users/11616779/rafael-schettini"}, "reply_to_user": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "edited": false, "score": 0, "creation_date": 1565213142, "post_id": 57402409, "comment_id": 101286454, "body": "@RobertKearns You are right, I can&#39;t find the &quot;tabComboBoxName&quot;"}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1565227573, "post_id": 57402409, "comment_id": 101289594, "body": "The 1565209097494 looks like a timestamp FYI, so don&#39;t go by that."}], "answers": [{"comments": [{"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 35, "user_id": 11616779, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6redmyEuNhI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcp2QvvQEubFZPf_plQzUOGH1PHcw/mo/photo.jpg?sz=128", "display_name": "Rafael Schettini", "link": "https://stackoverflow.com/users/11616779/rafael-schettini"}, "edited": false, "score": 0, "creation_date": 1565213410, "post_id": 57402482, "comment_id": 101286558, "body": "@RafaelSchettini How about the <i>xpath</i>?"}, {"owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "reply_to_user": {"reputation": 35, "user_id": 11616779, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6redmyEuNhI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcp2QvvQEubFZPf_plQzUOGH1PHcw/mo/photo.jpg?sz=128", "display_name": "Rafael Schettini", "link": "https://stackoverflow.com/users/11616779/rafael-schettini"}, "edited": false, "score": 0, "creation_date": 1565213605, "post_id": 57402482, "comment_id": 101286623, "body": "@RafaelSchettini <i>TimeoutException</i> is the outcome of <b>failed</b> <i>expected-conditions</i>. Debug your code through <code>find_element_by_*</code> in-conjunction with <code>time.sleep()</code>. If you are able to locate the element, update the question with the observations."}, {"owner": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "edited": false, "score": 0, "creation_date": 1565228116, "post_id": 57402482, "comment_id": 101289683, "body": "the element is hidden"}], "tags": [], "owner": {"reputation": 116545, "user_id": 7429447, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/5a25589e600c8ae89717c14e51a6754b?s=128&d=identicon&r=PG&f=1", "display_name": "DebanjanB", "link": "https://stackoverflow.com/users/7429447/debanjanb"}, "is_accepted": false, "score": 1, "last_activity_date": 1565213158, "creation_date": 1565213158, "answer_id": 57402482, "question_id": 57402409, "link": "https://stackoverflow.com/questions/57402409/how-to-find-the-element-using-selenium-in-python/57402482#57402482", "title": "How to find the element using selenium in python", "body": "<p>The element is a dynamically generated element so to locate the element you need to induce <em>WebDriverWait</em> for the desired <code>visibility_of_element_located()</code> and you can use either of the following <a href=\"https://stackoverflow.com/questions/48369043/official-locator-strategies-for-the-webdriver/48376890#48376890\">Locator Strategies</a>:</p>\n\n<ul>\n<li><p>Using <code>CSS_SELECTOR</code>:</p>\n\n<pre><code>element = WebDriverWait(driver, 20).until(EC.visibility_of_element_located((By.CSS_SELECTOR, \"span.tabComboBoxName[id^='tab-ui-id-']\")))\n</code></pre></li>\n<li><p>Using <code>XPATH</code>:</p>\n\n<pre><code>element = WebDriverWait(driver, 20).until(EC.visibility_of_element_located((By.XPATH, \"//span[@class='tabComboBoxName' and starts-with(@id, 'tab-ui-id-')][contains(., '20/07/2019')]\")))\n</code></pre></li>\n<li><p><strong>Note</strong> : You have to add the following imports :</p>\n\n<pre><code>from selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support import expected_conditions as EC\n</code></pre></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 116880, "user_id": 2897748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d278f6ada8828c902a13ee8a5e523cce?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitri T", "link": "https://stackoverflow.com/users/2897748/dmitri-t"}, "is_accepted": false, "score": 0, "last_activity_date": 1565242381, "creation_date": 1565242381, "answer_id": 57405719, "question_id": 57402409, "link": "https://stackoverflow.com/questions/57402409/how-to-find-the-element-using-selenium-in-python/57405719#57405719", "title": "How to find the element using selenium in python", "body": "<ol>\n<li>Make sure that the element doesn't belong to an <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe\" rel=\"nofollow noreferrer\"><code>&lt;iframe&gt;</code></a>, if it does - you will need to <a href=\"https://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webdriver.WebDriver.switch_to\" rel=\"nofollow noreferrer\">switch_to()</a> the iframe where the element lives prior to attempting to find it</li>\n<li>Make sure that the element doesn't belong to <a href=\"https://docs.experitest.com/display/TDB/SeeTestAutomation+-+Mobile+Web+Testing+On+Chrome+With+Android\" rel=\"nofollow noreferrer\">ShadowDOM</a>, if it does - you will need to locate the relevant <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot\" rel=\"nofollow noreferrer\">ShadowRoot</a> element, cast it to the <a href=\"https://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webelement.WebElement\" rel=\"nofollow noreferrer\">WebElement</a> and use <a href=\"https://selenium-python.readthedocs.io/api.html#selenium.webdriver.remote.webelement.WebElement.find_element\" rel=\"nofollow noreferrer\">find_element()</a> function of the <strong>WebElement</strong> instead of <strong>driver</strong></li>\n<li>Make sure to use <a href=\"https://selenium-python.readthedocs.io/waits.html#explicit-waits\" rel=\"nofollow noreferrer\">Explicit Wait</a> as it might be the case the element is not immediately available and it's being loaded later via <a href=\"https://en.wikipedia.org/wiki/Ajax_(programming)\" rel=\"nofollow noreferrer\">AJAX</a> request </li>\n<li><p>Try using another <a href=\"https://w3c.github.io/webdriver/#locator-strategies\" rel=\"nofollow noreferrer\">locator strategy</a>, for instance you can stick to the element text like:</p>\n\n<pre><code>//span[text()='20/07/2019']\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 35, "user_id": 11616779, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6redmyEuNhI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcp2QvvQEubFZPf_plQzUOGH1PHcw/mo/photo.jpg?sz=128", "display_name": "Rafael Schettini", "link": "https://stackoverflow.com/users/11616779/rafael-schettini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1565242381, "creation_date": 1565212614, "last_edit_date": 1565213423, "question_id": 57402409, "link": "https://stackoverflow.com/questions/57402409/how-to-find-the-element-using-selenium-in-python", "title": "How to find the element using selenium in python", "body": "<p>I can't find the element of the html below.</p>\n\n<pre><code>&lt;span class=\"tabComboBoxName\" id=\"tab-ui-id-1565209097494\" aria-hidden=\"true\"&gt;20/07/2019&lt;/span&gt;\n</code></pre>\n\n<p>I've tried the following codes:</p>\n\n<pre><code>elem = browser.find_elements_by_xpath(\"//class[@id='tab-ui-id-1565209097494']\")\nelem = browser.find_elements_by_class_name('tabComboBoxName')\nelem = browser.find_elements_by_id('tab-ui-id-1565209097494')\n</code></pre>\n\n<p>For those tries I got an empty list.</p>\n"}, {"tags": ["python", "multithreading", "python-multiprocessing", "python-multithreading"], "answers": [{"tags": [], "owner": {"reputation": 408, "user_id": 9944075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6739c0196cfb047b64da05b4b296eddd?s=128&d=identicon&r=PG&f=1", "display_name": "Gabriel Milan", "link": "https://stackoverflow.com/users/9944075/gabriel-milan"}, "is_accepted": false, "score": 0, "last_activity_date": 1565272145, "creation_date": 1565272145, "answer_id": 57414179, "question_id": 57402381, "link": "https://stackoverflow.com/questions/57402381/does-pydispatcher-run-the-handler-function-in-a-background-thread/57414179#57414179", "title": "Does pydispatcher run the handler function in a background thread?", "body": "<p>I've recently released the <a href=\"https://github.com/gabriel-milan/Akuanduba\" rel=\"nofollow noreferrer\">Akuanduba</a> module, that may help you with this task. There's a single example on the repository that may help you understand how it works and it seems similar to what you want.</p>\n\n<p>Anyway, I'll try to explain here a way of implementing your code with Akuanduba:</p>\n\n<ul>\n<li>First you could make a <em>data frame</em> that would hold your queue:</li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code># Mandatory imports\nfrom Akuanduba.core.messenger.macros import *\nfrom Akuanduba.core.constants import *\nfrom Akuanduba.core import NotSet, AkuandubaDataframe\n# Your imports go here:\nfrom queue import Queue\n\nclass MyQueue (AkuandubaDataframe):\n\n  def __init__(self, name):\n\n    # Mandatory stuff\n    AkuandubaDataframe.__init__(self, name)\n\n    self.__queue = Queue ()\n\n  def getQueue (self):\n    return self.__queue\n\n  def putQueue (self, val):\n    self.__queue.put(val)\n\n  def getQueueSize (self):\n    return self.__queue.qsize()\n\n  #\n  # \"toRawObj\" method is a mandatory method that delivers a dict with the desired data\n  # for file saving\n  #\n  def toRawObj(self):\n    d = {\n          \"Queue\" : self.getQueue(),\n          }\n    return d\n</code></pre>\n\n<ul>\n<li>Then you could make a <em>TriggerCondition</em> that would check the queue size:</li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code>from Akuanduba.core import StatusCode, NotSet, StatusTrigger\nfrom Akuanduba.core.messenger.macros import *\nfrom Akuanduba.core import TriggerCondition\nimport time\n\nclass CheckQueueSize (TriggerCondition):\n\n  def __init__(self, name, maxSize):\n\n    TriggerCondition.__init__(self, name)\n    self._name = name\n    self._maxSize = maxSize\n\n  def initialize(self):\n\n    return StatusCode.SUCCESS\n\n  def execute (self):\n\n    size = self.getContext().getHandler(\"MyQueue\").getQueueSize()\n    if (size &gt; SIZE_THRESHOLD):\n      return StatusTrigger.TRIGGERED\n    else:\n      return StatusTrigger.NOT_TRIGGERED\n\n  def finalize(self):\n\n    return StatusCode.SUCCESS\n</code></pre>\n\n<ul>\n<li>Make a <em>tool</em> that would be your handler function:</li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code># Mandatory imports\nfrom Akuanduba.core import AkuandubaTool, StatusCode, NotSet, retrieve_kw\n# Your imports go here:\n\nclass SampleTool(AkuandubaTool):\n\n  def __init__(self, name, **kw):\n\n    # Mandatory stuff\n    AkuandubaTool.__init__(self, name)\n\n\n  def initialize(self):\n\n    # Lock the initialization. After that, this tool can not be initialized once again\n    self.init_lock()\n    return StatusCode.SUCCESS\n\n\n  def execute(self,context):\n\n    #\n    # DO SOMETHING HERE\n    #\n\n    # Always return SUCCESS\n    return StatusCode.SUCCESS\n\n  def finalize(self):\n    self.fina_lock()\n    return StatusCode.SUCCESS\n</code></pre>\n\n<ul>\n<li>And finally, make a main script in order to make it all work together:</li>\n</ul>\n\n<pre class=\"lang-py prettyprint-override\"><code># Akuanduba imports\nfrom Akuanduba.core import Akuanduba, LoggingLevel, AkuandubaTrigger\nfrom Akuanduba import ServiceManager, ToolManager, DataframeManager\n\n# This sample's imports\nimport MyQueue, CheckQueueSize, SampleTool\n\n# Creating your handler\nyour_handler = SampleTool (\"Your Handler's name\")\n\n# Creating dataframes\nqueue = MyQueue (\"MyQueue\")\n\n# Creating trigger\ntrigger  = AkuandubaTrigger(\"Sample Trigger Name\", triggerType = 'or')\n\n# Append conditions and tools to trigger just adding them\n# Tools appended to the trigger will only run when trigger is StatusTrigger.TRIGGERED,\n# and will run in the order they've been appended\ntrigger += CheckQueueSize( \"CheckQueueSize condition\", MAX_QUEUE_SIZE )\ntrigger += your_handler\n\n# Creating Akuanduba\nmanager = Akuanduba(\"Akuanduba\", level=LoggingLevel.INFO)\n\n# Appending tools\n#\n# ToolManager += TOOL_1\n# ToolManager += TOOL_2\n#\nToolManager += trigger\n\n# Apprending dataframes\nDataframeManager += sampleDataframe\n\n# Initializing \nmanager.initialize()\nmanager.execute()\nmanager.finalize()\n</code></pre>\n\n<p>That way, you'd have clean and separated code.</p>\n"}], "owner": {"reputation": 45, "user_id": 7655219, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40ecea22f747d6d9d0847b473e564043?s=128&d=identicon&r=PG&f=1", "display_name": "Prabhat Verma", "link": "https://stackoverflow.com/users/7655219/prabhat-verma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565272145, "creation_date": 1565212496, "question_id": 57402381, "link": "https://stackoverflow.com/questions/57402381/does-pydispatcher-run-the-handler-function-in-a-background-thread", "title": "Does pydispatcher run the handler function in a background thread?", "body": "<p>Upon looking up event handler modules, I came across pydispatcher, which seemed beginner friendly. My use case for the library is that I want to send a signal if my queue size is over a threshold. The handler function can then start processing and removing items from the queue (and subsequently do a bulk insert into the database). </p>\n\n<p>I would like the handler function to run in the background. I am aware that I can simply overwrite the queue.append() method checking for the queue size and calling the handler function asynchronously, but I would like to implement the listener-dispatcher model to keep the logic clean and separated. </p>\n\n<p>Does pydispatcher do this out of the box? If not, is there another module that can help me do this? Would I need to manage the access to the queue, since there might be multiple threads processing and appending to the queue at the same time? </p>\n\n<p>Note that in my use case there is only a single dispatcher and event handler. </p>\n"}, {"tags": ["python", "pandas", "date", "datetime"], "comments": [{"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 1, "creation_date": 1565212894, "post_id": 57402370, "comment_id": 101286391, "body": "I do not have an immediate answer, but it would help to allow reproducing the error - for that one needs a portion of <code>data</code> dataframe - you can provide the code to creat it, or for example <code>data.to_dict()</code> result. This would be similar to output you provided as a printout, but will allow to recreate the error and tackle it."}], "answers": [{"comments": [{"owner": {"reputation": 3079, "user_id": 1758363, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hBUXs.jpg?s=128&g=1", "display_name": "Evgeny", "link": "https://stackoverflow.com/users/1758363/evgeny"}, "edited": false, "score": 1, "creation_date": 1565213303, "post_id": 57402468, "comment_id": 101286514, "body": "Need to know from @cgarrido what the original time refers to - all times US/Pacific or all times recorded at local time zone?"}, {"owner": {"reputation": 77, "user_id": 11833086, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156587272446733/picture?type=large", "display_name": "cgarrido", "link": "https://stackoverflow.com/users/11833086/cgarrido"}, "edited": false, "score": 0, "creation_date": 1565213547, "post_id": 57402468, "comment_id": 101286602, "body": "Thanks for the reply, gave it a go but still get the same &quot;Timestamp subtraction must have the same timezones or no timezones&quot; error. Each site&#39;s original time is recorded in US/Pacific and gets converted to local time."}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 1, "creation_date": 1565214339, "post_id": 57402468, "comment_id": 101286842, "body": "I googled and found out that Excel doesn&#39;t accept datetime values with timezone included, try with my edited answer."}], "tags": [], "owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "is_accepted": true, "score": 1, "last_activity_date": 1565214282, "last_edit_date": 1565214282, "creation_date": 1565213026, "answer_id": 57402468, "question_id": 57402370, "link": "https://stackoverflow.com/questions/57402370/timestamp-subtraction-must-have-the-same-timezones-or-no-timezones/57402468#57402468", "title": "Timestamp subtraction must have the same timezones or no timezones", "body": "<p>Try to switch those arguments for <code>tz_localize</code> and <code>tz_convert</code> - you should first get a timezone-aware time presented with the actual timezone and then convert it to \"US/Pacific\":</p>\n\n<pre><code>raw_time = pd.Timestamp(x[1])\nloc_raw_time = raw_time.tz_localize(zones[x[0]])\nreturn loc_raw_time.tz_convert(\"US/Pacific\").replace(tzinfo=None)\n</code></pre>\n"}], "owner": {"reputation": 77, "user_id": 11833086, "user_type": "registered", "profile_image": "https://graph.facebook.com/10156587272446733/picture?type=large", "display_name": "cgarrido", "link": "https://stackoverflow.com/users/11833086/cgarrido"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 57402468, "answer_count": 1, "score": 1, "last_activity_date": 1565214282, "creation_date": 1565212448, "question_id": 57402370, "link": "https://stackoverflow.com/questions/57402370/timestamp-subtraction-must-have-the-same-timezones-or-no-timezones", "title": "Timestamp subtraction must have the same timezones or no timezones", "body": "<p>I've parsed a number of date times and have converted them into different time zones. However, when trying to write the data frame to an excel file with df.to_excel I receive the following error, \"Timestamp subtraction must have the same timezones or no timezones\". </p>\n\n<p>Looking at different threads I've tried using tz_localize(None) and tz_convert to convert the date times to UTC and then write the file but that hasn't worked. </p>\n\n<pre><code>#C:\\Users\\cgarrido\\AppData\\Local\\Programs\\Python\\Python37\\Scripts&gt;\nimport pandas as pd\nfrom pandas import Timestamp\nimport pytz\nfrom pytz import all_timezones\nimport datetime\nimport xlrd\nimport xlwt\n\ndata = pd.read_excel('lab.xls')\ndata = data.drop_duplicates('Site UP')\ndata = data.drop(data[data.Duration == 0].index)\ndata.to_excel('no_duplicates_no_zeroes.xls')\ndata['Site DOWN'] = pd.to_datetime(data['Site DOWN'])\ndata['Site UP'] = pd.to_datetime(data['Site UP'])\n\ndef conversion_function(x: pd.Series) -&gt; pd.Timestamp:  \n    zones = {'Atlantic': 'Canada/Atlantic',\n             'Central': 'US/Central',\n             'Eastern': \"US/Eastern\",\n             'Mountain': 'US/Mountain',\n             'Pacific': 'US/Pacific'}\n    raw_time = pd.Timestamp(x[1])\n    loc_raw_time = raw_time.tz_localize(\"US/Pacific\")\n    return loc_raw_time.tz_convert(zones[x[0]])\n\ndata['Adjusted_Down'] = data[['Time_Zone', 'Site DOWN']].apply(conversion_function, axis=1)\ndata['Adjusted_Up'] = data[['Time_Zone', 'Site UP']].apply(conversion_function, axis=1)\n\ndata.to_excel('no_duplicates_no_zeroes.xls')\n</code></pre>\n\n<p>Here's a dataframe example (before the dates are converted)</p>\n\n<pre><code>Region  Time_Zone   Site DOWN       Site UP         Duration\nUS      Mountain    07/22/19 01:19  07/22/19 01:23  4\nCanada  Central     07/22/19 01:19  07/22/19 01:23  4\nUS      Eastern     07/21/19 22:50  07/21/19 22:52  2\nUS      Eastern     07/16/19 11:26  07/16/19 11:29  3\nUS      Pacific     07/25/19 16:47  07/25/19 16:50  3\nUS      Pacific     07/22/19 13:13  07/22/19 13:15  2\nUS      Pacific     07/22/19 01:20  07/22/19 01:22  2\nUS      Central     06/30/19 11:56  06/30/19 11:58  2\nUS      Mountain    07/29/19 03:14  07/29/19 03:16  2\nUS      Mountain    07/22/19 01:19  07/22/19 01:23  4\nCanada  Atlantic    07/22/19 01:19  07/22/19 01:21  2\nCanada  Eastern     07/03/19 06:51  07/03/19 11:34  283\nUS      Eastern     07/21/19 16:51  07/21/19 16:53  2\nUS      Eastern     07/21/19 13:43  07/21/19 16:31  168\nCanada  Atlantic    07/22/19 01:19  07/22/19 01:21  2\nUS      Mountain    07/18/19 01:30  07/18/19 01:58  28\nUS      Central     07/22/19 01:20  07/22/19 01:22  2\nCanada  Central     07/17/19 22:17  07/17/19 22:21  4\nCanada  Central     07/15/19 06:14  07/15/19 08:42  148\nCanada  Mountain    07/22/19 01:19  07/22/19 01:23  4\nCanada  Mountain    07/22/19 01:18  07/22/19 01:21  3\nCanada  Central     07/22/19 01:20  07/22/19 01:22  2\nCanada  Central     07/17/19 09:26  07/17/19 09:28  2\nCanada  Atlantic    07/30/19 18:18  07/31/19 04:44  626\nCanada  Atlantic    07/29/19 21:20  07/29/19 21:22  2\nCanada  Atlantic    07/25/19 03:41  07/25/19 03:43  2\nCanada  Atlantic    07/22/19 01:20  07/22/19 01:23  3\nCanada  Atlantic    07/21/19 22:50  07/21/19 22:50  0\nCanada  Eastern     07/24/19 01:57  07/24/19 03:55  118\n</code></pre>\n\n<p>Consequently, here's the error message when trying to save the data frame to an excel sheet. </p>\n\n<pre><code>Traceback (most recent call last):\n  File \"&lt;pyshell#15&gt;\", line 1, in &lt;module&gt;\n    data.to_excel('final.xls', 'a+')\n  File \"C:\\Users\\cgarrido\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\pandas\\core\\generic.py\", line 2127, in to_excel\n    engine=engine)\n  File \"C:\\Users\\cgarrido\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\pandas\\io\\formats\\excel.py\", line 662, in write\n    freeze_panes=freeze_panes)\n  File \"C:\\Users\\cgarrido\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\pandas\\io\\excel.py\", line 1720, in write_cells\n    val, style)\n  File \"C:\\Users\\cgarrido\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\xlwt\\Worksheet.py\", line 1088, in write\n    self.row(r).write(c, label, style)\n  File \"C:\\Users\\cgarrido\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\xlwt\\Row.py\", line 244, in write\n    date_number = self.__excel_date_dt(label)\n  File \"C:\\Users\\cgarrido\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\xlwt\\Row.py\", line 99, in __excel_date_dt\n    delta = date - epoch\n  File \"pandas\\_libs\\tslibs\\timestamps.pyx\", line 413, in pandas._libs.tslibs.timestamps._Timestamp.__sub__\nTypeError: Timestamp subtraction must have the same timezones or no timezones\n</code></pre>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup", "tuples"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4705004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73cb58943a2bd9d7c540d90316475673?s=128&d=identicon&r=PG&f=1", "display_name": "Isa", "link": "https://stackoverflow.com/users/4705004/isa"}, "edited": false, "score": 0, "creation_date": 1565230392, "post_id": 57402673, "comment_id": 101290063, "body": "Works awesome. Thanks! The only thing is when adding the values to the date key, you have to put o.text, or else you get the whole tag."}], "tags": [], "owner": {"reputation": 2684, "user_id": 4551945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tphYr.jpg?s=128&g=1", "display_name": "Matt L.", "link": "https://stackoverflow.com/users/4551945/matt-l"}, "is_accepted": true, "score": 1, "last_activity_date": 1565214326, "creation_date": 1565214326, "answer_id": 57402673, "question_id": 57402368, "link": "https://stackoverflow.com/questions/57402368/format-data-of-string-of-dates-and-associated-values-from-an-unstructured-list/57402673#57402673", "title": "Format data of string of dates and associated values from an unstructured list", "body": "<p>Have you tried iterating through all divs, inspecting the class of each, and then storing the most recent date encountered? I think that is the most common solution for a problem like yours. For example:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\n\nreq = requests.get(\"https://www.cineuropa.org/es/news/cat/113418/\")\nsoup =  BeautifulSoup(req.text, \"lxml\")\n\n# result is the container of the tags of interest.\nresult = soup.find(\"div\", attrs = {'class':'grid-65'})\nentries = {}\ndate = \"\"\nfor o in result.find_all('div'):\n    if 'date' in o['class']:\n        date = o.text\n    if 'box-text-article' in o['class']:\n        try:\n            entries[date].append(o)\n        except:\n            entries[date] = [o]\nprint(entries)\n</code></pre>\n\n<p>The result of this sample is a dictionary with dates as keys and lists of BeautifulSoup objects matching the class 'box-text-article'. Since dates always precede their corresponding articles, there's always a date to match. You can add a few lines to get the title, the link, etc. (The try/except bit in the middle just allows you to make a new entry for a date not yet in the dictionary or to append to an existing date entry if it is found.)</p>\n"}, {"comments": [{"owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "edited": false, "score": 0, "creation_date": 1565636242, "post_id": 57406806, "comment_id": 101406824, "body": "DId you try this?"}], "tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": false, "score": 0, "last_activity_date": 1565248161, "last_edit_date": 1565248161, "creation_date": 1565247332, "answer_id": 57406806, "question_id": 57402368, "link": "https://stackoverflow.com/questions/57402368/format-data-of-string-of-dates-and-associated-values-from-an-unstructured-list/57406806#57406806", "title": "Format data of string of dates and associated values from an unstructured list", "body": "<p>Here is a way to produce a nested dict with the outer dict keys being the dates and the inner values being dicts which have the event name as keys and links to reviews as values. It uses <code>:contains</code> (required bs4 4.7.1+) to isolate each date section and css filtering to filter out future dates from current date.</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\nfrom collections import OrderedDict\nfrom pprint import pprint\n\nreq = requests.get(\"https://www.cineuropa.org/es/news/cat/113418/\")\nsoup =  BeautifulSoup(req.text, \"lxml\")\nbase = 'https://www.cineuropa.org' \nlistings = OrderedDict()\n\nfor division in soup.select('.date'):\n    date = division.text\n    next_date = soup.select_one('.date:contains(\"' + date + '\") ~ .date')\n    if next_date:   \n        next_date = next_date.text\n        current_info = soup.select('.date:contains(\"' + date + '\") ~ div .box-text-article:not(.date:contains(\"' + next_date + '\") ~ div .box-text-article) a')      \n    else:\n        current_info = soup.select('.date:contains(\"' + date + '\") ~ div .box-text-article a')\n    listings[date] = {i.text:base + i['href'] for i in current_info}\n\npprint(listings)\n</code></pre>\n\n<hr>\n\n<p><strong>Only <code>Cr\u00edtica</code></strong></p>\n\n<p>If you only want the <code>Cr\u00edtica</code> then you can filter again with <code>:contains</code></p>\n\n<pre><code>for division in soup.select('.date'):\n    date = division.text\n    next_date = soup.select_one('.date:contains(\"' + date + '\") ~ .date')\n    if next_date:   \n        next_date = next_date.text\n        current_info = soup.select('.date:contains(\"' + date + '\") ~ div .box-text-article:not(.date:contains(\"' + next_date + '\") ~ div .box-text-article) a:contains(\"Cr\u00edtica:\")')      \n    else:\n        current_info = soup.select('.date:contains(\"' + date + '\") ~ div .box-text-article a:contains(\"Cr\u00edtica:\")')\n    listings[date] = {i.text:base + i['href'] for i in current_info}\n</code></pre>\n\n<hr>\n\n<p>Example <code>listings</code> entries (all items):</p>\n\n<p><a href=\"https://i.stack.imgur.com/z8IQb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z8IQb.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 53, "user_id": 4705004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73cb58943a2bd9d7c540d90316475673?s=128&d=identicon&r=PG&f=1", "display_name": "Isa", "link": "https://stackoverflow.com/users/4705004/isa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 1, "accepted_answer_id": 57402673, "answer_count": 2, "score": 1, "last_activity_date": 1565248161, "creation_date": 1565212423, "last_edit_date": 1565247858, "question_id": 57402368, "link": "https://stackoverflow.com/questions/57402368/format-data-of-string-of-dates-and-associated-values-from-an-unstructured-list", "title": "Format data of string of dates and associated values from an unstructured list", "body": "<p>I want to save movie reviews (date and the reviews) obtained from web scraping using beautiful soup into a data frame. There are at least one review for each posted date and there can be several reviews per day.</p>\n\n<p>Thing is, the HTML doesn't have a div structure for each date and associated reviews, but instead each element, dates and reviews are all siblings tags, ordered one after another.</p>\n\n<p>Here a snippet of the html:</p>\n\n<pre><code>&lt;div class=\"more line-bottom\"&gt; \n    &lt;a class=\"next\" href=\"es/news/374528/cat/113418/#cm\"&gt; &lt;span&gt;anterior&lt;/span&gt; &lt;span class=\"icon\"&gt; &lt;/span&gt; &lt;/a&gt;\n&lt;/div&gt;\n\n\n&lt;div class=\"date\"&gt;\n    &lt;p&gt;mi\u00e9rcoles, 7 de agosto de 2019&lt;/p&gt;\n&lt;/div&gt;\n\n&lt;div class=\"article clear-block no-photo\"&gt;\n    &lt;div class=\"box-text-article\"&gt;\n        &lt;p class=\"news-info\"&gt;\n            &lt;a href=\"es/newsdetail/376261\"&gt;\n                &lt;span&gt;Dokufest 2019&lt;/span&gt; \n            &lt;/a&gt;\n        &lt;/p&gt;\n        &lt;h2&gt;\n            &lt;a href=\"es/newsdetail/376261\"&gt;Cr\u00edtica: &lt;i&gt;Aether&lt;/i&gt;&lt;/a&gt;\n        &lt;/h2&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n\n&lt;div class=\"date\"&gt;\n    &lt;p&gt;viernes, 2 de agosto de 2019&lt;/p&gt;\n&lt;/div&gt;\n\n&lt;div class=\"article clear-block no-photo\"&gt;\n    &lt;div class=\"box-text-article\"&gt;\n        &lt;p class=\"news-info\"&gt;\n            &lt;a href=\"es/newsdetail/376044\"&gt;&lt;span&gt;Peliculas / Reviews&lt;/span&gt; &lt;/a&gt;\n        &lt;/p&gt;\n        &lt;h2&gt;&lt;a href=\"es/newsdetail/376044\"&gt;Cr\u00edtica: &lt;i&gt;Remember Me (Recu\u00e9rdame)&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;div class=\"article clear-block no-photo\"&gt;\n    &lt;div class=\"box-text-article\"&gt;\n        &lt;p class=\"news-info\"&gt;\n            &lt;a href=\"es/newsdetail/376041\"&gt;&lt;span&gt;Peliculas / Reviews&lt;/span&gt; &lt;/a&gt;\n        &lt;/p&gt;\n        &lt;h2&gt;&lt;a href=\"es/newsdetail/376041\"&gt;Cr\u00edtica: &lt;i&gt;Animals&lt;/i&gt;&lt;/a&gt;&lt;/h2&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I am able to fetch all the text of interest using a for loop and .next_siblings, but then can only format the obtained text involving many steps. Is there a more pythonic solution that you can suggest?\nI have seen other post with solutions that might apply but only if I had a known length of elements. For example using tuples and converting to dictionaries, but since there can be more than one review per date this answers don't apply.</p>\n\n<p>Here is my code to the web scraping and formatting:</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport requests\nimport pandas as pd\nfrom itertools import groupby\n\nreq = requests.get(\"https://www.cineuropa.org/es/news/cat/113418/\")\nsoup =  BeautifulSoup(req.text, \"lxml\")\n\n# result is the container of the tags of interest.\nresult = soup.find(\"div\", attrs = {'class':'grid-65'})\n\n# This is the element prior to the list of movie reviews\nprior_sib_1st_review = result.find(\"div\", attrs= {'class':\"more line-bottom\"})\n</code></pre>\n\n<p>Then what a do is use the only attribute present in the date div to differenciate it from the review's tag and add it to the head of a tuple. Since the fetched data is ordered, there always would be a date and then a variable number of reviews title. I add up the titles to the tuple until a new date comes up. I have to do it using try catch because an error rises. The list end ups with some unicode. </p>\n\n<pre><code>_list = []\ntup = ()\n   for sibling in prior_sib_1st_review.next_siblings: \n      try:\n          if(list(sibling.attrs.values())[0][0] == \"date\"):\n              tup = (repr(sibling.text),)\n          else:\n              tup = tup + (repr(sibling.text),)\n\n      except AttributeError as error:\n         pass\n\n      _list.append(tup)\n</code></pre>\n\n<p>Problem with this is that I get tuples that start off with the same date and that increment on their length with the for loop. So I remove the empty elements and the one that only contains the date:</p>\n\n<pre><code>_list_dedup = [item for item in _list if len(item)&gt;1]\n</code></pre>\n\n<p>Then I group by the dates. </p>\n\n<pre><code> group_list = []\n for key, group in groupby(_list_dedup , lambda x: x[0]):\n    group_list.append(list(group))\n</code></pre>\n\n<p>And finally keep the longest tuple of the list, which would be the one containing all the associated reviews for each date.</p>\n\n<pre><code>final_list = []\nfor elem in group_list:\n   final_list.append(max(elem))\ndf_ = pd.DataFrame(final_list)\n</code></pre>\n"}, {"tags": ["python", "django", "django-models", "many-to-many", "django-2.2"], "comments": [{"owner": {"reputation": 151, "user_id": 9659573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/515affbfbc0498a094730ab8cb6294a2?s=128&d=identicon&r=PG&f=1", "display_name": "\u0410\u043b\u0435\u043a\u0441\u0430\u043d\u0434\u0440", "link": "https://stackoverflow.com/users/9659573/%d0%90%d0%bb%d0%b5%d0%ba%d1%81%d0%b0%d0%bd%d0%b4%d1%80"}, "edited": false, "score": 0, "creation_date": 1565214410, "post_id": 57402325, "comment_id": 101286859, "body": "<code>new_exam.save_m2m()</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 679, "user_id": 11274362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9668a95dcf933da5e9771a5969e986?s=128&d=identicon&r=PG&f=1", "display_name": "Whale 52Hz", "link": "https://stackoverflow.com/users/11274362/whale-52hz"}, "edited": false, "score": 0, "creation_date": 1565253136, "post_id": 57407184, "comment_id": 101297222, "body": "Thanks It works. But what about adding some modify the object before saving ? For exmaple if I need to set <code>form.save(commit=False)</code> and add this lines: `             if &#39;is_allow_comments&#39; in request.POST:                 new_exam.is_allow_comments = True              else:                 new_exam.is_allow_comments = False  ; What I must do ? @daniel-roseman"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "reply_to_user": {"reputation": 679, "user_id": 11274362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9668a95dcf933da5e9771a5969e986?s=128&d=identicon&r=PG&f=1", "display_name": "Whale 52Hz", "link": "https://stackoverflow.com/users/11274362/whale-52hz"}, "edited": false, "score": 0, "creation_date": 1565254528, "post_id": 57407184, "comment_id": 101297998, "body": "As I said, that&#39;s when you do <code>form.save_m2m()</code> after <code>new_exam.save()</code>. See <a href=\"https://docs.djangoproject.com/en/2.2/topics/forms/modelforms/#the-save-method\" rel=\"nofollow noreferrer\">the docs</a>."}], "tags": [], "owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "is_accepted": true, "score": 1, "last_activity_date": 1565257379, "last_edit_date": 1565257379, "creation_date": 1565248751, "answer_id": 57407184, "question_id": 57402325, "link": "https://stackoverflow.com/questions/57402325/save-everything-for-new-object-except-manytomany-field-in-django/57407184#57407184", "title": "Save everything for new object except ManyToMany field in Django", "body": "<p>As the <a href=\"https://docs.djangoproject.com/en/2.2/topics/forms/modelforms/#the-save-method\" rel=\"nofollow noreferrer\">docs</a> explain, when you use <code>commit=False</code> the form cannot set the many-to-many relationship, because the object does not yet have an ID. So you would need to call the form's extra <code>save_m2m()</code> method: </p>\n\n<pre><code>if form.is_valid():\n    new_exam = form.save(commit=False) \n    # Add some modifications\n    new_exam.save()\n    form.save_m2m()\n    return redirect('view_exam')\n</code></pre>\n\n<p>But <em>there is no reason to do this here</em>. You should not use <code>commit=False</code> only to then save the model immediately. That is for when you want to modify the object before saving, which you're not doing here. Just save it directly:</p>\n\n<pre><code>   if form.is_valid():\n        form.save()\n        return redirect('view_exam')\n</code></pre>\n"}], "owner": {"reputation": 679, "user_id": 11274362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a9668a95dcf933da5e9771a5969e986?s=128&d=identicon&r=PG&f=1", "display_name": "Whale 52Hz", "link": "https://stackoverflow.com/users/11274362/whale-52hz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 57407184, "answer_count": 1, "score": 0, "last_activity_date": 1565257379, "creation_date": 1565212214, "question_id": 57402325, "link": "https://stackoverflow.com/questions/57402325/save-everything-for-new-object-except-manytomany-field-in-django", "title": "Save everything for new object except ManyToMany field in Django", "body": "<p>I want to save object with <code>ManyToMany</code> relation. When I submit the form, all things save except field that have <code>ManyToMany</code> relation.</p>\n\n<p>These are my files:  </p>\n\n<pre><code>#Forms.py\nclass ExamForm(ModelForm):\n    class Meta:\n        model = Exam\n        fields = '__all__'\n\n#Models.py\nclass Exam(models.Model):\n    questions = models.ManyToManyField(Question)\n    title = models.CharField(max_length=250)\nclass Question(models.Model):\n    title = models.CharField(max_length=250)\n    answer = models.TextField(null=True, blank=True)\n\n#Views.py\ndef add_exam(request):\n    if request.method == \"POST\":\n        form = ExamForm(request.POST)\n        if form.is_valid():\n            new_exam = form.save(commit=False)\n            new_exam.save()\n            return redirect('view_exam')\n    else:\n        form = ExamForm()\n    template = 'add_exam.html'\n    context = {'form': form}\n    return render(request, template, context)\n</code></pre>\n\n<p><strong>What is wrong with these codes?</strong> </p>\n"}, {"tags": ["python", "list-comprehension"], "comments": [{"owner": {"reputation": 1458, "user_id": 11746212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69fe33bc21a8570b9e9c0fce89a681fa?s=128&d=identicon&r=PG&f=1", "display_name": "IronMan", "link": "https://stackoverflow.com/users/11746212/ironman"}, "edited": false, "score": 1, "creation_date": 1565212334, "post_id": 57402320, "comment_id": 101286199, "body": "<code>print</code> returns <code>None</code>. The result of the list comprehension is the sequence of values returned by your function."}, {"owner": {"reputation": 32007, "user_id": 5858851, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/yXFCX.jpg?s=128&g=1", "display_name": "pault", "link": "https://stackoverflow.com/users/5858851/pault"}, "edited": false, "score": 0, "creation_date": 1565212396, "post_id": 57402320, "comment_id": 101286222, "body": "Also: <a href=\"https://stackoverflow.com/questions/18193205/list-comprehension-returning-values-plus-none-none-none-why\">List comprehension returning values plus [None, None, None&#93;, why?</a>"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1565212696, "post_id": 57402320, "comment_id": 101286328, "body": "Also: <a href=\"https://stackoverflow.com/questions/5753597/is-it-pythonic-to-use-list-comprehensions-for-just-side-effects\" title=\"is it pythonic to use list comprehensions for just side effects\">stackoverflow.com/questions/5753597/&hellip;</a>"}, {"owner": {"reputation": 1277, "user_id": 10855529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uG5To.png?s=128&g=1", "display_name": "vainraxe", "link": "https://stackoverflow.com/users/10855529/vainraxe"}, "edited": false, "score": 1, "creation_date": 1565212870, "post_id": 57402320, "comment_id": 101286385, "body": "ok, I got it, it is like print([print(0), print(1), print(2), print(3), print(4)])"}], "answers": [{"tags": [], "owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "is_accepted": false, "score": 2, "last_activity_date": 1565212298, "creation_date": 1565212298, "answer_id": 57402340, "question_id": 57402320, "link": "https://stackoverflow.com/questions/57402320/why-does-this-give-none5/57402340#57402340", "title": "Why does this give [None]*5?", "body": "<p><code>print()</code> doesn't return anything. So, when you call\n<code>[print(n) for n in range(5)]</code>, it's printing <code>n</code> 5 times <em>as it creates an array of 5 <code>None</code>s</em>.</p>\n"}, {"tags": [], "owner": {"reputation": 1149, "user_id": 5189813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c07348b72ac4c884aeb7be435ec2a2d8?s=128&d=identicon&r=PG&f=1", "display_name": "Wamadahama", "link": "https://stackoverflow.com/users/5189813/wamadahama"}, "is_accepted": false, "score": 2, "last_activity_date": 1565212304, "creation_date": 1565212304, "answer_id": 57402342, "question_id": 57402320, "link": "https://stackoverflow.com/questions/57402320/why-does-this-give-none5/57402342#57402342", "title": "Why does this give [None]*5?", "body": "<p><code>print(n)</code> returns None so the resulting list from the list comprehension will be [None]*5</p>\n"}, {"tags": [], "owner": {"reputation": 96714, "user_id": 198633, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/5b9c04999233026354268c2ee4237e04?s=128&d=identicon&r=PG", "display_name": "inspectorG4dget", "link": "https://stackoverflow.com/users/198633/inspectorg4dget"}, "is_accepted": false, "score": 2, "last_activity_date": 1565212327, "creation_date": 1565212327, "answer_id": 57402345, "question_id": 57402320, "link": "https://stackoverflow.com/questions/57402320/why-does-this-give-none5/57402345#57402345", "title": "Why does this give [None]*5?", "body": "<p>The list comprehension effectively does this:</p>\n\n<pre><code>L = []\nfor n in range(5):\n    r = print(n)\n    L.append(r)\nprint(L)\n</code></pre>\n\n<p><code>print(...)</code> has the side-effect of displaying the arguments to screen, but has a return value of <code>None</code>. This is why a list of <code>None</code>s is created. However, when you run this in the shell, you're asking to see the list-comp'd list... which is five <code>None</code>s</p>\n"}, {"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 1, "last_activity_date": 1565212340, "creation_date": 1565212340, "answer_id": 57402349, "question_id": 57402320, "link": "https://stackoverflow.com/questions/57402320/why-does-this-give-none5/57402349#57402349", "title": "Why does this give [None]*5?", "body": "<p><code>print</code> doesn't return its argument; it writes it to the file handle used for standard output and returns <code>None</code>. The expected list is produced by <code>[n for n in range(5)]</code>.</p>\n\n<p>Interactive interpreters confuse the issue a bit because they always print the value of an expression to standard output after evaluating it. In your example, standard output gets 0 through 4 written by the evaluation of the calls to <code>print</code>, then the interpreter itself prints the string representation of the resulting list to standard output as well. If you put the same code in a file and run it <em>outside</em> an interactive interpreter, you'll see only the first 5 lines, but not the resulting list.</p>\n"}], "owner": {"reputation": 1277, "user_id": 10855529, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uG5To.png?s=128&g=1", "display_name": "vainraxe", "link": "https://stackoverflow.com/users/10855529/vainraxe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "closed_date": 1565212527, "answer_count": 4, "score": 0, "last_activity_date": 1565213511, "creation_date": 1565212199, "last_edit_date": 1565212295, "question_id": 57402320, "link": "https://stackoverflow.com/questions/57402320/why-does-this-give-none5", "closed_reason": "Duplicate", "title": "Why does this give [None]*5?", "body": "<p>on running</p>\n\n<pre><code>[print(n) for n in range(5)]\n</code></pre>\n\n<p>it gives</p>\n\n<pre><code>0\n1\n2\n3\n4\n[None, None, None, None, None]\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1565212229, "post_id": 57402316, "comment_id": 101286173, "body": "what have you tried so far?"}, {"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1565212259, "post_id": 57402316, "comment_id": 101286181, "body": "<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">Minimal, Reproducible Example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 2, "last_activity_date": 1565212501, "creation_date": 1565212501, "answer_id": 57402383, "question_id": 57402316, "link": "https://stackoverflow.com/questions/57402316/pandas-divide-rows-based-on-condition-from-another-dataframe/57402383#57402383", "title": "Pandas divide rows based on condition from another dataframe", "body": "<p>Try using set_index and letting pandas handle the data alignment:</p>\n\n<pre><code>df1 = df1.set_index('col_1')\n\ndf2 = df2.set_index('col_1')\n\n(df1 / df2).reset_index()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>  col_1  col_2  col_3\n0     a    1.0    1.0\n1     a    1.0    1.0\n2     b    2.0    2.0\n</code></pre>\n"}], "owner": {"reputation": 478, "user_id": 9683621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/664aa0a25ca29505ded990d5d9c8e94b?s=128&d=identicon&r=PG&f=1", "display_name": "Samira Kumar", "link": "https://stackoverflow.com/users/9683621/samira-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 57402383, "answer_count": 1, "score": 1, "last_activity_date": 1565213830, "creation_date": 1565212165, "last_edit_date": 1565213830, "question_id": 57402316, "link": "https://stackoverflow.com/questions/57402316/pandas-divide-rows-based-on-condition-from-another-dataframe", "title": "Pandas divide rows based on condition from another dataframe", "body": "<p>I've 2 pandas dataframes like below:</p>\n\n<pre><code>**dataframe_1**\n\n|col_1|col_2|col_3|\n|a|2|2|\n|b|4|4|\n|a|2|2|\n</code></pre>\n\n<pre><code>**dataframe_2**\n\n|col_1|col_2|col_3|\n|a|2|2|\n|b|2|2|\n</code></pre>\n\n<p>How can i divide dataframe_1/dataframe_2 so that only col_1 a's in dataframe_1 are divided by col_1 a's in dataframe_2 and similar for b.</p>\n\n<p>Expected output:</p>\n\n<pre><code>|col_1|col_2|col_3|\n|a|1|1|\n|b|2|2|\n|a|1|1|\n</code></pre>\n\n<p>I've same number of columns in both tables. </p>\n\n<p><strong>Edit:</strong>\nI've done this using iterrows on dataframe_1 and checking the col_1 and dividing with dataframe_2 values. I just wanted to see if there were other ways to doing it. </p>\n\n<p>Scott Boston's answer works perfect. </p>\n"}, {"tags": ["python", "image", "post", "python-requests", "postman"], "comments": [{"owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "edited": false, "score": 0, "creation_date": 1565212478, "post_id": 57402309, "comment_id": 101286246, "body": "What api are you using, cant do much to help you without seeings the required POST format."}, {"owner": {"reputation": 11, "user_id": 11898492, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-38-TL3VUEnY/AAAAAAAAAAI/AAAAAAAAASA/GBKnjRB3SFg/photo.jpg?sz=128", "display_name": "Jiaming Lin", "link": "https://stackoverflow.com/users/11898492/jiaming-lin"}, "reply_to_user": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "edited": false, "score": 0, "creation_date": 1565213023, "post_id": 57402309, "comment_id": 101286425, "body": "Sorry, first time creating a question, I have just added the image for the post format I want"}, {"owner": {"reputation": 463, "user_id": 9758284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wuapn.jpg?s=128&g=1", "display_name": "Tino", "link": "https://stackoverflow.com/users/9758284/tino"}, "edited": false, "score": 0, "creation_date": 1565213151, "post_id": 57402309, "comment_id": 101286456, "body": "You should include headers too. <code>res = req.post(url=url, headers=headers, data=datain)</code>"}, {"owner": {"reputation": 11, "user_id": 11898492, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-38-TL3VUEnY/AAAAAAAAAAI/AAAAAAAAASA/GBKnjRB3SFg/photo.jpg?sz=128", "display_name": "Jiaming Lin", "link": "https://stackoverflow.com/users/11898492/jiaming-lin"}, "edited": false, "score": 0, "creation_date": 1565213580, "post_id": 57402309, "comment_id": 101286612, "body": "I also tried with/without headers in postman, it works either way, when I try in python, both with or without header didn&#39;t work"}, {"owner": {"reputation": 1459, "user_id": 11605335, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e369436fb7719d6cadedbbdd36d92637?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Kearns", "link": "https://stackoverflow.com/users/11605335/robert-kearns"}, "edited": false, "score": 1, "creation_date": 1565213725, "post_id": 57402309, "comment_id": 101286663, "body": "Can you post a link to the docs you are working with?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11898492, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-38-TL3VUEnY/AAAAAAAAAAI/AAAAAAAAASA/GBKnjRB3SFg/photo.jpg?sz=128", "display_name": "Jiaming Lin", "link": "https://stackoverflow.com/users/11898492/jiaming-lin"}, "edited": false, "score": 0, "creation_date": 1565214301, "post_id": 57402524, "comment_id": 101286829, "body": "I tried to change to that way, the new error is for (k, v) in files: ValueError: too many values to unpack (expected 2)"}], "tags": [], "owner": {"reputation": 194, "user_id": 2295337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15eb507f7b3472041a35544c151ff2fa?s=128&d=identicon&r=PG", "display_name": "0asa", "link": "https://stackoverflow.com/users/2295337/0asa"}, "is_accepted": false, "score": 0, "last_activity_date": 1565213400, "creation_date": 1565213400, "answer_id": 57402524, "question_id": 57402309, "link": "https://stackoverflow.com/questions/57402309/how-to-write-a-python-script-that-does-the-same-thing-as-this-postman-request/57402524#57402524", "title": "How to write a python script that does the same thing as this postman request", "body": "<pre class=\"lang-py prettyprint-override\"><code>import requests\n\nfiles = {'file': open('test.png','rb').read()}\ndatain = {'all': 'other', 'data': 'not', 'file': 'upload'}\n\nr = requests.post(url, files=files, data=datain)\n</code></pre>\n\n<p>And <a href=\"https://2.python-requests.org/en/master/user/quickstart/#post-a-multipart-encoded-file\" rel=\"nofollow noreferrer\">requests</a> with take care of the multi-part form POST.</p>\n"}], "owner": {"reputation": 11, "user_id": 11898492, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-38-TL3VUEnY/AAAAAAAAAAI/AAAAAAAAASA/GBKnjRB3SFg/photo.jpg?sz=128", "display_name": "Jiaming Lin", "link": "https://stackoverflow.com/users/11898492/jiaming-lin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 223, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1565213400, "creation_date": 1565212140, "last_edit_date": 1565213388, "question_id": 57402309, "link": "https://stackoverflow.com/questions/57402309/how-to-write-a-python-script-that-does-the-same-thing-as-this-postman-request", "title": "How to write a python script that does the same thing as this postman request", "body": "<p>Need to make a request call to upload an image, this is a form-data with not just image</p>\n\n<p>I have tried several ways to mimic the request in the postman image, mostly are different ways to create a data dictionary and put that in the post request</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def uploadimage():\n\n    datain = {\n        \"file\": open('test.png','rb').read(),\n        \"use\": \"logoGroup-staging\",\n        \"logoGroup\": {\"_id\": \"5d42145db3ef8c0031128763\", \"name\":\"sstimagetest2\", \"longName\": \"sss\",\n                           \"createdAt\": \"2019-07-31T22:21:17.680Z\", \"updatedAt\": \"2019-07-31T22:21:17.680Z\", \"__v\": 0},\n        \"imageType\": {\"_id\":\"5cfeb4703509f72b616bf7b6\",\"name\":\"colorhybridnw\",\"__v\":0,\"createdAt\":\"2019-06-10T19:50:08.928Z\",\"height\":\"0\",\"type\":\"Manual\",\"updatedAt\":\"2019-06-10T19:50:08.928Z\",\"width\":\"0\"}\n    }\n\n    response = requests.post(\n        'https://xxxxxxxxxx/api/upload',\n        data = datain\n    )\n</code></pre>\n\n<p>in all my tries, it can conclude to 3 error categories, wrong python data format(not able to run) , 400 bad request call, 502 bad gateway call\n<a href=\"https://i.stack.imgur.com/Xei6J.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xei6J.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1565211842, "post_id": 57402260, "comment_id": 101286072, "body": "<code>wdataset[0]</code> looks for a column named <code>0</code>, which doesn&#39;t exist"}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1565211981, "post_id": 57402260, "comment_id": 101286112, "body": "@rafaelc how to refer to column number 0?"}, {"owner": {"reputation": 5010, "user_id": 9754169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785875bd9271c02795b886d3a9c65331?s=128&d=identicon&r=PG&f=1", "display_name": "Yuca", "link": "https://stackoverflow.com/users/9754169/yuca"}, "edited": false, "score": 0, "creation_date": 1565212049, "post_id": 57402260, "comment_id": 101286125, "body": "<code>wdataset.iloc[:,0]</code> or <code>wdataset[wdataset.columns[0]</code>"}, {"owner": {"reputation": 3962, "user_id": 9462829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1dd68e18954cab2275b2cc02845a37d9?s=128&d=identicon&r=PG&f=1", "display_name": "Juan C", "link": "https://stackoverflow.com/users/9462829/juan-c"}, "edited": false, "score": 0, "creation_date": 1565212145, "post_id": 57402260, "comment_id": 101286155, "body": "If you want to print the first row it&#39;s <code>wdataset.iloc[0]</code> == <code>wdataset.head(1)</code> (Both work)"}, {"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1565212391, "post_id": 57402260, "comment_id": 101286218, "body": "@mans these are the <i>very very very very</i> basics of pandas. I&#39;d recommend a quick look at the docs first :) I believe when you&#39;re this raw in the technology, every little step will look confusing and yield more questions, so it&#39;s good to get an intro first ! ;]"}, {"owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 1, "creation_date": 1565212605, "post_id": 57402260, "comment_id": 101286293, "body": "@rafaelc Thanks for the help. I am new in pandas and following this tutorial: <a href=\"https://towardsdatascience.com/data-science-with-python-intro-to-loading-and-subsetting-data-with-pandas-9f26895ddd7f\" rel=\"nofollow noreferrer\">towardsdatascience.com/&hellip;</a> which gave wrong commands."}], "answers": [{"tags": [], "owner": {"reputation": 596, "user_id": 10837503, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OVTQZ.jpg?s=128&g=1", "display_name": "Parijat Bhatt", "link": "https://stackoverflow.com/users/10837503/parijat-bhatt"}, "is_accepted": false, "score": 0, "last_activity_date": 1565220508, "creation_date": 1565220508, "answer_id": 57403390, "question_id": 57402260, "link": "https://stackoverflow.com/questions/57402260/error-to-get-a-column-of-a-data-frame-in-panda-python/57403390#57403390", "title": "Error to get a column of a data frame in panda python", "body": "<p>You can either use iloc or loc command. With iloc, you can specify numbers while with loc you can specify names. For eg</p>\n\n<pre><code>data.iloc[:,0] # to get all rows of zeroth column\n#For more than one column\ndata.iloc[:,0:3]\n\n\ndata.loc[:,['zeroth column name']] # get all rows of zeroth column\n#For more than one column\n\ndata.loc[:,['first column name','second column name']]\n</code></pre>\n"}], "owner": {"reputation": 14372, "user_id": 654019, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/438148c9a2ac0c1bb66f92a3adbafac2?s=128&d=identicon&r=PG", "display_name": "mans", "link": "https://stackoverflow.com/users/654019/mans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565220508, "creation_date": 1565211801, "question_id": 57402260, "link": "https://stackoverflow.com/questions/57402260/error-to-get-a-column-of-a-data-frame-in-panda-python", "title": "Error to get a column of a data frame in panda python", "body": "<p>I have this simple code:</p>\n\n<pre><code>import pathlib\nimport matplotlib.pyplot as plt\nimport pandas as pd\nimport seaborn as sns\n\nwdataset =pd.read_csv('C:\\MyData\\sampleData.csv', header=None)\nprint(wdataset.tail(3))\nprint(wdataset[0])\n</code></pre>\n\n<p>when I ran this code, I am getting this error:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"C:\\Users\\j\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\pandas\\core\\indexes\\base.py\", line 3078, in get_loc\n    return self._engine.get_loc(key)\n  File \"pandas\\_libs\\index.pyx\", line 140, in pandas._libs.index.IndexEngine.get_loc\n  File \"pandas\\_libs\\index.pyx\", line 162, in pandas._libs.index.IndexEngine.get_loc\n  File \"pandas\\_libs\\hashtable_class_helper.pxi\", line 1492, in pandas._libs.hashtable.PyObjectHashTable.get_item\n  File \"pandas\\_libs\\hashtable_class_helper.pxi\", line 1500, in pandas._libs.hashtable.PyObjectHashTable.get_item\nKeyError: 0\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"c:\\Users\\j\\.vscode\\extensions\\ms-python.python-2019.8.29288\\pythonFiles\\ptvsd_launcher.py\", line 43, in &lt;module&gt;\n    main(ptvsdArgs)\n  File \"c:\\Users\\j\\.vscode\\extensions\\ms-python.python-2019.8.29288\\pythonFiles\\lib\\python\\ptvsd\\__main__.py\", line 432, in main\n    run()\n  File \"c:\\Users\\j\\.vscode\\extensions\\ms-python.python-2019.8.29288\\pythonFiles\\lib\\python\\ptvsd\\__main__.py\", line 316, in run_file\n    runpy.run_path(target, run_name='__main__')\n  File \"C:\\Users\\j\\AppData\\Local\\Programs\\Python\\Python37\\lib\\runpy.py\", line 263, in run_path\n    pkg_name=pkg_name, script_name=fname)\n  File \"C:\\Users\\j\\AppData\\Local\\Programs\\Python\\Python37\\lib\\runpy.py\", line 96, in _run_module_code\n    mod_name, mod_spec, pkg_name, script_name)\n  File \"C:\\Users\\j\\AppData\\Local\\Programs\\Python\\Python37\\lib\\runpy.py\", line 85, in _run_code\n    exec(code, run_globals)\n  File \"c:\\MyData\\RCSV.py\", line 12, in &lt;module&gt;\n    print(wdataset[0])\n  File \"C:\\Users\\j\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\pandas\\core\\frame.py\", line 2688, in __getitem__\n    return self._getitem_column(key)\n  File \"C:\\Users\\j\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\pandas\\core\\frame.py\", line 2695, in _getitem_column\n    return self._get_item_cache(key)\n  File \"C:\\Users\\j\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\pandas\\core\\generic.py\", line 2489, in _get_item_cache\n    values = self._data.get(item)\n  File \"C:\\Users\\j\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\pandas\\core\\internals.py\", line 4115, in get\n    loc = self.items.get_loc(item)\n  File \"C:\\Users\\j\\AppData\\Local\\Programs\\Python\\Python37\\lib\\site-packages\\pandas\\core\\indexes\\base.py\", line 3080, in get_loc\n    return self._engine.get_loc(self._maybe_cast_indexer(key))\n  File \"pandas\\_libs\\index.pyx\", line 140, in pandas._libs.index.IndexEngine.get_loc\n  File \"pandas\\_libs\\index.pyx\", line 162, in pandas._libs.index.IndexEngine.get_loc\n  File \"pandas\\_libs\\hashtable_class_helper.pxi\", line 1492, in pandas._libs.hashtable.PyObjectHashTable.get_item\n  File \"pandas\\_libs\\hashtable_class_helper.pxi\", line 1500, in pandas._libs.hashtable.PyObjectHashTable.get_item\nKeyError: 0\n</code></pre>\n\n<p>What is the problem and how can I fix it?</p>\n"}, {"tags": ["python", "image", "opencv"], "comments": [{"owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "edited": false, "score": 0, "creation_date": 1565211773, "post_id": 57402254, "comment_id": 101286048, "body": "Have you implemented anything that you found to be too slow?"}, {"owner": {"reputation": 125, "user_id": 11657250, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tCHyVOXVbbg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re9b69lxW0B4-iFd0bjh0rUPqNuCg/mo/photo.jpg?sz=128", "display_name": "Jo&#227;o", "link": "https://stackoverflow.com/users/11657250/jo%c3%a3o"}, "reply_to_user": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "edited": false, "score": 0, "creation_date": 1565212164, "post_id": 57402254, "comment_id": 101286161, "body": "Yes, four looping, to find each point. It wasn&#39;t too slow, but it wasn&#39;t fast."}, {"owner": {"reputation": 4756, "user_id": 10001688, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvhzK.jpg?s=128&g=1", "display_name": "Michael Bianconi", "link": "https://stackoverflow.com/users/10001688/michael-bianconi"}, "edited": false, "score": 1, "creation_date": 1565212191, "post_id": 57402254, "comment_id": 101286165, "body": "Can you paste some of that code into your post?"}, {"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1565212816, "post_id": 57402254, "comment_id": 101286363, "body": "Sum all the rows across the image and find first and last row that don&#39;t sum to zero. Sum all the columns down the image and find the first and last columns that don&#39;t sum to zero. For added fun, do the two in parallel."}], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 11657250, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tCHyVOXVbbg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re9b69lxW0B4-iFd0bjh0rUPqNuCg/mo/photo.jpg?sz=128", "display_name": "Jo&#227;o", "link": "https://stackoverflow.com/users/11657250/jo%c3%a3o"}, "edited": false, "score": 0, "creation_date": 1565212367, "post_id": 57402324, "comment_id": 101286208, "body": "Thank you. I&#39;ll try it when I get home!"}, {"owner": {"reputation": 125, "user_id": 11657250, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tCHyVOXVbbg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re9b69lxW0B4-iFd0bjh0rUPqNuCg/mo/photo.jpg?sz=128", "display_name": "Jo&#227;o", "link": "https://stackoverflow.com/users/11657250/jo%c3%a3o"}, "edited": false, "score": 0, "creation_date": 1565235152, "post_id": 57402324, "comment_id": 101290910, "body": "It worked fine, see what you think about my solution."}, {"owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "reply_to_user": {"reputation": 125, "user_id": 11657250, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tCHyVOXVbbg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re9b69lxW0B4-iFd0bjh0rUPqNuCg/mo/photo.jpg?sz=128", "display_name": "Jo&#227;o", "link": "https://stackoverflow.com/users/11657250/jo%c3%a3o"}, "edited": false, "score": 0, "creation_date": 1565294006, "post_id": 57402324, "comment_id": 101318927, "body": "Your method works as well but it has a lot of case checking. Both work :)"}], "tags": [], "owner": {"reputation": 25800, "user_id": 11162165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/t5kgh.png?s=128&g=1", "display_name": "nathancy", "link": "https://stackoverflow.com/users/11162165/nathancy"}, "is_accepted": false, "score": 1, "last_activity_date": 1565212210, "creation_date": 1565212210, "answer_id": 57402324, "question_id": 57402254, "link": "https://stackoverflow.com/questions/57402254/how-to-crop-an-image-by-extreme-points-opencv-python/57402324#57402324", "title": "How to crop an image by extreme points? OPENCV - PYTHON", "body": "<p>You can do contour detection to detect the bounding box then extract the ROI</p>\n\n<pre><code>import cv2\n\nimage = cv2.imread('1.png')\noriginal = image.copy()\ngray = cv2.cvtColor(image, cv2.COLOR_BGR2GRAY)\n\ncnts = cv2.findContours(gray, cv2.RETR_EXTERNAL, cv2.CHAIN_APPROX_SIMPLE)\ncnts = cnts[0] if len(cnts) == 2 else cnts[1]\n\nfor c in cnts:\n    (x, y, w, h) = cv2.boundingRect(c)\n    ROI = original[y:y+h, x:x+w].copy()\n    cv2.rectangle(original, (x, y), (x + w, y + h), (36,255,12), 2)\n\ncv2.imshow('ROI', ROI)\ncv2.imwrite('ROI.png', ROI)\ncv2.waitKey()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/uejzK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uejzK.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/Xfx2c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Xfx2c.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": [], "owner": {"reputation": 125, "user_id": 11657250, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tCHyVOXVbbg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re9b69lxW0B4-iFd0bjh0rUPqNuCg/mo/photo.jpg?sz=128", "display_name": "Jo&#227;o", "link": "https://stackoverflow.com/users/11657250/jo%c3%a3o"}, "is_accepted": false, "score": 0, "last_activity_date": 1565235073, "creation_date": 1565235073, "answer_id": 57404818, "question_id": 57402254, "link": "https://stackoverflow.com/questions/57402254/how-to-crop-an-image-by-extreme-points-opencv-python/57404818#57404818", "title": "How to crop an image by extreme points? OPENCV - PYTHON", "body": "<p>I found an efficient way, very fast. Thanks to Mark Setchell and Nathancy.</p>\n\n<pre><code>colsums = np.sum(img, axis=0)\nlinessum = np.sum(img, axis=1)\ncolsums2 = np.nonzero(0-colsums)                                                                 \nlinessum2 = np.nonzero(0-linessum)    \n\nxx=linessum2[0][0]                                                               \nyy=linessum2[0][linessum2[0].shape[0]-1]    \nww=colsums2[0][0]\nhh=colsums2[0][colsums2[0].shape[0]-1]\nif xx &gt; 4 :\n    xx = xx-5\nelse :\n    xx = 0 \n\nif ww &gt; 4 :\n    ww = ww-5\nelse :\n    ww = 0\n\nif hh &lt; img.shape[1] -6:\n    hh=hh+5\nelse :\n    hh=img.shape[1]-1\n\nif yy &lt; img.shape[0] -6:\n    yy=yy+5\nelse :\n    yy=img.shape[0]-1  \n\nimgcrop = img[xx:yy, ww:hh]\n</code></pre>\n"}], "owner": {"reputation": 125, "user_id": 11657250, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tCHyVOXVbbg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re9b69lxW0B4-iFd0bjh0rUPqNuCg/mo/photo.jpg?sz=128", "display_name": "Jo&#227;o", "link": "https://stackoverflow.com/users/11657250/jo%c3%a3o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1565235073, "creation_date": 1565211730, "question_id": 57402254, "link": "https://stackoverflow.com/questions/57402254/how-to-crop-an-image-by-extreme-points-opencv-python", "title": "How to crop an image by extreme points? OPENCV - PYTHON", "body": "<p>I have a image like this: \n<a href=\"https://i.stack.imgur.com/5kJyG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5kJyG.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want to crop it like this:\n<a href=\"https://i.stack.imgur.com/KGkFQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KGkFQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>I just need four points, upper right, upper left etc. It needs to be optimized and fast, python 3 opencv.</p>\n"}, {"tags": ["python", "django", "django-rest-framework"], "comments": [{"owner": {"reputation": 4541, "user_id": 3427252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/phvBb.png?s=128&g=1", "display_name": "Ramy M. Mousa", "link": "https://stackoverflow.com/users/3427252/ramy-m-mousa"}, "edited": false, "score": 1, "creation_date": 1565211826, "post_id": 57402238, "comment_id": 101286068, "body": "-5:00 is the timezone setting in which your server is configured"}], "answers": [{"comments": [{"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 2, "creation_date": 1565212123, "post_id": 57402277, "comment_id": 101286150, "body": "Actually <code>USE_TZ = False</code> should be set for such a case."}, {"owner": {"reputation": 4541, "user_id": 3427252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/phvBb.png?s=128&g=1", "display_name": "Ramy M. Mousa", "link": "https://stackoverflow.com/users/3427252/ramy-m-mousa"}, "reply_to_user": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1565212245, "post_id": 57402277, "comment_id": 101286177, "body": "@ipaleka thank you for the notice, I updated my answer with your suggestion."}, {"owner": {"reputation": 629, "user_id": 4399133, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cb44f5f953f36d859c96479051207c7a?s=128&d=identicon&r=PG&f=1", "display_name": "reojased", "link": "https://stackoverflow.com/users/4399133/reojased"}, "edited": false, "score": 0, "creation_date": 1565212741, "post_id": 57402277, "comment_id": 101286338, "body": "works like a charm thank you, just a quick question, for what does the &#39;UTC&#39; stand for?"}], "tags": [], "owner": {"reputation": 4541, "user_id": 3427252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/phvBb.png?s=128&g=1", "display_name": "Ramy M. Mousa", "link": "https://stackoverflow.com/users/3427252/ramy-m-mousa"}, "is_accepted": true, "score": 1, "last_activity_date": 1565212217, "last_edit_date": 1565212217, "creation_date": 1565211984, "answer_id": 57402277, "question_id": 57402238, "link": "https://stackoverflow.com/questions/57402238/django-datetime-serializing/57402277#57402277", "title": "Django DateTime serializing", "body": "<p>Django's <code>DateTimeField</code> is a zone-aware object which means: it stores timezone information in the date object. </p>\n\n<p><strong>-5:00</strong> is your server's timezone setting. </p>\n\n<p>If you don't want this to happen, configure your project settings to use UTC timezone by adding this to <code>settings.py</code></p>\n\n<pre><code>TIME_ZONE = 'UTC'\n</code></pre>\n\n<p>Edit:</p>\n\n<p>As suggested by ipaleka, you can totally disable timezone by adding <code>USE_TZ = False</code> to settings.py instead.</p>\n"}], "owner": {"reputation": 629, "user_id": 4399133, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/cb44f5f953f36d859c96479051207c7a?s=128&d=identicon&r=PG&f=1", "display_name": "reojased", "link": "https://stackoverflow.com/users/4399133/reojased"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 57402277, "answer_count": 1, "score": 0, "last_activity_date": 1565212217, "creation_date": 1565211627, "question_id": 57402238, "link": "https://stackoverflow.com/questions/57402238/django-datetime-serializing", "title": "Django DateTime serializing", "body": "<p>im getting a strange serialized representation of my DateTimeField, at the ending of the representation I get a \"<strong>-05:00</strong>\" on the JSON.</p>\n\n<p>Inside my model the field is defined as:</p>\n\n<pre><code>ultima_actualizacion = models.DateTimeField(auto_now=True)\n</code></pre>\n\n<p>And in the serializer I got it inside the <code>Meta Class</code>:</p>\n\n<pre><code>class Meta:\n    fields = (\n        ...\n        'ultima_actualizacion',\n        ...\n         )\n</code></pre>\n\n<p>But when I make a request in the response JSON I get something like:</p>\n\n<pre><code> {\n ...\n \"ultima_actualizacion\": \"2019-08-07T15:34:22.692530-05:00\"\n }\n</code></pre>\n\n<p>Which seems odd because I haven't changed the format and still get that \"<strong>-05:00</strong>\" in every <em>ultima_actualizacion</em></p>\n\n<p>I have looked and tried changing the format and input formats as specified in: <a href=\"https://www.django-rest-framework.org/api-guide/fields/#datetimefield\" rel=\"nofollow noreferrer\">Django Rest Framework Fields</a> and in this other <a href=\"https://stackoverflow.com/questions/53434094/django-rest-framework-how-to-post-date-field\">answer</a> but still get the \"<strong>-05:00</strong>\"</p>\n"}, {"tags": ["python", "protocol-buffers", "protobuf-python"], "answers": [{"tags": [], "owner": {"reputation": 7877, "user_id": 914716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0ed96380268ce904eb69d0895915cfa?s=128&d=identicon&r=PG", "display_name": "jpa", "link": "https://stackoverflow.com/users/914716/jpa"}, "is_accepted": false, "score": 0, "last_activity_date": 1565549040, "creation_date": 1565549040, "answer_id": 57452648, "question_id": 57402209, "link": "https://stackoverflow.com/questions/57402209/python-implementing-protobuf-decode-raw-in-python/57452648#57452648", "title": "Python Implementing protobuf --decode-raw in python", "body": "<p>I have had the same need, but there is no official API for it as far as I've found. There are some internal methods, such as accessing <code>msg._unknown_fields</code> on an empty message and <a href=\"https://github.com/protocolbuffers/protobuf/blob/master/python/google/protobuf/internal/decoder.py\" rel=\"nofollow noreferrer\">internal.decoder</a>. But those are not part of the official API and vary between versions.</p>\n\n<p>If the shell approach is too hacky, your best bet is implementing the decoding based on <a href=\"https://developers.google.com/protocol-buffers/docs/encoding\" rel=\"nofollow noreferrer\">documentation</a> with custom Python code.</p>\n"}], "owner": {"reputation": 59, "user_id": 848165, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/8bf8f9ab72a617604457de73837315aa?s=128&d=identicon&r=PG", "display_name": "toothpick", "link": "https://stackoverflow.com/users/848165/toothpick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 641, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1565549040, "creation_date": 1565211466, "question_id": 57402209, "link": "https://stackoverflow.com/questions/57402209/python-implementing-protobuf-decode-raw-in-python", "title": "Python Implementing protobuf --decode-raw in python", "body": "<p>I am dealing with the protobuf protocol and I encounter the need of decoding messages of unknown fields and types. I know <code>protoc --decode_raw</code> does a good job at that (alas not precise but good enough).  </p>\n\n<p>I was thinking about running <code>protoc --decode-raw</code> in a shell and let Python read its content, parsing it as a dictionary, but I figure it is the last resort of implementation.</p>\n\n<p>Is there a Pythonic method of implementing the same functionality?</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 2, "creation_date": 1565211331, "post_id": 57402177, "comment_id": 101285914, "body": "The first column is just your index"}, {"owner": {"reputation": 5029, "user_id": 8836582, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5f737b956bfd27d77d622fb17290f5d5?s=128&d=identicon&r=PG&f=1", "display_name": "Dawn17", "link": "https://stackoverflow.com/users/8836582/dawn17"}, "reply_to_user": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "edited": false, "score": 0, "creation_date": 1565211395, "post_id": 57402177, "comment_id": 101285936, "body": "It follows when I export it to a <code>csv</code>. I don&#39;t want that"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "edited": false, "score": 1, "creation_date": 1565211472, "post_id": 57402177, "comment_id": 101285968, "body": "<code>df.to_csv(&#39;name_of_file.csv&#39;, index=False)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1565211469, "post_id": 57402197, "comment_id": 101285967, "body": "Also might be worth mentioning setting the index to the first column, instead of just hiding it"}], "tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": true, "score": 3, "last_activity_date": 1565211400, "creation_date": 1565211400, "answer_id": 57402197, "question_id": 57402177, "link": "https://stackoverflow.com/questions/57402177/dropping-the-first-column-in-pandas/57402197#57402197", "title": "Dropping the first column in Pandas", "body": "<p>IIUC, your first column is just your index. You can always hide in your notebook it with</p>\n\n<pre><code>df.style.hide_index()\n</code></pre>\n\n<p>but not sure if that brings much value. </p>\n\n<p>If you're writing to a file (e.g. <code>to_csv</code>), you can always set <code>index=False</code> to ignore it, like</p>\n\n<pre><code>df.to_csv('file.csv', index=False)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1033, "user_id": 11595393, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PRtp4.png?s=128&g=1", "display_name": "Dimitris Thomas", "link": "https://stackoverflow.com/users/11595393/dimitris-thomas"}, "is_accepted": false, "score": 1, "last_activity_date": 1565217696, "last_edit_date": 1565217696, "creation_date": 1565213487, "answer_id": 57402539, "question_id": 57402177, "link": "https://stackoverflow.com/questions/57402177/dropping-the-first-column-in-pandas/57402539#57402539", "title": "Dropping the first column in Pandas", "body": "<p>You can also assign any column as index:</p>\n\n<pre><code>df.set_index('command', inplace=True)\n</code></pre>\n\n<p>Other useful commands:</p>\n\n<pre><code># reset the index\ndf.reset_index(inplace=True, drop=True)\n\n# sort by index\ndf.sort_index(inplace=True)\n</code></pre>\n"}], "owner": {"reputation": 5029, "user_id": 8836582, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5f737b956bfd27d77d622fb17290f5d5?s=128&d=identicon&r=PG&f=1", "display_name": "Dawn17", "link": "https://stackoverflow.com/users/8836582/dawn17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 824, "favorite_count": 0, "accepted_answer_id": 57402197, "answer_count": 2, "score": 0, "last_activity_date": 1565217696, "creation_date": 1565211296, "question_id": 57402177, "link": "https://stackoverflow.com/questions/57402177/dropping-the-first-column-in-pandas", "title": "Dropping the first column in Pandas", "body": "<pre><code>    command             description\n0   aaa ikegroup WORD   Name of the IKE group\n1   aaa ikegroup &lt;cr&gt;   \n0   aaa locald trace    Show trace data for the locald component(cisco...\n0   aaa login trace Show trace data for login sub system\n0   aaa password-policy statistics  Show statistics related to password policy\n1   aaa password-policy WORD    Name of the Password Policy\n</code></pre>\n\n<p>Above is how my dataframe looks like.\nI want to get rid of the very first column which has numbers, not the <code>command</code> column. However, when I do this:</p>\n\n<p><code>df2 = df.drop([df.columns[0]], axis='columns')</code></p>\n\n<p>This drops the <code>command</code> column, not the ones with the index.</p>\n\n<p>How can I drop the first one?</p>\n"}, {"tags": ["python", "python-3.x", "matplotlib", "logic", "gaussian"], "comments": [{"owner": {"reputation": 2611, "user_id": 11633355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4pV83.png?s=128&g=1", "display_name": "Anna Nevison", "link": "https://stackoverflow.com/users/11633355/anna-nevison"}, "edited": false, "score": 0, "creation_date": 1565213308, "post_id": 57402160, "comment_id": 101286515, "body": "you have it normalizing the 2 day range. when you normalize a graph the area under the curve has to be equal to one."}, {"owner": {"reputation": 660, "user_id": 11853632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aebdbc0322efc6564f4c79411e509d68?s=128&d=identicon&r=PG&f=1", "display_name": "reinhardt", "link": "https://stackoverflow.com/users/11853632/reinhardt"}, "reply_to_user": {"reputation": 2611, "user_id": 11633355, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4pV83.png?s=128&g=1", "display_name": "Anna Nevison", "link": "https://stackoverflow.com/users/11633355/anna-nevison"}, "edited": false, "score": 0, "creation_date": 1565235453, "post_id": 57402160, "comment_id": 101290955, "body": "Hey @AnnaNevison, can you please show where is the problem in my code?"}], "answers": [{"tags": [], "owner": {"reputation": 29479, "user_id": 1356000, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ef54c2101a4c23ea2441ce2b346ffb75?s=128&d=identicon&r=PG", "display_name": "Diziet Asahi", "link": "https://stackoverflow.com/users/1356000/diziet-asahi"}, "is_accepted": false, "score": 1, "last_activity_date": 1565264236, "creation_date": 1565264236, "answer_id": 57411677, "question_id": 57402160, "link": "https://stackoverflow.com/questions/57402160/problem-in-plotting-n-gaussian-curves-for-n-consecutive-days/57411677#57411677", "title": "Problem in plotting n gaussian curves for n consecutive days", "body": "<p>Your <code>sigma</code> value is too large. I don't know what you are trying to calculate, so I cannot help you on how to calculate that value, but here is the output of your code when manually changing the value in <code>bell_curve()</code> to <code>sigma = 10000</code>:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Zhex6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Zhex6.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 660, "user_id": 11853632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aebdbc0322efc6564f4c79411e509d68?s=128&d=identicon&r=PG&f=1", "display_name": "reinhardt", "link": "https://stackoverflow.com/users/11853632/reinhardt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565264236, "creation_date": 1565211189, "last_edit_date": 1565235529, "question_id": 57402160, "link": "https://stackoverflow.com/questions/57402160/problem-in-plotting-n-gaussian-curves-for-n-consecutive-days", "title": "Problem in plotting n gaussian curves for n consecutive days", "body": "<p>I am trying to plot n gaussian curves for n consecutive days. The plot must start at the <code>base</code> value inputted by the user, reach the <code>peak</code> value at 46800secs (13:00 or 1pm) and again end at the nearly about the <code>base</code> value at the end of the day and again for the next n days, the same curve must be replicated. I am following the suggestion from this post: <a href=\"https://stackoverflow.com/questions/57321994/how-to-generate-multiple-gaussian-plots\">Generating multiple gaussian plots</a></p>\n\n<p>I have the following code:</p>\n\n<pre><code>import matplotlib.pyplot as plt\nimport numpy as np\nimport scipy.stats as stats\nimport math\nimport pandas as pd\nfrom pandas.plotting import register_matplotlib_converters\nregister_matplotlib_converters()\nfrom datetime import datetime\n\ndef date_inputs(start_date, end_date):\n    try:\n        start_date = datetime.strptime(start_date, '%Y-%m-%d %H:%M:%S')\n        end_date = datetime.strptime(end_date, '%Y-%m-%d %H:%M:%S')\n        dates = pd.date_range(start_date, end_date, freq = 'S').tolist()\n        dates = pd.Series(dates)\n        dates_diff = abs((end_date - start_date).days)\n        dates = dates.iloc[:-1]\n        print('Dates accepted!')\n        return dates, dates_diff\n    except ValueError:\n        raise ValueError(\"Incorrect date format, should be YYYY-MM-DD HH:MM:SS\")\n\nstart_date_input = str(input('Enter start date in %Y-%m-%d %H:%M:%S format: '))\nend_date_input = str(input('Enter end date in %Y-%m-%d %H:%M:%S format: '))\ndates, n = date_inputs(start_date_input, end_date_input)\n\ndef bell_curve(total_consumption, peak, base, n):\n    x = np.linspace(0, n*86400, n*86400)\n    sigma = total_consumption/(math.sqrt(2*math.pi)*(peak-base))\n    sigmas = [sigma]*n\n    pdf_value = np.zeros(x.shape)\n    for m, s in zip(mus, sigmas):\n        pdf_value += stats.norm.pdf(x,m,s)\n    plt.figure(figsize = (20,10))\n    plt.plot(dates, (total_consumption*pdf_value) + base)\n    plt.xticks(rotation = 70)\n    plt.show()\n    return pdf_value\n\nmu = 46800\nseconds_in_one_day = 86400\nmus = []\nfor i in range(0,n):\n    mus.append(mu+(i*seconds_in_one_day))\n\n\npeak = float(input('Enter the peak value in Watts:'))\ntotal_consumption = float(input('Enter the total consumption in one day in Watts:'))\nbase = float(input('Enter the base value in Watts:'))\n\npdf_values = bell_curve(total_consumption, peak, base, n)\n</code></pre>\n\n<p>When I give the inputs as follows:</p>\n\n<p><code>start_day: 2018-01-01 00:00:00</code>, <code>end_day: 2018-01-02 00:00:00</code> with <code>peak</code> as 2222, <code>base</code> as 500 &amp; <code>total_consumption</code> as 630000000, I get the following graph:</p>\n\n<p><strong>Figure 1</strong>\n<a href=\"https://i.stack.imgur.com/UySGY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UySGY.png\" alt=\"enter image description here\"></a></p>\n\n<p>The above graph is for one day and it is correct. </p>\n\n<p>When I change the end date to <code>end_day: 2018-01-03 00:00:00</code> the difference between the start &amp; end date is 2, so I want 2 same graphs to be plotted side by side with the same peak value, same base value and the peak occuring at 13:00 or 1pm the next day too:</p>\n\n<p><strong>Figure 2: Example how the gaussian curves for 2 days must look like</strong>\n<a href=\"https://i.stack.imgur.com/nuduW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nuduW.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>But instead of looking like figure 2, the graph looks as follows:</p>\n\n<p><strong>Figure 3</strong>\n<a href=\"https://i.stack.imgur.com/aVs6M.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aVs6M.png\" alt=\"enter image description here\"></a></p>\n\n<p>In the figure 3, we can see that instead of 2 graphs, one graph is being plotted with the peak and base values being completely wrong.</p>\n\n<p>Can someone please tell me what is the mistake I am doing with my code here?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["python", "python-3.6", "sftp", "python-3.7", "pysftp"], "answers": [{"comments": [{"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 1, "creation_date": 1565212280, "post_id": 57402319, "comment_id": 101286187, "body": "Yes. But check <code>getfo</code> code. You should call <code>f.prefetch</code>, like it does, to get better performance."}, {"owner": {"reputation": 1643, "user_id": 2761682, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/726c7c19786036ab23d87126c71974e6?s=128&d=identicon&r=PG&f=1", "display_name": "dstandish", "link": "https://stackoverflow.com/users/2761682/dstandish"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1565212524, "post_id": 57402319, "comment_id": 101286258, "body": "Thanks @MartinPrikryl, I have added.  Also what do you mean check <code>getfo</code> code?  What are you suggesting I look for?"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1565213063, "post_id": 57402319, "comment_id": 101286438, "body": "I&#39;ve meant that you should check <code>getfo</code> code to see what it does - It calls the <code>prefetch</code>."}], "tags": [], "owner": {"reputation": 1643, "user_id": 2761682, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/726c7c19786036ab23d87126c71974e6?s=128&d=identicon&r=PG&f=1", "display_name": "dstandish", "link": "https://stackoverflow.com/users/2761682/dstandish"}, "is_accepted": true, "score": 3, "last_activity_date": 1565212507, "last_edit_date": 1565212507, "creation_date": 1565212198, "answer_id": 57402319, "question_id": 57402147, "link": "https://stackoverflow.com/questions/57402147/how-to-stream-from-one-sftp-to-another-sftp-using-python-and-pysftp/57402319#57402319", "title": "How to stream from one SFTP to another SFTP using python and pysftp", "body": "<p>OK ... duh.... pysftp provides an <code>open</code> method.</p>\n\n<pre><code>with source_sftp.open('source/path.txt.gz', 'rb') as f:\n    f.prefetch()\n    target_sftp.putfo('target/path.txt.gz', f)\n</code></pre>\n"}], "owner": {"reputation": 1643, "user_id": 2761682, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/726c7c19786036ab23d87126c71974e6?s=128&d=identicon&r=PG&f=1", "display_name": "dstandish", "link": "https://stackoverflow.com/users/2761682/dstandish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 2, "accepted_answer_id": 57402319, "answer_count": 1, "score": 2, "last_activity_date": 1565212706, "creation_date": 1565211142, "last_edit_date": 1565212706, "question_id": 57402147, "link": "https://stackoverflow.com/questions/57402147/how-to-stream-from-one-sftp-to-another-sftp-using-python-and-pysftp", "title": "How to stream from one SFTP to another SFTP using python and pysftp", "body": "<p>I want to transfer files from one SFTP server to another.</p>\n\n<p>I don't want to write locally, and I don't want to read the whole file into memory.</p>\n\n<p>Pysftp has <code>getfo</code> and <code>putfo</code> methods.  </p>\n\n<p>But <code>getfo</code> doesn't give you a reader -- it gives just writes to an opened fileobj.</p>\n\n<p>I essentially want to pipe <code>getfo</code> to some file-like that can be read from, so I can provide this as the reader for <code>putfo</code>, to send to target.</p>\n\n<p>Pseudocode:</p>\n\n<pre><code>buffer_obj = SomeBufferedIOReader()\nsource_sftp.getfo('/remote/path.txt.gz', buffer_obj)\ntarget_sftp.putfo('/target/path.txt.gz', buffer_obj) # streaming commences\n</code></pre>\n\n<p>If I was doing this in bash I would create a fifo file, write to the fifo asynchronously, and then upload from that file.  When the file was uploaded, the fifo would be exhausted and process would complete.  Not sure how to do the equivalent in python.</p>\n"}, {"tags": ["python", "string", "pandas", "type-conversion"], "comments": [{"owner": {"reputation": 2507, "user_id": 2741091, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2f5b0db70a69308bba55f416f78f9fc9?s=128&d=identicon&r=PG", "display_name": "ifly6", "link": "https://stackoverflow.com/users/2741091/ifly6"}, "edited": false, "score": 0, "creation_date": 1565211222, "post_id": 57402140, "comment_id": 101285871, "body": "What type do you want to turn it into?"}, {"owner": {"reputation": 19, "user_id": 11553125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e893708dc22cfa4705a637386083b9cd?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/11553125/alex"}, "reply_to_user": {"reputation": 2507, "user_id": 2741091, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2f5b0db70a69308bba55f416f78f9fc9?s=128&d=identicon&r=PG", "display_name": "ifly6", "link": "https://stackoverflow.com/users/2741091/ifly6"}, "edited": false, "score": 0, "creation_date": 1565212675, "post_id": 57402140, "comment_id": 101286316, "body": "I guess I got a solution to my problem: What I did was make <code>value_list = [filter_value]</code> then <code>Serie_value = pd.Series(value_list)</code> then <code>Value_convertion = Serie_value.astype(type(df[Filter_column].dropna()[0]))</code> then with the corresponding logical operation <code>filter = operator.eq(df[Filter_column], Value_convertion[0])</code> and finally apply the filter to the dataframe <code>filtered_data = df[filter]</code>. Presto! This is a solution, If you have a more convinient one feel free to share it."}], "owner": {"reputation": 19, "user_id": 11553125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e893708dc22cfa4705a637386083b9cd?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/11553125/alex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565211102, "creation_date": 1565211102, "question_id": 57402140, "link": "https://stackoverflow.com/questions/57402140/how-to-change-the-data-type-of-a-string-into-the-same-datatype-of-a-contingent-v", "title": "How to change the data type of a string into the same datatype of a contingent value?", "body": "<p>I\u00b4m trying to implemen a filtering code:</p>\n\n<p>For example:</p>\n\n<pre><code>import pandas as pd   \nimport operator              #this lets you do logical operations\n\ndf = pd.read_csv('file.csv')\n\nFilter_column = input('&gt; ')  # I will do a filter in this column\ncomparision = input('&gt; ')    # Here goes the logical comparission (==, &gt;, &lt;, etc)\nfilter_value = input('&gt; ')   # Here goes the value to do the filter \n\nif comparision == '=':       #Say comparision = '=' in this example\n\n    filter_value.astype(type(df['Filter_column)].dropna()[0])) #!!!\n    filter = operator.eq(df['Filter_column'],filter_value))\n    dp = df[filter]\n</code></pre>\n\n<p>Then, dp is the filtered data set given the filter condition</p>\n\n<p>In the line where I put the comment <code>#!!!</code> is the ideal method to convert the data type of the input string <code>filter_value</code>. Pandas can change the data type of the values of a column with <code>.astype()</code> method.\nBut that is not a valid method for a string. Is there a way to convert the data type of an input string to the same data type of an arbitrary given object?</p>\n"}, {"tags": ["memory", "python", "memory-limit", "ulimit"], "migrated_from": {"other_site": {"markdown_extensions": ["Prettify"], "launch_date": 1250553600, "open_beta_date": 1247529600, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon@2.png", "twitter_account": "super_user", "favicon_url": "https://cdn.sstatic.net/Sites/superuser/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/superuser/Img/apple-touch-icon.png", "audience": "computer enthusiasts and power users", "site_url": "https://superuser.com", "api_site_parameter": "superuser", "logo_url": "https://cdn.sstatic.net/Sites/superuser/Img/logo.png", "name": "Super User", "site_type": "main_site"}, "on_date": 1565212568, "question_id": 1468899}, "owner": {"reputation": 673, "user_id": 2084503, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/EmUvm.jpg?s=128&g=1", "display_name": "Pavel Komarov", "link": "https://stackoverflow.com/users/2084503/pavel-komarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1565212568, "creation_date": 1565210856, "question_id": 57402397, "link": "https://stackoverflow.com/questions/57402397/opening-millions-of-numpy-memmaps-in-python", "title": "Opening millions of numpy.memmaps in python", "body": "<p>I have a database composed of millions of training examples. Each is saved as its own <code>numpy.memmap</code>. (Yes, yes, I know, but they're of irregular sizes. I probably will modify my design to put like-size examples together in one memmap and hide that fact from the user.)</p>\n\n<p>Trying to open this database causes me to run in to the system <code>NOFILES</code> limits, <a href=\"https://superuser.com/questions/1468436/raise-number-of-files-a-process-can-open-beyond-220\">but I've solved that part</a>.</p>\n\n<p>Now I'm running in to <code>OSError: [Errno 12] Cannot allocate memory</code> after about 64865 memmaps are created, and executing most other code after that point results in a <code>MemoryError</code>. This is strange because the process takes only 1.1 GiB of memory before it fails, and this server has nearly 100 GiB of memory.</p>\n\n<p>I've gone and saved a million dummy files in a directory and opened them all with python's standard <code>open</code> function, and it works fine. Takes about 5 GiB of memory between file handles and contents, but it works.</p>\n\n<p>What could be limiting me to only opening about 2^16 memory maps?</p>\n"}, {"tags": ["python", "hover", "plotly", "plotly-dash", "plotly-express"], "answers": [{"comments": [{"owner": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "edited": false, "score": 0, "creation_date": 1565212272, "post_id": 57402233, "comment_id": 101286184, "body": "Thanks. Does it happen to be possible to lock the hover box to a predefined location?"}, {"owner": {"reputation": 21840, "user_id": 112871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c672b1a855701ccca00911a6fbf02e4?s=128&d=identicon&r=PG", "display_name": "nicolaskruchten", "link": "https://stackoverflow.com/users/112871/nicolaskruchten"}, "reply_to_user": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "edited": false, "score": 1, "creation_date": 1565212333, "post_id": 57402233, "comment_id": 101286198, "body": "There\u2019s no feature for that, no."}, {"owner": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "edited": false, "score": 0, "creation_date": 1565794197, "post_id": 57402233, "comment_id": 101463861, "body": "For hovermode, I see that there&#39;s <code>x</code> and <code>y</code> options, but can we use an arbitrary dataframe column instead? For example, I&#39;m plotting precision-recall curves, and I&#39;d like to see matching values of the &quot;detection_threshold&quot; parameter column on other lines while hovering."}, {"owner": {"reputation": 21840, "user_id": 112871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c672b1a855701ccca00911a6fbf02e4?s=128&d=identicon&r=PG", "display_name": "nicolaskruchten", "link": "https://stackoverflow.com/users/112871/nicolaskruchten"}, "reply_to_user": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "edited": false, "score": 1, "creation_date": 1565804526, "post_id": 57402233, "comment_id": 101468664, "body": "@Austin if you want to break that out into its own question I\u2019d be happy to help you find an answer"}, {"owner": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "edited": false, "score": 0, "creation_date": 1565963978, "post_id": 57402233, "comment_id": 101518427, "body": "Sure, thanks. Here&#39;s a new question: <a href=\"https://stackoverflow.com/questions/57525950/plotly-express-hovermode-with-arbitrary-column\" title=\"plotly express hovermode with arbitrary column\">stackoverflow.com/questions/57525950/&hellip;</a>"}], "tags": [], "owner": {"reputation": 21840, "user_id": 112871, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0c672b1a855701ccca00911a6fbf02e4?s=128&d=identicon&r=PG", "display_name": "nicolaskruchten", "link": "https://stackoverflow.com/users/112871/nicolaskruchten"}, "is_accepted": true, "score": 1, "last_activity_date": 1565211606, "creation_date": 1565211606, "answer_id": 57402233, "question_id": 57402050, "link": "https://stackoverflow.com/questions/57402050/plotly-express-hover-options/57402233#57402233", "title": "Plotly Express hover options", "body": "<p>1 and 2 are not possible yet.</p>\n\n<p>For 3 there is a <code>hovermode</code> attribute in <code>layout</code> that you can set to show one hover label per trace per y-value.</p>\n"}], "owner": {"reputation": 5295, "user_id": 2089899, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JJVOk.jpg?s=128&g=1", "display_name": "Austin", "link": "https://stackoverflow.com/users/2089899/austin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2154, "favorite_count": 1, "accepted_answer_id": 57402233, "answer_count": 1, "score": 3, "last_activity_date": 1565211606, "creation_date": 1565210533, "question_id": 57402050, "link": "https://stackoverflow.com/questions/57402050/plotly-express-hover-options", "title": "Plotly Express hover options", "body": "<p>In <code>plotly_express.line</code> the only options I see to modify hover settings are <code>hover_name</code> and <code>hover_data</code>. A few issues I'm facing with modifying hover are:</p>\n\n<ol>\n<li><p>It seems that even if I set <code>hover_data=None</code> it still shows the values for <code>name</code>,<code>x</code>, and <code>y</code>. How can I set it to <em>only</em> show the hover info I select without adding defaults?</p></li>\n<li><p>I can't find a setting to modify the opacity for hover boxes. I'm displaying a lot of hover info so my hover box is large, which makes it difficult to know where I am on the plot behind the box.</p></li>\n<li><p>How can I make it so hovering on one line displays hover info corresponding to a linked data column value on all other lines?</p></li>\n</ol>\n"}, {"tags": ["python", "r"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 10095248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eb46f300a11c417c0f134e294905069?s=128&d=identicon&r=PG&f=1", "display_name": "fargoboyDC", "link": "https://stackoverflow.com/users/10095248/fargoboydc"}, "edited": false, "score": 0, "creation_date": 1565212616, "post_id": 57402093, "comment_id": 101286301, "body": "thanks for the input! I am on Mac and ill look into using conda"}, {"owner": {"reputation": 55, "user_id": 10095248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eb46f300a11c417c0f134e294905069?s=128&d=identicon&r=PG&f=1", "display_name": "fargoboyDC", "link": "https://stackoverflow.com/users/10095248/fargoboydc"}, "edited": false, "score": 0, "creation_date": 1565213438, "post_id": 57402093, "comment_id": 101286568, "body": "conda environment was giving errors when trying to run through some python scripts. honestly I am trying to go through this tutorial here <a href=\"https://github.com/armbrustlab/popcycle/wiki/SeaFlow-data-analysis-tutorial\" rel=\"nofollow noreferrer\">github.com/armbrustlab/popcycle/wiki/&hellip;</a>. and i am struggling to do it correctly because in R I get errors about how seaflow cannot be used."}], "tags": [], "owner": {"reputation": 424, "user_id": 6616963, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CuoIKTcd_YE/AAAAAAAAAAI/AAAAAAAABH8/nrRetY0-w-s/photo.jpg?sz=128", "display_name": "Yatish Kadam", "link": "https://stackoverflow.com/users/6616963/yatish-kadam"}, "is_accepted": false, "score": 0, "last_activity_date": 1565210803, "creation_date": 1565210803, "answer_id": 57402093, "question_id": 57402037, "link": "https://stackoverflow.com/questions/57402037/how-can-i-change-the-python-path-being-used-in-r/57402093#57402093", "title": "How can I change the python path being used in R?", "body": "<p>If you are using it in a Linux platform. \nyou can add soft-links. That way it will point to a single source.</p>\n\n<p>Additionally i would recommend using a environment(eg.conda). that way it will always be localized to your project.</p>\n"}], "owner": {"reputation": 55, "user_id": 10095248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5eb46f300a11c417c0f134e294905069?s=128&d=identicon&r=PG&f=1", "display_name": "fargoboyDC", "link": "https://stackoverflow.com/users/10095248/fargoboydc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565212598, "creation_date": 1565210470, "last_edit_date": 1565212598, "question_id": 57402037, "link": "https://stackoverflow.com/questions/57402037/how-can-i-change-the-python-path-being-used-in-r", "title": "How can I change the python path being used in R?", "body": "<p>I am struggling to use python libraries in my R project. I think it is because I am installing the packages using the terminal in my project but the python path in the terminal doesn't match the path in my console. </p>\n\n<p>here is what I get when I run <code>which python</code> in terminal:</p>\n\n<pre><code>/Users/&lt;username&gt;/anaconda2/bin/python\n</code></pre>\n\n<p>here is what I get when I run <code>system(\"which python\")</code> in console:</p>\n\n<pre><code>/usr/bin/python\n</code></pre>\n\n<p>I tried writing <code>Sys.setenv(PATH=paste(\"/Users/&lt;username&gt;/anaconda2/bin/python\", Sys.getenv(\"PATH\"), sep=\":\"))</code> but that didn't change the path I got.</p>\n\n<p>How can I change the python path I use in my console so that it matches the one I'm using in my terminal?</p>\n\n<p>On Mac btw.</p>\n"}, {"tags": ["python", "text", "graph", "patch"], "comments": [{"owner": {"reputation": 2356, "user_id": 2711535, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/deb303bc03966e2e71931b5410ad81cd?s=128&d=identicon&r=PG&f=1", "display_name": "mauve", "link": "https://stackoverflow.com/users/2711535/mauve"}, "edited": false, "score": 0, "creation_date": 1565210992, "post_id": 57401994, "comment_id": 101285789, "body": "you need to look into plt.text() - you can set the x and y parameters to locate the text."}, {"owner": {"reputation": 27334, "user_id": 7758804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBA7j.jpg?s=128&g=1", "display_name": "Trenton McKinney", "link": "https://stackoverflow.com/users/7758804/trenton-mckinney"}, "edited": false, "score": 0, "creation_date": 1565212484, "post_id": 57401994, "comment_id": 101286250, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/36162414/bold-annotated-text-in-matplotlib\">bold annotated text in matplotlib</a>"}], "owner": {"reputation": 1, "user_id": 11897709, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hg5tGUx0GFc/AAAAAAAAAAI/AAAAAAAAAJc/qlTnRWZib3A/photo.jpg?sz=128", "display_name": "Brisco Wood", "link": "https://stackoverflow.com/users/11897709/brisco-wood"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1565210214, "creation_date": 1565210214, "question_id": 57401994, "link": "https://stackoverflow.com/questions/57401994/how-would-i-add-text-to-this-matplotlib-graph", "title": "How would I add text to this matplotlib graph?", "body": "<p>I have the following code and graph and am wondering how I could add some text to it. On each bar I would like the min (where it begins) and the max (where it ends) displayed just inside the boxes and I would also like to place the average of each data set where it falls inside the box. The code is what I already have and the link goes to an example of what the final product should look similar too.</p>\n\n<pre><code>    import matplotlib.pyplot as plt\n    import matplotlib.patches as patches\n\n    preRawData = [60,55,67,68,70,71]\n    postRawData = [71,75,80,77,73,74]\n\n    dataDict = {}\n    delta = 0.4\n\n    minPre = min(preRawData)\n    minPost = min(postRawData)\n    maxPre = max(preRawData)\n    maxPost = max(postRawData)\n    preAverage = sum(preRawData)/len(preRawData)\n    postAverage = sum(postRawData)/len(postRawData)\n\n    preRange = (minPre, maxPre)\n    postRange = (minPost, maxPost)\n\n    dataDict.update({'Pre' : preRange})\n    dataDict.update({'Post' : postRange})\n\n    yspan = len(dataDict)\n    yplaces = [.5+i for i in range(yspan)]\n    ylabels = sorted(dataDict.keys())\n\n    fig = plt.figure()\n    ax = fig.add_subplot(111)\n    ax.set_yticks(yplaces)\n    ax.set_yticklabels(ylabels)\n    ax.set_ylim((0,yspan))\n\n    preStart, preEnd = dataDict['Pre']\n    postStart, postEnd = dataDict['Post']\n\n    low, hi = dataDict[ylabels[0]]\n\n    ax.add_patch(patches.Rectangle((postStart,yplaces[0]- \n    delta/2.0),postEnd-postStart,delta, edgecolor='black', \n    facecolor='red'))\n    if postStart&lt;low : low=postStart\n    if postEnd&gt;hi : hi=postEnd\n\n    ax.add_patch(patches.Rectangle((preStart,yplaces[1]- \n    delta/2.0),preEnd-preStart,delta, edgecolor='black', \n    facecolor='green'))\n    if preStart&lt;low : low=preStart\n    if preEnd&gt;hi : hi=preEnd\n\n    ax.plot((low,hi),(0,0))\n\n    xmin, xmax = ax.get_xlim()\n    ax.hlines(range(1, yspan),xmin,xmax)\n    ax.grid(axis='x')\n\n    plt.show()\n</code></pre>\n\n<p><a href=\"https://imgur.com/a/uBSVydh\" rel=\"nofollow noreferrer\">https://imgur.com/a/uBSVydh</a></p>\n"}, {"tags": ["python", "json", "python-3.x"], "comments": [{"owner": {"reputation": 38676, "user_id": 227884, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/L7EG1.png?s=128&g=1", "display_name": "UltraInstinct", "link": "https://stackoverflow.com/users/227884/ultrainstinct"}, "edited": false, "score": 0, "creation_date": 1565210291, "post_id": 57401962, "comment_id": 101285546, "body": "Because <code>&quot;performance&quot;</code> is an array, not an object. You&#39;d want to use something like: <code>item[&quot;performance&quot;][0][&quot;headliner&quot;]</code> for the headliner within the first object. Or else roll out another loop there and use it instead of <code>[0]</code>."}, {"owner": {"reputation": 1660, "user_id": 5501407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cz29B.jpg?s=128&g=1", "display_name": "R4444", "link": "https://stackoverflow.com/users/5501407/r4444"}, "edited": false, "score": 0, "creation_date": 1565210319, "post_id": 57401962, "comment_id": 101285556, "body": "notice, the json is malformed"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9406886"}, "edited": false, "score": 0, "creation_date": 1565211652, "post_id": 57401962, "comment_id": 101286016, "body": "thanks for the tips ! it works !"}], "answers": [{"tags": [], "owner": {"reputation": 1660, "user_id": 5501407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Cz29B.jpg?s=128&g=1", "display_name": "R4444", "link": "https://stackoverflow.com/users/5501407/r4444"}, "is_accepted": true, "score": 1, "last_activity_date": 1565210447, "creation_date": 1565210447, "answer_id": 57402033, "question_id": 57401962, "link": "https://stackoverflow.com/questions/57401962/navigation-through-json-python/57402033#57402033", "title": "Navigation through json (python)", "body": "<p>Notice your <code>performance</code> key:</p>\n\n<pre><code>\"performance\":[  \n                  {  \n                     \"id\":73632729,\n                     \"headlinerName\":\"Top-Secret\",\n                  }\n               }\n            ],\n</code></pre>\n\n<p>The json you posted is malformed. Assuming the structure is like:</p>\n\n<pre><code>\"performance\":[  \n                      {  \n                         \"id\":73632729,\n                         \"headlinerName\":\"Top-Secret\",\n                      }\n\n              ],\n</code></pre>\n\n<p>You can do:</p>\n\n<pre><code>for i in item:\n    i[\"headlinerName\"]\n</code></pre>\n\n<p>or as @UltraInstinct suggested:</p>\n\n<blockquote>\n<pre><code>item[\"performance\"][0][\"headlinerName\"]\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 791, "user_id": 1532172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/74f854e6ae20716feee1d28df9633360?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/1532172/brian"}, "is_accepted": false, "score": 0, "last_activity_date": 1565210476, "creation_date": 1565210476, "answer_id": 57402038, "question_id": 57401962, "link": "https://stackoverflow.com/questions/57401962/navigation-through-json-python/57402038#57402038", "title": "Navigation through json (python)", "body": "<p>A few problems here. First, your JSON is incorrectly formatted. Your square brackets don't match up. Maybe you meant something like this? I am going to assume \"calendarEntry\" is a list here and everything else is an object. Usually lists are made plural, i.e. \"calendarEntries\".</p>\n\n<pre><code>{  \n   \"resultsPage\": {\n      \"results\": {  \n         \"calendarEntries\": [  \n            {\n              \"event\": {  \n                 \"id\": 38862824,\n                 \"artistName\": \"Raphael\"\n               },\n               \"performance\": {\n                  \"id\": 73632729,\n                  \"headlinerName\": \"Top-Secret\"\n               },\n               \"venue\": {  \n                  \"id\": 4285819,\n                  \"displayName\": \"Sacr\u00e9\"\n               }\n            }\n         ]\n      }\n   }\n}\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9406886"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 57402033, "answer_count": 2, "score": 2, "last_activity_date": 1601402505, "creation_date": 1565210017, "last_edit_date": 1601402505, "question_id": 57401962, "link": "https://stackoverflow.com/questions/57401962/navigation-through-json-python", "title": "Navigation through json (python)", "body": "<p>I'm trying to navigation through a json file but cannot parse properly the 'headliner' node.</p>\n\n<p>Here is my JSON file : </p>\n\n<pre><code>{  \n   \"resultsPage\":{  \n      \"results\":{  \n         \"calendarEntry\":[  \n            {\n              \"event\":{  \n                 \"id\":38862824,\n                 \"artistName\":\"Raphael\",\n               },\n               \"performance\":[  \n                  {  \n                     \"id\":73632729,\n                     \"headlinerName\":\"Top-Secret\",\n                  }\n               }\n            ],\n            \"venue\":{  \n               \"id\":4285819,\n               \"displayName\":\"Sacr\u00e9\"\n            }\n         }\n      }\n   }\n</code></pre>\n\n<p>Here is what I my trying to do : </p>\n\n<pre><code>for item in data [\"resultsPage\"][\"results\"][\"calendarEntry\"]:\n    artistname = item[\"event\"][\"artistName\"]\n    headliner = item[\"performance\"][\"headlinerName\"]\n</code></pre>\n\n<p>I don't understand why it's working for the 'artistName' but it's not working for 'headlinerName'. Thanks for your help and your explanation.</p>\n"}, {"tags": ["python", "tensorflow", "tensorflow-estimator"], "comments": [{"owner": {"reputation": 646, "user_id": 4935621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b958a3597d92affcdcc6fd2e95142eb3?s=128&d=identicon&r=PG&f=1", "display_name": "alexey", "link": "https://stackoverflow.com/users/4935621/alexey"}, "edited": false, "score": 0, "creation_date": 1565210891, "post_id": 57401924, "comment_id": 101285760, "body": "have you tried <code>tf.metrics.mean_tensor</code> during evaluation inside <code>model_fn</code>?"}, {"owner": {"reputation": 91, "user_id": 3581829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d72de8b8f4615b5e0a37bd3b6ef41e?s=128&d=identicon&r=PG", "display_name": "sdll", "link": "https://stackoverflow.com/users/3581829/sdll"}, "reply_to_user": {"reputation": 646, "user_id": 4935621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b958a3597d92affcdcc6fd2e95142eb3?s=128&d=identicon&r=PG&f=1", "display_name": "alexey", "link": "https://stackoverflow.com/users/4935621/alexey"}, "edited": false, "score": 0, "creation_date": 1565211972, "post_id": 57401924, "comment_id": 101286109, "body": "@alexey, I <a href=\"https://github.com/sdll/psenet/blob/6bf02235a5f8bc7b09845c12ae0d0c9078ac0159/psenet/train.py#L195\" rel=\"nofollow noreferrer\">convert</a> a <code>tf.keras</code> model to the estimator, and then add the metrics with <code>tf.contrib.estimator.add_metrics</code>. The custom metrics <a href=\"https://github.com/sdll/psenet/blob/6bf02235a5f8bc7b09845c12ae0d0c9078ac0159/psenet/utils/metrics.py#L218\" rel=\"nofollow noreferrer\">do use</a> <code>tf.metrics.mean</code> under the hood, but I am not sure whether this guarantees that they persist over evaluation steps. Could you please expand on your suggestion?"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 3581829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d72de8b8f4615b5e0a37bd3b6ef41e?s=128&d=identicon&r=PG", "display_name": "sdll", "link": "https://stackoverflow.com/users/3581829/sdll"}, "edited": false, "score": 0, "creation_date": 1565261591, "post_id": 57402442, "comment_id": 101301961, "body": "Thanks, but I do not see how this answers my question, sorry if the wording is confusing. All of the metrics I have implemented use the same confusion matrix under the hood. However, at the moment I create an object with a confusion matrix for each of them instead. It would be nice to create the variable once and use it for each evaluation step, updating it once after inference and then basing the computation of the custom metrics on its value. As you can see in the code <a href=\"https://git.io/fjQp1\" rel=\"nofollow noreferrer\">here</a> and <a href=\"https://git.io/fjQpM\" rel=\"nofollow noreferrer\">here</a>, adding the metrics is not the issue."}, {"owner": {"reputation": 646, "user_id": 4935621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b958a3597d92affcdcc6fd2e95142eb3?s=128&d=identicon&r=PG&f=1", "display_name": "alexey", "link": "https://stackoverflow.com/users/4935621/alexey"}, "reply_to_user": {"reputation": 91, "user_id": 3581829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d72de8b8f4615b5e0a37bd3b6ef41e?s=128&d=identicon&r=PG", "display_name": "sdll", "link": "https://stackoverflow.com/users/3581829/sdll"}, "edited": false, "score": 0, "creation_date": 1565268650, "post_id": 57402442, "comment_id": 101306042, "body": "<code>update_op</code> is actually executed in every evaluation step and modifies <code>mean</code> tensor so it seems like what you need. If you need to calculate different metrics you can do in inside <code>confusion_matrix</code> and include in the returned dictionary"}, {"owner": {"reputation": 91, "user_id": 3581829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d72de8b8f4615b5e0a37bd3b6ef41e?s=128&d=identicon&r=PG", "display_name": "sdll", "link": "https://stackoverflow.com/users/3581829/sdll"}, "edited": false, "score": 0, "creation_date": 1565271141, "post_id": 57402442, "comment_id": 101307754, "body": "Not sure that I can include them in the returned dictionary, however, because the values of the dictionary must include the update ops. Are you saying that I need  to operate on <code>mean</code> from <code>mean, update_op = tf.metrics.mean_tensor(matrix)</code>, and then wrap the results in <code>mean_tensor</code> as well?"}, {"owner": {"reputation": 646, "user_id": 4935621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b958a3597d92affcdcc6fd2e95142eb3?s=128&d=identicon&r=PG&f=1", "display_name": "alexey", "link": "https://stackoverflow.com/users/4935621/alexey"}, "reply_to_user": {"reputation": 91, "user_id": 3581829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d72de8b8f4615b5e0a37bd3b6ef41e?s=128&d=identicon&r=PG", "display_name": "sdll", "link": "https://stackoverflow.com/users/3581829/sdll"}, "edited": false, "score": 0, "creation_date": 1565279123, "post_id": 57402442, "comment_id": 101312560, "body": "Yeah, <code>mean</code> from <code>mean, update_op = tf.metrics.mean_tensor(matrix)</code>.  I think you can reuse <code>update_op</code> from <code>mean_tensor</code>. This ops modify <code>sum</code> and <code>count</code> tensors that are required for mean computation."}, {"owner": {"reputation": 5106, "user_id": 13465258, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af312ebdf3daf22a61af97062eccf2d9?s=128&d=identicon&r=PG&f=1", "display_name": "Tensorflow Warrior", "link": "https://stackoverflow.com/users/13465258/tensorflow-warrior"}, "reply_to_user": {"reputation": 91, "user_id": 3581829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d72de8b8f4615b5e0a37bd3b6ef41e?s=128&d=identicon&r=PG", "display_name": "sdll", "link": "https://stackoverflow.com/users/3581829/sdll"}, "edited": false, "score": 0, "creation_date": 1589890899, "post_id": 57402442, "comment_id": 109467081, "body": "@sdll, Can you please confirm if your issue is resolved? If so, can you please specify the Answer here for the benefit of the community. Thanks!"}], "tags": [], "owner": {"reputation": 646, "user_id": 4935621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b958a3597d92affcdcc6fd2e95142eb3?s=128&d=identicon&r=PG&f=1", "display_name": "alexey", "link": "https://stackoverflow.com/users/4935621/alexey"}, "is_accepted": true, "score": 0, "last_activity_date": 1565212828, "creation_date": 1565212828, "answer_id": 57402442, "question_id": 57401924, "link": "https://stackoverflow.com/questions/57401924/how-to-create-a-variable-that-persists-over-tf-estimator-train-and-evaluate-eval/57402442#57402442", "title": "How to create a variable that persists over tf.estimator.train_and_evaluate evaluation steps?", "body": "<p>You can define a custom metric: </p>\n\n<pre><code>def confusion_matrix(labels, predictions):\n    matrix = ... # confusion matrix calculation\n    mean, update_op = tf.metrics.mean_tensor(matrix)\n    # do something with mean if needed\n    return {'confusion_matrix': (mean, udpate_op)}\n</code></pre>\n\n<p>and then add it to your <code>estimator</code>: </p>\n\n<pre><code>estimator = tf.estimator.add_metrics(estimator, confusion_matrix)\n</code></pre>\n\n<p>if you need sum instead of meen you can take insight from <code>tf.metrics.mean_tensor</code> implementation</p>\n"}], "owner": {"reputation": 91, "user_id": 3581829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85d72de8b8f4615b5e0a37bd3b6ef41e?s=128&d=identicon&r=PG", "display_name": "sdll", "link": "https://stackoverflow.com/users/3581829/sdll"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 1, "accepted_answer_id": 57402442, "answer_count": 1, "score": 1, "last_activity_date": 1565261923, "creation_date": 1565209833, "last_edit_date": 1565261923, "question_id": 57401924, "link": "https://stackoverflow.com/questions/57401924/how-to-create-a-variable-that-persists-over-tf-estimator-train-and-evaluate-eval", "title": "How to create a variable that persists over tf.estimator.train_and_evaluate evaluation steps?", "body": "<p><strong>TLDR: How to create a variable that holds the confusion matrix used for computing custom metrics, accumulating the values across all of the evaluation steps?</strong></p>\n\n<p>I <a href=\"https://github.com/sdll/psenet/blob/6bf02235a5f8bc7b09845c12ae0d0c9078ac0159/psenet/utils/metrics.py#L198\" rel=\"nofollow noreferrer\">have implemented</a> custom metrics to use in the <code>tf.estimator.train_and_evaluation</code> pipeline, with a confusion matrix as the crux for them all. My goal is to make this confusion matrix persist over multiple evaluation steps in order to track the learning progress.</p>\n\n<p>Using <code>get_variable</code> in the variable scope did not work, since it does not save the variable to the checkpoint (or so it seems).</p>\n\n<p>This does not work:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    @property\n    def confusion_matrix(self):\n        with tf.variable_scope(\n            f\"{self.name}-{self.metric_type}\", reuse=tf.AUTO_REUSE\n        ):\n            confusion_matrix = tf.get_variable(\n                name=\"confusion-matrix\",\n                initializer=tf.zeros(\n                    [self.n_classes, self.n_classes],\n                    dtype=tf.float32,\n                    name=f\"{self.name}/{self.metric_type}-confusion-matrix\",\n                ),\n                aggregation=tf.VariableAggregation.SUM,\n            )\n        return confusion_matrix\n</code></pre>\n\n<p>Just saving the matrix as a class attribute works, but it obviously does not persist over multple steps:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>        self.confusion_matrix = tf.zeros(\n            [self.n_classes, self.n_classes],\n            dtype=tf.float32,\n            name=f\"{self.name}/{self.metric_type}-confusion-matrix\",\n        )\n</code></pre>\n\n<p>You can look at the full example <a href=\"https://github.com/sdll/psenet/blob/6bf02235a5f8bc7b09845c12ae0d0c9078ac0159/psenet/utils/metrics.py#L52\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>I expect to have this confusion matrix persist from end to finish during evaluation, but I do not need to have it in the final SavedModel. Could you please tell me how I can achieve this? Do I need to just save the matrix to an external file, or there is a better way?</p>\n"}, {"tags": ["python", "python-3.x", "authentication", "minecraft", "launcher"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5249120, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iaN8AMR_3Hk/AAAAAAAAAAI/AAAAAAAAAPk/cAavtB-ivyw/photo.jpg?sz=128", "display_name": "Sam Carson", "link": "https://stackoverflow.com/users/5249120/sam-carson"}, "edited": false, "score": 0, "creation_date": 1565284938, "post_id": 57410252, "comment_id": 101315251, "body": "You&#39;ve linked what I also linked to in the question. It&#39;s an outdated system. I&#39;ve discovered that I can download the natives, game and the command-line arguments from <a href=\"https://launchermeta.mojang.com/v1/packages/132979c36455cc1e17e5f9cc767b4e13c6947033/1.14.4.json\" rel=\"nofollow noreferrer\">this page</a> and I&#39;ve just managed to get the natives system working."}], "tags": [], "owner": {"reputation": 76, "user_id": 11891566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f83fc82c51b401c421adab82fd6bc39b?s=128&d=identicon&r=PG&f=1", "display_name": "KmcASI", "link": "https://stackoverflow.com/users/11891566/kmcasi"}, "is_accepted": false, "score": 0, "last_activity_date": 1565259311, "creation_date": 1565259311, "answer_id": 57410252, "question_id": 57401877, "link": "https://stackoverflow.com/questions/57401877/generate-os-specific-command-to-run-minecraft-1-14-in-python/57410252#57410252", "title": "Generate OS-specific command to run Minecraft 1.14 in Python", "body": "<p>Is not so easy <a href=\"https://stackoverflow.com/questions/14617990/launch-minecraft-from-the-command-line-python-c\"> as you think</a> :))<br><br>\nYou try to make a custom launcher, but minecraft is <b>Java</b> (and bedrock edition is <b>C++</b>) so you need to have a little knowledge and from thins programming language.<br>\nFor java you need to know how to work with files from <b>.jar</b> (what are just some archives)...<br><br>\nIs <b>not impossible</b> but still <b>not easy</b>.</p>\n"}], "owner": {"reputation": 1, "user_id": 5249120, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-iaN8AMR_3Hk/AAAAAAAAAAI/AAAAAAAAAPk/cAavtB-ivyw/photo.jpg?sz=128", "display_name": "Sam Carson", "link": "https://stackoverflow.com/users/5249120/sam-carson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 164, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574770346, "creation_date": 1565209635, "last_edit_date": 1565428972, "question_id": 57401877, "link": "https://stackoverflow.com/questions/57401877/generate-os-specific-command-to-run-minecraft-1-14-in-python", "title": "Generate OS-specific command to run Minecraft 1.14 in Python", "body": "<p><strong>Hey guys, I'm working on a flexible Minecraft launcher in Python.</strong></p>\n\n<p>I have the code for the authentication all sorted out <a href=\"https://github.com/samcarsonx/yggdrasil-py\" rel=\"nofollow noreferrer\">here</a> to get things like the access token to log into the game and all the other necessary bits for a launcher, apart from the most important bit; I haven't got a method to actually start the game.</p>\n\n<p>This isn't a duplicate of <a href=\"https://stackoverflow.com/questions/14531917/launch-minecraft-from-command-line-username-and-password-as-prefix\">this</a> or <a href=\"https://stackoverflow.com/questions/14617990/launch-minecraft-from-the-command-line-python-c/\">this</a>, as they are for the old launcher and system. It could be classed as a duplicate for <a href=\"https://stackoverflow.com/questions/38449569/how-do-i-generate-the-minecraft-launch-command-for-versions-1-8-in-python\">this</a>, but that hasn't been answered for a long time.</p>\n\n<p>Basically what I'm asking is, does anybody know how I can start Minecraft from a specific version such as 1.14.4? I'm making this on macOS Mojave but most of my friends who will use it are on Windows 10 so I'll need a method that can work on Windows, macOS and Linux if possible.</p>\n\n<p><em>Thanks for any help! -Sam</em></p>\n\n<p>Edit: I have it done for the most-part, yet when I start the game I get <code>Error: Unable to initialize main class net.minecraft.client.main.Main\nCaused by: java.lang.NoClassDefFoundError: joptsimple/OptionSpec</code></p>\n"}, {"tags": ["python", "pandas", "dataframe"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 3, "creation_date": 1565209844, "post_id": 57401874, "comment_id": 101285344, "body": "Because <i>you are returning a series</i>: <code>return data[&#39;AGE_LOW_NBR&#39;] + &quot; + &quot; + data[&#39;AGE_UNIT_DISP&#39;]</code> that&#39;s a series..."}, {"owner": {"reputation": 2507, "user_id": 2741091, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2f5b0db70a69308bba55f416f78f9fc9?s=128&d=identicon&r=PG", "display_name": "ifly6", "link": "https://stackoverflow.com/users/2741091/ifly6"}, "edited": false, "score": 2, "creation_date": 1565210258, "post_id": 57401874, "comment_id": 101285531, "body": "You should be doing this, if you really want to do it with apply, by applying across the whole dataframe with <code>axis=1</code>. Perhaps consider just concatenating across by element using the series syntax?"}, {"owner": {"reputation": 13, "user_id": 4388679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d03a77dc73ecf608f803af61a7220ad?s=128&d=identicon&r=PG&f=1", "display_name": "keith_o", "link": "https://stackoverflow.com/users/4388679/keith-o"}, "edited": false, "score": 0, "creation_date": 1565285846, "post_id": 57401874, "comment_id": 101315653, "body": "Thanks for the quick replies!  Again, first question, so I should have mentioned that I did try <code>data[&#39;age_op_test&#39;] = data[&#39;AGE_OPERATOR_TXT&#39;].apply(multum_age_ops, axis=1)</code> but it returns an &quot;unexpected argument&quot; error."}, {"owner": {"reputation": 13, "user_id": 4388679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d03a77dc73ecf608f803af61a7220ad?s=128&d=identicon&r=PG&f=1", "display_name": "keith_o", "link": "https://stackoverflow.com/users/4388679/keith-o"}, "edited": false, "score": 0, "creation_date": 1565287014, "post_id": 57401874, "comment_id": 101316125, "body": "My final workaround (not very Pythonic) was to create the first column based on sinanggul&#39;s suggestion, then create a second that evaluates and instead of returning 0 in the <code>else</code> clause, returns the first column. Then a third that evaluates as above and returns the second column in the <code>else</code> clause."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4388679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d03a77dc73ecf608f803af61a7220ad?s=128&d=identicon&r=PG&f=1", "display_name": "keith_o", "link": "https://stackoverflow.com/users/4388679/keith-o"}, "edited": false, "score": 0, "creation_date": 1565286075, "post_id": 57402278, "comment_id": 101315742, "body": "This worked perfectly - now I need to extend it to include two more &quot;elif&quot; clauses.  Thanks for the help!!"}], "tags": [], "owner": {"reputation": 129, "user_id": 6272111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c015276aa74529a240ffc884ba3c9448?s=128&d=identicon&r=PG&f=1", "display_name": "sinanggul", "link": "https://stackoverflow.com/users/6272111/sinanggul"}, "is_accepted": true, "score": 1, "last_activity_date": 1565211997, "creation_date": 1565211997, "answer_id": 57402278, "question_id": 57401874, "link": "https://stackoverflow.com/questions/57401874/python-apply-function-returning-entire-column-of-rows-in-one-column/57402278#57402278", "title": "Python - .apply() function returning entire column of rows in one column", "body": "<p>As mentioned in <a href=\"https://stackoverflow.com/users/2741091/ifly6\">ifly</a>'s comment, the key is to use <code>apply</code> on the entire dataframe over <code>axis=1</code> so that the function/lambda gets applied to each row.  In your case, that would look like this:</p>\n\n<pre><code>data['age_op_test'] = data.apply(lambda row: row['AGE_LOW_NBR'] + \" + \" + row['AGE_UNIT_DISP'] if row['AGE_OPERATOR_TXT'] == \"&lt;\" else \"0\", axis=1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 731, "user_id": 10754505, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ieBB_4KUajY/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jGsPiBx7yiJj8dR1P7N2efhC3zvw/mo/photo.jpg?sz=128", "display_name": "Benoit Drogou", "link": "https://stackoverflow.com/users/10754505/benoit-drogou"}, "is_accepted": false, "score": 0, "last_activity_date": 1565212516, "creation_date": 1565212516, "answer_id": 57402386, "question_id": 57401874, "link": "https://stackoverflow.com/questions/57401874/python-apply-function-returning-entire-column-of-rows-in-one-column/57402386#57402386", "title": "Python - .apply() function returning entire column of rows in one column", "body": "<p>Can you try to do something like this :</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\ndf.loc[df['AGE_OPERATOR_TXT']=='&lt;', \"age_op_test\"] = df[\"AGE_LOW_NBR\"].astype(str).str.cat(df[\"AGE_UNIT_DISP\"].astype(str), sep=\" + \")\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2507, "user_id": 2741091, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2f5b0db70a69308bba55f416f78f9fc9?s=128&d=identicon&r=PG", "display_name": "ifly6", "link": "https://stackoverflow.com/users/2741091/ifly6"}, "edited": false, "score": 0, "creation_date": 1565219031, "post_id": 57403065, "comment_id": 101287979, "body": "There&#39;s no <code>pd</code> prefix before <code>np</code>"}, {"owner": {"reputation": 87, "user_id": 11477736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c887e9f6951a89231239b33207dffea?s=128&d=identicon&r=PG&f=1", "display_name": "lvzxy", "link": "https://stackoverflow.com/users/11477736/lvzxy"}, "reply_to_user": {"reputation": 2507, "user_id": 2741091, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2f5b0db70a69308bba55f416f78f9fc9?s=128&d=identicon&r=PG", "display_name": "ifly6", "link": "https://stackoverflow.com/users/2741091/ifly6"}, "edited": false, "score": 0, "creation_date": 1565219725, "post_id": 57403065, "comment_id": 101288088, "body": "You are correct @ifly6, thank you. Answer was edited to reflect change."}], "tags": [], "owner": {"reputation": 87, "user_id": 11477736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c887e9f6951a89231239b33207dffea?s=128&d=identicon&r=PG&f=1", "display_name": "lvzxy", "link": "https://stackoverflow.com/users/11477736/lvzxy"}, "is_accepted": false, "score": 1, "last_activity_date": 1565219657, "last_edit_date": 1565219657, "creation_date": 1565217358, "answer_id": 57403065, "question_id": 57401874, "link": "https://stackoverflow.com/questions/57401874/python-apply-function-returning-entire-column-of-rows-in-one-column/57403065#57403065", "title": "Python - .apply() function returning entire column of rows in one column", "body": "<p>You can also use <code>np.where</code> (<a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.where.html\" rel=\"nofollow noreferrer\">doc</a>):</p>\n\n<pre><code>data['age_op_test'] = np.where(data['AGE_OPERATOR_TXT'] == \"&lt;\", data['AGE_LOW_NBR'] + \" + \" + data['AGE_UNIT_DISP'],0)\n</code></pre>\n\n<p>What <code>np.where</code> does in this case is returns \"0\" if <code>data['AGE_OPERATOR_TXT'] == \"&lt;\"</code> is <code>False</code>. If <code>True</code>, it returns <code>data['AGE_LOW_NBR'] + \" + \" + data['AGE_UNIT_DISP']</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 4388679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d03a77dc73ecf608f803af61a7220ad?s=128&d=identicon&r=PG&f=1", "display_name": "keith_o", "link": "https://stackoverflow.com/users/4388679/keith-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 57402278, "answer_count": 3, "score": 0, "last_activity_date": 1565219657, "creation_date": 1565209620, "question_id": 57401874, "link": "https://stackoverflow.com/questions/57401874/python-apply-function-returning-entire-column-of-rows-in-one-column", "title": "Python - .apply() function returning entire column of rows in one column", "body": "<p>First time posting; apologies for formatting errors.  I have a data set that contains age ranges in separate columns, and I'm trying to create a new column based on a string evaluation of the AGE_OPERATOR_TXT column:</p>\n\n<p>I've tried using .apply() functions, lambda, for loops with iterrows(), etc... but either I can't get anything to return, or the function returns a series with ALL of the rows: </p>\n\n<pre><code>def multum_age_ops(s):\n    if s == \"&lt;\":\n        return data['AGE_LOW_NBR'] + \" + \" + data['AGE_UNIT_DISP']\nelse:\n    return 0\n\ndata['age_op_test'] = data['AGE_OPERATOR_TXT'].apply(multum_age_ops)\n</code></pre>\n\n<p>I would expect that the column returned would actually look something like: </p>\n\n<pre><code>age_ops_test\n0 0\n1 18 + years\n2 1 + months\n3 4 + months\n4 4 + months\n</code></pre>\n\n<p>What I'm getting is:</p>\n\n<pre><code>age_ops_test\n0                                                        0\n1        0        18\\n1        18\\n2         1\\n3      ...\n2        0        18\\n1        18\\n2         1\\n3      ...\n3        0        18\\n1        18\\n2         1\\n3      ...\n4        0        18\\n1        18\\n2         1\\n3      ...\n5        0        18\\n1        18\\n2         1\\n3      ...\n6        0        18\\n1        18\\n2         1\\n3      ...\n</code></pre>\n\n<p>Any help is appreciated. </p>\n"}, {"tags": ["python", "python-3.x", "exception"], "comments": [{"owner": {"reputation": 463, "user_id": 9758284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wuapn.jpg?s=128&g=1", "display_name": "Tino", "link": "https://stackoverflow.com/users/9758284/tino"}, "edited": false, "score": 0, "creation_date": 1565209918, "post_id": 57401861, "comment_id": 101285385, "body": "Hi! What if your exception conditions will change?  &quot;In this handler class I&#39;d like all ValueError and NotImplementedError handled the same way&quot; What if some day you&#39;ll want to threat those errors differently? This can cause problems, if you&#39;ll have lots code based on this logic."}, {"owner": {"reputation": 335, "user_id": 10247482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bae12ba8d48079297d49c2af21610b3?s=128&d=identicon&r=PG", "display_name": "CL40", "link": "https://stackoverflow.com/users/10247482/cl40"}, "reply_to_user": {"reputation": 463, "user_id": 9758284, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Wuapn.jpg?s=128&g=1", "display_name": "Tino", "link": "https://stackoverflow.com/users/9758284/tino"}, "edited": false, "score": 0, "creation_date": 1565213994, "post_id": 57401861, "comment_id": 101286745, "body": "@Tino in this case I would think a modification to a singular handler would make changing the logic around these cases simpler - especially since the logic is based around a subclass."}], "answers": [{"tags": [], "owner": {"reputation": 4720, "user_id": 11161432, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4cKoHz-Lo7M/AAAAAAAAAAI/AAAAAAAAED0/rHw3utFgrqc/photo.jpg?sz=128", "display_name": "jfaccioni", "link": "https://stackoverflow.com/users/11161432/jfaccioni"}, "is_accepted": true, "score": 3, "last_activity_date": 1565213732, "last_edit_date": 1565213732, "creation_date": 1565213189, "answer_id": 57402484, "question_id": 57401861, "link": "https://stackoverflow.com/questions/57401861/class-wide-exception-handler/57402484#57402484", "title": "Class-wide exception handler", "body": "<p>Modifying functions without altering their core functionality is exactly what decorators are for. Take a look at this example and try running it:</p>\n\n<pre><code>def catch_exception(func):\n    def wrapped(self, *args, **kwargs):\n        try:\n            return func(self, *args, **kwargs)\n        except ValueError:\n            self.value_error_handler()\n        except NotImplementedError:\n            self.ni_error_handler()\n    return wrapped\n\nclass Handler:\n    def value_error_handler(self):\n        print(\"found value error\")\n\n    def ni_error_handler(self):\n        print(\"found not implemented error\")\n\n    @catch_exception\n    def value_error_raiser(self):\n        raise ValueError\n\n    @catch_exception\n    def ni_error_raiser(self):\n        raise NotImplementedError\n\nh = Handler()\nh.value_error_raiser()\nh.ni_error_raiser()\n</code></pre>\n\n<p>Because of the <code>@catch_exception</code> decorator, the decorated methods do not raise the errors shown when caled; instead, they call the respective method defined inside <code>wrapped</code>'s try/except block, printing a message.</p>\n\n<p>While this is not exactly what you asked for, I believe this solution is more manageable overall. You can both choose exactly what methods should raise exceptions regularly and which should be handled by <code>catch_exception</code> (by deciding which methods are decorated), and add future behaviour for other exception types by writing an extra <code>except</code> block inside <code>wrapped</code> and adding the respective method to the <code>Handler</code> class.</p>\n\n<p>Note that this is not a \"clean\" solution, since <code>wrapped</code> expects to know that <code>self</code> is an instance of <code>Handler</code>, seeing as it calls a bunch of its methods, even though it is a function outside the <code>Handler</code> class... But hey, that's Python's duck typing for you :-P</p>\n"}], "owner": {"reputation": 335, "user_id": 10247482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bae12ba8d48079297d49c2af21610b3?s=128&d=identicon&r=PG", "display_name": "CL40", "link": "https://stackoverflow.com/users/10247482/cl40"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 1, "accepted_answer_id": 57402484, "answer_count": 1, "score": 1, "last_activity_date": 1565213732, "creation_date": 1565209550, "question_id": 57401861, "link": "https://stackoverflow.com/questions/57401861/class-wide-exception-handler", "title": "Class-wide exception handler", "body": "<p>I would like to implement a way to globally handle exceptions in a class coming through my application rather than handle them at the call site because it will cause a lot of duplicate code. </p>\n\n<p>For example's sake say I have a class like so:</p>\n\n<pre><code>class handler():\n    def throws_value_error(self):\n        raise ValueError\n\n    def throws_not_implemented_error(self):\n        raise NotImplementedError\n\n    # ... Imagine there are hundreds of these\n</code></pre>\n\n<p>In this handler class I'd like all <code>ValueError</code> and <code>NotImplementedError</code> handled the same way - a message saying <code>[ERROR]: ...</code> where <code>...</code> is the details from the particular instance.</p>\n\n<p>Instead of reproducing a TON of:</p>\n\n<pre><code>try:\n    #...\nexcept Exception as e:\n    # Catch the instances of the exception and handle them\n    # in more-or-less the same way here\n</code></pre>\n\n<p>I'd like to have a single method implementable on the class that takes care of this in general:</p>\n\n<pre><code>def exception_watcher(self):\n    # Big if...elif...else for handling these types of exceptions\n</code></pre>\n\n<p>Then, this method would be invoked when any <code>Exception</code> inside the class is given.</p>\n\n<p>My motivation is to use this to implement a generic sort of controller interface where a controller method could throw a subclass of an exception (for example - <code>BadRequestException</code> which is subclassed from <code>Error400Exception</code>). From there, the handler could dispatch a method to properly configure a response with an error code tailored to the type of exception, and additionally return a useful reply to the consumer.</p>\n\n<p>Obviously this is doable without this dispatcher - but this way certainly saves a ton of duplicated code (and therefore bugs). </p>\n\n<p>I've done a lot of digging around the internet and I haven't found anything. Admittedly I am borrowing this pattern from the Spring Boot Framework. I will also accept this being non-pythonic as an answer (as long as you can tell me how to do it right!)</p>\n\n<p>Any help would be appreciated - thank you!</p>\n"}, {"tags": ["python", "django", "python-3.x"], "comments": [{"owner": {"reputation": 1475, "user_id": 7474744, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2e530f816ed5c411e76e0e55419966e0?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/7474744/joe"}, "edited": false, "score": 2, "creation_date": 1565209667, "post_id": 57401856, "comment_id": 101285270, "body": "When you call a function without the <code>()</code> like that the function is not actually executed. Simplest way to think of it, is as a function that will be called later. You can test this in a script by assigning a function to a variable without the <code>()</code>.   As for the <code>request</code> that is passed in by the server. i.e. <code>get</code> request or <code>post</code> request"}], "answers": [{"tags": [], "owner": {"reputation": 314794, "user_id": 67579, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/BJXub.png?s=128&g=1", "display_name": "Willem Van Onsem", "link": "https://stackoverflow.com/users/67579/willem-van-onsem"}, "is_accepted": true, "score": 4, "last_activity_date": 1565209678, "creation_date": 1565209678, "answer_id": 57401888, "question_id": 57401856, "link": "https://stackoverflow.com/questions/57401856/defining-views-and-urls-in-django-why-arent-parenthesis-used-to-call-the-funct/57401888#57401888", "title": "Defining views and urls in Django. Why aren&#39;t parenthesis used to call the function?", "body": "<p>Because if you <em>call</em> the function, you will call the function when you load the file, and this will then produce a <code>TypeError</code>, since there is a missing parameter (<code>request</code>).</p>\n\n<p>You here do not <em>call</em> the <code>index</code> view, you <em>pass a reference</em> to that view. That means that Django stores a reference to the function, and when a request is made, it will call the function.</p>\n\n<p>In Python, just like many other languages, functions are \"first class citizens\". You can pass these as parameters, return these as results, etc.</p>\n\n<p>For example we can define a function like:</p>\n\n<pre><code>def two():\n    return 2\n\ndef sum_twice(f):\n    return f() + f()\n</code></pre>\n\n<p>If we then call <code>sum_twice(two)</code> we thus pass a reference to the <code>two</code> function as <code>f</code> parameter in <code>sum_twice</code>. This will call <code>f</code> twice and sums up the result. Here it will thus return <code>4</code>. If we would have called it with <code>sum_twice(two())</code>, then <code>f</code> would be <code>2</code>, and <code>f()</code> thus would not work (and raise an error).</p>\n"}, {"tags": [], "owner": {"reputation": 14030, "user_id": 8475054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/edbf41c4b5aecb1a949936e06368a7c2?s=128&d=identicon&r=PG&f=1", "display_name": "Robin Zigmond", "link": "https://stackoverflow.com/users/8475054/robin-zigmond"}, "is_accepted": false, "score": 3, "last_activity_date": 1565210727, "creation_date": 1565210727, "answer_id": 57402082, "question_id": 57401856, "link": "https://stackoverflow.com/questions/57401856/defining-views-and-urls-in-django-why-arent-parenthesis-used-to-call-the-funct/57402082#57402082", "title": "Defining views and urls in Django. Why aren&#39;t parenthesis used to call the function?", "body": "<p>A web application - or indeed any web server - basically does only one thing (although it can, and often does, do it in very complicated ways). A server listens for <em>requests</em> from a client (typically a web browser, when a user clicks a link, or submits a form) and then sends a <em>response</em> back to the client (in the case of a browser this will typically be an HTML document which is then displayed to the user, but it can also be many other things, including JSON, or other files like CSS, JS and image files which the browser will request if included in an HTML document, which are also needed for the page to function as intended).</p>\n\n<p>So what any web framework needs to do, whatever language it's written in, is convert a <em>request</em> into a <em>response</em>. That is what any framework you care to mention, in any language, indeed does. And it's very natural to model that as a function, which takes the request (or rather a language construct which represents it) as input and returns the response as output.</p>\n\n<p>And that is exactly what Django does. When the client makes a request to your Django application, what essentially happens at a high level is that this is request is converted to a Python object, and passed to one of your view functions, as its first parameter - the one which is conventially, and for obvious reasons of readability, called <code>request</code>. That function will return an <code>HttpResponse</code> object, which represents the response - which you don't usually have to construct yourself, there are some convenience functions which generate the right response for you when provided with other information, notably <code>render</code> and <code>redirect</code>.</p>\n\n<p>And the URLconf is how you tell Django which function to invoke - that is, which function shall process the request in order to return the response to the client. It is a mapping of URLs to view functions - the first parameter to each <code>path</code> call is the pattern (or more generally a set of patterns, from which you can extract variables which are also passed to the view function), while the second is the function to invoke. (The third can be ignored for this purpose.) As Willem explains in his answer, this is not the same as calling the function, you are simply passing a so-called \"reference\" to the function - a Python object - to <code>path</code>. You are telling Django \"when a request is made to this URL, call this function with the appropriate request object\". But you are not calling it at that point.</p>\n"}], "owner": {"reputation": 33, "user_id": 11898336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51120368bf23e7e87cdeba2ae16e4b6e?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin22", "link": "https://stackoverflow.com/users/11898336/marcin22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 57401888, "answer_count": 2, "score": 3, "last_activity_date": 1565210727, "creation_date": 1565209517, "question_id": 57401856, "link": "https://stackoverflow.com/questions/57401856/defining-views-and-urls-in-django-why-arent-parenthesis-used-to-call-the-funct", "title": "Defining views and urls in Django. Why aren&#39;t parenthesis used to call the function?", "body": "<p>I have been going through \"Python Crash Course\", and I'm working on the \"Django Web Application project (Learning Log)\" stage. There is something that contradicts what I have already learned...</p>\n\n<pre><code>\"\"\"views.py file\"\"\"\n\nfrom django.shortcuts import render\n\ndef index(request):\n    \"\"\"The home page for Learning Log.\"\"\"\n    return render(request, \"learning_logs/index.html\")\n</code></pre>\n\n<hr>\n\n<pre><code>\"\"\"urls.py file\"\"\"\n\nfrom django.urls import path\n\nfrom . import views\n\napp_name = \"learning_logs\"\nurlpatterns = [\n    # Home page\n    path(\"\", views.index, name=\"index\")\n]\n</code></pre>\n\n<hr>\n\n<p>In the code above, in \"urls.py\" file, views.index is called but without parentheses. Why is that?</p>\n\n<p>Also, the index function has \"(request)\" parameter, but the argument is never provided. Am I missing something?</p>\n\n<p><em>Note that this code works fine.</em></p>\n"}, {"tags": ["python", "web-scraping", "beautifulsoup", "automation", "scrapy"], "comments": [{"owner": {"reputation": 667, "user_id": 6260154, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/L50D0.jpg?s=128&g=1", "display_name": "Tony Montana", "link": "https://stackoverflow.com/users/6260154/tony-montana"}, "edited": false, "score": 0, "creation_date": 1565210756, "post_id": 57401844, "comment_id": 101285708, "body": "Try this <a href=\"https://stackoverflow.com/questions/55562839/scrapy-download-excel-from-site\" title=\"scrapy download excel from site\">stackoverflow.com/questions/55562839/&hellip;</a>"}, {"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 0, "creation_date": 1565211271, "post_id": 57401844, "comment_id": 101285896, "body": "Use <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_excel.html\" rel=\"nofollow noreferrer\">pandas.read_excel</a>, and pass the URL to the Excel file as the first parameter."}, {"owner": {"reputation": 61, "user_id": 11248066, "user_type": "registered", "profile_image": "https://graph.facebook.com/2047512215296784/picture?type=large", "display_name": "Raghav Goyal", "link": "https://stackoverflow.com/users/11248066/raghav-goyal"}, "reply_to_user": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 0, "creation_date": 1565211578, "post_id": 57401844, "comment_id": 101285993, "body": "@PyNoob But won&#39;t I have to generate the excel file? I wanted to automate it so that Python automatically selects the options and then download the excel file"}, {"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 0, "creation_date": 1565211851, "post_id": 57401844, "comment_id": 101286077, "body": "@RaghavGoyal It seems like you just need to put the parameters in the URL, since all the parameters are passed via a GET request. I&#39;ll see if I can make an example for this."}, {"owner": {"reputation": 61, "user_id": 11248066, "user_type": "registered", "profile_image": "https://graph.facebook.com/2047512215296784/picture?type=large", "display_name": "Raghav Goyal", "link": "https://stackoverflow.com/users/11248066/raghav-goyal"}, "reply_to_user": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "edited": false, "score": 0, "creation_date": 1565211907, "post_id": 57401844, "comment_id": 101286093, "body": "@PyNoob Please. That would be of great, great help."}], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 11248066, "user_type": "registered", "profile_image": "https://graph.facebook.com/2047512215296784/picture?type=large", "display_name": "Raghav Goyal", "link": "https://stackoverflow.com/users/11248066/raghav-goyal"}, "edited": false, "score": 0, "creation_date": 1565213400, "post_id": 57402420, "comment_id": 101286553, "body": "Thanks. But again, I am first downloading the excel file and then giving it as an input to python. What I wanted is that Python selects the fields by itself and then use them to run and download excel files. I wanted it this way because I have to extract data for several crops for several years."}, {"owner": {"reputation": 1, "user_id": 9180238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0de2dfc239e273e19a29324b4c9cc36?s=128&d=identicon&r=PG&f=1", "display_name": "The Yoshter", "link": "https://stackoverflow.com/users/9180238/the-yoshter"}, "reply_to_user": {"reputation": 61, "user_id": 11248066, "user_type": "registered", "profile_image": "https://graph.facebook.com/2047512215296784/picture?type=large", "display_name": "Raghav Goyal", "link": "https://stackoverflow.com/users/11248066/raghav-goyal"}, "edited": false, "score": 0, "creation_date": 1565215834, "post_id": 57402420, "comment_id": 101287249, "body": "you can keep the autmation shown here and just change format=excel at the end of that link. Then use pandas&#39;s read_url as shown in pyNoob&#39;s answer."}], "tags": [], "owner": {"reputation": 1, "user_id": 9180238, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0de2dfc239e273e19a29324b4c9cc36?s=128&d=identicon&r=PG&f=1", "display_name": "The Yoshter", "link": "https://stackoverflow.com/users/9180238/the-yoshter"}, "is_accepted": false, "score": 0, "last_activity_date": 1565214823, "last_edit_date": 1565214823, "creation_date": 1565212676, "answer_id": 57402420, "question_id": 57401844, "link": "https://stackoverflow.com/questions/57401844/how-to-automatically-select-data-on-webpage-and-download-the-resulting-xls-file/57402420#57402420", "title": "How to Automatically select data on webpage and download the resulting xls file using Python", "body": "<p>Your particular query generates at least 1227 pages of data - so I just trimmed it down to one location - Arizona(from 07/31/2018  - 08/1/2019) - now generating 47 pages of data. xml size was 500KB</p>\n\n<p>You can semi automate like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; end_day='01'\n&gt;&gt;&gt; start_day='31'\n&gt;&gt;&gt; start_month='07'\n&gt;&gt;&gt; end_month='08'\n&gt;&gt;&gt; start_year='2018'\n&gt;&gt;&gt; end_year='2019'\n&gt;&gt;&gt; link = f\"https://marketnews.usda.gov/mnp/ls-report?&amp;endDateGrain={end_month}%2F{end_day}%2F{end_year}&amp;commDetail=All&amp;endDateWeekly={end_month}%2F{end_day}%2F{end_year}&amp;repMonth=1&amp;repType=Daily&amp;rtype=&amp;use=&amp;_use=1&amp;fsize=&amp;_fsize=1&amp;byproducts=&amp;run=Run&amp;pricutvalue=&amp;repDateGrain={start_month}%2F{start_day}%2F{start_year}+&amp;runReport=true&amp;grade=&amp;regionsDesc=All+AR&amp;subprimals=&amp;mscore=&amp;endYear={end_year}&amp;repDateWeekly={start_month}%2F{start_day}%2F{start_year}&amp;_wrange=1&amp;endDateWeeklyGrain=&amp;repYear={end_year}&amp;loc=All+AR&amp;_loc=1&amp;wrange=&amp;_grade=1&amp;repDateWeeklyGrain=&amp;_byproducts=1&amp;category=Grain&amp;organic=NO&amp;commodity=Coarse&amp;subComm=Corn&amp;_mscore=0&amp;_subprimals=1&amp;_commDetail=1&amp;cut=&amp;endMonth=1&amp;repDate={start_month}%2F{start_day}%2F{start_year}&amp;endDate={end_month}%2F{end_day}%2F{end_year}&amp;format=xml\"\n&gt;&gt;&gt; link\n'https://marketnews.usda.gov/mnp/ls-report?&amp;endDateGrain=08%2F01%2F2019&amp;commDetail=All&amp;endDateWeekly=08%2F01%2F2019&amp;repMonth=1&amp;repType=Daily&amp;rtype=&amp;use=&amp;_use=1&amp;fsize=&amp;_fsize=1&amp;byproducts=&amp;run=Run&amp;pricutvalue=&amp;repDateGrain=07%2F31%2F2018+&amp;runReport=true&amp;grade=&amp;regionsDesc=All+AR&amp;subprimals=&amp;mscore=&amp;endYear=2019&amp;repDateWeekly=07%2F31%2F2018&amp;_wrange=1&amp;endDateWeeklyGrain=&amp;repYear=2019&amp;loc=All+AR&amp;_loc=1&amp;wrange=&amp;_grade=1&amp;repDateWeeklyGrain=&amp;_byproducts=1&amp;category=Grain&amp;organic=NO&amp;commodity=Coarse&amp;subComm=Corn&amp;_mscore=0&amp;_subprimals=1&amp;_commDetail=1&amp;cut=&amp;endMonth=1&amp;repDate=07%2F31%2F2018&amp;endDate=08%2F01%2F2019&amp;format=xml'\n\n&gt;&gt;&gt; with urllib.request.urlopen(link) as response:\n...     html = response.read()\n... \n\n\n</code></pre>\n\n<p>loading the html could take a hot minute with large queries</p>\n\n<p>If you for some reason wished to process the entire data set - you could repeat this process - but you may wish to look into techniques that can be specifically optimized for big data - perhaps a solution involving Python's Pandas and numexpr(for GPU acceleration/parallelization)</p>\n\n<p>You can find the data used in this answer <a href=\"https://marketnews.usda.gov/mnp/ls-report?&amp;endDateGrain=08%2F01%2F2019&amp;repDate=07%2F31%2F2018%20&amp;commDetail=All&amp;repMonth=1&amp;endDateWeekly=08%2F01%2F2019&amp;repType=Daily&amp;rtype=&amp;fsize=&amp;_use=1&amp;use=&amp;endDate=08%2F01%2F2019&amp;_fsize=1&amp;byproducts=&amp;run=Run&amp;pricutvalue=&amp;repDateGrain=07%2F31%2F2018%20&amp;runReport=true&amp;grade=&amp;regionsDesc=All%20AR&amp;subprimals=&amp;rowDisplayMax=25&amp;mscore=&amp;endYear=2019&amp;repDateWeekly=07%2F31%2F2018&amp;_wrange=1&amp;endDateWeeklyGrain=&amp;repYear=2019&amp;loc=All%20AR&amp;_loc=1&amp;wrange=&amp;_grade=1&amp;repDateWeeklyGrain=&amp;_byproducts=1&amp;organic=NO&amp;category=Grain&amp;_mscore=0&amp;subComm=Corn&amp;commodity=Coarse&amp;_commDetail=1&amp;_subprimals=1&amp;cut=&amp;endMonth=1&amp;startIndex=1\" rel=\"nofollow noreferrer\">here</a> - which you can download as an xml.</p>\n\n<p>First import your xml:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; import xml.etree.ElementTree as ET\n</code></pre>\n\n<p>you can either download the file from the website in python</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; tree = ET.parse(html)\n</code></pre>\n\n<p>or manually</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; tree = ET.parse('report.xml')\n&gt;&gt;&gt; report = tree.getroot()\n</code></pre>\n\n<p>you can then do stuff like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; report[0][0]\n&lt;Element 'reportDate' at 0x7f902adcf368&gt;\n&gt;&gt;&gt; report[0][0].text\n'07/31/2018'\n&gt;&gt;&gt; for el in report[0]:\n...     print(el)\n... \n&lt;Element 'reportDate' at 0x7f902adcf368&gt;\n&lt;Element 'location' at 0x7f902ac814f8&gt;\n&lt;Element 'classStr' at 0x7f902ac81548&gt;\n&lt;Element 'variety' at 0x7f902ac81b88&gt;\n&lt;Element 'grade' at 0x7f902ac29cc8&gt;\n&lt;Element 'units' at 0x7f902ac29d18&gt;\n&lt;Element 'transMode' at 0x7f902ac29d68&gt;\n&lt;Element 'bidLevel' at 0x7f902ac29db8&gt;\n&lt;Element 'deliveryPoint' at 0x7f902ac29ea8&gt;\n&lt;Element 'deliveryPeriod' at 0x7f902ac29ef8&gt;\n</code></pre>\n\n<p>More info on parsing xml is <a href=\"https://docs.python.org/3/library/xml.etree.elementtree.html\" rel=\"nofollow noreferrer\">here</a>.\n You're going to want to learn some python - but hopefully you can make sense of the following. Luckily - there are many free python tutorials online - here is a quick snippet to get you started.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>#lets find the lowest bid on a certain day\n&gt;&gt;&gt; report[0][0]\n&lt;Element 'reportDate' at 0x7f902adcf368&gt;\n&gt;&gt;&gt; report[0][0].text\n'07/31/2018'\n&gt;&gt;&gt; report[0][7]\n&lt;Element 'bidLevel' at 0x7f902ac29db8&gt;\n&gt;&gt;&gt; report[0][7][0]\n&lt;Element 'lowPrice' at 0x7f902ac29e08&gt;\n&gt;&gt;&gt; report[0][7][0].text\n'3.84'\n\n#how many low bids are there?\n&gt;&gt;&gt; len(report)\n1216\n\n#get an average of the lowest bids...\n&gt;&gt;&gt; low_bid_list = [float(bid[7][0].text) for bid in report]\n[3.84, 3.76, 3.74, 3.67, 3.65, 3.7, 3.5, 3.7, 3.61,...]\n&gt;&gt;&gt; sum = 0\n&gt;&gt;&gt; for el in low_bid_list:\n...     sum = sum + el\n... \n&gt;&gt;&gt; sum\n4602.599999999992\n&gt;&gt;&gt; sum/len(report)\n3.7850328947368355\n\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 11248066, "user_type": "registered", "profile_image": "https://graph.facebook.com/2047512215296784/picture?type=large", "display_name": "Raghav Goyal", "link": "https://stackoverflow.com/users/11248066/raghav-goyal"}, "edited": false, "score": 0, "creation_date": 1565213188, "post_id": 57402429, "comment_id": 101286470, "body": "I get what you have done above. I actually wanted to automate this. I am saying this because I have to extract data for more than 20 years and for different crops. This way I will have to  generate a url each time and then give it to python. Which will make the process lengthy. That&#39;s why I was looking into something that Python selects the fields by itself and then extract the excel file"}, {"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "reply_to_user": {"reputation": 61, "user_id": 11248066, "user_type": "registered", "profile_image": "https://graph.facebook.com/2047512215296784/picture?type=large", "display_name": "Raghav Goyal", "link": "https://stackoverflow.com/users/11248066/raghav-goyal"}, "edited": false, "score": 0, "creation_date": 1565213394, "post_id": 57402429, "comment_id": 101286549, "body": "The URL generation can be done in Python, so it doesn&#39;t have to be a manual process. If you include what you want to query I can help show that generation process, too! For instance, you&#39;re trying to alter the start date and end date to change the years, right? Are there particular dates you had in mind, or just a year back from the current day? And did you want to go through every option available on the site?"}, {"owner": {"reputation": 61, "user_id": 11248066, "user_type": "registered", "profile_image": "https://graph.facebook.com/2047512215296784/picture?type=large", "display_name": "Raghav Goyal", "link": "https://stackoverflow.com/users/11248066/raghav-goyal"}, "edited": false, "score": 0, "creation_date": 1565213696, "post_id": 57402429, "comment_id": 101286653, "body": "Yeah. I want to extract this data for corn from January 1992 onwards till July 2019. The website just allows to extract data for one year at a time. Once I understand how this is done, I can try and do it for other crops as well."}, {"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "reply_to_user": {"reputation": 61, "user_id": 11248066, "user_type": "registered", "profile_image": "https://graph.facebook.com/2047512215296784/picture?type=large", "display_name": "Raghav Goyal", "link": "https://stackoverflow.com/users/11248066/raghav-goyal"}, "edited": false, "score": 0, "creation_date": 1565214750, "post_id": 57402429, "comment_id": 101286973, "body": "@RaghavGoyal I added an example for iterating through years of data, right now I have it set at 20 but we can go back 27 years too!"}, {"owner": {"reputation": 61, "user_id": 11248066, "user_type": "registered", "profile_image": "https://graph.facebook.com/2047512215296784/picture?type=large", "display_name": "Raghav Goyal", "link": "https://stackoverflow.com/users/11248066/raghav-goyal"}, "edited": false, "score": 0, "creation_date": 1565215405, "post_id": 57402429, "comment_id": 101287127, "body": "Yeah, I got it. Thanks a lot. I have one question. So, if I am not wrong, all the data is currently stored in df_lst variable. How, do I get this data in one final excel file?"}, {"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "reply_to_user": {"reputation": 61, "user_id": 11248066, "user_type": "registered", "profile_image": "https://graph.facebook.com/2047512215296784/picture?type=large", "display_name": "Raghav Goyal", "link": "https://stackoverflow.com/users/11248066/raghav-goyal"}, "edited": false, "score": 0, "creation_date": 1565217145, "post_id": 57402429, "comment_id": 101287563, "body": "@RaghavGoyal Yes, all the data is stored in <code>df_lst</code>. Technically, it&#39;s a list of DataFrame objects, but these reports only give us 1 so I only use that one. Since our data is a DataFrame, exporting to a CSV or Excel file is simple. I added an example to show how I would do that."}, {"owner": {"reputation": 61, "user_id": 11248066, "user_type": "registered", "profile_image": "https://graph.facebook.com/2047512215296784/picture?type=large", "display_name": "Raghav Goyal", "link": "https://stackoverflow.com/users/11248066/raghav-goyal"}, "edited": false, "score": 0, "creation_date": 1565217703, "post_id": 57402429, "comment_id": 101287696, "body": "I tried doing this. But it throws me an error: ValueError: binary mode doesn&#39;t take an encoding argument"}, {"owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "reply_to_user": {"reputation": 61, "user_id": 11248066, "user_type": "registered", "profile_image": "https://graph.facebook.com/2047512215296784/picture?type=large", "display_name": "Raghav Goyal", "link": "https://stackoverflow.com/users/11248066/raghav-goyal"}, "edited": false, "score": 0, "creation_date": 1565218095, "post_id": 57402429, "comment_id": 101287789, "body": "@RaghavGoyal Ahh I see, it should be fixed now. I had been running on Python 2, but I&#39;ve updated it to work with Python 3 (changed <code>&#39;wb&#39;</code> to <code>&#39;w&#39;</code> and <code>&#39;ab&#39;</code> to <code>&#39;a&#39;</code>). Normal &#39;w&#39; and &#39;a&#39; add carriages returns and what-not on Python 2, but that&#39;s not a problem on Python 3."}], "tags": [], "owner": {"reputation": 1038, "user_id": 6779606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07319033471657740d4baed181bb46d9?s=128&d=identicon&r=PG&f=1", "display_name": "PyNoob", "link": "https://stackoverflow.com/users/6779606/pynoob"}, "is_accepted": true, "score": 0, "last_activity_date": 1565218488, "last_edit_date": 1565218488, "creation_date": 1565212724, "answer_id": 57402429, "question_id": 57401844, "link": "https://stackoverflow.com/questions/57401844/how-to-automatically-select-data-on-webpage-and-download-the-resulting-xls-file/57402429#57402429", "title": "How to Automatically select data on webpage and download the resulting xls file using Python", "body": "<p>Using the query you defined as an example, I input the query manually and found the following URL for the Excel (really HTML) format:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>url = 'https://marketnews.usda.gov/mnp/ls-report?&amp;endDateGrain=08%2F01%2F2019&amp;commDetail=All&amp;repMonth=1&amp;endDateWeekly=&amp;repType=Daily&amp;rtype=&amp;fsize=&amp;_use=1&amp;use=&amp;_fsize=1&amp;byproducts=&amp;run=Run&amp;pricutvalue=&amp;repDateGrain=07%2F31%2F2018&amp;runReport=true&amp;grade=&amp;regionsDesc=&amp;subprimals=&amp;mscore=&amp;endYear=2019&amp;repDateWeekly=&amp;_wrange=1&amp;endDateWeeklyGrain=&amp;repYear=2019&amp;loc=All&amp;_loc=1&amp;wrange=&amp;_grade=1&amp;repDateWeeklyGrain=&amp;_byproducts=1&amp;organic=NO&amp;category=Grain&amp;_mscore=1&amp;subComm=Corn&amp;commodity=Coarse&amp;_commDetail=1&amp;_subprimals=1&amp;cut=&amp;endMonth=1&amp;repDate=07%2F31%2F2018&amp;endDate=08%2F01%2F2019&amp;format=excel'\n</code></pre>\n\n<p>In the URL are parameters we can set in Python, and we could easily make a loop to change the parameters. For now, let me just get into the example of actually getting this data. I use the <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.read_html.html\" rel=\"nofollow noreferrer\">pandas.read_html</a> to read this HTML result and populate a <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.html\" rel=\"nofollow noreferrer\">DataFrame</a>, which could be thought of as a table with columns and rows.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\n#  use URL defined earlier\n#  url = '...'\ndf_lst = pd.read_html(url, header=1)\n</code></pre>\n\n<p>Now <code>df_lst</code> is a list of DataFrame objects containing the desired data. For your particular example, this results in 30674 rows and 11 columns:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; df_lst[0].columns\nIndex([u'Report Date', u'Location', u'Class', u'Variety', u'Grade Description',\n       u'Units', u'Transmode', u'Low', u'High', u'Pricing Point',\n       u'Delivery Period'],\n      dtype='object')\n&gt;&gt;&gt; df_lst[0].head()\n  Report Date         Location   Class  Variety Grade Description   Units   Transmode   Low  High         Pricing Point Delivery Period\n0  07/31/2018  Blytheville, AR  YELLOW      NaN           US NO 2  Bushel       Truck  3.84  3.84     Country Elevators            Cash\n1  07/31/2018       Helena, AR  YELLOW      NaN           US NO 2  Bushel       Truck  3.76  3.76     Country Elevators            Cash\n2  07/31/2018  Little Rock, AR  YELLOW      NaN           US NO 2  Bushel       Truck  3.74  3.74  Mills and Processors            Cash\n3  07/31/2018   Pine Bluff, AR  YELLOW      NaN           US NO 2  Bushel       Truck  3.67  3.67     Country Elevators            Cash\n4  07/31/2018       Denver, CO  YELLOW      NaN           US NO 2  Bushel  Truck-Rail  3.72  3.72    Terminal Elevators            Cash\n&gt;&gt;&gt; df_lst[0].shape\n(30674, 11)\n</code></pre>\n\n<hr>\n\n<p>Now, back to the point I made about the URL parameters--using Python, we can run through lists and format the URL string to our liking. For instance, iterating through 20 years of the given query can be done by modifying the URL to have numbers corresponding to positional arguments in Python's <code>str.format()</code> method. Here's a full example below:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import datetime\nimport pandas as pd\n\nurl = 'https://marketnews.usda.gov/mnp/ls-report?&amp;endDateGrain={1}&amp;commDetail=All&amp;repMonth=1&amp;endDateWeekly=&amp;repType=Daily&amp;rtype=&amp;fsize=&amp;_use=1&amp;use=&amp;_fsize=1&amp;byproducts=&amp;run=Run&amp;pricutvalue=&amp;repDateGrain={0}&amp;runReport=true&amp;grade=&amp;regionsDesc=&amp;subprimals=&amp;mscore=&amp;endYear=2019&amp;repDateWeekly=&amp;_wrange=1&amp;endDateWeeklyGrain=&amp;repYear=2019&amp;loc=All&amp;_loc=1&amp;wrange=&amp;_grade=1&amp;repDateWeeklyGrain=&amp;_byproducts=1&amp;organic=NO&amp;category=Grain&amp;_mscore=1&amp;subComm=Corn&amp;commodity=Coarse&amp;_commDetail=1&amp;_subprimals=1&amp;cut=&amp;endMonth=1&amp;repDate={0}&amp;endDate={1}&amp;format=excel'\n\nstart = [datetime.date(2018-i, 7, 31) for i in range(20)]\nend = [datetime.date(2019-i, 8, 1) for i in range(20)]\nfor s, e in zip(start, end):\n    url_get = url.format(s.strftime('%m/%d/%Y'), e.strftime('%m/%d/%Y'))\n    df_lst = pd.read_html(url_get, header=1)\n\n    #print(df_lst[0].head())  # uncomment to see first five rows\n    #print(df_lst[0].shape)  # uncomment to see DataFrame shape\n\n</code></pre>\n\n<p><strong>Be careful with pd.read_html.</strong> I've modified my answer with a <code>header</code> keyword argument to <code>pd.read_html()</code> because the multi-indexing made it a pain to get results. By giving a single row index as the header, it's no longer a multi-index, and data indexing is easy. For instance, I can get corn class using this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df_lst[0]['Class']\n</code></pre>\n\n<hr>\n\n<p>Compiling all the reports into one large file is also easy with Pandas. Since we have a DataFrame, we can use the <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.DataFrame.to_csv.html\" rel=\"nofollow noreferrer\">pandas.to_csv</a> function to export our data as a CSV (or any other file type you want, but I chose CSV for this example). Here's a modified version with the additional capability of outputting a CSV:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import datetime\nimport pandas as pd\n\n# URL\nurl = 'https://marketnews.usda.gov/mnp/ls-report?&amp;endDateGrain={1}&amp;commDetail=All&amp;repMonth=1&amp;endDateWeekly=&amp;repType=Daily&amp;rtype=&amp;fsize=&amp;_use=1&amp;use=&amp;_fsize=1&amp;byproducts=&amp;run=Run&amp;pricutvalue=&amp;repDateGrain={0}&amp;runReport=true&amp;grade=&amp;regionsDesc=&amp;subprimals=&amp;mscore=&amp;endYear=2019&amp;repDateWeekly=&amp;_wrange=1&amp;endDateWeeklyGrain=&amp;repYear=2019&amp;loc=All&amp;_loc=1&amp;wrange=&amp;_grade=1&amp;repDateWeeklyGrain=&amp;_byproducts=1&amp;organic=NO&amp;category=Grain&amp;_mscore=1&amp;subComm=Corn&amp;commodity=Coarse&amp;_commDetail=1&amp;_subprimals=1&amp;cut=&amp;endMonth=1&amp;repDate={0}&amp;endDate={1}&amp;format=excel'\n\n# CSV output file and flag\ncsv_out = 'myreports.csv'\nflag = True\n\n# Start and end dates\nstart = [datetime.date(2018-i, 7, 31) for i in range(20)]\nend = [datetime.date(2019-i, 8, 1) for i in range(20)]\n\n# Iterate through dates and get report from URL\nfor s, e in zip(start, end):\n    url_get = url.format(s.strftime('%m/%d/%Y'), e.strftime('%m/%d/%Y'))\n\n    df_lst = pd.read_html(url_get, header=1)\n    print(df_lst[0].head())  # uncomment to see first five rows\n    print(df_lst[0].shape)  # uncomment to see DataFrame shape\n\n    # Save to big CSV\n    if flag is True:\n        # 0th iteration, so write header and overwrite existing file\n        df_lst[0].to_csv(csv_out, header=True, mode='w')  # change mode to 'wb' if Python 2.7\n        flag = False\n    else:\n        # Subsequent iterations should append to file and not add new header\n        df_lst[0].to_csv(csv_out, header=False, mode='a')  # change mode to 'ab' if Python 2.7\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 11248066, "user_type": "registered", "profile_image": "https://graph.facebook.com/2047512215296784/picture?type=large", "display_name": "Raghav Goyal", "link": "https://stackoverflow.com/users/11248066/raghav-goyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2121, "favorite_count": 0, "accepted_answer_id": 57402429, "answer_count": 2, "score": 0, "last_activity_date": 1565218488, "creation_date": 1565209440, "last_edit_date": 1565209752, "question_id": 57401844, "link": "https://stackoverflow.com/questions/57401844/how-to-automatically-select-data-on-webpage-and-download-the-resulting-xls-file", "title": "How to Automatically select data on webpage and download the resulting xls file using Python", "body": "<p>I am new to Python. I am trying to scrape the data on the <a href=\"https://marketnews.usda.gov/mnp/ls-report-config\" rel=\"nofollow noreferrer\">page</a>:</p>\n\n<p>For example:  </p>\n\n<pre><code>Category: grains  \nOrganic: No  \nCommodity: Coarse  \nSubCommodity: Corn  \nPublications: Daily  \nLocation: All  \nRefine Commodity: All\n\nDates: 07/31/2018 - 08/01/2019\n</code></pre>\n\n<p>Is there a way in which Python can select this on the webpage and then click on run and then </p>\n\n<p>Click on Download as Excel and store the excel file?</p>\n\n<p>Is it possible? I am new to coding and need some guidance here. </p>\n\n<p>Currently what I have done is enter the data and then on the resulting page I used Beautiful Soup to scrape the table. However it takes a lot of time since the table is spread on more than 200 pages.</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 2622, "user_id": 2305545, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0c3a74411bc5997af03461a7b0458069?s=128&d=identicon&r=PG", "display_name": "NOhs", "link": "https://stackoverflow.com/users/2305545/nohs"}, "edited": false, "score": 0, "creation_date": 1565209891, "post_id": 57401812, "comment_id": 101285370, "body": "Welcome to StackOverflow. To make your question fit the format of this site, it is necessary, that you include also what you have researched so far, and where exactly you are stuck. See also: <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a>. The easiest way is to include an MVCE showing how you populate your dataframe and where in the script you are missing bits."}], "answers": [{"tags": [], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "is_accepted": false, "score": 3, "last_activity_date": 1565209569, "creation_date": 1565209569, "answer_id": 57401864, "question_id": 57401812, "link": "https://stackoverflow.com/questions/57401812/adding-a-column-to-a-data-frame-with-a-repeating-sequence/57401864#57401864", "title": "Adding a column to a data frame with a repeating sequence", "body": "<p>Use <a href=\"https://docs.scipy.org/doc/numpy/reference/generated/numpy.tile.html\" rel=\"nofollow noreferrer\"><code>np.tile</code></a></p>\n\n<pre><code>N = 2\nnp.tile([1,2,3,4,5], N)\n</code></pre>\n\n<p>where <code>N</code> is the number of repetitions </p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 4122599, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ii2eMoiuDek/AAAAAAAAAAI/AAAAAAAAChE/FayvpedMW24/photo.jpg?sz=128", "display_name": "rxtechsbay", "link": "https://stackoverflow.com/users/4122599/rxtechsbay"}, "edited": false, "score": 0, "creation_date": 1565286960, "post_id": 57401870, "comment_id": 101316103, "body": "This is exactly what I need, but when I try to run this code, I am getting a syntax error -     df = pd.DataFrame(dict(old_column=[*&#39;ABCDEFGHIJK&#39;]))                                        ^ SyntaxError: invalid syntax"}, {"owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "reply_to_user": {"reputation": 45, "user_id": 4122599, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ii2eMoiuDek/AAAAAAAAAAI/AAAAAAAAChE/FayvpedMW24/photo.jpg?sz=128", "display_name": "rxtechsbay", "link": "https://stackoverflow.com/users/4122599/rxtechsbay"}, "edited": false, "score": 0, "creation_date": 1565287057, "post_id": 57401870, "comment_id": 101316144, "body": "You&#39;re probably using an older version of Python that doesn&#39;t allow for my &quot;slick&quot; use of <code>[*...]</code> so use the <code>list</code> callable instead <code>df.assign(new_column=list(islice(cycle(pat), len(df))))</code>"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": true, "score": 2, "last_activity_date": 1565210134, "last_edit_date": 1565210134, "creation_date": 1565209581, "answer_id": 57401870, "question_id": 57401812, "link": "https://stackoverflow.com/questions/57401812/adding-a-column-to-a-data-frame-with-a-repeating-sequence/57401870#57401870", "title": "Adding a column to a data frame with a repeating sequence", "body": "<h3><code>itertools</code>, <code>islice</code> and <code>cycle</code></h3>\n\n<p>This keeps going through the pattern and doesn't matter if the length of the dataframe is a multiple of the length of the pattern.</p>\n\n<pre><code>from itertools import islice, cycle\n\npat = [1, 2, 3, 4, 5]\ndf.assign(new_column=[*islice(cycle(pat), len(df))])\n\n   old_column  new_column\n0           A           1\n1           B           2\n2           C           3\n3           D           4\n4           E           5\n5           F           1\n6           G           2\n7           H           3\n8           I           4\n9           J           5\n10          K           1\n</code></pre>\n\n<hr>\n\n<h3>Setup</h3>\n\n<pre><code>df = pd.DataFrame(dict(old_column=[*'ABCDEFGHIJK']))\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4122599, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ii2eMoiuDek/AAAAAAAAAAI/AAAAAAAAChE/FayvpedMW24/photo.jpg?sz=128", "display_name": "rxtechsbay", "link": "https://stackoverflow.com/users/4122599/rxtechsbay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "accepted_answer_id": 57401870, "answer_count": 2, "score": 1, "last_activity_date": 1565210134, "creation_date": 1565209310, "last_edit_date": 1565209579, "question_id": 57401812, "link": "https://stackoverflow.com/questions/57401812/adding-a-column-to-a-data-frame-with-a-repeating-sequence", "title": "Adding a column to a data frame with a repeating sequence", "body": "<p>I am trying to add a column to a data frame and have it pre populated with a repeating sequence.</p>\n\n<p>For example:</p>\n\n<pre><code>new_column\n1\n2\n3\n4\n5\n1\n2\n3\n4\n5\n.\n.\n.\n</code></pre>\n\n<p>Is there a way to achieve this using pandas functions and not having to run a loop?</p>\n"}, {"tags": ["python", "emulation", "turtle-graphics", "pynput"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11890819, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iDxxwwmYkIQ/AAAAAAAAAAI/AAAAAAAAFn8/3ZJW6ZgRy2Q/photo.jpg?sz=128", "display_name": "MaT GP", "link": "https://stackoverflow.com/users/11890819/mat-gp"}, "edited": false, "score": 0, "creation_date": 1565210691, "post_id": 57401904, "comment_id": 101285678, "body": "The Pynput part (getting the trackpad input and using the listener) I got all right. The problem comes when I tried to integrate with Turtle."}, {"owner": {"reputation": 1013, "user_id": 11597215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Yxrbc74AuN8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reF3AJT4Z8LqAUdvD4qzRjp99CMCw/mo/photo.jpg?sz=128", "display_name": "Jainil Patel", "link": "https://stackoverflow.com/users/11597215/jainil-patel"}, "reply_to_user": {"reputation": 1, "user_id": 11890819, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iDxxwwmYkIQ/AAAAAAAAAAI/AAAAAAAAFn8/3ZJW6ZgRy2Q/photo.jpg?sz=128", "display_name": "MaT GP", "link": "https://stackoverflow.com/users/11890819/mat-gp"}, "edited": false, "score": 0, "creation_date": 1565211436, "post_id": 57401904, "comment_id": 101285951, "body": "you have to use multithreading for that. one thread listening and second moving turtle"}, {"owner": {"reputation": 1, "user_id": 11890819, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iDxxwwmYkIQ/AAAAAAAAAAI/AAAAAAAAFn8/3ZJW6ZgRy2Q/photo.jpg?sz=128", "display_name": "MaT GP", "link": "https://stackoverflow.com/users/11890819/mat-gp"}, "edited": false, "score": 0, "creation_date": 1565215607, "post_id": 57401904, "comment_id": 101287180, "body": "yeah, gotcha. but im having some trouble implementing that. any ideas?"}], "tags": [], "owner": {"reputation": 1013, "user_id": 11597215, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Yxrbc74AuN8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reF3AJT4Z8LqAUdvD4qzRjp99CMCw/mo/photo.jpg?sz=128", "display_name": "Jainil Patel", "link": "https://stackoverflow.com/users/11597215/jainil-patel"}, "is_accepted": false, "score": 0, "last_activity_date": 1565209767, "creation_date": 1565209767, "answer_id": 57401904, "question_id": 57401773, "link": "https://stackoverflow.com/questions/57401773/how-to-fix-main-thread-is-not-in-main-loop-error-in-turtle-python-library/57401904#57401904", "title": "How to fix &#39;main thread is not in main loop&#39; error in turtle, python library?", "body": "<pre><code>from pynput.mouse import Listener\n\ndef on_move(x, y):\n    print('Pointer moved to {0}'.format(\n        (x, y)))\n\ndef on_click(x, y, button, pressed):\n    print('{0} at {1}'.format(\n        'Pressed' if pressed else 'Released',\n        (x, y)))\n    if not pressed:\n        # Stop listener\n        return False\n\ndef on_scroll(x, y, dx, dy):\n    print('Scrolled {0}'.format(\n        (x, y)))\n\n# Collect events until released\nwith Listener(\n        on_move=on_move,\n        on_click=on_click,\n        on_scroll=on_scroll) as listener:\n    listener.join()\n</code></pre>\n\n<p>from <a href=\"https://pythonhosted.org/pynput/mouse.html\" rel=\"nofollow noreferrer\">https://pythonhosted.org/pynput/mouse.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 32921, "user_id": 5771269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be6a5b618f5bd197150a6186318beba7?s=128&d=identicon&r=PG&f=1", "display_name": "cdlane", "link": "https://stackoverflow.com/users/5771269/cdlane"}, "is_accepted": false, "score": 0, "last_activity_date": 1565412563, "creation_date": 1565412563, "answer_id": 57439401, "question_id": 57401773, "link": "https://stackoverflow.com/questions/57401773/how-to-fix-main-thread-is-not-in-main-loop-error-in-turtle-python-library/57439401#57439401", "title": "How to fix &#39;main thread is not in main loop&#39; error in turtle, python library?", "body": "<p>I'm guessing that you're only importing <code>pynput</code> because the turtle screen object lacks the <code>'Motion'</code> event of its tkinter underpinning.  If so, we can instead install the missing event into turtle to implement your digitizer:</p>\n\n<pre><code>from turtle import Turtle, Screen, Vec2D\nfrom functools import partial\n\nclass MyException(Exception):\n    pass\n\ndef onscreenmove(self, fun, add=None):\n\n    ''' Event method missing from turtle '''\n\n    if fun is None:\n        self.cv.unbind('&lt;Motion&gt;')\n    else:\n        def eventfun(event):\n            fun(self.cv.canvasx(event.x) / self.xscale, -self.cv.canvasy(event.y) / self.yscale)\n\n        self.cv.bind('&lt;Motion&gt;', eventfun, add)\n\ndef on_left_click(x, y):\n    raise MyException(Vec2D(x, y))\n\ndef on_move(x, y):\n    screen.onmove(None)  # disable events inside handler\n\n    print('Pointer: {0}'.format(Vec2D(x, y)))\n\n    turtle.setheading(turtle.towards(x, y))\n    turtle.goto(x, y)\n\n    screen.onmove(on_move)  # reenable handler\n\nturtle = Turtle()\nturtle.speed('fastest')\n\nscreen = Screen()\nscreen.onmove = partial(onscreenmove, screen)  # install missing method\n\nscreen.onmove(on_move)\nscreen.onclick(on_left_click, btn=1)  # btn=1 is the default\n\nscreen.mainloop()\n</code></pre>\n\n<p><strong>SCREEN</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/NsAXm.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NsAXm.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>CONSOLE</strong></p>\n\n<pre><code>&gt; python3 test.py\nPointer: (336.00,-73.00)\nPointer: (289.00,-56.00)\nPointer: (256.00,-43.00)\nPointer: (233.00,-35.00)\nPointer: (220.00,-31.00)\nPointer: (216.00,-30.00)\n...\nPointer: (139.00,-37.00)\nPointer: (131.00,-35.00)\nPointer: (117.00,-25.00)\nPointer: (165.00,-24.00)\nPointer: (275.00,-28.00)\nPointer: (337.00,-29.00)\nException in Tkinter callback\nTraceback (most recent call last):\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/tkinter/__init__.py\", line 1705, in __call__\n    return self.func(*args)\n  File \"/Library/Frameworks/Python.framework/Versions/3.7/lib/python3.7/turtle.py\", line 675, in eventfun\n    fun(x, y)\n  File \"test.py\", line 20, in on_left_click\n    raise MyException(Vec2D(x, y))\nMyException: (151.00,334.00)\nPointer: (150.00,334.00)\nPointer: (147.00,334.00)\nPointer: (143.00,334.00)\n...\nPointer: (20.00,273.00)\nPointer: (-46.00,306.00)\nPointer: (-141.00,360.00)\n&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11890819, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iDxxwwmYkIQ/AAAAAAAAAAI/AAAAAAAAFn8/3ZJW6ZgRy2Q/photo.jpg?sz=128", "display_name": "MaT GP", "link": "https://stackoverflow.com/users/11890819/mat-gp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1565412590, "creation_date": 1565209111, "last_edit_date": 1565412590, "question_id": 57401773, "link": "https://stackoverflow.com/questions/57401773/how-to-fix-main-thread-is-not-in-main-loop-error-in-turtle-python-library", "title": "How to fix &#39;main thread is not in main loop&#39; error in turtle, python library?", "body": "<p>I'm trying to emulate a digitizer tablet with my notebook trackpad using the libraries Pynput and Turtle, but I keep geeting this same error:</p>\n\n<blockquote>\n  <p>RuntimeError: main thread is not in main loop</p>\n</blockquote>\n\n<p>Here's the full code:</p>\n\n<pre><code>from pynput import mouse\nimport turtle as tt\nimport time\n\ntt.speed(0)\n\nclass MyException(Exception): pass\n\ndef on_move(x,y):\n    print('Pointer: {0}'.format((x,y)))\n    pos = (x,y)\n    tt.setpos(pos)\n\ndef on_click(x, y, button, pressed):\n    if button == mouse.Button.left:\n        raise MyException(button)\n\nwith mouse.Listener(\n        on_click=on_click,\n        on_move=on_move) as listener:\n    try:\n        listener.join()\n    except MyException as e:\n        print('{0} was clicked'.format(e.args[0]))\n</code></pre>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 2507, "user_id": 2741091, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2f5b0db70a69308bba55f416f78f9fc9?s=128&d=identicon&r=PG", "display_name": "ifly6", "link": "https://stackoverflow.com/users/2741091/ifly6"}, "edited": false, "score": 0, "creation_date": 1565209516, "post_id": 57401767, "comment_id": 101285214, "body": "Make your data tidy, so that there is a column called <code>time</code> with a value running from <code>[0, n]</code>. Then, compare your value column and your minimum/maximum columns to determine whether it fits inside the constraint."}], "answers": [{"tags": [], "owner": {"reputation": 2507, "user_id": 2741091, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2f5b0db70a69308bba55f416f78f9fc9?s=128&d=identicon&r=PG", "display_name": "ifly6", "link": "https://stackoverflow.com/users/2741091/ifly6"}, "is_accepted": false, "score": 0, "last_activity_date": 1565209932, "creation_date": 1565209932, "answer_id": 57401941, "question_id": 57401767, "link": "https://stackoverflow.com/questions/57401767/assigning-new-column-value-to-data-frame-based-on-if-time-series-data-matches-fu/57401941#57401941", "title": "Assigning new column value to data frame based on if time series data matches functional constraint", "body": "<p>First, tidy your data.</p>\n\n<pre><code>tidy = pd.wide_to_long(df, stubnames='time', i='sample', j='x', sep='=') \\\n    .reset_index().rename(columns={'time': 'value', 'x': 'time'})\n# I made the choice to do some renaming to make it clearer what vars are what\n</code></pre>\n\n<p>Yield this sort of DataFrame (truncated):</p>\n\n<pre><code>  sample  time  value\n0     s1     0     50\n1     s2     0    120\n2     s3     0     30\n3     s4     0     10\n4     s5     0     55\n5     s1     1     50\n</code></pre>\n\n<p>Then, make sure it fits:</p>\n\n<pre><code>tidy['fits'] = (tidy['min'] &lt; tidy.value) &amp; (tidy.value &lt; tidy['max'])\n</code></pre>\n\n<p>Yields this sort of DataFrame (truncated):</p>\n\n<pre><code>   sample  time  value  min  max   fits\n0      s1     0     50   30  110   True\n1      s2     0    120   30  110  False\n2      s3     0     30   30  110  False\n3      s4     0     10   30  110  False\n4      s5     0     55   30  110   True\n5      s1     1     50   25  105   True\n6      s2     1    110   25  105  False\n7      s3     1     70   25  105   True\n</code></pre>\n\n<p>If you want only the ones where time is in [2, 4], then subset the tidy DataFrame to that set (e.g. <code>tidy.query('2 &lt;= time &lt;= 4', inplace=True)</code>). If you want to use this to drop samples, then aggregate it from there and merge back to your original set, then do you subset command.</p>\n"}], "owner": {"reputation": 49, "user_id": 10162667, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-6kl0Q9B28Zw/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qmYxX2tH8LViYoLWw8U59ufaH4-Q/mo/photo.jpg?sz=128", "display_name": "js16", "link": "https://stackoverflow.com/users/10162667/js16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1565219490, "creation_date": 1565209091, "last_edit_date": 1565219490, "question_id": 57401767, "link": "https://stackoverflow.com/questions/57401767/assigning-new-column-value-to-data-frame-based-on-if-time-series-data-matches-fu", "title": "Assigning new column value to data frame based on if time series data matches functional constraint", "body": "<p>I have the time series of a set of data for different samples. I would like to add a new column stating if the sample falls within a minimum and maximum constraint. If it does, I will assign the value 1 to the column, otherwise 0.</p>\n\n<p>The example data frame I am using is below. The minimum constraint has the form y=-5t+30 and the maximum constraint has the form y=-5t+110. I would like to test the samples between time=2 and time=4.  </p>\n\n<p>I have thought to use np.where() to check each column beginning at 'time=2' and to 'time=4', but I am unsure how to loop through the data frame and unsure how to specify the time while looping through. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nex_data=[['s1',50,50,50,50,50,50],['s2',120,110,100,90,80,70],['s3',30,70,110,70,30,10],['s4',10,30,70,110,70,30],['s5',55,30,20,15,5,0]]\ndf=pd.DataFrame(ex_data,columns=['sample','time=0','time=1','time=2','time=3','time=4','time=5'])\n\n</code></pre>\n\n<p>I expect the new column labeled success to be 1,0,0,0,0 for each respective row.</p>\n\n<hr>\n\n<p>Edit 1:\nPerhaps I was not specific enough. I would like the new column to be 1 if all the time steps match the constraint, otherwise 0.</p>\n\n<hr>\n\n<p>Edit 2:</p>\n\n<p>I was able to come up with the following solution. </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>    def checking(s):\n        mincon=[20,15,10]\n        maxcon=[100,95,90]\n        val=s.iloc[3:6]\n        val=val.values\n        for i in range(len(val)):\n            if (val[i]&lt;=mincon[i]) | (val[i]&gt;=maxcon[i]):\n                return 0\n        return 1\n\n    ex_data=[['s1',50,50,50,50,50,50],['s2',120,110,100,90,80,70], \n    ['s3',30,70,110,70,30,10],['s4',10,30,70,110,70,30],['s5',55,30,20,15,5,0]]\n    df=pd.DataFrame(ex_data,columns= \n    ['sample','time=0','time=1','time=2','time=3','time=4','time=5'])\n    df\n\n    df['matches constraint?']=df.apply(checking,axis=1)\n    df\n</code></pre>\n\n<p>I am not sure how to run this code on here, but it outputs what I want. Does anyone have suggestions for how I can speed this up when applying it to a muhc larger data set?</p>\n"}]