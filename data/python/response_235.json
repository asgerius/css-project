[{"tags": ["python", "cookies", "python-requests"], "comments": [{"owner": {"reputation": 1018, "user_id": 2041983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68f221a3f7ec48dafb0eae45d932fae?s=128&d=identicon&r=PG", "display_name": "Paula Thomas", "link": "https://stackoverflow.com/users/2041983/paula-thomas"}, "edited": false, "score": 0, "creation_date": 1562804884, "post_id": 56980025, "comment_id": 100496128, "body": "Hmmm puzzled as to what your problem is as when I tried that code I got {&#39;SESSION_1&#39;: &#39;wf_flowId%3D%3D%3Daccount.login%7Estage%3D%3D%3D3%7EflowId%&zwnj;&#8203;3D%3D%3Daccount.logi&zwnj;&#8203;n&#39;} which seems to match the desired pattern."}, {"owner": {"reputation": 55, "user_id": 8069321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba37cf30a61eef70fcc9be1f27b11ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Awais", "link": "https://stackoverflow.com/users/8069321/awais"}, "reply_to_user": {"reputation": 1018, "user_id": 2041983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a68f221a3f7ec48dafb0eae45d932fae?s=128&d=identicon&r=PG", "display_name": "Paula Thomas", "link": "https://stackoverflow.com/users/2041983/paula-thomas"}, "edited": false, "score": 0, "creation_date": 1562805056, "post_id": 56980025, "comment_id": 100496171, "body": "Ah I see what you mean. That&#39;s the cookie being received, when I intercept the traffic on my network it shows their are cookies sent. I need those specific cookies that are being sent with the request."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 8069321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba37cf30a61eef70fcc9be1f27b11ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Awais", "link": "https://stackoverflow.com/users/8069321/awais"}, "edited": false, "score": 0, "creation_date": 1562871141, "post_id": 56982168, "comment_id": 100525422, "body": "When I use fiddler to intercept the traffic this is what&#39;s shown when I enter the URL.  There are more cookies that are being sent in the request. <a href=\"https://image.prntscr.com/image/OgyEnQu8Q0OnIkub7N6Kuw.png\" rel=\"nofollow noreferrer\">image.prntscr.com/image/OgyEnQu8Q0OnIkub7N6Kuw.png</a>"}], "tags": [], "owner": {"reputation": 19, "user_id": 11673235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/999cc534a7ff8ddd86ca7b96316b3470?s=128&d=identicon&r=PG&f=1", "display_name": "05k001", "link": "https://stackoverflow.com/users/11673235/05k001"}, "is_accepted": false, "score": 0, "last_activity_date": 1562823048, "creation_date": 1562823048, "answer_id": 56982168, "question_id": 56980025, "link": "https://stackoverflow.com/questions/56980025/how-do-i-view-cookies-sent-in-python/56982168#56982168", "title": "how do I view cookies sent in python", "body": "<p>So the way you get cookies from the response with python requests is with the cookie jar.</p>\n\n<pre><code>    &gt;&gt;&gt; import requests\n&gt;&gt;&gt; URL = 'https://secure.net.wwe.com/enterworkflow.do?flowId=account.login'\n&gt;&gt;&gt;\n&gt;&gt;&gt; Send = requests.get(URL)\n&gt;&gt;&gt; Send.cookies\n&lt;RequestsCookieJar[Cookie(version=0, name='SESSION_1', value='wf_flowId%3D%3D%3Daccount.login%7Estage%3D%3D%3D3%7EflowId%3D%3D%3Daccount.login', port=None, port_specified=False, domain='.wwe.com', domain_specified=True, domain_initial_dot=True, path='/', path_specified=True, secure=False, expires=None, discard=True, comment=None, comment_url=None, rest={}, rfc2109=False)]&gt;\n</code></pre>\n\n<p>To convert this response to a dict you can use the below method</p>\n\n<pre><code>&gt;&gt;&gt; requests.utils.dict_from_cookiejar(Send.cookies)\n{'SESSION_1': 'wf_flowId%3D%3D%3Daccount.login%7Estage%3D%3D%3D3%7EflowId%3D%3D%3Daccount.login'}\n</code></pre>\n\n<p>But you asked about what cookies are sent with your request...This is perplexing so I decided to dive in and see what I could find. </p>\n\n<p>You can see if python has any cookies in the cookiejar by creating a session and calling the cookiejar method.</p>\n\n<pre><code>&gt;&gt;&gt; session = requests.Session()\n&gt;&gt;&gt; session.cookies\n&lt;RequestsCookieJar[]&gt; //No Cookies?\n&gt;&gt;&gt; session.get(URL)\n   &lt;Response [200]&gt;\n&gt;&gt;&gt; requests.utils.dict_from_cookiejar(session.cookies)\n{'SESSION_1': 'wf_flowId%3D%3D%3Daccount.login%7Estage%3D%3D%3D3%7EflowId%3D%3D%3Daccount.login'} //Cookies!\n</code></pre>\n\n<p>or just calling the cookiejar</p>\n\n<pre><code>&gt;&gt;&gt; print requests.cookies.RequestsCookieJar()\n&lt;RequestsCookieJar[]&gt;\n</code></pre>\n\n<p>So this was enough proof for me that no cookies were sent. AFAIK, cookies wont get sent with requests.get unless you explicitly set them. To prove this, I ran your request thru Burp Suite. </p>\n\n<pre><code>&gt;&gt;&gt; http = \"http://127.0.0.1:8080\"\n&gt;&gt;&gt; https = \"https://127.0.0.1:8080\"\n&gt;&gt;&gt; ftp = \"https://127.0.0.1:8080\"\n&gt;&gt;&gt; proxy_dict = {\n...   \"http\": http,\n...   \"https\": https,\n...   \"ftp\": ftp\n... }\n&gt;&gt;&gt; Send = requests.get(URL, proxies=proxy_dict, verify=False)\n</code></pre>\n\n<p>and this is what the request looks like in Burp</p>\n\n<p><a href=\"https://i.stack.imgur.com/wcj0i.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wcj0i.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 55, "user_id": 8069321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba37cf30a61eef70fcc9be1f27b11ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Awais", "link": "https://stackoverflow.com/users/8069321/awais"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562823048, "creation_date": 1562803085, "last_edit_date": 1562803302, "question_id": 56980025, "link": "https://stackoverflow.com/questions/56980025/how-do-i-view-cookies-sent-in-python", "title": "how do I view cookies sent in python", "body": "<p>I want to be able to read the cookies that are being sent from a request so I can import them.</p>\n\n<pre><code>import requests\nURL = 'https://secure.net.wwe.com/enterworkflow.do?flowId=account.login'\n\nSend = requests.get(URL)\n\nprint(Send.cookies.get_dict())\n\nDesired Output:\n&gt;&gt;&gt;&gt; cookies = {'test':'likethis'}\n\n</code></pre>\n\n<p>I understand how to view set cookies but there is no clear explanation on how to view the cookies that are being sent along with the request.</p>\n"}, {"tags": ["python", "api"], "answers": [{"tags": [], "owner": {"reputation": 105, "user_id": 9825679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfea17d619e2d86cf38f6541698fb54?s=128&d=identicon&r=PG&f=1", "display_name": "Siddharth Kulkarni", "link": "https://stackoverflow.com/users/9825679/siddharth-kulkarni"}, "is_accepted": false, "score": 0, "last_activity_date": 1564744657, "creation_date": 1564744657, "answer_id": 57325434, "question_id": 56979976, "link": "https://stackoverflow.com/questions/56979976/eia-api-how-to-request-data-behind-a-proxy/57325434#57325434", "title": "EIA API : How to request data behind a proxy", "body": "<p>The following code worked</p>\n\n<pre><code>import os\nproxy = 'http://xx.xx.xx.xx:xx'\nos.environ['http_proxy'] = proxy\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 9825679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3dfea17d619e2d86cf38f6541698fb54?s=128&d=identicon&r=PG&f=1", "display_name": "Siddharth Kulkarni", "link": "https://stackoverflow.com/users/9825679/siddharth-kulkarni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564745119, "creation_date": 1562802601, "last_edit_date": 1564745119, "question_id": 56979976, "link": "https://stackoverflow.com/questions/56979976/eia-api-how-to-request-data-behind-a-proxy", "title": "EIA API : How to request data behind a proxy", "body": "<p>I am securing some prices via EIA API, which works perfectly on my personal laptop but when I am at office I would need to use proxy and I am somehow not able to write a code to include proxy. The syntax doesn't recognize the word proxy.</p>\n\n<p>I have tried calling proxies after API search name but it doesn't work. </p>\n\n<pre><code>   import eia\n   import pandas as pd\n   import os\n\n   http_proxy  = \"my proxy\"\n\n   proxyDict = {\"http\" : http_proxy, \"https\" : https_proxy}\n\n   api_key = \"mykey\"\n   api = eia.API(api_key)\n   series_storage = \n   api.data_by_series(series='NG.NW2_EPG0_SWO_R48_BCF.W' , proxies=proxyDict)\n   df1 = pd.DataFrame(series_storage)\n   df1.reset_index(inplace=True)\n   df1.columns = ['Date', 'Value']\n   df1['Date'] = pd.to_datetime(df1['Date'].str[:-3], format='%Y %m%d')\n</code></pre>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1562802751, "post_id": 56979955, "comment_id": 100495692, "body": "Can you be more explicit with the content of the file? Does it appear to be all one line? Or else...what&#39;s the actual formatting?"}, {"owner": {"reputation": 11, "user_id": 11767423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f95c753819f99762a536cb691698831?s=128&d=identicon&r=PG&f=1", "display_name": "orange", "link": "https://stackoverflow.com/users/11767423/orange"}, "reply_to_user": {"reputation": 44495, "user_id": 3058609, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/2c0357556707713572abbf637a907ef9?s=128&d=identicon&r=PG&f=1", "display_name": "Adam Smith", "link": "https://stackoverflow.com/users/3058609/adam-smith"}, "edited": false, "score": 0, "creation_date": 1562803104, "post_id": 56979955, "comment_id": 100495766, "body": "Its data in multiple different rows. If this provides any clarification, it was in a .fits file, where there are a maximum number of allowed characters per row. If youre putting something in there with more characters than that, part of the data gets put in one row, and the rest gets put in the next. So it&#39;s filling up one row to the max character limit, then starting a new row with the rest of the data, and so on. Baisaclly, one set of data is split over two rows, and new sets of data start at where the last set ended. Its something like 90 actual rows, with about 100 sets of data."}, {"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1562804761, "post_id": 56979955, "comment_id": 100496102, "body": "Oh, if it&#39;s in a defined file format, find a module that can parse the file format. I&#39;m not familiar with FITS files myself, but it looks like <a href=\"https://docs.astropy.org/en/stable/io/fits/\" rel=\"nofollow noreferrer\"><code>astropy.io.fits.open</code></a> could do. (I found it <a href=\"https://python4astronomers.github.io/astropy/fits.html\" rel=\"nofollow noreferrer\">here</a>.)"}], "owner": {"reputation": 11, "user_id": 11767423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0f95c753819f99762a536cb691698831?s=128&d=identicon&r=PG&f=1", "display_name": "orange", "link": "https://stackoverflow.com/users/11767423/orange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562804579, "creation_date": 1562802466, "last_edit_date": 1562804579, "question_id": 56979955, "link": "https://stackoverflow.com/questions/56979955/arranging-extremely-poorly-formatted-data-into-neat-rows-and-columns", "title": "Arranging extremely poorly formatted data into neat rows and columns", "body": "<p>I'm working in python, and I got some data to work with recently, that is extremely poorly formatted. Its something like this: </p>\n\n<pre><code>arcs.f row1 = \"\" 1 1 2 3 4 4 \"\" row2 = \"\"\n\" 1 1 2 3 4 4 \"\"\" row3 = \"1 1 2 3 4 \" r\now4 = \" 1 1 2 3 4 4 \" row5 = \"1 1 2 3 4 \n</code></pre>\n\n<p>and so on. It seems all of the rows have been shifted out a few characters, so that the data that should be on one row is actually spread across two different rows. I'm working with multiple different files, all with the same problem, each with at least a hundred rows like this. </p>\n\n<p>I would like to get it to look something like this: </p>\n\n<pre><code>row1 = \" 1 1 2 3 4 4 \"\nrow2 = \" 1 1 2 3 4 4 \"\nrow3 = \" 1 1 2 3 4 4 \"\nrow4 = \" 1 1 2 3 4 4 \"\nrow5 = \" 1 1 2 3 4 4 \"\n</code></pre>\n\n<p>I don't really care about having the <code>row# =</code> part or the quotation marks. As long as it starts where it should and all the numbers are in the correct order. </p>\n\n<p>What I've been doing so far is putting all of the data into a pandas data frame with one row and multiple columns. Each column contains one row of the data, as shown in its original formatting. I then exported the data into a .txt file. My idea was then to read the data back into python using <code>read_csv()</code>, and setting the delimiter to separate the data into columns that contain only the data from what should be in one row. Then I could mess around with it to get it into the format I had shown above. </p>\n\n<p>I did the first part successfully, however I'm not able to read the data back in to python successfully. This is the code I tried: </p>\n\n<pre><code>row = pd.read_csv(r'filename.txt', sep = \"spec%s | spec%s%s | spec%s%s\", engine='python')\n</code></pre>\n\n<p>I've also tried using <code>%d</code> instead of <code>%s</code> and just having one delimiter, such as </p>\n\n<pre><code>sep = spec%s\n</code></pre>\n\n<p>and nothing seems to work. </p>\n\n<p>It's only reading the data in as one row and one column, not as anything else. Is there another delimiter that I could use for this, or is there a better way to be doing this entirely? I also tried putting the entire mess into one massive string, and sorting it from there. The data frame was the only way I could think to do this, and it still leaves me with the same problem as put here. Thank you!</p>\n"}, {"tags": ["python", "python-3.x", "loops", "dictionary", "for-loop"], "comments": [{"owner": {"reputation": 15430, "user_id": 4518341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eVuAv.png?s=128&g=1", "display_name": "wjandrea", "link": "https://stackoverflow.com/users/4518341/wjandrea"}, "edited": false, "score": 0, "creation_date": 1562804155, "post_id": 56979947, "comment_id": 100495990, "body": "Please ask only one question at once. Also if you&#39;re asking about <i>output</i>, make sure to include <i>input</i>."}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 11235079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a660d35b20f61875804fbd86748e7eb6?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/11235079/mike"}, "edited": false, "score": 0, "creation_date": 1562802602, "post_id": 56979964, "comment_id": 100495672, "body": "Ohh... its a set... That makes so much sense. How do I append to a set?"}, {"owner": {"reputation": 35, "user_id": 11235079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a660d35b20f61875804fbd86748e7eb6?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/11235079/mike"}, "edited": false, "score": 0, "creation_date": 1562802801, "post_id": 56979964, "comment_id": 100495706, "body": "So to define an empty set is it <code>s = {}</code>? Then how do you define an empty dictionary?"}, {"owner": {"reputation": 301, "user_id": 11195850, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-69qW1AjA5gs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6vMDBPD8mkSMuPmb_H5zixIX37g/mo/photo.jpg?sz=128", "display_name": "new-dev-123", "link": "https://stackoverflow.com/users/11195850/new-dev-123"}, "edited": false, "score": 0, "creation_date": 1562802868, "post_id": 56979964, "comment_id": 100495714, "body": "that&#39;s an empty dictionary. you have to do <code>set()</code> to define an empty set"}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1562802888, "post_id": 56979964, "comment_id": 100495718, "body": "<code>s = set()</code>. For <code>dict</code> : <code>d = {}</code> is the same as <code>d = dict()</code>"}, {"owner": {"reputation": 35, "user_id": 11235079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a660d35b20f61875804fbd86748e7eb6?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/11235079/mike"}, "edited": false, "score": 0, "creation_date": 1562803168, "post_id": 56979964, "comment_id": 100495779, "body": "@JacobIRR last question before I accept the answer. when <code>answer = {&#39;A&#39;: {1, 2, 3, 4}}</code>. How do I iterate over <code>A</code>&#39;s set?"}], "tags": [], "owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "is_accepted": true, "score": 1, "last_activity_date": 1562803239, "last_edit_date": 1562803239, "creation_date": 1562802527, "answer_id": 56979964, "question_id": 56979947, "link": "https://stackoverflow.com/questions/56979947/how-to-append-a-dictionary-to-key-in-another-dictionary/56979964#56979964", "title": "How to append a dictionary to key in another dictionary?", "body": "<p><code>{1,2,3,4}</code> is a <a href=\"https://www.w3schools.com/python/python_sets.asp\" rel=\"nofollow noreferrer\"><code>set</code></a>, not a <code>dict</code>.</p>\n\n<p>You can add the <code>A</code> key and its value (the <code>set</code>) like so:</p>\n\n<pre><code>answer = {}\nanswer[\"A\"] = {1,2,3,4}\n</code></pre>\n\n<p>If you have a <code>set</code>, you can <code>add</code>:</p>\n\n<pre><code>&gt;&gt;&gt; s = {1,2}\n&gt;&gt;&gt; s\n{1, 2}\n&gt;&gt;&gt; s.add(3)\n&gt;&gt;&gt; s\n{1, 2, 3}\n&gt;&gt;&gt; s.add(4)\n&gt;&gt;&gt; s\n{1, 2, 3, 4}\n</code></pre>\n\n<p>To iterate:</p>\n\n<pre><code>&gt;&gt;&gt; for item in answer['A']:\n...   print(item)\n...\n1\n2\n3\n4\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 301, "user_id": 11195850, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-69qW1AjA5gs/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd6vMDBPD8mkSMuPmb_H5zixIX37g/mo/photo.jpg?sz=128", "display_name": "new-dev-123", "link": "https://stackoverflow.com/users/11195850/new-dev-123"}, "is_accepted": false, "score": 0, "last_activity_date": 1562802811, "creation_date": 1562802811, "answer_id": 56979995, "question_id": 56979947, "link": "https://stackoverflow.com/questions/56979947/how-to-append-a-dictionary-to-key-in-another-dictionary/56979995#56979995", "title": "How to append a dictionary to key in another dictionary?", "body": "<p>If you want to build a dictionary like that given a list of keys and a set you can do:</p>\n\n<pre><code>list_of_keys = [\"A\", \"B\", \"C\"]\nsome_set = {1,2,3,4}\nmy_dict = {key: some_set for key in list_of_keys}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6771206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QyKD9.jpg?s=128&g=1", "display_name": "AnimeshS", "link": "https://stackoverflow.com/users/6771206/animeshs"}, "is_accepted": false, "score": 0, "last_activity_date": 1562807369, "creation_date": 1562807369, "answer_id": 56980424, "question_id": 56979947, "link": "https://stackoverflow.com/questions/56979947/how-to-append-a-dictionary-to-key-in-another-dictionary/56980424#56980424", "title": "How to append a dictionary to key in another dictionary?", "body": "<p>Is there a specific reason why you want to use dictionary and append values into it?</p>\n\n<p>You can use a dictionaries of list:</p>\n\n<pre><code># Outer Loop\n  try: answer[i] # i = 'A', 'B'\n  except KeyError: answer[i] = []\n\n  # Inner Loop\n    answer[i].append(j) # j = 1, 2, 3, 4\n\nprint(answer) # {'A':[1,2,2,3,4],'B':[1,1,2,3,4]}\n\n</code></pre>\n\n<p>If you do not want duplicates then you can use a set instead of a list.</p>\n\n<pre><code># Outer Loop\n  try: answer[i] # i = 'A', 'B'\n  except KeyError: answer[i] = set()\n\n  # Inner Loop\n    answer[i].add(j) # j = 1, 2, 3, 4\n\nprint(answer) # {'A':(1,2,3,4),'B':(1,2,3,4)}\n\n</code></pre>\n\n<p>Hope this helps, Cheers!</p>\n"}], "owner": {"reputation": 35, "user_id": 11235079, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a660d35b20f61875804fbd86748e7eb6?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/11235079/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "accepted_answer_id": 56979964, "answer_count": 3, "score": -3, "last_activity_date": 1562807369, "creation_date": 1562802427, "question_id": 56979947, "link": "https://stackoverflow.com/questions/56979947/how-to-append-a-dictionary-to-key-in-another-dictionary", "title": "How to append a dictionary to key in another dictionary?", "body": "<p>So I want my end output to look like this:</p>\n\n<pre><code>answer = {'A':{1,2,3,4},'B':{1,2,3,4}}\n</code></pre>\n\n<p>How can I do this? I have a few questions though.</p>\n\n<ol>\n<li>How do I make a dictionary without a key pair value. Like <code>{1,2,3,4}</code></li>\n<li>How do I append the <code>{1,2,3,4}</code> to a key (<code>'A'</code>).</li>\n<li>How do I append the <code>A</code> into the main dictionary(<code>answer</code>)</li>\n</ol>\n\n<p>Essentially I am trying to make this bit in a loop <code>'A':{1,2,3,4}</code>. Then outside the loop append it to <code>answer</code>.</p>\n"}, {"tags": ["python", "selenium", "selenium-webdriver"], "comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1562805495, "post_id": 56979923, "comment_id": 100496234, "body": "<a href=\"https://stackoverflow.com/help/how-to-ask\">How to Ask</a> is a pretty good resource to learn how to write a good Stack post. Though you&#39;ve already got the basics: You&#39;re telling us what you want to do, showing a minimal snippet. The only issues I have are that you&#39;re not saying what&#39;s really happening (in contrast with what you want to happen), and that you don&#39;t explain why that Q/A you linked doesn&#39;t work for you."}, {"owner": {"reputation": 3, "user_id": 11767448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb37e5a1446926ba681f52b5f821a4ac?s=128&d=identicon&r=PG&f=1", "display_name": "zybe", "link": "https://stackoverflow.com/users/11767448/zybe"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1562806473, "post_id": 56979923, "comment_id": 100496403, "body": "This part is the only relevant piece of code. To clarify: What is happening is that I&#39;m finding the relevant snippet and then trying to edit &quot;test&quot; into it to see if it will work.  Unsure why it hasn&#39;t worked, no errors and I&#39;m rather new to this :&gt;"}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1562807598, "post_id": 56979923, "comment_id": 100496594, "body": "It&#39;s the only relevant piece of code <i>as far as you know</i>, yes. And you, like the rest of us, can make mistakes. Please <a href=\"https://stackoverflow.com/posts/56979923/edit\">edit</a> your question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. If you&#39;re lucky, you&#39;ll even find the bug in the process and be able to <a href=\"https://stackoverflow.com/help/self-answer\">self-answer</a>."}, {"owner": {"reputation": 3, "user_id": 11767448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb37e5a1446926ba681f52b5f821a4ac?s=128&d=identicon&r=PG&f=1", "display_name": "zybe", "link": "https://stackoverflow.com/users/11767448/zybe"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1562808098, "post_id": 56979923, "comment_id": 100496664, "body": "Edited, still no fix after messing around with it for a while longer."}, {"owner": {"reputation": 1885, "user_id": 5319738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f84315d92eb583e0744ab6990ca65b?s=128&d=identicon&r=PG&f=1", "display_name": "Kamal", "link": "https://stackoverflow.com/users/5319738/kamal"}, "edited": false, "score": 0, "creation_date": 1562809398, "post_id": 56979923, "comment_id": 100496901, "body": "<code>execute_script</code> is not a method of <code>WebElement</code> (variable <code>editable</code> in your code), it is a method of <code>WebDriver</code> (variable <code>main_browser</code> in your code). Are you sure you are not getting any errors?"}, {"owner": {"reputation": 3, "user_id": 11767448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb37e5a1446926ba681f52b5f821a4ac?s=128&d=identicon&r=PG&f=1", "display_name": "zybe", "link": "https://stackoverflow.com/users/11767448/zybe"}, "reply_to_user": {"reputation": 1885, "user_id": 5319738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f84315d92eb583e0744ab6990ca65b?s=128&d=identicon&r=PG&f=1", "display_name": "Kamal", "link": "https://stackoverflow.com/users/5319738/kamal"}, "edited": false, "score": 0, "creation_date": 1562809653, "post_id": 56979923, "comment_id": 100496951, "body": "Fixed that part, now replaces the entire page with &quot;test&quot; instead of editing that specific element. @Kamal"}, {"owner": {"reputation": 1885, "user_id": 5319738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f84315d92eb583e0744ab6990ca65b?s=128&d=identicon&r=PG&f=1", "display_name": "Kamal", "link": "https://stackoverflow.com/users/5319738/kamal"}, "edited": false, "score": 0, "creation_date": 1562810227, "post_id": 56979923, "comment_id": 100497027, "body": "@Billy, Yes, <code>document.body</code> refers to your entire page. If you want to modify a single element then you need to use command as shown <a href=\"https://stackoverflow.com/a/35926114/5319738\">here</a> which you found."}, {"owner": {"reputation": 3, "user_id": 11767448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb37e5a1446926ba681f52b5f821a4ac?s=128&d=identicon&r=PG&f=1", "display_name": "zybe", "link": "https://stackoverflow.com/users/11767448/zybe"}, "reply_to_user": {"reputation": 1885, "user_id": 5319738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f84315d92eb583e0744ab6990ca65b?s=128&d=identicon&r=PG&f=1", "display_name": "Kamal", "link": "https://stackoverflow.com/users/5319738/kamal"}, "edited": false, "score": 0, "creation_date": 1562810918, "post_id": 56979923, "comment_id": 100497142, "body": "@Kamal ok, managed to get it to write &lt;p&gt;test&gt;&lt;/p&gt;, the issue now is, the actual input is inside of an iframe. see here: <a href=\"https://i.imgur.com/BDLkMza.png\" rel=\"nofollow noreferrer\">i.imgur.com/BDLkMza.png</a>, how would I make it add this into the iframe document rather than the main document? (python: <a href=\"https://i.imgur.com/6W1ULKe.png\" rel=\"nofollow noreferrer\">i.imgur.com/6W1ULKe.png</a>)"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1562811710, "post_id": 56979923, "comment_id": 100497289, "body": "If I understand correctly, you are trying to insert a <code>paragraph</code> into iframe document, correct? If yes, do you have more than 1 iframe in that page?"}, {"owner": {"reputation": 3, "user_id": 11767448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb37e5a1446926ba681f52b5f821a4ac?s=128&d=identicon&r=PG&f=1", "display_name": "zybe", "link": "https://stackoverflow.com/users/11767448/zybe"}, "reply_to_user": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1562812150, "post_id": 56979923, "comment_id": 100497366, "body": "@supputuri Yep, this is the only iframe on the page :p"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11767448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb37e5a1446926ba681f52b5f821a4ac?s=128&d=identicon&r=PG&f=1", "display_name": "zybe", "link": "https://stackoverflow.com/users/11767448/zybe"}, "edited": false, "score": 0, "creation_date": 1562813107, "post_id": 56980908, "comment_id": 100497541, "body": "Took slight modification (replacing &#39;driver&#39; with my driver variable) but worked!  Thank you &lt;3"}, {"owner": {"reputation": 3, "user_id": 11767448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb37e5a1446926ba681f52b5f821a4ac?s=128&d=identicon&r=PG&f=1", "display_name": "zybe", "link": "https://stackoverflow.com/users/11767448/zybe"}, "edited": false, "score": 0, "creation_date": 1562813544, "post_id": 56980908, "comment_id": 100497614, "body": "how would I exit that frame again?"}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 3, "user_id": 11767448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb37e5a1446926ba681f52b5f821a4ac?s=128&d=identicon&r=PG&f=1", "display_name": "zybe", "link": "https://stackoverflow.com/users/11767448/zybe"}, "edited": false, "score": 0, "creation_date": 1562813657, "post_id": 56980908, "comment_id": 100497631, "body": "<code>driver.switch_to.default_content()</code> will bring you back to the main window."}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "reply_to_user": {"reputation": 3, "user_id": 11767448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb37e5a1446926ba681f52b5f821a4ac?s=128&d=identicon&r=PG&f=1", "display_name": "zybe", "link": "https://stackoverflow.com/users/11767448/zybe"}, "edited": false, "score": 0, "creation_date": 1562813792, "post_id": 56980908, "comment_id": 100497650, "body": "I feel the right way to add the paragraph is <code>driver.execute_script(&quot;var paragraph = document.createElement(&#39;p&#39;); paragraph.textContent = arguments[1]; arguments[0].appendChild(paragraph);&quot;, driver.find_element_by_tag_name(&#39;body&#39;),comment)</code> after switching to the iframe."}], "tags": [], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "is_accepted": true, "score": 1, "last_activity_date": 1562812589, "creation_date": 1562812589, "answer_id": 56980908, "question_id": 56979923, "link": "https://stackoverflow.com/questions/56979923/inserting-text-into-a-non-form-object/56980908#56980908", "title": "Inserting text into a non-form object", "body": "<p>Can you please try this below piece of code.</p>\n\n<pre><code> iframe = driver.find_elements_by_tag_name(\"iframe\")[0]\n driver.switch_to.frame(iframe)\n driver.execute_script(\"document.body.innerHTML = '&lt;p&gt;test&lt;/p&gt;'\")\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11767448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb37e5a1446926ba681f52b5f821a4ac?s=128&d=identicon&r=PG&f=1", "display_name": "zybe", "link": "https://stackoverflow.com/users/11767448/zybe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 56980908, "answer_count": 1, "score": 0, "last_activity_date": 1562812589, "creation_date": 1562802283, "last_edit_date": 1562812459, "question_id": 56979923, "link": "https://stackoverflow.com/questions/56979923/inserting-text-into-a-non-form-object", "title": "Inserting text into a non-form object", "body": "<p>(this is my first ever selenium script and first ever stack post, not fully aware how to make this decently :P)</p>\n\n<p>I'm trying to insert a variable (number) into something which doesn't appear to be a form object (instead a body).</p>\n\n<p>When editing using inspect element, I can edit the body's html and it will allow me to post this edited html as a new forum post. So that could be a potential method of inserting the variable into the html.</p>\n\n<p>Youtube example of code working:\n<a href=\"https://www.youtube.com/watch?v=_6VqrMOMBeI\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=_6VqrMOMBeI</a></p>\n\n<p>Youtube example of editing body code manually and posting\n<a href=\"https://youtu.be/YrT88IV-obg\" rel=\"nofollow noreferrer\">https://youtu.be/YrT88IV-obg</a>:</p>\n\n<p>Website link (if you want to take a look)\n<a href=\"https://camelotkingdom.com\" rel=\"nofollow noreferrer\">https://camelotkingdom.com</a></p>\n\n<p>I've tried doing research on stack to see if I could find other examples of people fixing this issue.</p>\n\n<p>This is the main thread I've found:\n<a href=\"https://stackoverflow.com/questions/35922259/modify-innerhtml-using-selenium\">Modify innerHTML using Selenium</a></p>\n\n<p>Python Code:</p>\n\n<pre><code>loginpage = 'http://camelotkingdom.com/login'\n# login page for the website (login code redacted)\n\nthread = 'http://camelotkingdom.com/threads/count.22/'\n# counting thread link\n\nmain_browser = webdriver.Chrome(\"D:\\AutoForum\\extras\\chromedriver.exe\")\n# chrome driver variable\n\n# below code collects the latest count number (based on post number)\ndef getlatestnumber():\n    main_browser.get(thread)\n    # goes to the thread page\n\n    time.sleep(2)\n    # waiting for page to fully load\n\n    links = main_browser.find_elements_by_partial_link_text('#')\n    for link in links:\n        a = link.get_attribute(\"text\")\n        a = a.replace('#', '')\n        a = int(a)\n    # grabs the current count number\n\n    global currentnum\n    currentnum = a + 1\n    # sets the next count number\n\n    print(\"[DEBUG] Next count is:\",currentnum)\n\ndef post_main():\n    print(\"[DEBUG] Number posting:\",currentnum)\n\n    comment = \"test\"\n    # text to enter into the post creator iframe\n\n    editable = main_browser.find_element_by_css_selector(\"iframe\")\n    editable.click()\n    # finding and clicking the post creator iframe\n\n    element = main_browser.execute_script(\"var ele=arguments[0]; ele.innerHTML = '&lt;p&gt;\" + comment +  \"&lt;/p&gt;';\", editable);\n    # editing the iframe code to include the variable in a paragraph tag.\n\n\n\n #main_browser.find_element_by_xpath(\"/html/body/div[2]/div/div[2]/div/div/div[2]/div[4]/form/div[2]/input[2]\").click()\n\n</code></pre>\n\n<p>Website body code</p>\n\n<pre><code>&lt;body contenteditable=\"true\" dir=\"LTR\" style=\"overflow-y: hidden; min-height: 99px;\"&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;&lt;/body&gt;\n</code></pre>\n\n<p>Full code:\nview-source:<a href=\"http://camelot.treasuremc.net/threads/count.22/\" rel=\"nofollow noreferrer\">http://camelot.treasuremc.net/threads/count.22/</a></p>\n\n<p>I expect the code to be posting the variable to the forum thread.</p>\n"}, {"tags": ["python", "tensorflow"], "answers": [{"comments": [{"owner": {"reputation": 522, "user_id": 10798503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-W-6ylYa46f0/AAAAAAAAAAI/AAAAAAAAAG4/FBbH0TQie8k/photo.jpg?sz=128", "display_name": "yarin Cohen", "link": "https://stackoverflow.com/users/10798503/yarin-cohen"}, "edited": false, "score": 0, "creation_date": 1562873177, "post_id": 56980534, "comment_id": 100526241, "body": "if I do that It just prints &#39;[200.]&#39;"}, {"owner": {"reputation": 15373, "user_id": 1667256, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a9deb943177413468eb294d4a3b3e16?s=128&d=identicon&r=PG", "display_name": "greeness", "link": "https://stackoverflow.com/users/1667256/greeness"}, "reply_to_user": {"reputation": 522, "user_id": 10798503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-W-6ylYa46f0/AAAAAAAAAAI/AAAAAAAAAG4/FBbH0TQie8k/photo.jpg?sz=128", "display_name": "yarin Cohen", "link": "https://stackoverflow.com/users/10798503/yarin-cohen"}, "edited": false, "score": 0, "creation_date": 1562873742, "post_id": 56980534, "comment_id": 100526455, "body": "Can you clarify what you mean by &quot; the percentages value of predicted object &quot;? Is it the prediction <code>scores</code>?"}, {"owner": {"reputation": 522, "user_id": 10798503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-W-6ylYa46f0/AAAAAAAAAAI/AAAAAAAAAG4/FBbH0TQie8k/photo.jpg?sz=128", "display_name": "yarin Cohen", "link": "https://stackoverflow.com/users/10798503/yarin-cohen"}, "edited": false, "score": 0, "creation_date": 1562873798, "post_id": 56980534, "comment_id": 100526477, "body": "Like when I turn it on, It shows the object with the value of predicted object for example 99% I want to print that, i can add a photo if it would help"}, {"owner": {"reputation": 15373, "user_id": 1667256, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a9deb943177413468eb294d4a3b3e16?s=128&d=identicon&r=PG", "display_name": "greeness", "link": "https://stackoverflow.com/users/1667256/greeness"}, "reply_to_user": {"reputation": 522, "user_id": 10798503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-W-6ylYa46f0/AAAAAAAAAAI/AAAAAAAAAG4/FBbH0TQie8k/photo.jpg?sz=128", "display_name": "yarin Cohen", "link": "https://stackoverflow.com/users/10798503/yarin-cohen"}, "edited": false, "score": 0, "creation_date": 1562874917, "post_id": 56980534, "comment_id": 100526903, "body": "I think that is the <code>scores</code>. Do you want to print out the one named <code>scores</code> inside this 4-tuple <code>(boxes, scores, classes, num)</code>?"}, {"owner": {"reputation": 522, "user_id": 10798503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-W-6ylYa46f0/AAAAAAAAAAI/AAAAAAAAAG4/FBbH0TQie8k/photo.jpg?sz=128", "display_name": "yarin Cohen", "link": "https://stackoverflow.com/users/10798503/yarin-cohen"}, "edited": false, "score": 0, "creation_date": 1562875002, "post_id": 56980534, "comment_id": 100526937, "body": "I did but when I printed it it showed me 2d arrays with numbers I&#39;m thinking maybe its pixels and I need to sum them up to get to 99% but I dont know how."}, {"owner": {"reputation": 15373, "user_id": 1667256, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a9deb943177413468eb294d4a3b3e16?s=128&d=identicon&r=PG", "display_name": "greeness", "link": "https://stackoverflow.com/users/1667256/greeness"}, "reply_to_user": {"reputation": 522, "user_id": 10798503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-W-6ylYa46f0/AAAAAAAAAAI/AAAAAAAAAG4/FBbH0TQie8k/photo.jpg?sz=128", "display_name": "yarin Cohen", "link": "https://stackoverflow.com/users/10798503/yarin-cohen"}, "edited": false, "score": 0, "creation_date": 1562875938, "post_id": 56980534, "comment_id": 100527317, "body": "If you look at this line <a href=\"https://github.com/EdjeElectronics/TensorFlow-Object-Detection-API-Tutorial-Train-Multiple-Objects-Windows-10/blob/master/Object_detection_image.py#L81\" rel=\"nofollow noreferrer\">github.com/EdjeElectronics/&hellip;</a>, it says very clear &quot;# Each score represents level of confidence for each of the objects. # The score is shown on the result image, together with the class label.&quot; Since you said the <code>num_detections</code> is 200, you would get an array with length 200, the <code>scores</code> are paired with <code>classes</code>."}], "tags": [], "owner": {"reputation": 15373, "user_id": 1667256, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1a9deb943177413468eb294d4a3b3e16?s=128&d=identicon&r=PG", "display_name": "greeness", "link": "https://stackoverflow.com/users/1667256/greeness"}, "is_accepted": false, "score": 1, "last_activity_date": 1562808586, "creation_date": 1562808586, "answer_id": 56980534, "question_id": 56979908, "link": "https://stackoverflow.com/questions/56979908/how-to-get-percentages-value-of-predicted-object-in-tensorflow-object-detection/56980534#56980534", "title": "How to get percentages value of predicted object In Tensorflow Object Detection API", "body": "<p>You only need to evaluate that tensor <code>num_detections</code> in the created <code>session</code> by calling <code>sess.run</code>. The code you linked actually did that for you. </p>\n\n<pre><code># Perform the actual detection by running the model with the image as input\n(boxes, scores, classes, num) = sess.run(\n    [detection_boxes, detection_scores, detection_classes, num_detections],\n    feed_dict={image_tensor: image_expanded})\n</code></pre>\n\n<p>So you could simply print out the value of <code>num</code>.</p>\n"}], "owner": {"reputation": 522, "user_id": 10798503, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-W-6ylYa46f0/AAAAAAAAAAI/AAAAAAAAAG4/FBbH0TQie8k/photo.jpg?sz=128", "display_name": "yarin Cohen", "link": "https://stackoverflow.com/users/10798503/yarin-cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562808586, "creation_date": 1562802102, "last_edit_date": 1562802580, "question_id": 56979908, "link": "https://stackoverflow.com/questions/56979908/how-to-get-percentages-value-of-predicted-object-in-tensorflow-object-detection", "title": "How to get percentages value of predicted object In Tensorflow Object Detection API", "body": "<p>I used this <a href=\"https://github.com/EdjeElectronics/TensorFlow-Object-Detection-API-Tutorial-Train-Multiple-Objects-Windows-10/blob/master/Object_detection_image.py\" rel=\"nofollow noreferrer\">code</a> to display object detector with percentage of predicted value, but the variable <code>num_detections</code> is a <code>TensorVariable</code> such as <code>Tensor(\"num_detections:0\", dtype=float32)</code>. So how can I print the percentage of predicted value?</p>\n\n<p>Before you comment, I know there is a similar question but the answer does not seem to work. It prints <code>Tensor(\"truediv:0\", dtype=float32)</code> and I want the percentages.</p>\n"}, {"tags": ["python"], "answers": [{"tags": [], "owner": {"reputation": 163, "user_id": 3873585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a8785517a232d9d83bce1a2a9ba5930?s=128&d=identicon&r=PG&f=1", "display_name": "blakebjorn", "link": "https://stackoverflow.com/users/3873585/blakebjorn"}, "is_accepted": false, "score": 1, "last_activity_date": 1562802314, "creation_date": 1562802314, "answer_id": 56979931, "question_id": 56979905, "link": "https://stackoverflow.com/questions/56979905/sandboxing-user-defined-python-function/56979931#56979931", "title": "&#39;sandboxing&#39; user defined python function", "body": "<p>Update: I found RestrictedPython and think this is best way to go about it - open to any other suggestions though</p>\n"}], "owner": {"reputation": 163, "user_id": 3873585, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a8785517a232d9d83bce1a2a9ba5930?s=128&d=identicon&r=PG&f=1", "display_name": "blakebjorn", "link": "https://stackoverflow.com/users/3873585/blakebjorn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562802314, "creation_date": 1562802061, "question_id": 56979905, "link": "https://stackoverflow.com/questions/56979905/sandboxing-user-defined-python-function", "title": "&#39;sandboxing&#39; user defined python function", "body": "<p>I'm looking to allow users to define their own functions for use in a program, however, I don't want them to break things - ideally I would like to restrict this to core language functions, maybe the <code>math</code> module</p>\n\n<p>The custom function would be something like this (defined in, say user_function.py, and imported into the application)</p>\n\n<pre><code>def user_function(arg1, arg2, arg3):\n    if arg1 &lt; 2.0:\n        return 5.0\n    if arg2 &gt; 3.0:\n        return 2.0\n    return arg3\n</code></pre>\n\n<p>what i DON'T want them to be able to do is something like this (e.g. gain access to API keys, modify outside variables, make os.system() calls, etc.):</p>\n\n<pre><code>def user_function(arg1, arg2, arg3):\n    with open(\"program_dump.txt\", \"w\") as f:\n        di = dict(globals())\n        di.update(locals())\n        json.dump(di, f)\n    return 2.0\n</code></pre>\n\n<p>Is there a reasonable way to handle this without introducing a huge vulnerability space? or is my best bet to come up with some pseudo markup language and just parse that?</p>\n\n<p>Ideally python 2.7 compatible</p>\n"}, {"tags": ["python", "python-2.7", "optimization", "filesystems"], "answers": [{"tags": [], "owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "is_accepted": true, "score": 1, "last_activity_date": 1562802106, "creation_date": 1562802106, "answer_id": 56979909, "question_id": 56979887, "link": "https://stackoverflow.com/questions/56979887/is-there-way-to-reduce-the-complexity-of-recursively-deleting-files-in-python/56979909#56979909", "title": "Is there way to reduce the complexity of recursively deleting files in Python?", "body": "<p>No, this is linear -- <strong>O(N)</strong> -- on the quantity of <code>files + directories</code> in the structure.  You deal with each of these elements once each.</p>\n\n<p>The nested and sequential loops are merely the mechanics you use to reach each one exactly once.</p>\n"}], "owner": {"reputation": 118, "user_id": 11545802, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sjg1a.jpg?s=128&g=1", "display_name": "bromps", "link": "https://stackoverflow.com/users/11545802/bromps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 56979909, "answer_count": 1, "score": 0, "last_activity_date": 1562802106, "creation_date": 1562801918, "question_id": 56979887, "link": "https://stackoverflow.com/questions/56979887/is-there-way-to-reduce-the-complexity-of-recursively-deleting-files-in-python", "title": "Is there way to reduce the complexity of recursively deleting files in Python?", "body": "<p>I have a solution for deleting files in a given directory and keeping first-generation children directories of the parent while deleting the rest.</p>\n\n<p>For example, given this structure:</p>\n\n<pre><code>parent\n-- child_dir\n---- grandchild_dir\n</code></pre>\n\n<p>After running the function, <code>grandchild_dir</code> is removed with all of its contents but <code>child_dir</code> remains intact.  The problem I have is that the function I am using has a high complexity which I'd like to reduce.</p>\n\n<p>This is for clearing cached Tomcat 8 files where the first-generation subdirectories need to be kept intact due to filesystem constraints.  The cache clearing occurs before the Tomcat server starts (i.e., when it is in a stopped state). I'm afraid that if I delete them and try recreating them then the correct permissions won't be there.  I've tested the function with ServerSpec, and it does work as expected, but I'm afraid that it may spend too much time spinning its wheels upon server startup if there are a lot of files to clear out.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def _clean_directories(path):\n    for root, tmp_dirs, tmp_files in os.walk(path):\n        for name in tmp_files:\n            os.remove(os.path.join(root, name))\n        for name in tmp_dirs:\n            if (os.path.join(root, name).count('/') &gt; (path.count('/') + 1)):\n                shutil.rmtree(os.path.join(root, name))\n</code></pre>\n\n<p>It works as expected, I just don't like the nested <code>for</code>'s.</p>\n\n<p>P.S. Is the complexity <code>O(2n^2)</code>? (it's been awhile)</p>\n"}, {"tags": ["python", "django", "django-rest-framework", "serialization"], "answers": [{"comments": [{"owner": {"reputation": 443, "user_id": 1400269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de63be19101d68e767f9074cec24c48?s=128&d=identicon&r=PG", "display_name": "Tsang-Yi Shen", "link": "https://stackoverflow.com/users/1400269/tsang-yi-shen"}, "edited": false, "score": 0, "creation_date": 1562809269, "post_id": 56980203, "comment_id": 100496880, "body": "Should be <code>get_user()</code> not <code>user()</code>"}, {"owner": {"reputation": 3, "user_id": 8577271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34c15b6d1563670ef0c074ea48c5f81?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Rout", "link": "https://stackoverflow.com/users/8577271/pedro-rout"}, "reply_to_user": {"reputation": 443, "user_id": 1400269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de63be19101d68e767f9074cec24c48?s=128&d=identicon&r=PG", "display_name": "Tsang-Yi Shen", "link": "https://stackoverflow.com/users/1400269/tsang-yi-shen"}, "edited": false, "score": 0, "creation_date": 1562849267, "post_id": 56980203, "comment_id": 100513720, "body": "Thank you! @jorge @tsang-yi I tried whit <code>get_user()</code> and <code>user()</code> and the different was that whit <code>get_user()</code> the method  was executed, but when I use <code>user()</code> it doesn&#39;t. Anyway, I only needed to write the method so that the exception did not happen."}, {"owner": {"reputation": 62, "user_id": 1563981, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/42ZCA.jpg?s=128&g=1", "display_name": "Jorge Limas", "link": "https://stackoverflow.com/users/1563981/jorge-limas"}, "edited": false, "score": 0, "creation_date": 1562908213, "post_id": 56980203, "comment_id": 100534184, "body": "Yes I missed that part, the docs are here by the way <a href=\"https://www.django-rest-framework.org/api-guide/fields/#serializermethodfield\" rel=\"nofollow noreferrer\">django-rest-framework.org/api-guide/fields/&hellip;</a> I also edited the answer to fix the problem."}], "tags": [], "owner": {"reputation": 62, "user_id": 1563981, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/42ZCA.jpg?s=128&g=1", "display_name": "Jorge Limas", "link": "https://stackoverflow.com/users/1563981/jorge-limas"}, "is_accepted": true, "score": 1, "last_activity_date": 1562908171, "last_edit_date": 1562908171, "creation_date": 1562805122, "answer_id": 56980203, "question_id": 56979878, "link": "https://stackoverflow.com/questions/56979878/serializers-crash-when-return-an-instance/56980203#56980203", "title": "Serializers crash when return an instance", "body": "<p>The problem is that you are using a SerializerMethodField() for the user field. These kind of fields assume that you will have a method in the serializer with the same name and the return of that method is the value used for that field.</p>\n\n<p>Example</p>\n\n<pre><code>class PedidoWriterSerializer(serializers.ModelSerializer):\n    user = serializers.SerializerMethodField()\n\n    def get_user(self, obj):\n        return \"any logic needed to get the user value\"\n\n    class Meta:\n         model = PedidoWriter\n</code></pre>\n\n<p>So then when you get the serialized information you will have a field called \"user\" with that information, by the way the second argument \"obj\" is an instance of the ModelSerializer so you can access any other field of the Model using that variable.</p>\n"}], "owner": {"reputation": 3, "user_id": 8577271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34c15b6d1563670ef0c074ea48c5f81?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Rout", "link": "https://stackoverflow.com/users/8577271/pedro-rout"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 56980203, "answer_count": 1, "score": 0, "last_activity_date": 1562908171, "creation_date": 1562801772, "question_id": 56979878, "link": "https://stackoverflow.com/questions/56979878/serializers-crash-when-return-an-instance", "title": "Serializers crash when return an instance", "body": "<p>I am trying to add a new variable in my endpoint.\nBefore I used <code>cliente</code>, but now I want to add <code>user</code> (for finding the <code>cliente</code>). The problem is that <code>user</code> is not in my <code>Pedido</code> model, so I add using <code>user = serializers.IntegerField()</code>. I can use it in the method without a problem, but when return the instance <code>pedido</code>, something is wrong.</p>\n\n<p><strong>serializers.py</strong></p>\n\n<pre><code>class PedidoWriterSerializer(serializers.ModelSerializer):\n    user = serializers.SerializerMethodField()\n    lineas = DetallePedidoSimpleSerializer(many=True, required=False)\n    class Meta:\n        model = Pedido\n        exclude = ('monto','entrega_realizada','pedido_confirmado', 'cliente',)\n        extra_kwargs = { 'user': {'write_only': True} }\n\n    def create(self, validated_data):\n        if 'lineas' in validated_data:\n            lineas = validated_data.pop('lineas')\n        if 'entrega_solicitada' in validated_data:\n            entregas_solicitadas = validated_data.pop('entrega_solicitada')\n        user = self._kwargs.get('data').get('user')\n        bandera = True\n        c = Cliente.objects.get(usuario_id=user)\n        validated_data['cliente'] = c\n        if (not c.habilitado):\n            bandera = False\n        if bandera:\n            total = 0\n            for l in lineas:\n                print(2)\n                print(l)\n                p = Producto.objects.get(pk=l['producto'].id)\n                if ((not p.activo) or (not p.stock) or (not(l['cantidad']&gt;0 and\n                    l['cantidad'] &lt;1000))):\n                    bandera = False\n                else:\n                    today = datetime.now()\n                    prom = p.ofertas.filter(activa=True,\n                                                  desde__lte=today,\n                                                  hasta__gte=today).last()\n                    if prom:\n                        monto_descuento = (p.precio * prom.descuento) / 100\n                        total = (p.precio - monto_descuento) * l['cantidad']\\\n                                + \\\n                                total\n                    else:\n                        total = p.precio * l['cantidad'] + total\n            if total &lt; c.ciudad.monto_minimo:\n                bandera = False\n        if bandera:\n            for e in entregas_solicitadas:\n                he = Horario_Entrega.objects.get(pk=e.id)\n                if (not he.activo):\n                    bandera = False\n        if bandera:\n            pedido = Pedido.objects.create(cliente=c)\n            for linea in lineas:\n                linea['pedido'] = pedido\n                Detalle_Pedido.objects.create(**linea)\n            for entrega in entregas_solicitadas:\n                pedido.entrega_solicitada.add(entrega)\n            print('algo')\n            self._kwargs.get('data').pop('user')\n            pedido.save()\n            # Everything is ok until this line \n            return pedido\n        else:\n            return None\n</code></pre>\n\n<p><strong>viewset.py</strong></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class PedidoViewSet(viewsets.ModelViewSet):\n    queryset = Pedido.objects.select_related('cliente',\n                                             'entrega_pactada').prefetch_related('entrega_solicitada')\n    serializer_class = PedidoSerializer\n    filter_backends = (DjangoFilterBackend,)\n    filter_fields = ('cliente__id',)\n    authentication_classes = [JSONWebTokenAuthentication, ]\n    permission_classes = [permissions.IsAuthenticated, ]\n\n    def get_serializer_class(self):\n        if self.action == 'retrieve':\n            return PedidoSerializer\n        if self.action == 'list':\n            return PedidoSerializer\n        return PedidoWriterSerializer\n\n    def get_queryset(self):\n        queryset = super(PedidoViewSet,self).get_queryset()\n        today = timezone.now()\n        queryset = queryset.filter(fecha__gte = today - timedelta(days=30),\n                                   cliente__usuario__dni = self.request.user.dni).order_by(\n        '-fecha')\n        return queryset\n</code></pre>\n\n<p>this is the error messages:</p>\n\n<pre><code>ERROR Internal Server Error: /pedido/\nTraceback (most recent call last):\n  File \"/home/pedro/.virtualenvs/superEnv/lib/python3.5/site-packages/rest_framework/fields.py\", line 444, in get_attribute\n    return get_attribute(instance, self.source_attrs)\n  File \"/home/pedro/.virtualenvs/superEnv/lib/python3.5/site-packages/rest_framework/fields.py\", line 103, in get_attribute\n    instance = getattr(instance, attr)\nAttributeError: 'Pedido' object has no attribute 'user'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/pedro/.virtualenvs/superEnv/lib/python3.5/site-packages/django/core/handlers/exception.py\", line 41, in inner\n    response = get_response(request)\n  File \"/home/pedro/.virtualenvs/superEnv/lib/python3.5/site-packages/django/core/handlers/base.py\", line 187, in _get_response\n    response = self.process_exception_by_middleware(e, request)\n  File \"/home/pedro/.virtualenvs/superEnv/lib/python3.5/site-packages/django/core/handlers/base.py\", line 185, in _get_response\n    response = wrapped_callback(request, *callback_args, **callback_kwargs)\n  File \"/home/pedro/.virtualenvs/superEnv/lib/python3.5/site-packages/django/views/decorators/csrf.py\", line 58, in wrapped_view\n    return view_func(*args, **kwargs)\n  File \"/home/pedro/.virtualenvs/superEnv/lib/python3.5/site-packages/rest_framework/viewsets.py\", line 90, in view\n    return self.dispatch(request, *args, **kwargs)\n  File \"/home/pedro/.virtualenvs/superEnv/lib/python3.5/site-packages/rest_framework/views.py\", line 489, in dispatch\n    response = self.handle_exception(exc)\n  File \"/home/pedro/.virtualenvs/superEnv/lib/python3.5/site-packages/rest_framework/views.py\", line 449, in handle_exception\n    self.raise_uncaught_exception(exc)\n  File \"/home/pedro/.virtualenvs/superEnv/lib/python3.5/site-packages/rest_framework/views.py\", line 486, in dispatch\n    response = handler(request, *args, **kwargs)\n  File \"/home/pedro/.virtualenvs/superEnv/lib/python3.5/site-packages/rest_framework/mixins.py\", line 22, in create\n    headers = self.get_success_headers(serializer.data)\n  File \"/home/pedro/.virtualenvs/superEnv/lib/python3.5/site-packages/rest_framework/serializers.py\", line 534, in data\n    ret = super(Serializer, self).data\n  File \"/home/pedro/.virtualenvs/superEnv/lib/python3.5/site-packages/rest_framework/serializers.py\", line 263, in data\n    self._data = self.to_representation(self.instance)\n  File \"/home/pedro/.virtualenvs/superEnv/lib/python3.5/site-packages/rest_framework/serializers.py\", line 488, in to_representation\n    attribute = field.get_attribute(instance)\n  File \"/home/pedro/.virtualenvs/superEnv/lib/python3.5/site-packages/rest_framework/fields.py\", line 463, in get_attribute\n    raise type(exc)(msg)\nAttributeError: Got AttributeError when attempting to get a value for field `user` on serializer `PedidoWriterSerializer`.\nThe serializer field might be named incorrectly and not match any attribute or key on the `Pedido` instance.\nOriginal exception text was: 'Pedido' object has no attribute 'user'.\n</code></pre>\n"}, {"tags": ["python", "pip", "setuptools"], "comments": [{"owner": {"reputation": 447, "user_id": 1863951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e6d03720d4bbbd5f1239a01bc857e51?s=128&d=identicon&r=PG", "display_name": "Christian Macht", "link": "https://stackoverflow.com/users/1863951/christian-macht"}, "edited": false, "score": 0, "creation_date": 1562806924, "post_id": 56979756, "comment_id": 100496497, "body": "It seems like I can get the path from <code>os.environ.get(&quot;PWD&quot;)</code> - is there anything wrong with this?"}, {"owner": {"reputation": 447, "user_id": 1863951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e6d03720d4bbbd5f1239a01bc857e51?s=128&d=identicon&r=PG", "display_name": "Christian Macht", "link": "https://stackoverflow.com/users/1863951/christian-macht"}, "edited": false, "score": 0, "creation_date": 1562934328, "post_id": 56979756, "comment_id": 100546540, "body": "...this is from the Python 3 docs: &quot;This mapping (<code>os.environ</code>) is captured the first time the os module is imported, typically during Python startup as part of processing site.py. Changes to the environment made after this time are not reflected in os.environ, except for changes made by modifying os.environ directly.&quot; <a href=\"https://docs.python.org/3/library/os.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/os.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 447, "user_id": 1863951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e6d03720d4bbbd5f1239a01bc857e51?s=128&d=identicon&r=PG", "display_name": "Christian Macht", "link": "https://stackoverflow.com/users/1863951/christian-macht"}, "edited": false, "score": 0, "creation_date": 1562806872, "post_id": 56980174, "comment_id": 100496480, "body": "Thanks, that explains it! Any idea how I can get the original package path during the wheel build process?"}, {"owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "reply_to_user": {"reputation": 447, "user_id": 1863951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e6d03720d4bbbd5f1239a01bc857e51?s=128&d=identicon&r=PG", "display_name": "Christian Macht", "link": "https://stackoverflow.com/users/1863951/christian-macht"}, "edited": false, "score": 0, "creation_date": 1562811448, "post_id": 56980174, "comment_id": 100497240, "body": "@ChristianMacht <a href=\"https://docs.python.org/3/distutils/apiref.html\" rel=\"nofollow noreferrer\">the documentation</a> is sketchy about that. Judging by the <a href=\"https://github.com/python/cpython/blob/master/Lib/distutils/command/build_py.py#L42\" rel=\"nofollow noreferrer\">implementation of <code>distutils.command.build_py</code></a>, it gets most info from the <code>Distribution</code> object (that is passed to a command&#39;s constructor)."}], "tags": [], "owner": {"reputation": 28384, "user_id": 648265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4d98e414a47934d66cb78bf73d0845ba?s=128&d=identicon&r=PG", "display_name": "ivan_pozdeev", "link": "https://stackoverflow.com/users/648265/ivan-pozdeev"}, "is_accepted": false, "score": 1, "last_activity_date": 1562804743, "creation_date": 1562804743, "answer_id": 56980174, "question_id": 56979756, "link": "https://stackoverflow.com/questions/56979756/get-file-path-during-pip-install-in-setup-py/56980174#56980174", "title": "Get file path during pip install in setup.py", "body": "<p><code>pip</code> <a href=\"https://github.com/pypa/pip/blob/master/src/pip/_internal/commands/install.py#L359\" rel=\"nofollow noreferrer\">builds a wheel right away</a>. That includes installing to a temporary directory as an intermediate step. So everything that's not eligible for packaging is lost.</p>\n\n<p>While editable installation <a href=\"https://github.com/pypa/pip/blob/master/src/pip/_internal/req/req_install.py#L744\" rel=\"nofollow noreferrer\">just runs <code>setup.py develop</code></a>.</p>\n"}], "owner": {"reputation": 447, "user_id": 1863951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e6d03720d4bbbd5f1239a01bc857e51?s=128&d=identicon&r=PG", "display_name": "Christian Macht", "link": "https://stackoverflow.com/users/1863951/christian-macht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 603, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562807531, "creation_date": 1562800691, "last_edit_date": 1562807531, "question_id": 56979756, "link": "https://stackoverflow.com/questions/56979756/get-file-path-during-pip-install-in-setup-py", "title": "Get file path during pip install in setup.py", "body": "<p>I followed <a href=\"https://stackoverflow.com/questions/20288711/post-install-script-with-python-setuptools\">mertyildiran's top answer</a> to write a post-install script in <code>setup.py</code>:</p>\n\n<pre><code>from setuptools import setup\nfrom setuptools.command.develop import develop\nfrom setuptools.command.install import install\n\nhere = os.path.abspath(os.path.dirname(__file__))\n\nclass PostDevelopCommand(develop):\n    \"\"\"Post-installation for development mode.\"\"\"\n    def run(self):\n        file = os.path.join(here, 'TESTFILE')\n        print(file) # /path/to/my/package/TESTFILE\n        with open(file, 'a') as file:\n            file.write('This is development.')\n        develop.run(self)\n\nclass PostInstallCommand(install):\n    \"\"\"Post-installation for installation mode.\"\"\"\n    def run(self):\n        file = os.path.join(here, 'TESTFILE')\n        print(file) # /tmp/pip-req-build-*/TESTFILE\n        with open(file, 'a') as file:\n            file.write('This is Sparta!')    \n        install.run(self)\n\nsetup(\n    ..\n    cmdclass={\n        'install': PostInstallCommand,\n        'develop': PostDevelopCommand,\n    },\n)\n</code></pre>\n\n<p>..but only when I <code>pip install -e .</code> do I get the output in the test file. When I try <code>pip install .</code> nothing gets written to my desired output file because the file path changes to <code>/tmp/pip-req-build-*</code></p>\n\n<p>How can I get the path to the package directory before setup?</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 17298, "user_id": 1540468, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2f7d0c7668a2f3b53cf22c01ae63f32b?s=128&d=identicon&r=PG", "display_name": "Paul Rooney", "link": "https://stackoverflow.com/users/1540468/paul-rooney"}, "edited": false, "score": 2, "creation_date": 1562800947, "post_id": 56979730, "comment_id": 100495408, "body": "just use <code>sum(data.values())</code>"}, {"owner": {"reputation": 843, "user_id": 8426627, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8203c0c714dd17ad3eff6d7188ff548a?s=128&d=identicon&r=PG&f=1", "display_name": "user8426627", "link": "https://stackoverflow.com/users/8426627/user8426627"}, "edited": false, "score": 0, "creation_date": 1562801030, "post_id": 56979730, "comment_id": 100495422, "body": "does he want all salaty = sum(v[i] for i, v in enumerate(data.values())?"}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1562801336, "post_id": 56979730, "comment_id": 100495471, "body": "If you search in your browser for &quot;Python access dict&quot;, you&#39;ll find references that can explain this much better than we can manage here.  You have confused and combined multiple methods of accessing a structure."}], "answers": [{"tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 0, "last_activity_date": 1562801199, "creation_date": 1562801199, "answer_id": 56979805, "question_id": 56979730, "link": "https://stackoverflow.com/questions/56979730/how-do-i-debug-this-question-extracting-the-value-out-the-dictionary/56979805#56979805", "title": "How do I debug this question? Extracting the value out the dictionary", "body": "<p><code>value</code> is the value of the current element in the <code>for</code> loop, it's not a dictionary key, so <code>data[value]</code> is not right.. And your dictionary elements are not arrays, so it makes no sense to use <code>[0]</code>, <code>[1]</code>, etc.</p>\n\n<p>In your loop you just need to add <code>value</code> to the <code>all_salary</code> variable, which you should initialize before the loop. You can also use <code>data.values()</code> to loop over just the values, since you're not using the keys.</p>\n\n<pre><code>all_salary = 0\nfor value in data.values():\n    all_salary += value\n</code></pre>\n\n<p>There's also a built-in <code>sum()</code> function that will do the loop for you:</p>\n\n<pre><code>all_salary = sum(data.values())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": false, "score": 0, "last_activity_date": 1562801212, "creation_date": 1562801212, "answer_id": 56979807, "question_id": 56979730, "link": "https://stackoverflow.com/questions/56979730/how-do-i-debug-this-question-extracting-the-value-out-the-dictionary/56979807#56979807", "title": "How do I debug this question? Extracting the value out the dictionary", "body": "<p>Inside <code>for</code> loop you have <code>value</code> for single person which you have to add to <code>all_salary</code>. You can use <code>print()</code> to see it.</p>\n\n<pre><code>all_salary = 0  # value at start to use +=\n\nfor key, value in data.items():\n    #print(key, value)\n    all_salary += value\n\naverage = all_salary / len[data]\n</code></pre>\n\n<p>But you can also write it shorter - if you know list comprehensions and <code>sum()</code> </p>\n\n<pre><code>all_salary = sum( [value for key, value in data.items()] )\n</code></pre>\n\n<p>or even without <code>[ ]</code></p>\n\n<pre><code>all_salary = sum( value for key, value in data.items() )\n</code></pre>\n\n<p>or even simpler using <code>.values()</code> instead of <code>.items()</code></p>\n\n<pre><code>all_salary = sum(data.values())\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 64, "user_id": 9817316, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QfnSu-MoUTk/AAAAAAAAAAI/AAAAAAAAAUs/64YDUeZzWSg/photo.jpg?sz=128", "display_name": "Puddles", "link": "https://stackoverflow.com/users/9817316/puddles"}, "is_accepted": false, "score": 0, "last_activity_date": 1562801302, "creation_date": 1562801302, "answer_id": 56979815, "question_id": 56979730, "link": "https://stackoverflow.com/questions/56979730/how-do-i-debug-this-question-extracting-the-value-out-the-dictionary/56979815#56979815", "title": "How do I debug this question? Extracting the value out the dictionary", "body": "<p>This worked for me:</p>\n\n<pre><code>all_salary = 0\nfor key, value in data.items():\n    all_salary += float(data[key])\n\naverage = all_salary / len(data)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11767413, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZkIU8xPrtL8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfUMVpLSORp84ntnsQS78lmvQ5kZg/photo.jpg?sz=128", "display_name": "Zacth", "link": "https://stackoverflow.com/users/11767413/zacth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1562801302, "creation_date": 1562800449, "last_edit_date": 1562800585, "question_id": 56979730, "link": "https://stackoverflow.com/questions/56979730/how-do-i-debug-this-question-extracting-the-value-out-the-dictionary", "title": "How do I debug this question? Extracting the value out the dictionary", "body": "<pre><code>data = {\n    'Jeremy':73284, \n    'Hansel':8784.3, \n    'Uee':9480938.2, \n    'Seolhyun':984958.3, \n    'Ketsuno Ana':24131, \n    'Trump':45789\n}\n\nfor key, value in data.items():\n    all_salary = data[value][0] + data [value][1] + data[value][2] + data[value][3] + data[value][4] + data[value][5]\n\naverage = all_salary / len[data]\nprint(\"The_average_networth is $\" + str(average))\n</code></pre>\n\n<p>How do I add all the values of the numbers in the list into <code>all_salary</code>?</p>\n"}, {"tags": ["python", "class", "object", "matplotlib", "repr"], "comments": [{"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1562801129, "post_id": 56979723, "comment_id": 100495436, "body": "You&#39;re supposed to actually show us the output if you have some print calls in your code... Also, what&#39;s this <code>rgb2hex</code>? That&#39;s the only part of the code we need to explain the puzzle. xD"}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1562801130, "post_id": 56979723, "comment_id": 100495437, "body": "Because your object isn&#39;t a string."}, {"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "reply_to_user": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "edited": false, "score": 0, "creation_date": 1562801356, "post_id": 56979723, "comment_id": 100495480, "body": "@ipaleka sorry about that!  Totally forgot to include the output."}, {"owner": {"reputation": 3005, "user_id": 11703358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5pIOl.png?s=128&g=1", "display_name": "ipaleka", "link": "https://stackoverflow.com/users/11703358/ipaleka"}, "reply_to_user": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1562802383, "post_id": 56979723, "comment_id": 100495635, "body": "As @juanpa.arrivillaga said, <code>__repr__</code> and <code>__str__</code> should return string."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1562802963, "post_id": 56979723, "comment_id": 100495736, "body": "That&#39;s not the issue, as far as I can tell they do. The issue is that function expects a string, i.e. <code>to_rgb</code>"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562803671, "post_id": 56979723, "comment_id": 100495898, "body": "it doesn&#39;t work because <code>to_rgb(color)</code> doesn&#39;t run <code>str(color)</code> automatically. As for me <code>to_rgb</code> see that first argument is not string so it tries to create tuple <code>( str(first_argument), second_argument )</code> - so it gives <code>(#000000, None)</code> - and use this tuple to get value from some dictionary and then it gets error <code>KeyError: (#000000, None)</code> - it can&#39;t find <code>(#000000, None)</code> in dictionary."}], "answers": [{"comments": [{"owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1562879017, "post_id": 56980244, "comment_id": 100528473, "body": "I&#39;ve noticed something weird when more than one is instantiated.  I&#39;ve added it into the original question"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "reply_to_user": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "edited": false, "score": 0, "creation_date": 1562880173, "post_id": 56980244, "comment_id": 100528854, "body": "<code>str</code> is immutable. So what you did in the code is to change the color attribute of just every instace of <code>Color</code>. I updated the answer with what I think you want to do. (Also please make sure that the question makes some sense for future readers, who would usually read from top to bottom, not vice versa.)"}], "tags": [], "owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "is_accepted": true, "score": 2, "last_activity_date": 1562880076, "last_edit_date": 1562880076, "creation_date": 1562805547, "answer_id": 56980244, "question_id": 56979723, "link": "https://stackoverflow.com/questions/56979723/how-to-represent-a-custom-python-object-as-a-string-when-used-as-an-argument-in/56980244#56980244", "title": "How to represent a custom Python object as a string when used as an argument in another function?", "body": "<p>Maybe you want to subclass <code>str</code> to provide your string.</p>\n\n<pre><code>import pandas as pd\nfrom matplotlib.colors import to_rgb, rgb2hex\n\n\nclass Color(str):\n    def __new__(cls, value, *args, **kwargs):\n        # explicitly only pass value to the str constructor\n        v = rgb2hex(to_rgb(value))\n        return super(Color, cls).__new__(cls, v)\n\n\ncolor = Color(\"fuchsia\")\n\nprint(color)\nprint(pd.Series(color))\nprint(to_rgb(str(color)))\nprint(to_rgb(color))\n</code></pre>\n\n<p>outputs</p>\n\n<pre><code>#ff00ff\n0    #ff00ff\ndtype: object\n(1.0, 0.0, 1.0)\n(1.0, 0.0, 1.0)\n</code></pre>\n\n<p>If you want to store the initial value inside your string, you could do so</p>\n\n<pre><code>class Color(str):\n    def __new__(cls, value, *args, **kwargs):\n        # explicitly only pass value to the str constructor\n        v = rgb2hex(to_rgb(value))\n        return super(Color, cls).__new__(cls, v)\n\n    def __init__(self, value):\n        self.color = value\n</code></pre>\n"}], "owner": {"reputation": 23937, "user_id": 678572, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/kZ2Ia.jpg?s=128&g=1", "display_name": "O.rka", "link": "https://stackoverflow.com/users/678572/o-rka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 56980244, "answer_count": 1, "score": 1, "last_activity_date": 1562880076, "creation_date": 1562800403, "last_edit_date": 1562879082, "question_id": 56979723, "link": "https://stackoverflow.com/questions/56979723/how-to-represent-a-custom-python-object-as-a-string-when-used-as-an-argument-in", "title": "How to represent a custom Python object as a string when used as an argument in another function?", "body": "<p>I'm trying to make a simple object called <code>Color</code>.  I want this to have the same functionality as a string encoded as a hex color.  It looks like it's working but doesn't have the same capabilities.</p>\n\n<h3>Edit: In response to the accepted answer below:</h3>\n\n<pre><code>import pandas as pd\nfrom matplotlib.colors import to_rgb, rgb2hex\n\n\nclass Color(str):\n    def __new__(cls, value, *args, **kwargs):\n        # explicitly only pass value to the str constructor\n        cls.color = rgb2hex(to_rgb(value))\n        return super(Color, cls).__new__(cls, cls.color)\n\nx = pd.Series([Color(\"fuchsia\"), Color(\"black\")])\nprint(x)\n# 0    #ff00ff\n# 1    #000000\n# dtype: object\nprint(\"Should be fuchsia but it's black\", x[0].color)\n# Should be fuchsia but it's black #000000\nprint(\"Should be black\", x[0].color)\n# Should be black #000000\n</code></pre>\n\n<h3>Original:</h3>\n\n<p>For example, the following operations work:</p>\n\n<pre><code>print(color)\nprint(pd.Series(color))\nprint(to_rgb(str(color)))\n</code></pre>\n\n<p>but this does not:</p>\n\n<pre><code>print(to_rgb(color))\n</code></pre>\n\n<p>I can't figure out why this isn't working. I've tried this but it doesn't fit the case: <a href=\"https://stackoverflow.com/questions/26039353/python-represent-non-string-object-as-string\">Python, represent non-string object as string?</a></p>\n\n<pre><code>from matplotlib.colors import hex2color, to_rgb, to_rgba\n\n\nclass Color(object):\n    # Built in\n    def __init__(self, color):\n        self.color = rgb2hex(to_rgb(color))\n    def __repr__(self):\n        return self.color\n    def __str__(self):\n        return self.color\n\ncolor = Color(\"black\")\nprint(color)\n# #000000\nprint(pd.Series(color))\n# 0    #000000\n# dtype: object\nprint(to_rgb(str(color)))\n# (0.0, 0.0, 0.0)\nprint(to_rgb(color))\n</code></pre>\n\n<p>Here is the error:</p>\n\n<pre><code>---------------------------------------------------------------------------\nKeyError                                  Traceback (most recent call last)\n~/anaconda/envs/\u00b5_env/lib/python3.6/site-packages/matplotlib/colors.py in to_rgba(c, alpha)\n    173     try:\n--&gt; 174         rgba = _colors_full_map.cache[c, alpha]\n    175     except (KeyError, TypeError):  # Not in cache, or unhashable.\n\nKeyError: (#000000, None)\n\nDuring handling of the above exception, another exception occurred:\n\nValueError                                Traceback (most recent call last)\n&lt;ipython-input-35-a478f942e1d2&gt; in &lt;module&gt;\n     16 print(pd.Series(color))\n     17 print(to_rgb(str(color)))\n---&gt; 18 print(to_rgb(color))\n\n~/anaconda/envs/\u00b5_env/lib/python3.6/site-packages/matplotlib/colors.py in to_rgb(c)\n    279 def to_rgb(c):\n    280     \"\"\"Convert *c* to an RGB color, silently dropping the alpha channel.\"\"\"\n--&gt; 281     return to_rgba(c)[:3]\n    282 \n    283 \n\n~/anaconda/envs/\u00b5_env/lib/python3.6/site-packages/matplotlib/colors.py in to_rgba(c, alpha)\n    174         rgba = _colors_full_map.cache[c, alpha]\n    175     except (KeyError, TypeError):  # Not in cache, or unhashable.\n--&gt; 176         rgba = _to_rgba_no_colorcycle(c, alpha)\n    177         try:\n    178             _colors_full_map.cache[c, alpha] = rgba\n\n~/anaconda/envs/\u00b5_env/lib/python3.6/site-packages/matplotlib/colors.py in _to_rgba_no_colorcycle(c, alpha)\n    225         # float)` and `np.array(...).astype(float)` all convert \"0.5\" to 0.5.\n    226         # Test dimensionality to reject single floats.\n--&gt; 227         raise ValueError(\"Invalid RGBA argument: {!r}\".format(orig_c))\n    228     # Return a tuple to prevent the cached value from being modified.\n    229     c = tuple(c.astype(float))\n\nValueError: Invalid RGBA argument: #000000\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "list"], "comments": [{"owner": {"reputation": 670, "user_id": 7471822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a8fe7bbe549522ddb5e12747cd583e0?s=128&d=identicon&r=PG&f=1", "display_name": "ldtcoop", "link": "https://stackoverflow.com/users/7471822/ldtcoop"}, "edited": false, "score": 0, "creation_date": 1562800433, "post_id": 56979701, "comment_id": 100495324, "body": "Can you post the rest of your code? That will let us see better what you&#39;re doing and where these extra spaces are coming from.  That said, there is a <code>.strip()</code> method which will remove all trailing spaces from a string, e.g. <code>&#39;abc &#39;.strip()</code> returns <code>&#39;abc&#39;</code>"}, {"owner": {"reputation": 13, "user_id": 11767404, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-l0MWd5_Xz6k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd48Q_BGj-BW595hq-A5MHdtK7sqg/photo.jpg?sz=128", "display_name": "sakko", "link": "https://stackoverflow.com/users/11767404/sakko"}, "reply_to_user": {"reputation": 670, "user_id": 7471822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a8fe7bbe549522ddb5e12747cd583e0?s=128&d=identicon&r=PG&f=1", "display_name": "ldtcoop", "link": "https://stackoverflow.com/users/7471822/ldtcoop"}, "edited": false, "score": 0, "creation_date": 1562800780, "post_id": 56979701, "comment_id": 100495383, "body": "I sent the whole code."}], "answers": [{"tags": [], "owner": {"reputation": 1348, "user_id": 6933039, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Sn3RU_eNCJA/AAAAAAAAAAI/AAAAAAAAAFs/IeOaIPSOW1A/photo.jpg?sz=128", "display_name": "brandonwang", "link": "https://stackoverflow.com/users/6933039/brandonwang"}, "is_accepted": true, "score": 0, "last_activity_date": 1562802978, "creation_date": 1562802978, "answer_id": 56980013, "question_id": 56979701, "link": "https://stackoverflow.com/questions/56979701/how-can-i-remove-the-space/56980013#56980013", "title": "How can I remove the space?", "body": "<p>It sounds like you only want spaces in between each number. The best way to do this is the <code>join</code> method, which operates on a delimiter, takes a list of strings, and creates a new string where the delimiter separates each string in the list.</p>\n\n<p>For example, </p>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; \" \".join([\"1\", \"2\", \"3\"])\n'1 2 3'\n</code></pre>\n\n<p>You can use this in your code. Here is the final version:</p>\n\n<pre><code>p = input()\nM = str(p).split(\" \")\nA = int(M[0])\nR = int(M[1])\nX = []\nfor i in range(A):\n    l = list(map(int, input().split(\" \")))\n    X.append(l)\nfor i in range(R):\n    row = [str(X[j][i]) for j in range(A)]\n    print(\" \".join(row))\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11767404, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-l0MWd5_Xz6k/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd48Q_BGj-BW595hq-A5MHdtK7sqg/photo.jpg?sz=128", "display_name": "sakko", "link": "https://stackoverflow.com/users/11767404/sakko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 56980013, "answer_count": 1, "score": -1, "last_activity_date": 1562802978, "creation_date": 1562800224, "last_edit_date": 1562801406, "question_id": 56979701, "link": "https://stackoverflow.com/questions/56979701/how-can-i-remove-the-space", "title": "How can I remove the space?", "body": "<p>I have a program which transposes a matrix. My question is how to remove the space after every last number in row. </p>\n\n<p>I know that the space is there because of the <code>end = \" \"</code>. The end makes a space after every number but how can I remove it from the last number in rows?  How can I replace the end?</p>\n\n<pre><code>p = input ()\nM = str(p).split(\" \")\nA = int(M[0])\nR = int(M[1])\nX=[]\nfor i in range(A):\n   l=list(map(int,input().split(\" \")))\n   X.append(l)\nfor i in range(R):\n   for j in range(A):\n      print(X[j][i], end = \" \")\n   print ()\n</code></pre>\n"}, {"tags": ["python", "python-import"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 1, "creation_date": 1562800054, "post_id": 56979642, "comment_id": 100495218, "body": "rename your script and problem resolved."}, {"owner": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1562801961, "post_id": 56979642, "comment_id": 100495576, "body": "<code>import some_reserved_name as some_other_name</code> ?"}, {"owner": {"reputation": 2384, "user_id": 102315, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c8b935f2e5d916f361ffe33fe94a3d10?s=128&d=identicon&r=PG", "display_name": "Alper", "link": "https://stackoverflow.com/users/102315/alper"}, "edited": false, "score": 1, "creation_date": 1562843273, "post_id": 56979642, "comment_id": 100510127, "body": "I don&#39;t want to rename the script. That&#39;s the point."}, {"owner": {"reputation": 2384, "user_id": 102315, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c8b935f2e5d916f361ffe33fe94a3d10?s=128&d=identicon&r=PG", "display_name": "Alper", "link": "https://stackoverflow.com/users/102315/alper"}, "reply_to_user": {"reputation": 6690, "user_id": 4225229, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/2YfJM.jpg?s=128&g=1", "display_name": "JacobIRR", "link": "https://stackoverflow.com/users/4225229/jacobirr"}, "edited": false, "score": 0, "creation_date": 1562852018, "post_id": 56979642, "comment_id": 100515555, "body": "@JacobIRR That imports my current script first instead of the package so does not work."}], "owner": {"reputation": 2384, "user_id": 102315, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/c8b935f2e5d916f361ffe33fe94a3d10?s=128&d=identicon&r=PG", "display_name": "Alper", "link": "https://stackoverflow.com/users/102315/alper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562801927, "creation_date": 1562799587, "question_id": 56979642, "link": "https://stackoverflow.com/questions/56979642/import-package-with-the-same-name-as-current-file", "title": "Import package with the same name as current file", "body": "<p>I have the following piece of code that looks like it might be able to import a package that has the same name as the script that is being run, but it goes into infinite recursion:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def import_non_local2(name, custom_name=None):\n    custom_name = custom_name or name\n\n    from importlib.util import find_spec, module_from_spec\n\n    spec = find_spec(name, sys.path[1:])\n    mod = module_from_spec(spec)\n\n    spec.name = custom_name\n\n    spec.loader.exec_module(mod)\n\n\n\nwhois_service = import_non_local2('whois', 'whois_service')\n</code></pre>\n\n<p>I'm trying to convert the code from <a href=\"https://stackoverflow.com/a/6032023/102315\">this answer</a> to stop using the  deprecated <code>imp</code>.</p>\n"}, {"tags": ["python", "parsing", "text"], "comments": [{"owner": {"reputation": 308, "user_id": 10737350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f0fa26b4404daa221ac1ca3e7aa61a0?s=128&d=identicon&r=PG&f=1", "display_name": "NFR", "link": "https://stackoverflow.com/users/10737350/nfr"}, "edited": false, "score": 1, "creation_date": 1562800247, "post_id": 56979641, "comment_id": 100495275, "body": "Can you upload the raw data as text in your question?"}, {"owner": {"reputation": 788, "user_id": 103254, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/50340ae4bf8708f20388bf582dcf5366?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/103254/mike"}, "edited": false, "score": 0, "creation_date": 1562800320, "post_id": 56979641, "comment_id": 100495297, "body": "It&#39;s better to include text, rather than a picture, so that people don&#39;t have to fake up their data on your own. (Also, it becomes a permanent part of the question as visible on the site.) In general, reading <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> would be a great help."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562800564, "post_id": 56979641, "comment_id": 100495354, "body": "checking text <code>patient</code>  in row you can easily find rows which you need. It seems that every text starts in similar column (char) so it should be easier to find correct text"}, {"owner": {"reputation": 788, "user_id": 103254, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/50340ae4bf8708f20388bf582dcf5366?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/103254/mike"}, "edited": false, "score": 0, "creation_date": 1562801940, "post_id": 56979641, "comment_id": 100495572, "body": "From <a href=\"https://stackoverflow.com/help/how-to-ask\">stackoverflow.com/help/how-to-ask</a> : <b>DO NOT post images of code, data, error messages, etc.</b> - copy or type the text into the question. Please reserve the use of images for diagrams or demonstrating rendering bugs, things that are impossible to describe accurately via text."}, {"owner": {"reputation": 1, "user_id": 6288236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c6621c5703c074fd06b6ad6d197c05?s=128&d=identicon&r=PG&f=1", "display_name": "HRE", "link": "https://stackoverflow.com/users/6288236/hre"}, "reply_to_user": {"reputation": 308, "user_id": 10737350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f0fa26b4404daa221ac1ca3e7aa61a0?s=128&d=identicon&r=PG&f=1", "display_name": "NFR", "link": "https://stackoverflow.com/users/10737350/nfr"}, "edited": false, "score": 0, "creation_date": 1563564199, "post_id": 56979641, "comment_id": 100755481, "body": "@NFR many thanks for your instructive comments. It was my first question here and wasn&#39;t sure what&#39;s the bets approach to post it. Now I added a piece of my text file."}, {"owner": {"reputation": 1, "user_id": 6288236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c6621c5703c074fd06b6ad6d197c05?s=128&d=identicon&r=PG&f=1", "display_name": "HRE", "link": "https://stackoverflow.com/users/6288236/hre"}, "reply_to_user": {"reputation": 788, "user_id": 103254, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/50340ae4bf8708f20388bf582dcf5366?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/103254/mike"}, "edited": false, "score": 0, "creation_date": 1563564224, "post_id": 56979641, "comment_id": 100755488, "body": "@Mike many thanks for your instructive comments. It was my first question here and wasn&#39;t sure what&#39;s the bets approach to post it. Now I added a piece of my text file."}], "answers": [{"tags": [], "owner": {"reputation": 308, "user_id": 10737350, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f0fa26b4404daa221ac1ca3e7aa61a0?s=128&d=identicon&r=PG&f=1", "display_name": "NFR", "link": "https://stackoverflow.com/users/10737350/nfr"}, "is_accepted": false, "score": -1, "last_activity_date": 1563710517, "last_edit_date": 1563710517, "creation_date": 1562803562, "answer_id": 56980074, "question_id": 56979641, "link": "https://stackoverflow.com/questions/56979641/how-to-parse-relatively-organized-but-not-delimited-text-using-python/56980074#56980074", "title": "How to parse relatively organized but not delimited text using Python?", "body": "<blockquote>\n  <p>I've reviewed the code and fixed it,</p>\n</blockquote>\n\n<p>This should do the trick,</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import re\n\n#read input file content\nwith open('input.txt') as inputFile:\n    inputText = inputFile.read()\n\nregx = r'^(\\d{4})\\s{2,}(\\D+?)(?=\\s{2,})\\s{2,}(\\D+?)(?=\\s{2,})\\s{2,}(\\D+?)(?=\\s{2,})|(^\\d{4})'\n\nparsedText = re.findall(regx,inputText,flags=re.M)\n\nrows = []\n\n#organizing data to write to file\nfor line in parsedText:\n    if len(line[0]):\n        rows.append(list(line))\n    else :\n        rows[-1][-1] = line[-1]\n\n#writing to file \nwith open('output.txt','w') as csvfile:\n    for row in rows:\n        csvfile.write(\"{} | {} | {} | {} | {}\\n\".format(row[1],row[0],row[4],row[2],row[3]))\n</code></pre>\n\n<p>You can lookup the regex I used here for explanation,\n<a href=\"https://regex101.com/r/mHWcTD/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/mHWcTD/1</a></p>\n\n<pre><code>1st Alternative ^(\\d{4})\\s{2,}(\\D+?)(?=\\s{2,})\\s{2,}(\\D+?)(?=\\s{2,})\\s{2,}(\\D+?)(?=\\s{2,})\n    ^ asserts position at start of a line\n    1st Capturing Group (\\d{4}) # Captures the start time\n        \\d{4} matches a digit (equal to [0-9])\n        {4} Quantifier \u2014 Matches exactly 4 times\n    \\s{2,} matches any whitespace character (equal to [\\r\\n\\t\\f\\v ])\n        {2,} Quantifier \u2014 Matches between 2 and unlimited times, as many times as possible, giving back as needed (greedy)\n    2nd Capturing Group (\\D+?) # captures patient name\n        \\D+? matches any character that\\'s not a digit (equal to [^0-9])\n            +? Quantifier \u2014 Matches between one and unlimited times, as few times as possible, expanding as needed (lazy)\n    Positive Lookahead (?=\\s{2,})\n        Assert that the Regex below matches\n            \\s{2,} matches any whitespace character (equal to [\\r\\n\\t\\f\\v ])\n                {2,} Quantifier \u2014 Matches between 2 and unlimited times, as many times as possible, giving back as needed (greedy)\n            \\s{2,} matches any whitespace character (equal to [\\r\\n\\t\\f\\v ])\n                {2,} Quantifier \u2014 Matches between 2 and unlimited times, as many times as possible, giving back as needed (greedy)\n    3rd Capturing Group (\\D+?) # captures operation details\n        \\D+? matches any character that\\'s not a digit (equal to [^0-9])\n            +? Quantifier \u2014 Matches between one and unlimited times, as few times as possible, expanding as needed (lazy)\n    Positive Lookahead (?=\\s{2,})\n        Assert that the Regex below matches\n            \\s{2,} matches any whitespace character (equal to [\\r\\n\\t\\f\\v ])\n    \\s{2,} matches any whitespace character (equal to [\\r\\n\\t\\f\\v ])\n        {2,} Quantifier \u2014 Matches between 2 and unlimited times, as many times as possible, giving back as needed (greedy)\n    4th Capturing Group (\\D+?) # captures surgeons name\n    Positive Lookahead (?=\\s{2,})\n        Assert that the Regex below matches\n2nd Alternative (^\\d{4})\n    5th Capturing Group (^\\d{4}) # captures end time\n        ^ asserts position at start of a line\n        \\d{4} matches a digit (equal to [0-9])\n        {4} Quantifier \u2014 Matches exactly 4 times\n</code></pre>\n\n<p>Sample Input:</p>\n\n<pre><code>Run on: 10/07/19 - 1444                                                       Hospital                                                        PAGE 1\n\nRun by: H                                                          Final Slate For: 11/07/19 THU                                                   \n\nPIR        Patient Name                     R/L/B   Proposed Procedure                                          Surgeon                            Path Reg'd      Dur\nPOR Time   Unit Number   PHN                                                                                    Assist                             Bld Req'd     PIR-POR\nPri        DOB           Age/S                                                                                                                     Med Imaging\nLoc        Bed Type                                                                                                                                Req'd Staff\nWard\n\n\nOR Room - 1                                           Room End Time: 1730          Anaesthetist: S,A T                                            \nOHS 0900-2000                                               \n0745       Morgan Freeman                             Replace Root and Ascending                                              Dr. Henry Cavail   GENERAL                \n1305       RC02654289   96985693                        Aorta/Hemiarch (Tissue), Amputate Left                                                   4 UNITS                \n3A         21/12/1943     75/M                            Atrial Appendage                                                                         Perfusionist           \nSDA        ICU                                                                                                                                                            \nRC-T2S    \n Weeks on Waitlist:  5   (36 days)                                                                                                                                  320\n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n1400       Alicia Cuthbart                           Coronary Artery Bypass Graft                                            Dr. Denzel Washington   GENERAL                \n1730       RC00968458   906854959                                                                                                                 SCREEN                 \n2B         18/06/1958     61/M                                                                                                                     Perfusionist           \nINPT       ICU                                                                                                                                                            \nRC-T2S    \n Weeks on Waitlist:  2   (17 days)                                                                                                                                  210\n                                                  Other Comments:   DM Type 2                                                                      \n\nRun on: 10/07/19 - 1444                                                      Hospital                                                        PAGE 2\n\nRun by: H                                                         Final Slate For: 11/07/19 THU                                                   \n\nPIR        Patient Name                     R/L/B   Proposed Procedure                                          Surgeon                            Path Reg'd      Dur\nPOR Time   Unit Number   PHN                                                                                    Assist                             Bld Req'd     PIR-POR\nPri        DOB           Age/S                                                                                                                     Med Imaging\nLoc        Bed Type                                                                                                                                Req'd Staff\nWard\n\n\nOR Room - 2                                           Room End Time: 1825          Anaesthetist: K,N S                                             \nOHS 0900-1930                                               \n0745       John van-Damn                          Aortic Valve Replacement (Mechanical)                                   Dr. Bon Jovi   GENERAL                \n1205       RC00584564   9095681571                                                                                                                 4 UNITS                \n3A         13/04/1955     64/F                                                                                                                     Perfusionist           \nSDA        ICU                                                                                                                                                            \nRC-T2S    \n Weeks on Waitlist: 14   (98 days)                                                                                                                                  260\n                                                  Other Comments:   DM Type 2                                                                      \n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n</code></pre>\n\n<p>Sample Output:</p>\n\n<pre><code>Morgan Freeman | 0745 | 1305 | Replace Root and Ascending | Dr. Henry Cavail\nAlicia Cuthbart | 1400 | 1730 | Coronary Artery Bypass Graft | Dr. Denzel Washington\nJohn van-Damn | 0745 | 1205 | Aortic Valve Replacement (Mechanical) | Dr. Bon Jovi\n\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6288236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8c6621c5703c074fd06b6ad6d197c05?s=128&d=identicon&r=PG&f=1", "display_name": "HRE", "link": "https://stackoverflow.com/users/6288236/hre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1563710517, "creation_date": 1562799564, "last_edit_date": 1563563832, "question_id": 56979641, "link": "https://stackoverflow.com/questions/56979641/how-to-parse-relatively-organized-but-not-delimited-text-using-python", "title": "How to parse relatively organized but not delimited text using Python?", "body": "<p>I'm trying to extract data from a text file which is formatted as shown in the picture. It includes list of surgeries and what I need from each case is: patient name, start time (time1), end time (time2), procedure type, and surgeon name. Here is the raw text. obviously patient and surgeon names are replaced by real names:</p>\n\n<pre><code>Run on: 10/07/19 - 1444                                                       Hospital                                                        PAGE 1\n\nRun by: H                                                          Final Slate For: 11/07/19 THU                                                   \n\nPIR        Patient Name                     R/L/B   Proposed Procedure                                          Surgeon                            Path Reg'd      Dur\nPOR Time   Unit Number   PHN                                                                                    Assist                             Bld Req'd     PIR-POR\nPri        DOB           Age/S                                                                                                                     Med Imaging\nLoc        Bed Type                                                                                                                                Req'd Staff\nWard\n\n\nOR Room - 1                                           Room End Time: 1730          Anaesthetist: S,A T                                            \nOHS 0900-2000                                               \n0745       patient 1                             Replace Root and Ascending                                              surgeon1   GENERAL                \n1305       RC02654289   96985693                        Aorta/Hemiarch (Tissue), Amputate Left                                                   4 UNITS                \n3A         21/12/1943     75/M                            Atrial Appendage                                                                         Perfusionist           \nSDA        ICU                                                                                                                                                            \nRC-T2S    \n Weeks on Waitlist:  5   (36 days)                                                                                                                                  320\n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\n1400       patient2                           Coronary Artery Bypass Graft                                            surgeon2   GENERAL                \n1730       RC00968458   906854959                                                                                                                 SCREEN                 \n2B         18/06/1958     61/M                                                                                                                     Perfusionist           \nINPT       ICU                                                                                                                                                            \nRC-T2S    \n Weeks on Waitlist:  2   (17 days)                                                                                                                                  210\n                                                  Other Comments:   DM Type 2                                                                      \n\nRun on: 10/07/19 - 1444                                                      Hospital                                                        PAGE 2\n\nRun by: H                                                         Final Slate For: 11/07/19 THU                                                   \n\nPIR        Patient Name                     R/L/B   Proposed Procedure                                          Surgeon                            Path Reg'd      Dur\nPOR Time   Unit Number   PHN                                                                                    Assist                             Bld Req'd     PIR-POR\nPri        DOB           Age/S                                                                                                                     Med Imaging\nLoc        Bed Type                                                                                                                                Req'd Staff\nWard\n\n\nOR Room - 2                                           Room End Time: 1825          Anaesthetist: K,N S                                             \nOHS 0900-1930                                               \n0745       Patient3                          Aortic Valve Replacement (Mechanical)                                   Surgeon3   GENERAL                \n1205       RC00584564   9095681571                                                                                                                 4 UNITS                \n3A         13/04/1955     64/F                                                                                                                     Perfusionist           \nSDA        ICU                                                                                                                                                            \nRC-T2S    \n Weeks on Waitlist: 14   (98 days)                                                                                                                                  260\n                                                  Other Comments:   DM Type 2                                                                      \n--------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n</code></pre>\n\n<p><img src=\"https://i.stack.imgur.com/rFKtw.png\" alt=\"raw data\"></p>\n\n<p>I need the output to be something like this:</p>\n\n<pre><code>patinet1 | time1 | time2 | procedure1 | surgeon1\npatinet2 | time1 | time2 | procedure2 | surgeon2\n.\n.\n.\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "web-scraping"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562808676, "post_id": 56979575, "comment_id": 100496772, "body": "did you check these pages in web browser ? I can open page for 960 but when I press &quot;Next&quot; (to see for 990) then It shows message <i>&quot;We&#39;re sorry, the page of results you requested is unavailable.&quot;</i>"}, {"owner": {"reputation": 846, "user_id": 5933020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd1074461d6be80447655f60fc16222?s=128&d=identicon&r=PG&f=1", "display_name": "Researcher", "link": "https://stackoverflow.com/users/5933020/researcher"}, "edited": false, "score": 0, "creation_date": 1562808836, "post_id": 56979575, "comment_id": 100496807, "body": "Yeah see the same thing. I wrote a scraper for fun that pulls name, ranking, phone, address, rating and link if you want it. Still, seems like page is broken."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562809592, "post_id": 56979575, "comment_id": 100496941, "body": "thanks, few months ago as a answer for similar question I created code which uses framework <a href=\"https://scrapy.org/\" rel=\"nofollow noreferrer\">Scrapy</a> to download images from this page: <a href=\"https://github.com/furas/python-examples/blob/master/__scraping__/yelp.com%20-%20scrapy/main.py\" rel=\"nofollow noreferrer\">github.com/furas/python-examples ... Yelp</a>"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562834500, "post_id": 56979575, "comment_id": 100504952, "body": "pages use two SQL queries: first to count all results and second to get data for current page. If there are differences then first query can give wrong number. Or maybe they add restriction to second query. People rather will no visit so many pages but it can blocks bots which can block server."}, {"owner": {"reputation": 207, "user_id": 7180194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tnExZ.jpg?s=128&g=1", "display_name": "MITHU", "link": "https://stackoverflow.com/users/7180194/mithu"}, "reply_to_user": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562835103, "post_id": 56979575, "comment_id": 100505281, "body": "Right you are @furas. But, I think when someone visits a page, he usually clicks on the last page button as well. However, I&#39;m not talking about visiting from 0 to that many pages; rather, I&#39;m talking about visiting only the next page from the link I&#39;ve provied above."}, {"owner": {"reputation": 846, "user_id": 5933020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd1074461d6be80447655f60fc16222?s=128&d=identicon&r=PG&f=1", "display_name": "Researcher", "link": "https://stackoverflow.com/users/5933020/researcher"}, "edited": false, "score": 1, "creation_date": 1562837949, "post_id": 56979575, "comment_id": 100506943, "body": "It seems like 1000 results is the cutoff for some reason? If I was yelp I might say &quot;why would anybody go through more then 1000 results unless they are scraping&quot;. Haha."}, {"owner": {"reputation": 846, "user_id": 5933020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cd1074461d6be80447655f60fc16222?s=128&d=identicon&r=PG&f=1", "display_name": "Researcher", "link": "https://stackoverflow.com/users/5933020/researcher"}, "edited": false, "score": 0, "creation_date": 1562838359, "post_id": 56979575, "comment_id": 100507228, "body": "I would suggest maybe get a database of suburbs and break it down like that: <a href=\"https://www.yelp.com/search?find_desc=&amp;find_loc=North%20Brookline%2C%20Boston%2C%20MA\" rel=\"nofollow noreferrer\">yelp.com/&hellip;</a>"}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1563123228, "post_id": 56979575, "comment_id": 100587723, "body": "Most website limit # of search results to avoid scraping as well improve user experience. So there is nothing technology will help you on this"}, {"owner": {"reputation": 19801, "user_id": 9189799, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/U2hEg.jpg?s=128&g=1", "display_name": "SIM", "link": "https://stackoverflow.com/users/9189799/sim"}, "edited": false, "score": 0, "creation_date": 1563197556, "post_id": 56979575, "comment_id": 100609456, "body": "There is a button named <code>All Filters</code> in the top left corner in which there are the list of <code>Neighborhoods</code>. They are static and can be parsed using requests. So, if you make use of those <code>Neighborhoods</code>, there is a great chance you can get most of the results. Hope that helps."}], "answers": [{"comments": [{"owner": {"reputation": 207, "user_id": 7180194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tnExZ.jpg?s=128&g=1", "display_name": "MITHU", "link": "https://stackoverflow.com/users/7180194/mithu"}, "edited": false, "score": 0, "creation_date": 1563477011, "post_id": 57100783, "comment_id": 100723414, "body": "If this is the only solution, I&#39;ve already had it. Perhaps you forgot to read the comment I made at this same line <code>for page in range(0, 960, 30)</code>. However, I modified the range intentionally to reproduce the issue. Thanks."}, {"owner": {"reputation": 331, "user_id": 4702324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LAX0R.jpg?s=128&g=1", "display_name": "shreyashag", "link": "https://stackoverflow.com/users/4702324/shreyashag"}, "reply_to_user": {"reputation": 207, "user_id": 7180194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tnExZ.jpg?s=128&g=1", "display_name": "MITHU", "link": "https://stackoverflow.com/users/7180194/mithu"}, "edited": false, "score": 0, "creation_date": 1563488368, "post_id": 57100783, "comment_id": 100727591, "body": "There is no data beyond that range.  That is why you are not finding links.  If you go to - <a href=\"https://www.yelp.com/search?find_desc=Restaurants&amp;find_loc=New%20York%2C%20NY&amp;start=990\" rel=\"nofollow noreferrer\">link</a> you will see it says &quot;We&#39;re sorry, the page of results you requested is unavailable.&quot;"}], "tags": [], "owner": {"reputation": 331, "user_id": 4702324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LAX0R.jpg?s=128&g=1", "display_name": "shreyashag", "link": "https://stackoverflow.com/users/4702324/shreyashag"}, "is_accepted": false, "score": 0, "last_activity_date": 1563475123, "creation_date": 1563475123, "answer_id": 57100783, "question_id": 56979575, "link": "https://stackoverflow.com/questions/56979575/cant-make-my-script-fetch-only-the-links-from-next-pages-from-a-stubborn-websit/57100783#57100783", "title": "Can&#39;t make my script fetch only the links from next pages from a stubborn website", "body": "<p>There is no data after that page.</p>\n\n<p>Your code should be modified to the following - </p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nlink = \"https://www.yelp.com/search?find_desc=Restaurants&amp;find_loc=New%20York%2C%20NY&amp;start={}\"\n\nfor page in range(0, 960, 30):  # modified the range to reproduce the issue\n\n    resp = requests.get(link.format(page), headers={\"User-Agent\": \"Mozilla/5.0\"})\n\n    print(resp.status_code, resp.url)\n\n    soup = BeautifulSoup(resp.text, \"lxml\")\n    for items in soup.select(\"li[class^='lemon--li__']\"):\n\n        if not items.select_one(\"h3 &gt; a[href^='/biz/']\"):\n            continue\n        lead_link = items.select_one(\"h3 &gt; a[href^='/biz/']\").get(\"href\")\n        print(lead_link)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 207, "user_id": 7180194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tnExZ.jpg?s=128&g=1", "display_name": "MITHU", "link": "https://stackoverflow.com/users/7180194/mithu"}, "edited": false, "score": 0, "creation_date": 1563720344, "post_id": 57127330, "comment_id": 100784399, "body": "Thanks for your suggestion @Endre Borza. I&#39;ve noticed several times that when a question has no answer or difficult to answer then this <b><i>do&#39;s and don&#39;ts</i></b> thing come up otherwise how restricted that site is there is always a solution I get."}], "tags": [], "owner": {"reputation": 1, "user_id": 10076053, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1D8tmRobi9Q/AAAAAAAAAAI/AAAAAAAABkc/pEuvQNqyYWw/photo.jpg?sz=128", "display_name": "Endre Borza", "link": "https://stackoverflow.com/users/10076053/endre-borza"}, "is_accepted": false, "score": 0, "last_activity_date": 1563645834, "creation_date": 1563645834, "answer_id": 57127330, "question_id": 56979575, "link": "https://stackoverflow.com/questions/56979575/cant-make-my-script-fetch-only-the-links-from-next-pages-from-a-stubborn-websit/57127330#57127330", "title": "Can&#39;t make my script fetch only the links from next pages from a stubborn website", "body": "<p>Yelp is intentionally blocking you from doing this, trying to avoid just the thing you are doing, as I expect a lot of people try writing crawlers for their site.</p>\n\n<p><a href=\"https://www.yelp.com/robots.txt\" rel=\"nofollow noreferrer\">https://www.yelp.com/robots.txt</a> even has a whimsical intro and specifically mentions crawling, and that you should contact them.</p>\n\n<p>So either you contact them if you really need the data, or try other things that might slip through the cracks, like filtering for suburbs as suggested in comments.</p>\n\n<p>Anyway, the simple answer is that what you are trying to do is not allowed by yelp, so in this way, not possible.</p>\n"}], "owner": {"reputation": 207, "user_id": 7180194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/tnExZ.jpg?s=128&g=1", "display_name": "MITHU", "link": "https://stackoverflow.com/users/7180194/mithu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 304, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1563645834, "creation_date": 1562798922, "last_edit_date": 1563639584, "question_id": 56979575, "link": "https://stackoverflow.com/questions/56979575/cant-make-my-script-fetch-only-the-links-from-next-pages-from-a-stubborn-websit", "title": "Can&#39;t make my script fetch only the links from next pages from a stubborn website", "body": "<p>I've created a script in python to scrape only the links to the different restaurants from a website traversing multiple pages. I can see how many links are there by looking at a certain text located at the top right corner like:</p>\n\n<p><strong><em>Showing 1-30 of 18891</em></strong></p>\n\n<p>But I can't go past <a href=\"https://www.yelp.com/search?find_desc=Restaurants&amp;find_loc=New%20York%2C%20NY&amp;start=960\" rel=\"nofollow noreferrer\">this link</a> manually or with script. The site increments its content by 30 in each pagination.</p>\n\n<p>I've tried so far:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nlink = 'https://www.yelp.com/search?find_desc=Restaurants&amp;find_loc=New%20York%2C%20NY&amp;start={}'\n\nfor page in range(960,1920,30): # modified the range to reproduce the issue\n\n    resp = requests.get(link.format(page),headers={\"User-Agent\":\"Mozilla/5.0\"})\n\n    print(resp.status_code,resp.url)\n\n    soup = BeautifulSoup(resp.text, \"lxml\")\n    for items in soup.select(\"li[class^='lemon--li__']\"):\n\n        if not items.select_one(\"h3 &gt; a[href^='/biz/']\"):continue\n        lead_link = items.select_one(\"h3 &gt; a[href^='/biz/']\").get(\"href\")\n        print(lead_link)\n</code></pre>\n\n<p>The above script fetches me the links from its <a href=\"https://www.yelp.com/search?find_desc=Restaurants&amp;find_loc=New%20York%2C%20NY&amp;start=960\" rel=\"nofollow noreferrer\">landing page</a> only.</p>\n\n<p><strong><em>How can I get links from other pages as well?</em></strong></p>\n"}, {"tags": ["python", "reactive-programming", "system.reactive", "rx-py"], "answers": [{"tags": [], "owner": {"reputation": 616, "user_id": 90338, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6b7de7a3c375c1f63b56041a432d5463?s=128&d=identicon&r=PG", "display_name": "greymatter", "link": "https://stackoverflow.com/users/90338/greymatter"}, "is_accepted": false, "score": 1, "last_activity_date": 1563416437, "creation_date": 1563416437, "answer_id": 57086259, "question_id": 56979489, "link": "https://stackoverflow.com/questions/56979489/how-to-implement-this-use-case-in-rxpy-v3/57086259#57086259", "title": "How to implement this use case in RxPY v3", "body": "<p>With the help of some very good folks in the #rxpy channel of <a href=\"http://pythondev.slack.com\" rel=\"nofollow noreferrer\">http://pythondev.slack.com</a> (special shout-out to Yev, my RxPY sherpa), I was able to get this working.  <a href=\"https://github.com/gargleblaster/rxpy_laboratory\" rel=\"nofollow noreferrer\">https://github.com/gargleblaster/rxpy_laboratory</a></p>\n"}], "owner": {"reputation": 616, "user_id": 90338, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/6b7de7a3c375c1f63b56041a432d5463?s=128&d=identicon&r=PG", "display_name": "greymatter", "link": "https://stackoverflow.com/users/90338/greymatter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563416437, "creation_date": 1562798193, "question_id": 56979489, "link": "https://stackoverflow.com/questions/56979489/how-to-implement-this-use-case-in-rxpy-v3", "title": "How to implement this use case in RxPY v3", "body": "<p>I have found Reactive very difficult to adopt.  I believe my problem is that the examples are too simplistic, so I am unsure how to structure a real-world solution.  I am hoping that someone will help me to get over the hump by helping me to solve a real-world problem.  I would like to do this in RxPY v3.</p>\n\n<p>The use case is this.  You have an infinite stream of stock quotes for multiple stocks coming in with symbol, bid, and ask.  You also have a position quantity (how many shares you own) which starts out at zero.  The quotes and quantity per stock are infinite observables.</p>\n\n<p>You also have three trigger prices: an entry price, a target price, and a stop price.  If your position is zero, then the entry price is active.  If the stock price rises to the entry price, then you take the action of buying the stock.  That will cause your observable position to change to something greater than zero.</p>\n\n<p>Once your position is greater than zero, the target price and stop price become active.  If price rises to the target price, you will take the action of selling the stock for a profit.  If the price falls to the stop price, you will take the action of selling the stock for a loss.  Either way, your position is then zero again, so the entry price would once again become active.</p>\n\n<p>Is this a good use case for RxPY?  If so, could someone please at least show me pseudo-code, if not real code, to implement this?  I'm not sure how to approach this.  Is it best done in one big expression, or is it somehow the interaction of multiple expressions?  Does the action always stay within a never-ending observable chain, or do these things live and die and live and die as the state changes?</p>\n\n<p>Any input very much appreciated.</p>\n"}, {"tags": ["python", "sqlite", "tkinter"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11767260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcec9cc385f8beb6006d22d266fd2234?s=128&d=identicon&r=PG&f=1", "display_name": "j.edwards81", "link": "https://stackoverflow.com/users/11767260/j-edwards81"}, "edited": false, "score": 0, "creation_date": 1562884977, "post_id": 56979619, "comment_id": 100530070, "body": "Unfortunately, this didn&#39;t help me. It gives me an index error. It is treating data_list as the original nested list (2 sample values of 130 subvalues). So data_list[0] is [First Name Last Name DOB etc] instead of [First Name]."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 1, "user_id": 11767260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcec9cc385f8beb6006d22d266fd2234?s=128&d=identicon&r=PG&f=1", "display_name": "j.edwards81", "link": "https://stackoverflow.com/users/11767260/j-edwards81"}, "edited": false, "score": 0, "creation_date": 1562886809, "post_id": 56979619, "comment_id": 100530381, "body": "do you use second version ? did you use <code>data_list =  self.results[index]</code> ?"}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": false, "score": 0, "last_activity_date": 1562799346, "creation_date": 1562799346, "answer_id": 56979619, "question_id": 56979465, "link": "https://stackoverflow.com/questions/56979465/pulling-information-from-a-sqlite-list/56979619#56979619", "title": "Pulling information from a sqlite list", "body": "<p>In <code>for</code>-loop you assings all values to the same variables </p>\n\n<pre><code>    self.db_first_name = StringVar(value=data_list[0])\n    self.db_last_name = StringVar(value=data_list[1])\n    self.db_dob = StringVar(value=data_list[2])\n</code></pre>\n\n<p>so then you can have only last value. </p>\n\n<p>Better assingn to every <code>Button</code> function with these values so every <code>Button</code> will run function <code>retrieve_form</code> with different values. It needs <code>lambda</code> function to create this function because <code>command</code> expect function without arguments. </p>\n\n<pre><code>def display_results(self):\n\n    results = self.retrieve_result()\n\n    for index, data_list in enumerate(results,10):\n\n        a = data_list[0]\n        b = data_list[1]\n        c = data_list[2]\n\n        Button(self.frame, \n            text=...,\n            command=lambda x=a, y=b, z=c:self.retrieve_form(x, y, z)\n        ).grid(...)\n\n        Label(self.frame, text=...).grid(...)\n</code></pre>\n\n<p>and function has to get values and use with <code>text=</code></p>\n\n<pre><code>def retrieve_form(self, a, b, c):\n\n    self.first_name_field = Entry(self.frame, text=a, ...) \n\n    self.last_name_field = Entry(self.frame, text=b, ...)\n\n    self.age_field = Entry(self.frame, text=b, ...) \n\n    # rest\n</code></pre>\n\n<p><code>lambda</code> has to use <code>x=a, y=b, z=c</code> because <code>lambda:self.retrieve_form(a, b, c)</code> will use the same last values with all buttons.</p>\n\n<hr>\n\n<p>Instead of values you can use <code>index</code> but you have to keep values in <code>self.results</code> instead of `results</p>\n\n<pre><code>def display_results(self):\n\n    self.results = self.retrieve_result() # &lt;-- self\n\n    for index, data_list in enumerate(results,10):\n\n        Button(self.frame, \n            text=...,\n            command=lambda x=index:self.retrieve_form(x)\n        ).grid(...)\n\n        Label(self.frame, text=...).grid(...)\n\n\ndef retrieve_form(self, index):\n\n    data_list =  self.results[index]\n\n    a = data_list[0]\n    b = data_list[1]\n    c = data_list[2]\n\n    self.first_name_field = Entry(self.frame, text=a, ...) \n\n    self.last_name_field = Entry(self.frame, text=b, ...)\n\n    self.age_field = Entry(self.frame, text=b, ...) \n\n    # rest\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11767260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcec9cc385f8beb6006d22d266fd2234?s=128&d=identicon&r=PG&f=1", "display_name": "j.edwards81", "link": "https://stackoverflow.com/users/11767260/j-edwards81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562799346, "creation_date": 1562798003, "last_edit_date": 1562798237, "question_id": 56979465, "link": "https://stackoverflow.com/questions/56979465/pulling-information-from-a-sqlite-list", "title": "Pulling information from a sqlite list", "body": "<p>I have a SQLite Database that I place multiple points of information into (name, DOB, location, etc.) using user input TKinter widgets. </p>\n\n<p>I created a form for the users and it works fine. I then created a \"reverse form\" for administrators.  It extracts the data from the database and plugs it back into a read only format so admins can see exactly how it was submitted.</p>\n\n<p>I then created a search function that displays basic results from the database.  I then used a button for admins to click to bring up the more detailed information via reverse form.  </p>\n\n<p>My problem is that when I pull the reverse form it only pulls the last entry in the search results to fill in the form.  I need for each database entry to pull up the corresponding information that goes with it. </p>\n\n<pre><code>def retrieve_result(self):    \n\n    con = sql_connect(self)\n    self.data_retrieval = con.cursor()\n    self.data_retrieval.execute('SELECT * FROM Raw_data WHERE first_name=(?)', (self.first_name_field.get(),))\n    return self.data_retrieval.fetchall()\n\n    sql_close(con)\n\n\ndef display_results(self):\n    results = self.retrieve_result()\n\n    for index, data_list in enumerate(results,10):\n        Button(self.frame, text=(data_list[0] +\" \" + data_list[1]),\ncommand=self.retrieve_form).grid(row=index+1, column=0)\n        Label(self.frame, text=data_list[2]).grid(row=index+1, column=1)\n\n        self.db_first_name = StringVar(value=data_list[0])\n        self.db_last_name = StringVar(value=data_list[1])\n        self.db_dob = StringVar(value=data_list[2])\n\ndef retrieve_form(self):\n\n    self.first_name_field = Entry(self.frame, state=DISABLED, disabledbackground=\"gray95\", disabledforeground=\"black\",textvariable=self.db_first_name, bg=\"white\") \n    self.first_name_field.grid(row=3, column=0, sticky=N) \n\n    self.last_name_field = Entry(self.frame, state=DISABLED, disabledbackground=\"gray95\", disabledforeground=\"black\", textvariable=self.db_last_name, bg=\"white\")\n    self.last_name_field.grid(row=3, column=1, sticky=N)\n\n    self.age_field = Entry(self.frame, state=DISABLED, disabledbackground=\"gray95\", disabledforeground=\"black\", textvariable=self.db_dob, bg=\"white\") \n    self.age_field.grid(row=5, column=0, sticky=N, padx=10)\n</code></pre>\n\n<p>The code is much more complex but I think I captured what is needed for assistance.  Like I said I can pull all the database information into the Kernel, but the form only retrieves the last entry in the database instead of each entry creating its own unique information.</p>\n"}, {"tags": ["python", "hex", "ascii", "encode"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 1, "creation_date": 1562798759, "post_id": 56979459, "comment_id": 100494947, "body": "You&#39;re being confused by the representation <code>b&#39;\\x021\\x00\\x001\\x03&#39;</code> you see. It <i>is</i> the sequence of byte values you want. The values being displayed correspond to the byte values <code>\\x02\\x31\\x00\\x00\\x31\\x03</code>. The two <code>1</code>s are what <code>\\x31</code> is in ASCII, so they are displayed a the ASCII character they are, not in hex notation like the other byte values."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 0, "creation_date": 1562800161, "post_id": 56979459, "comment_id": 100495244, "body": "You are seeing <a href=\"https://docs.python.org/3/reference/lexical_analysis.html#string-and-bytes-literals\" rel=\"nofollow noreferrer\">bytes literals</a>. For your last example try <code>for thing in arr: print(thing)</code>."}, {"owner": {"reputation": 19530, "user_id": 2823755, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/vCEUU.png?s=128&g=1", "display_name": "wwii", "link": "https://stackoverflow.com/users/2823755/wwii"}, "edited": false, "score": 1, "creation_date": 1562800381, "post_id": 56979459, "comment_id": 100495314, "body": "From <a href=\"https://docs.python.org/3/library/stdtypes.html#bytes-objects\" rel=\"nofollow noreferrer\">the docs</a>&quot;: <code>While bytes literals and</code> <b>representations</b> <code>are based on ASCII text, bytes objects actually behave like immutable sequences of integers, ...</code>"}, {"owner": {"reputation": 1, "user_id": 11767290, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OMoqU4J0LQU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reWpI9Q6-tF6mY3iljFhHTEzIq0jg/photo.jpg?sz=128", "display_name": "Zach", "link": "https://stackoverflow.com/users/11767290/zach"}, "edited": false, "score": 0, "creation_date": 1562851858, "post_id": 56979459, "comment_id": 100515453, "body": "Thanks guys, I knew I was just missing something silly with ASCII text."}], "owner": {"reputation": 1, "user_id": 11767290, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-OMoqU4J0LQU/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reWpI9Q6-tF6mY3iljFhHTEzIq0jg/photo.jpg?sz=128", "display_name": "Zach", "link": "https://stackoverflow.com/users/11767290/zach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 17, "favorite_count": 0, "closed_date": 1562801597, "answer_count": 0, "score": 0, "last_activity_date": 1562797976, "creation_date": 1562797976, "question_id": 56979459, "link": "https://stackoverflow.com/questions/56979459/how-do-i-encode-a-packet-in-a-hex-bytes-format", "closed_reason": "Duplicate", "title": "How do I encode a packet in a hex bytes format?", "body": "<p>I am writing a class that can communicate with a piece of equipment for a new system that is being designed.  I need to send the commands, constructed in hex, coded in bytes.  I have found a few answers on here that are very close, but I always run upon issues with the solutions.  I assume there is something stupid that I am missing here.</p>\n\n<p>I need the message being sent to look like this (this is also the example I will use to show the issues that I am currently having):\n<code>\\x02\\x31\\x00\\x00\\x31\\x03</code></p>\n\n<p>I have tried:</p>\n\n<pre><code>&gt;&gt;&gt; binascii.unhexlify('023100003103')\nb'\\x021\\x00\\x001\\x03'\n</code></pre>\n\n<p>This is not what I need, there seems to be an issue with decoding the ASCII here, but I am unsure.</p>\n\n<pre><code>&gt;&gt;&gt; struct.pack('bbbbbb', 0x02, 0x31, 0x00, 0x00, 0x31, 0x03)\nb'\\x021\\x00\\x001\\x03'\n</code></pre>\n\n<p>Since this gives the same answer, I still assume this is an issue with ASCII, but still can't confirm.</p>\n\n<pre><code>&gt;&gt;&gt; a = [2, 49, 0, 0, 49, 3]\n&gt;&gt;&gt; arr = bytes(a)\n&gt;&gt;&gt; print(arr)\nb'\\x021\\x00\\x001\\x03'\n</code></pre>\n\n<p>Same results as before, so what am I doing wrong here?</p>\n"}, {"tags": ["python", "tensorflow", "keras", "lstm", "tf.keras"], "comments": [{"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1562798316, "post_id": 56979408, "comment_id": 100494848, "body": "What is the actual shape of your training input? You claim it is (training_set_size, paragraph_length, embedding_dimension), but in reality it is (1000, 100)."}, {"owner": {"reputation": 21, "user_id": 11760756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/389880afcdc2364cbc93af5bd255bfb2?s=128&d=identicon&r=PG&f=1", "display_name": "andrew acomb", "link": "https://stackoverflow.com/users/11760756/andrew-acomb"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1562798761, "post_id": 56979408, "comment_id": 100494948, "body": "training_set_size=17744, paragraph_lenth =1000, and embedding_dim=100. It is being passed in one example at a time, and each example is of shape (1000,100)."}, {"owner": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1562799027, "post_id": 56979408, "comment_id": 100495006, "body": "Then that is the problem, you are removing the batch dimension, even a single sample should have a batch dimension of 1"}, {"owner": {"reputation": 21, "user_id": 11760756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/389880afcdc2364cbc93af5bd255bfb2?s=128&d=identicon&r=PG&f=1", "display_name": "andrew acomb", "link": "https://stackoverflow.com/users/11760756/andrew-acomb"}, "reply_to_user": {"reputation": 49730, "user_id": 349130, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e4efeebbf6994bb904738c4fb8922bf?s=128&d=identicon&r=PG", "display_name": "Dr. Snoopy", "link": "https://stackoverflow.com/users/349130/dr-snoopy"}, "edited": false, "score": 0, "creation_date": 1562861515, "post_id": 56979408, "comment_id": 100521156, "body": "Oh ok, thank you. How can I make sure it has the batch dimension of  1? When I include batch_size=1 as an argument to either model.fit or model.evaluate, I still get the first error. If I try to specify the shape of the input to the layer as (1,1000,100), where (batch_size=1, timesteps=1000,features=100), I still get get the second error."}], "owner": {"reputation": 21, "user_id": 11760756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/389880afcdc2364cbc93af5bd255bfb2?s=128&d=identicon&r=PG&f=1", "display_name": "andrew acomb", "link": "https://stackoverflow.com/users/11760756/andrew-acomb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 510, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562801889, "creation_date": 1562797593, "last_edit_date": 1562801889, "question_id": 56979408, "link": "https://stackoverflow.com/questions/56979408/incompatible-input-to-lstm-layer-in-tf-keras", "title": "Incompatible input to LSTM layer in TF.Keras", "body": "<p>I am trying to run a LSTM on some text data I have embedded. </p>\n\n<p>The input I have is of shape <code>(training_set_size, paragraph_length, embedding_dimension)</code></p>\n\n<p>The output is a vector of integers from 0-31 representing one of 32 possible labels, each word being labeled. It is of shape <code>(training_set_size, paragraph_length, 1)</code></p>\n\n<p>Before I added embedding, this was working with a few slight tweaks.\nBack then, the shape of my inputs was <code>(training_set_size, paragraph_length, 1)</code> and the input_shape for the LSTM layer was <code>(paragraph_length, 1)</code></p>\n\n<p>My problem is that I am getting one of two errors, and solving one seems to cause the other.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>model = tf.keras.models.Sequential([\n    tf.keras.layers.LSTM(128, input_shape = (input_len, embedding_dim), return_sequences=True),\n    tf.keras.layers.TimeDistributed(tf.keras.layers.Dense(32))\n])\n\nmodel.compile('adam', 'sparse_categorical_crossentropy', metrics=['accuracy'])\n\nmodel.fit(x_train, y_train, epochs=5)\nmodel.evaluate(x_test, y_test)\n</code></pre>\n\n<p>The above code yields the following error:</p>\n\n<blockquote>\n  <p>ValueError: Error when checking input: expected lstm_input to have 3 dimensions, but got array with shape (1000, 100)</p>\n</blockquote>\n\n<hr>\n\n<p>So I have tried to change the shape of the LSTM input:</p>\n\n<pre><code>input_shape = (input_len, embedding_dim, 1)\n</code></pre>\n\n<p>This instead yields the following different error:</p>\n\n<blockquote>\n  <p>Input 0 of layer lstm_8 is incompatible with the layer: expected ndim=3, found ndim=4. Full shape received: [None, 1000, 100, 1]</p>\n</blockquote>\n\n<p>EDIT: <code>training_set_size=17744</code>, <code>paragraph_length=1000</code>, and <code>embedding_dim=100</code></p>\n"}, {"tags": ["python", "python-3.x", "pip", "version", "spacy"], "answers": [{"tags": [], "owner": {"reputation": 37796, "user_id": 2650249, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/RBWDR.jpg?s=128&g=1", "display_name": "hoefling", "link": "https://stackoverflow.com/users/2650249/hoefling"}, "is_accepted": true, "score": 1, "last_activity_date": 1562831762, "creation_date": 1562831762, "answer_id": 56984255, "question_id": 56979376, "link": "https://stackoverflow.com/questions/56979376/error-could-not-find-a-version-that-satisfies-the-requirement-preshed-2-0-1/56984255#56984255", "title": "ERROR: Could not find a version that satisfies the requirement preshed==2.0.1", "body": "<p>You have <code>pip</code> set up to look for packages in your private repository (<code>frs-art.jpmchase.net</code>) which is missing the package. Either upload the <code>preshed</code> package (and its eventual dependencies) to the private repo, or install <code>preshed</code> from PyPI:</p>\n\n<pre><code>$ pip install preshed --index-url=https://pypi.org/simple/\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9026378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QUt3N.jpg?s=128&g=1", "display_name": "genelaw03", "link": "https://stackoverflow.com/users/9026378/genelaw03"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2133, "favorite_count": 0, "accepted_answer_id": 56984255, "answer_count": 1, "score": 0, "last_activity_date": 1562831762, "creation_date": 1562797309, "question_id": 56979376, "link": "https://stackoverflow.com/questions/56979376/error-could-not-find-a-version-that-satisfies-the-requirement-preshed-2-0-1", "title": "ERROR: Could not find a version that satisfies the requirement preshed==2.0.1", "body": "<p>I am trying to install spaCy on Windows. I am running python 3.6.  When I run</p>\n\n<p><code>pip install -U spacy</code></p>\n\n<p>I get the following error:</p>\n\n<pre><code>Looking in indexes: https://frs-art.jpmchase.net/artifactory/api/pypi/jpmc-publi                              c-pypi/simple/\nCollecting spacy\n  Downloading https://frs-art.jpmchase.net/artifactory/api/pypi/jpmc-public-pypi                              /packages/spacy/2.1.4/spacy-2.1.4.tar.gz (29.8MB)\n  Installing build dependencies: started\n  Installing build dependencies: finished with status 'error'\n  ERROR: Complete output from command 'c:\\fast\\python\\3.6.4\\python.exe' 'c:\\fast\\python\\3.6.4\\lib\\site-packages\\pip' install --ignore-installed --no-user --prefix 'C:\\Users\\r419957\\AppData\\Local\\Temp\\pip-build-env-8u72uukr\\overlay' --no-warn-script-location --no-binary :none: --only-binary :none: -i https://frs-art.jpm                              chase.net/artifactory/api/pypi/jpmc-public-pypi/simple/ -- setuptools 'wheel&gt;0.32.0.&lt;0.33.0' Cython 'cymem&gt;=2.0.2,&lt;2.1.0' 'preshed&gt;=2.0.1,&lt;2.1.0' 'murmurhash&gt;=0.28.0,&lt;1.1.0' thinc==7.0.0.dev6:\n  ERROR: Looking in indexes: https://frs-art.jpmchase.net/artifactory/api/pypi/jpmc-public-pypi/simple/\n  Collecting setuptools\n    Downloading https://frs-art.jpmchase.net/artifactory/api/pypi/jpmc-public-py                              pi/packages/setuptools/41.0.1/setuptools-41.0.1-py2.py3-none-any.whl (575kB)\n  Collecting wheel&gt;0.32.0.&lt;0.33.0\n    Downloading https://frs-art.jpmchase.net/artifactory/api/pypi/jpmc-public-pypi/packages/wheel/0.33.4/wheel-0.33.4-py2.py3-none-any.whl\n  Collecting Cython\n    Downloading https://frs-art.jpmchase.net/artifactory/api/pypi/jpmc-public-pypi/packages/Cython/0.29.2/Cython-0.29.2-cp36-cp36m-win32.whl (1.6MB)\n  Collecting cymem&lt;2.1.0,&gt;=2.0.2\n    Downloading https://frs-art.jpmchase.net/artifactory/api/pypi/jpmc-public-pypi/packages/cymem/2.0.2/cymem-2.0.2-cp36-cp36m-win32.whl\n  Collecting preshed&lt;2.1.0,&gt;=2.0.1\n    ERROR: Could not find a version that satisfies the requirement preshed&lt;2.1.0,&gt;=2.0.1 (from versions: 1.0.0, 1.0.1)\n  ERROR: No matching distribution found for preshed&lt;2.1.0,&gt;=2.0.1\n  ----------------------------------------\nERROR: Command \"'c:\\fast\\python\\3.6.4\\python.exe' 'c:\\fast\\python\\3.6.4\\lib\\site-packages\\pip' install --ignore-installed --no-user --prefix 'C:\\Users\\r419957\\A                              ppData\\Local\\Temp\\pip-build-env-8u72uukr\\overlay' --no-warn-script-location --no-binary :none: --only-binary :none: -i https://frs-art.jpmchase.net/artifactory/api/pypi/jpmc-public-pypi/simple/ -- setuptools 'wheel&gt;0.32.0.&lt;0.33.0' Cython 'cymem&gt;=2.0.2,&lt;2.1.0' 'preshed&gt;=2.0.1,&lt;2.1.0' 'murmurhash&gt;=0.28.0,&lt;1.1.0' thinc==7.0.0.dev6\" failed with error code 1 in None\n</code></pre>\n\n<p>I then tried to download preshed by itself by running </p>\n\n<p><code>pip install preshed</code></p>\n\n<p>This however does not install the version I need which is 2.0.1</p>\n\n<p>When I run </p>\n\n<p><code>pip install preshed==2.0.1</code></p>\n\n<p>I get the following error</p>\n\n<pre><code>ERROR: Could not find a version that satisfies the requirement preshed==2.0.1 (from versions: 1.0.0, 1.0.1)\nERROR: No matching distribution found for preshed==2.0.1\n</code></pre>\n\n<p>Any help figuring out what is going wrong would be appreciated. Thanks.</p>\n"}, {"tags": ["python", "pandas", "group-by", "pandas-groupby", "cumsum"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 11661320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90223a876042279784079c31f1995914?s=128&d=identicon&r=PG&f=1", "display_name": "Nik Tur", "link": "https://stackoverflow.com/users/11661320/nik-tur"}, "edited": false, "score": 0, "creation_date": 1562798544, "post_id": 56979462, "comment_id": 100494902, "body": "thank you for your help, it does calculate the cumulative values, but it doesn&#39;t take into account the column values (it doesn&#39;t groupby) so even though the Branch ID&#39;s and Serial #&#39;s are different, it doesn&#39;t take that into account. For example (value2_cumulative in your dataframe should ideally be 5, 0, 14 because the second row(serial# = 6) isn&#39;t the same as the first and third row (serial#=1)"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 43, "user_id": 11661320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90223a876042279784079c31f1995914?s=128&d=identicon&r=PG&f=1", "display_name": "Nik Tur", "link": "https://stackoverflow.com/users/11661320/nik-tur"}, "edited": false, "score": 0, "creation_date": 1562798659, "post_id": 56979462, "comment_id": 100494921, "body": "@NikTur check your input df , I think that is off you 3rd line is not the same as 1st line"}, {"owner": {"reputation": 43, "user_id": 11661320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90223a876042279784079c31f1995914?s=128&d=identicon&r=PG&f=1", "display_name": "Nik Tur", "link": "https://stackoverflow.com/users/11661320/nik-tur"}, "edited": false, "score": 0, "creation_date": 1562798750, "post_id": 56979462, "comment_id": 100494946, "body": "I just checked, and it seems to be the same. so sorry for the trouble - do you see a difference i&#39;m possibly missing?"}, {"owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "reply_to_user": {"reputation": 43, "user_id": 11661320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90223a876042279784079c31f1995914?s=128&d=identicon&r=PG&f=1", "display_name": "Nik Tur", "link": "https://stackoverflow.com/users/11661320/nik-tur"}, "edited": false, "score": 0, "creation_date": 1562799087, "post_id": 56979462, "comment_id": 100495018, "body": "@NikTur from you df your 3rd line is 5,6 and in your print df , it is 1,2 ?"}, {"owner": {"reputation": 43, "user_id": 11661320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90223a876042279784079c31f1995914?s=128&d=identicon&r=PG&f=1", "display_name": "Nik Tur", "link": "https://stackoverflow.com/users/11661320/nik-tur"}, "edited": false, "score": 0, "creation_date": 1562799179, "post_id": 56979462, "comment_id": 100495039, "body": "ah my apologies, I&#39;ll fix that!"}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 0, "last_activity_date": 1562804281, "last_edit_date": 1562804281, "creation_date": 1562797990, "answer_id": 56979462, "question_id": 56979375, "link": "https://stackoverflow.com/questions/56979375/performing-cumsum-on-multiple-columns-based-on-matching-index-values/56979462#56979462", "title": "Performing cumsum on multiple columns based on matching index values", "body": "<p>In your case , you need overwrite the value back to df , then </p>\n\n<pre><code>l=['Serial #', 'Branch ID', \n'Info']\ndf=df.drop(l,1).apply(pd.to_numeric, errors='coerce').combine_first(df)\ndf=df.set_index(l).groupby(level=[0,1,2]).cumsum().add_suffix('_cumulative').reset_index()\ndf\ndf\n   Serial #  Branch ID  ... Value1_cumulative  Value2_cumulative\n0       1.0        2.0  ...                 4                  5\n1       6.0        7.0  ...                 9                  0\n2       1.0        2.0  ...                12                 14\n[3 rows x 5 columns]\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 11661320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90223a876042279784079c31f1995914?s=128&d=identicon&r=PG&f=1", "display_name": "Nik Tur", "link": "https://stackoverflow.com/users/11661320/nik-tur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562804281, "creation_date": 1562797306, "last_edit_date": 1562799252, "question_id": 56979375, "link": "https://stackoverflow.com/questions/56979375/performing-cumsum-on-multiple-columns-based-on-matching-index-values", "title": "Performing cumsum on multiple columns based on matching index values", "body": "<p>I have a dataframe that currently looks like this: </p>\n\n<pre><code> df = pd.DataFrame(np.array([[1, 2, 'Apples 20pk ABC123', 4, 5], [6, 7, \n 'Bananas 20pk ABC123', 9, 0], [1, 2, 'Apples 20pk ABC123', 8, 9]]), \n columns= ['Serial #', 'Branch ID', 'Info', 'Value1', 'Value2'])\n\n               Serial#  Branch ID    Info                  Value1   Value2\n        0         1       2          Apples 20pk ABC123       4        5\n        1         6       7          Bananas 20pk ABC123      9        0\n        2         1       2          Apples 20pk ABC123       8        9\n</code></pre>\n\n<p>I wanted to groupby the columns: Serial#, Branch ID, and Info to get the cumulative sum of the columns \"value1\" and \"value2\". Essentially, it'll only perform \"cumsum\" if the values under the Serial#, BranchID, and Info columns match. </p>\n\n<p>I thought that I could do something like below, but I'm only getting a df that returns just the index:</p>\n\n<pre><code>df[df.columns.difference(['Serial#', 'Branch ID', \n'Info'])].apply(pd.to_numeric, errors='coerce')\n# converting other columns(not the three groupby columns) to numeric values \n\ndf_cumulative = df.groupby(['Serial#', 'Branch ID', \n'Info']).cumsum().add_suffix('_cumulative')\n</code></pre>\n\n<p>The end result ideally would be:</p>\n\n<pre><code>           Serial#  Branch ID   Info                 Value1_cum  Value2_cum\n        0     1       2         Apples 20pk ABC123       4        5\n        1     6       7         Bananas 20pk ABC123      9        0\n        2     1       2         Apples 20pk ABC123       12       14\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["python", "python-requests", "python-3.6"], "answers": [{"tags": [], "owner": {"reputation": 12091, "user_id": 1391717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/oSSdx.jpg?s=128&g=1", "display_name": "Matthew Moisen", "link": "https://stackoverflow.com/users/1391717/matthew-moisen"}, "is_accepted": false, "score": 0, "last_activity_date": 1562868379, "creation_date": 1562868379, "answer_id": 56995065, "question_id": 56979336, "link": "https://stackoverflow.com/questions/56979336/flask-or-requests-is-hanging-unless-timeout-is-specified-and-hangs-until-the-sp/56995065#56995065", "title": "Flask or Requests is Hanging unless timeout is specified, and hangs until the specified timeout", "body": "<p>After about three hours of debugging, I restarted my computer and the problem went away. I do not know the root cause.</p>\n"}], "owner": {"reputation": 12091, "user_id": 1391717, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/oSSdx.jpg?s=128&g=1", "display_name": "Matthew Moisen", "link": "https://stackoverflow.com/users/1391717/matthew-moisen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562868379, "creation_date": 1562796991, "question_id": 56979336, "link": "https://stackoverflow.com/questions/56979336/flask-or-requests-is-hanging-unless-timeout-is-specified-and-hangs-until-the-sp", "title": "Flask or Requests is Hanging unless timeout is specified, and hangs until the specified timeout", "body": "<p>I'm on a new computer and running into a strange issue:</p>\n\n<p>Using <code>requests</code> without the <code>timeout</code> parameter simply hangs forever. </p>\n\n<p>Using <code>timeout</code> parameter results in the request hanging until the value in <code>timeout</code> has passed; for example, if <code>timeout</code> is set to 2, the request hangs for two seconds; if <code>timeout</code> is set to 10; the request hangs for 10 seconds.</p>\n\n<p>Using Firefox or Postman or etc. doesn't result in this behavior.</p>\n\n<p>I'm on Python 3.6.5 using requests 2.19.1.</p>\n\n<p>Flask code:</p>\n\n<pre><code>import flask\n\napp = flask.Flask(__name__)\n\n@app.route('/')\ndef home():\n     return 'hello'\n\napp.run(host='localhost', port=8080, debug=True)\n</code></pre>\n\n<p>Calling code:</p>\n\n<pre><code>import requests\n\n# This is instant\nrequests.get('http://localhost:8080/', timeout=0.1)\n\n# This hangs for 2 seconds\nrequests.get('http://localhost:8080/', timeout=2)\n\n# This hangs for 10 seconds\nrequests.get('http://localhost:8080/', timeout=10)\n\n# This hangs forever without a `timeout` param\nrequests.get('http://localhost:8080')\n</code></pre>\n\n<p>Using Firefox or Postman results in an instant response, so I figure it has something to do with <code>requests</code>.</p>\n\n<p>On my old computer, I cannot replicate this behavior with the same versions of Python and requests.</p>\n\n<p>Incidentally, when I first loaded this new computer about a month ago, I did not have a problem. </p>\n"}, {"tags": ["python", "pickle", "itertools"], "comments": [{"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 1, "creation_date": 1562796767, "post_id": 56979295, "comment_id": 100494447, "body": "In general, serializing an iterator is probably something you want to avoid"}, {"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 1, "creation_date": 1562797402, "post_id": 56979295, "comment_id": 100494593, "body": "110 choose 6 is 2,141,851,635 combinations, right? That&#39;s an awful lot to write to disk,"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1562801848, "post_id": 56979295, "comment_id": 100495560, "body": "To avoid saving 2 billion+ combinations explicitly in the file, you should instead store something that represents them in a compact abstract way."}, {"owner": {"reputation": 3, "user_id": 11767282, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XB5FrIO3oOk/AAAAAAAAAAI/AAAAAAAALfM/E8fpCdO_ikw/photo.jpg?sz=128", "display_name": "Lorenzo", "link": "https://stackoverflow.com/users/11767282/lorenzo"}, "edited": false, "score": 0, "creation_date": 1562870919, "post_id": 56979295, "comment_id": 100525331, "body": "Yes but I need store all the combinations for further analysis. I&#39;ve more disk space than memory ;)"}, {"owner": {"reputation": 2196, "user_id": 1980863, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8a9248211c4148f5d7df2269aa711e2e?s=128&d=identicon&r=PG", "display_name": "RandomB", "link": "https://stackoverflow.com/users/1980863/randomb"}, "edited": false, "score": 0, "creation_date": 1562871377, "post_id": 56979295, "comment_id": 100525532, "body": "if you want to store just a list, use array (<a href=\"https://docs.python.org/3/library/array.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/array.html</a>) if list items are of same type. Otherwise use struct (<a href=\"https://docs.python.org/3/library/struct.html\" rel=\"nofollow noreferrer\">docs.python.org/3/library/struct.html</a>). If you want to restart iterator, you should to know formula of generating values and to store its intermediate state (a step)"}, {"owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "edited": false, "score": 0, "creation_date": 1562871463, "post_id": 56979295, "comment_id": 100525564, "body": "Give some more thought to how you need to access them. For example, to sum a series of numbers, you don&#39;t need to have them all in memory or on disk at once; you only need the <i>next</i> number, which you can discard after you&#39;ve added that to a running total."}, {"owner": {"reputation": 3, "user_id": 11767282, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XB5FrIO3oOk/AAAAAAAAAAI/AAAAAAAALfM/E8fpCdO_ikw/photo.jpg?sz=128", "display_name": "Lorenzo", "link": "https://stackoverflow.com/users/11767282/lorenzo"}, "edited": false, "score": 0, "creation_date": 1562882929, "post_id": 56979295, "comment_id": 100529602, "body": "I want to store the entire list of arrays, all the combination, i have to confront and and minimize the list but I need the results stored, the eduction will be not so drastic, maybe 20-25% but the result will still be a very large array that can&#39;t be stored in memory"}], "answers": [{"comments": [{"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 0, "creation_date": 1562798199, "post_id": 56979446, "comment_id": 100494817, "body": "Any idea how big that file will be or how long it will take to save?"}, {"owner": {"reputation": 165, "user_id": 5769953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/odhpp.jpg?s=128&g=1", "display_name": "jitter", "link": "https://stackoverflow.com/users/5769953/jitter"}, "reply_to_user": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "edited": false, "score": 1, "creation_date": 1562798830, "post_id": 56979446, "comment_id": 100494961, "body": "If my math is not completely off it should be around 30-60min with below 66GB."}, {"owner": {"reputation": 63658, "user_id": 5014455, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JTknr.png?s=128&g=1", "display_name": "juanpa.arrivillaga", "link": "https://stackoverflow.com/users/5014455/juanpa-arrivillaga"}, "edited": false, "score": 0, "creation_date": 1562799169, "post_id": 56979446, "comment_id": 100495038, "body": "You should ditch <code>numpy</code> for this, it will be unnecessarily slow"}, {"owner": {"reputation": 4917, "user_id": 2320961, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AdwXN.png?s=128&g=1", "display_name": "Nic3500", "link": "https://stackoverflow.com/users/2320961/nic3500"}, "edited": false, "score": 3, "creation_date": 1562799991, "post_id": 56979446, "comment_id": 100495205, "body": "While this code may answer the question, providing additional context regarding why and/or how this code answers the question improves its long-term value."}, {"owner": {"reputation": 3, "user_id": 11767282, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XB5FrIO3oOk/AAAAAAAAAAI/AAAAAAAALfM/E8fpCdO_ikw/photo.jpg?sz=128", "display_name": "Lorenzo", "link": "https://stackoverflow.com/users/11767282/lorenzo"}, "edited": false, "score": 0, "creation_date": 1563055287, "post_id": 56979446, "comment_id": 100576388, "body": "The answer provided solved my problem that basically was to write to disk all the combinations. Nothing else sorry"}], "tags": [], "owner": {"reputation": 165, "user_id": 5769953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/odhpp.jpg?s=128&g=1", "display_name": "jitter", "link": "https://stackoverflow.com/users/5769953/jitter"}, "is_accepted": true, "score": 0, "last_activity_date": 1563046775, "last_edit_date": 1563046775, "creation_date": 1562797862, "answer_id": 56979446, "question_id": 56979295, "link": "https://stackoverflow.com/questions/56979295/itertool-combination-dumping/56979446#56979446", "title": "Itertool combination dumping", "body": "<pre><code>import numpy as np\nfrom itertools import combinations\n\nwith open('file', 'w') as f:\n    numbers = np.arange(1,110)\n    for i in combinations(numbers, 6):\n        print(i, file=f)\n</code></pre>\n\n<p>This saves the output line by line, so not much memory is needed.</p>\n"}], "owner": {"reputation": 3, "user_id": 11767282, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XB5FrIO3oOk/AAAAAAAAAAI/AAAAAAAALfM/E8fpCdO_ikw/photo.jpg?sz=128", "display_name": "Lorenzo", "link": "https://stackoverflow.com/users/11767282/lorenzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "accepted_answer_id": 56979446, "answer_count": 1, "score": 0, "last_activity_date": 1563046775, "creation_date": 1562796669, "last_edit_date": 1562796971, "question_id": 56979295, "link": "https://stackoverflow.com/questions/56979295/itertool-combination-dumping", "title": "Itertool combination dumping", "body": "<p>I'm looking for a solution to store itertools.combination on file because with combination of 6 number my pc kill the process when swap is full. </p>\n\n<p>I read about klepto but I don't know how to store the list.</p>\n\n<pre><code>numbers = np.arange(1,110)  \ncombinations(numbers, 6))\n</code></pre>\n"}, {"tags": ["python", "beautifulsoup", "python-requests", "lxml"], "comments": [{"owner": {"reputation": 1308, "user_id": 3362720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0150ac5ebcb0e2a5c1e5fdc9931123a4?s=128&d=identicon&r=PG", "display_name": "Oussama", "link": "https://stackoverflow.com/users/3362720/oussama"}, "edited": false, "score": 0, "creation_date": 1562798270, "post_id": 56979290, "comment_id": 100494837, "body": "Try to use beautiful soup also to submit the login information...  <a href=\"https://stackoverflow.com/questions/23102833/how-to-scrape-a-website-which-requires-login-using-python-and-beautifulsoup\" title=\"how to scrape a website which requires login using python and beautifulsoup\">stackoverflow.com/questions/23102833/&hellip;</a>  also you could try using &quot;selenium&quot;. With &quot;selenium&quot; you will be able to see the automated browser and what is actually going on and thus debug much more efficiently."}, {"owner": {"reputation": 66, "user_id": 11879918, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b46f5dd4d25f3843a58f5afd7ffedc7d?s=128&d=identicon&r=PG&f=1", "display_name": "akin_ai", "link": "https://stackoverflow.com/users/11879918/akin-ai"}, "edited": false, "score": 0, "creation_date": 1565537315, "post_id": 56979290, "comment_id": 101377447, "body": "Its kinda hard moving without the actual website . If you could provide the actual link , tackling the problem would be a bit easier"}], "owner": {"reputation": 11, "user_id": 11767248, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-iO0TIn3Av9s/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re006SAsbcbdsPSI1anM5THPCcI6g/photo.jpg?sz=128", "display_name": "Ryan Claxton", "link": "https://stackoverflow.com/users/11767248/ryan-claxton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562796638, "creation_date": 1562796638, "question_id": 56979290, "link": "https://stackoverflow.com/questions/56979290/web-scraping-with-login-page", "title": "Web scraping with login page", "body": "<p>I'm trying to use python to scrape a webpage with a login page. I've tried using a few examples from stackoverflow that have been accepted as working examples, but none seem to work for me</p>\n\n<p>Attempt 1:</p>\n\n<pre><code>import requests\nfrom lxml import html\n\nUSERNAME = \"my username\"\nPASSWORD = \"my password\"\nTOKEN = \"my token\"\n\nLOGIN_URL = \"https://example.com/admin/login\"\nURL = \"https://example.com/admin/tickets\"\n\nsession_requests = requests.session()\n\n# Get login csrf token\nresult = session_requests.get(LOGIN_URL)\ntree = html.fromstring(result.text)authenticity_token = list(set(tree.xpath(\"//input[@name='_token']/@value\")))[0]\n\n# Create payload\npayload = {\n\"name\": USERNAME, \n\"password\": PASSWORD, \n\"_token\": TOKEN\n}\n\n# Perform login\nresult = session_requests.post(LOGIN_URL, data = payload, headers = dict(referer = LOGIN_URL))\n\n# Scrape url\nresult = session_requests.get(URL, headers = dict(referer = URL))\ntree = html.fromstring(result.content)\nbucket_names = tree.xpath(\"//div[@class='a']/a/text()\")\n\nprint(bucket_names)\n</code></pre>\n\n<p>Attempt 2:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\nusername = 'my username'\npassword = 'my password'\nscrape_url = 'https://example.com/admin/tickets'\n\nlogin_url = 'https://example.com/admin/login'\nlogin_info = {'name': username,'password': password}\n\n#Start session.\nsession = requests.session()\n\n#Login using your authentication information.\nsession.post(url=login_url, data=login_info)\n\n#Request page you want to scrape.\nurl = session.get(url=scrape_url)\n\nsoup = BeautifulSoup(url.content, 'html.parser')\n\nfor link in soup.findAll('a'):\nprint('\\nLink href: ' + link['href'])\nprint('Link text: ' + link.text)\n</code></pre>\n\n<p>The first example prints the result:</p>\n\n<pre><code>[]\n</code></pre>\n\n<p>The second give me links from the login page, not links from the main srape url</p>\n\n<p>I'm really not sure what the problem is, any pointers would be greatly appreciated</p>\n\n<p>Thanks</p>\n\n<p>Ryan</p>\n"}, {"tags": ["python", "image", "jpeg", "rename", "move"], "comments": [{"owner": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1562825795, "post_id": 56979272, "comment_id": 100500663, "body": "What OS do you use?"}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "reply_to_user": {"reputation": 144849, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 1, "creation_date": 1562877310, "post_id": 56979272, "comment_id": 100527817, "body": "@Mark: With the right Python code, it&#39;s not really important\u2026(nice photos, BTW)"}], "answers": [{"tags": [], "owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "is_accepted": true, "score": 1, "last_activity_date": 1562876992, "last_edit_date": 1562876992, "creation_date": 1562809972, "answer_id": 56980653, "question_id": 56979272, "link": "https://stackoverflow.com/questions/56979272/how-do-i-move-and-rename-images-from-a-dvr-with-a-script/56980653#56980653", "title": "How do I move and rename images from a DVR with a script?", "body": "<p>You could do this by using the <a href=\"https://docs.python.org/3/library/os.html#os.walk\" rel=\"nofollow noreferrer\"><code>os.walk()</code></a> function to find all the camera image files, and the <a href=\"https://docs.python.org/3/library/pathlib.html#module-pathlib\" rel=\"nofollow noreferrer\"><code>pathlib</code></a> module to get the components of the path needed to construct the destination filename. Once you have the full paths of the source and destiniation files, you can then use the <a href=\"https://docs.python.org/3/library/shutil.html#shutil.move\" rel=\"nofollow noreferrer\"><code>shutil.move()</code></a> function to move and rename each one.</p>\n\n<p><strong>Note:</strong> The code requires at least Python 3.4 to run because of its use of <code>pathlib</code> and I've commented-out the line that actually does the moving and renaming, so you can safely run and test the script to see what it would do without doing any damage.</p>\n\n<pre><code>import os\nimport pathlib\nimport shutil\n\n\nIMAGE_FILENAME = '00[R][0@0][0].jpg'\nEXT = os.path.splitext(IMAGE_FILENAME)[1]  # Image file extension.\nroot = 'MainFolder'\ncount = 0\n\nfor dir_name, sub_dirs, files in os.walk(root, topdown=False):\n    for filename in files:\n        if filename == IMAGE_FILENAME:\n            src = os.path.join(dir_name, filename)\n            relpath = os.path.relpath(src, root)  # Relative to root folder.\n            parts = pathlib.Path(relpath).parts  # Relative path components.\n            dst = os.path.join(root, parts[0] + '_' + parts[3] + parts[4] + EXT)\n            print(' moving \"{}\" to \"{}\"'.format(src, dst))\n#            shutil.move(src, dst)\n            count += 1\n\nprint('{} files moved'.format(count))\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 6143325, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d4a4d0cc06555b3481769de289cd09a0?s=128&d=identicon&r=PG&f=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/6143325/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 56980653, "answer_count": 1, "score": 0, "last_activity_date": 1562876992, "creation_date": 1562796563, "last_edit_date": 1562800604, "question_id": 56979272, "link": "https://stackoverflow.com/questions/56979272/how-do-i-move-and-rename-images-from-a-dvr-with-a-script", "title": "How do I move and rename images from a DVR with a script?", "body": "<p>I have a DVR camera that takes hourly images and stores each in its own folder. I would like to use a python script to move all the images into one main folder and rename them based on the folders they are located in. The current folder structure is shown below.</p>\n\n<p>image 1 - <code>MainFolder/2019-07-04/001/jpg/07/00/00[R][0@0][0].jpg</code></p>\n\n<p>image 2 - <code>MainFolder/2019-07-04/001/jpg/08/00/00[R][0@0][0].jpg</code></p>\n\n<p>image 3 - <code>MainFolder/2019-07-04/001/jpg/09/00/00[R][0@0][0].jpg</code></p>\n\n<p>the next day the images would be</p>\n\n<p>image 25 - <code>MainFolder/2019-07-05/001/jpg/07/00/00[R][0@0][0].jpg</code></p>\n\n<p>The /jpg/07/00 in the above reference is for 7:00am.</p>\n\n<p>I would like \n<code>MainFolder/2019_7_04_0700.jpg</code>\nand\n<code>MainFolder/2019_7_04_0800.jpg</code> for the following hour photo.</p>\n\n<p>Currently I have a folder nightmare and each image is named <code>00[R][0@0][0].jpg</code>.</p>\n"}, {"tags": ["python", "pandas", "datetime", "timezone"], "answers": [{"comments": [{"owner": {"reputation": 3880, "user_id": 5328289, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0e0e88b500a567f9572d0f8fe4e99405?s=128&d=identicon&r=PG&f=1", "display_name": "M.E.", "link": "https://stackoverflow.com/users/5328289/m-e"}, "edited": false, "score": 0, "creation_date": 1562799766, "post_id": 56979328, "comment_id": 100495154, "body": "Same comment than with WeNYoBen&#39;s answer. Isn&#39;t timezone being lost by doing that? -06:00 does not uniquely define a timezone, it just define a GMT offset."}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "reply_to_user": {"reputation": 3880, "user_id": 5328289, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0e0e88b500a567f9572d0f8fe4e99405?s=128&d=identicon&r=PG&f=1", "display_name": "M.E.", "link": "https://stackoverflow.com/users/5328289/m-e"}, "edited": false, "score": 0, "creation_date": 1562799818, "post_id": 56979328, "comment_id": 100495167, "body": "You didn&#39;t mention that you want to keep the time zone. But that&#39;s easy to fix."}, {"owner": {"reputation": 3880, "user_id": 5328289, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0e0e88b500a567f9572d0f8fe4e99405?s=128&d=identicon&r=PG&f=1", "display_name": "M.E.", "link": "https://stackoverflow.com/users/5328289/m-e"}, "edited": false, "score": 0, "creation_date": 1562800849, "post_id": 56979328, "comment_id": 100495389, "body": "thanks, I was actually curious if the timezone can be embbeded as part of the datetime object. Same as in Python (example: <a href=\"https://stackoverflow.com/questions/4530069/python-how-to-get-a-value-of-datetime-today-that-is-timezone-aware\" title=\"python how to get a value of datetime today that is timezone aware\">stackoverflow.com/questions/4530069/&hellip;</a>)"}], "tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 1, "last_activity_date": 1562799981, "last_edit_date": 1562799981, "creation_date": 1562796901, "answer_id": 56979328, "question_id": 56979265, "link": "https://stackoverflow.com/questions/56979265/timestamp-with-timezone-column-in-pandas/56979328#56979328", "title": "Timestamp with timezone column in Pandas", "body": "<p>You can try remove the <code>[...]</code> part, then pass it to <code>to_datetime</code>:</p>\n\n<pre><code>pd.to_datetime(df.timestamp.str.extract('(.*)\\[.*\\]')[0])\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code>0   2019-02-24 17:00:00-06:00\n1   2019-02-24 17:05:00-06:00\n2   2019-02-24 17:10:00-06:00\n3   2019-02-24 17:15:00-06:00\n4   2019-02-24 17:20:00-06:00\nName: 0, dtype: datetime64[ns, pytz.FixedOffset(-360)]\n</code></pre>\n\n<p>You can keep the timezone label by adding one more capture group in the regex pattern:</p>\n\n<pre><code>pattern = '(?P&lt;time&gt;.*)\\[(?P&lt;zone&gt;.*)\\]'\nnew_df = df.timestamp.str.extract(pattern)\n</code></pre>\n\n<p>Then <code>new_df</code> is:</p>\n\n<pre><code>                     time        zone\n0  2019-02-24T17:00-06:00  US/Central\n1  2019-02-24T17:05-06:00  US/Central\n2  2019-02-24T17:10-06:00  US/Central\n3  2019-02-24T17:15-06:00  US/Central\n4  2019-02-24T17:20-06:00  US/Central\n</code></pre>\n\n<p>which you can convert <code>time</code> by <code>pd.to_datetime</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 3880, "user_id": 5328289, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0e0e88b500a567f9572d0f8fe4e99405?s=128&d=identicon&r=PG&f=1", "display_name": "M.E.", "link": "https://stackoverflow.com/users/5328289/m-e"}, "edited": false, "score": 0, "creation_date": 1562799727, "post_id": 56979373, "comment_id": 100495147, "body": "Isn&#39;t timezone being lost by doing that? -06:00 does not uniquely define a timezone, it just define a GMT offset."}], "tags": [], "owner": {"reputation": 254200, "user_id": 7964527, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HPW8R.jpg?s=128&g=1", "display_name": "BENY", "link": "https://stackoverflow.com/users/7964527/beny"}, "is_accepted": false, "score": 1, "last_activity_date": 1562797288, "creation_date": 1562797288, "answer_id": 56979373, "question_id": 56979265, "link": "https://stackoverflow.com/questions/56979265/timestamp-with-timezone-column-in-pandas/56979373#56979373", "title": "Timestamp with timezone column in Pandas", "body": "<p>One way </p>\n\n<pre><code>pd.to_datetime(df.timestamp.str.split('[').str[0])\nOut[137]: \n0   2019-02-24 17:00:00-06:00\n1   2019-02-24 17:05:00-06:00\n2   2019-02-24 17:10:00-06:00\n3   2019-02-24 17:15:00-06:00\n4   2019-02-24 17:20:00-06:00\nName: timestamp, dtype: datetime64[ns, pytz.FixedOffset(-360)]\n</code></pre>\n"}], "owner": {"reputation": 3880, "user_id": 5328289, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0e0e88b500a567f9572d0f8fe4e99405?s=128&d=identicon&r=PG&f=1", "display_name": "M.E.", "link": "https://stackoverflow.com/users/5328289/m-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1562799981, "creation_date": 1562796511, "question_id": 56979265, "link": "https://stackoverflow.com/questions/56979265/timestamp-with-timezone-column-in-pandas", "title": "Timestamp with timezone column in Pandas", "body": "<p>I am reading data from a Java source. I end up with the following dataframe:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>df.head()\n\n    open        timestamp\n0   1.13550     2019-02-24T17:00-06:00[US/Central]\n1   1.13570     2019-02-24T17:05-06:00[US/Central]\n2   1.13560     2019-02-24T17:10-06:00[US/Central]\n3   1.13565     2019-02-24T17:15-06:00[US/Central]\n4   1.13570     2019-02-24T17:20-06:00[US/Central]\n\ndf.dtypes\n\nopen        float64\ntimestamp   object\ndtype: object\n</code></pre>\n\n<p>How can I convert column timestamp to Datetime with timezone in Pandas?\nIs there such thing in Pandas?</p>\n\n<p>I found this post but it does not seem to parse timezone, just add a timezone later. <a href=\"https://stackoverflow.com/questions/18911241/how-to-read-datetime-with-timezone-in-pandas\">How to read datetime with timezone in pandas</a></p>\n\n<p>Any help/hint is welcomed</p>\n"}, {"tags": ["python", "regex", "list"], "comments": [{"owner": {"reputation": 92827, "user_id": 369, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/DHcF2.png?s=128&g=1", "display_name": "Blorgbeard", "link": "https://stackoverflow.com/users/369/blorgbeard"}, "edited": false, "score": 0, "creation_date": 1562796945, "post_id": 56979262, "comment_id": 100494486, "body": "I would consider a more explicit regex to actually match each field using named groups: <a href=\"https://regex101.com/r/rV7Azs/2\" rel=\"nofollow noreferrer\">regex101.com/r/rV7Azs/2</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user10835913"}, "edited": false, "score": 0, "creation_date": 1562796894, "post_id": 56979293, "comment_id": 100494474, "body": "Can I know what does it mean &#39;\\s(?=\\d)|(?&lt;=\\d)\\s&#39;?"}, {"owner": {"reputation": 1308, "user_id": 3362720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0150ac5ebcb0e2a5c1e5fdc9931123a4?s=128&d=identicon&r=PG", "display_name": "Oussama", "link": "https://stackoverflow.com/users/3362720/oussama"}, "edited": false, "score": 0, "creation_date": 1562797742, "post_id": 56979293, "comment_id": 100494694, "body": "Maybe you would also like to take a look at <a href=\"http://regex101.com\" rel=\"nofollow noreferrer\">regex101.com</a> to quickly build the regex that fit your needs..."}, {"owner": {"user_type": "does_not_exist", "display_name": "user10835913"}, "edited": false, "score": 0, "creation_date": 1562798096, "post_id": 56979293, "comment_id": 100494787, "body": "Thank you both! @Ajax1234@Ouss"}, {"owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "edited": false, "score": 0, "creation_date": 1562798163, "post_id": 56979293, "comment_id": 100494803, "body": "@Jancos Glad to help!"}], "tags": [], "owner": {"reputation": 56804, "user_id": 7326738, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/VgOrW.jpg?s=128&g=1", "display_name": "Ajax1234", "link": "https://stackoverflow.com/users/7326738/ajax1234"}, "is_accepted": true, "score": 3, "last_activity_date": 1562797388, "last_edit_date": 1562797388, "creation_date": 1562796656, "answer_id": 56979293, "question_id": 56979262, "link": "https://stackoverflow.com/questions/56979262/how-to-split-a-list-of-list-by-numbers/56979293#56979293", "title": "How to split a list of list by numbers?", "body": "<p>You can use <code>re.split</code>:</p>\n\n<pre><code>import re\nmy_list = ['Rob Kardashian 00052369 1987-03-17 Reality Star', 'Brooke Barry 00213658 2001-03-30 TikTok Star', 'Bae De Leon 00896351 1997-08-02 Volleyball Player','Jonas Blue 02369785 1990-08-02 Music Producer']\nnew_l = [re.split('\\s(?=\\d)|(?&lt;=\\d)\\s', i) for i in my_list]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[['Rob Kardashian', '00052369', '1987-03-17', 'Reality Star'], \n ['Brooke Barry', '00213658', '2001-03-30', 'TikTok Star'], \n ['Bae De Leon', '00896351', '1997-08-02', 'Volleyball Player'], \n ['Jonas Blue', '02369785', '1990-08-02', 'Music Producer']]\n</code></pre>\n\n<p>Regex explanation:</p>\n\n<p><code>\\s(?=\\d)</code>: matches any instance of a space followed by a digit.</p>\n\n<p><code>|</code> (alternation):attempts to match every expression to its left, or every expression to its right, stopping once it finds a valid match.</p>\n\n<p><code>(?&lt;=\\d)\\s</code>: matches any instance of a space proceeded by a digit.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10835913"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 56979293, "answer_count": 1, "score": 3, "last_activity_date": 1562797400, "creation_date": 1562796490, "last_edit_date": 1562797400, "question_id": 56979262, "link": "https://stackoverflow.com/questions/56979262/how-to-split-a-list-of-list-by-numbers", "title": "How to split a list of list by numbers?", "body": "<pre><code>my_list = ['Rob Kardashian 00052369 1987-03-17 Reality Star',\n'Brooke Barry 00213658 2001-03-30 TikTok Star',\n'Bae De Leon 00896351 1997-08-02 Volleyball Player',\n'Jonas Blue 02369785 1990-08-02 Music Producer']\n</code></pre>\n\n<p>I have a list of people names, IDs, DOBs, and Occupations. I want to split each person by names, ID, DOB, and their occupations.</p>\n\n<p>I tried some stupid approach and but can only do part of the work, and I was wondering are there any better solutions?</p>\n\n<p>Below is my code:</p>\n\n<pre><code>import re \n\ndef remove(my_list): \n    pattern = '[0-9]'\n    my_list = [re.sub(pattern, '', i) for i in my_list] \n    return my_list\n\nprint(remove(my_list))\n</code></pre>\n\n<p>But numbers are gone <code>['Rob Kardashian  -- Reality Star', 'Brooke Barry  -- TikTok Star', 'Bae De Leon  -- Volleyball Player', 'Jonas Blue  -- Music Producer']</code></p>\n\n<p>Then, I removed the ' -- '</p>\n\n<pre><code>[s.replace(' -- ',' ') for s in remove(my_list)]\n\n['Rob Kardashian  Reality Star','Brooke Barry  TikTok Star','Bae De Leon  Volleyball Player','Jonas Blue  Music Producer']\n</code></pre>\n\n<p>My expected outputs would be a dataframe:</p>\n\n<p><a href=\"https://i.stack.imgur.com/ae1Ym.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ae1Ym.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>pd.DataFrame(my_list)\n</code></pre>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["python", "numpy"], "comments": [{"owner": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1562801216, "post_id": 56979261, "comment_id": 100495451, "body": "Your methods give different answers"}, {"owner": {"reputation": 461, "user_id": 5705400, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/67436c96bbae12f9e64d1f2b729413d9?s=128&d=identicon&r=PG&f=1", "display_name": "jabozzo", "link": "https://stackoverflow.com/users/5705400/jabozzo"}, "reply_to_user": {"reputation": 45308, "user_id": 3483203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/592wq.png?s=128&g=1", "display_name": "user3483203", "link": "https://stackoverflow.com/users/3483203/user3483203"}, "edited": false, "score": 0, "creation_date": 1562802606, "post_id": 56979261, "comment_id": 100495673, "body": "I&#39;ve tested with <code>N=20; a = np.arrange(N).astype(float); p=0.9</code> and they are the same. If <code>a</code> is an integer dtype, then yes, they are different, since b will inherit the dtype in the first case and not in the second. Will amend the first case to be handle to handle that."}], "answers": [{"tags": [], "owner": {"reputation": 83262, "user_id": 772649, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/03ad01df45fef92e267641197ad00e36?s=128&d=identicon&r=PG", "display_name": "HYRY", "link": "https://stackoverflow.com/users/772649/hyry"}, "is_accepted": true, "score": 1, "last_activity_date": 1562812592, "creation_date": 1562812592, "answer_id": 56980909, "question_id": 56979261, "link": "https://stackoverflow.com/questions/56979261/lossy-cumsum-in-numpy/56980909#56980909", "title": "&#39;Lossy&#39; cumsum in numpy", "body": "<p>What you want is a IIR filter, you can use <code>scipy.signal.lfilter()</code>, here is the code:</p>\n\n<p>Your code:</p>\n\n<pre><code>import numpy as np\nN = 10\np = 0.8\nnp.random.seed(0)\nx = np.random.randn(N)\ny = np.empty_like(x)\np_vec = np.power(p, np.arange(N-1, 0-1, -1))\nfor n in range(N):\n    y[n] = np.sum(x[:n+1]*p_vec[-(n+1):])\ny    \n</code></pre>\n\n<p>the output:</p>\n\n<pre><code>array([1.76405235, 1.81139909, 2.42785725, 4.183179  , 5.21410119,\n       3.19400307, 3.50529088, 2.65287549, 2.01908154, 2.02586374])\n</code></pre>\n\n<p>By using <code>lfilter()</code>:</p>\n\n<pre><code>from scipy import signal\ny = signal.lfilter([1], [1, -p], x)\nprint(y)\n</code></pre>\n\n<p>the output:</p>\n\n<pre><code>array([1.76405235, 1.81139909, 2.42785725, 4.183179  , 5.21410119,\n       3.19400307, 3.50529088, 2.65287549, 2.01908154, 2.02586374])\n</code></pre>\n"}], "owner": {"reputation": 461, "user_id": 5705400, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/67436c96bbae12f9e64d1f2b729413d9?s=128&d=identicon&r=PG&f=1", "display_name": "jabozzo", "link": "https://stackoverflow.com/users/5705400/jabozzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 56980909, "answer_count": 1, "score": 0, "last_activity_date": 1562812592, "creation_date": 1562796489, "last_edit_date": 1562802783, "question_id": 56979261, "link": "https://stackoverflow.com/questions/56979261/lossy-cumsum-in-numpy", "title": "&#39;Lossy&#39; cumsum in numpy", "body": "<p>I have an array <strong>a</strong> of length N and need to implement the following operation:</p>\n\n<p><a href=\"https://i.stack.imgur.com/jR1Ow.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jR1Ow.png\" alt=\"b[n] = sum_{i=0}^{n} a[i]p^{n-i}\"></a></p>\n\n<p>With p in [0..1]. This equation is a lossy sum, where the first indexes in the sum are weighted by a greater loss (p^{n-i}) than the last ones. The last index (i=n) is always weigthed by 1. if p = 1, then the operation is a simple cumsum.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>b = np.cumsum(a)\n</code></pre>\n\n<p>If if p != 1, I can implement this operation in a cpu-inefficient way:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>b = np.empty(np.shape(a))\n# I'm using the (-1,-1,-1) idiom for reversed ranges\np_vec = np.power(p, np.arange(N-1, 0-1, -1))\n# p_vec[0] = p^{N-1}, p_vec[-1] = 1\n\nfor n in range(N):\n   b[n] = np.sum(a[:n+1]*p_vec[-(n+1):])\n</code></pre>\n\n<p>Or in a memory-inefficient but vectorized way (IMO is cpu inefficient too, since a lot of work is wasted):</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>a_idx = np.reshape(np.arange(N+1), (1, N+1)) - np.reshape(np.arange(N-1, 0-1, -1), (N, 1))\na_idx = np.maximum(0, a_idx)\n\n# For N=4, a_idx looks like this:\n# [[0, 0, 0, 0, 1],\n#  [0, 0, 0, 1, 2],\n#  [0, 0, 1, 2, 3],\n#  [0, 1, 2, 3, 4]]\n\na_ext = np.concatenate(([0], a,), axis=0) # len(a_ext) = N + 1\np_vec = np.power(p, np.arange(N, 0-1, -1)) # len(p_vec) = N + 1\n\nb = np.dot(a_ext[a_idx], p_vec)\n</code></pre>\n\n<p>Is there a better way to achieve this 'lossy' cumsum?</p>\n"}, {"tags": ["python", "database", "sqlite", "tkinter", "syntax"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1562796611, "post_id": 56979240, "comment_id": 100494413, "body": "You have an extra comma at the end of the list: <code>(?,?,?,?,?,?,?,?,)</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1562796890, "post_id": 56979240, "comment_id": 100494472, "body": "There are only 2 <code>)</code> in the SQL, it shouldn&#39;t be that hard to find them."}, {"owner": {"reputation": 2802, "user_id": 4551707, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/c8hn2.jpg?s=128&g=1", "display_name": "mrkvon", "link": "https://stackoverflow.com/users/4551707/mrkvon"}, "edited": false, "score": 1, "creation_date": 1562803399, "post_id": 56979240, "comment_id": 100495833, "body": "The key to your problem is to realize that the error is in your sqlite query and not in your python code."}], "owner": {"reputation": 43, "user_id": 11741445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24942802121b0dbe4b94b5ebbbd595e6?s=128&d=identicon&r=PG&f=1", "display_name": "doger777", "link": "https://stackoverflow.com/users/11741445/doger777"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562796574, "creation_date": 1562796364, "last_edit_date": 1562796574, "question_id": 56979240, "link": "https://stackoverflow.com/questions/56979240/error-sqlite3-operationalerror-near-syntax-error-while-trying-to-add-to-sq", "title": "error sqlite3.OperationalError: near &quot;)&quot;: syntax error while trying to add to sqlite database from tkinter", "body": "<p>i keep getting the error message:</p>\n\n<pre><code>Exception in Tkinter callback\nTraceback (most recent call last):\n  File \"C:\\Users\\max\\AppData\\Local\\Programs\\Python\\Python37\\lib\\tkinter\\__init__.py\", line 1705, in __call__\n    return self.func(*args)\n  File \"G:\\computing project\\add to db.py\", line 114, in get_items\n    C.execute(sql ,vari)\nsqlite3.OperationalError: near \")\": syntax error\n</code></pre>\n\n<p>when trying to add to a database using the values inputted from the gui with tkinter. I think that the sql cannot get the values from the inputs. i have tried changing the insert into values to the names that are in the database but python does not allow theese to contain capitals. </p>\n\n<p>i cannot find the \")\" stated in the error anywhere in my code as this was my first thought upon finding the syntax error. I have had a few issues in adding to this database and am using sqlite 3  with db browser. ive been following a python tutorial but i belive that the tutorial was using python 2 rather than 3</p>\n\n<pre><code>from tkinter import* \nimport sqlite3\nconn = sqlite3.connect(\"G:\\computing project\\database of cars.db\")\nC = conn.cursor()\nimport tkinter.messagebox\n\n\nclass Database:\n    def __init__ (self, master=None ,*args,**kwargs):\n        self.master = master\n        self.heading = Label(master , text = \"add to the database \", font=(\"ariel 35 bold\") )\n        self.heading.place (x=250 , y=0)\n\n        self.name= Label(master, text= \"enter product name\", font=(\"arial 18 bold\"))\n        self.name.place(x=0,y=50)\n\n        self.make_1=  Label(master , text = \"enter car make \", font=(\"ariel 18 bold\"))\n        self.make_1.place(x=0,y=100)\n\n        self.model_1=  Label(master , text = \"enter car model \", font=(\"ariel 18 bold\"),)\n        self.model_1.place(x=0,y=150)\n\n        self.regi_1=  Label(master , text = \"enter registration plate\", font=(\"ariel 18 bold\"))\n        self.regi_1.place(x=0,y=200)\n\n        self.colour_1=  Label(master , text = \"enter car colour \", font=(\"ariel 18 bold\"))\n        self.colour_1.place(x=0,y=250)\n\n\n        self.cost_1=  Label(master , text = \"enter cost price \", font=(\"ariel 18 bold\"))\n        self.cost_1.place(x=0,y=300)\n\n        self.tcost_1=  Label(master , text = \"enter total cost price \", font=(\"ariel 18 bold\"))\n        self.tcost_1.place(x=0,y=350)\n\n        self.sell_1=  Label(master , text = \"selling price \", font=(\"ariel 18 bold\"))\n        self.sell_1.place(x=0,y=400)\n\n        self.tsell_1=  Label(master , text = \"enter total selling price\", font=(\"ariel 18 bold\"))\n        self.tsell_1.place(x=0,y=450)\n\n        self.assprof_1=  Label(master , text = \"enter assumed profit\", font=(\"ariel 18 bold\"))\n        self.assprof_1.place(x=0,y=500)\n\n        self.name_e = Entry(master, width=25, font=(\"arial 18 bold\"))\n        self.name_e.place(x=300, y=50)\n\n        self.carmake_e = Entry(master, width=25, font=(\"arial 18 bold\"))\n        self.carmake_e.place(x=300, y=100)\n\n        self.carmodel_e = Entry(master, width=25, font=(\"arial 18 bold\"))\n        self.name_e.place(x=300, y=150)\n\n        self.regi_e = Entry(master, width=25, font=(\"arial 18 bold\"))\n        self.regi_e.place(x=300, y=200)\n\n        self.colour_e = Entry(master, width=25, font=(\"arial 18 bold\"))\n        self.colour_e.place(x=300, y=250)\n\n        self.carprice_e = Entry(master, width=25, font=(\"arial 18 bold\"))\n        self.carprice_e.place(x=300, y=300)\n\n        self.cost_e = Entry(master, width=25, font=(\"arial 18 bold\"))\n        self.cost_e.place(x=300, y=350)\n\n        self.tcost_e = Entry(master, width=25, font=(\"arial 18 bold\"))\n        self.tcost_e.place(x=300, y=400)\n\n        self.sellprice_e = Entry(master, width=25, font=(\"arial 18 bold\",))\n        self.sellprice_e.place(x=300, y=450)\n\n        self.assumedprofit_e = Entry(master, width=25, font=(\"arial 18 bold\"))\n        self.assumedprofit_e.place(x=300, y=500)\n\n        self.b = Button(command=self.get_items)\n        self.b.place(x=0,y=0)\n\n\n    def get_items(self,*args,**kwargs):  #this function gets the items from the entry boxes\n\n        self.carmake= self.carmake_e.get()\n        self.carmodel= self.carmodel_e.get()\n        self.regi= self.regi_e.get()\n        self.colour= self.colour_e.get()\n        self.cost= self.cost_e.get()\n        self.tcost= self.tcost_e.get()\n        self.sellprice= self.sellprice_e.get()\n        self.assumedprofit= self.assumedprofit_e.get()\n\n        self.assumedprofit= float(self.sellprice)- float(self.tcost)\n\n\n        if self.carmake == '' or self.carmodel == '' == self.colour == '':\n            print (\"WRONG\")\n            tkinter.messagebox.showinfo(\"error\",\"please enter values for car make, model and colour\")\n\n        else:\n            print(\"solid m8 \")\n            sql = \"INSERT INTO inventory (carmake,carmode,regi,colour,cost,tcost,sellprice,assumedprofit) VALUES (?,?,?,?,?,?,?,?,)\"\n            vari=(self.carmake,self.carmodel,self.regi,self.colour,self.cost,self.tcost,self.sellprice,self.assumedprofit)\n            C.execute(sql ,vari)\n               # C.execute(sql(self.name,self.carmake,self.carmodel,self.regi,self.colour,self.cost,self.tcost,self.sellprice,self.assumedprofit))\n            conn.commit()\n            tkinter.messagebox.showinfo(\"success\",\"succesfully added to databse\")\n\nroot = Tk()\nb = Database(root)\nframe = Frame(root,width=1920,height=1080)\nroot.geometry(\"1920x1080\")\nroot.title(\"add to database\")\nroot.configure(background=\"#b7b7e5\")\nroot.mainloop()\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "sockets"], "comments": [{"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1562803211, "post_id": 56979237, "comment_id": 100495793, "body": "Cannot reproduce. This question&#39;s content and history make me doubtful. Please create a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal, reproducible example</a> and then copy&amp;paste that code into your question. Do <i>not</i> type it."}, {"owner": {"reputation": 3087, "user_id": 846471, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2da1bbae9ea1c6fe1c0299fcba85b341?s=128&d=identicon&r=PG", "display_name": "Jon Martin", "link": "https://stackoverflow.com/users/846471/jon-martin"}, "reply_to_user": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1562803952, "post_id": 56979237, "comment_id": 100495953, "body": "No need to be snarky just because you can&#39;t reproduce. Question is as minimal as it can possibly be, and I&#39;ve added a screenshot to curb your doubts about the content and history (lol what?)"}], "answers": [{"comments": [{"owner": {"reputation": 3087, "user_id": 846471, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2da1bbae9ea1c6fe1c0299fcba85b341?s=128&d=identicon&r=PG", "display_name": "Jon Martin", "link": "https://stackoverflow.com/users/846471/jon-martin"}, "edited": false, "score": 0, "creation_date": 1562799295, "post_id": 56979552, "comment_id": 100495073, "body": "See my edits - that was a typo in the question text, but my code had it correctly. And it still fails with socket.socket() without the args."}], "tags": [], "owner": {"reputation": 161, "user_id": 11582539, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WYwlX5d4a3s/AAAAAAAAAAI/AAAAAAAAADg/8aJ1tf74jyU/photo.jpg?sz=128", "display_name": "Sean Tashlik", "link": "https://stackoverflow.com/users/11582539/sean-tashlik"}, "is_accepted": false, "score": 1, "last_activity_date": 1562798737, "creation_date": 1562798737, "answer_id": 56979552, "question_id": 56979237, "link": "https://stackoverflow.com/questions/56979237/python-cannot-initialize-socket-object/56979552#56979552", "title": "Python cannot initialize socket object", "body": "<p><strong>CAPS MATTER!</strong></p>\n\n<pre><code>    socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n</code></pre>\n"}], "owner": {"reputation": 3087, "user_id": 846471, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2da1bbae9ea1c6fe1c0299fcba85b341?s=128&d=identicon&r=PG", "display_name": "Jon Martin", "link": "https://stackoverflow.com/users/846471/jon-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562804025, "creation_date": 1562796344, "last_edit_date": 1562804025, "question_id": 56979237, "link": "https://stackoverflow.com/questions/56979237/python-cannot-initialize-socket-object", "title": "Python cannot initialize socket object", "body": "<p>I am unable to initiate socket objects in Python.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import socket\nsocket.socket(socket.AF_INET, socket.SOCK_STREAM)\n</code></pre>\n\n<p>And I get a traceback in the init function</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>_socket.socket.__init__(self, family, type, proto, fileno)\nOSError: [WinError 10022] An invalid argument was supplied\n</code></pre>\n\n<p>There seems to be very little information on what may be causing this. Any ideas on what the issue is here?</p>\n\n<p>EDIT: I have fixed the caps in the question text as it was a typo. It was correct in my code editor however, and regardless, even this fails:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import socket\nsocket.socket()\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/MMPJy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MMPJy.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["python", "json", "python-3.x", "dictionary"], "comments": [{"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1562799362, "post_id": 56979230, "comment_id": 100495088, "body": "What do you want the result to be? Please <a href=\"https://stackoverflow.com/posts/56979230/edit\">edit</a> your question and add a description of what the desire output is."}], "answers": [{"tags": [], "owner": {"reputation": 661, "user_id": 7623407, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209740955735539/picture?type=large", "display_name": "R10t--", "link": "https://stackoverflow.com/users/7623407/r10t"}, "is_accepted": false, "score": 0, "last_activity_date": 1562796569, "creation_date": 1562796569, "answer_id": 56979274, "question_id": 56979230, "link": "https://stackoverflow.com/questions/56979230/how-to-generate-different-values-for-same-key-in-dictionaries/56979274#56979274", "title": "How to generate different values for same key in dictionaries?", "body": "<p>I'm not sure what you're asking.</p>\n\n<h3>If it is about adding ID's to an existing list without duplicating an id:</h3>\n\n<p>JSON does not preserve it's order so the only way to do this is first loop through your list, find the greatest id that currently exists, and then begin counting from there. If you know elements will never bet deleted from your list you can just use the length of the list as your start index. Alternatively you could use a GUID which has an extremely low probability of being duplicated.</p>\n\n<h3>If it is about items not being appended to your list:</h3>\n\n<p>Change the declaration of json_data to: <code>json_data = []</code> then use <code>json_data += [{'id': i}]</code></p>\n"}, {"tags": [], "owner": {"reputation": 5271, "user_id": 1285669, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0Agh4.jpg?s=128&g=1", "display_name": "Smuuf", "link": "https://stackoverflow.com/users/1285669/smuuf"}, "is_accepted": true, "score": 1, "last_activity_date": 1562796575, "creation_date": 1562796575, "answer_id": 56979277, "question_id": 56979230, "link": "https://stackoverflow.com/questions/56979230/how-to-generate-different-values-for-same-key-in-dictionaries/56979277#56979277", "title": "How to generate different values for same key in dictionaries?", "body": "<p>Do you mean something like this?</p>\n\n<pre><code>json_data = []\nfor i in range(1, 11):\n    json_data.append({'id': i})\n</code></pre>\n\n<p>Resulting in:</p>\n\n<pre><code>[{'id': 1},\n {'id': 2},\n {'id': 3},\n {'id': 4},\n {'id': 5},\n {'id': 6},\n {'id': 7},\n {'id': 8},\n {'id': 9},\n {'id': 10}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 161, "user_id": 11582539, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WYwlX5d4a3s/AAAAAAAAAAI/AAAAAAAAADg/8aJ1tf74jyU/photo.jpg?sz=128", "display_name": "Sean Tashlik", "link": "https://stackoverflow.com/users/11582539/sean-tashlik"}, "is_accepted": false, "score": 0, "last_activity_date": 1562796774, "creation_date": 1562796774, "answer_id": 56979309, "question_id": 56979230, "link": "https://stackoverflow.com/questions/56979230/how-to-generate-different-values-for-same-key-in-dictionaries/56979309#56979309", "title": "How to generate different values for same key in dictionaries?", "body": "<p>I think your problem may be that you forgot to put it inside a list:</p>\n\n<pre><code>    json_data = [{\"id\": i} for i in range(1, 11)]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4359, "user_id": 960362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/031e30c4f9c0728b3a557e9a1844247f?s=128&d=identicon&r=PG", "display_name": "tarheel", "link": "https://stackoverflow.com/users/960362/tarheel"}, "is_accepted": false, "score": 1, "last_activity_date": 1562798392, "creation_date": 1562798392, "answer_id": 56979514, "question_id": 56979230, "link": "https://stackoverflow.com/questions/56979230/how-to-generate-different-values-for-same-key-in-dictionaries/56979514#56979514", "title": "How to generate different values for same key in dictionaries?", "body": "<p>There are two mis-steps in the current code:</p>\n\n<ol>\n<li>The <code>if i not in json_data</code> line is only looking at the elements\nof the list, not the value of the <code>id</code> key inside the dictionary. </li>\n<li>The <code>json_data['id'] = i</code> line is over-writing the list of dictionaries,\nwith a dictionary under the same variable name of <code>json_data</code>.</li>\n</ol>\n\n<p>The below code will address both of those mis-steps.</p>\n\n<pre><code>json_data = [ {\"id\": 1,\"name\": \"Meghan\"},\n        {\"id\": 2,\"name\": \"Julia\"},\n        {\"id\": 3,\"name\": \"Kevin\"}\n        ]\n\nfor i in range(1, 11):\n  if i not in [d['id'] for d in json_data]:\n    json_data.append({\"id\": i})\n</code></pre>\n\n<p>If you were to print the <code>json_data</code> list after running the code above, it would output the following:</p>\n\n<pre><code>[{'id': 1, 'name': 'Meghan'}, {'id': 2, 'name': 'Julia'}, {'id': 3, 'name': 'Kevin'}, {'id': 4}, {'id': 5}, {'id': 6}, {'id': 7}, {'id': 8}, {'id': 9}, {'id': 10}]\n</code></pre>\n"}], "owner": {"reputation": 298, "user_id": 8774203, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e41ed4f846fe85c911309b2960e729e8?s=128&d=identicon&r=PG&f=1", "display_name": "wolfbagel", "link": "https://stackoverflow.com/users/8774203/wolfbagel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 56979277, "answer_count": 4, "score": -1, "last_activity_date": 1562799214, "creation_date": 1562796311, "last_edit_date": 1562799214, "question_id": 56979230, "link": "https://stackoverflow.com/questions/56979230/how-to-generate-different-values-for-same-key-in-dictionaries", "title": "How to generate different values for same key in dictionaries?", "body": "<p>I'm a newbie and can't for the life of me figure this out! \nTrying to get a python dictionary with the following structure, a list of dictionaries:</p>\n\n<pre><code>json_data = [ {\"id\": 1,\"name\": \"Meghan\"},\n        {\"id\": 2,\"name\": \"Julia\"},\n        {\"id\": 3,\"name\": \"Kevin\"}\n        ]\n</code></pre>\n\n<p>I need the same keys in each of the dictionaries and the id's have to be from values 1 to 100.  I'd like to dynamically populate this if possible.</p>\n\n<p>Here's what I've tried so far:</p>\n\n<pre><code>json_data = {}\nfor i in range(1, 11):\n    if i not in json_data:\n        json_data['id'] = i\n</code></pre>\n\n<p>But as you can see, the id keeps getting overwritten and produces a file like so:</p>\n\n<pre><code>{\n    \"id\": 10\n}\n</code></pre>\n\n<p>Any help in the right direction would be great!</p>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 1406, "user_id": 6265630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QG6X.jpg?s=128&g=1", "display_name": "Nakor", "link": "https://stackoverflow.com/users/6265630/nakor"}, "edited": false, "score": 2, "creation_date": 1562796395, "post_id": 56979198, "comment_id": 100494367, "body": "You might be interested in the <a href=\"https://www.crummy.com/software/BeautifulSoup/bs4/doc/\" rel=\"nofollow noreferrer\">BeautifulSoup</a> package"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 11717520, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ck9BorfR-H8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGWgIqkbq73v0vRvjId9QVDsSq3w/photo.jpg?sz=128", "display_name": "rafa_rrayes", "link": "https://stackoverflow.com/users/11717520/rafa-rrayes"}, "edited": false, "score": 0, "creation_date": 1562797291, "post_id": 56979297, "comment_id": 100494571, "body": "nice, the second I tried the second option and it printed the Source Code, but thats not a problem. thanks."}, {"owner": {"reputation": 4832, "user_id": 5661594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fbbbec01ce0c53edbdf4001d81bb4865?s=128&d=identicon&r=PG", "display_name": "Harry_pb", "link": "https://stackoverflow.com/users/5661594/harry-pb"}, "reply_to_user": {"reputation": 93, "user_id": 11717520, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ck9BorfR-H8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGWgIqkbq73v0vRvjId9QVDsSq3w/photo.jpg?sz=128", "display_name": "rafa_rrayes", "link": "https://stackoverflow.com/users/11717520/rafa-rrayes"}, "edited": false, "score": 0, "creation_date": 1562797471, "post_id": 56979297, "comment_id": 100494614, "body": "try <code>soup.get_text()</code> and you will get text as well, you can explore this library for further requirments"}], "tags": [], "owner": {"reputation": 4832, "user_id": 5661594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fbbbec01ce0c53edbdf4001d81bb4865?s=128&d=identicon&r=PG", "display_name": "Harry_pb", "link": "https://stackoverflow.com/users/5661594/harry-pb"}, "is_accepted": false, "score": 2, "last_activity_date": 1562796675, "creation_date": 1562796675, "answer_id": 56979297, "question_id": 56979198, "link": "https://stackoverflow.com/questions/56979198/how-can-i-print-any-website-content-using-something-like-my-code/56979297#56979297", "title": "How can I print any website content? (Using something like my code)", "body": "<p>In <code>python</code>, there are several libraries you may be interested in. An example of printing contents to get you started below:-</p>\n\n<pre><code>from bs4 import BeautifulSoup as soup\nimport requests\nurl = \"https://en.wikipedia.org/wiki/List_of_multinational_corporations\"\npage = requests.get(url)\npage_html = (page.content)\npage_soup = soup(page_html, \"html.parser\")\nprint (page_soup)\n</code></pre>\n\n<p>with <code>urlopen</code>, you may try as below</p>\n\n<pre><code>from bs4 import BeautifulSoup\nimport urllib\nurl = \"https://en.wikipedia.org/wiki/List_of_multinational_corporations\"\nr = urllib.urlopen(url).read()\nsoup = BeautifulSoup(r)\nprint type(soup)\nprint (soup.prettify()[0:1000])\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 11717520, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ck9BorfR-H8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcGWgIqkbq73v0vRvjId9QVDsSq3w/photo.jpg?sz=128", "display_name": "rafa_rrayes", "link": "https://stackoverflow.com/users/11717520/rafa-rrayes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1562796675, "creation_date": 1562796028, "question_id": 56979198, "link": "https://stackoverflow.com/questions/56979198/how-can-i-print-any-website-content-using-something-like-my-code", "title": "How can I print any website content? (Using something like my code)", "body": "<p>I want to open the website and get its content, store it in a variable and print it</p>\n\n<pre><code>from urllib.request import urlopen\n\nurl = any_website\n\ncontent = urlopen(url).read().decode('utf-8')\n\nprint(content)\n</code></pre>\n\n<p>The expected result is that I get what is written in the page</p>\n"}, {"tags": ["python", "database", "web-scraping"], "comments": [{"owner": {"reputation": 3552, "user_id": 4240413, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54298e0142978d385309d265b585c818?s=128&d=identicon&r=PG&f=1", "display_name": "Davide Fiocco", "link": "https://stackoverflow.com/users/4240413/davide-fiocco"}, "edited": false, "score": 0, "creation_date": 1562796300, "post_id": 56979196, "comment_id": 100494338, "body": "Hi Pawel, I think it&#39;s a great idea! Sites like <a href=\"https://opendata.stackexchange.com/\">opendata.stackexchange.com</a> for the data bit and <a href=\"http://datascience.stackexchange.com/\">datascience.stackexchange.com</a> for the algorithmic angle could be more appropriate for your questions though. If you Google &quot;drug interaction checker&quot; you may find quite some material and websites related to this."}, {"owner": {"reputation": 33642, "user_id": 620097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/820980fd43f2607a815c1f3dbfe152cc?s=128&d=identicon&r=PG", "display_name": "shellter", "link": "https://stackoverflow.com/users/620097/shellter"}, "edited": false, "score": 0, "creation_date": 1562799958, "post_id": 56979196, "comment_id": 100495198, "body": "Agree this is a good idea, but ... sorry, requests for resources are off-topic on Stackoverflow.  Please read <a href=\"https://stackoverflow.com/Help/On-topic\">Help On-topic</a> and <a href=\"https://stackoverflow.com/Help/How-to-ask\">Help How-to-ask</a> before posting more Qs here.  Good luck!"}, {"owner": {"reputation": 13, "user_id": 9834545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0823fdaf803f4387e6a1fa3e3d9ed480?s=128&d=identicon&r=PG&f=1", "display_name": "Kankarollo", "link": "https://stackoverflow.com/users/9834545/kankarollo"}, "edited": false, "score": 0, "creation_date": 1562870601, "post_id": 56979196, "comment_id": 100525174, "body": "Thanks a lot for answers.  Yeah, I wasn&#39;t sure if this subject is for stack-overflow, but wanted try, sorry."}], "owner": {"reputation": 13, "user_id": 9834545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0823fdaf803f4387e6a1fa3e3d9ed480?s=128&d=identicon&r=PG&f=1", "display_name": "Kankarollo", "link": "https://stackoverflow.com/users/9834545/kankarollo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1612189555, "creation_date": 1562796022, "last_edit_date": 1612189555, "question_id": 56979196, "link": "https://stackoverflow.com/questions/56979196/medicine-database-research-materials", "title": "Medicine Database research materials?", "body": "<p>This request is more about some research materials...</p>\n<p>I want to build an application to control medicine dosage and to do this I think about making sample database with like 1000 medicines with info most importantly about a dosage (4 times a day, every 4 hours...) and <strong>composition</strong>.</p>\n<p>Does anyone know about some webpage that could easily provide me with this kind of information? I think about webscraping it with python. Or maybe somewhere there is already created sample database like this.</p>\n<p>Also, I think about making feature about what elements in medicine composition can be dangerous together. Something like: That you can't take some 3 medicines together. Maybe someone know and could recommend some webpage, article, maybe algorithm that could provide me more knowledge about this subject.</p>\n"}, {"tags": ["python", "scikit-learn", "nlp", "text-mining", "text-processing"], "answers": [{"tags": [], "owner": {"reputation": 15105, "user_id": 3768871, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/Wxgi0.jpg?s=128&g=1", "display_name": "OmG", "link": "https://stackoverflow.com/users/3768871/omg"}, "is_accepted": true, "score": 1, "last_activity_date": 1562802894, "creation_date": 1562802894, "answer_id": 56980001, "question_id": 56979185, "link": "https://stackoverflow.com/questions/56979185/is-it-bad-to-not-remove-stopwords-when-ive-already-set-a-ceiling-on-document-fr/56980001#56980001", "title": "Is it bad to not remove stopwords when I&#39;ve already set a ceiling on document frequency?", "body": "<p>You are right. It could be the definition of stop words. However, do not forget that one reason to remove the stop words in the first phase, is to prevent counting them and reduce the computation time. </p>\n\n<p>Notice that your intuition behind stop words is correct.  </p>\n"}], "owner": {"reputation": 552, "user_id": 9500134, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c022de52d242053e0ce1dff18f6864c8?s=128&d=identicon&r=PG&f=1", "display_name": "vivian", "link": "https://stackoverflow.com/users/9500134/vivian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 56980001, "answer_count": 1, "score": 1, "last_activity_date": 1605965086, "creation_date": 1562795953, "last_edit_date": 1605965086, "question_id": 56979185, "link": "https://stackoverflow.com/questions/56979185/is-it-bad-to-not-remove-stopwords-when-ive-already-set-a-ceiling-on-document-fr", "title": "Is it bad to not remove stopwords when I&#39;ve already set a ceiling on document frequency?", "body": "<p>I'm using <code>sklearn.feature_extraction.text.TfidfVectorizer</code>. I'm processing text. It seems standard to remove stop words. However, it seems to me that if I already have a ceiling on document frequency, meaning I will not include tokens that are in a large percent of the document (eg <code>max_df=0.8</code>), dropping stop words doesn't seem necessary. Theoretically, stop words are words that appear often and should be excluded. This way, we don't have to debate on what to include in our list of stop words, right? It's my understanding that there is disagreement over what words are used often enough that they should be considered stop words, right? For example, scikit-learn includes &quot;whereby&quot; in its built-in list of English stop words.</p>\n"}, {"tags": ["python", "django", "django-views"], "comments": [{"owner": {"reputation": 2879, "user_id": 11082165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b73f08b7fb69386c5dc56497ff2ca58?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/11082165/brian"}, "edited": false, "score": 0, "creation_date": 1562796084, "post_id": 56979175, "comment_id": 100494267, "body": "Are you familiar with Django&#39;s <a href=\"https://docs.djangoproject.com/en/2.2/topics/http/sessions/\" rel=\"nofollow noreferrer\">session framework</a>?"}, {"owner": {"reputation": 1, "user_id": 11767130, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dceke6fEJ2w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdnwTJwlv6a3x5Vz4sUrnp143QEyw/photo.jpg?sz=128", "display_name": "litweg", "link": "https://stackoverflow.com/users/11767130/litweg"}, "reply_to_user": {"reputation": 2879, "user_id": 11082165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b73f08b7fb69386c5dc56497ff2ca58?s=128&d=identicon&r=PG&f=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/11082165/brian"}, "edited": false, "score": 0, "creation_date": 1562832477, "post_id": 56979175, "comment_id": 100503931, "body": "Unfortunatelly no. Thank you, I&#39;ll study this part of django."}], "owner": {"reputation": 1, "user_id": 11767130, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dceke6fEJ2w/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdnwTJwlv6a3x5Vz4sUrnp143QEyw/photo.jpg?sz=128", "display_name": "litweg", "link": "https://stackoverflow.com/users/11767130/litweg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562795859, "creation_date": 1562795859, "question_id": 56979175, "link": "https://stackoverflow.com/questions/56979175/django-how-to-pass-value-from-one-cbv-to-another", "title": "Django: How to pass value from one CBV to another", "body": "<p>I'm trying to customize django authentications forms/templates. URL /accounts/password_reset/ (CBV:PasswordResetView) is used to enter account email. After form submitting user redirected to  /accounts/password_reset/done/ (CBV:PasswordResetDoneView)</p>\n\n<p>I need to use email value in PasswordResetDoneView. How can I do it?</p>\n\n<p>Sorry for newbie question.</p>\n\n<p>urls.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from django.urls import path, include\nfrom . import views\n\nurlpatterns = [\n    # ...\n    path('accounts/password_reset/', views.CustomPasswordReset.as_view(), name='password_reset'),\n    path('accounts/password_reset/done/', views.CustomPasswordResetDone.as_view(), name='password_reset_done'),\n    # ...\n]\n</code></pre>\n\n<p>views.py</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from django.contrib.auth import views as auth_views\nfrom .forms import LoginForm, ResetForm, NewPasswordForm\n\nclass CustomPasswordReset(auth_views.PasswordResetView):\n    template_name = 'authorization/password_reset_form.html'\n    html_email_template_name = 'authorization/password_reset_email_html.html'\n    email_template_name = 'authorization/password_reset_email_plain.html'\n    subject_template_name = 'authorization/password_reset_subject.txt'\n\n\nclass CustomPasswordResetDone(auth_views.PasswordResetDoneView):\n    template_name = 'authorization/password_reset_done.html'\n\n    # TODO. I have no idea how to get email address that was entered in 'password_reset' step\n    # \n    email = 'example@gmail.com'\n    mbox, mserver = email.split('@')\n    extra_context = {'mserver': mserver}\n</code></pre>\n"}, {"tags": ["python", "algorithm", "hash", "duplicates"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1562795479, "post_id": 56979087, "comment_id": 100494106, "body": "Are you merging the files in pairs only, or do you need to merge all the files toward the first one?"}, {"owner": {"reputation": 137098, "user_id": 874188, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/ZcY77.png?s=128&g=1", "display_name": "tripleee", "link": "https://stackoverflow.com/users/874188/tripleee"}, "edited": false, "score": 0, "creation_date": 1562826342, "post_id": 56979087, "comment_id": 100500901, "body": "Have you explored using a database for this? Assuming this is not the only operation you will be performing on this data, having it normalized and indexed for random access should offer quick and handsome paybacks in terms of convenience and execution speed (even if, like me, you don&#39;t particularly enjoy SQL)."}, {"owner": {"reputation": 119, "user_id": 4133341, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/452417f35c58c9929761cb652b81193f?s=128&d=identicon&r=PG&f=1", "display_name": "StuckOnDiffyQ", "link": "https://stackoverflow.com/users/4133341/stuckondiffyq"}, "edited": false, "score": 0, "creation_date": 1562849326, "post_id": 56979087, "comment_id": 100513756, "body": "# Are you merging the files in pairs only, or do you need to merge all the files toward the first one? # De-duplicating across all entries and merging all duplicates to one.  - Have not tried using SQL for this, but might be right that I should just bite the bullet and do it since I&#39;ll be using it more than once."}], "answers": [{"comments": [{"owner": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1562862498, "post_id": 56979247, "comment_id": 100521562, "body": "Exactly: use the tools that exist. There might even be a standard tool that will extract the fields. For example, <code>csvtool</code> that is available in Ubuntu. The only thing I&#39;d change here is have the initial program append to a single file, rather than writing to individual files that I have to then combine."}, {"owner": {"reputation": 35094, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "reply_to_user": {"reputation": 121669, "user_id": 56778, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/34b152ef95a49568ce45df38cd87e54b?s=128&d=identicon&r=PG", "display_name": "Jim Mischel", "link": "https://stackoverflow.com/users/56778/jim-mischel"}, "edited": false, "score": 0, "creation_date": 1562873143, "post_id": 56979247, "comment_id": 100526223, "body": "@JimMischel I thought about single file vs multiple files, did a back of the envelope and found that we are dealing with multiple terabytes of data, and went with the approach that let us take advantage of the fact that the first and last steps are embarrassingly parallel."}], "tags": [], "owner": {"reputation": 35094, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "is_accepted": true, "score": 2, "last_activity_date": 1562796375, "creation_date": 1562796375, "answer_id": 56979247, "question_id": 56979087, "link": "https://stackoverflow.com/questions/56979087/removing-duplicate-rows-across-millions-of-compressed-csv-files-while-keeping-on/56979247#56979247", "title": "Removing duplicate rows across millions of compressed CSV files while keeping one piece of information from duplicated rows", "body": "<p>I would write a program that goes through a gzipped csv file and writes the following 4 columns: <code>target id file row</code>.</p>\n\n<p>Run this on each file, and you will get ~10 million small files.</p>\n\n<p>Assuming that you are <strong>NOT</strong> doing this in a distributed fashion, I would next combine the files into a single, big file, and sort it with the unix sort utility.  (Warning you want to do <code>LC_ALL=C sort foo.txt</code> because the C locale is faster, and produces more sensible results.  See <a href=\"https://stackoverflow.com/questions/5909404/sort-not-sorting-as-expected-space-and-locale\">sort not sorting as expected (space and locale)</a> for more.)</p>\n\n<p>Now it is easy to process that file, and decide which one to keep.  You can write a file out with the columns <code>file row target id is_keep removed_ids</code>.  Be sure to write the row out with leading zeros, so instead of <code>42</code> you would write <code>000042</code>.  The <code>removed_ids</code> are the ones you removed from other files if you kept this one.  (The number of leading zeros should be enough for your largest file.  That is to make asciibetical order match numerical order.)</p>\n\n<p>Sort this file again and then break it up into per file files of what decision.</p>\n\n<p>Given the original gzipped file and this file of which rows to keep, and which ids to store if you do keep it, it is easy to process your original files to remove/keep rows and record what you removed.  I strongly suggest doing the sanity check of verifying that target/id/row all match.  And don't delete the originals unless that sanity check passed.</p>\n\n<hr>\n\n<p>If you're a big fan of distributed processing, the translation from sorting to map-reduces is straightforward.  If you have an infrastructure for that set up, you might as well use it.  If not, I would suggest this sorted file approach, only using parallelization to process all the individual files at the first/last.</p>\n"}, {"comments": [{"owner": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "edited": false, "score": 0, "creation_date": 1562814281, "post_id": 56979354, "comment_id": 100497734, "body": "You need to keep on the order of 2&#179;&#178; IDs, each 6 or 7 characters minimum if keeping to <i>single case letters+digits</i> - about 60 GB. Plus about as many rows of <code>&gt;2000 columns</code> as there are &quot;target&quot; values. Steep for a single node in 2019."}, {"owner": {"reputation": 1188, "user_id": 4337867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c11dddbb27f337acd4db31183cc95a?s=128&d=identicon&r=PG", "display_name": "josoler", "link": "https://stackoverflow.com/users/4337867/josoler"}, "reply_to_user": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "edited": false, "score": 0, "creation_date": 1562826343, "post_id": 56979354, "comment_id": 100500903, "body": "@greybeard Note that we don&#39;t need to keep track of the full rows with this approach. Worst case scenario (no repeated targets at all): We&#39;ll have ~10M * (100 to 1000) ID-Target pairs. Still it may not fit in memory, if so, I would just replace dicts with shelves"}, {"owner": {"reputation": 2026, "user_id": 3789665, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/38983281a7926f50843153d9e0788cdf?s=128&d=identicon&r=PG&f=1", "display_name": "greybeard", "link": "https://stackoverflow.com/users/3789665/greybeard"}, "edited": false, "score": 0, "creation_date": 1562834685, "post_id": 56979354, "comment_id": 100505044, "body": "<code>we don&#39;t need to keep track of the full rows</code> I read <code>remove the rows with duplicate &quot;target&quot;</code> as <i>keep one full row per &quot;target&quot;</i> - &quot;we&quot; could create the required output in a second pass, writing all IDs for each &quot;target&quot; encountered and the remainder of the row <i>if the &quot;target&quot; is in the lookup</i>, removing it immediately after."}, {"owner": {"reputation": 119, "user_id": 4133341, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/452417f35c58c9929761cb652b81193f?s=128&d=identicon&r=PG&f=1", "display_name": "StuckOnDiffyQ", "link": "https://stackoverflow.com/users/4133341/stuckondiffyq"}, "edited": false, "score": 0, "creation_date": 1562851171, "post_id": 56979354, "comment_id": 100515006, "body": "Can give this a try, absolute maximum should be 2.1B key pairs assuming nothing is duplicated, but realistically estimating should be more like ~1.3B"}], "tags": [], "owner": {"reputation": 1188, "user_id": 4337867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c11dddbb27f337acd4db31183cc95a?s=128&d=identicon&r=PG", "display_name": "josoler", "link": "https://stackoverflow.com/users/4337867/josoler"}, "is_accepted": false, "score": 1, "last_activity_date": 1562825362, "last_edit_date": 1562825362, "creation_date": 1562797149, "answer_id": 56979354, "question_id": 56979087, "link": "https://stackoverflow.com/questions/56979087/removing-duplicate-rows-across-millions-of-compressed-csv-files-while-keeping-on/56979354#56979354", "title": "Removing duplicate rows across millions of compressed CSV files while keeping one piece of information from duplicated rows", "body": "<p>Even though that the amount of data may look overwhelming, I think that you could iterate over all files sequentially if you keep just the right amount of data you need. For instance you could track the relation with unique targets with the first ID with such target and a relation of <em>ID aliases</em> (e.g. ID <code>IX412</code> corresponds to <code>BC144</code>). This way your solution may look something like this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import csv\n\nfilenames = [...]\ntarget_ids = {}\naliases = {}\n\nfor filename in filenames:\n    with open(filename, 'r') as file_in:\n        reader = csv.DictReader(file_in)\n        for row in reader:\n            if row['Target'] in target_ids:\n                aliases[row['ID']] = target_ids[row['Target']]\n                remove_row(row)  # Do whatever you may require\n            else:\n                target_ids[row['Target']] = row['ID']\n\n</code></pre>\n\n<p>Note that having a <code>dict</code> with 10M key-value pairs is something perfectly tractable.</p>\n\n<p>If this still doesn't fit in memory you could use <code>shelve</code> instead of dicts so that the corresponding data is stored in HDD. You could do something like:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import csv\nimport shelve\n\nfilenames = [...]\n\nwith shelve.open('target_ids') as target_ids, shelve.open('aliases') as aliases:\n    for filename in filenames:\n        with open(filename, 'r') as file_in:\n            reader = csv.DictReader(file_in)\n            for row in reader:\n                if row['Target'] in target_ids:\n                    aliases[row['ID']] = target_ids[row['Target']]\n                    remove_row(row)  # Do whatever you may require\n                else:\n                    target_ids[row['Target']] = row['ID']\n\n</code></pre>\n\n<p>The downside of <code>shelve</code> with regards to regular dict being speed.</p>\n"}], "owner": {"reputation": 119, "user_id": 4133341, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/452417f35c58c9929761cb652b81193f?s=128&d=identicon&r=PG&f=1", "display_name": "StuckOnDiffyQ", "link": "https://stackoverflow.com/users/4133341/stuckondiffyq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 56979247, "answer_count": 2, "score": 0, "last_activity_date": 1562825362, "creation_date": 1562795291, "question_id": 56979087, "link": "https://stackoverflow.com/questions/56979087/removing-duplicate-rows-across-millions-of-compressed-csv-files-while-keeping-on", "title": "Removing duplicate rows across millions of compressed CSV files while keeping one piece of information from duplicated rows", "body": "<p>Have a collection of ~10 million GZipped CSV files, each one having anywhere from 100-1000 rows and >2000 columns.  Each file also contains a header.</p>\n\n<p>In each CSV file there are two important columns, \"ID\" and \"target\".</p>\n\n<p>I'm trying to remove the rows with duplicate \"target\" but retain the ID from the row to be removed with the row that will not be removed.</p>\n\n<p>E.g.</p>\n\n<p>Input:</p>\n\n<pre><code>CSV1\n|   ID  |  Target                      |\n|-------|------------------------------|\n| IX213 | C1=CC(=CC=C1CC(=O)C(=O)O)O   |\n| IX412 | CN1C=NC2=C1C(=O)N(C(=O)N2C)C |\n\nCSV2\n|   ID  |  Target                      |\n|-------|------------------------------|\n| BC144 | CN1C=NC2=C1C(=O)N(C(=O)N2C)C |\n| BC155 | C(CC(=O)O)C(C(=O)O)N         |\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>CSV1*\n|   ID         |  Target                      |\n|--------------|------------------------------|\n| IX213        | C1=CC(=CC=C1CC(=O)C(=O)O)O   |\n| IX412; BC144 | CN1C=NC2=C1C(=O)N(C(=O)N2C)C |\n\nCSV2*\n|   ID  |  Target                      |\n|-------|------------------------------|\n| BC155 | C(CC(=O)O)C(C(=O)O)N         |\n</code></pre>\n\n<p>This would be straightforward for a small number of files with Pandas (Python) or the like, but was hoping someone might have a much better way of doing it across millions of files with billions of entries.</p>\n"}, {"tags": ["python", "windows", "sockets", "select"], "answers": [{"comments": [{"owner": {"reputation": 161, "user_id": 11582539, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WYwlX5d4a3s/AAAAAAAAAAI/AAAAAAAAADg/8aJ1tf74jyU/photo.jpg?sz=128", "display_name": "Sean Tashlik", "link": "https://stackoverflow.com/users/11582539/sean-tashlik"}, "edited": false, "score": 0, "creation_date": 1562796352, "post_id": 56979188, "comment_id": 100494354, "body": "Thanks! I think it;s a fair good answer but yeah. I have heard that you should seperate the input and output via two different threads, is it right?"}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 161, "user_id": 11582539, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WYwlX5d4a3s/AAAAAAAAAAI/AAAAAAAAADg/8aJ1tf74jyU/photo.jpg?sz=128", "display_name": "Sean Tashlik", "link": "https://stackoverflow.com/users/11582539/sean-tashlik"}, "edited": false, "score": 0, "creation_date": 1562796982, "post_id": 56979188, "comment_id": 100494494, "body": "If you want to read from <code>stdin</code> under Windows, you&#39;ll need to do that in a separate thread, because Windows <code>stdin</code> support blocking reads only and therefore any thread that tries to read from <code>stdin</code> ends up blocked indefinitely (i.e. until some more data comes in to read).  Microsoft makes it as difficult as possible to handle gracefully :("}, {"owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "reply_to_user": {"reputation": 161, "user_id": 11582539, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WYwlX5d4a3s/AAAAAAAAAAI/AAAAAAAAADg/8aJ1tf74jyU/photo.jpg?sz=128", "display_name": "Sean Tashlik", "link": "https://stackoverflow.com/users/11582539/sean-tashlik"}, "edited": false, "score": 0, "creation_date": 1562797040, "post_id": 56979188, "comment_id": 100494508, "body": "All network input and output can be handled in a single thread, though, as long as you use non-blocking sockets and block only inside <code>select()</code>."}], "tags": [], "owner": {"reputation": 56858, "user_id": 131930, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91536fe27d32713b8a154a0bf42f6748?s=128&d=identicon&r=PG", "display_name": "Jeremy Friesner", "link": "https://stackoverflow.com/users/131930/jeremy-friesner"}, "is_accepted": false, "score": 1, "last_activity_date": 1562795973, "creation_date": 1562795973, "answer_id": 56979188, "question_id": 56979085, "link": "https://stackoverflow.com/questions/56979085/tcp-socket-on-server-side-using-python-with-select-on-windows/56979188#56979188", "title": "TCP Socket on Server Side Using Python with select on Windows", "body": "<p>Using <code>select()</code> under Windows is 99% the same as it is under other OS's, with some minor variations.  The minor variations (at least the ones I know about) are:</p>\n\n<ol>\n<li><p>Under Windows, <code>select()</code> only works for real network sockets.  In particular, don't bother trying to <code>select()</code> on <code>stdin</code> under Windows, as it won't work.</p></li>\n<li><p>Under Windows, if you attempt a non-blocking TCP connection and the TCP connection fails asynchronously, you will get a notification of that failure via the third (\"exception\") fd_set only.  (Under other OS's you will get notified that the failed-to-connect TCP-socket is ready-for-read/write also)</p></li>\n<li><p>Under Windows, <code>select()</code> will fail if you don't pass in at least one valid socket to it (so you can't use <code>select([], [], [], timeoutInSeconds)</code> as an alternative to <code>time.sleep()</code> like you can under some other OS's)</p></li>\n</ol>\n\n<p>Other than that <code>select()</code> for Windows is like <code>select()</code> for any other OS.  (If your real question about how to use <code>select()</code> in general, you can find information about that using a web search)</p>\n"}], "owner": {"reputation": 161, "user_id": 11582539, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-WYwlX5d4a3s/AAAAAAAAAAI/AAAAAAAAADg/8aJ1tf74jyU/photo.jpg?sz=128", "display_name": "Sean Tashlik", "link": "https://stackoverflow.com/users/11582539/sean-tashlik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562795973, "creation_date": 1562795273, "question_id": 56979085, "link": "https://stackoverflow.com/questions/56979085/tcp-socket-on-server-side-using-python-with-select-on-windows", "title": "TCP Socket on Server Side Using Python with select on Windows", "body": "<p>By trying to find an optimization to my server on python, I have stumbled on a concept called select. By trying to find any code possible to use, no matter where I looked, Windows compatibility with this subject is hard to find.</p>\n\n<p>Any ideas how to program a TCP server with select on windows? I know about the idea of unblocking the sockets to maintain the compatibility with it. Any suggestions will be welcomed.</p>\n"}, {"tags": ["python", "regex"], "answers": [{"tags": [], "owner": {"reputation": 843, "user_id": 8426627, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/8203c0c714dd17ad3eff6d7188ff548a?s=128&d=identicon&r=PG&f=1", "display_name": "user8426627", "link": "https://stackoverflow.com/users/8426627/user8426627"}, "is_accepted": false, "score": 0, "last_activity_date": 1562795492, "creation_date": 1562795492, "answer_id": 56979114, "question_id": 56979071, "link": "https://stackoverflow.com/questions/56979071/why-isnt-this-being-found-with-the-specified-regex-in-python/56979114#56979114", "title": "why isn&#39;t this being found with the specified regex in python?", "body": "<pre><code>[^(] \n</code></pre>\n\n<p>ahh after edit its correct. that means one any not - <code>[^'(']</code> symbol after =\\s* and THEN [Ff]alse, so it would batch only if some symbol is between = and [Ff]alse</p>\n"}, {"tags": [], "owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "is_accepted": false, "score": 2, "last_activity_date": 1562795509, "creation_date": 1562795509, "answer_id": 56979118, "question_id": 56979071, "link": "https://stackoverflow.com/questions/56979071/why-isnt-this-being-found-with-the-specified-regex-in-python/56979118#56979118", "title": "why isn&#39;t this being found with the specified regex in python?", "body": "<p>The pattern is an equal sign <code>=</code>, followed by zero or more whitespace <code>\\s*</code>, <strong>followed by any character other than '('</strong> <code>[^(]</code>, followed by the word true or false <code>([Tt]rue|[Ff]alse)</code></p>\n\n<p>In item 7, the \"any character other than (\" pattern is matched by the letter F. After than is \"alse\" which isn't the word true and isn't the word false.</p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562879349, "post_id": 56979126, "comment_id": 100528591, "body": "yes but now it matches  #8 too and i don&#39;t want that"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562879611, "post_id": 56979126, "comment_id": 100528664, "body": "Is <code>(required=False, default=None)</code> really part of the input? I thought that was just your comments saying whether the string before it should be matched."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562879674, "post_id": 56979126, "comment_id": 100528688, "body": "If it is part of the real input, why shouldn&#39;t it match? You want to match <code>=True</code> or <code>=False</code>, and <code>required=False</code> contains that."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562879712, "post_id": 56979126, "comment_id": 100528702, "body": "If you only want to match <code>password = True</code> or <code>pasword = False</code>, add <code>password</code> to the beginning of the regexp."}, {"owner": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562883083, "post_id": 56979126, "comment_id": 100529645, "body": "yes it is part of the real input , sorry should have clarified that.  we do not want #8 matched because we just want to get  = followed by immediately by 0 or more white spaces and then  a true or false"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562883183, "post_id": 56979126, "comment_id": 100529673, "body": "Then why shouldn&#39;t it match? <code>required=False</code> contains <code>=</code> followed by zero spaces followed by <code>False</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562883245, "post_id": 56979126, "comment_id": 100529690, "body": "Do you only want to match starting from the first <code>=</code> on the line, so this should fail because it contains <code>=dict</code> before it?"}, {"owner": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562938981, "post_id": 56979126, "comment_id": 100549079, "body": "it should not match required=False  because I specify in the regex that i do not want any true false inside parentheses.  I only want = and 0 or more white space only and then true or false ...."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562944874, "post_id": 56979126, "comment_id": 100552504, "body": "Your regexp say you don&#39;t want a parenthesis between <code>=</code> and <code>true&#47;false</code>. It doesn&#39;t say anything about parentheses around the whole thing, or anything else outside of the <code>=true&#47;false</code>"}, {"owner": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562949101, "post_id": 56979126, "comment_id": 100554450, "body": "true the regex is not checking for the closing parentheses,  that is fine. just need to match = with any number of white space  or no space then true or false( [Tt]rue|[Ff]alse )  .  and i don&#39;t get why the * after \\s is not recognizing when it is 0 white space."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562949316, "post_id": 56979126, "comment_id": 100554541, "body": "It is recognizing when it is 0 white space. Then it matches <code>[^(]</code>, which consumes the next character, which is <code>F</code>. Then it tries to match <code>False</code> or <code>True</code>, but at that point it&#39;s just <code>alse</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562949362, "post_id": 56979126, "comment_id": 100554555, "body": "That&#39;s why I make the <code>[^(]</code> optional. This allows it to backtrack and ignore that pattern, and match <code>False</code>."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562949443, "post_id": 56979126, "comment_id": 100554596, "body": "It has nothing to do with the closing parentheses. The problem is that you have no restrictions on what comes before <code>=False</code>. There&#39;s nothing that says that you can&#39;t have <code>(blah blah =False)</code>. You only prohibit <code>(</code> after <code>=</code>, not before it."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562949556, "post_id": 56979126, "comment_id": 100554646, "body": "I&#39;ve updated the regexp to add <code>^[^(]*</code> before <code>=</code>. It no longer matches 8."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562949626, "post_id": 56979126, "comment_id": 100554674, "body": "I changed it to <code>^[^(\\n]</code> so it won&#39;t match across multiple lines."}, {"owner": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562953794, "post_id": 56979126, "comment_id": 100556245, "body": "so are you saying matching across lines is an issue?"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562955681, "post_id": 56979126, "comment_id": 100556916, "body": "It was an issue in my regex101.com demo, and it could be in your application if you process multi-line input."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562955731, "post_id": 56979126, "comment_id": 100556937, "body": "It was matching the combination of lines 5 and 6."}, {"owner": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "edited": false, "score": 0, "creation_date": 1562960281, "post_id": 56979126, "comment_id": 100558413, "body": "yes I do process multi line input.  Thanks for your help on this!"}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 2, "last_activity_date": 1562949526, "last_edit_date": 1562949526, "creation_date": 1562795566, "answer_id": 56979126, "question_id": 56979071, "link": "https://stackoverflow.com/questions/56979071/why-isnt-this-being-found-with-the-specified-regex-in-python/56979126#56979126", "title": "why isn&#39;t this being found with the specified regex in python?", "body": "<p><code>[^(]</code> means you require a character that isn't <code>(</code> between the (possibly empty) sequence of spaces and the word <code>True</code> or <code>False</code>. There's no such character on that line.</p>\n\n<p>You can make that character optional.</p>\n\n<pre><code>^[^(\\n]*=\\s*[^(]?([Tt]rue|[Ff]alse)\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/1WH7NQ/3\" rel=\"nofollow noreferrer\">DEMO</a></p>\n"}], "owner": {"reputation": 23, "user_id": 11767172, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-fv89HWde26I/AAAAAAAAAAI/AAAAAAAAAGk/R-n6gXYMpXg/photo.jpg?sz=128", "display_name": "G J", "link": "https://stackoverflow.com/users/11767172/g-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1562949526, "creation_date": 1562795185, "last_edit_date": 1562795319, "question_id": 56979071, "link": "https://stackoverflow.com/questions/56979071/why-isnt-this-being-found-with-the-specified-regex-in-python", "title": "why isn&#39;t this being found with the specified regex in python?", "body": "<p>I am using this regex in python:</p>\n\n<pre><code>=\\s*[^(]([Tt]rue|[Ff]alse)\n</code></pre>\n\n<p>When I execute it, it is matching the items shown. However I also expect it to match the 7th item, because the beginning of the regex says an '=' followed by 0 or more white space characters (i.e spaces, tabs etc) and on line 7 there are 0 whites space characters. So why isn't it matching?  </p>\n\n<pre><code>1 password = True (matched)\n2 password = true (matched)\n3 password = false (matched)\n4 password = False (matched)\n5 password \"False\"\n6 password = 'True' (matched)\n7 password =False (not matched but expected to be)\n8 password =dict(required=False, default=None)\n</code></pre>\n"}, {"tags": ["python", "flask"], "comments": [{"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562796122, "post_id": 56979065, "comment_id": 100494279, "body": "<code>url_for(&#39;userpage&#39;, user_id=session[&#39;user_ID&#39;])</code>"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 7344518, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4f776a8fb1d29e08b9b1d445aa065065?s=128&d=identicon&r=PG&f=1", "display_name": "El CC", "link": "https://stackoverflow.com/users/7344518/el-cc"}, "edited": false, "score": 0, "creation_date": 1562798716, "post_id": 56979253, "comment_id": 100494938, "body": "Thanks it worked out, Also, I&#39;m fairly new to flask, is there a better way to create a button like this?"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "reply_to_user": {"reputation": 67, "user_id": 7344518, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4f776a8fb1d29e08b9b1d445aa065065?s=128&d=identicon&r=PG&f=1", "display_name": "El CC", "link": "https://stackoverflow.com/users/7344518/el-cc"}, "edited": false, "score": 0, "creation_date": 1562799953, "post_id": 56979253, "comment_id": 100495195, "body": "you can use <code>url_for</code> in HTML too. <code>href=&quot;{{ url_for(&#39;useradd&#39;, user_id=data.uid) }}&quot;</code>. When you decide to change url in <code>@app.route(...)</code> then you don&#39;t have to change it in HTML. But I prefer <code>href=&quot;&#47;user&#47;add&#47;{{ data.uid }}&quot;</code> because I can see this url in HTML and don&#39;t have to search it in code."}], "tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": true, "score": 1, "last_activity_date": 1562796719, "last_edit_date": 1562796719, "creation_date": 1562796412, "answer_id": 56979253, "question_id": 56979065, "link": "https://stackoverflow.com/questions/56979065/using-a-button-to-run-a-sql-query-with-flask/56979253#56979253", "title": "Using a button to run a SQL query with flask", "body": "<p>Code </p>\n\n<pre><code>return redirect(url_for('userpage'))\n</code></pre>\n\n<p>try to use <code>route('/user/')</code> to build URL but you have only <code>route('/user/&lt;user_id&gt;')</code> which expects <code>user_id</code> as parameter - so you have to add this <code>user_id</code> in <code>url_for</code></p>\n\n<pre><code>url_for('userpage', user_id=user_id)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>url_for('userpage', user_id=session['user_ID'])\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 7344518, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4f776a8fb1d29e08b9b1d445aa065065?s=128&d=identicon&r=PG&f=1", "display_name": "El CC", "link": "https://stackoverflow.com/users/7344518/el-cc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 436, "favorite_count": 0, "accepted_answer_id": 56979253, "answer_count": 1, "score": 0, "last_activity_date": 1562796719, "creation_date": 1562795166, "question_id": 56979065, "link": "https://stackoverflow.com/questions/56979065/using-a-button-to-run-a-sql-query-with-flask", "title": "Using a button to run a SQL query with flask", "body": "<p>On userpage page I have an \"add\" button which is supposed to send an add request to another user. The flask code for the button uses the friend_request table which needs the user id of the request sender which is stored in session[user_ID] and the receiver whose ID is stored in data.uid (in HTML) which originates from \"data\" on userpage() route, \nFlask code for users page:</p>\n\n<pre><code>@app.route('/user/&lt;user_id&gt;')\ndef userpage(user_id):\n    user_id = int(user_id)\n    c = sq.connection.cursor()\n\n    try:\n        result = c.execute('SELECT * FROM users WHERE uid = %s ',(user_id))\n    except:\n        print('Error','info')\n    data = c.fetchall()\n\n    return render_template('user/profpage.html', data=data[0]) \n</code></pre>\n\n<p>Userpage HTML:</p>\n\n<pre><code>&lt;h1&gt;Name here&lt;/h1&gt;\n&lt;p&gt; Description, of a really cool person&lt;/p&gt;\n\n&lt;p&gt; {{ data.fname }}&lt;/p&gt;\n&lt;p&gt; {{ data.lname }}&lt;/p&gt;\n&lt;p&gt; {{ data.email }}&lt;/p&gt;\n{% if session['user_ID'] != data.uid %}\n    &lt;a href=\"/user/add/{{ data.uid }}\" class=\"btn btn-primary\" name=\"Add\"&gt;Add&lt;/a&gt;\n{% endif %}\n</code></pre>\n\n<p>Flask code for Add button:</p>\n\n<pre><code>@app.route('/user/add/&lt;user_id&gt;')\ndef useradd(user_id):\n    user_id = int(user_id)\n    c = sq.connection.cursor()\n    try:\n        result = c.execute('INSERT INTO friend_requests(req_by,req_to) VALUES (%s,%s) ',(session['user_ID'],user_id))\n        sq.connection.commit()\n    except:\n        print('Error','info')\n\n    return redirect(url_for('userpage'))\n</code></pre>\n\n<p>when I try to implement this it enters the information into the datebase table however, I get the following error \"werkzeug.routing.BuildError: Could not build url for endpoint 'userpage'. Did you forget to specify values ['user_id']?\"</p>\n"}, {"tags": ["python", "class", "attributes"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1562795195, "post_id": 56979052, "comment_id": 100494026, "body": "This is a fairly contrived example class. Most classes you write won&#39;t have 6 fields that are directly supplied by the constructor parameters like this. If you do have something like this in the real world, a Named Tuple or something similar is likely more appropriate."}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 0, "creation_date": 1562795563, "post_id": 56979052, "comment_id": 100494130, "body": "I&#39;m not sure but probably module <a href=\"https://github.com/python-attrs/attrs\" rel=\"nofollow noreferrer\">attrs</a> tries to resolve this problem. You have to define class&#39;s attributes and you don&#39;t have to write <code>__init__</code> for them."}, {"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1562795704, "post_id": 56979052, "comment_id": 100494167, "body": "If you&#39;re on (or can upgrade to) 3.7, use <a href=\"https://docs.python.org/3/library/dataclasses.html\" rel=\"nofollow noreferrer\"><code>@dataclass</code></a>."}, {"owner": {"reputation": 1640, "user_id": 10161091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe86bf0a3374f272b0571e1b59abe96?s=128&d=identicon&r=PG&f=1", "display_name": "SaTa", "link": "https://stackoverflow.com/users/10161091/sata"}, "edited": false, "score": 0, "creation_date": 1562796973, "post_id": 56979052, "comment_id": 100494493, "body": "This is not just for storing the data. I have methods as well. But want to simplify the init and not write all those lines one at a time."}, {"owner": {"reputation": 97835, "user_id": 355230, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/VjcbL.jpg?s=128&g=1", "display_name": "martineau", "link": "https://stackoverflow.com/users/355230/martineau"}, "edited": false, "score": 0, "creation_date": 1562801041, "post_id": 56979052, "comment_id": 100495424, "body": "If you&#39;re not using keyword arguments, <i>what</i> determines the class instance&#39;s attribute name each argument corresponds to (as well as which ones are valid)?"}], "answers": [{"comments": [{"owner": {"reputation": 1640, "user_id": 10161091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe86bf0a3374f272b0571e1b59abe96?s=128&d=identicon&r=PG&f=1", "display_name": "SaTa", "link": "https://stackoverflow.com/users/10161091/sata"}, "edited": false, "score": 0, "creation_date": 1562797123, "post_id": 56979158, "comment_id": 100494529, "body": "Thanks. This is not for storing data, I have methods in this class as well. The solution looks good, but I want to have control over on what is getting passed to the class. With the solution using keyword arguments, someone can initiate the class with any variable that they pass to it. I like that to be fixed and from the variable list provided in the <b>init</b> def. I am going to update he OP to be more clear."}], "tags": [], "owner": {"reputation": 1188, "user_id": 4337867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c11dddbb27f337acd4db31183cc95a?s=128&d=identicon&r=PG", "display_name": "josoler", "link": "https://stackoverflow.com/users/4337867/josoler"}, "is_accepted": false, "score": 2, "last_activity_date": 1562797469, "last_edit_date": 1562797469, "creation_date": 1562795744, "answer_id": 56979158, "question_id": 56979052, "link": "https://stackoverflow.com/questions/56979052/is-it-possible-to-make-all-the-inputs-to-class-init-as-attributes-in-one-l/56979158#56979158", "title": "Is it possible to make all the inputs to class.__init__() as attributes in one line?", "body": "<p>For positional arguments you could do something like</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class A:\n    def __init__(self, *args):\n        names = ('attr_name_1', 'attr_name_2', ..., 'attr_name_n')\n        for name, value in zip(names, args):\n            setattr(self, name, value)\n</code></pre>\n\n<p>If you want to make sure you are getting the amount of values you need here you can check <code>len(args) == len(names)</code></p>\n\n<p>With keyword arguments it's just</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>class A:\n    def __init__(self, **kwargs):\n        for name, value in kwargs.items():\n            setattr(self, name, value)\n</code></pre>\n\n<p>Again, if you want to check that the arguments are the ones you expect you can store the expected keys in a set (say <code>names</code>) and check <code>names == set(kwargs.keys())</code></p>\n\n<p>Anyway, if you want to use your class to basically store that data you can use <code>dataclasses</code>. Taken from the official Python3.7 documentation:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>@dataclass\nclass InventoryItem:\n    '''Class for keeping track of an item in inventory.'''\n    name: str\n    unit_price: float\n    quantity_on_hand: int = 0\n\n    def total_cost(self) -&gt; float:\n        return self.unit_price * self.quantity_on_hand\n</code></pre>\n\n<p>Note that for earlier Python versions <code>dataclasses</code> is not part of the Python Standard Library but can be installed as a regular package (e.g. <code>pip install dataclasses</code>)</p>\n"}, {"tags": [], "owner": {"reputation": 1640, "user_id": 10161091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe86bf0a3374f272b0571e1b59abe96?s=128&d=identicon&r=PG&f=1", "display_name": "SaTa", "link": "https://stackoverflow.com/users/10161091/sata"}, "is_accepted": false, "score": 0, "last_activity_date": 1562806889, "creation_date": 1562806889, "answer_id": 56980375, "question_id": 56979052, "link": "https://stackoverflow.com/questions/56979052/is-it-possible-to-make-all-the-inputs-to-class-init-as-attributes-in-one-l/56980375#56980375", "title": "Is it possible to make all the inputs to class.__init__() as attributes in one line?", "body": "<p>This seems to be one option (maybe not the most pythonic way though):</p>\n\n<pre><code>class A:\n    def __init__(self, name, surname):\n        for item in inspect.signature(A).parameters:\n            setattr(self, item, eval(item))\n</code></pre>\n\n<p>With the above, the name and surname have to be provide when initiating the class, but I do not need to do the assignment witin <strong>init</strong>() one line at a time.</p>\n"}], "owner": {"reputation": 1640, "user_id": 10161091, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/efe86bf0a3374f272b0571e1b59abe96?s=128&d=identicon&r=PG&f=1", "display_name": "SaTa", "link": "https://stackoverflow.com/users/10161091/sata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1562806889, "creation_date": 1562795114, "last_edit_date": 1562797284, "question_id": 56979052, "link": "https://stackoverflow.com/questions/56979052/is-it-possible-to-make-all-the-inputs-to-class-init-as-attributes-in-one-l", "title": "Is it possible to make all the inputs to class.__init__() as attributes in one line?", "body": "<p>Most of the Python classes I have seen look like this (from the tutorial):</p>\n\n<pre><code>class Person:\n\n    def __init__(self, name, surname, birthdate, address, telephone, email):\n        self.name = name\n        self.surname = surname\n        self.birthdate = birthdate\n\n        self.address = address\n        self.telephone = telephone\n        self.email = email\n</code></pre>\n\n<p>Is there a way to have all the inputs to <strong>init</strong> as attributes without typing them one at a time line by line?</p>\n\n<p>This is not just for data storage and I have other methods withing the class. </p>\n\n<p>I like to do sth like this:</p>\n\n<pre><code>class A:\n    def __init__(self, name, surname, birthdate, address, telephone, email):\n        for name, value in kwargs.items():\n            setattr(self, name, value)\n</code></pre>\n\n<p>So the class cannot be initiated with any random variable but then I am not typing the <code>self.item = item</code> for each item.</p>\n"}, {"tags": ["python", "python-3.x", "ssl", "urllib2", "digest-authentication"], "comments": [{"owner": {"reputation": 1, "user_id": 11767107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca4d2bccc5181b10e0a0ef70cb93e744?s=128&d=identicon&r=PG&f=1", "display_name": "stianj", "link": "https://stackoverflow.com/users/11767107/stianj"}, "edited": false, "score": 0, "creation_date": 1565554545, "post_id": 56979039, "comment_id": 101381142, "body": "Or is there a way to get more logging to find out what&#39;s failing? It&#39;s very interesting that just adding post-data makes the handshake work. But that won&#39;t give me the data I want :)"}], "answers": [{"tags": [], "owner": {"reputation": 19, "user_id": 3792373, "user_type": "registered", "profile_image": "https://graph.facebook.com/1197595239/picture?type=large", "display_name": "Chaitanya Jadhav", "link": "https://stackoverflow.com/users/3792373/chaitanya-jadhav"}, "is_accepted": false, "score": 1, "last_activity_date": 1580903042, "creation_date": 1580903042, "answer_id": 60075074, "question_id": 56979039, "link": "https://stackoverflow.com/questions/56979039/the-handshake-operation-timed-out-with-urllib-works-with-requests/60075074#60075074", "title": "&quot;The handshake operation timed out&quot; with urllib, works with requests", "body": "<p>I am not familiar with task you are working on, but such error is encountered because of bad internet. I had encountered the same error while using youtube-dl to download the videos, but solved it by simply switching to another internet. Also SSH tunnels do not work because of bad network. </p>\n"}], "owner": {"reputation": 1, "user_id": 11767107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca4d2bccc5181b10e0a0ef70cb93e744?s=128&d=identicon&r=PG&f=1", "display_name": "stianj", "link": "https://stackoverflow.com/users/11767107/stianj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1580903042, "creation_date": 1562794993, "last_edit_date": 1565554406, "question_id": 56979039, "link": "https://stackoverflow.com/questions/56979039/the-handshake-operation-timed-out-with-urllib-works-with-requests", "title": "&quot;The handshake operation timed out&quot; with urllib, works with requests", "body": "<p>First of all, this is for a Gira Homeserver, which is a home automation server. It has Python 2.7, and I can't install external modules.</p>\n\n<p>But for testing and examples, I've been using both python 2.7.15 and python 3.6.8 (but have tried a few other version as well - same result)</p>\n\n<p>What I'm trying to do, is to read content from the webserver of my Philips Android TV. This works fine with browser, it works fine with Curl, and it works fine with Python requests. But it does not work with urllib2, which is what I need to use for this to work with my home automation system.</p>\n\n<p>The TV is providing json output on a https webpage requiring Digest auth.</p>\n\n<p>Urllib example (Python3, to be able to compare with requests):</p>\n\n<pre><code>import urllib.request\nimport ssl\n\nurl=\"https://192.168.3.100:1926/6/powerstate\"\nusername=\"6AJeu5Ffdm9dQnum\"\npassword=\"5a21386d952c2f1fbe66be2471d98c391bb918a6d2130cdf1b6deb2b87872eaa\"\n\nctx = ssl._create_unverified_context()\n\nauth = urllib.request.HTTPDigestAuthHandler(urllib.request.HTTPPasswordMgrWithDefaultRealm())\nauth.add_password (None, url, username, password)\n\nopener = urllib.request.build_opener(urllib.request.HTTPSHandler(context=ctx,debuglevel=1), auth)\nurllib.request.install_opener(opener)\nresponse = urllib.request.urlopen(url,None,10)\n</code></pre>\n\n<p>Requests example:</p>\n\n<pre><code>import requests\nimport ssl\n\nurl=\"https://192.168.3.100:1926/6/powerstate\"\nusername=\"6AJeu5Ffdm9dQnum\"\npassword=\"5a21386d952c2f1fbe66be2471d98c391bb918a6d2130cdf1b6deb2b87872eaa\"\n\n\nfrom requests.auth import HTTPDigestAuth\nfrom requests.packages.urllib3.exceptions import InsecureRequestWarning\nrequests.packages.urllib3.disable_warnings(InsecureRequestWarning)\nr = requests.get(url, auth=HTTPDigestAuth(username, password), timeout=10, verify=False)\nprint(r.status_code)\nprint(r.content)\n</code></pre>\n\n<p>The urllib example times out with following error:</p>\n\n<pre><code>stianj@buick:~$ python3 stack.py\nsend: b'GET /6/powerstate HTTP/1.1\\r\\nAccept-Encoding: identity\\r\\nHost: 192.168.3.100:1926\\r\\nUser-Agent: Python-urllib/3.6\\r\\nConnection: close\\r\\n\\r\\n'\nreply: 'HTTP/1.1 401 Unauthorized\\r\\n'\nheader: Date: Wed, 10 Jul 2019 21:36:45 GMT+00:00\nheader: Accept-Ranges: bytes\nheader: Server: Restlet-Framework/2.3.12\nheader: WWW-Authenticate: Digest realm=\"XTV\", domain=\"/\", nonce=\"MTU2Mjc5NDYwNTI3ODo1NTNlMTFhYzk5MjJjODQyMTYyZjAxZjRhYmYyYzNhMA==\", algorithm=MD5, qop=\"auth\"\nheader: Content-Length: 424\nheader: Content-Type: text/html; charset=UTF-8\nTraceback (most recent call last):\n  File \"/usr/lib/python3.6/urllib/request.py\", line 1318, in do_open\n    encode_chunked=req.has_header('Transfer-encoding'))\n  File \"/usr/lib/python3.6/http/client.py\", line 1239, in request\n    self._send_request(method, url, body, headers, encode_chunked)\n  File \"/usr/lib/python3.6/http/client.py\", line 1285, in _send_request\n    self.endheaders(body, encode_chunked=encode_chunked)\n  File \"/usr/lib/python3.6/http/client.py\", line 1234, in endheaders\n    self._send_output(message_body, encode_chunked=encode_chunked)\n  File \"/usr/lib/python3.6/http/client.py\", line 1026, in _send_output\n    self.send(msg)\n  File \"/usr/lib/python3.6/http/client.py\", line 964, in send\n    self.connect()\n  File \"/usr/lib/python3.6/http/client.py\", line 1400, in connect\n    server_hostname=server_hostname)\n  File \"/usr/lib/python3.6/ssl.py\", line 407, in wrap_socket\n    _context=self, _session=session)\n  File \"/usr/lib/python3.6/ssl.py\", line 817, in __init__\n    self.do_handshake()\n  File \"/usr/lib/python3.6/ssl.py\", line 1077, in do_handshake\n    self._sslobj.do_handshake()\n  File \"/usr/lib/python3.6/ssl.py\", line 689, in do_handshake\n    self._sslobj.do_handshake()\nsocket.timeout: _ssl.c:835: The handshake operation timed out\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"stack.py\", line 15, in &lt;module&gt;\n    response = urllib.request.urlopen(url,None,10)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 223, in urlopen\n    return opener.open(url, data, timeout)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 532, in open\n    response = meth(req, response)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 642, in http_response\n    'http', request, response, code, msg, hdrs)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 564, in error\n    result = self._call_chain(*args)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 504, in _call_chain\n    result = func(*args)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 1208, in http_error_401\n    host, req, headers)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 1089, in http_error_auth_reqed\n    return self.retry_http_digest_auth(req, authreq)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 1103, in retry_http_digest_auth\n    resp = self.parent.open(req, timeout=req.timeout)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 526, in open\n    response = self._open(req, data)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 544, in _open\n    '_open', req)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 504, in _call_chain\n    result = func(*args)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 1361, in https_open\n    context=self._context, check_hostname=self._check_hostname)\n  File \"/usr/lib/python3.6/urllib/request.py\", line 1320, in do_open\n    raise URLError(err)\nurllib.error.URLError: &lt;urlopen error _ssl.c:835: The handshake operation timed out&gt;\n</code></pre>\n\n<p>while the request example works just fine (shows output from webpage. Since I'm using the same Python version for both examples, I'd expect ssl parameters and ciphers etc. to be the same. What is <em>extremely</em> interesting, is that a POST works just fine with urllib. It's just the GET that times out.</p>\n\n<p>I know it's always recommended to use requests these days, but that's not an option for me. Would anyone have an explanation to the handshake error?</p>\n\n<p>Been banging my head at this for a few days...</p>\n"}, {"tags": ["python", "file", "directory", "path", "os.walk"], "comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1562795033, "post_id": 56979015, "comment_id": 100493983, "body": "Where are the new subdirectories in your result? It looks like you deleted the second file rather than moving the first file."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562795162, "post_id": 56979015, "comment_id": 100494019, "body": "<code>filenames[0]</code> is the first file in the directory."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 1, "creation_date": 1562795245, "post_id": 56979015, "comment_id": 100494037, "body": "See <a href=\"https://stackoverflow.com/questions/8858008/how-to-move-a-file-in-python\" title=\"how to move a file in python\">stackoverflow.com/questions/8858008/&hellip;</a> for how to move a file."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 1, "creation_date": 1562795287, "post_id": 56979015, "comment_id": 100494052, "body": "@Prune No need to use the shell, Python has <code>os.rename()</code> and <code>shutil.move()</code>."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1562795360, "post_id": 56979015, "comment_id": 100494072, "body": "Yup -- much better.  I&#39;m blinded by my own coding problems ... :-)"}, {"owner": {"reputation": 7, "user_id": 10553703, "user_type": "registered", "profile_image": "https://graph.facebook.com/307971229798727/picture?type=large", "display_name": "Bob Adi Setiawan", "link": "https://stackoverflow.com/users/10553703/bob-adi-setiawan"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562819891, "post_id": 56979015, "comment_id": 100498821, "body": "Sorry, the directory in the second image should be &#39;x&#39; as you can see in the code that I provided @Barmar"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 10553703, "user_type": "registered", "profile_image": "https://graph.facebook.com/307971229798727/picture?type=large", "display_name": "Bob Adi Setiawan", "link": "https://stackoverflow.com/users/10553703/bob-adi-setiawan"}, "edited": false, "score": 0, "creation_date": 1562819956, "post_id": 56979203, "comment_id": 100498842, "body": "I tried this but it only moves the file and not create a sub directory as in my image above"}, {"owner": {"reputation": 431, "user_id": 10249632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JEjFG.png?s=128&g=1", "display_name": "VictorDDT", "link": "https://stackoverflow.com/users/10249632/victorddt"}, "reply_to_user": {"reputation": 7, "user_id": 10553703, "user_type": "registered", "profile_image": "https://graph.facebook.com/307971229798727/picture?type=large", "display_name": "Bob Adi Setiawan", "link": "https://stackoverflow.com/users/10553703/bob-adi-setiawan"}, "edited": false, "score": 0, "creation_date": 1562881279, "post_id": 56979203, "comment_id": 100529182, "body": "It&#39;s not a problem. I&#39;ve updated my code with an additional block. You can create a dir if it doesn&#39;t exist."}], "tags": [], "owner": {"reputation": 431, "user_id": 10249632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JEjFG.png?s=128&g=1", "display_name": "VictorDDT", "link": "https://stackoverflow.com/users/10249632/victorddt"}, "is_accepted": false, "score": 0, "last_activity_date": 1562881220, "last_edit_date": 1562881220, "creation_date": 1562796061, "answer_id": 56979203, "question_id": 56979015, "link": "https://stackoverflow.com/questions/56979015/moving-only-one-file-of-each-sub-directories-to-new-sub-directories/56979203#56979203", "title": "Moving only one file of each sub directories to new sub directories", "body": "<p>You are almost there :)</p>\n\n<p>All you need is to have both full path of file: an old path (existing file) and a new path (where you want to move it).</p>\n\n<p>As it mentioned in <a href=\"https://stackoverflow.com/questions/8858008/how-to-move-a-file-in-python\">this post</a> you can move files in different ways in Python. You can use \"os.rename\" or \"shutil.move\".</p>\n\n<p>Here is a full tested code-sample:</p>\n\n<pre><code>import os, shutil\n\npath = './test/'\nnew_path = './x/'\n\nn = 1\nfext = \".png\"\n\nfor dirpath, dirnames, filenames in os.walk(path): \n    for filename in [f for f in filenames if f.endswith(fext)][:n]:\n        print(filename) #this only print the file name in each sub dir\n\n        filenameFull = os.path.join(dirpath, filename)\n        new_filenameFull = os.path.join(new_path, filename)\n\n        # if new directory doesn't exist - you create it recursively\n        if not os.path.exists(new_path):\n            os.makedirs(new_path)        \n\n        # Use \"os.rename\"\n        #os.rename(filenameFull, new_filenameFull)\n\n        # or use \"shutil.move\"\n        shutil.move(filenameFull, new_filenameFull)\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 10553703, "user_type": "registered", "profile_image": "https://graph.facebook.com/307971229798727/picture?type=large", "display_name": "Bob Adi Setiawan", "link": "https://stackoverflow.com/users/10553703/bob-adi-setiawan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562881220, "creation_date": 1562794811, "last_edit_date": 1562794956, "question_id": 56979015, "link": "https://stackoverflow.com/questions/56979015/moving-only-one-file-of-each-sub-directories-to-new-sub-directories", "title": "Moving only one file of each sub directories to new sub directories", "body": "<p>I have question regarding moving one file in each sub directories to other new sub directories. So for example if I have directory as it shown in the image</p>\n\n<p><a href=\"https://i.stack.imgur.com/oEP5f.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/oEP5f.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>And from that, I want to pick only the first file in each sub directories then move it to another new sub directories with the same name as you can see from the image. And this is my expected result</p>\n\n<p><a href=\"https://i.stack.imgur.com/glJ8I.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/glJ8I.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>I have tried using os.walk to select the first file of each sub directories, but I still don't know how to move it to another sub directories with the same name</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>path = './test/'\nnew_path = './x/'\n\nn = 1\nfext = \".png\"\n\nfor dirpath, dirnames, filenames in os.walk(path): \n    for filename in [f for f in filenames if f.endswith(fext)][:n]:\n        print(filename) #this only print the file name in each sub dir\n</code></pre>\n\n<p>The expected result can be seen in the image above</p>\n"}, {"tags": ["python", "macos", "jupyter-notebook", "logbook"], "comments": [{"owner": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1562795037, "post_id": 56978994, "comment_id": 100493985, "body": "you have two different versions of python ... in both places try <code>import sys; print(sys.executable);</code>  you may also want to print <code>sys.path</code>"}, {"owner": {"reputation": 71, "user_id": 11466376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07396d2a35a9cdae3431754679c7886d?s=128&d=identicon&r=PG", "display_name": "Kay", "link": "https://stackoverflow.com/users/11466376/kay"}, "reply_to_user": {"reputation": 92930, "user_id": 541038, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/a3a82559ae1ee7ec304fdbae095f063c?s=128&d=identicon&r=PG", "display_name": "Joran Beasley", "link": "https://stackoverflow.com/users/541038/joran-beasley"}, "edited": false, "score": 0, "creation_date": 1562855478, "post_id": 56978994, "comment_id": 100517679, "body": "@JoranBeasley.. Thanks for your response! This sounds very basic but, do you by any chance have any suggestions on how may I fix this? I had this similar issue with other module called twobitreader but then it worked just fine when i reinstalled it but this solution doesn&#39;t work for &#39;logbook&#39;. comments?"}], "owner": {"reputation": 71, "user_id": 11466376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07396d2a35a9cdae3431754679c7886d?s=128&d=identicon&r=PG", "display_name": "Kay", "link": "https://stackoverflow.com/users/11466376/kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 276, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562794684, "creation_date": 1562794684, "question_id": 56978994, "link": "https://stackoverflow.com/questions/56978994/issue-with-import-logbook", "title": "Issue with import &#39;logbook&#39;", "body": "<p>I installed logbook with my terminal using \n<code>conda install -c quantopian logbook</code> and It works just fine when I try to use it in a python script <code>file.py</code> but once I try to run the same code on a jupyter notebook, It throws error so as:</p>\n\n<pre><code>      2 \n----&gt; 3 import logbook\n      4 import tempfile\n      5 import numpy as np\n\nModuleNotFoundError: No module named 'logbook'\n</code></pre>\n\n<p>Furthermore, the notebook and the installation was in same folder, If that does change anything. Also the python version used in 3.6.4</p>\n\n<p>Looking forward to some help here!</p>\n\n<p>thanks</p>\n"}, {"tags": ["python", "tensorflow", "tfrecord"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11767163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QX5Ul.png?s=128&g=1", "display_name": "VEX", "link": "https://stackoverflow.com/users/11767163/vex"}, "is_accepted": false, "score": 0, "last_activity_date": 1562945026, "creation_date": 1562945026, "answer_id": 57009910, "question_id": 56978961, "link": "https://stackoverflow.com/questions/56978961/parsing-files-used-in-creation-of-eval-tfrecord/57009910#57009910", "title": "Parsing files used in creation of eval.tfrecord", "body": "<p>I redirected the output of \"print(example)\" into a file. Then was able to read in that file and parse it as normal using regex to look for .jpg files.</p>\n"}], "owner": {"reputation": 11, "user_id": 11767163, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QX5Ul.png?s=128&g=1", "display_name": "VEX", "link": "https://stackoverflow.com/users/11767163/vex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562945026, "creation_date": 1562794472, "question_id": 56978961, "link": "https://stackoverflow.com/questions/56978961/parsing-files-used-in-creation-of-eval-tfrecord", "title": "Parsing files used in creation of eval.tfrecord", "body": "<p>I am trying to obtain the .jpg files used to create the eval.tfrecord.</p>\n\n<p>I am having trouble just opening the file using python and running a regular expression on the file to find all .jpg files listed randomly throughout the file.</p>\n\n<p>Now I have the file open using the below code and see one of the .jpg files I need in a structured form:</p>\n\n<pre><code>  feature {\n    key: \"image/source_id\"\n    value {\n      bytes_list {\n        value: \"path/to/image.jpg\"\n      }\n    }\n  }\n</code></pre>\n\n<p>Here is the code to get the above result:</p>\n\n<pre><code>#From the Tensorflow Docs:\n\nfrom __future__ import absolute_import, division, print_function, unicode_literals\n\nimport tensorflow as tf\ntf.enable_eager_execution()\n\nimport numpy as np\nimport IPython.display as display\n\nrecord_iterator = tf.python_io.tf_record_iterator(\"eval.tfrecord\")\n\nfor string_record in record_iterator:\n  example = tf.train.Example()\n  example.ParseFromString(string_record)\n\n  print(example)\n\n  # Exit after 1 iteration as this is purely demonstrative.\n  break\n</code></pre>\n\n<p>I would like to just get the .jpgs used and not all the data in the file. Maybe there is someway I can specify the feature with key: image/source_id to get all .jpgs used in the creation of the tfrecord?</p>\n"}, {"tags": ["python", "postgresql", "flask"], "comments": [{"owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "edited": false, "score": 0, "creation_date": 1562796409, "post_id": 56978953, "comment_id": 100494369, "body": "<i>Never</i> write <code>except: continue</code>. It will mask all sorts of errors that you want to know about until your program is complete. Do this instead: <code>except psycopg2.OperationalError: traceback.print_exc()</code>. The problem you report is probably that after the exception, the cursor is in an error state and reusing it doesn&#39;t work. Actually printing the error instead of suppressing it will show this."}, {"owner": {"reputation": 65, "user_id": 10808511, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_Dmh83vvDuA/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iI1xx4NqTHTFZU9uLz1RgrSKQmAQ/mo/photo.jpg?sz=128", "display_name": "Ualas Rohrer", "link": "https://stackoverflow.com/users/10808511/ualas-rohrer"}, "reply_to_user": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "edited": false, "score": 0, "creation_date": 1562797344, "post_id": 56978953, "comment_id": 100494582, "body": "@BoarGules thanks for your comment. Adding your code shows me the error. <code>psycopg2.errors.UndefinedColumn: column &quot;type&quot; does not exist</code> for the second iteration (same as stated above) and then it stops running. How can I proceed?"}, {"owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "edited": false, "score": 0, "creation_date": 1562826938, "post_id": 56978953, "comment_id": 100501186, "body": "Create a fresh cursor for each <code>fetchall</code> instead of trying to reuse it. Depending on the dams, curators get used up."}, {"owner": {"reputation": 65, "user_id": 10808511, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_Dmh83vvDuA/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iI1xx4NqTHTFZU9uLz1RgrSKQmAQ/mo/photo.jpg?sz=128", "display_name": "Ualas Rohrer", "link": "https://stackoverflow.com/users/10808511/ualas-rohrer"}, "reply_to_user": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "edited": false, "score": 0, "creation_date": 1562944037, "post_id": 56978953, "comment_id": 100552058, "body": "@BoarGules I&#39;ve added a cur = con.cursor(), but nothing has changed, do you have any suggestion? . Updated code in the main thread."}], "owner": {"reputation": 65, "user_id": 10808511, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_Dmh83vvDuA/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-iI1xx4NqTHTFZU9uLz1RgrSKQmAQ/mo/photo.jpg?sz=128", "display_name": "Ualas Rohrer", "link": "https://stackoverflow.com/users/10808511/ualas-rohrer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 201, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562943988, "creation_date": 1562794426, "last_edit_date": 1562943988, "question_id": 56978953, "link": "https://stackoverflow.com/questions/56978953/except-not-running-as-expected-and-postgresql-issues", "title": "Except not running as expected and postgresql issues", "body": "<p>I'm creating a simple app to connect to a postgresql database, query it to list all the tables, and query each of the table to output some information. My code is running but I need to fix some issues of the part below. df_dbtables is my pandas dataframe of db schemas and tables.</p>\n\n<pre><code>for index, row in df_dbtables.iterrows():\n    try:\n        schema_table = row['schema'] + \".\" + row['table']\n        cur.execute(\"SELECT type,stylename FROM %s\" % schema_table)\n        rows = cur.fetchall()\n        for row in rows:\n            data.append({\"Type\" : row[0], \"Stylename\" : row[1]})\n    except:\n        continue\n</code></pre>\n\n<p><strong>Issue #1:</strong>\nMy first table runs perfectly. But the second table doesn't have a type field, so It runs into this postgresql error: <code>psycopg2.errors.UndefinedColumn: column \"type\" does not exist</code> Then, the code runs into the <strong>except</strong> that tells the code to continue. The problem is that after the first time running into the except, all my others table queries run into the except too, ignoring that they have type and stylename fields. How can I properly ignore this error message and continue to the next iteration? Also, what is the best way to output SQL errors using try/except?</p>\n\n<p><strong>Issue #2:</strong>\nOnce fixed the above issue I would like to know how can I prevent this: If a field doesn't exists and run into a SQL error, it will ignore the other field (if it exists) because it will run into the except. For example: The script is querying table X, that is a table without type field, when it runs into the except It will ignore its stylenames data. </p>\n\n<p><strong>Improvement:</strong>\nI've tried many ways to parameterize the sql query. I know that way that I used is very prune to SQL injections, but the correct ways just don't work.</p>\n\n<p>Tried <a href=\"http://initd.org/psycopg/docs/usage.html\" rel=\"nofollow noreferrer\">these methods</a> and <a href=\"https://stackoverflow.com/questions/1466741/parameterized-queries-with-psycopg2-python-db-api-and-postgresql\">others</a> but couldn't run them successfully. </p>\n\n<p><strong>APP</strong>\nMy next step is creating a Flask app for this code. So, if you have a solution that uses Flask it will be welcome.</p>\n\n<p>Code updated at July 12th. But still with the same issues:</p>\n\n<pre><code>for index, row in df_dbtables.iterrows():\n    try:\n        schema_table = row['schema'] + \".\" + row['table']\n        cur = con.cursor()\n        cur.execute(\"SELECT type,stylename FROM %s\" % schema_table)\n        for r in rs:\n            data.append({\"Type\" : r[0], \"Stylename\" : r[1]})\n    #except psycopg2.OperationalError: traceback.print_exc()\n    except: continue\n</code></pre>\n"}, {"tags": ["python", "postgresql", "sqlalchemy"], "comments": [{"owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "edited": false, "score": 0, "creation_date": 1562795278, "post_id": 56978939, "comment_id": 100494049, "body": "Related: <a href=\"https://stackoverflow.com/questions/38495291/sqlalchemy-not-returning-all-rows-when-querying-table-object-but-returns-all-ro\">SqlAlchemy not returning all rows when querying table object, but returns all rows when I query table object column</a>"}], "answers": [{"tags": [], "owner": {"reputation": 40001, "user_id": 2681632, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YnXs3.png?s=128&g=1", "display_name": "Ilja Everil&#228;", "link": "https://stackoverflow.com/users/2681632/ilja-everil%c3%a4"}, "is_accepted": true, "score": 1, "last_activity_date": 1562796748, "last_edit_date": 1562796748, "creation_date": 1562794814, "answer_id": 56979016, "question_id": 56978939, "link": "https://stackoverflow.com/questions/56978939/sqlalchemy-query-against-a-view-not-returning-full-results/56979016#56979016", "title": "SQLAlchemy query against a view not returning full results", "body": "<p>Your view's actual key is <code>event_id, price_id</code>, not just <code>event_id,</code>. The reason why you are only seeing the first row is that when querying for model objects / entities the ORM consults the <a href=\"https://docs.sqlalchemy.org/en/13/glossary.html#term-identity-map\" rel=\"nofollow noreferrer\">identity map</a> for each found row based on its primary key, and if the object has already been included in the results, it is skipped. So in your case when the second row is processed, SQLAlchemy finds that the object with the primary key <code>1,</code> already exists in the results, and simply ignores the row (since there is no joined eager loading involved).</p>\n\n<p>The fix is simple:</p>\n\n<pre><code>class ViewTicketCounts(db.Model):\n    event_id = db.Column(BigInteger, primary_key=True)\n    price_id = db.Column(BigInteger, primary_key=True)\n    ticket_count = db.Column(BigInteger)\n</code></pre>\n\n<p>This sort of implicit \"distinct on\" is mentioned and reasoned about in the ORM tutorial under <a href=\"https://docs.sqlalchemy.org/en/13/orm/tutorial.html#adding-and-updating-objects\" rel=\"nofollow noreferrer\">\"Adding and Updating Objects\"</a> and <a href=\"https://docs.sqlalchemy.org/en/13/orm/tutorial.html#joined-load\" rel=\"nofollow noreferrer\">\"Joined Load\"</a>.</p>\n"}], "owner": {"reputation": 1047, "user_id": 3665213, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/HXdIF.png?s=128&g=1", "display_name": "Jakob", "link": "https://stackoverflow.com/users/3665213/jakob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 56979016, "answer_count": 1, "score": 0, "last_activity_date": 1562796748, "creation_date": 1562794361, "last_edit_date": 1562796103, "question_id": 56978939, "link": "https://stackoverflow.com/questions/56978939/sqlalchemy-query-against-a-view-not-returning-full-results", "title": "SQLAlchemy query against a view not returning full results", "body": "<p>I am using Flask-SQLAlchemy (flask_sqlalchemy==2.3.2) for my Flask webapp.\nFor normal table queries it has performed flawlessly, but now I am transitioning to  making some of the logic into SQL Views and SQLAlchemy is not capturing the full results.</p>\n\n<p>This is my specific example:</p>\n\n<p>SQL View <code>view_ticket_counts</code>:</p>\n\n<pre><code>CREATE VIEW view_ticket_counts AS\nSELECT event_id, price_id, COUNT(1) AS ticket_count FROM public.tickets\nGROUP BY event_id, price_id\n</code></pre>\n\n<p>When I run this as a normal SQL query with pgAdmin:</p>\n\n<pre><code>SELECT * FROM view_ticket_counts WHERE event_id=1\n</code></pre>\n\n<p>I get the results:</p>\n\n<pre><code>|event_id|price_id|ticket_count|\n|   1    |    1   |     3      |\n|   1    |    2   |     1      |\n</code></pre>\n\n<p>However, if I run a python SQLAlchemy query like so:</p>\n\n<pre><code>ticket_counts = ViewTicketCounts.query.filter_by(event_id=1).all()\nfor tc in ticket_counts:\n    print(tc.event_id, tc.price_id, tc.ticket_count)\n</code></pre>\n\n<p>It only prints one result: <code>1 1 3</code></p>\n\n<p>So for some reason the SQLAlchemy query or implementation is only fetching the first element, even with <code>.all()</code>.</p>\n\n<p>For completion this is my View Model class:</p>\n\n<pre><code>class ViewTicketCounts(db.Model):\n    event_id = db.Column(BigInteger, primary_key=True)\n    price_id = db.Column(BigInteger)\n    ticket_count = db.Column(BigInteger)\n</code></pre>\n"}, {"tags": ["python", "numpy", "nlp", "embedding"], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 8344964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce357eeb1564b229b97ca49acfa162d?s=128&d=identicon&r=PG&f=1", "display_name": "Jianhao Luo", "link": "https://stackoverflow.com/users/8344964/jianhao-luo"}, "is_accepted": false, "score": 0, "last_activity_date": 1572187564, "creation_date": 1572187564, "answer_id": 58580416, "question_id": 56978935, "link": "https://stackoverflow.com/questions/56978935/how-to-parse-the-data-after-bert-embedding/58580416#58580416", "title": "How to parse the data after Bert embedding?", "body": "<p>ok that was my mistake or maybe it's bad convention from the library author:</p>\n\n<pre><code>[list([array([ 9.79349554e-01, -7.06475616e-01 ...... ]dtype=float32),\n array([ ........ ],dtype=float32), ......................\n array([ ........ ],dtype=float32)]\n</code></pre>\n\n<p>actually it's :</p>\n\n<pre><code>[[list([array([ 9.79349554e-01, -7.06475616e-01 ...... ]dtype=float32),\n     array([ ........ ],dtype=float32), ......................\n     array([ ........ ],dtype=float32)]]\n</code></pre>\n\n<p>So you gotta index 0 to reach that</p>\n"}], "owner": {"reputation": 23, "user_id": 8344964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dce357eeb1564b229b97ca49acfa162d?s=128&d=identicon&r=PG&f=1", "display_name": "Jianhao Luo", "link": "https://stackoverflow.com/users/8344964/jianhao-luo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1572187564, "creation_date": 1562794336, "question_id": 56978935, "link": "https://stackoverflow.com/questions/56978935/how-to-parse-the-data-after-bert-embedding", "title": "How to parse the data after Bert embedding?", "body": "<p>I am doing binary classification for title sentences in news. (To determinate whether the new is political biased)\nI am using the Bert embedding from <a href=\"https://pypi.org/project/bert-embedding/\" rel=\"nofollow noreferrer\">https://pypi.org/project/bert-embedding/</a> to embedding training sentences (one raw one title sentence) in Dataframes then feed vectorised Data into logistic regression, but the output data shape from the Bert embedding doesn't support logistic regression model. How can I parse this to make it fit logistic regression model?</p>\n\n<p>Before I used tifdVectorizer it works perfectly and the output is numpy array  like </p>\n\n<pre><code>[[0. 0. 0. ... 0. 0. 0.]\n [0. 0. 0. ... 0. 0. 0.]\n [0. 0. 0. ... 0. 0. 0.]\n ...\n [0. 0. 0. ... 0. 0. 0.]\n [0. 0. 0. ... 0. 0. 0.]\n [0. 0. 0. ... 0. 0. 0.]]\n</code></pre>\n\n<p>each row is vectorised data for one sentence and It's an array with size of 1903 \nAnd I have 516 titles in training data.\nThe output shapes are:</p>\n\n<pre><code>train_x.shape: (516, 1903) test_x.shape (129, 1903)\ntrain_y.shape: (516,) test_y.shape (129,)\n</code></pre>\n\n<p>But after I switched into Bert_Embedding \nthe output vector for ONE row is numpy array list like </p>\n\n<pre><code>[list([array([ 9.79349554e-01, -7.06475616e-01 ...... ]dtype=float32),\n array([ ........ ],dtype=float32), ......................\n array([ ........ ],dtype=float32)]\n</code></pre>\n\n<p>the output shape is like:\n    train_x.shape: (516, 1) test_x.shape (129, 1)\n    train_y.shape: (516,) test_y.shape (129,)</p>\n\n<pre><code> def transform_to_Bert(articles_file: str, classified_articles_file: str):\n    df = get_df_from_articles_file(articles_file, classified_articles_file)\n    df_train, df_test, _, _ = train_test_split(df, df.label, stratify=df.label, test_size=0.2)\n    bert_embedding = BertEmbedding()\n    df_titles_values=df_train.title.values.tolist()\n    result_train = bert_embedding(df_titles_values)\n    result_test = bert_embedding(df_test.title.values.tolist())\n    train_x = pd.DataFrame(result_train, columns=['A', 'Vector'])\n    train_x = train_x.drop(columns=['A'])\n\n    test_x = pd.DataFrame(result_test, columns=['A', 'Vector'])\n    test_x=test_x.drop(columns=['A'])\n    test_x=test_x.values\n    train_x=train_x.values\n    print(test_x)\n    print(train_x)\n    train_y = df_train.label.values\n    test_y = df_test.label.values\n    return {'train_x': train_x, 'test_x': test_x, 'train_y': train_y, 'test_y': test_y, 'input_length': train_x.shape[1], 'vocab_size': train_x.shape[1]}\n</code></pre>\n\n<p>Column A is the original title string in the result. So I just drop it.</p>\n\n<hr>\n\n<p>Below is the code where I use tifd vectoriser which works for logistical model.</p>\n\n<pre><code>def transform_to_tfid(articles_file: str, classified_articles_file: str):\n    df = get_df_from_articles_file(articles_file, classified_articles_file)\n    df_train, df_test, _, _ = train_test_split(df, df.label, stratify=df.label, test_size=0.2)\n    vectorizer = TfidfVectorizer(stop_words='english', )\n    vectorizer.fit(df_train.title)\n    train_x= vectorizer.transform(df_train.title)\n    train_x=train_x.toarray()\n    print(type(train_x))\n    print(train_x)\n    test_x= vectorizer.transform(df_test.title)\n    test_x=test_x.toarray()\n    print(test_x)\n    train_y = df_train.label.values\n    test_y = df_test.label.values\n    return {'train_x': train_x, 'test_x': test_x, 'train_y': train_y, 'test_y': test_y, 'input_length': train_x.shape[1], 'vocab_size': train_x.shape[1]}\n\n\nmodel=LogisticRegression(solver='lbfgs')\nmodel.fit(train_x, train_y)\n</code></pre>\n\n<p>the error is ValueError: setting an array element with a sequence.\nI expected output shape from Bert: <code>train_x.shape: (516, 1) test_x.shape (129, 1)</code> is like that from tifd: <code>train_x.shape: (516, 1903) test_x.shape (129, 1903)</code>so that it fits the logistic model</p>\n"}, {"tags": ["python", "pandas", "timestamp"], "comments": [{"owner": {"reputation": 1188, "user_id": 4337867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c11dddbb27f337acd4db31183cc95a?s=128&d=identicon&r=PG", "display_name": "josoler", "link": "https://stackoverflow.com/users/4337867/josoler"}, "edited": false, "score": 0, "creation_date": 1562794908, "post_id": 56978903, "comment_id": 100493949, "body": "What&#39;s the  difference between <code>NO2_RAW_Cal</code> and <code>NO2_RAW</code>?"}, {"owner": {"reputation": 89, "user_id": 8319613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d2864e00bc42a434758fdec43ca4e69?s=128&d=identicon&r=PG&f=1", "display_name": "D.Banerjee", "link": "https://stackoverflow.com/users/8319613/d-banerjee"}, "reply_to_user": {"reputation": 1188, "user_id": 4337867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c11dddbb27f337acd4db31183cc95a?s=128&d=identicon&r=PG", "display_name": "josoler", "link": "https://stackoverflow.com/users/4337867/josoler"}, "edited": false, "score": 0, "creation_date": 1562795439, "post_id": 56978903, "comment_id": 100494093, "body": "I want to match the NO2_RAW data with the LAQN_NO2 at 04:00 everyday. So I wanted to add the difference between these two (LAQN_NO2 - NO2_RAW) to NO2_RAW to calculate NO2_RAW_cal. NO2_RAW_cal will be the calibrated data."}], "owner": {"reputation": 89, "user_id": 8319613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d2864e00bc42a434758fdec43ca4e69?s=128&d=identicon&r=PG&f=1", "display_name": "D.Banerjee", "link": "https://stackoverflow.com/users/8319613/d-banerjee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562795712, "creation_date": 1562794228, "last_edit_date": 1562795712, "question_id": 56978903, "link": "https://stackoverflow.com/questions/56978903/how-to-calculate-difference-between-two-columns-on-a-particular-timestamp-and-ap", "title": "How to calculate difference between two columns on a particular timestamp and apply that value to data in other rows in python", "body": "<p>I have a dataset like this </p>\n\n<pre><code>RecTime      NO2_RAW    NO2   Species ReadingDateTime LAQN_NO2\n06/6/19 04:00   31.84   80.03   NO2 06/6/19 04:00       38.3\n06/6/19 04:15   34.01   84.16   NO2 06/6/19 04:15       39.1\n</code></pre>\n\n<p>I want to calculate the difference between LAQN_NO2 and NO2_RAW everyday at 04:00 and add that value to NO2_RAW values in other rows on that particular day. I have 2 months of data and I want to do this for each day.</p>\n\n<p>So, I want a table like this</p>\n\n<pre><code>RecTime  NO2_RAW    NO2 Species  ReadingDateTime    LAQN_NO2  NO2_RAW_Cal\n06/6/19 04:00 31.84 80.03 NO2     06/6/19 04:00      38.3     (38.3-31.84)+31.84\n</code></pre>\n\n<p>Note: I have many empty cells of LAQN_NO2 in my table. How will I calculate NO2_RAW_cal and apply this to other rows on a particular day?\nCan someone please help?</p>\n"}, {"tags": ["python", "django", "mongodb", "django-rest-framework", "django-views"], "comments": [{"owner": {"reputation": 32215, "user_id": 3789550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mGqv.gif?s=128&g=1", "display_name": "heemayl", "link": "https://stackoverflow.com/users/3789550/heemayl"}, "edited": false, "score": 0, "creation_date": 1562829235, "post_id": 56978837, "comment_id": 100502340, "body": "Did you run the migrations?"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "edited": false, "score": 0, "creation_date": 1562798380, "post_id": 56978855, "comment_id": 100494865, "body": "Thank you! Indeed, i just learned about routers and i&#39;m going to add them! Thanks again!"}], "tags": [], "owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "is_accepted": true, "score": 1, "last_activity_date": 1562793866, "creation_date": 1562793866, "answer_id": 56978855, "question_id": 56978837, "link": "https://stackoverflow.com/questions/56978837/django-rest-framework-no-such-table/56978855#56978855", "title": "Django rest framework - no such table", "body": "<p>You need to define the database that you are using in the queryset for your API view</p>\n\n<pre><code>class tstList(generics.ListCreateAPIView):\n    queryset = tst.objects.using('dbtwo').all()\n    serializer_class = tstSerializer\n</code></pre>\n\n<p>Even better than this, if the model will only ever use the other database, you can <a href=\"https://docs.djangoproject.com/en/2.2/topics/db/multi-db/#automatic-database-routing\" rel=\"nofollow noreferrer\">set up a router</a> so that you do not have to set \"using\" every time</p>\n\n<pre><code>class MyRouter:\n\n    def db_for_read(model, **hints):\n        if model == tst:\n            return 'dbtwo'\n\n    def db_for_write(model, **hints):\n        if model == tst:\n            return 'dbtwo'\n\n# In your settings\nDATABASE_ROUTERS = ['path.to.MyRouter']\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 10290511, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c53833521f6fd45a67f7c75670782209?s=128&d=identicon&r=PG&f=1", "display_name": "Jack022", "link": "https://stackoverflow.com/users/10290511/jack022"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 56978855, "answer_count": 1, "score": 0, "last_activity_date": 1562793866, "creation_date": 1562793751, "question_id": 56978837, "link": "https://stackoverflow.com/questions/56978837/django-rest-framework-no-such-table", "title": "Django rest framework - no such table", "body": "<p>I'm trying to create an API endpoint on my Django project to retrieve data from my frontend.</p>\n\n<p>I'm using two DBs on my django project, the first one is a SQLite DB, the second one is a MongoDB database, the data i need to retrieve is on MongoDB.</p>\n\n<p>Here is my model:</p>\n\n<pre><code>class tst(models.Model):\n    _id = models.CharField(max_length=100)\n    ticker = models.FloatField()\n\n    def save(self): # ALL the signature\n\n        super(Trade, self).save(using='dbtwo')\n</code></pre>\n\n<p>Here is my view:</p>\n\n<pre><code>class tstList(generics.ListCreateAPIView):\n    queryset = tst.objects.all()\n    serializer_class = tstSerializer\n</code></pre>\n\n<p>And the url:</p>\n\n<pre><code>path('tst/', views.tstList.as_view()),\n</code></pre>\n\n<p>Everything is alright here but when i try to open the API from my browser, i keep getting the following error:</p>\n\n<pre><code>OperationalError at /tst/\nno such table: main_tst\n</code></pre>\n\n<p>I think this happens because it tries to look for the table <code>tst</code> on the first SQLite database, instead of looking for it on the MongoDB one. Is there any way to solve this? I thought that adding <code>using='dbtwo'</code> would do it, but it's not the right solution.</p>\n\n<p>Every advice is appreciated!</p>\n"}, {"tags": ["python", "redis", "celery"], "answers": [{"comments": [{"owner": {"reputation": 6293, "user_id": 443927, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0f8fe85ecd01ea336027317e8c40ea48?s=128&d=identicon&r=PG", "display_name": "Erick T", "link": "https://stackoverflow.com/users/443927/erick-t"}, "edited": false, "score": 0, "creation_date": 1562802192, "post_id": 56978911, "comment_id": 100495611, "body": "Would it be fair to say that if backup/persistence is not enabled that the task would be lost?"}], "tags": [], "owner": {"reputation": 340, "user_id": 4788717, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2_1zzuK_Q6k/AAAAAAAAAAI/AAAAAAAAAKY/5bsGq912uPs/photo.jpg?sz=128", "display_name": "ryati", "link": "https://stackoverflow.com/users/4788717/ryati"}, "is_accepted": false, "score": 0, "last_activity_date": 1562794250, "creation_date": 1562794250, "answer_id": 56978911, "question_id": 56978831, "link": "https://stackoverflow.com/questions/56978831/what-is-required-for-reliable-task-processing-in-celery-when-using-redis/56978911#56978911", "title": "What is required for reliable task processing in Celery when using Redis?", "body": "<p>On the redis side, just make sure that you are using the backup features:</p>\n\n<p><a href=\"https://redis.io/topics/persistence\" rel=\"nofollow noreferrer\">https://redis.io/topics/persistence</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/14497234/how-to-recover-redis-data-from-snapshotrdb-file-copied-from-another-machine\">How to recover redis data from snapshot(rdb file) copied from another machine?</a></p>\n\n<p>On the celery side, make sure your tasks are idempotent. If they are re-submitted that are only run once. </p>\n\n<p>If a task is in the middle of processing and there is a re-start. Then hopefully when redis and the app are backup, celery will see an incomplete task and try to schedule it again.</p>\n"}, {"tags": [], "owner": {"reputation": 15566, "user_id": 876497, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2713233cc2e49a4db53ff08d6c114255?s=128&d=identicon&r=PG", "display_name": "DejanLekic", "link": "https://stackoverflow.com/users/876497/dejanlekic"}, "is_accepted": false, "score": 0, "last_activity_date": 1562835278, "creation_date": 1562835278, "answer_id": 56985275, "question_id": 56978831, "link": "https://stackoverflow.com/questions/56978831/what-is-required-for-reliable-task-processing-in-celery-when-using-redis/56985275#56985275", "title": "What is required for reliable task processing in Celery when using Redis?", "body": "<p>In order to make your Celery cluster be more robust when using Redis as a broker (and result backend) I recommend using one (or more) replicas. Unfortunately redis-py does not yet have support for clustered Redis, but that is just a matter of time. In the replicated mode, when the master server goes down, replica takes its place and this is (almost) entirely transparent. Celery also supports Redis sentinels.</p>\n\n<p>Celery became much more robust over the years in terms of ensuring that tasks get redelivered in some critical cases. If the task failed because the worker is lost (there is a configuration parameter for it), some exception was thrown, etc - it will be redelivered, and executed again.</p>\n"}], "owner": {"reputation": 6293, "user_id": 443927, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/0f8fe85ecd01ea336027317e8c40ea48?s=128&d=identicon&r=PG", "display_name": "Erick T", "link": "https://stackoverflow.com/users/443927/erick-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 825, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1562835278, "creation_date": 1562793723, "question_id": 56978831, "link": "https://stackoverflow.com/questions/56978831/what-is-required-for-reliable-task-processing-in-celery-when-using-redis", "title": "What is required for reliable task processing in Celery when using Redis?", "body": "<p>We are looking to run Celery/Redis in a kubenetes cluster, and currently do not have Redis persistence enabled (everything is in-memory). I am concerned about: Redis restarts (losing in-memory data), worker restarts/outages (due to crashes and/or pod scheduling), and transient network issues.</p>\n\n<p>When using Celery to do task processing using Redis, what is required to ensure that tasks are reliable?</p>\n"}, {"tags": ["python", "selenium", "web-scraping"], "answers": [{"tags": [], "owner": {"reputation": 1482, "user_id": 10446484, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-DPJNPwHB7j0/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DV7oUQVhckzmNOxsNU7IvVVMLlZ3Q/mo/photo.jpg?sz=128", "display_name": "Nic Laforge", "link": "https://stackoverflow.com/users/10446484/nic-laforge"}, "is_accepted": true, "score": 1, "last_activity_date": 1562965912, "last_edit_date": 1562965912, "creation_date": 1562816444, "answer_id": 56981331, "question_id": 56978827, "link": "https://stackoverflow.com/questions/56978827/is-there-a-way-to-grab-a-specific-text-from-a-css-selector/56981331#56981331", "title": "Is there a way to grab a specific text from a CSS selector?", "body": "<p><strong>Solution 1</strong><br>\nInstead of using <code>text</code>, use <code>innerHTML</code>. This will returns you the html code of that element including the text!</p>\n\n<p>For example, it will return you:</p>\n\n<pre><code>\"&lt;sup&gt;$&lt;/sup&gt;199&lt;sup&gt;99&lt;/sup&gt;\"\n</code></pre>\n\n<p>Then you can use the regex library <code>re</code> to get the value in the middle only.</p>\n\n<pre><code>print(re.search('\\d+', upfrontCost).group(0))\n</code></pre>\n\n<p>Output: <code>199</code><br><br>\n<strong>Here's the code to do so:</strong></p>\n\n<pre><code>from selenium.webdriver import Chrome\nfrom selenium.webdriver.support import expected_conditions as EC\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.common.by import By\nimport re\n\nlink = \"https://www.virginmobile.ca/en/phones/phone-details.html#!/gs9/Grey/64/TR20\"\ndriver = Chrome()\nwait = WebDriverWait(driver, 15)\ndriver.get(link)\nprint('---------------------------  begining ------------------')\n\nplanTypeUpfrontCostListRaw = wait.until \\\n    (EC.presence_of_all_elements_located((By.CSS_SELECTOR, '.price.ultra.ng-binding.ng-scope')))\n\nfor element in planTypeUpfrontCostListRaw:\n     upfrontCost = element.get_attribute('innerHTML')\n     upfrontCost = re.search('\\d+', upfrontCost).group(0)\n     print(upfrontCost)\nprint('---------------------------  END  ------------------------')\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>---------------------------  begining ------------------\n0\n0\n199\n349\n739\n1019\n---------------------------  END  ------------------------\n</code></pre>\n\n<p><strong>Solution2</strong><br>\nYou can still use <code>text</code> and remove the unwanted data using <code>strip</code> for the $ and remove last two digit.</p>\n\n<pre><code>driver = Chrome()\nwait = WebDriverWait(driver, 15)\ndriver.get(link)\nprint('---------------------------  begining ------------------')\n\nplanTypeUpfrontCostListRaw = wait.until \\\n    (EC.presence_of_all_elements_located((By.CSS_SELECTOR, '.price.ultra.ng-binding.ng-scope')))\n\nfor element in planTypeUpfrontCostListRaw:\n     upfrontCost = element.text.strip('$')\n     if upfrontCost != '0':\n         upfrontCost = upfrontCost[:-2]\n     print(upfrontCost)\nprint('---------------------------  END  ------------------------')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71123, "user_id": 6241235, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/dCxzx.png?s=128&g=1", "display_name": "QHarr", "link": "https://stackoverflow.com/users/6241235/qharr"}, "is_accepted": false, "score": 0, "last_activity_date": 1562883307, "last_edit_date": 1562883307, "creation_date": 1562828957, "answer_id": 56983485, "question_id": 56978827, "link": "https://stackoverflow.com/questions/56978827/is-there-a-way-to-grab-a-specific-text-from-a-css-selector/56983485#56983485", "title": "Is there a way to grab a specific text from a CSS selector?", "body": "<p>You could dump into bs4 and use stripped_strings</p>\n\n<pre><code>from bs4 import BeautifulSoup as bs\nfrom selenium import webdriver\nfrom selenium.webdriver.common.by import By\nfrom selenium.webdriver.support.ui import WebDriverWait\nfrom selenium.webdriver.support import expected_conditions as EC\n\nd = webdriver.Chrome(r'C:\\Users\\User\\Documents\\chromedriver.exe')\nd.get('https://www.virginmobile.ca/en/phones/phone-details.html?province=ON&amp;geoResult=failed#!/gs9/Grey/64/TR20')\nWebDriverWait(d,10).until(EC.presence_of_all_elements_located((By.CSS_SELECTOR, \"planlevels .price\")))\nsoup = bs(d.page_source, 'lxml')\nplans = soup.select('planlevels .price')\n\nfor plan in plans:\n    price = [string for string in plan.stripped_strings][1]\n    print(price)\n</code></pre>\n\n<hr>\n\n<p>Uglier, IMO, could be to use split and no BS4</p>\n\n<pre><code>plans = WebDriverWait(d,10).until(EC.presence_of_all_elements_located((By.CSS_SELECTOR, \"planlevels .price\")))\nfor plan in plans:\n    print(plan.get_attribute('innerHTML').split('&lt;/sup&gt;')[1].split('&lt;sup&gt;')[0])\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 11574689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Y5atp.jpg?s=128&g=1", "display_name": "Lawrence_matei", "link": "https://stackoverflow.com/users/11574689/lawrence-matei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 56981331, "answer_count": 2, "score": 1, "last_activity_date": 1562965912, "creation_date": 1562793703, "question_id": 56978827, "link": "https://stackoverflow.com/questions/56978827/is-there-a-way-to-grab-a-specific-text-from-a-css-selector", "title": "Is there a way to grab a specific text from a CSS selector?", "body": "<p>Im looking to grab all the #text portion of a css selector when inspecting an element. I seem to be grabbing all numbers under my selector instead of the text portion.</p>\n\n<p>The Link im scraping is <a href=\"https://www.virginmobile.ca/en/phones/phone-details.html#!/gs9/Grey/64/TR20\" rel=\"nofollow noreferrer\">https://www.virginmobile.ca/en/phones/phone-details.html#!/gs9/Grey/64/TR20</a>. </p>\n\n<p>I would like to grab the prices under 'pick your phone price' but without the '$' and '99' cents at the end of the string</p>\n\n<p>Currently Im only familiar with grabbing the entire String.</p>\n\n<pre><code>    driver.get(link)\n    time.sleep(3)\n    print('---------------------------  begining ------------------')\n\n    planTypeUpfrontCostListRaw = wait.until(EC.presence_of_all_elements_located((By.CSS_SELECTOR, '#phonePricesList .ultra')))\n\n    for element in planTypeUpfrontCostListRaw:\n        upfrontCost = element.text\n        print(upfrontCost)\n\n    print('---------------------------  END  ------------------------')\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas", "numpy", "holoviews"], "answers": [{"comments": [{"owner": {"reputation": 371, "user_id": 8542692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fe29304c4215aa1cb31deec081301c?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/8542692/dan"}, "edited": false, "score": 0, "creation_date": 1562840795, "post_id": 56979788, "comment_id": 100508654, "body": "thank you! this works, although it just shows pairwise combinations, whereas I would need to find all the combinations - e.g. a+b, a+b+c, a+d+e, and so on"}], "tags": [], "owner": {"reputation": 100, "user_id": 11730402, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3t_Kdw07amg/AAAAAAAAAAI/AAAAAAAAAAc/2aDogfbLlmE/photo.jpg?sz=128", "display_name": "sudohumberto", "link": "https://stackoverflow.com/users/11730402/sudohumberto"}, "is_accepted": false, "score": 0, "last_activity_date": 1562957479, "last_edit_date": 1562957479, "creation_date": 1562800975, "answer_id": 56979788, "question_id": 56978793, "link": "https://stackoverflow.com/questions/56978793/create-a-dataset-for-chord-diagram-and-plot/56979788#56979788", "title": "Create a dataset for chord diagram and plot", "body": "<p>I do not know a lot about which could be the best chord diagram library but may I help you a little bit:</p>\n\n<h2>first we define our data in a pandas dataset</h2>\n\n<pre class=\"lang-py prettyprint-override\"><code>import pandas as pd\n\ndata = [\n    [1,   0,   0,   0,   0,   1,   0,   0],\n    [1,   0,   0,   0,   0,   0,   0,   0],\n    [1,   0,   1,   1,   1,   1,   1,   1],\n    [1,   0,   0,   0,   0,   0,   0,   0],\n    [1,   0,   1,   1,   0,   1,   1,   1],\n    [0,   1,   0,   0,   1,   1,   1,   1],\n    [1,   1,   0,   0,   1,   1,   1,   1],\n    [1,   1,   1,   1,   1,   1,   1,   1],\n    [1,   1,   0,   0,   1,   1,   0,   0],\n    [1,   1,   1,   0,   1,   0,   1,   0],\n    [1,   1,   1,   0,   1,   1,   0,   0],\n    [1,   0,   0,   0,   0,   1,   0,   0],\n    [1,   1,   1,   1,   1,   1,   1,   1],\n    [1,   1,   1,   1,   1,   1,   1,   1],\n    [0,   1,   1,   1,   1,   1,   1,   0]]\n\ndataframe = pd.DataFrame(data, columns = ['a','b','c','d','e','f','g','h'])\n</code></pre>\n\n<h2>now we implement the algorithm</h2>\n\n<pre class=\"lang-py prettyprint-override\"><code>def relationship (columnsList, dataframe):\n    result = 0\n    for index, row in dataframe.iterrows():\n        equal = True\n        for col in range(len(columnsList)-1):\n            if (equal and row[columnsList[col]] == row[columnsList[col+1]]):\n                equal = True\n            else:\n                equal = False\n        result += 1 if equal else 0\n\n    return result\n\n</code></pre>\n\n<h2>Some Tests</h2>\n\n<pre class=\"lang-py prettyprint-override\"><code>&gt;&gt;&gt; relationship (['a','b','d'], dataframe) # a+b+d\n3\n&gt;&gt;&gt; relationship (['a','b','h'], dataframe) # a+b+h\n4\n&gt;&gt;&gt; relationship (['a','b'], dataframe) # a+b\n7\n</code></pre>\n\n<p>The diagram is up to you, I hope you can find this helpful!</p>\n"}], "owner": {"reputation": 371, "user_id": 8542692, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32fe29304c4215aa1cb31deec081301c?s=128&d=identicon&r=PG&f=1", "display_name": "Dan", "link": "https://stackoverflow.com/users/8542692/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1562957479, "creation_date": 1562793562, "last_edit_date": 1562884289, "question_id": 56978793, "link": "https://stackoverflow.com/questions/56978793/create-a-dataset-for-chord-diagram-and-plot", "title": "Create a dataset for chord diagram and plot", "body": "<p>I'm trying to convert the below dataset into the right format to then plot it into a chord diagram.</p>\n\n<pre><code>    a   b   c   d   e   f   g   h\n0   1   0   0   0   0   1   0   0\n1   1   0   0   0   0   0   0   0\n2   1   0   1   1   1   1   1   1\n3   1   0   1   1   0   1   1   1\n4   1   0   0   0   0   0   0   0\n5   0   1   0   0   1   1   1   1\n6   1   1   0   0   1   1   1   1\n7   1   1   1   1   1   1   1   1\n8   1   1   0   0   1   1   0   0\n9   1   1   1   0   1   0   1   0\n10  1   1   1   0   1   1   0   0\n11  1   0   0   0   0   1   0   0\n12  1   1   1   1   1   1   1   1\n13  1   1   1   1   1   1   1   1\n14  0   1   1   1   1   1   1   0\n</code></pre>\n\n<p>The result would be a chord diagram showing all the possible combinations between the variables, with each stream width being the count of a particular combination occurrences within the dataset - for example a + b count is 7 in the dataset above (where both are 1).</p>\n"}, {"tags": ["python", "tensorflow"], "owner": {"reputation": 87, "user_id": 11651299, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SCXxj7Gddto/AAAAAAAAAAI/AAAAAAAAAAc/jtEBHeDLBBE/photo.jpg?sz=128", "display_name": "wes kay", "link": "https://stackoverflow.com/users/11651299/wes-kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562793443, "creation_date": 1562793443, "question_id": 56978767, "link": "https://stackoverflow.com/questions/56978767/trouble-running-tensorflow-gpu-gpt-2-model", "title": "Trouble running Tensorflow-gpu GPT-2 model", "body": "<p>I'm trying to run OpenAI's GPT-2 model using the Tensorflow GPU running on my NVidia SLI GTX-780 though I keep getting errors regardless of what versions I run or what I do.</p>\n\n<pre><code>File \"C:\\Users\\myUser\\AppData\\Local\\Programs\\Python\\Python36\\lib\\imp.py\", line 343, in load_dynamic\n    return _load(spec)\nImportError: DLL load failed: A dynamic link library (DLL) initialization routine failed.\nFailed to load the native TensorFlow runtime.\n\nSee https://www.tensorflow.org/install/errors\n</code></pre>\n\n<p>Installed TF:</p>\n\n<ul>\n<li><p>tensorboard 1.14.0</p></li>\n<li><p>tensorflow 1.14.0</p></li>\n<li><p>tensorflow-estimator 1.14.0</p></li>\n<li><p>tensorflow-gpu 1.14.0</p></li>\n<li><p>tensorflow-tensorboard 1.5.1</p></li>\n</ul>\n\n<p>Python -v 3.6.6</p>\n\n<p>Installed NVIDIA libraries and updated %PATH:</p>\n\n<ul>\n<li>Cuda toolkit 10.0</li>\n<li>Cudnn64_7</li>\n</ul>\n\n<p>When I have the 9.0 toolkit I get a GPU error: <code>TensorFlow: Dst tensor is not initialized</code> so I update to the new tensorflow GPU and then I get the \"Failed to load the native TensorFlow runtime.\" error without understanding what I need to do to fix it.</p>\n\n<p>I've been pulling my hair out for a day trying to get this to work, it works on my Laptop just not my PC.</p>\n"}, {"tags": ["python", "list", "tuples"], "comments": [{"owner": {"reputation": 7091, "user_id": 1836618, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/552e7df10bda07699d7771ad835c691c?s=128&d=identicon&r=PG", "display_name": "Peter Featherstone", "link": "https://stackoverflow.com/users/1836618/peter-featherstone"}, "edited": false, "score": 1, "creation_date": 1562793504, "post_id": 56978764, "comment_id": 100493514, "body": "Please show what you have tried so far."}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1562793718, "post_id": 56978764, "comment_id": 100493588, "body": "You could store the pairs as sets instead of tuples, which would automatically remove duplicates."}, {"owner": {"reputation": 1188, "user_id": 4337867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c11dddbb27f337acd4db31183cc95a?s=128&d=identicon&r=PG", "display_name": "josoler", "link": "https://stackoverflow.com/users/4337867/josoler"}, "edited": false, "score": 0, "creation_date": 1562794170, "post_id": 56978764, "comment_id": 100493726, "body": "I think this problem does not match the one marked as duplicate. Here we don&#39;t simply want to remove duplicates, but instead, two elements can be treated as <i>the same</i> in spite of not being strictly equal (different order)"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1562794481, "post_id": 56978764, "comment_id": 100493825, "body": "@Prune The duplicate you linked to only removes exactly duplicates, not when they&#39;re tuples in different orders."}], "answers": [{"comments": [{"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1562793686, "post_id": 56978801, "comment_id": 100493580, "body": "If there are duplicates that have the <i>same</i> order this will add both of them to the result."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11735387"}, "reply_to_user": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1566923196, "post_id": 56978801, "comment_id": 101804446, "body": "okay I get it. So he also wants to remove them if they are not the same order"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 0, "creation_date": 1566923662, "post_id": 56978801, "comment_id": 101804665, "body": "Exactly. <b>there are multiple tuples which are replicated but in reverse manner like (&#39;ALBK&#39;, &#39;SBIN&#39;) same (&#39;SBIN&#39;, &#39;ALBK&#39;) I only want one of these</b>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11735387"}, "is_accepted": false, "score": 0, "last_activity_date": 1562793597, "creation_date": 1562793597, "answer_id": 56978801, "question_id": 56978764, "link": "https://stackoverflow.com/questions/56978764/only-want-to-have-unique-pairs/56978801#56978801", "title": "only want to have unique pairs", "body": "<p>just check like so:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>nonDupPairs = []\nfor i in pairs:\n    if i[::-1] not in nonDupPairs:\n        nonDupPairs.append(i)\n</code></pre>\n\n<p>That should work</p>\n"}, {"comments": [{"owner": {"reputation": 1188, "user_id": 4337867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c11dddbb27f337acd4db31183cc95a?s=128&d=identicon&r=PG", "display_name": "josoler", "link": "https://stackoverflow.com/users/4337867/josoler"}, "edited": false, "score": 0, "creation_date": 1562794233, "post_id": 56978812, "comment_id": 100493751, "body": "The return value of <code>sorted(some_list)</code> is a list, which can&#39;t be hashed by <code>set()</code>"}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1188, "user_id": 4337867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c11dddbb27f337acd4db31183cc95a?s=128&d=identicon&r=PG", "display_name": "josoler", "link": "https://stackoverflow.com/users/4337867/josoler"}, "edited": false, "score": 1, "creation_date": 1562794385, "post_id": 56978812, "comment_id": 100493797, "body": "I assumed <code>sorted(some_tuple)</code> would return a tuple, I see I was wrong."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "reply_to_user": {"reputation": 1188, "user_id": 4337867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50c11dddbb27f337acd4db31183cc95a?s=128&d=identicon&r=PG", "display_name": "josoler", "link": "https://stackoverflow.com/users/4337867/josoler"}, "edited": false, "score": 1, "creation_date": 1562794600, "post_id": 56978812, "comment_id": 100493866, "body": "@josoler I changed it to convert the sorted tuples back to tuples."}], "tags": [], "owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "is_accepted": false, "score": 3, "last_activity_date": 1562794411, "last_edit_date": 1562794411, "creation_date": 1562793643, "answer_id": 56978812, "question_id": 56978764, "link": "https://stackoverflow.com/questions/56978764/only-want-to-have-unique-pairs/56978812#56978812", "title": "only want to have unique pairs", "body": "<p>Sort the pairs and put them in a <code>set</code>.</p>\n\n<pre><code>unique_pairs = set(tuple(sorted(p)) for p in pairs)\n</code></pre>\n\n<p>Since <code>set</code> elements have to be unique, this will remove the duplicates.</p>\n\n<p><a href=\"http://ideone.com/pFglrb\" rel=\"nofollow noreferrer\">DEMO</a></p>\n"}], "owner": {"reputation": 61, "user_id": 11015612, "user_type": "registered", "profile_image": "https://graph.facebook.com/2340190976217458/picture?type=large", "display_name": "Sahil Swaroop", "link": "https://stackoverflow.com/users/11015612/sahil-swaroop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1562794436, "creation_date": 1562793424, "question_id": 56978764, "link": "https://stackoverflow.com/questions/56978764/only-want-to-have-unique-pairs", "title": "only want to have unique pairs", "body": "<p>so I have this list which has multiple tuples in it tuples contain stock names from Indian stock market so the way I am using these tuples like stock pairs but problem is  I don't want to repeat a tuple but in this list there are multiple tuples which are replicated but in reverse manner like ('ALBK', 'SBIN') same ('SBIN', 'ALBK') I only want one of these .ex ('ANDHRABANK', 'INDIANB') is also repeated as ('INDIANB', 'ANDHRABANK') I want to delete the replicate tuples how to do that</p>\n\n<pre><code>pairs = [('ALBK', 'SBIN'), ('ANDHRABANK', 'INDIANB'), ('ANDHRABANK', 'SBIN'), ('AXISBANK', 'FEDERALBNK'), \n ('AXISBANK', 'INDIANB'), ('BANKBARODA', 'FEDERALBNK'), ('BANKINDIA', 'AXISBANK'), ('FEDERALBNK', 'AXISBANK'), \n ('FEDERALBNK', 'BANKBARODA'), ('FEDERALBNK', 'UNIONBANK'), ('HDFC', 'ICICIBANK'), ('ICICIBANK', 'FEDERALBNK'), \n ('ICICIBANK', 'HDFC'), ('ICICIBANK', 'INDIANB'), ('INDIANB', 'ANDHRABANK'), ('INDIANB', 'AXISBANK'), ('INDIANB', 'ICICIBANK'),\n ('SBIN', 'ALBK'), ('SBIN', 'ANDHRABANK'), ('UNIONBANK', 'FEDERALBNK')]\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 55871, "user_id": 10077, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e820c7af6f3b79cf055d984cda7ff?s=128&d=identicon&r=PG", "display_name": "Fred Larson", "link": "https://stackoverflow.com/users/10077/fred-larson"}, "edited": false, "score": 0, "creation_date": 1562793831, "post_id": 56978756, "comment_id": 100493626, "body": "<code>deque</code> has a <a href=\"https://pythontic.com/containers/deque/remove\" rel=\"nofollow noreferrer\">&#39;remove&#39; method</a>."}], "answers": [{"tags": [], "owner": {"reputation": 100, "user_id": 11730402, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3t_Kdw07amg/AAAAAAAAAAI/AAAAAAAAAAc/2aDogfbLlmE/photo.jpg?sz=128", "display_name": "sudohumberto", "link": "https://stackoverflow.com/users/11730402/sudohumberto"}, "is_accepted": true, "score": 0, "last_activity_date": 1562809347, "creation_date": 1562809347, "answer_id": 56980591, "question_id": 56978756, "link": "https://stackoverflow.com/questions/56978756/how-to-delete-elements-from-deque-based-on-some-condition/56980591#56980591", "title": "How to delete elements from deque based on some condition?", "body": "<p>I do not know if I understand your question, but if you want to remove the first occurrence of x in a deque you could use the function <code>my_deque.remove(x)</code></p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from collections import deque\n\nmy_deque = deque([1,2,3,4,5,6])\n\nfor event in my_deque.copy():\n     if event in [2,4,5]:\n        my_deque.remove(event)\n\nprint(my_deque)\n\n# deque([1, 3, 6])\n</code></pre>\n\n<p>I hope you could find this useful!</p>\n"}], "owner": {"reputation": 99, "user_id": 11718184, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-__o_GlQet7M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfI-bgfkRxT0t755B75Xgdpk6erYg/photo.jpg?sz=128", "display_name": "marlon", "link": "https://stackoverflow.com/users/11718184/marlon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 56980591, "answer_count": 1, "score": 0, "last_activity_date": 1562809347, "creation_date": 1562793395, "question_id": 56978756, "link": "https://stackoverflow.com/questions/56978756/how-to-delete-elements-from-deque-based-on-some-condition", "title": "How to delete elements from deque based on some condition?", "body": "<p>I know how to remove elements from a list while iteration. What about similar operation in deque? In the following example, 'my_deque' is a deque.          </p>\n\n<pre><code> for event in my_deque.copy():\n     if event in event_sets:\n        remove event from my_deque\n</code></pre>\n\n<p>Is there some way to do this? Can deque only push and pop from two ends?</p>\n"}, {"tags": ["python", "math", "graphing"], "comments": [{"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1562794484, "post_id": 56978737, "comment_id": 100493828, "body": "As best I can see (debugging), you&#39;re correctly generating values.  I don&#39;t know whether that helps ..."}, {"owner": {"reputation": 8762, "user_id": 1709364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40e026958109464eb03fd70b67fab155?s=128&d=identicon&r=PG", "display_name": "jasonharper", "link": "https://stackoverflow.com/users/1709364/jasonharper"}, "edited": false, "score": 1, "creation_date": 1562795272, "post_id": 56978737, "comment_id": 100494047, "body": "Your function has asymptotes that head to both positive and negative infinity - but the grid on which you evaluated it happened to capture some extremely negative values (minimum -1374823386397210.2), but no correspondingly high positive values (maximum 95.5).  I&#39;m pretty sure the problem is simply that matplotlib is coming up with an extremely skewed Y-axis range for the plot due to this.  If you gave it an explicit range (sorry, not familiar with the module to tell you how to do this), I think it would fix the problem."}, {"owner": {"reputation": 7510, "user_id": 1132334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8o6Nl.png?s=128&g=1", "display_name": "Cee McSharpface", "link": "https://stackoverflow.com/users/1132334/cee-mcsharpface"}, "edited": false, "score": 0, "creation_date": 1562801698, "post_id": 56978737, "comment_id": 100495536, "body": "curious how that non-linear, non-constant envelope of the truncated plot lines emerges?"}], "answers": [{"tags": [], "owner": {"reputation": 43828, "user_id": 1320535, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6FjhT.jpg?s=128&g=1", "display_name": "Julius Vainora", "link": "https://stackoverflow.com/users/1320535/julius-vainora"}, "is_accepted": false, "score": 3, "last_activity_date": 1562794839, "creation_date": 1562794839, "answer_id": 56979021, "question_id": 56978737, "link": "https://stackoverflow.com/questions/56978737/python-isnt-plotting-the-tangent-function-correctly/56979021#56979021", "title": "python isn&#39;t plotting the &quot;tangent&quot; function correctly", "body": "<p>This happens due to singularities of the tangent function (i.e., having <code>x</code> values around those points). A quick fix would be to restrict the y-axis with, e.g.,</p>\n\n<pre><code>plt.ylim(-40, 40)\n</code></pre>\n\n<p>giving</p>\n\n<p><a href=\"https://i.stack.imgur.com/8B3h8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8B3h8.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 39, "user_id": 6393332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/80633b71aeeed2e78d664f92e1ce93d8?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/6393332/aleksey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1562795705, "creation_date": 1562793299, "last_edit_date": 1562795705, "question_id": 56978737, "link": "https://stackoverflow.com/questions/56978737/python-isnt-plotting-the-tangent-function-correctly", "title": "python isn&#39;t plotting the &quot;tangent&quot; function correctly", "body": "<p>I'm trying to plot the general tangent function onto matplotlib in Python but it is coming out incorrectly.</p>\n\n<p>The function I'm trying to plot is:\n$$ f(x) = A tan( \\frac{2\\pi}{\\lambda} x - \\phi ) $$</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>\nimport numpy as np\nimport math\nimport matplotlib.pyplot as plt\nimport tkinter\n\nf = lambda x, A, lambda_, phi: A * math.sin( ((2 * math.pi) / lambda_) * x - phi)\ng = lambda x, A, lambda_, phi: A * math.cos( ((2 * math.pi) / lambda_) * x - phi)\nh = lambda x, A, lambda_, phi: f(x, A, lambda_, phi) / g(x, A, lambda_, phi)\n\ndef generate_graph(A, lambda_, Phi):\n    plt.figure()\n    x = np.arange(-.95, .95, 0.005)\n    #plt.plot(x, [f(k, A, lambda_, Phi) for k in x], color='red')\n    #plt.plot(x, [g(k, A, lambda_, Phi) for k in x], color='blue')\n    plt.plt(x, [h(k, A, lambda_, Phi) for k in x], color='green')\n    plt.show()\n\nA = 1 #amplitude\nlambda_ = 3 #wavelength\nPhi = 0 #phase shift\n\ngenerate_graph(A, lambda_, Phi)\n</code></pre>\n\n<p>It's supposed to look like this: \n<img src=\"https://i.ibb.co/XWtm6LR/Figure-2.png\" alt=\"correct\"></p>\n\n<p>But it ends up looking like this:\n<img src=\"https://i.ibb.co/HFXCFCd/Figure-1.png\" alt=\"wrong\"></p>\n"}, {"tags": ["python", "python-3.x", "fabric", "python-fabric-2"], "owner": {"reputation": 93, "user_id": 5890223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/720c0849c16793a560914531bd6aba5c?s=128&d=identicon&r=PG&f=1", "display_name": "Bee", "link": "https://stackoverflow.com/users/5890223/bee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562792996, "creation_date": 1562792996, "question_id": 56978684, "link": "https://stackoverflow.com/questions/56978684/how-to-use-threading-and-sudo-in-fabric-2", "title": "How to use threading and sudo in fabric 2?", "body": "<p>My question is the same as this one, but I'm not thrilled with the only answer. <a href=\"https://stackoverflow.com/questions/52187967/fabric-2-3-parallel-execution-of-sudo-commands\">fabric 2.3 parallel execution of sudo commands</a></p>\n\n<p>Hoping there are other opinions out there?</p>\n\n<p>I'm trying to migrate my Python 2/Fabric 1 code to Python 3/Fabric 2. The code performs a lot of tasks in parallel and runs commands as root on the remote machines. This worked in Fabric 1 but I am having trouble getting this to work with Fabric 2. </p>\n\n<p>The ThreadingGroup class provides the parallelism I want, but does not have a sudo method. I tried implementing the answer from the original question, which is to copy the run method from ThreadingGroup, make a few changes, and call it \"sudo\". This didn't work for me, saying I need a tty to sudo. </p>\n\n<p>I also submitted my question to the fabric mailing list. I will update my question here if I get a response from them.</p>\n"}, {"tags": ["python", "nltk", "stemming"], "answers": [{"tags": [], "owner": {"reputation": 1671, "user_id": 3939318, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c1a5a77226eb0576dfd8148e041fc1d6?s=128&d=identicon&r=PG&f=1", "display_name": "Farzad Vertigo", "link": "https://stackoverflow.com/users/3939318/farzad-vertigo"}, "is_accepted": true, "score": 0, "last_activity_date": 1562797686, "creation_date": 1562797686, "answer_id": 56979424, "question_id": 56978661, "link": "https://stackoverflow.com/questions/56978661/is-there-a-way-to-reverse-stem-in-python-nltk/56979424#56979424", "title": "Is there a way to reverse stem in python nltk?", "body": "<p>To the best of my knowledge the answer is No, and depending on the stemmer it might be difficult to come up with an exhaustive search for reverting the effect of the stemming rules and the results would be mostly invalid words by any standard. E.g for Porter stemmer:</p>\n\n<pre><code>from nltk.stem.porter import *\nstemmer = PorterStemmer()\nstemmer.stem('grabfuled')\n# results in \"grab\" \n</code></pre>\n\n<p>So, a reverse function would generate \"grabfuled\" as one of the valid words as \"-ed\" and \"-ful\" suffixes are removed consecutively in the stemming process. \nHowever, given a valid lexicon, you can do the following which is independent of the stemming method:</p>\n\n<pre><code>from nltk.stem.porter import *\nfrom collections import defaultdict\n\nvocab = set(['grab', 'grabbing', 'grabbed', 'run', 'running', 'eat'])\n\n# Here porter stemmer, but can be any other stemmer too\nstemmer = PorterStemmer()\n\nd = defaultdict(set)\nfor v in vocab:\n    d[stemmer.stem(v)].add(v)  \n\nprint(d)\n# defaultdict(&lt;class 'set'&gt;, {'grab': {'grab', 'grabbing', 'grabbed'}, 'eat': {'eat'}, 'run': {'run', 'running'}})\n</code></pre>\n\n<p>Now we have a dictionary that maps stems to the valid words that can generate them. For any stem we can do the following:</p>\n\n<pre><code>print(d['grab'])\n# {'grab', 'grabbed', 'grabbing'}\n</code></pre>\n\n<p>For building the vocabulary you can tokenize a corpus or use <a href=\"https://stackoverflow.com/questions/28339622/is-there-a-corpora-of-english-words-in-nltk\">nltk's built-in dictionary of English words</a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 11767100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5efbc6aae356e9df6dbc5543ef30c1a?s=128&d=identicon&r=PG&f=1", "display_name": "JoeShmoe", "link": "https://stackoverflow.com/users/11767100/joeshmoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1177, "favorite_count": 0, "accepted_answer_id": 56979424, "answer_count": 1, "score": 1, "last_activity_date": 1562797686, "creation_date": 1562792856, "question_id": 56978661, "link": "https://stackoverflow.com/questions/56978661/is-there-a-way-to-reverse-stem-in-python-nltk", "title": "Is there a way to reverse stem in python nltk?", "body": "<p>I have a list of stems in NLTK/python and want to get the possible words that create that stem.</p>\n\n<p>Is there a way to take a stem and get a list of words that will stem to it in python?</p>\n"}, {"tags": ["python", "dask"], "comments": [{"owner": {"reputation": 2873, "user_id": 1929959, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be7c8d8d01d02c41df25100e7f294234?s=128&d=identicon&r=PG", "display_name": "Mihai8", "link": "https://stackoverflow.com/users/1929959/mihai8"}, "edited": false, "score": 0, "creation_date": 1562793652, "post_id": 56978644, "comment_id": 100493569, "body": "You can test in a other operating system?"}, {"owner": {"reputation": 1, "user_id": 11767081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ke4YJWJkae4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIj-YsAuQYqVUnBPinrrbj0YDclg/photo.jpg?sz=128", "display_name": "Shane Daniel", "link": "https://stackoverflow.com/users/11767081/shane-daniel"}, "reply_to_user": {"reputation": 2873, "user_id": 1929959, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/be7c8d8d01d02c41df25100e7f294234?s=128&d=identicon&r=PG", "display_name": "Mihai8", "link": "https://stackoverflow.com/users/1929959/mihai8"}, "edited": false, "score": 0, "creation_date": 1562851562, "post_id": 56978644, "comment_id": 100515265, "body": "I have tried in linux and don&#39;t see the high sys CPU there"}, {"owner": {"reputation": 21140, "user_id": 3821154, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/RYr9X.jpg?s=128&g=1", "display_name": "mdurant", "link": "https://stackoverflow.com/users/3821154/mdurant"}, "edited": false, "score": 0, "creation_date": 1562857154, "post_id": 56978644, "comment_id": 100518738, "body": "You should give more information about what you are doing and what configuration dask is running in. System CPU usage could come from thread-switching or inter-process communication, for example, not to mention swapping if memory is high."}, {"owner": {"reputation": 1, "user_id": 11767081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ke4YJWJkae4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIj-YsAuQYqVUnBPinrrbj0YDclg/photo.jpg?sz=128", "display_name": "Shane Daniel", "link": "https://stackoverflow.com/users/11767081/shane-daniel"}, "edited": false, "score": 0, "creation_date": 1562862479, "post_id": 56978644, "comment_id": 100521554, "body": "I am running the example in this blog post: <a href=\"https://medium.com/mindorks/speeding-up-text-pre-processing-using-dask-45cc3ede1366\" rel=\"nofollow noreferrer\">medium.com/mindorks/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 11767081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ke4YJWJkae4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIj-YsAuQYqVUnBPinrrbj0YDclg/photo.jpg?sz=128", "display_name": "Shane Daniel", "link": "https://stackoverflow.com/users/11767081/shane-daniel"}, "edited": false, "score": 0, "creation_date": 1562851496, "post_id": 56978682, "comment_id": 100515222, "body": "Wouldn&#39;t this appear as user cpu instead of system cpu? I&#39;m questioning these values to be clear: CPU usage: 24.29% user, 71.74% sys."}, {"owner": {"user_type": "does_not_exist", "display_name": "user11735387"}, "reply_to_user": {"reputation": 1, "user_id": 11767081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ke4YJWJkae4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIj-YsAuQYqVUnBPinrrbj0YDclg/photo.jpg?sz=128", "display_name": "Shane Daniel", "link": "https://stackoverflow.com/users/11767081/shane-daniel"}, "edited": false, "score": 0, "creation_date": 1562868176, "post_id": 56978682, "comment_id": 100524177, "body": "I believe not. I think that running code uses up CPU from the system, not the user. Compiling programs is a system thing, and running them is not user based."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11735387"}, "is_accepted": false, "score": 0, "last_activity_date": 1562792990, "creation_date": 1562792990, "answer_id": 56978682, "question_id": 56978644, "link": "https://stackoverflow.com/questions/56978644/dask-using-a-high-amount-of-system-cpu/56978682#56978682", "title": "Dask using a high amount of system CPU", "body": "<p>python can take a lot of memory if it is defining variables over and over again. it can also take a lot of time if there are nested loops in your program. maybe this is the problem? </p>\n"}], "owner": {"reputation": 1, "user_id": 11767081, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ke4YJWJkae4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdIj-YsAuQYqVUnBPinrrbj0YDclg/photo.jpg?sz=128", "display_name": "Shane Daniel", "link": "https://stackoverflow.com/users/11767081/shane-daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562853151, "creation_date": 1562792770, "last_edit_date": 1562853151, "question_id": 56978644, "link": "https://stackoverflow.com/questions/56978644/dask-using-a-high-amount-of-system-cpu", "title": "Dask using a high amount of system CPU", "body": "<p>I am running a Python process on Dask on my Mac using dask_dataframe.map_partitions. The system CPU is over 70% and the overall run time is slower than expected. Is there any particular for this?</p>\n\n<pre><code>Processes: 516 total, 4 running, 4 stuck, 508 sleeping, 4051 threads                                                                            17:01:05\nLoad Avg: 8.96, 8.63, 8.87  CPU usage: 24.29% user, 71.74% sys, 3.96% idle   SharedLibs: 183M resident, 49M data, 30M linkedit.\nMemRegions: 280712 total, 7256M resident, 122M private, 2408M shared. PhysMem: 15G used (3646M wired), 1216M unused.\nVM: 3934G vsize, 1298M framework vsize, 337943173(128) swapins, 424866150(0) swapouts. Networks: packets: 54072553/576G in, 52411813/575G out.\nDisks: 13274682/1405G read, 10823134/1690G written.\nPID    COMMAND      %CPU      TIME     #TH    #WQ   #PORT MEM    PURG   CMPRS  PGRP  PPID  STATE    BOOSTS           %CPU_ME %CPU_OTHRS UID  FAULTS\n13116  python3.7    955.1     02:01.53 90/17  1     124   721M-  0B     0B     5984  5984  running  *0[1]            0.00000 0.00000    504  1624296+\n</code></pre>\n\n<p>I can't see any other processes using a lot of CPU except for the python process</p>\n\n<p>If I run the same code not on Dask I don't see the high sys CPU usage so I'm wondering what the system could be doing when running Dask.</p>\n"}, {"tags": ["python", "python-3.x", "python-2.7"], "comments": [{"owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "edited": false, "score": 2, "creation_date": 1562792915, "post_id": 56978638, "comment_id": 100493302, "body": "Did you try running this? What problems did you encounter?"}, {"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 1, "creation_date": 1562793116, "post_id": 56978638, "comment_id": 100493376, "body": "Python 3 defines <code>print</code> as a function, not a keyword.  i.e. in Python 2 you can say <code>print &#39;hello&#39;</code>, but in Python 3 you have to say <code>print(&#39;hello&#39;)</code>.  That&#39;s the only change I see that would be needed here."}, {"owner": {"reputation": 589605, "user_id": 1491895, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/82f9e178a16364bf561d0ed4da09a35d?s=128&d=identicon&r=PG", "display_name": "Barmar", "link": "https://stackoverflow.com/users/1491895/barmar"}, "edited": false, "score": 2, "creation_date": 1562793323, "post_id": 56978638, "comment_id": 100493441, "body": "Google &quot;differences python 2 and 3&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 11726411, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2xE1GKwEGZI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resEm5r9oB8OqhvGDpHKmgXSMWupw/photo.jpg?sz=128", "display_name": "Travis", "link": "https://stackoverflow.com/users/11726411/travis"}, "edited": false, "score": 0, "creation_date": 1562795496, "post_id": 56978744, "comment_id": 100494112, "body": "Thanks! Also, xrange doesn&#39;t work. How does xrange compare to range? More specifically, will it affect anything in this block?"}, {"owner": {"reputation": 340, "user_id": 4788717, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2_1zzuK_Q6k/AAAAAAAAAAI/AAAAAAAAAKY/5bsGq912uPs/photo.jpg?sz=128", "display_name": "ryati", "link": "https://stackoverflow.com/users/4788717/ryati"}, "reply_to_user": {"reputation": 23, "user_id": 11726411, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2xE1GKwEGZI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resEm5r9oB8OqhvGDpHKmgXSMWupw/photo.jpg?sz=128", "display_name": "Travis", "link": "https://stackoverflow.com/users/11726411/travis"}, "edited": false, "score": 0, "creation_date": 1562795637, "post_id": 56978744, "comment_id": 100494152, "body": "python3 range replaced xrange i think. So just convert to range and you should be fine. ref: <a href=\"https://www.geeksforgeeks.org/range-vs-xrange-python/\" rel=\"nofollow noreferrer\">geeksforgeeks.org/range-vs-xrange-python</a>"}], "tags": [], "owner": {"reputation": 340, "user_id": 4788717, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-2_1zzuK_Q6k/AAAAAAAAAAI/AAAAAAAAAKY/5bsGq912uPs/photo.jpg?sz=128", "display_name": "ryati", "link": "https://stackoverflow.com/users/4788717/ryati"}, "is_accepted": false, "score": 1, "last_activity_date": 1562793323, "creation_date": 1562793323, "answer_id": 56978744, "question_id": 56978638, "link": "https://stackoverflow.com/questions/56978638/how-does-this-older-open-source-py-script-differ-in-language-syntax-from-the-l/56978744#56978744", "title": "How does this older, open source .py script differ in language syntax from the latest python 3.0 or greater?", "body": "<p>You should be able to just change the print lines to get this going.</p>\n\n<pre><code># print match_text\nprint(match_text)\n#####\n#print match_list_clean[item]\nprint(match_list_clean[item])\n</code></pre>\n\n<p>Also, try running it first next time. Get used to reading traceback (error messages). You can learn a lot from them.</p>\n"}, {"tags": [], "owner": {"reputation": 13367, "user_id": 2084384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h5lY8.jpg?s=128&g=1", "display_name": "BoarGules", "link": "https://stackoverflow.com/users/2084384/boargules"}, "is_accepted": false, "score": 0, "last_activity_date": 1562796020, "creation_date": 1562796020, "answer_id": 56979193, "question_id": 56978638, "link": "https://stackoverflow.com/questions/56978638/how-does-this-older-open-source-py-script-differ-in-language-syntax-from-the-l/56979193#56979193", "title": "How does this older, open source .py script differ in language syntax from the latest python 3.0 or greater?", "body": "<p>This is Python 2. Use the standard library module <code>lib2to3</code> to convert it to Python 3. That will be far better than trying to update the code manually, particularly as you aren't proficient in either version of Python. </p>\n"}], "owner": {"reputation": 23, "user_id": 11726411, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2xE1GKwEGZI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3resEm5r9oB8OqhvGDpHKmgXSMWupw/photo.jpg?sz=128", "display_name": "Travis", "link": "https://stackoverflow.com/users/11726411/travis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1562796020, "creation_date": 1562792756, "last_edit_date": 1562793004, "question_id": 56978638, "link": "https://stackoverflow.com/questions/56978638/how-does-this-older-open-source-py-script-differ-in-language-syntax-from-the-l", "title": "How does this older, open source .py script differ in language syntax from the latest python 3.0 or greater?", "body": "<p>I am fresh meat in the coding world and am diving head-first into python as we speak, so I apologize for such a rookie question in advance. But basically, I got assigned this log parsing project for school and found a seemingly nice parsing script/template online which I thought could be great for me to use. However, after looking at some of the syntax, it became apparent that it was written in an older version of python. Since I only started learning python a few weeks ago, I am not confident in understanding what syntax needs to change, if any, and if it is properly constructed like I initially assumed. <strong>My main question is, after viewing the script below, what statements, methods, variables, functions, ect., do you think must be (or should be) changed in order for me to get the ball rolling?</strong> </p>\n\n<p>I'm running Win10 and using Spyder (from Conda) with python version 3.7.\nI'd post the website link to this code but I don't know the rules on posting links in questions! However, if you search for 'pythonicways' you'll find it, as well as a walk-through guide for why it was made the way it was by the creator. </p>\n\n<pre><code>import time\nfrom time import strftime\n\ndef main():\n    log_file_path = r\"C:\\ios logs\\sfbios.log\"\n    export_file_path = r\"C:\\ios logs\\filtered\"\n\n    time_now = str(strftime(\"%Y-%m-%d %H-%M-%S\", time.localtime()))\n\n    file = \"\\\\\" + \"Parser Output \" + time_now + \".txt\"\n    export_file = export_file_path + file\n\n    regex = '(&lt;property name=\"(.*?)\"&gt;(.*?)&lt;\\/property&gt;)'\n\n    parseData(log_file_path, export_file, regex, read_line=True)\n\n\n\ndef parseData(log_file_path, export_file, regex, read_line=True):\n    with open(log_file_path, \"r\") as file:\n        match_list = []\n        if read_line == True:\n            for line in file:\n                for match in re.finditer(regex, line, re.S):\n                    match_text = match.group()\n                    match_list.append(match_text)\n                    print match_text\n        else:\n            data = file.read()\n            for match in re.finditer(regex, data, re.S):\n                match_text = match.group();\n                match_list.append(match_text)\n    file.close()\n\n    with open(export_file, \"w+\") as file:\n        file.write(\"EXPORTED DATA:\\n\")\n        match_list_clean = list(set(match_list))\n        for item in xrange(0, len(match_list_clean)):\n            print match_list_clean[item]\n            file.write(match_list_clean[item] + \"\\n\")\n    file.close()\n\nif __name__ == '__main__':\n    main()\n</code></pre>\n\n<p>I'm not expecting anything in particular, per se. I just want to know what changes must be or should be made to this template/script. <em>My overall goal</em> is to open &amp; read a .log file, parse it for several various capture groups using regex, store them all in some variables or some sequence type, and then extract that information onto a new .txt file (preferably in CSV format, or some other tabular delimited format)</p>\n"}, {"tags": ["python", "tensorflow"], "comments": [{"owner": {"reputation": 7817, "user_id": 4789373, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-f_OQrxbHhFQ/AAAAAAAAAAI/AAAAAAAAABA/NY38t7ooQ5c/photo.jpg?sz=128", "display_name": "FalconUA", "link": "https://stackoverflow.com/users/4789373/falconua"}, "edited": false, "score": 0, "creation_date": 1562794206, "post_id": 56978604, "comment_id": 100493741, "body": "does <code>op1</code> depend on <code>op0</code>? I mean do <code>op0</code> changes some values in the computation graph that lead to <code>op1</code>?"}, {"owner": {"reputation": 1083, "user_id": 6458245, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2ec6741905a7fde013a7c33ecf1a370f?s=128&d=identicon&r=PG&f=1", "display_name": "JobHunter69", "link": "https://stackoverflow.com/users/6458245/jobhunter69"}, "reply_to_user": {"reputation": 7817, "user_id": 4789373, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh6.googleusercontent.com/-f_OQrxbHhFQ/AAAAAAAAAAI/AAAAAAAAABA/NY38t7ooQ5c/photo.jpg?sz=128", "display_name": "FalconUA", "link": "https://stackoverflow.com/users/4789373/falconua"}, "edited": false, "score": 0, "creation_date": 1562880269, "post_id": 56978604, "comment_id": 100528896, "body": "Ignore the edit with op0"}], "owner": {"reputation": 1083, "user_id": 6458245, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2ec6741905a7fde013a7c33ecf1a370f?s=128&d=identicon&r=PG&f=1", "display_name": "JobHunter69", "link": "https://stackoverflow.com/users/6458245/jobhunter69"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562899945, "creation_date": 1562792603, "last_edit_date": 1562899945, "question_id": 56978604, "link": "https://stackoverflow.com/questions/56978604/am-i-using-tf-control-dependencies-from-tensorflow-correctly", "title": "Am I using tf.control_dependencies from Tensorflow correctly?", "body": "<p>My understanding of using the below line of code is that this prevents needing to call multiple session runs.</p>\n\n<pre><code>with tf.control_dependencies([]):\n</code></pre>\n\n<p>For example, if we have dependent computations, instead of doing sess.run(op1) followed by sess.run(op2), you can simply execute:</p>\n\n<pre><code>with tf.control_dependencies([op1]):\n    op2 = tf.assign(...)\n</code></pre>\n\n<p>followed by sess.run(op2). Is my understanding correct, or should it not be used for this?</p>\n"}, {"tags": ["python", "python-2.7"], "comments": [{"owner": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1562792829, "post_id": 56978566, "comment_id": 100493276, "body": "<code>SIGKILL</code> will be troubling, since you should expect the OS to terminate the process rather soon. <code>SIGTERM</code> on the other hand can be handled by a signal handler."}, {"owner": {"reputation": 5193, "user_id": 5996587, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d15f53deb1b5f2cab3534565c91c5394?s=128&d=identicon&r=PG&f=1", "display_name": "codec", "link": "https://stackoverflow.com/users/5996587/codec"}, "reply_to_user": {"reputation": 11221, "user_id": 3929826, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56f08b81def599c554c7ab93e8593600?s=128&d=identicon&r=PG", "display_name": "Klaus D.", "link": "https://stackoverflow.com/users/3929826/klaus-d"}, "edited": false, "score": 0, "creation_date": 1562797243, "post_id": 56978566, "comment_id": 100494557, "body": "How about SIGINT? (Ctrl+c)"}], "owner": {"reputation": 5193, "user_id": 5996587, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d15f53deb1b5f2cab3534565c91c5394?s=128&d=identicon&r=PG&f=1", "display_name": "codec", "link": "https://stackoverflow.com/users/5996587/codec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 17, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562792404, "creation_date": 1562792404, "question_id": 56978566, "link": "https://stackoverflow.com/questions/56978566/how-to-detect-if-a-cli-utility-is-killed", "title": "How to detect if a cli utility is killed", "body": "<p>I have a cli utility written with some args:</p>\n\n<pre><code>if args.command == 'delete':\n        response = delete_region(args.timestamp)\n</code></pre>\n\n<p>delete_region function does everything required which takes about 5 mins. If the user tried to kill the cli command using ctrl+c or some other process sends a <code>SIGKILL</code> during these 5 mins I want to perform some cleanup. How can that be achieved?</p>\n"}, {"tags": ["python", "regex", "python-3.x"], "comments": [{"owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "edited": false, "score": 0, "creation_date": 1562792781, "post_id": 56978542, "comment_id": 100493258, "body": "You should give exactly what your input and expected output is."}, {"owner": {"reputation": 11, "user_id": 6922322, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f0wpXOoUzXQ/AAAAAAAAAAI/AAAAAAAAAKY/-VYvMjYxq5E/photo.jpg?sz=128", "display_name": "jeremy young", "link": "https://stackoverflow.com/users/6922322/jeremy-young"}, "reply_to_user": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "edited": false, "score": 0, "creation_date": 1562793364, "post_id": 56978542, "comment_id": 100493456, "body": "As mentioned, this is the input:   interface Vlan88   ip address 12.37.221.1 255.255.255.0   !   standby 1 ip  And the output should be: interface Vlan88   ip address 12.37.221.1 255.255.255.0   !   !   standby 1 ip 12.37.221.1"}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 11759744, "user_type": "registered", "profile_image": "https://graph.facebook.com/2571926012831168/picture?type=large", "display_name": "Omri Brandes", "link": "https://stackoverflow.com/users/11759744/omri-brandes"}, "is_accepted": false, "score": 0, "last_activity_date": 1562793214, "creation_date": 1562793214, "answer_id": 56978720, "question_id": 56978542, "link": "https://stackoverflow.com/questions/56978542/how-to-search-a-string-pull-a-piece-of-it-and-use-it-as-a-variable/56978720#56978720", "title": "How to search a string, pull a piece of it, and use it as a variable", "body": "<p>You should first check if the string exists in your config file, and if it does, concatenate to another string:</p>\n\n<pre><code>if &lt;STRING&gt; in open(&lt;CONFIG FILE&gt;).read():\n      ip = &lt;STRING&gt;\n     some_other_string += ip\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 90, "user_id": 10442109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/badbfa160ae7e73768265742987ba6e3?s=128&d=identicon&r=PG&f=1", "display_name": "Seraphendipity", "link": "https://stackoverflow.com/users/10442109/seraphendipity"}, "is_accepted": false, "score": 0, "last_activity_date": 1562793226, "creation_date": 1562793226, "answer_id": 56978722, "question_id": 56978542, "link": "https://stackoverflow.com/questions/56978542/how-to-search-a-string-pull-a-piece-of-it-and-use-it-as-a-variable/56978722#56978722", "title": "How to search a string, pull a piece of it, and use it as a variable", "body": "<p>welcome to Stack Overflow!</p>\n\n<p>For this problem, you could...</p>\n\n<ul>\n<li>Load the config file data into a string variable, perhaps <code>contents</code></li>\n<li>Use the <code>.find()</code> string method to search for a specfic keyword, such as <code>ip address</code></li>\n<li>Use indexing to grab the next set of data: since <code>.find()</code> returns the index of the target word, you could then go about grabbing the next words unto you hit an End-Of-Line character, likely at least <code>\\n</code></li>\n</ul>\n\n<p><a href=\"https://stackoverflow.com/questions/56977105/how-can-i-pull-out-text-snippets-around-specific-words/56978383#56978383\">Here is a somewhat related problem that my help if you like</a>\n<a href=\"https://stackoverflow.com/questions/18157373/importing-data-and-variable-names-from-a-text-file-in-python\">This may help as well</a></p>\n"}, {"tags": [], "owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1562793293, "creation_date": 1562793293, "answer_id": 56978735, "question_id": 56978542, "link": "https://stackoverflow.com/questions/56978542/how-to-search-a-string-pull-a-piece-of-it-and-use-it-as-a-variable/56978735#56978735", "title": "How to search a string, pull a piece of it, and use it as a variable", "body": "<p>In general, when matching with re for example using <code>re.search(...)</code> you give a pattern and a target string. In the pattern you specify the structure of string you're looking for, and when using <code>(...)</code> inside your pattern, this creates <em>capture groups</em> that can be later retrieved. For example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>s = \"ip address 12.37.221.1 255.255.255.0\"\nmtch = re.search(\"ip address (\\d+.\\d+.\\d+.\\d+) .*\")\nprint(mtch.group(0))\n-&gt; ip address 12.37.221.1 255.255.255.0\nprint(mtch.group(1))\n-&gt; 12.37.221.1\n</code></pre>\n\n<p><code>group(0)</code> is always the full match, and then comes all your capturing groups.</p>\n\n<p>For more details and examples, read <a href=\"https://docs.python.org/3/howto/regex.html#grouping\" rel=\"nofollow noreferrer\">this section</a> of the cookbook</p>\n"}, {"tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": false, "score": 0, "last_activity_date": 1562795056, "creation_date": 1562795056, "answer_id": 56979044, "question_id": 56978542, "link": "https://stackoverflow.com/questions/56978542/how-to-search-a-string-pull-a-piece-of-it-and-use-it-as-a-variable/56979044#56979044", "title": "How to search a string, pull a piece of it, and use it as a variable", "body": "<p>If I understand the problem correctly, you want to insert first IP address after  <code>\"standby 1 ip\"</code>. You can achieve this with regex capturing groups:</p>\n\n<pre><code>data = '''\ninterface Vlan88\n  ip address 12.37.221.1 255.255.255.0\n  !\n  !\n  standby 1 ip'''\n\nimport re\n\nnew_data = re.sub(r'(?&lt;=ip address )([\\d.]+)(.*)(standby 1 ip)', r'\\1\\2\\3 \\1', data, flags=re.DOTALL)\n\nprint(new_data)\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>interface Vlan88\n  ip address 12.37.221.1 255.255.255.0\n  !\n  !\n  standby 1 ip 12.37.221.1\n</code></pre>\n\n<p>You can see inner workings of this regular expression on <a href=\"https://regex101.com/r/0KdWUN/1\" rel=\"nofollow noreferrer\">Regex101 (link).</a></p>\n"}], "owner": {"reputation": 11, "user_id": 6922322, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-f0wpXOoUzXQ/AAAAAAAAAAI/AAAAAAAAAKY/-VYvMjYxq5E/photo.jpg?sz=128", "display_name": "jeremy young", "link": "https://stackoverflow.com/users/6922322/jeremy-young"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1562795056, "creation_date": 1562792312, "last_edit_date": 1562792462, "question_id": 56978542, "link": "https://stackoverflow.com/questions/56978542/how-to-search-a-string-pull-a-piece-of-it-and-use-it-as-a-variable", "title": "How to search a string, pull a piece of it, and use it as a variable", "body": "<p>I am working with router configurations and need to write a Python script to loop through a config file, search a specific string  for a specific item, in this case an IP address, store it as a variable, and then use that variable in another string.  For example:</p>\n\n<pre><code>interface Vlan88\n  ip address 12.37.221.1 255.255.255.0\n  !\n  !\n  standby 1 ip (insert ONLY 12.37.221.1 here)\n</code></pre>\n\n<p>And do this same thing for any and all other interfaces</p>\n\n<p>I'll be honest....at present tries == 0 because this is beyond my knowledge level.  However, I am using regex to replace some helper addresses as well as write the HSRP config portion.  But, I am not far enough along to know how to search for something specific and turn it into a variable.</p>\n"}, {"tags": ["python", "jupyter-notebook"], "comments": [{"owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1562792514, "post_id": 56978517, "comment_id": 100493164, "body": "Are you sure the directory is empty?  It doesn&#39;t contain any hidden files/directories, i.e. something like <code>.pycache</code>?"}, {"owner": {"reputation": 465, "user_id": 11740864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186b8ced1838e9982a3a8a95bb0f0d37?s=128&d=identicon&r=PG&f=1", "display_name": "Moshee", "link": "https://stackoverflow.com/users/11740864/moshee"}, "reply_to_user": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "edited": false, "score": 0, "creation_date": 1562792900, "post_id": 56978517, "comment_id": 100493297, "body": "Please can you tell me how I can check that. Jupyter notebook is currently running on localhost. When I look into the folder it doesn&#39;t contain any files."}], "answers": [{"comments": [{"owner": {"reputation": 465, "user_id": 11740864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186b8ced1838e9982a3a8a95bb0f0d37?s=128&d=identicon&r=PG&f=1", "display_name": "Moshee", "link": "https://stackoverflow.com/users/11740864/moshee"}, "edited": false, "score": 0, "creation_date": 1562855526, "post_id": 56978899, "comment_id": 100517713, "body": "Thank you. It is creating the checkpoint folder. However it is not being deleted when I try to delete it."}, {"owner": {"reputation": 1671, "user_id": 3939318, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c1a5a77226eb0576dfd8148e041fc1d6?s=128&d=identicon&r=PG&f=1", "display_name": "Farzad Vertigo", "link": "https://stackoverflow.com/users/3939318/farzad-vertigo"}, "reply_to_user": {"reputation": 465, "user_id": 11740864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186b8ced1838e9982a3a8a95bb0f0d37?s=128&d=identicon&r=PG&f=1", "display_name": "Moshee", "link": "https://stackoverflow.com/users/11740864/moshee"}, "edited": false, "score": 0, "creation_date": 1562874542, "post_id": 56978899, "comment_id": 100526761, "body": "In terminal do <code>rm -rf .ipynb_checkpoints</code>. note that upon revisiting the parent directory from the web UI, it might be recreated."}, {"owner": {"reputation": 465, "user_id": 11740864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186b8ced1838e9982a3a8a95bb0f0d37?s=128&d=identicon&r=PG&f=1", "display_name": "Moshee", "link": "https://stackoverflow.com/users/11740864/moshee"}, "edited": false, "score": 0, "creation_date": 1562875360, "post_id": 56978899, "comment_id": 100527106, "body": "Thank you. I was able to delete the folder."}], "tags": [], "owner": {"reputation": 1671, "user_id": 3939318, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c1a5a77226eb0576dfd8148e041fc1d6?s=128&d=identicon&r=PG&f=1", "display_name": "Farzad Vertigo", "link": "https://stackoverflow.com/users/3939318/farzad-vertigo"}, "is_accepted": true, "score": 2, "last_activity_date": 1562794210, "creation_date": 1562794210, "answer_id": 56978899, "question_id": 56978517, "link": "https://stackoverflow.com/questions/56978517/delete-empty-directory-from-jupyter-notebook-error/56978899#56978899", "title": "Delete empty directory from Jupyter notebook error", "body": "<p>Usually, Jupyter itself creates a hidden <code>.ipynb_checkpoints</code> folder within the directory when you inspect it. You can check its existence (or any other hidden file/folders) in the directory using <code>ls -a</code> in a terminal that has a current working directory as the corresponding folder.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8597568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7363bca096f07cf1d5ad587752ba9c49?s=128&d=identicon&r=PG&f=1", "display_name": "sarada prasad", "link": "https://stackoverflow.com/users/8597568/sarada-prasad"}, "is_accepted": false, "score": 0, "last_activity_date": 1577358517, "creation_date": 1577358517, "answer_id": 59487551, "question_id": 56978517, "link": "https://stackoverflow.com/questions/56978517/delete-empty-directory-from-jupyter-notebook-error/59487551#59487551", "title": "Delete empty directory from Jupyter notebook error", "body": "<p>Go to your local directory where it stores the workbench files, ex:(C:\\Users\\prasadsarada)\nYou can see all the folders you have created in Jupyter Notebook. delete it there.</p>\n"}], "owner": {"reputation": 465, "user_id": 11740864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186b8ced1838e9982a3a8a95bb0f0d37?s=128&d=identicon&r=PG&f=1", "display_name": "Moshee", "link": "https://stackoverflow.com/users/11740864/moshee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6176, "favorite_count": 0, "accepted_answer_id": 56978899, "answer_count": 2, "score": 2, "last_activity_date": 1577358517, "creation_date": 1562792167, "question_id": 56978517, "link": "https://stackoverflow.com/questions/56978517/delete-empty-directory-from-jupyter-notebook-error", "title": "Delete empty directory from Jupyter notebook error", "body": "<p>I am trying to delete an empty directory in Jupyter notebook. \nWhen I select the folder and click Delete, an error message pops up saying:\n'A directory must be empty before being deleted.'</p>\n\n<p>There are no files or folders in the directory and it is empty.</p>\n\n<p>Any advice on how to delete it?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["python", "python-3.x", "pandas", "data-science"], "comments": [{"owner": {"reputation": 845, "user_id": 6710738, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b67ccb7730afd3d569c307f241faa768?s=128&d=identicon&r=PG&f=1", "display_name": "EHB", "link": "https://stackoverflow.com/users/6710738/ehb"}, "edited": false, "score": 0, "creation_date": 1562792218, "post_id": 56978492, "comment_id": 100493068, "body": "You need to add more detail to your question (i.e. what would you expect the outocome dataframe to look like)? No idea with  how it&#39;s phrased now."}, {"owner": {"reputation": 1432, "user_id": 8797830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4fcb3728cc624f1a3f54e7842f8b200?s=128&d=identicon&r=PG&f=1", "display_name": "Chris90", "link": "https://stackoverflow.com/users/8797830/chris90"}, "reply_to_user": {"reputation": 845, "user_id": 6710738, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b67ccb7730afd3d569c307f241faa768?s=128&d=identicon&r=PG&f=1", "display_name": "EHB", "link": "https://stackoverflow.com/users/6710738/ehb"}, "edited": false, "score": 0, "creation_date": 1562792299, "post_id": 56978492, "comment_id": 100493089, "body": "Thanks, @EHB that df sample I included would be the expected outcome"}, {"owner": {"reputation": 4485, "user_id": 7835267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a152b03a85ba96c1f3d49a1dda8398fb?s=128&d=identicon&r=PG&f=1", "display_name": "G. Anderson", "link": "https://stackoverflow.com/users/7835267/g-anderson"}, "edited": false, "score": 0, "creation_date": 1562792326, "post_id": 56978492, "comment_id": 100493104, "body": "To put it another way, on this site we ask that users provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for the problem you&#39;re trying to solve, including sample input and output, and what you&#39;ve tried so far. For instance, you haven&#39;t showed your previous efforts, or described how you got these labels from this input data"}], "answers": [{"comments": [{"owner": {"reputation": 1432, "user_id": 8797830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4fcb3728cc624f1a3f54e7842f8b200?s=128&d=identicon&r=PG&f=1", "display_name": "Chris90", "link": "https://stackoverflow.com/users/8797830/chris90"}, "edited": false, "score": 0, "creation_date": 1562792640, "post_id": 56978570, "comment_id": 100493209, "body": "I guess thats my question for example if I want  4/24, 4/26 to have labels of 1 and 4/25 label of 2 how would I enter that as code into that function?"}], "tags": [], "owner": {"reputation": 189, "user_id": 4987390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4466c0a718d6364e3deb2d04d302b0a8?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitrii", "link": "https://stackoverflow.com/users/4987390/dmitrii"}, "is_accepted": false, "score": 0, "last_activity_date": 1562792413, "creation_date": 1562792413, "answer_id": 56978570, "question_id": 56978492, "link": "https://stackoverflow.com/questions/56978492/create-a-new-column-with-labels-bases-on-a-different-columns-values/56978570#56978570", "title": "Create a new column with labels bases on a different columns values", "body": "<p>Suppose you have a classification function</p>\n\n<pre><code>def classify(date):\n    # returns a label for date\n</code></pre>\n\n<p>Then you can achieve what you need:</p>\n\n<pre><code>df['label'] = pd.Series(classify(df['date'].values), index=df.index)\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user11735387"}, "is_accepted": false, "score": 0, "last_activity_date": 1562792473, "creation_date": 1562792473, "answer_id": 56978581, "question_id": 56978492, "link": "https://stackoverflow.com/questions/56978492/create-a-new-column-with-labels-bases-on-a-different-columns-values/56978581#56978581", "title": "Create a new column with labels bases on a different columns values", "body": "<p>Um, so if you want to print the said column, you could just do this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>print(date | label)\ndates = ['4/24', '4/25', '4/26', '4/24', '4/26']\nlabels = ['1','2','1','2','1']\nfor i in range(len(dates)):\n    print(dates[i]+'     '+labels[i])\n</code></pre>\n\n<p>I gues this would be what you wanted</p>\n\n<p>That is considering you have all your labels and dates in two lists, ordered by index.</p>\n\n<p>Or you could do this:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>datesToBePrinted = zip(dates, labels)\nfor i in datesToBePrinted:\n    print(i)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 9406842, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-5yqwI28V1AU/AAAAAAAAAAI/AAAAAAAAABI/KL9b-0xi-m0/photo.jpg?sz=128", "display_name": "Mohammad Wasil", "link": "https://stackoverflow.com/users/9406842/mohammad-wasil"}, "is_accepted": false, "score": 1, "last_activity_date": 1562793805, "creation_date": 1562793805, "answer_id": 56978845, "question_id": 56978492, "link": "https://stackoverflow.com/questions/56978492/create-a-new-column-with-labels-bases-on-a-different-columns-values/56978845#56978845", "title": "Create a new column with labels bases on a different columns values", "body": "<p>I think this is what you are looking for:</p>\n\n<pre><code>import pandas as pd\ndataframe = pd.DataFrame()\ndataframe[\"date\"] = ['4/24', '4/25', '4/26', '4/24', '4/26']\n\ndictionary = {'4/24' : '1', '4/25' : '2', '4/26':'1' }\ndataframe[\"label\"] = dataframe[\"date\"].map(dictionary)\ndataframe\n</code></pre>\n\n<p>Create a dictionary so that we can map each and every labels with their dates. You can change the dictionary accordingly.</p>\n\n<p>Output:</p>\n\n<pre><code>date    label\n0   4/24    1\n1   4/25    2\n2   4/26    1\n3   4/24    1\n4   4/26    1\n</code></pre>\n\n<p>Hope this helps!</p>\n"}, {"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 0, "last_activity_date": 1562799123, "creation_date": 1562799123, "answer_id": 56979599, "question_id": 56978492, "link": "https://stackoverflow.com/questions/56978492/create-a-new-column-with-labels-bases-on-a-different-columns-values/56979599#56979599", "title": "Create a new column with labels bases on a different columns values", "body": "<p>In this very specific case, you only need to check if the last character is <code>5</code> so you can have a very nice vectorize function:</p>\n\n<pre><code>df['label'] = df['date'].str[-1].eq('5') + 1 \n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   date  label\n0  4/24      1\n1  4/25      2\n2  4/26      1\n3  4/24      1\n4  4/26      1\n</code></pre>\n"}], "owner": {"reputation": 1432, "user_id": 8797830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4fcb3728cc624f1a3f54e7842f8b200?s=128&d=identicon&r=PG&f=1", "display_name": "Chris90", "link": "https://stackoverflow.com/users/8797830/chris90"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1562799123, "creation_date": 1562792061, "last_edit_date": 1562792522, "question_id": 56978492, "link": "https://stackoverflow.com/questions/56978492/create-a-new-column-with-labels-bases-on-a-different-columns-values", "title": "Create a new column with labels bases on a different columns values", "body": "<p>I am trying to create a new column based on values of a different column to essentially label the values in a different column into two buckets.</p>\n\n<p>so if the dates of 4/24, 4/26 I wanted labels of 1 and 4/25 label of 2,</p>\n\n<p>expected df would look like:</p>\n\n<pre><code>date | label \n4/24     1\n4/25     2\n4/26     1\n4/24     1\n4/26     1\n</code></pre>\n\n<p>where label would be the new column</p>\n\n<p>Thanks for looking</p>\n"}, {"tags": ["python", "python-3.x", "matplotlib"], "comments": [{"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1562792201, "post_id": 56978488, "comment_id": 100493064, "body": "<code>tight_layout</code> will adjust the spacings, such that everything fits well into the figure. You can remove <code>tight_layout</code> and adjust the parameters manually via <code>plt.subplots_adjust</code>."}, {"owner": {"reputation": 11, "user_id": 11744281, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PypxkN0PRR8/AAAAAAAAAAI/AAAAAAAAFGY/6C-z7SzZQWY/photo.jpg?sz=128", "display_name": "Justine Grondin", "link": "https://stackoverflow.com/users/11744281/justine-grondin"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1562792275, "post_id": 56978488, "comment_id": 100493081, "body": "Thanks, I&#39;ll give it a try."}, {"owner": {"reputation": 11, "user_id": 11744281, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PypxkN0PRR8/AAAAAAAAAAI/AAAAAAAAFGY/6C-z7SzZQWY/photo.jpg?sz=128", "display_name": "Justine Grondin", "link": "https://stackoverflow.com/users/11744281/justine-grondin"}, "reply_to_user": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1562861358, "post_id": 56978488, "comment_id": 100521085, "body": "@ImportanceOfBeingErnest Is it possible to change the subplot params per different subplot (change the parameters per quadrant instead of the whole figure). If so, how?"}, {"owner": {"reputation": 246762, "user_id": 4124317, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/wsHAV.png?s=128&g=1", "display_name": "ImportanceOfBeingErnest", "link": "https://stackoverflow.com/users/4124317/importanceofbeingernest"}, "edited": false, "score": 0, "creation_date": 1562870423, "post_id": 56978488, "comment_id": 100525090, "body": "No that&#39;s not possible, but for a 2x2 it&#39;s also not necessary, since you have 3 margins per direction to control and for that your have 3 parameters; 6 in total."}], "owner": {"reputation": 11, "user_id": 11744281, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PypxkN0PRR8/AAAAAAAAAAI/AAAAAAAAFGY/6C-z7SzZQWY/photo.jpg?sz=128", "display_name": "Justine Grondin", "link": "https://stackoverflow.com/users/11744281/justine-grondin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1562793333, "creation_date": 1562792042, "last_edit_date": 1562793333, "question_id": 56978488, "link": "https://stackoverflow.com/questions/56978488/pie-chart-changes-depending-on-dict-key-size", "title": "Pie chart changes depending on dict key size", "body": "<p>I am plotting 4 pie charts in one figure using a function. However, I realized that depending on how long the key names are in the dict, the pie charts move. How can I fix this and keep them looking like figure 1?</p>\n\n<p>Here is my function: </p>\n\n<pre><code>def create_pie_chart(title, pie_dict, top_design, pyplot, nbr, cord1, cord2, loc_nbr):\n  #pyplot.figure()\n  counts = collections.Counter(pie_dict)  # color for pie chart\n  pyplot.subplot(2, 2, nbr)\n  pyplot.pie([float(v) for v in counts.values()], labels=[k for k in counts],\n            autopct='%1.1f%%', radius=9, shadow=True, labeldistance=1.05, startangle=125,\n             pctdistance=0.7, center=(cord1, cord2))\n  centre_circle = pyplot.Circle((0,0), 2, fc='white')\n  pyplot.gca().set_title(title+top_design)\n  fig = pyplot.gcf()\n  fig.gca().add_artist(centre_circle)\n  #pyplot.suptitle(title+top_design)\n  pyplot.axis('equal')\n  pyplot.legend(labels=counts, loc='center right', fontsize = 'x-small', bbox_to_anchor=(0.2, 0.2, 1, 1), facecolor='grey')\n  pyplot.tight_layout()\n  pyplot.title(title+top_design, fontsize = 'medium')\n</code></pre>\n\n<p>I call it this way:</p>\n\n<pre><code>create_pie_chart(\"second pie chart\\n \", dict_2, \"two\", pyplot, 2, 0, 0, 1)\n</code></pre>\n\n<p>I want it to look like this: \n<a href=\"https://i.stack.imgur.com/Gvwi2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Gvwi2.png\" alt=\"enter image description here\"></a></p>\n\n<p>However, when the dict key sizes become bigger, they look like this:\n<a href=\"https://i.stack.imgur.com/gk1mj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gk1mj.png\" alt=\"enter image description here\"></a>.</p>\n"}, {"tags": ["python", "django", "python-3.x", "django-views", "django-class-based-views"], "answers": [{"tags": [], "owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "is_accepted": true, "score": 2, "last_activity_date": 1562792200, "creation_date": 1562792200, "answer_id": 56978524, "question_id": 56978485, "link": "https://stackoverflow.com/questions/56978485/accessing-the-request-object-from-within-a-class-based-view-needed-to-determine/56978524#56978524", "title": "Accessing the request object from within a class based view? Needed to determine if the request is coming from a mobile device", "body": "<p>You can access the request using <code>self.request</code>. The best place for this logic is in <code>get_template_names</code></p>\n\n<pre><code>def get_template_names(self):\n    if mobileBrowser(self.request):\n        template_name = 'index_app/mobile/index.html'\n    else:\n        template_name = 'index_app/index.html'\n    return template_name\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 11767007, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-7EW6leZP2_k/AAAAAAAAAAI/AAAAAAAAAo0/3_XhMxB-kxo/photo.jpg?sz=128", "display_name": "Andrew Mckinney", "link": "https://stackoverflow.com/users/11767007/andrew-mckinney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 56978524, "answer_count": 1, "score": 0, "last_activity_date": 1562792200, "creation_date": 1562792032, "question_id": 56978485, "link": "https://stackoverflow.com/questions/56978485/accessing-the-request-object-from-within-a-class-based-view-needed-to-determine", "title": "Accessing the request object from within a class based view? Needed to determine if the request is coming from a mobile device", "body": "<p>I have the following CBV:</p>\n\n<pre><code>class Index(TemplateView):\n        template_name = 'index_app/index.html'\n</code></pre>\n\n<p>As well as a function that could take the a request object and return whether its coming from a mobile device or not:</p>\n\n<pre><code>def mobileBrowser(request):\n\nmobile_browser = False\nua = request.META['HTTP_USER_AGENT'].lower()[0:4]\n\nif (ua in mobile_uas):\n    mobile_browser = True\nelse:\n    for hint in mobile_ua_hints:\n        if request.META['HTTP_USER_AGENT'].find(hint) &gt; 0:\n            mobile_browser = True\n\nreturn mobile_browser\n</code></pre>\n\n<p>I want to be able to use this to do something like the following in my CBV:</p>\n\n<pre><code>class Index(TemplateView):\nif mobileBrowser(request):\n    template_name = 'index_app/mobile/index.html'\nelse:\n    template_name = 'index_app/index.html'\n</code></pre>\n\n<p>This isn't possible, as a CBV doesn't seem to have access to the request object. Is there any way that this object can be accessed in this situation?</p>\n\n<p>I know it would be possible to create a standard view instead, but later on I would like to continue using CBVs like CreateView and whatnot, which will just land me in the same situation again.</p>\n"}, {"tags": ["python", "string", "matlab", "text", "cell"], "answers": [{"tags": [], "owner": {"reputation": 1348, "user_id": 6933039, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Sn3RU_eNCJA/AAAAAAAAAAI/AAAAAAAAAFs/IeOaIPSOW1A/photo.jpg?sz=128", "display_name": "brandonwang", "link": "https://stackoverflow.com/users/6933039/brandonwang"}, "is_accepted": false, "score": 1, "last_activity_date": 1562792608, "creation_date": 1562792608, "answer_id": 56978605, "question_id": 56978481, "link": "https://stackoverflow.com/questions/56978481/extracting-parameter-values-from-one-large-string/56978605#56978605", "title": "extracting parameter values from one large string", "body": "<p>You can use regex. </p>\n\n<p>A simple regex to get numbers is this: <code>'-?\\d*\\.?\\d*'</code>.</p>\n\n<p>To get your data, you can use this regex.</p>\n\n<pre><code>'u1 @ t={0}, K={0}, gamma={0}, A={0}'.format('-?\\d*\\.?\\d*')\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>&gt;&gt;&gt; import re\n&gt;&gt;&gt; text = 'u1 @ t=0, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.01, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.02, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.03, K=3.1416, gamma=0.1, A=-0.1'\n&gt;&gt;&gt; r = '-?\\d*\\.?\\d*'\n&gt;&gt;&gt; re.findall('u1 @ t={0}, K={0}, gamma={0}, A={0}'.format(r), text)\n['u1 @ t=0, K=3.1416, gamma=0.1, A=-0.1', 'u1 @ t=0.01, K=3.1416, gamma=0.1, A=-0.1', 'u1 @ t=0.02, K=3.1416, gamma=0.1, A=-0.1', 'u1 @ t=0.03, K=3.1416, gamma=0.1, A=-0.1']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18194, "user_id": 1513933, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/0ozBK.jpg?s=128&g=1", "display_name": "Laurent LAPORTE", "link": "https://stackoverflow.com/users/1513933/laurent-laporte"}, "is_accepted": false, "score": 1, "last_activity_date": 1562793329, "last_edit_date": 1562793329, "creation_date": 1562792778, "answer_id": 56978645, "question_id": 56978481, "link": "https://stackoverflow.com/questions/56978481/extracting-parameter-values-from-one-large-string/56978645#56978645", "title": "extracting parameter values from one large string", "body": "<p>You can split your text with <a href=\"https://docs.python.org/3/library/re.html#module-contents\" rel=\"nofollow noreferrer\"><code>re.split</code></a>. For instance, you can split on each space which is followed by \u201cu1\u201d:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import re\nfrom pprint import pprint\n\ntext = 'u1 @ t=0, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.01, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.02, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.03, K=3.1416, gamma=0.1, A=-0.1'\n\nlines = re.split(r'\\s+(?=u1)', text)\npprint(lines)\n</code></pre>\n\n<p>You get:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>['u1 @ t=0, K=3.1416, gamma=0.1, A=-0.1',\n 'u1 @ t=0.01, K=3.1416, gamma=0.1, A=-0.1',\n 'u1 @ t=0.02, K=3.1416, gamma=0.1, A=-0.1',\n 'u1 @ t=0.03, K=3.1416, gamma=0.1, A=-0.1']\n</code></pre>\n\n<p>You can then parse each line of this result to extract the attributes:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>for line in lines:\n    attrs = {}\n    for value in line[5:].split(\", \"):\n        k, v = value.split(\"=\")\n        attrs[k] = float(v)\n    print(attrs)\n</code></pre>\n\n<p>You get;</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>{'t': 0.0, 'K': 3.1416, 'gamma': 0.1, 'A': -0.1}\n{'t': 0.01, 'K': 3.1416, 'gamma': 0.1, 'A': -0.1}\n{'t': 0.02, 'K': 3.1416, 'gamma': 0.1, 'A': -0.1}\n{'t': 0.03, 'K': 3.1416, 'gamma': 0.1, 'A': -0.1}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 72046, "user_id": 10035985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1WgJ_2yA-78/AAAAAAAAAAI/AAAAAAAAAOA/0CBOlYqYe7M/photo.jpg?sz=128", "display_name": "Andrej Kesely", "link": "https://stackoverflow.com/users/10035985/andrej-kesely"}, "is_accepted": false, "score": 1, "last_activity_date": 1562793652, "creation_date": 1562793652, "answer_id": 56978813, "question_id": 56978481, "link": "https://stackoverflow.com/questions/56978481/extracting-parameter-values-from-one-large-string/56978813#56978813", "title": "extracting parameter values from one large string", "body": "<p>Without <code>regex</code>, the variables are stored as floats in 2D array:</p>\n\n<pre><code>s = '''u1 @ t=0, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.01, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.02, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.03, K=3.1416, gamma=0.1, A=-0.1'''\n\nout = []\nfor i in s.split('u1 @'):\n    if not i.strip():\n        continue\n    out += [[float(v.split('=')[-1]) for v in i.split(',')]]\n\nfrom pprint import pprint\npprint(out)\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>[[0.0, 3.1416, 0.1, -0.1],\n [0.01, 3.1416, 0.1, -0.1],\n [0.02, 3.1416, 0.1, -0.1],\n [0.03, 3.1416, 0.1, -0.1]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 55, "user_id": 2847543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d50415555f90ae7e1b1042486311545e?s=128&d=identicon&r=PG", "display_name": "Mohammad Noor", "link": "https://stackoverflow.com/users/2847543/mohammad-noor"}, "is_accepted": false, "score": 1, "last_activity_date": 1562793968, "creation_date": 1562793968, "answer_id": 56978866, "question_id": 56978481, "link": "https://stackoverflow.com/questions/56978481/extracting-parameter-values-from-one-large-string/56978866#56978866", "title": "extracting parameter values from one large string", "body": "<p>Try this:</p>\n\n<pre><code>def to_cells(string):\nstrings = list(filter(None, string.split('u1 @ ')))\ncells = {}\n\nfor cell in strings:\n    pairs = cell.split(',')\n    for pair in pairs:\n        k, v = pair.split('=')\n        k = k.strip()\n        v = float(v)\n        if k in cells:\n            cells[k].append(v)\n        else:\n            cells[k] = [v]\n\nreturn cells\n</code></pre>\n\n<p>You can use the function like this:</p>\n\n<pre><code>res = to_cells(\n    'u1 @ t=0, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.01, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.02, K=3.1416,'\n    ' gamma=0.1, A=-0.1 u1 @ t=0.03, K=3.1416, gamma=0.1, A=-0.1'\n)\n\nfor x in res:\n    print(x, '\\t====&gt;\\t', res[x])\n</code></pre>\n\n<p>And the output will look like:</p>\n\n<pre><code>t   ====&gt;    [0.0, 0.01, 0.02, 0.03]\nK   ====&gt;    [3.1416, 3.1416, 3.1416, 3.1416]\ngamma   ====&gt;    [0.1, 0.1, 0.1, 0.1]\nA   ====&gt;    [-0.1, -0.1, -0.1, -0.1]\n</code></pre>\n\n<p>Hope this helps :)</p>\n"}, {"comments": [{"owner": {"reputation": 2238, "user_id": 4159833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9c40168a426e48fa3faa82591351b7de?s=128&d=identicon&r=PG&f=1", "display_name": "Physicist", "link": "https://stackoverflow.com/users/4159833/physicist"}, "edited": false, "score": 0, "creation_date": 1562795120, "post_id": 56978977, "comment_id": 100494008, "body": "I&#39;m a bit confused about strings vs characters vs cells in Matlab. I got an error <code>Brace indexing is not supported for variables of this type.</code> in the last line. What&#39;s the expected data type of the variables <code>str</code> and <code>vals</code> in the above codes?"}, {"owner": {"reputation": 123305, "user_id": 52738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10d46954aba4a7207ea3ba66d4e6f86?s=128&d=identicon&r=PG", "display_name": "gnovice", "link": "https://stackoverflow.com/users/52738/gnovice"}, "reply_to_user": {"reputation": 2238, "user_id": 4159833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9c40168a426e48fa3faa82591351b7de?s=128&d=identicon&r=PG&f=1", "display_name": "Physicist", "link": "https://stackoverflow.com/users/4159833/physicist"}, "edited": false, "score": 0, "creation_date": 1562795277, "post_id": 56978977, "comment_id": 100494048, "body": "@Physicist: I assumed <code>str</code> was type <code>char</code> (i.e. a vector of characters), like in your examples. Then the output from <code>regexp</code> should be a cell array of cell arrays of character vectors."}, {"owner": {"reputation": 2238, "user_id": 4159833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9c40168a426e48fa3faa82591351b7de?s=128&d=identicon&r=PG&f=1", "display_name": "Physicist", "link": "https://stackoverflow.com/users/4159833/physicist"}, "edited": false, "score": 0, "creation_date": 1562797556, "post_id": 56978977, "comment_id": 100494640, "body": "if the first few <code>t</code> values are in scientific notation, e.g. <code>t=0 ... t=1E-4 ... t=2E-4 ...... t=9E-4 ... t=0.001 ... t=0.002 ...</code>, how should I modify the regular expressions for <code>t=(...)</code>?"}, {"owner": {"reputation": 123305, "user_id": 52738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10d46954aba4a7207ea3ba66d4e6f86?s=128&d=identicon&r=PG", "display_name": "gnovice", "link": "https://stackoverflow.com/users/52738/gnovice"}, "reply_to_user": {"reputation": 2238, "user_id": 4159833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9c40168a426e48fa3faa82591351b7de?s=128&d=identicon&r=PG&f=1", "display_name": "Physicist", "link": "https://stackoverflow.com/users/4159833/physicist"}, "edited": false, "score": 0, "creation_date": 1562800219, "post_id": 56978977, "comment_id": 100495260, "body": "@Physicist: I updated the regex pattern, so it should be able to handle scientific notation now."}], "tags": [], "owner": {"reputation": 123305, "user_id": 52738, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f10d46954aba4a7207ea3ba66d4e6f86?s=128&d=identicon&r=PG", "display_name": "gnovice", "link": "https://stackoverflow.com/users/52738/gnovice"}, "is_accepted": false, "score": 1, "last_activity_date": 1562800171, "last_edit_date": 1562800171, "creation_date": 1562794573, "answer_id": 56978977, "question_id": 56978481, "link": "https://stackoverflow.com/questions/56978481/extracting-parameter-values-from-one-large-string/56978977#56978977", "title": "extracting parameter values from one large string", "body": "<p>You've gotten a lot of Python answers, so here's a MATLAB one. You can use the function <a href=\"https://www.mathworks.com/help/matlab/ref/regexp.html\" rel=\"nofollow noreferrer\"><code>regexp</code></a> to parse the string, then <a href=\"https://www.mathworks.com/help/matlab/ref/vertcat.html\" rel=\"nofollow noreferrer\"><code>vertcat</code></a>, <a href=\"https://www.mathworks.com/help/matlab/ref/cellfun.html\" rel=\"nofollow noreferrer\"><code>cellfun</code></a>, and <a href=\"https://www.mathworks.com/help/matlab/ref/str2double.html\" rel=\"nofollow noreferrer\"><code>str2double</code></a> to reshape and convert the resulting cell array of strings into an N-by-4 matrix of values. Starting with this sample data (4 sets of entries in one string):</p>\n\n<pre><code>str = 'u1 @ t=0, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.01, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.02, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.03, K=3.1416, gamma=0.1, A=-0.1';\n</code></pre>\n\n<p>The code is just 2 lines:</p>\n\n<pre><code>vals = regexp(str, 'u1 @ t=([-\\.\\dE]+), K=([-\\.\\dE]+), gamma=([-\\.\\dE]+), A=([-\\.\\dE]+)', 'tokens');\nvals = cellfun(@str2double, vertcat(vals{:}));\n</code></pre>\n\n<p>And the result:</p>\n\n<pre><code>vals =\n\n                   0   3.141600000000000   0.100000000000000  -0.100000000000000\n   0.010000000000000   3.141600000000000   0.100000000000000  -0.100000000000000\n   0.020000000000000   3.141600000000000   0.100000000000000  -0.100000000000000\n   0.030000000000000   3.141600000000000   0.100000000000000  -0.100000000000000\n</code></pre>\n\n<p>Each column contains the values for <code>t</code>, <code>K</code>, <code>gamma</code>, and <code>A</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 106322, "user_id": 2586922, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/rFMSx.png?s=128&g=1", "display_name": "Luis Mendo", "link": "https://stackoverflow.com/users/2586922/luis-mendo"}, "is_accepted": false, "score": 0, "last_activity_date": 1562800479, "creation_date": 1562800479, "answer_id": 56979735, "question_id": 56978481, "link": "https://stackoverflow.com/questions/56978481/extracting-parameter-values-from-one-large-string/56979735#56979735", "title": "extracting parameter values from one large string", "body": "<p>Another Matlab, regex-based solution. Denoting the string (character vector) by <code>s</code>, </p>\n\n<pre><code>v = reshape(str2double(regexp([s ' '], '(?&lt;=(t|K|gamma|A)=).+?(?=,| )', 'match')), 4, []).';\n</code></pre>\n\n<p>gives, in your example,</p>\n\n<pre><code>v =\n                   0   3.141600000000000   0.100000000000000  -0.100000000000000\n   0.010000000000000   3.141600000000000   0.100000000000000  -0.100000000000000\n   0.020000000000000   3.141600000000000   0.100000000000000  -0.100000000000000\n   0.030000000000000   3.141600000000000   0.100000000000000  -0.100000000000000\n</code></pre>\n\n<p>The regular expression matches whatever is preceded by <code>t=</code>, <code>K=</code> etc and followed by either a comma or a space. A space is added at the end of the string so that the last match can be found. <code>str2double</code> converts the matched substring to a number (if possible). Then some transposing and reshaping is used to arrange the results as a matrix, where each of the 4 variables is a column.</p>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 11756533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/983b49185da1872b61d5078a060595c7?s=128&d=identicon&r=PG", "display_name": "mechcad", "link": "https://stackoverflow.com/users/11756533/mechcad"}, "is_accepted": false, "score": 0, "last_activity_date": 1562811295, "creation_date": 1562811295, "answer_id": 56980780, "question_id": 56978481, "link": "https://stackoverflow.com/questions/56978481/extracting-parameter-values-from-one-large-string/56980780#56980780", "title": "extracting parameter values from one large string", "body": "<p>Here is a rudimentary way to do this in MATLAB: </p>\n\n<pre><code>text ='u1 @ t=0, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.01, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.02, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.03, K=3.1416, gamma=0.1, A=-0.1';\na=size(text);\npos1=strfind(text, 'u1'); % first position of variable\npos2=strfind(text, 'A='); % position of 'A='\npos2=pos2+5; % since after 'A=' there are five spaces until the end of the desired variable\nvars=length(char); % number of new variables within 'text'\nfor i=1:length(pos2)\n     output{i}=text(pos1(i):pos2(i)); % output variable as cell with entries as new variables\nend \n</code></pre>\n\n<p>It finds the position of the first and last characters of the desired variable and removes these from 'text'. I would recommend following a similar method to extract the text for individual variable names and values. I would use the \"strfind\" function on the '=' sign for this. </p>\n"}, {"tags": [], "owner": {"reputation": 656, "user_id": 6850716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c437157670f86e78b18000eb2b1cd00c?s=128&d=identicon&r=PG&f=1", "display_name": "matlabbit", "link": "https://stackoverflow.com/users/6850716/matlabbit"}, "is_accepted": false, "score": 0, "last_activity_date": 1562864042, "last_edit_date": 1562864042, "creation_date": 1562862783, "answer_id": 56993707, "question_id": 56978481, "link": "https://stackoverflow.com/questions/56978481/extracting-parameter-values-from-one-large-string/56993707#56993707", "title": "extracting parameter values from one large string", "body": "<p>I think this can be done more easily without regexp in MATLAB. Using string instead of char also helps.</p>\n\n<pre><code>result = extractAfter(text,'u1 @ ');\nresult = split(result, 'u1 @ ');\nresult = split(result, ',');\nresult = extractAfter(result,'=');\nresult = double(result);\n</code></pre>\n\n<p>This is probably the fastest solution so far.</p>\n\n<pre><code>&gt;&gt; testFunc\nElapsed time is 0.075453 seconds. % My solution\nElapsed time is 2.820094 seconds. % Luis Mendo solution\n\nfunction testFunc()\n\n    text = \"u1 @ t=0, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.01, K=3.1416, \" + ...\n           \"gamma=0.1, A=-0.1 u1 @ t=0.02, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.03, \" + ...\n           \"K=3.1416, gamma=0.1, A=-0.1\";\n\n    % My solution\n    tic\n    for i = 1:1e4\n        result = extractAfter(text,'u1 @ ');\n        result = split(result, 'u1 @ ');\n        result = split(result, ',');\n        result = extractAfter(result,'=');\n        result = double(result);\n    end\n    toc\n\n    % Luis Mendo solution\n    tic;\n    for i = 1:1e4\n        result = reshape(str2double(regexp(text + ' ', '(?&lt;=(t|K|gamma|A)=).+?(?=,| )', 'match')), 4, [])';\n    end\n    toc\n</code></pre>\n"}], "owner": {"reputation": 2238, "user_id": 4159833, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/9c40168a426e48fa3faa82591351b7de?s=128&d=identicon&r=PG&f=1", "display_name": "Physicist", "link": "https://stackoverflow.com/users/4159833/physicist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 8, "score": 1, "last_activity_date": 1562864042, "creation_date": 1562792019, "last_edit_date": 1592644375, "question_id": 56978481, "link": "https://stackoverflow.com/questions/56978481/extracting-parameter-values-from-one-large-string", "title": "extracting parameter values from one large string", "body": "<p>I have the following string (loaded from a .txt file to a Matlab cell):</p>\n<pre><code>text = 'u1 @ t=0, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.01, K=3.1416, \ngamma=0.1, A=-0.1 u1 @ t=0.02, K=3.1416, gamma=0.1, A=-0.1 u1 @ t=0.03, \nK=3.1416, gamma=0.1, A=-0.1'\n</code></pre>\n<p>The whole string variable is very long (from t=0 to t=1 and for different parameter values). I want to separate them into multiple cells so that</p>\n<ul>\n<li><p><code>A(1)='u1 @ t=0, K=3.1416, gamma=0.1, A=-0.1'</code>,</p>\n</li>\n<li><p><code>A(2)='u1 @ t=0.01, K=3.1416, gamma=0.1, A=-0.1'</code>,</p>\n</li>\n<li><p>etc.</p>\n<p>Or even better is to extract the variables of the parameters <code>t</code>, <code>K</code>, <code>gamma</code>, <code>A</code> and store them in an array.</p>\n</li>\n</ul>\n<p>How to do this in Matlab? (or in Python)</p>\n<p>Edit:</p>\n<p>Turns out the first few entry in my data is in the form <code>... t=1E-4, ... t=2E-4, ...... t=9E-4, ... t=0.001</code>, and some of the answers will skip the first few time steps which are in scientific notations. How to handle those numbers as well?</p>\n"}, {"tags": ["python", "bokeh"], "answers": [{"comments": [{"owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "edited": false, "score": 0, "creation_date": 1562794303, "post_id": 56978867, "comment_id": 100493770, "body": "I&#39;ve made an issue to make this work directly: <a href=\"https://github.com/bokeh/bokeh/issues/9052\" rel=\"nofollow noreferrer\">github.com/bokeh/bokeh/issues/9052</a>"}, {"owner": {"reputation": 3, "user_id": 10700309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QYzI5.jpg?s=128&g=1", "display_name": "Austine", "link": "https://stackoverflow.com/users/10700309/austine"}, "edited": false, "score": 0, "creation_date": 1562875163, "post_id": 56978867, "comment_id": 100527017, "body": "Fixed it. Thanks very much."}], "tags": [], "owner": {"reputation": 29976, "user_id": 3406693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gwfWQ.png?s=128&g=1", "display_name": "bigreddot", "link": "https://stackoverflow.com/users/3406693/bigreddot"}, "is_accepted": false, "score": 0, "last_activity_date": 1562880064, "last_edit_date": 1562880064, "creation_date": 1562793976, "answer_id": 56978867, "question_id": 56978434, "link": "https://stackoverflow.com/questions/56978434/source-data-is-updating-but-plot-is-never-updating/56978867#56978867", "title": "Source data is updating but plot is never updating", "body": "<p><em>EDIT: Starting with version 1.3, the original code above will work, too</em></p>\n\n<p>To be honest I am surprised this is not raising an exception. The <code>.data</code> property of an existing CDS can only be set from a plain Python dict, which you can do create with:</p>\n\n<pre><code>def filter_source(attr, old, new):\n    new_df = df[df['Department']==select.value]\n    source.data = ColumnDataSource.from_df(new_df)\n</code></pre>\n\n<p>Edit: It <em>does</em> raise an exception to set from a DataFrame, but maybe is hard to notice in the middle of server console output.</p>\n"}], "owner": {"reputation": 3, "user_id": 10700309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QYzI5.jpg?s=128&g=1", "display_name": "Austine", "link": "https://stackoverflow.com/users/10700309/austine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562880064, "creation_date": 1562791734, "last_edit_date": 1562794289, "question_id": 56978434, "link": "https://stackoverflow.com/questions/56978434/source-data-is-updating-but-plot-is-never-updating", "title": "Source data is updating but plot is never updating", "body": "<p>The source data is updated when changing dropdown menu using the function (filter_source) and can observe the output in the terminal. But the graph is never updating. </p>\n\n<pre><code>import pandas as pd\nfrom bokeh.io import curdoc\nfrom bokeh.models.widgets import TextInput, Button, Paragraph\nfrom bokeh.layouts import layout\nfrom bokeh.plotting import figure\nfrom bokeh.models import ColumnDataSource\nfrom bokeh.models.widgets import Select\nfrom bokeh.layouts import layout\nimport math\n\ndf = pd.read_csv('/Users/austinejose/Desktop/My Files/Work/Newcastle Service Station/2018/Feb_Totals.csv')\ndf1  = df[df['Department']=='Hot Food']\nnames = [str(x) for x in df1['Product Name']]\nsource  = ColumnDataSource(data = df1)\n\np = figure(x_range = names, plot_height = 500, width = 1000, title = \"Sales By Departments\",\n           toolbar_location = \"below\")\np.vbar(x = \"Product Name\", top = \"Retail Value\", width = 0.9, source = source, color = 'deepskyblue')\np.xgrid.grid_line_color = \"white\"\np.y_range.start = 0\np.xaxis.major_label_orientation = math.pi/4\np.xaxis.axis_label = \"Departments\"\np.yaxis.axis_label = \"Retail Value\"\np.axis.minor_tick_in = -3\np.axis.minor_tick_out = 6\np.outline_line_color = \"black\"\n\ndef filter_source(attr, old, new):\n    new_source = df[df['Department']==select.value]\n    source.data = new_source\n    names = [str(x) for x in new_source['Product Name']]\n\nmenus = df['Department'].unique().tolist()\nselect = Select(title = 'Choose Department', options = menus, value = 'Bill Pay')\nselect.on_change('value', filter_source)\n\nlay_out=layout([[select]])\ncurdoc().add_root(p)\ncurdoc().add_root(lay_out)\n\n</code></pre>\n\n<p>No error messages so far.</p>\n"}, {"tags": ["python", "methods", "decorator", "python-decorators"], "answers": [{"tags": [], "owner": {"reputation": 32215, "user_id": 3789550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mGqv.gif?s=128&g=1", "display_name": "heemayl", "link": "https://stackoverflow.com/users/3789550/heemayl"}, "is_accepted": false, "score": 1, "last_activity_date": 1562792062, "creation_date": 1562792062, "answer_id": 56978494, "question_id": 56978425, "link": "https://stackoverflow.com/questions/56978425/in-python-how-can-i-get-the-name-of-the-function-passed-to-my-decorator-with-pa/56978494#56978494", "title": "In Python, how can I get the name of the function passed to my decorator with parameters?", "body": "<p>The function <code>p_decorate</code> is being <em>called</em> with only argument <code>John</code> (<code>*a</code> and <code>**k</code> both will be empty), hence you're getting an empty tuple for <code>a</code>.</p>\n\n<p>Just to note, the returned <code>fn</code> callable is being called with the <code>get_fullnameobject</code> callable afterwards.</p>\n\n<p>More importantly, your current implementation is incomplete as you can never call the method -- you need another closure to actually do that.</p>\n"}, {"tags": [], "owner": {"reputation": 384463, "user_id": 1126841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa05233b2357f8d11c22ef4cfc7bb85c?s=128&d=identicon&r=PG", "display_name": "chepner", "link": "https://stackoverflow.com/users/1126841/chepner"}, "is_accepted": false, "score": 1, "last_activity_date": 1562792398, "creation_date": 1562792398, "answer_id": 56978563, "question_id": 56978425, "link": "https://stackoverflow.com/questions/56978425/in-python-how-can-i-get-the-name-of-the-function-passed-to-my-decorator-with-pa/56978563#56978563", "title": "In Python, how can I get the name of the function passed to my decorator with parameters?", "body": "<p>You need another nested function to define a decorator that takes arguments.</p>\n\n<pre><code>def p_decorate(name):\n    def _(f):\n        print(name + ' is at object: ')\n        print f\n        def fn(*a, **k):\n            # Do something, but ultimately you probably want to call f\n            ...\n        return fn\n    return _\n</code></pre>\n\n<p><code>p_decorate(\"John\")</code> returns the actual decorator, which takes <code>get_fullnameobject</code> as its <code>f</code> argument and returns the new <code>fn</code> object to bind to <code>get_fullnameobject</code>. Without decorator syntax, the usage looks like</p>\n\n<pre><code>def get_fullnameobject(self):\n    return self.name\n\nget_fullnameobject = p_decorate(\"John\")(get_fullnameobject)\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 9091740, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-blE6p66PSJg/AAAAAAAAAAI/AAAAAAAAAQU/te_pP4-A1_s/photo.jpg?sz=128", "display_name": "Annie Hua", "link": "https://stackoverflow.com/users/9091740/annie-hua"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1562854039, "creation_date": 1562791704, "last_edit_date": 1562854039, "question_id": 56978425, "link": "https://stackoverflow.com/questions/56978425/in-python-how-can-i-get-the-name-of-the-function-passed-to-my-decorator-with-pa", "title": "In Python, how can I get the name of the function passed to my decorator with parameters?", "body": "<p>I am trying to create a decorator that will validate if the parameter exist and retrieve the name of the method that is decorated. </p>\n\n<p>I was able to access the name of the method in my second layer of the function but not the first. </p>\n\n<p>For example, I have this decorator</p>\n\n<pre><code>def p_decorate(name, *a, **k):\n    print(name + ' is at object: ')\n    print a #I would like to get the method object here\n    def fn(*a, **k)\n        print a #object prints here instead\n    return fn\nreturn p_decorate\n</code></pre>\n\n<p>I have this class I would like to decorate</p>\n\n<pre><code>class Person(object):\n    @p_decorate('John')\n    def get_fullnameobject(self):\n        return self.name\n</code></pre>\n\n<p>I expect it to print:</p>\n\n<pre><code>John is at object: (&lt;function get_fullnameobject at 0x000000003745A588&gt;,)\n(&lt;function get_fullnameobject at 0x000000003745A588&gt;,)\n</code></pre>\n\n<p>but the output is: </p>\n\n<pre><code>John is at object: ()\n(&lt;function get_fullnameobject at 0x000000003745A588&gt;,)\n</code></pre>\n"}, {"tags": ["python", "django", "django-rest-framework", "django-rest-framework-simplejwt"], "comments": [{"owner": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "edited": false, "score": 0, "creation_date": 1562800217, "post_id": 56978424, "comment_id": 100495258, "body": "Does your urls file currently just use the default <code>TokenObtainPairView.as_view()</code>?"}, {"owner": {"reputation": 7231, "user_id": 4915798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bb8af3ae95300addb5dfa2e6cb5940c3?s=128&d=identicon&r=PG&f=1", "display_name": "afonso", "link": "https://stackoverflow.com/users/4915798/afonso"}, "reply_to_user": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "edited": false, "score": 0, "creation_date": 1562837026, "post_id": 56978424, "comment_id": 100506357, "body": "Yes, just using the default <code>TokenObtainPairView.as_view()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 7231, "user_id": 4915798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bb8af3ae95300addb5dfa2e6cb5940c3?s=128&d=identicon&r=PG&f=1", "display_name": "afonso", "link": "https://stackoverflow.com/users/4915798/afonso"}, "edited": false, "score": 1, "creation_date": 1562838233, "post_id": 56979999, "comment_id": 100507136, "body": "With some adjustments (<code>request.body</code> to <code>request.data</code>) and making the <code>datetime</code> comparison timezone-aware , I&#39;ve made it to work as desired. Thank you!"}], "tags": [], "owner": {"reputation": 9542, "user_id": 8068625, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4spqa.png?s=128&g=1", "display_name": "Henry Woody", "link": "https://stackoverflow.com/users/8068625/henry-woody"}, "is_accepted": true, "score": 7, "last_activity_date": 1586970199, "last_edit_date": 1586970199, "creation_date": 1562802871, "answer_id": 56979999, "question_id": 56978424, "link": "https://stackoverflow.com/questions/56978424/django-rest-framework-custom-jwt-authentication/56979999#56979999", "title": "Django Rest Framework Custom JWT authentication", "body": "<p>You can do this by creating a custom serializer that inherits from <code>TokenObtainPairSerializer</code>, and extending the <code>validate</code> method to check for custom field values. There is no architecture problem if you are careful to not override necessary functionality of the parent class.</p>\n\n<p>Here is an example:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import datetime as dt\nimport json\nfrom rest_framework import exceptions\nfrom rest_framework_simplejwt.serializers import TokenObtainPairSerializer\nfrom rest_framework_simplejwt.views import TokenObtainPairView\n\n\n\nclass MyTokenObtainPairSerializer(TokenObtainPairSerializer):\n    def validate(self, attrs):\n        try:\n            request = self.context[\"request\"]\n        except KeyError:\n            pass\n        else:\n            request_data = json.loads(request.body)\n            username = request_data.get(\"username\")\n            app_id = request_data.get(\"app_id\")\n\n            profile_has_expired = False\n            try:\n                profile = ProfileApp.objects.get(user__username=username, app__app_id=app_id)\n            except ProfileApp.DoesNotExist:\n                profile_has_expired = True\n            else:\n                profile_has_expired = dt.date.today() &gt; profile.expires_on\n            finally:\n                if profile_has_expired:\n                    error_message = \"This profile has expired\"\n                    error_name = \"expired_profile\"\n                    raise exceptions.AuthenticationFailed(error_message, error_name)\n        finally:\n            return super().validate(attrs)\n\n\nclass MyTokenObtainPairView(TokenObtainPairView):\n    serializer_class = MyTokenObtainPairSerializer\n</code></pre>\n\n<p>Then use <code>MyTokenObtainPairView</code> in place of <code>TokenObtainPairView</code> in your urls file.</p>\n\n<p>Also since <code>User</code> and <code>ProfileApp</code> share a one-to-one field, it looks like you can get away with not using the <code>\"app_id</code>\" key/field at all.</p>\n\n<p>Original source file: <a href=\"https://github.com/davesque/django-rest-framework-simplejwt/blob/04376b0305e8e2fda257b08e507ccf511359d04a/rest_framework_simplejwt/serializers.py\" rel=\"nofollow noreferrer\">https://github.com/davesque/django-rest-framework-simplejwt/blob/04376b0305e8e2fda257b08e507ccf511359d04a/rest_framework_simplejwt/serializers.py</a></p>\n"}], "owner": {"reputation": 7231, "user_id": 4915798, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/bb8af3ae95300addb5dfa2e6cb5940c3?s=128&d=identicon&r=PG&f=1", "display_name": "afonso", "link": "https://stackoverflow.com/users/4915798/afonso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4015, "favorite_count": 3, "accepted_answer_id": 56979999, "answer_count": 1, "score": 4, "last_activity_date": 1586970199, "creation_date": 1562791702, "question_id": 56978424, "link": "https://stackoverflow.com/questions/56978424/django-rest-framework-custom-jwt-authentication", "title": "Django Rest Framework Custom JWT authentication", "body": "<p>I created a Django app in which I want to be able to authenticate users by checking not only the username and password, but also a specific field in a related model. The custom request body I want to <code>POST</code> to the endpoint is:</p>\n\n<pre><code>payload = { 'username': user, 'password': password, 'app_id': uuid4}\n</code></pre>\n\n<p>I am using <code>djangorestframework-simplejwt</code> module to get the access token.</p>\n\n<p><strong>models.py</strong></p>\n\n<pre><code>class Application(models.Model):\n\n    app_name  = models.CharField(max_length=300)\n    app_id    = models.UUIDField(default=uuid.uuid4, editable=False)\n\n    def __str__(self):\n        return self.app_name\n\nclass ProfileApp(models.Model):\n\n    user       = models.OneToOneField(User, on_delete=models.CASCADE)\n    app        = models.ForeignKey(Application, on_delete=models.CASCADE)\n    expires_on = models.DateTimeField(default=datetime.now() + timedelta(days=15))\n\n    def __str__(self):\n        return self.app.app_name + \" | \"  + self.user.username\n</code></pre>\n\n<p>Is it possible to override the <code>TokenObtainPairView</code> from <code>rest_framework_simplejwt</code> to only authenticate an user if the <code>expires_on</code> date is still not expired? Or is there an architecture problem by doing it like this?</p>\n"}, {"tags": ["python", "json"], "answers": [{"tags": [], "owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "is_accepted": true, "score": 1, "last_activity_date": 1562792116, "creation_date": 1562792116, "answer_id": 56978506, "question_id": 56978422, "link": "https://stackoverflow.com/questions/56978422/convert-python-dictionary-to-un-nested-json-object/56978506#56978506", "title": "Convert Python dictionary to un-nested JSON object", "body": "<p>You could zip your <code>names</code> and <code>types</code> arrays together and pass that to a list comprehension to make and array of dictionaries. Then dump to JSON:</p>\n\n<pre><code>import json\nschema = {'names': ['Field1', 'Field2', 'Field3'], 'type': ['STRING', 'STRING', 'INTEGER']}\n\n# assuming values is just those two lists otherwise spell out explicitly:\nl = [{\"names\":name, \"type\":field} for name, field in zip(*schema.values())] \n\njson.dumps(l)\n</code></pre>\n\n<p><strong>Result:</strong></p>\n\n<pre><code>'[{\"names\": \"Field1\", \"type\": \"STRING\"}, {\"names\": \"Field2\", \"type\": \"STRING\"}, {\"names\": \"Field3\", \"type\": \"INTEGER\"}]'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19246, "user_id": 494134, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/3XHKr.png?s=128&g=1", "display_name": "John Gordon", "link": "https://stackoverflow.com/users/494134/john-gordon"}, "is_accepted": false, "score": 0, "last_activity_date": 1562792223, "creation_date": 1562792223, "answer_id": 56978527, "question_id": 56978422, "link": "https://stackoverflow.com/questions/56978422/convert-python-dictionary-to-un-nested-json-object/56978527#56978527", "title": "Convert Python dictionary to un-nested JSON object", "body": "<p>Use <code>zip()</code> to get name/type pairs and build a list of small dictionaries:</p>\n\n<pre><code>schema = {'names': ['Field1', 'Field2', 'Field3'], 'type': ['STRING', 'STRING', 'INTEGER']}\n\ndata = []\nfor n,t in zip(schema['names'], schema['type']):\n    data.append({'name': n, 'type': t})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 349, "user_id": 8451440, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aHAp7.png?s=128&g=1", "display_name": "Oqhax", "link": "https://stackoverflow.com/users/8451440/oqhax"}, "is_accepted": false, "score": 0, "last_activity_date": 1562792382, "creation_date": 1562792382, "answer_id": 56978557, "question_id": 56978422, "link": "https://stackoverflow.com/questions/56978422/convert-python-dictionary-to-un-nested-json-object/56978557#56978557", "title": "Convert Python dictionary to un-nested JSON object", "body": "<p>By directly accessing the dictionary in a for loop, you can match each element of <code>names</code> and <code>type</code>:</p>\n\n<pre><code>schema = {'names': ['Field1', 'Field2', 'Field3'], 'type': ['STRING', 'STRING', \n'INTEGER']}\noutput = []\nnames = schema[\"names\"]\ntype = schema[\"type\"]\n\nfor i in range(len(schema[\"names\"])):\n    output.append({\"names\": names[i], \"type\": type[i]})\n\nprint(output)\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[{'names': 'Field1', 'type': 'STRING'}, {'names': 'Field2', 'type': 'STRING'}, {'names': 'Field3', 'type': 'INTEGER'}]\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8284384"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 56978506, "answer_count": 3, "score": 2, "last_activity_date": 1562792382, "creation_date": 1562791699, "question_id": 56978422, "link": "https://stackoverflow.com/questions/56978422/convert-python-dictionary-to-un-nested-json-object", "title": "Convert Python dictionary to un-nested JSON object", "body": "<p>I am seeking to use a Python dictionary with key: array pairs as a basis for constructing a database table. The dictionary is constructed as follows:</p>\n\n<pre><code>\nschema = {'names': ['Field1', 'Field2', 'Field3'], 'type': ['STRING', 'STRING', 'INTEGER']}\n\n</code></pre>\n\n<p>The resulting JSON data structure that I am seeking to produce would be, for lack of better phrasing, an array of JSON elements, as below: </p>\n\n<pre><code>[\n    {\n        'names': 'Field1',\n        'type': 'STRING'\n    },\n    {\n        'names': 'Field2',\n        'type': 'STRING'\n    },\n    {\n        'names': 'Field3',\n        'type': 'INTEGER'\n    }\n]\n</code></pre>\n\n<p>I have used the json module and attempted to do this as follows:</p>\n\n<pre><code>import json\nschema = {'names': ['Field1', 'Field2', 'Field3'], 'type': ['STRING', 'STRING', 'INTEGER']}\njson.dumps(schema)\n</code></pre>\n\n<p>However, it gives me:</p>\n\n<pre><code>'{\"names\": [\"Field1\", \"Field2\", \"Field3\"], \"type\": [\"STRING\", \"STRING\", \"INTEGER\"]}'\n</code></pre>\n\n<p>I can do this by constructing the  string using <code>{}.format(..)</code> but I wanted to see if there was a more efficient manner. I have searched through numerous threads but most threads seem to do the opposite of what I am seeking to do.</p>\n\n<p>Any pointers?</p>\n\n<p>Cheers.</p>\n"}, {"tags": ["python", "pandas", "datetime", "pandas-groupby"], "comments": [{"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1562793569, "post_id": 56978362, "comment_id": 100493539, "body": "Also just realized this seems to be the same as your other question, just with a slightly better example (here). @SergeBallesta provides the correct logic in his answer there to uniquely label groups. My solution turns out to be very similar, just slightly more compact, and without a merge. You might consider accepting his solution there, or closing as a duplicate."}], "answers": [{"tags": [], "owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "is_accepted": false, "score": 2, "last_activity_date": 1562793071, "last_edit_date": 1562793071, "creation_date": 1562792178, "answer_id": 56978520, "question_id": 56978362, "link": "https://stackoverflow.com/questions/56978362/how-to-assign-a-unique-id-for-different-groups-in-pandas-dataframe/56978520#56978520", "title": "How to assign a unique ID for different groups in pandas dataframe?", "body": "<p><code>sort</code> and find the time difference (<code>'td'</code>) for successive actions. <code>cumsum</code> a Boolean Series to form groups of successive actions within 30 minutes of the last. <code>ngroup</code> labels the groups.</p>\n\n<p>The <code>sort_index</code> before the groupby can be removed if you don't care which label the groups get, but this ensures they're ordered based on the original order.  </p>\n\n<pre><code>df = df.sort_values(['Name', 'Datetime'])\ndf['td'] = df.Datetime.diff().mask(df.Name.ne(df.Name.shift()))\n                             # Only calculate diff within same Name\ndf['Id'] = (df.sort_index()\n              .groupby(['Name', df['td'].gt(pd.Timedelta('30min')).cumsum()], sort=False)\n              .ngroup()+1)\ndf = df.sort_index()\n</code></pre>\n\n<h3>Output:</h3>\n\n<p><code>td</code> left in for clarity</p>\n\n<pre><code>     Name            Datetime       td  Id\n0     Bob 2018-04-26 12:00:00      NaT   1\n1  Claire 2018-04-26 12:00:00      NaT   2\n2     Bob 2018-04-26 12:10:00 00:10:00   1\n3     Bob 2018-04-26 12:30:00 00:20:00   1\n4   Grace 2018-04-27 08:30:00      NaT   3\n5     Bob 2018-04-27 09:30:00 21:00:00   4\n6     Bob 2018-04-27 09:40:00 00:10:00   4\n7     Bob 2018-04-27 10:00:00 00:20:00   4\n8     Bob 2018-04-27 10:30:00 00:30:00   4\n9     Bob 2018-04-27 11:30:00 01:00:00   5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22982, "user_id": 10189214, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oTTBaX3HSZQ/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7ohHVatc4khqXgYvNrBM40bMFj71Q/mo/photo.jpg?sz=128", "display_name": "Andy L.", "link": "https://stackoverflow.com/users/10189214/andy-l"}, "is_accepted": true, "score": 1, "last_activity_date": 1562807939, "creation_date": 1562807939, "answer_id": 56980477, "question_id": 56978362, "link": "https://stackoverflow.com/questions/56978362/how-to-assign-a-unique-id-for-different-groups-in-pandas-dataframe/56980477#56980477", "title": "How to assign a unique ID for different groups in pandas dataframe?", "body": "<p>Your explanation at the near bottom is really helpful to understand it. </p>\n\n<p>You need to groupby on <code>Name</code> and a <code>groupID</code> (don't confuse this <code>groupID</code> with your final <code>Id</code>) and call <code>ngroup</code> to return <code>Id</code>. The main thing is how to define this <code>groupID</code>. To create <code>groupID</code>, you need <code>sort_values</code> to separate each <code>Name</code> and <code>Datetime</code> into ascending order. Groupby <code>Name</code> and find differences in <code>Datetime</code> between consecutive rows within each group of <code>Name</code> (within the same <code>Name</code>). Using <code>gt</code> to check greater than 30mins and <code>cumsum</code> to get <code>groupID</code>. <code>sort_index</code> to reverse back to original order and assign to <code>s</code> as follows:</p>\n\n<pre><code>s = df.sort_values(['Name','Datetime']).groupby('Name').Datetime.diff() \\\n      .gt(pd.Timedelta(minutes=30)).cumsum().sort_index()\n</code></pre>\n\n<p>Next, groupby <code>Name</code> and <code>s</code> with <code>sort=False</code> to reserve the original order and call <code>ngroup</code> plus 1.</p>\n\n<pre><code>df['Id'] = df.groupby(['Name', s], sort=False).ngroup().add(1)\n\nOut[834]:\n     Name            Datetime  Id\n0     Bob 2018-04-26 12:00:00   1\n1  Claire 2018-04-26 12:00:00   2\n2     Bob 2018-04-26 12:10:00   1\n3     Bob 2018-04-26 12:30:00   1\n4   Grace 2018-04-27 08:30:00   3\n5     Bob 2018-04-27 09:30:00   4\n6     Bob 2018-04-27 09:40:00   4\n7     Bob 2018-04-27 10:00:00   4\n8     Bob 2018-04-27 10:30:00   4\n9     Bob 2018-04-27 11:30:00   5\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 3873482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7203568e60a40b81aed84853074741c?s=128&d=identicon&r=PG&f=1", "display_name": "Jupyter", "link": "https://stackoverflow.com/users/3873482/jupyter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1249, "favorite_count": 0, "accepted_answer_id": 56980477, "answer_count": 2, "score": 2, "last_activity_date": 1562807939, "creation_date": 1562791400, "question_id": 56978362, "link": "https://stackoverflow.com/questions/56978362/how-to-assign-a-unique-id-for-different-groups-in-pandas-dataframe", "title": "How to assign a unique ID for different groups in pandas dataframe?", "body": "<p>How to assign unique IDs to groups created in pandas dataframe based on certain conditions. \nFor example: I have a dataframe named as df with the following structure:Name identifies the user, and datetime identifies the date/time at which the user is accessing a resource.</p>\n\n<pre><code>Name         Datetime \nBob          26-04-2018 12:00:00 \nClaire       26-04-2018 12:00:00 \nBob          26-04-2018 12:10:00 \nBob          26-04-2018 12:30:00 \nGrace        27-04-2018 08:30:00 \nBob          27-04-2018 09:30:00 \nBob          27-04-2018 09:40:00 \nBob          27-04-2018 10:00:00 \nBob          27-04-2018 10:30:00 \nBob          27-04-2018 11:30:00\n</code></pre>\n\n<p>I would like to create sessions for the users such that, users with same name and datetime values accessing the resource do not exceed more than 30 minutes would be assigned a unique session. However, if the user shows some inactivity for more than 30 minutes in accessing the resource, the same user would be assigned a different session for the next time user access the resource. </p>\n\n<p>My expected output would be as shown. </p>\n\n<p>User Bob on 27-04-2018, accessed the resource at 9.30, second time @ 9.40, third time @ 10.00, fourth time @10.30 -> all with Session 4. But next time user Bob access @ 11.30 so time difference exceeds 30 minutes as Bob has been inactive for more than 30 minutes, so next session would be assigned to him. </p>\n\n<pre><code>Name         Datetime                    Id\nBob          26-04-2018 12:00:00          1\nClaire       26-04-2018 12:00:00          2\nBob          26-04-2018 12:10:00          1\nBob          26-04-2018 12:30:00          1\nGrace        27-04-2018 08:30:00          3\nBob          27-04-2018 09:30:00          4\nBob          27-04-2018 09:40:00          4\nBob          27-04-2018 10:00:00          4\nBob          27-04-2018 10:30:00          4\nBob          27-04-2018 11:30:00          5\n</code></pre>\n\n<p>Thank you for your help!\nLink to previous question: <a href=\"https://stackoverflow.com/q/56960065/3873482\">How to compare value of second column with same values of first column in pandas dataframe?</a></p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 151, "user_id": 2871769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e13bc98b809a69fc1b122bda33d146b?s=128&d=identicon&r=PG", "display_name": "Skapin", "link": "https://stackoverflow.com/users/2871769/skapin"}, "edited": false, "score": 0, "creation_date": 1562791821, "post_id": 56978345, "comment_id": 100492907, "body": "Can you explain more or output sample for the L2*L1 result ? I dont really understand what is should do. (waht are your 16 cat and 9 mesurement ?.) thank you"}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "edited": false, "score": 0, "creation_date": 1562792012, "post_id": 56978345, "comment_id": 100492986, "body": "How to aggregate the for measurements?  Sum, Mean, Max, Min?"}, {"owner": {"reputation": 4057, "user_id": 8285811, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/C38qo.jpg?s=128&g=1", "display_name": "Akaisteph7", "link": "https://stackoverflow.com/users/8285811/akaisteph7"}, "edited": false, "score": 0, "creation_date": 1562793357, "post_id": 56978345, "comment_id": 100493454, "body": "What would the actual values in the grid be for this example?"}, {"owner": {"reputation": 113, "user_id": 11312094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ff8b3a22399c4a46ec8f28307b7a39?s=128&d=identicon&r=PG&f=1", "display_name": "Laars Helenius", "link": "https://stackoverflow.com/users/11312094/laars-helenius"}, "edited": false, "score": 0, "creation_date": 1562793389, "post_id": 56978345, "comment_id": 100493467, "body": "I am computing the KL-divergence of a Gaussian Mixture Model. For each pair of rows, I compute a before mixture and an after mixture, then compute the divergence between the two mixtures. Each row pair provides the 8 parameters I need to perform the calculation and I aggregate each category with an arithmetic average."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 11312094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ff8b3a22399c4a46ec8f28307b7a39?s=128&d=identicon&r=PG&f=1", "display_name": "Laars Helenius", "link": "https://stackoverflow.com/users/11312094/laars-helenius"}, "edited": false, "score": 1, "creation_date": 1562809161, "post_id": 56979132, "comment_id": 100496868, "body": "Thank you! This is exactly what I was looking for! I see how to make this work for my problem. The function is a Simpson Rule approximation for an improper integral. The integrable function consists of two Gaussian Mixture model distributions, p and q, that are combined as p*log(p/q). So its a bit involved and completely tangental to this, so I omitted it."}], "tags": [], "owner": {"reputation": 2751, "user_id": 10888655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kQFKi.png?s=128&g=1", "display_name": "run-out", "link": "https://stackoverflow.com/users/10888655/run-out"}, "is_accepted": true, "score": 1, "last_activity_date": 1562797246, "last_edit_date": 1562797246, "creation_date": 1562795590, "answer_id": 56979132, "question_id": 56978345, "link": "https://stackoverflow.com/questions/56978345/evaluating-a-function-using-all-possible-row-pairs/56979132#56979132", "title": "Evaluating a function using all possible row pairs", "body": "<p>I have maybe a partial answer for you, but since I'm not clear on your functions, I'll leave that part to you. </p>\n\n<p>First step is to get a list of all the possible pair combinations: </p>\n\n<pre><code>from itertools import combinations as cb\npairs = list(cb(range(11), 2))\nprint(pairs)\n\n[(0, 1), (0, 2), (0, 3), (0, 4), (0, 5), (0, 6), (0, 7), (0, 8), (0, 9), (0, 10), (1, 2), (1, 3), (1, 4), (1, 5), (1, 6), (1, 7), (1, 8), (1, 9), (1, 10), (2, 3), (2, 4), (2, 5), (2, 6), (2, 7), (2, 8), (2, 9), (2, 10), (3, 4), (3, 5), (3, 6), (3, 7), (3, 8), (3, 9), (3, 10), (4, 5), (4, 6), (4, 7), (4, 8), (4, 9), (4, 10), (5, 6), (5, 7), (5, 8), (5, 9), (5, 10), (6, 7), (6, 8), (6, 9), (6, 10), (7, 8), (7, 9), (7, 10), (8, 9), (8, 10), (9, 10)]\n</code></pre>\n\n<p>If you are looking for all possible combinations in either direction use itertools.product</p>\n\n<p>If you insert one of these pairs into df.loc you get: </p>\n\n<pre><code>df.loc[(0,1),:]\n</code></pre>\n\n<p>giving...</p>\n\n<pre><code> Picture_Type  Before Mean  Before StdDev  After Mean  After StdDev\n0           L1            9            1.0           6           0.7\n1           L1           10            1.1           7           0.8\n</code></pre>\n\n<p>Then iterate through these pairs to create all combinations of rows, at which point you can apply your functions and recreate a new dataframe. </p>\n\n<pre><code>for n in range(len(pairs)):\n    print('\\npair...', pairs[n])\n    df_pair = df.loc[pairs[n],:]\n    s1 = df_pair.iloc[0]\n    s2 = df_pair.iloc[1]\n\n    print(\"Series 1\\n\", s1)\n    print(\"Series 2\\n\", s2)\n\n\n\npair... (0, 1)\nSeries 1\n Picture_Type      L1\nBefore Mean        9\nBefore StdDev      1\nAfter Mean         6\nAfter StdDev     0.7\nName: 0, dtype: object\nSeries 2\n Picture_Type      L1\nBefore Mean       10\nBefore StdDev    1.1\nAfter Mean         7\nAfter StdDev     0.8\nName: 1, dtype: object\n\npair... (0, 2)\nSeries 1\n Picture_Type      L1\nBefore Mean        9\nBefore StdDev      1\nAfter Mean         6\nAfter StdDev     0.7\nName: 0, dtype: object\nSeries 2\n Picture_Type      L1\nBefore Mean       11\nBefore StdDev    1.2\nAfter Mean         8\nAfter StdDev     0.9\nName: 2, dtype: object\n\n...etc...\n</code></pre>\n\n<p>**EDIT</p>\n\n<p>I will try to add the rest of what you might be looking for but I'm not  sure about the equations, so I will use a simple substitute equation.</p>\n\n<p>OK Lets say for simplicity sake your are adding Before Mean to Before StdDev and After Mean to After StdDev, and for both rows, than subtracting them from each other. </p>\n\n<p>If you enter each pair into a df.loc you get the following: </p>\n\n<pre><code>result_dict = {}\nfor n in range(len(pairs)):\n    df_pair = df.loc[pairs[n],:]\n    s1 = df_pair.iloc[0]\n    s2 = df_pair.iloc[1]\n\n    s1_b = s1['Before Mean'] + s1['Before StdDev']\n    s1_a = s1['After Mean'] + s1['After StdDev']\n    s2_b = s2['Before Mean'] + s2['Before StdDev']\n    s2_a = s2['After Mean'] + s2['After StdDev']\n\n    result = (s1_a - s1_b) - (s2_a - s2_b)\n\n    result_dict[pairs[n]] = s1['Picture_Type'], s2['Picture_Type'], result\n\ndf_result = pd.DataFrame.from_dict(result_dict).T\n\ndf_result.columns = ['PT1', 'PT2','result']   \ndf_result.groupby([\"PT1\", \"PT2\"]).sum().unstack(1)\n\n\n   result                  \nPT2     L1    L2    L3    L4\nPT1                         \nL1     0.0   0.0  38.7  40.2\nL2     0.0   0.0  38.7  40.2\nL3   -38.7 -38.7   0.0  14.4\nL4   -40.2 -40.2 -14.4   0.0\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 11312094, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ff8b3a22399c4a46ec8f28307b7a39?s=128&d=identicon&r=PG&f=1", "display_name": "Laars Helenius", "link": "https://stackoverflow.com/users/11312094/laars-helenius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 56979132, "answer_count": 1, "score": 0, "last_activity_date": 1562797246, "creation_date": 1562791325, "last_edit_date": 1562793976, "question_id": 56978345, "link": "https://stackoverflow.com/questions/56978345/evaluating-a-function-using-all-possible-row-pairs", "title": "Evaluating a function using all possible row pairs", "body": "<p>Using pandas in Python 3, I have created a dataframe. Multiple measurements were taken under 4 different sets of conditions (L1, L2, L3, L4) and each row is a specific measurement containing distribution parameters for pixel brightness in a photograph before and after an event. Here is an example I invented for our discussion:</p>\n\n<pre><code>Data = {'Picture_Type' : ['L1','L1','L1','L2','L2','L2','L3','L3','L3',\n                          'L4','L4','L4'],\n        'Before Mean' : [9,10,11,14,16,18,26,29,32,37,40,43],\n        'Before StdDev' : [1,1.1,1.2,0.7,0.8,0.9,2.1,2.3,2.5,1.5,1.6,1.7],\n        'After Mean' : [6,7,8,11,12,13,19,21,23,27,30,33],\n        'After StdDev' : [0.7,0.8,0.9,1.3,1.5,1.7,2.5,2.7,2.9,1.5,1.6,1.7]}\ndf = DataFrame(Data)\nprint(df)\n\n   Picture_Type  Before Mean  Before StdDev  After Mean  After StdDev\n0            L1            9            1.0           6           0.7\n1            L1           10            1.1           7           0.8\n2            L1           11            1.2           8           0.9\n3            L2           14            0.7          11           1.3\n4            L2           16            0.8          12           1.5\n5            L2           18            0.9          13           1.7\n6            L3           26            2.1          19           2.5\n7            L3           29            2.3          21           2.7\n8            L3           32            2.5          23           2.9\n9            L4           37            1.5          27           1.5\n10           L4           40            1.6          30           1.6\n11           L4           43            1.7          33           1.7\n</code></pre>\n\n<p>I need to evaluate a function that requires input from all possible row pairings and I would like to aggregate those calculations by 'Picture_Type' so that I end up with a grid like this:</p>\n\n<pre><code>     L1    L2    L3    L4\nL1    *     *     *     *\nL2    *     *     *     *   \nL3    *     *     *     *  \nL4    *     *     *     *\n</code></pre>\n\n<p>where * would be the aggregated result for the row/column combination in which it appears. </p>\n\n<p>I am computing the KL-divergence of a Gaussian Mixture Model. For each pair of rows, I compute a mixture of \"before\" distributions and a mixture of \"after\" distributions, then compute the divergence between the two mixtures. Each row pair provides the 8 parameters I need to perform the calculation and I aggregate each category with an arithmetic average. Thus in this example, I would perform 144 distinct calculations (as there are 12x12 row pairings) and sort them into 16 categories (L1&amp;L1, L1&amp;L2, L1&amp;L3, L1&amp;L4, L2&amp;L1, \u2026) and each category would be an average of the 9 measurement pairs in each category. </p>\n\n<p>I have already figured out the code for my calculations, but I just can't see how to step through all the combinations and organize the results. I thought about computing the required value for each row pair and binning them according to the 'Picture_Type' pairing, but I can't see how to pull that off.</p>\n\n<p>I have been looking around for other code examples and I have found bits and pieces that might be useful, but I cannot see how to pull it together. I am new to all this and am learning on the fly at work, but if anyone can point me in the proper direction I would certainly appreciate it.</p>\n"}, {"tags": ["python", "python-3.x", "ansible", "ansible-inventory"], "comments": [{"owner": {"reputation": 1339, "user_id": 2597174, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/nviLD.png?s=128&g=1", "display_name": "c4f4t0r", "link": "https://stackoverflow.com/users/2597174/c4f4t0r"}, "edited": false, "score": 0, "creation_date": 1562792266, "post_id": 56978338, "comment_id": 100493079, "body": "@path ansible_python_interpreter = The target host python path. This is useful for systems with more than one Python or not located at /usr/bin/python such as *BSD, or where /usr/bin/python is not a 2.X series Python. We do not use the /usr/bin/env mechanism as that requires the remote user\u2019s path to be set right and also assumes the python executable is named python, where the executable might be named something like python2.6."}], "answers": [{"comments": [{"owner": {"reputation": 140, "user_id": 6525097, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/44b3fdba428fdb30f6ca93ae9b279556?s=128&d=identicon&r=PG&f=1", "display_name": "Pasha", "link": "https://stackoverflow.com/users/6525097/pasha"}, "edited": false, "score": 1, "creation_date": 1562858453, "post_id": 56978505, "comment_id": 100519502, "body": "Thank you! inventory plugin is working like a charm. FYI.. shebang <code>#!&#47;usr&#47;bin&#47;env python</code>  is not working, it&#39;s still using the default python."}], "tags": [], "owner": {"reputation": 13034, "user_id": 139652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b61db19a5ed7a7fea733b6c05b58b78?s=128&d=identicon&r=PG", "display_name": "nitzmahone", "link": "https://stackoverflow.com/users/139652/nitzmahone"}, "is_accepted": true, "score": 1, "last_activity_date": 1562792111, "creation_date": 1562792111, "answer_id": 56978505, "question_id": 56978338, "link": "https://stackoverflow.com/questions/56978338/ansible-dynamic-inventory-python-interpreter-issue/56978505#56978505", "title": "Ansible dynamic inventory python interpreter issue", "body": "<p>Ansible inventory scripts don't receive any special Python substitution behavior like modules do. Since they can be written in any language, the only requirement is that the execute bit is set and a valid shebang is in place. So it's going to literally run whatever the shebang says.</p>\n\n<p>A couple of options:</p>\n\n<ul>\n<li>Make the shebang on the inventory script <code>#!/usr/bin/env python</code> - that should inherit the venv Python from the controller.</li>\n<li>Rewrite the inventory script as an <a href=\"https://docs.ansible.com/ansible/latest/dev_guide/developing_inventory.html#inventory-plugins\" rel=\"nofollow noreferrer\">inventory plugin</a>. It's more complex, but a lot more flexible, and runs inside the controller, so sidesteps any Python configuration issues once your controller is working properly.</li>\n</ul>\n"}], "owner": {"reputation": 140, "user_id": 6525097, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/44b3fdba428fdb30f6ca93ae9b279556?s=128&d=identicon&r=PG&f=1", "display_name": "Pasha", "link": "https://stackoverflow.com/users/6525097/pasha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 997, "favorite_count": 0, "accepted_answer_id": 56978505, "answer_count": 1, "score": 0, "last_activity_date": 1562792111, "creation_date": 1562791291, "question_id": 56978338, "link": "https://stackoverflow.com/questions/56978338/ansible-dynamic-inventory-python-interpreter-issue", "title": "Ansible dynamic inventory python interpreter issue", "body": "<p>I am trying to run a playbook from virtualenv and I am using ansible-dynamic inventory script. \nProblem is: The inventory script is using default system interpreter not the one I have passed using \"ansible_python_interpreter\" variable.</p>\n\n<p>The playbook works fine if activate virtualenv and run from the command line. Also, the inventory script works fine when I run using <code>/opt/myproj/.ve/bin/python3.6 inv.py</code>. \nBut the playbook is invoked remotely by a different python script, not from the command line.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>/opt/myproj/.ve/bin/ansible-playbook playbooks/rotate_passwords.yml -i inv.py -e ansible_python_interpreter=/opt/myproj/.ve/bin/python3.6 -vvv\nansible-playbook 2.7.10\n  config file = /opt/myproj/ansible.cfg\n  configured module search path = ['/opt/myproj/library']\n  ansible python module location = /opt/myproj/.ve/lib64/python3.6/site-packages/ansible\n  executable location = /opt/myproj/.ve/bin/ansible-playbook\n  python version = 3.6.8 (default, Apr 25 2019, 21:02:35) [GCC 4.8.5 20150623 (Red Hat 4.8.5-36)]\nUsing /opt/myproj/ansible.cfg as config file\nsetting up inventory plugins\n/opt/myproj/inv.py did not meet host_list requirements, check plugin documentation if this is unexpected\n/opt/myproj/inv.py did not meet yaml requirements, check plugin documentation if this is unexpected\n/opt/myproj/inv.py did not meet auto requirements, check plugin documentation if this is unexpected\n [WARNING]:  * Failed to parse /opt/myproj/inv.py with script plugin: Inventory script (/opt/myproj/inv.py) had an execution error: Traceback (most recent call last):\nFile \"/opt/myproj/inv.py\", line 11, in &lt;module&gt;     import pymysql.cursors ModuleNotFoundError: No module named 'pymysql'\n\n</code></pre>\n\n<p>I expect the inv.py should get invoked with given ansible_python_interpreter where I have installed all pip modules.</p>\n"}, {"tags": ["python", "pandas"], "answers": [{"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": -1, "last_activity_date": 1562791388, "creation_date": 1562791388, "answer_id": 56978359, "question_id": 56978269, "link": "https://stackoverflow.com/questions/56978269/how-to-find-all-the-rows-with-same-specific-value-for-a-column-that-is-repeated/56978359#56978359", "title": "How to find all the rows with same specific value for a column that is repeated specific time in the dataset?", "body": "<p>IIUC, you can make do with <code>groupby().transform</code>:</p>\n\n<pre><code>df[df.groupby('A').B.transform('size').eq(2)]\n</code></pre>\n\n<p>gives</p>\n\n<pre><code>    A   B\n1   2   no\n2   3   no\n3   2   yes\n4   3   no\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 10230809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a108926c7f28003395616342da104a7?s=128&d=identicon&r=PG&f=1", "display_name": "ebramos", "link": "https://stackoverflow.com/users/10230809/ebramos"}, "edited": false, "score": 0, "creation_date": 1562796458, "post_id": 56978395, "comment_id": 100494382, "body": "Thank you. What if I had another column &quot;C&quot;?"}], "tags": [], "owner": {"reputation": 238133, "user_id": 2336654, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/Mqqfo.png?s=128&g=1", "display_name": "piRSquared", "link": "https://stackoverflow.com/users/2336654/pirsquared"}, "is_accepted": false, "score": 2, "last_activity_date": 1562796737, "last_edit_date": 1562796737, "creation_date": 1562791541, "answer_id": 56978395, "question_id": 56978269, "link": "https://stackoverflow.com/questions/56978269/how-to-find-all-the-rows-with-same-specific-value-for-a-column-that-is-repeated/56978395#56978395", "title": "How to find all the rows with same specific value for a column that is repeated specific time in the dataset?", "body": "<pre><code>g = df.groupby('A')\nc = g.cumcount() + 1\ns = g.A.transform('size').to_numpy()\n\ndf.set_index(['A', c]).B[s == 2].unstack().add_prefix('B').reset_index()\n\n   A  B1   B2\n0  2  no  yes\n1  3  no   no\n</code></pre>\n\n<hr>\n\n<p>If you have more columns</p>\n\n<pre><code>g = df.groupby('A')\nc = g.cumcount() + 1\ns = g.A.transform('size').to_numpy()\n\n\nd = df.set_index(['A', c])[s == 2].unstack()\nd.columns = [f'{a}{b}' for a, b in d.columns]\nd.reset_index()\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 10230809, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a108926c7f28003395616342da104a7?s=128&d=identicon&r=PG&f=1", "display_name": "ebramos", "link": "https://stackoverflow.com/users/10230809/ebramos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574203266, "creation_date": 1562791017, "last_edit_date": 1574203266, "question_id": 56978269, "link": "https://stackoverflow.com/questions/56978269/how-to-find-all-the-rows-with-same-specific-value-for-a-column-that-is-repeated", "title": "How to find all the rows with same specific value for a column that is repeated specific time in the dataset?", "body": "<p>I have a pandas database for which i want to find all the rows that have same value for column <code>A</code> and are repeated specific amount of time (I call it <code>size</code>):</p>\n\n<pre><code>   A    B\n0  1  yes\n1  2   no\n2  3   no\n3  2  yes\n4  3   no\n5  4  yes\n</code></pre>\n\n<p>So if i have <code>size = 2</code>, only column values 2 and 3 are repeated 2 times in column <code>A</code>, so the result should be like this:</p>\n\n<pre><code>   A   B1   B2\n0  2   no  yes\n1  3  yes   no\n</code></pre>\n\n<p>I have done this code, but it is kinda slow for large data since it uses <code>for</code> loop, so i am looking for suggestion to improve:</p>\n\n<pre><code>def load_data(self, size):\n        '''Creates a data frame of all orders with number of items in that order equals to argument size'''\n        data = pd.read_csv(self.file_name, sep=\"\\t\", header=0, \n\n        #grouping\n        grouping = data.groupby('A')\n        df =  grouping.filter(lambda x: len(x) == size) #filters all the data with specific size\n        values = []\n        for i in range(0, len(df)):\n            if i% size == 0:\n                dat = df[i: i+size]\n                temp = dat[['B']]\n                temp_values = np.append(df.iloc[i][0], temp.values.flatten())\n                values.append(temp_values)\n\n        new_df = pd.DataFrame(np.array(values))\n        return new_df\n</code></pre>\n"}, {"tags": ["python", "google-maps", "latitude-longitude", "compass-geolocation"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10576706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6072daa8bebcbdb6c4f0c71d8652a95?s=128&d=identicon&r=PG&f=1", "display_name": "KPH3802", "link": "https://stackoverflow.com/users/10576706/kph3802"}, "edited": false, "score": 0, "creation_date": 1562791559, "post_id": 56978346, "comment_id": 100492812, "body": "This works. Thank you! I thought it had to be one variable."}], "tags": [], "owner": {"reputation": 100, "user_id": 8901518, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecc57d31bdae60cae40d2fcd3fa0fad1?s=128&d=identicon&r=PG", "display_name": "G1N", "link": "https://stackoverflow.com/users/8901518/g1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1562791332, "creation_date": 1562791332, "answer_id": 56978346, "question_id": 56978265, "link": "https://stackoverflow.com/questions/56978265/how-do-i-convert-two-floats-of-latitude-and-longitude-into-google-maps-latlng/56978346#56978346", "title": "How do I convert two floats of latitude and longitude into Google Maps latlng?", "body": "<p>Your <code>lat</code> and <code>long</code> variables aren't being inserted in the <code>target_url</code> string. You'll need to do something like:</p>\n\n<pre><code>target_url = ('https://maps.googleapis.com/maps/api/geocode/json?'\n          'latlng={lat},{long}&amp;key={gkey}').format(lat=lat,long=long,gkey=gkey)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 151, "user_id": 2871769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e13bc98b809a69fc1b122bda33d146b?s=128&d=identicon&r=PG", "display_name": "Skapin", "link": "https://stackoverflow.com/users/2871769/skapin"}, "is_accepted": false, "score": 0, "last_activity_date": 1562791427, "creation_date": 1562791427, "answer_id": 56978367, "question_id": 56978265, "link": "https://stackoverflow.com/questions/56978265/how-do-i-convert-two-floats-of-latitude-and-longitude-into-google-maps-latlng/56978367#56978367", "title": "How do I convert two floats of latitude and longitude into Google Maps latlng?", "body": "<p>You should use, like you did with gkey, concatate your variable. You can do it in several way.</p>\n\n<p>For example:</p>\n\n<pre><code>target_url = ('https://maps.googleapis.com/maps/api/geocode/json?'\n          'latlng='+str(lat)+','+str(long)+'&amp;key={0}').format(gkey)\n</code></pre>\n\n<p>or somehting like </p>\n\n<pre><code>target_url = ('https://maps.googleapis.com/maps/api/geocode/json?latlng={0},{1}&amp;key={2}').format(lat, long, gkey)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 10150194, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-lnJgusljJ90/AAAAAAAAAAI/AAAAAAAAAkg/66Wd9s2JQXA/photo.jpg?sz=128", "display_name": "SpacePatroller", "link": "https://stackoverflow.com/users/10150194/spacepatroller"}, "is_accepted": false, "score": 0, "last_activity_date": 1562792762, "creation_date": 1562792762, "answer_id": 56978639, "question_id": 56978265, "link": "https://stackoverflow.com/questions/56978265/how-do-i-convert-two-floats-of-latitude-and-longitude-into-google-maps-latlng/56978639#56978639", "title": "How do I convert two floats of latitude and longitude into Google Maps latlng?", "body": "<p>Maybe try this?</p>\n\n<pre><code>import pandas as pd\n\ndf = pd.DataFrame({'lat':[34.052898,34.052898,34.052898],\n     'long':[-118.241562,-118.241562,-118.241562]})\n\ndf\n\nfor index, row in df.iterrows():\n\n    latlng = lat + long\n\n    print(latlng)\n</code></pre>\n\n<blockquote>\n  <p>[34.052898, -118.241562]\n  [34.052898, -118.241562]\n  [34.052898, -118.241562]</p>\n</blockquote>\n\n<pre><code>lat = row[\"Starting Station Latitude\"]\n    long = row[\"Starting Station Longitude\"]\n\n\n    target_url = ('https://maps.googleapis.com/maps/api/geocode/json?'\n              'latlng=lat,long&amp;key={0}').format(gkey)\n    response = requests.get(target_url).json()\n\n    try:\n        print(response['results'][0]['address_components'][7] . \n         ['long_name'])\n    except:\n        print(f\"Could not {index} find zip\")\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 10576706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6072daa8bebcbdb6c4f0c71d8652a95?s=128&d=identicon&r=PG&f=1", "display_name": "KPH3802", "link": "https://stackoverflow.com/users/10576706/kph3802"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 167, "favorite_count": 0, "answer_count": 3, "score": -2, "last_activity_date": 1562792762, "creation_date": 1562790984, "question_id": 56978265, "link": "https://stackoverflow.com/questions/56978265/how-do-i-convert-two-floats-of-latitude-and-longitude-into-google-maps-latlng", "title": "How do I convert two floats of latitude and longitude into Google Maps latlng?", "body": "<p>I have the latitude and longitude of places in a dataframe. I am looking to get the zip code using Google Maps API.  Now I am trying to write a loop to do this and it won't work. The problem is the gmaps variable <code>latlng</code> How do I get two floats that are my variables into one variable that is <code>latlng</code>?</p>\n\n<p>I have successfully done this went I \"hardcode\" in the coordinates.</p>\n\n<pre><code>for index, row in bike_df.iterrows():\n\n    lat = row[\"Starting Station Latitude\"]\n    long = row[\"Starting Station Longitude\"]\n\n\n    target_url = ('https://maps.googleapis.com/maps/api/geocode/json?'\n              'latlng=34.052898,-118.241562&amp;key={0}').format(gkey)\n    response = requests.get(target_url).json()\n\n    try:\n        print(response['results'][0]['address_components'][7]['long_name'])\n    except:\n        print(f\"Could not {index} find zip\")\n</code></pre>\n\n<pre><code>for index, row in bike_df.iterrows():\n\n    lat = row[\"Starting Station Latitude\"]\n    long = row[\"Starting Station Longitude\"]\n\n\n    target_url = ('https://maps.googleapis.com/maps/api/geocode/json?'\n              'latlng=lat,long&amp;key={0}').format(gkey)\n    response = requests.get(target_url).json()\n\n    try:\n        print(response['results'][0]['address_components'][7] . \n         ['long_name'])\n    except:\n        print(f\"Could not {index} find zip\")\n</code></pre>\n\n<p>It just runs and runs without any output.</p>\n"}, {"tags": ["python", "json"], "answers": [{"tags": [], "owner": {"reputation": 76753, "user_id": 1026459, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pv5mS.png?s=128&g=1", "display_name": "Travis J", "link": "https://stackoverflow.com/users/1026459/travis-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1562791678, "creation_date": 1562791678, "answer_id": 56978413, "question_id": 56978247, "link": "https://stackoverflow.com/questions/56978247/how-can-i-return-more-than-one-json-element-for-each-prediction-from-a-toy-machi/56978413#56978413", "title": "How can I return more than one JSON element for each prediction from a toy machine learning API that I have built?", "body": "<p>You cannot return more than one json string. You would just use more data structure. </p>\n\n<p>In order to compose a large infographic, it may make sense to simply pass the entire set of data along as well (so long as it doesn't contain anything too personal or secure, etc., if it does strip it out first server side).</p>\n\n<pre><code>return jsonify(\n    {\n            'data': X,\n            'predictions': str(predictions)\n    }\n)\n</code></pre>\n\n<p>Then on your front end manipulate the connection between various data points and outcomes.</p>\n"}, {"comments": [{"owner": {"reputation": 5924, "user_id": 636987, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/080dab36cef0f86aa173256c277152e6?s=128&d=identicon&r=PG", "display_name": "Mus", "link": "https://stackoverflow.com/users/636987/mus"}, "edited": false, "score": 1, "creation_date": 1562792801, "post_id": 56978417, "comment_id": 100493267, "body": "Thank you, but I am still receiving an error here: <code>TypeError: Object of type function is not JSON serializable</code>.  Also, the data are actually passed in as a CSV file (remember - this is a toy API, although real requests can indeed be made), and the data themselves take the following structure: <code>{&quot;Sex&quot;: [&quot;M&quot;, &quot;F&quot;, &quot;M&quot;, &quot;M&quot;], &quot;Age&quot;: [10, 33, 32, 48], &quot;Class&quot;: [3, 1, 2, 1]}</code> and so on."}, {"owner": {"reputation": 354, "user_id": 976299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2g0yV.jpg?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/976299/casey"}, "reply_to_user": {"reputation": 5924, "user_id": 636987, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/080dab36cef0f86aa173256c277152e6?s=128&d=identicon&r=PG", "display_name": "Mus", "link": "https://stackoverflow.com/users/636987/mus"}, "edited": false, "score": 0, "creation_date": 1562813989, "post_id": 56978417, "comment_id": 100497689, "body": "@MusTheDataGuy <a href=\"https://pastebin.com/qXRxrHHQ\" rel=\"nofollow noreferrer\">this</a> code worked for me. Let me know if this is what you were looking for. I am not familiar with jsonify."}], "tags": [], "owner": {"reputation": 354, "user_id": 976299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2g0yV.jpg?s=128&g=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/976299/casey"}, "is_accepted": false, "score": 0, "last_activity_date": 1562792018, "last_edit_date": 1562792018, "creation_date": 1562791687, "answer_id": 56978417, "question_id": 56978247, "link": "https://stackoverflow.com/questions/56978247/how-can-i-return-more-than-one-json-element-for-each-prediction-from-a-toy-machi/56978417#56978417", "title": "How can I return more than one JSON element for each prediction from a toy machine learning API that I have built?", "body": "<p>Assuming your dictionary for person attributes looks like this:\n<code>X = {'Sex': ['M', 'F', 'M', 'M']</code>\nAnd predictions are like so:\n<code>predictions = [0, 0, 0, 1]</code></p>\n\n<p>Then we can zip together the two arrays, and for each iteration, we output them as a tuple into an array.\nExample in Python: </p>\n\n<p><code>result = \n{\n    'predictions': [(sex, predict) for sex, prediction in zip(X['Sex'], predictions)]\n}</code></p>\n"}], "owner": {"reputation": 5924, "user_id": 636987, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/080dab36cef0f86aa173256c277152e6?s=128&d=identicon&r=PG", "display_name": "Mus", "link": "https://stackoverflow.com/users/636987/mus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1562792968, "creation_date": 1562790861, "last_edit_date": 1562792968, "question_id": 56978247, "link": "https://stackoverflow.com/questions/56978247/how-can-i-return-more-than-one-json-element-for-each-prediction-from-a-toy-machi", "title": "How can I return more than one JSON element for each prediction from a toy machine learning API that I have built?", "body": "<p>I have built a toy machine learning API which returns predictions as to whether or not guests aboard the Titanic are likely to have died or not based on their personal details (age, sex, price paid, class, etc.).</p>\n\n<p>My script returns a JSON output as such:</p>\n\n<pre><code>return jsonify({'predictions': str(predictions)})\n</code></pre>\n\n<p>Is it possible, however, to return specific elements such as price paid, sex, age, etc. (or even the entire row details) along with the prediction?</p>\n\n<p>At present, the output looks like this (predictions only, each <code>1</code>/<code>0</code> representing the prediction as to whether or not each observed passenger will survive):</p>\n\n<pre><code>{\n    \"predictions\": \"[0, 0, 0, 0, 0, 0, 1, ...]\"\n}\n</code></pre>\n\n<p>I have attempted a couple of solutions whereby I display each guest's <code>Sex</code> alongside the prediction (where <code>X</code> is a <code>pandas</code> DataFrame) like this:</p>\n\n<pre><code>return jsonify(\n        {\n            'predictions': str(X[\"Sex\"], predictions)\n        }\n)\n</code></pre>\n\n<p>But receive an error:</p>\n\n<pre><code>TypeError: str() argument 2 must be str, not list\n</code></pre>\n\n<p>I then tried:</p>\n\n<pre><code>return jsonify(\n        {\n                'name': str(X[\"Sex\"]),\n                'predictions': str(predictions)\n        }\n)\n</code></pre>\n\n<p>But this returns first the list of <code>Sex</code> values and then the predictions (which is what I expected, but I wasn't certain). (Note that <code>True</code> represents <code>MALE</code>/<code>M</code> and <code>False</code> represents <code>FEMALE</code>/<code>F</code>.)</p>\n\n<pre><code>{\n    \"name\": \"0      False\\n1       True\\n2      False\\n3       True\\n4      False\\n5       True\\n6      False\\n7       True\\n8      False\\n9      False\\n10 ...\",\n    \"predictions\": \"[0, 0, 0, 0, 0, 0, 1, 0, 1, 1, ...]\"\n}\n</code></pre>\n\n<p>How can I achieve the result of presenting an output where other details are presented?  Something like this (where <code>M</code>/<code>F</code> represents <code>Sex</code> / a single additional feature):</p>\n\n<pre><code>{\n    \"predictions\": \"[M, 0, M, 0, M, 0, F, 1, F, 1, M, 0, M, 1, ...]\"\n}\n</code></pre>\n\n<p>I suspect that something like an array (or even tuple) within an array would be what is needed here (if so, how can I implement that?).</p>\n\n<p>Perhaps like this:</p>\n\n<pre><code>{\n    \"predictions\": \"[[M, 0], [M, 0], [M, 0], [F, 1], [F, 1], [M, 0], [M, 1], ...]\"\n}\n</code></pre>\n\n<p>(For those who are curious, <a href=\"https://www.kaggle.com/c/titanic/data\" rel=\"nofollow noreferrer\">the dataset in question is freely available from Kaggle</a>.)</p>\n"}, {"tags": ["python", "tkinter", "pyinstaller", "python-docx", "docx-mailmerge"], "comments": [{"owner": {"reputation": 19772, "user_id": 1902513, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/dde51d04370847170ede2450660334ac?s=128&d=identicon&r=PG", "display_name": "scanny", "link": "https://stackoverflow.com/users/1902513/scanny"}, "edited": false, "score": 1, "creation_date": 1562806477, "post_id": 56978228, "comment_id": 100496405, "body": "I expect the root of the problem is getting <code>python-docx</code> to work with <code>pyinstaller</code>; search on &quot;python-docx pyinstaller&quot; to get results like this one that can help: <a href=\"https://stackoverflow.com/questions/35642322/pyinstaller-and-python-docx-module-do-not-work-together\" title=\"pyinstaller and python docx module do not work together\">stackoverflow.com/questions/35642322/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 11766531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ce86aece90632b55ad56ad796a479ec?s=128&d=identicon&r=PG&f=1", "display_name": "ersvoid", "link": "https://stackoverflow.com/users/11766531/ersvoid"}, "reply_to_user": {"reputation": 19772, "user_id": 1902513, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/dde51d04370847170ede2450660334ac?s=128&d=identicon&r=PG", "display_name": "scanny", "link": "https://stackoverflow.com/users/1902513/scanny"}, "edited": false, "score": 0, "creation_date": 1562881310, "post_id": 56978228, "comment_id": 100529196, "body": "Thank you. The answer to this question solved my problem."}], "answers": [{"tags": [], "owner": {"reputation": 4897, "user_id": 6700019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1ba979f781d106a9db9b35fc6ff518b2?s=128&d=identicon&r=PG", "display_name": "Masoud Rahimi", "link": "https://stackoverflow.com/users/6700019/masoud-rahimi"}, "is_accepted": false, "score": 1, "last_activity_date": 1562826481, "creation_date": 1562826481, "answer_id": 56982837, "question_id": 56978228, "link": "https://stackoverflow.com/questions/56978228/how-to-create-a-word-document-using-a-python-tkinter-executable/56982837#56982837", "title": "How to create a word document using a python tkinter executable?", "body": "<p>As already mentioned in the comments the problem is when you try to use <a href=\"https://python-docx.readthedocs.io/en/latest/\" rel=\"nofollow noreferrer\"><code>python-docx</code></a>, it has some <a href=\"https://github.com/python-openxml/python-docx/tree/master/docx/templates\" rel=\"nofollow noreferrer\">template files</a> that actually not related to python, so PyInstaller won't recognize them and thus they would be missed in final executable.</p>\n\n<p>A simple way in these situations is just embedding the whole dependence directory. You need to use <a href=\"https://pythonhosted.org/PyInstaller/advanced-topics.html#the-tree-class\" rel=\"nofollow noreferrer\">Tree class</a> and add the <code>docx</code>'s templates path (remember to replace <code>./env/Lib/site-packages/docx/templates</code> with a proper path on your system):</p>\n\n<pre><code>a = Analysis(\n...\na.datas += Tree(\"./env/Lib/site-packages/docx/templates\", prefix='docx/templates')\npyz = PYZ(a.pure, a.zipped_data,\n             cipher=block_cipher)\n...\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11766531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ce86aece90632b55ad56ad796a479ec?s=128&d=identicon&r=PG&f=1", "display_name": "ersvoid", "link": "https://stackoverflow.com/users/11766531/ersvoid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 788, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562826481, "creation_date": 1562790763, "question_id": 56978228, "link": "https://stackoverflow.com/questions/56978228/how-to-create-a-word-document-using-a-python-tkinter-executable", "title": "How to create a word document using a python tkinter executable?", "body": "<p>I am trying to create a python tkinter executable that displays information from an Oracle database and can also export that information into a MS Word (.docx) document.  It also does the same with Excel.</p>\n\n<p>Currently, whenever I run the script through PyCharm, I am able to create a new Word document and a new Excel spreadsheet; however, after using pyinstaller to create an executable, I cannot export a new Word document, but I am able to export a new Excel spreadsheet.</p>\n\n<p>I think I either need to find some unknown Word module that actually creates Word docs the same way xlsxwriter creates Excel sheets; or I need to somehow bundle a Word file into the executable.</p>\n\n<p>Python 3.7, PyCharm 2019.1.1 Community Edition.\nModules - tkinter, python-docx, docx-mailmerge, xlsxwriter, pyinstaller</p>\n\n<p>I was using docx-mailmerge and was merging the data into a Word document template, but then I tried using python-docx to try and \"create\" my own Word document. (From the documentation for python-docx: \"Actually, it only lets you make changes to existing documents; it\u2019s just that if you start with a document that doesn\u2019t have any content, it might feel at first like you\u2019re creating one from scratch.\")</p>\n\n<p>I have tried using pyinstaller to create a folder distribution and single-file executable. I think my best option is to create a folder and then manually add a Word template into some subfolder, but I have no idea which. If this is the case, I believe I can use either Word module.</p>\n\n<p>I can export Excel spreadsheets using xlsxwriter, no problem. </p>\n\n<p>I added a try/except statement to catch the error (and added a label to the app that would display the error name) and I went through the entire list of exceptions in the python doc, but only the catch-all \"except:\" would catch.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>def data_pull(user, pw, _id):\n    # connects to oracle and pulls data into a list\n\nclass App(Frame):\n    # a login frame not shown\n    # self.create_widgets()\n\n    def create_widgets(self):\n        # various StringVar() variables\n        # oracle data entry query (=_id)\n        # Button that calls entry query\n        # frames and scrolledtext for displaying the data\n        # Button to export to word\n        # Button to export to excel\n\n     def word_export(self, lst, path):\n        # export using python-docx\n\n     def excel_export(self, lst, path):\n        # export using xlsxwriter\n\n     def entry_callback(self):\n        # a = data_pull(user, pw, _id)\n        # parse a into a long string\n        # pass string to scrolledtext widget\n</code></pre>\n\n<p>When this is ran from inside PyCharm, the Word document is created no problem, but when this is ran from the executable, nothing happens.</p>\n"}, {"tags": ["python", "pandas", "dataframe"], "answers": [{"tags": [], "owner": {"reputation": 1406, "user_id": 6265630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QG6X.jpg?s=128&g=1", "display_name": "Nakor", "link": "https://stackoverflow.com/users/6265630/nakor"}, "is_accepted": false, "score": 0, "last_activity_date": 1562790933, "creation_date": 1562790933, "answer_id": 56978259, "question_id": 56978114, "link": "https://stackoverflow.com/questions/56978114/how-to-create-conditional-columns-in-pandas-data-frame-in-which-column-values-ar/56978259#56978259", "title": "How to create conditional columns in Pandas Data Frame in which column values are based on other columns", "body": "<p>You can work it out with lists comprehensions:</p>\n\n<pre><code>df['Result'] = [ df['count'][i] if df['test'][i]&gt;1 else \n                 df['count'][i] * df['test'][i] \n                 for i in range(df.shape[0]) ]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 2, "last_activity_date": 1562791037, "creation_date": 1562791037, "answer_id": 56978273, "question_id": 56978114, "link": "https://stackoverflow.com/questions/56978114/how-to-create-conditional-columns-in-pandas-data-frame-in-which-column-values-ar/56978273#56978273", "title": "How to create conditional columns in Pandas Data Frame in which column values are based on other columns", "body": "<p>You can use <code>np.where</code>:</p>\n\n<pre><code>df['Result'] = np.where(df['Test'] &gt; 1, df['Count'], df['Count'] * df['Test'])\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>   No_  Test  Count  Result\n0    1   2.0      1     1.0\n1    2   3.0      5     5.0\n2    3   4.0      1     1.0\n3    4   6.0      2     2.0\n4    5   0.5      2     1.0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1893, "user_id": 8927098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Zrj09.png?s=128&g=1", "display_name": "cosmic_inquiry", "link": "https://stackoverflow.com/users/8927098/cosmic-inquiry"}, "is_accepted": false, "score": 1, "last_activity_date": 1562791205, "creation_date": 1562791205, "answer_id": 56978319, "question_id": 56978114, "link": "https://stackoverflow.com/questions/56978114/how-to-create-conditional-columns-in-pandas-data-frame-in-which-column-values-ar/56978319#56978319", "title": "How to create conditional columns in Pandas Data Frame in which column values are based on other columns", "body": "<p>Here is a way to do this:</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame(columns = ['Test', 'Count'], \n                  data={'Test':[2, 3, 4, 6, 0.5], 'Count':[1, 5, 1, 2, 2]})\n\ndf['Result'] = df['Count']\ndf.loc[df['Test'] &lt; 1, 'Result'] = df['Test'] * df['Count']\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>       Test  Count  Result\n0   2.0      1     1.0\n1   3.0      5     5.0\n2   4.0      1     1.0\n3   6.0      2     2.0\n4   0.5      2     1.0\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 10599140, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-MaG6TVIaz3o/AAAAAAAAAAI/AAAAAAAAAAA/ABtNlbCHvfpAmWI0qPLuiNmM-2H40yyE4g/mo/photo.jpg?sz=128", "display_name": "Dominic Naimool", "link": "https://stackoverflow.com/users/10599140/dominic-naimool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "accepted_answer_id": 56978273, "answer_count": 3, "score": 1, "last_activity_date": 1562791205, "creation_date": 1562790190, "last_edit_date": 1562791184, "question_id": 56978114, "link": "https://stackoverflow.com/questions/56978114/how-to-create-conditional-columns-in-pandas-data-frame-in-which-column-values-ar", "title": "How to create conditional columns in Pandas Data Frame in which column values are based on other columns", "body": "<p>I am new to python, I am attempting what would be a conditional mutate in R DPLYR.\nIn short I would like to create a new column in the Data-frame called Result where : if <code>df.['test']</code> is greater than 1 <code>df.['Result']</code> equals the respective <code>df.['count']</code> for that row, if it lower than 1 then <code>df.['Result']</code> is </p>\n\n<pre><code>df.['count'] *df.['test'] \n</code></pre>\n\n<p>I have tried <code>df['Result']=df['test'].apply(lambda x: df['count'] if  x &gt;=1 else ...)</code> Unfortunately this results in a series, I have also attempted to write small functions which also return series</p>\n\n<p>I would like the final Dataframe to look like this...</p>\n\n<pre><code>no_ Test Count  Result\n1   2    1      1\n2   3    5      5\n3   4    1      1\n4   6    2      2\n5   0.5  2      1\n</code></pre>\n"}, {"tags": ["python"], "comments": [{"owner": {"reputation": 435647, "user_id": 367273, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f1ed2b0c87f602ef30229f5c4b04eff6?s=128&d=identicon&r=PG", "display_name": "NPE", "link": "https://stackoverflow.com/users/367273/npe"}, "edited": false, "score": 2, "creation_date": 1562790292, "post_id": 56978111, "comment_id": 100492297, "body": "Hint: you need to be comparing <code>d[0]</code> with <code>d[-1]</code>."}, {"owner": {"reputation": 32215, "user_id": 3789550, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8mGqv.gif?s=128&g=1", "display_name": "heemayl", "link": "https://stackoverflow.com/users/3789550/heemayl"}, "edited": false, "score": 0, "creation_date": 1562790318, "post_id": 56978111, "comment_id": 100492304, "body": "You&#39;ve only counted <code>a</code>."}, {"owner": {"reputation": 70549, "user_id": 4785185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ChR5h.jpg?s=128&g=1", "display_name": "Prune", "link": "https://stackoverflow.com/users/4785185/prune"}, "edited": false, "score": 0, "creation_date": 1562791407, "post_id": 56978111, "comment_id": 100492746, "body": "Your main problem is that you compare a single letter to the entire word: <code>d[0] == d</code>.  The only way this can happen is if the word is a single letter."}], "answers": [{"tags": [], "owner": {"reputation": 641, "user_id": 3527034, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004421854457/picture?type=large", "display_name": "wilkben", "link": "https://stackoverflow.com/users/3527034/wilkben"}, "is_accepted": false, "score": 2, "last_activity_date": 1562790327, "creation_date": 1562790327, "answer_id": 56978140, "question_id": 56978111, "link": "https://stackoverflow.com/questions/56978111/count-how-many-words-have-the-same-beginning-and-ending-letter-python/56978140#56978140", "title": "Count how many words have the same beginning and ending letter/Python", "body": "<pre><code>if d[0] == d:\n    same_letter_count = same_letter_count + 1\nelif d[-1] == d:\n    same_letter_count = same_letter_count + 1\n</code></pre>\n\n<p>This checks if the first letter is equal to the entire word, or if the last letter is equal to the entire word. Therefore you are only counting \"a\". Instead try</p>\n\n<pre><code>if d[0] == d[-1]:\n    same_letter_count = same_letter_count + 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1562791196, "post_id": 56978183, "comment_id": 100492647, "body": "<code>sentence.split(&quot; &quot;)</code> =&gt; <code>sentence.split()</code> so no risk of empty fields."}, {"owner": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "edited": false, "score": 1, "creation_date": 1562791385, "post_id": 56978183, "comment_id": 100492738, "body": "Note that <code>sum(1 for w in sentence.split(&#39; &#39;) if w[0] == w[-1])</code> can be faster as the zeros aren&#39;t summed."}, {"owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "reply_to_user": {"reputation": 67048, "user_id": 388787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f786b1ad349a30e02802ae61b4518fc?s=128&d=identicon&r=PG", "display_name": "Dan D.", "link": "https://stackoverflow.com/users/388787/dan-d"}, "edited": false, "score": 0, "creation_date": 1562791568, "post_id": 56978183, "comment_id": 100492818, "body": "Thanks @DanD. that&#39;s a nice tip. For the purposes of the question, I&#39;ll probably leave it as-is just for clarity. But I&#39;m filing that one away."}], "tags": [], "owner": {"reputation": 73287, "user_id": 3874623, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6df0aa136ee42f4ea24ef08b7c348e7a?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/3874623/mark"}, "is_accepted": true, "score": 6, "last_activity_date": 1562791328, "last_edit_date": 1562791328, "creation_date": 1562790551, "answer_id": 56978183, "question_id": 56978111, "link": "https://stackoverflow.com/questions/56978111/count-how-many-words-have-the-same-beginning-and-ending-letter-python/56978183#56978183", "title": "Count how many words have the same beginning and ending letter/Python", "body": "<p>You can take advantage of the fact the Python's booleans can be treated like zeros and ones and just add up all the boolean values of the test <code>word[0] == word[-1]</code>. The expression:</p>\n\n<pre><code>[w[0] == w[-1] for w in sentence.split()] \n</code></pre>\n\n<p>evaluates to a list like <code>[True, False, False...]</code>. Taking the <code>sum</code> of that is the same as counting the number of <code>True</code> values and is a very typical way of doing something like this in Python.</p>\n\n<pre><code>sentence = \"students flock to the arb for a variety of outdoor activities such as jogging and picnicking\"\nsame_letter_count = sum(w[0] == w[-1] for w in sentence.split())\n# 2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "is_accepted": false, "score": 1, "last_activity_date": 1562791197, "creation_date": 1562791197, "answer_id": 56978316, "question_id": 56978111, "link": "https://stackoverflow.com/questions/56978111/count-how-many-words-have-the-same-beginning-and-ending-letter-python/56978316#56978316", "title": "Count how many words have the same beginning and ending letter/Python", "body": "<p>A quick solution by <code>pandas</code>:</p>\n\n<pre><code>s = pd.Series(sentence.split(' '))\n(s.str[0] == s.str[-1]).sum()\n</code></pre>\n\n<p>gives answer <code>2</code>.</p>\n\n<p>You can even get those words:</p>\n\n<pre><code>s[s.str[0] == s.str[-1]]\n</code></pre>\n\n<p>gives:</p>\n\n<pre><code>0    students\n6           a\ndtype: object\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1556, "user_id": 10433739, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SseFTbME50A/AAAAAAAAAAI/AAAAAAAAAAw/X-bo6dqWWHc/photo.jpg?sz=128", "display_name": "Benjamin Urquhart", "link": "https://stackoverflow.com/users/10433739/benjamin-urquhart"}, "edited": false, "score": 0, "creation_date": 1565478965, "post_id": 57446283, "comment_id": 101368682, "body": "Can you add an explanation to your answer? Also, please format your code by placing it inside triple backticks or using the &lt;code&gt;&lt;/code&gt; tags"}], "tags": [], "owner": {"reputation": 1, "user_id": 11531473, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_zHKalt6Fhw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9W_2ONWv1eSRchkM2HofDDChrvQ/mo/photo.jpg?sz=128", "display_name": "Azucena Araujo Rinconi", "link": "https://stackoverflow.com/users/11531473/azucena-araujo-rinconi"}, "is_accepted": false, "score": 0, "last_activity_date": 1565480106, "last_edit_date": 1565480106, "creation_date": 1565478606, "answer_id": 57446283, "question_id": 56978111, "link": "https://stackoverflow.com/questions/56978111/count-how-many-words-have-the-same-beginning-and-ending-letter-python/57446283#57446283", "title": "Count how many words have the same beginning and ending letter/Python", "body": "<pre><code>sentence = \"students flock to the arb for a variety of outdoor activities such as jogging and picnicking\"\nsame_letter_count = 0\n\nsentence_split = sentence.split(' ')\nsentense_length = len(sentence_split)\n\nfor d in sentence_split:\n    if d[0] == d[-1]:\n        same_letter_count += 1\nprint(same_letter_count)\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 11766955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/723b97fc173e6287c9d8e6ade69a8898?s=128&d=identicon&r=PG&f=1", "display_name": "Dwr73244", "link": "https://stackoverflow.com/users/11766955/dwr73244"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7675, "favorite_count": 0, "accepted_answer_id": 56978183, "answer_count": 4, "score": 1, "last_activity_date": 1565480106, "creation_date": 1562790180, "last_edit_date": 1562790400, "question_id": 56978111, "link": "https://stackoverflow.com/questions/56978111/count-how-many-words-have-the-same-beginning-and-ending-letter-python", "title": "Count how many words have the same beginning and ending letter/Python", "body": "<blockquote>\n  <p><strong>QUESTION</strong>: The variable sentence stores a string. Write code to\n  determine how many words in sentence start and end with the same\n  letter, including one-letter words. Store the result in the variable\n  same_letter_count.</p>\n</blockquote>\n\n<p>I've tweaked this a few different ways but I still can't figure it out.  Any help + explanation is appreciated so I know how to handle this the next time.</p>\n\n<pre><code>sentence = \"students flock to the arb for a variety of outdoor activities \nsuch as jogging and picnicking\"\n\nsame_letter_count = 0\nsentence_split = sentence.split(' ')\nsent_length = len(sentence_split)\n#print(sent_length)\n# Write your code here.\nfor d in sentence_split:\n    #print(d[0])\n    if d[0] == d:\n        same_letter_count = same_letter_count + 1\n    elif d[-1] == d:\n        same_letter_count = same_letter_count + 1\nprint(same_letter_count)\n</code></pre>\n\n<p>I'm getting an answer of 1, the correct answer is 2.</p>\n"}, {"tags": ["python", "arrays", "django", "string", "python-2.7"], "comments": [{"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 1, "creation_date": 1562790361, "post_id": 56978103, "comment_id": 100492320, "body": "The code you have shared doesn&#39;t seem to have any relation to the question you have asked"}, {"owner": {"reputation": 71, "user_id": 8339012, "user_type": "registered", "profile_image": "https://graph.facebook.com/1397283060308179/picture?type=large", "display_name": "Umer Rasheed", "link": "https://stackoverflow.com/users/8339012/umer-rasheed"}, "reply_to_user": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1562790518, "post_id": 56978103, "comment_id": 100492376, "body": "this may not but i need to convert Array into string is there any way to do thay ?"}, {"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1562790767, "post_id": 56978103, "comment_id": 100492480, "body": "<a href=\"https://docs.python.org/3.7/library/stdtypes.html#str.join\" rel=\"nofollow noreferrer\">&#39;,&#39;.join(array)</a>"}, {"owner": {"reputation": 71, "user_id": 8339012, "user_type": "registered", "profile_image": "https://graph.facebook.com/1397283060308179/picture?type=large", "display_name": "Umer Rasheed", "link": "https://stackoverflow.com/users/8339012/umer-rasheed"}, "reply_to_user": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1562790830, "post_id": 56978103, "comment_id": 100492508, "body": "this is helpful. and working perfect."}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 2871769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e13bc98b809a69fc1b122bda33d146b?s=128&d=identicon&r=PG", "display_name": "Skapin", "link": "https://stackoverflow.com/users/2871769/skapin"}, "is_accepted": false, "score": -1, "last_activity_date": 1562791140, "creation_date": 1562791140, "answer_id": 56978299, "question_id": 56978103, "link": "https://stackoverflow.com/questions/56978103/array-convert-to-string-in-views-django/56978299#56978299", "title": "Array convert to string in views django", "body": "<pre><code>','.join(your_array)\n</code></pre>\n\n<p>Please mark the solution as valide to avoid all other people to dig in comments...</p>\n"}], "owner": {"reputation": 71, "user_id": 8339012, "user_type": "registered", "profile_image": "https://graph.facebook.com/1397283060308179/picture?type=large", "display_name": "Umer Rasheed", "link": "https://stackoverflow.com/users/8339012/umer-rasheed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 533, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1562791140, "creation_date": 1562790151, "question_id": 56978103, "link": "https://stackoverflow.com/questions/56978103/array-convert-to-string-in-views-django", "title": "Array convert to string in views django", "body": "<p>i have a array in Django views and i want to convert into comma separated string, to save data into DB field like all in one.</p>\n\n<pre><code> class FindInfo(object):\n      def __info__(request):\n          if request.method == 'POST':\n               name = request.POST.get('name')\n               address = request.POST.get('address')\n               phone = request.POST.get('phone')\n               info = {}\n               info['name'] = name\n               info['address'] = address\n               info['phone'] = phone\n               info = [\"Younus\", \"DHA-A251\", \"+923228738738\"] \n</code></pre>\n\n<p>i did't get anything how to do that?\nand i need output like this.</p>\n\n<pre><code>    sting = \"Ford,Volvo,BMW\"\n</code></pre>\n"}, {"tags": ["python", "excel", "pandas", "openpyxl"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11704629, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-t5FIcK4TzVY/AAAAAAAAAAI/AAAAAAAAE_g/GSdm6bYzc6s/photo.jpg?sz=128", "display_name": "MTMobile", "link": "https://stackoverflow.com/users/11704629/mtmobile"}, "is_accepted": false, "score": 1, "last_activity_date": 1581002769, "creation_date": 1581002769, "answer_id": 60098410, "question_id": 56978081, "link": "https://stackoverflow.com/questions/56978081/broken-excel-output-openpyxl-formula-settings/60098410#60098410", "title": "Broken Excel output: Openpyxl formula settings?", "body": "<p>I've struggled of this issue too.\nI have found a strange solution for formulas.\nI had to replace all <code>;</code> (semicolon) signs with <code>,</code> (comma) in the formulas.\nWhen I opened the result xlsx file with Excel, this error didn't rise and the formula in Excel had usual <code>;</code>.</p>\n"}], "owner": {"reputation": 2995, "user_id": 667913, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/e038b48be307830687c8a71ff716ba07?s=128&d=identicon&r=PG", "display_name": "patrick", "link": "https://stackoverflow.com/users/667913/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581002769, "creation_date": 1562790078, "question_id": 56978081, "link": "https://stackoverflow.com/questions/56978081/broken-excel-output-openpyxl-formula-settings", "title": "Broken Excel output: Openpyxl formula settings?", "body": "<p>I am creating some Excel spreadsheets from pandas DataFrames using the <a href=\"https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.ExcelWriter.html\" rel=\"nofollow noreferrer\"><code>pandas.ExcelWriter()</code></a>.</p>\n\n<h3>Issue:</h3>\n\n<ul>\n<li><p>For some string input, this creates broken .xlsx files that need to be repaired. (<em>problem with some content</em> --- <em>removed formula</em>, cf error msg below)</p></li>\n<li><p>I assume this happens because Excel interprets the cell content not as a string, but a formula which it cannot parse, e.g. when a string value starts with \"=\"</p></li>\n</ul>\n\n<h3>Question:</h3>\n\n<ul>\n<li><p>When using xlsxwriter as engine, I can solve this issue by setting the argument <code>options = {\"strings_to_formulas\" : False }</code> </p></li>\n<li><p>Is there a similar argument for openpyxl?</p></li>\n</ul>\n\n<h3>Troubleshooting:</h3>\n\n<ul>\n<li><p>I found the <a href=\"https://bitbucket.org/openpyxl/openpyxl/src/d090796b358b0238cce5e9c71fa2dd1ccc37ccbc/openpyxl/workbook/workbook.py#lines-55\" rel=\"nofollow noreferrer\"><code>data_only</code></a> argument to Workbook, but it only seems to apply to reading files / I cannot get it to work with ExcelWriter(). </p></li>\n<li><p>Not all output values are strings / I'd like to avoid converting all output to str</p></li>\n<li><p>Could not find an applicable question on here</p></li>\n</ul>\n\n<p>Any hints are much appreciated, thanks!</p>\n\n<hr>\n\n<p>Error messages:</p>\n\n<p><em>We found a problem with some content in 'file.xlsx'. Do you want us to try to recover as much as we can? If you trust the source of this workbook, click Yes</em></p>\n\n<p>The log after opening says:</p>\n\n<p><em>[...] summary=\"Following is a list of removed records:\">Removed Records: Formula from /xl/worksheets/sheet1.xml part [...]</em></p>\n\n<p>Code </p>\n\n<pre><code>import pandas\nexcelout = pandas.ExcelWriter(output_file, engine = \"openpyxl\")\ndf.to_excel(excelout)\nexcelout.save()\n</code></pre>\n\n<p>Versions:</p>\n\n<p>pandas @0.24.2\nopenpyxl @2.5.6</p>\n\n<p>Excel 2016 for Mac (but replicates on Win)</p>\n"}, {"tags": ["python", "excel", "email", "email-attachments"], "comments": [{"owner": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 1, "creation_date": 1562790230, "post_id": 56978075, "comment_id": 100492280, "body": "Have you tried looking in the contents of the received file to see what it looks like? That might give you some clues."}, {"owner": {"reputation": 500, "user_id": 1017466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/73d62289ed695b520ad2a3ae80c45277?s=128&d=identicon&r=PG", "display_name": "bluethundr", "link": "https://stackoverflow.com/users/1017466/bluethundr"}, "reply_to_user": {"reputation": 305939, "user_id": 7432, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/3e3921ee8a7792e4b5da0244933395e8?s=128&d=identicon&r=PG", "display_name": "Bryan Oakley", "link": "https://stackoverflow.com/users/7432/bryan-oakley"}, "edited": false, "score": 0, "creation_date": 1562790619, "post_id": 56978075, "comment_id": 100492423, "body": "Excel will not open the file, because it says it&#39;s corrupt. But when I open the file using Sublime I see a bunch of numbers: <code>015c 7532 3032 304f 0930 14c3 1420 5248 ca22 5c75 3230 3236 a82c 52c8 ca22 5c75 3230 3236 b02c 5248 cb22 5c75 3230 3236 b82c fe7b 5ed2 c635 bec0 d0de d8c3 e9f9 f0b8 116d 460f dc5c 7532 3033 39de 5cf6 5c75 3031 3764 b4b1 ee1d 48d0 ecdc 25c8 166f 1eff 295c 7530 3264 63fc 0500 00ff ff03 0050 4b03 0414 0006 0008 0000 0021 00b5 5530 23f4 0000 004c 0200 000b 0008 025f 7265 6c73 2f2e 7265 6c73 20a2 0402</code>"}, {"owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "edited": false, "score": 2, "creation_date": 1562792234, "post_id": 56978075, "comment_id": 100493074, "body": "you have to open in <code>bytes</code> mode - <code>open(..., &#39;rb&#39;)</code>"}, {"owner": {"reputation": 500, "user_id": 1017466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/73d62289ed695b520ad2a3ae80c45277?s=128&d=identicon&r=PG", "display_name": "bluethundr", "link": "https://stackoverflow.com/users/1017466/bluethundr"}, "edited": false, "score": 0, "creation_date": 1562793013, "post_id": 56978075, "comment_id": 100493334, "body": "Thanks! That worked."}], "answers": [{"tags": [], "owner": {"reputation": 92215, "user_id": 1832058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/relWs.jpg?s=128&g=1", "display_name": "furas", "link": "https://stackoverflow.com/users/1832058/furas"}, "is_accepted": false, "score": 1, "last_activity_date": 1562794814, "creation_date": 1562794814, "answer_id": 56979017, "question_id": 56978075, "link": "https://stackoverflow.com/questions/56978075/sending-corrupt-files-by-email-python/56979017#56979017", "title": "Sending corrupt files by email python", "body": "<p>You have to open file in <code>bytes</code> mode </p>\n\n<pre><code>with open(..., 'rb') as f:\n</code></pre>\n\n<p>In <code>text</code> mode it converts byte used for <code>\"new line\"</code> and finally it sends incorrect data.</p>\n"}], "owner": {"reputation": 500, "user_id": 1017466, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/73d62289ed695b520ad2a3ae80c45277?s=128&d=identicon&r=PG", "display_name": "bluethundr", "link": "https://stackoverflow.com/users/1017466/bluethundr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562794814, "creation_date": 1562790040, "last_edit_date": 1592644375, "question_id": 56978075, "link": "https://stackoverflow.com/questions/56978075/sending-corrupt-files-by-email-python", "title": "Sending corrupt files by email python", "body": "<p>I'm sending an excel spreadsheet as an attachment using this code:</p>\n<pre><code>import smtplib\nfrom email.mime.text import MIMEText\nfrom email.mime.multipart import MIMEMultipart\nfrom email.mime.application import MIMEApplication\ndef send_email(subject, mail_body, attachment= None):\n    to_addr = input(&quot;Enter the recipient's email address: &quot;)\n    from_addr = 'cloudops@noreply.company.com'\n    content = mail_body\n    msg = MIMEMultipart()\n    msg['From'] = from_addr\n    msg['To'] = to_addr\n    msg['Subject'] = subject\n    body = MIMEText(content, 'html')\n    msg.attach(body)\n    server = smtplib.SMTP('smtpout.us.cworld.company.com', 25)\n    with open(attachment, 'r') as f:\n        part = MIMEApplication(f.read(), Name=basename(attachment))\n        part['Content-Disposition'] = 'attachment; filename=&quot;{}&quot;'.format(basename(attachment))\n        msg.attach(part)\n        try:\n            server.send_message(msg, from_addr=from_addr, to_addrs=to_addr)\n            print(f&quot;Email was sent to: {to_addr}&quot;)\n        except Exception as e:\n            print(f&quot;Exception: {e}&quot;)\n            print(&quot;Email was not sent.&quot;)\n</code></pre>\n<p>And when I open the file I get a message that says:</p>\n<blockquote>\n<p>Excel cannot open teh file 'Cost Allocation - 201906.xlsx' because the\nfile format or extension is not valid. Verify that the file has not\nbeen corrupted and that the file extension matches the format of the\nfile.</p>\n</blockquote>\n<p><a href=\"https://i.stack.imgur.com/ft3Tb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ft3Tb.png\" alt=\"enter image description here\" /></a></p>\n<p>Why am I getting this error and how do I correct this?</p>\n"}, {"tags": ["python", "solid-principles"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6796805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvDE3.jpg?s=128&g=1", "display_name": "Kmiilo Berrio Montoya", "link": "https://stackoverflow.com/users/6796805/kmiilo-berrio-montoya"}, "edited": false, "score": 0, "creation_date": 1562790590, "post_id": 56978155, "comment_id": 100492410, "body": "but I would have to enter to modify the show method."}, {"owner": {"reputation": 17050, "user_id": 3944322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1fb31e86bf22c094d34b240544e458ec?s=128&d=identicon&r=PG&f=1", "display_name": "Stef", "link": "https://stackoverflow.com/users/3944322/stef"}, "reply_to_user": {"reputation": 25, "user_id": 6796805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvDE3.jpg?s=128&g=1", "display_name": "Kmiilo Berrio Montoya", "link": "https://stackoverflow.com/users/6796805/kmiilo-berrio-montoya"}, "edited": false, "score": 1, "creation_date": 1562790741, "post_id": 56978155, "comment_id": 100492470, "body": "then the only way I see is to move the dictionary to the <code>__init__</code> method, but I don&#39;t see any real advantage in it (i.e. self.values = { ... } in <code>__init__</code> and then <code>value = self.values.get(self.value,self.value)</code> in <code>show</code>"}], "tags": [], "owner": {"reputation": 17050, "user_id": 3944322, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1fb31e86bf22c094d34b240544e458ec?s=128&d=identicon&r=PG&f=1", "display_name": "Stef", "link": "https://stackoverflow.com/users/3944322/stef"}, "is_accepted": false, "score": 0, "last_activity_date": 1562790387, "creation_date": 1562790387, "answer_id": 56978155, "question_id": 56978065, "link": "https://stackoverflow.com/questions/56978065/replace-if-statments-with-clean-code-and-best-practices/56978155#56978155", "title": "replace if statments with clean code and best practices", "body": "<p>For me the code looks ok, but if you like, you could use a dictionary:</p>\n\n<pre><code>value = {1: \"Ace\", 11: \"Jack\", 12: \"Queen\", 13: \"King\"}.get(self.value,self.value)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 6796805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvDE3.jpg?s=128&g=1", "display_name": "Kmiilo Berrio Montoya", "link": "https://stackoverflow.com/users/6796805/kmiilo-berrio-montoya"}, "edited": false, "score": 0, "creation_date": 1562790594, "post_id": 56978160, "comment_id": 100492411, "body": "but I would have to enter to modify the show method."}, {"owner": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "reply_to_user": {"reputation": 25, "user_id": 6796805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvDE3.jpg?s=128&g=1", "display_name": "Kmiilo Berrio Montoya", "link": "https://stackoverflow.com/users/6796805/kmiilo-berrio-montoya"}, "edited": false, "score": 0, "creation_date": 1562790666, "post_id": 56978160, "comment_id": 100492441, "body": "The <code>show</code> method is the only method that needs refactoring. If you cannot modify it, there isn\u2019t much to improve."}, {"owner": {"reputation": 25, "user_id": 6796805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvDE3.jpg?s=128&g=1", "display_name": "Kmiilo Berrio Montoya", "link": "https://stackoverflow.com/users/6796805/kmiilo-berrio-montoya"}, "edited": false, "score": 0, "creation_date": 1562790953, "post_id": 56978160, "comment_id": 100492546, "body": "What I want to achieve is to obtain a show method, with open / close principle."}, {"owner": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "reply_to_user": {"reputation": 25, "user_id": 6796805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvDE3.jpg?s=128&g=1", "display_name": "Kmiilo Berrio Montoya", "link": "https://stackoverflow.com/users/6796805/kmiilo-berrio-montoya"}, "edited": false, "score": 0, "creation_date": 1562792120, "post_id": 56978160, "comment_id": 100493029, "body": "There isn\u2019t any inheritance/subclassing in your code so I don\u2019t think that applying the open/closed principle is useful. Unless you are going to subclass class <code>Card</code>, you can\u2019t make it any more abstract."}], "tags": [], "owner": {"reputation": 3225, "user_id": 9917694, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eYLrricMNLQ/AAAAAAAAAAI/AAAAAAAAAAA/AB6qoq3U1NPjt3ei5L4we8FlqCJz7mWBlg/mo/photo.jpg?sz=128", "display_name": "N Chauhan", "link": "https://stackoverflow.com/users/9917694/n-chauhan"}, "is_accepted": true, "score": 0, "last_activity_date": 1562790411, "creation_date": 1562790411, "answer_id": 56978160, "question_id": 56978065, "link": "https://stackoverflow.com/questions/56978065/replace-if-statments-with-clean-code-and-best-practices/56978160#56978160", "title": "replace if statments with clean code and best practices", "body": "<p>You can emulate a switch-case statement with a dictionary:</p>\n\n<pre><code>def show(self):\n    value = {\n        1: 'Ace', 11: 'Jack',\n        12: 'Queen', 13: 'King'\n    }.get(self.value, self.value)\n\n    return f'{value} of {self.suit}'\n</code></pre>\n\n<p>What\u2019s happening here is that we are creating a mapping of card numerical value to card name. Immediately after creation of this object, we use the <code>dict.get</code> method to try and retrieve the corresponding name based on <code>self.value</code>. The second argument is a fallback to ensure if the lookup fails, we use the current value. </p>\n"}], "owner": {"reputation": 25, "user_id": 6796805, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZvDE3.jpg?s=128&g=1", "display_name": "Kmiilo Berrio Montoya", "link": "https://stackoverflow.com/users/6796805/kmiilo-berrio-montoya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "closed_date": 1562791467, "accepted_answer_id": 56978160, "answer_count": 2, "score": -1, "last_activity_date": 1562790809, "creation_date": 1562789999, "last_edit_date": 1562790809, "question_id": 56978065, "link": "https://stackoverflow.com/questions/56978065/replace-if-statments-with-clean-code-and-best-practices", "closed_reason": "Duplicate", "title": "replace if statments with clean code and best practices", "body": "<p>It is a simple code, what I am looking for is to learn the best practices that I can implement, when trying to refactor the show method, to a method that is closed to modifications. so that in the future if they ask me to enter a new card with a value of type chain, it is not necessary to modify this method.</p>\n\n<pre><code>class Card:\ndef __init__(self, suit, value):\n    self.suit = suit\n    self.value = value\n\ndef show(self):\n    if self.value == 1:\n        value = \"Ace\"\n    elif self.value == 11:\n        value = \"Jack\"\n    elif self.value == 12:\n        value = \"Queen\"\n    elif self.value == 13:\n        value = \"King\"\n    else:\n        value = self.value\n\n    return f'{value} of {self.suit}'\n</code></pre>\n"}, {"tags": ["python", "cryptography", "rsa", "openssh", "ssh-keygen"], "comments": [{"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1562797059, "post_id": 56978048, "comment_id": 100494514, "body": "I don&#39;t know where you got the information in your first paragraph but it&#39;s mostly wrong. Why not just use whatever SSH library you are using generate the keys?"}, {"owner": {"reputation": 33, "user_id": 7589528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/128289522c8ba9fc1d53a7d7b0d0d7a5?s=128&d=identicon&r=PG&f=1", "display_name": "bitter_rice", "link": "https://stackoverflow.com/users/7589528/bitter-rice"}, "reply_to_user": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1562798518, "post_id": 56978048, "comment_id": 100494897, "body": "I got the information from that link"}, {"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1562798769, "post_id": 56978048, "comment_id": 100494951, "body": "You misunderstood. Are you using Paramiko for SFTP?"}, {"owner": {"reputation": 33, "user_id": 7589528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/128289522c8ba9fc1d53a7d7b0d0d7a5?s=128&d=identicon&r=PG&f=1", "display_name": "bitter_rice", "link": "https://stackoverflow.com/users/7589528/bitter-rice"}, "reply_to_user": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1562805621, "post_id": 56978048, "comment_id": 100496252, "body": "No. I am using aws transfer sftp service"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7589528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/128289522c8ba9fc1d53a7d7b0d0d7a5?s=128&d=identicon&r=PG&f=1", "display_name": "bitter_rice", "link": "https://stackoverflow.com/users/7589528/bitter-rice"}, "edited": false, "score": 0, "creation_date": 1562851621, "post_id": 56988638, "comment_id": 100515304, "body": "Great tip! I changed to <code>private_key = key.private_bytes(crypto_serialization.Encoding.PEM, crypto_serialization.PrivateFormat.TraditionalOpenSSL, crypto_serialization.NoEncryption()).decode(&quot;utf-8&quot;)</code> and output says <code>RSA PRIVATE KEY</code> but it&#39;s still not working. The private key file is actually a few characters shorter than the rsa-keygen file"}, {"owner": {"reputation": 33, "user_id": 7589528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/128289522c8ba9fc1d53a7d7b0d0d7a5?s=128&d=identicon&r=PG&f=1", "display_name": "bitter_rice", "link": "https://stackoverflow.com/users/7589528/bitter-rice"}, "edited": false, "score": 1, "creation_date": 1562855683, "post_id": 56988638, "comment_id": 100517818, "body": "Actually, my bad, it is working. Your solution fixed it, thanks!"}, {"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1581390979, "post_id": 56988638, "comment_id": 106408177, "body": "FYI: This format is not a legacy format. This format is PKCS #1 and is widely used everywhere. PKCS #8 is another format with more options."}, {"owner": {"reputation": 20508, "user_id": 2196426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e8759ad9a50739704dca2e84fa9b50?s=128&d=identicon&r=PG", "display_name": "Jakuje", "link": "https://stackoverflow.com/users/2196426/jakuje"}, "reply_to_user": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1581409638, "post_id": 56988638, "comment_id": 106413537, "body": "@JohnHanley that is nothing that would not make it legacy format as there is one that is widely accepted as a replacement in everything modern."}, {"owner": {"reputation": 43265, "user_id": 8016720, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bXsod.png?s=128&g=1", "display_name": "John Hanley", "link": "https://stackoverflow.com/users/8016720/john-hanley"}, "edited": false, "score": 0, "creation_date": 1581430036, "post_id": 56988638, "comment_id": 106424638, "body": "You are expressing your opinion as a fact. PKCS #1 is part of a family of standards and is by far the most popular format. In most use cases, PKCS #8 just wraps PKCS #1."}], "tags": [], "owner": {"reputation": 20508, "user_id": 2196426, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e8759ad9a50739704dca2e84fa9b50?s=128&d=identicon&r=PG", "display_name": "Jakuje", "link": "https://stackoverflow.com/users/2196426/jakuje"}, "is_accepted": true, "score": 2, "last_activity_date": 1562846232, "creation_date": 1562846232, "answer_id": 56988638, "question_id": 56978048, "link": "https://stackoverflow.com/questions/56978048/how-to-replicate-the-functionality-of-ssh-keygen-using-python/56988638#56988638", "title": "How to replicate the functionality of ssh-keygen using python", "body": "<p>The header that is OpenSSH ssh-keygen using is the legacy PEM file:</p>\n\n<pre><code>-----BEGIN RSA PRIVATE KEY-----\n</code></pre>\n\n<p>The header your script created is the new PKCS#8 PEM file and they are not completely compatible if you are using some nonstandard tool to connect to the sftp.</p>\n\n<pre><code>-----BEGIN PRIVATE KEY-----\n</code></pre>\n\n<p>You can create the same legacy PEM format using the <a href=\"https://cryptography.io/en/latest/hazmat/primitives/asymmetric/serialization/#serialization-formats\" rel=\"nofollow noreferrer\"><code>serialization.TraditionalOpenSSL</code></a> argument to your <code>private_bytes</code> function.</p>\n"}], "owner": {"reputation": 33, "user_id": 7589528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/128289522c8ba9fc1d53a7d7b0d0d7a5?s=128&d=identicon&r=PG&f=1", "display_name": "bitter_rice", "link": "https://stackoverflow.com/users/7589528/bitter-rice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1176, "favorite_count": 1, "accepted_answer_id": 56988638, "answer_count": 1, "score": 2, "last_activity_date": 1562852535, "creation_date": 1562789957, "last_edit_date": 1562852535, "question_id": 56978048, "link": "https://stackoverflow.com/questions/56978048/how-to-replicate-the-functionality-of-ssh-keygen-using-python", "title": "How to replicate the functionality of ssh-keygen using python", "body": "<p>I need to generate an RSA keypair for use with SFTP authentication. SFTP uses OpenSSH, and according to its IETF specification, keys <em>should</em> only be generated by ssh-keygen.\n<a href=\"https://www.openssh.com/specs.html\" rel=\"nofollow noreferrer\">https://www.openssh.com/specs.html</a></p>\n\n<p>However, for my current project, I cannot rely on an external program like ssh-keygen, even if executed through something like python's subprocess module. This has to do with the details of the deployment environment. Anyway, for some reason the keys I am generating with python's cryptography module, although they appear correct, are rejected during SFTP login. </p>\n\n<p>I don't know what makes the ssh-keygen keys so special. I suspect it either has to do with parameters like the key size/length or the public exponent, or else possibly it's due to a character encoding issue.</p>\n\n<p>Here is the code that is generating the keys</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>from cryptography.hazmat.primitives import serialization as crypto_serialization\nfrom cryptography.hazmat.primitives.asymmetric import rsa\nfrom cryptography.hazmat.backends import default_backend as crypto_default_backend\n\nkey = rsa.generate_private_key(\n    backend=crypto_default_backend(), public_exponent=65537, key_size=2048)\nprivate_key = key.private_bytes(\n    crypto_serialization.Encoding.PEM, crypto_serialization.PrivateFormat.PKCS8, crypto_serialization.NoEncryption()).decode(\"utf-8\")\npublic_key = key.public_key().public_bytes(\n    crypto_serialization.Encoding.OpenSSH, crypto_serialization.PublicFormat.OpenSSH).decode(\"utf-8\")\nprint(public_key)\nprint(private_key)\n</code></pre>\n\n<p><strong>Below are keys generated by ssh-keygen that sftp accepts.</strong></p>\n\n<p>Public key:</p>\n\n<p>(I modified the <code>user@machine_name</code> part, but I <em>highly</em> doubt this is relevant, since I am actually stripping this part out when I deploy the public key to the sftp server)</p>\n\n<pre><code>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDWe1fmzvKHYu90YbGiDVD/k+Jj6OgQLUuleTIkAiljrN+Z6RTF9xK6bk5uEquB5TBWvl/i9kh8blCjkxnKI8ivvBZiX6ubuRraEtkmRR+/UmxHehKwE40eAtbFjY6q69PpNBg+iM7nXrTHK1vmD5VY8KsflfKBmS628V0QxxgQTdi/irb4AZLBqR7lAnanB15envtMBxoesoA6Duaj47TftzDP2j8iX7Jgj+WZqB85aqggbxUfV0kDVj9YbSuZk9ccA3udRlMpH2k1aiMemF0zB2jHXHPHTE+0sIoX0J331+yzWR+iJXwZeEdRREmeTc8FJN2/Rq1lLH87NPkB4uhH user@machine_name\n</code></pre>\n\n<p>Private key:</p>\n\n<pre><code>-----BEGIN RSA PRIVATE KEY-----\nMIIEpAIBAAKCAQEA1ntX5s7yh2LvdGGxog1Q/5PiY+joEC1LpXkyJAIpY6zfmekU\nxfcSum5ObhKrgeUwVr5f4vZIfG5Qo5MZyiPIr7wWYl+rm7ka2hLZJkUfv1JsR3oS\nsBONHgLWxY2OquvT6TQYPojO5160xytb5g+VWPCrH5XygZkutvFdEMcYEE3Yv4q2\n+AGSwake5QJ2pwdeXp77TAcaHrKAOg7mo+O037cwz9o/Il+yYI/lmagfOWqoIG8V\nH1dJA1Y/WG0rmZPXHAN7nUZTKR9pNWojHphdMwdox1xzx0xPtLCKF9Cd99fss1kf\noiV8GXhHUURJnk3PBSTdv0atZSx/OzT5AeLoRwIDAQABAoIBADX/z924dK9JZWgz\nwHlASQhPv0vQM7z+6nC61rjiInGJ8LHbUPOWhQyTAQQNh0io30a3n4SQ5ScOzxaf\nznpqD/jOrgQOejI2pGALJsjP1nJg2goU3eeexIStykzqmuTFgxDPoNr9rrnpyjHq\n5LRDcCJ4VV0ab3fZjT1Z/0heF9zihnnZ1eQ/4DCgkSQe9IVVmyoTCRAL57DE4JVa\nXSq7rWjnFO9fFUFH2HaWUvZqZJcwStr4UrgxhE+x57b5ymhwcf+PQNyrGFSDHdFu\ncalbCZKyriTe3/CGyKy0TuHbjYd89cE/6kJ8UBuBdr40ttRKj50l3h2PDoYLgP3d\nN+HPSyECgYEA9KH7DmRI5iFOul/nImy3MXkaruVehgXmFytCzrysNDNp66o+8dZ4\nPBdZDmMhFLIwM/v7a1RLnEHOkF0oIXLWJaVaWqT64RipvtUvYie1zSTbviLLMaJT\nFvrH9Xwx82HobkOyrLc26m/gSktKT2OmzJmt+YhByqsPim5L8u+QsAUCgYEA4HK0\nF5I0WrLV3abN3g9VkSEfdp3QvF0eTzS7i9C83mAlVizt9PqGjvLIWUfSRiTZPCzX\nvaT/sHX3xi2znDUYQ43aFouAzVyN9Qa76nxtuB6c2iBM6sW69Mcct8M9HdjcPF6O\nv9XqXuZTn/AD9AHoTHZtGOnMKTX0YjEqeHbfRNsCgYAKDWHonHxWYIYAqJIx2u/I\nK6bKCwjQTwu+ZfuvzRbyai5vDabafyqfpYH2UmJ4nD3Y1QDmzybwO9AGJJ3Sigp8\nr4e/88mPWFkZS19QFDunO12AOaPJ3Va2ugVfdAQFcT+A0G1WJY0vIvu/ccqS6pBf\nFe2NNGknr9HKqW+bgvaaFQKBgQC7gVfOcUfnlYtxVo6ZurnDOqasU380PZ66kNU1\nIrcGF9BZQ8OvazPKbCzP2V5jVxlcWiIJvrQU2RibqUZpcznIBdNyDi0WYwH89xk5\n9aU7sedbmqxnXbSoFUd6hVKjgq3KiTw8KxtXGJg3/y1uRcGpTy4pJ/h1XSvCdEyE\nwtoXDQKBgQC8RjCF3ZcZYIIii10K0BHX4YSiRC3PLi7rUQ9jVZN4FGwBB+NQzwSe\n7iIW4lqUDZ6SKDwkNKi5vdnx2BBBadJO74vcqWxdanBk0SbEsJZDFVb2bGvjOVzH\nCLhCavojqtFNMCFQTge9P6wff+qegY1RzTEkht3YiiWAGkFkDVp5gg==\n-----END RSA PRIVATE KEY-----\n</code></pre>\n\n<p><strong>Below is output of my program</strong></p>\n\n<p>Public key:</p>\n\n<pre><code>ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQDr0tbRIlabQr6xPudI3Gz9qN7hIeKhMdrxiKzXsgfBElRF6htfUebwFTcmRrPeb0mN+wCdcrnAF+iG+cYvpjhX6mQa+rBV79kiUZJg3n/BfjiMBko9q6QDrpOfNdKElnGVqBcTFSZKyzNfGpOTcpzCxXd76IyUx1MuY2A4MUC/TVBNpJnrEqvJjaAAbtTWDXYmzmApL3m308CH+SV2NKE5dzHNX+NvFeZ2Xlcv5ZRGB6jiUV+HI3QFPeaLJ+xneucc0rCrjF22RHvBFovnInFnIDXdadqsElxAKYviygpZL6ekJJETJhZjGzDNJh0b30OiZS493CDmd7Qb97MfN95/\n</code></pre>\n\n<p>Private key:</p>\n\n<pre><code>-----BEGIN PRIVATE KEY-----\nMIIEvAIBADANBgkqhkiG9w0BAQEFAASCBKYwggSiAgEAAoIBAQDr0tbRIlabQr6x\nPudI3Gz9qN7hIeKhMdrxiKzXsgfBElRF6htfUebwFTcmRrPeb0mN+wCdcrnAF+iG\n+cYvpjhX6mQa+rBV79kiUZJg3n/BfjiMBko9q6QDrpOfNdKElnGVqBcTFSZKyzNf\nGpOTcpzCxXd76IyUx1MuY2A4MUC/TVBNpJnrEqvJjaAAbtTWDXYmzmApL3m308CH\n+SV2NKE5dzHNX+NvFeZ2Xlcv5ZRGB6jiUV+HI3QFPeaLJ+xneucc0rCrjF22RHvB\nFovnInFnIDXdadqsElxAKYviygpZL6ekJJETJhZjGzDNJh0b30OiZS493CDmd7Qb\n97MfN95/AgMBAAECggEAFJ5QjeR0sgp55cFcM3CiTuNO6VwvFmzneaq7gfhc2TKj\nD6HSVtkwWdlhAwW3gEE2qyVA/oMjXno4qGR6QXxE/NrPedRlSn43+9op9DI/9Uj1\n5LhAEXhKVNAUtBzelR0aPT1/FvoIaQ2vJieKs5+XuSfOtJS2heOPkES8Cu2zfYY3\n/egSvYCCWoG12xYx7u67b0z4ZUV7a0sbLTov0+R3UAlI68hUy6z5Eu45QdZ83D9U\nqO/JDeycSvOldpuV5kmRD0lTvsc0hDrlr0pA7yzf7/M+NI4r8cfXPpJZLK3Riott\nGYS6YN4JmfO7D6nP2DjyrboDsVDy4TJkD/ZycMd/AQKBgQD8jmMAQFiJGoMlOqyC\nYGxwOxL/qvFEQ2R1FDIywpDQnsK/Jrln6zgR88MWyuJyM+7MHgF5BP9u8hS3WQ0U\nDF2sGBfFQNJUWJUKAtHpfA/qsep1PX6lr9mWZYFEIEugDZDRLVVDFvLG7tk8fauD\nbvmMexy+0uT9dTsmx3GaLm9avwKBgQDvCgr51MHTj1E7Ynv0aI20ySI8vZnEHnPU\nr36GIfqz5i67KLG3HTV0Awo4njXa6W6w+Kdg78saRXhVbZFlRfYIfsVT9OpRxKXM\nQDElK0gtrJRIRgLz7/1lVUUE4Hj0a76p7GhfhES2qKYqIPnF/lpfMt44DE+ARmEK\nra03cecsQQKBgCGmZxJ1gFZkLe0b8Dg+2LPraxCdmh/aStw+oKGawujI/nGxmyp5\ncLMTo3658Yn92Wdg6BlTzSTfJFt5hgCR1TlEzIX/qQaL9u+qiIVvfj9rDS4pz2IM\nGBWt2JdXJjxhElaMj7uspxRSZqdkpyGP+7f3/1B9kP0kTYlRMZW1cijJAoGAMRvH\nFXx4NZaEAcdB3/x64GFR/1iUdo4rDc7gF35zmvH3N8wsdooxqRvWxbr7JXY/n2v2\nNxwMheEvz50q+btdyHEC6TSvzwyvYz7s2c4Cjh+edxqrEKKFVIQoIdBcCRr5mL9Q\n0g7CbyRGvvD3X43Z0yUIMkuVKa1L0n3L0FA+RgECgYArd7mvlJTIu6b2TZdQsTLt\n5Ygqpkgz5ZcFX3fuiaJLFqpUnYYns7aBmHbotBKijEN7ags7SMilMuXqY5+OraJG\n+qoheN5EGgvgiT9KF6KBjZblUCUFak5SAS8F+/J5oIPNLzZmf+Q5CKncswBSBras\nka+XkZ5QzRm6hFZB7E7q6A==\n-----END PRIVATE KEY-----\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pypdf2"], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 11766909, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157165836220874/picture?type=large", "display_name": "Will Corrigan", "link": "https://stackoverflow.com/users/11766909/will-corrigan"}, "is_accepted": true, "score": 1, "last_activity_date": 1562840244, "creation_date": 1562840244, "answer_id": 56986948, "question_id": 56978004, "link": "https://stackoverflow.com/questions/56978004/looping-through-a-page-range-in-pypdf-pdffilereader-gives-strange-loops/56986948#56986948", "title": "Looping through a page range in PyPDF PdfFileReader gives strange loops", "body": "<p>I've finally figured it out (sorry, I'm just a hobbyist coder so it wasn't evident at first!) The program loops through every PDF in the directory (of which the extracted and renamed single page documents are contained). If you change the range to range(1, pdfReader.numPages) it was ignoring all of these newly created documents because they were all 1 page long! When it was set to 0 it included all of these newly created ones and duplicated them.</p>\n\n<p>All I had to do was move the extracted and renamed folders to a different directory. Feels really obvious now that I've done it! I also removed the pdfFileObj = open(fullpath, \"rb\") since reader apparently does it automagically and all works now!</p>\n"}], "owner": {"reputation": 11, "user_id": 11766909, "user_type": "registered", "profile_image": "https://graph.facebook.com/10157165836220874/picture?type=large", "display_name": "Will Corrigan", "link": "https://stackoverflow.com/users/11766909/will-corrigan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 881, "favorite_count": 0, "accepted_answer_id": 56986948, "answer_count": 1, "score": 0, "last_activity_date": 1562840244, "creation_date": 1562789726, "last_edit_date": 1562795230, "question_id": 56978004, "link": "https://stackoverflow.com/questions/56978004/looping-through-a-page-range-in-pypdf-pdffilereader-gives-strange-loops", "title": "Looping through a page range in PyPDF PdfFileReader gives strange loops", "body": "<p>I have a <a href=\"https://www.ets.org/Media/Tests/GRE/pdf/gre_research_validity_data.pdf\" rel=\"nofollow noreferrer\">PDF</a>, which consists of 4 pages and I want to separate it into separate documents and rename them based on their page number. The problem is that I have a loop to loop through each page based on: for page in range(0, pdfReader.numpages) but every time it should end it keeps going and creates duplicates. I made a print(page) to see what was going on and got:</p>\n\n<p>0\n1 2 3 0 0 0 0</p>\n\n<p>Switching the range to range(1, pdfReader.numpages) makes the loop 1,2,3 and skips the first page. Making the loop (0, pdfReader.numpages+1) gives the correct output of files but gives the error IndexError: list index out of range</p>\n\n<pre><code>import os, PyPDF2, re, tika, time\nfrom tika import parser\n\ndef split_pdf_pages(root_directory, extract_to_folder):\n    for root, dirs, files in os.walk(root_directory):\n        for filename in files:\n            basename, extension = os.path.splitext(filename)\n\n            if extension == \".pdf\":\n                fullpath = root + \"\\\\\" + basename + extension\n                pdfFileObj = open(fullpath, \"rb\")\n                pdfReader = PyPDF2.PdfFileReader(pdfFileObj)\n\n                for page in range(0, pdfReader.numPages):\n                    print(page)\n                    pdfWriter = PyPDF2.PdfFileWriter()\n                    pageObj = pdfReader.getPage(page)\n\n                    outputpdf = extract_to_folder + \"\\\\\" + basename + \"-{}.pdf\".format(page+1)\n                    pdfWriter.addPage(pageObj)\n\n                    with open(outputpdf, \"wb\") as f:\n\n                        pdfWriter.write(f)\n\n                pdfFileObj.close()\n</code></pre>\n\n<p>I expect to get files named filename-1, filename-2.pdf etc but instead get filename-1, filename-1-1, filename-2, filename2-2 etc UNLESS it's range(1,pdfReader.numPages) where it works correctly but skips the first page! It's driving me mad, please help.</p>\n"}, {"tags": ["python", "django", "orm", "django-orm"], "comments": [{"owner": {"reputation": 17762, "user_id": 548562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26587173d9156d8ec3114c8700d1b693?s=128&d=identicon&r=PG", "display_name": "Iain Shelvington", "link": "https://stackoverflow.com/users/548562/iain-shelvington"}, "edited": false, "score": 0, "creation_date": 1562789774, "post_id": 56978002, "comment_id": 100492088, "body": "Why do you need to do this? Can you give an example?"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1562789844, "post_id": 56978002, "comment_id": 100492113, "body": "You will need to explain what your desired output is. Python doesn&#39;t have &quot;maps&quot; - do you mean a dict?"}, {"owner": {"reputation": 5166, "user_id": 6077549, "user_type": "registered", "accept_rate": 5, "profile_image": "https://i.stack.imgur.com/WiL4J.png?s=128&g=1", "display_name": "alltej", "link": "https://stackoverflow.com/users/6077549/alltej"}, "edited": false, "score": 0, "creation_date": 1562792951, "post_id": 56978002, "comment_id": 100493311, "body": "Yes, it would be a dictionary."}, {"owner": {"reputation": 5166, "user_id": 6077549, "user_type": "registered", "accept_rate": 5, "profile_image": "https://i.stack.imgur.com/WiL4J.png?s=128&g=1", "display_name": "alltej", "link": "https://stackoverflow.com/users/6077549/alltej"}, "edited": false, "score": 0, "creation_date": 1562793053, "post_id": 56978002, "comment_id": 100493352, "body": "I was looking for something where I don&#39;t have to iterate and adding them to the list"}, {"owner": {"reputation": 5166, "user_id": 6077549, "user_type": "registered", "accept_rate": 5, "profile_image": "https://i.stack.imgur.com/WiL4J.png?s=128&g=1", "display_name": "alltej", "link": "https://stackoverflow.com/users/6077549/alltej"}, "edited": false, "score": 0, "creation_date": 1562793130, "post_id": 56978002, "comment_id": 100493382, "body": "Updated the title and question to be specific and not confusing"}, {"owner": {"reputation": 538898, "user_id": 104349, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0f4cefeedec5163556751d61625eedd0?s=128&d=identicon&r=PG", "display_name": "Daniel Roseman", "link": "https://stackoverflow.com/users/104349/daniel-roseman"}, "edited": false, "score": 0, "creation_date": 1562829896, "post_id": 56978002, "comment_id": 100502675, "body": "A dictionary of <i>what</i> to <i>what</i>? What are the keys? What are the values?"}, {"owner": {"reputation": 5166, "user_id": 6077549, "user_type": "registered", "accept_rate": 5, "profile_image": "https://i.stack.imgur.com/WiL4J.png?s=128&g=1", "display_name": "alltej", "link": "https://stackoverflow.com/users/6077549/alltej"}, "edited": false, "score": 0, "creation_date": 1562847511, "post_id": 56978002, "comment_id": 100512604, "body": "dictionary of string keys and values are any objects. i can iterate and add them manually via:       <code>for item in items.iterator():              my_dictionary[item.id].append(item)</code>"}], "owner": {"reputation": 5166, "user_id": 6077549, "user_type": "registered", "accept_rate": 5, "profile_image": "https://i.stack.imgur.com/WiL4J.png?s=128&g=1", "display_name": "alltej", "link": "https://stackoverflow.com/users/6077549/alltej"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562793104, "creation_date": 1562789714, "last_edit_date": 1562793104, "question_id": 56978002, "link": "https://stackoverflow.com/questions/56978002/how-do-i-convert-a-django-queryset-into-a-dictionary-with-list-of-objects-withou", "title": "How do I convert a Django QuerySet into a Dictionary with List of Objects without iterating to the queryset?", "body": "<p>I need to filter and map the result to a dictionary of string keys and list of object values. Something like in Java will result to <code>Map&lt;String, List&lt;SomeDbModel&gt;&gt;</code>.</p>\n"}, {"tags": ["python", "django", "postgresql"], "comments": [{"owner": {"reputation": 2176, "user_id": 5548239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3d4b389a1348b049b1411d2be29d5515?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Swain", "link": "https://stackoverflow.com/users/5548239/dan-swain"}, "edited": false, "score": 2, "creation_date": 1562789945, "post_id": 56977983, "comment_id": 100492151, "body": "Are you working in a virtual environment?  If so, did you install psycopg2-binary into the virtual environment?"}, {"owner": {"reputation": 13, "user_id": 9552002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8384f935c18a8428068e011585ceedbe?s=128&d=identicon&r=PG&f=1", "display_name": "minidev", "link": "https://stackoverflow.com/users/9552002/minidev"}, "reply_to_user": {"reputation": 2176, "user_id": 5548239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3d4b389a1348b049b1411d2be29d5515?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Swain", "link": "https://stackoverflow.com/users/5548239/dan-swain"}, "edited": false, "score": 0, "creation_date": 1562910398, "post_id": 56977983, "comment_id": 100534834, "body": "Yes i am working virtual env. I downloaede psycop2-binary but not find postgresql"}, {"owner": {"reputation": 13, "user_id": 9552002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8384f935c18a8428068e011585ceedbe?s=128&d=identicon&r=PG&f=1", "display_name": "minidev", "link": "https://stackoverflow.com/users/9552002/minidev"}, "reply_to_user": {"reputation": 2176, "user_id": 5548239, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3d4b389a1348b049b1411d2be29d5515?s=128&d=identicon&r=PG&f=1", "display_name": "Dan Swain", "link": "https://stackoverflow.com/users/5548239/dan-swain"}, "edited": false, "score": 0, "creation_date": 1563716424, "post_id": 56977983, "comment_id": 100783412, "body": "This problem not fixed. Why i can&#39;t use PostgreSQL ?"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 9552002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8384f935c18a8428068e011585ceedbe?s=128&d=identicon&r=PG&f=1", "display_name": "minidev", "link": "https://stackoverflow.com/users/9552002/minidev"}, "is_accepted": true, "score": 0, "last_activity_date": 1564304658, "creation_date": 1564304658, "answer_id": 57239391, "question_id": 56977983, "link": "https://stackoverflow.com/questions/56977983/how-can-i-fix-postgresql-setup-problem-from-django/57239391#57239391", "title": "How can I fix PostgreSQL setup problem from Django?", "body": "<p>This problem solved. </p>\n\n<p>You can only update django last version.</p>\n"}], "owner": {"reputation": 13, "user_id": 9552002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8384f935c18a8428068e011585ceedbe?s=128&d=identicon&r=PG&f=1", "display_name": "minidev", "link": "https://stackoverflow.com/users/9552002/minidev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "accepted_answer_id": 57239391, "answer_count": 1, "score": 0, "last_activity_date": 1564304658, "creation_date": 1562789633, "last_edit_date": 1562789989, "question_id": 56977983, "link": "https://stackoverflow.com/questions/56977983/how-can-i-fix-postgresql-setup-problem-from-django", "title": "How can I fix PostgreSQL setup problem from Django?", "body": "<p>I created PostgreSQL in Django project. When I do migrate for database it's return this exception.</p>\n\n<pre><code>django.core.exceptions.ImproperlyConfigured: 'django.db.backends.postgresql'\nisn't an available database backend.\nTry using 'django.db.backends.XXX', where XXX is one of:\n    'mysql', 'oracle', 'sqlite3'\n</code></pre>\n\n<p>I tried <code>postgresql_psycopg2</code> and <code>pip install psycopg2-binary</code> but doesn't  work.</p>\n\n<pre><code>DATABASES = {\n    'default': {\n        'ENGINE': 'django.db.backends.postgresql',\n        'NAME': 'eatadil',\n        'USER': 'postgre',\n        'PASSWORD': 'realpassword',\n        'HOST': 'localhost',\n        'PORT': '5432',\n    }\n}\n</code></pre>\n\n<p>How can I fix this problem?</p>\n"}, {"tags": ["python", "python-3.x"], "comments": [{"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 2, "creation_date": 1562789753, "post_id": 56977980, "comment_id": 100492079, "body": "You say <i>the code ending straight after the input part</i> but then <i>The code never ends as well</i>. So which one is it? Please provide more information on what exactly goes wrong. Since this code uses <code>input</code>, give example inputs with expected VS. actual results. Does anything gets printed to the screen at all?"}, {"owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 2, "creation_date": 1562790013, "post_id": 56977980, "comment_id": 100492182, "body": "Also, I will take a wild guess here and assume that because you didn&#39;t do <code>int(input(...))</code>, your input is a string and you&#39;re comparing it to an int so any of the conditions ever hold, and your loop runs forever..."}, {"owner": {"reputation": 43029, "user_id": 7505395, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4t4nq.jpg?s=128&g=1", "display_name": "Patrick Artner", "link": "https://stackoverflow.com/users/7505395/patrick-artner"}, "reply_to_user": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "edited": false, "score": 0, "creation_date": 1562790200, "post_id": 56977980, "comment_id": 100492268, "body": "input() == string, you test against integer as @Tomerikoo pointed out ..."}, {"owner": {"reputation": 8788, "user_id": 2236401, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/06a91e6a7b9d4c46e5a39e18a5491a93?s=128&d=identicon&r=PG", "display_name": "sedavidw", "link": "https://stackoverflow.com/users/2236401/sedavidw"}, "edited": false, "score": 1, "creation_date": 1562790736, "post_id": 56977980, "comment_id": 100492467, "body": "Would also like to point out that you seem to be using the <code>Forever</code> variable as a method of breaking out of the loop, you can just use <code>break</code> to do that when you&#39;ve reached a condition where you want out of the loop"}, {"owner": {"reputation": 1, "user_id": 11766890, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eTJRnK68kSI/AAAAAAAAAAI/AAAAAAAAAOI/Yxi1U5p8bJU/photo.jpg?sz=128", "display_name": "Jammy 9420", "link": "https://stackoverflow.com/users/11766890/jammy-9420"}, "edited": false, "score": 0, "creation_date": 1562825151, "post_id": 56977980, "comment_id": 100500419, "body": "The code doesn&#39;t do anything after you input. Thanks for the help anyway guys"}], "answers": [{"tags": [], "owner": {"reputation": 11839, "user_id": 6045800, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153412706975770/picture?type=large", "display_name": "Tomerikoo", "link": "https://stackoverflow.com/users/6045800/tomerikoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1562790854, "last_edit_date": 1562790854, "creation_date": 1562790362, "answer_id": 56978147, "question_id": 56977980, "link": "https://stackoverflow.com/questions/56977980/while-and-if-loops-not-able-to-get-working/56978147#56978147", "title": "While and if loops not able to get working", "body": "<p>I don't know why you are taking one input with <code>input</code> and one with <code>getpass</code>, but anyway you should change both to:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>answer1 = int(getpass.getpass(...)) \nanswer2 = int(input(...))\n</code></pre>\n\n<p>All your conditions are of the form: <code>answer1 == 2</code>. The result of <code>input</code> is a string, so all those checks fail unless you convert the input to an int.</p>\n\n<hr>\n\n<p>I would suggest also changing the conditions to make the code simpler. You could actually have just 3! Most basic suggestion: Instead of 3 different checks printing <code>DRAW!</code> you could do:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>if answer1 == answer2:\n    print('DRAW PLAY AGAIN !')\n</code></pre>\n\n<hr>\n\n<p>Last note: in python, don't use an int to check the loop... Either do <code>while True:</code> and <code>break when</code> necessary, or simply use a <code>Boolean</code> variable.</p>\n"}], "owner": {"reputation": 1, "user_id": 11766890, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eTJRnK68kSI/AAAAAAAAAAI/AAAAAAAAAOI/Yxi1U5p8bJU/photo.jpg?sz=128", "display_name": "Jammy 9420", "link": "https://stackoverflow.com/users/11766890/jammy-9420"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1562790854, "creation_date": 1562789614, "last_edit_date": 1562790008, "question_id": 56977980, "link": "https://stackoverflow.com/questions/56977980/while-and-if-loops-not-able-to-get-working", "title": "While and if loops not able to get working", "body": "<p>I don't know why but I keep getting the code ending straight after the input part.</p>\n\n<p>I have tried using <code>elif</code> but i get invalid syntax.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import getpass \n\nanswer1 = getpass.getpass(prompt = \"Hello Player 1, Please pick either     ROCK (1)    SCISSORS (2)   OR   PAPER (3) \\n\")  \n\nanswer2 = input((\"Hello Player 2, Please pick either     ROCK (1)    SCISSORS (2)   OR   PAPER (3) \\n\")) \n\nForever = 0\nwhile Forever &lt; 1:  \n   if answer1 == 1 and answer2 == 1:  \n      print('DRAW PLAY AGAIN !')  \n      Forever = Forever + 1 \n\n   if answer1 == 2 and answer2 == 2:  \n      print('DRAW PLAY AGAIN !')  \n      Forever = Forever + 1 \n\n   if answer1 == 3 and answer2 == 3:  \n      print('DRAW PLAY AGAIN !')  \n      Forever = Forever + 1 \n\n   if answer1 == 1 and answer2 == 2:  \n      print('Player 1 wins !') \n      Forever = Forever + 1 \n\n   if answer1 == 3 and answer2 == 1:  \n      print('Player 1 wins !')  \n      Forever = Forever + 1 \n\n   if answer1 == 2 and answer2 == 3:  \n      print('Player 1 wins !')  \n      Forever = Forever + 1 \n\n   if answer1 == 2 and answer2 == 1:  \n      print('Player 2 wins !')  \n      Forever = Forever + 1 \n\n   if answer1 == 1 and answer2 == 3:  \n      print('Player 2 wins !')  \n      Forever = Forever + 1 \n\n   if answer1 == 3 and answer2 == 2:  \n      print('Player 2 wins !')  \n      Forever = Forever + 1 \n</code></pre>\n\n<p>The code never ends as well.</p>\n"}, {"tags": ["python", "python-3.x", "beautifulsoup", "python-requests"], "answers": [{"tags": [], "owner": {"reputation": 88, "user_id": 11145532, "user_type": "registered", "profile_image": "https://graph.facebook.com/2129508277140840/picture?type=large", "display_name": "Richard Ewing", "link": "https://stackoverflow.com/users/11145532/richard-ewing"}, "is_accepted": true, "score": 0, "last_activity_date": 1562798802, "last_edit_date": 1562798802, "creation_date": 1562790804, "answer_id": 56978237, "question_id": 56977966, "link": "https://stackoverflow.com/questions/56977966/error-scraping-amazon-data-with-python-and-beautifulsoup/56978237#56978237", "title": "Error scraping Amazon Data with Python and BeautifulSoup", "body": "<p>I made a few adjustments to your code and this should get you back on the right track:</p>\n\n<pre><code>import requests\nfrom bs4 import BeautifulSoup\n\njblCharge4URL = 'https://www.amazon.de/JBL-Charge-Bluetooth-Lautsprecher-Schwarz-      integrierter/dp/B07HGHRYCY/ref=sr_1_2_sspa?__mk_de_DE=%C3%85M%C3%85%C5%BD%C3%95%C3%91&amp;  keywords=jbl+charge+4&amp;qid=1562775856&amp;s=gateway&amp;sr=8-2-spons&amp;psc=1'\n\ndef get_page(url):\n    page = requests.get(url)\n    soup = BeautifulSoup(page.text, 'html.parser')\n    return soup\n\ndef get_product_name(url):\n    soup = get_page(url)\n    try:\n        title = soup.find(id=\"productTitle\")\n        print(\"SUCCESS\")\n\n    except AttributeError:\n        print(\"ERROR\")\n    return(title)   \nprint(get_product_name(jblCharge4URL))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 74, "user_id": 2160373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97b5c1df089e9d66705ca6fb5f2a69e2?s=128&d=identicon&r=PG", "display_name": "akshayk", "link": "https://stackoverflow.com/users/2160373/akshayk"}, "is_accepted": false, "score": 0, "last_activity_date": 1562791486, "creation_date": 1562791486, "answer_id": 56978384, "question_id": 56977966, "link": "https://stackoverflow.com/questions/56977966/error-scraping-amazon-data-with-python-and-beautifulsoup/56978384#56978384", "title": "Error scraping Amazon Data with Python and BeautifulSoup", "body": "<p>What <code>headers</code> are you using in <code>page = requests.get(url, headers=headers)</code> ?\nYou would want something that tricks the server into believing that you are a genuine user and not a script. I would recommend using something basic like </p>\n\n<pre><code>headers = {'User-Agent': 'Mozilla/5.0 (Windows NT 6.3; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.71 Safari/537.36'}\n</code></pre>\n\n<p>Also, you might want to print the value of variable <code>soup</code> in your exception as you debug this issue. Printing <code>soup</code> will give you the HTML of the page and you can then dig inside the source code to understand where the issue lies.</p>\n"}, {"tags": [], "owner": {"reputation": 2238, "user_id": 2681088, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5I395.png?s=128&g=1", "display_name": "pdm", "link": "https://stackoverflow.com/users/2681088/pdm"}, "is_accepted": false, "score": 0, "last_activity_date": 1562792101, "creation_date": 1562792101, "answer_id": 56978504, "question_id": 56977966, "link": "https://stackoverflow.com/questions/56977966/error-scraping-amazon-data-with-python-and-beautifulsoup/56978504#56978504", "title": "Error scraping Amazon Data with Python and BeautifulSoup", "body": "<p>Apart from using <code>requests</code> and <code>BeautifulSoup</code> combination, you could also use the <a href=\"https://github.com/kennethreitz/requests-html\" rel=\"nofollow noreferrer\">requests-html</a> package to download your web page and parse the content at the same time. An example of using requests-html would be:</p>\n\n<pre><code>from requests_html import HTMLSession\n\nurl = r\"https://www.amazon.de/JBL-Charge-Bluetooth-Lautsprecher-Schwarz-integrierter/dp/B07HGHRYCY/\"\n\nreq = HTMLSession().get(url)\nproduct_title = req.html.find(\"#productTitle\", first=True)\nprint(product_title.text)  #JBL Charge 4 Bluetooth-Lautsprecher in Schwarz \u2013 Wasserfeste, portable Boombox mit integrierter Powerbank \u2013 Mit nur einer Akku-Ladung bis zu 20 Stunden kabellos Musik streamen\n</code></pre>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 13, "user_id": 11766912, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FUN-2-QYD28/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd9w1Gj5v4hIGWZfMPIFXkPMD7BvQ/photo.jpg?sz=128", "display_name": "Max Spanier", "link": "https://stackoverflow.com/users/11766912/max-spanier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 895, "favorite_count": 0, "accepted_answer_id": 56978237, "answer_count": 3, "score": 1, "last_activity_date": 1562798802, "creation_date": 1562789564, "last_edit_date": 1562791892, "question_id": 56977966, "link": "https://stackoverflow.com/questions/56977966/error-scraping-amazon-data-with-python-and-beautifulsoup", "title": "Error scraping Amazon Data with Python and BeautifulSoup", "body": "<p>I just started with Python and I have this strange behaviour that Python gives me an Error most of the time and sometimes it compiles my code correctly.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import requests\nfrom bs4 import BeautifulSoup\n\njblCharge4URL = 'https://www.amazon.de/JBL-Charge-Bluetooth-Lautsprecher-Schwarz-integrierter/dp/B07HGHRYCY/ref=sr_1_2_sspa?__mk_de_DE=%C3%85M%C3%85%C5%BD%C3%95%C3%91&amp;keywords=jbl+charge+4&amp;qid=1562775856&amp;s=gateway&amp;sr=8-2-spons&amp;psc=1'\n\ndef get_page(url):\n    page = requests.get(url, headers=headers)\n    soup = BeautifulSoup(page.content, 'html.parser')\n    return soup\n\ndef get_product_name(url):\n    soup = get_page(url)\n    try:\n        title = soup.find(id=\"productTitle\").get_text()\n        print(\"SUCCESS\")\n    except AttributeError:\n        print(\"ERROR\")\nwhile(True)\n    print(get_product_name(jblCharge4URL))\n</code></pre>\n\n<p>Console Output:  </p>\n\n<pre><code>ERROR  \nNone  \nERROR  \nNone  \nERROR  \nNone  \nERROR  \nNone  \nERROR  \nNone  \nERROR  \nNone  \nERROR  \nNone  \nERROR  \nNone  \nERROR  \nNone  \nERROR  \nNone  \nERROR  \nNone  \nERROR  \nNone  \nERROR  \nNone  \nERROR  \nNone  \n**SUCCESS**  \nNone  \nERROR  \nNone  \n**SUCCESS**  \nNone  \nERROR  \nNone  \nERROR  \nNone  \nERROR  \nNone  \nERROR  \nNone  \nERROR  \nNone  \nERROR  \nNone\n</code></pre>\n\n<p>Thanks in Advance</p>\n"}, {"tags": ["python", "psycopg2"], "comments": [{"owner": {"reputation": 641, "user_id": 3527034, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004421854457/picture?type=large", "display_name": "wilkben", "link": "https://stackoverflow.com/users/3527034/wilkben"}, "edited": false, "score": 0, "creation_date": 1562789587, "post_id": 56977953, "comment_id": 100492012, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/35104097/how-to-install-psycopg2-with-pg-config-error\">How to install psycopg2 with pg_config error?</a>"}, {"owner": {"reputation": 1, "user_id": 11766878, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6cb1tNulS8E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfT1v8x48I8B_YoWb4_tWATY6DHmw/photo.jpg?sz=128", "display_name": "Saeed A", "link": "https://stackoverflow.com/users/11766878/saeed-a"}, "reply_to_user": {"reputation": 641, "user_id": 3527034, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004421854457/picture?type=large", "display_name": "wilkben", "link": "https://stackoverflow.com/users/3527034/wilkben"}, "edited": false, "score": 0, "creation_date": 1562790306, "post_id": 56977953, "comment_id": 100492300, "body": "Same problem   sudo apt-get install python-psycopg2 Result : sudo: apt-get: command not found"}], "owner": {"reputation": 1, "user_id": 11766878, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6cb1tNulS8E/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfT1v8x48I8B_YoWb4_tWATY6DHmw/photo.jpg?sz=128", "display_name": "Saeed A", "link": "https://stackoverflow.com/users/11766878/saeed-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 301, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1562789489, "creation_date": 1562789489, "question_id": 56977953, "link": "https://stackoverflow.com/questions/56977953/how-to-install-psycopg2-python-on-mac", "title": "How to install psycopg2 Python on mac?", "body": "<p>I tride to install psycopg2</p>\n\n<ol>\n<li><p>pip install psycopg2\nResult\n-bash: pip: command not found</p></li>\n<li><p>pip install django psycopg2\nResult\n-bash: pip: command not found</p></li>\n<li><p>pip3 install django psycopg2 \nResult</p></li>\n</ol>\n\n<p>Collecting django\n  Using cached <a href=\"https://files.pythonhosted.org/packages/39/b0/2138c31bf13e17afc32277239da53e9dfcce27bac8cb68cf1c0123f1fdf5/Django-2.2.3-py3-none-any.whl\" rel=\"nofollow noreferrer\">https://files.pythonhosted.org/packages/39/b0/2138c31bf13e17afc32277239da53e9dfcce27bac8cb68cf1c0123f1fdf5/Django-2.2.3-py3-none-any.whl</a>\nCollecting psycopg2\n  Using cached <a href=\"https://files.pythonhosted.org/packages/5c/1c/6997288da181277a0c29bc39a5f9143ff20b8c99f2a7d059cfb55163e165/psycopg2-2.8.3.tar.gz\" rel=\"nofollow noreferrer\">https://files.pythonhosted.org/packages/5c/1c/6997288da181277a0c29bc39a5f9143ff20b8c99f2a7d059cfb55163e165/psycopg2-2.8.3.tar.gz</a>\n    Complete output from command python setup.py egg_info:\n    running egg_info\n    creating pip-egg-info/psycopg2.egg-info\n    writing pip-egg-info/psycopg2.egg-info/PKG-INFO\n    writing dependency_links to pip-egg-info/psycopg2.egg-info/dependency_links.txt\n    writing top-level names to pip-egg-info/psycopg2.egg-info/top_level.txt\n    writing manifest file 'pip-egg-info/psycopg2.egg-info/SOURCES.txt'</p>\n\n<pre><code>Error: pg_config executable not found.\n\npg_config is required to build psycopg2 from source.  Please add the directory\ncontaining pg_config to the $PATH or specify the full executable path with the\noption:\n\n    python setup.py build_ext --pg-config /path/to/pg_config build ...\n\nor with the pg_config option in 'setup.cfg'.\n\nIf you prefer to avoid building psycopg2 from source, please install the PyPI\n'psycopg2-binary' package instead.\n\nFor further information please check the 'doc/src/install.rst' file (also at\n&lt;http://initd.org/psycopg/docs/install.html&gt;).\n\n\n----------------------------------------\n</code></pre>\n\n<p>Command \"python setup.py egg_info\" failed with error code 1 in /private/var/folders/w3/c440kx852_ngw54hg111zdmh0000gn/T/pip-install-fck7_ffz/psycopg2/\nYou are using pip version 19.0.3, however version 19.1.1 is available.\nYou should consider upgrading via the 'pip install --upgrade pip' command.</p>\n"}, {"tags": ["python", "scikit-learn", "statsmodels"], "comments": [{"owner": {"reputation": 3653, "user_id": 6520041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-y2Mls6eJLA0/AAAAAAAAAAI/AAAAAAAAAAA/_V6LCP-xzt8/photo.jpg?sz=128", "display_name": "FatihAkici", "link": "https://stackoverflow.com/users/6520041/fatihakici"}, "edited": false, "score": 0, "creation_date": 1562789895, "post_id": 56977952, "comment_id": 100492130, "body": "Look at the averages of the dependent variable over the groups of your independent variables. Or you can look into ANOVA methods"}, {"owner": {"reputation": 3220, "user_id": 11492024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ip64y.png?s=128&g=1", "display_name": "vlemaistre", "link": "https://stackoverflow.com/users/11492024/vlemaistre"}, "edited": false, "score": 0, "creation_date": 1562790044, "post_id": 56977952, "comment_id": 100492194, "body": "You could try training decision trees and look at which variables are used in your tree uses."}, {"owner": {"reputation": 11, "user_id": 11598898, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5QAwZpv3A80/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-VtxcgPLa3m4OdisuG-oo2qQrBQ/mo/photo.jpg?sz=128", "display_name": "Chase Lewis", "link": "https://stackoverflow.com/users/11598898/chase-lewis"}, "reply_to_user": {"reputation": 3653, "user_id": 6520041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-y2Mls6eJLA0/AAAAAAAAAAI/AAAAAAAAAAA/_V6LCP-xzt8/photo.jpg?sz=128", "display_name": "FatihAkici", "link": "https://stackoverflow.com/users/6520041/fatihakici"}, "edited": false, "score": 0, "creation_date": 1562790351, "post_id": 56977952, "comment_id": 100492315, "body": "@FatihAkici what do you mean exactly do you mean by dependent variable one groups of independent variable. Also do you know a good tool to implement the ANOVA method for big data, that will also give p values?"}, {"owner": {"reputation": 11, "user_id": 11598898, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5QAwZpv3A80/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-VtxcgPLa3m4OdisuG-oo2qQrBQ/mo/photo.jpg?sz=128", "display_name": "Chase Lewis", "link": "https://stackoverflow.com/users/11598898/chase-lewis"}, "reply_to_user": {"reputation": 3220, "user_id": 11492024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ip64y.png?s=128&g=1", "display_name": "vlemaistre", "link": "https://stackoverflow.com/users/11492024/vlemaistre"}, "edited": false, "score": 0, "creation_date": 1562790398, "post_id": 56977952, "comment_id": 100492333, "body": "@vlemaistre is there a good tool for decision trees? What exactly would that do in this context"}, {"owner": {"reputation": 3220, "user_id": 11492024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ip64y.png?s=128&g=1", "display_name": "vlemaistre", "link": "https://stackoverflow.com/users/11492024/vlemaistre"}, "edited": false, "score": 0, "creation_date": 1562791278, "post_id": 56977952, "comment_id": 100492681, "body": "Use skikit learn to build a decision tree. Look at how those are created but to sum it up : at each leaf the population is divided in two using the variable that divides it best concerning your variable to predict. As such you can make the assumption that the variables used in your tree (the ones higher up in your tree in preference) are the most influential"}, {"owner": {"reputation": 3653, "user_id": 6520041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-y2Mls6eJLA0/AAAAAAAAAAI/AAAAAAAAAAA/_V6LCP-xzt8/photo.jpg?sz=128", "display_name": "FatihAkici", "link": "https://stackoverflow.com/users/6520041/fatihakici"}, "edited": false, "score": 0, "creation_date": 1562791575, "post_id": 56977952, "comment_id": 100492819, "body": "Yeah, tree-based methods would work perfectly as well. Scikit&#39;s trees or random forests would be ideal. And by the way, 1000 observations and 2000 variables is not big data. If you can open the CSV containing it, it is definitely not big data."}, {"owner": {"reputation": 11, "user_id": 11598898, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5QAwZpv3A80/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-VtxcgPLa3m4OdisuG-oo2qQrBQ/mo/photo.jpg?sz=128", "display_name": "Chase Lewis", "link": "https://stackoverflow.com/users/11598898/chase-lewis"}, "edited": false, "score": 0, "creation_date": 1562792321, "post_id": 56977952, "comment_id": 100493102, "body": "Ok I will try the tree method for now, then. I guess the most influential variables will also have high significance? Can I see p values for each variable somehow? And yeah I guess it\u2019s not really big data. It was too big for JMP at least"}, {"owner": {"reputation": 11, "user_id": 11598898, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5QAwZpv3A80/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-VtxcgPLa3m4OdisuG-oo2qQrBQ/mo/photo.jpg?sz=128", "display_name": "Chase Lewis", "link": "https://stackoverflow.com/users/11598898/chase-lewis"}, "edited": false, "score": 0, "creation_date": 1562848068, "post_id": 56977952, "comment_id": 100512955, "body": "I did the tree method. But I can&#39;t get the file open, maybe because it is 3MB as a .dot file and 10MB as a .ps file. Is there an effective way to visualize the tree? If I output as a string, are the variables in order of importance? I added the code I used and the string output."}, {"owner": {"reputation": 11, "user_id": 11598898, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5QAwZpv3A80/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-VtxcgPLa3m4OdisuG-oo2qQrBQ/mo/photo.jpg?sz=128", "display_name": "Chase Lewis", "link": "https://stackoverflow.com/users/11598898/chase-lewis"}, "edited": false, "score": 0, "creation_date": 1562851109, "post_id": 56977952, "comment_id": 100514958, "body": "Are the variables at the top of the tree the most important? Or the ones that always return true at the bottom of the tree?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11598898, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5QAwZpv3A80/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-VtxcgPLa3m4OdisuG-oo2qQrBQ/mo/photo.jpg?sz=128", "display_name": "Chase Lewis", "link": "https://stackoverflow.com/users/11598898/chase-lewis"}, "edited": false, "score": 0, "creation_date": 1562851744, "post_id": 56983069, "comment_id": 100515380, "body": "Does it narrow it down to 1000 features, and change the 2000 features into 1000 new features? If it&#39;s new features, can this somehow tell me which of the 2000 features are most important?(after using multiple linear regression, for example)"}, {"owner": {"reputation": 1675, "user_id": 4195053, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/8fe7a2c22a65a0bb700fd3f36c869147?s=128&d=identicon&r=PG", "display_name": "mnm", "link": "https://stackoverflow.com/users/4195053/mnm"}, "edited": false, "score": 1, "creation_date": 1562910629, "post_id": 56983069, "comment_id": 100534910, "body": "I will not recommend PCA for dimensionality reduction because it transforms the original variable. This causes an EXPLODED variable count. The OP said there are 2000 variables. PCA will explode this count to greater than 2000 variables! Moreover PCA is for continuous data. And binary is NOT continuous.. Think about it."}], "tags": [], "owner": {"reputation": 4480, "user_id": 10232932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec8ac182af86808de7f193677348c87d?s=128&d=identicon&r=PG&f=1", "display_name": "PV8", "link": "https://stackoverflow.com/users/10232932/pv8"}, "is_accepted": false, "score": 0, "last_activity_date": 1562912780, "last_edit_date": 1562912780, "creation_date": 1562827311, "answer_id": 56983069, "question_id": 56977952, "link": "https://stackoverflow.com/questions/56977952/best-model-for-variable-selection-with-big-data/56983069#56983069", "title": "Best model for variable selection with big data?", "body": "<p><strong>1.Variante A: Feature Selection Scikit</strong></p>\n\n<p>For future selection <code>scikit</code>offers a lot of different approaches:\n<a href=\"https://scikit-learn.org/stable/modules/feature_selection.html\" rel=\"nofollow noreferrer\">https://scikit-learn.org/stable/modules/feature_selection.html</a> </p>\n\n<p>Here it sumps up the comments from above.</p>\n\n<p><strong>2.Variante B: Feature Selection with linear regression</strong></p>\n\n<p>You can also read your feature importance if you run linearregression on it. <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html\" rel=\"nofollow noreferrer\">https://scikit-learn.org/stable/modules/generated/sklearn.linear_model.LinearRegression.html</a> .The function <code>reg.coef_</code>will give you the coefiecents for your futres, the higher the absolute number is, the more important is your feature, so for exmaple 0.8 is a really important future, where 0.00001 is not important.</p>\n\n<p><strong>3.Variante C: PCA (not for binary case)</strong></p>\n\n<p>Why you wanna kill your variables ? I would recommend you to use: PCA - Principal ocmponent analysis <a href=\"https://en.wikipedia.org/wiki/Principal_component_analysis\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Principal_component_analysis</a>.</p>\n\n<p>The basic concept is to transform your 2000 features to a smaller space (maybe 1000 or whatever), while still being mathematically useful.</p>\n\n<p><code>Scikik-learn</code>has a good package for it: <a href=\"https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html\" rel=\"nofollow noreferrer\">https://scikit-learn.org/stable/modules/generated/sklearn.decomposition.PCA.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 442, "user_id": 8912587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8abc75d9c6381a3803d853f7befc210d?s=128&d=identicon&r=PG&f=1", "display_name": "Oskar_U", "link": "https://stackoverflow.com/users/8912587/oskar-u"}, "is_accepted": false, "score": 0, "last_activity_date": 1562828219, "creation_date": 1562828219, "answer_id": 56983321, "question_id": 56977952, "link": "https://stackoverflow.com/questions/56977952/best-model-for-variable-selection-with-big-data/56983321#56983321", "title": "Best model for variable selection with big data?", "body": "<p>I would recommend getting closer look to variance of your variables ot keep those with the largest range (<code>pandas.DataFrame.var()</code>) and eliminate those variables which correlate at most with others (<code>pandas.DataFrame.corr()</code>), as further steps I'd suggest to get any methods mentioned earlier.</p>\n"}], "owner": {"reputation": 11, "user_id": 11598898, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5QAwZpv3A80/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rd-VtxcgPLa3m4OdisuG-oo2qQrBQ/mo/photo.jpg?sz=128", "display_name": "Chase Lewis", "link": "https://stackoverflow.com/users/11598898/chase-lewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1562912780, "creation_date": 1562789479, "last_edit_date": 1562848222, "question_id": 56977952, "link": "https://stackoverflow.com/questions/56977952/best-model-for-variable-selection-with-big-data", "title": "Best model for variable selection with big data?", "body": "<p>I posted a question earlier about some code but now I realize I should be more broad with the general idea. Basically, I'm trying to build a statistical model with about 1000 observations and 2000 variables. I would like to determine which variables are most influential in effecting my dependent variable with high significance. I don't plan to use the model for prediction, just for variable selection. My independent variables are binary and dependent variable is continuous. I've tried multiple linear regression and fixed models with tools such as statsmodels and scikit-learn. However, I have encountered issues such as having more variables than observations. I would prefer to solve the problem in python since I have basic knowledge in it. However, stats is very new to me so I don't know the best direction. Any help is appreciated.</p>\n\n<p>Tree method</p>\n\n<pre><code>import pandas as pd\nfrom sklearn import tree\nfrom sklearn import preprocessing\n\ndata=pd.read_excel('data_file.xlsx')\n\ny=data.iloc[:, -1]\nX=data.iloc[:, :-1]\n\nle=preprocessing.LabelEncoder()\ny=le.fit_transform(y)\n\nclf=tree.DecisionTreeClassifier()\nclf=clf.fit(X,y)\n\ntree.export_graphviz(clf, out_file='tree.dot')\n</code></pre>\n\n<p>Or if I output to text file, the first few lines are:</p>\n\n<pre><code>digraph Tree {\nnode [shape=box] ;\n0 [label=\"X[685] &lt;= 0.5\\ngini = 0.995\\nsamples = 1097\\nvalue = [2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1\\n1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1\\n1, 1, 1, 8, 1, 1, 3, 1, 2, 1, 1, 1, 2, 1\\n1, 1, 1, 2, 1, 1, 1, 1, 1, 4, 1, 1, 1, 1\\n1, 1, 1, 1, 1, 1, 1, 1, 3, 2, 4, 1, 1, 1\\n1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1\\n1, 3, 2, 2, 1, 2, 1, 1, 2, 1, 1, 1, 2, 2\\n1, 1, 1, 1, 1, 1, 30, 3, 1, 3, 1, 1, 2, 1\\n1, 5, 1, 2, 1, 4, 2, 1, 1, 1, 1, 1, 1, 1\\n1, 1, 2, 1, 1, 1, 3, 1, 1, 3, 1, 2, 1, 1\\n1, 7, 3, 1, 1, 4, 1, 1, 1, 1, 1, 1, 1, 1\\n6, 2, 1, 2, 1, 1, 1, 4, 1, 1, 1, 1, 1, 1\\n1, 1, 1, 1, 1, 1, 1, 1, 3, 7, 6, 1, 1, 1\\n1, 1, 3, 4, 1, 1, 1, 1, 1, 4, 1, 2, 1, 1\\n1, 1, 1, 2, 1, 1, 1, 1, 2, 1, 1, 2, 1, 1\\n1, 4, 1, 1, 4, 2, 1, 1, 1, 2, 1, 1, 2, 2\\n11, 1, 1, 2, 1, 3, 1, 1, 1, 1, 1, 1, 12, 1\\n1, 1, 3, 1, 1, 3, 1, 1, 2, 1, 1, 1, 1, 1\\n6, 1, 1, 1, 1, 1, 4, 2, 1, 2, 1, 1, 1, 1\\n1, 1, 1, 1, 3, 1, 1, 3, 1, 1, 1, 1, 1, 1\\n1, 1, 1, 1, 1, 11, 1, 2, 1, 2, 1, 1, 1, 1\\n4, 1, 1, 1, 1, 1, 2, 1, 2, 1, 1, 2, 1, 1\\n1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2\\n1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 3, 3\\n1, 7, 1, 1, 2, 1, 2, 7, 1, 1, 1, 3, 1, 11\\n1, 1, 2, 2, 2, 1, 1, 10, 1, 1, 5, 21, 1, 1\\n11, 1, 2, 1, 1, 1, 1, 1, 5, 15, 3, 1, 1, 1\\n1, 1, 1, 3, 1, 1, 2, 1, 3, 1, 1, 1, 1, 1\\n1, 1, 6, 1, 1, 1, 1, 1, 1, 14, 1, 1, 1, 1\\n17, 1, 1, 1, 1, 1, 1, 1, 2, 3, 1, 1, 1, 4\\n1, 1, 1, 6, 1, 1, 2, 1, 1, 2, 1, 1, 1, 1\\n1, 1, 2, 1, 2, 1, 2, 1, 2, 1, 1, 1, 14, 1\\n3, 1, 1, 1, 2, 1, 2, 2, 1, 1, 1, 1, 3, 1\\n1, 2, 1, 12, 1, 1, 1, 1, 8, 2, 1, 1, 1, 2\\n1, 1, 3, 1, 1, 6, 1, 1, 1, 3, 1, 1, 2, 1\\n1, 1, 1, 1, 4, 1, 1, 2, 1, 3, 2, 4, 1, 3\\n1, 1, 1, 1, 1, 7, 1, 1, 2, 1, 1, 2, 13, 2\\n1, 1, 1, 1, 9, 1, 1, 1, 1, 1, 1, 1, 1, 1\\n9, 1, 2, 5, 7, 1, 1, 1, 2, 9, 2, 2, 13, 1\\n1, 1, 1, 2, 1, 3, 1, 1, 6, 1, 3, 1, 1, 3\\n1, 1, 1, 1, 2, 1, 1, 2, 1, 1, 4, 1, 5, 1\\n4, 1, 2, 3, 3]\"] ;\n1 [label=\"X[990] &lt;= 0.5\\ngini = 0.995\\nsamples = 1040\\nvalue = [2, 2, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1, 1\\n1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 1, 1, 1\\n1, 1, 1, 8, 1, 1, 3, 1, 2, 1, 1, 1, 2, 1\\n1, 1, 1, 2, 1, 1, 1, 1, 1, 4, 1, 1, 1, 1\\n1, 1, 1, 1, 1, 1, 1, 1, 3, 2, 4, 1, 1, 1\\n1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1\\n1, 3, 2, 2, 1, 2, 1, 1, 2, 1, 1, 1, 2, 2\\n1, 1, 1, 1, 1, 1, 30, 3, 1, 3, 1, 1, 2, 1\\n1, 5, 1, 2, 1, 4, 2, 1, 1, 1, 1, 1, 1, 1\\n1, 1, 2, 1, 1, 1, 3, 1, 1, 3, 1, 2, 1, 1\\n1, 7, 3, 1, 1, 4, 1, 1, 1, 1, 1, 1, 1, 1\\n6, 2, 1, 2, 1, 1, 1, 4, 1, 1, 1, 1, 1, 1\\n1, 1, 1, 1, 1, 1, 1, 1, 3, 7, 6, 1, 1, 1\\n1, 1, 3, 4, 1, 1, 1, 1, 1, 4, 1, 2, 1, 1\\n1, 1, 1, 2, 1, 1, 1, 1, 2, 1, 1, 2, 1, 1\\n1, 4, 1, 1, 4, 2, 1, 1, 1, 2, 1, 1, 2, 2\\n11, 1, 1, 2, 1, 3, 1, 1, 1, 1, 1, 1, 12, 1\\n1, 1, 3, 1, 1, 3, 1, 1, 2, 1, 1, 1, 1, 1\\n6, 1, 0, 1, 1, 1, 4, 2, 1, 2, 1, 1, 1, 1\\n1, 1, 1, 1, 3, 1, 1, 3, 1, 1, 1, 0, 1, 1\\n1, 1, 1, 1, 1, 9, 1, 2, 1, 2, 1, 1, 1, 1\\n4, 1, 1, 1, 1, 1, 2, 1, 2, 1, 1, 2, 1, 1\\n1, 1, 1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2\\n1, 2, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 3, 3\\n1, 7, 1, 1, 2, 1, 2, 7, 1, 1, 1, 1, 1, 11\\n1, 1, 2, 2, 2, 1, 1, 10, 1, 1, 5, 21, 1, 1\\n1, 1, 2, 1, 1, 1, 1, 1, 5, 15, 3, 1, 1, 1\\n1, 1, 1, 3, 1, 1, 2, 1, 3, 1, 1, 0, 1, 1\\n1, 1, 6, 1, 1, 1, 1, 1, 1, 14, 1, 1, 1, 1\\n16, 1, 1, 1, 1, 1, 1, 1, 2, 3, 1, 1, 1, 4\\n1, 1, 1, 6, 1, 1, 2, 1, 1, 2, 1, 1, 1, 1\\n1, 1, 2, 1, 2, 1, 2, 1, 2, 1, 1, 1, 0, 1\\n3, 1, 1, 1, 2, 1, 2, 2, 1, 1, 1, 1, 3, 1\\n1, 2, 1, 12, 1, 1, 1, 1, 8, 2, 0, 1, 1, 2\\n1, 1, 3, 1, 1, 6, 1, 1, 1, 3, 1, 1, 2, 0\\n1, 1, 1, 1, 4, 1, 1, 2, 1, 3, 2, 4, 1, 3\\n1, 1, 1, 1, 1, 7, 1, 1, 2, 1, 0, 1, 3, 2\\n1, 1, 1, 0, 9, 1, 1, 1, 1, 1, 1, 1, 1, 1\\n9, 1, 2, 5, 6, 1, 1, 1, 2, 9, 2, 2, 13, 1\\n1, 1, 1, 2, 1, 3, 1, 1, 6, 1, 3, 1, 0, 3\\n1, 0, 1, 1, 2, 0, 1, 2, 1, 1, 0, 1, 5, 1\\n4, 1, 0, 3, 3]\"] ;\n</code></pre>\n"}, {"tags": ["python", "python-3.x", "pandas"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 7353600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rwDwP.png?s=128&g=1", "display_name": "Julz", "link": "https://stackoverflow.com/users/7353600/julz"}, "edited": false, "score": 0, "creation_date": 1562837379, "post_id": 56978052, "comment_id": 100506586, "body": "Thank you. This looks much cleaner. However, the output is not exactly what I need. Using your dummy data the output should have only 4 columns (one for each set of measurements) and 10 rows. So m_number should range from 0 to 9 and value from 1 to 4."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 55, "user_id": 7353600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rwDwP.png?s=128&g=1", "display_name": "Julz", "link": "https://stackoverflow.com/users/7353600/julz"}, "edited": false, "score": 0, "creation_date": 1562843513, "post_id": 56978052, "comment_id": 100510246, "body": "@julz okay... I&#39;ll have a look and see what I can modify to get desired output.   Thanks for the feedback."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 55, "user_id": 7353600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rwDwP.png?s=128&g=1", "display_name": "Julz", "link": "https://stackoverflow.com/users/7353600/julz"}, "edited": false, "score": 0, "creation_date": 1562850994, "post_id": 56978052, "comment_id": 100514879, "body": "@Julz... okay, I think I corrected the expected output.  Changing the order of the <code>set_index</code> and unstacking the inner most level transpose the number as you have descripted here.  If I understand you correctly."}, {"owner": {"reputation": 55, "user_id": 7353600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rwDwP.png?s=128&g=1", "display_name": "Julz", "link": "https://stackoverflow.com/users/7353600/julz"}, "edited": false, "score": 1, "creation_date": 1562875186, "post_id": 56978052, "comment_id": 100527025, "body": "Yes, thank you. Now it does exactly what I need. One comment: I just played a bit around with your code to understand what&#39;s happening. I noticed that it would have been enough to use unstack(level=0) on your first solution to achieve the same result."}, {"owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "reply_to_user": {"reputation": 55, "user_id": 7353600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rwDwP.png?s=128&g=1", "display_name": "Julz", "link": "https://stackoverflow.com/users/7353600/julz"}, "edited": false, "score": 0, "creation_date": 1562875298, "post_id": 56978052, "comment_id": 100527076, "body": "@Julz... yes you are absolutely correct.  That would have been the most efficient way to change the code.  Thank you for that oberservation.  Happy coding!"}], "tags": [], "owner": {"reputation": 112399, "user_id": 6361531, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BRRGS.png?s=128&g=1", "display_name": "Scott Boston", "link": "https://stackoverflow.com/users/6361531/scott-boston"}, "is_accepted": true, "score": 0, "last_activity_date": 1566656522, "last_edit_date": 1566656522, "creation_date": 1562789965, "answer_id": 56978052, "question_id": 56977916, "link": "https://stackoverflow.com/questions/56977916/merge-multiple-measurements-into-a-pandas-dataframe/56978052#56978052", "title": "Merge multiple measurements into a pandas dataframe", "body": "<p>You can use <code>cumsum</code>, <code>set_index</code>, and <code>unstack</code> to do this is three lines of code:</p>\n\n<pre><code>#Create dummy data with 4 runs of 10 measures\ndf = pd.DataFrame({'m_number':np.tile(np.arange(10),4), 'value':np.random.random(40)})\n</code></pre>\n\n<p><strike>#Use condition to find first run and increment using cumsum and unstack to create<br>\nMultiIndex column headers<br>\ndf_u = df.set_index([df['m_number'].eq(0).cumsum(), df['m_number']])[['value']].unstack()</strike></p>\n\n<pre><code>#Use condition to find first run and increment using cumsum and unstack to create  \n#MultiIndex column headers (Corrected per comments below)\ndf_u = df.set_index([df['m_number'], df['m_number'].eq(0).cumsum()])[['value']].unstack()\n\n#Flatten MultiIndex column headers \ndf_u.columns = [f'{i}_{j}' for i, j in df_u.columns]\n\n#Display results\ndf_u\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>           value_1   value_2   value_3   value_4\nm_number                                        \n0         0.919057  0.064409  0.288592  0.742759\n1         0.449587  0.867031  0.193493  0.853700\n2         0.551929  0.925111  0.895273  0.117306\n3         0.487501  0.893696  0.696540  0.381469\n4         0.389431  0.818801  0.771516  0.489404\n5         0.790619  0.478995  0.023236  0.344112\n6         0.015389  0.815073  0.195856  0.628263\n7         0.068860  0.483731  0.752803  0.581106\n8         0.109404  0.281335  0.330910  0.909965\n9         0.695120  0.538676  0.766864  0.247283\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 7353600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rwDwP.png?s=128&g=1", "display_name": "Julz", "link": "https://stackoverflow.com/users/7353600/julz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 56978052, "answer_count": 1, "score": 1, "last_activity_date": 1566656522, "creation_date": 1562789266, "last_edit_date": 1562851165, "question_id": 56977916, "link": "https://stackoverflow.com/questions/56977916/merge-multiple-measurements-into-a-pandas-dataframe", "title": "Merge multiple measurements into a pandas dataframe", "body": "<p>I have some measurements organized in <em>*.csv</em> files as follows:</p>\n\n<pre><code>m_number,value\n0,0.154\n1,0.785\n\u2026\n55,0.578\nNaN,NaN\n0,1.214\n1,0.742\n\u2026 \n</code></pre>\n\n<p>So there is always a set of <em>x</em> measurements (<em>x</em> should be constant inside a single file but it's not guaranteed and I have to check this number) separated by a <em>NaN</em> line.</p>\n\n<p>After reading the data into a dataframe, I want to reorganize it for later usage:</p>\n\n<pre><code>  m_number    value 1      value 2      value 3      value 4  \n0        0      0.154        0.214        0.229        0.234       \n1        1      0.785        0.742        0.714        0.771\n...\n55      55      0.578        0.647        0.597        0.623\n</code></pre>\n\n<p>Each set of measurements should be one column.</p>\n\n<p>Here's a snippet of the code:</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>split_index = df.index[df_benchmark['id'].isnull()]\ndf_sliced = pd.DataFrame()\nfor i, index in enumerate(split_index):\n    if i == 0:\n        df_sliced = df.loc[0:index - 1].copy()\n    else:\n        #ToDo: Rename first column to 'value 1' if more than 1 measurement\n        temp = df['value'].loc[0:index - 1].copy()\n        temp.reset_index(drop=True, inplace=True)\n        df_sliced['value '+str(i)] = temp\n    df.drop(df.index[0:index - split_index[i - 1]], inplace=True)\n</code></pre>\n\n<p>The code works, but I do not like my current approach. So I'm asking if there's a better and more elegant solution for this problem.</p>\n\n<p>Best,\nJulz</p>\n"}, {"tags": ["python", "pandas"], "comments": [{"owner": {"reputation": 9233, "user_id": 2074981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BXy8T.jpg?s=128&g=1", "display_name": "ASGM", "link": "https://stackoverflow.com/users/2074981/asgm"}, "edited": false, "score": 0, "creation_date": 1562789344, "post_id": 56977881, "comment_id": 100491919, "body": "Will it always be the case that countries in the same region will follow each other?  Or might you have <code>USA, IND, MEX, UK</code>?"}, {"owner": {"reputation": 114459, "user_id": 4238408, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RWkmO.jpg?s=128&g=1", "display_name": "Quang Hoang", "link": "https://stackoverflow.com/users/4238408/quang-hoang"}, "edited": false, "score": 0, "creation_date": 1562789375, "post_id": 56977881, "comment_id": 100491930, "body": "<code>df[&#39;Region&#39;] = df[&#39;Region&#39;].ffill()</code>?"}, {"owner": {"reputation": 167, "user_id": 10157587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f80c94470adfc2b921b1ab6009287a?s=128&d=identicon&r=PG&f=1", "display_name": "sayo", "link": "https://stackoverflow.com/users/10157587/sayo"}, "reply_to_user": {"reputation": 9233, "user_id": 2074981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BXy8T.jpg?s=128&g=1", "display_name": "ASGM", "link": "https://stackoverflow.com/users/2074981/asgm"}, "edited": false, "score": 0, "creation_date": 1562789421, "post_id": 56977881, "comment_id": 100491947, "body": "@ASGM they might not follow each other"}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1562789466, "post_id": 56977881, "comment_id": 100491965, "body": "make a dictionary, <code>d</code>, of the mappings then <code>df.fillna({&#39;Region&#39;: df.Country.map(d)})</code>"}, {"owner": {"reputation": 9233, "user_id": 2074981, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BXy8T.jpg?s=128&g=1", "display_name": "ASGM", "link": "https://stackoverflow.com/users/2074981/asgm"}, "edited": false, "score": 0, "creation_date": 1562789510, "post_id": 56977881, "comment_id": 100491987, "body": "As ALollz implies, you&#39;re going to need some other data (possibly in a dictionary where keys are countries and values are regions) with region-country matches before you can solve this problem."}, {"owner": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 1, "creation_date": 1562789574, "post_id": 56977881, "comment_id": 100492008, "body": "Well if the data is complete enough, and uniquely paired, then the dictionary can be made from <code>d = df.dropna(subset=[&#39;Region&#39;]).set_index(&#39;Country&#39;).Region.to_&zwnj;&#8203;dict()</code>"}, {"owner": {"reputation": 167, "user_id": 10157587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f80c94470adfc2b921b1ab6009287a?s=128&d=identicon&r=PG&f=1", "display_name": "sayo", "link": "https://stackoverflow.com/users/10157587/sayo"}, "reply_to_user": {"reputation": 46860, "user_id": 4333359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/231e42e97a07b2937c1bf8a313dfa3f7?s=128&d=identicon&r=PG&f=1", "display_name": "ALollz", "link": "https://stackoverflow.com/users/4333359/alollz"}, "edited": false, "score": 0, "creation_date": 1562789833, "post_id": 56977881, "comment_id": 100492109, "body": "@ALollz yes thats correct i didn&#39;t think of this. I will make a dict and map it. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 10157587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f80c94470adfc2b921b1ab6009287a?s=128&d=identicon&r=PG&f=1", "display_name": "sayo", "link": "https://stackoverflow.com/users/10157587/sayo"}, "edited": false, "score": 0, "creation_date": 1562790376, "post_id": 56978041, "comment_id": 100492326, "body": "yes i had to do this is my data wasn&#39;t uniquely paired"}], "tags": [], "owner": {"reputation": 106, "user_id": 11706296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99b2281777e9b8616d94adc94ba26e77?s=128&d=identicon&r=PG&f=1", "display_name": "rommy", "link": "https://stackoverflow.com/users/11706296/rommy"}, "is_accepted": true, "score": 1, "last_activity_date": 1562790523, "last_edit_date": 1562790523, "creation_date": 1562789918, "answer_id": 56978041, "question_id": 56977881, "link": "https://stackoverflow.com/questions/56977881/replace-null-values-in-a-column-corresponding-to-specific-value-in-another-colum/56978041#56978041", "title": "Replace null values in a column corresponding to specific value in another column pandas", "body": "<p>You can try below code if ffill is not an option, </p>\n\n<pre><code>df['Region'] = np.select((df.Country.isin(['USA', 'MEX']), df.Country == 'UK'),\n                         ('Americas', 'Europe'), df.Region) \n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 10157587, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11f80c94470adfc2b921b1ab6009287a?s=128&d=identicon&r=PG&f=1", "display_name": "sayo", "link": "https://stackoverflow.com/users/10157587/sayo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 56978041, "answer_count": 1, "score": 1, "last_activity_date": 1562791940, "creation_date": 1562789074, "last_edit_date": 1562791940, "question_id": 56977881, "link": "https://stackoverflow.com/questions/56977881/replace-null-values-in-a-column-corresponding-to-specific-value-in-another-colum", "title": "Replace null values in a column corresponding to specific value in another column pandas", "body": "<p>I have a dataframe as below :</p>\n\n<pre><code>import pandas as pd\ndf = pd.DataFrame({'Country': ['USA','USA','MEX','IND','UK','UK','UK'],\n                   'Region': ['Americas','NaN','NaN','Asia','Europe','NaN','NaN'],\n                   'Flower': ['Rose','Lily','Lily','Orchid','Petunia','Lotus','Dandelion']})\n</code></pre>\n\n<p>I want to replace the <code>NaN</code> values in Region with that of other regions. By which I mean if the country is USA or Mexico the region should be Americas and if the country is UK the region should be Europe.</p>\n\n<p>The expected output is </p>\n\n<pre><code>result = pd.DataFrame({'Country': ['USA','USA','MEX','IND','UK','UK','UK'],\n                       'Region': ['Americas','Americas','Americas','Asia','Europe','Europe','Europe'],\n                       'Flower': ['Rose','Lily','Lily','Orchid','Petunia','Lotus','Dandelion']})\n</code></pre>\n\n<p>I want to know an easy way to this without having to write if else statements.</p>\n"}, {"tags": ["python", "python-3.x", "dictionary", "if-statement"], "comments": [{"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 1, "creation_date": 1562789302, "post_id": 56977858, "comment_id": 100491909, "body": "Your third attempt is invalid syntax. Your first should work although <code>is False</code> is a very bad way to write a not. Your second solution <i>does</i> work. You did <i>not</i> provide the inputs you are using nor the outputs you expect. What does &quot;prefix <code>~?</code>&quot;? <code>~?</code> loooks like a regex but python <code>startswith</code> and <code>endswith</code> only use substring matching..."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1562789484, "post_id": 56977858, "comment_id": 100491977, "body": "classic issue: <code>os.path.isdir(file)</code> is always false because you need to join the directory (file is the filename). Use <code>os.path.isdir(os.path.join(folder_path,file))</code>"}, {"owner": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "reply_to_user": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1562789588, "post_id": 56977858, "comment_id": 100492013, "body": "@Jean-Fran&#231;oisFabre Eagle eyed."}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 0, "creation_date": 1562789589, "post_id": 56977858, "comment_id": 100492014, "body": "<code>eval(not &#39;.xlsm&#39;)</code> ?? this is probably <code>false</code>"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "edited": false, "score": 1, "creation_date": 1562789655, "post_id": 56977858, "comment_id": 100492036, "body": "besides why creating a dictionary? use a <code>set</code>. You have no values to associate to the files. Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>, or at least the values of the filter parameters / a full call of the function"}, {"owner": {"reputation": 11, "user_id": 11766683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8c1b09922b33098d2a95c6418e865d4?s=128&d=identicon&r=PG&f=1", "display_name": "Austin1989", "link": "https://stackoverflow.com/users/11766683/austin1989"}, "reply_to_user": {"reputation": 84731, "user_id": 510937, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/70b13a9ae1aae1ca1aa6ac8dab4643f2?s=128&d=identicon&r=PG", "display_name": "Bakuriu", "link": "https://stackoverflow.com/users/510937/bakuriu"}, "edited": false, "score": 0, "creation_date": 1562795936, "post_id": 56977858, "comment_id": 100494218, "body": "@Bakuriu May you explain to me more about the prefix?  The prefix I want filtered out is &#39;~?&#39;, which are temporary files Google Drive creates every time a file is currently open.  folder_path = &#39;/Google Drive/Box List/New Jobs&#39; and following Jean&#39;s advice I got rid of the eval(), which is more error-prone and changed the name of the variable &quot;extension_to_filter_out&quot; to &quot;extension_to_focus_on&quot;- which now equals &#39;.xlsm&#39; .  The code now looks similar to  Shay&#39;s suggestion.  Not sure how to paste it into a comment without it looking all jumbled...  Thank you for your super quick response!"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 11766683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8c1b09922b33098d2a95c6418e865d4?s=128&d=identicon&r=PG&f=1", "display_name": "Austin1989", "link": "https://stackoverflow.com/users/11766683/austin1989"}, "edited": false, "score": 0, "creation_date": 1562854220, "post_id": 56978144, "comment_id": 100516886, "body": "Thanks Shay! That&#39;s a step in the right direction. I&#39;m not getting folders and I changed extension_to_filter_out to extension_to_focus_on, which is less error-prone without the eval(). However, I&#39;m still getting those darn temporary files in the results (files that start with &#39;~$&#39;)"}, {"owner": {"reputation": 904, "user_id": 1842491, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72068df07dd0dc2319fb2606661c4096?s=128&d=identicon&r=PG", "display_name": "Shay", "link": "https://stackoverflow.com/users/1842491/shay"}, "reply_to_user": {"reputation": 11, "user_id": 11766683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8c1b09922b33098d2a95c6418e865d4?s=128&d=identicon&r=PG&f=1", "display_name": "Austin1989", "link": "https://stackoverflow.com/users/11766683/austin1989"}, "edited": false, "score": 0, "creation_date": 1562856774, "post_id": 56978144, "comment_id": 100518505, "body": "Have you tried printing the filenames as you loop over them to see exactly what Python is seeing. Sounds like that ~$ might be getting replaced with something else."}, {"owner": {"reputation": 11, "user_id": 11766683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8c1b09922b33098d2a95c6418e865d4?s=128&d=identicon&r=PG&f=1", "display_name": "Austin1989", "link": "https://stackoverflow.com/users/11766683/austin1989"}, "edited": false, "score": 0, "creation_date": 1562856988, "post_id": 56978144, "comment_id": 100518629, "body": "Yes.  I have it currently open now.  It&#39;s weird.  When I manually enter it the results are as expected.  The only thing I can think of is that when it imports it from a text file it is adding hidden characters."}, {"owner": {"reputation": 904, "user_id": 1842491, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72068df07dd0dc2319fb2606661c4096?s=128&d=identicon&r=PG", "display_name": "Shay", "link": "https://stackoverflow.com/users/1842491/shay"}, "reply_to_user": {"reputation": 11, "user_id": 11766683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8c1b09922b33098d2a95c6418e865d4?s=128&d=identicon&r=PG&f=1", "display_name": "Austin1989", "link": "https://stackoverflow.com/users/11766683/austin1989"}, "edited": false, "score": 0, "creation_date": 1562857308, "post_id": 56978144, "comment_id": 100518823, "body": "Very wierd, because this works: &#39;~$filename&#39;.startswith(&#39;~$&#39;) -&gt; True"}, {"owner": {"reputation": 11, "user_id": 11766683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8c1b09922b33098d2a95c6418e865d4?s=128&d=identicon&r=PG&f=1", "display_name": "Austin1989", "link": "https://stackoverflow.com/users/11766683/austin1989"}, "edited": false, "score": 1, "creation_date": 1562857935, "post_id": 56978144, "comment_id": 100519173, "body": "Okay.  So I removed any hidden null characters (&#39;\\x00&#39;) and return characters (&#39;\\n&#39;) and now it is working great.  Mystery solved..."}], "tags": [], "owner": {"reputation": 904, "user_id": 1842491, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/72068df07dd0dc2319fb2606661c4096?s=128&d=identicon&r=PG", "display_name": "Shay", "link": "https://stackoverflow.com/users/1842491/shay"}, "is_accepted": true, "score": 0, "last_activity_date": 1562794781, "last_edit_date": 1562794781, "creation_date": 1562790353, "answer_id": 56978144, "question_id": 56977858, "link": "https://stackoverflow.com/questions/56977858/function-written-in-python-to-list-files-in-a-specific-folder-not-filtering-out/56978144#56978144", "title": "Function written in Python to list files in a specific folder not filtering out unwanted results", "body": "<p>You're just missing some of the finer points.</p>\n\n<p>Your <code>file</code> variable is the name of a file in <code>folder_path</code>, NOT in your working directory. <code>os.path.isdir</code> looks for <code>file</code> from outside, doesn't find it, then returns <code>False</code>.</p>\n\n<p>Let <code>os.path.isdir</code> find the directory by giving the whole path <code>os.path.join(folder_path, file)</code>.</p>\n\n<pre><code>def list_of_files(folder_path, prefix_to_filter_out, extension_to_filter_out):\n    result = {}\n    for file in os.listdir(folder_path):\n        if os.path.isdir(os.path.join(folder_path, file)) is True:\n            continue\n        if file.startswith(prefix_to_filter_out):\n            continue\n        if file.endswith(extension_to_filter_out):\n            continue\n        result[file] = None\n\n    return result    &gt;&gt;&gt; list_of_files(\"some_directory\", \"~\", \".xlsm\") # should work\n</code></pre>\n\n<p><code>continue</code> means \"go the the next file\".</p>\n\n<p>For what it's worth, multi-line <code>dict</code> function calls are a tough way to develop. An easier coding style allows you to incorporate and test these filters one at a time.</p>\n\n<p>If you're not ready to tackle unit tests yet, just run the function from the outside and check the results for one filter at a time:</p>\n\n<ul>\n<li>folders getting filtered? Yes, let's move on to prefixes.</li>\n<li>prefixes getting filteres? Yes, let's move on to file extensions.</li>\n<li>...</li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 11766683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8c1b09922b33098d2a95c6418e865d4?s=128&d=identicon&r=PG&f=1", "display_name": "Austin1989", "link": "https://stackoverflow.com/users/11766683/austin1989"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 56978144, "answer_count": 1, "score": -1, "last_activity_date": 1562856129, "creation_date": 1562788961, "last_edit_date": 1562856129, "question_id": 56977858, "link": "https://stackoverflow.com/questions/56977858/function-written-in-python-to-list-files-in-a-specific-folder-not-filtering-out", "title": "Function written in Python to list files in a specific folder not filtering out unwanted results", "body": "<p>This function is not filtering out files that match the prefix(~$) or extension (eval(not '.xlsm')) nor is it filtering out folders.</p>\n\n<p>All 3 attempts produced the same result.  I'm pretty new at this Python stuff so please dumb it down for me what I should do...</p>\n\n<p>ATTEMPT 1</p>\n\n<pre><code>def list_of_files(folder_path, prefix_to_filter_out, extension_to_filter_out):\n    ...\n        result = dict([(file, None) for file in os.listdir(folder_path)\n                       if os.path.isdir(file) is False and\n                       file.startswith(prefix_to_filter_out) is False and\n                       file.endswith(extension_to_filter_out) is False])\n    ...\n    return result\n</code></pre>\n\n<p>ATTEMPT 2</p>\n\n<pre><code>def list_of_files(folder_path, prefix_to_filter_out, extension_to_filter_out):\n    ...\n        result = dict([(file, None) for file in os.listdir(folder_path)\n                       if not(os.path.isdir(file)) and\n                       not(file.startswith(prefix_to_filter_out)) and\n                       not(file.endswith(extension_to_filter_out))])\n    ...\n    return result\n</code></pre>\n\n<p>ATTEMPT 3</p>\n\n<pre><code>def list_of_files(folder_path, prefix_to_filter_out, extension_to_filter_out):\n    ...\n        result = dict([(file, None) for file in os.listdir(folder_path)\n                       if not(os.path.isdir(file))\n                       if not(file.startswith(prefix_to_filter_out))\n                       if not(file.endswith(extension_to_filter_out))])\n    ...\n    return result\n</code></pre>\n\n<p>I expect this to filter out temporary files on Google Drive that start with '~$', filter out folders, and filter out anything besides an Excel workbook.<br>\nHowever, it is including everything- even folders.\nThis is part of an app that pops up a message box anytime a file in a specified folder is added/removed.  This gets annoying really quick because it'll pop up every time someone opens or closes a file in Google Drive. </p>\n\n<p>Thanks for the help!</p>\n\n<p>ATTEMPT 4</p>\n\n<pre><code>def list_of_files(folder_path, prefix_to_filter_out, extension_to_focus_on):\n    # Example:\n    # folder_path = '/Google Drive/Box List/New Jobs',\n    # prefix_to_filter_out = '~$',\n    # extension_to_focus_on = '.xlsm'\n    result = {}\n    for file in os.listdir(folder_path):\n        if os.path.isdir(os.path.join(folder_path, file)) is True:\n            continue\n        if file.startswith(prefix_to_filter_out):\n            continue\n        if not file.endswith(extension_to_focus_on):\n            continue\n        result[file] = None\n\n    return result\n    # Expected result:  {\n    # 1741A Tegan Lee.xlsm,\n    # 1741B Tegan Lee.xlsm,\n    # 1741C Tegan Lee.xlsm,\n    # 1742A WIZARD RENOVATIONS.xlsm,\n    # 1742B WIZARD RENOVATIONS.xlsm}\n\n    # Actual result:    {\n    # 1741A Tegan Lee.xlsm,\n    # 1741B Tegan Lee.xlsm,\n    # 1741C Tegan Lee.xlsm,\n    # 1742A WIZARD RENOVATIONS.xlsm,\n    # 1742B WIZARD RENOVATIONS.xlsm\n    # ~$1742A WIZARD RENOVATIONS.xlsm}\n</code></pre>\n\n<p>No more subfolders in result, but the prefix is not filtering properly.\nThis last file is unwanted in the result...  It is a temporary file Google Drive creates when a file is open. \nYet, when I enter the prefix in manually like so: file.startswith('~$'), it works.  When I print(prefix_to_filter_out) it spits out ~$, so it's not an input error.</p>\n"}, {"tags": ["python", "django", "ocr"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11735100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd00721706495dd04359faf5e3701887?s=128&d=identicon&r=PG&f=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/11735100/helen"}, "edited": false, "score": 0, "creation_date": 1562804017, "post_id": 56978007, "comment_id": 100495965, "body": "Oh I see, I assumed it would have saved the image because it saved the string that the user input. Sorry if it was a dumb question, I&#39;m still learning how to use Django. Thank you!"}, {"owner": {"reputation": 1118, "user_id": 11030586, "user_type": "registered", "profile_image": "https://graph.facebook.com/10101687621185634/picture?type=large", "display_name": "Jay", "link": "https://stackoverflow.com/users/11030586/jay"}, "reply_to_user": {"reputation": 13, "user_id": 11735100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd00721706495dd04359faf5e3701887?s=128&d=identicon&r=PG&f=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/11735100/helen"}, "edited": false, "score": 0, "creation_date": 1562871318, "post_id": 56978007, "comment_id": 100525498, "body": "Not dumb at all. Just a bit vague; I wasn&#39;t sure if I was answering properly. Glad I could help!"}], "tags": [], "owner": {"reputation": 1118, "user_id": 11030586, "user_type": "registered", "profile_image": "https://graph.facebook.com/10101687621185634/picture?type=large", "display_name": "Jay", "link": "https://stackoverflow.com/users/11030586/jay"}, "is_accepted": false, "score": 0, "last_activity_date": 1562789735, "creation_date": 1562789735, "answer_id": 56978007, "question_id": 56977828, "link": "https://stackoverflow.com/questions/56977828/django-can-open-image-but-not-saving-it-to-database/56978007#56978007", "title": "Django can open image, but not saving it to database", "body": "<p>Why not?</p>\n\n<pre><code>if form.is_valid():\n     image_file = request.FILES['image']\n    #the stuff to get text\n     x = Component(text=text, image=image_file)\n     x.save()\n</code></pre>\n\n<p>Am I missing something ?</p>\n"}], "owner": {"reputation": 13, "user_id": 11735100, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd00721706495dd04359faf5e3701887?s=128&d=identicon&r=PG&f=1", "display_name": "Helen", "link": "https://stackoverflow.com/users/11735100/helen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562789735, "creation_date": 1562788809, "question_id": 56977828, "link": "https://stackoverflow.com/questions/56977828/django-can-open-image-but-not-saving-it-to-database", "title": "Django can open image, but not saving it to database", "body": "<p>I created a form that will ask for a name and an image to be uploaded in django. In my views, I am using pytesseract to read the text on the image. I was able to successfully save the name and text parameters into the database, but the image itself does not save.  </p>\n\n<pre><code>`# models.py \nclass Component(models.Model):\n    Serial_number = models.CharField(max_length=20, primary_key='True', default = '')\n    image = models.ImageField(blank=True)\n    text = models.TextField(default = 'no text found')\n    Good_Candidate = models.BooleanField(default=False)\n    dimension1 = models.DecimalField(max_digits=8, decimal_places=2, blank=True, null=True)\n\n\n#forms.py\nclass partForm(forms.ModelForm):\n    Serial_number = forms.CharField(max_length=128)\n\nclass Meta:\n    model = Component\n    fields = ['Serial_number', 'image', 'text', 'dimension1']\n    widgets = {'dimension1': forms.HiddenInput(), 'text':forms.HiddenInput()}\n\n#views.py\ndef image_view(request):\n    form = partForm(request.POST, request.FILES)\n\n    if form.is_valid():\n        # make copy of the data\n        data = request.POST.copy()\n        # access image data through FILES and calling the name attribute\n        image_file = request.FILES.get('image')\n        text_content = pytesseract.image_to_string(Image.open(image_file))\n        data['text'] = text_content\n        # get largest dimension\n        text_list = []\n        zeros = ['O', 'o']\n        badChars = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'P', 'Q', 'R',\n        'S', 'T', 'U', 'V', 'W', 'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l',\n        'm', 'n', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'y', 'z', '\u2014', '\u2014\u2014', '-', '+', ':', '\\'', '\u2018', '\u2019', '$', ',', '\u00a2', '/']\n        decimals = ['_']\n        for letter in badChars:\n            text_content = text_content.replace(letter, \" \")\n        for letter in zeros:\n            text_content = text_content.replace(letter, \"0\")\n        for letter in decimals:\n            text_content = text_content.replace(letter, \".\")\n\n        text_list = text_content.split()\n\n        # remove all non digits from list\n        new_list = []\n        for i in range(0, len(text_list)):\n            if text_list[i].isdigit():\n                new_list.append(int(float(text_list[i])))\n\n        data['dimension1'] = max(new_list)\n\n        # save fields to form\n        new_form = partForm(data)\n        if new_form.is_valid:\n            new_form.save()\n        return redirect('success')\n</code></pre>\n"}, {"tags": ["python", "linux", "sftp", "paramiko", "change-password"], "comments": [{"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 4, "creation_date": 1562789907, "post_id": 56977825, "comment_id": 100492135, "body": "You cannot change password with SFTP protocol \u2013 It does not matter what Python library/module you use, or if you use any other language or tool \u2013 SFTP <i>protocol</i> does no have a capability to change passwords. \u2013 You can change a password with SSH protocol or shell though."}, {"owner": {"reputation": 10828, "user_id": 1394729, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9Ri8.jpg?s=128&g=1", "display_name": "tink", "link": "https://stackoverflow.com/users/1394729/tink"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 1, "creation_date": 1562790102, "post_id": 56977825, "comment_id": 100492221, "body": "Seconding what @MartinPrikryl said: can&#39;t be done using that protocol; at least not in a way deemed safe. <b>if</b> you were sftp&#39;ing as root you could just replace the shadow file, but that would border on criminally insane."}, {"owner": {"reputation": 59, "user_id": 8209647, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-dCWk3DmmCps/AAAAAAAAAAI/AAAAAAAADVE/j7hyIkjrQoA/photo.jpg?sz=128", "display_name": "epicwork", "link": "https://stackoverflow.com/users/8209647/epicwork"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1562791409, "post_id": 56977825, "comment_id": 100492749, "body": "@MartinPrikryl, tink thank you for your comments. If I were to do it via SSH are there any built-in modules that I can use?"}, {"owner": {"reputation": 59, "user_id": 8209647, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-dCWk3DmmCps/AAAAAAAAAAI/AAAAAAAADVE/j7hyIkjrQoA/photo.jpg?sz=128", "display_name": "epicwork", "link": "https://stackoverflow.com/users/8209647/epicwork"}, "edited": false, "score": 0, "creation_date": 1562792493, "post_id": 56977825, "comment_id": 100493156, "body": "So looks like I  need to do something like this <code>import paramiko     ssh = paramiko.SSHClient()     ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())     ssh.connect(&#39;&lt;hostname&gt;&#39;, username=&#39;&lt;username&gt;&#39;,     key_filename=&#39;private-key-file&gt;&#39;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "is_accepted": false, "score": 3, "last_activity_date": 1562824201, "last_edit_date": 1562824201, "creation_date": 1562821513, "answer_id": 56981938, "question_id": 56977825, "link": "https://stackoverflow.com/questions/56977825/changing-password-of-a-remote-linux-system-using-python-sftp/56981938#56981938", "title": "Changing password of a remote Linux system using Python (sftp)", "body": "<p>You cannot change password with SFTP protocol.</p>\n\n<p>You can change password with SSH protocol. But the SSH protocol API for changing a password is not support by the most widespread SSH server \u2013 OpenSSH. Nor it is supported by the most widespread Python SSH library \u2013 Paramiko. So this most likely won't work for you anyway.</p>\n\n<p>So in the end the only viable option is to execute a relevant shell command (<code>passwd</code> or <code>chpasswd</code>) via SSH (e.g. using Paramiko).</p>\n"}], "owner": {"reputation": 59, "user_id": 8209647, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh5.googleusercontent.com/-dCWk3DmmCps/AAAAAAAAAAI/AAAAAAAADVE/j7hyIkjrQoA/photo.jpg?sz=128", "display_name": "epicwork", "link": "https://stackoverflow.com/users/8209647/epicwork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 715, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1562993942, "creation_date": 1562788800, "last_edit_date": 1562993942, "question_id": 56977825, "link": "https://stackoverflow.com/questions/56977825/changing-password-of-a-remote-linux-system-using-python-sftp", "title": "Changing password of a remote Linux system using Python (sftp)", "body": "<p>It seems very simple, but I searched multiple resources but could not find an answer on how to change a remote Linux system password using Python and with SFTP.</p>\n\n<pre><code>def changepwd():\n    sftp_client = ssh.open_sftp()\n    #change password of root on remote server\n</code></pre>\n\n<p>Are there any built-in modules that I can use to change the password?\nThanks in advance. </p>\n\n<hr>\n\n<p>Thanks for all you help. This is how I changed the passwd for 'root'.</p>\n\n<pre><code>ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())\nssh.connect(hostname, username=Name, password=Pwd)\nprint \"Connection succesfully established ...with %s \" % hostname\n\nstdin, stdout, stderr = ssh.exec_command('echo -e \"newpasswd\\newPasswd\" | passwd')\nprint \"stderr: \", stderr.readlines()\nprint \"pwd: \", stdout.readlines()\nssh.close()\n</code></pre>\n"}, {"tags": ["python", "nlp", "spacy"], "answers": [{"tags": [], "owner": {"reputation": 780, "user_id": 2198727, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/344bbb6b1aeb3adc0eabee50682483b5?s=128&d=identicon&r=PG", "display_name": "ongenz", "link": "https://stackoverflow.com/users/2198727/ongenz"}, "is_accepted": false, "score": 0, "last_activity_date": 1562799305, "creation_date": 1562799305, "answer_id": 56979615, "question_id": 56977820, "link": "https://stackoverflow.com/questions/56977820/better-way-to-use-spacy-to-parse-sentences/56979615#56979615", "title": "Better way to use SpaCy to parse sentences?", "body": "<p>It seems like your code is trying to do something more complicated than what you describe in your question. I have tried to do what it looks like you want to do with your code. Getting the object/attribute of a verb \"is\" or \"was\" is just part of this.</p>\n\n<pre class=\"lang-py prettyprint-override\"><code>import spacy\nfrom pprint import pprint\n\nnlp = spacy.load('en')\n\ntext = \"He was a genius. I really liked working with him. He is a dog owner. She is very kind to animals.\"\n\ndef get_pro_nsubj(token):\n    # get the (lowercased) subject pronoun if there is one\n    return [child.lower_ for child in token.children if child.dep_ == 'nsubj'][0]\n\nlist_of_responses = []\n\n# a mapping of subject to object pronouns\nsubj_obj_pro_map = {'he': 'him',\n                    'she': 'her'\n                    }\n\nfor token in nlp(text):\n    if token.pos_ in ['NOUN', 'ADJ']:\n        if token.dep_ in ['attr', 'acomp'] and token.head.lower_ in ['is', 'was']:\n            # to test for lemma 'be' use token.head.lemma_ == 'be'\n            nsubj = get_pro_nsubj(token.head)\n            if nsubj in ['he', 'she']:\n                # get the text of each token in the constituent and join it all together\n                whole_constituent = ' '.join([t.text for t in token.subtree])\n                obj_pro = subj_obj_pro_map[nsubj] # convert subject to object pronoun\n                returning_phrase = 'Why do you think {} being {} helped the two of you get along?'.format(obj_pro, whole_constituent)\n                list_of_responses.append(returning_phrase)\n\npprint(list_of_responses)\n\n</code></pre>\n\n<p>Which outputs this:</p>\n\n<pre><code>['Why do you think him being a genius helped the two of you get along?',\n 'Why do you think him being a dog owner helped the two of you get along?',\n 'Why do you think her being very kind to animals helped the two of you get '\n 'along?']\n</code></pre>\n"}], "owner": {"reputation": 311, "user_id": 9259147, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10941d9a17cf906e2afcb0e7ce664746?s=128&d=identicon&r=PG&f=1", "display_name": "Will", "link": "https://stackoverflow.com/users/9259147/will"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1562799305, "creation_date": 1562788792, "question_id": 56977820, "link": "https://stackoverflow.com/questions/56977820/better-way-to-use-spacy-to-parse-sentences", "title": "Better way to use SpaCy to parse sentences?", "body": "<p>I'm using SpaCy to find sentences that contain 'is' or 'was' that have pronouns as their subjects and return the object of the sentence. My code works, but I feel like there must be a much better way to do this.</p>\n\n<pre><code>import spacy\nnlp = spacy.load('en_core_web_sm')\n\nex_phrase = nlp(\"He was a genius. I really liked working with him. He is a dog owner. She is very kind to animals.\")\n\n\n#create an empty list to hold any instance of this particular construction\nlist_of_responses = []\n\n#split into sentences\nfor sent in ex_phrase.sents:\n    for token in sent:\n        #check to see if the word 'was' or 'is' is in each sentence, if so, make a list of the verb's constituents\n        if token.text == 'was' or token.text == 'is':\n            dependency = [child for child in token.children]\n            #if the first constituent is a pronoun, make sent_object equal to the item at index 1 in the list of constituents\n            if dependency[0].pos_ == 'PRON':\n                sent_object = dependency[1]\n\n    #create a string of the entire object of the verb. For instance, if sent_object = 'genius', this would create a string 'a genius'\n    for token in sent:\n        if token == sent_object:\n            whole_constituent = [t.text for t in token.subtree]\n            whole_constituent = \" \".join(whole_constituent)\n\n    #check to see what the pronoun was, and depending on if it was 'he' or 'she', construct a coherent followup sentence\n    if dependency[0].text.lower() == 'he':\n        returning_phrase = f\"Why do you think him being {whole_constituent} helped the two of you get along?\"\n    elif dependency[0].text.lower() == 'she':\n        returning_phrase = f\"Why do you think her being {whole_constituent} helped the two of you get along?\"\n\n    #add each followup sentence to the list. For some reason it creates a lot of duplicates, so I have to use set\n    list_of_responses.append(returning_phrase)\n    list_of_responses = list(set(list_of_responses))\n</code></pre>\n"}]